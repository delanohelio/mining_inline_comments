{"pr_number": 477, "pr_title": "Vanish & Map Pools quick fix", "pr_createdAt": "2020-05-10T08:29:01Z", "pr_url": "https://github.com/PGMDev/PGM/pull/477", "timeline": [{"oid": "fe75b03f0d8f0eb7399673a9b5a282173e23eac1", "url": "https://github.com/PGMDev/PGM/commit/fe75b03f0d8f0eb7399673a9b5a282173e23eac1", "message": "Fix vanish logins and pool persistence between restarts\n* Also add /reloadpools\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>", "committedDate": "2020-05-10T08:18:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY0MDIwNQ==", "url": "https://github.com/PGMDev/PGM/pull/477#discussion_r422640205", "bodyText": "I would rather add this functionality to /pgm, and no need for any command output. It's just like reloading any other part of the config.", "author": "Electroid", "createdAt": "2020-05-10T12:40:20Z", "path": "core/src/main/java/tc/oc/pgm/commands/AdminCommands.java", "diffHunk": "@@ -229,6 +229,25 @@ public void pgm() {\n     PGM.get().reloadConfig();\n   }\n \n+  @Command(\n+      aliases = {\"reloadpools\"},", "originalCommit": "fe75b03f0d8f0eb7399673a9b5a282173e23eac1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2NDMzNQ==", "url": "https://github.com/PGMDev/PGM/pull/477#discussion_r422664335", "bodyText": "Alrighty! I mainly split it up to provide the output, but if it\u2019s not necessary I\u2019ll add this to /pgm \ud83d\udc4d", "author": "applenick", "createdAt": "2020-05-10T16:00:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY0MDIwNQ=="}], "type": "inlineReview", "revised_code": {"commit": "6c6bfc3793752ceb643a326ff04c6e6f8a287a58", "chunk": "diff --git a/core/src/main/java/tc/oc/pgm/commands/AdminCommands.java b/core/src/main/java/tc/oc/pgm/commands/AdminCommands.java\nindex aa2cb3b5..7ecdf21f 100644\n--- a/core/src/main/java/tc/oc/pgm/commands/AdminCommands.java\n+++ b/core/src/main/java/tc/oc/pgm/commands/AdminCommands.java\n\n@@ -227,25 +227,7 @@ public class AdminCommands {\n       perms = Permissions.RELOAD)\n   public void pgm() {\n     PGM.get().reloadConfig();\n-  }\n-\n-  @Command(\n-      aliases = {\"reloadpools\"},\n-      desc = \"Reload map pools\",\n-      perms = Permissions.RELOAD)\n-  public void reloadMapPools(Audience viewer) {\n-    if (PGM.get().getMapOrder() instanceof MapPoolManager) {\n-      int poolCount = ((MapPoolManager) PGM.get().getMapOrder()).reload();\n-      viewer.sendWarning(\n-          TranslatableComponent.of(\"command.admin.reloadPools\", TextColor.GREEN)\n-              .args(TextComponent.of(poolCount, TextColor.GOLD))\n-              .append(TextComponent.space())\n-              .append(\n-                  TranslatableComponent.of(\n-                      poolCount != 1 ? \"pool.title\" : \"pool.name\", TextColor.GREEN)));\n-    } else {\n-      viewer.sendWarning(TranslatableComponent.of(\"command.notEnabled\"));\n-    }\n+    PGM.get().getMapOrder().reload();\n   }\n \n   private static Map<String, Competitor> getCompetitorMap(CommandSender sender, Match match) {\n"}}, {"oid": "6c6bfc3793752ceb643a326ff04c6e6f8a287a58", "url": "https://github.com/PGMDev/PGM/commit/6c6bfc3793752ceb643a326ff04c6e6f8a287a58", "message": "Merge /reloadpools into /pgm\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>", "committedDate": "2020-05-10T16:18:02Z", "type": "commit"}]}