{"pr_number": 706, "pr_title": "Ensure blitz life count is at least 1", "pr_createdAt": "2020-11-15T00:42:14Z", "pr_url": "https://github.com/PGMDev/PGM/pull/706", "timeline": [{"oid": "d9c720fd0b1e0fc6b0a14fa905dd781154cad09a", "url": "https://github.com/PGMDev/PGM/commit/d9c720fd0b1e0fc6b0a14fa905dd781154cad09a", "message": "Ensure blitz life count is at least 1\n\nSigned-off-by: Austin L Mayes <me@austinlm.me>", "committedDate": "2020-11-14T17:25:33Z", "type": "commit"}, {"oid": "22a9580d0f2fb260dc2bc5e6bef7b2b40c7b5d90", "url": "https://github.com/PGMDev/PGM/commit/22a9580d0f2fb260dc2bc5e6bef7b2b40c7b5d90", "message": "Merge branch 'dev' into fix/blitz-lives", "committedDate": "2020-11-15T01:08:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzU2MTkzOA==", "url": "https://github.com/PGMDev/PGM/pull/706#discussion_r523561938", "bodyText": "Instead of adding explicit checks, you can change the signature of this instance of parseNumber and provide a Range. See XMLUtils#parseNumber", "author": "Electroid", "createdAt": "2020-11-15T01:18:05Z", "path": "core/src/main/java/tc/oc/pgm/blitz/BlitzModule.java", "diffHunk": "@@ -47,6 +47,9 @@ public BlitzModule parse(MapFactory factory, Logger logger, Document doc)\n       for (Element blitzEl : blitzElements) {\n         boolean broadcastLives = XMLUtils.parseBoolean(blitzEl.getChild(\"broadcastLives\"), true);\n         int lives = XMLUtils.parseNumber(Node.fromChildOrAttr(blitzEl, \"lives\"), Integer.class, 1);", "originalCommit": "22a9580d0f2fb260dc2bc5e6bef7b2b40c7b5d90", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "184d6b2877204ec3976500a43c627d54e5bf0018", "chunk": "diff --git a/core/src/main/java/tc/oc/pgm/blitz/BlitzModule.java b/core/src/main/java/tc/oc/pgm/blitz/BlitzModule.java\nindex 6cd31de4..e8b9c114 100644\n--- a/core/src/main/java/tc/oc/pgm/blitz/BlitzModule.java\n+++ b/core/src/main/java/tc/oc/pgm/blitz/BlitzModule.java\n\n@@ -46,9 +47,9 @@ public class BlitzModule implements MapModule {\n \n       for (Element blitzEl : blitzElements) {\n         boolean broadcastLives = XMLUtils.parseBoolean(blitzEl.getChild(\"broadcastLives\"), true);\n-        int lives = XMLUtils.parseNumber(Node.fromChildOrAttr(blitzEl, \"lives\"), Integer.class, 1);\n-\n-        if (lives < 1) throw new InvalidXMLException(\"Blitz lives must be at least 1\", blitzEl);\n+        int lives =\n+            XMLUtils.parseNumber(\n+                Node.fromChildOrAttr(blitzEl, \"lives\"), Integer.class, Range.atLeast(1), 1);\n \n         config = new BlitzConfig(lives, broadcastLives);\n       }\n"}}, {"oid": "4f3beec542d7391545c21170d4fb9bf48c225e38", "url": "https://github.com/PGMDev/PGM/commit/4f3beec542d7391545c21170d4fb9bf48c225e38", "message": "Merge branch 'dev' into fix/blitz-lives", "committedDate": "2020-11-15T04:12:58Z", "type": "commit"}, {"oid": "184d6b2877204ec3976500a43c627d54e5bf0018", "url": "https://github.com/PGMDev/PGM/commit/184d6b2877204ec3976500a43c627d54e5bf0018", "message": "Use range validation for blitz lives\n\nSigned-off-by: Austin L Mayes <me@austinlm.me>", "committedDate": "2020-11-15T04:24:17Z", "type": "commit"}, {"oid": "8271ef4d2e11694a7d0440f571ff377afa582961", "url": "https://github.com/PGMDev/PGM/commit/8271ef4d2e11694a7d0440f571ff377afa582961", "message": "Use a special method name for range validation\n\nSigned-off-by: Austin L Mayes <me@austinlm.me>", "committedDate": "2020-11-15T05:09:52Z", "type": "commit"}]}