{"pr_number": 378, "pr_title": "Add sound to custom projectile impact", "pr_createdAt": "2020-03-26T06:31:43Z", "pr_url": "https://github.com/PGMDev/PGM/pull/378", "timeline": [{"oid": "1acc1c38e8cc0e121ebcfe280bca143b33338ef2", "url": "https://github.com/PGMDev/PGM/commit/1acc1c38e8cc0e121ebcfe280bca143b33338ef2", "message": "Play sound effect for custom projectiles\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>", "committedDate": "2020-03-26T05:56:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2NTQ2Ng==", "url": "https://github.com/PGMDev/PGM/pull/378#discussion_r398565466", "bodyText": "I am not convinced that this is an optional sound. Vanilla minecraft does the ding no matter your sound setting, and this also should", "author": "Pablete1234", "createdAt": "2020-03-26T13:20:40Z", "path": "core/src/main/java/tc/oc/pgm/modules/ModifyBowProjectileMatchModule.java", "diffHunk": "@@ -123,6 +127,16 @@ public void fixEntityDamage(EntityDamageByEntityEvent event) {\n               velocity.getZ() + projectileVelocity.getZ() * knockback * 0.6 / horizontalSpeed);\n           event.getEntity().setVelocity(velocity);\n         }\n+\n+        // If the projectile is not an arrow, play an impact sound.\n+        if (event.getEntity() instanceof Player\n+            && (projectile instanceof Projectile && !(projectile instanceof Arrow))) {\n+          Projectile customProjectile = (Projectile) projectile;\n+          if (customProjectile.getShooter() instanceof Player) {\n+            Player bukkitShooter = (Player) customProjectile.getShooter();\n+            SoundsMatchModule.playSound(match.getPlayer(bukkitShooter), PROJECTILE_SOUND);", "originalCommit": "1acc1c38e8cc0e121ebcfe280bca143b33338ef2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY5Mjc1MQ==", "url": "https://github.com/PGMDev/PGM/pull/378#discussion_r398692751", "bodyText": "I would agree, let's keep it default.", "author": "Electroid", "createdAt": "2020-03-26T16:04:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2NTQ2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcxMjgxNA==", "url": "https://github.com/PGMDev/PGM/pull/378#discussion_r398712814", "bodyText": "@Pablete1234 and @Electroid thanks for clarifying this. I was unsure about whether to make it default or not and I agree, it\u2019s been adjusted!", "author": "applenick", "createdAt": "2020-03-26T16:29:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2NTQ2Ng=="}], "type": "inlineReview", "revised_code": {"commit": "039fe72675f7a3cf0e1b2c5f2c271f08d51f9703", "chunk": "diff --git a/core/src/main/java/tc/oc/pgm/modules/ModifyBowProjectileMatchModule.java b/core/src/main/java/tc/oc/pgm/modules/ModifyBowProjectileMatchModule.java\nindex 0bb6325..336619f 100644\n--- a/core/src/main/java/tc/oc/pgm/modules/ModifyBowProjectileMatchModule.java\n+++ b/core/src/main/java/tc/oc/pgm/modules/ModifyBowProjectileMatchModule.java\n\n@@ -134,7 +135,10 @@ public class ModifyBowProjectileMatchModule implements MatchModule, Listener {\n           Projectile customProjectile = (Projectile) projectile;\n           if (customProjectile.getShooter() instanceof Player) {\n             Player bukkitShooter = (Player) customProjectile.getShooter();\n-            SoundsMatchModule.playSound(match.getPlayer(bukkitShooter), PROJECTILE_SOUND);\n+            MatchPlayer shooter = match.getPlayer(bukkitShooter);\n+            if (shooter != null) {\n+              shooter.playSound(PROJECTILE_SOUND);\n+            }\n           }\n         }\n       }\n"}}, {"oid": "039fe72675f7a3cf0e1b2c5f2c271f08d51f9703", "url": "https://github.com/PGMDev/PGM/commit/039fe72675f7a3cf0e1b2c5f2c271f08d51f9703", "message": "Always play projectile impact sound\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>", "committedDate": "2020-03-26T16:27:37Z", "type": "commit"}]}