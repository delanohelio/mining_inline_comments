{"pr_number": 4410, "pr_title": "CAMEL-15666: Fix PackageDataFormatMojo handling of classes with generic types", "pr_createdAt": "2020-10-09T17:40:47Z", "pr_url": "https://github.com/apache/camel/pull/4410", "timeline": [{"oid": "1055ef4ed04aeafd22fcaaa6791541a1cfe9fdb4", "url": "https://github.com/apache/camel/commit/1055ef4ed04aeafd22fcaaa6791541a1cfe9fdb4", "message": "CAMEL-15666: Fix DataFormat mojo generics handling", "committedDate": "2020-10-09T17:33:27Z", "type": "commit"}, {"oid": "8ebe53c5a444b35e5add607646229808096f38a7", "url": "https://github.com/apache/camel/commit/8ebe53c5a444b35e5add607646229808096f38a7", "message": "CAMEL-15666: Regen", "committedDate": "2020-10-09T17:33:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjU4NDkxMA==", "url": "https://github.com/apache/camel/pull/4410#discussion_r502584910", "bodyText": "Great catch. I wonder if you could add a code comment above this why you are doing this reg exp replaceAll - as when we look at this code in 6 month or later then we wouldnt remember why.", "author": "davsclaus", "createdAt": "2020-10-09T17:49:07Z", "path": "tooling/maven/camel-package-maven-plugin/src/main/java/org/apache/camel/maven/packaging/PackageDataFormatMojo.java", "diffHunk": "@@ -515,7 +515,7 @@ private static String schemaSubDirectory(String javaType) {\n     private Optional<JavaClassSource> doParseJavaClassSource(String className) {\n         try {\n             Path srcDir = project.getBasedir().toPath().resolve(\"src/main/java\");\n-            Path file = srcDir.resolve(className.replace('.', '/') + \".java\");\n+            Path file = srcDir.resolve(className.replaceAll(\"<.*>\", \"\").replace('.', '/') + \".java\");", "originalCommit": "8ebe53c5a444b35e5add607646229808096f38a7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "da3ea904198183fb628cf590e3c1ea28dd75b5dc", "chunk": "diff --git a/tooling/maven/camel-package-maven-plugin/src/main/java/org/apache/camel/maven/packaging/PackageDataFormatMojo.java b/tooling/maven/camel-package-maven-plugin/src/main/java/org/apache/camel/maven/packaging/PackageDataFormatMojo.java\nindex 8d439a7614c..5f2f6740e3e 100644\n--- a/tooling/maven/camel-package-maven-plugin/src/main/java/org/apache/camel/maven/packaging/PackageDataFormatMojo.java\n+++ b/tooling/maven/camel-package-maven-plugin/src/main/java/org/apache/camel/maven/packaging/PackageDataFormatMojo.java\n\n@@ -515,6 +515,7 @@ public class PackageDataFormatMojo extends AbstractGeneratorMojo {\n     private Optional<JavaClassSource> doParseJavaClassSource(String className) {\n         try {\n             Path srcDir = project.getBasedir().toPath().resolve(\"src/main/java\");\n+            // Remove <.*> from className, as the string may contain generic types\n             Path file = srcDir.resolve(className.replaceAll(\"<.*>\", \"\").replace('.', '/') + \".java\");\n             if (!Files.isRegularFile(file)) {\n                 return Optional.empty();\n"}}, {"oid": "da3ea904198183fb628cf590e3c1ea28dd75b5dc", "url": "https://github.com/apache/camel/commit/da3ea904198183fb628cf590e3c1ea28dd75b5dc", "message": "CAMEL-15666: Add comment", "committedDate": "2020-10-09T17:56:39Z", "type": "commit"}]}