{"pr_number": 4028, "pr_title": "camel-arangodb: add components configuration", "pr_createdAt": "2020-07-21T15:37:22Z", "pr_url": "https://github.com/apache/camel/pull/4028", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE5ODgyOA==", "url": "https://github.com/apache/camel/pull/4028#discussion_r458198828", "bodyText": "I'd assume at least host and port are required, then I think it makes sense to add required metadata to any required fields.", "author": "omarsmak", "createdAt": "2020-07-21T15:43:53Z", "path": "components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java", "diffHunk": "@@ -0,0 +1,141 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.component.arangodb;\n+\n+import org.apache.camel.RuntimeCamelException;\n+import org.apache.camel.spi.UriParam;\n+import org.apache.camel.spi.UriParams;\n+\n+@UriParams\n+public class ArangoDbConfiguration implements Cloneable {\n+    private String database;\n+    @UriParam\n+    private String host;", "originalCommit": "187286283b52f84f06ae7617ab14aa3abaaa9e37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIxMDcyNA==", "url": "https://github.com/apache/camel/pull/4028#discussion_r458210724", "bodyText": "I didn't make them required actually. Since the arangoDb driver has default values if no host/port indicated (same for user/password)", "author": "zbendhiba", "createdAt": "2020-07-21T16:00:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE5ODgyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYxNTk3Mg==", "url": "https://github.com/apache/camel/pull/4028#discussion_r458615972", "bodyText": "ah then is all fine", "author": "omarsmak", "createdAt": "2020-07-22T08:14:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE5ODgyOA=="}], "type": "inlineReview", "revised_code": {"commit": "ed6df277cb2bbae4c5603b992552f2232998a667", "chunk": "diff --git a/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java b/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java\nindex 67ccf37e6d3..62ff4b25b6a 100644\n--- a/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java\n+++ b/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java\n\n@@ -23,17 +23,17 @@ import org.apache.camel.spi.UriParams;\n @UriParams\n public class ArangoDbConfiguration implements Cloneable {\n     private String database;\n-    @UriParam\n+    @UriParam(label = \"producer\")\n     private String host;\n-    @UriParam\n+    @UriParam(label = \"producer\")\n     private int port;\n     @UriParam(label = \"security\", secret = true)\n     private String user;\n     @UriParam(label = \"security\", secret = true)\n     private String password;\n-    @UriParam\n+    @UriParam(label = \"producer\")\n     private String collection;\n-    @UriParam\n+    @UriParam(label = \"producer\")\n     private ArangoDbOperation operation;\n \n     public ArangoDbConfiguration() {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE5OTg4Ng==", "url": "https://github.com/apache/camel/pull/4028#discussion_r458199886", "bodyText": "Also label here are missing for the configurations, e.g: producer, consumer or common .. etc", "author": "omarsmak", "createdAt": "2020-07-21T15:45:17Z", "path": "components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java", "diffHunk": "@@ -0,0 +1,141 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.component.arangodb;\n+\n+import org.apache.camel.RuntimeCamelException;\n+import org.apache.camel.spi.UriParam;\n+import org.apache.camel.spi.UriParams;\n+\n+@UriParams\n+public class ArangoDbConfiguration implements Cloneable {\n+    private String database;\n+    @UriParam\n+    private String host;\n+    @UriParam\n+    private int port;\n+    @UriParam(label = \"security\", secret = true)\n+    private String user;\n+    @UriParam(label = \"security\", secret = true)\n+    private String password;\n+    @UriParam", "originalCommit": "187286283b52f84f06ae7617ab14aa3abaaa9e37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY1NDA2NA==", "url": "https://github.com/apache/camel/pull/4028#discussion_r458654064", "bodyText": "@zbendhiba can you please add labels here?", "author": "oscerd", "createdAt": "2020-07-22T09:17:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE5OTg4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY2NzAxNg==", "url": "https://github.com/apache/camel/pull/4028#discussion_r458667016", "bodyText": "yes , done !!", "author": "zbendhiba", "createdAt": "2020-07-22T09:39:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE5OTg4Ng=="}], "type": "inlineReview", "revised_code": {"commit": "ed6df277cb2bbae4c5603b992552f2232998a667", "chunk": "diff --git a/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java b/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java\nindex 67ccf37e6d3..62ff4b25b6a 100644\n--- a/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java\n+++ b/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbConfiguration.java\n\n@@ -23,17 +23,17 @@ import org.apache.camel.spi.UriParams;\n @UriParams\n public class ArangoDbConfiguration implements Cloneable {\n     private String database;\n-    @UriParam\n+    @UriParam(label = \"producer\")\n     private String host;\n-    @UriParam\n+    @UriParam(label = \"producer\")\n     private int port;\n     @UriParam(label = \"security\", secret = true)\n     private String user;\n     @UriParam(label = \"security\", secret = true)\n     private String password;\n-    @UriParam\n+    @UriParam(label = \"producer\")\n     private String collection;\n-    @UriParam\n+    @UriParam(label = \"producer\")\n     private ArangoDbOperation operation;\n \n     public ArangoDbConfiguration() {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwMTI4Nw==", "url": "https://github.com/apache/camel/pull/4028#discussion_r458201287", "bodyText": "Perhaps before setting the database, it would make sense to check its validity (e.g: is not empty)", "author": "omarsmak", "createdAt": "2020-07-21T15:47:12Z", "path": "components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbComponent.java", "diffHunk": "@@ -18,15 +18,44 @@\n \n import java.util.Map;\n \n+import org.apache.camel.CamelContext;\n import org.apache.camel.Endpoint;\n+import org.apache.camel.spi.Metadata;\n+import org.apache.camel.spi.annotations.Component;\n import org.apache.camel.support.DefaultComponent;\n \n-@org.apache.camel.spi.annotations.Component(\"arangodb\")\n+@Component(\"arangodb\")\n public class ArangoDbComponent extends DefaultComponent {\n \n+    @Metadata\n+    private ArangoDbConfiguration configuration = new ArangoDbConfiguration();\n+\n+    public ArangoDbComponent() {\n+        this(null);\n+    }\n+\n+    public ArangoDbComponent(CamelContext context) {\n+        super(context);\n+    }\n+\n     protected Endpoint createEndpoint(String uri, String remaining, Map<String, Object> parameters) throws Exception {\n-        Endpoint endpoint = new ArangoDbEndpoint(uri, this);\n+        final ArangoDbConfiguration configuration = this.configuration != null ? this.configuration.copy() : new ArangoDbConfiguration();\n+        configuration.setDatabase(remaining);", "originalCommit": "187286283b52f84f06ae7617ab14aa3abaaa9e37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYxNzE2NA==", "url": "https://github.com/apache/camel/pull/4028#discussion_r458617164", "bodyText": "since arango driver has default values, I don't see the need for the check here", "author": "omarsmak", "createdAt": "2020-07-22T08:16:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwMTI4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY2NzU2Nw==", "url": "https://github.com/apache/camel/pull/4028#discussion_r458667567", "bodyText": "we do need database name at minimum for any operation", "author": "zbendhiba", "createdAt": "2020-07-22T09:40:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwMTI4Nw=="}], "type": "inlineReview", "revised_code": {"commit": "ed6df277cb2bbae4c5603b992552f2232998a667", "chunk": "diff --git a/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbComponent.java b/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbComponent.java\nindex 55766e9dd13..bde63e2cc75 100644\n--- a/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbComponent.java\n+++ b/components/camel-arangodb/src/main/java/org/apache/camel/component/arangodb/ArangoDbComponent.java\n\n@@ -23,6 +23,7 @@ import org.apache.camel.Endpoint;\n import org.apache.camel.spi.Metadata;\n import org.apache.camel.spi.annotations.Component;\n import org.apache.camel.support.DefaultComponent;\n+import org.apache.camel.util.ObjectHelper;\n \n @Component(\"arangodb\")\n public class ArangoDbComponent extends DefaultComponent {\n"}}, {"oid": "ed6df277cb2bbae4c5603b992552f2232998a667", "url": "https://github.com/apache/camel/commit/ed6df277cb2bbae4c5603b992552f2232998a667", "message": "camel-arangodb: add components attributes", "committedDate": "2020-07-22T09:37:41Z", "type": "commit"}, {"oid": "ed6df277cb2bbae4c5603b992552f2232998a667", "url": "https://github.com/apache/camel/commit/ed6df277cb2bbae4c5603b992552f2232998a667", "message": "camel-arangodb: add components attributes", "committedDate": "2020-07-22T09:37:41Z", "type": "forcePushed"}]}