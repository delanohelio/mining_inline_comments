{"pr_number": 4509, "pr_title": "[CAMEL-15748] nullify mqtt client on producer and consumer stop", "pr_createdAt": "2020-10-25T09:54:19Z", "pr_url": "https://github.com/apache/camel/pull/4509", "timeline": [{"oid": "f22ea0c17144ccddb99fd503ffce3fe64b84051e", "url": "https://github.com/apache/camel/commit/f22ea0c17144ccddb99fd503ffce3fe64b84051e", "message": "CAMEL-15748: nullify mqtt client on producer and consumer stop\n\nWhen restarting a route with a paho consumer or using a paho producer\nafter a connection failure to the broker the mqtt client was not\nreconnected. This patch sets consumer and producer internl mqtt  client\ninstance to null os stop, so that a restart will create a new instance\nand connect to the broker again.", "committedDate": "2020-10-25T10:40:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYwMjcyMQ==", "url": "https://github.com/apache/camel/pull/4509#discussion_r511602721", "bodyText": "You need to add the ASF license header to the top of this file.", "author": "davsclaus", "createdAt": "2020-10-25T14:16:37Z", "path": "components/camel-paho/src/test/java/org/apache/camel/component/paho/PahoReconnectAfterFailureTest.java", "diffHunk": "@@ -0,0 +1,128 @@\n+package org.apache.camel.component.paho;", "originalCommit": "f22ea0c17144ccddb99fd503ffce3fe64b84051e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c69169867fc50ab75f381fd987975b36fa56d477", "chunk": "diff --git a/components/camel-paho/src/test/java/org/apache/camel/component/paho/PahoReconnectAfterFailureTest.java b/components/camel-paho/src/test/java/org/apache/camel/component/paho/PahoReconnectAfterFailureTest.java\nindex 622d6d28966..0f0bc6f11b3 100644\n--- a/components/camel-paho/src/test/java/org/apache/camel/component/paho/PahoReconnectAfterFailureTest.java\n+++ b/components/camel-paho/src/test/java/org/apache/camel/component/paho/PahoReconnectAfterFailureTest.java\n\n@@ -1,3 +1,19 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n package org.apache.camel.component.paho;\n \n import java.util.concurrent.CountDownLatch;\n"}}, {"oid": "c69169867fc50ab75f381fd987975b36fa56d477", "url": "https://github.com/apache/camel/commit/c69169867fc50ab75f381fd987975b36fa56d477", "message": "Added ASF license header on PahoReconnectAfterFailureTest", "committedDate": "2020-10-25T14:21:54Z", "type": "commit"}]}