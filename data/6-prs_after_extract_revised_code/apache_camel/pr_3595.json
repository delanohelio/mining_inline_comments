{"pr_number": 3595, "pr_title": "CAMEL-14608: add support for dead letter policies to camel-pulsar", "pr_createdAt": "2020-02-21T23:01:38Z", "pr_url": "https://github.com/apache/camel/pull/3595", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg5MjA3Mg==", "url": "https://github.com/apache/camel/pull/3595#discussion_r382892072", "bodyText": "Lets avoid using {xxx} in the description but just the name of the option is fine", "author": "davsclaus", "createdAt": "2020-02-22T06:50:00Z", "path": "components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java", "diffHunk": "@@ -55,6 +55,10 @@\n     private long ackGroupTimeMillis = 100;\n     @UriParam(label = \"consumer\", defaultValue = \"LATEST\")\n     private SubscriptionInitialPosition subscriptionInitialPosition = LATEST;\n+    @UriParam(label = \"consumer\", description = \"Maximum number of times that a message will be redelivered before being sent to the dead letter queue. If this value is not set, no Dead Letter Policy will be created\")\n+    private Integer maxRedeliverCount;\n+    @UriParam(label = \"consumer\", description = \"Name of the topic where the messages which fail {maxRedeliverCount} times will be sent. Note: if not set, default topic name will be <topicname>-<subscriptionname>-DLQ\")", "originalCommit": "43557874d02588ea8dc2ad4c58d0a563e884be9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg5MjEwMw==", "url": "https://github.com/apache/camel/pull/3595#discussion_r382892103", "bodyText": "Also avoid the < > in the DLQ name as the generated docs in the json will strip out invalid characters.", "author": "davsclaus", "createdAt": "2020-02-22T06:50:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg5MjA3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "d5402db486e85d54dcc3a689605f7a51de44c50c", "chunk": "diff --git a/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java b/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java\nindex 6cf7659f1bd..b566aff1128 100644\n--- a/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java\n+++ b/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java\n\n@@ -51,6 +51,8 @@ public class PulsarConfiguration {\n     private boolean allowManualAcknowledgement;\n     @UriParam(label = \"consumer\", defaultValue = \"10000\")\n     private long ackTimeoutMillis = 10000;\n+    @UriParam(label = \"consumer\", defaultValue = \"60000000\")\n+    private long negativeAckRedeliveryDelayMicros = 60000000;\n     @UriParam(label = \"consumer\", defaultValue = \"100\")\n     private long ackGroupTimeMillis = 100;\n     @UriParam(label = \"consumer\", defaultValue = \"LATEST\")\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg5MjE3NQ==", "url": "https://github.com/apache/camel/pull/3595#discussion_r382892175", "bodyText": "This javadoc and the option description are not the same, eg if the other options dont have javadoc then remove it also here, eg they are documented in the json/adoc file which is the important place", "author": "davsclaus", "createdAt": "2020-02-22T06:51:41Z", "path": "components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java", "diffHunk": "@@ -354,4 +358,28 @@ public void setMessageRouter(MessageRouter messageRouter) {\n         this.messageRouter = messageRouter;\n     }\n \n+    public Integer getMaxRedeliverCount() {\n+        return maxRedeliverCount;\n+    }\n+\n+    /**", "originalCommit": "43557874d02588ea8dc2ad4c58d0a563e884be9d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d5402db486e85d54dcc3a689605f7a51de44c50c", "chunk": "diff --git a/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java b/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java\nindex 6cf7659f1bd..b566aff1128 100644\n--- a/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java\n+++ b/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/configuration/PulsarConfiguration.java\n\n@@ -358,6 +360,16 @@ public class PulsarConfiguration {\n         this.messageRouter = messageRouter;\n     }\n \n+    public long getNegativeAckRedeliveryDelayMicros() {\n+        return negativeAckRedeliveryDelayMicros;\n+    }\n+\n+    /**\n+     * Set the negative acknowledgement delay\n+     */\n+    public void setNegativeAckRedeliveryDelayMicros(long negativeAckRedeliveryDelayMicros) {\n+        this.negativeAckRedeliveryDelayMicros = negativeAckRedeliveryDelayMicros;\n+    }\n     public Integer getMaxRedeliverCount() {\n         return maxRedeliverCount;\n     }\n"}}, {"oid": "d5402db486e85d54dcc3a689605f7a51de44c50c", "url": "https://github.com/apache/camel/commit/d5402db486e85d54dcc3a689605f7a51de44c50c", "message": "CAMEL-14608: add support for dead letter policies to camel-pulsar", "committedDate": "2020-02-24T16:20:10Z", "type": "commit"}, {"oid": "6817e57483c8c23b41458b1275838db3dadd6b9d", "url": "https://github.com/apache/camel/commit/6817e57483c8c23b41458b1275838db3dadd6b9d", "message": "CAMEL-14608: address documentation issues", "committedDate": "2020-02-24T16:20:33Z", "type": "commit"}, {"oid": "6817e57483c8c23b41458b1275838db3dadd6b9d", "url": "https://github.com/apache/camel/commit/6817e57483c8c23b41458b1275838db3dadd6b9d", "message": "CAMEL-14608: address documentation issues", "committedDate": "2020-02-24T16:20:33Z", "type": "forcePushed"}]}