{"pr_number": 2029, "pr_title": "Move reflections to reflections8", "pr_createdAt": "2020-03-07T00:13:17Z", "pr_url": "https://github.com/JanusGraph/janusgraph/pull/2029", "timeline": [{"oid": "2f1f1a94599673d1e5099ee1e16460a240c70195", "url": "https://github.com/JanusGraph/janusgraph/commit/2f1f1a94599673d1e5099ee1e16460a240c70195", "message": "Move reflections to reflections 8\n\nSigned-off-by: Oleksandr Porunov <alexandr.porunov@gmail.com>", "committedDate": "2020-03-08T02:46:29Z", "type": "forcePushed"}, {"oid": "1ff85b7f6ac3519196b29efcddfad47df98368ca", "url": "https://github.com/JanusGraph/janusgraph/commit/1ff85b7f6ac3519196b29efcddfad47df98368ca", "message": "Move reflections to reflections 8\n\nSigned-off-by: Oleksandr Porunov <alexandr.porunov@gmail.com>", "committedDate": "2020-03-08T02:56:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUwNTE2Mg==", "url": "https://github.com/JanusGraph/janusgraph/pull/2029#discussion_r389505162", "bodyText": "typo: the problem in the code\nIf this test only has the purpose to check whether we are affected by the bug in reflections8, then I think that it makes sense to link to that issue here in a comment.", "author": "FlorianHockmann", "createdAt": "2020-03-09T07:57:03Z", "path": "janusgraph-test/src/test/java/org/janusgraph/core/util/ReflectiveConfigOptionLoaderTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+// Copyright 2020 JanusGraph Authors\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package org.janusgraph.core.util;\n+\n+import org.janusgraph.graphdb.configuration.PreInitializeConfigOptions;\n+import org.junit.jupiter.api.Test;\n+import org.reflections8.Reflections;\n+import org.reflections8.scanners.SubTypesScanner;\n+import org.reflections8.scanners.TypeAnnotationsScanner;\n+\n+import java.util.Collections;\n+\n+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n+\n+public class ReflectiveConfigOptionLoaderTest {\n+\n+    @Test\n+    public void shouldLoadAllClasses(){\n+        org.reflections8.Configuration rc = new org.reflections8.util.ConfigurationBuilder()\n+            .setUrls(Collections.emptyList())\n+            .setScanners(new TypeAnnotationsScanner(), new SubTypesScanner());\n+        Reflections reflections = new Reflections(rc);\n+        assertDoesNotThrow(() -> reflections.getTypesAnnotatedWith(PreInitializeConfigOptions.class));\n+        /*\n+        To reproduce the problem is the code, we can use the next example but notice that the assertion will fail", "originalCommit": "1ff85b7f6ac3519196b29efcddfad47df98368ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgyODQ5Mg==", "url": "https://github.com/JanusGraph/janusgraph/pull/2029#discussion_r389828492", "bodyText": "Thank you! I have fixed this misspell and also I have added the reference to the bug into javadoc of the test.", "author": "porunov", "createdAt": "2020-03-09T17:01:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUwNTE2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "0c8b236c7ddf71b6fafcdd47d2a03add2a007759", "chunk": "diff --git a/janusgraph-test/src/test/java/org/janusgraph/core/util/ReflectiveConfigOptionLoaderTest.java b/janusgraph-test/src/test/java/org/janusgraph/core/util/ReflectiveConfigOptionLoaderTest.java\nindex 4b4c7af05..d09734da2 100644\n--- a/janusgraph-test/src/test/java/org/janusgraph/core/util/ReflectiveConfigOptionLoaderTest.java\n+++ b/janusgraph-test/src/test/java/org/janusgraph/core/util/ReflectiveConfigOptionLoaderTest.java\n\n@@ -26,6 +26,11 @@ import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n \n public class ReflectiveConfigOptionLoaderTest {\n \n+    /**\n+     * The test checks if the included `reflections` dependency with the bug\n+     * https://github.com/ronmamo/reflections/issues/273 or not.\n+     * The bug in `reflections` was introduced in the version `0.9.12`.\n+     */\n     @Test\n     public void shouldLoadAllClasses(){\n         org.reflections8.Configuration rc = new org.reflections8.util.ConfigurationBuilder()\n"}}, {"oid": "0c8b236c7ddf71b6fafcdd47d2a03add2a007759", "url": "https://github.com/JanusGraph/janusgraph/commit/0c8b236c7ddf71b6fafcdd47d2a03add2a007759", "message": "Move reflections to reflections 8\n\nSigned-off-by: Oleksandr Porunov <alexandr.porunov@gmail.com>", "committedDate": "2020-03-09T16:56:42Z", "type": "forcePushed"}, {"oid": "33a11bc60338ca066417e6d2d34cee1b4678cc7f", "url": "https://github.com/JanusGraph/janusgraph/commit/33a11bc60338ca066417e6d2d34cee1b4678cc7f", "message": "Move reflections to reflections 8\n\nSigned-off-by: Oleksandr Porunov <alexandr.porunov@gmail.com>", "committedDate": "2020-03-09T16:59:26Z", "type": "commit"}, {"oid": "33a11bc60338ca066417e6d2d34cee1b4678cc7f", "url": "https://github.com/JanusGraph/janusgraph/commit/33a11bc60338ca066417e6d2d34cee1b4678cc7f", "message": "Move reflections to reflections 8\n\nSigned-off-by: Oleksandr Porunov <alexandr.porunov@gmail.com>", "committedDate": "2020-03-09T16:59:26Z", "type": "forcePushed"}]}