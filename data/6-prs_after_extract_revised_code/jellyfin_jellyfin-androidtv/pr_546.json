{"pr_number": 546, "pr_title": "Fix Hardcoded Texts", "pr_createdAt": "2020-08-18T13:30:04Z", "pr_url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546", "timeline": [{"oid": "9b55d2368e443cb6fe45b50b0c41f94dd5871214", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/9b55d2368e443cb6fe45b50b0c41f94dd5871214", "message": "Test build strategy", "committedDate": "2020-08-18T09:49:03Z", "type": "commit"}, {"oid": "106f9f26355cd6a99981e311c28ea26ff55bf932", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/106f9f26355cd6a99981e311c28ea26ff55bf932", "message": "Replacing all strings with resource representations", "committedDate": "2020-08-18T13:16:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1OTM1Nw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546#discussion_r472259357", "bodyText": "Using a string template is preferred for strings that contain dynamic elements. An example in this case: This will PERMANENTLY DELETE %1$s from your library.  Are you VERY sure?. The value can then be passed to the getString function as argument.\nAndroid documentation", "author": "nielsvanvelzen", "createdAt": "2020-08-18T14:53:39Z", "path": "app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java", "diffHunk": "@@ -675,13 +675,13 @@ public void onClick(DialogInterface dialog, int which) {\n                         } else {\n                             new AlertDialog.Builder(mActivity)\n                                     .setTitle(R.string.lbl_delete)\n-                                    .setMessage(\"This will PERMANENTLY DELETE \" + mBaseItem.getName() + \" from your library.  Are you VERY sure?\")\n-                                    .setPositiveButton(\"Delete\", new DialogInterface.OnClickListener() {\n+                                    .setMessage(R.string.warning_0 + mBaseItem.getName() + R.string.warning_1)", "originalCommit": "106f9f26355cd6a99981e311c28ea26ff55bf932", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQxNjI2Mg==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546#discussion_r472416262", "bodyText": "Thanks for the documentation and clear guide. I believe I have resolved the issues, so kindly have a look", "author": "PalAditya", "createdAt": "2020-08-18T19:03:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1OTM1Nw=="}], "type": "inlineReview", "revised_code": {"commit": "ae8a4f973cb878a66d48625053fc149b2c2aa673", "chunk": "diff --git a/app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java b/app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java\nindex 5af46805..056bbab0 100644\n--- a/app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java\n+++ b/app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java\n\n@@ -675,13 +675,13 @@ public class ItemListActivity extends BaseActivity {\n                         } else {\n                             new AlertDialog.Builder(mActivity)\n                                     .setTitle(R.string.lbl_delete)\n-                                    .setMessage(R.string.warning_0 + mBaseItem.getName() + R.string.warning_1)\n+                                    .setMessage(getString(R.string.delete_warning, mBaseItem.getName()))\n                                     .setPositiveButton(R.string.lbl_delete, new DialogInterface.OnClickListener() {\n                                         public void onClick(DialogInterface dialog, int whichButton) {\n                                             TvApp.getApplication().getApiClient().DeleteItem(mBaseItem.getId(), new EmptyResponse() {\n                                                 @Override\n                                                 public void onResponse() {\n-                                                    Utils.showToast(mActivity, mBaseItem.getName() + R.string.lbl_deleted);\n+                                                    Utils.showToast(mActivity, getString(R.string.lbl_deleted, mBaseItem.getName()));\n                                                     TvApp.getApplication().dataRefreshService.setLastDeletedItemId(mBaseItem.getId());\n                                                     finish();\n                                                 }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1OTY3NA==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546#discussion_r472259674", "bodyText": "Needs a string template", "author": "nielsvanvelzen", "createdAt": "2020-08-18T14:54:02Z", "path": "app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java", "diffHunk": "@@ -675,13 +675,13 @@ public void onClick(DialogInterface dialog, int which) {\n                         } else {\n                             new AlertDialog.Builder(mActivity)\n                                     .setTitle(R.string.lbl_delete)\n-                                    .setMessage(\"This will PERMANENTLY DELETE \" + mBaseItem.getName() + \" from your library.  Are you VERY sure?\")\n-                                    .setPositiveButton(\"Delete\", new DialogInterface.OnClickListener() {\n+                                    .setMessage(R.string.warning_0 + mBaseItem.getName() + R.string.warning_1)\n+                                    .setPositiveButton(R.string.lbl_delete, new DialogInterface.OnClickListener() {\n                                         public void onClick(DialogInterface dialog, int whichButton) {\n                                             TvApp.getApplication().getApiClient().DeleteItem(mBaseItem.getId(), new EmptyResponse() {\n                                                 @Override\n                                                 public void onResponse() {\n-                                                    Utils.showToast(mActivity, mBaseItem.getName() + \" Deleted\");\n+                                                    Utils.showToast(mActivity, mBaseItem.getName() + R.string.lbl_deleted);", "originalCommit": "106f9f26355cd6a99981e311c28ea26ff55bf932", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ae8a4f973cb878a66d48625053fc149b2c2aa673", "chunk": "diff --git a/app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java b/app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java\nindex 5af46805..056bbab0 100644\n--- a/app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java\n+++ b/app/src/main/java/org/jellyfin/androidtv/details/ItemListActivity.java\n\n@@ -675,13 +675,13 @@ public class ItemListActivity extends BaseActivity {\n                         } else {\n                             new AlertDialog.Builder(mActivity)\n                                     .setTitle(R.string.lbl_delete)\n-                                    .setMessage(R.string.warning_0 + mBaseItem.getName() + R.string.warning_1)\n+                                    .setMessage(getString(R.string.delete_warning, mBaseItem.getName()))\n                                     .setPositiveButton(R.string.lbl_delete, new DialogInterface.OnClickListener() {\n                                         public void onClick(DialogInterface dialog, int whichButton) {\n                                             TvApp.getApplication().getApiClient().DeleteItem(mBaseItem.getId(), new EmptyResponse() {\n                                                 @Override\n                                                 public void onResponse() {\n-                                                    Utils.showToast(mActivity, mBaseItem.getName() + R.string.lbl_deleted);\n+                                                    Utils.showToast(mActivity, getString(R.string.lbl_deleted, mBaseItem.getName()));\n                                                     TvApp.getApplication().dataRefreshService.setLastDeletedItemId(mBaseItem.getId());\n                                                     finish();\n                                                 }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1OTgwMg==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546#discussion_r472259802", "bodyText": "Needs a string template", "author": "nielsvanvelzen", "createdAt": "2020-08-18T14:54:11Z", "path": "app/src/main/java/org/jellyfin/androidtv/livetv/LiveTvGuideActivity.java", "diffHunk": "@@ -368,8 +368,8 @@ public void onClick(DialogInterface dialog, int which) {\n \n     private void requestGuidePage(final long startTime) {\n         new AlertDialog.Builder(mActivity)\n-                .setTitle(\"Load Guide Data\")\n-                .setMessage(\"Load \" + (startTime > mCurrentLocalGuideStart ? \"next \" : \"previous \") +getGuideHours()+\" hours?\")\n+                .setTitle(R.string.lbl_load_guide_data)\n+                .setMessage(R.string.lbl_load + (startTime > mCurrentLocalGuideStart ? R.string.lbl_next : R.string.lbl_previous) + getGuideHours() + R.string.lbl_hours_2)", "originalCommit": "106f9f26355cd6a99981e311c28ea26ff55bf932", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ae8a4f973cb878a66d48625053fc149b2c2aa673", "chunk": "diff --git a/app/src/main/java/org/jellyfin/androidtv/livetv/LiveTvGuideActivity.java b/app/src/main/java/org/jellyfin/androidtv/livetv/LiveTvGuideActivity.java\nindex 6fb1652c..05f21408 100644\n--- a/app/src/main/java/org/jellyfin/androidtv/livetv/LiveTvGuideActivity.java\n+++ b/app/src/main/java/org/jellyfin/androidtv/livetv/LiveTvGuideActivity.java\n\n@@ -369,7 +369,7 @@ public class LiveTvGuideActivity extends BaseActivity implements ILiveTvGuide {\n     private void requestGuidePage(final long startTime) {\n         new AlertDialog.Builder(mActivity)\n                 .setTitle(R.string.lbl_load_guide_data)\n-                .setMessage(R.string.lbl_load + (startTime > mCurrentLocalGuideStart ? R.string.lbl_next : R.string.lbl_previous) + getGuideHours() + R.string.lbl_hours_2)\n+                .setMessage(startTime > mCurrentLocalGuideStart ? getString(R.string.msg_live_tv_next, getGuideHours()) : getString(R.string.msg_live_tv_prev, getGuideHours()))\n                 .setPositiveButton(R.string.lbl_yes, new DialogInterface.OnClickListener() {\n                     @Override\n                     public void onClick(DialogInterface dialog, int which) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI2MDA0MQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546#discussion_r472260041", "bodyText": "Needs a string template", "author": "nielsvanvelzen", "createdAt": "2020-08-18T14:54:30Z", "path": "app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java", "diffHunk": "@@ -347,7 +347,7 @@ public void onClick(DialogInterface dialog, int which) {\n                         TvApp.getApplication().getApiClient().CreatePlaylist(request, new Response<PlaylistCreationResult>() {\n                             @Override\n                             public void onResponse(PlaylistCreationResult response) {\n-                                Toast.makeText(activity, \"Queue saved as new playlist: \"+text, Toast.LENGTH_LONG).show();\n+                                Toast.makeText(activity, activity.getString(R.string.msg_queue_saved) + text, Toast.LENGTH_LONG).show();", "originalCommit": "106f9f26355cd6a99981e311c28ea26ff55bf932", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ae8a4f973cb878a66d48625053fc149b2c2aa673", "chunk": "diff --git a/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java b/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java\nindex 6a929582..fd1871f0 100644\n--- a/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java\n+++ b/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java\n\n@@ -347,7 +347,7 @@ public class MediaManager {\n                         TvApp.getApplication().getApiClient().CreatePlaylist(request, new Response<PlaylistCreationResult>() {\n                             @Override\n                             public void onResponse(PlaylistCreationResult response) {\n-                                Toast.makeText(activity, activity.getString(R.string.msg_queue_saved) + text, Toast.LENGTH_LONG).show();\n+                                Toast.makeText(activity, activity.getString(R.string.msg_queue_saved, text), Toast.LENGTH_LONG).show();\n                                 TvApp.getApplication().dataRefreshService.setLastLibraryChange(System.currentTimeMillis());\n                             }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI2MDEyNA==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546#discussion_r472260124", "bodyText": "Needs a string template", "author": "nielsvanvelzen", "createdAt": "2020-08-18T14:54:36Z", "path": "app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java", "diffHunk": "@@ -407,7 +407,7 @@ public static int addToVideoQueue(BaseItemDto item) {\n             total += video.getRunTimeTicks() / 10000;\n         }\n \n-        Utils.showToast(TvApp.getApplication(), item.getName() + \" added to video queue. Ends: \"+android.text.format.DateFormat.getTimeFormat(TvApp.getApplication()).format(new Date(total)));\n+        Utils.showToast(TvApp.getApplication(), item.getName() + TvApp.getApplication().getString(R.string.msg_added_to_video) +android.text.format.DateFormat.getTimeFormat(TvApp.getApplication()).format(new Date(total)));", "originalCommit": "106f9f26355cd6a99981e311c28ea26ff55bf932", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ae8a4f973cb878a66d48625053fc149b2c2aa673", "chunk": "diff --git a/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java b/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java\nindex 6a929582..fd1871f0 100644\n--- a/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java\n+++ b/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java\n\n@@ -407,7 +407,7 @@ public class MediaManager {\n             total += video.getRunTimeTicks() / 10000;\n         }\n \n-        Utils.showToast(TvApp.getApplication(), item.getName() + TvApp.getApplication().getString(R.string.msg_added_to_video) +android.text.format.DateFormat.getTimeFormat(TvApp.getApplication()).format(new Date(total)));\n+        Utils.showToast(TvApp.getApplication(), TvApp.getApplication().getString(R.string.msg_added_to_video, item.getName(), android.text.format.DateFormat.getTimeFormat(TvApp.getApplication()).format(new Date(total))));\n         return mCurrentVideoQueue.size()-1;\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI2MDIwMw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546#discussion_r472260203", "bodyText": "Needs a string template", "author": "nielsvanvelzen", "createdAt": "2020-08-18T14:54:43Z", "path": "app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java", "diffHunk": "@@ -596,7 +596,7 @@ public void onResponse(StreamInfo response) {\n \n             @Override\n             public void onError(Exception exception) {\n-                Utils.showToast(TvApp.getApplication(), \"Unable to play audio \" + exception.getLocalizedMessage());\n+                Utils.showToast(TvApp.getApplication(), TvApp.getApplication().getString(R.string.audio_error) + exception.getLocalizedMessage());", "originalCommit": "106f9f26355cd6a99981e311c28ea26ff55bf932", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ae8a4f973cb878a66d48625053fc149b2c2aa673", "chunk": "diff --git a/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java b/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java\nindex 6a929582..fd1871f0 100644\n--- a/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java\n+++ b/app/src/main/java/org/jellyfin/androidtv/playback/MediaManager.java\n\n@@ -596,7 +596,7 @@ public class MediaManager {\n \n             @Override\n             public void onError(Exception exception) {\n-                Utils.showToast(TvApp.getApplication(), TvApp.getApplication().getString(R.string.audio_error) + exception.getLocalizedMessage());\n+                Utils.showToast(TvApp.getApplication(), TvApp.getApplication().getString(R.string.audio_error, exception.getLocalizedMessage()));\n             }\n         });\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI2MDU3Mg==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546#discussion_r472260572", "bodyText": "Needs a string template", "author": "nielsvanvelzen", "createdAt": "2020-08-18T14:55:09Z", "path": "app/src/main/java/org/jellyfin/androidtv/startup/DpadPwActivity.java", "diffHunk": "@@ -92,10 +92,10 @@ public boolean onKeyUp(int keyCode, KeyEvent event) {\n                     final Activity activity = this;\n                     password.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);\n                     new AlertDialog.Builder(this)\n-                            .setTitle(\"Enter Password\")\n-                            .setMessage(\"Please enter password for \" + user.getName())\n+                            .setTitle(R.string.password_prompt)\n+                            .setMessage(R.string.password_prompt_message + user.getName())", "originalCommit": "106f9f26355cd6a99981e311c28ea26ff55bf932", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ae8a4f973cb878a66d48625053fc149b2c2aa673", "chunk": "diff --git a/app/src/main/java/org/jellyfin/androidtv/startup/DpadPwActivity.java b/app/src/main/java/org/jellyfin/androidtv/startup/DpadPwActivity.java\nindex c9f60e7e..bfd80415 100644\n--- a/app/src/main/java/org/jellyfin/androidtv/startup/DpadPwActivity.java\n+++ b/app/src/main/java/org/jellyfin/androidtv/startup/DpadPwActivity.java\n\n@@ -93,7 +93,7 @@ public class DpadPwActivity extends FragmentActivity {\n                     password.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);\n                     new AlertDialog.Builder(this)\n                             .setTitle(R.string.password_prompt)\n-                            .setMessage(R.string.password_prompt_message + user.getName())\n+                            .setMessage(getString(R.string.password_prompt_message, user.getName()))\n                             .setView(password)\n                             .setPositiveButton(R.string.lbl_ok, new DialogInterface.OnClickListener() {\n                                 public void onClick(DialogInterface dialog, int whichButton) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI2MDkwOQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/546#discussion_r472260909", "bodyText": "Needs a string template", "author": "nielsvanvelzen", "createdAt": "2020-08-18T14:55:31Z", "path": "app/src/main/java/org/jellyfin/androidtv/util/Utils.java", "diffHunk": "@@ -209,10 +209,10 @@ public static void processPasswordEntry(final Activity activity, final UserDto u\n             final EditText password = new EditText(activity);\n             password.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);\n             new AlertDialog.Builder(activity)\n-                    .setTitle(\"Enter Password\")\n-                    .setMessage(\"Please enter password for \" + user.getName())\n+                    .setTitle(R.string.password_prompt)\n+                    .setMessage(R.string.password_prompt_message + user.getName())", "originalCommit": "106f9f26355cd6a99981e311c28ea26ff55bf932", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ae8a4f973cb878a66d48625053fc149b2c2aa673", "chunk": "diff --git a/app/src/main/java/org/jellyfin/androidtv/util/Utils.java b/app/src/main/java/org/jellyfin/androidtv/util/Utils.java\nindex 3f2cc6e9..91a3141e 100644\n--- a/app/src/main/java/org/jellyfin/androidtv/util/Utils.java\n+++ b/app/src/main/java/org/jellyfin/androidtv/util/Utils.java\n\n@@ -210,7 +210,7 @@ public class Utils {\n             password.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);\n             new AlertDialog.Builder(activity)\n                     .setTitle(R.string.password_prompt)\n-                    .setMessage(R.string.password_prompt_message + user.getName())\n+                    .setMessage(TvApp.getApplication().getString(R.string.password_prompt_message, user.getName()))\n                     .setView(password)\n                     .setPositiveButton(R.string.lbl_ok, new DialogInterface.OnClickListener() {\n                         public void onClick(DialogInterface dialog, int whichButton) {\n"}}, {"oid": "ae8a4f973cb878a66d48625053fc149b2c2aa673", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ae8a4f973cb878a66d48625053fc149b2c2aa673", "message": "Implementing requested changes with template string", "committedDate": "2020-08-18T18:55:12Z", "type": "commit"}]}