{"pr_number": 540, "pr_title": "Upgrade to apiclient 0.7.0", "pr_createdAt": "2020-08-08T10:32:10Z", "pr_url": "https://github.com/jellyfin/jellyfin-androidtv/pull/540", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ1Mjg3Nw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/540#discussion_r467452877", "bodyText": "Why bother keeping the logger if we're removing the credential management?", "author": "dkanada", "createdAt": "2020-08-08T10:50:42Z", "path": "app/src/main/java/org/jellyfin/androidtv/TvApp.java", "diffHunk": "@@ -94,7 +100,14 @@ protected void attachBaseContext(Context base) {\n     public void onCreate() {\n         super.onCreate();\n         app = (TvApp) getApplicationContext();\n-        playbackManager = new PlaybackManager(new AndroidDevice(this), new AndroidLogger(\"PlaybackManager\"));\n+        JellyfinOptions.Builder options = new JellyfinOptions.Builder();\n+        JellyfinAndroidKt.android(options, this);\n+        options.setLogger(new AndroidLogger());", "originalCommit": "42965f91451cadfb7da061415f2637591f33dfe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ1NjQ5NQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/540#discussion_r467456495", "bodyText": "Some other places currently use the logger", "author": "nielsvanvelzen", "createdAt": "2020-08-08T11:36:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ1Mjg3Nw=="}], "type": "inlineReview", "revised_code": {"commit": "f73e882a334e3553ec4379f5eac3412eae8f9a9f", "chunk": "diff --git a/app/src/main/java/org/jellyfin/androidtv/TvApp.java b/app/src/main/java/org/jellyfin/androidtv/TvApp.java\nindex 22946bc7..506bc0c1 100644\n--- a/app/src/main/java/org/jellyfin/androidtv/TvApp.java\n+++ b/app/src/main/java/org/jellyfin/androidtv/TvApp.java\n\n@@ -105,7 +103,6 @@ public class TvApp extends Application {\n         options.setLogger(new AndroidLogger());\n         options.setAppInfo(new AppInfo(\"Android TV\", BuildConfig.VERSION_NAME));\n         jellyfin = new Jellyfin(options.build());\n-        apiClient = jellyfin.createApi(null, null, AndroidDevice.fromContext(this), new ApiEventListener());\n \n         playbackManager = new PlaybackManager(AndroidDevice.fromContext(this), new AndroidLogger(\"PlaybackManager\"));\n \n"}}, {"oid": "f73e882a334e3553ec4379f5eac3412eae8f9a9f", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/f73e882a334e3553ec4379f5eac3412eae8f9a9f", "message": "Update TvApp to use the new ApiClient constructors", "committedDate": "2020-08-15T09:03:39Z", "type": "commit"}, {"oid": "bc1e84af1672e22b4b86e87609d149c507c6fc57", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/bc1e84af1672e22b4b86e87609d149c507c6fc57", "message": "Fix SerializerRepository", "committedDate": "2020-08-15T09:03:45Z", "type": "commit"}, {"oid": "77fad41890a00d45b529ffdcc1db4c4b598ac5e5", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/77fad41890a00d45b529ffdcc1db4c4b598ac5e5", "message": "Fix logger calls and removal of loginApiClient", "committedDate": "2020-08-15T09:03:46Z", "type": "commit"}, {"oid": "70c3144d6241245610f276014061c5aa84f929b0", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/70c3144d6241245610f276014061c5aa84f929b0", "message": "Initial connectionManager changes", "committedDate": "2020-08-15T09:03:48Z", "type": "commit"}, {"oid": "171931cfedbe7b2774e5814971054d4936f20d1d", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/171931cfedbe7b2774e5814971054d4936f20d1d", "message": "Initialize apiclient in tvapp", "committedDate": "2020-08-15T09:03:48Z", "type": "commit"}, {"oid": "2e0200fb5690551b091a976302d0921a81818fdf", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2e0200fb5690551b091a976302d0921a81818fdf", "message": "Fix latest compile errors", "committedDate": "2020-08-15T09:03:49Z", "type": "commit"}, {"oid": "16fcd41b333d97f91d0373e0c8c8f17ce2b5c471", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/16fcd41b333d97f91d0373e0c8c8f17ce2b5c471", "message": "Fix rebase issue", "committedDate": "2020-08-15T09:07:10Z", "type": "commit"}, {"oid": "16fcd41b333d97f91d0373e0c8c8f17ce2b5c471", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/16fcd41b333d97f91d0373e0c8c8f17ce2b5c471", "message": "Fix rebase issue", "committedDate": "2020-08-15T09:07:10Z", "type": "forcePushed"}, {"oid": "b120c2aee7811feca9d8373da8b4332300cab238", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b120c2aee7811feca9d8373da8b4332300cab238", "message": "Use Bintray repository for apiclient and update version to 0.7.1", "committedDate": "2020-08-18T16:08:06Z", "type": "forcePushed"}, {"oid": "bf823738a776bdae63ed443aba586572e6d7233a", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/bf823738a776bdae63ed443aba586572e6d7233a", "message": "Use jcenter repository for apiclient and update version to 0.7.2", "committedDate": "2020-08-19T09:28:50Z", "type": "commit"}, {"oid": "bf823738a776bdae63ed443aba586572e6d7233a", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/bf823738a776bdae63ed443aba586572e6d7233a", "message": "Use jcenter repository for apiclient and update version to 0.7.2", "committedDate": "2020-08-19T09:28:50Z", "type": "forcePushed"}, {"oid": "1d931e030e38e3d267a6356c02b5c8c143a7c2aa", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1d931e030e38e3d267a6356c02b5c8c143a7c2aa", "message": "Remove videolan maven repository\n\nIt's linked to jcenter so we don't need it", "committedDate": "2020-08-19T09:32:56Z", "type": "commit"}, {"oid": "ac66ed98757ed155eed804b6ad8d6ca46ee73a3e", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ac66ed98757ed155eed804b6ad8d6ca46ee73a3e", "message": "Fix application crash when playback starts\n\nBecause somehow the playback manager needs the id of the server it's connected to (although a null value doesn't matter...)", "committedDate": "2020-08-21T17:44:08Z", "type": "commit"}, {"oid": "92cbb912270c9a5317c1f99a24a461afd1e2cff6", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/92cbb912270c9a5317c1f99a24a461afd1e2cff6", "message": "Remove all \"remember server\" logic from StartupActivity for now\n\nIt's not working properly and needs to be rewritten, removing this code at least makes the app usable although each restart requires signin.", "committedDate": "2020-08-21T17:45:13Z", "type": "commit"}, {"oid": "2c2ac5780dc7c835c4efef1d7b2a5b8d7a714ddd", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2c2ac5780dc7c835c4efef1d7b2a5b8d7a714ddd", "message": "Remove unused functions left over after removing server credential logic", "committedDate": "2020-08-21T17:52:41Z", "type": "commit"}]}