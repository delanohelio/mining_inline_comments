{"pr_number": 9081, "pr_title": "KAFKA-10309: KafkaProducer's sendOffsetsToTransaction should not block infinitively", "pr_createdAt": "2020-07-26T15:55:24Z", "pr_url": "https://github.com/apache/kafka/pull/9081", "timeline": [{"oid": "25a7cebe917889cb645ff87c6effc869cfc51a95", "url": "https://github.com/apache/kafka/commit/25a7cebe917889cb645ff87c6effc869cfc51a95", "message": "Modified KafkaProducer.sendOffsetsToTransaction() to be affected with max.block.ms.", "committedDate": "2020-07-26T15:24:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDYwODIyOA==", "url": "https://github.com/apache/kafka/pull/9081#discussion_r460608228", "bodyText": "javadoc for this method should be updated as well.", "author": "huxihx", "createdAt": "2020-07-27T01:52:53Z", "path": "clients/src/main/java/org/apache/kafka/clients/producer/KafkaProducer.java", "diffHunk": "@@ -687,7 +687,7 @@ public void sendOffsetsToTransaction(Map<TopicPartition, OffsetAndMetadata> offs\n         throwIfProducerClosed();\n         TransactionalRequestResult result = transactionManager.sendOffsetsToTransaction(offsets, groupMetadata);\n         sender.wakeup();\n-        result.await();\n+        result.await(maxBlockTimeMs, TimeUnit.MILLISECONDS);", "originalCommit": "25a7cebe917889cb645ff87c6effc869cfc51a95", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI2NTEyNQ==", "url": "https://github.com/apache/kafka/pull/9081#discussion_r461265125", "bodyText": "I wrote some description related to TimeoutException and InterruptedException", "author": "sasakitoa", "createdAt": "2020-07-28T01:34:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDYwODIyOA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "3d5e4984f4c5287513b47ddecf6ccb7de9e90268", "url": "https://github.com/apache/kafka/commit/3d5e4984f4c5287513b47ddecf6ccb7de9e90268", "message": "Improved java doc and related test code (adapt review comments from @huxihx)", "committedDate": "2020-07-28T01:31:03Z", "type": "commit"}, {"oid": "e5675d44a5e1eb618eafe8cba43cb6417e8be2e1", "url": "https://github.com/apache/kafka/commit/e5675d44a5e1eb618eafe8cba43cb6417e8be2e1", "message": "Change how to get broker indices from size to indices.", "committedDate": "2020-07-28T14:21:06Z", "type": "commit"}, {"oid": "8c20bcab28c5f75d8d380e4f7008e0282f790b49", "url": "https://github.com/apache/kafka/commit/8c20bcab28c5f75d8d380e4f7008e0282f790b49", "message": "Add timeout test for initTransactions, commitTransaction, abortTransaction using same method.", "committedDate": "2020-07-28T16:02:51Z", "type": "commit"}]}