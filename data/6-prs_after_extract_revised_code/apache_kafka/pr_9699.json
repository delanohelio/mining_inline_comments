{"pr_number": 9699, "pr_title": "MINOR: remove duplicate code from resetByDuration", "pr_createdAt": "2020-12-05T00:59:10Z", "pr_url": "https://github.com/apache/kafka/pull/9699", "timeline": [{"oid": "32adca324218e407cef8eba47a40f6e267076bfb", "url": "https://github.com/apache/kafka/commit/32adca324218e407cef8eba47a40f6e267076bfb", "message": "MINOR: add a description for calling resetToDatetime's function to resetByDuration\n\nAdd a request that it will call resetToDatetime of description to resetByDuration of function.", "committedDate": "2020-12-08T15:46:13Z", "type": "commit"}, {"oid": "32adca324218e407cef8eba47a40f6e267076bfb", "url": "https://github.com/apache/kafka/commit/32adca324218e407cef8eba47a40f6e267076bfb", "message": "MINOR: add a description for calling resetToDatetime's function to resetByDuration\n\nAdd a request that it will call resetToDatetime of description to resetByDuration of function.", "committedDate": "2020-12-08T15:46:13Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk2MjMzMw==", "url": "https://github.com/apache/kafka/pull/9699#discussion_r538962333", "bodyText": "Could we remove those local variables? For example:\n        resetToDatetime(client, inputTopicPartitions, Instant.now().minus(duration).toEpochMilli());", "author": "chia7712", "createdAt": "2020-12-09T02:43:15Z", "path": "core/src/main/scala/kafka/tools/StreamsResetter.java", "diffHunk": "@@ -491,17 +491,8 @@ private void resetByDuration(final Consumer<byte[], byte[]> client,\n                                  final Duration duration) {\n         final Instant now = Instant.now();", "originalCommit": "32adca324218e407cef8eba47a40f6e267076bfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTM1NDQyMA==", "url": "https://github.com/apache/kafka/pull/9699#discussion_r539354420", "bodyText": "Thank you for your information. I have updated this problem.", "author": "bertber", "createdAt": "2020-12-09T14:32:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk2MjMzMw=="}], "type": "inlineReview", "revised_code": {"commit": "59a880349e4bd5b93ceaac713572979f2fb3e2a1", "chunk": "diff --git a/core/src/main/scala/kafka/tools/StreamsResetter.java b/core/src/main/scala/kafka/tools/StreamsResetter.java\nindex adaee66945..f72a3b6905 100644\n--- a/core/src/main/scala/kafka/tools/StreamsResetter.java\n+++ b/core/src/main/scala/kafka/tools/StreamsResetter.java\n\n@@ -489,10 +489,7 @@ public class StreamsResetter {\n     private void resetByDuration(final Consumer<byte[], byte[]> client,\n                                  final Set<TopicPartition> inputTopicPartitions,\n                                  final Duration duration) {\n-        final Instant now = Instant.now();\n-        final long timestamp = now.minus(duration).toEpochMilli();\n-        \n-        resetToDatetime(client, inputTopicPartitions, timestamp);\n+        resetToDatetime(client, inputTopicPartitions, Instant.now().minus(duration).toEpochMilli());\n     }\n \n     private void resetToDatetime(final Consumer<byte[], byte[]> client,\n"}}, {"oid": "59a880349e4bd5b93ceaac713572979f2fb3e2a1", "url": "https://github.com/apache/kafka/commit/59a880349e4bd5b93ceaac713572979f2fb3e2a1", "message": "remove duplicate code from resetByDuration\n\nremove local variables from resetByDuration", "committedDate": "2020-12-09T14:25:00Z", "type": "commit"}]}