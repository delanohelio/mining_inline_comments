{"pr_number": 1458, "pr_title": "Crash fix of null profile exception on CourseOutlineFragment.java", "pr_createdAt": "2020-09-07T11:43:26Z", "pr_url": "https://github.com/edx/edx-app-android/pull/1458", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg1MTMwNA==", "url": "https://github.com/edx/edx-app-android/pull/1458#discussion_r485851304", "bodyText": "environment.getLoginPrefs().getCurrentUserProfile() better to store in local variable and then use it.", "author": "farhan-arshad-dev", "createdAt": "2020-09-09T19:12:31Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseOutlineFragment.java", "diffHunk": "@@ -234,7 +234,7 @@ private void trackAATestCourseOutline() {\n             final FirebaseRemoteConfig firebaseRemoteConfig = FirebaseRemoteConfig.getInstance();\n             firebaseRemoteConfig.fetchAndActivate().addOnCompleteListener(task -> {\n                 final String group = firebaseRemoteConfig.getString(Analytics.Keys.AA_EXPERIMENT);\n-                if (!TextUtils.isEmpty(group)) {\n+                if (!TextUtils.isEmpty(group) && environment.getLoginPrefs().getCurrentUserProfile() != null) {", "originalCommit": "85302ecc0f2ce9e20e7615e078f8e2ebee3e5c1b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE0OTg1OA==", "url": "https://github.com/edx/edx-app-android/pull/1458#discussion_r486149858", "bodyText": "Done", "author": "omerhabib26", "createdAt": "2020-09-10T08:12:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg1MTMwNA=="}], "type": "inlineReview", "revised_code": {"commit": "52f70aae018566be95aeb1714d284b0aec54c63b", "chunk": "diff --git a/OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseOutlineFragment.java b/OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseOutlineFragment.java\nindex 0f4ec173..9f8cc1bc 100644\n--- a/OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseOutlineFragment.java\n+++ b/OpenEdXMobile/src/main/java/org/edx/mobile/view/CourseOutlineFragment.java\n\n@@ -234,11 +235,12 @@ public class CourseOutlineFragment extends OfflineSupportBaseFragment\n             final FirebaseRemoteConfig firebaseRemoteConfig = FirebaseRemoteConfig.getInstance();\n             firebaseRemoteConfig.fetchAndActivate().addOnCompleteListener(task -> {\n                 final String group = firebaseRemoteConfig.getString(Analytics.Keys.AA_EXPERIMENT);\n-                if (!TextUtils.isEmpty(group) && environment.getLoginPrefs().getCurrentUserProfile() != null) {\n+                final ProfileModel profileModel = environment.getLoginPrefs().getCurrentUserProfile();\n+                if (!TextUtils.isEmpty(group) && profileModel != null) {\n                     final Map<String, String> values = new HashMap<>();\n                     values.put(Analytics.Keys.EXPERIMENT, Analytics.Keys.AA_EXPERIMENT);\n                     values.put(Analytics.Keys.GROUP, group);\n-                    values.put(Analytics.Keys.USER_ID, environment.getLoginPrefs().getCurrentUserProfile().id.toString());\n+                    values.put(Analytics.Keys.USER_ID, profileModel.id.toString());\n                     values.put(Analytics.Keys.COURSE_ID, courseData.getCourse().getId());\n                     environment.getAnalyticsRegistry().trackExperimentParams(Analytics.Events.MOBILE_EXPERIMENT_EVALUATED, values);\n                 }\n"}}, {"oid": "52f70aae018566be95aeb1714d284b0aec54c63b", "url": "https://github.com/edx/edx-app-android/commit/52f70aae018566be95aeb1714d284b0aec54c63b", "message": "Crash fix of null profile exception on CourseOutlineFragment.java\n- LEARNER-7917", "committedDate": "2020-09-10T07:56:36Z", "type": "commit"}, {"oid": "52f70aae018566be95aeb1714d284b0aec54c63b", "url": "https://github.com/edx/edx-app-android/commit/52f70aae018566be95aeb1714d284b0aec54c63b", "message": "Crash fix of null profile exception on CourseOutlineFragment.java\n- LEARNER-7917", "committedDate": "2020-09-10T07:56:36Z", "type": "forcePushed"}]}