{"pr_number": 1413, "pr_title": "Fields validations & exception handling on Login Screen", "pr_createdAt": "2020-05-20T09:46:02Z", "pr_url": "https://github.com/edx/edx-app-android/pull/1413", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU3NzM4MA==", "url": "https://github.com/edx/edx-app-android/pull/1413#discussion_r428577380", "bodyText": "Remove error after editing the text is not part of the Story please add.", "author": "farhan-arshad-dev", "createdAt": "2020-05-21T10:42:20Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java", "diffHunk": "@@ -98,6 +100,40 @@ public void onClick(View v) {\n             }\n         });\n \n+        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n+            @Override\n+            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n+\n+            }\n+\n+            @Override\n+            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n+\n+            }\n+\n+            @Override\n+            public void afterTextChanged(Editable editable) {\n+                activityLoginBinding.usernameWrapper.setError(null);", "originalCommit": "57c3bd3281202a7eb0aa62f3a70844c86a0e1dc6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e29d924f9ed1029234e169c75994e323f09edcbe", "chunk": "diff --git a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\nindex dc03fb83..52207a2b 100644\n--- a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n+++ b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n\n@@ -100,40 +98,6 @@ public class LoginActivity\n             }\n         });\n \n-        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.usernameWrapper.setError(null);\n-            }\n-        });\n-\n-        activityLoginBinding.passwordEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.passwordWrapper.setError(null);\n-            }\n-        });\n-\n         activityLoginBinding.forgotPasswordTv.setOnClickListener(new OnClickListener() {\n             @Override\n             public void onClick(View v) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4MDEyNA==", "url": "https://github.com/edx/edx-app-android/pull/1413#discussion_r428580124", "bodyText": "Are we need to remove the alert dialog?", "author": "farhan-arshad-dev", "createdAt": "2020-05-21T10:48:56Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java", "diffHunk": "@@ -227,12 +263,10 @@ public void callServerForLogin() {\n         final String passwordStr = activityLoginBinding.passwordEt.getText().toString().trim();\n \n         if (activityLoginBinding.emailEt != null && emailStr.length() == 0) {\n-            showAlertDialog(getString(R.string.login_error),\n-                    getString(R.string.error_enter_email));\n+            activityLoginBinding.usernameWrapper.setError(getString(R.string.error_enter_email));", "originalCommit": "57c3bd3281202a7eb0aa62f3a70844c86a0e1dc6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e29d924f9ed1029234e169c75994e323f09edcbe", "chunk": "diff --git a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\nindex dc03fb83..52207a2b 100644\n--- a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n+++ b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n\n@@ -263,10 +227,12 @@ public class LoginActivity\n         final String passwordStr = activityLoginBinding.passwordEt.getText().toString().trim();\n \n         if (activityLoginBinding.emailEt != null && emailStr.length() == 0) {\n-            activityLoginBinding.usernameWrapper.setError(getString(R.string.error_enter_email));\n+            showAlertDialog(getString(R.string.login_error),\n+                    getString(R.string.error_enter_email));\n             activityLoginBinding.emailEt.requestFocus();\n         } else if (activityLoginBinding.passwordEt != null && passwordStr.length() == 0) {\n-            activityLoginBinding.passwordWrapper.setError(getString(R.string.error_enter_password));\n+            showAlertDialog(getString(R.string.login_error),\n+                    getString(R.string.error_enter_password));\n             activityLoginBinding.passwordEt.requestFocus();\n         } else {\n             activityLoginBinding.emailEt.setEnabled(false);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4MDY1NQ==", "url": "https://github.com/edx/edx-app-android/pull/1413#discussion_r428580655", "bodyText": "is there any use case of getting UNAUTHORIZED response code.", "author": "farhan-arshad-dev", "createdAt": "2020-05-21T10:50:14Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java", "diffHunk": "@@ -250,7 +284,7 @@ public void onSuccess(@NonNull AuthResponse result) {\n                 @Override\n                 public void onException(Exception ex) {\n                     if (ex instanceof HttpStatusException &&\n-                            ((HttpStatusException) ex).getStatusCode() == HttpStatus.UNAUTHORIZED) {\n+                            ((HttpStatusException) ex).getStatusCode() == HttpStatus.BAD_REQUEST) {", "originalCommit": "57c3bd3281202a7eb0aa62f3a70844c86a0e1dc6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU2ODEwMQ==", "url": "https://github.com/edx/edx-app-android/pull/1413#discussion_r432568101", "bodyText": "@omerhabib26 just this question is still pendding.", "author": "farhan-arshad-dev", "createdAt": "2020-05-29T15:36:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4MDY1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA2ODkxOA==", "url": "https://github.com/edx/edx-app-android/pull/1413#discussion_r433068918", "bodyText": "@farhan-arshad-dev currently on iOS & Android we are only handling BAD_REQUEST response code.", "author": "omerhabib26", "createdAt": "2020-06-01T06:49:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4MDY1NQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4MzE1OQ==", "url": "https://github.com/edx/edx-app-android/pull/1413#discussion_r428583159", "bodyText": "Rename the parameter with appropriate convention.", "author": "farhan-arshad-dev", "createdAt": "2020-05-21T10:56:37Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java", "diffHunk": "@@ -98,6 +100,40 @@ public void onClick(View v) {\n             }\n         });\n \n+        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n+            @Override\n+            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {", "originalCommit": "57c3bd3281202a7eb0aa62f3a70844c86a0e1dc6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e29d924f9ed1029234e169c75994e323f09edcbe", "chunk": "diff --git a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\nindex dc03fb83..52207a2b 100644\n--- a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n+++ b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n\n@@ -100,40 +98,6 @@ public class LoginActivity\n             }\n         });\n \n-        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.usernameWrapper.setError(null);\n-            }\n-        });\n-\n-        activityLoginBinding.passwordEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.passwordWrapper.setError(null);\n-            }\n-        });\n-\n         activityLoginBinding.forgotPasswordTv.setOnClickListener(new OnClickListener() {\n             @Override\n             public void onClick(View v) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4MzE4Mg==", "url": "https://github.com/edx/edx-app-android/pull/1413#discussion_r428583182", "bodyText": "Rename the parameter with appropriate convention.", "author": "farhan-arshad-dev", "createdAt": "2020-05-21T10:56:42Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java", "diffHunk": "@@ -98,6 +100,40 @@ public void onClick(View v) {\n             }\n         });\n \n+        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n+            @Override\n+            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n+\n+            }\n+\n+            @Override\n+            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {", "originalCommit": "57c3bd3281202a7eb0aa62f3a70844c86a0e1dc6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e29d924f9ed1029234e169c75994e323f09edcbe", "chunk": "diff --git a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\nindex dc03fb83..52207a2b 100644\n--- a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n+++ b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n\n@@ -100,40 +98,6 @@ public class LoginActivity\n             }\n         });\n \n-        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.usernameWrapper.setError(null);\n-            }\n-        });\n-\n-        activityLoginBinding.passwordEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.passwordWrapper.setError(null);\n-            }\n-        });\n-\n         activityLoginBinding.forgotPasswordTv.setOnClickListener(new OnClickListener() {\n             @Override\n             public void onClick(View v) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4MzIxMw==", "url": "https://github.com/edx/edx-app-android/pull/1413#discussion_r428583213", "bodyText": "Rename the parameter with appropriate convention.", "author": "farhan-arshad-dev", "createdAt": "2020-05-21T10:56:46Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java", "diffHunk": "@@ -98,6 +100,40 @@ public void onClick(View v) {\n             }\n         });\n \n+        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n+            @Override\n+            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n+\n+            }\n+\n+            @Override\n+            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n+\n+            }\n+\n+            @Override\n+            public void afterTextChanged(Editable editable) {\n+                activityLoginBinding.usernameWrapper.setError(null);\n+            }\n+        });\n+\n+        activityLoginBinding.passwordEt.addTextChangedListener(new TextWatcher() {\n+            @Override\n+            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {", "originalCommit": "57c3bd3281202a7eb0aa62f3a70844c86a0e1dc6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e29d924f9ed1029234e169c75994e323f09edcbe", "chunk": "diff --git a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\nindex dc03fb83..52207a2b 100644\n--- a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n+++ b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n\n@@ -100,40 +98,6 @@ public class LoginActivity\n             }\n         });\n \n-        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.usernameWrapper.setError(null);\n-            }\n-        });\n-\n-        activityLoginBinding.passwordEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.passwordWrapper.setError(null);\n-            }\n-        });\n-\n         activityLoginBinding.forgotPasswordTv.setOnClickListener(new OnClickListener() {\n             @Override\n             public void onClick(View v) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4MzI0MQ==", "url": "https://github.com/edx/edx-app-android/pull/1413#discussion_r428583241", "bodyText": "Rename the parameter with appropriate convention.", "author": "farhan-arshad-dev", "createdAt": "2020-05-21T10:56:51Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java", "diffHunk": "@@ -98,6 +100,40 @@ public void onClick(View v) {\n             }\n         });\n \n+        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n+            @Override\n+            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n+\n+            }\n+\n+            @Override\n+            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n+\n+            }\n+\n+            @Override\n+            public void afterTextChanged(Editable editable) {\n+                activityLoginBinding.usernameWrapper.setError(null);\n+            }\n+        });\n+\n+        activityLoginBinding.passwordEt.addTextChangedListener(new TextWatcher() {\n+            @Override\n+            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n+\n+            }\n+\n+            @Override\n+            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {", "originalCommit": "57c3bd3281202a7eb0aa62f3a70844c86a0e1dc6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e29d924f9ed1029234e169c75994e323f09edcbe", "chunk": "diff --git a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\nindex dc03fb83..52207a2b 100644\n--- a/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n+++ b/OpenEdXMobile/src/main/java/org/edx/mobile/view/LoginActivity.java\n\n@@ -100,40 +98,6 @@ public class LoginActivity\n             }\n         });\n \n-        activityLoginBinding.emailEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.usernameWrapper.setError(null);\n-            }\n-        });\n-\n-        activityLoginBinding.passwordEt.addTextChangedListener(new TextWatcher() {\n-            @Override\n-            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n-\n-            }\n-\n-            @Override\n-            public void afterTextChanged(Editable editable) {\n-                activityLoginBinding.passwordWrapper.setError(null);\n-            }\n-        });\n-\n         activityLoginBinding.forgotPasswordTv.setOnClickListener(new OnClickListener() {\n             @Override\n             public void onClick(View v) {\n"}}, {"oid": "e29d924f9ed1029234e169c75994e323f09edcbe", "url": "https://github.com/edx/edx-app-android/commit/e29d924f9ed1029234e169c75994e323f09edcbe", "message": "Update http status for valid exception msg", "committedDate": "2020-05-29T11:12:10Z", "type": "commit"}, {"oid": "e29d924f9ed1029234e169c75994e323f09edcbe", "url": "https://github.com/edx/edx-app-android/commit/e29d924f9ed1029234e169c75994e323f09edcbe", "message": "Update http status for valid exception msg", "committedDate": "2020-05-29T11:12:10Z", "type": "forcePushed"}, {"oid": "85174f787bdb3d7d2e907437851936d1cee909bb", "url": "https://github.com/edx/edx-app-android/commit/85174f787bdb3d7d2e907437851936d1cee909bb", "message": "Update field validation errors msg from alert dialog to in-line", "committedDate": "2020-05-29T11:16:25Z", "type": "commit"}]}