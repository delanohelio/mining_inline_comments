{"pr_number": 5790, "pr_title": "[typescript-angular] support for object query parameters as nested key/json string", "pr_createdAt": "2020-04-01T17:12:38Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/5790", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2MDYyOA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401860628", "bodyText": "are these 3 constants used?", "author": "amakhrov", "createdAt": "2020-04-01T19:35:35Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java", "diffHunk": "@@ -55,6 +55,10 @@\n     public static final String FILE_NAMING = \"fileNaming\";\n     public static final String STRING_ENUMS = \"stringEnums\";\n     public static final String STRING_ENUMS_DESC = \"Generate string enums instead of objects for enum values.\";\n+    public static final String QUERY_PARAM_OBJECT_FORMAT = \"queryParamObjectFormat\";\n+    public static final String QUERY_PARAM_OBJECT_FORMAT_DOT = \"isQueryParamObjectFormatDot\";\n+    public static final String QUERY_PARAM_OBJECT_FORMAT_JSON = \"isQueryParamObjectFormatJson\";\n+    public static final String QUERY_PARAM_OBJECT_FORMAT_KEY = \"isQueryParamObjectFormatKey\";", "originalCommit": "02e3a7409d8fb4ed074ea2a569479857ab5edd4c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2Mjk4Ng==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401862986", "bodyText": "Yes, open to an alternative if there is one for passing into mustache template:\nhttps://github.com/OpenAPITools/openapi-generator/pull/5790/files#diff-f61af8a4c4eb2720bfb15259e0dca419R170-R187\nEDIT: FYI, I'm just making a guess at how to implement.", "author": "dougal83", "createdAt": "2020-04-01T19:39:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2MDYyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2Nzg1Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401867853", "bodyText": "I mean the actual java constants: QUERY_PARAM_OBJECT_FORMAT_KEY, QUERY_PARAM_OBJECT_FORMAT_JSON, QUERY_PARAM_OBJECT_FORMAT_DOT - they are defined here, but I can't see any code that refers to them. Am I missing the point?", "author": "amakhrov", "createdAt": "2020-04-01T19:48:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2MDYyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg3MDI5OQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401870299", "bodyText": "I think it's that I don't understand Java, I was just muddling through.  After adding these the mustache template seemed to pick up the values (or it was a coincidence).\nI'll remove and put down to coincidence if it works.  Thanks for pointing ti out as it was pretty ugly.", "author": "dougal83", "createdAt": "2020-04-01T19:52:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2MDYyOA=="}], "type": "inlineReview", "revised_code": {"commit": "49d51986a5e1c6dcf8b171b2d1441a87e72b84c3", "chunk": "diff --git a/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java b/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java\nindex 1eba89d19bd..b9632aee194 100644\n--- a/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java\n+++ b/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java\n\n@@ -56,9 +60,6 @@ public class TypeScriptAngularClientCodegen extends AbstractTypeScriptClientCode\n     public static final String STRING_ENUMS = \"stringEnums\";\n     public static final String STRING_ENUMS_DESC = \"Generate string enums instead of objects for enum values.\";\n     public static final String QUERY_PARAM_OBJECT_FORMAT = \"queryParamObjectFormat\";\n-    public static final String QUERY_PARAM_OBJECT_FORMAT_DOT = \"isQueryParamObjectFormatDot\";\n-    public static final String QUERY_PARAM_OBJECT_FORMAT_JSON = \"isQueryParamObjectFormatJson\";\n-    public static final String QUERY_PARAM_OBJECT_FORMAT_KEY = \"isQueryParamObjectFormatKey\";\n \n     protected String ngVersion = \"9.0.0\";\n     protected String npmRepository = null;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2NDA4Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401864083", "bodyText": "this can be simplified a bit by swapping operands:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return queryParamObjectFormat != null && queryParamObjectFormat.equals(\"dot\");\n          \n          \n            \n                    return dot.equals(queryParamObjectFormat);\n          \n      \n    \n    \n  \n\nhowever, switching from string to enum would eliminate the problem altogether", "author": "amakhrov", "createdAt": "2020-04-01T19:41:52Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java", "diffHunk": "@@ -360,6 +372,18 @@ public Boolean getStringEnums() {\n         return stringEnums;\n     }\n \n+    public boolean getQueryParamObjectFormatDot() {\n+        return queryParamObjectFormat != null && queryParamObjectFormat.equals(\"dot\");", "originalCommit": "02e3a7409d8fb4ed074ea2a569479857ab5edd4c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "49d51986a5e1c6dcf8b171b2d1441a87e72b84c3", "chunk": "diff --git a/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java b/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java\nindex 1eba89d19bd..b9632aee194 100644\n--- a/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java\n+++ b/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java\n\n@@ -373,22 +318,22 @@ public class TypeScriptAngularClientCodegen extends AbstractTypeScriptClientCode\n     }\n \n     public boolean getQueryParamObjectFormatDot() {\n-        return queryParamObjectFormat != null && queryParamObjectFormat.equals(\"dot\");\n+        return QUERY_PARAM_OBJECT_FORMAT_TYPE.dot.equals(queryParamObjectFormat);\n     }\n \n     public boolean getQueryParamObjectFormatJson() {\n-        return queryParamObjectFormat != null && queryParamObjectFormat.equals(\"json\");\n+        return QUERY_PARAM_OBJECT_FORMAT_TYPE.json.equals(queryParamObjectFormat);\n     }\n \n     public boolean getQueryParamObjectFormatKey() {\n-        return queryParamObjectFormat != null && queryParamObjectFormat.equals(\"key\");\n+        return QUERY_PARAM_OBJECT_FORMAT_TYPE.key.equals(queryParamObjectFormat);\n     }\n \n     @Override\n     public boolean isDataTypeFile(final String dataType) {\n         return dataType != null && dataType.equals(\"Blob\");\n     }\n-\n+ \n     @Override\n     public String getTypeDeclaration(Schema p) {\n         if (ModelUtils.isFileSchema(p)) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2OTI1NA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401869254", "bodyText": "Suggest using enum instead of hardcoded strings. See e.g. MODEL_PROPERTY_NAMING_TYPE", "author": "amakhrov", "createdAt": "2020-04-01T19:50:55Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java", "diffHunk": "@@ -65,6 +69,7 @@\n     protected String modelFileSuffix = \"\";\n     protected String fileNaming = \"camelCase\";\n     protected Boolean stringEnums = false;\n+    protected String queryParamObjectFormat = \"dot\";", "originalCommit": "02e3a7409d8fb4ed074ea2a569479857ab5edd4c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg3NjIyOQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401876229", "bodyText": "Would the enum constant go with MODEL_PROPERTY_NAMING_TYPE in the same global file or be held locally?  (I'll do the later for now)", "author": "dougal83", "createdAt": "2020-04-01T20:03:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2OTI1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg3NzQ1NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401877455", "bodyText": "I believe it should be defined locally, as it's very specific to the angular generator.", "author": "amakhrov", "createdAt": "2020-04-01T20:05:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2OTI1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5Nzc0Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401897743", "bodyText": "Thanks.  One more query if you don't mind!  If this.queryParamObjectFormat is an enum then how do we approach the following?  It was a string but with enum we need a bit more, or shall I just omit the CLI option?\nthis.cliOptions.add(new CliOption( // ... )\n.defaultValue(this.queryParamObjectFormat));\n\nWould .toString() be satisfactory?", "author": "dougal83", "createdAt": "2020-04-01T20:44:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2OTI1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkwMjA4NA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401902084", "bodyText": ".defaultValue(this.queryParamObjectFormat.name())\nyou could refer to how MODEL_PROPERTY_NAMING and ENUM_PROPERTY_NAMING are used inside AbstractTypeScriptClientCodegen", "author": "amakhrov", "createdAt": "2020-04-01T20:52:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2OTI1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkzMjQ0MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5790#discussion_r401932440", "bodyText": "@amakhrov Thank you for the guidance.  Applied feedback.", "author": "dougal83", "createdAt": "2020-04-01T21:53:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg2OTI1NA=="}], "type": "inlineReview", "revised_code": {"commit": "49d51986a5e1c6dcf8b171b2d1441a87e72b84c3", "chunk": "diff --git a/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java b/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java\nindex 1eba89d19bd..b9632aee194 100644\n--- a/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java\n+++ b/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java\n\n@@ -69,7 +70,7 @@ public class TypeScriptAngularClientCodegen extends AbstractTypeScriptClientCode\n     protected String modelFileSuffix = \"\";\n     protected String fileNaming = \"camelCase\";\n     protected Boolean stringEnums = false;\n-    protected String queryParamObjectFormat = \"dot\";\n+    protected QUERY_PARAM_OBJECT_FORMAT_TYPE queryParamObjectFormat = QUERY_PARAM_OBJECT_FORMAT_TYPE.dot;\n \n     private boolean taggedUnions = false;\n \n"}}, {"oid": "49d51986a5e1c6dcf8b171b2d1441a87e72b84c3", "url": "https://github.com/OpenAPITools/openapi-generator/commit/49d51986a5e1c6dcf8b171b2d1441a87e72b84c3", "message": "apply feedback\n\nSigned-off-by: Douglas McConnachie <dougal83+git@gmail.com>", "committedDate": "2020-06-08T19:20:29Z", "type": "forcePushed"}, {"oid": "f3a5ac7181d722eca41db8b9b9aefb8cc2130a8b", "url": "https://github.com/OpenAPITools/openapi-generator/commit/f3a5ac7181d722eca41db8b9b9aefb8cc2130a8b", "message": "add query param object format options\n\nfixes: #5781\n\nSigned-off-by: Douglas McConnachie <dougal83+git@gmail.com>", "committedDate": "2020-06-08T19:33:19Z", "type": "forcePushed"}, {"oid": "b085ed8a24836bf3b5c68d6d904f93e3fcb8774c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b085ed8a24836bf3b5c68d6d904f93e3fcb8774c", "message": "add query param object format options\n\nfixes: #5781\n\nSigned-off-by: Douglas McConnachie <dougal83+git@gmail.com>", "committedDate": "2020-06-18T15:03:34Z", "type": "commit"}, {"oid": "b085ed8a24836bf3b5c68d6d904f93e3fcb8774c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b085ed8a24836bf3b5c68d6d904f93e3fcb8774c", "message": "add query param object format options\n\nfixes: #5781\n\nSigned-off-by: Douglas McConnachie <dougal83+git@gmail.com>", "committedDate": "2020-06-18T15:03:34Z", "type": "forcePushed"}]}