{"pr_number": 7576, "pr_title": "[go] Improve examples generation", "pr_createdAt": "2020-10-02T10:57:13Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/7576", "timeline": [{"oid": "5aeaafb725796808ab24bacf4c0eafdb75852a72", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5aeaafb725796808ab24bacf4c0eafdb75852a72", "message": "fix go examples", "committedDate": "2020-10-02T10:53:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc1NjM1OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7576#discussion_r498756358", "bodyText": "We should probably include at least required arguments.", "author": "jirikuncar", "createdAt": "2020-10-02T11:04:35Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/GoClientCodegen.java", "diffHunk": "@@ -565,13 +565,6 @@ private String constructExampleCode(CodegenModel codegenModel, HashMap<String, C\n             processedModelMap.put(model, 1);\n         }\n \n-        example = \"\" + goImportAlias + \".\" + codegenModel.name + \"{\";\n-        List<String> propertyExamples = new ArrayList<>();\n-        for (CodegenProperty codegenProperty : codegenModel.allVars) {\n-            propertyExamples.add(codegenProperty.name + \": \" + constructExampleCode(codegenProperty, modelMaps, processedModelMap));\n-        }", "originalCommit": "5aeaafb725796808ab24bacf4c0eafdb75852a72", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc2NDE2NA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7576#discussion_r498764164", "bodyText": "Yeah I wasn't too sure what to do here, keeping simplicity of example, where you'd have to add manually the required arguments, or having everything in a single long line like before, and losing that readability when there are several required arguments, particularly for nested schemas.\nI'll try to use the constructor with required arguments to see how it looks.\nI also wanted to avoid using it to not advertise it as it's less forward compatible (required arguments can change, thus changing the signature)", "author": "zippolyte", "createdAt": "2020-10-02T11:25:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc1NjM1OA=="}], "type": "inlineReview", "revised_code": {"commit": "18743b4aa9812f84d8417469cb38517a21899253", "chunk": "diff --git a/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/GoClientCodegen.java b/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/GoClientCodegen.java\nindex cc51f511e3e..0bc6d55cd53 100644\n--- a/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/GoClientCodegen.java\n+++ b/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/GoClientCodegen.java\n\n@@ -565,6 +565,10 @@ public class GoClientCodegen extends AbstractGoCodegen {\n             processedModelMap.put(model, 1);\n         }\n \n-        return \"*\" + goImportAlias + \".New\" + codegenModel.name + \"WithDefaults()\";\n+        List<String> propertyExamples = new ArrayList<>();\n+        for (CodegenProperty codegenProperty : codegenModel.requiredVars) {\n+            propertyExamples.add(constructExampleCode(codegenProperty, modelMaps, processedModelMap));\n+        }\n+        return \"*\" + goImportAlias + \".New\" + codegenModel.name + \"(\" + StringUtils.join(propertyExamples, \", \") + \")\";\n     }\n }\n"}}, {"oid": "18743b4aa9812f84d8417469cb38517a21899253", "url": "https://github.com/OpenAPITools/openapi-generator/commit/18743b4aa9812f84d8417469cb38517a21899253", "message": "use constructor with required args", "committedDate": "2020-10-02T11:44:01Z", "type": "commit"}, {"oid": "5ee97ce5eeeb293a743722106c1ac4e4a1d35280", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5ee97ce5eeeb293a743722106c1ac4e4a1d35280", "message": "Merge branch 'master' into hippo/fge", "committedDate": "2020-10-14T07:56:51Z", "type": "commit"}]}