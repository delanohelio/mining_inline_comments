{"pr_number": 5932, "pr_title": "RM31087 : Improve job application grid and kanban view", "pr_createdAt": "2020-10-06T09:45:35Z", "pr_url": "https://github.com/axelor/axelor-open-suite/pull/5932", "timeline": [{"oid": "d35e0d520463410b53976f63310d04c2ec6ad37b", "url": "https://github.com/axelor/axelor-open-suite/commit/d35e0d520463410b53976f63310d04c2ec6ad37b", "message": "RM31087 : Improve job application grid and kanban view", "committedDate": "2020-10-06T09:47:49Z", "type": "forcePushed"}, {"oid": "0b2d918a60b495b6ac3fd56ce7a09de5f554620e", "url": "https://github.com/axelor/axelor-open-suite/commit/0b2d918a60b495b6ac3fd56ce7a09de5f554620e", "message": "RM31087 : Improve job application grid and kanban view", "committedDate": "2020-10-06T09:52:19Z", "type": "forcePushed"}, {"oid": "8652b2ffbddfdef3646f1e6ed9f0440c3a4b39fa", "url": "https://github.com/axelor/axelor-open-suite/commit/8652b2ffbddfdef3646f1e6ed9f0440c3a4b39fa", "message": "RM31087 : Improve job application grid and kanban view", "committedDate": "2020-10-13T09:41:44Z", "type": "forcePushed"}, {"oid": "25dbd7d47b65ec112474c0e69daa9b6009c814c7", "url": "https://github.com/axelor/axelor-open-suite/commit/25dbd7d47b65ec112474c0e69daa9b6009c814c7", "message": "RM31087 : Improve job application grid and kanban view", "committedDate": "2020-10-13T09:44:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzIzODIzNQ==", "url": "https://github.com/axelor/axelor-open-suite/pull/5932#discussion_r503238235", "bodyText": "Please display a proper title, (and update translations)", "author": "ale-axelor", "createdAt": "2020-10-12T11:43:57Z", "path": "axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java", "diffHunk": "@@ -61,4 +62,17 @@ public void setSocialNetworkUrl(ActionRequest request, ActionResponse response)\n             .getSocialNetworkUrl(application.getFirstName(), application.getLastName(), 2);\n     response.setAttr(\"linkedinLabel\", \"title\", urlMap.get(\"linkedin\"));\n   }\n+\n+  public void showResume(ActionRequest request, ActionResponse response) {\n+    JobApplication application = request.getContext().asType(JobApplication.class);\n+\n+    if (application.getResumeId() != null) {\n+      response.setView(\n+          ActionView.define(I18n.get(\"test\"))", "originalCommit": "0b2d918a60b495b6ac3fd56ce7a09de5f554620e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8652b2ffbddfdef3646f1e6ed9f0440c3a4b39fa", "chunk": "diff --git a/axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java b/axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java\nindex c1d4072a83..e66e7447fe 100644\n--- a/axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java\n+++ b/axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java\n\n@@ -66,13 +68,17 @@ public class JobApplicationController {\n   public void showResume(ActionRequest request, ActionResponse response) {\n     JobApplication application = request.getContext().asType(JobApplication.class);\n \n-    if (application.getResumeId() != null) {\n+    application = Beans.get(JobApplicationRepository.class).find(application.getId());\n+\n+    if (application.getResume() != null) {\n       response.setView(\n-          ActionView.define(I18n.get(\"test\"))\n-              .model(DMSFile.class.getName())\n-              .add(\"form\", \"dms-file-form\")\n-              .context(\"_showRecord\", application.getResumeId())\n+          ActionView.define(I18n.get(\"JobApplication.resume\"))\n+              .model(MetaFile.class.getName())\n+              .add(\"form\", \"meta-files-form\")\n+              .context(\"_showRecord\", application.getResume().getId().toString())\n               .map());\n+    } else {\n+      response.setAlert(I18n.get(\"No resume found\"));\n     }\n   }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzg3ODM2MA==", "url": "https://github.com/axelor/axelor-open-suite/pull/5932#discussion_r503878360", "bodyText": "please add a try catch to trace any exception", "author": "ale-axelor", "createdAt": "2020-10-13T11:35:43Z", "path": "axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java", "diffHunk": "@@ -61,4 +62,21 @@ public void setSocialNetworkUrl(ActionRequest request, ActionResponse response)\n             .getSocialNetworkUrl(application.getFirstName(), application.getLastName(), 2);\n     response.setAttr(\"linkedinLabel\", \"title\", urlMap.get(\"linkedin\"));\n   }\n+\n+  public void showResume(ActionRequest request, ActionResponse response) {\n+    JobApplication application = request.getContext().asType(JobApplication.class);", "originalCommit": "25dbd7d47b65ec112474c0e69daa9b6009c814c7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4a9e67768753c2796317887c2d394d0abb549933", "chunk": "diff --git a/axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java b/axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java\nindex a3bdb7c41e..915a087e38 100644\n--- a/axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java\n+++ b/axelor-talent/src/main/java/com/axelor/apps/talent/web/JobApplicationController.java\n\n@@ -64,19 +65,23 @@ public class JobApplicationController {\n   }\n \n   public void showResume(ActionRequest request, ActionResponse response) {\n-    JobApplication application = request.getContext().asType(JobApplication.class);\n+    try {\n+      JobApplication application = request.getContext().asType(JobApplication.class);\n \n-    application = Beans.get(JobApplicationRepository.class).find(application.getId());\n+      application = Beans.get(JobApplicationRepository.class).find(application.getId());\n \n-    if (application.getResume() != null) {\n-      response.setView(\n-          ActionView.define(I18n.get(\"JobApplication.resume\"))\n-              .model(MetaFile.class.getName())\n-              .add(\"form\", \"meta-files-form\")\n-              .context(\"_showRecord\", application.getResume().getId().toString())\n-              .map());\n-    } else {\n-      response.setAlert(I18n.get(\"No resume found\"));\n+      if (application.getResume() != null) {\n+        response.setView(\n+            ActionView.define(I18n.get(\"JobApplication.resume\"))\n+                .model(MetaFile.class.getName())\n+                .add(\"form\", \"meta-files-form\")\n+                .context(\"_showRecord\", application.getResume().getId().toString())\n+                .map());\n+      } else {\n+        response.setAlert(I18n.get(\"No resume found\"));\n+      }\n+    } catch (Exception e) {\n+      TraceBackService.trace(response, e);\n     }\n   }\n }\n"}}, {"oid": "4a9e67768753c2796317887c2d394d0abb549933", "url": "https://github.com/axelor/axelor-open-suite/commit/4a9e67768753c2796317887c2d394d0abb549933", "message": "RM31087 : Improve job application grid and kanban view", "committedDate": "2020-10-13T13:37:30Z", "type": "commit"}, {"oid": "4a9e67768753c2796317887c2d394d0abb549933", "url": "https://github.com/axelor/axelor-open-suite/commit/4a9e67768753c2796317887c2d394d0abb549933", "message": "RM31087 : Improve job application grid and kanban view", "committedDate": "2020-10-13T13:37:30Z", "type": "forcePushed"}]}