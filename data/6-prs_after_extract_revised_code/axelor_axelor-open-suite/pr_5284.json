{"pr_number": 5284, "pr_title": "RM27209: generate quotation file's title pdf according to it sale ord\u2026", "pr_createdAt": "2020-04-06T15:52:12Z", "pr_url": "https://github.com/axelor/axelor-open-suite/pull/5284", "timeline": [{"oid": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee", "url": "https://github.com/axelor/axelor-open-suite/commit/62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee", "message": "RM27209: generate quotation file's title pdf according to it sale order or purchase order status", "committedDate": "2020-04-06T15:55:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIxNDE0Mw==", "url": "https://github.com/axelor/axelor-open-suite/pull/5284#discussion_r404214143", "bodyText": "duplicate", "author": "ale-axelor", "createdAt": "2020-04-06T16:11:33Z", "path": "axelor-purchase/src/main/java/com/axelor/apps/purchase/service/print/PurchaseOrderPrintServiceImpl.java", "diffHunk": "@@ -99,6 +110,13 @@ protected String getPurchaseOrderFilesName(boolean plural, String formatPdf) {\n \n   @Override\n   public String getFileName(PurchaseOrder purchaseOrder) {\n+    if (purchaseOrder.getStatusSelect() == PurchaseOrderRepository.STATUS_DRAFT\n+        || purchaseOrder.getStatusSelect() == PurchaseOrderRepository.STATUS_REQUESTED) {\n+      return I18n.get(\"Purchase quotation\")\n+          + \" \"\n+          + purchaseOrder.getPurchaseOrderSeq()\n+          + ((purchaseOrder.getVersionNumber() > 1) ? \"-V\" + purchaseOrder.getVersionNumber() : \"\");", "originalCommit": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "chunk": "diff --git a/axelor-purchase/src/main/java/com/axelor/apps/purchase/service/print/PurchaseOrderPrintServiceImpl.java b/axelor-purchase/src/main/java/com/axelor/apps/purchase/service/print/PurchaseOrderPrintServiceImpl.java\nindex 0974c560d9..43310ed76d 100644\n--- a/axelor-purchase/src/main/java/com/axelor/apps/purchase/service/print/PurchaseOrderPrintServiceImpl.java\n+++ b/axelor-purchase/src/main/java/com/axelor/apps/purchase/service/print/PurchaseOrderPrintServiceImpl.java\n\n@@ -110,14 +107,12 @@ public class PurchaseOrderPrintServiceImpl implements PurchaseOrderPrintService\n \n   @Override\n   public String getFileName(PurchaseOrder purchaseOrder) {\n+    String prefixFileName = I18n.get(\"Purchase order\");\n     if (purchaseOrder.getStatusSelect() == PurchaseOrderRepository.STATUS_DRAFT\n         || purchaseOrder.getStatusSelect() == PurchaseOrderRepository.STATUS_REQUESTED) {\n-      return I18n.get(\"Purchase quotation\")\n-          + \" \"\n-          + purchaseOrder.getPurchaseOrderSeq()\n-          + ((purchaseOrder.getVersionNumber() > 1) ? \"-V\" + purchaseOrder.getVersionNumber() : \"\");\n+      prefixFileName = I18n.get(\"Purchase quotation\");\n     }\n-    return I18n.get(\"Purchase order\")\n+    return prefixFileName\n         + \" \"\n         + purchaseOrder.getPurchaseOrderSeq()\n         + ((purchaseOrder.getVersionNumber() > 1) ? \"-V\" + purchaseOrder.getVersionNumber() : \"\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIxNTE5MA==", "url": "https://github.com/axelor/axelor-open-suite/pull/5284#discussion_r404215190", "bodyText": "duplicate", "author": "ale-axelor", "createdAt": "2020-04-06T16:12:56Z", "path": "axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/SaleOrderServiceImpl.java", "diffHunk": "@@ -54,7 +54,13 @@\n \n   @Override\n   public String getFileName(SaleOrder saleOrder) {\n-\n+    if (saleOrder.getStatusSelect() == SaleOrderRepository.STATUS_DRAFT_QUOTATION\n+        || saleOrder.getStatusSelect() == SaleOrderRepository.STATUS_FINALIZED_QUOTATION) {\n+      return I18n.get(\"Sale quotation\")\n+          + \" \"\n+          + saleOrder.getSaleOrderSeq()\n+          + ((saleOrder.getVersionNumber() > 1) ? \"-V\" + saleOrder.getVersionNumber() : \"\");", "originalCommit": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "chunk": "diff --git a/axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/SaleOrderServiceImpl.java b/axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/SaleOrderServiceImpl.java\nindex b38cbfcf34..bebcf4ff58 100644\n--- a/axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/SaleOrderServiceImpl.java\n+++ b/axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/SaleOrderServiceImpl.java\n\n@@ -54,14 +54,12 @@ public class SaleOrderServiceImpl implements SaleOrderService {\n \n   @Override\n   public String getFileName(SaleOrder saleOrder) {\n+    String prefixFileName = I18n.get(\"Sale order\");\n     if (saleOrder.getStatusSelect() == SaleOrderRepository.STATUS_DRAFT_QUOTATION\n         || saleOrder.getStatusSelect() == SaleOrderRepository.STATUS_FINALIZED_QUOTATION) {\n-      return I18n.get(\"Sale quotation\")\n-          + \" \"\n-          + saleOrder.getSaleOrderSeq()\n-          + ((saleOrder.getVersionNumber() > 1) ? \"-V\" + saleOrder.getVersionNumber() : \"\");\n+      prefixFileName = I18n.get(\"Sale quotation\");\n     }\n-    return I18n.get(\"Sale order\")\n+    return prefixFileName\n         + \" \"\n         + saleOrder.getSaleOrderSeq()\n         + ((saleOrder.getVersionNumber() > 1) ? \"-V\" + saleOrder.getVersionNumber() : \"\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIxOTI1Ng==", "url": "https://github.com/axelor/axelor-open-suite/pull/5284#discussion_r404219256", "bodyText": "duplicate", "author": "ale-axelor", "createdAt": "2020-04-06T16:18:52Z", "path": "axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/print/SaleOrderPrintServiceImpl.java", "diffHunk": "@@ -107,7 +109,15 @@ public ReportSettings prepareReportSettings(SaleOrder saleOrder, boolean proform\n    *\n    * @param plural if there is one or multiple sale orders.\n    */\n-  protected String getSaleOrderFilesName(boolean plural, String format) {\n+  protected String getSaleOrderFilesName(Integer status, boolean plural, String format) {\n+    if (status == SaleOrderRepository.STATUS_DRAFT_QUOTATION\n+        || status == SaleOrderRepository.STATUS_FINALIZED_QUOTATION) {\n+      return I18n.get(plural ? \"Sale quotations\" : \"Sale quotation\")\n+          + \" - \"\n+          + Beans.get(AppBaseService.class).getTodayDate().format(DateTimeFormatter.BASIC_ISO_DATE)\n+          + \".\"\n+          + format;", "originalCommit": "62824c3a9ed4f1a9b7e99dae16cb0339b612e6ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "chunk": "diff --git a/axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/print/SaleOrderPrintServiceImpl.java b/axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/print/SaleOrderPrintServiceImpl.java\nindex c088ed8ba2..2c7c8718be 100644\n--- a/axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/print/SaleOrderPrintServiceImpl.java\n+++ b/axelor-sale/src/main/java/com/axelor/apps/sale/service/saleorder/print/SaleOrderPrintServiceImpl.java\n\n@@ -110,16 +110,13 @@ public class SaleOrderPrintServiceImpl implements SaleOrderPrintService {\n    * @param plural if there is one or multiple sale orders.\n    */\n   protected String getSaleOrderFilesName(Integer status, boolean plural, String format) {\n+    String prefixFileName = I18n.get(plural ? \"Sale orders\" : \"Sale order\");\n     if (status == SaleOrderRepository.STATUS_DRAFT_QUOTATION\n         || status == SaleOrderRepository.STATUS_FINALIZED_QUOTATION) {\n-      return I18n.get(plural ? \"Sale quotations\" : \"Sale quotation\")\n-          + \" - \"\n-          + Beans.get(AppBaseService.class).getTodayDate().format(DateTimeFormatter.BASIC_ISO_DATE)\n-          + \".\"\n-          + format;\n+      prefixFileName = I18n.get(plural ? \"Sale quotations\" : \"Sale quotation\");\n     }\n \n-    return I18n.get(plural ? \"Sale orders\" : \"Sale order\")\n+    return prefixFileName\n         + \" - \"\n         + Beans.get(AppBaseService.class).getTodayDate().format(DateTimeFormatter.BASIC_ISO_DATE)\n         + \".\"\n"}}, {"oid": "c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "url": "https://github.com/axelor/axelor-open-suite/commit/c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "message": "RM27209: generate quotation file's title pdf according to it sale order or purchase order status", "committedDate": "2020-04-07T07:24:41Z", "type": "commit"}, {"oid": "c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "url": "https://github.com/axelor/axelor-open-suite/commit/c0c12ea58b95f52d674cc5699e8ee4fbc9341b04", "message": "RM27209: generate quotation file's title pdf according to it sale order or purchase order status", "committedDate": "2020-04-07T07:24:41Z", "type": "forcePushed"}, {"oid": "42ef1db6ddc24354bdfb7f5057da123f6b56a049", "url": "https://github.com/axelor/axelor-open-suite/commit/42ef1db6ddc24354bdfb7f5057da123f6b56a049", "message": "Merge branch 'dev' into dev-27209", "committedDate": "2020-04-07T08:38:56Z", "type": "commit"}]}