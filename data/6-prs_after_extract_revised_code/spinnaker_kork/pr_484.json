{"pr_number": 484, "pr_title": "feat(annotations): Add annotations to default nullity", "pr_createdAt": "2020-01-22T18:35:31Z", "pr_url": "https://github.com/spinnaker/kork/pull/484", "timeline": [{"oid": "547727b1b4488283e09a9f792efb8b399f1bf88c", "url": "https://github.com/spinnaker/kork/commit/547727b1b4488283e09a9f792efb8b399f1bf88c", "message": "feat(annotations): Add annotations to default nullity\n\nThere is a ParametersAreNonnullByDefault annotation (and corresponding\nnullable) in javax.annotation that has gained some use in Spinnaker's\nmicroservices.  There is not, however, a corresponding annotation that\nallows the default for fields or methods to be set.\n\nAdd annotations to specify that all fields within the scope are Nonnull\n(or Nullable), and to specify that all methods within the scope reutrn\nNonnull (or Nullable).\n\nFinally, add a NonnullByDefault annotation to specify that all methods,\nfields, and parameters in the scope should be Nonnull unless explicitly\nannotated (and a corresponding NullableByDefault).\n\nThe primary use case I envison for the Nullable annotations is to\nreverse the effect of an annotation at a wider scope---perhaps an\nentire package is annotated NonnullByDefault by there is a particular\nclass whose fields should all be nullable.", "committedDate": "2020-01-22T18:34:21Z", "type": "commit"}, {"oid": "f66790c93673daac7bcdcbdd3d9eba6f8e0825c0", "url": "https://github.com/spinnaker/kork/commit/f66790c93673daac7bcdcbdd3d9eba6f8e0825c0", "message": "fix(annotations): Fix documentation on NonnullByDefault\n\nThis annotation was missing 'unless a more tightly-scoped annotation\nis applied'.", "committedDate": "2020-01-22T18:54:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc0MTU0Ng==", "url": "https://github.com/spinnaker/kork/pull/484#discussion_r369741546", "bodyText": "\"by default\" is redundant... (\u00d76)", "author": "plumpy", "createdAt": "2020-01-22T18:54:57Z", "path": "kork-annotations/src/main/java/com/netflix/spinnaker/kork/annotations/FieldsAreNonnullByDefault.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Copyright 2020 Google, LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\")\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.netflix.spinnaker.kork.annotations;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import javax.annotation.Nonnull;\n+import javax.annotation.meta.TypeQualifierDefault;\n+\n+/**\n+ * Defaults all fields within annotation's scope to @Nonnull by default, unless a more", "originalCommit": "547727b1b4488283e09a9f792efb8b399f1bf88c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc3Nzg4MA==", "url": "https://github.com/spinnaker/kork/pull/484#discussion_r369777880", "bodyText": "Good call, fixed.", "author": "ezimanyi", "createdAt": "2020-01-22T20:10:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc0MTU0Ng=="}], "type": "inlineReview", "revised_code": {"commit": "b8e9397feb25100bbd4f12f0fb35a9b147f7ec64", "chunk": "diff --git a/kork-annotations/src/main/java/com/netflix/spinnaker/kork/annotations/FieldsAreNonnullByDefault.java b/kork-annotations/src/main/java/com/netflix/spinnaker/kork/annotations/FieldsAreNonnullByDefault.java\nindex a1021b8..f548eea 100644\n--- a/kork-annotations/src/main/java/com/netflix/spinnaker/kork/annotations/FieldsAreNonnullByDefault.java\n+++ b/kork-annotations/src/main/java/com/netflix/spinnaker/kork/annotations/FieldsAreNonnullByDefault.java\n\n@@ -23,8 +23,8 @@ import javax.annotation.Nonnull;\n import javax.annotation.meta.TypeQualifierDefault;\n \n /**\n- * Defaults all fields within annotation's scope to @Nonnull by default, unless a more\n- * tightly-scoped annotation is applied.\n+ * Defaults all fields within annotation's scope to @Nonnull, unless a more tightly-scoped\n+ * annotation is applied.\n  */\n @Retention(RetentionPolicy.RUNTIME)\n @Nonnull\n"}}, {"oid": "b8e9397feb25100bbd4f12f0fb35a9b147f7ec64", "url": "https://github.com/spinnaker/kork/commit/b8e9397feb25100bbd4f12f0fb35a9b147f7ec64", "message": "fix(annotations): Remove redundant doc comment", "committedDate": "2020-01-22T20:15:00Z", "type": "commit"}, {"oid": "6c0106517881a50ec1d4de6965ddedaeae24afb8", "url": "https://github.com/spinnaker/kork/commit/6c0106517881a50ec1d4de6965ddedaeae24afb8", "message": "Merge branch 'master' into null-annotations", "committedDate": "2020-01-22T21:09:16Z", "type": "commit"}, {"oid": "7ca45f300f6f6f534fbde899a9106e0b13cb4021", "url": "https://github.com/spinnaker/kork/commit/7ca45f300f6f6f534fbde899a9106e0b13cb4021", "message": "Merge branch 'master' into null-annotations", "committedDate": "2020-01-22T23:16:26Z", "type": "commit"}]}