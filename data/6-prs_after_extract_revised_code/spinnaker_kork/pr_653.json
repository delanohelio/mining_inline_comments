{"pr_number": 653, "pr_title": "refactor(security): refactor AuthenticatedRequest to support generic UserDetails", "pr_createdAt": "2020-05-15T21:33:04Z", "pr_url": "https://github.com/spinnaker/kork/pull/653", "timeline": [{"oid": "572474c0e5cd1134d589edcc4f9f55828f2dc151", "url": "https://github.com/spinnaker/kork/commit/572474c0e5cd1134d589edcc4f9f55828f2dc151", "message": "refactor(security): refactor AuthenticatedRequest to support generic UserDetails\n\ndeprecates User and updates interactions to support UserDetails instead of User.\nadds support for encoding allowedAccounts as granted authorities", "committedDate": "2020-05-15T20:43:32Z", "type": "commit"}, {"oid": "4c0e65865700d5de1c356f957ccfe7f2054b8343", "url": "https://github.com/spinnaker/kork/commit/4c0e65865700d5de1c356f957ccfe7f2054b8343", "message": "feat(auth): introduce extension point for customizing AuthenticatedRequest identity opinions", "committedDate": "2020-05-15T20:43:32Z", "type": "commit"}, {"oid": "af7ebfcdceee65281a66f715e52d8cf0b13fd7f1", "url": "https://github.com/spinnaker/kork/commit/af7ebfcdceee65281a66f715e52d8cf0b13fd7f1", "message": "feat(auth): adds runAs to AuthenticatedRequest\n\ndeprecates propagate with principal in favor of runAs which just takes the username\nand allowed accounts to use (callers no longer have to construct a specific User object\nto run as a specific user).", "committedDate": "2020-05-15T21:32:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA4MTkxNQ==", "url": "https://github.com/spinnaker/kork/pull/653#discussion_r426081915", "bodyText": "how did this get past the spotless cop? \ud83d\udc6e\u200d\u2642\ufe0f", "author": "dreynaud", "createdAt": "2020-05-15T23:02:49Z", "path": "kork-security/src/main/java/com/netflix/spinnaker/security/AuthenticatedRequest.java", "diffHunk": "@@ -20,19 +20,98 @@\n \n import com.google.common.base.Preconditions;\n import com.netflix.spinnaker.kork.common.Header;\n-import java.util.HashMap;\n-import java.util.Map;\n-import java.util.Optional;\n-import java.util.UUID;\n+import java.util.*;", "originalCommit": "af7ebfcdceee65281a66f715e52d8cf0b13fd7f1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA4MzA5Nw==", "url": "https://github.com/spinnaker/kork/pull/653#discussion_r426083097", "bodyText": "not sure, spotless appears to just not care about .*", "author": "cfieber", "createdAt": "2020-05-15T23:08:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA4MTkxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "e4e259de744cdbbec204cfaa6904291b2125a79f", "chunk": "diff --git a/kork-security/src/main/java/com/netflix/spinnaker/security/AuthenticatedRequest.java b/kork-security/src/main/java/com/netflix/spinnaker/security/AuthenticatedRequest.java\nindex 3a718c8..eaccd77 100644\n--- a/kork-security/src/main/java/com/netflix/spinnaker/security/AuthenticatedRequest.java\n+++ b/kork-security/src/main/java/com/netflix/spinnaker/security/AuthenticatedRequest.java\n\n@@ -20,7 +20,13 @@ import static java.lang.String.format;\n \n import com.google.common.base.Preconditions;\n import com.netflix.spinnaker.kork.common.Header;\n-import java.util.*;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.UUID;\n import java.util.concurrent.Callable;\n import java.util.concurrent.atomic.AtomicReference;\n import lombok.SneakyThrows;\n"}}, {"oid": "e4e259de744cdbbec204cfaa6904291b2125a79f", "url": "https://github.com/spinnaker/kork/commit/e4e259de744cdbbec204cfaa6904291b2125a79f", "message": "chore(imports): import specific not *", "committedDate": "2020-05-15T23:07:47Z", "type": "commit"}]}