{"pr_number": 1059, "pr_title": "Minor cleanups in QueryToKeyMatcher", "pr_createdAt": "2020-10-28T22:34:59Z", "pr_url": "https://github.com/FoundationDB/fdb-record-layer/pull/1059", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgwMjM5Ng==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1059#discussion_r513802396", "bodyText": "The first two overloaded methods were swapped because the first one is the actual (after setup) entry point and recursion point.", "author": "MMcM", "createdAt": "2020-10-28T22:35:44Z", "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/query/QueryToKeyMatcher.java", "diffHunk": "@@ -223,8 +223,52 @@ public Match matches(@Nonnull KeyExpression expression) {\n     }\n \n     @Nonnull\n-    private Match matches(@Nonnull AndComponent query, @Nonnull KeyExpression key, @Nonnull MatchingMode matchingMode,\n-                          @Nullable FilterSatisfiedMask filterMask) {\n+    private Match matches(@Nonnull QueryComponent query, @Nonnull KeyExpression key,", "originalCommit": "371819a2f095adf11674bb9fe39ddd17df239f46", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgwMjY2Ng==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1059#discussion_r513802666", "bodyText": "This is not possible. GroupingKeyExpression can only occur at the top and is properly dealt with by the first overload.", "author": "MMcM", "createdAt": "2020-10-28T22:36:17Z", "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/query/QueryToKeyMatcher.java", "diffHunk": "@@ -375,8 +374,6 @@ private Match matches(@Nonnull OneOfThemWithComparison query, @Nonnull KeyExpres\n             } else {\n                 return matches(query, children.get(0), matchingMode, filterMask);\n             }\n-        } else if (key instanceof GroupingKeyExpression) {", "originalCommit": "371819a2f095adf11674bb9fe39ddd17df239f46", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgwMjc0MA==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1059#discussion_r513802740", "bodyText": "This is not possible.", "author": "MMcM", "createdAt": "2020-10-28T22:36:31Z", "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/query/QueryToKeyMatcher.java", "diffHunk": "@@ -355,8 +356,6 @@ private Match matches(@Nonnull FieldWithComparison query, @Nonnull KeyExpression\n             } else {\n                 return matches(query, children.get(0), matchingMode, filterMask);\n             }\n-        } else if (key instanceof GroupingKeyExpression) {", "originalCommit": "371819a2f095adf11674bb9fe39ddd17df239f46", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgwMjk4NA==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1059#discussion_r513802984", "bodyText": "Consistent argument layout formatting.", "author": "MMcM", "createdAt": "2020-10-28T22:37:08Z", "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/query/QueryToKeyMatcher.java", "diffHunk": "@@ -345,8 +346,8 @@ private Match matches(@Nonnull NestedField query, @Nonnull KeyExpression key, @N\n     }\n \n     @Nonnull\n-    private Match matches(@Nonnull FieldWithComparison query, @Nonnull KeyExpression key, @Nonnull MatchingMode matchingMode,\n-                          @Nullable FilterSatisfiedMask filterMask) {\n+    private Match matches(@Nonnull FieldWithComparison query, @Nonnull KeyExpression key,\n+                          @Nonnull MatchingMode matchingMode, @Nullable FilterSatisfiedMask filterMask) {", "originalCommit": "371819a2f095adf11674bb9fe39ddd17df239f46", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "610a4b4c10ae6e9a487d06f2c241e72e65bd3419", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/610a4b4c10ae6e9a487d06f2c241e72e65bd3419", "message": "Minor cleanups in QueryToKeyMatcher", "committedDate": "2021-01-29T18:58:59Z", "type": "forcePushed"}, {"oid": "d52aba4cf0a0a6f308ff685e66a76e40bd208946", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/d52aba4cf0a0a6f308ff685e66a76e40bd208946", "message": "Minor cleanups in QueryToKeyMatcher", "committedDate": "2021-02-25T19:53:33Z", "type": "commit"}, {"oid": "d52aba4cf0a0a6f308ff685e66a76e40bd208946", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/d52aba4cf0a0a6f308ff685e66a76e40bd208946", "message": "Minor cleanups in QueryToKeyMatcher", "committedDate": "2021-02-25T19:53:33Z", "type": "forcePushed"}]}