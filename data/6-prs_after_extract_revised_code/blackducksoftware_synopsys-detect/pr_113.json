{"pr_number": 113, "pr_title": "Ruby detectable test", "pr_createdAt": "2020-02-11T21:09:21Z", "pr_url": "https://github.com/blackducksoftware/synopsys-detect/pull/113", "timeline": [{"oid": "cc2d4e780d0a881c589cb641b0d4e4e0f3676d7d", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/cc2d4e780d0a881c589cb641b0d4e4e0f3676d7d", "message": "fix(test): Replaced GraphCompare operations in RubygemsNodePackagerTest with more focused assertions", "committedDate": "2020-02-11T15:59:25Z", "type": "commit"}, {"oid": "037529ff1d5e1479c66d9e3cc8e89aae3997c9e9", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/037529ff1d5e1479c66d9e3cc8e89aae3997c9e9", "message": "fix(test): Created extension of DetectableFunctionalTest for RubyGems", "committedDate": "2020-02-11T20:37:11Z", "type": "commit"}, {"oid": "51f7cee30be704ca26bbd43ada2ca95dd561645e", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/51f7cee30be704ca26bbd43ada2ca95dd561645e", "message": "Merge branch 'master' into rubyDetectableTest", "committedDate": "2020-02-11T20:39:56Z", "type": "commit"}, {"oid": "6a474069ae976a8bc16e52366abc51e6f8220f58", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/6a474069ae976a8bc16e52366abc51e6f8220f58", "message": "feat(test): Created test that extends DetectableFunctionalTest", "committedDate": "2020-02-11T21:07:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM3MTcyNg==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/113#discussion_r378371726", "bodyText": "I agree. Remove them.", "author": "JakeMathews", "createdAt": "2020-02-12T16:38:45Z", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java", "diffHunk": "@@ -64,6 +64,8 @@ public void testParsingGemfileLock() throws MissingExternalIdException {\n         GraphCompare.assertEqualsResource(\"/rubygems/expectedParser_graph.json\", dependencyGraph);\n     }\n \n+    // ^ these two test the exact same thing, and they are the same as RubyGemsNodePackagerTest.packagerTest\n+", "originalCommit": "6a474069ae976a8bc16e52366abc51e6f8220f58", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "be278dbf3e0a3e48e8cadcf56c6e634e7e1a08bf", "chunk": "diff --git a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java\nindex fa28a93cd..a2c2fa015 100644\n--- a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java\n+++ b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java\n\n@@ -38,33 +37,9 @@ import com.synopsys.integration.bdio.model.externalid.ExternalIdFactory;\n import com.synopsys.integration.detectable.annotations.FunctionalTest;\n import com.synopsys.integration.detectable.detectables.rubygems.gemlock.parse.GemlockParser;\n import com.synopsys.integration.detectable.util.FunctionalTestFiles;\n-import com.synopsys.integration.detectable.util.GraphCompare;\n \n @FunctionalTest\n public class GemlockNodeParserTest {\n-    @Test\n-    @Disabled\n-    public void testParsingSmallGemfileLock() throws MissingExternalIdException {\n-        final String text = FunctionalTestFiles.asString(\"/rubygems/small_gemfile_lock\");\n-        final List<String> gemfileLockContents = Arrays.asList(text.split(\"\\n\"));\n-        final GemlockParser gemlockNodeParser = new GemlockParser(new ExternalIdFactory());\n-        final DependencyGraph dependencyGraph = gemlockNodeParser.parseProjectDependencies(gemfileLockContents);\n-\n-        GraphCompare.assertEqualsResource(\"/rubygems/expectedSmallParser_graph.json\", dependencyGraph);\n-    }\n-\n-    @Test\n-    @Disabled\n-    public void testParsingGemfileLock() throws MissingExternalIdException {\n-        final String text = FunctionalTestFiles.asString(\"/rubygems/Gemfile.lock\");\n-        final List<String> gemfileLockContents = Arrays.asList(text.split(\"\\n\"));\n-        final GemlockParser gemlockNodeParser = new GemlockParser(new ExternalIdFactory());\n-        final DependencyGraph dependencyGraph = gemlockNodeParser.parseProjectDependencies(gemfileLockContents);\n-\n-        GraphCompare.assertEqualsResource(\"/rubygems/expectedParser_graph.json\", dependencyGraph);\n-    }\n-\n-    // ^ these two test the exact same thing, and they are the same as RubyGemsNodePackagerTest.packagerTest\n \n     @Test\n     public void testParsingEqualsGemfileLock() throws MissingExternalIdException {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM3MzYyMA==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/113#discussion_r378373620", "bodyText": "The Gemfile.lock used for this test is huge. Assert on everything in that file or remove it.", "author": "JakeMathews", "createdAt": "2020-02-12T16:41:44Z", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java", "diffHunk": "@@ -51,7 +50,15 @@ void packagerTest() throws MissingExternalIdException {\n         final DependencyGraph projects = rubygemsNodePackager.parseProjectDependencies(actualText);\n         Assertions.assertEquals(8, projects.getRootDependencies().size());\n \n-        GraphCompare.assertEqualsResource(\"/rubygems/expectedPackager_graph.json\", projects);", "originalCommit": "6a474069ae976a8bc16e52366abc51e6f8220f58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM3OTUwMQ==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/113#discussion_r378379501", "bodyText": "I thought the goal was just to assert on every \"unique\" type of relationship/stipulation in the file, no, @taikuukaits ?", "author": "crowleySynopsys", "createdAt": "2020-02-12T16:50:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM3MzYyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM5Nzc5OA==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/113#discussion_r378397798", "bodyText": "Yes. Do that, and delete every non unique entry.", "author": "JakeMathews", "createdAt": "2020-02-12T17:21:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM3MzYyMA=="}], "type": "inlineReview", "revised_code": {"commit": "7f406d69aacc40b1d4382da2889b8cdef36fc954", "chunk": "diff --git a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java\nindex 2005872b7..63ffe204f 100644\n--- a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java\n+++ b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java\n\n@@ -43,12 +42,11 @@ public class RubygemsNodePackagerTest {\n     private final ExternalIdFactory externalIdFactory = new ExternalIdFactory();\n \n     @Test\n-    @Disabled\n     void packagerTest() throws MissingExternalIdException {\n         final List<String> actualText = FunctionalTestFiles.asListOfStrings(\"/rubygems/Gemfile.lock\");\n         final GemlockParser rubygemsNodePackager = new GemlockParser(new ExternalIdFactory());\n         final DependencyGraph projects = rubygemsNodePackager.parseProjectDependencies(actualText);\n-        Assertions.assertEquals(8, projects.getRootDependencies().size());\n+        Assertions.assertEquals(2, projects.getRootDependencies().size());\n \n         GraphAssert graphAssert = new GraphAssert(Forge.RUBYGEMS, projects);\n \n"}}, {"oid": "424e8af1dcac755d11c6ac9f970a7ed43c282d9c", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/424e8af1dcac755d11c6ac9f970a7ed43c282d9c", "message": "fix(test): Delected RubyGemsDetectableTest", "committedDate": "2020-02-12T16:52:38Z", "type": "commit"}, {"oid": "be278dbf3e0a3e48e8cadcf56c6e634e7e1a08bf", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/be278dbf3e0a3e48e8cadcf56c6e634e7e1a08bf", "message": "fix(test): Delected unused resources, redundant tests, untested stipulations in GemlockDetectableTest", "committedDate": "2020-02-12T17:18:23Z", "type": "commit"}, {"oid": "7f406d69aacc40b1d4382da2889b8cdef36fc954", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/7f406d69aacc40b1d4382da2889b8cdef36fc954", "message": "fix(test): Trimmed Gemfile.lock", "committedDate": "2020-02-12T17:26:55Z", "type": "commit"}, {"oid": "7ef50fe3223a59e2d85f31ac64d2d81c99418908", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/7ef50fe3223a59e2d85f31ac64d2d81c99418908", "message": "Merge branch 'master' into rubyDetectableTest", "committedDate": "2020-02-12T21:10:28Z", "type": "commit"}, {"oid": "f9a1abf850ac047735d08ce10d86a84afe036e16", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/f9a1abf850ac047735d08ce10d86a84afe036e16", "message": "Merge branch 'master' into rubyDetectableTest", "committedDate": "2020-02-19T15:38:14Z", "type": "commit"}, {"oid": "99b6f84b956c06ce8c3e49940a8900e852b4988f", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/99b6f84b956c06ce8c3e49940a8900e852b4988f", "message": "fix(test): Convert GemlockDetectableTest to java, delete redundant RubygemsNodePackagerTest.packagerTest", "committedDate": "2020-02-19T15:39:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjczNTgxNg==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/113#discussion_r382735816", "bodyText": "If it has root size 2, why only one hasRootDependency?", "author": "taikuukaits", "createdAt": "2020-02-21T18:25:53Z", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockDetectableTest.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package com.synopsys.integration.detectable.detectables.rubygems.gemlock.functional;\n+\n+import java.io.IOException;\n+import java.nio.file.Paths;\n+\n+import org.jetbrains.annotations.NotNull;\n+import org.junit.jupiter.api.Assertions;\n+\n+import com.synopsys.integration.bdio.model.Forge;\n+import com.synopsys.integration.detectable.Detectable;\n+import com.synopsys.integration.detectable.DetectableEnvironment;\n+import com.synopsys.integration.detectable.Extraction;\n+import com.synopsys.integration.detectable.functional.DetectableFunctionalTest;\n+import com.synopsys.integration.detectable.util.graph.NameVersionGraphAssert;\n+\n+public class GemlockDetectableTest extends DetectableFunctionalTest {\n+\n+    public GemlockDetectableTest() throws IOException {\n+        super(\"gemlock\");\n+    }\n+\n+    @Override\n+    public void setup() throws IOException {\n+        addFile(Paths.get(\"Gemfile.lock\"),\n+            \"GEM\",\n+            \"  remote:https://rubygems.org/\",\n+            \"  specs:\",\n+            \"    RubyInline (3.12.4)\",\n+            \"      ZenTest (~>4.3)\",\n+            \"    ZenTest (4.11.1)\",\n+            \"    activesupport (4.2.8)\",\n+            \"      thread_safe (~>0.3,>=0.3.4)\",\n+            \"    thread_safe (0.3.6)\",\n+            \"    cocoapods (1.2.1)\",\n+            \"      activesupport (>=4.0.2,< 5)\",\n+            \"    cocoapods-keys (2.0.0)\",\n+            \"      osx_keychain\",\n+            \"    osx_keychain (1.0.1)\",\n+            \"      RubyInline (~>3)\",\n+            \"\",\n+            \"PLATFORMS\",\n+            \"  ruby\",\n+            \"\",\n+            \"DEPENDENCIES\",\n+            \"  cocoapods (>=1.1.0)\",\n+            \"  cocoapods-keys\",\n+            \"\",\n+            \"BUNDLED WITH\",\n+            \"  1.14.6\");\n+    }\n+\n+    @Override\n+    public Detectable create(@NotNull final DetectableEnvironment detectableEnvironment) {\n+        return detectableFactory.createGemlockDetectable(detectableEnvironment);\n+    }\n+\n+    @Override\n+    public void assertExtraction(@NotNull final Extraction extraction) {\n+        Assertions.assertNotEquals(0, extraction.getCodeLocations().size(), \"A code location should have been generated.\");\n+\n+        NameVersionGraphAssert graphAssert = new NameVersionGraphAssert(Forge.RUBYGEMS, extraction.getCodeLocations().get(0).getDependencyGraph());\n+        graphAssert.hasRootSize(2);\n+        graphAssert.hasRootDependency(\"cocoapods\", \"1.2.1\");", "originalCommit": "99b6f84b956c06ce8c3e49940a8900e852b4988f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8b42e0c738c09cc21037d9bb15be80e2b5612007", "chunk": "diff --git a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockDetectableTest.java b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockDetectableTest.java\nindex 972927f76..822fd7d31 100644\n--- a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockDetectableTest.java\n+++ b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockDetectableTest.java\n\n@@ -61,6 +61,7 @@ public class GemlockDetectableTest extends DetectableFunctionalTest {\n         NameVersionGraphAssert graphAssert = new NameVersionGraphAssert(Forge.RUBYGEMS, extraction.getCodeLocations().get(0).getDependencyGraph());\n         graphAssert.hasRootSize(2);\n         graphAssert.hasRootDependency(\"cocoapods\", \"1.2.1\");\n+        graphAssert.hasRootDependency(\"cocoapods-keys\", \"2.0.0\");\n \n         graphAssert.hasDependency(\"RubyInline\", \"3.12.4\");\n         graphAssert.hasParentChildRelationship(\"RubyInline\", \"3.12.4\", \"ZenTest\", \"4.11.1\");\n"}}, {"oid": "8b42e0c738c09cc21037d9bb15be80e2b5612007", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/8b42e0c738c09cc21037d9bb15be80e2b5612007", "message": "fix(test): Added assertion for second root dependency in GemlockDetectableTest", "committedDate": "2020-02-21T18:32:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzEzNTYyNA==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/113#discussion_r387135624", "bodyText": "The other tests in this file seem to need the same treatment. They access large resource files with minimal assertions.", "author": "JakeMathews", "createdAt": "2020-03-03T16:22:19Z", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java", "diffHunk": "@@ -38,31 +37,9 @@\n import com.synopsys.integration.detectable.annotations.FunctionalTest;\n import com.synopsys.integration.detectable.detectables.rubygems.gemlock.parse.GemlockParser;\n import com.synopsys.integration.detectable.util.FunctionalTestFiles;\n-import com.synopsys.integration.detectable.util.GraphCompare;\n \n @FunctionalTest\n public class GemlockNodeParserTest {", "originalCommit": "8b42e0c738c09cc21037d9bb15be80e2b5612007", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "481971dfa4ad716b08a7f6982a68f0713ba5e1b6", "chunk": "diff --git a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java\nindex a2c2fa015..62983e965 100644\n--- a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java\n+++ b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/GemlockNodeParserTest.java\n\n@@ -32,34 +30,78 @@ import org.junit.jupiter.api.Test;\n import com.synopsys.integration.bdio.graph.DependencyGraph;\n import com.synopsys.integration.bdio.graph.builder.MissingExternalIdException;\n import com.synopsys.integration.bdio.model.Forge;\n-import com.synopsys.integration.bdio.model.dependency.Dependency;\n import com.synopsys.integration.bdio.model.externalid.ExternalIdFactory;\n import com.synopsys.integration.detectable.annotations.FunctionalTest;\n import com.synopsys.integration.detectable.detectables.rubygems.gemlock.parse.GemlockParser;\n-import com.synopsys.integration.detectable.util.FunctionalTestFiles;\n+import com.synopsys.integration.detectable.util.graph.NameVersionGraphAssert;\n \n @FunctionalTest\n public class GemlockNodeParserTest {\n \n     @Test\n     public void testParsingEqualsGemfileLock() throws MissingExternalIdException {\n-        final String text = FunctionalTestFiles.asString(\"/rubygems/Gemfile_equals_version.lock\");\n-        final List<String> gemfileLockContents = Arrays.asList(text.split(\"\\n\"));\n+        final List<String> gemfileLockContents = Arrays.asList(\n+            \"GEM\",\n+            \"  remote: https://artifactory.ilabs.io/artifactory/api/gems/gem-public/\",\n+            \"  specs:\",\n+            \"    SyslogLogger (2.0)\",\n+            \"    activesupport (4.1.15)\",\n+            \"      json (~> 1.7, >= 1.7.7)\",\n+            \"    json (1.8.6)\",\n+            \"\",\n+            \"PLATFORMS\",\n+            \"  ruby\",\n+            \"\",\n+            \"DEPENDENCIES\",\n+            \"  SyslogLogger (~> 2.0)\",\n+            \"  activesupport (~> 4.1.15)\"\n+        );\n         final GemlockParser gemlockNodeParser = new GemlockParser(new ExternalIdFactory());\n         final DependencyGraph dependencyGraph = gemlockNodeParser.parseProjectDependencies(gemfileLockContents);\n \n-        final Dependency bundler = dependencyGraph.getDependency(new ExternalIdFactory().createNameVersionExternalId(Forge.RUBYGEMS, \"bundler\", \"1.11.2\"));\n-        assertNotNull(bundler);\n+        NameVersionGraphAssert graphAssert = new NameVersionGraphAssert(Forge.RUBYGEMS, dependencyGraph);\n+        graphAssert.hasRootSize(2);\n+        graphAssert.hasRootDependency(\"activesupport\", \"4.1.15\");\n+        graphAssert.hasRootDependency(\"SyslogLogger\", \"2.0\");\n+        graphAssert.hasParentChildRelationship(\"activesupport\", \"4.1.15\", \"json\", \"1.8.6\");\n     }\n \n     @Test\n     public void testMissingVersionsGemfileLock() throws MissingExternalIdException {\n-        final String text = FunctionalTestFiles.asString(\"/rubygems/Gemfile_missing_versions.lock\");\n-        final List<String> gemfileLockContents = Arrays.asList(text.split(\"\\n\"));\n+        final List<String> gemfileLockContents = Arrays.asList(\n+            \"GEM\",\n+            \"  remote: https://artifactory.rds.lexmark.com/artifactory/api/gems/rubygems/\",\n+            \"  remote: https://artifactory.rds.lexmark.com/artifactory/api/gems/enterprise-gem-IDP/\",\n+            \"  specs:\",\n+            \"    activesupport (4.2.7.1)\",\n+            \"      thread_safe (~> 0.3, >= 0.3.4)\",\n+            \"      tzinfo (~> 1.1)\",\n+            \"    bullet (5.5.0)\",\n+            \"      activesupport (>= 3.0.0)\",\n+            \"      uniform_notifier (~> 1.10.0)\",\n+            \"    devise (4.2.1)\",\n+            \"    thread_safe (0.3.6-java)\",\n+            \"    tzinfo (1.2.3)\",\n+            \"      thread_safe (~> 0.1)\",\n+            \"    uniform_notifier (1.10.0)\",\n+            \"\",\n+            \"PLATFORMS\",\n+            \"  java\",\n+            \"\",\n+            \"DEPENDENCIES\",\n+            \"  bullet (~> 5.5.0)\",\n+            \"  devise (~> 4.2.1)\"\n+        );\n         final GemlockParser gemlockNodeParser = new GemlockParser(new ExternalIdFactory());\n         final DependencyGraph dependencyGraph = gemlockNodeParser.parseProjectDependencies(gemfileLockContents);\n \n-        final Dependency newrelic_rpm = dependencyGraph.getDependency(new ExternalIdFactory().createNameVersionExternalId(Forge.RUBYGEMS, \"newrelic_rpm\", \"\"));\n-        assertNotNull(newrelic_rpm);\n+        NameVersionGraphAssert graphAssert = new NameVersionGraphAssert(Forge.RUBYGEMS, dependencyGraph);\n+        graphAssert.hasRootSize(2);\n+        graphAssert.hasRootDependency(\"bullet\", \"5.5.0\");\n+        graphAssert.hasRootDependency(\"devise\", \"4.2.1\");\n+        graphAssert.hasParentChildRelationship(\"bullet\", \"5.5.0\", \"activesupport\", \"4.2.7.1\");\n+        graphAssert.hasParentChildRelationship(\"activesupport\", \"4.2.7.1\", \"tzinfo\", \"1.2.3\");\n+        graphAssert.hasParentChildRelationship(\"tzinfo\", \"1.2.3\", \"thread_safe\", \"0.3.6-java\");\n+        graphAssert.hasParentChildRelationship(\"bullet\", \"5.5.0\", \"uniform_notifier\", \"1.10.0\");\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzEzNjUzMQ==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/113#discussion_r387136531", "bodyText": "Move the resource file into the test here. We also need more assertions.", "author": "JakeMathews", "createdAt": "2020-03-03T16:23:26Z", "path": "detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java", "diffHunk": "@@ -36,24 +34,12 @@\n import com.synopsys.integration.detectable.annotations.FunctionalTest;\n import com.synopsys.integration.detectable.detectables.rubygems.gemlock.parse.GemlockParser;\n import com.synopsys.integration.detectable.util.FunctionalTestFiles;\n-import com.synopsys.integration.detectable.util.GraphCompare;\n import com.synopsys.integration.detectable.util.graph.GraphAssert;\n \n @FunctionalTest\n public class RubygemsNodePackagerTest {\n     private final ExternalIdFactory externalIdFactory = new ExternalIdFactory();\n \n-    @Test\n-    @Disabled\n-    void packagerTest() throws MissingExternalIdException {\n-        final List<String> actualText = FunctionalTestFiles.asListOfStrings(\"/rubygems/Gemfile.lock\");\n-        final GemlockParser rubygemsNodePackager = new GemlockParser(new ExternalIdFactory());\n-        final DependencyGraph projects = rubygemsNodePackager.parseProjectDependencies(actualText);\n-        Assertions.assertEquals(8, projects.getRootDependencies().size());\n-\n-        GraphCompare.assertEqualsResource(\"/rubygems/expectedPackager_graph.json\", projects);\n-    }\n-\n     @Test\n     void findsAllVersions() throws MissingExternalIdException {", "originalCommit": "8b42e0c738c09cc21037d9bb15be80e2b5612007", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "481971dfa4ad716b08a7f6982a68f0713ba5e1b6", "chunk": "diff --git a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java\nindex f1b60f4a5..a814493bf 100644\n--- a/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java\n+++ b/detectable/src/test/java/com/synopsys/integration/detectable/detectables/rubygems/gemlock/functional/RubygemsNodePackagerTest.java\n\n@@ -29,12 +30,10 @@ import org.junit.jupiter.api.Test;\n import com.synopsys.integration.bdio.graph.DependencyGraph;\n import com.synopsys.integration.bdio.graph.builder.MissingExternalIdException;\n import com.synopsys.integration.bdio.model.Forge;\n-import com.synopsys.integration.bdio.model.externalid.ExternalId;\n import com.synopsys.integration.bdio.model.externalid.ExternalIdFactory;\n import com.synopsys.integration.detectable.annotations.FunctionalTest;\n import com.synopsys.integration.detectable.detectables.rubygems.gemlock.parse.GemlockParser;\n-import com.synopsys.integration.detectable.util.FunctionalTestFiles;\n-import com.synopsys.integration.detectable.util.graph.GraphAssert;\n+import com.synopsys.integration.detectable.util.graph.NameVersionGraphAssert;\n \n @FunctionalTest\n public class RubygemsNodePackagerTest {\n"}}, {"oid": "481971dfa4ad716b08a7f6982a68f0713ba5e1b6", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/481971dfa4ad716b08a7f6982a68f0713ba5e1b6", "message": "fix(test): Moved test resources for ruby detectable into test files, deleted resource files", "committedDate": "2020-03-03T20:22:43Z", "type": "commit"}]}