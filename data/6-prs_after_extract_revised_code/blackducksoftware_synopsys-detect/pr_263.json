{"pr_number": 263, "pr_title": "Sb conan lockfile", "pr_createdAt": "2020-12-10T13:54:55Z", "pr_url": "https://github.com/blackducksoftware/synopsys-detect/pull/263", "timeline": [{"oid": "3575d776aa43f5ac785e80c34c3e1eac10f750c3", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/3575d776aa43f5ac785e80c34c3e1eac10f750c3", "message": "feat: Conan CLI detector skeleton", "committedDate": "2020-11-13T18:33:48Z", "type": "commit"}, {"oid": "0f6e68c0e607a97c88abb7e319195e2880fefe52", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/0f6e68c0e607a97c88abb7e319195e2880fefe52", "message": "feat: conan cli detector: skeleton", "committedDate": "2020-11-13T20:36:18Z", "type": "commit"}, {"oid": "f843e7b1a7e60ad0e9d65708bde3cfaddab69e7a", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/f843e7b1a7e60ad0e9d65708bde3cfaddab69e7a", "message": "feat: Conan CLI detectable: started work on parser", "committedDate": "2020-11-13T22:14:09Z", "type": "commit"}, {"oid": "2daffc8576199764b33bc587640d935475fda43e", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/2daffc8576199764b33bc587640d935475fda43e", "message": "feat: conan cli detectable: parser in progress", "committedDate": "2020-11-14T01:45:34Z", "type": "commit"}, {"oid": "b0599a509e0bb3e55af86bb2515a0ce394b1bc2c", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b0599a509e0bb3e55af86bb2515a0ce394b1bc2c", "message": "feat: conan cli: gets project name/version from conan info output", "committedDate": "2020-11-14T18:43:20Z", "type": "commit"}, {"oid": "0ad3bc5a408755306cf72db62903ca5bfeab9fa1", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/0ad3bc5a408755306cf72db62903ca5bfeab9fa1", "message": "feat: conan cli: working on parser", "committedDate": "2020-11-14T22:39:58Z", "type": "commit"}, {"oid": "7829b8cc5bb02f3fefaa49898678b4a50231eeb0", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/7829b8cc5bb02f3fefaa49898678b4a50231eeb0", "message": "feat: conan cli: working on parser", "committedDate": "2020-11-16T01:26:23Z", "type": "commit"}, {"oid": "738dc354c1b833bfbe8f879d826a3c87ca3ae710", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/738dc354c1b833bfbe8f879d826a3c87ca3ae710", "message": "feat: conan cli: generates full version string", "committedDate": "2020-11-16T22:29:09Z", "type": "commit"}, {"oid": "8447410d0a25773b7f04d608844e3efd15be68d9", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/8447410d0a25773b7f04d608844e3efd15be68d9", "message": "feat: conan-cli: parse rrev, prev", "committedDate": "2020-11-17T00:06:53Z", "type": "commit"}, {"oid": "a343e7ff7331d2a2279a67acacbcfba0b0a85efe", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/a343e7ff7331d2a2279a67acacbcfba0b0a85efe", "message": "feat: conan-cli: added support for short-form externalIds when rrev present, prev absent", "committedDate": "2020-11-17T15:40:49Z", "type": "commit"}, {"oid": "077a97268a7efc787c010f734b5ac48c46994396", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/077a97268a7efc787c010f734b5ac48c46994396", "message": "refactor(conan-cli): refactoring", "committedDate": "2020-11-17T16:02:06Z", "type": "commit"}, {"oid": "ca9552e1a3228df8ed3545d926f7a88d4a54e709", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ca9552e1a3228df8ed3545d926f7a88d4a54e709", "message": "test: fix expected test results for more short-form externalId generation", "committedDate": "2020-11-17T16:02:44Z", "type": "commit"}, {"oid": "8fbe182db51417264418480a51626020c0d74c4b", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/8fbe182db51417264418480a51626020c0d74c4b", "message": "refactor(conan): refactoring", "committedDate": "2020-11-17T18:49:45Z", "type": "commit"}, {"oid": "645ad1c4b2b9baf81001595de63d6e2613d117a4", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/645ad1c4b2b9baf81001595de63d6e2613d117a4", "message": "feat(conan): parse requires refs", "committedDate": "2020-11-17T21:50:56Z", "type": "commit"}, {"oid": "2e5e9f4b3710c2d0530931a03328b717b92a0937", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/2e5e9f4b3710c2d0530931a03328b717b92a0937", "message": "Merge branch 'master' into sbConanCliDetector", "committedDate": "2020-11-18T15:28:42Z", "type": "commit"}, {"oid": "c9e45721da1f693469e2e8ab8783138d9d129e95", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/c9e45721da1f693469e2e8ab8783138d9d129e95", "message": "refactor(conan): refactoring", "committedDate": "2020-11-18T15:46:00Z", "type": "commit"}, {"oid": "88b38cf261901ea4c30d4149413c92ab9b4639c5", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/88b38cf261901ea4c30d4149413c92ab9b4639c5", "message": "feat: conan-cli: hierarchical bom", "committedDate": "2020-11-18T19:35:18Z", "type": "commit"}, {"oid": "02c6d1cfb276e34396f90c2832e79251af25b143", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/02c6d1cfb276e34396f90c2832e79251af25b143", "message": "feat: conan-cli: optionally include build dependencies", "committedDate": "2020-11-18T22:06:20Z", "type": "commit"}, {"oid": "e7c96e244372f176dd2e40c6f3988b16b5d48f57", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/e7c96e244372f176dd2e40c6f3988b16b5d48f57", "message": "test: conan-cli: fix test for new build deps", "committedDate": "2020-11-18T22:11:50Z", "type": "commit"}, {"oid": "52f190deaefab2cc0e470f663ca656144483fafc", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/52f190deaefab2cc0e470f663ca656144483fafc", "message": "refactor: conan-cli: refactoring so code can be re-used for lockfile detectable", "committedDate": "2020-11-18T22:37:42Z", "type": "commit"}, {"oid": "201c8140a86c72369d4bedb1810e42de56473da4", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/201c8140a86c72369d4bedb1810e42de56473da4", "message": "refactor: conan: refactor for sharing code w/ lockfile detector", "committedDate": "2020-11-18T22:47:56Z", "type": "commit"}, {"oid": "438d07724d721a98414e400a8987e51f0c365e4d", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/438d07724d721a98414e400a8987e51f0c365e4d", "message": "refactor: conan cleanup", "committedDate": "2020-11-19T00:57:55Z", "type": "commit"}, {"oid": "b8f4b2f9b8cd6097f9f40cc1ec7a43e0150f8ef8", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b8f4b2f9b8cd6097f9f40cc1ec7a43e0150f8ef8", "message": "refactor: conan-cli: refactoring; preparing for more extensibility for element parsers", "committedDate": "2020-11-19T16:06:49Z", "type": "commit"}, {"oid": "af4efbb30866cfc1af91dff88514a5f7a6911b4b", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/af4efbb30866cfc1af91dff88514a5f7a6911b4b", "message": "refactor: conan-cli: refactoring toward more extensible node parsing", "committedDate": "2020-11-19T19:37:20Z", "type": "commit"}, {"oid": "4b55b32a8f51f8a4e0c6bee5bcfb07932bbb0257", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/4b55b32a8f51f8a4e0c6bee5bcfb07932bbb0257", "message": "refactor: conan-cli: more extensible node parsing", "committedDate": "2020-11-19T20:43:53Z", "type": "commit"}, {"oid": "0f0358cf183d70ce038f68b1870287ce172d3625", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/0f0358cf183d70ce038f68b1870287ce172d3625", "message": "refactor: conan-cli: re-usable element parsers", "committedDate": "2020-11-19T22:25:05Z", "type": "commit"}, {"oid": "31357de1b7352c14a30de3cb809479574522bb88", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/31357de1b7352c14a30de3cb809479574522bb88", "message": "refactor: conan-cli: streamify element parser loop", "committedDate": "2020-11-19T22:38:47Z", "type": "commit"}, {"oid": "beef7f7e774dd8d03d76bafe385c421c5482f3b9", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/beef7f7e774dd8d03d76bafe385c421c5482f3b9", "message": "refactor: conan-cli: created NodeElementParser to handle ElementParser creation and use", "committedDate": "2020-11-20T00:02:34Z", "type": "commit"}, {"oid": "ea246184c81ea327fe05186dbb7cdcd2992d4349", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ea246184c81ea327fe05186dbb7cdcd2992d4349", "message": "style: conan-cli: comment", "committedDate": "2020-11-20T00:05:36Z", "type": "commit"}, {"oid": "46037ccb8fb755a8c41d508de0896b60c3537950", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/46037ccb8fb755a8c41d508de0896b60c3537950", "message": "Merge branch 'master' into sbConanCliDetector", "committedDate": "2020-11-20T16:01:26Z", "type": "commit"}, {"oid": "b94ae747dbbece0ab8ebbefc83a0eff1e8c96feb", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b94ae747dbbece0ab8ebbefc83a0eff1e8c96feb", "message": "style: header comments", "committedDate": "2020-11-20T16:01:53Z", "type": "commit"}, {"oid": "3bed74de4c4b97b8d0904cfad8ed031163202ef3", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/3bed74de4c4b97b8d0904cfad8ed031163202ef3", "message": "fix: conan-cli: Don't fail just 'cause conan info wrote to stderr (that's where it writes harmless warnings)", "committedDate": "2020-11-20T21:14:48Z", "type": "commit"}, {"oid": "908e5f3a50b23d5fd0b968ebeba2c9190b3d177e", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/908e5f3a50b23d5fd0b968ebeba2c9190b3d177e", "message": "fix: conan-cli: fix conan command error detection", "committedDate": "2020-11-23T18:21:48Z", "type": "commit"}, {"oid": "98fbe3c07d082150e26ef72242ab5c232ce217b2", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/98fbe3c07d082150e26ef72242ab5c232ce217b2", "message": "Merge commit 'e9a9e705d3b5b24ea82c06c9779c89ea421fe32d' into sbConanCliDetector", "committedDate": "2020-12-03T15:43:41Z", "type": "commit"}, {"oid": "ca4d71c8d53fdc475521257b378822ccc6f1ab37", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ca4d71c8d53fdc475521257b378822ccc6f1ab37", "message": "feat: conan cli: added properties for lockfile and additional arguments", "committedDate": "2020-12-03T16:20:20Z", "type": "commit"}, {"oid": "5ba5a647bd96300bc2c539c877504946857ce2ae", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/5ba5a647bd96300bc2c539c877504946857ce2ae", "message": "refactor: conan cli: fix options pkg and name", "committedDate": "2020-12-03T16:26:40Z", "type": "commit"}, {"oid": "1a7c6286c76e1fd27102afd9b55031be706de2f5", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/1a7c6286c76e1fd27102afd9b55031be706de2f5", "message": "feat: conan cli: add lockfile and additional args to command line", "committedDate": "2020-12-03T19:17:45Z", "type": "commit"}, {"oid": "40a3219aea3e5b3058bb0b27186616bc30fe731f", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/40a3219aea3e5b3058bb0b27186616bc30fe731f", "message": "fix: conan cli: remove the lockfile property; conan info reads the lockfile (current dir) by default", "committedDate": "2020-12-03T19:20:55Z", "type": "commit"}, {"oid": "40172a7078cdbf96ca578d6b73dd2656de50f75b", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/40172a7078cdbf96ca578d6b73dd2656de50f75b", "message": "refactor: conan cli: refactoring", "committedDate": "2020-12-03T21:12:48Z", "type": "commit"}, {"oid": "f61901854e052c54f5e27dbb2204fca07c2b6415", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/f61901854e052c54f5e27dbb2204fca07c2b6415", "message": "fix: conan: tweaked external ID generation algorithm based on KB team feedback", "committedDate": "2020-12-04T15:17:38Z", "type": "commit"}, {"oid": "b5e4e72b378dfc70ca2355f1438af82ad63ac3c9", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b5e4e72b378dfc70ca2355f1438af82ad63ac3c9", "message": "fix: conan cli: fix to last refactoring", "committedDate": "2020-12-04T16:51:30Z", "type": "commit"}, {"oid": "ef465bb2adbada6fed782528f82a53b241b63635", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ef465bb2adbada6fed782528f82a53b241b63635", "message": "feat: conan cli: if lockfile provided: include it on the conan info command line.", "committedDate": "2020-12-04T17:16:53Z", "type": "commit"}, {"oid": "afc2023ddbecac021bb5ccb3d078777829d3294b", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/afc2023ddbecac021bb5ccb3d078777829d3294b", "message": "feat: conan lockfile: added skeleton", "committedDate": "2020-12-04T18:58:16Z", "type": "commit"}, {"oid": "beedd7afa82df73d139e4a7e66ca332c9a2d873b", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/beedd7afa82df73d139e4a7e66ca332c9a2d873b", "message": "feat: conan lockfile: applicable and extractable", "committedDate": "2020-12-04T20:11:17Z", "type": "commit"}, {"oid": "1be1960a07af62edc48a7f7f3eb8f507ca9261d8", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/1be1960a07af62edc48a7f7f3eb8f507ca9261d8", "message": "feat: conan lockfile: read lockfile", "committedDate": "2020-12-04T21:18:37Z", "type": "commit"}, {"oid": "622bdc1be80439c88252cbc3d83ba60bd2369a96", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/622bdc1be80439c88252cbc3d83ba60bd2369a96", "message": "feat: conan lockfile continued dev", "committedDate": "2020-12-04T22:16:59Z", "type": "commit"}, {"oid": "b9b86272138135839f8ce27ac5120d53f9ad5505", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b9b86272138135839f8ce27ac5120d53f9ad5505", "message": "refactor: conan lock: working on extractor", "committedDate": "2020-12-05T00:18:32Z", "type": "commit"}, {"oid": "36b69251bbefd68a14304ba99c0c83fb7313c7bb", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/36b69251bbefd68a14304ba99c0c83fb7313c7bb", "message": "feat: refactor: conan lock: working on extractor", "committedDate": "2020-12-05T01:09:53Z", "type": "commit"}, {"oid": "ac31471f8e57ea7b2d127f5e151564bab22d8b39", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ac31471f8e57ea7b2d127f5e151564bab22d8b39", "message": "test: conan lock: adding test cases (all of which still fail)", "committedDate": "2020-12-07T17:05:24Z", "type": "commit"}, {"oid": "9b959869aa8a01b68163c9a8c23ab4417a9afba7", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/9b959869aa8a01b68163c9a8c23ab4417a9afba7", "message": "feat: conan: working on parsing / node building", "committedDate": "2020-12-07T20:37:47Z", "type": "commit"}, {"oid": "a2f3ba2e854487351cc4d5f9f5a4c10abe3f6011", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/a2f3ba2e854487351cc4d5f9f5a4c10abe3f6011", "message": "feat: conan: working on parsing and node building", "committedDate": "2020-12-07T23:15:33Z", "type": "commit"}, {"oid": "f6fb60ddb7ab38efdb534e868af28bd31bdc0da9", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/f6fb60ddb7ab38efdb534e868af28bd31bdc0da9", "message": "feat: conan: lockfile parsing and graph building minimally working", "committedDate": "2020-12-08T00:02:52Z", "type": "commit"}, {"oid": "264c76e50e115abfefcb768f56febf199177560e", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/264c76e50e115abfefcb768f56febf199177560e", "message": "style(doc): Reqts: Clarity that OpenJDK version is about Java", "committedDate": "2020-12-08T22:08:35Z", "type": "commit"}, {"oid": "14221e404a6889e7283525ceabd8066898b45b53", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/14221e404a6889e7283525ceabd8066898b45b53", "message": "test: conan lockfile: func tests pass", "committedDate": "2020-12-08T22:44:06Z", "type": "commit"}, {"oid": "088ce3a07f0f90812e5bfcf490e03f23ff40fb94", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/088ce3a07f0f90812e5bfcf490e03f23ff40fb94", "message": "feat: conan-lock: fix extractor return value", "committedDate": "2020-12-09T00:29:46Z", "type": "commit"}, {"oid": "101ae51a59f75d35f70cc4112c12e6e20ecbd564", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/101ae51a59f75d35f70cc4112c12e6e20ecbd564", "message": "test: conan-lock: added battery test", "committedDate": "2020-12-09T00:30:09Z", "type": "commit"}, {"oid": "faa44d877cd56fac8df84f207c4b1c1f1d4f5bea", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/faa44d877cd56fac8df84f207c4b1c1f1d4f5bea", "message": "feat: conan: added ability to prefer package revision matches (default=false)", "committedDate": "2020-12-09T17:47:24Z", "type": "commit"}, {"oid": "d8e94c43118881c513140f417d85b072b6f15a57", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d8e94c43118881c513140f417d85b072b6f15a57", "message": "test: conan lock: add longform externalID test", "committedDate": "2020-12-09T18:52:13Z", "type": "commit"}, {"oid": "f16d0ac7a5f3db0a074137266844b2ef72d7b434", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/f16d0ac7a5f3db0a074137266844b2ef72d7b434", "message": "test: conan cli func test", "committedDate": "2020-12-09T19:06:25Z", "type": "commit"}, {"oid": "0a785d5771386a5831e9512f40cc7e7fdc124ce7", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/0a785d5771386a5831e9512f40cc7e7fdc124ce7", "message": "test: conan-lock: test dev dependencies", "committedDate": "2020-12-09T20:47:37Z", "type": "commit"}, {"oid": "b7c49790a79482bba8bf6ba3174a9fde9651fc9f", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b7c49790a79482bba8bf6ba3174a9fde9651fc9f", "message": "refactor: conan cleanup", "committedDate": "2020-12-09T21:47:09Z", "type": "commit"}, {"oid": "d8d5e166e5cca76caf0db1e0847c8a12d4710b01", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d8d5e166e5cca76caf0db1e0847c8a12d4710b01", "message": "refactor: conan cleanup", "committedDate": "2020-12-09T23:54:44Z", "type": "commit"}, {"oid": "0119b88992e4357f23fd099a5d32d20545a1bb7e", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/0119b88992e4357f23fd099a5d32d20545a1bb7e", "message": "refactor: conan cleanup", "committedDate": "2020-12-10T11:15:35Z", "type": "commit"}, {"oid": "ca0d35bf11d94828e80d1b1c124cc5d1985f0374", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ca0d35bf11d94828e80d1b1c124cc5d1985f0374", "message": "refactor: conan cleanup", "committedDate": "2020-12-10T12:12:46Z", "type": "commit"}, {"oid": "61b684ac330bb5a61da5a078eb53df30905acbc7", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/61b684ac330bb5a61da5a078eb53df30905acbc7", "message": "test: conan lock: fix/expand battery test", "committedDate": "2020-12-10T12:13:22Z", "type": "commit"}, {"oid": "15f44d559d060e63f233a3a9e8e082f0baa5491e", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/15f44d559d060e63f233a3a9e8e082f0baa5491e", "message": "refactor: conan cleanup", "committedDate": "2020-12-10T13:27:35Z", "type": "commit"}, {"oid": "cf81e70a2689341581fc7c43f8e6b1dfea7bc436", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/cf81e70a2689341581fc7c43f8e6b1dfea7bc436", "message": "merge from master", "committedDate": "2020-12-10T13:38:49Z", "type": "commit"}, {"oid": "e54784ae8675555dc577e04962882aba8408ef6c", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/e54784ae8675555dc577e04962882aba8408ef6c", "message": "feat: conan: changed property detect.conan.require.package.revision.match to detect.conan.attempt.package.revision.match", "committedDate": "2020-12-10T16:47:23Z", "type": "commit"}, {"oid": "4fd379992c24ca34b0d429a205985400e301d2f8", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/4fd379992c24ca34b0d429a205985400e301d2f8", "message": "style: conan: cleaning up logging", "committedDate": "2020-12-10T16:48:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5MDAwMQ==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/263#discussion_r540390001", "bodyText": "I really like this approach. We should do this more often.", "author": "taikuukaits", "createdAt": "2020-12-10T18:12:35Z", "path": "detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/cli/ConanCliExtractor.java", "diffHunk": "@@ -0,0 +1,112 @@\n+/**\n+ * detectable\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detectable.detectables.conan.cli;\n+\n+import java.io.File;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.jetbrains.annotations.NotNull;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.synopsys.integration.detectable.detectable.executable.DetectableExecutableRunner;\n+import com.synopsys.integration.detectable.detectables.conan.ConanDetectableResult;\n+import com.synopsys.integration.detectable.detectables.conan.cli.parser.ConanInfoParser;\n+import com.synopsys.integration.detectable.extraction.Extraction;\n+import com.synopsys.integration.exception.IntegrationException;\n+import com.synopsys.integration.executable.ExecutableOutput;\n+\n+public class ConanCliExtractor {\n+    private final Logger logger = LoggerFactory.getLogger(this.getClass());\n+    private final DetectableExecutableRunner executableRunner;\n+    private final ConanInfoParser conanInfoParser;\n+\n+    public ConanCliExtractor(DetectableExecutableRunner executableRunner, ConanInfoParser conanInfoParser) {\n+        this.executableRunner = executableRunner;\n+        this.conanInfoParser = conanInfoParser;\n+    }\n+\n+    public Extraction extract(File projectDir, File conanExe, ConanCliExtractorOptions conanCliExtractorOptions) {\n+        List<String> exeArgs = generateConanInfoCmdArgs(projectDir, conanCliExtractorOptions);\n+        ExecutableOutput conanInfoOutput;\n+        try {\n+            conanInfoOutput = executableRunner.execute(projectDir, conanExe, exeArgs);\n+        } catch (Exception e) {\n+            logger.error(String.format(\"Exception thrown executing conan info command: %s\", e.getMessage()));\n+            return new Extraction.Builder().exception(e).build();\n+        }\n+        if (!wasSuccess(conanInfoOutput)) {\n+            return new Extraction.Builder().failure(\"Conan info command reported errors\").build();\n+        }\n+        if (!producedOutput(conanInfoOutput)) {\n+            return new Extraction.Builder().failure(\"Conan info command produced no output\").build();\n+        }\n+        try {\n+            ConanDetectableResult result = conanInfoParser.generateCodeLocationFromConanInfoOutput(conanInfoOutput.getStandardOutput(),\n+                conanCliExtractorOptions.shouldIncludeDevDependencies(), conanCliExtractorOptions.preferLongFormExternalIds());\n+            return new Extraction.Builder().success(result.getCodeLocation()).projectName(result.getProjectName()).projectVersion(result.getProjectVersion()).build();\n+        } catch (IntegrationException e) {\n+            return new Extraction.Builder().failure(e.getMessage()).build();\n+        }\n+    }\n+\n+    private boolean wasSuccess(ExecutableOutput conanInfoOutput) {\n+        String errorOutput = conanInfoOutput.getErrorOutput();\n+        if (StringUtils.isNotBlank(errorOutput) && errorOutput.contains(\"ERROR: \")) {\n+            logger.error(\"The conan info command reported errors: {}\", errorOutput);\n+            return false;\n+        }\n+        if (StringUtils.isNotBlank(errorOutput)) {\n+            logger.debug(\"The conan info command wrote to stderr: {}\", errorOutput);\n+        }\n+        return true;\n+    }\n+\n+    private boolean producedOutput(ExecutableOutput conanInfoOutput) {\n+        String standardOutput = conanInfoOutput.getStandardOutput();\n+        if (StringUtils.isBlank(standardOutput)) {\n+            logger.error(\"Nothing returned from conan info command\");\n+            return false;\n+        }\n+        return true;\n+    }\n+\n+    @NotNull\n+    private List<String> generateConanInfoCmdArgs(File projectDir, ConanCliExtractorOptions conanCliExtractorOptions) {\n+        List<String> exeArgs = new ArrayList<>();\n+        exeArgs.add(\"info\");\n+        conanCliExtractorOptions.getLockfilePath().ifPresent(lockfilePath -> {", "originalCommit": "4fd379992c24ca34b0d429a205985400e301d2f8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c5c7881f92dd006016e5f1f5440bad854742eeed", "chunk": "diff --git a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/cli/ConanCliExtractor.java b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/cli/ConanCliExtractor.java\nindex 5b050743d..1ce903ef8 100644\n--- a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/cli/ConanCliExtractor.java\n+++ b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/cli/ConanCliExtractor.java\n\n@@ -32,11 +32,11 @@ import org.jetbrains.annotations.NotNull;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n+import com.synopsys.integration.detectable.detectable.exception.DetectableException;\n import com.synopsys.integration.detectable.detectable.executable.DetectableExecutableRunner;\n import com.synopsys.integration.detectable.detectables.conan.ConanDetectableResult;\n import com.synopsys.integration.detectable.detectables.conan.cli.parser.ConanInfoParser;\n import com.synopsys.integration.detectable.extraction.Extraction;\n-import com.synopsys.integration.exception.IntegrationException;\n import com.synopsys.integration.executable.ExecutableOutput;\n \n public class ConanCliExtractor {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5NTUyNg==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/263#discussion_r540395526", "bodyText": "It seemed like parsing and model were well separated but here the builder does the parsing? I think ideally this would be in some kind of parser.", "author": "taikuukaits", "createdAt": "2020-12-10T18:21:10Z", "path": "detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/graph/ConanNodeBuilder.java", "diffHunk": "@@ -0,0 +1,193 @@\n+/**\n+ * detectable\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detectable.detectables.conan.graph;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.StringTokenizer;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+// TODO when ConanNode is re-worked, this class will need to be completely  re-thought\n+public class ConanNodeBuilder {\n+    private final Logger logger = LoggerFactory.getLogger(this.getClass());\n+    private String ref;\n+    private String path;\n+    private String name;\n+    private String version;\n+    private String user;\n+    private String channel;\n+    private String recipeRevision;\n+    private String packageId;\n+    private String packageRevision;\n+    private final List<String> requiresRefs = new ArrayList<>();\n+    private List<Integer> requiresIndices;\n+    private final List<String> buildRequiresRefs = new ArrayList<>();\n+    private List<Integer> buildRequiresIndices;\n+    private boolean valid = true;\n+    private boolean forcedRootNode = false;\n+\n+    public ConanNodeBuilder forceRootNode() {\n+        forcedRootNode = true;\n+        return this;\n+    }\n+\n+    public ConanNodeBuilder setRefFromLockfile(String ref) {\n+        if (StringUtils.isBlank(ref)) {\n+            return this;\n+        }\n+        ref = ref.trim();\n+        StringTokenizer tokenizer = new StringTokenizer(ref, \"@/#\");", "originalCommit": "4fd379992c24ca34b0d429a205985400e301d2f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU4MTcwOA==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/263#discussion_r540581708", "bodyText": "good point. all parsing is now in the parsers", "author": "stevebillings", "createdAt": "2020-12-10T23:40:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5NTUyNg=="}], "type": "inlineReview", "revised_code": {"commit": "6fb3fa001fcfc264408069f3028e475afc22f458", "chunk": "diff --git a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/graph/ConanNodeBuilder.java b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/graph/ConanNodeBuilder.java\nindex fd021dc48..fa6b6e4ed 100644\n--- a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/graph/ConanNodeBuilder.java\n+++ b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/graph/ConanNodeBuilder.java\n\n@@ -25,7 +25,6 @@ package com.synopsys.integration.detectable.detectables.conan.graph;\n import java.util.ArrayList;\n import java.util.List;\n import java.util.Optional;\n-import java.util.StringTokenizer;\n \n import org.apache.commons.lang3.StringUtils;\n import org.slf4j.Logger;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5NjUzMg==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/263#discussion_r540396532", "bodyText": "I don't love having this code here. Do we follow this pattern in other detectables? Is this something we want to do for all detectables?", "author": "taikuukaits", "createdAt": "2020-12-10T18:22:39Z", "path": "detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/ConanLockfileDetectable.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/**\n+ * detectable\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detectable.detectables.conan.lockfile;\n+\n+import java.io.File;\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.synopsys.integration.detectable.Detectable;\n+import com.synopsys.integration.detectable.DetectableEnvironment;\n+import com.synopsys.integration.detectable.detectable.annotation.DetectableInfo;\n+import com.synopsys.integration.detectable.detectable.exception.DetectableException;\n+import com.synopsys.integration.detectable.detectable.executable.ExecutableFailedException;\n+import com.synopsys.integration.detectable.detectable.file.FileFinder;\n+import com.synopsys.integration.detectable.detectable.result.DetectableResult;\n+import com.synopsys.integration.detectable.detectable.result.FileNotFoundDetectableResult;\n+import com.synopsys.integration.detectable.detectable.result.GivenFileNotFoundDetectableResult;\n+import com.synopsys.integration.detectable.detectable.result.PassedDetectableResult;\n+import com.synopsys.integration.detectable.extraction.Extraction;\n+import com.synopsys.integration.detectable.extraction.ExtractionEnvironment;\n+\n+@DetectableInfo(language = \"C/C++\", forge = \"conan\", requirementsMarkdown = \"Files: conan.lock.\")\n+public class ConanLockfileDetectable extends Detectable {\n+    private final Logger logger = LoggerFactory.getLogger(this.getClass());\n+    public static final String CONANLOCKFILE = \"conan.lock\";\n+    private final FileFinder fileFinder;\n+    private final ConanLockfileExtractor conanLockfileExtractor;\n+    private final ConanLockfileExtractorOptions conanLockfileExtractorOptions;\n+    private File lockfile;\n+\n+    public ConanLockfileDetectable(DetectableEnvironment environment, FileFinder fileFinder, ConanLockfileExtractor conanLockfileExtractor,\n+        ConanLockfileExtractorOptions conanLockfileExtractorOptions) {\n+        super(environment);\n+        this.fileFinder = fileFinder;\n+        this.conanLockfileExtractor = conanLockfileExtractor;\n+        this.conanLockfileExtractorOptions = conanLockfileExtractorOptions;\n+    }\n+\n+    @Override\n+    public DetectableResult applicable() {\n+        if (conanLockfileExtractorOptions.getLockfilePath().isPresent()) {\n+            logger.debug(\"Conan Lockfile detectable applies because user supplied lockfile path {}\", conanLockfileExtractorOptions.getLockfilePath().get());\n+            return new PassedDetectableResult();\n+        }\n+        File discoveredLockfile = fileFinder.findFile(environment.getDirectory(), CONANLOCKFILE);\n+        if (discoveredLockfile == null) {\n+            return new FileNotFoundDetectableResult(CONANLOCKFILE);\n+        }\n+        logger.debug(\"Conan Lockfile detectable applies because Detect found the default lockfile {}\", discoveredLockfile.getAbsolutePath());\n+        lockfile = discoveredLockfile;\n+        return new PassedDetectableResult();\n+    }\n+\n+    @Override\n+    public DetectableResult extractable() throws DetectableException {\n+        if (conanLockfileExtractorOptions.getLockfilePath().isPresent()) {\n+            String givenLockfilePath = conanLockfileExtractorOptions.getLockfilePath().get();\n+            Optional<File> verifiedLockfile = verifyFile(givenLockfilePath);\n+            if (verifiedLockfile.isPresent()) {\n+                lockfile = verifiedLockfile.get();\n+            } else {\n+                return new GivenFileNotFoundDetectableResult(givenLockfilePath);\n+            }\n+        }\n+        return new PassedDetectableResult();\n+    }\n+\n+    @Override\n+    public Extraction extract(ExtractionEnvironment extractionEnvironment) throws ExecutableFailedException {\n+        return conanLockfileExtractor.extract(lockfile, conanLockfileExtractorOptions);\n+    }\n+\n+    private Optional<File> verifyFile(String filePath) {", "originalCommit": "4fd379992c24ca34b0d429a205985400e301d2f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU4MjM5NQ==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/263#discussion_r540582395", "bodyText": "I also realized that it was inconsistent with what other detectors do. The file finder checks for existence and not readability. So I took out the readability check, and inlined the little bit of code that remained (the existence check).", "author": "stevebillings", "createdAt": "2020-12-10T23:41:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5NjUzMg=="}], "type": "inlineReview", "revised_code": {"commit": "6fb3fa001fcfc264408069f3028e475afc22f458", "chunk": "diff --git a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/ConanLockfileDetectable.java b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/ConanLockfileDetectable.java\nindex fc9608ff4..70a3f75ce 100644\n--- a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/ConanLockfileDetectable.java\n+++ b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/ConanLockfileDetectable.java\n\n@@ -23,7 +23,6 @@\n package com.synopsys.integration.detectable.detectables.conan.lockfile;\n \n import java.io.File;\n-import java.util.Optional;\n \n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5NzAxMg==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/263#discussion_r540397012", "bodyText": "Should gson be a constructor parameter?", "author": "taikuukaits", "createdAt": "2020-12-10T18:23:25Z", "path": "detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/parser/ConanLockfileParser.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/**\n+ * detectable\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detectable.detectables.conan.lockfile.parser;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.function.Consumer;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.synopsys.integration.bdio.model.externalid.ExternalIdFactory;\n+import com.synopsys.integration.detectable.detectables.conan.ConanCodeLocationGenerator;\n+import com.synopsys.integration.detectable.detectables.conan.ConanDetectableResult;\n+import com.synopsys.integration.detectable.detectables.conan.ConanExternalIdVersionGenerator;\n+import com.synopsys.integration.detectable.detectables.conan.graph.ConanNode;\n+import com.synopsys.integration.detectable.detectables.conan.graph.ConanNodeBuilder;\n+import com.synopsys.integration.detectable.detectables.conan.lockfile.parser.model.ConanLockfileData;\n+import com.synopsys.integration.detectable.detectables.conan.lockfile.parser.model.ConanLockfileNode;\n+import com.synopsys.integration.exception.IntegrationException;\n+\n+public class ConanLockfileParser {\n+    private final Logger logger = LoggerFactory.getLogger(this.getClass());\n+    private final ConanCodeLocationGenerator conanCodeLocationGenerator;\n+    private final ExternalIdFactory externalIdFactory;\n+    private final ConanExternalIdVersionGenerator versionGenerator;\n+\n+    public ConanLockfileParser(ConanCodeLocationGenerator conanCodeLocationGenerator, ExternalIdFactory externalIdFactory, ConanExternalIdVersionGenerator versionGenerator) {\n+        this.conanCodeLocationGenerator = conanCodeLocationGenerator;\n+        this.externalIdFactory = externalIdFactory;\n+        this.versionGenerator = versionGenerator;\n+    }\n+\n+    public ConanDetectableResult generateCodeLocationFromConanLockfileContents(Gson gson, String conanLockfileContents,", "originalCommit": "4fd379992c24ca34b0d429a205985400e301d2f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU4MjQ5Mg==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/263#discussion_r540582492", "bodyText": "yes, done.", "author": "stevebillings", "createdAt": "2020-12-10T23:42:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5NzAxMg=="}], "type": "inlineReview", "revised_code": {"commit": "6fb3fa001fcfc264408069f3028e475afc22f458", "chunk": "diff --git a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/parser/ConanLockfileParser.java b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/parser/ConanLockfileParser.java\nindex 19945e297..73c52fb84 100644\n--- a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/parser/ConanLockfileParser.java\n+++ b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/lockfile/parser/ConanLockfileParser.java\n\n@@ -26,8 +26,10 @@ import java.util.HashMap;\n import java.util.List;\n import java.util.Map;\n import java.util.Optional;\n+import java.util.StringTokenizer;\n import java.util.function.Consumer;\n \n+import org.apache.commons.lang3.StringUtils;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n"}}, {"oid": "6fb3fa001fcfc264408069f3028e475afc22f458", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/6fb3fa001fcfc264408069f3028e475afc22f458", "message": "refactor: conan: incorporating code review feedback", "committedDate": "2020-12-10T20:55:03Z", "type": "commit"}, {"oid": "c481d846db6a4eae7bc487d4b70d857947e52d87", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/c481d846db6a4eae7bc487d4b70d857947e52d87", "message": "merge from master", "committedDate": "2020-12-10T21:33:25Z", "type": "commit"}, {"oid": "82b93f28ddd1093662117871517d77bb7f59e1b7", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/82b93f28ddd1093662117871517d77bb7f59e1b7", "message": "style(doc): added RNote and doc for Conan", "committedDate": "2020-12-10T23:36:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkyMjM2Mw==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/263#discussion_r540922363", "bodyText": "Since this class contains no state this could be a static method.  That way you don't have to instantiate it first.", "author": "psantos1113", "createdAt": "2020-12-11T12:46:36Z", "path": "detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/ConanExternalIdVersionGenerator.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/**\n+ * detectable\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detectable.detectables.conan;\n+\n+import com.synopsys.integration.detectable.detectables.conan.graph.ConanNode;\n+\n+// TODO This class needs unit test coverage. Then, it needs to get re-worked\n+// along with ConanNode (which will return Optionals).\n+public class ConanExternalIdVersionGenerator {\n+\n+    public String generateExternalIdVersionString(ConanNode node, boolean preferLongFormExternalIds) {", "originalCommit": "82b93f28ddd1093662117871517d77bb7f59e1b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA0NDY2NQ==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/263#discussion_r542044665", "bodyText": "It is now static.", "author": "stevebillings", "createdAt": "2020-12-14T00:42:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkyMjM2Mw=="}], "type": "inlineReview", "revised_code": {"commit": "ab1aa6d6cb60bc393a25dc25094abd7713c2cb4c", "chunk": "diff --git a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/ConanExternalIdVersionGenerator.java b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/ConanExternalIdVersionGenerator.java\nindex 2280e4325..8a85b3236 100644\n--- a/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/ConanExternalIdVersionGenerator.java\n+++ b/detectable/src/main/java/com/synopsys/integration/detectable/detectables/conan/ConanExternalIdVersionGenerator.java\n\n@@ -22,13 +22,13 @@\n  */\n package com.synopsys.integration.detectable.detectables.conan;\n \n-import com.synopsys.integration.detectable.detectables.conan.graph.ConanNode;\n+import com.synopsys.integration.detectable.detectables.conan.graph.GenericNode;\n \n // TODO This class needs unit test coverage. Then, it needs to get re-worked\n // along with ConanNode (which will return Optionals).\n public class ConanExternalIdVersionGenerator {\n \n-    public String generateExternalIdVersionString(ConanNode node, boolean preferLongFormExternalIds) {\n+    public String generateExternalIdVersionString(GenericNode<String> node, boolean preferLongFormExternalIds) {\n         String externalIdVersion;\n         if (hasValue(node.getRecipeRevision()) && hasValue(node.getPackageRevision()) && preferLongFormExternalIds) {\n             // generate long form\n"}}, {"oid": "ab1aa6d6cb60bc393a25dc25094abd7713c2cb4c", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ab1aa6d6cb60bc393a25dc25094abd7713c2cb4c", "message": "refactor: add node type that uses generics for requires lists", "committedDate": "2020-12-11T22:29:41Z", "type": "commit"}, {"oid": "a222886b2f26e46640d24d1d84d08c0fdb02dfee", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/a222886b2f26e46640d24d1d84d08c0fdb02dfee", "message": "refactor: conan: remove replaced classes", "committedDate": "2020-12-11T22:38:16Z", "type": "commit"}, {"oid": "f6a184d0454e5ec9a623cf5f34ae6cddbe93ad63", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/f6a184d0454e5ec9a623cf5f34ae6cddbe93ad63", "message": "refactor: conan: remove replaced classes", "committedDate": "2020-12-11T22:41:09Z", "type": "commit"}, {"oid": "391ffb6b0e21cc28f0a79a94b37d3f3f919ebf47", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/391ffb6b0e21cc28f0a79a94b37d3f3f919ebf47", "message": "test: conan: added unit tests for version string generator", "committedDate": "2020-12-11T23:08:34Z", "type": "commit"}, {"oid": "3ef88b9a5a6d57c811c4fedcfa3a6f076728dca7", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/3ef88b9a5a6d57c811c4fedcfa3a6f076728dca7", "message": "refactor: finalize replacement classnames", "committedDate": "2020-12-11T23:14:54Z", "type": "commit"}, {"oid": "954d7ec2e9b05cf2438c9789069ef0ab11ad65bb", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/954d7ec2e9b05cf2438c9789069ef0ab11ad65bb", "message": "refactor: conan: tweaking naming", "committedDate": "2020-12-11T23:20:25Z", "type": "commit"}, {"oid": "8c6ff61c61b2bc27a5626b92b675de7e5fa015bc", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/8c6ff61c61b2bc27a5626b92b675de7e5fa015bc", "message": "refactor: conan: reworking node to return optionals", "committedDate": "2020-12-12T01:43:40Z", "type": "commit"}, {"oid": "8c4e3f3e360ac8886e55e1e948554f6c8461da96", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/8c4e3f3e360ac8886e55e1e948554f6c8461da96", "message": "refactor: conan: removed last todo", "committedDate": "2020-12-12T01:48:38Z", "type": "commit"}, {"oid": "a85ee2860383f5125a89a5260e931cc2dbe9eb69", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/a85ee2860383f5125a89a5260e931cc2dbe9eb69", "message": "refactor: conan sonar issues", "committedDate": "2020-12-12T02:29:51Z", "type": "commit"}, {"oid": "c5c7881f92dd006016e5f1f5440bad854742eeed", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/c5c7881f92dd006016e5f1f5440bad854742eeed", "message": "fix: conan: throw DetectableException (instead of IntegrationException)", "committedDate": "2020-12-12T02:47:17Z", "type": "commit"}, {"oid": "d7ccfc41b858dd5c1457002c892b2d81dd9f6f11", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d7ccfc41b858dd5c1457002c892b2d81dd9f6f11", "message": "Merge branch 'master' into sbConanLockfile", "committedDate": "2020-12-12T03:01:52Z", "type": "commit"}, {"oid": "8abbbbd3499ad5a022940f4e4f5807715944c474", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/8abbbbd3499ad5a022940f4e4f5807715944c474", "message": "fix: conan lockfile: set project name/version", "committedDate": "2020-12-13T01:02:03Z", "type": "commit"}, {"oid": "dc8f1e38e466b2710b4f442a93cfbfaa23c2f030", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/dc8f1e38e466b2710b4f442a93cfbfaa23c2f030", "message": "refactor: incorporate code review feedback (ConanCodeLocationGenerator method -> static)", "committedDate": "2020-12-14T00:41:41Z", "type": "commit"}]}