{"pr_number": 196, "pr_title": "Cognitive complexity", "pr_createdAt": "2020-06-19T19:17:51Z", "pr_url": "https://github.com/blackducksoftware/synopsys-detect/pull/196", "timeline": [{"oid": "eb59bc5d957039f78278c0095d2e6aa6c59e4438", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/eb59bc5d957039f78278c0095d2e6aa6c59e4438", "message": "refactor(sonar): Reduced cognitive complexity by moving Gradle execution code to its own class.", "committedDate": "2020-06-16T19:59:06Z", "type": "commit"}, {"oid": "b62a4f465b87423265b4f07cf710f45af0dbac26", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b62a4f465b87423265b4f07cf710f45af0dbac26", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods.", "committedDate": "2020-06-16T20:08:13Z", "type": "commit"}, {"oid": "d95382d64d9c62cf02e0b368596109e2b9a1af31", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d95382d64d9c62cf02e0b368596109e2b9a1af31", "message": "refactor(sonar): Reduced cognitive complexity by moving filtering to Stream operations.", "committedDate": "2020-06-18T14:46:10Z", "type": "commit"}, {"oid": "ee3898cae6d791a024ae2cb5b41b5835be4be125", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/ee3898cae6d791a024ae2cb5b41b5835be4be125", "message": "refactor(sonar): Reduced cognitive complexity by exiting method early.", "committedDate": "2020-06-18T14:57:00Z", "type": "commit"}, {"oid": "4e384c1e3e986961e388aeff4eadb614c3b5aa59", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/4e384c1e3e986961e388aeff4eadb614c3b5aa59", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods.", "committedDate": "2020-06-18T15:59:41Z", "type": "commit"}, {"oid": "2ea4a5cabd2603eb3ba14fa233ab1273c39eb742", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/2ea4a5cabd2603eb3ba14fa233ab1273c39eb742", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods.", "committedDate": "2020-06-18T20:02:45Z", "type": "commit"}, {"oid": "d28f994a54270936235a813ea1d5e81669927892", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d28f994a54270936235a813ea1d5e81669927892", "message": "refactor(sonar): Reduced cognitive complexity by simplifying if statements.", "committedDate": "2020-06-18T21:39:37Z", "type": "commit"}, {"oid": "75279768a388cb2aa965622049e1fb131bfc7ec2", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/75279768a388cb2aa965622049e1fb131bfc7ec2", "message": "refactor(sonar): Reduced cognitive complexity by removing unnecessary if checks.", "committedDate": "2020-06-18T21:57:11Z", "type": "commit"}, {"oid": "c74d466c5fb97251965c3e4851d361a6698aec01", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/c74d466c5fb97251965c3e4851d361a6698aec01", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods.", "committedDate": "2020-06-18T22:04:02Z", "type": "commit"}, {"oid": "8350680d1edc8efb86f9fd290f481fdbdfced85f", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/8350680d1edc8efb86f9fd290f481fdbdfced85f", "message": "fix(product-boot): Fixing bug introduced by sonar refactor.", "committedDate": "2020-06-19T15:01:14Z", "type": "commit"}, {"oid": "c699a68233ce114be7be659e18897f33d3942e35", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/c699a68233ce114be7be659e18897f33d3942e35", "message": "Merge branch 'master' into cognitive-complexity\n\n# Conflicts:\n#\tsrc/main/java/com/synopsys/integration/detect/lifecycle/run/RunManager.java\n#\tsrc/main/java/com/synopsys/integration/detect/tool/signaturescanner/BlackDuckSignatureScanner.java", "committedDate": "2020-06-19T15:10:33Z", "type": "commit"}, {"oid": "49dc94ceb364912c83d0de18be0cbffdce756b98", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/49dc94ceb364912c83d0de18be0cbffdce756b98", "message": "fix(sonar): Fixing compilation errors introduced by sonar refactor.", "committedDate": "2020-06-19T16:07:03Z", "type": "commit"}, {"oid": "88fc62a3916a13945fe98d48e3d450472e3baa66", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/88fc62a3916a13945fe98d48e3d450472e3baa66", "message": "refactor(sonar): Reduced cognitive complexity by moving logic chunks into methods and utilizing Streams.", "committedDate": "2020-06-19T18:42:39Z", "type": "commit"}, {"oid": "086d57688ca5e21bc396789bf577e18e222153eb", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/086d57688ca5e21bc396789bf577e18e222153eb", "message": "refactor(sonar): Moved event publishing.", "committedDate": "2020-06-19T18:51:48Z", "type": "commit"}, {"oid": "5cff6fa85e9cea08f3ed11301e5072ca63816b9a", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/5cff6fa85e9cea08f3ed11301e5072ca63816b9a", "message": "refactor(sonar): Simplified BlackDuckSignatureScanner::reportErrors.", "committedDate": "2020-06-19T18:59:51Z", "type": "commit"}, {"oid": "b2383426e1987c2a897fc91f57c01d95142b0371", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/b2383426e1987c2a897fc91f57c01d95142b0371", "message": "refactor(sonar): Simplified Stream in NpmCliParser.", "committedDate": "2020-06-19T19:09:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM0MTIzOA==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/196#discussion_r444341238", "bodyText": "did these changes for runBlackDuckProduct reduce the complexity enough?", "author": "crowleySynopsys", "createdAt": "2020-06-23T16:08:48Z", "path": "src/main/java/com/synopsys/integration/detect/lifecycle/run/RunManager.java", "diffHunk": "@@ -401,17 +414,17 @@ private void runBlackDuckProduct(final ProductRunData productRunData, final Dete\n         logger.info(ReportConstants.RUN_SEPARATOR);\n         if (null != blackDuckServicesFactory) {\n             logger.info(\"Will perform Black Duck post actions.\");\n-            final BlackDuckPostOptions blackDuckPostOptions = detectConfigurationFactory.createBlackDuckPostOptions();\n-            final BlackDuckPostActions blackDuckPostActions = new BlackDuckPostActions(blackDuckServicesFactory, eventSystem);\n+            BlackDuckPostOptions blackDuckPostOptions = detectConfigurationFactory.createBlackDuckPostOptions();\n+            BlackDuckPostActions blackDuckPostActions = new BlackDuckPostActions(blackDuckServicesFactory, eventSystem);\n             blackDuckPostActions.perform(blackDuckPostOptions, codeLocationWaitController, projectVersionWrapper, detectConfigurationFactory.findTimeoutInSeconds());\n \n-            if ((bdioResult.getUploadTargets().size() > 0 || detectToolFilter.shouldInclude(DetectTool.SIGNATURE_SCAN))) {\n-                final Optional<String> componentsLink = Optional.ofNullable(projectVersionWrapper)\n-                                                            .map(ProjectVersionWrapper::getProjectVersionView)\n-                                                            .flatMap(projectVersionView -> projectVersionView.getFirstLink(ProjectVersionView.COMPONENTS_LINK));\n+            if ((!bdioResult.getUploadTargets().isEmpty() || detectToolFilter.shouldInclude(DetectTool.SIGNATURE_SCAN))) {\n+                Optional<String> componentsLink = Optional.ofNullable(projectVersionWrapper)\n+                                                      .map(ProjectVersionWrapper::getProjectVersionView)\n+                                                      .flatMap(projectVersionView -> projectVersionView.getFirstLink(ProjectVersionView.COMPONENTS_LINK));\n \n                 if (componentsLink.isPresent()) {\n-                    final DetectResult detectResult = new BlackDuckBomDetectResult(componentsLink.get());\n+                    DetectResult detectResult = new BlackDuckBomDetectResult(componentsLink.get());\n                     eventSystem.publishEvent(Event.ResultProduced, detectResult);\n                 }\n             }", "originalCommit": "b2383426e1987c2a897fc91f57c01d95142b0371", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc1ODkyMw==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/196#discussion_r447758923", "bodyText": "Not the final removals. I did slightly restructure one method. There were multiple cognitive complexity issues in this file. I am only addressing one of them here. Not quite sure how I want to tackle this file going forward.", "author": "JakeMathews", "createdAt": "2020-06-30T15:08:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM0MTIzOA=="}], "type": "inlineReview", "revised_code": null}]}