{"pr_number": 251, "pr_title": "feat(property): Consolidated DETECT_REPORT_TIMEOUT and BLACKDUCK_TIME\u2026", "pr_createdAt": "2020-11-19T21:21:22Z", "pr_url": "https://github.com/blackducksoftware/synopsys-detect/pull/251", "timeline": [{"oid": "eaafd0ee9a9025b6e5f3f4d474287eb891a4f7f0", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/eaafd0ee9a9025b6e5f3f4d474287eb891a4f7f0", "message": "feat(property): Consolidated DETECT_REPORT_TIMEOUT and BLACKDUCK_TIMEOUT into DETECT_TIMEOUT (IDETECT-2323).", "committedDate": "2020-11-19T19:22:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg3MzEyNg==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/251#discussion_r532873126", "bodyText": "Shouldn't we add\nelse if(detectConfiguration.wasPropertyProvided(DetectProperties.DETECT_REPORT_TIMEOUT) {\n    return getValue(DetectProperties.DETECT_REPORT_TIMEOUT);\n} else {\n    return getValue(DetectProperties.DETECT_TIMEOUT);\n}\n\nWithout the else if the user can set the DETECT_REPORT_TIMEOUT and it is never used.  Being that it is deprecated shouldn't it take precedence over the new property.", "author": "psantos1113", "createdAt": "2020-11-30T20:09:41Z", "path": "src/main/java/com/synopsys/integration/detect/configuration/DetectConfigurationFactory.java", "diffHunk": "@@ -111,7 +111,7 @@ public Long findTimeoutInSeconds() {\n             Long timeout = getValue(DetectProperties.DETECT_API_TIMEOUT);\n             return timeout / 1000;\n         } else {\n-            return getValue(DetectProperties.DETECT_REPORT_TIMEOUT);", "originalCommit": "eaafd0ee9a9025b6e5f3f4d474287eb891a4f7f0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d8e44ed11cbca1cd6279d0030e95833dfb422d08", "chunk": "diff --git a/src/main/java/com/synopsys/integration/detect/configuration/DetectConfigurationFactory.java b/src/main/java/com/synopsys/integration/detect/configuration/DetectConfigurationFactory.java\nindex 78b5efe30..757ac0ba4 100644\n--- a/src/main/java/com/synopsys/integration/detect/configuration/DetectConfigurationFactory.java\n+++ b/src/main/java/com/synopsys/integration/detect/configuration/DetectConfigurationFactory.java\n\n@@ -107,12 +107,19 @@ public class DetectConfigurationFactory {\n \n     //#region Prefer These Over Any Property\n     public Long findTimeoutInSeconds() {\n+        long timeout = getValue(DetectProperties.DETECT_TIMEOUT);\n+        if (detectConfiguration.wasPropertyProvided(DetectProperties.DETECT_TIMEOUT.getProperty())) {\n+            return timeout;\n+        }\n+\n+        // If no timeout was passed, check deprecated properties.\n         if (detectConfiguration.wasPropertyProvided(DetectProperties.DETECT_API_TIMEOUT.getProperty())) {\n-            Long timeout = getValue(DetectProperties.DETECT_API_TIMEOUT);\n-            return timeout / 1000;\n-        } else {\n-            return getValue(DetectProperties.DETECT_TIMEOUT);\n+            // DETECT_API_TIMEOUT is read in milliseconds.\n+            timeout = getValue(DetectProperties.DETECT_API_TIMEOUT) / 1000;\n+        } else if (detectConfiguration.wasPropertyProvided(DetectProperties.DETECT_REPORT_TIMEOUT.getProperty())) {\n+            timeout = getValue(DetectProperties.DETECT_REPORT_TIMEOUT);\n         }\n+        return timeout;\n     }\n \n     public int findParallelProcessors() {\n"}}, {"oid": "d8e44ed11cbca1cd6279d0030e95833dfb422d08", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/d8e44ed11cbca1cd6279d0030e95833dfb422d08", "message": "refactor: Return right away if non-deprecated timeout property is set.", "committedDate": "2020-11-30T20:52:51Z", "type": "commit"}]}