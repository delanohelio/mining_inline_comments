{"pr_number": 7113, "pr_title": "[KEYCLOAK-11679] - Creating keys right after master realm creation", "pr_createdAt": "2020-05-27T12:29:40Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7113", "timeline": [{"oid": "b21bb260d88bc295c644d9629b8098e1e84eaabb", "url": "https://github.com/keycloak/keycloak/commit/b21bb260d88bc295c644d9629b8098e1e84eaabb", "message": "[KEYCLOAK-11679] - Creating keys right after master realm creation", "committedDate": "2020-05-27T12:39:44Z", "type": "forcePushed"}, {"oid": "7c4fad2785a7dc0c137e7cd590e628f49ecc08c9", "url": "https://github.com/keycloak/keycloak/commit/7c4fad2785a7dc0c137e7cd590e628f49ecc08c9", "message": "[KEYCLOAK-11679] - Creating keys right after master realm creation", "committedDate": "2020-05-27T13:18:22Z", "type": "commit"}, {"oid": "7c4fad2785a7dc0c137e7cd590e628f49ecc08c9", "url": "https://github.com/keycloak/keycloak/commit/7c4fad2785a7dc0c137e7cd590e628f49ecc08c9", "message": "[KEYCLOAK-11679] - Creating keys right after master realm creation", "committedDate": "2020-05-27T13:18:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA4MjA3Nw==", "url": "https://github.com/keycloak/keycloak/pull/7113#discussion_r431082077", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            DefaultKeyProviders.createProviders(session.getContext().getRealm());\n          \n          \n            \n                            // TODO Remove once we have figured out the issue caused by not having keys pre-created\n          \n          \n            \n                            DefaultKeyProviders.createProviders(session.getContext().getRealm());", "author": "stianst", "createdAt": "2020-05-27T12:34:57Z", "path": "quarkus/runtime/src/main/java/org/keycloak/connections/jpa/QuarkusJpaConnectionProviderFactory.java", "diffHunk": "@@ -380,6 +381,7 @@ protected ExportImportManager createMasterRealm(ExportImportManager exportImport\n \n             if (createMasterRealm) {\n                 applianceBootstrap.createMasterRealm();\n+                DefaultKeyProviders.createProviders(session.getContext().getRealm());", "originalCommit": "8c115128aa13b5085729b0878adcb82a8a05cdfc", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b21bb260d88bc295c644d9629b8098e1e84eaabb", "chunk": "diff --git a/quarkus/runtime/src/main/java/org/keycloak/connections/jpa/QuarkusJpaConnectionProviderFactory.java b/quarkus/runtime/src/main/java/org/keycloak/connections/jpa/QuarkusJpaConnectionProviderFactory.java\nindex 2fe8e4010a..6e441d18ee 100644\n--- a/quarkus/runtime/src/main/java/org/keycloak/connections/jpa/QuarkusJpaConnectionProviderFactory.java\n+++ b/quarkus/runtime/src/main/java/org/keycloak/connections/jpa/QuarkusJpaConnectionProviderFactory.java\n\n@@ -381,6 +381,7 @@ public class QuarkusJpaConnectionProviderFactory implements JpaConnectionProvide\n \n             if (createMasterRealm) {\n                 applianceBootstrap.createMasterRealm();\n+                //TODO: Remove this to reduce startup time. See https://issues.redhat.com/browse/KEYCLOAK-14308.\n                 DefaultKeyProviders.createProviders(session.getContext().getRealm());\n             }\n \n"}}]}