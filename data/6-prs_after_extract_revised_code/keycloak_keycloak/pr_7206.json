{"pr_number": 7206, "pr_title": "[KEYCLOAK-14344] Cannot revoke offline access for an app if the app d\u2026", "pr_createdAt": "2020-06-24T21:44:21Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7206", "timeline": [{"oid": "cb5e8acd745cefb6f4fc350893299adf2036f978", "url": "https://github.com/keycloak/keycloak/commit/cb5e8acd745cefb6f4fc350893299adf2036f978", "message": "[KEYCLOAK-14344] Cannot revoke offline access for an app if the app doesn't require consent", "committedDate": "2020-06-24T22:40:44Z", "type": "forcePushed"}, {"oid": "84f6808013ec0ca6a9659117629bf4e9c9f1ffd8", "url": "https://github.com/keycloak/keycloak/commit/84f6808013ec0ca6a9659117629bf4e9c9f1ffd8", "message": "[KEYCLOAK-14344] Cannot revoke offline access for an app if the app doesn't require consent", "committedDate": "2020-06-25T19:10:30Z", "type": "forcePushed"}, {"oid": "b96304fe84be0f1dd1f3f87f39b65bdf93509fb3", "url": "https://github.com/keycloak/keycloak/commit/b96304fe84be0f1dd1f3f87f39b65bdf93509fb3", "message": "[KEYCLOAK-14344] Cannot revoke offline access for an app if the app doesn't require consent", "committedDate": "2020-06-25T19:38:30Z", "type": "forcePushed"}, {"oid": "b29a877140b755ac61c43f0fb588c2b4e51b9d46", "url": "https://github.com/keycloak/keycloak/commit/b29a877140b755ac61c43f0fb588c2b4e51b9d46", "message": "[KEYCLOAK-14344] Cannot revoke offline access for an app if the app doesn't require consent", "committedDate": "2020-06-25T19:56:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAwMDY0NQ==", "url": "https://github.com/keycloak/keycloak/pull/7206#discussion_r446000645", "bodyText": "Please don't use hardcoded localhost. If we would need to run the tests e.g. with a different host (and we do need that now in some cases to properly test cookies) or without SSL, this won't work.\nSomething like:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertClientRep(apps.get(\"account-console\"), \"Account Console\", false, true, \"https://localhost:8543/auth/realms/test/account/\", false);\n          \n          \n            \n                    assertClientRep(apps.get(\"account-console\"), \"Account Console\", false, true, getAuthServerRoot() + \"/realms/test/account/\", false);\n          \n      \n    \n    \n  \n\nThis concerns other lines as well.", "author": "vmuzikar", "createdAt": "2020-06-26T06:53:36Z", "path": "testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/ApplicationsTest.java", "diffHunk": "@@ -88,7 +88,7 @@ public void applicationListTest() throws Exception {\n         assertFalse(applications.isEmpty());\n         Map<String, ApplicationsPage.ClientRepresentation> apps = applications.stream().collect(Collectors.toMap(x -> x.getClientId(), x -> x));\n         assertThat(apps.keySet(), containsInAnyOrder(\"always-display-client\", \"account-console\"));\n-        assertClientRep(apps.get(\"account-console\"), \"Account Console\", false, true, \"/realms/test/account/\", false);\n+        assertClientRep(apps.get(\"account-console\"), \"Account Console\", false, true, \"https://localhost:8543/auth/realms/test/account/\", false);", "originalCommit": "b29a877140b755ac61c43f0fb588c2b4e51b9d46", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e0159050c9e4b1e67b113624f181107177b5334b", "chunk": "diff --git a/testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/ApplicationsTest.java b/testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/ApplicationsTest.java\nindex 55015a4e92..de835e8faf 100644\n--- a/testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/ApplicationsTest.java\n+++ b/testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/ApplicationsTest.java\n\n@@ -88,8 +88,8 @@ public class ApplicationsTest extends BaseAccountPageTest {\n         assertFalse(applications.isEmpty());\n         Map<String, ApplicationsPage.ClientRepresentation> apps = applications.stream().collect(Collectors.toMap(x -> x.getClientId(), x -> x));\n         assertThat(apps.keySet(), containsInAnyOrder(\"always-display-client\", \"account-console\"));\n-        assertClientRep(apps.get(\"account-console\"), \"Account Console\", false, true, \"https://localhost:8543/auth/realms/test/account/\", false);\n-        assertClientRep(apps.get(\"always-display-client\"), \"Always Display Client\", false, false, \"https://localhost:8543/auth/realms/master/app/always-display-client\", false);\n+        assertClientRep(apps.get(\"account-console\"), \"Account Console\", false, true, getAuthServerRoot() + \"/realms/test/account/\", false);\n+        assertClientRep(apps.get(\"always-display-client\"), \"Always Display Client\", false, false, getAuthServerRoot() + \"/realms/master/app/always-display-client\", false);\n     }\n \n     @Test\n"}}, {"oid": "e0159050c9e4b1e67b113624f181107177b5334b", "url": "https://github.com/keycloak/keycloak/commit/e0159050c9e4b1e67b113624f181107177b5334b", "message": "[KEYCLOAK-14344] Cannot revoke offline access for an app if the app doesn't require consent", "committedDate": "2020-06-26T14:51:48Z", "type": "forcePushed"}, {"oid": "f90d4f62a01e2022cf96e6f3da13995cf5513d7f", "url": "https://github.com/keycloak/keycloak/commit/f90d4f62a01e2022cf96e6f3da13995cf5513d7f", "message": "[KEYCLOAK-14344] Cannot revoke offline access for an app if the app doesn't require consent", "committedDate": "2020-06-26T17:45:33Z", "type": "commit"}, {"oid": "f90d4f62a01e2022cf96e6f3da13995cf5513d7f", "url": "https://github.com/keycloak/keycloak/commit/f90d4f62a01e2022cf96e6f3da13995cf5513d7f", "message": "[KEYCLOAK-14344] Cannot revoke offline access for an app if the app doesn't require consent", "committedDate": "2020-06-26T17:45:33Z", "type": "forcePushed"}]}