{"pr_number": 7676, "pr_title": "KEYCLOAK-16606 add default value to mandatory LDAP attributes", "pr_createdAt": "2020-12-12T22:24:55Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7676", "timeline": [{"oid": "acd6475a265c23f8dc15f22d758da1acf9984710", "url": "https://github.com/keycloak/keycloak/commit/acd6475a265c23f8dc15f22d758da1acf9984710", "message": "KEYCLOAK-16606 add default value to mandatory LDAP attributes", "committedDate": "2021-01-05T16:10:10Z", "type": "forcePushed"}, {"oid": "500c0f2c55db1b6a5d471279ca44c089f1abc024", "url": "https://github.com/keycloak/keycloak/commit/500c0f2c55db1b6a5d471279ca44c089f1abc024", "message": "KEYCLOAK-16606 add default value to mandatory LDAP attributes", "committedDate": "2021-01-05T16:44:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTk0NjM5Ng==", "url": "https://github.com/keycloak/keycloak/pull/7676#discussion_r555946396", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return attributeDefaultValue == null ? LDAPConstants.EMPTY_ATTRIBUTE_VALUE : attributeDefaultValue;\n          \n          \n            \n                    return (attributeDefaultValue == null || attributeDefaultValue.trim().isEmpty()) ? LDAPConstants.EMPTY_ATTRIBUTE_VALUE : attributeDefaultValue;", "author": "hmlnarik", "createdAt": "2021-01-12T17:25:49Z", "path": "federation/ldap/src/main/java/org/keycloak/storage/ldap/mappers/UserAttributeLDAPStorageMapper.java", "diffHunk": "@@ -425,6 +427,11 @@ public void beforeLDAPQuery(LDAPQuery query) {\n         }\n     }\n \n+    private String getAttributeDefaultValue() {\n+        String attributeDefaultValue = mapperModel.getConfig().getFirst(ATTRIBUTE_DEFAULT_VALUE);\n+        return attributeDefaultValue == null ? LDAPConstants.EMPTY_ATTRIBUTE_VALUE : attributeDefaultValue;", "originalCommit": "500c0f2c55db1b6a5d471279ca44c089f1abc024", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "310b95db042d77b213f262ffd5b9f5ecd61216da", "chunk": "diff --git a/federation/ldap/src/main/java/org/keycloak/storage/ldap/mappers/UserAttributeLDAPStorageMapper.java b/federation/ldap/src/main/java/org/keycloak/storage/ldap/mappers/UserAttributeLDAPStorageMapper.java\nindex 909ac26034..59f485db16 100644\n--- a/federation/ldap/src/main/java/org/keycloak/storage/ldap/mappers/UserAttributeLDAPStorageMapper.java\n+++ b/federation/ldap/src/main/java/org/keycloak/storage/ldap/mappers/UserAttributeLDAPStorageMapper.java\n\n@@ -429,7 +429,7 @@ public class UserAttributeLDAPStorageMapper extends AbstractLDAPStorageMapper {\n \n     private String getAttributeDefaultValue() {\n         String attributeDefaultValue = mapperModel.getConfig().getFirst(ATTRIBUTE_DEFAULT_VALUE);\n-        return attributeDefaultValue == null ? LDAPConstants.EMPTY_ATTRIBUTE_VALUE : attributeDefaultValue;\n+        return (attributeDefaultValue == null || attributeDefaultValue.trim().isEmpty()) ? LDAPConstants.EMPTY_ATTRIBUTE_VALUE : attributeDefaultValue;\n     }\n \n     private String getUserModelAttribute() {\n"}}, {"oid": "310b95db042d77b213f262ffd5b9f5ecd61216da", "url": "https://github.com/keycloak/keycloak/commit/310b95db042d77b213f262ffd5b9f5ecd61216da", "message": "KEYCLOAK-16606 add default value to mandatory LDAP attributes", "committedDate": "2021-01-15T14:55:53Z", "type": "commit"}, {"oid": "310b95db042d77b213f262ffd5b9f5ecd61216da", "url": "https://github.com/keycloak/keycloak/commit/310b95db042d77b213f262ffd5b9f5ecd61216da", "message": "KEYCLOAK-16606 add default value to mandatory LDAP attributes", "committedDate": "2021-01-15T14:55:53Z", "type": "forcePushed"}]}