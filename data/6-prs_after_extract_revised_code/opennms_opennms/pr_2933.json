{"pr_number": 2933, "pr_title": "NMS-12513 Open Redirect security issue", "pr_createdAt": "2020-03-23T19:56:20Z", "pr_url": "https://github.com/OpenNMS/opennms/pull/2933", "timeline": [{"oid": "3a14078defb606a180f1efbfe8209c14ff148278", "url": "https://github.com/OpenNMS/opennms/commit/3a14078defb606a180f1efbfe8209c14ff148278", "message": "NMS-12513: Security issue disclosures, 31 Jan 2020: remove open redirect", "committedDate": "2020-03-23T11:16:15Z", "type": "commit"}, {"oid": "534212f68dcb1743b3fd91d669ff040823a9f2eb", "url": "https://github.com/OpenNMS/opennms/commit/534212f68dcb1743b3fd91d669ff040823a9f2eb", "message": "NMS-12513: Security issue disclosures, 31 Jan 2020: restrict open redirect", "committedDate": "2020-03-23T19:51:08Z", "type": "commit"}, {"oid": "aa1aca19f021a982ece5e4ac18e4dd81ed35b49b", "url": "https://github.com/OpenNMS/opennms/commit/aa1aca19f021a982ece5e4ac18e4dd81ed35b49b", "message": "NMS-12513: Security issue disclosures, 31 Jan 2020: restrict open redirect: add copyright", "committedDate": "2020-03-23T20:01:37Z", "type": "commit"}, {"oid": "72160725d17a88ab3415e16dab2e42f2230cbed3", "url": "https://github.com/OpenNMS/opennms/commit/72160725d17a88ab3415e16dab2e42f2230cbed3", "message": "NMS-12513: Security issue disclosures, 31 Jan 2020: restrict open redirect: fix test", "committedDate": "2020-03-24T01:15:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg1NDI0MQ==", "url": "https://github.com/OpenNMS/opennms/pull/2933#discussion_r396854241", "bodyText": "No allowed redirects? Is this intentional?", "author": "j-white", "createdAt": "2020-03-24T01:30:17Z", "path": "opennms-webapp/src/main/java/org/opennms/web/controller/alarm/AcknowledgeAlarmByFilterController.java", "diffHunk": "@@ -61,7 +62,10 @@\n     private AlarmRepository m_webAlarmRepository;\n     \n     private String m_redirectView;\n-    \n+\n+    private RedirectRestricter redirectRestricter = RedirectRestricter.builder()", "originalCommit": "72160725d17a88ab3415e16dab2e42f2230cbed3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg1NTYxOA==", "url": "https://github.com/OpenNMS/opennms/pull/2933#discussion_r396855618", "bodyText": "yes, I didn't find any link with a redirect pointing to this controller (although I might have missed one). The alternative would be to remove the redirect parameter completely from this controller (would result in the same thing but viewer code). I wonder why we have the redirect parameter if we don't use it:\nEither this is just a copy and paste leftover or\nI didn't find the link...", "author": "patrick-schweizer", "createdAt": "2020-03-24T01:35:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg1NDI0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI4MDgwMA==", "url": "https://github.com/OpenNMS/opennms/pull/2933#discussion_r397280800", "bodyText": "TODO: Patrick add as comment in code", "author": "patrick-schweizer", "createdAt": "2020-03-24T16:16:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg1NDI0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzM0MDk1MQ==", "url": "https://github.com/OpenNMS/opennms/pull/2933#discussion_r397340951", "bodyText": "done.", "author": "patrick-schweizer", "createdAt": "2020-03-24T17:38:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg1NDI0MQ=="}], "type": "inlineReview", "revised_code": {"commit": "d653c800fd31c7fa8870d59d4c91e43f4f70000e", "chunk": "diff --git a/opennms-webapp/src/main/java/org/opennms/web/controller/alarm/AcknowledgeAlarmByFilterController.java b/opennms-webapp/src/main/java/org/opennms/web/controller/alarm/AcknowledgeAlarmByFilterController.java\nindex 45c6770d17a..6d2c8df38ae 100644\n--- a/opennms-webapp/src/main/java/org/opennms/web/controller/alarm/AcknowledgeAlarmByFilterController.java\n+++ b/opennms-webapp/src/main/java/org/opennms/web/controller/alarm/AcknowledgeAlarmByFilterController.java\n\n@@ -63,6 +63,7 @@ public class AcknowledgeAlarmByFilterController extends AbstractController imple\n     \n     private String m_redirectView;\n \n+    // it seems there is no link with a redirect pointing to this controller, therefor we use an empty whitelist.\n     private RedirectRestricter redirectRestricter = RedirectRestricter.builder()\n             .build();\n \n"}}, {"oid": "d653c800fd31c7fa8870d59d4c91e43f4f70000e", "url": "https://github.com/OpenNMS/opennms/commit/d653c800fd31c7fa8870d59d4c91e43f4f70000e", "message": "NMS-12513: Security issue disclosures, 31 Jan 2020: restrict open redirect: add comment", "committedDate": "2020-03-24T17:38:03Z", "type": "commit"}]}