{"pr_number": 12452, "pr_title": "Remove unused roles", "pr_createdAt": "2020-03-05T10:40:39Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12452", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2Mjk1MQ==", "url": "https://github.com/vespa-engine/vespa/pull/12452#discussion_r388262951", "bodyText": "Will the potential exception be caught by the caller?", "author": "jonmv", "createdAt": "2020-03-05T12:29:51Z", "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/integration/user/Roles.java", "diffHunk": "@@ -57,10 +54,6 @@ public static Role toRole(TenantName tenant, String roleName) {\n     /** Returns the {@link Role} the given tenant and role names correspond to. */\n     public static Role toRole(TenantName tenant, ApplicationName application, String roleName) {\n         switch (roleName) {\n-            case \"applicationAdmin\": return Role.applicationAdmin(tenant, application);\n-            case \"applicationOperator\": return Role.applicationOperator(tenant, application);\n-            case \"applicationDeveloper\": return Role.applicationDeveloper(tenant, application);\n-            case \"applicationReader\": return Role.applicationReader(tenant, application);", "originalCommit": "333a830566b2b34d03681654cd44dd09b25b031f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2MzI1OQ==", "url": "https://github.com/vespa-engine/vespa/pull/12452#discussion_r388263259", "bodyText": "Yes, see internal PR.", "author": "mpolden", "createdAt": "2020-03-05T12:30:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2Mjk1MQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2MzMxOQ==", "url": "https://github.com/vespa-engine/vespa/pull/12452#discussion_r388263319", "bodyText": "On second thought, the integration test is a hostedOperator, so this isn't really needed.", "author": "jonmv", "createdAt": "2020-03-05T12:30:35Z", "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/Role.java", "diffHunk": "@@ -43,31 +43,16 @@ public static TenantRole athenzTenantAdmin(TenantName tenant) {\n         return new TenantRole(RoleDefinition.athenzTenantAdmin, tenant);\n     }\n \n-    /** Returns a {@link RoleDefinition#tenantPipeline} for the current system and given tenant and application. */\n-    public static ApplicationRole tenantPipeline(TenantName tenant, ApplicationName application) {\n-        return new ApplicationRole(RoleDefinition.tenantPipeline, tenant, application);\n+    /** Returns a {@link RoleDefinition#integrationTest} for the current system and given tenant and application. */\n+    public static ApplicationRole integrationTest(TenantName tenant, ApplicationName application) {\n+        return new ApplicationRole(RoleDefinition.integrationTest, tenant, application);", "originalCommit": "333a830566b2b34d03681654cd44dd09b25b031f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1e7e5d787497c067984a8effdceb06fcbb6d439a", "chunk": "diff --git a/controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/Role.java b/controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/Role.java\nindex e86be44aa0..c2203e3da4 100644\n--- a/controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/Role.java\n+++ b/controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/Role.java\n\n@@ -43,9 +43,9 @@ public abstract class Role {\n         return new TenantRole(RoleDefinition.athenzTenantAdmin, tenant);\n     }\n \n-    /** Returns a {@link RoleDefinition#integrationTest} for the current system and given tenant and application. */\n-    public static ApplicationRole integrationTest(TenantName tenant, ApplicationName application) {\n-        return new ApplicationRole(RoleDefinition.integrationTest, tenant, application);\n+    /** Returns a {@link RoleDefinition#tenantPipeline} for the current system and given tenant and application. */\n+    public static ApplicationRole tenantPipeline(TenantName tenant, ApplicationName application) {\n+        return new ApplicationRole(RoleDefinition.tenantPipeline, tenant, application);\n     }\n \n     /** Returns a {@link RoleDefinition#athenzUser} for the current system and given tenant and application. */\n"}}, {"oid": "1e7e5d787497c067984a8effdceb06fcbb6d439a", "url": "https://github.com/vespa-engine/vespa/commit/1e7e5d787497c067984a8effdceb06fcbb6d439a", "message": "Remove unused tenant and application roles", "committedDate": "2020-03-05T12:53:51Z", "type": "commit"}, {"oid": "55dd5a7e8db0cbb79802fdf8b059e8c75b6280f9", "url": "https://github.com/vespa-engine/vespa/commit/55dd5a7e8db0cbb79802fdf8b059e8c75b6280f9", "message": "Remove unused athenzUser role", "committedDate": "2020-03-05T12:53:51Z", "type": "commit"}, {"oid": "d06aa3e0bfa0eedde1b8b937d9ca4953add6159f", "url": "https://github.com/vespa-engine/vespa/commit/d06aa3e0bfa0eedde1b8b937d9ca4953add6159f", "message": "Remove unused tenantPipeline role", "committedDate": "2020-03-05T13:06:37Z", "type": "commit"}, {"oid": "1b09ddc9e19c21033b7409c786be56f3283aaa0e", "url": "https://github.com/vespa-engine/vespa/commit/1b09ddc9e19c21033b7409c786be56f3283aaa0e", "message": "Use enum for path prefixes", "committedDate": "2020-03-05T13:18:40Z", "type": "commit"}, {"oid": "1b09ddc9e19c21033b7409c786be56f3283aaa0e", "url": "https://github.com/vespa-engine/vespa/commit/1b09ddc9e19c21033b7409c786be56f3283aaa0e", "message": "Use enum for path prefixes", "committedDate": "2020-03-05T13:18:40Z", "type": "forcePushed"}]}