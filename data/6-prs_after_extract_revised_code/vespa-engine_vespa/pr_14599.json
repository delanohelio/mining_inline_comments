{"pr_number": 14599, "pr_title": "Add application and cluster to log message", "pr_createdAt": "2020-09-28T13:45:49Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14599", "timeline": [{"oid": "7836f5597854154e8630ce4dcddcdb8cbc4a491b", "url": "https://github.com/vespa-engine/vespa/commit/7836f5597854154e8630ce4dcddcdb8cbc4a491b", "message": "Add application and cluster to log message", "committedDate": "2020-09-28T13:43:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk1NzY2Mw==", "url": "https://github.com/vespa-engine/vespa/pull/14599#discussion_r495957663", "bodyText": "could we cut the stack trace?", "author": "hakonhall", "createdAt": "2020-09-28T13:54:44Z", "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/provisioning/NodePrioritizer.java", "diffHunk": "@@ -131,7 +131,8 @@ private void addNewDockerNodesOn(LockedNodeList candidates) {\n                 allocation = host.ipConfig().pool().findAllocation(allNodes, nodeRepository.nameResolver());\n                 if (allocation.isEmpty()) continue; // No free addresses in this pool\n             } catch (Exception e) {\n-                log.log(Level.WARNING, \"Failed allocating IP address on \" + host.hostname(), e);\n+                log.log(Level.WARNING, \"Failed allocating IP address on \" + host.hostname() + \" to \" +\n+                                       application + \", cluster \" + clusterSpec.id(), e);", "originalCommit": "7836f5597854154e8630ce4dcddcdb8cbc4a491b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA5Njg4Ng==", "url": "https://github.com/vespa-engine/vespa/pull/14599#discussion_r496096886", "bodyText": "Done.", "author": "mpolden", "createdAt": "2020-09-28T16:55:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk1NzY2Mw=="}], "type": "inlineReview", "revised_code": {"commit": "4d57dba7ab470d6459d028232ff3a376c1df0af4", "chunk": "diff --git a/node-repository/src/main/java/com/yahoo/vespa/hosted/provision/provisioning/NodePrioritizer.java b/node-repository/src/main/java/com/yahoo/vespa/hosted/provision/provisioning/NodePrioritizer.java\nindex 323e5bb49a..4056b14d4b 100644\n--- a/node-repository/src/main/java/com/yahoo/vespa/hosted/provision/provisioning/NodePrioritizer.java\n+++ b/node-repository/src/main/java/com/yahoo/vespa/hosted/provision/provisioning/NodePrioritizer.java\n\n@@ -132,7 +133,8 @@ public class NodePrioritizer {\n                 if (allocation.isEmpty()) continue; // No free addresses in this pool\n             } catch (Exception e) {\n                 log.log(Level.WARNING, \"Failed allocating IP address on \" + host.hostname() + \" to \" +\n-                                       application + \", cluster \" + clusterSpec.id(), e);\n+                                       application + \", cluster \" + clusterSpec.id() + \": \" +\n+                                       Exceptions.toMessageString(e));\n                 continue;\n             }\n \n"}}, {"oid": "4d57dba7ab470d6459d028232ff3a376c1df0af4", "url": "https://github.com/vespa-engine/vespa/commit/4d57dba7ab470d6459d028232ff3a376c1df0af4", "message": "Drop stack trace", "committedDate": "2020-09-28T16:53:18Z", "type": "commit"}]}