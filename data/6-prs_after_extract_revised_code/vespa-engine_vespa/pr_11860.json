{"pr_number": 11860, "pr_title": "Log curator state changes SUSPENDED, RECONNECTED and LOST", "pr_createdAt": "2020-01-20T13:35:45Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/11860", "timeline": [{"oid": "60b6253e5096eef77bad716b8f1f3864fdf46c67", "url": "https://github.com/vespa-engine/vespa/commit/60b6253e5096eef77bad716b8f1f3864fdf46c67", "message": "Log curator state changes SUSPENDED, RECONNECTED and LOST", "committedDate": "2020-01-20T13:35:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU1ODE4NA==", "url": "https://github.com/vespa-engine/vespa/pull/11860#discussion_r368558184", "bodyText": "Remove/edit this? Also, rename method to not include \"Fake\" since it is no longer fake?", "author": "hakonhall", "createdAt": "2020-01-20T13:53:18Z", "path": "zkfacade/src/main/java/com/yahoo/vespa/curator/Curator.java", "diffHunk": "@@ -201,7 +204,11 @@ public InterProcessLock createMutex(String lockPath) {\n     // To avoid getting warning in log, see ticket 6389740", "originalCommit": "60b6253e5096eef77bad716b8f1f3864fdf46c67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU2MDAyMw==", "url": "https://github.com/vespa-engine/vespa/pull/11860#discussion_r368560023", "bodyText": "Hehe, good pointds.", "author": "jonmv", "createdAt": "2020-01-20T13:56:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU1ODE4NA=="}], "type": "inlineReview", "revised_code": {"commit": "7de094e4d19a32a6d443336caa6c70e2a958c2c7", "chunk": "diff --git a/zkfacade/src/main/java/com/yahoo/vespa/curator/Curator.java b/zkfacade/src/main/java/com/yahoo/vespa/curator/Curator.java\nindex d1246699eb..7c5b1ae319 100644\n--- a/zkfacade/src/main/java/com/yahoo/vespa/curator/Curator.java\n+++ b/zkfacade/src/main/java/com/yahoo/vespa/curator/Curator.java\n\n@@ -201,8 +201,7 @@ public class Curator implements AutoCloseable {\n         return new InterProcessMutex(curatorFramework, lockPath);\n     }\n \n-    // To avoid getting warning in log, see ticket 6389740\n-    private void addFakeListener() {\n+    private void addLoggingListener() {\n         curatorFramework.getConnectionStateListenable().addListener((curatorFramework, connectionState) -> {\n             switch (connectionState) {\n                 case SUSPENDED: logger.info(\"ZK connection state change: SUSPENDED\"); break;\n"}}, {"oid": "7de094e4d19a32a6d443336caa6c70e2a958c2c7", "url": "https://github.com/vespa-engine/vespa/commit/7de094e4d19a32a6d443336caa6c70e2a958c2c7", "message": "Update Curator.java", "committedDate": "2020-01-20T13:57:48Z", "type": "commit"}]}