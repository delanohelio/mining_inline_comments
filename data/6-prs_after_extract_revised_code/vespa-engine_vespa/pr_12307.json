{"pr_number": 12307, "pr_title": "Use RoutingMethod when building endpoint", "pr_createdAt": "2020-02-21T14:45:38Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12307", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjYyMTIwMA==", "url": "https://github.com/vespa-engine/vespa/pull/12307#discussion_r382621200", "bodyText": "Done in #12306", "author": "tokle", "createdAt": "2020-02-21T14:48:33Z", "path": "config-provisioning/src/main/java/com/yahoo/config/provision/zone/RoutingMethod.java", "diffHunk": "@@ -14,6 +14,7 @@\n     /** Routing happens through a dedicated layer 4 load balancer */\n     exclusive,\n \n-    /** Routing happens through a shared layer 4 load balancer */\n-    shared_layer_4\n+    /** Routing happens through a shared routing layer which routes requests at layer 4 */\n+    sharedLayer4;", "originalCommit": "900b1f8ef53f285e9202ac2c711f96b6db8c9087", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "012b1dba9a4fbe90a8a9844f97205f6ccbd0650e", "chunk": "diff --git a/config-provisioning/src/main/java/com/yahoo/config/provision/zone/RoutingMethod.java b/config-provisioning/src/main/java/com/yahoo/config/provision/zone/RoutingMethod.java\nindex 01c44ad14d..02da2ab98e 100644\n--- a/config-provisioning/src/main/java/com/yahoo/config/provision/zone/RoutingMethod.java\n+++ b/config-provisioning/src/main/java/com/yahoo/config/provision/zone/RoutingMethod.java\n\n@@ -14,7 +14,12 @@ public enum RoutingMethod {\n     /** Routing happens through a dedicated layer 4 load balancer */\n     exclusive,\n \n-    /** Routing happens through a shared routing layer which routes requests at layer 4 */\n+    /** Routing happens through a shared layer 4 load balancer */\n     sharedLayer4;\n \n+    /** Returns whether this method routes requests directly to the Vespa container cluster */\n+    public boolean isDirect() {\n+        return this == exclusive || this == sharedLayer4;\n+    }\n+\n }\n"}}, {"oid": "012b1dba9a4fbe90a8a9844f97205f6ccbd0650e", "url": "https://github.com/vespa-engine/vespa/commit/012b1dba9a4fbe90a8a9844f97205f6ccbd0650e", "message": "Use RoutingMethod when building endpoint", "committedDate": "2020-02-21T14:49:54Z", "type": "commit"}, {"oid": "ff8a4de3c9d1fda6683ce3a44c67f08b08f10b64", "url": "https://github.com/vespa-engine/vespa/commit/ff8a4de3c9d1fda6683ce3a44c67f08b08f10b64", "message": "Move method", "committedDate": "2020-02-21T14:49:54Z", "type": "commit"}, {"oid": "1e6ca05a2d5caf86935f165554692da2d8bd26cc", "url": "https://github.com/vespa-engine/vespa/commit/1e6ca05a2d5caf86935f165554692da2d8bd26cc", "message": "Rename endpointcertificates -> certificate", "committedDate": "2020-02-21T14:49:54Z", "type": "commit"}, {"oid": "1e6ca05a2d5caf86935f165554692da2d8bd26cc", "url": "https://github.com/vespa-engine/vespa/commit/1e6ca05a2d5caf86935f165554692da2d8bd26cc", "message": "Rename endpointcertificates -> certificate", "committedDate": "2020-02-21T14:49:54Z", "type": "forcePushed"}]}