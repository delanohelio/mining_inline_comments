{"pr_number": 12515, "pr_title": "void creating strings when not needed.", "pr_createdAt": "2020-03-09T13:40:07Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12515", "timeline": [{"oid": "6dafbbe4a7321279fc8eb5bd86be62f72fff80a0", "url": "https://github.com/vespa-engine/vespa/commit/6dafbbe4a7321279fc8eb5bd86be62f72fff80a0", "message": "void creating strings when not needed.\nDo not depend on toString(), use toUtf8 instead.", "committedDate": "2020-03-09T13:33:11Z", "type": "commit"}, {"oid": "b5f9b4ed8e6827bd2cedfb1f53aaaba82fdbe667", "url": "https://github.com/vespa-engine/vespa/commit/b5f9b4ed8e6827bd2cedfb1f53aaaba82fdbe667", "message": "Update abi spec.", "committedDate": "2020-03-09T13:52:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY5NzU2Mg==", "url": "https://github.com/vespa-engine/vespa/pull/12515#discussion_r389697562", "bodyText": "Can utf8 ever be null here?", "author": "vekterli", "createdAt": "2020-03-09T13:58:19Z", "path": "component/src/main/java/com/yahoo/component/Version.java", "diffHunk": "@@ -270,10 +276,14 @@ public String toFullString() {\n      * The string representation of a Version specified here is a part of the API and will never change.\n      */\n     @Override\n-    public String toString() { return stringValue; }\n+    public String toString() { return toStringValue(); }\n+\n+    public Utf8Array toUtf8() {\n+        return utf8 != null ? utf8 : new Utf8String(toString());", "originalCommit": "b5f9b4ed8e6827bd2cedfb1f53aaaba82fdbe667", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTcwMzEzNQ==", "url": "https://github.com/vespa-engine/vespa/pull/12515#discussion_r389703135", "bodyText": "Good point, not anymore.", "author": "baldersheim", "createdAt": "2020-03-09T14:03:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY5NzU2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "2c709ff575591d89e8876da19715c0e7aedb5084", "chunk": "diff --git a/component/src/main/java/com/yahoo/component/Version.java b/component/src/main/java/com/yahoo/component/Version.java\nindex 8f159fc806..d611e1a627 100644\n--- a/component/src/main/java/com/yahoo/component/Version.java\n+++ b/component/src/main/java/com/yahoo/component/Version.java\n\n@@ -279,7 +279,7 @@ public final class Version implements Comparable<Version> {\n     public String toString() { return toStringValue(); }\n \n     public Utf8Array toUtf8() {\n-        return utf8 != null ? utf8 : new Utf8String(toString());\n+        return utf8;\n     }\n \n     @Override\n"}}, {"oid": "2c709ff575591d89e8876da19715c0e7aedb5084", "url": "https://github.com/vespa-engine/vespa/commit/2c709ff575591d89e8876da19715c0e7aedb5084", "message": "utf8 can never be null.", "committedDate": "2020-03-09T14:05:11Z", "type": "commit"}]}