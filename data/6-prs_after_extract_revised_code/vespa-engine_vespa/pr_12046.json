{"pr_number": 12046, "pr_title": "Remove support for using tester endpoint", "pr_createdAt": "2020-02-03T12:34:47Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12046", "timeline": [{"oid": "7f63f5fe24dcb1ec6602ac06cca87a9a597a8a99", "url": "https://github.com/vespa-engine/vespa/commit/7f63f5fe24dcb1ec6602ac06cca87a9a597a8a99", "message": "Remove support for using tester endpoint", "committedDate": "2020-02-03T12:34:10Z", "type": "commit"}, {"oid": "cfdf21370c2618f3fe09c9ff432a683857230507", "url": "https://github.com/vespa-engine/vespa/commit/cfdf21370c2618f3fe09c9ff432a683857230507", "message": "Merge branch 'master' into hmusum/remove-support-for-using-tester-endpoint", "committedDate": "2020-02-06T19:33:15Z", "type": "commit"}, {"oid": "300c1c23c0da6d29837d05d1211bea8999fc34bf", "url": "https://github.com/vespa-engine/vespa/commit/300c1c23c0da6d29837d05d1211bea8999fc34bf", "message": "Do not provision load balancer for tester instances", "committedDate": "2020-02-06T20:14:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM3NDQ4OQ==", "url": "https://github.com/vespa-engine/vespa/pull/12046#discussion_r376374489", "bodyText": "If the tester endpoints are indeed gone, the tester parameter  should be removed and the javadoc updated.", "author": "mpolden", "createdAt": "2020-02-07T12:52:13Z", "path": "controller-server/src/test/java/com/yahoo/vespa/hosted/controller/deployment/DeploymentContext.java", "diffHunk": "@@ -529,11 +519,6 @@ private Run currentRun(JobId job) {\n         return run;\n     }\n \n-    /** Sets a single endpoint in the routing layer for the tester instance in this */\n-    private DeploymentContext setTesterEndpoints(ZoneId zone) {\n-        return setEndpoints(zone, true);\n-    }\n-\n     /** Sets a single endpoint in the routing layer; this matches that required for the tester */\n     private DeploymentContext setEndpoints(ZoneId zone, boolean tester) {", "originalCommit": "300c1c23c0da6d29837d05d1211bea8999fc34bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM3NzE4MQ==", "url": "https://github.com/vespa-engine/vespa/pull/12046#discussion_r376377181", "bodyText": "Yup, fixed", "author": "hmusum", "createdAt": "2020-02-07T12:59:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM3NDQ4OQ=="}], "type": "inlineReview", "revised_code": {"commit": "904cc0c6fe3317130a1416996ac7278f3990af19", "chunk": "diff --git a/controller-server/src/test/java/com/yahoo/vespa/hosted/controller/deployment/DeploymentContext.java b/controller-server/src/test/java/com/yahoo/vespa/hosted/controller/deployment/DeploymentContext.java\nindex 82428ae57e..3e1f468691 100644\n--- a/controller-server/src/test/java/com/yahoo/vespa/hosted/controller/deployment/DeploymentContext.java\n+++ b/controller-server/src/test/java/com/yahoo/vespa/hosted/controller/deployment/DeploymentContext.java\n\n@@ -519,13 +514,10 @@ public class DeploymentContext {\n         return run;\n     }\n \n-    /** Sets a single endpoint in the routing layer; this matches that required for the tester */\n-    private DeploymentContext setEndpoints(ZoneId zone, boolean tester) {\n+    /** Sets a single endpoint in the routing layer */\n+    DeploymentContext setEndpoints(ZoneId zone) {\n         if (!supportsRoutingMethod(RoutingMethod.shared, zone)) return this;\n         var id = instanceId;\n-        if (tester) {\n-            id = testerId.id();\n-        }\n         routing.putEndpoints(new DeploymentId(id, zone),\n                              Collections.singletonList(new RoutingEndpoint(String.format(\"https://%s--%s--%s.%s.%s.vespa:43\",\n                                                                                          id.instance().value(),\n"}}, {"oid": "904cc0c6fe3317130a1416996ac7278f3990af19", "url": "https://github.com/vespa-engine/vespa/commit/904cc0c6fe3317130a1416996ac7278f3990af19", "message": "Simplify now that there are no tester endpoints", "committedDate": "2020-02-07T12:59:09Z", "type": "commit"}]}