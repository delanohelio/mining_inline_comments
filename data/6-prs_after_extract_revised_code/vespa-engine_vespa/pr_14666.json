{"pr_number": 14666, "pr_title": "Revert \"Revert \"Clock.systemUTC() instead of non-existent injected Clock\"\"", "pr_createdAt": "2020-10-01T16:08:21Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14666", "timeline": [{"oid": "8911b549bbe0d08fbdbcdf9d29cbba486e56b97a", "url": "https://github.com/vespa-engine/vespa/commit/8911b549bbe0d08fbdbcdf9d29cbba486e56b97a", "message": "Revert \"Revert \"Clock.systemUTC() instead of non-existent injected Clock\"\"", "committedDate": "2020-10-01T16:07:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM2MDczMQ==", "url": "https://github.com/vespa-engine/vespa/pull/14666#discussion_r498360731", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    this(Clock.systemU\n          \n          \n            \n                         TC(),\n          \n          \n            \n                    this(Clock.systemUTC(),", "author": "jonmv", "createdAt": "2020-10-01T16:08:38Z", "path": "vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java", "diffHunk": "@@ -115,15 +115,15 @@\n     private final Map<String, Map<Method, Handler>> handlers;\n \n     @Inject\n-    public DocumentV1ApiHandler(Clock clock,\n-                                Metric metric,\n+    public DocumentV1ApiHandler(Metric metric,\n                                 MetricReceiver metricReceiver,\n                                 VespaDocumentAccess documentAccess,\n                                 DocumentmanagerConfig documentManagerConfig,\n                                 ClusterListConfig clusterListConfig,\n                                 AllClustersBucketSpacesConfig bucketSpacesConfig,\n                                 DocumentOperationExecutorConfig executorConfig) {\n-        this(clock,\n+        this(Clock.systemU\n+             TC(),", "originalCommit": "8911b549bbe0d08fbdbcdf9d29cbba486e56b97a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1d5e913b53613d93f434cb3725cad60daa2228f0", "chunk": "diff --git a/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java b/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java\nindex cdb9a624f2..b9b7083f3c 100644\n--- a/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java\n+++ b/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java\n\n@@ -122,8 +122,7 @@ public class DocumentV1ApiHandler extends AbstractRequestHandler {\n                                 ClusterListConfig clusterListConfig,\n                                 AllClustersBucketSpacesConfig bucketSpacesConfig,\n                                 DocumentOperationExecutorConfig executorConfig) {\n-        this(Clock.systemU\n-             TC(),\n+        this(Clock.systemUTC(),\n              new DocumentOperationExecutorImpl(clusterListConfig, bucketSpacesConfig, executorConfig, documentAccess, clock),\n              new DocumentOperationParser(documentManagerConfig),\n              metric,\n"}}, {"oid": "1d5e913b53613d93f434cb3725cad60daa2228f0", "url": "https://github.com/vespa-engine/vespa/commit/1d5e913b53613d93f434cb3725cad60daa2228f0", "message": "Remove newline >_<", "committedDate": "2020-10-01T16:08:52Z", "type": "commit"}]}