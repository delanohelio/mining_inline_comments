{"pr_number": 15873, "pr_title": "Jonmv/remove storage policy", "pr_createdAt": "2020-12-23T11:57:03Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/15873", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkzMzY3Mg==", "url": "https://github.com/vespa-engine/vespa/pull/15873#discussion_r547933672", "bodyText": "Oops, not intended to be here, but this is just removal of dead code that shouldn't be there in the first place.", "author": "jonmv", "createdAt": "2020-12-23T12:24:50Z", "path": "vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java", "diffHunk": "@@ -377,10 +377,6 @@ private DocumentOperationParameters parametersFromRequest(HttpRequest request, S\n                                                           .map(parameters::withRoute)\n                                                           .orElse(parameters);\n                 break;\n-            case CONDITION:\n-                parameters = getProperty(request, ROUTE).map(parameters::withRoute)\n-                                                        .orElse(parameters);\n-                break;", "originalCommit": "d37f395ccb4db43ad6cb813412e7df5683363219", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7bf09c3200422d047100362c82de6e1fdf2b323c", "chunk": "diff --git a/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java b/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java\nindex 7ce3a7ede0..5a370209f1 100644\n--- a/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java\n+++ b/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java\n\n@@ -377,6 +377,10 @@ public class DocumentV1ApiHandler extends AbstractRequestHandler {\n                                                           .map(parameters::withRoute)\n                                                           .orElse(parameters);\n                 break;\n+            case CONDITION:\n+                parameters = getProperty(request, ROUTE).map(parameters::withRoute)\n+                                                        .orElse(parameters);\n+                break;\n             case FIELD_SET:\n                 parameters = getProperty(request, FIELD_SET).map(parameters::withFieldSet)\n                                                             .orElse(parameters);\n"}}, {"oid": "7bf09c3200422d047100362c82de6e1fdf2b323c", "url": "https://github.com/vespa-engine/vespa/commit/7bf09c3200422d047100362c82de6e1fdf2b323c", "message": "Revert \"Revert \"Merge StoragePolicy down into ContentPolicy, and always use this\"\"", "committedDate": "2020-12-30T10:59:56Z", "type": "commit"}, {"oid": "7efd5dfa1111e0aa94b97fbca06852de95258aa5", "url": "https://github.com/vespa-engine/vespa/commit/7efd5dfa1111e0aa94b97fbca06852de95258aa5", "message": "Replace use of [Storage... with [Content... and avoid overriding config id", "committedDate": "2020-12-30T10:59:56Z", "type": "commit"}, {"oid": "ae314e6d20ba0f4e77e00c4bf3542c39cb3bef46", "url": "https://github.com/vespa-engine/vespa/commit/ae314e6d20ba0f4e77e00c4bf3542c39cb3bef46", "message": "Use just content cluster name as route", "committedDate": "2020-12-30T10:59:56Z", "type": "commit"}, {"oid": "3ca9668a22041a80ffebc53924f5c5c244b484e8", "url": "https://github.com/vespa-engine/vespa/commit/3ca9668a22041a80ffebc53924f5c5c244b484e8", "message": "Merge storagepolicy into contentpolicy", "committedDate": "2020-12-30T10:59:56Z", "type": "commit"}, {"oid": "965d21f339ccca4fc042eab8c76d1d055fb0863b", "url": "https://github.com/vespa-engine/vespa/commit/965d21f339ccca4fc042eab8c76d1d055fb0863b", "message": "Non-functional", "committedDate": "2020-12-30T10:59:56Z", "type": "commit"}, {"oid": "965d21f339ccca4fc042eab8c76d1d055fb0863b", "url": "https://github.com/vespa-engine/vespa/commit/965d21f339ccca4fc042eab8c76d1d055fb0863b", "message": "Non-functional", "committedDate": "2020-12-30T10:59:56Z", "type": "forcePushed"}, {"oid": "6eede0d2c93cd086a980d2bed5c5cc5d1eca9712", "url": "https://github.com/vespa-engine/vespa/commit/6eede0d2c93cd086a980d2bed5c5cc5d1eca9712", "message": "More non-functional", "committedDate": "2020-12-30T11:26:43Z", "type": "commit"}, {"oid": "50a2a9012a1a01f1240759cfd724c3bdf71783cb", "url": "https://github.com/vespa-engine/vespa/commit/50a2a9012a1a01f1240759cfd724c3bdf71783cb", "message": "Specify when TODO", "committedDate": "2021-01-04T14:36:33Z", "type": "commit"}, {"oid": "b1e15a0e12bc6fb258b65cdd6e6fcfb925e8f3c1", "url": "https://github.com/vespa-engine/vespa/commit/b1e15a0e12bc6fb258b65cdd6e6fcfb925e8f3c1", "message": "Use clustername-direct routes for visitors", "committedDate": "2021-01-04T15:43:06Z", "type": "commit"}, {"oid": "3e32d199fca6e9fd347bbec75d7cf30f56b99253", "url": "https://github.com/vespa-engine/vespa/commit/3e32d199fca6e9fd347bbec75d7cf30f56b99253", "message": "Merge branch 'jonmv/remove-storage-policy' of github.com:vespa-engine/vespa into jonmv/remove-storage-policy", "committedDate": "2021-01-04T17:13:09Z", "type": "commit"}]}