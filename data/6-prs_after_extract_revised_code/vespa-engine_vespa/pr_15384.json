{"pr_number": 15384, "pr_title": "Non-functional-changes-only", "pr_createdAt": "2020-11-18T19:38:10Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/15384", "timeline": [{"oid": "b01ecd72d26a45ff4b498881446f5e62237c64be", "url": "https://github.com/vespa-engine/vespa/commit/b01ecd72d26a45ff4b498881446f5e62237c64be", "message": "Non-functional-changes-only", "committedDate": "2020-11-18T19:37:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc1OTk4Nw==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526759987", "bodyText": "I don't agree with this style change. The original style is more compact without impacting readability (imho).", "author": "bjorncs", "createdAt": "2020-11-19T10:40:22Z", "path": "container-core/src/main/java/com/yahoo/container/core/config/testutil/HandlersConfigurerTestWrapper.java", "diffHunk": "@@ -143,8 +144,12 @@ protected void configure() {\n     }\n \n     private static class SimpleContainerThreadpool implements ContainerThreadPool {\n+\n         private final Executor executor = Executors.newCachedThreadPool();\n-        @Override public Executor executor() { return executor; }", "originalCommit": "b01ecd72d26a45ff4b498881446f5e62237c64be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc3ODMyMw==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526778323", "bodyText": "I agree with you actually but nobody else seem to like it so I've given up :-)", "author": "bratseth", "createdAt": "2020-11-19T11:09:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc1OTk4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc3OTY5Mg==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526779692", "bodyText": "Why change it then? \ud83d\ude1b", "author": "bjorncs", "createdAt": "2020-11-19T11:11:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc1OTk4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc5NDYwNA==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526794604", "bodyText": "If I'm the only one who wants some style I'll go for consistency instead.", "author": "bratseth", "createdAt": "2020-11-19T11:28:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc1OTk4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc5NjE0NQ==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526796145", "bodyText": "FYI I have seen other Vespa devs using that style as well btw. Same applies to my indentation preference for parameter lists.", "author": "bjorncs", "createdAt": "2020-11-19T11:31:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc1OTk4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc5ODEyNw==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526798127", "bodyText": "Yes I think Valeri also like the wrong indentation style and you're both batshit crazy.\nLet me change the @OVERRIDES back now that I know I have an ally on that :-)", "author": "bratseth", "createdAt": "2020-11-19T11:34:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc1OTk4Nw=="}], "type": "inlineReview", "revised_code": {"commit": "43307ca111d901775cf24dace32d4b2b67245454", "chunk": "diff --git a/container-core/src/main/java/com/yahoo/container/core/config/testutil/HandlersConfigurerTestWrapper.java b/container-core/src/main/java/com/yahoo/container/core/config/testutil/HandlersConfigurerTestWrapper.java\nindex f36e0031ec..d98a865e1f 100644\n--- a/container-core/src/main/java/com/yahoo/container/core/config/testutil/HandlersConfigurerTestWrapper.java\n+++ b/container-core/src/main/java/com/yahoo/container/core/config/testutil/HandlersConfigurerTestWrapper.java\n\n@@ -147,8 +147,7 @@ public class HandlersConfigurerTestWrapper {\n \n         private final Executor executor = Executors.newCachedThreadPool();\n \n-        @Override\n-        public Executor executor() { return executor; }\n+        @Override public Executor executor() { return executor; }\n \n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc2MTI3Nw==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526761277", "bodyText": "See earlier comment on style.", "author": "bjorncs", "createdAt": "2020-11-19T10:42:16Z", "path": "container-core/src/main/java/com/yahoo/container/handler/threadpool/DefaultContainerThreadpool.java", "diffHunk": "@@ -49,9 +49,14 @@ public DefaultContainerThreadpool(ContainerThreadpoolConfig config, Metric metri\n                 config.name(), config.queueSize());\n     }\n \n-    @Override public Executor executor() { return threadpool; }\n-    @Override public void close() { closeInternal(); }\n-    @Override public void deconstruct() { closeInternal(); super.deconstruct(); }", "originalCommit": "b01ecd72d26a45ff4b498881446f5e62237c64be", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "43307ca111d901775cf24dace32d4b2b67245454", "chunk": "diff --git a/container-core/src/main/java/com/yahoo/container/handler/threadpool/DefaultContainerThreadpool.java b/container-core/src/main/java/com/yahoo/container/handler/threadpool/DefaultContainerThreadpool.java\nindex b346d42197..6bed4a6f44 100644\n--- a/container-core/src/main/java/com/yahoo/container/handler/threadpool/DefaultContainerThreadpool.java\n+++ b/container-core/src/main/java/com/yahoo/container/handler/threadpool/DefaultContainerThreadpool.java\n\n@@ -49,14 +49,11 @@ public class DefaultContainerThreadpool extends AbstractComponent implements Aut\n                 config.name(), config.queueSize());\n     }\n \n-    @Override\n-    public Executor executor() { return threadpool; }\n+    @Override public Executor executor() { return threadpool; }\n \n-    @Override\n-    public void close() { closeInternal(); }\n+    @Override public void close() { closeInternal(); }\n \n-    @Override\n-    public void deconstruct() { closeInternal(); super.deconstruct(); }\n+    @Override public void deconstruct() { closeInternal(); super.deconstruct(); }\n \n     /**\n      * Shutdown the thread pool, give a grace period of 1 second before forcibly\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc2MzIzNQ==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526763235", "bodyText": "I don't like this style change either. The new style requires parameters to be reindented if ExecutorServiceWrapper is renamed or access modifier is introduced. It's annoying when a developer relies on automatic refactoring features in an IDE. It's also prone to create lines exceeding recommended max line length if either class name or parameter definitions are too long.", "author": "bjorncs", "createdAt": "2020-11-19T10:45:19Z", "path": "container-core/src/main/java/com/yahoo/container/handler/threadpool/ExecutorServiceWrapper.java", "diffHunk": "@@ -28,10 +28,12 @@\n     private final Thread metricReporter;\n     private final AtomicBoolean closed = new AtomicBoolean(false);\n \n-    ExecutorServiceWrapper(", "originalCommit": "b01ecd72d26a45ff4b498881446f5e62237c64be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc4MDU3OQ==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526780579", "bodyText": "I know you don't like it, and I see it as a taste thing where there's no right answer (the IDE can indent like this for you so it doesn't cost any time either way). But I'm an author on this file and you are not :-)", "author": "bratseth", "createdAt": "2020-11-19T11:13:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc2MzIzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc4NTgxNA==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526785814", "bodyText": "Does it matter who is formally listed as author of the file? Many source files are modified by several developers that are not listed as author.", "author": "bjorncs", "createdAt": "2020-11-19T11:19:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc2MzIzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc5NjUwOQ==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526796509", "bodyText": "I usually check authors if I want to change to a style I know people don't agree to. It just seems polite to me.\nBtw, on author: I usually set myself as author if I make substantial changes to something.\nNone of these things are precise enough to be \"rules\" of course ...", "author": "bratseth", "createdAt": "2020-11-19T11:32:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc2MzIzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjgwMjAwOA==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526802008", "bodyText": "I don't agree in changing code style if there is no intention to do functional changes to the same code - we do not have any agreed style convention or automatic linting for our Java code. It clutters the git history and creates potential merge conflicts. Is it constructive if several developers reformat each others code all the time because they don't the other style?", "author": "bjorncs", "createdAt": "2020-11-19T11:41:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc2MzIzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjk0MTgxNQ==", "url": "https://github.com/vespa-engine/vespa/pull/15384#discussion_r526941815", "bodyText": "No but I don't think that is an actual problem we have. It's more that we have lots of code that looks a bit old and crufty with lots of yellow when viewed in IntelliJ.\n(Not that that's a big problem either - here I was killing time while in a meeting.)", "author": "bratseth", "createdAt": "2020-11-19T14:45:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc2MzIzNQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "43307ca111d901775cf24dace32d4b2b67245454", "url": "https://github.com/vespa-engine/vespa/commit/43307ca111d901775cf24dace32d4b2b67245454", "message": "Non-functional: Single-line @Overrides", "committedDate": "2020-11-19T11:37:20Z", "type": "commit"}]}