{"pr_number": 14672, "pr_title": "Jonmv/catch only linkage error and runtime exception", "pr_createdAt": "2020-10-01T18:32:16Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14672", "timeline": [{"oid": "7983d163ea4fe9154b2abc79185e38c70dcf11a3", "url": "https://github.com/vespa-engine/vespa/commit/7983d163ea4fe9154b2abc79185e38c70dcf11a3", "message": "Revert \"Catch Throwable instead of just RuntimeException\"\n\nThis reverts commit 75cafe646fbbbf9ba65021d65e2bb6afd1c4d156.", "committedDate": "2020-10-01T18:28:19Z", "type": "commit"}, {"oid": "f1aa2bb7fa9342c6dfdd0bf29b645d48e37247cb", "url": "https://github.com/vespa-engine/vespa/commit/f1aa2bb7fa9342c6dfdd0bf29b645d48e37247cb", "message": "Only catch LinkageError in addition to RuntimeException", "committedDate": "2020-10-01T18:29:40Z", "type": "commit"}, {"oid": "0ca6d0240bc72e037325b86c93b786fc3463b17f", "url": "https://github.com/vespa-engine/vespa/commit/0ca6d0240bc72e037325b86c93b786fc3463b17f", "message": "Shut down forcibly earlier", "committedDate": "2020-10-01T18:31:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ0MDc5NQ==", "url": "https://github.com/vespa-engine/vespa/pull/14672#discussion_r498440795", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /** Assumes this stops receiving operations roughly when this is called, then waits up to 50 seconds to drain operations. */\n          \n          \n            \n                /** Assumes this stops receiving operations roughly when this is called, then waits up to 20 seconds to drain operations. */", "author": "jonmv", "createdAt": "2020-10-01T18:33:16Z", "path": "vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/DocumentOperationExecutorImpl.java", "diffHunk": "@@ -148,11 +148,11 @@ private static VisitorParameters asParameters(VisitorOptions options, Map<String\n     /** Assumes this stops receiving operations roughly when this is called, then waits up to 50 seconds to drain operations. */", "originalCommit": "0ca6d0240bc72e037325b86c93b786fc3463b17f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6cbe3529b4fabd24632c0c670dc4097907f3b6d8", "chunk": "diff --git a/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/DocumentOperationExecutorImpl.java b/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/DocumentOperationExecutorImpl.java\nindex e25a2215b9..08628671fd 100644\n--- a/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/DocumentOperationExecutorImpl.java\n+++ b/vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/DocumentOperationExecutorImpl.java\n\n@@ -145,7 +145,7 @@ public class DocumentOperationExecutorImpl implements DocumentOperationExecutor\n         return parameters;\n     }\n \n-    /** Assumes this stops receiving operations roughly when this is called, then waits up to 50 seconds to drain operations. */\n+    /** Assumes this stops receiving operations roughly when this is called, then waits up to 20 seconds to drain operations. */\n     @Override\n     public void shutdown() {\n         long shutdownMillis = clock.instant().plusSeconds(20).toEpochMilli();\n"}}, {"oid": "6cbe3529b4fabd24632c0c670dc4097907f3b6d8", "url": "https://github.com/vespa-engine/vespa/commit/6cbe3529b4fabd24632c0c670dc4097907f3b6d8", "message": "Update doc", "committedDate": "2020-10-01T18:33:21Z", "type": "commit"}, {"oid": "aa071d7035b9c9b874326bb7c7ea5c20d57307d0", "url": "https://github.com/vespa-engine/vespa/commit/aa071d7035b9c9b874326bb7c7ea5c20d57307d0", "message": "Cancel correct shutdown thread", "committedDate": "2020-10-01T18:36:23Z", "type": "commit"}]}