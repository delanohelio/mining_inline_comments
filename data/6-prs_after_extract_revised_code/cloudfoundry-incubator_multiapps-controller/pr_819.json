{"pr_number": 819, "pr_title": "Refactor getting/setting of process variables (Part 3)", "pr_createdAt": "2020-03-23T14:24:23Z", "pr_url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/819", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5NTMxNw==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/819#discussion_r396495317", "bodyText": "Are there more variables which are required?\nI am asking because if someone adds another required variable, what will happen if he/she forgets to retrieve it using the context.getRequiredProcessVariable?\nI wonder whether there is a way to prevent this - using builder ?", "author": "enchobelezirev", "createdAt": "2020-03-23T14:33:11Z", "path": "com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/variables/Variables.java", "diffHunk": "@@ -60,6 +60,12 @@\n     Variable<String> SERVICE_TO_PROCESS_NAME = ImmutableVariable.<String> builder()\n                                                                 .name(Constants.VAR_SERVICE_TO_PROCESS_NAME)\n                                                                 .build();\n+    Variable<String> APP_ARCHIVE_ID = ImmutableVariable.<String> builder()\n+                                                       .name(Constants.PARAM_APP_ARCHIVE_ID)\n+                                                       .build();\n+    Variable<String> MTA_ID = ImmutableVariable.<String> builder()", "originalCommit": "9ce357c4439453c66947bb8521afe7a9458a10db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA2Njc1MQ==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/819#discussion_r397066751", "bodyText": "I prefer to leave this in the hands of the steps. A variable might be \"required\" in one step and optional in another. Because of this, \"required\" is not so much an attribute of the variable itself, but more of the step that uses it.", "author": "nictas", "createdAt": "2020-03-24T11:00:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5NTMxNw=="}], "type": "inlineReview", "revised_code": {"commit": "f3eecd99c9765f9ff11ce0c4ba8198dcfca9f82b", "chunk": "diff --git a/com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/variables/Variables.java b/com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/variables/Variables.java\nindex 61428c468..85fe84ddd 100644\n--- a/com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/variables/Variables.java\n+++ b/com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/variables/Variables.java\n\n@@ -63,9 +63,45 @@ public interface Variables {\n     Variable<String> APP_ARCHIVE_ID = ImmutableVariable.<String> builder()\n                                                        .name(Constants.PARAM_APP_ARCHIVE_ID)\n                                                        .build();\n+    Variable<String> EXT_DESCRIPTOR_FILE_ID = ImmutableVariable.<String> builder()\n+                                                               .name(Constants.PARAM_EXT_DESCRIPTOR_FILE_ID)\n+                                                               .build();\n     Variable<String> MTA_ID = ImmutableVariable.<String> builder()\n                                                .name(Constants.PARAM_MTA_ID)\n                                                .build();\n+    Variable<String> GIT_URI = ImmutableVariable.<String> builder()\n+                                                .name(Constants.PARAM_GIT_URI)\n+                                                .build();\n+    Variable<String> GIT_REF = ImmutableVariable.<String> builder()\n+                                                .name(Constants.PARAM_GIT_REF)\n+                                                .build();\n+    Variable<String> GIT_REPO_PATH = ImmutableVariable.<String> builder()\n+                                                      .name(Constants.PARAM_GIT_REPO_PATH)\n+                                                      .build();\n+    Variable<String> CTS_PROCESS_ID = ImmutableVariable.<String> builder()\n+                                                       .name(Constants.PARAM_CTS_PROCESS_ID)\n+                                                       .build();\n+    Variable<String> DEPLOY_URI = ImmutableVariable.<String> builder()\n+                                                   .name(Constants.PARAM_DEPLOY_URI)\n+                                                   .build();\n+    Variable<String> USERNAME = ImmutableVariable.<String> builder()\n+                                                 .name(Constants.PARAM_USERNAME)\n+                                                 .build();\n+    Variable<String> PASSWORD = ImmutableVariable.<String> builder()\n+                                                 .name(Constants.PARAM_PASSWORD)\n+                                                 .build();\n+    Variable<String> TRANSFER_TYPE = ImmutableVariable.<String> builder()\n+                                                      .name(Constants.PARAM_TRANSFER_TYPE)\n+                                                      .build();\n+    Variable<String> APPLICATION_TYPE = ImmutableVariable.<String> builder()\n+                                                         .name(Constants.PARAM_APPLICATION_TYPE)\n+                                                         .build();\n+    Variable<String> USER = ImmutableVariable.<String> builder()\n+                                             .name(Constants.VAR_USER)\n+                                             .build();\n+    Variable<String> SERVICE_OFFERING = ImmutableVariable.<String> builder()\n+                                                         .name(Constants.VAR_SERVICE_OFFERING)\n+                                                         .build();\n     Variable<Integer> MTA_MAJOR_SCHEMA_VERSION = ImmutableVariable.<Integer> builder()\n                                                                   .name(Constants.VAR_MTA_MAJOR_SCHEMA_VERSION)\n                                                                   .build();\n"}}, {"oid": "f3eecd99c9765f9ff11ce0c4ba8198dcfca9f82b", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/f3eecd99c9765f9ff11ce0c4ba8198dcfca9f82b", "message": "Migrate string/int/bool variables to new mechanism (Part 2)", "committedDate": "2020-03-24T10:54:17Z", "type": "forcePushed"}, {"oid": "72c4360e2bfef72f42f9199ef8eec828290338f4", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/72c4360e2bfef72f42f9199ef8eec828290338f4", "message": "Migrate string/int/bool variables to new mechanism (Part 2)", "committedDate": "2020-03-24T11:08:12Z", "type": "forcePushed"}, {"oid": "a1fdba97779d76e18c7fe750402078d61804caaf", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/a1fdba97779d76e18c7fe750402078d61804caaf", "message": "Migrate required variables to new mechanism", "committedDate": "2020-03-24T12:06:01Z", "type": "commit"}, {"oid": "d6732e951c305a31d2fdcc3896b7eadabdb90180", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/d6732e951c305a31d2fdcc3896b7eadabdb90180", "message": "Migrate string/int/bool variables to new mechanism (Part 2)", "committedDate": "2020-03-24T12:25:21Z", "type": "commit"}, {"oid": "d6732e951c305a31d2fdcc3896b7eadabdb90180", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/d6732e951c305a31d2fdcc3896b7eadabdb90180", "message": "Migrate string/int/bool variables to new mechanism (Part 2)", "committedDate": "2020-03-24T12:25:21Z", "type": "forcePushed"}]}