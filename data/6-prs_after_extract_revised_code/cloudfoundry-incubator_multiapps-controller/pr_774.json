{"pr_number": 774, "pr_title": "ExecutionListeners for start and end of bg-deploy", "pr_createdAt": "2020-02-24T16:28:09Z", "pr_url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/774", "timeline": [{"oid": "50e8e74ce6730f59f11108984c6318c1694a0257", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/50e8e74ce6730f59f11108984c6318c1694a0257", "message": "ExecutionListeners for start and end of bg-deploy\n\nAdd ExecutionListeners for the start and end of testing phase of\nblue-green deploy. Refactor ProcessLoggerProvider to create non-existing\nfiles. JIRA: LMCROSSITXSADEPLOY-1870", "committedDate": "2020-02-24T16:37:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc0NDAxMw==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/774#discussion_r383744013", "bodyText": "this is just a method wrapping another method with no additional value added", "author": "ikasarov", "createdAt": "2020-02-25T09:10:55Z", "path": "com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/listeners/AbstractProcessExecutionListener.java", "diffHunk": "@@ -78,7 +69,7 @@ protected void finalizeLogs(DelegateExecution context) {\n     }\n \n     private String getCorrelationId(DelegateExecution context) {\n-        return (String) context.getVariable(com.sap.cloud.lm.sl.cf.persistence.Constants.CORRELATION_ID);\n+        return StepsUtil.getCorrelationId(context);", "originalCommit": "50e8e74ce6730f59f11108984c6318c1694a0257", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "126ae819f266c54c9eabc185cc7046f67d855717", "chunk": "diff --git a/com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/listeners/AbstractProcessExecutionListener.java b/com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/listeners/AbstractProcessExecutionListener.java\nindex c0494ae94..dc3c709f1 100644\n--- a/com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/listeners/AbstractProcessExecutionListener.java\n+++ b/com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/listeners/AbstractProcessExecutionListener.java\n\n@@ -65,11 +65,7 @@ public abstract class AbstractProcessExecutionListener implements ExecutionListe\n     }\n \n     protected void finalizeLogs(DelegateExecution context) {\n-        processLogsPersister.persistLogs(getCorrelationId(context), getTaskId(context));\n-    }\n-\n-    private String getCorrelationId(DelegateExecution context) {\n-        return StepsUtil.getCorrelationId(context);\n+        processLogsPersister.persistLogs(StepsUtil.getCorrelationId(context), getTaskId(context));\n     }\n \n     private String getTaskId(DelegateExecution context) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc0NDU0Mw==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/774#discussion_r383744543", "bodyText": "and you're calling it the old way here as well", "author": "ikasarov", "createdAt": "2020-02-25T09:11:53Z", "path": "com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/listeners/AbstractProcessExecutionListener.java", "diffHunk": "@@ -101,6 +92,12 @@ private StepLogger createStepLogger(DelegateExecution context) {\n         return stepLoggerFactory.create(context, progressMessageService, processLoggerProvider, getLogger());\n     }\n \n+    protected boolean isRootProcess(DelegateExecution context) {\n+        String correlationId = StepsUtil.getCorrelationId(context);", "originalCommit": "50e8e74ce6730f59f11108984c6318c1694a0257", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "1c968ea8f98b123d8ac63ef70a4966f996dcaa6c", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/1c968ea8f98b123d8ac63ef70a4966f996dcaa6c", "message": "ExecutionListeners for start and end of bg-deploy\n\nAdd ExecutionListeners for the start and end of testing phase of\nblue-green deploy. JIRA: LMCROSSITXSADEPLOY-1870", "committedDate": "2020-02-25T15:40:45Z", "type": "forcePushed"}, {"oid": "126ae819f266c54c9eabc185cc7046f67d855717", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/126ae819f266c54c9eabc185cc7046f67d855717", "message": "ExecutionListeners for start and end of bg-deploy\n\nAdd ExecutionListeners for the start and end of testing phase of\nblue-green deploy. JIRA: LMCROSSITXSADEPLOY-1870", "committedDate": "2020-02-25T15:43:12Z", "type": "commit"}, {"oid": "126ae819f266c54c9eabc185cc7046f67d855717", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/126ae819f266c54c9eabc185cc7046f67d855717", "message": "ExecutionListeners for start and end of bg-deploy\n\nAdd ExecutionListeners for the start and end of testing phase of\nblue-green deploy. JIRA: LMCROSSITXSADEPLOY-1870", "committedDate": "2020-02-25T15:43:12Z", "type": "forcePushed"}]}