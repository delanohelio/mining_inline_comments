{"pr_number": 7434, "pr_title": "Integration tests for unique user id based methods.", "pr_createdAt": "2020-01-30T20:37:07Z", "pr_url": "https://github.com/wso2/product-is/pull/7434", "timeline": [{"oid": "862e01970157968f1b955bfd33a20beb241d2bae", "url": "https://github.com/wso2/product-is/commit/862e01970157968f1b955bfd33a20beb241d2bae", "message": "Add test service copy logic for the int tests.", "committedDate": "2020-01-23T15:18:22Z", "type": "commit"}, {"oid": "9224f529a996a94d96c8346c7abac885822bbf45", "url": "https://github.com/wso2/product-is/commit/9224f529a996a94d96c8346c7abac885822bbf45", "message": "Add integration tests for new user id methods.", "committedDate": "2020-01-30T20:32:49Z", "type": "commit"}, {"oid": "7628848ab71a326d085247739d1359e0f28e2cfd", "url": "https://github.com/wso2/product-is/commit/7628848ab71a326d085247739d1359e0f28e2cfd", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests\n\n\u0001 Conflicts:\n\u0001\tmodules/integration/tests-integration/tests-backend/src/test/resources/testng.xml", "committedDate": "2020-01-30T20:35:17Z", "type": "commit"}, {"oid": "f71c507c63c050f3862917de43f6be39a7249b07", "url": "https://github.com/wso2/product-is/commit/f71c507c63c050f3862917de43f6be39a7249b07", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests", "committedDate": "2020-01-31T09:02:36Z", "type": "commit"}, {"oid": "9cbbf705970cd77fcdb402ccfaff7efebe720867", "url": "https://github.com/wso2/product-is/commit/9cbbf705970cd77fcdb402ccfaff7efebe720867", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests", "committedDate": "2020-02-05T07:21:34Z", "type": "commit"}, {"oid": "7a0d1e829dcee3db0eeae6a5f9a600e2557df882", "url": "https://github.com/wso2/product-is/commit/7a0d1e829dcee3db0eeae6a5f9a600e2557df882", "message": "Fix test failures.", "committedDate": "2020-02-06T16:59:54Z", "type": "commit"}, {"oid": "6192eb27b4de361d71a3a0eedc41f29bc4e35654", "url": "https://github.com/wso2/product-is/commit/6192eb27b4de361d71a3a0eedc41f29bc4e35654", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests", "committedDate": "2020-02-07T14:36:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg4MjU1NA==", "url": "https://github.com/wso2/product-is/pull/7434#discussion_r376882554", "bodyText": "Shall we add License header", "author": "GDRDABARERA", "createdAt": "2020-02-10T06:15:46Z", "path": "modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java", "diffHunk": "@@ -0,0 +1,241 @@\n+package org.wso2.identity.integration.common.clients.usermgt.uuid;", "originalCommit": "7a0d1e829dcee3db0eeae6a5f9a600e2557df882", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "78025b8e94d27974208ba0bcad3a302d385c2aab", "chunk": "diff --git a/modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java b/modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java\nindex 9173c2eeb..0b82478d6 100644\n--- a/modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java\n+++ b/modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java\n\n@@ -1,3 +1,19 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n package org.wso2.identity.integration.common.clients.usermgt.uuid;\n \n import org.apache.axis2.AxisFault;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg4MjcyMQ==", "url": "https://github.com/wso2/product-is/pull/7434#discussion_r376882721", "bodyText": "Shall we add Class level comment to be more descriptive or we can add a ReadMe", "author": "GDRDABARERA", "createdAt": "2020-02-10T06:16:38Z", "path": "modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java", "diffHunk": "@@ -0,0 +1,241 @@\n+package org.wso2.identity.integration.common.clients.usermgt.uuid;\n+\n+import org.apache.axis2.AxisFault;\n+import org.wso2.carbon.identity.test.integration.service.stub.AuthenticationResultDTO;\n+import org.wso2.carbon.identity.test.integration.service.stub.ClaimDTO;\n+import org.wso2.carbon.identity.test.integration.service.stub.ClaimValue;\n+import org.wso2.carbon.identity.test.integration.service.stub.ConditionDTO;\n+import org.wso2.carbon.identity.test.integration.service.stub.LoginIdentifierDTO;\n+import org.wso2.carbon.identity.test.integration.service.stub.PermissionDTO;\n+import org.wso2.carbon.identity.test.integration.service.stub.UUIDUserStoreManagerServiceStub;\n+import org.wso2.carbon.identity.test.integration.service.stub.UUIDUserStoreManagerServiceUserStoreExceptionException;\n+import org.wso2.carbon.identity.test.integration.service.stub.UniqueIDUserClaimSearchEntryDAO;\n+import org.wso2.carbon.identity.test.integration.service.stub.UserDTO;\n+import org.wso2.carbon.identity.test.integration.service.stub.UserRoleListDTO;\n+import org.wso2.carbon.user.core.UserStoreException;\n+import org.wso2.identity.integration.common.clients.AuthenticateStub;\n+\n+import java.rmi.RemoteException;\n+import java.util.Date;\n+import java.util.List;\n+\n+public class UUIDUserStoreManagerServiceClient {", "originalCommit": "7a0d1e829dcee3db0eeae6a5f9a600e2557df882", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "78025b8e94d27974208ba0bcad3a302d385c2aab", "chunk": "diff --git a/modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java b/modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java\nindex 9173c2eeb..0b82478d6 100644\n--- a/modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java\n+++ b/modules/integration/tests-common/admin-clients/src/main/java/org/wso2/identity/integration/common/clients/usermgt/uuid/UUIDUserStoreManagerServiceClient.java\n\n@@ -1,3 +1,19 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n package org.wso2.identity.integration.common.clients.usermgt.uuid;\n \n import org.apache.axis2.AxisFault;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg4Mjg5MQ==", "url": "https://github.com/wso2/product-is/pull/7434#discussion_r376882891", "bodyText": "Shall we add license header", "author": "GDRDABARERA", "createdAt": "2020-02-10T06:17:24Z", "path": "modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java", "diffHunk": "@@ -0,0 +1,595 @@\n+package org.wso2.carbon.identity.test.integration.service;", "originalCommit": "7a0d1e829dcee3db0eeae6a5f9a600e2557df882", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a9013684b51254e77fbfe22192c7ae65f6bd8ecb", "chunk": "diff --git a/modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java b/modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java\nindex fe9de1734..8b92cdadc 100644\n--- a/modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java\n+++ b/modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java\n\n@@ -157,8 +157,9 @@ public class UUIDUserStoreManagerService {\n             throws UserStoreException {\n \n         try {\n-            return getClaimSearchEntryDAOFromClaimSearchEntry(getUserStoreManager().getUsersClaimValuesWithID(Arrays.asList(userIDs), Arrays.asList(claims),\n-                    profileName).toArray(new UniqueIDUserClaimSearchEntry[0]));\n+            return getClaimSearchEntryDAOFromClaimSearchEntry(getUserStoreManager()\n+                    .getUsersClaimValuesWithID(Arrays.asList(userIDs), Arrays.asList(claims), profileName)\n+                    .toArray(new UniqueIDUserClaimSearchEntry[0]));\n         } catch (org.wso2.carbon.user.core.UserStoreException e) {\n             throw new UserStoreException(e.getMessage(), e.getErrorCode(), e.getCause());\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg4Mjk2Nw==", "url": "https://github.com/wso2/product-is/pull/7434#discussion_r376882967", "bodyText": "Class level comment", "author": "GDRDABARERA", "createdAt": "2020-02-10T06:17:47Z", "path": "modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java", "diffHunk": "@@ -0,0 +1,595 @@\n+package org.wso2.carbon.identity.test.integration.service;\n+\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.wso2.carbon.context.CarbonContext;\n+import org.wso2.carbon.identity.test.integration.service.dao.Attribute;\n+import org.wso2.carbon.identity.test.integration.service.dao.AuthenticationResultDTO;\n+import org.wso2.carbon.identity.test.integration.service.dao.ClaimDTO;\n+import org.wso2.carbon.identity.test.integration.service.dao.ClaimValue;\n+import org.wso2.carbon.identity.test.integration.service.dao.ConditionDTO;\n+import org.wso2.carbon.identity.test.integration.service.dao.FailureReasonDTO;\n+import org.wso2.carbon.identity.test.integration.service.dao.LoginIdentifierDTO;\n+import org.wso2.carbon.identity.test.integration.service.dao.PermissionDTO;\n+import org.wso2.carbon.identity.test.integration.service.dao.UniqueIDUserClaimSearchEntryDAO;\n+import org.wso2.carbon.identity.test.integration.service.dao.UserClaimSearchEntryDAO;\n+import org.wso2.carbon.identity.test.integration.service.dao.UserDTO;\n+import org.wso2.carbon.identity.test.integration.service.dao.UserRoleListDTO;\n+import org.wso2.carbon.identity.test.integration.service.dao.UserStoreException;\n+import org.wso2.carbon.user.core.Permission;\n+import org.wso2.carbon.user.core.UserRealm;\n+import org.wso2.carbon.user.core.claim.Claim;\n+import org.wso2.carbon.user.core.common.AbstractUserStoreManager;\n+import org.wso2.carbon.user.core.common.AuthenticationResult;\n+import org.wso2.carbon.user.core.common.FailureReason;\n+import org.wso2.carbon.user.core.common.LoginIdentifier;\n+import org.wso2.carbon.user.core.common.User;\n+import org.wso2.carbon.user.core.model.Condition;\n+import org.wso2.carbon.user.core.model.UniqueIDUserClaimSearchEntry;\n+import org.wso2.carbon.user.core.model.UserClaimSearchEntry;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Date;\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+\n+public class UUIDUserStoreManagerService {", "originalCommit": "7a0d1e829dcee3db0eeae6a5f9a600e2557df882", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a9013684b51254e77fbfe22192c7ae65f6bd8ecb", "chunk": "diff --git a/modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java b/modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java\nindex fe9de1734..8b92cdadc 100644\n--- a/modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java\n+++ b/modules/integration/tests-common/admin-services/src/main/java/org/wso2/carbon/identity/test/integration/service/UUIDUserStoreManagerService.java\n\n@@ -157,8 +157,9 @@ public class UUIDUserStoreManagerService {\n             throws UserStoreException {\n \n         try {\n-            return getClaimSearchEntryDAOFromClaimSearchEntry(getUserStoreManager().getUsersClaimValuesWithID(Arrays.asList(userIDs), Arrays.asList(claims),\n-                    profileName).toArray(new UniqueIDUserClaimSearchEntry[0]));\n+            return getClaimSearchEntryDAOFromClaimSearchEntry(getUserStoreManager()\n+                    .getUsersClaimValuesWithID(Arrays.asList(userIDs), Arrays.asList(claims), profileName)\n+                    .toArray(new UniqueIDUserClaimSearchEntry[0]));\n         } catch (org.wso2.carbon.user.core.UserStoreException e) {\n             throw new UserStoreException(e.getMessage(), e.getErrorCode(), e.getCause());\n         }\n"}}, {"oid": "a9013684b51254e77fbfe22192c7ae65f6bd8ecb", "url": "https://github.com/wso2/product-is/commit/a9013684b51254e77fbfe22192c7ae65f6bd8ecb", "message": "Improve code quality in the tests.", "committedDate": "2020-02-10T11:35:02Z", "type": "commit"}, {"oid": "e8dff00b020d87b600eb6cb1445f8042bdb8d89a", "url": "https://github.com/wso2/product-is/commit/e8dff00b020d87b600eb6cb1445f8042bdb8d89a", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests", "committedDate": "2020-02-10T11:37:20Z", "type": "commit"}, {"oid": "e16675323165ab7ef524692bd3bda555a0efc324", "url": "https://github.com/wso2/product-is/commit/e16675323165ab7ef524692bd3bda555a0efc324", "message": "Remove unnecessary test.", "committedDate": "2020-02-11T18:45:52Z", "type": "commit"}, {"oid": "78025b8e94d27974208ba0bcad3a302d385c2aab", "url": "https://github.com/wso2/product-is/commit/78025b8e94d27974208ba0bcad3a302d385c2aab", "message": "Improve code quality.", "committedDate": "2020-02-13T08:30:19Z", "type": "commit"}, {"oid": "aae08f04b50a586cd2954dc0c142a1ce5abca683", "url": "https://github.com/wso2/product-is/commit/aae08f04b50a586cd2954dc0c142a1ce5abca683", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests\n\n\u0001 Conflicts:\n\u0001\tmodules/integration/tests-integration/tests-backend/src/test/resources/testng.xml", "committedDate": "2020-02-13T08:36:28Z", "type": "commit"}, {"oid": "19a6fca012d553b4118179476ba2b27e4b21b390", "url": "https://github.com/wso2/product-is/commit/19a6fca012d553b4118179476ba2b27e4b21b390", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests", "committedDate": "2020-02-14T20:34:17Z", "type": "commit"}, {"oid": "2ed36b7c13362c9d7b8a3bfb947e96dbe712f11b", "url": "https://github.com/wso2/product-is/commit/2ed36b7c13362c9d7b8a3bfb947e96dbe712f11b", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests", "committedDate": "2020-02-17T12:38:22Z", "type": "commit"}, {"oid": "261326908b5770c21295446a51f449e99a7d7d50", "url": "https://github.com/wso2/product-is/commit/261326908b5770c21295446a51f449e99a7d7d50", "message": "Update pom versions.", "committedDate": "2020-02-17T14:40:57Z", "type": "commit"}, {"oid": "5f19be18b92d78bbc70977dff376e115333d90e1", "url": "https://github.com/wso2/product-is/commit/5f19be18b92d78bbc70977dff376e115333d90e1", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests", "committedDate": "2020-02-19T09:32:25Z", "type": "commit"}, {"oid": "87f24ab39154f8676517e2e505ab70048210cddc", "url": "https://github.com/wso2/product-is/commit/87f24ab39154f8676517e2e505ab70048210cddc", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests", "committedDate": "2020-02-21T06:08:21Z", "type": "commit"}, {"oid": "940d017485975a496c015395d9550f5fce82ca86", "url": "https://github.com/wso2/product-is/commit/940d017485975a496c015395d9550f5fce82ca86", "message": "Fix test failures due to server not restarting.", "committedDate": "2020-02-21T13:54:14Z", "type": "commit"}, {"oid": "17cf196c2840448ef386eb7504d4aec429a2bdc5", "url": "https://github.com/wso2/product-is/commit/17cf196c2840448ef386eb7504d4aec429a2bdc5", "message": "Merge branch 'master' of https://github.com/wso2/product-is into uuid-int-tests", "committedDate": "2020-02-25T07:09:33Z", "type": "commit"}, {"oid": "489beb5245fda46573f13e7d57f03ddd05f1f125", "url": "https://github.com/wso2/product-is/commit/489beb5245fda46573f13e7d57f03ddd05f1f125", "message": "Add logs related to test initializing.", "committedDate": "2020-02-25T09:23:33Z", "type": "commit"}]}