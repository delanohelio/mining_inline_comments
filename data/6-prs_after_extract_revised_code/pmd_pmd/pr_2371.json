{"pr_number": 2371, "pr_title": "[core] Generify GenericToken, cleanup Token managers & CPD", "pr_createdAt": "2020-03-20T17:08:56Z", "pr_url": "https://github.com/pmd/pmd/pull/2371", "timeline": [{"oid": "30886544c53df5c9bd99a5e6fd70a2ce4609c2e3", "url": "https://github.com/pmd/pmd/commit/30886544c53df5c9bd99a5e6fd70a2ce4609c2e3", "message": "Deprecations to clean up CPD", "committedDate": "2020-03-20T17:00:16Z", "type": "commit"}, {"oid": "2b36ef5e39c02ac1de208c4a202fc6cc0692fdc1", "url": "https://github.com/pmd/pmd/commit/2b36ef5e39c02ac1de208c4a202fc6cc0692fdc1", "message": "Merge branch 'deprecate-token-mgr-stuff' into tmp", "committedDate": "2020-03-20T17:07:42Z", "type": "commit"}, {"oid": "3cdcba2299a1be1789ecd9f232d4c6be61bcc6ef", "url": "https://github.com/pmd/pmd/commit/3cdcba2299a1be1789ecd9f232d4c6be61bcc6ef", "message": "Fix file name for token manager error", "committedDate": "2020-03-20T17:07:56Z", "type": "commit"}, {"oid": "e9b65823bf29694442ddd133620ed23f2216b65e", "url": "https://github.com/pmd/pmd/commit/e9b65823bf29694442ddd133620ed23f2216b65e", "message": "Cleanup TokenMgrError", "committedDate": "2020-03-20T17:07:56Z", "type": "commit"}, {"oid": "368573e7c731e3a2559b53e2ee276cc86c3e6f3a", "url": "https://github.com/pmd/pmd/commit/368573e7c731e3a2559b53e2ee276cc86c3e6f3a", "message": "Start removing TokenManager wrappers", "committedDate": "2020-03-20T17:07:56Z", "type": "commit"}, {"oid": "cd5af6a12dcd0e8c34e6afdedf179e992f3fe0db", "url": "https://github.com/pmd/pmd/commit/cd5af6a12dcd0e8c34e6afdedf179e992f3fe0db", "message": "do it in c++", "committedDate": "2020-03-20T17:07:56Z", "type": "commit"}, {"oid": "f64acb6c3859a4e59aa0240b3de81dc31cd43f15", "url": "https://github.com/pmd/pmd/commit/f64acb6c3859a4e59aa0240b3de81dc31cd43f15", "message": "python", "committedDate": "2020-03-20T17:07:56Z", "type": "commit"}, {"oid": "96feed7b83c6f136da2642643ce76605a50591ef", "url": "https://github.com/pmd/pmd/commit/96feed7b83c6f136da2642643ce76605a50591ef", "message": "Do it for the other languages", "committedDate": "2020-03-20T17:07:56Z", "type": "commit"}, {"oid": "7b091f2be2dc4f4e672a072aa400855da471c838", "url": "https://github.com/pmd/pmd/commit/7b091f2be2dc4f4e672a072aa400855da471c838", "message": "Fix other generic uses of GenericToken", "committedDate": "2020-03-20T17:07:56Z", "type": "commit"}, {"oid": "62a9d5b65575add31c20664faca35593f2a7e0b3", "url": "https://github.com/pmd/pmd/commit/62a9d5b65575add31c20664faca35593f2a7e0b3", "message": "Fix build", "committedDate": "2020-03-20T17:07:56Z", "type": "commit"}, {"oid": "16f30c9ece16845c96ba21db99fc4f34600a156c", "url": "https://github.com/pmd/pmd/commit/16f30c9ece16845c96ba21db99fc4f34600a156c", "message": "Make Antlr token manager throw TokenMgrError directly", "committedDate": "2020-03-21T23:48:16Z", "type": "commit"}, {"oid": "f6260463d77cd78d519fe4e2b61e3b50d0571304", "url": "https://github.com/pmd/pmd/commit/f6260463d77cd78d519fe4e2b61e3b50d0571304", "message": "Make Antlr token implementation respect its contract", "committedDate": "2020-03-21T23:50:26Z", "type": "commit"}, {"oid": "2ea78db0dc51202c209514c19ea7413b7ae5f4d2", "url": "https://github.com/pmd/pmd/commit/2ea78db0dc51202c209514c19ea7413b7ae5f4d2", "message": "Checkstyle", "committedDate": "2020-03-21T23:56:10Z", "type": "commit"}, {"oid": "a8af14676d645573d065632f05ffd8dc8269b8a7", "url": "https://github.com/pmd/pmd/commit/a8af14676d645573d065632f05ffd8dc8269b8a7", "message": "Add isEof method", "committedDate": "2020-03-22T00:03:59Z", "type": "commit"}, {"oid": "a8af14676d645573d065632f05ffd8dc8269b8a7", "url": "https://github.com/pmd/pmd/commit/a8af14676d645573d065632f05ffd8dc8269b8a7", "message": "Add isEof method", "committedDate": "2020-03-22T00:03:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgyNjU2NA==", "url": "https://github.com/pmd/pmd/pull/2371#discussion_r406826564", "bodyText": "What is the meaning of the package \"impl\"? I see this very often. Is there a difference between \"internal\" and \"impl\"? I think, we should stick at some point to one name...\nThe class AntlrToken is now moved from package net.sourceforge.pmd.cpd.token to net.sourceforge.pmd.lang.ast.impl.antlr4. This is a breaking API change, but one that can be fixed with \"organize imports\". Is it worth to do any deprecation warning on master for that change?", "author": "adangel", "createdAt": "2020-04-10T16:09:22Z", "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/impl/antlr4/AntlrToken.java", "diffHunk": "@@ -1,8 +1,8 @@\n-/**\n+/*\n  * BSD-style license; for more info see http://pmd.sourceforge.net/license.html\n  */\n \n-package net.sourceforge.pmd.cpd.token;\n+package net.sourceforge.pmd.lang.ast.impl.antlr4;", "originalCommit": "a8af14676d645573d065632f05ffd8dc8269b8a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA1NzM0Nw==", "url": "https://github.com/pmd/pmd/pull/2371#discussion_r407057347", "bodyText": "I described this here\nSo ast.impl.antlr4 would be a package relevant for language implementors to use, while  ast.internal should not be used outside of pmd-core, and ast is relevant to everyone.\nI'm not sure it's sensible to deprecate on master, since the API will still be here and easy to reach. Maybe we should mention this in the 7.0 release notes though", "author": "oowekyala", "createdAt": "2020-04-11T12:19:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgyNjU2NA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgzNDE3OQ==", "url": "https://github.com/pmd/pmd/pull/2371#discussion_r406834179", "bodyText": "Maybe we should move CppCharStream then into a internal package? I think, this is just an implementation detail and API users should not need to care about it....", "author": "adangel", "createdAt": "2020-04-10T16:27:20Z", "path": "pmd-cpp/src/main/java/net/sourceforge/pmd/lang/cpp/ast/CppCharStream.java", "diffHunk": "@@ -20,7 +20,7 @@\n  *\n  * @author Andreas Dangel\n  */\n-class CppCharStream extends SimpleCharStream {\n+public class CppCharStream extends SimpleCharStream {", "originalCommit": "a8af14676d645573d065632f05ffd8dc8269b8a7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgzNTU2OA==", "url": "https://github.com/pmd/pmd/pull/2371#discussion_r406835568", "bodyText": "That's also an API change - but that would be easy to handle on master.\nFixed on master with 0710877", "author": "adangel", "createdAt": "2020-04-10T16:30:43Z", "path": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/impl/antlr4/AntlrToken.java", "diffHunk": "@@ -64,7 +69,7 @@ public int getEndColumn() {\n         return token.getCharPositionInLine() + token.getStopIndex() - token.getStartIndex();\n     }\n \n-    public int getType() {\n+    public int getKind() {", "originalCommit": "a8af14676d645573d065632f05ffd8dc8269b8a7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}