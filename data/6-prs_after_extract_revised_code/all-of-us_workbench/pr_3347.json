{"pr_number": 3347, "pr_title": "[noTicket][risk=moderate]Cloud interceptor should have correct Rdr Export queue name", "pr_createdAt": "2020-04-03T21:21:28Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3347", "timeline": [{"oid": "e8f153bc09138b5712854e15587e60bfc38ee7aa", "url": "https://github.com/all-of-us/workbench/commit/e8f153bc09138b5712854e15587e60bfc38ee7aa", "message": "Cloud interceptor should have latest rdr queue name", "committedDate": "2020-04-03T21:17:54Z", "type": "commit"}, {"oid": "ff4882cdd264ff1c0d88fa3df9038d5e7b12a6fe", "url": "https://github.com/all-of-us/workbench/commit/ff4882cdd264ff1c0d88fa3df9038d5e7b12a6fe", "message": "Test fix", "committedDate": "2020-04-03T21:40:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM1NDcwMA==", "url": "https://github.com/all-of-us/workbench/pull/3347#discussion_r403354700", "bodyText": "Should we just be pulling this out of the config instead? If that's not possible, please add a comment that this needs to be kept in sync with the config/queue yaml values.", "author": "calbach", "createdAt": "2020-04-03T21:53:36Z", "path": "api/src/main/java/org/pmiops/workbench/interceptors/CloudTaskInterceptor.java", "diffHunk": "@@ -23,7 +23,7 @@\n   public static final String QUEUE_NAME_REQUEST_HEADER = \"X-AppEngine-QueueName\";\n   private static final String CLOUD_TASK_TAG = \"cloudTask\";\n   public static final Set<String> VALID_QUEUE_NAME_SET =\n-      new HashSet<>(Arrays.asList(\"rdrQueueTest\"));\n+      new HashSet<>(Arrays.asList(\"rdrExportQueue\"));", "originalCommit": "ff4882cdd264ff1c0d88fa3df9038d5e7b12a6fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM1ODk0NA==", "url": "https://github.com/all-of-us/workbench/pull/3347#discussion_r403358944", "bodyText": "Since the queue name is same for all env i am planning to extracting that in the controller itself. (Follow up PR) as of now i have added comments", "author": "NehaBroad", "createdAt": "2020-04-03T22:06:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM1NDcwMA=="}], "type": "inlineReview", "revised_code": {"commit": "05b9529e15e732989d7634dec0c8bf17f114a7f5", "chunk": "diff --git a/api/src/main/java/org/pmiops/workbench/interceptors/CloudTaskInterceptor.java b/api/src/main/java/org/pmiops/workbench/interceptors/CloudTaskInterceptor.java\nindex b5a8d44c6..41dce955e 100644\n--- a/api/src/main/java/org/pmiops/workbench/interceptors/CloudTaskInterceptor.java\n+++ b/api/src/main/java/org/pmiops/workbench/interceptors/CloudTaskInterceptor.java\n\n@@ -22,6 +22,7 @@ import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;\n public class CloudTaskInterceptor extends HandlerInterceptorAdapter {\n   public static final String QUEUE_NAME_REQUEST_HEADER = \"X-AppEngine-QueueName\";\n   private static final String CLOUD_TASK_TAG = \"cloudTask\";\n+  // Keep queue name consistent with the name as in OfflineRdrExportController\n   public static final Set<String> VALID_QUEUE_NAME_SET =\n       new HashSet<>(Arrays.asList(\"rdrExportQueue\"));\n \n"}}, {"oid": "05b9529e15e732989d7634dec0c8bf17f114a7f5", "url": "https://github.com/all-of-us/workbench/commit/05b9529e15e732989d7634dec0c8bf17f114a7f5", "message": "add comments", "committedDate": "2020-04-03T22:05:24Z", "type": "commit"}]}