{"pr_number": 3741, "pr_title": "[risk=no][RW-4361] remove requireInstitutionalVerification feature flag from UI and config", "pr_createdAt": "2020-07-02T13:48:53Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3741", "timeline": [{"oid": "e0cfba9a942107b05d7e9ae242a06e588cbf3778", "url": "https://github.com/all-of-us/workbench/commit/e0cfba9a942107b05d7e9ae242a06e588cbf3778", "message": "rm feature flag", "committedDate": "2020-07-02T15:33:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTEwNzI3OQ==", "url": "https://github.com/all-of-us/workbench/pull/3741#discussion_r449107279", "bodyText": "IIRC this represents some older behavior.  It's not currently correct.", "author": "jmthibault79", "createdAt": "2020-07-02T15:46:49Z", "path": "api/src/main/java/org/pmiops/workbench/db/dao/UserServiceImpl.java", "diffHunk": "@@ -408,8 +408,8 @@ public DbUser createUser(\n   }\n \n   /**\n-   * Save updated dbUser object if requireInstitutionalVerification is enabled: Get the existing", "originalCommit": "e0cfba9a942107b05d7e9ae242a06e588cbf3778", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "dbf359fbe2d09db7c535b15d4f6ca5d4270970d5", "chunk": "diff --git a/api/src/main/java/org/pmiops/workbench/db/dao/UserServiceImpl.java b/api/src/main/java/org/pmiops/workbench/db/dao/UserServiceImpl.java\nindex 4cdf5a463..91c54fb02 100644\n--- a/api/src/main/java/org/pmiops/workbench/db/dao/UserServiceImpl.java\n+++ b/api/src/main/java/org/pmiops/workbench/db/dao/UserServiceImpl.java\n\n@@ -408,8 +408,8 @@ public class UserServiceImpl implements UserService, GaugeDataCollector {\n   }\n \n   /**\n-   * Save updated dbUser object and transform ObjectOptimisticLockingFailureException into\n-   * ConflictException\n+   * Save updated dbUser object if requireInstitutionalVerification is enabled: Get the existing\n+   * dbExistingVerifiedInstitutionalAffiliation and update it with Institution role and other text\n    *\n    * @param dbUser\n    * @return\n"}}, {"oid": "dbf359fbe2d09db7c535b15d4f6ca5d4270970d5", "url": "https://github.com/all-of-us/workbench/commit/dbf359fbe2d09db7c535b15d4f6ca5d4270970d5", "message": "rm from demographic-survey.spec", "committedDate": "2020-07-02T17:26:57Z", "type": "commit"}, {"oid": "dbfdff328316a7aa60e349874707247ef5389b4a", "url": "https://github.com/all-of-us/workbench/commit/dbfdff328316a7aa60e349874707247ef5389b4a", "message": "tmp rm account-creation", "committedDate": "2020-07-02T17:29:39Z", "type": "commit"}, {"oid": "7f815029bf5abace552bce7c675baabee71f461d", "url": "https://github.com/all-of-us/workbench/commit/7f815029bf5abace552bce7c675baabee71f461d", "message": "rm old-affiliation code and tests", "committedDate": "2020-07-02T17:29:43Z", "type": "commit"}, {"oid": "312eaf64d324f6fa0e8218999c0a365d66a6cc86", "url": "https://github.com/all-of-us/workbench/commit/312eaf64d324f6fa0e8218999c0a365d66a6cc86", "message": "rm from pages and tests", "committedDate": "2020-07-02T17:30:28Z", "type": "commit"}, {"oid": "4af144c9c13ed39c4e639a121c7f3f3490173ac5", "url": "https://github.com/all-of-us/workbench/commit/4af144c9c13ed39c4e639a121c7f3f3490173ac5", "message": "lint", "committedDate": "2020-07-02T17:30:31Z", "type": "commit"}, {"oid": "55571aa290d680aa73b4c9e0d57986847aa82557", "url": "https://github.com/all-of-us/workbench/commit/55571aa290d680aa73b4c9e0d57986847aa82557", "message": "rm from demographic", "committedDate": "2020-07-02T17:30:32Z", "type": "commit"}, {"oid": "9f97247a351fb07181ef7b9910c727c3e5881322", "url": "https://github.com/all-of-us/workbench/commit/9f97247a351fb07181ef7b9910c727c3e5881322", "message": "set to true", "committedDate": "2020-07-02T17:30:32Z", "type": "commit"}, {"oid": "7d49d5b381efdc3923b8aa4497c719a2e7304683", "url": "https://github.com/all-of-us/workbench/commit/7d49d5b381efdc3923b8aa4497c719a2e7304683", "message": "rm email", "committedDate": "2020-07-02T17:30:33Z", "type": "commit"}, {"oid": "89125ca542e721fefcec1df660f56dec88e56460", "url": "https://github.com/all-of-us/workbench/commit/89125ca542e721fefcec1df660f56dec88e56460", "message": "correct comment", "committedDate": "2020-07-02T17:30:34Z", "type": "commit"}, {"oid": "c3b135a2f8ae56df310440af79b325e1db9b57d2", "url": "https://github.com/all-of-us/workbench/commit/c3b135a2f8ae56df310440af79b325e1db9b57d2", "message": "rm feature flag", "committedDate": "2020-07-02T17:30:34Z", "type": "commit"}, {"oid": "c3b135a2f8ae56df310440af79b325e1db9b57d2", "url": "https://github.com/all-of-us/workbench/commit/c3b135a2f8ae56df310440af79b325e1db9b57d2", "message": "rm feature flag", "committedDate": "2020-07-02T17:30:34Z", "type": "forcePushed"}]}