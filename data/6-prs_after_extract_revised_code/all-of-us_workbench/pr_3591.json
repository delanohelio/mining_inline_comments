{"pr_number": 3591, "pr_title": "[risk=no] Enforce unique display name for Institutions", "pr_createdAt": "2020-05-18T17:47:43Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3591", "timeline": [{"oid": "84bbe8f807e2996caf2724842cc1d85b46f77468", "url": "https://github.com/all-of-us/workbench/commit/84bbe8f807e2996caf2724842cc1d85b46f77468", "message": "Enforce uniqueness of Institution Display Name", "committedDate": "2020-05-18T17:17:42Z", "type": "commit"}, {"oid": "279979fb99adbf9ffe136ea116efb9cbf94fddb4", "url": "https://github.com/all-of-us/workbench/commit/279979fb99adbf9ffe136ea116efb9cbf94fddb4", "message": "lint", "committedDate": "2020-05-18T17:24:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5ODU2NA==", "url": "https://github.com/all-of-us/workbench/pull/3591#discussion_r426798564", "bodyText": "\"ID\" is an older name for shortName.  Missed this in some long-ago renaming.", "author": "jmthibault79", "createdAt": "2020-05-18T17:53:37Z", "path": "api/src/test/java/org/pmiops/workbench/db/dao/InstitutionDaoTest.java", "diffHunk": "@@ -196,12 +205,19 @@ public void test_updateRemoveAllEmailDomains() {\n   }\n \n   @Test(expected = DataIntegrityViolationException.class)\n-  public void test_idRequired() {", "originalCommit": "279979fb99adbf9ffe136ea116efb9cbf94fddb4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4MjMzMg==", "url": "https://github.com/all-of-us/workbench/pull/3591#discussion_r426982332", "bodyText": "Are we using this anywhere?", "author": "NehaBroad", "createdAt": "2020-05-19T01:43:16Z", "path": "api/src/main/java/org/pmiops/workbench/db/dao/InstitutionDao.java", "diffHunk": "@@ -6,4 +6,6 @@\n \n public interface InstitutionDao extends CrudRepository<DbInstitution, Long> {\n   Optional<DbInstitution> findOneByShortName(final String shortName);\n+\n+  Optional<DbInstitution> findOneByDisplayName(final String displayName);", "originalCommit": "279979fb99adbf9ffe136ea116efb9cbf94fddb4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI3NjUxNA==", "url": "https://github.com/all-of-us/workbench/pull/3591#discussion_r427276514", "bodyText": "not yet - my update to PopulateOpsUserAffiliations will", "author": "jmthibault79", "createdAt": "2020-05-19T12:51:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4MjMzMg=="}], "type": "inlineReview", "revised_code": null}]}