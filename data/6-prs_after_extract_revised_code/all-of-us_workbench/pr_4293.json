{"pr_number": 4293, "pr_title": "[RW-5687][risk=moderate]UI: Create 4 \"fake\" concept sets to support 4 fitbit tables", "pr_createdAt": "2020-11-16T04:34:26Z", "pr_url": "https://github.com/all-of-us/workbench/pull/4293", "timeline": [{"oid": "ad2e6da6856bff36ef0a4d48f3bca9cff0fbc145", "url": "https://github.com/all-of-us/workbench/commit/ad2e6da6856bff36ef0a4d48f3bca9cff0fbc145", "message": "UI Changes for Fitbit", "committedDate": "2020-11-16T04:33:00Z", "type": "commit"}, {"oid": "5f7b6248369e8752b61904012999aee2b653b4dd", "url": "https://github.com/all-of-us/workbench/commit/5f7b6248369e8752b61904012999aee2b653b4dd", "message": "Fix UI Test", "committedDate": "2020-11-16T04:52:05Z", "type": "commit"}, {"oid": "ce03bae9f1fd6d7fec8469b3b615cae1fbc5644b", "url": "https://github.com/all-of-us/workbench/commit/ce03bae9f1fd6d7fec8469b3b615cae1fbc5644b", "message": "Fix Test", "committedDate": "2020-11-16T05:10:47Z", "type": "commit"}, {"oid": "9934aedbd84a86820fd80e9c5c629bcf09cdd45d", "url": "https://github.com/all-of-us/workbench/commit/9934aedbd84a86820fd80e9c5c629bcf09cdd45d", "message": "Fix Big query test", "committedDate": "2020-11-16T05:25:56Z", "type": "commit"}, {"oid": "6bc659d9292de4ae424a64905cf99453362998c2", "url": "https://github.com/all-of-us/workbench/commit/6bc659d9292de4ae424a64905cf99453362998c2", "message": "Fix test and workspace Clone issue", "committedDate": "2020-11-16T06:09:22Z", "type": "commit"}, {"oid": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "url": "https://github.com/all-of-us/workbench/commit/31ed6d3b1f54ccefc0240a676a6b453a819814b6", "message": "Add comments and clean up", "committedDate": "2020-11-16T06:43:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5NjA3NQ==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524296075", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n          \n          \n            \n                                ImmutableList.of(PrePackagedConceptSetEnum.NONE)))", "author": "freemabd", "createdAt": "2020-11-16T14:13:28Z", "path": "api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java", "diffHunk": "@@ -373,7 +373,7 @@ public void testGenerateCodePython() {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.CONDITION),\n                     false,\n-                    PrePackagedConceptSetEnum.NONE))\n+                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\nindex fdf4ad6af..c9d64ade8 100644\n--- a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n+++ b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n\n@@ -373,7 +373,7 @@ public class DataSetControllerBQTest extends BigQueryBaseTest {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.CONDITION),\n                     false,\n-                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n+                    ImmutableList.of(PrePackagedConceptSetEnum.NONE)))\n             .getBody()\n             .getCode();\n     assertAndExecutePythonQuery(code, 1, Domain.CONDITION);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5NjM2NQ==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524296365", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n          \n          \n            \n                                ImmutableList.of(PrePackagedConceptSetEnum.NONE)))", "author": "freemabd", "createdAt": "2020-11-16T14:13:52Z", "path": "api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java", "diffHunk": "@@ -399,7 +399,7 @@ public void testGenerateCodeR() {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.CONDITION),\n                     false,\n-                    PrePackagedConceptSetEnum.NONE))\n+                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\nindex fdf4ad6af..c9d64ade8 100644\n--- a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n+++ b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n\n@@ -399,7 +399,7 @@ public class DataSetControllerBQTest extends BigQueryBaseTest {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.CONDITION),\n                     false,\n-                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n+                    ImmutableList.of(PrePackagedConceptSetEnum.NONE)))\n             .getBody()\n             .getCode();\n     assertThat(code).contains(expected);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5NjUzNA==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524296534", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n          \n          \n            \n                                ImmutableList.of(PrePackagedConceptSetEnum.NONE)))", "author": "freemabd", "createdAt": "2020-11-16T14:14:08Z", "path": "api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java", "diffHunk": "@@ -435,7 +435,7 @@ public void testGenerateCodeTwoConceptSets() {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.CONDITION, Domain.PROCEDURE),\n                     false,\n-                    PrePackagedConceptSetEnum.NONE))\n+                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\nindex fdf4ad6af..c9d64ade8 100644\n--- a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n+++ b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n\n@@ -435,7 +435,7 @@ public class DataSetControllerBQTest extends BigQueryBaseTest {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.CONDITION, Domain.PROCEDURE),\n                     false,\n-                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n+                    ImmutableList.of(PrePackagedConceptSetEnum.NONE)))\n             .getBody()\n             .getCode();\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5NjczNQ==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524296735", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n          \n          \n            \n                                ImmutableList.of(PrePackagedConceptSetEnum.NONE)))", "author": "freemabd", "createdAt": "2020-11-16T14:14:23Z", "path": "api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java", "diffHunk": "@@ -455,7 +455,7 @@ public void testGenerateCodeTwoCohorts() {\n                     ImmutableList.of(dbCohort1, dbCohort2),\n                     ImmutableList.of(Domain.CONDITION),\n                     false,\n-                    PrePackagedConceptSetEnum.NONE))\n+                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\nindex fdf4ad6af..c9d64ade8 100644\n--- a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n+++ b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n\n@@ -455,7 +455,7 @@ public class DataSetControllerBQTest extends BigQueryBaseTest {\n                     ImmutableList.of(dbCohort1, dbCohort2),\n                     ImmutableList.of(Domain.CONDITION),\n                     false,\n-                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n+                    ImmutableList.of(PrePackagedConceptSetEnum.NONE)))\n             .getBody()\n             .getCode();\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5Njg4OA==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524296888", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n          \n          \n            \n                                ImmutableList.of(PrePackagedConceptSetEnum.NONE)))", "author": "freemabd", "createdAt": "2020-11-16T14:14:33Z", "path": "api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java", "diffHunk": "@@ -475,7 +475,7 @@ public void testGenerateCodeAllParticipants() {\n                     ImmutableList.of(),\n                     ImmutableList.of(Domain.CONDITION),\n                     true,\n-                    PrePackagedConceptSetEnum.NONE))\n+                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\nindex fdf4ad6af..c9d64ade8 100644\n--- a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n+++ b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n\n@@ -475,7 +475,7 @@ public class DataSetControllerBQTest extends BigQueryBaseTest {\n                     ImmutableList.of(),\n                     ImmutableList.of(Domain.CONDITION),\n                     true,\n-                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n+                    ImmutableList.of(PrePackagedConceptSetEnum.NONE)))\n             .getBody()\n             .getCode();\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5Njk3Nw==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524296977", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Arrays.asList(PrePackagedConceptSetEnum.PERSON)))\n          \n          \n            \n                                ImmutableList.of(PrePackagedConceptSetEnum.PERSON)))", "author": "freemabd", "createdAt": "2020-11-16T14:14:41Z", "path": "api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java", "diffHunk": "@@ -495,7 +495,7 @@ public void testGenerateCodePrepackagedCohortDemographics() {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.PERSON),\n                     false,\n-                    PrePackagedConceptSetEnum.PERSON))\n+                    Arrays.asList(PrePackagedConceptSetEnum.PERSON)))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\nindex fdf4ad6af..c9d64ade8 100644\n--- a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n+++ b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n\n@@ -495,7 +495,7 @@ public class DataSetControllerBQTest extends BigQueryBaseTest {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.PERSON),\n                     false,\n-                    Arrays.asList(PrePackagedConceptSetEnum.PERSON)))\n+                    ImmutableList.of(PrePackagedConceptSetEnum.PERSON)))\n             .getBody()\n             .getCode();\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5NzA3Mw==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524297073", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Arrays.asList(PrePackagedConceptSetEnum.SURVEY)))\n          \n          \n            \n                                ImmutableList.of(PrePackagedConceptSetEnum.SURVEY)))", "author": "freemabd", "createdAt": "2020-11-16T14:14:49Z", "path": "api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java", "diffHunk": "@@ -515,7 +515,7 @@ public void testGenerateCodePrepackagedCohortSurveys() {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.SURVEY),\n                     false,\n-                    PrePackagedConceptSetEnum.SURVEY))\n+                    Arrays.asList(PrePackagedConceptSetEnum.SURVEY)))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\nindex fdf4ad6af..c9d64ade8 100644\n--- a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n+++ b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n\n@@ -515,7 +515,7 @@ public class DataSetControllerBQTest extends BigQueryBaseTest {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.SURVEY),\n                     false,\n-                    Arrays.asList(PrePackagedConceptSetEnum.SURVEY)))\n+                    ImmutableList.of(PrePackagedConceptSetEnum.SURVEY)))\n             .getBody()\n             .getCode();\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5NzIwNA==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524297204", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n          \n          \n            \n                                ImmutableList.of(PrePackagedConceptSetEnum.NONE)))", "author": "freemabd", "createdAt": "2020-11-16T14:14:58Z", "path": "api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java", "diffHunk": "@@ -536,13 +536,35 @@ public void testGenerateCodePrepackagedConceptSetFitBit() {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.FITBIT_HEART_RATE_LEVEL),\n                     false,\n-                    PrePackagedConceptSetEnum.NONE))\n+                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\nindex fdf4ad6af..c9d64ade8 100644\n--- a/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n+++ b/api/src/bigquerytest/java/org/pmiops/workbench/api/DataSetControllerBQTest.java\n\n@@ -536,7 +536,7 @@ public class DataSetControllerBQTest extends BigQueryBaseTest {\n                     ImmutableList.of(dbCohort1),\n                     ImmutableList.of(Domain.FITBIT_HEART_RATE_LEVEL),\n                     false,\n-                    Arrays.asList(PrePackagedConceptSetEnum.NONE)))\n+                    ImmutableList.of(PrePackagedConceptSetEnum.NONE)))\n             .getBody()\n             .getCode();\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5ODIzNg==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524298236", "bodyText": "I thought PrePackagedConceptSetEnum.BOTH what going away?", "author": "freemabd", "createdAt": "2020-11-16T14:16:27Z", "path": "api/src/main/java/org/pmiops/workbench/dataset/DataSetServiceImpl.java", "diffHunk": "@@ -428,19 +428,21 @@ public QueryJobConfiguration previewBigQueryJobConfig(DataSetPreviewRequest requ\n \n     // If pre packaged all survey concept set is selected create a temp concept set with concept ids\n     // of all survey questions\n-    if (CONCEPT_SETS_NEEDING_PREPACKAGED_SURVEY.contains(prePackagedConceptSet)) {\n+    if (prePackagedConceptSet.contains(SURVEY)\n+        || prePackagedConceptSet.contains(PrePackagedConceptSetEnum.BOTH)) {", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQyNjgzMg==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524426832", "bodyText": "As of this PR i am still keeping it just for backward compatibility, For all new Dataset/update BOTH will be translated to SURVEY + PERSON rather than both", "author": "NehaBroad", "createdAt": "2020-11-16T17:04:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5ODIzNg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5OTEwMQ==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524299101", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE));\n          \n          \n            \n                    .prePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE));", "author": "freemabd", "createdAt": "2020-11-16T14:17:42Z", "path": "api/src/test/java/org/pmiops/workbench/api/DataSetControllerTest.java", "diffHunk": "@@ -457,7 +458,7 @@ private DataSetRequest buildEmptyDataSetRequest() {\n         .cohortIds(new ArrayList<>())\n         .domainValuePairs(new ArrayList<>())\n         .name(\"blah\")\n-        .prePackagedConceptSet(PrePackagedConceptSetEnum.NONE);\n+        .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE));", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/test/java/org/pmiops/workbench/api/DataSetControllerTest.java b/api/src/test/java/org/pmiops/workbench/api/DataSetControllerTest.java\nindex 26252230a..363857d93 100644\n--- a/api/src/test/java/org/pmiops/workbench/api/DataSetControllerTest.java\n+++ b/api/src/test/java/org/pmiops/workbench/api/DataSetControllerTest.java\n\n@@ -458,7 +457,7 @@ public class DataSetControllerTest {\n         .cohortIds(new ArrayList<>())\n         .domainValuePairs(new ArrayList<>())\n         .name(\"blah\")\n-        .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE));\n+        .prePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE));\n   }\n \n   private void stubGetWorkspace(String ns, String name) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5OTMxMQ==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524299311", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE))\n          \n          \n            \n                                .prePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE))", "author": "freemabd", "createdAt": "2020-11-16T14:18:00Z", "path": "api/src/test/java/org/pmiops/workbench/api/WorkspacesControllerTest.java", "diffHunk": "@@ -3194,7 +3195,7 @@ public void getWorkspaceResources() {\n                 workspace.getNamespace(),\n                 workspace.getId(),\n                 new DataSetRequest()\n-                    .prePackagedConceptSet(PrePackagedConceptSetEnum.NONE)\n+                    .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/test/java/org/pmiops/workbench/api/WorkspacesControllerTest.java b/api/src/test/java/org/pmiops/workbench/api/WorkspacesControllerTest.java\nindex 5421a52f3..490974239 100644\n--- a/api/src/test/java/org/pmiops/workbench/api/WorkspacesControllerTest.java\n+++ b/api/src/test/java/org/pmiops/workbench/api/WorkspacesControllerTest.java\n\n@@ -3195,7 +3195,7 @@ public class WorkspacesControllerTest {\n                 workspace.getNamespace(),\n                 workspace.getId(),\n                 new DataSetRequest()\n-                    .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE))\n+                    .prePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE))\n                     .addConceptSetIdsItem(conceptSet.getId())\n                     .addCohortIdsItem(cohort.getId())\n                     .name(\"dataset\")\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI5OTY4OQ==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524299689", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                request.setPrePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE));\n          \n          \n            \n                request.setPrePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE));", "author": "freemabd", "createdAt": "2020-11-16T14:18:29Z", "path": "api/src/test/java/org/pmiops/workbench/dataset/mapper/DataSetMapperTest.java", "diffHunk": "@@ -184,14 +188,15 @@ public void testDataSetRequestToDbWithNullSourceDB() {\n     request.setCohortIds(cohortIds);\n     request.setConceptSetIds(conceptIds);\n     request.setIncludesAllParticipants(false);\n-    request.setPrePackagedConceptSet(PrePackagedConceptSetEnum.NONE);\n+    request.setPrePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE));", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/test/java/org/pmiops/workbench/dataset/mapper/DataSetMapperTest.java b/api/src/test/java/org/pmiops/workbench/dataset/mapper/DataSetMapperTest.java\nindex 782249a8f..952572dc6 100644\n--- a/api/src/test/java/org/pmiops/workbench/dataset/mapper/DataSetMapperTest.java\n+++ b/api/src/test/java/org/pmiops/workbench/dataset/mapper/DataSetMapperTest.java\n\n@@ -188,7 +188,7 @@ public class DataSetMapperTest {\n     request.setCohortIds(cohortIds);\n     request.setConceptSetIds(conceptIds);\n     request.setIncludesAllParticipants(false);\n-    request.setPrePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE));\n+    request.setPrePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE));\n     request.setDomainValuePairs(ImmutableList.of(domainValuePair));\n     final DbDataset toDataSet = dataSetMapper.dataSetRequestToDb(request, dbDataset, CLOCK);\n     assertThat(toDataSet.getName()).isEqualTo(\"New Name\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMwMDAyMg==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524300022", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                invalidRequest.setPrePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE));\n          \n          \n            \n                invalidRequest.setPrePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE));", "author": "freemabd", "createdAt": "2020-11-16T14:18:52Z", "path": "api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java", "diffHunk": "@@ -179,7 +180,7 @@ private DbConceptSet buildConceptSet(long conceptSetId, Domain domain, Set<Long>\n   private static DataSetRequest buildEmptyRequest() {\n     final DataSetRequest invalidRequest = new DataSetRequest();\n     invalidRequest.setDomainValuePairs(Collections.emptyList());\n-    invalidRequest.setPrePackagedConceptSet(PrePackagedConceptSetEnum.NONE);\n+    invalidRequest.setPrePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE));", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java b/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java\nindex e016fac3d..c17b2dd37 100644\n--- a/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java\n+++ b/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java\n\n@@ -180,7 +179,7 @@ public class DataSetServiceTest {\n   private static DataSetRequest buildEmptyRequest() {\n     final DataSetRequest invalidRequest = new DataSetRequest();\n     invalidRequest.setDomainValuePairs(Collections.emptyList());\n-    invalidRequest.setPrePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE));\n+    invalidRequest.setPrePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE));\n     return invalidRequest;\n   }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMwMDIyOQ==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524300229", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE))\n          \n          \n            \n                        .prePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE))", "author": "freemabd", "createdAt": "2020-11-16T14:19:07Z", "path": "api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java", "diffHunk": "@@ -345,7 +346,7 @@ public void testDomainToBigQueryConfig() {\n             .cohortIds(Collections.emptyList())\n             .domainValuePairs(ImmutableList.of(new DomainValuePair()))\n             .name(\"blah\")\n-            .prePackagedConceptSet(PrePackagedConceptSetEnum.NONE)\n+            .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java b/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java\nindex e016fac3d..c17b2dd37 100644\n--- a/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java\n+++ b/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java\n\n@@ -346,7 +345,7 @@ public class DataSetServiceTest {\n             .cohortIds(Collections.emptyList())\n             .domainValuePairs(ImmutableList.of(new DomainValuePair()))\n             .name(\"blah\")\n-            .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.NONE))\n+            .prePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.NONE))\n             .cohortIds(COHORT_IDS)\n             .domainValuePairs(\n                 ImmutableList.of(new DomainValuePair().domain(Domain.PERSON).value(\"PERSON_ID\")));\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMwMDQ2NA==", "url": "https://github.com/all-of-us/workbench/pull/4293#discussion_r524300464", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.FITBIT_HEART_RATE_LEVEL))\n          \n          \n            \n                        .prePackagedConceptSet(ImmutableList.of(PrePackagedConceptSetEnum.FITBIT_HEART_RATE_LEVEL))", "author": "freemabd", "createdAt": "2020-11-16T14:19:23Z", "path": "api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java", "diffHunk": "@@ -384,7 +385,7 @@ public void testFITBITDomainToBigQueryConfig() {\n             .cohortIds(Collections.emptyList())\n             .domainValuePairs(ImmutableList.of(new DomainValuePair()))\n             .name(\"blah\")\n-            .prePackagedConceptSet(PrePackagedConceptSetEnum.FITBIT_HEART_RATE_LEVEL)\n+            .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.FITBIT_HEART_RATE_LEVEL))", "originalCommit": "31ed6d3b1f54ccefc0240a676a6b453a819814b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "chunk": "diff --git a/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java b/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java\nindex e016fac3d..c17b2dd37 100644\n--- a/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java\n+++ b/api/src/test/java/org/pmiops/workbench/db/dao/DataSetServiceTest.java\n\n@@ -385,7 +384,8 @@ public class DataSetServiceTest {\n             .cohortIds(Collections.emptyList())\n             .domainValuePairs(ImmutableList.of(new DomainValuePair()))\n             .name(\"blah\")\n-            .prePackagedConceptSet(Arrays.asList(PrePackagedConceptSetEnum.FITBIT_HEART_RATE_LEVEL))\n+            .prePackagedConceptSet(\n+                ImmutableList.of(PrePackagedConceptSetEnum.FITBIT_HEART_RATE_LEVEL))\n             .cohortIds(Collections.emptyList())\n             .domainValuePairs(\n                 ImmutableList.of(\n"}}, {"oid": "62d1863a079cf9bd0411250efc2ea4c44e30e041", "url": "https://github.com/all-of-us/workbench/commit/62d1863a079cf9bd0411250efc2ea4c44e30e041", "message": "PR Comments use immutableList", "committedDate": "2020-11-16T17:12:37Z", "type": "commit"}, {"oid": "9ed73e587127e33c26be757dc494d61dfbd68d58", "url": "https://github.com/all-of-us/workbench/commit/9ed73e587127e33c26be757dc494d61dfbd68d58", "message": "UI Changes for Fitbit", "committedDate": "2020-11-16T18:17:29Z", "type": "commit"}, {"oid": "77af3208a51983fee18e1702f538e29b86f0c60d", "url": "https://github.com/all-of-us/workbench/commit/77af3208a51983fee18e1702f538e29b86f0c60d", "message": "Fix UI Test", "committedDate": "2020-11-16T18:17:29Z", "type": "commit"}, {"oid": "f0db7cea034cad1184356db07cf120fd83eb5c13", "url": "https://github.com/all-of-us/workbench/commit/f0db7cea034cad1184356db07cf120fd83eb5c13", "message": "Fix Test", "committedDate": "2020-11-16T18:17:29Z", "type": "commit"}, {"oid": "b19eff6818cc2c8ad1318d1e5a127950102f80ad", "url": "https://github.com/all-of-us/workbench/commit/b19eff6818cc2c8ad1318d1e5a127950102f80ad", "message": "Fix Big query test", "committedDate": "2020-11-16T18:17:29Z", "type": "commit"}, {"oid": "2c4f03264d8a1fb23f7349e63150e568d25af0ce", "url": "https://github.com/all-of-us/workbench/commit/2c4f03264d8a1fb23f7349e63150e568d25af0ce", "message": "Fix test and workspace Clone issue", "committedDate": "2020-11-16T18:17:29Z", "type": "commit"}, {"oid": "650c25edbdbc7beee1da57b19656f6e3662b82d9", "url": "https://github.com/all-of-us/workbench/commit/650c25edbdbc7beee1da57b19656f6e3662b82d9", "message": "Add comments and clean up", "committedDate": "2020-11-16T18:17:29Z", "type": "commit"}, {"oid": "037e5d4bed3c7a88eb9e28a0d5f6cc258aca228d", "url": "https://github.com/all-of-us/workbench/commit/037e5d4bed3c7a88eb9e28a0d5f6cc258aca228d", "message": "adding fitbit data flag", "committedDate": "2020-11-16T18:17:29Z", "type": "commit"}, {"oid": "c116ef49dea7d8f8ed6a9d1f1f1ece9e10afb5de", "url": "https://github.com/all-of-us/workbench/commit/c116ef49dea7d8f8ed6a9d1f1f1ece9e10afb5de", "message": "PR Comments use immutableList", "committedDate": "2020-11-16T18:17:29Z", "type": "commit"}, {"oid": "c116ef49dea7d8f8ed6a9d1f1f1ece9e10afb5de", "url": "https://github.com/all-of-us/workbench/commit/c116ef49dea7d8f8ed6a9d1f1f1ece9e10afb5de", "message": "PR Comments use immutableList", "committedDate": "2020-11-16T18:17:29Z", "type": "forcePushed"}, {"oid": "844c41f9781f99843c17bbc77a92d445ffe74e1c", "url": "https://github.com/all-of-us/workbench/commit/844c41f9781f99843c17bbc77a92d445ffe74e1c", "message": "adding fitbit data flag", "committedDate": "2020-11-16T18:19:13Z", "type": "commit"}, {"oid": "9cfb3def93bf2948b1e32d6d81a92c91ddba88f4", "url": "https://github.com/all-of-us/workbench/commit/9cfb3def93bf2948b1e32d6d81a92c91ddba88f4", "message": "temporarily disable failing dataset tests", "committedDate": "2020-11-16T18:53:45Z", "type": "commit"}, {"oid": "069fb3a8c58e0218ef496f74b33e9fd3c88684c2", "url": "https://github.com/all-of-us/workbench/commit/069fb3a8c58e0218ef496f74b33e9fd3c88684c2", "message": "Merge branch 'nsaxena/UIFitbitPrePackage' of https://github.com/all-of-us/workbench into nsaxena/UIFitbitPrePackage", "committedDate": "2020-11-16T18:54:30Z", "type": "commit"}, {"oid": "92d75df56bc2e4af23a00ee3f2cf5f484f57a122", "url": "https://github.com/all-of-us/workbench/commit/92d75df56bc2e4af23a00ee3f2cf5f484f57a122", "message": "temporarily disable failing concept test", "committedDate": "2020-11-16T19:35:15Z", "type": "commit"}, {"oid": "76d7d7b11bbc9c6e571009c93a0f03b28467cccf", "url": "https://github.com/all-of-us/workbench/commit/76d7d7b11bbc9c6e571009c93a0f03b28467cccf", "message": "temporarily disable all dataset and concept tests", "committedDate": "2020-11-16T20:11:29Z", "type": "commit"}]}