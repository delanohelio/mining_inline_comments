{"pr_number": 2061, "pr_title": "Add daily report entries for AtB scenarios", "pr_createdAt": "2020-09-26T19:12:05Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/2061", "timeline": [{"oid": "635f76b823dead8ae60795f8699d1b6f6fb9512e", "url": "https://github.com/MegaMek/mekhq/commit/635f76b823dead8ae60795f8699d1b6f6fb9512e", "message": "Add daily report entries for AtB scenarios", "committedDate": "2020-09-26T19:10:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ4NjUzMg==", "url": "https://github.com/MegaMek/mekhq/pull/2061#discussion_r495486532", "bodyText": "Localize", "author": "Windchild292", "createdAt": "2020-09-26T19:14:09Z", "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -937,6 +937,10 @@ public void addScenario(Scenario s, Mission m) {\n         }\n         m.addScenario(s);\n         scenarios.put(id, s);\n+\n+        addReport(String.format(\"New scenario '%s' will occur on %s.\",", "originalCommit": "635f76b823dead8ae60795f8699d1b6f6fb9512e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "44aa35dbbbe626aaae466ddaff3cb3f3d820f1f4", "chunk": "diff --git a/MekHQ/src/mekhq/campaign/Campaign.java b/MekHQ/src/mekhq/campaign/Campaign.java\nindex 9d0524995..13a4b99b0 100644\n--- a/MekHQ/src/mekhq/campaign/Campaign.java\n+++ b/MekHQ/src/mekhq/campaign/Campaign.java\n\n@@ -938,7 +939,8 @@ public class Campaign implements Serializable, ITechManager {\n         m.addScenario(s);\n         scenarios.put(id, s);\n \n-        addReport(String.format(\"New scenario '%s' will occur on %s.\",\n+        addReport(MessageFormat.format(\n+            resources.getString(\"newAtBMission.format\"),\n             s.getName(), MekHQ.getMekHQOptions().getDisplayFormattedDate(s.getDate())));\n \n         MekHQ.triggerEvent(new ScenarioNewEvent(s));\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ4NjU1MQ==", "url": "https://github.com/MegaMek/mekhq/pull/2061#discussion_r495486551", "bodyText": "Localize", "author": "Windchild292", "createdAt": "2020-09-26T19:14:22Z", "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -3244,8 +3248,16 @@ private void processNewDayATBScenarios() {\n                                     u.setScenarioId(s.getId());\n                                 }\n                             }\n+                            addReport(String.format(\"Scenario '%s' is today, %s has been deployed!\",", "originalCommit": "635f76b823dead8ae60795f8699d1b6f6fb9512e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "44aa35dbbbe626aaae466ddaff3cb3f3d820f1f4", "chunk": "diff --git a/MekHQ/src/mekhq/campaign/Campaign.java b/MekHQ/src/mekhq/campaign/Campaign.java\nindex 9d0524995..13a4b99b0 100644\n--- a/MekHQ/src/mekhq/campaign/Campaign.java\n+++ b/MekHQ/src/mekhq/campaign/Campaign.java\n\n@@ -3248,16 +3250,18 @@ public class Campaign implements Serializable, ITechManager {\n                                     u.setScenarioId(s.getId());\n                                 }\n                             }\n-                            addReport(String.format(\"Scenario '%s' is today, %s has been deployed!\",\n+\n+                            addReport(MessageFormat.format(\n+                                resources.getString(\"atbMissionTodayWithForce.format\"),\n                                 s.getName(), forceIds.get(forceId).getName()));\n                             MekHQ.triggerEvent(new DeploymentChangedEvent(forceIds.get(forceId), s));\n                         } else {\n-                            addReport(String.format(\"Scenario '%s' is today, deploy a force from your TOE!\",\n-                                s.getName()));\n+                            addReport(MessageFormat.format(\n+                                resources.getString(\"atbMissionToday.format\"), s.getName()));\n                         }\n                     } else {\n-                        addReport(String.format(\"Scenario '%s' is today, deploy a force from your TOE!\",\n-                            s.getName()));\n+                        addReport(MessageFormat.format(\n+                            resources.getString(\"atbMissionToday.format\"), s.getName()));\n                     }\n                 }\n             }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ4NjU1Ng==", "url": "https://github.com/MegaMek/mekhq/pull/2061#discussion_r495486556", "bodyText": "Localize", "author": "Windchild292", "createdAt": "2020-09-26T19:14:26Z", "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -3244,8 +3248,16 @@ private void processNewDayATBScenarios() {\n                                     u.setScenarioId(s.getId());\n                                 }\n                             }\n+                            addReport(String.format(\"Scenario '%s' is today, %s has been deployed!\",\n+                                s.getName(), forceIds.get(forceId).getName()));\n                             MekHQ.triggerEvent(new DeploymentChangedEvent(forceIds.get(forceId), s));\n+                        } else {\n+                            addReport(String.format(\"Scenario '%s' is today, deploy a force from your TOE!\",", "originalCommit": "635f76b823dead8ae60795f8699d1b6f6fb9512e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "44aa35dbbbe626aaae466ddaff3cb3f3d820f1f4", "chunk": "diff --git a/MekHQ/src/mekhq/campaign/Campaign.java b/MekHQ/src/mekhq/campaign/Campaign.java\nindex 9d0524995..13a4b99b0 100644\n--- a/MekHQ/src/mekhq/campaign/Campaign.java\n+++ b/MekHQ/src/mekhq/campaign/Campaign.java\n\n@@ -3248,16 +3250,18 @@ public class Campaign implements Serializable, ITechManager {\n                                     u.setScenarioId(s.getId());\n                                 }\n                             }\n-                            addReport(String.format(\"Scenario '%s' is today, %s has been deployed!\",\n+\n+                            addReport(MessageFormat.format(\n+                                resources.getString(\"atbMissionTodayWithForce.format\"),\n                                 s.getName(), forceIds.get(forceId).getName()));\n                             MekHQ.triggerEvent(new DeploymentChangedEvent(forceIds.get(forceId), s));\n                         } else {\n-                            addReport(String.format(\"Scenario '%s' is today, deploy a force from your TOE!\",\n-                                s.getName()));\n+                            addReport(MessageFormat.format(\n+                                resources.getString(\"atbMissionToday.format\"), s.getName()));\n                         }\n                     } else {\n-                        addReport(String.format(\"Scenario '%s' is today, deploy a force from your TOE!\",\n-                            s.getName()));\n+                        addReport(MessageFormat.format(\n+                            resources.getString(\"atbMissionToday.format\"), s.getName()));\n                     }\n                 }\n             }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ4NjU2Mw==", "url": "https://github.com/MegaMek/mekhq/pull/2061#discussion_r495486563", "bodyText": "Localize", "author": "Windchild292", "createdAt": "2020-09-26T19:14:32Z", "path": "MekHQ/src/mekhq/campaign/Campaign.java", "diffHunk": "@@ -3244,8 +3248,16 @@ private void processNewDayATBScenarios() {\n                                     u.setScenarioId(s.getId());\n                                 }\n                             }\n+                            addReport(String.format(\"Scenario '%s' is today, %s has been deployed!\",\n+                                s.getName(), forceIds.get(forceId).getName()));\n                             MekHQ.triggerEvent(new DeploymentChangedEvent(forceIds.get(forceId), s));\n+                        } else {\n+                            addReport(String.format(\"Scenario '%s' is today, deploy a force from your TOE!\",\n+                                s.getName()));\n                         }\n+                    } else {\n+                        addReport(String.format(\"Scenario '%s' is today, deploy a force from your TOE!\",", "originalCommit": "635f76b823dead8ae60795f8699d1b6f6fb9512e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "44aa35dbbbe626aaae466ddaff3cb3f3d820f1f4", "chunk": "diff --git a/MekHQ/src/mekhq/campaign/Campaign.java b/MekHQ/src/mekhq/campaign/Campaign.java\nindex 9d0524995..13a4b99b0 100644\n--- a/MekHQ/src/mekhq/campaign/Campaign.java\n+++ b/MekHQ/src/mekhq/campaign/Campaign.java\n\n@@ -3248,16 +3250,18 @@ public class Campaign implements Serializable, ITechManager {\n                                     u.setScenarioId(s.getId());\n                                 }\n                             }\n-                            addReport(String.format(\"Scenario '%s' is today, %s has been deployed!\",\n+\n+                            addReport(MessageFormat.format(\n+                                resources.getString(\"atbMissionTodayWithForce.format\"),\n                                 s.getName(), forceIds.get(forceId).getName()));\n                             MekHQ.triggerEvent(new DeploymentChangedEvent(forceIds.get(forceId), s));\n                         } else {\n-                            addReport(String.format(\"Scenario '%s' is today, deploy a force from your TOE!\",\n-                                s.getName()));\n+                            addReport(MessageFormat.format(\n+                                resources.getString(\"atbMissionToday.format\"), s.getName()));\n                         }\n                     } else {\n-                        addReport(String.format(\"Scenario '%s' is today, deploy a force from your TOE!\",\n-                            s.getName()));\n+                        addReport(MessageFormat.format(\n+                            resources.getString(\"atbMissionToday.format\"), s.getName()));\n                     }\n                 }\n             }\n"}}, {"oid": "44aa35dbbbe626aaae466ddaff3cb3f3d820f1f4", "url": "https://github.com/MegaMek/mekhq/commit/44aa35dbbbe626aaae466ddaff3cb3f3d820f1f4", "message": "Localize messages", "committedDate": "2020-09-26T19:52:04Z", "type": "commit"}, {"oid": "7d477e39b040f0ff2171730fba19a93ffe8b3ee9", "url": "https://github.com/MegaMek/mekhq/commit/7d477e39b040f0ff2171730fba19a93ffe8b3ee9", "message": "Fix quoting issue with MessageFormat.format", "committedDate": "2020-09-27T18:31:44Z", "type": "commit"}]}