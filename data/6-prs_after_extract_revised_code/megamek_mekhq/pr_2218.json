{"pr_number": 2218, "pr_title": "Issue #2217 #2219: Cannot save Campaign with Refits and cannot start new Refits", "pr_createdAt": "2020-11-09T21:14:34Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/2218", "timeline": [{"oid": "2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1", "url": "https://github.com/MegaMek/mekhq/commit/2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1", "message": "Ensure we set Campaign on refits, fixing #2217", "committedDate": "2020-11-09T21:12:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY0NjA1Mw==", "url": "https://github.com/MegaMek/mekhq/pull/2218#discussion_r520646053", "bodyText": "getCampaign is correct here as we just set campaign to be this value.", "author": "Windchild292", "createdAt": "2020-11-10T15:21:52Z", "path": "MekHQ/src/mekhq/campaign/parts/Refit.java", "diffHunk": "@@ -2101,12 +2101,12 @@ private static void processArmorSupplies(Refit retVal, Node wn, Version version)\n     }\n \n     public void reCalc() {\n-        setCampaign(getCampaign());\n+        setCampaign(oldUnit.getCampaign());\n         for (Part p : shoppingList) {\n-            p.setCampaign(getCampaign());\n+            p.setCampaign(oldUnit.getCampaign());", "originalCommit": "2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY0NjE4OQ==", "url": "https://github.com/MegaMek/mekhq/pull/2218#discussion_r520646189", "bodyText": "Same here", "author": "Windchild292", "createdAt": "2020-11-10T15:22:02Z", "path": "MekHQ/src/mekhq/campaign/parts/Refit.java", "diffHunk": "@@ -2101,12 +2101,12 @@ private static void processArmorSupplies(Refit retVal, Node wn, Version version)\n     }\n \n     public void reCalc() {\n-        setCampaign(getCampaign());\n+        setCampaign(oldUnit.getCampaign());\n         for (Part p : shoppingList) {\n-            p.setCampaign(getCampaign());\n+            p.setCampaign(oldUnit.getCampaign());\n         }\n         if (null != newArmorSupplies) {\n-            newArmorSupplies.setCampaign(getCampaign());\n+            newArmorSupplies.setCampaign(oldUnit.getCampaign());", "originalCommit": "2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY1OTQ2NQ==", "url": "https://github.com/MegaMek/mekhq/pull/2218#discussion_r520659465", "bodyText": "With the addition of setCampaign in fixReferences this is not necessary at this time, although I don't know if it may come up in future.", "author": "Windchild292", "createdAt": "2020-11-10T15:38:41Z", "path": "MekHQ/src/mekhq/campaign/parts/Refit.java", "diffHunk": "@@ -2101,12 +2101,12 @@ private static void processArmorSupplies(Refit retVal, Node wn, Version version)\n     }\n \n     public void reCalc() {\n-        setCampaign(getCampaign());\n+        setCampaign(oldUnit.getCampaign());", "originalCommit": "2d696abcf85fd5c1cc88aad321a8e1cd97bd0cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}