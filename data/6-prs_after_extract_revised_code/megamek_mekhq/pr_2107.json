{"pr_number": 2107, "pr_title": "Icon Rework Phase 2: MekHQ Static Directory Manager", "pr_createdAt": "2020-10-04T17:08:42Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/2107", "timeline": [{"oid": "06f1efe0018e796197cf5eb660627efb385f29bb", "url": "https://github.com/MegaMek/mekhq/commit/06f1efe0018e796197cf5eb660627efb385f29bb", "message": "Moving MekHQ to use a static directory manager", "committedDate": "2020-10-04T16:39:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUyNjU4OQ==", "url": "https://github.com/MegaMek/mekhq/pull/2107#discussion_r500526589", "bodyText": "MekHQ is certainly multi-threaded compared to MM, I feel that these individual initialize methods should be synchronized.", "author": "sixlettervariables", "createdAt": "2020-10-06T18:56:19Z", "path": "MekHQ/src/mekhq/MHQStaticDirectoryManager.java", "diffHunk": "@@ -0,0 +1,236 @@\n+/*\n+ * Copyright (c) 2020 - The MegaMek Team. All Rights Reserved.\n+ *\n+ * This file is part of MekHQ.\n+ *\n+ * MekHQ is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * MekHQ is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with MekHQ. If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package mekhq;\n+\n+import megamek.MegaMek;\n+import megamek.client.ui.swing.tileset.MMStaticDirectoryManager;\n+import megamek.common.Crew;\n+import megamek.common.annotations.Nullable;\n+import megamek.common.util.fileUtils.DirectoryItems;\n+import mekhq.campaign.force.Force;\n+import mekhq.gui.enums.LayeredForceIcon;\n+import mekhq.gui.utilities.PortraitFileFactory;\n+\n+import java.awt.*;\n+import java.awt.image.BufferedImage;\n+import java.io.File;\n+import java.util.LinkedHashMap;\n+import java.util.Vector;\n+\n+public class MHQStaticDirectoryManager extends MMStaticDirectoryManager {\n+    //region Variable Declarations\n+    private static DirectoryItems forceIconDirectory;\n+    private static DirectoryItems awardIconDirectory;\n+\n+    // Re-parsing Prevention Variables: The are True at startup and when the specified directory\n+    // should be re-parsed, and are used to avoid re-parsing the directory repeatedly when there's an error.\n+    private static boolean parseForceIconDirectory = true;\n+    private static boolean parseAwardIconDirectory = true;\n+    //endregion Variable Declarations\n+\n+    //region Constructors\n+    protected MHQStaticDirectoryManager() {\n+        // This class is not to be instantiated\n+    }\n+    //endregion Constructors\n+\n+\n+    //region Initialization\n+    /**\n+     * This initialized all of the directories under this manager\n+     */\n+    public static void initialize() {\n+        MMStaticDirectoryManager.initialize();\n+        initializeForceIcons();\n+        initializeAwardIcons();\n+    }\n+\n+    /**\n+     * Parses MekHQ's force icon folder when first called or when it was refreshed.\n+     *\n+     * @see #refreshForceIcons()\n+     */\n+    private static void initializeForceIcons() {", "originalCommit": "06f1efe0018e796197cf5eb660627efb385f29bb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}