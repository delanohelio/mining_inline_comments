{"pr_number": 1622, "pr_title": "1134: Option to Disable Dependent Automatic Addition in AtB", "pr_createdAt": "2020-04-03T16:51:47Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/1622", "timeline": [{"oid": "c32d38fed0e367cfbbc93c85902a22a1960ac976", "url": "https://github.com/MegaMek/mekhq/commit/c32d38fed0e367cfbbc93c85902a22a1960ac976", "message": "Removing superflous gridx calls", "committedDate": "2020-04-03T16:19:47Z", "type": "commit"}, {"oid": "5fc51d5a62e0ea096d32430080197090b8c8d047", "url": "https://github.com/MegaMek/mekhq/commit/5fc51d5a62e0ea096d32430080197090b8c8d047", "message": "Adding the AddDependent option", "committedDate": "2020-04-03T16:32:14Z", "type": "commit"}, {"oid": "2c0def8f5e70004d02e33d7333be5556677c52a0", "url": "https://github.com/MegaMek/mekhq/commit/2c0def8f5e70004d02e33d7333be5556677c52a0", "message": "Applying the option in Campaign", "committedDate": "2020-04-03T16:33:28Z", "type": "commit"}, {"oid": "468d4a8ebc6de5f80007f4651496dd9750a3b9ee", "url": "https://github.com/MegaMek/mekhq/commit/468d4a8ebc6de5f80007f4651496dd9750a3b9ee", "message": "Expanding on the if statement and converting it to LocalDate", "committedDate": "2020-04-03T16:37:23Z", "type": "commit"}, {"oid": "900f00887536e95e765ca68317e36c0f7df7647a", "url": "https://github.com/MegaMek/mekhq/commit/900f00887536e95e765ca68317e36c0f7df7647a", "message": "Applying AddDependent to AtBContract", "committedDate": "2020-04-03T16:39:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzUwMDM2NQ==", "url": "https://github.com/MegaMek/mekhq/pull/1622#discussion_r403500365", "bodyText": "This should only be reported if you're actually adding them.", "author": "sixlettervariables", "createdAt": "2020-04-04T18:21:26Z", "path": "MekHQ/src/mekhq/campaign/mission/AtBContract.java", "diffHunk": "@@ -673,10 +673,12 @@ public void doBonusRoll(Campaign c) {\n         switch (roll) {\n         case 1: /* 1d6 dependents */\n             number = Compute.d6();\n-            c.addReport(\"Bonus: \" + number + \" dependent\" + ((number>1)?\"s\":\"\"));\n-            for (int i = 0; i < number; i++) {\n-                Person p = c.newDependent(Person.T_ASTECH, false);\n-                c.recruitPerson(p, false, true, false, true);\n+            c.addReport(\"Bonus: \" + number + \" dependent\" + ((number > 1) ? \"s\" : \"\"));", "originalCommit": "900f00887536e95e765ca68317e36c0f7df7647a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzUwMjcwNw==", "url": "https://github.com/MegaMek/mekhq/pull/1622#discussion_r403502707", "bodyText": "That was outside to verify for testing, moved back inside so it is only reported in that case. Fixes for review changes have been pushed.", "author": "Windchild292", "createdAt": "2020-04-04T18:43:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzUwMDM2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "1d5464d5b2482471c1084c8b7993fa356a80c522", "chunk": "diff --git a/MekHQ/src/mekhq/campaign/mission/AtBContract.java b/MekHQ/src/mekhq/campaign/mission/AtBContract.java\nindex 5da9f504a..8d0bb8774 100644\n--- a/MekHQ/src/mekhq/campaign/mission/AtBContract.java\n+++ b/MekHQ/src/mekhq/campaign/mission/AtBContract.java\n\n@@ -672,9 +672,9 @@ public class AtBContract extends Contract implements Serializable {\n         int roll = Compute.d6();\n         switch (roll) {\n         case 1: /* 1d6 dependents */\n-            number = Compute.d6();\n-            c.addReport(\"Bonus: \" + number + \" dependent\" + ((number > 1) ? \"s\" : \"\"));\n-            if (c.getCampaignOptions().getAddDependents()) {\n+            if (c.getCampaignOptions().canAtBAddDependents()) {\n+                number = Compute.d6();\n+                c.addReport(\"Bonus: \" + number + \" dependent\" + ((number > 1) ? \"s\" : \"\"));\n                 for (int i = 0; i < number; i++) {\n                     Person p = c.newDependent(Person.T_ASTECH, false);\n                     c.recruitPerson(p, false, true, false, true);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzUwMDQ1Mw==", "url": "https://github.com/MegaMek/mekhq/pull/1622#discussion_r403500453", "bodyText": "Better: canAtBAddDependents or just canAddDependents", "author": "sixlettervariables", "createdAt": "2020-04-04T18:22:15Z", "path": "MekHQ/src/mekhq/campaign/CampaignOptions.java", "diffHunk": "@@ -2350,6 +2352,14 @@ public void setFoundersNeverRetire(boolean mods) {\n         foundersNeverRetire = mods;\n \t}\n \n+\tpublic boolean getAddDependents() {", "originalCommit": "900f00887536e95e765ca68317e36c0f7df7647a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1d5464d5b2482471c1084c8b7993fa356a80c522", "chunk": "diff --git a/MekHQ/src/mekhq/campaign/CampaignOptions.java b/MekHQ/src/mekhq/campaign/CampaignOptions.java\nindex b2512a1ff..cad5fdecb 100644\n--- a/MekHQ/src/mekhq/campaign/CampaignOptions.java\n+++ b/MekHQ/src/mekhq/campaign/CampaignOptions.java\n\n@@ -2352,12 +2352,12 @@ public class CampaignOptions implements Serializable {\n         foundersNeverRetire = mods;\n \t}\n \n-\tpublic boolean getAddDependents() {\n-        return addDependents;\n+\tpublic boolean canAtBAddDependents() {\n+        return atbAddDependents;\n     }\n \n-    public void setAddDependents(boolean b) {\n-        addDependents = b;\n+    public void setAtBAddDependents(boolean b) {\n+        atbAddDependents = b;\n     }\n \n     public boolean getDependentsNeverLeave() {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzUwMDQ2NA==", "url": "https://github.com/MegaMek/mekhq/pull/1622#discussion_r403500464", "bodyText": "setCanAtBAddDependents", "author": "sixlettervariables", "createdAt": "2020-04-04T18:22:24Z", "path": "MekHQ/src/mekhq/campaign/CampaignOptions.java", "diffHunk": "@@ -2350,6 +2352,14 @@ public void setFoundersNeverRetire(boolean mods) {\n         foundersNeverRetire = mods;\n \t}\n \n+\tpublic boolean getAddDependents() {\n+        return addDependents;\n+    }\n+\n+    public void setAddDependents(boolean b) {", "originalCommit": "900f00887536e95e765ca68317e36c0f7df7647a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1d5464d5b2482471c1084c8b7993fa356a80c522", "chunk": "diff --git a/MekHQ/src/mekhq/campaign/CampaignOptions.java b/MekHQ/src/mekhq/campaign/CampaignOptions.java\nindex b2512a1ff..cad5fdecb 100644\n--- a/MekHQ/src/mekhq/campaign/CampaignOptions.java\n+++ b/MekHQ/src/mekhq/campaign/CampaignOptions.java\n\n@@ -2352,12 +2352,12 @@ public class CampaignOptions implements Serializable {\n         foundersNeverRetire = mods;\n \t}\n \n-\tpublic boolean getAddDependents() {\n-        return addDependents;\n+\tpublic boolean canAtBAddDependents() {\n+        return atbAddDependents;\n     }\n \n-    public void setAddDependents(boolean b) {\n-        addDependents = b;\n+    public void setAtBAddDependents(boolean b) {\n+        atbAddDependents = b;\n     }\n \n     public boolean getDependentsNeverLeave() {\n"}}, {"oid": "7a8844412fd452f9b413e0e5e00d0fb3075cae3b", "url": "https://github.com/MegaMek/mekhq/commit/7a8844412fd452f9b413e0e5e00d0fb3075cae3b", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_1134", "committedDate": "2020-04-04T18:34:00Z", "type": "commit"}, {"oid": "1d5464d5b2482471c1084c8b7993fa356a80c522", "url": "https://github.com/MegaMek/mekhq/commit/1d5464d5b2482471c1084c8b7993fa356a80c522", "message": "Fixing issues raised during review", "committedDate": "2020-04-04T18:42:28Z", "type": "commit"}, {"oid": "0a9191bc0599e4a8707003e533acd4ae243b63d6", "url": "https://github.com/MegaMek/mekhq/commit/0a9191bc0599e4a8707003e533acd4ae243b63d6", "message": "Fixing merge conflicts", "committedDate": "2020-04-10T02:56:37Z", "type": "commit"}]}