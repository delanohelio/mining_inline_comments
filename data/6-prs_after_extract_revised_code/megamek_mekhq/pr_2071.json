{"pr_number": 2071, "pr_title": "Dev vulpzor campaign ops dropship maintenance cost fix", "pr_createdAt": "2020-09-29T11:57:54Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/2071", "timeline": [{"oid": "55eecc272f77a8fe0b71dcec9b992ff40b43d3a4", "url": "https://github.com/MegaMek/mekhq/commit/55eecc272f77a8fe0b71dcec9b992ff40b43d3a4", "message": "Fix for dropship ammo costs not matching campaign ops rules", "committedDate": "2020-09-29T10:53:50Z", "type": "commit"}, {"oid": "6c09f084c0c931dc0fd0d0369ab7bbeae618cc1f", "url": "https://github.com/MegaMek/mekhq/commit/6c09f084c0c931dc0fd0d0369ab7bbeae618cc1f", "message": "Remove LargeCraftAmmoBin override with same code as base class", "committedDate": "2020-09-29T11:20:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcwOTg5Mg==", "url": "https://github.com/MegaMek/mekhq/pull/2071#discussion_r496709892", "bodyText": "The real fix here is to just delete the .multipliedBy(size) line, which looks like a copy-paste error from getValueNeeded.\nCompare this to AmmoBin.java:\n\n  \n    \n      mekhq/MekHQ/src/mekhq/campaign/parts/equipment/AmmoBin.java\n    \n    \n        Lines 186 to 195\n      in\n      785d0a3\n    \n    \n    \n    \n\n        \n          \n           @Override \n        \n\n        \n          \n           public Money getStickerPrice() { \n        \n\n        \n          \n               if (getShotsPerTon() <= 0) { \n        \n\n        \n          \n                   return Money.zero(); \n        \n\n        \n          \n               } \n        \n\n        \n          \n            \n        \n\n        \n          \n               return getPricePerTon() \n        \n\n        \n          \n                       .multipliedBy(getCurrentShots()) \n        \n\n        \n          \n                       .dividedBy(getShotsPerTon()); \n        \n\n        \n          \n           }", "author": "sixlettervariables", "createdAt": "2020-09-29T13:20:03Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/LargeCraftAmmoBin.java", "diffHunk": "@@ -169,18 +169,6 @@ protected Money getPricePerTon() {\n         return Money.of(getType().getRawCost());\n     }\n \n-    @Override\n-    public Money getStickerPrice() {\n-        if (getShotsPerTon() <= 0) {\n-            return Money.zero();\n-        }\n-\n-        return getPricePerTon()\n-                .multipliedBy(size)\n-                .multipliedBy(getCurrentShots())\n-                .dividedBy(getShotsPerTon());\n-    }\n-", "originalCommit": "6c09f084c0c931dc0fd0d0369ab7bbeae618cc1f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc0MTg2Nw==", "url": "https://github.com/MegaMek/mekhq/pull/2071#discussion_r496741867", "bodyText": "That would make the two methods the exact same, hence the deletion of the override.", "author": "Windchild292", "createdAt": "2020-09-29T14:00:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcwOTg5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc2NDA4Nw==", "url": "https://github.com/MegaMek/mekhq/pull/2071#discussion_r496764087", "bodyText": "I missed it derived from AmmoBin in this case! Been playing with GitHub's code navigation features. Took me to EquipmentPart.", "author": "sixlettervariables", "createdAt": "2020-09-29T14:28:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcwOTg5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxMDkwNw==", "url": "https://github.com/MegaMek/mekhq/pull/2071#discussion_r497210907", "bodyText": "@sixlettervariables No worries, my first version of the fix was exactly that, removing the line.  I cleaned up the override prior to opening the PR when I realized they would be the same.  Thanks for the review and merge, will try to package up some other changes I have lying around locally.", "author": "vulpzor", "createdAt": "2020-09-30T02:40:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcwOTg5Mg=="}], "type": "inlineReview", "revised_code": null}]}