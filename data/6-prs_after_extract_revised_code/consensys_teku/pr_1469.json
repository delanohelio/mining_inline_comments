{"pr_number": 1469, "pr_title": "[#1435] Use keystore library from signers project", "pr_createdAt": "2020-03-25T04:59:03Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1469", "timeline": [{"oid": "6c57a29d72000ab783dedc5d981d720c9cf26426", "url": "https://github.com/ConsenSys/teku/commit/6c57a29d72000ab783dedc5d981d720c9cf26426", "message": "[#1435] Use BLS keystore library from signers\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-03-25T04:55:58Z", "type": "commit"}, {"oid": "8612dc119affe628b32829d7cf4175b60dc3b396", "url": "https://github.com/ConsenSys/teku/commit/8612dc119affe628b32829d7cf4175b60dc3b396", "message": "Merge remote-tracking branch 'upstream/master' into 1435_keystore_library\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-03-25T04:56:22Z", "type": "commit"}, {"oid": "d01f4978f5e6e96cc7a03d661529f7fc8f9516b5", "url": "https://github.com/ConsenSys/teku/commit/d01f4978f5e6e96cc7a03d661529f7fc8f9516b5", "message": "updating package names in tests\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-03-25T06:52:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzY0NzMzMA==", "url": "https://github.com/ConsenSys/teku/pull/1469#discussion_r397647330", "bodyText": "Can you use a constant public key value instead of the random value", "author": "jframe", "createdAt": "2020-03-25T07:16:38Z", "path": "artemis/src/test/java/tech/pegasys/artemis/cli/deposit/DepositRegisterCommandTest.java", "diffHunk": "@@ -57,7 +57,7 @@\n   private static final Cipher CIPHER = new Cipher(AES_IV_PARAM);\n   private static final KdfParam KDF_PARAM = new SCryptParam(32, 262144, 1, 8, SALT);\n   private static final KeyStoreData VALIDATOR_KEYSTORE =\n-      KeyStore.encrypt(BLS_PRIVATE_KEY, PASSWORD, \"\", KDF_PARAM, CIPHER);\n+      KeyStore.encrypt(BLS_PRIVATE_KEY, Bytes32.random(), PASSWORD, \"\", KDF_PARAM, CIPHER);", "originalCommit": "d01f4978f5e6e96cc7a03d661529f7fc8f9516b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzY2MTExMA==", "url": "https://github.com/ConsenSys/teku/pull/1469#discussion_r397661110", "bodyText": "done", "author": "usmansaleem", "createdAt": "2020-03-25T07:51:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzY0NzMzMA=="}], "type": "inlineReview", "revised_code": {"commit": "d9ec5d3f869c4692c4eb8b93eccc0e30251ef519", "chunk": "diff --git a/artemis/src/test/java/tech/pegasys/artemis/cli/deposit/DepositRegisterCommandTest.java b/artemis/src/test/java/tech/pegasys/artemis/cli/deposit/DepositRegisterCommandTest.java\nindex 9e7ab80ba..f09bfb4d9 100644\n--- a/artemis/src/test/java/tech/pegasys/artemis/cli/deposit/DepositRegisterCommandTest.java\n+++ b/artemis/src/test/java/tech/pegasys/artemis/cli/deposit/DepositRegisterCommandTest.java\n\n@@ -50,14 +49,17 @@ class DepositRegisterCommandTest {\n   private static final Function<String, String> envSupplier =\n       s -> EXPECTED_ENV_VARIABLE.equals(s) ? PASSWORD : null;\n   private static final Bytes BLS_PRIVATE_KEY =\n-      Bytes48.fromHexStringLenient(\"19d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f\");\n+      Bytes.fromHexString(\"0x19d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f\");\n+  private static final Bytes BLS_PUB_KEY =\n+      Bytes.fromHexString(\n+          \"9612d7a727c9d0a22e185a1c768478dfe919cada9266988cb32359c11f2b7b27f4ae4040902382ae2910c15e2b420d07\");\n   private static final Bytes32 SALT =\n       Bytes32.fromHexString(\"d4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3\");\n   private static final Bytes AES_IV_PARAM = Bytes.fromHexString(\"264daa3f303d7259501c93d997d84fe6\");\n   private static final Cipher CIPHER = new Cipher(AES_IV_PARAM);\n   private static final KdfParam KDF_PARAM = new SCryptParam(32, 262144, 1, 8, SALT);\n   private static final KeyStoreData VALIDATOR_KEYSTORE =\n-      KeyStore.encrypt(BLS_PRIVATE_KEY, Bytes32.random(), PASSWORD, \"\", KDF_PARAM, CIPHER);\n+      KeyStore.encrypt(BLS_PRIVATE_KEY, BLS_PUB_KEY, PASSWORD, \"\", KDF_PARAM, CIPHER);\n   private CommonParams commonParams;\n   private CommandLine.Model.CommandSpec commandSpec;\n   private DepositTransactionSender depositTransactionSender;\n"}}, {"oid": "d9ec5d3f869c4692c4eb8b93eccc0e30251ef519", "url": "https://github.com/ConsenSys/teku/commit/d9ec5d3f869c4692c4eb8b93eccc0e30251ef519", "message": "Fixing test case and use Bytes48 leftpad for private key\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-03-25T07:44:53Z", "type": "commit"}, {"oid": "c43411d30933b09172b1658acb4886cda68a2bbd", "url": "https://github.com/ConsenSys/teku/commit/c43411d30933b09172b1658acb4886cda68a2bbd", "message": "Merge remote-tracking branch 'upstream/master' into 1435_keystore_library\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-03-25T07:45:09Z", "type": "commit"}]}