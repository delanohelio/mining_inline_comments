{"pr_number": 1466, "pr_title": "Improved handling of invalid key strings", "pr_createdAt": "2020-03-24T19:45:27Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1466", "timeline": [{"oid": "0055c191a67aeaa5d06697c98a347b18a46d9832", "url": "https://github.com/ConsenSys/teku/commit/0055c191a67aeaa5d06697c98a347b18a46d9832", "message": "added test for illegal arg\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-03-24T05:14:58Z", "type": "commit"}, {"oid": "e80e4472b3344df54ab256a409968bf45bf80b8f", "url": "https://github.com/ConsenSys/teku/commit/e80e4472b3344df54ab256a409968bf45bf80b8f", "message": "validate key up front\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-03-24T19:00:12Z", "type": "commit"}, {"oid": "c24de38b6a81d52ee93b7563ffceeb32ca76d797", "url": "https://github.com/ConsenSys/teku/commit/c24de38b6a81d52ee93b7563ffceeb32ca76d797", "message": "simplify test\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-03-24T19:39:51Z", "type": "commit"}, {"oid": "754162f578adced869c425f4e13585ef3effe9da", "url": "https://github.com/ConsenSys/teku/commit/754162f578adced869c425f4e13585ef3effe9da", "message": "formatting\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-03-24T19:48:11Z", "type": "commit"}, {"oid": "5083e8d9c15618b39bb247e752c919bc79ff25dc", "url": "https://github.com/ConsenSys/teku/commit/5083e8d9c15618b39bb247e752c919bc79ff25dc", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into dodgy-key", "committedDate": "2020-03-24T22:00:20Z", "type": "commit"}, {"oid": "1168d1d0ef8d418aea90fa6b492f3e639dcb1a9e", "url": "https://github.com/ConsenSys/teku/commit/1168d1d0ef8d418aea90fa6b492f3e639dcb1a9e", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into dodgy-key", "committedDate": "2020-03-24T22:07:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ4OTg5Mg==", "url": "https://github.com/ConsenSys/teku/pull/1466#discussion_r397489892", "bodyText": "nit: Would be a lot better if this were wrapped in a blsPublicKey.isValid()", "author": "ajsutton", "createdAt": "2020-03-24T22:04:48Z", "path": "data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java", "diffHunk": "@@ -60,8 +61,11 @@ public String toString() {\n     return bytes.toString();\n   }\n \n-  public static BLSPubKey fromHexString(String value) {\n-    return new BLSPubKey(Bytes.fromHexString(value));\n+  public static BLSPubKey fromHexString(String value) throws IllegalArgumentException {\n+    BLSPublicKey blsPublicKey = BLSPublicKey.fromBytes(Bytes.fromHexString(value));\n+    // force validation early - this will throw IllegalArgumentException if not valid\n+    blsPublicKey.getPublicKey().g1Point();", "originalCommit": "754162f578adced869c425f4e13585ef3effe9da", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2946fe1ef3385d978a9fc5e6b771e13d34955274", "chunk": "diff --git a/data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java b/data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java\nindex 737d3f5384..c5a53f4c15 100644\n--- a/data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java\n+++ b/data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java\n\n@@ -61,7 +61,7 @@ public class BLSPubKey {\n     return bytes.toString();\n   }\n \n-  public static BLSPubKey fromHexString(String value) throws IllegalArgumentException {\n+  public static BLSPubKey fromHexString(String value) {\n     BLSPublicKey blsPublicKey = BLSPublicKey.fromBytes(Bytes.fromHexString(value));\n     // force validation early - this will throw IllegalArgumentException if not valid\n     blsPublicKey.getPublicKey().g1Point();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ4OTk3OA==", "url": "https://github.com/ConsenSys/teku/pull/1466#discussion_r397489978", "bodyText": "nit: Don't need to declare unchecked exceptions like IllegalArgumentException.", "author": "ajsutton", "createdAt": "2020-03-24T22:05:02Z", "path": "data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java", "diffHunk": "@@ -60,8 +61,11 @@ public String toString() {\n     return bytes.toString();\n   }\n \n-  public static BLSPubKey fromHexString(String value) {\n-    return new BLSPubKey(Bytes.fromHexString(value));\n+  public static BLSPubKey fromHexString(String value) throws IllegalArgumentException {", "originalCommit": "754162f578adced869c425f4e13585ef3effe9da", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2946fe1ef3385d978a9fc5e6b771e13d34955274", "chunk": "diff --git a/data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java b/data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java\nindex 737d3f5384..c5a53f4c15 100644\n--- a/data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java\n+++ b/data/provider/src/main/java/tech/pegasys/artemis/api/schema/BLSPubKey.java\n\n@@ -61,7 +61,7 @@ public class BLSPubKey {\n     return bytes.toString();\n   }\n \n-  public static BLSPubKey fromHexString(String value) throws IllegalArgumentException {\n+  public static BLSPubKey fromHexString(String value) {\n     BLSPublicKey blsPublicKey = BLSPublicKey.fromBytes(Bytes.fromHexString(value));\n     // force validation early - this will throw IllegalArgumentException if not valid\n     blsPublicKey.getPublicKey().g1Point();\n"}}, {"oid": "2946fe1ef3385d978a9fc5e6b771e13d34955274", "url": "https://github.com/ConsenSys/teku/commit/2946fe1ef3385d978a9fc5e6b771e13d34955274", "message": "added isValid method\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-03-24T23:55:27Z", "type": "commit"}, {"oid": "fb82171347a16be4317069e794f127149e040f90", "url": "https://github.com/ConsenSys/teku/commit/fb82171347a16be4317069e794f127149e040f90", "message": "test\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-03-25T00:20:40Z", "type": "commit"}, {"oid": "8857b11b762505757b57a6ea2f36dd8dafc5daa8", "url": "https://github.com/ConsenSys/teku/commit/8857b11b762505757b57a6ea2f36dd8dafc5daa8", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into dodgy-key", "committedDate": "2020-03-25T00:29:22Z", "type": "commit"}]}