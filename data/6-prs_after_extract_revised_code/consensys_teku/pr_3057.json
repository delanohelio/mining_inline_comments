{"pr_number": 3057, "pr_title": "validator committee indexes need to be returned as string.", "pr_createdAt": "2020-10-22T22:43:44Z", "pr_url": "https://github.com/ConsenSys/teku/pull/3057", "timeline": [{"oid": "767e4aa2d16abd86d6441f7bb2397b7b4de7f41e", "url": "https://github.com/ConsenSys/teku/commit/767e4aa2d16abd86d6441f7bb2397b7b4de7f41e", "message": "validator committee indexes need to be returned as string.\n\nreturning as integers resulted in a failed eth2-comply test.\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-10-22T22:43:07Z", "type": "commit"}, {"oid": "64aaac1b96d755c7655d39d8c0b939f6e5d577c5", "url": "https://github.com/ConsenSys/teku/commit/64aaac1b96d755c7655d39d8c0b939f6e5d577c5", "message": "Merge remote-tracking branch 'upstream/master' into fix-committee-indexes", "committedDate": "2020-10-22T22:46:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ5OTYyOA==", "url": "https://github.com/ConsenSys/teku/pull/3057#discussion_r510499628", "bodyText": "nit: This is feeling like a common util method we're likely to wind up using in a few places converting from List to List.", "author": "ajsutton", "createdAt": "2020-10-22T22:45:56Z", "path": "data/serializer/src/main/java/tech/pegasys/teku/api/response/v1/beacon/EpochCommitteeResponse.java", "diffHunk": "@@ -35,20 +37,24 @@\n   public final UInt64 slot;\n \n   @JsonProperty(\"validators\")\n-  public final List<Integer> validators;\n+  @ArraySchema(schema = @Schema(type = \"string\", example = EXAMPLE_UINT64))\n+  public final List<UInt64> validators;\n \n   public EpochCommitteeResponse(\n       tech.pegasys.teku.datastructures.state.CommitteeAssignment committeeAssignment) {\n     this.slot = committeeAssignment.getSlot();\n     this.index = committeeAssignment.getCommitteeIndex();\n-    this.validators = committeeAssignment.getCommittee();\n+    this.validators =\n+        committeeAssignment.getCommittee().stream()\n+            .map(UInt64::valueOf)\n+            .collect(Collectors.toList());", "originalCommit": "767e4aa2d16abd86d6441f7bb2397b7b4de7f41e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDUwMDExOA==", "url": "https://github.com/ConsenSys/teku/pull/3057#discussion_r510500118", "bodyText": "True, I'd be surprised if we don't have this written in a bunch of places...", "author": "rolfyone", "createdAt": "2020-10-22T22:47:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ5OTYyOA=="}], "type": "inlineReview", "revised_code": {"commit": "0bd1fc5b3b2de5f92a9ad3ba7bdb8c534bcc5eef", "chunk": "diff --git a/data/serializer/src/main/java/tech/pegasys/teku/api/response/v1/beacon/EpochCommitteeResponse.java b/data/serializer/src/main/java/tech/pegasys/teku/api/response/v1/beacon/EpochCommitteeResponse.java\nindex 91a9be6078..e1500297a4 100644\n--- a/data/serializer/src/main/java/tech/pegasys/teku/api/response/v1/beacon/EpochCommitteeResponse.java\n+++ b/data/serializer/src/main/java/tech/pegasys/teku/api/response/v1/beacon/EpochCommitteeResponse.java\n\n@@ -44,10 +44,7 @@ public class EpochCommitteeResponse {\n       tech.pegasys.teku.datastructures.state.CommitteeAssignment committeeAssignment) {\n     this.slot = committeeAssignment.getSlot();\n     this.index = committeeAssignment.getCommitteeIndex();\n-    this.validators =\n-        committeeAssignment.getCommittee().stream()\n-            .map(UInt64::valueOf)\n-            .collect(Collectors.toList());\n+    this.validators = UInt64Util.intToUInt64List(committeeAssignment.getCommittee());\n   }\n \n   @JsonCreator\n"}}, {"oid": "0bd1fc5b3b2de5f92a9ad3ba7bdb8c534bcc5eef", "url": "https://github.com/ConsenSys/teku/commit/0bd1fc5b3b2de5f92a9ad3ba7bdb8c534bcc5eef", "message": "review feedback\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-10-22T23:22:11Z", "type": "commit"}, {"oid": "ec53deea2fbe6dae5410421537ebe96c8daa4465", "url": "https://github.com/ConsenSys/teku/commit/ec53deea2fbe6dae5410421537ebe96c8daa4465", "message": "Merge branch 'master' into fix-committee-indexes", "committedDate": "2020-10-23T02:13:16Z", "type": "commit"}]}