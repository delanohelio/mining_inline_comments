{"pr_number": 2752, "pr_title": "Make optional Gossip message fields empty for outbound messages ", "pr_createdAt": "2020-09-08T12:46:12Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2752", "timeline": [{"oid": "49f8c3ebfb7cc632523f66ffe1433e4996af71ad", "url": "https://github.com/ConsenSys/teku/commit/49f8c3ebfb7cc632523f66ffe1433e4996af71ad", "message": "Upgrade libp2p version to 0.5.7", "committedDate": "2020-09-08T12:41:56Z", "type": "commit"}, {"oid": "6180453407bad78493ea1387df6346fc413478f3", "url": "https://github.com/ConsenSys/teku/commit/6180453407bad78493ea1387df6346fc413478f3", "message": "Nullify Gossip from/signature/seqNo fields for outbound messages", "committedDate": "2020-09-08T12:42:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAwNTQzMQ==", "url": "https://github.com/ConsenSys/teku/pull/2752#discussion_r485005431", "bodyText": "Looks like these 2 extra params default to null, but I guess you just want to be explicit here?", "author": "mbaxter", "createdAt": "2020-09-08T15:21:58Z", "path": "networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/gossip/GossipHandler.java", "diffHunk": "@@ -82,7 +82,8 @@ public void gossip(Bytes bytes) {\n     }\n \n     LOG.trace(\"Gossiping {}: {} bytes\", topic, bytes.size());\n-    SafeFuture.of(publisher.publish(Unpooled.wrappedBuffer(bytes.toArrayUnsafe()), topic))\n+    SafeFuture.of(\n+            publisher.publishExt(Unpooled.wrappedBuffer(bytes.toArrayUnsafe()), null, null, topic))", "originalCommit": "6180453407bad78493ea1387df6346fc413478f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAzOTg0OQ==", "url": "https://github.com/ConsenSys/teku/pull/2752#discussion_r485039849", "bodyText": "Oh, right! \ud83d\udc4d\nWill revert this then", "author": "Nashatyrev", "createdAt": "2020-09-08T16:13:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAwNTQzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "fba5f66ad0d7428cf44039ab71be17424b2ef6fc", "chunk": "diff --git a/networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/gossip/GossipHandler.java b/networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/gossip/GossipHandler.java\nindex 32b2fb73b..e0b3b4aa3 100644\n--- a/networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/gossip/GossipHandler.java\n+++ b/networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/gossip/GossipHandler.java\n\n@@ -82,8 +82,7 @@ public class GossipHandler implements Function<MessageApi, CompletableFuture<Val\n     }\n \n     LOG.trace(\"Gossiping {}: {} bytes\", topic, bytes.size());\n-    SafeFuture.of(\n-            publisher.publishExt(Unpooled.wrappedBuffer(bytes.toArrayUnsafe()), null, null, topic))\n+    SafeFuture.of(publisher.publish(Unpooled.wrappedBuffer(bytes.toArrayUnsafe()), topic))\n         .finish(\n             () -> LOG.trace(\"Successfully gossiped message on {}\", topic),\n             err -> LOG.debug(\"Failed to gossip message on \" + topic, err));\n"}}, {"oid": "fba5f66ad0d7428cf44039ab71be17424b2ef6fc", "url": "https://github.com/ConsenSys/teku/commit/fba5f66ad0d7428cf44039ab71be17424b2ef6fc", "message": "The regular publish() method can be used here", "committedDate": "2020-09-08T16:14:48Z", "type": "commit"}, {"oid": "0df74be35528b9fe439a2cb0634928a9a615e79d", "url": "https://github.com/ConsenSys/teku/commit/0df74be35528b9fe439a2cb0634928a9a615e79d", "message": "Fix the test", "committedDate": "2020-09-08T16:18:51Z", "type": "commit"}, {"oid": "e26c952de77f98d94ba1ed8f9b9b423caa2a058d", "url": "https://github.com/ConsenSys/teku/commit/e26c952de77f98d94ba1ed8f9b9b423caa2a058d", "message": "Merge branch 'master' into fix/gossip-optional-fields", "committedDate": "2020-09-08T16:20:22Z", "type": "commit"}]}