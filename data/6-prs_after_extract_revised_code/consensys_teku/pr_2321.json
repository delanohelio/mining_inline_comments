{"pr_number": 2321, "pr_title": "Default to adequate peer numbers", "pr_createdAt": "2020-07-06T20:15:45Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2321", "timeline": [{"oid": "c6e370d3d6a30f02c094d7b21be68fffa5db8500", "url": "https://github.com/ConsenSys/teku/commit/c6e370d3d6a30f02c094d7b21be68fffa5db8500", "message": "Default to adequate peer numbers if given too low", "committedDate": "2020-07-06T20:09:26Z", "type": "commit"}, {"oid": "40823e464b9f928dab3f6ae1c7b9c6f8b371596e", "url": "https://github.com/ConsenSys/teku/commit/40823e464b9f928dab3f6ae1c7b9c6f8b371596e", "message": "Change default values", "committedDate": "2020-07-06T20:11:09Z", "type": "commit"}, {"oid": "dcd13ffe0119cc2c76a7a1d39314ab44587b3309", "url": "https://github.com/ConsenSys/teku/commit/dcd13ffe0119cc2c76a7a1d39314ab44587b3309", "message": "Fix test issue", "committedDate": "2020-07-06T20:30:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwMjUxMw==", "url": "https://github.com/ConsenSys/teku/pull/2321#discussion_r450502513", "bodyText": "As discussed, I'd keep the increased defaults but remove this restrictions on the minimums that can be set.", "author": "ajsutton", "createdAt": "2020-07-06T22:01:25Z", "path": "teku/src/main/java/tech/pegasys/teku/cli/options/P2POptions.java", "diffHunk": "@@ -142,10 +147,22 @@ public String getP2pPrivateKeyFile() {\n   }\n \n   public int getP2pLowerBound() {\n+    if (p2pLowerBound < ATTESTATION_SUBNET_COUNT) {\n+      LOG.warn(\n+          \"--p2p-peer-lower-bound set too low. Defaulting to ATTESTATION_SUBNET_COUNT:  {}\",\n+          ATTESTATION_SUBNET_COUNT);\n+      p2pLowerBound = ATTESTATION_SUBNET_COUNT;\n+    }\n     return p2pLowerBound;\n   }\n \n   public int getP2pUpperBound() {\n+    if (p2pUpperBound < ATTESTATION_SUBNET_COUNT + 10) {\n+      LOG.warn(\n+          \"--p2p-peer-upper-bound set too low. Defaulting to ATTESTATION_SUBNET_COUNT + 10:  {}\",\n+          ATTESTATION_SUBNET_COUNT + 10);\n+      p2pUpperBound = ATTESTATION_SUBNET_COUNT + 10;\n+    }", "originalCommit": "dcd13ffe0119cc2c76a7a1d39314ab44587b3309", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDkwODEzMQ==", "url": "https://github.com/ConsenSys/teku/pull/2321#discussion_r450908131", "bodyText": "Done.", "author": "cemozerr", "createdAt": "2020-07-07T14:28:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwMjUxMw=="}], "type": "inlineReview", "revised_code": {"commit": "010d5504087a7d54b9fbf317df13c7869d16a106", "chunk": "diff --git a/teku/src/main/java/tech/pegasys/teku/cli/options/P2POptions.java b/teku/src/main/java/tech/pegasys/teku/cli/options/P2POptions.java\nindex d7308b1ee..8c6cb5fd2 100644\n--- a/teku/src/main/java/tech/pegasys/teku/cli/options/P2POptions.java\n+++ b/teku/src/main/java/tech/pegasys/teku/cli/options/P2POptions.java\n\n@@ -147,22 +145,10 @@ public class P2POptions {\n   }\n \n   public int getP2pLowerBound() {\n-    if (p2pLowerBound < ATTESTATION_SUBNET_COUNT) {\n-      LOG.warn(\n-          \"--p2p-peer-lower-bound set too low. Defaulting to ATTESTATION_SUBNET_COUNT:  {}\",\n-          ATTESTATION_SUBNET_COUNT);\n-      p2pLowerBound = ATTESTATION_SUBNET_COUNT;\n-    }\n     return p2pLowerBound;\n   }\n \n   public int getP2pUpperBound() {\n-    if (p2pUpperBound < ATTESTATION_SUBNET_COUNT + 10) {\n-      LOG.warn(\n-          \"--p2p-peer-upper-bound set too low. Defaulting to ATTESTATION_SUBNET_COUNT + 10:  {}\",\n-          ATTESTATION_SUBNET_COUNT + 10);\n-      p2pUpperBound = ATTESTATION_SUBNET_COUNT + 10;\n-    }\n     return p2pUpperBound;\n   }\n \n"}}, {"oid": "010d5504087a7d54b9fbf317df13c7869d16a106", "url": "https://github.com/ConsenSys/teku/commit/010d5504087a7d54b9fbf317df13c7869d16a106", "message": "Fix tests to match last commit", "committedDate": "2020-07-07T14:38:09Z", "type": "commit"}, {"oid": "aa4eb9f1652eb02c9c9cf46afd0967172ff61e0b", "url": "https://github.com/ConsenSys/teku/commit/aa4eb9f1652eb02c9c9cf46afd0967172ff61e0b", "message": "Run spotless", "committedDate": "2020-07-07T14:38:39Z", "type": "commit"}, {"oid": "bcc39c13e30389e9f3bb21c542c06869985b9183", "url": "https://github.com/ConsenSys/teku/commit/bcc39c13e30389e9f3bb21c542c06869985b9183", "message": "Remove redundand logger", "committedDate": "2020-07-07T15:17:36Z", "type": "commit"}, {"oid": "6d79ebcbcbc37886927f0e44c18c02d2e770b0b6", "url": "https://github.com/ConsenSys/teku/commit/6d79ebcbcbc37886927f0e44c18c02d2e770b0b6", "message": "Merge branch 'master' into defaultAdequatePeerNumbers", "committedDate": "2020-07-08T14:32:00Z", "type": "commit"}]}