{"pr_number": 1703, "pr_title": "Use increment not replace when calculating rewards", "pr_createdAt": "2020-05-01T05:01:31Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1703", "timeline": [{"oid": "025fde0099e51d0bbb3f394ba922d379b148fa84", "url": "https://github.com/ConsenSys/teku/commit/025fde0099e51d0bbb3f394ba922d379b148fa84", "message": "Fix consensus bug.", "committedDate": "2020-05-01T04:59:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQxOTAxMw==", "url": "https://github.com/ConsenSys/teku/pull/1703#discussion_r418419013", "bodyText": "Apparently the spec had this same bug: https://github.com/ethereum/eth2.0-specs/pull/1680/files", "author": "ajsutton", "createdAt": "2020-05-01T05:08:12Z", "path": "ethereum/core/src/main/java/tech/pegasys/artemis/core/EpochProcessorUtil.java", "diffHunk": "@@ -355,9 +354,9 @@ private static UnsignedLong get_base_reward(BeaconState state, int index) {\n           UnsignedLong increment = EFFECTIVE_BALANCE_INCREMENT;\n           final UnsignedLong reward_numerator =\n               index_base_reward.getValue().times(attesting_balance.dividedBy(increment));\n-          rewards.set(index, reward_numerator.dividedBy(total_balance.dividedBy(increment)));", "originalCommit": "025fde0099e51d0bbb3f394ba922d379b148fa84", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}