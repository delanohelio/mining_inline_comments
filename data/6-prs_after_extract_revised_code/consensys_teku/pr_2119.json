{"pr_number": 2119, "pr_title": "Change validator generate output to go to a single directory", "pr_createdAt": "2020-06-10T21:53:02Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2119", "timeline": [{"oid": "644b5ef97ff614e92fd3d89fd65a23eb9109c92c", "url": "https://github.com/ConsenSys/teku/commit/644b5ef97ff614e92fd3d89fd65a23eb9109c92c", "message": "changed directory structure of validator generate output\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-06-10T21:40:11Z", "type": "commit"}, {"oid": "bf125c98305b5afdd4c8fbb8267729ef4dfa28ef", "url": "https://github.com/ConsenSys/teku/commit/bf125c98305b5afdd4c8fbb8267729ef4dfa28ef", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into 2088-validator-single-folder-output", "committedDate": "2020-06-10T21:40:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ1OTA1Mg==", "url": "https://github.com/ConsenSys/teku/pull/2119#discussion_r438459052", "bodyText": "this needs to be the validator public key (short) so that we can associate the 2", "author": "rolfyone", "createdAt": "2020-06-10T23:20:34Z", "path": "teku/src/main/java/tech/pegasys/teku/cli/deposit/EncryptedKeystoreWriter.java", "diffHunk": "@@ -45,35 +45,33 @@ public EncryptedKeystoreWriter(\n     this.validatorKeyPassword = validatorKeyPassword;\n     this.withdrawalKeyPassword = withdrawalKeyPassword;\n     this.outputPath = outputPath;\n+    createKeystoreDirectory();\n   }\n \n   @Override\n   public void writeKeys(final BLSKeyPair validatorKey, final BLSKeyPair withdrawalKey)\n       throws UncheckedIOException, KeyStoreValidationException {\n-    final Path keystoreDirectory = createKeystoreDirectory(validatorKey);\n \n     final KeyStoreData validatorKeyStoreData =\n         generateKeystoreData(validatorKey, validatorKeyPassword);\n     final KeyStoreData withdrawalKeyStoreData =\n         generateKeystoreData(withdrawalKey, withdrawalKeyPassword);\n \n     final String validatorFileName =\n-        \"validator_\" + shortPublicKey(validatorKey.getPublicKey()) + \".json\";\n+        shortPublicKey(validatorKey.getPublicKey()) + \"_validator.json\";\n     final String withdrawalFileName =\n-        \"withdrawal_\" + shortPublicKey(withdrawalKey.getPublicKey()) + \".json\";\n+        shortPublicKey(withdrawalKey.getPublicKey()) + \"_withdrawal.json\";", "originalCommit": "bf125c98305b5afdd4c8fbb8267729ef4dfa28ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUwNTA3NQ==", "url": "https://github.com/ConsenSys/teku/pull/2119#discussion_r438505075", "bodyText": "fixed", "author": "macfarla", "createdAt": "2020-06-11T02:15:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ1OTA1Mg=="}], "type": "inlineReview", "revised_code": {"commit": "98725564a883845ec41f09152bb993ef7a9fdba3", "chunk": "diff --git a/teku/src/main/java/tech/pegasys/teku/cli/deposit/EncryptedKeystoreWriter.java b/teku/src/main/java/tech/pegasys/teku/cli/deposit/EncryptedKeystoreWriter.java\nindex 66a8333c1d..ba42ea9a56 100644\n--- a/teku/src/main/java/tech/pegasys/teku/cli/deposit/EncryptedKeystoreWriter.java\n+++ b/teku/src/main/java/tech/pegasys/teku/cli/deposit/EncryptedKeystoreWriter.java\n\n@@ -60,7 +60,7 @@ public class EncryptedKeystoreWriter implements KeysWriter {\n     final String validatorFileName =\n         shortPublicKey(validatorKey.getPublicKey()) + \"_validator.json\";\n     final String withdrawalFileName =\n-        shortPublicKey(withdrawalKey.getPublicKey()) + \"_withdrawal.json\";\n+        shortPublicKey(validatorKey.getPublicKey()) + \"_withdrawal.json\";\n \n     saveKeyStore(outputPath.resolve(validatorFileName), validatorKeyStoreData);\n     saveKeyStore(outputPath.resolve(withdrawalFileName), withdrawalKeyStoreData);\n"}}, {"oid": "98725564a883845ec41f09152bb993ef7a9fdba3", "url": "https://github.com/ConsenSys/teku/commit/98725564a883845ec41f09152bb993ef7a9fdba3", "message": "use validator pub key for withdrawal filename\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-06-11T00:04:52Z", "type": "commit"}, {"oid": "52bfce298362116c0827816cb2be1c255fa70f61", "url": "https://github.com/ConsenSys/teku/commit/52bfce298362116c0827816cb2be1c255fa70f61", "message": "Merge branch 'master' into 2088-validator-single-folder-output", "committedDate": "2020-06-11T02:24:53Z", "type": "commit"}]}