{"pr_number": 1737, "pr_title": "Support IPv6 listen addresses", "pr_createdAt": "2020-05-07T23:08:02Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1737", "timeline": [{"oid": "d47dbaa59394512a4d07ae616f0109f333fa5aa1", "url": "https://github.com/ConsenSys/teku/commit/d47dbaa59394512a4d07ae616f0109f333fa5aa1", "message": "Don't hard code the multiaddr format or protocol in LibP2PNetwork.", "committedDate": "2020-05-07T23:03:58Z", "type": "commit"}, {"oid": "a39a4a0f2ef03c916fc10b4bcf4b751efdc43d02", "url": "https://github.com/ConsenSys/teku/commit/a39a4a0f2ef03c916fc10b4bcf4b751efdc43d02", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into support-ipv6", "committedDate": "2020-05-07T23:04:05Z", "type": "commit"}, {"oid": "78b258187cc931364afecd2ac8dbc00f8374e29a", "url": "https://github.com/ConsenSys/teku/commit/78b258187cc931364afecd2ac8dbc00f8374e29a", "message": "Remove NetworkUtility.", "committedDate": "2020-05-07T23:06:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg3NzE1MA==", "url": "https://github.com/ConsenSys/teku/pull/1737#discussion_r421877150", "bodyText": "nit:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return addPeerId(fromInetSocketAddress(peer.getNodeAddress()), getNodeId(peer));\n          \n          \n            \n                return fromInetSocketAddress(peer.getNodeAddress(), getNodeId(peer));", "author": "cemozerr", "createdAt": "2020-05-08T00:57:59Z", "path": "networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/MultiaddrUtil.java", "diffHunk": "@@ -22,23 +22,34 @@\n import java.net.InetAddress;\n import java.net.InetSocketAddress;\n import tech.pegasys.teku.networking.p2p.discovery.DiscoveryPeer;\n+import tech.pegasys.teku.networking.p2p.peer.NodeId;\n \n-public class DiscoveryPeerToMultiaddrConverter {\n+public class MultiaddrUtil {\n \n-  public static Multiaddr convertToMultiAddr(final DiscoveryPeer peer) {\n-    final InetSocketAddress address = peer.getNodeAddress();\n-    final LibP2PNodeId nodeId = getNodeId(peer);\n+  public static Multiaddr fromDiscoveryPeer(final DiscoveryPeer peer) {\n+    return addPeerId(fromInetSocketAddress(peer.getNodeAddress()), getNodeId(peer));", "originalCommit": "78b258187cc931364afecd2ac8dbc00f8374e29a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg3ODEzMg==", "url": "https://github.com/ConsenSys/teku/pull/1737#discussion_r421878132", "bodyText": "Done.", "author": "ajsutton", "createdAt": "2020-05-08T01:01:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg3NzE1MA=="}], "type": "inlineReview", "revised_code": {"commit": "d9fbc51245caa7514bdbed69f0b60e18f8003345", "chunk": "diff --git a/networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/MultiaddrUtil.java b/networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/MultiaddrUtil.java\nindex f2369a9a9c..8c6e97e777 100644\n--- a/networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/MultiaddrUtil.java\n+++ b/networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/libp2p/MultiaddrUtil.java\n\n@@ -27,7 +27,7 @@ import tech.pegasys.teku.networking.p2p.peer.NodeId;\n public class MultiaddrUtil {\n \n   public static Multiaddr fromDiscoveryPeer(final DiscoveryPeer peer) {\n-    return addPeerId(fromInetSocketAddress(peer.getNodeAddress()), getNodeId(peer));\n+    return fromInetSocketAddress(peer.getNodeAddress(), getNodeId(peer));\n   }\n \n   public static Multiaddr fromInetSocketAddress(final InetSocketAddress address) {\n"}}, {"oid": "d9fbc51245caa7514bdbed69f0b60e18f8003345", "url": "https://github.com/ConsenSys/teku/commit/d9fbc51245caa7514bdbed69f0b60e18f8003345", "message": "Use existing method.", "committedDate": "2020-05-08T01:01:30Z", "type": "commit"}]}