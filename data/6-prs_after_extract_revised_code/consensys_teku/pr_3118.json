{"pr_number": 3118, "pr_title": "update `/eth/v1/beacon/states/{state_id}/finality_checkpoints` to select state more efficiently", "pr_createdAt": "2020-11-02T00:12:18Z", "pr_url": "https://github.com/ConsenSys/teku/pull/3118", "timeline": [{"oid": "2e4de4bdd5c84f4a34e5f7f0535a463cfb78ba5a", "url": "https://github.com/ConsenSys/teku/commit/2e4de4bdd5c84f4a34e5f7f0535a463cfb78ba5a", "message": "update `/eth/v1/beacon/states/{state_id}/finality_checkpoints` to select state more accurately\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-11-01T23:24:26Z", "type": "commit"}, {"oid": "8ed8e287a34875ace65a15cd90f90643b7e20afa", "url": "https://github.com/ConsenSys/teku/commit/8ed8e287a34875ace65a15cd90f90643b7e20afa", "message": "update `/eth/v1/beacon/states/{state_id}/finality_checkpoints` to select state more accurately\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-11-02T00:14:17Z", "type": "commit"}, {"oid": "401c184d6e8fe7fe3a538bdd2b59929c310415b1", "url": "https://github.com/ConsenSys/teku/commit/401c184d6e8fe7fe3a538bdd2b59929c310415b1", "message": "Merge remote-tracking branch 'upstream/master' into state-finality-checkpoints", "committedDate": "2020-11-02T00:16:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY5MzEzNQ==", "url": "https://github.com/ConsenSys/teku/pull/3118#discussion_r515693135", "bodyText": "Assuming we don't need this because testing for pre-genesis is now just covered by the state selector which would return empty.", "author": "ajsutton", "createdAt": "2020-11-02T00:18:27Z", "path": "data/beaconrestapi/src/test/java/tech/pegasys/teku/beaconrestapi/handlers/v1/beacon/GetStateFinalityCheckpointsTest.java", "diffHunk": "@@ -28,42 +26,31 @@\n import tech.pegasys.teku.datastructures.state.BeaconState;\n import tech.pegasys.teku.datastructures.util.DataStructureUtil;\n import tech.pegasys.teku.infrastructure.async.SafeFuture;\n-import tech.pegasys.teku.infrastructure.unsigned.UInt64;\n \n public class GetStateFinalityCheckpointsTest extends AbstractBeaconHandlerTest {\n   final DataStructureUtil dataStructureUtil = new DataStructureUtil();\n   final BeaconState state = dataStructureUtil.randomBeaconState();\n \n-  @Test\n-  public void shouldReturnUnavailableWhenStoreNotAvailable() throws Exception {\n-    final GetStateFinalityCheckpoints handler =\n-        new GetStateFinalityCheckpoints(chainDataProvider, jsonProvider);\n-    when(context.pathParamMap()).thenReturn(Map.of(\"state_id\", \"head\"));\n-    when(chainDataProvider.isStoreAvailable()).thenReturn(false);\n-\n-    handler.handle(context);\n-    verifyStatusCode(SC_NOT_FOUND);\n-  }", "originalCommit": "401c184d6e8fe7fe3a538bdd2b59929c310415b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY5NDI1NA==", "url": "https://github.com/ConsenSys/teku/pull/3118#discussion_r515694254", "bodyText": "That's my belief \ud83d\udc4d", "author": "rolfyone", "createdAt": "2020-11-02T00:27:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY5MzEzNQ=="}], "type": "inlineReview", "revised_code": null}]}