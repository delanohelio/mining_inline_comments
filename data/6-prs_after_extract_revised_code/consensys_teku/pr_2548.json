{"pr_number": 2548, "pr_title": "Start taking advantage of UInt64 helper methods", "pr_createdAt": "2020-08-10T23:50:03Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2548", "timeline": [{"oid": "8620a7bff5b4ff94cf6e65cb053a645f4b17a445", "url": "https://github.com/ConsenSys/teku/commit/8620a7bff5b4ff94cf6e65cb053a645f4b17a445", "message": "Start taking advantage of UInt64 helper methods.", "committedDate": "2020-08-10T23:48:24Z", "type": "commit"}, {"oid": "3db75bfa91aad86eee810155f4798bc84bf178a0", "url": "https://github.com/ConsenSys/teku/commit/3db75bfa91aad86eee810155f4798bc84bf178a0", "message": "Comparison functions.", "committedDate": "2020-08-10T23:50:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY2MDU2OQ==", "url": "https://github.com/ConsenSys/teku/pull/2548#discussion_r468660569", "bodyText": "int committeeIndex = slot.mod(SLOTS_PER_EPOCH).times(committees_per_slot).plus(index).intValue()", "author": "mbaxter", "createdAt": "2020-08-11T15:16:12Z", "path": "ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/util/CommitteeUtil.java", "diffHunk": "@@ -238,13 +237,8 @@ public static int compute_proposer_index(BeaconState state, List<Integer> indice\n               UInt64 committees_per_slot = get_committee_count_per_slot(state, epoch);\n               int committeeIndex =\n                   toIntExact(\n-                      slot.mod(UInt64.valueOf(SLOTS_PER_EPOCH))\n-                          .times(committees_per_slot)\n-                          .plus(index)\n-                          .longValue());\n-              int count =\n-                  toIntExact(\n-                      committees_per_slot.times(UInt64.valueOf(SLOTS_PER_EPOCH)).longValue());\n+                      slot.mod(SLOTS_PER_EPOCH).times(committees_per_slot).plus(index).longValue());", "originalCommit": "3db75bfa91aad86eee810155f4798bc84bf178a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgzMzcyNg==", "url": "https://github.com/ConsenSys/teku/pull/2548#discussion_r468833726", "bodyText": "Good spot.", "author": "ajsutton", "createdAt": "2020-08-11T20:05:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY2MDU2OQ=="}], "type": "inlineReview", "revised_code": {"commit": "f137f63d5e2ce1f3a40f6d7c1fd6ee2189b8bdf8", "chunk": "diff --git a/ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/util/CommitteeUtil.java b/ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/util/CommitteeUtil.java\nindex d8a945d98a..2d7120e1d0 100644\n--- a/ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/util/CommitteeUtil.java\n+++ b/ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/util/CommitteeUtil.java\n\n@@ -236,8 +236,7 @@ public class CommitteeUtil {\n               UInt64 epoch = compute_epoch_at_slot(slot);\n               UInt64 committees_per_slot = get_committee_count_per_slot(state, epoch);\n               int committeeIndex =\n-                  toIntExact(\n-                      slot.mod(SLOTS_PER_EPOCH).times(committees_per_slot).plus(index).longValue());\n+                  slot.mod(SLOTS_PER_EPOCH).times(committees_per_slot).plus(index).intValue();\n               int count = committees_per_slot.times(SLOTS_PER_EPOCH).intValue();\n               return compute_committee(\n                   state,\n"}}, {"oid": "f137f63d5e2ce1f3a40f6d7c1fd6ee2189b8bdf8", "url": "https://github.com/ConsenSys/teku/commit/f137f63d5e2ce1f3a40f6d7c1fd6ee2189b8bdf8", "message": "One more usage of intValue.", "committedDate": "2020-08-11T20:05:26Z", "type": "commit"}, {"oid": "b761ff76ea7771adb83007f5fffdc8d1a8d9ffb6", "url": "https://github.com/ConsenSys/teku/commit/b761ff76ea7771adb83007f5fffdc8d1a8d9ffb6", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into use-uint64-helpers", "committedDate": "2020-08-11T20:05:31Z", "type": "commit"}]}