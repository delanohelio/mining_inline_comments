{"pr_number": 1119, "pr_title": "Use a single TimeProvider instance across the system", "pr_createdAt": "2020-01-28T23:07:01Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1119", "timeline": [{"oid": "e772933253c8cbc049f3822cef2cdb67d065c834", "url": "https://github.com/ConsenSys/teku/commit/e772933253c8cbc049f3822cef2cdb67d065c834", "message": "Use a single TimeProvider instance across the system.", "committedDate": "2020-01-28T22:57:39Z", "type": "commit"}, {"oid": "fc934c8788fbfad19758f235c8c349b957b6f5a5", "url": "https://github.com/ConsenSys/teku/commit/fc934c8788fbfad19758f235c8c349b957b6f5a5", "message": "Simplify SystemTimeProvider.", "committedDate": "2020-01-28T23:01:40Z", "type": "commit"}, {"oid": "72960d1da9a495a2ce12535c7743eda2b184c50e", "url": "https://github.com/ConsenSys/teku/commit/72960d1da9a495a2ce12535c7743eda2b184c50e", "message": "Fix stub time provider.", "committedDate": "2020-01-28T23:15:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE1NzkwOA==", "url": "https://github.com/ConsenSys/teku/pull/1119#discussion_r372157908", "bodyText": "(nit) might want to switch this line to:\nthis.timeProvider = config.getTimeProvider();\n\nTo be in line with other member variables.", "author": "cemozerr", "createdAt": "2020-01-29T02:11:11Z", "path": "services/powchain/src/main/java/tech/pegasys/artemis/services/powchain/PowchainService.java", "diffHunk": "@@ -62,11 +62,13 @@\n   private String provider;\n \n   private String depositSimFile;\n+  private TimeProvider timeProvider;\n \n   public PowchainService() {}\n \n   @Override\n   public void init(ServiceConfig config) {\n+    timeProvider = config.getTimeProvider();", "originalCommit": "72960d1da9a495a2ce12535c7743eda2b184c50e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE1OTEwOQ==", "url": "https://github.com/ConsenSys/teku/pull/1119#discussion_r372159109", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                timeProvider = config.getTimeProvider();\n          \n          \n            \n                this.timeProvider = config.getTimeProvider();", "author": "ajsutton", "createdAt": "2020-01-29T02:17:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE1NzkwOA=="}], "type": "inlineReview", "revised_code": {"commit": "5b673c42ee486e88ececde3738edcf8421a672f8", "chunk": "diff --git a/services/powchain/src/main/java/tech/pegasys/artemis/services/powchain/PowchainService.java b/services/powchain/src/main/java/tech/pegasys/artemis/services/powchain/PowchainService.java\nindex 64b210130..e547134a6 100644\n--- a/services/powchain/src/main/java/tech/pegasys/artemis/services/powchain/PowchainService.java\n+++ b/services/powchain/src/main/java/tech/pegasys/artemis/services/powchain/PowchainService.java\n\n@@ -68,7 +68,7 @@ public class PowchainService implements ServiceInterface {\n \n   @Override\n   public void init(ServiceConfig config) {\n-    timeProvider = config.getTimeProvider();\n+    this.timeProvider = config.getTimeProvider();\n     this.eventBus = config.getEventBus();\n     this.eventBus.register(this);\n     this.depositMode = config.getConfig().getDepositMode();\n"}}, {"oid": "5b673c42ee486e88ececde3738edcf8421a672f8", "url": "https://github.com/ConsenSys/teku/commit/5b673c42ee486e88ececde3738edcf8421a672f8", "message": "Add this.", "committedDate": "2020-01-29T02:17:31Z", "type": "commit"}]}