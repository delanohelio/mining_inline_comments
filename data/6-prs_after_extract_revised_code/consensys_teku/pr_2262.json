{"pr_number": 2262, "pr_title": "print the time to genesis every 10 minutes", "pr_createdAt": "2020-06-30T01:06:06Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2262", "timeline": [{"oid": "0674a55a01e897d26b58a2d97632852460d122bc", "url": "https://github.com/ConsenSys/teku/commit/0674a55a01e897d26b58a2d97632852460d122bc", "message": "Print a periodic message with the remaining time to genesis.\n\nfixes #2246\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-06-30T01:02:52Z", "type": "commit"}, {"oid": "e8110a80ad8bead9f700ee676ffc7e9cb57df148", "url": "https://github.com/ConsenSys/teku/commit/e8110a80ad8bead9f700ee676ffc7e9cb57df148", "message": "Merge remote-tracking branch 'upstream/master' into 2246", "committedDate": "2020-06-30T01:03:11Z", "type": "commit"}, {"oid": "792a725a78e73cff910f26997918cf5ba4362487", "url": "https://github.com/ConsenSys/teku/commit/792a725a78e73cff910f26997918cf5ba4362487", "message": "changelog for #2246\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-06-30T01:04:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1MTczNw==", "url": "https://github.com/ConsenSys/teku/pull/2262#discussion_r447351737", "bodyText": "The if case should actually be if (currentTime.compareTo(genesisTime) >= 0) { so that if we execute this on the exact genesis time we should start the chain.", "author": "ajsutton", "createdAt": "2020-06-30T01:21:35Z", "path": "services/beaconchain/src/main/java/tech/pegasys/teku/services/beaconchain/BeaconChainController.java", "diffHunk": "@@ -501,7 +502,8 @@ private void onStoreInitialized() {\n       currentSlot = deltaTime.dividedBy(UnsignedLong.valueOf(SECONDS_PER_SLOT));\n     } else {\n       UnsignedLong timeUntilGenesis = genesisTime.minus(currentTime);", "originalCommit": "792a725a78e73cff910f26997918cf5ba4362487", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3Mzk1NQ==", "url": "https://github.com/ConsenSys/teku/pull/2262#discussion_r447373955", "bodyText": "fair call, i can update that while i'm here.", "author": "rolfyone", "createdAt": "2020-06-30T02:40:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1MTczNw=="}], "type": "inlineReview", "revised_code": {"commit": "d8a7161856dbfdbd49f2e484cdf16bd5e4407d5b", "chunk": "diff --git a/services/beaconchain/src/main/java/tech/pegasys/teku/services/beaconchain/BeaconChainController.java b/services/beaconchain/src/main/java/tech/pegasys/teku/services/beaconchain/BeaconChainController.java\nindex 13c96869ec..ed542e6876 100644\n--- a/services/beaconchain/src/main/java/tech/pegasys/teku/services/beaconchain/BeaconChainController.java\n+++ b/services/beaconchain/src/main/java/tech/pegasys/teku/services/beaconchain/BeaconChainController.java\n\n@@ -497,7 +497,7 @@ public class BeaconChainController extends Service implements TimeTickChannel {\n     UnsignedLong genesisTime = recentChainData.getGenesisTime();\n     UnsignedLong currentTime = UnsignedLong.valueOf(System.currentTimeMillis() / 1000);\n     UnsignedLong currentSlot = ZERO;\n-    if (currentTime.compareTo(genesisTime) > 0) {\n+    if (currentTime.compareTo(genesisTime) >= 0) {\n       UnsignedLong deltaTime = currentTime.minus(genesisTime);\n       currentSlot = deltaTime.dividedBy(UnsignedLong.valueOf(SECONDS_PER_SLOT));\n     } else {\n"}}, {"oid": "d8a7161856dbfdbd49f2e484cdf16bd5e4407d5b", "url": "https://github.com/ConsenSys/teku/commit/d8a7161856dbfdbd49f2e484cdf16bd5e4407d5b", "message": "code review comment on adjacent code.\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-06-30T02:42:07Z", "type": "commit"}, {"oid": "5c8a7514a7e23228b4160b615490945f5abe7f19", "url": "https://github.com/ConsenSys/teku/commit/5c8a7514a7e23228b4160b615490945f5abe7f19", "message": "Merge remote-tracking branch 'upstream/master' into 2246", "committedDate": "2020-06-30T02:43:46Z", "type": "commit"}]}