{"pr_number": 2249, "pr_title": "HADOOP-17159. Make UGI support forceful relogin from keytab ignoring the last login time", "pr_createdAt": "2020-08-26T20:48:53Z", "pr_url": "https://github.com/apache/hadoop/pull/2249", "timeline": [{"oid": "1c1f300b3783f65593ae7ea095b4c50fc3f55a29", "url": "https://github.com/apache/hadoop/commit/1c1f300b3783f65593ae7ea095b4c50fc3f55a29", "message": "HADOOP-17159 Ability for forceful relogin in UserGroupInformation class", "committedDate": "2020-08-26T20:47:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzYxMzE2Ng==", "url": "https://github.com/apache/hadoop/pull/2249#discussion_r477613166", "bodyText": "nit: add javadoc for this method, OR name ignoreTimeElapsed with ignoreLastLoginTime to make it a bit clearer?", "author": "liuml07", "createdAt": "2020-08-26T21:58:48Z", "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java", "diffHunk": "@@ -1232,7 +1232,29 @@ public void reloginFromKeytab() throws IOException {\n     reloginFromKeytab(false);\n   }\n \n+  /**\n+   * Force re-Login a user in from a keytab file irrespective of the last login\n+   * time. Loads a user identity from a keytab file and logs them in. They\n+   * become the currently logged-in user. This method assumes that\n+   * {@link #loginUserFromKeytab(String, String)} had happened already. The\n+   * Subject field of this UserGroupInformation object is updated to have the\n+   * new credentials.\n+   *\n+   * @throws IOException\n+   * @throws KerberosAuthException on a failure\n+   */\n+  @InterfaceAudience.Public\n+  @InterfaceStability.Evolving\n+  public void forceReloginFromKeytab() throws IOException {\n+    reloginFromKeytab(false, true);\n+  }\n+\n   private void reloginFromKeytab(boolean checkTGT) throws IOException {\n+    reloginFromKeytab(checkTGT, false);\n+  }\n+\n+  private void reloginFromKeytab(boolean checkTGT, boolean ignoreTimeElapsed)", "originalCommit": "1c1f300b3783f65593ae7ea095b4c50fc3f55a29", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e6af89e52643cfb549c5b9b95638299717b2eb5f", "chunk": "diff --git a/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java b/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java\nindex 063cb2b9340..9518b8c5975 100644\n--- a/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java\n+++ b/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java\n\n@@ -1253,7 +1253,7 @@ private void reloginFromKeytab(boolean checkTGT) throws IOException {\n     reloginFromKeytab(checkTGT, false);\n   }\n \n-  private void reloginFromKeytab(boolean checkTGT, boolean ignoreTimeElapsed)\n+  private void reloginFromKeytab(boolean checkTGT, boolean ignoreLastLoginTime)\n       throws IOException {\n     if (!shouldRelogin() || !isFromKeytab()) {\n       return;\n"}}, {"oid": "e6af89e52643cfb549c5b9b95638299717b2eb5f", "url": "https://github.com/apache/hadoop/commit/e6af89e52643cfb549c5b9b95638299717b2eb5f", "message": "Incorporate review comments", "committedDate": "2020-08-26T23:44:59Z", "type": "commit"}, {"oid": "4c998cea613fdcc69a8212b3c856e8865194fbd3", "url": "https://github.com/apache/hadoop/commit/4c998cea613fdcc69a8212b3c856e8865194fbd3", "message": "fix checkstyle", "committedDate": "2020-08-27T02:36:45Z", "type": "commit"}]}