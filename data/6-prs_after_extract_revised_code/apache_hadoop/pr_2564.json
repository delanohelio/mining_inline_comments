{"pr_number": 2564, "pr_title": "YARN-10538: Add RECOMMISSIONING nodes to the list of updated nodes returned to the AM", "pr_createdAt": "2020-12-18T13:08:11Z", "pr_url": "https://github.com/apache/hadoop/pull/2564", "timeline": [{"oid": "abc89f1008364ec438c178ce5a43be23f0a0da0a", "url": "https://github.com/apache/hadoop/commit/abc89f1008364ec438c178ce5a43be23f0a0da0a", "message": "YARN-10538: Add RECOMMISSIONING nodes to the list of updated nodes returned to the AM", "committedDate": "2020-12-18T13:00:46Z", "type": "commit"}, {"oid": "3b60124bfd57360588c02c4f5bab6a71874809bd", "url": "https://github.com/apache/hadoop/commit/3b60124bfd57360588c02c4f5bab6a71874809bd", "message": "Fix checkstyle", "committedDate": "2020-12-21T05:26:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc2MTI2OA==", "url": "https://github.com/apache/hadoop/pull/2564#discussion_r546761268", "bodyText": "Cosmetic:\nCan you add a comment maybe suggesting that you're marking recommissioning nodes as usable or maybe even why you're marking them as usable. Just a thought.", "author": "surnaik", "createdAt": "2020-12-21T15:14:02Z", "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java", "diffHunk": "@@ -1325,6 +1325,10 @@ public void transition(RMNodeImpl rmNode, RMNodeEvent event) {\n           .handle(\n               new NodeResourceUpdateSchedulerEvent(rmNode, ResourceOption\n                   .newInstance(rmNode.totalCapability, 0)));\n+", "originalCommit": "3b60124bfd57360588c02c4f5bab6a71874809bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzY5NDIzMA==", "url": "https://github.com/apache/hadoop/pull/2564#discussion_r547694230", "bodyText": "Done", "author": "srinivasst", "createdAt": "2020-12-23T06:12:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc2MTI2OA=="}], "type": "inlineReview", "revised_code": {"commit": "efe342fcb5c876a2a54f9e14f5078a7638fb8d25", "chunk": "diff --git a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java\nindex fb3f468ef7f..cec9915e0d1 100644\n--- a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java\n+++ b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java\n\n@@ -1326,6 +1326,9 @@ public void transition(RMNodeImpl rmNode, RMNodeEvent event) {\n               new NodeResourceUpdateSchedulerEvent(rmNode, ResourceOption\n                   .newInstance(rmNode.totalCapability, 0)));\n \n+      // Notify NodesListManager to notify all RMApp that this node has been\n+      // recommissioned so that each Application Master can take any required\n+      // actions.\n       rmNode.context.getDispatcher().getEventHandler().handle(\n               new NodesListManagerEvent(\n                       NodesListManagerEventType.NODE_USABLE, rmNode));\n"}}, {"oid": "efe342fcb5c876a2a54f9e14f5078a7638fb8d25", "url": "https://github.com/apache/hadoop/commit/efe342fcb5c876a2a54f9e14f5078a7638fb8d25", "message": "Add comment", "committedDate": "2020-12-23T06:11:03Z", "type": "commit"}]}