{"pr_number": 1769, "pr_title": "Don't show game join menu item when game mode is ladder", "pr_createdAt": "2020-06-12T02:13:43Z", "pr_url": "https://github.com/FAForever/downlords-faf-client/pull/1769", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQyMzk2Nw==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1769#discussion_r439423967", "bodyText": "maybe link github issue", "author": "1-alex98", "createdAt": "2020-06-12T13:39:45Z", "path": "src/main/java/com/faforever/client/chat/ChatUserContextMenuController.java", "diffHunk": "@@ -201,9 +202,11 @@ public void setChatUser(ChatChannelUser chatUser) {\n       addFoeItem.visibleProperty().bind(newValue.socialStatusProperty().isNotEqualTo(FOE).and(newValue.socialStatusProperty().isNotEqualTo(SELF)));\n       removeFoeItem.visibleProperty().bind(newValue.socialStatusProperty().isEqualTo(FOE));\n \n+      // TODO: Make this ignore TMM games too and not just ladder", "originalCommit": "57bf4f3589ec7729f17b4ef954768fc4b697e9f5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bc5eb9c1e4897861a41964766a067d08fe9bf26b", "chunk": "diff --git a/src/main/java/com/faforever/client/chat/ChatUserContextMenuController.java b/src/main/java/com/faforever/client/chat/ChatUserContextMenuController.java\nindex 178aa0a1..ef404f6e 100644\n--- a/src/main/java/com/faforever/client/chat/ChatUserContextMenuController.java\n+++ b/src/main/java/com/faforever/client/chat/ChatUserContextMenuController.java\n\n@@ -203,13 +203,20 @@ public class ChatUserContextMenuController implements Controller<ContextMenu> {\n       removeFoeItem.visibleProperty().bind(newValue.socialStatusProperty().isEqualTo(FOE));\n \n       // TODO: Make this ignore TMM games too and not just ladder\n+      // https://github.com/FAForever/downlords-faf-client/issues/1770\n       joinGameItem.visibleProperty().bind(newValue.socialStatusProperty().isNotEqualTo(SELF)\n           .and(newValue.statusProperty().isEqualTo(PlayerStatus.LOBBYING)\n               .or(newValue.statusProperty().isEqualTo(PlayerStatus.HOSTING)))\n-          .and(newValue.getGame().featuredModProperty().isNotEqualTo(KnownFeaturedMod.LADDER_1V1.getTechnicalName())));\n+          .and(Bindings.createBooleanBinding(() -> {\n+                return newValue.getGame() != null\n+                    && newValue.getGame().getFeaturedMod() != null\n+                    && !newValue.getGame().getFeaturedMod().equals(KnownFeaturedMod.LADDER_1V1.getTechnicalName());\n+              }, newValue.gameProperty())\n+          ));\n       watchGameItem.visibleProperty().bind(newValue.statusProperty().isEqualTo(PlayerStatus.PLAYING));\n       inviteItem.visibleProperty().bind(newValue.socialStatusProperty().isNotEqualTo(SELF)\n           .and(newValue.statusProperty().isNotEqualTo(PlayerStatus.PLAYING)));\n+\n     };\n     JavaFxUtil.addListener(chatUser.playerProperty(), new WeakChangeListener<>(playerChangeListener));\n     playerChangeListener.changed(chatUser.playerProperty(), null, chatUser.getPlayer().orElse(null));\n"}}, {"oid": "bc5eb9c1e4897861a41964766a067d08fe9bf26b", "url": "https://github.com/FAForever/downlords-faf-client/commit/bc5eb9c1e4897861a41964766a067d08fe9bf26b", "message": "Use createBooleanBinding to handle null values", "committedDate": "2020-06-12T23:34:01Z", "type": "forcePushed"}, {"oid": "207ae9891c82ce64b5e318bca4f999e8351aaf3d", "url": "https://github.com/FAForever/downlords-faf-client/commit/207ae9891c82ce64b5e318bca4f999e8351aaf3d", "message": "#936 Don't show 'join game' toast for ladder games", "committedDate": "2020-06-18T19:25:22Z", "type": "forcePushed"}, {"oid": "887a85387773ae50aac2d9926094a58c8df34c61", "url": "https://github.com/FAForever/downlords-faf-client/commit/887a85387773ae50aac2d9926094a58c8df34c61", "message": "#936 Don't show 'join game' toast for ladder games", "committedDate": "2020-06-20T13:49:34Z", "type": "forcePushed"}, {"oid": "bb9c53df443fda2004b8aaf5ddbbf91993ee6581", "url": "https://github.com/FAForever/downlords-faf-client/commit/bb9c53df443fda2004b8aaf5ddbbf91993ee6581", "message": "Don't show game join menu item when game mode is ladder", "committedDate": "2020-06-20T21:39:22Z", "type": "commit"}, {"oid": "88c6aefedcb0795c467c6eece4f65da0e343dfa3", "url": "https://github.com/FAForever/downlords-faf-client/commit/88c6aefedcb0795c467c6eece4f65da0e343dfa3", "message": "Add link to github issue", "committedDate": "2020-06-20T21:39:22Z", "type": "commit"}, {"oid": "0d2328a9808e3b78dac5849b2d229b40573d6737", "url": "https://github.com/FAForever/downlords-faf-client/commit/0d2328a9808e3b78dac5849b2d229b40573d6737", "message": "Use createBooleanBinding to handle null values", "committedDate": "2020-06-20T21:39:22Z", "type": "commit"}, {"oid": "7c6ea52f784e8bc72fb3ca04425813eea619214b", "url": "https://github.com/FAForever/downlords-faf-client/commit/7c6ea52f784e8bc72fb3ca04425813eea619214b", "message": "#936 Don't show 'join game' toast for ladder games", "committedDate": "2020-06-20T21:39:22Z", "type": "commit"}, {"oid": "7c6ea52f784e8bc72fb3ca04425813eea619214b", "url": "https://github.com/FAForever/downlords-faf-client/commit/7c6ea52f784e8bc72fb3ca04425813eea619214b", "message": "#936 Don't show 'join game' toast for ladder games", "committedDate": "2020-06-20T21:39:22Z", "type": "forcePushed"}]}