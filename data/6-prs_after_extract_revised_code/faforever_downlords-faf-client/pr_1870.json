{"pr_number": 1870, "pr_title": "Store multiple game logs with time stamp", "pr_createdAt": "2020-08-29T13:40:19Z", "pr_url": "https://github.com/FAForever/downlords-faf-client/pull/1870", "timeline": [{"oid": "7f1f4b36d0a3e7a1958b7a8ef9a9cdd8ce41849b", "url": "https://github.com/FAForever/downlords-faf-client/commit/7f1f4b36d0a3e7a1958b7a8ef9a9cdd8ce41849b", "message": "Store up to 10 game logs with time stamp", "committedDate": "2020-08-29T13:39:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTY2MjA1Mw==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1870#discussion_r479662053", "bodyText": "How is that gonna look are there no seperation between Hours and minutes?", "author": "1-alex98", "createdAt": "2020-08-29T15:47:47Z", "path": "src/main/java/com/faforever/client/preferences/PreferencesService.java", "diffHunk": "@@ -346,6 +355,22 @@ public Path getThemesDirectory() {\n     return getFafDataDirectory().resolve(\"themes\");\n   }\n \n+  public Path getNewGameLogFile() {\n+    try (Stream<Path> listOfLogFiles = Files.list(getFafLogDirectory())) {\n+      listOfLogFiles\n+          .filter(p -> GAME_LOG_PATTERN.matcher(p.getFileName().toString()).matches())\n+          .sorted(Comparator.comparingLong(p -> p.toFile().lastModified()))\n+          .sorted(Collections.reverseOrder())\n+          .skip(NUMBER_GAME_LOGS_STORED - 1)\n+          .forEach(p -> noCatch(() -> Files.delete(p)));\n+    } catch (IOException e) {\n+      logger.error(\"Could not list log directory.\", e);\n+    } catch (NoCatchException e) {\n+      logger.error(\"Could not delete game log file\");\n+    }\n+    return getFafLogDirectory().resolve(new SimpleDateFormat(\"'game_'yyyy-MM-dd_HHmmss'.log'\").format(new Date()));", "originalCommit": "7f1f4b36d0a3e7a1958b7a8ef9a9cdd8ce41849b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTY5MzI5NA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1870#discussion_r479693294", "bodyText": "Thought this was a standard time format but can be changed if you have one you like better that is file valid", "author": "Sheikah45", "createdAt": "2020-08-29T21:49:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTY2MjA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc1OTY0Mg==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1870#discussion_r479759642", "bodyText": "idk I find it hard to read. Btw the old client used the game uuid as a name. Not sure of that would be an advantage. I think that was so you could match replay and game log.", "author": "1-alex98", "createdAt": "2020-08-30T11:47:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTY2MjA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc2MDQ4OA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1870#discussion_r479760488", "bodyText": "That might be better I will just change to that if it works for you", "author": "Sheikah45", "createdAt": "2020-08-30T11:54:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTY2MjA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc2MDg4MQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1870#discussion_r479760881", "bodyText": "Yeah sure. This is not what we gotta do, I also like the time. I am indecisive.", "author": "1-alex98", "createdAt": "2020-08-30T11:58:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTY2MjA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc2MjQwMg==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1870#discussion_r479762402", "bodyText": "Yeah personally I think the time might be more intuitive for the user than game uid and I can add a dash separator for the time", "author": "Sheikah45", "createdAt": "2020-08-30T12:13:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTY2MjA1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "3feffb1a4e9f2395e3b0b2c3178009fd7d00e51c", "chunk": "diff --git a/src/main/java/com/faforever/client/preferences/PreferencesService.java b/src/main/java/com/faforever/client/preferences/PreferencesService.java\nindex 0b4e2ba7..e725a581 100644\n--- a/src/main/java/com/faforever/client/preferences/PreferencesService.java\n+++ b/src/main/java/com/faforever/client/preferences/PreferencesService.java\n\n@@ -355,7 +353,7 @@ public class PreferencesService implements InitializingBean {\n     return getFafDataDirectory().resolve(\"themes\");\n   }\n \n-  public Path getNewGameLogFile() {\n+  public Path getNewGameLogFile(int gameUID) {\n     try (Stream<Path> listOfLogFiles = Files.list(getFafLogDirectory())) {\n       listOfLogFiles\n           .filter(p -> GAME_LOG_PATTERN.matcher(p.getFileName().toString()).matches())\n"}}, {"oid": "3feffb1a4e9f2395e3b0b2c3178009fd7d00e51c", "url": "https://github.com/FAForever/downlords-faf-client/commit/3feffb1a4e9f2395e3b0b2c3178009fd7d00e51c", "message": "Use game uid for naming log file", "committedDate": "2020-08-30T18:16:47Z", "type": "commit"}, {"oid": "f6ec6e4af49689bb6fa18241de959c60392d946b", "url": "https://github.com/FAForever/downlords-faf-client/commit/f6ec6e4af49689bb6fa18241de959c60392d946b", "message": "Update Unit Test", "committedDate": "2020-09-04T20:32:23Z", "type": "commit"}]}