{"pr_number": 1819, "pr_title": "Create game title text field changes border to red if not filled out", "pr_createdAt": "2020-07-09T21:26:20Z", "pr_url": "https://github.com/FAForever/downlords-faf-client/pull/1819", "timeline": [{"oid": "397a375d41e11f72089d951c4e238ecf9e647170", "url": "https://github.com/FAForever/downlords-faf-client/commit/397a375d41e11f72089d951c4e238ecf9e647170", "message": "Create game title text field changes background to red if not filled out", "committedDate": "2020-07-09T21:22:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjczNTE5MA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1819#discussion_r452735190", "bodyText": "We try to avoid hardcoding any styles. So basically, we never call setStyle(). Instead, have a look at titleTextField.pseudoClassStateChanged().\nAssuming we call the pseudo class invalid, it can then be styled like so:\n.game-title-input:invalid {\n  -fx-background-color: -bad;\n}\n... even though I think that a red background will look nasty :-) So I'd rather go with -fx-border-color: -bad", "author": "micheljung", "createdAt": "2020-07-10T09:34:57Z", "path": "src/main/java/com/faforever/client/game/CreateGameController.java", "diffHunk": "@@ -220,6 +222,15 @@ private void init() {\n     );\n   }\n \n+  private void adjustCreateGameButtonBackgroundColor(String newValue) {\n+    if (Strings.isNullOrEmpty(newValue)) {\n+      // titleTextField.setBackground(new Background(new BackgroundFill(Paint.valueOf(\"FF0000\"), CornerRadii.EMPTY, Insets.EMPTY)));\n+      titleTextField.setStyle(\"-fx-background-color: -bad;\");\n+    } else {\n+      titleTextField.setStyle(\"-fx-background-color: transparent;\");\n+    }\n+  }", "originalCommit": "397a375d41e11f72089d951c4e238ecf9e647170", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ0OTc3Nw==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1819#discussion_r456449777", "bodyText": "Resolving this as this was done", "author": "1-alex98", "createdAt": "2020-07-17T13:41:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjczNTE5MA=="}], "type": "inlineReview", "revised_code": {"commit": "eed23f662d6525679153f6e69fefd8e0c135b027", "chunk": "diff --git a/src/main/java/com/faforever/client/game/CreateGameController.java b/src/main/java/com/faforever/client/game/CreateGameController.java\nindex b02ad51d9..28e8975bb 100644\n--- a/src/main/java/com/faforever/client/game/CreateGameController.java\n+++ b/src/main/java/com/faforever/client/game/CreateGameController.java\n\n@@ -223,11 +224,11 @@ public class CreateGameController implements Controller<Pane> {\n   }\n \n   private void adjustCreateGameButtonBackgroundColor(String newValue) {\n+    PseudoClass invalidClass = PseudoClass.getPseudoClass(\"invalid\");\n     if (Strings.isNullOrEmpty(newValue)) {\n-      // titleTextField.setBackground(new Background(new BackgroundFill(Paint.valueOf(\"FF0000\"), CornerRadii.EMPTY, Insets.EMPTY)));\n-      titleTextField.setStyle(\"-fx-background-color: -bad;\");\n+      titleTextField.pseudoClassStateChanged(invalidClass, true);\n     } else {\n-      titleTextField.setStyle(\"-fx-background-color: transparent;\");\n+      titleTextField.pseudoClassStateChanged(invalidClass, false);\n     }\n   }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjczNTgxMw==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1819#discussion_r452735813", "bodyText": "Dead code should be removed", "author": "micheljung", "createdAt": "2020-07-10T09:36:09Z", "path": "src/main/java/com/faforever/client/game/CreateGameController.java", "diffHunk": "@@ -220,6 +222,15 @@ private void init() {\n     );\n   }\n \n+  private void adjustCreateGameButtonBackgroundColor(String newValue) {\n+    if (Strings.isNullOrEmpty(newValue)) {\n+      // titleTextField.setBackground(new Background(new BackgroundFill(Paint.valueOf(\"FF0000\"), CornerRadii.EMPTY, Insets.EMPTY)));", "originalCommit": "397a375d41e11f72089d951c4e238ecf9e647170", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "eed23f662d6525679153f6e69fefd8e0c135b027", "chunk": "diff --git a/src/main/java/com/faforever/client/game/CreateGameController.java b/src/main/java/com/faforever/client/game/CreateGameController.java\nindex b02ad51d9..28e8975bb 100644\n--- a/src/main/java/com/faforever/client/game/CreateGameController.java\n+++ b/src/main/java/com/faforever/client/game/CreateGameController.java\n\n@@ -223,11 +224,11 @@ public class CreateGameController implements Controller<Pane> {\n   }\n \n   private void adjustCreateGameButtonBackgroundColor(String newValue) {\n+    PseudoClass invalidClass = PseudoClass.getPseudoClass(\"invalid\");\n     if (Strings.isNullOrEmpty(newValue)) {\n-      // titleTextField.setBackground(new Background(new BackgroundFill(Paint.valueOf(\"FF0000\"), CornerRadii.EMPTY, Insets.EMPTY)));\n-      titleTextField.setStyle(\"-fx-background-color: -bad;\");\n+      titleTextField.pseudoClassStateChanged(invalidClass, true);\n     } else {\n-      titleTextField.setStyle(\"-fx-background-color: transparent;\");\n+      titleTextField.pseudoClassStateChanged(invalidClass, false);\n     }\n   }\n \n"}}, {"oid": "eed23f662d6525679153f6e69fefd8e0c135b027", "url": "https://github.com/FAForever/downlords-faf-client/commit/eed23f662d6525679153f6e69fefd8e0c135b027", "message": "Changes requested by @micheljung", "committedDate": "2020-07-10T11:47:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE3MTA0OA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1819#discussion_r453171048", "bodyText": "Add a unit test set the text to \"\" and to \"test\" and see if the Pseudo class is set correctly.", "author": "1-alex98", "createdAt": "2020-07-11T08:16:34Z", "path": "src/main/java/com/faforever/client/game/CreateGameController.java", "diffHunk": "@@ -195,7 +196,9 @@ private void init() {\n     titleTextField.textProperty().addListener((observable, oldValue, newValue) -> {\n       preferencesService.getPreferences().getLastGamePrefs().setLastGameTitle(newValue);\n       preferencesService.storeInBackground();\n+      adjustCreateGameButtonBackgroundColor(newValue);\n     });\n+    adjustCreateGameButtonBackgroundColor(titleTextField.getText());", "originalCommit": "eed23f662d6525679153f6e69fefd8e0c135b027", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE3MTEwMQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1819#discussion_r453171101", "bodyText": "Should be easy to test", "author": "1-alex98", "createdAt": "2020-07-11T08:17:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE3MTA0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ0OTk2NQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1819#discussion_r456449965", "bodyText": "Resolving this as this was done", "author": "1-alex98", "createdAt": "2020-07-17T13:41:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE3MTA0OA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "900deef60d14e53d0d2616e46b001fdff03813a1", "url": "https://github.com/FAForever/downlords-faf-client/commit/900deef60d14e53d0d2616e46b001fdff03813a1", "message": "Added test for red border if empty on create game title text field", "committedDate": "2020-07-11T11:16:21Z", "type": "commit"}]}