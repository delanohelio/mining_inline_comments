{"pr_number": 1561, "pr_title": "Don't omit coop maps from the local map list", "pr_createdAt": "2020-01-19T19:53:41Z", "pr_url": "https://github.com/FAForever/downlords-faf-client/pull/1561", "timeline": [{"oid": "cb1a91349a9ffa228139436e393f4c08811088ce", "url": "https://github.com/FAForever/downlords-faf-client/commit/cb1a91349a9ffa228139436e393f4c08811088ce", "message": "Fixes #1560 by no longer omitting coop maps from the local map list", "committedDate": "2020-01-19T19:51:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU0MjM3Mw==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1561#discussion_r368542373", "bodyText": "I'd either remove the else, therefore having it as an abort condition or swap if and else around.", "author": "Geosearchef", "createdAt": "2020-01-20T13:18:18Z", "path": "src/main/java/com/faforever/client/map/MapService.java", "diffHunk": "@@ -303,25 +303,20 @@ public Image loadPreview(String mapName, PreviewSize previewSize) {\n \n \n   public ObservableList<MapBean> getInstalledMaps() {\n-    return installedSkirmishMaps;\n+    return installedMaps;\n   }\n \n-\n   public Optional<MapBean> getMapLocallyFromName(String mapFolderName) {\n     logger.debug(\"Trying to find map '{}' locally\", mapFolderName);\n-    ObservableList<MapBean> installedMaps = getInstalledMaps();\n-    synchronized (installedMaps) {\n-      for (MapBean mapBean : installedMaps) {\n-        if (mapFolderName.equalsIgnoreCase(mapBean.getFolderName())) {\n-          logger.debug(\"Found map {} locally\", mapFolderName);\n-          return Optional.of(mapBean);\n-        }\n-      }\n+    String mapFolderKey = mapFolderName.toLowerCase();\n+    if (!mapsByFolderName.containsKey(mapFolderKey)) {\n+      return Optional.empty();\n+    } else {\n+      MapBean mapBean = mapsByFolderName.get(mapFolderKey);\n+      return Optional.of(mapBean);", "originalCommit": "cb1a91349a9ffa228139436e393f4c08811088ce", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b1c8a3591ec95c7cbab5d8e3431f391c41d1a1d5", "chunk": "diff --git a/src/main/java/com/faforever/client/map/MapService.java b/src/main/java/com/faforever/client/map/MapService.java\nindex b03a794c..be60360c 100644\n--- a/src/main/java/com/faforever/client/map/MapService.java\n+++ b/src/main/java/com/faforever/client/map/MapService.java\n\n@@ -309,12 +309,7 @@ public class MapService implements InitializingBean, DisposableBean {\n   public Optional<MapBean> getMapLocallyFromName(String mapFolderName) {\n     logger.debug(\"Trying to find map '{}' locally\", mapFolderName);\n     String mapFolderKey = mapFolderName.toLowerCase();\n-    if (!mapsByFolderName.containsKey(mapFolderKey)) {\n-      return Optional.empty();\n-    } else {\n-      MapBean mapBean = mapsByFolderName.get(mapFolderKey);\n-      return Optional.of(mapBean);\n-    }\n+    return Optional.ofNullable(mapsByFolderName.get(mapFolderKey));\n   }\n \n   public boolean isOfficialMap(String mapName) {\n"}}, {"oid": "b1c8a3591ec95c7cbab5d8e3431f391c41d1a1d5", "url": "https://github.com/FAForever/downlords-faf-client/commit/b1c8a3591ec95c7cbab5d8e3431f391c41d1a1d5", "message": "Simplified code\n\nhttps://github.com/FAForever/downlords-faf-client/pull/1561#discussion_r368542373", "committedDate": "2020-01-21T17:47:28Z", "type": "commit"}]}