{"pr_number": 1795, "pr_title": "Add game type description", "pr_createdAt": "2020-06-21T10:40:14Z", "pr_url": "https://github.com/FAForever/downlords-faf-client/pull/1795", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIxMzA1Ng==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1795#discussion_r443213056", "bodyText": "u need to do a null check on apply... also u need to remove the tooltip on null because the controller might be reused", "author": "1-alex98", "createdAt": "2020-06-21T12:06:25Z", "path": "src/main/java/com/faforever/client/fx/DualStringListCellController.java", "diffHunk": "@@ -21,6 +27,19 @@ public void setLeftText(String apply) {\n     left.setText(apply);\n   }\n \n+  public void setLeftTextTooltip(String apply) {\n+    final WebView web = new WebView();\n+    uiService.registerWebView(web);", "originalCommit": "a625effb0ff74d42b57676bceae0a799bda6c4e0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "741eb5a6e45d25e3d072ba392de54bcdba3fbcd9", "chunk": "diff --git a/src/main/java/com/faforever/client/fx/DualStringListCellController.java b/src/main/java/com/faforever/client/fx/DualStringListCellController.java\nindex c9a3ad14..bd0bbcea 100644\n--- a/src/main/java/com/faforever/client/fx/DualStringListCellController.java\n+++ b/src/main/java/com/faforever/client/fx/DualStringListCellController.java\n\n@@ -22,26 +20,19 @@ public class DualStringListCellController implements Controller<Node> {\n   public HBox root;\n   public Label left;\n   public Label right;\n+  public WebView webViewToolTip;\n \n   public void setLeftText(String apply) {\n     left.setText(apply);\n   }\n \n-  public void setLeftTextTooltip(String apply) {\n-    final WebView web = new WebView();\n-    uiService.registerWebView(web);\n-    web.setPrefSize(web.getPrefWidth() / 2, web.getPrefHeight() / 2);\n-    web.getEngine().loadContent(apply);\n-    final Tooltip  tip = new Tooltip();\n-    tip.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);\n-    tip.setGraphic(web);\n-    tip.setShowDelay(Duration.ZERO);\n-    tip.setHideDelay(Duration.seconds(3));\n-    left.setTooltip(tip);\n-  }\n+  public void setRightText(String apply) { right.setText(apply); }\n \n-  public void setRightText(String apply) {\n-    right.setText(apply);\n+  public void setWebViewToolTip(String apply) {\n+    if (!Strings.isNullOrEmpty(apply)) {\n+      uiService.registerWebView(webViewToolTip);\n+      webViewToolTip.getEngine().loadContent(apply);\n+    }\n   }\n \n   public void applyFont(Font font) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIxMzMwMg==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1795#discussion_r443213302", "bodyText": "we try to stick to mvc . So it should be done in fxml file. Either in this one for a serpate one. And further DualStringListCellController is a Class that is potentially used else where as well adding this pretty sepecific behaviour here seems strange, especially when the method is called setLeftTextTooltip, where it is rather addTooltipWithWebview. So yes u might add this webview capabilities here but make sue your naming reflects that it is not a normal tooltip. Also try define Webview and maybe even tooltip in fxml. On the other hand if it is hard to define in FXML I guess we can leave it tho. Further 3 seconds seem to be short. And dividing the pref size by half is also strange. Why do u do it? Maybe just hard code it :D Could even make use units dpending on screen size.", "author": "1-alex98", "createdAt": "2020-06-21T12:09:35Z", "path": "src/main/java/com/faforever/client/fx/DualStringListCellController.java", "diffHunk": "@@ -21,6 +27,19 @@ public void setLeftText(String apply) {\n     left.setText(apply);\n   }\n \n+  public void setLeftTextTooltip(String apply) {\n+    final WebView web = new WebView();\n+    uiService.registerWebView(web);\n+    web.setPrefSize(web.getPrefWidth() / 2, web.getPrefHeight() / 2);\n+    web.getEngine().loadContent(apply);\n+    final Tooltip  tip = new Tooltip();\n+    tip.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);\n+    tip.setGraphic(web);\n+    tip.setShowDelay(Duration.ZERO);\n+    tip.setHideDelay(Duration.seconds(3));\n+    left.setTooltip(tip);", "originalCommit": "a625effb0ff74d42b57676bceae0a799bda6c4e0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "741eb5a6e45d25e3d072ba392de54bcdba3fbcd9", "chunk": "diff --git a/src/main/java/com/faforever/client/fx/DualStringListCellController.java b/src/main/java/com/faforever/client/fx/DualStringListCellController.java\nindex c9a3ad14..bd0bbcea 100644\n--- a/src/main/java/com/faforever/client/fx/DualStringListCellController.java\n+++ b/src/main/java/com/faforever/client/fx/DualStringListCellController.java\n\n@@ -22,26 +20,19 @@ public class DualStringListCellController implements Controller<Node> {\n   public HBox root;\n   public Label left;\n   public Label right;\n+  public WebView webViewToolTip;\n \n   public void setLeftText(String apply) {\n     left.setText(apply);\n   }\n \n-  public void setLeftTextTooltip(String apply) {\n-    final WebView web = new WebView();\n-    uiService.registerWebView(web);\n-    web.setPrefSize(web.getPrefWidth() / 2, web.getPrefHeight() / 2);\n-    web.getEngine().loadContent(apply);\n-    final Tooltip  tip = new Tooltip();\n-    tip.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);\n-    tip.setGraphic(web);\n-    tip.setShowDelay(Duration.ZERO);\n-    tip.setHideDelay(Duration.seconds(3));\n-    left.setTooltip(tip);\n-  }\n+  public void setRightText(String apply) { right.setText(apply); }\n \n-  public void setRightText(String apply) {\n-    right.setText(apply);\n+  public void setWebViewToolTip(String apply) {\n+    if (!Strings.isNullOrEmpty(apply)) {\n+      uiService.registerWebView(webViewToolTip);\n+      webViewToolTip.getEngine().loadContent(apply);\n+    }\n   }\n \n   public void applyFont(Font font) {\n"}}, {"oid": "741eb5a6e45d25e3d072ba392de54bcdba3fbcd9", "url": "https://github.com/FAForever/downlords-faf-client/commit/741eb5a6e45d25e3d072ba392de54bcdba3fbcd9", "message": "Element creation and parameter setting performed in fxml file", "committedDate": "2020-08-29T20:46:42Z", "type": "forcePushed"}, {"oid": "59a114710dc4cc28b82d3da0184d7ff77817d6b5", "url": "https://github.com/FAForever/downlords-faf-client/commit/59a114710dc4cc28b82d3da0184d7ff77817d6b5", "message": "Update DualStringListCell.java add functionLeftOnHover\nUpdate DualStringListCellController.java add tooltip rendering when left label is overed\nUpdate CreateGameController.java add featured mod description", "committedDate": "2020-09-18T03:01:23Z", "type": "commit"}, {"oid": "68b1b9558ecc3ed3cf462a5746c4a7eb0059b5a7", "url": "https://github.com/FAForever/downlords-faf-client/commit/68b1b9558ecc3ed3cf462a5746c4a7eb0059b5a7", "message": "Update DualStringListCell.java DualStringListCellController.java CreateGameController.java rename function and variable to be more explicit", "committedDate": "2020-09-18T03:01:24Z", "type": "commit"}, {"oid": "379d5f8a5d0ddd0eb9c0deec2b244febf76dfbec", "url": "https://github.com/FAForever/downlords-faf-client/commit/379d5f8a5d0ddd0eb9c0deec2b244febf76dfbec", "message": "Element creation and parameter setting performed in fxml file", "committedDate": "2020-09-18T03:01:24Z", "type": "commit"}, {"oid": "379d5f8a5d0ddd0eb9c0deec2b244febf76dfbec", "url": "https://github.com/FAForever/downlords-faf-client/commit/379d5f8a5d0ddd0eb9c0deec2b244febf76dfbec", "message": "Element creation and parameter setting performed in fxml file", "committedDate": "2020-09-18T03:01:24Z", "type": "forcePushed"}, {"oid": "1689100b1090d0cbdeb6516f3502080181773e00", "url": "https://github.com/FAForever/downlords-faf-client/commit/1689100b1090d0cbdeb6516f3502080181773e00", "message": "Make tooltip show long enough for it to be read", "committedDate": "2020-09-20T09:43:31Z", "type": "commit"}, {"oid": "1689100b1090d0cbdeb6516f3502080181773e00", "url": "https://github.com/FAForever/downlords-faf-client/commit/1689100b1090d0cbdeb6516f3502080181773e00", "message": "Make tooltip show long enough for it to be read", "committedDate": "2020-09-20T09:43:31Z", "type": "forcePushed"}]}