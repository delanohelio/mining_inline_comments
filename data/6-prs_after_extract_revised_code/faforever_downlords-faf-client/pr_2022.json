{"pr_number": 2022, "pr_title": "Feature/#1890 Fix a bug when an player is not visible in chat list after removing from friend list", "pr_createdAt": "2020-11-08T07:45:44Z", "pr_url": "https://github.com/FAForever/downlords-faf-client/pull/2022", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2NTY2OQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/2022#discussion_r519865669", "bodyText": "These are only ever used followed by an .equals().\nWouldn't it be easier to write a\npublic boolean contains(Object item) ?", "author": "Brutus5000", "createdAt": "2020-11-09T14:44:29Z", "path": "src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java", "diffHunk": "@@ -13,6 +13,15 @@\n  */\n @Value\n class CategoryOrChatUserListItem {\n+\n   ChatUserCategory category;\n   ChatChannelUser user;\n+\n+  public boolean isUserItem() {\n+    return user != null;\n+  }\n+\n+  public boolean isCategoryItem() {\n+    return category != null;\n+  }", "originalCommit": "70350a2156125f42071191287b76e33315632d41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAzMjIzNg==", "url": "https://github.com/FAForever/downlords-faf-client/pull/2022#discussion_r520032236", "bodyText": "Ok, it is a good idea.", "author": "ivan-gryzunov", "createdAt": "2020-11-09T18:38:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2NTY2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0MTMwMA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/2022#discussion_r520041300", "bodyText": "I will not write this method. There is an easier way.", "author": "ivan-gryzunov", "createdAt": "2020-11-09T18:53:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2NTY2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA1NzUxMg==", "url": "https://github.com/FAForever/downlords-faf-client/pull/2022#discussion_r520057512", "bodyText": "See please https://github.com/FAForever/downlords-faf-client/pull/2022/files#diff-55c0277ffe170fd8988215bc63e3d03909588a2d72fb0fa2e9cca785cdd12bb9R500", "author": "ivan-gryzunov", "createdAt": "2020-11-09T19:13:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2NTY2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA2MjQ1Ng==", "url": "https://github.com/FAForever/downlords-faf-client/pull/2022#discussion_r520062456", "bodyText": "Why did you drop @Value? You could just configure the default constructor to be private and call the private constructor from your custom . If you drop @value you loose ToString, Equals and HashCode features from Lombok", "author": "Brutus5000", "createdAt": "2020-11-09T19:22:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2NTY2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA3MzIwOA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/2022#discussion_r520073208", "bodyText": "Reverted.", "author": "ivan-gryzunov", "createdAt": "2020-11-09T19:40:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2NTY2OQ=="}], "type": "inlineReview", "revised_code": {"commit": "f0f7cb4c4565a591a1ff9a388022eb900f9be276", "chunk": "diff --git a/src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java b/src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java\nindex 130bb46be..ecb764cf9 100644\n--- a/src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java\n+++ b/src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java\n\n@@ -17,11 +17,13 @@ class CategoryOrChatUserListItem {\n   ChatUserCategory category;\n   ChatChannelUser user;\n \n-  public boolean isUserItem() {\n-    return user != null;\n+  CategoryOrChatUserListItem(ChatUserCategory category) {\n+    this.category = category;\n+    this.user = null;\n   }\n \n-  public boolean isCategoryItem() {\n-    return category != null;\n+  CategoryOrChatUserListItem(ChatChannelUser user) {\n+    this.user = user;\n+    this.category = null;\n   }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2ODQwOQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/2022#discussion_r519868409", "bodyText": "While refactoring this class, why not offer either individual constructors only taking a category or a user or offering static builder function of(ChatUserCategory category) and  of(ChatChannelUser user)", "author": "Brutus5000", "createdAt": "2020-11-09T14:47:57Z", "path": "src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java", "diffHunk": "@@ -13,6 +13,15 @@\n  */\n @Value\n class CategoryOrChatUserListItem {", "originalCommit": "70350a2156125f42071191287b76e33315632d41", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f0f7cb4c4565a591a1ff9a388022eb900f9be276", "chunk": "diff --git a/src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java b/src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java\nindex 130bb46be..ecb764cf9 100644\n--- a/src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java\n+++ b/src/main/java/com/faforever/client/chat/CategoryOrChatUserListItem.java\n\n@@ -17,11 +17,13 @@ class CategoryOrChatUserListItem {\n   ChatUserCategory category;\n   ChatChannelUser user;\n \n-  public boolean isUserItem() {\n-    return user != null;\n+  CategoryOrChatUserListItem(ChatUserCategory category) {\n+    this.category = category;\n+    this.user = null;\n   }\n \n-  public boolean isCategoryItem() {\n-    return category != null;\n+  CategoryOrChatUserListItem(ChatChannelUser user) {\n+    this.user = user;\n+    this.category = null;\n   }\n }\n"}}, {"oid": "f0f7cb4c4565a591a1ff9a388022eb900f9be276", "url": "https://github.com/FAForever/downlords-faf-client/commit/f0f7cb4c4565a591a1ff9a388022eb900f9be276", "message": "#1890 fix a bug when a player is not visible in chat list after adding\nthen removing the player from friend list.", "committedDate": "2020-11-12T13:44:37Z", "type": "commit"}, {"oid": "f0f7cb4c4565a591a1ff9a388022eb900f9be276", "url": "https://github.com/FAForever/downlords-faf-client/commit/f0f7cb4c4565a591a1ff9a388022eb900f9be276", "message": "#1890 fix a bug when a player is not visible in chat list after adding\nthen removing the player from friend list.", "committedDate": "2020-11-12T13:44:37Z", "type": "forcePushed"}]}