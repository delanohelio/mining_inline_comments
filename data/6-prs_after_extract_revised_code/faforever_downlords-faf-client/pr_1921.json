{"pr_number": 1921, "pr_title": "Use addImmediateErrorNotification", "pr_createdAt": "2020-09-18T02:12:56Z", "pr_url": "https://github.com/FAForever/downlords-faf-client/pull/1921", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTg2ODM5Nw==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1921#discussion_r505868397", "bodyText": "All of these warning should either be moved outside the if block or customized to say more about the type of error.", "author": "Brutus5000", "createdAt": "2020-10-15T21:27:43Z", "path": "src/main/java/com/faforever/client/game/GenerateMapController.java", "diffHunk": "@@ -223,17 +223,17 @@ public void onGenerateMap() {\n   private void handleGenerationException(Throwable e) {\n     Throwable cause = e.getCause();\n     if (cause instanceof InvalidParameterException) {\n-      notificationService.addImmediateErrorNotification(e, \"mapGenerator.invalidName\");\n       log.warn(\"Map generation failed\", e);\n+      notificationService.addImmediateErrorNotification(e, \"mapGenerator.invalidName\");\n     } else if (cause instanceof UnsupportedVersionException) {\n-      notificationService.addImmediateErrorNotification(cause, \"mapGenerator.tooNewVersion\");\n       log.warn(\"Map generation failed\", e);\n+      notificationService.addImmediateErrorNotification(cause, \"mapGenerator.tooNewVersion\");\n     } else if (cause instanceof OutdatedVersionException) {\n-      notificationService.addImmediateErrorNotification(cause, \"mapGenerator.tooOldVersion\");\n       log.warn(\"Map generation failed\", e);\n+      notificationService.addImmediateErrorNotification(cause, \"mapGenerator.tooOldVersion\");\n     } else {\n-      notificationService.addImmediateErrorNotification(e, \"mapGenerator.generationFailed\");\n       log.warn(\"Map generation failed\", e);\n+      notificationService.addImmediateErrorNotification(e, \"mapGenerator.generationFailed\");\n     }\n   }", "originalCommit": "492817e4c835066ca49a89ac2654bef1d141bc40", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f80ee57ecf12813fbdca063a055d652e945492a1", "chunk": "diff --git a/src/main/java/com/faforever/client/game/GenerateMapController.java b/src/main/java/com/faforever/client/game/GenerateMapController.java\nindex 76043774..12ee2614 100644\n--- a/src/main/java/com/faforever/client/game/GenerateMapController.java\n+++ b/src/main/java/com/faforever/client/game/GenerateMapController.java\n\n@@ -223,17 +223,17 @@ public class GenerateMapController implements Controller<Pane> {\n   private void handleGenerationException(Throwable e) {\n     Throwable cause = e.getCause();\n     if (cause instanceof InvalidParameterException) {\n-      log.warn(\"Map generation failed\", e);\n       notificationService.addImmediateErrorNotification(e, \"mapGenerator.invalidName\");\n-    } else if (cause instanceof UnsupportedVersionException) {\n       log.warn(\"Map generation failed\", e);\n+    } else if (cause instanceof UnsupportedVersionException) {\n       notificationService.addImmediateErrorNotification(cause, \"mapGenerator.tooNewVersion\");\n-    } else if (cause instanceof OutdatedVersionException) {\n       log.warn(\"Map generation failed\", e);\n+    } else if (cause instanceof OutdatedVersionException) {\n       notificationService.addImmediateErrorNotification(cause, \"mapGenerator.tooOldVersion\");\n-    } else {\n       log.warn(\"Map generation failed\", e);\n+    } else {\n       notificationService.addImmediateErrorNotification(e, \"mapGenerator.generationFailed\");\n+      log.warn(\"Map generation failed\", e);\n     }\n   }\n \n"}}, {"oid": "f80ee57ecf12813fbdca063a055d652e945492a1", "url": "https://github.com/FAForever/downlords-faf-client/commit/f80ee57ecf12813fbdca063a055d652e945492a1", "message": "Use addImmediateErrorNotification inplace of ImmediateErrorNotification class", "committedDate": "2020-10-15T21:48:04Z", "type": "commit"}, {"oid": "25eec3aaf19af63039a9b1e72dd19d2be68548bc", "url": "https://github.com/FAForever/downlords-faf-client/commit/25eec3aaf19af63039a9b1e72dd19d2be68548bc", "message": "Add log statements before all addImmediateErrorNotification", "committedDate": "2020-10-15T21:48:09Z", "type": "commit"}, {"oid": "76b0b754d66e8bcb2655bcaf6fb62145708ad0f2", "url": "https://github.com/FAForever/downlords-faf-client/commit/76b0b754d66e8bcb2655bcaf6fb62145708ad0f2", "message": "Update unit tests", "committedDate": "2020-10-15T21:48:10Z", "type": "commit"}, {"oid": "786befc002be12f7a482cf92b7c2837262010d22", "url": "https://github.com/FAForever/downlords-faf-client/commit/786befc002be12f7a482cf92b7c2837262010d22", "message": "Update unit tests", "committedDate": "2020-10-15T21:48:10Z", "type": "commit"}, {"oid": "2fe15dcc5acb1886141f599bbfbf44f124a510c9", "url": "https://github.com/FAForever/downlords-faf-client/commit/2fe15dcc5acb1886141f599bbfbf44f124a510c9", "message": "Increase map generation log detail", "committedDate": "2020-10-15T21:50:54Z", "type": "commit"}, {"oid": "2fe15dcc5acb1886141f599bbfbf44f124a510c9", "url": "https://github.com/FAForever/downlords-faf-client/commit/2fe15dcc5acb1886141f599bbfbf44f124a510c9", "message": "Increase map generation log detail", "committedDate": "2020-10-15T21:50:54Z", "type": "forcePushed"}]}