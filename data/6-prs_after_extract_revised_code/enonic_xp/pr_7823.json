{"pr_number": 7823, "pr_title": "ES7: using ES_HOME env variable for embedded mode #7822", "pr_createdAt": "2020-01-17T10:43:06Z", "pr_url": "https://github.com/enonic/xp/pull/7823", "timeline": [{"oid": "bfcc4debdd3452a4694b1cab441f2d60c18248f3", "url": "https://github.com/enonic/xp/commit/bfcc4debdd3452a4694b1cab441f2d60c18248f3", "message": "ES7: using ES_HOME env variable for embedded mode #7822", "committedDate": "2020-01-17T12:03:14Z", "type": "commit"}, {"oid": "bfcc4debdd3452a4694b1cab441f2d60c18248f3", "url": "https://github.com/enonic/xp/commit/bfcc4debdd3452a4694b1cab441f2d60c18248f3", "message": "ES7: using ES_HOME env variable for embedded mode #7822", "committedDate": "2020-01-17T12:03:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzkwODU3NA==", "url": "https://github.com/enonic/xp/pull/7823#discussion_r367908574", "bodyText": "why toFile().toPath() ?", "author": "rymsha", "createdAt": "2020-01-17T12:18:13Z", "path": "modules/core/core-elasticsearch-server/src/main/java/com/enonic/xp/elasticsearch/server/config/ElasticsearchServerConfigResolver.java", "diffHunk": "@@ -49,13 +49,14 @@ private String getPathOfDirAsString( final String value, final String defaultSub\n             return value;\n         }\n \n-        return HomeDir.get().toFile().toPath().resolve( defaultSubPath ).toAbsolutePath().toString();\n-    }\n-\n-    public String resolveElasticServerDir()\n-    {\n-        final String value = configuration.esServerDir();\n-        return getPathOfDirAsString( value, \"../elasticsearch\" );\n+        try\n+        {\n+            return Files.createDirectories( HomeDir.get().toFile().toPath().resolve( defaultSubPath ) ).toAbsolutePath().toString();", "originalCommit": "bfcc4debdd3452a4694b1cab441f2d60c18248f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0NTMxOQ==", "url": "https://github.com/enonic/xp/pull/7823#discussion_r367945319", "bodyText": "HomeDir.get() returns an instance of HomeDir, so we need to call toFole and toPath", "author": "anatol-sialitski", "createdAt": "2020-01-17T13:53:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzkwODU3NA=="}], "type": "inlineReview", "revised_code": null}]}