{"pr_number": 8102, "pr_title": "Project creation locks in cluster environment #8100", "pr_createdAt": "2020-05-19T15:59:44Z", "pr_url": "https://github.com/enonic/xp/pull/8102", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxODM5MA==", "url": "https://github.com/enonic/xp/pull/8102#discussion_r427418390", "bodyText": "switch them. checking boolean is faster than checking isMaster", "author": "rymsha", "createdAt": "2020-05-19T16:02:31Z", "path": "modules/core/core-api/src/main/java/com/enonic/xp/init/Initializer.java", "diffHunk": "@@ -17,19 +17,22 @@\n \n     private final long initializationCheckMaxCount;\n \n+    private final boolean forceInitialization;\n+\n     protected Initializer( final Builder builder )\n     {\n         this.initializationCheckPeriod =\n             builder.initializationCheckPeriod == null ? INITIALIZATION_CHECK_PERIOD : builder.initializationCheckPeriod;\n         this.initializationCheckMaxCount =\n             builder.initializationCheckMaxCount == null ? INITIALIZATION_CHECK_MAX_COUNT : builder.initializationCheckMaxCount;\n+        this.forceInitialization = builder.forceInitialization;\n     }\n \n     public void initialize()\n     {\n         while ( true )\n         {\n-            if ( isMaster() )\n+            if ( isMaster() || this.forceInitialization )", "originalCommit": "58871e3eabffa1dcbbe402b8f4b5a514b9287e18", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2e244ab265b4b263258424b9c3c624eaa0f01269", "chunk": "diff --git a/modules/core/core-api/src/main/java/com/enonic/xp/init/Initializer.java b/modules/core/core-api/src/main/java/com/enonic/xp/init/Initializer.java\nindex 3a8fec3678..f0022b7d91 100644\n--- a/modules/core/core-api/src/main/java/com/enonic/xp/init/Initializer.java\n+++ b/modules/core/core-api/src/main/java/com/enonic/xp/init/Initializer.java\n\n@@ -32,7 +32,7 @@ public abstract class Initializer\n     {\n         while ( true )\n         {\n-            if ( isMaster() || this.forceInitialization )\n+            if ( this.forceInitialization || isMaster() )\n             {\n                 if ( !isInitialized() )\n                 {\n"}}, {"oid": "2e244ab265b4b263258424b9c3c624eaa0f01269", "url": "https://github.com/enonic/xp/commit/2e244ab265b4b263258424b9c3c624eaa0f01269", "message": "Project creation locks in cluster environment #8100", "committedDate": "2020-05-19T16:07:36Z", "type": "forcePushed"}, {"oid": "162b6eb2ded5c8aa358201f6280fade379e6ab19", "url": "https://github.com/enonic/xp/commit/162b6eb2ded5c8aa358201f6280fade379e6ab19", "message": "Project creation locks in cluster environment #8100", "committedDate": "2020-05-20T11:50:10Z", "type": "commit"}, {"oid": "162b6eb2ded5c8aa358201f6280fade379e6ab19", "url": "https://github.com/enonic/xp/commit/162b6eb2ded5c8aa358201f6280fade379e6ab19", "message": "Project creation locks in cluster environment #8100", "committedDate": "2020-05-20T11:50:10Z", "type": "forcePushed"}]}