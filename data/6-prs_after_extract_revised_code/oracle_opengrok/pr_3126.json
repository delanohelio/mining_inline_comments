{"pr_number": 3126, "pr_title": "add log entry and throw exception when message limit is exceeded", "pr_createdAt": "2020-04-22T19:32:09Z", "pr_url": "https://github.com/oracle/opengrok/pull/3126", "timeline": [{"oid": "40761cab60c515e87ada10dd699c110671607deb", "url": "https://github.com/oracle/opengrok/commit/40761cab60c515e87ada10dd699c110671607deb", "message": "add log entry and throw exception when message limit is exceeded", "committedDate": "2020-04-22T19:30:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ1Nzk3Mw==", "url": "https://github.com/oracle/opengrok/pull/3126#discussion_r413457973", "bodyText": "Odd spacing.\nAlso maybe it might be more terse as \"exceeded Configuration messageLimit of {0}\"?", "author": "idodeclare", "createdAt": "2020-04-23T02:14:03Z", "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/web/messages/MessagesContainer.java", "diffHunk": "@@ -121,7 +127,9 @@ public void addMessage(final Message m) {\n             }\n \n             if (isMessageLimitExceeded()) {\n-                return;\n+                LOGGER.log(Level.WARNING, \"cannot add message to the system, limit of {0} messages exceeded.\" +\n+                        \"consider setting the ''messageLimit'' tunable.\", messageLimit);", "originalCommit": "40761cab60c515e87ada10dd699c110671607deb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY4NjI0MQ==", "url": "https://github.com/oracle/opengrok/pull/3126#discussion_r413686241", "bodyText": "yes, that reads better.", "author": "vladak", "createdAt": "2020-04-23T10:06:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ1Nzk3Mw=="}], "type": "inlineReview", "revised_code": {"commit": "ae4dffc6f9a5039769902a4828b04d10cce8a658", "chunk": "diff --git a/opengrok-indexer/src/main/java/org/opengrok/indexer/web/messages/MessagesContainer.java b/opengrok-indexer/src/main/java/org/opengrok/indexer/web/messages/MessagesContainer.java\nindex 102405e082..0b3a9ce6da 100644\n--- a/opengrok-indexer/src/main/java/org/opengrok/indexer/web/messages/MessagesContainer.java\n+++ b/opengrok-indexer/src/main/java/org/opengrok/indexer/web/messages/MessagesContainer.java\n\n@@ -127,8 +127,8 @@ public class MessagesContainer {\n             }\n \n             if (isMessageLimitExceeded()) {\n-                LOGGER.log(Level.WARNING, \"cannot add message to the system, limit of {0} messages exceeded.\" +\n-                        \"consider setting the ''messageLimit'' tunable.\", messageLimit);\n+                LOGGER.log(Level.WARNING, \"cannot add message to the system, \" +\n+                                \"exceeded Configuration messageLimit of {0}\", messageLimit);\n                 throw new IllegalStateException(\"Cannot add message - message limit exceeded\");\n             }\n \n"}}, {"oid": "ae4dffc6f9a5039769902a4828b04d10cce8a658", "url": "https://github.com/oracle/opengrok/commit/ae4dffc6f9a5039769902a4828b04d10cce8a658", "message": "make the message shorter", "committedDate": "2020-04-23T10:05:59Z", "type": "commit"}]}