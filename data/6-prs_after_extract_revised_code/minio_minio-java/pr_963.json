{"pr_number": 963, "pr_title": "functional test: log exception thrown during setup/teardown in json format", "pr_createdAt": "2020-05-31T07:52:07Z", "pr_url": "https://github.com/minio/minio-java/pull/963", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0NjI3OA==", "url": "https://github.com/minio/minio-java/pull/963#discussion_r433046278", "bodyText": "This is not a test. It is a clean up function of setup(). If mint is the goal for this PR, just remove this.", "author": "balamurugana", "createdAt": "2020-06-01T05:22:54Z", "path": "functional/FunctionalTest.java", "diffHunk": "@@ -582,7 +582,18 @@ public static void setup() throws Exception {\n \n   /** Tear down test setup. */\n   public static void teardown() throws Exception {\n-    client.removeBucket(RemoveBucketArgs.builder().bucket(bucketName).build());\n+    String methodName = \"removeBucket(RemoveBucketArgs args)\";\n+\n+    if (!mintEnv) {\n+      System.out.println(\"Test: \" + methodName);", "originalCommit": "7af174af99711268672e5f3d6d7d9367498ce0e8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7d30fc5f2e052bcdffa721c8458ebfed33d72162", "chunk": "diff --git a/functional/FunctionalTest.java b/functional/FunctionalTest.java\nindex 0994b26f..a96f8267 100644\n--- a/functional/FunctionalTest.java\n+++ b/functional/FunctionalTest.java\n\n@@ -584,10 +584,6 @@ public class FunctionalTest {\n   public static void teardown() throws Exception {\n     String methodName = \"removeBucket(RemoveBucketArgs args)\";\n \n-    if (!mintEnv) {\n-      System.out.println(\"Test: \" + methodName);\n-    }\n-\n     long startTime = System.currentTimeMillis();\n     try {\n       client.removeBucket(RemoveBucketArgs.builder().bucket(bucketName).build());\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0NjQwOQ==", "url": "https://github.com/minio/minio-java/pull/963#discussion_r433046409", "bodyText": "You should print trace for non-mint env.", "author": "balamurugana", "createdAt": "2020-06-01T05:23:31Z", "path": "functional/FunctionalTest.java", "diffHunk": "@@ -4954,7 +4965,6 @@ public static void main(String[] args) throws Exception {\n         FunctionalTest.runQuickTests();\n       }\n     } catch (Exception e) {\n-      e.printStackTrace();", "originalCommit": "7af174af99711268672e5f3d6d7d9367498ce0e8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7d30fc5f2e052bcdffa721c8458ebfed33d72162", "chunk": "diff --git a/functional/FunctionalTest.java b/functional/FunctionalTest.java\nindex 0994b26f..a96f8267 100644\n--- a/functional/FunctionalTest.java\n+++ b/functional/FunctionalTest.java\n\n@@ -4965,6 +4961,9 @@ public class FunctionalTest {\n         FunctionalTest.runQuickTests();\n       }\n     } catch (Exception e) {\n+      if (!mintEnv) {\n+        e.printStackTrace();\n+      }\n       exitValue = -1;\n     } finally {\n       if (minioProcess != null) {\n"}}, {"oid": "7d30fc5f2e052bcdffa721c8458ebfed33d72162", "url": "https://github.com/minio/minio-java/commit/7d30fc5f2e052bcdffa721c8458ebfed33d72162", "message": "log exception thrown during teardown in json format", "committedDate": "2020-06-01T06:16:06Z", "type": "forcePushed"}, {"oid": "3b11ee5af233a9f63965eba24f1a805fe5be8963", "url": "https://github.com/minio/minio-java/commit/3b11ee5af233a9f63965eba24f1a805fe5be8963", "message": "log exception thrown during setup/teardown in json format", "committedDate": "2020-06-01T07:22:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIzMTM2Mg==", "url": "https://github.com/minio/minio-java/pull/963#discussion_r433231362", "bodyText": "No need to declare methodName", "author": "balamurugana", "createdAt": "2020-06-01T13:24:50Z", "path": "functional/FunctionalTest.java", "diffHunk": "@@ -577,12 +577,26 @@ public static void removeBucket_test() throws Exception {\n \n   /** Tear down test setup. */\n   public static void setup() throws Exception {\n-    client.makeBucket(MakeBucketArgs.builder().bucket(bucketName).build());\n+    String methodName = \"makeBucket(MakeBucketArgs args)\";", "originalCommit": "3b11ee5af233a9f63965eba24f1a805fe5be8963", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "044434ec17467c6e8dcc549d5faab70085337a50", "chunk": "diff --git a/functional/FunctionalTest.java b/functional/FunctionalTest.java\nindex a7899375..56795ab2 100644\n--- a/functional/FunctionalTest.java\n+++ b/functional/FunctionalTest.java\n\n@@ -577,25 +577,21 @@ public class FunctionalTest {\n \n   /** Tear down test setup. */\n   public static void setup() throws Exception {\n-    String methodName = \"makeBucket(MakeBucketArgs args)\";\n-\n     long startTime = System.currentTimeMillis();\n     try {\n       client.makeBucket(MakeBucketArgs.builder().bucket(bucketName).build());\n     } catch (Exception e) {\n-      handleException(methodName, null, startTime, e);\n+      handleException(\"makeBucket(MakeBucketArgs args)\", null, startTime, e);\n     }\n   }\n \n   /** Tear down test setup. */\n   public static void teardown() throws Exception {\n-    String methodName = \"removeBucket(RemoveBucketArgs args)\";\n-\n     long startTime = System.currentTimeMillis();\n     try {\n       client.removeBucket(RemoveBucketArgs.builder().bucket(bucketName).build());\n     } catch (Exception e) {\n-      handleException(methodName, null, startTime, e);\n+      handleException(\"removeBucket(RemoveBucketArgs args)\", null, startTime, e);\n     }\n   }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIzMTUzNA==", "url": "https://github.com/minio/minio-java/pull/963#discussion_r433231534", "bodyText": "Same as above", "author": "balamurugana", "createdAt": "2020-06-01T13:25:09Z", "path": "functional/FunctionalTest.java", "diffHunk": "@@ -577,12 +577,26 @@ public static void removeBucket_test() throws Exception {\n \n   /** Tear down test setup. */\n   public static void setup() throws Exception {\n-    client.makeBucket(MakeBucketArgs.builder().bucket(bucketName).build());\n+    String methodName = \"makeBucket(MakeBucketArgs args)\";\n+\n+    long startTime = System.currentTimeMillis();\n+    try {\n+      client.makeBucket(MakeBucketArgs.builder().bucket(bucketName).build());\n+    } catch (Exception e) {\n+      handleException(methodName, null, startTime, e);\n+    }\n   }\n \n   /** Tear down test setup. */\n   public static void teardown() throws Exception {\n-    client.removeBucket(RemoveBucketArgs.builder().bucket(bucketName).build());\n+    String methodName = \"removeBucket(RemoveBucketArgs args)\";", "originalCommit": "3b11ee5af233a9f63965eba24f1a805fe5be8963", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "044434ec17467c6e8dcc549d5faab70085337a50", "chunk": "diff --git a/functional/FunctionalTest.java b/functional/FunctionalTest.java\nindex a7899375..56795ab2 100644\n--- a/functional/FunctionalTest.java\n+++ b/functional/FunctionalTest.java\n\n@@ -577,25 +577,21 @@ public class FunctionalTest {\n \n   /** Tear down test setup. */\n   public static void setup() throws Exception {\n-    String methodName = \"makeBucket(MakeBucketArgs args)\";\n-\n     long startTime = System.currentTimeMillis();\n     try {\n       client.makeBucket(MakeBucketArgs.builder().bucket(bucketName).build());\n     } catch (Exception e) {\n-      handleException(methodName, null, startTime, e);\n+      handleException(\"makeBucket(MakeBucketArgs args)\", null, startTime, e);\n     }\n   }\n \n   /** Tear down test setup. */\n   public static void teardown() throws Exception {\n-    String methodName = \"removeBucket(RemoveBucketArgs args)\";\n-\n     long startTime = System.currentTimeMillis();\n     try {\n       client.removeBucket(RemoveBucketArgs.builder().bucket(bucketName).build());\n     } catch (Exception e) {\n-      handleException(methodName, null, startTime, e);\n+      handleException(\"removeBucket(RemoveBucketArgs args)\", null, startTime, e);\n     }\n   }\n \n"}}, {"oid": "044434ec17467c6e8dcc549d5faab70085337a50", "url": "https://github.com/minio/minio-java/commit/044434ec17467c6e8dcc549d5faab70085337a50", "message": "log exception thrown during setup/teardown in json format", "committedDate": "2020-06-01T14:45:21Z", "type": "commit"}, {"oid": "044434ec17467c6e8dcc549d5faab70085337a50", "url": "https://github.com/minio/minio-java/commit/044434ec17467c6e8dcc549d5faab70085337a50", "message": "log exception thrown during setup/teardown in json format", "committedDate": "2020-06-01T14:45:21Z", "type": "forcePushed"}]}