{"pr_number": 5450, "pr_title": "[Backport 0.24] Detect reprocessing issues", "pr_createdAt": "2020-10-01T05:34:18Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/5450", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODExNjYxOQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/5450#discussion_r498116619", "bodyText": "Can remove this, right? It is not relevant for 0.24.", "author": "deepthidevaki", "createdAt": "2020-10-01T09:43:43Z", "path": "upgrade-tests/src/test/java/io/zeebe/test/UpgradeTest.java", "diffHunk": "@@ -100,6 +103,42 @@\n                 .afterUpgrade(UpgradeTest::publishMessage)\n                 .done()\n           },\n+          // TODO (saig0): enable the test case when upgrading from 0.25.0", "originalCommit": "388669e6760815db95d6e3633a3063df7a404cff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODIxMDIxNw==", "url": "https://github.com/camunda-cloud/zeebe/pull/5450#discussion_r498210217", "bodyText": "True. I can remove it. It will never work for this version \ud83d\ude05", "author": "saig0", "createdAt": "2020-10-01T12:37:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODExNjYxOQ=="}], "type": "inlineReview", "revised_code": {"commit": "701b955e9972ae2d8dec747c0070accd2d86347b", "chunk": "diff --git a/upgrade-tests/src/test/java/io/zeebe/test/UpgradeTest.java b/upgrade-tests/src/test/java/io/zeebe/test/UpgradeTest.java\nindex 6758201ca0..4679fb6664 100644\n--- a/upgrade-tests/src/test/java/io/zeebe/test/UpgradeTest.java\n+++ b/upgrade-tests/src/test/java/io/zeebe/test/UpgradeTest.java\n\n@@ -103,42 +103,6 @@ public class UpgradeTest {\n                 .afterUpgrade(UpgradeTest::publishMessage)\n                 .done()\n           },\n-          // TODO (saig0): enable the test case when upgrading from 0.25.0\n-          // - an upgrade from 0.24.0 is not possible because a bug fix (#4959) causes an issue in\n-          // the reprocessing (#5268)\n-          //          {\n-          //            \"message event sub-process\",\n-          //            scenario()\n-          //                .deployWorkflow(\n-          //                    Bpmn.createExecutableProcess(PROCESS_ID)\n-          //                        .eventSubProcess(\n-          //                            \"event-subprocess\",\n-          //                            eventSubProcess ->\n-          //                                eventSubProcess\n-          //                                    .startEvent()\n-          //                                    .message(\n-          //                                        m ->\n-          // m.name(MESSAGE).zeebeCorrelationKeyExpression(\"key\"))\n-          //                                    .interrupting(false)\n-          //                                    .endEvent())\n-          //                        .startEvent()\n-          //                        .serviceTask(TASK, t -> t.zeebeJobType(TASK))\n-          //                        .endEvent()\n-          //                        .done())\n-          //                .createInstance(Map.of(\"key\", \"123\"))\n-          //                .beforeUpgrade(\n-          //                    state -> {\n-          //                      publishMessage(state, -1L, -1L);\n-          //\n-          //                      TestUtil.waitUntil(\n-          //                          () -> state.hasElementInState(\"event-subprocess\",\n-          // \"ELEMENT_COMPLETED\"));\n-          //\n-          //                      return activateJob(state);\n-          //                    })\n-          //                .afterUpgrade(UpgradeTest::completeJob)\n-          //                .done()\n-          //          },\n           {\n             \"timer\",\n             scenario()\n"}}, {"oid": "701b955e9972ae2d8dec747c0070accd2d86347b", "url": "https://github.com/camunda-cloud/zeebe/commit/701b955e9972ae2d8dec747c0070accd2d86347b", "message": "chore(engine): detect reprocessing failures\n\n* try to detect reprocessing issues while doing the reprocessing\n* the detection helps to root cause upgrade issues", "committedDate": "2020-10-01T13:01:49Z", "type": "commit"}, {"oid": "701b955e9972ae2d8dec747c0070accd2d86347b", "url": "https://github.com/camunda-cloud/zeebe/commit/701b955e9972ae2d8dec747c0070accd2d86347b", "message": "chore(engine): detect reprocessing failures\n\n* try to detect reprocessing issues while doing the reprocessing\n* the detection helps to root cause upgrade issues", "committedDate": "2020-10-01T13:01:49Z", "type": "forcePushed"}]}