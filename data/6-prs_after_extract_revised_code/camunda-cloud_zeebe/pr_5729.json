{"pr_number": 5729, "pr_title": "chore(broker): start embedded gateway after cluster services", "pr_createdAt": "2020-10-30T09:26:17Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/5729", "timeline": [{"oid": "3f006b7e7e6629f9c9ec8c795d6887993c5f7d4b", "url": "https://github.com/camunda-cloud/zeebe/commit/3f006b7e7e6629f9c9ec8c795d6887993c5f7d4b", "message": "chore(broker): start embedded gateway after cluster services", "committedDate": "2020-10-30T09:24:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgwNDMzOA==", "url": "https://github.com/camunda-cloud/zeebe/pull/5729#discussion_r515804338", "bodyText": "Could we please move it after the topology manger :)", "author": "Zelldon", "createdAt": "2020-11-02T08:24:00Z", "path": "broker/src/main/java/io/zeebe/broker/Broker.java", "diffHunk": "@@ -218,7 +219,6 @@ private StartProcess initStart() {\n             return embeddedGatewayService;\n           });\n     }\n-    startContext.addStep(\"cluster services\", () -> atomix.start().join());\n     startContext.addStep(\"topology manager\", () -> topologyManagerStep(clusterCfg, localBroker));", "originalCommit": "3f006b7e7e6629f9c9ec8c795d6887993c5f7d4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgwNzgxMA==", "url": "https://github.com/camunda-cloud/zeebe/pull/5729#discussion_r515807810", "bodyText": "@Zelldon Done :)", "author": "aivinog1", "createdAt": "2020-11-02T08:30:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgwNDMzOA=="}], "type": "inlineReview", "revised_code": {"commit": "a73d82c411379dd0c3f131c6a95f156479d13205", "chunk": "diff --git a/broker/src/main/java/io/zeebe/broker/Broker.java b/broker/src/main/java/io/zeebe/broker/Broker.java\nindex 4f3143c3e..2a9312be6 100644\n--- a/broker/src/main/java/io/zeebe/broker/Broker.java\n+++ b/broker/src/main/java/io/zeebe/broker/Broker.java\n\n@@ -219,7 +220,6 @@ public final class Broker implements AutoCloseable {\n             return embeddedGatewayService;\n           });\n     }\n-    startContext.addStep(\"topology manager\", () -> topologyManagerStep(clusterCfg, localBroker));\n     startContext.addStep(\"monitoring services\", () -> monitoringServerStep(localBroker));\n     startContext.addStep(\"disk space monitor\", () -> diskSpaceMonitorStep(brokerCfg.getData()));\n     startContext.addStep(\n"}}, {"oid": "a73d82c411379dd0c3f131c6a95f156479d13205", "url": "https://github.com/camunda-cloud/zeebe/commit/a73d82c411379dd0c3f131c6a95f156479d13205", "message": "chore(broker): start an embedded gateway after a topology manager", "committedDate": "2020-11-02T08:29:59Z", "type": "commit"}]}