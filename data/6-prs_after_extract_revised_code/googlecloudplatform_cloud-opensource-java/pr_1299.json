{"pr_number": 1299, "pr_title": "limit information in CLI error printing", "pr_createdAt": "2020-03-18T16:51:58Z", "pr_url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1299", "timeline": [{"oid": "cd42d6d57f7f0306e9ec7f4db2814c54190e4dbc", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/cd42d6d57f7f0306e9ec7f4db2814c54190e4dbc", "message": "limit information in CLI error printing", "committedDate": "2020-03-18T16:50:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU0NTA3Mw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1299#discussion_r394545073", "bodyText": "Does the command still shows available options when invoked without any argument?\nIf no, would you revert this? I rely on the help output to recall the arguments.", "author": "suztomo", "createdAt": "2020-03-18T18:09:23Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageCheckerArguments.java", "diffHunk": "@@ -84,9 +82,6 @@ static LinkageCheckerArguments readCommandLine(String... arguments) throws Parse\n       return new LinkageCheckerArguments(parser.parse(options, arguments));\n     } catch (IllegalArgumentException ex) {\n       throw new ParseException(\"Invalid URL syntax in Maven repository URL\");\n-    } catch (ParseException ex) {\n-      helpFormatter.printHelp(\"LinkageChecker\", options);", "originalCommit": "cd42d6d57f7f0306e9ec7f4db2814c54190e4dbc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYzMTg5NQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1299#discussion_r394631895", "bodyText": "It does not. We should distinguish help from an error condition. The most common convention seems to be that -h or --help prints help.", "author": "elharo", "createdAt": "2020-03-18T20:51:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU0NTA3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYzNjMxNQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1299#discussion_r394636315", "bodyText": "Common behaviors print the help when a required argument is missing. Would you update this PR to do so?", "author": "suztomo", "createdAt": "2020-03-18T20:59:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU0NTA3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY1NDg3Ng==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1299#discussion_r394654876", "bodyText": "I added a --help/-h option. With that there are no required arguments any more.\nAlso, I think there's an existing bug where jar files can't be selected.", "author": "elharo", "createdAt": "2020-03-18T21:39:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU0NTA3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2MTYzNg==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1299#discussion_r394661636", "bodyText": "I just ran LinkageCheckerMain in this branch without any argument and it existed 0 without showing anything. The empty output does not tell what option I have to add LinkgeCheckerMain.  Would you fix that?", "author": "suztomo", "createdAt": "2020-03-18T21:54:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU0NTA3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2MzU3NQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1299#discussion_r394663575", "bodyText": "Common behaviors print the help when a required argument is missing.\n\nI'm referring java or javac command without any argument, for example.", "author": "suztomo", "createdAt": "2020-03-18T21:58:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU0NTA3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NDEzMw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1299#discussion_r394664133", "bodyText": "I'll see your javac and raise you a gcc:\n$ gcc\ngcc: fatal error: no input files\ncompilation terminated.\n\nbut sure, whatever.", "author": "elharo", "createdAt": "2020-03-18T22:00:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU0NTA3Mw=="}], "type": "inlineReview", "revised_code": {"commit": "4ad6aa07c719feaed77ef2978632088b43afc491", "chunk": "diff --git a/dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageCheckerArguments.java b/dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageCheckerArguments.java\nindex 6075ce21..afc24d13 100644\n--- a/dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageCheckerArguments.java\n+++ b/dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageCheckerArguments.java\n\n@@ -79,9 +83,10 @@ final class LinkageCheckerArguments {\n     CommandLineParser parser = new DefaultParser();\n \n     try {\n-      return new LinkageCheckerArguments(parser.parse(options, arguments));\n+      CommandLine commandLine = parser.parse(options, arguments);\n+      return new LinkageCheckerArguments(commandLine);\n     } catch (IllegalArgumentException ex) {\n-      throw new ParseException(\"Invalid URL syntax in Maven repository URL\");\n+      throw new ParseException(\"Invalid URL syntax in Maven repository URL\" + ex.getMessage());\n     }\n   }\n \n"}}, {"oid": "28371359943e45c243d57f4ef6712bc61c470b77", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/28371359943e45c243d57f4ef6712bc61c470b77", "message": "Merge branch 'master' into 80b", "committedDate": "2020-03-18T20:50:23Z", "type": "commit"}, {"oid": "4ad6aa07c719feaed77ef2978632088b43afc491", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/4ad6aa07c719feaed77ef2978632088b43afc491", "message": "add --help", "committedDate": "2020-03-18T21:29:04Z", "type": "commit"}, {"oid": "9ab9bb9a02126ae63d13e9dda83725cfd0df366f", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/9ab9bb9a02126ae63d13e9dda83725cfd0df366f", "message": "Merge branch '80b' of github.com:GoogleCloudPlatform/cloud-opensource-java into 80b", "committedDate": "2020-03-18T21:29:32Z", "type": "commit"}, {"oid": "227da0f192d494a521118b5a6266d1a702339178", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/227da0f192d494a521118b5a6266d1a702339178", "message": "print help when no arguments are present", "committedDate": "2020-03-18T22:07:31Z", "type": "commit"}, {"oid": "4637f92520e51d174554f225af05a3bb0749c0ce", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/4637f92520e51d174554f225af05a3bb0749c0ce", "message": "update API doc", "committedDate": "2020-03-18T22:09:51Z", "type": "commit"}, {"oid": "9f6d98da306bd62913232a2055c95448c3038df9", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/9f6d98da306bd62913232a2055c95448c3038df9", "message": "Merge branch 'master' into 80b", "committedDate": "2020-03-19T11:15:04Z", "type": "commit"}]}