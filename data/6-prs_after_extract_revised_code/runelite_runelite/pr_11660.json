{"pr_number": 11660, "pr_title": "banktags: save last opened tab when opening worn items", "pr_createdAt": "2020-05-21T13:45:04Z", "pr_url": "https://github.com/runelite/runelite/pull/11660", "timeline": [{"oid": "34240bc23207e012b2a9b364efa50864547d15fc", "url": "https://github.com/runelite/runelite/commit/34240bc23207e012b2a9b364efa50864547d15fc", "message": "banktags: fix render of incinerator when enabling it and staying in bank\n\nIndependent of all my previous commits (i.e. currently replicable in\nmaster), given the situation when you open the bank with incinerator\ndisabled, enable the incinerator, and return to the main bank interface,\n the incinerator image is rendered larger than normal (normal being when\n you open the bank with incinerator enabled). This commit removes the\n error and, given the same situation, renders the incinerator as normal.", "committedDate": "2020-05-25T11:43:47Z", "type": "forcePushed"}, {"oid": "3f369395e1a35aee16f898f091e02744546413b8", "url": "https://github.com/runelite/runelite/commit/3f369395e1a35aee16f898f091e02744546413b8", "message": "banktags: reassign trigger to recall tag tab when staying within bank\n\nAs per the suggestion, I changed the trigger that recalls the last tag\ntab when switching interfaces within the bank, from checking that the\nmain bank interface is not hidden, to checking that one of two buttons\nhas been clicked, \"Hide worn items\" and \"Hide menu\". This must use the\ninvokeLater method because clicking either button changes the state of\nisHidden but the client must complete that process before recalling the\nsaved tag tab. The behavior should remain the same as the last commit.", "committedDate": "2020-05-26T11:28:29Z", "type": "forcePushed"}, {"oid": "4330f84cf098d5fc312d82a82c251482820293a2", "url": "https://github.com/runelite/runelite/commit/4330f84cf098d5fc312d82a82c251482820293a2", "message": "banktags: reassign trigger to recall tag tab when staying within bank\n\nAs per the suggestion, I changed the trigger that recalls the last tag\ntab when switching interfaces within the bank, from checking that the\nmain bank interface is not hidden, to checking that one of two buttons\nhas been clicked, \"Hide worn items\" and \"Hide menu\". This must use the\ninvokeLater method because clicking either button changes the state of\nisHidden but the client must complete that process before recalling the\nsaved tag tab. The behavior should remain the same as the last commit.", "committedDate": "2020-05-26T11:49:57Z", "type": "forcePushed"}, {"oid": "d9e389deab94a333f888e83aab0e3be9249875a2", "url": "https://github.com/runelite/runelite/commit/d9e389deab94a333f888e83aab0e3be9249875a2", "message": "banktags: save search when clicking buttons that show a new panel\n\nCo-authored-by: Ron Young <admin@ryoung.io>", "committedDate": "2020-05-30T01:44:58Z", "type": "forcePushed"}, {"oid": "63fb3a34b7339459b99e52344f659d5c49090081", "url": "https://github.com/runelite/runelite/commit/63fb3a34b7339459b99e52344f659d5c49090081", "message": "banktags: simplify actions upon clicking hide equipment or hide menu", "committedDate": "2020-06-01T09:38:10Z", "type": "forcePushed"}, {"oid": "207c6f012ecf4f0fa13578e707fa4bed5b6fba51", "url": "https://github.com/runelite/runelite/commit/207c6f012ecf4f0fa13578e707fa4bed5b6fba51", "message": "banktags: save last opened tab when opening worn items\n\nCurrent code overwrites the last opened tab when opening the worn items\ninterface within the bank. The change treats the worn items interface as\n a hidden state of the tabs and modifies the conditions under which the\n last opened tab is saved and recalled. Switching among any interface\n within the bank should remember the last opened tab normally.", "committedDate": "2020-06-02T01:44:22Z", "type": "commit"}, {"oid": "433355372d72befbd2fc8dc76cb0ea78e5bb3447", "url": "https://github.com/runelite/runelite/commit/433355372d72befbd2fc8dc76cb0ea78e5bb3447", "message": "banktags: not overwrite last opened tab on first login after startup\n\nGiven the circumstance that you exit the bank and save the last opened\ntab, close the client (not just log out), then launch the client and log\n in, current code overwrites the last saved tab after login. This\n solution adds a boolean that turns true and stays true only when the\n tab interface is, while not being hidden, initialized for the first\n time after client startup, i.e. when the bank is opened for the first\n time after client startup. The last saved tab should now keep its value\n  between client sessions.", "committedDate": "2020-06-02T01:44:22Z", "type": "commit"}, {"oid": "c717dd0bb83b90683b103ef88614e080dce64392", "url": "https://github.com/runelite/runelite/commit/c717dd0bb83b90683b103ef88614e080dce64392", "message": "banktags: reassign trigger to save tag tab when staying within bank\n\nAs per the suggestion, I changed the trigger that saves the last tag tab\n when switching interfaces within the bank, from checking that the main\nbank interface is hidden, to checking that one of two buttons has been\nclicked, \"Show worn items\" and \"Show menu\". I added new constants as\nnecessary and adjusted parts of the relevant logic. The logic to recall\nthe saved tag tab remains the same, barring further suggestions.", "committedDate": "2020-06-02T01:44:22Z", "type": "commit"}, {"oid": "7c899b97613b740c83a0a8c177929af9a01d4d5b", "url": "https://github.com/runelite/runelite/commit/7c899b97613b740c83a0a8c177929af9a01d4d5b", "message": "banktags: remove duplication of widgets when staying within bank\n\nFrom one of my previous commits, in the scenario where you start in the\nmain bank interface, click on either gear or settings, then return to\nmain bank interface, the code created duplicate widgets for upButton,\ndownButton, newTab and all tag tabs. This error was not visible unless\nyou right clicked on said widgets and found duplicate settings. The\nchange introduces an if block that differentiates the case of opening\nthe bank, and the case of switching among bank interfaces and returning\nto the main bank interface. This should get rid of duplicates without\nside effects.", "committedDate": "2020-06-02T01:44:22Z", "type": "commit"}, {"oid": "4ba0fc7158dd088e12ecae1b052298febff6d68e", "url": "https://github.com/runelite/runelite/commit/4ba0fc7158dd088e12ecae1b052298febff6d68e", "message": "banktags: fix render of incinerator when enabling it and staying in bank\n\nIndependent of all my previous commits (i.e. currently replicable in\nmaster), given the situation when you open the bank with incinerator\ndisabled, enable the incinerator, and return to the main bank interface,\n the incinerator image is rendered larger than normal (normal being when\n you open the bank with incinerator enabled). This commit removes the\n error and, given the same situation, renders the incinerator as normal.", "committedDate": "2020-06-02T01:44:22Z", "type": "commit"}, {"oid": "8fe7ed6be95bf9b8662c75c72628e39f8cbab49b", "url": "https://github.com/runelite/runelite/commit/8fe7ed6be95bf9b8662c75c72628e39f8cbab49b", "message": "banktags: edit trigger to save tag tab when staying within bank\n\nAdded a corner case of clicking on the bank tutorial button when a tag\ntab is selected to save tag tab.", "committedDate": "2020-06-02T01:44:22Z", "type": "commit"}, {"oid": "90cf4c70a07fb6bc497074efcaed58b44676cdc9", "url": "https://github.com/runelite/runelite/commit/90cf4c70a07fb6bc497074efcaed58b44676cdc9", "message": "banktags: reassign trigger to recall tag tab when staying within bank\n\nAs per the suggestion, I changed the trigger that recalls the last tag\ntab when switching interfaces within the bank, from checking that the\nmain bank interface is not hidden, to checking that one of two buttons\nhas been clicked, \"Hide worn items\" and \"Hide menu\". This must use the\ninvokeLater method because clicking either button changes the state of\nisHidden but the client must complete that process before recalling the\nsaved tag tab. The behavior should remain the same as the last commit.", "committedDate": "2020-06-02T01:44:23Z", "type": "commit"}, {"oid": "0bc1e867b5c8aedd7bea63919d44acf2e2d9b842", "url": "https://github.com/runelite/runelite/commit/0bc1e867b5c8aedd7bea63919d44acf2e2d9b842", "message": "banktags: save search when clicking buttons that show a new panel\n\nCo-authored-by: Ron Young <admin@ryoung.io>", "committedDate": "2020-06-02T01:44:23Z", "type": "commit"}, {"oid": "c2ad40cf58fdded52c834ee159ccd70c3d8270ab", "url": "https://github.com/runelite/runelite/commit/c2ad40cf58fdded52c834ee159ccd70c3d8270ab", "message": "banktags: simplify actions upon clicking hide equipment or hide menu", "committedDate": "2020-06-02T01:44:23Z", "type": "commit"}, {"oid": "e326f9028589ada6dc1d4807a03bb42238b3d85c", "url": "https://github.com/runelite/runelite/commit/e326f9028589ada6dc1d4807a03bb42238b3d85c", "message": "banktags: search remembered search on panel close\n\nCo-authored-by: Ron Young <admin@ryoung.io>", "committedDate": "2020-06-02T01:44:23Z", "type": "commit"}, {"oid": "e326f9028589ada6dc1d4807a03bb42238b3d85c", "url": "https://github.com/runelite/runelite/commit/e326f9028589ada6dc1d4807a03bb42238b3d85c", "message": "banktags: search remembered search on panel close\n\nCo-authored-by: Ron Young <admin@ryoung.io>", "committedDate": "2020-06-02T01:44:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkzMDQ5Ng==", "url": "https://github.com/runelite/runelite/pull/11660#discussion_r433930496", "bodyText": "remove this", "author": "raiyni", "createdAt": "2020-06-02T14:42:06Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java", "diffHunk": "@@ -150,6 +155,7 @@\n \tprivate Instant startScroll = Instant.now();\n \tprivate String rememberedSearch;\n \tprivate boolean waitSearchTick;\n+\tprivate boolean initializedOnce;", "originalCommit": "e326f9028589ada6dc1d4807a03bb42238b3d85c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2MDM3Nw==", "url": "https://github.com/runelite/runelite/pull/11660#discussion_r434260377", "bodyText": "Disagree, but I will revert this only on the basis that it doesn't directly relate to this thread, but it makes improvements which I documented in 4333553, and this should be added in the future if not now.", "author": "johannfrias", "createdAt": "2020-06-03T01:29:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkzMDQ5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2NTMyMg==", "url": "https://github.com/runelite/runelite/pull/11660#discussion_r434265322", "bodyText": "The listed code is no longer relevant and is unused.", "author": "raiyni", "createdAt": "2020-06-03T01:50:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkzMDQ5Ng=="}], "type": "inlineReview", "revised_code": {"commit": "67278cfed970e2b3ae6f86eb5d2e07d0582e27fe", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java b/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\nindex 815aab754..079479d3d 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\n\n@@ -155,7 +155,6 @@ public class TabInterface\n \tprivate Instant startScroll = Instant.now();\n \tprivate String rememberedSearch;\n \tprivate boolean waitSearchTick;\n-\tprivate boolean initializedOnce;\n \n \t@Getter\n \tprivate Widget upButton;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkzMDU2Nw==", "url": "https://github.com/runelite/runelite/pull/11660#discussion_r433930567", "bodyText": "remove this", "author": "raiyni", "createdAt": "2020-06-02T14:42:12Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java", "diffHunk": "@@ -202,6 +208,7 @@ public void init()\n \n \t\tcurrentTabIndex = config.position();\n \t\tparent = client.getWidget(WidgetInfo.BANK_CONTENT_CONTAINER);\n+\t\tinitializedOnce = true;", "originalCommit": "e326f9028589ada6dc1d4807a03bb42238b3d85c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2MDM5NA==", "url": "https://github.com/runelite/runelite/pull/11660#discussion_r434260394", "bodyText": "See comment \"Disagree, but...\" 4333553", "author": "johannfrias", "createdAt": "2020-06-03T01:29:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkzMDU2Nw=="}], "type": "inlineReview", "revised_code": {"commit": "67278cfed970e2b3ae6f86eb5d2e07d0582e27fe", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java b/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\nindex 815aab754..079479d3d 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\n\n@@ -208,7 +207,6 @@ public class TabInterface\n \n \t\tcurrentTabIndex = config.position();\n \t\tparent = client.getWidget(WidgetInfo.BANK_CONTENT_CONTAINER);\n-\t\tinitializedOnce = true;\n \n \t\tupdateBounds();\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkzMTAzMQ==", "url": "https://github.com/runelite/runelite/pull/11660#discussion_r433931031", "bodyText": "remove this", "author": "raiyni", "createdAt": "2020-06-02T14:42:48Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java", "diffHunk": "@@ -1092,6 +1123,7 @@ private void updateBounds()\n \t\t\tchild.setType(WidgetType.GRAPHIC);\n \t\t\tchild.setSpriteId(TabSprites.INCINERATOR.getSpriteId());\n \t\t\tincinerator.revalidate();\n+\t\t\tchild.revalidate();", "originalCommit": "e326f9028589ada6dc1d4807a03bb42238b3d85c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2MDQxOQ==", "url": "https://github.com/runelite/runelite/pull/11660#discussion_r434260419", "bodyText": "See comment \"Disagree, but...\" 4ba0fc7", "author": "johannfrias", "createdAt": "2020-06-03T01:29:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkzMTAzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "67278cfed970e2b3ae6f86eb5d2e07d0582e27fe", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java b/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\nindex 815aab754..079479d3d 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\n\n@@ -1123,7 +1121,6 @@ public class TabInterface\n \t\t\tchild.setType(WidgetType.GRAPHIC);\n \t\t\tchild.setSpriteId(TabSprites.INCINERATOR.getSpriteId());\n \t\t\tincinerator.revalidate();\n-\t\t\tchild.revalidate();\n \n \t\t\tbounds.setSize(TAB_WIDTH + MARGIN * 2, height - incinerator.getHeight());\n \t\t}\n"}}, {"oid": "67278cfed970e2b3ae6f86eb5d2e07d0582e27fe", "url": "https://github.com/runelite/runelite/commit/67278cfed970e2b3ae6f86eb5d2e07d0582e27fe", "message": "banktags: apply suggested changes, including revert 4333553 4ba0fc7", "committedDate": "2020-06-03T01:28:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwMTc2Ng==", "url": "https://github.com/runelite/runelite/pull/11660#discussion_r436301766", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tpublic void saveTab()\n          \n          \n            \n            \tprivate void saveTab()", "author": "Adam-", "createdAt": "2020-06-06T21:24:43Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java", "diffHunk": "@@ -578,6 +567,32 @@ else if (waitSearchTick)\n \t\tscrollTab(0);\n \t}\n \n+\tpublic void saveTab()", "originalCommit": "67278cfed970e2b3ae6f86eb5d2e07d0582e27fe", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e1319a4b8dc32c42fff42ce51e9ed6f10f45d656", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java b/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\nindex 079479d3d..a9c930258 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/banktags/tabs/TabInterface.java\n\n@@ -567,7 +567,7 @@ public class TabInterface\n \t\tscrollTab(0);\n \t}\n \n-\tpublic void saveTab()\n+\tprivate void saveTab()\n \t{\n \t\t// If bank window was just hidden, update last active tab position\n \t\tif (currentTabIndex != config.position())\n"}}, {"oid": "e1319a4b8dc32c42fff42ce51e9ed6f10f45d656", "url": "https://github.com/runelite/runelite/commit/e1319a4b8dc32c42fff42ce51e9ed6f10f45d656", "message": "banktags: update method modifier\n\nCo-authored-by: Adam <adam@sigterm.info>", "committedDate": "2020-06-11T02:10:43Z", "type": "commit"}]}