{"pr_number": 11529, "pr_title": "Canonicalize ItemManager price lookup IDs", "pr_createdAt": "2020-05-10T05:58:21Z", "pr_url": "https://github.com/runelite/runelite/pull/11529", "timeline": [{"oid": "e89b874977950fc93377f1dc3015b1144c6cb10c", "url": "https://github.com/runelite/runelite/commit/e89b874977950fc93377f1dc3015b1144c6cb10c", "message": "client: Simplify ItemContainer usage\n\nBecause itemManager#getItemPrice() canonicalizes the passed item ID, it\nis no longer necessary to get noted items' base IDs or otherwise\ncanonicalize item IDs before interacting with the method.", "committedDate": "2020-05-10T06:06:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYyNzYyNA==", "url": "https://github.com/runelite/runelite/pull/11529#discussion_r422627624", "bodyText": "executor is now unused", "author": "deathbeam", "createdAt": "2020-05-10T10:58:34Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/examine/ExaminePlugin.java", "diffHunk": "@@ -219,7 +219,7 @@ public void onChatMessage(ChatMessage event)\n \t\t\tif (itemComposition != null)\n \t\t\t{\n \t\t\t\tfinal int id = itemManager.canonicalize(itemComposition.getId());\n-\t\t\t\texecutor.submit(() -> getItemPrice(id, itemComposition, itemQuantity));\n+\t\t\t\tgetItemPrice(id, itemComposition, itemQuantity);", "originalCommit": "f641ba3324d43bc405b9cdcb673a9d4cd045a376", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2OTE3OQ==", "url": "https://github.com/runelite/runelite/pull/11529#discussion_r422669179", "bodyText": "Good point. \ud83d\udd2a", "author": "Nightfirecat", "createdAt": "2020-05-10T16:43:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYyNzYyNA=="}], "type": "inlineReview", "revised_code": {"commit": "d843ced6843162ac9fb6303a5de1ea7b15437103", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/examine/ExaminePlugin.java b/runelite-client/src/main/java/net/runelite/client/plugins/examine/ExaminePlugin.java\nindex 731bc78fc..5611ea656 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/examine/ExaminePlugin.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/examine/ExaminePlugin.java\n\n@@ -215,12 +211,7 @@ public class ExaminePlugin extends Plugin\n \t\t\t}\n \n \t\t\titemComposition = itemManager.getItemComposition(itemId);\n-\n-\t\t\tif (itemComposition != null)\n-\t\t\t{\n-\t\t\t\tfinal int id = itemManager.canonicalize(itemComposition.getId());\n-\t\t\t\tgetItemPrice(id, itemComposition, itemQuantity);\n-\t\t\t}\n+\t\t\tgetItemPrice(itemComposition.getId(), itemComposition, itemQuantity);\n \t\t}\n \t\telse\n \t\t{\n"}}, {"oid": "d843ced6843162ac9fb6303a5de1ea7b15437103", "url": "https://github.com/runelite/runelite/commit/d843ced6843162ac9fb6303a5de1ea7b15437103", "message": "client: Simplify ItemContainer usage\n\nBecause itemManager#getItemPrice() canonicalizes the passed item ID, it\nis no longer necessary to get noted items' base IDs or otherwise\ncanonicalize item IDs before interacting with the method.", "committedDate": "2020-05-10T16:43:10Z", "type": "forcePushed"}, {"oid": "8e6a36da674ab63f0cf0f5c06f4673948d393e08", "url": "https://github.com/runelite/runelite/commit/8e6a36da674ab63f0cf0f5c06f4673948d393e08", "message": "examine: Move price lookups off executor\n\nHistorically price lookup was done by sending a web request on price\nlookups, which required calls to be done on an executor. As of\na1ae397e11, client prices are loaded periodically and cached, thus no\nlonger imposing any thread requirement on price lookup.", "committedDate": "2020-05-23T18:27:17Z", "type": "commit"}, {"oid": "41d92c37d9bad89393e3db02fdab180248be0166", "url": "https://github.com/runelite/runelite/commit/41d92c37d9bad89393e3db02fdab180248be0166", "message": "itemmanager: Canonicalize price lookup item IDs", "committedDate": "2020-05-23T18:27:43Z", "type": "commit"}, {"oid": "363c1b41b50d4ccb752007e86b821969a9b67245", "url": "https://github.com/runelite/runelite/commit/363c1b41b50d4ccb752007e86b821969a9b67245", "message": "client: Simplify ItemContainer usage\n\nBecause itemManager#getItemPrice() canonicalizes the passed item ID, it\nis no longer necessary to get noted items' base IDs or otherwise\ncanonicalize item IDs before interacting with the method.", "committedDate": "2020-05-23T18:27:43Z", "type": "commit"}, {"oid": "363c1b41b50d4ccb752007e86b821969a9b67245", "url": "https://github.com/runelite/runelite/commit/363c1b41b50d4ccb752007e86b821969a9b67245", "message": "client: Simplify ItemContainer usage\n\nBecause itemManager#getItemPrice() canonicalizes the passed item ID, it\nis no longer necessary to get noted items' base IDs or otherwise\ncanonicalize item IDs before interacting with the method.", "committedDate": "2020-05-23T18:27:43Z", "type": "forcePushed"}]}