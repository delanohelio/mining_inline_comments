{"pr_number": 12048, "pr_title": "Key Mapping Plugin and authenticator", "pr_createdAt": "2020-07-01T13:17:37Z", "pr_url": "https://github.com/runelite/runelite/pull/12048", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc0NDk1MA==", "url": "https://github.com/runelite/runelite/pull/12048#discussion_r448744950", "bodyText": "This change should be made for all plugins, not just the keyremapping plugin. Move this change to KeyManager.", "author": "Nightfirecat", "createdAt": "2020-07-02T04:41:53Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/keyremapping/KeyRemappingListener.java", "diffHunk": "@@ -68,7 +68,7 @@ public void keyTyped(KeyEvent e)\n \t@Override\n \tpublic void keyPressed(KeyEvent e)\n \t{\n-\t\tif (client.getGameState() == GameState.LOGIN_SCREEN || !plugin.chatboxFocused())\n+\t\tif (client.getGameState() == GameState.LOGIN_SCREEN || client.getGameState() == GameState.LOGIN_SCREEN_AUTHENTICATOR || !plugin.chatboxFocused())", "originalCommit": "b60e74c1b79d03a4320c5c142f6f31698d50aa38", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk4NTczMQ==", "url": "https://github.com/runelite/runelite/pull/12048#discussion_r448985731", "bodyText": "I don't think the key remapper uses the key manager though, since it has its own remap logic?", "author": "Adam-", "createdAt": "2020-07-02T13:04:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc0NDk1MA=="}], "type": "inlineReview", "revised_code": {"commit": "a3bd5e50fa94cedf824b853c437636e9784b80fe", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/keyremapping/KeyRemappingListener.java b/runelite-client/src/main/java/net/runelite/client/plugins/keyremapping/KeyRemappingListener.java\nindex 26219b67d..f07ccbf55 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/keyremapping/KeyRemappingListener.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/keyremapping/KeyRemappingListener.java\n\n@@ -68,7 +68,7 @@ class KeyRemappingListener implements KeyListener\n \t@Override\n \tpublic void keyPressed(KeyEvent e)\n \t{\n-\t\tif (client.getGameState() == GameState.LOGIN_SCREEN || client.getGameState() == GameState.LOGIN_SCREEN_AUTHENTICATOR || !plugin.chatboxFocused())\n+\t\tif (client.getGameState() == GameState.LOGIN_SCREEN || !plugin.chatboxFocused())\n \t\t{\n \t\t\treturn;\n \t\t}\n"}}, {"oid": "a3bd5e50fa94cedf824b853c437636e9784b80fe", "url": "https://github.com/runelite/runelite/commit/a3bd5e50fa94cedf824b853c437636e9784b80fe", "message": "KeyManager: Block remaps on authenticator game state\n\nSimilar to 01bdbe5aabf4a14aa52b32acd2abc3f1270a2d34, we do not want to\nblock input when the user is inputting their authenticator code at the\nlogin screen.", "committedDate": "2020-07-07T04:57:37Z", "type": "commit"}, {"oid": "1c3331356bdb026cbfafdbbb93b8f38f6f42fe41", "url": "https://github.com/runelite/runelite/commit/1c3331356bdb026cbfafdbbb93b8f38f6f42fe41", "message": "keyremapping: Remove vestigial LOGIN_SCREEN guard clause\n\nKey remaps have been blocked at the KeyManager level as of commit\n01bdbe5aabf4a14aa52b32acd2abc3f1270a2d34, so a LOGIN_SCREEN game state\ncheck is no longer needed within individual KeyListeners.", "committedDate": "2020-07-07T04:57:47Z", "type": "forcePushed"}, {"oid": "349efebd58f0725988a9d290e1d0399189c286d8", "url": "https://github.com/runelite/runelite/commit/349efebd58f0725988a9d290e1d0399189c286d8", "message": "keyremapping: Remove vestigial LOGIN_SCREEN guard clause\n\nKey remaps have been blocked at the KeyManager level as of commit\n01bdbe5aabf4a14aa52b32acd2abc3f1270a2d34, so a LOGIN_SCREEN game state\ncheck is no longer needed within individual KeyListeners.", "committedDate": "2020-07-07T05:12:13Z", "type": "commit"}, {"oid": "349efebd58f0725988a9d290e1d0399189c286d8", "url": "https://github.com/runelite/runelite/commit/349efebd58f0725988a9d290e1d0399189c286d8", "message": "keyremapping: Remove vestigial LOGIN_SCREEN guard clause\n\nKey remaps have been blocked at the KeyManager level as of commit\n01bdbe5aabf4a14aa52b32acd2abc3f1270a2d34, so a LOGIN_SCREEN game state\ncheck is no longer needed within individual KeyListeners.", "committedDate": "2020-07-07T05:12:13Z", "type": "forcePushed"}]}