{"pr_number": 11310, "pr_title": "Add wise old man tracking to xp updater plugin", "pr_createdAt": "2020-04-18T06:56:52Z", "pr_url": "https://github.com/runelite/runelite/pull/11310", "timeline": [{"oid": "96f4c972d89f494e28718d59a723036f4075812b", "url": "https://github.com/runelite/runelite/commit/96f4c972d89f494e28718d59a723036f4075812b", "message": "Add wise old man tracking to xp updater plugin", "committedDate": "2020-04-27T18:34:15Z", "type": "forcePushed"}, {"oid": "b0b65cc82fd503838ead600dd2c72c7e0c3d200a", "url": "https://github.com/runelite/runelite/commit/b0b65cc82fd503838ead600dd2c72c7e0c3d200a", "message": "Add Wise Old Man to XP Updater plugin", "committedDate": "2020-04-28T16:54:38Z", "type": "forcePushed"}, {"oid": "2056a43ac496914b532e4a3e3f5450caf4e2f330", "url": "https://github.com/runelite/runelite/commit/2056a43ac496914b532e4a3e3f5450caf4e2f330", "message": "Add Wise Old Man to XP Updater plugin", "committedDate": "2020-04-28T17:35:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzAzNjUzMQ==", "url": "https://github.com/runelite/runelite/pull/11310#discussion_r417036531", "bodyText": "This appears to be unused after applying the first commit.", "author": "Nightfirecat", "createdAt": "2020-04-29T02:40:48Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java", "diffHunk": "@@ -124,7 +125,7 @@ public void onGameTick(GameTick gameTick)\n \t\t}\n \t}\n \n-\tprivate void sendUpdateRequest(String username)\n+\tprivate void update(String username)\n \t{\n \t\tString reformedUsername = username.replace(\" \", \"_\");\n \t\tOkHttpClient httpClient = RuneLiteAPI.CLIENT;", "originalCommit": "26e2ebe02867e746897a5236ea2233ce75c246f8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6a607a941d85f9ba72ad824f2320ab8514a28366", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java b/runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java\nindex fcab6c90b..5af93e1aa 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java\n\n@@ -128,7 +127,6 @@ public class XpUpdaterPlugin extends Plugin\n \tprivate void update(String username)\n \t{\n \t\tString reformedUsername = username.replace(\" \", \"_\");\n-\t\tOkHttpClient httpClient = RuneLiteAPI.CLIENT;\n \n \t\tif (config.cml())\n \t\t{\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzAzNjcwMQ==", "url": "https://github.com/runelite/runelite/pull/11310#discussion_r417036701", "bodyText": "All of your chained calls here are indented one level too far.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t\t.scheme(\"https\")\n          \n          \n            \n            \t\t\t\t\t.host(\"wiseoldman.net\")\n          \n          \n            \n            \t\t\t\t\t.addPathSegment(\"api\")\n          \n          \n            \n            \t\t\t\t\t.addPathSegment(\"players\")\n          \n          \n            \n            \t\t\t\t\t.addPathSegment(\"track\")\n          \n          \n            \n            \t\t\t\t\t.build();\n          \n          \n            \n            \t\t\t\t.scheme(\"https\")\n          \n          \n            \n            \t\t\t\t.host(\"wiseoldman.net\")\n          \n          \n            \n            \t\t\t\t.addPathSegment(\"api\")\n          \n          \n            \n            \t\t\t\t.addPathSegment(\"players\")\n          \n          \n            \n            \t\t\t\t.addPathSegment(\"track\")\n          \n          \n            \n            \t\t\t\t.build();", "author": "Nightfirecat", "createdAt": "2020-04-29T02:41:28Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java", "diffHunk": "@@ -166,6 +168,29 @@ private void update(String username)\n \n \t\t\tsendRequest(\"TempleOSRS\", request);\n \t\t}\n+\n+\t\tif (config.wiseoldman())\n+\t\t{\n+\t\t\tHttpUrl url = new HttpUrl.Builder()\n+\t\t\t\t\t.scheme(\"https\")\n+\t\t\t\t\t.host(\"wiseoldman.net\")\n+\t\t\t\t\t.addPathSegment(\"api\")\n+\t\t\t\t\t.addPathSegment(\"players\")\n+\t\t\t\t\t.addPathSegment(\"track\")\n+\t\t\t\t\t.build();", "originalCommit": "2056a43ac496914b532e4a3e3f5450caf4e2f330", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6a607a941d85f9ba72ad824f2320ab8514a28366", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java b/runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java\nindex dd68615b6..5af93e1aa 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/xpupdater/XpUpdaterPlugin.java\n\n@@ -168,32 +164,9 @@ public class XpUpdaterPlugin extends Plugin\n \n \t\t\tsendRequest(\"TempleOSRS\", request);\n \t\t}\n-\n-\t\tif (config.wiseoldman())\n-\t\t{\n-\t\t\tHttpUrl url = new HttpUrl.Builder()\n-\t\t\t\t\t.scheme(\"https\")\n-\t\t\t\t\t.host(\"wiseoldman.net\")\n-\t\t\t\t\t.addPathSegment(\"api\")\n-\t\t\t\t\t.addPathSegment(\"players\")\n-\t\t\t\t\t.addPathSegment(\"track\")\n-\t\t\t\t\t.build();\n-\n-\t\t\tRequestBody formBody = new FormBody.Builder()\n-\t\t\t\t\t.add(\"username\", username)\n-\t\t\t\t\t.build();\n-\n-\t\t\tRequest request = new Request.Builder()\n-\t\t\t\t\t.header(\"User-Agent\", \"RuneLite\")\n-\t\t\t\t\t.url(url)\n-\t\t\t\t\t.post(formBody)\n-\t\t\t\t\t.build();\n-\n-\t\t\tsendRequest(\"Wise Old Man\", request);\n-\t\t}\n \t}\n-\t\n-\tprivate void sendRequest(String platform, Request request)\n+\n+\tprivate static void sendRequest(String platform, Request request)\n \t{\n \t\tRuneLiteAPI.CLIENT.newCall(request).enqueue(new Callback()\n \t\t{\n"}}, {"oid": "6a607a941d85f9ba72ad824f2320ab8514a28366", "url": "https://github.com/runelite/runelite/commit/6a607a941d85f9ba72ad824f2320ab8514a28366", "message": "Refactor xp updater requests to use generic request sender method", "committedDate": "2020-04-29T02:49:38Z", "type": "commit"}, {"oid": "ec226e38e45ecfa32f7f878c0535de28ba1ed9c2", "url": "https://github.com/runelite/runelite/commit/ec226e38e45ecfa32f7f878c0535de28ba1ed9c2", "message": "Add Wise Old Man to XP Updater plugin", "committedDate": "2020-04-29T02:49:39Z", "type": "commit"}, {"oid": "ec226e38e45ecfa32f7f878c0535de28ba1ed9c2", "url": "https://github.com/runelite/runelite/commit/ec226e38e45ecfa32f7f878c0535de28ba1ed9c2", "message": "Add Wise Old Man to XP Updater plugin", "committedDate": "2020-04-29T02:49:39Z", "type": "forcePushed"}]}