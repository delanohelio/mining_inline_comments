{"pr_number": 12033, "pr_title": "Mining: Add session stats", "pr_createdAt": "2020-06-29T15:59:46Z", "pr_url": "https://github.com/runelite/runelite/pull/12033", "timeline": [{"oid": "5402f8cd9a51c8768790496276ae4515f77235c7", "url": "https://github.com/runelite/runelite/commit/5402f8cd9a51c8768790496276ae4515f77235c7", "message": "Add MiningPluginTest", "committedDate": "2020-06-29T16:29:23Z", "type": "forcePushed"}, {"oid": "ed10dad5ffc78dbb81ace766bc5b3cb0ddd8342f", "url": "https://github.com/runelite/runelite/commit/ed10dad5ffc78dbb81ace766bc5b3cb0ddd8342f", "message": "Add MiningPluginTest", "committedDate": "2020-06-29T16:33:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkzNjcxMA==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r449936710", "bodyText": "Copy pasta mistake \"tree\"", "author": "JesseAusten", "createdAt": "2020-07-06T00:28:37Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n+ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n+ * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n+ * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n+ * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import net.runelite.client.config.Config;\n+import net.runelite.client.config.ConfigGroup;\n+import net.runelite.client.config.ConfigItem;\n+import net.runelite.client.config.Units;\n+\n+@ConfigGroup(\"mining\")\n+public interface MiningConfig extends Config\n+{\n+\t@ConfigItem(\n+\t\tposition = 1,\n+\t\tkeyName = \"statTimeout\",\n+\t\tname = \"Reset stats\",\n+\t\tdescription = \"Configures the time until statistic is reset. Also configures when tree indicator is hidden\"", "originalCommit": "ed10dad5ffc78dbb81ace766bc5b3cb0ddd8342f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java\nindex dac755ee3..5d9b27c85 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java\n\n@@ -34,10 +34,9 @@ import net.runelite.client.config.Units;\n public interface MiningConfig extends Config\n {\n \t@ConfigItem(\n-\t\tposition = 1,\n \t\tkeyName = \"statTimeout\",\n \t\tname = \"Reset stats\",\n-\t\tdescription = \"Configures the time until statistic is reset. Also configures when tree indicator is hidden\"\n+\t\tdescription = \"Duration the mining indicator and session stats are displayed before being reset\"\n \t)\n \t@Units(Units.MINUTES)\n \tdefault int statTimeout()\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkzNzA1Nw==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r449937057", "bodyText": "Copyright name and date", "author": "JesseAusten", "createdAt": "2020-07-06T00:31:27Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningRocksOverlay.java", "diffHunk": "@@ -0,0 +1,144 @@\n+/*\n+ * Copyright (c) 2019, Adam <Adam@sigterm.info>", "originalCommit": "ed10dad5ffc78dbb81ace766bc5b3cb0ddd8342f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk3NjU5Ng==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r449976596", "bodyText": "I'm pretty sure this one is actually correct.", "author": "makingcomment", "createdAt": "2020-07-06T04:23:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkzNzA1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk4MDE5OQ==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r449980199", "bodyText": "Follow the commit history. This is Adam's work. I renamed the class.", "author": "JZomDev", "createdAt": "2020-07-06T04:40:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkzNzA1Nw=="}], "type": "inlineReview", "revised_code": {"commit": "f84379ca29be6ed02dcd506ae9b8680b6b4df85a", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningRocksOverlay.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningRocksOverlay.java\nindex 44a963eb9..8fffd1300 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningRocksOverlay.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningRocksOverlay.java\n\n@@ -59,16 +59,14 @@ class MiningRocksOverlay extends Overlay\n \n \tprivate final Client client;\n \tprivate final MiningPlugin plugin;\n-\tprivate final MiningConfig config;\n \n \t@Inject\n-\tprivate MiningRocksOverlay(Client client, MiningPlugin plugin, MiningConfig config)\n+\tprivate MiningRocksOverlay(Client client, MiningPlugin plugin)\n \t{\n \t\tsetPosition(OverlayPosition.DYNAMIC);\n \t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n \t\tthis.plugin = plugin;\n \t\tthis.client = client;\n-\t\tthis.config = config;\n \t}\n \n \t@Override\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU0ODY2MA==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r450548660", "bodyText": "The positions can be omitted since these are already sorted in this order alphabetically.", "author": "Nightfirecat", "createdAt": "2020-07-07T00:36:10Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n+ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n+ * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n+ * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n+ * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import net.runelite.client.config.Config;\n+import net.runelite.client.config.ConfigGroup;\n+import net.runelite.client.config.ConfigItem;\n+import net.runelite.client.config.Units;\n+\n+@ConfigGroup(\"mining\")\n+public interface MiningConfig extends Config\n+{\n+\t@ConfigItem(\n+\t\tposition = 1,", "originalCommit": "d9425e5ae7f10b680b8909837481c490609bab69", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java\nindex 05d3b893a..5d9b27c85 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java\n\n@@ -34,10 +34,9 @@ import net.runelite.client.config.Units;\n public interface MiningConfig extends Config\n {\n \t@ConfigItem(\n-\t\tposition = 1,\n \t\tkeyName = \"statTimeout\",\n \t\tname = \"Reset stats\",\n-\t\tdescription = \"Configures the time until statistic is reset. Also configures when mining indicator is hidden\"\n+\t\tdescription = \"Duration the mining indicator and session stats are displayed before being reset\"\n \t)\n \t@Units(Units.MINUTES)\n \tdefault int statTimeout()\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU1MDI0Nw==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r450550247", "bodyText": "This wording needs work. Prepending the description with \"Configures\" doesn't make it more clear or concise. For instance, I'd write the following for this config: \"Duration the mining indicator and session stats are displayed before being reset.\"", "author": "Nightfirecat", "createdAt": "2020-07-07T00:42:46Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n+ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n+ * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n+ * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n+ * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import net.runelite.client.config.Config;\n+import net.runelite.client.config.ConfigGroup;\n+import net.runelite.client.config.ConfigItem;\n+import net.runelite.client.config.Units;\n+\n+@ConfigGroup(\"mining\")\n+public interface MiningConfig extends Config\n+{\n+\t@ConfigItem(\n+\t\tposition = 1,\n+\t\tkeyName = \"statTimeout\",\n+\t\tname = \"Reset stats\",\n+\t\tdescription = \"Configures the time until statistic is reset. Also configures when mining indicator is hidden\"", "originalCommit": "d9425e5ae7f10b680b8909837481c490609bab69", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java\nindex 05d3b893a..5d9b27c85 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningConfig.java\n\n@@ -34,10 +34,9 @@ import net.runelite.client.config.Units;\n public interface MiningConfig extends Config\n {\n \t@ConfigItem(\n-\t\tposition = 1,\n \t\tkeyName = \"statTimeout\",\n \t\tname = \"Reset stats\",\n-\t\tdescription = \"Configures the time until statistic is reset. Also configures when mining indicator is hidden\"\n+\t\tdescription = \"Duration the mining indicator and session stats are displayed before being reset\"\n \t)\n \t@Units(Units.MINUTES)\n \tdefault int statTimeout()\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU1MDkwOQ==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r450550909", "bodyText": "Users can check configs to discover they can enable one or the other, no need to explicitly state that here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tdescription = \"Show mining statistics and/or ore respawn timers\",\n          \n          \n            \n            \tdescription = \"Show mining statistics and ore respawn timers\",", "author": "Nightfirecat", "createdAt": "2020-07-07T00:45:22Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java", "diffHunk": "@@ -42,27 +47,41 @@\n import static net.runelite.api.ObjectID.ORE_VEIN_26662;\n import static net.runelite.api.ObjectID.ORE_VEIN_26663;\n import static net.runelite.api.ObjectID.ORE_VEIN_26664;\n+import net.runelite.api.Player;\n import net.runelite.api.WallObject;\n import net.runelite.api.coords.WorldPoint;\n+import net.runelite.api.events.AnimationChanged;\n+import net.runelite.api.events.ChatMessage;\n import net.runelite.api.events.GameObjectDespawned;\n import net.runelite.api.events.GameObjectSpawned;\n import net.runelite.api.events.GameStateChanged;\n import net.runelite.api.events.GameTick;\n import net.runelite.api.events.WallObjectSpawned;\n+import net.runelite.client.config.ConfigManager;\n import net.runelite.client.eventbus.Subscribe;\n import net.runelite.client.plugins.Plugin;\n+import net.runelite.client.plugins.PluginDependency;\n import net.runelite.client.plugins.PluginDescriptor;\n+import net.runelite.client.plugins.xptracker.XpTrackerPlugin;\n import net.runelite.client.ui.overlay.OverlayManager;\n \n @PluginDescriptor(\n \tname = \"Mining\",\n-\tdescription = \"Show ore respawn timers\",\n-\ttags = {\"overlay\", \"skilling\", \"timers\"},\n+\tdescription = \"Show mining statistics and/or ore respawn timers\",", "originalCommit": "d9425e5ae7f10b680b8909837481c490609bab69", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java\nindex 6924fcbe4..41fd9701d 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java\n\n@@ -67,8 +67,8 @@ import net.runelite.client.ui.overlay.OverlayManager;\n \n @PluginDescriptor(\n \tname = \"Mining\",\n-\tdescription = \"Show mining statistics and/or ore respawn timers\",\n-\ttags = {\"overlay\", \"skilling\", \"timers\", \"mining\"},\n+\tdescription = \"Show mining statistics and ore respawn timers\",\n+\ttags = {\"overlay\", \"skilling\", \"timers\"},\n \tenabledByDefault = false\n )\n @PluginDependency(XpTrackerPlugin.class)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU1MTE1NA==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r450551154", "bodyText": "Plugin search already checks the plugin name and description for terms, this doesn't need to be defined here as well.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \ttags = {\"overlay\", \"skilling\", \"timers\", \"mining\"},\n          \n          \n            \n            \ttags = {\"overlay\", \"skilling\", \"timers\"},", "author": "Nightfirecat", "createdAt": "2020-07-07T00:46:17Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java", "diffHunk": "@@ -42,27 +47,41 @@\n import static net.runelite.api.ObjectID.ORE_VEIN_26662;\n import static net.runelite.api.ObjectID.ORE_VEIN_26663;\n import static net.runelite.api.ObjectID.ORE_VEIN_26664;\n+import net.runelite.api.Player;\n import net.runelite.api.WallObject;\n import net.runelite.api.coords.WorldPoint;\n+import net.runelite.api.events.AnimationChanged;\n+import net.runelite.api.events.ChatMessage;\n import net.runelite.api.events.GameObjectDespawned;\n import net.runelite.api.events.GameObjectSpawned;\n import net.runelite.api.events.GameStateChanged;\n import net.runelite.api.events.GameTick;\n import net.runelite.api.events.WallObjectSpawned;\n+import net.runelite.client.config.ConfigManager;\n import net.runelite.client.eventbus.Subscribe;\n import net.runelite.client.plugins.Plugin;\n+import net.runelite.client.plugins.PluginDependency;\n import net.runelite.client.plugins.PluginDescriptor;\n+import net.runelite.client.plugins.xptracker.XpTrackerPlugin;\n import net.runelite.client.ui.overlay.OverlayManager;\n \n @PluginDescriptor(\n \tname = \"Mining\",\n-\tdescription = \"Show ore respawn timers\",\n-\ttags = {\"overlay\", \"skilling\", \"timers\"},\n+\tdescription = \"Show mining statistics and/or ore respawn timers\",\n+\ttags = {\"overlay\", \"skilling\", \"timers\", \"mining\"},", "originalCommit": "d9425e5ae7f10b680b8909837481c490609bab69", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java\nindex 6924fcbe4..41fd9701d 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningPlugin.java\n\n@@ -67,8 +67,8 @@ import net.runelite.client.ui.overlay.OverlayManager;\n \n @PluginDescriptor(\n \tname = \"Mining\",\n-\tdescription = \"Show mining statistics and/or ore respawn timers\",\n-\ttags = {\"overlay\", \"skilling\", \"timers\", \"mining\"},\n+\tdescription = \"Show mining statistics and ore respawn timers\",\n+\ttags = {\"overlay\", \"skilling\", \"timers\"},\n \tenabledByDefault = false\n )\n @PluginDependency(XpTrackerPlugin.class)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU1MTQ4Mg==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r450551482", "bodyText": "Since each of these test methods contains the same body, move the messages into a list and run these tests against each message from the list in a loop.", "author": "Nightfirecat", "createdAt": "2020-07-07T00:47:43Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java", "diffHunk": "@@ -0,0 +1,174 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import com.google.inject.Guice;\n+import com.google.inject.testing.fieldbinder.Bind;\n+import com.google.inject.testing.fieldbinder.BoundFieldModule;\n+import javax.inject.Inject;\n+import net.runelite.api.ChatMessageType;\n+import net.runelite.api.Client;\n+import net.runelite.api.events.ChatMessage;\n+import net.runelite.client.Notifier;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import static org.junit.Assert.assertNotNull;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class MiningPluginTest\n+{\n+\t@Inject\n+\tMiningPlugin miningPlugin;\n+\n+\t@Mock\n+\t@Bind\n+\tMiningConfig miningConfig;\n+\n+\t@Mock\n+\t@Bind\n+\tNotifier notifier;\n+\n+\t@Mock\n+\t@Bind\n+\tClient client;\n+\n+\t@Mock\n+\t@Bind\n+\tMiningOverlay miningOverlay;\n+\n+\t@Mock\n+\t@Bind\n+\tMiningRocksOverlay miningRocksOverlay;\n+\n+\t@Mock\n+\t@Bind\n+\tOverlayManager overlayManager;\n+\n+\t@Before\n+\tpublic void before()\n+\t{\n+\t\tGuice.createInjector(BoundFieldModule.of(this)).injectMembers(this);\n+\t}\n+\n+\t@Test\n+\tpublic void testClay()\n+\t{\n+\t\tChatMessage chatMessage = new ChatMessage(null, ChatMessageType.SPAM, \"\", \"You manage to mine some clay.\", \"\", 0);\n+\t\tminingPlugin.onChatMessage(chatMessage);\n+\t\tassertNotNull(miningPlugin.getSession());", "originalCommit": "d9425e5ae7f10b680b8909837481c490609bab69", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java b/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java\nindex 4ec29dd81..376c5b619 100644\n--- a/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java\n+++ b/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java\n\n@@ -24,12 +24,14 @@\n  */\n package net.runelite.client.plugins.mining;\n \n+import com.google.common.collect.ImmutableList;\n import com.google.inject.Guice;\n import com.google.inject.testing.fieldbinder.Bind;\n import com.google.inject.testing.fieldbinder.BoundFieldModule;\n import javax.inject.Inject;\n import net.runelite.api.ChatMessageType;\n import net.runelite.api.Client;\n+import net.runelite.api.ItemID;\n import net.runelite.api.events.ChatMessage;\n import net.runelite.client.Notifier;\n import net.runelite.client.ui.overlay.OverlayManager;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU1MTkyNg==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r450551926", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tstatic Pickaxe findPickaxeyAnimId(int animId)\n          \n          \n            \n            \tstatic Pickaxe fromAnimation(int animId)", "author": "Nightfirecat", "createdAt": "2020-07-07T00:49:37Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import com.google.common.collect.ImmutableMap;\n+import java.util.Map;\n+import lombok.AllArgsConstructor;\n+import lombok.Getter;\n+\n+import static net.runelite.api.AnimationID.MINING_3A_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_ADAMANT_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_BLACK_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_BRONZE_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_CRYSTAL_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE_OR;\n+import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE_UPGRADED;\n+import static net.runelite.api.AnimationID.MINING_GILDED_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_INFERNAL_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_IRON_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_MITHRIL_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_RUNE_PICKAXE;\n+import static net.runelite.api.AnimationID.MINING_STEEL_PICKAXE;\n+import static net.runelite.api.ItemID.ADAMANT_PICKAXE;\n+import static net.runelite.api.ItemID.BLACK_PICKAXE;\n+import static net.runelite.api.ItemID.BRONZE_PICKAXE;\n+import static net.runelite.api.ItemID.CRYSTAL_PICKAXE;\n+import static net.runelite.api.ItemID.DRAGON_PICKAXE;\n+import static net.runelite.api.ItemID.DRAGON_PICKAXEOR;\n+import static net.runelite.api.ItemID.DRAGON_PICKAXE_12797;\n+import static net.runelite.api.ItemID.GILDED_PICKAXE;\n+import static net.runelite.api.ItemID.INFERNAL_PICKAXE;\n+import static net.runelite.api.ItemID.IRON_PICKAXE;\n+import static net.runelite.api.ItemID.MITHRIL_PICKAXE;\n+import static net.runelite.api.ItemID.RUNE_PICKAXE;\n+import static net.runelite.api.ItemID.STEEL_PICKAXE;\n+import static net.runelite.api.ItemID._3RD_AGE_PICKAXE;\n+import net.runelite.api.Player;\n+\n+@AllArgsConstructor\n+@Getter\n+enum Pickaxe\n+{\n+\tBRONZE(MINING_BRONZE_PICKAXE, BRONZE_PICKAXE),\n+\tIRON(MINING_IRON_PICKAXE, IRON_PICKAXE),\n+\tSTEEL(MINING_STEEL_PICKAXE, STEEL_PICKAXE),\n+\tBLACK(MINING_BLACK_PICKAXE, BLACK_PICKAXE),\n+\tMITHRIL(MINING_MITHRIL_PICKAXE, MITHRIL_PICKAXE),\n+\tADAMANT(MINING_ADAMANT_PICKAXE, ADAMANT_PICKAXE),\n+\tRUNE(MINING_RUNE_PICKAXE, RUNE_PICKAXE),\n+\tGILDED(MINING_GILDED_PICKAXE, GILDED_PICKAXE),\n+\tDRAGON(MINING_DRAGON_PICKAXE, DRAGON_PICKAXE),\n+\tDRAGON_OR(MINING_DRAGON_PICKAXE_OR, DRAGON_PICKAXEOR),\n+\tDRAGON_UPGRADED(MINING_DRAGON_PICKAXE_UPGRADED, DRAGON_PICKAXE_12797),\n+\tINFERNAL(MINING_INFERNAL_PICKAXE, INFERNAL_PICKAXE),\n+\tTHIRDAGE(MINING_3A_PICKAXE, _3RD_AGE_PICKAXE),\n+\tCRYSTAL(MINING_CRYSTAL_PICKAXE, CRYSTAL_PICKAXE);\n+\n+\tprivate final Integer animId;\n+\tprivate final Integer itemId;\n+\n+\tprivate static final Map<Integer, Pickaxe> PICKAXE_ANIM_IDS;\n+\n+\tstatic\n+\t{\n+\t\tImmutableMap.Builder<Integer, Pickaxe> builder = new ImmutableMap.Builder<>();\n+\n+\t\tfor (Pickaxe pickaxe : values())\n+\t\t{\n+\t\t\tbuilder.put(pickaxe.animId, pickaxe);\n+\t\t}\n+\n+\t\tPICKAXE_ANIM_IDS = builder.build();\n+\t}\n+\n+\tboolean matchesMiningAnimation(final Player player)\n+\t{\n+\t\treturn player != null && animId == player.getAnimation();\n+\t}\n+\n+\tstatic Pickaxe findPickaxeyAnimId(int animId)", "originalCommit": "d9425e5ae7f10b680b8909837481c490609bab69", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java\nindex 83d4237bb..48e2fee6b 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java\n\n@@ -28,21 +28,7 @@ import com.google.common.collect.ImmutableMap;\n import java.util.Map;\n import lombok.AllArgsConstructor;\n import lombok.Getter;\n-\n-import static net.runelite.api.AnimationID.MINING_3A_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_ADAMANT_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_BLACK_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_BRONZE_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_CRYSTAL_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE_OR;\n-import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE_UPGRADED;\n-import static net.runelite.api.AnimationID.MINING_GILDED_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_INFERNAL_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_IRON_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_MITHRIL_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_RUNE_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_STEEL_PICKAXE;\n+import static net.runelite.api.AnimationID.*;\n import static net.runelite.api.ItemID.ADAMANT_PICKAXE;\n import static net.runelite.api.ItemID.BLACK_PICKAXE;\n import static net.runelite.api.ItemID.BRONZE_PICKAXE;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU2MzcwMw==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r450563703", "bodyText": "Imports should be in a single block, no blank lines included", "author": "Nightfirecat", "createdAt": "2020-07-07T01:35:46Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import com.google.common.collect.ImmutableMap;\n+import java.util.Map;\n+import lombok.AllArgsConstructor;\n+import lombok.Getter;\n+\n+import static net.runelite.api.AnimationID.MINING_3A_PICKAXE;", "originalCommit": "d9425e5ae7f10b680b8909837481c490609bab69", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java\nindex 83d4237bb..48e2fee6b 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java\n\n@@ -28,21 +28,7 @@ import com.google.common.collect.ImmutableMap;\n import java.util.Map;\n import lombok.AllArgsConstructor;\n import lombok.Getter;\n-\n-import static net.runelite.api.AnimationID.MINING_3A_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_ADAMANT_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_BLACK_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_BRONZE_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_CRYSTAL_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE_OR;\n-import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE_UPGRADED;\n-import static net.runelite.api.AnimationID.MINING_GILDED_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_INFERNAL_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_IRON_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_MITHRIL_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_RUNE_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_STEEL_PICKAXE;\n+import static net.runelite.api.AnimationID.*;\n import static net.runelite.api.ItemID.ADAMANT_PICKAXE;\n import static net.runelite.api.ItemID.BLACK_PICKAXE;\n import static net.runelite.api.ItemID.BRONZE_PICKAXE;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU2Mzg3Ng==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r450563876", "bodyText": "You can do a star import for these animation IDs as well", "author": "Nightfirecat", "createdAt": "2020-07-07T01:36:20Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import com.google.common.collect.ImmutableMap;\n+import java.util.Map;\n+import lombok.AllArgsConstructor;\n+import lombok.Getter;\n+\n+import static net.runelite.api.AnimationID.MINING_3A_PICKAXE;", "originalCommit": "d9425e5ae7f10b680b8909837481c490609bab69", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java\nindex 83d4237bb..48e2fee6b 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/Pickaxe.java\n\n@@ -28,21 +28,7 @@ import com.google.common.collect.ImmutableMap;\n import java.util.Map;\n import lombok.AllArgsConstructor;\n import lombok.Getter;\n-\n-import static net.runelite.api.AnimationID.MINING_3A_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_ADAMANT_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_BLACK_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_BRONZE_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_CRYSTAL_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE_OR;\n-import static net.runelite.api.AnimationID.MINING_DRAGON_PICKAXE_UPGRADED;\n-import static net.runelite.api.AnimationID.MINING_GILDED_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_INFERNAL_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_IRON_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_MITHRIL_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_RUNE_PICKAXE;\n-import static net.runelite.api.AnimationID.MINING_STEEL_PICKAXE;\n+import static net.runelite.api.AnimationID.*;\n import static net.runelite.api.ItemID.ADAMANT_PICKAXE;\n import static net.runelite.api.ItemID.BLACK_PICKAXE;\n import static net.runelite.api.ItemID.BRONZE_PICKAXE;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU2MzkyMA==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r450563920", "bodyText": "Don't un-star these ObjectID imports.", "author": "Nightfirecat", "createdAt": "2020-07-07T01:36:29Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/Rock.java", "diffHunk": "@@ -29,8 +29,44 @@\n import java.util.Map;\n import lombok.AccessLevel;\n import lombok.Getter;\n-import static net.runelite.api.ObjectID.*;\n-import static net.runelite.client.util.RSTimeUnit.*;\n+import static net.runelite.api.ObjectID.ASH_PILE;", "originalCommit": "d9425e5ae7f10b680b8909837481c490609bab69", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/Rock.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/Rock.java\nindex 252aae001..d33532f2f 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/Rock.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/mining/Rock.java\n\n@@ -29,43 +29,7 @@ import java.time.Duration;\n import java.util.Map;\n import lombok.AccessLevel;\n import lombok.Getter;\n-import static net.runelite.api.ObjectID.ASH_PILE;\n-import static net.runelite.api.ObjectID.DAEYALT_ESSENCE_39095;\n-import static net.runelite.api.ObjectID.ROCKS_10943;\n-import static net.runelite.api.ObjectID.ROCKS_11161;\n-import static net.runelite.api.ObjectID.ROCKS_11360;\n-import static net.runelite.api.ObjectID.ROCKS_11361;\n-import static net.runelite.api.ObjectID.ROCKS_11364;\n-import static net.runelite.api.ObjectID.ROCKS_11365;\n-import static net.runelite.api.ObjectID.ROCKS_11366;\n-import static net.runelite.api.ObjectID.ROCKS_11367;\n-import static net.runelite.api.ObjectID.ROCKS_11368;\n-import static net.runelite.api.ObjectID.ROCKS_11369;\n-import static net.runelite.api.ObjectID.ROCKS_11370;\n-import static net.runelite.api.ObjectID.ROCKS_11371;\n-import static net.runelite.api.ObjectID.ROCKS_11372;\n-import static net.runelite.api.ObjectID.ROCKS_11373;\n-import static net.runelite.api.ObjectID.ROCKS_11374;\n-import static net.runelite.api.ObjectID.ROCKS_11375;\n-import static net.runelite.api.ObjectID.ROCKS_11376;\n-import static net.runelite.api.ObjectID.ROCKS_11377;\n-import static net.runelite.api.ObjectID.ROCKS_11380;\n-import static net.runelite.api.ObjectID.ROCKS_11381;\n-import static net.runelite.api.ObjectID.ROCKS_11386;\n-import static net.runelite.api.ObjectID.ROCKS_11387;\n-import static net.runelite.api.ObjectID.ROCKS_28596;\n-import static net.runelite.api.ObjectID.ROCKS_28597;\n-import static net.runelite.api.ObjectID.ROCKS_33254;\n-import static net.runelite.api.ObjectID.ROCKS_33255;\n-import static net.runelite.api.ObjectID.ROCKS_33256;\n-import static net.runelite.api.ObjectID.ROCKS_33257;\n-import static net.runelite.api.ObjectID.ROCKS_36203;\n-import static net.runelite.api.ObjectID.ROCKS_36204;\n-import static net.runelite.api.ObjectID.ROCKS_36205;\n-import static net.runelite.api.ObjectID.ROCKS_36206;\n-import static net.runelite.api.ObjectID.ROCKS_36207;\n-import static net.runelite.api.ObjectID.ROCKS_36208;\n-import static net.runelite.api.ObjectID.ROCKS_36209;\n+import static net.runelite.api.ObjectID.*;\n import static net.runelite.client.util.RSTimeUnit.GAME_TICKS;\n \n enum Rock\n"}}, {"oid": "67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "url": "https://github.com/runelite/runelite/commit/67bf33dd4114d1ef389e5a4c58bf7b444bb9db3b", "message": "Address poor grammar, loop through messages for the tests & other recommendation.", "committedDate": "2020-07-08T02:54:18Z", "type": "forcePushed"}, {"oid": "403650c958b8fcdff26647e4ecd3fcb7a26e8431", "url": "https://github.com/runelite/runelite/commit/403650c958b8fcdff26647e4ecd3fcb7a26e8431", "message": "Address poor grammar, loop through messages for the tests & other recommendation.", "committedDate": "2020-07-08T03:42:48Z", "type": "forcePushed"}, {"oid": "432800701df854385bc1019e4a210f990effc85e", "url": "https://github.com/runelite/runelite/commit/432800701df854385bc1019e4a210f990effc85e", "message": "Add MiningPluginTest", "committedDate": "2020-08-11T22:55:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIwODM4OQ==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r470208389", "bodyText": "The config check should be after the session check as it is more expensive / forces the config key to be hot in the config cache", "author": "Adam-", "createdAt": "2020-08-13T19:51:19Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningOverlay.java", "diffHunk": "@@ -0,0 +1,113 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Graphics2D;\n+import javax.inject.Inject;\n+import net.runelite.api.Client;\n+import net.runelite.api.MenuAction;\n+import net.runelite.api.Skill;\n+import net.runelite.client.plugins.xptracker.XpTrackerService;\n+import static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\n+import net.runelite.client.ui.overlay.OverlayMenuEntry;\n+import net.runelite.client.ui.overlay.OverlayPanel;\n+import net.runelite.client.ui.overlay.OverlayPosition;\n+import net.runelite.client.ui.overlay.components.LineComponent;\n+import net.runelite.client.ui.overlay.components.TitleComponent;\n+\n+class MiningOverlay extends OverlayPanel\n+{\n+\tstatic final String MINING_RESET = \"Reset\";\n+\n+\tprivate final Client client;\n+\tprivate final MiningPlugin plugin;\n+\tprivate final MiningConfig config;\n+\tprivate final XpTrackerService xpTrackerService;\n+\n+\t@Inject\n+\tprivate MiningOverlay(final Client client, final MiningPlugin plugin, final MiningConfig config, XpTrackerService xpTrackerService)\n+\t{\n+\t\tsuper(plugin);\n+\t\tsetPosition(OverlayPosition.TOP_LEFT);\n+\t\tthis.client = client;\n+\t\tthis.plugin = plugin;\n+\t\tthis.config = config;\n+\t\tthis.xpTrackerService = xpTrackerService;\n+\t\tgetMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY_CONFIG, OPTION_CONFIGURE, \"Mining overlay\"));\n+\t\tgetMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY, MINING_RESET, \"Mining overlay\"));\n+\t}\n+\n+\t@Override\n+\tpublic Dimension render(Graphics2D graphics)\n+\t{\n+\t\tif (!config.showMiningStats())", "originalCommit": "a999c8c586b3213295cfba588c443ab6402f4eac", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f84379ca29be6ed02dcd506ae9b8680b6b4df85a", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningOverlay.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningOverlay.java\ndeleted file mode 100644\nindex 6eddd6e0e..000000000\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningOverlay.java\n+++ /dev/null\n\n@@ -1,113 +0,0 @@\n-/*\n- * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n- * All rights reserved.\n- *\n- * Redistribution and use in source and binary forms, with or without\n- * modification, are permitted provided that the following conditions are met:\n- *\n- * 1. Redistributions of source code must retain the above copyright notice, this\n- *    list of conditions and the following disclaimer.\n- * 2. Redistributions in binary form must reproduce the above copyright notice,\n- *    this list of conditions and the following disclaimer in the documentation\n- *    and/or other materials provided with the distribution.\n- *\n- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n- * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n- * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n- * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n- * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n- * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n- * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n- * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n- */\n-package net.runelite.client.plugins.mining;\n-\n-import java.awt.Color;\n-import java.awt.Dimension;\n-import java.awt.Graphics2D;\n-import javax.inject.Inject;\n-import net.runelite.api.Client;\n-import net.runelite.api.MenuAction;\n-import net.runelite.api.Skill;\n-import net.runelite.client.plugins.xptracker.XpTrackerService;\n-import static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\n-import net.runelite.client.ui.overlay.OverlayMenuEntry;\n-import net.runelite.client.ui.overlay.OverlayPanel;\n-import net.runelite.client.ui.overlay.OverlayPosition;\n-import net.runelite.client.ui.overlay.components.LineComponent;\n-import net.runelite.client.ui.overlay.components.TitleComponent;\n-\n-class MiningOverlay extends OverlayPanel\n-{\n-\tstatic final String MINING_RESET = \"Reset\";\n-\n-\tprivate final Client client;\n-\tprivate final MiningPlugin plugin;\n-\tprivate final MiningConfig config;\n-\tprivate final XpTrackerService xpTrackerService;\n-\n-\t@Inject\n-\tprivate MiningOverlay(final Client client, final MiningPlugin plugin, final MiningConfig config, XpTrackerService xpTrackerService)\n-\t{\n-\t\tsuper(plugin);\n-\t\tsetPosition(OverlayPosition.TOP_LEFT);\n-\t\tthis.client = client;\n-\t\tthis.plugin = plugin;\n-\t\tthis.config = config;\n-\t\tthis.xpTrackerService = xpTrackerService;\n-\t\tgetMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY_CONFIG, OPTION_CONFIGURE, \"Mining overlay\"));\n-\t\tgetMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY, MINING_RESET, \"Mining overlay\"));\n-\t}\n-\n-\t@Override\n-\tpublic Dimension render(Graphics2D graphics)\n-\t{\n-\t\tif (!config.showMiningStats())\n-\t\t{\n-\t\t\treturn null;\n-\t\t}\n-\n-\t\tMiningSession session = plugin.getSession();\n-\t\tif (session == null || session.getLastMined() == null)\n-\t\t{\n-\t\t\treturn null;\n-\t\t}\n-\n-\t\tPickaxe pickaxe = plugin.getPickaxe();\n-\t\tif (pickaxe != null && pickaxe.matchesMiningAnimation(client.getLocalPlayer()))\n-\t\t{\n-\t\t\tpanelComponent.getChildren().add(TitleComponent.builder()\n-\t\t\t\t.text(\"Mining\")\n-\t\t\t\t.color(Color.GREEN)\n-\t\t\t\t.build());\n-\t\t}\n-\t\telse\n-\t\t{\n-\t\t\tpanelComponent.getChildren().add(TitleComponent.builder()\n-\t\t\t\t.text(\"NOT mining\")\n-\t\t\t\t.color(Color.RED)\n-\t\t\t\t.build());\n-\t\t}\n-\n-\t\tint actions = xpTrackerService.getActions(Skill.MINING);\n-\t\tif (actions > 0)\n-\t\t{\n-\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n-\t\t\t\t.left(\"Total mined:\")\n-\t\t\t\t.right(Integer.toString(actions))\n-\t\t\t\t.build());\n-\n-\t\t\tif (actions > 2)\n-\t\t\t{\n-\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n-\t\t\t\t\t.left(\"Mined/hr:\")\n-\t\t\t\t\t.right(Integer.toString(xpTrackerService.getActionsHr(Skill.MINING)))\n-\t\t\t\t\t.build());\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn super.render(graphics);\n-\t}\n-}\n\\ No newline at end of file\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIwOTMyOQ==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r470209329", "bodyText": "@Getter", "author": "Adam-", "createdAt": "2020-08-13T19:53:12Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningSession.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import java.time.Instant;\n+\n+class MiningSession\n+{\n+\tprivate Instant lastMined;\n+\n+\tvoid setLastMined()\n+\t{\n+\t\tlastMined = Instant.now();\n+\t}\n+\n+\tInstant getLastMined()", "originalCommit": "a999c8c586b3213295cfba588c443ab6402f4eac", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f84379ca29be6ed02dcd506ae9b8680b6b4df85a", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningSession.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningSession.java\ndeleted file mode 100644\nindex 1d66c7dc8..000000000\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningSession.java\n+++ /dev/null\n\n@@ -1,42 +0,0 @@\n-/*\n- * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n- * All rights reserved.\n- *\n- * Redistribution and use in source and binary forms, with or without\n- * modification, are permitted provided that the following conditions are met:\n- *\n- * 1. Redistributions of source code must retain the above copyright notice, this\n- *    list of conditions and the following disclaimer.\n- * 2. Redistributions in binary form must reproduce the above copyright notice,\n- *    this list of conditions and the following disclaimer in the documentation\n- *    and/or other materials provided with the distribution.\n- *\n- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n- * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n- * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n- * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n- * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n- * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n- * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n- * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n- */\n-package net.runelite.client.plugins.mining;\n-\n-import java.time.Instant;\n-\n-class MiningSession\n-{\n-\tprivate Instant lastMined;\n-\n-\tvoid setLastMined()\n-\t{\n-\t\tlastMined = Instant.now();\n-\t}\n-\n-\tInstant getLastMined()\n-\t{\n-\t\treturn lastMined;\n-\t}\n-}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIxMDE4Mw==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r470210183", "bodyText": "This is missing the reset handler", "author": "Adam-", "createdAt": "2020-08-13T19:54:48Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningOverlay.java", "diffHunk": "@@ -0,0 +1,113 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Graphics2D;\n+import javax.inject.Inject;\n+import net.runelite.api.Client;\n+import net.runelite.api.MenuAction;\n+import net.runelite.api.Skill;\n+import net.runelite.client.plugins.xptracker.XpTrackerService;\n+import static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\n+import net.runelite.client.ui.overlay.OverlayMenuEntry;\n+import net.runelite.client.ui.overlay.OverlayPanel;\n+import net.runelite.client.ui.overlay.OverlayPosition;\n+import net.runelite.client.ui.overlay.components.LineComponent;\n+import net.runelite.client.ui.overlay.components.TitleComponent;\n+\n+class MiningOverlay extends OverlayPanel\n+{\n+\tstatic final String MINING_RESET = \"Reset\";\n+\n+\tprivate final Client client;\n+\tprivate final MiningPlugin plugin;\n+\tprivate final MiningConfig config;\n+\tprivate final XpTrackerService xpTrackerService;\n+\n+\t@Inject\n+\tprivate MiningOverlay(final Client client, final MiningPlugin plugin, final MiningConfig config, XpTrackerService xpTrackerService)\n+\t{\n+\t\tsuper(plugin);\n+\t\tsetPosition(OverlayPosition.TOP_LEFT);\n+\t\tthis.client = client;\n+\t\tthis.plugin = plugin;\n+\t\tthis.config = config;\n+\t\tthis.xpTrackerService = xpTrackerService;\n+\t\tgetMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY_CONFIG, OPTION_CONFIGURE, \"Mining overlay\"));\n+\t\tgetMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY, MINING_RESET, \"Mining overlay\"));", "originalCommit": "a999c8c586b3213295cfba588c443ab6402f4eac", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f84379ca29be6ed02dcd506ae9b8680b6b4df85a", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningOverlay.java b/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningOverlay.java\ndeleted file mode 100644\nindex 6eddd6e0e..000000000\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/mining/MiningOverlay.java\n+++ /dev/null\n\n@@ -1,113 +0,0 @@\n-/*\n- * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n- * All rights reserved.\n- *\n- * Redistribution and use in source and binary forms, with or without\n- * modification, are permitted provided that the following conditions are met:\n- *\n- * 1. Redistributions of source code must retain the above copyright notice, this\n- *    list of conditions and the following disclaimer.\n- * 2. Redistributions in binary form must reproduce the above copyright notice,\n- *    this list of conditions and the following disclaimer in the documentation\n- *    and/or other materials provided with the distribution.\n- *\n- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n- * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n- * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n- * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n- * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n- * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n- * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n- * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n- */\n-package net.runelite.client.plugins.mining;\n-\n-import java.awt.Color;\n-import java.awt.Dimension;\n-import java.awt.Graphics2D;\n-import javax.inject.Inject;\n-import net.runelite.api.Client;\n-import net.runelite.api.MenuAction;\n-import net.runelite.api.Skill;\n-import net.runelite.client.plugins.xptracker.XpTrackerService;\n-import static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\n-import net.runelite.client.ui.overlay.OverlayMenuEntry;\n-import net.runelite.client.ui.overlay.OverlayPanel;\n-import net.runelite.client.ui.overlay.OverlayPosition;\n-import net.runelite.client.ui.overlay.components.LineComponent;\n-import net.runelite.client.ui.overlay.components.TitleComponent;\n-\n-class MiningOverlay extends OverlayPanel\n-{\n-\tstatic final String MINING_RESET = \"Reset\";\n-\n-\tprivate final Client client;\n-\tprivate final MiningPlugin plugin;\n-\tprivate final MiningConfig config;\n-\tprivate final XpTrackerService xpTrackerService;\n-\n-\t@Inject\n-\tprivate MiningOverlay(final Client client, final MiningPlugin plugin, final MiningConfig config, XpTrackerService xpTrackerService)\n-\t{\n-\t\tsuper(plugin);\n-\t\tsetPosition(OverlayPosition.TOP_LEFT);\n-\t\tthis.client = client;\n-\t\tthis.plugin = plugin;\n-\t\tthis.config = config;\n-\t\tthis.xpTrackerService = xpTrackerService;\n-\t\tgetMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY_CONFIG, OPTION_CONFIGURE, \"Mining overlay\"));\n-\t\tgetMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY, MINING_RESET, \"Mining overlay\"));\n-\t}\n-\n-\t@Override\n-\tpublic Dimension render(Graphics2D graphics)\n-\t{\n-\t\tif (!config.showMiningStats())\n-\t\t{\n-\t\t\treturn null;\n-\t\t}\n-\n-\t\tMiningSession session = plugin.getSession();\n-\t\tif (session == null || session.getLastMined() == null)\n-\t\t{\n-\t\t\treturn null;\n-\t\t}\n-\n-\t\tPickaxe pickaxe = plugin.getPickaxe();\n-\t\tif (pickaxe != null && pickaxe.matchesMiningAnimation(client.getLocalPlayer()))\n-\t\t{\n-\t\t\tpanelComponent.getChildren().add(TitleComponent.builder()\n-\t\t\t\t.text(\"Mining\")\n-\t\t\t\t.color(Color.GREEN)\n-\t\t\t\t.build());\n-\t\t}\n-\t\telse\n-\t\t{\n-\t\t\tpanelComponent.getChildren().add(TitleComponent.builder()\n-\t\t\t\t.text(\"NOT mining\")\n-\t\t\t\t.color(Color.RED)\n-\t\t\t\t.build());\n-\t\t}\n-\n-\t\tint actions = xpTrackerService.getActions(Skill.MINING);\n-\t\tif (actions > 0)\n-\t\t{\n-\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n-\t\t\t\t.left(\"Total mined:\")\n-\t\t\t\t.right(Integer.toString(actions))\n-\t\t\t\t.build());\n-\n-\t\t\tif (actions > 2)\n-\t\t\t{\n-\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n-\t\t\t\t\t.left(\"Mined/hr:\")\n-\t\t\t\t\t.right(Integer.toString(xpTrackerService.getActionsHr(Skill.MINING)))\n-\t\t\t\t\t.build());\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn super.render(graphics);\n-\t}\n-}\n\\ No newline at end of file\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIxMDY5OA==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r470210698", "bodyText": "Only direct dependencies of the plugin should be mocked, this is not one of them.", "author": "Adam-", "createdAt": "2020-08-13T19:55:38Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java", "diffHunk": "@@ -0,0 +1,109 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.inject.Guice;\n+import com.google.inject.testing.fieldbinder.Bind;\n+import com.google.inject.testing.fieldbinder.BoundFieldModule;\n+import javax.inject.Inject;\n+import net.runelite.api.ChatMessageType;\n+import net.runelite.api.Client;\n+import net.runelite.api.events.ChatMessage;\n+import net.runelite.client.Notifier;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import static org.junit.Assert.assertNotNull;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class MiningPluginTest\n+{\n+\t@Inject\n+\tMiningPlugin miningPlugin;\n+\n+\t@Mock\n+\t@Bind\n+\tMiningConfig miningConfig;\n+\n+\t@Mock\n+\t@Bind\n+\tNotifier notifier;", "originalCommit": "432800701df854385bc1019e4a210f990effc85e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f84379ca29be6ed02dcd506ae9b8680b6b4df85a", "chunk": "diff --git a/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java b/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java\ndeleted file mode 100644\nindex 92e3271ea..000000000\n--- a/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java\n+++ /dev/null\n\n@@ -1,109 +0,0 @@\n-/*\n- * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n- * All rights reserved.\n- *\n- * Redistribution and use in source and binary forms, with or without\n- * modification, are permitted provided that the following conditions are met:\n- *\n- * 1. Redistributions of source code must retain the above copyright notice, this\n- *    list of conditions and the following disclaimer.\n- * 2. Redistributions in binary form must reproduce the above copyright notice,\n- *    this list of conditions and the following disclaimer in the documentation\n- *    and/or other materials provided with the distribution.\n- *\n- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n- * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n- * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n- * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n- * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n- * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n- * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n- * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n- */\n-package net.runelite.client.plugins.mining;\n-\n-import com.google.common.collect.ImmutableList;\n-import com.google.inject.Guice;\n-import com.google.inject.testing.fieldbinder.Bind;\n-import com.google.inject.testing.fieldbinder.BoundFieldModule;\n-import javax.inject.Inject;\n-import net.runelite.api.ChatMessageType;\n-import net.runelite.api.Client;\n-import net.runelite.api.events.ChatMessage;\n-import net.runelite.client.Notifier;\n-import net.runelite.client.ui.overlay.OverlayManager;\n-import static org.junit.Assert.assertNotNull;\n-import org.junit.Before;\n-import org.junit.Test;\n-import org.junit.runner.RunWith;\n-import org.mockito.Mock;\n-import org.mockito.junit.MockitoJUnitRunner;\n-\n-@RunWith(MockitoJUnitRunner.class)\n-public class MiningPluginTest\n-{\n-\t@Inject\n-\tMiningPlugin miningPlugin;\n-\n-\t@Mock\n-\t@Bind\n-\tMiningConfig miningConfig;\n-\n-\t@Mock\n-\t@Bind\n-\tNotifier notifier;\n-\n-\t@Mock\n-\t@Bind\n-\tClient client;\n-\n-\t@Mock\n-\t@Bind\n-\tMiningOverlay miningOverlay;\n-\n-\t@Mock\n-\t@Bind\n-\tMiningRocksOverlay miningRocksOverlay;\n-\n-\t@Mock\n-\t@Bind\n-\tOverlayManager overlayManager;\n-\n-\tImmutableList<String> miningMessages = ImmutableList.of(\n-\t\t\"You manage to mine some clay.\",\n-\t\t\"You manage to mine some iron.\",\n-\t\t\"You manage to quarry some sandstone.\",\n-\t\t\"You manage to quarry some granite.\",\n-\t\t\"You just mined an Opal!\",\n-\t\t\"You just mined a piece of Jade!\",\n-\t\t\"You just mined a Red Topaz!\",\n-\t\t\"You just mined an Emerald!\",\n-\t\t\"You just mined a Sapphire!\",\n-\t\t\"You just mined a Ruby!\",\n-\t\t\"You just mined a Diamond!\"\n-\t);\n-\t@Before\n-\tpublic void before()\n-\t{\n-\t\tGuice.createInjector(BoundFieldModule.of(this)).injectMembers(this);\n-\t}\n-\n-\t@Test\n-\tpublic void testMiningSession()\n-\t{\n-\t\tfor (String message : miningMessages)\n-\t\t{\n-\t\t\ttestMessage(message);\n-\t\t}\n-\t}\n-\n-\tpublic void testMessage(String gameMessage)\n-\t{\n-\t\tChatMessage chatMessage = new ChatMessage(null, ChatMessageType.SPAM, \"\", gameMessage, \"\", 0);\n-\t\tminingPlugin.onChatMessage(chatMessage);\n-\t\tassertNotNull(miningPlugin.getSession());\n-\t\tminingPlugin.resetSession();\n-\t}\n-}\n\\ No newline at end of file\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIxMTY4Mw==", "url": "https://github.com/runelite/runelite/pull/12033#discussion_r470211683", "bodyText": "You could just make one test per message, it would avoid bugs related to keeping state around in the plugin on accident. Though this does look correct currently.", "author": "Adam-", "createdAt": "2020-08-13T19:57:31Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java", "diffHunk": "@@ -0,0 +1,109 @@\n+/*\n+ * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.mining;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.inject.Guice;\n+import com.google.inject.testing.fieldbinder.Bind;\n+import com.google.inject.testing.fieldbinder.BoundFieldModule;\n+import javax.inject.Inject;\n+import net.runelite.api.ChatMessageType;\n+import net.runelite.api.Client;\n+import net.runelite.api.events.ChatMessage;\n+import net.runelite.client.Notifier;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import static org.junit.Assert.assertNotNull;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class MiningPluginTest\n+{\n+\t@Inject\n+\tMiningPlugin miningPlugin;\n+\n+\t@Mock\n+\t@Bind\n+\tMiningConfig miningConfig;\n+\n+\t@Mock\n+\t@Bind\n+\tNotifier notifier;\n+\n+\t@Mock\n+\t@Bind\n+\tClient client;\n+\n+\t@Mock\n+\t@Bind\n+\tMiningOverlay miningOverlay;\n+\n+\t@Mock\n+\t@Bind\n+\tMiningRocksOverlay miningRocksOverlay;\n+\n+\t@Mock\n+\t@Bind\n+\tOverlayManager overlayManager;\n+\n+\tImmutableList<String> miningMessages = ImmutableList.of(", "originalCommit": "432800701df854385bc1019e4a210f990effc85e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f84379ca29be6ed02dcd506ae9b8680b6b4df85a", "chunk": "diff --git a/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java b/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java\ndeleted file mode 100644\nindex 92e3271ea..000000000\n--- a/runelite-client/src/test/java/net/runelite/client/plugins/mining/MiningPluginTest.java\n+++ /dev/null\n\n@@ -1,109 +0,0 @@\n-/*\n- * Copyright (c) 2020, Jordan Zomerlei <https://github.com/JZomerlei>\n- * All rights reserved.\n- *\n- * Redistribution and use in source and binary forms, with or without\n- * modification, are permitted provided that the following conditions are met:\n- *\n- * 1. Redistributions of source code must retain the above copyright notice, this\n- *    list of conditions and the following disclaimer.\n- * 2. Redistributions in binary form must reproduce the above copyright notice,\n- *    this list of conditions and the following disclaimer in the documentation\n- *    and/or other materials provided with the distribution.\n- *\n- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n- * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n- * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n- * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n- * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n- * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n- * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n- * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n- */\n-package net.runelite.client.plugins.mining;\n-\n-import com.google.common.collect.ImmutableList;\n-import com.google.inject.Guice;\n-import com.google.inject.testing.fieldbinder.Bind;\n-import com.google.inject.testing.fieldbinder.BoundFieldModule;\n-import javax.inject.Inject;\n-import net.runelite.api.ChatMessageType;\n-import net.runelite.api.Client;\n-import net.runelite.api.events.ChatMessage;\n-import net.runelite.client.Notifier;\n-import net.runelite.client.ui.overlay.OverlayManager;\n-import static org.junit.Assert.assertNotNull;\n-import org.junit.Before;\n-import org.junit.Test;\n-import org.junit.runner.RunWith;\n-import org.mockito.Mock;\n-import org.mockito.junit.MockitoJUnitRunner;\n-\n-@RunWith(MockitoJUnitRunner.class)\n-public class MiningPluginTest\n-{\n-\t@Inject\n-\tMiningPlugin miningPlugin;\n-\n-\t@Mock\n-\t@Bind\n-\tMiningConfig miningConfig;\n-\n-\t@Mock\n-\t@Bind\n-\tNotifier notifier;\n-\n-\t@Mock\n-\t@Bind\n-\tClient client;\n-\n-\t@Mock\n-\t@Bind\n-\tMiningOverlay miningOverlay;\n-\n-\t@Mock\n-\t@Bind\n-\tMiningRocksOverlay miningRocksOverlay;\n-\n-\t@Mock\n-\t@Bind\n-\tOverlayManager overlayManager;\n-\n-\tImmutableList<String> miningMessages = ImmutableList.of(\n-\t\t\"You manage to mine some clay.\",\n-\t\t\"You manage to mine some iron.\",\n-\t\t\"You manage to quarry some sandstone.\",\n-\t\t\"You manage to quarry some granite.\",\n-\t\t\"You just mined an Opal!\",\n-\t\t\"You just mined a piece of Jade!\",\n-\t\t\"You just mined a Red Topaz!\",\n-\t\t\"You just mined an Emerald!\",\n-\t\t\"You just mined a Sapphire!\",\n-\t\t\"You just mined a Ruby!\",\n-\t\t\"You just mined a Diamond!\"\n-\t);\n-\t@Before\n-\tpublic void before()\n-\t{\n-\t\tGuice.createInjector(BoundFieldModule.of(this)).injectMembers(this);\n-\t}\n-\n-\t@Test\n-\tpublic void testMiningSession()\n-\t{\n-\t\tfor (String message : miningMessages)\n-\t\t{\n-\t\t\ttestMessage(message);\n-\t\t}\n-\t}\n-\n-\tpublic void testMessage(String gameMessage)\n-\t{\n-\t\tChatMessage chatMessage = new ChatMessage(null, ChatMessageType.SPAM, \"\", gameMessage, \"\", 0);\n-\t\tminingPlugin.onChatMessage(chatMessage);\n-\t\tassertNotNull(miningPlugin.getSession());\n-\t\tminingPlugin.resetSession();\n-\t}\n-}\n\\ No newline at end of file\n"}}, {"oid": "f84379ca29be6ed02dcd506ae9b8680b6b4df85a", "url": "https://github.com/runelite/runelite/commit/f84379ca29be6ed02dcd506ae9b8680b6b4df85a", "message": "mining plugin: rename MiningOverlay to MiningRocksOverlay\n\nCo-authored-by: jzomerlei <jzomerlei@gmail.com>", "committedDate": "2020-08-14T19:13:58Z", "type": "commit"}, {"oid": "bc59837938d33d4c17f3e851e9301be6adc83e88", "url": "https://github.com/runelite/runelite/commit/bc59837938d33d4c17f3e851e9301be6adc83e88", "message": "Add Reset Overlay handler\n\n@Getter@Setter added for session to track it", "committedDate": "2020-08-14T19:19:07Z", "type": "forcePushed"}, {"oid": "2a1ef6d2dad9b97469d2910ddaafa1d14c0665cc", "url": "https://github.com/runelite/runelite/commit/2a1ef6d2dad9b97469d2910ddaafa1d14c0665cc", "message": "mining plugin: add session stats\n\nCo-authored-by: jzomerlei <jzomerlei@gmail.com>", "committedDate": "2020-08-14T19:28:35Z", "type": "commit"}, {"oid": "f05c6fc8bce9660de58b44f5cc71edba00dca451", "url": "https://github.com/runelite/runelite/commit/f05c6fc8bce9660de58b44f5cc71edba00dca451", "message": "Add Reset Overlay handler\n\n@Getter@Setter added for session to track it", "committedDate": "2020-08-14T19:35:20Z", "type": "forcePushed"}, {"oid": "2a1ef6d2dad9b97469d2910ddaafa1d14c0665cc", "url": "https://github.com/runelite/runelite/commit/2a1ef6d2dad9b97469d2910ddaafa1d14c0665cc", "message": "mining plugin: add session stats\n\nCo-authored-by: jzomerlei <jzomerlei@gmail.com>", "committedDate": "2020-08-14T19:28:35Z", "type": "forcePushed"}]}