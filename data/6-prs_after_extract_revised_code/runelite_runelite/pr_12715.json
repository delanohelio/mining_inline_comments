{"pr_number": 12715, "pr_title": "chatcommands: handle league accounts properly", "pr_createdAt": "2020-10-29T12:43:31Z", "pr_url": "https://github.com/runelite/runelite/pull/12715", "timeline": [{"oid": "e7d5b4aeca9daea93a0b8b5182476ec73e29b72b", "url": "https://github.com/runelite/runelite/commit/e7d5b4aeca9daea93a0b8b5182476ec73e29b72b", "message": "chatcommands: add support for !lvl sent by league players", "committedDate": "2020-10-29T12:46:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE2ODQzMw==", "url": "https://github.com/runelite/runelite/pull/12715#discussion_r515168433", "bodyText": "I still don't think this needs an entire account type, but idk", "author": "Hydrox6", "createdAt": "2020-10-30T15:09:36Z", "path": "runelite-api/src/main/java/net/runelite/api/vars/AccountType.java", "diffHunk": "@@ -44,7 +44,11 @@\n \t/**\n \t * Hardcore ironman account type.\n \t */\n-\tHARDCORE_IRONMAN;\n+\tHARDCORE_IRONMAN,\n+\t/**\n+\t * Leagues account type.\n+\t */\n+\tLEAGUE;", "originalCommit": "e7d5b4aeca9daea93a0b8b5182476ec73e29b72b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1e4b3a589cc7951d02dc2825a71358485ff273ea", "chunk": "diff --git a/runelite-api/src/main/java/net/runelite/api/vars/AccountType.java b/runelite-api/src/main/java/net/runelite/api/vars/AccountType.java\nindex c0cdeb4df..63c5e953f 100644\n--- a/runelite-api/src/main/java/net/runelite/api/vars/AccountType.java\n+++ b/runelite-api/src/main/java/net/runelite/api/vars/AccountType.java\n\n@@ -44,11 +44,7 @@ public enum AccountType\n \t/**\n \t * Hardcore ironman account type.\n \t */\n-\tHARDCORE_IRONMAN,\n-\t/**\n-\t * Leagues account type.\n-\t */\n-\tLEAGUE;\n+\tHARDCORE_IRONMAN;\n \n \t/**\n \t * Checks whether this type is an ironman.\n"}}, {"oid": "1e4b3a589cc7951d02dc2825a71358485ff273ea", "url": "https://github.com/runelite/runelite/commit/1e4b3a589cc7951d02dc2825a71358485ff273ea", "message": "chatcommands: add support for !lvl sent by league players", "committedDate": "2020-10-30T15:16:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE3NTAzMA==", "url": "https://github.com/runelite/runelite/pull/12715#discussion_r515175030", "bodyText": "this should just be LEAGUE probably", "author": "Adam-", "createdAt": "2020-10-30T15:19:26Z", "path": "runelite-api/src/main/java/net/runelite/api/IconID.java", "diffHunk": "@@ -47,7 +47,8 @@\n \tHARDCORE_IRONMAN(10),\r\n \tNO_ENTRY(11),\r\n \tCHAIN_LINK(12),\r\n-\tBOUNTY_HUNTER_EMBLEM(20);\r\n+\tBOUNTY_HUNTER_EMBLEM(20),\r\n+\tTRAIL_BLAZER_LEAGUE_EMBLEM(22);\r", "originalCommit": "1e4b3a589cc7951d02dc2825a71358485ff273ea", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1e56a12a6b20541961394e684eeb5a4dc8cc5941", "chunk": "diff --git a/runelite-api/src/main/java/net/runelite/api/IconID.java b/runelite-api/src/main/java/net/runelite/api/IconID.java\nindex c746e2913..dccf3bbc0 100644\n--- a/runelite-api/src/main/java/net/runelite/api/IconID.java\n+++ b/runelite-api/src/main/java/net/runelite/api/IconID.java\n\n@@ -48,7 +48,7 @@ public enum IconID\n \tNO_ENTRY(11),\n \tCHAIN_LINK(12),\n \tBOUNTY_HUNTER_EMBLEM(20),\n-\tTRAIL_BLAZER_LEAGUE_EMBLEM(22);\n+\tLEAGUE(22);\n \n \tprivate final int index;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIwNzU5MA==", "url": "https://github.com/runelite/runelite/pull/12715#discussion_r515207590", "bodyText": "Mods chat on leagues uses the pmod icon, so it may be worth leaving this in?", "author": "Adam-", "createdAt": "2020-10-30T16:03:26Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/chatcommands/ChatCommandsPlugin.java", "diffHunk": "@@ -1448,16 +1448,7 @@ private HiscoreLookup getCorrectLookupFor(final ChatMessage chatMessage)\n \t\t\treturn new HiscoreLookup(localPlayer.getName(), hiscoreEndpoint);\n \t\t}\n \n-\t\t// Public chat on a leagues world is always league hiscores, regardless of icon\n-\t\tif (chatMessage.getType() == ChatMessageType.PUBLICCHAT || chatMessage.getType() == ChatMessageType.MODCHAT)", "originalCommit": "36dba6b641f5ed8bffd56af66b4efaab128acabb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIxMzY1NQ==", "url": "https://github.com/runelite/runelite/pull/12715#discussion_r515213655", "bodyText": "Per discord discussion, leaving this check in", "author": "SirGirion", "createdAt": "2020-10-30T16:13:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIwNzU5MA=="}], "type": "inlineReview", "revised_code": {"commit": "1e56a12a6b20541961394e684eeb5a4dc8cc5941", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/chatcommands/ChatCommandsPlugin.java b/runelite-client/src/main/java/net/runelite/client/plugins/chatcommands/ChatCommandsPlugin.java\nindex 2ff0ed676..7574803fb 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/chatcommands/ChatCommandsPlugin.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/chatcommands/ChatCommandsPlugin.java\n\n@@ -1448,6 +1448,15 @@ public class ChatCommandsPlugin extends Plugin\n \t\t\treturn new HiscoreLookup(localPlayer.getName(), hiscoreEndpoint);\n \t\t}\n \n+\t\t// Public chat on a leagues world is always league hiscores, regardless of icon\n+\t\tif (chatMessage.getType() == ChatMessageType.PUBLICCHAT || chatMessage.getType() == ChatMessageType.MODCHAT)\n+\t\t{\n+\t\t\tif (client.getWorldType().contains(WorldType.LEAGUE))\n+\t\t\t{\n+\t\t\t\treturn new HiscoreLookup(player, HiscoreEndpoint.LEAGUE);\n+\t\t\t}\n+\t\t}\n+\n \t\t// Get ironman status from their icon in chat, this handles leagues too\n \t\tHiscoreEndpoint endpoint = getHiscoreEndpointByName(chatMessage.getName());\n \t\treturn new HiscoreLookup(player, endpoint);\n"}}, {"oid": "1e56a12a6b20541961394e684eeb5a4dc8cc5941", "url": "https://github.com/runelite/runelite/commit/1e56a12a6b20541961394e684eeb5a4dc8cc5941", "message": "chatcommands: handle league accounts properly", "committedDate": "2020-10-30T19:14:42Z", "type": "commit"}, {"oid": "1e56a12a6b20541961394e684eeb5a4dc8cc5941", "url": "https://github.com/runelite/runelite/commit/1e56a12a6b20541961394e684eeb5a4dc8cc5941", "message": "chatcommands: handle league accounts properly", "committedDate": "2020-10-30T19:14:42Z", "type": "forcePushed"}]}