{"pr_number": 10554, "pr_title": "Fix ToB door quick-enter swap and add a test for it", "pr_createdAt": "2020-01-05T16:06:00Z", "pr_url": "https://github.com/runelite/runelite/pull/10554", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc1ODU3Mw==", "url": "https://github.com/runelite/runelite/pull/10554#discussion_r363758573", "bodyText": "You can't put expressions inside of when(), I'm surprised this works at all", "author": "Adam-", "createdAt": "2020-01-07T13:57:31Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/menuentryswapper/MenuEntrySwapperPluginTest.java", "diffHunk": "@@ -263,4 +263,61 @@ public void testTeleport()\n \t\t\tmenu(\"Cast\", \"Varrock Teleport\", MenuAction.WIDGET_SECOND_OPTION),\n \t\t}, argumentCaptor.getValue());\n \t}\n+\n+\t@Test\n+\tpublic void testTobDoor()\n+\t{\n+\t\twhen(config.swapQuick() && config.swapHomePortal() != HouseMode.ENTER).thenReturn(true);", "originalCommit": "09491df1a2d30437da4711e15d3fcee1754d5c08", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzgzODEyMg==", "url": "https://github.com/runelite/runelite/pull/10554#discussion_r363838122", "bodyText": "Changed the test a bit", "author": "melkypie", "createdAt": "2020-01-07T16:37:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc1ODU3Mw=="}], "type": "inlineReview", "revised_code": {"commit": "bc685c1b35a1a8b56a8dda42377733fddc0d6a33", "chunk": "diff --git a/runelite-client/src/test/java/net/runelite/client/plugins/menuentryswapper/MenuEntrySwapperPluginTest.java b/runelite-client/src/test/java/net/runelite/client/plugins/menuentryswapper/MenuEntrySwapperPluginTest.java\nindex bd53bb541..f6e2bbe02 100644\n--- a/runelite-client/src/test/java/net/runelite/client/plugins/menuentryswapper/MenuEntrySwapperPluginTest.java\n+++ b/runelite-client/src/test/java/net/runelite/client/plugins/menuentryswapper/MenuEntrySwapperPluginTest.java\n\n@@ -267,17 +267,17 @@ public class MenuEntrySwapperPluginTest\n \t@Test\n \tpublic void testTobDoor()\n \t{\n-\t\twhen(config.swapQuick() && config.swapHomePortal() != HouseMode.ENTER).thenReturn(true);\n-\t\tmenuEntrySwapperPlugin.setShiftModifier(true);\n+\t\twhen(config.swapQuick()).thenReturn(true);\n+\t\twhen(config.swapHomePortal()).thenReturn(HouseMode.HOME);\n \n-\t\t//Enter -> Quick-Enter\n+\t\t//Quick-enter, Enter\n \t\tentries = new MenuEntry[]{\n \t\t\tmenu(\"Cancel\", \"\", MenuAction.CANCEL),\n \t\t\tmenu(\"Examine\", \"Formidable Passage\", MenuAction.EXAMINE_OBJECT),\n \t\t\tmenu(\"Walk here\", \"\", MenuAction.WALK),\n \n-\t\t\tmenu(\"Quick-Enter\", \"Formidable Passage\", MenuAction.WIDGET_SECOND_OPTION),\n-\t\t\tmenu(\"Enter\", \"Formidable Passage\", MenuAction.WIDGET_FIRST_OPTION),\n+\t\t\tmenu(\"Quick-Enter\", \"Formidable Passage\", MenuAction.GAME_OBJECT_SECOND_OPTION),\n+\t\t\tmenu(\"Enter\", \"Formidable Passage\", MenuAction.GAME_OBJECT_FIRST_OPTION),\n \t\t};\n \n \t\tmenuEntrySwapperPlugin.onClientTick(new ClientTick());\n"}}, {"oid": "bc685c1b35a1a8b56a8dda42377733fddc0d6a33", "url": "https://github.com/runelite/runelite/commit/bc685c1b35a1a8b56a8dda42377733fddc0d6a33", "message": "menu swapper: check home portal swap target\n\nThe swap was attemting to run on anything with the \"enter\" option, which\nconflicted with the quick-enter swap below it.\n\nCo-authored-by: melkypie <melkypie@users.noreply.github.com>", "committedDate": "2020-01-11T00:58:05Z", "type": "forcePushed"}, {"oid": "200363ff753d77f76cf889bb1d6df4aa77a79d17", "url": "https://github.com/runelite/runelite/commit/200363ff753d77f76cf889bb1d6df4aa77a79d17", "message": "menu swapper: check home portal swap target\n\nThe swap was attemting to run on anything with the \"enter\" option, which\nconflicted with the quick-enter swap below it.\n\nCo-authored-by: Adam <Adam@sigterm.info>", "committedDate": "2020-01-11T01:19:12Z", "type": "commit"}, {"oid": "200363ff753d77f76cf889bb1d6df4aa77a79d17", "url": "https://github.com/runelite/runelite/commit/200363ff753d77f76cf889bb1d6df4aa77a79d17", "message": "menu swapper: check home portal swap target\n\nThe swap was attemting to run on anything with the \"enter\" option, which\nconflicted with the quick-enter swap below it.\n\nCo-authored-by: Adam <Adam@sigterm.info>", "committedDate": "2020-01-11T01:19:12Z", "type": "forcePushed"}]}