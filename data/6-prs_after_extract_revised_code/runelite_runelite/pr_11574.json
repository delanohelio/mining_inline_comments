{"pr_number": 11574, "pr_title": "player-indicators: don't decorate non-player custom menu options", "pr_createdAt": "2020-05-13T19:34:58Z", "pr_url": "https://github.com/runelite/runelite/pull/11574", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkxNDY4OA==", "url": "https://github.com/runelite/runelite/pull/11574#discussion_r424914688", "bodyText": "Adam commented in discord and I agree somewhat that it's odd that this comment isn't updated to reflect the code that this method actually runs. This should mention that player and managed widget menus are handled here.", "author": "Nightfirecat", "createdAt": "2020-05-14T07:06:36Z", "path": "runelite-client/src/main/java/net/runelite/client/menus/MenuManager.java", "diffHunk": "@@ -247,7 +247,8 @@ private void removeNpcOption(NPCComposition composition, String npcOption)\n \t@Subscribe\n \tpublic void onMenuOptionClicked(MenuOptionClicked event)\n \t{\n-\t\tif (event.getMenuAction() != MenuAction.RUNELITE)\n+\t\tif (event.getMenuAction() != MenuAction.RUNELITE\n+\t\t\t&& event.getMenuAction() != MenuAction.RUNELITE_PLAYER)\n \t\t{\n \t\t\treturn; // not a player menu", "originalCommit": "45b27967f80dfd194b16472a43a57388329cbb33", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4eb7f12e68a88104656c5a51246187292892c5e5", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/menus/MenuManager.java b/runelite-client/src/main/java/net/runelite/client/menus/MenuManager.java\nindex d6754dd92..55b75645a 100644\n--- a/runelite-client/src/main/java/net/runelite/client/menus/MenuManager.java\n+++ b/runelite-client/src/main/java/net/runelite/client/menus/MenuManager.java\n\n@@ -250,7 +256,7 @@ public class MenuManager\n \t\tif (event.getMenuAction() != MenuAction.RUNELITE\n \t\t\t&& event.getMenuAction() != MenuAction.RUNELITE_PLAYER)\n \t\t{\n-\t\t\treturn; // not a player menu\n+\t\t\treturn; // not a custom widget or player option\n \t\t}\n \n \t\tint widgetId = event.getWidgetId();\n"}}, {"oid": "4eb7f12e68a88104656c5a51246187292892c5e5", "url": "https://github.com/runelite/runelite/commit/4eb7f12e68a88104656c5a51246187292892c5e5", "message": "player-indicators: don't decorate non-player custom menu options\n\nSplits the RUNELITE menu action into two actions:\n\nRUNELITE -  general menu items.\n\nRUNELITE_PLAYER - menu items which target a player and have its identifier set to a player index.\n\nThen the player indicators plugin is changed to only decorate RUNELITE_PLAYER menu items.", "committedDate": "2020-05-27T22:11:07Z", "type": "forcePushed"}, {"oid": "a0dd7bb0a91890603a74d798eb006a2cc8026288", "url": "https://github.com/runelite/runelite/commit/a0dd7bb0a91890603a74d798eb006a2cc8026288", "message": "player-indicators: don't decorate non-player custom menu options\n\nSplits the RUNELITE menu action into two actions:\n\nRUNELITE -  general menu items.\n\nRUNELITE_PLAYER - menu items which target a player and have its identifier set to a player index.\n\nThen the player indicators plugin is changed to only decorate RUNELITE_PLAYER menu items.", "committedDate": "2020-05-27T22:20:56Z", "type": "commit"}, {"oid": "a0dd7bb0a91890603a74d798eb006a2cc8026288", "url": "https://github.com/runelite/runelite/commit/a0dd7bb0a91890603a74d798eb006a2cc8026288", "message": "player-indicators: don't decorate non-player custom menu options\n\nSplits the RUNELITE menu action into two actions:\n\nRUNELITE -  general menu items.\n\nRUNELITE_PLAYER - menu items which target a player and have its identifier set to a player index.\n\nThen the player indicators plugin is changed to only decorate RUNELITE_PLAYER menu items.", "committedDate": "2020-05-27T22:20:56Z", "type": "forcePushed"}]}