{"pr_number": 11327, "pr_title": "item stats: fix worn items bank menu incorrect weights", "pr_createdAt": "2020-04-20T06:28:36Z", "pr_url": "https://github.com/runelite/runelite/pull/11327", "timeline": [{"oid": "eee9c371e70250abed24178a453b12b12cc188b5", "url": "https://github.com/runelite/runelite/commit/eee9c371e70250abed24178a453b12b12cc188b5", "message": "item stats: fix worn items bank menu incorrect weights (issue 11237)", "committedDate": "2020-04-20T06:25:42Z", "type": "commit"}, {"oid": "7d7a4dfe8774699dcc5f7ab9ad3334af2031bae5", "url": "https://github.com/runelite/runelite/commit/7d7a4dfe8774699dcc5f7ab9ad3334af2031bae5", "message": "item stats: adhere to style guide", "committedDate": "2020-04-20T09:31:36Z", "type": "commit"}, {"oid": "39ea531176dfea1939046ee127114b3f4fde1e9d", "url": "https://github.com/runelite/runelite/commit/39ea531176dfea1939046ee127114b3f4fde1e9d", "message": "item stats: remove formatting change in unrelated code", "committedDate": "2020-04-24T17:54:37Z", "type": "commit"}, {"oid": "ad1b6bad5e554457678dcf7de669648572a30364", "url": "https://github.com/runelite/runelite/commit/ad1b6bad5e554457678dcf7de669648572a30364", "message": "item stats: remove formatting change in unrelated code (pt2)", "committedDate": "2020-04-24T17:55:33Z", "type": "commit"}, {"oid": "91502178598c2c29994f6f205164ca1ec52f20be", "url": "https://github.com/runelite/runelite/commit/91502178598c2c29994f6f205164ca1ec52f20be", "message": "item stats: refactor fix to worn items bank menu incorrect weights issue", "committedDate": "2020-04-24T20:41:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM2Njk2Nw==", "url": "https://github.com/runelite/runelite/pull/11327#discussion_r415366967", "bodyText": "Why is this parent check necessary?", "author": "Adam-", "createdAt": "2020-04-26T18:09:42Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/itemstats/ItemStatOverlay.java", "diffHunk": "@@ -105,7 +105,8 @@ public Dimension render(Graphics2D graphics)\n \n \t\tint itemId = entry.getIdentifier();\n \n-\t\tif (group == WidgetInfo.EQUIPMENT.getGroupId())\n+\t\tif (group == WidgetInfo.EQUIPMENT.getGroupId() || (group == WidgetInfo.BANK_EQUIPMENT_CONTAINER.getGroupId()\n+\t\t\t&& widget.getParentId() == WidgetInfo.BANK_EQUIPMENT_CONTAINER.getId()))", "originalCommit": "91502178598c2c29994f6f205164ca1ec52f20be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM4NzcwNA==", "url": "https://github.com/runelite/runelite/pull/11327#discussion_r415387704", "bodyText": "Here is the widget hierarchy when in the bank equipment UI:\n12.1 BANK_CONTAINER\n  - 12.66 BANK_EQUIPMENT_CONTAINER\n    - 12.73 Head Slot \n      - 12.73[1] item in head slot (contains ItemId)\n    - 12.74 Cape Slot\n    - 12.75 Neck Slot\n    - 12.76 Weapon Slot\n    - 12.77 Body Slot\n    - 12.78 Shield Slot\n    - 12.79 Legs Slot\n    - 12.80 Hands Slot\n    - 12.81 Feet Slot\n    - 12.82 Ring Slot\n    - 12.83 Ammunition Slot\n\nChecking that widget.getParentID() was 12.66 seemed easier than checking is widget.getChildID() one of  (73 || 74 || 75 || 76 || 77 || 78 || 79 || 80 || 81 || 82 || 83)", "author": "vonpawn", "createdAt": "2020-04-26T19:56:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM2Njk2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM4ODQ1Mw==", "url": "https://github.com/runelite/runelite/pull/11327#discussion_r415388453", "bodyText": "Oh, so its to prevent showing the stats over normal items in the bank? Maybe add a comment for that this seems non-obvious to me", "author": "Adam-", "createdAt": "2020-04-26T20:00:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM2Njk2Nw=="}], "type": "inlineReview", "revised_code": {"commit": "f8371d933260635d03180c3331d70d7e74b1a68e", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/itemstats/ItemStatOverlay.java b/runelite-client/src/main/java/net/runelite/client/plugins/itemstats/ItemStatOverlay.java\nindex cbf952042..c3d43b5af 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/itemstats/ItemStatOverlay.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/itemstats/ItemStatOverlay.java\n\n@@ -108,6 +108,11 @@ public class ItemStatOverlay extends Overlay\n \t\tif (group == WidgetInfo.EQUIPMENT.getGroupId() || (group == WidgetInfo.BANK_EQUIPMENT_CONTAINER.getGroupId()\n \t\t\t&& widget.getParentId() == WidgetInfo.BANK_EQUIPMENT_CONTAINER.getId()))\n \t\t{\n+\t\t\t/*\n+\t\t\tFor the bank worn equipment UI, the current widget is one of the equipment slots like head slot or cape\n+\t\t\tslot. In order to easily check that the widget is one of these slots, check that the parent is the bank\n+\t\t\tworn equipment UI widget.\n+\t\t\t*/\n \t\t\tfinal Widget widgetItem = widget.getChild(1);\n \t\t\tif (widgetItem != null)\n \t\t\t{\n"}}, {"oid": "7ce349f9cad8c8707e74c5e2215f2d21837c896c", "url": "https://github.com/runelite/runelite/commit/7ce349f9cad8c8707e74c5e2215f2d21837c896c", "message": "Update ItemStatOverlay.java", "committedDate": "2020-04-26T18:10:02Z", "type": "commit"}, {"oid": "f8371d933260635d03180c3331d70d7e74b1a68e", "url": "https://github.com/runelite/runelite/commit/f8371d933260635d03180c3331d70d7e74b1a68e", "message": "item stats: add comment to clarify why checking for the parent widget is needed", "committedDate": "2020-04-26T20:31:42Z", "type": "commit"}, {"oid": "0df831ab276e6b7eec796287bab320437c41055f", "url": "https://github.com/runelite/runelite/commit/0df831ab276e6b7eec796287bab320437c41055f", "message": "Update ItemStatOverlay.java", "committedDate": "2020-04-26T20:41:58Z", "type": "commit"}]}