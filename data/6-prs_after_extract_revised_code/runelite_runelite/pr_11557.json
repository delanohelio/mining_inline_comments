{"pr_number": 11557, "pr_title": "Float loot tracker groups to top of list when obtaining drop", "pr_createdAt": "2020-05-12T07:24:22Z", "pr_url": "https://github.com/runelite/runelite/pull/11557", "timeline": [{"oid": "5df3804e82898e4736e3ea2096a9149dea0bcd43", "url": "https://github.com/runelite/runelite/commit/5df3804e82898e4736e3ea2096a9149dea0bcd43", "message": "Loot tracker panel now attempts to push the related group box to the top of the panel upon receiving a drop", "committedDate": "2020-05-12T07:20:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzg4MjE0Mg==", "url": "https://github.com/runelite/runelite/pull/11557#discussion_r423882142", "bodyText": "Since the common case will not require reordering you can optimize this via\nint idx = logsContainer.getComponentZOrder(box);\nif (idx > 0) {\n  logsContainer.remove(idx);\n  logsContainer.add(box, 0);\n}", "author": "Adam-", "createdAt": "2020-05-12T16:46:31Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerPanel.java", "diffHunk": "@@ -502,6 +502,10 @@ private LootTrackerBox buildBox(LootTrackerRecord record)\n \t\t\t{\n \t\t\t\tif (box.matches(record))\n \t\t\t\t{\n+\t\t\t\t\t//float the matched box to the top of the UI list\n+\t\t\t\t\tlogsContainer.remove(box);", "originalCommit": "5df3804e82898e4736e3ea2096a9149dea0bcd43", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3OTAzNg==", "url": "https://github.com/runelite/runelite/pull/11557#discussion_r423979036", "bodyText": "Good point! Implemented the change as recommended and verified it's still functioning as expected.", "author": "Vidyogamasta", "createdAt": "2020-05-12T19:26:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzg4MjE0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "f40e86cb95dea3ddb3af97a7f450dc4624751a37", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerPanel.java b/runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerPanel.java\nindex 91307b5f3..c8c797709 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerPanel.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerPanel.java\n\n@@ -502,9 +502,12 @@ class LootTrackerPanel extends PluginPanel\n \t\t\t{\n \t\t\t\tif (box.matches(record))\n \t\t\t\t{\n-\t\t\t\t\t//float the matched box to the top of the UI list\n-\t\t\t\t\tlogsContainer.remove(box);\n-\t\t\t\t\tlogsContainer.add(box, 0);\n+\t\t\t\t\t//float the matched box to the top of the UI list if it's not already first\n+\t\t\t\t\tint idx = logsContainer.getComponentZOrder(box);\n+\t\t\t\t\tif (idx > 0) {\n+\t\t\t\t\t\tlogsContainer.remove(idx);\n+\t\t\t\t\t\tlogsContainer.add(box, 0);\n+\t\t\t\t\t}\n \n \t\t\t\t\tbox.addKill(record);\n \t\t\t\t\treturn box;\n"}}, {"oid": "f40e86cb95dea3ddb3af97a7f450dc4624751a37", "url": "https://github.com/runelite/runelite/commit/f40e86cb95dea3ddb3af97a7f450dc4624751a37", "message": "Optimized loot tracker to not add/re-add a box to the top of the list if it's already at the top of the list.", "committedDate": "2020-05-12T19:23:15Z", "type": "commit"}, {"oid": "e8c24f46721bbbc237e5d2d8bb2dd38efc7e2726", "url": "https://github.com/runelite/runelite/commit/e8c24f46721bbbc237e5d2d8bb2dd38efc7e2726", "message": "Corrected style by moving brace to new line", "committedDate": "2020-05-12T19:58:31Z", "type": "commit"}, {"oid": "a839f5892c1bbd2080d4018969d65e4b1f161f07", "url": "https://github.com/runelite/runelite/commit/a839f5892c1bbd2080d4018969d65e4b1f161f07", "message": "Update LootTrackerPanel.java", "committedDate": "2020-05-24T15:27:41Z", "type": "commit"}]}