{"pr_number": 12430, "pr_title": "Inferno timer improvements", "pr_createdAt": "2020-09-01T14:56:28Z", "pr_url": "https://github.com/runelite/runelite/pull/12430", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIxNzM2Nw==", "url": "https://github.com/runelite/runelite/pull/12430#discussion_r481217367", "bodyText": "I think that this rolls over from 59:59 to 00:00, which is wrong.", "author": "Adam-", "createdAt": "2020-09-01T15:10:39Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/timers/ElapsedTimer.java", "diffHunk": "@@ -55,7 +55,7 @@ public String getText()\n \t\t}\n \n \t\tDuration time = Duration.between(startTime, lastTime == null ? Instant.now() : lastTime);\n-\t\tfinal String formatString = time.toHours() > 0 ? \"HH:mm\" : \"mm:ss\";\n+\t\tfinal String formatString = \"mm:ss\";", "originalCommit": "0043d97fb1d2651c005c9ec8daf50c228818b82f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "b2d5a391574ce265ccf18e97e2fa0ab27aa9873a", "url": "https://github.com/runelite/runelite/commit/b2d5a391574ce265ccf18e97e2fa0ab27aa9873a", "message": "timers: fixed inferno timer displaying incorrect time and updated elapsed timer format", "committedDate": "2020-09-01T15:51:56Z", "type": "forcePushed"}, {"oid": "6f8b6bb5eacb041f48da74c23057d1588641baa3", "url": "https://github.com/runelite/runelite/commit/6f8b6bb5eacb041f48da74c23057d1588641baa3", "message": "timers: updated elapsed timer to display mm:ss format", "committedDate": "2020-09-01T16:16:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQyNjE2MQ==", "url": "https://github.com/runelite/runelite/pull/12430#discussion_r483426161", "bodyText": "This is a duplicate of the line above it--remove it", "author": "Nightfirecat", "createdAt": "2020-09-04T07:00:06Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/timers/ElapsedTimerTest.java", "diffHunk": "@@ -47,14 +47,15 @@ public void testGetText()\n \t\tassertEquals(\"05:00\", timerText(fiveMinutesAgo, now));\n \t\tassertEquals(\"05:00\", timerText(fiveMinutesAgo, null));\n \t\tassertEquals(\"55:00\", timerText(oneHourAgo, fiveMinutesAgo));\n+\t\tassertEquals(\"55:00\", timerText(oneHourAgo, fiveMinutesAgo));", "originalCommit": "6f8b6bb5eacb041f48da74c23057d1588641baa3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a36ce3be04eea6e0d3bfac02ff26d23da9586cca", "chunk": "diff --git a/runelite-client/src/test/java/net/runelite/client/plugins/timers/ElapsedTimerTest.java b/runelite-client/src/test/java/net/runelite/client/plugins/timers/ElapsedTimerTest.java\nindex 60cad46f6..2b3c1e461 100644\n--- a/runelite-client/src/test/java/net/runelite/client/plugins/timers/ElapsedTimerTest.java\n+++ b/runelite-client/src/test/java/net/runelite/client/plugins/timers/ElapsedTimerTest.java\n\n@@ -47,7 +47,6 @@ public class ElapsedTimerTest\n \t\tassertEquals(\"05:00\", timerText(fiveMinutesAgo, now));\n \t\tassertEquals(\"05:00\", timerText(fiveMinutesAgo, null));\n \t\tassertEquals(\"55:00\", timerText(oneHourAgo, fiveMinutesAgo));\n-\t\tassertEquals(\"55:00\", timerText(oneHourAgo, fiveMinutesAgo));\n \t\tassertEquals(\"59:55\", timerText(oneHourAgo, fiveSecondsAgo));\n \t\tassertEquals(\"60:00\", timerText(oneHourAgo, now));\n \t\tassertEquals(\"60:00\", timerText(oneHourAgo, null));\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQyNjc5OA==", "url": "https://github.com/runelite/runelite/pull/12430#discussion_r483426798", "bodyText": "This would affect timers for both fight caves and inferno? If so, this isn't correct.", "author": "Nightfirecat", "createdAt": "2020-09-04T07:01:29Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/timers/TimersPlugin.java", "diffHunk": "@@ -691,7 +691,7 @@ else if (event.getMessage().contains(KILLED_TELEBLOCK_OPPONENT_TEXT))\n \t\t\t\tint wave = Integer.parseInt(matcher.group(1));\n \t\t\t\tif (wave == 1)\n \t\t\t\t{\n-\t\t\t\t\tconfig.tzhaarStartTime(now);\n+\t\t\t\t\tconfig.tzhaarStartTime(now.minus(Duration.ofSeconds(6)));", "originalCommit": "3327473e2619478ad6b46152f2649a720e03c4f8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a36ce3be04eea6e0d3bfac02ff26d23da9586cca", "chunk": "diff --git a/runelite-client/src/main/java/net/runelite/client/plugins/timers/TimersPlugin.java b/runelite-client/src/main/java/net/runelite/client/plugins/timers/TimersPlugin.java\nindex 28997cee1..3e55efc2a 100644\n--- a/runelite-client/src/main/java/net/runelite/client/plugins/timers/TimersPlugin.java\n+++ b/runelite-client/src/main/java/net/runelite/client/plugins/timers/TimersPlugin.java\n\n@@ -691,7 +691,15 @@ public class TimersPlugin extends Plugin\n \t\t\t\tint wave = Integer.parseInt(matcher.group(1));\n \t\t\t\tif (wave == 1)\n \t\t\t\t{\n-\t\t\t\t\tconfig.tzhaarStartTime(now.minus(Duration.ofSeconds(6)));\n+\t\t\t\t\tif(isInInferno())\n+\t\t\t\t\t{\n+\t\t\t\t\t\tconfig.tzhaarStartTime(now.minus(Duration.ofSeconds(6)));\n+\t\t\t\t\t}\n+\t\t\t\t\telse\n+\t\t\t\t\t{\n+\t\t\t\t\t\tconfig.tzhaarStartTime(now);\n+\t\t\t\t\t}\n+\n \t\t\t\t\tcreateTzhaarTimer();\n \t\t\t\t}\n \t\t\t}\n"}}, {"oid": "a36ce3be04eea6e0d3bfac02ff26d23da9586cca", "url": "https://github.com/runelite/runelite/commit/a36ce3be04eea6e0d3bfac02ff26d23da9586cca", "message": "timers: updated elapsed timer to display mm:ss format", "committedDate": "2020-09-04T15:09:42Z", "type": "forcePushed"}, {"oid": "549b2339213c834f7ecafe676c783019459ce827", "url": "https://github.com/runelite/runelite/commit/549b2339213c834f7ecafe676c783019459ce827", "message": "timers: updated elapsed timer to display mm:ss format", "committedDate": "2020-09-04T16:17:39Z", "type": "forcePushed"}, {"oid": "dccabe0a0a6d5f347a493bf0fa43c6676c44757f", "url": "https://github.com/runelite/runelite/commit/dccabe0a0a6d5f347a493bf0fa43c6676c44757f", "message": "timers: fixed inferno timer starting at incorrect time", "committedDate": "2020-09-10T00:35:39Z", "type": "forcePushed"}, {"oid": "57ec9c3189f01ebfb6a08caadf0c00f62c90d3f8", "url": "https://github.com/runelite/runelite/commit/57ec9c3189f01ebfb6a08caadf0c00f62c90d3f8", "message": "timers: fixed inferno timer starting at incorrect time", "committedDate": "2020-09-10T00:37:17Z", "type": "forcePushed"}, {"oid": "43c5e1f916e065e1b7b11a462997545edbd85192", "url": "https://github.com/runelite/runelite/commit/43c5e1f916e065e1b7b11a462997545edbd85192", "message": "ElapsedTimer: Display time in mm:ss format", "committedDate": "2020-09-10T00:38:03Z", "type": "commit"}, {"oid": "be21d03f769a2b4b00c605779c9841bc572dd4d2", "url": "https://github.com/runelite/runelite/commit/be21d03f769a2b4b00c605779c9841bc572dd4d2", "message": "timers: Fix inferno timer starting time", "committedDate": "2020-09-10T00:38:23Z", "type": "forcePushed"}, {"oid": "2c2c013cbaa452c5a8c433cbbe49d9942c735ee3", "url": "https://github.com/runelite/runelite/commit/2c2c013cbaa452c5a8c433cbbe49d9942c735ee3", "message": "timers: Fix inferno timer starting time", "committedDate": "2020-09-14T13:07:04Z", "type": "commit"}, {"oid": "2c2c013cbaa452c5a8c433cbbe49d9942c735ee3", "url": "https://github.com/runelite/runelite/commit/2c2c013cbaa452c5a8c433cbbe49d9942c735ee3", "message": "timers: Fix inferno timer starting time", "committedDate": "2020-09-14T13:07:04Z", "type": "forcePushed"}]}