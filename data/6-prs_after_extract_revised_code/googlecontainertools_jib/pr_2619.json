{"pr_number": 2619, "pr_title": "Make ContainerConfiguration required when building BuildContext", "pr_createdAt": "2020-07-23T22:33:29Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2619", "timeline": [{"oid": "d09be84a3b2ec52aa5aa7db4815d637a91327e4f", "url": "https://github.com/GoogleContainerTools/jib/commit/d09be84a3b2ec52aa5aa7db4815d637a91327e4f", "message": "Ensure ContainerConfiguration is non-null", "committedDate": "2020-07-23T21:58:03Z", "type": "commit"}, {"oid": "54af472628c7979d5ba4a9fee2cd4011d13e5982", "url": "https://github.com/GoogleContainerTools/jib/commit/54af472628c7979d5ba4a9fee2cd4011d13e5982", "message": "Fix tests", "committedDate": "2020-07-23T22:18:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE5NTcyMA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2619#discussion_r460195720", "bodyText": "I wonder if we should keep this?", "author": "loosebazooka", "createdAt": "2020-07-24T17:38:19Z", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/configuration/ContainerConfiguration.java", "diffHunk": "@@ -39,17 +39,14 @@\n /** Immutable configuration options for the container. */\n public class ContainerConfiguration {\n \n-  /** The default creation time of the container (constant to ensure reproducibility by default). */\n-  public static final Instant DEFAULT_CREATION_TIME = Instant.EPOCH;", "originalCommit": "54af472628c7979d5ba4a9fee2cd4011d13e5982", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDIwMjAyOA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2619#discussion_r460202028", "bodyText": "Okay. The class is not a public API, so I moved it to the builder and made it private.\nFYI, eventually we should remove the entire class and replace it with ContainerBuildPlan. They are basically identical.", "author": "chanseokoh", "createdAt": "2020-07-24T17:51:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE5NTcyMA=="}], "type": "inlineReview", "revised_code": {"commit": "002ab3f5d162f1ea49dc312ea55417d5be697b05", "chunk": "diff --git a/jib-core/src/main/java/com/google/cloud/tools/jib/configuration/ContainerConfiguration.java b/jib-core/src/main/java/com/google/cloud/tools/jib/configuration/ContainerConfiguration.java\nindex 521c2bac..9e66888e 100644\n--- a/jib-core/src/main/java/com/google/cloud/tools/jib/configuration/ContainerConfiguration.java\n+++ b/jib-core/src/main/java/com/google/cloud/tools/jib/configuration/ContainerConfiguration.java\n\n@@ -42,11 +42,16 @@ public class ContainerConfiguration {\n   /** Builder for instantiating a {@link ContainerConfiguration}. */\n   public static class Builder {\n \n+    /**\n+     * The default creation time of the container (constant to ensure reproducibility by default).\n+     */\n+    private static final Instant DEFAULT_CREATION_TIME = Instant.EPOCH;\n+\n     // note that a LinkedHashSet instead of HashSet has been used so as to preserve the platform\n     // order\n     private Set<Platform> platforms =\n         new LinkedHashSet<>(Collections.singleton(new Platform(\"amd64\", \"linux\")));\n-    private Instant creationTime = Instant.EPOCH;\n+    private Instant creationTime = DEFAULT_CREATION_TIME;\n     @Nullable private ImmutableList<String> entrypoint;\n     @Nullable private ImmutableList<String> programArguments;\n     @Nullable private Map<String, String> environmentMap;\n"}}, {"oid": "002ab3f5d162f1ea49dc312ea55417d5be697b05", "url": "https://github.com/GoogleContainerTools/jib/commit/002ab3f5d162f1ea49dc312ea55417d5be697b05", "message": "private DEFAULT_CREATION_TIME constant", "committedDate": "2020-07-24T17:48:02Z", "type": "commit"}]}