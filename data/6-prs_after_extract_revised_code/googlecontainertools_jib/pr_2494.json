{"pr_number": 2494, "pr_title": "Update Build Plan API to accept file ownership in layers", "pr_createdAt": "2020-05-26T19:08:27Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2494", "timeline": [{"oid": "612e75e4266d482e0f67b587d54a2a3c7f3d81a8", "url": "https://github.com/GoogleContainerTools/jib/commit/612e75e4266d482e0f67b587d54a2a3c7f3d81a8", "message": "Update API to accept file ownership in layers", "committedDate": "2020-05-26T18:58:57Z", "type": "commit"}, {"oid": "e81774e319fbeedc1cbae534e27ec5b2cf7ddb5d", "url": "https://github.com/GoogleContainerTools/jib/commit/e81774e319fbeedc1cbae534e27ec5b2cf7ddb5d", "message": "CHANGELOG", "committedDate": "2020-05-26T19:10:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0NjA3OA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2494#discussion_r430646078", "bodyText": "Perhaps Objects.equals was necessary in the past when permissions and modificationTime were @Nullable. The java.util.Objects.equals is implemented like the following, so we don't need it.\n    public static boolean equals(Object a, Object b) {\n        return (a == b) || (a != null && a.equals(b));\n    }", "author": "chanseokoh", "createdAt": "2020-05-26T19:13:32Z", "path": "jib-build-plan/src/main/java/com/google/cloud/tools/jib/api/buildplan/FileEntry.java", "diffHunk": "@@ -121,12 +158,13 @@ public boolean equals(Object other) {\n     FileEntry otherFileEntry = (FileEntry) other;\n     return sourceFile.equals(otherFileEntry.sourceFile)\n         && extractionPath.equals(otherFileEntry.extractionPath)\n-        && Objects.equals(permissions, otherFileEntry.permissions)\n-        && Objects.equals(modificationTime, otherFileEntry.modificationTime);", "originalCommit": "e81774e319fbeedc1cbae534e27ec5b2cf7ddb5d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "b33f2de57003bc46649572b153db2cd01014502d", "url": "https://github.com/GoogleContainerTools/jib/commit/b33f2de57003bc46649572b153db2cd01014502d", "message": "Change default value for ownership", "committedDate": "2020-05-26T21:23:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcyMDYyOQ==", "url": "https://github.com/GoogleContainerTools/jib/pull/2494#discussion_r430720629", "bodyText": "the comment and the return value don't really line up?", "author": "loosebazooka", "createdAt": "2020-05-26T21:34:01Z", "path": "jib-build-plan/src/main/java/com/google/cloud/tools/jib/api/buildplan/FileEntriesLayer.java", "diffHunk": "@@ -265,6 +326,10 @@ public FileEntriesLayer build() {\n       DEFAULT_MODIFICATION_TIME_PROVIDER =\n           (sourcePath, destinationPath) -> DEFAULT_MODIFICATION_TIME;\n \n+  /** Provider that returns default file ownership (\"0:0\"). */", "originalCommit": "b33f2de57003bc46649572b153db2cd01014502d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcyMjczNw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2494#discussion_r430722737", "bodyText": "Fixed. Also updated the Build Plan Spec doc with the last commit.", "author": "chanseokoh", "createdAt": "2020-05-26T21:38:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcyMDYyOQ=="}], "type": "inlineReview", "revised_code": {"commit": "9a4c4b5a45feb5558bc7bf40f6fd551269e9f26b", "chunk": "diff --git a/jib-build-plan/src/main/java/com/google/cloud/tools/jib/api/buildplan/FileEntriesLayer.java b/jib-build-plan/src/main/java/com/google/cloud/tools/jib/api/buildplan/FileEntriesLayer.java\nindex 6f2581f19..e69a28990 100644\n--- a/jib-build-plan/src/main/java/com/google/cloud/tools/jib/api/buildplan/FileEntriesLayer.java\n+++ b/jib-build-plan/src/main/java/com/google/cloud/tools/jib/api/buildplan/FileEntriesLayer.java\n\n@@ -326,7 +326,10 @@ public class FileEntriesLayer implements LayerObject {\n       DEFAULT_MODIFICATION_TIME_PROVIDER =\n           (sourcePath, destinationPath) -> DEFAULT_MODIFICATION_TIME;\n \n-  /** Provider that returns default file ownership (\"0:0\"). */\n+  /**\n+   * Provider that returns default file ownership (an empty string \"\" effectively representing\n+   * \"0:0\").\n+   */\n   public static final BiFunction<Path, AbsoluteUnixPath, String> DEFAULT_OWNERSHIP_PROVIDER =\n       (sourcePath, destinationPath) -> \"\";\n \n"}}, {"oid": "9a4c4b5a45feb5558bc7bf40f6fd551269e9f26b", "url": "https://github.com/GoogleContainerTools/jib/commit/9a4c4b5a45feb5558bc7bf40f6fd551269e9f26b", "message": "Update Javadoc and Build Plan Spec", "committedDate": "2020-05-26T21:38:10Z", "type": "commit"}, {"oid": "92f1323eee6967e4780ed393f55326e242481de6", "url": "https://github.com/GoogleContainerTools/jib/commit/92f1323eee6967e4780ed393f55326e242481de6", "message": "Fix test", "committedDate": "2020-05-26T21:47:09Z", "type": "commit"}]}