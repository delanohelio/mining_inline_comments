{"pr_number": 2959, "pr_title": "remove dependency on testkit in jibcli", "pr_createdAt": "2020-12-22T23:03:04Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2959", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU1NjgxNw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2959#discussion_r547556817", "bodyText": "This can be chained? new Command(cmd).setWorkingDir(...).run()", "author": "chanseokoh", "createdAt": "2020-12-22T23:32:12Z", "path": "jib-cli/src/integration-test/java/com/google/cloud/tools/jib/cli/cli2/TestProject.java", "diffHunk": "@@ -74,13 +73,15 @@ protected void before() throws Throwable {\n \n     projectRoot = newFolder().toPath();\n     copyProject(testProjectName, projectRoot);\n-\n-    gradleRunner =\n-        GradleRunner.create().withGradleVersion(gradleVersion).withProjectDir(projectRoot.toFile());\n   }\n \n-  public BuildResult build(String... gradleArguments) {\n-    return gradleRunner.withArguments(gradleArguments).build();\n+  public void build(String... gradleArguments) throws IOException, InterruptedException {\n+    List<String> cmd = new ArrayList<>();\n+    cmd.add(\"./gradlew\");\n+    cmd.addAll(Arrays.asList(gradleArguments));\n+    Command command = new Command(cmd);\n+    command.setWorkingDir(projectRoot);\n+    command.run();", "originalCommit": "6fe9e4b806465243be51faf5133e17294cb6a5c2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d8dc98f3b2f648f8245dfda88fc31608f9833901", "chunk": "diff --git a/jib-cli/src/integration-test/java/com/google/cloud/tools/jib/cli/cli2/TestProject.java b/jib-cli/src/integration-test/java/com/google/cloud/tools/jib/cli/TestProject.java\nsimilarity index 94%\nrename from jib-cli/src/integration-test/java/com/google/cloud/tools/jib/cli/cli2/TestProject.java\nrename to jib-cli/src/integration-test/java/com/google/cloud/tools/jib/cli/TestProject.java\nindex b2d4fe38..42cbb873 100644\n--- a/jib-cli/src/integration-test/java/com/google/cloud/tools/jib/cli/cli2/TestProject.java\n+++ b/jib-cli/src/integration-test/java/com/google/cloud/tools/jib/cli/TestProject.java\n\n@@ -79,9 +79,9 @@ public class TestProject extends TemporaryFolder implements Closeable {\n     List<String> cmd = new ArrayList<>();\n     cmd.add(\"./gradlew\");\n     cmd.addAll(Arrays.asList(gradleArguments));\n-    Command command = new Command(cmd);\n-    command.setWorkingDir(projectRoot);\n-    command.run();\n+    new Command(cmd)\n+        .setWorkingDir(projectRoot)\n+        .run();\n   }\n \n   public Path getProjectRoot() {\n"}}, {"oid": "6d4fcda0f02e4b88bd689bb5b30727561f118c35", "url": "https://github.com/GoogleContainerTools/jib/commit/6d4fcda0f02e4b88bd689bb5b30727561f118c35", "message": "remove dependency on testkit in jibcli", "committedDate": "2020-12-23T16:06:17Z", "type": "commit"}, {"oid": "d8dc98f3b2f648f8245dfda88fc31608f9833901", "url": "https://github.com/GoogleContainerTools/jib/commit/d8dc98f3b2f648f8245dfda88fc31608f9833901", "message": "cleanup", "committedDate": "2020-12-23T16:06:17Z", "type": "commit"}, {"oid": "d8dc98f3b2f648f8245dfda88fc31608f9833901", "url": "https://github.com/GoogleContainerTools/jib/commit/d8dc98f3b2f648f8245dfda88fc31608f9833901", "message": "cleanup", "committedDate": "2020-12-23T16:06:17Z", "type": "forcePushed"}, {"oid": "5dc5ea6172d23d935a48e2c3e7b08da0d05dd186", "url": "https://github.com/GoogleContainerTools/jib/commit/5dc5ea6172d23d935a48e2c3e7b08da0d05dd186", "message": "formatting", "committedDate": "2020-12-23T16:28:37Z", "type": "commit"}]}