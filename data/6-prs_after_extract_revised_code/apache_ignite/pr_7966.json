{"pr_number": 7966, "pr_title": "IGNITE-13148 .NET: Add Thin Client Continuous Query", "pr_createdAt": "2020-06-26T12:33:22Z", "pr_url": "https://github.com/apache/ignite/pull/7966", "timeline": [{"oid": "6d21b0e368ffe0de70e4ddef9e7a01145098f52f", "url": "https://github.com/apache/ignite/commit/6d21b0e368ffe0de70e4ddef9e7a01145098f52f", "message": "Merge remote-tracking branch 'origin/master' into ignite-13148", "committedDate": "2020-07-20T12:45:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2ODE4Nw==", "url": "https://github.com/apache/ignite/pull/7966#discussion_r457668187", "bodyText": "Are you sure we should treat it as a query? I know there is a query word in name, but I'm not sure those mechanisms belong to the same pool.", "author": "isapego", "createdAt": "2020-07-20T20:20:08Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java", "diffHunk": "@@ -0,0 +1,147 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.platform.client.cache;\n+\n+import javax.cache.configuration.Factory;\n+import javax.cache.configuration.FactoryBuilder;\n+import javax.cache.event.CacheEntryEventFilter;\n+import org.apache.ignite.IgniteCache;\n+import org.apache.ignite.binary.BinaryObject;\n+import org.apache.ignite.cache.CacheEntryEventSerializableFilter;\n+import org.apache.ignite.cache.query.ContinuousQuery;\n+import org.apache.ignite.cache.query.QueryCursor;\n+import org.apache.ignite.internal.binary.BinaryObjectImpl;\n+import org.apache.ignite.internal.binary.BinaryRawReaderEx;\n+import org.apache.ignite.internal.binary.GridBinaryMarshaller;\n+import org.apache.ignite.internal.processors.platform.PlatformContext;\n+import org.apache.ignite.internal.processors.platform.PlatformJavaObjectFactoryProxy;\n+import org.apache.ignite.internal.processors.platform.client.ClientConnectionContext;\n+import org.apache.ignite.internal.processors.platform.client.ClientPlatform;\n+import org.apache.ignite.internal.processors.platform.client.ClientResponse;\n+import org.apache.ignite.internal.processors.platform.client.ClientStatus;\n+import org.apache.ignite.internal.processors.platform.client.IgniteClientException;\n+import org.apache.ignite.internal.processors.platform.utils.PlatformUtils;\n+\n+/**\n+ * Continuous query request.\n+ */\n+@SuppressWarnings({\"rawtypes\", \"unchecked\"})\n+public class ClientCacheQueryContinuousRequest extends ClientCacheRequest {\n+    /** Query. */\n+    private final ContinuousQuery qry;\n+\n+    /** */\n+    private final Object filter;\n+\n+    /** */\n+    private final byte filterPlatform;\n+\n+    /**\n+     * Ctor.\n+     *\n+     * @param reader Reader.\n+     */\n+    public ClientCacheQueryContinuousRequest(BinaryRawReaderEx reader) {\n+        super(reader);\n+\n+        int pageSize = reader.readInt();\n+        long timeInterval = reader.readLong();\n+        boolean includeExpired = reader.readBoolean();\n+\n+        filter = reader.readObjectDetached();\n+        filterPlatform = filter == null ? 0 : reader.readByte();\n+\n+        qry = new ContinuousQuery();\n+\n+        qry.setPageSize(pageSize)\n+           .setTimeInterval(timeInterval)\n+           .setIncludeExpired(includeExpired);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public ClientResponse process(ClientConnectionContext ctx) {\n+        qry.setRemoteFilterFactory(getFilterFactory(ctx));\n+\n+        ctx.incrementCursors();", "originalCommit": "6d21b0e368ffe0de70e4ddef9e7a01145098f52f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg5MzI3MQ==", "url": "https://github.com/apache/ignite/pull/7966#discussion_r457893271", "bodyText": "Good point, I've posted this to the dev list.", "author": "ptupitsyn", "createdAt": "2020-07-21T07:30:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2ODE4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3MDAwNg==", "url": "https://github.com/apache/ignite/pull/7966#discussion_r458670006", "bodyText": "No replies on dev list. Let's keep it as is for now. Continuous Query still gives us a QueryCursor, so I think it fits with the other cursors.", "author": "ptupitsyn", "createdAt": "2020-07-22T09:44:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2ODE4Nw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "a0d1f74e4b918c6fc52888acac46b16459bf2c85", "url": "https://github.com/apache/ignite/commit/a0d1f74e4b918c6fc52888acac46b16459bf2c85", "message": "Merge branch 'master' into ignite-13148", "committedDate": "2020-07-21T07:30:30Z", "type": "commit"}, {"oid": "271506b6fe88b1f8ef6b91dfd7e2052bce7f70bb", "url": "https://github.com/apache/ignite/commit/271506b6fe88b1f8ef6b91dfd7e2052bce7f70bb", "message": "Updating XMLDoc for tests", "committedDate": "2020-07-21T07:52:01Z", "type": "commit"}, {"oid": "c38c6fd68bb14ec6d4a2d034770e3391f5c57e52", "url": "https://github.com/apache/ignite/commit/c38c6fd68bb14ec6d4a2d034770e3391f5c57e52", "message": "Updating XMLDoc for tests", "committedDate": "2020-07-21T07:53:27Z", "type": "commit"}, {"oid": "3542d518f1a7c3abe1f48f495a8b118208447b05", "url": "https://github.com/apache/ignite/commit/3542d518f1a7c3abe1f48f495a8b118208447b05", "message": "Updating XMLDoc for tests", "committedDate": "2020-07-21T07:55:50Z", "type": "commit"}, {"oid": "48f3602dddfcfe7d28eac0e085a6192d0036da44", "url": "https://github.com/apache/ignite/commit/48f3602dddfcfe7d28eac0e085a6192d0036da44", "message": "Updating XMLDoc for tests", "committedDate": "2020-07-21T07:58:17Z", "type": "commit"}, {"oid": "df7c234a6406eef377413f2861f7de5b4727d153", "url": "https://github.com/apache/ignite/commit/df7c234a6406eef377413f2861f7de5b4727d153", "message": "Updating XMLDoc for tests", "committedDate": "2020-07-21T08:01:38Z", "type": "commit"}, {"oid": "ac288e2c2d459fa72f5595b78f4e15088e7532db", "url": "https://github.com/apache/ignite/commit/ac288e2c2d459fa72f5595b78f4e15088e7532db", "message": "Updating XMLDoc for tests", "committedDate": "2020-07-21T08:04:28Z", "type": "commit"}, {"oid": "e6a169a96b5b5405b481b36424a6babfd343ba72", "url": "https://github.com/apache/ignite/commit/e6a169a96b5b5405b481b36424a6babfd343ba72", "message": "Updating XMLDoc for tests", "committedDate": "2020-07-21T08:06:57Z", "type": "commit"}, {"oid": "e1eb1d9aca33a6ba728286da147e6db392bfd518", "url": "https://github.com/apache/ignite/commit/e1eb1d9aca33a6ba728286da147e6db392bfd518", "message": "Updating XMLDoc for tests", "committedDate": "2020-07-21T08:08:47Z", "type": "commit"}, {"oid": "2972336b87a37eaa3b7441665edd92706bed37c9", "url": "https://github.com/apache/ignite/commit/2972336b87a37eaa3b7441665edd92706bed37c9", "message": "Updating XMLDoc for tests", "committedDate": "2020-07-21T08:10:35Z", "type": "commit"}, {"oid": "8201311ac89d236ecb90bc358dc65f9ca82fc97b", "url": "https://github.com/apache/ignite/commit/8201311ac89d236ecb90bc358dc65f9ca82fc97b", "message": "XMLDocs done", "committedDate": "2020-07-21T08:11:47Z", "type": "commit"}, {"oid": "d732bf9accae3a957682708891ed0b33924b4252", "url": "https://github.com/apache/ignite/commit/d732bf9accae3a957682708891ed0b33924b4252", "message": "Add separate classes for Thin cont query APIs, do not reuse thick", "committedDate": "2020-07-01T20:04:29Z", "type": "commit"}, {"oid": "a32abf4daf83bdeebbc8042846aa4945164193c9", "url": "https://github.com/apache/ignite/commit/a32abf4daf83bdeebbc8042846aa4945164193c9", "message": "IgniteAsyncCallback TODOs", "committedDate": "2020-07-02T08:47:21Z", "type": "commit"}, {"oid": "e3b4331c17bb7f6ae79525a5bb0f649b8b9bcd36", "url": "https://github.com/apache/ignite/commit/e3b4331c17bb7f6ae79525a5bb0f649b8b9bcd36", "message": "Use IgniteAsyncCallback on server to notify the client", "committedDate": "2020-07-02T09:15:51Z", "type": "commit"}, {"oid": "094fe7f8b7042215eac50664d036274817b8190f", "url": "https://github.com/apache/ignite/commit/094fe7f8b7042215eac50664d036274817b8190f", "message": "Handle connection loss", "committedDate": "2020-07-02T11:49:14Z", "type": "commit"}, {"oid": "904205546ce795fde8e6c15c8b7511b99914e07c", "url": "https://github.com/apache/ignite/commit/904205546ce795fde8e6c15c8b7511b99914e07c", "message": "Handle connection loss", "committedDate": "2020-07-02T11:57:03Z", "type": "commit"}, {"oid": "5c639cb776d4e6a2e3be83a55525e5551490638d", "url": "https://github.com/apache/ignite/commit/5c639cb776d4e6a2e3be83a55525e5551490638d", "message": "Handle connection loss", "committedDate": "2020-07-02T12:00:13Z", "type": "commit"}, {"oid": "3a126a34c1ca7ac0d2914e37c359805c1cc2a74f", "url": "https://github.com/apache/ignite/commit/3a126a34c1ca7ac0d2914e37c359805c1cc2a74f", "message": "TestClientDisconnectRaisesDisconnectedEventOnQueryHandle done", "committedDate": "2020-07-02T12:19:13Z", "type": "commit"}, {"oid": "3a219ef4eb4ed6dcf595eaf4aee787459f9860b9", "url": "https://github.com/apache/ignite/commit/3a219ef4eb4ed6dcf595eaf4aee787459f9860b9", "message": "Add TestClientDisconnectDoesNotRaiseDisconnectedEventOnDisposedQueryHandle", "committedDate": "2020-07-02T12:23:00Z", "type": "commit"}, {"oid": "a4e0eabcb401fc6a31861dba4c5da344f25ea14f", "url": "https://github.com/apache/ignite/commit/a4e0eabcb401fc6a31861dba4c5da344f25ea14f", "message": "Add TestInitialScanQueryWithFilter", "committedDate": "2020-07-02T15:57:50Z", "type": "commit"}, {"oid": "d3e6d6949d019620926c5c5d0521eb195e22c7d2", "url": "https://github.com/apache/ignite/commit/d3e6d6949d019620926c5c5d0521eb195e22c7d2", "message": "Adding Java filter test", "committedDate": "2020-07-02T16:07:28Z", "type": "commit"}, {"oid": "f77a1e6e2b84e5f4b8ebbdb1d20e871af4b99bb4", "url": "https://github.com/apache/ignite/commit/f77a1e6e2b84e5f4b8ebbdb1d20e871af4b99bb4", "message": "Adding Java filter test", "committedDate": "2020-07-02T18:31:54Z", "type": "commit"}, {"oid": "1617a44d78d86b20d77ad33be8595e601ab17e85", "url": "https://github.com/apache/ignite/commit/1617a44d78d86b20d77ad33be8595e601ab17e85", "message": "Fix PLATFORM_JAVA_OBJECT_FACTORY_PROXY handling", "committedDate": "2020-07-02T18:35:16Z", "type": "commit"}, {"oid": "126b4d745ab23d14ac8a607f345a955275a4a217", "url": "https://github.com/apache/ignite/commit/126b4d745ab23d14ac8a607f345a955275a4a217", "message": "cleanup", "committedDate": "2020-07-02T18:44:16Z", "type": "commit"}, {"oid": "ad7b5127a70ca05f97e07d824d7d60a0cca6d9af", "url": "https://github.com/apache/ignite/commit/ad7b5127a70ca05f97e07d824d7d60a0cca6d9af", "message": "Add TestInvalidInitialSqlQueryResultsInCorrectErrorMessage", "committedDate": "2020-07-02T19:17:21Z", "type": "commit"}, {"oid": "8c7515ca505ed4aad52c6e8dee397c36daf96dfe", "url": "https://github.com/apache/ignite/commit/8c7515ca505ed4aad52c6e8dee397c36daf96dfe", "message": "Adding TestExceptionInFilterResultsInCorrectErrorMessage", "committedDate": "2020-07-02T19:25:54Z", "type": "commit"}, {"oid": "fb60664c585077c7ec4ec4456c3bff6ed603cc6c", "url": "https://github.com/apache/ignite/commit/fb60664c585077c7ec4ec4456c3bff6ed603cc6c", "message": "Adding TestExceptionInFilterResultsInCorrectErrorMessage", "committedDate": "2020-07-02T19:37:21Z", "type": "commit"}, {"oid": "30b5aae367c8baab0b71cc2514bd61994eb8ba78", "url": "https://github.com/apache/ignite/commit/30b5aae367c8baab0b71cc2514bd61994eb8ba78", "message": "Adding TestExceptionInFilterResultsInCorrectErrorMessage", "committedDate": "2020-07-02T19:38:00Z", "type": "commit"}, {"oid": "190c4602a3d2d85c69e8483f07ed01d79c0d8b65", "url": "https://github.com/apache/ignite/commit/190c4602a3d2d85c69e8483f07ed01d79c0d8b65", "message": "TODOs", "committedDate": "2020-07-02T19:38:34Z", "type": "commit"}, {"oid": "e1fe82590eebcab852fe352486696588c52a3de5", "url": "https://github.com/apache/ignite/commit/e1fe82590eebcab852fe352486696588c52a3de5", "message": "Add TestExceptionInFilterIsLoggedAndFilterIsIgnored", "committedDate": "2020-07-02T19:55:42Z", "type": "commit"}, {"oid": "984f5675b969e6ee8ac41ad995269500a6e55562", "url": "https://github.com/apache/ignite/commit/984f5675b969e6ee8ac41ad995269500a6e55562", "message": "Use ContinuousQueryClient instead of thick api", "committedDate": "2020-07-03T11:04:35Z", "type": "commit"}, {"oid": "736cf7f758654d377fea7a62e45586f0159b2996", "url": "https://github.com/apache/ignite/commit/736cf7f758654d377fea7a62e45586f0159b2996", "message": "Adding tests", "committedDate": "2020-07-03T13:39:46Z", "type": "commit"}, {"oid": "d852f858e7d5d10e4de6e6703a2635b93d17d250", "url": "https://github.com/apache/ignite/commit/d852f858e7d5d10e4de6e6703a2635b93d17d250", "message": "Adding TestComputeWorksWhenContinuousQueryIsActive", "committedDate": "2020-07-03T16:13:45Z", "type": "commit"}, {"oid": "b9f1320609dcf48c6283cc2b2c2843a804d7e399", "url": "https://github.com/apache/ignite/commit/b9f1320609dcf48c6283cc2b2c2843a804d7e399", "message": "Merge remote-tracking branch 'origin/master' into ignite-13148\n\n# Conflicts:\n#\tmodules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheFieldsQueryCursor.java", "committedDate": "2020-07-04T07:29:17Z", "type": "commit"}, {"oid": "c1376c724053fc5a8b457eae96fa48a076359915", "url": "https://github.com/apache/ignite/commit/c1376c724053fc5a8b457eae96fa48a076359915", "message": "Adding TestComputeWorksWhenContinuousQueryIsActive", "committedDate": "2020-07-04T08:11:12Z", "type": "commit"}, {"oid": "3e782d9392fb65bd07da7fabe2f255ee36d715ad", "url": "https://github.com/apache/ignite/commit/3e782d9392fb65bd07da7fabe2f255ee36d715ad", "message": "Fix build on .NET Core 3.1", "committedDate": "2020-07-04T08:12:16Z", "type": "commit"}, {"oid": "8f4de2d54b3e6f8d061d91786cf469596a89b10a", "url": "https://github.com/apache/ignite/commit/8f4de2d54b3e6f8d061d91786cf469596a89b10a", "message": "Add test placeholders", "committedDate": "2020-07-04T08:17:14Z", "type": "commit"}, {"oid": "c507a1c2625f6ee1dc7c24405e3789cc2c005f9d", "url": "https://github.com/apache/ignite/commit/c507a1c2625f6ee1dc7c24405e3789cc2c005f9d", "message": "Add TestCustomBufferSizeResultsInBatchedUpdates", "committedDate": "2020-07-05T17:47:02Z", "type": "commit"}, {"oid": "1386f7280af2c094da3350bd73067483f1ea729c", "url": "https://github.com/apache/ignite/commit/1386f7280af2c094da3350bd73067483f1ea729c", "message": "Add TestCustomBufferSizeResultsInBatchedUpdates", "committedDate": "2020-07-05T17:54:39Z", "type": "commit"}, {"oid": "5782712bceb09b57a7d28ada254fabd32f7b5166", "url": "https://github.com/apache/ignite/commit/5782712bceb09b57a7d28ada254fabd32f7b5166", "message": "TestCustomBufferSizeResultsInBatchedUpdates works", "committedDate": "2020-07-05T18:07:08Z", "type": "commit"}, {"oid": "85ec57fed18ce65cdac513504ed1476376dccf37", "url": "https://github.com/apache/ignite/commit/85ec57fed18ce65cdac513504ed1476376dccf37", "message": "Remove IgniteAsyncCallback from thin client listener to receive updates in batches", "committedDate": "2020-07-06T18:15:12Z", "type": "commit"}, {"oid": "0fae2c3fadaa7f39edf9c58b34e4170300c1152a", "url": "https://github.com/apache/ignite/commit/0fae2c3fadaa7f39edf9c58b34e4170300c1152a", "message": "Remove IgniteAsyncCallback from thin client listener to receive updates in batches", "committedDate": "2020-07-06T19:17:08Z", "type": "commit"}, {"oid": "61b00573eaf7ea74976fe8604eca2ee354101c4d", "url": "https://github.com/apache/ignite/commit/61b00573eaf7ea74976fe8604eca2ee354101c4d", "message": "Fix TestCustomBufferSizeResultsInBatchedUpdates to check actual batches", "committedDate": "2020-07-06T19:25:57Z", "type": "commit"}, {"oid": "07d745ad0cacd582a563f15daff0d9da36adb886", "url": "https://github.com/apache/ignite/commit/07d745ad0cacd582a563f15daff0d9da36adb886", "message": "Adding more batching tests", "committedDate": "2020-07-06T19:40:33Z", "type": "commit"}, {"oid": "d764b9685cf3083fdbd2b190a4a345d77a11fbb9", "url": "https://github.com/apache/ignite/commit/d764b9685cf3083fdbd2b190a4a345d77a11fbb9", "message": "Adding more batching tests", "committedDate": "2020-07-06T19:43:33Z", "type": "commit"}, {"oid": "7223f43490a19fab61585fcbc3cf2835b7b59602", "url": "https://github.com/apache/ignite/commit/7223f43490a19fab61585fcbc3cf2835b7b59602", "message": "wip", "committedDate": "2020-07-06T19:50:31Z", "type": "commit"}, {"oid": "8b666e3c18f60d6467489344e8bb387e12092b19", "url": "https://github.com/apache/ignite/commit/8b666e3c18f60d6467489344e8bb387e12092b19", "message": "TODOs", "committedDate": "2020-07-06T20:24:11Z", "type": "commit"}, {"oid": "08a29c425d65ebd111fec28ea88417a00fc579fa", "url": "https://github.com/apache/ignite/commit/08a29c425d65ebd111fec28ea88417a00fc579fa", "message": "Fix TestCustomTimeIntervalCausesIncompleteBatches", "committedDate": "2020-07-06T20:25:23Z", "type": "commit"}, {"oid": "22de9e5ea978b5579d1ee7ddd8dbf5618b186899", "url": "https://github.com/apache/ignite/commit/22de9e5ea978b5579d1ee7ddd8dbf5618b186899", "message": "Add placeholder TestDisposedQueryHandleDoesNotReceiveUpdates", "committedDate": "2020-07-06T20:32:03Z", "type": "commit"}, {"oid": "935cb9047998bd13a0015b332337ba65b9f84ac5", "url": "https://github.com/apache/ignite/commit/935cb9047998bd13a0015b332337ba65b9f84ac5", "message": "TODOs on race condition between cursor close and event notifications", "committedDate": "2020-07-06T20:39:48Z", "type": "commit"}, {"oid": "afbaa3a43ca34ec6efdcf14a937b365f28c8df85", "url": "https://github.com/apache/ignite/commit/afbaa3a43ca34ec6efdcf14a937b365f28c8df85", "message": "TestDisposedQueryHandleDoesNotReceiveUpdates implemented", "committedDate": "2020-07-06T21:00:56Z", "type": "commit"}, {"oid": "7caf307d694bd9fcc075873f80f9303e4cbbc632", "url": "https://github.com/apache/ignite/commit/7caf307d694bd9fcc075873f80f9303e4cbbc632", "message": "Add ClientCacheQueryContinuousCursor to close the query properly", "committedDate": "2020-07-07T09:34:12Z", "type": "commit"}, {"oid": "23a91d7e2085d517fdd719d1008e8bc28eeeb060", "url": "https://github.com/apache/ignite/commit/23a91d7e2085d517fdd719d1008e8bc28eeeb060", "message": "Check dangling listeners after every test", "committedDate": "2020-07-07T10:13:51Z", "type": "commit"}, {"oid": "89d7411d7d1e86630cdb57cdb15108244dfa3ad1", "url": "https://github.com/apache/ignite/commit/89d7411d7d1e86630cdb57cdb15108244dfa3ad1", "message": "Check dangling listeners after every test", "committedDate": "2020-07-07T10:18:31Z", "type": "commit"}, {"oid": "67036a3bee3b5d86bfd99071507b862cf5cdf76e", "url": "https://github.com/apache/ignite/commit/67036a3bee3b5d86bfd99071507b862cf5cdf76e", "message": "Check dangling listeners after every test - fixing tests", "committedDate": "2020-07-07T10:19:25Z", "type": "commit"}, {"oid": "8b4680b47d98efbf2ed2ae30faff4ad90c708572", "url": "https://github.com/apache/ignite/commit/8b4680b47d98efbf2ed2ae30faff4ad90c708572", "message": "Improve", "committedDate": "2020-07-07T10:24:37Z", "type": "commit"}, {"oid": "7b08892748e5afa8d2f1728e7ebc4adf82dab972", "url": "https://github.com/apache/ignite/commit/7b08892748e5afa8d2f1728e7ebc4adf82dab972", "message": "Improve TestExceptionInInitialQueryFilterResultsInCorrectErrorMessage", "committedDate": "2020-07-07T10:28:55Z", "type": "commit"}, {"oid": "03917db5edc9ae6fcbc8439fea37348e0ae37df2", "url": "https://github.com/apache/ignite/commit/03917db5edc9ae6fcbc8439fea37348e0ae37df2", "message": "Improve TestExceptionInInitialQueryFilterResultsInCorrectErrorMessage", "committedDate": "2020-07-07T10:55:35Z", "type": "commit"}, {"oid": "9dd2e2318ac1af5cca7f46fe547094737a3c511f", "url": "https://github.com/apache/ignite/commit/9dd2e2318ac1af5cca7f46fe547094737a3c511f", "message": "Improve TestInitialScanQuery", "committedDate": "2020-07-07T11:13:42Z", "type": "commit"}, {"oid": "d6b66c09a8e543e041fe94d58ddfd42c85c4f365", "url": "https://github.com/apache/ignite/commit/d6b66c09a8e543e041fe94d58ddfd42c85c4f365", "message": "Improve TestInitialScanQuery", "committedDate": "2020-07-07T11:15:32Z", "type": "commit"}, {"oid": "524094c8b5b7da9994fec3e278365433123c59f7", "url": "https://github.com/apache/ignite/commit/524094c8b5b7da9994fec3e278365433123c59f7", "message": "Improve TestInitialScanQuery", "committedDate": "2020-07-07T11:23:43Z", "type": "commit"}, {"oid": "58779359f41ac9ade17d44db80ea7191831573a6", "url": "https://github.com/apache/ignite/commit/58779359f41ac9ade17d44db80ea7191831573a6", "message": "Do not close continuous query on initial query cursor dispose", "committedDate": "2020-07-07T11:49:39Z", "type": "commit"}, {"oid": "e2e358af1f667ec3954fc934ca20b60331b8ccbe", "url": "https://github.com/apache/ignite/commit/e2e358af1f667ec3954fc934ca20b60331b8ccbe", "message": "Do not close continuous query on initial query cursor dispose", "committedDate": "2020-07-07T11:51:34Z", "type": "commit"}, {"oid": "7c117f3e307f9476e386fa00b9beba8f21bd1fd4", "url": "https://github.com/apache/ignite/commit/7c117f3e307f9476e386fa00b9beba8f21bd1fd4", "message": "Adding tests for dangling notification listeners", "committedDate": "2020-07-07T13:55:57Z", "type": "commit"}, {"oid": "3287875ee95e08897f3009f20b8273aa177703ca", "url": "https://github.com/apache/ignite/commit/3287875ee95e08897f3009f20b8273aa177703ca", "message": "Adding tests for dangling notification listeners", "committedDate": "2020-07-07T13:59:35Z", "type": "commit"}, {"oid": "7ebf86cd8e7131a3bb8d336e5d69a32c1ca618e9", "url": "https://github.com/apache/ignite/commit/7ebf86cd8e7131a3bb8d336e5d69a32c1ca618e9", "message": "Adding tests for dangling notification listeners", "committedDate": "2020-07-07T14:19:00Z", "type": "commit"}, {"oid": "ad679cbd68b19fcd6448e751a5b57e9d0aea6d54", "url": "https://github.com/apache/ignite/commit/ad679cbd68b19fcd6448e751a5b57e9d0aea6d54", "message": "Merge branch 'master' into ignite-13148\n\n# Conflicts:\n#\tmodules/platforms/dotnet/Apache.Ignite.Core/Impl/Cache/Query/QueryCursorBase.cs\n#\tmodules/platforms/dotnet/Apache.Ignite.Core/Impl/Client/ClientSocket.cs", "committedDate": "2020-07-11T13:31:39Z", "type": "commit"}, {"oid": "73c67c6b152691bbfa85c04766a86607b92a5f66", "url": "https://github.com/apache/ignite/commit/73c67c6b152691bbfa85c04766a86607b92a5f66", "message": "Merge branch 'master' into ignite-13148", "committedDate": "2020-07-14T11:18:10Z", "type": "commit"}, {"oid": "6f5fb14be1431789f94639174e1b7bc2832ba4cd", "url": "https://github.com/apache/ignite/commit/6f5fb14be1431789f94639174e1b7bc2832ba4cd", "message": "Removing InitialQuery", "committedDate": "2020-07-14T11:53:34Z", "type": "commit"}, {"oid": "c9fa84b1a6965bc34ffd8099cdbe37aed0b3651e", "url": "https://github.com/apache/ignite/commit/c9fa84b1a6965bc34ffd8099cdbe37aed0b3651e", "message": "Removing InitialQuery", "committedDate": "2020-07-14T11:56:18Z", "type": "commit"}, {"oid": "69509b761949dc128eb37238d02691074bf4c68a", "url": "https://github.com/apache/ignite/commit/69509b761949dc128eb37238d02691074bf4c68a", "message": "Removing initial query functionality", "committedDate": "2020-07-14T12:12:51Z", "type": "commit"}, {"oid": "79dc9c9290fbdb6726e9b4d2b7b89aea090f9af3", "url": "https://github.com/apache/ignite/commit/79dc9c9290fbdb6726e9b4d2b7b89aea090f9af3", "message": "Removing initial query functionality", "committedDate": "2020-07-14T12:14:12Z", "type": "commit"}, {"oid": "e921da7dd60d74ee4712f56d9ce67099c3ee080f", "url": "https://github.com/apache/ignite/commit/e921da7dd60d74ee4712f56d9ce67099c3ee080f", "message": "Removing initial query functionality", "committedDate": "2020-07-14T12:22:21Z", "type": "commit"}, {"oid": "c58906f436f9e8bde13db80bd6bd51e9e2a72a25", "url": "https://github.com/apache/ignite/commit/c58906f436f9e8bde13db80bd6bd51e9e2a72a25", "message": "Removing initial query functionality", "committedDate": "2020-07-14T12:29:12Z", "type": "commit"}, {"oid": "a91c0b8d710f21d0eb46676dce1c7308ca21577f", "url": "https://github.com/apache/ignite/commit/a91c0b8d710f21d0eb46676dce1c7308ca21577f", "message": "Removing InitialQuery", "committedDate": "2020-07-14T12:29:26Z", "type": "commit"}, {"oid": "10f14a5253e5eca1aa3263c796eba31be02c41d5", "url": "https://github.com/apache/ignite/commit/10f14a5253e5eca1aa3263c796eba31be02c41d5", "message": "Removing InitialQuery", "committedDate": "2020-07-14T12:31:26Z", "type": "commit"}, {"oid": "2cccf4c51189599428754cc4c9cff85d31fa5f9f", "url": "https://github.com/apache/ignite/commit/2cccf4c51189599428754cc4c9cff85d31fa5f9f", "message": "cleanup", "committedDate": "2020-07-14T12:55:09Z", "type": "commit"}, {"oid": "867a9b088b04f740e2906dfff68801355227de16", "url": "https://github.com/apache/ignite/commit/867a9b088b04f740e2906dfff68801355227de16", "message": "Combine cursor and handle on the server side", "committedDate": "2020-07-14T19:34:22Z", "type": "commit"}, {"oid": "7d509216f269aa802ca9036b7ef8997d05b206fb", "url": "https://github.com/apache/ignite/commit/7d509216f269aa802ca9036b7ef8997d05b206fb", "message": "Add OP_QUERY_CONTINUOUS_END_NOTIFICATION", "committedDate": "2020-07-14T19:56:55Z", "type": "commit"}, {"oid": "6061d85d66bb2e580910f0fa6ce4886a6208d010", "url": "https://github.com/apache/ignite/commit/6061d85d66bb2e580910f0fa6ce4886a6208d010", "message": "Use OP_QUERY_CONTINUOUS_END_NOTIFICATION to remove notification handlers", "committedDate": "2020-07-14T20:11:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg0MDkwNg==", "url": "https://github.com/apache/ignite/pull/7966#discussion_r454840906", "bodyText": "Redundant NL", "author": "alex-plekhanov", "createdAt": "2020-07-15T07:14:53Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java", "diffHunk": "@@ -0,0 +1,144 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.platform.client.cache;\n+\n+import org.apache.ignite.IgniteCache;\n+import org.apache.ignite.binary.BinaryObject;\n+import org.apache.ignite.cache.CacheEntryEventSerializableFilter;\n+import org.apache.ignite.cache.query.ContinuousQuery;\n+import org.apache.ignite.cache.query.QueryCursor;\n+import org.apache.ignite.internal.binary.BinaryObjectImpl;\n+import org.apache.ignite.internal.binary.BinaryRawReaderEx;\n+import org.apache.ignite.internal.binary.GridBinaryMarshaller;\n+import org.apache.ignite.internal.processors.platform.PlatformContext;\n+import org.apache.ignite.internal.processors.platform.PlatformJavaObjectFactoryProxy;\n+import org.apache.ignite.internal.processors.platform.client.*;\n+import org.apache.ignite.internal.processors.platform.utils.PlatformUtils;\n+\n+import javax.cache.configuration.Factory;\n+import javax.cache.configuration.FactoryBuilder;\n+import javax.cache.event.CacheEntryEventFilter;\n+\n+/**\n+ * Continuous query request.\n+ */\n+@SuppressWarnings({\"rawtypes\", \"unchecked\"})\n+public class ClientCacheQueryContinuousRequest extends ClientCacheRequest {\n+", "originalCommit": "6061d85d66bb2e580910f0fa6ce4886a6208d010", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1NjExNg==", "url": "https://github.com/apache/ignite/pull/7966#discussion_r454956116", "bodyText": "Fixed", "author": "ptupitsyn", "createdAt": "2020-07-15T10:36:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg0MDkwNg=="}], "type": "inlineReview", "revised_code": {"commit": "6d21b0e368ffe0de70e4ddef9e7a01145098f52f", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java\nindex 67f25fb137..5075ca7560 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java\n\n@@ -17,6 +17,9 @@\n \n package org.apache.ignite.internal.processors.platform.client.cache;\n \n+import javax.cache.configuration.Factory;\n+import javax.cache.configuration.FactoryBuilder;\n+import javax.cache.event.CacheEntryEventFilter;\n import org.apache.ignite.IgniteCache;\n import org.apache.ignite.binary.BinaryObject;\n import org.apache.ignite.cache.CacheEntryEventSerializableFilter;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg0MTc3Nw==", "url": "https://github.com/apache/ignite/pull/7966#discussion_r454841777", "bodyText": "{@inheritDoc}", "author": "alex-plekhanov", "createdAt": "2020-07-15T07:16:40Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousHandle.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.platform.client.cache;\n+\n+import org.apache.ignite.cache.query.QueryCursor;\n+import org.apache.ignite.internal.processors.platform.client.ClientCloseableResource;\n+import org.apache.ignite.internal.processors.platform.client.ClientConnectionContext;\n+import org.apache.ignite.internal.processors.platform.client.ClientMessageParser;\n+import org.apache.ignite.internal.processors.platform.client.ClientNotification;\n+\n+import javax.cache.event.CacheEntryEvent;\n+import javax.cache.event.CacheEntryListenerException;\n+import javax.cache.event.CacheEntryUpdatedListener;\n+\n+/**\n+ * Continuous query handle.\n+ * NOTE: Do not mark with {@link org.apache.ignite.lang.IgniteAsyncCallback} - it disables batching and sends\n+ * events one by one.\n+ */\n+public class ClientCacheQueryContinuousHandle implements CacheEntryUpdatedListener<Object, Object>, ClientCloseableResource {\n+    /** */\n+    private final ClientConnectionContext ctx;\n+\n+    /** */\n+    private volatile Long id;\n+\n+    /** */\n+    private volatile QueryCursor<?> cur;\n+\n+    /**\n+     * Ctor.\n+     * @param ctx Context.\n+     */\n+    public ClientCacheQueryContinuousHandle(ClientConnectionContext ctx) {\n+        assert ctx != null;\n+\n+        this.ctx = ctx;\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void onUpdated(Iterable<CacheEntryEvent<?, ?>> iterable) throws CacheEntryListenerException {\n+        // Client is not yet ready to receive notifications - skip them.\n+        if (id == null)\n+            return;\n+\n+        ClientCacheEntryEventNotification notification = new ClientCacheEntryEventNotification(\n+                ClientMessageParser.OP_QUERY_CONTINUOUS_EVENT_NOTIFICATION, id, iterable);\n+\n+        ctx.notifyClient(notification);\n+    }\n+\n+    /**\n+     * Sets the cursor id.\n+     * @param id Cursor id.\n+     */\n+    public void startNotifications(long id, QueryCursor<?> cur) {\n+        assert cur != null;\n+\n+        this.id = id;\n+        this.cur = cur;\n+    }\n+\n+    /** <inheritdoc /> */", "originalCommit": "6061d85d66bb2e580910f0fa6ce4886a6208d010", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1NjE2Mw==", "url": "https://github.com/apache/ignite/pull/7966#discussion_r454956163", "bodyText": "Fixed", "author": "ptupitsyn", "createdAt": "2020-07-15T10:36:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg0MTc3Nw=="}], "type": "inlineReview", "revised_code": {"commit": "6d21b0e368ffe0de70e4ddef9e7a01145098f52f", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousHandle.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousHandle.java\nindex dcda9ec425..127a3677fb 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousHandle.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousHandle.java\n\n@@ -17,15 +17,14 @@\n \n package org.apache.ignite.internal.processors.platform.client.cache;\n \n+import java.util.concurrent.atomic.AtomicBoolean;\n+import javax.cache.event.CacheEntryEvent;\n+import javax.cache.event.CacheEntryListenerException;\n+import javax.cache.event.CacheEntryUpdatedListener;\n import org.apache.ignite.cache.query.QueryCursor;\n import org.apache.ignite.internal.processors.platform.client.ClientCloseableResource;\n import org.apache.ignite.internal.processors.platform.client.ClientConnectionContext;\n import org.apache.ignite.internal.processors.platform.client.ClientMessageParser;\n-import org.apache.ignite.internal.processors.platform.client.ClientNotification;\n-\n-import javax.cache.event.CacheEntryEvent;\n-import javax.cache.event.CacheEntryListenerException;\n-import javax.cache.event.CacheEntryUpdatedListener;\n \n /**\n  * Continuous query handle.\n"}}, {"oid": "5015a17cfcb10d0541f35bb482f8518b3e1e7a5d", "url": "https://github.com/apache/ignite/commit/5015a17cfcb10d0541f35bb482f8518b3e1e7a5d", "message": "Remove OP_QUERY_CONTINUOUS_END_NOTIFICATION (does not make sense)", "committedDate": "2020-07-15T09:48:43Z", "type": "commit"}, {"oid": "21a8ffa83456794d42d563339c54f884d52495a4", "url": "https://github.com/apache/ignite/commit/21a8ffa83456794d42d563339c54f884d52495a4", "message": "Cleanup", "committedDate": "2020-07-15T10:35:21Z", "type": "commit"}, {"oid": "8273bbcbfa962090bf36282963787ae85460cec9", "url": "https://github.com/apache/ignite/commit/8273bbcbfa962090bf36282963787ae85460cec9", "message": "cleanup", "committedDate": "2020-07-15T10:37:03Z", "type": "commit"}, {"oid": "aaee174c5a41aa0ec876828a4709bb18c69761bb", "url": "https://github.com/apache/ignite/commit/aaee174c5a41aa0ec876828a4709bb18c69761bb", "message": "Fixing imports", "committedDate": "2020-07-15T10:39:28Z", "type": "commit"}, {"oid": "4c18dc82a1c36b309d9beb788f13c23ddcb041ca", "url": "https://github.com/apache/ignite/commit/4c18dc82a1c36b309d9beb788f13c23ddcb041ca", "message": "Fixing imports", "committedDate": "2020-07-15T10:41:34Z", "type": "commit"}, {"oid": "1b6f964b9354879f7c808b0d1db0fa0c0629fe32", "url": "https://github.com/apache/ignite/commit/1b6f964b9354879f7c808b0d1db0fa0c0629fe32", "message": "Adding tests", "committedDate": "2020-07-15T10:59:43Z", "type": "commit"}, {"oid": "934f8950027807c68980c7c092b56e1e7a9edb0c", "url": "https://github.com/apache/ignite/commit/934f8950027807c68980c7c092b56e1e7a9edb0c", "message": "Adding tests", "committedDate": "2020-07-15T11:05:37Z", "type": "commit"}, {"oid": "53e3c7923bd3d50ff3d8dcb1897b1925c833cb9c", "url": "https://github.com/apache/ignite/commit/53e3c7923bd3d50ff3d8dcb1897b1925c833cb9c", "message": "Update xmldoc", "committedDate": "2020-07-15T11:08:36Z", "type": "commit"}, {"oid": "609537d766f36e1c336de67f8dc104eeb6b9845f", "url": "https://github.com/apache/ignite/commit/609537d766f36e1c336de67f8dc104eeb6b9845f", "message": "Add TestMultipleQueriesMultithreaded", "committedDate": "2020-07-15T11:15:58Z", "type": "commit"}, {"oid": "46bd11cf8e863232d323cae257ad5d73a505131d", "url": "https://github.com/apache/ignite/commit/46bd11cf8e863232d323cae257ad5d73a505131d", "message": "Add missing decrementCursors call", "committedDate": "2020-07-15T11:27:44Z", "type": "commit"}, {"oid": "e5d52255ab0a692ed09c9422e5f3692b409a6696", "url": "https://github.com/apache/ignite/commit/e5d52255ab0a692ed09c9422e5f3692b409a6696", "message": "Add TestContinuousQueryCountIsLimitedByMaxCursors", "committedDate": "2020-07-15T11:49:35Z", "type": "commit"}, {"oid": "1daf7d106a174ee24ad6fd959155cc2c4a93b928", "url": "https://github.com/apache/ignite/commit/1daf7d106a174ee24ad6fd959155cc2c4a93b928", "message": "Adding tests", "committedDate": "2020-07-15T16:34:05Z", "type": "commit"}, {"oid": "3d1d93218c400591012599198deb83a55c092711", "url": "https://github.com/apache/ignite/commit/3d1d93218c400591012599198deb83a55c092711", "message": "Adding tests", "committedDate": "2020-07-15T16:38:03Z", "type": "commit"}, {"oid": "18b4d4846bb34ea284d67342d5357eb2618ffb86", "url": "https://github.com/apache/ignite/commit/18b4d4846bb34ea284d67342d5357eb2618ffb86", "message": "cleanup", "committedDate": "2020-07-15T18:14:22Z", "type": "commit"}, {"oid": "dcdb10acb757dc9ccff28a42ff7ecbeb52a5989d", "url": "https://github.com/apache/ignite/commit/dcdb10acb757dc9ccff28a42ff7ecbeb52a5989d", "message": "Add TestContinuousQueryWithKeepBinaryInvokesListenerInBinaryMode", "committedDate": "2020-07-15T18:19:29Z", "type": "commit"}, {"oid": "cd7fa9d76c70b15b3c06ccef2f0d6b29937cb825", "url": "https://github.com/apache/ignite/commit/cd7fa9d76c70b15b3c06ccef2f0d6b29937cb825", "message": "Add TestContinuousQueryWithKeepBinaryPassesBinaryObjectsToListener", "committedDate": "2020-07-15T18:20:40Z", "type": "commit"}, {"oid": "9a50dffca4b95d6e00376c5628fcc07658d3eb07", "url": "https://github.com/apache/ignite/commit/9a50dffca4b95d6e00376c5628fcc07658d3eb07", "message": "TestContinuousQueryWithKeepBinaryPassesBinaryObjectsToListenerAndFilter done", "committedDate": "2020-07-15T18:30:19Z", "type": "commit"}, {"oid": "5a42020fe0dccc8d5dbf2afc3720fb90753b522d", "url": "https://github.com/apache/ignite/commit/5a42020fe0dccc8d5dbf2afc3720fb90753b522d", "message": "Merge remote-tracking branch 'origin/master' into ignite-13148", "committedDate": "2020-07-15T18:31:58Z", "type": "commit"}, {"oid": "83ff0de8c7a275f59142974fb21c4c1e8bd4196e", "url": "https://github.com/apache/ignite/commit/83ff0de8c7a275f59142974fb21c4c1e8bd4196e", "message": "cleanup", "committedDate": "2020-07-15T18:47:25Z", "type": "commit"}, {"oid": "14a846ef12f9affa50750a2dbc436804a91bf853", "url": "https://github.com/apache/ignite/commit/14a846ef12f9affa50750a2dbc436804a91bf853", "message": "cleanup", "committedDate": "2020-07-15T18:50:24Z", "type": "commit"}, {"oid": "abf9e461e1207b6f0d4ad51b616e2613062756a0", "url": "https://github.com/apache/ignite/commit/abf9e461e1207b6f0d4ad51b616e2613062756a0", "message": "cleanup - revert unnecessary changes", "committedDate": "2020-07-15T18:58:43Z", "type": "commit"}, {"oid": "1adcb60a6090dd212317ceb4bdeb5c8eff0ecbe3", "url": "https://github.com/apache/ignite/commit/1adcb60a6090dd212317ceb4bdeb5c8eff0ecbe3", "message": "cleanup", "committedDate": "2020-07-15T19:01:52Z", "type": "commit"}, {"oid": "5899d67372e6030310586e00c6ff42f1c7c9bc94", "url": "https://github.com/apache/ignite/commit/5899d67372e6030310586e00c6ff42f1c7c9bc94", "message": "Fix build on classic .NET", "committedDate": "2020-07-15T19:08:15Z", "type": "commit"}, {"oid": "e5b4f2ce6fa5f69e3837e2bcc670df0badb65445", "url": "https://github.com/apache/ignite/commit/e5b4f2ce6fa5f69e3837e2bcc670df0badb65445", "message": "Fix tests", "committedDate": "2020-07-15T19:47:11Z", "type": "commit"}, {"oid": "a4a10da5c958cf147dcb4c305056771f65363a0a", "url": "https://github.com/apache/ignite/commit/a4a10da5c958cf147dcb4c305056771f65363a0a", "message": "Add TestDefaultSettings, fix inspection errors", "committedDate": "2020-07-15T21:40:40Z", "type": "commit"}, {"oid": "14e8da8910941e77dc1c3dc062c944bbdaf7ab92", "url": "https://github.com/apache/ignite/commit/14e8da8910941e77dc1c3dc062c944bbdaf7ab92", "message": "Fix inspections", "committedDate": "2020-07-15T21:41:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQyOTgxNw==", "url": "https://github.com/apache/ignite/pull/7966#discussion_r456429817", "bodyText": "ScanQuery -> ContinuousQuery", "author": "alex-plekhanov", "createdAt": "2020-07-17T13:06:53Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java", "diffHunk": "@@ -0,0 +1,147 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.platform.client.cache;\n+\n+import javax.cache.configuration.Factory;\n+import javax.cache.configuration.FactoryBuilder;\n+import javax.cache.event.CacheEntryEventFilter;\n+import org.apache.ignite.IgniteCache;\n+import org.apache.ignite.binary.BinaryObject;\n+import org.apache.ignite.cache.CacheEntryEventSerializableFilter;\n+import org.apache.ignite.cache.query.ContinuousQuery;\n+import org.apache.ignite.cache.query.QueryCursor;\n+import org.apache.ignite.internal.binary.BinaryObjectImpl;\n+import org.apache.ignite.internal.binary.BinaryRawReaderEx;\n+import org.apache.ignite.internal.binary.GridBinaryMarshaller;\n+import org.apache.ignite.internal.processors.platform.PlatformContext;\n+import org.apache.ignite.internal.processors.platform.PlatformJavaObjectFactoryProxy;\n+import org.apache.ignite.internal.processors.platform.client.ClientConnectionContext;\n+import org.apache.ignite.internal.processors.platform.client.ClientPlatform;\n+import org.apache.ignite.internal.processors.platform.client.ClientResponse;\n+import org.apache.ignite.internal.processors.platform.client.ClientStatus;\n+import org.apache.ignite.internal.processors.platform.client.IgniteClientException;\n+import org.apache.ignite.internal.processors.platform.utils.PlatformUtils;\n+\n+/**\n+ * Continuous query request.\n+ */\n+@SuppressWarnings({\"rawtypes\", \"unchecked\"})\n+public class ClientCacheQueryContinuousRequest extends ClientCacheRequest {\n+    /** Query. */\n+    private final ContinuousQuery qry;\n+\n+    /** */\n+    private final Object filter;\n+\n+    /** */\n+    private final byte filterPlatform;\n+\n+    /**\n+     * Ctor.\n+     *\n+     * @param reader Reader.\n+     */\n+    public ClientCacheQueryContinuousRequest(BinaryRawReaderEx reader) {\n+        super(reader);\n+\n+        int pageSize = reader.readInt();\n+        long timeInterval = reader.readLong();\n+        boolean includeExpired = reader.readBoolean();\n+\n+        filter = reader.readObjectDetached();\n+        filterPlatform = filter == null ? 0 : reader.readByte();\n+\n+        qry = new ContinuousQuery();\n+\n+        qry.setPageSize(pageSize)\n+           .setTimeInterval(timeInterval)\n+           .setIncludeExpired(includeExpired);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public ClientResponse process(ClientConnectionContext ctx) {\n+        qry.setRemoteFilterFactory(getFilterFactory(ctx));\n+\n+        ctx.incrementCursors();\n+\n+        try {\n+            IgniteCache cache = filterPlatform == ClientPlatform.JAVA && !isKeepBinary()\n+                    ? rawCache(ctx)\n+                    : cache(ctx);\n+\n+            ClientCacheQueryContinuousHandle handle = new ClientCacheQueryContinuousHandle(ctx);\n+            qry.setLocalListener(handle);\n+\n+            QueryCursor cur = cache.query(qry);\n+            long cursorId = ctx.resources().put(handle);\n+            handle.setCursor(cur);\n+\n+            return new ClientCacheQueryContinuousResponse(requestId(), handle, cursorId);\n+        }\n+        catch (Exception e) {\n+            ctx.decrementCursors();\n+            throw e;\n+        }\n+    }\n+\n+    /**\n+     * Gets the filter factory.\n+     *\n+     * @param ctx Connection context.\n+     * @return Filter factory or null.\n+     */\n+    private Factory<? extends CacheEntryEventFilter> getFilterFactory(ClientConnectionContext ctx) {\n+        if (filter == null)\n+            return null;\n+\n+        if (!(filter instanceof BinaryObject))\n+            throw new IgniteClientException(ClientStatus.FAILED,\n+                    \"Filter must be a BinaryObject: \" + filter.getClass());\n+\n+        BinaryObjectImpl bo = (BinaryObjectImpl) filter;\n+\n+        switch (filterPlatform) {\n+            case ClientPlatform.JAVA: {\n+                if (bo.typeId() == GridBinaryMarshaller.PLATFORM_JAVA_OBJECT_FACTORY_PROXY) {\n+                    PlatformJavaObjectFactoryProxy prx = bo.deserialize();\n+\n+                    CacheEntryEventSerializableFilter rmtFilter =\n+                            (CacheEntryEventSerializableFilter) prx.factory(ctx.kernalContext()).create();\n+\n+                    return FactoryBuilder.factoryOf(rmtFilter);\n+                }\n+\n+                return bo.deserialize();\n+            }\n+\n+            case ClientPlatform.DOTNET: {\n+                PlatformContext platformCtx = ctx.kernalContext().platform().context();\n+\n+                String curPlatform = platformCtx.platform();\n+\n+                if (!PlatformUtils.PLATFORM_DOTNET.equals(curPlatform))\n+                    throw new IgniteClientException(ClientStatus.FAILED, \"ScanQuery filter platform is \" +", "originalCommit": "14e8da8910941e77dc1c3dc062c944bbdaf7ab92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYwNTUwNA==", "url": "https://github.com/apache/ignite/pull/7966#discussion_r456605504", "bodyText": "Fixed", "author": "ptupitsyn", "createdAt": "2020-07-17T18:26:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQyOTgxNw=="}], "type": "inlineReview", "revised_code": {"commit": "6d21b0e368ffe0de70e4ddef9e7a01145098f52f", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java\nindex 772d408702..5075ca7560 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/platform/client/cache/ClientCacheQueryContinuousRequest.java\n\n@@ -135,7 +135,7 @@ public class ClientCacheQueryContinuousRequest extends ClientCacheRequest {\n                 String curPlatform = platformCtx.platform();\n \n                 if (!PlatformUtils.PLATFORM_DOTNET.equals(curPlatform))\n-                    throw new IgniteClientException(ClientStatus.FAILED, \"ScanQuery filter platform is \" +\n+                    throw new IgniteClientException(ClientStatus.FAILED, \"ContinuousQuery filter platform is \" +\n                             PlatformUtils.PLATFORM_DOTNET + \", current platform is \" + curPlatform);\n \n                 return FactoryBuilder.factoryOf(platformCtx.createContinuousQueryFilter(filter));\n"}}, {"oid": "949177922fad7b0f30e0d1e394bcf5ac46dbc923", "url": "https://github.com/apache/ignite/commit/949177922fad7b0f30e0d1e394bcf5ac46dbc923", "message": "Minor fixes", "committedDate": "2020-07-17T18:24:03Z", "type": "commit"}, {"oid": "350717adb94a429fb86fc9ae1be0d72925c1683e", "url": "https://github.com/apache/ignite/commit/350717adb94a429fb86fc9ae1be0d72925c1683e", "message": "Merge remote-tracking branch 'fork/ignite-13148' into ignite-13148", "committedDate": "2020-07-17T18:24:26Z", "type": "commit"}, {"oid": "b69a9d5e083f8ddaf2170032be7c1620b82084be", "url": "https://github.com/apache/ignite/commit/b69a9d5e083f8ddaf2170032be7c1620b82084be", "message": "Add TestContinuousQueryWithCustomObjects", "committedDate": "2020-07-19T20:13:18Z", "type": "commit"}, {"oid": "8d27cc318bf43f258e51d0f44354975cfc754310", "url": "https://github.com/apache/ignite/commit/8d27cc318bf43f258e51d0f44354975cfc754310", "message": "Add OP_QUERY_CONTINUOUS", "committedDate": "2020-06-14T08:37:52Z", "type": "commit"}, {"oid": "c04a799f63de4cce0994491e49ff16883a82e03b", "url": "https://github.com/apache/ignite/commit/c04a799f63de4cce0994491e49ff16883a82e03b", "message": "Adding ContinuousQuery tests to DotNetCore proj", "committedDate": "2020-06-15T09:16:25Z", "type": "commit"}, {"oid": "9639b4682931ab86882f833a5f20c39299c5f266", "url": "https://github.com/apache/ignite/commit/9639b4682931ab86882f833a5f20c39299c5f266", "message": "Merge remote-tracking branch 'origin/master' into ignite-13148", "committedDate": "2020-06-15T11:06:58Z", "type": "commit"}, {"oid": "e1b45a6523e33a385bc8a4bb7588a546f6156070", "url": "https://github.com/apache/ignite/commit/e1b45a6523e33a385bc8a4bb7588a546f6156070", "message": "Enable TestRemovedBeforeUseLockThrowsIgniteException", "committedDate": "2020-06-15T11:46:27Z", "type": "commit"}, {"oid": "f5adfc040214906e096fbe019851b6a267c037e2", "url": "https://github.com/apache/ignite/commit/f5adfc040214906e096fbe019851b6a267c037e2", "message": "Implementing POC with binary filters", "committedDate": "2020-06-15T12:52:36Z", "type": "commit"}, {"oid": "d6d765dd6848c9f8e66ee7d86c3d8e5d40238967", "url": "https://github.com/apache/ignite/commit/d6d765dd6848c9f8e66ee7d86c3d8e5d40238967", "message": "Implementing POC with binary filters", "committedDate": "2020-06-15T12:58:49Z", "type": "commit"}, {"oid": "6797e128c778f4ee2bf4326d28745d8f2b7456de", "url": "https://github.com/apache/ignite/commit/6797e128c778f4ee2bf4326d28745d8f2b7456de", "message": "Implementing ClientCacheQueryContinuousRequest", "committedDate": "2020-06-22T11:40:35Z", "type": "commit"}, {"oid": "0cba2994817a5f8dd4b5a100b32fe940d12a459a", "url": "https://github.com/apache/ignite/commit/0cba2994817a5f8dd4b5a100b32fe940d12a459a", "message": "wip", "committedDate": "2020-06-22T11:45:00Z", "type": "commit"}, {"oid": "aa31f5622449dd6bfbb7c0f6db368ea137846f9b", "url": "https://github.com/apache/ignite/commit/aa31f5622449dd6bfbb7c0f6db368ea137846f9b", "message": "Implementing ClientCacheQueryContinuousRequest", "committedDate": "2020-06-22T11:54:46Z", "type": "commit"}, {"oid": "51535acf6c7902824d6ff2edc7795244fedc1f6e", "url": "https://github.com/apache/ignite/commit/51535acf6c7902824d6ff2edc7795244fedc1f6e", "message": "Implementing ClientCacheQueryContinuousRequest", "committedDate": "2020-06-22T12:59:32Z", "type": "commit"}, {"oid": "7643a595011bfaf4b2510dc523befdb00a9e01bb", "url": "https://github.com/apache/ignite/commit/7643a595011bfaf4b2510dc523befdb00a9e01bb", "message": "Implementing ClientCacheQueryContinuousRequest", "committedDate": "2020-06-22T13:18:21Z", "type": "commit"}, {"oid": "03d0dcb342829214bed100f45bc262ee2b330e67", "url": "https://github.com/apache/ignite/commit/03d0dcb342829214bed100f45bc262ee2b330e67", "message": "Implementing ClientCacheQueryContinuousRequest", "committedDate": "2020-06-22T15:46:55Z", "type": "commit"}, {"oid": "f96e93a3901929f86a6aceb6cd8672d7e666c45c", "url": "https://github.com/apache/ignite/commit/f96e93a3901929f86a6aceb6cd8672d7e666c45c", "message": "Add ClientCacheEntryEventNotification", "committedDate": "2020-06-22T16:36:45Z", "type": "commit"}, {"oid": "48d925a72db0fb5ddfa1aea7e14bd62570c90e5a", "url": "https://github.com/apache/ignite/commit/48d925a72db0fb5ddfa1aea7e14bd62570c90e5a", "message": "Implementing ClientCacheQueryContinuousHandle", "committedDate": "2020-06-23T06:40:33Z", "type": "commit"}, {"oid": "f536f1bedff9536f6bd48faf0357ec84f4a88a18", "url": "https://github.com/apache/ignite/commit/f536f1bedff9536f6bd48faf0357ec84f4a88a18", "message": "ClientCacheQueryContinuousHandle done", "committedDate": "2020-06-23T06:53:19Z", "type": "commit"}, {"oid": "f58f87596bd7fdd54f4ea140d7e05307cf1d5b4f", "url": "https://github.com/apache/ignite/commit/f58f87596bd7fdd54f4ea140d7e05307cf1d5b4f", "message": "Add .NET APIs", "committedDate": "2020-06-23T13:51:00Z", "type": "commit"}, {"oid": "71153c76c6785d97e0c22f07b3558b93b71fd6f8", "url": "https://github.com/apache/ignite/commit/71153c76c6785d97e0c22f07b3558b93b71fd6f8", "message": "Implementing continuous query", "committedDate": "2020-06-23T14:30:30Z", "type": "commit"}, {"oid": "757d11f2b17258b86169e052bb63a21f3cf416d4", "url": "https://github.com/apache/ignite/commit/757d11f2b17258b86169e052bb63a21f3cf416d4", "message": "Implementing continuous query", "committedDate": "2020-06-23T14:40:21Z", "type": "commit"}, {"oid": "ffa2f5214ec1273a2c16faeb680b2b754e85d9fa", "url": "https://github.com/apache/ignite/commit/ffa2f5214ec1273a2c16faeb680b2b754e85d9fa", "message": "Implementing continuous query", "committedDate": "2020-06-23T14:44:15Z", "type": "commit"}, {"oid": "8ed44970aaf6dd4cf3ebff5c3c1445a41e00d0b8", "url": "https://github.com/apache/ignite/commit/8ed44970aaf6dd4cf3ebff5c3c1445a41e00d0b8", "message": "Adding tests", "committedDate": "2020-06-23T15:21:49Z", "type": "commit"}, {"oid": "99a3921005fb89b8694a71a24eabe430f7ac0ba4", "url": "https://github.com/apache/ignite/commit/99a3921005fb89b8694a71a24eabe430f7ac0ba4", "message": "Adding tests", "committedDate": "2020-06-23T15:32:07Z", "type": "commit"}, {"oid": "f11d405c451143f68cf1fac0113735b5358fbe93", "url": "https://github.com/apache/ignite/commit/f11d405c451143f68cf1fac0113735b5358fbe93", "message": "Fix notification handling", "committedDate": "2020-06-23T15:46:37Z", "type": "commit"}, {"oid": "25395d0b701cfa500c616a20e5c6a6d78789e9e0", "url": "https://github.com/apache/ignite/commit/25395d0b701cfa500c616a20e5c6a6d78789e9e0", "message": "Add notification handler", "committedDate": "2020-06-23T15:55:50Z", "type": "commit"}, {"oid": "87b9180d8260fdae5624e3adcfb733792df8a910", "url": "https://github.com/apache/ignite/commit/87b9180d8260fdae5624e3adcfb733792df8a910", "message": "Fixing notification handling", "committedDate": "2020-06-23T16:12:06Z", "type": "commit"}, {"oid": "e90b01b3d43ca0332e4fa68e00543e09ecc8b2c4", "url": "https://github.com/apache/ignite/commit/e90b01b3d43ca0332e4fa68e00543e09ecc8b2c4", "message": "Basic test works", "committedDate": "2020-06-23T16:14:18Z", "type": "commit"}, {"oid": "41be2f08f818dc584531736f78c3ff02a35efaae", "url": "https://github.com/apache/ignite/commit/41be2f08f818dc584531736f78c3ff02a35efaae", "message": "Add tests", "committedDate": "2020-06-23T17:57:59Z", "type": "commit"}, {"oid": "922ad1779eba86be44b1007bd104d6cb7e664d16", "url": "https://github.com/apache/ignite/commit/922ad1779eba86be44b1007bd104d6cb7e664d16", "message": "Add tests", "committedDate": "2020-06-23T18:03:23Z", "type": "commit"}, {"oid": "c047b6b584f8e2e234791db75f263a27e6976530", "url": "https://github.com/apache/ignite/commit/c047b6b584f8e2e234791db75f263a27e6976530", "message": "Fix notification mode handling", "committedDate": "2020-06-23T18:09:23Z", "type": "commit"}, {"oid": "100595c2b8928f68d15ef15f038b124c14b7ac61", "url": "https://github.com/apache/ignite/commit/100595c2b8928f68d15ef15f038b124c14b7ac61", "message": "Add test placeholders", "committedDate": "2020-06-23T18:20:44Z", "type": "commit"}, {"oid": "f8bcff3f7a6948ed9cb269779412747f1ea31a1a", "url": "https://github.com/apache/ignite/commit/f8bcff3f7a6948ed9cb269779412747f1ea31a1a", "message": "wip filter", "committedDate": "2020-06-25T05:11:55Z", "type": "commit"}, {"oid": "89fdbbfe80d2066f328fb72507fe32fd2d97477b", "url": "https://github.com/apache/ignite/commit/89fdbbfe80d2066f328fb72507fe32fd2d97477b", "message": "add test placeholders", "committedDate": "2020-06-25T05:20:02Z", "type": "commit"}, {"oid": "4100f89ce4162f1468f708217aa0ad9fcc4465d4", "url": "https://github.com/apache/ignite/commit/4100f89ce4162f1468f708217aa0ad9fcc4465d4", "message": "wip filter", "committedDate": "2020-06-25T05:27:27Z", "type": "commit"}, {"oid": "9a76cc3edbecc35e703d02eeaa50133a85e49bee", "url": "https://github.com/apache/ignite/commit/9a76cc3edbecc35e703d02eeaa50133a85e49bee", "message": "wip filter", "committedDate": "2020-06-25T05:38:09Z", "type": "commit"}, {"oid": "380800a9e64a482cd924b0ab885ae97bfdaff9f9", "url": "https://github.com/apache/ignite/commit/380800a9e64a482cd924b0ab885ae97bfdaff9f9", "message": "wip filter", "committedDate": "2020-06-25T07:44:15Z", "type": "commit"}, {"oid": "7fc1714eb05d0745dde94b75f9db04fefb32ee3c", "url": "https://github.com/apache/ignite/commit/7fc1714eb05d0745dde94b75f9db04fefb32ee3c", "message": "wip filter", "committedDate": "2020-06-25T09:09:23Z", "type": "commit"}, {"oid": "d1eced0387b1418ef09d5e1c6bc8753c76c7f70a", "url": "https://github.com/apache/ignite/commit/d1eced0387b1418ef09d5e1c6bc8753c76c7f70a", "message": "add test placeholders", "committedDate": "2020-06-25T09:11:25Z", "type": "commit"}, {"oid": "73c60ee553dbb4d16cff988adf6644c8c7c4fc0c", "url": "https://github.com/apache/ignite/commit/73c60ee553dbb4d16cff988adf6644c8c7c4fc0c", "message": "Implementing filter", "committedDate": "2020-06-25T10:01:25Z", "type": "commit"}, {"oid": "c906f075e0578c77885ca914f1c71b8cba3f3fbc", "url": "https://github.com/apache/ignite/commit/c906f075e0578c77885ca914f1c71b8cba3f3fbc", "message": "Implementing filter tests", "committedDate": "2020-06-25T10:13:10Z", "type": "commit"}, {"oid": "590eee323b0bff3b1886c6a6c6218804297f7245", "url": "https://github.com/apache/ignite/commit/590eee323b0bff3b1886c6a6c6218804297f7245", "message": "Implementing filter tests", "committedDate": "2020-06-25T11:29:31Z", "type": "commit"}, {"oid": "8adac601c19bec22ded62d90712bdfde90148ee4", "url": "https://github.com/apache/ignite/commit/8adac601c19bec22ded62d90712bdfde90148ee4", "message": "Add logging", "committedDate": "2020-06-25T13:57:30Z", "type": "commit"}, {"oid": "8f474616fe1334e4499b4d1f830120fb736bab18", "url": "https://github.com/apache/ignite/commit/8f474616fe1334e4499b4d1f830120fb736bab18", "message": "Add TestInitialScanQuery", "committedDate": "2020-06-25T14:27:15Z", "type": "commit"}, {"oid": "2e5df47b72a119d3393390cf7e52cf8ae4569ac2", "url": "https://github.com/apache/ignite/commit/2e5df47b72a119d3393390cf7e52cf8ae4569ac2", "message": "Implementing initial query", "committedDate": "2020-06-25T14:39:10Z", "type": "commit"}, {"oid": "152febf09f1026980d4c94e8b8cf2589b7ad6ebe", "url": "https://github.com/apache/ignite/commit/152febf09f1026980d4c94e8b8cf2589b7ad6ebe", "message": "Implementing initial query", "committedDate": "2020-06-25T19:00:02Z", "type": "commit"}, {"oid": "466cb877032a45a8a0b6e93b656b6d29109a2953", "url": "https://github.com/apache/ignite/commit/466cb877032a45a8a0b6e93b656b6d29109a2953", "message": "Implementing initial query", "committedDate": "2020-06-25T19:05:43Z", "type": "commit"}, {"oid": "9c458587086fbd9ab7bcfae72c3f6f6f3f7b3c70", "url": "https://github.com/apache/ignite/commit/9c458587086fbd9ab7bcfae72c3f6f6f3f7b3c70", "message": "Implementing initial query", "committedDate": "2020-06-25T19:14:04Z", "type": "commit"}, {"oid": "80d47ddcfb8ad1379029455a999137854dcaa702", "url": "https://github.com/apache/ignite/commit/80d47ddcfb8ad1379029455a999137854dcaa702", "message": "wip initial qry", "committedDate": "2020-06-25T19:21:18Z", "type": "commit"}, {"oid": "956e8f689541f6ae16ad39d507bd6fd468984e3e", "url": "https://github.com/apache/ignite/commit/956e8f689541f6ae16ad39d507bd6fd468984e3e", "message": "wip initial qry", "committedDate": "2020-06-25T19:46:35Z", "type": "commit"}, {"oid": "856447dc4c5f3643b2867e7b423bf8c15b8e7179", "url": "https://github.com/apache/ignite/commit/856447dc4c5f3643b2867e7b423bf8c15b8e7179", "message": "wip initial qry", "committedDate": "2020-06-26T08:34:39Z", "type": "commit"}, {"oid": "1c3e657120c9b82ad5a7f26a700e442d0cd973c7", "url": "https://github.com/apache/ignite/commit/1c3e657120c9b82ad5a7f26a700e442d0cd973c7", "message": "wip initial qry", "committedDate": "2020-06-26T08:38:31Z", "type": "commit"}, {"oid": "578d95261310b9ccd8f4907aa6f4f80e0c07e6c4", "url": "https://github.com/apache/ignite/commit/578d95261310b9ccd8f4907aa6f4f80e0c07e6c4", "message": "wip initial qry - remove separate ID, we only need one", "committedDate": "2020-06-26T09:33:56Z", "type": "commit"}, {"oid": "50200c1975bd2e2b7ba0c915a571588af8095b4f", "url": "https://github.com/apache/ignite/commit/50200c1975bd2e2b7ba0c915a571588af8095b4f", "message": "Implementing initial query", "committedDate": "2020-06-26T09:43:59Z", "type": "commit"}, {"oid": "ae54cfb13599b48d0203159f0d3d614240c492fc", "url": "https://github.com/apache/ignite/commit/ae54cfb13599b48d0203159f0d3d614240c492fc", "message": "Implementing initial query", "committedDate": "2020-06-26T10:05:03Z", "type": "commit"}, {"oid": "bd5523d199385b7044e7526f9b1da8f6584c94e3", "url": "https://github.com/apache/ignite/commit/bd5523d199385b7044e7526f9b1da8f6584c94e3", "message": "Fix initial query cursor", "committedDate": "2020-06-26T10:13:18Z", "type": "commit"}, {"oid": "0a30c704330c90e8246633a9cb96ace7fd14843d", "url": "https://github.com/apache/ignite/commit/0a30c704330c90e8246633a9cb96ace7fd14843d", "message": "Fix initial query cursor", "committedDate": "2020-06-26T10:13:32Z", "type": "commit"}, {"oid": "6ca61004cc3013e77ee4dd9f34a32731cd0053cd", "url": "https://github.com/apache/ignite/commit/6ca61004cc3013e77ee4dd9f34a32731cd0053cd", "message": "Do not remove cont query from resources upon initial query iterator exhaustion", "committedDate": "2020-06-26T10:56:07Z", "type": "commit"}, {"oid": "623a2438667e8d07b6eed6a4372ad8f8200b312b", "url": "https://github.com/apache/ignite/commit/623a2438667e8d07b6eed6a4372ad8f8200b312b", "message": "Initial query tests work", "committedDate": "2020-06-26T12:04:59Z", "type": "commit"}, {"oid": "23f71341a8f546391ea4a08af3700e8d2455076e", "url": "https://github.com/apache/ignite/commit/23f71341a8f546391ea4a08af3700e8d2455076e", "message": "Initial query tests work", "committedDate": "2020-06-26T12:15:21Z", "type": "commit"}, {"oid": "b45e53f39c23beb1e9033e236438a4c9972e92f7", "url": "https://github.com/apache/ignite/commit/b45e53f39c23beb1e9033e236438a4c9972e92f7", "message": "Merge remote-tracking branch 'origin/master' into ignite-13148", "committedDate": "2020-06-26T12:16:37Z", "type": "commit"}, {"oid": "82ef8743a64ea1d661d35b413366b2bb39ad0b3d", "url": "https://github.com/apache/ignite/commit/82ef8743a64ea1d661d35b413366b2bb39ad0b3d", "message": "Add missing license", "committedDate": "2020-06-26T12:39:57Z", "type": "commit"}, {"oid": "c3433724c7e022f835676993b1561772e6973e93", "url": "https://github.com/apache/ignite/commit/c3433724c7e022f835676993b1561772e6973e93", "message": "Cleanup", "committedDate": "2020-06-26T12:44:19Z", "type": "commit"}, {"oid": "8f0fe3c2dac57098630b8fa096968cbcaec2f62c", "url": "https://github.com/apache/ignite/commit/8f0fe3c2dac57098630b8fa096968cbcaec2f62c", "message": "Add TestBackPressure", "committedDate": "2020-06-26T13:10:32Z", "type": "commit"}, {"oid": "d73d092246de32aff073bf697101c7954ff69236", "url": "https://github.com/apache/ignite/commit/d73d092246de32aff073bf697101c7954ff69236", "message": "cleanup", "committedDate": "2020-06-29T18:01:29Z", "type": "commit"}, {"oid": "83d6e94938f4878b5f91a5ec073dd6b0ddc6a688", "url": "https://github.com/apache/ignite/commit/83d6e94938f4878b5f91a5ec073dd6b0ddc6a688", "message": "adding tests", "committedDate": "2020-06-29T18:11:30Z", "type": "commit"}, {"oid": "20a28155b46d575a0c7e1013c1cd58cda1cf0e9b", "url": "https://github.com/apache/ignite/commit/20a28155b46d575a0c7e1013c1cd58cda1cf0e9b", "message": "Adding test placeholders", "committedDate": "2020-06-29T18:15:42Z", "type": "commit"}, {"oid": "cb0f89cdb26a98d64bfae06487dbd3b5c36f4278", "url": "https://github.com/apache/ignite/commit/cb0f89cdb26a98d64bfae06487dbd3b5c36f4278", "message": "Implementing fields initial query", "committedDate": "2020-06-29T18:50:08Z", "type": "commit"}, {"oid": "eaff5b71679b092c4147fbb49710d4c4de6ebefc", "url": "https://github.com/apache/ignite/commit/eaff5b71679b092c4147fbb49710d4c4de6ebefc", "message": "Implementing fields initial query", "committedDate": "2020-06-29T18:56:49Z", "type": "commit"}, {"oid": "a42a3a2ee5ad14d53b68b1183b464b517008a5cb", "url": "https://github.com/apache/ignite/commit/a42a3a2ee5ad14d53b68b1183b464b517008a5cb", "message": "TODOs", "committedDate": "2020-06-29T19:02:39Z", "type": "commit"}, {"oid": "d085fe7de7c4f8afc0702c88a7a90a314e0be770", "url": "https://github.com/apache/ignite/commit/d085fe7de7c4f8afc0702c88a7a90a314e0be770", "message": "wip: Return column names for fields query", "committedDate": "2020-06-29T19:09:06Z", "type": "commit"}, {"oid": "b138cea6b193b9139fca98b0a3727146249212d2", "url": "https://github.com/apache/ignite/commit/b138cea6b193b9139fca98b0a3727146249212d2", "message": "wip: Return column names for fields query", "committedDate": "2020-06-29T19:14:40Z", "type": "commit"}, {"oid": "a685148832610d4ab871c1dec1f86ad606eaaebf", "url": "https://github.com/apache/ignite/commit/a685148832610d4ab871c1dec1f86ad606eaaebf", "message": "Implementing initial fields query", "committedDate": "2020-06-29T19:38:11Z", "type": "commit"}, {"oid": "c43398d292077abf69f1e95cfb9e464a6d4b6bcb", "url": "https://github.com/apache/ignite/commit/c43398d292077abf69f1e95cfb9e464a6d4b6bcb", "message": "Implementing initial fields query", "committedDate": "2020-06-29T19:45:48Z", "type": "commit"}, {"oid": "e43c2f19d76c6c41b866e4942a9d777ec120fc98", "url": "https://github.com/apache/ignite/commit/e43c2f19d76c6c41b866e4942a9d777ec120fc98", "message": "Implementing initial fields query", "committedDate": "2020-06-29T19:46:44Z", "type": "commit"}, {"oid": "1f4288c6f9947891a6c6cd0367317fce1494ad0d", "url": "https://github.com/apache/ignite/commit/1f4288c6f9947891a6c6cd0367317fce1494ad0d", "message": "Implementing initial fields query", "committedDate": "2020-06-30T06:19:00Z", "type": "commit"}, {"oid": "b2a9b5d1281fbe9aeff44fe1a43c857ea04f8c7b", "url": "https://github.com/apache/ignite/commit/b2a9b5d1281fbe9aeff44fe1a43c857ea04f8c7b", "message": "Implementing initial fields query", "committedDate": "2020-06-30T06:46:28Z", "type": "commit"}, {"oid": "3dfbf8bc753d904402bae812b563c578be09aca1", "url": "https://github.com/apache/ignite/commit/3dfbf8bc753d904402bae812b563c578be09aca1", "message": "Implementing initial fields query", "committedDate": "2020-06-30T06:48:28Z", "type": "commit"}, {"oid": "481ddf5a44104134e8b9a86ca7fc54f59103a63a", "url": "https://github.com/apache/ignite/commit/481ddf5a44104134e8b9a86ca7fc54f59103a63a", "message": "Adding tests for SqlFields initial query", "committedDate": "2020-06-30T06:59:49Z", "type": "commit"}, {"oid": "1f10677e89c7c48addc4e6ce8ae93715bdb98378", "url": "https://github.com/apache/ignite/commit/1f10677e89c7c48addc4e6ce8ae93715bdb98378", "message": "Implementing initial fields query", "committedDate": "2020-06-30T07:44:55Z", "type": "commit"}, {"oid": "3c5bfca1aad3ea52619a02a1c51b18802446cd1e", "url": "https://github.com/apache/ignite/commit/3c5bfca1aad3ea52619a02a1c51b18802446cd1e", "message": "Adding tests for SqlFields initial query", "committedDate": "2020-06-30T07:55:13Z", "type": "commit"}, {"oid": "8d47a1ec36e4d5a2f541464733c32eafd2b279b8", "url": "https://github.com/apache/ignite/commit/8d47a1ec36e4d5a2f541464733c32eafd2b279b8", "message": "Initial SQL fields query works", "committedDate": "2020-06-30T07:57:57Z", "type": "commit"}, {"oid": "a6ce95ad118e702527e686ba2c4f5a289e2d3628", "url": "https://github.com/apache/ignite/commit/a6ce95ad118e702527e686ba2c4f5a289e2d3628", "message": "cleanup", "committedDate": "2020-06-30T08:03:29Z", "type": "commit"}, {"oid": "bda8973762542e45868e0fdfbf1e0721c97390a2", "url": "https://github.com/apache/ignite/commit/bda8973762542e45868e0fdfbf1e0721c97390a2", "message": "cleanup", "committedDate": "2020-06-30T10:16:03Z", "type": "commit"}, {"oid": "3e0cc58f202cd08934b63f3fbd67541e01f768f2", "url": "https://github.com/apache/ignite/commit/3e0cc58f202cd08934b63f3fbd67541e01f768f2", "message": "cleanup - initial queries", "committedDate": "2020-06-30T11:07:24Z", "type": "commit"}, {"oid": "82a16d0b794ab51d2ff1612696a6887b61ce0898", "url": "https://github.com/apache/ignite/commit/82a16d0b794ab51d2ff1612696a6887b61ce0898", "message": "Request format cleanup", "committedDate": "2020-06-30T11:19:31Z", "type": "commit"}, {"oid": "64cfc72645df9d67ef879d9d003703c0bb9043ef", "url": "https://github.com/apache/ignite/commit/64cfc72645df9d67ef879d9d003703c0bb9043ef", "message": "Merge remote-tracking branch 'origin/master' into ignite-13148", "committedDate": "2020-06-30T11:36:31Z", "type": "commit"}, {"oid": "461c412da83394ca3552bf272051e7a81b3a93b1", "url": "https://github.com/apache/ignite/commit/461c412da83394ca3552bf272051e7a81b3a93b1", "message": "Add TestContinuousQueryWithInitialQueryDoesNotMissCacheUpdates", "committedDate": "2020-06-30T14:03:11Z", "type": "commit"}, {"oid": "40d983ce0ba2ec4d2086601301d8ac19aff97648", "url": "https://github.com/apache/ignite/commit/40d983ce0ba2ec4d2086601301d8ac19aff97648", "message": "adding tests", "committedDate": "2020-06-30T14:04:46Z", "type": "commit"}, {"oid": "a931497187628334603c0817fd3b58698707d3ef", "url": "https://github.com/apache/ignite/commit/a931497187628334603c0817fd3b58698707d3ef", "message": "adding tests", "committedDate": "2020-06-30T14:22:03Z", "type": "commit"}, {"oid": "f0d58f636a7233eb596bf09f13e1d444f6389938", "url": "https://github.com/apache/ignite/commit/f0d58f636a7233eb596bf09f13e1d444f6389938", "message": "Fix TestContinuousQueryWithInitialQueryDoesNotMissCacheUpdates", "committedDate": "2020-06-30T14:43:27Z", "type": "commit"}, {"oid": "084d46261e6a1686135381550b53caf17970d4d8", "url": "https://github.com/apache/ignite/commit/084d46261e6a1686135381550b53caf17970d4d8", "message": "add TestDisconnectCausesExceptionInContinuousQueryListener", "committedDate": "2020-06-30T15:57:27Z", "type": "commit"}, {"oid": "3187b9b6d53785101640f1de8f06c1c6a78bbeab", "url": "https://github.com/apache/ignite/commit/3187b9b6d53785101640f1de8f06c1c6a78bbeab", "message": "TODOs", "committedDate": "2020-06-30T16:11:47Z", "type": "commit"}, {"oid": "dd9de768081c4ea3491a6fc32d044bad573068c6", "url": "https://github.com/apache/ignite/commit/dd9de768081c4ea3491a6fc32d044bad573068c6", "message": "cleanup", "committedDate": "2020-06-30T16:13:00Z", "type": "commit"}, {"oid": "82eed15326d690d41393542c8cfb2d5bbab6ecf5", "url": "https://github.com/apache/ignite/commit/82eed15326d690d41393542c8cfb2d5bbab6ecf5", "message": "Ensure that listener does not become null", "committedDate": "2020-06-30T16:15:28Z", "type": "commit"}, {"oid": "bb82093dd55de790ffdaf4a04dd10b8f626cba6a", "url": "https://github.com/apache/ignite/commit/bb82093dd55de790ffdaf4a04dd10b8f626cba6a", "message": "TODOs", "committedDate": "2020-06-30T16:33:54Z", "type": "commit"}, {"oid": "8f6adabbf6a5fb93005d4ae6d5a183820fd704bf", "url": "https://github.com/apache/ignite/commit/8f6adabbf6a5fb93005d4ae6d5a183820fd704bf", "message": "Merge remote-tracking branch 'origin/master' into ignite-13148", "committedDate": "2020-06-30T21:05:51Z", "type": "commit"}, {"oid": "bc2d0964763ce4045c65eb19eebac3796905f11f", "url": "https://github.com/apache/ignite/commit/bc2d0964763ce4045c65eb19eebac3796905f11f", "message": "Implementing failure handling", "committedDate": "2020-07-01T17:58:05Z", "type": "commit"}, {"oid": "2d19ef4af7658314c017732d61ab5ada9306edf3", "url": "https://github.com/apache/ignite/commit/2d19ef4af7658314c017732d61ab5ada9306edf3", "message": "Dispose query handle on socket failure", "committedDate": "2020-07-01T18:23:39Z", "type": "commit"}, {"oid": "54ee8db34eaaf264e38b805090f5917fda0c4bb7", "url": "https://github.com/apache/ignite/commit/54ee8db34eaaf264e38b805090f5917fda0c4bb7", "message": "Dispose query handle on socket failure", "committedDate": "2020-07-01T18:27:22Z", "type": "commit"}, {"oid": "32f5ee4b3bbbae4acb7f2fd5eaec41761824154e", "url": "https://github.com/apache/ignite/commit/32f5ee4b3bbbae4acb7f2fd5eaec41761824154e", "message": "Add separate classes for Thin cont query APIs, do not reuse thick", "committedDate": "2020-07-01T19:56:36Z", "type": "commit"}, {"oid": "4e3aa921e2d3af61cdd95555236c700e1ada99f7", "url": "https://github.com/apache/ignite/commit/4e3aa921e2d3af61cdd95555236c700e1ada99f7", "message": "Add separate classes for Thin cont query APIs, do not reuse thick", "committedDate": "2020-07-01T19:59:08Z", "type": "commit"}, {"oid": "b5948d5c7bfd7381d0c51be647ed97accfb60c67", "url": "https://github.com/apache/ignite/commit/b5948d5c7bfd7381d0c51be647ed97accfb60c67", "message": "Add separate classes for Thin cont query APIs, do not reuse thick", "committedDate": "2020-07-01T20:01:24Z", "type": "commit"}]}