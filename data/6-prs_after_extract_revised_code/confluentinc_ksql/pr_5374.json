{"pr_number": 5374, "pr_title": "feat: expose JMX metric that classifies an error state", "pr_createdAt": "2020-05-15T18:05:00Z", "pr_url": "https://github.com/confluentinc/ksql/pull/5374", "timeline": [{"oid": "e49463697330a757784193ebc871aa10e080e1ba", "url": "https://github.com/confluentinc/ksql/commit/e49463697330a757784193ebc871aa10e080e1ba", "message": "feat: expose QueryError with more detailed information", "committedDate": "2020-05-15T21:31:07Z", "type": "forcePushed"}, {"oid": "f5b48daee8bc26f4d67a81968870b65819f8aa37", "url": "https://github.com/confluentinc/ksql/commit/f5b48daee8bc26f4d67a81968870b65819f8aa37", "message": "feat: expose QueryError with more detailed information", "committedDate": "2020-05-18T16:42:58Z", "type": "forcePushed"}, {"oid": "3cfff4b631356caeb279b88567c8aab71a93d332", "url": "https://github.com/confluentinc/ksql/commit/3cfff4b631356caeb279b88567c8aab71a93d332", "message": "feat: expose QueryError with more detailed information", "committedDate": "2020-05-18T18:31:24Z", "type": "commit"}, {"oid": "3cfff4b631356caeb279b88567c8aab71a93d332", "url": "https://github.com/confluentinc/ksql/commit/3cfff4b631356caeb279b88567c8aab71a93d332", "message": "feat: expose QueryError with more detailed information", "committedDate": "2020-05-18T18:31:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg1MDM2Ng==", "url": "https://github.com/confluentinc/ksql/pull/5374#discussion_r426850366", "bodyText": "this is currently not used right?", "author": "rodesai", "createdAt": "2020-05-18T19:35:09Z", "path": "ksqldb-common/src/main/java/io/confluent/ksql/query/QueryErrorClassifier.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"; you may not use\n+ * this file except in compliance with the License. You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.query;\n+\n+import io.confluent.ksql.query.QueryError.Type;\n+\n+public interface QueryErrorClassifier {\n+\n+  QueryErrorClassifier DEFAULT_CLASSIFIER = e -> Type.UNKNOWN;\n+\n+  /**\n+   * Classifies this error with a specific type\n+   *\n+   * @param e the error\n+   * @return the classification\n+   */\n+  Type classify(Throwable e);\n+\n+  /**\n+   * Chains two classifiers so that:\n+   * <ol>\n+   *   <li>If they classify the error in the same way, return that classification</li>\n+   *   <li>If they classify the error differently and exactly one is classified as\n+   *       {@link Type#UNKNOWN}, return the other classification.</li>\n+   *   <li>If they classify the error differently and neither is classified as\n+   *       {@link Type#UNKNOWN}, return {@link Type#UNKNOWN}</li>\n+   * </ol>\n+   *\n+   * @param other the other classifier to chain\n+   * @return a {@code QueryErrorClassifier} that chains both\n+   */\n+  default QueryErrorClassifier and(QueryErrorClassifier other) {", "originalCommit": "3cfff4b631356caeb279b88567c8aab71a93d332", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg2MTc4MQ==", "url": "https://github.com/confluentinc/ksql/pull/5374#discussion_r426861781", "bodyText": "yeah it's not used yet - I'm planning on introducing a regex classifier so that you can chain them (e.g. use MissingTopic.and(SomeRegexClassifier).and(AnotherRegexClassifier)) this isn't really a boolean \"and\" but rather a \"andThen\" - I can rename it", "author": "agavra", "createdAt": "2020-05-18T19:58:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg1MDM2Ng=="}], "type": "inlineReview", "revised_code": null}, {"oid": "45bc26839dc56b579fbcbe8017d9c636a55aab1c", "url": "https://github.com/confluentinc/ksql/commit/45bc26839dc56b579fbcbe8017d9c636a55aab1c", "message": "chore: fix properties file", "committedDate": "2020-05-18T20:10:36Z", "type": "commit"}]}