{"pr_number": 4459, "pr_title": "feat: remove WindowStart() and WindowEnd() UDAFs", "pr_createdAt": "2020-02-06T16:55:15Z", "pr_url": "https://github.com/confluentinc/ksql/pull/4459", "timeline": [{"oid": "9255863948e88bb8e3791c7660e575a494f243c9", "url": "https://github.com/confluentinc/ksql/commit/9255863948e88bb8e3791c7660e575a494f243c9", "message": "feat: remove WindowStart() and WindowEnd() UDAFs\n\nThese two UDAFs were introduced to allow access to the start and end times of the window in a windowed source. `WINDOWSTART` and `WINDOWEND` are now accessible as columns to be used in the SELECT of a query, (outside of UDAFs).  This makes the two UDAFs redundant.\n\nBREAKING CHANGE: The `WindowStart()` and `WindowEnd()` UDAFs have been removed from KSQL. Use the `WindowStart` and `WindowEnd` system columns to access the window bounds within the SELECT expression instead.", "committedDate": "2020-02-06T16:49:11Z", "type": "commit"}, {"oid": "f8154f52baa28958014eccd10909d4f3cc7f18a8", "url": "https://github.com/confluentinc/ksql/commit/f8154f52baa28958014eccd10909d4f3cc7f18a8", "message": "chore: update docs", "committedDate": "2020-02-06T17:40:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0MzU5MQ==", "url": "https://github.com/confluentinc/ksql/pull/4459#discussion_r376143591", "bodyText": "double checking - is there a problem with aggregating on window bounds of the source? e.g. I'm consuming from a windowed stream and performing an aggregation: SELECT COUNT_DISTINCT(source.WINDOW_START) FROM source", "author": "agavra", "createdAt": "2020-02-06T23:40:09Z", "path": "ksql-engine/src/main/java/io/confluent/ksql/planner/plan/AggregateNode.java", "diffHunk": "@@ -404,9 +391,15 @@ private ResolveToInternalRewriter() {\n         }\n \n         final boolean isAggregate = node.getReference().isAggregate();\n+        final boolean windowBounds = SchemaUtil.isWindowBound(node.getReference());", "originalCommit": "f8154f52baa28958014eccd10909d4f3cc7f18a8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjMxOTQ3NA==", "url": "https://github.com/confluentinc/ksql/pull/4459#discussion_r376319474", "bodyText": "Yes there is a problem. It's not currently possible.  See #4397 for details.", "author": "big-andy-coates", "createdAt": "2020-02-07T10:27:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0MzU5MQ=="}], "type": "inlineReview", "revised_code": null}]}