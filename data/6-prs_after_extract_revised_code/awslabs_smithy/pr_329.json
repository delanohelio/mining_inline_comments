{"pr_number": 329, "pr_title": "Adds security to individual operations", "pr_createdAt": "2020-03-27T02:36:14Z", "pr_url": "https://github.com/awslabs/smithy/pull/329", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTM5NTAxNg==", "url": "https://github.com/awslabs/smithy/pull/329#discussion_r399395016", "bodyText": "s/only auth security/only add security", "author": "kstich", "createdAt": "2020-03-27T16:37:18Z", "path": "smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddAuthorizers.java", "diffHunk": "@@ -79,6 +83,25 @@\n                 .orElse(requirement);\n     }\n \n+    @Override\n+    public OperationObject updateOperation(Context context, OperationShape shape, OperationObject operation) {\n+        ServiceShape service = context.getService();\n+        AuthorizerIndex authorizerIndex = context.getModel().getKnowledge(AuthorizerIndex.class);\n+\n+        // Get the resolved security schemes of the service and operation, and\n+        // only auth security if it's different than the service.", "originalCommit": "f434db76a841c062bea1d96985d159c8f7b0f2ed", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "767167bbf9806d32607f15abc74ecd0c2e3c3212", "chunk": "diff --git a/smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddAuthorizers.java b/smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddAuthorizers.java\nindex b4c2884d0..021fc7f8d 100644\n--- a/smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddAuthorizers.java\n+++ b/smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddAuthorizers.java\n\n@@ -89,7 +89,7 @@ final class AddAuthorizers implements OpenApiMapper {\n         AuthorizerIndex authorizerIndex = context.getModel().getKnowledge(AuthorizerIndex.class);\n \n         // Get the resolved security schemes of the service and operation, and\n-        // only auth security if it's different than the service.\n+        // only add security if it's different than the service.\n         String serviceAuth = authorizerIndex.getAuthorizer(service).orElse(null);\n         String operationAuth = authorizerIndex.getAuthorizer(service, shape).orElse(null);\n \n"}}, {"oid": "767167bbf9806d32607f15abc74ecd0c2e3c3212", "url": "https://github.com/awslabs/smithy/commit/767167bbf9806d32607f15abc74ecd0c2e3c3212", "message": "Adds security to individual operations\n\nWe previously weren't adding security to individual operations if the\noperation differend from the security of the operation differed from the\nservice because of an applied authorizer trait.", "committedDate": "2020-03-27T16:48:02Z", "type": "commit"}, {"oid": "767167bbf9806d32607f15abc74ecd0c2e3c3212", "url": "https://github.com/awslabs/smithy/commit/767167bbf9806d32607f15abc74ecd0c2e3c3212", "message": "Adds security to individual operations\n\nWe previously weren't adding security to individual operations if the\noperation differend from the security of the operation differed from the\nservice because of an applied authorizer trait.", "committedDate": "2020-03-27T16:48:02Z", "type": "forcePushed"}]}