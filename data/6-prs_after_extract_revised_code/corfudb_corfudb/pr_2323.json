{"pr_number": 2323, "pr_title": "Mask TrimmedException in CorfuCompileProxy", "pr_createdAt": "2020-01-23T21:31:47Z", "pr_url": "https://github.com/CorfuDB/CorfuDB/pull/2323", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM4MjIzMQ==", "url": "https://github.com/CorfuDB/CorfuDB/pull/2323#discussion_r370382231", "bodyText": "accessInner -> getUpcallResultInner, this seems to be incorrectly copy-pasted.", "author": "WenbinZhu", "createdAt": "2020-01-23T22:11:15Z", "path": "runtime/src/main/java/org/corfudb/runtime/object/CorfuCompileProxy.java", "diffHunk": "@@ -296,8 +296,8 @@ private long logUpdateInner(String smrUpdateFunction, final boolean keepUpcallRe\n                             + \" and we don't have a copy\");\n                 });\n             } catch (TrimmedException ex) {\n-                log.warn(\"getUpcallResultInner: Encountered a trim exception while accessing version {} on attempt {}\",\n-                        timestamp, x);\n+                log.info(\"accessInner: Encountered trimmed address space \" +", "originalCommit": "98f5a5d876872f09f30fb264d9d3dabf8e64213e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQwMjg0Mg==", "url": "https://github.com/CorfuDB/CorfuDB/pull/2323#discussion_r370402842", "bodyText": "Good catch. Fixed.", "author": "vjeko", "createdAt": "2020-01-23T23:08:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM4MjIzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "3dd1265499729331b8011ca4687d2a73c5d761ca", "chunk": "diff --git a/runtime/src/main/java/org/corfudb/runtime/object/CorfuCompileProxy.java b/runtime/src/main/java/org/corfudb/runtime/object/CorfuCompileProxy.java\nindex 2b88e9e817a..91f0b8029ef 100644\n--- a/runtime/src/main/java/org/corfudb/runtime/object/CorfuCompileProxy.java\n+++ b/runtime/src/main/java/org/corfudb/runtime/object/CorfuCompileProxy.java\n\n@@ -296,7 +296,7 @@ public class CorfuCompileProxy<T extends ICorfuSMR<T>> implements ICorfuSMRProxy\n                             + \" and we don't have a copy\");\n                 });\n             } catch (TrimmedException ex) {\n-                log.info(\"accessInner: Encountered trimmed address space \" +\n+                log.info(\"getUpcallResultInner: Encountered trimmed address space \" +\n                         \"while accessing version {} on attempt {}\", timestamp, x);\n                 // We encountered a TRIM during sync, reset the object\n                 underlyingObject.update(o -> {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM4MjQ2Mg==", "url": "https://github.com/CorfuDB/CorfuDB/pull/2323#discussion_r370382462", "bodyText": "Please fix typo.", "author": "WenbinZhu", "createdAt": "2020-01-23T22:11:48Z", "path": "runtime/src/main/java/org/corfudb/runtime/object/StreamViewSMRAdapter.java", "diffHunk": "@@ -172,7 +172,7 @@ public void seek(long globalAddress) {\n      *                              writing.\n      * @return The (global) address the object was written at.\n      */\n-    public long append(SMREntry entry,\n+    public long a Dixon Ly ppend(SMREntry entry,", "originalCommit": "98f5a5d876872f09f30fb264d9d3dabf8e64213e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQwMjg3Ng==", "url": "https://github.com/CorfuDB/CorfuDB/pull/2323#discussion_r370402876", "bodyText": "Fixed.", "author": "vjeko", "createdAt": "2020-01-23T23:08:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM4MjQ2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "3dd1265499729331b8011ca4687d2a73c5d761ca", "chunk": "diff --git a/runtime/src/main/java/org/corfudb/runtime/object/StreamViewSMRAdapter.java b/runtime/src/main/java/org/corfudb/runtime/object/StreamViewSMRAdapter.java\nindex 4333458ff7f..17ea1040078 100644\n--- a/runtime/src/main/java/org/corfudb/runtime/object/StreamViewSMRAdapter.java\n+++ b/runtime/src/main/java/org/corfudb/runtime/object/StreamViewSMRAdapter.java\n\n@@ -172,7 +172,7 @@ public class StreamViewSMRAdapter implements ISMRStream {\n      *                              writing.\n      * @return The (global) address the object was written at.\n      */\n-    public long a Dixon Ly ppend(SMREntry entry,\n+    public long append(SMREntry entry,\n                        Function<TokenResponse, Boolean> acquisitionCallback,\n                        Function<TokenResponse, Boolean> deacquisitionCallback) {\n         return streamView.append(entry, acquisitionCallback, deacquisitionCallback);\n"}}, {"oid": "3dd1265499729331b8011ca4687d2a73c5d761ca", "url": "https://github.com/CorfuDB/CorfuDB/commit/3dd1265499729331b8011ca4687d2a73c5d761ca", "message": "Mask TrimmedException in CorfuCompileProxy\n\nEncountering a TrimmedException in CorfuCompileProxy is part of a normal\nworkflow. The current message causes a lot of confusion during\nroot-cause analysis, since developers incorrectly assume that Corfu\nended up in an exceptional state.", "committedDate": "2020-01-23T23:08:16Z", "type": "commit"}, {"oid": "3dd1265499729331b8011ca4687d2a73c5d761ca", "url": "https://github.com/CorfuDB/CorfuDB/commit/3dd1265499729331b8011ca4687d2a73c5d761ca", "message": "Mask TrimmedException in CorfuCompileProxy\n\nEncountering a TrimmedException in CorfuCompileProxy is part of a normal\nworkflow. The current message causes a lot of confusion during\nroot-cause analysis, since developers incorrectly assume that Corfu\nended up in an exceptional state.", "committedDate": "2020-01-23T23:08:16Z", "type": "forcePushed"}]}