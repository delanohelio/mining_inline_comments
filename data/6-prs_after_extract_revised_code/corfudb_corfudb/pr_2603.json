{"pr_number": 2603, "pr_title": "Handle the case where Version Table is empty.", "pr_createdAt": "2020-07-07T23:08:41Z", "pr_url": "https://github.com/CorfuDB/CorfuDB/pull/2603", "timeline": [{"oid": "0e58dd9fb4f86e48e8c44abe82648db1b4adb36f", "url": "https://github.com/CorfuDB/CorfuDB/commit/0e58dd9fb4f86e48e8c44abe82648db1b4adb36f", "message": "Handle the case where Version Table is empty.", "committedDate": "2020-07-07T23:05:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc0MDU5NQ==", "url": "https://github.com/CorfuDB/CorfuDB/pull/2603#discussion_r451740595", "bodyText": "Add a log message for this case.", "author": "xiaoqin2012", "createdAt": "2020-07-08T18:21:17Z", "path": "infrastructure/src/main/java/org/corfudb/infrastructure/logreplication/utils/LogReplicationStreamNameTableManager.java", "diffHunk": "@@ -124,8 +124,14 @@ private boolean tableVersionMatchesPlugin() {\n         corfuStore.openTable(CORFU_SYSTEM_NAMESPACE, LOG_REPLICATION_PLUGIN_VERSION_TABLE);\n         LogReplicationStreams.VersionString versionString = LogReplicationStreams.VersionString.newBuilder().setName(\"VERSION\").build();\n         Query q = corfuStore.query(CORFU_SYSTEM_NAMESPACE);\n+\n+        // If the version table is dropped using the CorfuStoreBrowser(UFO) for testing, it will be empty.\n+        // In this case, it should be re-created\n+        if (q.getRecord(LOG_REPLICATION_PLUGIN_VERSION_TABLE, versionString) == null) {\n+            return false;", "originalCommit": "0e58dd9fb4f86e48e8c44abe82648db1b4adb36f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}