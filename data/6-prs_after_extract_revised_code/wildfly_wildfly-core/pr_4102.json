{"pr_number": 4102, "pr_title": "[WFCORE-4874] Turn pre-computed annotation index loading error into a\u2026", "pr_createdAt": "2020-03-19T15:01:24Z", "pr_url": "https://github.com/wildfly/wildfly-core/pull/4102", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUxOTQxNg==", "url": "https://github.com/wildfly/wildfly-core/pull/4102#discussion_r395519416", "bodyText": "Should it be e.getMessage()?", "author": "jmesnil", "createdAt": "2020-03-20T09:27:42Z", "path": "server/src/main/java/org/jboss/as/server/deployment/annotation/ResourceRootIndexer.java", "diffHunk": "@@ -62,7 +62,7 @@ public static void indexResourceRoot(final ResourceRoot resourceRoot) throws Dep\n                 ServerLogger.DEPLOYMENT_LOGGER.tracef(\"Found and read index at: %s\", indexFile);\n                 return;\n             } catch (Exception e) {\n-                ServerLogger.DEPLOYMENT_LOGGER.cannotLoadAnnotationIndex(indexFile.getPathName());\n+                ServerLogger.DEPLOYMENT_LOGGER.cannotLoadAnnotationIndex(indexFile.getPathName(), e.toString());", "originalCommit": "d929a1fd69c66fc716ef1201a02786e36e9714b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyMDY4NA==", "url": "https://github.com/wildfly/wildfly-core/pull/4102#discussion_r395520684", "bodyText": "The e.toString() is more complete. We could have the exception without any message text. The  e.toString()` shows the exception message, if it exists, plus the exception class name.", "author": "yersan", "createdAt": "2020-03-20T09:30:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUxOTQxNg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU4OTcwNg==", "url": "https://github.com/wildfly/wildfly-core/pull/4102#discussion_r395589706", "bodyText": "thanks for the explanation. In that case, this string should be more generic like Loading failed for the annotation index \\\"%s\\\" with the following exception: %s", "author": "jmesnil", "createdAt": "2020-03-20T11:57:46Z", "path": "server/src/main/java/org/jboss/as/server/logging/ServerLogger.java", "diffHunk": "@@ -140,9 +140,9 @@\n      * Message for when a pre-computed annotation index cannot be loaded\n      * @param index name of the annotation index\n      */\n-    @LogMessage(level = ERROR)\n-    @Message(id = 2, value = \"Could not read provided index: %s\")\n-    void cannotLoadAnnotationIndex(String index);\n+    @LogMessage(level = WARN)\n+    @Message(id = 2, value = \"Loading failed for the annotation index \\\"%s\\\" with the following failure message: %s\")", "originalCommit": "d929a1fd69c66fc716ef1201a02786e36e9714b7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "59b076c5d462fcc9cd9e2fff9d48bb613786f2e9", "chunk": "diff --git a/server/src/main/java/org/jboss/as/server/logging/ServerLogger.java b/server/src/main/java/org/jboss/as/server/logging/ServerLogger.java\nindex bec7d4d3df..57e56a0f6b 100644\n--- a/server/src/main/java/org/jboss/as/server/logging/ServerLogger.java\n+++ b/server/src/main/java/org/jboss/as/server/logging/ServerLogger.java\n\n@@ -141,7 +141,7 @@ public interface ServerLogger extends BasicLogger {\n      * @param index name of the annotation index\n      */\n     @LogMessage(level = WARN)\n-    @Message(id = 2, value = \"Loading failed for the annotation index \\\"%s\\\" with the following failure message: %s\")\n+    @Message(id = 2, value = \"Loading failed for the annotation index \\\"%s\\\" with the following exception: %s\")\n     void cannotLoadAnnotationIndex(String index, String message);\n \n     @LogMessage(level = WARN)\n"}}, {"oid": "59b076c5d462fcc9cd9e2fff9d48bb613786f2e9", "url": "https://github.com/wildfly/wildfly-core/commit/59b076c5d462fcc9cd9e2fff9d48bb613786f2e9", "message": "[WFCORE-4874] Turn pre-computed annotation index loading error into a warning and print related description", "committedDate": "2020-03-20T12:01:48Z", "type": "commit"}, {"oid": "59b076c5d462fcc9cd9e2fff9d48bb613786f2e9", "url": "https://github.com/wildfly/wildfly-core/commit/59b076c5d462fcc9cd9e2fff9d48bb613786f2e9", "message": "[WFCORE-4874] Turn pre-computed annotation index loading error into a warning and print related description", "committedDate": "2020-03-20T12:01:48Z", "type": "forcePushed"}]}