{"pr_number": 4271, "pr_title": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider", "pr_createdAt": "2020-07-17T22:07:50Z", "pr_url": "https://github.com/wildfly/wildfly-core/pull/4271", "timeline": [{"oid": "23ea462daae15f6efeca0c0f1bcec27c13ade04f", "url": "https://github.com/wildfly/wildfly-core/commit/23ea462daae15f6efeca0c0f1bcec27c13ade04f", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider", "committedDate": "2020-07-20T17:42:54Z", "type": "forcePushed"}, {"oid": "411be6c8d3345820e523be3217a648b9d666de73", "url": "https://github.com/wildfly/wildfly-core/commit/411be6c8d3345820e523be3217a648b9d666de73", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider", "committedDate": "2020-07-20T17:45:28Z", "type": "forcePushed"}, {"oid": "16a6936beda3b901d148f2638fbd2d658ca3ec92", "url": "https://github.com/wildfly/wildfly-core/commit/16a6936beda3b901d148f2638fbd2d658ca3ec92", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider", "committedDate": "2020-07-20T17:50:09Z", "type": "forcePushed"}, {"oid": "83d0f5db947312562e8dd1893e5b07687f2d854a", "url": "https://github.com/wildfly/wildfly-core/commit/83d0f5db947312562e8dd1893e5b07687f2d854a", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider", "committedDate": "2020-08-31T17:40:00Z", "type": "commit"}, {"oid": "83d0f5db947312562e8dd1893e5b07687f2d854a", "url": "https://github.com/wildfly/wildfly-core/commit/83d0f5db947312562e8dd1893e5b07687f2d854a", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider", "committedDate": "2020-08-31T17:40:00Z", "type": "forcePushed"}, {"oid": "12c7c835551b2e156cbe4ad88e1e2eb70f9fc441", "url": "https://github.com/wildfly/wildfly-core/commit/12c7c835551b2e156cbe4ad88e1e2eb70f9fc441", "message": "[WFCORE-4842] Verify that TLS 1.3 is disabled by default when using the WildFly OpenSSL provider", "committedDate": "2020-09-08T21:13:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk5Mzc5Mg==", "url": "https://github.com/wildfly/wildfly-core/pull/4271#discussion_r487993792", "bodyText": "@fjuma, just noticed - isn't here missing the && isOpenSSL111OrHigher() part here? There is client using TLS13 two lines down...\nOf course not - it's not OpenSSL in use. Ignore this comment :)", "author": "jstourac", "createdAt": "2020-09-14T14:51:13Z", "path": "elytron/src/test/java/org/wildfly/extension/elytron/TlsTestCase.java", "diffHunk": "@@ -345,16 +362,24 @@ public void testSslServiceAuth() throws Throwable {\n \n     @Test\n     public void testSslServiceAuthTLS13() throws Throwable {\n-        Assume.assumeTrue(\"Skipping testSslServiceAuthTLS13, test is not being run on JDK 11.\",\n-                System.getProperty(\"java.specification.version\").equals(\"11\"));\n+        Assume.assumeTrue(\"Skipping testSslServiceAuthTLS13, test is not being run on JDK 11+.\",\n+                JdkUtils.getJavaSpecVersion() >= 11);\n         testCommunication(\"ServerSslContextTLS13\", \"ClientSslContextTLS13\", false, \"OU=Elytron,O=Elytron,C=CZ,ST=Elytron,CN=localhost\",\n                 \"OU=Elytron,O=Elytron,C=UK,ST=Elytron,CN=Firefly\", \"TLS_AES_256_GCM_SHA384\", true);\n     }\n \n+    @Test\n+    public void testSslServiceAuthTLS13OpenSsl() throws Throwable {\n+        Assume.assumeTrue(\"Skipping testSslServiceAuthTLS13OpenSsl, test is not being run with JDK 11+ and OpenSSL 1.1.1+\",\n+                JdkUtils.getJavaSpecVersion() >= 11 && isOpenSSL111OrHigher());\n+        testCommunication(\"ServerSslContextTLS13OpenSsl\", \"ClientSslContextTLS13OpenSsl\", false, \"OU=Elytron,O=Elytron,C=CZ,ST=Elytron,CN=localhost\",\n+                \"OU=Elytron,O=Elytron,C=UK,ST=Elytron,CN=Firefly\", \"TLS_AES_256_GCM_SHA384\", true);\n+    }\n+\n     @Test\n     public void testSslServiceAuthProtocolMismatch() throws Throwable {\n-        Assume.assumeTrue(\"Skipping testSslServiceAuthProtocolMismatch, test is not being run on JDK 11.\",\n-                System.getProperty(\"java.specification.version\").equals(\"11\"));\n+        Assume.assumeTrue(\"Skipping testSslServiceAuthProtocolMismatch, test is not being run on JDK 11+.\",\n+                JdkUtils.getJavaSpecVersion() >= 11);", "originalCommit": "83d0f5db947312562e8dd1893e5b07687f2d854a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}