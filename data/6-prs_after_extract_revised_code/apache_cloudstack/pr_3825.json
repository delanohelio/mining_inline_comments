{"pr_number": 3825, "pr_title": "fixed inconsistency of IP on VR when VR is destroyed and recrea\u2026", "pr_createdAt": "2020-01-21T11:12:21Z", "pr_url": "https://github.com/apache/cloudstack/pull/3825", "timeline": [{"oid": "dbeb3454c7933f8ec6a57049791458f0c6255df2", "url": "https://github.com/apache/cloudstack/commit/dbeb3454c7933f8ec6a57049791458f0c6255df2", "message": "fixed inconsistency of IP on VR when VR is destroyed and recreated (shared network)", "committedDate": "2020-01-21T11:00:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA2MDgyMg==", "url": "https://github.com/apache/cloudstack/pull/3825#discussion_r369060822", "bodyText": "I don't think this comment still describves the line below. Can you clarify or remove it?", "author": "DaanHoogland", "createdAt": "2020-01-21T15:15:51Z", "path": "server/src/main/java/com/cloud/network/NetworkModelImpl.java", "diffHunk": "@@ -2299,6 +2299,9 @@ public NicVO getPlaceholderNicForRouter(Network network, Long podId) {\n                         ipv6 = _ipv6Dao.findByNetworkIdAndIp(network.getId(), nic.getIPv6Address());\n                     }\n                     //return nic only when its ip address belong to the pod range (for the Basic zone case)\n+                    if (vlans.isEmpty()) {\n+                        return nic;\n+                    }", "originalCommit": "dbeb3454c7933f8ec6a57049791458f0c6255df2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA2NDQ5Mg==", "url": "https://github.com/apache/cloudstack/pull/3825#discussion_r369064492", "bodyText": "@DaanHoogland I've moved the comment", "author": "Pearl1594", "createdAt": "2020-01-21T15:21:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA2MDgyMg=="}], "type": "inlineReview", "revised_code": {"commit": "2f395aeea9c9c43b1bd28579b96b27d5ae24c853", "chunk": "diff --git a/server/src/main/java/com/cloud/network/NetworkModelImpl.java b/server/src/main/java/com/cloud/network/NetworkModelImpl.java\nindex f47a076757..e9000e829a 100644\n--- a/server/src/main/java/com/cloud/network/NetworkModelImpl.java\n+++ b/server/src/main/java/com/cloud/network/NetworkModelImpl.java\n\n@@ -2298,10 +2298,11 @@ public class NetworkModelImpl extends ManagerBase implements NetworkModel, Confi\n                     } else {\n                         ipv6 = _ipv6Dao.findByNetworkIdAndIp(network.getId(), nic.getIPv6Address());\n                     }\n-                    //return nic only when its ip address belong to the pod range (for the Basic zone case)\n+                    \n                     if (vlans.isEmpty()) {\n                         return nic;\n                     }\n+                    //return nic only when its ip address belong to the pod range (for the Basic zone case)\n                     for (Vlan vlan : vlans) {\n                         if (ip != null && ip.getVlanId() == vlan.getId()) {\n                             return nic;\n"}}, {"oid": "2f395aeea9c9c43b1bd28579b96b27d5ae24c853", "url": "https://github.com/apache/cloudstack/commit/2f395aeea9c9c43b1bd28579b96b27d5ae24c853", "message": "Update NetworkModelImpl.java", "committedDate": "2020-01-21T15:20:17Z", "type": "commit"}, {"oid": "a3946b26fdfde505a520c6a14ad43c87c7812139", "url": "https://github.com/apache/cloudstack/commit/a3946b26fdfde505a520c6a14ad43c87c7812139", "message": "removed training spaces", "committedDate": "2020-01-22T18:28:35Z", "type": "commit"}]}