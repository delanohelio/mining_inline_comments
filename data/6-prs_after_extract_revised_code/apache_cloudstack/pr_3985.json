{"pr_number": 3985, "pr_title": " NPE fix for System VM's start Command", "pr_createdAt": "2020-03-23T17:27:10Z", "pr_url": "https://github.com/apache/cloudstack/pull/3985", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc0MDQ2NA==", "url": "https://github.com/apache/cloudstack/pull/3985#discussion_r396740464", "bodyText": "@pavanaravapalli  bootMode compared with boot type. Please check.", "author": "sureshanaparti", "createdAt": "2020-03-23T20:35:50Z", "path": "plugins/hypervisors/vmware/src/main/java/com/cloud/hypervisor/vmware/resource/VmwareResource.java", "diffHunk": "@@ -2286,7 +2286,7 @@ protected StartAnswer execute(StartCommand cmd) {\n                 }\n             }\n \n-            if (!bootMode.equalsIgnoreCase(ApiConstants.BootType.BIOS.toString())) {\n+            if (StringUtils.isNotBlank(bootMode) && !bootMode.equalsIgnoreCase(ApiConstants.BootType.BIOS.toString())) {", "originalCommit": "2a5a68cff2cdd06e568a2a6ce41637cf4309e439", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg5OTAxOQ==", "url": "https://github.com/apache/cloudstack/pull/3985#discussion_r396899019", "bodyText": "@sureshanaparti\nhere the purpose is to have bootMode initialise with default value and utilise it with uefi enabled vmprofile or normal vmprofile validation. however the constant which is used leads to confusion so i have made changes and fixed.", "author": "pavanaravapalli", "createdAt": "2020-03-24T04:41:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc0MDQ2NA=="}], "type": "inlineReview", "revised_code": {"commit": "e213cea033e8e6c32da21dc35a0486eebea50848", "chunk": "diff --git a/plugins/hypervisors/vmware/src/main/java/com/cloud/hypervisor/vmware/resource/VmwareResource.java b/plugins/hypervisors/vmware/src/main/java/com/cloud/hypervisor/vmware/resource/VmwareResource.java\nindex 756418056e..cc732f4d9d 100644\n--- a/plugins/hypervisors/vmware/src/main/java/com/cloud/hypervisor/vmware/resource/VmwareResource.java\n+++ b/plugins/hypervisors/vmware/src/main/java/com/cloud/hypervisor/vmware/resource/VmwareResource.java\n\n@@ -2286,7 +2286,7 @@ public class VmwareResource implements StoragePoolResource, ServerResource, Vmwa\n                 }\n             }\n \n-            if (StringUtils.isNotBlank(bootMode) && !bootMode.equalsIgnoreCase(ApiConstants.BootType.BIOS.toString())) {\n+            if (StringUtils.isNotBlank(bootMode) && !bootMode.equalsIgnoreCase(\"bios\")) {\n                 vmConfigSpec.setFirmware(\"efi\");\n                 if (vmSpec.getDetails().containsKey(ApiConstants.BootType.UEFI.toString()) && \"secure\".equalsIgnoreCase(vmSpec.getDetails().get(ApiConstants.BootType.UEFI.toString()))) {\n                     VirtualMachineBootOptions bootOptions = new VirtualMachineBootOptions();\n"}}, {"oid": "e213cea033e8e6c32da21dc35a0486eebea50848", "url": "https://github.com/apache/cloudstack/commit/e213cea033e8e6c32da21dc35a0486eebea50848", "message": " NPE fix for System VM's start Command", "committedDate": "2020-03-24T04:38:24Z", "type": "commit"}, {"oid": "e213cea033e8e6c32da21dc35a0486eebea50848", "url": "https://github.com/apache/cloudstack/commit/e213cea033e8e6c32da21dc35a0486eebea50848", "message": " NPE fix for System VM's start Command", "committedDate": "2020-03-24T04:38:24Z", "type": "forcePushed"}]}