{"pr_number": 4361, "pr_title": "Add vpcid in usage network response", "pr_createdAt": "2020-09-30T23:02:56Z", "pr_url": "https://github.com/apache/cloudstack/pull/4361", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA2OTg1OQ==", "url": "https://github.com/apache/cloudstack/pull/4361#discussion_r498069859", "bodyText": "Could this have side effects? You may need to check, or instead add a new method that finds VPC by ID including removed?", "author": "rhtyd", "createdAt": "2020-10-01T08:26:20Z", "path": "server/src/main/java/com/cloud/api/ApiDBUtils.java", "diffHunk": "@@ -1568,7 +1568,7 @@ public static GuestOSCategoryVO findGuestOsCategoryById(long catId) {\n     }\n \n     public static VpcVO findVpcById(long vpcId) {\n-        return s_vpcDao.findById(vpcId);\n+        return s_vpcDao.findByIdIncludingRemoved(vpcId);", "originalCommit": "6176f51491efdd2587c12907a117c53b0271a1a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA3ODg5MQ==", "url": "https://github.com/apache/cloudstack/pull/4361#discussion_r498078891", "bodyText": "Can you please tell me why this will have side effects?", "author": "ravening", "createdAt": "2020-10-01T08:40:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA2OTg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODExMDQzOA==", "url": "https://github.com/apache/cloudstack/pull/4361#discussion_r498110438", "bodyText": "@ravening it would be better to add new method in ApiDBUtils.java", "author": "weizhouapache", "createdAt": "2020-10-01T09:33:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA2OTg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzMzOTA4NA==", "url": "https://github.com/apache/cloudstack/pull/4361#discussion_r513339084", "bodyText": "ping @ravening ^^", "author": "rhtyd", "createdAt": "2020-10-28T10:36:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA2OTg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM4ODU2NQ==", "url": "https://github.com/apache/cloudstack/pull/4361#discussion_r513388565", "bodyText": "@rhtyd fixed it. added a new function", "author": "ravening", "createdAt": "2020-10-28T12:03:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA2OTg1OQ=="}], "type": "inlineReview", "revised_code": {"commit": "7fd177aae40bd91a3ed38c6966bc55e8a139846c", "chunk": "diff --git a/server/src/main/java/com/cloud/api/ApiDBUtils.java b/server/src/main/java/com/cloud/api/ApiDBUtils.java\nindex 9f5e1f22c1..87b9f36fd2 100644\n--- a/server/src/main/java/com/cloud/api/ApiDBUtils.java\n+++ b/server/src/main/java/com/cloud/api/ApiDBUtils.java\n\n@@ -1568,6 +1568,10 @@ public class ApiDBUtils {\n     }\n \n     public static VpcVO findVpcById(long vpcId) {\n+        return s_vpcDao.findById(vpcId);\n+    }\n+\n+    public static VpcVO findVpcByIdIncludingRemoved(long vpcId) {\n         return s_vpcDao.findByIdIncludingRemoved(vpcId);\n     }\n \n"}}, {"oid": "baba68e3a2916a9afe5cf256e17c47c208f3d505", "url": "https://github.com/apache/cloudstack/commit/baba68e3a2916a9afe5cf256e17c47c208f3d505", "message": "Add vpcid in usage network response\n\nCurrently vpcid is displayed in listUsageNetworks response.\nAdd the vpcid so that we can see to which vpc, the network belongs", "committedDate": "2020-10-28T11:54:37Z", "type": "commit"}, {"oid": "7fd177aae40bd91a3ed38c6966bc55e8a139846c", "url": "https://github.com/apache/cloudstack/commit/7fd177aae40bd91a3ed38c6966bc55e8a139846c", "message": "use new function to get removed", "committedDate": "2020-10-28T12:02:29Z", "type": "commit"}, {"oid": "7fd177aae40bd91a3ed38c6966bc55e8a139846c", "url": "https://github.com/apache/cloudstack/commit/7fd177aae40bd91a3ed38c6966bc55e8a139846c", "message": "use new function to get removed", "committedDate": "2020-10-28T12:02:29Z", "type": "forcePushed"}]}