{"pr_number": 4103, "pr_title": "[VMware] Enable unmanaging guest VMs", "pr_createdAt": "2020-05-27T00:42:47Z", "pr_url": "https://github.com/apache/cloudstack/pull/4103", "timeline": [{"oid": "91ab3f23eb88e9a2d0c8b2b247f187cb13ba5f76", "url": "https://github.com/apache/cloudstack/commit/91ab3f23eb88e9a2d0c8b2b247f187cb13ba5f76", "message": "Refactors and fixes", "committedDate": "2020-06-02T05:16:48Z", "type": "forcePushed"}, {"oid": "a7582d69010bc346704375b53ed7256c8b2d8567", "url": "https://github.com/apache/cloudstack/commit/a7582d69010bc346704375b53ed7256c8b2d8567", "message": "Improvements and fixes", "committedDate": "2020-06-08T12:56:41Z", "type": "forcePushed"}, {"oid": "a0c88ae02369403d17f821d436ba155cb801fd8d", "url": "https://github.com/apache/cloudstack/commit/a0c88ae02369403d17f821d436ba155cb801fd8d", "message": "Improvements and fixes", "committedDate": "2020-06-08T12:59:44Z", "type": "forcePushed"}, {"oid": "fbcdd9b11aa03b2b7220bf7b2564354cf16e5205", "url": "https://github.com/apache/cloudstack/commit/fbcdd9b11aa03b2b7220bf7b2564354cf16e5205", "message": "Fix VM and nics states after unmanaging", "committedDate": "2020-06-15T04:17:15Z", "type": "forcePushed"}, {"oid": "a709a86541db86467eb1be199a949176d908e443", "url": "https://github.com/apache/cloudstack/commit/a709a86541db86467eb1be199a949176d908e443", "message": "Enable unmanaging guest VMs", "committedDate": "2020-06-15T18:07:56Z", "type": "forcePushed"}, {"oid": "3289af44caabb43367cc0aecdc12a5041fb38f5f", "url": "https://github.com/apache/cloudstack/commit/3289af44caabb43367cc0aecdc12a5041fb38f5f", "message": "Enable unmanaging guest VMs", "committedDate": "2020-06-16T11:26:23Z", "type": "commit"}, {"oid": "57080b1a310440b887c8fe200184e728444530d3", "url": "https://github.com/apache/cloudstack/commit/57080b1a310440b887c8fe200184e728444530d3", "message": "Minor fixes", "committedDate": "2020-06-16T11:26:24Z", "type": "commit"}, {"oid": "57080b1a310440b887c8fe200184e728444530d3", "url": "https://github.com/apache/cloudstack/commit/57080b1a310440b887c8fe200184e728444530d3", "message": "Minor fixes", "committedDate": "2020-06-16T11:26:24Z", "type": "forcePushed"}, {"oid": "fac6616ff2d6e6c46f149dfe369d41625a146634", "url": "https://github.com/apache/cloudstack/commit/fac6616ff2d6e6c46f149dfe369d41625a146634", "message": "Fix stop usage event only if VM is not stopped when unmanaging", "committedDate": "2020-06-16T11:53:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwMDI4Nw==", "url": "https://github.com/apache/cloudstack/pull/4103#discussion_r440800287", "bodyText": "this should be called unmanage*d*VMsManager, it does more than just unmanage", "author": "DaanHoogland", "createdAt": "2020-06-16T12:09:24Z", "path": "api/src/main/java/org/apache/cloudstack/vm/UnmanageVMManager.java", "diffHunk": "@@ -0,0 +1,29 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+package org.apache.cloudstack.vm;\n+\n+import com.cloud.utils.component.PluggableService;\n+import org.apache.cloudstack.framework.config.ConfigKey;\n+import org.apache.cloudstack.framework.config.Configurable;\n+\n+public interface UnmanageVMManager extends VmImportService, UnmanageVMService, PluggableService, Configurable {", "originalCommit": "fac6616ff2d6e6c46f149dfe369d41625a146634", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "597b5080fead03fdd20f24be453a5e9083455ff8", "chunk": "diff --git a/api/src/main/java/org/apache/cloudstack/vm/UnmanageVMManager.java b/api/src/main/java/org/apache/cloudstack/vm/UnmanagedVMsManager.java\nsimilarity index 92%\nrename from api/src/main/java/org/apache/cloudstack/vm/UnmanageVMManager.java\nrename to api/src/main/java/org/apache/cloudstack/vm/UnmanagedVMsManager.java\nindex de0557858f..c43c1c3f9a 100644\n--- a/api/src/main/java/org/apache/cloudstack/vm/UnmanageVMManager.java\n+++ b/api/src/main/java/org/apache/cloudstack/vm/UnmanagedVMsManager.java\n\n@@ -21,7 +21,7 @@ import com.cloud.utils.component.PluggableService;\n import org.apache.cloudstack.framework.config.ConfigKey;\n import org.apache.cloudstack.framework.config.Configurable;\n \n-public interface UnmanageVMManager extends VmImportService, UnmanageVMService, PluggableService, Configurable {\n+public interface UnmanagedVMsManager extends VmImportService, UnmanageVMService, PluggableService, Configurable {\n \n     ConfigKey<Boolean> UnmanageVMPreserveNic = new ConfigKey<>(\"Advanced\", Boolean.class, \"unmanage.vm.preserve.nics\", \"false\",\n             \"If set to true, do not remove VM nics (and its MAC addresses) when unmanaging a VM, leaving them allocated but not reserved. \" +\n"}}, {"oid": "597b5080fead03fdd20f24be453a5e9083455ff8", "url": "https://github.com/apache/cloudstack/commit/597b5080fead03fdd20f24be453a5e9083455ff8", "message": "Rename unmanaged VMs manager", "committedDate": "2020-06-16T12:10:43Z", "type": "commit"}, {"oid": "1c49b1ac491a78b884c94081c8023b54e2408a3d", "url": "https://github.com/apache/cloudstack/commit/1c49b1ac491a78b884c94081c8023b54e2408a3d", "message": "Generate netofferingremove usage event if VM is not stopped", "committedDate": "2020-06-16T12:53:02Z", "type": "commit"}, {"oid": "ad672c3280162ced801cd9bf951833097379a088", "url": "https://github.com/apache/cloudstack/commit/ad672c3280162ced801cd9bf951833097379a088", "message": "Generate usage event VM snapshot primary off when unmanaging", "committedDate": "2020-06-16T14:24:41Z", "type": "commit"}]}