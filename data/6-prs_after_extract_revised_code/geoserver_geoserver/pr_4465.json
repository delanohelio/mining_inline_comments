{"pr_number": 4465, "pr_title": "[GEOS-9677] \"Edit layer\" screen should show layer source", "pr_createdAt": "2020-08-27T12:38:41Z", "pr_url": "https://github.com/geoserver/geoserver/pull/4465", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDAzMDQyNw==", "url": "https://github.com/geoserver/geoserver/pull/4465#discussion_r480030427", "bodyText": "The UI looks like this:\n\nI would use a different styling and an information icon, something like this:", "author": "nmco", "createdAt": "2020-08-31T10:15:49Z", "path": "src/web/core/src/main/java/org/geoserver/web/data/resource/BasicResourceConfig.java", "diffHunk": "@@ -54,7 +55,8 @@\n \n     public BasicResourceConfig(String id, IModel<ResourceInfo> model) {\n         super(id, model);\n-\n+        \n+        add(new Label(\"storeName\", model.getObject().getStore().getName()));", "originalCommit": "7b2bb5fcb6b5890578d418714680162e921ede63", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDAzMDgzMQ==", "url": "https://github.com/geoserver/geoserver/pull/4465#discussion_r480030831", "bodyText": "Example of an info icon is available on the edit style page:", "author": "nmco", "createdAt": "2020-08-31T10:16:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDAzMDQyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAxNDY2Ng==", "url": "https://github.com/geoserver/geoserver/pull/4465#discussion_r488014666", "bodyText": "This is how the UI looks like now.\nMy doubt is whether the em semantic tag is correct here...", "author": "alemarte", "createdAt": "2020-09-14T15:17:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDAzMDQyNw=="}], "type": "inlineReview", "revised_code": {"commit": "ac5e041a136987fcf868fcc4d81f84595229b399", "chunk": "diff --git a/src/web/core/src/main/java/org/geoserver/web/data/resource/BasicResourceConfig.java b/src/web/core/src/main/java/org/geoserver/web/data/resource/BasicResourceConfig.java\nindex b3f2c0744d..e1ca0610ba 100644\n--- a/src/web/core/src/main/java/org/geoserver/web/data/resource/BasicResourceConfig.java\n+++ b/src/web/core/src/main/java/org/geoserver/web/data/resource/BasicResourceConfig.java\n\n@@ -55,8 +55,9 @@ public class BasicResourceConfig extends ResourceConfigurationPanel {\n \n     public BasicResourceConfig(String id, IModel<ResourceInfo> model) {\n         super(id, model);\n-        \n+\n         add(new Label(\"storeName\", model.getObject().getStore().getName()));\n+        add(new Label(\"nativeName\", model.getObject().getNativeName()));\n         TextField<String> name = new TextField<String>(\"name\");\n         name.setRequired(true);\n         add(name);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDAzMTQzMw==", "url": "https://github.com/geoserver/geoserver/pull/4465#discussion_r480031433", "bodyText": "It would probably be best check to check if the label NULL before checking its content.", "author": "nmco", "createdAt": "2020-08-31T10:18:13Z", "path": "src/web/core/src/test/java/org/geoserver/web/data/resource/ResourceConfigurationPageTest.java", "diffHunk": "@@ -120,6 +120,22 @@ public void testBasic() {\n         tester.assertComponent(\n                 \"publishedinfo:tabs:panel:theList:0:content\", BasicResourceConfig.class);\n     }\n+    \n+    @Test\n+    public void testResourceConfigurationPageStoreNameLabel() {\n+    \tLayerInfo layer =\n+                getGeoServerApplication()\n+                        .getCatalog()\n+                        .getLayerByName(getLayerId(MockData.BASIC_POLYGONS));\n+        login();\n+        tester.startPage(new ResourceConfigurationPage(layer, false));\n+        \n+        tester.assertLabel(\n+        \t\t\"publishedinfo:tabs:panel:theList:0:content:storeName\", \n+        \t\tlayer.getResource().getStore().getName());\n+        assertNotNull(tester.getComponentFromLastRenderedPage(", "originalCommit": "7b2bb5fcb6b5890578d418714680162e921ede63", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAxNTcwMQ==", "url": "https://github.com/geoserver/geoserver/pull/4465#discussion_r488015701", "bodyText": "The two assertions have been switched.", "author": "alemarte", "createdAt": "2020-09-14T15:18:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDAzMTQzMw=="}], "type": "inlineReview", "revised_code": {"commit": "ac5e041a136987fcf868fcc4d81f84595229b399", "chunk": "diff --git a/src/web/core/src/test/java/org/geoserver/web/data/resource/ResourceConfigurationPageTest.java b/src/web/core/src/test/java/org/geoserver/web/data/resource/ResourceConfigurationPageTest.java\nindex 391919c5a3..e83576b5fb 100644\n--- a/src/web/core/src/test/java/org/geoserver/web/data/resource/ResourceConfigurationPageTest.java\n+++ b/src/web/core/src/test/java/org/geoserver/web/data/resource/ResourceConfigurationPageTest.java\n\n@@ -122,19 +122,22 @@ public class ResourceConfigurationPageTest extends GeoServerWicketTestSupport {\n     }\n     \n     @Test\n-    public void testResourceConfigurationPageStoreNameLabel() {\n+    public void testResourceConfigurationPageInfoLabels() {\n     \tLayerInfo layer =\n                 getGeoServerApplication()\n                         .getCatalog()\n                         .getLayerByName(getLayerId(MockData.BASIC_POLYGONS));\n         login();\n         tester.startPage(new ResourceConfigurationPage(layer, false));\n-        \n-        tester.assertLabel(\n-        \t\t\"publishedinfo:tabs:panel:theList:0:content:storeName\", \n-        \t\tlayer.getResource().getStore().getName());\n-        assertNotNull(tester.getComponentFromLastRenderedPage(\n-        \t\t\"publishedinfo:tabs:panel:theList:0:content:storeName\").getMarkup());\n+\n+        final String storeNamePath = \"publishedinfo:tabs:panel:theList:0:content:storeName\";\n+        assertNotNull(tester.getComponentFromLastRenderedPage(storeNamePath).getMarkup());\n+        tester.assertLabel(storeNamePath, layer.getResource().getStore().getName());\n+\n+        final String nativeNamePath = \"publishedinfo:tabs:panel:theList:0:content:nativeName\";\n+        assertNotNull(tester.getComponentFromLastRenderedPage(nativeNamePath).getMarkup());\n+        tester.assertLabel(nativeNamePath, layer.getResource().getNativeName());\n+\n     }\n \n     @Test\n"}}, {"oid": "ac5e041a136987fcf868fcc4d81f84595229b399", "url": "https://github.com/geoserver/geoserver/commit/ac5e041a136987fcf868fcc4d81f84595229b399", "message": "[GEOS-9677] \"Edit layer\" screen should show layer source", "committedDate": "2020-09-14T15:40:37Z", "type": "forcePushed"}, {"oid": "e17100f8a435b1cea9ab4506186b884f53bebc6f", "url": "https://github.com/geoserver/geoserver/commit/e17100f8a435b1cea9ab4506186b884f53bebc6f", "message": "[GEOS-9677] \"Edit layer\" screen should show layer source", "committedDate": "2020-09-15T11:15:32Z", "type": "forcePushed"}, {"oid": "ea998a637b0382541ad5b1d1c52207080d1053fb", "url": "https://github.com/geoserver/geoserver/commit/ea998a637b0382541ad5b1d1c52207080d1053fb", "message": "[GEOS-9677] \"Edit layer\" screen should show layer source", "committedDate": "2020-09-15T13:41:23Z", "type": "commit"}, {"oid": "ea998a637b0382541ad5b1d1c52207080d1053fb", "url": "https://github.com/geoserver/geoserver/commit/ea998a637b0382541ad5b1d1c52207080d1053fb", "message": "[GEOS-9677] \"Edit layer\" screen should show layer source", "committedDate": "2020-09-15T13:41:23Z", "type": "forcePushed"}]}