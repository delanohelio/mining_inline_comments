{"pr_number": 4188, "pr_title": "[GEOS-6888] Importer Tasks errors are not logged", "pr_createdAt": "2020-04-15T10:50:51Z", "pr_url": "https://github.com/geoserver/geoserver/pull/4188", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ0ODg0MQ==", "url": "https://github.com/geoserver/geoserver/pull/4188#discussion_r417448841", "bodyText": "Odd... are you sure it's needed? The REST machinery should be logging thrown exceptions....", "author": "aaime", "createdAt": "2020-04-29T16:28:41Z", "path": "src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportController.java", "diffHunk": "@@ -63,8 +68,12 @@ public ImportController(Importer importer) {\n                 if (t instanceof ValidationException) {\n                     throw new RestException(t.getMessage(), HttpStatus.BAD_REQUEST, t);\n                 } else {\n+                    LOGGER.log(", "originalCommit": "0342c58a64a67dc03cb4a5f6b5e3fcf6e0dca977", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "371ddbe5eacd8779d0a03a1a2e335700046269a3", "chunk": "diff --git a/src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportController.java b/src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportController.java\nindex 7cb9e70db7..04ff4d339c 100644\n--- a/src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportController.java\n+++ b/src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportController.java\n\n@@ -68,10 +69,6 @@ public class ImportController extends ImportBaseController {\n                 if (t instanceof ValidationException) {\n                     throw new RestException(t.getMessage(), HttpStatus.BAD_REQUEST, t);\n                 } else {\n-                    LOGGER.log(\n-                            Level.SEVERE,\n-                            \"Error occurred while executing import (POST) \" + t.getMessage(),\n-                            t);\n                     throw new RestException(\n                             \"Error occurred executing import\", HttpStatus.INTERNAL_SERVER_ERROR, t);\n                 }\n"}}, {"oid": "371ddbe5eacd8779d0a03a1a2e335700046269a3", "url": "https://github.com/geoserver/geoserver/commit/371ddbe5eacd8779d0a03a1a2e335700046269a3", "message": "[GEOS-6888] Importer Tasks errors are not logged", "committedDate": "2020-04-29T16:45:24Z", "type": "forcePushed"}, {"oid": "dc0975ef5a6f2e7d3dfdad8682188395e949ed80", "url": "https://github.com/geoserver/geoserver/commit/dc0975ef5a6f2e7d3dfdad8682188395e949ed80", "message": "[GEOS-6888] Importer Tasks errors are not logged", "committedDate": "2020-04-30T06:35:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc5ODg5OA==", "url": "https://github.com/geoserver/geoserver/pull/4188#discussion_r420798898", "bodyText": "Since the exception message is exactly the same, could you use a multicatch and avoid the code duplication?\nSee https://docs.oracle.com/javase/8/docs/technotes/guides/language/catch-multiple.html", "author": "aaime", "createdAt": "2020-05-06T13:40:59Z", "path": "src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportBaseController.java", "diffHunk": "@@ -98,7 +104,21 @@ ImportTransform transform(ImportTask task, Integer transformId, boolean optional\n             try {\n                 tx = (ImportTransform) task.getTransform().getTransforms().get(transformId);\n             } catch (NumberFormatException e) {\n+                LOGGER.log(", "originalCommit": "dc0975ef5a6f2e7d3dfdad8682188395e949ed80", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1134ef545b1ce019f5ccf2fcbf238c69a9d9f14a", "chunk": "diff --git a/src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportBaseController.java b/src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportBaseController.java\nindex 12ce1fb36b..88aa9a14dc 100644\n--- a/src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportBaseController.java\n+++ b/src/extension/importer/rest/src/main/java/org/geoserver/importer/rest/ImportBaseController.java\n\n@@ -103,15 +103,7 @@ public class ImportBaseController extends RestBaseController {\n         if (transformId != null) {\n             try {\n                 tx = (ImportTransform) task.getTransform().getTransforms().get(transformId);\n-            } catch (NumberFormatException e) {\n-                LOGGER.log(\n-                        Level.FINER,\n-                        \"No transform with  id \"\n-                                + transformId\n-                                + \". Exception message is \"\n-                                + e.getMessage(),\n-                        e);\n-            } catch (IndexOutOfBoundsException e) {\n+            } catch (NumberFormatException | IndexOutOfBoundsException e) {\n                 LOGGER.log(\n                         Level.FINER,\n                         \"No transform with  id \"\n"}}, {"oid": "1134ef545b1ce019f5ccf2fcbf238c69a9d9f14a", "url": "https://github.com/geoserver/geoserver/commit/1134ef545b1ce019f5ccf2fcbf238c69a9d9f14a", "message": "[GEOS-6888] Importer Tasks errors are not logged", "committedDate": "2020-05-18T13:51:20Z", "type": "commit"}, {"oid": "1134ef545b1ce019f5ccf2fcbf238c69a9d9f14a", "url": "https://github.com/geoserver/geoserver/commit/1134ef545b1ce019f5ccf2fcbf238c69a9d9f14a", "message": "[GEOS-6888] Importer Tasks errors are not logged", "committedDate": "2020-05-18T13:51:20Z", "type": "forcePushed"}]}