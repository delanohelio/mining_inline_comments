{"pr_number": 4152, "pr_title": "[GEOS-9541] LegendDecorator ignores static resource dimension [GEOS-9542] Legend image resize doesn't work properly for big legend images", "pr_createdAt": "2020-04-01T12:58:25Z", "pr_url": "https://github.com/geoserver/geoserver/pull/4152", "timeline": [{"oid": "c846941612cfd7fcda929871405d105d4deb8012", "url": "https://github.com/geoserver/geoserver/commit/c846941612cfd7fcda929871405d105d4deb8012", "message": "[GEOS-9541] LegendDecorator ignores static resource dimension", "committedDate": "2020-04-01T12:55:24Z", "type": "commit"}, {"oid": "f56ad43eac1002c0e59bf9839063344407876211", "url": "https://github.com/geoserver/geoserver/commit/f56ad43eac1002c0e59bf9839063344407876211", "message": "[GEOS-9542] Legend image resize doesn't work properly for big legend images", "committedDate": "2020-04-01T17:02:08Z", "type": "forcePushed"}, {"oid": "4ded795d72804b548062c09aa6958efd15d29957", "url": "https://github.com/geoserver/geoserver/commit/4ded795d72804b548062c09aa6958efd15d29957", "message": "[GEOS-9542] Legend image resize doesn't work properly for big legend images", "committedDate": "2020-04-01T18:01:38Z", "type": "forcePushed"}, {"oid": "ee58d480b50e51d867384f3bc91f19f3542ad66a", "url": "https://github.com/geoserver/geoserver/commit/ee58d480b50e51d867384f3bc91f19f3542ad66a", "message": "[GEOS-9542] Legend image resize doesn't work properly for big legend images", "committedDate": "2020-04-03T13:31:50Z", "type": "forcePushed"}, {"oid": "26c9da65b7905cd46900269bbaf70eba9f93d127", "url": "https://github.com/geoserver/geoserver/commit/26c9da65b7905cd46900269bbaf70eba9f93d127", "message": "[GEOS-9542] Legend image resize doesn't work properly for big legend images", "committedDate": "2020-04-03T13:51:56Z", "type": "forcePushed"}, {"oid": "5d5fa0c73b7ee06a1697702f9319d04483b6270f", "url": "https://github.com/geoserver/geoserver/commit/5d5fa0c73b7ee06a1697702f9319d04483b6270f", "message": "[GEOS-9542] Legend image resize doesn't work properly for big legend images", "committedDate": "2020-04-03T20:22:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzMDY1MQ==", "url": "https://github.com/geoserver/geoserver/pull/4152#discussion_r404130651", "bodyText": "Why is \"final\" gone here? Was expecting to see it being reassigned, but cannot find where.", "author": "aaime", "createdAt": "2020-04-06T14:22:11Z", "path": "src/wms/src/main/java/org/geoserver/wms/legendgraphic/BufferedImageLegendGraphicBuilder.java", "diffHunk": "@@ -172,7 +171,7 @@ public BufferedImage buildLegendGraphic(GetLegendGraphicRequest request)\n             } else if (buildRasterLegend) {\n                 final RasterLayerLegendHelper rasterLegendHelper =\n                         new RasterLayerLegendHelper(request, gt2Style, ruleName);\n-                final BufferedImage image = rasterLegendHelper.getLegend();\n+                BufferedImage image = rasterLegendHelper.getLegend();", "originalCommit": "5d5fa0c73b7ee06a1697702f9319d04483b6270f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDU5MzY3OQ==", "url": "https://github.com/geoserver/geoserver/pull/4152#discussion_r404593679", "bodyText": "fixed", "author": "taba90", "createdAt": "2020-04-07T07:28:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzMDY1MQ=="}], "type": "inlineReview", "revised_code": {"commit": "79fb7b3689255ccf77604560fc5bb0705b3ad809", "chunk": "diff --git a/src/wms/src/main/java/org/geoserver/wms/legendgraphic/BufferedImageLegendGraphicBuilder.java b/src/wms/src/main/java/org/geoserver/wms/legendgraphic/BufferedImageLegendGraphicBuilder.java\nindex aab65a753c..c6c67c4769 100644\n--- a/src/wms/src/main/java/org/geoserver/wms/legendgraphic/BufferedImageLegendGraphicBuilder.java\n+++ b/src/wms/src/main/java/org/geoserver/wms/legendgraphic/BufferedImageLegendGraphicBuilder.java\n\n@@ -171,7 +171,7 @@ public class BufferedImageLegendGraphicBuilder extends LegendGraphicBuilder {\n             } else if (buildRasterLegend) {\n                 final RasterLayerLegendHelper rasterLegendHelper =\n                         new RasterLayerLegendHelper(request, gt2Style, ruleName);\n-                BufferedImage image = rasterLegendHelper.getLegend();\n+                final BufferedImage image = rasterLegendHelper.getLegend();\n                 if (image != null) {\n                     if (titleImage != null) {\n                         layersImages.add(titleImage);\n"}}, {"oid": "79fb7b3689255ccf77604560fc5bb0705b3ad809", "url": "https://github.com/geoserver/geoserver/commit/79fb7b3689255ccf77604560fc5bb0705b3ad809", "message": "[GEOS-9542] Legend image resize doesn't work properly for big legend images", "committedDate": "2020-04-06T16:55:25Z", "type": "commit"}, {"oid": "79fb7b3689255ccf77604560fc5bb0705b3ad809", "url": "https://github.com/geoserver/geoserver/commit/79fb7b3689255ccf77604560fc5bb0705b3ad809", "message": "[GEOS-9542] Legend image resize doesn't work properly for big legend images", "committedDate": "2020-04-06T16:55:25Z", "type": "forcePushed"}]}