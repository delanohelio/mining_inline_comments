{"pr_number": 4734, "pr_title": "Tup-27070", "pr_createdAt": "2020-05-25T06:47:45Z", "pr_url": "https://github.com/Talend/tdi-studio-se/pull/4734", "timeline": [{"oid": "742f85e27f8ada971687463cf0f33321bafc8e0d", "url": "https://github.com/Talend/tdi-studio-se/commit/742f85e27f8ada971687463cf0f33321bafc8e0d", "message": "Tup-27070\nELT component configuration to create an UPDATE Statement", "committedDate": "2020-05-25T06:45:58Z", "type": "commit"}, {"oid": "5873f90f6358d51fdae10bb2a85dc23f4506dcd7", "url": "https://github.com/Talend/tdi-studio-se/commit/5873f90f6358d51fdae10bb2a85dc23f4506dcd7", "message": "TUP-27070 addjunit for dbgeneratio manager", "committedDate": "2020-05-26T05:49:44Z", "type": "commit"}, {"oid": "5cda743de3f8c0d927e34a1c683b850b756105ee", "url": "https://github.com/Talend/tdi-studio-se/commit/5cda743de3f8c0d927e34a1c683b850b756105ee", "message": "TUP-27070 do some fix and add junit for mssql", "committedDate": "2020-05-26T16:19:50Z", "type": "commit"}, {"oid": "3ee1efe8af81611e4144ee53ef9de3eb6211f3d4", "url": "https://github.com/Talend/tdi-studio-se/commit/3ee1efe8af81611e4144ee53ef9de3eb6211f3d4", "message": "Merge remote-tracking branch 'origin/master' into hengzhao/TUP-27070", "committedDate": "2020-05-29T07:43:27Z", "type": "commit"}, {"oid": "fec4ed80295aecfb2103087ea78a4ee558a6eb3d", "url": "https://github.com/Talend/tdi-studio-se/commit/fec4ed80295aecfb2103087ea78a4ee558a6eb3d", "message": "TUP-27070  improve some code", "committedDate": "2020-05-29T07:46:19Z", "type": "commit"}, {"oid": "263b7c7d75241ff8882a36443dc12223c083304b", "url": "https://github.com/Talend/tdi-studio-se/commit/263b7c7d75241ff8882a36443dc12223c083304b", "message": "TUP-27070 improve code", "committedDate": "2020-06-01T06:12:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY4MjM3OQ==", "url": "https://github.com/Talend/tdi-studio-se/pull/4734#discussion_r431682379", "bodyText": "not good to change the parameter like this.", "author": "hcyi", "createdAt": "2020-05-28T08:52:54Z", "path": "main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/generation/DbGenerationManager.java", "diffHunk": "@@ -771,7 +763,7 @@ public String buildSqlSelect(DbMapComponent dbMapComponent, String outputTableNa\n             boolean isFirstClause = true;\n             for (int i = 0; i < lstSizeInputTables; i++) {\n                 ExternalDbMapTable inputTable = inputTables.get(i);\n-                if (buildConditions(component, sbWhere, inputTable, false, isFirstClause, false)) {\n+                if (buildConditions(isFirstClause, component, sbWhere, inputTable, false)) {", "originalCommit": "5cda743de3f8c0d927e34a1c683b850b756105ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fec4ed80295aecfb2103087ea78a4ee558a6eb3d", "chunk": "diff --git a/main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/generation/DbGenerationManager.java b/main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/generation/DbGenerationManager.java\nindex 3631a9c74c..3241e52a9f 100644\n--- a/main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/generation/DbGenerationManager.java\n+++ b/main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/generation/DbGenerationManager.java\n\n@@ -763,7 +763,7 @@ public abstract class DbGenerationManager {\n             boolean isFirstClause = true;\n             for (int i = 0; i < lstSizeInputTables; i++) {\n                 ExternalDbMapTable inputTable = inputTables.get(i);\n-                if (buildConditions(isFirstClause, component, sbWhere, inputTable, false)) {\n+                if (buildConditions4Update(isFirstClause, component, sbWhere, inputTable, false)) {\n                     isFirstClause = false;\n                 }\n             }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY4OTQzOA==", "url": "https://github.com/Talend/tdi-studio-se/pull/4734#discussion_r431689438", "bodyText": "no need this function in this class", "author": "hcyi", "createdAt": "2020-05-28T09:04:44Z", "path": "main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/mssql/MssqlGenerationManager.java", "diffHunk": "@@ -0,0 +1,649 @@\n+// ============================================================================\n+//\n+// Copyright (C) 2006-2019 Talend Inc. - www.talend.com\n+//\n+// This source code is available under agreement available at\n+// %InstallDIR%\\features\\org.talend.rcp.branding.%PRODUCTNAME%\\%PRODUCTNAME%license.txt\n+//\n+// You should have received a copy of the agreement\n+// along with this program; if not, write to Talend SA\n+// 9 rue Pages 92150 Suresnes, France\n+//\n+// ============================================================================\n+package org.talend.designer.dbmap.language.mssql;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.commons.lang.StringUtils;\n+import org.talend.core.model.metadata.IMetadataColumn;\n+import org.talend.core.model.metadata.IMetadataTable;\n+import org.talend.core.model.process.IConnection;\n+import org.talend.core.model.process.IElementParameter;\n+import org.talend.core.utils.TalendQuoteUtils;\n+import org.talend.designer.dbmap.DbMapComponent;\n+import org.talend.designer.dbmap.external.data.ExternalDbMapData;\n+import org.talend.designer.dbmap.external.data.ExternalDbMapEntry;\n+import org.talend.designer.dbmap.external.data.ExternalDbMapTable;\n+import org.talend.designer.dbmap.i18n.Messages;\n+import org.talend.designer.dbmap.language.AbstractDbLanguage;\n+import org.talend.designer.dbmap.language.GenericDbLanguage;\n+import org.talend.designer.dbmap.language.IJoinType;\n+import org.talend.designer.dbmap.language.generation.DbGenerationManager;\n+import org.talend.designer.dbmap.language.generation.DbMapSqlConstants;\n+\n+public class MssqlGenerationManager extends DbGenerationManager {\n+\n+    public MssqlGenerationManager() {\n+        super(new GenericDbLanguage());\n+    }\n+\n+    @Override\n+    public String buildSqlSelect(DbMapComponent component, String outputTableName) {", "originalCommit": "5cda743de3f8c0d927e34a1c683b850b756105ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fec4ed80295aecfb2103087ea78a4ee558a6eb3d", "chunk": "diff --git a/main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/mssql/MssqlGenerationManager.java b/main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/mssql/MssqlGenerationManager.java\nindex be9bd8f35e..af58e0fc63 100644\n--- a/main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/mssql/MssqlGenerationManager.java\n+++ b/main/plugins/org.talend.designer.dbmap/src/main/java/org/talend/designer/dbmap/language/mssql/MssqlGenerationManager.java\n\n@@ -17,7 +17,6 @@ import java.util.HashMap;\n import java.util.List;\n import java.util.Map;\n \n-import org.apache.commons.lang.StringUtils;\n import org.talend.core.model.metadata.IMetadataColumn;\n import org.talend.core.model.metadata.IMetadataTable;\n import org.talend.core.model.process.IConnection;\n"}}]}