{"pr_number": 4724, "pr_title": "Vyu/tdi 44214 change default driver in mssql", "pr_createdAt": "2020-05-22T06:44:50Z", "pr_url": "https://github.com/Talend/tdi-studio-se/pull/4724", "timeline": [{"oid": "121d2ac75a805f5108ea23ce06d8d3c7a985d756", "url": "https://github.com/Talend/tdi-studio-se/commit/121d2ac75a805f5108ea23ce06d8d3c7a985d756", "message": "feat(TDI-44214):Change default driver to Microsoft official", "committedDate": "2020-05-21T09:16:46Z", "type": "commit"}, {"oid": "5c28377319bf050dfba79e20238cdf62caf4cb26", "url": "https://github.com/Talend/tdi-studio-se/commit/5c28377319bf050dfba79e20238cdf62caf4cb26", "message": "feat(tdi-44214):add migration task.", "committedDate": "2020-05-22T05:39:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU0MzcxNg==", "url": "https://github.com/Talend/tdi-studio-se/pull/4724#discussion_r431543716", "bodyText": "please add all components here. include tdq components.", "author": "jzhao-talend", "createdAt": "2020-05-28T02:12:58Z", "path": "main/plugins/org.talend.repository/src/main/java/org/talend/repository/model/migration/ChangeDefaultDriverForMSSqlMigrationTask.java", "diffHunk": "@@ -0,0 +1,95 @@\n+// ============================================================================\n+//\n+// Copyright (C) 2006-2019 Talend Inc. - www.talend.com\n+//\n+// This source code is available under agreement available at\n+// %InstallDIR%\\features\\org.talend.rcp.branding.%PRODUCTNAME%\\%PRODUCTNAME%license.txt\n+//\n+// You should have received a copy of the agreement\n+// along with this program; if not, write to Talend SA\n+// 9 rue Pages 92150 Suresnes, France\n+//\n+// ============================================================================\n+package org.talend.repository.model.migration;\n+\n+import java.util.Arrays;\n+import java.util.Date;\n+import java.util.GregorianCalendar;\n+\n+import org.talend.commons.exception.ExceptionHandler;\n+import org.talend.commons.exception.PersistenceException;\n+import org.talend.core.model.components.ComponentUtilities;\n+import org.talend.core.model.components.ModifyComponentsAction;\n+import org.talend.core.model.components.conversions.IComponentConversion;\n+import org.talend.core.model.components.filters.IComponentFilter;\n+import org.talend.core.model.components.filters.NameComponentFilter;\n+import org.talend.core.model.migration.AbstractAllJobMigrationTask;\n+import org.talend.core.model.properties.Item;\n+import org.talend.designer.core.model.utils.emf.talendfile.ElementParameterType;\n+import org.talend.designer.core.model.utils.emf.talendfile.NodeType;\n+import org.talend.designer.core.model.utils.emf.talendfile.ProcessType;\n+\n+/**\n+ * created by vyu on May 22, 2020 Detailled comment\n+ *\n+ */\n+public class ChangeDefaultDriverForMSSqlMigrationTask extends AbstractAllJobMigrationTask {\n+\n+    /*\n+     * (non-Javadoc)\n+     *\n+     * @see org.talend.migration.IMigrationTask#getOrder()\n+     */\n+    @Override\n+    public Date getOrder() {\n+        GregorianCalendar gc = new GregorianCalendar(2020, 4, 22, 12, 0, 0);\n+        return gc.getTime();\n+    }\n+\n+    /*\n+     * (non-Javadoc)\n+     *\n+     * @see org.talend.core.model.migration.AbstractItemMigrationTask#execute(org.talend.core.model.properties.Item)\n+     */\n+    @Override\n+    public ExecutionResult execute(Item item) {\n+        final ProcessType processType = getProcessType(item);\n+        String[] compNames = { \"tCreateTable\", \"tELTMSSqlMap\", \"tMSSqlBulkExec\", \"tMSSqlConnection\", //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$ //$NON-NLS-4$", "originalCommit": "5c28377319bf050dfba79e20238cdf62caf4cb26", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU0NTQ5NQ==", "url": "https://github.com/Talend/tdi-studio-se/pull/4724#discussion_r431545495", "bodyText": "OK, thank you", "author": "vyu-talend", "createdAt": "2020-05-28T02:20:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU0MzcxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk3OTk0Mg==", "url": "https://github.com/Talend/tdi-studio-se/pull/4724#discussion_r434979942", "bodyText": "do we need a migration task? I think it is no need. because even old default driver setting can run well", "author": "msjian", "createdAt": "2020-06-04T04:03:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU0MzcxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk4MDc5Mg==", "url": "https://github.com/Talend/tdi-studio-se/pull/4724#discussion_r434980792", "bodyText": "migration task would be safe, there are should have difference between jtds and mssql driver.", "author": "jzhao-talend", "createdAt": "2020-06-04T04:07:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU0MzcxNg=="}], "type": "inlineReview", "revised_code": {"commit": "a3a9d02f98fe6b6778494cedbfae1ad6ad2d6619", "chunk": "diff --git a/main/plugins/org.talend.repository/src/main/java/org/talend/repository/model/migration/ChangeDefaultDriverForMSSqlMigrationTask.java b/main/plugins/org.talend.repository/src/main/java/org/talend/repository/model/migration/ChangeDefaultDriverForMSSqlMigrationTask.java\nindex 6daa7f7c7e..b10d1fdc59 100644\n--- a/main/plugins/org.talend.repository/src/main/java/org/talend/repository/model/migration/ChangeDefaultDriverForMSSqlMigrationTask.java\n+++ b/main/plugins/org.talend.repository/src/main/java/org/talend/repository/model/migration/ChangeDefaultDriverForMSSqlMigrationTask.java\n\n@@ -56,7 +56,8 @@ public class ChangeDefaultDriverForMSSqlMigrationTask extends AbstractAllJobMigr\n         final ProcessType processType = getProcessType(item);\n         String[] compNames = { \"tCreateTable\", \"tELTMSSqlMap\", \"tMSSqlBulkExec\", \"tMSSqlConnection\", //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$ //$NON-NLS-4$\n         \t\t\t\t\t\t\"tMSSqlInput\", \"tMSSqlOutput\", \"tMSSqlOutputBulkExec\", \"tMSSqlRow\", //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$ //$NON-NLS-4$\n-        \t\t\t\t\t\t\"tMSSqlSCD\", \"tMSSqlSP\", \"tMSSqlCDC\"}; //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\n+        \t\t\t\t\t\t\"tMSSqlSCD\", \"tMSSqlSP\", \"tMSSqlCDC\", \"tMSSqlInvalidRows\", //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$ //$NON-NLS-4$\n+        \t\t\t\t\t\t\"tMSSqlValidRows\"}; //$NON-NLS-1$\n \n         IComponentConversion conversion = new IComponentConversion() {\n \n"}}, {"oid": "f70e0da7f9890af87a06fe0d7fae0bb4801a1c89", "url": "https://github.com/Talend/tdi-studio-se/commit/f70e0da7f9890af87a06fe0d7fae0bb4801a1c89", "message": "feat(TDI-44214):modify the plugin.xml file.", "committedDate": "2020-05-28T03:50:25Z", "type": "commit"}, {"oid": "a3a9d02f98fe6b6778494cedbfae1ad6ad2d6619", "url": "https://github.com/Talend/tdi-studio-se/commit/a3a9d02f98fe6b6778494cedbfae1ad6ad2d6619", "message": "feat(TDI-44214):add tdq components in migration task", "committedDate": "2020-05-28T04:08:25Z", "type": "commit"}, {"oid": "b2948d2aa381d5b5b9f40acb893106b3d4b20c58", "url": "https://github.com/Talend/tdi-studio-se/commit/b2948d2aa381d5b5b9f40acb893106b3d4b20c58", "message": "Merge branch 'maintenance/7.3' into vyu/TDI-44214_change_default_driver_in_mssql", "committedDate": "2020-05-28T06:36:41Z", "type": "commit"}, {"oid": "39c6bb3a88ea80544513e7a64597d207094cfc84", "url": "https://github.com/Talend/tdi-studio-se/commit/39c6bb3a88ea80544513e7a64597d207094cfc84", "message": "Merge branch 'maintenance/7.3' into vyu/TDI-44214_change_default_driver_in_mssql", "committedDate": "2020-06-01T03:51:32Z", "type": "commit"}, {"oid": "f19a5bfa16e62cedf67b0823e7fcfe6bd5928539", "url": "https://github.com/Talend/tdi-studio-se/commit/f19a5bfa16e62cedf67b0823e7fcfe6bd5928539", "message": "feat(TDI-44214):change migration task.", "committedDate": "2020-06-01T06:44:09Z", "type": "commit"}]}