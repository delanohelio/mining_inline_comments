{"pr_number": 3436, "pr_title": "Fix the scale subresource", "pr_createdAt": "2020-08-02T15:03:01Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436", "timeline": [{"oid": "657dbecd7380341a1b9da9848c1b5e00f3124641", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/657dbecd7380341a1b9da9848c1b5e00f3124641", "message": "Fix the scale subresource - Close #3432\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-08-02T14:09:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4OTM5MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436#discussion_r464089391", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Map sourceMap = new HashMap<String, String>(5);\n          \n          \n            \n                    Map sourceMap = new HashMap<String, String>(4);", "author": "samuel-hawker", "createdAt": "2020-08-02T15:14:40Z", "path": "operator-common/src/test/java/io/strimzi/operator/common/model/LabelsTest.java", "diffHunk": "@@ -99,6 +99,20 @@ public void testStrimziSelectorLabels()   {\n         assertThat(labels.strimziSelectorLabels().toMap(), is(expected));\n     }\n \n+    @Test\n+    public void testToLabelSelectorString()   {\n+        Map sourceMap = new HashMap<String, String>(5);", "originalCommit": "657dbecd7380341a1b9da9848c1b5e00f3124641", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d1ac80d574a7ee1a997932abc7f944c9011f6395", "chunk": "diff --git a/operator-common/src/test/java/io/strimzi/operator/common/model/LabelsTest.java b/operator-common/src/test/java/io/strimzi/operator/common/model/LabelsTest.java\nindex a3480f6296..940389da33 100644\n--- a/operator-common/src/test/java/io/strimzi/operator/common/model/LabelsTest.java\n+++ b/operator-common/src/test/java/io/strimzi/operator/common/model/LabelsTest.java\n\n@@ -101,7 +101,7 @@ public class LabelsTest {\n \n     @Test\n     public void testToLabelSelectorString()   {\n-        Map sourceMap = new HashMap<String, String>(5);\n+        Map sourceMap = new HashMap<String, String>(4);\n         sourceMap.put(Labels.STRIMZI_CLUSTER_LABEL, \"my-cluster\");\n         sourceMap.put(Labels.STRIMZI_KIND_LABEL, \"Kafka\");\n         sourceMap.put(Labels.STRIMZI_NAME_LABEL, \"my-cluster-kafka\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4OTU1Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436#discussion_r464089556", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return labels.keySet().stream().map(key -> key + \"=\" + labels.get(key)).collect(Collectors.joining(\",\"));\n          \n          \n            \n                    return labels.entrySet().stream().map(entry -> entry.getKey() + \"=\" + entry.getValue()).collect(Collectors.joining(\",\"));", "author": "samuel-hawker", "createdAt": "2020-08-02T15:16:00Z", "path": "operator-common/src/main/java/io/strimzi/operator/common/model/Labels.java", "diffHunk": "@@ -342,6 +342,13 @@ public Labels withStatefulSetPod(String name) {\n         return labels;\n     }\n \n+    /**\n+     * @return A string which can be used as the Kuberneter label selector (e.g. key1=value1,key2=value2).\n+     */\n+    public String toSelectorString() {\n+        return labels.keySet().stream().map(key -> key + \"=\" + labels.get(key)).collect(Collectors.joining(\",\"));", "originalCommit": "657dbecd7380341a1b9da9848c1b5e00f3124641", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d1ac80d574a7ee1a997932abc7f944c9011f6395", "chunk": "diff --git a/operator-common/src/main/java/io/strimzi/operator/common/model/Labels.java b/operator-common/src/main/java/io/strimzi/operator/common/model/Labels.java\nindex 8c22e17718..35f6662ab7 100644\n--- a/operator-common/src/main/java/io/strimzi/operator/common/model/Labels.java\n+++ b/operator-common/src/main/java/io/strimzi/operator/common/model/Labels.java\n\n@@ -346,7 +346,7 @@ public class Labels {\n      * @return A string which can be used as the Kuberneter label selector (e.g. key1=value1,key2=value2).\n      */\n     public String toSelectorString() {\n-        return labels.keySet().stream().map(key -> key + \"=\" + labels.get(key)).collect(Collectors.joining(\",\"));\n+        return labels.entrySet().stream().map(entry -> entry.getKey() + \"=\" + entry.getValue()).collect(Collectors.joining(\",\"));\n     }\n \n     /**\n"}}, {"oid": "d1ac80d574a7ee1a997932abc7f944c9011f6395", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d1ac80d574a7ee1a997932abc7f944c9011f6395", "message": "Apply suggestions from code review\r\n\r\nSigned-off-by: Jakub Scholz <www@scholzj.com>\n\nCo-authored-by: Samuel Hawker <sam.b.hawker@gmail.com>", "committedDate": "2020-08-02T15:18:10Z", "type": "commit"}]}