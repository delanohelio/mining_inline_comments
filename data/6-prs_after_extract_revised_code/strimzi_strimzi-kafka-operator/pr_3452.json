{"pr_number": 3452, "pr_title": "[systemtest] Add enums for CR statuses", "pr_createdAt": "2020-08-04T22:44:53Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3452", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU0Mzg3MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3452#discussion_r465543870", "bodyText": "Hmmm,  why did you also add the default values in the Enum? Moreover the getStatus() you do not use anywhere or am I missing something :) ?", "author": "see-quick", "createdAt": "2020-08-05T07:58:03Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.enums;\n+\n+public enum CustomResourceStatus {\n+    Ready(\"Ready\", \"True\"),\n+    NotReady(\"NotReady\", \"True\"),\n+    Warning(\"Warning\", \"True\");\n+\n+    private final String type;\n+    private final String status;\n+\n+    CustomResourceStatus(String type, String status) {\n+        this.type = type;\n+        this.status = status;\n+    }\n+\n+    public String getType() {\n+        return type;\n+    }\n+\n+    public String getStatus() {\n+        return status;\n+    }", "originalCommit": "e3f211dfaa04744b80e1a8467ea54af5232b1cbe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTY0MDI5Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3452#discussion_r465640297", "bodyText": "I'm using it in some tests/classes like here https://github.com/strimzi/strimzi-kafka-operator/pull/3452/files#diff-f26c29cb7f4ba062ae37c668164617baR82", "author": "im-konge", "createdAt": "2020-08-05T10:52:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU0Mzg3MA=="}], "type": "inlineReview", "revised_code": {"commit": "65373e4b5dc6781bcbc7cc940394302b50175051", "chunk": "diff --git a/systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java b/systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java\nindex ec4ac5bb6f..c7330b4f9d 100644\n--- a/systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java\n+++ b/systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java\n\n@@ -5,23 +5,7 @@\n package io.strimzi.systemtest.enums;\n \n public enum CustomResourceStatus {\n-    Ready(\"Ready\", \"True\"),\n-    NotReady(\"NotReady\", \"True\"),\n-    Warning(\"Warning\", \"True\");\n-\n-    private final String type;\n-    private final String status;\n-\n-    CustomResourceStatus(String type, String status) {\n-        this.type = type;\n-        this.status = status;\n-    }\n-\n-    public String getType() {\n-        return type;\n-    }\n-\n-    public String getStatus() {\n-        return status;\n-    }\n+    Ready,\n+    NotReady,\n+    Warning\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTYzMTI4Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3452#discussion_r465631282", "bodyText": "You do not really seem to pass this anywhere. You always seme to use seprately the type and status. So I wonder if it really should be two separate enums.", "author": "scholzj", "createdAt": "2020-08-05T10:34:22Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.enums;\n+\n+public enum CustomResourceStatus {", "originalCommit": "e3f211dfaa04744b80e1a8467ea54af5232b1cbe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxMzc5Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3452#discussion_r465713796", "bodyText": "So you recommend to have two enums -> CustomResourceStatus and CustomResourceStatusType? Or something like that?", "author": "im-konge", "createdAt": "2020-08-05T13:09:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTYzMTI4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxNDM0MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3452#discussion_r465714340", "bodyText": "I'm thinking if we will use the True or False CR status somewhere else \ud83d\ude04 if not, I should keep just the CR status type", "author": "im-konge", "createdAt": "2020-08-05T13:10:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTYzMTI4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxODE4Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3452#discussion_r465718183", "bodyText": "I think the value of having both in one Enum would be if you would pass CustomResourceStatus.Ready through some methods. But you seem to always do only CustomResourceStatus.Ready.getType() or CustomResourceStatus.Ready.getStatus(). So it seems not needed if you anyway treat them independently.", "author": "scholzj", "createdAt": "2020-08-05T13:16:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTYzMTI4Mg=="}], "type": "inlineReview", "revised_code": {"commit": "65373e4b5dc6781bcbc7cc940394302b50175051", "chunk": "diff --git a/systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java b/systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java\nindex ec4ac5bb6f..c7330b4f9d 100644\n--- a/systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java\n+++ b/systemtest/src/main/java/io/strimzi/systemtest/enums/CustomResourceStatus.java\n\n@@ -5,23 +5,7 @@\n package io.strimzi.systemtest.enums;\n \n public enum CustomResourceStatus {\n-    Ready(\"Ready\", \"True\"),\n-    NotReady(\"NotReady\", \"True\"),\n-    Warning(\"Warning\", \"True\");\n-\n-    private final String type;\n-    private final String status;\n-\n-    CustomResourceStatus(String type, String status) {\n-        this.type = type;\n-        this.status = status;\n-    }\n-\n-    public String getType() {\n-        return type;\n-    }\n-\n-    public String getStatus() {\n-        return status;\n-    }\n+    Ready,\n+    NotReady,\n+    Warning\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE3MDE1Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3452#discussion_r466170153", "bodyText": "Here you can use an enum type CustomResourceStatus instead of comprehensive Object", "author": "see-quick", "createdAt": "2020-08-06T06:18:32Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/ResourceManager.java", "diffHunk": "@@ -426,14 +426,14 @@ public static String getImageValueFromCO(String name) {\n      * @param status - desired status\n      * @return returns CR\n      */\n-    public static <T extends HasMetadata & HasStatus> T waitForResourceStatus(MixedOperation<T, ?, ?, ?> operation, T resource, String status, long resourceTimeout) {\n+    public static <T extends HasMetadata & HasStatus> T waitForResourceStatus(MixedOperation<T, ?, ?, ?> operation, T resource, Object status, long resourceTimeout) {", "originalCommit": "06a76c49b77412777e45e22fcd6778871b4dc40e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE3MjE0Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3452#discussion_r466172147", "bodyText": "Well not in this case, because I'm also using the enum KafkaRebalanceState for KafkaRebalance as you can see here: https://github.com/strimzi/strimzi-kafka-operator/pull/3452/files/06a76c49b77412777e45e22fcd6778871b4dc40e#diff-a308e0a56c31c930d11b603227e21b2bR81", "author": "im-konge", "createdAt": "2020-08-06T06:24:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE3MDE1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "65373e4b5dc6781bcbc7cc940394302b50175051", "chunk": "diff --git a/systemtest/src/main/java/io/strimzi/systemtest/resources/ResourceManager.java b/systemtest/src/main/java/io/strimzi/systemtest/resources/ResourceManager.java\nindex 931dd4447d..224c4e5152 100644\n--- a/systemtest/src/main/java/io/strimzi/systemtest/resources/ResourceManager.java\n+++ b/systemtest/src/main/java/io/strimzi/systemtest/resources/ResourceManager.java\n\n@@ -426,7 +426,7 @@ public class ResourceManager {\n      * @param status - desired status\n      * @return returns CR\n      */\n-    public static <T extends HasMetadata & HasStatus> T waitForResourceStatus(MixedOperation<T, ?, ?, ?> operation, T resource, Object status, long resourceTimeout) {\n+    public static <T extends HasMetadata & HasStatus> T waitForResourceStatus(MixedOperation<T, ?, ?, ?> operation, T resource, Enum<?> status, long resourceTimeout) {\n         LOGGER.info(\"Wait for {}: {} will have desired state: {}\", resource.getKind(), resource.getMetadata().getName(), status);\n \n         TestUtils.waitFor(String.format(\"Wait for %s: %s will have desired state: %s\", resource.getKind(), resource.getMetadata().getName(), status),\n"}}, {"oid": "65373e4b5dc6781bcbc7cc940394302b50175051", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/65373e4b5dc6781bcbc7cc940394302b50175051", "message": "fixup! fixup! comments\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-07T21:04:28Z", "type": "forcePushed"}, {"oid": "819964bf19a6dbb54e7bef4efb40d759de3fb259", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/819964bf19a6dbb54e7bef4efb40d759de3fb259", "message": "add enum for CR status types\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-10T06:35:53Z", "type": "commit"}, {"oid": "9871964f83bd38f68f7fafa68c9b2095020af7d8", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9871964f83bd38f68f7fafa68c9b2095020af7d8", "message": "add enums for CR statuses\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-10T06:35:53Z", "type": "commit"}, {"oid": "4341b9a35ec95fdd64d44ec9801565775bbb9f83", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4341b9a35ec95fdd64d44ec9801565775bbb9f83", "message": "comments\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-10T06:35:53Z", "type": "commit"}, {"oid": "c9e99668fbbcaa70714ba59ae2440cf0661e37c8", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c9e99668fbbcaa70714ba59ae2440cf0661e37c8", "message": "fixup! comments\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-10T06:35:53Z", "type": "commit"}, {"oid": "e5e1c732b3c75898de4521a4d5ec6ec6882df934", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e5e1c732b3c75898de4521a4d5ec6ec6882df934", "message": "comments\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-10T06:35:53Z", "type": "commit"}, {"oid": "7aed761acd963955d36b993471ac2bbaaa6da117", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7aed761acd963955d36b993471ac2bbaaa6da117", "message": "fixup! comments\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-10T06:35:53Z", "type": "commit"}, {"oid": "33f1c15393fd3bcaca21083a19a9f73ca3db18a2", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/33f1c15393fd3bcaca21083a19a9f73ca3db18a2", "message": "fixup! fixup! comments\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-10T06:35:53Z", "type": "commit"}, {"oid": "d11929ea468109cbdda707aaf7e33a08e1a9463a", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d11929ea468109cbdda707aaf7e33a08e1a9463a", "message": "some fixes\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-10T06:45:05Z", "type": "commit"}, {"oid": "d11929ea468109cbdda707aaf7e33a08e1a9463a", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d11929ea468109cbdda707aaf7e33a08e1a9463a", "message": "some fixes\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-10T06:45:05Z", "type": "forcePushed"}]}