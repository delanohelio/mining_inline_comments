{"pr_number": 2567, "pr_title": "ST: Extend current test case to catch ZK issues during scale or roliing update", "pr_createdAt": "2020-02-17T15:56:24Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567", "timeline": [{"oid": "03982f81a49bc0d435c70b7ffa37ea03049927e2", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/03982f81a49bc0d435c70b7ffa37ea03049927e2", "message": "fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-02-22T15:01:16Z", "type": "forcePushed"}, {"oid": "ea1fe2d802406ed5d2a892ca3334b36bd71e2a1f", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ea1fe2d802406ed5d2a892ca3334b36bd71e2a1f", "message": "Extend current test case to catch ZK issues with lose quorom after rolling update or scale\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-21T19:16:48Z", "type": "commit"}, {"oid": "b16c8ae4f6cac0a8e194811837bdbf34f224113d", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b16c8ae4f6cac0a8e194811837bdbf34f224113d", "message": "Minor fixes\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-21T19:18:25Z", "type": "commit"}, {"oid": "9a61fb50add8e4d36e1ea9870c500dbdd190e70a", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9a61fb50add8e4d36e1ea9870c500dbdd190e70a", "message": "fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-21T19:18:27Z", "type": "commit"}, {"oid": "f6dc0b2954b56e8cc9004805a0378d971294770d", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f6dc0b2954b56e8cc9004805a0378d971294770d", "message": "fixup! fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-21T19:18:27Z", "type": "commit"}, {"oid": "85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6", "message": "fixup! fixup! fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-21T19:43:00Z", "type": "commit"}, {"oid": "85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6", "message": "fixup! fixup! fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-21T19:43:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI1MDE1NA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567#discussion_r396250154", "bodyText": "That will bite you at some point!", "author": "tombentley", "createdAt": "2020-03-23T07:22:10Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaResource.java", "diffHunk": "@@ -124,6 +124,7 @@ private static KafkaBuilder defaultKafka(Kafka kafka, String name, int kafkaRepl\n                 .editKafka()\n                     .withVersion(Environment.ST_KAFKA_VERSION)\n                     .withReplicas(kafkaReplicas)\n+                    .addToConfig(\"log.message.format.version\", Environment.ST_KAFKA_VERSION.substring(0, 3))", "originalCommit": "85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI2NDQzOA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567#discussion_r396264438", "bodyText": "what do you suggest? Add second env variable for log.message.format or create method which will return it base don kafka version?", "author": "Frawless", "createdAt": "2020-03-23T07:58:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI1MDE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI3NTAwMQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567#discussion_r396275001", "bodyText": "Personally I would parse it properly. I think you have enough env vars in your life.", "author": "tombentley", "createdAt": "2020-03-23T08:21:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI1MDE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMzMjI0OA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567#discussion_r396332248", "bodyText": "I was looking into code and probably the best way for this is parsing the value from kafka-versions.yaml. This will need some additional changes to TestKafkaVersion so I would keep this for another PR ( I can open it afterward). Do you agree with it?", "author": "Frawless", "createdAt": "2020-03-23T10:00:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI1MDE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMzMzY1Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567#discussion_r396333652", "bodyText": "OK", "author": "tombentley", "createdAt": "2020-03-23T10:02:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI1MDE1NA=="}], "type": "inlineReview", "revised_code": null}]}