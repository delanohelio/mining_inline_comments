{"pr_number": 3361, "pr_title": "[systemtest] Change timeouts in resource classes and delete unused constants", "pr_createdAt": "2020-07-22T09:15:14Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3361", "timeline": [{"oid": "d5f77bd15deb9cf88abc69ec1d20f1af49a8ca7e", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d5f77bd15deb9cf88abc69ec1d20f1af49a8ca7e", "message": "fix logCurrentResourceStatus\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-07-22T10:15:43Z", "type": "forcePushed"}, {"oid": "445c201a27d91a250f40f4541d76057a3c37621f", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/445c201a27d91a250f40f4541d76057a3c37621f", "message": "add timeouts for forgotten methods and remove unused constants\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-07-22T13:36:30Z", "type": "commit"}, {"oid": "8e4849d3f4c31ab32672b2c35dd0cd726794bd16", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8e4849d3f4c31ab32672b2c35dd0cd726794bd16", "message": "fix logCurrentResourceStatus\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-07-22T13:36:30Z", "type": "commit"}, {"oid": "8e4849d3f4c31ab32672b2c35dd0cd726794bd16", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8e4849d3f4c31ab32672b2c35dd0cd726794bd16", "message": "fix logCurrentResourceStatus\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-07-22T13:36:30Z", "type": "forcePushed"}, {"oid": "40a47a69b6239a47e07290f8cebd62ff3f3f4da7", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/40a47a69b6239a47e07290f8cebd62ff3f3f4da7", "message": "fixup! fix logCurrentResourceStatus\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-07-22T13:41:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU1MjEzOQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3361#discussion_r459552139", "bodyText": "Why this change ? :) 2 minutes were not enough?", "author": "see-quick", "createdAt": "2020-07-23T15:50:47Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/ResourceOperation.java", "diffHunk": "@@ -42,7 +46,7 @@ public static long getTimeoutForResourceReadiness(String kind) {\n                 timeout = Duration.ofMinutes(4).toMillis();\n                 break;\n             default:\n-                timeout = Duration.ofMinutes(2).toMillis();\n+                timeout = Duration.ofMinutes(3).toMillis();", "originalCommit": "40a47a69b6239a47e07290f8cebd62ff3f3f4da7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU1NjA2Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3361#discussion_r459556063", "bodyText": "I saw that in some cases it wasn't enough, by default it was set to 3 minutes, so I just changed it back.", "author": "im-konge", "createdAt": "2020-07-23T15:56:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU1MjEzOQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU1MzE4Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3361#discussion_r459553182", "bodyText": "Are you using this instance variable only inside deployKafkaMirrorMaker method?", "author": "see-quick", "createdAt": "2020-07-23T15:52:25Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaMirrorMakerResource.java", "diffHunk": "@@ -24,6 +25,7 @@\n \n public class KafkaMirrorMakerResource {\n     public static final String PATH_TO_KAFKA_MIRROR_MAKER_CONFIG = \"../examples/mirror-maker/kafka-mirror-maker.yaml\";\n+    private static final long READINESS_TIMEOUT = ResourceOperation.getTimeoutForResourceReadiness();", "originalCommit": "40a47a69b6239a47e07290f8cebd62ff3f3f4da7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU1NzEwOA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3361#discussion_r459557108", "bodyText": "Yes, but it's done like this if we want to add something else, otherwise I can add it straight to the waitFor -> and also to match the pattern to have it like this in all resource classes", "author": "im-konge", "createdAt": "2020-07-23T15:57:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU1MzE4Mg=="}], "type": "inlineReview", "revised_code": {"commit": "f635b748d142aa74f6b0452485c7d58e1f93058e", "chunk": "diff --git a/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaMirrorMakerResource.java b/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaMirrorMakerResource.java\nindex 57553cea3..51c0b3fe0 100644\n--- a/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaMirrorMakerResource.java\n+++ b/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaMirrorMakerResource.java\n\n@@ -23,9 +22,10 @@ import io.strimzi.systemtest.resources.ResourceManager;\n \n import java.util.function.Consumer;\n \n+import static io.strimzi.systemtest.resources.ResourceManager.CR_CREATION_TIMEOUT;\n+\n public class KafkaMirrorMakerResource {\n     public static final String PATH_TO_KAFKA_MIRROR_MAKER_CONFIG = \"../examples/mirror-maker/kafka-mirror-maker.yaml\";\n-    private static final long READINESS_TIMEOUT = ResourceOperation.getTimeoutForResourceReadiness();\n \n     public static MixedOperation<KafkaMirrorMaker, KafkaMirrorMakerList, DoneableKafkaMirrorMaker, Resource<KafkaMirrorMaker, DoneableKafkaMirrorMaker>> kafkaMirrorMakerClient() {\n         return Crds.mirrorMakerOperation(ResourceManager.kubeClient().getClient());\n"}}, {"oid": "f635b748d142aa74f6b0452485c7d58e1f93058e", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f635b748d142aa74f6b0452485c7d58e1f93058e", "message": "review comments\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-07-23T16:28:34Z", "type": "commit"}, {"oid": "f635b748d142aa74f6b0452485c7d58e1f93058e", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f635b748d142aa74f6b0452485c7d58e1f93058e", "message": "review comments\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-07-23T16:28:34Z", "type": "forcePushed"}, {"oid": "e4f27ad58461693bab26fb11de758a501fa4f265", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e4f27ad58461693bab26fb11de758a501fa4f265", "message": "fixup! review comments\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-07-23T16:30:11Z", "type": "commit"}]}