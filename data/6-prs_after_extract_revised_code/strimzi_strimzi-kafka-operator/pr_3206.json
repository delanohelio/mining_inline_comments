{"pr_number": 3206, "pr_title": "Helm3 crds", "pr_createdAt": "2020-06-16T18:07:32Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3206", "timeline": [{"oid": "bb397a9ca4c80c3c4c3e769eacaf3a7f6497348b", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bb397a9ca4c80c3c4c3e769eacaf3a7f6497348b", "message": "Move Helm 3 chart CRDs to the crds directory (#3203)\n\nHelm charts can have dependencies on other Helm charts. When a\ndependent chart has CRDs that need to be installed and the parent\nchart is installing CRs using those CRDs, ordering becomes\nimportant. In Helm 3 this ordering is handled by placing the CRDs\nin a special crds directory. Helm will always install these CRDs\nfirst.\n\nBy moving the CRDs to the crds directory, charts can include\nStrimzi as a dependency without ordering issues related to\ninstalling CRDs.\n\nSigned-off-by: Michael Barker <michael.barker.84@gmail.com>", "committedDate": "2020-06-16T18:18:28Z", "type": "forcePushed"}, {"oid": "26714c2471ec490c59b3124fe52f1e1acb8f4070", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/26714c2471ec490c59b3124fe52f1e1acb8f4070", "message": "Move Helm 3 chart CRDs to the crds directory (#3203)\n\nHelm charts can have dependencies on other Helm charts. When a\ndependent chart has CRDs that need to be installed and the parent\nchart is installing CRs using those CRDs, ordering becomes\nimportant. In Helm 3 this ordering is handled by placing the CRDs\nin a special crds directory. Helm will always install these CRDs\nfirst.\n\nBy moving the CRDs to the crds directory, charts can include\nStrimzi as a dependency without ordering issues related to\ninstalling CRDs.\n\nSigned-off-by: Michael Barker <michael.barker.84@gmail.com>", "committedDate": "2020-06-16T20:31:55Z", "type": "forcePushed"}, {"oid": "eead3f8b238810ad24a7844a8568568572b66c3d", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/eead3f8b238810ad24a7844a8568568572b66c3d", "message": "Move Helm 3 chart CRDs to the crds directory (#3203)\n\nHelm charts can have dependencies on other Helm charts. When a\ndependent chart has CRDs that need to be installed and the parent\nchart is installing CRs using those CRDs, ordering becomes\nimportant. In Helm 3 this ordering is handled by placing the CRDs\nin a special crds directory. Helm will always install these CRDs\nfirst.\n\nBy moving the CRDs to the crds directory, charts can include\nStrimzi as a dependency without ordering issues related to\ninstalling CRDs.\n\nSigned-off-by: Michael Barker <michael.barker.84@gmail.com>", "committedDate": "2020-06-17T13:29:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcyMzc0MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3206#discussion_r441723741", "bodyText": "The build was failing for me locally with JDK 14 due to more strict ordering for headers in Javadoc.", "author": "michael-barker", "createdAt": "2020-06-17T17:51:57Z", "path": "crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java", "diffHunk": "@@ -63,7 +63,7 @@\n  * <p>The tool works by recursing through class properties (in the JavaBeans sense)\n  * and the types of those properties, guided by the annotations.</p>\n  *\n- * <h3>Annotations</h3>\n+ * <h2>Annotations</h2>", "originalCommit": "33216b7f2eb82ed4b4cf0ec9b56fb05f896752e3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7a58c4d106d8a35fbac8d47734fa10edb2416abb", "chunk": "diff --git a/crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java b/crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java\nindex fe31f8ef66..4d84c4bba9 100644\n--- a/crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java\n+++ b/crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java\n\n@@ -63,7 +63,7 @@ import static java.util.Collections.emptyMap;\n  * <p>The tool works by recursing through class properties (in the JavaBeans sense)\n  * and the types of those properties, guided by the annotations.</p>\n  *\n- * <h2>Annotations</h2>\n+ * <h3>Annotations</h3>\n  * <dl>\n  *     <dt>@{@link Crd}</dt>\n  *     <dd>Annotates the top level class which represents an instance of the custom resource.\n"}}, {"oid": "7a58c4d106d8a35fbac8d47734fa10edb2416abb", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7a58c4d106d8a35fbac8d47734fa10edb2416abb", "message": "Add used but missing values to chart values.yaml\n\nimageRepositoryOverride and imageTagOverride are used but do not exist\nthe the values.yaml for the charts. Adding them with a default value of\nan empty string preserves existing behavior but makes the values more\nvisible to user when referencing the values.yaml.\n\nSigned-off-by: Michael Barker <michael.barker.84@gmail.com>", "committedDate": "2020-06-17T17:53:21Z", "type": "commit"}, {"oid": "080cc4ee73c07be6a5498cac1967ea9112d9a3c4", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/080cc4ee73c07be6a5498cac1967ea9112d9a3c4", "message": "Remove unused Helm template in _helpers.tpl\n\nRemoving the dockerRegistryOverride from _helpers.tpl for both charts as this\nvalue is unused. The imageRepositoryOverride template appears to serve the\nsame purpose and is used in the charts.\n\nSigned-off-by: Michael Barker <michael.barker.84@gmail.com>", "committedDate": "2020-06-17T17:53:21Z", "type": "commit"}, {"oid": "e9ef53fb1b6a2135543b44182a2d015b97dd2207", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e9ef53fb1b6a2135543b44182a2d015b97dd2207", "message": "Move Helm 3 chart CRDs to the crds directory (#3203)\n\nHelm charts can have dependencies on other Helm charts. When a\ndependent chart has CRDs that need to be installed and the parent\nchart is installing CRs using those CRDs, ordering becomes\nimportant. In Helm 3 this ordering is handled by placing the CRDs\nin a special crds directory. Helm will always install these CRDs\nfirst.\n\nBy moving the CRDs to the crds directory, charts can include\nStrimzi as a dependency without ordering issues related to\ninstalling CRDs.\n\nSigned-off-by: Michael Barker <michael.barker.84@gmail.com>", "committedDate": "2020-06-17T17:53:21Z", "type": "commit"}, {"oid": "00c178b7f66bdd8304670fd16530bceb5ee92de8", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/00c178b7f66bdd8304670fd16530bceb5ee92de8", "message": "Fix Javadoc header ordering\n\nWhen building with JDK 14, the build fails with an error due to stricter Javadoc\nrules added in JDK 13.\n\nSigned-off-by: Michael Barker <michael.barker.84@gmail.com>", "committedDate": "2020-06-17T17:53:21Z", "type": "commit"}, {"oid": "48a83d8be1b1247b9919647c1d90f3b2b0b7381b", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/48a83d8be1b1247b9919647c1d90f3b2b0b7381b", "message": "Fix missing trailing slash in multi-line command\n\nThe script echoed by the build script when there are uncommitted changes to\ngenerator or derived resources was missing a trailing slash causing the\ncommand to fail when copying and pasting the command.\n\nSigned-off-by: Michael Barker <michael.barker.84@gmail.com>", "committedDate": "2020-06-17T17:53:21Z", "type": "commit"}, {"oid": "48a83d8be1b1247b9919647c1d90f3b2b0b7381b", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/48a83d8be1b1247b9919647c1d90f3b2b0b7381b", "message": "Fix missing trailing slash in multi-line command\n\nThe script echoed by the build script when there are uncommitted changes to\ngenerator or derived resources was missing a trailing slash causing the\ncommand to fail when copying and pasting the command.\n\nSigned-off-by: Michael Barker <michael.barker.84@gmail.com>", "committedDate": "2020-06-17T17:53:21Z", "type": "forcePushed"}, {"oid": "dc9a7d316fd3d1dfc10a720cd047ebde8606bd76", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/dc9a7d316fd3d1dfc10a720cd047ebde8606bd76", "message": "Fix generated resources\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-06-17T19:37:51Z", "type": "commit"}]}