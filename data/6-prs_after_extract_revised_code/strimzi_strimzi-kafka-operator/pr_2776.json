{"pr_number": 2776, "pr_title": "[systemtest] Fix failing tests", "pr_createdAt": "2020-04-01T21:33:16Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2776", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE2Mzg3NQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2776#discussion_r402163875", "bodyText": "This should be in test, not in utils class", "author": "Frawless", "createdAt": "2020-04-02T09:08:58Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/utils/StUtils.java", "diffHunk": "@@ -125,11 +126,13 @@ private static String buildTag(String currentTag) {\n         return testEnvs;\n     }\n \n-    public static void checkCologForUsedVariable(String varName) {\n-        LOGGER.info(\"Check if ClusterOperator logs already defined variable occurrence\");\n-        String coLog = kubeClient().logs(kubeClient().listPodNames(\"name\", \"strimzi-cluster-operator\").get(0));\n-        assertThat(coLog.contains(\"User defined container template environment variable \" + varName + \" is already in use and will be ignored\"), is(true));\n-        LOGGER.info(\"ClusterOperator logs contains proper warning\");\n+    public static void checkEnvVarInPod(String podName, String envVarName, String value) {\n+        LOGGER.info(\"Check if actual env variable {} has different value than {}\", envVarName, value);\n+        String actualValue = kubeClient().getPod(podName).getSpec().getContainers().get(0).getEnv()\n+                .stream().filter(envVar -> envVar.getName().equals(envVarName)).findFirst().get().getValue();\n+\n+        assertThat(actualValue, is(not(value)));", "originalCommit": "e3603887ee54c63e5ab1a9f41ee0bc50c8b206ec", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f004b8745acec9734bf619abc5d38aeb1d974327", "chunk": "diff --git a/systemtest/src/main/java/io/strimzi/systemtest/utils/StUtils.java b/systemtest/src/main/java/io/strimzi/systemtest/utils/StUtils.java\nindex f4287f9729..e3f3563b77 100644\n--- a/systemtest/src/main/java/io/strimzi/systemtest/utils/StUtils.java\n+++ b/systemtest/src/main/java/io/strimzi/systemtest/utils/StUtils.java\n\n@@ -126,13 +123,9 @@ public class StUtils {\n         return testEnvs;\n     }\n \n-    public static void checkEnvVarInPod(String podName, String envVarName, String value) {\n-        LOGGER.info(\"Check if actual env variable {} has different value than {}\", envVarName, value);\n-        String actualValue = kubeClient().getPod(podName).getSpec().getContainers().get(0).getEnv()\n+    public static String checkEnvVarInPod(String podName, String envVarName) {\n+        return kubeClient().getPod(podName).getSpec().getContainers().get(0).getEnv()\n                 .stream().filter(envVar -> envVar.getName().equals(envVarName)).findFirst().get().getValue();\n-\n-        assertThat(actualValue, is(not(value)));\n-        LOGGER.info(\"Actual env variable has different value than {}\", value);\n     }\n \n     /**\n"}}, {"oid": "784cdd910b8e4ddfef31cd852c0eda3b8feea26f", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/784cdd910b8e4ddfef31cd852c0eda3b8feea26f", "message": "fix failing tests\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>", "committedDate": "2020-04-02T18:04:52Z", "type": "commit"}, {"oid": "f004b8745acec9734bf619abc5d38aeb1d974327", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f004b8745acec9734bf619abc5d38aeb1d974327", "message": "fixup! fix failing tests\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>", "committedDate": "2020-04-02T18:04:53Z", "type": "commit"}, {"oid": "f004b8745acec9734bf619abc5d38aeb1d974327", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f004b8745acec9734bf619abc5d38aeb1d974327", "message": "fixup! fix failing tests\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>", "committedDate": "2020-04-02T18:04:53Z", "type": "forcePushed"}]}