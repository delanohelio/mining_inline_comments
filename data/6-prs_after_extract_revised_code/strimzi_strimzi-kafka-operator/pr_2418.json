{"pr_number": 2418, "pr_title": "Fix connector operator when connect runs in a different namespace", "pr_createdAt": "2020-01-17T19:04:56Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODEwNDAxMA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#discussion_r368104010", "bodyText": "Typo deployment", "author": "ppatierno", "createdAt": "2020-01-17T19:39:13Z", "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java", "diffHunk": "@@ -47,6 +47,17 @@ public static String metricsAndLogConfigMapName(String clusterName) {\n         return clusterName + \"-connect-config\";\n     }\n \n+    /**\n+     * Returns qualified name of the service which works across different namespaces.\n+     *\n+     * @param clusterName   Name of the Connect CR\n+     * @param namespace     Namespace of the Connect dpeloyment", "originalCommit": "4047d92c25ad074373a95822b54083cb983d452a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "chunk": "diff --git a/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java b/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java\nindex c382450c3..3b0b7e760 100644\n--- a/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java\n+++ b/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java\n\n@@ -51,8 +51,8 @@ public class KafkaConnectResources {\n      * Returns qualified name of the service which works across different namespaces.\n      *\n      * @param clusterName   Name of the Connect CR\n-     * @param namespace     Namespace of the Connect dpeloyment\n-     * @return              quaified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"\n+     * @param namespace     Namespace of the Connect deployment\n+     * @return              qualified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"\n      */\n     public static String qualifiedServiceName(String clusterName, String namespace) {\n         return serviceName(clusterName) + \".\" + namespace + \".svc\";\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODEwNDEwMA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#discussion_r368104100", "bodyText": "Typo qualified", "author": "ppatierno", "createdAt": "2020-01-17T19:39:29Z", "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java", "diffHunk": "@@ -47,6 +47,17 @@ public static String metricsAndLogConfigMapName(String clusterName) {\n         return clusterName + \"-connect-config\";\n     }\n \n+    /**\n+     * Returns qualified name of the service which works across different namespaces.\n+     *\n+     * @param clusterName   Name of the Connect CR\n+     * @param namespace     Namespace of the Connect dpeloyment\n+     * @return              quaified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"", "originalCommit": "4047d92c25ad074373a95822b54083cb983d452a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "chunk": "diff --git a/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java b/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java\nindex c382450c3..3b0b7e760 100644\n--- a/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java\n+++ b/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java\n\n@@ -51,8 +51,8 @@ public class KafkaConnectResources {\n      * Returns qualified name of the service which works across different namespaces.\n      *\n      * @param clusterName   Name of the Connect CR\n-     * @param namespace     Namespace of the Connect dpeloyment\n-     * @return              quaified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"\n+     * @param namespace     Namespace of the Connect deployment\n+     * @return              qualified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"\n      */\n     public static String qualifiedServiceName(String clusterName, String namespace) {\n         return serviceName(clusterName) + \".\" + namespace + \".svc\";\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ0OTAxMg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#discussion_r368449012", "bodyText": "We should at least add something to the javadoc of serviceName() to say that's it's the namespace-local name.\nAnd we should consider deprecating it and adding a new localServiceName() method instead to make the distinction more obvious.", "author": "tombentley", "createdAt": "2020-01-20T09:40:29Z", "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java", "diffHunk": "@@ -47,6 +47,17 @@ public static String metricsAndLogConfigMapName(String clusterName) {\n         return clusterName + \"-connect-config\";\n     }\n \n+    /**\n+     * Returns qualified name of the service which works across different namespaces.\n+     *\n+     * @param clusterName   Name of the Connect CR\n+     * @param namespace     Namespace of the Connect deployment\n+     * @return              qualified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"\n+     */\n+    public static String qualifiedServiceName(String clusterName, String namespace) {", "originalCommit": "4c5a089bc30448aa455cc7784bf64c97c35308eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ2MDIwNw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#discussion_r368460207", "bodyText": "Adding it to the Javadoc is fine. I'm not sure I like the idea of deprecating it and adding another method:\n\nThe serviceName is used in all of our resources with a service in the same meaning\nserviceName is actually what it does, it returns the name of the service which is without any namespace or qualifiers. So I think semantically it does exactly how it is named.", "author": "scholzj", "createdAt": "2020-01-20T10:02:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ0OTAxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ2MTAwNA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#discussion_r368461004", "bodyText": "OK, fair points.", "author": "tombentley", "createdAt": "2020-01-20T10:04:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ0OTAxMg=="}], "type": "inlineReview", "revised_code": {"commit": "e42598d93b3d1b7724bca6b48fb461e4bfd0913b", "chunk": "diff --git a/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java b/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java\nindex 3b0b7e760..c382450c3 100644\n--- a/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java\n+++ b/api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java\n\n@@ -51,8 +51,8 @@ public class KafkaConnectResources {\n      * Returns qualified name of the service which works across different namespaces.\n      *\n      * @param clusterName   Name of the Connect CR\n-     * @param namespace     Namespace of the Connect deployment\n-     * @return              qualified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"\n+     * @param namespace     Namespace of the Connect dpeloyment\n+     * @return              quaified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"\n      */\n     public static String qualifiedServiceName(String clusterName, String namespace) {\n         return serviceName(clusterName) + \".\" + namespace + \".svc\";\n"}}, {"oid": "e42598d93b3d1b7724bca6b48fb461e4bfd0913b", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e42598d93b3d1b7724bca6b48fb461e4bfd0913b", "message": "Fix connector operator when connect runs in a different namespace - Closes #2417\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-01-20T10:53:39Z", "type": "commit"}, {"oid": "e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "message": "Fix typos in javadocs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-01-20T10:53:39Z", "type": "commit"}, {"oid": "e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "message": "Fix typos in javadocs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-01-20T10:53:39Z", "type": "forcePushed"}, {"oid": "5d7a1dd6b1c7f615aa5f9d92da5bf6712f45b73a", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5d7a1dd6b1c7f615aa5f9d92da5bf6712f45b73a", "message": "Review comments\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-01-20T11:16:49Z", "type": "commit"}, {"oid": "5d7a1dd6b1c7f615aa5f9d92da5bf6712f45b73a", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5d7a1dd6b1c7f615aa5f9d92da5bf6712f45b73a", "message": "Review comments\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-01-20T11:16:49Z", "type": "forcePushed"}]}