{"pr_number": 2600, "pr_title": "feat: Add description annotations to generated CRD yaml", "pr_createdAt": "2020-02-24T23:37:01Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2600", "timeline": [{"oid": "d8321bd4e9b4797b628f16d876e84a20eef18993", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d8321bd4e9b4797b628f16d876e84a20eef18993", "message": "feat: Add description annotations to generated CRD yaml\n\nA minor update to CrdGenerator allows the description annotations\nalready in the Java source code to be included in the CRD yaml\nfiles.\n\nSigned-off-by: Dale Lane <dale.lane@uk.ibm.com>", "committedDate": "2020-02-24T23:33:01Z", "type": "commit"}, {"oid": "496bda8d13e33f9124f7e1364311f0077b2ce25e", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/496bda8d13e33f9124f7e1364311f0077b2ce25e", "message": "tests: Update unit tests for new CrdGenerator\n\nSigned-off-by: Dale Lane <dale.lane@uk.ibm.com>", "committedDate": "2020-02-25T00:26:43Z", "type": "commit"}, {"oid": "d326001468b2ffb6a76b82d99fa440f76fbe4e86", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d326001468b2ffb6a76b82d99fa440f76fbe4e86", "message": "chore: Update derived resources\n\nSigned-off-by: Dale Lane <dale.lane@uk.ibm.com>", "committedDate": "2020-02-25T01:22:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc2NTg5Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2600#discussion_r383765893", "bodyText": "Can you factor out and reuse the logic of io.strimzi.crdgenerator.DocGenerator#getDescription, which adds a full stop if one it missing? It's easier to do this than having to nit pick every time someone forgets to punctuate properly in @Description.", "author": "tombentley", "createdAt": "2020-02-25T09:45:53Z", "path": "crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java", "diffHunk": "@@ -517,6 +518,13 @@ private ObjectNode buildBasicTypeSchema(AnnotatedElement element, Class type) {\n         return result;\n     }\n \n+    private void addDescription(ObjectNode result, AnnotatedElement element) {\n+        if (element.isAnnotationPresent(Description.class)) {\n+            Description description = element.getAnnotation(Description.class);\n+            result.put(\"description\", description.value());\n+        }\n+    }", "originalCommit": "d326001468b2ffb6a76b82d99fa440f76fbe4e86", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1137b5dca1ce163289d6ec2db7203846727c8e74", "chunk": "diff --git a/crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java b/crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java\nindex b1eccc603e..384d714818 100644\n--- a/crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java\n+++ b/crd-generator/src/main/java/io/strimzi/crdgenerator/CrdGenerator.java\n\n@@ -521,7 +521,7 @@ public class CrdGenerator {\n     private void addDescription(ObjectNode result, AnnotatedElement element) {\n         if (element.isAnnotationPresent(Description.class)) {\n             Description description = element.getAnnotation(Description.class);\n-            result.put(\"description\", description.value());\n+            result.put(\"description\", DocGenerator.getDescription(description));\n         }\n     }\n \n"}}, {"oid": "1137b5dca1ce163289d6ec2db7203846727c8e74", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1137b5dca1ce163289d6ec2db7203846727c8e74", "message": "feat: Ensure descriptions in CRDs end in full-stop\n\nSigned-off-by: Dale Lane <dale.lane@uk.ibm.com>", "committedDate": "2020-02-25T10:05:29Z", "type": "commit"}]}