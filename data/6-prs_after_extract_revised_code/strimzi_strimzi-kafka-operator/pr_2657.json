{"pr_number": 2657, "pr_title": "ST: Fix several connect tests where race with NP was hit", "pr_createdAt": "2020-03-07T13:46:58Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2657", "timeline": [{"oid": "f177af6cd782a29d4a013b81f870815869f07a9b", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f177af6cd782a29d4a013b81f870815869f07a9b", "message": "Fix several connect tests where race with NP was hit\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-07T13:45:08Z", "type": "commit"}, {"oid": "1a831f50debc33d50c38907bc66a686a8c916056", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1a831f50debc33d50c38907bc66a686a8c916056", "message": "fixup! Fix several connect tests where race with NP was hit\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-07T14:11:12Z", "type": "commit"}, {"oid": "58d30dd9fe6ab59afa070420c04d11b220e99c8c", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/58d30dd9fe6ab59afa070420c04d11b220e99c8c", "message": "Deal with problem when NP wasn't recreated in case of env recreation, include connect tests\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-07T17:58:46Z", "type": "commit"}, {"oid": "d8080826f4eac45e818694b47856ef13b2793c52", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d8080826f4eac45e818694b47856ef13b2793c52", "message": "Another bunch of fixes\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-08T16:47:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2Mjc4OA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2657#discussion_r389562788", "bodyText": "\"true\" -> Boolean.TRUE.toString()", "author": "see-quick", "createdAt": "2020-03-09T10:05:08Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -92,15 +88,15 @@ private static KafkaConnectBuilder defaultKafkaConnect(KafkaConnect kafkaConnect\n             .endSpec();\n     }\n \n-    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, boolean allowNetworkPolicyAccess, String clusterName) {\n+    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, String clusterName) {\n+        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES.equals(\"true\")) {", "originalCommit": "d8080826f4eac45e818694b47856ef13b2793c52", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8ed3a5f98fa683573c174f0ef265d2fa2745cdbd", "chunk": "diff --git a/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java b/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java\nindex a385538fe5..5e9e00aac1 100644\n--- a/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java\n+++ b/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java\n\n@@ -89,7 +89,7 @@ public class KafkaConnectResource {\n     }\n \n     private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, String clusterName) {\n-        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES.equals(\"true\")) {\n+        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES.equals(Boolean.TRUE.toString())) {\n             KubernetesResource.allowNetworkPolicySettingsForResource(kafkaConnect, KafkaConnectResources.deploymentName(kafkaConnect.getMetadata().getName()), clusterName);\n         }\n         return new DoneableKafkaConnect(kafkaConnect, kC -> {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2NDIyMQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2657#discussion_r389564221", "bodyText": "same would be great to use static factory method Boolean.TRUE.toString()", "author": "see-quick", "createdAt": "2020-03-09T10:08:02Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectS2IResource.java", "diffHunk": "@@ -75,15 +68,15 @@ public static KafkaConnectS2IBuilder defaultKafkaConnectS2I(KafkaConnectS2I kafk\n             .endSpec();\n     }\n \n-    private static DoneableKafkaConnectS2I deployKafkaConnectS2I(KafkaConnectS2I kafkaConnectS2I, boolean allowNetworkPolicyAccess, String clusterName) {\n+    private static DoneableKafkaConnectS2I deployKafkaConnectS2I(KafkaConnectS2I kafkaConnectS2I, String clusterName) {\n+        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES.equals(\"true\")) {", "originalCommit": "d8080826f4eac45e818694b47856ef13b2793c52", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8ed3a5f98fa683573c174f0ef265d2fa2745cdbd", "chunk": "diff --git a/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectS2IResource.java b/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectS2IResource.java\nindex f891dfa7de..7b9442e9bd 100644\n--- a/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectS2IResource.java\n+++ b/systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectS2IResource.java\n\n@@ -69,7 +69,7 @@ public class KafkaConnectS2IResource {\n     }\n \n     private static DoneableKafkaConnectS2I deployKafkaConnectS2I(KafkaConnectS2I kafkaConnectS2I, String clusterName) {\n-        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES.equals(\"true\")) {\n+        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES.equals(Boolean.TRUE.toString())) {\n             KubernetesResource.allowNetworkPolicySettingsForResource(kafkaConnectS2I, KafkaConnectS2IResources.deploymentName(kafkaConnectS2I.getMetadata().getName()), clusterName);\n         }\n         return new DoneableKafkaConnectS2I(kafkaConnectS2I, kC -> {\n"}}, {"oid": "8ed3a5f98fa683573c174f0ef265d2fa2745cdbd", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8ed3a5f98fa683573c174f0ef265d2fa2745cdbd", "message": "Add some fixes after review\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-03-09T11:00:26Z", "type": "commit"}]}