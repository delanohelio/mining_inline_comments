{"pr_number": 2409, "pr_title": "DNS cache TTL", "pr_createdAt": "2020-01-16T08:47:51Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2409", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzMwODI5Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2409#discussion_r367308293", "bodyText": "Can we call it STRIMZI_DNS_CACHE_TTL", "author": "tombentley", "createdAt": "2020-01-16T09:20:52Z", "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/EntityTopicOperator.java", "diffHunk": "@@ -52,6 +52,7 @@\n     public static final String ENV_VAR_FULL_RECONCILIATION_INTERVAL_MS = \"STRIMZI_FULL_RECONCILIATION_INTERVAL_MS\";\n     public static final String ENV_VAR_ZOOKEEPER_SESSION_TIMEOUT_MS = \"STRIMZI_ZOOKEEPER_SESSION_TIMEOUT_MS\";\n     public static final String ENV_VAR_TOPIC_METADATA_MAX_ATTEMPTS = \"STRIMZI_TOPIC_METADATA_MAX_ATTEMPTS\";\n+    public static final String ENV_VAR_NETWORKADDRESS_CACHE_TTL = \"STRIMZI_NETWORKADDRESS_CACHE_TTL\";", "originalCommit": "395414e746acfbefd88323e7ae24334aae888ecd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "afea102d11a8a6527fcc5a43cdbcd2ae8cedd9d1", "chunk": "diff --git a/cluster-operator/src/main/java/io/strimzi/operator/cluster/model/EntityTopicOperator.java b/cluster-operator/src/main/java/io/strimzi/operator/cluster/model/EntityTopicOperator.java\nindex 7f42c6a7d0..6aacf66569 100644\n--- a/cluster-operator/src/main/java/io/strimzi/operator/cluster/model/EntityTopicOperator.java\n+++ b/cluster-operator/src/main/java/io/strimzi/operator/cluster/model/EntityTopicOperator.java\n\n@@ -52,7 +52,7 @@ public class EntityTopicOperator extends AbstractModel {\n     public static final String ENV_VAR_FULL_RECONCILIATION_INTERVAL_MS = \"STRIMZI_FULL_RECONCILIATION_INTERVAL_MS\";\n     public static final String ENV_VAR_ZOOKEEPER_SESSION_TIMEOUT_MS = \"STRIMZI_ZOOKEEPER_SESSION_TIMEOUT_MS\";\n     public static final String ENV_VAR_TOPIC_METADATA_MAX_ATTEMPTS = \"STRIMZI_TOPIC_METADATA_MAX_ATTEMPTS\";\n-    public static final String ENV_VAR_NETWORKADDRESS_CACHE_TTL = \"STRIMZI_NETWORKADDRESS_CACHE_TTL\";\n+    public static final String ENV_VAR_DNS_CACHE_TTL = \"STRIMZI_DNS_CACHE_TTL\";\n     public static final String ENV_VAR_TLS_ENABLED = \"STRIMZI_TLS_ENABLED\";\n     public static final Probe DEFAULT_HEALTHCHECK_OPTIONS = new ProbeBuilder()\n             .withInitialDelaySeconds(EntityTopicOperatorSpec.DEFAULT_HEALTHCHECK_DELAY)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzMwOTAxMw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2409#discussion_r367309013", "bodyText": "You've imported Security, so no need for FQ name.", "author": "tombentley", "createdAt": "2020-01-16T09:22:25Z", "path": "topic-operator/src/main/java/io/strimzi/operator/topic/Session.java", "diffHunk": "@@ -128,6 +129,8 @@ public void handle(Long inflightTimerId) {\n     public void start(Future<Void> startupFuture) {\n         LOGGER.info(\"Starting\");\n         Properties adminClientProps = new Properties();\n+\n+        java.security.Security.setProperty(\"networkaddress.cache.ttl\", config.get(Config.NETWORKADDRESS_CACHE_TTL).toString());", "originalCommit": "395414e746acfbefd88323e7ae24334aae888ecd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "afea102d11a8a6527fcc5a43cdbcd2ae8cedd9d1", "chunk": "diff --git a/topic-operator/src/main/java/io/strimzi/operator/topic/Session.java b/topic-operator/src/main/java/io/strimzi/operator/topic/Session.java\nindex 0faab8cfa6..4e03e44e07 100644\n--- a/topic-operator/src/main/java/io/strimzi/operator/topic/Session.java\n+++ b/topic-operator/src/main/java/io/strimzi/operator/topic/Session.java\n\n@@ -130,7 +130,7 @@ public class Session extends AbstractVerticle {\n         LOGGER.info(\"Starting\");\n         Properties adminClientProps = new Properties();\n \n-        java.security.Security.setProperty(\"networkaddress.cache.ttl\", config.get(Config.NETWORKADDRESS_CACHE_TTL).toString());\n+        Security.setProperty(\"networkaddress.cache.ttl\", config.get(Config.DNS_CACHE_TTL).toString());\n         adminClientProps.setProperty(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, config.get(Config.KAFKA_BOOTSTRAP_SERVERS));\n \n         if (Boolean.valueOf(config.get(Config.TLS_ENABLED))) {\n"}}, {"oid": "afea102d11a8a6527fcc5a43cdbcd2ae8cedd9d1", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/afea102d11a8a6527fcc5a43cdbcd2ae8cedd9d1", "message": "comments\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>", "committedDate": "2020-01-16T10:30:50Z", "type": "forcePushed"}, {"oid": "f258aa5ae0a31f05c51352fcce030fc8a89028b3", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f258aa5ae0a31f05c51352fcce030fc8a89028b3", "message": "comments\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>", "committedDate": "2020-01-20T11:03:56Z", "type": "commit"}, {"oid": "f258aa5ae0a31f05c51352fcce030fc8a89028b3", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f258aa5ae0a31f05c51352fcce030fc8a89028b3", "message": "comments\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>", "committedDate": "2020-01-20T11:03:56Z", "type": "forcePushed"}]}