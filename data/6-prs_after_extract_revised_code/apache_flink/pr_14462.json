{"pr_number": 14462, "pr_title": "[FLINK-20439][runtime] Rework `scheduleOrUpdateConsumers` to `notifyPartitionDataAvailable`", "pr_createdAt": "2020-12-22T12:14:48Z", "pr_url": "https://github.com/apache/flink/pull/14462", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM1NzE4Nw==", "url": "https://github.com/apache/flink/pull/14462#discussion_r547357187", "bodyText": "JavaDocs are missing.", "author": "tillrohrmann", "createdAt": "2020-12-22T15:56:29Z", "path": "flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionGraph.java", "diffHunk": "@@ -1319,28 +1319,15 @@ ResultPartitionID createResultPartitionId(final IntermediateResultPartitionID re\n \t\treturn null;\n \t}\n \n-\t/**\n-\t * Schedule or updates consumers of the given result partition.\n-\t *\n-\t * @param partitionId specifying the result partition whose consumer shall be scheduled or updated\n-\t * @throws ExecutionGraphException if the schedule or update consumers operation could not be executed\n-\t */\n-\tpublic void scheduleOrUpdateConsumers(ResultPartitionID partitionId) throws ExecutionGraphException {\n-\n+\tpublic void notifyPartitionDataAvailable(ResultPartitionID partitionId) {", "originalCommit": "c03b23779c75d060dbcfff0313ad4ea8532fdbae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc4ODc3Ng==", "url": "https://github.com/apache/flink/pull/14462#discussion_r547788776", "bodyText": "docs are added.", "author": "zhuzhurk", "createdAt": "2020-12-23T08:13:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzM1NzE4Nw=="}], "type": "inlineReview", "revised_code": {"commit": "dfcfc0a70356a37dec2b551dc03380aba4de38ca", "chunk": "diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionGraph.java b/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionGraph.java\nindex 559b096408e..4e3b54a2f8b 100644\n--- a/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionGraph.java\n+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionGraph.java\n\n@@ -1319,6 +1319,12 @@ public class ExecutionGraph implements AccessExecutionGraph {\n \t\treturn null;\n \t}\n \n+\t/**\n+\t * Mark the data of a result partition to be available. Note that only PIPELINED partitions are accepted\n+\t * because it is for the case that a TM side PIPELINED result partition has data produced and notifies JM.\n+\t *\n+\t * @param partitionId specifying the result partition whose data have become available\n+\t */\n \tpublic void notifyPartitionDataAvailable(ResultPartitionID partitionId) {\n \t\tassertRunningInJobMasterMainThread();\n \n"}}, {"oid": "dfcfc0a70356a37dec2b551dc03380aba4de38ca", "url": "https://github.com/apache/flink/commit/dfcfc0a70356a37dec2b551dc03380aba4de38ca", "message": "[FLINK-20439][runtime] Rework scheduleOrUpdateConsumers in ExecutionGraph and its sub-components\n\nnotifyPartitionDataAvailable() is introduced to replace scheduleOrUpdateConsumers() in the RPC code path.\nExecution#scheduleOrUpdateConsumers is renamed to #updatePartitionConsumers to be aligned with what id does.", "committedDate": "2020-12-23T08:13:22Z", "type": "commit"}, {"oid": "725bb50688dc06f1743b968fdc5fedadf5667f3f", "url": "https://github.com/apache/flink/commit/725bb50688dc06f1743b968fdc5fedadf5667f3f", "message": "[FLINK-20439][runtime] Rename `scheduleOrUpdateConsumers` to `notifyPartitionDataAvailable` to avoid confusion", "committedDate": "2020-12-23T08:13:22Z", "type": "commit"}, {"oid": "725bb50688dc06f1743b968fdc5fedadf5667f3f", "url": "https://github.com/apache/flink/commit/725bb50688dc06f1743b968fdc5fedadf5667f3f", "message": "[FLINK-20439][runtime] Rename `scheduleOrUpdateConsumers` to `notifyPartitionDataAvailable` to avoid confusion", "committedDate": "2020-12-23T08:13:22Z", "type": "forcePushed"}]}