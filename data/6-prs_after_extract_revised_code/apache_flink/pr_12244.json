{"pr_number": 12244, "pr_title": "[FLINK-17258][network] Fix couple of ITCases that were failing with enabled unaligned checkpoints", "pr_createdAt": "2020-05-19T09:54:32Z", "pr_url": "https://github.com/apache/flink/pull/12244", "timeline": [{"oid": "7fa2068a283b9471384248c1bf301e3d406b5f48", "url": "https://github.com/apache/flink/commit/7fa2068a283b9471384248c1bf301e3d406b5f48", "message": "[FLINK-17258][hotfix][network] Unify checkpoint id logging with CheckpointCoordinator", "committedDate": "2020-05-20T13:46:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA0Mzg3OQ==", "url": "https://github.com/apache/flink/pull/12244#discussion_r428043879", "bodyText": "nit: I guess it was extracted to disable unaligned checkpoints, but then CLI argument was used; so this variable can be inlined back.", "author": "rkhachatryan", "createdAt": "2020-05-20T14:10:42Z", "path": "flink-tests/src/test/java/org/apache/flink/test/classloading/ClassLoaderITCase.java", "diffHunk": "@@ -300,7 +300,8 @@ public void testCheckpointingCustomKvStateJobWithCustomClassLoader() throws IOEx\n \t */\n \t@Test\n \tpublic void testDisposeSavepointWithCustomKvState() throws Exception {\n-\t\tClusterClient<?> clusterClient = new MiniClusterClient(new Configuration(), miniClusterResource.getMiniCluster());\n+\t\tConfiguration configuration = new Configuration();", "originalCommit": "7fa2068a283b9471384248c1bf301e3d406b5f48", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "691fb2144e910e75f8fa5bac6e28d65ff1c347c6", "chunk": "diff --git a/flink-tests/src/test/java/org/apache/flink/test/classloading/ClassLoaderITCase.java b/flink-tests/src/test/java/org/apache/flink/test/classloading/ClassLoaderITCase.java\nindex 90848007155..974512c2847 100644\n--- a/flink-tests/src/test/java/org/apache/flink/test/classloading/ClassLoaderITCase.java\n+++ b/flink-tests/src/test/java/org/apache/flink/test/classloading/ClassLoaderITCase.java\n\n@@ -300,8 +300,7 @@ public class ClassLoaderITCase extends TestLogger {\n \t */\n \t@Test\n \tpublic void testDisposeSavepointWithCustomKvState() throws Exception {\n-\t\tConfiguration configuration = new Configuration();\n-\t\tClusterClient<?> clusterClient = new MiniClusterClient(configuration, miniClusterResource.getMiniCluster());\n+\t\tClusterClient<?> clusterClient = new MiniClusterClient(new Configuration(), miniClusterResource.getMiniCluster());\n \n \t\tDeadline deadline = new FiniteDuration(100, TimeUnit.SECONDS).fromNow();\n \n"}}, {"oid": "691fb2144e910e75f8fa5bac6e28d65ff1c347c6", "url": "https://github.com/apache/flink/commit/691fb2144e910e75f8fa5bac6e28d65ff1c347c6", "message": "[FLINK-17258][network][test] Run ClassLoaderITCase#testDisposeSavepointWithCustomKvState without unaligned checkpoints\n\nThis test needs many concurent checkpoint & savepoints and this is currently not supported with unaligned checkpoints.", "committedDate": "2020-05-20T14:50:18Z", "type": "commit"}, {"oid": "2d16eece130935b14d48825289ae72a12dac2ac5", "url": "https://github.com/apache/flink/commit/2d16eece130935b14d48825289ae72a12dac2ac5", "message": "[FLINK-17258][sql][test] Fix AggregateITCase.testPruneUselessAggCall missing sorted\n\nThe result of this query doesn't guarantee any ordering. This brakes with enabled unaligned checkpoints.", "committedDate": "2020-05-20T14:50:18Z", "type": "commit"}, {"oid": "d0d2042ea348654430863ccb51084c30714d8a47", "url": "https://github.com/apache/flink/commit/d0d2042ea348654430863ccb51084c30714d8a47", "message": "[FLINK-17258][hotfix][network] Unify checkpoint id logging with CheckpointCoordinator", "committedDate": "2020-05-20T14:50:18Z", "type": "commit"}, {"oid": "d0d2042ea348654430863ccb51084c30714d8a47", "url": "https://github.com/apache/flink/commit/d0d2042ea348654430863ccb51084c30714d8a47", "message": "[FLINK-17258][hotfix][network] Unify checkpoint id logging with CheckpointCoordinator", "committedDate": "2020-05-20T14:50:18Z", "type": "forcePushed"}]}