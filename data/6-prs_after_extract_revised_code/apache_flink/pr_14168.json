{"pr_number": 14168, "pr_title": "[FLINK-20277] Fix that ContinuousFileMonitoringFunction cannot restore from failure", "pr_createdAt": "2020-11-23T09:35:06Z", "pr_url": "https://github.com/apache/flink/pull/14168", "timeline": [{"oid": "4e66feafd0f4f8c00e024000ed055c44b65bbc51", "url": "https://github.com/apache/flink/commit/4e66feafd0f4f8c00e024000ed055c44b65bbc51", "message": "[FLINK-20277] Fix that ContinuousFileMonitoringFunction cannot restore from failure", "committedDate": "2020-11-23T09:29:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY1MTAwNA==", "url": "https://github.com/apache/flink/pull/14168#discussion_r528651004", "bodyText": "volatile -> final", "author": "JingsongLi", "createdAt": "2020-11-23T11:56:46Z", "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java", "diffHunk": "@@ -96,6 +96,9 @@\n \t/** The maximum file modification time seen so far. */\n \tprivate volatile long globalModificationTime;\n \n+\t/** store the initialized value of globalModificationTime */\n+\tprivate volatile long initializedGlobalModificationTime;", "originalCommit": "4e66feafd0f4f8c00e024000ed055c44b65bbc51", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ac9e64f86294f088a94e41ad1c7f165abddb24ad", "chunk": "diff --git a/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java b/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java\nindex 363d454bd4..24f9d38fb9 100644\n--- a/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java\n+++ b/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java\n\n@@ -96,8 +96,8 @@ public class ContinuousFileMonitoringFunction<OUT>\n \t/** The maximum file modification time seen so far. */\n \tprivate volatile long globalModificationTime;\n \n-\t/** store the initialized value of globalModificationTime */\n-\tprivate volatile long initializedGlobalModificationTime;\n+\t/** Store the initialized value of globalModificationTime. */\n+\tprivate final long initializedGlobalModificationTime;\n \n \tprivate transient Object checkpointLock;\n \n"}}, {"oid": "ac9e64f86294f088a94e41ad1c7f165abddb24ad", "url": "https://github.com/apache/flink/commit/ac9e64f86294f088a94e41ad1c7f165abddb24ad", "message": "address comments and fix checkstyle", "committedDate": "2020-11-23T11:59:25Z", "type": "commit"}, {"oid": "cf651cef1298aae1876a5319b19cbdde47e0e14f", "url": "https://github.com/apache/flink/commit/cf651cef1298aae1876a5319b19cbdde47e0e14f", "message": "update message name", "committedDate": "2020-11-23T15:12:36Z", "type": "commit"}]}