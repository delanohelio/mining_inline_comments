{"pr_number": 13392, "pr_title": "[FLINK-18713][table-planner-blink] Change duration configOption to duration type", "pr_createdAt": "2020-09-15T07:51:38Z", "pr_url": "https://github.com/apache/flink/pull/13392", "timeline": [{"oid": "027716b255e7333fa2c8ff2fdddab70591b5925d", "url": "https://github.com/apache/flink/commit/027716b255e7333fa2c8ff2fdddab70591b5925d", "message": "[FLINK-18713][table-planner-blink] Change duration configOption to to duration type", "committedDate": "2020-09-15T07:44:44Z", "type": "commit"}, {"oid": "bfb82165ec567b63f6f743aec7be913a2a440fa1", "url": "https://github.com/apache/flink/commit/bfb82165ec567b63f6f743aec7be913a2a440fa1", "message": "fix test fail", "committedDate": "2020-09-15T11:58:56Z", "type": "commit"}, {"oid": "f3af04d02472f93c5d49e0262ce7957cdd910707", "url": "https://github.com/apache/flink/commit/f3af04d02472f93c5d49e0262ce7957cdd910707", "message": "Fix test failed and update doc for config options changed", "committedDate": "2020-09-16T18:43:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDExNTg1OQ==", "url": "https://github.com/apache/flink/pull/13392#discussion_r490115859", "bodyText": "The default value is 0ms now. It would be better to mention the meaning of default value, otherwise it's confusing.\n\nDefault value is 0, which means detecting source idleness is not enabled.", "author": "wuchong", "createdAt": "2020-09-17T09:49:19Z", "path": "flink-table/flink-table-api-java/src/main/java/org/apache/flink/table/api/config/ExecutionConfigOptions.java", "diffHunk": "@@ -60,9 +60,10 @@\n \t// ------------------------------------------------------------------------\n \n \t@Documentation.TableOption(execMode = Documentation.ExecMode.STREAMING)\n-\tpublic static final ConfigOption<String> TABLE_EXEC_SOURCE_IDLE_TIMEOUT =\n+\tpublic static final ConfigOption<Duration> TABLE_EXEC_SOURCE_IDLE_TIMEOUT =\n \t\tkey(\"table.exec.source.idle-timeout\")\n-\t\t\t.defaultValue(\"-1 ms\")\n+\t\t\t.durationType()\n+\t\t\t.defaultValue(Duration.ofMillis(0))\n \t\t\t.withDescription(\"When a source do not receive any elements for the timeout time, \" +\n \t\t\t\t\"it will be marked as temporarily idle. This allows downstream \" +\n \t\t\t\t\"tasks to advance their watermarks without the need to wait for \" +", "originalCommit": "f3af04d02472f93c5d49e0262ce7957cdd910707", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b4edfc577e0d1d20203de931dbbab1ac4ab2d621", "chunk": "diff --git a/flink-table/flink-table-api-java/src/main/java/org/apache/flink/table/api/config/ExecutionConfigOptions.java b/flink-table/flink-table-api-java/src/main/java/org/apache/flink/table/api/config/ExecutionConfigOptions.java\nindex a1a89dd024c..d2180671dd0 100644\n--- a/flink-table/flink-table-api-java/src/main/java/org/apache/flink/table/api/config/ExecutionConfigOptions.java\n+++ b/flink-table/flink-table-api-java/src/main/java/org/apache/flink/table/api/config/ExecutionConfigOptions.java\n\n@@ -67,7 +67,8 @@ public class ExecutionConfigOptions {\n \t\t\t.withDescription(\"When a source do not receive any elements for the timeout time, \" +\n \t\t\t\t\"it will be marked as temporarily idle. This allows downstream \" +\n \t\t\t\t\"tasks to advance their watermarks without the need to wait for \" +\n-\t\t\t\t\"watermarks from this source while it is idle.\");\n+\t\t\t\t\"watermarks from this source while it is idle. \" +\n+\t\t\t\t\"Default value is 0, which means detecting source idleness is not enabled.\");\n \n \t// ------------------------------------------------------------------------\n \t//  Sink Options\n"}}, {"oid": "b4edfc577e0d1d20203de931dbbab1ac4ab2d621", "url": "https://github.com/apache/flink/commit/b4edfc577e0d1d20203de931dbbab1ac4ab2d621", "message": "Update the content of the comments", "committedDate": "2020-09-17T14:25:08Z", "type": "commit"}, {"oid": "0ae80979b126523815401a76c4dac86a06d9e23c", "url": "https://github.com/apache/flink/commit/0ae80979b126523815401a76c4dac86a06d9e23c", "message": "Refactoring earlyFireDelay and lateFireDelay to Duration type", "committedDate": "2020-09-20T11:45:13Z", "type": "commit"}, {"oid": "9f86e01988e6d8ad8b904670f66713ab21e485d6", "url": "https://github.com/apache/flink/commit/9f86e01988e6d8ad8b904670f66713ab21e485d6", "message": "Refactoring fireDelay to duration type", "committedDate": "2020-09-21T13:53:51Z", "type": "commit"}]}