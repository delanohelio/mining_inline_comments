{"pr_number": 11063, "pr_title": "[FLINK-15938][table-planner-blink] Enable state cleanup in background\u2026", "pr_createdAt": "2020-02-11T14:40:18Z", "pr_url": "https://github.com/apache/flink/pull/11063", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAyMTA5MA==", "url": "https://github.com/apache/flink/pull/11063#discussion_r378021090", "bodyText": "cleanupInBackground() is enabled by default and this method is deprecated. Do we need to add this in master?\nFrom my understanding, we only need to update 1.9 branch.", "author": "wuchong", "createdAt": "2020-02-12T03:16:44Z", "path": "flink-table/flink-table-runtime-blink/src/main/java/org/apache/flink/table/runtime/operators/join/stream/state/JoinRecordStateViews.java", "diffHunk": "@@ -79,6 +79,7 @@ static StateTtlConfig createTtlConfig(long retentionTime, boolean stateCleaningE\n \t\t\t\t.newBuilder(Time.milliseconds(retentionTime))\n \t\t\t\t.setUpdateType(StateTtlConfig.UpdateType.OnCreateAndWrite)\n \t\t\t\t.setStateVisibility(StateTtlConfig.StateVisibility.ReturnExpiredIfNotCleanedUp)\n+\t\t\t\t.cleanupInBackground()", "originalCommit": "420d42f48e38d837462e6c0eec4acd5f3ce4d935", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAyMjM3Mw==", "url": "https://github.com/apache/flink/pull/11063#discussion_r378022373", "bodyText": "Yes. I've explained this in the pr's description, and +1 to only fix for 1.9 branch.\nDo you mean I need to open the pr against 1.9 branch?", "author": "libenchao", "createdAt": "2020-02-12T03:23:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAyMTA5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAyMzIyOA==", "url": "https://github.com/apache/flink/pull/11063#discussion_r378023228", "bodyText": "Yes. I think we only need a pull request for 1.9 branch.", "author": "wuchong", "createdAt": "2020-02-12T03:27:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAyMTA5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAyNjQ4Mw==", "url": "https://github.com/apache/flink/pull/11063#discussion_r378026483", "bodyText": "Thanks for your review. I've changed this pr for release-1.9 branch.", "author": "libenchao", "createdAt": "2020-02-12T03:42:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAyMTA5MA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "fca1277372f2c99ebe51f8239dffb353739d7b51", "url": "https://github.com/apache/flink/commit/fca1277372f2c99ebe51f8239dffb353739d7b51", "message": "[FLINK-15938][table-planner-blink] Enable state cleanup in background for Streaming[SemiAnti]JoinOperator in blink", "committedDate": "2020-02-12T03:34:25Z", "type": "commit"}, {"oid": "fca1277372f2c99ebe51f8239dffb353739d7b51", "url": "https://github.com/apache/flink/commit/fca1277372f2c99ebe51f8239dffb353739d7b51", "message": "[FLINK-15938][table-planner-blink] Enable state cleanup in background for Streaming[SemiAnti]JoinOperator in blink", "committedDate": "2020-02-12T03:34:25Z", "type": "forcePushed"}]}