{"pr_number": 13067, "pr_title": "[FLINK-18821][network] Report PartitionRequest failures to subsequent\u2026", "pr_createdAt": "2020-08-05T09:27:09Z", "pr_url": "https://github.com/apache/flink/pull/13067", "timeline": [{"oid": "e3ad391b48b7ffc4a5ebd3717e0f99808522cb28", "url": "https://github.com/apache/flink/commit/e3ad391b48b7ffc4a5ebd3717e0f99808522cb28", "message": "[FLINK-18821][network] Report PartitionRequest failures to subsequent callers", "committedDate": "2020-08-05T09:18:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMTMzNg==", "url": "https://github.com/apache/flink/pull/13067#discussion_r466231336", "bodyText": "I added a similar method to FutureUtils called runSync (but it creates a new future). Would it make sense to keep the names in sync? (I have no hard feeling about renaming runSync).", "author": "AHeise", "createdAt": "2020-08-06T08:22:29Z", "path": "flink-runtime/src/main/java/org/apache/flink/runtime/concurrent/FutureUtils.java", "diffHunk": "@@ -90,6 +90,21 @@\n \t\t}\n \t}\n \n+\t/**\n+\t * Fakes asynchronous execution by immediately executing the operation and completing the supplied future\n+\t * either noramlly or exceptionally.\n+\t *\n+\t * @param operation to executed\n+\t * @param <T> type of the result\n+\t */\n+\tpublic static <T> void completeFromCallable(CompletableFuture<T> future, Callable<T> operation) {", "originalCommit": "e3ad391b48b7ffc4a5ebd3717e0f99808522cb28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMjE1NQ==", "url": "https://github.com/apache/flink/pull/13067#discussion_r466232155", "bodyText": "runSync should probably also use your method.", "author": "AHeise", "createdAt": "2020-08-06T08:23:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMTMzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjI1NzUxNg==", "url": "https://github.com/apache/flink/pull/13067#discussion_r466257516", "bodyText": "I checked out FutureUtils.runSyn but I couldn't find any usages of it (now and in the original commit too).\nSo I think we should just remove it, but also in a separate PR.\nWDYT @AHeise?", "author": "rkhachatryan", "createdAt": "2020-08-06T09:08:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMTMzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM2ODUyMw==", "url": "https://github.com/apache/flink/pull/13067#discussion_r466368523", "bodyText": "I'd probably go by hotfix commit, doesn't deserve a separate PR.", "author": "AHeise", "createdAt": "2020-08-06T12:14:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMTMzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM3MTMyMA==", "url": "https://github.com/apache/flink/pull/13067#discussion_r466371320", "bodyText": "Wanted to avoid extra CI run :)\nOK, added this commit.", "author": "rkhachatryan", "createdAt": "2020-08-06T12:20:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMTMzNg=="}], "type": "inlineReview", "revised_code": {"commit": "9912d6fd64757bce996b438befee462f1debc2ea", "chunk": "diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/concurrent/FutureUtils.java b/flink-runtime/src/main/java/org/apache/flink/runtime/concurrent/FutureUtils.java\nindex f1225cfca4..74f44e373f 100644\n--- a/flink-runtime/src/main/java/org/apache/flink/runtime/concurrent/FutureUtils.java\n+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/concurrent/FutureUtils.java\n\n@@ -75,21 +75,6 @@ public class FutureUtils {\n \t\treturn COMPLETED_VOID_FUTURE;\n \t}\n \n-\t/**\n-\t * Fakes asynchronous execution by immediately executing the operation and returns a (exceptionally) completed\n-\t * future.\n-\t *\n-\t * @param operation to executed\n-\t * @param <T> type of the result\n-\t */\n-\tpublic static <T> CompletableFuture<T> runSync(Callable<T> operation) {\n-\t\ttry {\n-\t\t\treturn CompletableFuture.completedFuture(operation.call());\n-\t\t} catch (Exception e) {\n-\t\t\treturn completedExceptionally(e);\n-\t\t}\n-\t}\n-\n \t/**\n \t * Fakes asynchronous execution by immediately executing the operation and completing the supplied future\n \t * either noramlly or exceptionally.\n"}}, {"oid": "9912d6fd64757bce996b438befee462f1debc2ea", "url": "https://github.com/apache/flink/commit/9912d6fd64757bce996b438befee462f1debc2ea", "message": "[hotfix] Remove unused FutureUtils.runSync", "committedDate": "2020-08-06T12:19:25Z", "type": "commit"}]}