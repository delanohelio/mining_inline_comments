{"pr_number": 11376, "pr_title": "[FLINK-16535] [table] BatchTableSink#emitDataSet returns DataSink", "pr_createdAt": "2020-03-11T08:46:04Z", "pr_url": "https://github.com/apache/flink/pull/11376", "timeline": [{"oid": "a737fafa9032a98a4b98466400d4e19d3173b6d0", "url": "https://github.com/apache/flink/commit/a737fafa9032a98a4b98466400d4e19d3173b6d0", "message": "[FLINK-16535] [table] BatchTableSink#emitDataSet returns DataSink", "committedDate": "2020-03-11T08:04:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTU0ODIzMg==", "url": "https://github.com/apache/flink/pull/11376#discussion_r391548232", "bodyText": "consumeDataSet?", "author": "JingsongLi", "createdAt": "2020-03-12T11:07:24Z", "path": "flink-table/flink-table-api-java-bridge/src/main/java/org/apache/flink/table/sinks/BatchTableSink.java", "diffHunk": "@@ -31,5 +32,5 @@\n public interface BatchTableSink<T> extends TableSink<T> {\n \n \t/** Emits the DataSet. */\n-\tvoid emitDataSet(DataSet<T> dataSet);\n+\tDataSink<?> emitDataSet(DataSet<T> dataSet);", "originalCommit": "a737fafa9032a98a4b98466400d4e19d3173b6d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDcwNTc4OQ==", "url": "https://github.com/apache/flink/pull/11376#discussion_r400705789", "bodyText": "consumeDataSet?\n\nagree, although the change is a little larger. consumeDataSet aligns with consumeDataStream", "author": "godfreyhe", "createdAt": "2020-03-31T07:43:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTU0ODIzMg=="}], "type": "inlineReview", "revised_code": {"commit": "001aadeb5d70da587aa67a997467e9856d81c2fd", "chunk": "diff --git a/flink-table/flink-table-api-java-bridge/src/main/java/org/apache/flink/table/sinks/BatchTableSink.java b/flink-table/flink-table-api-java-bridge/src/main/java/org/apache/flink/table/sinks/BatchTableSink.java\nindex 88eb9773104..d0944a15490 100644\n--- a/flink-table/flink-table-api-java-bridge/src/main/java/org/apache/flink/table/sinks/BatchTableSink.java\n+++ b/flink-table/flink-table-api-java-bridge/src/main/java/org/apache/flink/table/sinks/BatchTableSink.java\n\n@@ -31,6 +33,9 @@ import org.apache.flink.table.api.Table;\n @Deprecated\n public interface BatchTableSink<T> extends TableSink<T> {\n \n-\t/** Emits the DataSet. */\n-\tDataSink<?> emitDataSet(DataSet<T> dataSet);\n+\t/**\n+\t * Consumes the DataSet and return the {@link DataSink}.\n+\t * The returned {@link DataSink} will be used to generate {@link Plan} for the sink operator.\n+\t */\n+\tDataSink<?> consumeDataSet(DataSet<T> dataSet);\n }\n"}}, {"oid": "001aadeb5d70da587aa67a997467e9856d81c2fd", "url": "https://github.com/apache/flink/commit/001aadeb5d70da587aa67a997467e9856d81c2fd", "message": "rename emitDataSet to consumeDataSet in BatchTaleSink which could align with StreamTableSink#consumeDataStream", "committedDate": "2020-03-31T07:35:49Z", "type": "commit"}, {"oid": "f0ba2bfc98fd1e62d065f547a0f2eb985b475825", "url": "https://github.com/apache/flink/commit/f0ba2bfc98fd1e62d065f547a0f2eb985b475825", "message": "minor update", "committedDate": "2020-03-31T07:45:05Z", "type": "commit"}]}