{"pr_number": 12260, "pr_title": "[FLINK-17189][table-planner] Table with proctime attribute cannot be read from Hive catalog", "pr_createdAt": "2020-05-20T04:05:57Z", "pr_url": "https://github.com/apache/flink/pull/12260", "timeline": [{"oid": "401be6000cf497ea1f598494c70dfbc2fa2fea65", "url": "https://github.com/apache/flink/commit/401be6000cf497ea1f598494c70dfbc2fa2fea65", "message": "Fix comments", "committedDate": "2020-05-21T09:04:57Z", "type": "forcePushed"}, {"oid": "081a62a66ef0a1b687b10e6b41ed8066b0c7992d", "url": "https://github.com/apache/flink/commit/081a62a66ef0a1b687b10e6b41ed8066b0c7992d", "message": "[FLINK-17189][table-planner] Table with processing time attribute can not be read from Hive catalog", "committedDate": "2020-05-25T03:14:33Z", "type": "commit"}, {"oid": "081a62a66ef0a1b687b10e6b41ed8066b0c7992d", "url": "https://github.com/apache/flink/commit/081a62a66ef0a1b687b10e6b41ed8066b0c7992d", "message": "[FLINK-17189][table-planner] Table with processing time attribute can not be read from Hive catalog", "committedDate": "2020-05-25T03:14:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTcxNjQ2NQ==", "url": "https://github.com/apache/flink/pull/12260#discussion_r429716465", "bodyText": "Could you add a short comment for this field to explain why we need this? The same to CatalogManagerCalciteSchema, CatalogSchemaTable, DatabaseCalciteSchema. For example:\nThe SQL expression converter factory is used to derive correct result type of computed column, because the date type of computed column from catalog table is not trusted.", "author": "wuchong", "createdAt": "2020-05-25T03:21:34Z", "path": "flink-table/flink-table-planner-blink/src/main/java/org/apache/flink/table/planner/catalog/CatalogCalciteSchema.java", "diffHunk": "@@ -42,10 +43,16 @@\n \tprivate final CatalogManager catalogManager;\n \t// Flag that tells if the current planner should work in a batch or streaming mode.\n \tprivate final boolean isStreamingMode;\n+\tprivate final SqlExprToRexConverterFactory converterFactory;", "originalCommit": "081a62a66ef0a1b687b10e6b41ed8066b0c7992d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cb99a301a3d1625909fbf94e8543e3a7b0726685", "chunk": "diff --git a/flink-table/flink-table-planner-blink/src/main/java/org/apache/flink/table/planner/catalog/CatalogCalciteSchema.java b/flink-table/flink-table-planner-blink/src/main/java/org/apache/flink/table/planner/catalog/CatalogCalciteSchema.java\nindex b6ba6ae7e3..a216097309 100644\n--- a/flink-table/flink-table-planner-blink/src/main/java/org/apache/flink/table/planner/catalog/CatalogCalciteSchema.java\n+++ b/flink-table/flink-table-planner-blink/src/main/java/org/apache/flink/table/planner/catalog/CatalogCalciteSchema.java\n\n@@ -43,6 +43,8 @@ public class CatalogCalciteSchema extends FlinkSchema {\n \tprivate final CatalogManager catalogManager;\n \t// Flag that tells if the current planner should work in a batch or streaming mode.\n \tprivate final boolean isStreamingMode;\n+\t// The SQL expression converter factory is used to derive correct result type of computed column,\n+\t// because the date type of computed column from catalog table is not trusted.\n \tprivate final SqlExprToRexConverterFactory converterFactory;\n \n \tpublic CatalogCalciteSchema(\n"}}, {"oid": "cb99a301a3d1625909fbf94e8543e3a7b0726685", "url": "https://github.com/apache/flink/commit/cb99a301a3d1625909fbf94e8543e3a7b0726685", "message": "Fix comments&case", "committedDate": "2020-05-25T05:51:06Z", "type": "commit"}]}