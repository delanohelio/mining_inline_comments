{"pr_number": 12090, "pr_title": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in PostgresCatalog", "pr_createdAt": "2020-05-11T21:53:29Z", "pr_url": "https://github.com/apache/flink/pull/12090", "timeline": [{"oid": "571fa7b8465f82b73e1d1b78fb765fda4ec3a338", "url": "https://github.com/apache/flink/commit/571fa7b8465f82b73e1d1b78fb765fda4ec3a338", "message": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in PostgresCatalog", "committedDate": "2020-05-16T07:41:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA3NjY3NQ==", "url": "https://github.com/apache/flink/pull/12090#discussion_r427076675", "bodyText": "The note looks strange after we removed decimal switch, how about remove this note or list all alias :\n\n// Postgres jdbc driver maps several alias to real type, we use real type rather than alias.\n// smallint <=> int2\n// integer <=> int4\n// int <=> int4\n// bigint <=> int8\n// float <=> float8\n// boolean <=> bool\n// decimal <=> numeric", "author": "leonardBang", "createdAt": "2020-05-19T07:09:56Z", "path": "flink-connectors/flink-connector-jdbc/src/main/java/org/apache/flink/connector/jdbc/catalog/PostgresCatalog.java", "diffHunk": "@@ -258,6 +256,8 @@ private DataType fromJDBCType(ResultSetMetaData metadata, int colIndex) throws S\n \t\tint precision = metadata.getPrecision(colIndex);\n \t\tint scale = metadata.getScale(colIndex);\n \n+\t\t// pg types that gets replaced by jdbc driver:\n+\t    // - decimal => numeric", "originalCommit": "571fa7b8465f82b73e1d1b78fb765fda4ec3a338", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzEzMjgzNw==", "url": "https://github.com/apache/flink/pull/12090#discussion_r427132837", "bodyText": "I wanted to add the other comments in the other PR (pr #11900) to support serial fields..but I can list all of them here and avoid to add some of them in the other PR", "author": "fpompermaier", "createdAt": "2020-05-19T08:45:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA3NjY3NQ=="}], "type": "inlineReview", "revised_code": {"commit": "29252f270a654406deb02ed0f0e552605c476b68", "chunk": "diff --git a/flink-connectors/flink-connector-jdbc/src/main/java/org/apache/flink/connector/jdbc/catalog/PostgresCatalog.java b/flink-connectors/flink-connector-jdbc/src/main/java/org/apache/flink/connector/jdbc/catalog/PostgresCatalog.java\nindex 7e3ec288d5f..495dacb09c6 100644\n--- a/flink-connectors/flink-connector-jdbc/src/main/java/org/apache/flink/connector/jdbc/catalog/PostgresCatalog.java\n+++ b/flink-connectors/flink-connector-jdbc/src/main/java/org/apache/flink/connector/jdbc/catalog/PostgresCatalog.java\n\n@@ -250,6 +258,11 @@ public class PostgresCatalog extends AbstractJdbcCatalog {\n \tpublic static final String PG_CHARACTER_VARYING = \"varchar\";\n \tpublic static final String PG_CHARACTER_VARYING_ARRAY = \"_varchar\";\n \n+\t/**\n+\t * Converts Postgres type to Flink {@link DataType}.\n+\t *\n+\t * @see org.postgresql.jdbc.TypeInfoCache\n+\t */\n \tprivate DataType fromJDBCType(ResultSetMetaData metadata, int colIndex) throws SQLException {\n \t\tString pgType = metadata.getColumnTypeName(colIndex);\n \n"}}, {"oid": "c6f506b50b8728300915c3353e606a807ac1c0c5", "url": "https://github.com/apache/flink/commit/c6f506b50b8728300915c3353e606a807ac1c0c5", "message": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in\nPostgresCatalog", "committedDate": "2020-05-19T12:20:28Z", "type": "commit"}, {"oid": "c6f506b50b8728300915c3353e606a807ac1c0c5", "url": "https://github.com/apache/flink/commit/c6f506b50b8728300915c3353e606a807ac1c0c5", "message": "[FLINK-17622][connectors / jdbc] Remove useless switch for decimal in\nPostgresCatalog", "committedDate": "2020-05-19T12:20:28Z", "type": "forcePushed"}, {"oid": "29252f270a654406deb02ed0f0e552605c476b68", "url": "https://github.com/apache/flink/commit/29252f270a654406deb02ed0f0e552605c476b68", "message": "add reference to postgres jdbc type definition", "committedDate": "2020-05-20T06:35:02Z", "type": "commit"}]}