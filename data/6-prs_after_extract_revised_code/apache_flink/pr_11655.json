{"pr_number": 11655, "pr_title": "[FLINK-14162][runtime] SchedulerOperations#allocateSlotsAndDeploy always deploys tasks in a bulk", "pr_createdAt": "2020-04-07T10:03:04Z", "pr_url": "https://github.com/apache/flink/pull/11655", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI3ODE1OA==", "url": "https://github.com/apache/flink/pull/11655#discussion_r405278158", "bodyText": "We normally add the static import when using matchers.", "author": "GJL", "createdAt": "2020-04-08T06:05:19Z", "path": "flink-runtime/src/test/java/org/apache/flink/runtime/scheduler/strategy/LazyFromSourcesSchedulingStrategyTest.java", "diffHunk": "@@ -351,9 +354,13 @@ private LazyFromSourcesSchedulingStrategy startScheduling(TestingSchedulingTopol\n \t}\n \n \tprivate void assertLatestScheduledVerticesAreEqualTo(final List<TestingSchedulingExecutionVertex> expected) {\n-\t\tassertEquals(\n-\t\t\tidsFromVertices(expected),\n-\t\t\tidsFromDeploymentOptions(testingSchedulerOperation.getLatestScheduledVertices()));\n+\t\tfinal List<List<ExecutionVertexDeploymentOption>> deploymentOptions = testingSchedulerOperation.getScheduledVertices();\n+\t\tassertThat(expected.size(), Matchers.lessThanOrEqualTo(deploymentOptions.size()));", "originalCommit": "ce5175a1aecc627af31edf06d88028591a2e1b50", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI4MTI2OA==", "url": "https://github.com/apache/flink/pull/11655#discussion_r405281268", "bodyText": "OK. I will do it along with rebasing this change.", "author": "zhuzhurk", "createdAt": "2020-04-08T06:14:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI3ODE1OA=="}], "type": "inlineReview", "revised_code": {"commit": "737dca31661b75fec6d9152b50e1a6e9986efbaa", "chunk": "diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/scheduler/strategy/LazyFromSourcesSchedulingStrategyTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/scheduler/strategy/LazyFromSourcesSchedulingStrategyTest.java\nindex 85cf99717a3..a4ffe995259 100644\n--- a/flink-runtime/src/test/java/org/apache/flink/runtime/scheduler/strategy/LazyFromSourcesSchedulingStrategyTest.java\n+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/scheduler/strategy/LazyFromSourcesSchedulingStrategyTest.java\n\n@@ -355,7 +355,7 @@ public class LazyFromSourcesSchedulingStrategyTest extends TestLogger {\n \n \tprivate void assertLatestScheduledVerticesAreEqualTo(final List<TestingSchedulingExecutionVertex> expected) {\n \t\tfinal List<List<ExecutionVertexDeploymentOption>> deploymentOptions = testingSchedulerOperation.getScheduledVertices();\n-\t\tassertThat(expected.size(), Matchers.lessThanOrEqualTo(deploymentOptions.size()));\n+\t\tassertThat(expected.size(), lessThanOrEqualTo(deploymentOptions.size()));\n \t\tfor (int i = 0; i < expected.size(); i++) {\n \t\t\tassertEquals(\n \t\t\t\tidsFromVertices(Collections.singletonList(expected.get(expected.size() - i - 1))),\n"}}, {"oid": "737dca31661b75fec6d9152b50e1a6e9986efbaa", "url": "https://github.com/apache/flink/commit/737dca31661b75fec6d9152b50e1a6e9986efbaa", "message": "[FLINK-14162][runtime] SchedulerOperations#allocateSlotsAndDeploy always deploys tasks in a bulk", "committedDate": "2020-04-08T06:31:55Z", "type": "commit"}, {"oid": "737dca31661b75fec6d9152b50e1a6e9986efbaa", "url": "https://github.com/apache/flink/commit/737dca31661b75fec6d9152b50e1a6e9986efbaa", "message": "[FLINK-14162][runtime] SchedulerOperations#allocateSlotsAndDeploy always deploys tasks in a bulk", "committedDate": "2020-04-08T06:31:55Z", "type": "forcePushed"}]}