{"pr_number": 1360, "pr_title": "KYLIN-4688 Too many tmp files in HDFS tmp dictionary", "pr_createdAt": "2020-08-14T09:53:17Z", "pr_url": "https://github.com/apache/kylin/pull/1360", "timeline": [{"oid": "4471b1b4f73cbc11ff5ceabf1de71564180edb8a", "url": "https://github.com/apache/kylin/commit/4471b1b4f73cbc11ff5ceabf1de71564180edb8a", "message": "KYLIN-4688 Too many tmp files in HDFS tmp dictionary", "committedDate": "2020-08-14T09:51:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4OTE3Mw==", "url": "https://github.com/apache/kylin/pull/1360#discussion_r472589173", "bodyText": "The value get from 'TotalOrderPartitioner.getPartitionFile' will be changed in method 'reconfigurePartitions', are you sure that the value of  'tmpPartitionFilePath' is right?", "author": "zzcclp", "createdAt": "2020-08-19T01:53:21Z", "path": "storage-hbase/src/main/java/org/apache/kylin/storage/hbase/steps/CubeHFileJob.java", "diffHunk": "@@ -101,6 +102,7 @@ public int run(String[] args) throws Exception {\n \n             // Automatic config !\n             HFileOutputFormat3.configureIncrementalLoad(job, htable);\n+            tmpPartitionFilePath = new Path(TotalOrderPartitioner.getPartitionFile(job.getConfiguration()));", "originalCommit": "4471b1b4f73cbc11ff5ceabf1de71564180edb8a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjYxNzE4Ng==", "url": "https://github.com/apache/kylin/pull/1360#discussion_r472617186", "bodyText": "I\u2018m sure\uff0cthat\u2018s why I put  'TotalOrderPartitioner.getPartitionFile' up on the 'reconfigurePartitions'.", "author": "ITzhangqiang", "createdAt": "2020-08-19T02:51:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4OTE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjczMTY0Nw==", "url": "https://github.com/apache/kylin/pull/1360#discussion_r472731647", "bodyText": "Got it.", "author": "zzcclp", "createdAt": "2020-08-19T05:54:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4OTE3Mw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4OTc5OQ==", "url": "https://github.com/apache/kylin/pull/1360#discussion_r472589799", "bodyText": "There are some places calling this method, please check whether impact others.", "author": "zzcclp", "createdAt": "2020-08-19T01:55:25Z", "path": "core-common/src/main/java/org/apache/kylin/common/util/HadoopUtil.java", "diffHunk": "@@ -69,13 +68,6 @@ public static Configuration getCurrentConfiguration() {\n     }\n \n     public static Configuration healSickConfig(Configuration conf) {\n-        // https://issues.apache.org/jira/browse/KYLIN-953", "originalCommit": "4471b1b4f73cbc11ff5ceabf1de71564180edb8a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjYzMDU0Mg==", "url": "https://github.com/apache/kylin/pull/1360#discussion_r472630542", "bodyText": "I checked,there is no affects on others.Because these two configurations belong to Hbase, where Hbase is used, HbaseConnection is used to get the configuration.And in HBaseConnection#newHBaseConfiguration,special treatment is given to these two configurations in this method.", "author": "ITzhangqiang", "createdAt": "2020-08-19T03:12:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4OTc5OQ=="}], "type": "inlineReview", "revised_code": null}]}