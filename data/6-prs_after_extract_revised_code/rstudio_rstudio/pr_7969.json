{"pr_number": 7969, "pr_title": "added global option to disable clickable hyperlinks (fixes #6689)", "pr_createdAt": "2020-10-05T19:36:22Z", "pr_url": "https://github.com/rstudio/rstudio/pull/7969", "timeline": [{"oid": "a8f84cb9aa09cbb77caea7501fb3516f44813b6e", "url": "https://github.com/rstudio/rstudio/commit/a8f84cb9aa09cbb77caea7501fb3516f44813b6e", "message": "add checkbox and toggle; WIP .bind() method (#6689)", "committedDate": "2020-05-22T19:54:32Z", "type": "commit"}, {"oid": "24812bc412a1e5ad03eff704859f98c37512e863", "url": "https://github.com/rstudio/rstudio/commit/24812bc412a1e5ad03eff704859f98c37512e863", "message": "invoking UserPrefs method", "committedDate": "2020-06-09T22:03:06Z", "type": "commit"}, {"oid": "831096a7a0277c9b2006b9dbf94551c5bf863379", "url": "https://github.com/rstudio/rstudio/commit/831096a7a0277c9b2006b9dbf94551c5bf863379", "message": "tinkering", "committedDate": "2020-06-24T19:15:10Z", "type": "commit"}, {"oid": "62bcdff5ffb11796896bf804bff0fb071258fd75", "url": "https://github.com/rstudio/rstudio/commit/62bcdff5ffb11796896bf804bff0fb071258fd75", "message": "this compiles...", "committedDate": "2020-06-25T17:27:12Z", "type": "commit"}, {"oid": "81942b6f9095f03b36dc6eba471a532894d8bab5", "url": "https://github.com/rstudio/rstudio/commit/81942b6f9095f03b36dc6eba471a532894d8bab5", "message": "per discussion on issue (#6689)", "committedDate": "2020-06-25T20:53:43Z", "type": "commit"}, {"oid": "8f187674abceb10bc882257acf7738159a428344", "url": "https://github.com/rstudio/rstudio/commit/8f187674abceb10bc882257acf7738159a428344", "message": "tinkering Friday", "committedDate": "2020-06-26T21:44:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkyMTU4Mg==", "url": "https://github.com/rstudio/rstudio/pull/7969#discussion_r499921582", "bodyText": "Nit: the indentation's off here by a couple of spaces (brace is less indented than if)", "author": "jmcphers", "createdAt": "2020-10-05T23:14:59Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java", "diffHunk": "@@ -147,7 +153,22 @@ public void execute()\n          {\n             TextFileType fileType = editor_.getFileType();\n             highlighters_.clear();\n-            highlighters_.add(webLinkHighlighter());\n+            if (pUserPrefs_.get().highlightWebLink().getValue())\n+\t    {", "originalCommit": "8f187674abceb10bc882257acf7738159a428344", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTk2MDA5Mg==", "url": "https://github.com/rstudio/rstudio/pull/7969#discussion_r499960092", "bodyText": "Addressed in 70cd3b7.", "author": "paulkaefer", "createdAt": "2020-10-06T01:39:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkyMTU4Mg=="}], "type": "inlineReview", "revised_code": {"commit": "70cd3b7d10583e300c0fd92394c7403fa2d89031", "chunk": "diff --git a/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java b/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java\nindex 91518a618f..e980ef91a5 100644\n--- a/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java\n+++ b/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java\n\n@@ -153,21 +153,17 @@ public class AceEditorBackgroundLinkHighlighter\n          {\n             TextFileType fileType = editor_.getFileType();\n             highlighters_.clear();\n-            if (pUserPrefs_.get().highlightWebLink().getValue())\n-\t    {\n-               highlighters_.add(webLinkHighlighter());\n-\t    }\n-\t    pUserPrefs_.get().highlightWebLink().bind(\n+\t        pUserPrefs_.get().highlightWebLink().bind(\n \t\t    new CommandWithArg<Boolean>() {\n \t\t       public void execute(Boolean arg) {\n-\t\t\t  if (arg)\n-\t\t\t  {\n-\t\t\t\thighlighters_.add(webLinkHighlighter());\n-\t\t\t  }\n-\t\t\t  else\n-\t  \t\t  {\n-\t\t\t\thighlighters_.remove(webLinkHighlighter());\n-\t\t\t  }\n+\t\t\t      if (arg)\n+\t\t\t      {\n+\t\t\t\t     highlighters_.add(webLinkHighlighter());\n+\t\t\t      }\n+\t\t\t      else\n+\t  \t\t      {\n+\t\t\t\t     highlighters_.remove(webLinkHighlighter());\n+\t\t\t      }\n \t\t       }});\n             if (fileType != null && (fileType.isMarkdown() || fileType.isRmd()))\n                highlighters_.add(markdownLinkHighlighter());\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkyMTg2Mg==", "url": "https://github.com/rstudio/rstudio/pull/7969#discussion_r499921862", "bodyText": "I think you can remove this line entirely since bind() will fire an event for the initial value of the preference.", "author": "jmcphers", "createdAt": "2020-10-05T23:15:56Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java", "diffHunk": "@@ -147,7 +153,22 @@ public void execute()\n          {\n             TextFileType fileType = editor_.getFileType();\n             highlighters_.clear();\n-            highlighters_.add(webLinkHighlighter());\n+            if (pUserPrefs_.get().highlightWebLink().getValue())\n+\t    {\n+               highlighters_.add(webLinkHighlighter());", "originalCommit": "8f187674abceb10bc882257acf7738159a428344", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTk2MDExOQ==", "url": "https://github.com/rstudio/rstudio/pull/7969#discussion_r499960119", "bodyText": "Fixed in 70cd3b7.", "author": "paulkaefer", "createdAt": "2020-10-06T01:39:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkyMTg2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "70cd3b7d10583e300c0fd92394c7403fa2d89031", "chunk": "diff --git a/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java b/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java\nindex 91518a618f..e980ef91a5 100644\n--- a/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java\n+++ b/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/ace/AceEditorBackgroundLinkHighlighter.java\n\n@@ -153,21 +153,17 @@ public class AceEditorBackgroundLinkHighlighter\n          {\n             TextFileType fileType = editor_.getFileType();\n             highlighters_.clear();\n-            if (pUserPrefs_.get().highlightWebLink().getValue())\n-\t    {\n-               highlighters_.add(webLinkHighlighter());\n-\t    }\n-\t    pUserPrefs_.get().highlightWebLink().bind(\n+\t        pUserPrefs_.get().highlightWebLink().bind(\n \t\t    new CommandWithArg<Boolean>() {\n \t\t       public void execute(Boolean arg) {\n-\t\t\t  if (arg)\n-\t\t\t  {\n-\t\t\t\thighlighters_.add(webLinkHighlighter());\n-\t\t\t  }\n-\t\t\t  else\n-\t  \t\t  {\n-\t\t\t\thighlighters_.remove(webLinkHighlighter());\n-\t\t\t  }\n+\t\t\t      if (arg)\n+\t\t\t      {\n+\t\t\t\t     highlighters_.add(webLinkHighlighter());\n+\t\t\t      }\n+\t\t\t      else\n+\t  \t\t      {\n+\t\t\t\t     highlighters_.remove(webLinkHighlighter());\n+\t\t\t      }\n \t\t       }});\n             if (fileType != null && (fileType.isMarkdown() || fileType.isRmd()))\n                highlighters_.add(markdownLinkHighlighter());\n"}}, {"oid": "70cd3b7d10583e300c0fd92394c7403fa2d89031", "url": "https://github.com/rstudio/rstudio/commit/70cd3b7d10583e300c0fd92394c7403fa2d89031", "message": "fix indent & rm unnecessary, per #7969", "committedDate": "2020-10-06T01:38:43Z", "type": "commit"}, {"oid": "f1baeb23928d561c2c61cade53d49acc24f73a4b", "url": "https://github.com/rstudio/rstudio/commit/f1baeb23928d561c2c61cade53d49acc24f73a4b", "message": "Merge branch 'master' into master", "committedDate": "2020-10-06T15:49:36Z", "type": "commit"}]}