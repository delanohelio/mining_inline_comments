{"pr_number": 7322, "pr_title": "Fix up toolbar buttons and commands", "pr_createdAt": "2020-07-10T23:15:49Z", "pr_url": "https://github.com/rstudio/rstudio/pull/7322", "timeline": [{"oid": "eaf1fcbba6b1007faf4fd71948631511df6e7722", "url": "https://github.com/rstudio/rstudio/commit/eaf1fcbba6b1007faf4fd71948631511df6e7722", "message": "properly display buttons on toolbar on start up and\nallow specified buttons to not be synced with their toolbar", "committedDate": "2020-07-10T23:08:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgzNTE1NQ==", "url": "https://github.com/rstudio/rstudio/pull/7322#discussion_r453835155", "bodyText": "I'd love a comment briefly describing what \"synced\" means, even just a single-line // foo bar style here.", "author": "gtritchie", "createdAt": "2020-07-13T18:07:54Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceAppCommand.java", "diffHunk": "@@ -40,24 +40,32 @@ public CommandSourceColumnToolbarButton(SourceAppCommand sourceCmd,\n                                               String buttonLabel,\n                                               String buttonTitle,\n                                               ImageResourceProvider imageResourceProvider,\n-                                              ClickHandler clickHandler)\n+                                              ClickHandler clickHandler,\n+                                              boolean synced)", "originalCommit": "eaf1fcbba6b1007faf4fd71948631511df6e7722", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d7843ed4a3bc4bdb41a02a0133d748addbfac92b", "chunk": "diff --git a/src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceAppCommand.java b/src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceAppCommand.java\nindex f0f89dadcd..dca1e5a266 100644\n--- a/src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceAppCommand.java\n+++ b/src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceAppCommand.java\n\n@@ -41,6 +41,7 @@ public class SourceAppCommand\n                                               String buttonTitle,\n                                               ImageResourceProvider imageResourceProvider,\n                                               ClickHandler clickHandler,\n+                                              /* false when button is managed elsewhere */\n                                               boolean synced)\n       {\n          super(buttonLabel, buttonTitle, imageResourceProvider, clickHandler);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg0MzkyOQ==", "url": "https://github.com/rstudio/rstudio/pull/7322#discussion_r453843929", "bodyText": "I'm not a big fan of boolean arguments like these (though I know we do it a lot, and I've written a bunch of code that does it, too). So this is absolutely just me thinking out loud, no real need to change anything.\nAlternatives include creating a separate method, e.g.\n.createUnsyncedToolbarButton()\nCommenting the argument:\n.createToolbarButton(false/*synced*/)\nPass an enum, instead (public enum SyncType { UNSYNCED, SYNCED }).", "author": "gtritchie", "createdAt": "2020-07-13T18:23:31Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/TextEditingTargetWidget.java", "diffHunk": "@@ -351,7 +351,7 @@ private Toolbar createToolbar(TextFileType fileType)\n       toolbar.addLeftWidget(previewHTMLButton_ =\n          mgr.getSourceCommand(commands_.previewHTML(), column_).createToolbarButton());\n       knitDocumentButton_ =\n-         mgr.getSourceCommand(commands_.knitDocument(), column_).createToolbarButton();\n+         mgr.getSourceCommand(commands_.knitDocument(), column_).createToolbarButton(false);", "originalCommit": "eaf1fcbba6b1007faf4fd71948631511df6e7722", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg3MjM5NQ==", "url": "https://github.com/rstudio/rstudio/pull/7322#discussion_r453872395", "bodyText": "I like .createUnsyncedToolbarButton and switched to that.", "author": "melissa-barca", "createdAt": "2020-07-13T19:12:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg0MzkyOQ=="}], "type": "inlineReview", "revised_code": {"commit": "d7843ed4a3bc4bdb41a02a0133d748addbfac92b", "chunk": "diff --git a/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/TextEditingTargetWidget.java b/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/TextEditingTargetWidget.java\nindex 6001381349..3e5f3f2df9 100644\n--- a/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/TextEditingTargetWidget.java\n+++ b/src/gwt/src/org/rstudio/studio/client/workbench/views/source/editors/text/TextEditingTargetWidget.java\n\n@@ -351,7 +351,7 @@ public class TextEditingTargetWidget\n       toolbar.addLeftWidget(previewHTMLButton_ =\n          mgr.getSourceCommand(commands_.previewHTML(), column_).createToolbarButton());\n       knitDocumentButton_ =\n-         mgr.getSourceCommand(commands_.knitDocument(), column_).createToolbarButton(false);\n+         mgr.getSourceCommand(commands_.knitDocument(), column_).createUnsyncedToolbarButton();\n       knitDocumentButton_.getElement().getStyle().setMarginRight(0, Unit.PX);\n       toolbar.addLeftWidget(knitDocumentButton_);\n \n"}}, {"oid": "d7843ed4a3bc4bdb41a02a0133d748addbfac92b", "url": "https://github.com/rstudio/rstudio/commit/d7843ed4a3bc4bdb41a02a0133d748addbfac92b", "message": "rename function to make calls more clear", "committedDate": "2020-07-13T19:11:53Z", "type": "commit"}]}