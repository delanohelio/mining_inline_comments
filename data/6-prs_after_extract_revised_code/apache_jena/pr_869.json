{"pr_number": 869, "pr_title": "Release preparation", "pr_createdAt": "2020-11-22T13:02:56Z", "pr_url": "https://github.com/apache/jena/pull/869", "timeline": [{"oid": "65e3dec1a3422cd4530995f556b51c55024e48a5", "url": "https://github.com/apache/jena/commit/65e3dec1a3422cd4530995f556b51c55024e48a5", "message": "Add webapp logging settings in case this file is used (development)", "committedDate": "2020-11-22T12:49:00Z", "type": "commit"}, {"oid": "cea9a99a5368077c42077f6438aa7687f8496202", "url": "https://github.com/apache/jena/commit/cea9a99a5368077c42077f6438aa7687f8496202", "message": "Vars for OpFind", "committedDate": "2020-11-22T12:50:09Z", "type": "commit"}, {"oid": "e45a0420e66b473017e920966e058474b97a1ea8", "url": "https://github.com/apache/jena/commit/e45a0420e66b473017e920966e058474b97a1ea8", "message": "Better Fuseki setup", "committedDate": "2020-11-22T12:51:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQwMzQzNQ==", "url": "https://github.com/apache/jena/pull/869#discussion_r528403435", "bodyText": "missing space after comma (just in case it might be picked later by linter/IDE/etc?)", "author": "kinow", "createdAt": "2020-11-22T20:58:49Z", "path": "jena-fuseki2/jena-fuseki-webapp/src/main/java/org/apache/jena/fuseki/mgt/Backup.java", "diffHunk": "@@ -61,18 +61,15 @@ public static String chooseFileName(String dsName) {\n     // same dataset multiple times at the same time.\n     private static Set<DatasetGraph> activeBackups = Collections.newSetFromMap(new ConcurrentHashMap<>());\n \n-    /** Perform a backup.\n-     *  A backup is a dump of the dataset in compressed N-Quads, done inside a transaction.\n+    /**\n+     * Perform a backup.\n+     * <p>\n+     * A backup is a dump of the dataset in compressed N-Quads, done inside a transaction.\n      */\n     public static void backup(Transactional transactional, DatasetGraph dsg, String backupfile) {\n         if ( transactional == null )\n             transactional = new TransactionalNull();\n-        transactional.begin(ReadWrite.READ);\n-        try {\n-            Backup.backup(dsg, backupfile);\n-        } finally {\n-            transactional.end();\n-        }\n+        Txn.executeRead(transactional,()->backup(dsg, backupfile));", "originalCommit": "2c3c68b06b19e29e7aaa09d7e9c2c3cd4f68a324", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY5ODA2OA==", "url": "https://github.com/apache/jena/pull/869#discussion_r528698068", "bodyText": "Fixed!", "author": "afs", "createdAt": "2020-11-23T13:21:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQwMzQzNQ=="}], "type": "inlineReview", "revised_code": {"commit": "29cd5c11917f3ae5bc1777d870f4263471f5f646", "chunk": "diff --git a/jena-fuseki2/jena-fuseki-webapp/src/main/java/org/apache/jena/fuseki/mgt/Backup.java b/jena-fuseki2/jena-fuseki-webapp/src/main/java/org/apache/jena/fuseki/mgt/Backup.java\nindex 64ecd9302e..a489324c8c 100644\n--- a/jena-fuseki2/jena-fuseki-webapp/src/main/java/org/apache/jena/fuseki/mgt/Backup.java\n+++ b/jena-fuseki2/jena-fuseki-webapp/src/main/java/org/apache/jena/fuseki/mgt/Backup.java\n\n@@ -69,7 +69,7 @@ public class Backup\n     public static void backup(Transactional transactional, DatasetGraph dsg, String backupfile) {\n         if ( transactional == null )\n             transactional = new TransactionalNull();\n-        Txn.executeRead(transactional,()->backup(dsg, backupfile));\n+        Txn.executeRead(transactional, ()->backup(dsg, backupfile));\n     }\n \n     /** Perform a backup.\n"}}, {"oid": "29cd5c11917f3ae5bc1777d870f4263471f5f646", "url": "https://github.com/apache/jena/commit/29cd5c11917f3ae5bc1777d870f4263471f5f646", "message": "JENA-1987: Checking during request processing", "committedDate": "2020-11-23T13:08:54Z", "type": "commit"}, {"oid": "29cd5c11917f3ae5bc1777d870f4263471f5f646", "url": "https://github.com/apache/jena/commit/29cd5c11917f3ae5bc1777d870f4263471f5f646", "message": "JENA-1987: Checking during request processing", "committedDate": "2020-11-23T13:08:54Z", "type": "forcePushed"}]}