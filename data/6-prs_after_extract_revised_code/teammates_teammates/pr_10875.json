{"pr_number": 10875, "pr_title": "[#10874] Migrate CI to Github Actions", "pr_createdAt": "2020-12-13T04:57:50Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10875", "timeline": [{"oid": "a30a7325de52438d49bf30bd39ceb667f441ce3c", "url": "https://github.com/TEAMMATES/teammates/commit/a30a7325de52438d49bf30bd39ceb667f441ce3c", "message": "update property files", "committedDate": "2020-12-12T03:55:18Z", "type": "commit"}, {"oid": "bcb27eb4744a6019afe27686fde7da8cae61f36c", "url": "https://github.com/TEAMMATES/teammates/commit/bcb27eb4744a6019afe27686fde7da8cae61f36c", "message": "Add CI workflow", "committedDate": "2020-12-12T03:55:31Z", "type": "commit"}, {"oid": "400350b1d7ef16c1610da195003c2e49ea44f054", "url": "https://github.com/TEAMMATES/teammates/commit/400350b1d7ef16c1610da195003c2e49ea44f054", "message": "Update temporary branch for testing action", "committedDate": "2020-12-12T03:56:32Z", "type": "commit"}, {"oid": "d90b18d598251d41706f7212ed3923839810fb39", "url": "https://github.com/TEAMMATES/teammates/commit/d90b18d598251d41706f7212ed3923839810fb39", "message": "Try increase timeout to prevent tests from failing", "committedDate": "2020-12-12T04:24:53Z", "type": "commit"}, {"oid": "d6cfe8918b8b76833e0009e51303b368fc803eac", "url": "https://github.com/TEAMMATES/teammates/commit/d6cfe8918b8b76833e0009e51303b368fc803eac", "message": "Update InstructorFeedbackSessionsPage new session panel lookup", "committedDate": "2020-12-12T04:50:01Z", "type": "commit"}, {"oid": "7d7c39d2943a2105d9e2a34bcdafa4160414d00c", "url": "https://github.com/TEAMMATES/teammates/commit/7d7c39d2943a2105d9e2a34bcdafa4160414d00c", "message": "Try update timeout values again", "committedDate": "2020-12-12T10:40:46Z", "type": "commit"}, {"oid": "a25efab8294e6ca0c782872f7664064cf40d717a", "url": "https://github.com/TEAMMATES/teammates/commit/a25efab8294e6ca0c782872f7664064cf40d717a", "message": "modify xvfb screen resolution", "committedDate": "2020-12-12T16:04:17Z", "type": "commit"}, {"oid": "2af9d32b674dccf0779cefe714017ffbb8c076df", "url": "https://github.com/TEAMMATES/teammates/commit/2af9d32b674dccf0779cefe714017ffbb8c076df", "message": "reduce timeout period", "committedDate": "2020-12-12T17:01:50Z", "type": "commit"}, {"oid": "4dfe0ebf673b5a1a7003eec640756fb8f8ea30f9", "url": "https://github.com/TEAMMATES/teammates/commit/4dfe0ebf673b5a1a7003eec640756fb8f8ea30f9", "message": "revert change to InstructorFeedbackSessionsPage", "committedDate": "2020-12-12T17:24:52Z", "type": "commit"}, {"oid": "a1cd4ff11449563c9cae9b80c18185205dad51f0", "url": "https://github.com/TEAMMATES/teammates/commit/a1cd4ff11449563c9cae9b80c18185205dad51f0", "message": "add windows testing", "committedDate": "2020-12-12T17:29:28Z", "type": "commit"}, {"oid": "3583b4f4b6918748c8a6f27045948908817fb588", "url": "https://github.com/TEAMMATES/teammates/commit/3583b4f4b6918748c8a6f27045948908817fb588", "message": "upload to codecov only on ubuntu + remove bash shell req", "committedDate": "2020-12-13T04:37:01Z", "type": "commit"}, {"oid": "0e6fd73c28dfdf4f9e4a72f1e559c52b02cfaf5d", "url": "https://github.com/TEAMMATES/teammates/commit/0e6fd73c28dfdf4f9e4a72f1e559c52b02cfaf5d", "message": "update branches to run action on", "committedDate": "2020-12-13T04:53:33Z", "type": "commit"}, {"oid": "0f746fbc25ef4a44bf4fb1ae9162b7679cb2f2be", "url": "https://github.com/TEAMMATES/teammates/commit/0f746fbc25ef4a44bf4fb1ae9162b7679cb2f2be", "message": "remove chromedrive path check", "committedDate": "2020-12-13T04:58:38Z", "type": "commit"}, {"oid": "4015fc83d849d96c0c3840ac3d227b5285a20f88", "url": "https://github.com/TEAMMATES/teammates/commit/4015fc83d849d96c0c3840ac3d227b5285a20f88", "message": "wait for text to load in dropdown before finding", "committedDate": "2020-12-13T07:25:29Z", "type": "commit"}, {"oid": "0027e9221ba0ee44150d8f6eebfb06dfba2f2bb9", "url": "https://github.com/TEAMMATES/teammates/commit/0027e9221ba0ee44150d8f6eebfb06dfba2f2bb9", "message": "temporarily add my own branch for testing [will remove this commit]", "committedDate": "2020-12-13T07:25:32Z", "type": "forcePushed"}, {"oid": "ef039ccfee337d8f3db17aae1e70c6c284682e6a", "url": "https://github.com/TEAMMATES/teammates/commit/ef039ccfee337d8f3db17aae1e70c6c284682e6a", "message": "readd travis property files (dont break travis yet)", "committedDate": "2020-12-13T08:34:50Z", "type": "forcePushed"}, {"oid": "d2f2986a671d12910fbe81316a06132aba69c5b9", "url": "https://github.com/TEAMMATES/teammates/commit/d2f2986a671d12910fbe81316a06132aba69c5b9", "message": "Add travis property files back (don't break travis yet)", "committedDate": "2020-12-13T08:35:24Z", "type": "commit"}, {"oid": "d2f2986a671d12910fbe81316a06132aba69c5b9", "url": "https://github.com/TEAMMATES/teammates/commit/d2f2986a671d12910fbe81316a06132aba69c5b9", "message": "Add travis property files back (don't break travis yet)", "committedDate": "2020-12-13T08:35:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg4NTk5OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10875#discussion_r541885998", "bodyText": "It is overkill to use this method if just waiting for one specific item to load", "author": "wkurniawan07", "createdAt": "2020-12-13T09:29:49Z", "path": "src/e2e/java/teammates/e2e/pageobjects/AppPage.java", "diffHunk": "@@ -429,6 +429,10 @@ protected void markOptionAsUnselected(WebElement option) {\n      */\n     protected String getSelectedDropdownOptionText(WebElement dropdown) {\n         Select select = new Select(dropdown);\n+\n+        //wait for dropdown text to load\n+        this.waitForPageToLoad();", "originalCommit": "d2f2986a671d12910fbe81316a06132aba69c5b9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkwODc4Mg==", "url": "https://github.com/TEAMMATES/teammates/pull/10875#discussion_r541908782", "bodyText": "Yes, will look into a better way to wait for the text to be loaded", "author": "rrtheonlyone", "createdAt": "2020-12-13T11:48:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg4NTk5OA=="}], "type": "inlineReview", "revised_code": {"commit": "63fce7bf104f44b0e683ee249d305a871858843c", "chunk": "diff --git a/src/e2e/java/teammates/e2e/pageobjects/AppPage.java b/src/e2e/java/teammates/e2e/pageobjects/AppPage.java\nindex 91b0faa4d1..864a7dd69a 100644\n--- a/src/e2e/java/teammates/e2e/pageobjects/AppPage.java\n+++ b/src/e2e/java/teammates/e2e/pageobjects/AppPage.java\n\n@@ -429,10 +429,6 @@ public abstract class AppPage {\n      */\n     protected String getSelectedDropdownOptionText(WebElement dropdown) {\n         Select select = new Select(dropdown);\n-\n-        //wait for dropdown text to load\n-        this.waitForPageToLoad();\n-\n         return select.getFirstSelectedOption().getText();\n     }\n \n"}}, {"oid": "064b03f61952723da38bd7a31aa004332d6d536c", "url": "https://github.com/TEAMMATES/teammates/commit/064b03f61952723da38bd7a31aa004332d6d536c", "message": "update workflow based on comments", "committedDate": "2020-12-13T12:18:05Z", "type": "commit"}, {"oid": "a9ed3756f5169cc1e13ce834015e6b19020be150", "url": "https://github.com/TEAMMATES/teammates/commit/a9ed3756f5169cc1e13ce834015e6b19020be150", "message": "make sure java coverage is generated", "committedDate": "2020-12-19T15:41:53Z", "type": "commit"}, {"oid": "63fce7bf104f44b0e683ee249d305a871858843c", "url": "https://github.com/TEAMMATES/teammates/commit/63fce7bf104f44b0e683ee249d305a871858843c", "message": "revert change to AppPage E2E", "committedDate": "2020-12-19T16:05:42Z", "type": "commit"}, {"oid": "9112a3205540f158d2aabe6556fbdca115ebbe90", "url": "https://github.com/TEAMMATES/teammates/commit/9112a3205540f158d2aabe6556fbdca115ebbe90", "message": "Add 2s sleep to wait for dropdown text", "committedDate": "2020-12-19T18:08:19Z", "type": "commit"}, {"oid": "1e13d0934fdf4bcfb601f52e456eae08f8aef2a0", "url": "https://github.com/TEAMMATES/teammates/commit/1e13d0934fdf4bcfb601f52e456eae08f8aef2a0", "message": "Small naming change", "committedDate": "2020-12-20T01:22:54Z", "type": "commit"}, {"oid": "85ca1e578c54cba5a0e46f1088aeff9b095665ad", "url": "https://github.com/TEAMMATES/teammates/commit/85ca1e578c54cba5a0e46f1088aeff9b095665ad", "message": "Merge branch 'master' into migrate-to-ga", "committedDate": "2020-12-20T01:26:24Z", "type": "commit"}, {"oid": "948939fb94530128988f8995a1800a644c20a4c7", "url": "https://github.com/TEAMMATES/teammates/commit/948939fb94530128988f8995a1800a644c20a4c7", "message": "Add 5s sleep for new regen links to be updated", "committedDate": "2020-12-20T04:40:43Z", "type": "commit"}, {"oid": "26d4295b56fb4e6590ecaf977972bc7b656cb31a", "url": "https://github.com/TEAMMATES/teammates/commit/26d4295b56fb4e6590ecaf977972bc7b656cb31a", "message": "Merge with master", "committedDate": "2020-12-20T04:41:35Z", "type": "commit"}, {"oid": "71334db805c4934e20050431edfd3e3b565237ca", "url": "https://github.com/TEAMMATES/teammates/commit/71334db805c4934e20050431edfd3e3b565237ca", "message": "Add 5s sleep for new regen links to be updated", "committedDate": "2020-12-20T04:43:10Z", "type": "commit"}, {"oid": "c67445485babf832730291c768c3d5971b965ba1", "url": "https://github.com/TEAMMATES/teammates/commit/c67445485babf832730291c768c3d5971b965ba1", "message": "Fix typo in yml file", "committedDate": "2020-12-20T14:50:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA0NDczOQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10875#discussion_r549044739", "bodyText": "Use uiRetryManager instead of hard-coded wait?", "author": "wkurniawan07", "createdAt": "2020-12-27T00:04:10Z", "path": "src/e2e/java/teammates/e2e/cases/AdminSearchPageE2ETest.java", "diffHunk": "@@ -60,6 +61,7 @@ public void testAll() {\n         String originalJoinLink = searchPage.getStudentJoinLink(student);\n \n         searchPage.regenerateLinksForStudent(student);\n+        ThreadHelper.waitFor(5000); //wait for links to load", "originalCommit": "c67445485babf832730291c768c3d5971b965ba1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e50413baa25aac469c617af55ef7ec18bbc21057", "chunk": "diff --git a/src/e2e/java/teammates/e2e/cases/AdminSearchPageE2ETest.java b/src/e2e/java/teammates/e2e/cases/AdminSearchPageE2ETest.java\nindex 385b9f8541..8cfb97528c 100644\n--- a/src/e2e/java/teammates/e2e/cases/AdminSearchPageE2ETest.java\n+++ b/src/e2e/java/teammates/e2e/cases/AdminSearchPageE2ETest.java\n\n@@ -61,7 +61,6 @@ public class AdminSearchPageE2ETest extends BaseE2ETestCase {\n         String originalJoinLink = searchPage.getStudentJoinLink(student);\n \n         searchPage.regenerateLinksForStudent(student);\n-        ThreadHelper.waitFor(5000); //wait for links to load\n         searchPage.verifyRegenerateStudentCourseLinks(student, originalJoinLink);\n         searchPage.waitForPageToLoad();\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA0NDc0Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10875#discussion_r549044743", "bodyText": "Similarly here", "author": "wkurniawan07", "createdAt": "2020-12-27T00:04:22Z", "path": "src/e2e/java/teammates/e2e/pageobjects/AppPage.java", "diffHunk": "@@ -395,6 +395,7 @@ protected void markOptionAsUnselected(WebElement option) {\n      */\n     protected String getSelectedDropdownOptionText(WebElement dropdown) {\n         Select select = new Select(dropdown);\n+        ThreadHelper.waitFor(2000); //short wait for text to appear", "originalCommit": "c67445485babf832730291c768c3d5971b965ba1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e50413baa25aac469c617af55ef7ec18bbc21057", "chunk": "diff --git a/src/e2e/java/teammates/e2e/pageobjects/AppPage.java b/src/e2e/java/teammates/e2e/pageobjects/AppPage.java\nindex 7797e3041b..5f1afe46f6 100644\n--- a/src/e2e/java/teammates/e2e/pageobjects/AppPage.java\n+++ b/src/e2e/java/teammates/e2e/pageobjects/AppPage.java\n\n@@ -395,8 +397,19 @@ public abstract class AppPage {\n      */\n     protected String getSelectedDropdownOptionText(WebElement dropdown) {\n         Select select = new Select(dropdown);\n-        ThreadHelper.waitFor(2000); //short wait for text to appear\n-        return select.getFirstSelectedOption().getText();\n+        try {\n+            uiRetryManager.runUntilNoRecognizedException(new RetryableTask(\"Wait for dropdown text to load\") {\n+                @Override\n+                public void run() {\n+                    String s = select.getFirstSelectedOption().getText();\n+                    assertNotEquals(\"\", s);\n+                    ;\n+                }\n+            }, WebDriverException.class, AssertionError.class);\n+            return select.getFirstSelectedOption().getText();\n+        } catch (MaximumRetriesExceededException e) {\n+            return select.getFirstSelectedOption().getText();\n+        }\n     }\n \n     /**\n"}}, {"oid": "e50413baa25aac469c617af55ef7ec18bbc21057", "url": "https://github.com/TEAMMATES/teammates/commit/e50413baa25aac469c617af55ef7ec18bbc21057", "message": "Update E2E tests", "committedDate": "2020-12-27T05:56:35Z", "type": "commit"}, {"oid": "415209e68f2f41d3e6741b24dbb8a9c3d3665029", "url": "https://github.com/TEAMMATES/teammates/commit/415209e68f2f41d3e6741b24dbb8a9c3d3665029", "message": "Remove chrome browser E2E tests", "committedDate": "2020-12-27T05:56:48Z", "type": "commit"}, {"oid": "400a621e97fd1f37ac84246d132fe312ed7c8f79", "url": "https://github.com/TEAMMATES/teammates/commit/400a621e97fd1f37ac84246d132fe312ed7c8f79", "message": "Fix linting", "committedDate": "2020-12-27T06:12:18Z", "type": "commit"}, {"oid": "9b9e5636264eb48cbc6ee6c2867f15bd00071076", "url": "https://github.com/TEAMMATES/teammates/commit/9b9e5636264eb48cbc6ee6c2867f15bd00071076", "message": "Merge branch 'master' into migrate-to-ga", "committedDate": "2020-12-27T08:18:40Z", "type": "commit"}]}