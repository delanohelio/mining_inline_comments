{"pr_number": 10583, "pr_title": "[#10574] [#10575] [#10576] Fix back-end related issues", "pr_createdAt": "2020-08-12T17:55:13Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10583", "timeline": [{"oid": "645a70a0469d9f4880a06e8758c9cb731a3554dc", "url": "https://github.com/TEAMMATES/teammates/commit/645a70a0469d9f4880a06e8758c9cb731a3554dc", "message": "Use intersection when processing ongoing sessions instead of union", "committedDate": "2020-08-12T18:59:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTYzMzg2OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10583#discussion_r469633868", "bodyText": "Can we just use empty string here?", "author": "xpdavid", "createdAt": "2020-08-13T01:00:25Z", "path": "src/main/java/teammates/ui/webapi/action/GetStudentProfileAction.java", "diffHunk": "@@ -52,32 +50,38 @@ public ActionResult execute() {\n         String studentId;\n         String studentEmail = getRequestParamValue(Const.ParamsNames.STUDENT_EMAIL);\n         String courseId = getRequestParamValue(Const.ParamsNames.COURSE_ID);\n+        String studentName = \"\";\n         if (studentEmail == null || courseId == null) {\n+            if (userInfo == null) {\n+                return new JsonResult(\"No student found\", HttpStatus.SC_NOT_FOUND);\n+            }\n             studentId = userInfo.id;\n         } else {\n             StudentAttributes student = logic.getStudentForEmail(courseId, studentEmail);\n             if (student == null) {\n                 return new JsonResult(\"No student found\", HttpStatus.SC_NOT_FOUND);\n             }\n             studentId = student.getGoogleId();\n+            studentName = student.getName();\n         }\n \n+        StudentProfileAttributes studentProfile;\n+\n         if (StringHelper.isEmpty(studentId)) {\n-            // The student has not registered.\n-            return new JsonResult(MESSAGE_STUDENT_NOT_REGISTERED, HttpStatus.SC_NOT_FOUND);\n+            studentProfile = StudentProfileAttributes.builder(\"placeholderId\").build();", "originalCommit": "bfd188beaa0886825519bdb55c698221d8558fb8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1b5c015b0a6ff9922e42ba887b7057d7ac74969a", "chunk": "diff --git a/src/main/java/teammates/ui/webapi/action/GetStudentProfileAction.java b/src/main/java/teammates/ui/webapi/action/GetStudentProfileAction.java\nindex c54a784407..a312799bee 100644\n--- a/src/main/java/teammates/ui/webapi/action/GetStudentProfileAction.java\n+++ b/src/main/java/teammates/ui/webapi/action/GetStudentProfileAction.java\n\n@@ -68,7 +68,7 @@ public class GetStudentProfileAction extends Action {\n         StudentProfileAttributes studentProfile;\n \n         if (StringHelper.isEmpty(studentId)) {\n-            studentProfile = StudentProfileAttributes.builder(\"placeholderId\").build();\n+            studentProfile = StudentProfileAttributes.builder(\"\").build();\n         } else {\n             studentProfile = logic.getStudentProfile(studentId);\n             studentName = logic.getAccount(studentId).name;\n"}}, {"oid": "1b5c015b0a6ff9922e42ba887b7057d7ac74969a", "url": "https://github.com/TEAMMATES/teammates/commit/1b5c015b0a6ff9922e42ba887b7057d7ac74969a", "message": "Return empty student profile if student has not registered", "committedDate": "2020-08-13T01:36:06Z", "type": "commit"}, {"oid": "14e5cf87d1be3cc8e49f7086baa05e49d3a909eb", "url": "https://github.com/TEAMMATES/teammates/commit/14e5cf87d1be3cc8e49f7086baa05e49d3a909eb", "message": "Remove HTML sanitization for validation messages", "committedDate": "2020-08-13T01:36:06Z", "type": "commit"}, {"oid": "435c7a56e0fae25d271a0a2ec9589a38d3c676fe", "url": "https://github.com/TEAMMATES/teammates/commit/435c7a56e0fae25d271a0a2ec9589a38d3c676fe", "message": "Use intersection when processing ongoing sessions instead of union", "committedDate": "2020-08-13T01:36:06Z", "type": "commit"}, {"oid": "435c7a56e0fae25d271a0a2ec9589a38d3c676fe", "url": "https://github.com/TEAMMATES/teammates/commit/435c7a56e0fae25d271a0a2ec9589a38d3c676fe", "message": "Use intersection when processing ongoing sessions instead of union", "committedDate": "2020-08-13T01:36:06Z", "type": "forcePushed"}]}