{"pr_number": 1994, "pr_title": "HBASE-24654 Allow unset table's rsgroup", "pr_createdAt": "2020-06-29T06:22:03Z", "pr_url": "https://github.com/apache/hbase/pull/1994", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA2MzM1MQ==", "url": "https://github.com/apache/hbase/pull/1994#discussion_r447063351", "bodyText": "Maybe call it clearRegionServerGroup?", "author": "Apache9", "createdAt": "2020-06-29T15:35:06Z", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java", "diffHunk": "@@ -554,6 +554,11 @@ public TableDescriptorBuilder setRegionServerGroup(String group) {\n     return this;\n   }\n \n+  public TableDescriptorBuilder unsetRegionServerGroup() {", "originalCommit": "e81dc071e4243038f774b590e3cb87b2073be43a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM5MTc3Ng==", "url": "https://github.com/apache/hbase/pull/1994#discussion_r447391776", "bodyText": "Thanks for reviewing and comments, I've renamed it and added UTs.", "author": "ddupg", "createdAt": "2020-06-30T03:50:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA2MzM1MQ=="}], "type": "inlineReview", "revised_code": {"commit": "f0d5c0cd3233b97c3bd64d82b6592f1913eadb76", "chunk": "diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java\nindex 6300af92dd..5ab3f779ef 100644\n--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java\n+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java\n\n@@ -554,7 +554,7 @@ public class TableDescriptorBuilder {\n     return this;\n   }\n \n-  public TableDescriptorBuilder unsetRegionServerGroup() {\n+  public TableDescriptorBuilder clearRegionServerGroup() {\n     desc.removeValue(RSGROUP_KEY);\n     return this;\n   }\n"}}, {"oid": "f0d5c0cd3233b97c3bd64d82b6592f1913eadb76", "url": "https://github.com/apache/hbase/commit/f0d5c0cd3233b97c3bd64d82b6592f1913eadb76", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-06-30T03:46:03Z", "type": "forcePushed"}, {"oid": "1a676e2a04ec0b0c9512e5be940bb245517b7939", "url": "https://github.com/apache/hbase/commit/1a676e2a04ec0b0c9512e5be940bb245517b7939", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-07-01T10:04:37Z", "type": "forcePushed"}, {"oid": "f9576ee6a08a0bb75d44647da2fac937b2496dd6", "url": "https://github.com/apache/hbase/commit/f9576ee6a08a0bb75d44647da2fac937b2496dd6", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-07-20T07:46:52Z", "type": "forcePushed"}, {"oid": "437411fd6ebf7abb702d1d8f9e904e0008af1221", "url": "https://github.com/apache/hbase/commit/437411fd6ebf7abb702d1d8f9e904e0008af1221", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-07-21T06:31:39Z", "type": "forcePushed"}, {"oid": "a9441df7149f62e24f4e22cd2880c42b032e3bf4", "url": "https://github.com/apache/hbase/commit/a9441df7149f62e24f4e22cd2880c42b032e3bf4", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-08-28T07:42:31Z", "type": "forcePushed"}, {"oid": "19b6a62049697ea54f812d7d0427f5d65a858c00", "url": "https://github.com/apache/hbase/commit/19b6a62049697ea54f812d7d0427f5d65a858c00", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-09-09T02:15:11Z", "type": "forcePushed"}, {"oid": "df9f794b76557806ad67df27652e08d498f43960", "url": "https://github.com/apache/hbase/commit/df9f794b76557806ad67df27652e08d498f43960", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-11-09T11:49:25Z", "type": "forcePushed"}, {"oid": "247a8c21cb65f399dcfb59fce9b356ce1ed26618", "url": "https://github.com/apache/hbase/commit/247a8c21cb65f399dcfb59fce9b356ce1ed26618", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-11-12T04:12:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY3NTYwOA==", "url": "https://github.com/apache/hbase/pull/1994#discussion_r522675608", "bodyText": "How to unset RSGroup by shell? Add a unit test for shell too?", "author": "infraio", "createdAt": "2020-11-13T06:16:55Z", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java", "diffHunk": "@@ -541,7 +541,11 @@ public TableDescriptorBuilder setReplicationScope(int scope) {\n   }\n \n   public TableDescriptorBuilder setRegionServerGroup(String group) {\n-    desc.setValue(RSGROUP_KEY, new Bytes(Bytes.toBytes(group)));\n+    if (group == null) {", "originalCommit": "247a8c21cb65f399dcfb59fce9b356ce1ed26618", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM0Mzk2OQ==", "url": "https://github.com/apache/hbase/pull/1994#discussion_r527343969", "bodyText": "Thank @infraio for reviewing.\nI've added an UT to show how to unset by shell, but it's no different than before.", "author": "ddupg", "createdAt": "2020-11-20T01:54:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY3NTYwOA=="}], "type": "inlineReview", "revised_code": {"commit": "72f1a1792a6f7de9aa3ff1a6f5d7d66923420bc9", "chunk": "diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java\nindex d49204756f..d2cfff59f3 100644\n--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java\n+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/TableDescriptorBuilder.java\n\n@@ -541,11 +541,7 @@ public class TableDescriptorBuilder {\n   }\n \n   public TableDescriptorBuilder setRegionServerGroup(String group) {\n-    if (group == null) {\n-      desc.removeValue(RSGROUP_KEY);\n-    } else {\n-      desc.setValue(RSGROUP_KEY, new Bytes(Bytes.toBytes(group)));\n-    }\n+    desc.setValue(RSGROUP_KEY, group);\n     return this;\n   }\n \n"}}, {"oid": "72f1a1792a6f7de9aa3ff1a6f5d7d66923420bc9", "url": "https://github.com/apache/hbase/commit/72f1a1792a6f7de9aa3ff1a6f5d7d66923420bc9", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-11-18T02:26:27Z", "type": "forcePushed"}, {"oid": "29b4295cbc50f884a796167b43af4760bd69a129", "url": "https://github.com/apache/hbase/commit/29b4295cbc50f884a796167b43af4760bd69a129", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-11-18T03:39:12Z", "type": "forcePushed"}, {"oid": "65b39c4c05c45a3ec2340b4ba8f7f7da22806075", "url": "https://github.com/apache/hbase/commit/65b39c4c05c45a3ec2340b4ba8f7f7da22806075", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-11-18T10:51:21Z", "type": "forcePushed"}, {"oid": "128bbad5c5ca6fbcaea6185b63bc37550f1188d4", "url": "https://github.com/apache/hbase/commit/128bbad5c5ca6fbcaea6185b63bc37550f1188d4", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-11-19T02:10:48Z", "type": "forcePushed"}, {"oid": "c17665774cd8314f93de8f796e5a28cbf9b47eb5", "url": "https://github.com/apache/hbase/commit/c17665774cd8314f93de8f796e5a28cbf9b47eb5", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-11-19T07:14:59Z", "type": "commit"}, {"oid": "c17665774cd8314f93de8f796e5a28cbf9b47eb5", "url": "https://github.com/apache/hbase/commit/c17665774cd8314f93de8f796e5a28cbf9b47eb5", "message": "HBASE-24654 Allow unset table's rsgroup", "committedDate": "2020-11-19T07:14:59Z", "type": "forcePushed"}]}