{"pr_number": 1264, "pr_title": "HBASE-23954 SplitParent region should not be balanced", "pr_createdAt": "2020-03-10T09:28:04Z", "pr_url": "https://github.com/apache/hbase/pull/1264", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIyMTE3MQ==", "url": "https://github.com/apache/hbase/pull/1264#discussion_r390221171", "bodyText": "filter twice is easy to read?\n.filter(region -> !isTableDisabled(tableStateManager, region.getTable()).filter(region -> !region.isSplitParent())", "author": "infraio", "createdAt": "2020-03-10T10:30:50Z", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/assignment/RegionStates.java", "diffHunk": "@@ -581,9 +584,11 @@ public ServerName getRegionServerOfRegion(RegionInfo regionInfo) {\n       for (ServerName serverName : onlineServers) {\n         ServerStateNode serverNode = serverMap.get(serverName);\n         if (serverNode != null) {\n-          ensemble.put(serverNode.getServerName(), serverNode.getRegionInfoList().stream()\n-            .filter(region -> !isTableDisabled(tableStateManager, region.getTable()))\n-            .collect(Collectors.toList()));\n+          ensemble.put(serverNode.getServerName(),\n+            serverNode.getRegionInfoList().stream()\n+                .filter(region -> !isTableDisabled(tableStateManager, region.getTable())", "originalCommit": "4d6b4a03f470c3e8acce49ba37dc734db2f509f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIyNDM1Nw==", "url": "https://github.com/apache/hbase/pull/1264#discussion_r390224357", "bodyText": "ok , right", "author": "nyl3532016", "createdAt": "2020-03-10T10:36:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIyMTE3MQ=="}], "type": "inlineReview", "revised_code": {"commit": "572db61fe595bf5db4e3951999ed6ef345feadba", "chunk": "diff --git a/hbase-server/src/main/java/org/apache/hadoop/hbase/master/assignment/RegionStates.java b/hbase-server/src/main/java/org/apache/hadoop/hbase/master/assignment/RegionStates.java\nindex 0c4cb29545..6a6e331276 100644\n--- a/hbase-server/src/main/java/org/apache/hadoop/hbase/master/assignment/RegionStates.java\n+++ b/hbase-server/src/main/java/org/apache/hadoop/hbase/master/assignment/RegionStates.java\n\n@@ -586,9 +586,8 @@ public class RegionStates {\n         if (serverNode != null) {\n           ensemble.put(serverNode.getServerName(),\n             serverNode.getRegionInfoList().stream()\n-                .filter(region -> !isTableDisabled(tableStateManager, region.getTable())\n-                    && !region.isSplitParent())\n-                .collect(Collectors.toList()));\n+                .filter(region -> !isTableDisabled(tableStateManager, region.getTable()))\n+                .filter(region -> !region.isSplitParent()).collect(Collectors.toList()));\n         } else {\n           ensemble.put(serverName, new ArrayList<>());\n         }\n"}}, {"oid": "572db61fe595bf5db4e3951999ed6ef345feadba", "url": "https://github.com/apache/hbase/commit/572db61fe595bf5db4e3951999ed6ef345feadba", "message": "HBASE-23954 SplitParent region should not be balanced", "committedDate": "2020-03-10T10:43:29Z", "type": "commit"}, {"oid": "572db61fe595bf5db4e3951999ed6ef345feadba", "url": "https://github.com/apache/hbase/commit/572db61fe595bf5db4e3951999ed6ef345feadba", "message": "HBASE-23954 SplitParent region should not be balanced", "committedDate": "2020-03-10T10:43:29Z", "type": "forcePushed"}]}