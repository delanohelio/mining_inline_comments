{"pr_number": 1124, "pr_title": "HBASE-23792 [Flakey Test] TestExportSnapshotNoCluster.testSnapshotWithRefsExportFileSystemState", "pr_createdAt": "2020-02-04T20:49:54Z", "pr_url": "https://github.com/apache/hbase/pull/1124", "timeline": [{"oid": "ff1b91d153f4322a9342bbf614686993cac2a9c9", "url": "https://github.com/apache/hbase/commit/ff1b91d153f4322a9342bbf614686993cac2a9c9", "message": "HBASE-23792 [Flakey Test] TestExportSnapshotNoCluster.testSnapshotWithRefsExportFileSystemState\n\n1. Survive flakey rerunning by converting the static BeforeClass stuff\n   into instance-level Before.\n2. Break the test method into two, one for running over each of the\n   snapshot manifest versions.", "committedDate": "2020-02-04T20:47:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDkyNjczMw==", "url": "https://github.com/apache/hbase/pull/1124#discussion_r374926733", "bodyText": "Isolate more by getting method name into path?", "author": "saintstack", "createdAt": "2020-02-04T21:15:19Z", "path": "hbase-mapreduce/src/test/java/org/apache/hadoop/hbase/snapshot/TestExportSnapshotNoCluster.java", "diffHunk": "@@ -67,29 +64,29 @@ public static void setUpBaseConf(Configuration conf) {\n     conf.set(HConstants.HBASE_DIR, testDir.toString());\n   }\n \n-  @BeforeClass\n-  public static void setUpBeforeClass() throws Exception {\n+  @Before\n+  public void setUpBefore() throws Exception {\n     // Make sure testDir is on LocalFileSystem\n-    testDir = TEST_UTIL.getDataTestDir().makeQualified(URI.create(\"file:///\"), new Path(\"/\"));\n-    fs = testDir.getFileSystem(TEST_UTIL.getConfiguration());\n+    testDir = testUtil.getDataTestDir().makeQualified(URI.create(\"file:///\"), new Path(\"/\"));", "originalCommit": "ff1b91d153f4322a9342bbf614686993cac2a9c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDk5MzIxOQ==", "url": "https://github.com/apache/hbase/pull/1124#discussion_r374993219", "bodyText": "testUtil.getDataTestDir() will generate a path with a random UUID, so by getting a fresh instance of testUtil, I get an isolated path.", "author": "ndimiduk", "createdAt": "2020-02-05T00:02:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDkyNjczMw=="}], "type": "inlineReview", "revised_code": null}]}