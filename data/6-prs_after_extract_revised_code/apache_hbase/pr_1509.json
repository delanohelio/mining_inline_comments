{"pr_number": 1509, "pr_title": "HBASE-24182 log when the region is set to closing status", "pr_createdAt": "2020-04-14T12:58:49Z", "pr_url": "https://github.com/apache/hbase/pull/1509", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTk5Mzg0Nw==", "url": "https://github.com/apache/hbase/pull/1509#discussion_r409993847", "bodyText": "@Joseph295 Can you change this to \"Closing region {}\"? this is anyways going to print region name as string only.", "author": "virajjasani", "createdAt": "2020-04-17T05:01:49Z", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java", "diffHunk": "@@ -1655,6 +1655,7 @@ public void setTimeoutForWriteLock(long timeoutForWriteLock) {\n       }\n     }\n     this.closing.set(true);\n+    LOG.info(\"Closing {}\", this);", "originalCommit": "5545572478728dcee0c8492e42e01d96d54c436a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5MTM3NQ==", "url": "https://github.com/apache/hbase/pull/1509#discussion_r410191375", "bodyText": "@Joseph295 Can you change this to \"Closing region {}\"? this is anyways going to print region name as string only.\n\nI think the discussion above really makes sense, so do you guys think we add this log any more? maybe for debug level is enough? We only need it if we concern about the closing cost time for debug? Anyway, let me fix the format for that, any suggestion is welcome. Thanks", "author": "Joseph295", "createdAt": "2020-04-17T12:33:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTk5Mzg0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIwNDgzMw==", "url": "https://github.com/apache/hbase/pull/1509#discussion_r410204833", "bodyText": "Journal log is at Debug level anyways right? Let this be Info level, should be good. Imp point here is of timing of these logs and hence, if we debug from logs based on region name, we can see sorting of chronological events one after another and that way having this Info log is beneficial (although redundant).\nLet's wait for @apurtell 's final call on this.", "author": "virajjasani", "createdAt": "2020-04-17T12:58:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTk5Mzg0Nw=="}], "type": "inlineReview", "revised_code": {"commit": "8fb0cb004845775fb06096c720bd6abf63d41f8a", "chunk": "diff --git a/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java b/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java\nindex 36105dbad3..a982c3e824 100644\n--- a/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java\n+++ b/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java\n\n@@ -1655,7 +1655,7 @@ public class HRegion implements HeapSize, PropagatingConfigurationObserver, Regi\n       }\n     }\n     this.closing.set(true);\n-    LOG.info(\"Closing {}\", this);\n+    LOG.info(\"Closing region {}\", this);\n     status.setStatus(\"Disabling writes for close\");\n     try {\n       if (this.isClosed()) {\n"}}, {"oid": "0964ff059bcd8d1a90b0cbdd42dfa090a417b006", "url": "https://github.com/apache/hbase/commit/0964ff059bcd8d1a90b0cbdd42dfa090a417b006", "message": "HBASE-24182 log when the region is set to closing status", "committedDate": "2020-04-17T12:42:26Z", "type": "forcePushed"}, {"oid": "8fb0cb004845775fb06096c720bd6abf63d41f8a", "url": "https://github.com/apache/hbase/commit/8fb0cb004845775fb06096c720bd6abf63d41f8a", "message": "HBASE-24182 log when the region is set to closing status", "committedDate": "2020-04-17T12:43:40Z", "type": "commit"}, {"oid": "8fb0cb004845775fb06096c720bd6abf63d41f8a", "url": "https://github.com/apache/hbase/commit/8fb0cb004845775fb06096c720bd6abf63d41f8a", "message": "HBASE-24182 log when the region is set to closing status", "committedDate": "2020-04-17T12:43:40Z", "type": "forcePushed"}]}