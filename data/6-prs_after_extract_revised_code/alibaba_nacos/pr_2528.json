{"pr_number": 2528, "pr_title": "fix: https://github.com/alibaba/nacos/issues/2527", "pr_createdAt": "2020-03-25T16:22:14Z", "pr_url": "https://github.com/alibaba/nacos/pull/2528", "timeline": [{"oid": "fa1421b5f1834be8b09bf75f389d09b63a3f1a43", "url": "https://github.com/alibaba/nacos/commit/fa1421b5f1834be8b09bf75f389d09b63a3f1a43", "message": "fix: https://github.com/alibaba/nacos/issues/2527", "committedDate": "2020-03-25T16:07:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODI3NzExNg==", "url": "https://github.com/alibaba/nacos/pull/2528#discussion_r398277116", "bodyText": "\"encode\" not \"encod\"", "author": "nkorange", "createdAt": "2020-03-26T02:09:52Z", "path": "client/src/main/java/com/alibaba/nacos/client/naming/net/NamingProxy.java", "diffHunk": "@@ -327,7 +329,11 @@ public JSONObject sendBeat(BeatInfo beatInfo, boolean lightBeatEnabled) throws N\n         Map<String, String> params = new HashMap<String, String>(8);\n         String body = StringUtils.EMPTY;\n         if (!lightBeatEnabled) {\n-            body = \"beat=\" + JSON.toJSONString(beatInfo);\n+            try {\n+                body = \"beat=\" + URLEncoder.encode(JSON.toJSONString(beatInfo), \"UTF-8\");\n+            } catch (UnsupportedEncodingException e) {\n+                throw new NacosException(NacosException.SERVER_ERROR, \"encod beatInfo error\", e);", "originalCommit": "fa1421b5f1834be8b09bf75f389d09b63a3f1a43", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMzMTA4Nw==", "url": "https://github.com/alibaba/nacos/pull/2528#discussion_r398331087", "bodyText": "sorry, it's a spelling mistake. It's been fixed.", "author": "theonefx", "createdAt": "2020-03-26T05:49:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODI3NzExNg=="}], "type": "inlineReview", "revised_code": {"commit": "bebea333f50a39b1b1707a2a94b1989126884291", "chunk": "diff --git a/client/src/main/java/com/alibaba/nacos/client/naming/net/NamingProxy.java b/client/src/main/java/com/alibaba/nacos/client/naming/net/NamingProxy.java\nindex c32b216e1..8a91e965a 100644\n--- a/client/src/main/java/com/alibaba/nacos/client/naming/net/NamingProxy.java\n+++ b/client/src/main/java/com/alibaba/nacos/client/naming/net/NamingProxy.java\n\n@@ -332,7 +332,7 @@ public class NamingProxy {\n             try {\n                 body = \"beat=\" + URLEncoder.encode(JSON.toJSONString(beatInfo), \"UTF-8\");\n             } catch (UnsupportedEncodingException e) {\n-                throw new NacosException(NacosException.SERVER_ERROR, \"encod beatInfo error\", e);\n+                throw new NacosException(NacosException.SERVER_ERROR, \"encode beatInfo error\", e);\n             }\n         }\n         params.put(CommonParams.NAMESPACE_ID, namespaceId);\n"}}, {"oid": "bebea333f50a39b1b1707a2a94b1989126884291", "url": "https://github.com/alibaba/nacos/commit/bebea333f50a39b1b1707a2a94b1989126884291", "message": "spelling mistake", "committedDate": "2020-03-26T02:55:44Z", "type": "commit"}]}