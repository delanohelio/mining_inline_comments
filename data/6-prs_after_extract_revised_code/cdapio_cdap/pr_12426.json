{"pr_number": 12426, "pr_title": "(CDAP-17047) Make sure no new levelDB can be created after closing of the factory", "pr_createdAt": "2020-07-01T00:36:21Z", "pr_url": "https://github.com/cdapio/cdap/pull/12426", "timeline": [{"oid": "b7b827a838beefda8d6e31ded4accdb109a57c71", "url": "https://github.com/cdapio/cdap/commit/b7b827a838beefda8d6e31ded4accdb109a57c71", "message": "(CDAP-17047) Make sure no new levelDB can be created after closing of the factory", "committedDate": "2020-07-01T00:42:13Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ2MTE0NQ==", "url": "https://github.com/cdapio/cdap/pull/12426#discussion_r450461145", "bodyText": "should we add this exception in the javadoc of the method?", "author": "CuriousVini", "createdAt": "2020-07-06T20:26:10Z", "path": "cdap-tms/src/main/java/io/cdap/cdap/messaging/store/leveldb/LevelDBTableFactory.java", "diffHunk": "@@ -89,6 +90,10 @@ public LevelDBTableFactory(CConfiguration cConf) {\n \n   @Override\n   public synchronized MetadataTable createMetadataTable() throws IOException {\n+    if (closed) {\n+      throw new IOException(\"The LevelDBTableFactory is already closed\");", "originalCommit": "76b2fb9ee662e1daa45cade5bce4d4bb4474dddd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAyNjcxMw==", "url": "https://github.com/cdapio/cdap/pull/12426#discussion_r451026713", "bodyText": "This can be added in another PR.", "author": "CuriousVini", "createdAt": "2020-07-07T17:25:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ2MTE0NQ=="}], "type": "inlineReview", "revised_code": {"commit": "716bf1d443305e1593e25b1cc75454c57d91b40e", "chunk": "diff --git a/cdap-tms/src/main/java/io/cdap/cdap/messaging/store/leveldb/LevelDBTableFactory.java b/cdap-tms/src/main/java/io/cdap/cdap/messaging/store/leveldb/LevelDBTableFactory.java\nindex d448e2b4286..10b4f78816e 100644\n--- a/cdap-tms/src/main/java/io/cdap/cdap/messaging/store/leveldb/LevelDBTableFactory.java\n+++ b/cdap-tms/src/main/java/io/cdap/cdap/messaging/store/leveldb/LevelDBTableFactory.java\n\n@@ -90,10 +89,6 @@ public final class LevelDBTableFactory implements TableFactory {\n \n   @Override\n   public synchronized MetadataTable createMetadataTable() throws IOException {\n-    if (closed) {\n-      throw new IOException(\"The LevelDBTableFactory is already closed\");\n-    }\n-\n     if (metadataTable != null) {\n       return metadataTable;\n     }\n"}}, {"oid": "716bf1d443305e1593e25b1cc75454c57d91b40e", "url": "https://github.com/cdapio/cdap/commit/716bf1d443305e1593e25b1cc75454c57d91b40e", "message": "(CDAP-17047) Back-port process termination logic from 6.2 branch\n\n- Make sure remote process is terminated", "committedDate": "2020-07-07T18:04:19Z", "type": "commit"}, {"oid": "716bf1d443305e1593e25b1cc75454c57d91b40e", "url": "https://github.com/cdapio/cdap/commit/716bf1d443305e1593e25b1cc75454c57d91b40e", "message": "(CDAP-17047) Back-port process termination logic from 6.2 branch\n\n- Make sure remote process is terminated", "committedDate": "2020-07-07T18:04:19Z", "type": "forcePushed"}]}