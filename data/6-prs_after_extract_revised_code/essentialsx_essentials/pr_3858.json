{"pr_number": 3858, "pr_title": "Fix behaviour of /list when showing real names", "pr_createdAt": "2020-12-23T14:15:50Z", "pr_url": "https://github.com/EssentialsX/Essentials/pull/3858", "timeline": [{"oid": "1b6f2b87436555338f5d0dbaff2c8110a5d7b48d", "url": "https://github.com/EssentialsX/Essentials/commit/1b6f2b87436555338f5d0dbaff2c8110a5d7b48d", "message": "compare by nickname instead of displayname in /list output", "committedDate": "2020-12-23T14:08:33Z", "type": "commit"}, {"oid": "1c5e2ea51eb5a2e3bdfb541bb41361820e2efb53", "url": "https://github.com/EssentialsX/Essentials/commit/1c5e2ea51eb5a2e3bdfb541bb41361820e2efb53", "message": "correct codestyle", "committedDate": "2020-12-23T14:18:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODU3NjA1Nw==", "url": "https://github.com/EssentialsX/Essentials/pull/3858#discussion_r548576057", "bodyText": "Shouldn't stripFormat be used since stripEssentialsFormat does untranslated color codes afaik?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        final String strippedNick = FormatUtil.stripEssentialsFormat(user.getNickname());\n          \n          \n            \n                        final String strippedNick = FormatUtil.stripFormat(user.getNickname());", "author": "JRoy", "createdAt": "2020-12-24T15:55:03Z", "path": "Essentials/src/main/java/com/earth2me/essentials/PlayerList.java", "diffHunk": "@@ -37,7 +37,9 @@ public static String listUsers(final IEssentials ess, final List<User> users, fi\n             }\n             user.setDisplayNick();\n             groupString.append(user.getDisplayName());\n-            if (ess.getSettings().realNamesOnList() && !ChatColor.stripColor(user.getDisplayName()).equals(user.getName())) {\n+\n+            final String strippedNick = FormatUtil.stripEssentialsFormat(user.getNickname());", "originalCommit": "1c5e2ea51eb5a2e3bdfb541bb41361820e2efb53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODU3NjYyOQ==", "url": "https://github.com/EssentialsX/Essentials/pull/3858#discussion_r548576629", "bodyText": "I really just assumed that Essentials stored the nicknames in Essentials format without checking. I am a clown.", "author": "triagonal", "createdAt": "2020-12-24T15:55:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODU3NjA1Nw=="}], "type": "inlineReview", "revised_code": {"commit": "cfaa9ee930a4223c356fd596e07e94f5d0b7809f", "chunk": "diff --git a/Essentials/src/main/java/com/earth2me/essentials/PlayerList.java b/Essentials/src/main/java/com/earth2me/essentials/PlayerList.java\nindex ba8758c4e..91b8cc59b 100644\n--- a/Essentials/src/main/java/com/earth2me/essentials/PlayerList.java\n+++ b/Essentials/src/main/java/com/earth2me/essentials/PlayerList.java\n\n@@ -38,7 +38,7 @@ public final class PlayerList {\n             user.setDisplayNick();\n             groupString.append(user.getDisplayName());\n \n-            final String strippedNick = FormatUtil.stripEssentialsFormat(user.getNickname());\n+            final String strippedNick = FormatUtil.stripFormat(user.getNickname());\n             if (ess.getSettings().realNamesOnList() && strippedNick != null && !strippedNick.equals(user.getName())) {\n                 groupString.append(\" (\").append(user.getName()).append(\")\");\n             }\n"}}, {"oid": "cfaa9ee930a4223c356fd596e07e94f5d0b7809f", "url": "https://github.com/EssentialsX/Essentials/commit/cfaa9ee930a4223c356fd596e07e94f5d0b7809f", "message": "Update Essentials/src/main/java/com/earth2me/essentials/PlayerList.java\n\nCo-authored-by: Josh Roy <10731363+JRoy@users.noreply.github.com>", "committedDate": "2020-12-24T16:12:32Z", "type": "commit"}, {"oid": "5af5835c89dfdc8dd437ea613130478e2e87fcd4", "url": "https://github.com/EssentialsX/Essentials/commit/5af5835c89dfdc8dd437ea613130478e2e87fcd4", "message": "Merge branch '2.x' into fix/real-names-on-list", "committedDate": "2021-01-01T00:10:31Z", "type": "commit"}]}