{"pr_number": 3703, "pr_title": "Add option to prevent replying from vanished players", "pr_createdAt": "2020-10-03T18:13:38Z", "pr_url": "https://github.com/EssentialsX/Essentials/pull/3703", "timeline": [{"oid": "e17678db3577495ee4dad2b356e6d862c685c485", "url": "https://github.com/EssentialsX/Essentials/commit/e17678db3577495ee4dad2b356e6d862c685c485", "message": "Add option to prevent replying from vanished players", "committedDate": "2020-10-03T18:13:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3MDAwMw==", "url": "https://github.com/EssentialsX/Essentials/pull/3703#discussion_r499170003", "bodyText": "Doesn't seem to follow other code, where @Override and declarations are on the same line", "author": "l1ttleO", "createdAt": "2020-10-03T18:18:32Z", "path": "Essentials/src/com/earth2me/essentials/Console.java", "diffHunk": "@@ -74,4 +75,9 @@ public CommandSender getCommandSender() {\n     @Override public void setReplyRecipient(IMessageRecipient recipient) {\n         this.messageRecipient.setReplyRecipient(recipient);\n     }\n+\n+    @Override\n+    public boolean isHiddenFrom(Player player) {\n+        return false;", "originalCommit": "e17678db3577495ee4dad2b356e6d862c685c485", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3MDYzMg==", "url": "https://github.com/EssentialsX/Essentials/pull/3703#discussion_r499170632", "bodyText": "it's shitty codestyle from 1950, if we do a codestyle update again this will be addressed", "author": "JRoy", "createdAt": "2020-10-03T18:26:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3MDAwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3MTI5MQ==", "url": "https://github.com/EssentialsX/Essentials/pull/3703#discussion_r499171291", "bodyText": "This is addressed in #3701 - doesn't matter too much what you do here, since it will get rebased or replaced soon enough", "author": "mdcfe", "createdAt": "2020-10-03T18:34:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3MDAwMw=="}], "type": "inlineReview", "revised_code": {"commit": "166101f5dbd4924a3bcb5918b34b0b9709b4856a", "chunk": "diff --git a/Essentials/src/com/earth2me/essentials/Console.java b/Essentials/src/com/earth2me/essentials/Console.java\nindex 99dffd6f5..fcc7fb2e8 100644\n--- a/Essentials/src/com/earth2me/essentials/Console.java\n+++ b/Essentials/src/com/earth2me/essentials/Console.java\n\n@@ -2,77 +2,83 @@ package com.earth2me.essentials;\n \n import com.earth2me.essentials.messaging.IMessageRecipient;\n import com.earth2me.essentials.messaging.SimpleMessageRecipient;\n-\n import org.bukkit.Server;\n import org.bukkit.command.CommandSender;\n import org.bukkit.entity.Player;\n \n-\n public final class Console implements IMessageRecipient {\n     public static final String NAME = \"Console\";\n     private static Console instance; // Set in essentials\n-    \n+\n     private final IEssentials ess;\n     private final IMessageRecipient messageRecipient;\n \n+    private Console(final IEssentials ess) {\n+        this.ess = ess;\n+        this.messageRecipient = new SimpleMessageRecipient(ess, this);\n+    }\n+\n     public static Console getInstance() {\n         return instance;\n     }\n \n-    static void setInstance(IEssentials ess) { // Called in Essentials#onEnable()\n+    static void setInstance(final IEssentials ess) { // Called in Essentials#onEnable()\n         instance = new Console(ess);\n     }\n-    \n+\n     /**\n      * @deprecated Use {@link Console#getCommandSender()}\n      */\n     @Deprecated\n-    public static CommandSender getCommandSender(Server server) throws Exception {\n+    public static CommandSender getCommandSender(final Server server) throws Exception {\n         return server.getConsoleSender();\n     }\n \n-    private Console(IEssentials ess) {\n-        this.ess = ess;\n-        this.messageRecipient = new SimpleMessageRecipient(ess, this);\n-    }\n-\n     public CommandSender getCommandSender() {\n         return ess.getServer().getConsoleSender();\n     }\n \n-    @Override public String getName() {\n+    @Override\n+    public String getName() {\n         return Console.NAME;\n     }\n \n-    @Override public String getDisplayName() {\n+    @Override\n+    public String getDisplayName() {\n         return Console.NAME;\n     }\n \n-    @Override public void sendMessage(String message) {\n+    @Override\n+    public void sendMessage(final String message) {\n         getCommandSender().sendMessage(message);\n     }\n \n-    @Override public boolean isReachable() {\n+    @Override\n+    public boolean isReachable() {\n         return true;\n     }\n-    \n+\n     /* ================================\n      * >> DELEGATE METHODS\n      * ================================ */\n \n-    @Override public MessageResponse sendMessage(IMessageRecipient recipient, String message) {\n+    @Override\n+    public MessageResponse sendMessage(final IMessageRecipient recipient, final String message) {\n         return this.messageRecipient.sendMessage(recipient, message);\n     }\n \n-    @Override public MessageResponse onReceiveMessage(IMessageRecipient sender, String message) {\n+    @Override\n+    public MessageResponse onReceiveMessage(final IMessageRecipient sender, final String message) {\n         return this.messageRecipient.onReceiveMessage(sender, message);\n     }\n \n-    @Override public IMessageRecipient getReplyRecipient() {\n+    @Override\n+    public IMessageRecipient getReplyRecipient() {\n         return this.messageRecipient.getReplyRecipient();\n     }\n \n-    @Override public void setReplyRecipient(IMessageRecipient recipient) {\n+    @Override\n+    public void setReplyRecipient(final IMessageRecipient recipient) {\n         this.messageRecipient.setReplyRecipient(recipient);\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3MDE4Nw==", "url": "https://github.com/EssentialsX/Essentials/pull/3703#discussion_r499170187", "bodyText": "I believe it should be false by default\nWhile it is changing behavior that some may not like, I think that it would be better that you won't be able to reply to vanished players (because of the whole vanished concept)", "author": "l1ttleO", "createdAt": "2020-10-03T18:21:04Z", "path": "Essentials/src/com/earth2me/essentials/Settings.java", "diffHunk": "@@ -1321,6 +1321,11 @@ public int getMaxUserCacheCount() {\n         return config.getBoolean(\"last-message-reply-recipient\", false);\n     }\n \n+    @Override\n+    public boolean isReplyToVanished() {\n+        return config.getBoolean(\"last-message-reply-vanished\", true);", "originalCommit": "e17678db3577495ee4dad2b356e6d862c685c485", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "166101f5dbd4924a3bcb5918b34b0b9709b4856a", "chunk": "diff --git a/Essentials/src/com/earth2me/essentials/Settings.java b/Essentials/src/com/earth2me/essentials/Settings.java\nindex f760c10de..a78222edd 100644\n--- a/Essentials/src/com/earth2me/essentials/Settings.java\n+++ b/Essentials/src/com/earth2me/essentials/Settings.java\n\n@@ -1313,11 +1284,12 @@ public class Settings implements net.ess3.api.ISettings {\n     // #easteregg\n     @Override\n     public int getMaxUserCacheCount() {\n-        long count = Runtime.getRuntime().maxMemory() / 1024 / 96;\n+        final long count = Runtime.getRuntime().maxMemory() / 1024 / 96;\n         return config.getInt(\"max-user-cache-count\", (int) count);\n     }\n \n-    @Override public boolean isLastMessageReplyRecipient() {\n+    @Override\n+    public boolean isLastMessageReplyRecipient() {\n         return config.getBoolean(\"last-message-reply-recipient\", false);\n     }\n \n"}}, {"oid": "166101f5dbd4924a3bcb5918b34b0b9709b4856a", "url": "https://github.com/EssentialsX/Essentials/commit/166101f5dbd4924a3bcb5918b34b0b9709b4856a", "message": "Merge branch '2.x' into feature/vanish-reply\n\n# Conflicts:\n#\tEssentials/src/com/earth2me/essentials/Settings.java\n#\tEssentials/src/com/earth2me/essentials/User.java", "committedDate": "2020-10-05T06:27:16Z", "type": "commit"}, {"oid": "302dee6f6eb9770fa1f73d4fd4cf3651b3f9c1d6", "url": "https://github.com/EssentialsX/Essentials/commit/302dee6f6eb9770fa1f73d4fd4cf3651b3f9c1d6", "message": "Change defaults", "committedDate": "2020-10-05T12:19:08Z", "type": "commit"}, {"oid": "dcd7e0a86996a6d53bf73e99f3221dcfc90f48ce", "url": "https://github.com/EssentialsX/Essentials/commit/dcd7e0a86996a6d53bf73e99f3221dcfc90f48ce", "message": "Fix defaults", "committedDate": "2020-11-09T12:16:22Z", "type": "commit"}]}