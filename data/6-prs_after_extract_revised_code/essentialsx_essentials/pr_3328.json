{"pr_number": 3328, "pr_title": "Add option to remove vanishing items from keepinv users", "pr_createdAt": "2020-05-25T04:40:43Z", "pr_url": "https://github.com/EssentialsX/Essentials/pull/3328", "timeline": [{"oid": "bba9f5f857934fff42a4982c968204b8fb9493ff", "url": "https://github.com/EssentialsX/Essentials/commit/bba9f5f857934fff42a4982c968204b8fb9493ff", "message": "Add option to remove vanishing items from keepinv users", "committedDate": "2020-05-25T04:39:31Z", "type": "commit"}, {"oid": "3f36033bb8f5d2d9577f2865c1bfd76a161ac111", "url": "https://github.com/EssentialsX/Essentials/commit/3f36033bb8f5d2d9577f2865c1bfd76a161ac111", "message": "Merge branch '2.x' into feature/3219", "committedDate": "2020-05-30T15:09:13Z", "type": "commit"}, {"oid": "64557e28c169f20711a31e8c363b005b3966179a", "url": "https://github.com/EssentialsX/Essentials/commit/64557e28c169f20711a31e8c363b005b3966179a", "message": "Change up from convo with md", "committedDate": "2020-06-08T17:22:53Z", "type": "commit"}, {"oid": "115a7b43e264b061fc86801238adebc8dfe1d8d7", "url": "https://github.com/EssentialsX/Essentials/commit/115a7b43e264b061fc86801238adebc8dfe1d8d7", "message": "Merge remote-tracking branch 'origin/feature/3219' into feature/3219", "committedDate": "2020-06-08T17:23:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzMzgwNg==", "url": "https://github.com/EssentialsX/Essentials/pull/3328#discussion_r437033806", "bodyText": "Isn't the default supposed to be \"keep\"?", "author": "pop4959", "createdAt": "2020-06-08T22:22:25Z", "path": "Essentials/src/com/earth2me/essentials/Settings.java", "diffHunk": "@@ -976,6 +978,36 @@ public boolean areDeathMessagesEnabled() {\n         return config.getBoolean(\"death-messages\", true);\n     }\n \n+    private String vanishingItemPolicy;\n+\n+    public String _getVanishingItemsPolicy() {\n+        String value = config.getString(\"vanishing-items-policy\", \"keep\").toLowerCase(Locale.ENGLISH);\n+        if (!value.equals(\"delete\") && !value.equals(\"drop\") && !value.equals(\"keep\")) {\n+            value = \"delete\";", "originalCommit": "115a7b43e264b061fc86801238adebc8dfe1d8d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE2NTk5OQ==", "url": "https://github.com/EssentialsX/Essentials/pull/3328#discussion_r439165999", "bodyText": "Yes smh", "author": "JRoy", "createdAt": "2020-06-12T01:54:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzMzgwNg=="}], "type": "inlineReview", "revised_code": {"commit": "72863e584e032c5964b9cd502cf9c4d21f224e1c", "chunk": "diff --git a/Essentials/src/com/earth2me/essentials/Settings.java b/Essentials/src/com/earth2me/essentials/Settings.java\nindex 79b340851..6b4623cc0 100644\n--- a/Essentials/src/com/earth2me/essentials/Settings.java\n+++ b/Essentials/src/com/earth2me/essentials/Settings.java\n\n@@ -983,7 +983,7 @@ public class Settings implements net.ess3.api.ISettings {\n     public String _getVanishingItemsPolicy() {\n         String value = config.getString(\"vanishing-items-policy\", \"keep\").toLowerCase(Locale.ENGLISH);\n         if (!value.equals(\"delete\") && !value.equals(\"drop\") && !value.equals(\"keep\")) {\n-            value = \"delete\";\n+            value = \"keep\";\n         }\n         return value;\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzMzg0Mw==", "url": "https://github.com/EssentialsX/Essentials/pull/3328#discussion_r437033843", "bodyText": "=", "author": "pop4959", "createdAt": "2020-06-08T22:22:31Z", "path": "Essentials/src/com/earth2me/essentials/Settings.java", "diffHunk": "@@ -976,6 +978,36 @@ public boolean areDeathMessagesEnabled() {\n         return config.getBoolean(\"death-messages\", true);\n     }\n \n+    private String vanishingItemPolicy;\n+\n+    public String _getVanishingItemsPolicy() {\n+        String value = config.getString(\"vanishing-items-policy\", \"keep\").toLowerCase(Locale.ENGLISH);\n+        if (!value.equals(\"delete\") && !value.equals(\"drop\") && !value.equals(\"keep\")) {\n+            value = \"delete\";\n+        }\n+        return value;\n+    }\n+\n+    @Override\n+    public String getVanishingItemsPolicy() {\n+        return vanishingItemPolicy;\n+    }\n+\n+    private String bindingItemPolicy;\n+\n+    public String _getBindingItemsPolicy() {\n+        String value = config.getString(\"binding-items-policy\", \"keep\").toLowerCase(Locale.ENGLISH);\n+        if (!value.equals(\"delete\") && !value.equals(\"drop\") && !value.equals(\"keep\")) {\n+            value = \"delete\";", "originalCommit": "115a7b43e264b061fc86801238adebc8dfe1d8d7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "72863e584e032c5964b9cd502cf9c4d21f224e1c", "chunk": "diff --git a/Essentials/src/com/earth2me/essentials/Settings.java b/Essentials/src/com/earth2me/essentials/Settings.java\nindex 79b340851..6b4623cc0 100644\n--- a/Essentials/src/com/earth2me/essentials/Settings.java\n+++ b/Essentials/src/com/earth2me/essentials/Settings.java\n\n@@ -983,7 +983,7 @@ public class Settings implements net.ess3.api.ISettings {\n     public String _getVanishingItemsPolicy() {\n         String value = config.getString(\"vanishing-items-policy\", \"keep\").toLowerCase(Locale.ENGLISH);\n         if (!value.equals(\"delete\") && !value.equals(\"drop\") && !value.equals(\"keep\")) {\n-            value = \"delete\";\n+            value = \"keep\";\n         }\n         return value;\n     }\n"}}, {"oid": "72863e584e032c5964b9cd502cf9c4d21f224e1c", "url": "https://github.com/EssentialsX/Essentials/commit/72863e584e032c5964b9cd502cf9c4d21f224e1c", "message": "Fix defaults", "committedDate": "2020-06-12T01:53:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE0NjcwMw==", "url": "https://github.com/EssentialsX/Essentials/pull/3328#discussion_r440146703", "bodyText": "Might be a bit cleaner with a KeepInvPolicy enum rather than just strings?", "author": "mdcfe", "createdAt": "2020-06-15T12:41:29Z", "path": "Essentials/src/com/earth2me/essentials/Settings.java", "diffHunk": "@@ -976,6 +978,36 @@ public boolean areDeathMessagesEnabled() {\n         return config.getBoolean(\"death-messages\", true);\n     }\n \n+    private String vanishingItemPolicy;\n+", "originalCommit": "72863e584e032c5964b9cd502cf9c4d21f224e1c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4OTIwNw==", "url": "https://github.com/EssentialsX/Essentials/pull/3328#discussion_r440489207", "bodyText": "Not sure if there's much point to that, since otherwise it's just trying to parse strings to enums.", "author": "pop4959", "createdAt": "2020-06-15T22:50:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE0NjcwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ5NDUwNg==", "url": "https://github.com/EssentialsX/Essentials/pull/3328#discussion_r440494506", "bodyText": "@pop4959 I'd prefer an enum to magic values being used to determine behaviour, even if those magic values are strings.", "author": "mdcfe", "createdAt": "2020-06-15T23:07:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE0NjcwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ5NzgzMw==", "url": "https://github.com/EssentialsX/Essentials/pull/3328#discussion_r440497833", "bodyText": "Nothing really wrong with it, just adds an extra layer of code. Doesn't have any impact on the user, since they're still typing in the same strings.", "author": "pop4959", "createdAt": "2020-06-15T23:17:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE0NjcwMw=="}], "type": "inlineReview", "revised_code": {"commit": "dc8e0c6e783931f90ef9e6d661dd3928fb59f7c6", "chunk": "diff --git a/Essentials/src/com/earth2me/essentials/Settings.java b/Essentials/src/com/earth2me/essentials/Settings.java\nindex 6b4623cc0..5fb42dacf 100644\n--- a/Essentials/src/com/earth2me/essentials/Settings.java\n+++ b/Essentials/src/com/earth2me/essentials/Settings.java\n\n@@ -978,33 +979,35 @@ public class Settings implements net.ess3.api.ISettings {\n         return config.getBoolean(\"death-messages\", true);\n     }\n \n-    private String vanishingItemPolicy;\n+    private KeepInvPolicy vanishingItemPolicy;\n \n-    public String _getVanishingItemsPolicy() {\n+    public KeepInvPolicy _getVanishingItemsPolicy() {\n         String value = config.getString(\"vanishing-items-policy\", \"keep\").toLowerCase(Locale.ENGLISH);\n-        if (!value.equals(\"delete\") && !value.equals(\"drop\") && !value.equals(\"keep\")) {\n-            value = \"keep\";\n+        try {\n+            return KeepInvPolicy.valueOf(value.toUpperCase(Locale.ENGLISH));\n+        } catch (IllegalArgumentException e) {\n+            return KeepInvPolicy.KEEP;\n         }\n-        return value;\n     }\n \n     @Override\n-    public String getVanishingItemsPolicy() {\n+    public KeepInvPolicy getVanishingItemsPolicy() {\n         return vanishingItemPolicy;\n     }\n \n-    private String bindingItemPolicy;\n+    private KeepInvPolicy bindingItemPolicy;\n \n-    public String _getBindingItemsPolicy() {\n+    public KeepInvPolicy _getBindingItemsPolicy() {\n         String value = config.getString(\"binding-items-policy\", \"keep\").toLowerCase(Locale.ENGLISH);\n-        if (!value.equals(\"delete\") && !value.equals(\"drop\") && !value.equals(\"keep\")) {\n-            value = \"keep\";\n+        try {\n+            return KeepInvPolicy.valueOf(value.toUpperCase(Locale.ENGLISH));\n+        } catch (IllegalArgumentException e) {\n+            return KeepInvPolicy.KEEP;\n         }\n-        return value;\n     }\n \n     @Override\n-    public String getBindingItemsPolicy() {\n+    public KeepInvPolicy getBindingItemsPolicy() {\n         return bindingItemPolicy;\n     }\n \n"}}, {"oid": "36e34254f678e2cae1ec40bd1d5579156fd87271", "url": "https://github.com/EssentialsX/Essentials/commit/36e34254f678e2cae1ec40bd1d5579156fd87271", "message": "Merge branch '2.x' into feature/3219", "committedDate": "2020-06-15T13:17:28Z", "type": "commit"}, {"oid": "dc8e0c6e783931f90ef9e6d661dd3928fb59f7c6", "url": "https://github.com/EssentialsX/Essentials/commit/dc8e0c6e783931f90ef9e6d661dd3928fb59f7c6", "message": "Enum", "committedDate": "2020-06-15T14:27:28Z", "type": "commit"}]}