{"pr_number": 3263, "pr_title": "Fix clearing specific items in clearinventory", "pr_createdAt": "2020-05-12T04:16:33Z", "pr_url": "https://github.com/EssentialsX/Essentials/pull/3263", "timeline": [{"oid": "283ce14cd36605ed37e450b9e0936fb28b8ef259", "url": "https://github.com/EssentialsX/Essentials/commit/283ce14cd36605ed37e450b9e0936fb28b8ef259", "message": "Fix clearing specific items in clearinventory", "committedDate": "2020-05-12T04:05:57Z", "type": "commit"}, {"oid": "f1db9cfa3c82a6bfebb4fc03ea411f2b154b4335", "url": "https://github.com/EssentialsX/Essentials/commit/f1db9cfa3c82a6bfebb4fc03ea411f2b154b4335", "message": "Make sure mat/dat are added together", "committedDate": "2020-05-12T04:34:02Z", "type": "commit"}, {"oid": "4b66ec08cb206d16cf4db70418814bef341e0998", "url": "https://github.com/EssentialsX/Essentials/commit/4b66ec08cb206d16cf4db70418814bef341e0998", "message": "Clean up as per Ichbinjoe's suggestion", "committedDate": "2020-05-13T09:10:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMyMzM2MA==", "url": "https://github.com/EssentialsX/Essentials/pull/3263#discussion_r424323360", "bodyText": "I'd prefer this was replaced with a private enum, as done in #3191 - this variable only exists to control flow later on, and it's clearer if it uses a named enum constant than a magic number.", "author": "mdcfe", "createdAt": "2020-05-13T10:06:12Z", "path": "Essentials/src/com/earth2me/essentials/commands/Commandclearinventory.java", "diffHunk": "@@ -79,11 +80,28 @@ private void parseCommand(Server server, CommandSource sender, String commandLab\n         }\n     }\n \n-    protected void clearHandler(CommandSource sender, Player player, String[] args, int offset, boolean showExtended) throws Exception {\n-        short data = -1;\n+    private static class Item {\n+        private Material material;\n+        private short data;\n+\n+        public Item(Material material, short data) {\n+            this.material = material;\n+            this.data = data;\n+        }\n+\n+        public Material getMaterial() {\n+            return material;\n+        }\n+\n+        public short getData() {\n+            return data;\n+        }\n+    }\n+\n+    protected void clearHandler(CommandSource sender, Player player, String[] args, int offset, boolean showExtended) {\n         int type = -1;", "originalCommit": "4b66ec08cb206d16cf4db70418814bef341e0998", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9ed24c8fb8f20c3a10a1c2703e4c4c9c99d98152", "chunk": "diff --git a/Essentials/src/com/earth2me/essentials/commands/Commandclearinventory.java b/Essentials/src/com/earth2me/essentials/commands/Commandclearinventory.java\nindex 118d74117..98cf51664 100644\n--- a/Essentials/src/com/earth2me/essentials/commands/Commandclearinventory.java\n+++ b/Essentials/src/com/earth2me/essentials/commands/Commandclearinventory.java\n\n@@ -98,17 +98,21 @@ public class Commandclearinventory extends EssentialsCommand {\n         }\n     }\n \n+    private enum ClearHandlerType {\n+        ALL_EXCEPT_ARMOR, ALL_INCLUDING_ARMOR, SPECIFIC_ITEM\n+    }\n+\n     protected void clearHandler(CommandSource sender, Player player, String[] args, int offset, boolean showExtended) {\n-        int type = -1;\n-        int amount = -1;\n+        ClearHandlerType type = ClearHandlerType.ALL_EXCEPT_ARMOR;\n         final Set<Item> items = new HashSet<>();\n+        int amount = -1;\n \n         if (args.length > (offset + 1) && NumberUtil.isInt(args[(offset + 1)])) {\n             amount = Integer.parseInt(args[(offset + 1)]);\n         }\n         if (args.length > offset) {\n             if (args[offset].equalsIgnoreCase(\"**\")) {\n-                type = -2;\n+                type = ClearHandlerType.ALL_INCLUDING_ARMOR;\n             } else if (!args[offset].equalsIgnoreCase(\"*\")) {\n                 final String[] split = args[offset].split(\",\");\n                 for (String item : split) {\n"}}, {"oid": "9ed24c8fb8f20c3a10a1c2703e4c4c9c99d98152", "url": "https://github.com/EssentialsX/Essentials/commit/9ed24c8fb8f20c3a10a1c2703e4c4c9c99d98152", "message": "ClearHandlerType enum", "committedDate": "2020-05-13T10:17:50Z", "type": "commit"}, {"oid": "bdd66393fe2ea353a3a3218cffd6608bcfffa483", "url": "https://github.com/EssentialsX/Essentials/commit/bdd66393fe2ea353a3a3218cffd6608bcfffa483", "message": "remove unused comments", "committedDate": "2020-05-13T22:02:14Z", "type": "commit"}]}