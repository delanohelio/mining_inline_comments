{"pr_number": 3209, "pr_title": "Convert ignore list storage to UUID-based", "pr_createdAt": "2020-04-29T18:48:45Z", "pr_url": "https://github.com/EssentialsX/Essentials/pull/3209", "timeline": [{"oid": "ea255649d4f4e70de451f7d16353f28ab14533e7", "url": "https://github.com/EssentialsX/Essentials/commit/ea255649d4f4e70de451f7d16353f28ab14533e7", "message": "Convert ignore list storage to UUID-based", "committedDate": "2020-04-29T18:34:07Z", "type": "commit"}, {"oid": "8fa499f5d513905bcabad2bc711728b905502a70", "url": "https://github.com/EssentialsX/Essentials/commit/8fa499f5d513905bcabad2bc711728b905502a70", "message": "Use EssentialsUpgrade rather than on-the-fly conversion", "committedDate": "2020-04-30T18:25:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1Mzk5Mg==", "url": "https://github.com/EssentialsX/Essentials/pull/3209#discussion_r418253992", "bodyText": "I'd prefer we stored actual UUID objects, not Strings representing them", "author": "mdcfe", "createdAt": "2020-04-30T19:57:31Z", "path": "Essentials/src/com/earth2me/essentials/UserData.java", "diffHunk": "@@ -497,15 +497,17 @@ public boolean isIgnoredPlayer(final String userName) {\n     }\n \n     public boolean isIgnoredPlayer(IUser user) {\n-        return (ignoredPlayers.contains(user.getName().toLowerCase(Locale.ENGLISH)) && !user.isIgnoreExempt());\n+        return ignoredPlayers.contains(user.getBase().getUniqueId().toString()) && !user.isIgnoreExempt();\n     }\n \n     public void setIgnoredPlayer(IUser user, boolean set) {\n-        final String entry = user.getName().toLowerCase(Locale.ENGLISH);\n+        String uuid = user.getBase().getUniqueId().toString();", "originalCommit": "8fa499f5d513905bcabad2bc711728b905502a70", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI2NTkzOA==", "url": "https://github.com/EssentialsX/Essentials/pull/3209#discussion_r418265938", "bodyText": "Bit confused here: I'm pretty sure UUID::toString is already in a serializable format? You just use UUID::fromString to convert it back into a UUID object.", "author": "pop4959", "createdAt": "2020-04-30T20:21:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1Mzk5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI2ODU0Mw==", "url": "https://github.com/EssentialsX/Essentials/pull/3209#discussion_r418268543", "bodyText": "I mean I'd prefer we used the actual UUID type rather than masking it as a String - it's more obvious when reading source/method signatures that we're working with UUIDs as opposed to usernames.", "author": "mdcfe", "createdAt": "2020-04-30T20:26:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1Mzk5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI3MDUzMQ==", "url": "https://github.com/EssentialsX/Essentials/pull/3209#discussion_r418270531", "bodyText": "Oh OK I meant we're still using strings for storing in the userdata file, right? I might have just misunderstood what you said.", "author": "pop4959", "createdAt": "2020-04-30T20:30:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1Mzk5Mg=="}], "type": "inlineReview", "revised_code": {"commit": "28fa560cad4a439e1401d6bc7ecce8971cd4db7b", "chunk": "diff --git a/Essentials/src/com/earth2me/essentials/UserData.java b/Essentials/src/com/earth2me/essentials/UserData.java\nindex ac4508a6d..e013b310d 100644\n--- a/Essentials/src/com/earth2me/essentials/UserData.java\n+++ b/Essentials/src/com/earth2me/essentials/UserData.java\n\n@@ -497,11 +515,11 @@ public abstract class UserData extends PlayerExtension implements IConf {\n     }\n \n     public boolean isIgnoredPlayer(IUser user) {\n-        return ignoredPlayers.contains(user.getBase().getUniqueId().toString()) && !user.isIgnoreExempt();\n+        return ignoredPlayers.contains(user.getBase().getUniqueId()) && !user.isIgnoreExempt();\n     }\n \n     public void setIgnoredPlayer(IUser user, boolean set) {\n-        String uuid = user.getBase().getUniqueId().toString();\n+        UUID uuid = user.getBase().getUniqueId();\n         if (set) {\n             if (!ignoredPlayers.contains(uuid)) {\n                 ignoredPlayers.add(uuid);\n"}}, {"oid": "28fa560cad4a439e1401d6bc7ecce8971cd4db7b", "url": "https://github.com/EssentialsX/Essentials/commit/28fa560cad4a439e1401d6bc7ecce8971cd4db7b", "message": "Some more UUID stuff", "committedDate": "2020-04-30T22:26:34Z", "type": "commit"}, {"oid": "df0cf4db53004d372db89f41c2c197fa5e72aa46", "url": "https://github.com/EssentialsX/Essentials/commit/df0cf4db53004d372db89f41c2c197fa5e72aa46", "message": "Fix backwards compat", "committedDate": "2020-04-30T22:28:57Z", "type": "commit"}]}