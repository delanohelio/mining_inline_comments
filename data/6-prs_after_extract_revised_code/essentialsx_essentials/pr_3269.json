{"pr_number": 3269, "pr_title": "Add option to change disposal title via sign", "pr_createdAt": "2020-05-12T22:05:54Z", "pr_url": "https://github.com/EssentialsX/Essentials/pull/3269", "timeline": [{"oid": "52e8891040cfc80f1e43b9ba07e5e9c542fc6063", "url": "https://github.com/EssentialsX/Essentials/commit/52e8891040cfc80f1e43b9ba07e5e9c542fc6063", "message": "Add option to change disposal title via sign\n\nwHy iS tHiS eSsEnTaIl", "committedDate": "2020-05-12T22:04:48Z", "type": "commit"}, {"oid": "7be7201953f91064255898e809dd243c847ddeff", "url": "https://github.com/EssentialsX/Essentials/commit/7be7201953f91064255898e809dd243c847ddeff", "message": "Add permission node for naming signs", "committedDate": "2020-05-14T18:51:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMzODAzOQ==", "url": "https://github.com/EssentialsX/Essentials/pull/3269#discussion_r427338039", "bodyText": "This is a very subtle breaking change, but if server admins intentionally add leading spaces to the disposal locale string, title.trim() will remove them and break the layout. I'd prefer trimming the title only if it was set on the sign. Granted, I'm not sure if anyone really does this, but on the off chance people do we'll be breaking their disposal signs.", "author": "mdcfe", "createdAt": "2020-05-19T14:18:31Z", "path": "Essentials/src/com/earth2me/essentials/signs/SignDisposal.java", "diffHunk": "@@ -11,9 +12,23 @@ public SignDisposal() {\n         super(\"Disposal\");\n     }\n \n+    @Override\n+    protected boolean onSignCreate(ISign sign, User player, String username, IEssentials ess) throws SignException, ChargeException {\n+        if (!player.isAuthorized(\"essentials.signs.disposal.name\")) {\n+            sign.setLine(1, \"\");\n+            sign.setLine(2, \"\");\n+            sign.setLine(3, \"\");\n+        }\n+        return true;\n+    }\n+\n     @Override\n     protected boolean onSignInteract(final ISign sign, final User player, final String username, final IEssentials ess) {\n-        player.getBase().openInventory(ess.getServer().createInventory(player.getBase(), 36, tl(\"disposal\")));\n+        String title = sign.getLine(1) + \" \" + sign.getLine(2) + \" \" + sign.getLine(3);\n+        if (title.trim().isEmpty()) {\n+            title = tl(\"disposal\");\n+        }\n+        player.getBase().openInventory(ess.getServer().createInventory(player.getBase(), 36, title.trim()));", "originalCommit": "7be7201953f91064255898e809dd243c847ddeff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM4MzI0OA==", "url": "https://github.com/EssentialsX/Essentials/pull/3269#discussion_r427383248", "bodyText": "Changes applied :P", "author": "JRoy", "createdAt": "2020-05-19T15:14:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMzODAzOQ=="}], "type": "inlineReview", "revised_code": {"commit": "a3d8863fdf3066eeba4408eed0d6a75af5606cf0", "chunk": "diff --git a/Essentials/src/com/earth2me/essentials/signs/SignDisposal.java b/Essentials/src/com/earth2me/essentials/signs/SignDisposal.java\nindex 58838d7fc..c86d0ecbd 100644\n--- a/Essentials/src/com/earth2me/essentials/signs/SignDisposal.java\n+++ b/Essentials/src/com/earth2me/essentials/signs/SignDisposal.java\n\n@@ -24,11 +24,11 @@ public class SignDisposal extends EssentialsSign {\n \n     @Override\n     protected boolean onSignInteract(final ISign sign, final User player, final String username, final IEssentials ess) {\n-        String title = sign.getLine(1) + \" \" + sign.getLine(2) + \" \" + sign.getLine(3);\n-        if (title.trim().isEmpty()) {\n+        String title = (sign.getLine(1) + \" \" + sign.getLine(2) + \" \" + sign.getLine(3)).trim();\n+        if (title.isEmpty()) {\n             title = tl(\"disposal\");\n         }\n-        player.getBase().openInventory(ess.getServer().createInventory(player.getBase(), 36, title.trim()));\n+        player.getBase().openInventory(ess.getServer().createInventory(player.getBase(), 36, title));\n         return true;\n     }\n }\n"}}, {"oid": "a3d8863fdf3066eeba4408eed0d6a75af5606cf0", "url": "https://github.com/EssentialsX/Essentials/commit/a3d8863fdf3066eeba4408eed0d6a75af5606cf0", "message": "Remove trim for default disposal name\n\nSomething about \"maintaining default behavior,\" never met her.", "committedDate": "2020-05-19T15:13:50Z", "type": "commit"}]}