{"pr_number": 2209, "pr_title": "Improve assertions for RuntimeDataServiceIntegrationTest.testQueryPro\u2026", "pr_createdAt": "2020-08-26T12:02:41Z", "pr_url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2209", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzI1NTc3Mw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2209#discussion_r477255773", "bodyText": "can be replaced with method reference.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Assertions.assertThat(listProcesses).extracting(p -> p.getContainerId()).containsOnly(CONTAINER_ID);\n          \n          \n            \n                    Assertions.assertThat(listProcesses).extracting(ProcessInstanceCustomVars::getContainerId).containsOnly(CONTAINER_ID);", "author": "afalhambra", "createdAt": "2020-08-26T12:19:20Z", "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java", "diffHunk": "@@ -1857,21 +1857,17 @@ public void testQueryProcessesByVariables() throws Exception {\n \n \n         List<TaskSummary> tasks = taskClient.findTasksByStatusByProcessInstanceId(processInstanceId, null, 0, 10);\n-        assertNotNull(tasks);\n-        assertEquals(1, tasks.size());\n+        Assertions.assertThat(tasks).hasSize(1);\n \n         SearchQueryFilterSpec spec = new SearchQueryFilterSpec();\n         spec.setAttributesQueryParams(list(equalsTo(PROCESS_ATTR_DEPLOYMENT_ID, CONTAINER_ID)));\n         List<ProcessInstanceCustomVars> listProcesses = queryClient.queryProcessesByVariables(spec, 0, 2);\n-        assertNotNull(listProcesses);\n-        listProcesses.stream().forEach(e -> assertEquals(CONTAINER_ID, e.getContainerId()));\n+        Assertions.assertThat(listProcesses).extracting(p -> p.getContainerId()).containsOnly(CONTAINER_ID);", "originalCommit": "819ed4ce4a168c2365187b7970552cc029f674c8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "38197c59eebff7b6eec71174e9b1ca76c4c1feb3", "chunk": "diff --git a/kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java b/kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java\nindex c6d8f7861..d287ef7bf 100644\n--- a/kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java\n+++ b/kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java\n\n@@ -1862,12 +1862,12 @@ public class RuntimeDataServiceIntegrationTest extends JbpmKieServerBaseIntegrat\n         SearchQueryFilterSpec spec = new SearchQueryFilterSpec();\n         spec.setAttributesQueryParams(list(equalsTo(PROCESS_ATTR_DEPLOYMENT_ID, CONTAINER_ID)));\n         List<ProcessInstanceCustomVars> listProcesses = queryClient.queryProcessesByVariables(spec, 0, 2);\n-        Assertions.assertThat(listProcesses).extracting(p -> p.getContainerId()).containsOnly(CONTAINER_ID);\n+        Assertions.assertThat(listProcesses).extracting(ProcessInstanceCustomVars::getContainerId).containsOnly(CONTAINER_ID);\n \n         spec = new SearchQueryFilterSpec();\n         spec.setAttributesQueryParams(list(onlyActiveTasks(), equalsTo(PROCESS_ATTR_DEFINITION_ID, PROCESS_ID_USERTASK)));\n         List<ProcessInstanceUserTaskWithVariables> listTasks = queryClient.queryUserTaskByVariables(spec, 0, 2);\n-        Assertions.assertThat(listTasks).hasSize(1).extracting(p -> p.getProcessDefinitionId()).containsOnly(PROCESS_ID_USERTASK);\n+        Assertions.assertThat(listTasks).hasSize(1).extracting(ProcessInstanceUserTaskWithVariables::getProcessDefinitionId).containsOnly(PROCESS_ID_USERTASK);\n \n         this.taskClient.startTask(CONTAINER_ID, listTasks.get(0).getId(), \"yoda\");\n         this.taskClient.completeTask(CONTAINER_ID, listTasks.get(0).getId(), \"yoda\", Collections.emptyMap());\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzI1NjY5NA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2209#discussion_r477256694", "bodyText": "can be replaced with method reference.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Assertions.assertThat(listTasks).hasSize(1).extracting(p -> p.getProcessDefinitionId()).containsOnly(PROCESS_ID_USERTASK);\n          \n          \n            \n                    Assertions.assertThat(listTasks).hasSize(1).extracting(ProcessInstanceUserTaskWithVariables::getProcessDefinitionId).containsOnly(PROCESS_ID_USERTASK);", "author": "afalhambra", "createdAt": "2020-08-26T12:20:52Z", "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java", "diffHunk": "@@ -1857,21 +1857,17 @@ public void testQueryProcessesByVariables() throws Exception {\n \n \n         List<TaskSummary> tasks = taskClient.findTasksByStatusByProcessInstanceId(processInstanceId, null, 0, 10);\n-        assertNotNull(tasks);\n-        assertEquals(1, tasks.size());\n+        Assertions.assertThat(tasks).hasSize(1);\n \n         SearchQueryFilterSpec spec = new SearchQueryFilterSpec();\n         spec.setAttributesQueryParams(list(equalsTo(PROCESS_ATTR_DEPLOYMENT_ID, CONTAINER_ID)));\n         List<ProcessInstanceCustomVars> listProcesses = queryClient.queryProcessesByVariables(spec, 0, 2);\n-        assertNotNull(listProcesses);\n-        listProcesses.stream().forEach(e -> assertEquals(CONTAINER_ID, e.getContainerId()));\n+        Assertions.assertThat(listProcesses).extracting(p -> p.getContainerId()).containsOnly(CONTAINER_ID);\n \n         spec = new SearchQueryFilterSpec();\n         spec.setAttributesQueryParams(list(onlyActiveTasks(), equalsTo(PROCESS_ATTR_DEFINITION_ID, PROCESS_ID_USERTASK)));\n         List<ProcessInstanceUserTaskWithVariables> listTasks = queryClient.queryUserTaskByVariables(spec, 0, 2);\n-        assertNotNull(listTasks);\n-        assertEquals(1, listTasks.size());\n-        listTasks.stream().forEach(e -> assertEquals(PROCESS_ID_USERTASK, e.getProcessDefinitionId()));\n+        Assertions.assertThat(listTasks).hasSize(1).extracting(p -> p.getProcessDefinitionId()).containsOnly(PROCESS_ID_USERTASK);", "originalCommit": "819ed4ce4a168c2365187b7970552cc029f674c8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "38197c59eebff7b6eec71174e9b1ca76c4c1feb3", "chunk": "diff --git a/kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java b/kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java\nindex c6d8f7861..d287ef7bf 100644\n--- a/kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java\n+++ b/kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/RuntimeDataServiceIntegrationTest.java\n\n@@ -1862,12 +1862,12 @@ public class RuntimeDataServiceIntegrationTest extends JbpmKieServerBaseIntegrat\n         SearchQueryFilterSpec spec = new SearchQueryFilterSpec();\n         spec.setAttributesQueryParams(list(equalsTo(PROCESS_ATTR_DEPLOYMENT_ID, CONTAINER_ID)));\n         List<ProcessInstanceCustomVars> listProcesses = queryClient.queryProcessesByVariables(spec, 0, 2);\n-        Assertions.assertThat(listProcesses).extracting(p -> p.getContainerId()).containsOnly(CONTAINER_ID);\n+        Assertions.assertThat(listProcesses).extracting(ProcessInstanceCustomVars::getContainerId).containsOnly(CONTAINER_ID);\n \n         spec = new SearchQueryFilterSpec();\n         spec.setAttributesQueryParams(list(onlyActiveTasks(), equalsTo(PROCESS_ATTR_DEFINITION_ID, PROCESS_ID_USERTASK)));\n         List<ProcessInstanceUserTaskWithVariables> listTasks = queryClient.queryUserTaskByVariables(spec, 0, 2);\n-        Assertions.assertThat(listTasks).hasSize(1).extracting(p -> p.getProcessDefinitionId()).containsOnly(PROCESS_ID_USERTASK);\n+        Assertions.assertThat(listTasks).hasSize(1).extracting(ProcessInstanceUserTaskWithVariables::getProcessDefinitionId).containsOnly(PROCESS_ID_USERTASK);\n \n         this.taskClient.startTask(CONTAINER_ID, listTasks.get(0).getId(), \"yoda\");\n         this.taskClient.completeTask(CONTAINER_ID, listTasks.get(0).getId(), \"yoda\", Collections.emptyMap());\n"}}, {"oid": "38197c59eebff7b6eec71174e9b1ca76c4c1feb3", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/38197c59eebff7b6eec71174e9b1ca76c4c1feb3", "message": "Improve assertions for RuntimeDataServiceIntegrationTest.testQueryProcessesByVariables()", "committedDate": "2020-08-26T13:59:55Z", "type": "commit"}, {"oid": "38197c59eebff7b6eec71174e9b1ca76c4c1feb3", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/38197c59eebff7b6eec71174e9b1ca76c4c1feb3", "message": "Improve assertions for RuntimeDataServiceIntegrationTest.testQueryProcessesByVariables()", "committedDate": "2020-08-26T13:59:55Z", "type": "forcePushed"}]}