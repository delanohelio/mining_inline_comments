{"pr_number": 2036, "pr_title": "[JBPM-8910] How to use a \"OR\" query operator in a custom query in the query-parameters", "pr_createdAt": "2020-03-04T08:42:07Z", "pr_url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2036", "timeline": [{"oid": "98bafb8207aa262c43cb4fa8da30feae01912077", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/98bafb8207aa262c43cb4fa8da30feae01912077", "message": "[JBPM-8910] How to use a \"OR\" query operator in a custom query in the query-parameters\n\nsupporting omision in cond-column when the expression is logical", "committedDate": "2020-03-04T08:39:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU4NTU2Nw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2036#discussion_r387585567", "bodyText": "I think this condition always matches, so it shouldn't be needed, wdyt?", "author": "gmunozfe", "createdAt": "2020-03-04T10:45:04Z", "path": "kie-server-parent/kie-server-api/src/main/java/org/kie/server/api/marshalling/json/JSONMarshaller.java", "diffHunk": "@@ -781,10 +781,20 @@ protected Object mapObject(JsonParser jp, DeserializationContext ctxt) throws IO\n                     List condValues = (List) result.get(\"cond-values\");\n                     return new QueryParam(column, op, condValues);\n                 }\n-                return result;\n+\n+                return wrapCustomObject(result);\n             }\n         }\n \n+        public Object wrapCustomObject(Map<String, Object> result) {\n+            if (result.containsKey(\"cond-operator\")) {", "originalCommit": "98bafb8207aa262c43cb4fa8da30feae01912077", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcwNDMwNQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2036#discussion_r387704305", "bodyText": "I don't think so contains key only will be true if the object has that property. Do you mind to test what you are thinking ?", "author": "elguardian", "createdAt": "2020-03-04T14:33:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU4NTU2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcyNDE2NQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2036#discussion_r387724165", "bodyText": "Right, forget my comment, I was only thinking in json with queryparams", "author": "gmunozfe", "createdAt": "2020-03-04T15:03:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU4NTU2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcyODA4NA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2036#discussion_r387728084", "bodyText": "BTW, the code-smell that SonarCloud complains, is related to convert \"cond-operator\" (4 times) into a constant. It may be also applied to \"cond-column\" and \"cond-values\", but it's up to you as nice-to-have.", "author": "gmunozfe", "createdAt": "2020-03-04T15:09:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU4NTU2Nw=="}], "type": "inlineReview", "revised_code": null}]}