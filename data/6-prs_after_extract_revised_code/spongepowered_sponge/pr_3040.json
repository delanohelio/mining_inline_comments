{"pr_number": 3040, "pr_title": "Implement new trade offer logic", "pr_createdAt": "2020-07-04T05:20:48Z", "pr_url": "https://github.com/SpongePowered/Sponge/pull/3040", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc0MTA2OQ==", "url": "https://github.com/SpongePowered/Sponge/pull/3040#discussion_r449741069", "bodyText": "What's the difference here?", "author": "gabizou", "createdAt": "2020-07-04T05:21:53Z", "path": "src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java", "diffHunk": "@@ -53,9 +54,12 @@\n     private int useCount;\n     private int maxUses;\n     private boolean allowsExperience;\n+    private int merchantExperienceGranted;\n+    private double priceGrowthMultiplier;\n+    private int demandBonus;\n \n     public SpongeTradeOfferBuilder() {\n-        super(TradeOffer.class, 1);\n+        super(TradeOffer.class, 2);", "originalCommit": "ac0139c2340d31adf1e66435968da873a5ca14ab", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1bed56ce51c959b4ef4a6fecc8fe8f94a4bdf91b", "chunk": "diff --git a/src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java b/src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java\nindex 3fc3cf2a7..874e36b7e 100644\n--- a/src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java\n+++ b/src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java\n\n@@ -59,7 +59,7 @@\n     private int demandBonus;\n \n     public SpongeTradeOfferBuilder() {\n-        super(TradeOffer.class, 2);\n+        super(TradeOffer.class, 1);\n         this.reset();\n     }\n \n"}}, {"oid": "1bed56ce51c959b4ef4a6fecc8fe8f94a4bdf91b", "url": "https://github.com/SpongePowered/Sponge/commit/1bed56ce51c959b4ef4a6fecc8fe8f94a4bdf91b", "message": "Implement new trade offer logic", "committedDate": "2020-07-04T05:31:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNjM5OQ==", "url": "https://github.com/SpongePowered/Sponge/pull/3040#discussion_r451916399", "bodyText": "Can the second item not be null? I thought we allowed it to be null implicitly?", "author": "gabizou", "createdAt": "2020-07-09T01:43:44Z", "path": "src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java", "diffHunk": "@@ -68,6 +72,7 @@ public SpongeTradeOfferBuilder() {\n \n     @Override\n     public TradeOffer.Builder secondBuyingItem(final ItemStack item) {\n+        Preconditions.checkNotNull(item, \"Second buying item cannot be null\");", "originalCommit": "1bed56ce51c959b4ef4a6fecc8fe8f94a4bdf91b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc0Njk2NA==", "url": "https://github.com/SpongePowered/Sponge/pull/3040#discussion_r454746964", "bodyText": "The item can be empty.", "author": "i509VCB", "createdAt": "2020-07-15T02:07:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNjM5OQ=="}], "type": "inlineReview", "revised_code": {"commit": "1fe22fff5bc7c7db9fa53a65a0f438ccae3b4628", "chunk": "diff --git a/src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java b/src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java\nindex 874e36b7e..07154d1d6 100644\n--- a/src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java\n+++ b/src/main/java/org/spongepowered/common/item/merchant/SpongeTradeOfferBuilder.java\n\n@@ -70,16 +70,15 @@ public SpongeTradeOfferBuilder() {\n         return this;\n     }\n \n+    @SuppressWarnings(\"ConstantConditions\")\n     @Override\n     public TradeOffer.Builder secondBuyingItem(final ItemStack item) {\n-        Preconditions.checkNotNull(item, \"Second buying item cannot be null\");\n-        this.secondItem = item.createSnapshot();\n+        this.secondItem = item != null ? item.createSnapshot() : ItemStackSnapshot.empty();\n         return this;\n     }\n \n     @Override\n     public TradeOffer.Builder sellingItem(final ItemStack item) {\n-        checkNotNull(item, \"Selling item cannot be null\");\n         this.sellingItem = item.createSnapshot();\n         return this;\n     }\n"}}, {"oid": "1854ca664c7df0785029c432e512b96ce82af9d4", "url": "https://github.com/SpongePowered/Sponge/commit/1854ca664c7df0785029c432e512b96ce82af9d4", "message": "Implement new trade offer logic", "committedDate": "2020-07-15T02:03:57Z", "type": "forcePushed"}, {"oid": "1fe22fff5bc7c7db9fa53a65a0f438ccae3b4628", "url": "https://github.com/SpongePowered/Sponge/commit/1fe22fff5bc7c7db9fa53a65a0f438ccae3b4628", "message": "Implement new trade offer logic", "committedDate": "2020-07-15T02:11:42Z", "type": "commit"}, {"oid": "1fe22fff5bc7c7db9fa53a65a0f438ccae3b4628", "url": "https://github.com/SpongePowered/Sponge/commit/1fe22fff5bc7c7db9fa53a65a0f438ccae3b4628", "message": "Implement new trade offer logic", "committedDate": "2020-07-15T02:11:42Z", "type": "forcePushed"}]}