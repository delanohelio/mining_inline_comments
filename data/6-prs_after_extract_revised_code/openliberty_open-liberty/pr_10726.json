{"pr_number": 10726, "pr_title": "initial dbtaskstore methods to create, read, and update the partition entry for polling", "pr_createdAt": "2020-02-04T21:58:03Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/10726", "timeline": [{"oid": "2d86771aced0291ca0e7429123a62dc80322d851", "url": "https://github.com/OpenLiberty/open-liberty/commit/2d86771aced0291ca0e7429123a62dc80322d851", "message": "Issue #10277 initial dbtaskstore methods to create, read, and update the partition entry for polling", "committedDate": "2020-02-04T21:55:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwNzI4NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10726#discussion_r375307285", "bodyText": "Javadoc should say \"Writes...\" or \"Updates...\" instead of \"Reads...\".", "author": "nmittles", "createdAt": "2020-02-05T15:00:43Z", "path": "dev/com.ibm.ws.concurrent.persistent/src/com/ibm/wsspi/concurrent/persistent/TaskStore.java", "diffHunk": "@@ -370,4 +388,15 @@\n      * @throws Exception if an error occurs when attempting to update the persistent task store.\n      */\n     int transfer(Long maxTaskId, long oldPartitionId, long newPartitionId) throws Exception;\n+\n+    /**\n+     * Reads information from the partition entry for polling coordination.", "originalCommit": "2d86771aced0291ca0e7429123a62dc80322d851", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM1NDQ4Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10726#discussion_r375354487", "bodyText": "Good catch, I'm fixing this and also cleaning up the parameters to align with the designed solution now that there is some more clarity", "author": "njr-11", "createdAt": "2020-02-05T16:12:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwNzI4NQ=="}], "type": "inlineReview", "revised_code": {"commit": "54a1ec159559e623334bec479fcb535ba1bf5876", "chunk": "diff --git a/dev/com.ibm.ws.concurrent.persistent/src/com/ibm/wsspi/concurrent/persistent/TaskStore.java b/dev/com.ibm.ws.concurrent.persistent/src/com/ibm/wsspi/concurrent/persistent/TaskStore.java\nindex 6de814df72..6ee03ad76a 100644\n--- a/dev/com.ibm.ws.concurrent.persistent/src/com/ibm/wsspi/concurrent/persistent/TaskStore.java\n+++ b/dev/com.ibm.ws.concurrent.persistent/src/com/ibm/wsspi/concurrent/persistent/TaskStore.java\n\n@@ -390,13 +390,12 @@ public interface TaskStore {\n     int transfer(Long maxTaskId, long oldPartitionId, long newPartitionId) throws Exception;\n \n     /**\n-     * Reads information from the partition entry for polling coordination.\n+     * Writes a new expiry and last-updated timestamp to the partition entry for polling coordination.\n      *\n      * @param partitionId unique identifier of the partition entry for polling coordination.\n      * @param newExpiry   the new expiry value to use.\n-     * @param otherStuff  TODO what we need will depend on the algorithm that is chosen\n      * @return true if the partition entry for polling was updated. Otherwise false.\n      * @throws Exception if an error occurs accessing the persistent store.\n      */\n-    boolean updatePollInfo(long partitionId, long newExpiry, String otherStuff) throws Exception;\n+    boolean updatePollInfo(long partitionId, long newExpiry) throws Exception;\n }\n"}}, {"oid": "54a1ec159559e623334bec479fcb535ba1bf5876", "url": "https://github.com/OpenLiberty/open-liberty/commit/54a1ec159559e623334bec479fcb535ba1bf5876", "message": "Issue #10277 fix code review comment and update parameters per expected solution", "committedDate": "2020-02-05T16:07:12Z", "type": "commit"}]}