{"pr_number": 14385, "pr_title": "Upgrade JAX-RS / MP Rest Client CXF bundles to 3.4.1 Snapshot", "pr_createdAt": "2020-10-07T22:55:33Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14385", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM4MDMzOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14385#discussion_r501380338", "bodyText": "is this going to affect any customers who might be setting this property? Or do we not expose this property and we're fine to just use CXF's property?", "author": "WhiteCat22", "createdAt": "2020-10-08T00:15:50Z", "path": "dev/com.ibm.ws.jaxrs.2.0.client/src/com/ibm/ws/jaxrs20/client/security/LibertyJaxRsClientSSLOutInterceptor.java", "diffHunk": "@@ -68,7 +68,7 @@ public void handleMessage(Message message) throws Fault {\n             return; // only process HTTPS requests\n         }\n \n-        if (!overrideUserTLS && PropertyUtils.isTrue(message.get(\"com.ibm.ws.jaxrs.client.security.skipSSLConfigInterceptor\"))) {", "originalCommit": "22ba86e8fe56c54725ff3ca28f1bc350925e1da4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg2NzQ0Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14385#discussion_r501867446", "bodyText": "is this going to affect any customers who might be setting this property? Or do we not expose this property and we're fine to just use CXF's property?\n\nThe latter.  We don't expose this property - it is only used internally for cases where the user has invoked an SSL-related API in either the JAX-RS Client or MP Rest Client - then we set that property so that we override the normal SSL config process with the setting specified by the user.", "author": "andymc12", "createdAt": "2020-10-08T16:50:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM4MDMzOA=="}], "type": "inlineReview", "revised_code": {"commit": "174dd8b1adaf34f29eb1c9b7be389bb667fd7eb9", "chunk": "diff --git a/dev/com.ibm.ws.jaxrs.2.0.client/src/com/ibm/ws/jaxrs20/client/security/LibertyJaxRsClientSSLOutInterceptor.java b/dev/com.ibm.ws.jaxrs.2.0.client/src/com/ibm/ws/jaxrs20/client/security/LibertyJaxRsClientSSLOutInterceptor.java\nindex 0327a57ee2..c6b08d3a79 100644\n--- a/dev/com.ibm.ws.jaxrs.2.0.client/src/com/ibm/ws/jaxrs20/client/security/LibertyJaxRsClientSSLOutInterceptor.java\n+++ b/dev/com.ibm.ws.jaxrs.2.0.client/src/com/ibm/ws/jaxrs20/client/security/LibertyJaxRsClientSSLOutInterceptor.java\n\n@@ -68,7 +68,7 @@ public class LibertyJaxRsClientSSLOutInterceptor extends AbstractPhaseIntercepto\n             return; // only process HTTPS requests\n         }\n \n-        if (!overrideUserTLS && PropertyUtils.isTrue(message.get(\"org.apache.cxf.microprofile.client.sslConfigProvided\"))) {\n+        if (!overrideUserTLS && PropertyUtils.isTrue(message.get(\"com.ibm.ws.jaxrs.client.security.skipSSLConfigInterceptor\"))) {\n             return; // SSL config already provided\n         }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM4MDk2MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14385#discussion_r501380960", "bodyText": "\"changed\" ;)", "author": "WhiteCat22", "createdAt": "2020-10-08T00:18:16Z", "path": "dev/com.ibm.ws.jaxrs.2.0.common/src/org/apache/cxf/transports/http/configuration/HTTPClientPolicy.java", "diffHunk": "@@ -0,0 +1,507 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package org.apache.cxf.transports.http.configuration;\n+\n+import java.beans.PropertyChangeListener;\n+import java.beans.PropertyChangeSupport;\n+import java.util.HashMap;\n+import java.util.Map;\n+import javax.xml.bind.annotation.XmlAccessType;\n+import javax.xml.bind.annotation.XmlAccessorType;\n+import javax.xml.bind.annotation.XmlAnyAttribute;\n+import javax.xml.bind.annotation.XmlAttribute;\n+import javax.xml.bind.annotation.XmlTransient;\n+import javax.xml.bind.annotation.XmlType;\n+import javax.xml.namespace.QName;\n+\n+/**\n+ * This is a generated class from CXF. Between the 3.1.X and 3.4.X streams certain\n+ * methods changes from using {@code int} to {@code java.lang.Integer} which breaks", "originalCommit": "22ba86e8fe56c54725ff3ca28f1bc350925e1da4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "47272d065cb4d7edde174a5cbadddef9635db5b8", "chunk": "diff --git a/dev/com.ibm.ws.jaxrs.2.0.common/src/org/apache/cxf/transports/http/configuration/HTTPClientPolicy.java b/dev/com.ibm.ws.jaxrs.2.0.common/src/org/apache/cxf/transports/http/configuration/HTTPClientPolicy.java\nindex dcee01cb03..0410c71d89 100644\n--- a/dev/com.ibm.ws.jaxrs.2.0.common/src/org/apache/cxf/transports/http/configuration/HTTPClientPolicy.java\n+++ b/dev/com.ibm.ws.jaxrs.2.0.common/src/org/apache/cxf/transports/http/configuration/HTTPClientPolicy.java\n\n@@ -24,7 +24,7 @@ import javax.xml.namespace.QName;\n \n /**\n  * This is a generated class from CXF. Between the 3.1.X and 3.4.X streams certain\n- * methods changes from using {@code int} to {@code java.lang.Integer} which breaks\n+ * methods changed from using {@code int} to {@code java.lang.Integer} which breaks\n  * at runtime if the binaries of the callers were compiled against the wrong version.\n  * So this file is overlayed to pull in the latest changes to allow the older code to\n  * work with the newer.\n"}}, {"oid": "47272d065cb4d7edde174a5cbadddef9635db5b8", "url": "https://github.com/OpenLiberty/open-liberty/commit/47272d065cb4d7edde174a5cbadddef9635db5b8", "message": "Review comments and tweak to fix client failures", "committedDate": "2020-10-09T02:25:34Z", "type": "forcePushed"}, {"oid": "174dd8b1adaf34f29eb1c9b7be389bb667fd7eb9", "url": "https://github.com/OpenLiberty/open-liberty/commit/174dd8b1adaf34f29eb1c9b7be389bb667fd7eb9", "message": "Use EXACT coordinates for MP Rest Client APIs", "committedDate": "2020-10-09T12:19:12Z", "type": "commit"}, {"oid": "f893b009cbc2aee78a22362905e8e698dd335796", "url": "https://github.com/OpenLiberty/open-liberty/commit/f893b009cbc2aee78a22362905e8e698dd335796", "message": "Upgrade JAX-RS bundles to CXF 3.4.1-SNAPSHOT", "committedDate": "2020-10-09T12:19:13Z", "type": "commit"}, {"oid": "32dcb97099026e68ac61126b993d40e11d91ac44", "url": "https://github.com/OpenLiberty/open-liberty/commit/32dcb97099026e68ac61126b993d40e11d91ac44", "message": "Review comments and tweak to fix client failures", "committedDate": "2020-10-09T12:19:13Z", "type": "commit"}, {"oid": "32dcb97099026e68ac61126b993d40e11d91ac44", "url": "https://github.com/OpenLiberty/open-liberty/commit/32dcb97099026e68ac61126b993d40e11d91ac44", "message": "Review comments and tweak to fix client failures", "committedDate": "2020-10-09T12:19:13Z", "type": "forcePushed"}]}