{"pr_number": 14516, "pr_title": "Initial porting of JMS security FAT to open-liberty", "pr_createdAt": "2020-10-15T22:56:25Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14516", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ4MTQxNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14516#discussion_r506481414", "bodyText": "I see that you annotated all test classes, less JMSMDBTest.java, with @Ignore to prevent them from executing during builds.  While this FAT is still running in CL we should run only the jakarta EE9 version of this FAT on OL.  Please modify the repeat rule to run the jakarta EE9 version of the FAT, only.  I don\u2019t see any reason to run the java EE8 version of any jms20security tests until we disable and remove the CL FAT.  This should do the trick:\n@ClassRule public static RepeatTests r = RepeatTests.with(new JakartaEE9Action()); // run all tests with EE9 features+packages", "author": "dazavala", "createdAt": "2020-10-16T14:25:20Z", "path": "dev/com.ibm.ws.messaging.open_jms20security_fat/fat/src/com/ibm/ws/messaging/JMS20security/fat/FATSuite.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.messaging.JMS20security.fat;\n+\n+import org.junit.ClassRule;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Suite;\n+import org.junit.runners.Suite.SuiteClasses;\n+\n+import com.ibm.ws.messaging.JMS20.fat.ContextInject.JMSContextInjectTest;\n+import com.ibm.ws.messaging.JMS20.fat.DurableUnshared.DurableUnshared;\n+import com.ibm.ws.messaging.JMS20.fat.MDB.JMSMDBTest;\n+import com.ibm.ws.messaging.JMS20.fat.TemporaryQueue.JMSContextTest_118066;\n+import com.ibm.ws.messaging.JMS20.fat.TemporaryQueue.JMSContextTest_118068;\n+import com.ibm.ws.messaging.JMS20.fat.Transaction.JMSContextTest_118065;\n+import com.ibm.ws.messaging.JMS20security.fat.DCFTest.JMSDefaultConnectionFactorySecurityTest;\n+import com.ibm.ws.messaging.JMS20security.fat.JMSConsumerTest.JMSConsumerTest;\n+import com.ibm.ws.messaging.JMS20security.fat.JMSContextTest.JMSContextTest;\n+\n+import componenttest.rules.repeater.JakartaEE9Action;\n+import componenttest.rules.repeater.RepeatTests;\n+\n+@RunWith(Suite.class)\n+@SuiteClasses({\n+\n+                DummyTest.class,\n+                JMSContextTest.class,\n+                JMSConsumerTest.class,\n+                JMSContextTest_118066.class,\n+                JMSContextTest_118068.class,\n+                JMSContextTest_118065.class,\n+                DurableUnshared.class,\n+                JMSContextInjectTest.class,\n+                JMSDefaultConnectionFactorySecurityTest.class,\n+                JMSMDBTest.class\n+\n+})\n+public class FATSuite {\n+\n+    @ClassRule", "originalCommit": "065717b53ecdd07751c145599ae5275b63654da5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzMyMTY3Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14516#discussion_r507321676", "bodyText": "done!", "author": "anjumfatima90", "createdAt": "2020-10-19T01:26:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ4MTQxNA=="}], "type": "inlineReview", "revised_code": {"commit": "9150cc60ee3f9edc4509718e38c5cd49b48dbc85", "chunk": "diff --git a/dev/com.ibm.ws.messaging.open_jms20security_fat/fat/src/com/ibm/ws/messaging/JMS20security/fat/FATSuite.java b/dev/com.ibm.ws.messaging.open_jms20security_fat/fat/src/com/ibm/ws/messaging/JMS20security/fat/FATSuite.java\nindex 67e63e5f92..fd3a2cc106 100755\n--- a/dev/com.ibm.ws.messaging.open_jms20security_fat/fat/src/com/ibm/ws/messaging/JMS20security/fat/FATSuite.java\n+++ b/dev/com.ibm.ws.messaging.open_jms20security_fat/fat/src/com/ibm/ws/messaging/JMS20security/fat/FATSuite.java\n\n@@ -46,6 +46,5 @@ import componenttest.rules.repeater.RepeatTests;\n public class FATSuite {\n \n     @ClassRule\n-    public static RepeatTests r = RepeatTests.withoutModification() // run all tests as-is (e.g. EE8 features)\n-                    .andWith(new JakartaEE9Action()); // run all tests again with EE9 features+packages\n+    public static RepeatTests r = RepeatTests.with(new JakartaEE9Action()); // run all tests with EE9 features+packages\n }\n"}}, {"oid": "9150cc60ee3f9edc4509718e38c5cd49b48dbc85", "url": "https://github.com/OpenLiberty/open-liberty/commit/9150cc60ee3f9edc4509718e38c5cd49b48dbc85", "message": "Initial porting of JMS security FAT to open-liberty\n\nRunning only JMSMDBTest, all other tests are ignored", "committedDate": "2020-10-19T01:24:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU4NjAzOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14516#discussion_r507586039", "bodyText": "Please remove this ASAP!", "author": "tevans78", "createdAt": "2020-10-19T09:01:36Z", "path": "dev/com.ibm.ws.messaging.open_jms20security_fat/test-applications/mdbapp/src/mdb/EJBAnnotatedMessageDrivenBean.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*\n+ * IBM Confidential", "originalCommit": "9150cc60ee3f9edc4509718e38c5cd49b48dbc85", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU4NjU4MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14516#discussion_r507586581", "bodyText": "Please pay extra attention when porting code from WebSphere Liberty.", "author": "tevans78", "createdAt": "2020-10-19T09:02:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU4NjAzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1Mzc4MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14516#discussion_r507753781", "bodyText": "Sure, thanks!  Done.", "author": "anjumfatima90", "createdAt": "2020-10-19T13:39:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU4NjAzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUxNDg1NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14516#discussion_r508514854", "bodyText": "The change is in.", "author": "dazavala", "createdAt": "2020-10-20T13:43:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU4NjAzOQ=="}], "type": "inlineReview", "revised_code": {"commit": "e14191ff2b8d36c434a76d723474accd4385104f", "chunk": "diff --git a/dev/com.ibm.ws.messaging.open_jms20security_fat/test-applications/mdbapp/src/mdb/EJBAnnotatedMessageDrivenBean.java b/dev/com.ibm.ws.messaging.open_jms20security_fat/test-applications/mdbapp/src/mdb/EJBAnnotatedMessageDrivenBean.java\nindex 1b313a98b7..a4933082e7 100755\n--- a/dev/com.ibm.ws.messaging.open_jms20security_fat/test-applications/mdbapp/src/mdb/EJBAnnotatedMessageDrivenBean.java\n+++ b/dev/com.ibm.ws.messaging.open_jms20security_fat/test-applications/mdbapp/src/mdb/EJBAnnotatedMessageDrivenBean.java\n\n@@ -1,14 +1,3 @@\n-/*\n- * IBM Confidential\n- *\n- * OCO Source Materials\n- *\n- * WLP Copyright IBM Corp. 2015\n- *\n- * The source code for this program is not published or otherwise divested\n- * of its trade secrets, irrespective of what has been deposited with the\n- * U.S. Copyright Office.\n- */\n /*******************************************************************************\n  * Copyright (c) 2020 IBM Corporation and others.\n  * All rights reserved. This program and the accompanying materials\n"}}, {"oid": "e14191ff2b8d36c434a76d723474accd4385104f", "url": "https://github.com/OpenLiberty/open-liberty/commit/e14191ff2b8d36c434a76d723474accd4385104f", "message": "Initial porting of JMS security FAT to open-liberty\n\nRunning only JMSMDBTest, all other tests are ignored", "committedDate": "2020-10-19T13:40:59Z", "type": "commit"}, {"oid": "e14191ff2b8d36c434a76d723474accd4385104f", "url": "https://github.com/OpenLiberty/open-liberty/commit/e14191ff2b8d36c434a76d723474accd4385104f", "message": "Initial porting of JMS security FAT to open-liberty\n\nRunning only JMSMDBTest, all other tests are ignored", "committedDate": "2020-10-19T13:40:59Z", "type": "forcePushed"}]}