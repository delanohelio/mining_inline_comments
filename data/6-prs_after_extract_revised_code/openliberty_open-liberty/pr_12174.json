{"pr_number": 12174, "pr_title": "enable Jakarta for transaction context", "pr_createdAt": "2020-05-13T21:11:41Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12174", "timeline": [{"oid": "2e229bc877e51094c90445cc0445494b731b6721", "url": "https://github.com/OpenLiberty/open-liberty/commit/2e229bc877e51094c90445cc0445494b731b6721", "message": "Issue #11329 enable Jakarta for transaction context", "committedDate": "2020-05-13T21:09:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc0NjQxMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12174#discussion_r424746412", "bodyText": "Missing \"x\" in \"javax\".  Should be:\njavax.enterprise.concurrent.ManagedScheduledExecutorService", "author": "nmittles", "createdAt": "2020-05-13T21:38:55Z", "path": "dev/com.ibm.ws.concurrent_fat/test-bundles/test.resource/src/test/resource/internal/TestResource.java", "diffHunk": "@@ -68,12 +66,18 @@ public Object run() throws Exception {\n                     if (!\"com.ibm.ws.threading.internal.ScheduledExecutorImpl\".equals(componentName))\n                         throw new Exception(\"Unexpected ScheduledExecutorService with highest service.ranking: \" + schedExecSvcRef);\n \n-                    ServiceReference<ManagedExecutorService> mgdExecSvcRef = bundleContext.getServiceReference(ManagedExecutorService.class);\n+                    ServiceReference<?> mgdExecSvcRef = bundleContext.getServiceReference(\"jakarta.enterprise.concurrent.ManagedExecutorService\");\n+                    if (mgdExecSvcRef == null)\n+                        mgdExecSvcRef = bundleContext.getServiceReference(\"javax.enterprise.concurrent.ManagedExecutorService\");\n+\n                     String displayId = (String) mgdExecSvcRef.getProperty(\"config.displayId\");\n                     if (!\"managedExecutorService[DefaultManagedExecutorService]\".equals(displayId))\n                         throw new Exception(\"Unexpected ManagedExecutorService with highest service.ranking: \" + displayId);\n \n-                    ServiceReference<ManagedScheduledExecutorService> mgdSchedExecSvcRef = bundleContext.getServiceReference(ManagedScheduledExecutorService.class);\n+                    ServiceReference<?> mgdSchedExecSvcRef = bundleContext.getServiceReference(\"java.enterprise.concurrent.ManagedScheduledExecutorService\");", "originalCommit": "2e229bc877e51094c90445cc0445494b731b6721", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc1MzAzNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12174#discussion_r424753034", "bodyText": "Good catch - added a commit to fix it.", "author": "njr-11", "createdAt": "2020-05-13T21:53:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc0NjQxMg=="}], "type": "inlineReview", "revised_code": {"commit": "a3d4abc6762e2912702832f0eef1de151a87d73e", "chunk": "diff --git a/dev/com.ibm.ws.concurrent_fat/test-bundles/test.resource/src/test/resource/internal/TestResource.java b/dev/com.ibm.ws.concurrent_fat/test-bundles/test.resource/src/test/resource/internal/TestResource.java\nindex 65d3b940e8..501c5689c9 100644\n--- a/dev/com.ibm.ws.concurrent_fat/test-bundles/test.resource/src/test/resource/internal/TestResource.java\n+++ b/dev/com.ibm.ws.concurrent_fat/test-bundles/test.resource/src/test/resource/internal/TestResource.java\n\n@@ -74,7 +74,7 @@ public class TestResource implements ResourceFactory {\n                     if (!\"managedExecutorService[DefaultManagedExecutorService]\".equals(displayId))\n                         throw new Exception(\"Unexpected ManagedExecutorService with highest service.ranking: \" + displayId);\n \n-                    ServiceReference<?> mgdSchedExecSvcRef = bundleContext.getServiceReference(\"java.enterprise.concurrent.ManagedScheduledExecutorService\");\n+                    ServiceReference<?> mgdSchedExecSvcRef = bundleContext.getServiceReference(\"javax.enterprise.concurrent.ManagedScheduledExecutorService\");\n                     if (mgdSchedExecSvcRef == null)\n                         mgdSchedExecSvcRef = bundleContext.getServiceReference(\"jakarta.enterprise.concurrent.ManagedScheduledExecutorService\");\n \n"}}, {"oid": "a3d4abc6762e2912702832f0eef1de151a87d73e", "url": "https://github.com/OpenLiberty/open-liberty/commit/a3d4abc6762e2912702832f0eef1de151a87d73e", "message": "Issue #11329 code review fix", "committedDate": "2020-05-13T21:50:37Z", "type": "commit"}, {"oid": "1bfb0a9e34ff1e8b688061c0f0e186e91a090699", "url": "https://github.com/OpenLiberty/open-liberty/commit/1bfb0a9e34ff1e8b688061c0f0e186e91a090699", "message": "Issue #11329 keep original transactionContext feature name due to feature checker complaints", "committedDate": "2020-05-14T16:07:37Z", "type": "commit"}]}