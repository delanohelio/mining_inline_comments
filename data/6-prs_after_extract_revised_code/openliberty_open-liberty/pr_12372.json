{"pr_number": 12372, "pr_title": "Repeat tests for jakarta ee9", "pr_createdAt": "2020-05-26T20:16:02Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12372", "timeline": [{"oid": "0374316c70cd01cae588816c440bd8308fc073b2", "url": "https://github.com/OpenLiberty/open-liberty/commit/0374316c70cd01cae588816c440bd8308fc073b2", "message": "Repeat tests for jakarta ee9", "committedDate": "2020-05-26T21:14:08Z", "type": "forcePushed"}, {"oid": "1784adffe1d33a13bcca9b888185300e838f3ee2", "url": "https://github.com/OpenLiberty/open-liberty/commit/1784adffe1d33a13bcca9b888185300e838f3ee2", "message": "Repeat tests for jakarta ee9", "committedDate": "2020-05-26T21:34:47Z", "type": "commit"}, {"oid": "1784adffe1d33a13bcca9b888185300e838f3ee2", "url": "https://github.com/OpenLiberty/open-liberty/commit/1784adffe1d33a13bcca9b888185300e838f3ee2", "message": "Repeat tests for jakarta ee9", "committedDate": "2020-05-26T21:34:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE2MzE2MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12372#discussion_r431163161", "bodyText": "We need to keep the DataSource field with the jndi lookup in the test methods.  Please reinstate the line of code in each method and comment it out, like so //DataSource ds = (DataSource) context.lookup(\"java:comp/env/jdbc/derby\"); This will return the test methods to their original content.", "author": "dazavala", "createdAt": "2020-05-27T14:12:10Z", "path": "dev/com.ibm.ws.transaction.core_fat/test-applications/transaction/src/com/ibm/ws/transaction/web/SimpleServlet.java", "diffHunk": "@@ -541,11 +527,8 @@ public void testNEW2(HttpServletRequest request, HttpServletResponse response) t\n      * LTC transaction.\n      */\n     @Test\n-    // TODO: Remove skip when jdbc feature supports jakartaee9\n-    @SkipForRepeat({ SkipForRepeat.EE9_FEATURES })\n     public void testExplicitLTCCommit(HttpServletRequest request, HttpServletResponse response) throws Exception {\n         InitialContext context = new InitialContext();\n-        DataSource ds = (DataSource) context.lookup(\"java:comp/env/jdbc/derby\");\n         Connection con = ds.getConnection();", "originalCommit": "1784adffe1d33a13bcca9b888185300e838f3ee2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE5MjE0Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12372#discussion_r431192147", "bodyText": "done. thanks!", "author": "anjumfatima90", "createdAt": "2020-05-27T14:43:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE2MzE2MQ=="}], "type": "inlineReview", "revised_code": {"commit": "6968def4acca4b52e4ab14ab1d0c3c3e8b42fdd1", "chunk": "diff --git a/dev/com.ibm.ws.transaction.core_fat/test-applications/transaction/src/com/ibm/ws/transaction/web/SimpleServlet.java b/dev/com.ibm.ws.transaction.core_fat/test-applications/transaction/src/com/ibm/ws/transaction/web/SimpleServlet.java\nindex 419291f1de..475c5ac55c 100644\n--- a/dev/com.ibm.ws.transaction.core_fat/test-applications/transaction/src/com/ibm/ws/transaction/web/SimpleServlet.java\n+++ b/dev/com.ibm.ws.transaction.core_fat/test-applications/transaction/src/com/ibm/ws/transaction/web/SimpleServlet.java\n\n@@ -529,6 +534,7 @@ public class SimpleServlet extends FATServlet {\n     @Test\n     public void testExplicitLTCCommit(HttpServletRequest request, HttpServletResponse response) throws Exception {\n         InitialContext context = new InitialContext();\n+        //DataSource ds = (DataSource) context.lookup(\"java:comp/env/jdbc/derby\");\n         Connection con = ds.getConnection();\n         try {\n             // Set up table\n"}}, {"oid": "6968def4acca4b52e4ab14ab1d0c3c3e8b42fdd1", "url": "https://github.com/OpenLiberty/open-liberty/commit/6968def4acca4b52e4ab14ab1d0c3c3e8b42fdd1", "message": "Put back the commented datasource initialization lines", "committedDate": "2020-05-27T14:40:28Z", "type": "commit"}]}