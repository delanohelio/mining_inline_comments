{"pr_number": 15020, "pr_title": "Re-enable MP Concurrent tests and add a Repeat Action for 1.1", "pr_createdAt": "2020-11-18T11:45:25Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/15020", "timeline": [{"oid": "4d16e94ea18a88aa3ebe58edacdcf65ecc94eb3a", "url": "https://github.com/OpenLiberty/open-liberty/commit/4d16e94ea18a88aa3ebe58edacdcf65ecc94eb3a", "message": "Re-enable MP Concurrent tests and add a Repeat Action for 1.1", "committedDate": "2020-11-18T10:39:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNTgzOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526025838", "bodyText": "@njr-11 This test fails with version 1.1, when you review please decide if a follow up change is needed to fix that.", "author": "tevans78", "createdAt": "2020-11-18T11:48:40Z", "path": "dev/com.ibm.ws.concurrent.mp_fat/fat/src/com/ibm/ws/concurrent/mp/fat/MPConcurrentTxTest.java", "diffHunk": "@@ -53,7 +62,9 @@ public static void tearDown() throws Exception {\n                    \"java.lang.IllegalStateException\", // attempt to use same transaction on 2 threads at once\n                    \"javax.transaction.xa.XAException\" // transaction marked rollback-only due to intentionally caused error\n     })\n+\n     @Test\n+    @SkipForRepeat(MPContextProp11RepeatAction.ID)", "originalCommit": "4d16e94ea18a88aa3ebe58edacdcf65ecc94eb3a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM2NzMxNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526367315", "bodyText": "This worked fine for me when I ran it locally with 1.1.  Tom is going to follow up and see if he can reproduce and report what the error is.  This shouldn't hold up delivery of this pull because it's a question of whether this additional test can be enabled, rather than of a potentially failing test being delivered.", "author": "njr-11", "createdAt": "2020-11-18T19:36:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNTgzOA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNjAyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526026027", "bodyText": "@njr-11 This test fails with version 1.1, when you review please decide if a follow up change is needed to fix that.", "author": "tevans78", "createdAt": "2020-11-18T11:49:01Z", "path": "dev/com.ibm.ws.concurrent.mp_fat/test-applications/MPConcurrentApp/src/concurrent/mp/fat/web/MPConcurrentTestServlet.java", "diffHunk": "@@ -5311,6 +5314,7 @@ public void testWhenCompleteAfterSuccessfulCompletion() throws Exception {\n      * than a managed executor.\n      */\n     @Test\n+    @SkipForRepeat(MPContextProp11RepeatAction.ID)", "originalCommit": "4d16e94ea18a88aa3ebe58edacdcf65ecc94eb3a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE0MDUxMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526140511", "bodyText": "There ought to be a difference between 1.1 and 1.0 for this test given that its description states: \"Verify ... that Async operations requested without an executor parameter raise UnsupportedOperationException, as required by the spec\". That is a requirement of the 1.0 specification to fail with unsupported, whereas the 1.1 specification adds new capability here such that the Async operations are now supported.  It looks like you went above and beyond in enabling some additional test classes to run with 1.1, which is fine, it just requires the skip here.", "author": "njr-11", "createdAt": "2020-11-18T14:42:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNjAyNw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNjA2Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526026066", "bodyText": "@njr-11 This test fails with version 1.1, when you review please decide if a follow up change is needed to fix that.", "author": "tevans78", "createdAt": "2020-11-18T11:49:05Z", "path": "dev/com.ibm.ws.concurrent.mp_fat/test-applications/MPConcurrentApp/src/concurrent/mp/fat/web/MPConcurrentTestServlet.java", "diffHunk": "@@ -5391,6 +5395,7 @@ public void testWithContextCapture_CompletableFuture_builder() throws Exception\n      * CompletionStage that is backed by a ThreadContext rather than a managed executor.\n      */\n     @Test\n+    @SkipForRepeat(MPContextProp11RepeatAction.ID)", "originalCommit": "4d16e94ea18a88aa3ebe58edacdcf65ecc94eb3a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE0MDc4MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526140780", "bodyText": "This is expected - same as previous comment.", "author": "njr-11", "createdAt": "2020-11-18T14:42:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNjA2Ng=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNjEwOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526026108", "bodyText": "@njr-11 This test fails with version 1.1, when you review please decide if a follow up change is needed to fix that.", "author": "tevans78", "createdAt": "2020-11-18T11:49:10Z", "path": "dev/com.ibm.ws.concurrent.mp_fat/test-applications/MPConcurrentApp/src/concurrent/mp/fat/web/MPConcurrentTestServlet.java", "diffHunk": "@@ -5464,6 +5469,7 @@ public void testWithContextCapture_CompletableFuture_serverConfig() throws Excep\n      * than a managed executor.\n      */\n     @Test\n+    @SkipForRepeat(MPContextProp11RepeatAction.ID)", "originalCommit": "4d16e94ea18a88aa3ebe58edacdcf65ecc94eb3a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE0MTE1Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526141153", "bodyText": "Again, the difference is expected. See previous comments.", "author": "njr-11", "createdAt": "2020-11-18T14:43:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNjEwOA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNjE2MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526026161", "bodyText": "@njr-11 This test fails with version 1.1, when you review please decide if a follow up change is needed to fix that.", "author": "tevans78", "createdAt": "2020-11-18T11:49:16Z", "path": "dev/com.ibm.ws.concurrent.mp_fat/test-applications/MPConcurrentApp/src/concurrent/mp/fat/web/MPConcurrentTestServlet.java", "diffHunk": "@@ -5567,6 +5573,7 @@ public void testWithContextCapture_CompletionStage_builder() throws Exception {\n      * CompletionStage that is backed by a ThreadContext rather than a managed executor.\n      */\n     @Test\n+    @SkipForRepeat(MPContextProp11RepeatAction.ID)", "originalCommit": "4d16e94ea18a88aa3ebe58edacdcf65ecc94eb3a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE0MTQ0MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15020#discussion_r526141441", "bodyText": "Also expected, per previous comments.", "author": "njr-11", "createdAt": "2020-11-18T14:43:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyNjE2MQ=="}], "type": "inlineReview", "revised_code": null}]}