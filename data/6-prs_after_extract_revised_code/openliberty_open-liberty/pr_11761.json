{"pr_number": 11761, "pr_title": "Enable Jakartaee to jsonb fat", "pr_createdAt": "2020-04-14T19:03:45Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/11761", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ0NDAzNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11761#discussion_r408444034", "bodyText": "Do we have some sort of issue to track enabling all of the skipped tests once cdi-3.0 is available? If we just have this TODO comment in the code I worry that it will be forgotten.", "author": "aguibert", "createdAt": "2020-04-14T21:23:08Z", "path": "dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONBContainerTest.java", "diffHunk": "@@ -36,6 +38,7 @@\n import web.jsonbtest.JohnzonTestServlet;\n \n @RunWith(FATRunner.class)\n+@SkipForRepeat(EE9_FEATURES) // TODO: Enable this once cdi-3.0 is available", "originalCommit": "9df664a45b05e4ed88c78db8e576c712e33657cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ1NjAyMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11761#discussion_r408456020", "bodyText": "@aguibert We have an issue to track all remaining work, #11633.  We'll need to modify it slightly once this PR merges in its final state.", "author": "dazavala", "createdAt": "2020-04-14T21:47:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ0NDAzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk2NzE4MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11761#discussion_r408967181", "bodyText": "done, thanks!", "author": "anjumfatima90", "createdAt": "2020-04-15T16:16:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ0NDAzNA=="}], "type": "inlineReview", "revised_code": {"commit": "7ad66f51cdeaf5dc7a4f9e59aa585bce05061797", "chunk": "diff --git a/dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONBContainerTest.java b/dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONBContainerTest.java\nindex 9773f60cd1..5b07471587 100644\n--- a/dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONBContainerTest.java\n+++ b/dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONBContainerTest.java\n\n@@ -38,7 +38,7 @@ import web.jsonbtest.JSONBTestServlet;\n import web.jsonbtest.JohnzonTestServlet;\n \n @RunWith(FATRunner.class)\n-@SkipForRepeat(EE9_FEATURES) // TODO: Enable this once cdi-3.0 is available\n+@SkipForRepeat(EE9_FEATURES) // TODO: Enable this once cdi-3.0 is available, https://github.com/OpenLiberty/open-liberty/issues/11633\n public class JSONBContainerTest extends FATServletClient {\n \n     @Server(\"com.ibm.ws.jsonb.container.fat\")\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ0NjM5NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11761#discussion_r408446394", "bodyText": "Can you add a comment indicating why this test is being skipped for EE9 features?", "author": "aguibert", "createdAt": "2020-04-14T21:27:44Z", "path": "dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONPContainerTest.java", "diffHunk": "@@ -49,6 +52,7 @@ public static void tearDown() throws Exception {\n     }\n \n     @Test\n+    @SkipForRepeat(EE9_FEATURES)", "originalCommit": "9df664a45b05e4ed88c78db8e576c712e33657cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk2NjQxMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11761#discussion_r408966410", "bodyText": "done, thanks!", "author": "anjumfatima90", "createdAt": "2020-04-15T16:15:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ0NjM5NA=="}], "type": "inlineReview", "revised_code": {"commit": "7ad66f51cdeaf5dc7a4f9e59aa585bce05061797", "chunk": "diff --git a/dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONPContainerTest.java b/dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONPContainerTest.java\nindex 29f77a49fc..563ee0a3fe 100644\n--- a/dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONPContainerTest.java\n+++ b/dev/com.ibm.ws.jsonb_fat/fat/src/com/ibm/ws/jsonb/fat/JSONPContainerTest.java\n\n@@ -53,6 +53,7 @@ public class JSONPContainerTest extends FATServletClient {\n \n     @Test\n     @SkipForRepeat(EE9_FEATURES)\n+    //TODO: Transform the johnzon jars in AUTO_FVT/publish/shared/resources folder, solve the classloader problems with yasson and jonhzon provider impls\n     public void testJsonpProviderAvailableJohnzon() throws Exception {\n         runTest(server, appName + \"/JSONPTestServlet\", \"testJsonpProviderAvailable&JsonpProvider=\" + FATSuite.PROVIDER_JOHNZON_JSONP);\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ0NzA1NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11761#discussion_r408447054", "bodyText": "can you include a comment indicating why these tests are skipped?", "author": "aguibert", "createdAt": "2020-04-14T21:28:57Z", "path": "dev/com.ibm.ws.jsonb_fat/test-applications/jsonbapp/src/web/jsonbtest/JohnzonTestServlet.java", "diffHunk": "@@ -10,35 +10,41 @@\n  *******************************************************************************/\n package web.jsonbtest;\n \n+import static componenttest.annotation.SkipForRepeat.EE9_FEATURES;\n import static web.jsonbtest.JSONBTestServlet.PROVIDER_JOHNZON;\n import static web.jsonbtest.JSONBTestServlet.PROVIDER_YASSON;\n \n import javax.servlet.annotation.WebServlet;\n \n import org.junit.Test;\n \n+import componenttest.annotation.SkipForRepeat;\n import componenttest.app.FATServlet;\n \n @SuppressWarnings(\"serial\")\n @WebServlet(urlPatterns = \"/JohnzonTestServlet\")\n public class JohnzonTestServlet extends FATServlet {\n \n     @Test\n+    @SkipForRepeat(EE9_FEATURES)", "originalCommit": "9df664a45b05e4ed88c78db8e576c712e33657cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk2NjUxMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11761#discussion_r408966512", "bodyText": "done, thanks!", "author": "anjumfatima90", "createdAt": "2020-04-15T16:15:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ0NzA1NA=="}], "type": "inlineReview", "revised_code": {"commit": "7ad66f51cdeaf5dc7a4f9e59aa585bce05061797", "chunk": "diff --git a/dev/com.ibm.ws.jsonb_fat/test-applications/jsonbapp/src/web/jsonbtest/JohnzonTestServlet.java b/dev/com.ibm.ws.jsonb_fat/test-applications/jsonbapp/src/web/jsonbtest/JohnzonTestServlet.java\nindex 14a8f14dda..ae84fd47e8 100644\n--- a/dev/com.ibm.ws.jsonb_fat/test-applications/jsonbapp/src/web/jsonbtest/JohnzonTestServlet.java\n+++ b/dev/com.ibm.ws.jsonb_fat/test-applications/jsonbapp/src/web/jsonbtest/JohnzonTestServlet.java\n\n@@ -25,6 +25,7 @@ import componenttest.app.FATServlet;\n @WebServlet(urlPatterns = \"/JohnzonTestServlet\")\n public class JohnzonTestServlet extends FATServlet {\n \n+    //TODO: Transform the johnzon jars in AUTO_FVT/publish/shared/resources folder, solve the classloader problems with yasson and jonhzon provider impls\n     @Test\n     @SkipForRepeat(EE9_FEATURES)\n     public void testApplicationClasses() throws Exception {\n"}}, {"oid": "7ad66f51cdeaf5dc7a4f9e59aa585bce05061797", "url": "https://github.com/OpenLiberty/open-liberty/commit/7ad66f51cdeaf5dc7a4f9e59aa585bce05061797", "message": "change copyright year to pass unit test", "committedDate": "2020-04-16T15:41:49Z", "type": "forcePushed"}, {"oid": "290e0175c23b3bb62a79ab8149929d6859b26c2d", "url": "https://github.com/OpenLiberty/open-liberty/commit/290e0175c23b3bb62a79ab8149929d6859b26c2d", "message": "Enable jakartaee for jsonbContainer and jsonpContainer features", "committedDate": "2020-04-16T19:38:31Z", "type": "commit"}, {"oid": "562637cd56f93ddacb6d61966bb08aa402ffa8f3", "url": "https://github.com/OpenLiberty/open-liberty/commit/562637cd56f93ddacb6d61966bb08aa402ffa8f3", "message": "Jakartaee test enablement for jsonb fat", "committedDate": "2020-04-16T19:38:31Z", "type": "commit"}, {"oid": "cccbf6809fa6baf021dfe5c73ecd4caefc6e176e", "url": "https://github.com/OpenLiberty/open-liberty/commit/cccbf6809fa6baf021dfe5c73ecd4caefc6e176e", "message": "Enable jakarta jsonbProvider service to load the yasson implementation", "committedDate": "2020-04-16T19:38:31Z", "type": "commit"}, {"oid": "fd173576ae38fb367300afba149d1b35ee9c568a", "url": "https://github.com/OpenLiberty/open-liberty/commit/fd173576ae38fb367300afba149d1b35ee9c568a", "message": "Change javax.json.bind versions", "committedDate": "2020-04-16T19:38:31Z", "type": "commit"}, {"oid": "98677b2e846382b17fc60ae2874543ccab317077", "url": "https://github.com/OpenLiberty/open-liberty/commit/98677b2e846382b17fc60ae2874543ccab317077", "message": "fix comment", "committedDate": "2020-04-16T19:38:31Z", "type": "commit"}, {"oid": "43af98dfce0d7d2ec011a6f5c49b21635d33314f", "url": "https://github.com/OpenLiberty/open-liberty/commit/43af98dfce0d7d2ec011a6f5c49b21635d33314f", "message": "Remove vestigial line of code", "committedDate": "2020-04-16T19:38:31Z", "type": "commit"}, {"oid": "f8250af533baa14a9420c126e965b96c94aee39a", "url": "https://github.com/OpenLiberty/open-liberty/commit/f8250af533baa14a9420c126e965b96c94aee39a", "message": "Add comments for future work", "committedDate": "2020-04-16T19:38:32Z", "type": "commit"}, {"oid": "891a78efce708655f538247a9e72cdb2cfa7ac99", "url": "https://github.com/OpenLiberty/open-liberty/commit/891a78efce708655f538247a9e72cdb2cfa7ac99", "message": "Added transformation packages for jakarta.ws.rs and jakarta.xml.bind", "committedDate": "2020-04-16T19:38:32Z", "type": "commit"}, {"oid": "a52c3b4b94dcf89537a7545eaa7078ca83c4c607", "url": "https://github.com/OpenLiberty/open-liberty/commit/a52c3b4b94dcf89537a7545eaa7078ca83c4c607", "message": "Added issue url to the comment", "committedDate": "2020-04-16T19:38:32Z", "type": "commit"}, {"oid": "3a6286ad2c86473be9ce1e17145019e22ddbcd4a", "url": "https://github.com/OpenLiberty/open-liberty/commit/3a6286ad2c86473be9ce1e17145019e22ddbcd4a", "message": "change copyright year to pass unit test", "committedDate": "2020-04-16T19:38:32Z", "type": "commit"}, {"oid": "5fa9e03083f3837670bfdf465ddb158d1d3fb88f", "url": "https://github.com/OpenLiberty/open-liberty/commit/5fa9e03083f3837670bfdf465ddb158d1d3fb88f", "message": "Update org.eclipse.yasson version to 1.0.7", "committedDate": "2020-04-16T19:38:32Z", "type": "forcePushed"}, {"oid": "1154dfb05843497ffb1df96c087ccb3da090b6c5", "url": "https://github.com/OpenLiberty/open-liberty/commit/1154dfb05843497ffb1df96c087ccb3da090b6c5", "message": "Update org.eclipse.yasson version to 1.0.7", "committedDate": "2020-04-16T20:31:21Z", "type": "forcePushed"}, {"oid": "a540cf43f66be0e1852a48bddc8fdd5d0b49adad", "url": "https://github.com/OpenLiberty/open-liberty/commit/a540cf43f66be0e1852a48bddc8fdd5d0b49adad", "message": "Update org.eclipse.yasson version to 1.0.7", "committedDate": "2020-04-16T20:40:37Z", "type": "commit"}, {"oid": "a540cf43f66be0e1852a48bddc8fdd5d0b49adad", "url": "https://github.com/OpenLiberty/open-liberty/commit/a540cf43f66be0e1852a48bddc8fdd5d0b49adad", "message": "Update org.eclipse.yasson version to 1.0.7", "committedDate": "2020-04-16T20:40:37Z", "type": "forcePushed"}]}