{"pr_number": 12930, "pr_title": "The one about the Jakarta JAX-B ContextFactory ", "pr_createdAt": "2020-07-07T21:16:03Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12930", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM3OTkyNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12930#discussion_r451379926", "bodyText": "I assume this is a temporary overlay?", "author": "tevans78", "createdAt": "2020-07-08T08:40:44Z", "path": "dev/io.openliberty.jakarta.jaxb.3.0/src/jakarta/xml/bind/ModuleUtil.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*", "originalCommit": "f9d16297770f9eb6121616881aaea2f70bca6c01", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU5MjA4Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12930#discussion_r451592082", "bodyText": "@tevans78 that's correct, without an update to the ContextFactory to point to the Glassfish RI, the JPA feature will hit a NCDFE as the Jakarta JAX-B spec will keep trying to find the original Sun RI. I'll passing this change on to the Jakarta JAX-B project.", "author": "neuwerk", "createdAt": "2020-07-08T14:32:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM3OTkyNg=="}], "type": "inlineReview", "revised_code": {"commit": "0e09e148f5e1d094b7dcebbac9203500128f0569", "chunk": "diff --git a/dev/io.openliberty.jakarta.jaxb.3.0/src/jakarta/xml/bind/ModuleUtil.java b/dev/io.openliberty.jakarta.jaxb.3.0/src/jakarta/xml/bind/ModuleUtil.java\ndeleted file mode 100644\nindex 0efd187b12..0000000000\n--- a/dev/io.openliberty.jakarta.jaxb.3.0/src/jakarta/xml/bind/ModuleUtil.java\n+++ /dev/null\n\n@@ -1,65 +0,0 @@\n-/*\n- * Copyright (c) 2017, 2020 Oracle and/or its affiliates. All rights reserved.\n- *\n- * This program and the accompanying materials are made available under the\n- * terms of the Eclipse Distribution License v. 1.0, which is available at\n- * http://www.eclipse.org/org/documents/edl-v10.php.\n- *\n- * SPDX-License-Identifier: BSD-3-Clause\n- */\n-\n-package jakarta.xml.bind;\n-\n-import java.io.IOException;\n-\n-/**\n- * Intended to be overridden on JDK9, with JEP 238 multi-release class copy.\n- * Contains only stubs for methods needed on JDK9 runtime.\n- *\n- * @author Roman Grigoriadi\n- */\n-class ModuleUtil {\n-\n-    /**\n-     * When JAXB is in J2SE, rt.jar has to have a JAXB implementation.\n-     * However, rt.jar cannot have META-INF/services/jakarta.xml.bind.JAXBContext\n-     * because if it has, it will take precedence over any file that applications have\n-     * in their jar files.\n-     *\n-     * <p>\n-     * When the user bundles his own JAXB implementation, we'd like to use it, and we\n-     * want the platform default to be used only when there's no other JAXB provider.\n-     *\n-     * <p>\n-     * For this reason, we have to hard-code the class name into the API.\n-     */\n-    // NOTICE: .toString() is used to prevent constant inlining by Java Compiler\n-    static final String DEFAULT_FACTORY_CLASS = \"org.glassfish.jaxb.runtime.v2.ContextFactory\".toString();\n-\n-    /**\n-     * Resolves classes from context path.\n-     * Only one class per package is needed to access its {@link java.lang.Module}\n-     */\n-    static Class[] getClassesFromContextPath(String contextPath, ClassLoader classLoader) throws JAXBException {\n-        return null;\n-    }\n-\n-    /**\n-     * Find first class in package by {@code jaxb.index} file.\n-     */\n-    static Class findFirstByJaxbIndex(String pkg, ClassLoader classLoader) throws IOException, JAXBException {\n-        return null;\n-    }\n-\n-    /**\n-     * Implementation may be defined in other module than {@code java.xml.bind}. In that case openness\n-     * {@linkplain java.lang.Module#isOpen open} of classes should be delegated to implementation module.\n-     *\n-     * @param classes    used to resolve module for {@linkplain java.lang.Module#addOpens(String, java.lang.Module)}\n-     * @param factorySPI used to resolve {@link java.lang.Module} of the implementation.\n-     */\n-    static void delegateAddOpensToImplModule(Class[] classes, Class<?> factorySPI) {\n-        //stub\n-    }\n-\n-}\n"}}, {"oid": "0e09e148f5e1d094b7dcebbac9203500128f0569", "url": "https://github.com/OpenLiberty/open-liberty/commit/0e09e148f5e1d094b7dcebbac9203500128f0569", "message": "Update jaxws.2.3.common to implement missing methods", "committedDate": "2020-07-13T14:02:55Z", "type": "commit"}, {"oid": "281cd5f961c5e2d96e060dcb4d05647a0999ae81", "url": "https://github.com/OpenLiberty/open-liberty/commit/281cd5f961c5e2d96e060dcb4d05647a0999ae81", "message": "add updates to CXF API Logigng", "committedDate": "2020-07-13T14:02:55Z", "type": "commit"}, {"oid": "56139ccfc17c976138868e29aa0533081273bf07", "url": "https://github.com/OpenLiberty/open-liberty/commit/56139ccfc17c976138868e29aa0533081273bf07", "message": "The one about the ContextFactory", "committedDate": "2020-07-13T14:02:56Z", "type": "commit"}, {"oid": "052ce211215a3ea3e0f09ffa751dcd7b82d7858e", "url": "https://github.com/OpenLiberty/open-liberty/commit/052ce211215a3ea3e0f09ffa751dcd7b82d7858e", "message": "Change name of bundle back to match naming convention", "committedDate": "2020-07-13T14:02:56Z", "type": "commit"}, {"oid": "5c92a31b582ac0cf2d0c194d2af2d387e8d90b68", "url": "https://github.com/OpenLiberty/open-liberty/commit/5c92a31b582ac0cf2d0c194d2af2d387e8d90b68", "message": "renamed package", "committedDate": "2020-07-13T14:02:56Z", "type": "commit"}, {"oid": "c58d69aa3d0766dfe5f54113d0e16c21aa5ecb4f", "url": "https://github.com/OpenLiberty/open-liberty/commit/c58d69aa3d0766dfe5f54113d0e16c21aa5ecb4f", "message": "Fix missed jax-b renames'", "committedDate": "2020-07-13T14:02:57Z", "type": "commit"}, {"oid": "c58d69aa3d0766dfe5f54113d0e16c21aa5ecb4f", "url": "https://github.com/OpenLiberty/open-liberty/commit/c58d69aa3d0766dfe5f54113d0e16c21aa5ecb4f", "message": "Fix missed jax-b renames'", "committedDate": "2020-07-13T14:02:57Z", "type": "forcePushed"}, {"oid": "d0425258ed704734594e212f6b242d37afe06b8c", "url": "https://github.com/OpenLiberty/open-liberty/commit/d0425258ed704734594e212f6b242d37afe06b8c", "message": "Delete .project", "committedDate": "2020-07-13T14:04:43Z", "type": "commit"}]}