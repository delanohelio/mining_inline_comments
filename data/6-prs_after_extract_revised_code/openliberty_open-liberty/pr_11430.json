{"pr_number": 11430, "pr_title": "test fails when run a second time due to persisted data", "pr_createdAt": "2020-03-23T17:01:38Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/11430", "timeline": [{"oid": "abd711229bb1c7c50b70d4e8fb685ac3e3387a2b", "url": "https://github.com/OpenLiberty/open-liberty/commit/abd711229bb1c7c50b70d4e8fb685ac3e3387a2b", "message": "Issue #11429 test fails when run a second time due to persisted data", "committedDate": "2020-03-23T17:00:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY1MDcwOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11430#discussion_r396650709", "bodyText": "You can add @ClassRule here and remove testContainer.start() and stop later on.", "author": "KyleAure", "createdAt": "2020-03-23T18:03:21Z", "path": "dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorTest.java", "diffHunk": "@@ -38,8 +39,8 @@\n     @Server(\"com.ibm.ws.concurrent.persistent.fat\")\n     @TestServlet(servlet = SchedulerFATServlet.class, path = APP_NAME)\n     public static LibertyServer server;\n-    \n-    public static final JdbcDatabaseContainer<?> testContainer = FATSuite.testContainer;\n+\n+    public static final JdbcDatabaseContainer<?> testContainer = DatabaseContainerFactory.create();", "originalCommit": "abd711229bb1c7c50b70d4e8fb685ac3e3387a2b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cbf145fb20537ff00f4d95a6088fdf7684eb972c", "chunk": "diff --git a/dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorTest.java b/dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorTest.java\nindex 05e99a7f48..3b56980d00 100755\n--- a/dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorTest.java\n+++ b/dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorTest.java\n\n@@ -40,6 +41,7 @@ public class PersistentExecutorTest extends FATServletClient {\n     @TestServlet(servlet = SchedulerFATServlet.class, path = APP_NAME)\n     public static LibertyServer server;\n \n+    @ClassRule\n     public static final JdbcDatabaseContainer<?> testContainer = DatabaseContainerFactory.create();\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY1MDc1Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11430#discussion_r396650752", "bodyText": "Same here add @ClassRule", "author": "KyleAure", "createdAt": "2020-03-23T18:03:25Z", "path": "dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorWithFailoverEnabledTest.java", "diffHunk": "@@ -43,7 +44,7 @@\n     @TestServlet(servlet = SchedulerFATServlet.class, path = APP_NAME)\n     public static LibertyServer server;\n     \n-    public static final JdbcDatabaseContainer<?> testContainer = FATSuite.testContainer;\n+    public static final JdbcDatabaseContainer<?> testContainer = DatabaseContainerFactory.create();", "originalCommit": "abd711229bb1c7c50b70d4e8fb685ac3e3387a2b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cbf145fb20537ff00f4d95a6088fdf7684eb972c", "chunk": "diff --git a/dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorWithFailoverEnabledTest.java b/dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorWithFailoverEnabledTest.java\nindex 72afe09ae9..8e51fa72ab 100644\n--- a/dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorWithFailoverEnabledTest.java\n+++ b/dev/com.ibm.ws.concurrent.persistent_fat/fat/src/com/ibm/ws/concurrent/persistent/fat/PersistentExecutorWithFailoverEnabledTest.java\n\n@@ -44,6 +45,7 @@ public class PersistentExecutorWithFailoverEnabledTest extends FATServletClient\n     @TestServlet(servlet = SchedulerFATServlet.class, path = APP_NAME)\n     public static LibertyServer server;\n     \n+    @ClassRule\n     public static final JdbcDatabaseContainer<?> testContainer = DatabaseContainerFactory.create();\n \n     /**\n"}}, {"oid": "cbf145fb20537ff00f4d95a6088fdf7684eb972c", "url": "https://github.com/OpenLiberty/open-liberty/commit/cbf145fb20537ff00f4d95a6088fdf7684eb972c", "message": "Issue #11429 code review fixes", "committedDate": "2020-03-23T18:20:16Z", "type": "commit"}]}