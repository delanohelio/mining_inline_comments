{"pr_number": 12136, "pr_title": "Jakarta add to fat bucket", "pr_createdAt": "2020-05-11T18:29:17Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12136", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk2MjE5Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12136#discussion_r425962196", "bodyText": "Lets add a comment there to say why we're skipping this and ensure we have an issue opened for us to enable it once the ee9 features that are needed for this test are available. Do this for all the tests we're skipping.", "author": "pnicolucci", "createdAt": "2020-05-15T17:59:51Z", "path": "dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/CDIListenersTest.java", "diffHunk": "@@ -38,6 +41,7 @@\n  * Verify that injection is performed into several listener types.\n  */\n @RunWith(FATRunner.class)\n+@SkipForRepeat(EE9_FEATURES)", "originalCommit": "aee1466971263161799193909880096da1458f55", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3f81292db1ff3d092f6a537242e2bad5026b22a6", "chunk": "diff --git a/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/CDIListenersTest.java b/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/CDIListenersTest.java\nindex 16aeb68261..4be2b03066 100755\n--- a/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/CDIListenersTest.java\n+++ b/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/CDIListenersTest.java\n\n@@ -39,6 +39,7 @@ import componenttest.custom.junit.runner.Mode.TestMode;\n  * CDI Test\n  *\n  * Verify that injection is performed into several listener types.\n+ * Temporarily skipped for EE9 jakarta until cdi-3.0 feature is developed\n  */\n @RunWith(FATRunner.class)\n @SkipForRepeat(EE9_FEATURES)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk2NTY5OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12136#discussion_r425965698", "bodyText": "Do we even need the Servlet40 minor version test here? We already have a major/minor version test in the servlet 4.0 bucket I believe.\nLets explain why we skip the tests if that is the case.", "author": "pnicolucci", "createdAt": "2020-05-15T18:07:01Z", "path": "dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java", "diffHunk": "@@ -390,7 +393,7 @@ public void testResponseReset() throws Exception {\n      * @throws Exception\n      */\n     @Test\n-    @SkipForRepeat(\"SERVLET-4.0\")\n+    @SkipForRepeat({\"SERVLET-4.0\", EE9_FEATURES})", "originalCommit": "aee1466971263161799193909880096da1458f55", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3f81292db1ff3d092f6a537242e2bad5026b22a6", "chunk": "diff --git a/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java b/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java\nindex 9c29c02799..7d6871d47d 100755\n--- a/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java\n+++ b/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java\n\n@@ -388,28 +374,19 @@ public class WCServerTest extends LoggingTest {\n     }\n \n     /**\n-     * Verifies that the ServletContext.getMinorVersion() returns 1 for Servlet 3.1.\n+     * Verifies that the ServletContext.getMinorVersion() returns 1 and \n+     * ServletContext.getMajorVersion() returns 3.1 for Servlet 3.1.\n      *\n      * @throws Exception\n      */\n     @Test\n     @SkipForRepeat({\"SERVLET-4.0\", EE9_FEATURES})\n-    public void testServlet31ContextMinorVersion() throws Exception {\n-        this.verifyResponse(\"/TestServlet31/MyServlet?TestMinorVersion=true\",\n+    public void testServletContextMinorMajorVersion() throws Exception {\n+        this.verifyResponse(\"/TestServlet31/MyServlet?TestMajorMinorVersion=true\", \n+                            \"majorVersion: 3\");\n+        this.verifyResponse(\"/TestServlet31/MyServlet?TestMajorMinorVersion=true\",\n                             \"minorVersion: 1\");\n     }\n-    \n-    /**\n-     * Verifies that the ServletContext.getMinorVersion() returns 0 for Servlet 4.0.\n-     *\n-     * @throws Exception\n-     */\n-    @Test\n-    @SkipForRepeat({NO_MODIFICATION, EE9_FEATURES})\n-    public void testServlet40ContextMinorVersion() throws Exception {\n-        this.verifyResponse(\"/TestServlet31/MyServlet?TestMinorVersion=true\",\n-                            \"minorVersion: 0\");\n-    }\n \n     /**\n      * Verify that a duplicate <servlet-mapping> element results in a deployment error. Servlet 3.1 spec, section 12.2\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk3MDU1OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12136#discussion_r425970559", "bodyText": "We can probably remove this since we have a test here for servlet 4.0: https://github.com/OpenLiberty/open-liberty/blob/integration/dev/com.ibm.ws.webcontainer.servlet.4.0_fat/fat/src/com/ibm/ws/fat/wc/tests/WCServerTest.java#L106 and just ignore the 31 test for 4.0 and 5.0?", "author": "pnicolucci", "createdAt": "2020-05-15T18:17:08Z", "path": "dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java", "diffHunk": "@@ -235,7 +238,7 @@ public void testServlet31() throws Exception {\n      *                       if something goes horribly wrong\n      */\n     @Test\n-    @SkipForRepeat(SkipForRepeat.NO_MODIFICATION)\n+    @SkipForRepeat({NO_MODIFICATION, EE9_FEATURES})", "originalCommit": "aee1466971263161799193909880096da1458f55", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3f81292db1ff3d092f6a537242e2bad5026b22a6", "chunk": "diff --git a/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java b/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java\nindex 9c29c02799..7d6871d47d 100755\n--- a/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java\n+++ b/dev/com.ibm.ws.webcontainer.servlet.3.1_fat/fat/src/com/ibm/ws/webcontainer/servlet31/fat/tests/WCServerTest.java\n\n@@ -231,21 +232,6 @@ public class WCServerTest extends LoggingTest {\n                                             true, false);\n     }\n     \n-    /**\n-     * Sample test for running with Servlet 4.0\n-     *\n-     * @throws Exception\n-     *                       if something goes horribly wrong\n-     */\n-    @Test\n-    @SkipForRepeat({NO_MODIFICATION, EE9_FEATURES})\n-    public void testServlet40() throws Exception {\n-        WebResponse response = this.verifyResponse(\"/TestServlet31/MyServlet\", \"Hello World\");\n-\n-        // verify the X-Powered-By Response header\n-        response.verifyResponseHeaderEquals(\"X-Powered-By\", false, \"Servlet/4.0\",\n-                                            true, false);\n-    }\n \n     @Test\n     public void testProgrammaticallyAddedServlet() throws Exception {\n"}}, {"oid": "4df5384f04fd19003b6260aa4fd834d8eb3802dc", "url": "https://github.com/OpenLiberty/open-liberty/commit/4df5384f04fd19003b6260aa4fd834d8eb3802dc", "message": "Initial jakarta add to fat bucket\n- Added jakarta repeat test\n- Added skip for features still under development (like cdi-3.0)", "committedDate": "2020-05-18T04:59:57Z", "type": "commit"}, {"oid": "c8dd0f59f367fa9ecc83875fb98ced55c14c194f", "url": "https://github.com/OpenLiberty/open-liberty/commit/c8dd0f59f367fa9ecc83875fb98ced55c14c194f", "message": "Added feature skip for jakarata repeat on FormLoginReadListener since feature is not ready yet", "committedDate": "2020-05-18T04:59:57Z", "type": "commit"}, {"oid": "3f81292db1ff3d092f6a537242e2bad5026b22a6", "url": "https://github.com/OpenLiberty/open-liberty/commit/3f81292db1ff3d092f6a537242e2bad5026b22a6", "message": "Made requested changes", "committedDate": "2020-05-18T05:47:11Z", "type": "forcePushed"}, {"oid": "970d7167fc4724c51f4f94d636add2e0ddda65c4", "url": "https://github.com/OpenLiberty/open-liberty/commit/970d7167fc4724c51f4f94d636add2e0ddda65c4", "message": "Made requested changes", "committedDate": "2020-05-18T14:47:58Z", "type": "forcePushed"}, {"oid": "2a6bcae6374c3d8c91a16c8c701263220612ce66", "url": "https://github.com/OpenLiberty/open-liberty/commit/2a6bcae6374c3d8c91a16c8c701263220612ce66", "message": "Made requested changes", "committedDate": "2020-05-18T15:00:08Z", "type": "commit"}, {"oid": "2a6bcae6374c3d8c91a16c8c701263220612ce66", "url": "https://github.com/OpenLiberty/open-liberty/commit/2a6bcae6374c3d8c91a16c8c701263220612ce66", "message": "Made requested changes", "committedDate": "2020-05-18T15:00:08Z", "type": "forcePushed"}]}