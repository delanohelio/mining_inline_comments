{"pr_number": 12288, "pr_title": "Create Jakarta EL API/IMPL Overlay", "pr_createdAt": "2020-05-20T17:29:08Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12288", "timeline": [{"oid": "5ef05d9ec57c3a87169e3d49b7e6a4e94261a299", "url": "https://github.com/OpenLiberty/open-liberty/commit/5ef05d9ec57c3a87169e3d49b7e6a4e94261a299", "message": "Add FFDCIgnore", "committedDate": "2020-05-20T17:36:32Z", "type": "forcePushed"}, {"oid": "8979e129241ca83e50ba8e17ef70007a9dd0f497", "url": "https://github.com/OpenLiberty/open-liberty/commit/8979e129241ca83e50ba8e17ef70007a9dd0f497", "message": "Add FFDCIgnore", "committedDate": "2020-05-21T00:53:04Z", "type": "forcePushed"}, {"oid": "66b8f62211024e28167e2acede82994d8511074f", "url": "https://github.com/OpenLiberty/open-liberty/commit/66b8f62211024e28167e2acede82994d8511074f", "message": "Add FFDCIgnore", "committedDate": "2020-05-21T01:08:16Z", "type": "forcePushed"}, {"oid": "3d0ad69356687adb14be5f365a2e871786d0b165", "url": "https://github.com/OpenLiberty/open-liberty/commit/3d0ad69356687adb14be5f365a2e871786d0b165", "message": "Add FFDCIgnore", "committedDate": "2020-05-21T01:12:25Z", "type": "forcePushed"}, {"oid": "1bd35d7e83d55337319ff3bd583f09d8a25e6aba", "url": "https://github.com/OpenLiberty/open-liberty/commit/1bd35d7e83d55337319ff3bd583f09d8a25e6aba", "message": "Add FFDCIgnore", "committedDate": "2020-05-21T15:58:41Z", "type": "forcePushed"}, {"oid": "525f1fec7b8533d6c940d4956d0f7865702f2ee7", "url": "https://github.com/OpenLiberty/open-liberty/commit/525f1fec7b8533d6c940d4956d0f7865702f2ee7", "message": "Add FFDCIgnore", "committedDate": "2020-05-21T16:17:16Z", "type": "forcePushed"}, {"oid": "9899844c7fe284b3e93e75341ab149fa7442d932", "url": "https://github.com/OpenLiberty/open-liberty/commit/9899844c7fe284b3e93e75341ab149fa7442d932", "message": "Add resources", "committedDate": "2020-05-21T23:40:08Z", "type": "forcePushed"}, {"oid": "cf6b514048954277537ec7495e3017dd4c694adc", "url": "https://github.com/OpenLiberty/open-liberty/commit/cf6b514048954277537ec7495e3017dd4c694adc", "message": "Update com.ibm.websphere.appserver.el-4.0.feature", "committedDate": "2020-05-27T14:50:50Z", "type": "forcePushed"}, {"oid": "f53913557d0ed78b354888c12d5fdbccca0c6a9b", "url": "https://github.com/OpenLiberty/open-liberty/commit/f53913557d0ed78b354888c12d5fdbccca0c6a9b", "message": "Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nAdd resources\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd", "committedDate": "2020-05-27T15:18:19Z", "type": "forcePushed"}, {"oid": "09dbd9667c51deef29ff11bf99809c08364fb959", "url": "https://github.com/OpenLiberty/open-liberty/commit/09dbd9667c51deef29ff11bf99809c08364fb959", "message": "11824 - Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nAdd resources\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd", "committedDate": "2020-05-27T15:22:08Z", "type": "forcePushed"}, {"oid": "4f54dd2b7c9639e4b1b6df94ca10c1dffe844e27", "url": "https://github.com/OpenLiberty/open-liberty/commit/4f54dd2b7c9639e4b1b6df94ca10c1dffe844e27", "message": "11824 - Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nAdd resources\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd", "committedDate": "2020-05-27T15:23:30Z", "type": "forcePushed"}, {"oid": "1d7bccfe60af8c8656dd7582f55c163334708780", "url": "https://github.com/OpenLiberty/open-liberty/commit/1d7bccfe60af8c8656dd7582f55c163334708780", "message": "11824 - Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nAdd resources\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd", "committedDate": "2020-05-27T21:25:07Z", "type": "forcePushed"}, {"oid": "1177d731a497b39062402bf92f7a7cac67217612", "url": "https://github.com/OpenLiberty/open-liberty/commit/1177d731a497b39062402bf92f7a7cac67217612", "message": "Revise testEL22EmptyOperator_Undefined", "committedDate": "2020-05-28T15:54:31Z", "type": "forcePushed"}, {"oid": "d152b05553f4e9d98513281b9e02c6b9a541c9a2", "url": "https://github.com/OpenLiberty/open-liberty/commit/d152b05553f4e9d98513281b9e02c6b9a541c9a2", "message": "11824 - Create Overlay in EL 4.0 IMPL\n\n11824 - Initial Drop: ELParser,ELParserTokenManager,SimpleCharStream\n\n11824 - Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nAdd resources\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd\n\nRevise testEL22EmptyOperator_Undefined\n\nAdd and Update copyrights\n\nRename EL Impl to io.openliberty\n\nUpdate EL-4.0 Feature file with new impl bundle name", "committedDate": "2020-05-28T19:34:38Z", "type": "forcePushed"}, {"oid": "24d8c1d2aad4f4bdf72c2d34d72ea271b475c96b", "url": "https://github.com/OpenLiberty/open-liberty/commit/24d8c1d2aad4f4bdf72c2d34d72ea271b475c96b", "message": "11824 - Create Overlay in EL 4.0 IMPL\n\n11824 - Initial Drop: ELParser,ELParserTokenManager,SimpleCharStream\n\n11824 - Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd\n\nRevise EL FAT test: testEL22EmptyOperator_Undefined\n\nAdd and Update copyrights\n\nRename EL Impl to io.openliberty\n\nUpdate EL-4.0 Feature file with new impl bundle name", "committedDate": "2020-05-28T19:52:24Z", "type": "forcePushed"}, {"oid": "f186a30563f340a4ec418ed14edb99d5692097ba", "url": "https://github.com/OpenLiberty/open-liberty/commit/f186a30563f340a4ec418ed14edb99d5692097ba", "message": "11824 - Create Overlay in EL 4.0 IMPL\n\n11824 - Initial Drop: ELParser,ELParserTokenManager,SimpleCharStream\n\n11824 - Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd\n\nRevise EL FAT test: testEL22EmptyOperator_Undefined\n\nAdd and Update copyrights\n\nRename EL Impl to io.openliberty\n\nUpdate EL-4.0 Feature file with new impl bundle name", "committedDate": "2020-05-29T14:46:28Z", "type": "forcePushed"}, {"oid": "86332f0aebfbf2bf3e9b79eca65cc7cd860e4269", "url": "https://github.com/OpenLiberty/open-liberty/commit/86332f0aebfbf2bf3e9b79eca65cc7cd860e4269", "message": "11824 - Create Overlay in EL 4.0 IMPL\n\n11824 - Initial Drop: ELParser,ELParserTokenManager,SimpleCharStream\n\n11824 - Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd\n\nRevise EL FAT test: testEL22EmptyOperator_Undefined\n\nAdd and Update copyrights\n\nRename EL Impl to io.openliberty\n\nUpdate EL-4.0 Feature file with new impl bundle name", "committedDate": "2020-05-29T14:48:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIxNTkxOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12288#discussion_r433215919", "bodyText": "Should this file be deleted as well? I see the other classes in this project were.", "author": "pnicolucci", "createdAt": "2020-06-01T12:53:24Z", "path": "dev/io.openliberty.jakarta.el.4.0/src/jakarta/el/ImportHandler.java", "diffHunk": "@@ -508,4 +508,4 @@ public Boolean run() {\n      */\n     private static class NotFound {\n     }\n-}\n+}", "originalCommit": "86332f0aebfbf2bf3e9b79eca65cc7cd860e4269", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIzNjg5Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12288#discussion_r433236893", "bodyText": "This fine has been modified. The line \"return cl.getResource(path) == null;\" creates a security warning, so I applied a java 2 security check around it.", "author": "volosied", "createdAt": "2020-06-01T13:35:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIxNTkxOQ=="}], "type": "inlineReview", "revised_code": {"commit": "15d5f136480c9a11623bee91306ca8212c85e7e8", "chunk": "diff --git a/dev/io.openliberty.jakarta.el.4.0/src/jakarta/el/ImportHandler.java b/dev/io.openliberty.jakarta.el.4.0/src/jakarta/el/ImportHandler.java\nindex fb540f2ad6..f02683abf1 100644\n--- a/dev/io.openliberty.jakarta.el.4.0/src/jakarta/el/ImportHandler.java\n+++ b/dev/io.openliberty.jakarta.el.4.0/src/jakarta/el/ImportHandler.java\n\n@@ -508,4 +503,26 @@ public class ImportHandler {\n      */\n     private static class NotFound {\n     }\n-}\n\\ No newline at end of file\n+\n+\n+    private static class PrivilegedResourceExists implements PrivilegedAction<Boolean> {\n+\n+        private final ClassLoader cl;\n+        private final String name;\n+\n+        public PrivilegedResourceExists(ClassLoader cl, String name) {\n+            this.cl = cl;\n+            this.name = name;\n+        }\n+\n+        @Override\n+        public Boolean run() {\n+            if (cl.getResource(name) == null) {\n+                return Boolean.FALSE;\n+            } else {\n+                return Boolean.TRUE;\n+            }\n+        }\n+    }\n+}\n+\n"}}, {"oid": "2ea8f00a982f38a31db4c0704bd5a4cf70a9ee79", "url": "https://github.com/OpenLiberty/open-liberty/commit/2ea8f00a982f38a31db4c0704bd5a4cf70a9ee79", "message": "11824 - Create Overlay in EL 4.0 IMPL\n\n11824 - Initial Drop: ELParser,ELParserTokenManager,SimpleCharStream\n\n11824 - Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd\n\nRevise EL FAT test: testEL22EmptyOperator_Undefined\n\nAdd and Update copyrights\n\nRename EL Impl to io.openliberty\n\nUpdate EL-4.0 Feature file with new impl bundle name", "committedDate": "2020-06-02T01:10:37Z", "type": "forcePushed"}, {"oid": "5b15877115f2887a8e6bb2c31501453d850f7d3f", "url": "https://github.com/OpenLiberty/open-liberty/commit/5b15877115f2887a8e6bb2c31501453d850f7d3f", "message": "11824 - Create Overlay in EL 4.0 IMPL\n\n11824 - Initial Drop: ELParser,ELParserTokenManager,SimpleCharStream\n\n11824 - Update org.apache.el.parser code with FFDCIgnore\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nUpdate com.ibm.websphere.appserver.el-4.0.feature\n\nUpdate jakarta jasper el bnd.bnd\n\nRevise EL FAT test: testEL22EmptyOperator_Undefined\n\nAdd and Update copyrights\n\nRename EL Impl to io.openliberty\n\nUpdate EL-4.0 Feature file with new impl bundle name", "committedDate": "2020-06-02T01:19:26Z", "type": "forcePushed"}, {"oid": "4f10bb5929e8e1f005dd0dc313372d41fde28a55", "url": "https://github.com/OpenLiberty/open-liberty/commit/4f10bb5929e8e1f005dd0dc313372d41fde28a55", "message": "Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-02T01:31:43Z", "type": "forcePushed"}, {"oid": "eb8bcef27c2db92599ca55adc660f877314375e0", "url": "https://github.com/OpenLiberty/open-liberty/commit/eb8bcef27c2db92599ca55adc660f877314375e0", "message": "12456:Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-02T01:44:41Z", "type": "forcePushed"}, {"oid": "8a02e3ef55e4e7907e2468efe8a23c3841795566", "url": "https://github.com/OpenLiberty/open-liberty/commit/8a02e3ef55e4e7907e2468efe8a23c3841795566", "message": "12457 :Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-02T01:45:26Z", "type": "forcePushed"}, {"oid": "4bf6507dc050c370c3976adc9ad5b611cbd104a7", "url": "https://github.com/OpenLiberty/open-liberty/commit/4bf6507dc050c370c3976adc9ad5b611cbd104a7", "message": "12457 :Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-02T01:46:38Z", "type": "forcePushed"}, {"oid": "15d5f136480c9a11623bee91306ca8212c85e7e8", "url": "https://github.com/OpenLiberty/open-liberty/commit/15d5f136480c9a11623bee91306ca8212c85e7e8", "message": "12457 :Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-03T01:57:43Z", "type": "forcePushed"}, {"oid": "9807f037624c2ddd302b9da105beb13c5fa441da", "url": "https://github.com/OpenLiberty/open-liberty/commit/9807f037624c2ddd302b9da105beb13c5fa441da", "message": "12457 :Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-03T02:07:03Z", "type": "forcePushed"}, {"oid": "b0cc3c9ab3d637ae540ba2bef2fe3db4c3cd7338", "url": "https://github.com/OpenLiberty/open-liberty/commit/b0cc3c9ab3d637ae540ba2bef2fe3db4c3cd7338", "message": "12457 :Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-03T02:26:50Z", "type": "forcePushed"}, {"oid": "572fe697c7e74bd9b12c4886780710c3b36373fd", "url": "https://github.com/OpenLiberty/open-liberty/commit/572fe697c7e74bd9b12c4886780710c3b36373fd", "message": "11824 - Create Overlay in EL 4.0 API\n\nCheckin dependabot/check_this_in_if_it_changes/pom.xml", "committedDate": "2020-06-03T02:32:30Z", "type": "commit"}, {"oid": "0bb951c0466509dc1ad0f53ac4a6d14e793724b2", "url": "https://github.com/OpenLiberty/open-liberty/commit/0bb951c0466509dc1ad0f53ac4a6d14e793724b2", "message": "12456: Port Fix from BZ #64488 -- ImportHandler", "committedDate": "2020-06-03T02:32:31Z", "type": "commit"}, {"oid": "b5257d377540c71ee21b88785ef15b578172e994", "url": "https://github.com/OpenLiberty/open-liberty/commit/b5257d377540c71ee21b88785ef15b578172e994", "message": "12457 :Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-03T02:32:32Z", "type": "forcePushed"}, {"oid": "04d4e36d48b56035319f9b2f65ea4bf9fdc51975", "url": "https://github.com/OpenLiberty/open-liberty/commit/04d4e36d48b56035319f9b2f65ea4bf9fdc51975", "message": "11824 - Create Overlay in EL 4.0 IMPL\n\nRemove jakartaeeMe:true from com.ibm.ws.org.apache.jasper.el\n\nUpdate dependabot/check_this_in_if_it_changes/pom.xml\n\nRename EL Impl to io.openliberty", "committedDate": "2020-06-03T02:34:46Z", "type": "commit"}, {"oid": "3d7ffb7f0e0d364b6cc6e1f889c72e353e349347", "url": "https://github.com/OpenLiberty/open-liberty/commit/3d7ffb7f0e0d364b6cc6e1f889c72e353e349347", "message": "12457 :Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-03T02:34:52Z", "type": "commit"}, {"oid": "3d7ffb7f0e0d364b6cc6e1f889c72e353e349347", "url": "https://github.com/OpenLiberty/open-liberty/commit/3d7ffb7f0e0d364b6cc6e1f889c72e353e349347", "message": "12457 :Update testEL22EmptyOperator_Undefined to handle new error message in Jakarta EL", "committedDate": "2020-06-03T02:34:52Z", "type": "forcePushed"}]}