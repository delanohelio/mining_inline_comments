{"pr_number": 751, "pr_title": "CAM-11679: re-integrate hook method for job execution", "pr_createdAt": "2020-03-24T08:36:44Z", "pr_url": "https://github.com/camunda/camunda-bpm-platform/pull/751", "timeline": [{"oid": "65d92f2c9c82fe871d2cd09556a38cba9d3183a9", "url": "https://github.com/camunda/camunda-bpm-platform/commit/65d92f2c9c82fe871d2cd09556a38cba9d3183a9", "message": "fix(engine): re-integrate executeJob hook method for job execution\n\nRelated to CAM-11679", "committedDate": "2020-03-24T11:49:13Z", "type": "commit"}, {"oid": "65d92f2c9c82fe871d2cd09556a38cba9d3183a9", "url": "https://github.com/camunda/camunda-bpm-platform/commit/65d92f2c9c82fe871d2cd09556a38cba9d3183a9", "message": "fix(engine): re-integrate executeJob hook method for job execution\n\nRelated to CAM-11679", "committedDate": "2020-03-24T11:49:13Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI3MDg2Mw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/751#discussion_r397270863", "bodyText": "@mboskamp, just to make sure I understand correctly since I'm not sure how to test this:\nEven though ExecuteJobHelper.executeJob is not called explicitly anymore, calling endoint.executeJob here ensures that the ExecuteJobHelper is called through an instance of JobExecutionHandler and the Process Data Context for logging feature is intact, i.e. MDC properties are still added?", "author": "koevskinikola", "createdAt": "2020-03-24T16:03:32Z", "path": "javaee/jobexecutor-ra/src/main/java/org/camunda/bpm/container/impl/threading/ra/inflow/JcaInflowExecuteJobsRunnable.java", "diffHunk": "@@ -73,7 +73,6 @@ protected void executeJob(String nextJobId, CommandExecutor commandExecutor) {\n       } catch (ResourceException e) {\n         log.log(Level.WARNING, \"ResourceException while invoking beforeDelivery() on MessageEndpoint '\"+endpoint+\"'\", e);\n       }\n-      JobFailureCollector jobFailureCollector = null;\n       try {\n         jobFailureCollector = ((JobExecutionHandler)endpoint).executeJob(nextJobId, commandExecutor);", "originalCommit": "65d92f2c9c82fe871d2cd09556a38cba9d3183a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzYzODQ4MA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/751#discussion_r397638480", "bodyText": "Not sure, if I understand you correctly.\nExecuteJobHelper.executeJob is called from the JobExecutionHandler implementation and should behave the same in regards to ProcessDataContext as the main implementation: https://github.com/camunda/camunda-bpm-platform/blob/master/javaee/ejb-service/src/main/java/org/camunda/bpm/container/impl/ejb/JobExecutionHandlerMDB.java#L44", "author": "mboskamp", "createdAt": "2020-03-25T06:49:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI3MDg2Mw=="}], "type": "inlineReview", "revised_code": null}]}