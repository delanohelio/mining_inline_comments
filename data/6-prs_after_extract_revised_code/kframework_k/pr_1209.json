{"pr_number": 1209, "pr_title": "Patch for Issue 1203", "pr_createdAt": "2020-04-10T12:50:34Z", "pr_url": "https://github.com/kframework/k/pull/1209", "timeline": [{"oid": "2fb18a734c9a840d44617e2af80275ec3dc6d762", "url": "https://github.com/kframework/k/commit/2fb18a734c9a840d44617e2af80275ec3dc6d762", "message": "tmp", "committedDate": "2020-04-10T12:49:51Z", "type": "commit"}, {"oid": "7707360f07a774eed39c2e1c30e76d48c31c164e", "url": "https://github.com/kframework/k/commit/7707360f07a774eed39c2e1c30e76d48c31c164e", "message": "Added K module to be used for unparsing", "committedDate": "2020-04-13T06:45:23Z", "type": "commit"}, {"oid": "bee1bda2b0e42cd46d54dda4649f7e1bc448ea3b", "url": "https://github.com/kframework/k/commit/bee1bda2b0e42cd46d54dda4649f7e1bc448ea3b", "message": "Merge remote-tracking branch 'upstream/master' into issue-1203", "committedDate": "2020-04-13T06:49:09Z", "type": "commit"}, {"oid": "1da701c866e31c267887b4184b9b909eb501827c", "url": "https://github.com/kframework/k/commit/1da701c866e31c267887b4184b9b909eb501827c", "message": "Fixed test. Fixed claim output for all-path.", "committedDate": "2020-04-13T09:08:32Z", "type": "commit"}, {"oid": "ad52eae93b3a74898c04e42643ae34caf9468b0a", "url": "https://github.com/kframework/k/commit/ad52eae93b3a74898c04e42643ae34caf9468b0a", "message": "Merge remote-tracking branch 'upstream/master' into issue-1203", "committedDate": "2020-04-13T09:11:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ3NjkyNg==", "url": "https://github.com/kframework/k/pull/1209#discussion_r407476926", "bodyText": "What's going on here?", "author": "ttuegel", "createdAt": "2020-04-13T13:26:25Z", "path": "kernel/src/main/java/org/kframework/kast/KastFrontEnd.java", "diffHunk": "@@ -112,7 +116,10 @@ public int run() {\n                 options.module = def.mainSyntaxModuleName();\n                 switch (options.input) {\n                     case KORE:\n-                        unparsingMod = def.languageParsingModule();\n+                        Module languageParsingModule = def.languageParsingModule();\n+                        Module k = def.kompiledDefinition.getModule(\"K\").get();\n+                        unparsingMod = Constructors.Module(\"K-LANGUAGE-PARSING\",\n+                                Set(languageParsingModule, k) , Set(), KORE.Att());", "originalCommit": "ad52eae93b3a74898c04e42643ae34caf9468b0a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ4NDkyNQ==", "url": "https://github.com/kframework/k/pull/1209#discussion_r407484925", "bodyText": "Yeah, this seems strange.", "author": "dwightguth", "createdAt": "2020-04-13T13:44:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ3NjkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzU2NTQyNw==", "url": "https://github.com/kframework/k/pull/1209#discussion_r407565427", "bodyText": "Well, the #KRewrite label is defined in the K module, which is used for parsing rules and not being computed for the compiled definition.\nI'm just creating a module importing both the k module and the parsing module here on-spot, to make #KRewrite available to the definition.\nDo you have any suggestions?", "author": "traiansf", "createdAt": "2020-04-13T16:18:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ3NjkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzU5OTIyNA==", "url": "https://github.com/kframework/k/pull/1209#discussion_r407599224", "bodyText": "Just create a new module in kast.k containing just the rewrite production and import it in both K and K-TERM.", "author": "dwightguth", "createdAt": "2020-04-13T17:20:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ3NjkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk4NTE3MA==", "url": "https://github.com/kframework/k/pull/1209#discussion_r407985170", "bodyText": "done. please take another look.", "author": "traiansf", "createdAt": "2020-04-14T09:12:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ3NjkyNg=="}], "type": "inlineReview", "revised_code": {"commit": "f9ecd56a466fff17a3da4c154edc490f856d899e", "chunk": "diff --git a/kernel/src/main/java/org/kframework/kast/KastFrontEnd.java b/kernel/src/main/java/org/kframework/kast/KastFrontEnd.java\nindex bdb6559ec..4df9d1280 100644\n--- a/kernel/src/main/java/org/kframework/kast/KastFrontEnd.java\n+++ b/kernel/src/main/java/org/kframework/kast/KastFrontEnd.java\n\n@@ -116,10 +116,7 @@ public class KastFrontEnd extends FrontEnd {\n                 options.module = def.mainSyntaxModuleName();\n                 switch (options.input) {\n                     case KORE:\n-                        Module languageParsingModule = def.languageParsingModule();\n-                        Module k = def.kompiledDefinition.getModule(\"K\").get();\n-                        unparsingMod = Constructors.Module(\"K-LANGUAGE-PARSING\",\n-                                Set(languageParsingModule, k) , Set(), KORE.Att());\n+                        unparsingMod = def.languageParsingModule();\n                         break;\n                     default:\n                         unparsingMod = def.kompiledDefinition.getModule(def.mainSyntaxModuleName()).get();\n"}}, {"oid": "f9ecd56a466fff17a3da4c154edc490f856d899e", "url": "https://github.com/kframework/k/commit/f9ecd56a466fff17a3da4c154edc490f856d899e", "message": "Addressing ocmments", "committedDate": "2020-04-14T05:50:46Z", "type": "commit"}, {"oid": "8130c0ae90342d9c2c0c9184fa9557aa7c1f2dc1", "url": "https://github.com/kframework/k/commit/8130c0ae90342d9c2c0c9184fa9557aa7c1f2dc1", "message": "Merge remote-tracking branch 'upstream/master' into issue-1203", "committedDate": "2020-04-14T05:50:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMwNjQ2MQ==", "url": "https://github.com/kframework/k/pull/1209#discussion_r408306461", "bodyText": "looks like you can revert the changes to this file.", "author": "dwightguth", "createdAt": "2020-04-14T17:21:43Z", "path": "kernel/src/main/java/org/kframework/kast/KastFrontEnd.java", "diffHunk": "@@ -5,9 +5,11 @@\n import com.google.inject.Provider;\n import org.kframework.attributes.Source;\n import org.kframework.compile.ExpandMacros;\n+import org.kframework.definition.Constructors;", "originalCommit": "8130c0ae90342d9c2c0c9184fa9557aa7c1f2dc1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "756bc673dde719d911b9fd1466fb805dbbb8a7dc", "chunk": "diff --git a/kernel/src/main/java/org/kframework/kast/KastFrontEnd.java b/kernel/src/main/java/org/kframework/kast/KastFrontEnd.java\nindex 4df9d1280..7be30831d 100644\n--- a/kernel/src/main/java/org/kframework/kast/KastFrontEnd.java\n+++ b/kernel/src/main/java/org/kframework/kast/KastFrontEnd.java\n\n@@ -5,11 +5,9 @@ import com.google.inject.Inject;\n import com.google.inject.Provider;\n import org.kframework.attributes.Source;\n import org.kframework.compile.ExpandMacros;\n-import org.kframework.definition.Constructors;\n import org.kframework.definition.Module;\n import org.kframework.kompile.CompiledDefinition;\n import org.kframework.kore.K;\n-import org.kframework.kore.KORE;\n import org.kframework.main.FrontEnd;\n import org.kframework.parser.KRead;\n import org.kframework.parser.outer.Outer;\n"}}, {"oid": "66d2733cbb90af7ec9960dffccabcf66f7874393", "url": "https://github.com/kframework/k/commit/66d2733cbb90af7ec9960dffccabcf66f7874393", "message": "Merge remote-tracking branch 'upstream/master' into issue-1203", "committedDate": "2020-04-14T18:37:56Z", "type": "commit"}, {"oid": "756bc673dde719d911b9fd1466fb805dbbb8a7dc", "url": "https://github.com/kframework/k/commit/756bc673dde719d911b9fd1466fb805dbbb8a7dc", "message": "Addressing reviews", "committedDate": "2020-04-14T18:39:55Z", "type": "commit"}, {"oid": "401b1dde480fc1b1790768c1ad86f6a1c0b2a6c2", "url": "https://github.com/kframework/k/commit/401b1dde480fc1b1790768c1ad86f6a1c0b2a6c2", "message": "Merge branch 'master' into issue-1203", "committedDate": "2020-04-15T07:03:32Z", "type": "commit"}, {"oid": "a5cf5f6534db26a8331c9e5e4392e81ca9eb2c87", "url": "https://github.com/kframework/k/commit/a5cf5f6534db26a8331c9e5e4392e81ca9eb2c87", "message": "Merge branch 'master' into issue-1203", "committedDate": "2020-04-16T09:49:00Z", "type": "commit"}, {"oid": "a1fe6f45004c5591301b32a93ccfebdbed558eea", "url": "https://github.com/kframework/k/commit/a1fe6f45004c5591301b32a93ccfebdbed558eea", "message": "Merge branch 'master' into issue-1203", "committedDate": "2020-04-29T10:56:54Z", "type": "commit"}, {"oid": "6604373065a35325e38f6e04e8b130d367004127", "url": "https://github.com/kframework/k/commit/6604373065a35325e38f6e04e8b130d367004127", "message": "Merge remote-tracking branch 'upstream/master' into issue-1203", "committedDate": "2020-06-04T12:18:28Z", "type": "commit"}, {"oid": "a843a96971682f5feb5e0c24ed2d77f2860418bb", "url": "https://github.com/kframework/k/commit/a843a96971682f5feb5e0c24ed2d77f2860418bb", "message": "Reverting changes to test infrastructure", "committedDate": "2020-06-04T12:22:44Z", "type": "commit"}]}