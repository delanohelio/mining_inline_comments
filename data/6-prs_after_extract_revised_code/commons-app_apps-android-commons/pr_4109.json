{"pr_number": 4109, "pr_title": "Fixed issue with \"Copy previous captions & descriptions\".", "pr_createdAt": "2020-12-16T11:02:18Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/4109", "timeline": [{"oid": "26829b2b75e8cea84fab357b3ef0991d8ed752d0", "url": "https://github.com/commons-app/apps-android-commons/commit/26829b2b75e8cea84fab357b3ef0991d8ed752d0", "message": "Fixed issue with \"Copy previous captions & descriptions\".", "committedDate": "2020-12-16T10:46:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDM2MzcwNA==", "url": "https://github.com/commons-app/apps-android-commons/pull/4109#discussion_r544363704", "bodyText": "Would you mind adding a comment line before this block, to explain in what circumstances it is reached, and what the code does? Thanks!", "author": "nicolas-raoul", "createdAt": "2020-12-16T14:54:54Z", "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java", "diffHunk": "@@ -179,12 +179,17 @@ public void onNothingSelected(AdapterView<?> adapterView) {\n                     // If user has chosen a default language from settings activity savedLanguageValue is not null\n                     spinnerDescriptionLanguages.setSelection(languagesAdapter.getIndexOfLanguageCode(savedLanguageValue));\n                 } else {\n-                    if (position == 0) {\n-                        int defaultLocaleIndex = languagesAdapter\n-                                .getIndexOfUserDefaultLocale(spinnerDescriptionLanguages.getContext());\n-                        spinnerDescriptionLanguages.setSelection(defaultLocaleIndex, true);\n+                    if(uploadMediaDetails.get(position).getLanguageCode() != null){", "originalCommit": "26829b2b75e8cea84fab357b3ef0991d8ed752d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQzNTkwNQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/4109#discussion_r544435905", "bodyText": "I have added it,  code is just providing the same previous language code to the spinner for current upload, when user presses the copy previous caption & description button .", "author": "Pratham2305", "createdAt": "2020-12-16T16:22:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDM2MzcwNA=="}], "type": "inlineReview", "revised_code": {"commit": "e01833cfc03d1fe782c07c41581719a971adabfc", "chunk": "diff --git a/app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java b/app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java\nindex 430406ac1..ae3bafac7 100644\n--- a/app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java\n+++ b/app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java\n\n@@ -179,9 +179,12 @@ public class UploadMediaDetailAdapter extends RecyclerView.Adapter<UploadMediaDe\n                     // If user has chosen a default language from settings activity savedLanguageValue is not null\n                     spinnerDescriptionLanguages.setSelection(languagesAdapter.getIndexOfLanguageCode(savedLanguageValue));\n                 } else {\n+                    //Checking whether Language Code attribute is null or not.\n                     if(uploadMediaDetails.get(position).getLanguageCode() != null){\n+                        //If it is not null that means it is fetching details from the previous upload (i.e. when user has pressed copy previous caption & description)\n+                        //hence providing same language code for the current upload.\n                         spinnerDescriptionLanguages.setSelection(languagesAdapter\n-                            .getIndexOfLanguageCode(uploadMediaDetails.get(position).getLanguageCode()),true);\n+                            .getIndexOfLanguageCode(uploadMediaDetails.get(position).getLanguageCode()), true);\n                     } else {\n                         if (position == 0) {\n                             int defaultLocaleIndex = languagesAdapter\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDM2NDEwNw==", "url": "https://github.com/commons-app/apps-android-commons/pull/4109#discussion_r544364107", "bodyText": "Very minor style detail: Please add a space before true. Thanks!", "author": "nicolas-raoul", "createdAt": "2020-12-16T14:55:24Z", "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java", "diffHunk": "@@ -179,12 +179,17 @@ public void onNothingSelected(AdapterView<?> adapterView) {\n                     // If user has chosen a default language from settings activity savedLanguageValue is not null\n                     spinnerDescriptionLanguages.setSelection(languagesAdapter.getIndexOfLanguageCode(savedLanguageValue));\n                 } else {\n-                    if (position == 0) {\n-                        int defaultLocaleIndex = languagesAdapter\n-                                .getIndexOfUserDefaultLocale(spinnerDescriptionLanguages.getContext());\n-                        spinnerDescriptionLanguages.setSelection(defaultLocaleIndex, true);\n+                    if(uploadMediaDetails.get(position).getLanguageCode() != null){\n+                        spinnerDescriptionLanguages.setSelection(languagesAdapter\n+                            .getIndexOfLanguageCode(uploadMediaDetails.get(position).getLanguageCode()),true);", "originalCommit": "26829b2b75e8cea84fab357b3ef0991d8ed752d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e01833cfc03d1fe782c07c41581719a971adabfc", "chunk": "diff --git a/app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java b/app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java\nindex 430406ac1..ae3bafac7 100644\n--- a/app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java\n+++ b/app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java\n\n@@ -179,9 +179,12 @@ public class UploadMediaDetailAdapter extends RecyclerView.Adapter<UploadMediaDe\n                     // If user has chosen a default language from settings activity savedLanguageValue is not null\n                     spinnerDescriptionLanguages.setSelection(languagesAdapter.getIndexOfLanguageCode(savedLanguageValue));\n                 } else {\n+                    //Checking whether Language Code attribute is null or not.\n                     if(uploadMediaDetails.get(position).getLanguageCode() != null){\n+                        //If it is not null that means it is fetching details from the previous upload (i.e. when user has pressed copy previous caption & description)\n+                        //hence providing same language code for the current upload.\n                         spinnerDescriptionLanguages.setSelection(languagesAdapter\n-                            .getIndexOfLanguageCode(uploadMediaDetails.get(position).getLanguageCode()),true);\n+                            .getIndexOfLanguageCode(uploadMediaDetails.get(position).getLanguageCode()), true);\n                     } else {\n                         if (position == 0) {\n                             int defaultLocaleIndex = languagesAdapter\n"}}, {"oid": "e01833cfc03d1fe782c07c41581719a971adabfc", "url": "https://github.com/commons-app/apps-android-commons/commit/e01833cfc03d1fe782c07c41581719a971adabfc", "message": "Added comments and also fixed the styling issue.", "committedDate": "2020-12-16T16:15:08Z", "type": "commit"}]}