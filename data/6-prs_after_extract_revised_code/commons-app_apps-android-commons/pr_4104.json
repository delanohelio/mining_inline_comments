{"pr_number": 4104, "pr_title": "Repull request of fixes #4081 App is crash when Backbutton is pressed", "pr_createdAt": "2020-12-14T04:24:59Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/4104", "timeline": [{"oid": "50cad30ce28a1a32f99fb520334484cbcb12eee1", "url": "https://github.com/commons-app/apps-android-commons/commit/50cad30ce28a1a32f99fb520334484cbcb12eee1", "message": "fixes #4081\n->fixes NullPointerexception in ContributionsFragment and Favorities when backButton is pressed", "committedDate": "2020-12-12T13:12:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgyMTYzOA==", "url": "https://github.com/commons-app/apps-android-commons/pull/4104#discussion_r545821638", "bodyText": "This is not a good practice to make a fragment static and reaching it with classname. You should use object oriented approaches instead. Otherwise it will cause leaks.", "author": "neslihanturan", "createdAt": "2020-12-18T13:11:45Z", "path": "app/src/main/java/fr/free/nrw/commons/contributions/MainActivity.java", "diffHunk": "@@ -238,7 +238,15 @@ private void initMain() {\n     public void onBackPressed() {\n         if (contributionsFragment != null && activeFragment == ActiveFragment.CONTRIBUTIONS) {\n             // Meas that contribution fragment is visible\n-            contributionsFragment.backButtonClicked();\n+            if (ContributionsFragment.mediaDetailPagerFragment==null) { //means you open the app currently and not open mediaDetailPage fragment", "originalCommit": "50cad30ce28a1a32f99fb520334484cbcb12eee1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzQ1MjcwOQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/4104#discussion_r553452709", "bodyText": "wait wait, sorry this seems like resolved in current version.", "author": "neslihanturan", "createdAt": "2021-01-07T16:53:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgyMTYzOA=="}], "type": "inlineReview", "revised_code": {"commit": "1d7f25e7cccfffba4c929981d458429ab055ce22", "chunk": "diff --git a/app/src/main/java/fr/free/nrw/commons/contributions/MainActivity.java b/app/src/main/java/fr/free/nrw/commons/contributions/MainActivity.java\nindex 64b6da69d..a02e35b3b 100644\n--- a/app/src/main/java/fr/free/nrw/commons/contributions/MainActivity.java\n+++ b/app/src/main/java/fr/free/nrw/commons/contributions/MainActivity.java\n\n@@ -238,10 +239,11 @@ public class MainActivity  extends BaseActivity\n     public void onBackPressed() {\n         if (contributionsFragment != null && activeFragment == ActiveFragment.CONTRIBUTIONS) {\n             // Meas that contribution fragment is visible\n-            if (ContributionsFragment.mediaDetailPagerFragment==null) { //means you open the app currently and not open mediaDetailPage fragment\n+            mediaDetailPagerFragment=contributionsFragment.getMediaDetailPagerFragment();\n+            if (mediaDetailPagerFragment ==null) { //means you open the app currently and not open mediaDetailPage fragment\n                 super.onBackPressed();\n-            } else if (ContributionsFragment.mediaDetailPagerFragment!=null) {\n-                if(!ContributionsFragment.mediaDetailPagerFragment.isVisible()){  //mean you are at contributions fragement\n+            } else if (mediaDetailPagerFragment!=null) {\n+                if(!mediaDetailPagerFragment.isVisible()){  //means you are at contributions fragement\n                     super.onBackPressed();\n                 } else {  //mean you are at mediaDetailPager Fragment\n                     contributionsFragment.backButtonClicked();\n"}}, {"oid": "1d7f25e7cccfffba4c929981d458429ab055ce22", "url": "https://github.com/commons-app/apps-android-commons/commit/1d7f25e7cccfffba4c929981d458429ab055ce22", "message": "reformed the codechange", "committedDate": "2020-12-20T10:40:05Z", "type": "commit"}]}