{"pr_number": 3853, "pr_title": "Hidden categories are not showed in suggested categories", "pr_createdAt": "2020-06-29T23:49:09Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/3853", "timeline": [{"oid": "2a93285f87936ca3e6f19efa7f314e3b283d85cb", "url": "https://github.com/commons-app/apps-android-commons/commit/2a93285f87936ca3e6f19efa7f314e3b283d85cb", "message": "fixed the problem of the hidden categories", "committedDate": "2020-06-29T22:33:09Z", "type": "commit"}, {"oid": "2462c9fc35f794d8e881b68c5a9fa0f088870370", "url": "https://github.com/commons-app/apps-android-commons/commit/2462c9fc35f794d8e881b68c5a9fa0f088870370", "message": "fixed the problem of the hidden categories", "committedDate": "2020-06-29T23:39:30Z", "type": "commit"}, {"oid": "c98bab95058b06bc8f37829c73cb5597a6a14029", "url": "https://github.com/commons-app/apps-android-commons/commit/c98bab95058b06bc8f37829c73cb5597a6a14029", "message": "Merge branch 'master' into add-pquinterom", "committedDate": "2020-06-30T00:00:15Z", "type": "commit"}, {"oid": "004369c9219aa3df86e53cc5adfc056047c9722b", "url": "https://github.com/commons-app/apps-android-commons/commit/004369c9219aa3df86e53cc5adfc056047c9722b", "message": "corrections made in other parts of the code", "committedDate": "2020-06-30T01:08:24Z", "type": "commit"}, {"oid": "b316aaf0cd1eb2af2310de0925e73585d327ebcd", "url": "https://github.com/commons-app/apps-android-commons/commit/b316aaf0cd1eb2af2310de0925e73585d327ebcd", "message": "Merge branch 'add-pquinterom' of https://github.com/PaulinaQuintero/apps-android-commons into add-pquinterom", "committedDate": "2020-06-30T01:11:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIxNzgwNA==", "url": "https://github.com/commons-app/apps-android-commons/pull/3853#discussion_r449217804", "bodyText": "For the API to actually return the categoryinfo in the requests made by the app you should do this\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        + \"&generator=allcategories\")\n          \n          \n            \n                        + \"&generator=allcategories&prop=categoryinfo\")", "author": "sivaraam", "createdAt": "2020-07-02T19:11:28Z", "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java", "diffHunk": "@@ -33,9 +33,11 @@\n      */\n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n             + \"&generator=allcategories\")", "originalCommit": "b316aaf0cd1eb2af2310de0925e73585d327ebcd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "782cffd190a1932ac3f2f595d7900fc6264bc1dd", "chunk": "diff --git a/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java b/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\nindex 231614a53..96fd0043b 100644\n--- a/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\n+++ b/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\n\n@@ -32,12 +32,11 @@ public interface CategoryInterface {\n      * @return\n      */\n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n-            + \"&generator=allcategories\")\n+            + \"&generator=allcategories&prop=categoryinfo\")\n \n     Single<MwQueryResponse> searchCategoriesForPrefix(@Query(\"gacprefix\") String prefix,\n                                                           @Query(\"gaclimit\") int itemLimit, @Query(\"gacoffset\") int offset);\n-\n-\n+    \n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n             + \"&generator=categorymembers&gcmtype=subcat\"\n             + \"&prop=info&gcmlimit=50\")\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIxODAxNw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3853#discussion_r449218017", "bodyText": "Revert these whitespace changes.", "author": "sivaraam", "createdAt": "2020-07-02T19:11:56Z", "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java", "diffHunk": "@@ -33,9 +33,11 @@\n      */\n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n             + \"&generator=allcategories\")\n+\n     Single<MwQueryResponse> searchCategoriesForPrefix(@Query(\"gacprefix\") String prefix,\n                                                           @Query(\"gaclimit\") int itemLimit, @Query(\"gacoffset\") int offset);\n \n+", "originalCommit": "b316aaf0cd1eb2af2310de0925e73585d327ebcd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "782cffd190a1932ac3f2f595d7900fc6264bc1dd", "chunk": "diff --git a/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java b/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\nindex 231614a53..96fd0043b 100644\n--- a/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\n+++ b/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\n\n@@ -32,12 +32,11 @@ public interface CategoryInterface {\n      * @return\n      */\n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n-            + \"&generator=allcategories\")\n+            + \"&generator=allcategories&prop=categoryinfo\")\n \n     Single<MwQueryResponse> searchCategoriesForPrefix(@Query(\"gacprefix\") String prefix,\n                                                           @Query(\"gaclimit\") int itemLimit, @Query(\"gacoffset\") int offset);\n-\n-\n+    \n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n             + \"&generator=categorymembers&gcmtype=subcat\"\n             + \"&prop=info&gcmlimit=50\")\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIxODI0Nw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3853#discussion_r449218247", "bodyText": "Revert this whitespace change too.", "author": "sivaraam", "createdAt": "2020-07-02T19:12:21Z", "path": "data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java", "diffHunk": "@@ -194,6 +210,9 @@ String source() {\n         }\n     }\n \n+\n+\n+", "originalCommit": "b316aaf0cd1eb2af2310de0925e73585d327ebcd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "782cffd190a1932ac3f2f595d7900fc6264bc1dd", "chunk": "diff --git a/data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java b/data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java\nindex 5c3fecabc..6620af47f 100644\n--- a/data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java\n+++ b/data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java\n\n@@ -210,9 +210,6 @@ public class MwQueryPage extends BaseModel {\n         }\n     }\n \n-\n-\n-\n     public static class PageProps {\n         @SuppressWarnings(\"unused\") @SerializedName(\"wikibase_item\") @Nullable private String wikiBaseItem;\n         @SuppressWarnings(\"unused\") @Nullable private String displaytitle;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIxODU0Nw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3853#discussion_r449218547", "bodyText": "Revert this removal of the newline too.", "author": "sivaraam", "createdAt": "2020-07-02T19:13:01Z", "path": "data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java", "diffHunk": "@@ -234,4 +253,4 @@ public boolean hidden() {\n         @SuppressWarnings(\"unused\") private List<String> alias;\n         @SuppressWarnings(\"unused\") private List<String> label;\n     }\n-}\n+}", "originalCommit": "b316aaf0cd1eb2af2310de0925e73585d327ebcd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "83aad510dde4105cf3be293da75886f7e1accce5", "chunk": "diff --git a/data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java b/data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java\nindex 5c3fecabc..fceeed938 100644\n--- a/data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java\n+++ b/data-client/src/main/java/org/wikipedia/dataclient/mwapi/MwQueryPage.java\n\n@@ -253,4 +250,4 @@ public class MwQueryPage extends BaseModel {\n         @SuppressWarnings(\"unused\") private List<String> alias;\n         @SuppressWarnings(\"unused\") private List<String> label;\n     }\n-}\n\\ No newline at end of file\n+}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIxODgxOQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3853#discussion_r449218819", "bodyText": "Revert changes to this file.", "author": "sivaraam", "createdAt": "2020-07-02T19:13:39Z", "path": "data-client/src/main/java/org/wikipedia/search/SearchResults.java", "diffHunk": "@@ -60,5 +60,4 @@ public SearchResults(@NonNull List<MwQueryPage> pages, @NonNull WikiSite wiki,\n     @Nullable public Map<String, String> getContinuation() {\n         return continuation;\n     }\n-}\n-\n+}", "originalCommit": "b316aaf0cd1eb2af2310de0925e73585d327ebcd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "83aad510dde4105cf3be293da75886f7e1accce5", "chunk": "diff --git a/data-client/src/main/java/org/wikipedia/search/SearchResults.java b/data-client/src/main/java/org/wikipedia/search/SearchResults.java\nindex 3a3a38db7..7ee5f7fe3 100644\n--- a/data-client/src/main/java/org/wikipedia/search/SearchResults.java\n+++ b/data-client/src/main/java/org/wikipedia/search/SearchResults.java\n\n@@ -60,4 +60,4 @@ public class SearchResults {\n     @Nullable public Map<String, String> getContinuation() {\n         return continuation;\n     }\n-}\n\\ No newline at end of file\n+}\n"}}, {"oid": "782cffd190a1932ac3f2f595d7900fc6264bc1dd", "url": "https://github.com/commons-app/apps-android-commons/commit/782cffd190a1932ac3f2f595d7900fc6264bc1dd", "message": "corrections made", "committedDate": "2020-07-03T23:28:45Z", "type": "commit"}, {"oid": "83aad510dde4105cf3be293da75886f7e1accce5", "url": "https://github.com/commons-app/apps-android-commons/commit/83aad510dde4105cf3be293da75886f7e1accce5", "message": "all corrections made", "committedDate": "2020-07-03T23:37:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgwMTY1Nw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3853#discussion_r449801657", "bodyText": "Remove this additional new line.", "author": "sivaraam", "createdAt": "2020-07-04T20:05:07Z", "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java", "diffHunk": "@@ -32,10 +32,11 @@\n      * @return\n      */\n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n-            + \"&generator=allcategories\")\n+            + \"&generator=allcategories&prop=categoryinfo\")\n+", "originalCommit": "83aad510dde4105cf3be293da75886f7e1accce5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c37546c4af45e2184dcbaa80c574af6d0e3a6e0f", "chunk": "diff --git a/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java b/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\nindex 96fd0043b..61ed46bd0 100644\n--- a/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\n+++ b/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\n\n@@ -33,7 +33,6 @@ public interface CategoryInterface {\n      */\n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n             + \"&generator=allcategories&prop=categoryinfo\")\n-\n     Single<MwQueryResponse> searchCategoriesForPrefix(@Query(\"gacprefix\") String prefix,\n                                                           @Query(\"gaclimit\") int itemLimit, @Query(\"gacoffset\") int offset);\n     \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgwMTY5MA==", "url": "https://github.com/commons-app/apps-android-commons/pull/3853#discussion_r449801690", "bodyText": "Remove this needless whitespace.", "author": "sivaraam", "createdAt": "2020-07-04T20:05:26Z", "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java", "diffHunk": "@@ -32,10 +32,11 @@\n      * @return\n      */\n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n-            + \"&generator=allcategories\")\n+            + \"&generator=allcategories&prop=categoryinfo\")\n+\n     Single<MwQueryResponse> searchCategoriesForPrefix(@Query(\"gacprefix\") String prefix,\n                                                           @Query(\"gaclimit\") int itemLimit, @Query(\"gacoffset\") int offset);\n-\n+    ", "originalCommit": "83aad510dde4105cf3be293da75886f7e1accce5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c37546c4af45e2184dcbaa80c574af6d0e3a6e0f", "chunk": "diff --git a/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java b/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\nindex 96fd0043b..61ed46bd0 100644\n--- a/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\n+++ b/app/src/main/java/fr/free/nrw/commons/category/CategoryInterface.java\n\n@@ -33,7 +33,6 @@ public interface CategoryInterface {\n      */\n     @GET(\"w/api.php?action=query&format=json&formatversion=2\"\n             + \"&generator=allcategories&prop=categoryinfo\")\n-\n     Single<MwQueryResponse> searchCategoriesForPrefix(@Query(\"gacprefix\") String prefix,\n                                                           @Query(\"gaclimit\") int itemLimit, @Query(\"gacoffset\") int offset);\n     \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgwMTkxNw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3853#discussion_r449801917", "bodyText": "I don't see any need for this file to be changed. So, revert the changes to this file. You could use the following commands to revert the changes in this file:\ngit fetch origin\ngit checkout origin/master -- data-client/src/main/java/org/wikipedia/search/SearchResults.java\nAssuming origin points to this repo.", "author": "sivaraam", "createdAt": "2020-07-04T20:08:43Z", "path": "data-client/src/main/java/org/wikipedia/search/SearchResults.java", "diffHunk": "@@ -35,7 +35,7 @@ public SearchResults() {\n      * @param suggestion a search suggestion to show to the user: \"Did you mean ...?\"\n      */\n     public SearchResults(@NonNull List<MwQueryPage> pages, @NonNull WikiSite wiki,\n-                         @Nullable Map<String, String> continuation, @Nullable String suggestion) {\n+        @Nullable Map<String, String> continuation, @Nullable String suggestion) {", "originalCommit": "83aad510dde4105cf3be293da75886f7e1accce5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c37546c4af45e2184dcbaa80c574af6d0e3a6e0f", "chunk": "diff --git a/data-client/src/main/java/org/wikipedia/search/SearchResults.java b/data-client/src/main/java/org/wikipedia/search/SearchResults.java\nindex 7ee5f7fe3..88b278f02 100644\n--- a/data-client/src/main/java/org/wikipedia/search/SearchResults.java\n+++ b/data-client/src/main/java/org/wikipedia/search/SearchResults.java\n\n@@ -35,7 +35,7 @@ public class SearchResults {\n      * @param suggestion a search suggestion to show to the user: \"Did you mean ...?\"\n      */\n     public SearchResults(@NonNull List<MwQueryPage> pages, @NonNull WikiSite wiki,\n-        @Nullable Map<String, String> continuation, @Nullable String suggestion) {\n+                         @Nullable Map<String, String> continuation, @Nullable String suggestion) {\n         List<SearchResult> searchResults = new ArrayList<>();\n \n         // Sort the array based on the \"index\" property\n"}}, {"oid": "c37546c4af45e2184dcbaa80c574af6d0e3a6e0f", "url": "https://github.com/commons-app/apps-android-commons/commit/c37546c4af45e2184dcbaa80c574af6d0e3a6e0f", "message": "new corrections done, removed whitespaces and corrections in responsemapper", "committedDate": "2020-07-04T21:09:47Z", "type": "commit"}, {"oid": "646a2871201600001fc2e96e01e7fb7542aa6c6f", "url": "https://github.com/commons-app/apps-android-commons/commit/646a2871201600001fc2e96e01e7fb7542aa6c6f", "message": "new corrections done, removed whitespaces and corrections in responsemapper", "committedDate": "2020-07-04T21:11:53Z", "type": "commit"}, {"oid": "50e4b0c85be5872dce12aac5e31948fc81a9aa12", "url": "https://github.com/commons-app/apps-android-commons/commit/50e4b0c85be5872dce12aac5e31948fc81a9aa12", "message": "Revert some whitespace changes", "committedDate": "2020-07-19T14:06:15Z", "type": "commit"}, {"oid": "14a3be3112f56bb24cab12a41a81b2c8d3f8c0d0", "url": "https://github.com/commons-app/apps-android-commons/commit/14a3be3112f56bb24cab12a41a81b2c8d3f8c0d0", "message": "Merge remote-tracking branch 'origin/master' into hide-hidden-categories", "committedDate": "2020-07-19T14:35:40Z", "type": "commit"}]}