{"pr_number": 192, "pr_title": "Fix intermittent print URL bug", "pr_createdAt": "2020-06-24T13:58:30Z", "pr_url": "https://github.com/cryostatio/cryostat/pull/192", "timeline": [{"oid": "04b10ecf1e9ed8cac1666850807004755cc5b335", "url": "https://github.com/cryostatio/cryostat/commit/04b10ecf1e9ed8cac1666850807004755cc5b335", "message": "Fix ListCommand and ListSavedRecordingsCommand to enforce order in which URLs are printed (previously causing intermittent test failures)", "committedDate": "2020-06-24T13:45:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA0Nzg3Nw==", "url": "https://github.com/cryostatio/cryostat/pull/192#discussion_r445047877", "bodyText": "This is a bit fragile, in case the method is renamed from getDownloadUrl to getDownloadURL for example. Could it be made case-insensitive?", "author": "andrewazores", "createdAt": "2020-06-24T17:13:59Z", "path": "src/main/java/com/redhat/rhjmc/containerjfr/commands/internal/ListCommand.java", "diffHunk": "@@ -150,19 +151,24 @@ private static String toString(HyperlinkedSerializableRecordingDescriptor descri\n                 ArrayUtils.addAll(\n                         descriptor.getClass().getSuperclass().getDeclaredMethods(),\n                         descriptor.getClass().getDeclaredMethods());\n+\n+        List<String> urls = new ArrayList<String>();\n         for (Method m : methods) {\n             if (m.getParameterTypes().length == 0\n                     && (m.getName().startsWith(\"get\") || m.getName().startsWith(\"is\"))) {\n-                sb.append(\"\\t\");\n-                sb.append(m.getName());\n-\n-                sb.append(\"\\t\\t\");\n-                sb.append(m.invoke(descriptor));\n-\n-                sb.append(\"\\n\");\n+                if (m.getName().contains(\"Url\")) {", "originalCommit": "04b10ecf1e9ed8cac1666850807004755cc5b335", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA5NzU5NQ==", "url": "https://github.com/cryostatio/cryostat/pull/192#discussion_r445097595", "bodyText": "Ok, should've fixed it.", "author": "Alexjsenn", "createdAt": "2020-06-24T18:43:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA0Nzg3Nw=="}], "type": "inlineReview", "revised_code": {"commit": "c55b4e7f9f221e9c13bf7b134fb0629ae04e1c69", "chunk": "diff --git a/src/main/java/com/redhat/rhjmc/containerjfr/commands/internal/ListCommand.java b/src/main/java/com/redhat/rhjmc/containerjfr/commands/internal/ListCommand.java\nindex a64fe1fe..75ebc93e 100644\n--- a/src/main/java/com/redhat/rhjmc/containerjfr/commands/internal/ListCommand.java\n+++ b/src/main/java/com/redhat/rhjmc/containerjfr/commands/internal/ListCommand.java\n\n@@ -156,7 +156,7 @@ class ListCommand extends AbstractConnectedCommand implements SerializableComman\n         for (Method m : methods) {\n             if (m.getParameterTypes().length == 0\n                     && (m.getName().startsWith(\"get\") || m.getName().startsWith(\"is\"))) {\n-                if (m.getName().contains(\"Url\")) {\n+                if (m.getName().toLowerCase().contains(\"url\")) {\n                     urls.add(String.format(\"\\t%s\\t\\t%s%n\", m.getName(), m.invoke(descriptor)));\n                 } else {\n                     sb.append(String.format(\"\\t%s\\t\\t%s%n\", m.getName(), m.invoke(descriptor)));\n"}}, {"oid": "c55b4e7f9f221e9c13bf7b134fb0629ae04e1c69", "url": "https://github.com/cryostatio/cryostat/commit/c55b4e7f9f221e9c13bf7b134fb0629ae04e1c69", "message": "Make check for url case insensitive", "committedDate": "2020-06-24T18:43:01Z", "type": "commit"}, {"oid": "383379d79a5c2619c73a4f7ece5a4db2a4137757", "url": "https://github.com/cryostatio/cryostat/commit/383379d79a5c2619c73a4f7ece5a4db2a4137757", "message": "split URL test into seperate tests for download and report URLs", "committedDate": "2020-06-29T13:57:33Z", "type": "commit"}]}