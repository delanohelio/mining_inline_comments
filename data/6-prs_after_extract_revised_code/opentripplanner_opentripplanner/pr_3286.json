{"pr_number": 3286, "pr_title": "Support for versioning the configuration files", "pr_createdAt": "2020-12-11T14:06:31Z", "pr_url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3286", "timeline": [{"oid": "49b46f4305ee31d745f86ca8f37ee70682bb210d", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/49b46f4305ee31d745f86ca8f37ee70682bb210d", "message": "Support for versioning the configuration files #3282\n- Added ApiServerInfo API classes to the REST API, the api is changed.\n- Fix bug in Maven Version parsing. The parser did not account for multiple dashes (`-`) in the qualifier.\n- Fix bug in Graph Serialization version comparison, commit hash was part of the compare and made every graph be incompatible.", "committedDate": "2020-12-11T14:03:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzE3OTc0MQ==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3286#discussion_r543179741", "bodyText": "Rename \"maven-version\" to \"otp-project-info.properties\" and this class to reflect the file name.", "author": "t2gran", "createdAt": "2020-12-15T09:25:43Z", "path": "src/main/java/org/opentripplanner/model/projectinfo/MavenVersionParser.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package org.opentripplanner.model.projectinfo;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.InputStream;\n+import java.util.Properties;\n+\n+class MavenVersionParser {\n+  private static final Logger LOG = LoggerFactory.getLogger(ProjectInfo.class);\n+  private static final String FILENAME = \"maven-version.properties\";", "originalCommit": "49b46f4305ee31d745f86ca8f37ee70682bb210d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2d88477c043419dcac851c64c73abf1d8b4c536a", "chunk": "diff --git a/src/main/java/org/opentripplanner/model/projectinfo/MavenVersionParser.java b/src/main/java/org/opentripplanner/model/projectinfo/OtpProjectInfoParser.java\nsimilarity index 63%\nrename from src/main/java/org/opentripplanner/model/projectinfo/MavenVersionParser.java\nrename to src/main/java/org/opentripplanner/model/projectinfo/OtpProjectInfoParser.java\nindex f48d06531..9aa428691 100644\n--- a/src/main/java/org/opentripplanner/model/projectinfo/MavenVersionParser.java\n+++ b/src/main/java/org/opentripplanner/model/projectinfo/OtpProjectInfoParser.java\n\n@@ -6,16 +6,16 @@ import org.slf4j.LoggerFactory;\n import java.io.InputStream;\n import java.util.Properties;\n \n-class MavenVersionParser {\n-  private static final Logger LOG = LoggerFactory.getLogger(ProjectInfo.class);\n-  private static final String FILENAME = \"maven-version.properties\";\n+class OtpProjectInfoParser {\n+  private static final Logger LOG = LoggerFactory.getLogger(OtpProjectInfo.class);\n+  private static final String FILENAME = \"otp-project-info.properties\";\n \n-  static ProjectInfo loadFromProperties() {\n+  static OtpProjectInfo loadFromProperties() {\n     try {\n-      InputStream in = ProjectInfo.class.getClassLoader().getResourceAsStream(FILENAME);\n+      InputStream in = OtpProjectInfo.class.getClassLoader().getResourceAsStream(FILENAME);\n       Properties props = new java.util.Properties();\n       props.load(in);\n-      ProjectInfo version = new ProjectInfo(\n+      OtpProjectInfo version = new OtpProjectInfo(\n           normalize(props.getProperty(\"project.version\")),\n           new VersionControlInfo(\n               normalize(props.getProperty(\"git.commit.id\")),\n"}}, {"oid": "4d3d804f6bc72fe1485c1a4e4ba0e3ef6e80710e", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/4d3d804f6bc72fe1485c1a4e4ba0e3ef6e80710e", "message": "Merge branch 'dev-2.x' into otp2_add_config_version", "committedDate": "2020-12-15T09:39:27Z", "type": "commit"}, {"oid": "2d88477c043419dcac851c64c73abf1d8b4c536a", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2d88477c043419dcac851c64c73abf1d8b4c536a", "message": "review: Rename 'project-version.properties' to 'otp-project-info.properties'.", "committedDate": "2020-12-15T10:52:58Z", "type": "commit"}, {"oid": "303655a9e9f705882ee1f5e8a7476b2ea11d40a3", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/303655a9e9f705882ee1f5e8a7476b2ea11d40a3", "message": "Merge branch 'dev-2.x' into otp2_add_config_version", "committedDate": "2020-12-15T15:22:56Z", "type": "commit"}]}