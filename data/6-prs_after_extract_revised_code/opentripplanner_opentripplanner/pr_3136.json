{"pr_number": 3136, "pr_title": "Use input streams instead of byte[] when parsing NeTEx files", "pr_createdAt": "2020-07-16T15:23:13Z", "pr_url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3136", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ1ODEzMA==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3136#discussion_r463458130", "bodyText": "This method is no longer in use and should be deleted.", "author": "t2gran", "createdAt": "2020-07-31T07:48:51Z", "path": "src/main/java/org/opentripplanner/netex/loader/NetexXmlParser.java", "diffHunk": "@@ -23,6 +24,15 @@\n     PublicationDeliveryStructure parseXmlDoc(byte[] bytesArray) throws JAXBException {\n         JAXBElement<PublicationDeliveryStructure> root;\n         ByteArrayInputStream stream = new ByteArrayInputStream(bytesArray);\n+        return parseXmlDoc(stream);\n+    }", "originalCommit": "9cdb9bf03665a587e0b1917185aca39decbba91e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzUxNjMxMw==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3136#discussion_r463516313", "bodyText": "I wasn't sure if it was needed somewhere else -- it's been removed.", "author": "flaktack", "createdAt": "2020-07-31T09:50:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ1ODEzMA=="}], "type": "inlineReview", "revised_code": {"commit": "e03b8c1cc6662798b8dc10dfe7c9ca8d0db458d3", "chunk": "diff --git a/src/main/java/org/opentripplanner/netex/loader/NetexXmlParser.java b/src/main/java/org/opentripplanner/netex/loader/NetexXmlParser.java\nindex da41cecad..2a389c047 100644\n--- a/src/main/java/org/opentripplanner/netex/loader/NetexXmlParser.java\n+++ b/src/main/java/org/opentripplanner/netex/loader/NetexXmlParser.java\n\n@@ -18,15 +17,6 @@ class NetexXmlParser {\n         this.unmarshaller = createUnmarshaller();\n     }\n \n-    /**\n-     * Parse a byte array and return the root document type for the given xml file(bytes).\n-     */\n-    PublicationDeliveryStructure parseXmlDoc(byte[] bytesArray) throws JAXBException {\n-        JAXBElement<PublicationDeliveryStructure> root;\n-        ByteArrayInputStream stream = new ByteArrayInputStream(bytesArray);\n-        return parseXmlDoc(stream);\n-    }\n-\n     /**\n      * Parse an input stream and return the root document type for the given xml file (stream).\n      */\n"}}, {"oid": "e03b8c1cc6662798b8dc10dfe7c9ca8d0db458d3", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/e03b8c1cc6662798b8dc10dfe7c9ca8d0db458d3", "message": "Use input streams instead of byte[] when parsing NeTEx files\n\nUse `DataSource#asInputSteam()` for parsing NeTEx documents to avoid\nloading the whole document into memory with `asBytes()`.", "committedDate": "2020-07-31T09:09:01Z", "type": "commit"}, {"oid": "e03b8c1cc6662798b8dc10dfe7c9ca8d0db458d3", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/e03b8c1cc6662798b8dc10dfe7c9ca8d0db458d3", "message": "Use input streams instead of byte[] when parsing NeTEx files\n\nUse `DataSource#asInputSteam()` for parsing NeTEx documents to avoid\nloading the whole document into memory with `asBytes()`.", "committedDate": "2020-07-31T09:09:01Z", "type": "forcePushed"}]}