{"pr_number": 3285, "pr_title": "Add progress tracker to areas visibility calculation", "pr_createdAt": "2020-12-09T12:35:29Z", "pr_url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3285", "timeline": [{"oid": "937b5220bc4c81922f1a651891497852c53f06b3", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/937b5220bc4c81922f1a651891497852c53f06b3", "message": "Add progress tracker to areas visibilty calculation", "committedDate": "2020-12-09T12:32:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAwMjg4Nw==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3285#discussion_r540002887", "bodyText": "Finnished statment.", "author": "t2gran", "createdAt": "2020-12-10T09:19:49Z", "path": "src/main/java/org/opentripplanner/graph_builder/module/osm/OpenStreetMapModule.java", "diffHunk": "@@ -442,8 +442,15 @@ private void buildWalkableAreas(boolean skipVisibility, boolean platformEntriesL\n                     walkableAreaBuilder.buildWithoutVisibility(group);\n                 }\n             } else {\n+                ProgressTracker progress = ProgressTracker.track(\n+                    \"Build visibility graph for areas\",\n+                    100,\n+                    areaGroups.size()\n+                );\n                 for (AreaGroup group : areaGroups) {\n                     walkableAreaBuilder.buildWithVisibility(group, platformEntriesLinking);\n+                    //Keep lambda! A method-ref would causes incorrect class and line number to be logged\n+                    progress.step(m -> LOG.info(m));\n                 }\n ", "originalCommit": "937b5220bc4c81922f1a651891497852c53f06b3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a6f6b000794fe897ecb4598a46162a8802dec88b", "chunk": "diff --git a/src/main/java/org/opentripplanner/graph_builder/module/osm/OpenStreetMapModule.java b/src/main/java/org/opentripplanner/graph_builder/module/osm/OpenStreetMapModule.java\nindex eb3adcbea..4e9656657 100644\n--- a/src/main/java/org/opentripplanner/graph_builder/module/osm/OpenStreetMapModule.java\n+++ b/src/main/java/org/opentripplanner/graph_builder/module/osm/OpenStreetMapModule.java\n\n@@ -452,6 +452,7 @@ public class OpenStreetMapModule implements GraphBuilderModule {\n                     //Keep lambda! A method-ref would causes incorrect class and line number to be logged\n                     progress.step(m -> LOG.info(m));\n                 }\n+                LOG.info(progress.completeMessage());\n \n                 if(platformEntriesLinking){\n                     List<Area> platforms = osmdb.getWalkableAreas().stream().\n"}}, {"oid": "a6f6b000794fe897ecb4598a46162a8802dec88b", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/a6f6b000794fe897ecb4598a46162a8802dec88b", "message": "Add complete message", "committedDate": "2020-12-10T10:06:51Z", "type": "commit"}, {"oid": "a7ce86738f4a173fdf51a653050ba0646bbb914f", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/a7ce86738f4a173fdf51a653050ba0646bbb914f", "message": "Set minBlockSize to 50", "committedDate": "2020-12-10T10:09:16Z", "type": "commit"}]}