{"pr_number": 2241, "pr_title": "Add VolumeStream API", "pr_createdAt": "2020-10-03T07:26:13Z", "pr_url": "https://github.com/SpongePowered/SpongeAPI/pull/2241", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTEyNjE5Mg==", "url": "https://github.com/SpongePowered/SpongeAPI/pull/2241#discussion_r499126192", "bodyText": "rotation -> orientation", "author": "Lignium", "createdAt": "2020-10-03T07:52:41Z", "path": "src/main/java/org/spongepowered/api/data/Keys.java", "diffHunk": "@@ -2103,9 +2102,9 @@\n     public static final Supplier<Key<Value<Integer>>> ROARING_TIME = Sponge.getRegistry().getCatalogRegistry().provideSupplier(Key.class, \"attack_time\");\n \n     /**\n-     * The {@link Rotation} of an {@link ItemFrame}.\n+     * The {@link Orientation} of an {@link ItemFrame}.\n      */\n-    public static final Supplier<Key<Value<Rotation>>> ROTATION = Sponge.getRegistry().getCatalogRegistry().provideSupplier(Key.class, \"rotation\");\n+    public static final Supplier<Key<Value<Orientation>>> ORIENTATION = Sponge.getRegistry().getCatalogRegistry().provideSupplier(Key.class, \"rotation\");", "originalCommit": "33609e9ea99ac8eb8cab7664e6b92fb91d268b14", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2e799bcbc3611eca5f0175cdfd94ca29af8b1115", "chunk": "diff --git a/src/main/java/org/spongepowered/api/data/Keys.java b/src/main/java/org/spongepowered/api/data/Keys.java\nindex 271a48ff8..ba2291e49 100644\n--- a/src/main/java/org/spongepowered/api/data/Keys.java\n+++ b/src/main/java/org/spongepowered/api/data/Keys.java\n\n@@ -2102,9 +2102,9 @@\n     public static final Supplier<Key<Value<Integer>>> ROARING_TIME = Sponge.getRegistry().getCatalogRegistry().provideSupplier(Key.class, \"attack_time\");\n \n     /**\n-     * The {@link Orientation} of an {@link ItemFrame}.\n+     * The {@link Orientation}, used by {@link ItemFrame}.\n      */\n-    public static final Supplier<Key<Value<Orientation>>> ORIENTATION = Sponge.getRegistry().getCatalogRegistry().provideSupplier(Key.class, \"rotation\");\n+    public static final Supplier<Key<Value<Orientation>>> ORIENTATION = Sponge.getRegistry().getCatalogRegistry().provideSupplier(Key.class, \"orientation\");\n \n     /**\n      * The current saturation of a {@link Player}.\n"}}, {"oid": "4414dbef639016877e6aecbb0fb13bf3d07a7dbf", "url": "https://github.com/SpongePowered/SpongeAPI/commit/4414dbef639016877e6aecbb0fb13bf3d07a7dbf", "message": "Some more stuff, need to flesh out the javadocs.\n\nSigned-off-by: Gabriel Harris-Rouquette <gabizou@me.com>", "committedDate": "2020-10-11T21:26:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI4MzU4Ng==", "url": "https://github.com/SpongePowered/SpongeAPI/pull/2241#discussion_r520283586", "bodyText": "I disagree with these defaults. I always thought that a particular volume holder may have a faster way to query this data instead of going through a provider.\nGranted this is a default so not like we can't do that..", "author": "Zidane", "createdAt": "2020-11-10T04:47:03Z", "path": "src/main/java/org/spongepowered/api/world/volume/game/TrackedVolume.java", "diffHunk": "@@ -98,7 +103,13 @@ default void setCreator(Vector3i pos, @Nullable UUID uuid) {\n      * @param z The z coordinate where the user data should be applied\n      * @param uuid The {@link UUID} to set as creator\n      */\n-    void setCreator(int x, int y, int z, @Nullable UUID uuid);\n+    default void setCreator(final int x, final int y, final int z, @Nullable final UUID uuid) {", "originalCommit": "10f84705e5c57150a70aabee59fc761a38ba4d68", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTg2Mzg2Ng==", "url": "https://github.com/SpongePowered/SpongeAPI/pull/2241#discussion_r521863866", "bodyText": "It's a default because the Keys exist and it's often better to delegate to those, however, implementation wise they serve the purpose of bypassing the requirement that we re-implement the actual storage of owner/notifier at this time.", "author": "gabizou", "createdAt": "2020-11-12T06:20:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI4MzU4Ng=="}], "type": "inlineReview", "revised_code": {"commit": "441dd2ddccc70c51d4cf2b47fddd85b237dc9761", "chunk": "diff --git a/src/main/java/org/spongepowered/api/world/volume/game/TrackedVolume.java b/src/main/java/org/spongepowered/api/world/volume/game/TrackedVolume.java\nindex 15a42eb2f..c27e188c3 100644\n--- a/src/main/java/org/spongepowered/api/world/volume/game/TrackedVolume.java\n+++ b/src/main/java/org/spongepowered/api/world/volume/game/TrackedVolume.java\n\n@@ -103,13 +98,7 @@ default void setCreator(final Vector3i pos, @Nullable final UUID uuid) {\n      * @param z The z coordinate where the user data should be applied\n      * @param uuid The {@link UUID} to set as creator\n      */\n-    default void setCreator(final int x, final int y, final int z, @Nullable final UUID uuid) {\n-        if (uuid == null) {\n-            this.remove(x, y, z, Keys.CREATOR);\n-        } else {\n-            this.offer(x, y, z, Keys.CREATOR, uuid);\n-        }\n-    }\n+    void setCreator(int x, int y, int z, @Nullable UUID uuid);\n \n     /**\n      * Sets the {@link UUID} of the user who last notified the\n"}}, {"oid": "2e799bcbc3611eca5f0175cdfd94ca29af8b1115", "url": "https://github.com/SpongePowered/SpongeAPI/commit/2e799bcbc3611eca5f0175cdfd94ca29af8b1115", "message": "Cleanup.\n\nSigned-off-by: Chris Sanders <zidane@spongepowered.org>", "committedDate": "2020-11-11T05:42:19Z", "type": "forcePushed"}, {"oid": "7d94c850e2920801dfc43544daa91a274d92e47c", "url": "https://github.com/SpongePowered/SpongeAPI/commit/7d94c850e2920801dfc43544daa91a274d92e47c", "message": "Cleanup.\n\nSigned-off-by: Chris Sanders <zidane@spongepowered.org>", "committedDate": "2020-11-11T05:43:38Z", "type": "forcePushed"}, {"oid": "415e99721b38ce7008a5f96e0ca52937b22eabfb", "url": "https://github.com/SpongePowered/SpongeAPI/commit/415e99721b38ce7008a5f96e0ca52937b22eabfb", "message": "Slight refactoring of hierarchies to avoid making all volumes data holders\n\nSigned-off-by: Gabriel Harris-Rouquette <gabizou@me.com>", "committedDate": "2020-11-11T06:27:22Z", "type": "forcePushed"}, {"oid": "b2c17f49f77dc15b4ae3ef58fa13ea3a1c0e17c9", "url": "https://github.com/SpongePowered/SpongeAPI/commit/b2c17f49f77dc15b4ae3ef58fa13ea3a1c0e17c9", "message": "Getting this to run is a pain\n\nThere's some disconnect between positions\nretrieved during stream generation\nand positions during transformation\nand positions during application...\n\nSigned-off-by: Gabriel Harris-Rouquette <gabizou@me.com>", "committedDate": "2020-11-13T08:44:39Z", "type": "forcePushed"}, {"oid": "441dd2ddccc70c51d4cf2b47fddd85b237dc9761", "url": "https://github.com/SpongePowered/SpongeAPI/commit/441dd2ddccc70c51d4cf2b47fddd85b237dc9761", "message": "Rename Rotation to Orientation for better naming accuracy\n\nSigned-off-by: Gabriel Harris-Rouquette <gabizou@me.com>", "committedDate": "2020-11-14T20:57:28Z", "type": "commit"}, {"oid": "bad957bc19767ca6b636327a9978742d01d42a2a", "url": "https://github.com/SpongePowered/SpongeAPI/commit/bad957bc19767ca6b636327a9978742d01d42a2a", "message": "Add proper Rotation and method to BlockState.rotate\n\nSigned-off-by: Gabriel Harris-Rouquette <gabizou@me.com>", "committedDate": "2020-11-14T20:57:28Z", "type": "commit"}, {"oid": "4bdd004192e7269af114babdb06ff2b67433dce9", "url": "https://github.com/SpongePowered/SpongeAPI/commit/4bdd004192e7269af114babdb06ff2b67433dce9", "message": "Add Mirror for BlockState mirroring\n\nSigned-off-by: Gabriel Harris-Rouquette <gabizou@me.com>", "committedDate": "2020-11-14T20:57:28Z", "type": "commit"}, {"oid": "28e734efe419aff7124f302cef6f589ce25a7591", "url": "https://github.com/SpongePowered/SpongeAPI/commit/28e734efe419aff7124f302cef6f589ce25a7591", "message": "Add rotation and mirror to BlockEntity", "committedDate": "2020-11-14T20:57:28Z", "type": "commit"}, {"oid": "07404e4d4fadadd11a3fd6d5549d750861af2147", "url": "https://github.com/SpongePowered/SpongeAPI/commit/07404e4d4fadadd11a3fd6d5549d750861af2147", "message": "Add VolumeStream and supporting functions", "committedDate": "2020-11-14T20:57:29Z", "type": "commit"}, {"oid": "93327164ce0cb545c74f292e6cc9147b95d28e6d", "url": "https://github.com/SpongePowered/SpongeAPI/commit/93327164ce0cb545c74f292e6cc9147b95d28e6d", "message": "Slight refactoring of hierarchies to avoid making all volumes data holders\n\nSigned-off-by: Gabriel Harris-Rouquette <gabizou@me.com>", "committedDate": "2020-11-14T20:57:29Z", "type": "commit"}, {"oid": "93327164ce0cb545c74f292e6cc9147b95d28e6d", "url": "https://github.com/SpongePowered/SpongeAPI/commit/93327164ce0cb545c74f292e6cc9147b95d28e6d", "message": "Slight refactoring of hierarchies to avoid making all volumes data holders\n\nSigned-off-by: Gabriel Harris-Rouquette <gabizou@me.com>", "committedDate": "2020-11-14T20:57:29Z", "type": "forcePushed"}]}