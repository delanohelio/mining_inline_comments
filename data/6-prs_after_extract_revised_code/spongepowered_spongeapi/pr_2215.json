{"pr_number": 2215, "pr_title": "Add Audiences#withPermission", "pr_createdAt": "2020-08-28T17:59:05Z", "pr_url": "https://github.com/SpongePowered/SpongeAPI/pull/2215", "timeline": [{"oid": "1ace13fd524cadefd447e0eacda318d8aa8f5918", "url": "https://github.com/SpongePowered/SpongeAPI/commit/1ace13fd524cadefd447e0eacda318d8aa8f5918", "message": "Add Audiences#withPermission", "committedDate": "2020-08-28T17:59:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTY1NjA1Mg==", "url": "https://github.com/SpongePowered/SpongeAPI/pull/2215#discussion_r479656052", "bodyText": "final and Objects.requireNonNull in the method to fail out as soon as possible if there is a problem.", "author": "Zidane", "createdAt": "2020-08-29T14:41:34Z", "path": "src/main/java/org/spongepowered/api/adventure/Audiences.java", "diffHunk": "@@ -47,7 +47,18 @@ public static Audience server() {\n      * @return An audience\n      */\n     public static Audience onlinePlayers() {\n-        return factory().onlinePlayers();\n+        return Sponge.getRegistry().getFactoryRegistry().provideFactory(Factory.class).onlinePlayers();\n+    }\n+\n+    /**\n+     * Gets an {@link Audience} that targets all online players\n+     * with the specified permission.\n+     *\n+     * @param permission The permission\n+     * @return An audience\n+     */\n+    public static Audience withPermission(String permission) {", "originalCommit": "1ace13fd524cadefd447e0eacda318d8aa8f5918", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8b3ab150adf24e88927612c1dd4267268a898146", "chunk": "diff --git a/src/main/java/org/spongepowered/api/adventure/Audiences.java b/src/main/java/org/spongepowered/api/adventure/Audiences.java\nindex d8fa6a10f..fd7100e99 100644\n--- a/src/main/java/org/spongepowered/api/adventure/Audiences.java\n+++ b/src/main/java/org/spongepowered/api/adventure/Audiences.java\n\n@@ -57,7 +59,8 @@ public static Audience onlinePlayers() {\n      * @param permission The permission\n      * @return An audience\n      */\n-    public static Audience withPermission(String permission) {\n+    public static Audience withPermission(final String permission) {\n+        Objects.requireNonNull(permission);\n         return Sponge.getRegistry().getFactoryRegistry().provideFactory(Factory.class).withPermission(permission);\n     }\n \n"}}, {"oid": "8b3ab150adf24e88927612c1dd4267268a898146", "url": "https://github.com/SpongePowered/SpongeAPI/commit/8b3ab150adf24e88927612c1dd4267268a898146", "message": "Add final and requireNonNull", "committedDate": "2020-08-29T14:53:12Z", "type": "commit"}]}