{"pr_number": 2487, "pr_title": "Open Lineage Services: Validate mandatory config properties", "pr_createdAt": "2020-01-23T14:07:34Z", "pr_url": "https://github.com/odpi/egeria/pull/2487", "timeline": [{"oid": "0b730c93d8d4b429898e17f10e1270c993bd9544", "url": "https://github.com/odpi/egeria/commit/0b730c93d8d4b429898e17f10e1270c993bd9544", "message": "OLS: Validate mandatory OLS config properties\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-23T14:06:07Z", "type": "commit"}, {"oid": "f4281f15dc8dc8beaf9b5fba0ff7771d8822dd87", "url": "https://github.com/odpi/egeria/commit/f4281f15dc8dc8beaf9b5fba0ff7771d8822dd87", "message": "OLS: include errorcode in errormessage\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-23T15:52:14Z", "type": "commit"}, {"oid": "4e282baf509ac2c2ecc5a8ae266f22e14b6eabdc", "url": "https://github.com/odpi/egeria/commit/4e282baf509ac2c2ecc5a8ae266f22e14b6eabdc", "message": "Merge branch 'master' into validateOLSConfig", "committedDate": "2020-01-27T08:04:28Z", "type": "commit"}, {"oid": "e1baaf836f423d639cb1f02336e468c513c16952", "url": "https://github.com/odpi/egeria/commit/e1baaf836f423d639cb1f02336e468c513c16952", "message": "Merge branch 'master' into validateOLSConfig", "committedDate": "2020-01-27T09:08:44Z", "type": "commit"}, {"oid": "af323ede98a2560dd20fd63d982ec049f676a903", "url": "https://github.com/odpi/egeria/commit/af323ede98a2560dd20fd63d982ec049f676a903", "message": "Merge branch 'master' of https://github.com/odpi/egeria into validateOLSConfig", "committedDate": "2020-01-27T13:51:18Z", "type": "commit"}, {"oid": "3e5480ad51c3692ae40a0c8f867088a9f6febc0a", "url": "https://github.com/odpi/egeria/commit/3e5480ad51c3692ae40a0c8f867088a9f6febc0a", "message": "OLS: Fix nullpointer when passing config without setting eventbus first\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T14:39:03Z", "type": "commit"}, {"oid": "1c030a70cfe605a45c0229818c582f027b17253d", "url": "https://github.com/odpi/egeria/commit/1c030a70cfe605a45c0229818c582f027b17253d", "message": "Merge branch 'master' of https://github.com/odpi/egeria into validateOLSConfig", "committedDate": "2020-01-28T14:39:42Z", "type": "commit"}, {"oid": "e8a835226f6e714d4fdebcf1ed91cde688d9d7b0", "url": "https://github.com/odpi/egeria/commit/e8a835226f6e714d4fdebcf1ed91cde688d9d7b0", "message": "Merge branch 'validateOLSConfig' of https://github.com/GuyAckermans/egeria into validateOLSConfig", "committedDate": "2020-01-28T14:39:53Z", "type": "commit"}, {"oid": "8bf7114525df82b401a53266a3614250bc7f5ce0", "url": "https://github.com/odpi/egeria/commit/8bf7114525df82b401a53266a3614250bc7f5ce0", "message": "OLS: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T14:42:50Z", "type": "commit"}, {"oid": "8e553257c109e966f42bf26b341adf3a05e6dd1f", "url": "https://github.com/odpi/egeria/commit/8e553257c109e966f42bf26b341adf3a05e6dd1f", "message": "OLS: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T14:45:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg0OTAwNA==", "url": "https://github.com/odpi/egeria/pull/2487#discussion_r371849004", "bodyText": "Can method throwMissingPropertyException be written in the errorHandler, similar to validate* methods ? Ex: validateInTopicName() etc.\nI am quite certain it can be done. Explore this possibility, see how the code changes", "author": "lcpopa", "createdAt": "2020-01-28T14:51:34Z", "path": "open-metadata-implementation/admin-services/admin-services-server/src/main/java/org/odpi/openmetadata/adminservices/OMAGServerConfigOpenLineage.java", "diffHunk": "@@ -19,93 +20,103 @@\n public class OMAGServerConfigOpenLineage {\n     private final OMAGServerAdminStoreServices configStore = new OMAGServerAdminStoreServices();\n \n-    private static final String serviceName    = GovernanceServicesDescription.OPEN_LINEAGE_SERVICES.getServiceName();\n+    private static final String serviceName = GovernanceServicesDescription.OPEN_LINEAGE_SERVICES.getServiceName();\n     private static final String defaultALOutTopicName = \"omas.omas.assetlineage.outTopic\";\n \n+\n     private OMAGServerErrorHandler errorHandler = new OMAGServerErrorHandler();\n     private OMAGServerExceptionHandler exceptionHandler = new OMAGServerExceptionHandler();\n \n     /**\n      * Set the Open Lineage Config\n      *\n-     * @param userId  user that is issuing the request.\n-     * @param serverName  local server name.\n-     * @param openLineageServerConfig  Config for the Open Lineage Services\n+     * @param userId                  user that is issuing the request.\n+     * @param serverName              local server name.\n+     * @param openLineageServerConfig Config for the Open Lineage Services\n      * @return void response\n      **/\n     public VoidResponse setOpenLineageConfig(String userId, String serverName, OpenLineageServerConfig openLineageServerConfig) {\n+\n         String methodName = \"setOpenLineageConfig\";\n         VoidResponse response = new VoidResponse();\n \n         try {\n             errorHandler.validateServerName(serverName, methodName);\n             errorHandler.validateUserId(userId, serverName, methodName);\n \n+            if (openLineageServerConfig.getInTopicName() == null)\n+                throwMissingPropertyException(serverName, \"inTopicName\");", "originalCommit": "8e553257c109e966f42bf26b341adf3a05e6dd1f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg1ODg1Mg==", "url": "https://github.com/odpi/egeria/pull/2487#discussion_r371858852", "bodyText": "Done, good suggestion", "author": "GuyAckermans", "createdAt": "2020-01-28T15:06:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg0OTAwNA=="}], "type": "inlineReview", "revised_code": {"commit": "a05119a55f37eebfd8e928fd3d926f4efe7813f5", "chunk": "diff --git a/open-metadata-implementation/admin-services/admin-services-server/src/main/java/org/odpi/openmetadata/adminservices/OMAGServerConfigOpenLineage.java b/open-metadata-implementation/admin-services/admin-services-server/src/main/java/org/odpi/openmetadata/adminservices/OMAGServerConfigOpenLineage.java\nindex c80e2189b3..c2790089d5 100644\n--- a/open-metadata-implementation/admin-services/admin-services-server/src/main/java/org/odpi/openmetadata/adminservices/OMAGServerConfigOpenLineage.java\n+++ b/open-metadata-implementation/admin-services/admin-services-server/src/main/java/org/odpi/openmetadata/adminservices/OMAGServerConfigOpenLineage.java\n\n@@ -70,9 +70,8 @@ public class OMAGServerConfigOpenLineage {\n             configStore.saveServerConfig(serverName, methodName, serverConfig);\n \n             List<String> configAuditTrail = serverConfig.getAuditTrail();\n-            if (configAuditTrail == null) {\n+            if (configAuditTrail == null)\n                 configAuditTrail = new ArrayList<>();\n-            }\n \n             configAuditTrail.add(new Date().toString() + \" \" + userId + \" updated configuration for open lineage services.\");\n             serverConfig.setAuditTrail(configAuditTrail);\n"}}, {"oid": "a05119a55f37eebfd8e928fd3d926f4efe7813f5", "url": "https://github.com/odpi/egeria/commit/a05119a55f37eebfd8e928fd3d926f4efe7813f5", "message": "OLS: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T14:55:10Z", "type": "commit"}, {"oid": "4c9f1fee629cb2621c2d8dfa6e9a2d1a2bd02f71", "url": "https://github.com/odpi/egeria/commit/4c9f1fee629cb2621c2d8dfa6e9a2d1a2bd02f71", "message": "Add validatePropertyNotNull to OMAG errorhandler\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T15:06:01Z", "type": "commit"}, {"oid": "a7785dcea69a23bec950275eb11cc44f10e02b25", "url": "https://github.com/odpi/egeria/commit/a7785dcea69a23bec950275eb11cc44f10e02b25", "message": "Add javadoc for validateProeprtyNotNull\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T15:10:46Z", "type": "commit"}, {"oid": "7017565169c2affb8196e1dc7acb4f663ce76f95", "url": "https://github.com/odpi/egeria/commit/7017565169c2affb8196e1dc7acb4f663ce76f95", "message": "javadoc\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T15:13:50Z", "type": "commit"}, {"oid": "800444d5e32969df49e4822d51a9352fa59db925", "url": "https://github.com/odpi/egeria/commit/800444d5e32969df49e4822d51a9352fa59db925", "message": "OLS: remove hardcoded .server prefix from eventbus topic\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T15:32:03Z", "type": "commit"}, {"oid": "dc3400e8d9c9ca6693913a81d272e4b0ae25fd82", "url": "https://github.com/odpi/egeria/commit/dc3400e8d9c9ca6693913a81d272e4b0ae25fd82", "message": "OLS: remove \"server\" prefix from kafka topic\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T15:39:15Z", "type": "commit"}, {"oid": "31a52c458b1817d3cd979efd9bdc931c7717f6bf", "url": "https://github.com/odpi/egeria/commit/31a52c458b1817d3cd979efd9bdc931c7717f6bf", "message": "OLS: update readme\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-28T19:20:41Z", "type": "commit"}, {"oid": "7f17ff2b626f5278c35822f6fd86a6c1a333c7b1", "url": "https://github.com/odpi/egeria/commit/7f17ff2b626f5278c35822f6fd86a6c1a333c7b1", "message": "Merge branch 'master' into validateOLSConfig", "committedDate": "2020-01-29T12:28:28Z", "type": "commit"}]}