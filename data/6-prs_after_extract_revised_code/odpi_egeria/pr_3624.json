{"pr_number": 3624, "pr_title": "#3619 Subject Area OMAS to supply 'unique' qualifiedName on create", "pr_createdAt": "2020-09-16T09:49:27Z", "pr_url": "https://github.com/odpi/egeria/pull/3624", "timeline": [{"oid": "9a7ece1b97db1c84065f35d9c5272c8941114ffc", "url": "https://github.com/odpi/egeria/commit/9a7ece1b97db1c84065f35d9c5272c8941114ffc", "message": "#3619 Subject Area OMAS to supply 'unique' qualifiedName if not supplied on create\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>", "committedDate": "2020-09-16T09:43:56Z", "type": "commit"}, {"oid": "10a1552cab2fa25ec8aa201f37adbe3ae159f3bb", "url": "https://github.com/odpi/egeria/commit/10a1552cab2fa25ec8aa201f37adbe3ae159f3bb", "message": "#3619 Remove blank line\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>", "committedDate": "2020-09-16T09:47:09Z", "type": "commit"}, {"oid": "bcf2320d14771bc5d6c529ee123c552aa1edbae1", "url": "https://github.com/odpi/egeria/commit/bcf2320d14771bc5d6c529ee123c552aa1edbae1", "message": "Merge branch 'master' of https://github.com/odpi/egeria into git3619", "committedDate": "2020-09-16T09:49:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyMzM4OA==", "url": "https://github.com/odpi/egeria/pull/3624#discussion_r489323388", "bodyText": "We can move these constructions to setUniqueQualifiedName method and write this:\n    protected void setUniqueQualifiedNameIfBlank(Node node) {\n               if (StringUtils.isBlank(node.getQualifiedName())) {\n                    node.setQualifiedName(node.getName() + \".\" + UUID.randomUUID().toString());\n                }\n    }\n\nAnd then remove duplicate code.\nStringUtils.isBlank specification:\n StringUtils.isBlank(null)      = true\n StringUtils.isBlank(\"\")        = true  \n StringUtils.isBlank(\" \")       = true  \n StringUtils.isBlank(\"bob\")     = false", "author": "immmus", "createdAt": "2020-09-16T10:11:30Z", "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaGlossaryHandler.java", "diffHunk": "@@ -78,12 +78,15 @@ public SubjectAreaGlossaryHandler(OMRSAPIHelper oMRSAPIHelper) {\n         try {\n             InputValidator.validateNodeType(className, methodName, suppliedGlossary.getNodeType(), NodeType.Glossary, NodeType.Taxonomy, NodeType.TaxonomyAndCanonicalGlossary, NodeType.CanonicalGlossary);\n             final String suppliedGlossaryName = suppliedGlossary.getName();\n-\n+            final String suppliedGlossaryQualifiedName = suppliedGlossary.getQualifiedName();\n             // need to check we have a name\n             if (suppliedGlossaryName == null || suppliedGlossaryName.equals(\"\")) {\n                 ExceptionMessageDefinition messageDefinition = SubjectAreaErrorCode.GLOSSARY_CREATE_WITHOUT_NAME.getMessageDefinition();\n                 throw new InvalidParameterException(messageDefinition, className, methodName, \"name\");\n             } else {\n+                if (suppliedGlossaryQualifiedName == null || suppliedGlossaryQualifiedName.equals(\"\")) {", "originalCommit": "bcf2320d14771bc5d6c529ee123c552aa1edbae1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyNjkwNA==", "url": "https://github.com/odpi/egeria/pull/3624#discussion_r489326904", "bodyText": "And I prefer to use \"@\" instead of \".\"", "author": "immmus", "createdAt": "2020-09-16T10:17:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyMzM4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTM5Mzk4NQ==", "url": "https://github.com/odpi/egeria/pull/3624#discussion_r489393985", "bodyText": "@immmus I assume you are thinking of the Spring StringUtils, this module should not have a Spring dependancy, so I have followed your feedback but wrote out the tests without the utility.", "author": "davidradl", "createdAt": "2020-09-16T12:23:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyMzM4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTM5NTU2Ng==", "url": "https://github.com/odpi/egeria/pull/3624#discussion_r489395566", "bodyText": "@davidradl I am talking about apache commons StringUtils.", "author": "immmus", "createdAt": "2020-09-16T12:25:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyMzM4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQxMDA0OQ==", "url": "https://github.com/odpi/egeria/pull/3624#discussion_r489410049", "bodyText": "@davidradl I am talking about apache commons StringUtils.\n\n@immmus Thanks for the clarification, I have coded it in a simple if, I think this should be sufficient for now.", "author": "davidradl", "createdAt": "2020-09-16T12:49:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyMzM4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQxMjMzMQ==", "url": "https://github.com/odpi/egeria/pull/3624#discussion_r489412331", "bodyText": "@davidradl yes, it's sufficient)", "author": "immmus", "createdAt": "2020-09-16T12:52:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyMzM4OA=="}], "type": "inlineReview", "revised_code": {"commit": "ee35a8ce2a4dddc1d036afaa27d3781699631e17", "chunk": "diff --git a/open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaGlossaryHandler.java b/open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaGlossaryHandler.java\nindex 96c578e0e7..cc0c671100 100644\n--- a/open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaGlossaryHandler.java\n+++ b/open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaGlossaryHandler.java\n\n@@ -84,9 +84,7 @@ public class SubjectAreaGlossaryHandler extends SubjectAreaHandler {\n                 ExceptionMessageDefinition messageDefinition = SubjectAreaErrorCode.GLOSSARY_CREATE_WITHOUT_NAME.getMessageDefinition();\n                 throw new InvalidParameterException(messageDefinition, className, methodName, \"name\");\n             } else {\n-                if (suppliedGlossaryQualifiedName == null || suppliedGlossaryQualifiedName.equals(\"\")) {\n-                    setUniqueQualifiedName(suppliedGlossary);\n-                }\n+                setUniqueQualifiedNameIfBlank(suppliedGlossary);\n                 GlossaryMapper glossaryMapper = mappersFactory.get(GlossaryMapper.class);\n                 EntityDetail glossaryEntityDetail = glossaryMapper.map(suppliedGlossary);\n                 String entityDetailGuid = oMRSAPIHelper.callOMRSAddEntity(methodName, userId, glossaryEntityDetail);\n"}}, {"oid": "10392c0411dca99757a6d269622acda5601e403b", "url": "https://github.com/odpi/egeria/commit/10392c0411dca99757a6d269622acda5601e403b", "message": "Merge branch 'master' of https://github.com/odpi/egeria into git3619", "committedDate": "2020-09-16T12:17:18Z", "type": "commit"}, {"oid": "ee35a8ce2a4dddc1d036afaa27d3781699631e17", "url": "https://github.com/odpi/egeria/commit/ee35a8ce2a4dddc1d036afaa27d3781699631e17", "message": "#3619 Refactor after review feedback\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>", "committedDate": "2020-09-16T12:27:06Z", "type": "commit"}, {"oid": "68bc8254f528d6d731ffc09fcf3f6277510cece2", "url": "https://github.com/odpi/egeria/commit/68bc8254f528d6d731ffc09fcf3f6277510cece2", "message": "#3619 Remove unused variable definitions\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>", "committedDate": "2020-09-16T12:29:40Z", "type": "commit"}]}