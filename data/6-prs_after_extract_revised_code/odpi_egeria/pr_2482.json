{"pr_number": 2482, "pr_title": "Open Lineage Services:  Auditlog, refactor OperationalServices, logging, Disconnect DB on shutdown", "pr_createdAt": "2020-01-23T10:34:40Z", "pr_url": "https://github.com/odpi/egeria/pull/2482", "timeline": [{"oid": "cca60bf5774579c35f479307356378e389ae1c6b", "url": "https://github.com/odpi/egeria/commit/cca60bf5774579c35f479307356378e389ae1c6b", "message": "OLS Operational services wip\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-22T09:15:59Z", "type": "commit"}, {"oid": "50ee638a603ded649f0c590caa349e8fa1f8d4a5", "url": "https://github.com/odpi/egeria/commit/50ee638a603ded649f0c590caa349e8fa1f8d4a5", "message": "OLS: wip\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-22T10:16:24Z", "type": "commit"}, {"oid": "d175f628e8d9e4f03e91f67a02e1c4af3f2bc267", "url": "https://github.com/odpi/egeria/commit/d175f628e8d9e4f03e91f67a02e1c4af3f2bc267", "message": "OLS: WIP\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-22T10:44:05Z", "type": "commit"}, {"oid": "f3c19fc9ac83eabbe100d866276ea712b1917b9f", "url": "https://github.com/odpi/egeria/commit/f3c19fc9ac83eabbe100d866276ea712b1917b9f", "message": "OLS: WIP\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-22T12:05:27Z", "type": "commit"}, {"oid": "9d2e8b555cb4445ed40760ec53ce253cd109e542", "url": "https://github.com/odpi/egeria/commit/9d2e8b555cb4445ed40760ec53ce253cd109e542", "message": "OLS: Refactor operationalservices, disconnect graphs on shutdown\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-22T13:50:33Z", "type": "commit"}, {"oid": "a90e3666d8421a03356e06e10c3f1c7751dad75f", "url": "https://github.com/odpi/egeria/commit/a90e3666d8421a03356e06e10c3f1c7751dad75f", "message": "OLS: javadoc\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-22T14:08:49Z", "type": "commit"}, {"oid": "41cc18f149fac12405e635c65c9df72e7b8870ba", "url": "https://github.com/odpi/egeria/commit/41cc18f149fac12405e635c65c9df72e7b8870ba", "message": "OLS: add logger\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-22T14:19:12Z", "type": "commit"}, {"oid": "79b804e324f2361145393f1478bf274ea25a7c37", "url": "https://github.com/odpi/egeria/commit/79b804e324f2361145393f1478bf274ea25a7c37", "message": "Merge branch 'master' of https://github.com/odpi/egeria into auditlog", "committedDate": "2020-01-22T14:22:45Z", "type": "commit"}, {"oid": "cd7121d65c71bd74b6f444079036cbf1764a67c3", "url": "https://github.com/odpi/egeria/commit/cd7121d65c71bd74b6f444079036cbf1764a67c3", "message": "OLS: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-23T10:31:50Z", "type": "commit"}, {"oid": "735e029a62645d10337dd821d5fcdf7e1823b29d", "url": "https://github.com/odpi/egeria/commit/735e029a62645d10337dd821d5fcdf7e1823b29d", "message": "Merge branch 'master' of https://github.com/odpi/egeria into auditlog", "committedDate": "2020-01-23T10:32:04Z", "type": "commit"}, {"oid": "f43eb1ff409eaa81a9835526348719bc1b9d99ab", "url": "https://github.com/odpi/egeria/commit/f43eb1ff409eaa81a9835526348719bc1b9d99ab", "message": "OLS: Numbering for auditlog and servercode messages\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-23T10:52:33Z", "type": "commit"}, {"oid": "b3b46199df0af1da6c3683f5c1798d526268673f", "url": "https://github.com/odpi/egeria/commit/b3b46199df0af1da6c3683f5c1798d526268673f", "message": "OLS: Log errors for http requests, on debug level\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-23T11:26:02Z", "type": "commit"}, {"oid": "6b1b8422756e96c40317462de63c3e8ade47f81f", "url": "https://github.com/odpi/egeria/commit/6b1b8422756e96c40317462de63c3e8ade47f81f", "message": "Merge branch 'master' into auditlog", "committedDate": "2020-01-23T11:29:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDA2Nzk1MA==", "url": "https://github.com/odpi/egeria/pull/2482#discussion_r370067950", "bodyText": "log.debug because a high number of requests are expected and these exceptions can thus occur frequently", "author": "GuyAckermans", "createdAt": "2020-01-23T11:35:22Z", "path": "open-metadata-implementation/governance-servers/open-lineage-services/open-lineage-services-server/src/main/java/org/odpi/openmetadata/governanceservers/openlineage/server/OpenLineageRestServices.java", "diffHunk": "@@ -63,16 +63,21 @@ public LineageResponse lineage(String serverName, String userId, Scope scope, St\n                     serverName,\n                     methodName);\n             response = openLineageHandler.lineage(scope, guid, displayNameMustContain, includeProcesses);\n-        } catch (InvalidParameterException error) {\n-            openLineageExceptionHandler.captureInvalidParameterException(response, error);\n-        } catch (org.odpi.openmetadata.frameworks.connectors.ffdc.PropertyServerException error) {\n-            openLineageExceptionHandler.capturePropertyServerException(response, error);\n-        } catch (UserNotAuthorizedException error) {\n-            openLineageExceptionHandler.captureUserNotAuthorizedException(response, error);\n-        } catch (OpenLineageException error) {\n-            openLineageExceptionHandler.captureOpenLineageException(response, error);\n-        }catch (Throwable error) {\n-            openLineageExceptionHandler.captureThrowable(response, error, methodName);\n+        } catch (InvalidParameterException e) {\n+            openLineageExceptionHandler.captureInvalidParameterException(response, e);\n+            log.debug(\"Open Lineage Services: An exception occurred during a lineage HTTP request\", e);\n+        } catch (org.odpi.openmetadata.frameworks.connectors.ffdc.PropertyServerException e) {\n+            openLineageExceptionHandler.capturePropertyServerException(response, e);\n+            log.debug(\"Open Lineage Services: An exception occurred during a lineage HTTP request\", e);\n+        } catch (UserNotAuthorizedException e) {\n+            openLineageExceptionHandler.captureUserNotAuthorizedException(response, e);\n+            log.debug(\"Open Lineage Services: An exception occurred during a lineage HTTP request\", e);\n+        } catch (OpenLineageException e) {\n+            openLineageExceptionHandler.captureOpenLineageException(response, e);\n+            log.debug(\"Open Lineage Services: An exception occurred during a lineage HTTP request\", e);\n+        }catch (Throwable e) {\n+            openLineageExceptionHandler.captureThrowable(response, e, methodName);\n+            log.debug(\"Open Lineage Services: An exception occurred during a lineage HTTP request\", e);", "originalCommit": "6b1b8422756e96c40317462de63c3e8ade47f81f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU0NDQ5Nw==", "url": "https://github.com/odpi/egeria/pull/2482#discussion_r370544497", "bodyText": "The string passed to debug looks identical across all calls, therefore it can be extracted into a constant", "author": "lcpopa", "createdAt": "2020-01-24T09:40:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDA2Nzk1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU1MTIwOA==", "url": "https://github.com/odpi/egeria/pull/2482#discussion_r370551208", "bodyText": "Fixed", "author": "GuyAckermans", "createdAt": "2020-01-24T09:56:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDA2Nzk1MA=="}], "type": "inlineReview", "revised_code": {"commit": "dd2d16f6ce6b8ad045ff8b8833788475d3a671e2", "chunk": "diff --git a/open-metadata-implementation/governance-servers/open-lineage-services/open-lineage-services-server/src/main/java/org/odpi/openmetadata/governanceservers/openlineage/server/OpenLineageRestServices.java b/open-metadata-implementation/governance-servers/open-lineage-services/open-lineage-services-server/src/main/java/org/odpi/openmetadata/governanceservers/openlineage/server/OpenLineageRestServices.java\nindex 84309988bc..ed534813c2 100644\n--- a/open-metadata-implementation/governance-servers/open-lineage-services/open-lineage-services-server/src/main/java/org/odpi/openmetadata/governanceservers/openlineage/server/OpenLineageRestServices.java\n+++ b/open-metadata-implementation/governance-servers/open-lineage-services/open-lineage-services-server/src/main/java/org/odpi/openmetadata/governanceservers/openlineage/server/OpenLineageRestServices.java\n\n@@ -57,6 +57,7 @@ public class OpenLineageRestServices {\n \n     public LineageResponse lineage(String serverName, String userId, Scope scope, String guid, String displayNameMustContain, boolean includeProcesses) {\n         LineageResponse response = new LineageResponse();\n+        final String debugMessage = \"Open Lineage Services: An exception occurred during a lineage HTTP request\";\n         final String methodName = \"OpenLineageRestServices.lineage\";\n         try {\n             OpenLineageHandler openLineageHandler = instanceHandler.getOpenLineageHandler(userId,\n"}}, {"oid": "21a1bd8cc56f777ea1e0c39ea512458c43a60276", "url": "https://github.com/odpi/egeria/commit/21a1bd8cc56f777ea1e0c39ea512458c43a60276", "message": "OLS: Remove redundant ols config fields\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-23T12:29:08Z", "type": "commit"}, {"oid": "f2001f7867ad1449d25014eac695d41d59904d37", "url": "https://github.com/odpi/egeria/commit/f2001f7867ad1449d25014eac695d41d59904d37", "message": "Merge branch 'auditlog' of https://github.com/GuyAckermans/egeria into auditlog", "committedDate": "2020-01-23T12:29:36Z", "type": "commit"}, {"oid": "dd2d16f6ce6b8ad045ff8b8833788475d3a671e2", "url": "https://github.com/odpi/egeria/commit/dd2d16f6ce6b8ad045ff8b8833788475d3a671e2", "message": "OLS: string constant for debug message\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-24T09:55:09Z", "type": "commit"}, {"oid": "9e65889479c70ce1aac3bdd5db8022e6f310f17a", "url": "https://github.com/odpi/egeria/commit/9e65889479c70ce1aac3bdd5db8022e6f310f17a", "message": "OLS: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-24T09:55:46Z", "type": "commit"}, {"oid": "eadcd2b1aa1c30dc53960fc1fac02c353ac0c3f0", "url": "https://github.com/odpi/egeria/commit/eadcd2b1aa1c30dc53960fc1fac02c353ac0c3f0", "message": "OLS: typo\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-24T09:59:55Z", "type": "commit"}, {"oid": "0784446dee6dc4e8ec269a56390eaf8f54eecad2", "url": "https://github.com/odpi/egeria/commit/0784446dee6dc4e8ec269a56390eaf8f54eecad2", "message": "OLS: more precise method names\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-01-24T10:19:48Z", "type": "commit"}, {"oid": "9a0248bb475c3fe350c57ad24c25ba3fc3d951df", "url": "https://github.com/odpi/egeria/commit/9a0248bb475c3fe350c57ad24c25ba3fc3d951df", "message": "Merge branch 'master' into auditlog", "committedDate": "2020-01-27T07:46:18Z", "type": "commit"}, {"oid": "79d843572bb13a09aaa3f61e3a2be9297ec6c3b6", "url": "https://github.com/odpi/egeria/commit/79d843572bb13a09aaa3f61e3a2be9297ec6c3b6", "message": "Merge branch 'master' into auditlog", "committedDate": "2020-01-27T10:53:14Z", "type": "commit"}]}