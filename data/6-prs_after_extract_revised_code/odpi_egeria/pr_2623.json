{"pr_number": 2623, "pr_title": "Asset Lineage OMAS: Error handling, Logging, General refactoring", "pr_createdAt": "2020-02-20T23:21:08Z", "pr_url": "https://github.com/odpi/egeria/pull/2623", "timeline": [{"oid": "d2f8657fa76857f66c74c51eaa5f337459171ae8", "url": "https://github.com/odpi/egeria/commit/d2f8657fa76857f66c74c51eaa5f337459171ae8", "message": "AL omas: wip\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-18T10:40:55Z", "type": "commit"}, {"oid": "fe280b3d473b561b6f6191570b99e287cedc5ec8", "url": "https://github.com/odpi/egeria/commit/fe280b3d473b561b6f6191570b99e287cedc5ec8", "message": "AL omas WIP\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-18T13:06:11Z", "type": "commit"}, {"oid": "a015f7cacd1577d81e7170cf0254cee7bc741542", "url": "https://github.com/odpi/egeria/commit/a015f7cacd1577d81e7170cf0254cee7bc741542", "message": "AL omas: refactor WIP\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-18T13:25:59Z", "type": "commit"}, {"oid": "630dcc0c8ebe48f4df110d0f6ac202c197de4a17", "url": "https://github.com/odpi/egeria/commit/630dcc0c8ebe48f4df110d0f6ac202c197de4a17", "message": "AL omas refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-18T13:43:44Z", "type": "commit"}, {"oid": "7eeb5c3199d2921d5832c3b540d674c52eeaf98a", "url": "https://github.com/odpi/egeria/commit/7eeb5c3199d2921d5832c3b540d674c52eeaf98a", "message": "AL OMAS: refactor wip\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-18T14:17:41Z", "type": "commit"}, {"oid": "8169397bffdc80f2b5e08fbddb20050801136d2c", "url": "https://github.com/odpi/egeria/commit/8169397bffdc80f2b5e08fbddb20050801136d2c", "message": "AL OMAS: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-18T15:09:59Z", "type": "commit"}, {"oid": "454090320bd5889e3a7c5fc8bd84ba37ffd872e2", "url": "https://github.com/odpi/egeria/commit/454090320bd5889e3a7c5fc8bd84ba37ffd872e2", "message": "AL omas refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-18T15:37:35Z", "type": "commit"}, {"oid": "da9c6b52df894b9cc8d868b600bd66d354bbebed", "url": "https://github.com/odpi/egeria/commit/da9c6b52df894b9cc8d868b600bd66d354bbebed", "message": "AL omas: errorhandling\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T13:13:31Z", "type": "commit"}, {"oid": "bdd769506d3399a28018416feaf5b004bf7c2a56", "url": "https://github.com/odpi/egeria/commit/bdd769506d3399a28018416feaf5b004bf7c2a56", "message": "AL OMAS: Errorhandling\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T13:57:28Z", "type": "commit"}, {"oid": "a772759ba930d1823bff9356ed90cb984eb9e1b9", "url": "https://github.com/odpi/egeria/commit/a772759ba930d1823bff9356ed90cb984eb9e1b9", "message": "AL omas: logging\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T14:57:56Z", "type": "commit"}, {"oid": "79b14a61a2d40d898d80290e96d3cfc9b90a0558", "url": "https://github.com/odpi/egeria/commit/79b14a61a2d40d898d80290e96d3cfc9b90a0558", "message": "Merge branch 'master' of https://github.com/odpi/egeria into classifications", "committedDate": "2020-02-20T14:58:13Z", "type": "commit"}, {"oid": "c2704d7f7132c251fe6b21b9dfef00858d7c071e", "url": "https://github.com/odpi/egeria/commit/c2704d7f7132c251fe6b21b9dfef00858d7c071e", "message": "AL omas: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T16:41:15Z", "type": "commit"}, {"oid": "ee76b25cec36abe5053045992bf1f36fe0ab6d10", "url": "https://github.com/odpi/egeria/commit/ee76b25cec36abe5053045992bf1f36fe0ab6d10", "message": "OLS: comment out classifications\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T21:25:01Z", "type": "commit"}, {"oid": "82541c1a279f26812d7a840c49de7dc98b607148", "url": "https://github.com/odpi/egeria/commit/82541c1a279f26812d7a840c49de7dc98b607148", "message": "AL omas: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T22:32:20Z", "type": "commit"}, {"oid": "a26dea7e4523528d2787fe1538f41c31b8264f96", "url": "https://github.com/odpi/egeria/commit/a26dea7e4523528d2787fe1538f41c31b8264f96", "message": "AL omas: finish refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T23:07:52Z", "type": "commit"}, {"oid": "297fe5526a3d1926cf407cd27547e1bc3fb07100", "url": "https://github.com/odpi/egeria/commit/297fe5526a3d1926cf407cd27547e1bc3fb07100", "message": "AL Omas: errorhandling\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T23:17:00Z", "type": "commit"}, {"oid": "b2e6eb1f13a6ec6db554d87e15d822b92c11ad68", "url": "https://github.com/odpi/egeria/commit/b2e6eb1f13a6ec6db554d87e15d822b92c11ad68", "message": "AL omas: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T23:17:51Z", "type": "commit"}, {"oid": "b5c020efd4fbf93ba9f037fd232a3759f0131b14", "url": "https://github.com/odpi/egeria/commit/b5c020efd4fbf93ba9f037fd232a3759f0131b14", "message": "Merge branch 'master' into classifications", "committedDate": "2020-02-20T23:21:44Z", "type": "commit"}, {"oid": "b5b3e1a74c54c488806ed2dc8275894f91315d74", "url": "https://github.com/odpi/egeria/commit/b5b3e1a74c54c488806ed2dc8275894f91315d74", "message": "AL omas: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T23:43:34Z", "type": "commit"}, {"oid": "e5605ce4c94023be2e97637171460768ae539fee", "url": "https://github.com/odpi/egeria/commit/e5605ce4c94023be2e97637171460768ae539fee", "message": "Merge branch 'classifications' of https://github.com/GuyAckermans/egeria into classifications", "committedDate": "2020-02-20T23:43:49Z", "type": "commit"}, {"oid": "8befe53d863fa58f8783e04227bbccf0377cec4b", "url": "https://github.com/odpi/egeria/commit/8befe53d863fa58f8783e04227bbccf0377cec4b", "message": "AL omas: typo\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-20T23:44:47Z", "type": "commit"}, {"oid": "89a90c67f0174d821ed45b3b150cf803d0053e69", "url": "https://github.com/odpi/egeria/commit/89a90c67f0174d821ed45b3b150cf803d0053e69", "message": "AL omas: fix pom\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-21T10:58:03Z", "type": "commit"}, {"oid": "e21ba48878ea14fc16be2efac657fafd8523f265", "url": "https://github.com/odpi/egeria/commit/e21ba48878ea14fc16be2efac657fafd8523f265", "message": "Merge branch 'master' into classifications", "committedDate": "2020-02-21T11:47:27Z", "type": "commit"}, {"oid": "9a2df04f1d01ee82895dcd7e4bb314481c9e333f", "url": "https://github.com/odpi/egeria/commit/9a2df04f1d01ee82895dcd7e4bb314481c9e333f", "message": "Merge branch 'master' into classifications", "committedDate": "2020-02-24T13:35:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE2NTk0MQ==", "url": "https://github.com/odpi/egeria/pull/2623#discussion_r383165941", "bodyText": "From the clean code perspective, the immutable final variables come before the mutable non final ones", "author": "danielaotelea", "createdAt": "2020-02-24T09:52:37Z", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/admin/AssetLineageAdmin.java", "diffHunk": "@@ -21,14 +25,12 @@\n  * the Asset Lineage OMAS. The initialization call provides this OMAS with resources from the\n  * Open Metadata Repository Services.\n  */\n-public class AssetLineageAdmin extends AccessServiceAdmin\n-{\n+public class AssetLineageAdmin extends AccessServiceAdmin {\n \n     private OMRSAuditLog auditLog;\n     private AssetLineageServicesInstance instance;\n     private String serverName;\n-    private String serverUserName;\n-\n+    private static final Logger log = LoggerFactory.getLogger(AssetLineageAdmin.class);", "originalCommit": "e21ba48878ea14fc16be2efac657fafd8523f265", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "68c35002e84cceb50527c49f10851978b758d073", "chunk": "diff --git a/open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/admin/AssetLineageAdmin.java b/open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/admin/AssetLineageAdmin.java\nindex d44cc065e3..67053e6b81 100644\n--- a/open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/admin/AssetLineageAdmin.java\n+++ b/open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/admin/AssetLineageAdmin.java\n\n@@ -27,10 +27,10 @@ import java.util.List;\n  */\n public class AssetLineageAdmin extends AccessServiceAdmin {\n \n+    private static final Logger log = LoggerFactory.getLogger(AssetLineageAdmin.class);\n     private OMRSAuditLog auditLog;\n     private AssetLineageServicesInstance instance;\n     private String serverName;\n-    private static final Logger log = LoggerFactory.getLogger(AssetLineageAdmin.class);\n \n     /**\n      * Default constructor\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE2ODU3OA==", "url": "https://github.com/odpi/egeria/pull/2623#discussion_r383168578", "bodyText": "you may use CollectionUtils.isEmpty that checks also if the list of classifications is null.", "author": "danielaotelea", "createdAt": "2020-02-24T09:57:40Z", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ClassificationHandler.java", "diffHunk": "@@ -28,156 +32,123 @@\n \n     private static final Logger log = LoggerFactory.getLogger(AssetContextHandler.class);\n \n-    private String serviceName;\n-    private String serverName;\n-    private RepositoryHandler repositoryHandler;\n-    private OMRSRepositoryHelper repositoryHelper;\n     private InvalidParameterHandler invalidParameterHandler;\n-    private CommonHandler commonHandler;\n     private AssetContext graph;\n \n \n     /**\n      * Instantiates a new Classification handler.\n      *\n-     * @param serviceName             the service name\n-     * @param serverName              the server name\n      * @param invalidParameterHandler the invalid parameter handler\n-     * @param repositoryHelper        the repository helper\n-     * @param repositoryHandler       the repository handler\n      */\n-    public ClassificationHandler(String serviceName,\n-                                 String serverName,\n-                                 InvalidParameterHandler invalidParameterHandler,\n-                                 OMRSRepositoryHelper repositoryHelper,\n-                                 RepositoryHandler repositoryHandler) {\n-        this.serviceName = serviceName;\n-        this.serverName = serverName;\n-        this.repositoryHandler = repositoryHandler;\n-        this.repositoryHelper = repositoryHelper;\n+    public ClassificationHandler(InvalidParameterHandler invalidParameterHandler) {\n         this.invalidParameterHandler = invalidParameterHandler;\n-        this.commonHandler = new CommonHandler(serviceName, serverName, invalidParameterHandler, repositoryHelper, repositoryHandler);\n     }\n \n \n     /**\n      * Gets asset context from the entity by classification type.\n      *\n-     * @param serverName         the server name\n-     * @param userId             the user id\n-     * @param entityDetail       the entity for retrieving the classifications attached to it\n+     * @param userId       the user id\n+     * @param entityDetail the entity for retrieving the classifications attached to it\n      * @return the asset context by classification\n      */\n-    public Map<String, Set<GraphContext>> getAssetContextByClassification(String serverName, String userId, EntityDetail entityDetail) {\n-\n+    public Map<String, Set<GraphContext>> getAssetContextByClassification(String userId, EntityDetail entityDetail) throws OCFCheckedExceptionBase {\n \n \n-        if (! entityDetail.getClassifications().isEmpty() && checkLineageClassificationTypes(entityDetail)) {\n+        if (!entityDetail.getClassifications().isEmpty() && checkLineageClassificationTypes(entityDetail)) {", "originalCommit": "e21ba48878ea14fc16be2efac657fafd8523f265", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d7035d6345b3a16391a4e158a8f79a374aa95baf", "chunk": "diff --git a/open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ClassificationHandler.java b/open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ClassificationHandler.java\nindex 2c5043c61a..11f9b11a99 100644\n--- a/open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ClassificationHandler.java\n+++ b/open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ClassificationHandler.java\n\n@@ -55,8 +56,7 @@ public class ClassificationHandler {\n      */\n     public Map<String, Set<GraphContext>> getAssetContextByClassification(String userId, EntityDetail entityDetail) throws OCFCheckedExceptionBase {\n \n-\n-        if (!entityDetail.getClassifications().isEmpty() && checkLineageClassificationTypes(entityDetail)) {\n+        if (!CollectionUtils.isEmpty(entityDetail.getClassifications()) && checkLineageClassificationTypes(entityDetail)) {\n \n             graph = new AssetContext();\n             String methodName = \"getAssetContextByClassification\";\n"}}, {"oid": "68c35002e84cceb50527c49f10851978b758d073", "url": "https://github.com/odpi/egeria/commit/68c35002e84cceb50527c49f10851978b758d073", "message": "AL omas: refactor\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-24T13:53:49Z", "type": "commit"}, {"oid": "25a7a3740811faaab890344d19858e1381247410", "url": "https://github.com/odpi/egeria/commit/25a7a3740811faaab890344d19858e1381247410", "message": "Merge branch 'classifications' of https://github.com/GuyAckermans/egeria into classifications", "committedDate": "2020-02-24T13:54:04Z", "type": "commit"}, {"oid": "d7035d6345b3a16391a4e158a8f79a374aa95baf", "url": "https://github.com/odpi/egeria/commit/d7035d6345b3a16391a4e158a8f79a374aa95baf", "message": "AL omas: use CollectionUtils.isEmpty\n\nSigned-off-by: Guy Ackermans <guy.ackermans92@gmail.com>", "committedDate": "2020-02-25T12:17:01Z", "type": "commit"}, {"oid": "9a1fc5fa5cc4f1795b363444d038de2119971332", "url": "https://github.com/odpi/egeria/commit/9a1fc5fa5cc4f1795b363444d038de2119971332", "message": "Merge branch 'master' of https://github.com/odpi/egeria into classifications", "committedDate": "2020-02-25T12:17:37Z", "type": "commit"}]}