{"pr_number": 3430, "pr_title": "added filter to add request information in MDC for logging", "pr_createdAt": "2020-08-03T11:00:58Z", "pr_url": "https://github.com/odpi/egeria/pull/3430", "timeline": [{"oid": "3e7126e4619e87bb8945833c8cf83eb9c9417209", "url": "https://github.com/odpi/egeria/commit/3e7126e4619e87bb8945833c8cf83eb9c9417209", "message": "added filter to add request information in MDC for logging\n\nSigned-off-by: marius-patrascu <marius-florin.patrascu@ing.com>", "committedDate": "2020-08-03T10:59:04Z", "type": "commit"}, {"oid": "dd4024e0e8ef530eb93d422da4119ec54a484242", "url": "https://github.com/odpi/egeria/commit/dd4024e0e8ef530eb93d422da4119ec54a484242", "message": "Merge branch 'master' into logging-enhancements-for-ui", "committedDate": "2020-08-03T11:01:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ3MTk1NA==", "url": "https://github.com/odpi/egeria/pull/3430#discussion_r464471954", "bodyText": "Do we have a concern here that this is potentially personally identifiable information -- the combination of host, username, session is quite specific.\nCan you elaborate on what is recorded for the logging. how this information is used and how it's control is documented?", "author": "planetf1", "createdAt": "2020-08-03T15:02:47Z", "path": "open-metadata-implementation/user-interfaces/ui-chassis/ui-chassis-spring/src/main/java/org/odpi/openmetadata/userinterface/uichassis/springboot/auth/LoggingRequestFilter.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/* SPDX-License-Identifier: Apache-2.0 */\n+/* Copyright Contributors to the ODPi Egeria project. */\n+package org.odpi.openmetadata.userinterface.uichassis.springboot.auth;\n+\n+import org.slf4j.MDC;\n+\n+import javax.servlet.Filter;\n+import javax.servlet.FilterChain;\n+import javax.servlet.FilterConfig;\n+import javax.servlet.ServletException;\n+import javax.servlet.ServletRequest;\n+import javax.servlet.ServletResponse;\n+import javax.servlet.http.HttpServletRequest;\n+import java.io.IOException;\n+import java.util.Collections;\n+\n+public class LoggingRequestFilter implements Filter {\n+    private String path;\n+\n+    public LoggingRequestFilter(String path) {\n+        this.path = path;\n+    }\n+\n+    @Override\n+    public void init(FilterConfig filterConfig) throws ServletException {\n+\n+    }\n+\n+    @Override\n+    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n+        HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;\n+        String requestURI = httpRequest.getRequestURI();\n+        if (!path.equals(requestURI)) {\n+            filterChain.doFilter(servletRequest, servletResponse);\n+            return;\n+        }\n+        MDC.put(\"remoteAddress\", httpRequest.getRemoteAddr());", "originalCommit": "dd4024e0e8ef530eb93d422da4119ec54a484242", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ5NzM0OA==", "url": "https://github.com/odpi/egeria/pull/3430#discussion_r464497348", "bodyText": "@planetf1 the purpose is to have audit trail logging to supervise all actions from all users.\nIt is security related.\nThere is no personal information involved.", "author": "bogdan-sava", "createdAt": "2020-08-03T15:43:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ3MTk1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUwOTE4MQ==", "url": "https://github.com/odpi/egeria/pull/3430#discussion_r464509181", "bodyText": "(oops skipped the thread - added comments in main body)", "author": "planetf1", "createdAt": "2020-08-03T16:02:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ3MTk1NA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "341a985b8576bc06104e44f7b61199295fce8799", "url": "https://github.com/odpi/egeria/commit/341a985b8576bc06104e44f7b61199295fce8799", "message": "Merge branch 'master' into logging-enhancements-for-ui", "committedDate": "2020-08-03T15:46:31Z", "type": "commit"}, {"oid": "958e50d997db792308dfd87b6a1ab569b0837020", "url": "https://github.com/odpi/egeria/commit/958e50d997db792308dfd87b6a1ab569b0837020", "message": "Merge branch 'master' into logging-enhancements-for-ui", "committedDate": "2020-08-04T08:20:31Z", "type": "commit"}, {"oid": "59a2c93e4f4f7d3e20140d725bc63536ce24c4e9", "url": "https://github.com/odpi/egeria/commit/59a2c93e4f4f7d3e20140d725bc63536ce24c4e9", "message": "Merge branch 'master' into logging-enhancements-for-ui", "committedDate": "2020-08-04T15:48:58Z", "type": "commit"}, {"oid": "dcf79dea17bede0838b27a5d847b745f51b2ccf3", "url": "https://github.com/odpi/egeria/commit/dcf79dea17bede0838b27a5d847b745f51b2ccf3", "message": "Merge branch 'master' into logging-enhancements-for-ui", "committedDate": "2020-08-04T16:41:07Z", "type": "commit"}]}