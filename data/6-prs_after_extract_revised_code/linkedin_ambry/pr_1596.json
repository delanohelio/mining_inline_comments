{"pr_number": 1596, "pr_title": "Several minor changes in operation tracker and ambry partition", "pr_createdAt": "2020-07-30T23:18:44Z", "pr_url": "https://github.com/linkedin/ambry/pull/1596", "timeline": [{"oid": "0c510c75e4971039d1fe8da591640f656d7bb4aa", "url": "https://github.com/linkedin/ambry/commit/0c510c75e4971039d1fe8da591640f656d7bb4aa", "message": "Several minor changes in operation tracker and ambry partition\n\n1. allow replica in OFFLINE state to be added to replica pool for GET operation\n2. support getting resource name associated with ambry partition (if Helix is adopted)\n3. upgrade helix library to version 1.0.1", "committedDate": "2020-07-30T23:14:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzg2Njc0Mg==", "url": "https://github.com/linkedin/ambry/pull/1596#discussion_r463866742", "bodyText": "Should we align the naming convention between PARTITION_RESOURCE_ID and resourceName?", "author": "SophieGuo410", "createdAt": "2020-07-31T22:06:56Z", "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/AmbryPartition.java", "diffHunk": "@@ -137,12 +137,18 @@ public String getPartitionClass() {\n     return partitionClass;\n   }\n \n+  @Override\n+  public String getResourceName() {\n+    return clusterManagerCallback.getResourceNameForPartition(this);\n+  }\n+\n   @Override\n   public JSONObject getSnapshot() {\n     JSONObject snapshot = new JSONObject();\n     snapshot.put(PARTITION_ID, toPathString());\n     snapshot.put(PARTITION_WRITE_STATE, getPartitionState().name());\n     snapshot.put(PARTITION_CLASS, getPartitionClass());\n+    snapshot.put(PARTITION_RESOURCE_ID, getResourceName());", "originalCommit": "0c510c75e4971039d1fe8da591640f656d7bb4aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1OTc3Ng==", "url": "https://github.com/linkedin/ambry/pull/1596#discussion_r464559776", "bodyText": "Sure, to make it consistent, I'll update it to PARTITION_RESOURCE_NAME.", "author": "jsjtzyy", "createdAt": "2020-08-03T17:35:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzg2Njc0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "f7f65ea17344702fdc3d5a12e67803de207e25b0", "chunk": "diff --git a/ambry-clustermap/src/main/java/com/github/ambry/clustermap/AmbryPartition.java b/ambry-clustermap/src/main/java/com/github/ambry/clustermap/AmbryPartition.java\nindex 8d6d82811..2901c9ce5 100644\n--- a/ambry-clustermap/src/main/java/com/github/ambry/clustermap/AmbryPartition.java\n+++ b/ambry-clustermap/src/main/java/com/github/ambry/clustermap/AmbryPartition.java\n\n@@ -148,7 +148,7 @@ public class AmbryPartition implements PartitionId {\n     snapshot.put(PARTITION_ID, toPathString());\n     snapshot.put(PARTITION_WRITE_STATE, getPartitionState().name());\n     snapshot.put(PARTITION_CLASS, getPartitionClass());\n-    snapshot.put(PARTITION_RESOURCE_ID, getResourceName());\n+    snapshot.put(PARTITION_RESOURCE_NAME, getResourceName());\n     JSONArray replicas = new JSONArray();\n     getReplicaIds().forEach(replica -> replicas.put(replica.getSnapshot()));\n     snapshot.put(PARTITION_REPLICAS, replicas);\n"}}, {"oid": "f7f65ea17344702fdc3d5a12e67803de207e25b0", "url": "https://github.com/linkedin/ambry/commit/f7f65ea17344702fdc3d5a12e67803de207e25b0", "message": "address Sophie's comment and remove hack in build.gradle", "committedDate": "2020-08-03T17:47:16Z", "type": "commit"}]}