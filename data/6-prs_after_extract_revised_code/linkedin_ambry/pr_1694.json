{"pr_number": 1694, "pr_title": "[MySQL] Moving common mysql utility to ambry-commons module", "pr_createdAt": "2020-11-12T05:52:31Z", "pr_url": "https://github.com/linkedin/ambry/pull/1694", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM5ODU3NA==", "url": "https://github.com/linkedin/ambry/pull/1694#discussion_r522398574", "bodyText": "Good idea, this is independent of accounts.", "author": "lightningrob", "createdAt": "2020-11-12T20:20:22Z", "path": "ambry-commons/src/main/java/com/github/ambry/mysql/MySqlMetrics.java", "diffHunk": "@@ -11,17 +11,17 @@\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  */\n-package com.github.ambry.account.mysql;\n+package com.github.ambry.mysql;\n \n import com.codahale.metrics.Counter;\n import com.codahale.metrics.Histogram;\n import com.codahale.metrics.MetricRegistry;\n \n \n /**\n- * Expose metrics related to writes and reads to/from MySql DB used in {@link com.github.ambry.account.MySqlAccountService}\n+ * Expose metrics related to writes and reads to/from MySql DB.\n  */\n-public class MySqlAccountStoreMetrics {\n+public class MySqlMetrics {", "originalCommit": "31e8aadfb7fcb44bf0c410e1de5179ce8f4aa558", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM5OTY5Ng==", "url": "https://github.com/linkedin/ambry/pull/1694#discussion_r522399696", "bodyText": "Why not static?  (This can probably move to MySqlUtils anyway.)", "author": "lightningrob", "createdAt": "2020-11-12T20:21:49Z", "path": "ambry-commons/src/main/java/com/github/ambry/mysql/MySqlDataAccessor.java", "diffHunk": "@@ -317,7 +286,7 @@ private boolean isBetterEndpoint(DbEndpoint first, DbEndpoint second) {\n    * Close a resource without throwing exception.\n    * @param resource the resource to close.\n    */\n-  private static void closeQuietly(AutoCloseable resource) {\n+  private void closeQuietly(AutoCloseable resource) {", "originalCommit": "31e8aadfb7fcb44bf0c410e1de5179ce8f4aa558", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjQ1MTU4NQ==", "url": "https://github.com/linkedin/ambry/pull/1694#discussion_r522451585", "bodyText": "I can revert the change.", "author": "justinlin-linkedin", "createdAt": "2020-11-12T21:57:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM5OTY5Ng=="}], "type": "inlineReview", "revised_code": {"commit": "3082256c3f9782681bf5dc87b51168137f66dcfc", "chunk": "diff --git a/ambry-commons/src/main/java/com/github/ambry/mysql/MySqlDataAccessor.java b/ambry-commons/src/main/java/com/github/ambry/mysql/MySqlDataAccessor.java\nindex 7f0ba81ad..59cd3ae89 100644\n--- a/ambry-commons/src/main/java/com/github/ambry/mysql/MySqlDataAccessor.java\n+++ b/ambry-commons/src/main/java/com/github/ambry/mysql/MySqlDataAccessor.java\n\n@@ -286,7 +286,7 @@ public class MySqlDataAccessor {\n    * Close a resource without throwing exception.\n    * @param resource the resource to close.\n    */\n-  private void closeQuietly(AutoCloseable resource) {\n+  private static void closeQuietly(AutoCloseable resource) {\n     try {\n       if (resource != null) {\n         resource.close();\n"}}, {"oid": "8e263cc63d963b9808cf545b5f5e5158fcd43d5d", "url": "https://github.com/linkedin/ambry/commit/8e263cc63d963b9808cf545b5f5e5158fcd43d5d", "message": "[MySQL] Moving common mysql utility to ambry-commons module", "committedDate": "2020-11-12T21:34:50Z", "type": "commit"}, {"oid": "8535767d8e28387315966f76fb61e20844f4bdd0", "url": "https://github.com/linkedin/ambry/commit/8535767d8e28387315966f76fb61e20844f4bdd0", "message": "Fix test failure", "committedDate": "2020-11-12T21:34:50Z", "type": "commit"}, {"oid": "b8fbd7bdd29337df6bfd763023383e2505864e47", "url": "https://github.com/linkedin/ambry/commit/b8fbd7bdd29337df6bfd763023383e2505864e47", "message": "Add mysql dependency version", "committedDate": "2020-11-12T21:56:26Z", "type": "commit"}, {"oid": "b8fbd7bdd29337df6bfd763023383e2505864e47", "url": "https://github.com/linkedin/ambry/commit/b8fbd7bdd29337df6bfd763023383e2505864e47", "message": "Add mysql dependency version", "committedDate": "2020-11-12T21:56:26Z", "type": "forcePushed"}, {"oid": "3082256c3f9782681bf5dc87b51168137f66dcfc", "url": "https://github.com/linkedin/ambry/commit/3082256c3f9782681bf5dc87b51168137f66dcfc", "message": "Revert somechange", "committedDate": "2020-11-12T21:58:02Z", "type": "commit"}]}