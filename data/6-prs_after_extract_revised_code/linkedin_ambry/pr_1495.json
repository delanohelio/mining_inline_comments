{"pr_number": 1495, "pr_title": "HTTP2 minor fixes", "pr_createdAt": "2020-04-29T16:26:23Z", "pr_url": "https://github.com/linkedin/ambry/pull/1495", "timeline": [{"oid": "eb6d7d1e8abac70b1f2871513e1fdf24c6697cb2", "url": "https://github.com/linkedin/ambry/commit/eb6d7d1e8abac70b1f2871513e1fdf24c6697cb2", "message": "HTTP2 minor fixes.\n\n1. Improve timing log in Http2ClientStreamStatsHandler.\n2. Allow Linux TCP buffer auto tune by not providing a socket buffer size.\n3. Enhance Http2BlockingChannel.", "committedDate": "2020-04-29T16:25:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE2NjQ5Nw==", "url": "https://github.com/linkedin/ambry/pull/1495#discussion_r418166497", "bodyText": "nit: Can we create a Http2BlokcingChannelConfig to encapsulate those values?", "author": "justinlin-linkedin", "createdAt": "2020-04-30T17:18:27Z", "path": "ambry-network/src/main/java/com/github/ambry/network/http2/Http2BlockingChannel.java", "diffHunk": "@@ -74,16 +75,23 @@\n   private static final Logger logger = LoggerFactory.getLogger(Http2BlockingChannel.class);\n   private final static AttributeKey<Promise<ByteBuf>> RESPONSE_PROMISE = AttributeKey.newInstance(\"ResponsePromise\");\n   private final String hostName;\n+  private final int readBufferSize;\n+  private final int writeBufferSize;\n+  private final int http2InitialWindowSize;\n   private final SSLFactory sslFactory;\n   private final int port;\n   private EventLoopGroup workerGroup;\n   private Channel channel;\n   private Promise<ByteBuf> responsePromise;\n   private Http2StreamChannelBootstrap http2StreamChannelBootstrap;\n \n-  public Http2BlockingChannel(String hostName, int port, SSLConfig sslConfig) {\n+  public Http2BlockingChannel(String hostName, int port, SSLConfig sslConfig, int readBufferSize, int writeBufferSize,\n+      int http2InitialWindowSize) {", "originalCommit": "eb6d7d1e8abac70b1f2871513e1fdf24c6697cb2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIwOTA4Nw==", "url": "https://github.com/linkedin/ambry/pull/1495#discussion_r418209087", "bodyText": "Prefer to do it in this way. BlockingChannel is also doing the similar thing. It would be hard for test code refactor if Http2BlokcingChannelConfig  is introduced.", "author": "zzmao", "createdAt": "2020-04-30T18:32:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE2NjQ5Nw=="}], "type": "inlineReview", "revised_code": null}]}