{"pr_number": 460, "pr_title": "Avro: fixing NullPointerException for writing NULL values for SMALLINT and BYTEA columns", "pr_createdAt": "2020-10-13T15:05:28Z", "pr_url": "https://github.com/greenplum-db/pxf/pull/460", "timeline": [{"oid": "5120e484668120d440ae386bc261dfbb8c422353", "url": "https://github.com/greenplum-db/pxf/commit/5120e484668120d440ae386bc261dfbb8c422353", "message": "Avro: fixing NullPointerException for writing NULL values for SMALLINT and BYTEA columns", "committedDate": "2020-10-13T14:56:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE2NzY0OQ==", "url": "https://github.com/greenplum-db/pxf/pull/460#discussion_r504167649", "bodyText": "maybe we can have a single check for non-null once (between lines 141 and 142) instead", "author": "frankgh", "createdAt": "2020-10-13T18:22:51Z", "path": "server/pxf-hdfs/src/main/java/org/greenplum/pxf/plugins/hdfs/AvroResolver.java", "diffHunk": "@@ -141,10 +141,10 @@ public OneRow setFields(List<OneField> record) {\n         for (OneField field : record) {\n             if (field.type == DataType.BYTEA.getOID()) {\n                 // Avro does not seem to understand regular byte arrays\n-                field.val = ByteBuffer.wrap((byte[]) field.val);\n+                field.val = field.val != null ? ByteBuffer.wrap((byte[]) field.val) : null;", "originalCommit": "5120e484668120d440ae386bc261dfbb8c422353", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}