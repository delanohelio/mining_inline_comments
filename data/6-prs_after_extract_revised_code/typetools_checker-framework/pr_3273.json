{"pr_number": 3273, "pr_title": "Parse the annotated JDK as a stub file and remove jdk8.jar", "pr_createdAt": "2020-04-26T20:04:13Z", "pr_url": "https://github.com/typetools/checker-framework/pull/3273", "timeline": [{"oid": "e85a8fbfe2a3a6dfcf6e6e671d5acf8689064450", "url": "https://github.com/typetools/checker-framework/commit/e85a8fbfe2a3a6dfcf6e6e671d5acf8689064450", "message": "Remove jdk8.jar", "committedDate": "2020-04-26T19:59:18Z", "type": "commit"}, {"oid": "2eb79753cbd0ff07ef08418bf28205ec9cb0a79c", "url": "https://github.com/typetools/checker-framework/commit/2eb79753cbd0ff07ef08418bf28205ec9cb0a79c", "message": "Add back so test pass.", "committedDate": "2020-04-26T21:39:40Z", "type": "commit"}, {"oid": "69d293e21f02181e9dbf40bdc29498b69807849f", "url": "https://github.com/typetools/checker-framework/commit/69d293e21f02181e9dbf40bdc29498b69807849f", "message": "Code review tweaks", "committedDate": "2020-04-28T00:47:17Z", "type": "commit"}, {"oid": "964303fd66651a9e56d5a3ada93483ca212df254", "url": "https://github.com/typetools/checker-framework/commit/964303fd66651a9e56d5a3ada93483ca212df254", "message": "Edits from code review", "committedDate": "2020-04-28T02:38:13Z", "type": "commit"}, {"oid": "862ed0ee0c89c66499ce057da922cc3db18b53e4", "url": "https://github.com/typetools/checker-framework/commit/862ed0ee0c89c66499ce057da922cc3db18b53e4", "message": "Improve documentation about libraries", "committedDate": "2020-04-28T02:40:48Z", "type": "commit"}, {"oid": "8b5981b5fe29e1c3cffc130223ac2230cc2cca29", "url": "https://github.com/typetools/checker-framework/commit/8b5981b5fe29e1c3cffc130223ac2230cc2cca29", "message": "Merge ../checker-framework-branch-master into removeJdk8Jar", "committedDate": "2020-04-28T02:43:48Z", "type": "commit"}, {"oid": "4e9bb71620b3ebf98eb6f82705af4a5ca5b8e8b8", "url": "https://github.com/typetools/checker-framework/commit/4e9bb71620b3ebf98eb6f82705af4a5ca5b8e8b8", "message": "Remove obsolete troubleshooting items", "committedDate": "2020-04-28T03:20:39Z", "type": "commit"}, {"oid": "40cf67a982f9af0ae76a8dbd50dc3d68aa363e79", "url": "https://github.com/typetools/checker-framework/commit/40cf67a982f9af0ae76a8dbd50dc3d68aa363e79", "message": "Capitalization fixes", "committedDate": "2020-04-28T03:21:45Z", "type": "commit"}, {"oid": "2af9ddbc4846bb3e49f82b5bacd6fc6f0ba14d75", "url": "https://github.com/typetools/checker-framework/commit/2af9ddbc4846bb3e49f82b5bacd6fc6f0ba14d75", "message": "Manual improvements", "committedDate": "2020-04-28T03:24:43Z", "type": "commit"}, {"oid": "e5b8612b8802886bb0527b6495defc560268b78e", "url": "https://github.com/typetools/checker-framework/commit/e5b8612b8802886bb0527b6495defc560268b78e", "message": "More updates from code review", "committedDate": "2020-04-28T03:25:04Z", "type": "commit"}, {"oid": "f2f53029957bd502c74dc6236c79eeac4dfc8788", "url": "https://github.com/typetools/checker-framework/commit/f2f53029957bd502c74dc6236c79eeac4dfc8788", "message": "Merge ../checker-framework-branch-master into removeJdk8Jar", "committedDate": "2020-04-28T03:27:14Z", "type": "commit"}, {"oid": "1712606f93aa5cd71107dd9ad98a76fe7790cfc0", "url": "https://github.com/typetools/checker-framework/commit/1712606f93aa5cd71107dd9ad98a76fe7790cfc0", "message": "More updates from code review", "committedDate": "2020-04-28T03:30:42Z", "type": "commit"}, {"oid": "8f1faeb855f7abe7b0b29a8c5342b6e06b8af786", "url": "https://github.com/typetools/checker-framework/commit/8f1faeb855f7abe7b0b29a8c5342b6e06b8af786", "message": "Merge ../checker-framework-branch-master into removeJdk8Jar", "committedDate": "2020-04-28T03:39:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk3Mzk1OA==", "url": "https://github.com/typetools/checker-framework/pull/3273#discussion_r416973958", "bodyText": "Could you add a comment why they are skipped?\nIsn't the build file already not copying the module-info from the JDK?\nAt some point we might want default annotations on the module level.", "author": "wmdietl", "createdAt": "2020-04-28T22:59:59Z", "path": "framework/src/main/java/org/checkerframework/framework/stub/StubTypes.java", "diffHunk": "@@ -480,6 +485,13 @@ private void prepJdkFromFile(URL resourceURL) {\n                     parseStubFile(path);\n                     continue;\n                 }\n+                if (path.getFileName().toString().equals(\"module-info.java\")) {", "originalCommit": "8f1faeb855f7abe7b0b29a8c5342b6e06b8af786", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "79abf279d2639aeefd84cc86d141e7ddc32575d7", "chunk": "diff --git a/framework/src/main/java/org/checkerframework/framework/stub/StubTypes.java b/framework/src/main/java/org/checkerframework/framework/stub/StubTypes.java\nindex 84e290dcb..f1e98aa0b 100644\n--- a/framework/src/main/java/org/checkerframework/framework/stub/StubTypes.java\n+++ b/framework/src/main/java/org/checkerframework/framework/stub/StubTypes.java\n\n@@ -486,6 +486,7 @@ public class StubTypes {\n                     continue;\n                 }\n                 if (path.getFileName().toString().equals(\"module-info.java\")) {\n+                    // JavaParser can't parse module-info files, so skip them.\n                     continue;\n                 }\n                 if (parseAllJdkFiles) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk3NDQ3NQ==", "url": "https://github.com/typetools/checker-framework/pull/3273#discussion_r416974475", "bodyText": "This new option should be documented in the manual.", "author": "wmdietl", "createdAt": "2020-04-28T23:01:24Z", "path": "framework/src/main/java/org/checkerframework/framework/source/SourceChecker.java", "diffHunk": "@@ -356,7 +356,10 @@\n \n     // Whether to output resource statistics at JVM shutdown\n     // org.checkerframework.framework.source.SourceChecker.shutdownHook()\n-    \"resourceStats\"\n+    \"resourceStats\",\n+\n+    // Parse all JDK files at startup rather than as needed.\n+    \"parseAllJdk\"", "originalCommit": "8f1faeb855f7abe7b0b29a8c5342b6e06b8af786", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4NDUyNg==", "url": "https://github.com/typetools/checker-framework/pull/3273#discussion_r418684526", "bodyText": "This was done in #3279.", "author": "smillst", "createdAt": "2020-05-01T18:52:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk3NDQ3NQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "e5a34d0d1d7dcc335c719e8d4408d143a735b33e", "url": "https://github.com/typetools/checker-framework/commit/e5a34d0d1d7dcc335c719e8d4408d143a735b33e", "message": "Merge branch 'master' into removeJdk8Jar", "committedDate": "2020-05-01T23:19:58Z", "type": "commit"}, {"oid": "4b87aba22a4431031a3ffc27f0a1ef6260e8bb32", "url": "https://github.com/typetools/checker-framework/commit/4b87aba22a4431031a3ffc27f0a1ef6260e8bb32", "message": "Remove methods from SystemUtil.", "committedDate": "2020-05-01T23:21:37Z", "type": "commit"}, {"oid": "d718ad5b270013551a885e14bf5e58ed8a28dae5", "url": "https://github.com/typetools/checker-framework/commit/d718ad5b270013551a885e14bf5e58ed8a28dae5", "message": "Merge remote-tracking branch 'origin/master' into removeJdk8Jar", "committedDate": "2020-05-03T15:09:14Z", "type": "commit"}, {"oid": "674bc5e3ce7deec029a3514bb2a0b79571c5bc47", "url": "https://github.com/typetools/checker-framework/commit/674bc5e3ce7deec029a3514bb2a0b79571c5bc47", "message": "Delete section.", "committedDate": "2020-05-03T15:14:05Z", "type": "commit"}, {"oid": "c42c2df15b0cbb9a4de53d134ededf55174f0434", "url": "https://github.com/typetools/checker-framework/commit/c42c2df15b0cbb9a4de53d134ededf55174f0434", "message": "Update changelog.", "committedDate": "2020-05-03T15:25:47Z", "type": "commit"}, {"oid": "852eead5f6e06577954e1f2505d4b0c7e33ada73", "url": "https://github.com/typetools/checker-framework/commit/852eead5f6e06577954e1f2505d4b0c7e33ada73", "message": "Address javadoc.astub.", "committedDate": "2020-05-03T15:28:07Z", "type": "commit"}, {"oid": "79abf279d2639aeefd84cc86d141e7ddc32575d7", "url": "https://github.com/typetools/checker-framework/commit/79abf279d2639aeefd84cc86d141e7ddc32575d7", "message": "Add comment.", "committedDate": "2020-05-03T15:29:18Z", "type": "commit"}, {"oid": "a67877e3c9d6fa18069c3c4e03cc8baa31f385e2", "url": "https://github.com/typetools/checker-framework/commit/a67877e3c9d6fa18069c3c4e03cc8baa31f385e2", "message": "Remove checker/jdk.", "committedDate": "2020-05-03T15:30:37Z", "type": "commit"}]}