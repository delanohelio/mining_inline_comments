{"pr_number": 3534, "pr_title": "Move getSuccessors() into Block", "pr_createdAt": "2020-07-31T05:30:35Z", "pr_url": "https://github.com/typetools/checker-framework/pull/3534", "timeline": [{"oid": "9bf8af51783752943d0237a514353007b0c88d55", "url": "https://github.com/typetools/checker-framework/commit/9bf8af51783752943d0237a514353007b0c88d55", "message": "Interface should not reference implementation subclasses", "committedDate": "2020-07-30T23:02:59Z", "type": "commit"}, {"oid": "389343646ed356dadf52ba669ca492c2433f4cfb", "url": "https://github.com/typetools/checker-framework/commit/389343646ed356dadf52ba669ca492c2433f4cfb", "message": "Move getSuccessors() into Block", "committedDate": "2020-07-30T23:13:02Z", "type": "commit"}, {"oid": "17fde4bc607c6c02e8ffc893123d685a26a49659", "url": "https://github.com/typetools/checker-framework/commit/17fde4bc607c6c02e8ffc893123d685a26a49659", "message": "Make collections mutable, and don't put null in them", "committedDate": "2020-07-30T23:48:00Z", "type": "commit"}, {"oid": "fa8177587023a466b17d54c07cc95dcd904ce6e5", "url": "https://github.com/typetools/checker-framework/commit/fa8177587023a466b17d54c07cc95dcd904ce6e5", "message": "Merge ../checker-framework-branch-master into block-interface", "committedDate": "2020-07-31T01:07:43Z", "type": "commit"}, {"oid": "259e787771b574459679a02a8c8cc7e1babf7919", "url": "https://github.com/typetools/checker-framework/commit/259e787771b574459679a02a8c8cc7e1babf7919", "message": "Merge ../checker-framework-fork-mernst-branch-block-interface into block-getsuccessors", "committedDate": "2020-07-31T01:07:49Z", "type": "commit"}, {"oid": "b3c75f0e0821b77848b549c6be81cb517b997f09", "url": "https://github.com/typetools/checker-framework/commit/b3c75f0e0821b77848b549c6be81cb517b997f09", "message": "Add Javadoc", "committedDate": "2020-07-31T03:56:01Z", "type": "commit"}, {"oid": "8f864e1e2695cc05a985a86c74f50651340fea08", "url": "https://github.com/typetools/checker-framework/commit/8f864e1e2695cc05a985a86c74f50651340fea08", "message": "Merge ../checker-framework-branch-master into block-getsuccessors", "committedDate": "2020-07-31T05:29:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzgxNTg4MQ==", "url": "https://github.com/typetools/checker-framework/pull/3534#discussion_r463815881", "bodyText": "Should this be Set like for getPredecessors()? We don't need duplicates in the result.", "author": "wmdietl", "createdAt": "2020-07-31T20:18:07Z", "path": "dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java", "diffHunk": "@@ -41,4 +42,11 @@\n      * @return the predecessors of this basic block\n      */\n     Set<Block> getPredecessors();\n+\n+    /**\n+     * Returns all the successors of this basic block.\n+     *\n+     * @return all the successors of this basic block\n+     */\n+    Collection<Block> getSuccessors();", "originalCommit": "8f864e1e2695cc05a985a86c74f50651340fea08", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzgyNjIzNg==", "url": "https://github.com/typetools/checker-framework/pull/3534#discussion_r463826236", "bodyText": "This forces use of LinkedHashSet throughout instead of the more efficient ArrayList.  I don't see anywhere that clients of getPredecessors require (for correctness) that the result is a set.", "author": "mernst", "createdAt": "2020-07-31T20:43:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzgxNTg4MQ=="}], "type": "inlineReview", "revised_code": {"commit": "735d31e2d2f765b7abfaa39fd0cfb36b4d9dfa71", "chunk": "diff --git a/dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java b/dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java\nindex 72e3c3896..6f64d33cf 100644\n--- a/dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java\n+++ b/dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java\n\n@@ -44,9 +43,9 @@ public interface Block {\n     Set<Block> getPredecessors();\n \n     /**\n-     * Returns all the successors of this basic block.\n+     * Returns the successors of this basic block.\n      *\n-     * @return all the successors of this basic block\n+     * @return the successors of this basic block\n      */\n-    Collection<Block> getSuccessors();\n+    Set<Block> getSuccessors();\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzgxNzM0NQ==", "url": "https://github.com/typetools/checker-framework/pull/3534#discussion_r463817345", "bodyText": "In contrast to getPredecessors there is an all in this sentence, which made me think this gives all transitive successors. It doesn't look like that is the case or intention.\nSo how about replacing all with direct or removing the all?", "author": "wmdietl", "createdAt": "2020-07-31T20:21:50Z", "path": "dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java", "diffHunk": "@@ -41,4 +42,11 @@\n      * @return the predecessors of this basic block\n      */\n     Set<Block> getPredecessors();\n+\n+    /**\n+     * Returns all the successors of this basic block.", "originalCommit": "8f864e1e2695cc05a985a86c74f50651340fea08", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "735d31e2d2f765b7abfaa39fd0cfb36b4d9dfa71", "chunk": "diff --git a/dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java b/dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java\nindex 72e3c3896..6f64d33cf 100644\n--- a/dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java\n+++ b/dataflow/src/main/java/org/checkerframework/dataflow/cfg/block/Block.java\n\n@@ -44,9 +43,9 @@ public interface Block {\n     Set<Block> getPredecessors();\n \n     /**\n-     * Returns all the successors of this basic block.\n+     * Returns the successors of this basic block.\n      *\n-     * @return all the successors of this basic block\n+     * @return the successors of this basic block\n      */\n-    Collection<Block> getSuccessors();\n+    Set<Block> getSuccessors();\n }\n"}}, {"oid": "5131537e227f75e3b216c53a3cfcc81dee41c978", "url": "https://github.com/typetools/checker-framework/commit/5131537e227f75e3b216c53a3cfcc81dee41c978", "message": "Merge ../checker-framework-branch-master into block-getsuccessors", "committedDate": "2020-07-31T20:29:54Z", "type": "commit"}, {"oid": "735d31e2d2f765b7abfaa39fd0cfb36b4d9dfa71", "url": "https://github.com/typetools/checker-framework/commit/735d31e2d2f765b7abfaa39fd0cfb36b4d9dfa71", "message": "Change List to less efficient Set", "committedDate": "2020-07-31T20:47:35Z", "type": "commit"}, {"oid": "ade597b5e727a9d4b748271f183a7cf8320f868b", "url": "https://github.com/typetools/checker-framework/commit/ade597b5e727a9d4b748271f183a7cf8320f868b", "message": "Merge ../checker-framework-branch-master into block-getsuccessors", "committedDate": "2020-07-31T20:54:51Z", "type": "commit"}, {"oid": "20b0334cbfcfd33fe4da1160fcb02b99e61d4c6d", "url": "https://github.com/typetools/checker-framework/commit/20b0334cbfcfd33fe4da1160fcb02b99e61d4c6d", "message": "Merge ../checker-framework-branch-master into block-getsuccessors", "committedDate": "2020-08-01T17:30:02Z", "type": "commit"}, {"oid": "c3d5086baf3afb4449eceb71bd554bded6e86b61", "url": "https://github.com/typetools/checker-framework/commit/c3d5086baf3afb4449eceb71bd554bded6e86b61", "message": "Merge ../checker-framework-branch-master into block-getsuccessors", "committedDate": "2020-08-03T22:23:34Z", "type": "commit"}]}