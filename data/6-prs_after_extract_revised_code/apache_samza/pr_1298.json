{"pr_number": 1298, "pr_title": "SAMZA-2476:Fix flaky tests in TestAzureBlobOutputStream", "pr_createdAt": "2020-02-28T19:03:25Z", "pr_url": "https://github.com/apache/samza/pull/1298", "timeline": [{"oid": "41eba550a0e4ac887e72a84d573e6637ce4ba16f", "url": "https://github.com/apache/samza/commit/41eba550a0e4ac887e72a84d573e6637ce4ba16f", "message": "SAMZA-2476:Fix flaky tests in TestAzureBlobOutputStream", "committedDate": "2020-02-28T18:56:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk3Njk2Mg==", "url": "https://github.com/apache/samza/pull/1298#discussion_r385976962", "bodyText": "maybe simple javadoc?", "author": "rmatharu", "createdAt": "2020-02-29T00:11:24Z", "path": "samza-azure/src/main/java/org/apache/samza/system/azureblob/avro/AzureBlobOutputStream.java", "diffHunk": "@@ -227,6 +227,11 @@ public synchronized void releaseBuffer() throws IOException {\n     this.compression = compression;\n   }\n \n+  @VisibleForTesting", "originalCommit": "41eba550a0e4ac887e72a84d573e6637ce4ba16f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "71dfdc2c0a0605652685aee21d36b5067a79fceb", "chunk": "diff --git a/samza-azure/src/main/java/org/apache/samza/system/azureblob/avro/AzureBlobOutputStream.java b/samza-azure/src/main/java/org/apache/samza/system/azureblob/avro/AzureBlobOutputStream.java\nindex 7628960e6..21dc2a9c8 100644\n--- a/samza-azure/src/main/java/org/apache/samza/system/azureblob/avro/AzureBlobOutputStream.java\n+++ b/samza-azure/src/main/java/org/apache/samza/system/azureblob/avro/AzureBlobOutputStream.java\n\n@@ -227,6 +227,7 @@ public class AzureBlobOutputStream extends OutputStream {\n     this.compression = compression;\n   }\n \n+  // SAMZA-2476 stubbing BlockBlobAsyncClient.commitBlockListWithResponse was causing flaky tests.\n   @VisibleForTesting\n   void commitBlob(ArrayList<String> blockList, Map<String, String> blobMetadata) {\n     blobAsyncClient.commitBlockListWithResponse(blockList, null, blobMetadata, null, null).block();\n"}}, {"oid": "71dfdc2c0a0605652685aee21d36b5067a79fceb", "url": "https://github.com/apache/samza/commit/71dfdc2c0a0605652685aee21d36b5067a79fceb", "message": "simple java doc for new method", "committedDate": "2020-02-29T00:15:30Z", "type": "commit"}]}