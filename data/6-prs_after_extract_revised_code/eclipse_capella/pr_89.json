{"pr_number": 89, "pr_title": "V1.4.x rework on validation rules 53863", "pr_createdAt": "2020-02-14T13:38:17Z", "pr_url": "https://github.com/eclipse/capella/pull/89", "timeline": [{"oid": "aa41765d925ff7c9ece4d995cf215a6ddb5507a8", "url": "https://github.com/eclipse/capella/commit/aa41765d925ff7c9ece4d995cf215a6ddb5507a8", "message": "[553863] Rework on Validation rules\n\nChange-Id: Id6c154b4cf9c838a0492f5763a78b4b94cd98755\nSigned-off-by: Yogaratnam YUGANSAN <yugansan.yogaratnam@gmail.com>", "committedDate": "2020-02-14T10:41:34Z", "type": "commit"}, {"oid": "33cec355bc8b08a7f0d06e93441413b17f927011", "url": "https://github.com/eclipse/capella/commit/33cec355bc8b08a7f0d06e93441413b17f927011", "message": "[553863] Rework on Validation rules\n\nChange-Id: I187cffbff71844ebe695d27b87adcc263171ff0d\nSigned-off-by: Yogaratnam YUGANSAN <yugansan.yogaratnam@gmail.com>", "committedDate": "2020-02-14T10:41:36Z", "type": "commit"}, {"oid": "7305873a9c7d572918c2d9c70d8d5c5e42554ba7", "url": "https://github.com/eclipse/capella/commit/7305873a9c7d572918c2d9c70d8d5c5e42554ba7", "message": "[553863] Rework on Validation rules\n\nChange-Id: Ib494c2d6a72ccd984b688067a89d822c37b5aadf\nSigned-off-by: Yogaratnam YUGANSAN <yugansan.yogaratnam@gmail.com>", "committedDate": "2020-02-14T10:41:40Z", "type": "commit"}, {"oid": "8814ee8d21a3031e9b3e5123a4eea317d140dc41", "url": "https://github.com/eclipse/capella/commit/8814ee8d21a3031e9b3e5123a4eea317d140dc41", "message": "Changes for getPreviousArchitecture call\n\nChange-Id: I5f5badd2fa31a56a402983a98a2520d24407e1d0\nSigned-off-by: Yogaratnam YUGANSAN <yugansan.yogaratnam@gmail.com>", "committedDate": "2020-02-14T12:23:57Z", "type": "commit"}, {"oid": "7262f1d24f0d34ea9a463d321298348ea3593f79", "url": "https://github.com/eclipse/capella/commit/7262f1d24f0d34ea9a463d321298348ea3593f79", "message": "add Copyright 2020\n\nChange-Id: I4ff56ece295121397d3e5bbf5c98fa19ebd1563a\nSigned-off-by: Yogaratnam YUGANSAN <yugansan.yogaratnam@gmail.com>", "committedDate": "2020-02-14T12:40:15Z", "type": "commit"}, {"oid": "72a70ee3a88e8ab921abbea1510aa216f4ed2fca", "url": "https://github.com/eclipse/capella/commit/72a70ee3a88e8ab921abbea1510aa216f4ed2fca", "message": "change protected to public\n\nChange-Id: Id5d3c5c03da281b0883d43a8519fe402b675101d\nSigned-off-by: Yogaratnam YUGANSAN <yugansan.yogaratnam@gmail.com>", "committedDate": "2020-02-14T12:50:22Z", "type": "commit"}, {"oid": "a5599bb85c6fccb98e5ce239ed6fcbc44be9648c", "url": "https://github.com/eclipse/capella/commit/a5599bb85c6fccb98e5ce239ed6fcbc44be9648c", "message": "change protected to public\n\nChange-Id: Id3b4cfddbfa44f722bc67b33b8e7af380ac5e9bc\nSigned-off-by: Yogaratnam YUGANSAN <yugansan.yogaratnam@gmail.com>", "committedDate": "2020-02-14T13:34:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc0NjY0NA==", "url": "https://github.com/eclipse/capella/pull/89#discussion_r380746644", "bodyText": "Wrong check. What if the first resolution in the list is not enabled and the second resolution is enabled?", "author": "minhtutonthat", "createdAt": "2020-02-18T15:30:21Z", "path": "common/plugins/org.polarsys.capella.common.tools.report.appenders.reportlogview/src/org/polarsys/capella/common/tools/report/appenders/reportlogview/MarkerViewColumns.java", "diffHunk": "@@ -477,10 +481,17 @@ public Image getImage(Object element) {\n             // resolution generators in plugins that aren't yet\n             // loaded.\n             IMarker marker = (IMarker) element;\n+            Collection<IMarker> c = new HashSet<IMarker>();\n+            c.add(marker);\n             IMarkerResolution[] resolutions = IDE.getMarkerHelpRegistry().getResolutions(marker);\n+            if (resolutions != null && resolutions.length > 0 && resolutions[0] instanceof ReportMarkerResolution) {", "originalCommit": "a5599bb85c6fccb98e5ce239ed6fcbc44be9648c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "02d558c06505bb2d3390bb33cd67b80737bd7dab", "chunk": "diff --git a/common/plugins/org.polarsys.capella.common.tools.report.appenders.reportlogview/src/org/polarsys/capella/common/tools/report/appenders/reportlogview/MarkerViewColumns.java b/common/plugins/org.polarsys.capella.common.tools.report.appenders.reportlogview/src/org/polarsys/capella/common/tools/report/appenders/reportlogview/MarkerViewColumns.java\nindex 093a9c7c7..6042f1bfc 100644\n--- a/common/plugins/org.polarsys.capella.common.tools.report.appenders.reportlogview/src/org/polarsys/capella/common/tools/report/appenders/reportlogview/MarkerViewColumns.java\n+++ b/common/plugins/org.polarsys.capella.common.tools.report.appenders.reportlogview/src/org/polarsys/capella/common/tools/report/appenders/reportlogview/MarkerViewColumns.java\n\n@@ -481,17 +482,15 @@ class MarkerViewColumns {\n             // resolution generators in plugins that aren't yet\n             // loaded.\n             IMarker marker = (IMarker) element;\n-            Collection<IMarker> c = new HashSet<IMarker>();\n-            c.add(marker);\n             IMarkerResolution[] resolutions = IDE.getMarkerHelpRegistry().getResolutions(marker);\n-            if (resolutions != null && resolutions.length > 0 && resolutions[0] instanceof ReportMarkerResolution) {\n-              ReportMarkerResolution resolution = (ReportMarkerResolution) resolutions[0];\n-              if (!resolution.enabled(c)) {\n-                return null;\n-              }\n-            }\n \n             if ((resolutions != null) && (resolutions.length > 0)) {\n+              // Mask the icon if all resolutions are not enabled \n+              if (isAllCapellaMarkerResolution(resolutions)\n+                  && !hasAtLeastOneEnabledMarkerResolution(marker, resolutions)) {\n+                return null;\n+              }\n+              \n               if (hasAtLeastOneMultipleMarkerResolution(marker, resolutions)) {\n                 return MarkerViewPlugin.getDefault().getImage(\"quickfixAll-repository.png\"); //$NON-NLS-1$\n               }\n"}}, {"oid": "faf5490a963836f1dd3830c558d1fab17c6774a1", "url": "https://github.com/eclipse/capella/commit/faf5490a963836f1dd3830c558d1fab17c6774a1", "message": "Merge branch 'v1.4.x_Rework_on_validation_rules2_53863_corrected' of https://github.com/yugansan/capella into yugansan-v1.4.x_Rework_on_validation_rules2_53863_corrected", "committedDate": "2020-02-18T15:51:47Z", "type": "commit"}, {"oid": "02d558c06505bb2d3390bb33cd67b80737bd7dab", "url": "https://github.com/eclipse/capella/commit/02d558c06505bb2d3390bb33cd67b80737bd7dab", "message": "[553863] Fix the condition to hide quickfix icon when one of the\nresolution is not enabled.\n\nChange-Id: Id6ad252eadf26b886fbf7b7454a2864f43fd9394\nSigned-off-by: Tu Ton <minhtutonthat@gmail.com>", "committedDate": "2020-02-18T15:55:38Z", "type": "commit"}]}