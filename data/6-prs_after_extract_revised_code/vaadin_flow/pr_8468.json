{"pr_number": 8468, "pr_title": "Make handleFileUploadValidationAndData and sendUploadResponse protected", "pr_createdAt": "2020-05-30T12:29:56Z", "pr_url": "https://github.com/vaadin/flow/pull/8468", "timeline": [{"oid": "0657cc2ace5429b53fa9c86d61d41399ea3ad622", "url": "https://github.com/vaadin/flow/commit/0657cc2ace5429b53fa9c86d61d41399ea3ad622", "message": "Make handleFileUploadValidationAndData and sendUploadResponse protected\n\nThis allows external code extending this class to reduce copy/pasting these and other private methods.", "committedDate": "2020-06-27T22:33:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM2NTU2OA==", "url": "https://github.com/vaadin/flow/pull/8468#discussion_r496365568", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                protected boolean handleFileUploadValidationAndData(VaadinSession session,\n          \n          \n            \n                /**\n          \n          \n            \n                 * Validate that stream target is in a valid state for receiving data\n          \n          \n            \n                 * and send stream to receiver. Handles cleanup and error in reading stream\n          \n          \n            \n                 *\n          \n          \n            \n                 * @param session\n          \n          \n            \n                 *         The session containing the stream variable\n          \n          \n            \n                 * @param inputStream\n          \n          \n            \n                 *         the request content input stream\n          \n          \n            \n                 * @param streamReceiver\n          \n          \n            \n                 *         the receiver containing the destination stream variable\n          \n          \n            \n                 * @param filename\n          \n          \n            \n                 *         name of the streamed file\n          \n          \n            \n                 * @param mimeType\n          \n          \n            \n                 *         file mime type\n          \n          \n            \n                 * @param contentLength\n          \n          \n            \n                 *         The length of the request content\n          \n          \n            \n                 * @param node\n          \n          \n            \n                 *         The owner of the stream\n          \n          \n            \n                 * @return true if upload successful, else false\n          \n          \n            \n                 * @throws UploadException\n          \n          \n            \n                 *         Thrown for illegal target node state\n          \n          \n            \n                 */\n          \n          \n            \n                protected boolean handleFileUploadValidationAndData(VaadinSession session,\n          \n      \n    \n    \n  \n\nProtected methods need to have javadocs.", "author": "caalador", "createdAt": "2020-09-29T04:05:55Z", "path": "flow-server/src/main/java/com/vaadin/flow/server/communication/StreamReceiverHandler.java", "diffHunk": "@@ -326,7 +326,7 @@ protected void doHandleXhrFilePost(VaadinSession session,\n         sendUploadResponse(response, success);\n     }\n \n-    private boolean handleFileUploadValidationAndData(VaadinSession session,\n+    protected boolean handleFileUploadValidationAndData(VaadinSession session,", "originalCommit": "0657cc2ace5429b53fa9c86d61d41399ea3ad622", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9ada1c2a7e01ba0c9664e3d573a7fd0817f29f8e", "chunk": "diff --git a/flow-server/src/main/java/com/vaadin/flow/server/communication/StreamReceiverHandler.java b/flow-server/src/main/java/com/vaadin/flow/server/communication/StreamReceiverHandler.java\nindex c46a597b47..a452457032 100644\n--- a/flow-server/src/main/java/com/vaadin/flow/server/communication/StreamReceiverHandler.java\n+++ b/flow-server/src/main/java/com/vaadin/flow/server/communication/StreamReceiverHandler.java\n\n@@ -326,6 +326,28 @@ public class StreamReceiverHandler implements Serializable {\n         sendUploadResponse(response, success);\n     }\n \n+    /**\n+     * Validate that stream target is in a valid state for receiving data\n+     * and send stream to receiver. Handles cleanup and error in reading stream\n+     *\n+     * @param session\n+     *         The session containing the stream variable\n+     * @param inputStream\n+     *         the request content input stream\n+     * @param streamReceiver\n+     *         the receiver containing the destination stream variable\n+     * @param filename\n+     *         name of the streamed file\n+     * @param mimeType\n+     *         file mime type\n+     * @param contentLength\n+     *         The length of the request content\n+     * @param node\n+     *         The owner of the stream\n+     * @return true if upload successful, else false\n+     * @throws UploadException\n+     *         Thrown for illegal target node state\n+     */\n     protected boolean handleFileUploadValidationAndData(VaadinSession session,\n             InputStream inputStream, StreamReceiver streamReceiver,\n             String filename, String mimeType, long contentLength,\n"}}, {"oid": "9ada1c2a7e01ba0c9664e3d573a7fd0817f29f8e", "url": "https://github.com/vaadin/flow/commit/9ada1c2a7e01ba0c9664e3d573a7fd0817f29f8e", "message": "Make handleFileUploadValidationAndData and sendUploadResponse protected\n\nThis allows external code extending this class to reduce copy/pasting these and other private methods.\n\nAdd Javadoc for StreamReceiverHandler for protected `handleFileUploadValidationAndData` method\n\nCo-authored-by: caalador <mikael.grankvist@gmail.com>", "committedDate": "2020-10-07T10:27:53Z", "type": "commit"}, {"oid": "9ada1c2a7e01ba0c9664e3d573a7fd0817f29f8e", "url": "https://github.com/vaadin/flow/commit/9ada1c2a7e01ba0c9664e3d573a7fd0817f29f8e", "message": "Make handleFileUploadValidationAndData and sendUploadResponse protected\n\nThis allows external code extending this class to reduce copy/pasting these and other private methods.\n\nAdd Javadoc for StreamReceiverHandler for protected `handleFileUploadValidationAndData` method\n\nCo-authored-by: caalador <mikael.grankvist@gmail.com>", "committedDate": "2020-10-07T10:27:53Z", "type": "forcePushed"}]}