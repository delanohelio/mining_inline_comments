{"pr_number": 7339, "pr_title": "Add varargs parameter to ShortcutRegistration.listenOn().", "pr_createdAt": "2020-01-13T11:54:03Z", "pr_url": "https://github.com/vaadin/flow/pull/7339", "timeline": [{"oid": "ae8c69dff51c3f2b0ba8e2ae842591f1ce3c100b", "url": "https://github.com/vaadin/flow/commit/ae8c69dff51c3f2b0ba8e2ae842591f1ce3c100b", "message": "Add varargs parameter to ShortcutRegistration.listenOn().", "committedDate": "2020-01-13T11:52:46Z", "type": "commit"}, {"oid": "f6c58475a638b98108d7f216f0da75b667763a04", "url": "https://github.com/vaadin/flow/commit/f6c58475a638b98108d7f216f0da75b667763a04", "message": "Updated Chrome version to 79.", "committedDate": "2020-01-13T13:15:01Z", "type": "commit"}, {"oid": "b0765a962e840b13fbb499968a1b2d3a5adb9c13", "url": "https://github.com/vaadin/flow/commit/b0765a962e840b13fbb499968a1b2d3a5adb9c13", "message": "Fixes after Denis' comments.", "committedDate": "2020-01-15T14:30:58Z", "type": "commit"}, {"oid": "9834b9bd3b8652c7afe305cd4a1726295f09e6b9", "url": "https://github.com/vaadin/flow/commit/9834b9bd3b8652c7afe305cd4a1726295f09e6b9", "message": "Fixes after Denis' comments.", "committedDate": "2020-01-20T09:25:30Z", "type": "commit"}, {"oid": "950d5f311b12aab9eb4a7ae6563ad8e63c0a4ed6", "url": "https://github.com/vaadin/flow/commit/950d5f311b12aab9eb4a7ae6563ad8e63c0a4ed6", "message": "Fixes after Denis' comments.", "committedDate": "2020-01-20T10:12:11Z", "type": "commit"}, {"oid": "9d64e448057d15c9cbe7b63704aeda780fa6bbd1", "url": "https://github.com/vaadin/flow/commit/9d64e448057d15c9cbe7b63704aeda780fa6bbd1", "message": "Fixes after Denis' comments.", "committedDate": "2020-01-22T09:55:47Z", "type": "commit"}, {"oid": "c0704ebb13703d08db59d8b85174cb75ae52b524", "url": "https://github.com/vaadin/flow/commit/c0704ebb13703d08db59d8b85174cb75ae52b524", "message": "Fixes after Denis' comments.", "committedDate": "2020-01-22T11:54:09Z", "type": "commit"}, {"oid": "243b138bb49cd38175f8d6aaa32fe37f04d0fcbd", "url": "https://github.com/vaadin/flow/commit/243b138bb49cd38175f8d6aaa32fe37f04d0fcbd", "message": "Fixes after Denis' comments.", "committedDate": "2020-01-22T12:38:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTU3NDM4OA==", "url": "https://github.com/vaadin/flow/pull/7339#discussion_r369574388", "bodyText": "Do not forget to remove this deprecated code someday.", "author": "vaadin-bot", "createdAt": "2020-01-22T14:00:14Z", "path": "flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java", "diffHunk": "@@ -361,16 +368,36 @@ public void setEventPropagationAllowed(boolean eventPropagationAllowed) {\n     }\n \n     /**\n-     * {@link Component} which owns the shortcuts key event listener.\n+     * {@link Component} which owns the first shortcuts key event listener.\n+     *\n      * @return Component\n+     * @deprecated This component has now multiple owners so this method has been replaced by #getOwners().\n      */\n+    @Deprecated\n     public Component getOwner() {", "originalCommit": "243b138bb49cd38175f8d6aaa32fe37f04d0fcbd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "db93d0020162165d40a7fcb4bd58321f42d59dca", "chunk": "diff --git a/flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java b/flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java\nindex 80522c9385..852a512c2f 100644\n--- a/flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java\n+++ b/flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java\n\n@@ -375,8 +375,9 @@ public class ShortcutRegistration implements Registration, Serializable {\n      */\n     @Deprecated\n     public Component getOwner() {\n-        Objects.requireNonNull(listenOnComponents, \"listenOnComponents must be initialized \" +\n-                \"(by calling listenOn()) before calling this method!\");\n+        if (listenOnComponents == null) {\n+            return null;\n+        }\n         if (listenOnComponents.length <= 0 || listenOnComponents[0] == null) {\n             throw new IllegalStateException(\"listenOnComponents must not be empty!\");\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTU3NDQwOQ==", "url": "https://github.com/vaadin/flow/pull/7339#discussion_r369574409", "bodyText": "com.vaadin.flow.component.ShortcutRegistration.getOwners() may expose internal representation by returning ShortcutRegistration.listenOnComponents", "author": "vaadin-bot", "createdAt": "2020-01-22T14:00:16Z", "path": "flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java", "diffHunk": "@@ -361,16 +368,36 @@ public void setEventPropagationAllowed(boolean eventPropagationAllowed) {\n     }\n \n     /**\n-     * {@link Component} which owns the shortcuts key event listener.\n+     * {@link Component} which owns the first shortcuts key event listener.\n+     *\n      * @return Component\n+     * @deprecated This component has now multiple owners so this method has been replaced by #getOwners().\n      */\n+    @Deprecated\n     public Component getOwner() {\n-        return listenOnComponent;\n+        Objects.requireNonNull(listenOnComponents, \"listenOnComponents must be initialized \" +\n+                \"(by calling listenOn()) before calling this method!\");\n+        if (listenOnComponents.length <= 0 || listenOnComponents[0] == null) {\n+            throw new IllegalStateException(\"listenOnComponents must not be empty!\");\n+        }\n+        return listenOnComponents[0];\n+    }\n+\n+    /**\n+     * The {@link Component}s which own the shortcuts key event listeners.\n+     *\n+     * @return Component[]\n+     */\n+    public Component[] getOwners() {\n+        Objects.requireNonNull(listenOnComponents, \"listenOnComponents must be initialized \" +\n+                \"(by calling listenOn()) before calling this method!\");\n+        return listenOnComponents;", "originalCommit": "243b138bb49cd38175f8d6aaa32fe37f04d0fcbd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "db93d0020162165d40a7fcb4bd58321f42d59dca", "chunk": "diff --git a/flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java b/flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java\nindex 80522c9385..852a512c2f 100644\n--- a/flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java\n+++ b/flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java\n\n@@ -375,8 +375,9 @@ public class ShortcutRegistration implements Registration, Serializable {\n      */\n     @Deprecated\n     public Component getOwner() {\n-        Objects.requireNonNull(listenOnComponents, \"listenOnComponents must be initialized \" +\n-                \"(by calling listenOn()) before calling this method!\");\n+        if (listenOnComponents == null) {\n+            return null;\n+        }\n         if (listenOnComponents.length <= 0 || listenOnComponents[0] == null) {\n             throw new IllegalStateException(\"listenOnComponents must not be empty!\");\n         }\n"}}, {"oid": "db93d0020162165d40a7fcb4bd58321f42d59dca", "url": "https://github.com/vaadin/flow/commit/db93d0020162165d40a7fcb4bd58321f42d59dca", "message": "Fixes after Denis' comments.", "committedDate": "2020-01-27T08:48:20Z", "type": "commit"}]}