{"pr_number": 8990, "pr_title": "Show webpack error on live reload of frontend resources", "pr_createdAt": "2020-09-09T13:36:07Z", "pr_url": "https://github.com/vaadin/flow/pull/8990", "timeline": [{"oid": "e541f1b1df1e0fb019742808ab79d01892948c5f", "url": "https://github.com/vaadin/flow/commit/e541f1b1df1e0fb019742808ab79d01892948c5f", "message": "Live-reload: identify recompile using webpack console output instead of a separate async message", "committedDate": "2020-09-09T11:50:11Z", "type": "commit"}, {"oid": "82b45f9d02f8fcbcbeb5915a56d204c326ce2a58", "url": "https://github.com/vaadin/flow/commit/82b45f9d02f8fcbcbeb5915a56d204c326ce2a58", "message": "IT for live reload and webpack error box", "committedDate": "2020-09-09T15:00:00Z", "type": "commit"}, {"oid": "82b45f9d02f8fcbcbeb5915a56d204c326ce2a58", "url": "https://github.com/vaadin/flow/commit/82b45f9d02f8fcbcbeb5915a56d204c326ce2a58", "message": "IT for live reload and webpack error box", "committedDate": "2020-09-09T15:00:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEyMzY5Ng==", "url": "https://github.com/vaadin/flow/pull/8990#discussion_r486123696", "bodyText": "Should we close the ticket about refactoring watchdog + live reload now ?\nI would open another one (or modify the existing one) to refactor dev mode handler to avoid refer directly to live reload because of exactly the same reason: dev mode handler should not know anything about extra functionality.\nLive reload should be just one of derefenced SPI which is triggered on every reload.", "author": "denis-anisimov", "createdAt": "2020-09-10T07:28:45Z", "path": "flow-server/src/main/java/com/vaadin/flow/server/DevServerWatchDog.java", "diffHunk": "@@ -84,21 +78,6 @@ void stop() {\n         private Logger getLogger() {\n             return LoggerFactory.getLogger(WatchDogServer.class);\n         }\n-\n-        private void enterReloadMessageReadLoop(Socket accept) throws IOException{", "originalCommit": "82b45f9d02f8fcbcbeb5915a56d204c326ce2a58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI1ODA3Mw==", "url": "https://github.com/vaadin/flow/pull/8990#discussion_r486258073", "bodyText": "Let's close that one and open a new one (otherwise would be a total rewrite which makes history confusing as it is already linked from elsewhere).", "author": "joheriks", "createdAt": "2020-09-10T11:18:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEyMzY5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI2NjE3Nw==", "url": "https://github.com/vaadin/flow/pull/8990#discussion_r486266177", "bodyText": "Sure", "author": "denis-anisimov", "createdAt": "2020-09-10T11:34:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEyMzY5Ng=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEyNDg3Mg==", "url": "https://github.com/vaadin/flow/pull/8990#discussion_r486124872", "bodyText": "Is it needed ?\nI think Apache io library should contain something which just writes the file.\nOr Java Files.write", "author": "denis-anisimov", "createdAt": "2020-09-10T07:30:48Z", "path": "flow-tests/test-live-reload/src/main/java/com/vaadin/flow/uitest/ui/FrontendTestUtil.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package com.vaadin.flow.uitest.ui;\n+\n+import java.io.BufferedWriter;\n+import java.io.File;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.io.UncheckedIOException;\n+\n+import com.vaadin.flow.server.VaadinService;\n+import com.vaadin.flow.server.frontend.FrontendUtils;\n+\n+public class FrontendTestUtil {", "originalCommit": "82b45f9d02f8fcbcbeb5915a56d204c326ce2a58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI2MDg3Ng==", "url": "https://github.com/vaadin/flow/pull/8990#discussion_r486260876", "bodyText": "Thanks, that's much shorter.", "author": "joheriks", "createdAt": "2020-09-10T11:23:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEyNDg3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI2MDk4NA==", "url": "https://github.com/vaadin/flow/pull/8990#discussion_r486260984", "bodyText": "Also removed the util class.", "author": "joheriks", "createdAt": "2020-09-10T11:24:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEyNDg3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "1e8da0b664f792093ab00b2458612ec04a21c7fe", "chunk": "diff --git a/flow-tests/test-live-reload/src/main/java/com/vaadin/flow/uitest/ui/FrontendTestUtil.java b/flow-tests/test-live-reload/src/main/java/com/vaadin/flow/uitest/ui/FrontendTestUtil.java\ndeleted file mode 100644\nindex 6352b12c5e..0000000000\n--- a/flow-tests/test-live-reload/src/main/java/com/vaadin/flow/uitest/ui/FrontendTestUtil.java\n+++ /dev/null\n\n@@ -1,34 +0,0 @@\n-package com.vaadin.flow.uitest.ui;\n-\n-import java.io.BufferedWriter;\n-import java.io.File;\n-import java.io.FileWriter;\n-import java.io.IOException;\n-import java.io.UncheckedIOException;\n-\n-import com.vaadin.flow.server.VaadinService;\n-import com.vaadin.flow.server.frontend.FrontendUtils;\n-\n-public class FrontendTestUtil {\n-\n-    public static void writeToFrontendFile(VaadinService vaadinService,\n-            String text) {\n-        final String projectFrontendDir = FrontendUtils.getProjectFrontendDir(\n-                vaadinService.getDeploymentConfiguration());\n-        File styleFile = new File(projectFrontendDir, \"styles.css\");\n-        try {\n-            BufferedWriter out = null;\n-            try {\n-                FileWriter fstream = new FileWriter(styleFile);\n-                out = new BufferedWriter(fstream);\n-                out.write(text);\n-            } finally {\n-                if (out != null) {\n-                    out.close();\n-                }\n-            }\n-        } catch (IOException e) {\n-            throw new UncheckedIOException(e);\n-        }\n-    }\n-}\n"}}, {"oid": "1e8da0b664f792093ab00b2458612ec04a21c7fe", "url": "https://github.com/vaadin/flow/commit/1e8da0b664f792093ab00b2458612ec04a21c7fe", "message": "Removed extra class, use apache FileUtils", "committedDate": "2020-09-10T11:23:28Z", "type": "commit"}]}