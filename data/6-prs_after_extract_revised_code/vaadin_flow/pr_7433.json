{"pr_number": 7433, "pr_title": "CCDM: useDeprecatedV14Bootstrapping=true to disable client-side", "pr_createdAt": "2020-01-27T09:10:39Z", "pr_url": "https://github.com/vaadin/flow/pull/7433", "timeline": [{"oid": "8983cd7396e9426e72274693f8ecb984e1e233a1", "url": "https://github.com/vaadin/flow/commit/8983cd7396e9426e72274693f8ecb984e1e233a1", "message": "Check correctly the version in mocked pnpm and npm to reduce test log", "committedDate": "2020-01-27T09:51:58Z", "type": "forcePushed"}, {"oid": "95e55b797c407f85182983b871a04c85f5735929", "url": "https://github.com/vaadin/flow/commit/95e55b797c407f85182983b871a04c85f5735929", "message": "Check correctly the version in mocked pnpm and npm to reduce test log", "committedDate": "2020-01-27T10:26:32Z", "type": "forcePushed"}, {"oid": "af10d82da5e6bb31f541f7cbfafde7efed1adfc4", "url": "https://github.com/vaadin/flow/commit/af10d82da5e6bb31f541f7cbfafde7efed1adfc4", "message": "fixing tests", "committedDate": "2020-01-28T07:40:38Z", "type": "forcePushed"}, {"oid": "d4d47c43041b1775b097407c2b1e1616c2314a31", "url": "https://github.com/vaadin/flow/commit/d4d47c43041b1775b097407c2b1e1616c2314a31", "message": "CCDM: change useDeprecatedV14Bootstrapping to be true to disable client-side", "committedDate": "2020-01-28T07:41:22Z", "type": "commit"}, {"oid": "ffee11326ccd20712f341cbadf522c1d1a1eb3da", "url": "https://github.com/vaadin/flow/commit/ffee11326ccd20712f341cbadf522c1d1a1eb3da", "message": "Check correctly the version in mocked pnpm and npm to reduce test log", "committedDate": "2020-01-28T07:41:22Z", "type": "commit"}, {"oid": "279f1bae377b9b08f02390c6a1ed90b2a6c78c95", "url": "https://github.com/vaadin/flow/commit/279f1bae377b9b08f02390c6a1ed90b2a6c78c95", "message": "adjust messages", "committedDate": "2020-01-28T07:41:22Z", "type": "commit"}, {"oid": "cc0fc9597c65f5f931042a2b7854ca1f6b7db720", "url": "https://github.com/vaadin/flow/commit/cc0fc9597c65f5f931042a2b7854ca1f6b7db720", "message": "fixing tests", "committedDate": "2020-01-28T07:41:22Z", "type": "forcePushed"}, {"oid": "2743ce1df8a28121772d816175922a99a8e2d94b", "url": "https://github.com/vaadin/flow/commit/2743ce1df8a28121772d816175922a99a8e2d94b", "message": "fixing tests", "committedDate": "2020-01-28T07:53:54Z", "type": "commit"}, {"oid": "2743ce1df8a28121772d816175922a99a8e2d94b", "url": "https://github.com/vaadin/flow/commit/2743ce1df8a28121772d816175922a99a8e2d94b", "message": "fixing tests", "committedDate": "2020-01-28T07:53:54Z", "type": "forcePushed"}, {"oid": "1af0cf17fa572c1e96676b86421fcab5bd63336c", "url": "https://github.com/vaadin/flow/commit/1af0cf17fa572c1e96676b86421fcab5bd63336c", "message": "CCDM: rename variable in TaskUpdateWebpack", "committedDate": "2020-01-28T08:28:35Z", "type": "forcePushed"}, {"oid": "d4f6af024398e103f89b12e0387240fde8310e36", "url": "https://github.com/vaadin/flow/commit/d4f6af024398e103f89b12e0387240fde8310e36", "message": "CCDM: rename variable in TaskUpdateWebpack", "committedDate": "2020-01-28T08:32:50Z", "type": "forcePushed"}, {"oid": "8c03aa0f0b4aad13c99927ea3c1ead0f400c2d60", "url": "https://github.com/vaadin/flow/commit/8c03aa0f0b4aad13c99927ea3c1ead0f400c2d60", "message": "CCDM: rename variable in TaskUpdateWebpack", "committedDate": "2020-01-28T08:34:30Z", "type": "commit"}, {"oid": "8c03aa0f0b4aad13c99927ea3c1ead0f400c2d60", "url": "https://github.com/vaadin/flow/commit/8c03aa0f0b4aad13c99927ea3c1ead0f400c2d60", "message": "CCDM: rename variable in TaskUpdateWebpack", "committedDate": "2020-01-28T08:34:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc0NzgwMg==", "url": "https://github.com/vaadin/flow/pull/7433#discussion_r371747802", "bodyText": "Format string should use %n rather than \\n in com.vaadin.flow.server.DefaultDeploymentConfiguration.checkV14Bootsrapping(boolean)", "author": "vaadin-bot", "createdAt": "2020-01-28T11:29:07Z", "path": "flow-server/src/main/java/com/vaadin/flow/server/DefaultDeploymentConfiguration.java", "diffHunk": "@@ -257,20 +268,22 @@ private void checkProductionMode(boolean loggWarning) {\n     }\n \n     /**\n-     * Log a message if Vaadin is running in useDeprecatedV14Bootstrapping.\n+     * Log a message about the bootstrapping being used.\n      */\n-    private void checkClientSideMode(boolean loggWarning) {\n+    private void checkV14Bootsrapping(boolean loggWarning) {\n         useDeprecatedV14Bootstrapping = getBooleanProperty(\n-                Constants.SERVLET_PARAMETER_CLIENT_SIDE_MODE, true);\n-        if (useDeprecatedV14Bootstrapping && loggWarning && !productionMode) {\n-            String frontendDir = getStringProperty(PARAM_FRONTEND_DIR, System\n-                    .getProperty(PARAM_FRONTEND_DIR, DEFAULT_FRONTEND_DIR));\n-            String indexHTMLMessage = getIndexHTMLMessage(frontendDir);\n-            String entryPointMessage = getEntryPointMessage(frontendDir);\n-            String outputMessage = SEPARATOR\n-                    + \"\\nRunning the application in 'useDeprecatedV14Bootstrapping'.\\n\"\n-                    + indexHTMLMessage + entryPointMessage + SEPARATOR;\n-            getLogger().info(outputMessage);\n+                Constants.SERVLET_PARAMETER_USE_V14_BOOTSTRAP, false);\n+        if (loggWarning) {\n+            if (useDeprecatedV14Bootstrapping) {\n+                getLogger().info(WARNING_V14_BOOTSTRAP);\n+            } else if (!productionMode) {\n+                String frontendDir = getStringProperty(PARAM_FRONTEND_DIR, System\n+                        .getProperty(PARAM_FRONTEND_DIR, DEFAULT_FRONTEND_DIR));\n+                String indexHTMLMessage = getIndexHTMLMessage(frontendDir);\n+                String entryPointMessage = getEntryPointMessage(frontendDir);\n+                getLogger().info(String.format(WARNING_V15_BOOTSTRAP,", "originalCommit": "87f2cb6675f0dd3e4c56a85b2b2d2b3114706dde", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "af198912c45ea0117387461dfec860c83137fe40", "chunk": "diff --git a/flow-server/src/main/java/com/vaadin/flow/server/DefaultDeploymentConfiguration.java b/flow-server/src/main/java/com/vaadin/flow/server/DefaultDeploymentConfiguration.java\nindex 6752398a38..d2209c67c4 100755\n--- a/flow-server/src/main/java/com/vaadin/flow/server/DefaultDeploymentConfiguration.java\n+++ b/flow-server/src/main/java/com/vaadin/flow/server/DefaultDeploymentConfiguration.java\n\n@@ -276,7 +276,7 @@ public class DefaultDeploymentConfiguration\n         if (loggWarning) {\n             if (useDeprecatedV14Bootstrapping) {\n                 getLogger().info(WARNING_V14_BOOTSTRAP);\n-            } else if (!productionMode) {\n+            } else if (!productionMode && getLogger().isInfoEnabled()) {\n                 String frontendDir = getStringProperty(PARAM_FRONTEND_DIR, System\n                         .getProperty(PARAM_FRONTEND_DIR, DEFAULT_FRONTEND_DIR));\n                 String indexHTMLMessage = getIndexHTMLMessage(frontendDir);\n"}}, {"oid": "af198912c45ea0117387461dfec860c83137fe40", "url": "https://github.com/vaadin/flow/commit/af198912c45ea0117387461dfec860c83137fe40", "message": "CCDM: compute correctly DeploymentConfiguration V14Bootstrap flag when multiple instances", "committedDate": "2020-01-28T16:42:11Z", "type": "commit"}, {"oid": "af198912c45ea0117387461dfec860c83137fe40", "url": "https://github.com/vaadin/flow/commit/af198912c45ea0117387461dfec860c83137fe40", "message": "CCDM: compute correctly DeploymentConfiguration V14Bootstrap flag when multiple instances", "committedDate": "2020-01-28T16:42:11Z", "type": "forcePushed"}]}