{"pr_number": 4464, "pr_title": "APPSERV-30 Exception when Adding an Instance to a Deployment Group with an Application Deployed", "pr_createdAt": "2020-01-30T15:37:35Z", "pr_url": "https://github.com/payara/Payara/pull/4464", "timeline": [{"oid": "224bbe2df9f7379d6806aeb04aeaad9ec9f86ae1", "url": "https://github.com/payara/Payara/commit/224bbe2df9f7379d6806aeb04aeaad9ec9f86ae1", "message": "APPSERV-30 Exception when Adding an Instance to a Deployment Group with an Application Deployed", "committedDate": "2020-01-30T15:07:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA1NDg0NA==", "url": "https://github.com/payara/Payara/pull/4464#discussion_r373054844", "bodyText": "It might be personal preference but I think use of continue should be avoided if possible. Here it is easy to avoid by negating the condition and moving the add into the block.", "author": "jbee", "createdAt": "2020-01-30T16:28:47Z", "path": "nucleus/cluster/admin/src/main/java/fish/payara/admin/cluster/AddInstanceToDeploymentGroupCommand.java", "diffHunk": "@@ -164,4 +172,25 @@ public void execute(AdminCommandContext context) {\n         }\n     }\n \n-}\n+    private String getVirtualServers(Server server) {\n+        Config config = domain.getConfigs().getConfigByName(\n+                server.getConfigRef());\n+\n+        StringJoiner virtualServers = new StringJoiner(\",\");\n+        if (config != null) {\n+            HttpService httpService = config.getHttpService();\n+            if (httpService != null) {\n+                List<VirtualServer> hosts = httpService.getVirtualServer();\n+                if (hosts != null) {\n+                    for (VirtualServer host : hosts) {\n+                        if ((\"__asadmin\").equals(host.getId())) {\n+                            continue;", "originalCommit": "224bbe2df9f7379d6806aeb04aeaad9ec9f86ae1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c71a030ed19ef9428bbdb041be2930f571b46bca", "chunk": "diff --git a/nucleus/cluster/admin/src/main/java/fish/payara/admin/cluster/AddInstanceToDeploymentGroupCommand.java b/nucleus/cluster/admin/src/main/java/fish/payara/admin/cluster/AddInstanceToDeploymentGroupCommand.java\nindex 274c7fff81..a03ccf9246 100644\n--- a/nucleus/cluster/admin/src/main/java/fish/payara/admin/cluster/AddInstanceToDeploymentGroupCommand.java\n+++ b/nucleus/cluster/admin/src/main/java/fish/payara/admin/cluster/AddInstanceToDeploymentGroupCommand.java\n\n@@ -183,10 +183,9 @@ public class AddInstanceToDeploymentGroupCommand implements AdminCommand {\n                 List<VirtualServer> hosts = httpService.getVirtualServer();\n                 if (hosts != null) {\n                     for (VirtualServer host : hosts) {\n-                        if ((\"__asadmin\").equals(host.getId())) {\n-                            continue;\n+                        if (!(\"__asadmin\").equals(host.getId())) {\n+                            virtualServers.add(host.getId());\n                         }\n-                        virtualServers.add(host.getId());\n                     }\n                 }\n             }\n"}}, {"oid": "c71a030ed19ef9428bbdb041be2930f571b46bca", "url": "https://github.com/payara/Payara/commit/c71a030ed19ef9428bbdb041be2930f571b46bca", "message": "* Removed the use of continue for the loop\n* Updated the copyright header", "committedDate": "2020-02-07T09:50:30Z", "type": "commit"}]}