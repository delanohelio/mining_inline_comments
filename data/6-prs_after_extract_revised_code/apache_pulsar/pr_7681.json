{"pr_number": 7681, "pr_title": "Added ability to specify runtime for localrunner", "pr_createdAt": "2020-07-28T07:33:53Z", "pr_url": "https://github.com/apache/pulsar/pull/7681", "timeline": [{"oid": "e13c2246cddffb1193c477a2e7dd5ccec7b2db48", "url": "https://github.com/apache/pulsar/commit/e13c2246cddffb1193c477a2e7dd5ccec7b2db48", "message": "Added ability to specify runtime for localrunner", "committedDate": "2020-07-28T07:32:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTczNzkzNg==", "url": "https://github.com/apache/pulsar/pull/7681#discussion_r461737936", "bodyText": "I don't think it makes sense to default to thread runtime especially when users can run functions in python which must be in process runtime.  The default should just be null.  In LocalRunner, if Java is used the default is thread runtime anyways.", "author": "jerrypeng", "createdAt": "2020-07-28T17:07:49Z", "path": "pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdFunctions.java", "diffHunk": "@@ -618,6 +618,8 @@ protected void validateFunctionConfigs(FunctionConfig functionConfig) {\n         protected Integer DEPRECATED_instanceIdOffset = null;\n         @Parameter(names = \"--instance-id-offset\", description = \"Start the instanceIds from this offset\")\n         protected Integer instanceIdOffset = 0;\n+        @Parameter(names = \"--runtime\", description = \"either THREAD or PROCESS. Only applies for Java functions\")\n+        protected String runtime = \"THREAD\";", "originalCommit": "e13c2246cddffb1193c477a2e7dd5ccec7b2db48", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc0NDI4Mg==", "url": "https://github.com/apache/pulsar/pull/7681#discussion_r461744282", "bodyText": "Changed", "author": "srkukarni", "createdAt": "2020-07-28T17:18:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTczNzkzNg=="}], "type": "inlineReview", "revised_code": {"commit": "260b961cd39d02e05e96022c7fd21058ab95ff94", "chunk": "diff --git a/pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdFunctions.java b/pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdFunctions.java\nindex 3dddb09dd4e..e96db1a177c 100644\n--- a/pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdFunctions.java\n+++ b/pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdFunctions.java\n\n@@ -619,7 +619,7 @@ public class CmdFunctions extends CmdBase {\n         @Parameter(names = \"--instance-id-offset\", description = \"Start the instanceIds from this offset\")\n         protected Integer instanceIdOffset = 0;\n         @Parameter(names = \"--runtime\", description = \"either THREAD or PROCESS. Only applies for Java functions\")\n-        protected String runtime = \"THREAD\";\n+        protected String runtime;\n \n         private void mergeArgs() {\n             if (!StringUtils.isBlank(DEPRECATED_stateStorageServiceUrl)) stateStorageServiceUrl = DEPRECATED_stateStorageServiceUrl;\n"}}, {"oid": "260b961cd39d02e05e96022c7fd21058ab95ff94", "url": "https://github.com/apache/pulsar/commit/260b961cd39d02e05e96022c7fd21058ab95ff94", "message": "Address feedback", "committedDate": "2020-07-28T17:18:00Z", "type": "commit"}]}