{"pr_number": 9033, "pr_title": "Add spotbug checks for pulsar-client-api module", "pr_createdAt": "2020-12-23T04:05:11Z", "pr_url": "https://github.com/apache/pulsar/pull/9033", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg3ODI2MQ==", "url": "https://github.com/apache/pulsar/pull/9033#discussion_r547878261", "bodyText": "IMO it is better to add a suppresswarnings here and do not clone the array.\nEven if we are not in an hot path", "author": "eolivelli", "createdAt": "2020-12-23T10:05:37Z", "path": "pulsar-client-api/src/main/java/org/apache/pulsar/client/api/EncryptionKeyInfo.java", "diffHunk": "@@ -39,16 +39,16 @@ public EncryptionKeyInfo() {\n     }\n \n     public EncryptionKeyInfo(byte[] key, Map<String, String> metadata) {\n-        this.key = key;\n+        this.key = key.clone();", "originalCommit": "b7271bfd221f55f3e09a8cb68c459a7c4973bec8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg4MDAzOQ==", "url": "https://github.com/apache/pulsar/pull/9033#discussion_r547880039", "bodyText": "OK, I'll ignore the setter/getter of the array.", "author": "BewareMyPower", "createdAt": "2020-12-23T10:09:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg3ODI2MQ=="}], "type": "inlineReview", "revised_code": {"commit": "864edc9b761dc3fc8084ea668ff84388881d2ed4", "chunk": "diff --git a/pulsar-client-api/src/main/java/org/apache/pulsar/client/api/EncryptionKeyInfo.java b/pulsar-client-api/src/main/java/org/apache/pulsar/client/api/EncryptionKeyInfo.java\nindex c5327e9c3a2..eb34e3b4def 100644\n--- a/pulsar-client-api/src/main/java/org/apache/pulsar/client/api/EncryptionKeyInfo.java\n+++ b/pulsar-client-api/src/main/java/org/apache/pulsar/client/api/EncryptionKeyInfo.java\n\n@@ -39,16 +39,16 @@ public class EncryptionKeyInfo {\n     }\n \n     public EncryptionKeyInfo(byte[] key, Map<String, String> metadata) {\n-        this.key = key.clone();\n+        this.key = key;\n         this.metadata = metadata;\n     }\n \n     public byte[] getKey() {\n-        return key.clone();\n+        return key;\n     }\n \n     public void setKey(byte[] key) {\n-        this.key = key.clone();\n+        this.key = key;\n     }\n \n     public Map<String, String> getMetadata() {\n"}}, {"oid": "864edc9b761dc3fc8084ea668ff84388881d2ed4", "url": "https://github.com/apache/pulsar/commit/864edc9b761dc3fc8084ea668ff84388881d2ed4", "message": "Add spotbug checks for pulsar-client-api module", "committedDate": "2020-12-23T10:30:53Z", "type": "commit"}, {"oid": "864edc9b761dc3fc8084ea668ff84388881d2ed4", "url": "https://github.com/apache/pulsar/commit/864edc9b761dc3fc8084ea668ff84388881d2ed4", "message": "Add spotbug checks for pulsar-client-api module", "committedDate": "2020-12-23T10:30:53Z", "type": "forcePushed"}]}