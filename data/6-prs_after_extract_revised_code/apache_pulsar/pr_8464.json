{"pr_number": 8464, "pr_title": "[Schema] Multi version schema reader implementation.", "pr_createdAt": "2020-11-06T13:14:28Z", "pr_url": "https://github.com/apache/pulsar/pull/8464", "timeline": [{"oid": "c5843e0622336045b0f6df00a799b7ddf08c727a", "url": "https://github.com/apache/pulsar/commit/c5843e0622336045b0f6df00a799b7ddf08c727a", "message": "Avro schema support user define reader and writer", "committedDate": "2020-11-06T13:09:34Z", "type": "commit"}, {"oid": "19f7b8acb3f7431410618bd9d8f19817c2d759ab", "url": "https://github.com/apache/pulsar/commit/19f7b8acb3f7431410618bd9d8f19817c2d759ab", "message": "Merge remote-tracking branch 'apache/master' into congbobo184_support_avro_schema_reader_writer_on_schemadeinition", "committedDate": "2020-11-06T13:14:57Z", "type": "commit"}, {"oid": "04953b8945424ecf09d29e04dd1f7d173cedf271", "url": "https://github.com/apache/pulsar/commit/04953b8945424ecf09d29e04dd1f7d173cedf271", "message": "Modity the code style", "committedDate": "2020-11-06T13:22:07Z", "type": "commit"}, {"oid": "c3974bc6affbe071ce31874aad4f5e553fa514cd", "url": "https://github.com/apache/pulsar/commit/c3974bc6affbe071ce31874aad4f5e553fa514cd", "message": "Merge remote-tracking branch 'apache/master' into congbobo184_support_avro_schema_reader_writer_on_schemadeinition", "committedDate": "2020-11-10T07:01:19Z", "type": "commit"}, {"oid": "aa53c459bcd71a81f091b4df46432147c36b5795", "url": "https://github.com/apache/pulsar/commit/aa53c459bcd71a81f091b4df46432147c36b5795", "message": "Multi version schema reader implementation.", "committedDate": "2020-11-10T07:13:44Z", "type": "commit"}, {"oid": "7d20c87773050a0e786970d00d2d5306c6835928", "url": "https://github.com/apache/pulsar/commit/7d20c87773050a0e786970d00d2d5306c6835928", "message": "Modify the class name", "committedDate": "2020-11-10T10:01:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE0NDA5NA==", "url": "https://github.com/apache/pulsar/pull/8464#discussion_r521144094", "bodyText": "You can't just remove methods from a public API because it will cause code incompatibility issues.", "author": "sijie", "createdAt": "2020-11-11T06:43:20Z", "path": "pulsar-client-api/src/main/java/org/apache/pulsar/client/api/schema/GenericSchema.java", "diffHunk": "@@ -40,17 +39,4 @@\n      * @return generic record builder\n      */\n     GenericRecordBuilder newRecordBuilder();\n-\n-\n-    static GenericSchema of(SchemaInfo schemaInfo) {", "originalCommit": "7d20c87773050a0e786970d00d2d5306c6835928", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE0OTU3NA==", "url": "https://github.com/apache/pulsar/pull/8464#discussion_r521149574", "bodyText": "OK, I will recover it", "author": "congbobo184", "createdAt": "2020-11-11T06:51:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE0NDA5NA=="}], "type": "inlineReview", "revised_code": {"commit": "439907f8be51db0094e82ceac13990da3cae6bfc", "chunk": "diff --git a/pulsar-client-api/src/main/java/org/apache/pulsar/client/api/schema/GenericSchema.java b/pulsar-client-api/src/main/java/org/apache/pulsar/client/api/schema/GenericSchema.java\nindex 429558cd90e..4fe293bd171 100644\n--- a/pulsar-client-api/src/main/java/org/apache/pulsar/client/api/schema/GenericSchema.java\n+++ b/pulsar-client-api/src/main/java/org/apache/pulsar/client/api/schema/GenericSchema.java\n\n@@ -39,4 +40,17 @@ public interface GenericSchema<T extends GenericRecord> extends Schema<T> {\n      * @return generic record builder\n      */\n     GenericRecordBuilder newRecordBuilder();\n+\n+\n+    static GenericSchema of(SchemaInfo schemaInfo) {\n+        throw new RuntimeException(\"GenericSchema interface implementation class must rewrite this method !\");\n+    }\n+\n+    static GenericSchema of(SchemaInfo schemaInfo,\n+                            boolean useProvidedSchemaAsReaderSchema) {\n+        throw new RuntimeException(\"GenericSchema interface implementation class must rewrite this method !\");\n+    }\n+\n+\n+\n }\n"}}, {"oid": "439907f8be51db0094e82ceac13990da3cae6bfc", "url": "https://github.com/apache/pulsar/commit/439907f8be51db0094e82ceac13990da3cae6bfc", "message": "Recover the genericSchema interface", "committedDate": "2020-11-11T08:17:52Z", "type": "commit"}]}