{"pr_number": 8432, "pr_title": "[Issue 8382][Pulsar Function] Enable e2e encryption for Pulsar Function", "pr_createdAt": "2020-11-02T18:29:05Z", "pr_url": "https://github.com/apache/pulsar/pull/8432", "timeline": [{"oid": "996a761ff08d03706f7e8e2d877fd888980ec233", "url": "https://github.com/apache/pulsar/commit/996a761ff08d03706f7e8e2d877fd888980ec233", "message": "add e2d encryption support for pulsar functions", "committedDate": "2020-10-30T02:05:03Z", "type": "commit"}, {"oid": "63e012c27d9514d48ffea463efa0dc5c7c211df0", "url": "https://github.com/apache/pulsar/commit/63e012c27d9514d48ffea463efa0dc5c7c211df0", "message": "setup provider in PulsarSource/Sink", "committedDate": "2020-11-02T18:14:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4MTYxMg==", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516381612", "bodyText": "Please add license header for new file.", "author": "wolfstudy", "createdAt": "2020-11-03T01:21:20Z", "path": "pulsar-common/src/main/java/org/apache/pulsar/common/functions/CryptoConfig.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package org.apache.pulsar.common.functions;", "originalCommit": "63e012c27d9514d48ffea463efa0dc5c7c211df0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fca6352f13c0ce1e549ca935892e73bae45bee21", "chunk": "diff --git a/pulsar-common/src/main/java/org/apache/pulsar/common/functions/CryptoConfig.java b/pulsar-common/src/main/java/org/apache/pulsar/common/functions/CryptoConfig.java\nindex f40edb99e61..cfcfd0d434b 100644\n--- a/pulsar-common/src/main/java/org/apache/pulsar/common/functions/CryptoConfig.java\n+++ b/pulsar-common/src/main/java/org/apache/pulsar/common/functions/CryptoConfig.java\n\n@@ -1,5 +1,23 @@\n-package org.apache.pulsar.common.functions;\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n \n+package org.apache.pulsar.common.functions;\n \n import java.util.Map;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4MjA0NQ==", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516382045", "bodyText": "Please add the license header for new file.", "author": "wolfstudy", "createdAt": "2020-11-03T01:23:14Z", "path": "pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package org.apache.pulsar.functions.api.examples;", "originalCommit": "63e012c27d9514d48ffea463efa0dc5c7c211df0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fca6352f13c0ce1e549ca935892e73bae45bee21", "chunk": "diff --git a/pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java b/pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java\nindex 89139140224..d55e3fff6a2 100644\n--- a/pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java\n+++ b/pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java\n\n@@ -1,3 +1,22 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n package org.apache.pulsar.functions.api.examples;\n \n import lombok.Data;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4MjM4OQ==", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516382389", "bodyText": "Please add license header fr new file.", "author": "wolfstudy", "createdAt": "2020-11-03T01:24:33Z", "path": "pulsar-functions/utils/src/main/java/org/apache/pulsar/functions/utils/CryptoUtils.java", "diffHunk": "@@ -0,0 +1,135 @@\n+package org.apache.pulsar.functions.utils;", "originalCommit": "63e012c27d9514d48ffea463efa0dc5c7c211df0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fca6352f13c0ce1e549ca935892e73bae45bee21", "chunk": "diff --git a/pulsar-functions/utils/src/main/java/org/apache/pulsar/functions/utils/CryptoUtils.java b/pulsar-functions/utils/src/main/java/org/apache/pulsar/functions/utils/CryptoUtils.java\nindex 9dd78beaa30..1025113394b 100644\n--- a/pulsar-functions/utils/src/main/java/org/apache/pulsar/functions/utils/CryptoUtils.java\n+++ b/pulsar-functions/utils/src/main/java/org/apache/pulsar/functions/utils/CryptoUtils.java\n\n@@ -1,3 +1,22 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n package org.apache.pulsar.functions.utils;\n \n import java.lang.reflect.Constructor;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4Mjg0Ng==", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516382846", "bodyText": "Maybe we need to add comments to the newly created class, otherwise the check of ci may fail.", "author": "wolfstudy", "createdAt": "2020-11-03T01:26:25Z", "path": "pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package org.apache.pulsar.functions.api.examples;\n+\n+import lombok.Data;\n+import org.apache.pulsar.client.api.CryptoKeyReader;\n+import org.apache.pulsar.client.api.EncryptionKeyInfo;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.Map;\n+\n+@Data", "originalCommit": "63e012c27d9514d48ffea463efa0dc5c7c211df0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fca6352f13c0ce1e549ca935892e73bae45bee21", "chunk": "diff --git a/pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java b/pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java\nindex 89139140224..d55e3fff6a2 100644\n--- a/pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java\n+++ b/pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java\n\n@@ -1,3 +1,22 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n package org.apache.pulsar.functions.api.examples;\n \n import lombok.Data;\n"}}, {"oid": "fca6352f13c0ce1e549ca935892e73bae45bee21", "url": "https://github.com/apache/pulsar/commit/fca6352f13c0ce1e549ca935892e73bae45bee21", "message": "fix header and unit test", "committedDate": "2020-11-03T19:33:57Z", "type": "commit"}, {"oid": "b758265f07f9dac4da8c5573fa656f66dbe4afa1", "url": "https://github.com/apache/pulsar/commit/b758265f07f9dac4da8c5573fa656f66dbe4afa1", "message": "fix unit test", "committedDate": "2020-11-04T22:57:07Z", "type": "commit"}]}