{"pr_number": 8876, "pr_title": "Add integration tests for package management service", "pr_createdAt": "2020-12-09T08:12:37Z", "pr_url": "https://github.com/apache/pulsar/pull/8876", "timeline": [{"oid": "d2301bcb8f31cfe9f89e25c803566f5341b642ff", "url": "https://github.com/apache/pulsar/commit/d2301bcb8f31cfe9f89e25c803566f5341b642ff", "message": "Add integration tests for package management service\n---\n\nMaster Issue: #8676\n\n*Motivation*\n\nAdd integration tests for testing the whole package management service.\n\n*Modifications*\n\n- Add integration tests\n- Fix some issue when startup the package management service", "committedDate": "2020-12-09T08:36:09Z", "type": "forcePushed"}, {"oid": "ebc394bb8360e3d145d10c8ea503dd7b5acb931b", "url": "https://github.com/apache/pulsar/commit/ebc394bb8360e3d145d10c8ea503dd7b5acb931b", "message": "Add integration tests for package management service\n---\n\nMaster Issue: #8676\n\n*Motivation*\n\nAdd integration tests for testing the whole package management service.\n\n*Modifications*\n\n- Add integration tests\n- Fix some issue when startup the package management service", "committedDate": "2020-12-09T08:38:32Z", "type": "commit"}, {"oid": "ebc394bb8360e3d145d10c8ea503dd7b5acb931b", "url": "https://github.com/apache/pulsar/commit/ebc394bb8360e3d145d10c8ea503dd7b5acb931b", "message": "Add integration tests for package management service\n---\n\nMaster Issue: #8676\n\n*Motivation*\n\nAdd integration tests for testing the whole package management service.\n\n*Modifications*\n\n- Add integration tests\n- Fix some issue when startup the package management service", "committedDate": "2020-12-09T08:38:32Z", "type": "forcePushed"}, {"oid": "cfecdf584a36eb8ba0766ef184789c01d8eb4af7", "url": "https://github.com/apache/pulsar/commit/cfecdf584a36eb8ba0766ef184789c01d8eb4af7", "message": "Add the tests into the suite", "committedDate": "2020-12-09T08:58:54Z", "type": "commit"}, {"oid": "c1bfe4c3cf8b5b3f11559d166787eab2f22f5a11", "url": "https://github.com/apache/pulsar/commit/c1bfe4c3cf8b5b3f11559d166787eab2f22f5a11", "message": "Disable the failure tests", "committedDate": "2020-12-09T12:37:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMxMTUzOA==", "url": "https://github.com/apache/pulsar/pull/8876#discussion_r539311538", "bodyText": "what about naming this methodgetPackagesReplicas()?", "author": "eolivelli", "createdAt": "2020-12-09T13:37:11Z", "path": "pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java", "diffHunk": "@@ -35,15 +35,15 @@\n     }\n \n     int getNumReplicas() {", "originalCommit": "c1bfe4c3cf8b5b3f11559d166787eab2f22f5a11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMzNjQ3NQ==", "url": "https://github.com/apache/pulsar/pull/8876#discussion_r539336475", "bodyText": "Thank you. I will fix it.", "author": "zymap", "createdAt": "2020-12-09T14:10:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMxMTUzOA=="}], "type": "inlineReview", "revised_code": {"commit": "503ff74d2e5ffba528e63ecc8f4a0c29750e3d73", "chunk": "diff --git a/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java b/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java\nindex 5adc49814b0..226b80abeaa 100644\n--- a/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java\n+++ b/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java\n\n@@ -34,15 +34,15 @@ public class BookKeeperPackagesStorageConfiguration implements PackagesStorageCo\n         this.configuration = configuration;\n     }\n \n-    int getNumReplicas() {\n+    int getPackagesReplicas() {\n         return Integer.parseInt(getProperty(\"packagesReplicas\"));\n     }\n \n-    String getZkServers() {\n+    String getZookeeperServers() {\n         return getProperty(\"zookeeperServers\");\n     }\n \n-    String getLedgersRootPath() {\n+    String getPackagesManagementLedgerRootPath() {\n         return getProperty(\"packagesManagementLedgerRootPath\");\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMxMTc4Mg==", "url": "https://github.com/apache/pulsar/pull/8876#discussion_r539311782", "bodyText": "what about naming this method  getZookeeperServers() `?", "author": "eolivelli", "createdAt": "2020-12-09T13:37:31Z", "path": "pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java", "diffHunk": "@@ -35,15 +35,15 @@\n     }\n \n     int getNumReplicas() {\n-        return Integer.parseInt(getProperty(\"numReplicas\"));\n+        return Integer.parseInt(getProperty(\"packagesReplicas\"));\n     }\n \n     String getZkServers() {\n-        return getProperty(\"zkServers\");\n+        return getProperty(\"zookeeperServers\");", "originalCommit": "c1bfe4c3cf8b5b3f11559d166787eab2f22f5a11", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "503ff74d2e5ffba528e63ecc8f4a0c29750e3d73", "chunk": "diff --git a/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java b/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java\nindex 5adc49814b0..226b80abeaa 100644\n--- a/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java\n+++ b/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java\n\n@@ -34,15 +34,15 @@ public class BookKeeperPackagesStorageConfiguration implements PackagesStorageCo\n         this.configuration = configuration;\n     }\n \n-    int getNumReplicas() {\n+    int getPackagesReplicas() {\n         return Integer.parseInt(getProperty(\"packagesReplicas\"));\n     }\n \n-    String getZkServers() {\n+    String getZookeeperServers() {\n         return getProperty(\"zookeeperServers\");\n     }\n \n-    String getLedgersRootPath() {\n+    String getPackagesManagementLedgerRootPath() {\n         return getProperty(\"packagesManagementLedgerRootPath\");\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMxMjEwNg==", "url": "https://github.com/apache/pulsar/pull/8876#discussion_r539312106", "bodyText": "what about naming this method  getPackagesManagementLedgerRootPath()?", "author": "eolivelli", "createdAt": "2020-12-09T13:37:57Z", "path": "pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java", "diffHunk": "@@ -35,15 +35,15 @@\n     }\n \n     int getNumReplicas() {\n-        return Integer.parseInt(getProperty(\"numReplicas\"));\n+        return Integer.parseInt(getProperty(\"packagesReplicas\"));\n     }\n \n     String getZkServers() {\n-        return getProperty(\"zkServers\");\n+        return getProperty(\"zookeeperServers\");\n     }\n \n     String getLedgersRootPath() {\n-        return getProperty(\"ledgerRootPath\");\n+        return getProperty(\"packagesManagementLedgerRootPath\");", "originalCommit": "c1bfe4c3cf8b5b3f11559d166787eab2f22f5a11", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "503ff74d2e5ffba528e63ecc8f4a0c29750e3d73", "chunk": "diff --git a/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java b/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java\nindex 5adc49814b0..226b80abeaa 100644\n--- a/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java\n+++ b/pulsar-package-management/bookkeeper-storage/src/main/java/org/apache/pulsar/packages/management/storage/bookkeeper/BookKeeperPackagesStorageConfiguration.java\n\n@@ -34,15 +34,15 @@ public class BookKeeperPackagesStorageConfiguration implements PackagesStorageCo\n         this.configuration = configuration;\n     }\n \n-    int getNumReplicas() {\n+    int getPackagesReplicas() {\n         return Integer.parseInt(getProperty(\"packagesReplicas\"));\n     }\n \n-    String getZkServers() {\n+    String getZookeeperServers() {\n         return getProperty(\"zookeeperServers\");\n     }\n \n-    String getLedgersRootPath() {\n+    String getPackagesManagementLedgerRootPath() {\n         return getProperty(\"packagesManagementLedgerRootPath\");\n     }\n \n"}}, {"oid": "503ff74d2e5ffba528e63ecc8f4a0c29750e3d73", "url": "https://github.com/apache/pulsar/commit/503ff74d2e5ffba528e63ecc8f4a0c29750e3d73", "message": "Address comments", "committedDate": "2020-12-10T01:45:03Z", "type": "commit"}, {"oid": "c21e14e0149f867ee65dcf59d52494923904a00e", "url": "https://github.com/apache/pulsar/commit/c21e14e0149f867ee65dcf59d52494923904a00e", "message": "Build the latest docker image to run the integration tests", "committedDate": "2020-12-10T02:52:56Z", "type": "commit"}, {"oid": "aee377767347731b64bbe328e9d3974246732b00", "url": "https://github.com/apache/pulsar/commit/aee377767347731b64bbe328e9d3974246732b00", "message": "Fix the unit tests", "committedDate": "2020-12-10T06:13:14Z", "type": "commit"}]}