{"pr_number": 7721, "pr_title": "Added ability to specify producer config for functions and sources", "pr_createdAt": "2020-08-02T17:52:42Z", "pr_url": "https://github.com/apache/pulsar/pull/7721", "timeline": [{"oid": "f0c5f27c79801cb3dda2df43fc9688f60fc7c06a", "url": "https://github.com/apache/pulsar/commit/f0c5f27c79801cb3dda2df43fc9688f60fc7c06a", "message": "Added ability to specify producer config for functions and sources", "committedDate": "2020-08-02T17:51:16Z", "type": "commit"}, {"oid": "3bb89f5741a8d08463aeeb32bc9782688421cfc9", "url": "https://github.com/apache/pulsar/commit/3bb89f5741a8d08463aeeb32bc9782688421cfc9", "message": "Fixed test", "committedDate": "2020-08-02T17:56:15Z", "type": "commit"}, {"oid": "f48385426ee54ead73d1af408664c99351cea045", "url": "https://github.com/apache/pulsar/commit/f48385426ee54ead73d1af408664c99351cea045", "message": "Fix test", "committedDate": "2020-08-02T17:57:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1NjA5Mg==", "url": "https://github.com/apache/pulsar/pull/7721#discussion_r464556092", "bodyText": "Since the variable is Integer, shouldn't we check for != null ?", "author": "merlimat", "createdAt": "2020-08-03T17:29:09Z", "path": "pulsar-functions/instance/src/main/java/org/apache/pulsar/functions/instance/ContextImpl.java", "diffHunk": "@@ -108,6 +108,14 @@ public ContextImpl(InstanceConfig config, Logger logger, PulsarClient client,\n \n         this.producerBuilder = (ProducerBuilderImpl<?>) client.newProducer().blockIfQueueFull(true).enableBatching(true)\n                 .batchingMaxPublishDelay(1, TimeUnit.MILLISECONDS);\n+        if (config.getFunctionDetails().getSink().getProducerSpec() != null) {\n+            if (config.getFunctionDetails().getSink().getProducerSpec().getMaxPendingMessages() != 0) {", "originalCommit": "f48385426ee54ead73d1af408664c99351cea045", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc1NjE0Ng==", "url": "https://github.com/apache/pulsar/pull/7721#discussion_r464756146", "bodyText": "We are checking for null in getProducerSpec.\nThe getFunctionDetails is a protobuf and the variable that it returns is an integer. So null checking is not needed", "author": "srkukarni", "createdAt": "2020-08-04T02:05:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1NjA5Mg=="}], "type": "inlineReview", "revised_code": null}, {"oid": "82823b45ebe154aa93d04662fc5151886560d4ff", "url": "https://github.com/apache/pulsar/commit/82823b45ebe154aa93d04662fc5151886560d4ff", "message": "Add generated function proto", "committedDate": "2020-08-04T02:18:51Z", "type": "commit"}, {"oid": "6a0b6dab1445fc1cecb567f3340ac546b14606e9", "url": "https://github.com/apache/pulsar/commit/6a0b6dab1445fc1cecb567f3340ac546b14606e9", "message": "Add header", "committedDate": "2020-08-04T02:42:04Z", "type": "commit"}, {"oid": "c2980d82a348f67898bb6958bf90b3ce97186dd3", "url": "https://github.com/apache/pulsar/commit/c2980d82a348f67898bb6958bf90b3ce97186dd3", "message": "Address comments", "committedDate": "2020-08-04T15:47:08Z", "type": "commit"}, {"oid": "287480a51c607c9d3f0786db37f3ab5e5660c335", "url": "https://github.com/apache/pulsar/commit/287480a51c607c9d3f0786db37f3ab5e5660c335", "message": "Merge branch 'master' into producer_config", "committedDate": "2020-08-04T18:33:58Z", "type": "commit"}, {"oid": "5dcfda18c2402d879756f9d7bf47713e26e4bdc1", "url": "https://github.com/apache/pulsar/commit/5dcfda18c2402d879756f9d7bf47713e26e4bdc1", "message": "Merge branch 'master' into producer_config", "committedDate": "2020-08-04T22:32:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQxOTQ5Ng==", "url": "https://github.com/apache/pulsar/pull/7721#discussion_r465419496", "bodyText": "nit lets not use wild cards.  Makes debugging harder", "author": "jerrypeng", "createdAt": "2020-08-05T01:30:02Z", "path": "pulsar-functions/utils/src/test/java/org/apache/pulsar/functions/utils/FunctionConfigUtilsTest.java", "diffHunk": "@@ -20,10 +20,7 @@\n \n import com.google.gson.Gson;\n import org.apache.pulsar.client.impl.schema.JSONSchema;\n-import org.apache.pulsar.common.functions.ConsumerConfig;\n-import org.apache.pulsar.common.functions.FunctionConfig;\n-import org.apache.pulsar.common.functions.Resources;\n-import org.apache.pulsar.common.functions.WindowConfig;\n+import org.apache.pulsar.common.functions.*;", "originalCommit": "5dcfda18c2402d879756f9d7bf47713e26e4bdc1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}