{"pr_number": 2806, "pr_title": "SONARJAVA-3292 Expose as API utility methods resolving expression as constant", "pr_createdAt": "2020-02-11T14:46:49Z", "pr_url": "https://github.com/SonarSource/sonar-java/pull/2806", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzcwOTQzOA==", "url": "https://github.com/SonarSource/sonar-java/pull/2806#discussion_r377709438", "bodyText": "I think this lacks the @checkfornull annotation", "author": "benzonico", "createdAt": "2020-02-11T15:30:41Z", "path": "java-frontend/src/main/java/org/sonar/java/model/ExpressionUtils.java", "diffHunk": "@@ -151,4 +153,72 @@ public static boolean isThis(ExpressionTree expression) {\n     return newExpression.is(Tree.Kind.IDENTIFIER) && \"this\".equals(((IdentifierTree) newExpression).name());\n   }\n \n+  public static Object resolveAsConstant(ExpressionTree tree) {", "originalCommit": "5eb9f87a066c5efffd55a81fa80a5f4fbd17802b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a3223d5a43e33de2ba9af83584507c211e711140", "chunk": "diff --git a/java-frontend/src/main/java/org/sonar/java/model/ExpressionUtils.java b/java-frontend/src/main/java/org/sonar/java/model/ExpressionUtils.java\nindex b3b7ac93c..a02677aed 100644\n--- a/java-frontend/src/main/java/org/sonar/java/model/ExpressionUtils.java\n+++ b/java-frontend/src/main/java/org/sonar/java/model/ExpressionUtils.java\n\n@@ -153,6 +153,7 @@ public final class ExpressionUtils {\n     return newExpression.is(Tree.Kind.IDENTIFIER) && \"this\".equals(((IdentifierTree) newExpression).name());\n   }\n \n+  @CheckForNull\n   public static Object resolveAsConstant(ExpressionTree tree) {\n     ExpressionTree expression = tree;\n     while (expression.is(Tree.Kind.PARENTHESIZED_EXPRESSION)) {\n"}}, {"oid": "a3223d5a43e33de2ba9af83584507c211e711140", "url": "https://github.com/SonarSource/sonar-java/commit/a3223d5a43e33de2ba9af83584507c211e711140", "message": "SONARJAVA-3292 Extends API of ExpressionTree", "committedDate": "2020-02-11T16:22:40Z", "type": "commit"}, {"oid": "6111b76be2c4c64eeae5cb7a7da5332e255c258b", "url": "https://github.com/SonarSource/sonar-java/commit/6111b76be2c4c64eeae5cb7a7da5332e255c258b", "message": "SONARJAVA-3292 Deprecate ConstantUtils and migrate its implementation", "committedDate": "2020-02-11T16:22:40Z", "type": "commit"}, {"oid": "2d77b4d80c140849e51d1bf0f890055099c6bbd4", "url": "https://github.com/SonarSource/sonar-java/commit/2d77b4d80c140849e51d1bf0f890055099c6bbd4", "message": "SONARJAVA-3292 Test ExpressionTree evaluation in frontend", "committedDate": "2020-02-11T16:22:40Z", "type": "commit"}, {"oid": "2d77b4d80c140849e51d1bf0f890055099c6bbd4", "url": "https://github.com/SonarSource/sonar-java/commit/2d77b4d80c140849e51d1bf0f890055099c6bbd4", "message": "SONARJAVA-3292 Test ExpressionTree evaluation in frontend", "committedDate": "2020-02-11T16:22:40Z", "type": "forcePushed"}, {"oid": "d99a3930126cee86884788ef29039865ac9810f6", "url": "https://github.com/SonarSource/sonar-java/commit/d99a3930126cee86884788ef29039865ac9810f6", "message": "SONARJAVA-3292 Update plugin documentation regarding API change", "committedDate": "2020-02-11T17:03:28Z", "type": "commit"}]}