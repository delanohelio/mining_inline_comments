{"pr_number": 2454, "pr_title": "testutils: Partially revert 2448 prevent setup and creation of the log", "pr_createdAt": "2020-06-19T02:40:36Z", "pr_url": "https://github.com/zaproxy/zap-extensions/pull/2454", "timeline": [{"oid": "3ec03c7a58fa7ec54bf605f829646f21c918c783", "url": "https://github.com/zaproxy/zap-extensions/commit/3ec03c7a58fa7ec54bf605f829646f21c918c783", "message": "testutils: Partially revert 2448 prevent setup and creation of the log\n\nOtherwise on some platforms (Win10) zap.log might seem to be in use.\n\nSigned-off-by: kingthorin <kingthorin@users.noreply.github.com>", "committedDate": "2020-06-19T13:55:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1NTk2MA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2454#discussion_r442855960", "bodyText": "Better as?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Path xmlDir = Files.createDirectory(tempDir.resolve(\"install/xml\"));\n          \n          \n            \n                    Path xmlDir = Files.createDirectory(tempDir.resolve(zapInstallDir + \"/xml\"));", "author": "kingthorin", "createdAt": "2020-06-19T13:57:19Z", "path": "testutils/src/main/java/org/zaproxy/zap/testutils/TestUtils.java", "diffHunk": "@@ -121,6 +121,8 @@\n     public static void beforeClass() throws Exception {\n         zapInstallDir =\n                 Files.createDirectory(tempDir.resolve(\"install\")).toAbsolutePath().toString();\n+        Path xmlDir = Files.createDirectory(tempDir.resolve(\"install/xml\"));", "originalCommit": "3ec03c7a58fa7ec54bf605f829646f21c918c783", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1ODAxOA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2454#discussion_r442858018", "bodyText": "Can restore Path installDir = Files.createDirectory(tempDir.resolve(\"install\")); too, e.g.:\nPath installDir = Files.createDirectory(tempDir.resolve(\"install\"));\nPath xmlDir = Files.createDirectory(installDir.resolve(\"xml\"));\nFiles.createFile(xmlDir.resolve(\"log4j.properties\"));\n\nzapInstallDir = installDir.toAbsolutePath().toString();", "author": "thc202", "createdAt": "2020-06-19T14:00:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1NTk2MA=="}], "type": "inlineReview", "revised_code": {"commit": "a91f22c0aa015462923c8433df3dbbce62eeffbb", "chunk": "diff --git a/testutils/src/main/java/org/zaproxy/zap/testutils/TestUtils.java b/testutils/src/main/java/org/zaproxy/zap/testutils/TestUtils.java\nindex a41987dc9..7f539fada 100644\n--- a/testutils/src/main/java/org/zaproxy/zap/testutils/TestUtils.java\n+++ b/testutils/src/main/java/org/zaproxy/zap/testutils/TestUtils.java\n\n@@ -119,10 +119,11 @@ public abstract class TestUtils {\n \n     @BeforeAll\n     public static void beforeClass() throws Exception {\n-        zapInstallDir =\n-                Files.createDirectory(tempDir.resolve(\"install\")).toAbsolutePath().toString();\n-        Path xmlDir = Files.createDirectory(tempDir.resolve(\"install/xml\"));\n+        Path installDir = Files.createDirectory(tempDir.resolve(\"install\"));\n+        Path xmlDir = Files.createDirectory(installDir.resolve(\"xml\"));\n         Files.createFile(xmlDir.resolve(\"log4j.properties\"));\n+\n+        zapInstallDir = installDir.toAbsolutePath().toString();\n         zapHomeDir = Files.createDirectory(tempDir.resolve(\"home\")).toAbsolutePath().toString();\n     }\n \n"}}, {"oid": "a91f22c0aa015462923c8433df3dbbce62eeffbb", "url": "https://github.com/zaproxy/zap-extensions/commit/a91f22c0aa015462923c8433df3dbbce62eeffbb", "message": "testutils: Partially revert 2448 prevent setup and creation of the log\n\nOtherwise on some platforms (Win10) zap.log might seem to be in use.\n\nSigned-off-by: kingthorin <kingthorin@users.noreply.github.com>", "committedDate": "2020-06-19T14:10:21Z", "type": "commit"}, {"oid": "a91f22c0aa015462923c8433df3dbbce62eeffbb", "url": "https://github.com/zaproxy/zap-extensions/commit/a91f22c0aa015462923c8433df3dbbce62eeffbb", "message": "testutils: Partially revert 2448 prevent setup and creation of the log\n\nOtherwise on some platforms (Win10) zap.log might seem to be in use.\n\nSigned-off-by: kingthorin <kingthorin@users.noreply.github.com>", "committedDate": "2020-06-19T14:10:21Z", "type": "forcePushed"}]}