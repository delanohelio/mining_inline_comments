{"pr_number": 2663, "pr_title": "SOAP: Support ValueGenerator", "pr_createdAt": "2020-12-18T12:28:05Z", "pr_url": "https://github.com/zaproxy/zap-extensions/pull/2663", "timeline": [{"oid": "a29fdfa96fa946f5dde8c64322c813bef540f191", "url": "https://github.com/zaproxy/zap-extensions/commit/a29fdfa96fa946f5dde8c64322c813bef540f191", "message": "SOAP: Support ValueGenerator (Issue 3345)\n\nSigned-off-by: ricekot <ricekot@gmail.com>", "committedDate": "2020-12-18T13:24:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg5MjAwOQ==", "url": "https://github.com/zaproxy/zap-extensions/pull/2663#discussion_r547892009", "bodyText": "Map\nThe type arguments could be removed.", "author": "thc202", "createdAt": "2020-12-23T10:37:09Z", "path": "addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java", "diffHunk": "@@ -429,6 +442,37 @@ private void recordOperation(int wsdlID, BindingOperation bindOp) {\n             formParams.put(\"xpath:/\" + path, value);\n             return formParams;\n         }\n+\n+        ValueGenerator coreValGen = null;\n+        try {\n+            coreValGen =\n+                    Control.getSingleton()\n+                            .getExtensionLoader()\n+                            .getExtension(ExtensionSpider.class)\n+                            .getValueGenerator();\n+        } catch (NullPointerException e) {\n+            LOG.debug(e.getMessage());\n+        }\n+\n+        if (coreValGen != null) {\n+            HashMap<String, String> fieldAttributes = new HashMap<String, String>();", "originalCommit": "a29fdfa96fa946f5dde8c64322c813bef540f191", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4bbc228c3e17ebf0e13ea1ceb56a1ba5d9887701", "chunk": "diff --git a/addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java b/addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java\nindex 677c736da..4777b6f2c 100644\n--- a/addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java\n+++ b/addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java\n\n@@ -443,34 +445,29 @@ public class WSDLCustomParser {\n             return formParams;\n         }\n \n-        ValueGenerator coreValGen = null;\n-        try {\n-            coreValGen =\n+        if (valueGenerator == null) {\n+            valueGenerator =\n                     Control.getSingleton()\n                             .getExtensionLoader()\n                             .getExtension(ExtensionSpider.class)\n                             .getValueGenerator();\n-        } catch (NullPointerException e) {\n-            LOG.debug(e.getMessage());\n         }\n \n-        if (coreValGen != null) {\n-            HashMap<String, String> fieldAttributes = new HashMap<String, String>();\n-            fieldAttributes.put(\"Control Type\", \"TEXT\");\n-            fieldAttributes.put(\"type\", name);\n-            String valGenValue =\n-                    coreValGen.getValue(\n-                            null,\n-                            null,\n-                            name,\n-                            \"\",\n-                            Collections.<String>emptyList(),\n-                            Collections.<String, String>emptyMap(),\n-                            fieldAttributes);\n-            if (valGenValue != null && !valGenValue.isEmpty()) {\n-                formParams.put(\"xpath:/\" + path, valGenValue);\n-                return formParams;\n-            }\n+        Map<String, String> fieldAttributes = new HashMap<>();\n+        fieldAttributes.put(\"Control Type\", \"TEXT\");\n+        fieldAttributes.put(\"type\", name);\n+        String valGenValue =\n+                valueGenerator.getValue(\n+                        null,\n+                        null,\n+                        name,\n+                        \"\",\n+                        Collections.emptyList(),\n+                        Collections.emptyMap(),\n+                        fieldAttributes);\n+        if (valGenValue != null && !valGenValue.isEmpty()) {\n+            formParams.put(\"xpath:/\" + path, valGenValue);\n+            return formParams;\n         }\n \n         /* Parameter value depends on parameter type. */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg5MjAzMw==", "url": "https://github.com/zaproxy/zap-extensions/pull/2663#discussion_r547892033", "bodyText": "The type arguments could be removed.", "author": "thc202", "createdAt": "2020-12-23T10:37:11Z", "path": "addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java", "diffHunk": "@@ -429,6 +442,37 @@ private void recordOperation(int wsdlID, BindingOperation bindOp) {\n             formParams.put(\"xpath:/\" + path, value);\n             return formParams;\n         }\n+\n+        ValueGenerator coreValGen = null;\n+        try {\n+            coreValGen =\n+                    Control.getSingleton()\n+                            .getExtensionLoader()\n+                            .getExtension(ExtensionSpider.class)\n+                            .getValueGenerator();\n+        } catch (NullPointerException e) {\n+            LOG.debug(e.getMessage());\n+        }\n+\n+        if (coreValGen != null) {\n+            HashMap<String, String> fieldAttributes = new HashMap<String, String>();\n+            fieldAttributes.put(\"Control Type\", \"TEXT\");\n+            fieldAttributes.put(\"type\", name);\n+            String valGenValue =\n+                    coreValGen.getValue(\n+                            null,\n+                            null,\n+                            name,\n+                            \"\",\n+                            Collections.<String>emptyList(),\n+                            Collections.<String, String>emptyMap(),", "originalCommit": "a29fdfa96fa946f5dde8c64322c813bef540f191", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4bbc228c3e17ebf0e13ea1ceb56a1ba5d9887701", "chunk": "diff --git a/addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java b/addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java\nindex 677c736da..4777b6f2c 100644\n--- a/addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java\n+++ b/addOns/soap/src/main/java/org/zaproxy/zap/extension/soap/WSDLCustomParser.java\n\n@@ -443,34 +445,29 @@ public class WSDLCustomParser {\n             return formParams;\n         }\n \n-        ValueGenerator coreValGen = null;\n-        try {\n-            coreValGen =\n+        if (valueGenerator == null) {\n+            valueGenerator =\n                     Control.getSingleton()\n                             .getExtensionLoader()\n                             .getExtension(ExtensionSpider.class)\n                             .getValueGenerator();\n-        } catch (NullPointerException e) {\n-            LOG.debug(e.getMessage());\n         }\n \n-        if (coreValGen != null) {\n-            HashMap<String, String> fieldAttributes = new HashMap<String, String>();\n-            fieldAttributes.put(\"Control Type\", \"TEXT\");\n-            fieldAttributes.put(\"type\", name);\n-            String valGenValue =\n-                    coreValGen.getValue(\n-                            null,\n-                            null,\n-                            name,\n-                            \"\",\n-                            Collections.<String>emptyList(),\n-                            Collections.<String, String>emptyMap(),\n-                            fieldAttributes);\n-            if (valGenValue != null && !valGenValue.isEmpty()) {\n-                formParams.put(\"xpath:/\" + path, valGenValue);\n-                return formParams;\n-            }\n+        Map<String, String> fieldAttributes = new HashMap<>();\n+        fieldAttributes.put(\"Control Type\", \"TEXT\");\n+        fieldAttributes.put(\"type\", name);\n+        String valGenValue =\n+                valueGenerator.getValue(\n+                        null,\n+                        null,\n+                        name,\n+                        \"\",\n+                        Collections.emptyList(),\n+                        Collections.emptyMap(),\n+                        fieldAttributes);\n+        if (valGenValue != null && !valGenValue.isEmpty()) {\n+            formParams.put(\"xpath:/\" + path, valGenValue);\n+            return formParams;\n         }\n \n         /* Parameter value depends on parameter type. */\n"}}, {"oid": "4bbc228c3e17ebf0e13ea1ceb56a1ba5d9887701", "url": "https://github.com/zaproxy/zap-extensions/commit/4bbc228c3e17ebf0e13ea1ceb56a1ba5d9887701", "message": "SOAP: Support ValueGenerator (Issue 3345)\n\nSigned-off-by: ricekot <ricekot@gmail.com>", "committedDate": "2020-12-23T14:43:19Z", "type": "commit"}, {"oid": "4bbc228c3e17ebf0e13ea1ceb56a1ba5d9887701", "url": "https://github.com/zaproxy/zap-extensions/commit/4bbc228c3e17ebf0e13ea1ceb56a1ba5d9887701", "message": "SOAP: Support ValueGenerator (Issue 3345)\n\nSigned-off-by: ricekot <ricekot@gmail.com>", "committedDate": "2020-12-23T14:43:19Z", "type": "forcePushed"}]}