{"pr_number": 1082, "pr_title": "feat(ui-rest): Provided option in attachment usage to include/exclude concluded licenses during LicenseInfo Generation", "pr_createdAt": "2020-12-23T08:08:07Z", "pr_url": "https://github.com/eclipse/sw360/pull/1082", "timeline": [{"oid": "13a5a7045de6857eb590482d94cff0a0a4795198", "url": "https://github.com/eclipse/sw360/commit/13a5a7045de6857eb590482d94cff0a0a4795198", "message": "feat(ui-rest): Provide option in attachment usage to include/exclude concluded licenses during LicenseInfo Generation\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>", "committedDate": "2021-01-06T06:13:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQxMjA2Mw==", "url": "https://github.com/eclipse/sw360/pull/1082#discussion_r548412063", "bodyText": "Please remove this commented line", "author": "smrutis1", "createdAt": "2020-12-24T06:29:08Z", "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/components/ComponentPortlet.java", "diffHunk": "@@ -543,15 +543,18 @@ private void loadSpdxLicenseInfo(ResourceRequest request, ResourceResponse respo\n         String releaseId = request.getParameter(PortalConstants.RELEASE_ID);\n         String attachmentContentId = request.getParameter(PortalConstants.ATTACHMENT_ID);\n         String attachmentName = request.getParameter(PortalConstants.ATTACHMENT_NAME);\n+        boolean includeConcludedLicense = new Boolean(request.getParameter(PortalConstants.INCLUDE_CONCLUDED_LICENSE));\n+\n         ComponentService.Iface componentClient = thriftClients.makeComponentClient();\n         LicenseInfoService.Iface licenseInfoClient = thriftClients.makeLicenseInfoClient();\n \n         Set<String> concludedLicenseIds = new HashSet<>();\n         LicenseNameWithText licenseWithText = null;\n         try {\n             Release release = componentClient.getReleaseById(releaseId, user);\n+            // need to revisit", "originalCommit": "e7b0387f79916bb165295ef57ece338d0d473a29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTU3OTk2Nw==", "url": "https://github.com/eclipse/sw360/pull/1082#discussion_r555579967", "bodyText": "Removed", "author": "JaideepPalit", "createdAt": "2021-01-12T08:09:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQxMjA2Mw=="}], "type": "inlineReview", "revised_code": {"commit": "04139347fdd66c0117392dbb8fff667ddcbd5e8f", "chunk": "diff --git a/frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/components/ComponentPortlet.java b/frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/components/ComponentPortlet.java\nindex 07d19ce6..35e7587b 100644\n--- a/frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/components/ComponentPortlet.java\n+++ b/frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/components/ComponentPortlet.java\n\n@@ -552,7 +552,6 @@ public class ComponentPortlet extends FossologyAwarePortlet {\n         LicenseNameWithText licenseWithText = null;\n         try {\n             Release release = componentClient.getReleaseById(releaseId, user);\n-            // need to revisit\n             List<LicenseInfoParsingResult> licenseInfoResult = licenseInfoClient.getLicenseInfoForAttachment(release,\n                     attachmentContentId, includeConcludedLicense, user);\n             if (attachmentName.endsWith(\".rdf\")) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQ0MjIyMA==", "url": "https://github.com/eclipse/sw360/pull/1082#discussion_r548442220", "bodyText": "Indentation", "author": "smrutis1", "createdAt": "2020-12-24T08:16:09Z", "path": "backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/parsers/LicenseInfoParser.java", "diffHunk": "@@ -46,6 +46,11 @@ protected LicenseInfoParser(AttachmentConnector attachmentConnector, AttachmentC\n \n     public abstract <T> List<LicenseInfoParsingResult> getLicenseInfos(Attachment attachment, User user, T context) throws TException;\n \n+    public <T> List<LicenseInfoParsingResult> getLicenseInfosIncludeConcludedLicense(Attachment attachment,\n+            boolean includeConcludedLicense, User user, T context) throws TException{", "originalCommit": "e7b0387f79916bb165295ef57ece338d0d473a29", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "04139347fdd66c0117392dbb8fff667ddcbd5e8f", "chunk": "diff --git a/backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/parsers/LicenseInfoParser.java b/backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/parsers/LicenseInfoParser.java\nindex 26272806..538d003f 100644\n--- a/backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/parsers/LicenseInfoParser.java\n+++ b/backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/parsers/LicenseInfoParser.java\n\n@@ -47,7 +47,7 @@ public abstract class LicenseInfoParser {\n     public abstract <T> List<LicenseInfoParsingResult> getLicenseInfos(Attachment attachment, User user, T context) throws TException;\n \n     public <T> List<LicenseInfoParsingResult> getLicenseInfosIncludeConcludedLicense(Attachment attachment,\n-            boolean includeConcludedLicense, User user, T context) throws TException{\n+            boolean includeConcludedLicense, User user, T context) throws TException {\n         return new ArrayList<LicenseInfoParsingResult>();\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzg0NjkyOQ==", "url": "https://github.com/eclipse/sw360/pull/1082#discussion_r553846929", "bodyText": "indentation", "author": "smrutis1", "createdAt": "2021-01-08T09:54:37Z", "path": "backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/LicenseInfoHandler.java", "diffHunk": "@@ -452,8 +463,8 @@ public String getDefaultObligationsText() {\n         return DEFAULT_OBLIGATIONS_TEXT;\n     }\n \n-    protected Map<Release, Set<String>> mapKeysToReleases(Map<String, Set<String>> releaseIdsToAttachmentIds, User user) throws TException {\n-        Map<Release, Set<String>> result = Maps.newHashMap();\n+    protected Map<Release, Map<String,Boolean>> mapKeysToReleases(Map<String, Map<String,Boolean>> releaseIdsToAttachmentIds, User user) throws TException {", "originalCommit": "13a5a7045de6857eb590482d94cff0a0a4795198", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "04139347fdd66c0117392dbb8fff667ddcbd5e8f", "chunk": "diff --git a/backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/LicenseInfoHandler.java b/backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/LicenseInfoHandler.java\nindex b9699838..222e0571 100644\n--- a/backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/LicenseInfoHandler.java\n+++ b/backend/src/src-licenseinfo/src/main/java/org/eclipse/sw360/licenseinfo/LicenseInfoHandler.java\n\n@@ -463,11 +463,12 @@ public class LicenseInfoHandler implements LicenseInfoService.Iface {\n         return DEFAULT_OBLIGATIONS_TEXT;\n     }\n \n-    protected Map<Release, Map<String,Boolean>> mapKeysToReleases(Map<String, Map<String,Boolean>> releaseIdsToAttachmentIds, User user) throws TException {\n-        Map<Release, Map<String,Boolean>> result = Maps.newHashMap();\n+    protected Map<Release, Map<String, Boolean>> mapKeysToReleases(\n+            Map<String, Map<String, Boolean>> releaseIdsToAttachmentIds, User user) throws TException {\n+        Map<Release, Map<String, Boolean>> result = Maps.newHashMap();\n         try {\n-            releaseIdsToAttachmentIds\n-                    .forEach((relId, attIds) -> wrapTException(() -> result.put(componentDatabaseHandler.getRelease(relId, user), attIds)));\n+            releaseIdsToAttachmentIds.forEach((relId, attIds) -> wrapTException(\n+                    () -> result.put(componentDatabaseHandler.getRelease(relId, user), attIds)));\n         } catch (WrappedTException exception) {\n             throw exception.getCause();\n         }\n"}}, {"oid": "04139347fdd66c0117392dbb8fff667ddcbd5e8f", "url": "https://github.com/eclipse/sw360/commit/04139347fdd66c0117392dbb8fff667ddcbd5e8f", "message": "feat(ui-rest): Provide option in attachment usage to include/exclude concluded licenses during LicenseInfo Generation\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>", "committedDate": "2021-01-12T08:06:58Z", "type": "commit"}, {"oid": "04139347fdd66c0117392dbb8fff667ddcbd5e8f", "url": "https://github.com/eclipse/sw360/commit/04139347fdd66c0117392dbb8fff667ddcbd5e8f", "message": "feat(ui-rest): Provide option in attachment usage to include/exclude concluded licenses during LicenseInfo Generation\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>", "committedDate": "2021-01-12T08:06:58Z", "type": "forcePushed"}]}