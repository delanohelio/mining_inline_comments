{"pr_number": 874, "pr_title": "feat(REST): Added new allDetails Parameter to List Projects and List Releases API to fetch records with all details.", "pr_createdAt": "2020-06-03T06:59:37Z", "pr_url": "https://github.com/eclipse/sw360/pull/874", "timeline": [{"oid": "4b02db84b8ce2bf42b4a16ee8d69a8e48980dd57", "url": "https://github.com/eclipse/sw360/commit/4b02db84b8ce2bf42b4a16ee8d69a8e48980dd57", "message": "feat(REST): Added new allDetails Parameter to List Projects and List Releases API to fetch records with all details.\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>", "committedDate": "2020-06-03T07:45:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAxMTQ2Mg==", "url": "https://github.com/eclipse/sw360/pull/874#discussion_r442011462", "bodyText": "Unused import", "author": "smrutis1", "createdAt": "2020-06-18T07:05:56Z", "path": "backend/src/src-components/src/main/java/org/eclipse/sw360/components/ComponentHandler.java", "diffHunk": "@@ -20,6 +20,7 @@\n import org.eclipse.sw360.datahandler.thrift.components.ComponentService;\n import org.eclipse.sw360.datahandler.thrift.components.Release;\n import org.eclipse.sw360.datahandler.thrift.components.ReleaseLink;\n+import org.eclipse.sw360.datahandler.thrift.projects.Project;", "originalCommit": "4b02db84b8ce2bf42b4a16ee8d69a8e48980dd57", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTU1MDA1NQ==", "url": "https://github.com/eclipse/sw360/pull/874#discussion_r445550055", "bodyText": "Removed unused import", "author": "JaideepPalit", "createdAt": "2020-06-25T13:17:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAxMTQ2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "cdabe1278f4339c2c5ab0d61e65c33bc6c54a411", "chunk": "diff --git a/backend/src/src-components/src/main/java/org/eclipse/sw360/components/ComponentHandler.java b/backend/src/src-components/src/main/java/org/eclipse/sw360/components/ComponentHandler.java\nindex 57798b6c..2ae7e628 100644\n--- a/backend/src/src-components/src/main/java/org/eclipse/sw360/components/ComponentHandler.java\n+++ b/backend/src/src-components/src/main/java/org/eclipse/sw360/components/ComponentHandler.java\n\n@@ -20,7 +20,6 @@ import org.eclipse.sw360.datahandler.thrift.components.Component;\n import org.eclipse.sw360.datahandler.thrift.components.ComponentService;\n import org.eclipse.sw360.datahandler.thrift.components.Release;\n import org.eclipse.sw360.datahandler.thrift.components.ReleaseLink;\n-import org.eclipse.sw360.datahandler.thrift.projects.Project;\n import org.eclipse.sw360.datahandler.thrift.users.User;\n import org.ektorp.http.HttpClient;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAxNDk3NQ==", "url": "https://github.com/eclipse/sw360/pull/874#discussion_r442014975", "bodyText": "There is already a method getAllReleases(). May be same can be used in thrift layer.", "author": "smrutis1", "createdAt": "2020-06-18T07:13:33Z", "path": "backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ComponentDatabaseHandler.java", "diffHunk": "@@ -1991,6 +1991,10 @@ public RequestSummary importBomFromAttachmentContent(User user, String attachmen\n         }\n     }\n \n+    public List<Release> getAllReleasesForUser(User user) {", "originalCommit": "4b02db84b8ce2bf42b4a16ee8d69a8e48980dd57", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTU1MDE2NQ==", "url": "https://github.com/eclipse/sw360/pull/874#discussion_r445550165", "bodyText": "Changes done", "author": "JaideepPalit", "createdAt": "2020-06-25T13:17:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAxNDk3NQ=="}], "type": "inlineReview", "revised_code": {"commit": "cdabe1278f4339c2c5ab0d61e65c33bc6c54a411", "chunk": "diff --git a/backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ComponentDatabaseHandler.java b/backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ComponentDatabaseHandler.java\nindex 405a16f1..5a857258 100644\n--- a/backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ComponentDatabaseHandler.java\n+++ b/backend/src-common/src/main/java/org/eclipse/sw360/datahandler/db/ComponentDatabaseHandler.java\n\n@@ -1991,10 +2059,6 @@ public class ComponentDatabaseHandler extends AttachmentAwareDatabaseHandler {\n         }\n     }\n \n-    public List<Release> getAllReleasesForUser(User user) {\n-        return releaseRepository.getAll();\n-    }\n-\n     private void removeLeadingTrailingWhitespace(Release release) {\n         DatabaseHandlerUtil.trimStringFields(release, listOfStringFieldsInReleaseToTrim);\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA4NjIwNg==", "url": "https://github.com/eclipse/sw360/pull/874#discussion_r442086206", "bodyText": "May be this can be final boolean isSearchByName = name != null && !name.isEmpty() and can be used in if clause and subsequently can be passed to the method.", "author": "smrutis1", "createdAt": "2020-06-18T09:15:11Z", "path": "rest/resource-server/src/main/java/org/eclipse/sw360/rest/resourceserver/project/ProjectController.java", "diffHunk": "@@ -124,24 +137,38 @@\n             @RequestParam(value = \"name\", required = false) String name,\n             @RequestParam(value = \"type\", required = false) String projectType,\n             @RequestParam(value = \"group\", required = false) String group,\n-            @RequestParam(value = \"tag\", required = false) String tag) throws TException {\n+            @RequestParam(value = \"tag\", required = false) String tag,\n+            @RequestParam(value = \"allDetails\", required = false) boolean allDetails) throws TException {\n         User sw360User = restControllerHelper.getSw360UserFromAuthentication();\n+        Map<String, Project> mapOfProjects = new HashMap<>();\n+        boolean isSearchByName = false;", "originalCommit": "4b02db84b8ce2bf42b4a16ee8d69a8e48980dd57", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTU1MDI2MQ==", "url": "https://github.com/eclipse/sw360/pull/874#discussion_r445550261", "bodyText": "Changes done", "author": "JaideepPalit", "createdAt": "2020-06-25T13:17:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA4NjIwNg=="}], "type": "inlineReview", "revised_code": {"commit": "cdabe1278f4339c2c5ab0d61e65c33bc6c54a411", "chunk": "diff --git a/rest/resource-server/src/main/java/org/eclipse/sw360/rest/resourceserver/project/ProjectController.java b/rest/resource-server/src/main/java/org/eclipse/sw360/rest/resourceserver/project/ProjectController.java\nindex 7eece230..e39351fd 100644\n--- a/rest/resource-server/src/main/java/org/eclipse/sw360/rest/resourceserver/project/ProjectController.java\n+++ b/rest/resource-server/src/main/java/org/eclipse/sw360/rest/resourceserver/project/ProjectController.java\n\n@@ -141,16 +140,14 @@ public class ProjectController implements ResourceProcessor<RepositoryLinksResou\n             @RequestParam(value = \"allDetails\", required = false) boolean allDetails) throws TException {\n         User sw360User = restControllerHelper.getSw360UserFromAuthentication();\n         Map<String, Project> mapOfProjects = new HashMap<>();\n-        boolean isSearchByName = false;\n+        boolean isSearchByName = name != null && !name.isEmpty();\n         List<Project> sw360Projects = new ArrayList<>();\n-        if (name != null && !name.isEmpty()) {\n-            isSearchByName = true;\n+        if (isSearchByName) {\n             sw360Projects.addAll(projectService.searchProjectByName(name, sw360User));\n         } else {\n             sw360Projects.addAll(projectService.getProjectsForUser(sw360User));\n         }\n         sw360Projects.stream().forEach(prj -> mapOfProjects.put(prj.getId(), prj));\n-        final boolean isAllAccessibleProjectFetched = !isSearchByName;\n         List<Resource<Project>> projectResources = new ArrayList<>();\n         sw360Projects.stream()\n                 .filter(project -> projectType == null || projectType.equals(project.projectType.name()))\n"}}, {"oid": "cdabe1278f4339c2c5ab0d61e65c33bc6c54a411", "url": "https://github.com/eclipse/sw360/commit/cdabe1278f4339c2c5ab0d61e65c33bc6c54a411", "message": "feat(REST): Added new allDetails Parameter to List Projects and List Releases API to fetch records with all details.\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>", "committedDate": "2020-06-25T13:13:09Z", "type": "forcePushed"}, {"oid": "2ec0e6d9772510a1095c647a924cf099e60c7a5d", "url": "https://github.com/eclipse/sw360/commit/2ec0e6d9772510a1095c647a924cf099e60c7a5d", "message": "feat(REST): Added new allDetails Parameter to List Projects and List Releases API to fetch records with all details.\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>", "committedDate": "2020-06-26T07:14:59Z", "type": "commit"}, {"oid": "2ec0e6d9772510a1095c647a924cf099e60c7a5d", "url": "https://github.com/eclipse/sw360/commit/2ec0e6d9772510a1095c647a924cf099e60c7a5d", "message": "feat(REST): Added new allDetails Parameter to List Projects and List Releases API to fetch records with all details.\n\nSigned-off-by: Jaideep Palit <jaideep.palit@siemens.com>", "committedDate": "2020-06-26T07:14:59Z", "type": "forcePushed"}]}