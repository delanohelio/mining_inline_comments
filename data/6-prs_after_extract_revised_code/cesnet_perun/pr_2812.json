{"pr_number": 2812, "pr_title": "new method submitApplication", "pr_createdAt": "2020-07-22T13:55:01Z", "pr_url": "https://github.com/CESNET/perun/pull/2812", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk0ODEzMg==", "url": "https://github.com/CESNET/perun/pull/2812#discussion_r458948132", "bodyText": "We probably can mark old createApplication() as deprecated (in core and RPC javadoc). I don't think anybody else is using it directly.", "author": "zlamalp", "createdAt": "2020-07-22T17:06:11Z", "path": "perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/RegistrarManager.java", "diffHunk": "@@ -229,6 +229,19 @@\n \t */\n \tList<ApplicationFormItemData> createApplication(PerunSession user, Application application, List<ApplicationFormItemData> data) throws PerunException;\n \n+\t/**\n+\t * Creates a new application and if succeeds, trigger validation and approval.\n+\t *\n+\t * <p>The method triggers approval for VOs with auto-approved applications.\n+\t *\n+\t * @param session user present in session\n+\t * @param application application\n+\t * @param data data\n+\t * @return submitted application\n+\t * @throws PerunException\n+\t */\n+\tApplication submitApplication(PerunSession session, Application application, List<ApplicationFormItemData> data) throws PerunException;", "originalCommit": "b127cf541366617eb38d73b39ce3ce553e01f8a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3MzY1OA==", "url": "https://github.com/CESNET/perun/pull/2812#discussion_r459373658", "bodyText": "Done", "author": "balcirakpeter", "createdAt": "2020-07-23T11:09:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk0ODEzMg=="}], "type": "inlineReview", "revised_code": {"commit": "d1c0495a356fa31029d088ded59b42e23269ff1f", "chunk": "diff --git a/perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/RegistrarManager.java b/perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/RegistrarManager.java\nindex 4984360fc..c70c76c25 100644\n--- a/perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/RegistrarManager.java\n+++ b/perun-registrar-lib/src/main/java/cz/metacentrum/perun/registrar/RegistrarManager.java\n\n@@ -227,6 +227,7 @@ public interface RegistrarManager {\n \t * @return stored app data\n \t * @throws PerunException\n \t */\n+\t@Deprecated\n \tList<ApplicationFormItemData> createApplication(PerunSession user, Application application, List<ApplicationFormItemData> data) throws PerunException;\n \n \t/**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk1MDU5MA==", "url": "https://github.com/CESNET/perun/pull/2812#discussion_r458950590", "bodyText": "You must specify data type in return for RPC docs: @return Application Submitted application", "author": "zlamalp", "createdAt": "2020-07-22T17:10:23Z", "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "diffHunk": "@@ -601,6 +601,29 @@ public Application call(ApiCaller ac, Deserializer parms) throws PerunException\n \n \t},\n \n+\t/*#\n+\t * Creates a new application.\n+\t * The method triggers approval for VOs with auto-approved applications.\n+\t *\n+\t * @param app Application Application JSON object\n+\t * @param data List<ApplicationFormItemData> List of ApplicationFormItemData JSON objects\n+\t * @return submitted Application", "originalCommit": "b127cf541366617eb38d73b39ce3ce553e01f8a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3MzY5OQ==", "url": "https://github.com/CESNET/perun/pull/2812#discussion_r459373699", "bodyText": "Fixed", "author": "balcirakpeter", "createdAt": "2020-07-23T11:09:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk1MDU5MA=="}], "type": "inlineReview", "revised_code": {"commit": "d1c0495a356fa31029d088ded59b42e23269ff1f", "chunk": "diff --git a/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java b/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java\nindex 8f6d16e31..89b6b43f8 100644\n--- a/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java\n+++ b/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java\n\n@@ -607,7 +608,7 @@ public enum RegistrarManagerMethod implements ManagerMethod {\n \t *\n \t * @param app Application Application JSON object\n \t * @param data List<ApplicationFormItemData> List of ApplicationFormItemData JSON objects\n-\t * @return submitted Application\n+\t * @return Application Submitted application\n \t */\n \tsubmitApplication {\n \n"}}, {"oid": "d1c0495a356fa31029d088ded59b42e23269ff1f", "url": "https://github.com/CESNET/perun/commit/d1c0495a356fa31029d088ded59b42e23269ff1f", "message": "new method submitApplication\n\n- new method submitApplication was created, which works same as\n  createApplication but it returns application instead of an application\n  id. It will be used by perun-wui.\n- submitApplication was also added to the OpenApi spec.\n- private method processApplication was created to prevent duplicities.\n  It returns application id. According the id will be retrieved data or\n  application.", "committedDate": "2020-07-23T11:03:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM4MjcwMw==", "url": "https://github.com/CESNET/perun/pull/2812#discussion_r459382703", "bodyText": "Let docs reader know about the new way: @deprecated See submitApplication()", "author": "zlamalp", "createdAt": "2020-07-23T11:30:09Z", "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java", "diffHunk": "@@ -582,6 +582,7 @@ public Application call(ApiCaller ac, Deserializer parms) throws PerunException\n \t * Creates a new application.\n \t * The method triggers approval for VOs with auto-approved applications.\n \t *\n+\t * @deprecated", "originalCommit": "d1c0495a356fa31029d088ded59b42e23269ff1f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM5NjgwMw==", "url": "https://github.com/CESNET/perun/pull/2812#discussion_r459396803", "bodyText": "Done", "author": "balcirakpeter", "createdAt": "2020-07-23T12:00:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM4MjcwMw=="}], "type": "inlineReview", "revised_code": {"commit": "c16164c3843a1d3219d4887b4cab5f4dd0055002", "chunk": "diff --git a/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java b/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java\nindex 89b6b43f8..2cc1c9cc5 100644\n--- a/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java\n+++ b/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/RegistrarManagerMethod.java\n\n@@ -582,7 +582,7 @@ public enum RegistrarManagerMethod implements ManagerMethod {\n \t * Creates a new application.\n \t * The method triggers approval for VOs with auto-approved applications.\n \t *\n-\t * @deprecated\n+\t * @deprecated See submitApplication()\n \t * @param app Application Application JSON object\n \t * @param data List<ApplicationFormItemData> List of ApplicationFormItemData JSON objects\n \t * @return List<ApplicationFormItemData> Stored app data\n"}}, {"oid": "c16164c3843a1d3219d4887b4cab5f4dd0055002", "url": "https://github.com/CESNET/perun/commit/c16164c3843a1d3219d4887b4cab5f4dd0055002", "message": "new method submitApplication\n\n- new method submitApplication was created, which works same as\n  createApplication but it returns application instead of an application\n  id. It will be used by perun-wui.\n- submitApplication was also added to the OpenApi spec.\n- private method processApplication was created to prevent duplicities.\n  It returns application id. According the id will be retrieved data or\n  application.", "committedDate": "2020-07-23T12:00:22Z", "type": "forcePushed"}, {"oid": "33ce90a6baefdc804410b309c071d3c4ed4a6d55", "url": "https://github.com/CESNET/perun/commit/33ce90a6baefdc804410b309c071d3c4ed4a6d55", "message": "new method submitApplication\n\n- new method submitApplication was created, which works same as\n  createApplication but it returns application instead of an application\n  id. It will be used by perun-wui.\n- submitApplication was also added to the OpenApi spec.\n- private method processApplication was created to prevent duplicities.\n  It returns application id. According the id will be retrieved data or\n  application.", "committedDate": "2020-07-23T13:53:13Z", "type": "commit"}, {"oid": "33ce90a6baefdc804410b309c071d3c4ed4a6d55", "url": "https://github.com/CESNET/perun/commit/33ce90a6baefdc804410b309c071d3c4ed4a6d55", "message": "new method submitApplication\n\n- new method submitApplication was created, which works same as\n  createApplication but it returns application instead of an application\n  id. It will be used by perun-wui.\n- submitApplication was also added to the OpenApi spec.\n- private method processApplication was created to prevent duplicities.\n  It returns application id. According the id will be retrieved data or\n  application.", "committedDate": "2020-07-23T13:53:13Z", "type": "forcePushed"}]}