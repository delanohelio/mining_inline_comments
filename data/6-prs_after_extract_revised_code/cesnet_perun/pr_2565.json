{"pr_number": 2565, "pr_title": "Fixed bug in extendDateByStaticDate", "pr_createdAt": "2020-02-11T12:05:43Z", "pr_url": "https://github.com/CESNET/perun/pull/2565", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU5Nzc2Mg==", "url": "https://github.com/CESNET/perun/pull/2565#discussion_r377597762", "bodyText": "At this moment, you don't need to use localDate, you can use extensionDate and return it.", "author": "stavamichal", "createdAt": "2020-02-11T12:14:02Z", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/impl/Utils.java", "diffHunk": "@@ -1539,7 +1539,7 @@ public static LocalDate extendDateByStaticDate(LocalDate localDate, Matcher matc\n \t\textensionInNextYear = extensionDate.isBefore(LocalDate.now());\n \n \t\t// Set the date to which the membership should be extended, can be changed if there was grace period, see next part of the code\n-\t\tlocalDate = LocalDate.of(year, month, day);\n+\t\tLocalDate localDate = LocalDate.of(year, month, day);", "originalCommit": "13af6c9e2cafa582f752f736a1c4df788c1b72a1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "703590a5ed6e6281c703a8220e8942707abb2f8c", "chunk": "diff --git a/perun-core/src/main/java/cz/metacentrum/perun/core/impl/Utils.java b/perun-core/src/main/java/cz/metacentrum/perun/core/impl/Utils.java\nindex e0403b512..4a8f45832 100644\n--- a/perun-core/src/main/java/cz/metacentrum/perun/core/impl/Utils.java\n+++ b/perun-core/src/main/java/cz/metacentrum/perun/core/impl/Utils.java\n\n@@ -1539,12 +1539,11 @@ public class Utils {\n \t\textensionInNextYear = extensionDate.isBefore(LocalDate.now());\n \n \t\t// Set the date to which the membership should be extended, can be changed if there was grace period, see next part of the code\n-\t\tLocalDate localDate = LocalDate.of(year, month, day);\n \t\tif (extensionInNextYear) {\n-\t\t\tlocalDate = localDate.plusYears(1);\n+\t\t\textensionDate = extensionDate.plusYears(1);\n \t\t}\n \n-\t\treturn localDate;\n+\t\treturn extensionDate;\n \t}\n \n \t/**\n"}}, {"oid": "703590a5ed6e6281c703a8220e8942707abb2f8c", "url": "https://github.com/CESNET/perun/commit/703590a5ed6e6281c703a8220e8942707abb2f8c", "message": "Fixed bug in extendDateByStaticDate\n\n- the method now works only with today's date", "committedDate": "2020-02-11T12:15:21Z", "type": "forcePushed"}, {"oid": "4021e75ac021c809d493f26b784a2b9ff10567e1", "url": "https://github.com/CESNET/perun/commit/4021e75ac021c809d493f26b784a2b9ff10567e1", "message": "Fixed bug in extendDateByStaticDate\n\n- the method now works only with today's date", "committedDate": "2020-02-11T12:25:38Z", "type": "commit"}, {"oid": "4021e75ac021c809d493f26b784a2b9ff10567e1", "url": "https://github.com/CESNET/perun/commit/4021e75ac021c809d493f26b784a2b9ff10567e1", "message": "Fixed bug in extendDateByStaticDate\n\n- the method now works only with today's date", "committedDate": "2020-02-11T12:25:38Z", "type": "forcePushed"}]}