{"pr_number": 2746, "pr_title": "Updated methods in FacilitiesManagerMethod to work with facilityName", "pr_createdAt": "2020-06-14T16:09:02Z", "pr_url": "https://github.com/CESNET/perun/pull/2746", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTkzNTgxNg==", "url": "https://github.com/CESNET/perun/pull/2746#discussion_r439935816", "bodyText": "We don't want to mention InternalErrorException in method definition and javadoc anymore, since its runtime.", "author": "zlamalp", "createdAt": "2020-06-15T05:22:38Z", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/api/OwnersManager.java", "diffHunk": "@@ -71,6 +71,20 @@\n \t */\n \tOwner getOwnerById(PerunSession perunSession, int id) throws OwnerNotExistsException, InternalErrorException, PrivilegeException;\n \n+\t/**\n+\t * Find owner by name.\n+\t *\n+\t * @param perunSession perun session\n+\t * @param name name of the owner\n+\t *\n+\t * @return Owner with specified name\n+\t *\n+\t * @throws OwnerNotExistsException if owner with given name does not exist\n+\t * @throws InternalErrorException\n+\t * @throws PrivilegeException if user does not have sufficient permissions\n+\t */\n+\tOwner getOwnerByName(PerunSession perunSession, String name) throws OwnerNotExistsException, InternalErrorException, PrivilegeException;", "originalCommit": "5bcd8cb79313118bed9c5fd1ba6f66a8add4d104", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d97ab02097e350902b583cca83fd38695c0e9593", "chunk": "diff --git a/perun-core/src/main/java/cz/metacentrum/perun/core/api/OwnersManager.java b/perun-core/src/main/java/cz/metacentrum/perun/core/api/OwnersManager.java\nindex 928ee3b67..900071372 100644\n--- a/perun-core/src/main/java/cz/metacentrum/perun/core/api/OwnersManager.java\n+++ b/perun-core/src/main/java/cz/metacentrum/perun/core/api/OwnersManager.java\n\n@@ -69,7 +69,7 @@ public interface OwnersManager {\n \t * @throws InternalErrorException\n \t * @throws PrivilegeException\n \t */\n-\tOwner getOwnerById(PerunSession perunSession, int id) throws OwnerNotExistsException, InternalErrorException, PrivilegeException;\n+\tOwner getOwnerById(PerunSession perunSession, int id) throws OwnerNotExistsException, PrivilegeException;\n \n \t/**\n \t * Find owner by name.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTkzODkzMA==", "url": "https://github.com/CESNET/perun/pull/2746#discussion_r439938930", "bodyText": "Maybe you should mention that exception:\n@throw HostNotExistsException When host doesn't exist or is not unique by name.", "author": "zlamalp", "createdAt": "2020-06-15T05:35:54Z", "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/FacilitiesManagerMethod.java", "diffHunk": "@@ -565,6 +746,21 @@ public Void call(ApiCaller ac, Deserializer parms) throws PerunException {\n \t\t}\n \t},\n \n+\t/*#\n+\t * Remove host from the Facility based on hostname. If there is ambiguity, method throws exception and no host is removed.", "originalCommit": "5bcd8cb79313118bed9c5fd1ba6f66a8add4d104", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d97ab02097e350902b583cca83fd38695c0e9593", "chunk": "diff --git a/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/FacilitiesManagerMethod.java b/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/FacilitiesManagerMethod.java\nindex e6c13e079..b0ddf7c7f 100644\n--- a/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/FacilitiesManagerMethod.java\n+++ b/perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/FacilitiesManagerMethod.java\n\n@@ -750,6 +750,7 @@ public enum FacilitiesManagerMethod implements ManagerMethod {\n \t * Remove host from the Facility based on hostname. If there is ambiguity, method throws exception and no host is removed.\n \t *\n \t * @param hostname String hostname\n+\t * @throw HostNotExistsException When host doesn't exist or is not unique by name\n \t */\n \tremoveHostByHostname {\n \t\t@Override\n"}}, {"oid": "d97ab02097e350902b583cca83fd38695c0e9593", "url": "https://github.com/CESNET/perun/commit/d97ab02097e350902b583cca83fd38695c0e9593", "message": "Fixes based on review\n\n- removed InternalErrorException in getOwnerByName definition and javadoc\n- added thrown exception to javadoc of removeHostByHostname", "committedDate": "2020-06-28T10:42:19Z", "type": "forcePushed"}, {"oid": "36d295ddfb9e19add18ea7135ff3836d0af1974a", "url": "https://github.com/CESNET/perun/commit/36d295ddfb9e19add18ea7135ff3836d0af1974a", "message": "Added getOwnerByName to OwnerManager\n\n- getOwnerByName was added to all layers\n- also added tests", "committedDate": "2020-07-15T07:21:43Z", "type": "commit"}, {"oid": "31e5eb12e43ac7937dc1740f0f06644b1b7ae690", "url": "https://github.com/CESNET/perun/commit/31e5eb12e43ac7937dc1740f0f06644b1b7ae690", "message": "Added method removeHostByHostname to FacilitiesManager\n\n- new method removeHostByHostname removes host by given hostname if there is unique host to be removed after privilege check, otherwise throws exception\n- also added tests", "committedDate": "2020-07-15T07:21:43Z", "type": "commit"}, {"oid": "5762d75e12e787ecaa786365d1d1678a6e6a0f97", "url": "https://github.com/CESNET/perun/commit/5762d75e12e787ecaa786365d1d1678a6e6a0f97", "message": "Updated methods in FacilitiesManagerMethod to work with facilityName\n\n- methods in rpc FacilitiesManagerMethod were extended to work with facility name where previously only facility id was allowed\n- addOwner, removeOwner were also extended to work with owner name and not just owner id\n- removeHostByHostname added to rpc to simulate removeHost with hostname as parameter\n- methods also added to openapi", "committedDate": "2020-07-15T07:21:43Z", "type": "commit"}, {"oid": "e3d605e5831e3adce9d1904a42e4c86c3306eb1d", "url": "https://github.com/CESNET/perun/commit/e3d605e5831e3adce9d1904a42e4c86c3306eb1d", "message": "Fixes based on review\n\n- removed InternalErrorException in getOwnerByName definition and javadoc\n- added thrown exception to javadoc of removeHostByHostname", "committedDate": "2020-07-15T07:21:44Z", "type": "commit"}, {"oid": "e3d605e5831e3adce9d1904a42e4c86c3306eb1d", "url": "https://github.com/CESNET/perun/commit/e3d605e5831e3adce9d1904a42e4c86c3306eb1d", "message": "Fixes based on review\n\n- removed InternalErrorException in getOwnerByName definition and javadoc\n- added thrown exception to javadoc of removeHostByHostname", "committedDate": "2020-07-15T07:21:44Z", "type": "forcePushed"}, {"oid": "86198ed0b6285ea6e241f16e0e3f15fb1651d797", "url": "https://github.com/CESNET/perun/commit/86198ed0b6285ea6e241f16e0e3f15fb1651d797", "message": "Merge branch 'master' into addMethodsByName", "committedDate": "2020-07-24T13:27:35Z", "type": "commit"}]}