{"pr_number": 801, "pr_title": "Add error message if Xcode 12 is used", "pr_createdAt": "2020-09-29T15:34:16Z", "pr_url": "https://github.com/gluonhq/substrate/pull/801", "timeline": [{"oid": "865241789a8f9ba0183870416531adfa3dad7b80", "url": "https://github.com/gluonhq/substrate/commit/865241789a8f9ba0183870416531adfa3dad7b80", "message": "Add error message if Xcode 12 is used", "committedDate": "2020-09-29T15:32:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNTIxMw==", "url": "https://github.com/gluonhq/substrate/pull/801#discussion_r499525213", "bodyText": "11+ also includes version 12. I would remove the + suffixes in the message.", "author": "tiainen", "createdAt": "2020-10-05T11:21:55Z", "path": "src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java", "diffHunk": "@@ -480,6 +481,21 @@ public void canRunLLVM(Triplet triplet) throws IOException, InterruptedException\n                         \"$GRAALVM_HOME/bin/gu install llvm-toolchain\");\n             }\n         }\n+\n+        // TODO: Remove when GraalVM has support for Xcode 12\n+        if (new Triplet(Constants.Profile.IOS).equals(triplet)) {\n+            Path gluonversion = graalPath.resolve(\"gluonversion.txt\");\n+            if (!Files.exists(gluonversion) ||\n+                    !Files.readAllLines(gluonversion).contains(\"graalvm-ce-java11-20.2.0.hotfix-xcode12\")) {\n+                XcodeUtils xcodeUtils = new XcodeUtils(XcodeUtils.SDKS.IPHONEOS);\n+                if (xcodeUtils.getDTXcode().startsWith(\"12\")) {\n+                    throw new IOException(\"\\n\\n\\nYour current GraalVM build can't build for iOS with Xcode 12+.\\n\\n\" +", "originalCommit": "865241789a8f9ba0183870416531adfa3dad7b80", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNjk2OA==", "url": "https://github.com/gluonhq/substrate/pull/801#discussion_r499526968", "bodyText": "Where does 12+ relate to 11? I'll remove it anyway", "author": "jperedadnr", "createdAt": "2020-10-05T11:25:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNTIxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUzNTIwOQ==", "url": "https://github.com/gluonhq/substrate/pull/801#discussion_r499535209", "bodyText": "I was in fact referring to the 11+ in the next line. So having 12+ indeed makes a bit of sense, but let us hope we can remove this code before xcode 13.", "author": "tiainen", "createdAt": "2020-10-05T11:41:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNTIxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUzOTkxOQ==", "url": "https://github.com/gluonhq/substrate/pull/801#discussion_r499539919", "bodyText": "Oh, my bad, fixed it.", "author": "jperedadnr", "createdAt": "2020-10-05T11:49:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNTIxMw=="}], "type": "inlineReview", "revised_code": {"commit": "ec28bafe2a84340cb5645ebdc7941f6039967bda", "chunk": "diff --git a/src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java b/src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java\nindex 0caec86..9c9f381 100644\n--- a/src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java\n+++ b/src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java\n\n@@ -489,7 +489,7 @@ public class InternalProjectConfiguration {\n                     !Files.readAllLines(gluonversion).contains(\"graalvm-ce-java11-20.2.0.hotfix-xcode12\")) {\n                 XcodeUtils xcodeUtils = new XcodeUtils(XcodeUtils.SDKS.IPHONEOS);\n                 if (xcodeUtils.getDTXcode().startsWith(\"12\")) {\n-                    throw new IOException(\"\\n\\n\\nYour current GraalVM build can't build for iOS with Xcode 12+.\\n\\n\" +\n+                    throw new IOException(\"\\n\\n\\nYour current GraalVM build can't build for iOS with Xcode 12.\\n\\n\" +\n                             \"You can try Xcode 11+, or alternatively you can download GraalVM hotfix build from here:\\n\\n\" +\n                             \"https://download2.gluonhq.com/substrate/graalvm/graalvm-ce-java11-20.2.0.hotfix-xcode12.zip\\n\\n\" +\n                             \"Then extract it, set GRAALVM_HOME accordingly and try again.\\n\");\n"}}, {"oid": "ec28bafe2a84340cb5645ebdc7941f6039967bda", "url": "https://github.com/gluonhq/substrate/commit/ec28bafe2a84340cb5645ebdc7941f6039967bda", "message": "Remove suffix", "committedDate": "2020-10-05T11:26:20Z", "type": "commit"}, {"oid": "74b2a5d0d72bce4052fcb92e10c6b03e56611b1b", "url": "https://github.com/gluonhq/substrate/commit/74b2a5d0d72bce4052fcb92e10c6b03e56611b1b", "message": "Remove suffix", "committedDate": "2020-10-05T11:49:23Z", "type": "commit"}]}