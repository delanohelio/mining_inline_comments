{"pr_number": 803, "pr_title": "Scan jars for possible Android dependencies", "pr_createdAt": "2020-10-02T18:35:24Z", "pr_url": "https://github.com/gluonhq/substrate/pull/803", "timeline": [{"oid": "d1c4b65297c42753dddfd2114eca019c7c075914", "url": "https://github.com/gluonhq/substrate/commit/d1c4b65297c42753dddfd2114eca019c7c075914", "message": "Scan jars for possible Android dependencies", "committedDate": "2020-10-02T18:24:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNjY4MA==", "url": "https://github.com/gluonhq/substrate/pull/803#discussion_r499526680", "bodyText": "This should probably go to an Android specific class", "author": "johanvos", "createdAt": "2020-10-05T11:24:45Z", "path": "src/main/java/com/gluonhq/substrate/config/ConfigResolver.java", "diffHunk": "@@ -194,6 +195,21 @@ public ConfigResolver(String classpath) throws IOException, InterruptedException\n                 line -> true));\n     }\n \n+    /**\n+     * Walks through the jars in the classpath,\n+     * and looks for META-INF/substrate/config/android-dependencies.txt file.\n+     *\n+     * @return a list of dependencies lines that should be added to the build.gradle file\n+     * @throws IOException Exception while reading the file.\n+     */\n+    public Set<String> getAndroidDependencies() throws IOException {", "originalCommit": "d1c4b65297c42753dddfd2114eca019c7c075914", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2cfcca029fa3cb010d3b502da1d95955d279b4ed", "chunk": "diff --git a/src/main/java/com/gluonhq/substrate/config/ConfigResolver.java b/src/main/java/com/gluonhq/substrate/config/ConfigResolver.java\nindex 41dad49..de99af0 100644\n--- a/src/main/java/com/gluonhq/substrate/config/ConfigResolver.java\n+++ b/src/main/java/com/gluonhq/substrate/config/ConfigResolver.java\n\n@@ -180,36 +177,6 @@ public class ConfigResolver {\n                 .collect(Collectors.toList());\n     }\n \n-    /**\n-     * Walks through the jars in the classpath,\n-     * and looks for META-INF/substrate/config/android-permissions.txt file.\n-     *\n-     * @return a list of permission lines that should be added to the AndroidManifest file\n-     * @throws IOException Exception while reading the permissions file.\n-     */\n-    public Set<String> getAndroidPermissions() throws IOException {\n-        Logger.logDebug(\"Scanning for android permission files\");\n-        return Set.copyOf(scanJars(USER_ANDROID_PERMISSIONS_FILE,\n-                null,\n-                null,\n-                line -> true));\n-    }\n-\n-    /**\n-     * Walks through the jars in the classpath,\n-     * and looks for META-INF/substrate/config/android-dependencies.txt file.\n-     *\n-     * @return a list of dependencies lines that should be added to the build.gradle file\n-     * @throws IOException Exception while reading the file.\n-     */\n-    public Set<String> getAndroidDependencies() throws IOException {\n-        Logger.logDebug(\"Scanning for android dependencies files\");\n-        return Set.copyOf(scanJars(USER_ANDROID_DEPENDENCIES_FILE,\n-                null,\n-                null,\n-                line -> true));\n-    }\n-\n     private List<String> scanJars(String configName, String configArchosName, String initLine, Predicate<String> filter) throws IOException {\n         Objects.requireNonNull(configName, \"configName can't be null\");\n         List<String> list = new ArrayList<>();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUyNzMzMg==", "url": "https://github.com/gluonhq/substrate/pull/803#discussion_r499527332", "bodyText": "Probably better to add a 2-args scanJars method instead of passing null", "author": "johanvos", "createdAt": "2020-10-05T11:25:57Z", "path": "src/main/java/com/gluonhq/substrate/config/ConfigResolver.java", "diffHunk": "@@ -194,6 +195,21 @@ public ConfigResolver(String classpath) throws IOException, InterruptedException\n                 line -> true));\n     }\n \n+    /**\n+     * Walks through the jars in the classpath,\n+     * and looks for META-INF/substrate/config/android-dependencies.txt file.\n+     *\n+     * @return a list of dependencies lines that should be added to the build.gradle file\n+     * @throws IOException Exception while reading the file.\n+     */\n+    public Set<String> getAndroidDependencies() throws IOException {\n+        Logger.logDebug(\"Scanning for android dependencies files\");\n+        return Set.copyOf(scanJars(USER_ANDROID_DEPENDENCIES_FILE,\n+                null,", "originalCommit": "d1c4b65297c42753dddfd2114eca019c7c075914", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2cfcca029fa3cb010d3b502da1d95955d279b4ed", "chunk": "diff --git a/src/main/java/com/gluonhq/substrate/config/ConfigResolver.java b/src/main/java/com/gluonhq/substrate/config/ConfigResolver.java\nindex 41dad49..de99af0 100644\n--- a/src/main/java/com/gluonhq/substrate/config/ConfigResolver.java\n+++ b/src/main/java/com/gluonhq/substrate/config/ConfigResolver.java\n\n@@ -180,36 +177,6 @@ public class ConfigResolver {\n                 .collect(Collectors.toList());\n     }\n \n-    /**\n-     * Walks through the jars in the classpath,\n-     * and looks for META-INF/substrate/config/android-permissions.txt file.\n-     *\n-     * @return a list of permission lines that should be added to the AndroidManifest file\n-     * @throws IOException Exception while reading the permissions file.\n-     */\n-    public Set<String> getAndroidPermissions() throws IOException {\n-        Logger.logDebug(\"Scanning for android permission files\");\n-        return Set.copyOf(scanJars(USER_ANDROID_PERMISSIONS_FILE,\n-                null,\n-                null,\n-                line -> true));\n-    }\n-\n-    /**\n-     * Walks through the jars in the classpath,\n-     * and looks for META-INF/substrate/config/android-dependencies.txt file.\n-     *\n-     * @return a list of dependencies lines that should be added to the build.gradle file\n-     * @throws IOException Exception while reading the file.\n-     */\n-    public Set<String> getAndroidDependencies() throws IOException {\n-        Logger.logDebug(\"Scanning for android dependencies files\");\n-        return Set.copyOf(scanJars(USER_ANDROID_DEPENDENCIES_FILE,\n-                null,\n-                null,\n-                line -> true));\n-    }\n-\n     private List<String> scanJars(String configName, String configArchosName, String initLine, Predicate<String> filter) throws IOException {\n         Objects.requireNonNull(configName, \"configName can't be null\");\n         List<String> list = new ArrayList<>();\n"}}, {"oid": "e450a2485b6ba7a29f8ac31d2034566f8516f06a", "url": "https://github.com/gluonhq/substrate/commit/e450a2485b6ba7a29f8ac31d2034566f8516f06a", "message": "Merge branch 'master' of https://github.com/gluonhq/substrate into 780-aar", "committedDate": "2020-10-05T11:29:31Z", "type": "commit"}, {"oid": "2cfcca029fa3cb010d3b502da1d95955d279b4ed", "url": "https://github.com/gluonhq/substrate/commit/2cfcca029fa3cb010d3b502da1d95955d279b4ed", "message": "Create AndroidResolver", "committedDate": "2020-10-05T11:48:30Z", "type": "commit"}, {"oid": "0fcb0e7e5b64a08d31dc5bf63322183eaa5584c0", "url": "https://github.com/gluonhq/substrate/commit/0fcb0e7e5b64a08d31dc5bf63322183eaa5584c0", "message": "Fix path", "committedDate": "2020-10-05T14:32:34Z", "type": "commit"}]}