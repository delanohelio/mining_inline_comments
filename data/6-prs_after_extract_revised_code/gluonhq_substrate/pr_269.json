{"pr_number": 269, "pr_title": "#261 Check executable exists and CFBundleExecutable is valid", "pr_createdAt": "2020-01-14T09:23:27Z", "pr_url": "https://github.com/gluonhq/substrate/pull/269", "timeline": [{"oid": "5f0764aadbd67533396d76ef7094562b09912b5c", "url": "https://github.com/gluonhq/substrate/commit/5f0764aadbd67533396d76ef7094562b09912b5c", "message": "#261 Check executable exists and CFBundleExecutable is valid", "committedDate": "2020-01-14T09:22:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI2ODkwNQ==", "url": "https://github.com/gluonhq/substrate/pull/269#discussion_r367268905", "bodyText": "where is that Default-Info.plist? In a src/gensrc/target dir? Make sure that if there are multiple ones (e.g. copied or generated) the user modifies the correct one.", "author": "johanvos", "createdAt": "2020-01-16T07:39:46Z", "path": "src/main/java/com/gluonhq/substrate/util/ios/InfoPlist.java", "diffHunk": "@@ -96,13 +96,24 @@ public InfoPlist(ProcessPaths paths, InternalProjectConfiguration projectConfigu\n     }\n \n     public Path processInfoPlist() throws IOException {\n-        Path workDir = appPath;\n-        String executableName = getExecutableName(projectConfiguration.getAppName(), sourceOS);\n+        String appName = projectConfiguration.getAppName();\n+        String executableName = getExecutableName(appName, sourceOS);\n+        Path executable = appPath.resolve(executableName);\n+        if (!Files.exists(executable)) {\n+            String errorMessage = \"The executable \" + executable + \" doesn't exist.\";\n+            if (!appName.equals(executableName) && Files.exists(appPath.resolve(appName))) {\n+                errorMessage += \"\\nMake sure the CFBundleExecutable key in the Default-Info.plist file is set to: \" + appName;", "originalCommit": "5f0764aadbd67533396d76ef7094562b09912b5c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzMwNjg2MQ==", "url": "https://github.com/gluonhq/substrate/pull/269#discussion_r367306861", "bodyText": "Fixed", "author": "jperedadnr", "createdAt": "2020-01-16T09:17:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI2ODkwNQ=="}], "type": "inlineReview", "revised_code": {"commit": "c0a009638d45ed2587570ffb24d25b90092b6e78", "chunk": "diff --git a/src/main/java/com/gluonhq/substrate/util/ios/InfoPlist.java b/src/main/java/com/gluonhq/substrate/util/ios/InfoPlist.java\nindex 9ec4151..683148d 100644\n--- a/src/main/java/com/gluonhq/substrate/util/ios/InfoPlist.java\n+++ b/src/main/java/com/gluonhq/substrate/util/ios/InfoPlist.java\n\n@@ -98,17 +98,6 @@ public class InfoPlist {\n     public Path processInfoPlist() throws IOException {\n         String appName = projectConfiguration.getAppName();\n         String executableName = getExecutableName(appName, sourceOS);\n-        Path executable = appPath.resolve(executableName);\n-        if (!Files.exists(executable)) {\n-            String errorMessage = \"The executable \" + executable + \" doesn't exist.\";\n-            if (!appName.equals(executableName) && Files.exists(appPath.resolve(appName))) {\n-                errorMessage += \"\\nMake sure the CFBundleExecutable key in the Default-Info.plist file is set to: \" + appName;\n-            }\n-            throw new IOException(errorMessage);\n-        }\n-        if (!Files.isExecutable(executable)) {\n-            throw new IOException(\"The file \" + executable + \" is not executable\");\n-        }\n         String bundleIdName = getBundleId(getPlistPath(paths, sourceOS), projectConfiguration.getMainClassName());\n \n         Path userPlist = rootPath.resolve(Constants.PLIST_FILE);\n"}}, {"oid": "2db2675e9b4cf4da742f75a894077f2256d61c61", "url": "https://github.com/gluonhq/substrate/commit/2db2675e9b4cf4da742f75a894077f2256d61c61", "message": "Merge branch 'master' of https://github.com/gluonhq/substrate into 261-exe", "committedDate": "2020-01-16T08:58:50Z", "type": "commit"}, {"oid": "c0a009638d45ed2587570ffb24d25b90092b6e78", "url": "https://github.com/gluonhq/substrate/commit/c0a009638d45ed2587570ffb24d25b90092b6e78", "message": "Include path to plist file", "committedDate": "2020-01-16T09:12:55Z", "type": "commit"}]}