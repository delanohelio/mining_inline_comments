{"pr_number": 706, "pr_title": "Use ForceNoROSectionRelocations new flag", "pr_createdAt": "2020-07-23T13:54:42Z", "pr_url": "https://github.com/gluonhq/substrate/pull/706", "timeline": [{"oid": "bca6334ef5ac59693ed06d35aa35767f062785cc", "url": "https://github.com/gluonhq/substrate/commit/bca6334ef5ac59693ed06d35aa35767f062785cc", "message": "Use ForceNoROSectionRelocations new flag", "committedDate": "2020-07-23T13:53:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ2OTk4NA==", "url": "https://github.com/gluonhq/substrate/pull/706#discussion_r459469984", "bodyText": "We don't support anything lower than 20.2 I assume", "author": "johanvos", "createdAt": "2020-07-23T13:58:10Z", "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -202,17 +202,21 @@ public boolean runUntilEnd() throws IOException, InterruptedException {\n         ArrayList<String> flags = new ArrayList<String>(Arrays.asList(\n                 \"-H:-SpawnIsolates\",\n                 \"-Dsvm.targetArch=\" + projectConfiguration.getTargetTriplet().getArch(),\n-                \"-H:+UseOnlyWritableBootImageHeap\",\n                 \"-H:+UseCAPCache\",\n                 \"-H:CAPCacheDir=\" + getCapCacheDir().toAbsolutePath().toString(),\n                 \"-H:CompilerBackend=\" + projectConfiguration.getBackend()));\n         if (projectConfiguration.isUseLLVM()) {\n             flags.add(\"-H:CustomLD=\" + ldlld.toAbsolutePath().toString());\n         }\n-        if (projectConfiguration.getGraalVersion().compareTo(new Version(\"20.2.0\")) >= 0) {\n+        Version graalVersion = projectConfiguration.getGraalVersion();\n+        if (graalVersion.compareTo(new Version(\"20.2.0\")) >= 0) {", "originalCommit": "bca6334ef5ac59693ed06d35aa35767f062785cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ3MzAzMg==", "url": "https://github.com/gluonhq/substrate/pull/706#discussion_r459473032", "bodyText": "I guess so, but then we can remove support of old flags (like UseBionicC).\nProbably we should add an initial check at startup, that fails if user is using lower than 20.2?", "author": "jperedadnr", "createdAt": "2020-07-23T14:02:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ2OTk4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM5MDk2MA==", "url": "https://github.com/gluonhq/substrate/pull/706#discussion_r460390960", "bodyText": "@johanvos I'd propose we integrate this PR now and do a follow-up issue to check GraalVM version is 20.2+, removing existing support for older versions.", "author": "jperedadnr", "createdAt": "2020-07-25T10:26:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ2OTk4NA=="}], "type": "inlineReview", "revised_code": null}]}