{"pr_number": 629, "pr_title": "Don\u2019t require LLVM toolchain on Android with LIR backend", "pr_createdAt": "2020-05-27T12:18:39Z", "pr_url": "https://github.com/gluonhq/substrate/pull/629", "timeline": [{"oid": "8fcaab17b1ce5f4458269f8d2971f1b765b51c5d", "url": "https://github.com/gluonhq/substrate/commit/8fcaab17b1ce5f4458269f8d2971f1b765b51c5d", "message": "Don\u2019t require LLVM toolchain on Android with LIR backend", "committedDate": "2020-05-27T12:18:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NjMwNQ==", "url": "https://github.com/gluonhq/substrate/pull/629#discussion_r431096305", "bodyText": "Better to reverse that test (if backend is not LLVM, return).\nThere might be different non-LLVM backends, or at least different names for this backend.", "author": "johanvos", "createdAt": "2020-05-27T12:57:57Z", "path": "src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java", "diffHunk": "@@ -441,6 +441,11 @@ public void canRunNativeImage() throws IOException, InterruptedException {\n     public void canRunLLVM(Triplet triplet) throws IOException, InterruptedException {\n         if (!new Triplet(Constants.Profile.IOS).equals(triplet) &&\n                 !new Triplet(Constants.Profile.ANDROID).equals(triplet)) {\n+            // host doesn't use LLVM\n+            return;\n+        }\n+        if (new Triplet(Constants.Profile.ANDROID).equals(triplet) && getBackend().equals(Constants.BACKEND_LIR)) {", "originalCommit": "8fcaab17b1ce5f4458269f8d2971f1b765b51c5d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE1NDgxMg==", "url": "https://github.com/gluonhq/substrate/pull/629#discussion_r431154812", "bodyText": "Done", "author": "jperedadnr", "createdAt": "2020-05-27T14:00:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NjMwNQ=="}], "type": "inlineReview", "revised_code": {"commit": "20d54a1ec1cccfc6092548e2d2ec62dc4343c5c0", "chunk": "diff --git a/src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java b/src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java\nindex 3fec98a..42136d0 100644\n--- a/src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java\n+++ b/src/main/java/com/gluonhq/substrate/model/InternalProjectConfiguration.java\n\n@@ -444,8 +444,8 @@ public class InternalProjectConfiguration {\n             // host doesn't use LLVM\n             return;\n         }\n-        if (new Triplet(Constants.Profile.ANDROID).equals(triplet) && getBackend().equals(Constants.BACKEND_LIR)) {\n-            // Android with LIR doesn't use LLVM\n+        if (new Triplet(Constants.Profile.ANDROID).equals(triplet) && !Constants.BACKEND_LLVM.equals(getBackend())) {\n+            // Android can use other backends\n             return;\n         }\n         Path graalPath = getGraalPath();\n"}}, {"oid": "20d54a1ec1cccfc6092548e2d2ec62dc4343c5c0", "url": "https://github.com/gluonhq/substrate/commit/20d54a1ec1cccfc6092548e2d2ec62dc4343c5c0", "message": "Reverse LLVM condition", "committedDate": "2020-05-27T14:00:08Z", "type": "commit"}]}