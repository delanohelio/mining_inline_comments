{"pr_number": 1678, "pr_title": "issue #1673 - change default ordering for resource searches", "pr_createdAt": "2020-11-09T03:51:59Z", "pr_url": "https://github.com/IBM/FHIR/pull/1678", "timeline": [{"oid": "8de7c691542d7272cd364472a55166863650086a", "url": "https://github.com/IBM/FHIR/commit/8de7c691542d7272cd364472a55166863650086a", "message": "issue #1673 - change default ordering\n\nPreviously, we used a default sort of RESOURCE_ID ASC (the row identifier of the resource version being returned).\nWhile investigating #1673, I noticed that removing this sort took this query from 10 seconds down to 3-4 seconds.\n\nHowever, having *some* sort order is important, so that we get consistent page results.\nUpon further inspection, I found that changing the default sort to LOGICAL_RESOURCE_ID (the row identifier of the logical resource row being returned)\nyielded a similar performance boost and so this is the proposed change.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>", "committedDate": "2020-11-09T03:52:27Z", "type": "commit"}, {"oid": "8de7c691542d7272cd364472a55166863650086a", "url": "https://github.com/IBM/FHIR/commit/8de7c691542d7272cd364472a55166863650086a", "message": "issue #1673 - change default ordering\n\nPreviously, we used a default sort of RESOURCE_ID ASC (the row identifier of the resource version being returned).\nWhile investigating #1673, I noticed that removing this sort took this query from 10 seconds down to 3-4 seconds.\n\nHowever, having *some* sort order is important, so that we get consistent page results.\nUpon further inspection, I found that changing the default sort to LOGICAL_RESOURCE_ID (the row identifier of the logical resource row being returned)\nyielded a similar performance boost and so this is the proposed change.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>", "committedDate": "2020-11-09T03:52:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTgyMjczNA==", "url": "https://github.com/IBM/FHIR/pull/1678#discussion_r519822734", "bodyText": "just noticing this line, should it be updated?", "author": "prb112", "createdAt": "2020-11-09T13:42:49Z", "path": "fhir-persistence-jdbc/src/main/java/com/ibm/fhir/persistence/jdbc/JDBCConstants.java", "diffHunk": "@@ -96,7 +96,7 @@\n     public static final String ASCENDING = \"ASC\";\n     public static final String DESCENDING = \"DESC\";\n \n-    public static final String DEFAULT_ORDERING = \" ORDER BY RESOURCE_ID ASC \";\n+    public static final String DEFAULT_ORDERING = \" ORDER BY LOGICAL_RESOURCE_ID ASC \";\n     public static final String DEFAULT_ORDERING_WITH_TABLE = \" ORDER BY R.RESOURCE_ID ASC \";", "originalCommit": "8de7c691542d7272cd364472a55166863650086a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTgyMjg5Mw==", "url": "https://github.com/IBM/FHIR/pull/1678#discussion_r519822893", "bodyText": "just noticing this line, should it be updated?", "author": "prb112", "createdAt": "2020-11-09T13:43:06Z", "path": "fhir-persistence-jdbc/src/main/java/com/ibm/fhir/persistence/jdbc/JDBCConstants.java", "diffHunk": "@@ -96,7 +96,7 @@\n     public static final String ASCENDING = \"ASC\";\n     public static final String DESCENDING = \"DESC\";\n \n-    public static final String DEFAULT_ORDERING = \" ORDER BY RESOURCE_ID ASC \";\n+    public static final String DEFAULT_ORDERING = \" ORDER BY LOGICAL_RESOURCE_ID ASC \";\n     public static final String DEFAULT_ORDERING_WITH_TABLE = \" ORDER BY R.RESOURCE_ID ASC \";", "originalCommit": "8de7c691542d7272cd364472a55166863650086a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}