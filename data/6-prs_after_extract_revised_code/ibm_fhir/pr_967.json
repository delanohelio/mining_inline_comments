{"pr_number": 967, "pr_title": "Fix for JKS to PKCS12 change", "pr_createdAt": "2020-04-22T15:24:15Z", "pr_url": "https://github.com/IBM/FHIR/pull/967", "timeline": [{"oid": "3304541e83911fc1667c7592e3b160a4a1579455", "url": "https://github.com/IBM/FHIR/commit/3304541e83911fc1667c7592e3b160a4a1579455", "message": "Fix for JKS to PKCS12 change\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-04-22T15:23:18Z", "type": "commit"}, {"oid": "face309c631113d0123f9f564593fb48e22f8551", "url": "https://github.com/IBM/FHIR/commit/face309c631113d0123f9f564593fb48e22f8551", "message": "Convert Kafka Keystore Truststore to PKCS12\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-04-22T15:28:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA5MzkyMw==", "url": "https://github.com/IBM/FHIR/pull/967#discussion_r413093923", "bodyText": "can it be a relative path?\nif not, then maybe add a placeholder for git and a comment to say you should change it to the path on your system?", "author": "lmsurpre", "createdAt": "2020-04-22T15:40:59Z", "path": "fhir-operation-bulkdata/src/test/java/com/ibm/fhir/operation/bulkdata/client/BulkDataClientMain.java", "diffHunk": "@@ -20,7 +20,8 @@ public static void main(String... args) throws Exception {\n         properties.put(BulkDataConfigUtil.BATCH_USER, \"fhiradmin\");\n         properties.put(BulkDataConfigUtil.BATCH_USER_PASS, \"change-password\");\n                 \n-        properties.put(BulkDataConfigUtil.BATCH_TRUSTSTORE, \"/Users/paulbastide/git/wffh/wlp/wlp/usr/servers/defaultServer/resources/security/fhirTruststore.jks\");\n+        properties.put(BulkDataConfigUtil.BATCH_TRUSTSTORE,\n+                \"/Users/paulbastide/git/wffh/wlp/wlp/usr/servers/defaultServer/resources/security/fhirTruststore.p12\");", "originalCommit": "face309c631113d0123f9f564593fb48e22f8551", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA5ODE1MA==", "url": "https://github.com/IBM/FHIR/pull/967#discussion_r413098150", "bodyText": "Fixed", "author": "prb112", "createdAt": "2020-04-22T15:46:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA5MzkyMw=="}], "type": "inlineReview", "revised_code": {"commit": "375583429a0ba18bd27d98cf69f90389e027719e", "chunk": "diff --git a/fhir-operation-bulkdata/src/test/java/com/ibm/fhir/operation/bulkdata/client/BulkDataClientMain.java b/fhir-operation-bulkdata/src/test/java/com/ibm/fhir/operation/bulkdata/client/BulkDataClientMain.java\nindex c777d76e88..410d556d2f 100644\n--- a/fhir-operation-bulkdata/src/test/java/com/ibm/fhir/operation/bulkdata/client/BulkDataClientMain.java\n+++ b/fhir-operation-bulkdata/src/test/java/com/ibm/fhir/operation/bulkdata/client/BulkDataClientMain.java\n\n@@ -11,23 +11,22 @@ import java.util.Map;\n import com.ibm.fhir.operation.bulkdata.config.BulkDataConfigUtil;\n \n /**\n- * Client that Runs the BulkData Client Manually. \n+ * Client that Runs the BulkData Client Manually.\n  */\n public class BulkDataClientMain {\n     public static void main(String... args) throws Exception {\n-        Map<String,String> properties = new LinkedHashMap<>();\n+        Map<String, String> properties = new LinkedHashMap<>();\n         properties.put(BulkDataConfigUtil.BATCH_URL, \"https://localhost:9443/ibm/api/batch/jobinstances\");\n         properties.put(BulkDataConfigUtil.BATCH_USER, \"fhiradmin\");\n         properties.put(BulkDataConfigUtil.BATCH_USER_PASS, \"change-password\");\n-                \n+\n+        // Update for your p12 location\n         properties.put(BulkDataConfigUtil.BATCH_TRUSTSTORE,\n-                \"/Users/paulbastide/git/wffh/wlp/wlp/usr/servers/defaultServer/resources/security/fhirTruststore.p12\");\n+                \"../fhir-server/servers/defaultServer/resources/security/fhirTruststore.p12\");\n         properties.put(BulkDataConfigUtil.BATCH_TRUSTSTORE_PASS, \"change-password\");\n-        \n+\n         BulkDataClient client = new BulkDataClient(properties);\n-        \n-        // client.submit(null, null, Arrays.asList(\"Patient\"), properties);\n-        \n+\n         client.status(\"9\");\n     }\n }\n\\ No newline at end of file\n"}}, {"oid": "375583429a0ba18bd27d98cf69f90389e027719e", "url": "https://github.com/IBM/FHIR/commit/375583429a0ba18bd27d98cf69f90389e027719e", "message": "Convert Kafka Keystore Truststore to PKCS12\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-04-22T15:45:59Z", "type": "commit"}, {"oid": "eefa0c0c37ee8eeb845a408b91b73d9d9ebc1318", "url": "https://github.com/IBM/FHIR/commit/eefa0c0c37ee8eeb845a408b91b73d9d9ebc1318", "message": "Fix for p12 issue and subsequent issues\n\nFixed an error condition when the array is empty (it never checks for\nCOS)\nChanged cosEndpintUrl to cosEndpointUrl\nUpdated the ImportOperationTest\nFixed issue with JOB_PARAMETERS_ID\nRenamed Configuration Name\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-04-22T17:25:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE4MTQyNg==", "url": "https://github.com/IBM/FHIR/pull/967#discussion_r413181426", "bodyText": "the mix of all-lower and camelCase looks odd to me", "author": "lmsurpre", "createdAt": "2020-04-22T17:35:32Z", "path": "fhir-bulkimportexport-webapp/src/main/java/com/ibm/fhir/bulktools/Main.java", "diffHunk": "@@ -97,7 +97,7 @@\n      * Parse the command line arguments\n      *   --cosapikey:       the IBM COS API key or S3 access key.\n      *   --cossrvinstid:    the IBM COS service instance id or S3 secret key.\n-     *   --cosendpinturl:   the IBM COS or S3 End point URL.\n+     *   --cosEndpointUrl:   the IBM COS or S3 End point URL.\n      *   --coslocation:     the IBM COS or S3 location.\n      *   --cosbucketname:   the IBM COS or S3 bucket name to import from.\n      *   --coscredentialibm: if use IBM credential(Y/N), default(Y).", "originalCommit": "eefa0c0c37ee8eeb845a408b91b73d9d9ebc1318", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE4MzE2Nw==", "url": "https://github.com/IBM/FHIR/pull/967#discussion_r413183167", "bodyText": "I can't speak to it", "author": "prb112", "createdAt": "2020-04-22T17:38:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE4MTQyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE4Nzk1OA==", "url": "https://github.com/IBM/FHIR/pull/967#discussion_r413187958", "bodyText": "fixed", "author": "prb112", "createdAt": "2020-04-22T17:44:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE4MTQyNg=="}], "type": "inlineReview", "revised_code": {"commit": "5c310d897ca3eaccb91ed4caeea4d61175bb8653", "chunk": "diff --git a/fhir-bulkimportexport-webapp/src/main/java/com/ibm/fhir/bulktools/Main.java b/fhir-bulkimportexport-webapp/src/main/java/com/ibm/fhir/bulktools/Main.java\nindex 0ab66aada8..015446ae01 100644\n--- a/fhir-bulkimportexport-webapp/src/main/java/com/ibm/fhir/bulktools/Main.java\n+++ b/fhir-bulkimportexport-webapp/src/main/java/com/ibm/fhir/bulktools/Main.java\n\n@@ -95,23 +95,26 @@ public class Main {\n \n     /**\n      * Parse the command line arguments\n-     *   --cosapikey:       the IBM COS API key or S3 access key.\n-     *   --cossrvinstid:    the IBM COS service instance id or S3 secret key.\n-     *   --cosEndpointUrl:   the IBM COS or S3 End point URL.\n-     *   --coslocation:     the IBM COS or S3 location.\n-     *   --cosbucketname:   the IBM COS or S3 bucket name to import from.\n-     *   --coscredentialibm: if use IBM credential(Y/N), default(Y).\n-     *   --cosfiletobreak:    the file(COS/S3 object) to break.\n-     *   --numberoffiles:    how many pieces (COS/S3 objects) to break into.\n-     *   --numberoftotalresources: the total number of distinct FHIR resources we want to include in the target files.\n-     *                             used only when segBySize is 'N'(by number of records).\n-     *   --segbysize:        break the file by file size(default) or by number of records(\"N\").\n-     *                       (1) if by file size, then we get the total file size from the object meta directly,\n-     *                           and each piece with size close to (total-file-size/numberOfFiles).\n-     *                       (2) if by number of records\n-     *                           (a) with numberOfTotalResources, then each piece has (numberOfTotalResources/numberOfFiles) distinct FHIR resources.\n-     *                           (b) without numberOfTotalResources, then we go thought the COS/S3 once to get the total record number, then each piece\n-     *                               will have (total-record-number/numberOfFiles) lines in it.\n+     * --cosapikey: the IBM COS API key or S3 access key.\n+     * --cossrvinstid: the IBM COS service instance id or S3 secret key.\n+     * --cosendpointurl: the IBM COS or S3 End point URL.\n+     * --coslocation: the IBM COS or S3 location.\n+     * --cosbucketname: the IBM COS or S3 bucket name to import from.\n+     * --coscredentialibm: if use IBM credential(Y/N), default(Y).\n+     * --cosfiletobreak: the file(COS/S3 object) to break.\n+     * --numberoffiles: how many pieces (COS/S3 objects) to break into.\n+     * --numberoftotalresources: the total number of distinct FHIR resources we want to include in the target files.\n+     * used only when segBySize is 'N'(by number of records).\n+     * --segbysize: break the file by file size(default) or by number of records(\"N\").\n+     * (1) if by file size, then we get the total file size from the object meta directly,\n+     * and each piece with size close to (total-file-size/numberOfFiles).\n+     * (2) if by number of records\n+     * (a) with numberOfTotalResources, then each piece has (numberOfTotalResources/numberOfFiles) distinct FHIR\n+     * resources.\n+     * (b) without numberOfTotalResources, then we go thought the COS/S3 once to get the total record number, then each\n+     * piece\n+     * will have (total-record-number/numberOfFiles) lines in it.\n+     * \n      * @param args\n      */\n     public void parseArgs(String[] args) {\n"}}, {"oid": "5c310d897ca3eaccb91ed4caeea4d61175bb8653", "url": "https://github.com/IBM/FHIR/commit/5c310d897ca3eaccb91ed4caeea4d61175bb8653", "message": "Fix for p12 issue and subsequent issues\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-04-22T17:44:22Z", "type": "commit"}]}