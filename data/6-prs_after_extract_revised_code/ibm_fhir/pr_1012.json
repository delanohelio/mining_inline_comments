{"pr_number": 1012, "pr_title": "Issue #1011 - fixed bug in exists function", "pr_createdAt": "2020-05-01T17:42:24Z", "pr_url": "https://github.com/IBM/FHIR/pull/1012", "timeline": [{"oid": "b29bb6a885fd04dc714001cda4bbc02ad1eaa31c", "url": "https://github.com/IBM/FHIR/commit/b29bb6a885fd04dc714001cda4bbc02ad1eaa31c", "message": "Issue #1011 - fixed bug in exists function\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-05-01T17:42:05Z", "type": "commit"}, {"oid": "ffd02795a04420f09385510d859d98730bab3b61", "url": "https://github.com/IBM/FHIR/commit/ffd02795a04420f09385510d859d98730bab3b61", "message": "Issue #1011 - minor tweak in unit test\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-05-01T17:46:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NTg5OA==", "url": "https://github.com/IBM/FHIR/pull/1012#discussion_r418655898", "bodyText": "So this is consistent with the where function?\nWhat is the result if the argument is non-empty and non-boolean?", "author": "lmsurpre", "createdAt": "2020-05-01T17:49:13Z", "path": "fhir-path/src/main/java/com/ibm/fhir/path/evaluator/FHIRPathEvaluator.java", "diffHunk": "@@ -367,8 +367,10 @@ private void reset() {\n             if (arguments.size() < 0 || arguments.size() > 1) {\n                 throw unexpectedNumberOfArguments(arguments.size(), \"exists\");\n             }\n-            Collection<FHIRPathNode> nodes = arguments.isEmpty() ? getCurrentContext() : visit(arguments.get(0));\n-            return !nodes.isEmpty() ? SINGLETON_TRUE : SINGLETON_FALSE;\n+            if (arguments.isEmpty()) {\n+                return !getCurrentContext().isEmpty() ? SINGLETON_TRUE : SINGLETON_FALSE;\n+            }\n+            return isTrue(visit(arguments.get(0))) ? SINGLETON_TRUE : SINGLETON_FALSE;", "originalCommit": "ffd02795a04420f09385510d859d98730bab3b61", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NjM0Ng==", "url": "https://github.com/IBM/FHIR/pull/1012#discussion_r418656346", "bodyText": "it will return false if the argument evaluates to a non-empty or non-boolean", "author": "JohnTimm", "createdAt": "2020-05-01T17:50:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NTg5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY2NjkwNg==", "url": "https://github.com/IBM/FHIR/pull/1012#discussion_r418666906", "bodyText": "i confirmed with john that this matches the where function, so this looks good to me", "author": "lmsurpre", "createdAt": "2020-05-01T18:13:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NTg5OA=="}], "type": "inlineReview", "revised_code": null}]}