{"pr_number": 1519, "pr_title": "process ui events after test to avoid memory leak in tests", "pr_createdAt": "2020-08-24T06:55:38Z", "pr_url": "https://github.com/eclipse/xtext-eclipse/pull/1519", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM4MTIwNg==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1519#discussion_r475381206", "bodyText": "Should this be called from closeEditors?", "author": "szarnekow", "createdAt": "2020-08-24T07:01:19Z", "path": "org.eclipse.xtext.ui.testing/src/org/eclipse/xtext/ui/testing/AbstractAutoEditTest.java", "diffHunk": "@@ -50,6 +51,15 @@ public void tearDown() throws Exception {\n \t\tfiles.clear();\n \t\tcloseEditors();\n \t\tsuper.tearDown();\n+\t\twaitForEventProcessing();\n+\t}\n+\t\n+\t/**\n+\t * @since 2.23\n+\t */\n+\tprotected void waitForEventProcessing() {", "originalCommit": "06f63aa72b13badd4b837c3a0bce8adba9f04c62", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQwNzQ2OA==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1519#discussion_r475407468", "bodyText": "good question. or from the baseclass", "author": "cdietrich", "createdAt": "2020-08-24T07:55:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM4MTIwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQxMDc2MA==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1519#discussion_r475410760", "bodyText": "I've a preference towards pushing org.eclipse.xtext.ui.testing.AbstractHighlightingTest.waitForEventProcessing() into the AbstractWorkbenchTest and calling it from its tearDown.", "author": "szarnekow", "createdAt": "2020-08-24T08:01:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM4MTIwNg=="}], "type": "inlineReview", "revised_code": {"commit": "9f35e6d53bf703f4ba3b1b7b6bd21604cef79d48", "chunk": "diff --git a/org.eclipse.xtext.ui.testing/src/org/eclipse/xtext/ui/testing/AbstractAutoEditTest.java b/org.eclipse.xtext.ui.testing/src/org/eclipse/xtext/ui/testing/AbstractAutoEditTest.java\nindex 2bdab2061..fb4f576f3 100644\n--- a/org.eclipse.xtext.ui.testing/src/org/eclipse/xtext/ui/testing/AbstractAutoEditTest.java\n+++ b/org.eclipse.xtext.ui.testing/src/org/eclipse/xtext/ui/testing/AbstractAutoEditTest.java\n\n@@ -51,15 +50,6 @@ public abstract class AbstractAutoEditTest extends AbstractEditorTest {\n \t\tfiles.clear();\n \t\tcloseEditors();\n \t\tsuper.tearDown();\n-\t\twaitForEventProcessing();\n-\t}\n-\t\n-\t/**\n-\t * @since 2.23\n-\t */\n-\tprotected void waitForEventProcessing() {\n-\t\twhile (Display.getDefault().readAndDispatch()) {\n-\t\t}\n \t}\n \t\n \tprotected abstract String getFileExtension();\n"}}, {"oid": "9f35e6d53bf703f4ba3b1b7b6bd21604cef79d48", "url": "https://github.com/eclipse/xtext-eclipse/commit/9f35e6d53bf703f4ba3b1b7b6bd21604cef79d48", "message": "process ui events after test to avoid memory leak in tests\n\nSigned-off-by: Christian Dietrich <christian.dietrich@itemis.de>", "committedDate": "2020-08-24T08:07:13Z", "type": "commit"}, {"oid": "9f35e6d53bf703f4ba3b1b7b6bd21604cef79d48", "url": "https://github.com/eclipse/xtext-eclipse/commit/9f35e6d53bf703f4ba3b1b7b6bd21604cef79d48", "message": "process ui events after test to avoid memory leak in tests\n\nSigned-off-by: Christian Dietrich <christian.dietrich@itemis.de>", "committedDate": "2020-08-24T08:07:13Z", "type": "forcePushed"}]}