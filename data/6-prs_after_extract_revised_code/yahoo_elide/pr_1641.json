{"pr_number": 1641, "pr_title": "Collapse Cardinality into ColumnMeta and TableMeta.", "pr_createdAt": "2020-11-05T17:52:21Z", "pr_url": "https://github.com/yahoo/elide/pull/1641", "timeline": [{"oid": "f11c7dfee1e4c830de583aa748f2f1405d3c263e", "url": "https://github.com/yahoo/elide/commit/f11c7dfee1e4c830de583aa748f2f1405d3c263e", "message": "Collapse Cardinality into ColumnMeta and TableMeta.", "committedDate": "2020-11-05T20:44:50Z", "type": "forcePushed"}, {"oid": "05dde74c6830faebec1bc8bac3b0b567e37c0332", "url": "https://github.com/yahoo/elide/commit/05dde74c6830faebec1bc8bac3b0b567e37c0332", "message": "Collapse Cardinality into ColumnMeta and TableMeta.", "committedDate": "2020-11-05T22:47:56Z", "type": "commit"}, {"oid": "1270b33424ee18c583fc6d91e991a822380c9910", "url": "https://github.com/yahoo/elide/commit/1270b33424ee18c583fc6d91e991a822380c9910", "message": "Fix rebase", "committedDate": "2020-11-05T22:47:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQxODYzNg==", "url": "https://github.com/yahoo/elide/pull/1641#discussion_r518418636", "bodyText": "Why not just set it to unknown here instead of null?", "author": "aklish", "createdAt": "2020-11-05T22:52:14Z", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/metadata/models/Column.java", "diffHunk": "@@ -79,11 +82,13 @@ protected Column(Table table, String fieldName, EntityDictionary dictionary) {\n             this.category = meta.category();\n             this.values = new HashSet<>(Arrays.asList(meta.values()));\n             this.tags = new HashSet<>(Arrays.asList(meta.tags()));\n+            this.cardinality = (meta.size().equals(CardinalitySize.UNKNOWN)) ? null : meta.size();", "originalCommit": "f8f59aefb365517b29800edb943514bf3dc3a507", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQyODk3Mw==", "url": "https://github.com/yahoo/elide/pull/1641#discussion_r518428973", "bodyText": "before this change if cardinality was not provided by end user, it was set as NULL so wanted to keep same expectation.\nChanging default to UNKNOWN instead of null", "author": "rishi-aga", "createdAt": "2020-11-05T23:18:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQxODYzNg=="}], "type": "inlineReview", "revised_code": {"commit": "453bf987c3571da8b471a6a501d5681d179afcf3", "chunk": "diff --git a/elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/metadata/models/Column.java b/elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/metadata/models/Column.java\nindex 30e7499f6..470e76b34 100644\n--- a/elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/metadata/models/Column.java\n+++ b/elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/metadata/models/Column.java\n\n@@ -82,12 +82,16 @@ public abstract class Column implements Versioned {\n             this.category = meta.category();\n             this.values = new HashSet<>(Arrays.asList(meta.values()));\n             this.tags = new HashSet<>(Arrays.asList(meta.tags()));\n+            this.tableSource = (meta.tableSource().trim().isEmpty()) ? null : meta.tableSource();\n+            this.valueSourceType = getValueSourceType();\n             this.cardinality = (meta.size().equals(CardinalitySize.UNKNOWN)) ? null : meta.size();\n         } else {\n             this.description = null;\n             this.category = null;\n             this.values = null;\n             this.tags = new HashSet<>();\n+            this.tableSource = null;\n+            this.valueSourceType = ValueSourceType.NONE;\n             this.cardinality = null;\n         }\n \n"}}, {"oid": "453bf987c3571da8b471a6a501d5681d179afcf3", "url": "https://github.com/yahoo/elide/commit/453bf987c3571da8b471a6a501d5681d179afcf3", "message": "Rebase Fix", "committedDate": "2020-11-05T23:12:05Z", "type": "commit"}, {"oid": "453bf987c3571da8b471a6a501d5681d179afcf3", "url": "https://github.com/yahoo/elide/commit/453bf987c3571da8b471a6a501d5681d179afcf3", "message": "Rebase Fix", "committedDate": "2020-11-05T23:12:05Z", "type": "forcePushed"}, {"oid": "d67b8bb2362ef11fc44990d0719c38bec90df688", "url": "https://github.com/yahoo/elide/commit/d67b8bb2362ef11fc44990d0719c38bec90df688", "message": "Review Comment: Change default to UNKNOWN instead of null", "committedDate": "2020-11-05T23:17:49Z", "type": "commit"}, {"oid": "4b30f1bbebd4a1572cd7a6881dca49a1f3faedf9", "url": "https://github.com/yahoo/elide/commit/4b30f1bbebd4a1572cd7a6881dca49a1f3faedf9", "message": "Build Fix", "committedDate": "2020-11-06T14:55:29Z", "type": "commit"}, {"oid": "a37f57c52c20649a43e980edc29875c5b4f37b57", "url": "https://github.com/yahoo/elide/commit/a37f57c52c20649a43e980edc29875c5b4f37b57", "message": "Merge branch 'elide-5.x' into collapse_cardinality", "committedDate": "2020-11-06T17:47:09Z", "type": "commit"}]}