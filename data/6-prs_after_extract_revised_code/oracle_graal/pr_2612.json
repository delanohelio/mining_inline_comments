{"pr_number": 2612, "pr_title": "Generate correct debug info for deoptimization target methods", "pr_createdAt": "2020-06-25T08:20:39Z", "pr_url": "https://github.com/oracle/graal/pull/2612", "timeline": [{"oid": "ca3de5eafeddfb59dc7c8bf2ca2eb828d6c8b457", "url": "https://github.com/oracle/graal/commit/ca3de5eafeddfb59dc7c8bf2ca2eb828d6c8b457", "message": "Generate correct debug info for deoptimization target methods", "committedDate": "2020-06-25T08:03:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQxODE1NQ==", "url": "https://github.com/oracle/graal/pull/2612#discussion_r445418155", "bodyText": "Might be a good idea to define a public static field METHOD_NAME_DEOPT_SUFFIX for \"**\" in src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/meta/HostedMethod.java:247 and use that field also here.", "author": "olpaw", "createdAt": "2020-06-25T09:11:14Z", "path": "substratevm/src/com.oracle.objectfile/src/com/oracle/objectfile/debugentry/Range.java", "diffHunk": "@@ -133,6 +133,10 @@ public String getFullMethodName() {\n         return fullMethodName;\n     }\n \n+    public boolean isDeoptTarget() {\n+        return methodName.endsWith(\"**\");", "originalCommit": "ca3de5eafeddfb59dc7c8bf2ca2eb828d6c8b457", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ1OTkwMw==", "url": "https://github.com/oracle/graal/pull/2612#discussion_r445459903", "bodyText": "Yes, will do.", "author": "adinn", "createdAt": "2020-06-25T10:26:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQxODE1NQ=="}], "type": "inlineReview", "revised_code": {"commit": "866605d71e3cc625c19cf37e097e7a3e5ce6a985", "chunk": "diff --git a/substratevm/src/com.oracle.objectfile/src/com/oracle/objectfile/debugentry/Range.java b/substratevm/src/com.oracle.objectfile/src/com/oracle/objectfile/debugentry/Range.java\nindex 489dafbb6a1..8bd16b9a1ed 100644\n--- a/substratevm/src/com.oracle.objectfile/src/com/oracle/objectfile/debugentry/Range.java\n+++ b/substratevm/src/com.oracle.objectfile/src/com/oracle/objectfile/debugentry/Range.java\n\n@@ -134,7 +142,7 @@ public class Range {\n     }\n \n     public boolean isDeoptTarget() {\n-        return methodName.endsWith(\"**\");\n+        return isDeoptTarget;\n     }\n \n     private String getExtendedMethodName(boolean includeParams, boolean includeReturnType) {\n"}}, {"oid": "9ca6d6d61ef93b6c846e59b3e5cde7ea6ca967f8", "url": "https://github.com/oracle/graal/commit/9ca6d6d61ef93b6c846e59b3e5cde7ea6ca967f8", "message": "correct error in setting CU index for deopt targets", "committedDate": "2020-06-25T14:27:56Z", "type": "commit"}, {"oid": "866605d71e3cc625c19cf37e097e7a3e5ce6a985", "url": "https://github.com/oracle/graal/commit/866605d71e3cc625c19cf37e097e7a3e5ce6a985", "message": "use static field to identify deopt target method suffix", "committedDate": "2020-06-25T14:28:37Z", "type": "commit"}, {"oid": "6c5420a33a06c782d709e48165bf6b89cc442981", "url": "https://github.com/oracle/graal/commit/6c5420a33a06c782d709e48165bf6b89cc442981", "message": "style fixes", "committedDate": "2020-06-26T10:34:05Z", "type": "commit"}, {"oid": "33049a0761ca6f1de1f6b2bcf867b8ff59d9c4bf", "url": "https://github.com/oracle/graal/commit/33049a0761ca6f1de1f6b2bcf867b8ff59d9c4bf", "message": "eclipse style fixes", "committedDate": "2020-06-26T14:11:36Z", "type": "commit"}]}