{"pr_number": 2813, "pr_title": "Replace getdtablesize with sysconf(_SC_OPEN_MAX)", "pr_createdAt": "2020-08-28T15:27:37Z", "pr_url": "https://github.com/oracle/graal/pull/2813", "timeline": [{"oid": "4c791135b5a89ee4b16fbaacaa44c2565881f867", "url": "https://github.com/oracle/graal/commit/4c791135b5a89ee4b16fbaacaa44c2565881f867", "message": "Replace getdtablesize with sysconf(_SC_OPEN_MAX)\nFix for #2812", "committedDate": "2020-08-28T15:25:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc1MDgyOQ==", "url": "https://github.com/oracle/graal/pull/2813#discussion_r479750829", "bodyText": "There is a missing space here.", "author": "vjovanov", "createdAt": "2020-08-30T10:18:58Z", "path": "substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java", "diffHunk": "@@ -80,7 +80,7 @@ public long getMaxFileDescriptorCount() {\n \n     @Override\n     public long getOpenFileDescriptorCount() {\n-        int maxFileDescriptor = Unistd.getdtablesize();\n+        int maxFileDescriptor = (int)Unistd.sysconf(Unistd._SC_OPEN_MAX());", "originalCommit": "4c791135b5a89ee4b16fbaacaa44c2565881f867", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3c581f9729f4613d2689d618d6dc20feb135f2ae", "chunk": "diff --git a/substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java b/substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java\nindex 82416316706..c1dc11fc5f3 100644\n--- a/substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java\n+++ b/substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java\n\n@@ -80,7 +80,7 @@ class PosixSubstrateOperatingSystemMXBean extends SubstrateOperatingSystemMXBean\n \n     @Override\n     public long getOpenFileDescriptorCount() {\n-        int maxFileDescriptor = (int)Unistd.sysconf(Unistd._SC_OPEN_MAX());\n+        int maxFileDescriptor = (int) Unistd.sysconf(Unistd._SC_OPEN_MAX());\n         long count = 0;\n         for (int i = 0; i <= maxFileDescriptor; i++) {\n             if (fstat(i) == 0 || CErrorNumber.getCErrorNumber() != Errno.EBADF()) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc3NzgxNQ==", "url": "https://github.com/oracle/graal/pull/2813#discussion_r479777815", "bodyText": "This function is not needed anymore. Please remove it.", "author": "vjovanov", "createdAt": "2020-08-30T14:37:42Z", "path": "substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java", "diffHunk": "@@ -80,7 +80,7 @@ public long getMaxFileDescriptorCount() {\n \n     @Override\n     public long getOpenFileDescriptorCount() {\n-        int maxFileDescriptor = Unistd.getdtablesize();", "originalCommit": "4c791135b5a89ee4b16fbaacaa44c2565881f867", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3c581f9729f4613d2689d618d6dc20feb135f2ae", "chunk": "diff --git a/substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java b/substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java\nindex 82416316706..c1dc11fc5f3 100644\n--- a/substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java\n+++ b/substratevm/src/com.oracle.svm.core.posix/src/com/oracle/svm/core/posix/PosixSubstrateOperatingSystemMXBean.java\n\n@@ -80,7 +80,7 @@ class PosixSubstrateOperatingSystemMXBean extends SubstrateOperatingSystemMXBean\n \n     @Override\n     public long getOpenFileDescriptorCount() {\n-        int maxFileDescriptor = (int)Unistd.sysconf(Unistd._SC_OPEN_MAX());\n+        int maxFileDescriptor = (int) Unistd.sysconf(Unistd._SC_OPEN_MAX());\n         long count = 0;\n         for (int i = 0; i <= maxFileDescriptor; i++) {\n             if (fstat(i) == 0 || CErrorNumber.getCErrorNumber() != Errno.EBADF()) {\n"}}, {"oid": "3c581f9729f4613d2689d618d6dc20feb135f2ae", "url": "https://github.com/oracle/graal/commit/3c581f9729f4613d2689d618d6dc20feb135f2ae", "message": "process reviewer comments", "committedDate": "2020-08-31T11:28:56Z", "type": "commit"}]}