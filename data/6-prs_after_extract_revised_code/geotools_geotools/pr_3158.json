{"pr_number": 3158, "pr_title": "[GEOT-6703] Dwithin old syntax no longer supported", "pr_createdAt": "2020-09-17T11:50:57Z", "pr_url": "https://github.com/geotools/geotools/pull/3158", "timeline": [{"oid": "5916f354545007cd00f68b76373a533172850ee0", "url": "https://github.com/geotools/geotools/commit/5916f354545007cd00f68b76373a533172850ee0", "message": "[GEOT-6703] Dwithin old syntax no longer supported", "committedDate": "2020-09-24T15:58:17Z", "type": "forcePushed"}, {"oid": "fca6aaaca8869208d2e9281bc85305c9f27a58e0", "url": "https://github.com/geotools/geotools/commit/fca6aaaca8869208d2e9281bc85305c9f27a58e0", "message": "[GEOT-6703] Dwithin old syntax no longer supported", "committedDate": "2020-09-24T16:09:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDgyNzA5NQ==", "url": "https://github.com/geotools/geotools/pull/3158#discussion_r494827095", "bodyText": "The DistanceUnits constructor has been relaxed allowing null units.", "author": "alemarte", "createdAt": "2020-09-25T08:21:28Z", "path": "modules/extension/xsd/xsd-filter/src/main/java/org/geotools/filter/v1_0/DistanceUnits.java", "diffHunk": "@@ -35,9 +35,11 @@ private DistanceUnits(double distance, String units) {\n         if (distance < 0) {\n             throw new IllegalArgumentException(\"distance must be >= 0\");\n         }\n-        if (units == null) {\n-            throw new IllegalArgumentException(\"units must not be null\");\n-        }\n+\n+        // We still support old client queries without any units specified.", "originalCommit": "fca6aaaca8869208d2e9281bc85305c9f27a58e0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTc2NzAyNw==", "url": "https://github.com/geotools/geotools/pull/3158#discussion_r495767027", "bodyText": "Please remove the commented out code, the comment could use a small update too. E.g.:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // We still support old client queries without any units specified.\n          \n          \n            \n                    // We still support old client queries without any units specified, thus allowing units to be null.", "author": "aaime", "createdAt": "2020-09-28T08:21:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDgyNzA5NQ=="}], "type": "inlineReview", "revised_code": {"commit": "1d3b4f93e095919edc50532385709e0e61c34fc3", "chunk": "diff --git a/modules/extension/xsd/xsd-filter/src/main/java/org/geotools/filter/v1_0/DistanceUnits.java b/modules/extension/xsd/xsd-filter/src/main/java/org/geotools/filter/v1_0/DistanceUnits.java\nindex 8a1e427131..85afe306a6 100644\n--- a/modules/extension/xsd/xsd-filter/src/main/java/org/geotools/filter/v1_0/DistanceUnits.java\n+++ b/modules/extension/xsd/xsd-filter/src/main/java/org/geotools/filter/v1_0/DistanceUnits.java\n\n@@ -31,15 +31,16 @@ public final class DistanceUnits {\n         return new DistanceUnits(distance, units);\n     }\n \n+    /**\n+     * We still support old client queries without any units specified, thus allowing units to be null.\n+     *\n+     * @param distance\n+     * @param units\n+     */\n     private DistanceUnits(double distance, String units) {\n         if (distance < 0) {\n             throw new IllegalArgumentException(\"distance must be >= 0\");\n         }\n-\n-        // We still support old client queries without any units specified.\n-        // if (units == null) {\n-        //     throw new IllegalArgumentException(\"units must not be null\");\n-        // }\n         this.distance = distance;\n         this.units = units;\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTc2NTc2Mg==", "url": "https://github.com/geotools/geotools/pull/3158#discussion_r495765762", "bodyText": "Has it actually been generated?", "author": "aaime", "createdAt": "2020-09-28T08:18:54Z", "path": "modules/extension/xsd/xsd-fes/src/main/java/org/geotools/filter/v2_0/bindings/MeasureTypeBinding.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*\n+ *    GeoTools - The Open Source Java GIS Toolkit\n+ *    http://geotools.org\n+ *\n+ *    (C) 2002-2008, Open Source Geospatial Foundation (OSGeo)\n+ *\n+ *    This library is free software; you can redistribute it and/or\n+ *    modify it under the terms of the GNU Lesser General Public\n+ *    License as published by the Free Software Foundation;\n+ *    version 2.1 of the License.\n+ *\n+ *    This library is distributed in the hope that it will be useful,\n+ *    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ *    Lesser General Public License for more details.\n+ */\n+package org.geotools.filter.v2_0.bindings;\n+\n+import javax.xml.namespace.QName;\n+import net.opengis.fes20.MeasureType;\n+import org.geotools.filter.v1_0.DistanceUnits;\n+import org.geotools.filter.v2_0.FES;\n+import org.geotools.xsd.AbstractComplexBinding;\n+import org.geotools.xsd.ElementInstance;\n+import org.geotools.xsd.Node;\n+import org.opengis.filter.FilterFactory;\n+import org.opengis.filter.FilterFactory2;\n+\n+/**\n+ * Binding object for the type http://www.opengis.net/fes/2.0:MeasureType.\n+ *\n+ * <p>\n+ *\n+ * <pre>\n+ *       <code>\n+ *\n+ *  &lt;xsd:complexType name=\"MeasureType\"&gt;\n+ *      &lt;xsd:simpleContent&gt;\n+ *          &lt;xsd:extension base=\"xsd:double\"&gt;\n+ *              &lt;xsd:attribute name=\"uom\" type=\"fes:UomIdentifier\" use=\"required\"/&gt;\n+ *          &lt;/xsd:extension&gt;\n+ *      &lt;/xsd:simpleContent&gt;\n+ *  &lt;/xsd:complexType&gt;\n+ *\n+ *  &lt;xsd:simpleType name=\"UomIdentifier\"&gt;\n+ *      &lt;xsd:union memberTypes=\"fes:UomSymbol fes:UomURI\"/&gt;\n+ *  &lt;/xsd:simpleType&gt;\n+ *\n+ *  &lt;xsd:simpleType name=\"UomSymbol\"&gt;\n+ *      &lt;xsd:restriction base=\"xsd:string\"&gt;\n+ *          &lt;xsd:pattern value=\"[^: \\n\\r\\t]+\"/&gt;\n+ *      &lt;/xsd:restriction&gt;\n+ *  &lt;/xsd:simpleType&gt;\n+ *\n+ *         </code>\n+ *  </pre>\n+ *\n+ * @generated", "originalCommit": "fca6aaaca8869208d2e9281bc85305c9f27a58e0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg4NTE5NA==", "url": "https://github.com/geotools/geotools/pull/3158#discussion_r496885194", "bodyText": "Actually, I copy paste from the definition. Is there a tool to automate the process?", "author": "alemarte", "createdAt": "2020-09-29T16:40:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTc2NTc2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MzIyMA==", "url": "https://github.com/geotools/geotools/pull/3158#discussion_r498383220", "bodyText": "There is but only useful to get started. When you copy/paste, mind what you're copying. If not generated, the annotation should be removed.", "author": "aaime", "createdAt": "2020-10-01T16:46:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTc2NTc2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "1d3b4f93e095919edc50532385709e0e61c34fc3", "chunk": "diff --git a/modules/extension/xsd/xsd-fes/src/main/java/org/geotools/filter/v2_0/bindings/MeasureTypeBinding.java b/modules/extension/xsd/xsd-fes/src/main/java/org/geotools/filter/v2_0/bindings/MeasureTypeBinding.java\nindex 76d9643765..a047538063 100644\n--- a/modules/extension/xsd/xsd-fes/src/main/java/org/geotools/filter/v2_0/bindings/MeasureTypeBinding.java\n+++ b/modules/extension/xsd/xsd-fes/src/main/java/org/geotools/filter/v2_0/bindings/MeasureTypeBinding.java\n\n@@ -54,8 +54,6 @@ import org.opengis.filter.FilterFactory2;\n  *\n  *         </code>\n  *  </pre>\n- *\n- * @generated\n  */\n public class MeasureTypeBinding extends AbstractComplexBinding {\n \n"}}, {"oid": "1d3b4f93e095919edc50532385709e0e61c34fc3", "url": "https://github.com/geotools/geotools/commit/1d3b4f93e095919edc50532385709e0e61c34fc3", "message": "[GEOT-6703] Dwithin old syntax no longer supported", "committedDate": "2020-10-02T08:13:31Z", "type": "forcePushed"}, {"oid": "aa0910100dd40160c4d7d19e0e129271dc12ab4d", "url": "https://github.com/geotools/geotools/commit/aa0910100dd40160c4d7d19e0e129271dc12ab4d", "message": "[GEOT-6703] Dwithin old syntax no longer supported", "committedDate": "2020-10-02T08:36:28Z", "type": "forcePushed"}, {"oid": "1cdea84c127a7dd1e3b117a41c73a273448931bd", "url": "https://github.com/geotools/geotools/commit/1cdea84c127a7dd1e3b117a41c73a273448931bd", "message": "[GEOT-6703] Dwithin old syntax no longer supported", "committedDate": "2020-10-05T09:40:15Z", "type": "commit"}, {"oid": "1cdea84c127a7dd1e3b117a41c73a273448931bd", "url": "https://github.com/geotools/geotools/commit/1cdea84c127a7dd1e3b117a41c73a273448931bd", "message": "[GEOT-6703] Dwithin old syntax no longer supported", "committedDate": "2020-10-05T09:40:15Z", "type": "forcePushed"}]}