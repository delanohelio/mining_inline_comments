{"pr_number": 2808, "pr_title": "[GEOT-6514] WMTSService class always returns null for getContactInformation()", "pr_createdAt": "2020-02-16T14:53:39Z", "pr_url": "https://github.com/geotools/geotools/pull/2808", "timeline": [{"oid": "207d28a337949f3e94910d625b2f38063a0c29ea", "url": "https://github.com/geotools/geotools/commit/207d28a337949f3e94910d625b2f38063a0c29ea", "message": "GEOT-6514 Updates to enable information from WMTS Getcapabilities calls to pass through to the WMTSService class", "committedDate": "2020-02-16T13:30:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDAzMzkzNw==", "url": "https://github.com/geotools/geotools/pull/2808#discussion_r380033937", "bodyText": "What's the rational for removing these additional checks?", "author": "ianturton", "createdAt": "2020-02-17T08:15:40Z", "path": "modules/extension/wmts/src/test/java/org/geotools/ows/wmts/WebMapTileServerTest.java", "diffHunk": "@@ -72,9 +72,7 @@ public void chGetEnvelopeTest() throws Exception {\n         // <ows:UpperCorner>11.47757 48.230651</ows:UpperCorner>\n         // </ows:WGS84BoundingBox>\n \n-        assertNotNull(wmts.getEnvelope(layer, CRS.decode(\"urn:ogc:def:crs:OGC:1.3:CRS84\")));\n-        assertNotNull(wmts.getEnvelope(layer, CRS.decode(\"CRS:84\")));\n-        assertNotNull(wmts.getEnvelope(layer, CRS.decode(\"EPSG:2056\")));\n+        assertNotNull(wmts.getEnvelope(layer, CRS.decode(\"urn:ogc:def:crs:EPSG:2056\")));", "originalCommit": "207d28a337949f3e94910d625b2f38063a0c29ea", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA2NzE0OQ==", "url": "https://github.com/geotools/geotools/pull/2808#discussion_r380067149", "bodyText": "Sorry, accidental, will put them back in", "author": "singhdan", "createdAt": "2020-02-17T09:27:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDAzMzkzNw=="}], "type": "inlineReview", "revised_code": {"commit": "5137043337e1dd75f680b885c59caee1651763b2", "chunk": "diff --git a/modules/extension/wmts/src/test/java/org/geotools/ows/wmts/WebMapTileServerTest.java b/modules/extension/wmts/src/test/java/org/geotools/ows/wmts/WebMapTileServerTest.java\nindex 0dc3543bc1..32aec59380 100644\n--- a/modules/extension/wmts/src/test/java/org/geotools/ows/wmts/WebMapTileServerTest.java\n+++ b/modules/extension/wmts/src/test/java/org/geotools/ows/wmts/WebMapTileServerTest.java\n\n@@ -72,7 +72,9 @@ public class WebMapTileServerTest {\n         // <ows:UpperCorner>11.47757 48.230651</ows:UpperCorner>\n         // </ows:WGS84BoundingBox>\n \n-        assertNotNull(wmts.getEnvelope(layer, CRS.decode(\"urn:ogc:def:crs:EPSG:2056\")));\n+        assertNotNull(wmts.getEnvelope(layer, CRS.decode(\"urn:ogc:def:crs:OGC:1.3:CRS84\")));\n+        assertNotNull(wmts.getEnvelope(layer, CRS.decode(\"CRS:84\")));\n+        assertNotNull(wmts.getEnvelope(layer, CRS.decode(\"EPSG:2056\")));\n \n         assertNull(wmts.getEnvelope(layer, CRS.decode(\"EPSG:4326\")));\n \n"}}, {"oid": "5137043337e1dd75f680b885c59caee1651763b2", "url": "https://github.com/geotools/geotools/commit/5137043337e1dd75f680b885c59caee1651763b2", "message": "GEOT-6514 Updates to enable information from WMTS Getcapabilities calls to pass through to the WMTSService class", "committedDate": "2020-02-17T09:49:59Z", "type": "commit"}, {"oid": "e2ff657597df32fd5d56aa9bb14f9456cfc06d98", "url": "https://github.com/geotools/geotools/commit/e2ff657597df32fd5d56aa9bb14f9456cfc06d98", "message": "Merge remote-tracking branch 'origin/master'\n\n# Conflicts:\n#\tmodules/library/metadata/pom.xml", "committedDate": "2020-02-17T09:52:25Z", "type": "commit"}, {"oid": "0c55eeb0db29203ab3fb06834afbae68cb044165", "url": "https://github.com/geotools/geotools/commit/0c55eeb0db29203ab3fb06834afbae68cb044165", "message": "Merge remote-tracking branch 'origin/master'\n\n# Conflicts:\n#\tmodules/library/metadata/pom.xml", "committedDate": "2020-02-17T10:21:14Z", "type": "commit"}, {"oid": "e5a335151e0fc01f8b90225dbfb50d2d387a2693", "url": "https://github.com/geotools/geotools/commit/e5a335151e0fc01f8b90225dbfb50d2d387a2693", "message": "Merge remote-tracking branch 'origin/master'\n\n# Conflicts:\n#\tmodules/library/metadata/pom.xml", "committedDate": "2020-02-17T10:23:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgzMzExOQ==", "url": "https://github.com/geotools/geotools/pull/2808#discussion_r382833119", "bodyText": "This needs a check against an empty serviceProvider. In the WMTS spec, the serviceProvder section is optional. Real life example is https://geodata.nationaalgeoregister.nl/tiles/service/wmts?request=GetCapabilities&service=WMTS", "author": "singhdan", "createdAt": "2020-02-21T22:18:35Z", "path": "modules/extension/wmts/src/main/java/org/geotools/ows/wmts/model/WMTSService.java", "diffHunk": "@@ -14,20 +14,49 @@\n  */\n package org.geotools.ows.wmts.model;\n \n+import java.net.MalformedURLException;\n+import java.net.URL;\n import java.util.ArrayList;\n import java.util.List;\n import net.opengis.ows11.LanguageStringType;\n import net.opengis.ows11.ServiceIdentificationType;\n+import net.opengis.ows11.ServiceProviderType;\n import net.opengis.ows11.impl.KeywordsTypeImpl;\n import net.opengis.ows11.impl.LanguageStringTypeImpl;\n import org.geotools.data.ows.Service;\n+import org.geotools.metadata.iso.citation.ResponsiblePartyImpl;\n+import org.geotools.util.SimpleInternationalString;\n \n /**\n  * @author ian\n  * @author Matthias Schulze (LDBV at ldbv dot bayern dot de)\n  */\n public class WMTSService extends Service {\n \n+    public WMTSService(ServiceIdentificationType serviceType, ServiceProviderType serviceProvider) {\n+\n+        this(serviceType);\n+\n+        ResponsiblePartyImpl contactInfo =", "originalCommit": "e2ff657597df32fd5d56aa9bb14f9456cfc06d98", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "73eda41a44440d440f6c3f366357c28fb72ed33e", "chunk": "diff --git a/modules/extension/wmts/src/main/java/org/geotools/ows/wmts/model/WMTSService.java b/modules/extension/wmts/src/main/java/org/geotools/ows/wmts/model/WMTSService.java\nindex 906e42a5d0..f4af995019 100644\n--- a/modules/extension/wmts/src/main/java/org/geotools/ows/wmts/model/WMTSService.java\n+++ b/modules/extension/wmts/src/main/java/org/geotools/ows/wmts/model/WMTSService.java\n\n@@ -37,6 +37,11 @@ public class WMTSService extends Service {\n \n         this(serviceType);\n \n+        // According to the spec, the serviceProvider section may not exist so guard against it\n+        if (serviceProvider == null) {\n+            return;\n+        }\n+\n         ResponsiblePartyImpl contactInfo =\n                 new ResponsiblePartyImpl(serviceProvider.getServiceContact());\n \n"}}, {"oid": "73eda41a44440d440f6c3f366357c28fb72ed33e", "url": "https://github.com/geotools/geotools/commit/73eda41a44440d440f6c3f366357c28fb72ed33e", "message": "GEOT-6514 Updates to enable information from WMTS Getcapabilities calls to pass through to the WMTSService class.", "committedDate": "2020-02-21T22:43:17Z", "type": "commit"}, {"oid": "b07867c52796290cd5a40b24a4a442809e3d379e", "url": "https://github.com/geotools/geotools/commit/b07867c52796290cd5a40b24a4a442809e3d379e", "message": "Merge pull request #1 from singhdan/GEOT-6514\n\nGEOT-6514 Updates to enable information from WMTS Getcapabilities cal\u2026", "committedDate": "2020-02-21T22:59:23Z", "type": "commit"}, {"oid": "231fa3d7d0d14241537493b5eaf5e34fe25a3715", "url": "https://github.com/geotools/geotools/commit/231fa3d7d0d14241537493b5eaf5e34fe25a3715", "message": "GEOT-6514 Updates to enable information from WMTS Getcapabilities calls to pass through to the WMTSService class", "committedDate": "2020-02-22T20:08:15Z", "type": "commit"}, {"oid": "64de7081393adabdfa72471302ce2bf0d8edc11e", "url": "https://github.com/geotools/geotools/commit/64de7081393adabdfa72471302ce2bf0d8edc11e", "message": "Merge remote-tracking branch 'origin/master'\n\n# Conflicts:\n#\tmodules/extension/wmts/src/main/java/org/geotools/ows/wmts/model/WMTSCapabilities.java\n#\tmodules/extension/wmts/src/test/java/org/geotools/ows/wmts/model/WMTSCapabilitiesTest.java", "committedDate": "2020-02-22T20:09:35Z", "type": "commit"}, {"oid": "32eac735da91f657a37c885017c8322f4dd0c3e1", "url": "https://github.com/geotools/geotools/commit/32eac735da91f657a37c885017c8322f4dd0c3e1", "message": "Merge branch 'master' into master", "committedDate": "2020-02-26T20:35:30Z", "type": "commit"}]}