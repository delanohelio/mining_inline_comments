{"pr_number": 2779, "pr_title": "[GEOT-6362] Don't ignore \"m\" value when reading shapefiles", "pr_createdAt": "2020-01-31T14:32:03Z", "pr_url": "https://github.com/geotools/geotools/pull/2779", "timeline": [{"oid": "38d0b8a0975d972d7432ad8896df34a4f0dcc2eb", "url": "https://github.com/geotools/geotools/commit/38d0b8a0975d972d7432ad8896df34a4f0dcc2eb", "message": "add Measure support to Shapefile reading", "committedDate": "2020-01-31T14:30:27Z", "type": "commit"}, {"oid": "9ca3e2b7e30a80e7320d180d16beb2c2b06d1905", "url": "https://github.com/geotools/geotools/commit/9ca3e2b7e30a80e7320d180d16beb2c2b06d1905", "message": "read MZ, Z, M Polygons", "committedDate": "2020-01-31T16:49:35Z", "type": "commit"}, {"oid": "fe4f1a9f3944846ec60bfa5947fa98c470deee93", "url": "https://github.com/geotools/geotools/commit/fe4f1a9f3944846ec60bfa5947fa98c470deee93", "message": "add MZLinestring handling", "committedDate": "2020-02-01T09:41:33Z", "type": "commit"}, {"oid": "7cb07b8d8b921403b821ffa3a833e831e6ed8fb5", "url": "https://github.com/geotools/geotools/commit/7cb07b8d8b921403b821ffa3a833e831e6ed8fb5", "message": "add MZ Multipoint handling", "committedDate": "2020-02-02T10:06:16Z", "type": "commit"}, {"oid": "e3493c2fdfc5a72bb9945bb2d52b6e8ad2b0305b", "url": "https://github.com/geotools/geotools/commit/e3493c2fdfc5a72bb9945bb2d52b6e8ad2b0305b", "message": "add note to docs", "committedDate": "2020-02-02T10:14:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg0NzY2Mw==", "url": "https://github.com/geotools/geotools/pull/2779#discussion_r373847663", "bodyText": "I've dropped the CoordinateSequence here as it didn't seem to add much as only one coordinate was used. Or am I missing some subtle speedup that could occur?", "author": "ianturton", "createdAt": "2020-02-02T13:52:25Z", "path": "modules/plugin/shapefile/src/main/java/org/geotools/data/shapefile/shp/PointHandler.java", "diffHunk": "@@ -78,22 +79,28 @@ public Object read(ByteBuffer buffer, ShapeType type, boolean flatGeometry) {\n             return createNull();\n         }\n \n-        int dimension = shapeType == ShapeType.POINTZ && !flatGeometry ? 3 : 2;\n-        CoordinateSequence cs =\n-                JTS.createCS(geometryFactory.getCoordinateSequenceFactory(), 1, dimension);\n+        Coordinate c;\n+        if (shapeType == ShapeType.POINTZ) {\n \n-        cs.setOrdinate(0, 0, buffer.getDouble());\n-        cs.setOrdinate(0, 1, buffer.getDouble());\n+            c = new CoordinateXYZM();", "originalCommit": "e3493c2fdfc5a72bb9945bb2d52b6e8ad2b0305b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}