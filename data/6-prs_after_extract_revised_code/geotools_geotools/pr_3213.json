{"pr_number": 3213, "pr_title": "[GEOT-6739] GroupCandidateSelectionProcess should return feature with null attribute", "pr_createdAt": "2020-11-16T11:59:55Z", "pr_url": "https://github.com/geotools/geotools/pull/3213", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQwMDUyNQ==", "url": "https://github.com/geotools/geotools/pull/3213#discussion_r524400525", "bodyText": "So,\nif (value == null) return best;\nelse if (bestValue == null) return f;\n\ndoes the same as those three ifs.", "author": "aaime", "createdAt": "2020-11-16T16:30:29Z", "path": "modules/unsupported/process-feature/src/main/java/org/geotools/process/vector/GroupCandidateSelectionProcess.java", "diffHunk": "@@ -343,23 +342,26 @@ else if (groupingValues != null\n         }\n \n         private Feature updateBestFeature(Feature best, Feature f) {\n+            Comparable bestValue = getComparableFromEvaluation(best);\n+            Comparable value = getComparableFromEvaluation(f);\n+            if (bestValue == null && value == null) return best;", "originalCommit": "d891097a16d7f4fc41942b0cf0042bb6f0d76eaf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQxNDE4NQ==", "url": "https://github.com/geotools/geotools/pull/3213#discussion_r524414185", "bodyText": "fixed", "author": "taba90", "createdAt": "2020-11-16T16:47:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQwMDUyNQ=="}], "type": "inlineReview", "revised_code": {"commit": "66e8776545f9ab544b9b9da40b570d3d6f1f0df2", "chunk": "diff --git a/modules/unsupported/process-feature/src/main/java/org/geotools/process/vector/GroupCandidateSelectionProcess.java b/modules/unsupported/process-feature/src/main/java/org/geotools/process/vector/GroupCandidateSelectionProcess.java\nindex e3cec55206..c4a106a802 100644\n--- a/modules/unsupported/process-feature/src/main/java/org/geotools/process/vector/GroupCandidateSelectionProcess.java\n+++ b/modules/unsupported/process-feature/src/main/java/org/geotools/process/vector/GroupCandidateSelectionProcess.java\n\n@@ -344,9 +344,8 @@ public class GroupCandidateSelectionProcess implements VectorProcess {\n         private Feature updateBestFeature(Feature best, Feature f) {\n             Comparable bestValue = getComparableFromEvaluation(best);\n             Comparable value = getComparableFromEvaluation(f);\n-            if (bestValue == null && value == null) return best;\n-            else if (bestValue == null && value != null) return f;\n-            else if (bestValue != null && value == null) return best;\n+            if (value == null) return best;\n+            else if (bestValue == null) return f;\n             if (aggregation.equals(Operations.MAX)) {\n                 return findBestMax(best, f, bestValue, value);\n             } else {\n"}}, {"oid": "66e8776545f9ab544b9b9da40b570d3d6f1f0df2", "url": "https://github.com/geotools/geotools/commit/66e8776545f9ab544b9b9da40b570d3d6f1f0df2", "message": "[GEOT-6739] GroupCandidateSelectionProcess should return feature with null attribute", "committedDate": "2020-11-16T16:36:33Z", "type": "commit"}, {"oid": "66e8776545f9ab544b9b9da40b570d3d6f1f0df2", "url": "https://github.com/geotools/geotools/commit/66e8776545f9ab544b9b9da40b570d3d6f1f0df2", "message": "[GEOT-6739] GroupCandidateSelectionProcess should return feature with null attribute", "committedDate": "2020-11-16T16:36:33Z", "type": "forcePushed"}]}