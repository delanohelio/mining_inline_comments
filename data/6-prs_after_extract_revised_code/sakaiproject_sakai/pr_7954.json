{"pr_number": 7954, "pr_title": "SAK-43343 Forums/Rubrics use corresponding forum/topic rubric association", "pr_createdAt": "2020-02-28T01:26:25Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/7954", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU0ODEwMw==", "url": "https://github.com/sakaiproject/sakai/pull/7954#discussion_r385548103", "bodyText": "Indentation", "author": "bgarciaentornos", "createdAt": "2020-02-28T07:43:10Z", "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java", "diffHunk": "@@ -9212,18 +9212,16 @@ public boolean hasAssociatedRubric(){\n \t\treturn (allowedToGradeItem && (getRubricAssociationId() != null));\n \t}\n \n-\tpublic String getRubricAssociationId(){\n+  public String getRubricAssociationId() {\n+    String gradeAssign = selectedTopic != null ? selectedTopic.getGradeAssign() : selectedForum != null ? selectedForum.getGradeAssign() : null;\n \n-\t\tString gradeAssign = selectedTopic.getGradeAssign();\n-\n-\t\tif ((selectedTopic != null || selectedForum != null) && rubricsService.hasAssociatedRubric(RubricsConstants.RBCS_TOOL_GRADEBOOKNG, gradeAssign)) {\n-\t\t\treturn gradeAssign;\n-\t\t} else {\n-\t\t\treturn null;\n-\t\t}\n-\t}\n+    if (gradeAssign != null && rubricsService.hasAssociatedRubric(RubricsConstants.RBCS_TOOL_GRADEBOOKNG, gradeAssign)) {\n+      return gradeAssign;\n+    }\n+    return null;\n+  }\n \n-\tpublic String getCDNQuery() {\n+  public String getCDNQuery() {", "originalCommit": "0785cfbac82a7147a95050d21c326008ff2e31fb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8408d478cc3ed88a578f802ac3dc51b27d1357e9", "chunk": "diff --git a/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java b/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java\nindex b9b88ccbdb..2bb95f6bdf 100644\n--- a/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java\n+++ b/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java\n\n@@ -9212,14 +9212,14 @@ public class DiscussionForumTool {\n \t\treturn (allowedToGradeItem && (getRubricAssociationId() != null));\n \t}\n \n-  public String getRubricAssociationId() {\n-    String gradeAssign = selectedTopic != null ? selectedTopic.getGradeAssign() : selectedForum != null ? selectedForum.getGradeAssign() : null;\n+    public String getRubricAssociationId() {\n+      String gradeAssign = selectedTopic != null ? selectedTopic.getGradeAssign() : selectedForum != null ? selectedForum.getGradeAssign() : null;\n \n-    if (gradeAssign != null && rubricsService.hasAssociatedRubric(RubricsConstants.RBCS_TOOL_GRADEBOOKNG, gradeAssign)) {\n-      return gradeAssign;\n+      if (gradeAssign != null && rubricsService.hasAssociatedRubric(RubricsConstants.RBCS_TOOL_GRADEBOOKNG, gradeAssign)) {\n+        return gradeAssign;\n+      }\n+      return null;\n     }\n-    return null;\n-  }\n \n   public String getCDNQuery() {\n \t\treturn PortalUtils.getCDNQuery();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU0OTcyOA==", "url": "https://github.com/sakaiproject/sakai/pull/7954#discussion_r385549728", "bodyText": "Maybe adding parenthesis for readability?", "author": "bgarciaentornos", "createdAt": "2020-02-28T07:48:12Z", "path": "msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java", "diffHunk": "@@ -9212,18 +9212,16 @@ public boolean hasAssociatedRubric(){\n \t\treturn (allowedToGradeItem && (getRubricAssociationId() != null));\n \t}\n \n-\tpublic String getRubricAssociationId(){\n+  public String getRubricAssociationId() {\n+    String gradeAssign = selectedTopic != null ? selectedTopic.getGradeAssign() : selectedForum != null ? selectedForum.getGradeAssign() : null;", "originalCommit": "0785cfbac82a7147a95050d21c326008ff2e31fb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU1MDA0OQ==", "url": "https://github.com/sakaiproject/sakai/pull/7954#discussion_r385550049", "bodyText": "Indentation is off too", "author": "bgarciaentornos", "createdAt": "2020-02-28T07:49:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU0OTcyOA=="}], "type": "inlineReview", "revised_code": {"commit": "8408d478cc3ed88a578f802ac3dc51b27d1357e9", "chunk": "diff --git a/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java b/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java\nindex b9b88ccbdb..2bb95f6bdf 100644\n--- a/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java\n+++ b/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/DiscussionForumTool.java\n\n@@ -9212,14 +9212,14 @@ public class DiscussionForumTool {\n \t\treturn (allowedToGradeItem && (getRubricAssociationId() != null));\n \t}\n \n-  public String getRubricAssociationId() {\n-    String gradeAssign = selectedTopic != null ? selectedTopic.getGradeAssign() : selectedForum != null ? selectedForum.getGradeAssign() : null;\n+    public String getRubricAssociationId() {\n+      String gradeAssign = selectedTopic != null ? selectedTopic.getGradeAssign() : selectedForum != null ? selectedForum.getGradeAssign() : null;\n \n-    if (gradeAssign != null && rubricsService.hasAssociatedRubric(RubricsConstants.RBCS_TOOL_GRADEBOOKNG, gradeAssign)) {\n-      return gradeAssign;\n+      if (gradeAssign != null && rubricsService.hasAssociatedRubric(RubricsConstants.RBCS_TOOL_GRADEBOOKNG, gradeAssign)) {\n+        return gradeAssign;\n+      }\n+      return null;\n     }\n-    return null;\n-  }\n \n   public String getCDNQuery() {\n \t\treturn PortalUtils.getCDNQuery();\n"}}, {"oid": "cb0734fe471db10d346567cc4297e359fbf2febf", "url": "https://github.com/sakaiproject/sakai/commit/cb0734fe471db10d346567cc4297e359fbf2febf", "message": "SAK-43343 Forums/Rubrics use forum/topic rubric association", "committedDate": "2020-02-28T18:21:15Z", "type": "forcePushed"}, {"oid": "8408d478cc3ed88a578f802ac3dc51b27d1357e9", "url": "https://github.com/sakaiproject/sakai/commit/8408d478cc3ed88a578f802ac3dc51b27d1357e9", "message": "SAK-43343 Forums/Rubrics use forum/topic rubric association", "committedDate": "2020-02-28T18:24:24Z", "type": "forcePushed"}, {"oid": "ccac24db6d593a9cd3549f2c4d8772face7ab5da", "url": "https://github.com/sakaiproject/sakai/commit/ccac24db6d593a9cd3549f2c4d8772face7ab5da", "message": "SAK-43343 Forums/Rubrics use forum/topic rubric association", "committedDate": "2020-02-28T18:25:24Z", "type": "forcePushed"}, {"oid": "00aa47d42d849d3f12643ab0d2efed62f300e8e9", "url": "https://github.com/sakaiproject/sakai/commit/00aa47d42d849d3f12643ab0d2efed62f300e8e9", "message": "SAK-43343 Forums/Rubrics use corresponding forum/topic rubric association", "committedDate": "2020-02-28T18:27:24Z", "type": "forcePushed"}, {"oid": "437900953e72892aa739da56996293c7214add17", "url": "https://github.com/sakaiproject/sakai/commit/437900953e72892aa739da56996293c7214add17", "message": "SAK-43343 Forums/Rubrics use corresponding forum/topic rubric association", "committedDate": "2020-02-28T18:28:50Z", "type": "commit"}, {"oid": "437900953e72892aa739da56996293c7214add17", "url": "https://github.com/sakaiproject/sakai/commit/437900953e72892aa739da56996293c7214add17", "message": "SAK-43343 Forums/Rubrics use corresponding forum/topic rubric association", "committedDate": "2020-02-28T18:28:50Z", "type": "forcePushed"}]}