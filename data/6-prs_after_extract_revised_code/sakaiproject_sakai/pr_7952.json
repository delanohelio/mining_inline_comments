{"pr_number": 7952, "pr_title": "SAK-43340 search against all fields not just contents", "pr_createdAt": "2020-02-27T17:17:16Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/7952", "timeline": [{"oid": "dd41ee7e3a046ea3fadc40e470c089b196f3aff7", "url": "https://github.com/sakaiproject/sakai/commit/dd41ee7e3a046ea3fadc40e470c089b196f3aff7", "message": "SAK-43340 search against all fields not just contents", "committedDate": "2020-02-27T17:16:57Z", "type": "commit"}, {"oid": "cae5c96702ceed1e3e2511fdfff3ebd2aec0a4fc", "url": "https://github.com/sakaiproject/sakai/commit/cae5c96702ceed1e3e2511fdfff3ebd2aec0a4fc", "message": "use the simpleQueryString even better", "committedDate": "2020-02-27T18:04:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI4NjE3Mw==", "url": "https://github.com/sakaiproject/sakai/pull/7952#discussion_r385286173", "bodyText": "There are static imports for QueryBuilders already.", "author": "ern", "createdAt": "2020-02-27T18:18:19Z", "path": "search/elasticsearch/util/src/java/org/sakaiproject/search/elasticsearch/BaseElasticSearchIndexBuilder.java", "diffHunk": "@@ -1135,7 +1136,7 @@ public SearchResponse search(String searchTerms, List<String> references, List<S\n             query = query.must(termQuery(SearchService.FIELD_TYPE, \"sakai:\" + termType));\n             query = query.must(matchQuery(SearchService.FIELD_CONTENTS, termValue));\n         } else {\n-            query = query.must(matchQuery(SearchService.FIELD_CONTENTS, searchTerms));\n+            query = query.must(QueryBuilders.simpleQueryStringQuery(searchTerms));", "originalCommit": "cae5c96702ceed1e3e2511fdfff3ebd2aec0a4fc", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f156364344d08034a42f1554903b0c296fd908c5", "chunk": "diff --git a/search/elasticsearch/util/src/java/org/sakaiproject/search/elasticsearch/BaseElasticSearchIndexBuilder.java b/search/elasticsearch/util/src/java/org/sakaiproject/search/elasticsearch/BaseElasticSearchIndexBuilder.java\nindex 2db40f32bd..af5b4a20e8 100644\n--- a/search/elasticsearch/util/src/java/org/sakaiproject/search/elasticsearch/BaseElasticSearchIndexBuilder.java\n+++ b/search/elasticsearch/util/src/java/org/sakaiproject/search/elasticsearch/BaseElasticSearchIndexBuilder.java\n\n@@ -1136,7 +1136,7 @@ public abstract class BaseElasticSearchIndexBuilder implements ElasticSearchInde\n             query = query.must(termQuery(SearchService.FIELD_TYPE, \"sakai:\" + termType));\n             query = query.must(matchQuery(SearchService.FIELD_CONTENTS, termValue));\n         } else {\n-            query = query.must(QueryBuilders.simpleQueryStringQuery(searchTerms));\n+            query = query.must(simpleQueryStringQuery(searchTerms));\n         }\n \n         return pairOf(builders.getLeft(), query);\n"}}, {"oid": "f156364344d08034a42f1554903b0c296fd908c5", "url": "https://github.com/sakaiproject/sakai/commit/f156364344d08034a42f1554903b0c296fd908c5", "message": "add a test case", "committedDate": "2020-02-27T18:34:59Z", "type": "commit"}]}