{"pr_number": 8692, "pr_title": "SAK-44262 Fix rubrics table creation in Oracle", "pr_createdAt": "2020-10-15T03:43:53Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8692", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYyOTIwMA==", "url": "https://github.com/sakaiproject/sakai/pull/8692#discussion_r505629200", "bodyText": "Formatting needs to follow the existing style", "author": "ern", "createdAt": "2020-10-15T15:18:32Z", "path": "rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Criterion.java", "diffHunk": "@@ -130,4 +129,13 @@ public Metadata getModified() {\n     public void setModified(Metadata metadata) {\n         this.metadata = metadata;\n     }\n+\n+    @PrePersist\n+    public void prePersist()\n+    {\n+        if ( getWeight() == null )\n+        {\n+            setWeight( 0D );\n+        }\n+    }", "originalCommit": "3f421c1be09e8bbf9658af985ba1d15fd0c9cafe", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cd2643a7fe811839817f1ddf7691ce5ffe225fc4", "chunk": "diff --git a/rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Criterion.java b/rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Criterion.java\nindex b7a0fc41e2..d986cf2ba3 100644\n--- a/rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Criterion.java\n+++ b/rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Criterion.java\n\n@@ -131,11 +131,9 @@ public class Criterion implements Modifiable, Serializable, Cloneable {\n     }\n \n     @PrePersist\n-    public void prePersist()\n-    {\n-        if ( getWeight() == null )\n-        {\n-            setWeight( 0D );\n+    public void prePersist() {\n+        if (this.weight == null) {\n+            this.weight = 0D;\n         }\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYyOTUyMg==", "url": "https://github.com/sakaiproject/sakai/pull/8692#discussion_r505629522", "bodyText": "Formatting needs to follow existing style", "author": "ern", "createdAt": "2020-10-15T15:19:01Z", "path": "rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Rubric.java", "diffHunk": "@@ -167,4 +168,13 @@ public Metadata getModified() {\n     public void setModified(Metadata metadata) {\n         this.metadata = metadata;\n     }\n+\n+    @PrePersist\n+    public void prePersist()\n+    {\n+        if ( getWeighted() == null )\n+        {\n+            setWeighted( Boolean.FALSE );\n+        }\n+    }", "originalCommit": "3f421c1be09e8bbf9658af985ba1d15fd0c9cafe", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cd2643a7fe811839817f1ddf7691ce5ffe225fc4", "chunk": "diff --git a/rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Rubric.java b/rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Rubric.java\nindex 40d1549f66..9f074ea957 100644\n--- a/rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Rubric.java\n+++ b/rubrics/api/src/main/java/org/sakaiproject/rubrics/logic/model/Rubric.java\n\n@@ -170,11 +170,9 @@ public class Rubric implements Modifiable, Serializable, Cloneable {\n     }\n \n     @PrePersist\n-    public void prePersist()\n-    {\n-        if ( getWeighted() == null )\n-        {\n-            setWeighted( Boolean.FALSE );\n+    public void prePersist() {\n+        if (this.weighted == null) {\n+            this.weighted = Boolean.FALSE;\n         }\n     }\n }\n"}}, {"oid": "cd2643a7fe811839817f1ddf7691ce5ffe225fc4", "url": "https://github.com/sakaiproject/sakai/commit/cd2643a7fe811839817f1ddf7691ce5ffe225fc4", "message": "SAK-44262 Fix rubrics table creation in Oracle\n\nrbc_rubric and rbc_criterion were not getting automatically created in Oracle\nbecause the columnDefinition configuration there previously was not compatitble.\nThis removes that property and instead sets the default values with PrePersist\nJPA annotation.", "committedDate": "2020-10-15T16:06:58Z", "type": "forcePushed"}, {"oid": "ef29c9397e443b1916aa0a2425174600d7edbd9a", "url": "https://github.com/sakaiproject/sakai/commit/ef29c9397e443b1916aa0a2425174600d7edbd9a", "message": "SAK-44262 Fix rubrics table creation in Oracle\n\nrbc_rubric and rbc_criterion were not getting automatically created in Oracle\nbecause the columnDefinition configuration there previously was not compatitble.\nThis removes that property and instead sets the default values with PrePersist\nJPA annotation in rubric and changes double to float in criterion.", "committedDate": "2020-10-20T15:32:01Z", "type": "forcePushed"}, {"oid": "b89a6ac7ec1eb36f7f502b6fd86b9f5914f773b6", "url": "https://github.com/sakaiproject/sakai/commit/b89a6ac7ec1eb36f7f502b6fd86b9f5914f773b6", "message": "SAK-44262 Fix rubrics table creation in Oracle\n\nrbc_rubric and rbc_criterion were not getting automatically created in Oracle\nbecause the columnDefinition configuration there previously was not compatitble.\nThis removes that property and instead sets the default values with PrePersist\nJPA annotation in rubric and changes double to float in criterion.", "committedDate": "2020-10-20T15:33:43Z", "type": "forcePushed"}, {"oid": "23442fe201a8e41bcbfe213164d2cb9708f54749", "url": "https://github.com/sakaiproject/sakai/commit/23442fe201a8e41bcbfe213164d2cb9708f54749", "message": "SAK-44262 Fix rubrics table creation in Oracle\n\nrbc_rubric and rbc_criterion were not getting automatically created in Oracle\nbecause the columnDefinition configuration there previously was not compatitble.\nThis removes that property and instead sets the default values with PrePersist\nJPA annotation in rubric and changes double to float in criterion.", "committedDate": "2020-10-20T15:34:32Z", "type": "commit"}, {"oid": "23442fe201a8e41bcbfe213164d2cb9708f54749", "url": "https://github.com/sakaiproject/sakai/commit/23442fe201a8e41bcbfe213164d2cb9708f54749", "message": "SAK-44262 Fix rubrics table creation in Oracle\n\nrbc_rubric and rbc_criterion were not getting automatically created in Oracle\nbecause the columnDefinition configuration there previously was not compatitble.\nThis removes that property and instead sets the default values with PrePersist\nJPA annotation in rubric and changes double to float in criterion.", "committedDate": "2020-10-20T15:34:32Z", "type": "forcePushed"}]}