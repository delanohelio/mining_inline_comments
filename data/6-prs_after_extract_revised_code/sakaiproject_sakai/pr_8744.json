{"pr_number": 8744, "pr_title": "SAK-44532: Error when try adding a student on a blocked section/group", "pr_createdAt": "2020-10-26T13:11:40Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8744", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk1NjM2OA==", "url": "https://github.com/sakaiproject/sakai/pull/8744#discussion_r511956368", "bodyText": "Let's not call this exception isearle :)", "author": "bjones86", "createdAt": "2020-10-26T13:25:45Z", "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java", "diffHunk": "@@ -413,16 +413,16 @@ public void addMember(String userId, String roleId, boolean active, boolean prov\n \t{\n \t\ttry {\n \t\t\tinsertMember(userId, roleId, active, provided);\n-\t\t} catch (IllegalStateException ise) {\n-\t\t\tlog.warn(ise.getMessage());\n+\t\t} catch (IllegalStateException | AuthzRealmLockException isearle) {", "originalCommit": "df2eb97373a1c370c1df1ad0801bb19791cb4104", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk2NjQwNg==", "url": "https://github.com/sakaiproject/sakai/pull/8744#discussion_r511966406", "bodyText": "Changed to iseorarle!", "author": "jesusmmp", "createdAt": "2020-10-26T13:40:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk1NjM2OA=="}], "type": "inlineReview", "revised_code": {"commit": "69a0354c04d0bc9b37e561f39c7e03e77210067e", "chunk": "diff --git a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\nindex c8c5573c2e..32f55f95cc 100644\n--- a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\n+++ b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\n\n@@ -413,8 +413,8 @@ public class BaseGroup implements Group, Identifiable\n \t{\n \t\ttry {\n \t\t\tinsertMember(userId, roleId, active, provided);\n-\t\t} catch (IllegalStateException | AuthzRealmLockException isearle) {\n-\t\t\tlog.warn(isearle.getMessage());\n+\t\t} catch (IllegalStateException | AuthzRealmLockException iseorarle) {\n+\t\t\tlog.warn(iseorarle.getMessage());\n \t\t}\n \t}\n \n"}}, {"oid": "69a0354c04d0bc9b37e561f39c7e03e77210067e", "url": "https://github.com/sakaiproject/sakai/commit/69a0354c04d0bc9b37e561f39c7e03e77210067e", "message": "SAK-44532: Error when try adding a student on a blocked section/group", "committedDate": "2020-10-26T13:38:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIyMDI4MA==", "url": "https://github.com/sakaiproject/sakai/pull/8744#discussion_r512220280", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t} catch (IllegalStateException | AuthzRealmLockException iseorarle) {\n          \n          \n            \n            \t\t\tlog.warn(iseorarle.getMessage());\n          \n          \n            \n            \t\t} catch (AuthzRealmLockException arle) {\n          \n          \n            \n            \t\t\tlog.warn(arle.toString());", "author": "ern", "createdAt": "2020-10-26T19:38:36Z", "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java", "diffHunk": "@@ -413,16 +413,16 @@ public void addMember(String userId, String roleId, boolean active, boolean prov\n \t{\n \t\ttry {\n \t\t\tinsertMember(userId, roleId, active, provided);\n-\t\t} catch (IllegalStateException ise) {\n-\t\t\tlog.warn(ise.getMessage());\n+\t\t} catch (IllegalStateException | AuthzRealmLockException iseorarle) {\n+\t\t\tlog.warn(iseorarle.getMessage());", "originalCommit": "69a0354c04d0bc9b37e561f39c7e03e77210067e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIyMzA4Nw==", "url": "https://github.com/sakaiproject/sakai/pull/8744#discussion_r512223087", "bodyText": "What's the benefit of catching them separately?", "author": "bjones86", "createdAt": "2020-10-26T19:43:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIyMDI4MA=="}], "type": "inlineReview", "revised_code": {"commit": "81da0723b2d7d4168b14b672bfca72100d514e98", "chunk": "diff --git a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\nindex 32f55f95cc..f3c94e7722 100644\n--- a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\n+++ b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\n\n@@ -413,12 +413,14 @@ public class BaseGroup implements Group, Identifiable\n \t{\n \t\ttry {\n \t\t\tinsertMember(userId, roleId, active, provided);\n-\t\t} catch (IllegalStateException | AuthzRealmLockException iseorarle) {\n-\t\t\tlog.warn(iseorarle.getMessage());\n+\t\t} catch (IllegalStateException ise) {\n+\t\t\tlog.warn(ise.getMessage());\n+\t\t} catch (AuthzRealmLockException arle) {\n+\t\t\tlog.warn(arle.toString());\n \t\t}\n \t}\n \n-\tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws IllegalStateException, AuthzRealmLockException\n+\tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws AuthzRealmLockException\n \t{\n \t\tRealmLockMode lockMode = getRealmLock();\n \t\tif(RealmLockMode.ALL.equals(lockMode) || RealmLockMode.MODIFY.equals(lockMode)) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIyMDQxMQ==", "url": "https://github.com/sakaiproject/sakai/pull/8744#discussion_r512220411", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws IllegalStateException, AuthzRealmLockException\n          \n          \n            \n            \tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws AuthzRealmLockException", "author": "ern", "createdAt": "2020-10-26T19:38:52Z", "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java", "diffHunk": "@@ -413,16 +413,16 @@ public void addMember(String userId, String roleId, boolean active, boolean prov\n \t{\n \t\ttry {\n \t\t\tinsertMember(userId, roleId, active, provided);\n-\t\t} catch (IllegalStateException ise) {\n-\t\t\tlog.warn(ise.getMessage());\n+\t\t} catch (IllegalStateException | AuthzRealmLockException iseorarle) {\n+\t\t\tlog.warn(iseorarle.getMessage());\n \t\t}\n \t}\n \n-\tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws IllegalStateException\n+\tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws IllegalStateException, AuthzRealmLockException", "originalCommit": "69a0354c04d0bc9b37e561f39c7e03e77210067e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "81da0723b2d7d4168b14b672bfca72100d514e98", "chunk": "diff --git a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\nindex 32f55f95cc..f3c94e7722 100644\n--- a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\n+++ b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\n\n@@ -413,12 +413,14 @@ public class BaseGroup implements Group, Identifiable\n \t{\n \t\ttry {\n \t\t\tinsertMember(userId, roleId, active, provided);\n-\t\t} catch (IllegalStateException | AuthzRealmLockException iseorarle) {\n-\t\t\tlog.warn(iseorarle.getMessage());\n+\t\t} catch (IllegalStateException ise) {\n+\t\t\tlog.warn(ise.getMessage());\n+\t\t} catch (AuthzRealmLockException arle) {\n+\t\t\tlog.warn(arle.toString());\n \t\t}\n \t}\n \n-\tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws IllegalStateException, AuthzRealmLockException\n+\tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws AuthzRealmLockException\n \t{\n \t\tRealmLockMode lockMode = getRealmLock();\n \t\tif(RealmLockMode.ALL.equals(lockMode) || RealmLockMode.MODIFY.equals(lockMode)) {\n"}}, {"oid": "81da0723b2d7d4168b14b672bfca72100d514e98", "url": "https://github.com/sakaiproject/sakai/commit/81da0723b2d7d4168b14b672bfca72100d514e98", "message": "SAK-44532: Error when try adding a student on a blocked section/group", "committedDate": "2020-10-27T08:25:03Z", "type": "commit"}, {"oid": "81da0723b2d7d4168b14b672bfca72100d514e98", "url": "https://github.com/sakaiproject/sakai/commit/81da0723b2d7d4168b14b672bfca72100d514e98", "message": "SAK-44532: Error when try adding a student on a blocked section/group", "committedDate": "2020-10-27T08:25:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjc5NDYxMQ==", "url": "https://github.com/sakaiproject/sakai/pull/8744#discussion_r512794611", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t} catch (IllegalStateException ise) {\n          \n          \n            \n            \t\t\tlog.warn(ise.getMessage());", "author": "ern", "createdAt": "2020-10-27T15:32:29Z", "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java", "diffHunk": "@@ -415,14 +415,16 @@ public void addMember(String userId, String roleId, boolean active, boolean prov\n \t\t\tinsertMember(userId, roleId, active, provided);\n \t\t} catch (IllegalStateException ise) {\n \t\t\tlog.warn(ise.getMessage());", "originalCommit": "81da0723b2d7d4168b14b672bfca72100d514e98", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4c573247432395adfef75da307452233b69020cc", "chunk": "diff --git a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\nindex f3c94e7722..811f8bb192 100644\n--- a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\n+++ b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java\n\n@@ -413,14 +413,12 @@ public class BaseGroup implements Group, Identifiable\n \t{\n \t\ttry {\n \t\t\tinsertMember(userId, roleId, active, provided);\n-\t\t} catch (IllegalStateException ise) {\n-\t\t\tlog.warn(ise.getMessage());\n-\t\t} catch (AuthzRealmLockException arle) {\n-\t\t\tlog.warn(arle.toString());\n+\t\t} catch (AuthzRealmLockException | IllegalStateException e) {\n+\t\t\tlog.warn(e.toString());\n \t\t}\n \t}\n \n-\tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws AuthzRealmLockException\n+\tpublic void insertMember(String userId, String roleId, boolean active, boolean provided) throws AuthzRealmLockException, IllegalStateException\n \t{\n \t\tRealmLockMode lockMode = getRealmLock();\n \t\tif(RealmLockMode.ALL.equals(lockMode) || RealmLockMode.MODIFY.equals(lockMode)) {\n"}}, {"oid": "4c573247432395adfef75da307452233b69020cc", "url": "https://github.com/sakaiproject/sakai/commit/4c573247432395adfef75da307452233b69020cc", "message": "Update kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java", "committedDate": "2020-10-27T19:38:26Z", "type": "commit"}, {"oid": "4c573247432395adfef75da307452233b69020cc", "url": "https://github.com/sakaiproject/sakai/commit/4c573247432395adfef75da307452233b69020cc", "message": "Update kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseGroup.java", "committedDate": "2020-10-27T19:38:26Z", "type": "forcePushed"}]}