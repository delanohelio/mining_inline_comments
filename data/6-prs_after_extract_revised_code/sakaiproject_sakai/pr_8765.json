{"pr_number": 8765, "pr_title": "SAK-44587 Site creation date not being saved", "pr_createdAt": "2020-11-02T13:08:02Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8765", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk3NTU3MQ==", "url": "https://github.com/sakaiproject/sakai/pull/8765#discussion_r515975571", "bodyText": "I'd compute the actual value and pass that as a variable.", "author": "adrianfish", "createdAt": "2020-11-02T13:37:13Z", "path": "site-manage/site-manage-tool/tool/src/java/org/sakaiproject/site/tool/SiteAction.java", "diffHunk": "@@ -1323,6 +1323,7 @@ public String buildMainPanelContext(VelocityPortlet portlet,\n \t\t\tboolean inShortcut) {\n \t\tcontext.put(\"tlang\", rb);\n \t\tcontext.put(\"clang\", cfgRb);\n+\t\tcontext.put(\"userTimeService\", userTimeService);", "originalCommit": "4539417e26fb596d60bf34aafaaad20295980109", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk3NjEzMg==", "url": "https://github.com/sakaiproject/sakai/pull/8765#discussion_r515976132", "bodyText": "return m_createdTime != null ? new Date(m_createdTime.toEpochMilli()) : null;", "author": "adrianfish", "createdAt": "2020-11-02T13:38:15Z", "path": "kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseSite.java", "diffHunk": "@@ -837,7 +837,7 @@ public User getModifiedBy()\n \tpublic Date getCreatedDate() {\n \t\tDate date = null;\n \t\tif (m_createdTime != null) {\n-\t\t\tnew Date(m_createdTime.toEpochMilli());\n+\t\t\tdate = new Date(m_createdTime.toEpochMilli());", "originalCommit": "4539417e26fb596d60bf34aafaaad20295980109", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ5MTczNw==", "url": "https://github.com/sakaiproject/sakai/pull/8765#discussion_r516491737", "bodyText": "Have pushed this change and also applied it to other method", "author": "bgarciaentornos", "createdAt": "2020-11-03T08:27:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk3NjEzMg=="}], "type": "inlineReview", "revised_code": {"commit": "69068e96ff22a51e13b7021efc648156ed02ccba", "chunk": "diff --git a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseSite.java b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseSite.java\nindex 78116279a3..f75bd4c3fd 100644\n--- a/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseSite.java\n+++ b/kernel/kernel-impl/src/main/java/org/sakaiproject/site/impl/BaseSite.java\n\n@@ -835,20 +835,13 @@ public class BaseSite implements Site\n \n \n \tpublic Date getCreatedDate() {\n-\t\tDate date = null;\n-\t\tif (m_createdTime != null) {\n-\t\t\tdate = new Date(m_createdTime.toEpochMilli());\n-\t\t}\n-\t\treturn date;\n+\t\treturn m_createdTime != null ? new Date(m_createdTime.toEpochMilli()) : null;\n \t}\n \t\n \tpublic Date getModifiedDate() {\n-\t\tDate date = null;\n-\t\tif (m_lastModifiedTime != null) {\n-\t\t\tdate = new Date(m_lastModifiedTime.toEpochMilli());\n-\t\t}\n-\t\treturn date;\n+\t\treturn m_lastModifiedTime != null ? new Date(m_lastModifiedTime.toEpochMilli()) : null;\n \t}\n+\n \t/**\n \t * @inheritDoc\n \t */\n"}}, {"oid": "69068e96ff22a51e13b7021efc648156ed02ccba", "url": "https://github.com/sakaiproject/sakai/commit/69068e96ff22a51e13b7021efc648156ed02ccba", "message": "SAK-44587 Site creation date not being saved", "committedDate": "2020-11-03T08:26:17Z", "type": "commit"}, {"oid": "69068e96ff22a51e13b7021efc648156ed02ccba", "url": "https://github.com/sakaiproject/sakai/commit/69068e96ff22a51e13b7021efc648156ed02ccba", "message": "SAK-44587 Site creation date not being saved", "committedDate": "2020-11-03T08:26:17Z", "type": "forcePushed"}]}