{"pr_number": 8395, "pr_title": "SAK-43890 - Support LineItem", "pr_createdAt": "2020-07-27T20:30:35Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8395", "timeline": [{"oid": "40c90e622c3eef41c2677020372890b176819931", "url": "https://github.com/sakaiproject/sakai/commit/40c90e622c3eef41c2677020372890b176819931", "message": "SAK-43890 - Support LineItem", "committedDate": "2020-07-27T20:29:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NTgyOQ==", "url": "https://github.com/sakaiproject/sakai/pull/8395#discussion_r461175829", "bodyText": "system out", "author": "ottenhoff", "createdAt": "2020-07-27T21:18:00Z", "path": "basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java", "diffHunk": "@@ -106,16 +106,25 @@ public static String constructExternalId(Long tool_id, Map<String, Object> conte\n \t\treturn retval;\n \t}\n \n-\tpublic static Assignment createLineItem(Site site, Long tool_id, Map<String, Object> content, LineItem lineItem) {\n+\tpublic static Assignment createLineItem(Site site, Long tool_id, Map<String, Object> content, SakaiLineItem lineItem) {\n+\t\tString context_id = site.getId();\n+\t\treturn createLineItem(context_id, tool_id, content, lineItem);\n+\t}\n+\n+\tpublic static Assignment createLineItem(String context_id, Long tool_id, Map<String, Object> content, SakaiLineItem lineItem) {\n \t\t// Look up the assignment so we can find the max points\n \t\tGradebookService g = (GradebookService) ComponentManager\n \t\t\t\t.get(\"org.sakaiproject.service.gradebook.GradebookService\");\n \n-\t\tString context_id = site.getId();\n \t\tif (lineItem.scoreMaximum == null) {\n \t\t\tlineItem.scoreMaximum = 100.0;\n \t\t}\n \n+System.out.println(\"createLineItem=\"+lineItem.toString());\n+System.out.println(\"SakaiLineItem.label=\"+lineItem.label);\n+System.out.println(\"SakaiLineItem.scoreMaximum=\"+lineItem.scoreMaximum);\n+System.out.println(\"SakaiLineItem.includeInComputation=\"+lineItem.includeInComputation);\n+System.out.println(\"SakaiLineItem.releaseToStudent=\"+lineItem.releaseToStudent);", "originalCommit": "40c90e622c3eef41c2677020372890b176819931", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIwODI1MA==", "url": "https://github.com/sakaiproject/sakai/pull/8395#discussion_r461208250", "bodyText": "Dang - I looked for those and missed them - thanks.", "author": "csev", "createdAt": "2020-07-27T22:33:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NTgyOQ=="}], "type": "inlineReview", "revised_code": {"commit": "954e7e401068b4115e1e48debf0804e20241d7eb", "chunk": "diff --git a/basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java b/basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java\nindex 6d0bb90f74..91a5add398 100644\n--- a/basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java\n+++ b/basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java\n\n@@ -120,11 +120,6 @@ public class LineItemUtil {\n \t\t\tlineItem.scoreMaximum = 100.0;\n \t\t}\n \n-System.out.println(\"createLineItem=\"+lineItem.toString());\n-System.out.println(\"SakaiLineItem.label=\"+lineItem.label);\n-System.out.println(\"SakaiLineItem.scoreMaximum=\"+lineItem.scoreMaximum);\n-System.out.println(\"SakaiLineItem.includeInComputation=\"+lineItem.includeInComputation);\n-System.out.println(\"SakaiLineItem.releaseToStudent=\"+lineItem.releaseToStudent);\n \t\tif ( lineItem.label == null ) {\n \t\t\tthrow new RuntimeException(\"lineitem.label is required\");\n \t\t}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NTg5MA==", "url": "https://github.com/sakaiproject/sakai/pull/8395#discussion_r461175890", "bodyText": "system out", "author": "ottenhoff", "createdAt": "2020-07-27T21:18:08Z", "path": "basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java", "diffHunk": "@@ -125,6 +134,7 @@ public static Assignment createLineItem(Site site, Long tool_id, Map<String, Obj\n \t\t}\n \n \t\tString external_id = constructExternalId(tool_id, content, lineItem);\n+System.out.println(\"external_id=\"+external_id);", "originalCommit": "40c90e622c3eef41c2677020372890b176819931", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "954e7e401068b4115e1e48debf0804e20241d7eb", "chunk": "diff --git a/basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java b/basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java\nindex 6d0bb90f74..91a5add398 100644\n--- a/basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java\n+++ b/basiclti/basiclti-common/src/java/org/sakaiproject/lti13/LineItemUtil.java\n\n@@ -134,7 +129,6 @@ System.out.println(\"SakaiLineItem.releaseToStudent=\"+lineItem.releaseToStudent);\n \t\t}\n \n \t\tString external_id = constructExternalId(tool_id, content, lineItem);\n-System.out.println(\"external_id=\"+external_id);\n \n \t\tAssignment assignmentObject = null;\n \n"}}, {"oid": "954e7e401068b4115e1e48debf0804e20241d7eb", "url": "https://github.com/sakaiproject/sakai/commit/954e7e401068b4115e1e48debf0804e20241d7eb", "message": "SAK-43890 - Fix code review issues.", "committedDate": "2020-07-27T22:43:37Z", "type": "commit"}, {"oid": "73cbcead856faf71652752d68cdf23129264c83c", "url": "https://github.com/sakaiproject/sakai/commit/73cbcead856faf71652752d68cdf23129264c83c", "message": "SAK-43890 - More code review issues", "committedDate": "2020-07-28T00:10:52Z", "type": "commit"}]}