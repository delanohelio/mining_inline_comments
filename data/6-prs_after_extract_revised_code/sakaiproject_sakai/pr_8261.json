{"pr_number": 8261, "pr_title": "SAK-34123 - Hardcoded \"None of the Above\" in English test", "pr_createdAt": "2020-06-01T14:32:02Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8261", "timeline": [{"oid": "7872e332a6649f2f6e671bb800169516cf7db282", "url": "https://github.com/sakaiproject/sakai/commit/7872e332a6649f2f6e671bb800169516cf7db282", "message": "SAK-34123 - Hardcoded \"None of the Above\" in English test", "committedDate": "2019-08-19T00:13:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI4NDk0MQ==", "url": "https://github.com/sakaiproject/sakai/pull/8261#discussion_r433284941", "bodyText": "These are both null. You just set them to null! I don't understand!", "author": "adrianfish", "createdAt": "2020-06-01T14:57:20Z", "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/delivery/DeliveryActionListener.java", "diffHunk": "@@ -1903,11 +1903,13 @@ public void populateMatching(ItemDataIfc item, ItemContentsBean bean, Map publis\n       iter2 = shuffled.iterator();\n \n       int i = 0;\n-      ResourceLoader rb = null;\n-      if (rb == null) { \t \n-  \t\trb = new ResourceLoader(\"org.sakaiproject.tool.assessment.bundle.DeliveryMessages\");\n+      ResourceLoader d_rb = null;\n+      ResourceLoader a_rb = null;\n+      if (d_rb == null || a_rb == null) { \t ", "originalCommit": "7872e332a6649f2f6e671bb800169516cf7db282", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5NTg2MQ==", "url": "https://github.com/sakaiproject/sakai/pull/8261#discussion_r433295861", "bodyText": "Can never be too sure in Java! :) I plan to resolve the conflicts and can look at why I might have done this.", "author": "jonespm", "createdAt": "2020-06-01T15:15:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI4NDk0MQ=="}], "type": "inlineReview", "revised_code": {"commit": "f2f38111ee711c2ec050e71d8d16aca4d8aa4b70", "chunk": "diff --git a/samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/delivery/DeliveryActionListener.java b/samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/delivery/DeliveryActionListener.java\nindex 2982383b99..d62edda832 100755\n--- a/samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/delivery/DeliveryActionListener.java\n+++ b/samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/delivery/DeliveryActionListener.java\n\n@@ -1903,12 +1826,8 @@ public class DeliveryActionListener\n       iter2 = shuffled.iterator();\n \n       int i = 0;\n-      ResourceLoader d_rb = null;\n-      ResourceLoader a_rb = null;\n-      if (d_rb == null || a_rb == null) { \t \n-  \t\td_rb = new ResourceLoader(\"org.sakaiproject.tool.assessment.bundle.DeliveryMessages\");\n-  \t\ta_rb = new ResourceLoader(\"org.sakaiproject.tool.assessment.bundle.AuthorMessages\");\n-  \t  }\n+      ResourceLoader d_rb = new ResourceLoader(\"org.sakaiproject.tool.assessment.bundle.DeliveryMessages\");\n+      ResourceLoader a_rb = new ResourceLoader(\"org.sakaiproject.tool.assessment.bundle.AuthorMessages\");\n       choices.add(new SelectItem(\"0\", d_rb.getString(\"matching_select\"), \"\")); // default value for choice\n       while (iter2.hasNext())\n       {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI4NTgwNw==", "url": "https://github.com/sakaiproject/sakai/pull/8261#discussion_r433285807", "bodyText": "May as well use StringUtils.isEmpty here.", "author": "adrianfish", "createdAt": "2020-06-01T14:58:48Z", "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/author/ItemModifyListener.java", "diffHunk": "@@ -938,7 +940,7 @@ else if (feedback.getTypeId().equals(AnswerFeedbackIfc.INCORRECT_FEEDBACK)) {\n        \n        // if match was not found, must be a distractor\n        if (choicebean.getMatch() == null || \"\".equals(choicebean.getMatch())) {", "originalCommit": "7872e332a6649f2f6e671bb800169516cf7db282", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM1NzE4Mg==", "url": "https://github.com/sakaiproject/sakai/pull/8261#discussion_r433357182", "bodyText": "StringUtils.isBlank() > StringUtils.isEmpty()", "author": "bjones86", "createdAt": "2020-06-01T16:45:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI4NTgwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU0ODYzNQ==", "url": "https://github.com/sakaiproject/sakai/pull/8261#discussion_r433548635", "bodyText": "This wasn't even code I changed, but I can update it!", "author": "jonespm", "createdAt": "2020-06-01T23:55:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI4NTgwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU0OTgwNw==", "url": "https://github.com/sakaiproject/sakai/pull/8261#discussion_r433549807", "bodyText": "It's also possible that isBlank could cause a regression here since it isn't the same behavior but probably unlikely.", "author": "jonespm", "createdAt": "2020-06-02T00:00:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI4NTgwNw=="}], "type": "inlineReview", "revised_code": {"commit": "f2f38111ee711c2ec050e71d8d16aca4d8aa4b70", "chunk": "diff --git a/samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/author/ItemModifyListener.java b/samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/author/ItemModifyListener.java\nindex 61c8dd3119..8cfae30f1d 100644\n--- a/samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/author/ItemModifyListener.java\n+++ b/samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/listener/author/ItemModifyListener.java\n\n@@ -939,7 +895,7 @@ public class ItemModifyListener implements ActionListener\n        }\n        \n        // if match was not found, must be a distractor\n-       if (choicebean.getMatch() == null || \"\".equals(choicebean.getMatch())) {\n+       if (StringUtils.isBlank(choicebean.getMatch())) {\n     \t   choicebean.setMatch(\"*\" + RB_AUTHOR_MESSAGES.getString(\"none_above\") + \"*\");\n     \t   choicebean.setIsCorrect(Boolean.TRUE);\n     \t   choicebean.setControllingSequence(MatchItemBean.CONTROLLING_SEQUENCE_DISTRACTOR);\n"}}, {"oid": "c35bd85d628a6b0bd606000d315f8c9d63d9ed40", "url": "https://github.com/sakaiproject/sakai/commit/c35bd85d628a6b0bd606000d315f8c9d63d9ed40", "message": "Merge branch 'master' into SAK-34123", "committedDate": "2020-06-01T23:49:30Z", "type": "commit"}, {"oid": "f2f38111ee711c2ec050e71d8d16aca4d8aa4b70", "url": "https://github.com/sakaiproject/sakai/commit/f2f38111ee711c2ec050e71d8d16aca4d8aa4b70", "message": "Updates based on code review:\n\nRemoving unneeded check\nUsing StringUtils.isBlank", "committedDate": "2020-06-02T00:00:12Z", "type": "commit"}]}