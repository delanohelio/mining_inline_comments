{"pr_number": 8555, "pr_title": "SAK-44264 Only warn if a grader user is not found", "pr_createdAt": "2020-09-11T16:47:50Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8555", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzE3MjY3Mg==", "url": "https://github.com/sakaiproject/sakai/pull/8555#discussion_r487172672", "bodyText": "make this a batch call up above instead;\nuserDirectoryService.getUsers( Set or List) and that will return only valid users\nthis will make one call to institutional LDAP instead of XX individual calls", "author": "ottenhoff", "createdAt": "2020-09-11T16:59:24Z", "path": "assignment/tool/src/java/org/sakaiproject/assignment/entityproviders/AssignmentEntityProvider.java", "diffHunk": "@@ -566,12 +566,12 @@ public ActionReturn getGrades(Map<String, Object> params) {\n         }));\n \n         Map<String, GraderUser> students = new HashMap<>();\n-        try {\n-            for (String studentId : site.getUsersIsAllowed(SECURE_ADD_ASSIGNMENT_SUBMISSION)) {\n+        for (String studentId : site.getUsersIsAllowed(SECURE_ADD_ASSIGNMENT_SUBMISSION)) {\n+            try {\n                 students.put(studentId, new GraderUser(userDirectoryService.getUser(studentId)));", "originalCommit": "b4911b6df5ff3d65a0818cacc5c8f7c9867f5926", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzE3NDU1NA==", "url": "https://github.com/sakaiproject/sakai/pull/8555#discussion_r487174554", "bodyText": "Cool, will do.", "author": "adrianfish", "createdAt": "2020-09-11T17:02:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzE3MjY3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzE5ODYxMA==", "url": "https://github.com/sakaiproject/sakai/pull/8555#discussion_r487198610", "bodyText": "Done.", "author": "adrianfish", "createdAt": "2020-09-11T17:50:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzE3MjY3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "c0eee00afd923725c347f34dd6dbbf04a9b52c90", "chunk": "diff --git a/assignment/tool/src/java/org/sakaiproject/assignment/entityproviders/AssignmentEntityProvider.java b/assignment/tool/src/java/org/sakaiproject/assignment/entityproviders/AssignmentEntityProvider.java\nindex b0bce1131f..588c7c7a71 100644\n--- a/assignment/tool/src/java/org/sakaiproject/assignment/entityproviders/AssignmentEntityProvider.java\n+++ b/assignment/tool/src/java/org/sakaiproject/assignment/entityproviders/AssignmentEntityProvider.java\n\n@@ -565,17 +561,8 @@ public class AssignmentEntityProvider extends AbstractEntityProvider implements\n             }\n         }));\n \n-        Map<String, GraderUser> students = new HashMap<>();\n-        for (String studentId : site.getUsersIsAllowed(SECURE_ADD_ASSIGNMENT_SUBMISSION)) {\n-            try {\n-                students.put(studentId, new GraderUser(userDirectoryService.getUser(studentId)));\n-            } catch (UserNotDefinedException e) {\n-                log.warn(\"No user for id {}\", studentId);\n-            }\n-        }\n-\n         Map<String, Object> data = new HashMap<>();\n-        data.put(\"students\", students);\n+        data.put(\"students\", getGraderUsersForSite(site));\n         data.put(\"grades\", grades);\n \n         return new ActionReturn(data);\n"}}, {"oid": "c0eee00afd923725c347f34dd6dbbf04a9b52c90", "url": "https://github.com/sakaiproject/sakai/commit/c0eee00afd923725c347f34dd6dbbf04a9b52c90", "message": "SAK-44264 Only warn if a grader user is not found\n\nhttps://jira.sakaiproject.org/browse/SAK-44006", "committedDate": "2020-09-11T17:49:00Z", "type": "commit"}, {"oid": "c0eee00afd923725c347f34dd6dbbf04a9b52c90", "url": "https://github.com/sakaiproject/sakai/commit/c0eee00afd923725c347f34dd6dbbf04a9b52c90", "message": "SAK-44264 Only warn if a grader user is not found\n\nhttps://jira.sakaiproject.org/browse/SAK-44006", "committedDate": "2020-09-11T17:49:00Z", "type": "forcePushed"}]}