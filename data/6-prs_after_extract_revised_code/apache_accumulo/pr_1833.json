{"pr_number": 1833, "pr_title": "Fixes #1760 - `listcompactions` command error is not helpful", "pr_createdAt": "2020-12-09T17:43:50Z", "pr_url": "https://github.com/apache/accumulo/pull/1833", "timeline": [{"oid": "e8ae5e50646101624ddf31a0c550d6e296618541", "url": "https://github.com/apache/accumulo/commit/e8ae5e50646101624ddf31a0c550d6e296618541", "message": "added a more helpful error message when no port is passed with the listcompactions command", "committedDate": "2020-12-09T17:32:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxNjExNg==", "url": "https://github.com/apache/accumulo/pull/1833#discussion_r539516116", "bodyText": "Just a minor wording suggestion:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                checkState(hasPort(), \"The given address does not include a port\");\n          \n          \n            \n                checkState(hasPort(), \"the address does not include a port\");\n          \n      \n    \n    \n  \n\nThe reason for this is that the exception could also occur when the user has not \"given\" any address. For example, if it's our own internal code. In that case, the word \"given\" might be confusing.", "author": "ctubbsii", "createdAt": "2020-12-09T17:45:39Z", "path": "core/src/main/java/org/apache/accumulo/core/util/HostAndPort.java", "diffHunk": "@@ -105,7 +105,7 @@ public boolean hasPort() {\n    *           occurring.\n    */\n   public int getPort() {\n-    checkState(hasPort());\n+    checkState(hasPort(), \"The given address does not include a port\");", "originalCommit": "e8ae5e50646101624ddf31a0c550d6e296618541", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4402021b830d513abb623d43915ad41af0bdd554", "chunk": "diff --git a/core/src/main/java/org/apache/accumulo/core/util/HostAndPort.java b/core/src/main/java/org/apache/accumulo/core/util/HostAndPort.java\nindex 9ab36f978f..d6ba8daf56 100644\n--- a/core/src/main/java/org/apache/accumulo/core/util/HostAndPort.java\n+++ b/core/src/main/java/org/apache/accumulo/core/util/HostAndPort.java\n\n@@ -105,7 +105,7 @@ public final class HostAndPort implements Serializable {\n    *           occurring.\n    */\n   public int getPort() {\n-    checkState(hasPort(), \"The given address does not include a port\");\n+    checkState(hasPort(), \"the address does not include a port\");\n     return port;\n   }\n \n"}}, {"oid": "4402021b830d513abb623d43915ad41af0bdd554", "url": "https://github.com/apache/accumulo/commit/4402021b830d513abb623d43915ad41af0bdd554", "message": "error message edit and exception log in debug", "committedDate": "2020-12-09T20:09:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYxNjQzMQ==", "url": "https://github.com/apache/accumulo/pull/1833#discussion_r539616431", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  log.debug(\"Exception thrown while attempting to list active compactions\", e);\n          \n          \n            \n                  log.debug(\"Failed to list active compactions for server {}\", tserver, e);", "author": "ctubbsii", "createdAt": "2020-12-09T20:17:22Z", "path": "shell/src/main/java/org/apache/accumulo/shell/commands/ActiveCompactionHelper.java", "diffHunk": "@@ -86,6 +90,7 @@ private static String formatActiveCompactionLine(String tserver, ActiveCompactio\n         compactions.add(formatActiveCompactionLine(tserver, ac));\n       }\n     } catch (Exception e) {\n+      log.debug(\"Exception thrown while attempting to list active compactions\", e);", "originalCommit": "4402021b830d513abb623d43915ad41af0bdd554", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fda90fd7a1c610124cf3f615f998272f902b6200", "chunk": "diff --git a/shell/src/main/java/org/apache/accumulo/shell/commands/ActiveCompactionHelper.java b/shell/src/main/java/org/apache/accumulo/shell/commands/ActiveCompactionHelper.java\nindex c20f6efb14..c9a52f0594 100644\n--- a/shell/src/main/java/org/apache/accumulo/shell/commands/ActiveCompactionHelper.java\n+++ b/shell/src/main/java/org/apache/accumulo/shell/commands/ActiveCompactionHelper.java\n\n@@ -90,7 +90,7 @@ class ActiveCompactionHelper {\n         compactions.add(formatActiveCompactionLine(tserver, ac));\n       }\n     } catch (Exception e) {\n-      log.debug(\"Exception thrown while attempting to list active compactions\", e);\n+      log.debug(\"Failed to list active compactions for server {}\", tserver, e);\n       compactions.add(tserver + \" ERROR \" + e.getMessage());\n     }\n     return compactions;\n"}}, {"oid": "fda90fd7a1c610124cf3f615f998272f902b6200", "url": "https://github.com/apache/accumulo/commit/fda90fd7a1c610124cf3f615f998272f902b6200", "message": "Update shell/src/main/java/org/apache/accumulo/shell/commands/ActiveCompactionHelper.java\r\n\r\nDebug message edit\n\nCo-authored-by: Christopher Tubbs <ctubbsii@apache.org>", "committedDate": "2020-12-09T20:18:29Z", "type": "commit"}]}