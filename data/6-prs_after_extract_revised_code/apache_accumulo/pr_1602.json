{"pr_number": 1602, "pr_title": "Lambdas replaced with method references.", "pr_createdAt": "2020-04-28T19:37:17Z", "pr_url": "https://github.com/apache/accumulo/pull/1602", "timeline": [{"oid": "d77a5e2f02512058437c7d95e914e76a62a61918", "url": "https://github.com/apache/accumulo/commit/d77a5e2f02512058437c7d95e914e76a62a61918", "message": "Lambdas replaced with method references.\n\nThis ticket updates instances of lambdas which can be replaced with\nmethod references. There was also one instance of an anonymous type\nbeing replaced with a method reference.", "committedDate": "2020-04-28T19:32:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzAwNTU5OQ==", "url": "https://github.com/apache/accumulo/pull/1602#discussion_r417005599", "bodyText": "Path has strange and subtle differences between different constructors. The original code specified the constructor was the one that took a String explicitly. This code would work if the type was changed to URI, instead of String, but I'm not sure the behavior would be identical. The original version protects against subtle differences like that. For this reason, I'm not a big fan of method references for constructors, unless the type is very stable and well-known (like ArrayList::new).\nThe change you've made here is probably fine... but I'm not sure if we want to protect against possible subtle changes in this code by keeping the explicit String type declaration.", "author": "ctubbsii", "createdAt": "2020-04-29T00:32:57Z", "path": "server/base/src/main/java/org/apache/accumulo/server/fs/VolumeManagerImpl.java", "diffHunk": "@@ -353,7 +353,7 @@ public Path matchingFileSystem(Path source, Set<String> options) {\n       URI optUri = URI.create(opt);\n       return sourceUri.getScheme().equals(optUri.getScheme())\n           && Objects.equals(sourceUri.getAuthority(), optUri.getAuthority());\n-    }).map((String opt) -> new Path(opt)).findFirst().orElse(null);\n+    }).map(Path::new).findFirst().orElse(null);", "originalCommit": "d77a5e2f02512058437c7d95e914e76a62a61918", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NzgzNw==", "url": "https://github.com/apache/accumulo/pull/1602#discussion_r417277837", "bodyText": "@ctubbsii I reverted this particular change based upon your suggestion. Thanks!", "author": "jmark99", "createdAt": "2020-04-29T12:32:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzAwNTU5OQ=="}], "type": "inlineReview", "revised_code": {"commit": "94a79f911b056b36968a708b3a92dd19c62c6875", "chunk": "diff --git a/server/base/src/main/java/org/apache/accumulo/server/fs/VolumeManagerImpl.java b/server/base/src/main/java/org/apache/accumulo/server/fs/VolumeManagerImpl.java\nindex f65d43fdde..f14a4dc44b 100644\n--- a/server/base/src/main/java/org/apache/accumulo/server/fs/VolumeManagerImpl.java\n+++ b/server/base/src/main/java/org/apache/accumulo/server/fs/VolumeManagerImpl.java\n\n@@ -353,7 +353,7 @@ public class VolumeManagerImpl implements VolumeManager {\n       URI optUri = URI.create(opt);\n       return sourceUri.getScheme().equals(optUri.getScheme())\n           && Objects.equals(sourceUri.getAuthority(), optUri.getAuthority());\n-    }).map(Path::new).findFirst().orElse(null);\n+    }).map((String opt) -> new Path(opt)).findFirst().orElse(null);\n   }\n \n   @Override\n"}}, {"oid": "94a79f911b056b36968a708b3a92dd19c62c6875", "url": "https://github.com/apache/accumulo/commit/94a79f911b056b36968a708b3a92dd19c62c6875", "message": "Lambdas replaced with method references.\n\nReverted one of the method reference changes due to possible subtle\ndifferences in the way in which constructor method references can\nbehave. See the Github PR (1602) for details.", "committedDate": "2020-04-29T12:32:37Z", "type": "commit"}]}