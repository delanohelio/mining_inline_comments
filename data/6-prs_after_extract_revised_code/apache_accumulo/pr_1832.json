{"pr_number": 1832, "pr_title": "Add additional permission checks in AuditMessageIT", "pr_createdAt": "2020-12-09T17:00:48Z", "pr_url": "https://github.com/apache/accumulo/pull/1832", "timeline": [{"oid": "a9bf77ad3b17cd96ec9001576d61f874f58d7eba", "url": "https://github.com/apache/accumulo/commit/a9bf77ad3b17cd96ec9001576d61f874f58d7eba", "message": "add security check for flush operation", "committedDate": "2020-12-09T16:55:49Z", "type": "commit"}, {"oid": "f4f420656d130f72bd5a3791374b5031ada98537", "url": "https://github.com/apache/accumulo/commit/f4f420656d130f72bd5a3791374b5031ada98537", "message": "remove unused import", "committedDate": "2020-12-09T17:01:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxMDU4MQ==", "url": "https://github.com/apache/accumulo/pull/1832#discussion_r539510581", "bodyText": "Normally, a range would be specified so that the start sorts before the end, but 's' sorts after 'e'. You should change it to match myRow and myRow~ like the previous line, instead, so that way this will still work, even if we later add additional argument checks to make sure the start sorts before the end.", "author": "ctubbsii", "createdAt": "2020-12-09T17:37:47Z", "path": "test/src/main/java/org/apache/accumulo/test/AuditMessageIT.java", "diffHunk": "@@ -482,6 +482,10 @@ public void testDeniedAudits() throws AccumuloSecurityException, AccumuloExcepti\n       auditConnector.tableOperations().deleteRows(OLD_TEST_TABLE_NAME, new Text(\"myRow\"),\n           new Text(\"myRow~\"));\n     } catch (AccumuloSecurityException ex) {}\n+    try {\n+      auditConnector.tableOperations().flush(OLD_TEST_TABLE_NAME, new Text(\"start\"),\n+              new Text(\"end\"), false);", "originalCommit": "f4f420656d130f72bd5a3791374b5031ada98537", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUzODk3OA==", "url": "https://github.com/apache/accumulo/pull/1832#discussion_r539538978", "bodyText": "Funny thing is, that is actually what I had originally but I changed it to mimic the parameters names for whatever reason.", "author": "Manno15", "createdAt": "2020-12-09T18:19:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxMDU4MQ=="}], "type": "inlineReview", "revised_code": {"commit": "d9209f5b27a4763717cfba65af62b872bd0fa77f", "chunk": "diff --git a/test/src/main/java/org/apache/accumulo/test/AuditMessageIT.java b/test/src/main/java/org/apache/accumulo/test/AuditMessageIT.java\nindex 96011ca127..f8681e0481 100644\n--- a/test/src/main/java/org/apache/accumulo/test/AuditMessageIT.java\n+++ b/test/src/main/java/org/apache/accumulo/test/AuditMessageIT.java\n\n@@ -483,8 +483,8 @@ public class AuditMessageIT extends ConfigurableMacBase {\n           new Text(\"myRow~\"));\n     } catch (AccumuloSecurityException ex) {}\n     try {\n-      auditConnector.tableOperations().flush(OLD_TEST_TABLE_NAME, new Text(\"start\"),\n-              new Text(\"end\"), false);\n+      auditConnector.tableOperations().flush(OLD_TEST_TABLE_NAME, new Text(\"myRow\"),\n+              new Text(\"myRow~\"), false);\n     } catch (AccumuloSecurityException ex) {}\n \n     // ... that will do for now.\n"}}, {"oid": "d9209f5b27a4763717cfba65af62b872bd0fa77f", "url": "https://github.com/apache/accumulo/commit/d9209f5b27a4763717cfba65af62b872bd0fa77f", "message": "make requested change", "committedDate": "2020-12-09T18:19:49Z", "type": "commit"}, {"oid": "489ec63f23dddda91b9a907fc4426fb1b4a294db", "url": "https://github.com/apache/accumulo/commit/489ec63f23dddda91b9a907fc4426fb1b4a294db", "message": "add test to make sure we can flush", "committedDate": "2020-12-10T13:51:43Z", "type": "commit"}, {"oid": "c95a31c4d2f273ffcc27de32ead4053458221f5b", "url": "https://github.com/apache/accumulo/commit/c95a31c4d2f273ffcc27de32ead4053458221f5b", "message": "add basic test for System.SYSTEM perm", "committedDate": "2020-12-10T15:30:07Z", "type": "commit"}, {"oid": "fe1c24749a4de7d5847e12ece36f240a13d48f84", "url": "https://github.com/apache/accumulo/commit/fe1c24749a4de7d5847e12ece36f240a13d48f84", "message": "revise flush test and add set/remove prop test", "committedDate": "2020-12-15T10:40:33Z", "type": "commit"}, {"oid": "ebef3fa4f2c4884259a515f104719f0982ded000", "url": "https://github.com/apache/accumulo/commit/ebef3fa4f2c4884259a515f104719f0982ded000", "message": "implement suggested idea", "committedDate": "2020-12-15T12:38:58Z", "type": "commit"}, {"oid": "a0ba79f445859fbbbb8ddedd3af3cebbbdf22873", "url": "https://github.com/apache/accumulo/commit/a0ba79f445859fbbbb8ddedd3af3cebbbdf22873", "message": "Merge branch '1.10' into pr/1832", "committedDate": "2020-12-15T19:39:17Z", "type": "commit"}, {"oid": "fae24932d5b837da64e7009d4b1e362ff5e4a816", "url": "https://github.com/apache/accumulo/commit/fae24932d5b837da64e7009d4b1e362ff5e4a816", "message": "Update ManagerApiIT\n\n* Make tests independent with consistent naming scheme\n* Make use of assertThrows to simplify checks\n* Rename variables and inline the test operations to make it easier to\n  follow the test intentions", "committedDate": "2020-12-16T01:24:08Z", "type": "commit"}]}