{"pr_number": 13313, "pr_title": "[BEAM-10480] Update SDF related documentation.", "pr_createdAt": "2020-11-12T01:05:20Z", "pr_url": "https://github.com/apache/beam/pull/13313", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzEyMDAyMw==", "url": "https://github.com/apache/beam/pull/13313#discussion_r523120023", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * The API is required to be implemented.\n          \n          \n            \n               * This method is <b>required</b> to be implemented.", "author": "pabloem", "createdAt": "2020-11-13T17:43:25Z", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java", "diffHunk": "@@ -49,12 +52,20 @@\n    *       call to this method).\n    *   <li>{@link RestrictionTracker#checkDone} MUST succeed.\n    * </ul>\n+   *\n+   * The API is required to be implemented.", "originalCommit": "4d797641ddf36f373fc82723f0935af18f03f37c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7feb4f3163e524ff91a23e8ae3d3b455356f4ff1", "chunk": "diff --git a/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java b/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\nindex e6076560aa..9ed074c739 100644\n--- a/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\n+++ b/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\n\n@@ -53,7 +53,7 @@ public abstract class RestrictionTracker<RestrictionT, PositionT> {\n    *   <li>{@link RestrictionTracker#checkDone} MUST succeed.\n    * </ul>\n    *\n-   * The API is required to be implemented.\n+   * This method is <b>required</b> to be implemented.\n    */\n   public abstract boolean tryClaim(PositionT position);\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzEyMDIzOQ==", "url": "https://github.com/apache/beam/pull/13313#discussion_r523120239", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * <p>This API is required to be implemented.\n          \n          \n            \n               * <p> This method is <b>required</b> to be implemented.", "author": "pabloem", "createdAt": "2020-11-13T17:43:50Z", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java", "diffHunk": "@@ -49,12 +52,20 @@\n    *       call to this method).\n    *   <li>{@link RestrictionTracker#checkDone} MUST succeed.\n    * </ul>\n+   *\n+   * The API is required to be implemented.\n    */\n   public abstract boolean tryClaim(PositionT position);\n \n   /**\n    * Returns a restriction accurately describing the full range of work the current {@link\n    * DoFn.ProcessElement} call will do, including already completed work.\n+   *\n+   * <p>The current restriction returned by method may be updated dynamically due to due to\n+   * concurrent invocation of other methods of the {@link RestrictionTracker}, For example, {@link\n+   * RestrictionTracker#trySplit(double)}.\n+   *\n+   * <p>This API is required to be implemented.", "originalCommit": "4d797641ddf36f373fc82723f0935af18f03f37c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7feb4f3163e524ff91a23e8ae3d3b455356f4ff1", "chunk": "diff --git a/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java b/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\nindex e6076560aa..9ed074c739 100644\n--- a/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\n+++ b/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\n\n@@ -53,7 +53,7 @@ public abstract class RestrictionTracker<RestrictionT, PositionT> {\n    *   <li>{@link RestrictionTracker#checkDone} MUST succeed.\n    * </ul>\n    *\n-   * The API is required to be implemented.\n+   * This method is <b>required</b> to be implemented.\n    */\n   public abstract boolean tryClaim(PositionT position);\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzEyMDY2OQ==", "url": "https://github.com/apache/beam/pull/13313#discussion_r523120669", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * <p>This API is required to be implemented in order to make sure no data loss during SDK\n          \n          \n            \n               * <p>This method is <b>required</b> to be implemented in order to prevent data loss during SDK", "author": "pabloem", "createdAt": "2020-11-13T17:44:35Z", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java", "diffHunk": "@@ -94,10 +108,15 @@\n   public abstract @Nullable SplitResult<RestrictionT> trySplit(double fractionOfRemainder);\n \n   /**\n-   * Called by the runner after {@link DoFn.ProcessElement} returns.\n+   * Checks whether the restriction has been fully processed.\n+   *\n+   * <p>Called by the SDK harness after {@link DoFn.ProcessElement} returns.\n    *\n    * <p>Must throw an exception with an informative error message, if there is still any unclaimed\n    * work remaining in the restriction.\n+   *\n+   * <p>This API is required to be implemented in order to make sure no data loss during SDK", "originalCommit": "4d797641ddf36f373fc82723f0935af18f03f37c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7feb4f3163e524ff91a23e8ae3d3b455356f4ff1", "chunk": "diff --git a/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java b/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\nindex e6076560aa..9ed074c739 100644\n--- a/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\n+++ b/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\n\n@@ -115,7 +115,7 @@ public abstract class RestrictionTracker<RestrictionT, PositionT> {\n    * <p>Must throw an exception with an informative error message, if there is still any unclaimed\n    * work remaining in the restriction.\n    *\n-   * <p>This API is required to be implemented in order to make sure no data loss during SDK\n+   * <p>This method is <b>required</b> to be implemented in order to prevent data loss during SDK\n    * processing.\n    */\n   public abstract void checkDone() throws IllegalStateException;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzEyMDc5Mg==", "url": "https://github.com/apache/beam/pull/13313#discussion_r523120792", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * <p>The API is required to be implemented.\n          \n          \n            \n               * <p> This method is <b>required</b> to be implemented.", "author": "pabloem", "createdAt": "2020-11-13T17:44:49Z", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java", "diffHunk": "@@ -116,6 +135,8 @@\n    * <p>It is valid to return {@link IsBounded#BOUNDED} after returning {@link IsBounded#UNBOUNDED}\n    * once the end of a restriction is discovered. It is not valid to return {@link\n    * IsBounded#UNBOUNDED} after returning {@link IsBounded#BOUNDED}.\n+   *\n+   * <p>The API is required to be implemented.", "originalCommit": "4d797641ddf36f373fc82723f0935af18f03f37c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7feb4f3163e524ff91a23e8ae3d3b455356f4ff1", "chunk": "diff --git a/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java b/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\nindex e6076560aa..9ed074c739 100644\n--- a/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\n+++ b/sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/splittabledofn/RestrictionTracker.java\n\n@@ -136,7 +136,7 @@ public abstract class RestrictionTracker<RestrictionT, PositionT> {\n    * once the end of a restriction is discovered. It is not valid to return {@link\n    * IsBounded#UNBOUNDED} after returning {@link IsBounded#BOUNDED}.\n    *\n-   * <p>The API is required to be implemented.\n+   * <p> This method is <b>required</b> to be implemented.\n    */\n   public abstract IsBounded isBounded();\n \n"}}, {"oid": "7feb4f3163e524ff91a23e8ae3d3b455356f4ff1", "url": "https://github.com/apache/beam/commit/7feb4f3163e524ff91a23e8ae3d3b455356f4ff1", "message": "Update SDF related documentation.", "committedDate": "2020-11-13T20:28:03Z", "type": "forcePushed"}, {"oid": "a8337b8a6b822ec8867d0bdd00bfa1b32e7278f3", "url": "https://github.com/apache/beam/commit/a8337b8a6b822ec8867d0bdd00bfa1b32e7278f3", "message": "Update SDF related documentation.", "committedDate": "2020-11-13T20:49:02Z", "type": "commit"}, {"oid": "a8337b8a6b822ec8867d0bdd00bfa1b32e7278f3", "url": "https://github.com/apache/beam/commit/a8337b8a6b822ec8867d0bdd00bfa1b32e7278f3", "message": "Update SDF related documentation.", "committedDate": "2020-11-13T20:49:02Z", "type": "forcePushed"}]}