{"pr_number": 13516, "pr_title": "Change the output type of FHIR Search from String to JsonArray", "pr_createdAt": "2020-12-10T00:07:11Z", "pr_url": "https://github.com/apache/beam/pull/13516", "timeline": [{"oid": "16c41f65759866302a1cbdf4639c23f1e88613d2", "url": "https://github.com/apache/beam/commit/16c41f65759866302a1cbdf4639c23f1e88613d2", "message": "Change FHIR Search DoFn's output type from String to JsonArray", "committedDate": "2020-12-09T23:58:58Z", "type": "commit"}, {"oid": "34ca5468720ad0efc04c5f4c600102a0898d4ab3", "url": "https://github.com/apache/beam/commit/34ca5468720ad0efc04c5f4c600102a0898d4ab3", "message": "Apply spotless", "committedDate": "2020-12-10T00:01:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUzMDI4Mg==", "url": "https://github.com/apache/beam/pull/13516#discussion_r542530282", "bodyText": "I recommend you set the coder from inside your expand function in FhirIO.java - that way your users will not need to set their coders manually every time.", "author": "pabloem", "createdAt": "2020-12-14T16:38:58Z", "path": "sdks/java/io/google-cloud-platform/src/test/java/org/apache/beam/sdk/io/gcp/healthcare/FhirIOTest.java", "diffHunk": "@@ -67,7 +68,8 @@ public void test_FhirIO_failedSearches() {\n \n     PCollection<HealthcareIOError<String>> failed = searchResult.getFailedSearches();\n \n-    PCollection<String> resources = searchResult.getResources();\n+    PCollection<JsonArray> resources = searchResult.getResources();\n+    resources.setCoder(JsonArrayCoder.of());", "originalCommit": "34ca5468720ad0efc04c5f4c600102a0898d4ab3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU0NzEwNA==", "url": "https://github.com/apache/beam/pull/13516#discussion_r542547104", "bodyText": "Thanks and done!", "author": "janeliulwq", "createdAt": "2020-12-14T17:00:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUzMDI4Mg=="}], "type": "inlineReview", "revised_code": {"commit": "c499551914c59b05b7a94e619900aa3b7ab5d516", "chunk": "diff --git a/sdks/java/io/google-cloud-platform/src/test/java/org/apache/beam/sdk/io/gcp/healthcare/FhirIOTest.java b/sdks/java/io/google-cloud-platform/src/test/java/org/apache/beam/sdk/io/gcp/healthcare/FhirIOTest.java\nindex f87c3ec79c..14df122194 100644\n--- a/sdks/java/io/google-cloud-platform/src/test/java/org/apache/beam/sdk/io/gcp/healthcare/FhirIOTest.java\n+++ b/sdks/java/io/google-cloud-platform/src/test/java/org/apache/beam/sdk/io/gcp/healthcare/FhirIOTest.java\n\n@@ -69,7 +69,6 @@ public class FhirIOTest {\n     PCollection<HealthcareIOError<String>> failed = searchResult.getFailedSearches();\n \n     PCollection<JsonArray> resources = searchResult.getResources();\n-    resources.setCoder(JsonArrayCoder.of());\n \n     PCollection<String> failedMsgIds =\n         failed.apply(\n"}}, {"oid": "c499551914c59b05b7a94e619900aa3b7ab5d516", "url": "https://github.com/apache/beam/commit/c499551914c59b05b7a94e619900aa3b7ab5d516", "message": "SetCoder in implemenetation instead of test", "committedDate": "2020-12-14T16:58:32Z", "type": "commit"}]}