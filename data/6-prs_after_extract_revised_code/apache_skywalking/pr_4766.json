{"pr_number": 4766, "pr_title": "Fix NPE in shardingjdbc 1.5.4.1", "pr_createdAt": "2020-05-09T10:56:05Z", "pr_url": "https://github.com/apache/skywalking/pull/4766", "timeline": [{"oid": "825b1868b818e688ddeacf9f51d3345a536a045c", "url": "https://github.com/apache/skywalking/commit/825b1868b818e688ddeacf9f51d3345a536a045c", "message": "fix #4765", "committedDate": "2020-05-09T10:54:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NjU2MA==", "url": "https://github.com/apache/skywalking/pull/4766#discussion_r422486560", "bodyText": "What thing is NULL triggering NPE?", "author": "wu-sheng", "createdAt": "2020-05-09T11:47:50Z", "path": "apm-sniffer/apm-sdk-plugin/sharding-jdbc-1.5.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/sjdbc/ExecuteEventListener.java", "diffHunk": "@@ -62,13 +62,17 @@ private void handle(AbstractExecutionEvent event, String operation) {\n                 AbstractSpan span = ContextManager.createExitSpan(\"/SJDBC/BRANCH/\" + operation, event.getDataSource());\n                 if (ExecutorDataMap.getDataMap().containsKey(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY)) {\n                     ContextManager.continued((ContextSnapshot) ExecutorDataMap.getDataMap()\n-                                                                              .get(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY));\n+                        .get(AsyncExecuteInterceptor.SNAPSHOT_DATA_KEY));\n                 }\n                 Tags.DB_TYPE.set(span, \"sql\");\n                 Tags.DB_INSTANCE.set(span, event.getDataSource());\n                 Tags.DB_STATEMENT.set(span, event.getSql());\n                 if (!event.getParameters().isEmpty()) {\n-                    Tags.DB_BIND_VARIABLES.set(span, Joiner.on(\",\").join(event.getParameters()));\n+                    String variables = event.getParameters()", "originalCommit": "825b1868b818e688ddeacf9f51d3345a536a045c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4Njg2MQ==", "url": "https://github.com/apache/skywalking/pull/4766#discussion_r422486861", "bodyText": "event.getParameters contains null value,inside Joiner will check null value and then throw NPE", "author": "ynfeng", "createdAt": "2020-05-09T11:52:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NjU2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NzU0NA==", "url": "https://github.com/apache/skywalking/pull/4766#discussion_r422487544", "bodyText": "Got it. LGTM.", "author": "wu-sheng", "createdAt": "2020-05-09T12:01:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NjU2MA=="}], "type": "inlineReview", "revised_code": null}]}