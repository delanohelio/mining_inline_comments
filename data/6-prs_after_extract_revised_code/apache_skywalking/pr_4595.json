{"pr_number": 4595, "pr_title": "Set the endpoint name length to 150, to keep safe and avoid over-length.", "pr_createdAt": "2020-03-30T15:19:04Z", "pr_url": "https://github.com/apache/skywalking/pull/4595", "timeline": [{"oid": "2904b6f4862fbd35aa6a1e959d1562eb50021f48", "url": "https://github.com/apache/skywalking/commit/2904b6f4862fbd35aa6a1e959d1562eb50021f48", "message": "Set the endpoint name length to 150, to keep safe and avoid over-length.", "committedDate": "2020-03-30T15:05:37Z", "type": "commit"}, {"oid": "f0033d904cc651f3fc74f60cabca56a73230bcae", "url": "https://github.com/apache/skywalking/commit/f0033d904cc651f3fc74f60cabca56a73230bcae", "message": "Set endpointNameMaxLength in the application.yml", "committedDate": "2020-03-30T15:17:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI4MzE5Mw==", "url": "https://github.com/apache/skywalking/pull/4595#discussion_r400283193", "bodyText": "This should be reverted", "author": "kezhenxu94", "createdAt": "2020-03-30T15:27:26Z", "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/source/EndpointRelation.java", "diffHunk": "@@ -71,16 +75,19 @@ public String getEntityId() {\n     @ScopeDefaultColumn.DefinedByField(columnName = \"child_service_id\")\n     private int childServiceId;\n     @Getter\n-    @Setter", "originalCommit": "f0033d904cc651f3fc74f60cabca56a73230bcae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI4NTI2Nw==", "url": "https://github.com/apache/skywalking/pull/4595#discussion_r400285267", "bodyText": "Yes. Added back.", "author": "wu-sheng", "createdAt": "2020-03-30T15:30:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI4MzE5Mw=="}], "type": "inlineReview", "revised_code": {"commit": "abd873a58ec331a92d01ef81b71c41ad71aaa4d1", "chunk": "diff --git a/oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/source/EndpointRelation.java b/oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/source/EndpointRelation.java\nindex f113cb701..de9691c3e 100644\n--- a/oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/source/EndpointRelation.java\n+++ b/oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/source/EndpointRelation.java\n\n@@ -67,21 +67,21 @@ public class EndpointRelation extends Source {\n     @Setter\n     private String serviceInstanceName;\n     @Getter\n-    @Setter\n     @ScopeDefaultColumn.DefinedByField(columnName = \"child_endpoint_name\")\n     private String childEndpoint;\n+\n+    public void setChildEndpoint(final String childEndpoint) {\n+        this.childEndpoint = childEndpoint.substring(0, CoreModule.getEndpointNameMaxLength());\n+    }\n+\n     @Getter\n     @Setter\n     @ScopeDefaultColumn.DefinedByField(columnName = \"child_service_id\")\n     private int childServiceId;\n+    @Setter\n     @Getter\n     @ScopeDefaultColumn.DefinedByField(columnName = \"child_service_name\", requireDynamicActive = true)\n     private String childServiceName;\n-\n-    public void setChildEndpoint(final String childEndpoint) {\n-        this.childEndpoint = childEndpoint.substring(0, CoreModule.getEndpointNameMaxLength());\n-    }\n-\n     @Getter\n     @Setter\n     private int childServiceInstanceId;\n"}}, {"oid": "abd873a58ec331a92d01ef81b71c41ad71aaa4d1", "url": "https://github.com/apache/skywalking/commit/abd873a58ec331a92d01ef81b71c41ad71aaa4d1", "message": "Fix a mischange.", "committedDate": "2020-03-30T15:28:53Z", "type": "commit"}, {"oid": "925c401dea94417caf9ee33b1eb5b97dce362b80", "url": "https://github.com/apache/skywalking/commit/925c401dea94417caf9ee33b1eb5b97dce362b80", "message": "Merge branch 'master' into endpoint-length", "committedDate": "2020-03-30T16:04:36Z", "type": "commit"}, {"oid": "a850edccc13d9315ac1959d99e403a924aeda8ba", "url": "https://github.com/apache/skywalking/commit/a850edccc13d9315ac1959d99e403a924aeda8ba", "message": "Correct the endpoint name length control logic", "committedDate": "2020-03-31T00:01:40Z", "type": "commit"}, {"oid": "0d0aa565a27a42c9931318258f05b0278450a217", "url": "https://github.com/apache/skywalking/commit/0d0aa565a27a42c9931318258f05b0278450a217", "message": "Merge branch 'endpoint-length' of https://github.com/apache/skywalking into endpoint-length", "committedDate": "2020-03-31T00:01:54Z", "type": "commit"}]}