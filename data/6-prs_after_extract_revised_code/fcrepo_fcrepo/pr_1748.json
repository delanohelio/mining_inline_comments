{"pr_number": 1748, "pr_title": "Ensure that all Fedora modules are included in the default logback.xml", "pr_createdAt": "2020-09-09T23:36:01Z", "pr_url": "https://github.com/fcrepo/fcrepo/pull/1748", "timeline": [{"oid": "a891977bad18a4a7c827ef89003a2bdb9983268d", "url": "https://github.com/fcrepo/fcrepo/commit/a891977bad18a4a7c827ef89003a2bdb9983268d", "message": "Ensure that all Fedora modules are included in the default logback.xml\n..and finetune the logging levels across the codebase.\n\nResolves: https://jira.lyrasis.org/browse/FCREPO-3415", "committedDate": "2020-09-09T23:31:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjI0MTc2NQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1748#discussion_r486241765", "bodyText": "A few questions here:\n\nWhy are you custom formatting the log message rather than just doing log.debug(\"Failed to commit transaction {}\", id, ex);?\nWhy debug? I would consider this an error. Unless it's innocuous and happens all the time, but, if that's the case, there's a different set of questions.", "author": "pwinckles", "createdAt": "2020-09-10T10:46:05Z", "path": "fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/TransactionImpl.java", "diffHunk": "@@ -88,6 +89,10 @@ public synchronized void commit() {\n             this.getEventAccumulator().emitEvents(id, baseUri, userAgent);\n             this.committed = true;\n         } catch (final PersistentStorageException ex) {\n+            if (log.isDebugEnabled()) {", "originalCommit": "a891977bad18a4a7c827ef89003a2bdb9983268d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a0d61fdae7d3cfe76b4d46696f506f5cf90805a9", "chunk": "diff --git a/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/TransactionImpl.java b/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/TransactionImpl.java\nindex 34ff5fc3a8..19812133ce 100644\n--- a/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/TransactionImpl.java\n+++ b/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/TransactionImpl.java\n\n@@ -89,9 +89,7 @@ public class TransactionImpl implements Transaction {\n             this.getEventAccumulator().emitEvents(id, baseUri, userAgent);\n             this.committed = true;\n         } catch (final PersistentStorageException ex) {\n-            if (log.isDebugEnabled()) {\n-                log.debug(\"Failed to commit transaction: {}\\n{}\", ex.getMessage(), ExceptionUtils.getStackTrace(ex));\n-            }\n+            log.error(\"Failed to commit transaction: {}\", id, ex);\n \n             // Rollback on commit failure\n             rollback();\n"}}, {"oid": "a0d61fdae7d3cfe76b4d46696f506f5cf90805a9", "url": "https://github.com/fcrepo/fcrepo/commit/a0d61fdae7d3cfe76b4d46696f506f5cf90805a9", "message": "code review", "committedDate": "2020-09-10T13:00:12Z", "type": "commit"}, {"oid": "1d32f6fff63aa535e75dc7a44b4f2000d52bbdd2", "url": "https://github.com/fcrepo/fcrepo/commit/1d32f6fff63aa535e75dc7a44b4f2000d52bbdd2", "message": "remove unused export", "committedDate": "2020-09-10T13:37:48Z", "type": "commit"}]}