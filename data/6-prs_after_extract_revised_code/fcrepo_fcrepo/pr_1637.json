{"pr_number": 1637, "pr_title": "Add rdf:type ldp:RDFSource to Rdf source resources", "pr_createdAt": "2020-03-02T17:53:58Z", "pr_url": "https://github.com/fcrepo/fcrepo/pull/1637", "timeline": [{"oid": "ebcdb1cd58b70c9b33ede49d46cd89faa3180aa4", "url": "https://github.com/fcrepo/fcrepo/commit/ebcdb1cd58b70c9b33ede49d46cd89faa3180aa4", "message": "Add rdf:type ldp:RDFSource to Rdf source resources", "committedDate": "2020-03-02T17:51:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzNjE0Mg==", "url": "https://github.com/fcrepo/fcrepo/pull/1637#discussion_r386636142", "bodyText": "Instead, could you use the extended class's getTriples() method here by changing this method to something like:\nfinal Stream<Triple> extraTriples = Stream.of(\n                new Triple(createURI(id), RDF.Init.type().asNode(), RDF_SOURCE.asNode()));\nreturn new DefaultRdfStream(createURI(id), Stream.concat(super.getTriples(), extraTriples));", "author": "awoods", "createdAt": "2020-03-02T20:37:31Z", "path": "fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/models/ContainerImpl.java", "diffHunk": "@@ -48,4 +61,19 @@ public ContainerImpl(final String id, final Transaction tx, final PersistentStor\n     public FedoraResource getDescribedResource() {\n         return this;\n     }\n+\n+    @Override\n+    public RdfStream getTriples() {\n+        try {", "originalCommit": "ebcdb1cd58b70c9b33ede49d46cd89faa3180aa4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3MzMwOQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1637#discussion_r386673309", "bodyText": "No because the method returns a RdfStream and not Stream<Triple>. I had thought of that. I could get the super.getTriples() and then extract the Stream<Triple>. Not sure if that is easier though.", "author": "whikloj", "createdAt": "2020-03-02T21:53:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzNjE0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NDU0Mw==", "url": "https://github.com/fcrepo/fcrepo/pull/1637#discussion_r386674543", "bodyText": "Oh maybe I can, I had some trouble with returning Streams of triples but perhaps I was mistaken about the cause. Doing a test build.", "author": "whikloj", "createdAt": "2020-03-02T21:55:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzNjE0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "f3f7f7e85cecaa082827999a2ab1a437ee2e3741", "chunk": "diff --git a/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/models/ContainerImpl.java b/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/models/ContainerImpl.java\nindex 36382b0d32..0abfb00055 100644\n--- a/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/models/ContainerImpl.java\n+++ b/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/models/ContainerImpl.java\n\n@@ -64,16 +60,9 @@ public class ContainerImpl extends FedoraResourceImpl implements Container {\n \n     @Override\n     public RdfStream getTriples() {\n-        try {\n-            final var triples = getSession().getTriples(id, getMementoDatetime());\n-            final Stream<Triple> extra_triples = Stream.of(\n-                    new Triple(createURI(id), RDF.Init.type().asNode(), RDF_SOURCE.asNode())\n-            );\n-            return new DefaultRdfStream(createURI(id), Stream.concat(triples, extra_triples));\n-        } catch (final PersistentItemNotFoundException e) {\n-            throw new ItemNotFoundException(\"Unable to retrieve triples for \" + getId(), e);\n-        } catch (final PersistentStorageException e) {\n-            throw new RepositoryRuntimeException(e);\n-        }\n+        final Stream<Triple> extra_triples = Stream.of(\n+                new Triple(createURI(id), RDF.Init.type().asNode(), RDF_SOURCE.asNode())\n+        );\n+        return new DefaultRdfStream(createURI(id), Stream.concat(super.getTriples(), extra_triples));\n     }\n }\n"}}, {"oid": "f3f7f7e85cecaa082827999a2ab1a437ee2e3741", "url": "https://github.com/fcrepo/fcrepo/commit/f3f7f7e85cecaa082827999a2ab1a437ee2e3741", "message": "Reduce override by calling parent method", "committedDate": "2020-03-02T22:02:29Z", "type": "commit"}]}