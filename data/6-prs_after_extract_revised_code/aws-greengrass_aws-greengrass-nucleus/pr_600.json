{"pr_number": 600, "pr_title": "Don't log exception trace when spooler task is interrupted", "pr_createdAt": "2020-11-02T00:58:38Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/600", "timeline": [{"oid": "4c8946aaec0ea5831b789452a0be186d469414ef", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/4c8946aaec0ea5831b789452a0be186d469414ef", "message": "Don't log exception trace when spooler task is interrupted", "committedDate": "2020-11-02T00:57:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY5ODI0NA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/600#discussion_r515698244", "bodyText": "info maybe?", "author": "MikeDombo", "createdAt": "2020-11-02T01:00:30Z", "path": "src/main/java/com/aws/greengrass/mqttclient/MqttClient.java", "diffHunk": "@@ -437,7 +437,7 @@ protected void spoolTask() {\n             }\n         } catch (InterruptedException e) {\n             Thread.currentThread().interrupt();\n-            logger.atError().log(\"Spooler message is interrupted\", e);\n+            logger.atDebug().log(\"Shutting down spooler task\");", "originalCommit": "4c8946aaec0ea5831b789452a0be186d469414ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTcwMDg4OA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/600#discussion_r515700888", "bodyText": "should we log before we mark the current thread as interrupted? or will that not make a difference?", "author": "rbattle", "createdAt": "2020-11-02T01:19:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY5ODI0NA=="}], "type": "inlineReview", "revised_code": {"commit": "43a7ab4fcb2019958a2f2a56ef55ab7e6177086e", "chunk": "diff --git a/src/main/java/com/aws/greengrass/mqttclient/MqttClient.java b/src/main/java/com/aws/greengrass/mqttclient/MqttClient.java\nindex 05b39666f9..33bb7195a0 100644\n--- a/src/main/java/com/aws/greengrass/mqttclient/MqttClient.java\n+++ b/src/main/java/com/aws/greengrass/mqttclient/MqttClient.java\n\n@@ -436,7 +436,6 @@ public class MqttClient implements Closeable {\n                 }).get();\n             }\n         } catch (InterruptedException e) {\n-            Thread.currentThread().interrupt();\n             logger.atDebug().log(\"Shutting down spooler task\");\n         } catch (ExecutionException e) {\n             logger.atError().log(\"Error when publishing from spooler\", e);\n"}}, {"oid": "43a7ab4fcb2019958a2f2a56ef55ab7e6177086e", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/43a7ab4fcb2019958a2f2a56ef55ab7e6177086e", "message": "Don't re-interrupt thread", "committedDate": "2020-11-02T01:25:43Z", "type": "commit"}]}