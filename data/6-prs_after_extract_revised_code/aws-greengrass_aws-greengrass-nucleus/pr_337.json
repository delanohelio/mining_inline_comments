{"pr_number": 337, "pr_title": "Add fetching cached credentials in tes test", "pr_createdAt": "2020-07-29T17:08:56Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/337", "timeline": [{"oid": "0879428ffaff36e9f3f750c34a243eb70325f5f7", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0879428ffaff36e9f3f750c34a243eb70325f5f7", "message": "Add fetching cached credentials in tes test", "committedDate": "2020-07-29T16:53:19Z", "type": "commit"}, {"oid": "694a29cfca93eaee76890335a3858c331efe02a3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/694a29cfca93eaee76890335a3858c331efe02a3", "message": "minor fix", "committedDate": "2020-07-29T17:03:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ1NTM0Mg==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/337#discussion_r462455342", "bodyText": "don't include 8443. 8443 is not used for TES", "author": "MikeDombo", "createdAt": "2020-07-29T17:10:28Z", "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/util/NetworkUtils.java", "diffHunk": "@@ -13,6 +13,7 @@\n \n public abstract class NetworkUtils {\n     protected final String[] MQTT_PORTS = {\"8883\", \"443\"};\n+    protected final String[] NETWORK_PORTS = {\"8443\", \"443\"};", "originalCommit": "694a29cfca93eaee76890335a3858c331efe02a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ4ODEwMw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/337#discussion_r462488103", "bodyText": "I see 8443 defined in https://github.com/aws/aws-greengrass-kernel/blob/908f3ac09bce824610c7a65beeecbc7347fca805/src/main/java/com/aws/iot/evergreen/iot/IotConnectionManager.java#L35 Do we actually want 443 or it's not used?", "author": "youtuyy", "createdAt": "2020-07-29T18:04:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ1NTM0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ5MDIxOQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/337#discussion_r462490219", "bodyText": "That's only for MQTT. TES doesn't use MQTT.", "author": "MikeDombo", "createdAt": "2020-07-29T18:08:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ1NTM0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM1NTE0OQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/337#discussion_r463355149", "bodyText": "we need to clean the 8443 part, I remember adding a TODO for that. But 8443 is used for HTTP with Iot and 8883 for MQTT. But TES endpoint is hosted at 443.", "author": "prateek-y", "createdAt": "2020-07-31T01:15:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ1NTM0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "6715788bcd97f34ddcf4856547266630719d892f", "chunk": "diff --git a/src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/util/NetworkUtils.java b/src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/util/NetworkUtils.java\nindex d6af89ce2..71ef400d8 100644\n--- a/src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/util/NetworkUtils.java\n+++ b/src/integrationtests/java/com/aws/iot/evergreen/integrationtests/e2e/util/NetworkUtils.java\n\n@@ -13,7 +13,7 @@ import java.io.IOException;\n \n public abstract class NetworkUtils {\n     protected final String[] MQTT_PORTS = {\"8883\", \"443\"};\n-    protected final String[] NETWORK_PORTS = {\"8443\", \"443\"};\n+    protected final String[] NETWORK_PORTS = {\"443\"};\n     protected static final Logger logger = LogManager.getLogger(NetworkUtils.class);\n \n     private enum Platform {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ1NjMwNw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/337#discussion_r462456307", "bodyText": "Now that this test is turning off the network, you must change the @Tag to E2E-INTRUSIVE", "author": "MikeDombo", "createdAt": "2020-07-29T17:12:05Z", "path": "src/integrationtests/java/com/aws/iot/evergreen/integrationtests/tes/TESTest.java", "diffHunk": "@@ -42,6 +43,7 @@\n     private String roleId;", "originalCommit": "694a29cfca93eaee76890335a3858c331efe02a3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6715788bcd97f34ddcf4856547266630719d892f", "chunk": "diff --git a/src/integrationtests/java/com/aws/iot/evergreen/integrationtests/tes/TESTest.java b/src/integrationtests/java/com/aws/iot/evergreen/integrationtests/tes/TESTest.java\nindex 135bec85c..d55c85a4f 100644\n--- a/src/integrationtests/java/com/aws/iot/evergreen/integrationtests/tes/TESTest.java\n+++ b/src/integrationtests/java/com/aws/iot/evergreen/integrationtests/tes/TESTest.java\n\n@@ -35,7 +35,7 @@ import static org.junit.jupiter.api.Assertions.assertEquals;\n import static org.junit.jupiter.api.Assertions.assertNotNull;\n import static org.junit.jupiter.api.Assertions.assertTrue;\n \n-@Tag(\"E2E\")\n+@Tag(\"E2E-INTRUSIVE\")\n class TESTest extends BaseITCase {\n     private Kernel kernel;\n     private ThingInfo thingInfo;\n"}}, {"oid": "6715788bcd97f34ddcf4856547266630719d892f", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/6715788bcd97f34ddcf4856547266630719d892f", "message": "address comments", "committedDate": "2020-07-29T18:54:15Z", "type": "commit"}, {"oid": "51c2d9d4881cf28f8f5a8374ea256ca3e368df40", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/51c2d9d4881cf28f8f5a8374ea256ca3e368df40", "message": "Merge branch 'master' into tes-cache-test", "committedDate": "2020-07-29T23:08:56Z", "type": "commit"}, {"oid": "7c572eb9e102a1c14f86919851b89c539f1ba37d", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/7c572eb9e102a1c14f86919851b89c539f1ba37d", "message": "Merge branch 'master' into tes-cache-test", "committedDate": "2020-07-30T07:28:29Z", "type": "commit"}, {"oid": "70acde400932eb3802cc93be61d5d9dd5689a61a", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/70acde400932eb3802cc93be61d5d9dd5689a61a", "message": "Merge branch 'master' into tes-cache-test", "committedDate": "2020-07-30T22:02:00Z", "type": "commit"}, {"oid": "e3b4c4a7eba4f39ebe7c945aa83fe94e5a2c4f5c", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/e3b4c4a7eba4f39ebe7c945aa83fe94e5a2c4f5c", "message": "Merge branch 'master' into tes-cache-test", "committedDate": "2020-07-31T03:33:41Z", "type": "commit"}]}