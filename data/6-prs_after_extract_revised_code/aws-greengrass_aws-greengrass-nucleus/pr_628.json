{"pr_number": 628, "pr_title": "Cleanup other IPC implementations", "pr_createdAt": "2020-11-06T01:59:08Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/628", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ4NDE2NQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/628#discussion_r518484165", "bodyText": "We should be removing service name from the UpdateStateRequest as it does not make any sense for customer to provide this.", "author": "abanthiy", "createdAt": "2020-11-06T02:16:17Z", "path": "src/main/java/com/aws/greengrass/builtin/services/lifecycle/LifecycleIPCEventStreamAgent.java", "diffHunk": "@@ -103,17 +103,21 @@ protected void onStreamClosed() {\n         @SuppressWarnings(\"PMD.PreserveStackTrace\")\n         public UpdateStateResponse handleRequest(UpdateStateRequest request) {\n             log.atInfo().log(\"Got update state request for service \" + serviceName);\n-            State s = State.valueOf(request.getState().toString());\n             String serviceN = request.getServiceName() == null ? serviceName : request.getServiceName();\n+            if (!serviceN.equals(serviceName)) {", "originalCommit": "fcf3ed7dc074f71a6eb55e17ef905648f8e40281", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ5MTgxNA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/628#discussion_r518491814", "bodyText": "Removed from model and all (1) usage of it.", "author": "MikeDombo", "createdAt": "2020-11-06T02:44:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ4NDE2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "7ebab33adeb8a1ba0f9ea62c2f3e845bedc672f0", "chunk": "diff --git a/src/main/java/com/aws/greengrass/builtin/services/lifecycle/LifecycleIPCEventStreamAgent.java b/src/main/java/com/aws/greengrass/builtin/services/lifecycle/LifecycleIPCEventStreamAgent.java\nindex 05e581431..78456b4aa 100644\n--- a/src/main/java/com/aws/greengrass/builtin/services/lifecycle/LifecycleIPCEventStreamAgent.java\n+++ b/src/main/java/com/aws/greengrass/builtin/services/lifecycle/LifecycleIPCEventStreamAgent.java\n\n@@ -103,22 +103,17 @@ public class LifecycleIPCEventStreamAgent {\n         @SuppressWarnings(\"PMD.PreserveStackTrace\")\n         public UpdateStateResponse handleRequest(UpdateStateRequest request) {\n             log.atInfo().log(\"Got update state request for service \" + serviceName);\n-            String serviceN = request.getServiceName() == null ? serviceName : request.getServiceName();\n-            if (!serviceN.equals(serviceName)) {\n-                throw new InvalidArgumentsError(\"Cannot update state for a different component\");\n-            }\n-\n             GreengrassService service;\n             try {\n-                service = kernel.locate(serviceN);\n+                service = kernel.locate(serviceName);\n                 State s = State.valueOf(request.getState().toString());\n                 service.reportState(s);\n             } catch (ServiceLoadException e) {\n-                log.atWarn().log(\"Component {} not found\", serviceN);\n+                log.atWarn().log(\"Component {} not found\", serviceName);\n                 ResourceNotFoundError rnf = new ResourceNotFoundError();\n                 rnf.setMessage(\"Component with given name not found\");\n                 rnf.setResourceType(\"Component\");\n-                rnf.setResourceName(request.getServiceName());\n+                rnf.setResourceName(serviceName);\n                 throw rnf;\n             }\n \n"}}, {"oid": "7ebab33adeb8a1ba0f9ea62c2f3e845bedc672f0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/7ebab33adeb8a1ba0f9ea62c2f3e845bedc672f0", "message": "Cleanup other IPC implementations", "committedDate": "2020-11-06T02:43:42Z", "type": "commit"}, {"oid": "7ebab33adeb8a1ba0f9ea62c2f3e845bedc672f0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/7ebab33adeb8a1ba0f9ea62c2f3e845bedc672f0", "message": "Cleanup other IPC implementations", "committedDate": "2020-11-06T02:43:42Z", "type": "forcePushed"}, {"oid": "bd565c0e1001aa926541694ca5ac1f9f27f5392b", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/bd565c0e1001aa926541694ca5ac1f9f27f5392b", "message": "Merge branch 'master' into lifecycleipc", "committedDate": "2020-11-06T06:25:30Z", "type": "commit"}]}