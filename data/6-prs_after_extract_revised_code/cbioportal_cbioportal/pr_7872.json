{"pr_number": 7872, "pr_title": "Add CNA Gene Filter to StudyViewFilter", "pr_createdAt": "2020-09-09T20:56:31Z", "pr_url": "https://github.com/cBioPortal/cbioportal/pull/7872", "timeline": [{"oid": "709b20ef4e8688f6e8592c0dd06f261687ecfd4a", "url": "https://github.com/cBioPortal/cbioportal/commit/709b20ef4e8688f6e8592c0dd06f261687ecfd4a", "message": "Add CNA Gene Filter to StudyViewFilter\n\n- Created CNAFilter type\n- Added CNAFilters to StudyViewFilter\n- Created CNAFilterApplier\n- Added CNAFilterApplier to StudyViewFilterApplier\n- Relevant tests", "committedDate": "2020-09-09T20:58:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMzMjc2Ng==", "url": "https://github.com/cBioPortal/cbioportal/pull/7872#discussion_r486332766", "bodyText": "Studies can have multiple CNA profiles (ex: gbm_tcga_pub study has 2 CNA profiles). profileType needs to be included. It looks much similar to GenomicDataFilter, may be reuse it", "author": "kalletlak", "createdAt": "2020-09-10T13:24:36Z", "path": "web/src/main/java/org/cbioportal/web/parameter/CNAFilter.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package org.cbioportal.web.parameter;\n+\n+import org.cbioportal.model.CNA;\n+\n+public class CNAFilter {", "originalCommit": "709b20ef4e8688f6e8592c0dd06f261687ecfd4a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "55c992c08bd55e874e2ffc1e9e5f076641321dbd", "chunk": "diff --git a/web/src/main/java/org/cbioportal/web/parameter/CNAFilter.java b/web/src/main/java/org/cbioportal/web/parameter/CNAFilter.java\ndeleted file mode 100644\nindex da7bc8cc3..000000000\n--- a/web/src/main/java/org/cbioportal/web/parameter/CNAFilter.java\n+++ /dev/null\n\n@@ -1,25 +0,0 @@\n-package org.cbioportal.web.parameter;\n-\n-import org.cbioportal.model.CNA;\n-\n-public class CNAFilter {\n-    private Integer entrezGeneId;\n-    private CNA alteration;\n-    \n-\n-    public Integer getEntrezGeneId() {\n-        return entrezGeneId;\n-    }\n-\n-    public void setEntrezGeneId(Integer entrezGeneId) {\n-        this.entrezGeneId = entrezGeneId;\n-    }\n-\n-    public CNA getAlteration() {\n-        return alteration;\n-    }\n-\n-    public void setAlteration(CNA alteration) {\n-        this.alteration = alteration;\n-    }\n-}\n"}}, {"oid": "55c992c08bd55e874e2ffc1e9e5f076641321dbd", "url": "https://github.com/cBioPortal/cbioportal/commit/55c992c08bd55e874e2ffc1e9e5f076641321dbd", "message": "GeneFilter and StudyViewSampleFilter support all CNA muts\n\n- Changed the regex in GeneFilter to accept `GAIN|DIPLOID|HETLOSS`\n- Modified `getDiscreteCopyNumbersInMultipleMolecularProfiles` in\n  DiscreteCopyNumberServiceImpl to support all CNA mutations\n  - This method is called by StudyViewFilterApplier, so this allows the\n  filter applier to support al CNA muts", "committedDate": "2020-09-23T17:36:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAxNTMyOA==", "url": "https://github.com/cBioPortal/cbioportal/pull/7872#discussion_r495015328", "bodyText": "I think this is not required", "author": "kalletlak", "createdAt": "2020-09-25T14:11:03Z", "path": "web/src/main/java/org/cbioportal/web/parameter/GeneFilter.java", "diffHunk": "@@ -16,7 +16,7 @@\n     private Set<String> molecularProfileIds;\n     private List<List<String>> geneQueries;\n \n-    private final String GENE_QUERY_PATTERN = \"^(\\\\w+)[\\\\s]*?(?:\\\\:(?:[\\\\s]*(?:(AMP)|(HOMDEL))\\\\b)+)?$\";\n+    private final String GENE_QUERY_PATTERN = \"^(\\\\w+)[\\\\s]*?(?:\\\\:(?:[\\\\s]*(?:(AMP)|(GAIN)|(DIPLOID)|(HETLOSS)|(HOMDEL))\\\\b)+)?$\";", "originalCommit": "55c992c08bd55e874e2ffc1e9e5f076641321dbd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "b3007625b9eece221c826809192bedf2c3125402", "url": "https://github.com/cBioPortal/cbioportal/commit/b3007625b9eece221c826809192bedf2c3125402", "message": "Treatments API Tweaks\n- Add new endpoint for determining if sample treatments should be displayed.\n  This needed to be separated because for `gbm_columbia_2019`, sample treatments\n  should not be displayed, but patient treatments should.\n- Filter out unknown treatments from sample treatments API\n- Switch from using internal ID to stable ID for the patient field", "committedDate": "2020-10-27T13:11:59Z", "type": "forcePushed"}, {"oid": "cee09a5ba50cfacc0ad18f37709732b775e4b166", "url": "https://github.com/cBioPortal/cbioportal/commit/cee09a5ba50cfacc0ad18f37709732b775e4b166", "message": "GeneFilter and StudyViewSampleFilter support all CNA muts\n\n- Changed the regex in GeneFilter to accept `GAIN|DIPLOID|HETLOSS`\n- Modified `getDiscreteCopyNumbersInMultipleMolecularProfiles` in\n  DiscreteCopyNumberServiceImpl to support all CNA mutations\n  - This method is called by StudyViewFilterApplier, so this allows the\n  filter applier to support al CNA muts", "committedDate": "2020-10-29T18:36:22Z", "type": "commit"}, {"oid": "cee09a5ba50cfacc0ad18f37709732b775e4b166", "url": "https://github.com/cBioPortal/cbioportal/commit/cee09a5ba50cfacc0ad18f37709732b775e4b166", "message": "GeneFilter and StudyViewSampleFilter support all CNA muts\n\n- Changed the regex in GeneFilter to accept `GAIN|DIPLOID|HETLOSS`\n- Modified `getDiscreteCopyNumbersInMultipleMolecularProfiles` in\n  DiscreteCopyNumberServiceImpl to support all CNA mutations\n  - This method is called by StudyViewFilterApplier, so this allows the\n  filter applier to support al CNA muts", "committedDate": "2020-10-29T18:36:22Z", "type": "forcePushed"}]}