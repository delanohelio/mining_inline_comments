{"pr_number": 10211, "pr_title": "Update to latest Conscrypt release and add workarounds for bugs", "pr_createdAt": "2020-04-24T14:00:54Z", "pr_url": "https://github.com/netty/netty/pull/10211", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3OTQ0Nw==", "url": "https://github.com/netty/netty/pull/10211#discussion_r414779447", "bodyText": "Which bug is this? Is there an github issue or similar that could be linked to?", "author": "ejona86", "createdAt": "2020-04-24T18:29:51Z", "path": "handler/src/test/java/io/netty/handler/ssl/SSLEngineTest.java", "diffHunk": "@@ -2163,7 +2180,10 @@ private static void testCloseInboundAfterBeginHandshake(SSLEngine engine) throws\n         engine.beginHandshake();\n         try {\n             engine.closeInbound();\n-            fail();\n+            // Workaround for conscrypt bug", "originalCommit": "5d0e8701431fb6e92a61f3b4cb39aa6a1ec375c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUwMzgxNg==", "url": "https://github.com/netty/netty/pull/10211#discussion_r415503816", "bodyText": "@ejona86 I added links to the bugs as comments.", "author": "normanmaurer", "createdAt": "2020-04-27T04:36:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3OTQ0Nw=="}], "type": "inlineReview", "revised_code": {"commit": "2990dcf1c624a011d62e0708266993b2b04c6a49", "chunk": "diff --git a/handler/src/test/java/io/netty/handler/ssl/SSLEngineTest.java b/handler/src/test/java/io/netty/handler/ssl/SSLEngineTest.java\nindex 01f36e2fc5..92b75eeeb4 100644\n--- a/handler/src/test/java/io/netty/handler/ssl/SSLEngineTest.java\n+++ b/handler/src/test/java/io/netty/handler/ssl/SSLEngineTest.java\n\n@@ -2181,6 +2203,7 @@ public abstract class SSLEngineTest {\n         try {\n             engine.closeInbound();\n             // Workaround for conscrypt bug\n+            // See https://github.com/google/conscrypt/issues/839\n             if (!Conscrypt.isEngineSupported(engine)) {\n                 fail();\n             }\n"}}, {"oid": "226075d1682067433c28867d955c6c802469a544", "url": "https://github.com/netty/netty/commit/226075d1682067433c28867d955c6c802469a544", "message": "Update to latest Conscrypt release and add workarounds for bugs\n\nMotivation:\n\nWe are far behind with the version of Conscrypt we are using during testing. We should ensure we use the latest.\n\nModifications:\n\n- Update conscrypt dependency\n- Ensure we use conscrypt provider in tests\n- Add workarounds for conscrypt bugs in testsuite\n\nResult:\n\nUse latest Conscrypt release", "committedDate": "2020-04-27T04:34:36Z", "type": "commit"}, {"oid": "2990dcf1c624a011d62e0708266993b2b04c6a49", "url": "https://github.com/netty/netty/commit/2990dcf1c624a011d62e0708266993b2b04c6a49", "message": "Link to conscrypt bugs", "committedDate": "2020-04-27T04:36:09Z", "type": "commit"}, {"oid": "2990dcf1c624a011d62e0708266993b2b04c6a49", "url": "https://github.com/netty/netty/commit/2990dcf1c624a011d62e0708266993b2b04c6a49", "message": "Link to conscrypt bugs", "committedDate": "2020-04-27T04:36:09Z", "type": "forcePushed"}]}