{"pr_number": 10629, "pr_title": "Replace UNSAFE.throwException with alternatives supported on Java 8", "pr_createdAt": "2020-10-01T13:37:44Z", "pr_url": "https://github.com/netty/netty/pull/10629", "timeline": [{"oid": "39f6abcb141f9e5b8446d94e3e3e2e15b6907ff3", "url": "https://github.com/netty/netty/commit/39f6abcb141f9e5b8446d94e3e3e2e15b6907ff3", "message": "Replace UNSAFE.throwException with alternatives supported on Java 8\n\nMotivation:\n We wish to use Unsafe as little as possible, and Java 8 allows us\n to take some short-cuts or play some tricks with generics,\n for the purpose of working around having to declare all checked\n exceptions. Ideally all checked exceptions would be declared, but\n the code base is not ready for that yet.\n\nModification:\n The call to UNSAFE.throwException has been removed, so when we need\n that feature, we instead use the generic exception trick.\n In may cases, Java 8 allows us to throw Throwable directly. This\n happens in cases where no exception is declared to be thrown in a\n scope.\n Finally, some warnings have also been fixed, and some imports have\n been reorganised and cleaned up while I was modifying the files\n anyway.\n\nResult:\n We no longer use Unsafe for throwing any exceptions.", "committedDate": "2020-10-01T13:34:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODI2MzM1NQ==", "url": "https://github.com/netty/netty/pull/10629#discussion_r498263355", "bodyText": "good call", "author": "normanmaurer", "createdAt": "2020-10-01T13:55:30Z", "path": "common/src/main/java/io/netty/util/NetUtil.java", "diffHunk": "@@ -143,22 +143,22 @@\n         byte[] LOCALHOST6_BYTES = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1};\n \n         // Create IPv4 loopback address.\n-        Inet4Address localhost4 = null;\n+        Inet4Address localhost4;\n         try {\n             localhost4 = (Inet4Address) InetAddress.getByAddress(\"localhost\", LOCALHOST4_BYTES);\n-        } catch (Exception e) {\n+        } catch (UnknownHostException e) {\n             // We should not get here as long as the length of the address is correct.\n-            PlatformDependent.throwException(e);\n+            throw new ExceptionInInitializerError(e);", "originalCommit": "39f6abcb141f9e5b8446d94e3e3e2e15b6907ff3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}