{"pr_number": 1577, "pr_title": "4.17", "pr_createdAt": "2020-03-31T11:35:35Z", "pr_url": "https://github.com/jbosstm/narayana/pull/1577", "timeline": [{"oid": "ed48948dba666c27cbbb5a67f925c35a7d1498ad", "url": "https://github.com/jbosstm/narayana/commit/ed48948dba666c27cbbb5a67f925c35a7d1498ad", "message": "JBTM-3136 Use https repo for common file from 707fc6698e2a2cc75a7cff36a8ea442148b774eb", "committedDate": "2020-03-31T11:28:03Z", "type": "commit"}, {"oid": "f2f71a6577f2482f9e8fb99aeda7607720877849", "url": "https://github.com/jbosstm/narayana/commit/f2f71a6577f2482f9e8fb99aeda7607720877849", "message": "TEMP: Only run the failing test", "committedDate": "2020-04-01T13:56:41Z", "type": "forcePushed"}, {"oid": "f144d22806ed0b0e3d309263d73e5386b6c2b0ec", "url": "https://github.com/jbosstm/narayana/commit/f144d22806ed0b0e3d309263d73e5386b6c2b0ec", "message": "TEMP: Only run the failing test", "committedDate": "2020-04-01T14:58:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcyNTk5MA==", "url": "https://github.com/jbosstm/narayana/pull/1577#discussion_r401725990", "bodyText": "Thanks", "author": "mmusgrov", "createdAt": "2020-04-01T15:57:09Z", "path": "ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java", "diffHunk": "@@ -340,6 +344,7 @@ private static boolean test_setup()\n         }\n         catch (Exception ex) {\n             System.err.println(\"test_setup: Failed \" + ex);\n+            ex.printStackTrace();", "originalCommit": "f144d22806ed0b0e3d309263d73e5386b6c2b0ec", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc2MTYzNA==", "url": "https://github.com/jbosstm/narayana/pull/1577#discussion_r401761634", "bodyText": "Thanks for the suggestion!", "author": "tomjenkinson", "createdAt": "2020-04-01T16:50:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcyNTk5MA=="}], "type": "inlineReview", "revised_code": {"commit": "cee01f116320f2406338813e6c8a17a44f9edb8b", "chunk": "diff --git a/ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java b/ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java\nindex f08e5dfd9..1a1a5e7cc 100644\n--- a/ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java\n+++ b/ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java\n\n@@ -344,7 +340,6 @@ public class ActionTestClient\n         }\n         catch (Exception ex) {\n             System.err.println(\"test_setup: Failed \" + ex);\n-            ex.printStackTrace();\n         }\n \n         return setupOk;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcyNjY5MQ==", "url": "https://github.com/jbosstm/narayana/pull/1577#discussion_r401726691", "bodyText": "The stack trace provides the same information as these output statements so it's safe to remove them.", "author": "mmusgrov", "createdAt": "2020-04-01T15:58:06Z", "path": "ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java", "diffHunk": "@@ -303,7 +303,11 @@ private static boolean test_setup()\n         boolean setupOk = false;\n \n         try {\n-            String host = InetAddress.getLocalHost().getHostAddress();\n+            System.out.println(\"Here\");", "originalCommit": "f144d22806ed0b0e3d309263d73e5386b6c2b0ec", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc0NDQ0Mw==", "url": "https://github.com/jbosstm/narayana/pull/1577#discussion_r401744443", "bodyText": "I will remove them, one of them prints out the host but I think it might not be necessary to isolate this particular issue as it fails before it is printed", "author": "tomjenkinson", "createdAt": "2020-04-01T16:23:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcyNjY5MQ=="}], "type": "inlineReview", "revised_code": {"commit": "86d3d44152b788a8cc21b3e3b7b753ed0b41cbf0", "chunk": "diff --git a/ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java b/ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java\nindex f08e5dfd9..8e53323b4 100644\n--- a/ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java\n+++ b/ArjunaCore/arjuna/tests/classes/com/hp/mwtests/ts/arjuna/recovery/ActionTestClient.java\n\n@@ -303,11 +303,7 @@ public class ActionTestClient\n         boolean setupOk = false;\n \n         try {\n-            System.out.println(\"Here\");\n-            InetAddress localHost = InetAddress.getLocalHost();\n-            System.out.println(\"Here2\");\n-            String host = localHost.getHostAddress();\n-            System.out.println(\"Here3\" + host);\n+            String host = InetAddress.getLocalHost().getHostAddress();\n             _test_service_socket = new ServerSocket(_port);\n             _test_socket = new Socket(host, _port);\n \n"}}, {"oid": "86d3d44152b788a8cc21b3e3b7b753ed0b41cbf0", "url": "https://github.com/jbosstm/narayana/commit/86d3d44152b788a8cc21b3e3b7b753ed0b41cbf0", "message": "TEMP: Only run the failing test", "committedDate": "2020-04-01T16:24:22Z", "type": "forcePushed"}, {"oid": "1c9141b415e90e8e74a0e4ddc2dc51ac8c563b83", "url": "https://github.com/jbosstm/narayana/commit/1c9141b415e90e8e74a0e4ddc2dc51ac8c563b83", "message": "TEST CHANGE ONLY: Print the stack trace (to console as the preceeding line does)", "committedDate": "2020-04-01T16:51:26Z", "type": "forcePushed"}, {"oid": "38ad37e9b56e06df7e7d6ed26441bee087f88945", "url": "https://github.com/jbosstm/narayana/commit/38ad37e9b56e06df7e7d6ed26441bee087f88945", "message": "TEST CHANGE ONLY: Respect the h2 config requirements as per other commits", "committedDate": "2020-04-03T08:32:39Z", "type": "forcePushed"}, {"oid": "cee01f116320f2406338813e6c8a17a44f9edb8b", "url": "https://github.com/jbosstm/narayana/commit/cee01f116320f2406338813e6c8a17a44f9edb8b", "message": "JBTM-3136: Use a clean local repo as per db301ea530c28a132b679782172e3e8a6c09c28c", "committedDate": "2020-04-03T08:34:18Z", "type": "commit"}, {"oid": "7e66d47cde3fe2130b0c3e938f7ff2f11537102c", "url": "https://github.com/jbosstm/narayana/commit/7e66d47cde3fe2130b0c3e938f7ff2f11537102c", "message": "RELEASE SCRIPT ONLY: Updated to use the version of maven provided in the Narayana repo as per a4d08ae834d6acbf60cddb94e72b2e7e5eeace0b", "committedDate": "2020-04-03T08:34:24Z", "type": "commit"}, {"oid": "12b8ad7446bc529cef46d2b3a62716409e85713b", "url": "https://github.com/jbosstm/narayana/commit/12b8ad7446bc529cef46d2b3a62716409e85713b", "message": "Force the maven tool to use https for the central repo as per 768e2d1fad120ae0bc24b7370e21c31535fdca76", "committedDate": "2020-04-03T08:34:24Z", "type": "commit"}, {"oid": "35a2ac9fa3cd17d9159eb8661f07c5700b0dc346", "url": "https://github.com/jbosstm/narayana/commit/35a2ac9fa3cd17d9159eb8661f07c5700b0dc346", "message": "TOOLS: Updated to same version of Maven as in master", "committedDate": "2020-04-03T08:34:24Z", "type": "commit"}, {"oid": "fbcce3486bc197d6a9d41334212773590e12d9e8", "url": "https://github.com/jbosstm/narayana/commit/fbcce3486bc197d6a9d41334212773590e12d9e8", "message": "TEST CHANGE ONLY: Print the stack trace (to console as the preceeding line does)", "committedDate": "2020-04-03T08:34:24Z", "type": "commit"}, {"oid": "de36a25dc0a58f2bb0bb38fb8dc3d264ffa5fa74", "url": "https://github.com/jbosstm/narayana/commit/de36a25dc0a58f2bb0bb38fb8dc3d264ffa5fa74", "message": "[JBTM-3153] race condition at SimpleIsolatedServers", "committedDate": "2020-04-03T08:34:24Z", "type": "commit"}, {"oid": "b84328afd01b28aeacc99068c98aedea515a1f1f", "url": "https://github.com/jbosstm/narayana/commit/b84328afd01b28aeacc99068c98aedea515a1f1f", "message": "Parts of e7eefdf2ac82a7fc84b9a18ed74819979bb0038f which were intended to resolve test suite issues with SimpleIsolatedServers", "committedDate": "2020-04-03T08:34:25Z", "type": "commit"}, {"oid": "7e308c70c1f9565179643b20e289703a574404f5", "url": "https://github.com/jbosstm/narayana/commit/7e308c70c1f9565179643b20e289703a574404f5", "message": "JBTM-3201 Synchronize the loadClass test method", "committedDate": "2020-04-03T08:34:25Z", "type": "commit"}, {"oid": "d6c8d88351ef223d813d8d26b548e56dfb1b1d35", "url": "https://github.com/jbosstm/narayana/commit/d6c8d88351ef223d813d8d26b548e56dfb1b1d35", "message": "JBTM-2804 Use a non-threaded recovery manager and invoke the local scan operation to be more deterministic", "committedDate": "2020-04-03T08:34:25Z", "type": "commit"}, {"oid": "4708b8c3bbfcc5a752a07ae23df12d9b43767f95", "url": "https://github.com/jbosstm/narayana/commit/4708b8c3bbfcc5a752a07ae23df12d9b43767f95", "message": "Update to version of h2 in master", "committedDate": "2020-04-03T08:34:25Z", "type": "commit"}, {"oid": "141a6c185dddb4e8a290f14702bdda716e7c73ca", "url": "https://github.com/jbosstm/narayana/commit/141a6c185dddb4e8a290f14702bdda716e7c73ca", "message": "TEST CHANGE ONLY: Take and use the H2 config from master added as part of 82a538c340a", "committedDate": "2020-04-03T08:34:25Z", "type": "commit"}, {"oid": "5c59c9c060245a412fa8d3d144649cbec6de8d4c", "url": "https://github.com/jbosstm/narayana/commit/5c59c9c060245a412fa8d3d144649cbec6de8d4c", "message": "TEST CHANGE ONLY: Do not use diamond operator to be compliant with expected source level", "committedDate": "2020-04-03T08:34:25Z", "type": "commit"}, {"oid": "def06d2503da762d49c7ce09d01b3eef78549998", "url": "https://github.com/jbosstm/narayana/commit/def06d2503da762d49c7ce09d01b3eef78549998", "message": "Some relevant changes from (JBTM-1406 updated to only run with the JDBC store for the minimum number of tests as that is not the best default, also updated to set h2 to not close on exit to prevent race condition in TransactionStatusManager shutdown before db closed)", "committedDate": "2020-04-03T08:34:25Z", "type": "commit"}, {"oid": "74d4b35d67907dba4d64ae2b44017ef0f080e1c0", "url": "https://github.com/jbosstm/narayana/commit/74d4b35d67907dba4d64ae2b44017ef0f080e1c0", "message": "TEST CHANGE ONLY: Make variable final", "committedDate": "2020-04-03T08:34:25Z", "type": "commit"}, {"oid": "23376899a3e1fb6e673cb6f18303f22dd648d6c5", "url": "https://github.com/jbosstm/narayana/commit/23376899a3e1fb6e673cb6f18303f22dd648d6c5", "message": "TEST CHANGE ONLY: Respect the h2 config requirements as per other commits", "committedDate": "2020-04-03T08:34:25Z", "type": "commit"}, {"oid": "23376899a3e1fb6e673cb6f18303f22dd648d6c5", "url": "https://github.com/jbosstm/narayana/commit/23376899a3e1fb6e673cb6f18303f22dd648d6c5", "message": "TEST CHANGE ONLY: Respect the h2 config requirements as per other commits", "committedDate": "2020-04-03T08:34:25Z", "type": "forcePushed"}]}