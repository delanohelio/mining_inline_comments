{"pr_number": 1729, "pr_title": "JBTM-3397 Ensure that LRA uses the features provided by ArjunaCore", "pr_createdAt": "2020-11-25T19:49:36Z", "pr_url": "https://github.com/jbosstm/narayana/pull/1729", "timeline": [{"oid": "eaade60c28a4a9fe6a49cff3310c54fc9480e773", "url": "https://github.com/jbosstm/narayana/commit/eaade60c28a4a9fe6a49cff3310c54fc9480e773", "message": "JBTM-3397 Rename Transaction to LongRunningAction and extend BasicAction", "committedDate": "2020-11-25T16:30:49Z", "type": "commit"}, {"oid": "dcbbe133dc154e024661f1bcabc53cc19d04d8ef", "url": "https://github.com/jbosstm/narayana/commit/dcbbe133dc154e024661f1bcabc53cc19d04d8ef", "message": "JBTM-3397 Rename LongRunningAction#end() - it is confusing since AtomicAction has a similar method with different semantics", "committedDate": "2020-11-25T16:42:27Z", "type": "commit"}, {"oid": "f13a0346fd53bbb367638901d35d98bee95dc539", "url": "https://github.com/jbosstm/narayana/commit/f13a0346fd53bbb367638901d35d98bee95dc539", "message": "JBTM-3397 Remove the confusing comment in LRARecord#value()", "committedDate": "2020-11-25T19:23:04Z", "type": "commit"}, {"oid": "501f91116d592fd3341d3adcda5d413cd0269d57", "url": "https://github.com/jbosstm/narayana/commit/501f91116d592fd3341d3adcda5d413cd0269d57", "message": "JBTM-3397 Do not duplicate functionality provided by BasicAction#Current()", "committedDate": "2020-11-25T19:23:04Z", "type": "commit"}, {"oid": "9655d7b2f019091137df613abff9c9ae82494d9a", "url": "https://github.com/jbosstm/narayana/commit/9655d7b2f019091137df613abff9c9ae82494d9a", "message": "JBTM-3397 Do not duplicate StateManager.get_uid()", "committedDate": "2020-11-25T19:23:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg1NTk5NA==", "url": "https://github.com/jbosstm/narayana/pull/1729#discussion_r530855994", "bodyText": "just guessing but this was written separately to not include delimiters ('/') in the path I guess so this won't work on windows.", "author": "xstefank", "createdAt": "2020-11-26T08:38:26Z", "path": "rts/lra/coordinator/src/test/java/io/narayana/lra/coordinator/TestBase.java", "diffHunk": "@@ -168,7 +169,7 @@ private void clearRecoveryLog() {\n     }\n \n     String getFirstLRA() {\n-        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", \"StateManager\", \"BasicAction\", \"TwoPhaseCoordinator\", \"LRA\");\n+        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", LongRunningAction.getType());", "originalCommit": "9655d7b2f019091137df613abff9c9ae82494d9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg5NTYyOQ==", "url": "https://github.com/jbosstm/narayana/pull/1729#discussion_r530895629", "bodyText": "That is a very good point. In fact the whole method is assuming the ObjectStore is on a file system (so the test would fail, for example, on JDBC and in-memory stores) . I will raise a separate issue to rewrite the test to use the ObjectStore API to get the log (and to also check we aren't doing something similar elsewhere).", "author": "mmusgrov", "createdAt": "2020-11-26T09:40:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg1NTk5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg5NjYwNA==", "url": "https://github.com/jbosstm/narayana/pull/1729#discussion_r530896604", "bodyText": "I will make sure the JIRA says that we need the ability to run the tests on at least one other store type.", "author": "mmusgrov", "createdAt": "2020-11-26T09:42:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg1NTk5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTYyNjM5Mg==", "url": "https://github.com/jbosstm/narayana/pull/1729#discussion_r531626392", "bodyText": "The tracking issue is https://issues.redhat.com/browse/JBTM-3398", "author": "mmusgrov", "createdAt": "2020-11-27T14:16:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg1NTk5NA=="}], "type": "inlineReview", "revised_code": null}]}