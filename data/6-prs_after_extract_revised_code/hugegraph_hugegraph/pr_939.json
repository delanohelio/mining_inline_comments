{"pr_number": 939, "pr_title": "fix ring assert error and handle two A->B not ring", "pr_createdAt": "2020-04-10T06:57:41Z", "pr_url": "https://github.com/hugegraph/hugegraph/pull/939", "timeline": [{"oid": "4a42dde8d55e0cb7a1cb6c5a24c63cb046c42869", "url": "https://github.com/hugegraph/hugegraph/commit/4a42dde8d55e0cb7a1cb6c5a24c63cb046c42869", "message": "fix ring assert error and handle two A->B not ring\n\nChange-Id: Iaff8c4f16e34eb12f0fed2b33487735f783ae0ec", "committedDate": "2020-04-10T06:56:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY2MDIzMw==", "url": "https://github.com/hugegraph/hugegraph/pull/939#discussion_r406660233", "bodyText": "still returned 3 vertices", "author": "javeme", "createdAt": "2020-04-10T08:29:01Z", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/traversal/algorithm/SubGraphTraverser.java", "diffHunk": "@@ -82,15 +82,20 @@ private PathSet subGraphPaths(Id sourceV, Directions dir, String label,\n     }\n \n     private static boolean hasMultiEdges(List<Edge> edges, Id target) {\n-        int count = 0;\n+        boolean hasOutEdge = false;\n+        boolean hasInEdge = false;\n         for (Edge edge : edges) {\n             if (((HugeEdge) edge).id().otherVertexId().equals(target)) {\n-                if (++count > 1) {\n+                if (((HugeEdge) edge).direction() == Directions.OUT) {\n+                    hasOutEdge = true;\n+                } else {\n+                    hasInEdge = true;\n+                }\n+                if (hasOutEdge && hasInEdge) {", "originalCommit": "4a42dde8d55e0cb7a1cb6c5a24c63cb046c42869", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY3MDM4MA==", "url": "https://github.com/hugegraph/hugegraph/pull/939#discussion_r406670380", "bodyText": "oh seems the graph itself exist both direction edges between tow vertices", "author": "javeme", "createdAt": "2020-04-10T08:58:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY2MDIzMw=="}], "type": "inlineReview", "revised_code": null}]}