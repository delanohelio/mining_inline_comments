{"pr_number": 1111, "pr_title": "Fix hang when closeTaskTx if current thread is task worker ", "pr_createdAt": "2020-07-25T14:40:39Z", "pr_url": "https://github.com/hugegraph/hugegraph/pull/1111", "timeline": [{"oid": "38c74af4bb9002ff3fd0ab7630a8d81b054aa767", "url": "https://github.com/hugegraph/hugegraph/commit/38c74af4bb9002ff3fd0ab7630a8d81b054aa767", "message": "fix graphs-list api return results with non STATUS-READ permission\n\nChange-Id: I6a05e06509caf0ea525fb57ca8352e53ced584aa", "committedDate": "2020-07-27T17:29:38Z", "type": "forcePushed"}, {"oid": "0a8a04e9bb88670efdf6688d998e26cd92518794", "url": "https://github.com/hugegraph/hugegraph/commit/0a8a04e9bb88670efdf6688d998e26cd92518794", "message": "let other thread close task tx if current is task thread\n\nChange-Id: Iac11eeeaaaf0be5d01a85496a629ec5b2a387216", "committedDate": "2020-07-28T05:10:11Z", "type": "commit"}, {"oid": "1f01f8c8d42cb36f395edaf5eb5cb8029240fbdc", "url": "https://github.com/hugegraph/hugegraph/commit/1f01f8c8d42cb36f395edaf5eb5cb8029240fbdc", "message": "just call closeTx by one task thread if current is task thread\n\nChange-Id: I5dcde954d846d0c9235ee575749cc7d6fc294e63", "committedDate": "2020-07-28T05:10:11Z", "type": "commit"}, {"oid": "4d87fb379bb0c5fba18f32bed757ec4a04128640", "url": "https://github.com/hugegraph/hugegraph/commit/4d87fb379bb0c5fba18f32bed757ec4a04128640", "message": "fix graphs-list api return results with non STATUS-READ permission\n\nChange-Id: I6a05e06509caf0ea525fb57ca8352e53ced584aa", "committedDate": "2020-07-28T05:28:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMzMDE3NQ==", "url": "https://github.com/hugegraph/hugegraph/pull/1111#discussion_r461330175", "bodyText": "give HugeFactoryAuthProxy a chance to load as soon as possible", "author": "javeme", "createdAt": "2020-07-28T05:38:53Z", "path": "hugegraph-dist/src/main/java/com/baidu/hugegraph/cmd/InitStore.java", "diffHunk": "@@ -105,11 +106,10 @@ public static void main(String[] args) throws Exception {\n \n     private static void initGraph(String configPath) throws Exception {\n         LOG.info(\"Init graph with config file: {}\", configPath);\n-        HugeConfig config = new HugeConfig(HugeFactory.getLocalConfig(\n-                                           configPath));\n+        HugeConfig config = new HugeConfig(configPath);\n         // Forced set to false when initializing backend\n         config.setProperty(CoreOptions.RAFT_MODE.name(), \"false\");\n-        HugeGraph graph = HugeFactory.open(config);\n+        HugeGraph graph = (HugeGraph) GraphFactory.open(config);", "originalCommit": "4d87fb379bb0c5fba18f32bed757ec4a04128640", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "1f01f8c8d42cb36f395edaf5eb5cb8029240fbdc", "url": "https://github.com/hugegraph/hugegraph/commit/1f01f8c8d42cb36f395edaf5eb5cb8029240fbdc", "message": "just call closeTx by one task thread if current is task thread\n\nChange-Id: I5dcde954d846d0c9235ee575749cc7d6fc294e63", "committedDate": "2020-07-28T05:10:11Z", "type": "forcePushed"}]}