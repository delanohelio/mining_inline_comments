{"pr_number": 837, "pr_title": "add option vertex.check_adjacent_vertex_exist", "pr_createdAt": "2020-01-17T17:09:52Z", "pr_url": "https://github.com/hugegraph/hugegraph/pull/837", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE4ODA2MA==", "url": "https://github.com/hugegraph/hugegraph/pull/837#discussion_r376188060", "bodyText": "TODO: deal vertex with unmatch label", "author": "javeme", "createdAt": "2020-02-07T02:35:00Z", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/backend/tx/GraphTransaction.java", "diffHunk": "@@ -544,20 +558,26 @@ public void removeVertex(HugeVertex vertex) {\n \n         if (!query.empty()) {\n             // Query from backend store\n-            if (vertices.isEmpty() && query.ids().size() == ids.size()) {\n-                // Sort at the lower layer and return directly\n-                Iterator<HugeVertex> it = this.queryVerticesFromBackend(query);\n-                @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n-                Iterator<Vertex> r = (Iterator) it;\n-                return r;\n-            }\n             query.mustSortByInput(false);\n             Iterator<HugeVertex> it = this.queryVerticesFromBackend(query);\n             QueryResults.fillMap(it, vertices);\n         }\n \n         return new MapperIterator<>(ids.iterator(), id -> {\n-            return vertices.get(id);\n+            HugeVertex vertex = vertices.get(id);", "originalCommit": "140ba77bd38cfd680c0b3dcf0822cf7e8f0130f5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "32fb1fc11670449a3274c7787abe0aeffd08f6dc", "url": "https://github.com/hugegraph/hugegraph/commit/32fb1fc11670449a3274c7787abe0aeffd08f6dc", "message": "add option vertex.check_adjacent_vertex_exist\n\ncheck_adjacent_vertex_exist=true:\n throw exception: vertex does not exist\ncheck_adjacent_vertex_exist=false:\n return vertex with \"~undefined\" label if not exist adjacent vertex,\n\nfix: #835\nChange-Id: I30ce32ae358d0483888895a0017b77d55f346491", "committedDate": "2020-03-19T13:07:05Z", "type": "commit"}, {"oid": "6fce93b531211a2770cd47f1f436894bc615a882", "url": "https://github.com/hugegraph/hugegraph/commit/6fce93b531211a2770cd47f1f436894bc615a882", "message": "don't let g.E() return inVLabel \"~undefined\" and fetch inV\n\nfix: #835\nChange-Id: Iac7ea3c51092253f20a35a579460d8c7124c5f94", "committedDate": "2020-03-19T13:07:05Z", "type": "commit"}, {"oid": "6fce93b531211a2770cd47f1f436894bc615a882", "url": "https://github.com/hugegraph/hugegraph/commit/6fce93b531211a2770cd47f1f436894bc615a882", "message": "don't let g.E() return inVLabel \"~undefined\" and fetch inV\n\nfix: #835\nChange-Id: Iac7ea3c51092253f20a35a579460d8c7124c5f94", "committedDate": "2020-03-19T13:07:05Z", "type": "forcePushed"}]}