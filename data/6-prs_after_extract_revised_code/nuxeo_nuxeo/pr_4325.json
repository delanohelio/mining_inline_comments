{"pr_number": 4325, "pr_title": "10.10-HF/fix-NXP-29618-rate-limit-exceed-gcp", "pr_createdAt": "2020-09-16T11:43:06Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4325", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTM5Mjk1Ng==", "url": "https://github.com/nuxeo/nuxeo/pull/4325#discussion_r489392956", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    File blob = File.createTempFile(\"gcs-blob\", \".txt\", new File(\"targets\"));\n          \n          \n            \n                    File blob = File.createTempFile(\"gcs-blob\", \".txt\", new File(\"target\"));", "author": "ataillefer", "createdAt": "2020-09-16T12:21:13Z", "path": "addons/nuxeo-core-binarymanager-cloud/nuxeo-core-binarymanager-gcp/src/test/java/org/nuxeo/ecm/core/storage/gcp/TestGoogleBinaryManager.java", "diffHunk": "@@ -116,4 +122,20 @@ protected GoogleStorageBinaryManager getBinaryManager() throws IOException {\n         }\n     }\n \n+    @Test\n+    public void testConsecutiveIdenticalUploads() throws Exception {\n+        FileStorage fileStorage = binaryManager.getFileStorage();\n+        File blob = File.createTempFile(\"gcs-blob\", \".txt\", new File(\"targets\"));", "originalCommit": "805839c789317ae7fb07b587697422edd5d99256", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6062e529f9f70dab6193309a7dc26fb4d88b7840", "chunk": "diff --git a/addons/nuxeo-core-binarymanager-cloud/nuxeo-core-binarymanager-gcp/src/test/java/org/nuxeo/ecm/core/storage/gcp/TestGoogleBinaryManager.java b/addons/nuxeo-core-binarymanager-cloud/nuxeo-core-binarymanager-gcp/src/test/java/org/nuxeo/ecm/core/storage/gcp/TestGoogleBinaryManager.java\nindex af9292c7d60..bd294e166e5 100644\n--- a/addons/nuxeo-core-binarymanager-cloud/nuxeo-core-binarymanager-gcp/src/test/java/org/nuxeo/ecm/core/storage/gcp/TestGoogleBinaryManager.java\n+++ b/addons/nuxeo-core-binarymanager-cloud/nuxeo-core-binarymanager-gcp/src/test/java/org/nuxeo/ecm/core/storage/gcp/TestGoogleBinaryManager.java\n\n@@ -125,7 +125,7 @@ public class TestGoogleBinaryManager extends AbstractTestCloudBinaryManager<Goog\n     @Test\n     public void testConsecutiveIdenticalUploads() throws Exception {\n         FileStorage fileStorage = binaryManager.getFileStorage();\n-        File blob = File.createTempFile(\"gcs-blob\", \".txt\", new File(\"targets\"));\n+        File blob = File.createTempFile(\"gcs-blob\", \".txt\", new File(\"target\"));\n         @SuppressWarnings(\"unchecked\")\n         CompletableFuture<Void>[] futures = //\n                 IntStream.range(0, 100).parallel().mapToObj(i -> (Runnable) () -> {\n"}}, {"oid": "6062e529f9f70dab6193309a7dc26fb4d88b7840", "url": "https://github.com/nuxeo/nuxeo/commit/6062e529f9f70dab6193309a7dc26fb4d88b7840", "message": "NXP-29618: Check blob presence before uploading it", "committedDate": "2020-09-16T13:29:21Z", "type": "commit"}, {"oid": "6062e529f9f70dab6193309a7dc26fb4d88b7840", "url": "https://github.com/nuxeo/nuxeo/commit/6062e529f9f70dab6193309a7dc26fb4d88b7840", "message": "NXP-29618: Check blob presence before uploading it", "committedDate": "2020-09-16T13:29:21Z", "type": "forcePushed"}]}