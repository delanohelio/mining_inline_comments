{"pr_number": 4077, "pr_title": "fix-NXP-29157-skip-aggregates", "pr_createdAt": "2020-05-26T18:05:47Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4077", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY3MDE0OA==", "url": "https://github.com/nuxeo/nuxeo/pull/4077#discussion_r431670148", "bodyText": "File not formatted correctly.", "author": "troger", "createdAt": "2020-05-28T08:32:29Z", "path": "modules/platform/nuxeo-elasticsearch/nuxeo-elasticsearch-core/src/test/java/org/nuxeo/elasticsearch/test/rest/AutomationESDocumentsTest.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * (C) Copyright 20202 Nuxeo SA (http://nuxeo.com/) and others.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.nuxeo.elasticsearch.test.rest;\n+\n+import java.util.Map;\n+\n+import javax.inject.Inject;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.nuxeo.ecm.automation.core.util.Properties;\n+import org.nuxeo.ecm.automation.core.operations.services.DocumentPageProviderOperation;\n+import org.nuxeo.ecm.automation.test.EmbeddedAutomationServerFeature;\n+import org.nuxeo.ecm.automation.test.HttpAutomationSession;\n+import org.nuxeo.ecm.core.test.annotations.Granularity;\n+import org.nuxeo.ecm.core.test.annotations.RepositoryConfig;\n+import org.nuxeo.ecm.platform.query.api.PageProvider;\n+import org.nuxeo.ecm.restapi.test.RestServerInit;\n+import org.nuxeo.elasticsearch.test.RepositoryElasticSearchFeature;\n+import org.nuxeo.runtime.test.runner.Deploy;\n+import org.nuxeo.runtime.test.runner.Features;\n+import org.nuxeo.runtime.test.runner.FeaturesRunner;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * @since 11.1\n+ */\n+@RunWith(FeaturesRunner.class)\n+@Features({EmbeddedAutomationServerFeature.class, RepositoryElasticSearchFeature.class})", "originalCommit": "f017b231372a7b2a7f8b259fba8c3e5bd8e74127", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY5MDk4NA==", "url": "https://github.com/nuxeo/nuxeo/pull/4077#discussion_r431690984", "bodyText": "Fixed. Sorry, too used to linting pre commit hooks \ud83d\ude1b", "author": "nelsonsilva", "createdAt": "2020-05-28T09:07:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY3MDE0OA=="}], "type": "inlineReview", "revised_code": {"commit": "b528b53bfb4cd44e6b8185aaee9a8a7c445d74a6", "chunk": "diff --git a/modules/platform/nuxeo-elasticsearch/nuxeo-elasticsearch-core/src/test/java/org/nuxeo/elasticsearch/test/rest/AutomationESDocumentsTest.java b/modules/platform/nuxeo-elasticsearch/nuxeo-elasticsearch-core/src/test/java/org/nuxeo/elasticsearch/test/rest/AutomationESDocumentsTest.java\nindex 93f5fd070b4..68feec39775 100644\n--- a/modules/platform/nuxeo-elasticsearch/nuxeo-elasticsearch-core/src/test/java/org/nuxeo/elasticsearch/test/rest/AutomationESDocumentsTest.java\n+++ b/modules/platform/nuxeo-elasticsearch/nuxeo-elasticsearch-core/src/test/java/org/nuxeo/elasticsearch/test/rest/AutomationESDocumentsTest.java\n\n@@ -44,7 +44,7 @@ import static org.junit.Assert.assertTrue;\n  * @since 11.1\n  */\n @RunWith(FeaturesRunner.class)\n-@Features({EmbeddedAutomationServerFeature.class, RepositoryElasticSearchFeature.class})\n+@Features({ EmbeddedAutomationServerFeature.class, RepositoryElasticSearchFeature.class })\n @Deploy(\"org.nuxeo.elasticsearch.core.test:elasticsearch-test-contrib.xml\")\n @Deploy(\"org.nuxeo.elasticsearch.core.test:pageprovider-test-contrib.xml\")\n @Deploy(\"org.nuxeo.elasticsearch.core.test:pageprovider2-test-contrib.xml\")\n"}}, {"oid": "b528b53bfb4cd44e6b8185aaee9a8a7c445d74a6", "url": "https://github.com/nuxeo/nuxeo/commit/b528b53bfb4cd44e6b8185aaee9a8a7c445d74a6", "message": "NXP-29157: allow skipping aggregations with http header", "committedDate": "2020-05-28T09:05:05Z", "type": "commit"}, {"oid": "b528b53bfb4cd44e6b8185aaee9a8a7c445d74a6", "url": "https://github.com/nuxeo/nuxeo/commit/b528b53bfb4cd44e6b8185aaee9a8a7c445d74a6", "message": "NXP-29157: allow skipping aggregations with http header", "committedDate": "2020-05-28T09:05:05Z", "type": "forcePushed"}]}