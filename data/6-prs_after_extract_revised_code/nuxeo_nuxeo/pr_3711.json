{"pr_number": 3711, "pr_title": "Task nxp 28008 paginate tasks 10.10 (Backport)", "pr_createdAt": "2020-01-30T14:36:27Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/3711", "timeline": [{"oid": "0f76a9981a415d1e3706775f94356ac20da9ec8c", "url": "https://github.com/nuxeo/nuxeo/commit/0f76a9981a415d1e3706775f94356ac20da9ec8c", "message": "NXP-28418: add offset support for PaginableObject", "committedDate": "2020-01-27T14:24:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjk4NjU5MA==", "url": "https://github.com/nuxeo/nuxeo/pull/3711#discussion_r372986590", "bodyText": "There's missing the @deprecated in both javadoc and method, if you don't want it in the backport you can remove this kind of line. Note that we're ok to backport deprecation such as them.", "author": "kevinleturc", "createdAt": "2020-01-30T14:39:57Z", "path": "addons/nuxeo-platform-document-routing/nuxeo-routing-api/src/main/java/org/nuxeo/ecm/platform/routing/api/DocumentRoutingService.java", "diffHunk": "@@ -588,6 +588,8 @@ void grantPermissionToTaskDelegatedActors(CoreSession session, String permission\n      * @param session\n      * @return\n      * @since 7.2\n+     * since 11.1 this method does not scale as it does not paginate results.", "originalCommit": "1b7f968b22a2dd631454942d23274a1f1ab67385", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjk4NzY0Mg==", "url": "https://github.com/nuxeo/nuxeo/pull/3711#discussion_r372987642", "bodyText": "We tried to avoid that in order to have warnings on IDE since it is not deprecated for this version.\nDoes this sound a good approach?", "author": "nmpcunha", "createdAt": "2020-01-30T14:41:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjk4NjU5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEwNzU3Mw==", "url": "https://github.com/nuxeo/nuxeo/pull/3711#discussion_r373107573", "bodyText": "So, as per our conversation, we kept the cherry-pick commit.\nIn order to be clear the difference on 10.10, a separate commit was introduced.", "author": "nmpcunha", "createdAt": "2020-01-30T18:07:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjk4NjU5MA=="}], "type": "inlineReview", "revised_code": {"commit": "a195e2387613786f0f49fbf61983a180c89946cb", "chunk": "diff --git a/addons/nuxeo-platform-document-routing/nuxeo-routing-api/src/main/java/org/nuxeo/ecm/platform/routing/api/DocumentRoutingService.java b/addons/nuxeo-platform-document-routing/nuxeo-routing-api/src/main/java/org/nuxeo/ecm/platform/routing/api/DocumentRoutingService.java\nindex 1ea37c48cb4..595a04676df 100644\n--- a/addons/nuxeo-platform-document-routing/nuxeo-routing-api/src/main/java/org/nuxeo/ecm/platform/routing/api/DocumentRoutingService.java\n+++ b/addons/nuxeo-platform-document-routing/nuxeo-routing-api/src/main/java/org/nuxeo/ecm/platform/routing/api/DocumentRoutingService.java\n\n@@ -588,9 +588,11 @@ public interface DocumentRoutingService {\n      * @param session\n      * @return\n      * @since 7.2\n-     * since 11.1 this method does not scale as it does not paginate results.\n-     *      Use {@link org.nuxeo.ecm.platform.routing.core.provider.RoutingTaskPageProvider#getCurrentPage()} instead.\n+     * @deprecated since 11.1 this method does not scale as it does not paginate results. Use\n+     *             {@link org.nuxeo.ecm.platform.routing.core.provider.RoutingTaskPageProvider#getCurrentPage()}\n+     *             instead.\n      */\n+    @Deprecated\n     List<Task> getTasks(final DocumentModel document, String actorId, String workflowInstanceId,\n             String workflowModelName, CoreSession session);\n \n"}}, {"oid": "a195e2387613786f0f49fbf61983a180c89946cb", "url": "https://github.com/nuxeo/nuxeo/commit/a195e2387613786f0f49fbf61983a180c89946cb", "message": "NXP-28008: add routing task page provider + use it in task endpoint", "committedDate": "2020-01-30T17:55:17Z", "type": "commit"}, {"oid": "022b5e5a5a5c3f43bc743547060176754da2424c", "url": "https://github.com/nuxeo/nuxeo/commit/022b5e5a5a5c3f43bc743547060176754da2424c", "message": "NXP-28418: add test to tasks pagination and offset", "committedDate": "2020-01-30T17:55:47Z", "type": "commit"}, {"oid": "2a67cd118527e1998d08c1b986ce9814e5e2b7a9", "url": "https://github.com/nuxeo/nuxeo/commit/2a67cd118527e1998d08c1b986ce9814e5e2b7a9", "message": "NXP-27823: ensure tasks pagination compatibility", "committedDate": "2020-01-30T18:03:24Z", "type": "commit"}, {"oid": "2a67cd118527e1998d08c1b986ce9814e5e2b7a9", "url": "https://github.com/nuxeo/nuxeo/commit/2a67cd118527e1998d08c1b986ce9814e5e2b7a9", "message": "NXP-27823: ensure tasks pagination compatibility", "committedDate": "2020-01-30T18:03:24Z", "type": "forcePushed"}]}