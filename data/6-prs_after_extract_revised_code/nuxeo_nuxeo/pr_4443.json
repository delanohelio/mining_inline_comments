{"pr_number": 4443, "pr_title": "fix-NXP-29108-bulk-scroller-timeout-10.10", "pr_createdAt": "2020-11-06T13:15:56Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4443", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NzM2Mg==", "url": "https://github.com/nuxeo/nuxeo/pull/4443#discussion_r518767362", "bodyText": "Indentation issue.", "author": "kevinleturc", "createdAt": "2020-11-06T13:57:57Z", "path": "nuxeo-core/nuxeo-core-bulk/src/main/java/org/nuxeo/ecm/core/bulk/BulkAdminServiceImpl.java", "diffHunk": "@@ -173,10 +179,10 @@ protected Topology getTopology(int scrollBatchSize, int scrollKeepAlive, boolean\n         }\n         mapping.add(String.format(\"o%s:%s\", i, STATUS_STREAM));\n         return Topology.builder()\n-                       .addComputation( //\n-                               () -> new BulkScrollerComputation(SCROLLER_NAME, actions.size() + 1, scrollBatchSize,\n-                                       scrollKeepAlive, scrollProduceImmediate), //\n-                               mapping)\n+                .addComputation( //\n+                        () -> new BulkScrollerComputation(SCROLLER_NAME, actions.size() + 1, scrollBatchSize,\n+                                scrollKeepAlive, transactionTimeout, scrollProduceImmediate), //\n+                        mapping)", "originalCommit": "26afe66e29830b7f2be7078a63bf7a67e726b5b2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "65c4d659e41299d05b70c4b2041161dd7d647dc2", "chunk": "diff --git a/nuxeo-core/nuxeo-core-bulk/src/main/java/org/nuxeo/ecm/core/bulk/BulkAdminServiceImpl.java b/nuxeo-core/nuxeo-core-bulk/src/main/java/org/nuxeo/ecm/core/bulk/BulkAdminServiceImpl.java\nindex 99f31927b4f..fd96f24fbef 100644\n--- a/nuxeo-core/nuxeo-core-bulk/src/main/java/org/nuxeo/ecm/core/bulk/BulkAdminServiceImpl.java\n+++ b/nuxeo-core/nuxeo-core-bulk/src/main/java/org/nuxeo/ecm/core/bulk/BulkAdminServiceImpl.java\n\n@@ -179,10 +179,10 @@ public class BulkAdminServiceImpl implements BulkAdminService {\n         }\n         mapping.add(String.format(\"o%s:%s\", i, STATUS_STREAM));\n         return Topology.builder()\n-                .addComputation( //\n-                        () -> new BulkScrollerComputation(SCROLLER_NAME, actions.size() + 1, scrollBatchSize,\n-                                scrollKeepAlive, transactionTimeout, scrollProduceImmediate), //\n-                        mapping)\n+                    .addComputation( //\n+                            () -> new BulkScrollerComputation(SCROLLER_NAME, actions.size() + 1, scrollBatchSize,\n+                                    scrollKeepAlive, transactionTimeout, scrollProduceImmediate), //\n+                            mapping)\n                        .addComputation(() -> new BulkStatusComputation(STATUS_NAME),\n                                Arrays.asList(INPUT_1 + \":\" + STATUS_STREAM, //\n                                        OUTPUT_1 + \":\" + DONE_STREAM))\n"}}, {"oid": "65c4d659e41299d05b70c4b2041161dd7d647dc2", "url": "https://github.com/nuxeo/nuxeo/commit/65c4d659e41299d05b70c4b2041161dd7d647dc2", "message": "NXP-29108: Bulk scroller with a long transaction\n\nWe don't want to timeout during a scroll, an explicit long\ntransaction timeout is used.", "committedDate": "2020-11-06T14:57:41Z", "type": "forcePushed"}, {"oid": "f1a59a542d5521ced2ea4ead88c55613ba1814da", "url": "https://github.com/nuxeo/nuxeo/commit/f1a59a542d5521ced2ea4ead88c55613ba1814da", "message": "NXP-29108: Bulk scroller with a long transaction\n\nWe don't want to timeout during a scroll, an explicit long\ntransaction timeout is used.", "committedDate": "2020-11-06T14:59:02Z", "type": "commit"}, {"oid": "f1a59a542d5521ced2ea4ead88c55613ba1814da", "url": "https://github.com/nuxeo/nuxeo/commit/f1a59a542d5521ced2ea4ead88c55613ba1814da", "message": "NXP-29108: Bulk scroller with a long transaction\n\nWe don't want to timeout during a scroll, an explicit long\ntransaction timeout is used.", "committedDate": "2020-11-06T14:59:02Z", "type": "forcePushed"}]}