{"pr_number": 193, "pr_title": "feat: add support for NUMERIC data type", "pr_createdAt": "2020-05-06T13:36:23Z", "pr_url": "https://github.com/googleapis/java-spanner/pull/193", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU4ODA0MA==", "url": "https://github.com/googleapis/java-spanner/pull/193#discussion_r450588040", "bodyText": "nit: Commented out code. Maybe we forgot to remove it?", "author": "thiagotnunes", "createdAt": "2020-07-07T03:13:05Z", "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/connection/RandomResultSetGenerator.java", "diffHunk": "@@ -41,6 +42,7 @@\n         Type.newBuilder().setCode(TypeCode.BOOL).build(),\n         Type.newBuilder().setCode(TypeCode.INT64).build(),\n         Type.newBuilder().setCode(TypeCode.FLOAT64).build(),\n+        //        Type.newBuilder().setCode(TypeCode.NUMERIC).build(),", "originalCommit": "4b4a17b72b07f71431faa56f415108b1f76b3296", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDcyMDM4Mg==", "url": "https://github.com/googleapis/java-spanner/pull/193#discussion_r450720382", "bodyText": "Ah, good catch. This is not supposed be commented out at all.", "author": "olavloite", "createdAt": "2020-07-07T09:09:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU4ODA0MA=="}], "type": "inlineReview", "revised_code": {"commit": "5a08bfd3e0a1e9a45cb43fd9127f401cde59ea6d", "chunk": "diff --git a/google-cloud-spanner/src/test/java/com/google/cloud/spanner/connection/RandomResultSetGenerator.java b/google-cloud-spanner/src/test/java/com/google/cloud/spanner/connection/RandomResultSetGenerator.java\nindex 5424c554..9bb69322 100644\n--- a/google-cloud-spanner/src/test/java/com/google/cloud/spanner/connection/RandomResultSetGenerator.java\n+++ b/google-cloud-spanner/src/test/java/com/google/cloud/spanner/connection/RandomResultSetGenerator.java\n\n@@ -42,7 +42,7 @@ public class RandomResultSetGenerator {\n         Type.newBuilder().setCode(TypeCode.BOOL).build(),\n         Type.newBuilder().setCode(TypeCode.INT64).build(),\n         Type.newBuilder().setCode(TypeCode.FLOAT64).build(),\n-        //        Type.newBuilder().setCode(TypeCode.NUMERIC).build(),\n+        Type.newBuilder().setCode(TypeCode.NUMERIC).build(),\n         Type.newBuilder().setCode(TypeCode.STRING).build(),\n         Type.newBuilder().setCode(TypeCode.BYTES).build(),\n         Type.newBuilder().setCode(TypeCode.DATE).build(),\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEyMDYzNA==", "url": "https://github.com/googleapis/java-spanner/pull/193#discussion_r454120634", "bodyText": "@olavloite thanks for adding the integration tests. But I do have one small request. Would you be able to move it to a separate PR?\nThe reason being that we will merge this PR in before support for the feature is available in prod, which unfortunately mean that the tests will fail at that point.", "author": "skuruppu", "createdAt": "2020-07-14T06:00:25Z", "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITWriteTest.java", "diffHunk": "@@ -352,6 +356,21 @@ public void writeDateNull() {\n     assertThat(row.isNull(0)).isTrue();\n   }\n \n+  @Test", "originalCommit": "ea2d511764835ba80b6e3ffb02fd0a572b321068", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg0NzQwMg==", "url": "https://github.com/googleapis/java-spanner/pull/193#discussion_r454847402", "bodyText": "NP, I'll move them to a separate PR.", "author": "olavloite", "createdAt": "2020-07-15T07:27:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEyMDYzNA=="}], "type": "inlineReview", "revised_code": {"commit": "5a08bfd3e0a1e9a45cb43fd9127f401cde59ea6d", "chunk": "diff --git a/google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITWriteTest.java b/google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITWriteTest.java\nindex dd10e339..d7a007ea 100644\n--- a/google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITWriteTest.java\n+++ b/google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITWriteTest.java\n\n@@ -356,21 +354,6 @@ public class ITWriteTest {\n     assertThat(row.isNull(0)).isTrue();\n   }\n \n-  @Test\n-  public void writeNumeric() {\n-    write(baseInsert().set(\"NumericValue\").to(new BigDecimal(\"3.141592\")).build());\n-    Struct row = readLastRow(\"NumericValue\");\n-    assertThat(row.isNull(0)).isFalse();\n-    assertThat(row.getBigDecimal(0)).isEqualTo(BigDecimal.valueOf(3141592, 6));\n-  }\n-\n-  @Test\n-  public void writeNumericNull() {\n-    write(baseInsert().set(\"NumericValue\").to((Long) null).build());\n-    Struct row = readLastRow(\"NumericValue\");\n-    assertThat(row.isNull(0)).isTrue();\n-  }\n-\n   @Test\n   public void writeBoolArrayNull() {\n     write(baseInsert().set(\"BoolArrayValue\").toBoolArray((boolean[]) null).build());\n"}}, {"oid": "5a08bfd3e0a1e9a45cb43fd9127f401cde59ea6d", "url": "https://github.com/googleapis/java-spanner/commit/5a08bfd3e0a1e9a45cb43fd9127f401cde59ea6d", "message": "feat: add support for NUMERIC type", "committedDate": "2020-07-15T12:31:01Z", "type": "commit"}, {"oid": "4421d6e69d836fa573edb72cfc5c334af5080148", "url": "https://github.com/googleapis/java-spanner/commit/4421d6e69d836fa573edb72cfc5c334af5080148", "message": "feat: add support for NUMERIC in keys", "committedDate": "2020-07-15T12:32:01Z", "type": "commit"}, {"oid": "37c3f93fa416bd1430ccc83584b114b5ae82c571", "url": "https://github.com/googleapis/java-spanner/commit/37c3f93fa416bd1430ccc83584b114b5ae82c571", "message": "tests: add integration test for numeric", "committedDate": "2020-07-15T12:32:01Z", "type": "commit"}, {"oid": "8637b30cdafe28a20adbc37427be01096900f191", "url": "https://github.com/googleapis/java-spanner/commit/8637b30cdafe28a20adbc37427be01096900f191", "message": "fix: uncomment code", "committedDate": "2020-07-15T12:32:01Z", "type": "commit"}, {"oid": "a384203688eed8d5c423c87d712d69cd12f04c13", "url": "https://github.com/googleapis/java-spanner/commit/a384203688eed8d5c423c87d712d69cd12f04c13", "message": "test: remove integration tests from PR", "committedDate": "2020-07-15T12:32:01Z", "type": "commit"}, {"oid": "51ecbb2af0f43d69b07f43f69e09d3f7ae963d42", "url": "https://github.com/googleapis/java-spanner/commit/51ecbb2af0f43d69b07f43f69e09d3f7ae963d42", "message": "chore: remove whitespaces", "committedDate": "2020-07-15T12:33:02Z", "type": "commit"}, {"oid": "7c25e974c387c56b9d3b6b83424de33a7ded3632", "url": "https://github.com/googleapis/java-spanner/commit/7c25e974c387c56b9d3b6b83424de33a7ded3632", "message": "chore: solve merge conflicts", "committedDate": "2020-07-15T12:41:15Z", "type": "commit"}, {"oid": "7c25e974c387c56b9d3b6b83424de33a7ded3632", "url": "https://github.com/googleapis/java-spanner/commit/7c25e974c387c56b9d3b6b83424de33a7ded3632", "message": "chore: solve merge conflicts", "committedDate": "2020-07-15T12:41:15Z", "type": "forcePushed"}]}