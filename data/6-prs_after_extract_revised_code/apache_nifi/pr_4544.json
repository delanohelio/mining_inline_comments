{"pr_number": 4544, "pr_title": "NIFI-7834 - InvokeAWSGatewayAPI should not be annotated with @Trigger\u2026", "pr_createdAt": "2020-09-22T16:38:01Z", "pr_url": "https://github.com/apache/nifi/pull/4544", "timeline": [{"oid": "d5a5c7840b4152e23251369e9a4ce779f4781922", "url": "https://github.com/apache/nifi/commit/d5a5c7840b4152e23251369e9a4ce779f4781922", "message": "NIFI-7834 - InvokeAWSGatewayAPI should not be annotated with @TriggerWhenEmpty", "committedDate": "2020-09-22T16:37:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwMTk2Ng==", "url": "https://github.com/apache/nifi/pull/4544#discussion_r492901966", "bodyText": "I don't understand why this isn't valid.  I put this there, if I recall because you may use this processor to read the data from an api to start a flow.  I thought this annotation was valid for that case.  Was I mistaken?", "author": "ottobackwards", "createdAt": "2020-09-22T17:13:12Z", "path": "nifi-nar-bundles/nifi-aws-bundle/nifi-aws-processors/src/main/java/org/apache/nifi/processors/aws/wag/InvokeAWSGatewayApi.java", "diffHunk": "@@ -52,7 +51,6 @@\n import java.util.UUID;\n import java.util.concurrent.TimeUnit;\n ", "originalCommit": "d5a5c7840b4152e23251369e9a4ce779f4781922", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwMjI4MQ==", "url": "https://github.com/apache/nifi/pull/4544#discussion_r492902281", "bodyText": "Did a problem with this get reported?", "author": "ottobackwards", "createdAt": "2020-09-22T17:13:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwMTk2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwNjk5Mg==", "url": "https://github.com/apache/nifi/pull/4544#discussion_r492906992", "bodyText": "@ottobackwards the annotation is not needed for that. The @TriggerWhenEmpty annotation is only used if you want the processor to be triggered when there is an incoming connection and the incoming connection has no data. It's rarely needed. One example of where it is needed is MergeContent. In that case, there's a timeout that is configured, and so if you have 1,000 FlowFiles come in and get batched together, but no more data comes in for 24 hours, MergeContent should still be triggered so that it can timeout the 'bin' and create the merged FlowFile.\nSo in this case, consider a flow like GenerateFlowFile -> InvokeAWSGatewayAPI. And GenerateFlowFile runs every 30 minutes. InvokeAWSGatewayAPI is scheduled with Run Schedule of 0 seconds because it should run immediately and constantly when there is data. But because there is a @TriggerWhenEmpty annotation, InvokeAWSGatewayAPI is getting triggered constantly (even when there is no data queued up) and pounding the API service, which can be both inefficient and expensive.\nSo if there is no incoming connection, the processor will still get triggered even without the annotation.", "author": "markap14", "createdAt": "2020-09-22T17:21:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwMTk2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwOTYzMA==", "url": "https://github.com/apache/nifi/pull/4544#discussion_r492909630", "bodyText": "Ok, I miss understood the annotation then, sorry.\n+1 fwiw.", "author": "ottobackwards", "createdAt": "2020-09-22T17:25:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwMTk2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkxMDgyOQ==", "url": "https://github.com/apache/nifi/pull/4544#discussion_r492910829", "bodyText": "And thanks for the detailed explaination", "author": "ottobackwards", "createdAt": "2020-09-22T17:27:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwMTk2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkxMTA4Mw==", "url": "https://github.com/apache/nifi/pull/4544#discussion_r492911083", "bodyText": "No worries, thanks @ottobackwards", "author": "markap14", "createdAt": "2020-09-22T17:28:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwMTk2Ng=="}], "type": "inlineReview", "revised_code": null}]}