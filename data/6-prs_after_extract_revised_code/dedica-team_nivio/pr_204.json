{"pr_number": 204, "pr_title": "Rendering without JGraphX", "pr_createdAt": "2020-07-24T21:19:43Z", "pr_url": "https://github.com/dedica-team/nivio/pull/204", "timeline": [{"oid": "ff1c250458f84c5b64c46e0102b913ff73cfadf0", "url": "https://github.com/dedica-team/nivio/commit/ff1c250458f84c5b64c46e0102b913ff73cfadf0", "message": "[#193] using similar variant for fast organic layout for intra-group rendering", "committedDate": "2020-07-24T04:40:31Z", "type": "commit"}, {"oid": "a2385cb2f34ea290a997ed32e9202e473d21c681", "url": "https://github.com/dedica-team/nivio/commit/a2385cb2f34ea290a997ed32e9202e473d21c681", "message": "[#193] ensuring every item has a group", "committedDate": "2020-07-24T05:09:04Z", "type": "commit"}, {"oid": "1c54564b6bbc26a598a5b9cd0258469858ebd46c", "url": "https://github.com/dedica-team/nivio/commit/1c54564b6bbc26a598a5b9cd0258469858ebd46c", "message": "[#193] layout without jgraphx", "committedDate": "2020-07-24T21:13:42Z", "type": "commit"}, {"oid": "f8b610eb1ce70b0468df613ae20407c26649f398", "url": "https://github.com/dedica-team/nivio/commit/f8b610eb1ce70b0468df613ae20407c26649f398", "message": "[#193] removed jgraphx", "committedDate": "2020-07-24T21:20:57Z", "type": "commit"}, {"oid": "14c1b1d1b4dc489384a14fc297178228d1c54770", "url": "https://github.com/dedica-team/nivio/commit/14c1b1d1b4dc489384a14fc297178228d1c54770", "message": "[#193] test fix", "committedDate": "2020-07-24T21:28:40Z", "type": "commit"}, {"oid": "c8ef36cfd9b3ecd30f772c7d7622be7370defeda", "url": "https://github.com/dedica-team/nivio/commit/c8ef36cfd9b3ecd30f772c7d7622be7370defeda", "message": "[#193] test fix", "committedDate": "2020-07-24T21:32:16Z", "type": "commit"}, {"oid": "39198bf1753986e187924a68aeb37ca3a7a9d7c0", "url": "https://github.com/dedica-team/nivio/commit/39198bf1753986e187924a68aeb37ca3a7a9d7c0", "message": "[#193] group rendering improvements", "committedDate": "2020-07-25T09:22:00Z", "type": "commit"}, {"oid": "3f4e38ae578c0989e6227539740138f519bd18de", "url": "https://github.com/dedica-team/nivio/commit/3f4e38ae578c0989e6227539740138f519bd18de", "message": "[#193] group rendering improvements", "committedDate": "2020-07-25T10:45:19Z", "type": "commit"}, {"oid": "bc368742da6fa42298cd428a61f5d0cce896c49a", "url": "https://github.com/dedica-team/nivio/commit/bc368742da6fa42298cd428a61f5d0cce896c49a", "message": "[#193] disabled debug", "committedDate": "2020-07-25T10:45:50Z", "type": "commit"}, {"oid": "b7a658fe16c27e9940fbec5aeec0e6453c679a05", "url": "https://github.com/dedica-team/nivio/commit/b7a658fe16c27e9940fbec5aeec0e6453c679a05", "message": "[#193] group area made of hexagons", "committedDate": "2020-07-25T19:00:29Z", "type": "commit"}, {"oid": "d769f02be5012e1d42f3b6e7ded6923be92344d4", "url": "https://github.com/dedica-team/nivio/commit/d769f02be5012e1d42f3b6e7ded6923be92344d4", "message": "[#193] added comment", "committedDate": "2020-07-25T19:02:10Z", "type": "commit"}, {"oid": "b68b67dba7f3ec690a7cfc1665e58d6c94b3228c", "url": "https://github.com/dedica-team/nivio/commit/b68b67dba7f3ec690a7cfc1665e58d6c94b3228c", "message": "[#193] extra svg margin for group areas", "committedDate": "2020-07-26T08:05:21Z", "type": "commit"}, {"oid": "55ee86234bec7928c4e9ac0959baa748a7426613", "url": "https://github.com/dedica-team/nivio/commit/55ee86234bec7928c4e9ac0959baa748a7426613", "message": "[#193] cleanup", "committedDate": "2020-07-26T08:53:29Z", "type": "commit"}, {"oid": "618f30d9ecaffd840550496f17c8119b8667776c", "url": "https://github.com/dedica-team/nivio/commit/618f30d9ecaffd840550496f17c8119b8667776c", "message": "[#193] group area using relation paths", "committedDate": "2020-07-26T09:05:55Z", "type": "commit"}, {"oid": "e721043baaca0479673b5f668c23050756afa9ea", "url": "https://github.com/dedica-team/nivio/commit/e721043baaca0479673b5f668c23050756afa9ea", "message": "[#193] initial placement of items to be layouted on circle", "committedDate": "2020-07-26T09:21:34Z", "type": "commit"}, {"oid": "e898ff7234e4ea64bdaae62260f03fed9b1979d7", "url": "https://github.com/dedica-team/nivio/commit/e898ff7234e4ea64bdaae62260f03fed9b1979d7", "message": "[#193] committing render test outputs", "committedDate": "2020-07-26T09:24:46Z", "type": "commit"}, {"oid": "348ba71e474cc2a106689f412eeffbc25cf1bded", "url": "https://github.com/dedica-team/nivio/commit/348ba71e474cc2a106689f412eeffbc25cf1bded", "message": "[#193] cleanup", "committedDate": "2020-07-26T10:13:43Z", "type": "commit"}, {"oid": "dcb467fa8342db4ea375dbd95e0fbb6975c7179d", "url": "https://github.com/dedica-team/nivio/commit/dcb467fa8342db4ea375dbd95e0fbb6975c7179d", "message": "[#193] simplified code, removed interfaces which are not necessary yet", "committedDate": "2020-07-26T17:07:28Z", "type": "commit"}, {"oid": "79838402be7bfdf6582118395961ac693dab50a7", "url": "https://github.com/dedica-team/nivio/commit/79838402be7bfdf6582118395961ac693dab50a7", "message": "[#193] cleanup", "committedDate": "2020-07-26T17:09:05Z", "type": "commit"}, {"oid": "17651eab7d398dc2ff8f025ce4141ef0cc030123", "url": "https://github.com/dedica-team/nivio/commit/17651eab7d398dc2ff8f025ce4141ef0cc030123", "message": "[#193] added test", "committedDate": "2020-07-26T17:37:43Z", "type": "commit"}, {"oid": "3a8c8caad68e9113f341177bd3b264fd5423407a", "url": "https://github.com/dedica-team/nivio/commit/3a8c8caad68e9113f341177bd3b264fd5423407a", "message": "[#193] cleanup", "committedDate": "2020-07-26T17:39:58Z", "type": "commit"}, {"oid": "b0bb7a3dde6aee2dc3c6215b70f90c8f90eb0aad", "url": "https://github.com/dedica-team/nivio/commit/b0bb7a3dde6aee2dc3c6215b70f90c8f90eb0aad", "message": "[#193] areas filled with bridges and gaps", "committedDate": "2020-07-26T19:08:06Z", "type": "commit"}, {"oid": "182570a71455ad09af56dc9ed447915254cf6343", "url": "https://github.com/dedica-team/nivio/commit/182570a71455ad09af56dc9ed447915254cf6343", "message": "[#193] adding some extra margin for groups near top/left border", "committedDate": "2020-07-26T19:41:05Z", "type": "commit"}, {"oid": "a15511f9c2012cff0cc2048bfb1a78d5dd0e741d", "url": "https://github.com/dedica-team/nivio/commit/a15511f9c2012cff0cc2048bfb1a78d5dd0e741d", "message": "[#193] deleted outdated test artifacts", "committedDate": "2020-07-26T19:42:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDgxMTE5Mg==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r460811192", "bodyText": "This will link the image from 'http://localhost:8080/icons/service.png'\nmaybe it is better to embed the image base64 encoded.\nI think this is also the reason why 'https://github.com/dedica-team/nivio/actions/runs/183402402' fails.", "author": "BilligsterUser", "createdAt": "2020-07-27T11:00:07Z", "path": "src/main/java/de/bonndan/nivio/output/map/svg/SVGRenderer.java", "diffHunk": "@@ -1,33 +1,113 @@\n package de.bonndan.nivio.output.map.svg;\n \n-import de.bonndan.nivio.model.LandscapeImpl;\n+import de.bonndan.nivio.model.Group;\n+import de.bonndan.nivio.model.Item;\n+import de.bonndan.nivio.output.Color;\n+import de.bonndan.nivio.output.LocalServer;\n import de.bonndan.nivio.output.Renderer;\n+import de.bonndan.nivio.output.layout.LayoutedComponent;\n+import de.bonndan.nivio.output.map.hex.Hex;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n import org.springframework.stereotype.Service;\n+import org.springframework.util.StringUtils;\n \n+import java.awt.geom.Point2D;\n import java.io.File;\n import java.io.FileWriter;\n import java.io.IOException;\n+import java.util.concurrent.atomic.AtomicLong;\n \n @Service\n public class SVGRenderer implements Renderer<String> {\n \n+    private static final Logger LOGGER = LoggerFactory.getLogger(SVGRenderer.class);\n     public static final int DEFAULT_ICON_SIZE = 50;\n+\n+    private final LocalServer localServer;\n     private final MapStyleSheetFactory mapStyleSheetFactory;\n \n-    public SVGRenderer(MapStyleSheetFactory mapStyleSheetFactory) {\n+    public SVGRenderer(LocalServer localServer, MapStyleSheetFactory mapStyleSheetFactory) {\n+        this.localServer = localServer;\n         this.mapStyleSheetFactory = mapStyleSheetFactory;\n     }\n \n     @Override\n-    public String render(LandscapeImpl landscape) {\n-        SVGDocument svgDocument = new SVGDocument(landscape, mapStyleSheetFactory);\n+    public String render(LayoutedComponent layoutedComponent) {\n+        applyValues(layoutedComponent);\n+        SVGDocument svgDocument = new SVGDocument(layoutedComponent, mapStyleSheetFactory);\n         return svgDocument.getXML();\n     }\n \n     @Override\n-    public void render(LandscapeImpl landscape, File file) throws IOException {\n+    public void render(LayoutedComponent landscape, File file) throws IOException {\n         FileWriter fileWriter = new FileWriter(file);\n         fileWriter.write(render(landscape));\n         fileWriter.close();\n     }\n+\n+    /**\n+     * @param layoutedComponent layouted landscape\n+     */\n+    private void applyValues(LayoutedComponent layoutedComponent) {\n+\n+        Point2D.Double margin = getMargins(layoutedComponent);\n+        layoutedComponent.getChildren().forEach(groupBounds -> {\n+\n+            LOGGER.debug(\"group offset {} {}\", groupBounds.getX(), groupBounds.getY());\n+            Group group = (Group) groupBounds.getComponent();\n+            if (StringUtils.isEmpty(group.getColor())) {\n+                group.setColor(Color.getGroupColor(group));\n+            }\n+            groupBounds.setX(groupBounds.getX() + margin.x);\n+            groupBounds.setY(groupBounds.getY() + margin.y);\n+\n+            groupBounds.getChildren().forEach(itemBounds -> {\n+                LOGGER.debug(\"original item pos {} {}\", itemBounds.getX(), itemBounds.getY());\n+                itemBounds.setX(itemBounds.getX() + groupBounds.getX());\n+                itemBounds.setY(itemBounds.getY() + groupBounds.getY());\n+                LOGGER.debug(\"item pos with group offset: {} {}\", itemBounds.getX(), itemBounds.getY());\n+\n+                Item item = (Item) itemBounds.getComponent();\n+                itemBounds.setColor(group.getColor());\n+                itemBounds.setIcon(localServer.getIconUrl(item).toString());", "originalCommit": "a15511f9c2012cff0cc2048bfb1a78d5dd0e741d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTgwNDM5Nw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r461804397", "bodyText": "fixed", "author": "bonndan", "createdAt": "2020-07-28T19:00:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDgxMTE5Mg=="}], "type": "inlineReview", "revised_code": {"commit": "83d9a40226aca4a9e23476836cfe06c29ef00c4b", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/output/map/svg/SVGRenderer.java b/src/main/java/de/bonndan/nivio/output/map/svg/SVGRenderer.java\nindex c3ebce9b..308feb44 100644\n--- a/src/main/java/de/bonndan/nivio/output/map/svg/SVGRenderer.java\n+++ b/src/main/java/de/bonndan/nivio/output/map/svg/SVGRenderer.java\n\n@@ -18,6 +18,11 @@ import java.io.FileWriter;\n import java.io.IOException;\n import java.util.concurrent.atomic.AtomicLong;\n \n+/**\n+ * Turns the layouted landscape into a SVG image.\n+ *\n+ *\n+ */\n @Service\n public class SVGRenderer implements Renderer<String> {\n \n"}}, {"oid": "721639378146e845b981f6f71ceba3e578f6b252", "url": "https://github.com/dedica-team/nivio/commit/721639378146e845b981f6f71ceba3e578f6b252", "message": "fix PNGRenderCacheTest\n\nPNGRenderCacheTest: mock req to \"/icons/service.png\"\n\nPNGRenderCache & SVGDocument use \"try-with-resources\"", "committedDate": "2020-07-28T14:35:45Z", "type": "commit"}, {"oid": "fb75cfb2701974b240d691410583b887148a17dd", "url": "https://github.com/dedica-team/nivio/commit/fb75cfb2701974b240d691410583b887148a17dd", "message": "Merge pull request #207 from dedica-team/test-pr\n\nfix PNGRenderCacheTest", "committedDate": "2020-07-28T18:53:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NzQ4OQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r460577489", "bodyText": "Here we are reading the group (String) from the item and then setting the group (String) back again to the item. We are changing what was written before in the item to then be the group identifier.\nWhy wasn't it the identifier from the beginning?\nActually, this only makes sense if we are updating the group of an item. Then, I would prefer to have an updateGroup method on the Item and an updateGroupsOnItems on the Landscape. Then, we also wouldn't be exposing implementation details of the landscape and the items to this Resolver.\n(about exposing the implementation details, this applies to the other contents of the processmethod too)", "author": "mfbieber", "createdAt": "2020-07-26T21:49:00Z", "path": "src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java", "diffHunk": "@@ -30,5 +31,11 @@ public void process(LandscapeDescription input, LandscapeImpl landscape) {\n             }\n             groupDescription.getContains().forEach(condition -> group.getItems().addAll(landscape.getItems().query(condition)));\n         });\n+\n+        //cleanup to ensure every items has the group identifier\n+        landscape.getItems().stream().forEach(item -> {\n+            Group group = landscape.getGroup(item.getGroup()); //if group is empty, COMMON is returned\n+            item.setGroup(group.getIdentifier());", "originalCommit": "a15511f9c2012cff0cc2048bfb1a78d5dd0e741d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUwMjIwMg==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462502202", "bodyText": "The method landscape.getGroup() has some magic to be non-nullable, so here we ensure the item.group field is set to something that really points to a group. Could make an example how Landscape.updateGroupsOnItems might be used?", "author": "bonndan", "createdAt": "2020-07-29T18:29:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NzQ4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2MzAwOQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462563009", "bodyText": "Yes, I saw that it uses that Group.COMMON and thanks for your explanation! I am still concerned about the mutability of Item and of the way we expose the internals of the objects.\nSo if your example means that you would agree to a refactoring (because you call it Landscape.updateGroupsOnItems): yes, please and I'll do the refactoring if you like.\nI am still wondering why the identifier can not be set on the item right from the beginning? Why exactly isn't it possible to have such (important) fields immutable right from the beginning when we create an instance of the object?", "author": "mfbieber", "createdAt": "2020-07-29T20:18:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NzQ4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2ODAxNQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462568015", "bodyText": "You are right about the immutability, although some things cannot be set right from the start. And if we're strict about immutability and side effect free programming, we end in reference update hell (this is still a graph with lots of references).\nMy idea was that all graph components are value objects without much business logic. The logic was meant to reside in the resolvers as far as possible. So we have small units (resolvers) for one dedicated purpose and small value objects.\nObviously the landscape.getGroup() method does too much, and I'd rather go the other way and refactor even more logic out of the graph components.", "author": "bonndan", "createdAt": "2020-07-29T20:27:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NzQ4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMwOTQ5Mw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463309493", "bodyText": "Ok, I get that about the resolvers and the value object - that approach is fine. Since I lack the overview of how the value objects are used, I was concerned about the objects having an invalid state (in a field such as an identifier). If only a designated resolver manages them, and the logic resides inside of that - that should be fine.", "author": "mfbieber", "createdAt": "2020-07-30T22:35:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NzQ4OQ=="}], "type": "inlineReview", "revised_code": {"commit": "7b696854d54725c498edac3ec186808ecd4059a9", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java b/src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java\nindex 264cf18f..3c5a4818 100644\n--- a/src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java\n+++ b/src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java\n\n@@ -29,10 +29,14 @@ public class GroupQueryResolver extends Resolver {\n                 processLog.warn(\"Could not resolve group with identifier \" + groupDescription.getIdentifier());\n                 return;\n             }\n+            // run the query against all landscape items which match the condition\n             groupDescription.getContains().forEach(condition -> group.getItems().addAll(landscape.getItems().query(condition)));\n         });\n \n-        //cleanup to ensure every items has the group identifier\n+        /*\n+          cleanup to ensure every item has the group identifier: The input DTOs might not have the group reference,\n+          and all following resolvers might fail to find or set a group. So this is a fallback.\n+         */\n         landscape.getItems().stream().forEach(item -> {\n             Group group = landscape.getGroup(item.getGroup()); //if group is empty, COMMON is returned\n             item.setGroup(group.getIdentifier());\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NzYxMw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r460577613", "bodyText": "The comment: how does this happen? I could not see it from the implementation of getGroup() or elsewhere?", "author": "mfbieber", "createdAt": "2020-07-26T21:50:13Z", "path": "src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java", "diffHunk": "@@ -30,5 +31,11 @@ public void process(LandscapeDescription input, LandscapeImpl landscape) {\n             }\n             groupDescription.getContains().forEach(condition -> group.getItems().addAll(landscape.getItems().query(condition)));\n         });\n+\n+        //cleanup to ensure every items has the group identifier\n+        landscape.getItems().stream().forEach(item -> {\n+            Group group = landscape.getGroup(item.getGroup()); //if group is empty, COMMON is returned", "originalCommit": "a15511f9c2012cff0cc2048bfb1a78d5dd0e741d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ5MjIzOA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462492238", "bodyText": "The input DTOs might not have the group reference, and all following resolvers might fail to find or set a group. So this is a fallback. I'll add this explanation to the code.", "author": "bonndan", "createdAt": "2020-07-29T18:11:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NzYxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU1MjgzMw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462552833", "bodyText": "Ok, so it is happening inside of the Group, now I see it.", "author": "mfbieber", "createdAt": "2020-07-29T20:00:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NzYxMw=="}], "type": "inlineReview", "revised_code": {"commit": "7b696854d54725c498edac3ec186808ecd4059a9", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java b/src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java\nindex 264cf18f..3c5a4818 100644\n--- a/src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java\n+++ b/src/main/java/de/bonndan/nivio/input/GroupQueryResolver.java\n\n@@ -29,10 +29,14 @@ public class GroupQueryResolver extends Resolver {\n                 processLog.warn(\"Could not resolve group with identifier \" + groupDescription.getIdentifier());\n                 return;\n             }\n+            // run the query against all landscape items which match the condition\n             groupDescription.getContains().forEach(condition -> group.getItems().addAll(landscape.getItems().query(condition)));\n         });\n \n-        //cleanup to ensure every items has the group identifier\n+        /*\n+          cleanup to ensure every item has the group identifier: The input DTOs might not have the group reference,\n+          and all following resolvers might fail to find or set a group. So this is a fallback.\n+         */\n         landscape.getItems().stream().forEach(item -> {\n             Group group = landscape.getGroup(item.getGroup()); //if group is empty, COMMON is returned\n             item.setGroup(group.getIdentifier());\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3ODI3NA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r460578274", "bodyText": "This returns the JGraphXConfig, which is not related to JGraphX anymore - or am I wrong? Shouldn't we rename the method and the config class?", "author": "mfbieber", "createdAt": "2020-07-26T21:57:50Z", "path": "src/main/java/de/bonndan/nivio/output/layout/AllGroupsGraph.java", "diffHunk": "@@ -0,0 +1,111 @@\n+package de.bonndan.nivio.output.layout;\n+\n+import de.bonndan.nivio.model.Group;\n+import de.bonndan.nivio.model.Item;\n+import de.bonndan.nivio.model.Landscape;\n+import de.bonndan.nivio.model.LandscapeItem;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.util.StringUtils;\n+\n+import java.util.*;\n+\n+/**\n+ * Renders a graph of group containers only, not regarding items inside the containers.\n+ */\n+public class AllGroupsGraph {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AllGroupsGraph.class);\n+    public static final int FORCE_CONSTANT = 350;\n+    public static final int MAX_DISTANCE_LIMIT = 1000;\n+\n+    private final Map<Group, LayoutedComponent> groupNodes = new LinkedHashMap<>();\n+    private final FastOrganicLayout layout;\n+    private final Landscape landscape;\n+\n+    public AllGroupsGraph(Landscape landscape, Map<String, Group> groups, Map<String, SubGraph> subgraphs) {\n+        this.landscape = landscape;\n+\n+        LOGGER.debug(\"Subgraphs sequence: {}\", subgraphs);\n+\n+        List<LandscapeItem> items = new ArrayList<>();\n+        groups.forEach((groupName, groupItem) -> {\n+            LayoutedComponent groupGeometry = subgraphs.get(groupName).getOuterBounds();\n+            groupNodes.put(groupItem, groupGeometry);\n+            items.addAll(groupItem.getItems());\n+        });\n+        LOGGER.debug(\"Group node sequence: {}\", groupNodes);\n+\n+        addVirtualEdgesBetweenGroups(items);\n+\n+        layout = new FastOrganicLayout(new ArrayList<>(groupNodes.values()));\n+        //layout.setDebug(true);\n+\n+        Optional.ofNullable(landscape.getConfig().getJgraphx().getMaxIterations())", "originalCommit": "a15511f9c2012cff0cc2048bfb1a78d5dd0e741d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ5MDI2Ng==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462490266", "bodyText": "yes, and this also requires updating the documentation.", "author": "bonndan", "createdAt": "2020-07-29T18:08:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3ODI3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYwODkzMQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462608931", "bodyText": "done. also separated configs into two: one for group layout, one for layout within groups", "author": "bonndan", "createdAt": "2020-07-29T21:47:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3ODI3NA=="}], "type": "inlineReview", "revised_code": {"commit": "7b3da5c5c99ec9bad3c537376a0516d8f9ef0fc6", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/output/layout/AllGroupsGraph.java b/src/main/java/de/bonndan/nivio/output/layout/AllGroupsGraph.java\nindex ea0b8d64..f6086bf0 100644\n--- a/src/main/java/de/bonndan/nivio/output/layout/AllGroupsGraph.java\n+++ b/src/main/java/de/bonndan/nivio/output/layout/AllGroupsGraph.java\n\n@@ -40,15 +40,11 @@ public class AllGroupsGraph {\n \n         layout = new FastOrganicLayout(new ArrayList<>(groupNodes.values()));\n         //layout.setDebug(true);\n-\n-        Optional.ofNullable(landscape.getConfig().getJgraphx().getMaxIterations())\n-                .ifPresent(layout::setMaxIterations);\n-\n-        Optional.ofNullable(landscape.getConfig().getJgraphx().getMinDistanceLimitFactor())\n-                .ifPresent(f -> layout.setMinDistanceLimit(layout.getMinDistanceLimit() * f));\n-\n         layout.setForceConstant(FORCE_CONSTANT);\n         layout.setMaxDistanceLimit(MAX_DISTANCE_LIMIT);\n+\n+        layout.configure(landscape.getConfig().getGroupLayoutConfig());\n+\n         layout.execute();\n         LOGGER.info(\"AllGroupsGraph bounds: {}\", layout.getBounds());\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MDkzOQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462140939", "bodyText": "What could we use instead if this is deprecated?", "author": "mfbieber", "createdAt": "2020-07-29T08:48:39Z", "path": "src/main/java/de/bonndan/nivio/output/dld4e/Dld4eRenderer.java", "diffHunk": "@@ -14,6 +15,7 @@\n import java.util.ArrayList;\n import java.util.List;\n \n+@Deprecated //this is both layouter and renderer", "originalCommit": "fb75cfb2701974b240d691410583b887148a17dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUxNDY3NA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462514674", "bodyText": "This was an early approach to use dld4e (see https://github.com/bonndan/dld4e-headless) to draw landscapes, but it lacked automatic layouting. It was kept in case it could become a plugin (#14) or somebody might be interested to use it with the automatic layouting. For now I'd say there is no replacement.", "author": "bonndan", "createdAt": "2020-07-29T18:50:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MDkzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU1NDI2OQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462554269", "bodyText": "So, it is deprecated but we have no replacement?\nI still don't understand what to do about the Dld4eRenderer :) If it is deprecated it means that we don't want it to be used anymore. We should add a comment on what to use instead.\nOtherwise, if we want to keep it, it should not be deprecated.", "author": "mfbieber", "createdAt": "2020-07-29T20:02:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MDkzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2MTYwMQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462561601", "bodyText": "Actually I am too lazy to reimplement dld4e rendering with with new layout, although it might not take too long. I know it's in the repo, but I'm still afraid it will be forgotten if we'd delete it. If we're strict then it should be deleted.", "author": "bonndan", "createdAt": "2020-07-29T20:15:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MDkzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2NTYyNw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462565627", "bodyText": "Mhm, well you decide. My opinion is: get rid of it. If it is important, we have the VCS to get the code back ;)", "author": "mfbieber", "createdAt": "2020-07-29T20:23:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MDkzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2NTk0MA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462565940", "bodyText": "Otherwise, it wasn't important \ud83d\ude38", "author": "mfbieber", "createdAt": "2020-07-29T20:23:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MDkzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYxMDY1MQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462610651", "bodyText": "Removed it. \ud83d\ude3f", "author": "bonndan", "createdAt": "2020-07-29T21:50:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MDkzOQ=="}], "type": "inlineReview", "revised_code": {"commit": "8a48df8bcdb4758e0dd509733a70a35db48e2fc2", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/output/dld4e/Dld4eRenderer.java b/src/main/java/de/bonndan/nivio/output/dld4e/Dld4eRenderer.java\ndeleted file mode 100644\nindex 66908a32..00000000\n--- a/src/main/java/de/bonndan/nivio/output/dld4e/Dld4eRenderer.java\n+++ /dev/null\n\n@@ -1,139 +0,0 @@\n-package de.bonndan.nivio.output.dld4e;\n-\n-import de.bonndan.nivio.model.Item;\n-import de.bonndan.nivio.model.Label;\n-import de.bonndan.nivio.model.LandscapeImpl;\n-import de.bonndan.nivio.model.RelationType;\n-import de.bonndan.nivio.output.Renderer;\n-import de.bonndan.nivio.output.layout.LayoutedComponent;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-import java.io.File;\n-import java.io.FileWriter;\n-import java.io.IOException;\n-import java.util.ArrayList;\n-import java.util.List;\n-\n-@Deprecated //this is both layouter and renderer\n-public class Dld4eRenderer implements Renderer<String> {\n-\n-    private static final Logger logger = LoggerFactory.getLogger(Dld4eRenderer.class);\n-\n-    private final Layouter layouter = new Layouter();\n-    private StringBuilder ymlSource;\n-\n-    private final Networks networks = new Networks();\n-    private final Groups groups = new Groups();\n-    private final Connections connections = new Connections();\n-    private final Icons icons = new Icons();\n-\n-    @Override\n-    public String render(LayoutedComponent landscape) {\n-\n-        List<Item> items = new ArrayList<>();\n-        landscape.getChildren().forEach(layoutedComponent -> layoutedComponent.getChildren().forEach(li -> items.add((Item) li.getComponent())));\n-\n-        layouter.arrange(icons, groups);\n-\n-        ymlSource = new StringBuilder();\n-        ymlSource.append(\n-                new DiagramItem(\"diagram\")\n-                        .set(\"fill\", \"\\\"snow\\\"\")\n-                        .set(\"columns\", layouter.getColumns())\n-                        .set(\"rows\", Layouter.APPLICATION_LEVEL +1)\n-                        .set(\"gridLines\", \"false\")\n-                        .set(\"gridPaddingInner\", \"0.25\")\n-                        .set(\"groupPadding\", \"0.75\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"title\")\n-                        .set(\"color\", \"\\\"black\\\"\")\n-                        .set(\"heightPercentage\", 5)\n-                        .set(\"logoFill\", \"none\")\n-                        .set(\"stroke\", \"lightgrey\")\n-                        .set(\"subText\", landscape.getComponent().getIdentifier())\n-                        .set(\"text\", landscape.getComponent().getName())\n-                        .set(\"type\", \"bar\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"service\")\n-                        .referable()\n-                        .set(\"stroke\", \"none\")\n-                        .set(\"color\", \"\\\"black\\\"\")\n-                        .set(\"iconFill\", \"darkslategrey\")\n-                        .set(\"iconStroke\", \"lightgrey\")\n-                        .set(\"iconStrokeWidth\", \".25\")\n-                        .set(\"iconFamily\", \"\\\"\" + IconFamily.AzureEnterprise.name + \"\\\"\")\n-                        .set(\"fill\", \"none\")\n-                        .set(\"preserveWhite\", \"true\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"group\")\n-                        .referable()\n-                        .set(\"stroke\", \"darkslategrey\")\n-                        .set(\"strokeWidth\", \".5\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"dataflow\")\n-                        .referable()\n-                        .set(\"stroke\", \"darkslategrey\")\n-                        .set(\"strokeWidth\", \".5\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"provides\")\n-                        .referable()\n-                        .set(\"stroke\", \"darkslategrey\")\n-                        .set(\"strokeWidth\", \".5\")\n-                        .set(\"strokeDashArray\", \"[3,3]\")\n-        );\n-\n-\n-        ymlSource.append(icons);\n-        ymlSource.append(groups);\n-        ymlSource.append(connections);\n-\n-        return ymlSource.toString();\n-    }\n-\n-\n-    @Override\n-    public void render(LayoutedComponent landscape, File file) throws IOException {\n-        render(landscape);\n-        FileWriter fileWriter = new FileWriter(file);\n-        fileWriter.append(ymlSource.toString());\n-        fileWriter.close();\n-    }\n-\n-    private void addService(Item item) {\n-        logger.info(\"Adding service \" + item + \" to d4dle diagram\");\n-        networks.add(item);\n-        groups.add(item);\n-        icons.add(item);\n-\n-        item.getProvidedBy().forEach(this::addService);\n-    }\n-\n-    private void addLinks(Item item) {\n-        item.getRelations(RelationType.DATAFLOW).forEach(flow -> connections.addDataflow(flow));\n-        item.getRelations(RelationType.PROVIDER).forEach(provider -> connections.addProvider(provider.getSource().getIdentifier(), item));\n-    }\n-\n-    private static class Networks {\n-\n-        private final List<String> networks = new ArrayList<>();\n-\n-        public void add(Item item) {\n-            if (item.getLabels(Label.network).isEmpty()) {\n-                return;\n-            }\n-\n-            item.getLabels(Label.network).forEach((k, v) -> {\n-                if (!networks.contains(v)) {\n-                    networks.add(v);\n-                }\n-            });\n-        }\n-    }\n-\n-}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MjY5OQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462142699", "bodyText": "The contents of this collection are updated, but never queried.", "author": "mfbieber", "createdAt": "2020-07-29T08:51:36Z", "path": "src/main/java/de/bonndan/nivio/output/dld4e/Dld4eRenderer.java", "diffHunk": "@@ -27,10 +29,10 @@\n     private final Icons icons = new Icons();\n \n     @Override\n-    public String render(LandscapeImpl landscape) {\n+    public String render(LayoutedComponent landscape) {\n \n-        landscape.getItems().stream().forEach(this::addService);\n-        landscape.getItems().stream().forEach(this::addLinks);\n+        List<Item> items = new ArrayList<>();", "originalCommit": "fb75cfb2701974b240d691410583b887148a17dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUxNDkyMA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462514920", "bodyText": "I would not repair that old code.", "author": "bonndan", "createdAt": "2020-07-29T18:51:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MjY5OQ=="}], "type": "inlineReview", "revised_code": {"commit": "8a48df8bcdb4758e0dd509733a70a35db48e2fc2", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/output/dld4e/Dld4eRenderer.java b/src/main/java/de/bonndan/nivio/output/dld4e/Dld4eRenderer.java\ndeleted file mode 100644\nindex 66908a32..00000000\n--- a/src/main/java/de/bonndan/nivio/output/dld4e/Dld4eRenderer.java\n+++ /dev/null\n\n@@ -1,139 +0,0 @@\n-package de.bonndan.nivio.output.dld4e;\n-\n-import de.bonndan.nivio.model.Item;\n-import de.bonndan.nivio.model.Label;\n-import de.bonndan.nivio.model.LandscapeImpl;\n-import de.bonndan.nivio.model.RelationType;\n-import de.bonndan.nivio.output.Renderer;\n-import de.bonndan.nivio.output.layout.LayoutedComponent;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-import java.io.File;\n-import java.io.FileWriter;\n-import java.io.IOException;\n-import java.util.ArrayList;\n-import java.util.List;\n-\n-@Deprecated //this is both layouter and renderer\n-public class Dld4eRenderer implements Renderer<String> {\n-\n-    private static final Logger logger = LoggerFactory.getLogger(Dld4eRenderer.class);\n-\n-    private final Layouter layouter = new Layouter();\n-    private StringBuilder ymlSource;\n-\n-    private final Networks networks = new Networks();\n-    private final Groups groups = new Groups();\n-    private final Connections connections = new Connections();\n-    private final Icons icons = new Icons();\n-\n-    @Override\n-    public String render(LayoutedComponent landscape) {\n-\n-        List<Item> items = new ArrayList<>();\n-        landscape.getChildren().forEach(layoutedComponent -> layoutedComponent.getChildren().forEach(li -> items.add((Item) li.getComponent())));\n-\n-        layouter.arrange(icons, groups);\n-\n-        ymlSource = new StringBuilder();\n-        ymlSource.append(\n-                new DiagramItem(\"diagram\")\n-                        .set(\"fill\", \"\\\"snow\\\"\")\n-                        .set(\"columns\", layouter.getColumns())\n-                        .set(\"rows\", Layouter.APPLICATION_LEVEL +1)\n-                        .set(\"gridLines\", \"false\")\n-                        .set(\"gridPaddingInner\", \"0.25\")\n-                        .set(\"groupPadding\", \"0.75\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"title\")\n-                        .set(\"color\", \"\\\"black\\\"\")\n-                        .set(\"heightPercentage\", 5)\n-                        .set(\"logoFill\", \"none\")\n-                        .set(\"stroke\", \"lightgrey\")\n-                        .set(\"subText\", landscape.getComponent().getIdentifier())\n-                        .set(\"text\", landscape.getComponent().getName())\n-                        .set(\"type\", \"bar\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"service\")\n-                        .referable()\n-                        .set(\"stroke\", \"none\")\n-                        .set(\"color\", \"\\\"black\\\"\")\n-                        .set(\"iconFill\", \"darkslategrey\")\n-                        .set(\"iconStroke\", \"lightgrey\")\n-                        .set(\"iconStrokeWidth\", \".25\")\n-                        .set(\"iconFamily\", \"\\\"\" + IconFamily.AzureEnterprise.name + \"\\\"\")\n-                        .set(\"fill\", \"none\")\n-                        .set(\"preserveWhite\", \"true\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"group\")\n-                        .referable()\n-                        .set(\"stroke\", \"darkslategrey\")\n-                        .set(\"strokeWidth\", \".5\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"dataflow\")\n-                        .referable()\n-                        .set(\"stroke\", \"darkslategrey\")\n-                        .set(\"strokeWidth\", \".5\")\n-        );\n-        ymlSource.append(\n-                new DiagramItem(\"provides\")\n-                        .referable()\n-                        .set(\"stroke\", \"darkslategrey\")\n-                        .set(\"strokeWidth\", \".5\")\n-                        .set(\"strokeDashArray\", \"[3,3]\")\n-        );\n-\n-\n-        ymlSource.append(icons);\n-        ymlSource.append(groups);\n-        ymlSource.append(connections);\n-\n-        return ymlSource.toString();\n-    }\n-\n-\n-    @Override\n-    public void render(LayoutedComponent landscape, File file) throws IOException {\n-        render(landscape);\n-        FileWriter fileWriter = new FileWriter(file);\n-        fileWriter.append(ymlSource.toString());\n-        fileWriter.close();\n-    }\n-\n-    private void addService(Item item) {\n-        logger.info(\"Adding service \" + item + \" to d4dle diagram\");\n-        networks.add(item);\n-        groups.add(item);\n-        icons.add(item);\n-\n-        item.getProvidedBy().forEach(this::addService);\n-    }\n-\n-    private void addLinks(Item item) {\n-        item.getRelations(RelationType.DATAFLOW).forEach(flow -> connections.addDataflow(flow));\n-        item.getRelations(RelationType.PROVIDER).forEach(provider -> connections.addProvider(provider.getSource().getIdentifier(), item));\n-    }\n-\n-    private static class Networks {\n-\n-        private final List<String> networks = new ArrayList<>();\n-\n-        public void add(Item item) {\n-            if (item.getLabels(Label.network).isEmpty()) {\n-                return;\n-            }\n-\n-            item.getLabels(Label.network).forEach((k, v) -> {\n-                if (!networks.contains(v)) {\n-                    networks.add(v);\n-                }\n-            });\n-        }\n-    }\n-\n-}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0NTUxNQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462145515", "bodyText": "Why is this commented?", "author": "mfbieber", "createdAt": "2020-07-29T08:56:02Z", "path": "src/main/java/de/bonndan/nivio/output/layout/GroupConnections.java", "diffHunk": "@@ -0,0 +1,45 @@\n+package de.bonndan.nivio.output.layout;\n+\n+import org.apache.commons.lang3.tuple.ImmutablePair;\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.util.StringUtils;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+class GroupConnections {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(GroupConnections.class);\n+    private final List<Pair<String, String>> groupConnections = new ArrayList<>();\n+\n+    public boolean isConnected(String group) {\n+        return groupConnections.stream()\n+                .anyMatch(entry -> entry.getKey().equals(group) || entry.getValue().equals(group));\n+    }\n+\n+    public void connect(String a, String b, String message) {\n+        LOGGER.debug(message + a + \" and \" + b);\n+        groupConnections.add(new ImmutablePair(a, b));\n+    }\n+\n+    public boolean canConnect(String a, String b) {\n+        if (StringUtils.isEmpty(a) || StringUtils.isEmpty(b)) {\n+            LOGGER.warn(\"Empty group names in virtual connection check between {} and {}\", a, b);\n+            return false;\n+        }\n+\n+\n+        if (a.equals(b))\n+            return false;\n+\n+        boolean hasLink = groupConnections.stream()\n+                .anyMatch(pair ->\n+                        (pair.getKey().equals(a) && pair.getValue().equals(b))\n+                               // || (pair.getKey().equals(b) && pair.getValue().equals(a))", "originalCommit": "fb75cfb2701974b240d691410583b887148a17dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUxNjE4OQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462516189", "bodyText": "... because we now need the inverse direction, too. JGraphX handled that before it was removed. I'll remove it.", "author": "bonndan", "createdAt": "2020-07-29T18:53:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0NTUxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "140e238b43c2e71c4ea4a8b4aa7a8e264add9deb", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/output/layout/GroupConnections.java b/src/main/java/de/bonndan/nivio/output/layout/GroupConnections.java\nindex ad6a0a3f..51333b39 100644\n--- a/src/main/java/de/bonndan/nivio/output/layout/GroupConnections.java\n+++ b/src/main/java/de/bonndan/nivio/output/layout/GroupConnections.java\n\n@@ -30,15 +30,11 @@ class GroupConnections {\n             return false;\n         }\n \n-\n         if (a.equals(b))\n             return false;\n \n         boolean hasLink = groupConnections.stream()\n-                .anyMatch(pair ->\n-                        (pair.getKey().equals(a) && pair.getValue().equals(b))\n-                               // || (pair.getKey().equals(b) && pair.getValue().equals(a))\n-                );\n+                .anyMatch(pair -> (pair.getKey().equals(a) && pair.getValue().equals(b)));\n \n         return !hasLink;\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0ODEwMQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462148101", "bodyText": "Why are we using LandscapeImpl instead of the interface?", "author": "mfbieber", "createdAt": "2020-07-29T08:59:56Z", "path": "src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package de.bonndan.nivio.output.layout;\n+\n+import de.bonndan.nivio.model.Group;\n+import de.bonndan.nivio.model.LandscapeImpl;\n+\n+import java.util.LinkedHashMap;\n+import java.util.Map;\n+\n+/**\n+ * Applies {@link FastOrganicLayout} to landscape components and writes the rendered data to component labels.\n+ *\n+ *\n+ */\n+public class OrganicLayouter implements Layouter<LayoutedComponent> {\n+\n+    public OrganicLayouter() {\n+    }\n+\n+    @Override\n+    public LayoutedComponent layout(LandscapeImpl landscape) {", "originalCommit": "fb75cfb2701974b240d691410583b887148a17dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUyNTE3OQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462525179", "bodyText": "As written in our chat, the LandscapeImpl is the real graph, and the Landscape interface might not make too much sense anymore.", "author": "bonndan", "createdAt": "2020-07-29T19:09:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0ODEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU1NDQ3Mg==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462554472", "bodyText": "Ok, if it does not make sense anymore, how about deleting it?", "author": "mfbieber", "createdAt": "2020-07-29T20:03:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0ODEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU1OTcyOA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462559728", "bodyText": "Yes, but that takes some days of refactoring. It's not adding business value and not scope of this feature. I've added #212", "author": "bonndan", "createdAt": "2020-07-29T20:12:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0ODEwMQ=="}], "type": "inlineReview", "revised_code": {"commit": "7b3da5c5c99ec9bad3c537376a0516d8f9ef0fc6", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java b/src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java\nindex 6d1db1dc..18de8d7f 100644\n--- a/src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java\n+++ b/src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java\n\n@@ -21,7 +21,7 @@ public class OrganicLayouter implements Layouter<LayoutedComponent> {\n \n         Map<String, SubGraph> subgraphs = new LinkedHashMap<>();\n         landscape.getGroups().forEach((name, groupItem) ->  {\n-            SubGraph subGraph = new SubGraph(groupItem, ((Group)groupItem).getItems());\n+            SubGraph subGraph = new SubGraph(groupItem, ((Group)groupItem).getItems(), landscape.getConfig().getItemLayoutConfig());\n             subgraphs.put(name, subGraph);\n         });\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0OTk2Ng==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462149966", "bodyText": "Do we need a LinkedHashMap, or could it be a HashMap? (I don't think that we have memory problems with nivio, just to understand)", "author": "mfbieber", "createdAt": "2020-07-29T09:03:00Z", "path": "src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package de.bonndan.nivio.output.layout;\n+\n+import de.bonndan.nivio.model.Group;\n+import de.bonndan.nivio.model.LandscapeImpl;\n+\n+import java.util.LinkedHashMap;\n+import java.util.Map;\n+\n+/**\n+ * Applies {@link FastOrganicLayout} to landscape components and writes the rendered data to component labels.\n+ *\n+ *\n+ */\n+public class OrganicLayouter implements Layouter<LayoutedComponent> {\n+\n+    public OrganicLayouter() {\n+    }\n+\n+    @Override\n+    public LayoutedComponent layout(LandscapeImpl landscape) {\n+\n+        Map<String, SubGraph> subgraphs = new LinkedHashMap<>();", "originalCommit": "fb75cfb2701974b240d691410583b887148a17dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUyMTkyMg==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462521922", "bodyText": "It is used to ensure that insertion sequence is maintained. Otherwise layout might receive the items in random order, leading to random results.", "author": "bonndan", "createdAt": "2020-07-29T19:03:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0OTk2Ng=="}], "type": "inlineReview", "revised_code": {"commit": "7b3da5c5c99ec9bad3c537376a0516d8f9ef0fc6", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java b/src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java\nindex 6d1db1dc..18de8d7f 100644\n--- a/src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java\n+++ b/src/main/java/de/bonndan/nivio/output/layout/OrganicLayouter.java\n\n@@ -21,7 +21,7 @@ public class OrganicLayouter implements Layouter<LayoutedComponent> {\n \n         Map<String, SubGraph> subgraphs = new LinkedHashMap<>();\n         landscape.getGroups().forEach((name, groupItem) ->  {\n-            SubGraph subGraph = new SubGraph(groupItem, ((Group)groupItem).getItems());\n+            SubGraph subGraph = new SubGraph(groupItem, ((Group)groupItem).getItems(), landscape.getConfig().getItemLayoutConfig());\n             subgraphs.put(name, subGraph);\n         });\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE1MTMwMQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462151301", "bodyText": "Why don't we use the interface Layouter?", "author": "mfbieber", "createdAt": "2020-07-29T09:05:19Z", "path": "src/main/java/de/bonndan/nivio/output/map/PNGRenderCache.java", "diffHunk": "@@ -71,16 +69,15 @@ public PNGRenderCache(MapFactory<mxGraph, mxCell> mapFactory, MapStyleSheetFacto\n      * @return the svg as string, uncached\n      */\n     public String getSVG(LandscapeImpl landscape) {\n-        JGraphXRenderer jGraphXRenderer = new JGraphXRenderer();\n-        RenderedArtifact<mxGraph, mxCell> render = jGraphXRenderer.render(landscape);\n-        mapFactory.applyArtifactValues(landscape, render);\n+        OrganicLayouter layouter = new OrganicLayouter();", "originalCommit": "fb75cfb2701974b240d691410583b887148a17dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2ODc5NA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462568794", "bodyText": "I've pushed a change. Please see if you agree with it. This code is likely to change later when there are more than just one layouter and render implementations.", "author": "bonndan", "createdAt": "2020-07-29T20:29:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE1MTMwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMxMDgwMw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463310803", "bodyText": "Yes, if instantiation in the constructor makes sense because we don't need a fresh layouter each time we call getSVG(), sure, why not. This was just intended as a question to understand how we are using interfaces, and so on :)", "author": "mfbieber", "createdAt": "2020-07-30T22:39:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE1MTMwMQ=="}], "type": "inlineReview", "revised_code": {"commit": "98358961a2c9bc3481467ea67daccb68460c2792", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/output/map/PNGRenderCache.java b/src/main/java/de/bonndan/nivio/output/map/PNGRenderCache.java\nindex 47a1ba42..bd10e348 100644\n--- a/src/main/java/de/bonndan/nivio/output/map/PNGRenderCache.java\n+++ b/src/main/java/de/bonndan/nivio/output/map/PNGRenderCache.java\n\n@@ -69,7 +69,7 @@ public class PNGRenderCache implements ApplicationListener<ProcessingFinishedEve\n      * @return the svg as string, uncached\n      */\n     public String getSVG(LandscapeImpl landscape) {\n-        OrganicLayouter layouter = new OrganicLayouter();\n+\n         LayoutedComponent layout = layouter.layout(landscape);\n \n         if (landscape.getLog() == null) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE2NDkzNA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r462164934", "bodyText": "@BilligsterUser: nice that you fixed that error! Could you also write a test that fails with the old implementation and now passes?", "author": "mfbieber", "createdAt": "2020-07-29T09:28:16Z", "path": "src/main/java/de/bonndan/nivio/output/map/PNGRenderCache.java", "diffHunk": "@@ -93,23 +90,17 @@ public void onApplicationEvent(ProcessingFinishedEvent processingFinishedEvent)\n     }\n \n     private byte[] asByteArray(LandscapeImpl landscape) {\n-        TranscoderInput input_svg_image = new TranscoderInput(new ByteArrayInputStream(getSVG(landscape).getBytes()));\n-        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n-        TranscoderOutput transcoderOutput = new TranscoderOutput(outputStream);\n+        TranscoderInput input_svg_image = new TranscoderInput(\n+                new ByteArrayInputStream(getSVG(landscape).getBytes())\n+        );\n         Transcoder transcoder = new PNGTranscoder();\n-        try {\n+        try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {", "originalCommit": "fb75cfb2701974b240d691410583b887148a17dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA1MTAwMA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r466051000", "bodyText": "83ba1a4", "author": "BilligsterUser", "createdAt": "2020-08-05T23:03:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE2NDkzNA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "7b696854d54725c498edac3ec186808ecd4059a9", "url": "https://github.com/dedica-team/nivio/commit/7b696854d54725c498edac3ec186808ecd4059a9", "message": "[#204] improved and explained group resolving fallback", "committedDate": "2020-07-29T18:23:45Z", "type": "commit"}, {"oid": "140e238b43c2e71c4ea4a8b4aa7a8e264add9deb", "url": "https://github.com/dedica-team/nivio/commit/140e238b43c2e71c4ea4a8b4aa7a8e264add9deb", "message": "[#204] cleanup", "committedDate": "2020-07-29T18:54:52Z", "type": "commit"}, {"oid": "234215f1b0bd345bd45a6792605a964d24a0e50f", "url": "https://github.com/dedica-team/nivio/commit/234215f1b0bd345bd45a6792605a964d24a0e50f", "message": "[#204] added comment", "committedDate": "2020-07-29T19:16:54Z", "type": "commit"}, {"oid": "83d9a40226aca4a9e23476836cfe06c29ef00c4b", "url": "https://github.com/dedica-team/nivio/commit/83d9a40226aca4a9e23476836cfe06c29ef00c4b", "message": "[#204] svg renderer test", "committedDate": "2020-07-29T20:04:25Z", "type": "commit"}, {"oid": "98358961a2c9bc3481467ea67daccb68460c2792", "url": "https://github.com/dedica-team/nivio/commit/98358961a2c9bc3481467ea67daccb68460c2792", "message": "[#204] small refactoring", "committedDate": "2020-07-29T20:20:10Z", "type": "commit"}, {"oid": "aab8f81e3dc7c4daa89251c7240ad7e6bc0553a5", "url": "https://github.com/dedica-team/nivio/commit/aab8f81e3dc7c4daa89251c7240ad7e6bc0553a5", "message": "[#204] simple InitialPlacementStrategyTest", "committedDate": "2020-07-29T20:54:24Z", "type": "commit"}, {"oid": "e9b0cbec93bc85813197ec90a0b21faaa51b9adc", "url": "https://github.com/dedica-team/nivio/commit/e9b0cbec93bc85813197ec90a0b21faaa51b9adc", "message": "[#204] sub graph integration test", "committedDate": "2020-07-29T21:12:13Z", "type": "commit"}, {"oid": "7b3da5c5c99ec9bad3c537376a0516d8f9ef0fc6", "url": "https://github.com/dedica-team/nivio/commit/7b3da5c5c99ec9bad3c537376a0516d8f9ef0fc6", "message": "[#204] renamed and separated layout config, updated docs", "committedDate": "2020-07-29T21:44:54Z", "type": "commit"}, {"oid": "8a48df8bcdb4758e0dd509733a70a35db48e2fc2", "url": "https://github.com/dedica-team/nivio/commit/8a48df8bcdb4758e0dd509733a70a35db48e2fc2", "message": "[#204] removed dld4e stuff", "committedDate": "2020-07-29T21:48:56Z", "type": "commit"}, {"oid": "2680f5412aa0f95311d338c5cfe6fc017986bab6", "url": "https://github.com/dedica-team/nivio/commit/2680f5412aa0f95311d338c5cfe6fc017986bab6", "message": "[#204] removed json debug stuff", "committedDate": "2020-07-29T21:49:50Z", "type": "commit"}, {"oid": "aecb383b6683ec933c9d1b730f4fa248fbf2e20b", "url": "https://github.com/dedica-team/nivio/commit/aecb383b6683ec933c9d1b730f4fa248fbf2e20b", "message": "[#204] all group layout test", "committedDate": "2020-07-30T18:17:15Z", "type": "commit"}, {"oid": "3e968f16da7528028fe88f44266f9d7cf85eb659", "url": "https://github.com/dedica-team/nivio/commit/3e968f16da7528028fe88f44266f9d7cf85eb659", "message": "added some tests for GroupQueryResolver that point out some potential problems - needs fix", "committedDate": "2020-07-31T18:04:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1NTg1OQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463755859", "bodyText": "This list contains the same Item twice. This is because the items are just added to the modifiable Collection in Group.\nI would refactor this to add a method addItem to Group that does not add items twice (or use a Set) and to have an unmodifiable Collection instead.", "author": "mfbieber", "createdAt": "2020-07-31T18:06:43Z", "path": "src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java", "diffHunk": "@@ -0,0 +1,97 @@\n+package de.bonndan.nivio.input;\n+\n+import de.bonndan.nivio.input.dto.GroupDescription;\n+import de.bonndan.nivio.input.dto.LandscapeDescription;\n+import de.bonndan.nivio.model.Group;\n+import de.bonndan.nivio.model.Item;\n+import de.bonndan.nivio.model.LandscapeImpl;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+\n+import java.util.List;\n+import java.util.Set;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+@ExtendWith(MockitoExtension.class)\n+class GroupQueryResolverTest {\n+\n+    private GroupQueryResolver groupResolver;\n+\n+    @Mock\n+    private ProcessLog processLog;\n+\n+    @BeforeEach\n+    public void setup() {\n+        groupResolver = new GroupQueryResolver(processLog);\n+    }\n+\n+    @Test\n+    void process_doesNotContainDuplicatedItemsInGroups() {\n+        LandscapeImpl landscape = new LandscapeImpl();\n+        landscape.setProcessLog(processLog);\n+        Item item = new Item();\n+        item.setIdentifier(\"itemIdentifier\");\n+        item.setGroup(\"groupIdentifier\");\n+        landscape.setItems(Set.of(item));\n+        landscape.addGroup(new Group(\"groupIdentifier\"));\n+\n+        LandscapeDescription input = new LandscapeDescription();\n+        GroupDescription groupDescription = new GroupDescription();\n+        groupDescription.setIdentifier(\"groupIdentifier\");\n+        groupDescription.setContains(List.of(\"itemidentifier\"));\n+        input.getGroups().put(\"group\", groupDescription);\n+\n+        groupResolver.process(input, landscape);\n+\n+        assertThat(landscape.getItems().stream().count()).isEqualTo(1L);\n+        assertThat(landscape.getGroup(\"groupIdentifier\").getItems()).containsExactly(item);", "originalCommit": "3e968f16da7528028fe88f44266f9d7cf85eb659", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMTY0Nw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463931647", "bodyText": "As you suggested we are now using a Set.", "author": "bonndan", "createdAt": "2020-08-01T06:51:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1NTg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMjAzMw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463932033", "bodyText": "The unmodifiable Collection thing is a bit too much at the moment. We are constantly updating the collections in the indexing phase, and having side-effect free copies of copies of copies does not seem worth the effort to me.", "author": "bonndan", "createdAt": "2020-08-01T06:56:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1NTg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMjQ4Ng==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463932486", "bodyText": "Ok, I guess most of my suggestions would require some other patterns in our code, which can be hard to implement now into the existing code base with it's patterns already in place.", "author": "mfbieber", "createdAt": "2020-08-01T07:02:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1NTg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzOTIxNA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463939214", "bodyText": "Yes. Please feel free to open tickets for enhancement proposals or simply extend #212", "author": "bonndan", "createdAt": "2020-08-01T08:29:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1NTg1OQ=="}], "type": "inlineReview", "revised_code": {"commit": "9cf68aeec25a10ecf9deebe1e3387b6bd899a733", "chunk": "diff --git a/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java b/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\nindex 0f0de7f2..0cce230e 100644\n--- a/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\n+++ b/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\n\n@@ -6,6 +6,7 @@ import de.bonndan.nivio.model.Group;\n import de.bonndan.nivio.model.Item;\n import de.bonndan.nivio.model.LandscapeImpl;\n import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Disabled;\n import org.junit.jupiter.api.Test;\n import org.junit.jupiter.api.extension.ExtendWith;\n import org.mockito.Mock;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1NzU3Mw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463757573", "bodyText": "This shows what has to be done to have valid objects (instantiation and setting of things), only to not have a NPE.\nI am not even sure if this is how the objects are intended to be used \ud83d\ude1e, which means that somehow it is not straightforward and thus potentially unsafe.\nI also did not really understand why we have Group and GroupDescription both implementing GroupItem. These seem to do almost the same things. There are several casts to these objects, which are really hard to get rid of.", "author": "mfbieber", "createdAt": "2020-07-31T18:10:29Z", "path": "src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java", "diffHunk": "@@ -0,0 +1,97 @@\n+package de.bonndan.nivio.input;\n+\n+import de.bonndan.nivio.input.dto.GroupDescription;\n+import de.bonndan.nivio.input.dto.LandscapeDescription;\n+import de.bonndan.nivio.model.Group;\n+import de.bonndan.nivio.model.Item;\n+import de.bonndan.nivio.model.LandscapeImpl;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+\n+import java.util.List;\n+import java.util.Set;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+@ExtendWith(MockitoExtension.class)\n+class GroupQueryResolverTest {\n+\n+    private GroupQueryResolver groupResolver;\n+\n+    @Mock\n+    private ProcessLog processLog;\n+\n+    @BeforeEach\n+    public void setup() {\n+        groupResolver = new GroupQueryResolver(processLog);\n+    }\n+\n+    @Test\n+    void process_doesNotContainDuplicatedItemsInGroups() {\n+        LandscapeImpl landscape = new LandscapeImpl();\n+        landscape.setProcessLog(processLog);\n+        Item item = new Item();\n+        item.setIdentifier(\"itemIdentifier\");\n+        item.setGroup(\"groupIdentifier\");\n+        landscape.setItems(Set.of(item));\n+        landscape.addGroup(new Group(\"groupIdentifier\"));\n+\n+        LandscapeDescription input = new LandscapeDescription();\n+        GroupDescription groupDescription = new GroupDescription();\n+        groupDescription.setIdentifier(\"groupIdentifier\");\n+        groupDescription.setContains(List.of(\"itemidentifier\"));\n+        input.getGroups().put(\"group\", groupDescription);\n+\n+        groupResolver.process(input, landscape);", "originalCommit": "3e968f16da7528028fe88f44266f9d7cf85eb659", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMjI3NQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463932275", "bodyText": "Please see LandscapeFactory, it now sets up a proper landscape. We might think about more safety measures though.\nConcerning Group and GroupDescription: #212 .", "author": "bonndan", "createdAt": "2020-08-01T06:59:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1NzU3Mw=="}], "type": "inlineReview", "revised_code": {"commit": "9cf68aeec25a10ecf9deebe1e3387b6bd899a733", "chunk": "diff --git a/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java b/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\nindex 0f0de7f2..0cce230e 100644\n--- a/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\n+++ b/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\n\n@@ -6,6 +6,7 @@ import de.bonndan.nivio.model.Group;\n import de.bonndan.nivio.model.Item;\n import de.bonndan.nivio.model.LandscapeImpl;\n import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Disabled;\n import org.junit.jupiter.api.Test;\n import org.junit.jupiter.api.extension.ExtendWith;\n import org.mockito.Mock;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1Nzg2Mg==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463757862", "bodyText": "The query condition has to be the lowercased identifier. Is this intentional? See the other test below.", "author": "mfbieber", "createdAt": "2020-07-31T18:11:06Z", "path": "src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java", "diffHunk": "@@ -0,0 +1,97 @@\n+package de.bonndan.nivio.input;\n+\n+import de.bonndan.nivio.input.dto.GroupDescription;\n+import de.bonndan.nivio.input.dto.LandscapeDescription;\n+import de.bonndan.nivio.model.Group;\n+import de.bonndan.nivio.model.Item;\n+import de.bonndan.nivio.model.LandscapeImpl;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+\n+import java.util.List;\n+import java.util.Set;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+@ExtendWith(MockitoExtension.class)\n+class GroupQueryResolverTest {\n+\n+    private GroupQueryResolver groupResolver;\n+\n+    @Mock\n+    private ProcessLog processLog;\n+\n+    @BeforeEach\n+    public void setup() {\n+        groupResolver = new GroupQueryResolver(processLog);\n+    }\n+\n+    @Test\n+    void process_doesNotContainDuplicatedItemsInGroups() {\n+        LandscapeImpl landscape = new LandscapeImpl();\n+        landscape.setProcessLog(processLog);\n+        Item item = new Item();\n+        item.setIdentifier(\"itemIdentifier\");\n+        item.setGroup(\"groupIdentifier\");\n+        landscape.setItems(Set.of(item));\n+        landscape.addGroup(new Group(\"groupIdentifier\"));\n+\n+        LandscapeDescription input = new LandscapeDescription();\n+        GroupDescription groupDescription = new GroupDescription();\n+        groupDescription.setIdentifier(\"groupIdentifier\");\n+        groupDescription.setContains(List.of(\"itemidentifier\"));", "originalCommit": "3e968f16da7528028fe88f44266f9d7cf85eb659", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMjMzNQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463932335", "bodyText": "Good point. We must make sure that querying is not case-sensitive.", "author": "bonndan", "createdAt": "2020-08-01T07:00:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1Nzg2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "9cf68aeec25a10ecf9deebe1e3387b6bd899a733", "chunk": "diff --git a/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java b/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\nindex 0f0de7f2..0cce230e 100644\n--- a/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\n+++ b/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\n\n@@ -6,6 +6,7 @@ import de.bonndan.nivio.model.Group;\n import de.bonndan.nivio.model.Item;\n import de.bonndan.nivio.model.LandscapeImpl;\n import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Disabled;\n import org.junit.jupiter.api.Test;\n import org.junit.jupiter.api.extension.ExtendWith;\n import org.mockito.Mock;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1ODQxNA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463758414", "bodyText": "This aims for the las stream of the process() method. The groups are not updated on the landscape, only getGroup(somethingInvalid) returns Group.COMMON. Is this intentional?", "author": "mfbieber", "createdAt": "2020-07-31T18:12:14Z", "path": "src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java", "diffHunk": "@@ -0,0 +1,97 @@\n+package de.bonndan.nivio.input;\n+\n+import de.bonndan.nivio.input.dto.GroupDescription;\n+import de.bonndan.nivio.input.dto.LandscapeDescription;\n+import de.bonndan.nivio.model.Group;\n+import de.bonndan.nivio.model.Item;\n+import de.bonndan.nivio.model.LandscapeImpl;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+\n+import java.util.List;\n+import java.util.Set;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+@ExtendWith(MockitoExtension.class)\n+class GroupQueryResolverTest {\n+\n+    private GroupQueryResolver groupResolver;\n+\n+    @Mock\n+    private ProcessLog processLog;\n+\n+    @BeforeEach\n+    public void setup() {\n+        groupResolver = new GroupQueryResolver(processLog);\n+    }\n+\n+    @Test\n+    void process_doesNotContainDuplicatedItemsInGroups() {\n+        LandscapeImpl landscape = new LandscapeImpl();\n+        landscape.setProcessLog(processLog);\n+        Item item = new Item();\n+        item.setIdentifier(\"itemIdentifier\");\n+        item.setGroup(\"groupIdentifier\");\n+        landscape.setItems(Set.of(item));\n+        landscape.addGroup(new Group(\"groupIdentifier\"));\n+\n+        LandscapeDescription input = new LandscapeDescription();\n+        GroupDescription groupDescription = new GroupDescription();\n+        groupDescription.setIdentifier(\"groupIdentifier\");\n+        groupDescription.setContains(List.of(\"itemidentifier\"));\n+        input.getGroups().put(\"group\", groupDescription);\n+\n+        groupResolver.process(input, landscape);\n+\n+        assertThat(landscape.getItems().stream().count()).isEqualTo(1L);\n+        assertThat(landscape.getGroup(\"groupIdentifier\").getItems()).containsExactly(item);\n+    }\n+\n+    @Test\n+    void process_findsItemsIfQueryConditionIsNotLowercase() {\n+        LandscapeImpl landscape = new LandscapeImpl();\n+        landscape.setProcessLog(processLog);\n+        Item item = new Item();\n+        item.setIdentifier(\"itemIdentifier\");\n+        item.setGroup(\"groupIdentifier\");\n+        landscape.setItems(Set.of(item));\n+        landscape.addGroup(new Group(\"groupIdentifier\"));\n+\n+        LandscapeDescription input = new LandscapeDescription();\n+        GroupDescription groupDescription = new GroupDescription();\n+        groupDescription.setIdentifier(\"groupIdentifier\");\n+        groupDescription.setContains(List.of(\"itemIdentifier\"));\n+        input.getGroups().put(\"group\", groupDescription);\n+\n+        groupResolver.process(input, landscape);\n+\n+        assertThat(landscape.getItems().stream().count()).isEqualTo(1L);\n+        assertThat(landscape.getGroup(\"groupIdentifier\").getItems()).containsExactly(item);\n+    }\n+\n+    @Test\n+    void process_containsCommonGroupIfGroupWasEmpty() {\n+        LandscapeImpl landscape = new LandscapeImpl();\n+        landscape.setProcessLog(processLog);\n+        Item item = new Item();\n+        item.setIdentifier(\"itemIdentifier\");\n+\n+        landscape.setItems(Set.of(item));\n+\n+        LandscapeDescription input = new LandscapeDescription();\n+        GroupDescription groupDescription = new GroupDescription();\n+\n+        input.getGroups().put(\"group\", groupDescription);\n+\n+        groupResolver.process(input, landscape);\n+\n+        assertThat(landscape.getItems().stream().count()).isEqualTo(1L);\n+        assertThat(landscape.getGroups().values().size()).isEqualTo(1);", "originalCommit": "3e968f16da7528028fe88f44266f9d7cf85eb659", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMjM2NQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463932365", "bodyText": "Has been refactored.", "author": "bonndan", "createdAt": "2020-08-01T07:00:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1ODQxNA=="}], "type": "inlineReview", "revised_code": {"commit": "9cf68aeec25a10ecf9deebe1e3387b6bd899a733", "chunk": "diff --git a/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java b/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\nindex 0f0de7f2..0cce230e 100644\n--- a/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\n+++ b/src/test/java/de/bonndan/nivio/input/GroupQueryResolverTest.java\n\n@@ -6,6 +6,7 @@ import de.bonndan.nivio.model.Group;\n import de.bonndan.nivio.model.Item;\n import de.bonndan.nivio.model.LandscapeImpl;\n import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Disabled;\n import org.junit.jupiter.api.Test;\n import org.junit.jupiter.api.extension.ExtendWith;\n import org.mockito.Mock;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463759389", "bodyText": "groups can be an empty Map, so null was returned before. Is my change how it was intended to be?\nIf yes, do we need that COMMON logic inside of Group?", "author": "mfbieber", "createdAt": "2020-07-31T18:14:21Z", "path": "src/main/java/de/bonndan/nivio/model/LandscapeImpl.java", "diffHunk": "@@ -162,12 +162,13 @@ public void addGroup(Group g) {\n      */\n     @NonNull\n     public Group getGroup(String group) {\n-        if (StringUtils.isEmpty(group))\n+        if (StringUtils.isEmpty(group)) {\n             group = Group.COMMON;\n+        }\n         GroupItem groupItem = groups.get(group);\n         if (groupItem == null) {\n             processLog.warn(\"Group \" + group + \" was not found, returning COMMON\");\n-            groupItem = groups.get(Group.COMMON);\n+            groupItem = new Group(Group.COMMON);", "originalCommit": "3e968f16da7528028fe88f44266f9d7cf85eb659", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMjM4Mw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463932383", "bodyText": "Has been refactored.", "author": "bonndan", "createdAt": "2020-08-01T07:00:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMjgzOQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463932839", "bodyText": "Alright, but the resulting landscape still does not have a group, is this intentional?", "author": "mfbieber", "createdAt": "2020-08-01T07:06:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMjk1NQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463932955", "bodyText": "In addition, if you enable the process_containsCommonGroupIfGroupWasEmpty() in GroupQueryResolverTest, you should see:\njava.util.NoSuchElementException: No value present\n\n\tat java.base/java.util.Optional.get(Optional.java:148)\n\tat de.bonndan.nivio.input.GroupQueryResolver.process(GroupQueryResolver.java:36)\n...", "author": "mfbieber", "createdAt": "2020-08-01T07:08:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzNDUxMQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463934511", "bodyText": "I added a (passing) Test that does exactly the same as the other mentioned here, but that uses a Landscape from the LandscapeFactory.\nFor a safety mechanism to use the Landscape correctly: isn't it possible to enforce the same things that the LandscapeFactory does via the Landscape's constructor?", "author": "mfbieber", "createdAt": "2020-08-01T07:28:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzNDY4MA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463934680", "bodyText": "Yes :)", "author": "bonndan", "createdAt": "2020-08-01T07:30:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzNDc2NA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463934764", "bodyText": "An that get() on the optional in GroupQueryResolver should have a preceding ifPresent() check and an orElse() handling :)", "author": "mfbieber", "createdAt": "2020-08-01T07:31:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzNTg2NA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463935864", "bodyText": "I am working on it.", "author": "bonndan", "createdAt": "2020-08-01T07:45:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzNzE5Nw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463937197", "bodyText": "I was testing with:\n     public LandscapeImpl(@Pattern(regexp = LandscapeItem.IDENTIFIER_VALIDATION) String identifier) {\n        this.identifier = identifier;\n    }\n\n    @JsonIgnore\n    @Override\n    public Map<String, GroupItem> getGroups() {\n        if (groups.isEmpty()) {\n            addGroup(new Group(Group.COMMON));\n        }\n        return groups;\n    }\n\nBut then AllGroupsLayoutTest.testWithARelation() and GroupResolverTest.testBlacklistOnGroupsWithRegex() fails (aswell as tests in OrganicLayouterTest, but these due to the .get() on the Optional I guess).\nSo the groups map is supposed to be empty sometimes?", "author": "mfbieber", "createdAt": "2020-08-01T08:04:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzODE0Mw==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463938143", "bodyText": "Ok, I see your changes - nice \ud83d\ude3b\nSubLayoutTest.testWithARelation() is failing though \ud83d\ude3f", "author": "mfbieber", "createdAt": "2020-08-01T08:16:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzODQ4MQ==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463938481", "bodyText": "Where is this code? However, I've refactoded the landscape constructor and such code is not necessary anymore.", "author": "bonndan", "createdAt": "2020-08-01T08:20:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzOTIzOA==", "url": "https://github.com/dedica-team/nivio/pull/204#discussion_r463939238", "bodyText": "I didn't push it. I knew you were working on the same thing, so I was just checking that out locally.", "author": "mfbieber", "createdAt": "2020-08-01T08:29:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1OTM4OQ=="}], "type": "inlineReview", "revised_code": {"commit": "9cf68aeec25a10ecf9deebe1e3387b6bd899a733", "chunk": "diff --git a/src/main/java/de/bonndan/nivio/model/LandscapeImpl.java b/src/main/java/de/bonndan/nivio/model/LandscapeImpl.java\nindex 6e3f5b71..b4bc2f1d 100644\n--- a/src/main/java/de/bonndan/nivio/model/LandscapeImpl.java\n+++ b/src/main/java/de/bonndan/nivio/model/LandscapeImpl.java\n\n@@ -158,20 +157,10 @@ public class LandscapeImpl implements Landscape, Labeled, Assessable {\n      * Returns the group with the given name.\n      *\n      * @param group name\n-     * @return group\n+     * @return group or null if the group cannot be found as optional\n      */\n-    @NonNull\n-    public Group getGroup(String group) {\n-        if (StringUtils.isEmpty(group)) {\n-            group = Group.COMMON;\n-        }\n-        GroupItem groupItem = groups.get(group);\n-        if (groupItem == null) {\n-            processLog.warn(\"Group \" + group + \" was not found, returning COMMON\");\n-            groupItem = new Group(Group.COMMON);\n-        }\n-\n-        return (Group) groupItem;\n+    public Optional<Group> getGroup(String group) {\n+        return Optional.ofNullable((Group) groups.get(group));\n     }\n \n     public void setProcessLog(ProcessLog processLog) {\n"}}, {"oid": "9cf68aeec25a10ecf9deebe1e3387b6bd899a733", "url": "https://github.com/dedica-team/nivio/commit/9cf68aeec25a10ecf9deebe1e3387b6bd899a733", "message": "[#204] removed the magic from landscape.getGroup()", "committedDate": "2020-08-01T06:34:52Z", "type": "commit"}, {"oid": "5ec97432838710121c70ea895ec781ac064ffdf5", "url": "https://github.com/dedica-team/nivio/commit/5ec97432838710121c70ea895ec781ac064ffdf5", "message": "[#204] refactored group to contain a set of items", "committedDate": "2020-08-01T06:46:25Z", "type": "commit"}, {"oid": "e5842174ec937545fca8a891ce1800df41c9e525", "url": "https://github.com/dedica-team/nivio/commit/e5842174ec937545fca8a891ce1800df41c9e525", "message": "testing process with landscape from factory", "committedDate": "2020-08-01T07:21:15Z", "type": "commit"}, {"oid": "90a62a3031d8a312395b62704c634abf3ffb44ef", "url": "https://github.com/dedica-team/nivio/commit/90a62a3031d8a312395b62704c634abf3ffb44ef", "message": "[#204] improved LandscapeImpl construct to require the default group", "committedDate": "2020-08-01T08:08:13Z", "type": "commit"}, {"oid": "1d39c5c0e8d981cfeabdd07fc649ce675f201dc3", "url": "https://github.com/dedica-team/nivio/commit/1d39c5c0e8d981cfeabdd07fc649ce675f201dc3", "message": "[#204] maintaining group insertion order", "committedDate": "2020-08-01T08:47:55Z", "type": "commit"}, {"oid": "3548fe39fb934d6bc517c4cc08dce15e0be55372", "url": "https://github.com/dedica-team/nivio/commit/3548fe39fb934d6bc517c4cc08dce15e0be55372", "message": "tests for SVGGroupAreaFactory", "committedDate": "2020-08-02T20:32:20Z", "type": "commit"}, {"oid": "20f9e0390693a38c25c5f3397e6ec6c59ada25d5", "url": "https://github.com/dedica-team/nivio/commit/20f9e0390693a38c25c5f3397e6ec6c59ada25d5", "message": "Merge remote-tracking branch 'origin/test' into test", "committedDate": "2020-08-02T20:38:38Z", "type": "commit"}, {"oid": "c17348a5367b146da0518102026d8d23f66e9427", "url": "https://github.com/dedica-team/nivio/commit/c17348a5367b146da0518102026d8d23f66e9427", "message": "enabled test", "committedDate": "2020-08-04T18:43:56Z", "type": "commit"}, {"oid": "dc5ab85c0812fb77ae96320115000e19be214ab2", "url": "https://github.com/dedica-team/nivio/commit/dc5ab85c0812fb77ae96320115000e19be214ab2", "message": "try to fix test", "committedDate": "2020-08-04T19:01:19Z", "type": "commit"}, {"oid": "437e6b050e968f040a057a92c59d62bfb649b543", "url": "https://github.com/dedica-team/nivio/commit/437e6b050e968f040a057a92c59d62bfb649b543", "message": "add pm/am to date time", "committedDate": "2020-08-05T08:30:17Z", "type": "commit"}, {"oid": "5baf18770443e1f1b170053b42b82a749f8617fc", "url": "https://github.com/dedica-team/nivio/commit/5baf18770443e1f1b170053b42b82a749f8617fc", "message": "fix icon for new label naming and remove self link", "committedDate": "2020-08-05T10:08:04Z", "type": "commit"}, {"oid": "5da653cabd63e08f5465e87c37b57c4196b96eba", "url": "https://github.com/dedica-team/nivio/commit/5da653cabd63e08f5465e87c37b57c4196b96eba", "message": "[#213] icon and color are first class Component fields again, appearance is determine independently from rendering", "committedDate": "2020-08-05T21:16:00Z", "type": "commit"}, {"oid": "da76776705903f1532786e69345db4fc9610beea", "url": "https://github.com/dedica-team/nivio/commit/da76776705903f1532786e69345db4fc9610beea", "message": "[#213] using item icon field in frontend", "committedDate": "2020-08-05T21:20:36Z", "type": "commit"}, {"oid": "83ba1a47a81252be079d10c85f0fa3daba2a0fd4", "url": "https://github.com/dedica-team/nivio/commit/83ba1a47a81252be079d10c85f0fa3daba2a0fd4", "message": "Update PNGRenderCacheTest.java\n\nadd test", "committedDate": "2020-08-05T22:56:13Z", "type": "commit"}, {"oid": "698b1dae406cf6d43523ddd18d6ad6b04dce59ea", "url": "https://github.com/dedica-team/nivio/commit/698b1dae406cf6d43523ddd18d6ad6b04dce59ea", "message": "fix icons", "committedDate": "2020-08-06T09:19:16Z", "type": "commit"}, {"oid": "2a20d80b268c9cae9118fe8996224ab635a459ab", "url": "https://github.com/dedica-team/nivio/commit/2a20d80b268c9cae9118fe8996224ab635a459ab", "message": "remove empty groups in dashboard", "committedDate": "2020-08-06T11:15:52Z", "type": "commit"}, {"oid": "00092b162bb0cec9f82de1f704bc4626eecfe52d", "url": "https://github.com/dedica-team/nivio/commit/00092b162bb0cec9f82de1f704bc4626eecfe52d", "message": "Merge pull request #216 from dedica-team/test_fix_icons\n\nfix icons", "committedDate": "2020-08-06T11:43:47Z", "type": "commit"}, {"oid": "651279cb4f3c2bfa22a21f25677e77cff234f326", "url": "https://github.com/dedica-team/nivio/commit/651279cb4f3c2bfa22a21f25677e77cff234f326", "message": "[#219] using conditional attrs on svg tags", "committedDate": "2020-08-06T16:36:48Z", "type": "commit"}, {"oid": "2b86af9511483752114f7a578af80bf29333624f", "url": "https://github.com/dedica-team/nivio/commit/2b86af9511483752114f7a578af80bf29333624f", "message": "simple svg hex test", "committedDate": "2020-08-06T16:58:35Z", "type": "commit"}, {"oid": "e5c8c20885ea90968e9ce8ea19aed7af207d6c19", "url": "https://github.com/dedica-team/nivio/commit/e5c8c20885ea90968e9ce8ea19aed7af207d6c19", "message": "[#204] simple SVGDocument test", "committedDate": "2020-08-06T17:20:23Z", "type": "commit"}, {"oid": "355164176df13ea92d98ae1033d5679284531244", "url": "https://github.com/dedica-team/nivio/commit/355164176df13ea92d98ae1033d5679284531244", "message": "[#204] removed color overrides for svg stroke", "committedDate": "2020-08-06T17:31:51Z", "type": "commit"}, {"oid": "6ac3e6d53a56d797c00e8d211698bdfcb3f9faf2", "url": "https://github.com/dedica-team/nivio/commit/6ac3e6d53a56d797c00e8d211698bdfcb3f9faf2", "message": "[#222] rendering optimisations", "committedDate": "2020-08-06T20:51:25Z", "type": "commit"}, {"oid": "2fdeeaac8bc3b09d02d5e8d4e83d4f1bd37b0bf1", "url": "https://github.com/dedica-team/nivio/commit/2fdeeaac8bc3b09d02d5e8d4e83d4f1bd37b0bf1", "message": "[#224] fix for group names", "committedDate": "2020-08-07T19:31:02Z", "type": "commit"}, {"oid": "6ac3e6d53a56d797c00e8d211698bdfcb3f9faf2", "url": "https://github.com/dedica-team/nivio/commit/6ac3e6d53a56d797c00e8d211698bdfcb3f9faf2", "message": "[#222] rendering optimisations", "committedDate": "2020-08-06T20:51:25Z", "type": "forcePushed"}, {"oid": "59f5f216e4c274c4de83e86e5fcf4be5a6bf5a98", "url": "https://github.com/dedica-team/nivio/commit/59f5f216e4c274c4de83e86e5fcf4be5a6bf5a98", "message": "groups surrounded", "committedDate": "2020-08-12T21:49:31Z", "type": "commit"}, {"oid": "7beeb1325001cf99a00af2ee94391f8f8a5cadf5", "url": "https://github.com/dedica-team/nivio/commit/7beeb1325001cf99a00af2ee94391f8f8a5cadf5", "message": "minor changes", "committedDate": "2020-08-13T09:58:31Z", "type": "commit"}, {"oid": "d9c24ec09db783dfa922d92b09d997d4c59af12b", "url": "https://github.com/dedica-team/nivio/commit/d9c24ec09db783dfa922d92b09d997d4c59af12b", "message": "Merge pull request #228 from dedica-team/test_group_outline_pr\n\nminor changes", "committedDate": "2020-08-13T10:06:07Z", "type": "commit"}, {"oid": "89bca6e2fef4150832d60771450c43339e7ed8eb", "url": "https://github.com/dedica-team/nivio/commit/89bca6e2fef4150832d60771450c43339e7ed8eb", "message": "Merge pull request #225 from dedica-team/224_fix_group_names\n\n[#224] fix for group names", "committedDate": "2020-08-13T10:50:00Z", "type": "commit"}, {"oid": "b11a586cd776d2292ab82ec2f4753d5dc1c1645e", "url": "https://github.com/dedica-team/nivio/commit/b11a586cd776d2292ab82ec2f4753d5dc1c1645e", "message": "Merge branch 'test' into test_group_outline", "committedDate": "2020-08-13T14:15:15Z", "type": "commit"}, {"oid": "a11023de7e7e6921ec666f2c3a53413b8542a62b", "url": "https://github.com/dedica-team/nivio/commit/a11023de7e7e6921ec666f2c3a53413b8542a62b", "message": "Merge pull request #227 from dedica-team/test_group_outline\n\ngroups surrounded", "committedDate": "2020-08-13T14:27:52Z", "type": "commit"}]}