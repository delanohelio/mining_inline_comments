{"pr_number": 2806, "pr_title": "Fix tenant creation issue with Oracle 12c", "pr_createdAt": "2020-10-13T08:48:10Z", "pr_url": "https://github.com/wso2/carbon-kernel/pull/2806", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzg4NjA1Mw==", "url": "https://github.com/wso2/carbon-kernel/pull/2806#discussion_r503886053", "bodyText": "Shall we change to equalIgnorecase and do it for other dbType as well?", "author": "nilasini", "createdAt": "2020-10-13T11:49:34Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/tenant/JDBCTenantManager.java", "diffHunk": "@@ -1154,7 +1154,7 @@ private ResultSet getTenantQueryResultSet(Connection dbConnection, String sorted\n             prepStmt = dbConnection.prepareStatement(sqlQuery);\n             prepStmt.setInt(1, offset);\n             prepStmt.setInt(2, limit);\n-        } else if (dbType.contains(\"oracle\")) {\n+        } else if (dbType.contains(\"oracle\") || dbType.contains(\"Oracle\")) {", "originalCommit": "b728c38fec6c49bddc69ed0c36bfabddb0966882", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA1NjkyMQ==", "url": "https://github.com/wso2/carbon-kernel/pull/2806#discussion_r504056921", "bodyText": "fixed", "author": "sachiniWettasinghe", "createdAt": "2020-10-13T15:40:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzg4NjA1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "fb523138d915ac572c5115972429c3f91dcfd47d", "chunk": "diff --git a/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/tenant/JDBCTenantManager.java b/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/tenant/JDBCTenantManager.java\nindex 6d5b41c12..100f3b6df 100644\n--- a/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/tenant/JDBCTenantManager.java\n+++ b/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/tenant/JDBCTenantManager.java\n\n@@ -1148,33 +1148,33 @@ public class JDBCTenantManager implements TenantManager {\n         String sqlTail;\n         sqlQuery = TenantConstants.LIST_TENANTS_PAGINATED_SQL;\n \n-        if (dbType.contains(\"MySQL\") || dbType.contains(\"H2\")) {\n+        if (dbType.equalsIgnoreCase(\"MySQL\") || dbType.equalsIgnoreCase(\"H2\")) {\n             sqlTail = String.format(TenantConstants.LIST_TENANTS_MYSQL_TAIL, sortedOrder);\n             sqlQuery = sqlQuery + sqlTail;\n             prepStmt = dbConnection.prepareStatement(sqlQuery);\n             prepStmt.setInt(1, offset);\n             prepStmt.setInt(2, limit);\n-        } else if (dbType.contains(\"oracle\") || dbType.contains(\"Oracle\")) {\n+        } else if (dbType.equalsIgnoreCase(\"oracle\")) {\n             sqlQuery = TenantConstants.LIST_TENANTS_PAGINATED_ORACLE;\n             sqlTail = String.format(TenantConstants.LIST_TENANTS_ORACLE_TAIL, sortedOrder);\n             sqlQuery = sqlQuery + sqlTail;\n             prepStmt = dbConnection.prepareStatement(sqlQuery);\n             prepStmt.setInt(1, offset + limit);\n             prepStmt.setInt(2, offset);\n-        } else if (dbType.contains(\"Microsoft\")) {\n+        } else if (dbType.equalsIgnoreCase(\"Microsoft\")) {\n             sqlTail = String.format(TenantConstants.LIST_TENANTS_MSSQL_TAIL, sortedOrder);\n             sqlQuery = sqlQuery + sqlTail;\n             prepStmt = dbConnection.prepareStatement(sqlQuery);\n             prepStmt.setInt(1, offset);\n             prepStmt.setInt(2, limit);\n-        } else if (dbType.contains(\"db2\") || dbType.contains(\"DB2\")) {\n+        } else if (dbType.equalsIgnoreCase(\"db2\")) {\n             sqlQuery = TenantConstants.LIST_TENANTS_PAGINATED_DB2;\n             sqlTail = String.format(TenantConstants.LIST_TENANTS_DB2_TAIL, sortedOrder);\n             sqlQuery = sqlQuery + sqlTail;\n             prepStmt = dbConnection.prepareStatement(sqlQuery);\n             prepStmt.setInt(1, offset + 1);\n             prepStmt.setInt(2, offset + limit);\n-        } else if (dbType.contains(\"PostgreSQL\")) {\n+        } else if (dbType.equalsIgnoreCase(\"PostgreSQL\")) {\n             sqlTail = String.format(TenantConstants.LIST_TENANTS_POSTGRESQL_TAIL, sortedOrder);\n             sqlQuery = sqlQuery + sqlTail;\n             prepStmt = dbConnection.prepareStatement(sqlQuery);\n"}}, {"oid": "fb523138d915ac572c5115972429c3f91dcfd47d", "url": "https://github.com/wso2/carbon-kernel/commit/fb523138d915ac572c5115972429c3f91dcfd47d", "message": "Fix tenant creation issue with Oracle 12c", "committedDate": "2020-10-13T15:36:52Z", "type": "commit"}, {"oid": "fb523138d915ac572c5115972429c3f91dcfd47d", "url": "https://github.com/wso2/carbon-kernel/commit/fb523138d915ac572c5115972429c3f91dcfd47d", "message": "Fix tenant creation issue with Oracle 12c", "committedDate": "2020-10-13T15:36:52Z", "type": "forcePushed"}]}