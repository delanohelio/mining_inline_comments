{"pr_number": 2752, "pr_title": "Fixing performance issues in IS 5.11", "pr_createdAt": "2020-08-20T05:56:15Z", "pr_url": "https://github.com/wso2/carbon-kernel/pull/2752", "timeline": [{"oid": "fc700939864a36992eeef588cf8480e19efffdb4", "url": "https://github.com/wso2/carbon-kernel/commit/fc700939864a36992eeef588cf8480e19efffdb4", "message": "Fix performance issues 5.11", "committedDate": "2020-08-20T05:48:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MDk0MQ==", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r477150941", "bodyText": "create a issue to track cache clear in user name update (will be supported in future)", "author": "Buddhimah", "createdAt": "2020-08-26T09:07:49Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12147,6 +12153,11 @@ private void clearUserIDResolverCache(String userID, String userName, UserStore\n                 .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),\n                         RESOLVE_USER_ID_FROM_USER_NAME_CACHE_NAME, tenantId);\n         UserIdResolverCache.getInstance().clearCacheEntry(userID, RESOLVE_USER_NAME_FROM_USER_ID_CACHE_NAME, tenantId);\n+        UserIdResolverCache.getInstance()\n+                .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),", "originalCommit": "fc700939864a36992eeef588cf8480e19efffdb4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE2Nzc2OA==", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r477167768", "bodyText": "create an issue to replace usage of LIKE operator used method for getUser method use case", "author": "Buddhimah", "createdAt": "2020-08-26T09:32:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MDk0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODEyODEyMg==", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r478128122", "bodyText": "wso2/product-is#9322", "author": "Buddhimah", "createdAt": "2020-08-27T05:12:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MDk0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE0MjA2Mg==", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r478142062", "bodyText": "wso2/product-is#9323", "author": "Buddhimah", "createdAt": "2020-08-27T05:34:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MDk0MQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE4NDczMw==", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r477184733", "bodyText": "Need a method comment, explaining what it supposed to do.", "author": "ruwanta", "createdAt": "2020-08-26T10:01:18Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12098,20 +12101,23 @@ public String getUserNameFromUserID(String userID) throws UserStoreException {\n             return ((AbstractUserStoreManager) userStore.getUserStoreManager())\n                     .getUserNameFromUserID(userStore.getDomainFreeUserId());\n         }\n+\n+        if (isUniqueUserIdEnabledInUserStore(userStore)) {\n+            return getUserNameFromCurrentUserStore(userID, userStore);\n+        } else {\n+            return userUniqueIDManger.getUser(userID, this).getDomainQualifiedUsername();\n+        }\n+    }\n+\n+    private String getUserNameFromCurrentUserStore(String userID, UserStore userStore) throws UserStoreException {", "originalCommit": "fc700939864a36992eeef588cf8480e19efffdb4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODEyNjE2Ng==", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r478126166", "bodyText": "done", "author": "Buddhimah", "createdAt": "2020-08-27T05:09:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE4NDczMw=="}], "type": "inlineReview", "revised_code": {"commit": "53761d888bc5a3f43f33581d5a00f80df6bc6952", "chunk": "diff --git a/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java b/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java\nindex 9ed1bc807..b00eab18c 100644\n--- a/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java\n+++ b/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java\n\n@@ -12109,6 +12109,14 @@ public abstract class AbstractUserStoreManager implements PaginatedUserStoreMana\n         }\n     }\n \n+    /**\n+     * Get the user name of the given user from a unique user id natively supported user store.\n+     *\n+     * @param userID userID of the user.\n+     * @param userStore user store of the user.\n+     * @return user name.\n+     * @throws UserStoreException Thrown by the underlying UserStoreManager.\n+     */\n     private String getUserNameFromCurrentUserStore(String userID, UserStore userStore) throws UserStoreException {\n \n         String userName = getFromUserNameCache(userID);\n"}}, {"oid": "53761d888bc5a3f43f33581d5a00f80df6bc6952", "url": "https://github.com/wso2/carbon-kernel/commit/53761d888bc5a3f43f33581d5a00f80df6bc6952", "message": "Add method commment on newly introduced method", "committedDate": "2020-08-27T05:08:30Z", "type": "commit"}]}