{"pr_number": 2578, "pr_title": "Address PR comments.", "pr_createdAt": "2020-02-04T03:03:35Z", "pr_url": "https://github.com/wso2/carbon-kernel/pull/2578", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTczNTIyMg==", "url": "https://github.com/wso2/carbon-kernel/pull/2578#discussion_r375735222", "bodyText": "Shall we drop the new term, and mention that it's a secondary user store manager. Better to add a debug log with secondary user store manager class and the name.", "author": "tharindu-bandara", "createdAt": "2020-02-06T09:52:03Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/UserStoreDeploymentManager.java", "diffHunk": "@@ -70,8 +70,7 @@ public void deploy(String absoluteFilePath) throws DeploymentException {\n                 try {\n                     primaryUSM.addSecondaryUserStoreManager(realmConfiguration, userRealm);\n                 } catch (UserStoreException ex) {\n-                    log.warn(ex.getMessage());\n-                    throw new DeploymentException(ex.getMessage(), ex);\n+                    throw new DeploymentException(\"Error occurred while initializing new user store manager.\", ex);", "originalCommit": "91cf53f9e1bf7c594974c95c78e21bc8fb4d858a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9da20212e348b00b4c8f4772f93988f088eb9979", "chunk": "diff --git a/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/UserStoreDeploymentManager.java b/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/UserStoreDeploymentManager.java\nindex 2a7245900..2c40e3e23 100644\n--- a/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/UserStoreDeploymentManager.java\n+++ b/core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/UserStoreDeploymentManager.java\n\n@@ -70,7 +70,14 @@ public class UserStoreDeploymentManager {\n                 try {\n                     primaryUSM.addSecondaryUserStoreManager(realmConfiguration, userRealm);\n                 } catch (UserStoreException ex) {\n-                    throw new DeploymentException(\"Error occurred while initializing new user store manager.\", ex);\n+                    String domainName = realmConfiguration\n+                            .getUserStoreProperty(UserCoreConstants.RealmConfig.PROPERTY_DOMAIN_NAME);\n+                    if (log.isDebugEnabled()) {\n+                        log.debug(\"Error occurred while initializing secondary user store manager with domain: \"\n+                                + domainName);\n+                    }\n+                    throw new DeploymentException(\"Error occurred while initializing secondary user store manager.\",\n+                            ex);\n                 }\n \n                 log.info(\"Realm configuration of tenant:\" + CarbonContext.getThreadLocalCarbonContext().getTenantId() + \"  modified with \" + absoluteFilePath);\n"}}, {"oid": "9da20212e348b00b4c8f4772f93988f088eb9979", "url": "https://github.com/wso2/carbon-kernel/commit/9da20212e348b00b4c8f4772f93988f088eb9979", "message": "Address PR comments.", "committedDate": "2020-02-06T10:29:57Z", "type": "commit"}, {"oid": "9da20212e348b00b4c8f4772f93988f088eb9979", "url": "https://github.com/wso2/carbon-kernel/commit/9da20212e348b00b4c8f4772f93988f088eb9979", "message": "Address PR comments.", "committedDate": "2020-02-06T10:29:57Z", "type": "forcePushed"}]}