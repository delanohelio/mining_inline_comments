{"pr_number": 2134, "pr_title": "#2133 @BeanMapping#resultType should not be applied to forged methods", "pr_createdAt": "2020-07-03T19:55:13Z", "pr_url": "https://github.com/mapstruct/mapstruct/pull/2134", "timeline": [{"oid": "f4e6560d23ff25d6b78857b9ee1beebbb902749c", "url": "https://github.com/mapstruct/mapstruct/commit/f4e6560d23ff25d6b78857b9ee1beebbb902749c", "message": "#2133 reproducer", "committedDate": "2020-07-04T07:42:09Z", "type": "commit"}, {"oid": "f4e6560d23ff25d6b78857b9ee1beebbb902749c", "url": "https://github.com/mapstruct/mapstruct/commit/f4e6560d23ff25d6b78857b9ee1beebbb902749c", "message": "#2133 reproducer", "committedDate": "2020-07-04T07:42:09Z", "type": "forcePushed"}, {"oid": "504bc9f47ef58390b1f110e57696599644cc0315", "url": "https://github.com/mapstruct/mapstruct/commit/504bc9f47ef58390b1f110e57696599644cc0315", "message": "#2133 solution", "committedDate": "2020-07-04T08:58:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODMzOA==", "url": "https://github.com/mapstruct/mapstruct/pull/2134#discussion_r449778338", "bodyText": "This makes sense. However, doesn't it make more sense to construct the appropriate MappingMethodOptions when we create a new ForgedMethod instead?", "author": "filiphr", "createdAt": "2020-07-04T14:37:25Z", "path": "processor/src/main/java/org/mapstruct/ap/internal/model/BeanMappingMethod.java", "diffHunk": "@@ -472,7 +472,10 @@ private void sortPropertyMappingsByDependencies() {\n         }\n \n         private Type getReturnTypeToConstructFromSelectionParameters(SelectionParameters selectionParams) {\n-            if ( selectionParams != null && selectionParams.getResultType() != null ) {\n+            // resultType only applies to method that actually has @BeanMapping annotation, never to forged methods\n+            if ( !( method instanceof ForgedMethod )", "originalCommit": "504bc9f47ef58390b1f110e57696599644cc0315", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODQ4MA==", "url": "https://github.com/mapstruct/mapstruct/pull/2134#discussion_r449778480", "bodyText": "I (of course \ud83d\ude04 looked on that option). But\n\nIts too much hassle\nThere might be actually a reason to carry down all options through the underlying forged methods.. You just have to be careful to use them and check whether they are really applicable", "author": "sjaakd", "createdAt": "2020-07-04T14:39:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODUxOA==", "url": "https://github.com/mapstruct/mapstruct/pull/2134#discussion_r449778518", "bodyText": "We had it like that some refactorings ago..", "author": "sjaakd", "createdAt": "2020-07-04T14:40:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODMzOA=="}], "type": "inlineReview", "revised_code": null}]}