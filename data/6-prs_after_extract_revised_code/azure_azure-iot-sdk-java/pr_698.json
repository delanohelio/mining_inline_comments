{"pr_number": 698, "pr_title": "Digital twin/telemetry explosion", "pr_createdAt": "2020-01-30T18:08:52Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/698", "timeline": [{"oid": "a1ec71211a18c40cc549f9c074e1b13a661a1416", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/a1ec71211a18c40cc549f9c074e1b13a661a1416", "message": "refactor(digital-twin-device):modified for telemetry message explosion", "committedDate": "2020-01-30T18:09:52Z", "type": "commit"}, {"oid": "a1ec71211a18c40cc549f9c074e1b13a661a1416", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/a1ec71211a18c40cc549f9c074e1b13a661a1416", "message": "refactor(digital-twin-device):modified for telemetry message explosion", "committedDate": "2020-01-30T18:09:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMDQ5NA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373120494", "bodyText": "tabbing looks off on this brace", "author": "drwill-ms", "createdAt": "2020-01-30T18:34:16Z", "path": "digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java", "diffHunk": "@@ -59,17 +59,27 @@ protected AbstractDigitalTwinComponent(@NonNull String digitalTwinComponentName,\n      * The application may invoke this function as many times as it wants, subject to the device's resource availability. The application does NOT need to wait for each send to finish.\n      * The SDK will automatically attempt to retry the telemetry send on transient errors.\n      *\n+     * @param payload DigitalTwin telemetry message payload. It should be a valid json string represent a map. The key is property name. the JSON should look like:\n+     *\t\t\t\t{", "originalCommit": "3a1e763b27f86eb2393d4f72b24d0a45a357cce8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE0NDk4MA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373144980", "bodyText": "fixed", "author": "davilu", "createdAt": "2020-01-30T19:22:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMDQ5NA=="}], "type": "inlineReview", "revised_code": {"commit": "c53812c42aded46b057f3467bec86acc61a46bf4", "chunk": "diff --git a/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java b/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\nindex 7df7f3e7b..a5188ae93 100644\n--- a/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\n+++ b/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\n\n@@ -59,8 +59,8 @@ public abstract class AbstractDigitalTwinComponent {\n      * The application may invoke this function as many times as it wants, subject to the device's resource availability. The application does NOT need to wait for each send to finish.\n      * The SDK will automatically attempt to retry the telemetry send on transient errors.\n      *\n-     * @param payload DigitalTwin telemetry message payload. It should be a valid json string represent a map. The key is property name. the JSON should look like:\n-     *\t\t\t\t{\n+     * @param payload DigitalTwin telemetry message payload. It should be a valid json string representing a map. The key is property name. The JSON should look like:\n+     *              {\n      *                  \"int_property_name\": 123,\n      *                  \"boolean_property_name\": true,\n      *                  \"string_property_name\": \"string value\",\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMDY1MA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373120650", "bodyText": "here too", "author": "drwill-ms", "createdAt": "2020-01-30T18:34:35Z", "path": "digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java", "diffHunk": "@@ -80,10 +90,21 @@ protected AbstractDigitalTwinComponent(@NonNull String digitalTwinComponentName,\n      * The device application calls this function to send telemetry to the server. The call will be blocked and will return the result once telemetry is processed.\n      * The SDK will automatically attempt to retry the telemetry send on transient errors.\n      *\n+     * @param payload DigitalTwin telemetry message payload. It should be a valid json string represent a map. The key is property name. the JSON should look like:\n+     *\t\t\t\t{", "originalCommit": "3a1e763b27f86eb2393d4f72b24d0a45a357cce8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE0NTAzMA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373145030", "bodyText": "fixed", "author": "davilu", "createdAt": "2020-01-30T19:22:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMDY1MA=="}], "type": "inlineReview", "revised_code": {"commit": "c53812c42aded46b057f3467bec86acc61a46bf4", "chunk": "diff --git a/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java b/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\nindex 7df7f3e7b..a5188ae93 100644\n--- a/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\n+++ b/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\n\n@@ -90,8 +90,8 @@ public abstract class AbstractDigitalTwinComponent {\n      * The device application calls this function to send telemetry to the server. The call will be blocked and will return the result once telemetry is processed.\n      * The SDK will automatically attempt to retry the telemetry send on transient errors.\n      *\n-     * @param payload DigitalTwin telemetry message payload. It should be a valid json string represent a map. The key is property name. the JSON should look like:\n-     *\t\t\t\t{\n+     * @param payload DigitalTwin telemetry message payload. It should be a valid json string representing a map. The key is property name. The JSON should look like:\n+     *              {\n      *                  \"int_property_name\": 123,\n      *                  \"boolean_property_name\": true,\n      *                  \"string_property_name\": \"string value\",\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMTExMg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373121112", "bodyText": "The value of the telemetry is the same name as the entire thing, which is confusing. Suggest changing this to TELEMETRY_VALUE.", "author": "drwill-ms", "createdAt": "2020-01-30T18:35:34Z", "path": "digital-twin/device/src/test/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponentTest.java", "diffHunk": "@@ -41,8 +41,7 @@\n public class AbstractDigitalTwinComponentTest {\n     private static final String DIGITAL_TWIN_COMPONENT_NAME = \"DIGITAL_TWIN_COMPONENT_NAME\";\n     private static final String DIGITAL_TWIN_INTERFACE_ID = \"DIGITAL_TWIN_INTERFACE_ID\";\n-    private static final String TELEMETRY_NAME = \"TELEMETRY_NAME\";\n-    private static final String TELEMETRY_PAYLOAD = \"TELEMETRY_PAYLOAD\";\n+    private static final String TELEMETRY_PAYLOAD = \"{\\\"TELEMETRY_NAME\\\": \\\"TELEMETRY_PAYLOAD\\\"}\";", "originalCommit": "3a1e763b27f86eb2393d4f72b24d0a45a357cce8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE0NTA5MA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373145090", "bodyText": "fixed", "author": "davilu", "createdAt": "2020-01-30T19:22:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMTExMg=="}], "type": "inlineReview", "revised_code": {"commit": "c53812c42aded46b057f3467bec86acc61a46bf4", "chunk": "diff --git a/digital-twin/device/src/test/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponentTest.java b/digital-twin/device/src/test/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponentTest.java\nindex 0705ab380..dd16fb9b6 100644\n--- a/digital-twin/device/src/test/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponentTest.java\n+++ b/digital-twin/device/src/test/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponentTest.java\n\n@@ -41,7 +41,7 @@ import static org.mockito.Mockito.when;\n public class AbstractDigitalTwinComponentTest {\n     private static final String DIGITAL_TWIN_COMPONENT_NAME = \"DIGITAL_TWIN_COMPONENT_NAME\";\n     private static final String DIGITAL_TWIN_INTERFACE_ID = \"DIGITAL_TWIN_INTERFACE_ID\";\n-    private static final String TELEMETRY_PAYLOAD = \"{\\\"TELEMETRY_NAME\\\": \\\"TELEMETRY_PAYLOAD\\\"}\";\n+    private static final String TELEMETRY_PAYLOAD = \"{\\\"TELEMETRY_NAME\\\": \\\"TELEMETRY_VALUE\\\"}\";\n     private static final int OPERATION_LATENCY = 500;\n \n     private AbstractDigitalTwinComponent testee;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMjY5NA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373122694", "bodyText": "grammar: representing", "author": "drwill-ms", "createdAt": "2020-01-30T18:38:41Z", "path": "digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java", "diffHunk": "@@ -59,17 +59,27 @@ protected AbstractDigitalTwinComponent(@NonNull String digitalTwinComponentName,\n      * The application may invoke this function as many times as it wants, subject to the device's resource availability. The application does NOT need to wait for each send to finish.\n      * The SDK will automatically attempt to retry the telemetry send on transient errors.\n      *\n+     * @param payload DigitalTwin telemetry message payload. It should be a valid json string represent a map. The key is property name. the JSON should look like:", "originalCommit": "3a1e763b27f86eb2393d4f72b24d0a45a357cce8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE0NTE1MQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373145151", "bodyText": "fixed", "author": "davilu", "createdAt": "2020-01-30T19:22:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMjY5NA=="}], "type": "inlineReview", "revised_code": {"commit": "c53812c42aded46b057f3467bec86acc61a46bf4", "chunk": "diff --git a/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java b/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\nindex 7df7f3e7b..a5188ae93 100644\n--- a/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\n+++ b/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\n\n@@ -59,8 +59,8 @@ public abstract class AbstractDigitalTwinComponent {\n      * The application may invoke this function as many times as it wants, subject to the device's resource availability. The application does NOT need to wait for each send to finish.\n      * The SDK will automatically attempt to retry the telemetry send on transient errors.\n      *\n-     * @param payload DigitalTwin telemetry message payload. It should be a valid json string represent a map. The key is property name. the JSON should look like:\n-     *\t\t\t\t{\n+     * @param payload DigitalTwin telemetry message payload. It should be a valid json string representing a map. The key is property name. The JSON should look like:\n+     *              {\n      *                  \"int_property_name\": 123,\n      *                  \"boolean_property_name\": true,\n      *                  \"string_property_name\": \"string value\",\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMzAyNQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373123025", "bodyText": "grammar: capital T in \"the\" from \"the JSON should look like:\"", "author": "drwill-ms", "createdAt": "2020-01-30T18:39:19Z", "path": "digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java", "diffHunk": "@@ -59,17 +59,27 @@ protected AbstractDigitalTwinComponent(@NonNull String digitalTwinComponentName,\n      * The application may invoke this function as many times as it wants, subject to the device's resource availability. The application does NOT need to wait for each send to finish.\n      * The SDK will automatically attempt to retry the telemetry send on transient errors.\n      *\n+     * @param payload DigitalTwin telemetry message payload. It should be a valid json string represent a map. The key is property name. the JSON should look like:", "originalCommit": "3a1e763b27f86eb2393d4f72b24d0a45a357cce8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE0NTIwOA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/698#discussion_r373145208", "bodyText": "fixed", "author": "davilu", "createdAt": "2020-01-30T19:22:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMzAyNQ=="}], "type": "inlineReview", "revised_code": {"commit": "c53812c42aded46b057f3467bec86acc61a46bf4", "chunk": "diff --git a/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java b/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\nindex 7df7f3e7b..a5188ae93 100644\n--- a/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\n+++ b/digital-twin/device/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/device/AbstractDigitalTwinComponent.java\n\n@@ -59,8 +59,8 @@ public abstract class AbstractDigitalTwinComponent {\n      * The application may invoke this function as many times as it wants, subject to the device's resource availability. The application does NOT need to wait for each send to finish.\n      * The SDK will automatically attempt to retry the telemetry send on transient errors.\n      *\n-     * @param payload DigitalTwin telemetry message payload. It should be a valid json string represent a map. The key is property name. the JSON should look like:\n-     *\t\t\t\t{\n+     * @param payload DigitalTwin telemetry message payload. It should be a valid json string representing a map. The key is property name. The JSON should look like:\n+     *              {\n      *                  \"int_property_name\": 123,\n      *                  \"boolean_property_name\": true,\n      *                  \"string_property_name\": \"string value\",\n"}}, {"oid": "c53812c42aded46b057f3467bec86acc61a46bf4", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/c53812c42aded46b057f3467bec86acc61a46bf4", "message": "fix(doc): fixed link to digital twin samples", "committedDate": "2020-01-30T19:21:49Z", "type": "commit"}, {"oid": "c53812c42aded46b057f3467bec86acc61a46bf4", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/c53812c42aded46b057f3467bec86acc61a46bf4", "message": "fix(doc): fixed link to digital twin samples", "committedDate": "2020-01-30T19:21:49Z", "type": "forcePushed"}]}