{"pr_number": 811, "pr_title": "feat(iot-dev): Adding client options for module client", "pr_createdAt": "2020-06-17T00:25:37Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/811", "timeline": [{"oid": "1bf49869b5d69abb5d535698bb872d99e789cdea", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/1bf49869b5d69abb5d535698bb872d99e789cdea", "message": "add modelid for constructor", "committedDate": "2020-06-17T00:02:04Z", "type": "commit"}, {"oid": "87665bbc5f04fa6318e15f198d938aa708cfdcf7", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/87665bbc5f04fa6318e15f198d938aa708cfdcf7", "message": "model id changes for clientOptions", "committedDate": "2020-06-17T00:05:18Z", "type": "commit"}, {"oid": "af16d06b06dc89a46371075f7fd6980c1508acd9", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/af16d06b06dc89a46371075f7fd6980c1508acd9", "message": "clean up", "committedDate": "2020-06-17T00:25:03Z", "type": "commit"}, {"oid": "8fac003d3bac31d608c5004b8927232bece8dce9", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/8fac003d3bac31d608c5004b8927232bece8dce9", "message": "Merge branch 'master' into bikamani/moduleModelId", "committedDate": "2020-06-17T00:26:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY1NDQ2OQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/811#discussion_r441654469", "bodyText": "why don't other overloads of Module Client constructor have ClientOptions as well; eg one that takes in x509 certificate keys, or one that takes in the ssl context?", "author": "abhipsaMisra", "createdAt": "2020-06-17T15:57:12Z", "path": "device/iot-device-client/src/main/java/com/microsoft/azure/sdk/iot/device/ModuleClient.java", "diffHunk": "@@ -86,6 +86,30 @@ public ModuleClient(String connectionString, IotHubClientProtocol protocol) thro\n         commonConstructorVerifications(protocol, this.config);\n     }\n \n+    /**\n+     * Constructor for a ModuleClient instance.\n+     * @param connectionString The connection string for the edge module to connect to. Must be in format\n+     *                         HostName=xxxx;deviceId=xxxx;SharedAccessKey=\n+     *                         xxxx;moduleId=xxxx;\n+     *\n+     *                         or\n+     *\n+     *                         HostName=xxxx;DeviceId=xxxx;SharedAccessKey=\n+     *                         xxxx;moduleId=xxxx;HostNameGateway=xxxx\n+     * @param protocol The protocol to use when communicating with the module\n+     * @param clientOptions The options that allow configuration of the module client instance during initialization\n+     * @throws ModuleClientException if an exception is encountered when parsing the connection string\n+     * @throws UnsupportedOperationException if using any protocol besides MQTT, if the connection string is missing\n+     * the \"moduleId\" field, or if the connection string uses x509\n+     * @throws IllegalArgumentException if the provided connection string is null or empty, or if the provided protocol is null\n+     * @throws URISyntaxException if the connection string cannot be parsed for a valid hostname\n+     */\n+    public ModuleClient(String connectionString, IotHubClientProtocol protocol, ClientOptions clientOptions) throws ModuleClientException, IllegalArgumentException, UnsupportedOperationException, URISyntaxException", "originalCommit": "8fac003d3bac31d608c5004b8927232bece8dce9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NjA5NQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/811#discussion_r441746095", "bodyText": "As I had learned from Tim, this is one of those constructors we would like to deprecate going forward. @timtay-microsoft Can you add more insight to this? Or correct me if that's not right.", "author": "bikamani", "createdAt": "2020-06-17T18:30:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY1NDQ2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NzkyNg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/811#discussion_r441747926", "bodyText": "The constructor that takes the certificates as strings is the one I plan to deprecate. The one that takes SSLContext should have an overload that takes the client options. See my comment below for details", "author": "timtay-microsoft", "createdAt": "2020-06-17T18:34:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY1NDQ2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3MTA4Ng==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/811#discussion_r441771086", "bodyText": "That one is already covered by this overload: public ModuleClient(String connectionString, IotHubClientProtocol protocol, ClientOptions clientOptions)\nsslcontext is part of clientOptions.", "author": "bikamani", "createdAt": "2020-06-17T19:05:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY1NDQ2OQ=="}], "type": "inlineReview", "revised_code": null}]}