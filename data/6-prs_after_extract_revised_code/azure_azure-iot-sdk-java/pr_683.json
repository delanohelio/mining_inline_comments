{"pr_number": 683, "pr_title": "Refactor according to coding style, compare json objects in E2E", "pr_createdAt": "2020-01-18T02:27:21Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/683", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2NTU3NA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/683#discussion_r370265574", "bodyText": "move it up into try block", "author": "davilu", "createdAt": "2020-01-23T17:51:00Z", "path": "digital-twin/e2e-tests/digital-twin-e2e-tests-common/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/e2e/simulator/TestInterfaceInstance2.java", "diffHunk": "@@ -83,10 +86,16 @@ public void onRegistered() {\n     @Override\n     protected void onPropertyUpdate(@NonNull DigitalTwinPropertyUpdate digitalTwinPropertyUpdate) {\n         log.trace(\"Property received: name={}, desired value={}, version={}\", digitalTwinPropertyUpdate.getPropertyName(), digitalTwinPropertyUpdate.getPropertyDesired(), digitalTwinPropertyUpdate.getDesiredVersion());\n-        propertyUpdatesReceived.put(digitalTwinPropertyUpdate.getPropertyName(), digitalTwinPropertyUpdate.getPropertyDesired());\n+        JsonNode desiredProperty = null;\n+        try {\n+            desiredProperty = objectMapper.readTree(digitalTwinPropertyUpdate.getPropertyDesired());\n+        } catch (IOException e) {\n+            log.error(\"Exception thrown while converting desired property update to Json Node: \", e);\n+        }\n+        propertyUpdatesReceived.put(digitalTwinPropertyUpdate.getPropertyName(), desiredProperty);", "originalCommit": "082f40257841bf324d8a55e7bb2001c8ea258157", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwNjkwNw==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/683#discussion_r370306907", "bodyText": "Why would we need to wrap a put operation within a try-catch block?", "author": "abhipsaMisra", "createdAt": "2020-01-23T19:19:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI2NTU3NA=="}], "type": "inlineReview", "revised_code": {"commit": "67a9d82e1468765dde3f8c0d798c1b4277cf29ad", "chunk": "diff --git a/digital-twin/e2e-tests/digital-twin-e2e-tests-common/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/e2e/simulator/TestInterfaceInstance2.java b/digital-twin/e2e-tests/digital-twin-e2e-tests-common/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/e2e/simulator/TestComponent2.java\nsimilarity index 88%\nrename from digital-twin/e2e-tests/digital-twin-e2e-tests-common/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/e2e/simulator/TestInterfaceInstance2.java\nrename to digital-twin/e2e-tests/digital-twin-e2e-tests-common/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/e2e/simulator/TestComponent2.java\nindex c198f0b1e..967d9f0f7 100644\n--- a/digital-twin/e2e-tests/digital-twin-e2e-tests-common/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/e2e/simulator/TestInterfaceInstance2.java\n+++ b/digital-twin/e2e-tests/digital-twin-e2e-tests-common/src/main/java/com/microsoft/azure/sdk/iot/digitaltwin/e2e/simulator/TestComponent2.java\n\n@@ -86,16 +76,10 @@ public class TestInterfaceInstance2 extends AbstractDigitalTwinInterfaceClient {\n     @Override\n     protected void onPropertyUpdate(@NonNull DigitalTwinPropertyUpdate digitalTwinPropertyUpdate) {\n         log.trace(\"Property received: name={}, desired value={}, version={}\", digitalTwinPropertyUpdate.getPropertyName(), digitalTwinPropertyUpdate.getPropertyDesired(), digitalTwinPropertyUpdate.getDesiredVersion());\n-        JsonNode desiredProperty = null;\n-        try {\n-            desiredProperty = objectMapper.readTree(digitalTwinPropertyUpdate.getPropertyDesired());\n-        } catch (IOException e) {\n-            log.error(\"Exception thrown while converting desired property update to Json Node: \", e);\n-        }\n-        propertyUpdatesReceived.put(digitalTwinPropertyUpdate.getPropertyName(), desiredProperty);\n+        propertyUpdatesReceived.put(digitalTwinPropertyUpdate.getPropertyName(), digitalTwinPropertyUpdate.getPropertyDesired());\n     }\n \n-    public boolean verifyIfPropertyUpdateWasReceived(String expectedPropertyName, JsonNode expectedValue) {\n+    public boolean verifyIfPropertyUpdateWasReceived(String expectedPropertyName, String expectedValue) {\n         long startTime = System.currentTimeMillis();\n         while (System.currentTimeMillis() < startTime + MAX_WAIT_FOR_PROPERTY_UPDATE_IN_SECONDS * 1000) {\n             if (propertyUpdatesReceived.entrySet().stream()\n"}}, {"oid": "67a9d82e1468765dde3f8c0d798c1b4277cf29ad", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/67a9d82e1468765dde3f8c0d798c1b4277cf29ad", "message": "refactor: update the code style and reorganize imports", "committedDate": "2020-02-10T20:19:34Z", "type": "commit"}, {"oid": "ecee424237d9f937150f1ce02950a2950aab84f1", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/ecee424237d9f937150f1ce02950a2950aab84f1", "message": "fix(e2e-tests): Have all digital twin tests validate against JsonNode returned", "committedDate": "2020-02-10T21:20:21Z", "type": "commit"}, {"oid": "ecee424237d9f937150f1ce02950a2950aab84f1", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/ecee424237d9f937150f1ce02950a2950aab84f1", "message": "fix(e2e-tests): Have all digital twin tests validate against JsonNode returned", "committedDate": "2020-02-10T21:20:21Z", "type": "forcePushed"}, {"oid": "fca15d06ba8f67f4b456ee49ac564a53ff2d502b", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/fca15d06ba8f67f4b456ee49ac564a53ff2d502b", "message": "fix(e2e-tests): Ignore Model GET API tests which are currently failing", "committedDate": "2020-02-11T00:04:23Z", "type": "commit"}]}