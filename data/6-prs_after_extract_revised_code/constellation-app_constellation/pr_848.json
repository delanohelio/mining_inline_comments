{"pr_number": 848, "pr_title": "Performance/838 renderer speed", "pr_createdAt": "2020-09-29T07:00:55Z", "pr_url": "https://github.com/constellation-app/constellation/pull/848", "timeline": [{"oid": "d55f1a802ca28624e5706b12c225079b5835f661", "url": "https://github.com/constellation-app/constellation/commit/d55f1a802ca28624e5706b12c225079b5835f661", "message": ":art: :racehorse: Added updateModCounts method\n\nAdded method updateModCounts to allow for the modification counters to\nbe updated without triggering visual updates. This will be used when\nopening a graph for the first time top avoid unnecessary visual updates.\nGeneralised other update methods to allow for a graph argument to\nfacilitate this.", "committedDate": "2020-09-29T05:07:10Z", "type": "commit"}, {"oid": "5f35f14104e15a48ed654fe4799fc5ced6fbcf52", "url": "https://github.com/constellation-app/constellation/commit/5f35f14104e15a48ed654fe4799fc5ced6fbcf52", "message": ":art: :racehorse: Update modcounts of visualAccess when opening graph\n\nNow updates the modcounts of the GraphVisualAccess when constructing a \nvisualManager. This allows for the updateFromIndigenousChanges listener\nto be added without triggering every single visualUpdate.", "committedDate": "2020-09-29T05:09:22Z", "type": "commit"}, {"oid": "e2a31dec78606f4d2d90ff9bb98998b2d13725df", "url": "https://github.com/constellation-app/constellation/commit/e2a31dec78606f4d2d90ff9bb98998b2d13725df", "message": ":art: :racehorse: Added refreshVisualProcessor call\n\nAdded refreshVisualProcessor call to perform initial render of graph\nto the GLCanavas. This is required now that visualUpdates will not\nautomatically be triggered when opening a new graph. Testing shows this\nto be more performant. This makes sense as now it is performing the\nminimal number of visual updates that will render the graph to the \nscreen whereas perviously it would do more than required (duplicates).", "committedDate": "2020-09-29T05:11:44Z", "type": "commit"}, {"oid": "e95838292f549b4df7858225a90f23aa6e44d4d8", "url": "https://github.com/constellation-app/constellation/commit/e95838292f549b4df7858225a90f23aa6e44d4d8", "message": ":art: Deleted accidental blank line.", "committedDate": "2020-09-29T05:28:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzg3NDk3Mg==", "url": "https://github.com/constellation-app/constellation/pull/848#discussion_r497874972", "bodyText": "final ReadableGraph (also, whitespace).", "author": "cygnus-x-1", "createdAt": "2020-10-01T00:25:26Z", "path": "CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/GLInteractiveVisualManagerFactory.java", "diffHunk": "@@ -44,7 +44,10 @@\n \n     @Override\n     public VisualManager constructVisualManager(Graph graph) {\n-        final VisualAccess access = new GraphVisualAccess(graph);\n+        final GraphVisualAccess access = new GraphVisualAccess(graph);\n+        try(ReadableGraph rg = graph.getReadableGraph()) {", "originalCommit": "e95838292f549b4df7858225a90f23aa6e44d4d8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7ce24a82c3a9d15b2e92b51d31e3076fb67ad675", "chunk": "diff --git a/CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/GLInteractiveVisualManagerFactory.java b/CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/GLInteractiveVisualManagerFactory.java\nindex 2eb96d8ef..7e0553f28 100644\n--- a/CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/GLInteractiveVisualManagerFactory.java\n+++ b/CoreInteractiveGraph/src/au/gov/asd/tac/constellation/graph/interaction/visual/GLInteractiveVisualManagerFactory.java\n\n@@ -45,7 +45,7 @@ public class GLInteractiveVisualManagerFactory extends GraphVisualManagerFactory\n     @Override\n     public VisualManager constructVisualManager(Graph graph) {\n         final GraphVisualAccess access = new GraphVisualAccess(graph);\n-        try(ReadableGraph rg = graph.getReadableGraph()) {\n+        try(final ReadableGraph rg = graph.getReadableGraph()) {\n             access.updateModCounts(rg);\n         }\n         final Preferences prefs = NbPreferences.forModule(DeveloperPreferenceKeys.class);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzg3NTE1Nw==", "url": "https://github.com/constellation-app/constellation/pull/848#discussion_r497875157", "bodyText": "final ReadableGraph (all throughout this file).", "author": "cygnus-x-1", "createdAt": "2020-10-01T00:25:42Z", "path": "CoreVisualGraph/src/au/gov/asd/tac/constellation/graph/visual/framework/GraphVisualAccess.java", "diffHunk": "@@ -617,116 +617,118 @@ private void recalculateVisualAttributes(final GraphReadMethods rg) {\n         transactionWidth = VisualConcept.TransactionAttribute.WIDTH.get(rg);\n     }\n \n-    private void recalculateVertexColorAttribute() {\n+    private void recalculateVertexColorAttribute(ReadableGraph readGraph) {", "originalCommit": "e95838292f549b4df7858225a90f23aa6e44d4d8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7ce24a82c3a9d15b2e92b51d31e3076fb67ad675", "chunk": "diff --git a/CoreVisualGraph/src/au/gov/asd/tac/constellation/graph/visual/framework/GraphVisualAccess.java b/CoreVisualGraph/src/au/gov/asd/tac/constellation/graph/visual/framework/GraphVisualAccess.java\nindex c2d69cdd1..920adff76 100644\n--- a/CoreVisualGraph/src/au/gov/asd/tac/constellation/graph/visual/framework/GraphVisualAccess.java\n+++ b/CoreVisualGraph/src/au/gov/asd/tac/constellation/graph/visual/framework/GraphVisualAccess.java\n\n@@ -617,7 +617,7 @@ public final class GraphVisualAccess implements VisualAccess {\n         transactionWidth = VisualConcept.TransactionAttribute.WIDTH.get(rg);\n     }\n \n-    private void recalculateVertexColorAttribute(ReadableGraph readGraph) {\n+    private void recalculateVertexColorAttribute(final ReadableGraph readGraph) {\n         int referredAttr = Graph.NOT_FOUND;\n         if (graphVertexColorRef != Graph.NOT_FOUND) {\n             final String colorAttrName = readGraph.getStringValue(graphVertexColorRef, 0);\n"}}, {"oid": "7ce24a82c3a9d15b2e92b51d31e3076fb67ad675", "url": "https://github.com/constellation-app/constellation/commit/7ce24a82c3a9d15b2e92b51d31e3076fb67ad675", "message": ":art: Made variables final where appropriate as per feedback.", "committedDate": "2020-10-02T00:26:59Z", "type": "commit"}, {"oid": "57b7f50e554604767504ce605e659e4e9c70eba9", "url": "https://github.com/constellation-app/constellation/commit/57b7f50e554604767504ce605e659e4e9c70eba9", "message": ":racehorse: Moved rebuild from dispose to reshape.\n\nMoved rebuild from dispose method to reshape method. This will stop a\nrebuild from being triggered when a graph is closed and mean we can\nremove the refresh from VisualGraphTopCOmponent as opening a graph\ncalls reshape (but not dispose).", "committedDate": "2020-10-02T02:49:23Z", "type": "commit"}, {"oid": "b8c148542ba0ca83d9f47049f320658f4b18c969", "url": "https://github.com/constellation-app/constellation/commit/b8c148542ba0ca83d9f47049f320658f4b18c969", "message": ":racehorse: Moved rebuild from reshape to init.\n\nMoved rebuild from reshape method to init method it must be called \nafter a dispose to render the graph back to the screen (where the graph\nhasn't actually been closed). An init must always be called in this\nscenario.", "committedDate": "2020-10-02T05:42:11Z", "type": "commit"}]}