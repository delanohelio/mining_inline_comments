{"pr_number": 782, "pr_title": "Feature/layers view keyboard shortcuts", "pr_createdAt": "2020-08-14T06:01:57Z", "pr_url": "https://github.com/constellation-app/constellation/pull/782", "timeline": [{"oid": "1bccd1a7e52db60d0930f76470221cefa306956d", "url": "https://github.com/constellation-app/constellation/commit/1bccd1a7e52db60d0930f76470221cefa306956d", "message": "New Layer shortcut", "committedDate": "2020-08-14T05:01:23Z", "type": "commit"}, {"oid": "e14bcc6e74d57b9940f76c802a36df5dd0432ea7", "url": "https://github.com/constellation-app/constellation/commit/e14bcc6e74d57b9940f76c802a36df5dd0432ea7", "message": "Added the Deselect all layers plugin", "committedDate": "2020-08-14T05:54:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE3OTMyNA==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471179324", "bodyText": "Add a final", "author": "aldebaran30701", "createdAt": "2020-08-17T00:21:24Z", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers;\n+\n+import au.gov.asd.tac.constellation.graph.manager.GraphManager;\n+import au.gov.asd.tac.constellation.plugins.PluginExecution;\n+import au.gov.asd.tac.constellation.views.layers.utilities.DeselectAllLayersPlugin;\n+import au.gov.asd.tac.constellation.views.layers.utilities.NewLayerPlugin;\n+import java.awt.event.ActionEvent;\n+import javax.swing.AbstractAction;\n+import org.openide.awt.ActionID;\n+import org.openide.awt.ActionReference;\n+import org.openide.awt.ActionReferences;\n+import org.openide.awt.ActionRegistration;\n+import org.openide.util.NbBundle;\n+\n+/**\n+ * Defines the keyboard shortcuts for use with the Layers view\n+ *\n+ * @author formalhaut69\n+ */\n+@ActionID(category = \"Options\", id = \"au.gov.asd.tac.constellation.views.layersviewshortcuts\")\n+@ActionRegistration(displayName = \"#CTL_LayersViewShortcuts\", surviveFocusChange = true)\n+@ActionReferences({\n+    @ActionReference(path = \"Shortcuts\", name = \"CA-S\"),\n+    @ActionReference(path = \"Shortcuts\", name = \"CA-L\")\n+})\n+@NbBundle.Messages(\"CTL_LayersViewShortcuts=Layers View: Shortcuts\")\n+public class LayersViewShortcuts extends AbstractAction{\n+\n+    @Override\n+    public void actionPerformed(ActionEvent e) {\n+\n+        String hotkey = e.getActionCommand();", "originalCommit": "e14bcc6e74d57b9940f76c802a36df5dd0432ea7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "afb0835d9b03dceee150cdfcf9cd523619f36347", "chunk": "diff --git a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java\nindex c07551448..047440f84 100644\n--- a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java\n+++ b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java\n\n@@ -45,10 +45,13 @@ public class LayersViewShortcuts extends AbstractAction{\n     public void actionPerformed(ActionEvent e) {\n \n         String hotkey = e.getActionCommand();\n-        if (hotkey.equals(\"CA-L\")) {\n-            PluginExecution.withPlugin(new NewLayerPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n-        } else {\n-            PluginExecution.withPlugin(new DeselectAllLayersPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+        switch (hotkey) {\n+            case \"CA-L\":\n+                PluginExecution.withPlugin(new NewLayerPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+                break;\n+            case \"CA-S\":\n+                PluginExecution.withPlugin(new DeselectAllLayersPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+                break;\n         }\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE3OTQwMQ==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471179401", "bodyText": "else if hotkey.equals(\"CA-S\") to be defensive", "author": "aldebaran30701", "createdAt": "2020-08-17T00:21:46Z", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers;\n+\n+import au.gov.asd.tac.constellation.graph.manager.GraphManager;\n+import au.gov.asd.tac.constellation.plugins.PluginExecution;\n+import au.gov.asd.tac.constellation.views.layers.utilities.DeselectAllLayersPlugin;\n+import au.gov.asd.tac.constellation.views.layers.utilities.NewLayerPlugin;\n+import java.awt.event.ActionEvent;\n+import javax.swing.AbstractAction;\n+import org.openide.awt.ActionID;\n+import org.openide.awt.ActionReference;\n+import org.openide.awt.ActionReferences;\n+import org.openide.awt.ActionRegistration;\n+import org.openide.util.NbBundle;\n+\n+/**\n+ * Defines the keyboard shortcuts for use with the Layers view\n+ *\n+ * @author formalhaut69\n+ */\n+@ActionID(category = \"Options\", id = \"au.gov.asd.tac.constellation.views.layersviewshortcuts\")\n+@ActionRegistration(displayName = \"#CTL_LayersViewShortcuts\", surviveFocusChange = true)\n+@ActionReferences({\n+    @ActionReference(path = \"Shortcuts\", name = \"CA-S\"),\n+    @ActionReference(path = \"Shortcuts\", name = \"CA-L\")\n+})\n+@NbBundle.Messages(\"CTL_LayersViewShortcuts=Layers View: Shortcuts\")\n+public class LayersViewShortcuts extends AbstractAction{\n+\n+    @Override\n+    public void actionPerformed(ActionEvent e) {\n+\n+        String hotkey = e.getActionCommand();\n+        if (hotkey.equals(\"CA-L\")) {\n+            PluginExecution.withPlugin(new NewLayerPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+        } else {", "originalCommit": "e14bcc6e74d57b9940f76c802a36df5dd0432ea7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "afb0835d9b03dceee150cdfcf9cd523619f36347", "chunk": "diff --git a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java\nindex c07551448..047440f84 100644\n--- a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java\n+++ b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java\n\n@@ -45,10 +45,13 @@ public class LayersViewShortcuts extends AbstractAction{\n     public void actionPerformed(ActionEvent e) {\n \n         String hotkey = e.getActionCommand();\n-        if (hotkey.equals(\"CA-L\")) {\n-            PluginExecution.withPlugin(new NewLayerPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n-        } else {\n-            PluginExecution.withPlugin(new DeselectAllLayersPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+        switch (hotkey) {\n+            case \"CA-L\":\n+                PluginExecution.withPlugin(new NewLayerPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+                break;\n+            case \"CA-S\":\n+                PluginExecution.withPlugin(new DeselectAllLayersPlugin()).executeLater(GraphManager.getDefault().getActiveGraph());\n+                break;\n         }\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE3OTkyMA==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471179920", "bodyText": "Final modifier here", "author": "aldebaran30701", "createdAt": "2020-08-17T00:25:24Z", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java", "diffHunk": "@@ -0,0 +1,67 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers.utilities;\n+\n+import au.gov.asd.tac.constellation.graph.Graph;\n+import au.gov.asd.tac.constellation.graph.GraphWriteMethods;\n+import au.gov.asd.tac.constellation.plugins.PluginException;\n+import au.gov.asd.tac.constellation.plugins.PluginInteraction;\n+import au.gov.asd.tac.constellation.plugins.parameters.PluginParameters;\n+import au.gov.asd.tac.constellation.plugins.templates.SimpleEditPlugin;\n+import au.gov.asd.tac.constellation.views.layers.layer.LayerDescription;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewConcept;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewState;\n+import java.util.List;\n+import org.apache.commons.lang3.StringUtils;\n+\n+/**\n+ * A plugin that deselects all layers in the layers view\n+ *\n+ * @author formalhaut69\n+ */\n+public class DeselectAllLayersPlugin extends SimpleEditPlugin {\n+\n+    @Override\n+    protected void edit(GraphWriteMethods graph, PluginInteraction interaction, PluginParameters parameters) throws InterruptedException, PluginException {\n+        final int layersViewStateAttributeId = LayersViewConcept.MetaAttribute.LAYERS_VIEW_STATE.ensure(graph);\n+        if (layersViewStateAttributeId == Graph.NOT_FOUND) {\n+            return;\n+        }\n+\n+        LayersViewState currentState = graph.getObjectValue(layersViewStateAttributeId, 0);\n+        List<LayerDescription> layers = currentState.getLayers();", "originalCommit": "e14bcc6e74d57b9940f76c802a36df5dd0432ea7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3dd829666e90ebc0072e936a88bb60ba4450e5ed", "chunk": "diff --git a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java\nindex 33b752c7a..e81e2d6e2 100644\n--- a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java\n+++ b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java\n\n@@ -42,7 +42,7 @@ public class DeselectAllLayersPlugin extends SimpleEditPlugin {\n         }\n \n         LayersViewState currentState = graph.getObjectValue(layersViewStateAttributeId, 0);\n-        List<LayerDescription> layers = currentState.getLayers();\n+        final List<LayerDescription> layers = currentState.getLayers();\n         layers.forEach((layer) -> {\n             layer.setCurrentLayerVisibility(false);\n         });\n"}}, {"oid": "afb0835d9b03dceee150cdfcf9cd523619f36347", "url": "https://github.com/constellation-app/constellation/commit/afb0835d9b03dceee150cdfcf9cd523619f36347", "message": "Updated with a switch statement", "committedDate": "2020-08-17T00:33:39Z", "type": "commit"}, {"oid": "3dd829666e90ebc0072e936a88bb60ba4450e5ed", "url": "https://github.com/constellation-app/constellation/commit/3dd829666e90ebc0072e936a88bb60ba4450e5ed", "message": "added final modifiers", "committedDate": "2020-08-17T00:39:48Z", "type": "commit"}, {"oid": "8f9530a052e57d5ed8355bc4a99bf13972817baa", "url": "https://github.com/constellation-app/constellation/commit/8f9530a052e57d5ed8355bc4a99bf13972817baa", "message": "Added test cases for new plugins", "committedDate": "2020-08-17T06:47:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2MzgxOA==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471863818", "bodyText": "It visibility, query and description should be passable to this method.", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:36:39Z", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/state/LayersViewState.java", "diffHunk": "@@ -55,6 +57,14 @@ public void addLayer(final LayerDescription layer) {\n         layers.add(layer);\n     }\n \n+    public void addLayer() {\n+        if (layers.size() < 32) {\n+            layers.add(new LayerDescription(layers.size() + 1, false, \"\", \"\"));", "originalCommit": "8f9530a052e57d5ed8355bc4a99bf13972817baa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "69d841397fa8cf3a9c6644532302162b20998421", "chunk": "diff --git a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/state/LayersViewState.java b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/state/LayersViewState.java\nindex 3b80c5ca8..6d736b107 100644\n--- a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/state/LayersViewState.java\n+++ b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/state/LayersViewState.java\n\n@@ -59,12 +59,16 @@ public class LayersViewState {\n \n     public void addLayer() {\n         if (layers.size() < 32) {\n-            layers.add(new LayerDescription(layers.size() + 1, false, \"\", \"\"));\n+            addLayer(false, \"\", \"\");\n         } else {\n             NotifyDisplayer.display(\"You cannot have more than 32 layers open\", NotifyDescriptor.WARNING_MESSAGE);\n         }\n     }\n \n+    public void addLayer(final boolean visibility, final String name, final String description) {\n+        layers.add(new LayerDescription(layers.size() + 1, visibility, name, description));\n+    }\n+\n     public void setLayers(final List<LayerDescription> layers) {\n         this.layers.clear();\n         this.layers.addAll(layers);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2Mzk3Nw==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471863977", "bodyText": "final", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:37:11Z", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java", "diffHunk": "@@ -0,0 +1,67 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers.utilities;\n+\n+import au.gov.asd.tac.constellation.graph.Graph;\n+import au.gov.asd.tac.constellation.graph.GraphWriteMethods;\n+import au.gov.asd.tac.constellation.plugins.PluginException;\n+import au.gov.asd.tac.constellation.plugins.PluginInteraction;\n+import au.gov.asd.tac.constellation.plugins.parameters.PluginParameters;\n+import au.gov.asd.tac.constellation.plugins.templates.SimpleEditPlugin;\n+import au.gov.asd.tac.constellation.views.layers.layer.LayerDescription;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewConcept;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewState;\n+import java.util.List;\n+import org.apache.commons.lang3.StringUtils;\n+\n+/**\n+ * A plugin that deselects all layers in the layers view\n+ *\n+ * @author formalhaut69\n+ */\n+public class DeselectAllLayersPlugin extends SimpleEditPlugin {\n+\n+    @Override\n+    protected void edit(GraphWriteMethods graph, PluginInteraction interaction, PluginParameters parameters) throws InterruptedException, PluginException {\n+        final int layersViewStateAttributeId = LayersViewConcept.MetaAttribute.LAYERS_VIEW_STATE.ensure(graph);\n+        if (layersViewStateAttributeId == Graph.NOT_FOUND) {\n+            return;\n+        }\n+\n+        LayersViewState currentState = graph.getObjectValue(layersViewStateAttributeId, 0);", "originalCommit": "8f9530a052e57d5ed8355bc4a99bf13972817baa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU1MzA5Mg==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r472553092", "bodyText": "This can't be made final because its modified on line 53.", "author": "formalhaut69", "createdAt": "2020-08-18T23:42:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2Mzk3Nw=="}], "type": "inlineReview", "revised_code": {"commit": "69d841397fa8cf3a9c6644532302162b20998421", "chunk": "diff --git a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java\nindex e81e2d6e2..7e618e4f6 100644\n--- a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java\n+++ b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java\n\n@@ -35,7 +35,7 @@ import org.apache.commons.lang3.StringUtils;\n public class DeselectAllLayersPlugin extends SimpleEditPlugin {\n \n     @Override\n-    protected void edit(GraphWriteMethods graph, PluginInteraction interaction, PluginParameters parameters) throws InterruptedException, PluginException {\n+    protected void edit(final GraphWriteMethods graph, final PluginInteraction interaction, final PluginParameters parameters) throws InterruptedException, PluginException {\n         final int layersViewStateAttributeId = LayersViewConcept.MetaAttribute.LAYERS_VIEW_STATE.ensure(graph);\n         if (layersViewStateAttributeId == Graph.NOT_FOUND) {\n             return;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2NDAwOQ==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471864009", "bodyText": "finals", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:37:21Z", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java", "diffHunk": "@@ -0,0 +1,67 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers.utilities;\n+\n+import au.gov.asd.tac.constellation.graph.Graph;\n+import au.gov.asd.tac.constellation.graph.GraphWriteMethods;\n+import au.gov.asd.tac.constellation.plugins.PluginException;\n+import au.gov.asd.tac.constellation.plugins.PluginInteraction;\n+import au.gov.asd.tac.constellation.plugins.parameters.PluginParameters;\n+import au.gov.asd.tac.constellation.plugins.templates.SimpleEditPlugin;\n+import au.gov.asd.tac.constellation.views.layers.layer.LayerDescription;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewConcept;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewState;\n+import java.util.List;\n+import org.apache.commons.lang3.StringUtils;\n+\n+/**\n+ * A plugin that deselects all layers in the layers view\n+ *\n+ * @author formalhaut69\n+ */\n+public class DeselectAllLayersPlugin extends SimpleEditPlugin {\n+\n+    @Override\n+    protected void edit(GraphWriteMethods graph, PluginInteraction interaction, PluginParameters parameters) throws InterruptedException, PluginException {", "originalCommit": "8f9530a052e57d5ed8355bc4a99bf13972817baa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "69d841397fa8cf3a9c6644532302162b20998421", "chunk": "diff --git a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java\nindex e81e2d6e2..7e618e4f6 100644\n--- a/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java\n+++ b/CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPlugin.java\n\n@@ -35,7 +35,7 @@ import org.apache.commons.lang3.StringUtils;\n public class DeselectAllLayersPlugin extends SimpleEditPlugin {\n \n     @Override\n-    protected void edit(GraphWriteMethods graph, PluginInteraction interaction, PluginParameters parameters) throws InterruptedException, PluginException {\n+    protected void edit(final GraphWriteMethods graph, final PluginInteraction interaction, final PluginParameters parameters) throws InterruptedException, PluginException {\n         final int layersViewStateAttributeId = LayersViewConcept.MetaAttribute.LAYERS_VIEW_STATE.ensure(graph);\n         if (layersViewStateAttributeId == Graph.NOT_FOUND) {\n             return;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2NDAzMA==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471864030", "bodyText": "finals", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:37:27Z", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/NewLayerPlugin.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers.utilities;\n+\n+import au.gov.asd.tac.constellation.graph.Graph;\n+import au.gov.asd.tac.constellation.graph.GraphWriteMethods;\n+import au.gov.asd.tac.constellation.plugins.PluginInteraction;\n+import au.gov.asd.tac.constellation.plugins.parameters.PluginParameters;\n+import au.gov.asd.tac.constellation.plugins.templates.SimpleEditPlugin;\n+import au.gov.asd.tac.constellation.views.layers.layer.LayerDescription;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewConcept;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewState;\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.apache.commons.lang3.StringUtils;\n+\n+/**\n+ * A plugin that creates a new layer in the layers view\n+ *\n+ * @author formalhaut69\n+ */\n+public class NewLayerPlugin extends SimpleEditPlugin {\n+\n+    @Override\n+    public void edit(final GraphWriteMethods graph, final PluginInteraction interaction, final PluginParameters parameters) {", "originalCommit": "8f9530a052e57d5ed8355bc4a99bf13972817baa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2NDA1Mg==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471864052", "bodyText": "final", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:37:34Z", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/utilities/NewLayerPlugin.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers.utilities;\n+\n+import au.gov.asd.tac.constellation.graph.Graph;\n+import au.gov.asd.tac.constellation.graph.GraphWriteMethods;\n+import au.gov.asd.tac.constellation.plugins.PluginInteraction;\n+import au.gov.asd.tac.constellation.plugins.parameters.PluginParameters;\n+import au.gov.asd.tac.constellation.plugins.templates.SimpleEditPlugin;\n+import au.gov.asd.tac.constellation.views.layers.layer.LayerDescription;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewConcept;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewState;\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.apache.commons.lang3.StringUtils;\n+\n+/**\n+ * A plugin that creates a new layer in the layers view\n+ *\n+ * @author formalhaut69\n+ */\n+public class NewLayerPlugin extends SimpleEditPlugin {\n+\n+    @Override\n+    public void edit(final GraphWriteMethods graph, final PluginInteraction interaction, final PluginParameters parameters) {\n+        if (graph == null) {\n+            return;\n+        }\n+\n+        final int layersViewStateAttributeId = LayersViewConcept.MetaAttribute.LAYERS_VIEW_STATE.ensure(graph);\n+        if (layersViewStateAttributeId == Graph.NOT_FOUND) {\n+            return;\n+        }\n+\n+        LayersViewState currentState = graph.getObjectValue(layersViewStateAttributeId, 0);", "originalCommit": "8f9530a052e57d5ed8355bc4a99bf13972817baa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2NDE3NA==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471864174", "bodyText": "final", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:38:01Z", "path": "CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPluginNGTest.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers.utilities;\n+\n+import au.gov.asd.tac.constellation.graph.Graph;\n+import au.gov.asd.tac.constellation.graph.LayersConcept;\n+import au.gov.asd.tac.constellation.graph.StoreGraph;\n+import au.gov.asd.tac.constellation.plugins.PluginException;\n+import au.gov.asd.tac.constellation.plugins.PluginExecution;\n+import au.gov.asd.tac.constellation.views.layers.layer.LayerDescription;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewConcept;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewState;\n+import java.util.List;\n+import static org.testng.Assert.assertTrue;\n+import static org.testng.Assert.fail;\n+import org.testng.annotations.Test;\n+\n+/**\n+ *\n+ * @author formalhaut69\n+ */\n+public class DeselectAllLayersPluginNGTest {\n+\n+    private int layerMaskV, layerMaskT, layerVisibilityV, layerVisibilityT;\n+    private StoreGraph graph;\n+\n+    public void setupGraph() {\n+        graph = new StoreGraph();\n+\n+        // Create LayerMask attributes\n+        layerMaskV = LayersConcept.VertexAttribute.LAYER_MASK.ensure(graph);\n+        if (layerMaskV == Graph.NOT_FOUND) {\n+            fail();\n+        }\n+        layerMaskT = LayersConcept.TransactionAttribute.LAYER_MASK.ensure(graph);\n+        if (layerMaskT == Graph.NOT_FOUND) {\n+            fail();\n+        }\n+\n+        // Create LayerVisilibity Attributes\n+        layerVisibilityV = LayersConcept.VertexAttribute.LAYER_VISIBILITY.ensure(graph);\n+        if (layerVisibilityV == Graph.NOT_FOUND) {\n+            fail();\n+        }\n+        layerVisibilityT = LayersConcept.TransactionAttribute.LAYER_VISIBILITY.ensure(graph);\n+        if (layerVisibilityT == Graph.NOT_FOUND) {\n+            fail();\n+        }\n+    }\n+\n+    @Test\n+    public void testDeselectAllLayersPlugin() throws InterruptedException, PluginException {\n+        setupGraph();\n+\n+        PluginExecution.withPlugin(new NewLayerPlugin()).executeNow(graph);\n+\n+        final int layersViewStateAttributeId = LayersViewConcept.MetaAttribute.LAYERS_VIEW_STATE.get(graph);\n+\n+        assertTrue(layersViewStateAttributeId != Graph.NOT_FOUND);\n+        LayersViewState currentState = graph.getObjectValue(layersViewStateAttributeId, 0);", "originalCommit": "8f9530a052e57d5ed8355bc4a99bf13972817baa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "69d841397fa8cf3a9c6644532302162b20998421", "chunk": "diff --git a/CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPluginNGTest.java b/CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPluginNGTest.java\nindex aef112b27..5628ce233 100644\n--- a/CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPluginNGTest.java\n+++ b/CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/DeselectAllLayersPluginNGTest.java\n\n@@ -70,7 +70,7 @@ public class DeselectAllLayersPluginNGTest {\n         final int layersViewStateAttributeId = LayersViewConcept.MetaAttribute.LAYERS_VIEW_STATE.get(graph);\n \n         assertTrue(layersViewStateAttributeId != Graph.NOT_FOUND);\n-        LayersViewState currentState = graph.getObjectValue(layersViewStateAttributeId, 0);\n+        final LayersViewState currentState = graph.getObjectValue(layersViewStateAttributeId, 0);\n         final List<LayerDescription> layers = currentState.getLayers();\n \n         layers.get(layers.size() - 1).setCurrentLayerVisibility(true);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2NDI2MA==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r471864260", "bodyText": "final", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:38:12Z", "path": "CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/NewLayerPluginNGTest.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers.utilities;\n+\n+import au.gov.asd.tac.constellation.graph.Graph;\n+import au.gov.asd.tac.constellation.graph.LayersConcept;\n+import au.gov.asd.tac.constellation.graph.StoreGraph;\n+import au.gov.asd.tac.constellation.plugins.PluginException;\n+import au.gov.asd.tac.constellation.plugins.PluginExecution;\n+import au.gov.asd.tac.constellation.views.layers.layer.LayerDescription;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewConcept;\n+import au.gov.asd.tac.constellation.views.layers.state.LayersViewState;\n+import java.util.List;\n+import static org.testng.Assert.assertTrue;\n+import static org.testng.Assert.fail;\n+import org.testng.annotations.Test;\n+\n+/**\n+ *\n+ * @author formalhaut69\n+ */\n+public class NewLayerPluginNGTest {\n+\n+    private int layerMaskV, layerMaskT, layerVisibilityV, layerVisibilityT;\n+    private StoreGraph graph;\n+\n+    public void setupGraph() {\n+        graph = new StoreGraph();\n+\n+        // Create LayerMask attributes\n+        layerMaskV = LayersConcept.VertexAttribute.LAYER_MASK.ensure(graph);\n+        if (layerMaskV == Graph.NOT_FOUND) {\n+            fail();\n+        }\n+        layerMaskT = LayersConcept.TransactionAttribute.LAYER_MASK.ensure(graph);\n+        if (layerMaskT == Graph.NOT_FOUND) {\n+            fail();\n+        }\n+\n+        // Create LayerVisilibity Attributes\n+        layerVisibilityV = LayersConcept.VertexAttribute.LAYER_VISIBILITY.ensure(graph);\n+        if (layerVisibilityV == Graph.NOT_FOUND) {\n+            fail();\n+        }\n+        layerVisibilityT = LayersConcept.TransactionAttribute.LAYER_VISIBILITY.ensure(graph);\n+        if (layerVisibilityT == Graph.NOT_FOUND) {\n+            fail();\n+        }\n+    }\n+\n+    @Test\n+    public void testDeselectAllLayersPlugin() throws InterruptedException, PluginException {\n+        setupGraph();\n+\n+        PluginExecution.withPlugin(new NewLayerPlugin()).executeNow(graph);\n+\n+        final int layersViewStateAttributeId = LayersViewConcept.MetaAttribute.LAYERS_VIEW_STATE.get(graph);\n+\n+        assertTrue(layersViewStateAttributeId != Graph.NOT_FOUND);\n+\n+        LayersViewState currentState = graph.getObjectValue(layersViewStateAttributeId, 0);", "originalCommit": "8f9530a052e57d5ed8355bc4a99bf13972817baa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "69d841397fa8cf3a9c6644532302162b20998421", "chunk": "diff --git a/CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/NewLayerPluginNGTest.java b/CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/NewLayerPluginNGTest.java\nindex 68007b74a..c24e67215 100644\n--- a/CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/NewLayerPluginNGTest.java\n+++ b/CoreLayersView/test/unit/src/au/gov/asd/tac/constellation/views/layers/utilities/NewLayerPluginNGTest.java\n\n@@ -62,7 +62,7 @@ public class NewLayerPluginNGTest {\n     }\n \n     @Test\n-    public void testDeselectAllLayersPlugin() throws InterruptedException, PluginException {\n+    public void testNewLayerPlugin() throws InterruptedException, PluginException {\n         setupGraph();\n \n         PluginExecution.withPlugin(new NewLayerPlugin()).executeNow(graph);\n"}}, {"oid": "69d841397fa8cf3a9c6644532302162b20998421", "url": "https://github.com/constellation-app/constellation/commit/69d841397fa8cf3a9c6644532302162b20998421", "message": "Requested changes", "committedDate": "2020-08-18T23:40:35Z", "type": "commit"}, {"oid": "0ba6d11487136893f592a29d8f133d3140dec145", "url": "https://github.com/constellation-app/constellation/commit/0ba6d11487136893f592a29d8f133d3140dec145", "message": "Added update to whats new", "committedDate": "2020-08-24T00:57:41Z", "type": "commit"}, {"oid": "61901fe98d6ccd5d2c993ebe2fafc5012502fe6e", "url": "https://github.com/constellation-app/constellation/commit/61901fe98d6ccd5d2c993ebe2fafc5012502fe6e", "message": "Merge branch 'master' into Feature/Layers-View-Shortcuts", "committedDate": "2020-08-24T01:02:29Z", "type": "commit"}, {"oid": "b99a7c5233f55ceb0a2238fd109ab02aa0abea0c", "url": "https://github.com/constellation-app/constellation/commit/b99a7c5233f55ceb0a2238fd109ab02aa0abea0c", "message": "Upadated Whats new and resolved merge conflict", "committedDate": "2020-08-24T01:05:40Z", "type": "commit"}, {"oid": "3ba3d12396b74588c329b523fde94d6025e61d1e", "url": "https://github.com/constellation-app/constellation/commit/3ba3d12396b74588c329b523fde94d6025e61d1e", "message": "Changed keyboard shortcut to Ctrl-Alt-D", "committedDate": "2020-08-25T06:07:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjgxNTA3Ng==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r476815076", "bodyText": "This probably should have been changed to \"CA-D\"", "author": "antares1470", "createdAt": "2020-08-25T22:48:43Z", "path": "CoreLayersView/src/au/gov/asd/tac/constellation/views/layers/LayersViewShortcuts.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*\n+ * Copyright 2010-2020 Australian Signals Directorate\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package au.gov.asd.tac.constellation.views.layers;\n+\n+import au.gov.asd.tac.constellation.graph.manager.GraphManager;\n+import au.gov.asd.tac.constellation.plugins.PluginExecution;\n+import au.gov.asd.tac.constellation.views.layers.utilities.DeselectAllLayersPlugin;\n+import au.gov.asd.tac.constellation.views.layers.utilities.NewLayerPlugin;\n+import java.awt.event.ActionEvent;\n+import javax.swing.AbstractAction;\n+import org.openide.awt.ActionID;\n+import org.openide.awt.ActionReference;\n+import org.openide.awt.ActionReferences;\n+import org.openide.awt.ActionRegistration;\n+import org.openide.util.NbBundle;\n+\n+/**\n+ * Defines the keyboard shortcuts for use with the Layers view\n+ *\n+ * @author formalhaut69\n+ */\n+@ActionID(category = \"Options\", id = \"au.gov.asd.tac.constellation.views.layersviewshortcuts\")\n+@ActionRegistration(displayName = \"#CTL_LayersViewShortcuts\", surviveFocusChange = true)\n+@ActionReferences({\n+    @ActionReference(path = \"Shortcuts\", name = \"CA-S\"),", "originalCommit": "3ba3d12396b74588c329b523fde94d6025e61d1e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjgxODYzNw==", "url": "https://github.com/constellation-app/constellation/pull/782#discussion_r476818637", "bodyText": "Oh, I see what I've done. I'll make a quick PR now", "author": "formalhaut69", "createdAt": "2020-08-25T22:53:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjgxNTA3Ng=="}], "type": "inlineReview", "revised_code": null}]}