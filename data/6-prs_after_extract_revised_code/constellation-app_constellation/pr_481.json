{"pr_number": 481, "pr_title": "Editing a date attribute by typing in a value does not update that attribute. #475", "pr_createdAt": "2020-05-03T23:44:44Z", "pr_url": "https://github.com/constellation-app/constellation/pull/481", "timeline": [{"oid": "3bf96bf4e3c013639e1c2d4872b7427acfd3f0c4", "url": "https://github.com/constellation-app/constellation/commit/3bf96bf4e3c013639e1c2d4872b7427acfd3f0c4", "message": "Fix for date attributes\n\nFix for date attributes not accepting typed values", "committedDate": "2020-05-03T23:43:40Z", "type": "commit"}, {"oid": "00e3f2e9ddbbec392d8ea5eb7b5ac86cc55d4c8e", "url": "https://github.com/constellation-app/constellation/commit/00e3f2e9ddbbec392d8ea5eb7b5ac86cc55d4c8e", "message": "Update to LocalDateTimeEditorFactory\n\nForgot to add this comment", "committedDate": "2020-05-03T23:46:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3OTE3MA==", "url": "https://github.com/constellation-app/constellation/pull/481#discussion_r419179170", "bodyText": "I would suggest using String.isBlank or even StringUtil.isBlank to additionally ignore null.", "author": "cygnus-x-1", "createdAt": "2020-05-04T00:20:28Z", "path": "CoreAttributeEditorView/src/au/gov/asd/tac/constellation/views/attributeeditor/editors/DateEditorFactory.java", "diffHunk": "@@ -69,9 +69,13 @@ protected LocalDate getValueFromControls() throws ControlsInvalidException {\n             if (noValueCheckBox.isSelected()) {\n                 return null;\n             }\n+            final String dateString = datePicker.getEditor().getText();\n+            //The converter is being used here to try and determine if the entered date is a LocalDate\n+            //It will throw an exception and won't convert it if its invalid\n             try {\n-                final String dateString = datePicker.getEditor().getText();\n-                datePicker.getConverter().fromString(dateString);\n+                if (!dateString.equals(\"\")) {", "originalCommit": "00e3f2e9ddbbec392d8ea5eb7b5ac86cc55d4c8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE4MDg3NA==", "url": "https://github.com/constellation-app/constellation/pull/481#discussion_r419180874", "bodyText": "@formalhaut69 I'd second what @cygnus-x-1 says with StringUtil.isBlank.\nSide tracking a little and this is purely me sharing a tip I've learnt (from SQ) is in general if you have to compare a string with an object, putting the string to the left of the operation helps avoid an NPE - e.g. \"Some Text\".equals(someObject) \ud83d\ude04", "author": "arcturus2", "createdAt": "2020-05-04T00:37:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3OTE3MA=="}], "type": "inlineReview", "revised_code": {"commit": "963f0c81c6c8bd263577459195fbdeede03b1266", "chunk": "diff --git a/CoreAttributeEditorView/src/au/gov/asd/tac/constellation/views/attributeeditor/editors/DateEditorFactory.java b/CoreAttributeEditorView/src/au/gov/asd/tac/constellation/views/attributeeditor/editors/DateEditorFactory.java\nindex 59f059cff..a4bb9cd6d 100644\n--- a/CoreAttributeEditorView/src/au/gov/asd/tac/constellation/views/attributeeditor/editors/DateEditorFactory.java\n+++ b/CoreAttributeEditorView/src/au/gov/asd/tac/constellation/views/attributeeditor/editors/DateEditorFactory.java\n\n@@ -73,7 +74,7 @@ public class DateEditorFactory extends AttributeValueEditorFactory<LocalDate> {\n             //The converter is being used here to try and determine if the entered date is a LocalDate\n             //It will throw an exception and won't convert it if its invalid\n             try {\n-                if (!dateString.equals(\"\")) {\n+                if (!StringUtils.isBlank(dateString)) {\n                     datePicker.setValue(datePicker.getConverter().fromString(dateString));\n                 }\n             } catch (final DateTimeParseException ex) {\n"}}, {"oid": "963f0c81c6c8bd263577459195fbdeede03b1266", "url": "https://github.com/constellation-app/constellation/commit/963f0c81c6c8bd263577459195fbdeede03b1266", "message": "Update to use StringUtils.isBlank", "committedDate": "2020-05-04T01:42:28Z", "type": "commit"}, {"oid": "ece71b304a9db2c4886faeb3d01978e413664c7a", "url": "https://github.com/constellation-app/constellation/commit/ece71b304a9db2c4886faeb3d01978e413664c7a", "message": "Update DateTimeEditorFactory.java", "committedDate": "2020-05-04T01:44:54Z", "type": "commit"}]}