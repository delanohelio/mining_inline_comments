{"pr_number": 844, "pr_title": "Bugfix for Layer By Time Visibility ", "pr_createdAt": "2020-09-14T02:27:39Z", "pr_url": "https://github.com/constellation-app/constellation/pull/844", "timeline": [{"oid": "eb023edac6b493f2c637aaf0ffa2c7ce42744f11", "url": "https://github.com/constellation-app/constellation/commit/eb023edac6b493f2c637aaf0ffa2c7ce42744f11", "message": "Update LayerByTimePlugin.java", "committedDate": "2020-09-14T02:23:43Z", "type": "commit"}, {"oid": "0a0904a176d826a5fd662f18d7c9a25d64435aaa", "url": "https://github.com/constellation-app/constellation/commit/0a0904a176d826a5fd662f18d7c9a25d64435aaa", "message": "LayerByTime - Requested Changes\n\nRequested changes implemented", "committedDate": "2020-09-14T23:25:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODMwMzY0OA==", "url": "https://github.com/constellation-app/constellation/pull/844#discussion_r488303648", "bodyText": "@Polaris5514 from my reading of the code I think this entire if block could be removed. What do you think?", "author": "arcturus2", "createdAt": "2020-09-15T00:03:25Z", "path": "CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java", "diffHunk": "@@ -441,7 +437,6 @@ public void read(final GraphReadMethods rg, final PluginInteraction interaction,\n                 //Tag on the back of this loop and update the visibility of each node to match it's z value\n                 if (isTransactionLayers) {\n                     float vxZ = wgcopy.getFloatValue(zAttr, vertexId);\n-                    wgcopy.setFloatValue(vxVisibilityAttr, vertexId, vxZ / (z + 1));\n                 }", "originalCommit": "0a0904a176d826a5fd662f18d7c9a25d64435aaa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "42abae37da0b7dd218b6b6ee24a6d8015ab71820", "chunk": "diff --git a/CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java b/CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java\nindex b3470568f..7295adeea 100644\n--- a/CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java\n+++ b/CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java\n\n@@ -434,20 +434,6 @@ public class LayerByTimePlugin extends SimpleReadPlugin {\n                 if (nTx == 0) {\n                     vertices.add(vertexId);\n                 }\n-                //Tag on the back of this loop and update the visibility of each node to match it's z value\n-                if (isTransactionLayers) {\n-                    float vxZ = wgcopy.getFloatValue(zAttr, vertexId);\n-                }\n-            }\n-\n-            if (isTransactionLayers) {\n-                for (int pos = 0; pos < wgcopy.getTransactionCount(); pos++) {\n-                    final int txId = wgcopy.getTransaction(pos);\n-                    final int srcVxId = wgcopy.getTransactionSourceVertex(txId);\n-                    final int dstVxId = wgcopy.getTransactionDestinationVertex(txId);\n-                    final float srcVxz = wgcopy.getFloatValue(zAttr, srcVxId);\n-                    final float dstVxz = wgcopy.getFloatValue(zAttr, dstVxId);\n-                }\n             }\n \n             vertices.stream().forEach(wgcopy::removeVertex);\n"}}, {"oid": "42abae37da0b7dd218b6b6ee24a6d8015ab71820", "url": "https://github.com/constellation-app/constellation/commit/42abae37da0b7dd218b6b6ee24a6d8015ab71820", "message": "LayerByTime - Requested Changes\n\nRemoved redundant code", "committedDate": "2020-09-15T01:18:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA0MzE3Mg==", "url": "https://github.com/constellation-app/constellation/pull/844#discussion_r489043172", "bodyText": "this variable is apparently no longer being used. If you're able to remove it that would be great.", "author": "antares1470", "createdAt": "2020-09-15T22:45:31Z", "path": "CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java", "diffHunk": "@@ -356,8 +355,6 @@ public void read(final GraphReadMethods rg, final PluginInteraction interaction,\n             final int timeLayerAttr = wgcopy.addAttribute(GraphElementType.TRANSACTION, LayerNameAttributeDescription.ATTRIBUTE_NAME, LAYER_NAME, \"time layer\", defaultName, null);\n             wgcopy.addAttribute(GraphElementType.GRAPH, IntegerAttributeDescription.ATTRIBUTE_NAME, NLAYERS, \"The number of layers to layer by time\", 1, null);\n             final int zAttr = wgcopy.addAttribute(GraphElementType.VERTEX, FloatAttributeDescription.ATTRIBUTE_NAME, \"z\", \"z\", 0, null);", "originalCommit": "42abae37da0b7dd218b6b6ee24a6d8015ab71820", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ec5772a9b65520dddc0c1ff9e841e8734a2fa766", "chunk": "diff --git a/CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java b/CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java\nindex 7295adeea..8fd71f038 100644\n--- a/CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java\n+++ b/CoreArrangementPlugins/src/au/gov/asd/tac/constellation/plugins/arrangements/time/LayerByTimePlugin.java\n\n@@ -354,8 +354,6 @@ public class LayerByTimePlugin extends SimpleReadPlugin {\n             final LayerName defaultName = new LayerName(Graph.NOT_FOUND, \"Default\");\n             final int timeLayerAttr = wgcopy.addAttribute(GraphElementType.TRANSACTION, LayerNameAttributeDescription.ATTRIBUTE_NAME, LAYER_NAME, \"time layer\", defaultName, null);\n             wgcopy.addAttribute(GraphElementType.GRAPH, IntegerAttributeDescription.ATTRIBUTE_NAME, NLAYERS, \"The number of layers to layer by time\", 1, null);\n-            final int zAttr = wgcopy.addAttribute(GraphElementType.VERTEX, FloatAttributeDescription.ATTRIBUTE_NAME, \"z\", \"z\", 0, null);\n-\n             final int txColorAttr = wgcopy.getAttribute(GraphElementType.TRANSACTION, \"color\");\n             final int txGuideline = wgcopy.addAttribute(GraphElementType.TRANSACTION, BooleanAttributeDescription.ATTRIBUTE_NAME, \"layer_guideline\", \"This transaction is a layer guideline\", false, null);\n             final ConstellationColor guidelineColor = ConstellationColor.getColorValue(0.25f, 0.25f, 0.25f, 1f);\n"}}, {"oid": "ec5772a9b65520dddc0c1ff9e841e8734a2fa766", "url": "https://github.com/constellation-app/constellation/commit/ec5772a9b65520dddc0c1ff9e841e8734a2fa766", "message": "Layer By Time - Requested Changes", "committedDate": "2020-09-15T23:01:12Z", "type": "commit"}]}