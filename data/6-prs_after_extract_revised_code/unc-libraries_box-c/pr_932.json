{"pr_number": 932, "pr_title": "Update display of items marked for deletion in public UI", "pr_createdAt": "2020-03-17T13:47:45Z", "pr_url": "https://github.com/UNC-Libraries/box-c/pull/932", "timeline": [{"oid": "6308781cd648eb33ba041948f03d65ae1e58d991", "url": "https://github.com/UNC-Libraries/box-c/commit/6308781cd648eb33ba041948f03d65ae1e58d991", "message": "Move deleted styles into one place", "committedDate": "2020-03-17T17:24:47Z", "type": "forcePushed"}, {"oid": "7dac9d57b66c3b009f79969273fd6916ec67858a", "url": "https://github.com/UNC-Libraries/box-c/commit/7dac9d57b66c3b009f79969273fd6916ec67858a", "message": "Add trash icon", "committedDate": "2020-03-18T12:09:42Z", "type": "forcePushed"}, {"oid": "996be2427093d23eb7f416727ee34675efb6e129", "url": "https://github.com/UNC-Libraries/box-c/commit/996be2427093d23eb7f416727ee34675efb6e129", "message": "Update display of items marked for deletion in public UI", "committedDate": "2020-03-18T13:19:58Z", "type": "commit"}, {"oid": "73682217079703de18d6903491749d84940f9a00", "url": "https://github.com/UNC-Libraries/box-c/commit/73682217079703de18d6903491749d84940f9a00", "message": "Move deleted styles into one place", "committedDate": "2020-03-18T13:19:58Z", "type": "commit"}, {"oid": "5c9dd534099575be6f33b8346f083a68a5bf075a", "url": "https://github.com/UNC-Libraries/box-c/commit/5c9dd534099575be6f33b8346f083a68a5bf075a", "message": "Add trash icon", "committedDate": "2020-03-18T13:19:58Z", "type": "commit"}, {"oid": "5c9dd534099575be6f33b8346f083a68a5bf075a", "url": "https://github.com/UNC-Libraries/box-c/commit/5c9dd534099575be6f33b8346f083a68a5bf075a", "message": "Add trash icon", "committedDate": "2020-03-18T13:19:58Z", "type": "forcePushed"}, {"oid": "60b2209771723de4c222472af758120b1a218103", "url": "https://github.com/UNC-Libraries/box-c/commit/60b2209771723de4c222472af758120b1a218103", "message": "Mark file/aggregate pages and related items as marked for deletion", "committedDate": "2020-03-18T19:41:19Z", "type": "commit"}, {"oid": "bae16b20824ccf020cd62bc17a6583147e2d4d71", "url": "https://github.com/UNC-Libraries/box-c/commit/bae16b20824ccf020cd62bc17a6583147e2d4d71", "message": "* Fix icons not showing up\n* Update icon placement", "committedDate": "2020-03-19T20:11:36Z", "type": "commit"}, {"oid": "9c86b06130e7580b53d231f9ae7cc6778d133bb6", "url": "https://github.com/UNC-Libraries/box-c/commit/9c86b06130e7580b53d231f9ae7cc6778d133bb6", "message": "Fix icons for images", "committedDate": "2020-03-20T12:19:25Z", "type": "commit"}, {"oid": "9c86b06130e7580b53d231f9ae7cc6778d133bb6", "url": "https://github.com/UNC-Libraries/box-c/commit/9c86b06130e7580b53d231f9ae7cc6778d133bb6", "message": "Fix icons for images", "committedDate": "2020-03-20T12:19:25Z", "type": "forcePushed"}, {"oid": "6f84cc6a899223acc5e05af0ae8000bf3d2e666f", "url": "https://github.com/UNC-Libraries/box-c/commit/6f84cc6a899223acc5e05af0ae8000bf3d2e666f", "message": "Fix layout of table rows with badges", "committedDate": "2020-03-20T14:01:56Z", "type": "commit"}, {"oid": "666b9d523328b73bda48f28ac538c559f7581d49", "url": "https://github.com/UNC-Libraries/box-c/commit/666b9d523328b73bda48f28ac538c559f7581d49", "message": "Fix row display for rows with badges", "committedDate": "2020-03-20T15:39:31Z", "type": "commit"}, {"oid": "666b9d523328b73bda48f28ac538c559f7581d49", "url": "https://github.com/UNC-Libraries/box-c/commit/666b9d523328b73bda48f28ac538c559f7581d49", "message": "Fix row display for rows with badges", "committedDate": "2020-03-20T15:39:31Z", "type": "forcePushed"}, {"oid": "b49d454c33dd172eddbc96da14fafe4385bcd55d", "url": "https://github.com/UNC-Libraries/box-c/commit/b49d454c33dd172eddbc96da14fafe4385bcd55d", "message": "Don't hardcode badge value", "committedDate": "2020-03-23T17:33:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3MzQwMQ==", "url": "https://github.com/UNC-Libraries/box-c/pull/932#discussion_r398173401", "bodyText": "there's a constant for this, might as well use it edu.unc.lib.dl.search.solr.util.FacetConstants.MARKED_FOR_DELETION", "author": "bbpennel", "createdAt": "2020-03-25T21:14:01Z", "path": "access/src/main/java/edu/unc/lib/dl/ui/controller/FullRecordController.java", "diffHunk": "@@ -234,6 +234,14 @@ public String getFullRecord(String pidString, Model model, HttpServletRequest re\n             model.addAttribute(\"neighborList\", neighbors);\n         }\n \n+        List<String> objectStatus = briefObject.getStatus();\n+        boolean isMarkedForDeletion = false;\n+\n+        if (objectStatus != null) {\n+            isMarkedForDeletion = objectStatus.contains(\"Marked For Deletion\");", "originalCommit": "b49d454c33dd172eddbc96da14fafe4385bcd55d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb5448935360d9b5f4d6464e7d7904606257b202", "chunk": "diff --git a/access/src/main/java/edu/unc/lib/dl/ui/controller/FullRecordController.java b/access/src/main/java/edu/unc/lib/dl/ui/controller/FullRecordController.java\nindex b2244e4de..329eae99d 100644\n--- a/access/src/main/java/edu/unc/lib/dl/ui/controller/FullRecordController.java\n+++ b/access/src/main/java/edu/unc/lib/dl/ui/controller/FullRecordController.java\n\n@@ -238,7 +239,7 @@ public class FullRecordController extends AbstractSolrSearchController {\n         boolean isMarkedForDeletion = false;\n \n         if (objectStatus != null) {\n-            isMarkedForDeletion = objectStatus.contains(\"Marked For Deletion\");\n+            isMarkedForDeletion = objectStatus.contains(MARKED_FOR_DELETION);\n         }\n         model.addAttribute(\"markedForDeletion\", isMarkedForDeletion);\n \n"}}, {"oid": "bb5448935360d9b5f4d6464e7d7904606257b202", "url": "https://github.com/UNC-Libraries/box-c/commit/bb5448935360d9b5f4d6464e7d7904606257b202", "message": "* Move to using existing page variable\n* Remove unused code", "committedDate": "2020-03-26T16:57:18Z", "type": "forcePushed"}, {"oid": "9ae0e500cb65cfa3907b9fc20ed23596f4c1d765", "url": "https://github.com/UNC-Libraries/box-c/commit/9ae0e500cb65cfa3907b9fc20ed23596f4c1d765", "message": "Cleanup files\n\n* Move to using existing page variable\n* Remove unused code", "committedDate": "2020-03-26T16:58:42Z", "type": "commit"}, {"oid": "9ae0e500cb65cfa3907b9fc20ed23596f4c1d765", "url": "https://github.com/UNC-Libraries/box-c/commit/9ae0e500cb65cfa3907b9fc20ed23596f4c1d765", "message": "Cleanup files\n\n* Move to using existing page variable\n* Remove unused code", "committedDate": "2020-03-26T16:58:42Z", "type": "forcePushed"}, {"oid": "dcbace932c6138155d70cc3af4d313b831fa500a", "url": "https://github.com/UNC-Libraries/box-c/commit/dcbace932c6138155d70cc3af4d313b831fa500a", "message": "Change page scope and get rid of class.", "committedDate": "2020-03-26T18:54:34Z", "type": "commit"}, {"oid": "b29f605b8eb98b73e35f77237d7763f06def692d", "url": "https://github.com/UNC-Libraries/box-c/commit/b29f605b8eb98b73e35f77237d7763f06def692d", "message": "Style and badge fixes", "committedDate": "2020-03-27T15:56:47Z", "type": "commit"}, {"oid": "b4ad7a698fb4766788f0269b3a923485f5d727dd", "url": "https://github.com/UNC-Libraries/box-c/commit/b4ad7a698fb4766788f0269b3a923485f5d727dd", "message": "badge and style updates", "committedDate": "2020-03-27T17:12:59Z", "type": "commit"}, {"oid": "5751b62573dcdb8f51c87de0b6fe2d0bde287a7b", "url": "https://github.com/UNC-Libraries/box-c/commit/5751b62573dcdb8f51c87de0b6fe2d0bde287a7b", "message": "Fix badges for record pages", "committedDate": "2020-03-27T17:38:06Z", "type": "commit"}, {"oid": "91414a5a354e0bea9beb5d7549200747c6f50290", "url": "https://github.com/UNC-Libraries/box-c/commit/91414a5a354e0bea9beb5d7549200747c6f50290", "message": "Move icon location", "committedDate": "2020-03-30T13:22:25Z", "type": "commit"}, {"oid": "829a5b8c9bbb469689c06b9140afdf265b7f45af", "url": "https://github.com/UNC-Libraries/box-c/commit/829a5b8c9bbb469689c06b9140afdf265b7f45af", "message": "* gray out deleted items in browse view\n* update neighbor list display", "committedDate": "2020-03-30T15:55:38Z", "type": "commit"}, {"oid": "1d79f79adf4e11d8eebb4fd2b51a5d3a04e1913b", "url": "https://github.com/UNC-Libraries/box-c/commit/1d79f79adf4e11d8eebb4fd2b51a5d3a04e1913b", "message": "Update variable names and file cleanup", "committedDate": "2020-04-02T13:31:08Z", "type": "commit"}]}