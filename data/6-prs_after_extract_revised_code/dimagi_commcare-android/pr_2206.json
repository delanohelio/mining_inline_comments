{"pr_number": 2206, "pr_title": "Show detailed error for captive portal presense", "pr_createdAt": "2020-04-06T05:25:16Z", "pr_url": "https://github.com/dimagi/commcare-android/pull/2206", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkyNTM5MQ==", "url": "https://github.com/dimagi/commcare-android/pull/2206#discussion_r403925391", "bodyText": "we should add a log here as well", "author": "shubham1g5", "createdAt": "2020-04-06T08:47:05Z", "path": "app/src/org/commcare/utils/FormUploadUtil.java", "diffHunk": "@@ -183,6 +184,9 @@ private static FormUploadResult submitEntity(List<MultipartBody.Part> parts, Str\n             Logger.log(LogTypes.TYPE_ERROR_CONFIG_STRUCTURE,\n                     \"Encountered PlainTextPasswordException while submission: Sending password over HTTP\");\n             return FormUploadResult.AUTH_OVER_HTTP;\n+        } catch (CaptivePortalRedirectException e) {\n+            e.printStackTrace();\n+            return FormUploadResult.CAPTIVE_PORTAL;", "originalCommit": "a6fbed10b60b16a6429a5440c63eacc16ce2d145", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "83bbcef3dafee17ba7a7067d8d2175e359041fdc", "chunk": "diff --git a/app/src/org/commcare/utils/FormUploadUtil.java b/app/src/org/commcare/utils/FormUploadUtil.java\nindex 5cf490179..1cbe0058c 100644\n--- a/app/src/org/commcare/utils/FormUploadUtil.java\n+++ b/app/src/org/commcare/utils/FormUploadUtil.java\n\n@@ -186,6 +186,7 @@ public class FormUploadUtil {\n             return FormUploadResult.AUTH_OVER_HTTP;\n         } catch (CaptivePortalRedirectException e) {\n             e.printStackTrace();\n+            Logger.log(LogTypes.TYPE_WARNING_NETWORK, \"Captive portal detected while form submission\");\n             return FormUploadResult.CAPTIVE_PORTAL;\n         } catch (IOException | IllegalStateException e) {\n             Logger.exception(\"Error reading form during submission: \" + e.getMessage(), e);\n"}}, {"oid": "83bbcef3dafee17ba7a7067d8d2175e359041fdc", "url": "https://github.com/dimagi/commcare-android/commit/83bbcef3dafee17ba7a7067d8d2175e359041fdc", "message": "Show detailed error for captive portal presense", "committedDate": "2020-04-06T10:05:28Z", "type": "commit"}, {"oid": "83bbcef3dafee17ba7a7067d8d2175e359041fdc", "url": "https://github.com/dimagi/commcare-android/commit/83bbcef3dafee17ba7a7067d8d2175e359041fdc", "message": "Show detailed error for captive portal presense", "committedDate": "2020-04-06T10:05:28Z", "type": "forcePushed"}, {"oid": "04b0b8d6ce64cc01a5b7dbaa2270cb212e3760f1", "url": "https://github.com/dimagi/commcare-android/commit/04b0b8d6ce64cc01a5b7dbaa2270cb212e3760f1", "message": "Catch captive portal while app installation", "committedDate": "2020-04-10T12:52:30Z", "type": "commit"}]}