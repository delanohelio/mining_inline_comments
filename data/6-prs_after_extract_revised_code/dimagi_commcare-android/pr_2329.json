{"pr_number": 2329, "pr_title": "Add analytics for in-app updates", "pr_createdAt": "2020-08-26T11:18:43Z", "pr_url": "https://github.com/dimagi/commcare-android/pull/2329", "timeline": [{"oid": "7541d23b724c8331ff32eca5de36d74793c6fb61", "url": "https://github.com/dimagi/commcare-android/commit/7541d23b724c8331ff32eca5de36d74793c6fb61", "message": "Add analytics for in-app updates", "committedDate": "2020-08-26T11:18:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQzMTE2NQ==", "url": "https://github.com/dimagi/commcare-android/pull/2329#discussion_r477431165", "bodyText": "it's better to use FirebaseAnalytics.Param.VALUE as the parameter here as Firebase auto-aggregrates over that.", "author": "shubham1g5", "createdAt": "2020-08-26T16:28:31Z", "path": "app/src/org/commcare/google/services/analytics/FirebaseAnalyticsUtil.java", "diffHunk": "@@ -203,6 +203,13 @@ public static void reportSyncResult(boolean result, String trigger, String syncM\n         reportEvent(CCAnalyticsEvent.SYNC_ATTEMPT, b);\n     }\n \n+    public static void reportInAppUpdateResult(boolean result, String failureReason) {\n+        Bundle bundle = new Bundle();\n+        bundle.putInt(FirebaseAnalytics.Param.SUCCESS, result ? 1 : 0);", "originalCommit": "7541d23b724c8331ff32eca5de36d74793c6fb61", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODEzMDc1NA==", "url": "https://github.com/dimagi/commcare-android/pull/2329#discussion_r478130754", "bodyText": "Nice, thanks for the suggestion.", "author": "ShivamPokhriyal", "createdAt": "2020-08-27T05:16:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQzMTE2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "18d4b28051f257053ef2569bbcb1537ecb930af3", "chunk": "diff --git a/app/src/org/commcare/google/services/analytics/FirebaseAnalyticsUtil.java b/app/src/org/commcare/google/services/analytics/FirebaseAnalyticsUtil.java\nindex 36f5f0c48..d37ab311a 100644\n--- a/app/src/org/commcare/google/services/analytics/FirebaseAnalyticsUtil.java\n+++ b/app/src/org/commcare/google/services/analytics/FirebaseAnalyticsUtil.java\n\n@@ -205,7 +205,7 @@ public class FirebaseAnalyticsUtil {\n \n     public static void reportInAppUpdateResult(boolean result, String failureReason) {\n         Bundle bundle = new Bundle();\n-        bundle.putInt(FirebaseAnalytics.Param.SUCCESS, result ? 1 : 0);\n+        bundle.putLong(FirebaseAnalytics.Param.VALUE, result ? 1 : 0);\n         bundle.putString(CCAnalyticsParam.REASON, failureReason);\n         reportEvent(CCAnalyticsEvent.IN_APP_UPDATE_EVENT, bundle);\n     }\n"}}, {"oid": "18d4b28051f257053ef2569bbcb1537ecb930af3", "url": "https://github.com/dimagi/commcare-android/commit/18d4b28051f257053ef2569bbcb1537ecb930af3", "message": "Use Firebase VALUE param for reporting success", "committedDate": "2020-08-27T05:18:58Z", "type": "commit"}]}