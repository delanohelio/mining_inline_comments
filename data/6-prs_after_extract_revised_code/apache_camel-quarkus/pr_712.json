{"pr_number": 712, "pr_title": "create camel-jira extension #710", "pr_createdAt": "2020-02-13T19:04:49Z", "pr_url": "https://github.com/apache/camel-quarkus/pull/712", "timeline": [{"oid": "ddd14483ead6c43119e83a06ba79c4c48c5cf771", "url": "https://github.com/apache/camel-quarkus/commit/ddd14483ead6c43119e83a06ba79c4c48c5cf771", "message": "create camel-jira extension #710", "committedDate": "2020-02-13T19:03:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwNTQzNw==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379105437", "bodyText": "@ApplicationScoped should not be necessary.", "author": "ppalaga", "createdAt": "2020-02-13T20:37:45Z", "path": "integration-tests/jira/src/main/java/org/apache/camel/quarkus/component/jira/it/JiraResource.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.component.jira.it;\n+\n+import java.net.URI;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+import javax.ws.rs.Consumes;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+\n+import com.atlassian.jira.rest.client.api.RestClientException;\n+import org.apache.camel.ConsumerTemplate;\n+import org.apache.camel.ProducerTemplate;\n+import org.jboss.logging.Logger;\n+\n+@Path(\"/jira\")\n+@ApplicationScoped", "originalCommit": "ddd14483ead6c43119e83a06ba79c4c48c5cf771", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE2Mjc2MA==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379162760", "bodyText": "done!", "author": "ffang", "createdAt": "2020-02-13T22:48:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwNTQzNw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwNjg2Mg==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379106862", "bodyText": "What is the idea behind this test?", "author": "ppalaga", "createdAt": "2020-02-13T20:40:59Z", "path": "integration-tests/jira/src/test/java/org/apache/camel/quarkus/component/jira/it/JiraTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.component.jira.it;\n+\n+import java.util.UUID;\n+\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.restassured.RestAssured;\n+import io.restassured.http.ContentType;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Test;\n+\n+@QuarkusTest\n+class JiraTest {\n+\n+    @Test\n+    public void test() {\n+        final String msg = UUID.randomUUID().toString().replace(\"-\", \"\");\n+        RestAssured.given() //\n+                .contentType(ContentType.TEXT).body(msg).post(\"/jira/post\")\n+                .then().statusCode(404);//external jira not exist, expect to return 404", "originalCommit": "ddd14483ead6c43119e83a06ba79c4c48c5cf771", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE2MzUyMA==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379163520", "bodyText": "I thought even external server isn't available, configure the jira producer endpoint to know it can send out request is still useful.\nHow you guys normally test producer endpoint like this in quarkus?", "author": "ffang", "createdAt": "2020-02-13T22:49:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwNjg2Mg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwODczMA==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379108730", "bodyText": "I think application.properties would be a better place for these values. We do something similar with Twitter and Telegram.", "author": "ppalaga", "createdAt": "2020-02-13T20:44:56Z", "path": "integration-tests/jira/src/main/java/org/apache/camel/quarkus/component/jira/it/JiraResource.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.component.jira.it;\n+\n+import java.net.URI;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+import javax.ws.rs.Consumes;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+\n+import com.atlassian.jira.rest.client.api.RestClientException;\n+import org.apache.camel.ConsumerTemplate;\n+import org.apache.camel.ProducerTemplate;\n+import org.jboss.logging.Logger;\n+\n+@Path(\"/jira\")\n+@ApplicationScoped\n+public class JiraResource {\n+\n+    private static final Logger log = Logger.getLogger(JiraResource.class);\n+\n+    String TEST_JIRA_URL = \"https://somerepo.atlassian.net\";\n+    String PROJECT = \"TST\";\n+    String USERNAME = \"someguy\";\n+    String PASSWORD = \"my_password\";", "originalCommit": "ddd14483ead6c43119e83a06ba79c4c48c5cf771", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyNTcyOQ==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379125729", "bodyText": "I was thinking that it'd be better to do anonymous authentication if possible and use jra:fetchIssue against issues.apache.org. Then there'd be no need for credentials. Not sure if the Jira component supports that, but it might be possible with a custom JiraRestClientFactory.", "author": "jamesnetherton", "createdAt": "2020-02-13T21:22:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwODczMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyNjU4OQ==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379126589", "bodyText": "That'd be awesome, at least for fetching.", "author": "ppalaga", "createdAt": "2020-02-13T21:24:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwODczMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE3NDI5MQ==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379174291", "bodyText": "tracked by\n#715", "author": "ffang", "createdAt": "2020-02-13T23:21:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwODczMA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwODg2OA==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379108868", "bodyText": "Same as above: I think application.properties would be a better place for these values. We do something similar with Twitter and Telegram.", "author": "ppalaga", "createdAt": "2020-02-13T20:45:16Z", "path": "integration-tests/jira/src/main/java/org/apache/camel/quarkus/component/jira/it/JiraRouteBuilder.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.quarkus.component.jira.it;\n+\n+import org.apache.camel.builder.RouteBuilder;\n+import org.apache.camel.component.jira.JiraConstants;\n+\n+public class JiraRouteBuilder extends RouteBuilder {\n+    String TEST_JIRA_URL = \"https://somerepo.atlassian.net\";\n+    String PROJECT = \"TST\";\n+    String USERNAME = \"someguy\";\n+    String PASSWORD = \"my_password\";", "originalCommit": "ddd14483ead6c43119e83a06ba79c4c48c5cf771", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE3NDIyNg==", "url": "https://github.com/apache/camel-quarkus/pull/712#discussion_r379174226", "bodyText": "tracked by\n#715", "author": "ffang", "createdAt": "2020-02-13T23:21:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEwODg2OA=="}], "type": "inlineReview", "revised_code": null}]}