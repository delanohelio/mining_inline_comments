{"pr_number": 704, "pr_title": "Ensure that catalog files are added to the native image", "pr_createdAt": "2020-02-12T08:29:05Z", "pr_url": "https://github.com/apache/camel-quarkus/pull/704", "timeline": [{"oid": "4297af89165b8d364f97262031181851d30f3748", "url": "https://github.com/apache/camel-quarkus/commit/4297af89165b8d364f97262031181851d30f3748", "message": "Ensure that catalog files are added to the native image #686", "committedDate": "2020-02-12T08:26:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExNDg5OQ==", "url": "https://github.com/apache/camel-quarkus/pull/704#discussion_r378114899", "bodyText": "I have just learned about the existence of functionary/functionaries as a valid work of the English language. Anyway: is that not a typo?\nIn the description of the option, I'd like to learn what exactly happens when the option is true and what happens otherwise.\nIf I am a new user, I may have no idea what is CamelRuntimeCatalog. Yes there is a link to CamelRuntimeCatalog, but that class has no JavaDoc. Moreover, the link will most probably not work everywhere (IDEs, Web docs) where the text will be displayed. So either a working link to a resource explaining the concept of the catalog or a short inline definition would be nice.\nIt would also be nice to document the relationship (if there is any) to other options in this file - e.g. does enabled = false imply that all other options in this file are ignored?\nDoes this option only matter for the native mode? What happens in the JVM mode then?", "author": "ppalaga", "createdAt": "2020-02-12T09:00:03Z", "path": "extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java", "diffHunk": "@@ -174,4 +180,48 @@\n         public Optional<List<String>> includePatterns;\n     }\n \n+    @ConfigGroup\n+    public static class RuntimeCatalogConfig {\n+        /**\n+         * Enable {@link CamelRuntimeCatalog} functionaries.", "originalCommit": "4297af89165b8d364f97262031181851d30f3748", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEzMjE5Nw==", "url": "https://github.com/apache/camel-quarkus/pull/704#discussion_r378132197", "bodyText": "I have just learned about the existence of functionary/functionaries as a valid work of the English language. Anyway: is that not a typo?\nIn the description of the option, I'd like to learn what exactly happens when the option is true and what happens otherwise.\n\nIt is a typo\n\nIf I am a new user, I may have no idea what is CamelRuntimeCatalog. Yes there is a link to CamelRuntimeCatalog, but that class has no JavaDoc. Moreover, the link will most probably not work everywhere (IDEs, Web docs) where the text will be displayed. So either a working link to a resource explaining the concept of the catalog or a short inline definition would be nice.\n\nI don't think we need to describe what the RuntimeCamelContext is in camel-quarkus so if there's lack of documentation on camel side, please raise an issue there.\n\nIt would also be nice to document the relationship (if there is any) to other options in this file - e.g. does enabled = false imply that all other options in this file are ignored?\nDoes this option only matter for the native mode? What happens in the JVM mode then?\n\nAgree, this need to be improved", "author": "lburgazzoli", "createdAt": "2020-02-12T09:32:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExNDg5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE0MzgyOQ==", "url": "https://github.com/apache/camel-quarkus/pull/704#discussion_r378143829", "bodyText": "should be fixed now", "author": "lburgazzoli", "createdAt": "2020-02-12T09:53:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExNDg5OQ=="}], "type": "inlineReview", "revised_code": {"commit": "4e543b6b6302e2c832dc22359ff8ca136477362e", "chunk": "diff --git a/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java b/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java\nindex 4873c5e12..1b2c75c36 100644\n--- a/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java\n+++ b/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java\n\n@@ -182,17 +182,12 @@ public class CamelConfig {\n \n     @ConfigGroup\n     public static class RuntimeCatalogConfig {\n-        /**\n-         * Enable {@link CamelRuntimeCatalog} functionaries.\n-         */\n-        @ConfigItem(defaultValue = \"true\")\n-        public boolean enabled;\n-\n         /**\n          * Used to control the resolution of components catalog info.\n          * <p>\n          * Note that when building native images, this flag determine if the json metadata files related to components\n-         * discovered at build time have to be included in the final binary.\n+         * discovered at build time have to be included in the final binary. In JVM mode there is no real benefit of\n+         * setting this flag to {@code false} if not to make the behavior consistent with native mode.\n          */\n         @ConfigItem(defaultValue = \"true\")\n         public boolean components;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEyMzE4NQ==", "url": "https://github.com/apache/camel-quarkus/pull/704#discussion_r378123185", "bodyText": "Is \"resolution\" really what this does? Would not \"inclusion\" suit better?\nAgain, it may be unclear to the reader, what is catalog. Maybe a link to a Camel docs page explaining the concept would be nice. The description should give me a hint why/when should I care, why would I ever need this to be true?\nThis also applies to all other options in this file.", "author": "ppalaga", "createdAt": "2020-02-12T09:16:24Z", "path": "extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java", "diffHunk": "@@ -174,4 +180,48 @@\n         public Optional<List<String>> includePatterns;\n     }\n \n+    @ConfigGroup\n+    public static class RuntimeCatalogConfig {\n+        /**\n+         * Enable {@link CamelRuntimeCatalog} functionaries.\n+         */\n+        @ConfigItem(defaultValue = \"true\")\n+        public boolean enabled;\n+\n+        /**\n+         * Used to control the resolution of components catalog info.", "originalCommit": "4297af89165b8d364f97262031181851d30f3748", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEzMDM5Mg==", "url": "https://github.com/apache/camel-quarkus/pull/704#discussion_r378130392", "bodyText": "Is \"resolution\" really what this does? Would not \"inclusion\" suit better?\n\nIt is resolution, if you go through the code you'd see that this flag controls if the runtime catalog should attempt or not to resolve the given name to its model\n\nAgain, it may be unclear to the reader, what is catalog. Maybe a link to a Camel docs page explaining the concept would be nice. The description should give me a hint why/when should I care, why would I ever need this to be true?\n\nThe impact on the native image is described a few lines below.", "author": "lburgazzoli", "createdAt": "2020-02-12T09:29:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEyMzE4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE0Mzg4MA==", "url": "https://github.com/apache/camel-quarkus/pull/704#discussion_r378143880", "bodyText": "should be fixed now", "author": "lburgazzoli", "createdAt": "2020-02-12T09:53:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEyMzE4NQ=="}], "type": "inlineReview", "revised_code": {"commit": "4e543b6b6302e2c832dc22359ff8ca136477362e", "chunk": "diff --git a/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java b/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java\nindex 4873c5e12..1b2c75c36 100644\n--- a/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java\n+++ b/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/CamelConfig.java\n\n@@ -182,17 +182,12 @@ public class CamelConfig {\n \n     @ConfigGroup\n     public static class RuntimeCatalogConfig {\n-        /**\n-         * Enable {@link CamelRuntimeCatalog} functionaries.\n-         */\n-        @ConfigItem(defaultValue = \"true\")\n-        public boolean enabled;\n-\n         /**\n          * Used to control the resolution of components catalog info.\n          * <p>\n          * Note that when building native images, this flag determine if the json metadata files related to components\n-         * discovered at build time have to be included in the final binary.\n+         * discovered at build time have to be included in the final binary. In JVM mode there is no real benefit of\n+         * setting this flag to {@code false} if not to make the behavior consistent with native mode.\n          */\n         @ConfigItem(defaultValue = \"true\")\n         public boolean components;\n"}}, {"oid": "4e543b6b6302e2c832dc22359ff8ca136477362e", "url": "https://github.com/apache/camel-quarkus/commit/4e543b6b6302e2c832dc22359ff8ca136477362e", "message": "Ensure that catalog files are added to the native image #686 (fix findings)", "committedDate": "2020-02-12T10:06:52Z", "type": "commit"}, {"oid": "4e543b6b6302e2c832dc22359ff8ca136477362e", "url": "https://github.com/apache/camel-quarkus/commit/4e543b6b6302e2c832dc22359ff8ca136477362e", "message": "Ensure that catalog files are added to the native image #686 (fix findings)", "committedDate": "2020-02-12T10:06:52Z", "type": "forcePushed"}]}