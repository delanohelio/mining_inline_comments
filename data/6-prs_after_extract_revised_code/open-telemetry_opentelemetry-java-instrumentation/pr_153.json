{"pr_number": 153, "pr_title": "Add instrumentation for OpenTelemetry API itself", "pr_createdAt": "2020-02-10T23:37:27Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/153", "timeline": [{"oid": "e70e6ac988bbdcc617362e1752a3efc7bf06df05", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e70e6ac988bbdcc617362e1752a3efc7bf06df05", "message": "Add instrumentation for OpenTelemetry API itself", "committedDate": "2020-02-10T23:16:08Z", "type": "commit"}, {"oid": "1068a917f753b04259c8f5a9505fbc8da8e9050e", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/1068a917f753b04259c8f5a9505fbc8da8e9050e", "message": "Merge branch 'master' into opentelemetry-api-instrumentation", "committedDate": "2020-02-14T01:13:08Z", "type": "commit"}, {"oid": "4942d822a234e556838ffa579cc17a653c659a52", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4942d822a234e556838ffa579cc17a653c659a52", "message": "Merge remote-tracking branch 'upstream/master' into opentelemetry-api-instrumentation", "committedDate": "2020-02-18T21:53:30Z", "type": "commit"}, {"oid": "07d9afb7158072493866f57371e1bf562b0b988c", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/07d9afb7158072493866f57371e1bf562b0b988c", "message": "Add comment explaining shading", "committedDate": "2020-02-18T22:09:25Z", "type": "commit"}, {"oid": "3a4b21293d807043f5c2dee54e8c33df8d1134b1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3a4b21293d807043f5c2dee54e8c33df8d1134b1", "message": "More comments", "committedDate": "2020-02-18T22:20:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI2NzkyOQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/153#discussion_r382267929", "bodyText": "Please add a comment here explaining what this class is for and how it works.", "author": "tylerbenson", "createdAt": "2020-02-20T21:29:21Z", "path": "instrumentation/opentelemetry-api-0.2/src/main/java/io/opentelemetry/auto/instrumentation/otapi/Bridging.java", "diffHunk": "@@ -0,0 +1,174 @@\n+package io.opentelemetry.auto.instrumentation.otapi;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import lombok.extern.slf4j.Slf4j;\n+import unshaded.io.opentelemetry.trace.AttributeValue;\n+import unshaded.io.opentelemetry.trace.EndSpanOptions;\n+import unshaded.io.opentelemetry.trace.Span;\n+import unshaded.io.opentelemetry.trace.SpanContext;\n+import unshaded.io.opentelemetry.trace.SpanId;\n+import unshaded.io.opentelemetry.trace.Status;\n+import unshaded.io.opentelemetry.trace.TraceFlags;\n+import unshaded.io.opentelemetry.trace.TraceId;\n+import unshaded.io.opentelemetry.trace.Tracestate;\n+\n+@Slf4j\n+public class Bridging {", "originalCommit": "3a4b21293d807043f5c2dee54e8c33df8d1134b1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7e47b4a447996659e4ffb5901e344105421bb8e8", "chunk": "diff --git a/instrumentation/opentelemetry-api-0.2/src/main/java/io/opentelemetry/auto/instrumentation/otapi/Bridging.java b/instrumentation/opentelemetry-api-0.2/src/main/java/io/opentelemetry/auto/instrumentation/otapi/Bridging.java\nindex 995e401014..1fd3c9546c 100644\n--- a/instrumentation/opentelemetry-api-0.2/src/main/java/io/opentelemetry/auto/instrumentation/otapi/Bridging.java\n+++ b/instrumentation/opentelemetry-api-0.2/src/main/java/io/opentelemetry/auto/instrumentation/otapi/Bridging.java\n\n@@ -13,6 +13,19 @@ import unshaded.io.opentelemetry.trace.TraceFlags;\n import unshaded.io.opentelemetry.trace.TraceId;\n import unshaded.io.opentelemetry.trace.Tracestate;\n \n+/**\n+ * This class translates between the (unshaded) OpenTelemetry API that the user brings and the\n+ * (shaded) OpenTelemetry API that is in the bootstrap class loader and used to report telemetry to\n+ * the agent.\n+ *\n+ * <p>\"unshaded.io.opentelemetry.*\" refers to the (unshaded) OpenTelemetry API that the user brings\n+ * (as those references will be translated during the build to remove the \"unshaded.\" prefix).\n+ *\n+ * <p>\"io.opentelemetry.*\" refers to the (shaded) OpenTelemetry API that is in the bootstrap class\n+ * loader (as those references will later be shaded).\n+ *\n+ * <p>Also see comments in this module's gradle file.\n+ */\n @Slf4j\n public class Bridging {\n \n"}}, {"oid": "7e47b4a447996659e4ffb5901e344105421bb8e8", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/7e47b4a447996659e4ffb5901e344105421bb8e8", "message": "Add comments", "committedDate": "2020-02-20T22:46:50Z", "type": "commit"}, {"oid": "fbd3604b804dd7b634600f764618b7a2af9294bd", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/fbd3604b804dd7b634600f764618b7a2af9294bd", "message": "Merge branch 'master' into opentelemetry-api-instrumentation", "committedDate": "2020-02-20T22:55:59Z", "type": "commit"}, {"oid": "49ad60137c51af3dd4253835e142235ba2e8dbf1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/49ad60137c51af3dd4253835e142235ba2e8dbf1", "message": "Merge branch 'master' into opentelemetry-api-instrumentation", "committedDate": "2020-02-21T16:53:17Z", "type": "commit"}]}