{"pr_number": 116, "pr_title": "Remove trace-api artifact", "pr_createdAt": "2020-01-31T20:25:19Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/116", "timeline": [{"oid": "1add20efc0e8a4dd6adb694cf042be28a9d95c54", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/1add20efc0e8a4dd6adb694cf042be28a9d95c54", "message": "Remove unused Trace annotations", "committedDate": "2020-01-31T18:38:11Z", "type": "commit"}, {"oid": "a57040fddec60cdd4c585c1a1a241741335a9e91", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a57040fddec60cdd4c585c1a1a241741335a9e91", "message": "Remove Trace annotation from benchmark code", "committedDate": "2020-01-31T18:38:11Z", "type": "commit"}, {"oid": "2eafdad9a4471fae6cc8b38347952e220308f986", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/2eafdad9a4471fae6cc8b38347952e220308f986", "message": "Remove Trace annotation from instrumentation tests", "committedDate": "2020-01-31T18:38:11Z", "type": "commit"}, {"oid": "d7f0951dd877d0828dab5be9356015fac8514bf7", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d7f0951dd877d0828dab5be9356015fac8514bf7", "message": "Remove Trace annotation from smoke tests", "committedDate": "2020-01-31T18:38:11Z", "type": "commit"}, {"oid": "443e78b65aa57873a2b90620f359d00783c343e6", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/443e78b65aa57873a2b90620f359d00783c343e6", "message": "Remove Trace annotation from agent tests", "committedDate": "2020-01-31T18:38:11Z", "type": "commit"}, {"oid": "f2984e93abb9c02a9a9ea4a384a30d1528566c40", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f2984e93abb9c02a9a9ea4a384a30d1528566c40", "message": "Remove Trace annotation from testing tests", "committedDate": "2020-01-31T18:38:11Z", "type": "commit"}, {"oid": "3ce619a611959a4b7088f38c13338a3fd8119aa0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3ce619a611959a4b7088f38c13338a3fd8119aa0", "message": "Remove Trace annotation from hystrix tests", "committedDate": "2020-01-31T18:53:49Z", "type": "commit"}, {"oid": "3d9778f0df68091176fbfcbabced6318bbb4a5e5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3d9778f0df68091176fbfcbabced6318bbb4a5e5", "message": "Remove Trace annotation from netty tests", "committedDate": "2020-01-31T18:53:49Z", "type": "commit"}, {"oid": "ff534a88ae32939c9858fdfa02104e871b4f7a61", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/ff534a88ae32939c9858fdfa02104e871b4f7a61", "message": "Remove Trace annotation from webflux tests", "committedDate": "2020-01-31T18:53:49Z", "type": "commit"}, {"oid": "14635247e5ffc0167fc329be8936b18c4c439658", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/14635247e5ffc0167fc329be8936b18c4c439658", "message": "Remove unnecessary conditional", "committedDate": "2020-01-31T18:53:49Z", "type": "commit"}, {"oid": "9f12086516b70b05cc2a6f24421c9ee3c009e71e", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9f12086516b70b05cc2a6f24421c9ee3c009e71e", "message": "Remove Trace annotation from reactor tests", "committedDate": "2020-01-31T18:53:49Z", "type": "commit"}, {"oid": "3b6ad2418e389c13c3b4f563e6e699a640532499", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3b6ad2418e389c13c3b4f563e6e699a640532499", "message": "Remove Trace annotation from akka http tests", "committedDate": "2020-01-31T19:05:06Z", "type": "commit"}, {"oid": "5c492596c15d51dbaf44ca2422d03c029afaf556", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5c492596c15d51dbaf44ca2422d03c029afaf556", "message": "Remove Trace annotation from java concurrent tests", "committedDate": "2020-01-31T19:05:06Z", "type": "commit"}, {"oid": "46e9b45f9805c313caa22251fdeba9217a129520", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/46e9b45f9805c313caa22251fdeba9217a129520", "message": "Remove Trace annotation from trace annotation instrumentation", "committedDate": "2020-01-31T19:05:06Z", "type": "commit"}, {"oid": "4100f775a46c34275509c1a9496c200a89f1430a", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4100f775a46c34275509c1a9496c200a89f1430a", "message": "Delete Trace annotation", "committedDate": "2020-01-31T19:05:06Z", "type": "commit"}, {"oid": "4cad0d02f6df12658356e3e3e805d6c8ba36e6e1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4cad0d02f6df12658356e3e3e805d6c8ba36e6e1", "message": "Move classes out of trace-api", "committedDate": "2020-01-31T19:05:06Z", "type": "commit"}, {"oid": "31b0afa07581ab8106b09d160fb9a8381c49911f", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/31b0afa07581ab8106b09d160fb9a8381c49911f", "message": "Remove trace-api artifact", "committedDate": "2020-01-31T19:05:06Z", "type": "commit"}, {"oid": "ea10ff155f654b54dd4bff8e210812d96ba9a641", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/ea10ff155f654b54dd4bff8e210812d96ba9a641", "message": "Move trace-api classes to better packages", "committedDate": "2020-01-31T19:05:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyNDkwMw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/116#discussion_r373724903", "bodyText": "what happened here?", "author": "jkwatson", "createdAt": "2020-01-31T23:10:16Z", "path": "java-agent/src/test/java/io/opentelemetry/test/ClassToInstrument.java", "diffHunk": "@@ -1,6 +1,6 @@\n package io.opentelemetry.test;\n \n-import io.opentelemetry.auto.api.Trace;\n+import io.opentracing.contrib.dropwizard.Trace;", "originalCommit": "443e78b65aa57873a2b90620f359d00783c343e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyODgyMQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/116#discussion_r373728821", "bodyText": "this is to test the trace-annotation instrumentation now that the native @Trace annotation is no more", "author": "trask", "createdAt": "2020-01-31T23:27:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyNDkwMw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyNTk4MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/116#discussion_r373725981", "bodyText": "you don't want to surround the operation with the span?", "author": "jkwatson", "createdAt": "2020-01-31T23:14:56Z", "path": "instrumentation/akka-http-10.0/src/lagomTest/java/EchoServiceImpl.java", "diffHunk": "@@ -19,8 +22,8 @@\n     throw new RuntimeException(\"lagom exception\");\n   }\n \n-  @Trace\n   public List<String> tracedMethod() {\n+    TRACER.spanBuilder(\"tracedMethod\").startSpan().end();", "originalCommit": "3b6ad2418e389c13c3b4f563e6e699a640532499", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ab0f2c1089011a692c773c0c8070627a7f6def7d", "chunk": "diff --git a/instrumentation/akka-http-10.0/src/lagomTest/java/EchoServiceImpl.java b/instrumentation/akka-http-10.0/src/lagomTest/java/EchoServiceImpl.java\nindex 62f327471a..687ccd2a20 100644\n--- a/instrumentation/akka-http-10.0/src/lagomTest/java/EchoServiceImpl.java\n+++ b/instrumentation/akka-http-10.0/src/lagomTest/java/EchoServiceImpl.java\n\n@@ -23,7 +24,11 @@ public class EchoServiceImpl implements EchoService {\n   }\n \n   public List<String> tracedMethod() {\n-    TRACER.spanBuilder(\"tracedMethod\").startSpan().end();\n-    return java.util.Arrays.asList(\"msg1\", \"msg2\", \"msg3\");\n+    Span span = TRACER.spanBuilder(\"tracedMethod\").startSpan();\n+    try {\n+      return java.util.Arrays.asList(\"msg1\", \"msg2\", \"msg3\");\n+    } finally {\n+      span.end();\n+    }\n   }\n }\n"}}, {"oid": "ab0f2c1089011a692c773c0c8070627a7f6def7d", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/ab0f2c1089011a692c773c0c8070627a7f6def7d", "message": "Address review feedback", "committedDate": "2020-01-31T23:25:36Z", "type": "commit"}, {"oid": "1a73553214f678d58e2cc8e60e2c2bcb3f4c4c12", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/1a73553214f678d58e2cc8e60e2c2bcb3f4c4c12", "message": "Merge remote-tracking branch 'upstream/master' into remove-trace-api-artifact", "committedDate": "2020-02-01T20:29:17Z", "type": "commit"}]}