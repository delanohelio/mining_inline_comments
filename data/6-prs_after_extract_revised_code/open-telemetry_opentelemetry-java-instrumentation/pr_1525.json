{"pr_number": 1525, "pr_title": "Migrates to using a context when span is started", "pr_createdAt": "2020-10-29T08:23:11Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1525", "timeline": [{"oid": "412db1284cbaade73faa7a1efefffed06fd40554", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/412db1284cbaade73faa7a1efefffed06fd40554", "message": "Return Context when starting span to preserve baggage.\n\nCo-authored-by: Marcin Grzejszczak <marcin.grzejszczak@gmail.com>", "committedDate": "2020-10-29T08:13:01Z", "type": "commit"}, {"oid": "c04f656e974bc83b9a0213e41b8c0fdfebb2e976", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/c04f656e974bc83b9a0213e41b8c0fdfebb2e976", "message": "Use bridge", "committedDate": "2020-10-29T08:22:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE5OTEyMA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1525#discussion_r514199120", "bodyText": "I think we can optimise this pattern, without taking span from context and then putting it back in startScope. But as @marcingrzejszczak  really wants it now, let's do it in follow up", "author": "iNikem", "createdAt": "2020-10-29T11:50:42Z", "path": "instrumentation/spring/spring-webmvc-3.1/library/src/main/java/io/opentelemetry/instrumentation/spring/webmvc/WebMvcTracingFilter.java", "diffHunk": "@@ -30,8 +31,8 @@ public WebMvcTracingFilter(Tracer tracer) {\n   public void doFilterInternal(\n       HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n       throws ServletException, IOException {\n-    Span serverSpan = tracer.startSpan(request, request, FILTER_CLASS + \".\" + FILTER_METHOD);\n-\n+    Context ctx = tracer.startSpan(request, request, FILTER_CLASS + \".\" + FILTER_METHOD);\n+    Span serverSpan = Span.fromContext(ctx);", "originalCommit": "c04f656e974bc83b9a0213e41b8c0fdfebb2e976", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}