{"pr_number": 216, "pr_title": "Integrate SpotBugs into build (ignoreFailures=true), fix most found issues", "pr_createdAt": "2020-03-08T18:26:29Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/216", "timeline": [{"oid": "a1279ebdf81480eade90d7c2ffd97f338eb51b90", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a1279ebdf81480eade90d7c2ffd97f338eb51b90", "message": "Integrate SpotBugs (FindBugs) into build.  Set ignoreFailures so spotted bugs do not break the build.", "committedDate": "2020-03-08T18:10:48Z", "type": "commit"}, {"oid": "b0c23dc04a9c1f7bddf460ffe257608e45d6a1d7", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b0c23dc04a9c1f7bddf460ffe257608e45d6a1d7", "message": "Fix many SpotBugs-found items, mostly making things final, but also a redundant null check and a reliance on platform character encoding.  2 items remain which will need further work/review, but as ignoreFailures is set, they will not fail the check stage.", "committedDate": "2020-03-08T18:19:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM5NDE1MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/216#discussion_r389394151", "bodyText": "\ud83d\udc4d", "author": "trask", "createdAt": "2020-03-08T18:35:22Z", "path": "instrumentation/jedis-3.0/src/main/java/io/opentelemetry/auto/instrumentation/jedis30/JedisInstrumentation.java", "diffHunk": "@@ -80,7 +81,7 @@ public static SpanWithScope onEnter(@Advice.Argument(1) final ProtocolCommand co\n       } else {\n         // Protocol.Command is the only implementation in the Jedis lib as of 3.1 but this will save\n         // us if that changes\n-        DECORATE.onStatement(span, new String(command.getRaw()));\n+        DECORATE.onStatement(span, new String(command.getRaw(), StandardCharsets.UTF_8));", "originalCommit": "b0c23dc04a9c1f7bddf460ffe257608e45d6a1d7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM5NDQ4Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/216#discussion_r389394483", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (target == null || target.isAbstract()) {\n          \n          \n            \n                if (target.isAbstract()) {\n          \n      \n    \n    \n  \n\nthis method should never be passed null (despite what the previous null-check below seemed to imply \ud83d\ude04)", "author": "trask", "createdAt": "2020-03-08T18:39:28Z", "path": "agent-tooling/src/main/java/io/opentelemetry/auto/tooling/muzzle/MuzzleGradlePlugin.java", "diffHunk": "@@ -44,12 +44,12 @@\n \n   @Override\n   public boolean matches(final TypeDescription target) {\n-    if (target.isAbstract()) {\n+    if (target == null || target.isAbstract()) {", "originalCommit": "b0c23dc04a9c1f7bddf460ffe257608e45d6a1d7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5c41fbf779c4208e10b30e6c7404d9088ba5022f", "chunk": "diff --git a/agent-tooling/src/main/java/io/opentelemetry/auto/tooling/muzzle/MuzzleGradlePlugin.java b/agent-tooling/src/main/java/io/opentelemetry/auto/tooling/muzzle/MuzzleGradlePlugin.java\nindex 2bf2f8a5bf..ab77e5a320 100644\n--- a/agent-tooling/src/main/java/io/opentelemetry/auto/tooling/muzzle/MuzzleGradlePlugin.java\n+++ b/agent-tooling/src/main/java/io/opentelemetry/auto/tooling/muzzle/MuzzleGradlePlugin.java\n\n@@ -44,7 +44,7 @@ public class MuzzleGradlePlugin implements Plugin {\n \n   @Override\n   public boolean matches(final TypeDescription target) {\n-    if (target == null || target.isAbstract()) {\n+    if (target.isAbstract()) {\n       return false;\n     }\n     // AutoService annotation is not retained at runtime. Check for Instrumenter.Default supertype\n"}}, {"oid": "5c41fbf779c4208e10b30e6c7404d9088ba5022f", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5c41fbf779c4208e10b30e6c7404d9088ba5022f", "message": "Update agent-tooling/src/main/java/io/opentelemetry/auto/tooling/muzzle/MuzzleGradlePlugin.java\n\nCo-Authored-By: Trask Stalnaker <trask.stalnaker@gmail.com>", "committedDate": "2020-03-09T16:37:39Z", "type": "commit"}]}