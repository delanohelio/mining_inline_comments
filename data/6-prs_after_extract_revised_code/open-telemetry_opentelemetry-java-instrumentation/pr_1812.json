{"pr_number": 1812, "pr_title": "Add newrelic and datadog package prefixes to global ignore matcher", "pr_createdAt": "2020-12-01T12:55:10Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1812", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxMzk3NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1812#discussion_r533513974", "bodyText": "IIRC, NR couldn't have this here because there are tons of non-agent classes around at NR that still need instrumentation.", "author": "jkwatson", "createdAt": "2020-12-01T15:44:07Z", "path": "javaagent-tooling/src/main/java/io/opentelemetry/javaagent/tooling/matcher/GlobalIgnoresMatcher.java", "diffHunk": "@@ -60,11 +60,14 @@ public boolean matches(T target) {\n     if (name.startsWith(\"net.bytebuddy.\")\n         || name.startsWith(\"jdk.\")\n         || name.startsWith(\"org.aspectj.\")\n+        || name.startsWith(\"datadog.\")\n         || name.startsWith(\"com.intellij.rt.debugger.\")\n         || name.startsWith(\"com.p6spy.\")\n         || name.startsWith(\"com.dynatrace.\")\n         || name.startsWith(\"com.jloadtrace.\")\n         || name.startsWith(\"com.appdynamics.\")\n+        || name.startsWith(\"com.newrelic.\")", "originalCommit": "6d5c65c5a15c3dd09576fe4ea1833dc996e25bd0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUyMzkzMg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1812#discussion_r533523932", "bodyText": "do you propose to remove com.newrelic. from here or are those classes used only internally at NR?", "author": "pavolloffay", "createdAt": "2020-12-01T15:56:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxMzk3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUyNTk3Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1812#discussion_r533525972", "bodyText": "I don't have a proposal (I'm not at NR any more), but I was responsible for removing this originally, because NR wanted to be able to instrument their own code with the otel agent, and they couldn't because of this.", "author": "jkwatson", "createdAt": "2020-12-01T15:58:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxMzk3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU2NzA3NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1812#discussion_r533567074", "bodyText": "Is there anybody from NewRelic to comment?\ncc) @breedx-nr\nMaybe we could exclude some subpackages:\nhttps://github.com/newrelic/newrelic-java-agent/tree/main/newrelic-agent/src/main/java/com/newrelic/agent\nhttps://github.com/newrelic/newrelic-java-agent/tree/main/newrelic-api/src/main/java/com/newrelic/api/agent", "author": "pavolloffay", "createdAt": "2020-12-01T16:52:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxMzk3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU4ODg0NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1812#discussion_r533588844", "bodyText": "heh. @breedx-nr is no longer at New Relic, either. I'm not sure who the right person would be.", "author": "jkwatson", "createdAt": "2020-12-01T17:23:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxMzk3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzY3NzE2NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1812#discussion_r533677164", "bodyText": "maybe @jasonjkeller?", "author": "pavolloffay", "createdAt": "2020-12-01T19:46:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxMzk3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUzNjMwNg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1812#discussion_r537536306", "bodyText": "I have changed com.newrelic to com.newrelic.agent and com.newrelic.api.agent. I doupt they use the OTEL agent internally though.", "author": "pavolloffay", "createdAt": "2020-12-07T14:11:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxMzk3NA=="}], "type": "inlineReview", "revised_code": {"commit": "227cc6b125faaecfe5c245e90c02d8868bd18e0c", "chunk": "diff --git a/javaagent-tooling/src/main/java/io/opentelemetry/javaagent/tooling/matcher/GlobalIgnoresMatcher.java b/javaagent-tooling/src/main/java/io/opentelemetry/javaagent/tooling/matcher/GlobalIgnoresMatcher.java\nindex 51d25cd99f..b2010def58 100644\n--- a/javaagent-tooling/src/main/java/io/opentelemetry/javaagent/tooling/matcher/GlobalIgnoresMatcher.java\n+++ b/javaagent-tooling/src/main/java/io/opentelemetry/javaagent/tooling/matcher/GlobalIgnoresMatcher.java\n\n@@ -60,7 +60,7 @@ public class GlobalIgnoresMatcher<T extends TypeDescription>\n     if (name.startsWith(\"net.bytebuddy.\")\n         || name.startsWith(\"jdk.\")\n         || name.startsWith(\"org.aspectj.\")\n-        || name.startsWith(\"datadog.\")\n+        || name.startsWith(\"datadog\")\n         || name.startsWith(\"com.intellij.rt.debugger.\")\n         || name.startsWith(\"com.p6spy.\")\n         || name.startsWith(\"com.dynatrace.\")\n"}}, {"oid": "227cc6b125faaecfe5c245e90c02d8868bd18e0c", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/227cc6b125faaecfe5c245e90c02d8868bd18e0c", "message": "Add nerelic and datadog package prefixes to global ignore matcher\n\nSigned-off-by: Pavol Loffay <p.loffay@gmail.com>", "committedDate": "2020-12-07T14:08:31Z", "type": "commit"}, {"oid": "9bab98a332274f7361c1fab398c7a7aed9082419", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9bab98a332274f7361c1fab398c7a7aed9082419", "message": "add dot\n\nSigned-off-by: Pavol Loffay <p.loffay@gmail.com>", "committedDate": "2020-12-07T14:08:31Z", "type": "commit"}, {"oid": "308910434d02589adf04e7f3e21eda3d358d118d", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/308910434d02589adf04e7f3e21eda3d358d118d", "message": "Scope down newrelic agent\n\nSigned-off-by: Pavol Loffay <p.loffay@gmail.com>", "committedDate": "2020-12-07T14:10:33Z", "type": "commit"}, {"oid": "308910434d02589adf04e7f3e21eda3d358d118d", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/308910434d02589adf04e7f3e21eda3d358d118d", "message": "Scope down newrelic agent\n\nSigned-off-by: Pavol Loffay <p.loffay@gmail.com>", "committedDate": "2020-12-07T14:10:33Z", "type": "forcePushed"}]}