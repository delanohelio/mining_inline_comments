{"pr_number": 696, "pr_title": "Fix muzzle failure", "pr_createdAt": "2020-07-14T22:32:32Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/696", "timeline": [{"oid": "f1d08a45a341db6ce4043773aa33f97b09260bab", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f1d08a45a341db6ce4043773aa33f97b09260bab", "message": "Fix muzzle failure", "committedDate": "2020-07-14T22:28:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcyOTk5Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/696#discussion_r454729993", "bodyText": "Can you add a comment, at least \"Order matters here\"?", "author": "anuraaga", "createdAt": "2020-07-15T01:05:00Z", "path": "instrumentation/jetty-8.0/src/main/java/io/opentelemetry/auto/instrumentation/jetty/JettyHandlerInstrumentation.java", "diffHunk": "@@ -53,11 +53,11 @@ public JettyHandlerInstrumentation() {\n   @Override\n   public String[] helperClassNames() {\n     return new String[] {\n-      packageName + \".JettyHttpServerTracer\",\n+      \"io.opentelemetry.instrumentation.servlet.HttpServletRequestGetter\",", "originalCommit": "f1d08a45a341db6ce4043773aa33f97b09260bab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc1NzUwMg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/696#discussion_r454757502", "bodyText": "yes, excellent point, done", "author": "trask", "createdAt": "2020-07-15T02:45:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcyOTk5Mw=="}], "type": "inlineReview", "revised_code": {"commit": "7f7980a37f11ea8ec09b3b357336ac6a85adc053", "chunk": "diff --git a/instrumentation/jetty-8.0/src/main/java/io/opentelemetry/auto/instrumentation/jetty/JettyHandlerInstrumentation.java b/instrumentation/jetty-8.0/src/main/java/io/opentelemetry/auto/instrumentation/jetty/JettyHandlerInstrumentation.java\nindex a61177701b..fd9c5fcfcc 100644\n--- a/instrumentation/jetty-8.0/src/main/java/io/opentelemetry/auto/instrumentation/jetty/JettyHandlerInstrumentation.java\n+++ b/instrumentation/jetty-8.0/src/main/java/io/opentelemetry/auto/instrumentation/jetty/JettyHandlerInstrumentation.java\n\n@@ -52,6 +52,8 @@ public final class JettyHandlerInstrumentation extends Instrumenter.Default {\n \n   @Override\n   public String[] helperClassNames() {\n+    // order matters here because subclasses (e.g. JettyHttpServerTracer) need to be injected into\n+    // the class loader after their super classes (e.g. Servlet3HttpServerTracer)\n     return new String[] {\n       \"io.opentelemetry.instrumentation.servlet.HttpServletRequestGetter\",\n       \"io.opentelemetry.instrumentation.servlet.ServletHttpServerTracer\",\n"}}, {"oid": "7f7980a37f11ea8ec09b3b357336ac6a85adc053", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/7f7980a37f11ea8ec09b3b357336ac6a85adc053", "message": "comment", "committedDate": "2020-07-15T02:45:24Z", "type": "commit"}]}