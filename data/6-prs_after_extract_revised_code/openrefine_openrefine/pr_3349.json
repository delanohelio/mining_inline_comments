{"pr_number": 3349, "pr_title": "Add Wynn to fingerprint to support Old English texts", "pr_createdAt": "2020-11-22T20:36:48Z", "pr_url": "https://github.com/OpenRefine/OpenRefine/pull/3349", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMzY5NA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3349#discussion_r532123694", "bodyText": "Is case folding not working correctly? We shouldn't need two entries.\nAs long as we're doing this, should we map the rest of the wynn forms? http://www.fileformat.info/info/unicode/char/search.htm?q=wynn&preview=entity\nAll runes? http://www.fileformat.info/info/unicode/char/search.htm?q=runic&preview=entity", "author": "tfmorris", "createdAt": "2020-11-29T00:32:39Z", "path": "main/src/com/google/refine/clustering/binning/FingerprintKeyer.java", "diffHunk": "@@ -85,6 +85,8 @@\n             .put(\"\u0153\", \"oe\")\n             .put(\"\u1e9c\", \"s\") // more long S forms\n             .put(\"\u1e9d\", \"s\")\n+            .put(\"\u01f7\",\"w\") // Wynn from Old English modernly transliterated to w", "originalCommit": "f9e1fc3de1843b2c1b46e9fc1cb8a41b9416c151", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyNjAxNA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3349#discussion_r532126014", "bodyText": "You can take this PR over Tom.  I've got what I needed out of of it to unblock me.  If it's useful for others or needs more work to be more useful...have at it.\nSorry I don't understand what you mean about the case folding.  I didn't see case (capitals) applied if that's what you mean, but I do have them in the examples in the issue.", "author": "thadguidry", "createdAt": "2020-11-29T01:03:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMzY5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyNjkyOA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3349#discussion_r532126928", "bodyText": "The mapping that I was following was from the Unicode spec itself.  In particular the scf and slc, which I still find a bit weird on some glyphs.  http://www.unicode.org/reports/tr44/tr44-14.html#Regular_Expressions_Table", "author": "thadguidry", "createdAt": "2020-11-29T01:15:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMzY5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyNzM1MA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3349#discussion_r532127350", "bodyText": "and where I was trying to get fingerprint and ngramFingerprint to follow the rules of scf and slc by default.  If that's reading too much into it, then I goofed and sorry, but felt they were sensible most of the time for Old English texts.", "author": "thadguidry", "createdAt": "2020-11-29T01:20:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMzY5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEzMzc3OA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3349#discussion_r532133778", "bodyText": "The string is lowercased before it gets to this point, so only the lowercase substitution is needed.", "author": "tfmorris", "createdAt": "2020-11-29T02:45:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMzY5NA=="}], "type": "inlineReview", "revised_code": {"commit": "3d30897b3b5b28541582f527d20ef6f648c65377", "chunk": "diff --git a/main/src/com/google/refine/clustering/binning/FingerprintKeyer.java b/main/src/com/google/refine/clustering/binning/FingerprintKeyer.java\nindex a7da00b90..c7757ea98 100644\n--- a/main/src/com/google/refine/clustering/binning/FingerprintKeyer.java\n+++ b/main/src/com/google/refine/clustering/binning/FingerprintKeyer.java\n\n@@ -85,8 +86,6 @@ public class FingerprintKeyer extends Keyer {\n             .put(\"\u0153\", \"oe\")\n             .put(\"\u1e9c\", \"s\") // more long S forms\n             .put(\"\u1e9d\", \"s\")\n-            .put(\"\u01f7\",\"w\") // Wynn from Old English modernly transliterated to w\n-            .put(\"\u01bf\",\"w\") // Wynn same ^^\n             .build();\n \n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMzgyMw==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3349#discussion_r532123823", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // WIP: These we know should be folded based on research (Wikipedia,etc.), and modern expectations (transliterations) by researchers (philologists)\n          \n          \n            \n                    {\"\u01f7\u01bf\",\n          \n          \n            \n                     \"ww\"},\n          \n          \n            \n                    {\"\u01f7\u01bf\", \"ww\"}, // Old English letter wynn\n          \n      \n    \n    \n  \n\nLet's also relocate this up below the test for eth and thorn since they're similar.", "author": "tfmorris", "createdAt": "2020-11-29T00:34:37Z", "path": "main/tests/server/src/com/google/refine/clustering/binning/KeyerTests.java", "diffHunk": "@@ -100,6 +100,9 @@\n //         \"bbddddhiikkllmnnooooopprssssttttuuuuyyzz                      aaiioouuuuuuuuuux\"},\n //        {\"\u01de\u01df\u01e0\u01e1\u01e2\u01e3\u01e4\u01e5\u01e6\u01e7\u01e8\u01e9\u01ea\u01eb\u01ec\u01ed\u01ee\u01ef\u01f0\u01f1\u01f2\u01f3\u01f4\u01f5\u01f6\u01f7\u01f8\u01f9\u01fa\u01fb\u01fc\u01fd\u01fe\u01ff\u0200\u0201\u0202\u0203\u0204\u0205\u0206\u0207\u0208\u0209\u020a\u020b\u020c\u020d\u020e\u020f\u0210\u0211\u0212\u0213\u0214\u0215\u0216\u0217\u0218\u0219\u021a\u021b\u021c\u021d\u021e\u021f\u0220\u0221\u0222\u0223\u0224\u0225\u0226\u0227\u0228\u0229\u022a\u022b\u022c\u022d\u022e\u022f\u0230\u0231\u0232\u0233\u0234\u0235\u0236\u0237\u0238\u0239\u023a\u023b\u023c\u023d\u023e\u023f\u0240\u0241\u0242\u0243\u0244\u0245\u0246\u0247\u0248\u0249\u024a\u024b\u024c\u024d\u024e\u024f\",\n //         \"aaaaaeaeggggkkqqqqqssjdzdzggpnnaaaeaeooaaaeeeeeiiiioooorrrruuuusstt    zzaaeeooooooooyy\"},\n+        // WIP: These we know should be folded based on research (Wikipedia,etc.), and modern expectations (transliterations) by researchers (philologists)\n+        {\"\u01f7\u01bf\",\n+         \"ww\"},", "originalCommit": "f9e1fc3de1843b2c1b46e9fc1cb8a41b9416c151", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3d30897b3b5b28541582f527d20ef6f648c65377", "chunk": "diff --git a/main/tests/server/src/com/google/refine/clustering/binning/KeyerTests.java b/main/tests/server/src/com/google/refine/clustering/binning/KeyerTests.java\nindex 0b939cf92..d141fdf96 100644\n--- a/main/tests/server/src/com/google/refine/clustering/binning/KeyerTests.java\n+++ b/main/tests/server/src/com/google/refine/clustering/binning/KeyerTests.java\n\n@@ -100,9 +100,6 @@ public class KeyerTests extends RefineTest {\n //         \"bbddddhiikkllmnnooooopprssssttttuuuuyyzz                      aaiioouuuuuuuuuux\"},\n //        {\"\u01de\u01df\u01e0\u01e1\u01e2\u01e3\u01e4\u01e5\u01e6\u01e7\u01e8\u01e9\u01ea\u01eb\u01ec\u01ed\u01ee\u01ef\u01f0\u01f1\u01f2\u01f3\u01f4\u01f5\u01f6\u01f7\u01f8\u01f9\u01fa\u01fb\u01fc\u01fd\u01fe\u01ff\u0200\u0201\u0202\u0203\u0204\u0205\u0206\u0207\u0208\u0209\u020a\u020b\u020c\u020d\u020e\u020f\u0210\u0211\u0212\u0213\u0214\u0215\u0216\u0217\u0218\u0219\u021a\u021b\u021c\u021d\u021e\u021f\u0220\u0221\u0222\u0223\u0224\u0225\u0226\u0227\u0228\u0229\u022a\u022b\u022c\u022d\u022e\u022f\u0230\u0231\u0232\u0233\u0234\u0235\u0236\u0237\u0238\u0239\u023a\u023b\u023c\u023d\u023e\u023f\u0240\u0241\u0242\u0243\u0244\u0245\u0246\u0247\u0248\u0249\u024a\u024b\u024c\u024d\u024e\u024f\",\n //         \"aaaaaeaeggggkkqqqqqssjdzdzggpnnaaaeaeooaaaeeeeeiiiioooorrrruuuusstt    zzaaeeooooooooyy\"},\n-        // WIP: These we know should be folded based on research (Wikipedia,etc.), and modern expectations (transliterations) by researchers (philologists)\n-        {\"\u01f7\u01bf\",\n-         \"ww\"},\n         // Latin Extended Additional\n         {\"\u1e00\u1e01\u1e02\u1e03\u1e04\u1e05\u1e06\u1e07\u1e08\u1e09\u1e0a\u1e0b\u1e0c\u1e0d\u1e0e\u1e0f\u1e10\u1e11\u1e12\u1e13\u1e14\u1e15\u1e16\u1e17\u1e18\u1e19\u1e1a\u1e1b\u1e1c\u1e1d\u1e1e\u1e1f\u1e20\u1e21\u1e22\u1e23\u1e24\u1e25\u1e26\u1e27\u1e28\u1e29\u1e2a\u1e2b\u1e2c\u1e2d\u1e2e\u1e2f\u1e30\u1e31\u1e32\u1e33\u1e34\u1e35\u1e36\u1e37\u1e38\u1e39\u1e3a\u1e3b\u1e3c\u1e3d\u1e3e\u1e3f\u1e40\u1e41\u1e42\u1e43\u1e44\u1e45\u1e46\u1e47\u1e48\u1e49\u1e4a\u1e4b\u1e4c\u1e4d\u1e4e\u1e4f\u1e50\u1e51\u1e52\u1e53\u1e54\u1e55\u1e56\u1e57\",\n          \"aabbbbbbccddddddddddeeeeeeeeeeffgghhhhhhhhhhiiiikkkkkkllllllllmmmmmmnnnnnnnnoooooooopppp\"},\n"}}, {"oid": "3d30897b3b5b28541582f527d20ef6f648c65377", "url": "https://github.com/OpenRefine/OpenRefine/commit/3d30897b3b5b28541582f527d20ef6f648c65377", "message": "Add Wynn to fingerprint to support Old English texts", "committedDate": "2020-11-29T02:40:49Z", "type": "commit"}]}