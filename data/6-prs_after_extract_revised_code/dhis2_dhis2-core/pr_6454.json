{"pr_number": 6454, "pr_title": "refactor: address code duplication in Tracker Error reporter", "pr_createdAt": "2020-10-21T08:04:18Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/6454", "timeline": [{"oid": "02120731d0044cb77f21c67c852180132068832c", "url": "https://github.com/dhis2/dhis2-core/commit/02120731d0044cb77f21c67c852180132068832c", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-08-27T14:24:34Z", "type": "commit"}, {"oid": "51771650446f2011bb65f40224439144d23a6045", "url": "https://github.com/dhis2/dhis2-core/commit/51771650446f2011bb65f40224439144d23a6045", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-08-27T15:22:19Z", "type": "commit"}, {"oid": "714fe2430869802e1ebdb02165f26d4a84456a51", "url": "https://github.com/dhis2/dhis2-core/commit/714fe2430869802e1ebdb02165f26d4a84456a51", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-01T12:37:00Z", "type": "commit"}, {"oid": "4eb958db2b25180e62fe2270ee791600d9c76e33", "url": "https://github.com/dhis2/dhis2-core/commit/4eb958db2b25180e62fe2270ee791600d9c76e33", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-02T10:30:36Z", "type": "commit"}, {"oid": "d873074dd2496c9c383babe76ffb2f9896463c8e", "url": "https://github.com/dhis2/dhis2-core/commit/d873074dd2496c9c383babe76ffb2f9896463c8e", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-04T09:21:13Z", "type": "commit"}, {"oid": "163623769a257f49d01654468f2820b7130254e0", "url": "https://github.com/dhis2/dhis2-core/commit/163623769a257f49d01654468f2820b7130254e0", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-10T09:22:44Z", "type": "commit"}, {"oid": "2dbfa1afe0d78471d5e1fbd85effde7016755ab2", "url": "https://github.com/dhis2/dhis2-core/commit/2dbfa1afe0d78471d5e1fbd85effde7016755ab2", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-18T08:35:19Z", "type": "commit"}, {"oid": "410d1b8ae4e3c7d3443c2d183e9734c2c99c03ab", "url": "https://github.com/dhis2/dhis2-core/commit/410d1b8ae4e3c7d3443c2d183e9734c2c99c03ab", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-22T14:52:59Z", "type": "commit"}, {"oid": "f3f808d5545bdc9a09b04145326145aa35fe95c7", "url": "https://github.com/dhis2/dhis2-core/commit/f3f808d5545bdc9a09b04145326145aa35fe95c7", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-23T12:51:56Z", "type": "commit"}, {"oid": "119a44276d7f8131e0c50ac68e37e4c58a94321d", "url": "https://github.com/dhis2/dhis2-core/commit/119a44276d7f8131e0c50ac68e37e4c58a94321d", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-23T13:20:22Z", "type": "commit"}, {"oid": "7f46bfe45381b9f3f6a6c6ce17920627ba8471f6", "url": "https://github.com/dhis2/dhis2-core/commit/7f46bfe45381b9f3f6a6c6ce17920627ba8471f6", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-23T13:33:44Z", "type": "commit"}, {"oid": "13a184206e3af6c3ab0cecb869a83c0cc9a3a363", "url": "https://github.com/dhis2/dhis2-core/commit/13a184206e3af6c3ab0cecb869a83c0cc9a3a363", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-24T12:26:08Z", "type": "commit"}, {"oid": "34ba07764d15be691c4bc643b1ea59755a86db18", "url": "https://github.com/dhis2/dhis2-core/commit/34ba07764d15be691c4bc643b1ea59755a86db18", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-24T12:55:19Z", "type": "commit"}, {"oid": "e8206d5a037db2fe2dbb2a5a8b73d0f22b8d32ba", "url": "https://github.com/dhis2/dhis2-core/commit/e8206d5a037db2fe2dbb2a5a8b73d0f22b8d32ba", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-24T15:04:14Z", "type": "commit"}, {"oid": "74dc2fdd1db373666e11dd75fb705811b2f3a06e", "url": "https://github.com/dhis2/dhis2-core/commit/74dc2fdd1db373666e11dd75fb705811b2f3a06e", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-25T13:59:00Z", "type": "commit"}, {"oid": "623c13181847b33d1ec93dd7b847a3b2501aa04e", "url": "https://github.com/dhis2/dhis2-core/commit/623c13181847b33d1ec93dd7b847a3b2501aa04e", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-30T10:37:43Z", "type": "commit"}, {"oid": "ee542ef90c1a50e378505f4f7da424ba0b98fd41", "url": "https://github.com/dhis2/dhis2-core/commit/ee542ef90c1a50e378505f4f7da424ba0b98fd41", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-10-06T07:38:04Z", "type": "commit"}, {"oid": "6aed0d872bf28d809bae2c64e9f07dd90bff8fef", "url": "https://github.com/dhis2/dhis2-core/commit/6aed0d872bf28d809bae2c64e9f07dd90bff8fef", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-10-16T09:52:48Z", "type": "commit"}, {"oid": "66f4bfbd56b0ba3a046b8487743e8e4f19c82326", "url": "https://github.com/dhis2/dhis2-core/commit/66f4bfbd56b0ba3a046b8487743e8e4f19c82326", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-10-16T10:01:26Z", "type": "commit"}, {"oid": "f8af2df7857664dc1d9f35793e0c735a11e374d2", "url": "https://github.com/dhis2/dhis2-core/commit/f8af2df7857664dc1d9f35793e0c735a11e374d2", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-10-16T11:01:57Z", "type": "commit"}, {"oid": "49d5b715abc6e85599ae6db14ec918326538486b", "url": "https://github.com/dhis2/dhis2-core/commit/49d5b715abc6e85599ae6db14ec918326538486b", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-10-20T10:21:18Z", "type": "commit"}, {"oid": "4f7df923c6e2aee61d987dc0a9693bf1d0390431", "url": "https://github.com/dhis2/dhis2-core/commit/4f7df923c6e2aee61d987dc0a9693bf1d0390431", "message": "refactor: address code duplication in Tracker Error reporter", "committedDate": "2020-10-21T08:03:42Z", "type": "commit"}, {"oid": "9e369616463b8ef41ba74229cfc69d73da323459", "url": "https://github.com/dhis2/dhis2-core/commit/9e369616463b8ef41ba74229cfc69d73da323459", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-11-03T09:22:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUyNjM5OA==", "url": "https://github.com/dhis2/dhis2-core/pull/6454#discussion_r516526398", "bodyText": "Nice work \ud83d\udc4d I guess this method could easily be tested and we could add a test later, approving now.", "author": "larshelge", "createdAt": "2020-11-03T09:28:55Z", "path": "dhis-2/dhis-services/dhis-service-tracker/src/main/java/org/hisp/dhis/tracker/report/TrackerReportUtils.java", "diffHunk": "@@ -0,0 +1,92 @@\n+package org.hisp.dhis.tracker.report;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import java.text.DateFormat;\n+import java.util.Date;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.hisp.dhis.common.IdentifiableObject;\n+import org.hisp.dhis.tracker.TrackerIdentifier;\n+import org.hisp.dhis.tracker.bundle.TrackerBundle;\n+import org.hisp.dhis.tracker.domain.Enrollment;\n+import org.hisp.dhis.tracker.domain.Event;\n+import org.hisp.dhis.tracker.domain.TrackedEntity;\n+import org.hisp.dhis.util.ObjectUtils;\n+\n+/**\n+ * @author Luciano Fiandesio\n+ */\n+public class TrackerReportUtils\n+{\n+    private TrackerReportUtils()\n+    {\n+\n+    }\n+\n+    protected static List<String> buildArgumentList( TrackerBundle bundle, List<Object> arguments )", "originalCommit": "4f7df923c6e2aee61d987dc0a9693bf1d0390431", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2563719c9e5bd0bb727c4f46d216d7b83fd2a4ca", "chunk": "diff --git a/dhis-2/dhis-services/dhis-service-tracker/src/main/java/org/hisp/dhis/tracker/report/TrackerReportUtils.java b/dhis-2/dhis-services/dhis-service-tracker/src/main/java/org/hisp/dhis/tracker/report/TrackerReportUtils.java\ndeleted file mode 100644\nindex 6600820a6b..0000000000\n--- a/dhis-2/dhis-services/dhis-service-tracker/src/main/java/org/hisp/dhis/tracker/report/TrackerReportUtils.java\n+++ /dev/null\n\n@@ -1,92 +0,0 @@\n-package org.hisp.dhis.tracker.report;\n-\n-/*\n- * Copyright (c) 2004-2020, University of Oslo\n- * All rights reserved.\n- *\n- * Redistribution and use in source and binary forms, with or without\n- * modification, are permitted provided that the following conditions are met:\n- * Redistributions of source code must retain the above copyright notice, this\n- * list of conditions and the following disclaimer.\n- *\n- * Redistributions in binary form must reproduce the above copyright notice,\n- * this list of conditions and the following disclaimer in the documentation\n- * and/or other materials provided with the distribution.\n- * Neither the name of the HISP project nor the names of its contributors may\n- * be used to endorse or promote products derived from this software without\n- * specific prior written permission.\n- *\n- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n- * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n- * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n- * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n- * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n- * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n- * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n- * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n- */\n-\n-import java.text.DateFormat;\n-import java.util.Date;\n-import java.util.List;\n-import java.util.stream.Collectors;\n-\n-import org.hisp.dhis.common.IdentifiableObject;\n-import org.hisp.dhis.tracker.TrackerIdentifier;\n-import org.hisp.dhis.tracker.bundle.TrackerBundle;\n-import org.hisp.dhis.tracker.domain.Enrollment;\n-import org.hisp.dhis.tracker.domain.Event;\n-import org.hisp.dhis.tracker.domain.TrackedEntity;\n-import org.hisp.dhis.util.ObjectUtils;\n-\n-/**\n- * @author Luciano Fiandesio\n- */\n-public class TrackerReportUtils\n-{\n-    private TrackerReportUtils()\n-    {\n-\n-    }\n-\n-    protected static List<String> buildArgumentList( TrackerBundle bundle, List<Object> arguments )\n-    {\n-        final TrackerIdentifier identifier = TrackerIdentifier.builder().idScheme( bundle.getIdentifier() ).build();\n-        return arguments.stream().map( arg -> parseArgs( identifier, arg ) ).collect( Collectors.toList() );\n-    }\n-\n-    private static String parseArgs( TrackerIdentifier identifier, Object argument )\n-    {\n-        if ( String.class.isAssignableFrom( ObjectUtils.firstNonNull( argument, \"NULL\" ).getClass() ) )\n-        {\n-            return ObjectUtils.firstNonNull( argument, \"NULL\" ).toString();\n-        }\n-        else if ( IdentifiableObject.class.isAssignableFrom( argument.getClass() ) )\n-        {\n-            return identifier.getIdAndName( (IdentifiableObject) argument );\n-        }\n-        else if ( Date.class.isAssignableFrom( argument.getClass() ) )\n-        {\n-            return (DateFormat.getInstance().format( argument ));\n-        }\n-        else if ( Enrollment.class.isAssignableFrom( argument.getClass() ) )\n-        {\n-            Enrollment enrollment = (Enrollment) argument;\n-            return enrollment.getClass().getSimpleName() + \" (\" + enrollment.getEnrollment() + \")\";\n-        }\n-        else if ( Event.class.isAssignableFrom( argument.getClass() ) )\n-        {\n-            Event event = (Event) argument;\n-            return event.getClass().getSimpleName() + \" (\" + event.getEvent() + \")\";\n-        }\n-        else if ( TrackedEntity.class.isAssignableFrom( argument.getClass() ) )\n-        {\n-            TrackedEntity entity = (TrackedEntity) argument;\n-            return entity.getClass().getSimpleName() + \" (\" + entity.getTrackedEntity() + \")\";\n-        }\n-\n-        return \"\";\n-    }\n-}\n\\ No newline at end of file\n"}}, {"oid": "2563719c9e5bd0bb727c4f46d216d7b83fd2a4ca", "url": "https://github.com/dhis2/dhis2-core/commit/2563719c9e5bd0bb727c4f46d216d7b83fd2a4ca", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-11-03T09:29:23Z", "type": "commit"}, {"oid": "126534ea31680cbf4e1d013543d47803627e8f26", "url": "https://github.com/dhis2/dhis2-core/commit/126534ea31680cbf4e1d013543d47803627e8f26", "message": "Merge with master", "committedDate": "2020-11-03T09:36:10Z", "type": "commit"}]}