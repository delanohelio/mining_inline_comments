{"pr_number": 5644, "pr_title": "feat: Add font style to Visualization [DHIS2-8426]", "pr_createdAt": "2020-05-27T10:15:42Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/5644", "timeline": [{"oid": "edfa6d8b0feccc9da285a66934a5810ac7e2631a", "url": "https://github.com/dhis2/dhis2-core/commit/edfa6d8b0feccc9da285a66934a5810ac7e2631a", "message": "Add new data model", "committedDate": "2020-05-27T09:40:15Z", "type": "commit"}, {"oid": "2804fba5ed6337458652bd3d791dd1654e107caa", "url": "https://github.com/dhis2/dhis2-core/commit/2804fba5ed6337458652bd3d791dd1654e107caa", "message": "Merge branch 'master' into DHIS2-8426-text-styling", "committedDate": "2020-05-27T09:49:19Z", "type": "commit"}, {"oid": "eb359f2feed30a1b95a03c203953ea32b3a83add", "url": "https://github.com/dhis2/dhis2-core/commit/eb359f2feed30a1b95a03c203953ea32b3a83add", "message": "Add tests", "committedDate": "2020-05-27T10:13:29Z", "type": "commit"}, {"oid": "f430da51f586eb2554c1a5ccbb0803b7efe94a10", "url": "https://github.com/dhis2/dhis2-core/commit/f430da51f586eb2554c1a5ccbb0803b7efe94a10", "message": "Minor", "committedDate": "2020-05-27T10:24:42Z", "type": "commit"}, {"oid": "dfc8917dcd244952e1d2975670a8a97db0ad4d3b", "url": "https://github.com/dhis2/dhis2-core/commit/dfc8917dcd244952e1d2975670a8a97db0ad4d3b", "message": "Test fix", "committedDate": "2020-05-27T13:23:31Z", "type": "commit"}, {"oid": "250acd3663958b4583c059e0ab0638574bbb1ed3", "url": "https://github.com/dhis2/dhis2-core/commit/250acd3663958b4583c059e0ab0638574bbb1ed3", "message": "Test fix", "committedDate": "2020-05-27T13:25:56Z", "type": "commit"}, {"oid": "ed543302c880eb8275e847056d54bf2d7e3a5158", "url": "https://github.com/dhis2/dhis2-core/commit/ed543302c880eb8275e847056d54bf2d7e3a5158", "message": "Javadoc", "committedDate": "2020-05-27T13:29:03Z", "type": "commit"}, {"oid": "a0d3b04e0264664b3061fabe3caea64243639e15", "url": "https://github.com/dhis2/dhis2-core/commit/a0d3b04e0264664b3061fabe3caea64243639e15", "message": "Minor", "committedDate": "2020-05-27T13:30:43Z", "type": "commit"}, {"oid": "566dd6079bac87f4f912d8856f0a6f41a3cb48bb", "url": "https://github.com/dhis2/dhis2-core/commit/566dd6079bac87f4f912d8856f0a6f41a3cb48bb", "message": "Minor", "committedDate": "2020-05-27T13:49:51Z", "type": "commit"}, {"oid": "2043e5e3fa1f9096f28fc64d33e692bc7d0907d3", "url": "https://github.com/dhis2/dhis2-core/commit/2043e5e3fa1f9096f28fc64d33e692bc7d0907d3", "message": "Test", "committedDate": "2020-05-27T14:21:54Z", "type": "commit"}, {"oid": "4082fb3738737ee1ff3ada728df1a072c80a50c5", "url": "https://github.com/dhis2/dhis2-core/commit/4082fb3738737ee1ff3ada728df1a072c80a50c5", "message": "Add font", "committedDate": "2020-05-27T14:40:39Z", "type": "commit"}, {"oid": "b6f961b5eb7e98bb54e7c1af8dfb5c9d0f08e5da", "url": "https://github.com/dhis2/dhis2-core/commit/b6f961b5eb7e98bb54e7c1af8dfb5c9d0f08e5da", "message": "Minor", "committedDate": "2020-05-27T14:44:49Z", "type": "commit"}, {"oid": "d8d884cee99af7396c778992faa205ac1923613c", "url": "https://github.com/dhis2/dhis2-core/commit/d8d884cee99af7396c778992faa205ac1923613c", "message": "Minor", "committedDate": "2020-05-27T14:45:52Z", "type": "commit"}, {"oid": "883d3ebca16e0ff2bfcdcbc9a7f54ee2ec0c21c3", "url": "https://github.com/dhis2/dhis2-core/commit/883d3ebca16e0ff2bfcdcbc9a7f54ee2ec0c21c3", "message": "Test fix", "committedDate": "2020-05-27T14:49:51Z", "type": "commit"}, {"oid": "7a128ad21446addecacb61c04bd3bcb9afeec5a5", "url": "https://github.com/dhis2/dhis2-core/commit/7a128ad21446addecacb61c04bd3bcb9afeec5a5", "message": "Test", "committedDate": "2020-05-27T15:09:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxODMxNQ==", "url": "https://github.com/dhis2/dhis2-core/pull/5644#discussion_r431318315", "bodyText": "Can we use boolean here? Or is it a Jackson requirement?", "author": "luciano-fiandesio", "createdAt": "2020-05-27T17:30:04Z", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/FontStyle.java", "diffHunk": "@@ -0,0 +1,138 @@\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+package org.hisp.dhis.common;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n+import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\n+\n+import java.io.Serializable;\n+\n+import org.hisp.dhis.schema.annotation.PropertyRange;\n+\n+import static org.hisp.dhis.common.DxfNamespaces.DXF_2_0;\n+\n+/**\n+ * Class representing various text styling properties.\n+ *\n+ * @author Lars Helge Overland\n+ */\n+@JacksonXmlRootElement( localName = \"fontStyle\", namespace = DXF_2_0 )\n+public class FontStyle\n+    implements Serializable\n+{\n+    private Font font;\n+\n+    private Integer fontSize;\n+\n+    private Boolean bold;", "originalCommit": "7a128ad21446addecacb61c04bd3bcb9afeec5a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYyNDgzNA==", "url": "https://github.com/dhis2/dhis2-core/pull/5644#discussion_r431624834", "bodyText": "The thinking is to use object properties consistently here to be able to represent the state of \"no value\". I.e. Integer (not int) for font size because it is hard to set a sensible default value/the default value might be client specific. Admittedly, we might want to have bold = false as a default, but again, it might be useful for clients to differentiate between an explicit \"no bold\" value and no value at all. This is debatable but I was landing on object properties.", "author": "larshelge", "createdAt": "2020-05-28T07:07:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxODMxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYzNzI0NQ==", "url": "https://github.com/dhis2/dhis2-core/pull/5644#discussion_r431637245", "bodyText": "Ok, got it", "author": "luciano-fiandesio", "createdAt": "2020-05-28T07:33:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxODMxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "a431a8223d28237f1ccb00b026cf10f6a9f446ea", "chunk": "diff --git a/dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/FontStyle.java b/dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/FontStyle.java\nindex 42a69b55ef..7a1899f94c 100644\n--- a/dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/FontStyle.java\n+++ b/dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/FontStyle.java\n\n@@ -124,8 +124,12 @@ public class FontStyle\n         this.underline = underline;\n     }\n \n+    /**\n+     * Text color in hexadecimal notation, specified with {@code #RRGGBB}.\n+     */\n     @JsonProperty\n     @JacksonXmlProperty( namespace = DXF_2_0 )\n+    @PropertyRange( min = 7, max = 7 )\n     public String getTextColor()\n     {\n         return textColor;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYyNTgyMA==", "url": "https://github.com/dhis2/dhis2-core/pull/5644#discussion_r431625820", "bodyText": "We can of course add more fonts to this enum as we see the need.", "author": "larshelge", "createdAt": "2020-05-28T07:09:54Z", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/Font.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+package org.hisp.dhis.common;\n+\n+/**\n+ * Enum representing text fonts.\n+ *\n+ * @author Lars Helge Overland\n+ */\n+public enum Font\n+{\n+    ARIAL,\n+    SANS_SERIF,\n+    VERDANA,\n+    ROBOTO;", "originalCommit": "7a128ad21446addecacb61c04bd3bcb9afeec5a5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cb14a63df8abbc4075c6234c3b612c478a602127", "chunk": "diff --git a/dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/Font.java b/dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/Font.java\nindex 547c8f3bda..d623d8a2d3 100644\n--- a/dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/Font.java\n+++ b/dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/Font.java\n\n@@ -28,12 +28,15 @@\n \n package org.hisp.dhis.common;\n \n+import java.io.Serializable;\n+\n /**\n  * Enum representing text fonts.\n  *\n  * @author Lars Helge Overland\n  */\n public enum Font\n+    implements Serializable\n {\n     ARIAL,\n     SANS_SERIF,\n"}}, {"oid": "a431a8223d28237f1ccb00b026cf10f6a9f446ea", "url": "https://github.com/dhis2/dhis2-core/commit/a431a8223d28237f1ccb00b026cf10f6a9f446ea", "message": "Javadoc", "committedDate": "2020-05-28T07:16:34Z", "type": "commit"}, {"oid": "209fee437086a4a8de914ba4862c256813a95b6e", "url": "https://github.com/dhis2/dhis2-core/commit/209fee437086a4a8de914ba4862c256813a95b6e", "message": "Merge branch 'master' into DHIS2-8426-text-styling", "committedDate": "2020-05-28T07:26:17Z", "type": "commit"}, {"oid": "c1f282eb350efc5cb7432f1b9277a5045bde3055", "url": "https://github.com/dhis2/dhis2-core/commit/c1f282eb350efc5cb7432f1b9277a5045bde3055", "message": "Minor", "committedDate": "2020-05-28T07:31:05Z", "type": "commit"}, {"oid": "5d48bea7685d015d2f08aeb9deb5fb8ef1c2c2f2", "url": "https://github.com/dhis2/dhis2-core/commit/5d48bea7685d015d2f08aeb9deb5fb8ef1c2c2f2", "message": "Merge with master", "committedDate": "2020-06-24T14:17:56Z", "type": "commit"}, {"oid": "0dcc76f22c939a657295bd3cfb3d6cc049b42de5", "url": "https://github.com/dhis2/dhis2-core/commit/0dcc76f22c939a657295bd3cfb3d6cc049b42de5", "message": "Add TextAlign", "committedDate": "2020-07-03T09:08:55Z", "type": "commit"}, {"oid": "242ee869518d20fe45e3c3d11928b4533f59e7fe", "url": "https://github.com/dhis2/dhis2-core/commit/242ee869518d20fe45e3c3d11928b4533f59e7fe", "message": "Merge with master", "committedDate": "2020-07-03T09:13:04Z", "type": "commit"}, {"oid": "98a2d8d96fddeb625529116eb0cc2b1a7cc6c4e4", "url": "https://github.com/dhis2/dhis2-core/commit/98a2d8d96fddeb625529116eb0cc2b1a7cc6c4e4", "message": "Minor", "committedDate": "2020-07-03T09:14:35Z", "type": "commit"}, {"oid": "a338cb0f59ea43f456582ee47309cdbee4ebc3c0", "url": "https://github.com/dhis2/dhis2-core/commit/a338cb0f59ea43f456582ee47309cdbee4ebc3c0", "message": "Update test", "committedDate": "2020-07-03T09:16:30Z", "type": "commit"}, {"oid": "87d6a8e45fe1a087c2349c1a0a02015e09f7819c", "url": "https://github.com/dhis2/dhis2-core/commit/87d6a8e45fe1a087c2349c1a0a02015e09f7819c", "message": "Update test", "committedDate": "2020-07-03T09:18:13Z", "type": "commit"}, {"oid": "a07a57bedcc7804412db9c6b5eaac9ed813efe5d", "url": "https://github.com/dhis2/dhis2-core/commit/a07a57bedcc7804412db9c6b5eaac9ed813efe5d", "message": "Update test", "committedDate": "2020-07-03T09:21:10Z", "type": "commit"}, {"oid": "cb14a63df8abbc4075c6234c3b612c478a602127", "url": "https://github.com/dhis2/dhis2-core/commit/cb14a63df8abbc4075c6234c3b612c478a602127", "message": "Serializable", "committedDate": "2020-07-03T10:15:02Z", "type": "commit"}, {"oid": "5d4ae720f91bb94a4701061a6722faeead21a35e", "url": "https://github.com/dhis2/dhis2-core/commit/5d4ae720f91bb94a4701061a6722faeead21a35e", "message": "Rename chart series", "committedDate": "2020-07-03T11:09:59Z", "type": "commit"}, {"oid": "cd5cce7023fa2837d69794c9ace84cacf710c527", "url": "https://github.com/dhis2/dhis2-core/commit/cd5cce7023fa2837d69794c9ace84cacf710c527", "message": "Remove serializable", "committedDate": "2020-07-03T11:14:19Z", "type": "commit"}, {"oid": "9feba4f3a635fe12142346db27b8b2cde33b65bb", "url": "https://github.com/dhis2/dhis2-core/commit/9feba4f3a635fe12142346db27b8b2cde33b65bb", "message": "Minor", "committedDate": "2020-07-03T11:22:28Z", "type": "commit"}, {"oid": "b1dd811530a5cfff4f371986e79afbd8b4b32124", "url": "https://github.com/dhis2/dhis2-core/commit/b1dd811530a5cfff4f371986e79afbd8b4b32124", "message": "Minor", "committedDate": "2020-07-03T11:23:54Z", "type": "commit"}, {"oid": "6ba34c68bfe584faddecfcc8ae02054bff3934f7", "url": "https://github.com/dhis2/dhis2-core/commit/6ba34c68bfe584faddecfcc8ae02054bff3934f7", "message": "Add flyway", "committedDate": "2020-07-03T13:04:11Z", "type": "commit"}, {"oid": "73e1e07ebd5ed182dd42f54b83acb098f2d2d6d8", "url": "https://github.com/dhis2/dhis2-core/commit/73e1e07ebd5ed182dd42f54b83acb098f2d2d6d8", "message": "Rename flyway", "committedDate": "2020-07-03T13:05:59Z", "type": "commit"}]}