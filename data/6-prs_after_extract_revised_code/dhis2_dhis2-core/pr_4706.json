{"pr_number": 4706, "pr_title": "fix: Improve the data value validation [DHIS2-7905]", "pr_createdAt": "2020-01-14T09:47:13Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/4706", "timeline": [{"oid": "2e89d6bcdb299ecc88fb6f26644897bd1f326c7e", "url": "https://github.com/dhis2/dhis2-core/commit/2e89d6bcdb299ecc88fb6f26644897bd1f326c7e", "message": "feat: Multiple bool valus for data set [DHIS2-7905]\n\nAdding support for multiple boolean values for the POST dataset endpoint.", "committedDate": "2019-12-01T21:27:35Z", "type": "commit"}, {"oid": "5cb8232d8b3b91f94ac9aefa09b3f04fa932fa32", "url": "https://github.com/dhis2/dhis2-core/commit/5cb8232d8b3b91f94ac9aefa09b3f04fa932fa32", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7905", "committedDate": "2020-01-13T13:31:57Z", "type": "commit"}, {"oid": "bcc9cc89be01cffd818ce4a3e6456cfa185af38b", "url": "https://github.com/dhis2/dhis2-core/commit/bcc9cc89be01cffd818ce4a3e6456cfa185af38b", "message": "feat: Adding missing boolean conversion [DHIS2-7905]", "committedDate": "2020-01-13T15:36:50Z", "type": "commit"}, {"oid": "6e36cd03e487fd524ef4acfa060a0382cf842334", "url": "https://github.com/dhis2/dhis2-core/commit/6e36cd03e487fd524ef4acfa060a0382cf842334", "message": "feat: Improving null checking for the value [DHIS2-7905]", "committedDate": "2020-01-13T15:40:29Z", "type": "commit"}, {"oid": "89e790aabad90af2c05e976f9f8349e58a7a243b", "url": "https://github.com/dhis2/dhis2-core/commit/89e790aabad90af2c05e976f9f8349e58a7a243b", "message": "fix: Improving the data value validation [DHIS2-7905]", "committedDate": "2020-01-14T09:30:36Z", "type": "commit"}, {"oid": "aa3dd9b5c6d8f4f2ebd79eb7e665ebba0ca2a2c5", "url": "https://github.com/dhis2/dhis2-core/commit/aa3dd9b5c6d8f4f2ebd79eb7e665ebba0ca2a2c5", "message": "fix: Merging master into branch [DHIS2-7905]", "committedDate": "2020-01-14T09:46:16Z", "type": "commit"}, {"oid": "f09d74b9b4a25b83196c6c63f2470abe6c99db68", "url": "https://github.com/dhis2/dhis2-core/commit/f09d74b9b4a25b83196c6c63f2470abe6c99db68", "message": "fix: Fixing code formatting [DHIS2-7905]", "committedDate": "2020-01-14T09:48:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjI4NjM1OA==", "url": "https://github.com/dhis2/dhis2-core/pull/4706#discussion_r366286358", "bodyText": "Fix formatting: { on new line", "author": "luciano-fiandesio", "createdAt": "2020-01-14T11:27:43Z", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java", "diffHunk": "@@ -141,13 +143,12 @@ public void saveDataValue(\n         @RequestParam( required = false ) String comment,\n         @RequestParam( required = false ) boolean followUp,\n         @RequestParam( required = false ) boolean force, HttpServletResponse response )\n-        throws WebMessageException\n-    {\n-        boolean strictPeriods = (Boolean) systemSettingManager.getSystemSetting( SettingKey.DATA_IMPORT_STRICT_PERIODS );\n-        boolean strictCategoryOptionCombos = (Boolean) systemSettingManager.getSystemSetting( SettingKey.DATA_IMPORT_STRICT_CATEGORY_OPTION_COMBOS );\n-        boolean strictOrgUnits = (Boolean) systemSettingManager.getSystemSetting( SettingKey.DATA_IMPORT_STRICT_ORGANISATION_UNITS );\n-        boolean requireCategoryOptionCombo = (Boolean) systemSettingManager.getSystemSetting( SettingKey.DATA_IMPORT_REQUIRE_CATEGORY_OPTION_COMBO );\n-        FileResourceRetentionStrategy retentionStrategy = (FileResourceRetentionStrategy) systemSettingManager.getSystemSetting( SettingKey.FILE_RESOURCE_RETENTION_STRATEGY );\n+        throws WebMessageException {", "originalCommit": "f09d74b9b4a25b83196c6c63f2470abe6c99db68", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njc3MTUxMA==", "url": "https://github.com/dhis2/dhis2-core/pull/4706#discussion_r366771510", "bodyText": "Done", "author": "maikelarabori", "createdAt": "2020-01-15T09:30:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjI4NjM1OA=="}], "type": "inlineReview", "revised_code": {"commit": "855fc4aeab8fa67f39fcfce3a60abf8b8d64e698", "chunk": "diff --git a/dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java b/dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java\nindex aebd938ceb..0a6dc84d76 100644\n--- a/dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java\n+++ b/dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java\n\n@@ -143,7 +143,8 @@ public class DataValueController\n         @RequestParam( required = false ) String comment,\n         @RequestParam( required = false ) boolean followUp,\n         @RequestParam( required = false ) boolean force, HttpServletResponse response )\n-        throws WebMessageException {\n+        throws WebMessageException\n+    {\n         boolean strictPeriods = (Boolean) systemSettingManager.getSystemSetting(SettingKey.DATA_IMPORT_STRICT_PERIODS);\n         boolean strictCategoryOptionCombos = (Boolean) systemSettingManager.getSystemSetting(SettingKey.DATA_IMPORT_STRICT_CATEGORY_OPTION_COMBOS);\n         boolean strictOrgUnits = (Boolean) systemSettingManager.getSystemSetting(SettingKey.DATA_IMPORT_STRICT_ORGANISATION_UNITS);\n"}}, {"oid": "855fc4aeab8fa67f39fcfce3a60abf8b8d64e698", "url": "https://github.com/dhis2/dhis2-core/commit/855fc4aeab8fa67f39fcfce3a60abf8b8d64e698", "message": "fix: Fixing code formatting [DHIS2-7905]", "committedDate": "2020-01-14T11:50:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQzNjA4Ng==", "url": "https://github.com/dhis2/dhis2-core/pull/4706#discussion_r366436086", "bodyText": "Space after ( and before ) on all lines here.", "author": "larshelge", "createdAt": "2020-01-14T16:21:33Z", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java", "diffHunk": "@@ -141,13 +143,12 @@ public void saveDataValue(\n         @RequestParam( required = false ) String comment,\n         @RequestParam( required = false ) boolean followUp,\n         @RequestParam( required = false ) boolean force, HttpServletResponse response )\n-        throws WebMessageException\n-    {\n-        boolean strictPeriods = (Boolean) systemSettingManager.getSystemSetting( SettingKey.DATA_IMPORT_STRICT_PERIODS );\n-        boolean strictCategoryOptionCombos = (Boolean) systemSettingManager.getSystemSetting( SettingKey.DATA_IMPORT_STRICT_CATEGORY_OPTION_COMBOS );\n-        boolean strictOrgUnits = (Boolean) systemSettingManager.getSystemSetting( SettingKey.DATA_IMPORT_STRICT_ORGANISATION_UNITS );\n-        boolean requireCategoryOptionCombo = (Boolean) systemSettingManager.getSystemSetting( SettingKey.DATA_IMPORT_REQUIRE_CATEGORY_OPTION_COMBO );\n-        FileResourceRetentionStrategy retentionStrategy = (FileResourceRetentionStrategy) systemSettingManager.getSystemSetting( SettingKey.FILE_RESOURCE_RETENTION_STRATEGY );\n+        throws WebMessageException {\n+        boolean strictPeriods = (Boolean) systemSettingManager.getSystemSetting(SettingKey.DATA_IMPORT_STRICT_PERIODS);", "originalCommit": "f09d74b9b4a25b83196c6c63f2470abe6c99db68", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njc3MTQ4NQ==", "url": "https://github.com/dhis2/dhis2-core/pull/4706#discussion_r366771485", "bodyText": "Done", "author": "maikelarabori", "createdAt": "2020-01-15T09:30:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQzNjA4Ng=="}], "type": "inlineReview", "revised_code": {"commit": "b7f77236929285b91cd9e1ae9270c486ab3e04ca", "chunk": "diff --git a/dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java b/dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java\nindex aebd938ceb..0a6dc84d76 100644\n--- a/dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java\n+++ b/dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/datavalue/DataValueController.java\n\n@@ -143,7 +143,8 @@ public class DataValueController\n         @RequestParam( required = false ) String comment,\n         @RequestParam( required = false ) boolean followUp,\n         @RequestParam( required = false ) boolean force, HttpServletResponse response )\n-        throws WebMessageException {\n+        throws WebMessageException\n+    {\n         boolean strictPeriods = (Boolean) systemSettingManager.getSystemSetting(SettingKey.DATA_IMPORT_STRICT_PERIODS);\n         boolean strictCategoryOptionCombos = (Boolean) systemSettingManager.getSystemSetting(SettingKey.DATA_IMPORT_STRICT_CATEGORY_OPTION_COMBOS);\n         boolean strictOrgUnits = (Boolean) systemSettingManager.getSystemSetting(SettingKey.DATA_IMPORT_STRICT_ORGANISATION_UNITS);\n"}}, {"oid": "b7f77236929285b91cd9e1ae9270c486ab3e04ca", "url": "https://github.com/dhis2/dhis2-core/commit/b7f77236929285b91cd9e1ae9270c486ab3e04ca", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7905", "committedDate": "2020-01-15T08:39:27Z", "type": "commit"}, {"oid": "e8681c40e76991326c2b644fcd3f77f24a366f9c", "url": "https://github.com/dhis2/dhis2-core/commit/e8681c40e76991326c2b644fcd3f77f24a366f9c", "message": "fix: Code styling/formatting [DHIS2-7905]", "committedDate": "2020-01-15T08:44:36Z", "type": "commit"}]}