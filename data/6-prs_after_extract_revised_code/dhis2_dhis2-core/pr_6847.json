{"pr_number": 6847, "pr_title": "fix: (2.35) Use encryption for SMS confidential parameters [DHIS2-10076]", "pr_createdAt": "2020-12-08T09:04:45Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/6847", "timeline": [{"oid": "805fe95d5d65f5a3d5af56e114cc2863326b57d3", "url": "https://github.com/dhis2/dhis2-core/commit/805fe95d5d65f5a3d5af56e114cc2863326b57d3", "message": "fix: Add encryption while saving confidential parameters", "committedDate": "2020-12-08T08:14:53Z", "type": "commit"}, {"oid": "6de5df220dafc4c2d36bcb74dc1412967ecea46b", "url": "https://github.com/dhis2/dhis2-core/commit/6de5df220dafc4c2d36bcb74dc1412967ecea46b", "message": "fix unit tests", "committedDate": "2020-12-08T08:23:33Z", "type": "commit"}, {"oid": "dd6d5d316734340502cab0996e4c3e1c368d66b0", "url": "https://github.com/dhis2/dhis2-core/commit/dd6d5d316734340502cab0996e4c3e1c368d66b0", "message": "fix unit tests", "committedDate": "2020-12-08T08:24:18Z", "type": "commit"}, {"oid": "14b0b9e170b7f1165f1492bc864873a2c3ad3b4e", "url": "https://github.com/dhis2/dhis2-core/commit/14b0b9e170b7f1165f1492bc864873a2c3ad3b4e", "message": "fix issues after server reboot", "committedDate": "2020-12-08T08:24:21Z", "type": "commit"}, {"oid": "5d36588d7f1c7bc39289507d6351eddd82b18d95", "url": "https://github.com/dhis2/dhis2-core/commit/5d36588d7f1c7bc39289507d6351eddd82b18d95", "message": "sonar code analysis fix", "committedDate": "2020-12-08T08:24:21Z", "type": "commit"}, {"oid": "a413fc05ae7c5d2124a62ddc4002e66fce58ccde", "url": "https://github.com/dhis2/dhis2-core/commit/a413fc05ae7c5d2124a62ddc4002e66fce58ccde", "message": "fix compilation issue", "committedDate": "2020-12-08T08:24:22Z", "type": "commit"}, {"oid": "981778f6b06b1bd9b8a491f5a85a7dc1e8bd0f85", "url": "https://github.com/dhis2/dhis2-core/commit/981778f6b06b1bd9b8a491f5a85a7dc1e8bd0f85", "message": "fix unit tests", "committedDate": "2020-12-08T08:24:22Z", "type": "commit"}, {"oid": "2c13e8d1d66cbfc4abc4c0c08766d59f80d3b144", "url": "https://github.com/dhis2/dhis2-core/commit/2c13e8d1d66cbfc4abc4c0c08766d59f80d3b144", "message": "incase value is same then no need to update", "committedDate": "2020-12-08T09:01:42Z", "type": "commit"}, {"oid": "89926a8f383560989339f808919dbed609e20393", "url": "https://github.com/dhis2/dhis2-core/commit/89926a8f383560989339f808919dbed609e20393", "message": "Add unit tests", "committedDate": "2020-12-08T11:23:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDkxMTE5MQ==", "url": "https://github.com/dhis2/dhis2-core/pull/6847#discussion_r544911191", "bodyText": "what about using lombok's\n@EqualsAndHashCode( of = {\"key\", \"value\", \"header\", \"encode\", \"confidential\"} )", "author": "gnespolino", "createdAt": "2020-12-17T08:48:01Z", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/sms/config/GenericGatewayParameter.java", "diffHunk": "@@ -107,4 +108,30 @@ public void setEncode( boolean encode )\n     {\n         this.encode = encode;\n     }\n+\n+    @Override\n+    public boolean equals( Object o )", "originalCommit": "89926a8f383560989339f808919dbed609e20393", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDkxMjg5OQ==", "url": "https://github.com/dhis2/dhis2-core/pull/6847#discussion_r544912899", "bodyText": "Could remove constructor and annotate class with\n@RequiredArgsConstructor\n\nand\n@Qualifier( \"tripleDesStringEncryptor\" )\nprivate final PBEStringEncryptor pbeStringEncryptor;", "author": "gnespolino", "createdAt": "2020-12-17T08:50:42Z", "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/BulkSmsHttpGateway.java", "diffHunk": "@@ -50,6 +52,13 @@\n public class BulkSmsHttpGateway", "originalCommit": "89926a8f383560989339f808919dbed609e20393", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDkxMzI4Mg==", "url": "https://github.com/dhis2/dhis2-core/pull/6847#discussion_r544913282", "bodyText": "same as BulkSmsHttpGateway", "author": "gnespolino", "createdAt": "2020-12-17T08:51:15Z", "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/ClickatellHttpGateway.java", "diffHunk": "@@ -50,6 +52,13 @@\n public class ClickatellHttpGateway", "originalCommit": "89926a8f383560989339f808919dbed609e20393", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDkxNTU3Ng==", "url": "https://github.com/dhis2/dhis2-core/pull/6847#discussion_r544915576", "bodyText": "might be easier to read using:\n        return parameters.stream()\n                .anyMatch(parameter::equals);", "author": "gnespolino", "createdAt": "2020-12-17T08:55:00Z", "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/config/DefaultGatewayAdministrationService.java", "diffHunk": "@@ -366,4 +385,18 @@ private void initializeSmsConfig()\n \n         loadGatewayConfigurationMap( smsConfiguration );\n     }\n+\n+\n+    private boolean isPresent( List<GenericGatewayParameter> parameters, GenericGatewayParameter parameter )", "originalCommit": "89926a8f383560989339f808919dbed609e20393", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}