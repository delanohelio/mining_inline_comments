{"pr_number": 6303, "pr_title": "refactor: Constructor instead of set method init of DataSourceManager", "pr_createdAt": "2020-09-30T20:00:54Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/6303", "timeline": [{"oid": "02120731d0044cb77f21c67c852180132068832c", "url": "https://github.com/dhis2/dhis2-core/commit/02120731d0044cb77f21c67c852180132068832c", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-08-27T14:24:34Z", "type": "commit"}, {"oid": "51771650446f2011bb65f40224439144d23a6045", "url": "https://github.com/dhis2/dhis2-core/commit/51771650446f2011bb65f40224439144d23a6045", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-08-27T15:22:19Z", "type": "commit"}, {"oid": "b58f0a0a9fe8f090ff106990430d0146a3e3ab81", "url": "https://github.com/dhis2/dhis2-core/commit/b58f0a0a9fe8f090ff106990430d0146a3e3ab81", "message": "Rename", "committedDate": "2020-08-31T14:58:45Z", "type": "commit"}, {"oid": "6055f1cd10016c9916cfbc4be05af4e147b4c43a", "url": "https://github.com/dhis2/dhis2-core/commit/6055f1cd10016c9916cfbc4be05af4e147b4c43a", "message": "Minor", "committedDate": "2020-09-01T12:36:52Z", "type": "commit"}, {"oid": "714fe2430869802e1ebdb02165f26d4a84456a51", "url": "https://github.com/dhis2/dhis2-core/commit/714fe2430869802e1ebdb02165f26d4a84456a51", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-01T12:37:00Z", "type": "commit"}, {"oid": "ce93bd0610b6f801e4fc2f4d40a331007ad487fc", "url": "https://github.com/dhis2/dhis2-core/commit/ce93bd0610b6f801e4fc2f4d40a331007ad487fc", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-09-01T12:37:07Z", "type": "commit"}, {"oid": "4eb958db2b25180e62fe2270ee791600d9c76e33", "url": "https://github.com/dhis2/dhis2-core/commit/4eb958db2b25180e62fe2270ee791600d9c76e33", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-02T10:30:36Z", "type": "commit"}, {"oid": "d873074dd2496c9c383babe76ffb2f9896463c8e", "url": "https://github.com/dhis2/dhis2-core/commit/d873074dd2496c9c383babe76ffb2f9896463c8e", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-04T09:21:13Z", "type": "commit"}, {"oid": "0758a385ad6d41ec7d63cac1e090b596019b6bbc", "url": "https://github.com/dhis2/dhis2-core/commit/0758a385ad6d41ec7d63cac1e090b596019b6bbc", "message": "Merge with master", "committedDate": "2020-09-04T09:24:36Z", "type": "commit"}, {"oid": "163623769a257f49d01654468f2820b7130254e0", "url": "https://github.com/dhis2/dhis2-core/commit/163623769a257f49d01654468f2820b7130254e0", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-10T09:22:44Z", "type": "commit"}, {"oid": "e69cc596dac6999a746eb5ad392997f11988f067", "url": "https://github.com/dhis2/dhis2-core/commit/e69cc596dac6999a746eb5ad392997f11988f067", "message": "Add top and bottom to text align", "committedDate": "2020-09-14T10:29:24Z", "type": "commit"}, {"oid": "dc097760a4ea4c103322e1c3a5759e312642b79d", "url": "https://github.com/dhis2/dhis2-core/commit/dc097760a4ea4c103322e1c3a5759e312642b79d", "message": "Minor", "committedDate": "2020-09-14T10:30:42Z", "type": "commit"}, {"oid": "c77180e932245f79dfb78b3bdd62f47845635745", "url": "https://github.com/dhis2/dhis2-core/commit/c77180e932245f79dfb78b3bdd62f47845635745", "message": "Revert", "committedDate": "2020-09-14T10:52:52Z", "type": "commit"}, {"oid": "2dbfa1afe0d78471d5e1fbd85effde7016755ab2", "url": "https://github.com/dhis2/dhis2-core/commit/2dbfa1afe0d78471d5e1fbd85effde7016755ab2", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-18T08:35:19Z", "type": "commit"}, {"oid": "c91fb98aafa1c10d6a787ecbb4318f0ab02f376d", "url": "https://github.com/dhis2/dhis2-core/commit/c91fb98aafa1c10d6a787ecbb4318f0ab02f376d", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-09-18T08:52:13Z", "type": "commit"}, {"oid": "410d1b8ae4e3c7d3443c2d183e9734c2c99c03ab", "url": "https://github.com/dhis2/dhis2-core/commit/410d1b8ae4e3c7d3443c2d183e9734c2c99c03ab", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-22T14:52:59Z", "type": "commit"}, {"oid": "ab1dc28f76bd0219a66c700b9b4ed7adff9bdc6e", "url": "https://github.com/dhis2/dhis2-core/commit/ab1dc28f76bd0219a66c700b9b4ed7adff9bdc6e", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-09-22T14:53:10Z", "type": "commit"}, {"oid": "f3f808d5545bdc9a09b04145326145aa35fe95c7", "url": "https://github.com/dhis2/dhis2-core/commit/f3f808d5545bdc9a09b04145326145aa35fe95c7", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-23T12:51:56Z", "type": "commit"}, {"oid": "119a44276d7f8131e0c50ac68e37e4c58a94321d", "url": "https://github.com/dhis2/dhis2-core/commit/119a44276d7f8131e0c50ac68e37e4c58a94321d", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-23T13:20:22Z", "type": "commit"}, {"oid": "7f46bfe45381b9f3f6a6c6ce17920627ba8471f6", "url": "https://github.com/dhis2/dhis2-core/commit/7f46bfe45381b9f3f6a6c6ce17920627ba8471f6", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-23T13:33:44Z", "type": "commit"}, {"oid": "13a184206e3af6c3ab0cecb869a83c0cc9a3a363", "url": "https://github.com/dhis2/dhis2-core/commit/13a184206e3af6c3ab0cecb869a83c0cc9a3a363", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-24T12:26:08Z", "type": "commit"}, {"oid": "3b03a49d424f9b8177ecc354367e86d6baf3f2fc", "url": "https://github.com/dhis2/dhis2-core/commit/3b03a49d424f9b8177ecc354367e86d6baf3f2fc", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-09-24T12:26:15Z", "type": "commit"}, {"oid": "34ba07764d15be691c4bc643b1ea59755a86db18", "url": "https://github.com/dhis2/dhis2-core/commit/34ba07764d15be691c4bc643b1ea59755a86db18", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-24T12:55:19Z", "type": "commit"}, {"oid": "22d1a961afc15403ab749af2e4d4890a0536a8bd", "url": "https://github.com/dhis2/dhis2-core/commit/22d1a961afc15403ab749af2e4d4890a0536a8bd", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-09-24T12:55:24Z", "type": "commit"}, {"oid": "dac5d62586509319f78526bf07827588a41da7c3", "url": "https://github.com/dhis2/dhis2-core/commit/dac5d62586509319f78526bf07827588a41da7c3", "message": "Cleanup", "committedDate": "2020-09-24T12:55:30Z", "type": "commit"}, {"oid": "e8206d5a037db2fe2dbb2a5a8b73d0f22b8d32ba", "url": "https://github.com/dhis2/dhis2-core/commit/e8206d5a037db2fe2dbb2a5a8b73d0f22b8d32ba", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-24T15:04:14Z", "type": "commit"}, {"oid": "f87bad85c3bee39ff3029cb1c84feac4c2ae95d6", "url": "https://github.com/dhis2/dhis2-core/commit/f87bad85c3bee39ff3029cb1c84feac4c2ae95d6", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-09-24T15:04:23Z", "type": "commit"}, {"oid": "768fe7abcd3b16611efc5ec2e1c75db15ab123aa", "url": "https://github.com/dhis2/dhis2-core/commit/768fe7abcd3b16611efc5ec2e1c75db15ab123aa", "message": "Javadoc", "committedDate": "2020-09-25T12:49:35Z", "type": "commit"}, {"oid": "aaac33239a7f408c5b21f936ef2d9cecce469eb7", "url": "https://github.com/dhis2/dhis2-core/commit/aaac33239a7f408c5b21f936ef2d9cecce469eb7", "message": "Minor", "committedDate": "2020-09-25T13:07:35Z", "type": "commit"}, {"oid": "e1571ae02b1e376a31592afd132fc46e0514b286", "url": "https://github.com/dhis2/dhis2-core/commit/e1571ae02b1e376a31592afd132fc46e0514b286", "message": "Javadoc", "committedDate": "2020-09-25T13:12:24Z", "type": "commit"}, {"oid": "a579be05284a7b85079adf7a30f6f0362ef3d8bd", "url": "https://github.com/dhis2/dhis2-core/commit/a579be05284a7b85079adf7a30f6f0362ef3d8bd", "message": "Code style", "committedDate": "2020-09-25T13:56:00Z", "type": "commit"}, {"oid": "74dc2fdd1db373666e11dd75fb705811b2f3a06e", "url": "https://github.com/dhis2/dhis2-core/commit/74dc2fdd1db373666e11dd75fb705811b2f3a06e", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-25T13:59:00Z", "type": "commit"}, {"oid": "0396e7747db57d8195c28776233ebde6e811b521", "url": "https://github.com/dhis2/dhis2-core/commit/0396e7747db57d8195c28776233ebde6e811b521", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-09-25T14:12:45Z", "type": "commit"}, {"oid": "edcf9a0594044aceef6ca066be4f38e2a5856a3e", "url": "https://github.com/dhis2/dhis2-core/commit/edcf9a0594044aceef6ca066be4f38e2a5856a3e", "message": "System settings", "committedDate": "2020-09-25T14:42:11Z", "type": "commit"}, {"oid": "623c13181847b33d1ec93dd7b847a3b2501aa04e", "url": "https://github.com/dhis2/dhis2-core/commit/623c13181847b33d1ec93dd7b847a3b2501aa04e", "message": "Merge branch 'master' of github.com:dhis2/dhis2-core", "committedDate": "2020-09-30T10:37:43Z", "type": "commit"}, {"oid": "73957bbb45f26e10005f35f381d19bc96d5f8654", "url": "https://github.com/dhis2/dhis2-core/commit/73957bbb45f26e10005f35f381d19bc96d5f8654", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-09-30T19:46:46Z", "type": "commit"}, {"oid": "4631d3bbff68349eeb0b3cbc16032c466813fb55", "url": "https://github.com/dhis2/dhis2-core/commit/4631d3bbff68349eeb0b3cbc16032c466813fb55", "message": "Refactor", "committedDate": "2020-09-30T19:59:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzgzOTM2NQ==", "url": "https://github.com/dhis2/dhis2-core/pull/6303#discussion_r497839365", "bodyText": "Maybe add a static import, to match with existing code style", "author": "mortenoh", "createdAt": "2020-09-30T22:37:14Z", "path": "dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java", "diffHunk": "@@ -71,6 +72,18 @@\n     private static final int MAX_READ_REPLICAS = 5;\n     private static final String DEFAULT_POOL_SIZE = \"40\";\n \n+    private final DhisConfigurationProvider config;\n+\n+    private final DataSource mainDataSource;\n+\n+    public DefaultDataSourceManager( DhisConfigurationProvider config, DataSource mainDataSource )\n+    {\n+        Preconditions.checkNotNull( config );", "originalCommit": "4631d3bbff68349eeb0b3cbc16032c466813fb55", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "80be34e83cce790137b2bcd7a7f79ab9ed63c803", "chunk": "diff --git a/dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java b/dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java\nindex 248ad8ef2a..b7797edf46 100644\n--- a/dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java\n+++ b/dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java\n\n@@ -78,8 +79,8 @@ public class DefaultDataSourceManager\n \n     public DefaultDataSourceManager( DhisConfigurationProvider config, DataSource mainDataSource )\n     {\n-        Preconditions.checkNotNull( config );\n-        Preconditions.checkNotNull( mainDataSource );\n+        checkNotNull( config );\n+        checkNotNull( mainDataSource );\n         this.config = config;\n         this.mainDataSource = mainDataSource;\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzgzOTQ1Ng==", "url": "https://github.com/dhis2/dhis2-core/pull/6303#discussion_r497839456", "bodyText": "Newline", "author": "mortenoh", "createdAt": "2020-09-30T22:37:31Z", "path": "dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java", "diffHunk": "@@ -71,6 +72,18 @@\n     private static final int MAX_READ_REPLICAS = 5;\n     private static final String DEFAULT_POOL_SIZE = \"40\";\n \n+    private final DhisConfigurationProvider config;\n+\n+    private final DataSource mainDataSource;\n+\n+    public DefaultDataSourceManager( DhisConfigurationProvider config, DataSource mainDataSource )\n+    {\n+        Preconditions.checkNotNull( config );\n+        Preconditions.checkNotNull( mainDataSource );", "originalCommit": "4631d3bbff68349eeb0b3cbc16032c466813fb55", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "80be34e83cce790137b2bcd7a7f79ab9ed63c803", "chunk": "diff --git a/dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java b/dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java\nindex 248ad8ef2a..b7797edf46 100644\n--- a/dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java\n+++ b/dhis-2/dhis-support/dhis-support-hibernate/src/main/java/org/hisp/dhis/datasource/DefaultDataSourceManager.java\n\n@@ -78,8 +79,8 @@ public class DefaultDataSourceManager\n \n     public DefaultDataSourceManager( DhisConfigurationProvider config, DataSource mainDataSource )\n     {\n-        Preconditions.checkNotNull( config );\n-        Preconditions.checkNotNull( mainDataSource );\n+        checkNotNull( config );\n+        checkNotNull( mainDataSource );\n         this.config = config;\n         this.mainDataSource = mainDataSource;\n     }\n"}}, {"oid": "80be34e83cce790137b2bcd7a7f79ab9ed63c803", "url": "https://github.com/dhis2/dhis2-core/commit/80be34e83cce790137b2bcd7a7f79ab9ed63c803", "message": "Minor", "committedDate": "2020-10-01T07:40:03Z", "type": "commit"}]}