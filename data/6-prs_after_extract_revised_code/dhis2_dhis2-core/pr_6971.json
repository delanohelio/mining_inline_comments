{"pr_number": 6971, "pr_title": "feat: DHIS2-10102 removed sideEffectDataBundles from NTI report", "pr_createdAt": "2020-12-21T10:41:25Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/6971", "timeline": [{"oid": "d74976ac15c225b4406b8e6941d7efee8335c6b1", "url": "https://github.com/dhis2/dhis2-core/commit/d74976ac15c225b4406b8e6941d7efee8335c6b1", "message": "feat: DHIS2-10102 removed sideEffectDataBundles from NTI report", "committedDate": "2020-12-21T10:40:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY3NDY1Mw==", "url": "https://github.com/dhis2/dhis2-core/pull/6971#discussion_r546674653", "bodyText": "Extract toSerializeReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY ) and deserializedReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY ) to variables will improve readability", "author": "enricocolasante", "createdAt": "2020-12-21T12:17:40Z", "path": "dhis-2/dhis-services/dhis-service-tracker/src/test/java/org/hisp/dhis/tracker/report/TrackerBundleImportReportTest.java", "diffHunk": "@@ -202,8 +202,22 @@ public void testSerializingAndDeserializingImportReport()\n         assertEquals( toSerializeReport.getBundleReport().getStats().getTotal(),\n             deserializedReport.getBundleReport().getStats().getTotal() );\n \n-        assertEquals( toSerializeReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY ),\n-            deserializedReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY ) );\n+        assertEquals(\n+            toSerializeReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY ).getTrackerType(),", "originalCommit": "d74976ac15c225b4406b8e6941d7efee8335c6b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjczNzc0NA==", "url": "https://github.com/dhis2/dhis2-core/pull/6971#discussion_r546737744", "bodyText": "I thought the same but forgot to do it, thank you", "author": "gnespolino", "createdAt": "2020-12-21T14:31:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY3NDY1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "c0b38f2323645d127edc92e36c57596720c90d11", "chunk": "diff --git a/dhis-2/dhis-services/dhis-service-tracker/src/test/java/org/hisp/dhis/tracker/report/TrackerBundleImportReportTest.java b/dhis-2/dhis-services/dhis-service-tracker/src/test/java/org/hisp/dhis/tracker/report/TrackerBundleImportReportTest.java\nindex ff3b90fc29..bf6d576290 100644\n--- a/dhis-2/dhis-services/dhis-service-tracker/src/test/java/org/hisp/dhis/tracker/report/TrackerBundleImportReportTest.java\n+++ b/dhis-2/dhis-services/dhis-service-tracker/src/test/java/org/hisp/dhis/tracker/report/TrackerBundleImportReportTest.java\n\n@@ -202,22 +203,14 @@ public class TrackerBundleImportReportTest extends DhisSpringTest\n         assertEquals( toSerializeReport.getBundleReport().getStats().getTotal(),\n             deserializedReport.getBundleReport().getStats().getTotal() );\n \n-        assertEquals(\n-            toSerializeReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY ).getTrackerType(),\n-            deserializedReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY )\n-                .getTrackerType() );\n-        assertEquals(\n-            toSerializeReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY )\n-                .getObjectReportMap(),\n-            deserializedReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY )\n-                .getObjectReportMap() );\n-        assertEquals(\n-            toSerializeReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY ).getObjectReports(),\n-            deserializedReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY )\n-                .getObjectReports() );\n-        assertEquals(\n-            toSerializeReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY ).getStats(),\n-            deserializedReport.getBundleReport().getTypeReportMap().get( TrackerType.TRACKED_ENTITY ).getStats() );\n+        TrackerTypeReport serializedReportTrackerTypeReport = toSerializeReport.getBundleReport().getTypeReportMap().get( TRACKED_ENTITY );\n+        TrackerTypeReport deserializedReportTrackerTypeReport = deserializedReport.getBundleReport().getTypeReportMap().get( TRACKED_ENTITY );\n+\n+        // sideEffectsDataBundle is no more relevant to object equivalence, so just asserting on all other fields.\n+        assertEquals( serializedReportTrackerTypeReport.getTrackerType(), deserializedReportTrackerTypeReport.getTrackerType() );\n+        assertEquals( serializedReportTrackerTypeReport.getObjectReportMap(), deserializedReportTrackerTypeReport.getObjectReportMap() );\n+        assertEquals( serializedReportTrackerTypeReport.getObjectReports(), deserializedReportTrackerTypeReport.getObjectReports() );\n+        assertEquals( serializedReportTrackerTypeReport.getStats(), deserializedReportTrackerTypeReport.getStats() );\n \n         //Verify Validation Report - Error Reports\n         assertEquals( toSerializeReport.getValidationReport().getErrorReports().get( 0 ).getErrorMessage(),\n"}}, {"oid": "c0b38f2323645d127edc92e36c57596720c90d11", "url": "https://github.com/dhis2/dhis2-core/commit/c0b38f2323645d127edc92e36c57596720c90d11", "message": "feat: DHIS2-10102 bette code readability in test", "committedDate": "2020-12-21T14:36:10Z", "type": "commit"}]}