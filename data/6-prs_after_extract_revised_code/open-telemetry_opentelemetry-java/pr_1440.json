{"pr_number": 1440, "pr_title": "Forbid empty/null keys", "pr_createdAt": "2020-07-21T11:50:13Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1440", "timeline": [{"oid": "0e17773ecbab94a39bbfa386226aed044a045d9a", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/0e17773ecbab94a39bbfa386226aed044a045d9a", "message": "Forbid empty/null keys", "committedDate": "2020-07-21T11:48:52Z", "type": "commit"}, {"oid": "f7d5205b8a74f009a50ac061718d88fcaa0abce9", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f7d5205b8a74f009a50ac061718d88fcaa0abce9", "message": "Add more tests", "committedDate": "2020-07-21T14:38:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMjk3OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1440#discussion_r458302979", "bodyText": "logging here at warning seems like a recipe for a lot of log spam. I'm not sure if we should log this at all, but warning definitely seems too aggressive for something in the API.", "author": "jkwatson", "createdAt": "2020-07-21T18:27:20Z", "path": "api/src/main/java/io/opentelemetry/common/ImmutableKeyValuePairs.java", "diffHunk": "@@ -105,8 +106,8 @@ private static void quickSort(Object[] data, int leftIndex, int rightIndex) {\n     for (int i = 0; i < data.length; i += 2) {\n       Object key = data[i];\n       Object value = data[i + 1];\n-      if (key == null) {\n-        logger.warning(\"Ignoring null key.\");\n+      if (key == null || \"\".equals(key)) {\n+        logger.warning(\"Ignoring null/empty key.\");", "originalCommit": "f7d5205b8a74f009a50ac061718d88fcaa0abce9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU1MDQ2NQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1440#discussion_r458550465", "bodyText": "I also find it strange that we have a warning here. I don't think it adds anything, I will remove it", "author": "thisthat", "createdAt": "2020-07-22T05:52:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMjk3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "f60f8387ab079694e082aa5c7566643aa03d3579", "chunk": "diff --git a/api/src/main/java/io/opentelemetry/common/ImmutableKeyValuePairs.java b/api/src/main/java/io/opentelemetry/common/ImmutableKeyValuePairs.java\nindex 14d5f235d..259295237 100644\n--- a/api/src/main/java/io/opentelemetry/common/ImmutableKeyValuePairs.java\n+++ b/api/src/main/java/io/opentelemetry/common/ImmutableKeyValuePairs.java\n\n@@ -107,7 +107,6 @@ abstract class ImmutableKeyValuePairs<V> implements ReadableKeyValuePairs<V> {\n       Object key = data[i];\n       Object value = data[i + 1];\n       if (key == null || \"\".equals(key)) {\n-        logger.warning(\"Ignoring null/empty key.\");\n         continue;\n       }\n       if (key.equals(previousKey)) {\n"}}, {"oid": "f60f8387ab079694e082aa5c7566643aa03d3579", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f60f8387ab079694e082aa5c7566643aa03d3579", "message": "Add Javadoc. Remove logging", "committedDate": "2020-07-22T06:04:03Z", "type": "commit"}]}