{"pr_number": 2274, "pr_title": "Change MetricData to be consistent with protos, move creation to the Aggregation", "pr_createdAt": "2020-12-11T02:16:23Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2274", "timeline": [{"oid": "615b2e39b68dbbce3b53222a077a417a5d1b0a9f", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/615b2e39b68dbbce3b53222a077a417a5d1b0a9f", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-11T02:27:02Z", "type": "forcePushed"}, {"oid": "81f4f1fe7501104817d4748afdf43e6560a08640", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/81f4f1fe7501104817d4748afdf43e6560a08640", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-11T17:13:00Z", "type": "forcePushed"}, {"oid": "6660a5b8fa70065c1f26e1c00aa0b30816d8b772", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/6660a5b8fa70065c1f26e1c00aa0b30816d8b772", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-11T17:26:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTExNDIyMQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2274#discussion_r541114221", "bodyText": "previously this was a long sum; seems like there would be value in testing both long and double here, rather than only double.", "author": "jkwatson", "createdAt": "2020-12-11T17:37:40Z", "path": "exporters/prometheus/src/test/java/io/opentelemetry/exporter/prometheus/PrometheusCollectorTest.java", "diffHunk": "@@ -55,23 +55,27 @@ void registerToDefault() throws IOException {\n \n   private static ImmutableList<MetricData> generateTestData() {\n     return ImmutableList.of(\n-        MetricData.create(\n+        MetricData.createDoubleSum(", "originalCommit": "6660a5b8fa70065c1f26e1c00aa0b30816d8b772", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTExNjczOA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2274#discussion_r541116738", "bodyText": "Sorry :) good catch.", "author": "bogdandrutu", "createdAt": "2020-12-11T17:41:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTExNDIyMQ=="}], "type": "inlineReview", "revised_code": {"commit": "fdef1d23aa7a834d50c755984972a3a3442342bd", "chunk": "diff --git a/exporters/prometheus/src/test/java/io/opentelemetry/exporter/prometheus/PrometheusCollectorTest.java b/exporters/prometheus/src/test/java/io/opentelemetry/exporter/prometheus/PrometheusCollectorTest.java\nindex 9a47192e0..60798e569 100644\n--- a/exporters/prometheus/src/test/java/io/opentelemetry/exporter/prometheus/PrometheusCollectorTest.java\n+++ b/exporters/prometheus/src/test/java/io/opentelemetry/exporter/prometheus/PrometheusCollectorTest.java\n\n@@ -55,17 +55,17 @@ class PrometheusCollectorTest {\n \n   private static ImmutableList<MetricData> generateTestData() {\n     return ImmutableList.of(\n-        MetricData.createDoubleSum(\n+        MetricData.createLongSum(\n             Resource.create(Attributes.of(stringKey(\"kr\"), \"vr\")),\n             InstrumentationLibraryInfo.create(\"grpc\", \"version\"),\n             \"grpc.name\",\n             \"long_description\",\n             \"1\",\n-            MetricData.DoubleSumData.create(\n+            MetricData.LongSumData.create(\n                 /* isMonotonic= */ true,\n                 MetricData.AggregationTemporality.CUMULATIVE,\n                 Collections.singletonList(\n-                    MetricData.DoublePoint.create(123, 456, Labels.of(\"kp\", \"vp\"), 5)))),\n+                    MetricData.LongPoint.create(123, 456, Labels.of(\"kp\", \"vp\"), 5)))),\n         MetricData.createDoubleSum(\n             Resource.create(Attributes.of(stringKey(\"kr\"), \"vr\")),\n             InstrumentationLibraryInfo.create(\"http\", \"version\"),\n"}}, {"oid": "fdef1d23aa7a834d50c755984972a3a3442342bd", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/fdef1d23aa7a834d50c755984972a3a3442342bd", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-11T17:45:54Z", "type": "commit"}, {"oid": "fdef1d23aa7a834d50c755984972a3a3442342bd", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/fdef1d23aa7a834d50c755984972a3a3442342bd", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-11T17:45:54Z", "type": "forcePushed"}]}