{"pr_number": 2263, "pr_title": "Some example of possible SDK configuration", "pr_createdAt": "2020-12-10T07:15:09Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2263", "timeline": [{"oid": "74bebb49536a8312ba5c59d069b431e4ffdbf840", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/74bebb49536a8312ba5c59d069b431e4ffdbf840", "message": "Some example of possible SDK configuration", "committedDate": "2020-12-10T07:10:19Z", "type": "commit"}, {"oid": "0808210d6bd36fd68f3176c80d2744180ba496cc", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/0808210d6bd36fd68f3176c80d2744180ba496cc", "message": "Format", "committedDate": "2020-12-10T10:18:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI5MDI5Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2263#discussion_r540290293", "bodyText": "We could turn these all into tests by adding a simple isNotNull assert on the results. But, that's only if we feel like we need to have these tests do assertions. Just the fact that they don't throw exceptions is probably enough, TBH.", "author": "jkwatson", "createdAt": "2020-12-10T16:03:32Z", "path": "sdk/all/src/test/java/io/opentelemetry/sdk/OpenTelemetrySdkTest.java", "diffHunk": "@@ -191,4 +195,74 @@ void onlySdkInstancesAllowed() {\n         IllegalArgumentException.class,\n         () -> OpenTelemetrySdk.builder().setTracerProvider(mock(TracerProvider.class)));\n   }\n+\n+  // This is just a demonstration of maximum that one can do with OpenTelemetry configuration.\n+  // Demonstrates how clear or confusing is SDK configuration\n+  @Test\n+  void fullOpenTelemetrySdkConfigurationDemo() {\n+    TraceConfig currentConfig = TraceConfig.getDefault();\n+    TraceConfig newConfig =\n+        currentConfig.toBuilder()\n+            .setSampler(mock(Sampler.class))\n+            .setMaxLengthOfAttributeValues(128)\n+            .build();\n+\n+    OpenTelemetrySdk.Builder sdkBuilder =\n+        OpenTelemetrySdk.builder()\n+            .addSpanProcessor(mock(SpanProcessor.class))\n+            .addSpanProcessor(SimpleSpanProcessor.builder(mock(SpanExporter.class)).build())\n+            .setIdGenerator(mock(IdGenerator.class))\n+            .setPropagators(ContextPropagators.create(mock(TextMapPropagator.class)))\n+            .setClock(mock(Clock.class))\n+            .setResource(mock(Resource.class));\n+\n+    TracerSdkProvider tracerSdkProvider =\n+        TracerSdkProvider.builder()\n+            .setClock(mock(Clock.class))\n+            .setIdGenerator(mock(IdGenerator.class))\n+            .setResource(mock(Resource.class))\n+            .setTraceConfig(newConfig)\n+            .build();\n+\n+    MeterSdkProvider meterSdkProvider =\n+        MeterSdkProvider.builder()\n+            .setClock(mock(Clock.class))\n+            .setResource(mock(Resource.class))\n+            .build();\n+\n+    sdkBuilder.setTracerProvider(tracerSdkProvider);\n+    sdkBuilder.setMeterProvider(meterSdkProvider);\n+    sdkBuilder.setTraceConfig(newConfig);\n+\n+    sdkBuilder.build();\n+  }\n+\n+  // This is just a demonstration of the bare minimal required configuration in order to get useful\n+  // SDK.\n+  // Demonstrates how clear or confusing is SDK configuration\n+  @Test\n+  void trivialOpenTelemetrySdkConfigurationDemo() {\n+    OpenTelemetrySdk.builder()\n+        .addSpanProcessor(SimpleSpanProcessor.builder(mock(SpanExporter.class)).build())\n+        .setPropagators(ContextPropagators.create(mock(TextMapPropagator.class)))\n+        .build();\n+  }\n+\n+  // This is just a demonstration of two small but not trivial configurations.\n+  // Demonstrates how clear or confusing is SDK configuration\n+  @Test\n+  void minimalOpenTelemetrySdkConfigurationDemo() {\n+    OpenTelemetrySdk.builder()\n+        .addSpanProcessor(SimpleSpanProcessor.builder(mock(SpanExporter.class)).build())\n+        .setPropagators(ContextPropagators.create(mock(TextMapPropagator.class)))\n+        .setTraceConfig(\n+            TraceConfig.getDefault().toBuilder().setSampler(mock(Sampler.class)).build())\n+        .build();", "originalCommit": "0808210d6bd36fd68f3176c80d2744180ba496cc", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}