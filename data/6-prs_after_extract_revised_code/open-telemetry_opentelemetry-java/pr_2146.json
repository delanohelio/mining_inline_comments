{"pr_number": 2146, "pr_title": "Replace SpanData.hasRemoteParent/getParentSpanId with getParentSpanContext", "pr_createdAt": "2020-11-27T06:06:16Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146", "timeline": [{"oid": "bdeb6cac1fbaa1e1154dbe288bcc12d31bbaceba", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/bdeb6cac1fbaa1e1154dbe288bcc12d31bbaceba", "message": "Remove SpanData.hasRemoteParent", "committedDate": "2020-11-27T06:04:51Z", "type": "commit"}, {"oid": "600b6ab87b3675f5fd30231dba92d4316f696257", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/600b6ab87b3675f5fd30231dba92d4316f696257", "message": "Replace parentSpanId with parentSpanContext", "committedDate": "2020-11-27T08:53:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5NDk3OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146#discussion_r531494979", "bodyText": "I don't know if we even want to deprecate that. So far, it seems exporters have only needed this, so it seems OK to keep it as convenience shortcut.\nI'm fine with deprecating/removing it though, just a thought.", "author": "Oberon00", "createdAt": "2020-11-27T09:55:22Z", "path": "sdk/trace/src/main/java/io/opentelemetry/sdk/trace/data/SpanData.java", "diffHunk": "@@ -50,13 +50,36 @@\n    */\n   TraceState getTraceState();\n \n+  /**\n+   * Returns the parent {@link SpanContext}. If the span is a root span, the {@link SpanContext}\n+   * returned will be invalid.\n+   */\n+  SpanContext getParentSpanContext();\n+\n   /**\n    * Returns the parent {@code SpanId}. If the {@code Span} is a root {@code Span}, the SpanId\n    * returned will be invalid..\n    *\n    * @return the parent {@code SpanId} or an invalid SpanId if this is a root {@code Span}.\n+   * @deprecated Use {@link #getParentSpanContext()}\n    */\n-  String getParentSpanId();\n+  @Deprecated", "originalCommit": "600b6ab87b3675f5fd30231dba92d4316f696257", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjcyOTQ5OA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146#discussion_r532729498", "bodyText": "I'm fine either way.", "author": "jkwatson", "createdAt": "2020-11-30T16:30:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5NDk3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA2NzY0MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146#discussion_r533067641", "bodyText": "Makes sense to me to keep it so undeprecated", "author": "anuraaga", "createdAt": "2020-12-01T04:36:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5NDk3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "8cab905918a39f12d904c1296dbd1097436ba26a", "chunk": "diff --git a/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/data/SpanData.java b/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/data/SpanData.java\nindex 9e12d300c..a5a005937 100644\n--- a/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/data/SpanData.java\n+++ b/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/data/SpanData.java\n\n@@ -58,12 +58,10 @@ public interface SpanData {\n \n   /**\n    * Returns the parent {@code SpanId}. If the {@code Span} is a root {@code Span}, the SpanId\n-   * returned will be invalid..\n+   * returned will be invalid.\n    *\n    * @return the parent {@code SpanId} or an invalid SpanId if this is a root {@code Span}.\n-   * @deprecated Use {@link #getParentSpanContext()}\n    */\n-  @Deprecated\n   default String getParentSpanId() {\n     return getParentSpanContext().getSpanIdAsHexString();\n   }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5NjAyMg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146#discussion_r531496022", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * @param parentSpanContext the span_id of the parent span, or {@code Span.INVALID} if the new\n          \n          \n            \n               * @param parentSpanContext the parent span context, or {@link SpanContext#getInvalid()} if this", "author": "Oberon00", "createdAt": "2020-11-27T09:57:05Z", "path": "sdk/trace/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java", "diffHunk": "@@ -135,10 +131,8 @@ private RecordEventsReadableSpan(\n    * @param context supplies the trace_id and span_id for the newly started span.\n    * @param name the displayed name for the new span.\n    * @param kind the span kind.\n-   * @param parentSpanId the span_id of the parent span, or {@code Span.INVALID} if the new span is\n-   *     a root span.\n-   * @param hasRemoteParent {@code true} if the parentContext is remote. {@code false} if this is a\n-   *     root span.\n+   * @param parentSpanContext the span_id of the parent span, or {@code Span.INVALID} if the new", "originalCommit": "600b6ab87b3675f5fd30231dba92d4316f696257", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8bae0df50f35e7eabcedaad95801548d4ef86be5", "chunk": "diff --git a/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java b/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java\nindex 2a0f67427..5de54f2f0 100644\n--- a/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java\n+++ b/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java\n\n@@ -131,7 +131,7 @@ final class RecordEventsReadableSpan implements ReadWriteSpan {\n    * @param context supplies the trace_id and span_id for the newly started span.\n    * @param name the displayed name for the new span.\n    * @param kind the span kind.\n-   * @param parentSpanContext the span_id of the parent span, or {@code Span.INVALID} if the new\n+   * @param parentSpanContext the parent span context, or {@link SpanContext#getInvalid()} if this\n    *     span is a root span.\n    * @param traceConfig trace parameters like sampler and probability.\n    * @param spanProcessor handler called when the span starts and ends.\n"}}, {"oid": "8bae0df50f35e7eabcedaad95801548d4ef86be5", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/8bae0df50f35e7eabcedaad95801548d4ef86be5", "message": "Update sdk/trace/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java\n\nCo-authored-by: Christian Neum\u00fcller <christian+github@neumueller.me>", "committedDate": "2020-12-01T00:14:36Z", "type": "commit"}, {"oid": "cc06bd800751c4a3bb0c5780fd8f33a43f234ea6", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/cc06bd800751c4a3bb0c5780fd8f33a43f234ea6", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into remove-hasremoteparent", "committedDate": "2020-12-01T04:31:25Z", "type": "commit"}, {"oid": "8cab905918a39f12d904c1296dbd1097436ba26a", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/8cab905918a39f12d904c1296dbd1097436ba26a", "message": "Keep parentId", "committedDate": "2020-12-01T04:36:06Z", "type": "commit"}, {"oid": "aaf3bd43baa37221460482a910d574c941fa1c5a", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/aaf3bd43baa37221460482a910d574c941fa1c5a", "message": "Merge branch 'remove-hasremoteparent' of github.com:anuraaga/opentelemetry-java into remove-hasremoteparent", "committedDate": "2020-12-01T04:36:18Z", "type": "commit"}, {"oid": "a56b892c69f383c837898d157156356440bced5c", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a56b892c69f383c837898d157156356440bced5c", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into remove-hasremoteparent", "committedDate": "2020-12-01T06:01:50Z", "type": "commit"}]}