{"pr_number": 1727, "pr_title": "check traceparent for extra trailing characters for version 00", "pr_createdAt": "2020-09-29T14:23:49Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1727", "timeline": [{"oid": "2bdbd055061aab26f6272dcea07e5c8df204e3c0", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/2bdbd055061aab26f6272dcea07e5c8df204e3c0", "message": "check traceparent for extra trailing characters for version 00\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>", "committedDate": "2020-09-29T14:22:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg1NjYyNA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1727#discussion_r496856624", "bodyText": "What do you think about making \"00\" a constant in the class, rather than hard-coding it down here?", "author": "jkwatson", "createdAt": "2020-09-29T16:07:58Z", "path": "api/src/main/java/io/opentelemetry/trace/propagation/HttpTraceContext.java", "diffHunk": "@@ -211,6 +211,9 @@ private static SpanContext extractContextFromTraceParent(String traceparent) {\n       if (!VALID_VERSIONS.contains(version)) {\n         return SpanContext.getInvalid();\n       }\n+      if (version.equals(\"00\") && traceparent.length() > TRACEPARENT_HEADER_SIZE) {", "originalCommit": "2bdbd055061aab26f6272dcea07e5c8df204e3c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2NDk5MA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1727#discussion_r497464990", "bodyText": "done", "author": "malafeev", "createdAt": "2020-09-30T12:22:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg1NjYyNA=="}], "type": "inlineReview", "revised_code": {"commit": "105c71d7d0b9c09d93b01990d4150677d3e93bcc", "chunk": "diff --git a/api/src/main/java/io/opentelemetry/trace/propagation/HttpTraceContext.java b/api/src/main/java/io/opentelemetry/trace/propagation/HttpTraceContext.java\nindex eefd1573d..fc6228bcd 100644\n--- a/api/src/main/java/io/opentelemetry/trace/propagation/HttpTraceContext.java\n+++ b/api/src/main/java/io/opentelemetry/trace/propagation/HttpTraceContext.java\n\n@@ -211,7 +212,7 @@ public class HttpTraceContext implements TextMapPropagator {\n       if (!VALID_VERSIONS.contains(version)) {\n         return SpanContext.getInvalid();\n       }\n-      if (version.equals(\"00\") && traceparent.length() > TRACEPARENT_HEADER_SIZE) {\n+      if (version.equals(VERSION_00) && traceparent.length() > TRACEPARENT_HEADER_SIZE) {\n         return SpanContext.getInvalid();\n       }\n \n"}}, {"oid": "105c71d7d0b9c09d93b01990d4150677d3e93bcc", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/105c71d7d0b9c09d93b01990d4150677d3e93bcc", "message": "add tests and make \"00\" a constant\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>", "committedDate": "2020-09-30T12:22:03Z", "type": "commit"}]}