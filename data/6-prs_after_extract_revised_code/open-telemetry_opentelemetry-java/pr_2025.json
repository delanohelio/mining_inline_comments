{"pr_number": 2025, "pr_title": "Provide default implementations for SpanProcessor.shutdown and forceFlush", "pr_createdAt": "2020-11-05T15:45:45Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2025", "timeline": [{"oid": "4721c0ca6ef341d5e207c3e7ee943246405121b3", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/4721c0ca6ef341d5e207c3e7ee943246405121b3", "message": "Provide default implementations for SpanProcessor.shutdown and forceFlush", "committedDate": "2020-11-05T15:44:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2MTY5Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2025#discussion_r518161692", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return CompletableResultCode.ofSuccess();\n          \n          \n            \n                return forceFlush();", "author": "Oberon00", "createdAt": "2020-11-05T15:56:30Z", "path": "sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/SpanProcessor.java", "diffHunk": "@@ -56,13 +56,17 @@\n    *\n    * @return a {@link CompletableResultCode} which completes when shutdown is finished.\n    */\n-  CompletableResultCode shutdown();\n+  default CompletableResultCode shutdown() {\n+    return CompletableResultCode.ofSuccess();", "originalCommit": "4721c0ca6ef341d5e207c3e7ee943246405121b3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2NzI2Ng==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2025#discussion_r518167266", "bodyText": "Can you explain why do we need this? : \uff09", "author": "dengliming", "createdAt": "2020-11-05T16:04:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2MTY5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE3MTY3Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2025#discussion_r518171673", "bodyText": "Because shutdown should normally ensure that everything is flushed. See https://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/trace/sdk.md#shutdown-1\n\nShutdown MUST include the effects of ForceFlush.", "author": "Oberon00", "createdAt": "2020-11-05T16:10:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2MTY5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE3NDI2NQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2025#discussion_r518174265", "bodyText": "\ud83d\udc4d Thanks. fixed.", "author": "dengliming", "createdAt": "2020-11-05T16:13:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2MTY5Mg=="}], "type": "inlineReview", "revised_code": {"commit": "202c8d96ff67e186ac93b0f8c1da56b567aa3d01", "chunk": "diff --git a/sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/SpanProcessor.java b/sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/SpanProcessor.java\nindex b9d923094..0cd60b682 100644\n--- a/sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/SpanProcessor.java\n+++ b/sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/SpanProcessor.java\n\n@@ -57,7 +57,7 @@ public interface SpanProcessor {\n    * @return a {@link CompletableResultCode} which completes when shutdown is finished.\n    */\n   default CompletableResultCode shutdown() {\n-    return CompletableResultCode.ofSuccess();\n+    return forceFlush();\n   }\n \n   /**\n"}}, {"oid": "202c8d96ff67e186ac93b0f8c1da56b567aa3d01", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/202c8d96ff67e186ac93b0f8c1da56b567aa3d01", "message": "Fix review", "committedDate": "2020-11-05T16:12:51Z", "type": "commit"}]}