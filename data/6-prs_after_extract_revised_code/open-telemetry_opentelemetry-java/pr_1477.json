{"pr_number": 1477, "pr_title": "Hide EnvAutodetectResource ro reduce public classes", "pr_createdAt": "2020-07-29T13:21:59Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1477", "timeline": [{"oid": "028ff21ab5946cb0d6fce1d9bbbf8b35d0bc3831", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/028ff21ab5946cb0d6fce1d9bbbf8b35d0bc3831", "message": "Hide EnvAutodetectResource reduce public classes", "committedDate": "2020-07-29T13:19:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwMzIwNw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1477#discussion_r462303207", "bodyText": "I'd suggest creating this value only once, for simplicity and to keep the invariant EnvAutodetectResource has - also, for that case, rename it to getDefault() too.", "author": "carlosalberto", "createdAt": "2020-07-29T13:36:16Z", "path": "sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java", "diffHunk": "@@ -117,6 +117,19 @@ public static Resource create(Attributes attributes) {\n     return new AutoValue_Resource(attributes);\n   }\n \n+  /**\n+   * Returns a {@link Resource}. This resource information is loaded from the\n+   * OTEL_RESOURCE_ATTRIBUTES environment variable or otel.resource.attributes system properties.\n+   *\n+   * @return a {@code Resource}.\n+   */\n+  public static Resource createDefault() {", "originalCommit": "028ff21ab5946cb0d6fce1d9bbbf8b35d0bc3831", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMxMzA3NQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1477#discussion_r462313075", "bodyText": "Thanks. Fixed at lastest commit.", "author": "dengliming", "createdAt": "2020-07-29T13:49:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwMzIwNw=="}], "type": "inlineReview", "revised_code": {"commit": "d8f46ca28a8585ec05d0b1da0f773a2da464629e", "chunk": "diff --git a/sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java b/sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java\nindex 713be7f1e..42fe5faa9 100644\n--- a/sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java\n+++ b/sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java\n\n@@ -123,11 +125,8 @@ public abstract class Resource {\n    *\n    * @return a {@code Resource}.\n    */\n-  public static Resource createDefault() {\n-    return new EnvAutodetectResource.Builder()\n-        .readEnvironmentVariables()\n-        .readSystemProperties()\n-        .build();\n+  public static Resource getDefault() {\n+    return DEFALUT_AUTODETECT_RESOURCE;\n   }\n \n   /**\n"}}, {"oid": "d8f46ca28a8585ec05d0b1da0f773a2da464629e", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/d8f46ca28a8585ec05d0b1da0f773a2da464629e", "message": "Fix review", "committedDate": "2020-07-29T13:48:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMxOTgyMA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1477#discussion_r462319820", "bodyText": "DEFAULT ;)", "author": "carlosalberto", "createdAt": "2020-07-29T13:58:32Z", "path": "sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java", "diffHunk": "@@ -53,6 +53,8 @@\n               .setAttribute(\"telemetry.sdk.language\", \"java\")\n               .setAttribute(\"telemetry.sdk.version\", readVersion())\n               .build());\n+  private static final Resource DEFALUT_AUTODETECT_RESOURCE =", "originalCommit": "d8f46ca28a8585ec05d0b1da0f773a2da464629e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyMjc0MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1477#discussion_r462322741", "bodyText": "done. thx.", "author": "dengliming", "createdAt": "2020-07-29T14:02:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMxOTgyMA=="}], "type": "inlineReview", "revised_code": {"commit": "bc6ba98954ed4d00766b184e7d82cba7087e17a5", "chunk": "diff --git a/sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java b/sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java\nindex 42fe5faa9..10e8b3ebc 100644\n--- a/sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java\n+++ b/sdk/src/main/java/io/opentelemetry/sdk/resources/Resource.java\n\n@@ -53,7 +53,7 @@ public abstract class Resource {\n               .setAttribute(\"telemetry.sdk.language\", \"java\")\n               .setAttribute(\"telemetry.sdk.version\", readVersion())\n               .build());\n-  private static final Resource DEFALUT_AUTODETECT_RESOURCE =\n+  private static final Resource DEFAULT =\n       new EnvAutodetectResource.Builder().readEnvironmentVariables().readSystemProperties().build();\n \n   @Nullable\n"}}, {"oid": "bc6ba98954ed4d00766b184e7d82cba7087e17a5", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/bc6ba98954ed4d00766b184e7d82cba7087e17a5", "message": "Fix review", "committedDate": "2020-07-29T14:01:53Z", "type": "commit"}]}