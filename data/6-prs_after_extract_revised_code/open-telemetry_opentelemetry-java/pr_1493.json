{"pr_number": 1493, "pr_title": "Migrate from Truth to AssertJ", "pr_createdAt": "2020-08-03T07:53:45Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1493", "timeline": [{"oid": "38ba76022367a833b10038fa5980795301cdbc04", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/38ba76022367a833b10038fa5980795301cdbc04", "message": "Migrate from Truth to AssertJ", "committedDate": "2020-08-03T07:48:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0MDM0OA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1493#discussion_r464640348", "bodyText": "isn't the order actually important here?", "author": "jkwatson", "createdAt": "2020-08-03T20:19:25Z", "path": "api/src/test/java/io/opentelemetry/trace/TraceStateTest.java", "diffHunk": "@@ -52,7 +52,7 @@ void getEntries() {\n     assertThat(secondTraceState.getEntries())\n         .containsExactly(TraceState.Entry.create(SECOND_KEY, SECOND_VALUE));\n     assertThat(multiValueTraceState.getEntries())\n-        .containsExactly(\n+        .containsExactlyInAnyOrder(", "originalCommit": "38ba76022367a833b10038fa5980795301cdbc04", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcwMjgxNw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1493#discussion_r464702817", "bodyText": "Confirmed that the order seems to be changing here - filed #1499 will look into it in a follow up.", "author": "anuraaga", "createdAt": "2020-08-03T22:52:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0MDM0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcxMjc1OA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1493#discussion_r464712758", "bodyText": "I think the order is supposed to be the opposite of what you put in, if you look at the javadoc on the TraceState.Builder class. I think this test just wasn't asserting that fact.", "author": "jkwatson", "createdAt": "2020-08-03T23:24:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0MDM0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcxMzUzNw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1493#discussion_r464713537", "bodyText": "Ah you did the digging for me! Thanks I went ahead and updated the test here.", "author": "anuraaga", "createdAt": "2020-08-03T23:27:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0MDM0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcxNTczMg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1493#discussion_r464715732", "bodyText": "I do like that assertJ makes it super clear when you aren't enforcing the order, though!", "author": "jkwatson", "createdAt": "2020-08-03T23:34:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0MDM0OA=="}], "type": "inlineReview", "revised_code": {"commit": "e3ba4038993708b2ba54db13c44597663cff1d1a", "chunk": "diff --git a/api/src/test/java/io/opentelemetry/trace/TraceStateTest.java b/api/src/test/java/io/opentelemetry/trace/TraceStateTest.java\nindex 5f578e526..dbc53577c 100644\n--- a/api/src/test/java/io/opentelemetry/trace/TraceStateTest.java\n+++ b/api/src/test/java/io/opentelemetry/trace/TraceStateTest.java\n\n@@ -51,10 +51,11 @@ class TraceStateTest {\n         .containsExactly(TraceState.Entry.create(FIRST_KEY, FIRST_VALUE));\n     assertThat(secondTraceState.getEntries())\n         .containsExactly(TraceState.Entry.create(SECOND_KEY, SECOND_VALUE));\n+    // Reverse order of input.\n     assertThat(multiValueTraceState.getEntries())\n-        .containsExactlyInAnyOrder(\n-            TraceState.Entry.create(FIRST_KEY, FIRST_VALUE),\n-            TraceState.Entry.create(SECOND_KEY, SECOND_VALUE));\n+        .containsExactly(\n+            TraceState.Entry.create(SECOND_KEY, SECOND_VALUE),\n+            TraceState.Entry.create(FIRST_KEY, FIRST_VALUE));\n   }\n \n   @Test\n"}}, {"oid": "a37eb758026a9b0c1de45fc9ada0f522db627a8c", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a37eb758026a9b0c1de45fc9ada0f522db627a8c", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into truth-to-assertj", "committedDate": "2020-08-03T23:11:59Z", "type": "commit"}, {"oid": "e3ba4038993708b2ba54db13c44597663cff1d1a", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e3ba4038993708b2ba54db13c44597663cff1d1a", "message": "Fix test", "committedDate": "2020-08-03T23:26:50Z", "type": "commit"}, {"oid": "2de746f9324fa7c3314fa07f1ff6dc5b55204c28", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/2de746f9324fa7c3314fa07f1ff6dc5b55204c28", "message": "Update andAndUpdate", "committedDate": "2020-08-03T23:34:11Z", "type": "commit"}]}