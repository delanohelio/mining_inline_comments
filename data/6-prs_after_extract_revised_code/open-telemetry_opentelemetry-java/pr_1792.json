{"pr_number": 1792, "pr_title": "Add Context arg to SpanProcessor.OnStart.", "pr_createdAt": "2020-10-13T14:45:09Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1792", "timeline": [{"oid": "670f567fca1d61453001357aa7c313cabab73a97", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/670f567fca1d61453001357aa7c313cabab73a97", "message": "Add Context arg to SpanProcessor.OnStart.", "committedDate": "2020-10-13T14:43:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAxMjc4OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1792#discussion_r504012789", "bodyText": "This seems a bit dirty, so if someone can suggest a better solution that would be good.", "author": "Oberon00", "createdAt": "2020-10-13T14:45:44Z", "path": "sdk_extensions/async_processor/src/main/java/io/opentelemetry/sdk/extensions/trace/export/DisruptorEventQueue.java", "diffHunk": "@@ -84,14 +87,14 @@ public DisruptorEvent newInstance() {\n     this.blocking = blocking;\n   }\n \n-  void enqueueStartEvent(ReadWriteSpan span) {\n+  void enqueueStartEvent(ReadWriteSpan span, Context parentContext) {\n     if (isShutdown) {\n       if (!loggedShutdownMessage.getAndSet(true)) {\n         logger.info(\"Attempted to enqueue start event after Disruptor shutdown.\");\n       }\n       return;\n     }\n-    enqueue(EventType.ON_START, span, null);\n+    enqueue(EventType.ON_START, new AbstractMap.SimpleImmutableEntry<>(span, parentContext), null);", "originalCommit": "670f567fca1d61453001357aa7c313cabab73a97", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA4MTg4Ng==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1792#discussion_r504081886", "bodyText": "I think it's fine for now, although agree it's ugly. I would like to revisit the way the disruptor messages are built at some point, since I ran into difficulties when trying to work with it a few months ago, as well. I think the best answer might be to create a Tuple to hold the message data, or maybe split the message types so they can be more easily customized.", "author": "jkwatson", "createdAt": "2020-10-13T16:15:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAxMjc4OQ=="}], "type": "inlineReview", "revised_code": null}]}