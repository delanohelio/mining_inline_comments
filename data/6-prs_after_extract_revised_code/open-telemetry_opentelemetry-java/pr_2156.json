{"pr_number": 2156, "pr_title": "Changes TextMapPropagator.fields() return type from List to Collection", "pr_createdAt": "2020-11-29T18:17:53Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2156", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM0MDgyMQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2156#discussion_r532340821", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * @return collection of fields that will be used by this formatter.\n          \n          \n            \n               * @return the fields that will be used by this formatter.", "author": "anuraaga", "createdAt": "2020-11-30T04:23:22Z", "path": "context/src/main/java/io/opentelemetry/context/propagation/TextMapPropagator.java", "diffHunk": "@@ -87,12 +88,12 @@ static TextMapPropagator noop() {\n    * clear fields as they couldn't have been set before. If it is a mutable, retryable object,\n    * successive calls should clear these fields first.\n    *\n-   * @return list of fields that will be used by this formatter.\n+   * @return collection of fields that will be used by this formatter.", "originalCommit": "7bc5470e81237d2fe0745e95701478faac6aaedc", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "358fedb1efd6eab9d9572a47d384c7bfd3295583", "chunk": "diff --git a/context/src/main/java/io/opentelemetry/context/propagation/TextMapPropagator.java b/context/src/main/java/io/opentelemetry/context/propagation/TextMapPropagator.java\nindex 35c27ef38..92afb48ff 100644\n--- a/context/src/main/java/io/opentelemetry/context/propagation/TextMapPropagator.java\n+++ b/context/src/main/java/io/opentelemetry/context/propagation/TextMapPropagator.java\n\n@@ -88,7 +88,7 @@ public interface TextMapPropagator {\n    * clear fields as they couldn't have been set before. If it is a mutable, retryable object,\n    * successive calls should clear these fields first.\n    *\n-   * @return collection of fields that will be used by this formatter.\n+   * @return the fields that will be used by this formatter.\n    */\n   // The use cases of this are:\n   // * allow pre-allocation of fields, especially in systems like gRPC Metadata\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQzOTM4Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2156#discussion_r532439383", "bodyText": "It seems the W3CTraceContextPropagator's implementation should also be changed.", "author": "Oberon00", "createdAt": "2020-11-30T09:05:05Z", "path": "api/src/main/java/io/opentelemetry/api/trace/propagation/HttpTraceContext.java", "diffHunk": "@@ -33,7 +33,7 @@ public static HttpTraceContext getInstance() {\n   }\n \n   @Override\n-  public List<String> fields() {\n+  public Collection<String> fields() {\n     return W3CTraceContextPropagator.getInstance().fields();", "originalCommit": "7bc5470e81237d2fe0745e95701478faac6aaedc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYwMDI0OA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2156#discussion_r532600248", "bodyText": "Additionally, when doing a CMD + SHFT + F in IntelliJ for fields().. It also highlights the following fields() methods in the propagators.\n\nDo you think we should also change these implementations? As although they are List which is a subtype of Collection, it may be best to be explicit with the types for clarity and consistency.", "author": "ChrisJBurns", "createdAt": "2020-11-30T13:35:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQzOTM4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc5ODg3Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2156#discussion_r532798873", "bodyText": "Yes, let's change them all for consistency. good catch.", "author": "jkwatson", "createdAt": "2020-11-30T18:10:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQzOTM4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjkwODM4NQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2156#discussion_r532908385", "bodyText": "Pushed changes for all implementations also", "author": "ChrisJBurns", "createdAt": "2020-11-30T21:16:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQzOTM4Mw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "358fedb1efd6eab9d9572a47d384c7bfd3295583", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/358fedb1efd6eab9d9572a47d384c7bfd3295583", "message": "Changes return type from List to Collection\n\n- changes the return type of the fields() method in TextMapPropagator from List<String> to Collection<String>\nand updated all implementations for consistency", "committedDate": "2020-11-30T21:14:06Z", "type": "commit"}, {"oid": "358fedb1efd6eab9d9572a47d384c7bfd3295583", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/358fedb1efd6eab9d9572a47d384c7bfd3295583", "message": "Changes return type from List to Collection\n\n- changes the return type of the fields() method in TextMapPropagator from List<String> to Collection<String>\nand updated all implementations for consistency", "committedDate": "2020-11-30T21:14:06Z", "type": "forcePushed"}]}