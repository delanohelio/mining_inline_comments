{"pr_number": 65205, "pr_title": "Include date in data stream backing index names", "pr_createdAt": "2020-11-18T14:08:37Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/65205", "timeline": [{"oid": "0538bfd7cac8893e021b6f192163ff11ec2ae854", "url": "https://github.com/elastic/elasticsearch/commit/0538bfd7cac8893e021b6f192163ff11ec2ae854", "message": "wip on adding dates to backing index names", "committedDate": "2020-11-18T13:46:02Z", "type": "commit"}, {"oid": "5eeec96d52b5eea2ad27288bbcd81cee4ba639af", "url": "https://github.com/elastic/elasticsearch/commit/5eeec96d52b5eea2ad27288bbcd81cee4ba639af", "message": "fix remaining unit tests", "committedDate": "2020-11-18T13:46:02Z", "type": "commit"}, {"oid": "8d7ba94f7356279dd7ee516fb39a2bd5fd58f2a0", "url": "https://github.com/elastic/elasticsearch/commit/8d7ba94f7356279dd7ee516fb39a2bd5fd58f2a0", "message": "update tests after #65027", "committedDate": "2020-11-18T14:06:16Z", "type": "commit"}, {"oid": "7b3f5a3bc3740dca06638b49ba8beae55585e9e4", "url": "https://github.com/elastic/elasticsearch/commit/7b3f5a3bc3740dca06638b49ba8beae55585e9e4", "message": "fix 2 tests", "committedDate": "2020-11-19T18:00:48Z", "type": "commit"}, {"oid": "20d61e908f84540d7497b87b9ee4537792ea5d8e", "url": "https://github.com/elastic/elasticsearch/commit/20d61e908f84540d7497b87b9ee4537792ea5d8e", "message": "Update data stream docs", "committedDate": "2020-11-24T22:21:17Z", "type": "commit"}, {"oid": "4d2969307f438132544a9ee9ccd0ea67a1c0076e", "url": "https://github.com/elastic/elasticsearch/commit/4d2969307f438132544a9ee9ccd0ea67a1c0076e", "message": "Merge branch 'master' into 65012_date_in_backing_index_names", "committedDate": "2020-11-30T13:55:27Z", "type": "commit"}, {"oid": "68d0ebea616a788b1a0fa8e7540fcbd52e4dc6d6", "url": "https://github.com/elastic/elasticsearch/commit/68d0ebea616a788b1a0fa8e7540fcbd52e4dc6d6", "message": "fix test and checkstyle", "committedDate": "2020-11-30T17:37:40Z", "type": "commit"}, {"oid": "0b888ca4aa7ac3a42476f837d3ba47bee6d60fd9", "url": "https://github.com/elastic/elasticsearch/commit/0b888ca4aa7ac3a42476f837d3ba47bee6d60fd9", "message": "fix test", "committedDate": "2020-11-30T19:31:41Z", "type": "commit"}, {"oid": "3c274c4dca35d88a07055419497810cdd771cf39", "url": "https://github.com/elastic/elasticsearch/commit/3c274c4dca35d88a07055419497810cdd771cf39", "message": "fix more tests", "committedDate": "2020-11-30T20:37:35Z", "type": "commit"}, {"oid": "18d9cc6537516188587075cf676911bfdc6986ff", "url": "https://github.com/elastic/elasticsearch/commit/18d9cc6537516188587075cf676911bfdc6986ff", "message": "re-add info about ordered `indices` prop", "committedDate": "2020-11-30T20:45:21Z", "type": "commit"}, {"oid": "578d1cddcf630623ddcebd4666eae9cbbdea095c", "url": "https://github.com/elastic/elasticsearch/commit/578d1cddcf630623ddcebd4666eae9cbbdea095c", "message": "fix a few more tests", "committedDate": "2020-11-30T23:11:46Z", "type": "commit"}, {"oid": "84d29b2a2b55ab8a2f2d062fe1f1d40e354514d0", "url": "https://github.com/elastic/elasticsearch/commit/84d29b2a2b55ab8a2f2d062fe1f1d40e354514d0", "message": "and more tests", "committedDate": "2020-12-01T13:56:20Z", "type": "commit"}, {"oid": "9c4b00e77534ce3ef8bc06ed9b2b279873700e7b", "url": "https://github.com/elastic/elasticsearch/commit/9c4b00e77534ce3ef8bc06ed9b2b279873700e7b", "message": "more YAML test fixes", "committedDate": "2020-12-01T15:26:25Z", "type": "commit"}, {"oid": "d942951a0aa844dfa349a2da825119dedc8a2cfd", "url": "https://github.com/elastic/elasticsearch/commit/d942951a0aa844dfa349a2da825119dedc8a2cfd", "message": "Merge branch '65012_date_in_backing_index_names' of https://github.com/danhermann/elasticsearch into 65012_date_in_backing_index_names", "committedDate": "2020-12-01T15:26:59Z", "type": "commit"}, {"oid": "5d4e700d631aed5e0684fe1354904911e3a024da", "url": "https://github.com/elastic/elasticsearch/commit/5d4e700d631aed5e0684fe1354904911e3a024da", "message": "Merge branch 'master' into 65012_date_in_backing_index_names", "committedDate": "2020-12-01T15:29:12Z", "type": "commit"}, {"oid": "f60cb75958841538ecba39727baafa632f408a46", "url": "https://github.com/elastic/elasticsearch/commit/f60cb75958841538ecba39727baafa632f408a46", "message": "change BWC version", "committedDate": "2020-12-01T15:48:49Z", "type": "commit"}, {"oid": "385e34273943a45acd88fb8a48371673390536cd", "url": "https://github.com/elastic/elasticsearch/commit/385e34273943a45acd88fb8a48371673390536cd", "message": "moar tests", "committedDate": "2020-12-01T16:56:03Z", "type": "commit"}, {"oid": "e1a2cef3b09ddf32ae9f16a710986210212111e0", "url": "https://github.com/elastic/elasticsearch/commit/e1a2cef3b09ddf32ae9f16a710986210212111e0", "message": "spotless", "committedDate": "2020-12-01T17:00:57Z", "type": "commit"}, {"oid": "e3219b293f093f80abb1e7fe8bae44f249acd97a", "url": "https://github.com/elastic/elasticsearch/commit/e3219b293f093f80abb1e7fe8bae44f249acd97a", "message": "spotless?", "committedDate": "2020-12-01T17:44:11Z", "type": "commit"}, {"oid": "cea4bc264e252f2aa6bc639038579f547ad9efbc", "url": "https://github.com/elastic/elasticsearch/commit/cea4bc264e252f2aa6bc639038579f547ad9efbc", "message": "Fix overlooked ds example", "committedDate": "2020-12-01T20:59:34Z", "type": "commit"}, {"oid": "afbabdd978031ac5d1cb7c738558d4208552da5d", "url": "https://github.com/elastic/elasticsearch/commit/afbabdd978031ac5d1cb7c738558d4208552da5d", "message": "Fix setup refs", "committedDate": "2020-12-01T21:22:40Z", "type": "commit"}, {"oid": "e33f42923ea599bf1362bdefaaa0fb4f9cc7015b", "url": "https://github.com/elastic/elasticsearch/commit/e33f42923ea599bf1362bdefaaa0fb4f9cc7015b", "message": "Add request body", "committedDate": "2020-12-01T21:24:38Z", "type": "commit"}, {"oid": "8f3d4294e43170cc18656de6a929c5ad201f82bd", "url": "https://github.com/elastic/elasticsearch/commit/8f3d4294e43170cc18656de6a929c5ad201f82bd", "message": "last doc fix", "committedDate": "2020-12-01T21:51:51Z", "type": "commit"}, {"oid": "be57429b07fa78135ae77b72014138960bac1362", "url": "https://github.com/elastic/elasticsearch/commit/be57429b07fa78135ae77b72014138960bac1362", "message": "Merge branch 'master' into 65012_date_in_backing_index_names", "committedDate": "2020-12-08T17:59:36Z", "type": "commit"}, {"oid": "5229df930d3cdc13813764df89d782aaab3a7559", "url": "https://github.com/elastic/elasticsearch/commit/5229df930d3cdc13813764df89d782aaab3a7559", "message": "remove merge artifact", "committedDate": "2020-12-08T18:03:48Z", "type": "commit"}, {"oid": "5cf00fe97e555543f33327eca6a5e2bc9c614fc8", "url": "https://github.com/elastic/elasticsearch/commit/5cf00fe97e555543f33327eca6a5e2bc9c614fc8", "message": "fix unit test", "committedDate": "2020-12-08T20:15:03Z", "type": "commit"}, {"oid": "752206dff146ffaf227ca785e9a1d48a0dab38d4", "url": "https://github.com/elastic/elasticsearch/commit/752206dff146ffaf227ca785e9a1d48a0dab38d4", "message": "update javadoc, improve test assertions", "committedDate": "2020-12-08T20:45:01Z", "type": "commit"}, {"oid": "8982dfd53a42f4b392cbe17203b5b0c8c077f196", "url": "https://github.com/elastic/elasticsearch/commit/8982dfd53a42f4b392cbe17203b5b0c8c077f196", "message": "fix upgrade IT", "committedDate": "2020-12-08T21:18:27Z", "type": "commit"}, {"oid": "ad36a4436f278c5a02df44261c48187fc0607c40", "url": "https://github.com/elastic/elasticsearch/commit/ad36a4436f278c5a02df44261c48187fc0607c40", "message": "Merge branch 'master' into 65012_date_in_backing_index_names", "committedDate": "2020-12-09T13:50:08Z", "type": "commit"}, {"oid": "d1edd8cec7a931c00d8de75ba06588f8e8b2d6cf", "url": "https://github.com/elastic/elasticsearch/commit/d1edd8cec7a931c00d8de75ba06588f8e8b2d6cf", "message": "another attempt at upgrade IT", "committedDate": "2020-12-09T14:42:58Z", "type": "commit"}, {"oid": "3220ab2d0db25a775b1d533812d1eec54826af32", "url": "https://github.com/elastic/elasticsearch/commit/3220ab2d0db25a775b1d533812d1eec54826af32", "message": "sigh", "committedDate": "2020-12-09T17:29:53Z", "type": "commit"}, {"oid": "d50b90e2b385a82420b8faf24ae69b3b8781eb3f", "url": "https://github.com/elastic/elasticsearch/commit/d50b90e2b385a82420b8faf24ae69b3b8781eb3f", "message": "Merge branch 'master' into 65012_date_in_backing_index_names", "committedDate": "2020-12-09T17:30:21Z", "type": "commit"}, {"oid": "eb4c22b9328ce071f0ea7280a2d96c2231e07f66", "url": "https://github.com/elastic/elasticsearch/commit/eb4c22b9328ce071f0ea7280a2d96c2231e07f66", "message": "change yyyy-MM-dd to yyyy.MM.dd", "committedDate": "2020-12-09T20:34:00Z", "type": "commit"}, {"oid": "e2c2aad80fea6c91563c80684e7891783f877321", "url": "https://github.com/elastic/elasticsearch/commit/e2c2aad80fea6c91563c80684e7891783f877321", "message": "fix more tests", "committedDate": "2020-12-09T21:06:15Z", "type": "commit"}, {"oid": "fc2bde70c732c33802c04963f39495809cd5c481", "url": "https://github.com/elastic/elasticsearch/commit/fc2bde70c732c33802c04963f39495809cd5c481", "message": "Merge branch 'master' into 65012_date_in_backing_index_names", "committedDate": "2020-12-11T13:09:10Z", "type": "commit"}, {"oid": "784c6eac9721f3cb262b8d3c3f3306f71d71f71b", "url": "https://github.com/elastic/elasticsearch/commit/784c6eac9721f3cb262b8d3c3f3306f71d71f71b", "message": "[DOCS] Update SVG images", "committedDate": "2020-12-11T14:49:01Z", "type": "commit"}, {"oid": "8a2158127986553121f82837dede21ce35828f17", "url": "https://github.com/elastic/elasticsearch/commit/8a2158127986553121f82837dede21ce35828f17", "message": "fix tests", "committedDate": "2020-12-14T14:29:45Z", "type": "commit"}, {"oid": "f0c891630a96e9c018ca19d3e5d940288bf32567", "url": "https://github.com/elastic/elasticsearch/commit/f0c891630a96e9c018ca19d3e5d940288bf32567", "message": "Merge branch '65012_date_in_backing_index_names' of https://github.com/danhermann/elasticsearch into 65012_date_in_backing_index_names", "committedDate": "2020-12-14T14:29:56Z", "type": "commit"}, {"oid": "0da762ae70795ee82f2d39b5ecc6012a9c76fb22", "url": "https://github.com/elastic/elasticsearch/commit/0da762ae70795ee82f2d39b5ecc6012a9c76fb22", "message": "fix more tests", "committedDate": "2020-12-14T16:56:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU1MDYxOQ==", "url": "https://github.com/elastic/elasticsearch/pull/65205#discussion_r542550619", "bodyText": "maybe use the getDefaultBackingIndexName(...) method that accepts a timestamp?", "author": "martijnvg", "createdAt": "2020-12-14T17:04:44Z", "path": "server/src/test/java/org/elasticsearch/cluster/metadata/WildcardExpressionResolverTests.java", "diffHunk": "@@ -215,8 +215,10 @@ public void testResolveAliases() {\n \n     public void testResolveDataStreams() {\n         String dataStreamName = \"foo_logs\";\n-        IndexMetadata firstBackingIndexMetadata = createBackingIndex(dataStreamName, 1).build();\n-        IndexMetadata secondBackingIndexMetadata = createBackingIndex(dataStreamName, 2).build();\n+        long epochMillis = randomLongBetween(1580536800000L, 1583042400000L);\n+        String dateString = DataStream.DATE_FORMATTER.formatMillis(epochMillis);", "originalCommit": "f0c891630a96e9c018ca19d3e5d940288bf32567", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0c2181d1775171f66f9442f6aebb83fc93f8b8a9", "chunk": "diff --git a/server/src/test/java/org/elasticsearch/cluster/metadata/WildcardExpressionResolverTests.java b/server/src/test/java/org/elasticsearch/cluster/metadata/WildcardExpressionResolverTests.java\nindex dd8e02097ce..fc9fdea72e8 100644\n--- a/server/src/test/java/org/elasticsearch/cluster/metadata/WildcardExpressionResolverTests.java\n+++ b/server/src/test/java/org/elasticsearch/cluster/metadata/WildcardExpressionResolverTests.java\n\n@@ -216,7 +216,6 @@ public class WildcardExpressionResolverTests extends ESTestCase {\n     public void testResolveDataStreams() {\n         String dataStreamName = \"foo_logs\";\n         long epochMillis = randomLongBetween(1580536800000L, 1583042400000L);\n-        String dateString = DataStream.DATE_FORMATTER.formatMillis(epochMillis);\n         IndexMetadata firstBackingIndexMetadata = createBackingIndex(dataStreamName, 1, epochMillis).build();\n         IndexMetadata secondBackingIndexMetadata = createBackingIndex(dataStreamName, 2, epochMillis).build();\n \n"}}, {"oid": "0c2181d1775171f66f9442f6aebb83fc93f8b8a9", "url": "https://github.com/elastic/elasticsearch/commit/0c2181d1775171f66f9442f6aebb83fc93f8b8a9", "message": "moar tests", "committedDate": "2020-12-14T17:27:51Z", "type": "commit"}, {"oid": "a49143e8b1a39d23e44526103812449c3f2a29d3", "url": "https://github.com/elastic/elasticsearch/commit/a49143e8b1a39d23e44526103812449c3f2a29d3", "message": "and again...", "committedDate": "2020-12-14T18:11:15Z", "type": "commit"}, {"oid": "bda937d4df09680a23a85d4562e511fa06a34656", "url": "https://github.com/elastic/elasticsearch/commit/bda937d4df09680a23a85d4562e511fa06a34656", "message": "sad face", "committedDate": "2020-12-14T19:05:22Z", "type": "commit"}, {"oid": "3ff03ab2c3b0c69e74b389c8db3a670720b38edb", "url": "https://github.com/elastic/elasticsearch/commit/3ff03ab2c3b0c69e74b389c8db3a670720b38edb", "message": "Merge branch 'master' into 65012_date_in_backing_index_names", "committedDate": "2020-12-14T19:05:40Z", "type": "commit"}, {"oid": "814d606252ae1edecd1954302a9dc0d54ed20365", "url": "https://github.com/elastic/elasticsearch/commit/814d606252ae1edecd1954302a9dc0d54ed20365", "message": "Merge branch 'master' into 65012_date_in_backing_index_names", "committedDate": "2020-12-14T21:57:13Z", "type": "commit"}]}