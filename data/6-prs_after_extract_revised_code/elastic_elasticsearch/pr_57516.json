{"pr_number": 57516, "pr_title": "Remove version check after backport", "pr_createdAt": "2020-06-02T10:04:01Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57516", "timeline": [{"oid": "6e7aa152d66d8533dcd502ef9b104b0821ff1cd7", "url": "https://github.com/elastic/elasticsearch/commit/6e7aa152d66d8533dcd502ef9b104b0821ff1cd7", "message": "Adjust version after backport", "committedDate": "2020-06-02T10:02:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc2NjgzOA==", "url": "https://github.com/elastic/elasticsearch/pull/57516#discussion_r433766838", "bodyText": "Since it's just a single field inside the check I would completely remove the check from master.  This will have to be done in 7.last if it's not done now, but this one seems unlikely to cause confusion if removed now, so might as well be removed now.", "author": "droberts195", "createdAt": "2020-06-02T10:09:21Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java", "diffHunk": "@@ -127,7 +127,7 @@ public AutodetectResult(StreamInput in) throws IOException {\n         } else {\n             this.modelPlot = null;\n         }\n-        if (in.getVersion().onOrAfter(Version.V_8_0_0)) {\n+        if (in.getVersion().onOrAfter(Version.V_7_9_0)) {", "originalCommit": "6e7aa152d66d8533dcd502ef9b104b0821ff1cd7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc2ODUzMw==", "url": "https://github.com/elastic/elasticsearch/pull/57516#discussion_r433768533", "bodyText": "Done.", "author": "przemekwitek", "createdAt": "2020-06-02T10:12:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc2NjgzOA=="}], "type": "inlineReview", "revised_code": {"commit": "43afcc264aa1bd364e8c0ebf52ddd8d365000dd6", "chunk": "diff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java\nindex 8d035ca578e..3a62392b6be 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java\n\n@@ -127,12 +126,8 @@ public class AutodetectResult implements ToXContentObject, Writeable {\n         } else {\n             this.modelPlot = null;\n         }\n-        if (in.getVersion().onOrAfter(Version.V_7_9_0)) {\n-            if (in.readBoolean()) {\n-                this.annotation = new Annotation(in);\n-            } else {\n-                this.annotation = null;\n-            }\n+        if (in.readBoolean()) {\n+            this.annotation = new Annotation(in);\n         } else {\n             this.annotation = null;\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc2NzA2Nw==", "url": "https://github.com/elastic/elasticsearch/pull/57516#discussion_r433767067", "bodyText": "As above, it will save work later on just to delete this line now.", "author": "droberts195", "createdAt": "2020-06-02T10:09:49Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java", "diffHunk": "@@ -168,7 +168,7 @@ public void writeTo(StreamOutput out) throws IOException {\n         writeNullable(modelSnapshot, out);\n         writeNullable(modelSizeStats, out);\n         writeNullable(modelPlot, out);\n-        if (out.getVersion().onOrAfter(Version.V_8_0_0)) {\n+        if (out.getVersion().onOrAfter(Version.V_7_9_0)) {", "originalCommit": "6e7aa152d66d8533dcd502ef9b104b0821ff1cd7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc2ODYwMg==", "url": "https://github.com/elastic/elasticsearch/pull/57516#discussion_r433768602", "bodyText": "Done.", "author": "przemekwitek", "createdAt": "2020-06-02T10:12:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc2NzA2Nw=="}], "type": "inlineReview", "revised_code": {"commit": "43afcc264aa1bd364e8c0ebf52ddd8d365000dd6", "chunk": "diff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java\nindex 8d035ca578e..3a62392b6be 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/results/AutodetectResult.java\n\n@@ -168,9 +163,7 @@ public class AutodetectResult implements ToXContentObject, Writeable {\n         writeNullable(modelSnapshot, out);\n         writeNullable(modelSizeStats, out);\n         writeNullable(modelPlot, out);\n-        if (out.getVersion().onOrAfter(Version.V_7_9_0)) {\n-            writeNullable(annotation, out);\n-        }\n+        writeNullable(annotation, out);\n         writeNullable(categoryDefinition, out);\n         writeNullable(flushAcknowledgement, out);\n         writeNullable(forecast, out);\n"}}, {"oid": "43afcc264aa1bd364e8c0ebf52ddd8d365000dd6", "url": "https://github.com/elastic/elasticsearch/commit/43afcc264aa1bd364e8c0ebf52ddd8d365000dd6", "message": "Apply review comments", "committedDate": "2020-06-02T10:11:42Z", "type": "commit"}]}