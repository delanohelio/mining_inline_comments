{"pr_number": 63413, "pr_title": "Use different G1GC options for small heaps (#59667)", "pr_createdAt": "2020-10-07T15:00:53Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/63413", "timeline": [{"oid": "118372671e1e4f3cf633b0873d30dd634aeee0ba", "url": "https://github.com/elastic/elasticsearch/commit/118372671e1e4f3cf633b0873d30dd634aeee0ba", "message": "Use different G1GC options for small heaps (#59667)\n\nOur benchmarks have demonstrated that Elasticsearch performs better with\n`-XX:G1HeapRegionSize=4M` and `-XX:G1ReservePercent=15` options for the\nsmall heap sizes. With this commit we ergonomically choose different\nG1GC options for heap sizes smaller than (not including) 8GB.\n\nCo-authored-by: Daniel Mitterdorfer daniel.mitterdorfer@elastic.co\n# Conflicts:\n#\tdistribution/tools/launchers/src/main/java/org/elasticsearch/tools/launchers/JvmErgonomics.java", "committedDate": "2020-10-07T14:47:48Z", "type": "commit"}, {"oid": "77c7fa7e62134ab343cb4f0e6f8f00e155217b6b", "url": "https://github.com/elastic/elasticsearch/commit/77c7fa7e62134ab343cb4f0e6f8f00e155217b6b", "message": "Don't change G1GC options for JDK older than JDK10", "committedDate": "2020-10-08T13:14:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg0NzY4MA==", "url": "https://github.com/elastic/elasticsearch/pull/63413#discussion_r501847680", "bodyText": "s/Elastic/Elasticsearch ?", "author": "dliappis", "createdAt": "2020-10-08T16:19:06Z", "path": "distribution/tools/launchers/src/main/java/org/elasticsearch/tools/launchers/JvmErgonomics.java", "diffHunk": "@@ -75,20 +75,59 @@ private JvmErgonomics() {\n \n             ergonomicChoices.add(\"-XX:MaxDirectMemorySize=\" + heapSize / 2);\n         }\n+        // Elastic supports G1GC on JDK10+", "originalCommit": "77c7fa7e62134ab343cb4f0e6f8f00e155217b6b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9757fff511872dab1d8027e258c92f57f185409f", "chunk": "diff --git a/distribution/tools/launchers/src/main/java/org/elasticsearch/tools/launchers/JvmErgonomics.java b/distribution/tools/launchers/src/main/java/org/elasticsearch/tools/launchers/JvmErgonomics.java\nindex b9dab65afc5..217ed67a9db 100644\n--- a/distribution/tools/launchers/src/main/java/org/elasticsearch/tools/launchers/JvmErgonomics.java\n+++ b/distribution/tools/launchers/src/main/java/org/elasticsearch/tools/launchers/JvmErgonomics.java\n\n@@ -75,7 +75,7 @@ final class JvmErgonomics {\n \n             ergonomicChoices.add(\"-XX:MaxDirectMemorySize=\" + heapSize / 2);\n         }\n-        // Elastic supports G1GC on JDK10+\n+        // Elasticsearch supports G1GC on JDK10+\n         if (JavaVersion.majorVersion(JavaVersion.CURRENT) >= 10) {\n             final boolean tuneG1GCForSmallHeap = tuneG1GCForSmallHeap(heapSize);\n             final boolean tuneG1GCHeapRegion = tuneG1GCHeapRegion(finalJvmOptions, tuneG1GCForSmallHeap);\n"}}, {"oid": "9757fff511872dab1d8027e258c92f57f185409f", "url": "https://github.com/elastic/elasticsearch/commit/9757fff511872dab1d8027e258c92f57f185409f", "message": "Fix comment", "committedDate": "2020-10-13T13:41:27Z", "type": "commit"}]}