{"pr_number": 52891, "pr_title": "ValuesSource refactoring: Wire up stats aggregation", "pr_createdAt": "2020-02-27T13:10:26Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/52891", "timeline": [{"oid": "59d4a9d339f45389b3b4a2fafb3bd8cbbd69510d", "url": "https://github.com/elastic/elasticsearch/commit/59d4a9d339f45389b3b4a2fafb3bd8cbbd69510d", "message": "VS refactoring: Wire up stats aggregation", "committedDate": "2020-02-27T12:59:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2Mjc3NA==", "url": "https://github.com/elastic/elasticsearch/pull/52891#discussion_r385162774", "bodyText": "Nice to see that we can reuse the supplier :)", "author": "not-napoleon", "createdAt": "2020-02-27T14:31:28Z", "path": "server/src/main/java/org/elasticsearch/search/aggregations/metrics/StatsAggregatorFactory.java", "diffHunk": "@@ -46,12 +50,27 @@\n         super(name, config, queryShardContext, parent, subFactoriesBuilder, metaData);\n     }\n \n+    static void registerAggregators(ValuesSourceRegistry valuesSourceRegistry) {\n+        valuesSourceRegistry.register(StatsAggregationBuilder.NAME,\n+            List.of(CoreValuesSourceType.NUMERIC, CoreValuesSourceType.DATE, CoreValuesSourceType.BOOLEAN),\n+            new MetricAggregatorSupplier() {", "originalCommit": "59d4a9d339f45389b3b4a2fafb3bd8cbbd69510d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}