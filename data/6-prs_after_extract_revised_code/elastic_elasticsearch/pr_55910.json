{"pr_number": 55910, "pr_title": "Use CollectionUtils.isEmpty make code clean", "pr_createdAt": "2020-04-29T06:34:13Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55910", "timeline": [{"oid": "fb73e04d93f1df0563adcfe3a5859ec444be083a", "url": "https://github.com/elastic/elasticsearch/commit/fb73e04d93f1df0563adcfe3a5859ec444be083a", "message": "Merge pull request #1 from elastic/master\n\nget lastest master code", "committedDate": "2019-11-01T09:33:37Z", "type": "commit"}, {"oid": "e776f8ad5322b60fb116b02e322d8abb45250218", "url": "https://github.com/elastic/elasticsearch/commit/e776f8ad5322b60fb116b02e322d8abb45250218", "message": "Merge pull request #2 from elastic/master\n\nlastest code from master", "committedDate": "2020-04-28T06:13:10Z", "type": "commit"}, {"oid": "8977b5195fd0c662716152a739606638411766e1", "url": "https://github.com/elastic/elasticsearch/commit/8977b5195fd0c662716152a739606638411766e1", "message": "make code more clean by user isempty", "committedDate": "2020-04-29T06:24:45Z", "type": "commit"}, {"oid": "8edba5521467a0ea0a7db34247bce92a4c8b7a1a", "url": "https://github.com/elastic/elasticsearch/commit/8edba5521467a0ea0a7db34247bce92a4c8b7a1a", "message": "format ! to == false", "committedDate": "2020-05-08T02:35:10Z", "type": "commit"}, {"oid": "6139ad6dcd188893f1e89b0acaf5884414ef6b83", "url": "https://github.com/elastic/elasticsearch/commit/6139ad6dcd188893f1e89b0acaf5884414ef6b83", "message": "Merge pull request #3 from elastic/master\n\nlastest code from master", "committedDate": "2020-05-08T02:39:45Z", "type": "commit"}, {"oid": "a157183e98e4a412c854afcd923e0ddb6a601edb", "url": "https://github.com/elastic/elasticsearch/commit/a157183e98e4a412c854afcd923e0ddb6a601edb", "message": "Merge branches 'master' and 'use_isempty_make_code_clean' of github.com:zhenxianyimeng/elasticsearch into use_isempty_make_code_clean", "committedDate": "2020-05-08T02:42:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExMjU1Mw==", "url": "https://github.com/elastic/elasticsearch/pull/55910#discussion_r422112553", "bodyText": "@rjernst is it an issue that this line of code is referenced in the documentation, due to the tag::search-scroll-example?", "author": "pugnascotia", "createdAt": "2020-05-08T12:23:08Z", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/SearchDocumentationIT.java", "diffHunk": "@@ -715,7 +716,7 @@ public void onFailure(Exception e) {\n             String scrollId = searchResponse.getScrollId();\n             SearchHit[] searchHits = searchResponse.getHits().getHits();\n \n-            while (searchHits != null && searchHits.length > 0) { // <2>\n+            while (CollectionUtils.isEmpty(searchHits) == false) { // <2>", "originalCommit": "a157183e98e4a412c854afcd923e0ddb6a601edb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQyODk2OQ==", "url": "https://github.com/elastic/elasticsearch/pull/55910#discussion_r422428969", "bodyText": "Yes and no. The examples are just that: examples. We don't show the full file, so they already lack anything we include.  However, while CollectionUtils is currently brought in by the HLRC through its server jar dependency, I agree we shouldn't be leaking this method in our docs.\n@zhenxianyimeng Can you please revert this and any other *DocumentationIT tests?", "author": "rjernst", "createdAt": "2020-05-09T00:23:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExMjU1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ0NTA1OQ==", "url": "https://github.com/elastic/elasticsearch/pull/55910#discussion_r422445059", "bodyText": "@rjernst ok i have done", "author": "zhenxianyimeng", "createdAt": "2020-05-09T02:52:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExMjU1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "615541832bfafb167d9a0db65b598edb27aa65d5", "chunk": "diff --git a/client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/SearchDocumentationIT.java b/client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/SearchDocumentationIT.java\nindex f0f6b8b540d..995a50508fc 100644\n--- a/client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/SearchDocumentationIT.java\n+++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/SearchDocumentationIT.java\n\n@@ -716,7 +715,7 @@ public class SearchDocumentationIT extends ESRestHighLevelClientTestCase {\n             String scrollId = searchResponse.getScrollId();\n             SearchHit[] searchHits = searchResponse.getHits().getHits();\n \n-            while (CollectionUtils.isEmpty(searchHits) == false) { // <2>\n+            while (searchHits != null && searchHits.length > 0) { // <2>\n                 // <3>\n                 SearchScrollRequest scrollRequest = new SearchScrollRequest(scrollId); // <4>\n                 scrollRequest.scroll(scroll);\n"}}, {"oid": "615541832bfafb167d9a0db65b598edb27aa65d5", "url": "https://github.com/elastic/elasticsearch/commit/615541832bfafb167d9a0db65b598edb27aa65d5", "message": "revert changes in SearchDocumentationIT", "committedDate": "2020-05-09T02:48:27Z", "type": "commit"}]}