{"pr_number": 58588, "pr_title": "[ML] Add status and increased estimate to memory usage", "pr_createdAt": "2020-06-26T11:25:08Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/58588", "timeline": [{"oid": "92501581bd46fe96ee8f175e5c5dec3464ebf9ce", "url": "https://github.com/elastic/elasticsearch/commit/92501581bd46fe96ee8f175e5c5dec3464ebf9ce", "message": "[ML] Add status and increased estimate to memory usage\n\nAdds parsing of `status` and `increased_memory_estimate_bytes`\nto data frame analytics `memory_usage`. When the training surpasses\nthe model memory limit, the status will be set to `hard_limit` and\n`increased_memory_estimate_bytes` can be used to update the job's\nlimit in order to restart the job.", "committedDate": "2020-06-26T11:21:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjEzMTkzMQ==", "url": "https://github.com/elastic/elasticsearch/pull/58588#discussion_r446131931", "bodyText": "Could you make the code more consistent by either:\n\ninlining this method again\n\nor\n\nmaking other result types (e.g.: OutlierDetectionStats) also have similar private methods\n\n?", "author": "przemekwitek", "createdAt": "2020-06-26T11:39:54Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/process/AnalyticsResultProcessor.java", "diffHunk": "@@ -273,4 +272,9 @@ private void setAndReportFailure(Exception e) {\n         failure = \"error processing results; \" + e.getMessage();\n         auditor.error(analytics.getId(), \"Error processing results; \" + e.getMessage());\n     }\n+\n+    private void processMemoryUsage(MemoryUsage memoryUsage) {", "originalCommit": "92501581bd46fe96ee8f175e5c5dec3464ebf9ce", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE1MDQyMA==", "url": "https://github.com/elastic/elasticsearch/pull/58588#discussion_r446150420", "bodyText": "Right, I extracted this so that I also add the audit message but then left it for a follow up PR. I don't think it's worth extracting methods when it's a single liner but it makes sense to do so when there are more lines. Would it be fine to do this in the follow up PR I'll do anyway? Just so we don't lose CI cycles on this one.", "author": "dimitris-athanasiou", "createdAt": "2020-06-26T12:22:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjEzMTkzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE1NTc4Mw==", "url": "https://github.com/elastic/elasticsearch/pull/58588#discussion_r446155783", "bodyText": "SGTM", "author": "przemekwitek", "createdAt": "2020-06-26T12:34:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjEzMTkzMQ=="}], "type": "inlineReview", "revised_code": null}]}