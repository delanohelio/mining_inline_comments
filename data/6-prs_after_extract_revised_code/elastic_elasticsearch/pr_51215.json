{"pr_number": 51215, "pr_title": "Fix ingest timezone logic", "pr_createdAt": "2020-01-20T10:28:27Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/51215", "timeline": [{"oid": "f837b5f971d73bcbb1a19afb326c330b6e83abe0", "url": "https://github.com/elastic/elasticsearch/commit/f837b5f971d73bcbb1a19afb326c330b6e83abe0", "message": "ingest without and with zone", "committedDate": "2020-01-18T15:20:40Z", "type": "commit"}, {"oid": "fafb4bbf2876ecdfe02094b32a4c6b99043a5f65", "url": "https://github.com/elastic/elasticsearch/commit/fafb4bbf2876ecdfe02094b32a4c6b99043a5f65", "message": "Merge branch 'master' into fix/ingest_override_zone", "committedDate": "2020-01-20T10:56:44Z", "type": "commit"}, {"oid": "7cc5c25fbf5ae5a2e11c87fd4565a7a58656177f", "url": "https://github.com/elastic/elasticsearch/commit/7cc5c25fbf5ae5a2e11c87fd4565a7a58656177f", "message": "test fix", "committedDate": "2020-01-20T11:39:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODUwOTM2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/51215#discussion_r368509363", "bodyText": "This line appears to be identical to the preceding line? Am I missing something?", "author": "pugnascotia", "createdAt": "2020-01-20T11:54:46Z", "path": "modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateFormatTests.java", "diffHunk": "@@ -93,6 +93,15 @@ public void testParseISO8601() {\n                 equalTo(\"2001-01-01T08:00Z\"));\n     }\n \n+    public void testParseWhenZoneNotPresentInText() {\n+        assertThat(DateFormat.Iso8601.getFunction(null, ZoneOffset.of(\"+0100\"), null).apply(\"2001-01-01T00:00:00\").toInstant().toEpochMilli(),\n+            equalTo(978303600000L));\n+        assertThat(DateFormat.Iso8601.getFunction(null, ZoneOffset.of(\"+0100\"), null).apply(\"2001-01-01T00:00:00\").toString(),\n+            equalTo(\"2001-01-01T00:00+01:00\"));\n+        assertThat(DateFormat.Iso8601.getFunction(null, ZoneOffset.of(\"+0100\"), null).apply(\"2001-01-01T00:00:00\").toString(),", "originalCommit": "7cc5c25fbf5ae5a2e11c87fd4565a7a58656177f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU5MjM2Ng==", "url": "https://github.com/elastic/elasticsearch/pull/51215#discussion_r368592366", "bodyText": "that's right. I copied/modified the test above and the same duplication was there. I cleaned this up now", "author": "pgomulka", "createdAt": "2020-01-20T15:02:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODUwOTM2Mw=="}], "type": "inlineReview", "revised_code": {"commit": "b81af20101ea6335f755a1d24401e9574c1bdc07", "chunk": "diff --git a/modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateFormatTests.java b/modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateFormatTests.java\nindex 9aa7e2e2690..faf441d30fd 100644\n--- a/modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateFormatTests.java\n+++ b/modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateFormatTests.java\n\n@@ -85,8 +85,8 @@ public class DateFormatTests extends ESTestCase {\n     }\n \n     public void testParseISO8601() {\n-        assertThat(DateFormat.Iso8601.getFunction(null, ZoneOffset.UTC, null).apply(\"2001-01-01T00:00:00-0800\").toInstant().toEpochMilli(),\n-                equalTo(978336000000L));\n+        assertThat(DateFormat.Iso8601.getFunction(null, ZoneOffset.UTC, null).apply(\"2001-01-01T00:00:00-0800\")\n+                                     .toInstant().toEpochMilli(), equalTo(978336000000L));\n         assertThat(DateFormat.Iso8601.getFunction(null, ZoneOffset.UTC, null).apply(\"2001-01-01T00:00:00-0800\").toString(),\n                 equalTo(\"2001-01-01T08:00Z\"));\n         assertThat(DateFormat.Iso8601.getFunction(null, ZoneOffset.UTC, null).apply(\"2001-01-01T00:00:00-0800\").toString(),\n"}}, {"oid": "b81af20101ea6335f755a1d24401e9574c1bdc07", "url": "https://github.com/elastic/elasticsearch/commit/b81af20101ea6335f755a1d24401e9574c1bdc07", "message": "checkstyle", "committedDate": "2020-01-20T13:09:07Z", "type": "commit"}, {"oid": "df69cfc98cf4d661de8d61701d47ebec3709b9f7", "url": "https://github.com/elastic/elasticsearch/commit/df69cfc98cf4d661de8d61701d47ebec3709b9f7", "message": "remove dup lines", "committedDate": "2020-01-20T13:10:38Z", "type": "commit"}, {"oid": "87eddd1f693ce67bba33bc4e44d197e5c4f2e662", "url": "https://github.com/elastic/elasticsearch/commit/87eddd1f693ce67bba33bc4e44d197e5c4f2e662", "message": "yml test", "committedDate": "2020-01-20T13:38:30Z", "type": "commit"}, {"oid": "99d34993d2b35a824b2eba4751e66eddba5e9803", "url": "https://github.com/elastic/elasticsearch/commit/99d34993d2b35a824b2eba4751e66eddba5e9803", "message": "fix test and add comments", "committedDate": "2020-01-20T15:00:12Z", "type": "commit"}, {"oid": "8a52d42ef8c6459561d14fb584d54be149c82ae7", "url": "https://github.com/elastic/elasticsearch/commit/8a52d42ef8c6459561d14fb584d54be149c82ae7", "message": "remove formatting", "committedDate": "2020-01-20T15:03:26Z", "type": "commit"}, {"oid": "850898761dc9239cbbb334d017e6ec0cf61a3f7f", "url": "https://github.com/elastic/elasticsearch/commit/850898761dc9239cbbb334d017e6ec0cf61a3f7f", "message": "revert back two methods", "committedDate": "2020-01-20T15:04:22Z", "type": "commit"}]}