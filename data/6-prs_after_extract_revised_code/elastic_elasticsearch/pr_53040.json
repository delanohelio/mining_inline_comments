{"pr_number": 53040, "pr_title": "Wire-up geo_centroid agg to ValuesSourceRegistry", "pr_createdAt": "2020-03-02T23:46:09Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/53040", "timeline": [{"oid": "743cca89442ca93bcf4a7b31a8b3181485923d73", "url": "https://github.com/elastic/elasticsearch/commit/743cca89442ca93bcf4a7b31a8b3181485923d73", "message": "Wire-up geo_centroid agg to ValuesSourceRegistry\n\nThis commit updates the geo_centroid aggregation to depend\non registering itself in the ValuesSourceRegistry.\n\nrelates to the values-source refactoring meta issue #42949.", "committedDate": "2020-03-02T23:44:26Z", "type": "commit"}, {"oid": "15086051a8655dbd481cff3b420b0ead6ecf54df", "url": "https://github.com/elastic/elasticsearch/commit/15086051a8655dbd481cff3b420b0ead6ecf54df", "message": "Merge remote-tracking branch 'elastic/feature/extensible-values-source' into evs-geocentroid", "committedDate": "2020-03-03T18:55:05Z", "type": "commit"}, {"oid": "21c9debcf89c4241a6d5f8cf13a9efcadc1b2537", "url": "https://github.com/elastic/elasticsearch/commit/21c9debcf89c4241a6d5f8cf13a9efcadc1b2537", "message": "update supplier to use generic ValuesSource", "committedDate": "2020-03-03T18:56:31Z", "type": "commit"}, {"oid": "54e92c8d9a741b94c9ef202028c6903f031255f9", "url": "https://github.com/elastic/elasticsearch/commit/54e92c8d9a741b94c9ef202028c6903f031255f9", "message": "change defaultValueSourceType to GEOPOINT", "committedDate": "2020-03-05T23:57:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE3ODQ3OA==", "url": "https://github.com/elastic/elasticsearch/pull/53040#discussion_r389178478", "bodyText": "I still don't understand why this was passing with BYTES, but it's probably okay.   GeoPoint is the correct default.", "author": "not-napoleon", "createdAt": "2020-03-06T22:39:45Z", "path": "server/src/main/java/org/elasticsearch/search/aggregations/metrics/GeoCentroidAggregationBuilder.java", "diffHunk": "@@ -62,8 +67,7 @@ protected GeoCentroidAggregationBuilder(GeoCentroidAggregationBuilder clone, Bui\n \n     @Override\n     protected ValuesSourceType defaultValueSourceType() {\n-        // TODO: This should probably not be BYTES, but we're not failing tests with BYTES, so needs more tests?\n-        return CoreValuesSourceType.BYTES;\n+        return CoreValuesSourceType.GEOPOINT;", "originalCommit": "54e92c8d9a741b94c9ef202028c6903f031255f9", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}