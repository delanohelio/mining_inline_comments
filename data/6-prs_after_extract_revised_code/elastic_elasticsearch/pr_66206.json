{"pr_number": 66206, "pr_title": "Support canceling cross-clusters search requests", "pr_createdAt": "2020-12-11T17:26:02Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/66206", "timeline": [{"oid": "d4df4dac1359e73fec37c5f6f5af894d047f432f", "url": "https://github.com/elastic/elasticsearch/commit/d4df4dac1359e73fec37c5f6f5af894d047f432f", "message": "Support cancelling cross-clusters search requests", "committedDate": "2020-12-11T18:49:51Z", "type": "commit"}, {"oid": "d4df4dac1359e73fec37c5f6f5af894d047f432f", "url": "https://github.com/elastic/elasticsearch/commit/d4df4dac1359e73fec37c5f6f5af894d047f432f", "message": "Support cancelling cross-clusters search requests", "committedDate": "2020-12-11T18:49:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU1MzkzNQ==", "url": "https://github.com/elastic/elasticsearch/pull/66206#discussion_r542553935", "bodyText": "parentTaskId ?", "author": "jimczi", "createdAt": "2020-12-14T17:09:00Z", "path": "server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java", "diffHunk": "@@ -159,6 +161,7 @@ public void testLocalClusterAlias() {\n     }\n \n     public void testAbsoluteStartMillis() {\n+        TaskId takeId = new TaskId(\"node\", randomNonNegativeLong());", "originalCommit": "d4df4dac1359e73fec37c5f6f5af894d047f432f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU2Njg2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/66206#discussion_r542566863", "bodyText": "Addressed in 646aeab", "author": "dnhatn", "createdAt": "2020-12-14T17:26:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU1MzkzNQ=="}], "type": "inlineReview", "revised_code": {"commit": "646aeab9ed596e00360112b72e628839aa98a47c", "chunk": "diff --git a/server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java b/server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java\nindex 58120a1c6e0..b5c67ab21b8 100644\n--- a/server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java\n+++ b/server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java\n\n@@ -161,7 +161,7 @@ public class TransportSearchIT extends ESIntegTestCase {\n     }\n \n     public void testAbsoluteStartMillis() {\n-        TaskId takeId = new TaskId(\"node\", randomNonNegativeLong());\n+        TaskId parentTaskId = new TaskId(\"node\", randomNonNegativeLong());\n         {\n             IndexRequest indexRequest = new IndexRequest(\"test-1970.01.01\");\n             indexRequest.id(\"1\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU1NDAzMQ==", "url": "https://github.com/elastic/elasticsearch/pull/66206#discussion_r542554031", "bodyText": "parentTaskId ?", "author": "jimczi", "createdAt": "2020-12-14T17:09:09Z", "path": "server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java", "diffHunk": "@@ -131,9 +132,10 @@ public void testLocalClusterAlias() {\n         indexRequest.setRefreshPolicy(WriteRequest.RefreshPolicy.WAIT_UNTIL);\n         IndexResponse indexResponse = client().index(indexRequest).actionGet();\n         assertEquals(RestStatus.CREATED, indexResponse.status());\n+        TaskId taskId = new TaskId(\"node\", randomNonNegativeLong());", "originalCommit": "d4df4dac1359e73fec37c5f6f5af894d047f432f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU2Njk0OA==", "url": "https://github.com/elastic/elasticsearch/pull/66206#discussion_r542566948", "bodyText": "Addressed in 646aeab", "author": "dnhatn", "createdAt": "2020-12-14T17:26:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU1NDAzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "646aeab9ed596e00360112b72e628839aa98a47c", "chunk": "diff --git a/server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java b/server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java\nindex 58120a1c6e0..b5c67ab21b8 100644\n--- a/server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java\n+++ b/server/src/internalClusterTest/java/org/elasticsearch/action/search/TransportSearchIT.java\n\n@@ -132,10 +132,10 @@ public class TransportSearchIT extends ESIntegTestCase {\n         indexRequest.setRefreshPolicy(WriteRequest.RefreshPolicy.WAIT_UNTIL);\n         IndexResponse indexResponse = client().index(indexRequest).actionGet();\n         assertEquals(RestStatus.CREATED, indexResponse.status());\n-        TaskId taskId = new TaskId(\"node\", randomNonNegativeLong());\n+        TaskId parentTaskId = new TaskId(\"node\", randomNonNegativeLong());\n \n         {\n-            SearchRequest searchRequest = SearchRequest.subSearchRequest(taskId, new SearchRequest(), Strings.EMPTY_ARRAY,\n+            SearchRequest searchRequest = SearchRequest.subSearchRequest(parentTaskId, new SearchRequest(), Strings.EMPTY_ARRAY,\n                 \"local\", nowInMillis, randomBoolean());\n             SearchResponse searchResponse = client().search(searchRequest).actionGet();\n             assertEquals(1, searchResponse.getHits().getTotalHits().value);\n"}}, {"oid": "9eea5fd96adce80ab8de4aee6e06b79560c07d33", "url": "https://github.com/elastic/elasticsearch/commit/9eea5fd96adce80ab8de4aee6e06b79560c07d33", "message": "Merge branch 'master' into cancel-css", "committedDate": "2020-12-14T17:24:18Z", "type": "commit"}, {"oid": "646aeab9ed596e00360112b72e628839aa98a47c", "url": "https://github.com/elastic/elasticsearch/commit/646aeab9ed596e00360112b72e628839aa98a47c", "message": "jim's comments", "committedDate": "2020-12-14T17:25:00Z", "type": "commit"}]}