{"pr_number": 51586, "pr_title": "Use exclusions list instead of fake system indices", "pr_createdAt": "2020-01-29T02:33:33Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/51586", "timeline": [{"oid": "3fb429956177578d694990fc6e572151490fe02c", "url": "https://github.com/elastic/elasticsearch/commit/3fb429956177578d694990fc6e572151490fe02c", "message": "Use exclusions list instead of fake system indices\n\nThis commit switches the strategy for managing dot-prefixed indices that\nshould be hidden indices from using \"fake\" system indices to an explicit\nexclusions list that must be updated when those indices are converted to\nhidden indices.", "committedDate": "2020-01-28T22:09:45Z", "type": "commit"}, {"oid": "181b5b1ceb3d38a86e430e15bc6d9cf88a9d0a97", "url": "https://github.com/elastic/elasticsearch/commit/181b5b1ceb3d38a86e430e15bc6d9cf88a9d0a97", "message": "Merge branch 'master' into sys-ind/excl-list", "committedDate": "2020-01-29T02:08:40Z", "type": "commit"}, {"oid": "92d71b6074d1d45ae6fcd5180040b4cd3be43855", "url": "https://github.com/elastic/elasticsearch/commit/92d71b6074d1d45ae6fcd5180040b4cd3be43855", "message": "Add unit test", "committedDate": "2020-01-29T02:33:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE2MjUxNg==", "url": "https://github.com/elastic/elasticsearch/pull/51586#discussion_r372162516", "bodyText": "Not sure this is the best place for this, but it's easy to find and easy to move if we come up with a better location.", "author": "gwbrown", "createdAt": "2020-01-29T02:34:04Z", "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java", "diffHunk": "@@ -111,6 +114,19 @@\n \n     public static final int MAX_INDEX_NAME_BYTES = 255;\n \n+    /**\n+     * These index patterns will be converted to hidden indices, at which point they should be removed from this list.\n+     */\n+    private static final CharacterRunAutomaton DOT_INDICES_EXCLUSIONS = new CharacterRunAutomaton(Regex.simpleMatchToAutomaton(\n+        \".slm-history-*\",\n+        \".watch-history-*\",\n+        \".ml-anomalies-*\",\n+        \".ml-notifications-*\",\n+        \".ml-annotations*\",\n+        \".data-frame-notifications-*\",\n+        \".transform-notifications-*\"\n+    ));", "originalCommit": "92d71b6074d1d45ae6fcd5180040b4cd3be43855", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}