{"pr_number": 53279, "pr_title": "Configure SP defaults from YAML settings", "pr_createdAt": "2020-03-09T13:28:10Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/53279", "timeline": [{"oid": "61c684a8d88523b2f6cd52d6f42e7ef2c875a51d", "url": "https://github.com/elastic/elasticsearch/commit/61c684a8d88523b2f6cd52d6f42e7ef2c875a51d", "message": "Configure SP defaults from YAML settings\n\nThis change adds support for reading the SP defaults from the\nelasticsearch Settings", "committedDate": "2020-03-09T13:22:26Z", "type": "commit"}, {"oid": "9a507b71a2d495f7040f0c093f2d2114e41ccbd0", "url": "https://github.com/elastic/elasticsearch/commit/9a507b71a2d495f7040f0c093f2d2114e41ccbd0", "message": "Merge branch 'feature-internal-idp' into idp/idp-defaults", "committedDate": "2020-03-10T00:35:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU5MTI1MA==", "url": "https://github.com/elastic/elasticsearch/pull/53279#discussion_r390591250", "bodyText": "add under xpack.idp.defaults namespace too ?", "author": "jkakavas", "createdAt": "2020-03-10T20:28:42Z", "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+package org.elasticsearch.xpack.idp.saml.sp;\n+\n+import org.elasticsearch.common.settings.Setting;\n+import org.elasticsearch.common.settings.Settings;\n+import org.elasticsearch.common.unit.TimeValue;\n+import org.joda.time.Duration;\n+import org.joda.time.ReadableDuration;\n+import org.opensaml.saml.saml2.core.NameID;\n+\n+/**\n+ * Defines default values for a service provider if they are not configured in {@link SamlServiceProviderDocument}\n+ */\n+public final class ServiceProviderDefaults {\n+\n+    public static final Setting<String> APPLICATION_NAME_SETTING\n+        = Setting.simpleString(\"xpack.idp.privileges.application\", Setting.Property.NodeScope);", "originalCommit": "9a507b71a2d495f7040f0c093f2d2114e41ccbd0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDkxODM2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/53279#discussion_r390918363", "bodyText": "I intentionally didn't, because of #53320\nThe application here will become the one and only application not the \"default\", so it seemed strange to put it under defaults.\nThat makes it a little weird to be on this class, but ...", "author": "tvernum", "createdAt": "2020-03-11T11:51:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU5MTI1MA=="}], "type": "inlineReview", "revised_code": {"commit": "453654d34f4ab6cdeec0e8346ca74a40bb90dde3", "chunk": "diff --git a/x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java b/x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java\nindex cc70d1fcf43..e691207d67b 100644\n--- a/x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java\n+++ b/x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java\n\n@@ -13,6 +13,8 @@ import org.joda.time.Duration;\n import org.joda.time.ReadableDuration;\n import org.opensaml.saml.saml2.core.NameID;\n \n+import java.util.List;\n+\n /**\n  * Defines default values for a service provider if they are not configured in {@link SamlServiceProviderDocument}\n  */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU5MTMxMw==", "url": "https://github.com/elastic/elasticsearch/pull/53279#discussion_r390591313", "bodyText": "add under xpack.idp.defaults namespace too ?", "author": "jkakavas", "createdAt": "2020-03-10T20:28:49Z", "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+package org.elasticsearch.xpack.idp.saml.sp;\n+\n+import org.elasticsearch.common.settings.Setting;\n+import org.elasticsearch.common.settings.Settings;\n+import org.elasticsearch.common.unit.TimeValue;\n+import org.joda.time.Duration;\n+import org.joda.time.ReadableDuration;\n+import org.opensaml.saml.saml2.core.NameID;\n+\n+/**\n+ * Defines default values for a service provider if they are not configured in {@link SamlServiceProviderDocument}\n+ */\n+public final class ServiceProviderDefaults {\n+\n+    public static final Setting<String> APPLICATION_NAME_SETTING\n+        = Setting.simpleString(\"xpack.idp.privileges.application\", Setting.Property.NodeScope);\n+    public static final Setting<String> LOGIN_ACTION_SETTING\n+        = Setting.simpleString(\"xpack.idp.privileges.login\", Setting.Property.NodeScope);", "originalCommit": "9a507b71a2d495f7040f0c093f2d2114e41ccbd0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDkxODQ1NQ==", "url": "https://github.com/elastic/elasticsearch/pull/53279#discussion_r390918455", "bodyText": "Going away in #53320 anyway", "author": "tvernum", "createdAt": "2020-03-11T11:51:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU5MTMxMw=="}], "type": "inlineReview", "revised_code": {"commit": "453654d34f4ab6cdeec0e8346ca74a40bb90dde3", "chunk": "diff --git a/x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java b/x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java\nindex cc70d1fcf43..e691207d67b 100644\n--- a/x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java\n+++ b/x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/sp/ServiceProviderDefaults.java\n\n@@ -13,6 +13,8 @@ import org.joda.time.Duration;\n import org.joda.time.ReadableDuration;\n import org.opensaml.saml.saml2.core.NameID;\n \n+import java.util.List;\n+\n /**\n  * Defines default values for a service provider if they are not configured in {@link SamlServiceProviderDocument}\n  */\n"}}, {"oid": "453654d34f4ab6cdeec0e8346ca74a40bb90dde3", "url": "https://github.com/elastic/elasticsearch/commit/453654d34f4ab6cdeec0e8346ca74a40bb90dde3", "message": "register settings", "committedDate": "2020-03-11T11:52:16Z", "type": "commit"}, {"oid": "18029b9631ac134d4c57e076bac0a12b8bafa9eb", "url": "https://github.com/elastic/elasticsearch/commit/18029b9631ac134d4c57e076bac0a12b8bafa9eb", "message": "Merge branch 'feature-internal-idp' into idp/idp-defaults", "committedDate": "2020-03-11T11:52:38Z", "type": "commit"}, {"oid": "361fb8b373ad70de1ee203fc2cd827f3a592cdbf", "url": "https://github.com/elastic/elasticsearch/commit/361fb8b373ad70de1ee203fc2cd827f3a592cdbf", "message": "Merge branch 'feature-internal-idp' into idp/idp-defaults", "committedDate": "2020-03-11T12:31:21Z", "type": "commit"}, {"oid": "75f208a6459c2281ad2614044df88c75dbf92714", "url": "https://github.com/elastic/elasticsearch/commit/75f208a6459c2281ad2614044df88c75dbf92714", "message": "Fix broken merge (changes missed from previous commit)", "committedDate": "2020-03-12T04:07:06Z", "type": "commit"}, {"oid": "090797ac8993550384fd3fda3ac2782bcdf28b7d", "url": "https://github.com/elastic/elasticsearch/commit/090797ac8993550384fd3fda3ac2782bcdf28b7d", "message": "Merge branch 'feature-internal-idp' into idp/idp-defaults", "committedDate": "2020-03-12T04:13:11Z", "type": "commit"}, {"oid": "4ff963bdc1f90bb7fb4eb9388c69e43f247b114f", "url": "https://github.com/elastic/elasticsearch/commit/4ff963bdc1f90bb7fb4eb9388c69e43f247b114f", "message": "Merge branch 'feature-internal-idp' into idp/idp-defaults", "committedDate": "2020-03-12T04:53:25Z", "type": "commit"}]}