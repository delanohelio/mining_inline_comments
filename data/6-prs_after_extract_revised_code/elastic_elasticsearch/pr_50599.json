{"pr_number": 50599, "pr_title": "[ML] Unmute BWC tests and fix version after backport of #50553", "pr_createdAt": "2020-01-03T12:31:14Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/50599", "timeline": [{"oid": "75a282524cf2dffdc2473e98aa2ae0bfb2362fc1", "url": "https://github.com/elastic/elasticsearch/commit/75a282524cf2dffdc2473e98aa2ae0bfb2362fc1", "message": "[ML] Unmute BWC tests and fix version after backport of #50553", "committedDate": "2020-01-03T12:01:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgwNjkwNA==", "url": "https://github.com/elastic/elasticsearch/pull/50599#discussion_r362806904", "bodyText": "Since #50589 is merged, shouldn't the version be V_7_6_0?", "author": "benwtrent", "createdAt": "2020-01-03T13:25:02Z", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/DeleteDataFrameAnalyticsAction.java", "diffHunk": "@@ -40,7 +40,7 @@ private DeleteDataFrameAnalyticsAction() {\n         public Request(StreamInput in) throws IOException {\n             super(in);\n             id = in.readString();\n-            if (in.getVersion().onOrAfter(Version.CURRENT)) {\n+            if (in.getVersion().onOrAfter(Version.V_8_0_0)) {", "originalCommit": "75a282524cf2dffdc2473e98aa2ae0bfb2362fc1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgwNzE4OQ==", "url": "https://github.com/elastic/elasticsearch/pull/50599#discussion_r362807189", "bodyText": "since BWC has passed with the version being wrong, I am guessing we don't have a BWC test that deletes analytics jobs do we?", "author": "benwtrent", "createdAt": "2020-01-03T13:25:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgwNjkwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgwODM2MQ==", "url": "https://github.com/elastic/elasticsearch/pull/50599#discussion_r362808361", "bodyText": "Ah, \ud83e\udd26\u200d\u2642\nIndeed. I'll add one that creates and deletes a job in the mixed cluster.", "author": "dimitris-athanasiou", "createdAt": "2020-01-03T13:29:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgwNjkwNA=="}], "type": "inlineReview", "revised_code": {"commit": "f7d3a61f39528d385b4a9ec05deca1c63ce461ad", "chunk": "diff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/DeleteDataFrameAnalyticsAction.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/DeleteDataFrameAnalyticsAction.java\nindex 5908cd27e09..74a473ec683 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/DeleteDataFrameAnalyticsAction.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/DeleteDataFrameAnalyticsAction.java\n\n@@ -40,7 +40,7 @@ public class DeleteDataFrameAnalyticsAction extends ActionType<AcknowledgedRespo\n         public Request(StreamInput in) throws IOException {\n             super(in);\n             id = in.readString();\n-            if (in.getVersion().onOrAfter(Version.V_8_0_0)) {\n+            if (in.getVersion().onOrAfter(Version.V_7_6_0)) {\n                 force = in.readBoolean();\n             } else {\n                 force = false;\n"}}, {"oid": "f7d3a61f39528d385b4a9ec05deca1c63ce461ad", "url": "https://github.com/elastic/elasticsearch/commit/f7d3a61f39528d385b4a9ec05deca1c63ce461ad", "message": "Correct version and add bwc test for deletes", "committedDate": "2020-01-03T13:59:28Z", "type": "commit"}]}