{"pr_number": 66723, "pr_title": "Notify users to restart Elasticsearch after plugin installation", "pr_createdAt": "2020-12-22T03:47:20Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/66723", "timeline": [{"oid": "9a1765cf4cd0757927048773c3066b22c37c831f", "url": "https://github.com/elastic/elasticsearch/commit/9a1765cf4cd0757927048773c3066b22c37c831f", "message": "Add message to notify users to restart Elasticsearch after plugin installation", "committedDate": "2020-12-22T03:24:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjIxOTI5MQ==", "url": "https://github.com/elastic/elasticsearch/pull/66723#discussion_r552219291", "bodyText": "Putting the notification here, inside the loop, will print a new line after every plugin that is installed, and double the output of the tool. In my opinion, we only need to issue the restart notification once, so it would be better to move this below the catch block to line 267, removing the plugin name from the output.", "author": "williamrandolph", "createdAt": "2021-01-05T21:48:12Z", "path": "distribution/tools/plugin-cli/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java", "diffHunk": "@@ -239,6 +239,7 @@ void execute(Terminal terminal, List<String> pluginIds, boolean isBatch, Environ\n                 deleteOnFailure.add(extractedZip);\n                 final PluginInfo pluginInfo = installPlugin(terminal, isBatch, extractedZip, env, deleteOnFailure);\n                 terminal.println(\"-> Installed \" + pluginInfo.getName());\n+                terminal.println(\"-> Please restart Elasticsearch to activate \" + pluginInfo.getName());", "originalCommit": "9a1765cf4cd0757927048773c3066b22c37c831f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzg3NDQ0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/66723#discussion_r553874449", "bodyText": "Thanks, that is indeed a good suggestion!", "author": "qlchan24", "createdAt": "2021-01-08T10:50:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjIxOTI5MQ=="}], "type": "inlineReview", "revised_code": {"commit": "0a3b97f919ece47240960a6311e9f50f3796374f", "chunk": "diff --git a/distribution/tools/plugin-cli/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java b/distribution/tools/plugin-cli/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java\nindex 3b547fbc6ab..92ad3f3653a 100644\n--- a/distribution/tools/plugin-cli/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java\n+++ b/distribution/tools/plugin-cli/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java\n\n@@ -239,7 +239,6 @@ class InstallPluginCommand extends EnvironmentAwareCommand {\n                 deleteOnFailure.add(extractedZip);\n                 final PluginInfo pluginInfo = installPlugin(terminal, isBatch, extractedZip, env, deleteOnFailure);\n                 terminal.println(\"-> Installed \" + pluginInfo.getName());\n-                terminal.println(\"-> Please restart Elasticsearch to activate \" + pluginInfo.getName());\n                 // swap the entry by plugin id for one with the installed plugin name, it gives a cleaner error message for URL installs\n                 deleteOnFailures.remove(pluginId);\n                 deleteOnFailures.put(pluginInfo.getName(), deleteOnFailure);\n"}}, {"oid": "999366d084edddea587a01e67bae37cc3bb3215e", "url": "https://github.com/elastic/elasticsearch/commit/999366d084edddea587a01e67bae37cc3bb3215e", "message": "Add message to notify users to restart Elasticsearch after plugin installation", "committedDate": "2021-01-08T10:59:09Z", "type": "commit"}, {"oid": "0a3b97f919ece47240960a6311e9f50f3796374f", "url": "https://github.com/elastic/elasticsearch/commit/0a3b97f919ece47240960a6311e9f50f3796374f", "message": "Change location of restart message", "committedDate": "2021-01-08T10:59:09Z", "type": "commit"}, {"oid": "a9956a38b7b51edd83d4f17d5409ed462f6c7f6a", "url": "https://github.com/elastic/elasticsearch/commit/a9956a38b7b51edd83d4f17d5409ed462f6c7f6a", "message": "Merge remote-tracking branch 'origin/install-plugin-restart-message' into install-plugin-restart-message", "committedDate": "2021-01-08T11:01:13Z", "type": "commit"}, {"oid": "6649ff8868387f685aaca4d490662266ba60aaa7", "url": "https://github.com/elastic/elasticsearch/commit/6649ff8868387f685aaca4d490662266ba60aaa7", "message": "Remove original message", "committedDate": "2021-01-08T11:04:54Z", "type": "commit"}, {"oid": "d891187606e0e4f3c1b8be38dfeda94b1f9bc359", "url": "https://github.com/elastic/elasticsearch/commit/d891187606e0e4f3c1b8be38dfeda94b1f9bc359", "message": "Merge branch 'master' into install-plugin-restart-message", "committedDate": "2021-01-11T19:45:14Z", "type": "commit"}]}