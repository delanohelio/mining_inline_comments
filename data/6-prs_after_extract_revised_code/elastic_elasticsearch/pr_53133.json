{"pr_number": 53133, "pr_title": "script_score query errors on negative scores", "pr_createdAt": "2020-03-04T19:22:17Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/53133", "timeline": [{"oid": "557f5be930edf1aa7807de2d43798cc14a0343cf", "url": "https://github.com/elastic/elasticsearch/commit/557f5be930edf1aa7807de2d43798cc14a0343cf", "message": "script_score query errors on negative scores\n\n7.5 and 7.6 had a regression that allowed for\nscript_score queries to have negative scores.\nWe have corrected this regression in #52478.\nThis is an addition to #52478 that adds\na test and release notes.", "committedDate": "2020-03-04T19:19:26Z", "type": "commit"}, {"oid": "ed6e118ddf249f7a92dc5b3820033d269cc6cf65", "url": "https://github.com/elastic/elasticsearch/commit/ed6e118ddf249f7a92dc5b3820033d269cc6cf65", "message": "Address feedback\n\nRemove yml test, add unit test", "committedDate": "2020-03-05T16:31:57Z", "type": "commit"}, {"oid": "ed6e118ddf249f7a92dc5b3820033d269cc6cf65", "url": "https://github.com/elastic/elasticsearch/commit/ed6e118ddf249f7a92dc5b3820033d269cc6cf65", "message": "Address feedback\n\nRemove yml test, add unit test", "committedDate": "2020-03-05T16:31:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQyNjg4Mw==", "url": "https://github.com/elastic/elasticsearch/pull/53133#discussion_r388426883", "bodyText": "For me this set of unit tests is quite straightforward + easy to understand. I think yml tests are slower to debug and are most helpful for testing the end-to-end integration. We recently added a set of testing guidelines that I think are really helpful: https://github.com/elastic/elasticsearch/blob/master/TESTING.asciidoc#what-kind-of-tests-should-i-write", "author": "jtibshirani", "createdAt": "2020-03-05T16:54:56Z", "path": "server/src/test/java/org/elasticsearch/search/query/ScriptScoreQueryTests.java", "diffHunk": "@@ -131,6 +131,14 @@ public void testExplainDefaultNoScore() throws IOException {\n         assertThat(explanation.getValue(), equalTo(2.0f));\n     }\n \n+    public void testScriptScoreErrorOnNegativeScore() {", "originalCommit": "ed6e118ddf249f7a92dc5b3820033d269cc6cf65", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUwNzAxMw==", "url": "https://github.com/elastic/elasticsearch/pull/53133#discussion_r388507013", "bodyText": "@jtibshirani Thanks a lot, I missed these guidelines, will study them", "author": "mayya-sharipova", "createdAt": "2020-03-05T19:17:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQyNjg4Mw=="}], "type": "inlineReview", "revised_code": null}]}