{"pr_number": 59424, "pr_title": "[ML] Improve error for non-included field with unsupported type", "pr_createdAt": "2020-07-13T14:16:53Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59424", "timeline": [{"oid": "3c52c043e8b0a52627f55bd43e777b0279ad59fe", "url": "https://github.com/elastic/elasticsearch/commit/3c52c043e8b0a52627f55bd43e777b0279ad59fe", "message": "[ML] Improve error for non-included field with unsupported type\n\nWhen a field is not included yet its type is unsupported, we currently\nstate that the reason the field is excluded is that it is not in the\nincludes list. However, this implies the user could include it but\nif the user tried to do so, they would get a failure as they would\nbe including a field with unsupported type.\n\nThis commit improves this by stating the reason a not included field\nwith unsupported type is excluded is because of its type.", "committedDate": "2020-07-13T14:12:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDM5ODYwOQ==", "url": "https://github.com/elastic/elasticsearch/pull/59424#discussion_r454398609", "bodyText": "This is good. Allows users to see that even if they set the field to be included, it won't work.", "author": "benwtrent", "createdAt": "2020-07-14T14:29:03Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/extractor/ExtractedFieldsDetector.java", "diffHunk": "@@ -241,7 +241,11 @@ private void applyIncludesExcludes(Set<String> fields, Set<String> includes, Set\n                 }\n             } else {\n                 fieldsIterator.remove();\n-                addExcludedField(field, \"field not in includes list\", fieldSelection);\n+                if (hasCompatibleType(field)) {\n+                    addExcludedField(field, \"field not in includes list\", fieldSelection);\n+                } else {\n+                    addExcludedField(field, \"unsupported type; supported types are \" + getSupportedTypes(), fieldSelection);", "originalCommit": "3c52c043e8b0a52627f55bd43e777b0279ad59fe", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}