{"pr_number": 52343, "pr_title": "Add additional logging to SLM retention task", "pr_createdAt": "2020-02-13T22:23:37Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/52343", "timeline": [{"oid": "8df10f9c26e3747d8ec09221ac19a2fa5f684d44", "url": "https://github.com/elastic/elasticsearch/commit/8df10f9c26e3747d8ec09221ac19a2fa5f684d44", "message": "Add additional logging to SLM retention task\n\nThis commit adds more logging to the actions that the SLM retention task does. It will help in the\nevent that we need to diagnose any additional issues or problems while running retention.", "committedDate": "2020-02-13T22:22:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg2MzU4Mw==", "url": "https://github.com/elastic/elasticsearch/pull/52343#discussion_r380863583", "bodyText": "is this needed? the logger.error above will print a message already", "author": "andreidan", "createdAt": "2020-02-18T18:45:16Z", "path": "x-pack/plugin/ilm/src/main/java/org/elasticsearch/xpack/slm/SnapshotRetentionTask.java", "diffHunk": "@@ -109,6 +119,7 @@ public void triggered(SchedulerEngine.Event event) {\n                     slmStats.retentionFailed();\n                     updateStateWithStats(slmStats);\n                 } finally {\n+                    logger.info(\"SLM retention snapshot cleanup task completed with error\");", "originalCommit": "8df10f9c26e3747d8ec09221ac19a2fa5f684d44", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNzU2Mg==", "url": "https://github.com/elastic/elasticsearch/pull/52343#discussion_r380937562", "bodyText": "I wanted to have something that signaled right when the running.set(false) finished. In this case, the logger.error above could print, but then updateStateWithStats could hang or not complete and we would have no indication.", "author": "dakrone", "createdAt": "2020-02-18T21:12:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg2MzU4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE3ODQwMg==", "url": "https://github.com/elastic/elasticsearch/pull/52343#discussion_r381178402", "bodyText": "Gotcha, thanks Lee", "author": "andreidan", "createdAt": "2020-02-19T09:43:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg2MzU4Mw=="}], "type": "inlineReview", "revised_code": null}]}