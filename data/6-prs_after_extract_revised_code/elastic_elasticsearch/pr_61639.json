{"pr_number": 61639, "pr_title": "Make Docker test robust when removing a temp dir", "pr_createdAt": "2020-08-27T15:43:13Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/61639", "timeline": [{"oid": "19280c2b887833b08818586c3f289907f0df4e9d", "url": "https://github.com/elastic/elasticsearch/commit/19280c2b887833b08818586c3f289907f0df4e9d", "message": "Make Docker test robust when removing a temp dir\n\nCloses #61614. Closes #61553.\n\nIn a particular Docker test, ensure is shut down before removing the\ndata directory. Also add the force flag to `rm`.", "committedDate": "2020-08-27T15:41:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODcyODQ4Ng==", "url": "https://github.com/elastic/elasticsearch/pull/61639#discussion_r478728486", "bodyText": "so ensure -> so", "author": "rjernst", "createdAt": "2020-08-27T22:23:16Z", "path": "qa/os/src/test/java/org/elasticsearch/packaging/test/DockerTests.java", "diffHunk": "@@ -214,6 +214,10 @@ public void test071BindMountCustomPathWithDifferentUID() throws Exception {\n             assertThat(nodes.at(\"/_nodes/successful\").intValue(), equalTo(1));\n             assertThat(nodes.at(\"/_nodes/failed\").intValue(), equalTo(0));\n \n+            // Ensure container is stopped before we remove tempEsDataDir, so ensure nothing", "originalCommit": "19280c2b887833b08818586c3f289907f0df4e9d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "00dfa8e2e586e0b0571dee868f4683180bc6eee5", "chunk": "diff --git a/qa/os/src/test/java/org/elasticsearch/packaging/test/DockerTests.java b/qa/os/src/test/java/org/elasticsearch/packaging/test/DockerTests.java\nindex 0896026f514..670f15ae764 100644\n--- a/qa/os/src/test/java/org/elasticsearch/packaging/test/DockerTests.java\n+++ b/qa/os/src/test/java/org/elasticsearch/packaging/test/DockerTests.java\n\n@@ -214,7 +214,7 @@ public class DockerTests extends PackagingTestCase {\n             assertThat(nodes.at(\"/_nodes/successful\").intValue(), equalTo(1));\n             assertThat(nodes.at(\"/_nodes/failed\").intValue(), equalTo(0));\n \n-            // Ensure container is stopped before we remove tempEsDataDir, so ensure nothing\n+            // Ensure container is stopped before we remove tempEsDataDir, so nothing\n             // is using the directory.\n             removeContainer();\n \n"}}, {"oid": "00dfa8e2e586e0b0571dee868f4683180bc6eee5", "url": "https://github.com/elastic/elasticsearch/commit/00dfa8e2e586e0b0571dee868f4683180bc6eee5", "message": "Typo", "committedDate": "2020-08-31T13:18:26Z", "type": "commit"}, {"oid": "f7c0ba4351ce90533a319bc5d36b1ba7b00d7ab8", "url": "https://github.com/elastic/elasticsearch/commit/f7c0ba4351ce90533a319bc5d36b1ba7b00d7ab8", "message": "Merge branch 'master' into 61614-fix-docker-cleanup", "committedDate": "2020-09-01T10:21:36Z", "type": "commit"}]}