{"pr_number": 59021, "pr_title": "Check acknowledged responses in FsSearchableSnapshotsIT", "pr_createdAt": "2020-07-03T15:18:55Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59021", "timeline": [{"oid": "95070652c5e6e987ba1d6d550d19d9d50aeb3743", "url": "https://github.com/elastic/elasticsearch/commit/95070652c5e6e987ba1d6d550d19d9d50aeb3743", "message": "Check acknowledged responses in FsSearchableSnapshotsIT", "committedDate": "2020-07-03T15:10:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYzMzY4Nw==", "url": "https://github.com/elastic/elasticsearch/pull/59021#discussion_r449633687", "bodyText": "I think we should keep this, maybe rarely(), or else we'll never test any of the code paths for multi-chunk files.", "author": "DaveCTurner", "createdAt": "2020-07-03T15:25:45Z", "path": "x-pack/plugin/searchable-snapshots/qa/rest/src/test/java/org/elasticsearch/xpack/searchablesnapshots/rest/FsSearchableSnapshotsIT.java", "diffHunk": "@@ -19,14 +18,8 @@ protected String repositoryType() {\n \n     @Override\n     protected Settings repositorySettings() {\n-        final Settings.Builder settings = Settings.builder();\n-        settings.put(\"location\", System.getProperty(\"tests.path.repo\"));\n-        if (randomBoolean()) {\n-            settings.put(\"compress\", randomBoolean());\n-        }\n-        if (randomBoolean()) {\n-            settings.put(\"chunk_size\", randomIntBetween(100, 1000), ByteSizeUnit.BYTES);", "originalCommit": "95070652c5e6e987ba1d6d550d19d9d50aeb3743", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY0MTM1NQ==", "url": "https://github.com/elastic/elasticsearch/pull/59021#discussion_r449641355", "bodyText": "SearchableSnapshotsIntegTests uses a fs repository with a chunk_size setting:\n\n  \n    \n      elasticsearch/x-pack/plugin/searchable-snapshots/src/test/java/org/elasticsearch/xpack/searchablesnapshots/SearchableSnapshotsIntegTests.java\n    \n    \n         Line 84\n      in\n      9507065\n    \n    \n    \n    \n\n        \n          \n           .setSettings(Settings.builder().put(\"location\", repo).put(\"chunk_size\", randomIntBetween(100, 1000), ByteSizeUnit.BYTES)) \n        \n    \n  \n\n\nI think it's better to have it there and not in this QA test, what do you think?", "author": "tlrx", "createdAt": "2020-07-03T15:48:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYzMzY4Nw=="}], "type": "inlineReview", "revised_code": {"commit": "8f1062f67b0a90763a33604b6da2cc4569b1b466", "chunk": "diff --git a/x-pack/plugin/searchable-snapshots/qa/rest/src/test/java/org/elasticsearch/xpack/searchablesnapshots/rest/FsSearchableSnapshotsIT.java b/x-pack/plugin/searchable-snapshots/qa/rest/src/test/java/org/elasticsearch/xpack/searchablesnapshots/rest/FsSearchableSnapshotsIT.java\nindex 32d68619ef3..e65db96a400 100644\n--- a/x-pack/plugin/searchable-snapshots/qa/rest/src/test/java/org/elasticsearch/xpack/searchablesnapshots/rest/FsSearchableSnapshotsIT.java\n+++ b/x-pack/plugin/searchable-snapshots/qa/rest/src/test/java/org/elasticsearch/xpack/searchablesnapshots/rest/FsSearchableSnapshotsIT.java\n\n@@ -18,8 +18,6 @@ public class FsSearchableSnapshotsIT extends AbstractSearchableSnapshotsRestTest\n \n     @Override\n     protected Settings repositorySettings() {\n-        return Settings.builder()\n-            .put(\"location\", System.getProperty(\"tests.path.repo\"))\n-            .build();\n+        return Settings.builder().put(\"location\", System.getProperty(\"tests.path.repo\")).build();\n     }\n }\n"}}, {"oid": "8f1062f67b0a90763a33604b6da2cc4569b1b466", "url": "https://github.com/elastic/elasticsearch/commit/8f1062f67b0a90763a33604b6da2cc4569b1b466", "message": "spotless", "committedDate": "2020-07-03T15:52:02Z", "type": "commit"}]}