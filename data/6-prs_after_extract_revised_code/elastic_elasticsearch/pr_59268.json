{"pr_number": 59268, "pr_title": "Scripting: Unlimited compilation rate for ingest", "pr_createdAt": "2020-07-09T01:24:22Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59268", "timeline": [{"oid": "07b5f1770beeb5ec080004c735153ec403fd153f", "url": "https://github.com/elastic/elasticsearch/commit/07b5f1770beeb5ec080004c735153ec403fd153f", "message": "Scripting: Unlimited compilation rate for ingest\n\n* `ingest` and `processor_conditional` default to unlimited compilation rate\n\nRefs: #50152", "committedDate": "2020-07-09T01:22:45Z", "type": "commit"}, {"oid": "181e32d1f08fd7fdb51b474b8c6408d44ba7adb6", "url": "https://github.com/elastic/elasticsearch/commit/181e32d1f08fd7fdb51b474b8c6408d44ba7adb6", "message": "Add type param for IngestScript context", "committedDate": "2020-07-09T01:58:39Z", "type": "commit"}, {"oid": "d1eb9635abc2e5739b8c4518dc07977385b42a4a", "url": "https://github.com/elastic/elasticsearch/commit/d1eb9635abc2e5739b8c4518dc07977385b42a4a", "message": "asTuple for unlimited", "committedDate": "2020-07-09T02:23:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM5NzcxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/59268#discussion_r452397715", "bodyText": "Is Factory still necessary here?", "author": "stu-elastic", "createdAt": "2020-07-09T18:05:21Z", "path": "server/src/main/java/org/elasticsearch/script/IngestScript.java", "diffHunk": "@@ -33,8 +32,8 @@\n     public static final String[] PARAMETERS = { \"ctx\" };\n \n     /** The context used to compile {@link IngestScript} factories. */\n-    public static final ScriptContext<Factory> CONTEXT = new ScriptContext<>(\"ingest\", Factory.class,\n-        200, TimeValue.timeValueMillis(0), new Tuple<>(375, TimeValue.timeValueMinutes(5)));\n+    public static final ScriptContext<Factory> CONTEXT = new ScriptContext<Factory>(\"ingest\", Factory.class,", "originalCommit": "d1eb9635abc2e5739b8c4518dc07977385b42a4a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "855b6c5714e171498b9645cca0b2118ccbd4bae5", "chunk": "diff --git a/server/src/main/java/org/elasticsearch/script/IngestScript.java b/server/src/main/java/org/elasticsearch/script/IngestScript.java\nindex ca24292efcf..6af53e19614 100644\n--- a/server/src/main/java/org/elasticsearch/script/IngestScript.java\n+++ b/server/src/main/java/org/elasticsearch/script/IngestScript.java\n\n@@ -32,7 +32,7 @@ public abstract class IngestScript {\n     public static final String[] PARAMETERS = { \"ctx\" };\n \n     /** The context used to compile {@link IngestScript} factories. */\n-    public static final ScriptContext<Factory> CONTEXT = new ScriptContext<Factory>(\"ingest\", Factory.class,\n+    public static final ScriptContext<Factory> CONTEXT = new ScriptContext<>(\"ingest\", Factory.class,\n         200, TimeValue.timeValueMillis(0), ScriptCache.UNLIMITED_COMPILATION_RATE.asTuple());\n \n     /** The generic runtime parameters for the script. */\n"}}, {"oid": "855b6c5714e171498b9645cca0b2118ccbd4bae5", "url": "https://github.com/elastic/elasticsearch/commit/855b6c5714e171498b9645cca0b2118ccbd4bae5", "message": "Remove unnecessary Factory type parameter in IngestScript", "committedDate": "2020-07-09T19:51:13Z", "type": "commit"}]}