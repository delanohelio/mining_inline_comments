{"pr_number": 52875, "pr_title": "ValuesSource refactoring: Wire up string_stats aggregation", "pr_createdAt": "2020-02-27T10:00:42Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/52875", "timeline": [{"oid": "ed6443c5ad2b91e587410bcef26e81e282031ee9", "url": "https://github.com/elastic/elasticsearch/commit/ed6443c5ad2b91e587410bcef26e81e282031ee9", "message": "VS refactoring: Wire up string_stats aggregation", "committedDate": "2020-02-27T09:59:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2NDE0NA==", "url": "https://github.com/elastic/elasticsearch/pull/52875#discussion_r385164144", "bodyText": "Do we need to keep this?", "author": "not-napoleon", "createdAt": "2020-02-27T14:33:28Z", "path": "x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/stringstats/StringStatsAggregatorTests.java", "diffHunk": "@@ -259,4 +270,22 @@ public void testNestedAggregation() throws IOException {\n         directory.close();\n     }\n \n+\n+//    @Override\n+//    protected Collection<Class<? extends Plugin>> getPlugins() {\n+////        List<Class<? extends Plugin>> plugins = new ArrayList<>(super.getPlugins());\n+////        plugins.add(AggregateMetricMapperPlugin.class);\n+////        plugins.add(LocalStateCompositeXPackPlugin.class);\n+////        return plugins;\n+//        return null;\n+//    }", "originalCommit": "ed6443c5ad2b91e587410bcef26e81e282031ee9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTIxMDY4MA==", "url": "https://github.com/elastic/elasticsearch/pull/52875#discussion_r385210680", "bodyText": "Sorry, I missed cleaning this up. Fixed", "author": "csoulios", "createdAt": "2020-02-27T16:11:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2NDE0NA=="}], "type": "inlineReview", "revised_code": {"commit": "37ae62109ffda64f5c1c5eebc1eaf54e16f470a3", "chunk": "diff --git a/x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/stringstats/StringStatsAggregatorTests.java b/x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/stringstats/StringStatsAggregatorTests.java\nindex 265b091b5f0..290b487981b 100644\n--- a/x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/stringstats/StringStatsAggregatorTests.java\n+++ b/x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/stringstats/StringStatsAggregatorTests.java\n\n@@ -269,23 +264,4 @@ public class StringStatsAggregatorTests extends AggregatorTestCase {\n         indexReader.close();\n         directory.close();\n     }\n-\n-\n-//    @Override\n-//    protected Collection<Class<? extends Plugin>> getPlugins() {\n-////        List<Class<? extends Plugin>> plugins = new ArrayList<>(super.getPlugins());\n-////        plugins.add(AggregateMetricMapperPlugin.class);\n-////        plugins.add(LocalStateCompositeXPackPlugin.class);\n-////        return plugins;\n-//        return null;\n-//    }\n-\n-\n-    @Override\n-    protected NamedXContentRegistry xContentRegistry() {\n-        SearchModule searchModule = new SearchModule(Settings.EMPTY, Collections.singletonList(new AnalyticsPlugin()));\n-        return new NamedXContentRegistry(searchModule.getNamedXContents());\n-    }\n-\n-\n }\n"}}, {"oid": "37ae62109ffda64f5c1c5eebc1eaf54e16f470a3", "url": "https://github.com/elastic/elasticsearch/commit/37ae62109ffda64f5c1c5eebc1eaf54e16f470a3", "message": "Cleanup. Removed unused code.", "committedDate": "2020-02-27T14:53:06Z", "type": "commit"}]}