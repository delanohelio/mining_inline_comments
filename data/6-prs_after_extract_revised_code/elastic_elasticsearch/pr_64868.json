{"pr_number": 64868, "pr_title": "Remove the deprecated local parameter for _cat/indices", "pr_createdAt": "2020-11-10T14:11:48Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/64868", "timeline": [{"oid": "c56f246eb14164d2630a6671336c10324d2d1931", "url": "https://github.com/elastic/elasticsearch/commit/c56f246eb14164d2630a6671336c10324d2d1931", "message": "Remove the deprecated local parameter for _cat/indices", "committedDate": "2020-11-10T14:08:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDcwNTQ5MA==", "url": "https://github.com/elastic/elasticsearch/pull/64868#discussion_r520705490", "bodyText": "This is unnecessary, as mentioned in #64867 (comment)", "author": "dakrone", "createdAt": "2020-11-10T16:38:42Z", "path": "server/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java", "diffHunk": "@@ -99,10 +97,10 @@ protected void documentation(StringBuilder sb) {\n     public RestChannelConsumer doCatRequest(final RestRequest request, final NodeClient client) {\n         final String[] indices = Strings.splitStringByCommaToArray(request.param(\"index\"));\n         final IndicesOptions indicesOptions = IndicesOptions.fromRequest(request, IndicesOptions.strictExpand());\n-        if (request.hasParam(\"local\")) {\n-            DEPRECATION_LOGGER.deprecate(\"local\", LOCAL_DEPRECATED_MESSAGE);\n+        // needed only in v8 to catch breaking usages and may be removed in v9\n+        if (request.hasParam(\"local\")  && Version.CURRENT.major == Version.V_7_0_0.major + 1) {\n+            throw new IllegalArgumentException(\"parameter [local] is not supported\");", "originalCommit": "c56f246eb14164d2630a6671336c10324d2d1931", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ac537b84b50df519f21bd121d361be61da994266", "chunk": "diff --git a/server/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java b/server/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java\nindex e72b150ef17..18421081a4e 100644\n--- a/server/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java\n+++ b/server/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java\n\n@@ -97,10 +96,6 @@ public class RestIndicesAction extends AbstractCatAction {\n     public RestChannelConsumer doCatRequest(final RestRequest request, final NodeClient client) {\n         final String[] indices = Strings.splitStringByCommaToArray(request.param(\"index\"));\n         final IndicesOptions indicesOptions = IndicesOptions.fromRequest(request, IndicesOptions.strictExpand());\n-        // needed only in v8 to catch breaking usages and may be removed in v9\n-        if (request.hasParam(\"local\")  && Version.CURRENT.major == Version.V_7_0_0.major + 1) {\n-            throw new IllegalArgumentException(\"parameter [local] is not supported\");\n-        }\n         final TimeValue masterNodeTimeout = request.paramAsTime(\"master_timeout\", DEFAULT_MASTER_NODE_TIMEOUT);\n         final boolean includeUnloadedSegments = request.paramAsBoolean(\"include_unloaded_segments\", false);\n \n"}}, {"oid": "ac537b84b50df519f21bd121d361be61da994266", "url": "https://github.com/elastic/elasticsearch/commit/ac537b84b50df519f21bd121d361be61da994266", "message": "remove redundant check", "committedDate": "2020-11-11T17:03:22Z", "type": "commit"}, {"oid": "1c0ddb8af7fc0bd74dc60616946bc877012ac4f3", "url": "https://github.com/elastic/elasticsearch/commit/1c0ddb8af7fc0bd74dc60616946bc877012ac4f3", "message": "Merge branch 'master' into remove_local_for_cat_indices", "committedDate": "2020-11-11T17:24:41Z", "type": "commit"}, {"oid": "d6d40ad7e5b87f21770d55ca4d14366b1a817a6a", "url": "https://github.com/elastic/elasticsearch/commit/d6d40ad7e5b87f21770d55ca4d14366b1a817a6a", "message": "Merge branch 'master' into remove_local_for_cat_indices", "committedDate": "2020-11-13T13:39:09Z", "type": "commit"}, {"oid": "b5ab892de9d87dbcc9b057dc9cbafb6f6c987499", "url": "https://github.com/elastic/elasticsearch/commit/b5ab892de9d87dbcc9b057dc9cbafb6f6c987499", "message": "Merge branch 'master' into remove_local_for_cat_indices", "committedDate": "2020-11-13T13:40:45Z", "type": "commit"}, {"oid": "391946d47f45d7efb79791879962e2f360fc1121", "url": "https://github.com/elastic/elasticsearch/commit/391946d47f45d7efb79791879962e2f360fc1121", "message": "Merge branch 'master' into remove_local_for_cat_indices", "committedDate": "2020-11-13T22:27:41Z", "type": "commit"}]}