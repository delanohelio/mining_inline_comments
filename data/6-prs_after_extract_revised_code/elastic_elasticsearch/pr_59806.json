{"pr_number": 59806, "pr_title": "Fix retrieving data stream stats for a DS with multiple backing indices", "pr_createdAt": "2020-07-17T17:48:13Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59806", "timeline": [{"oid": "92982127fad860b623e226d79d7764c3e6f8fb22", "url": "https://github.com/elastic/elasticsearch/commit/92982127fad860b623e226d79d7764c3e6f8fb22", "message": "Fix retrieving data stream stats for a DS with multiple backing indices\n\nThis API incorrectly had `allowAliasesToMultipleIndices` set to false in the default options for the\nrequest. This changes it from `false` to `true` and enhances a test to exercise the functionality.\n\nResolves #59802", "committedDate": "2020-07-17T17:45:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU5NTIxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/59806#discussion_r456595215", "bodyText": "These options are the same for the GetDataStreams API, do those need to be updated as well?", "author": "jbaiera", "createdAt": "2020-07-17T18:03:57Z", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/action/DataStreamsStatsAction.java", "diffHunk": "@@ -37,7 +37,7 @@ public DataStreamsStatsAction() {\n         public Request() {\n             // this doesn't really matter since data stream name resolution isn't affected by IndicesOptions and\n             // a data stream's backing indices are retrieved from its metadata\n-            super(null, IndicesOptions.fromOptions(false, true, true, true, false, false, true, false));\n+            super(null, IndicesOptions.fromOptions(false, true, true, true, true, false, true, false));", "originalCommit": "92982127fad860b623e226d79d7764c3e6f8fb22", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYwMzUxOA==", "url": "https://github.com/elastic/elasticsearch/pull/59806#discussion_r456603518", "bodyText": "I don't think so because backing indices aren't being resolved in that API.", "author": "danhermann", "createdAt": "2020-07-17T18:21:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU5NTIxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYyMTUzMg==", "url": "https://github.com/elastic/elasticsearch/pull/59806#discussion_r456621532", "bodyText": "That's a good question, I don't think so (or else I would have expected us to find it much earlier) since those are retrieved differently?", "author": "dakrone", "createdAt": "2020-07-17T18:59:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU5NTIxNQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "e15b7b60407ef2612310e5b2d5d2848b5866e1a7", "url": "https://github.com/elastic/elasticsearch/commit/e15b7b60407ef2612310e5b2d5d2848b5866e1a7", "message": "Fix test for wording change", "committedDate": "2020-07-17T19:02:21Z", "type": "commit"}]}