{"pr_number": 62706, "pr_title": "Extract capture config from grok patterns up front", "pr_createdAt": "2020-09-21T13:47:03Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/62706", "timeline": [{"oid": "d13a0321f36f0cf0a948639003d4f8374fb5d0af", "url": "https://github.com/elastic/elasticsearch/commit/d13a0321f36f0cf0a948639003d4f8374fb5d0af", "message": "Extract capture config from grok patterns up front\n\nThis extracts the configuration for extracting values from a groked\nstring when building the grok expression to do two things:\n1. Create a method exposing that configuration on `Grok` itself which\n   will be used grok `grok` flavored runtime fields.\n2. Marginally speed up extracting grok values by skipping a little\n   string manipulation.", "committedDate": "2020-09-21T13:43:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA1ODI2MA==", "url": "https://github.com/elastic/elasticsearch/pull/62706#discussion_r492058260", "bodyText": "This didn't need to be public and it confused me that it was.", "author": "nik9000", "createdAt": "2020-09-21T13:47:24Z", "path": "libs/grok/src/main/java/org/elasticsearch/grok/Grok.java", "diffHunk": "@@ -151,7 +158,7 @@ private void forbidCircularReferences(String patternName, List<String> path, Str\n         }\n     }\n \n-    public String groupMatch(String name, Region region, String pattern) {\n+    private String groupMatch(String name, Region region, String pattern) {", "originalCommit": "d13a0321f36f0cf0a948639003d4f8374fb5d0af", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA1ODY4MA==", "url": "https://github.com/elastic/elasticsearch/pull/62706#discussion_r492058680", "bodyText": "This feels private, but it is used by tests. I tightened the visibility while I was there, but not didn't refactor a bunch of tests.", "author": "nik9000", "createdAt": "2020-09-21T13:47:57Z", "path": "libs/grok/src/main/java/org/elasticsearch/grok/Grok.java", "diffHunk": "@@ -167,7 +174,7 @@ public String groupMatch(String name, Region region, String pattern) {\n      *\n      * @return named regex expression\n      */\n-    public String toRegex(String grokPattern) {\n+    protected String toRegex(String grokPattern) {", "originalCommit": "d13a0321f36f0cf0a948639003d4f8374fb5d0af", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA1OTM2OQ==", "url": "https://github.com/elastic/elasticsearch/pull/62706#discussion_r492059369", "bodyText": "Moved this into the two new classes.", "author": "nik9000", "createdAt": "2020-09-21T13:48:50Z", "path": "libs/grok/src/main/java/org/elasticsearch/grok/GrokMatchGroup.java", "diffHunk": "@@ -1,68 +0,0 @@\n-/*\n- * Licensed to Elasticsearch under one or more contributor\n- * license agreements. See the NOTICE file distributed with\n- * this work for additional information regarding copyright\n- * ownership. Elasticsearch licenses this file to you under\n- * the Apache License, Version 2.0 (the \"License\"); you may\n- * not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *    http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-\n-package org.elasticsearch.grok;\n-\n-final class GrokMatchGroup {", "originalCommit": "d13a0321f36f0cf0a948639003d4f8374fb5d0af", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "b72c03994111657c1725994301d9eeb90d38fe1a", "url": "https://github.com/elastic/elasticsearch/commit/b72c03994111657c1725994301d9eeb90d38fe1a", "message": "Merge branch 'master' into grok_meta", "committedDate": "2020-09-22T13:42:25Z", "type": "commit"}, {"oid": "93bd00bb7989c43308577cd96311f2feb6b16900", "url": "https://github.com/elastic/elasticsearch/commit/93bd00bb7989c43308577cd96311f2feb6b16900", "message": "Merge branch 'master' into grok_meta", "committedDate": "2020-09-22T17:09:17Z", "type": "commit"}]}