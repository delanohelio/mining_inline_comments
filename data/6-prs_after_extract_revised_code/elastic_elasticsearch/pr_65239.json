{"pr_number": 65239, "pr_title": "[ML] adding some better logging on inference model storage failure", "pr_createdAt": "2020-11-18T20:03:36Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/65239", "timeline": [{"oid": "82f7b8cdcb876496b2a36b1502d87a1844c665bf", "url": "https://github.com/elastic/elasticsearch/commit/82f7b8cdcb876496b2a36b1502d87a1844c665bf", "message": "[ML] adding some better logging on inference model storage failure", "committedDate": "2020-11-18T20:02:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyODI5NQ==", "url": "https://github.com/elastic/elasticsearch/pull/65239#discussion_r526628295", "bodyText": "I think the arguments are given in the wrong order.", "author": "przemekwitek", "createdAt": "2020-11-19T06:45:13Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/process/ChunkedTrainedModelPersister.java", "diffHunk": "@@ -183,6 +183,13 @@ private CountDownLatch storeTrainedModelDoc(TrainedModelDefinitionDoc trainedMod\n                 provider.refreshInferenceIndex(refreshListener);\n             },\n             e -> {\n+                LOGGER.error(new ParameterizedMessage(\n+                    \"[{}] error storing trained model definition chunk [{}] with id [{}]\",\n+                        analytics.getId(),\n+                        trainedModelDefinitionDoc.getModelId(),", "originalCommit": "82f7b8cdcb876496b2a36b1502d87a1844c665bf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "950f29227aee2e69aa16f5f8577d768f8ed995c9", "chunk": "diff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/process/ChunkedTrainedModelPersister.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/process/ChunkedTrainedModelPersister.java\nindex d9d1b7dce31..676944e76c9 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/process/ChunkedTrainedModelPersister.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/process/ChunkedTrainedModelPersister.java\n\n@@ -186,16 +186,17 @@ public class ChunkedTrainedModelPersister {\n                 LOGGER.error(new ParameterizedMessage(\n                     \"[{}] error storing trained model definition chunk [{}] with id [{}]\",\n                         analytics.getId(),\n-                        trainedModelDefinitionDoc.getModelId(),\n-                        trainedModelDefinitionDoc.getDocNum()\n+                        trainedModelDefinitionDoc.getDocNum(),\n+                        trainedModelDefinitionDoc.getModelId()\n                     ),\n                     e);\n                 this.readyToStoreNewModel.set(true);\n                 failureHandler.accept(ExceptionsHelper.serverError(\n                     \"error storing trained model definition chunk [{}] with id [{}]\",\n                     e,\n-                    trainedModelDefinitionDoc.getModelId(),\n-                    trainedModelDefinitionDoc.getDocNum()));\n+                    trainedModelDefinitionDoc.getDocNum(),\n+                    trainedModelDefinitionDoc.getModelId()\n+                ));\n                 refreshListener.onResponse(null);\n             }\n         );\n"}}, {"oid": "950f29227aee2e69aa16f5f8577d768f8ed995c9", "url": "https://github.com/elastic/elasticsearch/commit/950f29227aee2e69aa16f5f8577d768f8ed995c9", "message": "addressing pr comment", "committedDate": "2020-11-19T13:28:13Z", "type": "commit"}]}