{"pr_number": 58458, "pr_title": "EQL: code cleanup and further tests", "pr_createdAt": "2020-06-23T16:58:58Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/58458", "timeline": [{"oid": "001710ea01edfe5ba937492c96e617c6c5ce01fc", "url": "https://github.com/elastic/elasticsearch/commit/001710ea01edfe5ba937492c96e617c6c5ce01fc", "message": "Add FunctionPipe tests to all functions. Cleanup functions code.", "committedDate": "2020-06-23T15:56:44Z", "type": "commit"}, {"oid": "247caa3236335b1eb1edcfad953ec2d8a8418970", "url": "https://github.com/elastic/elasticsearch/commit/247caa3236335b1eb1edcfad953ec2d8a8418970", "message": "Merge branch 'master' of https://github.com/elastic/elasticsearch into 54568_impl", "committedDate": "2020-06-23T16:56:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0NDE1OA==", "url": "https://github.com/elastic/elasticsearch/pull/58458#discussion_r444744158", "bodyText": "Is public necessary? can it be package private?", "author": "matriv", "createdAt": "2020-06-24T08:51:57Z", "path": "x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/expression/function/scalar/string/ConcatFunctionPipe.java", "diffHunk": "@@ -85,6 +85,10 @@ public ConcatFunctionProcessor asProcessor() {\n         return new ConcatFunctionProcessor(processors);\n     }\n \n+    public List<Pipe> values() {", "originalCommit": "247caa3236335b1eb1edcfad953ec2d8a8418970", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1Nzk1OA==", "url": "https://github.com/elastic/elasticsearch/pull/58458#discussion_r444757958", "bodyText": "Yes, can be package private.", "author": "astefan", "createdAt": "2020-06-24T09:15:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0NDE1OA=="}], "type": "inlineReview", "revised_code": {"commit": "b02697d82530a9df8098b44c108a87691bb3c3f0", "chunk": "diff --git a/x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/expression/function/scalar/string/ConcatFunctionPipe.java b/x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/expression/function/scalar/string/ConcatFunctionPipe.java\nindex 238ce0ec9a8..d822acd766a 100644\n--- a/x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/expression/function/scalar/string/ConcatFunctionPipe.java\n+++ b/x-pack/plugin/eql/src/main/java/org/elasticsearch/xpack/eql/expression/function/scalar/string/ConcatFunctionPipe.java\n\n@@ -85,7 +85,7 @@ public class ConcatFunctionPipe extends Pipe {\n         return new ConcatFunctionProcessor(processors);\n     }\n \n-    public List<Pipe> values() {\n+    List<Pipe> values() {\n         return values;\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1MDEwNQ==", "url": "https://github.com/elastic/elasticsearch/pull/58458#discussion_r444750105", "bodyText": "Why did you reduce this?", "author": "matriv", "createdAt": "2020-06-24T09:02:05Z", "path": "x-pack/plugin/ql/src/test/java/org/elasticsearch/xpack/ql/tree/NodeSubclassTests.java", "diffHunk": "@@ -559,7 +559,7 @@ private Object makeMap(Class<? extends Node<?>> toBuildClass, ParameterizedType\n \n     private int randomSizeForCollection(Class<? extends Node<?>> toBuildClass) {\n         int minCollectionLength = 0;\n-        int maxCollectionLength = 10;\n+        int maxCollectionLength = 3;", "originalCommit": "247caa3236335b1eb1edcfad953ec2d8a8418970", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1NTkzOQ==", "url": "https://github.com/elastic/elasticsearch/pull/58458#discussion_r444755939", "bodyText": "Good catch. That's a leftover from an attempt to add EqlNodeSubclassTests to EQL. Will revert it.", "author": "astefan", "createdAt": "2020-06-24T09:11:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1MDEwNQ=="}], "type": "inlineReview", "revised_code": {"commit": "b02697d82530a9df8098b44c108a87691bb3c3f0", "chunk": "diff --git a/x-pack/plugin/ql/src/test/java/org/elasticsearch/xpack/ql/tree/NodeSubclassTests.java b/x-pack/plugin/ql/src/test/java/org/elasticsearch/xpack/ql/tree/NodeSubclassTests.java\nindex 93c02fc36dc..fb16a483822 100644\n--- a/x-pack/plugin/ql/src/test/java/org/elasticsearch/xpack/ql/tree/NodeSubclassTests.java\n+++ b/x-pack/plugin/ql/src/test/java/org/elasticsearch/xpack/ql/tree/NodeSubclassTests.java\n\n@@ -559,7 +559,7 @@ public class NodeSubclassTests<T extends B, B extends Node<B>> extends ESTestCas\n \n     private int randomSizeForCollection(Class<? extends Node<?>> toBuildClass) {\n         int minCollectionLength = 0;\n-        int maxCollectionLength = 3;\n+        int maxCollectionLength = 10;\n \n         if (hasAtLeastTwoChildren(toBuildClass)) {\n             minCollectionLength = 2;\n"}}, {"oid": "b02697d82530a9df8098b44c108a87691bb3c3f0", "url": "https://github.com/elastic/elasticsearch/commit/b02697d82530a9df8098b44c108a87691bb3c3f0", "message": "Address reviews", "committedDate": "2020-06-24T12:06:33Z", "type": "commit"}, {"oid": "c23aa0d201e53b0c7206aae95f4e6086b2c34287", "url": "https://github.com/elastic/elasticsearch/commit/c23aa0d201e53b0c7206aae95f4e6086b2c34287", "message": "Merge branch 'master' of https://github.com/elastic/elasticsearch into 54568_impl", "committedDate": "2020-06-24T12:07:22Z", "type": "commit"}]}