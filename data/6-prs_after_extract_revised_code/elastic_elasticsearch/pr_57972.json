{"pr_number": 57972, "pr_title": "Add RequestConfig support to RequestOptions", "pr_createdAt": "2020-06-11T08:15:08Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57972", "timeline": [{"oid": "03749945b76a1631a983e2de533b6392e5f581a0", "url": "https://github.com/elastic/elasticsearch/commit/03749945b76a1631a983e2de533b6392e5f581a0", "message": "add RequestConfig in RequestOptions, this can set request config per request", "committedDate": "2020-06-11T06:57:16Z", "type": "commit"}, {"oid": "1b1fa9c2d14ca3af725817dc2353e452175f4610", "url": "https://github.com/elastic/elasticsearch/commit/1b1fa9c2d14ca3af725817dc2353e452175f4610", "message": "add RequestConfig in RequestOptions, this can set request config per request", "committedDate": "2020-06-11T07:05:33Z", "type": "commit"}, {"oid": "d64e3659e074fc40e943a2e7fe6f8f0bd77fdf84", "url": "https://github.com/elastic/elasticsearch/commit/d64e3659e074fc40e943a2e7fe6f8f0bd77fdf84", "message": "add RequestConfig in RequestOptions, this can set request config per request", "committedDate": "2020-06-11T07:08:53Z", "type": "commit"}, {"oid": "71bfec5d7d9c29f0339a344115166ef772f19223", "url": "https://github.com/elastic/elasticsearch/commit/71bfec5d7d9c29f0339a344115166ef772f19223", "message": "add RequestConfig in RequestOptions, this can set request config per request", "committedDate": "2020-06-11T08:03:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg0MDc4OA==", "url": "https://github.com/elastic/elasticsearch/pull/57972#discussion_r445840788", "bodyText": "This code is difficult to make sense of quickly; A lot of repeated words like \"Request\" and \"Builder\" in the snippet makes it seem repetitive and a bit hard to find the API boundary between the two config classes. Perhaps it could be reworked to make it easier to read using the fluent methods?\nRequestConfig requestConfig = RequestConfig.custom()\n    .setConnectTimeout(5000)\n    .setSocketTimeout(60000)\n    .build();\nRequestOptions options = RequestOptions.DEFAULT.toBuilder()\n    .setRequestConfig(requestConfig)\n    .build();", "author": "jbaiera", "createdAt": "2020-06-25T21:12:01Z", "path": "client/rest/src/test/java/org/elasticsearch/client/documentation/RestClientDocumentation.java", "diffHunk": "@@ -327,6 +327,15 @@ public void commonConfiguration() throws Exception {\n                     });\n             //end::rest-client-config-timeouts\n         }\n+        {\n+            //tag::rest-client-config-request-options-timeouts\n+            RequestOptions.Builder builder = RequestOptions.DEFAULT.toBuilder();\n+            RequestConfig.Builder requestConfigBuilder = RequestConfig.custom();\n+            requestConfigBuilder.setConnectTimeout(5000).setSocketTimeout(60000);\n+            builder.setRequestConfig(requestConfigBuilder.build());\n+            RequestOptions options = builder.build();", "originalCommit": "71bfec5d7d9c29f0339a344115166ef772f19223", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUzODE2OA==", "url": "https://github.com/elastic/elasticsearch/pull/57972#discussion_r446538168", "bodyText": "yeah, it's a good idea. thank you!", "author": "weizijun", "createdAt": "2020-06-27T15:34:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg0MDc4OA=="}], "type": "inlineReview", "revised_code": {"commit": "a0ca43ff1f88e22d1a633aa69ce0849b7bd79756", "chunk": "diff --git a/client/rest/src/test/java/org/elasticsearch/client/documentation/RestClientDocumentation.java b/client/rest/src/test/java/org/elasticsearch/client/documentation/RestClientDocumentation.java\nindex 61908f366b6..11c81d2ae24 100644\n--- a/client/rest/src/test/java/org/elasticsearch/client/documentation/RestClientDocumentation.java\n+++ b/client/rest/src/test/java/org/elasticsearch/client/documentation/RestClientDocumentation.java\n\n@@ -329,11 +329,13 @@ public class RestClientDocumentation {\n         }\n         {\n             //tag::rest-client-config-request-options-timeouts\n-            RequestOptions.Builder builder = RequestOptions.DEFAULT.toBuilder();\n-            RequestConfig.Builder requestConfigBuilder = RequestConfig.custom();\n-            requestConfigBuilder.setConnectTimeout(5000).setSocketTimeout(60000);\n-            builder.setRequestConfig(requestConfigBuilder.build());\n-            RequestOptions options = builder.build();\n+            RequestConfig requestConfig = RequestConfig.custom()\n+                .setConnectTimeout(5000)\n+                .setSocketTimeout(60000)\n+                .build();\n+            RequestOptions options = RequestOptions.DEFAULT.toBuilder()\n+                .setRequestConfig(requestConfig)\n+                .build();\n             //end::rest-client-config-request-options-timeouts\n         }\n         {\n"}}, {"oid": "a0ca43ff1f88e22d1a633aa69ce0849b7bd79756", "url": "https://github.com/elastic/elasticsearch/commit/a0ca43ff1f88e22d1a633aa69ce0849b7bd79756", "message": "add RequestConfig in RequestOptions, this can set request config per request", "committedDate": "2020-06-27T15:32:29Z", "type": "commit"}, {"oid": "e2871e9ea04969006f3bd62a8bc9e617c6358e02", "url": "https://github.com/elastic/elasticsearch/commit/e2871e9ea04969006f3bd62a8bc9e617c6358e02", "message": "Merge branch 'master' into feature-RequestOptions-addRequestConfig", "committedDate": "2020-06-27T15:42:40Z", "type": "commit"}]}