{"pr_number": 66185, "pr_title": "Add HDFS searchable snapshot integration", "pr_createdAt": "2020-12-10T18:11:07Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/66185", "timeline": [{"oid": "478b863eaa5be0963b006451897731a3903d13f1", "url": "https://github.com/elastic/elasticsearch/commit/478b863eaa5be0963b006451897731a3903d13f1", "message": "Implement the new read operation on HDFS Repositories", "committedDate": "2020-11-18T21:15:22Z", "type": "commit"}, {"oid": "2561399c8fd77783aeb29b86231b7ec92a8bee24", "url": "https://github.com/elastic/elasticsearch/commit/2561399c8fd77783aeb29b86231b7ec92a8bee24", "message": "Merge branch 'master' into hdfs-repository-read-implementation", "committedDate": "2020-12-08T21:11:33Z", "type": "commit"}, {"oid": "81cf99ff5cf5e99aa1878c0dddfb89621f7ccd3f", "url": "https://github.com/elastic/elasticsearch/commit/81cf99ff5cf5e99aa1878c0dddfb89621f7ccd3f", "message": "Get bare bones testing completed", "committedDate": "2020-12-09T22:24:14Z", "type": "commit"}, {"oid": "fa7937e268e7ac5cb59a5594dffe59c34ac5fad0", "url": "https://github.com/elastic/elasticsearch/commit/fa7937e268e7ac5cb59a5594dffe59c34ac5fad0", "message": "clean up build file", "committedDate": "2020-12-10T17:50:26Z", "type": "commit"}, {"oid": "fa3aa54f63e284dc9fcffefd200a7add16d20e36", "url": "https://github.com/elastic/elasticsearch/commit/fa3aa54f63e284dc9fcffefd200a7add16d20e36", "message": "add resolve permission to plugin permissions", "committedDate": "2020-12-10T18:03:55Z", "type": "commit"}, {"oid": "6d86e2205970431860f3823828f5ba3df234897d", "url": "https://github.com/elastic/elasticsearch/commit/6d86e2205970431860f3823828f5ba3df234897d", "message": "Precommit, also swap stream limit with privileged stream", "committedDate": "2020-12-10T18:23:01Z", "type": "commit"}, {"oid": "4919ccd675861eda7613e74e84c1827e54835abc", "url": "https://github.com/elastic/elasticsearch/commit/4919ccd675861eda7613e74e84c1827e54835abc", "message": "Merge branch 'master' into hdfs-repository-read-implementation", "committedDate": "2020-12-10T20:43:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc4NTUxNg==", "url": "https://github.com/elastic/elasticsearch/pull/66185#discussion_r541785516", "bodyText": "Why do we need resolve now, it seems the only new thing we do is a .seek call?", "author": "original-brownbear", "createdAt": "2020-12-12T21:39:19Z", "path": "plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsSecurityContext.java", "diffHunk": "@@ -50,7 +50,7 @@\n     static {\n         // We can do FS ops with only a few elevated permissions:\n         SIMPLE_AUTH_PERMISSIONS = new Permission[]{\n-            new SocketPermission(\"*\", \"connect\"),\n+            new SocketPermission(\"*\", \"connect,resolve\"),", "originalCommit": "4919ccd675861eda7613e74e84c1827e54835abc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ4NzIwNw==", "url": "https://github.com/elastic/elasticsearch/pull/66185#discussion_r542487207", "bodyText": "likely not. I added this to try to appease the permission errors. Given the problem was something else, it's unlikely that we'll need this.", "author": "jbaiera", "createdAt": "2020-12-14T15:44:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc4NTUxNg=="}], "type": "inlineReview", "revised_code": {"commit": "eaabbcfd0c243c90f2695c20c2436323fd375111", "chunk": "diff --git a/plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsSecurityContext.java b/plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsSecurityContext.java\nindex f605d8958fd..4562174230c 100644\n--- a/plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsSecurityContext.java\n+++ b/plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsSecurityContext.java\n\n@@ -50,7 +50,7 @@ class HdfsSecurityContext {\n     static {\n         // We can do FS ops with only a few elevated permissions:\n         SIMPLE_AUTH_PERMISSIONS = new Permission[]{\n-            new SocketPermission(\"*\", \"connect,resolve\"),\n+            new SocketPermission(\"*\", \"connect\"),\n             // 1) hadoop dynamic proxy is messy with access rules\n             new ReflectPermission(\"suppressAccessChecks\"),\n             // 2) allow hadoop to add credentials to our Subject\n"}}, {"oid": "eaabbcfd0c243c90f2695c20c2436323fd375111", "url": "https://github.com/elastic/elasticsearch/commit/eaabbcfd0c243c90f2695c20c2436323fd375111", "message": "Remove resolve permission", "committedDate": "2020-12-14T15:49:01Z", "type": "commit"}]}