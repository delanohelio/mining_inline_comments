{"pr_number": 57931, "pr_title": "Prohibit freezing the write index of a data stream", "pr_createdAt": "2020-06-10T12:57:36Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57931", "timeline": [{"oid": "72b271910eb77243eee8f1ae96e4ba669df50da7", "url": "https://github.com/elastic/elasticsearch/commit/72b271910eb77243eee8f1ae96e4ba669df50da7", "message": "Prohibit freezing the write index of a data stream", "committedDate": "2020-06-10T12:55:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExNzc0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/57931#discussion_r438117749", "bodyText": "Perhaps keep the message the same? I think it is ok that frees errors out with the fact that it can't close the index.", "author": "martijnvg", "createdAt": "2020-06-10T13:23:30Z", "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataIndexStateService.java", "diffHunk": "@@ -147,7 +147,7 @@ public void closeIndices(final CloseIndexClusterStateUpdateRequest request, fina\n             }\n         }\n         if (writeIndices.size() > 0) {\n-            throw new IllegalArgumentException(\"cannot close the following data stream write indices [\" +\n+            throw new IllegalArgumentException(\"cannot close or freeze the following data stream write indices [\" +", "originalCommit": "72b271910eb77243eee8f1ae96e4ba669df50da7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "51b538567425c7925479a841ce5c2ab3b24e6a48", "chunk": "diff --git a/server/src/main/java/org/elasticsearch/cluster/metadata/MetadataIndexStateService.java b/server/src/main/java/org/elasticsearch/cluster/metadata/MetadataIndexStateService.java\nindex d300923301c..cfd850c0b7b 100644\n--- a/server/src/main/java/org/elasticsearch/cluster/metadata/MetadataIndexStateService.java\n+++ b/server/src/main/java/org/elasticsearch/cluster/metadata/MetadataIndexStateService.java\n\n@@ -147,7 +147,7 @@ public class MetadataIndexStateService {\n             }\n         }\n         if (writeIndices.size() > 0) {\n-            throw new IllegalArgumentException(\"cannot close or freeze the following data stream write indices [\" +\n+            throw new IllegalArgumentException(\"cannot close the following data stream write indices [\" +\n                 Strings.collectionToCommaDelimitedString(writeIndices) + \"]\");\n         }\n \n"}}, {"oid": "51b538567425c7925479a841ce5c2ab3b24e6a48", "url": "https://github.com/elastic/elasticsearch/commit/51b538567425c7925479a841ce5c2ab3b24e6a48", "message": "retain original error message", "committedDate": "2020-06-10T14:08:47Z", "type": "commit"}, {"oid": "8321ea04f07e822b87bcc9c08077c4e52ceaffc2", "url": "https://github.com/elastic/elasticsearch/commit/8321ea04f07e822b87bcc9c08077c4e52ceaffc2", "message": "revert formatting change", "committedDate": "2020-06-10T14:11:08Z", "type": "commit"}]}