{"pr_number": 55100, "pr_title": "Remove local parameter for get field mapping request", "pr_createdAt": "2020-04-12T06:04:49Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55100", "timeline": [{"oid": "ea685c43ba3d319f37f17e62013b2274a6f51fd3", "url": "https://github.com/elastic/elasticsearch/commit/ea685c43ba3d319f37f17e62013b2274a6f51fd3", "message": "Remove local parameter for get field mapping request", "committedDate": "2020-04-12T06:01:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE1MTU5NQ==", "url": "https://github.com/elastic/elasticsearch/pull/55100#discussion_r407151595", "bodyText": "This is not necessary if we can be sure that the request never goes across wire.", "author": "ywangd", "createdAt": "2020-04-12T06:05:41Z", "path": "server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsRequest.java", "diffHunk": "@@ -59,26 +57,17 @@ public GetFieldMappingsRequest(StreamInput in) throws IOException {\n             if (types != Strings.EMPTY_ARRAY) {\n                 throw new IllegalArgumentException(\"Expected empty type array but received [\" + Arrays.toString(types) + \"]\");\n             }\n+\n         }\n         indicesOptions = IndicesOptions.readIndicesOptions(in);\n-        local = in.readBoolean();\n+        // Consume the deprecated local parameter\n+        if (in.getVersion().before(Version.V_8_0_0)) {\n+            in.readBoolean();\n+        }", "originalCommit": "ea685c43ba3d319f37f17e62013b2274a6f51fd3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE1MTYzMQ==", "url": "https://github.com/elastic/elasticsearch/pull/55100#discussion_r407151631", "bodyText": "Same here as well, not needed if the request never goes across nodes.", "author": "ywangd", "createdAt": "2020-04-12T06:06:13Z", "path": "server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetFieldMappingsRequest.java", "diffHunk": "@@ -133,7 +122,9 @@ public void writeTo(StreamOutput out) throws IOException {\n             out.writeStringArray(Strings.EMPTY_ARRAY);\n         }\n         indicesOptions.writeIndicesOptions(out);\n-        out.writeBoolean(local);\n+        if (out.getVersion().before(Version.V_8_0_0)) {\n+            out.writeBoolean(true);\n+        }", "originalCommit": "ea685c43ba3d319f37f17e62013b2274a6f51fd3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "c9661d88dd3a96a1978151102d05bff0aca9a6a3", "url": "https://github.com/elastic/elasticsearch/commit/c9661d88dd3a96a1978151102d05bff0aca9a6a3", "message": "Add migration notes for the local parameter removal", "committedDate": "2020-04-15T01:16:45Z", "type": "commit"}, {"oid": "aa8638728a541dcad4ed19f0e2c7e2b8686f31b8", "url": "https://github.com/elastic/elasticsearch/commit/aa8638728a541dcad4ed19f0e2c7e2b8686f31b8", "message": "Merge remote-tracking branch 'origin/master' into remove-get-field-mapping-local", "committedDate": "2020-04-15T01:17:01Z", "type": "commit"}, {"oid": "e994ce0010ba33b02b1b92b170fcd630204521aa", "url": "https://github.com/elastic/elasticsearch/commit/e994ce0010ba33b02b1b92b170fcd630204521aa", "message": "Remove extra blank line", "committedDate": "2020-04-15T01:18:32Z", "type": "commit"}]}