{"pr_number": 1957, "pr_title": "Owls-84294 handle missing sa in operator install/upgrade", "pr_createdAt": "2020-09-28T20:59:02Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957", "timeline": [{"oid": "5b7790c001a37514cf00d6cf0b12522a999d61dd", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5b7790c001a37514cf00d6cf0b12522a999d61dd", "message": "check existence of sa in helm templates", "committedDate": "2020-09-22T14:33:59Z", "type": "commit"}, {"oid": "230b670d5d7d2855d1ff729a7a0e1b779cde4109", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/230b670d5d7d2855d1ff729a7a0e1b779cde4109", "message": "Merge remote-tracking branch 'origin/develop' into owls84294-missing-sa-upgrade", "committedDate": "2020-09-23T20:34:14Z", "type": "commit"}, {"oid": "db18d956168cec52c0b29f9846d1fb685ffddab9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/db18d956168cec52c0b29f9846d1fb685ffddab9", "message": "minor product change plus test changes", "committedDate": "2020-09-24T21:36:13Z", "type": "commit"}, {"oid": "255d4ce3b86fb4e22f5d29a6e63e56b352cb0e50", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/255d4ce3b86fb4e22f5d29a6e63e56b352cb0e50", "message": "Merge branch 'owls84294-missing-sa-upgrade' of https://github.com/oracle/weblogic-kubernetes-operator into owls84294-missing-sa-upgrade", "committedDate": "2020-09-24T21:40:39Z", "type": "commit"}, {"oid": "42989e151356f87633ab551ee12f8e7fa2a22d02", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/42989e151356f87633ab551ee12f8e7fa2a22d02", "message": "minor changes", "committedDate": "2020-09-24T22:20:40Z", "type": "commit"}, {"oid": "994e002e094ccaa01b1b111cc07818baac178ae3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/994e002e094ccaa01b1b111cc07818baac178ae3", "message": "more changes", "committedDate": "2020-09-25T17:19:38Z", "type": "commit"}, {"oid": "b1b8c8b46e9d77f7a71643cbaa39d81b05115a7b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b1b8c8b46e9d77f7a71643cbaa39d81b05115a7b", "message": "more doc change", "committedDate": "2020-09-25T17:35:42Z", "type": "commit"}, {"oid": "fc2e1e4b40859b10a5af6ac7b93dfd2f126759c3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fc2e1e4b40859b10a5af6ac7b93dfd2f126759c3", "message": "cleanup", "committedDate": "2020-09-28T02:33:55Z", "type": "commit"}, {"oid": "403c3b98f5aa63512ca28714fe398cebf54f4508", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/403c3b98f5aa63512ca28714fe398cebf54f4508", "message": "minor doc change", "committedDate": "2020-09-28T02:44:49Z", "type": "commit"}, {"oid": "9b12f92500057ade7c460046d8b4e6eab88617de", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9b12f92500057ade7c460046d8b4e6eab88617de", "message": "fine tune doc text", "committedDate": "2020-09-28T13:43:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI0MDczMQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496240731", "bodyText": "add message if it is null", "author": "marinakog", "createdAt": "2020-09-28T21:23:24Z", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItUsabilityOperatorHelmChart.java", "diffHunk": "@@ -724,8 +730,9 @@ public void testNotPreexistedOpServiceAccountCreateOperatorNegativeInstall() {\n                   condition.getRemainingTimeInMS()))\n           .until(assertDoesNotThrow(() -> operatorIsReady(op2Namespace),\n               \"operatorIsReady failed with ApiException\"));\n-      //comment it out due OWLS-84294, helm does not report failed status\n-      //assertNull(errorMsg, errorMsg);\n+\n+      // Helm reports error message status\n+      assertNotNull(errorMsg);", "originalCommit": "9b12f92500057ade7c460046d8b4e6eab88617de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxMzQzNg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496713436", "bodyText": "done", "author": "doxiao", "createdAt": "2020-09-29T13:24:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI0MDczMQ=="}], "type": "inlineReview", "revised_code": {"commit": "1b94aaf4e4450a7935b593d144b1f636a1266fd4", "chunk": "diff --git a/integration-tests/src/test/java/oracle/weblogic/kubernetes/ItUsabilityOperatorHelmChart.java b/integration-tests/src/test/java/oracle/weblogic/kubernetes/ItUsabilityOperatorHelmChart.java\nindex 9ee0b46fc9..481352639f 100644\n--- a/integration-tests/src/test/java/oracle/weblogic/kubernetes/ItUsabilityOperatorHelmChart.java\n+++ b/integration-tests/src/test/java/oracle/weblogic/kubernetes/ItUsabilityOperatorHelmChart.java\n\n@@ -732,7 +732,7 @@ class ItUsabilityOperatorHelmChart {\n               \"operatorIsReady failed with ApiException\"));\n \n       // Helm reports error message status\n-      assertNotNull(errorMsg);\n+      assertNotNull(errorMsg, \"Expected error message for missing ServiceAccount not found\");\n     } finally {\n       //uninstall operator helm chart\n       deleteSecret(\"ocir-secret\",op2Namespace);\n"}}, {"oid": "1b94aaf4e4450a7935b593d144b1f636a1266fd4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1b94aaf4e4450a7935b593d144b1f636a1266fd4", "message": "add error messagewq", "committedDate": "2020-09-29T13:22:35Z", "type": "commit"}, {"oid": "8e71c81c5627c42631a486bedada8bd6fbb23959", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8e71c81c5627c42631a486bedada8bd6fbb23959", "message": "minor doc edit", "committedDate": "2020-09-29T14:06:13Z", "type": "commit"}]}