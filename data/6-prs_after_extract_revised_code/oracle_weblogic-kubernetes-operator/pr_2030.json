{"pr_number": 2030, "pr_title": "Modified the test result directory structure naming convention and more", "pr_createdAt": "2020-11-05T02:56:09Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2030", "timeline": [{"oid": "97613760f84c90967cf447d7381dca733222b781", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/97613760f84c90967cf447d7381dca733222b781", "message": "Initial check-in", "committedDate": "2020-10-30T21:47:26Z", "type": "commit"}, {"oid": "0fd9daa116618e71e9dd114845b41f0b8f012338", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0fd9daa116618e71e9dd114845b41f0b8f012338", "message": "Reformat doc", "committedDate": "2020-10-30T21:51:30Z", "type": "commit"}, {"oid": "15a72f8f91a9c95d699178312c2ef0e924295511", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/15a72f8f91a9c95d699178312c2ef0e924295511", "message": "Reformat doc", "committedDate": "2020-10-30T21:59:16Z", "type": "commit"}, {"oid": "cc41e1c05d89212884d2ccc26fc83cdc68bae9f8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cc41e1c05d89212884d2ccc26fc83cdc68bae9f8", "message": "Reformat doc", "committedDate": "2020-10-30T22:09:56Z", "type": "commit"}, {"oid": "4fa82beb53a7ee20a0d4f6ab763951bdab0c1497", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4fa82beb53a7ee20a0d4f6ab763951bdab0c1497", "message": "Reformat doc", "committedDate": "2020-10-30T22:19:11Z", "type": "commit"}, {"oid": "b70a0b20fa0109de1806d8dc6add5273e64243ae", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b70a0b20fa0109de1806d8dc6add5273e64243ae", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-02T15:09:20Z", "type": "commit"}, {"oid": "67dd04eddec0365452c050c1df958b5cdda4c251", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/67dd04eddec0365452c050c1df958b5cdda4c251", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-02T20:03:18Z", "type": "commit"}, {"oid": "757a0c2803ad1f7b2eaf6e01fd52ce78943bcdef", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/757a0c2803ad1f7b2eaf6e01fd52ce78943bcdef", "message": "missing commit", "committedDate": "2020-11-02T20:21:25Z", "type": "commit"}, {"oid": "31526b3d169cb05a8ff542334810bed303f4b31e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/31526b3d169cb05a8ff542334810bed303f4b31e", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-03T17:10:14Z", "type": "commit"}, {"oid": "8b3dad241de25534596dfac98329140a11e65ec7", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8b3dad241de25534596dfac98329140a11e65ec7", "message": "re defined RESULT_ROOT and LOG_DIR, modified the logic for COLLECT_LOGS_ON_SUCCESS", "committedDate": "2020-11-03T22:58:52Z", "type": "commit"}, {"oid": "4a6449101361309eded1b05ab3c0801f00a853a6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4a6449101361309eded1b05ab3c0801f00a853a6", "message": "Modified WORK_DIR varaiable", "committedDate": "2020-11-04T16:48:40Z", "type": "commit"}, {"oid": "c7f680c09235068cf1c5f2c4632e3e5b1d4e288e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c7f680c09235068cf1c5f2c4632e3e5b1d4e288e", "message": "Modification for SKIP_CLEANUP", "committedDate": "2020-11-05T00:52:24Z", "type": "commit"}, {"oid": "9f0c53e5edd3b9bfd31ed0c904b20bf247958202", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9f0c53e5edd3b9bfd31ed0c904b20bf247958202", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-05T00:52:34Z", "type": "commit"}, {"oid": "29dde4ac40317afdc4c9267276e9deec6544f480", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/29dde4ac40317afdc4c9267276e9deec6544f480", "message": "More modification to README.md", "committedDate": "2020-11-05T02:34:43Z", "type": "commit"}, {"oid": "581a9ff8bfae36cf890a32b90417e7fd6dbc8240", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/581a9ff8bfae36cf890a32b90417e7fd6dbc8240", "message": "More modification to README.md", "committedDate": "2020-11-05T02:37:50Z", "type": "commit"}, {"oid": "c68907176741dd05269197ad5d252634ff77a504", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c68907176741dd05269197ad5d252634ff77a504", "message": "More chnages to READEME.md", "committedDate": "2020-11-05T20:54:14Z", "type": "commit"}, {"oid": "1eff78361bc7e091f2c52973a7b3914f064546e7", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1eff78361bc7e091f2c52973a7b3914f064546e7", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-06T13:58:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNDYxMQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2030#discussion_r519004611", "bodyText": "IMO, we should place all IT logs under one directory. So that it is easy to delete one directory when cleaning up instead of trying to delete multiple.\nWe should create //it-tests/  as base dir and then use this for all other logs.", "author": "sankarpn", "createdAt": "2020-11-06T21:04:59Z", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/TestConstants.java", "diffHunk": "@@ -143,11 +143,11 @@\n   public static final String K8S_NODEPORT_HOST = Optional.ofNullable(System.getenv(\"K8S_NODEPORT_HOST\"))\n         .orElse(assertDoesNotThrow(() -> InetAddress.getLocalHost().getHostAddress()));\n   public static final String RESULTS_ROOT = System.getenv().getOrDefault(\"RESULT_ROOT\",\n-      System.getProperty(\"java.io.tmpdir\")) + \"/ittestsresults\";\n+      System.getProperty(\"java.io.tmpdir\")) + \"/it-testsresults\";", "originalCommit": "c68907176741dd05269197ad5d252634ff77a504", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNjIxOQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2030#discussion_r519006219", "bodyText": "Do u want to merge it-diagnosticlogs and it-ittestsresults into one directory under it-logs  ?", "author": "anpanigr", "createdAt": "2020-11-06T21:09:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNDYxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxMzA3Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2030#discussion_r519013077", "bodyText": "Yes.", "author": "sankarpn", "createdAt": "2020-11-06T21:26:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNDYxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAyNjg5NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2030#discussion_r519026895", "bodyText": "How about following directory structure proposal ...\nTestConstants.java\npublic static final String RESULTS_BASE = System.getenv().getOrDefault(\"RESULTS_BASE\",\nSystem.getProperty(\"java.io.tmpdir\")) + \"/it-testresults\";\npublic static final String LOGS_DIR =  RESULTS_BASE  + \"/diagnotsics\";\npublic static final String PV_ROOT =   RESULTS_BASE + \"/pvroot\";\npublic static final String RESULTS_ROOT =   RESULTS_BASE + \"/workdir\";\nactions/ActionConstants.java\npublic static final String WORK_DIR = RESULTS_BASE + \"/workdir\";\nSo that we have only one Environment Variable  RESULTS_BASE to deal with.", "author": "anpanigr", "createdAt": "2020-11-06T22:00:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNDYxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTA0Mzc1Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2030#discussion_r519043756", "bodyText": "commit the change to the PR", "author": "anpanigr", "createdAt": "2020-11-06T22:50:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNDYxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0MzUyNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2030#discussion_r520043525", "bodyText": "That seems good.", "author": "sankarpn", "createdAt": "2020-11-09T18:57:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNDYxMQ=="}], "type": "inlineReview", "revised_code": {"commit": "2e4ee5eae34c5fac9310c920e464dbd2e512ec67", "chunk": "diff --git a/integration-tests/src/test/java/oracle/weblogic/kubernetes/TestConstants.java b/integration-tests/src/test/java/oracle/weblogic/kubernetes/TestConstants.java\nindex 713c4a320c..f822a03b4a 100644\n--- a/integration-tests/src/test/java/oracle/weblogic/kubernetes/TestConstants.java\n+++ b/integration-tests/src/test/java/oracle/weblogic/kubernetes/TestConstants.java\n\n@@ -142,12 +143,12 @@ public interface TestConstants {\n \n   public static final String K8S_NODEPORT_HOST = Optional.ofNullable(System.getenv(\"K8S_NODEPORT_HOST\"))\n         .orElse(assertDoesNotThrow(() -> InetAddress.getLocalHost().getHostAddress()));\n-  public static final String RESULTS_ROOT = System.getenv().getOrDefault(\"RESULT_ROOT\",\n+  public static final String RESULTS_BASE = System.getenv().getOrDefault(\"RESULST_ROOT\",\n       System.getProperty(\"java.io.tmpdir\")) + \"/it-testsresults\";\n-  public static final String LOGS_DIR = System.getenv().getOrDefault(\"RESULT_ROOT\",\n-      System.getProperty(\"java.io.tmpdir\")) + \"/it-diagnosticlogs\";\n-  public static final String PV_ROOT = System.getenv().getOrDefault(\"PV_ROOT\",\n-      System.getProperty(\"java.io.tmpdir\") + \"/it-testspvroot\");\n+\n+  public static final String LOGS_DIR = RESULTS_BASE + \"/diagnotsics\";\n+  public static final String PV_ROOT = RESULTS_BASE + \"/pvroot\";\n+  public static final String RESULTS_ROOT = RESULTS_BASE + \"/workdir\";\n \n   // NGINX constants\n   public static final String NGINX_REPO_URL = \"https://kubernetes.github.io/ingress-nginx\";\n"}}, {"oid": "6e93cd8dbc3bf1aa5f1e3bc4ec6b3959f20ddc7c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6e93cd8dbc3bf1aa5f1e3bc4ec6b3959f20ddc7c", "message": "Address review comments on README.md", "committedDate": "2020-11-06T21:49:42Z", "type": "commit"}, {"oid": "2e4ee5eae34c5fac9310c920e464dbd2e512ec67", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2e4ee5eae34c5fac9310c920e464dbd2e512ec67", "message": "Merge LOG_DIR, WORK_DIR and RESULT_ROOT under one directory RESULTS_BASE", "committedDate": "2020-11-06T22:46:12Z", "type": "commit"}, {"oid": "09538de19cbb8fa26f86328c84c1233ccd9974ef", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/09538de19cbb8fa26f86328c84c1233ccd9974ef", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-09T15:37:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk0MjkxNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2030#discussion_r519942915", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  if (System.getenv(\"COLLECT_LOGS_ON_SUCCESS\").equals(\"true\")) {\n          \n          \n            \n                  if (System.getenv(\"COLLECT_LOGS_ON_SUCCESS\") != null && System.getenv(\"COLLECT_LOGS_ON_SUCCESS\").equalsIgnoreCase(\"true\")) {", "author": "vanajamukkara", "createdAt": "2020-11-09T16:26:37Z", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/IntegrationTestWatcher.java", "diffHunk": "@@ -265,7 +265,9 @@ public void handleAfterEachMethodExecutionException(ExtensionContext context, Th\n   public void testSuccessful(ExtensionContext context) {\n     printHeader(String.format(\"Test PASSED %s()\", methodName), \"+\");\n     if (System.getenv(\"COLLECT_LOGS_ON_SUCCESS\") != null) {\n-      collectLogs(context, \"test\");\n+      if (System.getenv(\"COLLECT_LOGS_ON_SUCCESS\").equals(\"true\")) {", "originalCommit": "2e4ee5eae34c5fac9310c920e464dbd2e512ec67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA1MDgwOQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2030#discussion_r520050809", "bodyText": "done", "author": "anpanigr", "createdAt": "2020-11-09T19:06:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk0MjkxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "b9506e281a4a4713d7995de22d42b5133b00f060", "chunk": "diff --git a/integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/IntegrationTestWatcher.java b/integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/IntegrationTestWatcher.java\nindex 4b26245e9e..e540bd48f9 100644\n--- a/integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/IntegrationTestWatcher.java\n+++ b/integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/IntegrationTestWatcher.java\n\n@@ -264,10 +264,9 @@ public class IntegrationTestWatcher implements\n   @Override\n   public void testSuccessful(ExtensionContext context) {\n     printHeader(String.format(\"Test PASSED %s()\", methodName), \"+\");\n-    if (System.getenv(\"COLLECT_LOGS_ON_SUCCESS\") != null) {\n-      if (System.getenv(\"COLLECT_LOGS_ON_SUCCESS\").equals(\"true\")) {\n-        collectLogs(context, \"test\");\n-      }\n+    if (System.getenv(\"COLLECT_LOGS_ON_SUCCESS\") != null\n+          && System.getenv(\"COLLECT_LOGS_ON_SUCCESS\").equalsIgnoreCase(\"true\")) {\n+      collectLogs(context, \"test\");\n     }\n   }\n \n"}}, {"oid": "b9506e281a4a4713d7995de22d42b5133b00f060", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b9506e281a4a4713d7995de22d42b5133b00f060", "message": "Addressed more review comments", "committedDate": "2020-11-09T19:38:28Z", "type": "commit"}, {"oid": "75be0f2d7871542f0b8b08675919f9c6be7d9602", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/75be0f2d7871542f0b8b08675919f9c6be7d9602", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-10T15:37:05Z", "type": "commit"}, {"oid": "99139e2a1ad6491bcd732374b3c7822db0c8b401", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/99139e2a1ad6491bcd732374b3c7822db0c8b401", "message": "Fixed the typo in env variable", "committedDate": "2020-11-10T18:52:10Z", "type": "commit"}, {"oid": "7a532e9ae9cad39b43cca2fa98e6823254ba2d96", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7a532e9ae9cad39b43cca2fa98e6823254ba2d96", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-10T18:52:15Z", "type": "commit"}, {"oid": "dbd55a1c1c986eac5f3537d635c382de23583743", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dbd55a1c1c986eac5f3537d635c382de23583743", "message": "Modified default for PV_ROOT", "committedDate": "2020-11-12T18:18:28Z", "type": "commit"}, {"oid": "da18f5c5b2e89c254a3b4cad1f8849ef49b6e7cd", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/da18f5c5b2e89c254a3b4cad1f8849ef49b6e7cd", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-12T18:19:48Z", "type": "commit"}, {"oid": "733f5a12416233a1e44c3069a3c72862de0c187c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/733f5a12416233a1e44c3069a3c72862de0c187c", "message": "Updated README.md  and modified the RESULT_ROOT default", "committedDate": "2020-11-13T19:27:28Z", "type": "commit"}, {"oid": "028ab19cf3e90f3ac8cdb4e3b13c4d29d8684073", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/028ab19cf3e90f3ac8cdb4e3b13c4d29d8684073", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-13T19:27:37Z", "type": "commit"}, {"oid": "e574800253ed371f6fd4f5ce6c7c80255f9af2a4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e574800253ed371f6fd4f5ce6c7c80255f9af2a4", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-16T13:35:16Z", "type": "commit"}, {"oid": "95fa0e6e5a7dc1b04e136a2abfe576364cf393a4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/95fa0e6e5a7dc1b04e136a2abfe576364cf393a4", "message": "More review comments on README.md", "committedDate": "2020-11-16T16:38:59Z", "type": "commit"}, {"oid": "622ea22b743e4721dd726123c5124a99fc1d078f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/622ea22b743e4721dd726123c5124a99fc1d078f", "message": "More review comments on README.md", "committedDate": "2020-11-16T22:16:32Z", "type": "commit"}, {"oid": "6719d05560ec120faeaf951ca9354543e6449491", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6719d05560ec120faeaf951ca9354543e6449491", "message": "Resolved more review comments", "committedDate": "2020-11-16T22:49:55Z", "type": "commit"}, {"oid": "027f9f9bc6c87e82f4c3c275661b78f46f6aa022", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/027f9f9bc6c87e82f4c3c275661b78f46f6aa022", "message": "More doc review comments", "committedDate": "2020-11-17T16:22:40Z", "type": "commit"}, {"oid": "7e41b9ed63b419e9b5653a4ee8b7a709326d9326", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7e41b9ed63b419e9b5653a4ee8b7a709326d9326", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into junit5-readme", "committedDate": "2020-11-17T16:22:55Z", "type": "commit"}, {"oid": "f9b83f8e0490f14fbad6cad438741feb8e2101b8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f9b83f8e0490f14fbad6cad438741feb8e2101b8", "message": "More doc review comments", "committedDate": "2020-11-17T16:36:50Z", "type": "commit"}, {"oid": "c7dadc79dfd77ef1af697a94e6dffa1b851ea5b2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c7dadc79dfd77ef1af697a94e6dffa1b851ea5b2", "message": "More doc change", "committedDate": "2020-11-17T19:28:07Z", "type": "commit"}]}