{"pr_number": 1798, "pr_title": "Write pod logs as string to the file", "pr_createdAt": "2020-07-13T17:50:35Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1798", "timeline": [{"oid": "45831f6ac009c3a294ff6906f25692f86edf5587", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/45831f6ac009c3a294ff6906f25692f86edf5587", "message": "use kubectl for pod logs", "committedDate": "2020-07-11T01:29:42Z", "type": "commit"}, {"oid": "0819b74ffc02a3fcb56d92519574ef472a94d24c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0819b74ffc02a3fcb56d92519574ef472a94d24c", "message": "write pod logs as string", "committedDate": "2020-07-11T04:09:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgyODk5Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1798#discussion_r453828993", "bodyText": "redundant check for boolean.", "author": "sankarpn", "createdAt": "2020-07-13T17:57:13Z", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/LoggingUtil.java", "diffHunk": "@@ -268,11 +269,25 @@ public static void collectLogs(String namespace, String resultDir) {\n    */\n   private static void writeToFile(Object obj, String resultDir, String fileName)\n       throws IOException {\n+    writeToFile(obj, resultDir, fileName, true);\n+  }\n+\n+  /**\n+   * Write the YAML representation of object or String to a file in the resultDir.\n+   *\n+   * @param obj to write to the file as YAML or String\n+   * @param resultDir directory in which to write the log file\n+   * @param fileName name of the log file\n+   * @param asYaml write as yaml or string\n+   * @throws IOException when write fails\n+   */\n+  private static void writeToFile(Object obj, String resultDir, String fileName, boolean asYaml)\n+      throws IOException {\n     LoggingFacade logger = getLogger();\n     logger.info(\"Generating {0}\", Paths.get(resultDir, fileName));\n     if (obj != null) {\n       Files.write(Paths.get(resultDir, fileName),\n-          dump(obj).getBytes(StandardCharsets.UTF_8)\n+          (asYaml == true ? dump(obj).getBytes(StandardCharsets.UTF_8) : ((String)obj).getBytes(StandardCharsets.UTF_8))", "originalCommit": "fe89686e8d6f4041e8b788c26996229b47b96520", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgzMjYyNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1798#discussion_r453832625", "bodyText": "can u clarify where is the redundancy and what do u suggest", "author": "vanajamukkara", "createdAt": "2020-07-13T18:03:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgyODk5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgzNDE5OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1798#discussion_r453834198", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      (asYaml == true ? dump(obj).getBytes(StandardCharsets.UTF_8) : ((String)obj).getBytes(StandardCharsets.UTF_8))\n          \n          \n            \n                      (asYaml ? dump(obj).getBytes(StandardCharsets.UTF_8) : ((String)obj).getBytes(StandardCharsets.UTF_8))", "author": "sankarpn", "createdAt": "2020-07-13T18:06:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgyODk5Mw=="}], "type": "inlineReview", "revised_code": {"commit": "835fd0fd2e7356ab58bee8e02ef483b6a23734e0", "chunk": "diff --git a/new-integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/LoggingUtil.java b/new-integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/LoggingUtil.java\nindex feb435e22d..7f368ca3e5 100644\n--- a/new-integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/LoggingUtil.java\n+++ b/new-integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/LoggingUtil.java\n\n@@ -287,7 +287,7 @@ public class LoggingUtil {\n     logger.info(\"Generating {0}\", Paths.get(resultDir, fileName));\n     if (obj != null) {\n       Files.write(Paths.get(resultDir, fileName),\n-          (asYaml == true ? dump(obj).getBytes(StandardCharsets.UTF_8) : ((String)obj).getBytes(StandardCharsets.UTF_8))\n+          (asYaml ? dump(obj).getBytes(StandardCharsets.UTF_8) : ((String)obj).getBytes(StandardCharsets.UTF_8))\n       );\n     } else {\n       logger.info(\"Nothing to write in {0} list is empty\", Paths.get(resultDir, fileName));\n"}}, {"oid": "a5ab8055be7d9427e529ed34a25c259c7c246116", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a5ab8055be7d9427e529ed34a25c259c7c246116", "message": "use k8s java api", "committedDate": "2020-07-14T00:17:19Z", "type": "commit"}, {"oid": "917e75c8d7c338b0ca5bbc23de506c718f91ca76", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/917e75c8d7c338b0ca5bbc23de506c718f91ca76", "message": "remove commented code", "committedDate": "2020-07-14T00:55:47Z", "type": "commit"}, {"oid": "fe89686e8d6f4041e8b788c26996229b47b96520", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fe89686e8d6f4041e8b788c26996229b47b96520", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into kubectl-for-podlogs", "committedDate": "2020-07-14T01:50:50Z", "type": "commit"}, {"oid": "835fd0fd2e7356ab58bee8e02ef483b6a23734e0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/835fd0fd2e7356ab58bee8e02ef483b6a23734e0", "message": "Update new-integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/LoggingUtil.java\n\nCo-authored-by: Sankar Periyathambi Neelakandan <45743425+sankarpn@users.noreply.github.com>", "committedDate": "2020-07-13T18:12:04Z", "type": "commit"}]}