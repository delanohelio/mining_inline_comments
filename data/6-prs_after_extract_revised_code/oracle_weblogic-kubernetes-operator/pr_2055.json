{"pr_number": 2055, "pr_title": "Owls 82748 - Allow for customization of the liveness probe for WebLogic Server pods", "pr_createdAt": "2020-11-17T17:43:41Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2055", "timeline": [{"oid": "855c06994d3727b43374bc3f766fa6d068772faf", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/855c06994d3727b43374bc3f766fa6d068772faf", "message": "Initial set of changes for OWLS-82748 to allow customization of liveness probe.", "committedDate": "2020-11-17T16:15:21Z", "type": "commit"}, {"oid": "c412776c3391b4f440ecce79afb058c5a88d0a0e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c412776c3391b4f440ecce79afb058c5a88d0a0e", "message": "Minor changes to script and javadoc.", "committedDate": "2020-11-17T17:27:43Z", "type": "commit"}, {"oid": "6fa5f3c75bb597f87409b820136160a5f0c582a4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6fa5f3c75bb597f87409b820136160a5f0c582a4", "message": "Changes to address PR review comments.", "committedDate": "2020-11-17T23:12:15Z", "type": "commit"}, {"oid": "f04cca58191a0cde585e8cf5bbdf4b79a29a2e66", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f04cca58191a0cde585e8cf5bbdf4b79a29a2e66", "message": "Added default value for liveness probe timeout and period and changed generated files.", "committedDate": "2020-11-18T20:12:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM5OTczNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2055#discussion_r526399737", "bodyText": "Can this text be changed to match the attribute description in domain-resource.md?  We want a 'kubectl explain' to be fully helpful...", "author": "tbarnes-us", "createdAt": "2020-11-18T20:28:36Z", "path": "operator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainSpec.java", "diffHunk": "@@ -137,6 +137,19 @@\n       + \"the directory configured in the WebLogic domain configuration. Defaults to true.\")\n   private Boolean httpAccessLogInLogHome;\n \n+  /**\n+   * Full path of an optional liveness probe custom script for WebLogic server pods. This optional field\n+   * is for advanced usage only and its value is not set by default. If the script specified by the value\n+   * of this field is not found, then it is ignored and existing liveness probe script will perform\n+   * its normal checks.", "originalCommit": "f04cca58191a0cde585e8cf5bbdf4b79a29a2e66", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e525a98051d0e8c5338e7b83a6f87f372c1c60a3", "chunk": "diff --git a/operator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainSpec.java b/operator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainSpec.java\nindex 610e8eb58c..682c79bac3 100644\n--- a/operator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainSpec.java\n+++ b/operator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainSpec.java\n\n@@ -138,15 +138,19 @@ public class DomainSpec extends BaseConfiguration {\n   private Boolean httpAccessLogInLogHome;\n \n   /**\n-   * Full path of an optional liveness probe custom script for WebLogic server pods. This optional field\n-   * is for advanced usage only and its value is not set by default. If the script specified by the value\n-   * of this field is not found, then it is ignored and existing liveness probe script will perform\n-   * its normal checks.\n+   * Full path of an optional liveness probe custom script for WebLogic server instance pods.\n+   * The existing liveness probe script `livenessProbe.sh` will invoke this custom script after the\n+   * existing script performs its own checks. This element is optional and is for advanced usage only.\n+   * Its value is not set by default. If the custom script fails with non-zero exit status,\n+   * pod will fail the liveness probe and Kubernetes will restart the container.\n+   * If the script specified by this element value is not found, then it is ignored.\n    */\n-  @Description(\"Full path of an optional liveness probe custom script for WebLogic server pods. \"\n-          + \"This optional field is for advanced usage only and its value is not set by default. \"\n-          + \"If the script specified by the value of this field is not found, then it is ignored \"\n-          + \"and existing liveness probe script will perform its normal checks.\"\n+  @Description(\"Full path of an optional liveness probe custom script for WebLogic server instance pods. \"\n+          + \"The existing liveness probe script `livenessProbe.sh` will invoke this custom script after the \"\n+          + \"existing script performs its own checks. This element is optional and is for advanced usage only. \"\n+          + \"Its value is not set by default. If the custom script fails with non-zero exit status, \"\n+          + \"pod will fail the liveness probe and Kubernetes will restart the container. \"\n+          + \"If the script specified by this element value is not found, then it is ignored.\"\n   )\n   private String livenessProbeCustomScript;\n \n"}}, {"oid": "e525a98051d0e8c5338e7b83a6f87f372c1c60a3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e525a98051d0e8c5338e7b83a6f87f372c1c60a3", "message": "Match domain spec attribute description with description in domain-resource.md.", "committedDate": "2020-11-18T20:47:50Z", "type": "commit"}, {"oid": "fa7e7abeb625ae06d7c75a57f9b0fa5576a45c3f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fa7e7abeb625ae06d7c75a57f9b0fa5576a45c3f", "message": "Added chapter for liveness/readiness probe customization and linked from architecture and domain resource.", "committedDate": "2020-11-19T18:02:20Z", "type": "commit"}, {"oid": "8ba1c9a1d1737791d846454325e61b93c7882f89", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8ba1c9a1d1737791d846454325e61b93c7882f89", "message": "Changes to address review comments.", "committedDate": "2020-11-19T21:28:47Z", "type": "commit"}]}