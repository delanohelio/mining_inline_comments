{"pr_number": 1663, "pr_title": "Fix Rolling Upgrade", "pr_createdAt": "2020-05-18T21:48:19Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663", "timeline": [{"oid": "51824d6a6dd3a0e43a5344885606e5956b44843b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/51824d6a6dd3a0e43a5344885606e5956b44843b", "message": "Initial changes to test application update", "committedDate": "2020-04-16T13:23:48Z", "type": "commit"}, {"oid": "c9dc18a32a815da9588a2f2f1705b47fabc96bcd", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c9dc18a32a815da9588a2f2f1705b47fabc96bcd", "message": "Add app assertions", "committedDate": "2020-04-16T13:28:12Z", "type": "commit"}, {"oid": "af2e168a0f5b2a7fad2f6df328cc815cd8badcfe", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/af2e168a0f5b2a7fad2f6df328cc815cd8badcfe", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test", "committedDate": "2020-04-17T15:13:41Z", "type": "commit"}, {"oid": "351bc8a1172bc7be3d41eeb24eb3d34ed2691519", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/351bc8a1172bc7be3d41eeb24eb3d34ed2691519", "message": "Save the current change", "committedDate": "2020-04-17T17:57:04Z", "type": "commit"}, {"oid": "9b50a627b242a87880a04a6f414caf3f59218b89", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9b50a627b242a87880a04a6f414caf3f59218b89", "message": "Update ItMiiDomain test", "committedDate": "2020-04-20T00:08:47Z", "type": "commit"}, {"oid": "c40df289fa37a0c16c336bbed026378fda407abb", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c40df289fa37a0c16c336bbed026378fda407abb", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test", "committedDate": "2020-04-20T18:07:52Z", "type": "commit"}, {"oid": "36f7b34daabe18d019ae4029af489b5086d2f351", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/36f7b34daabe18d019ae4029af489b5086d2f351", "message": "More changes", "committedDate": "2020-04-21T13:26:10Z", "type": "commit"}, {"oid": "8a1164effc5061aec4367b63e0bf4ea92f7e1453", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8a1164effc5061aec4367b63e0bf4ea92f7e1453", "message": "verify an app from a server pod", "committedDate": "2020-04-21T20:39:43Z", "type": "commit"}, {"oid": "888b1f371bd46698390739ba6e6357b70b3002ff", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/888b1f371bd46698390739ba6e6357b70b3002ff", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Command.java\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/CommandParams.java", "committedDate": "2020-04-21T20:45:10Z", "type": "commit"}, {"oid": "75d6028c66cba27976c044efa25ef3a0c8faad1d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/75d6028c66cba27976c044efa25ef3a0c8faad1d", "message": "add code to patch the domain with a new image and verify", "committedDate": "2020-04-22T17:07:23Z", "type": "commit"}, {"oid": "b2b169f89526f38c2deaf40a426bf67e2bb198de", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b2b169f89526f38c2deaf40a426bf67e2bb198de", "message": "Revert unintended changes", "committedDate": "2020-04-22T17:14:26Z", "type": "commit"}, {"oid": "c99fae4e407ba673db7d05d1c2afd2baf0fe2299", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c99fae4e407ba673db7d05d1c2afd2baf0fe2299", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWitValidation.java", "committedDate": "2020-04-22T17:52:28Z", "type": "commit"}, {"oid": "e76239b16e4ffbf7dbbce9ab4cdd7b6fc0b5adf6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e76239b16e4ffbf7dbbce9ab4cdd7b6fc0b5adf6", "message": "Fix merge issues", "committedDate": "2020-04-22T18:33:01Z", "type": "commit"}, {"oid": "dd2745f0a5fbb7ccd60004f10d66d7592cd97152", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dd2745f0a5fbb7ccd60004f10d66d7592cd97152", "message": "more cleanup", "committedDate": "2020-04-22T19:53:36Z", "type": "commit"}, {"oid": "fa28b4c77f3d8c9a5694a49dd877693fb5e5740d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fa28b4c77f3d8c9a5694a49dd877693fb5e5740d", "message": "Initial change for test number 6", "committedDate": "2020-04-22T20:38:59Z", "type": "commit"}, {"oid": "32d0238959c9528f1f83a486594c12f9ef96113c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/32d0238959c9528f1f83a486594c12f9ef96113c", "message": "Fix ExecCommand to allow both redirect and saveResults enabled the same time", "committedDate": "2020-04-22T23:31:31Z", "type": "commit"}, {"oid": "92ac716d86b1e08e42b052d9152c2f13d625a2a4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/92ac716d86b1e08e42b052d9152c2f13d625a2a4", "message": "Initial change for adding another app", "committedDate": "2020-04-23T14:30:22Z", "type": "commit"}, {"oid": "f3c9709577ac9da1d3a15dad2340c9e3493b65e7", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f3c9709577ac9da1d3a15dad2340c9e3493b65e7", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWitValidation.java", "committedDate": "2020-04-23T17:57:59Z", "type": "commit"}, {"oid": "d41efedb81bf0d4cd2137cf846a266da65dbfa95", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d41efedb81bf0d4cd2137cf846a266da65dbfa95", "message": "More impl for the second test case", "committedDate": "2020-04-23T21:12:40Z", "type": "commit"}, {"oid": "754bf4497d8fd23bc3b9771cb8aa0d0cef7ab3cf", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/754bf4497d8fd23bc3b9771cb8aa0d0cef7ab3cf", "message": "Add model file for the second app", "committedDate": "2020-04-23T21:40:32Z", "type": "commit"}, {"oid": "c5532b3d39e36c8062d588ced8abc7d5795da0e1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c5532b3d39e36c8062d588ced8abc7d5795da0e1", "message": "Minor cleanup", "committedDate": "2020-04-23T21:42:50Z", "type": "commit"}, {"oid": "be44a53d60cfe75b6ff342288af3c4e1ce399811", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/be44a53d60cfe75b6ff342288af3c4e1ce399811", "message": "Clean up comments", "committedDate": "2020-04-24T01:30:23Z", "type": "commit"}, {"oid": "0794ce024084b386c79c0548a480bc1b2ea5cc7e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0794ce024084b386c79c0548a480bc1b2ea5cc7e", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test", "committedDate": "2020-04-24T01:33:42Z", "type": "commit"}, {"oid": "6f586f78d2bbae877c30eb8038216779af76294f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6f586f78d2bbae877c30eb8038216779af76294f", "message": "Minor fix", "committedDate": "2020-04-24T01:46:52Z", "type": "commit"}, {"oid": "4d0b7bd398fdd7bf26902a85745bc510b6103378", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4d0b7bd398fdd7bf26902a85745bc510b6103378", "message": "Move delete images to the end of AfterAll", "committedDate": "2020-04-24T02:08:48Z", "type": "commit"}, {"oid": "3e714627616e7b5a40c04aa9aefd3b553dc22a89", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3e714627616e7b5a40c04aa9aefd3b553dc22a89", "message": "Update command to check response", "committedDate": "2020-04-24T15:59:30Z", "type": "commit"}, {"oid": "7cecb83fd842eb352317582c61a084fd64cd114a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7cecb83fd842eb352317582c61a084fd64cd114a", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "committedDate": "2020-04-24T17:32:01Z", "type": "commit"}, {"oid": "937c92372d9348213abd44909be4d72b1f2f223d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/937c92372d9348213abd44909be4d72b1f2f223d", "message": "Fix a merge error", "committedDate": "2020-04-24T18:06:42Z", "type": "commit"}, {"oid": "5bc4f4f82d81369273d5d5d59108d39c4396984d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5bc4f4f82d81369273d5d5d59108d39c4396984d", "message": "Fix exec command", "committedDate": "2020-04-24T18:29:38Z", "type": "commit"}, {"oid": "d3e17ca1bfcde308bae1a128edd5135af2aaa9f3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d3e17ca1bfcde308bae1a128edd5135af2aaa9f3", "message": "Add code for remote repo stuff for the new tests", "committedDate": "2020-04-24T18:59:22Z", "type": "commit"}, {"oid": "45c965af628f3056b9858b1d392cce7fe58d1ff8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/45c965af628f3056b9858b1d392cce7fe58d1ff8", "message": "Minor fixes", "committedDate": "2020-04-24T19:01:44Z", "type": "commit"}, {"oid": "cdc828239fa53cdb58e43ae2ce387319c37af5aa", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cdc828239fa53cdb58e43ae2ce387319c37af5aa", "message": "Cleanup", "committedDate": "2020-04-24T19:08:54Z", "type": "commit"}, {"oid": "2c729d7d8d1999cc5fef03fba0a3f3e0d564736d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2c729d7d8d1999cc5fef03fba0a3f3e0d564736d", "message": "Fix image name", "committedDate": "2020-04-24T19:15:05Z", "type": "commit"}, {"oid": "e5c5d46c0553584003cf170380d4173db6cb7447", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e5c5d46c0553584003cf170380d4173db6cb7447", "message": "Add an app file", "committedDate": "2020-04-24T20:08:33Z", "type": "commit"}, {"oid": "4094e4efc3e2b34370d2c937f6bf00fdd01dabb4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4094e4efc3e2b34370d2c937f6bf00fdd01dabb4", "message": "Make sure the thread joins before we save the stdout", "committedDate": "2020-04-24T20:34:57Z", "type": "commit"}, {"oid": "c243b49296820acca34af5192841491c0ac30802", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c243b49296820acca34af5192841491c0ac30802", "message": "Remove ItWitValidation class becuase the test in it has been copied to ItMiiDomain class", "committedDate": "2020-04-24T20:47:19Z", "type": "commit"}, {"oid": "3e2b97eb4dbeafbb4a14a737302c9b9efab4e5a5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3e2b97eb4dbeafbb4a14a737302c9b9efab4e5a5", "message": "Revert \"Remove ItWitValidation class becuase the test in it has been copied to ItMiiDomain class\"\n\nThis reverts commit c243b49296820acca34af5192841491c0ac30802.", "committedDate": "2020-04-24T21:25:09Z", "type": "commit"}, {"oid": "0591fbf66b92ce9dc993214815878aedadf4732c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0591fbf66b92ce9dc993214815878aedadf4732c", "message": "Debugging", "committedDate": "2020-04-25T02:43:11Z", "type": "commit"}, {"oid": "e8f50c7bca30d768a00eaf0473714504de12baf3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e8f50c7bca30d768a00eaf0473714504de12baf3", "message": "Fix pushed image name", "committedDate": "2020-04-25T03:10:34Z", "type": "commit"}, {"oid": "713a3bb6b43b97481990a100e073095a9e5a4a88", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/713a3bb6b43b97481990a100e073095a9e5a4a88", "message": "Turn off debugging", "committedDate": "2020-04-25T14:28:00Z", "type": "commit"}, {"oid": "5c6c391aac1b0baace56f358d44295b25c07f17d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5c6c391aac1b0baace56f358d44295b25c07f17d", "message": "Testing", "committedDate": "2020-04-25T20:51:39Z", "type": "commit"}, {"oid": "818af8094c15a8e85bd5a170ca078d3fc21dafad", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/818af8094c15a8e85bd5a170ca078d3fc21dafad", "message": "Change single check of expected condition to quick retry", "committedDate": "2020-04-27T15:56:25Z", "type": "commit"}, {"oid": "a2fb039a8730392531560b536b9880eaaf5c71b3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a2fb039a8730392531560b536b9880eaaf5c71b3", "message": "Check app on all managed servers", "committedDate": "2020-04-27T18:56:50Z", "type": "commit"}, {"oid": "9b9f6aa2b92e156fea3d3787071e2253d83e9963", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9b9f6aa2b92e156fea3d3787071e2253d83e9963", "message": "Check each pod to verify if the image has been patched", "committedDate": "2020-04-27T21:11:34Z", "type": "commit"}, {"oid": "9a9b2e4585474ab19a8e9d75104fcc6c453c562d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9a9b2e4585474ab19a8e9d75104fcc6c453c562d", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test", "committedDate": "2020-04-27T21:12:43Z", "type": "commit"}, {"oid": "1b3af6f97ce4eddf8ceb4b039b6b40013641599b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1b3af6f97ce4eddf8ceb4b039b6b40013641599b", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/ExecCommand.java", "committedDate": "2020-04-27T22:20:44Z", "type": "commit"}, {"oid": "5ca8fc5246cbcb851b6809c751d4ca343d12883f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5ca8fc5246cbcb851b6809c751d4ca343d12883f", "message": "Fine tuning", "committedDate": "2020-04-28T02:00:36Z", "type": "commit"}, {"oid": "c68d8ea12418fcff6bb73e67a2bb4f994da9c035", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c68d8ea12418fcff6bb73e67a2bb4f994da9c035", "message": "clean up", "committedDate": "2020-04-28T15:25:06Z", "type": "commit"}, {"oid": "6fde567ab1dec7596fb572438b788da77c03f722", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6fde567ab1dec7596fb572438b788da77c03f722", "message": "More cleanup", "committedDate": "2020-04-28T17:59:49Z", "type": "commit"}, {"oid": "e15b34b65cc85710bba70d3fefc221f8332ebcdb", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e15b34b65cc85710bba70d3fefc221f8332ebcdb", "message": "Continue work in progress", "committedDate": "2020-04-28T18:54:53Z", "type": "commit"}, {"oid": "b8a267c36e2d09af33d923af4515d60f83516b46", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b8a267c36e2d09af33d923af4515d60f83516b46", "message": "Add app continuous availability check and enable it with a system property", "committedDate": "2020-04-30T21:17:14Z", "type": "commit"}, {"oid": "497ad2759d14b73a6d20d02a8e4ac1a4ad5a819e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/497ad2759d14b73a6d20d02a8e4ac1a4ad5a819e", "message": "Clean up", "committedDate": "2020-04-30T21:33:21Z", "type": "commit"}, {"oid": "32cab300710b9395956599c77913dc16dd09aeb7", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/32cab300710b9395956599c77913dc16dd09aeb7", "message": "More javadoc", "committedDate": "2020-05-01T14:56:25Z", "type": "commit"}, {"oid": "1461b964db954c6ac3587d347a1c87aafb2fbcbe", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1461b964db954c6ac3587d347a1c87aafb2fbcbe", "message": "Merge branch 'develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java", "committedDate": "2020-05-01T18:25:04Z", "type": "commit"}, {"oid": "9570c024c5659630e84f9ce6e869df5f5c27d86f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9570c024c5659630e84f9ce6e869df5f5c27d86f", "message": "javadoc and cleanup", "committedDate": "2020-05-01T19:51:59Z", "type": "commit"}, {"oid": "87451a8c0fb4cad7b2d02260402fa3c90d63abff", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/87451a8c0fb4cad7b2d02260402fa3c90d63abff", "message": "Adjust timeout values", "committedDate": "2020-05-01T20:51:45Z", "type": "commit"}, {"oid": "41f6edeeab8d98af50141205f891f4701dcd9c6e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/41f6edeeab8d98af50141205f891f4701dcd9c6e", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java", "committedDate": "2020-05-01T21:21:20Z", "type": "commit"}, {"oid": "31cc7fd29c031fdd1a87d4b46b00a5e043b3969a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/31cc7fd29c031fdd1a87d4b46b00a5e043b3969a", "message": "Fine tuning", "committedDate": "2020-05-01T21:44:23Z", "type": "commit"}, {"oid": "5206a8905a457d4a46b284b7e4d78bff37bb3670", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5206a8905a457d4a46b284b7e4d78bff37bb3670", "message": "Minor fix", "committedDate": "2020-05-02T03:29:01Z", "type": "commit"}, {"oid": "ab8ecdfb3362fbd2a507f24da924cd6a3acfe172", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ab8ecdfb3362fbd2a507f24da924cd6a3acfe172", "message": "Use kubectl exec command for checking app continuous availability", "committedDate": "2020-05-02T07:16:06Z", "type": "commit"}, {"oid": "191ea28a650f06521ec87580354839569f556bd0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/191ea28a650f06521ec87580354839569f556bd0", "message": "clean up javadoc", "committedDate": "2020-05-02T07:34:34Z", "type": "commit"}, {"oid": "d15f52a885515e5dd87b5ae2dd078305cf071875", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d15f52a885515e5dd87b5ae2dd078305cf071875", "message": "Cleanup", "committedDate": "2020-05-03T14:30:44Z", "type": "commit"}, {"oid": "91718268821b8ff6526d906096e25bbec183499e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/91718268821b8ff6526d906096e25bbec183499e", "message": "Minor update", "committedDate": "2020-05-04T20:20:48Z", "type": "commit"}, {"oid": "89a9123951329addafd819650ad3cd20c511f0fd", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/89a9123951329addafd819650ad3cd20c511f0fd", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/Kubernetes.java", "committedDate": "2020-05-05T20:05:28Z", "type": "commit"}, {"oid": "bb8af2660c72e38eb737d7b335c30d5bbcbac1b1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bb8af2660c72e38eb737d7b335c30d5bbcbac1b1", "message": "Minor update of log messages", "committedDate": "2020-05-05T20:34:40Z", "type": "commit"}, {"oid": "f1c30255fa251e2db6646acc4c8af541102ca1f2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f1c30255fa251e2db6646acc4c8af541102ca1f2", "message": "More cleanup of log messages and comments", "committedDate": "2020-05-05T21:12:46Z", "type": "commit"}, {"oid": "d735a7e0e268ec0ecfabf6c4e6e0a889e50b8757", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d735a7e0e268ec0ecfabf6c4e6e0a889e50b8757", "message": "Address review comments", "committedDate": "2020-05-06T18:17:39Z", "type": "commit"}, {"oid": "072aa1f16708bf5c6b7b8cf7d980b5cfce9c7760", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/072aa1f16708bf5c6b7b8cf7d980b5cfce9c7760", "message": "Address one more comment", "committedDate": "2020-05-06T19:21:56Z", "type": "commit"}, {"oid": "3003cd59b6cd0a216ea31f5ddf8775368dbd2be6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3003cd59b6cd0a216ea31f5ddf8775368dbd2be6", "message": "Minor fix", "committedDate": "2020-05-06T20:41:24Z", "type": "commit"}, {"oid": "d67a4a9473bde201f727a873158bbea6a3ddda6b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d67a4a9473bde201f727a873158bbea6a3ddda6b", "message": "More logging", "committedDate": "2020-05-06T22:03:48Z", "type": "commit"}, {"oid": "745f8831775d3549bc842e5599bf5a9829106026", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/745f8831775d3549bc842e5599bf5a9829106026", "message": "Minor comment update", "committedDate": "2020-05-08T16:46:37Z", "type": "commit"}, {"oid": "b5c3a0d0c4df62015eaeca7df87106a9c18a051d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b5c3a0d0c4df62015eaeca7df87106a9c18a051d", "message": "Make log messages more informative", "committedDate": "2020-05-08T17:57:00Z", "type": "commit"}, {"oid": "ea8c9552404cb16479feabe225717430958e2f0a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ea8c9552404cb16479feabe225717430958e2f0a", "message": "Address a new review comment", "committedDate": "2020-05-08T21:18:14Z", "type": "commit"}, {"oid": "a8bded1674fb806172e05fea998111132570e6d5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a8bded1674fb806172e05fea998111132570e6d5", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/Kubernetes.java", "committedDate": "2020-05-08T21:49:30Z", "type": "commit"}, {"oid": "0e3f2412b84b59e609631183d56e7add5b966bef", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0e3f2412b84b59e609631183d56e7add5b966bef", "message": "Fix a minor merge error", "committedDate": "2020-05-08T22:01:51Z", "type": "commit"}, {"oid": "8a146531f22e0d9b6d8f92f7d40c04a262d810d6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8a146531f22e0d9b6d8f92f7d40c04a262d810d6", "message": "Address more review comments", "committedDate": "2020-05-11T23:57:38Z", "type": "commit"}, {"oid": "24f2579dd20243a773b3b44107772629f34a5de9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/24f2579dd20243a773b3b44107772629f34a5de9", "message": "Update javadoc", "committedDate": "2020-05-12T00:07:42Z", "type": "commit"}, {"oid": "34d51a17b29308277775f55c8b625e111fbe813f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/34d51a17b29308277775f55c8b625e111fbe813f", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/Domain.java", "committedDate": "2020-05-12T15:40:03Z", "type": "commit"}, {"oid": "c352f594a296e8685d9ac8aff883e216ec096101", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c352f594a296e8685d9ac8aff883e216ec096101", "message": "Fix merge issues", "committedDate": "2020-05-12T15:51:15Z", "type": "commit"}, {"oid": "6b2d51d4107d0e54366635b411646fdcd9e04d64", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6b2d51d4107d0e54366635b411646fdcd9e04d64", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/ImageBuilders.java", "committedDate": "2020-05-12T18:55:49Z", "type": "commit"}, {"oid": "3b4da2f19a4e6235f141dd77f3268f2a1d5c5f50", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3b4da2f19a4e6235f141dd77f3268f2a1d5c5f50", "message": "Update the push image code to check REPO_NAME", "committedDate": "2020-05-12T21:08:54Z", "type": "commit"}, {"oid": "294decc6e04c463406ddafbdb92ea0f3561ef917", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/294decc6e04c463406ddafbdb92ea0f3561ef917", "message": "remove double adding REMO_NAME", "committedDate": "2020-05-12T21:51:36Z", "type": "commit"}, {"oid": "70fbeb1b8ef8598db5aa0d36ed05c651864c24b5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/70fbeb1b8ef8598db5aa0d36ed05c651864c24b5", "message": "Change baseImageName to image Name", "committedDate": "2020-05-12T22:02:41Z", "type": "commit"}, {"oid": "034a9b740bcb9cca6fab6ede2ecb1f609c225d1a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/034a9b740bcb9cca6fab6ede2ecb1f609c225d1a", "message": "Merge remote-tracking branch 'origin/develop' into mii-app-patching-test\n\nConflicts:\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/TestConstants.java\n\tnew-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/TestActions.java", "committedDate": "2020-05-14T15:51:24Z", "type": "commit"}, {"oid": "d37858e2048e93323bdd4904f6ac6e25eda7dd78", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d37858e2048e93323bdd4904f6ac6e25eda7dd78", "message": "Fix a typo", "committedDate": "2020-05-17T13:31:13Z", "type": "commit"}, {"oid": "bc87889950bca020403d460ee7e581861cb83ed4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bc87889950bca020403d460ee7e581861cb83ed4", "message": "Rolling upgrade fix", "committedDate": "2020-05-18T19:55:56Z", "type": "commit"}, {"oid": "fec3e5e570b8c4684e72aeb70f15930c881d22ee", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fec3e5e570b8c4684e72aeb70f15930c881d22ee", "message": "Merge branch 'mii-app-patching-test' of https://github.com/oracle/weblogic-kubernetes-operator into rolling-upgrade-chg\n\npull latest changes", "committedDate": "2020-05-18T19:56:41Z", "type": "commit"}, {"oid": "fd1fb515a9033962f1ebdce5926f616e2ffec349", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fd1fb515a9033962f1ebdce5926f616e2ffec349", "message": "pull latest from develop", "committedDate": "2020-05-18T20:49:47Z", "type": "commit"}, {"oid": "29f097e075a9d59a4239b569a60ef39b37334d9f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/29f097e075a9d59a4239b569a60ef39b37334d9f", "message": "Remove newline from file", "committedDate": "2020-05-18T21:26:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMwNzA3Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663#discussion_r427307072", "bodyText": "The problem with the call to 'normalize' is that it puts control of the internals of domain matching outside the domain classes. We should really fix this by correcting the equals methods to use the effective values of things rather than the raw fields.", "author": "russgold", "createdAt": "2020-05-19T13:35:59Z", "path": "operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java", "diffHunk": "@@ -513,6 +513,7 @@ public void makeRightDomainPresence(\n           // change just by looking at metadata.generation.\n \n           // Has the spec actually changed? We will get watch events for status updates\n+          DomainPresenceControl.normalizeDomainSpec(current.getSpec());", "originalCommit": "29f097e075a9d59a4239b569a60ef39b37334d9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzYxNDM0NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663#discussion_r427614344", "bodyText": "Removed DomainPresenceControl class and used effective default values for 'image' and 'imagePullPolicy' directly in DomainSpec class.  DomainSpec.equals() method uses those effective values rather than raw fields by calling getImage() and getImagePullPolicy().", "author": "lennyphan", "createdAt": "2020-05-19T21:35:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMwNzA3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "9204abbd7c488dc4df18619bf64294e64446bcbf", "chunk": "diff --git a/operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java b/operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java\nindex 1b4430f53e..a4f002c49e 100644\n--- a/operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java\n+++ b/operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java\n\n@@ -513,7 +512,6 @@ public class DomainProcessorImpl implements DomainProcessor {\n           // change just by looking at metadata.generation.\n \n           // Has the spec actually changed? We will get watch events for status updates\n-          DomainPresenceControl.normalizeDomainSpec(current.getSpec());\n           if (!explicitRecheck && spec != null && spec.equals(current.getSpec())) {\n             // nothing in the spec has changed, but status likely did; update current\n             existing.setDomain(domain);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMxMTE1Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663#discussion_r427311156", "bodyText": "Functional programming structures can be much easier to read. In this case,\n   Optional.ofNullable(servers.poll()).ifPresent(serverToRestart -> restarts.add(serverToRestart));\n\nmakes it clearer that you are adding the result of the call to servers.poll() to the collection when it exists. It takes some getting used to, but the result is easier-to-read code.", "author": "russgold", "createdAt": "2020-05-19T13:41:31Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java", "diffHunk": "@@ -208,31 +208,18 @@ public NextAction apply(Packet packet) {\n \n       LOGGER.info(MessageKeys.ROLLING_SERVERS, dom.getDomainUid(), servers, readyServers);\n \n-      int countToRestartNow = Math.max(1, countReady - dom.getMinAvailable(clusterName));\n+      int countToRestartNow = countReady - dom.getMinAvailable(clusterName);\n       Collection<StepAndPacket> restarts = new ArrayList<>();\n       for (int i = 0; i < countToRestartNow; i++) {\n-        restarts.add(new StepAndPacket(new RestartOneClusteredServerStep(servers, null), packet));\n+        StepAndPacket serverToRestart = servers.poll();", "originalCommit": "29f097e075a9d59a4239b569a60ef39b37334d9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzYxNDY0Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663#discussion_r427614647", "bodyText": "Updated with your functional programming structure.", "author": "lennyphan", "createdAt": "2020-05-19T21:36:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMxMTE1Ng=="}], "type": "inlineReview", "revised_code": {"commit": "f4c8a53d8b8812335d84317bebc1f1dc4b0098f1", "chunk": "diff --git a/operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java b/operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java\nindex 49b6256792..2f3b3e2847 100644\n--- a/operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java\n+++ b/operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java\n\n@@ -211,15 +213,17 @@ public class RollingHelper {\n       int countToRestartNow = countReady - dom.getMinAvailable(clusterName);\n       Collection<StepAndPacket> restarts = new ArrayList<>();\n       for (int i = 0; i < countToRestartNow; i++) {\n-        StepAndPacket serverToRestart = servers.poll();\n-        if (serverToRestart != null) {\n-          restarts.add(serverToRestart);\n-        }\n+        Optional.ofNullable(servers.poll())\n+            .ifPresent(serverToRestart -> restarts.add(serverToRestart));\n       }\n \n-      return restarts.isEmpty()\n-          ? (servers.isEmpty() ? doNext(packet) : doDelay(this, packet, 10, TimeUnit.SECONDS))\n-          : doForkJoin(this, packet, restarts);\n+      if (!restarts.isEmpty()) {\n+        return doForkJoin(this, packet, restarts);\n+      } else if (!servers.isEmpty()) {\n+        return doDelay(this, packet, DELAY_IN_SECONDS, TimeUnit.SECONDS);\n+      } else {\n+        return doNext(packet);\n+      }\n     }\n   }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMxNjc3MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663#discussion_r427316770", "bodyText": "Please avoid magic numbers in the code - constants are clearer. In addition, nested ternaries can be hard to read. This would be easier to follow as a set of if's, choosing the simplest case first, such as:\n    if (!restarts.isEmpty()) {\n        doForkJoin(this, packet, restarts);\n    } else if (!servers.isEmpty()) {\n        doDelay(this, packet, DELAY_IN_SECONDS, TimeUnit.SECONDS);\n    } else {\n        doNext(packet);\n    }", "author": "russgold", "createdAt": "2020-05-19T13:49:00Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java", "diffHunk": "@@ -208,31 +208,18 @@ public NextAction apply(Packet packet) {\n \n       LOGGER.info(MessageKeys.ROLLING_SERVERS, dom.getDomainUid(), servers, readyServers);\n \n-      int countToRestartNow = Math.max(1, countReady - dom.getMinAvailable(clusterName));\n+      int countToRestartNow = countReady - dom.getMinAvailable(clusterName);\n       Collection<StepAndPacket> restarts = new ArrayList<>();\n       for (int i = 0; i < countToRestartNow; i++) {\n-        restarts.add(new StepAndPacket(new RestartOneClusteredServerStep(servers, null), packet));\n+        StepAndPacket serverToRestart = servers.poll();\n+        if (serverToRestart != null) {\n+          restarts.add(serverToRestart);\n+        }\n       }\n-      return doForkJoin(getNext(), packet, restarts);\n-    }\n-  }\n-\n-  private static class RestartOneClusteredServerStep extends Step {\n-    private final Queue<StepAndPacket> servers;\n-\n-    public RestartOneClusteredServerStep(Queue<StepAndPacket> servers, Step next) {\n-      super(next);\n-      this.servers = servers;\n-    }\n \n-    @Override\n-    public NextAction apply(Packet packet) {\n-      StepAndPacket serverToRestart = servers.poll();\n-      if (serverToRestart != null) {\n-        Collection<StepAndPacket> col = Collections.singleton(serverToRestart);\n-        return doForkJoin(this, packet, col);\n-      }\n-      return doNext(packet);\n+      return restarts.isEmpty()", "originalCommit": "29f097e075a9d59a4239b569a60ef39b37334d9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzYxNDg2Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663#discussion_r427614867", "bodyText": "Updated with your suggestion to make it easier to read.", "author": "lennyphan", "createdAt": "2020-05-19T21:36:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMxNjc3MA=="}], "type": "inlineReview", "revised_code": {"commit": "f4c8a53d8b8812335d84317bebc1f1dc4b0098f1", "chunk": "diff --git a/operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java b/operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java\nindex 49b6256792..2f3b3e2847 100644\n--- a/operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java\n+++ b/operator/src/main/java/oracle/kubernetes/operator/helpers/RollingHelper.java\n\n@@ -211,15 +213,17 @@ public class RollingHelper {\n       int countToRestartNow = countReady - dom.getMinAvailable(clusterName);\n       Collection<StepAndPacket> restarts = new ArrayList<>();\n       for (int i = 0; i < countToRestartNow; i++) {\n-        StepAndPacket serverToRestart = servers.poll();\n-        if (serverToRestart != null) {\n-          restarts.add(serverToRestart);\n-        }\n+        Optional.ofNullable(servers.poll())\n+            .ifPresent(serverToRestart -> restarts.add(serverToRestart));\n       }\n \n-      return restarts.isEmpty()\n-          ? (servers.isEmpty() ? doNext(packet) : doDelay(this, packet, 10, TimeUnit.SECONDS))\n-          : doForkJoin(this, packet, restarts);\n+      if (!restarts.isEmpty()) {\n+        return doForkJoin(this, packet, restarts);\n+      } else if (!servers.isEmpty()) {\n+        return doDelay(this, packet, DELAY_IN_SECONDS, TimeUnit.SECONDS);\n+      } else {\n+        return doNext(packet);\n+      }\n     }\n   }\n }\n"}}, {"oid": "f4c8a53d8b8812335d84317bebc1f1dc4b0098f1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f4c8a53d8b8812335d84317bebc1f1dc4b0098f1", "message": "Functional programming changes to make code be much easier to read based on code review", "committedDate": "2020-05-19T16:11:41Z", "type": "commit"}, {"oid": "9204abbd7c488dc4df18619bf64294e64446bcbf", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9204abbd7c488dc4df18619bf64294e64446bcbf", "message": "Correct DomainSpec.equals() to use the effective values of 'image' and 'imagePullPolicy' and remove DomainPresenceControl class", "committedDate": "2020-05-19T21:29:59Z", "type": "commit"}, {"oid": "b1b1d184ca3a8646dcad27b8e3808403c7d72471", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b1b1d184ca3a8646dcad27b8e3808403c7d72471", "message": "Merge remote-tracking branch 'origin/develop' into rolling-upgrade-chg\n\nMerge latest changes from develop branch", "committedDate": "2020-05-19T21:31:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzYzODUzOQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663#discussion_r427638539", "bodyText": "You can remove the entire if", "author": "rjeberhard", "createdAt": "2020-05-19T22:34:18Z", "path": "operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java", "diffHunk": "@@ -490,7 +490,6 @@ public void makeRightDomainPresence(\n     DomainSpec spec = null;\n     if (domain != null) {", "originalCommit": "9204abbd7c488dc4df18619bf64294e64446bcbf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY0NjA1Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663#discussion_r427646053", "bodyText": "Is it ever possible for 'domain == null' ?  We seem to be verifying domain is not null in a few different places so just wanted to make sure I understand correctly.", "author": "lennyphan", "createdAt": "2020-05-19T22:56:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzYzODUzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzczNjcwOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1663#discussion_r427736708", "bodyText": "Removed the entire if and moved it closer to where we compare DomainSpec equality.", "author": "lennyphan", "createdAt": "2020-05-20T04:38:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzYzODUzOQ=="}], "type": "inlineReview", "revised_code": {"commit": "26480af782c34d181c8159f2a45122110438e79f", "chunk": "diff --git a/operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java b/operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java\nindex a4f002c49e..0394125b65 100644\n--- a/operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java\n+++ b/operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java\n\n@@ -487,10 +487,6 @@ public class DomainProcessorImpl implements DomainProcessor {\n       boolean isDeleting,\n       boolean isWillInterrupt) {\n     Domain domain = info.getDomain();\n-    DomainSpec spec = null;\n-    if (domain != null) {\n-      spec = domain.getSpec();\n-    }\n     String ns = info.getNamespace();\n     String domainUid = info.getDomainUid();\n \n"}}, {"oid": "26480af782c34d181c8159f2a45122110438e79f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/26480af782c34d181c8159f2a45122110438e79f", "message": "Moved if statement based on review comment", "committedDate": "2020-05-20T04:34:00Z", "type": "commit"}]}