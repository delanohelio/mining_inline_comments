{"pr_number": 2044, "pr_title": "fixed cluster name  in anti affinity object", "pr_createdAt": "2020-11-10T01:37:56Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2044", "timeline": [{"oid": "38f2327bc1aa26e38e1ba0b814dea8647e559cd6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/38f2327bc1aa26e38e1ba0b814dea8647e559cd6", "message": "added nfs", "committedDate": "2020-10-30T23:01:15Z", "type": "commit"}, {"oid": "ff2ebe7b04edbc409b6a7de51538b31802a5970a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ff2ebe7b04edbc409b6a7de51538b31802a5970a", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into okefss", "committedDate": "2020-11-02T22:07:06Z", "type": "commit"}, {"oid": "b7f013ffefc76ee243d1ec481bda75f1ff78b3d0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b7f013ffefc76ee243d1ec481bda75f1ff78b3d0", "message": "added antiaffity", "committedDate": "2020-11-03T00:09:05Z", "type": "commit"}, {"oid": "733c9c985274f8d12ff6a2f3c16c0d67e9dbed4f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/733c9c985274f8d12ff6a2f3c16c0d67e9dbed4f", "message": "added syncronized", "committedDate": "2020-11-03T00:33:43Z", "type": "commit"}, {"oid": "423edbcf71fe7cf940990e9b5406b3d0f2b51e2c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/423edbcf71fe7cf940990e9b5406b3d0f2b51e2c", "message": "fixed typo", "committedDate": "2020-11-03T01:50:26Z", "type": "commit"}, {"oid": "443247aa28ef3de1fd14370e37b496435d2cc2d2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/443247aa28ef3de1fd14370e37b496435d2cc2d2", "message": "fixed typo1", "committedDate": "2020-11-03T02:08:32Z", "type": "commit"}, {"oid": "413db648f5de0358da36ac05a391b0b9293af104", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/413db648f5de0358da36ac05a391b0b9293af104", "message": "fixed domain crd for itpodtemplate", "committedDate": "2020-11-03T23:56:06Z", "type": "commit"}, {"oid": "0282e7d3468dafd55ce41331b95a5976a083d3c6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0282e7d3468dafd55ce41331b95a5976a083d3c6", "message": "style", "committedDate": "2020-11-04T01:48:43Z", "type": "commit"}, {"oid": "d822469592757b7ee6ced7a4b0c72c40441f54e2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d822469592757b7ee6ced7a4b0c72c40441f54e2", "message": "added storageclass to pv", "committedDate": "2020-11-04T01:55:22Z", "type": "commit"}, {"oid": "2872b8fe6042c2757e8f557e2a5a9a800e772a0a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2872b8fe6042c2757e8f557e2a5a9a800e772a0a", "message": "added storageclass to pvc", "committedDate": "2020-11-04T02:12:19Z", "type": "commit"}, {"oid": "88b9289980bfecaecf2142966ba1dcc279ae62e0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/88b9289980bfecaecf2142966ba1dcc279ae62e0", "message": "added storageclass to pvc1", "committedDate": "2020-11-04T02:15:26Z", "type": "commit"}, {"oid": "dfdd43f8492558b523f9260243ceda468c14a3b6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dfdd43f8492558b523f9260243ceda468c14a3b6", "message": "style", "committedDate": "2020-11-04T16:49:56Z", "type": "commit"}, {"oid": "22e82cee2304d7b248b9a2ba281302df135b6d25", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/22e82cee2304d7b248b9a2ba281302df135b6d25", "message": "fixed hostpath", "committedDate": "2020-11-04T19:28:15Z", "type": "commit"}, {"oid": "163f32519d22eed49a4f57cbf767d61c6409f98f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/163f32519d22eed49a4f57cbf767d61c6409f98f", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into okefss", "committedDate": "2020-11-04T20:55:40Z", "type": "commit"}, {"oid": "05375bba3060abeddfd45b4b6333a0df981f77ec", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/05375bba3060abeddfd45b4b6333a0df981f77ec", "message": "removed fss related code", "committedDate": "2020-11-05T02:15:44Z", "type": "commit"}, {"oid": "3f5fc625dbb5772083fbf46de4286a6a0e5de184", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3f5fc625dbb5772083fbf46de4286a6a0e5de184", "message": "style", "committedDate": "2020-11-05T16:03:16Z", "type": "commit"}, {"oid": "f048f7ddbb539ccfaadb0f8cc0a24f0d1c2c95d4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f048f7ddbb539ccfaadb0f8cc0a24f0d1c2c95d4", "message": "removed unneeded file", "committedDate": "2020-11-06T17:06:45Z", "type": "commit"}, {"oid": "70272a95e6015e7229449e0b87d169d21ef09791", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/70272a95e6015e7229449e0b87d169d21ef09791", "message": "resolved dev merge", "committedDate": "2020-11-06T17:10:05Z", "type": "commit"}, {"oid": "02ba7682359012a06e80ba77ad884dc900b33e7d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/02ba7682359012a06e80ba77ad884dc900b33e7d", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into okeaaf", "committedDate": "2020-11-09T23:40:28Z", "type": "commit"}, {"oid": "017af80509f85a9c17aac8a5601ee9466ca1d900", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/017af80509f85a9c17aac8a5601ee9466ca1d900", "message": "fixed cluster name", "committedDate": "2020-11-09T23:49:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDUxMjA5Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2044#discussion_r520512093", "bodyText": "Just FYI... The bug in this is that you have \"($CLUSTER_NAME)\" instead of \"$(CLUSTER_NAME)\"", "author": "rjeberhard", "createdAt": "2020-11-10T12:06:12Z", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/CommonTestUtils.java", "diffHunk": "@@ -3270,29 +3272,26 @@ public static String getIntrospectJobName(String domainUid) {\n    * @param domain custom resource object\n    */\n   public static synchronized void setPodAntiAffinity(Domain domain) {\n-    V1PodAntiAffinity podAntiAffinity = new V1PodAntiAffinity()\n-        .addPreferredDuringSchedulingIgnoredDuringExecutionItem(\n-            new V1WeightedPodAffinityTerm()\n-                .weight(100)\n-                .podAffinityTerm(new V1PodAffinityTerm()\n-                    .topologyKey(\"kubernetes.io/hostname\")\n-                    .labelSelector(new V1LabelSelector()\n-                        .addMatchExpressionsItem(new V1LabelSelectorRequirement()\n-                            .key(\"weblogic.clusterName\")\n-                            .operator(\"In\")\n-                            .addValuesItem(\"($CLUSTER_NAME)\")))", "originalCommit": "017af80509f85a9c17aac8a5601ee9466ca1d900", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc4MDU2NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2044#discussion_r520780564", "bodyText": "corrected and verified in https://build.weblogick8s.org:8443/job/wko-oke-nightly-seqential/34", "author": "marinakog", "createdAt": "2020-11-10T18:32:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDUxMjA5Mw=="}], "type": "inlineReview", "revised_code": {"commit": "9403c659aaba97d3df0d6a92bbd976e4a066422b", "chunk": "diff --git a/integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/CommonTestUtils.java b/integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/CommonTestUtils.java\nindex 9593e781fe..bccf607dc7 100644\n--- a/integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/CommonTestUtils.java\n+++ b/integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/CommonTestUtils.java\n\n@@ -3290,7 +3290,7 @@ public class CommonTestUtils {\n                                               .addMatchExpressionsItem(new V1LabelSelectorRequirement()\n                                                   .key(\"weblogic.clusterName\")\n                                                   .operator(\"In\")\n-                                                  .addValuesItem(cluster.getClusterName())))\n+                                                  .addValuesItem(\"$(CLUSTER_NAME)\")))\n                                       )))));\n \n             }\n"}}, {"oid": "9403c659aaba97d3df0d6a92bbd976e4a066422b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9403c659aaba97d3df0d6a92bbd976e4a066422b", "message": "replaced with var", "committedDate": "2020-11-10T17:57:45Z", "type": "commit"}]}