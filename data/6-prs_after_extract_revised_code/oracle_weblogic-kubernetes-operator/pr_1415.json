{"pr_number": 1415, "pr_title": "Model in image schema", "pr_createdAt": "2020-01-31T19:25:38Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1415", "timeline": [{"oid": "602b0ba24db82f55534eff3ffe68ef7d23301503", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/602b0ba24db82f55534eff3ffe68ef7d23301503", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image-schema", "committedDate": "2020-01-28T14:47:47Z", "type": "commit"}, {"oid": "5cfa491d345285e35c612a3c5f1b44fb73771e9e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5cfa491d345285e35c612a3c5f1b44fb73771e9e", "message": "Schema updates in progress", "committedDate": "2020-01-28T23:17:34Z", "type": "commit"}, {"oid": "83469289bbe26d60239d46925b02bd12286545ff", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/83469289bbe26d60239d46925b02bd12286545ff", "message": "Next set of schema updates", "committedDate": "2020-01-30T20:34:20Z", "type": "commit"}, {"oid": "f967a3bfbe0070716eb31ecd68489246fd484df8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f967a3bfbe0070716eb31ecd68489246fd484df8", "message": "Work in progress", "committedDate": "2020-01-30T22:11:27Z", "type": "commit"}, {"oid": "f629f8bbe08945ccf351cb5c47607b4936083d27", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f629f8bbe08945ccf351cb5c47607b4936083d27", "message": "Move final model schema items", "committedDate": "2020-01-31T17:24:20Z", "type": "commit"}, {"oid": "62e2b2dfc60558c7d9fbf28b8c8a302de92c24ee", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/62e2b2dfc60558c7d9fbf28b8c8a302de92c24ee", "message": "Update docs, tests, and samples", "committedDate": "2020-01-31T18:04:57Z", "type": "commit"}, {"oid": "7f719150ad295b4e211c78a46ced6796ebc7ae34", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7f719150ad295b4e211c78a46ced6796ebc7ae34", "message": "Update model-in-image domain template", "committedDate": "2020-01-31T19:09:06Z", "type": "commit"}, {"oid": "f4e02c04b36ee24cb221d358728f279e117d1e97", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f4e02c04b36ee24cb221d358728f279e117d1e97", "message": "Merge remote-tracking branch 'origin/model-in-image' into model-in-image-schema", "committedDate": "2020-01-31T19:29:23Z", "type": "commit"}, {"oid": "483d19afa73504f5076a7f2d1c9eb38cef3ac4f8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/483d19afa73504f5076a7f2d1c9eb38cef3ac4f8", "message": "Remove unneeded fields", "committedDate": "2020-02-03T17:24:06Z", "type": "commit"}, {"oid": "be3999a38476c93ecdf910304af7ea0ccb244a59", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/be3999a38476c93ecdf910304af7ea0ccb244a59", "message": "Merge remote-tracking branch 'origin/model-in-image' into model-in-image-schema", "committedDate": "2020-02-04T21:17:31Z", "type": "commit"}, {"oid": "0081fbab1b17baab6e995fa3b5e5503c4b0b9841", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0081fbab1b17baab6e995fa3b5e5503c4b0b9841", "message": "Some more moves", "committedDate": "2020-02-05T15:07:58Z", "type": "commit"}, {"oid": "d7393c1edcd5f71ef64a0ac2be570f63f3e5b7c5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d7393c1edcd5f71ef64a0ac2be570f63f3e5b7c5", "message": "Doc updates", "committedDate": "2020-02-05T15:18:16Z", "type": "commit"}, {"oid": "5b92147bd03b0dbb8ea91e9b40331d3c070f455f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5b92147bd03b0dbb8ea91e9b40331d3c070f455f", "message": "More schema and doc updates", "committedDate": "2020-02-05T16:33:41Z", "type": "commit"}, {"oid": "0ae1559486ba4adefce2517949b28174410d2f73", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0ae1559486ba4adefce2517949b28174410d2f73", "message": "Review comments", "committedDate": "2020-02-05T17:51:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ1NzEwNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1415#discussion_r375457105", "bodyText": "I think we agreed to change this to walletFileSecret and walletPasswordSecret per slack thread https://proddev-paas-fmw.slack.com/archives/CKFA73SNM/p1580504991015300, so we'll need to env vars OPSS_WALLET_FILE_SECRET_NAME and OPSS_WALLET_PASSWORD_SECRET_NAME.   Also Johnny's RCU code will eventially need to change to look in the right locations and use the right env vars to get these values.    Finally, the expected attribute within each secret will be 'walletFile' and 'walletPassword' respectively.", "author": "tbarnes-us", "createdAt": "2020-02-05T19:20:36Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/JobHelper.java", "diffHunk": "@@ -249,12 +249,8 @@ private String getAsServiceName() {\n       addEnvVar(vars, IntrospectorJobEnvVars.NAMESPACE, getNamespace());\n       addEnvVar(vars, IntrospectorJobEnvVars.INTROSPECT_HOME, getIntrospectHome());\n       addEnvVar(vars, IntrospectorJobEnvVars.CREDENTIALS_SECRET_NAME, getWebLogicCredentialsSecretName());\n-      addEnvVar(vars, IntrospectorJobEnvVars.OPSS_WALLET_SECRET_NAME, getOpssWalletSecretName());\n-      addEnvVar(vars, IntrospectorJobEnvVars.WDT_ENCRYPTION_PASSPHRASE_NAME, getWdtEncryptPassPhraseName());\n-      addEnvVar(vars, IntrospectorJobEnvVars.ROLLBACK_IF_REQUIRE_RESTART,\n-          Boolean.toString(isRollBackIfRequireRestart()));\n-      addEnvVar(vars, IntrospectorJobEnvVars.USE_ONLINE_UPDATE, Boolean.toString(isUseOnlineUpdate()));\n-      addEnvVar(vars, IntrospectorJobEnvVars.KEEP_JRF_SCHEMA, Boolean.toString(isKeepJrfSchema()));\n+      addEnvVar(vars, IntrospectorJobEnvVars.OPSS_KEY_SECRET_NAME, getOpssWalletSecretName());", "originalCommit": "0ae1559486ba4adefce2517949b28174410d2f73", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "82be30844193aab8993d5abfc5e0ed1a583e524c", "chunk": "diff --git a/operator/src/main/java/oracle/kubernetes/operator/helpers/JobHelper.java b/operator/src/main/java/oracle/kubernetes/operator/helpers/JobHelper.java\nindex 39613f65b0..0a2d6fe2b8 100644\n--- a/operator/src/main/java/oracle/kubernetes/operator/helpers/JobHelper.java\n+++ b/operator/src/main/java/oracle/kubernetes/operator/helpers/JobHelper.java\n\n@@ -249,7 +249,7 @@ public class JobHelper {\n       addEnvVar(vars, IntrospectorJobEnvVars.NAMESPACE, getNamespace());\n       addEnvVar(vars, IntrospectorJobEnvVars.INTROSPECT_HOME, getIntrospectHome());\n       addEnvVar(vars, IntrospectorJobEnvVars.CREDENTIALS_SECRET_NAME, getWebLogicCredentialsSecretName());\n-      addEnvVar(vars, IntrospectorJobEnvVars.OPSS_KEY_SECRET_NAME, getOpssWalletSecretName());\n+      addEnvVar(vars, IntrospectorJobEnvVars.OPSS_KEY_SECRET_NAME, getOpssWalletPasswordSecretName());\n       addEnvVar(vars, IntrospectorJobEnvVars.WDT_ENCRYPTION_PASSPHRASE_NAME, getWdtEncryptSecretName());\n       addEnvVar(vars, IntrospectorJobEnvVars.WDT_DOMAIN_TYPE, getWdtDomainType());\n \n"}}, {"oid": "5e59c31626a29adfcab73fca3398d596e26f5383", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5e59c31626a29adfcab73fca3398d596e26f5383", "message": "Merge remote-tracking branch 'origin/model-in-image' into model-in-image-schema", "committedDate": "2020-02-07T15:42:13Z", "type": "commit"}, {"oid": "82be30844193aab8993d5abfc5e0ed1a583e524c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/82be30844193aab8993d5abfc5e0ed1a583e524c", "message": "last schema name changes", "committedDate": "2020-02-12T19:13:55Z", "type": "commit"}, {"oid": "caf39a64c946720572972670501ae88826323f9f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/caf39a64c946720572972670501ae88826323f9f", "message": "Missing file", "committedDate": "2020-02-12T19:18:07Z", "type": "commit"}, {"oid": "342be352512afff752d26408f13d760cf6954149", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/342be352512afff752d26408f13d760cf6954149", "message": "More doc updates", "committedDate": "2020-02-12T20:10:11Z", "type": "commit"}, {"oid": "5d01315afc31bcbb84a763cd79de7d0df36b10f0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5d01315afc31bcbb84a763cd79de7d0df36b10f0", "message": "Missed file", "committedDate": "2020-02-12T20:13:42Z", "type": "commit"}, {"oid": "e56eb503b99fd89b57421e632370284587e610d5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e56eb503b99fd89b57421e632370284587e610d5", "message": "Review comments", "committedDate": "2020-02-13T19:01:50Z", "type": "commit"}, {"oid": "37647c1429b47e3ff073eddfb7d1c86eb377a942", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/37647c1429b47e3ff073eddfb7d1c86eb377a942", "message": "Merge remote-tracking branch 'origin/model-in-image' into model-in-image-schema", "committedDate": "2020-02-13T19:13:02Z", "type": "commit"}, {"oid": "29aa333ed3df78ccc08f94155cfd3df22bc25928", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/29aa333ed3df78ccc08f94155cfd3df22bc25928", "message": "Clarify some more defaults", "committedDate": "2020-02-13T21:31:07Z", "type": "commit"}]}