{"pr_number": 1746, "pr_title": "Standardize behavior of introspectVersion and restartVersion", "pr_createdAt": "2020-06-18T18:10:28Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1746", "timeline": [{"oid": "a8856f8318379c5294c5d26234ca1c0f66fbe943", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a8856f8318379c5294c5d26234ca1c0f66fbe943", "message": "Standardize behavior of introspectVersion and restartVersion", "committedDate": "2020-06-18T18:07:52Z", "type": "commit"}, {"oid": "5af61143b6817c4c2621259296c26ee37756970e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5af61143b6817c4c2621259296c26ee37756970e", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into owls_82785", "committedDate": "2020-06-18T23:21:02Z", "type": "commit"}, {"oid": "e5640ae87fa56011e36403cd5f7d7f8de8e17495", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e5640ae87fa56011e36403cd5f7d7f8de8e17495", "message": "Fix MII md5 checks so that they ignore whitespace", "committedDate": "2020-06-19T17:22:09Z", "type": "commit"}, {"oid": "80f847163e224b154a3d42c1c1597a8b8f7fb30b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/80f847163e224b154a3d42c1c1597a8b8f7fb30b", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into owls_82785", "committedDate": "2020-06-19T18:30:09Z", "type": "commit"}, {"oid": "a3da9a69d07ce8f6a4feb67456370c7fda5fa561", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a3da9a69d07ce8f6a4feb67456370c7fda5fa561", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into owls_82785", "committedDate": "2020-06-24T19:02:02Z", "type": "commit"}, {"oid": "06d5a169655a1ad18264eed1388b87d3fd0d037b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/06d5a169655a1ad18264eed1388b87d3fd0d037b", "message": "Force introspection to happen before updating or creating server pods", "committedDate": "2020-06-24T19:04:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTExNjU3Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1746#discussion_r445116572", "bodyText": "checkstyle demanded that I add javadoc to this method, even though it is private. That doesn't seem right to me.", "author": "russgold", "createdAt": "2020-06-24T19:18:56Z", "path": "operator/src/main/java/oracle/kubernetes/operator/MakeRightDomainOperation.java", "diffHunk": "@@ -0,0 +1,70 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.kubernetes.operator;\n+\n+import java.util.Optional;\n+\n+import oracle.kubernetes.operator.helpers.DomainPresenceInfo;\n+import oracle.kubernetes.operator.work.Packet;\n+import oracle.kubernetes.operator.work.Step;\n+import oracle.kubernetes.weblogic.domain.model.Domain;\n+\n+import static oracle.kubernetes.operator.ProcessingConstants.MAKE_RIGHT_DOMAIN_OPERATION;\n+\n+/**\n+ * Defines the operation to bring a running domain into compliance with its domain resource and introspection result.\n+ */\n+public interface MakeRightDomainOperation {\n+\n+  /**\n+   * Defines the operation as pertaining to the deletion of a domain.\n+   */\n+  MakeRightDomainOperation forDeletion();\n+\n+  MakeRightDomainOperation withExplicitRecheck();\n+\n+  MakeRightDomainOperation withDeleting(boolean deleting);\n+\n+  MakeRightDomainOperation interrupt();\n+\n+  void execute();\n+\n+  Step createSteps();\n+\n+  void setInspectionRun();\n+\n+  boolean wasInspectionRun();\n+\n+  private static boolean wasInspectionRun(Packet packet) {\n+    return fromPacket(packet).map(MakeRightDomainOperation::wasInspectionRun).orElse(false);\n+  }\n+\n+  static void recordInspection(Packet packet) {\n+    fromPacket(packet).ifPresent(MakeRightDomainOperation::setInspectionRun);\n+  }\n+\n+  static boolean isInspectionRequired(Packet packet) {\n+    return domainRequiresIntrospectionInCurrentMakeRight(packet) && !wasInspectionRun(packet);\n+  }\n+\n+  /**", "originalCommit": "06d5a169655a1ad18264eed1388b87d3fd0d037b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "a42ae3df6995add174fbe863a98738c1041e6cff", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a42ae3df6995add174fbe863a98738c1041e6cff", "message": "Update introspectVersion label even when introspect fails to produce any topology", "committedDate": "2020-06-25T01:41:51Z", "type": "commit"}, {"oid": "8e7a40024d49883248893b6d8505f9f55e61713c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8e7a40024d49883248893b6d8505f9f55e61713c", "message": "Add unit test for case of repeated introspect after pod-change-induced introspect", "committedDate": "2020-06-25T07:25:10Z", "type": "commit"}, {"oid": "c83d531703da341b62311876194d135876c0b53a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c83d531703da341b62311876194d135876c0b53a", "message": "Rename introspectLabel, use null for force", "committedDate": "2020-06-25T17:45:41Z", "type": "commit"}, {"oid": "20ca9b639b80ad294fe86fbe452a1c84cc7b7f81", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/20ca9b639b80ad294fe86fbe452a1c84cc7b7f81", "message": "Use null for force", "committedDate": "2020-06-25T19:48:19Z", "type": "commit"}, {"oid": "a54f36e868c1ae52ef1b1f530b49f8cdceed4213", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a54f36e868c1ae52ef1b1f530b49f8cdceed4213", "message": "Don't run introspection when scaling up if no other changes", "committedDate": "2020-06-25T19:48:51Z", "type": "commit"}, {"oid": "c44a3458c78cc0631de857db8be9007e6e1288b4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c44a3458c78cc0631de857db8be9007e6e1288b4", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into owls_82785", "committedDate": "2020-06-25T20:25:48Z", "type": "commit"}, {"oid": "8b3fbd82a764ddf3cee360f41769eefb051ca45d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8b3fbd82a764ddf3cee360f41769eefb051ca45d", "message": "Owls 82147 (#1764)\n\n* Detect env var change during MII re-instrospect (MD5 check).\r\n\r\n* minor changes: change env var name, add comment\r\n\r\n* minor change: change method name\r\n\r\n* minor changes: unit test helper renames, etc", "committedDate": "2020-06-26T13:18:18Z", "type": "commit"}, {"oid": "79e54dbc618551344ca5a9b0f3375435cbc4d8c4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/79e54dbc618551344ca5a9b0f3375435cbc4d8c4", "message": "Merge branch 'develop' into owls_82785", "committedDate": "2020-06-26T17:14:56Z", "type": "commit"}]}