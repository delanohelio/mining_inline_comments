{"pr_number": 2080, "pr_title": "Operator Upgrade from v3.0.4 to develop", "pr_createdAt": "2020-12-01T18:35:04Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2080", "timeline": [{"oid": "2e499959b74fe9b87ada0c46df80d74a89500e3c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2e499959b74fe9b87ada0c46df80d74a89500e3c", "message": "Upgrade test from v3.0.4", "committedDate": "2020-12-01T18:23:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzcyMDE5NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2080#discussion_r533720195", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                logger.info(\"Deploying webapp {0} to admin server\", archivePath);\n          \n          \n            \n                logger.info(\"Deploying webapp {0} to admin server and cluster\", archivePath);", "author": "vanajamukkara", "createdAt": "2020-12-01T21:04:14Z", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItOperatorUpgrade.java", "diffHunk": "@@ -490,65 +499,74 @@ private void checkDomainStarted(String domainUid, String domainNamespace) {\n   }\n \n   private void deployAndAccessApplication(String namespace, String externalServiceNameSuffix) {\n-    logger.info(\"Getting node port for admin server default channel\");\n-    int serviceNodePort = assertDoesNotThrow(() ->\n-            getServiceNodePort(namespace, getExternalServicePodName(adminServerPodName,\n-                externalServiceNameSuffix), \"default\"),\n-        \"Getting admin server node port failed\");\n-    assertNotEquals(-1, serviceNodePort, \"admin server default node port is not valid\");\n-\n     Path archivePath = Paths.get(ITTESTS_DIR, \"../src/integration-tests/apps/testwebapp.war\");\n     logger.info(\"Deploying application {0} to domain {1} cluster target cluster-1 in namespace {2}\",\n         archivePath, domainUid, namespace);\n-    ExecResult result = DeployUtil.deployUsingRest(K8S_NODEPORT_HOST,\n-        String.valueOf(serviceNodePort),\n-        ADMIN_USERNAME_DEFAULT, ADMIN_PASSWORD_DEFAULT,\n-        \"cluster-1\", archivePath, null, \"testwebapp\");\n-    assertNotNull(result, \"Application deployment failed\");\n-    logger.info(\"Application deployment returned {0}\", result.toString());\n-    assertEquals(\"202\", result.stdout(), \"Deployment didn't return HTTP status code 202\");\n+    logger.info(\"Deploying webapp {0} to admin server\", archivePath);", "originalCommit": "2e499959b74fe9b87ada0c46df80d74a89500e3c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "be02f457de87c7a5c1dcc48e986ae506c6d534dc", "chunk": "diff --git a/integration-tests/src/test/java/oracle/weblogic/kubernetes/ItOperatorUpgrade.java b/integration-tests/src/test/java/oracle/weblogic/kubernetes/ItOperatorUpgrade.java\nindex c097ca323f..480b758b4c 100644\n--- a/integration-tests/src/test/java/oracle/weblogic/kubernetes/ItOperatorUpgrade.java\n+++ b/integration-tests/src/test/java/oracle/weblogic/kubernetes/ItOperatorUpgrade.java\n\n@@ -502,7 +502,7 @@ public class ItOperatorUpgrade {\n     Path archivePath = Paths.get(ITTESTS_DIR, \"../src/integration-tests/apps/testwebapp.war\");\n     logger.info(\"Deploying application {0} to domain {1} cluster target cluster-1 in namespace {2}\",\n         archivePath, domainUid, namespace);\n-    logger.info(\"Deploying webapp {0} to admin server\", archivePath);\n+    logger.info(\"Deploying webapp {0} to admin server and cluster\", archivePath);\n     deployUsingWlst(adminServerPodName, \n           \"7001\", ADMIN_USERNAME_DEFAULT, ADMIN_PASSWORD_DEFAULT, \n           \"cluster-1,admin-server\", archivePath, namespace);\n"}}, {"oid": "be02f457de87c7a5c1dcc48e986ae506c6d534dc", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/be02f457de87c7a5c1dcc48e986ae506c6d534dc", "message": "Addressed review comments", "committedDate": "2020-12-01T21:44:45Z", "type": "commit"}, {"oid": "a421b22aa14e830075b61fa875d8775a6422755f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a421b22aa14e830075b61fa875d8775a6422755f", "message": "Removed v2.5.0 Upgrade usecase", "committedDate": "2020-12-03T20:08:56Z", "type": "commit"}]}