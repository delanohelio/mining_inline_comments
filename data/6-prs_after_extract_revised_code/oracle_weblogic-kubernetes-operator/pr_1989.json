{"pr_number": 1989, "pr_title": "copy out scalingAction.log from admin pod when scaling cluster with WLDF", "pr_createdAt": "2020-10-14T16:26:23Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989", "timeline": [{"oid": "7c542978d17f8ca1084fdb284bf1dc66eff1e38d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7c542978d17f8ca1084fdb284bf1dc66eff1e38d", "message": "copy scalingAction.sh from admin server pod", "committedDate": "2020-10-13T22:07:30Z", "type": "commit"}, {"oid": "61317976f908e9e781b0a78e2ff756c48ca41aa3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/61317976f908e9e781b0a78e2ff756c48ca41aa3", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into xc-owls85322", "committedDate": "2020-10-13T22:08:49Z", "type": "commit"}, {"oid": "91f7807250224bdd144d44bc26947a0fd5076e95", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/91f7807250224bdd144d44bc26947a0fd5076e95", "message": "add retry when copyfile from pod", "committedDate": "2020-10-13T22:24:24Z", "type": "commit"}, {"oid": "faf00959684974a1c9c70f90505cd1f1be501cb4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/faf00959684974a1c9c70f90505cd1f1be501cb4", "message": "cleanup", "committedDate": "2020-10-14T00:00:02Z", "type": "commit"}, {"oid": "bcc79c7848da1b338075a07194dcc3d8c0fe5399", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bcc79c7848da1b338075a07194dcc3d8c0fe5399", "message": "cleanup", "committedDate": "2020-10-14T00:14:17Z", "type": "commit"}, {"oid": "06783a01d1ef294db5a4d8c1bc5d2b0a7d1d6f3c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/06783a01d1ef294db5a4d8c1bc5d2b0a7d1d6f3c", "message": "update javadoc", "committedDate": "2020-10-14T04:00:10Z", "type": "commit"}, {"oid": "11de1a23b9225f7f18e7370579496784ca3686f8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/11de1a23b9225f7f18e7370579496784ca3686f8", "message": "add copyFileFromPod to FileUtils", "committedDate": "2020-10-14T17:51:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNTI1Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989#discussion_r504905252", "bodyText": "Even though copyFileFromPod() was moved to FileUtils, you just going to call it directly in Kubernetes or shouldn't this be changed to use FileUtils?", "author": "lennyphan", "createdAt": "2020-10-14T19:01:14Z", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/Domain.java", "diffHunk": "@@ -684,4 +698,33 @@ private static boolean executeCommandOnPod(V1Pod pod,\n \n     return true;\n   }\n+\n+  /**\n+   * Copy a file from Kubernetes pod to local filesystem.\n+   * @param namespace namespace of the pod\n+   * @param pod name of the pod where the file is copied from\n+   * @param container name of the container\n+   * @param srcPath source file location on the pod\n+   * @param destPath destination file location in local filesystem\n+   * @return true if no exception thrown, false otherwise\n+   */\n+  private static boolean copyFileFromPod(String namespace,\n+                                         String pod,\n+                                         String container,\n+                                         String srcPath,\n+                                         Path destPath) {\n+    try {\n+      getLogger().info(\"Copy file {0} from pod {1} in namespace {2} to {3}\", srcPath, pod, namespace, destPath);\n+      Kubernetes.copyFileFromPod(namespace, pod, container, srcPath, destPath);", "originalCommit": "11de1a23b9225f7f18e7370579496784ca3686f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkyMjQxOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989#discussion_r504922418", "bodyText": "in Domain.java, all other methods are directly called from Kubernetes.java. That's why I did not change to use FileUtils.java", "author": "xiancao", "createdAt": "2020-10-14T19:32:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNTI1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkzOTE2NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989#discussion_r504939164", "bodyText": "Still doesn't make sense to me to even have it in FileUtils if we're not going to call through it.  copyFileToPod() is only called through FileUtils when I do a search so makes sense to me to do the same.  My .02", "author": "lennyphan", "createdAt": "2020-10-14T20:02:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNTI1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTAwMTM1Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989#discussion_r505001356", "bodyText": "changed to use FileUtils", "author": "xiancao", "createdAt": "2020-10-14T21:59:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNTI1Mg=="}], "type": "inlineReview", "revised_code": {"commit": "4a74ff2eafcf805b658287551de226adbe28ae36", "chunk": "diff --git a/integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/Domain.java b/integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/Domain.java\nindex 44b8c642dc..702830f8b0 100644\n--- a/integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/Domain.java\n+++ b/integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/Domain.java\n\n@@ -715,7 +717,7 @@ public class Domain {\n                                          Path destPath) {\n     try {\n       getLogger().info(\"Copy file {0} from pod {1} in namespace {2} to {3}\", srcPath, pod, namespace, destPath);\n-      Kubernetes.copyFileFromPod(namespace, pod, container, srcPath, destPath);\n+      FileUtils.copyFileFromPod(namespace, pod, container, srcPath, destPath);\n     } catch (IOException ioex) {\n       getLogger().severe(\"Got IOException while copying file {0} from pod {1} in namespace {2}, exception: {3}\",\n           srcPath, pod, namespace, ioex.getStackTrace());\n"}}, {"oid": "4a74ff2eafcf805b658287551de226adbe28ae36", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4a74ff2eafcf805b658287551de226adbe28ae36", "message": "address Lenny's comments", "committedDate": "2020-10-14T21:58:11Z", "type": "commit"}]}