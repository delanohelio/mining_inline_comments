{"pr_number": 1703, "pr_title": "[SCB-1861] fix config kie value parsing errors", "pr_createdAt": "2020-04-09T07:32:38Z", "pr_url": "https://github.com/apache/servicecomb-java-chassis/pull/1703", "timeline": [{"oid": "d5ecf00960c3e2af0d63be3a0b02b0aede421740", "url": "https://github.com/apache/servicecomb-java-chassis/commit/d5ecf00960c3e2af0d63be3a0b02b0aede421740", "message": "[SCB-1861] fix config kie value parsing errors", "committedDate": "2020-04-09T07:30:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjAyMTU0Mg==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1703#discussion_r406021542", "bodyText": "why change the package", "author": "GuoYL123", "createdAt": "2020-04-09T07:54:56Z", "path": "dynamic-config/config-kie/src/main/java/org/apache/servicecomb/config/kie/client/KieUtil.java", "diffHunk": "@@ -29,14 +29,15 @@\n import java.util.List;\n import java.util.Map;\n import java.util.Properties;\n+\n+import org.apache.commons.lang3.StringUtils;\n import org.apache.servicecomb.config.kie.model.KVDoc;\n import org.apache.servicecomb.config.kie.model.KVResponse;\n import org.apache.servicecomb.config.kie.model.ValueType;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.beans.factory.config.YamlPropertiesFactoryBean;\n import org.springframework.core.io.ByteArrayResource;\n-import org.springframework.util.StringUtils;", "originalCommit": "d5ecf00960c3e2af0d63be3a0b02b0aede421740", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjA5NDYyOA==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1703#discussion_r406094628", "bodyText": "prefer using commons lang, checkout other usages.", "author": "liubao68", "createdAt": "2020-04-09T10:00:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjAyMTU0Mg=="}], "type": "inlineReview", "revised_code": null}, {"oid": "5d2f51ece4c5f32ab1f6dcef0fa361358608f0d9", "url": "https://github.com/apache/servicecomb-java-chassis/commit/5d2f51ece4c5f32ab1f6dcef0fa361358608f0d9", "message": "[SCB-1848] refactor: modify config-kie module to use the new mechanism to intialize client", "committedDate": "2020-04-09T09:45:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE1NTc0NQ==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1703#discussion_r406155745", "bodyText": "why this place use CountDownLatch ?", "author": "GuoYL123", "createdAt": "2020-04-09T12:04:00Z", "path": "dynamic-config/config-kie/src/main/java/org/apache/servicecomb/config/kie/client/KieClient.java", "diffHunk": "@@ -127,29 +99,38 @@ public void destroy() {\n     @Override\n     public void run() {\n       try {\n-        refreshConfig();\n+        CountDownLatch latch = new CountDownLatch(1);", "originalCommit": "5d2f51ece4c5f32ab1f6dcef0fa361358608f0d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjIwMzQ3NQ==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1703#discussion_r406203475", "bodyText": "make refreshConfig synchronouse. In pull mode, when next pull happends, if this is asynchronouse,  it is possible two pulls in the same time. Alghough this is rarely happen\nIn long polling mode, to prevent from refreshConfig caught some error, and next long polling not happen. The older implementations do not handle execpetion properly and long polling will exit when timeout happens.", "author": "liubao68", "createdAt": "2020-04-09T13:28:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE1NTc0NQ=="}], "type": "inlineReview", "revised_code": null}]}