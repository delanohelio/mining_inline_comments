{"pr_number": 1869, "pr_title": "[SCB-2035]Use vertx Json and Pojo to replace own serizalization mechanism", "pr_createdAt": "2020-07-07T01:31:07Z", "pr_url": "https://github.com/apache/servicecomb-java-chassis/pull/1869", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU3NjY1Ng==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1869#discussion_r452576656", "bodyText": "public static field should be final.", "author": "liubao68", "createdAt": "2020-07-10T01:36:09Z", "path": "service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java", "diffHunk": "@@ -41,86 +39,68 @@\n \n   private static final Logger LOGGER = LoggerFactory.getLogger(ClientUtil.class);\n \n-  private static ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\n+  public static ClientUtil INSTANCE = new ClientUtil();", "originalCommit": "941b62d14f124bf5d9f2cf0cda7b107f67838593", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU5NDIxMA==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1869#discussion_r452594210", "bodyText": "agreed.", "author": "jungan21", "createdAt": "2020-07-10T02:49:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU3NjY1Ng=="}], "type": "inlineReview", "revised_code": {"commit": "a65b6ebe9186e64876fc603e4c0fc6438a3fa712", "chunk": "diff --git a/service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java b/service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java\nindex 1a6ad08f1..9b1fc9fda 100644\n--- a/service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java\n+++ b/service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java\n\n@@ -39,20 +39,20 @@ public class ClientUtil {\n \n   private static final Logger LOGGER = LoggerFactory.getLogger(ClientUtil.class);\n \n-  public static ClientUtil INSTANCE = new ClientUtil();\n+  public static final ClientUtil INSTANCE = new ClientUtil();\n \n-  private static ServerMicroserviceInstance serviceInstanceForHeartbeat = null;\n+  private ServerMicroserviceInstance serviceInstanceForHeartbeat;\n \n   private MulticastSocket multicastSocket;\n   private InetAddress group;\n \n-  public static ServerMicroserviceInstance getServiceInstanceForHeartbeat() {\n+  public ServerMicroserviceInstance getServiceInstanceForHeartbeat() {\n     return serviceInstanceForHeartbeat;\n   }\n \n-  public static void setServiceInstanceForHeartbeat(\n+  public void setServiceInstanceForHeartbeat(\n       ServerMicroserviceInstance serviceInstanceForHeartbeat) {\n-    ClientUtil.serviceInstanceForHeartbeat = serviceInstanceForHeartbeat;\n+      this.serviceInstanceForHeartbeat = serviceInstanceForHeartbeat;\n   }\n \n   private ClientUtil(){}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU3NzM5OQ==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1869#discussion_r452577399", "bodyText": "This is a sgingletan class, a static member seems a little bit hard to figure out if it is correct.", "author": "liubao68", "createdAt": "2020-07-10T01:39:29Z", "path": "service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java", "diffHunk": "@@ -41,86 +39,68 @@\n \n   private static final Logger LOGGER = LoggerFactory.getLogger(ClientUtil.class);\n \n-  private static ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\n+  public static ClientUtil INSTANCE = new ClientUtil();\n \n-  private static Microservice microserviceSelf = new Microservice();\n+  private static ServerMicroserviceInstance serviceInstanceForHeartbeat = null;", "originalCommit": "941b62d14f124bf5d9f2cf0cda7b107f67838593", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU5NTgxOA==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1869#discussion_r452595818", "bodyText": "changed to non-static ....", "author": "jungan21", "createdAt": "2020-07-10T02:56:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU3NzM5OQ=="}], "type": "inlineReview", "revised_code": {"commit": "a65b6ebe9186e64876fc603e4c0fc6438a3fa712", "chunk": "diff --git a/service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java b/service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java\nindex 1a6ad08f1..9b1fc9fda 100644\n--- a/service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java\n+++ b/service-registry/registry-zero-config/src/main/java/org/apache/servicecomb/zeroconfig/client/ClientUtil.java\n\n@@ -39,20 +39,20 @@ public class ClientUtil {\n \n   private static final Logger LOGGER = LoggerFactory.getLogger(ClientUtil.class);\n \n-  public static ClientUtil INSTANCE = new ClientUtil();\n+  public static final ClientUtil INSTANCE = new ClientUtil();\n \n-  private static ServerMicroserviceInstance serviceInstanceForHeartbeat = null;\n+  private ServerMicroserviceInstance serviceInstanceForHeartbeat;\n \n   private MulticastSocket multicastSocket;\n   private InetAddress group;\n \n-  public static ServerMicroserviceInstance getServiceInstanceForHeartbeat() {\n+  public ServerMicroserviceInstance getServiceInstanceForHeartbeat() {\n     return serviceInstanceForHeartbeat;\n   }\n \n-  public static void setServiceInstanceForHeartbeat(\n+  public void setServiceInstanceForHeartbeat(\n       ServerMicroserviceInstance serviceInstanceForHeartbeat) {\n-    ClientUtil.serviceInstanceForHeartbeat = serviceInstanceForHeartbeat;\n+      this.serviceInstanceForHeartbeat = serviceInstanceForHeartbeat;\n   }\n \n   private ClientUtil(){}\n"}}, {"oid": "a65b6ebe9186e64876fc603e4c0fc6438a3fa712", "url": "https://github.com/apache/servicecomb-java-chassis/commit/a65b6ebe9186e64876fc603e4c0fc6438a3fa712", "message": "[SCB-2035]Use vertx Json and Pojo model to replace own serizalization mechanism", "committedDate": "2020-07-10T02:55:40Z", "type": "commit"}]}