{"pr_number": 1658, "pr_title": "[SCB-1816] print the instance endpoints in the end of the start up log", "pr_createdAt": "2020-03-23T14:23:16Z", "pr_url": "https://github.com/apache/servicecomb-java-chassis/pull/1658", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5NDczMQ==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1658#discussion_r396494731", "bodyText": "\u6362\u6210io.vertx.core.spi.json.JsonCodec#toString(java.lang.Object)\uff0c\u5c31\u4e0d\u7528\u81ea\u5df1\u5199\u4e86", "author": "wujimin", "createdAt": "2020-03-23T14:32:21Z", "path": "core/src/main/java/org/apache/servicecomb/core/bootup/ServiceInformationCollector.java", "diffHunk": "@@ -29,7 +31,16 @@ public String collect() {\n         + \"\\n\" + \"Version: \" + RegistryUtils.getMicroservice().getVersion()\n         + \"\\n\" + \"Environment: \" + RegistryUtils.getMicroservice().getEnvironment()\n         + \"\\n\" + \"Service ID: \" + RegistryUtils.getMicroserviceInstance().getServiceId()\n-        + \"\\n\" + \"Instance ID: \" + RegistryUtils.getMicroserviceInstance().getInstanceId();\n+        + \"\\n\" + \"Instance ID: \" + RegistryUtils.getMicroserviceInstance().getInstanceId()\n+        + \"\\n\" + \"Endpoints: \" + getEndpoints();\n+  }\n+\n+  private String getEndpoints() {\n+    try {\n+      return JsonUtils.writeValueAsString(RegistryUtils.getMicroserviceInstance().getEndpoints());", "originalCommit": "a054ebd166f4dd65865c27ec00ab907f1b249959", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUwMTMxNQ==", "url": "https://github.com/apache/servicecomb-java-chassis/pull/1658#discussion_r396501315", "bodyText": "Done, please review it", "author": "yhs0092", "createdAt": "2020-03-23T14:41:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5NDczMQ=="}], "type": "inlineReview", "revised_code": {"commit": "ed049177a1bbbf4265871a5cbeaa2c6cf9b762fa", "chunk": "diff --git a/core/src/main/java/org/apache/servicecomb/core/bootup/ServiceInformationCollector.java b/core/src/main/java/org/apache/servicecomb/core/bootup/ServiceInformationCollector.java\nindex 39e32f7e5..78e05b7e5 100644\n--- a/core/src/main/java/org/apache/servicecomb/core/bootup/ServiceInformationCollector.java\n+++ b/core/src/main/java/org/apache/servicecomb/core/bootup/ServiceInformationCollector.java\n\n@@ -36,11 +35,7 @@ public class ServiceInformationCollector implements BootUpInformationCollector {\n   }\n \n   private String getEndpoints() {\n-    try {\n-      return JsonUtils.writeValueAsString(RegistryUtils.getMicroserviceInstance().getEndpoints());\n-    } catch (JsonProcessingException e) {\n-      return \"unknown format endpoints\";\n-    }\n+    return JsonCodec.INSTANCE.toString(RegistryUtils.getMicroserviceInstance().getEndpoints());\n   }\n \n   @Override\n"}}, {"oid": "ed049177a1bbbf4265871a5cbeaa2c6cf9b762fa", "url": "https://github.com/apache/servicecomb-java-chassis/commit/ed049177a1bbbf4265871a5cbeaa2c6cf9b762fa", "message": "[SCB-1816] print the instance endpoints in the end of the start up log", "committedDate": "2020-03-23T14:38:02Z", "type": "commit"}, {"oid": "ed049177a1bbbf4265871a5cbeaa2c6cf9b762fa", "url": "https://github.com/apache/servicecomb-java-chassis/commit/ed049177a1bbbf4265871a5cbeaa2c6cf9b762fa", "message": "[SCB-1816] print the instance endpoints in the end of the start up log", "committedDate": "2020-03-23T14:38:02Z", "type": "forcePushed"}]}