{"pr_number": 7829, "pr_title": "Issue #7757: Update AbstractChecks to log DetailAST - PackageAnnotation", "pr_createdAt": "2020-03-11T14:08:32Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/7829", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMDUxMg==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392230512", "bodyText": "please add comment to explain why it is not compiled.", "author": "romani", "createdAt": "2020-03-13T13:35:29Z", "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/package-info.java", "diffHunk": "@@ -0,0 +1,2 @@\n+@Deprecated", "originalCommit": "41e38e5c262715af90f9787c9e3708130cf757bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQyNDk1NA==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392424954", "bodyText": "Done.", "author": "wilcoln", "createdAt": "2020-03-13T19:21:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMDUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3MDQ3OA==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392470478", "bodyText": "from point #7829 (comment)\nerror: package annotations should be in file package-info.java , this is exactly good file for annotation.\nplease show message from javac, and briefly inline it in comment", "author": "romani", "createdAt": "2020-03-13T20:54:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMDUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3MjU4NA==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392472584", "bodyText": "This one is just fine indeed, there's no compilation error with javac.\nI'm removing it from directory. Sorry.\nThanks for reviewing.", "author": "wilcoln", "createdAt": "2020-03-13T20:57:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMDUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3NjUyMA==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392476520", "bodyText": "Done.", "author": "wilcoln", "createdAt": "2020-03-13T21:06:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMDUxMg=="}], "type": "inlineReview", "revised_code": {"commit": "ae03824733571181e93c031876cf6c3142fa78e8", "chunk": "diff --git a/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/package-info.java b/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/package-info.java\nindex fc603728d..367857f83 100644\n--- a/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/package-info.java\n+++ b/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/package-info.java\n\n@@ -1,2 +1,3 @@\n+//non-compiled with javac: non-compilable annotation, for testing\n @Deprecated\n package org.checkstyle.suppressionxpathfilter.packageannotation;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMTA3NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392231075", "bodyText": "it is kind of strange that this file is not compilable because of annotation. Please share javac output for this file", "author": "romani", "createdAt": "2020-03-13T13:36:26Z", "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotation.java", "diffHunk": "@@ -0,0 +1,6 @@\n+//non-compiled with javac: non-compilable annotation, for testing\n+@Deprecated\n+package org.checkstyle.suppressionxpathfilter.packageannotation; // warn", "originalCommit": "41e38e5c262715af90f9787c9e3708130cf757bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQwNTgxNw==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392405817", "bodyText": "$ javac SuppressionXpathRegressionPackageAnnotation.java   \n\nSuppressionXpathRegressionPackageAnnotation.java:2: error: package annotations should be in file package-info.java\n@Deprecated\n^\n1 error", "author": "wilcoln", "createdAt": "2020-03-13T18:39:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMTA3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3MTY2Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392471667", "bodyText": "thanks a lot, please change for testing --> should be in file package-info.java", "author": "romani", "createdAt": "2020-03-13T20:56:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMTA3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3MzAwNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392473005", "bodyText": "Doing it right now.", "author": "wilcoln", "createdAt": "2020-03-13T20:58:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMTA3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3NjM4NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392476385", "bodyText": "Done.", "author": "wilcoln", "createdAt": "2020-03-13T21:05:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMTA3NQ=="}], "type": "inlineReview", "revised_code": {"commit": "ae03824733571181e93c031876cf6c3142fa78e8", "chunk": "diff --git a/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotation.java b/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationOne.java\nsimilarity index 71%\nrename from src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotation.java\nrename to src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationOne.java\nindex 3a1da5a9f..7d34c72e2 100644\n--- a/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotation.java\n+++ b/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationOne.java\n\n@@ -2,5 +2,5 @@\n @Deprecated\n package org.checkstyle.suppressionxpathfilter.packageannotation; // warn\n \n-public class SuppressionXpathRegressionPackageAnnotation {\n+public class SuppressionXpathRegressionPackageAnnotationOne {\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMTg1Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392231856", "bodyText": "can we add one more  test ? (all others have two tests at least)\nI know that there is not that much options, for example with two annotations, or annotation on the same line at least.", "author": "romani", "createdAt": "2020-03-13T13:37:54Z", "path": "src/it/java/org/checkstyle/suppressionxpathfilter/XpathRegressionPackageAnnotationTest.java", "diffHunk": "@@ -0,0 +1,58 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package org.checkstyle.suppressionxpathfilter;\n+\n+import java.io.File;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.checks.annotation.PackageAnnotationCheck;\n+\n+public class XpathRegressionPackageAnnotationTest extends AbstractXpathTestSupport {\n+\n+    private final String checkName = PackageAnnotationCheck.class.getSimpleName();\n+\n+    @Override\n+    protected String getCheckName() {\n+        return checkName;\n+    }\n+\n+    @Test\n+    public void testOne() throws Exception {", "originalCommit": "41e38e5c262715af90f9787c9e3708130cf757bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQyNTA3NA==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392425074", "bodyText": "Sure, Done.", "author": "wilcoln", "createdAt": "2020-03-13T19:21:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMTg1Ng=="}], "type": "inlineReview", "revised_code": {"commit": "ae03824733571181e93c031876cf6c3142fa78e8", "chunk": "diff --git a/src/it/java/org/checkstyle/suppressionxpathfilter/XpathRegressionPackageAnnotationTest.java b/src/it/java/org/checkstyle/suppressionxpathfilter/XpathRegressionPackageAnnotationTest.java\nindex cff91c644..b84689a22 100644\n--- a/src/it/java/org/checkstyle/suppressionxpathfilter/XpathRegressionPackageAnnotationTest.java\n+++ b/src/it/java/org/checkstyle/suppressionxpathfilter/XpathRegressionPackageAnnotationTest.java\n\n@@ -40,7 +40,8 @@ public class XpathRegressionPackageAnnotationTest extends AbstractXpathTestSuppo\n     @Test\n     public void testOne() throws Exception {\n         final File fileToProcess =\n-                new File(getNonCompilablePath(\"SuppressionXpathRegressionPackageAnnotation.java\"));\n+                new File(getNonCompilablePath(\n+                        \"SuppressionXpathRegressionPackageAnnotationOne.java\"));\n \n         final DefaultConfiguration moduleConfig =\n                 createModuleConfig(PackageAnnotationCheck.class);\n"}}, {"oid": "ae03824733571181e93c031876cf6c3142fa78e8", "url": "https://github.com/checkstyle/checkstyle/commit/ae03824733571181e93c031876cf6c3142fa78e8", "message": "Issue #7757: Update AbstractChecks to log DetailAST - PackageAnnotation", "committedDate": "2020-03-13T19:18:50Z", "type": "forcePushed"}, {"oid": "f879e53c2a3ad061b5ae3586ba8d409e35cfb989", "url": "https://github.com/checkstyle/checkstyle/commit/f879e53c2a3ad061b5ae3586ba8d409e35cfb989", "message": "Issue #7757: Update AbstractChecks to log DetailAST - PackageAnnotation", "committedDate": "2020-03-13T21:05:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3ODI0MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392478240", "bodyText": "there is no reason to work on non-compilable files, we do not support this.\nplease create package-info.java and do validation on it", "author": "romani", "createdAt": "2020-03-13T21:09:08Z", "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationOne.java", "diffHunk": "@@ -0,0 +1,6 @@\n+//non-compiled with javac: non-compilable annotation, should be in file package-info.java\n+@Deprecated\n+package org.checkstyle.suppressionxpathfilter.packageannotation; // warn", "originalCommit": "f879e53c2a3ad061b5ae3586ba8d409e35cfb989", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6393e42dd3c5a09411e055de81caddc84ceb5895", "chunk": "diff --git a/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationOne.java b/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationOne.java\ndeleted file mode 100644\nindex 0ea5a2526..000000000\n--- a/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationOne.java\n+++ /dev/null\n\n@@ -1,6 +0,0 @@\n-//non-compiled with javac: non-compilable annotation, should be in file package-info.java\n-@Deprecated\n-package org.checkstyle.suppressionxpathfilter.packageannotation; // warn\n-\n-public class SuppressionXpathRegressionPackageAnnotationOne {\n-}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3ODcxOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392478719", "bodyText": "please create one more package-info.java and do validation on it.\nall should be compilable. you can create as much packages as we need in Input folder.", "author": "romani", "createdAt": "2020-03-13T21:09:56Z", "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationTwo.java", "diffHunk": "@@ -0,0 +1,6 @@\n+//non-compiled with javac: non-compilable annotation, should be in file package-info.java\n+@Deprecated\n+@SuppressWarnings", "originalCommit": "f879e53c2a3ad061b5ae3586ba8d409e35cfb989", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ4NTA5MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7829#discussion_r392485091", "bodyText": "Understood.", "author": "wilcoln", "createdAt": "2020-03-13T21:20:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3ODcxOQ=="}], "type": "inlineReview", "revised_code": {"commit": "6393e42dd3c5a09411e055de81caddc84ceb5895", "chunk": "diff --git a/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationTwo.java b/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationTwo.java\ndeleted file mode 100644\nindex ec084eebc..000000000\n--- a/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationTwo.java\n+++ /dev/null\n\n@@ -1,6 +0,0 @@\n-//non-compiled with javac: non-compilable annotation, should be in file package-info.java\n-@Deprecated\n-@SuppressWarnings\n-package org.checkstyle.suppressionxpathfilter.packageannotation; // warn\n-public class SuppressionXpathRegressionPackageAnnotationTwo {\n-}\n"}}, {"oid": "6393e42dd3c5a09411e055de81caddc84ceb5895", "url": "https://github.com/checkstyle/checkstyle/commit/6393e42dd3c5a09411e055de81caddc84ceb5895", "message": "Issue #7757: Update AbstractChecks to log DetailAST - PackageAnnotation", "committedDate": "2020-03-13T23:33:43Z", "type": "forcePushed"}, {"oid": "fb7a4ea18d1c8c4cbc73ca4094900bfe4cacf3b8", "url": "https://github.com/checkstyle/checkstyle/commit/fb7a4ea18d1c8c4cbc73ca4094900bfe4cacf3b8", "message": "Issue #7757: Update AbstractChecks to log DetailAST - PackageAnnotation", "committedDate": "2020-03-15T08:47:07Z", "type": "forcePushed"}, {"oid": "b72b3418be746a2c71bc0b41a96772156b754ef6", "url": "https://github.com/checkstyle/checkstyle/commit/b72b3418be746a2c71bc0b41a96772156b754ef6", "message": "Issue #7757: Update AbstractChecks to log DetailAST - PackageAnnotation", "committedDate": "2020-03-15T11:01:13Z", "type": "commit"}, {"oid": "b72b3418be746a2c71bc0b41a96772156b754ef6", "url": "https://github.com/checkstyle/checkstyle/commit/b72b3418be746a2c71bc0b41a96772156b754ef6", "message": "Issue #7757: Update AbstractChecks to log DetailAST - PackageAnnotation", "committedDate": "2020-03-15T11:01:13Z", "type": "forcePushed"}]}