{"pr_number": 7792, "pr_title": "Issue #7723: Update AbstractChecks to log DetailAST - ArrayTrailingComma", "pr_createdAt": "2020-03-07T15:54:59Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/7792", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NzY4MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7792#discussion_r389347680", "bodyText": "@romani\n@rnveach\nMay be violation should be reported on last array item instead of rcurly?", "author": "strkkk", "createdAt": "2020-03-08T08:33:55Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/ArrayTrailingCommaCheck.java", "diffHunk": "@@ -167,7 +167,7 @@ public void visitToken(DetailAST arrayInit) {\n                 && !TokenUtil.areOnSameLine(rcurly, previousSibling)\n                 && !TokenUtil.areOnSameLine(arrayInit, previousSibling)\n                 && previousSibling.getType() != TokenTypes.COMMA) {\n-            log(rcurly.getLineNo(), MSG_KEY);\n+            log(rcurly, MSG_KEY);", "originalCommit": "175b67c8ec137829783774f7dc1afa8054a58647", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQyMzY3Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/7792#discussion_r389423673", "bodyText": "I am undecided.", "author": "rnveach", "createdAt": "2020-03-09T00:35:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NzY4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAzNDgyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/7792#discussion_r391034824", "bodyText": "it is very hard to make decision, both is ok, lets keep on rcurly.\nin example like:\n    int[] a2 = new int[]\n    {\n        1,\n        2,\n        3\n    }; // warn\n\nit is defintely better to put violation on last item", "author": "romani", "createdAt": "2020-03-11T14:59:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NzY4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTA0NjI3NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7792#discussion_r391046275", "bodyText": "but if look at examples at https://checkstyle.org/config_coding.html#ArrayTrailingComma_Description we put \"ok\" and \"violatation\" on last element !!! it is good point that we need to make violation on last element.\n@wilcoln , please change main code to report violation on lest element", "author": "romani", "createdAt": "2020-03-11T15:15:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NzY4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTA0ODAxMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7792#discussion_r391048011", "bodyText": "Roger that.", "author": "wilcoln", "createdAt": "2020-03-11T15:17:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NzY4MA=="}], "type": "inlineReview", "revised_code": {"commit": "074c7378c20989582d97be70a344e48784e758b6", "chunk": "diff --git a/src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/ArrayTrailingCommaCheck.java b/src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/ArrayTrailingCommaCheck.java\nindex 66bc613b0..ca2525c80 100644\n--- a/src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/ArrayTrailingCommaCheck.java\n+++ b/src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/ArrayTrailingCommaCheck.java\n\n@@ -167,7 +167,7 @@ public class ArrayTrailingCommaCheck extends AbstractCheck {\n                 && !TokenUtil.areOnSameLine(rcurly, previousSibling)\n                 && !TokenUtil.areOnSameLine(arrayInit, previousSibling)\n                 && previousSibling.getType() != TokenTypes.COMMA) {\n-            log(rcurly, MSG_KEY);\n+            log(previousSibling, MSG_KEY);\n         }\n     }\n \n"}}, {"oid": "505a2ac6f18ff0a39854b06260e225ea6d96f9cf", "url": "https://github.com/checkstyle/checkstyle/commit/505a2ac6f18ff0a39854b06260e225ea6d96f9cf", "message": "Issue #7723: Update AbstractChecks to log DetailAST - ArrayTrailingComma", "committedDate": "2020-03-09T11:26:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY0NjAyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/7792#discussion_r389646024", "bodyText": "Please add // violation comments on lines with violation (for all violations in file)", "author": "strkkk", "createdAt": "2020-03-09T13:04:20Z", "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/arraytrailingcomma/InputArrayTrailingComma.java", "diffHunk": "@@ -58,4 +58,20 @@\n             1,\n             2\n             ,};\n+\n+    Object[][] g1 = new Object[][]\n+    {\n+        { 1, 1 },\n+        {\n+           null,\n+           new int[] { 2,\n+                   3 }, }, };\n+\n+    Object[][] g2 = new Object[][]\n+    {\n+        { 1, 1 },\n+        {\n+           null,\n+           new int[] { 2,\n+                   3 } } };", "originalCommit": "505a2ac6f18ff0a39854b06260e225ea6d96f9cf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "100fcac2e28cb96cc6f1c061a902eab3673f1cfd", "chunk": "diff --git a/src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/arraytrailingcomma/InputArrayTrailingComma.java b/src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/arraytrailingcomma/InputArrayTrailingComma.java\nindex e33a1b926..52bb814cc 100644\n--- a/src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/arraytrailingcomma/InputArrayTrailingComma.java\n+++ b/src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/arraytrailingcomma/InputArrayTrailingComma.java\n\n@@ -73,5 +73,5 @@ public class InputArrayTrailingComma\n         {\n            null,\n            new int[] { 2,\n-                   3 } } };\n+                   3 } } }; // violation\n }\n"}}, {"oid": "100fcac2e28cb96cc6f1c061a902eab3673f1cfd", "url": "https://github.com/checkstyle/checkstyle/commit/100fcac2e28cb96cc6f1c061a902eab3673f1cfd", "message": "Issue #7723: Update AbstractChecks to log DetailAST - ArrayTrailingComma", "committedDate": "2020-03-09T13:38:15Z", "type": "forcePushed"}, {"oid": "ddd05df5eb778bd94bb8bb350077ed191cf6bb04", "url": "https://github.com/checkstyle/checkstyle/commit/ddd05df5eb778bd94bb8bb350077ed191cf6bb04", "message": "Issue #7723: Update AbstractChecks to log DetailAST - ArrayTrailingComma", "committedDate": "2020-03-09T17:55:45Z", "type": "forcePushed"}, {"oid": "03a74a35639b255723fea439092694690a2d0814", "url": "https://github.com/checkstyle/checkstyle/commit/03a74a35639b255723fea439092694690a2d0814", "message": "Issue #7723: Update AbstractChecks to log DetailAST - ArrayTrailingComma", "committedDate": "2020-03-09T19:51:26Z", "type": "forcePushed"}, {"oid": "1a298127e733f7739b6763d519d70c8c34eb912e", "url": "https://github.com/checkstyle/checkstyle/commit/1a298127e733f7739b6763d519d70c8c34eb912e", "message": "Issue #7723: Update AbstractChecks to log DetailAST - ArrayTrailingComma", "committedDate": "2020-03-10T06:08:07Z", "type": "forcePushed"}, {"oid": "d45bc66fbba2ec841fd355dbe5fccc321ccfad62", "url": "https://github.com/checkstyle/checkstyle/commit/d45bc66fbba2ec841fd355dbe5fccc321ccfad62", "message": "Issue #7723: Update AbstractChecks to log DetailAST - ArrayTrailingComma", "committedDate": "2020-03-10T19:25:01Z", "type": "forcePushed"}, {"oid": "074c7378c20989582d97be70a344e48784e758b6", "url": "https://github.com/checkstyle/checkstyle/commit/074c7378c20989582d97be70a344e48784e758b6", "message": "Issue #7723: Update AbstractChecks to log DetailAST - ArrayTrailingComma", "committedDate": "2020-03-11T21:22:12Z", "type": "commit"}, {"oid": "074c7378c20989582d97be70a344e48784e758b6", "url": "https://github.com/checkstyle/checkstyle/commit/074c7378c20989582d97be70a344e48784e758b6", "message": "Issue #7723: Update AbstractChecks to log DetailAST - ArrayTrailingComma", "committedDate": "2020-03-11T21:22:12Z", "type": "forcePushed"}]}