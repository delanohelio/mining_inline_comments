{"pr_number": 8421, "pr_title": "Issue #8345: Add TokenUtil.isTypeDeclaration method", "pr_createdAt": "2020-07-08T15:55:55Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8421", "timeline": [{"oid": "ad61d148015ba29a832d1df111950a3288e4fc43", "url": "https://github.com/checkstyle/checkstyle/commit/ad61d148015ba29a832d1df111950a3288e4fc43", "message": "minor: refactor ScopeUtil.java (#8345)", "committedDate": "2020-07-09T10:29:58Z", "type": "forcePushed"}, {"oid": "e759a60f74f65c163feb25fe2155ad0bc6c742a7", "url": "https://github.com/checkstyle/checkstyle/commit/e759a60f74f65c163feb25fe2155ad0bc6c742a7", "message": "Issue #8345: Add TokenUtil.isTypeDeclaration method", "committedDate": "2020-07-10T20:34:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIzOTM5Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8421#discussion_r453239392", "bodyText": "what force you do this test ?\nWe need to test all real inputs. If something is missed it is better to extend Inputs.", "author": "romani", "createdAt": "2020-07-11T22:01:29Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/utils/TokenUtilTest.java", "diffHunk": "@@ -277,4 +278,20 @@ public void testForEachChild() {\n         assertEquals(secondSibling, firstChild, \"Mismatched child node\");\n     }\n \n+    @Test\n+    public void testIsTypeDeclaration() {", "originalCommit": "e759a60f74f65c163feb25fe2155ad0bc6c742a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ0MzgxOA==", "url": "https://github.com/checkstyle/checkstyle/pull/8421#discussion_r453443818", "bodyText": "Adding testIsTypeDeclaration() to TokenUtil reduces coverage by 0.03, so I added this test.  What inputs should I extend in this case to restore coverage?", "author": "nmancus1", "createdAt": "2020-07-13T05:34:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIzOTM5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5MjE1Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8421#discussion_r456692152", "bodyText": "Maybe a case where it makes sense skipping the test? Either way seems ok to me", "author": "esilkensen", "createdAt": "2020-07-17T22:00:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIzOTM5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjczMzE4Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8421#discussion_r456733186", "bodyText": "@esilkensen I'm just not sure how else to test this with actual code, since none of the other methods in TokenUtilTest.java use real input.  Until I use this method more (likely in the records check updates), I don't think it is getting exercised enough with real input to get enough coverage.", "author": "nmancus1", "createdAt": "2020-07-18T01:35:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIzOTM5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc5MTIxNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8421#discussion_r456791217", "bodyText": "I call back my point .... I do not know how resolve it.\nIt is good to use Util methods, but in the same time we use pitest split to speedup pitest execution and this force us to write non real test cases. So if new Check start to use this method we will miss a big chunk of test that Check should have to cover cases of different type.\nProbably I should demand to copy all Util methods in code of Check on first implmentation, make sure that pitest is happy and only then use Util methods.\nOr we should think on to move Utils pitest in same pitest execution as Checks.", "author": "romani", "createdAt": "2020-07-18T13:39:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIzOTM5Mg=="}], "type": "inlineReview", "revised_code": {"commit": "d1d161e9fc80749132248b38dd24f1afbebdbaf0", "chunk": "diff --git a/src/test/java/com/puppycrawl/tools/checkstyle/utils/TokenUtilTest.java b/src/test/java/com/puppycrawl/tools/checkstyle/utils/TokenUtilTest.java\nindex eefb37725..84b1356de 100644\n--- a/src/test/java/com/puppycrawl/tools/checkstyle/utils/TokenUtilTest.java\n+++ b/src/test/java/com/puppycrawl/tools/checkstyle/utils/TokenUtilTest.java\n\n@@ -290,8 +289,6 @@ public class TokenUtilTest {\n                 \"Should return true when valid type passed\");\n         assertTrue(TokenUtil.isTypeDeclaration(TokenTypes.RECORD_DEF),\n                 \"Should return true when valid type passed\");\n-        assertFalse(TokenUtil.isTypeDeclaration(TokenTypes.BLOCK_COMMENT_BEGIN),\n-                \"Should return true when valid type passed\");\n     }\n \n }\n"}}, {"oid": "d1d161e9fc80749132248b38dd24f1afbebdbaf0", "url": "https://github.com/checkstyle/checkstyle/commit/d1d161e9fc80749132248b38dd24f1afbebdbaf0", "message": "Issue #8345: Add TokenUtil.isTypeDeclaration method", "committedDate": "2020-07-17T03:45:44Z", "type": "commit"}, {"oid": "d1d161e9fc80749132248b38dd24f1afbebdbaf0", "url": "https://github.com/checkstyle/checkstyle/commit/d1d161e9fc80749132248b38dd24f1afbebdbaf0", "message": "Issue #8345: Add TokenUtil.isTypeDeclaration method", "committedDate": "2020-07-17T03:45:44Z", "type": "forcePushed"}]}