{"pr_number": 1970, "pr_title": "Change tileset additional changes", "pr_createdAt": "2020-05-21T06:16:36Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1970", "timeline": [{"oid": "bf56b5abbf9955329233a2c9e86d0d7660c24a9e", "url": "https://github.com/MegaMek/megamek/commit/bf56b5abbf9955329233a2c9e86d0d7660c24a9e", "message": "Issue #1946: Fixing Theme changes", "committedDate": "2020-05-17T06:54:00Z", "type": "commit"}, {"oid": "6a611d2d2cb349e12fd63270a8bef070fac2cdde", "url": "https://github.com/MegaMek/megamek/commit/6a611d2d2cb349e12fd63270a8bef070fac2cdde", "message": "Small Refactor HexTileSet", "committedDate": "2020-05-18T19:34:04Z", "type": "commit"}, {"oid": "ed5b90684293f8ec854a7f5f949068b78b4eded0", "url": "https://github.com/MegaMek/megamek/commit/ed5b90684293f8ec854a7f5f949068b78b4eded0", "message": "Merge branch 'MM_master6' into SJ_ChangeThemeError\n\nConflicts:\n\tmegamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "committedDate": "2020-05-21T06:06:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwMDY5NA==", "url": "https://github.com/MegaMek/megamek/pull/1970#discussion_r432800694", "bodyText": "I'd like to point out that BoardView already has a game object, so there's not a need to pass it around.", "author": "NickAragua", "createdAt": "2020-05-30T02:07:59Z", "path": "megamek/src/megamek/client/ui/swing/TilesetManager.java", "diffHunk": "@@ -126,12 +128,18 @@\n      * in the same hex).\n      */\n     private HashMap<Color, Image> ecmStaticImages = new HashMap<Color, Image>();\n+    \n+    // The TileManager is associated with a game passed down from the Boardview\n+    // and must pass this on to the hextileset for it to register listeners\n+    private IGame game;\n \n     /**\n      * Creates new TilesetManager\n      */\n-    public TilesetManager(BoardView1 bv) throws IOException {\n+    public TilesetManager(BoardView1 bv, IGame g) throws IOException {", "originalCommit": "ed5b90684293f8ec854a7f5f949068b78b4eded0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk0NjY3NQ==", "url": "https://github.com/MegaMek/megamek/pull/1970#discussion_r432946675", "bodyText": "OK, I have another solution. If there is some obviously better one, please do point me to it. I'm open towards at least a megamek-internal philosophy on that. I made boardview's game public and final and removed the pass to the Tilesetmanager.", "author": "SJuliez", "createdAt": "2020-05-31T13:22:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwMDY5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk0OTAwMg==", "url": "https://github.com/MegaMek/megamek/pull/1970#discussion_r432949002", "bodyText": "Is there something I should do because of the board validator?", "author": "SJuliez", "createdAt": "2020-05-31T13:47:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwMDY5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1NDQxMA==", "url": "https://github.com/MegaMek/megamek/pull/1970#discussion_r432954410", "bodyText": "Yeah, if you click on the details for the Validate Boards check, you can look at which boards fail as a result of the changes made and address those.", "author": "NickAragua", "createdAt": "2020-05-31T14:48:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgwMDY5NA=="}], "type": "inlineReview", "revised_code": {"commit": "f3a237fddcab67081187721836842137aae7ba43", "chunk": "diff --git a/megamek/src/megamek/client/ui/swing/TilesetManager.java b/megamek/src/megamek/client/ui/swing/TilesetManager.java\nindex 950252152d..cef87b542f 100644\n--- a/megamek/src/megamek/client/ui/swing/TilesetManager.java\n+++ b/megamek/src/megamek/client/ui/swing/TilesetManager.java\n\n@@ -129,17 +128,12 @@ ITilesetManager {\n      */\n     private HashMap<Color, Image> ecmStaticImages = new HashMap<Color, Image>();\n     \n-    // The TileManager is associated with a game passed down from the Boardview\n-    // and must pass this on to the hextileset for it to register listeners\n-    private IGame game;\n-\n     /**\n      * Creates new TilesetManager\n      */\n-    public TilesetManager(BoardView1 bv, IGame g) throws IOException {\n+    public TilesetManager(BoardView1 bv) throws IOException {\n         boardview = bv;\n-        game = g;\n-        hexTileset = new HexTileset(game);\n+        hexTileset = new HexTileset(boardview.game);\n         tracker = new MediaTracker(boardview);\n         try {\n             camos = new DirectoryItems(\n"}}, {"oid": "f3a237fddcab67081187721836842137aae7ba43", "url": "https://github.com/MegaMek/megamek/commit/f3a237fddcab67081187721836842137aae7ba43", "message": "Reduce passing variables in boardview1", "committedDate": "2020-05-31T13:16:28Z", "type": "commit"}, {"oid": "a61db938dfd79cd0368ed533a375c56b9f248620", "url": "https://github.com/MegaMek/megamek/commit/a61db938dfd79cd0368ed533a375c56b9f248620", "message": "Merge branch 'MM_master_8' into SJ_ChangeThemeError", "committedDate": "2020-06-01T08:59:29Z", "type": "commit"}, {"oid": "6f198005c6c49ccb1e92fa2dc825f18fcbfe087b", "url": "https://github.com/MegaMek/megamek/commit/6f198005c6c49ccb1e92fa2dc825f18fcbfe087b", "message": "Correct pavement:0 to pavement:1 in boards", "committedDate": "2020-06-01T09:06:28Z", "type": "commit"}, {"oid": "ad69dcf5cce722d162d70a09b0b275a54d0fc10d", "url": "https://github.com/MegaMek/megamek/commit/ad69dcf5cce722d162d70a09b0b275a54d0fc10d", "message": "Correct snow:15 to snow:1", "committedDate": "2020-06-01T09:11:46Z", "type": "commit"}]}