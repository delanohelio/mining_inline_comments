{"pr_number": 1861, "pr_title": "enable bot editing via right click on bot player row", "pr_createdAt": "2020-04-18T02:55:37Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1861", "timeline": [{"oid": "953afd5ef0a52fa0395a1be0e116112c754350c0", "url": "https://github.com/MegaMek/megamek/commit/953afd5ef0a52fa0395a1be0e116112c754350c0", "message": "enable bot editing via right click on bot player row", "committedDate": "2020-04-18T02:53:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY5OTQ0MQ==", "url": "https://github.com/MegaMek/megamek/pull/1861#discussion_r410699441", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(existingBot instanceof Princess) {\n          \n          \n            \n                    if (existingBot instanceof Princess) {", "author": "Windchild292", "createdAt": "2020-04-18T13:35:30Z", "path": "megamek/src/megamek/client/ui/swing/BotConfigDialog.java", "diffHunk": "@@ -95,7 +95,17 @@\n     private final JPanel botSpecificCardsPanel;\n \n     public BotConfigDialog(JFrame parent) {\n-        this(parent, null);\n+        this(parent, new HashSet<IPlayer>());\n+    }\n+    \n+    public BotConfigDialog(JFrame parent, BotClient existingBot) {\n+        this(parent, new HashSet<IPlayer>());\n+        \n+        if(existingBot instanceof Princess) {", "originalCommit": "953afd5ef0a52fa0395a1be0e116112c754350c0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cc2d90b27e727ecbc56ff6eec60375dc59814ad7", "chunk": "diff --git a/megamek/src/megamek/client/ui/swing/BotConfigDialog.java b/megamek/src/megamek/client/ui/swing/BotConfigDialog.java\nindex 68f6da076e..6fbf3a3d51 100644\n--- a/megamek/src/megamek/client/ui/swing/BotConfigDialog.java\n+++ b/megamek/src/megamek/client/ui/swing/BotConfigDialog.java\n\n@@ -95,13 +95,13 @@ public class BotConfigDialog extends JDialog implements ActionListener, KeyListe\n     private final JPanel botSpecificCardsPanel;\n \n     public BotConfigDialog(JFrame parent) {\n-        this(parent, new HashSet<IPlayer>());\n+        this(parent, new HashSet<>());\n     }\n     \n     public BotConfigDialog(JFrame parent, BotClient existingBot) {\n-        this(parent, new HashSet<IPlayer>());\n+        this(parent, new HashSet<>());\n         \n-        if(existingBot instanceof Princess) {\n+        if (existingBot instanceof Princess) {\n             this.princessBehavior = ((Princess) existingBot).getBehaviorSettings();\n             nameField.setText(existingBot.getName());\n             setPrincessFields();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY5OTQ3Mw==", "url": "https://github.com/MegaMek/megamek/pull/1861#discussion_r410699473", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if(isBot) {\n          \n          \n            \n                            if (isBot) {", "author": "Windchild292", "createdAt": "2020-04-18T13:35:52Z", "path": "megamek/src/megamek/client/ui/swing/ChatLounge.java", "diffHunk": "@@ -3227,12 +3228,19 @@ private void maybeShowPopup(MouseEvent e) {\n             boolean isBot = clientgui.getBots().get(player.getName()) != null;\n             if (e.isPopupTrigger()) {\n                 JMenuItem menuItem = null;\n-                // JMenu menu = null;\n                 menuItem = new JMenuItem(\"Configure ...\");\n                 menuItem.setActionCommand(\"CONFIGURE|\" + row);\n                 menuItem.addActionListener(this);\n                 menuItem.setEnabled(isOwner || isBot);\n                 popup.add(menuItem);\n+                \n+                if(isBot) {", "originalCommit": "953afd5ef0a52fa0395a1be0e116112c754350c0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cc2d90b27e727ecbc56ff6eec60375dc59814ad7", "chunk": "diff --git a/megamek/src/megamek/client/ui/swing/ChatLounge.java b/megamek/src/megamek/client/ui/swing/ChatLounge.java\nindex 5fcdea26f9..cc7fc96463 100644\n--- a/megamek/src/megamek/client/ui/swing/ChatLounge.java\n+++ b/megamek/src/megamek/client/ui/swing/ChatLounge.java\n\n@@ -3234,7 +3234,7 @@ public class ChatLounge extends AbstractPhaseDisplay implements ActionListener,\n                 menuItem.setEnabled(isOwner || isBot);\n                 popup.add(menuItem);\n                 \n-                if(isBot) {\n+                if (isBot) {\n                     JMenuItem botConfig = new JMenuItem(\"Bot Settings ...\");\n                     botConfig.setActionCommand(\"BOTCONFIG|\" + row);\n                     botConfig.addActionListener(this);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY5OTQ5Mg==", "url": "https://github.com/MegaMek/megamek/pull/1861#discussion_r410699492", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        } else if(command.equalsIgnoreCase(\"BOTCONFIG\")) {\n          \n          \n            \n                        } else if (command.equalsIgnoreCase(\"BOTCONFIG\")) {", "author": "Windchild292", "createdAt": "2020-04-18T13:36:08Z", "path": "megamek/src/megamek/client/ui/swing/ChatLounge.java", "diffHunk": "@@ -3243,6 +3251,25 @@ public void actionPerformed(ActionEvent action) {\n             String command = st.nextToken();\n             if (command.equalsIgnoreCase(\"CONFIGURE\")) {\n                 customizePlayer();\n+            } else if(command.equalsIgnoreCase(\"BOTCONFIG\")) {", "originalCommit": "953afd5ef0a52fa0395a1be0e116112c754350c0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cc2d90b27e727ecbc56ff6eec60375dc59814ad7", "chunk": "diff --git a/megamek/src/megamek/client/ui/swing/ChatLounge.java b/megamek/src/megamek/client/ui/swing/ChatLounge.java\nindex 5fcdea26f9..cc7fc96463 100644\n--- a/megamek/src/megamek/client/ui/swing/ChatLounge.java\n+++ b/megamek/src/megamek/client/ui/swing/ChatLounge.java\n\n@@ -3251,7 +3251,7 @@ public class ChatLounge extends AbstractPhaseDisplay implements ActionListener,\n             String command = st.nextToken();\n             if (command.equalsIgnoreCase(\"CONFIGURE\")) {\n                 customizePlayer();\n-            } else if(command.equalsIgnoreCase(\"BOTCONFIG\")) {\n+            } else if (command.equalsIgnoreCase(\"BOTCONFIG\")) {\n                 int row = Integer.parseInt(st.nextToken());\n                 IPlayer player = playerModel.getPlayerAt(row);\n                 BotClient bot = (BotClient) clientgui.getBots().get(player.getName());\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY5OTUwNw==", "url": "https://github.com/MegaMek/megamek/pull/1861#discussion_r410699507", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            } else if(bot instanceof Princess) {\n          \n          \n            \n                            } else if (bot instanceof Princess) {", "author": "Windchild292", "createdAt": "2020-04-18T13:36:17Z", "path": "megamek/src/megamek/client/ui/swing/ChatLounge.java", "diffHunk": "@@ -3243,6 +3251,25 @@ public void actionPerformed(ActionEvent action) {\n             String command = st.nextToken();\n             if (command.equalsIgnoreCase(\"CONFIGURE\")) {\n                 customizePlayer();\n+            } else if(command.equalsIgnoreCase(\"BOTCONFIG\")) {\n+                int row = Integer.parseInt(st.nextToken());\n+                IPlayer player = playerModel.getPlayerAt(row);\n+                BotClient bot = (BotClient) clientgui.getBots().get(player.getName());\n+                BotConfigDialog bcd = new BotConfigDialog(clientgui.frame, bot);\n+                bcd.setVisible(true);\n+\n+                if (bcd.dialogAborted) {\n+                    return; // user didn't click 'ok', add no bot\n+                } else if(bot instanceof Princess) {", "originalCommit": "953afd5ef0a52fa0395a1be0e116112c754350c0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cc2d90b27e727ecbc56ff6eec60375dc59814ad7", "chunk": "diff --git a/megamek/src/megamek/client/ui/swing/ChatLounge.java b/megamek/src/megamek/client/ui/swing/ChatLounge.java\nindex 5fcdea26f9..cc7fc96463 100644\n--- a/megamek/src/megamek/client/ui/swing/ChatLounge.java\n+++ b/megamek/src/megamek/client/ui/swing/ChatLounge.java\n\n@@ -3251,7 +3251,7 @@ public class ChatLounge extends AbstractPhaseDisplay implements ActionListener,\n             String command = st.nextToken();\n             if (command.equalsIgnoreCase(\"CONFIGURE\")) {\n                 customizePlayer();\n-            } else if(command.equalsIgnoreCase(\"BOTCONFIG\")) {\n+            } else if (command.equalsIgnoreCase(\"BOTCONFIG\")) {\n                 int row = Integer.parseInt(st.nextToken());\n                 IPlayer player = playerModel.getPlayerAt(row);\n                 BotClient bot = (BotClient) clientgui.getBots().get(player.getName());\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY5OTU3NA==", "url": "https://github.com/MegaMek/megamek/pull/1861#discussion_r410699574", "bodyText": "I'm betting the addition of the IPlayer declaration is superfluous.", "author": "Windchild292", "createdAt": "2020-04-18T13:37:04Z", "path": "megamek/src/megamek/client/ui/swing/BotConfigDialog.java", "diffHunk": "@@ -95,7 +95,17 @@\n     private final JPanel botSpecificCardsPanel;\n \n     public BotConfigDialog(JFrame parent) {\n-        this(parent, null);\n+        this(parent, new HashSet<IPlayer>());\n+    }\n+    \n+    public BotConfigDialog(JFrame parent, BotClient existingBot) {\n+        this(parent, new HashSet<IPlayer>());", "originalCommit": "953afd5ef0a52fa0395a1be0e116112c754350c0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cc2d90b27e727ecbc56ff6eec60375dc59814ad7", "chunk": "diff --git a/megamek/src/megamek/client/ui/swing/BotConfigDialog.java b/megamek/src/megamek/client/ui/swing/BotConfigDialog.java\nindex 68f6da076e..6fbf3a3d51 100644\n--- a/megamek/src/megamek/client/ui/swing/BotConfigDialog.java\n+++ b/megamek/src/megamek/client/ui/swing/BotConfigDialog.java\n\n@@ -95,13 +95,13 @@ public class BotConfigDialog extends JDialog implements ActionListener, KeyListe\n     private final JPanel botSpecificCardsPanel;\n \n     public BotConfigDialog(JFrame parent) {\n-        this(parent, new HashSet<IPlayer>());\n+        this(parent, new HashSet<>());\n     }\n     \n     public BotConfigDialog(JFrame parent, BotClient existingBot) {\n-        this(parent, new HashSet<IPlayer>());\n+        this(parent, new HashSet<>());\n         \n-        if(existingBot instanceof Princess) {\n+        if (existingBot instanceof Princess) {\n             this.princessBehavior = ((Princess) existingBot).getBehaviorSettings();\n             nameField.setText(existingBot.getName());\n             setPrincessFields();\n"}}, {"oid": "cc2d90b27e727ecbc56ff6eec60375dc59814ad7", "url": "https://github.com/MegaMek/megamek/commit/cc2d90b27e727ecbc56ff6eec60375dc59814ad7", "message": "code review changes", "committedDate": "2020-04-19T00:43:48Z", "type": "commit"}]}