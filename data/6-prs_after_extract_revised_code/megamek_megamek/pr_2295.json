{"pr_number": 2295, "pr_title": "implement ammo feed problem quirk", "pr_createdAt": "2020-10-04T03:10:14Z", "pr_url": "https://github.com/MegaMek/megamek/pull/2295", "timeline": [{"oid": "2b0d4f17c1aa39ba09619ee42a06b49a6b51b70f", "url": "https://github.com/MegaMek/megamek/commit/2b0d4f17c1aa39ba09619ee42a06b49a6b51b70f", "message": "implement ammo feed problem quirk", "committedDate": "2020-10-04T03:09:01Z", "type": "commit"}, {"oid": "60609c77269f98ec24295818a72666a698d2fb9e", "url": "https://github.com/MegaMek/megamek/commit/60609c77269f98ec24295818a72666a698d2fb9e", "message": "merge from upstream", "committedDate": "2020-10-04T03:11:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTIwMTA0Nw==", "url": "https://github.com/MegaMek/megamek/pull/2295#discussion_r499201047", "bodyText": "The ammo type is unlikely to be LRM if it's one of the AC ammo types.", "author": "NickAragua", "createdAt": "2020-10-04T03:14:23Z", "path": "megamek/src/megamek/common/EquipmentType.java", "diffHunk": "@@ -443,15 +443,6 @@ public boolean isExplosive(Mounted mounted, boolean ignoreCharge) {\n                     || (((AmmoType) ammo.getType()).getMunitionType() != AmmoType.M_INCENDIARY_AC)) {\n                 return false;\n             }\n-\n-            WeaponType wtype = (WeaponType) mounted.getType();", "originalCommit": "60609c77269f98ec24295818a72666a698d2fb9e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTIwMTExNw==", "url": "https://github.com/MegaMek/megamek/pull/2295#discussion_r499201117", "bodyText": "Missile launchers now have explosion damage if the weapon has ammo feed problems.", "author": "NickAragua", "createdAt": "2020-10-04T03:15:22Z", "path": "megamek/src/megamek/common/Mounted.java", "diffHunk": "@@ -1198,7 +1198,8 @@ public int getExplosionDamage() {\n                     && curMode().equals(\"Powered Down\")) {\n                 return 0;\n             }\n-            if (isHotLoaded() && (getLinked().getUsableShotsLeft() > 0)) {\n+            if ((isHotLoaded() || hasQuirk(OptionsConstants.QUIRK_WEAP_NEG_AMMO_FEED_PROBLEMS))", "originalCommit": "60609c77269f98ec24295818a72666a698d2fb9e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTIwMTIyNw==", "url": "https://github.com/MegaMek/megamek/pull/2295#discussion_r499201227", "bodyText": "This duplicated logic from EquipmentType.isExplosive()", "author": "NickAragua", "createdAt": "2020-10-04T03:17:39Z", "path": "megamek/src/megamek/server/Server.java", "diffHunk": "@@ -27976,68 +27985,7 @@ else if ((null != Compute.stackingViolation(game, other.getId(), curPos))\n             }\n         }\n \n-        // Special case: discharged M- and B-pods shouldn't explode.", "originalCommit": "60609c77269f98ec24295818a72666a698d2fb9e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}