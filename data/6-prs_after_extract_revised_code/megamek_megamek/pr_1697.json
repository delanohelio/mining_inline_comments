{"pr_number": 1697, "pr_title": "Spot welder heat", "pr_createdAt": "2020-02-19T21:29:49Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1697", "timeline": [{"oid": "7b109f4eea5d6a682a067d6f2194eb2e55346de9", "url": "https://github.com/MegaMek/megamek/commit/7b109f4eea5d6a682a067d6f2194eb2e55346de9", "message": "Treat spot welder as energy weapon for heat sink and power amp requirements.\n\nThis only applies to units without a fission or fusion engine.", "committedDate": "2020-02-19T21:19:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2Njg2Ng==", "url": "https://github.com/MegaMek/megamek/pull/1697#discussion_r382366866", "bodyText": "Aerospace fighters can mount spot welders? wtf?", "author": "NickAragua", "createdAt": "2020-02-21T02:30:10Z", "path": "megamek/src/megamek/common/verifier/TestAero.java", "diffHunk": "@@ -603,12 +603,17 @@ public double getWeightPowerAmp() {\n                 if ((linkedBy != null) && \n                         (linkedBy.getType() instanceof MiscType) && \n                         linkedBy.getType().hasFlag(MiscType.F_PPC_CAPACITOR)){\n-                    weight += ((MiscType)linkedBy.getType()).getTonnage(aero);\n+                    weight += linkedBy.getType().getTonnage(aero);\n                 }\n             }\n-            // Power amp weighs: \n+            for (Mounted m : aero.getMisc()) {\n+                if (m.getType().hasFlag(MiscType.F_CLUB) && m.getType().hasSubType(MiscType.S_SPOT_WELDER)) {", "originalCommit": "7b109f4eea5d6a682a067d6f2194eb2e55346de9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2NjkwMw==", "url": "https://github.com/MegaMek/megamek/pull/1697#discussion_r382366903", "bodyText": "and clubs.", "author": "NickAragua", "createdAt": "2020-02-21T02:30:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2Njg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2NzA2MQ==", "url": "https://github.com/MegaMek/megamek/pull/1697#discussion_r382367061", "bodyText": "Well, never mind, just spot welders, which are apparently a subset of club.", "author": "NickAragua", "createdAt": "2020-02-21T02:30:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2Njg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2NzEyMA==", "url": "https://github.com/MegaMek/megamek/pull/1697#discussion_r382367120", "bodyText": "I'm sorry, what?\nIs that meant to only be for LAMs?", "author": "Windchild292", "createdAt": "2020-02-21T02:31:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2Njg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2NzM4Ng==", "url": "https://github.com/MegaMek/megamek/pull/1697#discussion_r382367386", "bodyText": "I guess that's a theoretically legit use case. Well, whatever, we're just implementing the rules.", "author": "NickAragua", "createdAt": "2020-02-21T02:32:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2Njg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQwMzgyOA==", "url": "https://github.com/MegaMek/megamek/pull/1697#discussion_r382403828", "bodyText": "That's for conventional fighters, and I was just blindly thinking about how they use the same rules as vehicles for determining power amplifier weight without any consideration for the equipmrnt in question. Conventional fighter cannot in fact mount spot welders so while this doesn't hurt anything, the check is meaningless.", "author": "neoancient", "createdAt": "2020-02-21T05:28:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM2Njg2Ng=="}], "type": "inlineReview", "revised_code": {"commit": "2e91720e4da23290354d961def8181787fb9d950", "chunk": "diff --git a/megamek/src/megamek/common/verifier/TestAero.java b/megamek/src/megamek/common/verifier/TestAero.java\nindex 69e3fddcdf..687028894c 100644\n--- a/megamek/src/megamek/common/verifier/TestAero.java\n+++ b/megamek/src/megamek/common/verifier/TestAero.java\n\n@@ -606,11 +606,6 @@ public class TestAero extends TestEntity {\n                     weight += linkedBy.getType().getTonnage(aero);\n                 }\n             }\n-            for (Mounted m : aero.getMisc()) {\n-                if (m.getType().hasFlag(MiscType.F_CLUB) && m.getType().hasSubType(MiscType.S_SPOT_WELDER)) {\n-                    weight += m.getType().getTonnage(aero);\n-                }\n-            }\n             // Power amp weighs:\n             //   energy weapon tonnage * 0.1 rounded to nearest half ton\n             return Math.ceil(0.1 * weight * 2) / 2.0;\n"}}, {"oid": "2e91720e4da23290354d961def8181787fb9d950", "url": "https://github.com/MegaMek/megamek/commit/2e91720e4da23290354d961def8181787fb9d950", "message": "Removed spot welder check from power amplifier calculation.\n\nConventional fighters can't mount them, so the check is not needed.", "committedDate": "2020-02-21T14:11:17Z", "type": "commit"}]}