{"pr_number": 1660, "pr_title": "Narrow/low profile quirk", "pr_createdAt": "2020-02-10T22:41:13Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1660", "timeline": [{"oid": "d44272fff8c3e58ab30014c849fcff9f57ef896a", "url": "https://github.com/MegaMek/megamek/commit/d44272fff8c3e58ab30014c849fcff9f57ef896a", "message": "new report message", "committedDate": "2020-02-02T03:19:39Z", "type": "commit"}, {"oid": "60bde69b84558a758016a776698f8a848e68c213", "url": "https://github.com/MegaMek/megamek/commit/60bde69b84558a758016a776698f8a848e68c213", "message": "Merge branch 'master' of https://github.com/MegaMek/megamek into narrow_low_profile_quirk", "committedDate": "2020-02-02T03:19:46Z", "type": "commit"}, {"oid": "c14d2632eecffd51d1920d4f3e59213d4231a64c", "url": "https://github.com/MegaMek/megamek/commit/c14d2632eecffd51d1920d4f3e59213d4231a64c", "message": "consolidate glancing blow logic for standard attacks", "committedDate": "2020-02-02T15:06:08Z", "type": "commit"}, {"oid": "24729a75865e64fb74a4cbdd2f36100889394b23", "url": "https://github.com/MegaMek/megamek/commit/24729a75865e64fb74a4cbdd2f36100889394b23", "message": "Merge branch 'master' of https://github.com/MegaMek/megamek into narrow_low_profile_quirk", "committedDate": "2020-02-04T02:29:42Z", "type": "commit"}, {"oid": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "url": "https://github.com/MegaMek/megamek/commit/1d786d2d9eae8f1641021314d7add8245ffe8c27", "message": "additional handlers", "committedDate": "2020-02-05T02:17:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzczOTcxMg==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377739712", "bodyText": "Conventional infantry target\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T16:15:35Z", "path": "megamek/src/megamek/common/weapons/LRMSwarmHandler.java", "diffHunk": "@@ -348,10 +337,9 @@ protected int calcDamagePerHit() {\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            if (bGlancing) {\n-                toReturn /= 2;\n-            }\n-            return (int) Math.floor(toReturn);\n+            \n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/LRMSwarmHandler.java b/megamek/src/megamek/common/weapons/LRMSwarmHandler.java\nindex b468bc8c87..f8b79ad02d 100644\n--- a/megamek/src/megamek/common/weapons/LRMSwarmHandler.java\n+++ b/megamek/src/megamek/common/weapons/LRMSwarmHandler.java\n\n@@ -329,7 +329,7 @@ public class LRMSwarmHandler extends LRMHandler {\n      */\n     @Override\n     protected int calcDamagePerHit() {\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             int missiles = waa.isSwarmingMissiles() ? waa.getSwarmMissiles()\n                     : wtype.getRackSize();\n             double toReturn = Compute.directBlowInfantryDamage(\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgxNDA3MQ==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377814071", "bodyText": "Should be rounded up for conventional infantry.", "author": "neoancient", "createdAt": "2020-02-11T18:22:55Z", "path": "megamek/src/megamek/common/weapons/PPCHandler.java", "diffHunk": "@@ -128,9 +128,8 @@ protected int calcDamagePerHit() {\n         } else if (bDirect) {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n+        \n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/PPCHandler.java b/megamek/src/megamek/common/weapons/PPCHandler.java\nindex 331687703e..9545124bef 100644\n--- a/megamek/src/megamek/common/weapons/PPCHandler.java\n+++ b/megamek/src/megamek/common/weapons/PPCHandler.java\n\n@@ -129,7 +129,7 @@ public class PPCHandler extends EnergyWeaponHandler {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n         \n-        toReturn = applyGlancingBlowModifier(toReturn, false);\n+        toReturn = applyGlancingBlowModifier(toReturn, target.isConventionalInfantry());\n \n         return (int) Math.ceil(toReturn);\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgxNTY5Ng==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377815696", "bodyText": "This is against conventional infantry\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T18:25:42Z", "path": "megamek/src/megamek/common/weapons/SRMFragHandler.java", "diffHunk": "@@ -71,9 +71,8 @@ protected int calcDamagePerHit() {\n             if (bDirect) {\n                 toReturn += toHit.getMoS() / 3;\n             }\n-            if (bGlancing) {\n-                toReturn = (int) Math.floor(toReturn / 2.0);\n-            }\n+            \n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/SRMFragHandler.java b/megamek/src/megamek/common/weapons/SRMFragHandler.java\nindex 1a6e3fd7b6..e50c5f7731 100644\n--- a/megamek/src/megamek/common/weapons/SRMFragHandler.java\n+++ b/megamek/src/megamek/common/weapons/SRMFragHandler.java\n\n@@ -66,13 +66,13 @@ public class SRMFragHandler extends SRMHandler {\n             toReturn *= ((BattleArmor) ae).getShootingStrength();\n         }\n         // against infantry, we have 1 hit\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             toReturn *= wtype.getRackSize();\n             if (bDirect) {\n                 toReturn += toHit.getMoS() / 3;\n             }\n             \n-            toReturn = applyGlancingBlowModifier(toReturn, false);\n+            toReturn = applyGlancingBlowModifier(toReturn, true);\n         }\n \n         if (((target instanceof Entity) && !(target instanceof Infantry))\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgxNjEwOQ==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377816109", "bodyText": "Infantry\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T18:26:27Z", "path": "megamek/src/megamek/common/weapons/SRMHandler.java", "diffHunk": "@@ -60,10 +60,10 @@ protected int calcDamagePerHit() {\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            if (bGlancing) {\n-                toReturn /= 2;\n-            }\n-            return (int) Math.floor(toReturn);\n+            \n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/SRMHandler.java b/megamek/src/megamek/common/weapons/SRMHandler.java\nindex ae2dc426b2..aa09f284e2 100644\n--- a/megamek/src/megamek/common/weapons/SRMHandler.java\n+++ b/megamek/src/megamek/common/weapons/SRMHandler.java\n\n@@ -54,14 +54,14 @@ public class SRMHandler extends MissileWeaponHandler {\n      */\n     @Override\n     protected int calcDamagePerHit() {\n-        if (target instanceof Infantry && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             double toReturn = Compute.directBlowInfantryDamage(\n                     wtype.getRackSize() * 2, bDirect ? toHit.getMoS() / 3 : 0,\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n             \n-            toReturn = applyGlancingBlowModifier(toReturn, false);\n+            toReturn = applyGlancingBlowModifier(toReturn, true);\n             \n             return (int) toReturn;\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgxNjY0Ng==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377816646", "bodyText": "Infantry\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T18:27:27Z", "path": "megamek/src/megamek/common/weapons/SRMTandemChargeHandler.java", "diffHunk": "@@ -195,9 +195,9 @@ protected int calcDamagePerHit() {\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            if (bGlancing) {\n-                toReturn /= 2;\n-            }\n+\n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/SRMTandemChargeHandler.java b/megamek/src/megamek/common/weapons/SRMTandemChargeHandler.java\nindex 5a6af2e7f5..536e27a9ce 100644\n--- a/megamek/src/megamek/common/weapons/SRMTandemChargeHandler.java\n+++ b/megamek/src/megamek/common/weapons/SRMTandemChargeHandler.java\n\n@@ -189,14 +195,14 @@ public class SRMTandemChargeHandler extends SRMHandler {\n      */\n     @Override\n     protected int calcDamagePerHit() {\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             double toReturn = Compute.directBlowInfantryDamage(\n                     wtype.getRackSize(), bDirect ? toHit.getMoS() / 3 : 0,\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n \n-            toReturn = applyGlancingBlowModifier(toReturn, false);\n+            toReturn = applyGlancingBlowModifier(toReturn, true);\n \n             return (int) Math.floor(toReturn);\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgzMjEwOA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377832108", "bodyText": "Conventional infantry target\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T18:55:35Z", "path": "megamek/src/megamek/common/weapons/battlearmor/BALBXHandler.java", "diffHunk": "@@ -51,10 +51,8 @@ protected int calcDamagePerHit() {\n                     wtype.getInfantryDamageClass(),\r\n                     ((Infantry) target).isMechanized(),\r\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\r\n-            if (bGlancing) {\r\n-                toReturn /= 2;\r\n-            }\r\n-            return (int) Math.floor(toReturn);\r\n+            toReturn = applyGlancingBlowModifier(toReturn, false);\r", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/battlearmor/BALBXHandler.java b/megamek/src/megamek/common/weapons/battlearmor/BALBXHandler.java\nindex 8472fdd8db..305c3ddff9 100644\n--- a/megamek/src/megamek/common/weapons/battlearmor/BALBXHandler.java\n+++ b/megamek/src/megamek/common/weapons/battlearmor/BALBXHandler.java\n\n@@ -45,13 +45,13 @@ public class BALBXHandler extends WeaponHandler {\n      */\n     @Override\n     protected int calcDamagePerHit() {\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             double toReturn = Compute.directBlowInfantryDamage(\n                     wtype.getRackSize() * 2, bDirect ? toHit.getMoS() / 3 : 0,\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            toReturn = applyGlancingBlowModifier(toReturn, false);\n+            toReturn = applyGlancingBlowModifier(toReturn, true);\n             return (int) toReturn;\n         }\n         return 1;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgzNDQxMA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377834410", "bodyText": "Round up for conventional infantry.", "author": "neoancient", "createdAt": "2020-02-11T18:59:47Z", "path": "megamek/src/megamek/common/weapons/ACWeaponHandler.java", "diffHunk": "@@ -70,9 +70,7 @@ protected int calcDamagePerHit() {\n         } else if (bDirect) {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/ACWeaponHandler.java b/megamek/src/megamek/common/weapons/ACWeaponHandler.java\nindex b4a1f7bb2d..d84db13483 100644\n--- a/megamek/src/megamek/common/weapons/ACWeaponHandler.java\n+++ b/megamek/src/megamek/common/weapons/ACWeaponHandler.java\n\n@@ -70,7 +70,7 @@ public class ACWeaponHandler extends AmmoWeaponHandler {\n         } else if (bDirect) {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n-        toReturn = applyGlancingBlowModifier(toReturn, false);\n+        toReturn = applyGlancingBlowModifier(toReturn, target.isConventionalInfantry());\n         if (game.getOptions().booleanOption(OptionsConstants.ADVCOMBAT_TACOPS_RANGE)\n             && nRange > wtype.getRanges(weapon)[RangeType.RANGE_LONG]) {\n             toReturn = (int) Math.floor(toReturn * .75);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgzNTQwMA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377835400", "bodyText": "Round up for conventional infantry.", "author": "neoancient", "createdAt": "2020-02-11T19:01:34Z", "path": "megamek/src/megamek/common/weapons/ArtilleryCannonWeaponHandler.java", "diffHunk": "@@ -271,17 +271,13 @@ public boolean handle(IGame.Phase phase, Vector<Report> vPhaseReport) {\n      */\n     @Override\n     protected int calcDamagePerHit() {\n-        float toReturn = wtype.getDamage();\n+        double toReturn = wtype.getDamage();\n         // area effect damage is double\n         if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n             toReturn /= 0.5;\n         }\n \n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n-\n-        // System.err.println(\"Attack is doing \" + toReturn + \" damage.\");\n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/ArtilleryCannonWeaponHandler.java b/megamek/src/megamek/common/weapons/ArtilleryCannonWeaponHandler.java\nindex 75a904940d..f4edbd01ac 100644\n--- a/megamek/src/megamek/common/weapons/ArtilleryCannonWeaponHandler.java\n+++ b/megamek/src/megamek/common/weapons/ArtilleryCannonWeaponHandler.java\n\n@@ -273,11 +273,11 @@ public class ArtilleryCannonWeaponHandler extends AmmoWeaponHandler {\n     protected int calcDamagePerHit() {\n         double toReturn = wtype.getDamage();\n         // area effect damage is double\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             toReturn /= 0.5;\n         }\n \n-        toReturn = applyGlancingBlowModifier(toReturn, false);\n+        toReturn = applyGlancingBlowModifier(toReturn, target.isConventionalInfantry());\n \n         return (int) Math.ceil(toReturn);\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgzNTY3MQ==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377835671", "bodyText": "Round up for conventional infantry.", "author": "neoancient", "createdAt": "2020-02-11T19:02:04Z", "path": "megamek/src/megamek/common/weapons/ArtilleryWeaponIndirectFireHandler.java", "diffHunk": "@@ -497,11 +497,7 @@ protected int calcDamagePerHit() {\n             toReturn /= 0.5;\n         }\n \n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n-\n-        // System.err.println(\"Attack is doing \" + toReturn + \" damage.\");\n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/ArtilleryWeaponIndirectFireHandler.java b/megamek/src/megamek/common/weapons/ArtilleryWeaponIndirectFireHandler.java\nindex 2858bf140d..685b7fda9e 100644\n--- a/megamek/src/megamek/common/weapons/ArtilleryWeaponIndirectFireHandler.java\n+++ b/megamek/src/megamek/common/weapons/ArtilleryWeaponIndirectFireHandler.java\n\n@@ -493,11 +493,11 @@ public class ArtilleryWeaponIndirectFireHandler extends AmmoWeaponHandler {\n             toReturn *= ba.getNumberActiverTroopers();\n         }\n         // area effect damage is double\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             toReturn /= 0.5;\n         }\n \n-        toReturn = applyGlancingBlowModifier(toReturn, false);\n+        toReturn = applyGlancingBlowModifier(toReturn, target.isConventionalInfantry());\n \n         return (int) Math.ceil(toReturn);\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgzNzIyNw==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377837227", "bodyText": "Conventional infantry target\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T19:04:52Z", "path": "megamek/src/megamek/common/weapons/ATMHandler.java", "diffHunk": "@@ -83,9 +83,7 @@ protected int calcDamagePerHit() {\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            if (bGlancing) {\n-                toReturn /= 2;\n-            }\n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/ATMHandler.java b/megamek/src/megamek/common/weapons/ATMHandler.java\nindex f96cfc3660..71fe383fe8 100644\n--- a/megamek/src/megamek/common/weapons/ATMHandler.java\n+++ b/megamek/src/megamek/common/weapons/ATMHandler.java\n\n@@ -77,13 +77,13 @@ public class ATMHandler extends MissileWeaponHandler {\n         } else {\n             toReturn = 2;\n         }\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             toReturn = Compute.directBlowInfantryDamage(\n                     wtype.getRackSize(), bDirect ? toHit.getMoS() / 3 : 0,\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            toReturn = applyGlancingBlowModifier(toReturn, false);\n+            toReturn = applyGlancingBlowModifier(toReturn, true);\n         }\n \n         return (int) toReturn;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgzNzg4OQ==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377837889", "bodyText": "Round up for conventional infantry.", "author": "neoancient", "createdAt": "2020-02-11T19:06:05Z", "path": "megamek/src/megamek/common/weapons/ChemicalLaserHandler.java", "diffHunk": "@@ -88,9 +88,8 @@ protected int calcDamagePerHit() {\n         } else if (bDirect) {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n+\n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/ChemicalLaserHandler.java b/megamek/src/megamek/common/weapons/ChemicalLaserHandler.java\nindex 57fe455194..5e79e212ae 100644\n--- a/megamek/src/megamek/common/weapons/ChemicalLaserHandler.java\n+++ b/megamek/src/megamek/common/weapons/ChemicalLaserHandler.java\n\n@@ -89,7 +89,7 @@ public class ChemicalLaserHandler extends AmmoWeaponHandler {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n \n-        toReturn = applyGlancingBlowModifier(toReturn, false);\n+        toReturn = applyGlancingBlowModifier(toReturn, target.isConventionalInfantry());\n \n         return (int) Math.ceil(toReturn);\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg0Mjc2NA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377842764", "bodyText": "Round up for conventional infantry.", "author": "neoancient", "createdAt": "2020-02-11T19:15:02Z", "path": "megamek/src/megamek/common/weapons/EnergyWeaponHandler.java", "diffHunk": "@@ -92,10 +92,8 @@ protected int calcDamagePerHit() {\n         } else if (bDirect) {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n-\n+        \n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/EnergyWeaponHandler.java b/megamek/src/megamek/common/weapons/EnergyWeaponHandler.java\nindex 6f50f819df..df0c16ec82 100644\n--- a/megamek/src/megamek/common/weapons/EnergyWeaponHandler.java\n+++ b/megamek/src/megamek/common/weapons/EnergyWeaponHandler.java\n\n@@ -93,7 +93,7 @@ public class EnergyWeaponHandler extends WeaponHandler {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n         \n-        toReturn = applyGlancingBlowModifier(toReturn, false);\n+        toReturn = applyGlancingBlowModifier(toReturn, target.isConventionalInfantry());\n         return (int) Math.ceil(toReturn);\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg0NDU3Ng==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377844576", "bodyText": "Round up for conventional infantry, down for other units.", "author": "neoancient", "createdAt": "2020-02-11T19:18:16Z", "path": "megamek/src/megamek/common/weapons/HyperLaserHandler.java", "diffHunk": "@@ -138,10 +138,8 @@ protected int calcDamagePerHit() {\n \r\n         }\r\n \r\n-        if (bGlancing) {\r\n-            toReturn = (int) Math.floor(toReturn / 2.0);\r\n-        }\r\n-        return (int) Math.ceil(toReturn);\r\n+        toReturn = applyGlancingBlowModifier(toReturn, true);\r", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/HyperLaserHandler.java b/megamek/src/megamek/common/weapons/HyperLaserHandler.java\nindex 228c9f9270..13c2202aeb 100644\n--- a/megamek/src/megamek/common/weapons/HyperLaserHandler.java\n+++ b/megamek/src/megamek/common/weapons/HyperLaserHandler.java\n\n@@ -129,8 +128,7 @@ public class HyperLaserHandler extends EnergyWeaponHandler {\n         if (game.getOptions().booleanOption(OptionsConstants.ADVCOMBAT_TACOPS_LOS_RANGE)\n                 && (nRange > nRanges[RangeType.RANGE_EXTREME])) {\n          // Against conventional infantry, treat as direct fire energy\n-            if ((target instanceof Infantry) \n-                    && !(target instanceof BattleArmor) ) {\n+            if (target.isConventionalInfantry()) {\n                 toReturn = (int) Math.floor(toReturn / 2.0);\n             } else { // Else, treat as pulse weapon\n                 toReturn = (int) Math.floor(toReturn / 3.0);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg0NTIwMw==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377845203", "bodyText": "Conventional infantry target\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T19:19:24Z", "path": "megamek/src/megamek/common/weapons/LBXHandler.java", "diffHunk": "@@ -65,10 +65,8 @@ protected int calcDamagePerHit() {\n                     WeaponType.WEAPON_CLUSTER_BALLISTIC,\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            if (bGlancing) {\n-                toReturn /= 2;\n-            }\n-            return (int) Math.floor(toReturn);\n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/LBXHandler.java b/megamek/src/megamek/common/weapons/LBXHandler.java\nindex ea0bfe5901..3cf0918a02 100644\n--- a/megamek/src/megamek/common/weapons/LBXHandler.java\n+++ b/megamek/src/megamek/common/weapons/LBXHandler.java\n\n@@ -59,13 +59,13 @@ public class LBXHandler extends AmmoWeaponHandler {\n      */\n     @Override\n     protected int calcDamagePerHit() {\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             double toReturn = Compute.directBlowInfantryDamage(\n                     wtype.getDamage(), bDirect ? toHit.getMoS() / 3 : 0,\n                     WeaponType.WEAPON_CLUSTER_BALLISTIC,\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            toReturn = applyGlancingBlowModifier(toReturn, false);\n+            toReturn = applyGlancingBlowModifier(toReturn, true);\n             return (int) toReturn;\n         }\n         return 1;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1MzQyOA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377853428", "bodyText": "I think the comment on \"partial streak missiles\" refers to iATMs firing either as streak missiles (direct fire) or as cluster weapons (indirect fire). I would say that when firing as streak they are unaffected by glancing blows, but in the case of indirect fire they would get the damage reduction (since attacks against conventional infantry don't use the cluster table).\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        if (streakInactive()) {\n          \n          \n            \n                            toReturn = applyGlancingBlowModifier(toReturn, true);\n          \n          \n            \n                        }", "author": "neoancient", "createdAt": "2020-02-11T19:34:51Z", "path": "megamek/src/megamek/common/weapons/CLIATMHandler.java", "diffHunk": "@@ -95,11 +95,9 @@ protected int calcDamagePerHit() {\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            if (bGlancing) {\n-                toReturn /= 2; // Is this correct for partial streak missiles??\n-                // it seems as if this only affects infantry -\n-                // I'm going to ignore this.\n-            }\n+            \n+            // some question here about \"partial streak missiles\"\n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/CLIATMHandler.java b/megamek/src/megamek/common/weapons/CLIATMHandler.java\nindex c487760a80..f999729892 100644\n--- a/megamek/src/megamek/common/weapons/CLIATMHandler.java\n+++ b/megamek/src/megamek/common/weapons/CLIATMHandler.java\n\n@@ -89,7 +89,7 @@ public class CLIATMHandler extends ATMHandler {\n             toReturn = 2;\n         }\n \n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             toReturn = Compute.directBlowInfantryDamage(\n                     wtype.getRackSize(), bDirect ? toHit.getMoS() / 3 : 0,\n                     wtype.getInfantryDamageClass(),\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1NDk5MA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377854990", "bodyText": "Conventional infantry target\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                            toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T19:37:46Z", "path": "megamek/src/megamek/common/weapons/MekMortarHandler.java", "diffHunk": "@@ -122,10 +122,9 @@ protected int calcDamagePerHit() {\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            if (bGlancing) {\n-                toReturn /= 2;\n-            }\n-            return (int) Math.floor(toReturn);\n+            \n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/MekMortarHandler.java b/megamek/src/megamek/common/weapons/MekMortarHandler.java\nindex fb9d9f7df7..978b9a0d03 100644\n--- a/megamek/src/megamek/common/weapons/MekMortarHandler.java\n+++ b/megamek/src/megamek/common/weapons/MekMortarHandler.java\n\n@@ -116,14 +116,14 @@ public class MekMortarHandler extends AmmoWeaponHandler {\n      */\n     @Override\n     protected int calcDamagePerHit() {\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             double toReturn = Compute.directBlowInfantryDamage(\n                     wtype.getRackSize(), bDirect ? toHit.getMoS() / 3 : 0,\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n             \n-            toReturn = applyGlancingBlowModifier(toReturn, false);\n+            toReturn = applyGlancingBlowModifier(toReturn, true);\n             return (int) toReturn;\n         }\n         return 2;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1NTUyMg==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377855522", "bodyText": "Conventional infantry target\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                            toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T19:38:45Z", "path": "megamek/src/megamek/common/weapons/MGHandler.java", "diffHunk": "@@ -83,18 +82,16 @@ protected int calcDamagePerHit() {\n                         wtype.getInfantryDamageClass(),\n                         ((Infantry) target).isMechanized(),\n                         toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-                if (bGlancing) {\n-                    toReturn = (int) Math.floor(toReturn / 2.0);\n-                }\n+                \n+                toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/MGHandler.java b/megamek/src/megamek/common/weapons/MGHandler.java\nindex dfac057e96..f06ad8fa67 100644\n--- a/megamek/src/megamek/common/weapons/MGHandler.java\n+++ b/megamek/src/megamek/common/weapons/MGHandler.java\n\n@@ -75,15 +74,14 @@ public class MGHandler extends AmmoWeaponHandler {\n                                     toReturn * 2);\n             }\n         } else {\n-            if ((target instanceof Infantry)\n-                    && !(target instanceof BattleArmor)) {\n+            if (target.isConventionalInfantry()) {\n                 toReturn = Compute.directBlowInfantryDamage(\n                         wtype.getDamage(), bDirect ? toHit.getMoS() / 3 : 0,\n                         wtype.getInfantryDamageClass(),\n                         ((Infantry) target).isMechanized(),\n                         toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n                 \n-                toReturn = applyGlancingBlowModifier(toReturn, false);\n+                toReturn = applyGlancingBlowModifier(toReturn, true);\n             } else {\n                 toReturn = wtype.getDamage();\n                 if (bDirect) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1NTk4NA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377855984", "bodyText": "Conventional infantry should be rounded up.", "author": "neoancient", "createdAt": "2020-02-11T19:39:37Z", "path": "megamek/src/megamek/common/weapons/NarcExplosiveHandler.java", "diffHunk": "@@ -133,9 +133,7 @@ protected int calcDamagePerHit() {\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n             toReturn = Math.ceil(toReturn);\n         }\n-        if (bGlancing) {\n-            return (int) Math.floor(toReturn / 2.0);\n-        }\n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/NarcExplosiveHandler.java b/megamek/src/megamek/common/weapons/NarcExplosiveHandler.java\nindex 9aa20bd38a..35ca0afcb3 100644\n--- a/megamek/src/megamek/common/weapons/NarcExplosiveHandler.java\n+++ b/megamek/src/megamek/common/weapons/NarcExplosiveHandler.java\n\n@@ -125,7 +125,7 @@ public class NarcExplosiveHandler extends MissileWeaponHandler {\n         } else {\n             toReturn = 4;\n         }\n-        if ((target instanceof Infantry) && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             toReturn = Compute.directBlowInfantryDamage(toReturn,\n                     bDirect ? toHit.getMoS() / 3 : 0,\n                     WeaponType.WEAPON_DIRECT_FIRE,\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1NjMwMg==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377856302", "bodyText": "Conventional infantry should be rounded up.", "author": "neoancient", "createdAt": "2020-02-11T19:40:21Z", "path": "megamek/src/megamek/common/weapons/PlasmaCannonHandler.java", "diffHunk": "@@ -296,9 +296,7 @@ protected int calcDamagePerHit() {\n         } else if (bDirect) {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/PlasmaCannonHandler.java b/megamek/src/megamek/common/weapons/PlasmaCannonHandler.java\nindex 9efd57de08..3ac0207a71 100644\n--- a/megamek/src/megamek/common/weapons/PlasmaCannonHandler.java\n+++ b/megamek/src/megamek/common/weapons/PlasmaCannonHandler.java\n\n@@ -296,7 +296,7 @@ public class PlasmaCannonHandler extends AmmoWeaponHandler {\n         } else if (bDirect) {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n-        toReturn = applyGlancingBlowModifier(toReturn, false);\n+        toReturn = applyGlancingBlowModifier(toReturn, target.isConventionalInfantry());\n         return toReturn;\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1NzI2MA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377857260", "bodyText": "Conventional infantry should be rounded up.", "author": "neoancient", "createdAt": "2020-02-11T19:42:07Z", "path": "megamek/src/megamek/common/weapons/PulseLaserWeaponHandler.java", "diffHunk": "@@ -89,9 +89,8 @@ protected int calcDamagePerHit() {\n         } else if (bDirect) {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n+        \n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/PulseLaserWeaponHandler.java b/megamek/src/megamek/common/weapons/PulseLaserWeaponHandler.java\nindex 90caef45a5..f5253c35e1 100644\n--- a/megamek/src/megamek/common/weapons/PulseLaserWeaponHandler.java\n+++ b/megamek/src/megamek/common/weapons/PulseLaserWeaponHandler.java\n\n@@ -90,7 +90,7 @@ public class PulseLaserWeaponHandler extends EnergyWeaponHandler {\n             toReturn = Math.min(toReturn + (toHit.getMoS() / 3), toReturn * 2);\n         }\n         \n-        toReturn = applyGlancingBlowModifier(toReturn, false);\n+        toReturn = applyGlancingBlowModifier(toReturn, target.isConventionalInfantry());\n         return (int) Math.ceil(toReturn);\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1ODA5Ng==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377858096", "bodyText": "Conventional infantry should be rounded up.", "author": "neoancient", "createdAt": "2020-02-11T19:43:47Z", "path": "megamek/src/megamek/common/weapons/RifleWeaponHandler.java", "diffHunk": "@@ -87,9 +87,7 @@ protected int calcDamagePerHit() {\n             }\n         }\n \n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/RifleWeaponHandler.java b/megamek/src/megamek/common/weapons/RifleWeaponHandler.java\nindex 0bbafaf8fe..34636ac1f6 100644\n--- a/megamek/src/megamek/common/weapons/RifleWeaponHandler.java\n+++ b/megamek/src/megamek/common/weapons/RifleWeaponHandler.java\n\n@@ -87,7 +87,7 @@ public class RifleWeaponHandler extends AmmoWeaponHandler {\n             }\n         }\n \n-        toReturn = applyGlancingBlowModifier(toReturn, false);\n+        toReturn = applyGlancingBlowModifier(toReturn, target.isConventionalInfantry());\n \n         if (game.getOptions().booleanOption(OptionsConstants.ADVCOMBAT_TACOPS_RANGE)\n             && (nRange > wtype.getRanges(weapon)[RangeType.RANGE_LONG])) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1ODUyNA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377858524", "bodyText": "This is against conventional infantry\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T19:44:31Z", "path": "megamek/src/megamek/common/weapons/SRMDeadFireHandler.java", "diffHunk": "@@ -66,10 +66,9 @@ protected int calcDamagePerHit() {\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n-            if (bGlancing) {\n-                toReturn /= 2;\n-            }\n-            return (int) Math.floor(toReturn);\n+            \n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/SRMDeadFireHandler.java b/megamek/src/megamek/common/weapons/SRMDeadFireHandler.java\nindex ddfd9255c7..87acdaff28 100644\n--- a/megamek/src/megamek/common/weapons/SRMDeadFireHandler.java\n+++ b/megamek/src/megamek/common/weapons/SRMDeadFireHandler.java\n\n@@ -60,14 +60,14 @@ public class SRMDeadFireHandler extends SRMHandler {\n      */\n     @Override\n     protected int calcDamagePerHit() {\n-        if (target instanceof Infantry && !(target instanceof BattleArmor)) {\n+        if (target.isConventionalInfantry()) {\n             double toReturn = Compute.directBlowInfantryDamage(\n                     wtype.getRackSize() * 3, bDirect ? toHit.getMoS() / 3 : 0,\n                     wtype.getInfantryDamageClass(),\n                     ((Infantry) target).isMechanized(),\n                     toHit.getThruBldg() != null, ae.getId(), calcDmgPerHitReport);\n             \n-            toReturn = applyGlancingBlowModifier(toReturn, false);\n+            toReturn = applyGlancingBlowModifier(toReturn, true);\n             return (int) toReturn;\n         }\n         return 3;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg2MDMyMA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377860320", "bodyText": "Round up against conventional infantry", "author": "neoancient", "createdAt": "2020-02-11T19:47:54Z", "path": "megamek/src/megamek/common/weapons/VariableSpeedPulseLaserWeaponHandler.java", "diffHunk": "@@ -104,9 +104,7 @@ protected int calcDamagePerHit() {\n \n         }\n \n-        if (bGlancing) {\n-            toReturn = (int) Math.floor(toReturn / 2.0);\n-        }\n+        toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/VariableSpeedPulseLaserWeaponHandler.java b/megamek/src/megamek/common/weapons/VariableSpeedPulseLaserWeaponHandler.java\nindex aa351abe2e..0553335ac8 100644\n--- a/megamek/src/megamek/common/weapons/VariableSpeedPulseLaserWeaponHandler.java\n+++ b/megamek/src/megamek/common/weapons/VariableSpeedPulseLaserWeaponHandler.java\n\n@@ -95,8 +94,7 @@ public class VariableSpeedPulseLaserWeaponHandler extends EnergyWeaponHandler {\n         if (game.getOptions().booleanOption(OptionsConstants.ADVCOMBAT_TACOPS_LOS_RANGE)\n                 && (nRange > nRanges[RangeType.RANGE_EXTREME])) {\n          // Against conventional infantry, treat as direct fire energy\n-            if ((target instanceof Infantry) \n-                    && !(target instanceof BattleArmor) ) {\n+            if (target.isConventionalInfantry()) {\n                 toReturn = (int) Math.floor(toReturn / 2.0);\n             } else { // Else, treat as pulse weapon\n                 toReturn = (int) Math.floor(toReturn / 3.0);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg2MDc5MA==", "url": "https://github.com/MegaMek/megamek/pull/1660#discussion_r377860790", "bodyText": "This is against infantry\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, false);\n          \n          \n            \n                        toReturn = applyGlancingBlowModifier(toReturn, true);", "author": "neoancient", "createdAt": "2020-02-11T19:48:48Z", "path": "megamek/src/megamek/common/weapons/VehicleFlamerHandler.java", "diffHunk": "@@ -128,9 +128,8 @@ protected int calcDamagePerHit() {\n             if (((Entity) target).hasAbility(OptionsConstants.MD_PAIN_SHUNT)) {\n                 toReturn /= 2;\n             }\n-            if (bGlancing) {\n-                toReturn = Math.ceil(toReturn / 2.0);\n-            }\n+\n+            toReturn = applyGlancingBlowModifier(toReturn, false);", "originalCommit": "1d786d2d9eae8f1641021314d7add8245ffe8c27", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bb7b39db8c68411d92cf9d52be324431483827ee", "chunk": "diff --git a/megamek/src/megamek/common/weapons/VehicleFlamerHandler.java b/megamek/src/megamek/common/weapons/VehicleFlamerHandler.java\nindex f414b2596f..09824a410d 100644\n--- a/megamek/src/megamek/common/weapons/VehicleFlamerHandler.java\n+++ b/megamek/src/megamek/common/weapons/VehicleFlamerHandler.java\n\n@@ -129,7 +129,7 @@ public class VehicleFlamerHandler extends AmmoWeaponHandler {\n                 toReturn /= 2;\n             }\n \n-            toReturn = applyGlancingBlowModifier(toReturn, false);\n+            toReturn = applyGlancingBlowModifier(toReturn, true);\n         } else {\n             toReturn = super.calcDamagePerHit();\n         }\n"}}, {"oid": "bb7b39db8c68411d92cf9d52be324431483827ee", "url": "https://github.com/MegaMek/megamek/commit/bb7b39db8c68411d92cf9d52be324431483827ee", "message": "code review changes", "committedDate": "2020-02-12T01:57:41Z", "type": "commit"}, {"oid": "e86e8601295b8a650f977adb9d458b9e0c72c3c5", "url": "https://github.com/MegaMek/megamek/commit/e86e8601295b8a650f977adb9d458b9e0c72c3c5", "message": "Merge branch 'master' of https://github.com/MegaMek/megamek into narrow_low_profile_quirk", "committedDate": "2020-02-12T01:57:58Z", "type": "commit"}, {"oid": "fc5db5015f0534dbe1ead753b4d17d0aceb50a5c", "url": "https://github.com/MegaMek/megamek/commit/fc5db5015f0534dbe1ead753b4d17d0aceb50a5c", "message": "fix arithmetic; eliminate to-hit penalty", "committedDate": "2020-02-13T01:46:49Z", "type": "commit"}]}