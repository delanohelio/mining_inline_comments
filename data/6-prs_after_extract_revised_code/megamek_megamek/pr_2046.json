{"pr_number": 2046, "pr_title": "no minimum range restriction for arty flak attacks vs ASF", "pr_createdAt": "2020-07-03T01:53:51Z", "pr_url": "https://github.com/MegaMek/megamek/pull/2046", "timeline": [{"oid": "a17408b15d23beb8dab3a3f55531f413c6705a51", "url": "https://github.com/MegaMek/megamek/commit/a17408b15d23beb8dab3a3f55531f413c6705a51", "message": "no minimum range restriction for arty flak attacks vs ASF", "committedDate": "2020-07-03T01:43:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY4ODAyMQ==", "url": "https://github.com/MegaMek/megamek/pull/2046#discussion_r449688021", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if((weaponType.getDamage() == WeaponType.DAMAGE_BY_CLUSTERTABLE) ||\n          \n          \n            \n                    if ((weaponType.getDamage() == WeaponType.DAMAGE_BY_CLUSTERTABLE) ||", "author": "Windchild292", "createdAt": "2020-07-03T19:25:22Z", "path": "megamek/src/megamek/client/bot/princess/WeaponFireInfo.java", "diffHunk": "@@ -405,6 +405,13 @@ private WeaponAttackAction buildBombAttackAction(final int[] bombPayload) {\n             return 7D;\n         }\n \n+        // artillery and cluster table use the rack size as the base damage amount\n+        // a little inaccurate, but better than ignoring those weapons entirely       \n+        if((weaponType.getDamage() == WeaponType.DAMAGE_BY_CLUSTERTABLE) ||", "originalCommit": "a17408b15d23beb8dab3a3f55531f413c6705a51", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODkwMw==", "url": "https://github.com/MegaMek/megamek/pull/2046#discussion_r449778903", "bodyText": "Should this check for Flak ammunition?\nAlso, I don't believe isAirborne handles landed VTOLs (which do seem to be a valid target based on my read of the rules in question). I'm not even going to ask about the other stuff expending VTOL MPs during a turn they are landed, for example, as that would also be a valid target based on my read of the rules.", "author": "Windchild292", "createdAt": "2020-07-04T14:45:13Z", "path": "megamek/src/megamek/common/actions/WeaponAttackAction.java", "diffHunk": "@@ -1780,7 +1780,7 @@ private static String toHitIsImpossible(IGame game, Entity ae, int attackerId, T\n                     return Messages.getString(\"WeaponAttackAction.NoDirectCruiseMissile\");\n                 }\n                 // Direct fire artillery cannot be fired at less than 6 hexes\n-                if (isArtilleryDirect && (Compute.effectiveDistance(game, ae, target) <= 6)) {\n+                if (isArtilleryDirect && !target.isAirborne() && (Compute.effectiveDistance(game, ae, target) <= 6)) {\n                     return Messages.getString(\"WeaponAttackAction.TooShortForDirectArty\");\n                 }", "originalCommit": "a17408b15d23beb8dab3a3f55531f413c6705a51", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc4MDA3Ng==", "url": "https://github.com/MegaMek/megamek/pull/2046#discussion_r449780076", "bodyText": "The arty actually uses standard ammo to do this type of attack.\nPer TacOps page 185, the minimum range exception only applies to attacks targeting \"airborne aerospace units\", so VTOLs still need to be out of minimum range to be targeted. isAirborne() specifically returns true when the entity is an airborne aerospace unit and not an airborne VTOL.", "author": "NickAragua", "createdAt": "2020-07-04T15:00:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODkwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc4MDgyNA==", "url": "https://github.com/MegaMek/megamek/pull/2046#discussion_r449780824", "bodyText": "First line states any ordnance with the \"F\" Damage type in the brackets?\nMy bad, I missed that bit. Although that raises a different problem, namely isAirborne returns true if the altitude is greater than 0 or the movement mode is either aerodyne or spheroid.", "author": "Windchild292", "createdAt": "2020-07-04T15:11:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODkwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkxMDcxNQ==", "url": "https://github.com/MegaMek/megamek/pull/2046#discussion_r449910715", "bodyText": "I checked it, and MegaMek only allows targeting of airborne aerospace units using F-type ammo (which basically means standard ammo) with direct-fire artillery - cluster and FAE don't show as allowing a direct attack vs airborne ASF.\nI'm not really sure if there is any other problem with using isAirborne(), that's the standard test we use to check if a unit is an ASF and currently in the air. The only point of this specific check is to see if we need to declare the attack as impossible due to being within minimum range.", "author": "NickAragua", "createdAt": "2020-07-05T19:30:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODkwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAyNzI4MQ==", "url": "https://github.com/MegaMek/megamek/pull/2046#discussion_r451027281", "bodyText": "Wouldn't that still return true for a vtol hovering at a higher elevation though?", "author": "Windchild292", "createdAt": "2020-07-07T17:26:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODkwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMjQzNw==", "url": "https://github.com/MegaMek/megamek/pull/2046#discussion_r451032437", "bodyText": "Specifically no. It's only for \"airborne units in the manner of an aerospace fighter\".", "author": "NickAragua", "createdAt": "2020-07-07T17:35:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODkwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMjczOQ==", "url": "https://github.com/MegaMek/megamek/pull/2046#discussion_r451032739", "bodyText": "There's a separate \"isAirborneVTOLorWIGE\" method that handles the VTOL situation.", "author": "NickAragua", "createdAt": "2020-07-07T17:36:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODkwMw=="}], "type": "inlineReview", "revised_code": null}]}