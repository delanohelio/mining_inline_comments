{"pr_number": 1711, "pr_title": "Add Entity.getPriceMultiplier() method", "pr_createdAt": "2020-02-22T23:28:42Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1711", "timeline": [{"oid": "16e469b171f1eb3bf47401ff2c02b10ed9c9dc1e", "url": "https://github.com/MegaMek/megamek/commit/16e469b171f1eb3bf47401ff2c02b10ed9c9dc1e", "message": "Add Entity.getPriceMultiplier() method\n\nRefactor various Entity subtypes to move multiplier data from getCost() into getPriceMultiplier().\n\nThis enables external access to the multiplicative construction cost modifiers, which is needed to support\nmore accurate price calculations in MekHQ.", "committedDate": "2020-02-22T22:29:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk1NzI2Nw==", "url": "https://github.com/MegaMek/megamek/pull/1711#discussion_r382957267", "bodyText": "Why 5x for anti-mek trained? Previous code was 1x (unless this diff is odd).", "author": "sixlettervariables", "createdAt": "2020-02-23T02:12:26Z", "path": "megamek/src/megamek/common/Infantry.java", "diffHunk": "@@ -1577,75 +1576,79 @@ else if(nSneak == 3) {\n         //Cost of armor on a per man basis added\n         cost += (armorcost * menStarting);\n \n+        // Price multiplier includes anti-mech training, motive type, and specializations\n+        cost = cost * getPriceMultiplier();\n+\n+        //add in field gun costs\n+        for (Mounted mounted : getEquipment()) {\n+            if(mounted.getLocation() == LOC_FIELD_GUNS) {\n+                cost += Math.floor(mounted.getType().getCost(this, false, mounted.getLocation()));\n+            }\n+        }\n+        return cost;\n+    }\n+\n+    @Override\n+    public double getPriceMultiplier() {\n+        double priceMultiplier = 1.0;\n \n         //Anti-Mek Trained Multiplier\n         if (isAntiMekTrained()) {\n-            multiplier = 1;\n+            priceMultiplier *= 5.0;", "originalCommit": "16e469b171f1eb3bf47401ff2c02b10ed9c9dc1e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzAyMzAyMA==", "url": "https://github.com/MegaMek/megamek/pull/1711#discussion_r383023020", "bodyText": "Oh sorry, I should have called that out in the commit. 5.0x is the correct multiplier per the Tech Manual (p. 282).\nIt looks like this flag might not actually be getting used though - I see no cost difference between the regular and Anti-Mech foot platoons with this change applied.", "author": "RAldrich", "createdAt": "2020-02-23T17:28:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk1NzI2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzAyMzE0Mg==", "url": "https://github.com/MegaMek/megamek/pull/1711#discussion_r383023142", "bodyText": "TM page 282 shows anti-mech training is x5 price multiplier", "author": "rroby1", "createdAt": "2020-02-23T17:30:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk1NzI2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzAzMDU2NA==", "url": "https://github.com/MegaMek/megamek/pull/1711#discussion_r383030564", "bodyText": "@RAldrich that'll be an existing bug then.", "author": "sixlettervariables", "createdAt": "2020-02-23T19:15:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk1NzI2Nw=="}], "type": "inlineReview", "revised_code": null}]}