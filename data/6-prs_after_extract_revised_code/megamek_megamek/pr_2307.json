{"pr_number": 2307, "pr_title": "Fix cost calculation for tank and conventional fighter heat sinks and power amplifiers", "pr_createdAt": "2020-10-05T17:41:23Z", "pr_url": "https://github.com/MegaMek/megamek/pull/2307", "timeline": [{"oid": "a7fa985afc16d98ae3e5cc19ffcdeb7bc190a17e", "url": "https://github.com/MegaMek/megamek/commit/a7fa985afc16d98ae3e5cc19ffcdeb7bc190a17e", "message": "Include PPC capacitors and spot welders in PA weight calculation.", "committedDate": "2020-10-05T15:53:00Z", "type": "commit"}, {"oid": "538a1d521328d7b1520000363e2c569949639651", "url": "https://github.com/MegaMek/megamek/commit/538a1d521328d7b1520000363e2c569949639651", "message": "Added static method to calculate heat neutral HS requirement without instantiating TestEntity.", "committedDate": "2020-10-05T15:56:04Z", "type": "commit"}, {"oid": "e7a6c6c5dc6e26376a4929c1cc1e0d563d4623bc", "url": "https://github.com/MegaMek/megamek/commit/e7a6c6c5dc6e26376a4929c1cc1e0d563d4623bc", "message": "Use existing methods to calculate heat sink and power amplifier cost.", "committedDate": "2020-10-05T17:07:56Z", "type": "commit"}, {"oid": "b70d51ccb282593295014a3c9ccfae95045a0359", "url": "https://github.com/MegaMek/megamek/commit/b70d51ccb282593295014a3c9ccfae95045a0359", "message": "Calculate heat sink cost correctly for conventional fighters.", "committedDate": "2020-10-05T17:09:09Z", "type": "commit"}, {"oid": "839a122624e27235b4c2d171fa90eecd32375212", "url": "https://github.com/MegaMek/megamek/commit/839a122624e27235b4c2d171fa90eecd32375212", "message": "Include PPC capacitor in turret weight.", "committedDate": "2020-10-05T17:25:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg0NTEyNg==", "url": "https://github.com/MegaMek/megamek/pull/2307#discussion_r499845126", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                                            || entity.getEngine().getEngineType() == Engine.FISSION)) {\n          \n          \n            \n                                                            || (entity.getEngine().getEngineType() == Engine.FISSION))) {", "author": "Windchild292", "createdAt": "2020-10-05T20:12:51Z", "path": "megamek/src/megamek/common/verifier/TestEntity.java", "diffHunk": "@@ -855,16 +866,16 @@ protected int heatNeutralHSRequirement() {\n                 heat += 5;\n             }\n         }\n-        for (Mounted m : getEntity().getMisc()) {\n+        for (Mounted m : entity.getMisc()) {\n             // Spot welders are treated as energy weapons on units that don't have a fusion or fission engine\n             if (m.getType().hasFlag(MiscType.F_CLUB) && m.getType().hasSubType(MiscType.S_SPOT_WELDER)\n-                && getEntity().hasEngine() && (getEntity().getEngine().isFusion()\n-                                                || getEntity().getEngine().getEngineType() == Engine.FISSION)) {\n+                && entity.hasEngine() && (entity.getEngine().isFusion()\n+                                                || entity.getEngine().getEngineType() == Engine.FISSION)) {", "originalCommit": "839a122624e27235b4c2d171fa90eecd32375212", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0c661e4075a6858b75776e7bb45a9f17647515d1", "chunk": "diff --git a/megamek/src/megamek/common/verifier/TestEntity.java b/megamek/src/megamek/common/verifier/TestEntity.java\nindex 858f61adc3..0e6b5d429b 100755\n--- a/megamek/src/megamek/common/verifier/TestEntity.java\n+++ b/megamek/src/megamek/common/verifier/TestEntity.java\n\n@@ -870,7 +870,7 @@ public abstract class TestEntity implements TestEntityOption {\n             // Spot welders are treated as energy weapons on units that don't have a fusion or fission engine\n             if (m.getType().hasFlag(MiscType.F_CLUB) && m.getType().hasSubType(MiscType.S_SPOT_WELDER)\n                 && entity.hasEngine() && (entity.getEngine().isFusion()\n-                                                || entity.getEngine().getEngineType() == Engine.FISSION)) {\n+                                                || (entity.getEngine().getEngineType() == Engine.FISSION))) {\n                 continue;\n             }\n             heat += m.getType().getHeat();\n"}}, {"oid": "0c661e4075a6858b75776e7bb45a9f17647515d1", "url": "https://github.com/MegaMek/megamek/commit/0c661e4075a6858b75776e7bb45a9f17647515d1", "message": "Update megamek/src/megamek/common/verifier/TestEntity.java\n\nCo-authored-by: Justin Bowen <39067288+Windchild292@users.noreply.github.com>", "committedDate": "2020-10-06T17:17:50Z", "type": "commit"}]}