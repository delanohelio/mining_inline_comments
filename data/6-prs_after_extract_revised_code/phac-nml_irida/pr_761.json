{"pr_number": 761, "pr_title": "Object store/ gui", "pr_createdAt": "2020-07-20T23:36:53Z", "pr_url": "https://github.com/phac-nml/irida/pull/761", "timeline": [{"oid": "5e2131d0b3a2438a5c971e29b60569848dff900d", "url": "https://github.com/phac-nml/irida/commit/5e2131d0b3a2438a5c971e29b60569848dff900d", "message": "FASTQC images are retrieved from local or cloud storage depending on which implementation of iridaFileStorageService is being used", "committedDate": "2020-04-14T22:15:28Z", "type": "commit"}, {"oid": "cdd45c63fe3cc7d9bdc9fbd9c61c907149d3720f", "url": "https://github.com/phac-nml/irida/commit/cdd45c63fe3cc7d9bdc9fbd9c61c907149d3720f", "message": "Reference, sequence, and assembly can be downloaded from cloud as well as local storage", "committedDate": "2020-04-14T22:59:19Z", "type": "commit"}, {"oid": "7835559706fea6dcedac5cdb8a91148609bf6714", "url": "https://github.com/phac-nml/irida/commit/7835559706fea6dcedac5cdb8a91148609bf6714", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-04-16T15:36:56Z", "type": "commit"}, {"oid": "a7c98e00eb14593897dff36c1009d6992a63a035", "url": "https://github.com/phac-nml/irida/commit/a7c98e00eb14593897dff36c1009d6992a63a035", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-04-20T20:54:51Z", "type": "commit"}, {"oid": "2780c07a1a19fbd4db69f7a788b1436a8bd20df5", "url": "https://github.com/phac-nml/irida/commit/2780c07a1a19fbd4db69f7a788b1436a8bd20df5", "message": "Merged base and azure branches into branch and fixed merge conflicts", "committedDate": "2020-04-22T20:24:57Z", "type": "commit"}, {"oid": "5c9a116e67560e1ec4d927217eff629c5d39e309", "url": "https://github.com/phac-nml/irida/commit/5c9a116e67560e1ec4d927217eff629c5d39e309", "message": "Merged aws branch and fixed merge conflicts", "committedDate": "2020-04-22T20:32:20Z", "type": "commit"}, {"oid": "13a515574bba526c2ac3a4e404d3eba9f2b70af4", "url": "https://github.com/phac-nml/irida/commit/13a515574bba526c2ac3a4e404d3eba9f2b70af4", "message": "Updated azure file storage service to close the inputstream before returning the bytes of a file.", "committedDate": "2020-04-23T17:53:02Z", "type": "commit"}, {"oid": "5c085cb96fc49d3885dc0d38b7dad718fe4d1dc1", "url": "https://github.com/phac-nml/irida/commit/5c085cb96fc49d3885dc0d38b7dad718fe4d1dc1", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-04-27T19:36:00Z", "type": "commit"}, {"oid": "8b7a35db140539c6df0199a3f8b95d1b0674e2af", "url": "https://github.com/phac-nml/irida/commit/8b7a35db140539c6df0199a3f8b95d1b0674e2af", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-04-29T15:59:52Z", "type": "commit"}, {"oid": "6b143fd9227654aebdb1997ed03033e49dcb2fc2", "url": "https://github.com/phac-nml/irida/commit/6b143fd9227654aebdb1997ed03033e49dcb2fc2", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-04-29T16:00:03Z", "type": "commit"}, {"oid": "04dbb53007c8f1d26627bd4617795d8fabbe42dd", "url": "https://github.com/phac-nml/irida/commit/04dbb53007c8f1d26627bd4617795d8fabbe42dd", "message": "Removed unused imports and added missing javadoc comment", "committedDate": "2020-04-29T16:31:43Z", "type": "commit"}, {"oid": "544187bd7922427987db5dedce10f5b2059d3971", "url": "https://github.com/phac-nml/irida/commit/544187bd7922427987db5dedce10f5b2059d3971", "message": "Updated downloading of analysis outputs as a zipped folder with cloud stored files", "committedDate": "2020-04-30T17:14:48Z", "type": "commit"}, {"oid": "df4172aebaf1aec91ef670522def257af92e85a0", "url": "https://github.com/phac-nml/irida/commit/df4172aebaf1aec91ef670522def257af92e85a0", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-04-30T18:56:02Z", "type": "commit"}, {"oid": "8318a79a7fea09c2fff3f0a96244821b980e9bbc", "url": "https://github.com/phac-nml/irida/commit/8318a79a7fea09c2fff3f0a96244821b980e9bbc", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-04-30T18:56:10Z", "type": "commit"}, {"oid": "15caf201829bb9a3a9a8f65ca967214e7f46c8a4", "url": "https://github.com/phac-nml/irida/commit/15caf201829bb9a3a9a8f65ca967214e7f46c8a4", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-05-06T13:58:15Z", "type": "commit"}, {"oid": "d790e900a031587bdc6ef497c23bb762959b5a60", "url": "https://github.com/phac-nml/irida/commit/d790e900a031587bdc6ef497c23bb762959b5a60", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-05-06T13:58:24Z", "type": "commit"}, {"oid": "8e029b693c6646e61dd60ffe38611d142713ca93", "url": "https://github.com/phac-nml/irida/commit/8e029b693c6646e61dd60ffe38611d142713ca93", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-05-20T19:41:22Z", "type": "commit"}, {"oid": "9a39a5fe9c837decf08fd6bbfc9e4120c6d626b2", "url": "https://github.com/phac-nml/irida/commit/9a39a5fe9c837decf08fd6bbfc9e4120c6d626b2", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-05-20T19:41:35Z", "type": "commit"}, {"oid": "591ccceddc8b97267f9b64d0c15ebdc6d3d2cc0a", "url": "https://github.com/phac-nml/irida/commit/591ccceddc8b97267f9b64d0c15ebdc6d3d2cc0a", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-05-22T23:33:53Z", "type": "commit"}, {"oid": "27f83e71c0000a3c985969ced68dfaf4caccfdd4", "url": "https://github.com/phac-nml/irida/commit/27f83e71c0000a3c985969ced68dfaf4caccfdd4", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-05-22T23:33:58Z", "type": "commit"}, {"oid": "0530e1f78f47de1b1e4544a5df067a43610970c8", "url": "https://github.com/phac-nml/irida/commit/0530e1f78f47de1b1e4544a5df067a43610970c8", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-05-26T19:24:27Z", "type": "commit"}, {"oid": "984b7d0b20625a07df203afed6cf48d90905642b", "url": "https://github.com/phac-nml/irida/commit/984b7d0b20625a07df203afed6cf48d90905642b", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-05-26T19:24:33Z", "type": "commit"}, {"oid": "1f2ef603071f417161b03b699afd3802dd0e669b", "url": "https://github.com/phac-nml/irida/commit/1f2ef603071f417161b03b699afd3802dd0e669b", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-06-16T20:09:59Z", "type": "commit"}, {"oid": "3a7871d368051f87100d754bb797313d560b0b54", "url": "https://github.com/phac-nml/irida/commit/3a7871d368051f87100d754bb797313d560b0b54", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-06-16T20:10:08Z", "type": "commit"}, {"oid": "e27cc2df86132649a88ccebf2241b8e886a33bdf", "url": "https://github.com/phac-nml/irida/commit/e27cc2df86132649a88ccebf2241b8e886a33bdf", "message": "Merged in azure branch, fixed merge conflicts, updated to use IridaFiles", "committedDate": "2020-07-15T17:50:53Z", "type": "commit"}, {"oid": "8661216c52d3897a3567d97e06a7144f92a80235", "url": "https://github.com/phac-nml/irida/commit/8661216c52d3897a3567d97e06a7144f92a80235", "message": "Merged aws branch and fixed merge conflicts", "committedDate": "2020-07-15T18:18:03Z", "type": "commit"}, {"oid": "74e0ac8eb9100f4557955a9a9cb82060ecf944a7", "url": "https://github.com/phac-nml/irida/commit/74e0ac8eb9100f4557955a9a9cb82060ecf944a7", "message": "Updated getFileSize for the aws implementation to close the s3Object after getting file size", "committedDate": "2020-07-15T21:16:54Z", "type": "commit"}, {"oid": "6225a67b5ec70cbbee0cfb150fb96080e2b071f0", "url": "https://github.com/phac-nml/irida/commit/6225a67b5ec70cbbee0cfb150fb96080e2b071f0", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-07-17T15:52:57Z", "type": "commit"}, {"oid": "91389161f6ab70b271928b2d7f649acaec8317bf", "url": "https://github.com/phac-nml/irida/commit/91389161f6ab70b271928b2d7f649acaec8317bf", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-07-17T15:53:04Z", "type": "commit"}, {"oid": "8c2a545b9c5a817590063a656d6fccabde296171", "url": "https://github.com/phac-nml/irida/commit/8c2a545b9c5a817590063a656d6fccabde296171", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-07-20T20:10:26Z", "type": "commit"}, {"oid": "11461ebdf884552d615b1820db9c0006c57fd86b", "url": "https://github.com/phac-nml/irida/commit/11461ebdf884552d615b1820db9c0006c57fd86b", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-07-20T20:10:45Z", "type": "commit"}, {"oid": "b4d32bdd85fa8a6058fd067350835757075cfad9", "url": "https://github.com/phac-nml/irida/commit/b4d32bdd85fa8a6058fd067350835757075cfad9", "message": "Removed unused imports and updated tests", "committedDate": "2020-07-20T23:35:10Z", "type": "commit"}, {"oid": "e641380350d69f07037e682da5bca78239536002", "url": "https://github.com/phac-nml/irida/commit/e641380350d69f07037e682da5bca78239536002", "message": "Merged azure branch and fixed merge conflict", "committedDate": "2020-07-20T23:41:55Z", "type": "commit"}, {"oid": "b0939aca0698a1a1a6870cf24177efab133ea6a4", "url": "https://github.com/phac-nml/irida/commit/b0939aca0698a1a1a6870cf24177efab133ea6a4", "message": "Merged aws branch and fixed merge conflict", "committedDate": "2020-07-20T23:43:44Z", "type": "commit"}, {"oid": "323b144a908bb2b931396c89d58f126867bc0068", "url": "https://github.com/phac-nml/irida/commit/323b144a908bb2b931396c89d58f126867bc0068", "message": "Updated tests to set iridaFileStorageUtility in IridaFiles before running tests", "committedDate": "2020-07-21T02:33:56Z", "type": "commit"}, {"oid": "fbf62761e1a6aeec10148cdc33de80b316cfa270", "url": "https://github.com/phac-nml/irida/commit/fbf62761e1a6aeec10148cdc33de80b316cfa270", "message": "Removed unused imports", "committedDate": "2020-07-21T15:49:39Z", "type": "commit"}, {"oid": "d3b67f0e8175866cb8e7fee9569a611e1f2056cd", "url": "https://github.com/phac-nml/irida/commit/d3b67f0e8175866cb8e7fee9569a611e1f2056cd", "message": "Removed objectmapper to write byte files and replaced with iridafilestorageutility method", "committedDate": "2020-07-21T18:56:27Z", "type": "commit"}, {"oid": "340ba5e7b5cc1d76c347d0404c7cd37926e8b0ed", "url": "https://github.com/phac-nml/irida/commit/340ba5e7b5cc1d76c347d0404c7cd37926e8b0ed", "message": "Merged in aws branch changes", "committedDate": "2020-08-12T15:59:36Z", "type": "commit"}, {"oid": "1b62af216c8b52fc17aa719b9b36685f12a3c822", "url": "https://github.com/phac-nml/irida/commit/1b62af216c8b52fc17aa719b9b36685f12a3c822", "message": "Merged in azure branch changes", "committedDate": "2020-08-12T16:02:04Z", "type": "commit"}, {"oid": "a84384ce5dd924c75be37b11d7cfc273c8af8602", "url": "https://github.com/phac-nml/irida/commit/a84384ce5dd924c75be37b11d7cfc273c8af8602", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-08-12T16:49:58Z", "type": "commit"}, {"oid": "df6ed2a936e6c29eea34d7c6fc94c3b001fe8265", "url": "https://github.com/phac-nml/irida/commit/df6ed2a936e6c29eea34d7c6fc94c3b001fe8265", "message": "Merge branch 'object_store/_azure' into object_store/_gui", "committedDate": "2020-08-13T16:38:42Z", "type": "commit"}, {"oid": "3e6e838644168f3f62af6943eff2cd524645d6df", "url": "https://github.com/phac-nml/irida/commit/3e6e838644168f3f62af6943eff2cd524645d6df", "message": "Merge branch 'object_store/_aws' into object_store/_gui", "committedDate": "2020-08-13T16:38:49Z", "type": "commit"}, {"oid": "53de67fc0a451b065673734e8b36a977b918e33f", "url": "https://github.com/phac-nml/irida/commit/53de67fc0a451b065673734e8b36a977b918e33f", "message": "Removed unused import", "committedDate": "2020-08-20T20:34:04Z", "type": "commit"}, {"oid": "d34fe0b57b50054947f29030f97ffaa7613e32c1", "url": "https://github.com/phac-nml/irida/commit/d34fe0b57b50054947f29030f97ffaa7613e32c1", "message": "Merged base branch and fixed merge conflicts", "committedDate": "2020-11-05T17:05:47Z", "type": "commit"}, {"oid": "a57b40ea72ba5b0615cc388438fbd9641ed78159", "url": "https://github.com/phac-nml/irida/commit/a57b40ea72ba5b0615cc388438fbd9641ed78159", "message": "Added logging statement", "committedDate": "2020-11-05T19:30:06Z", "type": "commit"}, {"oid": "2290387eaaeadac588716616a4bedd1d484c5b37", "url": "https://github.com/phac-nml/irida/commit/2290387eaaeadac588716616a4bedd1d484c5b37", "message": "Merged aws branch and fixed merge conflicts. Updated referencefile to get file size using iridafiles rather than length stored in db", "committedDate": "2020-11-13T16:20:01Z", "type": "commit"}, {"oid": "beef08037cc3f9d77a5ec8c210e7513725e900ee", "url": "https://github.com/phac-nml/irida/commit/beef08037cc3f9d77a5ec8c210e7513725e900ee", "message": "Merged object store branch and fixed merge conflicts. Updated uiprojectreferencefileservice to get reference file size from iridafiles", "committedDate": "2020-11-17T21:20:31Z", "type": "commit"}, {"oid": "b3c70440cb0ae5cfc19af6cfdde110ad2a91da98", "url": "https://github.com/phac-nml/irida/commit/b3c70440cb0ae5cfc19af6cfdde110ad2a91da98", "message": "Merge branch 'object-store' into object_store/_gui", "committedDate": "2020-11-18T21:19:27Z", "type": "commit"}, {"oid": "1f5416d1be0a442815fa6dfa2bfedf3bdc92e136", "url": "https://github.com/phac-nml/irida/commit/1f5416d1be0a442815fa6dfa2bfedf3bdc92e136", "message": "Merged base branch and fixed merge conflicts", "committedDate": "2020-11-19T15:37:15Z", "type": "commit"}, {"oid": "65c1e26c2e09e34aa94e8da142691fbdb774731e", "url": "https://github.com/phac-nml/irida/commit/65c1e26c2e09e34aa94e8da142691fbdb774731e", "message": "Updated reference file page to display upload progress of files", "committedDate": "2020-11-19T23:28:33Z", "type": "commit"}, {"oid": "9bc0989245f31a198d5459432812e82774d55b19", "url": "https://github.com/phac-nml/irida/commit/9bc0989245f31a198d5459432812e82774d55b19", "message": "Updated failing tests", "committedDate": "2020-11-19T23:38:33Z", "type": "commit"}, {"oid": "16447606b83bff37ad2a6f681cf4b471d6c23c52", "url": "https://github.com/phac-nml/irida/commit/16447606b83bff37ad2a6f681cf4b471d6c23c52", "message": "Merged object store branch and fixed merge conflicts", "committedDate": "2020-11-23T16:32:02Z", "type": "commit"}, {"oid": "bec7d1e389352ee79f47fba377d91e9673fd70b0", "url": "https://github.com/phac-nml/irida/commit/bec7d1e389352ee79f47fba377d91e9673fd70b0", "message": "Updated azure storage file utility to use try with resources to close stream. Updated aws file utility to use try with resources to close stream when reading bytes", "committedDate": "2020-11-23T21:36:50Z", "type": "commit"}, {"oid": "218450bdac7e35598cc4264bcc240c39088ae3c8", "url": "https://github.com/phac-nml/irida/commit/218450bdac7e35598cc4264bcc240c39088ae3c8", "message": "Merge branch 'object-store' into object_store/_gui", "committedDate": "2020-11-25T18:45:20Z", "type": "commit"}, {"oid": "a88665daf66a39c763ba3f98fc9a785f7b6f7da3", "url": "https://github.com/phac-nml/irida/commit/a88665daf66a39c763ba3f98fc9a785f7b6f7da3", "message": "Fixed undefined text for file name", "committedDate": "2020-11-25T22:41:48Z", "type": "commit"}, {"oid": "acd47bd853a94535ff115f45c35aeb39b49066fe", "url": "https://github.com/phac-nml/irida/commit/acd47bd853a94535ff115f45c35aeb39b49066fe", "message": "Added translation", "committedDate": "2020-11-25T22:51:56Z", "type": "commit"}, {"oid": "084485fd4e8257e3efa0d431e86ae1f925450db7", "url": "https://github.com/phac-nml/irida/commit/084485fd4e8257e3efa0d431e86ae1f925450db7", "message": "Removed reference file UI changes and made a separate PR into dev", "committedDate": "2020-11-26T19:54:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTExMjcwNA==", "url": "https://github.com/phac-nml/irida/pull/761#discussion_r531112704", "bodyText": "It looks like we were using this already for things like the fastqc images, but we'll need to be sure to use this very carefully.  Reading all the bytes into memory isn't the greatest thing.  Anywhere it can be streamed would be much nicer and less prone to crashing things.", "author": "tom114", "createdAt": "2020-11-26T15:47:17Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/repositories/filesystem/IridaFileStorageUtility.java", "diffHunk": "@@ -113,4 +113,11 @@\n \t */\n \tpublic String getFileExtension(List<? extends SequencingObject> sequencingObjects) throws IOException;\n \n+\t/**\n+\t * Read the bytes for a file\n+\t *\n+\t * @param file The path to the file\n+\t * @return the bytes for the file\n+\t */\n+\tpublic byte[] readAllBytes(Path file);", "originalCommit": "acd47bd853a94535ff115f45c35aeb39b49066fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTIyMTAyNw==", "url": "https://github.com/phac-nml/irida/pull/761#discussion_r531221027", "bodyText": "Yup all that is used for is the FastQC images and any analysis outputs which are images. Looks like it is used in FileUtilities.java as well in the createAnalysisOutputFileZippedResponse method which was changed from byte[] bytes = objectMapper.writeValueAsBytes(file); to byte[] bytes = file.getBytesForFile(); to work with our object store stuff. Anywhere the files are larger they are streamed using the getFileInputStream method.", "author": "deepsidhu85", "createdAt": "2020-11-26T20:53:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTExMjcwNA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE0MzkwNw==", "url": "https://github.com/phac-nml/irida/pull/761#discussion_r531143907", "bodyText": "This path is unused now.", "author": "tom114", "createdAt": "2020-11-26T16:47:29Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/files/SequenceFileController.java", "diffHunk": "@@ -88,7 +87,7 @@ public void downloadSequenceFile(@PathVariable Long sequencingObjectId, @PathVar\n \t\tSequenceFile sequenceFile = sequencingObject.getFileWithId(sequenceFileId);\n \t\tPath path = sequenceFile.getFile();", "originalCommit": "acd47bd853a94535ff115f45c35aeb39b49066fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE0NDM4OA==", "url": "https://github.com/phac-nml/irida/pull/761#discussion_r531144388", "bodyText": "Check all these file controllers.  Looks like they have an old path variable that's unused.", "author": "tom114", "createdAt": "2020-11-26T16:48:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE0MzkwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTY5Mzc5OQ==", "url": "https://github.com/phac-nml/irida/pull/761#discussion_r531693799", "bodyText": "Removed in 812a1b8", "author": "deepsidhu85", "createdAt": "2020-11-27T16:42:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE0MzkwNw=="}], "type": "inlineReview", "revised_code": {"commit": "812a1b86c4c0abf1994668d24b8080b497cf3d34", "chunk": "diff --git a/src/main/java/ca/corefacility/bioinformatics/irida/ria/web/files/SequenceFileController.java b/src/main/java/ca/corefacility/bioinformatics/irida/ria/web/files/SequenceFileController.java\nindex 6cfcfedc10..289fbfc54c 100644\n--- a/src/main/java/ca/corefacility/bioinformatics/irida/ria/web/files/SequenceFileController.java\n+++ b/src/main/java/ca/corefacility/bioinformatics/irida/ria/web/files/SequenceFileController.java\n\n@@ -85,7 +84,6 @@ public class SequenceFileController {\n \t\t\tHttpServletResponse response) throws IOException {\n \t\tSequencingObject sequencingObject = sequencingObjectService.read(sequencingObjectId);\n \t\tSequenceFile sequenceFile = sequencingObject.getFileWithId(sequenceFileId);\n-\t\tPath path = sequenceFile.getFile();\n \t\tresponse.setHeader(\"Content-Disposition\", \"attachment; filename=\\\"\" + sequenceFile.getLabel() + \"\\\"\");\n \t\tsequenceFile.getFileInputStream().transferTo(response.getOutputStream());\n \t\tresponse.flushBuffer();\n"}}, {"oid": "812a1b86c4c0abf1994668d24b8080b497cf3d34", "url": "https://github.com/phac-nml/irida/commit/812a1b86c4c0abf1994668d24b8080b497cf3d34", "message": "Removed unused path variables", "committedDate": "2020-11-26T21:28:29Z", "type": "commit"}, {"oid": "f77787cf7540a56e7e9bc0d84b99db6bb371b144", "url": "https://github.com/phac-nml/irida/commit/f77787cf7540a56e7e9bc0d84b99db6bb371b144", "message": "Updated getFileInputStream methods to not read into memory but rather stream. Updated usage of getfileiputstream to be used in try-with-resources block so that the underlying inputstream is closed", "committedDate": "2020-11-26T22:09:33Z", "type": "commit"}, {"oid": "39c04c47efd0427cab616de9fcc2d94ab6803ec8", "url": "https://github.com/phac-nml/irida/commit/39c04c47efd0427cab616de9fcc2d94ab6803ec8", "message": "Merge branch 'object-store' into object_store/_gui", "committedDate": "2020-11-27T15:53:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg4MzIxMQ==", "url": "https://github.com/phac-nml/irida/pull/761#discussion_r532883211", "bodyText": "Add the throwable cause here in the error logging so we can see the stack trace please.", "author": "tom114", "createdAt": "2020-11-30T20:28:26Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/analysis/AnalysisAjaxController.java", "diffHunk": "@@ -1093,8 +1094,11 @@ public AnalysisTreeResponse getNewickTree(@PathVariable Long submissionId, Local\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} catch (NoSuchFileException e) {\n-\t\t\t\tlogger.debug(\"File was not found: \" + e.toString());\n+\t\t\t\tlogger.error(\"File was not found: \" + e.toString());\n+\t\t\t} catch (IOException e) {\n+\t\t\t\tlogger.error(\"Unable to read input stream for file\");", "originalCommit": "39c04c47efd0427cab616de9fcc2d94ab6803ec8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg5MzQ4OQ==", "url": "https://github.com/phac-nml/irida/pull/761#discussion_r532893489", "bodyText": "Updated in dca4590", "author": "deepsidhu85", "createdAt": "2020-11-30T20:47:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg4MzIxMQ=="}], "type": "inlineReview", "revised_code": {"commit": "dca4590ac2b04621e4f52f20200fe2bc9c40266a", "chunk": "diff --git a/src/main/java/ca/corefacility/bioinformatics/irida/ria/web/analysis/AnalysisAjaxController.java b/src/main/java/ca/corefacility/bioinformatics/irida/ria/web/analysis/AnalysisAjaxController.java\nindex 432a40d136..95314a0e77 100644\n--- a/src/main/java/ca/corefacility/bioinformatics/irida/ria/web/analysis/AnalysisAjaxController.java\n+++ b/src/main/java/ca/corefacility/bioinformatics/irida/ria/web/analysis/AnalysisAjaxController.java\n\n@@ -1096,7 +1096,7 @@ public class AnalysisAjaxController {\n \t\t\t} catch (NoSuchFileException e) {\n \t\t\t\tlogger.error(\"File was not found: \" + e.toString());\n \t\t\t} catch (IOException e) {\n-\t\t\t\tlogger.error(\"Unable to read input stream for file\");\n+\t\t\t\tlogger.error(\"Unable to read input stream for file\", e);\n \t\t\t}\n \n \t\t}\n"}}, {"oid": "e0cffbd012a6fc7ab5e60877cf87054038a53b6d", "url": "https://github.com/phac-nml/irida/commit/e0cffbd012a6fc7ab5e60877cf87054038a53b6d", "message": "Merge branch 'object-store' into object_store/_gui", "committedDate": "2020-11-30T20:41:28Z", "type": "commit"}, {"oid": "dca4590ac2b04621e4f52f20200fe2bc9c40266a", "url": "https://github.com/phac-nml/irida/commit/dca4590ac2b04621e4f52f20200fe2bc9c40266a", "message": "Added throwable cause to error message", "committedDate": "2020-11-30T20:47:04Z", "type": "commit"}]}