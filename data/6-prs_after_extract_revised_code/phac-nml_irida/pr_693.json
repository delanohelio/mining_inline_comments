{"pr_number": 693, "pr_title": "Invoke workflow", "pr_createdAt": "2020-05-15T20:21:27Z", "pr_url": "https://github.com/phac-nml/irida/pull/693", "timeline": [{"oid": "3ef1a94be1a85c21d19fe39cd4c32759f1284453", "url": "https://github.com/phac-nml/irida/commit/3ef1a94be1a85c21d19fe39cd4c32759f1284453", "message": "changed from runWorkflow to invokeWorkflow in blend4j", "committedDate": "2019-12-19T22:12:20Z", "type": "commit"}, {"oid": "9b191810c4ab228fffbfdb0aef19e4d27dbf25e0", "url": "https://github.com/phac-nml/irida/commit/9b191810c4ab228fffbfdb0aef19e4d27dbf25e0", "message": "change test cases to use invoke workflow", "committedDate": "2019-12-23T21:18:01Z", "type": "commit"}, {"oid": "673902533e97a71990d57117b602440cfc984433", "url": "https://github.com/phac-nml/irida/commit/673902533e97a71990d57117b602440cfc984433", "message": "update workflowsClient.importWorkflow calls", "committedDate": "2020-01-23T21:17:27Z", "type": "commit"}, {"oid": "390c5dd4c0619290c1d9d9af3ce8e4672165dbc1", "url": "https://github.com/phac-nml/irida/commit/390c5dd4c0619290c1d9d9af3ce8e4672165dbc1", "message": "Merge branch 'development' of github.com:phac-nml/irida into invoke_workflow", "committedDate": "2020-05-01T20:34:31Z", "type": "commit"}, {"oid": "b52a7e5d6644e627cb869d3dc562571f50ff121b", "url": "https://github.com/phac-nml/irida/commit/b52a7e5d6644e627cb869d3dc562571f50ff121b", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow", "committedDate": "2020-05-08T21:32:35Z", "type": "commit"}, {"oid": "46f08616094b8fbc759f44c2a92ef67c91ee3304", "url": "https://github.com/phac-nml/irida/commit/46f08616094b8fbc759f44c2a92ef67c91ee3304", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow", "committedDate": "2020-05-15T17:42:11Z", "type": "commit"}, {"oid": "6aaade5070ee5e27891d8a960f28af3ae0dc7316", "url": "https://github.com/phac-nml/irida/commit/6aaade5070ee5e27891d8a960f28af3ae0dc7316", "message": "switched to installing blend4j via jar file instead of maven repo", "committedDate": "2020-05-15T19:30:43Z", "type": "commit"}, {"oid": "6af8e5465830a4b78ac856a0fe2db4472190b996", "url": "https://github.com/phac-nml/irida/commit/6af8e5465830a4b78ac856a0fe2db4472190b996", "message": "update changelog", "committedDate": "2020-05-15T20:21:38Z", "type": "commit"}, {"oid": "3a187451e3025cfddd0386f87891e201faa3b6b6", "url": "https://github.com/phac-nml/irida/commit/3a187451e3025cfddd0386f87891e201faa3b6b6", "message": "fixed incorrect blend4j runWorkflow calls", "committedDate": "2020-05-20T19:49:25Z", "type": "commit"}, {"oid": "6ac309534ba4f1ecdcecaf0817f19fdffd5b2eb4", "url": "https://github.com/phac-nml/irida/commit/6ac309534ba4f1ecdcecaf0817f19fdffd5b2eb4", "message": "fixed error where workflow status could get set to error before it's scheduled", "committedDate": "2020-05-27T15:44:56Z", "type": "commit"}, {"oid": "69344145bc7b196b302caa116801dfccd6f3a5ca", "url": "https://github.com/phac-nml/irida/commit/69344145bc7b196b302caa116801dfccd6f3a5ca", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow", "committedDate": "2020-05-27T15:59:10Z", "type": "commit"}, {"oid": "2e0748d3b28c3ee546b0ac3497d82eae49a624fb", "url": "https://github.com/phac-nml/irida/commit/2e0748d3b28c3ee546b0ac3497d82eae49a624fb", "message": "remove unused import", "committedDate": "2020-05-27T20:27:40Z", "type": "commit"}, {"oid": "8838be026fb34d7edff9c7612f02d235b02c1461", "url": "https://github.com/phac-nml/irida/commit/8838be026fb34d7edff9c7612f02d235b02c1461", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow", "committedDate": "2020-05-28T18:55:14Z", "type": "commit"}, {"oid": "d1cc37b68658d6863c7813b4147e753705a16287", "url": "https://github.com/phac-nml/irida/commit/d1cc37b68658d6863c7813b4147e753705a16287", "message": "move method to AnalysisWorkspaceService", "committedDate": "2020-05-29T16:50:01Z", "type": "commit"}, {"oid": "f4f3456c4bae12f62e57a40a63e14a9e65ed774b", "url": "https://github.com/phac-nml/irida/commit/f4f3456c4bae12f62e57a40a63e14a9e65ed774b", "message": "fix tests", "committedDate": "2020-05-29T19:14:46Z", "type": "commit"}, {"oid": "0ebbf8e1cedc29b8507dd6271503792bea1eac89", "url": "https://github.com/phac-nml/irida/commit/0ebbf8e1cedc29b8507dd6271503792bea1eac89", "message": "added test case for OK galaxyWorkflowState no files exist", "committedDate": "2020-05-29T20:58:01Z", "type": "commit"}, {"oid": "27b26e2d3f37428701a3ce98e4b741670a2bb80b", "url": "https://github.com/phac-nml/irida/commit/27b26e2d3f37428701a3ce98e4b741670a2bb80b", "message": "update changelog.md", "committedDate": "2020-06-01T18:27:19Z", "type": "commit"}, {"oid": "bda8c844a41d3516a9cbe45bb39affd75b66a8a8", "url": "https://github.com/phac-nml/irida/commit/bda8c844a41d3516a9cbe45bb39affd75b66a8a8", "message": "Merge branch 'development' of https://github.com/phac-nml/irida into invoke_workflow", "committedDate": "2020-10-15T16:18:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkyNTgyNQ==", "url": "https://github.com/phac-nml/irida/pull/693#discussion_r505925825", "bodyText": "It doesn't look like GalaxyHistoriesService or IridaWorkflowsService is used anywhere in this file. Was it maybe used previously and now that code has been removed? Could these Autowired components be removed if they aren't used?", "author": "apetkau", "createdAt": "2020-10-15T23:47:07Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/config/services/scheduled/AnalysisScheduledTaskConfig.java", "diffHunk": "@@ -46,6 +49,15 @@\n \t@Autowired\n \tprivate EmailController emailController;\n \n+\t@Autowired\n+\tprivate IridaWorkflowsService workflowsService;\n+\n+\t@Autowired\n+\tprivate GalaxyHistoriesService galaxyHistoriesService;", "originalCommit": "bda8c844a41d3516a9cbe45bb39affd75b66a8a8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyNDkxMw==", "url": "https://github.com/phac-nml/irida/pull/693#discussion_r510424913", "bodyText": "Good catch, I think that was left over from while I was trying different solutions for this problem. Removed those lines now.", "author": "JeffreyThiessen", "createdAt": "2020-10-22T20:05:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkyNTgyNQ=="}], "type": "inlineReview", "revised_code": {"commit": "284dc1168169f38ad78c2de2201acbf37a46687e", "chunk": "diff --git a/src/main/java/ca/corefacility/bioinformatics/irida/config/services/scheduled/AnalysisScheduledTaskConfig.java b/src/main/java/ca/corefacility/bioinformatics/irida/config/services/scheduled/AnalysisScheduledTaskConfig.java\nindex 69ec488b7e..8759a3525f 100644\n--- a/src/main/java/ca/corefacility/bioinformatics/irida/config/services/scheduled/AnalysisScheduledTaskConfig.java\n+++ b/src/main/java/ca/corefacility/bioinformatics/irida/config/services/scheduled/AnalysisScheduledTaskConfig.java\n\n@@ -49,12 +47,6 @@ public class AnalysisScheduledTaskConfig {\n \t@Autowired\n \tprivate EmailController emailController;\n \n-\t@Autowired\n-\tprivate IridaWorkflowsService workflowsService;\n-\n-\t@Autowired\n-\tprivate GalaxyHistoriesService galaxyHistoriesService;\n-\n \t@Autowired\n \tprivate AnalysisWorkspaceService analysisWorkspaceService;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjAxNTMyNA==", "url": "https://github.com/phac-nml/irida/pull/693#discussion_r506015324", "bodyText": "Just to make sure I understand, the removal of checking for output files existence is because we switched to invokeWorkflow which returns right away (instead of waiting until the workflow is finished)?", "author": "apetkau", "createdAt": "2020-10-16T03:05:20Z", "path": "src/test/java/ca/corefacility/bioinformatics/irida/pipeline/upload/galaxy/integration/GalaxyWorkflowsIT.java", "diffHunk": "@@ -350,15 +343,6 @@ public void testExecuteCollectionsPairedList() throws ExecutionManagerException\n \t\tHistoryDetails historyDetails = historiesClient.showHistory(workflowOutput.getHistoryId());\n \t\tassertNotNull(historyDetails);\n \t\t\n-\t\t// outputs should exist", "originalCommit": "bda8c844a41d3516a9cbe45bb39affd75b66a8a8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyMzc5Ng==", "url": "https://github.com/phac-nml/irida/pull/693#discussion_r510423796", "bodyText": "Yes that is correct.", "author": "JeffreyThiessen", "createdAt": "2020-10-22T20:03:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjAxNTMyNA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "284dc1168169f38ad78c2de2201acbf37a46687e", "url": "https://github.com/phac-nml/irida/commit/284dc1168169f38ad78c2de2201acbf37a46687e", "message": "cleanup", "committedDate": "2020-10-22T20:04:43Z", "type": "commit"}]}