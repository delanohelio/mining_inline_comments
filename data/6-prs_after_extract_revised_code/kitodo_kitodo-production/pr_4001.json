{"pr_number": 4001, "pr_title": "Add option to import metadata from FTP server", "pr_createdAt": "2020-09-21T12:01:19Z", "pr_url": "https://github.com/kitodo/kitodo-production/pull/4001", "timeline": [{"oid": "18aad21053fe79a13884663fea4e08a0e1c3595d", "url": "https://github.com/kitodo/kitodo-production/commit/18aad21053fe79a13884663fea4e08a0e1c3595d", "message": "Add option to import metadata from FTP server", "committedDate": "2020-09-21T12:00:28Z", "type": "commit"}, {"oid": "fadf15997f516c470f3a4f1add16ad48a26a04fa", "url": "https://github.com/kitodo/kitodo-production/commit/fadf15997f516c470f3a4f1add16ad48a26a04fa", "message": "Fix checkstyle issues", "committedDate": "2020-09-21T12:37:38Z", "type": "commit"}, {"oid": "14b5b981f607d3a6c255580747b4d463c8448726", "url": "https://github.com/kitodo/kitodo-production/commit/14b5b981f607d3a6c255580747b4d463c8448726", "message": "Add FTP server example configuration to 'kitodo_opac.xml'", "committedDate": "2020-09-21T12:40:23Z", "type": "commit"}, {"oid": "73e11943cd6f3cb1fcd9e4f10824c6c39d34abd9", "url": "https://github.com/kitodo/kitodo-production/commit/73e11943cd6f3cb1fcd9e4f10824c6c39d34abd9", "message": "Close inputStream", "committedDate": "2020-09-21T12:55:30Z", "type": "commit"}, {"oid": "354aee2f627cdae7d3d69eccb8e7950924dde9db", "url": "https://github.com/kitodo/kitodo-production/commit/354aee2f627cdae7d3d69eccb8e7950924dde9db", "message": "Fix Codacy issue", "committedDate": "2020-09-22T06:42:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI0NTQ4Nw==", "url": "https://github.com/kitodo/kitodo-production/pull/4001#discussion_r493245487", "bodyText": "Please use language files for \"Filename\"", "author": "Kathrin-Huber", "createdAt": "2020-09-23T07:07:54Z", "path": "Kitodo/src/main/java/org/kitodo/production/services/data/ImportService.java", "diffHunk": "@@ -206,15 +208,23 @@ private ExternalDataImportInterface initializeImportModule() {\n      */\n     public List<String> getAvailableSearchFields(String opac) {\n         try {\n-            HierarchicalConfiguration searchFields = OPACConfig.getSearchFields(opac);\n-            List<String> fields = new ArrayList<>();\n-            for (HierarchicalConfiguration searchField : searchFields.configurationsAt(\"searchField\")) {\n-                if (\"true\".equals(searchField.getString(\"[@hide]\"))) {\n-                    continue;\n+            // FTP server do not support query parameters but only use the filename for OPAC search!\n+            if (SearchInterfaceType.FTP.equals(OPACConfig.getInterfaceType(opac))) {\n+                return Collections.singletonList(\"Filename\");", "originalCommit": "354aee2f627cdae7d3d69eccb8e7950924dde9db", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "107155309b85e0361b9156e984465d8a32854b70", "chunk": "diff --git a/Kitodo/src/main/java/org/kitodo/production/services/data/ImportService.java b/Kitodo/src/main/java/org/kitodo/production/services/data/ImportService.java\nindex 8f5fc087c..7ca53e356 100644\n--- a/Kitodo/src/main/java/org/kitodo/production/services/data/ImportService.java\n+++ b/Kitodo/src/main/java/org/kitodo/production/services/data/ImportService.java\n\n@@ -210,7 +210,7 @@ public class ImportService {\n         try {\n             // FTP server do not support query parameters but only use the filename for OPAC search!\n             if (SearchInterfaceType.FTP.equals(OPACConfig.getInterfaceType(opac))) {\n-                return Collections.singletonList(\"Filename\");\n+                return Collections.singletonList(Helper.getTranslation(\"filename\"));\n             } else {\n                 List<String> fields = new ArrayList<>();\n                 HierarchicalConfiguration searchFields = OPACConfig.getSearchFields(opac);\n"}}, {"oid": "107155309b85e0361b9156e984465d8a32854b70", "url": "https://github.com/kitodo/kitodo-production/commit/107155309b85e0361b9156e984465d8a32854b70", "message": "Use language file", "committedDate": "2020-09-23T08:19:27Z", "type": "commit"}]}