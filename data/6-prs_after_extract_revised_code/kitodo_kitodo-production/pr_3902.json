{"pr_number": 3902, "pr_title": "Remove the broken rest interface", "pr_createdAt": "2020-08-05T14:03:52Z", "pr_url": "https://github.com/kitodo/kitodo-production/pull/3902", "timeline": [{"oid": "5bfe856ffdd2deee22f88361fd8c545891ef92c0", "url": "https://github.com/kitodo/kitodo-production/commit/5bfe856ffdd2deee22f88361fd8c545891ef92c0", "message": "Remove the broken rest interface\n\nFixes #3873", "committedDate": "2020-08-05T14:02:29Z", "type": "commit"}, {"oid": "3d2f91c4d0ae2088682276579014a7ca476d8359", "url": "https://github.com/kitodo/kitodo-production/commit/3d2f91c4d0ae2088682276579014a7ca476d8359", "message": "Remove Maven dependencies of Jersey REST packages as far as possible", "committedDate": "2020-08-06T09:21:09Z", "type": "commit"}, {"oid": "0a46f3975021896f6162e5f9455ed185799f6318", "url": "https://github.com/kitodo/kitodo-production/commit/0a46f3975021896f6162e5f9455ed185799f6318", "message": "Replace frameworks, remove exception out of context", "committedDate": "2020-08-06T13:12:30Z", "type": "forcePushed"}, {"oid": "07102aacc03d708b37cb98a122a7d0530104b22a", "url": "https://github.com/kitodo/kitodo-production/commit/07102aacc03d708b37cb98a122a7d0530104b22a", "message": "Replace frameworks, remove exception out of context", "committedDate": "2020-08-06T13:14:57Z", "type": "forcePushed"}, {"oid": "e36479346586c22dc3b428ff7953a20603b09600", "url": "https://github.com/kitodo/kitodo-production/commit/e36479346586c22dc3b428ff7953a20603b09600", "message": "Replace frameworks, remove exception out of context", "committedDate": "2020-08-06T13:16:30Z", "type": "commit"}, {"oid": "e36479346586c22dc3b428ff7953a20603b09600", "url": "https://github.com/kitodo/kitodo-production/commit/e36479346586c22dc3b428ff7953a20603b09600", "message": "Replace frameworks, remove exception out of context", "committedDate": "2020-08-06T13:16:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQyMDY2Ng==", "url": "https://github.com/kitodo/kitodo-production/pull/3902#discussion_r466420666", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        String rulesetFile;\n          \n          \n            \n                        try {\n          \n          \n            \n                            rulesetFile = getMainProcess().getRuleset().getFile();\n          \n          \n            \n                        } catch (IndexOutOfBoundsException noProcess) {\n          \n          \n            \n                            logger.catching(Level.TRACE, noProcess);\n          \n          \n            \n                            rulesetFile = \"Process list is empty!\";\n          \n          \n            \n                        }\n          \n          \n            \n                        String rulesetFile = \"Process list is empty\";\n          \n          \n            \n                        if (!this.processes.isEmpty() && Objects.nonNull(getMainProcess().getRuleset())) {\n          \n          \n            \n                            rulesetFile = getMainProcess().getRuleset().getFile();\n          \n          \n            \n                        }", "author": "Kathrin-Huber", "createdAt": "2020-08-06T13:41:43Z", "path": "Kitodo/src/main/java/org/kitodo/production/forms/createprocess/CreateProcessForm.java", "diffHunk": "@@ -296,8 +289,14 @@ public String createNewProcess() {\n         } catch (IOException | ProcessGenerationException e) {\n             logger.error(e.getLocalizedMessage());\n         } catch (RulesetNotFoundException e) {\n-            Helper.setErrorMessage(\"rulesetNotFound\", new Object[] {this.getMainProcess().getRuleset().getFile()},\n-                    logger, e);\n+            String rulesetFile;\n+            try {\n+                rulesetFile = getMainProcess().getRuleset().getFile();\n+            } catch (IndexOutOfBoundsException noProcess) {\n+                logger.catching(Level.TRACE, noProcess);\n+                rulesetFile = \"Process list is empty!\";\n+            }", "originalCommit": "e36479346586c22dc3b428ff7953a20603b09600", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f63ce03ab3c65f834ea5b3925ab4750843375405", "chunk": "diff --git a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/CreateProcessForm.java b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/CreateProcessForm.java\nindex d2200abc3..f82850c84 100644\n--- a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/CreateProcessForm.java\n+++ b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/CreateProcessForm.java\n\n@@ -289,12 +289,9 @@ public class CreateProcessForm extends BaseForm implements RulesetSetupInterface\n         } catch (IOException | ProcessGenerationException e) {\n             logger.error(e.getLocalizedMessage());\n         } catch (RulesetNotFoundException e) {\n-            String rulesetFile;\n-            try {\n+            String rulesetFile = \"Process list is empty\";\n+            if (!this.processes.isEmpty() && Objects.nonNull(getMainProcess().getRuleset())) {\n                 rulesetFile = getMainProcess().getRuleset().getFile();\n-            } catch (IndexOutOfBoundsException noProcess) {\n-                logger.catching(Level.TRACE, noProcess);\n-                rulesetFile = \"Process list is empty!\";\n             }\n             Helper.setErrorMessage(\"rulesetNotFound\", new Object[] {rulesetFile }, logger, e);\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQyMTEzMw==", "url": "https://github.com/kitodo/kitodo-production/pull/3902#discussion_r466421133", "bodyText": "Why did you remove this?", "author": "Kathrin-Huber", "createdAt": "2020-08-06T13:42:25Z", "path": "Kitodo/src/main/java/org/kitodo/production/services/data/ProjectService.java", "diffHunk": "@@ -249,7 +249,7 @@ public boolean isProjectComplete(Project project) {\n         boolean projectsXmlExists = KitodoConfigFile.PROJECT_CONFIGURATION.exists();\n         boolean digitalCollectionsXmlExists = KitodoConfigFile.DIGITAL_COLLECTIONS.exists();\n \n-        return Objects.nonNull(project.getTitle()) && Objects.nonNull(project.template)\n+        return Objects.nonNull(project.getTitle())", "originalCommit": "e36479346586c22dc3b428ff7953a20603b09600", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg0ODI4NA==", "url": "https://github.com/kitodo/kitodo-production/pull/3902#discussion_r466848284", "bodyText": "The only use of the project.template field was to list in the web service which production templates were assigned to the project. Since the web service is removed, it is no longer needed.", "author": "matthias-ronge", "createdAt": "2020-08-07T06:34:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQyMTEzMw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQyMTY4OA==", "url": "https://github.com/kitodo/kitodo-production/pull/3902#discussion_r466421688", "bodyText": "why did you remove this?", "author": "Kathrin-Huber", "createdAt": "2020-08-06T13:43:16Z", "path": "Kitodo/src/test/java/org/kitodo/production/services/data/ProjectServiceTest.java", "diffHunk": "@@ -52,11 +49,6 @@ public void testProjectForCompletness() throws IOException {\n         project.setTitle(\"testProject\");\n         Assert.assertFalse(\"Project shouldn't be complete\", projectService.isProjectComplete(project));\n \n-        // Add templates, still not complete", "originalCommit": "e36479346586c22dc3b428ff7953a20603b09600", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg0ODUzOA==", "url": "https://github.com/kitodo/kitodo-production/pull/3902#discussion_r466848538", "bodyText": "Since the project.template field is removed, the test had to be adapted.", "author": "matthias-ronge", "createdAt": "2020-08-07T06:34:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQyMTY4OA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "f63ce03ab3c65f834ea5b3925ab4750843375405", "url": "https://github.com/kitodo/kitodo-production/commit/f63ce03ab3c65f834ea5b3925ab4750843375405", "message": "Update Kitodo/src/main/java/org/kitodo/production/forms/createprocess/CreateProcessForm.java\n\nCo-authored-by: Kathrin Huber <kathrin.huber@slub-dresden.de>", "committedDate": "2020-08-07T06:31:29Z", "type": "commit"}]}