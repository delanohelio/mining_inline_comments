{"pr_number": 3057, "pr_title": "Support the recursive editing of metadata groups", "pr_createdAt": "2020-01-16T13:26:24Z", "pr_url": "https://github.com/kitodo/kitodo-production/pull/3057", "timeline": [{"oid": "f1997059ae766a8e87d3a4e72e39ec41414e430c", "url": "https://github.com/kitodo/kitodo-production/commit/f1997059ae766a8e87d3a4e72e39ec41414e430c", "message": "Display metadata groups recursively using a tree table", "committedDate": "2020-01-09T15:35:37Z", "type": "commit"}, {"oid": "82275d438a7440c1f40569e310652ecb3ed70c97", "url": "https://github.com/kitodo/kitodo-production/commit/82275d438a7440c1f40569e310652ecb3ed70c97", "message": "Fix create process dialog", "committedDate": "2020-01-14T15:11:04Z", "type": "commit"}, {"oid": "a4b8bad4630408104deaf633f69fcc36d4c943b9", "url": "https://github.com/kitodo/kitodo-production/commit/a4b8bad4630408104deaf633f69fcc36d4c943b9", "message": "Show metadata in metadata editor", "committedDate": "2020-01-16T08:42:36Z", "type": "commit"}, {"oid": "724b276a1f9d7a3940d73adbdeff3faeeac082fe", "url": "https://github.com/kitodo/kitodo-production/commit/724b276a1f9d7a3940d73adbdeff3faeeac082fe", "message": "Adapt import", "committedDate": "2020-01-16T11:02:29Z", "type": "commit"}, {"oid": "9fbdf8b73194c12aa3473de4fb817807a05d3881", "url": "https://github.com/kitodo/kitodo-production/commit/9fbdf8b73194c12aa3473de4fb817807a05d3881", "message": "Update newspaper processes generator", "committedDate": "2020-01-16T12:02:11Z", "type": "commit"}, {"oid": "7b6592f491df25dfaf2d0d401fb66d3c729dd63f", "url": "https://github.com/kitodo/kitodo-production/commit/7b6592f491df25dfaf2d0d401fb66d3c729dd63f", "message": "Fix checkstyle", "committedDate": "2020-01-16T12:08:36Z", "type": "commit"}, {"oid": "a53240db7b524ad430b4857025575e62f405b4ee", "url": "https://github.com/kitodo/kitodo-production/commit/a53240db7b524ad430b4857025575e62f405b4ee", "message": "Fix Codacy issues", "committedDate": "2020-01-16T13:38:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgzODg3Nw==", "url": "https://github.com/kitodo/kitodo-production/pull/3057#discussion_r367838877", "bodyText": "please add javadoc", "author": "Kathrin-Huber", "createdAt": "2020-01-17T09:25:48Z", "path": "Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java", "diffHunk": "@@ -289,6 +315,16 @@ private MetadataEntry oneSimpleValue(Collection<Metadata> values) {\n         }\n     }\n \n+    public void addAdditionallySelectedField(String additionallySelectedField) throws NoSuchMetadataFieldException {", "originalCommit": "a53240db7b524ad430b4857025575e62f405b4ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bc59c4c7f31a8f96cf9f37fd492e7a20c5a214f9", "chunk": "diff --git a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java\nindex a41a96cb6..6e3b673f5 100644\n--- a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java\n+++ b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java\n\n@@ -315,6 +315,12 @@ public class ProcessFieldedMetadata extends ProcessDetail implements Serializabl\n         }\n     }\n \n+    /**\n+     * Adds an additionally selected field.\n+     *\n+     * @param additionallySelectedField\n+     *            additionally selected field to add\n+     */\n     public void addAdditionallySelectedField(String additionallySelectedField) throws NoSuchMetadataFieldException {\n         additionallySelectedFields.add(additionallySelectedField);\n         try {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgzOTc2Nw==", "url": "https://github.com/kitodo/kitodo-production/pull/3057#discussion_r367839767", "bodyText": "public or private?\nplease add Javadoc", "author": "Kathrin-Huber", "createdAt": "2020-01-17T09:27:59Z", "path": "Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java", "diffHunk": "@@ -386,10 +431,29 @@ void preserve() throws InvalidMetadataValueException, NoSuchMetadataFieldExcepti\n             }\n             metadata.addAll(hiddenMetadata);\n         } catch (InvalidMetadataValueException invalidValueException) {\n-            if (Objects.isNull(structure)) {\n+            if (Objects.isNull(division)) {\n                 invalidValueException.addParent(metadataView.getId());\n             }\n             throw invalidValueException;\n         }\n     }\n+\n+    void remove(ProcessDetail toDelete) {", "originalCommit": "a53240db7b524ad430b4857025575e62f405b4ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bc59c4c7f31a8f96cf9f37fd492e7a20c5a214f9", "chunk": "diff --git a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java\nindex a41a96cb6..6e3b673f5 100644\n--- a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java\n+++ b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java\n\n@@ -438,7 +444,13 @@ public class ProcessFieldedMetadata extends ProcessDetail implements Serializabl\n         }\n     }\n \n-    void remove(ProcessDetail toDelete) {\n+    /**\n+     * Removes a process detail.\n+     * \n+     * @param toDelete\n+     *            process detail to delete\n+     */\n+    public void remove(ProcessDetail toDelete) {\n         Iterator<TreeNode> treeNodesIterator = treeNode.getChildren().iterator();\n         while (treeNodesIterator.hasNext()) {\n             TreeNode treeNode = treeNodesIterator.next();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgzOTgwNg==", "url": "https://github.com/kitodo/kitodo-production/pull/3057#discussion_r367839806", "bodyText": "public or private?\nplease add Javadoc", "author": "Kathrin-Huber", "createdAt": "2020-01-17T09:28:04Z", "path": "Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java", "diffHunk": "@@ -386,10 +431,29 @@ void preserve() throws InvalidMetadataValueException, NoSuchMetadataFieldExcepti\n             }\n             metadata.addAll(hiddenMetadata);\n         } catch (InvalidMetadataValueException invalidValueException) {\n-            if (Objects.isNull(structure)) {\n+            if (Objects.isNull(division)) {\n                 invalidValueException.addParent(metadataView.getId());\n             }\n             throw invalidValueException;\n         }\n     }\n+\n+    void remove(ProcessDetail toDelete) {\n+        Iterator<TreeNode> treeNodesIterator = treeNode.getChildren().iterator();\n+        while (treeNodesIterator.hasNext()) {\n+            TreeNode treeNode = treeNodesIterator.next();\n+            if (treeNode.getData().equals(toDelete)) {\n+                treeNodesIterator.remove();\n+                break;\n+            }\n+        }\n+    }\n+\n+    void setMetadata(Collection<Metadata> metadata) {", "originalCommit": "a53240db7b524ad430b4857025575e62f405b4ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bc59c4c7f31a8f96cf9f37fd492e7a20c5a214f9", "chunk": "diff --git a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java\nindex a41a96cb6..6e3b673f5 100644\n--- a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java\n+++ b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessFieldedMetadata.java\n\n@@ -438,7 +444,13 @@ public class ProcessFieldedMetadata extends ProcessDetail implements Serializabl\n         }\n     }\n \n-    void remove(ProcessDetail toDelete) {\n+    /**\n+     * Removes a process detail.\n+     * \n+     * @param toDelete\n+     *            process detail to delete\n+     */\n+    public void remove(ProcessDetail toDelete) {\n         Iterator<TreeNode> treeNodesIterator = treeNode.getChildren().iterator();\n         while (treeNodesIterator.hasNext()) {\n             TreeNode treeNode = treeNodesIterator.next();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgzOTkwOA==", "url": "https://github.com/kitodo/kitodo-production/pull/3057#discussion_r367839908", "bodyText": "please add javadoc", "author": "Kathrin-Huber", "createdAt": "2020-01-17T09:28:17Z", "path": "Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessMetadataTab.java", "diffHunk": "@@ -44,6 +45,10 @@ public ProcessFieldedMetadata initializeProcessDetails(IncludedStructuralElement\n         return new ProcessFieldedMetadata(structure, divisionView);\n     }\n \n+    public TreeNode getLogicalMetadataTree() {", "originalCommit": "a53240db7b524ad430b4857025575e62f405b4ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bc59c4c7f31a8f96cf9f37fd492e7a20c5a214f9", "chunk": "diff --git a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessMetadataTab.java b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessMetadataTab.java\nindex dd5186b7e..9b45c2caa 100644\n--- a/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessMetadataTab.java\n+++ b/Kitodo/src/main/java/org/kitodo/production/forms/createprocess/ProcessMetadataTab.java\n\n@@ -45,6 +45,11 @@ public class ProcessMetadataTab {\n         return new ProcessFieldedMetadata(structure, divisionView);\n     }\n \n+    /**\n+     * Returns the logical metadata tree.\n+     * \n+     * @return the logical metadata tree\n+     */\n     public TreeNode getLogicalMetadataTree() {\n         return processDetails.getTreeNode();\n     }\n"}}, {"oid": "bc59c4c7f31a8f96cf9f37fd492e7a20c5a214f9", "url": "https://github.com/kitodo/kitodo-production/commit/bc59c4c7f31a8f96cf9f37fd492e7a20c5a214f9", "message": "Fixes in review", "committedDate": "2020-01-20T10:48:31Z", "type": "commit"}]}