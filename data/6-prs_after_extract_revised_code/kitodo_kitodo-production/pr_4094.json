{"pr_number": 4094, "pr_title": "add none workflow condition", "pr_createdAt": "2020-11-12T09:35:41Z", "pr_url": "https://github.com/kitodo/kitodo-production/pull/4094", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTk3MzkxOQ==", "url": "https://github.com/kitodo/kitodo-production/pull/4094#discussion_r521973919", "bodyText": "I would put the none-condition first like it is defined in WorkflowConditionType for consistency. Also, it might be the most likely case anyway. We wouldn't have to evaluate all options all the time.\nMight make sense to change the if/else if block to a switch-statement now though.\nswitch (type.toLowerCase()) {\n    case \"none\": { \u2026 }\n    case \"script\": { \u2026 }\n    case \"xpath\": { \u2026 }\n    default: { Exception }\n}", "author": "Erikmitk", "createdAt": "2020-11-12T09:49:24Z", "path": "Kitodo-DataManagement/src/main/java/org/kitodo/data/database/beans/WorkflowCondition.java", "diffHunk": "@@ -48,8 +48,10 @@ public WorkflowCondition(String type, String value) {\n             this.type = WorkflowConditionType.SCRIPT;\n         } else if (type.equalsIgnoreCase(\"xpath\")) {\n             this.type = WorkflowConditionType.XPATH;\n+        } else if (type.equalsIgnoreCase(\"none\")) {\n+            this.type = WorkflowConditionType.NONE;\n         } else {\n-            throw new InvalidParameterException(\"Type should be script or XPath, but was \" +  type);\n+            throw new InvalidParameterException(\"Type should be none, script or XPath, but was \" +  type);", "originalCommit": "45d333d8ca51a70bfba0261e82c0e886e9bb08d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjAyMTIwMA==", "url": "https://github.com/kitodo/kitodo-production/pull/4094#discussion_r522021200", "bodyText": "Actually it's the least likely case, because it's only set if you actively select the noOption in the frontend, otherwise it's null.\nBut \ud83d\udc4d  for the switch statement, I'm going to change this, and then the order doesn't matter anyway ;-)", "author": "Kathrin-Huber", "createdAt": "2020-11-12T11:03:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTk3MzkxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA4MTgwOA==", "url": "https://github.com/kitodo/kitodo-production/pull/4094#discussion_r522081808", "bodyText": "Actually it's the least likely case, because it's only set if you actively select the noOption in the frontend, otherwise it's null.\n\nAh\u2026 yeah\u2026 you're right. The difference between theory and practice.\ud83d\ude04", "author": "Erikmitk", "createdAt": "2020-11-12T12:50:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTk3MzkxOQ=="}], "type": "inlineReview", "revised_code": {"commit": "3a2be71af1102dc0ef719994188f07c576b45157", "chunk": "diff --git a/Kitodo-DataManagement/src/main/java/org/kitodo/data/database/beans/WorkflowCondition.java b/Kitodo-DataManagement/src/main/java/org/kitodo/data/database/beans/WorkflowCondition.java\nindex fcaa71338..a5ebfb6a0 100644\n--- a/Kitodo-DataManagement/src/main/java/org/kitodo/data/database/beans/WorkflowCondition.java\n+++ b/Kitodo-DataManagement/src/main/java/org/kitodo/data/database/beans/WorkflowCondition.java\n\n@@ -44,14 +44,21 @@ public class WorkflowCondition extends BaseBean {\n      *            of workflow condition\n      */\n     public WorkflowCondition(String type, String value) {\n-        if (type.equalsIgnoreCase(\"script\")) {\n-            this.type = WorkflowConditionType.SCRIPT;\n-        } else if (type.equalsIgnoreCase(\"xpath\")) {\n-            this.type = WorkflowConditionType.XPATH;\n-        } else if (type.equalsIgnoreCase(\"none\")) {\n-            this.type = WorkflowConditionType.NONE;\n-        } else {\n-            throw new InvalidParameterException(\"Type should be none, script or XPath, but was \" +  type);\n+        switch (type.toLowerCase()) {\n+            case \"none\": {\n+                this.type = WorkflowConditionType.NONE;\n+                break;\n+            }\n+            case \"script\": {\n+                this.type = WorkflowConditionType.SCRIPT;\n+                break;\n+            }\n+            case \"xpath\": {\n+                this.type = WorkflowConditionType.XPATH;\n+                break;\n+            }\n+            default:\n+                throw new InvalidParameterException(\"Type should be none, script or XPath, but was \" + type);\n         }\n         this.value = value;\n     }\n"}}, {"oid": "3a2be71af1102dc0ef719994188f07c576b45157", "url": "https://github.com/kitodo/kitodo-production/commit/3a2be71af1102dc0ef719994188f07c576b45157", "message": "add none workflow condition", "committedDate": "2020-11-12T11:10:58Z", "type": "commit"}, {"oid": "3a2be71af1102dc0ef719994188f07c576b45157", "url": "https://github.com/kitodo/kitodo-production/commit/3a2be71af1102dc0ef719994188f07c576b45157", "message": "add none workflow condition", "committedDate": "2020-11-12T11:10:58Z", "type": "forcePushed"}]}