{"pr_number": 810, "pr_title": "Rdm 7419: Introduce Cucumber Runner Classes", "pr_createdAt": "2020-02-12T10:48:06Z", "pr_url": "https://github.com/hmcts/ccd-data-store-api/pull/810", "timeline": [{"oid": "d6d6410344282664ae99d891c06e1dc69f3e9800", "url": "https://github.com/hmcts/ccd-data-store-api/commit/d6d6410344282664ae99d891c06e1dc69f3e9800", "message": "RDM-7419: Introduce Cucumber Runner Classes", "committedDate": "2020-02-12T10:48:19Z", "type": "commit"}, {"oid": "be1369c216320b85e068fb7ff155894d93d1365a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/be1369c216320b85e068fb7ff155894d93d1365a", "message": "move the befta runner class to dedicated package", "committedDate": "2020-02-12T11:16:00Z", "type": "commit"}, {"oid": "9081a9e2c2e3d5df2b58eb32526789cb0a66b4f2", "url": "https://github.com/hmcts/ccd-data-store-api/commit/9081a9e2c2e3d5df2b58eb32526789cb0a66b4f2", "message": "rename the class for more specific naming", "committedDate": "2020-02-12T11:16:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE4OTQxOA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/810#discussion_r378189418", "bodyText": "Could we please not extend BeftaMain, as this class wouldn't reasonably form an is-a relation with it?", "author": "MSancaktutar", "createdAt": "2020-02-12T11:19:26Z", "path": "src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java", "diffHunk": "@@ -0,0 +1,24 @@\n+package uk.gov.hmcts.ccd.datastore.befta;\n+\n+import io.cucumber.junit.Cucumber;\n+import io.cucumber.junit.CucumberOptions;\n+import org.junit.BeforeClass;\n+import org.junit.runner.RunWith;\n+import uk.gov.hmcts.befta.BeftaMain;\n+import uk.gov.hmcts.befta.BeftaTestDataLoader;\n+import uk.gov.hmcts.befta.DefaultTestAutomationAdapter;\n+\n+\n+@RunWith(Cucumber.class)\n+@CucumberOptions(plugin = \"json:target/cucumber.json\",\n+    glue = \"uk.gov.hmcts.befta.player\",\n+    features = {\"classpath:features\"})\n+public class DataStoreBeftaRunner extends BeftaMain {", "originalCommit": "9081a9e2c2e3d5df2b58eb32526789cb0a66b4f2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE5NDM2NQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/810#discussion_r378194365", "bodyText": "Agree.. will remove that", "author": "kiran-yenigala-hmcts", "createdAt": "2020-02-12T11:30:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE4OTQxOA=="}], "type": "inlineReview", "revised_code": {"commit": "4987b77659a1a3a93eb411cb7d088baeb8cc3c26", "chunk": "diff --git a/src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java b/src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java\nindex c949db397..eae3314b3 100644\n--- a/src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java\n+++ b/src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java\n\n@@ -5,20 +5,17 @@ import io.cucumber.junit.CucumberOptions;\n import org.junit.BeforeClass;\n import org.junit.runner.RunWith;\n import uk.gov.hmcts.befta.BeftaMain;\n-import uk.gov.hmcts.befta.BeftaTestDataLoader;\n-import uk.gov.hmcts.befta.DefaultTestAutomationAdapter;\n \n \n @RunWith(Cucumber.class)\n @CucumberOptions(plugin = \"json:target/cucumber.json\",\n     glue = \"uk.gov.hmcts.befta.player\",\n     features = {\"classpath:features\"})\n-public class DataStoreBeftaRunner extends BeftaMain {\n+public class DataStoreBeftaRunner {\n \n     @BeforeClass\n     public static void init() {\n-        setTaAdapter(new DefaultTestAutomationAdapter());\n-        BeftaTestDataLoader.main(null);\n+        BeftaMain.tearUp();\n     }\n \n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE5MjI0OA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/810#discussion_r378192248", "bodyText": "Apart from the data loading, there is also another tear-up logic to inject syntactic flexibilities into DSL elements. That is inside BeftaMain. We should probably combine any such initial tear up logic into a dedicated public static method inside BeftaMain and re-use that from anywhere needed. The adapter object can be a parameter to that one. This way, we can standardise and re-use the logic to max extent.", "author": "MSancaktutar", "createdAt": "2020-02-12T11:25:40Z", "path": "src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java", "diffHunk": "@@ -0,0 +1,24 @@\n+package uk.gov.hmcts.ccd.datastore.befta;\n+\n+import io.cucumber.junit.Cucumber;\n+import io.cucumber.junit.CucumberOptions;\n+import org.junit.BeforeClass;\n+import org.junit.runner.RunWith;\n+import uk.gov.hmcts.befta.BeftaMain;\n+import uk.gov.hmcts.befta.BeftaTestDataLoader;\n+import uk.gov.hmcts.befta.DefaultTestAutomationAdapter;\n+\n+\n+@RunWith(Cucumber.class)\n+@CucumberOptions(plugin = \"json:target/cucumber.json\",\n+    glue = \"uk.gov.hmcts.befta.player\",\n+    features = {\"classpath:features\"})\n+public class DataStoreBeftaRunner extends BeftaMain {\n+\n+    @BeforeClass\n+    public static void init() {\n+        setTaAdapter(new DefaultTestAutomationAdapter());\n+        BeftaTestDataLoader.main(null);", "originalCommit": "9081a9e2c2e3d5df2b58eb32526789cb0a66b4f2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE5NDI2MQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/810#discussion_r378194261", "bodyText": "so we need to change ccd-api-test-automation-fw for this change then", "author": "kiran-yenigala-hmcts", "createdAt": "2020-02-12T11:30:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE5MjI0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE5NTM2OA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/810#discussion_r378195368", "bodyText": "yep..", "author": "MSancaktutar", "createdAt": "2020-02-12T11:32:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE5MjI0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODIxMzA0Ng==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/810#discussion_r378213046", "bodyText": "Changed in ccd-api-test-automation-fw  and calling the necessary methods", "author": "kiran-yenigala-hmcts", "createdAt": "2020-02-12T12:11:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE5MjI0OA=="}], "type": "inlineReview", "revised_code": {"commit": "4987b77659a1a3a93eb411cb7d088baeb8cc3c26", "chunk": "diff --git a/src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java b/src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java\nindex c949db397..eae3314b3 100644\n--- a/src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java\n+++ b/src/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java\n\n@@ -5,20 +5,17 @@ import io.cucumber.junit.CucumberOptions;\n import org.junit.BeforeClass;\n import org.junit.runner.RunWith;\n import uk.gov.hmcts.befta.BeftaMain;\n-import uk.gov.hmcts.befta.BeftaTestDataLoader;\n-import uk.gov.hmcts.befta.DefaultTestAutomationAdapter;\n \n \n @RunWith(Cucumber.class)\n @CucumberOptions(plugin = \"json:target/cucumber.json\",\n     glue = \"uk.gov.hmcts.befta.player\",\n     features = {\"classpath:features\"})\n-public class DataStoreBeftaRunner extends BeftaMain {\n+public class DataStoreBeftaRunner {\n \n     @BeforeClass\n     public static void init() {\n-        setTaAdapter(new DefaultTestAutomationAdapter());\n-        BeftaTestDataLoader.main(null);\n+        BeftaMain.tearUp();\n     }\n \n }\n"}}, {"oid": "4987b77659a1a3a93eb411cb7d088baeb8cc3c26", "url": "https://github.com/hmcts/ccd-data-store-api/commit/4987b77659a1a3a93eb411cb7d088baeb8cc3c26", "message": "RDM-7419: Introduce Cucumber Runner Classes", "committedDate": "2020-02-12T12:11:20Z", "type": "commit"}, {"oid": "a0cbe4f5cc817124436432cb11c9cd9605ed2612", "url": "https://github.com/hmcts/ccd-data-store-api/commit/a0cbe4f5cc817124436432cb11c9cd9605ed2612", "message": "use setUp and tearDown logic from framework", "committedDate": "2020-02-12T12:35:35Z", "type": "commit"}, {"oid": "dfc4b233fe038048345948565831df6d1959d583", "url": "https://github.com/hmcts/ccd-data-store-api/commit/dfc4b233fe038048345948565831df6d1959d583", "message": "RDM-7419: Introduce Cucumber Runner Classes", "committedDate": "2020-02-12T12:36:13Z", "type": "commit"}, {"oid": "c38aba91074fee7095bd89363ad50bc64393a05a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/c38aba91074fee7095bd89363ad50bc64393a05a", "message": "Merge branch 'RDM-7419' of git@github.com:hmcts/ccd-data-store-api.git\ninto RDM-7419\n\nConflicts:\n\tsrc/aat/java/uk/gov/hmcts/ccd/datastore/befta/DataStoreBeftaRunner.java", "committedDate": "2020-02-12T12:37:25Z", "type": "commit"}, {"oid": "7e5e8052033b37be2cfa565bc96aec201fd09b73", "url": "https://github.com/hmcts/ccd-data-store-api/commit/7e5e8052033b37be2cfa565bc96aec201fd09b73", "message": "bump up to prerelease", "committedDate": "2020-02-12T12:52:27Z", "type": "commit"}, {"oid": "2fe4e31e4adc2d3beb2aebc48628ae3cbf93f1c2", "url": "https://github.com/hmcts/ccd-data-store-api/commit/2fe4e31e4adc2d3beb2aebc48628ae3cbf93f1c2", "message": "Merge branch 'develop' into RDM-7419\n\nConflicts:\n\tbuild.gradle", "committedDate": "2020-02-12T12:53:56Z", "type": "commit"}, {"oid": "e317293a39fafc07fa5d39809f80533618c509ef", "url": "https://github.com/hmcts/ccd-data-store-api/commit/e317293a39fafc07fa5d39809f80533618c509ef", "message": "bump up to new  prerelease", "committedDate": "2020-02-12T13:02:29Z", "type": "commit"}, {"oid": "e7d9ac11cf4a9d802804a2298ccb1fa67358b2b7", "url": "https://github.com/hmcts/ccd-data-store-api/commit/e7d9ac11cf4a9d802804a2298ccb1fa67358b2b7", "message": "bump up to new  prerelease", "committedDate": "2020-02-12T13:24:13Z", "type": "commit"}, {"oid": "79e8fa047180110a129ea17872aeb962a73cac2b", "url": "https://github.com/hmcts/ccd-data-store-api/commit/79e8fa047180110a129ea17872aeb962a73cac2b", "message": "fix intermittent headers", "committedDate": "2020-02-12T13:31:59Z", "type": "commit"}, {"oid": "94b1d46a21eace8a99d727e847c0bf411c660b3a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/94b1d46a21eace8a99d727e847c0bf411c660b3a", "message": "bump up to latest release containing runner support", "committedDate": "2020-02-12T16:56:16Z", "type": "commit"}, {"oid": "f7afd949b89f45fcb7fee4dc3bbf6fce5396eed5", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f7afd949b89f45fcb7fee4dc3bbf6fce5396eed5", "message": "just format", "committedDate": "2020-02-12T17:04:15Z", "type": "commit"}]}