{"pr_number": 638, "pr_title": "ignore case in query", "pr_createdAt": "2020-06-11T13:31:21Z", "pr_url": "https://github.com/RIPE-NCC/whois/pull/638", "timeline": [{"oid": "1500ff8ed7605c0f98d49b0b94584477ef2bafd6", "url": "https://github.com/RIPE-NCC/whois/commit/1500ff8ed7605c0f98d49b0b94584477ef2bafd6", "message": "ignore case in query", "committedDate": "2020-06-11T13:30:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk4MDExNQ==", "url": "https://github.com/RIPE-NCC/whois/pull/638#discussion_r439980115", "bodyText": "You can use responseObject.getKey().equals(query.getSearchValue()) (drop the static ciString)", "author": "eshryane", "createdAt": "2020-06-15T07:30:07Z", "path": "whois-api/src/main/java/net/ripe/db/whois/api/rdap/RdapQueryHandler.java", "diffHunk": "@@ -63,8 +64,7 @@ public void handle(final ResponseObject responseObject) {\n                 }\n \n                 private void addIfPrimaryObject(final RpslObject responseObject) {\n-                    final String primaryKey = responseObject.getKey().toString();\n-                    if(primaryKey.equals(query.getSearchValue())) {\n+                    if(responseObject.getKey().equals(ciString(query.getSearchValue()))) {", "originalCommit": "1500ff8ed7605c0f98d49b0b94584477ef2bafd6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk5NzI2Mg==", "url": "https://github.com/RIPE-NCC/whois/pull/638#discussion_r439997262", "bodyText": "I have to add equals ignore case then, as cistring as our own implementation of equals, wont it be best if we use that?", "author": "maggarwal13", "createdAt": "2020-06-15T08:03:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk4MDExNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNDgyNQ==", "url": "https://github.com/RIPE-NCC/whois/pull/638#discussion_r440014825", "bodyText": "responseObject.getKey() is already a CIString, and it overrides equals() to perform an insensitive match on a String. So it's unnecessary to also convert the searchValue to a CIString.", "author": "eshryane", "createdAt": "2020-06-15T08:34:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk4MDExNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAzNDgyNQ==", "url": "https://github.com/RIPE-NCC/whois/pull/638#discussion_r440034825", "bodyText": "Ah, I missed the point, Thanks :)", "author": "maggarwal13", "createdAt": "2020-06-15T09:08:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk4MDExNQ=="}], "type": "inlineReview", "revised_code": {"commit": "0ebfa916079ff2aac5f0ae759346ee9fbd63f40a", "chunk": "diff --git a/whois-api/src/main/java/net/ripe/db/whois/api/rdap/RdapQueryHandler.java b/whois-api/src/main/java/net/ripe/db/whois/api/rdap/RdapQueryHandler.java\nindex e6f7169d2..ac9517615 100644\n--- a/whois-api/src/main/java/net/ripe/db/whois/api/rdap/RdapQueryHandler.java\n+++ b/whois-api/src/main/java/net/ripe/db/whois/api/rdap/RdapQueryHandler.java\n\n@@ -64,7 +63,7 @@ public class RdapQueryHandler {\n                 }\n \n                 private void addIfPrimaryObject(final RpslObject responseObject) {\n-                    if(responseObject.getKey().equals(ciString(query.getSearchValue()))) {\n+                    if(responseObject.getKey().equals(query.getSearchValue())) {\n                         result.add(responseObject);\n                     }\n                 }\n"}}, {"oid": "0ebfa916079ff2aac5f0ae759346ee9fbd63f40a", "url": "https://github.com/RIPE-NCC/whois/commit/0ebfa916079ff2aac5f0ae759346ee9fbd63f40a", "message": "use CIString equals", "committedDate": "2020-06-15T09:08:59Z", "type": "commit"}]}