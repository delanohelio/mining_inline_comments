{"pr_number": 3807, "pr_title": "DB-9825 add SQL shell command to show clock in prompt", "pr_createdAt": "2020-07-10T19:22:44Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/3807", "timeline": [{"oid": "d0e31662e88c88abb2c3972f96d38155bc763b3f", "url": "https://github.com/splicemachine/spliceengine/commit/d0e31662e88c88abb2c3972f96d38155bc763b3f", "message": "DB-9825 add SQL shell command to show clock in prompt.\n\n- Add a new SQL shell command: `prompt clock on` and\n  `prompt clock off` which shows a clock in the sqlshell\n  prompt in client's local time.", "committedDate": "2020-07-10T19:19:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzODg3NQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3807#discussion_r454938875", "bodyText": "Shouldn't that be static? Setting a static field from a nonstatic method is weird.", "author": "arnaud-splice", "createdAt": "2020-07-15T10:04:17Z", "path": "db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java", "diffHunk": "@@ -845,4 +846,8 @@ int getCurrentRowNumber(ResultSet rs)\n \tpublic final Object run() {\n \t\treturn  getClass().getResourceAsStream(ProductGenusNames.TOOLS_INFO);\n \t}\n+\n+\tpublic void setPromptClock(boolean showPromptClock) {", "originalCommit": "d0e31662e88c88abb2c3972f96d38155bc763b3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTU2NjQwOA==", "url": "https://github.com/splicemachine/spliceengine/pull/3807#discussion_r455566408", "bodyText": "Fixed.", "author": "hatyo", "createdAt": "2020-07-16T07:28:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzODg3NQ=="}], "type": "inlineReview", "revised_code": {"commit": "8e7f585276f49fb418c432c7bbdb0ead24e61853", "chunk": "diff --git a/db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java b/db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java\nindex 6b74e0aad3..ab53be9f57 100644\n--- a/db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java\n+++ b/db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java\n\n@@ -847,7 +847,7 @@ public class utilMain implements java.security.PrivilegedAction {\n \t\treturn  getClass().getResourceAsStream(ProductGenusNames.TOOLS_INFO);\n \t}\n \n-\tpublic void setPromptClock(boolean showPromptClock) {\n-\t\tthis.showPromptClock = showPromptClock;\n+\tpublic static void setPromptClock(boolean showPromptClock) {\n+\t\tutilMain.showPromptClock = showPromptClock;\n \t}\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0MTM4MA==", "url": "https://github.com/splicemachine/spliceengine/pull/3807#discussion_r454941380", "bodyText": "Please use ISO 8601 delimiters for the date: yyyy-MM-dd", "author": "arnaud-splice", "createdAt": "2020-07-15T10:09:03Z", "path": "db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java", "diffHunk": "@@ -664,13 +661,17 @@ void newResourceInput(String resourceName) {\n \t * used at each carriage return to show that it is still \"live\"\n \t * when it is reading multi-line input.\n \t */\n-\tstatic void doPrompt(boolean newStatement, LocalizedOutput out, String tag) \n+\t static void doPrompt(boolean newStatement, LocalizedOutput out, String tag)\n \t {\n+\t \tfinal SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy.MM.dd HH:mm:ss\");", "originalCommit": "d0e31662e88c88abb2c3972f96d38155bc763b3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEwODM5OA==", "url": "https://github.com/splicemachine/spliceengine/pull/3807#discussion_r455108398", "bodyText": "Good point! thanks, I will fix it.", "author": "hatyo", "createdAt": "2020-07-15T14:45:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0MTM4MA=="}], "type": "inlineReview", "revised_code": {"commit": "8e7f585276f49fb418c432c7bbdb0ead24e61853", "chunk": "diff --git a/db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java b/db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java\nindex 6b74e0aad3..ab53be9f57 100644\n--- a/db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java\n+++ b/db-tools-ij/src/main/java/com/splicemachine/db/impl/tools/ij/utilMain.java\n\n@@ -663,7 +663,7 @@ public class utilMain implements java.security.PrivilegedAction {\n \t */\n \t static void doPrompt(boolean newStatement, LocalizedOutput out, String tag)\n \t {\n-\t \tfinal SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy.MM.dd HH:mm:ss\");\n+\t \tfinal SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ssZZZZ\");\n \n \t \tString clock = showPromptClock ? \" \" + sdf.format(new Timestamp(System.currentTimeMillis())) : \"\";\n \n"}}, {"oid": "8e7f585276f49fb418c432c7bbdb0ead24e61853", "url": "https://github.com/splicemachine/spliceengine/commit/8e7f585276f49fb418c432c7bbdb0ead24e61853", "message": "Address comments and show timezone offset.", "committedDate": "2020-07-16T07:14:09Z", "type": "commit"}, {"oid": "f468e2bd0a86d15c771331ec6c5f9669a9670cb1", "url": "https://github.com/splicemachine/spliceengine/commit/f468e2bd0a86d15c771331ec6c5f9669a9670cb1", "message": "Merge remote-tracking branch 'origin/master' into DB-9825", "committedDate": "2020-07-16T07:36:51Z", "type": "commit"}, {"oid": "0a1f6db524b08a769988503ce24b0ee8b898ed8a", "url": "https://github.com/splicemachine/spliceengine/commit/0a1f6db524b08a769988503ce24b0ee8b898ed8a", "message": "Merge remote-tracking branch 'origin/master' into DB-9825", "committedDate": "2020-07-22T16:14:45Z", "type": "commit"}]}