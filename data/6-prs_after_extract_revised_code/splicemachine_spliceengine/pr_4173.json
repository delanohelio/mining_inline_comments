{"pr_number": 4173, "pr_title": "DB-10327 Add dbId to SchemaWatcher ", "pr_createdAt": "2020-09-22T16:32:29Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/4173", "timeline": [{"oid": "6cccda04f0956cf82d9ccf29e36084215b9bb37f", "url": "https://github.com/splicemachine/spliceengine/commit/6cccda04f0956cf82d9ccf29e36084215b9bb37f", "message": "DB-10327 Add dbId to SchemaWatcher", "committedDate": "2020-09-22T16:07:42Z", "type": "commit"}, {"oid": "79656b7c9c79bd86a187991d1b68449720b1b3fa", "url": "https://github.com/splicemachine/spliceengine/commit/79656b7c9c79bd86a187991d1b68449720b1b3fa", "message": "DB-10327 Fix more ITs", "committedDate": "2020-09-22T16:30:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzEwMzQ3OQ==", "url": "https://github.com/splicemachine/spliceengine/pull/4173#discussion_r493103479", "bodyText": "Can we keep the original constructor SpliceSchemaWatcher(String schemaName and let it call SpliceSchemaWatcher(null, schemaName)? Maybe we can avoid touching so many ITs.", "author": "yxia92", "createdAt": "2020-09-23T00:17:52Z", "path": "splice_machine/src/test/java/com/splicemachine/derby/test/framework/SpliceSchemaWatcher.java", "diffHunk": "@@ -35,21 +35,23 @@\n     private static CleanupMode mode = CleanupMode.UNDEF;\n     private static Semaphore sync;\n \n+    public String dbName;\n     public String schemaName;\n     protected String userName;\n \n-    public SpliceSchemaWatcher(String schemaName) {\n+    public SpliceSchemaWatcher(String dbName, String schemaName) {", "originalCommit": "79656b7c9c79bd86a187991d1b68449720b1b3fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ2MzMzOA==", "url": "https://github.com/splicemachine/spliceengine/pull/4173#discussion_r493463338", "bodyText": "+1, I was going to propose the same thing", "author": "dgomezferro", "createdAt": "2020-09-23T11:13:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzEwMzQ3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzU5MjEzMA==", "url": "https://github.com/splicemachine/spliceengine/pull/4173#discussion_r493592130", "bodyText": "Good idea, this PR is now much smaller!", "author": "arnaud-splice", "createdAt": "2020-09-23T13:32:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzEwMzQ3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "f35f64acd275df4b4b28ad03f26598212acdcd3c", "chunk": "diff --git a/splice_machine/src/test/java/com/splicemachine/derby/test/framework/SpliceSchemaWatcher.java b/splice_machine/src/test/java/com/splicemachine/derby/test/framework/SpliceSchemaWatcher.java\nindex 4be7071790..d0fe0f1f13 100644\n--- a/splice_machine/src/test/java/com/splicemachine/derby/test/framework/SpliceSchemaWatcher.java\n+++ b/splice_machine/src/test/java/com/splicemachine/derby/test/framework/SpliceSchemaWatcher.java\n\n@@ -35,23 +35,21 @@ public class SpliceSchemaWatcher extends TestWatcher {\n     private static CleanupMode mode = CleanupMode.UNDEF;\n     private static Semaphore sync;\n \n-    public String dbName;\n     public String schemaName;\n     protected String userName;\n \n-    public SpliceSchemaWatcher(String dbName, String schemaName) {\n-        this.dbName = dbName;\n+    public SpliceSchemaWatcher(String schemaName) {\n         this.schemaName = schemaName.toUpperCase();\n     }\n \n-    public SpliceSchemaWatcher(String dbName, String schemaName, String userName) {\n-        this(dbName, schemaName);\n+    public SpliceSchemaWatcher(String schemaName, String userName) {\n+        this(schemaName);\n         this.userName = userName;\n     }\n \n     @Override\n     protected void starting(Description description) {\n-        try (Connection connection = SpliceNetConnection.newBuilder().database(dbName).build()) {\n+        try (Connection connection = SpliceNetConnection.getDefaultConnection()){\n //            connection.setAutoCommit(false);\n \n             SchemaDAO schemaDAO = new SchemaDAO(connection);\n"}}, {"oid": "0e01f7d4f46afbfcd13793b7f05a4f4f300fad0d", "url": "https://github.com/splicemachine/spliceengine/commit/0e01f7d4f46afbfcd13793b7f05a4f4f300fad0d", "message": "Revert \"DB-10327 Fix more ITs\"\n\nThis reverts commit 79656b7c9c79bd86a187991d1b68449720b1b3fa.", "committedDate": "2020-09-23T13:21:28Z", "type": "commit"}, {"oid": "f35f64acd275df4b4b28ad03f26598212acdcd3c", "url": "https://github.com/splicemachine/spliceengine/commit/f35f64acd275df4b4b28ad03f26598212acdcd3c", "message": "Revert \"DB-10327 Add dbId to SchemaWatcher\"\n\nThis reverts commit 6cccda04f0956cf82d9ccf29e36084215b9bb37f.", "committedDate": "2020-09-23T13:21:35Z", "type": "commit"}, {"oid": "8f52abd8c6f5d76a0d80f5db506cc665f3ed4b96", "url": "https://github.com/splicemachine/spliceengine/commit/8f52abd8c6f5d76a0d80f5db506cc665f3ed4b96", "message": "DB-10327 Keep original one parameter constructor", "committedDate": "2020-09-23T13:27:56Z", "type": "commit"}]}