{"pr_number": 3947, "pr_title": "DB-9904 Abort compaction if driver is not yet available ", "pr_createdAt": "2020-08-07T13:30:18Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/3947", "timeline": [{"oid": "665743230b8b7a2543aafd9bc0bf78383e42574e", "url": "https://github.com/splicemachine/spliceengine/commit/665743230b8b7a2543aafd9bc0bf78383e42574e", "message": "DB-9904 Abort compaction if driver is not yet available", "committedDate": "2020-08-07T13:27:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzExMzczNQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3947#discussion_r467113735", "bodyText": "Finally we get rid of this NullPointerException during startup :-)", "author": "jyuanca", "createdAt": "2020-08-07T15:32:00Z", "path": "hbase_sql/src/main/java/com/splicemachine/compactions/SpliceDefaultCompactor.java", "diffHunk": "@@ -152,7 +152,11 @@ public SpliceDefaultCompactor(final Configuration conf, final Store store, long\n         CompactionResult result = null;\n         SpliceCompactionRequest scr = (SpliceCompactionRequest) request;\n \n-        Future<CompactionResult> futureResult = EngineDriver.driver().getOlapClient().submit(jobRequest, getCompactionQueue());\n+        EngineDriver driver = EngineDriver.driver();\n+        if (driver == null) {\n+            throw new IOException(\"EngineDriver not available, compaction aborted\");\n+        }", "originalCommit": "665743230b8b7a2543aafd9bc0bf78383e42574e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}