{"pr_number": 6628, "pr_title": "added PIDs for datasets and files to guestbook download", "pr_createdAt": "2020-02-07T21:37:13Z", "pr_url": "https://github.com/IQSS/dataverse/pull/6628", "timeline": [{"oid": "fba12c28b2bbd4dcc071fc4cab0c640bda719b18", "url": "https://github.com/IQSS/dataverse/commit/fba12c28b2bbd4dcc071fc4cab0c640bda719b18", "message": "added persistent identifiers for datasets and files to guestbook csv download (#6534)", "committedDate": "2020-02-07T21:34:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYxOTY0MQ==", "url": "https://github.com/IQSS/dataverse/pull/6628#discussion_r376619641", "bodyText": "I'm fine with \"N/A\" here if there is no PID. Heads up to @jggautier", "author": "pdurbin", "createdAt": "2020-02-07T21:38:22Z", "path": "src/main/java/edu/harvard/iq/dataverse/GuestbookResponseServiceBean.java", "diffHunk": "@@ -226,6 +238,20 @@ public void streamResponsesByDataverseIdAndGuestbookId(OutputStream out, Long da\n         }\n     }\n     \n+    private String formatPersistentIdentifier(String protocol, String authority, String identifier) {\n+        // Note that the persistent id may be unavailable for this dvObject:\n+        if (StringUtil.nonEmpty(protocol) && StringUtil.nonEmpty(authority) && StringUtil.nonEmpty(identifier)) {\n+            StringBuilder sb = new StringBuilder();\n+            sb.append(protocol);\n+            sb.append(\":\");\n+            sb.append(authority);\n+            sb.append(\"/\");\n+            sb.append(identifier);\n+            return sb.toString();\n+        } \n+        return \"N/A\";", "originalCommit": "fba12c28b2bbd4dcc071fc4cab0c640bda719b18", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjY0MzkzMQ==", "url": "https://github.com/IQSS/dataverse/pull/6628#discussion_r376643931", "bodyText": "Thanks. I have no preference. Another conventional option is to leave it blank, right?\nIn the case where some files in a Dataverse repository have file PIDs and some files don't (which I don't think is the case for any Dataverse repository yet), would using \"N/A\" be better than leaving it blank? I'm trying to remember the details of another guestbook-related conversation we had with a repository admin who said she preferred using a value instead of leaving it blank because it was a clearer to her that a record was written and, i.e. that the code worked.", "author": "jggautier", "createdAt": "2020-02-07T22:50:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYxOTY0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2MzgyMA==", "url": "https://github.com/IQSS/dataverse/pull/6628#discussion_r377263820", "bodyText": "@jggautier if you're fine with it, so am I. Thanks.", "author": "pdurbin", "createdAt": "2020-02-10T19:17:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYxOTY0MQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "d2fcfb9d5ba0ddfb9dad40e05e79ee3f14204515", "url": "https://github.com/IQSS/dataverse/commit/d2fcfb9d5ba0ddfb9dad40e05e79ee3f14204515", "message": "add release note about new columns #6534", "committedDate": "2020-02-10T19:17:09Z", "type": "commit"}]}