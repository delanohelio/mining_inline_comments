{"pr_number": 7033, "pr_title": "6915-feature-builtin-users-sendEmailNotification-new-optionalParameter", "pr_createdAt": "2020-06-29T16:32:27Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7033", "timeline": [{"oid": "85e05f2aeb4e09cde17852d4714b61d96f8be5c5", "url": "https://github.com/IQSS/dataverse/commit/85e05f2aeb4e09cde17852d4714b61d96f8be5c5", "message": " api/BuiltinUsers.java: add new overloading \"sendEmailNotification\" parameter to create(...) and internalSave(...)", "committedDate": "2020-06-29T16:29:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE0NTUxMg==", "url": "https://github.com/IQSS/dataverse/pull/7033#discussion_r447145512", "bodyText": "This new endpoint should be documented. Here's a link to the current docs in this area: http://guides.dataverse.org/en/4.20/api/native-api.html#create-a-builtin-user\nThe file to edit is doc/sphinx-guides/source/api/native-api.rst", "author": "pdurbin", "createdAt": "2020-06-29T17:46:57Z", "path": "src/main/java/edu/harvard/iq/dataverse/api/BuiltinUsers.java", "diffHunk": "@@ -105,7 +105,28 @@ public Response create(BuiltinUser user, @PathParam(\"password\") String password,\n         return internalSave(user, password, key);\n     }\n     \n+    //TODO: detailed description \n+    /**\n+     * Created this for #6915...\n+     *\n+     * @param user\n+     * @param password\n+     * @param key\n+     * @param sendEmailNotification\n+     * @return\n+     */\n+    @POST\n+    @Path(\"{password}/{key}/{sendEmailNotification}\")", "originalCommit": "85e05f2aeb4e09cde17852d4714b61d96f8be5c5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7e7b123a7e0ec355abc50d8f7c87ae40755be53c", "chunk": "diff --git a/src/main/java/edu/harvard/iq/dataverse/api/BuiltinUsers.java b/src/main/java/edu/harvard/iq/dataverse/api/BuiltinUsers.java\nindex c606f6fdd..cc9a1330a 100644\n--- a/src/main/java/edu/harvard/iq/dataverse/api/BuiltinUsers.java\n+++ b/src/main/java/edu/harvard/iq/dataverse/api/BuiltinUsers.java\n\n@@ -107,7 +107,7 @@ public class BuiltinUsers extends AbstractApiBean {\n     \n     //TODO: detailed description \n     /**\n-     * Created this for #6915...\n+     * Created this for #6915....\n      *\n      * @param user\n      * @param password\n"}}, {"oid": "7e7b123a7e0ec355abc50d8f7c87ae40755be53c", "url": "https://github.com/IQSS/dataverse/commit/7e7b123a7e0ec355abc50d8f7c87ae40755be53c", "message": "kick Travis", "committedDate": "2020-07-02T12:53:33Z", "type": "commit"}, {"oid": "ee926c044fbdb84b5cf9ef6a7789a9417240e4ca", "url": "https://github.com/IQSS/dataverse/commit/ee926c044fbdb84b5cf9ef6a7789a9417240e4ca", "message": "Added documentation on the sendEmailNotification parameter in BuiltinUsers.java and native-api.rst", "committedDate": "2020-07-10T13:33:48Z", "type": "commit"}, {"oid": "b5204a7758901e47d19ceefce178e3ccb22263f8", "url": "https://github.com/IQSS/dataverse/commit/b5204a7758901e47d19ceefce178e3ccb22263f8", "message": "sendEmailNotification: default to true", "committedDate": "2020-07-10T14:17:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1MTQwMQ==", "url": "https://github.com/IQSS/dataverse/pull/7033#discussion_r452951401", "bodyText": "sendEmailNotification appears to be a path parameter rather than a query parameter, as documented above. @RightInTwo can you provide a full curl example?", "author": "pdurbin", "createdAt": "2020-07-10T16:35:40Z", "path": "src/main/java/edu/harvard/iq/dataverse/api/BuiltinUsers.java", "diffHunk": "@@ -105,7 +108,29 @@ public Response create(BuiltinUser user, @PathParam(\"password\") String password,\n         return internalSave(user, password, key);\n     }\n     \n+    /**\n+     * Created this new endpoint to resolve issue #6915, optionally preventing \n+     * the email notification to the new user on account creation by adding \n+     * \"false\" as the third path parameter.\n+     *\n+     * @param user\n+     * @param password\n+     * @param key\n+     * @param sendEmailNotification\n+     * @return\n+     */\n+    @POST\n+    @Path(\"{password}/{key}/{sendEmailNotification}\")\n+    public Response create(BuiltinUser user, @PathParam(\"password\") String password, @PathParam(\"key\") String key, @PathParam(\"sendEmailNotification\") Boolean sendEmailNotification) {", "originalCommit": "b5204a7758901e47d19ceefce178e3ccb22263f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwNTQ1Nw==", "url": "https://github.com/IQSS/dataverse/pull/7033#discussion_r453005457", "bodyText": "Hi @pdurbin, we added both ways (query and path), just as the create() function is implemented for both currently. The docs at http://guides.dataverse.org/en/latest/api/native-api.html#assign-default-role-to-user-creating-a-dataset-in-a-dataverse seem to omit the path variant completely, which is why we left it out as well.", "author": "RightInTwo", "createdAt": "2020-07-10T18:28:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1MTQwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwODgyNg==", "url": "https://github.com/IQSS/dataverse/pull/7033#discussion_r453008826", "bodyText": "Oh, I get it. The query parameter version is called \"save\". Thanks.", "author": "pdurbin", "createdAt": "2020-07-10T18:35:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1MTQwMQ=="}], "type": "inlineReview", "revised_code": null}]}