{"pr_number": 1626, "pr_title": "ElasticSearch Rest  BulkIndex NPE fix for Race condition", "pr_createdAt": "2020-04-04T23:50:46Z", "pr_url": "https://github.com/Netflix/conductor/pull/1626", "timeline": [{"oid": "e9673605e7dc3b7530d53428647613444ee21b16", "url": "https://github.com/Netflix/conductor/commit/e9673605e7dc3b7530d53428647613444ee21b16", "message": "Use thread-safe wrapper for BulkRequest in ElasticSearchRestDAO", "committedDate": "2020-04-04T05:05:46Z", "type": "commit"}, {"oid": "84f75079f2b5288f123e6d3060ebfc09ce284c62", "url": "https://github.com/Netflix/conductor/commit/84f75079f2b5288f123e6d3060ebfc09ce284c62", "message": "Use thread-safe wrapper for ElasticSearchRestDAOV6 bulk request", "committedDate": "2020-04-04T23:28:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM4OTMwMg==", "url": "https://github.com/Netflix/conductor/pull/1626#discussion_r408389302", "bodyText": "Please add a license header.", "author": "apanicker-nflx", "createdAt": "2020-04-14T19:41:58Z", "path": "es5-persistence/src/main/java/com/netflix/conductor/dao/es5/index/BulkRequestWrapper.java", "diffHunk": "@@ -0,0 +1,43 @@\n+package com.netflix.conductor.dao.es5.index;", "originalCommit": "84f75079f2b5288f123e6d3060ebfc09ce284c62", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTk4ODA2Mg==", "url": "https://github.com/Netflix/conductor/pull/1626#discussion_r409988062", "bodyText": "Added license header.", "author": "mdepak", "createdAt": "2020-04-17T04:36:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM4OTMwMg=="}], "type": "inlineReview", "revised_code": {"commit": "a52165db15a2b65bf76f2a2f65de232abd52fa5d", "chunk": "diff --git a/es5-persistence/src/main/java/com/netflix/conductor/dao/es5/index/BulkRequestWrapper.java b/es5-persistence/src/main/java/com/netflix/conductor/dao/es5/index/BulkRequestWrapper.java\nindex faaccfc6..104a70a3 100644\n--- a/es5-persistence/src/main/java/com/netflix/conductor/dao/es5/index/BulkRequestWrapper.java\n+++ b/es5-persistence/src/main/java/com/netflix/conductor/dao/es5/index/BulkRequestWrapper.java\n\n@@ -1,3 +1,18 @@\n+/*\n+ * Copyright 2020 Netflix, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n package com.netflix.conductor.dao.es5.index;\n \n import org.elasticsearch.action.bulk.BulkRequest;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM4OTQ0Mw==", "url": "https://github.com/Netflix/conductor/pull/1626#discussion_r408389443", "bodyText": "Please add a license header.", "author": "apanicker-nflx", "createdAt": "2020-04-14T19:42:13Z", "path": "es6-persistence/src/main/java/com/netflix/conductor/dao/es6/index/BulkRequestWrapper.java", "diffHunk": "@@ -0,0 +1,43 @@\n+package com.netflix.conductor.dao.es6.index;", "originalCommit": "84f75079f2b5288f123e6d3060ebfc09ce284c62", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTk4ODA4MA==", "url": "https://github.com/Netflix/conductor/pull/1626#discussion_r409988080", "bodyText": "Added license header.", "author": "mdepak", "createdAt": "2020-04-17T04:36:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM4OTQ0Mw=="}], "type": "inlineReview", "revised_code": {"commit": "a52165db15a2b65bf76f2a2f65de232abd52fa5d", "chunk": "diff --git a/es6-persistence/src/main/java/com/netflix/conductor/dao/es6/index/BulkRequestWrapper.java b/es6-persistence/src/main/java/com/netflix/conductor/dao/es6/index/BulkRequestWrapper.java\nindex 14ea2049..2d465e3c 100644\n--- a/es6-persistence/src/main/java/com/netflix/conductor/dao/es6/index/BulkRequestWrapper.java\n+++ b/es6-persistence/src/main/java/com/netflix/conductor/dao/es6/index/BulkRequestWrapper.java\n\n@@ -1,3 +1,18 @@\n+/*\n+ * Copyright 2020 Netflix, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n package com.netflix.conductor.dao.es6.index;\n \n import org.elasticsearch.action.bulk.BulkRequest;\n"}}, {"oid": "a52165db15a2b65bf76f2a2f65de232abd52fa5d", "url": "https://github.com/Netflix/conductor/commit/a52165db15a2b65bf76f2a2f65de232abd52fa5d", "message": "Add license header", "committedDate": "2020-04-17T04:35:47Z", "type": "commit"}]}