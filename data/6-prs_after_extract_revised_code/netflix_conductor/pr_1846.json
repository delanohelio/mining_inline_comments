{"pr_number": 1846, "pr_title": "ability to retry workflows timed out due to workflow level timeout", "pr_createdAt": "2020-08-27T01:15:55Z", "pr_url": "https://github.com/Netflix/conductor/pull/1846", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQ3NDUyMg==", "url": "https://github.com/Netflix/conductor/pull/1846#discussion_r480474522", "bodyText": "Wondering if adding these fields would cause any side effects, as the copy is being used in decider evaluations at different stages. Do we have enough test coverage around usage of copy() ?", "author": "kishorebanala", "createdAt": "2020-08-31T23:38:43Z", "path": "common/src/main/java/com/netflix/conductor/common/run/Workflow.java", "diffHunk": "@@ -492,6 +502,12 @@ public Workflow copy() {\n \t\tcopy.setTasks(tasks.stream()\n \t\t\t\t.map(Task::deepCopy)\n \t\t\t\t.collect(Collectors.toList()));\n+\t\tcopy.setEndTime(endTime);", "originalCommit": "cbb6e5e110a4b8fd131452fa8a0a74e70d7c4baf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMyMzA2Ng==", "url": "https://github.com/Netflix/conductor/pull/1846#discussion_r481323066", "bodyText": "Verified that the integration/unit tests do cover these.", "author": "apanicker-nflx", "createdAt": "2020-09-01T17:46:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQ3NDUyMg=="}], "type": "inlineReview", "revised_code": {"commit": "45f8e853e0ce33198332b134d5496ad5bc9704b4", "chunk": "diff --git a/common/src/main/java/com/netflix/conductor/common/run/Workflow.java b/common/src/main/java/com/netflix/conductor/common/run/Workflow.java\nindex bdfab9de..69f08aa2 100644\n--- a/common/src/main/java/com/netflix/conductor/common/run/Workflow.java\n+++ b/common/src/main/java/com/netflix/conductor/common/run/Workflow.java\n\n@@ -502,6 +517,7 @@ public class Workflow extends Auditable{\n \t\tcopy.setTasks(tasks.stream()\n \t\t\t\t.map(Task::deepCopy)\n \t\t\t\t.collect(Collectors.toList()));\n+\t\tcopy.setVariables(variables);\n \t\tcopy.setEndTime(endTime);\n \t\tcopy.setLastRetriedTime(lastRetriedTime);\n \t\tcopy.setTaskToDomain(taskToDomain);\n"}}, {"oid": "45f8e853e0ce33198332b134d5496ad5bc9704b4", "url": "https://github.com/Netflix/conductor/commit/45f8e853e0ce33198332b134d5496ad5bc9704b4", "message": "ability to retry workflows timed out due to workflow level timeout", "committedDate": "2020-09-01T00:40:59Z", "type": "commit"}, {"oid": "45f8e853e0ce33198332b134d5496ad5bc9704b4", "url": "https://github.com/Netflix/conductor/commit/45f8e853e0ce33198332b134d5496ad5bc9704b4", "message": "ability to retry workflows timed out due to workflow level timeout", "committedDate": "2020-09-01T00:40:59Z", "type": "forcePushed"}]}