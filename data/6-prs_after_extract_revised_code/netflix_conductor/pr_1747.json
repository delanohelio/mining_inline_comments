{"pr_number": 1747, "pr_title": "fix input param replacement when workflow is retried", "pr_createdAt": "2020-06-22T20:02:39Z", "pr_url": "https://github.com/Netflix/conductor/pull/1747", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzgxODc3MQ==", "url": "https://github.com/Netflix/conductor/pull/1747#discussion_r443818771", "bodyText": "Nit: Spelling", "author": "kishorebanala", "createdAt": "2020-06-22T20:51:16Z", "path": "core/src/main/java/com/netflix/conductor/core/execution/WorkflowExecutor.java", "diffHunk": "@@ -601,8 +604,14 @@ private Task taskToBeRescheduled(Task task) {\n         taskToBeRetried.setCallbackAfterSeconds(0);\n         taskToBeRetried.setSubWorkflowId(null);\n         taskToBeRetried.setReasonForIncompletion(null);\n+\n+        // perform parameter replacement for retried task\n+        Map<String, Object> taskInput = parametersUtils.getTaskInput(taskToBeRetried.getWorkflowTask().getInputParameters(),\n+            workflow, taskToBeRetried.getWorkflowTask().getTaskDefinition(), taskToBeRetried.getTaskId());\n+        taskToBeRetried.getInputData().putAll(taskInput);\n+\n         task.setRetried(true);\n-        task.setExecuted(true); // since this task is being retried and a retry has been computed, task lifecycle is complete\n+        task.setExecuted(true); // since this task is being retried and a retry has been computed, task lifecycle is complet", "originalCommit": "3bb9fd2fd3ad25cdb5ec90f9ef5d7b0372c8662b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0e0e8437a003a06b3bf5bbf90f718d9f9c831110", "chunk": "diff --git a/core/src/main/java/com/netflix/conductor/core/execution/WorkflowExecutor.java b/core/src/main/java/com/netflix/conductor/core/execution/WorkflowExecutor.java\nindex 2a211e19..ed99f5dd 100644\n--- a/core/src/main/java/com/netflix/conductor/core/execution/WorkflowExecutor.java\n+++ b/core/src/main/java/com/netflix/conductor/core/execution/WorkflowExecutor.java\n\n@@ -611,7 +611,8 @@ public class WorkflowExecutor {\n         taskToBeRetried.getInputData().putAll(taskInput);\n \n         task.setRetried(true);\n-        task.setExecuted(true); // since this task is being retried and a retry has been computed, task lifecycle is complet\n+        // since this task is being retried and a retry has been computed, task lifecycle is complete\n+        task.setExecuted(true);\n         return taskToBeRetried;\n     }\n \n"}}, {"oid": "502f3914b642cce987cb0a8a8d9d2f13719971a5", "url": "https://github.com/Netflix/conductor/commit/502f3914b642cce987cb0a8a8d9d2f13719971a5", "message": "fix input param replacement when workflow is retried", "committedDate": "2020-06-23T00:27:04Z", "type": "forcePushed"}, {"oid": "0e0e8437a003a06b3bf5bbf90f718d9f9c831110", "url": "https://github.com/Netflix/conductor/commit/0e0e8437a003a06b3bf5bbf90f718d9f9c831110", "message": "fix input param replacement when workflow is retried", "committedDate": "2020-06-23T00:30:29Z", "type": "commit"}, {"oid": "0e0e8437a003a06b3bf5bbf90f718d9f9c831110", "url": "https://github.com/Netflix/conductor/commit/0e0e8437a003a06b3bf5bbf90f718d9f9c831110", "message": "fix input param replacement when workflow is retried", "committedDate": "2020-06-23T00:30:29Z", "type": "forcePushed"}]}