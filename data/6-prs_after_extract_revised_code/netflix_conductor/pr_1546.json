{"pr_number": 1546, "pr_title": "index all task updates, not just when workflows are in terminal state", "pr_createdAt": "2020-02-24T22:15:25Z", "pr_url": "https://github.com/Netflix/conductor/pull/1546", "timeline": [{"oid": "9531c08c392396d37c5ad54bf2bde01be2a9d3d7", "url": "https://github.com/Netflix/conductor/commit/9531c08c392396d37c5ad54bf2bde01be2a9d3d7", "message": "index all task updates, not just when workflows are in terminal state", "committedDate": "2020-02-24T21:58:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDIxODI1Mw==", "url": "https://github.com/Netflix/conductor/pull/1546#discussion_r384218253", "bodyText": "Can remove this comment section here since the comments below in updateTask covers this.", "author": "apanicker-nflx", "createdAt": "2020-02-26T00:56:13Z", "path": "core/src/main/java/com/netflix/conductor/core/orchestration/ExecutionDAOFacade.java", "diffHunk": "@@ -230,7 +230,11 @@ public String updateWorkflow(Workflow workflow) {\n                 workflow.getTasks().forEach(indexDAO::asyncIndexTask);\n             } else {\n                 indexDAO.indexWorkflow(workflow);\n-                workflow.getTasks().forEach(indexDAO::indexTask);\n+                /*", "originalCommit": "9531c08c392396d37c5ad54bf2bde01be2a9d3d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU1MDIwNQ==", "url": "https://github.com/Netflix/conductor/pull/1546#discussion_r384550205", "bodyText": "@apanicker-nflx, I removed the comments in my repo.", "author": "rickfish", "createdAt": "2020-02-26T15:04:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDIxODI1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "560036940469d62204c59e15a1283fe570d1b569", "chunk": "diff --git a/core/src/main/java/com/netflix/conductor/core/orchestration/ExecutionDAOFacade.java b/core/src/main/java/com/netflix/conductor/core/orchestration/ExecutionDAOFacade.java\nindex df6e7875..72ec294e 100644\n--- a/core/src/main/java/com/netflix/conductor/core/orchestration/ExecutionDAOFacade.java\n+++ b/core/src/main/java/com/netflix/conductor/core/orchestration/ExecutionDAOFacade.java\n\n@@ -230,11 +229,6 @@ public class ExecutionDAOFacade {\n                 workflow.getTasks().forEach(indexDAO::asyncIndexTask);\n             } else {\n                 indexDAO.indexWorkflow(workflow);\n-                /*\n-                 * Note that tasks will not get indexed here as each call to updateTask will index the task if\n-                 * async indexing is not enabled.\n-                 */\n-                //workflow.getTasks().forEach(indexDAO::indexTask);\n             }\n         }\n         return workflow.getWorkflowId();\n"}}, {"oid": "27ada4ae437c752d834c4960bc1417ec6e2d858d", "url": "https://github.com/Netflix/conductor/commit/27ada4ae437c752d834c4960bc1417ec6e2d858d", "message": "Merge branch 'dev' of https://github.com/Netflix/conductor into index-all-task-updates", "committedDate": "2020-02-26T14:52:20Z", "type": "commit"}, {"oid": "560036940469d62204c59e15a1283fe570d1b569", "url": "https://github.com/Netflix/conductor/commit/560036940469d62204c59e15a1283fe570d1b569", "message": "remove unnecessary comments", "committedDate": "2020-02-26T14:58:50Z", "type": "commit"}]}