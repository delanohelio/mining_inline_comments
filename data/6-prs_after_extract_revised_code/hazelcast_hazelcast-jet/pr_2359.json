{"pr_number": 2359, "pr_title": "Change default local parallelism from 2 to 4 for avro/file/json sources", "pr_createdAt": "2020-06-24T14:27:22Z", "pr_url": "https://github.com/hazelcast/hazelcast-jet/pull/2359", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk5NzUyNA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2359#discussion_r444997524", "bodyText": "do we need this option? I think just to change the default would have been enough. Do we have this in any other source?", "author": "cangencer", "createdAt": "2020-06-24T15:52:20Z", "path": "extensions/avro/src/main/java/com/hazelcast/jet/avro/AvroSourceBuilder.java", "diffHunk": "@@ -82,6 +82,18 @@\n         return this;\n     }\n \n+    /**\n+     * Sets the preferred local parallelism of the source. Default values is\n+     * {@code 4}.\n+     *\n+     * @since 4.2\n+     */\n+    @Nonnull\n+    public AvroSourceBuilder<D> preferredLocalParallelism(int preferredLocalParallelism) {", "originalCommit": "bfac475e403c53f0489fb0f1943c02a614e73c12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA3MjA1Ng==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2359#discussion_r445072056", "bodyText": "I don't think we have, I'll remove then. So wdyt about 4 as default ?\nShould we set it only for Avro source ? or both (avro and file) ?", "author": "gurbuzali", "createdAt": "2020-06-24T17:56:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk5NzUyNA=="}], "type": "inlineReview", "revised_code": {"commit": "d6588b6039e2b734a4eb9e772d19994c41d2d522", "chunk": "diff --git a/extensions/avro/src/main/java/com/hazelcast/jet/avro/AvroSourceBuilder.java b/extensions/avro/src/main/java/com/hazelcast/jet/avro/AvroSourceBuilder.java\nindex 85f677025..1c272a0ef 100644\n--- a/extensions/avro/src/main/java/com/hazelcast/jet/avro/AvroSourceBuilder.java\n+++ b/extensions/avro/src/main/java/com/hazelcast/jet/avro/AvroSourceBuilder.java\n\n@@ -82,18 +82,6 @@ public final class AvroSourceBuilder<D> {\n         return this;\n     }\n \n-    /**\n-     * Sets the preferred local parallelism of the source. Default values is\n-     * {@code 4}.\n-     *\n-     * @since 4.2\n-     */\n-    @Nonnull\n-    public AvroSourceBuilder<D> preferredLocalParallelism(int preferredLocalParallelism) {\n-        this.preferredLocalParallelism = checkLocalParallelism(preferredLocalParallelism);\n-        return this;\n-    }\n-\n     /**\n      * Builds a custom Avro file {@link BatchSource} with supplied components\n      * and the output function {@code mapOutputFn}.\n"}}, {"oid": "d6588b6039e2b734a4eb9e772d19994c41d2d522", "url": "https://github.com/hazelcast/hazelcast-jet/commit/d6588b6039e2b734a4eb9e772d19994c41d2d522", "message": "change default local parallelism for file/avro source from 2 to 4", "committedDate": "2020-06-25T06:34:32Z", "type": "commit"}, {"oid": "d6588b6039e2b734a4eb9e772d19994c41d2d522", "url": "https://github.com/hazelcast/hazelcast-jet/commit/d6588b6039e2b734a4eb9e772d19994c41d2d522", "message": "change default local parallelism for file/avro source from 2 to 4", "committedDate": "2020-06-25T06:34:32Z", "type": "forcePushed"}, {"oid": "d776aa3f95a2fb4fadd0ef1ffd02c9a24831f047", "url": "https://github.com/hazelcast/hazelcast-jet/commit/d776aa3f95a2fb4fadd0ef1ffd02c9a24831f047", "message": "update javadoc", "committedDate": "2020-06-25T08:55:47Z", "type": "commit"}]}