{"pr_number": 527, "pr_title": "Retrofit the public interfaces and javadoc", "pr_createdAt": "2020-02-23T12:51:00Z", "pr_url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527", "timeline": [{"oid": "60e780acd0c468946e3e9a415422a9b6289d31f4", "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/60e780acd0c468946e3e9a415422a9b6289d31f4", "message": "retrofit the public interfaces and javadoc\n\nSigned-off-by: Billy Yuan <billy112487983@gmail.com>", "committedDate": "2020-02-23T12:43:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIzNzcwNw==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383237707", "bodyText": "you can use {@code sql} so it references the sql parameter in the doc", "author": "vietj", "createdAt": "2020-02-24T12:30:21Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java", "diffHunk": "@@ -27,41 +28,179 @@\n import java.util.stream.Collector;\n \n /**\n- * A pool of SQL connections.\n+ * A connection pool which reuses a number of SQL connections.\n  *\n  * @author <a href=\"mailto:julien@julienviet.com\">Julien Viet</a>\n  */\n @VertxGen\n public interface Pool extends SqlClient {\n \n+  /**\n+   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given SQL string,", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java\nindex 40091671..ae65fe11 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java\n\n@@ -36,8 +36,8 @@ import java.util.stream.Collector;\n public interface Pool extends SqlClient {\n \n   /**\n-   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given SQL string,\n-   * the connection will be returned to the pool when the execution completes and the asynchronous result is represented as {@link RowSet}.\n+   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given {@code sql} string,\n+   * the connection will be returned to the pool when the execution completes and the asynchronous result is represented as a {@link RowSet}.\n    *\n    * @param sql the query SQL\n    * @param handler the handler notified with the execution result\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIzNzc3Ng==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383237776", "bodyText": "as a Rowset", "author": "vietj", "createdAt": "2020-02-24T12:30:31Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java", "diffHunk": "@@ -27,41 +28,179 @@\n import java.util.stream.Collector;\n \n /**\n- * A pool of SQL connections.\n+ * A connection pool which reuses a number of SQL connections.\n  *\n  * @author <a href=\"mailto:julien@julienviet.com\">Julien Viet</a>\n  */\n @VertxGen\n public interface Pool extends SqlClient {\n \n+  /**\n+   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given SQL string,\n+   * the connection will be returned to the pool when the execution completes and the asynchronous result is represented as {@link RowSet}.", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java\nindex 40091671..ae65fe11 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java\n\n@@ -36,8 +36,8 @@ import java.util.stream.Collector;\n public interface Pool extends SqlClient {\n \n   /**\n-   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given SQL string,\n-   * the connection will be returned to the pool when the execution completes and the asynchronous result is represented as {@link RowSet}.\n+   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given {@code sql} string,\n+   * the connection will be returned to the pool when the execution completes and the asynchronous result is represented as a {@link RowSet}.\n    *\n    * @param sql the query SQL\n    * @param handler the handler notified with the execution result\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIzNzg0Mw==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383237843", "bodyText": "you can use {@code sql} so it references the sql parameter in the doc", "author": "vietj", "createdAt": "2020-02-24T12:30:41Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java", "diffHunk": "@@ -27,41 +28,179 @@\n import java.util.stream.Collector;\n \n /**\n- * A pool of SQL connections.\n+ * A connection pool which reuses a number of SQL connections.\n  *\n  * @author <a href=\"mailto:julien@julienviet.com\">Julien Viet</a>\n  */\n @VertxGen\n public interface Pool extends SqlClient {\n \n+  /**\n+   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given SQL string,\n+   * the connection will be returned to the pool when the execution completes and the asynchronous result is represented as {@link RowSet}.\n+   *\n+   * @param sql the query SQL\n+   * @param handler the handler notified with the execution result\n+   * @return a reference to this, so the API can be used fluently\n+   */\n+  @Fluent\n   @Override\n-  Pool preparedQuery(String sql, Handler<AsyncResult<RowSet<Row>>> handler);\n+  Pool query(String sql, Handler<AsyncResult<RowSet<Row>>> handler);\n \n+  /**\n+   * Like {@link #query(String, Handler)} but returns a {@code Future} of the asynchronous result\n+   */\n   @Override\n+  Future<RowSet<Row>> query(String sql);\n+\n+  /**\n+   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given SQL string,", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java\nindex 40091671..ae65fe11 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/Pool.java\n\n@@ -36,8 +36,8 @@ import java.util.stream.Collector;\n public interface Pool extends SqlClient {\n \n   /**\n-   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given SQL string,\n-   * the connection will be returned to the pool when the execution completes and the asynchronous result is represented as {@link RowSet}.\n+   * Borrows a connection from the connection pool, the connection will be used to execute a simple query using the given {@code sql} string,\n+   * the connection will be returned to the pool when the execution completes and the asynchronous result is represented as a {@link RowSet}.\n    *\n    * @param sql the query SQL\n    * @param handler the handler notified with the execution result\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIzODMzNA==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383238334", "bodyText": "Simply : \"A prepared statement, ...\"", "author": "vietj", "createdAt": "2020-02-24T12:31:46Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/PreparedQuery.java", "diffHunk": "@@ -29,7 +29,9 @@\n import java.util.stream.Collector;\n \n /**\n- * A prepared query.\n+ * An interface which represents a prepared statement, the statement is pre-compiled and", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/PreparedQuery.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/PreparedQuery.java\nindex 63e8b736..170b2e8d 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/PreparedQuery.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/PreparedQuery.java\n\n@@ -29,7 +29,7 @@ import java.util.List;\n import java.util.stream.Collector;\n \n /**\n- * An interface which represents a prepared statement, the statement is pre-compiled and\n+ * A prepared statement, the statement is pre-compiled and\n  * it's more efficient to execute the statement for multiple times.\n  * In addition, this kind of statement provides protection against SQL injection attacks.\n  *\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIzODQ3Ng==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383238476", "bodyText": "More simply: \"The kind of a property ...\"", "author": "vietj", "createdAt": "2020-02-24T12:32:10Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/PropertyKind.java", "diffHunk": "@@ -4,7 +4,8 @@\n import io.vertx.codegen.annotations.VertxGen;\n \n /**\n- * Represents which kind the property is.\n+ * An interface that represents which kind the property belongs to,", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/PropertyKind.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/PropertyKind.java\nindex 8dd01423..7050bb1b 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/PropertyKind.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/PropertyKind.java\n\n@@ -4,8 +4,7 @@ import io.vertx.codegen.annotations.GenIgnore;\n import io.vertx.codegen.annotations.VertxGen;\n \n /**\n- * An interface that represents which kind the property belongs to,\n- * this can be used to fetch some specific property of the {@link SqlResult execution result}.\n+ * The kind of the property, this can be used to fetch some specific property of the {@link SqlResult execution result}.\n  */\n @VertxGen\n public interface PropertyKind<T> {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIzOTY5Mg==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383239692", "bodyText": "This is incorrect, this is a generic type. Instead it should be\nThe execution result of the row set of a query provided as {@code }, commonly used as a {@code RowSet}. Using a collector query might might provide a different {@code } result", "author": "vietj", "createdAt": "2020-02-24T12:34:55Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/RowSet.java", "diffHunk": "@@ -20,7 +20,7 @@\n import io.vertx.codegen.annotations.VertxGen;\n \n /**\n- * A set of rows.\n+ * The execution resultSet which in the form of {@link Row rows}.", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMxNTU1Ng==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383315556", "bodyText": "Currently there's only RowSet<Row> in the public APIs and it does not provide any public ways to construct a RowSet<R>, is there any use case to represent the result as a row set of generic objects? And the collector query gives the result as SqlResult<R> instead of RowSet<R>.", "author": "BillyYccc", "createdAt": "2020-02-24T15:01:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIzOTY5Mg=="}], "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/RowSet.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/RowSet.java\nindex b2b1ea16..5c012ef2 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/RowSet.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/RowSet.java\n\n@@ -20,7 +20,8 @@ package io.vertx.sqlclient;\n import io.vertx.codegen.annotations.VertxGen;\n \n /**\n- * The execution resultSet which in the form of {@link Row rows}.\n+ * The execution result of the row set of a query provided as {@code <R>}, commonly used as a {@code RowSet<Row>}.\n+ * Using a collector query might provide a different result.\n  */\n @VertxGen\n public interface RowSet<R> extends Iterable<R>, SqlResult<RowSet<R>> {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI0MDA4NA==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383240084", "bodyText": "Defines common SQL client operations", "author": "vietj", "createdAt": "2020-02-24T12:35:50Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java", "diffHunk": "@@ -28,15 +28,15 @@\n import java.util.stream.Collector;\n \n /**\n- * Defines the client operations with a database server.\n+ * A common interface which defines the SQL client operations with a database server.", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java\nindex bdb09321..c44a0788 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java\n\n@@ -28,7 +28,7 @@ import java.util.List;\n import java.util.stream.Collector;\n \n /**\n- * A common interface which defines the SQL client operations with a database server.\n+ * Defines common SQL client operations with a database server.\n  *\n  * @author <a href=\"mailto:julien@julienviet.com\">Julien Viet</a>\n  */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI0MDQ0Ng==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383240446", "bodyText": "{@code sql} instead of SQL", "author": "vietj", "createdAt": "2020-02-24T12:36:37Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java", "diffHunk": "@@ -28,15 +28,15 @@\n import java.util.stream.Collector;\n \n /**\n- * Defines the client operations with a database server.\n+ * A common interface which defines the SQL client operations with a database server.\n  *\n  * @author <a href=\"mailto:julien@julienviet.com\">Julien Viet</a>\n  */\n @VertxGen\n public interface SqlClient {\n \n   /**\n-   * Execute a simple query.\n+   * Execute a simple query using the given SQL string, the asynchronous result is represented as {@link RowSet}.", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java\nindex bdb09321..c44a0788 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java\n\n@@ -28,7 +28,7 @@ import java.util.List;\n import java.util.stream.Collector;\n \n /**\n- * A common interface which defines the SQL client operations with a database server.\n+ * Defines common SQL client operations with a database server.\n  *\n  * @author <a href=\"mailto:julien@julienviet.com\">Julien Viet</a>\n  */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI0MDgyNA==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383240824", "bodyText": "Statement will not always be prepared (because it might be reused), so instead:\nExecute the given {@code sql} string with a prepared statement ...", "author": "vietj", "createdAt": "2020-02-24T12:37:33Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java", "diffHunk": "@@ -68,7 +68,7 @@\n   <R> Future<SqlResult<R>> query(String sql, Collector<Row, ?, R> collector);\n \n   /**\n-   * Prepare and execute a query.\n+   * Prepare a statement using the given SQL string and execute the prepared statement without any parameter, the asynchronous result is represented as {@link RowSet}.", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java\nindex bdb09321..c44a0788 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlClient.java\n\n@@ -68,7 +68,7 @@ public interface SqlClient {\n   <R> Future<SqlResult<R>> query(String sql, Collector<Row, ?, R> collector);\n \n   /**\n-   * Prepare a statement using the given SQL string and execute the prepared statement without any parameter, the asynchronous result is represented as {@link RowSet}.\n+   * Execute the given {@code sql} string using a prepared statement without any parameter, the asynchronous result is represented as a {@link RowSet}.\n    *\n    * @param sql the prepared query SQL\n    * @param handler the handler notified with the execution result\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI0MTAxMA==", "url": "https://github.com/eclipse-vertx/vertx-sql-client/pull/527#discussion_r383241010", "bodyText": "Keep the simple form \"A connection to the database server\"", "author": "vietj", "createdAt": "2020-02-24T12:38:04Z", "path": "vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlConnection.java", "diffHunk": "@@ -28,7 +28,7 @@\n import java.util.stream.Collector;\n \n /**\n- * A connection to database server.\n+ * An interface which represents a connection to the database server.", "originalCommit": "60e780acd0c468946e3e9a415422a9b6289d31f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f484664481407658961a47c9524370032a7addf5", "chunk": "diff --git a/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlConnection.java b/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlConnection.java\nindex 19c82451..6d974f49 100644\n--- a/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlConnection.java\n+++ b/vertx-sql-client/src/main/java/io/vertx/sqlclient/SqlConnection.java\n\n@@ -28,7 +28,7 @@ import java.util.List;\n import java.util.stream.Collector;\n \n /**\n- * An interface which represents a connection to the database server.\n+ * A connection to the database server.\n  *\n  * @author <a href=\"mailto:julien@julienviet.com\">Julien Viet</a>\n  * @author <a href=\"mailto:emad.albloushi@gmail.com\">Emad Alblueshi</a>\n"}}, {"oid": "f484664481407658961a47c9524370032a7addf5", "url": "https://github.com/eclipse-vertx/vertx-sql-client/commit/f484664481407658961a47c9524370032a7addf5", "message": "update javadoc according to reviews\n\nSigned-off-by: Billy Yuan <billy112487983@gmail.com>", "committedDate": "2020-03-07T05:12:27Z", "type": "commit"}]}