{"pr_number": 10368, "pr_title": "Fix testSCCacheManagement failure on ibm 11 zos", "pr_createdAt": "2020-08-11T16:40:51Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10368", "timeline": [{"oid": "e7a187f6cc2b2fd0bd011b8fe3c11688c6fc96c9", "url": "https://github.com/eclipse-openj9/openj9/commit/e7a187f6cc2b2fd0bd011b8fe3c11688c6fc96c9", "message": "Fix testSCCacheManagement failure on ibm 11 zos\n- added condition to handle zos cache location\nIssue:#10275\n[ci skip]\n\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-08-11T16:42:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc3MjczNQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10368#discussion_r468772735", "bodyText": "This check affects all platforms, but the original issue complains only about z/OS.", "author": "hangshao0", "createdAt": "2020-08-11T18:14:53Z", "path": "test/functional/CacheManagement/src/tests/sharedclasses/options/TestSharedCacheJavaAPI.java", "diffHunk": "@@ -164,14 +164,18 @@ public static void main(String args[]) {\n \t       \t\t}\n \t\t       \tfor(String cacheName: nonpersistentList) {\n \t       \t\t\tif (cacheName.indexOf(\"groupaccess\") != -1) {\n-\t       \t\t\t\trunSimpleJavaProgramWithNonPersistentCache(cacheName, \"groupAccess\");\n+\t\t\t\t\t\tif (isOpenJ9()) {", "originalCommit": "e7a187f6cc2b2fd0bd011b8fe3c11688c6fc96c9", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6982c38e9823fe314f180c75b89f7a715c6c2a3e", "chunk": "diff --git a/test/functional/CacheManagement/src/tests/sharedclasses/options/TestSharedCacheJavaAPI.java b/test/functional/CacheManagement/src/tests/sharedclasses/options/TestSharedCacheJavaAPI.java\nindex dd5a76332..ed768cd57 100644\n--- a/test/functional/CacheManagement/src/tests/sharedclasses/options/TestSharedCacheJavaAPI.java\n+++ b/test/functional/CacheManagement/src/tests/sharedclasses/options/TestSharedCacheJavaAPI.java\n\n@@ -164,18 +164,14 @@ public class TestSharedCacheJavaAPI extends TestUtils {\n \t       \t\t}\n \t\t       \tfor(String cacheName: nonpersistentList) {\n \t       \t\t\tif (cacheName.indexOf(\"groupaccess\") != -1) {\n-\t\t\t\t\t\tif (isOpenJ9()) {\n-\t\t\t\t\t\t\trunSimpleJavaProgramWithNonPersistentCache(cacheName, \"groupAccess\");\n-\t\t\t\t\t\t\tcheckFileExistsForNonPersistentCache(cacheName);\n-\t\t\t\t\t\t\tnonpersistentCount++;\n-\t\t\t\t\t\t}\n+\t       \t\t\t\trunSimpleJavaProgramWithNonPersistentCache(cacheName, \"groupAccess\");\n \t       \t\t\t} else {\n-\t\t\t\t\t\trunSimpleJavaProgramWithNonPersistentCache(cacheName, null);\n-\t\t\t\t\t\tcheckFileExistsForNonPersistentCache(cacheName);\n-\t\t\t\t\t\tnonpersistentCount++;\n+\t       \t\t\t\trunSimpleJavaProgramWithNonPersistentCache(cacheName, null);\n \t       \t\t\t}\n+\t       \t\t\tcheckFileExistsForNonPersistentCache(cacheName);\n \t\t    \t}\n-\t\t\t\t\n+\t\t\t    nonpersistentCount = nonpersistentList.size();\n+\t\t\t    \n \t\t\t    if ((false == isWindows()) \n \t\t\t    \t&& (nonpersistentCount > 0)\n \t\t\t    ) {\n"}}, {"oid": "6982c38e9823fe314f180c75b89f7a715c6c2a3e", "url": "https://github.com/eclipse-openj9/openj9/commit/6982c38e9823fe314f180c75b89f7a715c6c2a3e", "message": "Fix testSCCacheManagement failure on ibm 11 zos\n- fix cache location change because ibm 11+ use -DOPENJ9_BUILD setting\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-12-04T21:47:22Z", "type": "commit"}, {"oid": "6982c38e9823fe314f180c75b89f7a715c6c2a3e", "url": "https://github.com/eclipse-openj9/openj9/commit/6982c38e9823fe314f180c75b89f7a715c6c2a3e", "message": "Fix testSCCacheManagement failure on ibm 11 zos\n- fix cache location change because ibm 11+ use -DOPENJ9_BUILD setting\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-12-04T21:47:22Z", "type": "forcePushed"}]}