{"pr_number": 8299, "pr_title": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS", "pr_createdAt": "2020-01-14T18:04:35Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/8299", "timeline": [{"oid": "135e7f239b3f58814d95176b6ec85a1381d845b5", "url": "https://github.com/eclipse-openj9/openj9/commit/135e7f239b3f58814d95176b6ec85a1381d845b5", "message": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-01-14T18:05:46Z", "type": "forcePushed"}, {"oid": "7050515c6bea1c37f1ca16016ca8406c911a1dae", "url": "https://github.com/eclipse-openj9/openj9/commit/7050515c6bea1c37f1ca16016ca8406c911a1dae", "message": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS\n\nAlso add some missing com.ibm.jzos.ZFile stubs.\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-01-14T20:06:56Z", "type": "forcePushed"}, {"oid": "a82a6c121d5f8356fea83d36ca55fd172ffd9b24", "url": "https://github.com/eclipse-openj9/openj9/commit/a82a6c121d5f8356fea83d36ca55fd172ffd9b24", "message": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS\n\nCreate the com.ibm.jzos module, and add some missing com.ibm.jzos.ZFile\nstubs.\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-01-14T20:46:42Z", "type": "forcePushed"}, {"oid": "cc3d2726ab6c4bf44b7d4cbc476a0158a0023a09", "url": "https://github.com/eclipse-openj9/openj9/commit/cc3d2726ab6c4bf44b7d4cbc476a0158a0023a09", "message": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS\n\nCreate the com.ibm.jzos module, and add some missing com.ibm.jzos.ZFile\nstubs.\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-01-14T20:48:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njk5NTQ0Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/8299#discussion_r366995442", "bodyText": "Please add an explicit return; statement to avoid 'empty block' warnings.", "author": "keithc-ca", "createdAt": "2020-01-15T17:03:48Z", "path": "jcl/src/com.ibm.jzos/share/classes/com/ibm/jzos/ZFile.java", "diffHunk": "@@ -50,10 +51,21 @@ public int getLrecl() throws IOException {\n \t\treturn new byte[] { 0 };\n \t}\n \n+\tpublic long getRecordCount() throws IOException {\n+\t\treturn 0;\n+\t}\n+\t\n \tpublic int read(byte[] buffer) throws IOException {\n \t\treturn 0;\n \t}\n \n+\tpublic int read(byte[] buf, int offset, int len) throws IOException {\n+\t\treturn 0;\n+\t}\n+\n+\tpublic void seek(long offset, int origin) throws IOException {\n+\t}", "originalCommit": "cc3d2726ab6c4bf44b7d4cbc476a0158a0023a09", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "dcfae84ec10fcfd127199118d8a2b40d81c22e3c", "chunk": "diff --git a/jcl/src/com.ibm.jzos/share/classes/com/ibm/jzos/ZFile.java b/jcl/src/com.ibm.jzos/share/classes/com/ibm/jzos/ZFile.java\nindex 94262284e..8cf8abd4d 100644\n--- a/jcl/src/com.ibm.jzos/share/classes/com/ibm/jzos/ZFile.java\n+++ b/jcl/src/com.ibm.jzos/share/classes/com/ibm/jzos/ZFile.java\n\n@@ -64,6 +64,7 @@ public class ZFile {\n \t}\n \n \tpublic void seek(long offset, int origin) throws IOException {\n+\t\treturn;\n \t}\n \n \tpublic void setPos(byte[] position) throws IOException {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njk5NjA0NQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/8299#discussion_r366996045", "bodyText": "I think this should say 'datasets' instead of 'files'.", "author": "keithc-ca", "createdAt": "2020-01-15T17:05:01Z", "path": "jcl/src/com.ibm.jzos/share/classes/module-info.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*[INCLUDE-IF PLATFORM-mz31|PLATFORM-mz64]*/\n+/*******************************************************************************\n+ * Copyright (c) 2020, 2020 IBM Corp. and others\n+ *\n+ * This program and the accompanying materials are made available under\n+ * the terms of the Eclipse Public License 2.0 which accompanies this\n+ * distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+ * or the Apache License, Version 2.0 which accompanies this distribution and\n+ * is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * This Source Code may also be made available under the following\n+ * Secondary Licenses when the conditions for such availability set\n+ * forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+ * General Public License, version 2 with the GNU Classpath\n+ * Exception [1] and GNU General Public License, version 2 with the\n+ * OpenJDK Assembly Exception [2].\n+ *\n+ * [1] https://www.gnu.org/software/classpath/license.html\n+ * [2] http://openjdk.java.net/legal/assembly-exception.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+ *******************************************************************************/\n+\n+/*[REM] This file must not use tabs because the dependency recognition code in openjdk does not support them. */\n+\n+/**\n+ * Provides access to z/OS files.", "originalCommit": "cc3d2726ab6c4bf44b7d4cbc476a0158a0023a09", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "dcfae84ec10fcfd127199118d8a2b40d81c22e3c", "chunk": "diff --git a/jcl/src/com.ibm.jzos/share/classes/module-info.java b/jcl/src/com.ibm.jzos/share/classes/module-info.java\nindex 46c459b68..aaf4f7f15 100644\n--- a/jcl/src/com.ibm.jzos/share/classes/module-info.java\n+++ b/jcl/src/com.ibm.jzos/share/classes/module-info.java\n\n@@ -24,7 +24,7 @@\n /*[REM] This file must not use tabs because the dependency recognition code in openjdk does not support them. */\n \n /**\n- * Provides access to z/OS files.\n+ * Provides access to z/OS datasets.\n  */\n module com.ibm.jzos {\n   requires java.base;\n"}}, {"oid": "2fa441fa973a639a5b36316e32038fc95d7eac00", "url": "https://github.com/eclipse-openj9/openj9/commit/2fa441fa973a639a5b36316e32038fc95d7eac00", "message": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS\n\nCreate the com.ibm.jzos module, and add some missing com.ibm.jzos.ZFile\nstubs.\n\nSkip the CI builds since there is an openjdk dependency and they won't\nsucceed.\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-01-15T17:05:54Z", "type": "forcePushed"}, {"oid": "dcfae84ec10fcfd127199118d8a2b40d81c22e3c", "url": "https://github.com/eclipse-openj9/openj9/commit/dcfae84ec10fcfd127199118d8a2b40d81c22e3c", "message": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS\n\nCreate the com.ibm.jzos module, and add some missing com.ibm.jzos.ZFile\nstubs.\n\nSkip the CI builds since there is an openjdk dependency and they won't\nsucceed.\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-01-15T17:07:53Z", "type": "forcePushed"}, {"oid": "4c30f7ba1e8c0bd4361430384682cbe37e8c6bbd", "url": "https://github.com/eclipse-openj9/openj9/commit/4c30f7ba1e8c0bd4361430384682cbe37e8c6bbd", "message": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS\n\nCreate the com.ibm.jzos module, and add some missing com.ibm.jzos.ZFile\nstubs.\n\nSkip the CI builds since there is an openjdk dependency and they won't\nsucceed.\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-01-15T18:22:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA5ODA4Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/8299#discussion_r367098082", "bodyText": "The condition must be Sidecar19-SE&(PLATFORM-mz31|PLATFORM-mz64).", "author": "keithc-ca", "createdAt": "2020-01-15T20:45:42Z", "path": "jcl/src/com.ibm.jzos/share/classes/module-info.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*[INCLUDE-IF PLATFORM-mz31|PLATFORM-mz64]*/", "originalCommit": "4c30f7ba1e8c0bd4361430384682cbe37e8c6bbd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ed0dddbc941d3c0aebc0f61ee547d832d42034a3", "chunk": "diff --git a/jcl/src/com.ibm.jzos/share/classes/module-info.java b/jcl/src/com.ibm.jzos/share/classes/module-info.java\nindex aaf4f7f15..408cf4137 100644\n--- a/jcl/src/com.ibm.jzos/share/classes/module-info.java\n+++ b/jcl/src/com.ibm.jzos/share/classes/module-info.java\n\n@@ -1,4 +1,4 @@\n-/*[INCLUDE-IF PLATFORM-mz31|PLATFORM-mz64]*/\n+/*[INCLUDE-IF Sidecar19-SE&(PLATFORM-mz31|PLATFORM-mz64)]*/\n /*******************************************************************************\n  * Copyright (c) 2020, 2020 IBM Corp. and others\n  *\n"}}, {"oid": "ed0dddbc941d3c0aebc0f61ee547d832d42034a3", "url": "https://github.com/eclipse-openj9/openj9/commit/ed0dddbc941d3c0aebc0f61ee547d832d42034a3", "message": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS\n\nCreate the com.ibm.jzos module, and add some missing com.ibm.jzos.ZFile\nstubs.\n\nSkip the CI builds since there is an openjdk dependency and they won't\nsucceed.\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-01-15T21:08:50Z", "type": "commit"}, {"oid": "ed0dddbc941d3c0aebc0f61ee547d832d42034a3", "url": "https://github.com/eclipse-openj9/openj9/commit/ed0dddbc941d3c0aebc0f61ee547d832d42034a3", "message": "Use com.ibm.jvm.io.ConsolePrintStream.localize for z/OS\n\nCreate the com.ibm.jzos module, and add some missing com.ibm.jzos.ZFile\nstubs.\n\nSkip the CI builds since there is an openjdk dependency and they won't\nsucceed.\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-01-15T21:08:50Z", "type": "forcePushed"}]}