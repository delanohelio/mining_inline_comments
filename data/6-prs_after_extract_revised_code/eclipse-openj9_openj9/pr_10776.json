{"pr_number": 10776, "pr_title": "Modify !coreinfo command to output the \"java.vm.name\" property of a core file", "pr_createdAt": "2020-10-02T20:55:48Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10776", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY5MjI4Mw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r499692283", "bodyText": "I suggest this should be presented (on one line) like JAVA VM VERSION:\nout.println(\"JAVA VM NAME\\t- \" + properties.get(\"java.vm.name\"));", "author": "keithc-ca", "createdAt": "2020-10-05T15:38:35Z", "path": "debugtools/DDR_VM/src/com/ibm/j9ddr/vm29/tools/ddrinteractive/commands/CoreInfoCommand.java", "diffHunk": "@@ -105,7 +105,9 @@ public void run(String command, String[] args, Context context, PrintStream out)\n \t\t\t/* Print Java Version Info */\n \t\t\tout.println(\"JAVA VERSION INFO\\n\" + properties.get(\"java.fullversion\"));\n \t\t\t/* Print Java VM Version Info */\n-\t\t\tout.println(\"JAVA VM VERSION\\t- \" + properties.get(\"java.vm.version\") + \"\\n\");\n+\t\t\tout.println(\"JAVA VM VERSION\\t- \" + properties.get(\"java.vm.version\"));\n+\t\t\t/* Print Java VM Name */\n+\t\t\tout.println(\"JAVA VM NAME\\n\" + properties.get(\"java.vm.name\"));", "originalCommit": "85a1d35f5afc43df6e7246b2f515c429d30d3450", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc2NDMyMA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r499764320", "bodyText": "Please note the space after -.\nAlso, I didn't mean to suggest you add the redundant newline (\"\\n\").", "author": "keithc-ca", "createdAt": "2020-10-05T17:38:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY5MjI4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc3NzQ3OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r499777478", "bodyText": "Modified to have it presented on one line", "author": "dusanboskovic", "createdAt": "2020-10-05T18:03:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY5MjI4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc5OTIzNg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r499799236", "bodyText": "I was copying the format of the JAVA VM VERSION as I switched from a newline to a tab for JAVA VM NAME. Will revert back", "author": "dusanboskovic", "createdAt": "2020-10-05T18:44:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY5MjI4Mw=="}], "type": "inlineReview", "revised_code": {"commit": "fd4fb18b76f59e90cf6c4e384e7b7bfaa4bf103a", "chunk": "diff --git a/debugtools/DDR_VM/src/com/ibm/j9ddr/vm29/tools/ddrinteractive/commands/CoreInfoCommand.java b/debugtools/DDR_VM/src/com/ibm/j9ddr/vm29/tools/ddrinteractive/commands/CoreInfoCommand.java\nindex 8ce895d1c..10020c5af 100644\n--- a/debugtools/DDR_VM/src/com/ibm/j9ddr/vm29/tools/ddrinteractive/commands/CoreInfoCommand.java\n+++ b/debugtools/DDR_VM/src/com/ibm/j9ddr/vm29/tools/ddrinteractive/commands/CoreInfoCommand.java\n\n@@ -107,7 +107,7 @@ public class CoreInfoCommand extends Command\n \t\t\t/* Print Java VM Version Info */\n \t\t\tout.println(\"JAVA VM VERSION\\t- \" + properties.get(\"java.vm.version\"));\n \t\t\t/* Print Java VM Name */\n-\t\t\tout.println(\"JAVA VM NAME\\n\" + properties.get(\"java.vm.name\"));\n+\t\t\tout.println(\"JAVA VM NAME\\t-\" + properties.get(\"java.vm.name\") + \"\\n\");\n \t\t\t\n \t\t\t/* Print Platform Info */\n \t\t\tboolean is64BitPlatform = (process.bytesPerPointer() == 8) ? true : false;\n"}}, {"oid": "fd4fb18b76f59e90cf6c4e384e7b7bfaa4bf103a", "url": "https://github.com/eclipse-openj9/openj9/commit/fd4fb18b76f59e90cf6c4e384e7b7bfaa4bf103a", "message": "Modify coreinfo command to output the java.vm.name property of a core file\n\nSigned-off-by: Dusan-Boskovic <dusan.boskovic@ibm.com>", "committedDate": "2020-10-05T17:22:53Z", "type": "forcePushed"}, {"oid": "4b52e7a7cf2bfd03f89c494889aa0e511a5f88b0", "url": "https://github.com/eclipse-openj9/openj9/commit/4b52e7a7cf2bfd03f89c494889aa0e511a5f88b0", "message": "Modify coreinfo command to output the java.vm.name property of a core file\n\nSigned-off-by: Dusan-Boskovic <dusan.boskovic@ibm.com>", "committedDate": "2020-10-05T18:45:47Z", "type": "commit"}, {"oid": "4b52e7a7cf2bfd03f89c494889aa0e511a5f88b0", "url": "https://github.com/eclipse-openj9/openj9/commit/4b52e7a7cf2bfd03f89c494889aa0e511a5f88b0", "message": "Modify coreinfo command to output the java.vm.name property of a core file\n\nSigned-off-by: Dusan-Boskovic <dusan.boskovic@ibm.com>", "committedDate": "2020-10-05T18:45:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r500677758", "bodyText": "There used to be a blank line between the JAVA SERVICE LEVEL INFO section and the PLATFORM INFO section, but with the removal of the  + \"\\n\" that blank line is gone.", "author": "pshipton", "createdAt": "2020-10-07T00:59:54Z", "path": "debugtools/DDR_VM/src/com/ibm/j9ddr/vm29/tools/ddrinteractive/commands/CoreInfoCommand.java", "diffHunk": "@@ -105,7 +105,9 @@ public void run(String command, String[] args, Context context, PrintStream out)\n \t\t\t/* Print Java Version Info */\n \t\t\tout.println(\"JAVA VERSION INFO\\n\" + properties.get(\"java.fullversion\"));\n \t\t\t/* Print Java VM Version Info */\n-\t\t\tout.println(\"JAVA VM VERSION\\t- \" + properties.get(\"java.vm.version\") + \"\\n\");\n+\t\t\tout.println(\"JAVA VM VERSION\\t- \" + properties.get(\"java.vm.version\"));\n+\t\t\t/* Print Java VM Name */\n+\t\t\tout.println(\"JAVA VM NAME\\t- \" + properties.get(\"java.vm.name\"));", "originalCommit": "4b52e7a7cf2bfd03f89c494889aa0e511a5f88b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY4NjU5OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r500686598", "bodyText": "I also note the pre-existing code using \\n isn't correct. It should be using System.getProperty(\"line.separator\") or out.println();.", "author": "pshipton", "createdAt": "2020-10-07T01:35:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDk4NDkyNg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r500984926", "bodyText": "I'll open a pull request to clean that up later today.", "author": "keithc-ca", "createdAt": "2020-10-07T12:50:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAwMjk3MA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r501002970", "bodyText": "@dusanboskovic was working on something, pls check with him.", "author": "pshipton", "createdAt": "2020-10-07T13:16:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAxNTIzNA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r501015234", "bodyText": "@keithc-ca Peter and I were speaking about this last night. I can open a new PR today that will clean up the \"\\n\" and reintroduce a new blank line after the \"JAVA VM NAME\" section", "author": "dusanboskovic", "createdAt": "2020-10-07T13:33:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAxODY4MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r501018681", "bodyText": "I don't think the blank line after 'JAVA VM NAME' is significant; I think it's just a stylistic preference (that I'm fine with either way).", "author": "keithc-ca", "createdAt": "2020-10-07T13:37:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAzMTI5MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r501031291", "bodyText": "There were/are sections in the output which are separated with blank lines. The blank line between two sections was removed, while there is still a blank line between other sections. I think removing the blank line makes the output a little harder to read.\nThis is what it looks like now, without a blank line before PLATFORM INFO.\nCOMMANDLINE\nbin/java -Xdump:system:events=vmstop\n\nJAVA SERVICE LEVEL INFO\nJRE 1.8.0 Linux amd64-64 (build 8.0.7.0 - pxa6480sr7-20200922_01(SR7))\nJAVA VERSION INFO\nJRE 1.8.0 Linux amd64-64-Bit Compressed References 20201006_456922 (JIT enabled, AOT enabled)\nOpenJ9   - a12d134\nOMR      - 738adf7\nIBM      - 712c984\nJAVA VM VERSION\t- 2.9\nJAVA VM NAME\t- IBM J9 VM\nPLATFORM INFO\nPlatform Name :\tLINUX 64Bit\nOS Level\t: Linux 3.10.0-693.1.1.el7.x86_64\nProcessors -\n  Architecture\t: amd64\n  How Many\t: 2", "author": "pshipton", "createdAt": "2020-10-07T13:53:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAzNzQwNw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r501037407", "bodyText": "I think a blank line would be (more) welcome before 'JAVA VM VERSION' to make the end of 'JAVA VERSION INFO' more visible.", "author": "keithc-ca", "createdAt": "2020-10-07T14:01:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE0NjQ5NQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r501146495", "bodyText": "I am looking at it now, an I think it would be best if it was reordered. Adding a blank line before 'JAVA VM VERSION' makes it seem chopped. How does something like this look\nJAVA VM NAME\t- IBM J9 VM\nJAVA VM VERSION\t- 2.9\nJAVA SERVICE LEVEL INFO\nJRE 1.8.0 Linux amd64-64 (build 8.0.7.0 - pxa6480sr7-20200922_01(SR7))\nJAVA VERSION INFO\nJRE 1.8.0 Linux amd64-64-Bit Compressed References 20201006_456922 (JIT enabled, AOT enabled)\nOpenJ9   - a12d134\nOMR      - 738adf7\nIBM      - 712c984\n\nPLATFORM INFO\nPlatform Name :\tLINUX 64Bit\nOS Level\t: Linux 3.10.0-693.1.1.el7.x86_64\nProcessors -\n  Architecture\t: amd64\n  How Many\t: 2", "author": "dusanboskovic", "createdAt": "2020-10-07T16:24:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE2ODM5Nw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r501168397", "bodyText": "It's fine with me.", "author": "pshipton", "createdAt": "2020-10-07T16:58:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4MjI3Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10776#discussion_r501282272", "bodyText": "New PR: #10827", "author": "dusanboskovic", "createdAt": "2020-10-07T20:14:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3Nzc1OA=="}], "type": "inlineReview", "revised_code": null}]}