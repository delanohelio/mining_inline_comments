{"pr_number": 10891, "pr_title": "Added CDSAdaptorTest with updated osgi verison", "pr_createdAt": "2020-10-14T19:30:03Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10891", "timeline": [{"oid": "10d0b169f3fde3f9d27fd510ab9c82a56c46986e", "url": "https://github.com/eclipse-openj9/openj9/commit/10d0b169f3fde3f9d27fd510ab9c82a56c46986e", "message": "Added CDSAdaptorTest\n- Port CDSAdaptorTest from vmfarm\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-10-14T19:40:32Z", "type": "forcePushed"}, {"oid": "2a4ff972f3678bd46b7d4e0e24ff1228c7453c24", "url": "https://github.com/eclipse-openj9/openj9/commit/2a4ff972f3678bd46b7d4e0e24ff1228c7453c24", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-10T03:56:24Z", "type": "forcePushed"}, {"oid": "cead955c97f20c8574ee1668d55bc9cd0787885b", "url": "https://github.com/eclipse-openj9/openj9/commit/cead955c97f20c8574ee1668d55bc9cd0787885b", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-10T04:20:16Z", "type": "forcePushed"}, {"oid": "2d3a5fd938a347685fff69672aafebea8f539375", "url": "https://github.com/eclipse-openj9/openj9/commit/2d3a5fd938a347685fff69672aafebea8f539375", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-10T06:35:21Z", "type": "forcePushed"}, {"oid": "ff0362deeb1be70b6002624ffb15ae4dbf7b63b6", "url": "https://github.com/eclipse-openj9/openj9/commit/ff0362deeb1be70b6002624ffb15ae4dbf7b63b6", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-10T07:27:29Z", "type": "forcePushed"}, {"oid": "830638a2b93203ffc11726a1a9b0490b4435ebdf", "url": "https://github.com/eclipse-openj9/openj9/commit/830638a2b93203ffc11726a1a9b0490b4435ebdf", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version, download from tkg repo\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-10T08:05:04Z", "type": "forcePushed"}, {"oid": "1bb99e8afe7d251a6bbacfced39647e484d60649", "url": "https://github.com/eclipse-openj9/openj9/commit/1bb99e8afe7d251a6bbacfced39647e484d60649", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version, download from tkg repo\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-10T08:13:10Z", "type": "forcePushed"}, {"oid": "abe36606e669870e0ade7e18187e8c6b5c4226e8", "url": "https://github.com/eclipse-openj9/openj9/commit/abe36606e669870e0ade7e18187e8c6b5c4226e8", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-10T15:08:12Z", "type": "forcePushed"}, {"oid": "46a575ac2a5e99544a61aca03b3de7d56c69e699", "url": "https://github.com/eclipse-openj9/openj9/commit/46a575ac2a5e99544a61aca03b3de7d56c69e699", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-10T15:14:11Z", "type": "forcePushed"}, {"oid": "b0f49ad5ad23716935353c134441e1eaa4aa1739", "url": "https://github.com/eclipse-openj9/openj9/commit/b0f49ad5ad23716935353c134441e1eaa4aa1739", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-11T00:01:15Z", "type": "forcePushed"}, {"oid": "4ed5883cf88bf049bc2a3a1972ca3839b9096757", "url": "https://github.com/eclipse-openj9/openj9/commit/4ed5883cf88bf049bc2a3a1972ca3839b9096757", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-11T00:13:31Z", "type": "forcePushed"}, {"oid": "b9c661dd7c74e018cc622c43d54efed19ee19fc0", "url": "https://github.com/eclipse-openj9/openj9/commit/b9c661dd7c74e018cc622c43d54efed19ee19fc0", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-11T02:00:44Z", "type": "forcePushed"}, {"oid": "4f73eaaa3887c5e28fc9c00f2d19e3be692a60a2", "url": "https://github.com/eclipse-openj9/openj9/commit/4f73eaaa3887c5e28fc9c00f2d19e3be692a60a2", "message": "Ported CDSAdaptorTest original scripts\n- Port CDSAdaptorTest original scripts from vmfarm\n- this commit cannot run due to osgi update\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-11T16:53:03Z", "type": "commit"}, {"oid": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3", "url": "https://github.com/eclipse-openj9/openj9/commit/bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-11T17:02:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyMTIyNQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521521225", "bodyText": "This author annotation can be removed.", "author": "hangshao0", "createdAt": "2020-11-11T17:30:08Z", "path": "test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/SomeMessageV1.java", "diffHunk": "@@ -1,17 +1,39 @@\n-package com.ibm.testbundle;\r\n-\r\n-/**\r\n- * A dummy program to print some message\r\n- *  \r\n- * @author administrator\r\n- *\r\n- */\r\n-public class SomeMessageV1 {\r\n-\r\n-\t/* If weaving hook bundle (com.ibm.weavinghooktest) is installed and running, \r\n-\t * it will replace the class bytes of this class with that of SomeMessageV2.\r\n-\t */\r\n-\tpublic void printMessage() {\r\n-\t\tSystem.out.println(\"A message from original class\");\r\n-\t}\r\n-}\r\n+/*******************************************************************************\n+ * Copyright (c) 2001, 2020 IBM Corp. and others\n+ *\n+ * This program and the accompanying materials are made available under\n+ * the terms of the Eclipse Public License 2.0 which accompanies this\n+ * distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+ * or the Apache License, Version 2.0 which accompanies this distribution and\n+ * is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * This Source Code may also be made available under the following\n+ * Secondary Licenses when the conditions for such availability set\n+ * forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+ * General Public License, version 2 with the GNU Classpath\n+ * Exception [1] and GNU General Public License, version 2 with the\n+ * OpenJDK Assembly Exception [2].\n+ *\n+ * [1] https://www.gnu.org/software/classpath/license.html\n+ * [2] http://openjdk.java.net/legal/assembly-exception.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+ *******************************************************************************/\n+\n+package com.ibm.testbundle;\n+\n+/**\n+ * A dummy program to print some message\n+ *  \n+ * @author administrator", "originalCommit": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc3NjY3MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521776671", "bodyText": "Author annotation have been removed. Thanks.", "author": "LongyuZhang", "createdAt": "2020-11-12T02:24:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyMTIyNQ=="}], "type": "inlineReview", "revised_code": {"commit": "ec9b3b92d59709fe4f066aac979858ebb36204a3", "chunk": "diff --git a/test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/SomeMessageV1.java b/test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/SomeMessageV1.java\nindex 75979ec96..51e833307 100644\n--- a/test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/SomeMessageV1.java\n+++ b/test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/SomeMessageV1.java\n\n@@ -24,9 +24,6 @@ package com.ibm.testbundle;\n \n /**\n  * A dummy program to print some message\n- *  \n- * @author administrator\n- *\n  */\n public class SomeMessageV1 {\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyMTQ5MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521521491", "bodyText": "This author annotation can be removed.", "author": "hangshao0", "createdAt": "2020-11-11T17:30:40Z", "path": "test/functional/cmdLineTests/CDSAdaptorTest/resources/WeavinghookTest/src/com/ibm/weavinghooktest/Util.java", "diffHunk": "@@ -1,100 +1,122 @@\n-package com.ibm.weavinghooktest;\r\n-\r\n-import java.io.ByteArrayOutputStream;\r\n-import java.io.IOException;\r\n-import java.io.InputStream;\r\n-import java.io.UnsupportedEncodingException;\r\n-import java.net.URL;\r\n-\r\n-import org.osgi.framework.Bundle;\r\n-\r\n-/**\r\n- * A utility class used by Weaving Hook to redefine class bytes of a given class\r\n- * \r\n- * @author administrator\r\n- */\r\n-public class Util {\r\n-\t\r\n-\t/*\r\n-\t * Returns class bytes of a specified class present in the specified bundle.\r\n-\t */\r\n-\tpublic static byte[] getClassBytes(Bundle bundle, String className) {\r\n-\t\tbyte classBytes[];\r\n-\t\t\r\n-\t\ttry {\r\n-\t\t\tString qualifiedClassName = className.replace('.', '/') + \".class\";\r\n-\t\t\tURL url = bundle.getEntry(qualifiedClassName);\r\n-\t\t\tif (url != null) {\r\n-\t\t\t\tInputStream in = url.openStream();\r\n-\t\t\t\tByteArrayOutputStream out = new ByteArrayOutputStream();\r\n-\t\t\t\tint b;\r\n-\t\t\t\twhile ((b = in.read()) != -1) {\r\n-\t\t\t\t\tout.write(b);\r\n-\t\t\t\t}\r\n-\t\t\t\tin.close();\r\n-\t\t\t\tclassBytes = out.toByteArray();\r\n-\t\t\t} else {\r\n-\t\t\t\tclassBytes = null;\r\n-\t\t\t}\r\n-\t\t} catch (IOException e) {\t\t\t\r\n-\t\t\te.printStackTrace();\r\n-\t\t\treturn null;\r\n-\t\t}\r\n-\t\t\r\n-\t\treturn classBytes;\r\n-\t}\r\n-\t\r\n-\t// returns the index >= offset of the first occurrence of sequence in buffer\r\n-\tpublic static int indexOf(byte[] buffer, int offset, byte[] sequence)\r\n-\t{\r\n-\t\twhile (buffer.length - offset >= sequence.length) {\r\n-\t\t\tfor (int i = 0; i < sequence.length; i++) {\r\n-\t\t\t\tif (buffer[offset + i] != sequence[i]) {\r\n-\t\t\t\t\tbreak;\r\n-\t\t\t\t}\r\n-\t\t\t\tif (i == sequence.length - 1) {\r\n-\t\t\t\t\treturn offset;\r\n-\t\t\t\t}\r\n-\t\t\t}\r\n-\t\t\toffset++;\r\n-\t\t}\r\n-\t\treturn -1;\r\n-\t}\r\n-\r\n-\t// replaces all occurrences of seq1 in original buffer with seq2\r\n-\tpublic static byte[] replaceAll(byte[] buffer, byte[] seq1, byte[] seq2) {\r\n-\t\tByteArrayOutputStream out = new ByteArrayOutputStream();\r\n-\t\tint index, offset = 0;\r\n-\t\twhile ((index = indexOf(buffer, offset, seq1)) != -1) {\r\n-\t\t\tif (index - offset != 0) {\r\n-\t\t\t\tout.write(buffer, offset, index - offset);\r\n-\t\t\t}\r\n-\t\t\tout.write(seq2, 0, seq2.length);\r\n-\t\t\toffset = index + seq1.length;\r\n-\t\t}\r\n-\t\tif (offset < buffer.length) {\r\n-\t\t\tout.write(buffer, offset, buffer.length - offset);\r\n-\t\t}\r\n-\t\treturn out.toByteArray();\r\n-\t}\r\n-\t\r\n-\tpublic static byte[] replaceClassNames(byte[] classBytes, String originalClassName, String redefinedClassName) {\r\n-\t\t// replace all occurrences of the redefined class name with the original class name\r\n-\t\ttry {\r\n-\t\t\tbyte[] r = redefinedClassName.getBytes(\"UTF-8\");\r\n-\t\t\tbyte[] o = originalClassName.getBytes(\"UTF-8\");\r\n-\t\t\t// since this is a naive search and replace that doesn't\r\n-\t\t\t// take into account the structure of the class file, and\r\n-\t\t\t// hence would not update length fields, the two names must\r\n-\t\t\t// be of the same length\r\n-\t\t\tif (r.length != o.length) {\r\n-\t\t\t\treturn null;\r\n-\t\t\t}\r\n-\t\t\tclassBytes = Util.replaceAll(classBytes, r, o);\r\n-\t\t} catch (UnsupportedEncodingException e) {\r\n-\t\t\te.printStackTrace();\r\n-\t\t\treturn null;\r\n-\t\t}\r\n-\t\treturn classBytes;\r\n-\t}\r\n-}\r\n+/*******************************************************************************\n+ * Copyright (c) 2001, 2020 IBM Corp. and others\n+ *\n+ * This program and the accompanying materials are made available under\n+ * the terms of the Eclipse Public License 2.0 which accompanies this\n+ * distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+ * or the Apache License, Version 2.0 which accompanies this distribution and\n+ * is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * This Source Code may also be made available under the following\n+ * Secondary Licenses when the conditions for such availability set\n+ * forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+ * General Public License, version 2 with the GNU Classpath\n+ * Exception [1] and GNU General Public License, version 2 with the\n+ * OpenJDK Assembly Exception [2].\n+ *\n+ * [1] https://www.gnu.org/software/classpath/license.html\n+ * [2] http://openjdk.java.net/legal/assembly-exception.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+ *******************************************************************************/\n+\n+package com.ibm.weavinghooktest;\n+\n+import java.io.ByteArrayOutputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.UnsupportedEncodingException;\n+import java.net.URL;\n+\n+import org.osgi.framework.Bundle;\n+\n+/**\n+ * A utility class used by Weaving Hook to redefine class bytes of a given class\n+ * \n+ * @author administrator", "originalCommit": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc3NjczOQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521776739", "bodyText": "Author annotation have been removed. Thanks.", "author": "LongyuZhang", "createdAt": "2020-11-12T02:24:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyMTQ5MQ=="}], "type": "inlineReview", "revised_code": {"commit": "ec9b3b92d59709fe4f066aac979858ebb36204a3", "chunk": "diff --git a/test/functional/cmdLineTests/CDSAdaptorTest/resources/WeavinghookTest/src/com/ibm/weavinghooktest/Util.java b/test/functional/cmdLineTests/CDSAdaptorTest/resources/WeavinghookTest/src/com/ibm/weavinghooktest/Util.java\nindex 450219e0e..a0117d3e7 100644\n--- a/test/functional/cmdLineTests/CDSAdaptorTest/resources/WeavinghookTest/src/com/ibm/weavinghooktest/Util.java\n+++ b/test/functional/cmdLineTests/CDSAdaptorTest/resources/WeavinghookTest/src/com/ibm/weavinghooktest/Util.java\n\n@@ -32,8 +32,6 @@ import org.osgi.framework.Bundle;\n \n /**\n  * A utility class used by Weaving Hook to redefine class bytes of a given class\n- * \n- * @author administrator\n  */\n public class Util {\n \t\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyNjQ5OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521526498", "bodyText": "I see the package name is com.ibm.*, do we want to change that to something like org.openj9.* ? @llxia", "author": "hangshao0", "createdAt": "2020-11-11T17:37:56Z", "path": "test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/Activator.java", "diffHunk": "@@ -1,52 +1,74 @@\n-package com.ibm.testbundle;\r\n-\r\n-import org.osgi.framework.Bundle;\r\n-import org.osgi.framework.BundleActivator;\r\n-import org.osgi.framework.BundleContext;\r\n-\r\n-public class Activator implements BundleActivator {\r\n-\r\n-\tpublic static final String WEAVING_HOOK_BUNDLE_SYMBOLIC_NAME = \"com.ibm.weavinghooktest\";\r\n-\t\r\n-\tprivate static BundleContext context;\r\n-\t\r\n-\tstatic BundleContext getContext() {\r\n-\t\treturn context;\r\n-\t}\r\n-\r\n-\t/*\r\n-\t * (non-Javadoc)\r\n-\t * @see org.osgi.framework.BundleActivator#start(org.osgi.framework.BundleContext)\r\n-\t */\r\n-\tpublic void start(BundleContext bundleContext) throws Exception {\r\n-\t\tActivator.context = bundleContext;\r\n-\t\t\r\n-\t\tBundle[] bundleList = bundleContext.getBundles();\r\n-\t\tBundle weavingHookBundle = null;\r\n-\t\t/* If weaving hook bundle is installed and not yet started, \r\n-\t\t * start it now before accessing SomeMessageV1 class \r\n-\t\t */ \r\n-\t\tfor (int i = 0; i < bundleList.length; i++) {\r\n-\t\t\tString symbolicName = bundleList[i].getSymbolicName();\r\n-\t\t\tif (symbolicName.equals(WEAVING_HOOK_BUNDLE_SYMBOLIC_NAME)) {\r\n-\t\t\t\tweavingHookBundle = bundleList[i];\r\n-\t\t\t\tbreak;\r\n-\t\t\t}\r\n-\t\t}\r\n-\t\tif ((weavingHookBundle != null) && (weavingHookBundle.getState() == Bundle.RESOLVED)) {\r\n-\t\t\tweavingHookBundle.start();\r\n-\t\t}\r\n-\t\t\r\n-\t\tSomeMessageV1 obj = new SomeMessageV1();\r\n-\t\tobj.printMessage();\r\n-\t}\r\n-\r\n-\t/*\r\n-\t * (non-Javadoc)\r\n-\t * @see org.osgi.framework.BundleActivator#stop(org.osgi.framework.BundleContext)\r\n-\t */\r\n-\tpublic void stop(BundleContext bundleContext) throws Exception {\r\n-\t\tActivator.context = null;\r\n-\t}\r\n-\r\n-}\r\n+/*******************************************************************************\n+ * Copyright (c) 2001, 2020 IBM Corp. and others\n+ *\n+ * This program and the accompanying materials are made available under\n+ * the terms of the Eclipse Public License 2.0 which accompanies this\n+ * distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+ * or the Apache License, Version 2.0 which accompanies this distribution and\n+ * is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * This Source Code may also be made available under the following\n+ * Secondary Licenses when the conditions for such availability set\n+ * forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+ * General Public License, version 2 with the GNU Classpath\n+ * Exception [1] and GNU General Public License, version 2 with the\n+ * OpenJDK Assembly Exception [2].\n+ *\n+ * [1] https://www.gnu.org/software/classpath/license.html\n+ * [2] http://openjdk.java.net/legal/assembly-exception.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+ *******************************************************************************/\n+\n+package com.ibm.testbundle;", "originalCommit": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU1ODkwMQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521558901", "bodyText": "yes, it is better to use org.openj9.*", "author": "llxia", "createdAt": "2020-11-11T18:32:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyNjQ5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU3Nzg0OQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521577849", "bodyText": "Probably org.openj9.test.*", "author": "hangshao0", "createdAt": "2020-11-11T19:08:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyNjQ5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc3NzA1MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521777051", "bodyText": "Package name changed to org.openj9.test as suggested. Thanks.", "author": "LongyuZhang", "createdAt": "2020-11-12T02:25:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyNjQ5OA=="}], "type": "inlineReview", "revised_code": {"commit": "c2cc35884ba725e2986c271581b8d4931952ed1f", "chunk": "diff --git a/test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/Activator.java b/test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/org/openj9/test/testbundle/Activator.java\nsimilarity index 97%\nrename from test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/Activator.java\nrename to test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/org/openj9/test/testbundle/Activator.java\nindex cb304f155..83894bae1 100644\n--- a/test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/Activator.java\n+++ b/test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/org/openj9/test/testbundle/Activator.java\n\n@@ -20,7 +20,7 @@\n  * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n  *******************************************************************************/\n \n-package com.ibm.testbundle;\n+package org.openj9.test.testbundle;\n \n import org.osgi.framework.Bundle;\n import org.osgi.framework.BundleActivator;\n"}}, {"oid": "ec9b3b92d59709fe4f066aac979858ebb36204a3", "url": "https://github.com/eclipse-openj9/openj9/commit/ec9b3b92d59709fe4f066aac979858ebb36204a3", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-11T21:29:14Z", "type": "forcePushed"}, {"oid": "c2cc35884ba725e2986c271581b8d4931952ed1f", "url": "https://github.com/eclipse-openj9/openj9/commit/c2cc35884ba725e2986c271581b8d4931952ed1f", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-11T22:18:02Z", "type": "forcePushed"}, {"oid": "a3dd49a5f39207d44b1b6192ad1f71055587a133", "url": "https://github.com/eclipse-openj9/openj9/commit/a3dd49a5f39207d44b1b6192ad1f71055587a133", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-12T02:16:15Z", "type": "forcePushed"}, {"oid": "1cceabb0675fb96732e71879b441436108c2216e", "url": "https://github.com/eclipse-openj9/openj9/commit/1cceabb0675fb96732e71879b441436108c2216e", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-12T16:40:22Z", "type": "forcePushed"}, {"oid": "60f3b640a619c54d97e814b6f86c11a65553d0fe", "url": "https://github.com/eclipse-openj9/openj9/commit/60f3b640a619c54d97e814b6f86c11a65553d0fe", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-12T20:55:22Z", "type": "forcePushed"}, {"oid": "fc544bf6a03fa203ee645936835bd1aac961caf4", "url": "https://github.com/eclipse-openj9/openj9/commit/fc544bf6a03fa203ee645936835bd1aac961caf4", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-12T21:45:52Z", "type": "commit"}, {"oid": "fc544bf6a03fa203ee645936835bd1aac961caf4", "url": "https://github.com/eclipse-openj9/openj9/commit/fc544bf6a03fa203ee645936835bd1aac961caf4", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>", "committedDate": "2020-11-12T21:45:52Z", "type": "forcePushed"}]}