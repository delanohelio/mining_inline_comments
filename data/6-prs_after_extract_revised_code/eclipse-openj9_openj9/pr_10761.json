{"pr_number": 10761, "pr_title": "Add jextract option to disable buildID check", "pr_createdAt": "2020-10-01T17:44:35Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10761", "timeline": [{"oid": "741c5953c6816da7c5f0dc40071dd65b89c887df", "url": "https://github.com/eclipse-openj9/openj9/commit/741c5953c6816da7c5f0dc40071dd65b89c887df", "message": "Add jextract option to disable buildID check\n\nDisable check if '-r' option is present.\n\n* always query environment pointer before analyzing dump\n* clean up jextract support code\n* describe all options in '-help' output\n* generate J9VM_UNIQUE_BUILD_ID randomly for cmake builds\n\nSigned-off-by: Keith W. Campbell <keithc@ca.ibm.com>", "committedDate": "2020-10-01T19:39:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ4ODk0Mw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10761#discussion_r498488943", "bodyText": "-interactive is no longer useful, it was replaced by DDR. We kept it alive after DDR was available to support the trprint subcommand, but trying to run that, it doesn't seem to work very well any more and I don't think anybody uses it. Bottom line, it shouldn't be included in the help, and I expect we could delete all the associated code.", "author": "pshipton", "createdAt": "2020-10-01T20:13:49Z", "path": "jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java", "diffHunk": "@@ -367,20 +353,18 @@ private static void ensure(boolean condition, String errorMessage) {\n \t}\n \n \tprivate static void usageMessage(String message, int code) {\n-\t\treport(\"Usage: jextract dump_name [output_filename] [options]\"); //$NON-NLS-1$\n-\t\treport(\" output filename defaults to dump_name.zip\"); //$NON-NLS-1$\n-\t\treport(\" options:\"); //$NON-NLS-1$\n-\t\treport(\"   -f executable_name override executable name\"); //$NON-NLS-1$\n-\t\treport(\"   -help              print this usage message\"); //$NON-NLS-1$\n-\t\treport(\"   -v                 enable verbose output\"); //$NON-NLS-1$\n-\t\tif (_throwExceptions) {\n-\t\t\tthrow new JExtractFatalException(message, code);\n-\t\t} else {\n-\t\t\tif (message != null) {\n-\t\t\t\treport(message);\n-\t\t\t}\n-\t\t\tSystem.exit(code);\n-\t\t}\n+\t\treport(\"Usage: jextract [options] dump_name [output_filename]\"); //$NON-NLS-1$\n+\t\treport(\"  output filename defaults to dump_name.zip\"); //$NON-NLS-1$\n+\t\treport(\"  options:\"); //$NON-NLS-1$\n+\t\treport(\"    -e                  throw exceptions instead of calling System.exit()\"); //$NON-NLS-1$\n+\t\treport(\"    -f executable_name  override executable name\"); //$NON-NLS-1$\n+\t\treport(\"    -help               print this usage message\"); //$NON-NLS-1$\n+\t\treport(\"    -interactive        start an interactive session\"); //$NON-NLS-1$", "originalCommit": "741c5953c6816da7c5f0dc40071dd65b89c887df", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ5Mzc3Mw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10761#discussion_r498493773", "bodyText": "Ok, I won't mention -interactive. I created #10764 to track removing the option and the support infrastructure.", "author": "keithc-ca", "createdAt": "2020-10-01T20:24:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ4ODk0Mw=="}], "type": "inlineReview", "revised_code": {"commit": "26b7b6c3c3906047f54dc17eb5c696c8809e81bc", "chunk": "diff --git a/jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java b/jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java\nindex 6b4bb7e20..436d99461 100644\n--- a/jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java\n+++ b/jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java\n\n@@ -359,7 +359,6 @@ public class Main {\n \t\treport(\"    -e                  throw exceptions instead of calling System.exit()\"); //$NON-NLS-1$\n \t\treport(\"    -f executable_name  override executable name\"); //$NON-NLS-1$\n \t\treport(\"    -help               print this usage message\"); //$NON-NLS-1$\n-\t\treport(\"    -interactive        start an interactive session\"); //$NON-NLS-1$\n \t\treport(\"    -p prefix           prefix for all paths (absolute or relative)\"); //$NON-NLS-1$\n \t\treport(\"    -r                  relax version checking\"); //$NON-NLS-1$\n \t\treport(\"    -v                  enable verbose output\"); //$NON-NLS-1$\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ4OTQyOQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10761#discussion_r498489429", "bodyText": "I don't understand the purpose of this, perhaps a more detailed message is appropriate.", "author": "pshipton", "createdAt": "2020-10-01T20:14:48Z", "path": "jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java", "diffHunk": "@@ -367,20 +353,18 @@ private static void ensure(boolean condition, String errorMessage) {\n \t}\n \n \tprivate static void usageMessage(String message, int code) {\n-\t\treport(\"Usage: jextract dump_name [output_filename] [options]\"); //$NON-NLS-1$\n-\t\treport(\" output filename defaults to dump_name.zip\"); //$NON-NLS-1$\n-\t\treport(\" options:\"); //$NON-NLS-1$\n-\t\treport(\"   -f executable_name override executable name\"); //$NON-NLS-1$\n-\t\treport(\"   -help              print this usage message\"); //$NON-NLS-1$\n-\t\treport(\"   -v                 enable verbose output\"); //$NON-NLS-1$\n-\t\tif (_throwExceptions) {\n-\t\t\tthrow new JExtractFatalException(message, code);\n-\t\t} else {\n-\t\t\tif (message != null) {\n-\t\t\t\treport(message);\n-\t\t\t}\n-\t\t\tSystem.exit(code);\n-\t\t}\n+\t\treport(\"Usage: jextract [options] dump_name [output_filename]\"); //$NON-NLS-1$\n+\t\treport(\"  output filename defaults to dump_name.zip\"); //$NON-NLS-1$\n+\t\treport(\"  options:\"); //$NON-NLS-1$\n+\t\treport(\"    -e                  throw exceptions instead of calling System.exit()\"); //$NON-NLS-1$\n+\t\treport(\"    -f executable_name  override executable name\"); //$NON-NLS-1$\n+\t\treport(\"    -help               print this usage message\"); //$NON-NLS-1$\n+\t\treport(\"    -interactive        start an interactive session\"); //$NON-NLS-1$\n+\t\treport(\"    -p prefix           prefix for all paths (absolute or relative)\"); //$NON-NLS-1$\n+\t\treport(\"    -r                  relax version checking\"); //$NON-NLS-1$\n+\t\treport(\"    -v                  enable verbose output\"); //$NON-NLS-1$\n+\t\treport(\"    --                  mark end of options\"); //$NON-NLS-1$", "originalCommit": "741c5953c6816da7c5f0dc40071dd65b89c887df", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ5NTUzMA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10761#discussion_r498495530", "bodyText": "This is a commonly supported option with the meaning that subsequent arguments are not treated as options (even if they begin with -). A (perhaps unlikely) example:\njextract -r -- -v\n\nconsiders the file named -v to be the core file.", "author": "keithc-ca", "createdAt": "2020-10-01T20:27:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ4OTQyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ5NzM0Ng==", "url": "https://github.com/eclipse-openj9/openj9/pull/10761#discussion_r498497346", "bodyText": "I think it's a GNU convention; see the bash manual, for example.", "author": "keithc-ca", "createdAt": "2020-10-01T20:31:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ4OTQyOQ=="}], "type": "inlineReview", "revised_code": {"commit": "26b7b6c3c3906047f54dc17eb5c696c8809e81bc", "chunk": "diff --git a/jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java b/jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java\nindex 6b4bb7e20..436d99461 100644\n--- a/jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java\n+++ b/jcl/src/openj9.dtfj/share/classes/com/ibm/jvm/j9/dump/extract/Main.java\n\n@@ -359,7 +359,6 @@ public class Main {\n \t\treport(\"    -e                  throw exceptions instead of calling System.exit()\"); //$NON-NLS-1$\n \t\treport(\"    -f executable_name  override executable name\"); //$NON-NLS-1$\n \t\treport(\"    -help               print this usage message\"); //$NON-NLS-1$\n-\t\treport(\"    -interactive        start an interactive session\"); //$NON-NLS-1$\n \t\treport(\"    -p prefix           prefix for all paths (absolute or relative)\"); //$NON-NLS-1$\n \t\treport(\"    -r                  relax version checking\"); //$NON-NLS-1$\n \t\treport(\"    -v                  enable verbose output\"); //$NON-NLS-1$\n"}}, {"oid": "26b7b6c3c3906047f54dc17eb5c696c8809e81bc", "url": "https://github.com/eclipse-openj9/openj9/commit/26b7b6c3c3906047f54dc17eb5c696c8809e81bc", "message": "Add jextract option to disable buildID check\n\nDisable check if '-r' option is present.\n\n* always query environment pointer before analyzing dump\n* clean up jextract support code\n* describe all options in '-help' output\n* generate J9VM_UNIQUE_BUILD_ID randomly for cmake builds\n\nSigned-off-by: Keith W. Campbell <keithc@ca.ibm.com>", "committedDate": "2020-10-01T20:32:27Z", "type": "forcePushed"}, {"oid": "d3544d45a0f10ccb31e8a1d5405ed1c0e07b4ca8", "url": "https://github.com/eclipse-openj9/openj9/commit/d3544d45a0f10ccb31e8a1d5405ed1c0e07b4ca8", "message": "Add jextract option to disable buildID check\n\nDisable check if '-r' option is present.\n\n* always query environment pointer before analyzing dump\n* clean up jextract support code\n* describe all options in '-help' output\n* generate J9VM_UNIQUE_BUILD_ID randomly for cmake builds\n* UMA: generate the same unique buildID for compressed and default\n\nSigned-off-by: Keith W. Campbell <keithc@ca.ibm.com>", "committedDate": "2020-10-02T16:06:36Z", "type": "commit"}, {"oid": "d3544d45a0f10ccb31e8a1d5405ed1c0e07b4ca8", "url": "https://github.com/eclipse-openj9/openj9/commit/d3544d45a0f10ccb31e8a1d5405ed1c0e07b4ca8", "message": "Add jextract option to disable buildID check\n\nDisable check if '-r' option is present.\n\n* always query environment pointer before analyzing dump\n* clean up jextract support code\n* describe all options in '-help' output\n* generate J9VM_UNIQUE_BUILD_ID randomly for cmake builds\n* UMA: generate the same unique buildID for compressed and default\n\nSigned-off-by: Keith W. Campbell <keithc@ca.ibm.com>", "committedDate": "2020-10-02T16:06:36Z", "type": "forcePushed"}]}