{"pr_number": 3304, "pr_title": "GH-3092 Refactor FTP and SFTP outbound specs, handlers", "pr_createdAt": "2020-06-11T21:55:36Z", "pr_url": "https://github.com/spring-projects/spring-integration/pull/3304", "timeline": [{"oid": "ce76d4fecccfb1918c54add81100744774e03655", "url": "https://github.com/spring-projects/spring-integration/commit/ce76d4fecccfb1918c54add81100744774e03655", "message": "GH-3092 Refactor FTP and SFTP outbound specs, handlers", "committedDate": "2020-06-11T21:42:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3NzgyMw==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440277823", "bodyText": "Please, add @since 5.4 for all new public API", "author": "artembilan", "createdAt": "2020-06-15T15:54:30Z", "path": "spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/Ftp.java", "diffHunk": "@@ -121,13 +123,36 @@ public static FtpMessageHandlerSpec outboundAdapter(RemoteFileTemplate<FTPFile>\n \t * @param remoteFileTemplate the remote file template.\n \t * @param fileExistsMode the file exists mode.\n \t * @return the spec.\n+\t * @deprecated in favor of {@link #outboundAdapter(FtpRemoteFileTemplate, FileExistsMode)}\n \t */\n+\t@Deprecated\n \tpublic static FtpMessageHandlerSpec outboundAdapter(RemoteFileTemplate<FTPFile> remoteFileTemplate,\n \t\t\tFileExistsMode fileExistsMode) {\n \n \t\treturn new FtpMessageHandlerSpec(remoteFileTemplate, fileExistsMode);\n \t}\n \n+\t/**\n+\t * A {@link FtpMessageHandlerSpec} factory for an outbound channel adapter spec.\n+\t * @param ftpRemoteFileTemplate the remote file template.\n+\t * @return the spec.", "originalCommit": "ce76d4fecccfb1918c54add81100744774e03655", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2OTU2Ng==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440369566", "bodyText": "Added 5.4 version to new methods", "author": "deepak5127", "createdAt": "2020-06-15T18:35:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3NzgyMw=="}], "type": "inlineReview", "revised_code": {"commit": "5defda5f41b1f3d6b3c601d2697fa23be6ca0226", "chunk": "diff --git a/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/Ftp.java b/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/Ftp.java\nindex 30751e7460..6fb3c6539a 100644\n--- a/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/Ftp.java\n+++ b/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/Ftp.java\n\n@@ -136,6 +136,7 @@ public final class Ftp {\n \t * A {@link FtpMessageHandlerSpec} factory for an outbound channel adapter spec.\n \t * @param ftpRemoteFileTemplate the remote file template.\n \t * @return the spec.\n+\t * @since 5.4\n \t */\n \tpublic static FtpMessageHandlerSpec outboundAdapter(FtpRemoteFileTemplate ftpRemoteFileTemplate) {\n \t\treturn new FtpMessageHandlerSpec(ftpRemoteFileTemplate);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3ODc2Nw==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440278767", "bodyText": "Please, add some JavaDocs here with the @deprecated tag and explanation in favor of ...", "author": "artembilan", "createdAt": "2020-06-15T15:55:50Z", "path": "spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java", "diffHunk": "@@ -48,10 +48,15 @@ public FtpMessageHandler(FtpRemoteFileTemplate remoteFileTemplate) {\n \t\tsuper(remoteFileTemplate);\n \t}\n \n+\t@Deprecated", "originalCommit": "ce76d4fecccfb1918c54add81100744774e03655", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2OTk1NQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440369955", "bodyText": "Added", "author": "deepak5127", "createdAt": "2020-06-15T18:35:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3ODc2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MTkxOA==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440371918", "bodyText": "No reason to spam me with Added for all my comments.\nIf you agree with the change requested, you just push the commit.\nWe get notifications for them.\nYou comment only if you are not agree with us \ud83d\ude04", "author": "artembilan", "createdAt": "2020-06-15T18:39:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3ODc2Nw=="}], "type": "inlineReview", "revised_code": {"commit": "5defda5f41b1f3d6b3c601d2697fa23be6ca0226", "chunk": "diff --git a/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java b/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java\nindex 8b5139d1e5..754f66794c 100644\n--- a/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java\n+++ b/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java\n\n@@ -48,11 +49,24 @@ public class FtpMessageHandler extends FileTransferringMessageHandler<FTPFile> {\n \t\tsuper(remoteFileTemplate);\n \t}\n \n+\t/**\n+\t * Constructor which sets the RemoteFileTemplate and FileExistsMode.\n+\t * @param remoteFileTemplate the remote file template.\n+\t * @param fileExistsMode the file exists mode.\n+\t * @deprecated in favor of\n+\t * {@link #FtpMessageHandler(FtpRemoteFileTemplate, FileExistsMode)}\n+\t */\n \t@Deprecated\n \tpublic FtpMessageHandler(RemoteFileTemplate<FTPFile> remoteFileTemplate, FileExistsMode mode) {\n \t\tsuper(remoteFileTemplate, mode);\n \t}\n \n+\t/**\n+\t * Constructor which sets the FtpRemoteFileTemplate and FileExistsMode.\n+\t * @param FtpRemoteFileTemplate the remote file template.\n+\t * @param fileExistsMode the file exists mode.\n+\t * @since 5.4\n+\t */\n \tpublic FtpMessageHandler(FtpRemoteFileTemplate ftpRemoteFileTemplate, FileExistsMode mode) {\n \t\tsuper(ftpRemoteFileTemplate, mode);\n \t}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3OTIyNQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440279225", "bodyText": "Please, add some JavaDocs to all the new public API.", "author": "artembilan", "createdAt": "2020-06-15T15:56:26Z", "path": "spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java", "diffHunk": "@@ -48,10 +48,15 @@ public FtpMessageHandler(FtpRemoteFileTemplate remoteFileTemplate) {\n \t\tsuper(remoteFileTemplate);\n \t}\n \n+\t@Deprecated\n \tpublic FtpMessageHandler(RemoteFileTemplate<FTPFile> remoteFileTemplate, FileExistsMode mode) {\n \t\tsuper(remoteFileTemplate, mode);\n \t}\n \n+\tpublic FtpMessageHandler(FtpRemoteFileTemplate ftpRemoteFileTemplate, FileExistsMode mode) {", "originalCommit": "ce76d4fecccfb1918c54add81100744774e03655", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MDExMQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440370111", "bodyText": "Added", "author": "deepak5127", "createdAt": "2020-06-15T18:36:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3OTIyNQ=="}], "type": "inlineReview", "revised_code": {"commit": "5defda5f41b1f3d6b3c601d2697fa23be6ca0226", "chunk": "diff --git a/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java b/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java\nindex 8b5139d1e5..754f66794c 100644\n--- a/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java\n+++ b/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/outbound/FtpMessageHandler.java\n\n@@ -48,11 +49,24 @@ public class FtpMessageHandler extends FileTransferringMessageHandler<FTPFile> {\n \t\tsuper(remoteFileTemplate);\n \t}\n \n+\t/**\n+\t * Constructor which sets the RemoteFileTemplate and FileExistsMode.\n+\t * @param remoteFileTemplate the remote file template.\n+\t * @param fileExistsMode the file exists mode.\n+\t * @deprecated in favor of\n+\t * {@link #FtpMessageHandler(FtpRemoteFileTemplate, FileExistsMode)}\n+\t */\n \t@Deprecated\n \tpublic FtpMessageHandler(RemoteFileTemplate<FTPFile> remoteFileTemplate, FileExistsMode mode) {\n \t\tsuper(remoteFileTemplate, mode);\n \t}\n \n+\t/**\n+\t * Constructor which sets the FtpRemoteFileTemplate and FileExistsMode.\n+\t * @param FtpRemoteFileTemplate the remote file template.\n+\t * @param fileExistsMode the file exists mode.\n+\t * @since 5.4\n+\t */\n \tpublic FtpMessageHandler(FtpRemoteFileTemplate ftpRemoteFileTemplate, FileExistsMode mode) {\n \t\tsuper(ftpRemoteFileTemplate, mode);\n \t}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3OTgyNw==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440279827", "bodyText": "Please, format JavaDocs properly.\nAnd of course @since 5.4!", "author": "artembilan", "createdAt": "2020-06-15T15:57:16Z", "path": "spring-integration-sftp/src/main/java/org/springframework/integration/sftp/dsl/Sftp.java", "diffHunk": "@@ -122,13 +124,36 @@ public static SftpMessageHandlerSpec outboundAdapter(RemoteFileTemplate<ChannelS\n \t * @param remoteFileTemplate the remote file template.\n \t * @param fileExistsMode the file exists mode.\n \t * @return the spec.\n+\t * @deprecated in favor of {@link #outboundAdapter(SftpRemoteFileTemplate,FileExistsMode)}\n \t */\n+\t@Deprecated\n \tpublic static SftpMessageHandlerSpec outboundAdapter(RemoteFileTemplate<ChannelSftp.LsEntry> remoteFileTemplate,\n \t\t\tFileExistsMode fileExistsMode) {\n \n \t\treturn new SftpMessageHandlerSpec(remoteFileTemplate, fileExistsMode);\n \t}\n \n+\t/**\n+\t * An {@link SftpMessageHandlerSpec} factory for an outbound channel adapter spec.\n+\t * @param sftpRemoteFileTemplate the remote file template.\n+     * @return the spec.", "originalCommit": "ce76d4fecccfb1918c54add81100744774e03655", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MDE3NQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440370175", "bodyText": "Added", "author": "deepak5127", "createdAt": "2020-06-15T18:36:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3OTgyNw=="}], "type": "inlineReview", "revised_code": {"commit": "5c9d6a808fcee922edc80f3bf4a41e5e3e659393", "chunk": "diff --git a/spring-integration-sftp/src/main/java/org/springframework/integration/sftp/dsl/Sftp.java b/spring-integration-sftp/src/main/java/org/springframework/integration/sftp/dsl/Sftp.java\nindex 708d4652e2..2f31b6d3dd 100644\n--- a/spring-integration-sftp/src/main/java/org/springframework/integration/sftp/dsl/Sftp.java\n+++ b/spring-integration-sftp/src/main/java/org/springframework/integration/sftp/dsl/Sftp.java\n\n@@ -136,7 +136,8 @@ public final class Sftp {\n \t/**\n \t * An {@link SftpMessageHandlerSpec} factory for an outbound channel adapter spec.\n \t * @param sftpRemoteFileTemplate the remote file template.\n-     * @return the spec.\n+\t * @return the spec.\n+\t * @since 5.4\n \t */\n \tpublic static SftpMessageHandlerSpec outboundAdapter(SftpRemoteFileTemplate sftpRemoteFileTemplate) {\n \t\treturn new SftpMessageHandlerSpec(sftpRemoteFileTemplate);\n"}}, {"oid": "5c9d6a808fcee922edc80f3bf4a41e5e3e659393", "url": "https://github.com/spring-projects/spring-integration/commit/5c9d6a808fcee922edc80f3bf4a41e5e3e659393", "message": "GH-3092 Incorporate review comments", "committedDate": "2020-06-15T18:29:45Z", "type": "commit"}, {"oid": "5defda5f41b1f3d6b3c601d2697fa23be6ca0226", "url": "https://github.com/spring-projects/spring-integration/commit/5defda5f41b1f3d6b3c601d2697fa23be6ca0226", "message": "GH-3092 Incorporate review comments", "committedDate": "2020-06-15T18:33:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3Mjk1OQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3304#discussion_r440372959", "bodyText": "There must be a blank line before @since on the class level JavaDocs. This way the author list is much visible.", "author": "artembilan", "createdAt": "2020-06-15T18:41:36Z", "path": "spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/FtpMessageHandlerSpec.java", "diffHunk": "@@ -30,7 +30,7 @@\n  *\n  * @author Artem Bilan\n  * @author Joaquin Santana\n- *\n+ * @author Deepak Gunasekaran\n  * @since 5.0", "originalCommit": "5defda5f41b1f3d6b3c601d2697fa23be6ca0226", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "90f93dff4f5ee6e20278cd6e276714f7b1ba5fb7", "chunk": "diff --git a/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/FtpMessageHandlerSpec.java b/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/FtpMessageHandlerSpec.java\nindex f6ab9f36c5..2f7042eafd 100644\n--- a/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/FtpMessageHandlerSpec.java\n+++ b/spring-integration-ftp/src/main/java/org/springframework/integration/ftp/dsl/FtpMessageHandlerSpec.java\n\n@@ -31,6 +31,7 @@ import org.springframework.integration.ftp.session.FtpRemoteFileTemplate;\n  * @author Artem Bilan\n  * @author Joaquin Santana\n  * @author Deepak Gunasekaran\n+ *\n  * @since 5.0\n  */\n public class FtpMessageHandlerSpec extends FileTransferringMessageHandlerSpec<FTPFile, FtpMessageHandlerSpec> {\n"}}, {"oid": "90f93dff4f5ee6e20278cd6e276714f7b1ba5fb7", "url": "https://github.com/spring-projects/spring-integration/commit/90f93dff4f5ee6e20278cd6e276714f7b1ba5fb7", "message": "GH-3092 Incorporate review comments", "committedDate": "2020-06-15T20:19:30Z", "type": "commit"}]}