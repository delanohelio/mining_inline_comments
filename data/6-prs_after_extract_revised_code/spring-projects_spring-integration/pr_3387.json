{"pr_number": 3387, "pr_title": "GH-3386: Add method signature for gateway proxy", "pr_createdAt": "2020-09-18T17:28:18Z", "pr_url": "https://github.com/spring-projects/spring-integration/pull/3387", "timeline": [{"oid": "0fe1d3086592941f1405f349c4ab856579b6db86", "url": "https://github.com/spring-projects/spring-integration/commit/0fe1d3086592941f1405f349c4ab856579b6db86", "message": "GH-3386: Add method signature for gateway proxy\n\nFixes https://github.com/spring-projects/spring-integration/issues/3386\n\nAll the gateway proxy method invokers are supplied with the same\nbean name inherited from the proxy.\n\n* Add method signature for proxy method bean to fine-grain the\nmanagement for those bean in the logs, message history and metrics", "committedDate": "2020-09-18T17:28:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTEwMjYyOQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3387#discussion_r491102629", "bodyText": "Class::getSimpleName ??", "author": "garyrussell", "createdAt": "2020-09-18T17:49:51Z", "path": "spring-integration-core/src/main/java/org/springframework/integration/gateway/GatewayProxyFactoryBean.java", "diffHunk": "@@ -864,7 +866,13 @@ private MethodInvocationGateway doCreateMethodInvocationGateway(Method method,\n \n \t\ttimeouts(requestTimeout, replyTimeout, messageMapper, gateway);\n \n-\t\tgateway.setBeanName(getComponentName());\n+\t\tString gatewayMethodBeanName =\n+\t\t\t\tgetComponentName() + '#' + method.getName() +\n+\t\t\t\t'(' + Arrays.stream(method.getParameterTypes())\n+\t\t\t\t\t\t.map(Class::getName)", "originalCommit": "0fe1d3086592941f1405f349c4ab856579b6db86", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5b54ece0fe3e93a89011113e6ca10eb3cc17864a", "chunk": "diff --git a/spring-integration-core/src/main/java/org/springframework/integration/gateway/GatewayProxyFactoryBean.java b/spring-integration-core/src/main/java/org/springframework/integration/gateway/GatewayProxyFactoryBean.java\nindex a915b66665..4436936fc8 100644\n--- a/spring-integration-core/src/main/java/org/springframework/integration/gateway/GatewayProxyFactoryBean.java\n+++ b/spring-integration-core/src/main/java/org/springframework/integration/gateway/GatewayProxyFactoryBean.java\n\n@@ -869,7 +869,7 @@ public class GatewayProxyFactoryBean extends AbstractEndpoint\n \t\tString gatewayMethodBeanName =\n \t\t\t\tgetComponentName() + '#' + method.getName() +\n \t\t\t\t'(' + Arrays.stream(method.getParameterTypes())\n-\t\t\t\t\t\t.map(Class::getName)\n+\t\t\t\t\t\t.map(Class::getSimpleName)\n \t\t\t\t\t\t.collect(Collectors.joining(\", \")) + ')';\n \n \t\tgateway.setBeanName(gatewayMethodBeanName);\n"}}, {"oid": "5b54ece0fe3e93a89011113e6ca10eb3cc17864a", "url": "https://github.com/spring-projects/spring-integration/commit/5b54ece0fe3e93a89011113e6ca10eb3cc17864a", "message": "* Use `Class.getSimpleName()` instead to make gateway names less verbose", "committedDate": "2020-09-18T18:26:27Z", "type": "commit"}]}