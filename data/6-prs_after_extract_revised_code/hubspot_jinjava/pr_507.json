{"pr_number": 507, "pr_title": "Issue 492: For loop to iterate over keys of dictionary", "pr_createdAt": "2020-09-17T10:28:14Z", "pr_url": "https://github.com/HubSpot/jinjava/pull/507", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDIzODUxNg==", "url": "https://github.com/HubSpot/jinjava/pull/507#discussion_r490238516", "bodyText": "instead of passing this down through all these methods, could you just use the static JinjavaInterpreter.getCurrent() to get a hold of the interpreter and the config?", "author": "boulter", "createdAt": "2020-09-17T13:21:17Z", "path": "src/main/java/com/hubspot/jinjava/util/ObjectIterator.java", "diffHunk": "@@ -55,4 +50,16 @@ public static ForLoop getLoop(Object obj) {\n     // others\n     return new ForLoop(Iterators.singletonIterator(obj), 1);\n   }\n+\n+  @SuppressWarnings(\"unchecked\")\n+  public static ForLoop getLoop(Object obj, boolean iterateOverMapKeys) {", "originalCommit": "b2d01989210369d41539d1013a71865aa17cfde2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a8487c1c92127f9f33bbe73968cd230561fa415d", "chunk": "diff --git a/src/main/java/com/hubspot/jinjava/util/ObjectIterator.java b/src/main/java/com/hubspot/jinjava/util/ObjectIterator.java\nindex 5b5d9348..2a4a9cbb 100644\n--- a/src/main/java/com/hubspot/jinjava/util/ObjectIterator.java\n+++ b/src/main/java/com/hubspot/jinjava/util/ObjectIterator.java\n\n@@ -50,16 +61,4 @@ public final class ObjectIterator {\n     // others\n     return new ForLoop(Iterators.singletonIterator(obj), 1);\n   }\n-\n-  @SuppressWarnings(\"unchecked\")\n-  public static ForLoop getLoop(Object obj, boolean iterateOverMapKeys) {\n-    if (obj instanceof Map) {\n-      Collection<Object> clt = iterateOverMapKeys\n-        ? ((Map<Object, Object>) obj).keySet()\n-        : ((Map<Object, Object>) obj).values();\n-      return new ForLoop(clt.iterator(), clt.size());\n-    }\n-\n-    return getLoop(obj);\n-  }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDI0MDMyNw==", "url": "https://github.com/HubSpot/jinjava/pull/507#discussion_r490240327", "bodyText": "much better name!", "author": "boulter", "createdAt": "2020-09-17T13:23:31Z", "path": "src/test/java/com/hubspot/jinjava/util/ObjectIteratorTest.java", "diffHunk": "@@ -73,20 +74,33 @@ public void test6() {\n     items.add(\"world\");\n     items.add(\"jinjava\");\n     items.add(\"asfun\");\n-    loop = ObjectIterator.getLoop(items);\n+    loop = ObjectIterator.getLoop(items, false);\n     assertEquals(4, loop.getLength());\n     assertEquals(\"hello\", loop.next());\n   }\n \n   @Test\n-  public void test7() {\n+  public void testItIteratesOverValues() {", "originalCommit": "b2d01989210369d41539d1013a71865aa17cfde2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a8487c1c92127f9f33bbe73968cd230561fa415d", "chunk": "diff --git a/src/test/java/com/hubspot/jinjava/util/ObjectIteratorTest.java b/src/test/java/com/hubspot/jinjava/util/ObjectIteratorTest.java\nindex 7896cbd3..b13fc073 100644\n--- a/src/test/java/com/hubspot/jinjava/util/ObjectIteratorTest.java\n+++ b/src/test/java/com/hubspot/jinjava/util/ObjectIteratorTest.java\n\n@@ -74,33 +73,20 @@ public class ObjectIteratorTest {\n     items.add(\"world\");\n     items.add(\"jinjava\");\n     items.add(\"asfun\");\n-    loop = ObjectIterator.getLoop(items, false);\n+    loop = ObjectIterator.getLoop(items);\n     assertEquals(4, loop.getLength());\n     assertEquals(\"hello\", loop.next());\n   }\n \n   @Test\n-  public void testItIteratesOverValues() {\n+  public void test7() {\n     Map<Object, Object> items = new HashMap<>();\n     items.put(\"ok\", 1);\n     items.put(1, \"ok\");\n     items.put(2, 2);\n     items.put(\"ko\", \"ko\");\n     items.put(\"test\", new ObjectIteratorTest());\n-    loop = ObjectIterator.getLoop(items, false);\n+    loop = ObjectIterator.getLoop(items);\n     assertEquals(5, loop.getLength());\n-    assertTrue(items.containsValue(loop.next()));\n-  }\n-\n-  @Test\n-  public void testItIteratesOverKeys() throws Exception {\n-    Map<Object, Object> items = new HashMap<>();\n-    items.put(\"hello\", \"ok\");\n-    items.put(\"world\", 2);\n-    items.put(\"jinjava\", \"ko\");\n-    items.put(\"asfun\", new ObjectIteratorTest());\n-    loop = ObjectIterator.getLoop(items, true);\n-    assertEquals(4, loop.getLength());\n-    assertTrue(items.containsKey(loop.next()));\n   }\n }\n"}}, {"oid": "a8487c1c92127f9f33bbe73968cd230561fa415d", "url": "https://github.com/HubSpot/jinjava/commit/a8487c1c92127f9f33bbe73968cd230561fa415d", "message": "Provide a way to iterate over keys of dictionary", "committedDate": "2020-09-18T07:41:45Z", "type": "commit"}, {"oid": "fa1339be97e2e36970111ef96b1c64fe05d3755a", "url": "https://github.com/HubSpot/jinjava/commit/fa1339be97e2e36970111ef96b1c64fe05d3755a", "message": "Add test to make sure it iterates over keys", "committedDate": "2020-09-18T07:43:11Z", "type": "commit"}, {"oid": "fa1339be97e2e36970111ef96b1c64fe05d3755a", "url": "https://github.com/HubSpot/jinjava/commit/fa1339be97e2e36970111ef96b1c64fe05d3755a", "message": "Add test to make sure it iterates over keys", "committedDate": "2020-09-18T07:43:11Z", "type": "forcePushed"}]}