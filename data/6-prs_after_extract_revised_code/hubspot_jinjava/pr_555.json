{"pr_number": 555, "pr_title": "Limit eager length", "pr_createdAt": "2020-12-01T19:15:37Z", "pr_url": "https://github.com/HubSpot/jinjava/pull/555", "timeline": [{"oid": "2505452b2de8ff839da90f624588d4feab01e713", "url": "https://github.com/HubSpot/jinjava/commit/2505452b2de8ff839da90f624588d4feab01e713", "message": "Add length limiting for eager execution", "committedDate": "2020-12-01T16:35:55Z", "type": "commit"}, {"oid": "ce5f95a29df33913984e43d54858e2cb8ae3791b", "url": "https://github.com/HubSpot/jinjava/commit/ce5f95a29df33913984e43d54858e2cb8ae3791b", "message": "Don't limit in renderChildren as that is easily legitimately long", "committedDate": "2020-12-01T16:45:43Z", "type": "commit"}, {"oid": "b2484ae519ef144fa81f49fa6af8af52a7a6cb64", "url": "https://github.com/HubSpot/jinjava/commit/b2484ae519ef144fa81f49fa6af8af52a7a6cb64", "message": "Add length limiting string joiner", "committedDate": "2020-12-01T17:21:35Z", "type": "commit"}, {"oid": "69064329d91cf36315f410ee4cbe0244d4e2a1bb", "url": "https://github.com/HubSpot/jinjava/commit/69064329d91cf36315f410ee4cbe0244d4e2a1bb", "message": "Add more length limiting tests", "committedDate": "2020-12-01T19:10:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDI2MzU2Nw==", "url": "https://github.com/HubSpot/jinjava/pull/555#discussion_r534263567", "bodyText": "Should you be using e or e1 here?", "author": "boulter", "createdAt": "2020-12-02T15:36:33Z", "path": "src/main/java/com/hubspot/jinjava/lib/tag/eager/EagerTagDecorator.java", "diffHunk": "@@ -51,7 +55,17 @@ public String interpret(TagNode tagNode, JinjavaInterpreter interpreter) {\n     try {\n       return tag.interpret(tagNode, interpreter);\n     } catch (DeferredValueException | TemplateSyntaxException e) {\n-      return wrapInAutoEscapeIfNeeded(eagerInterpret(tagNode, interpreter), interpreter);\n+      try {\n+        return wrapInAutoEscapeIfNeeded(\n+          eagerInterpret(tagNode, interpreter),\n+          interpreter\n+        );\n+      } catch (OutputTooBigException e1) {\n+        interpreter.addError(TemplateError.fromOutputTooBigException(e));", "originalCommit": "69064329d91cf36315f410ee4cbe0244d4e2a1bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDI3NzgxMw==", "url": "https://github.com/HubSpot/jinjava/pull/555#discussion_r534277813", "bodyText": "e1, thanks", "author": "jasmith-hs", "createdAt": "2020-12-02T15:53:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDI2MzU2Nw=="}], "type": "inlineReview", "revised_code": {"commit": "3097aa7eabba4378d8331a15dd60a95b78722744", "chunk": "diff --git a/src/main/java/com/hubspot/jinjava/lib/tag/eager/EagerTagDecorator.java b/src/main/java/com/hubspot/jinjava/lib/tag/eager/EagerTagDecorator.java\nindex 45ea95cc..e7b8c3d5 100644\n--- a/src/main/java/com/hubspot/jinjava/lib/tag/eager/EagerTagDecorator.java\n+++ b/src/main/java/com/hubspot/jinjava/lib/tag/eager/EagerTagDecorator.java\n\n@@ -61,7 +61,7 @@ public abstract class EagerTagDecorator<T extends Tag> implements Tag {\n           interpreter\n         );\n       } catch (OutputTooBigException e1) {\n-        interpreter.addError(TemplateError.fromOutputTooBigException(e));\n+        interpreter.addError(TemplateError.fromOutputTooBigException(e1));\n         throw new DeferredValueException(\n           String.format(\"Output too big for eager execution: %s\", e1.getMessage())\n         );\n"}}, {"oid": "3097aa7eabba4378d8331a15dd60a95b78722744", "url": "https://github.com/HubSpot/jinjava/commit/3097aa7eabba4378d8331a15dd60a95b78722744", "message": "Add template error from correct exception", "committedDate": "2020-12-02T15:54:51Z", "type": "commit"}]}