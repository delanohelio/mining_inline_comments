{"pr_number": 948, "pr_title": "Add integration test for Helix Java APIs using different MSDS endpoints", "pr_createdAt": "2020-04-11T00:48:42Z", "pr_url": "https://github.com/apache/helix/pull/948", "timeline": [{"oid": "21b455b5d88467dc901e899ba15949ebd32e123b", "url": "https://github.com/apache/helix/commit/21b455b5d88467dc901e899ba15949ebd32e123b", "message": "Add integration test for Helix Java APIs using different MSDS endpoints", "committedDate": "2020-04-11T00:29:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAyMjM5MQ==", "url": "https://github.com/apache/helix/pull/948#discussion_r407022391", "bodyText": "Why? Consider using PropertyPathBuilder to avoid hard code?", "author": "jiajunwang", "createdAt": "2020-04-11T05:51:22Z", "path": "helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java", "diffHunk": "@@ -89,6 +94,11 @@\n   private static final List<String> CLUSTER_LIST =\n       ImmutableList.of(\"CLUSTER_1\", \"CLUSTER_2\", \"CLUSTER_3\");\n \n+  // For testing different MSDS endpoint configs.\n+  private static final String CLUSTER_THREE = \"CLUSTER_3\";\n+  private static final String CLUSTER_FOUR = \"CLUSTER_4\";\n+  private static final String SLASH = \"/\";", "originalCommit": "21b455b5d88467dc901e899ba15949ebd32e123b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAyMjgwNA==", "url": "https://github.com/apache/helix/pull/948#discussion_r407022804", "bodyText": "Or call it ROOT would be easier to understand.", "author": "jiajunwang", "createdAt": "2020-04-11T05:56:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAyMjM5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAzNzA3OQ==", "url": "https://github.com/apache/helix/pull/948#discussion_r407037079", "bodyText": "My initial thought was there are too many places that use slash so just wanted to make it a constant to reduce objects created.\nPropertyPathBuilder doesn't cover all the cases/paths creation in this test\nSlash does not only act as a root, but also a separator. So root does not satisfy very well.\nInstead, I just leave the way slash is used as it is in the original code, but create a formPath() for my case.", "author": "huizhilu", "createdAt": "2020-04-11T08:44:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAyMjM5MQ=="}], "type": "inlineReview", "revised_code": {"commit": "4d88d73d4d25b1595cd82d8e1913f9ac189a41bc", "chunk": "diff --git a/helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java b/helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java\nindex 637354883..09c1d1706 100644\n--- a/helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java\n+++ b/helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java\n\n@@ -95,9 +95,8 @@ public class TestMultiZkHelixJavaApis {\n       ImmutableList.of(\"CLUSTER_1\", \"CLUSTER_2\", \"CLUSTER_3\");\n \n   // For testing different MSDS endpoint configs.\n-  private static final String CLUSTER_THREE = \"CLUSTER_3\";\n+  private static final String CLUSTER_ONE = CLUSTER_LIST.get(0);\n   private static final String CLUSTER_FOUR = \"CLUSTER_4\";\n-  private static final String SLASH = \"/\";\n \n   private MockMetadataStoreDirectoryServer _msds;\n   private static final Map<String, Collection<String>> _rawRoutingData = new HashMap<>();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAyNDI3MA==", "url": "https://github.com/apache/helix/pull/948#discussion_r407024270", "bodyText": "Two \"CLUSTER_3\"s are defined separately. Not cool.", "author": "jiajunwang", "createdAt": "2020-04-11T06:15:42Z", "path": "helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java", "diffHunk": "@@ -89,6 +94,11 @@\n   private static final List<String> CLUSTER_LIST =\n       ImmutableList.of(\"CLUSTER_1\", \"CLUSTER_2\", \"CLUSTER_3\");", "originalCommit": "21b455b5d88467dc901e899ba15949ebd32e123b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4d88d73d4d25b1595cd82d8e1913f9ac189a41bc", "chunk": "diff --git a/helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java b/helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java\nindex 637354883..09c1d1706 100644\n--- a/helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java\n+++ b/helix-core/src/test/java/org/apache/helix/integration/multizk/TestMultiZkHelixJavaApis.java\n\n@@ -95,9 +95,8 @@ public class TestMultiZkHelixJavaApis {\n       ImmutableList.of(\"CLUSTER_1\", \"CLUSTER_2\", \"CLUSTER_3\");\n \n   // For testing different MSDS endpoint configs.\n-  private static final String CLUSTER_THREE = \"CLUSTER_3\";\n+  private static final String CLUSTER_ONE = CLUSTER_LIST.get(0);\n   private static final String CLUSTER_FOUR = \"CLUSTER_4\";\n-  private static final String SLASH = \"/\";\n \n   private MockMetadataStoreDirectoryServer _msds;\n   private static final Map<String, Collection<String>> _rawRoutingData = new HashMap<>();\n"}}, {"oid": "4d88d73d4d25b1595cd82d8e1913f9ac189a41bc", "url": "https://github.com/apache/helix/commit/4d88d73d4d25b1595cd82d8e1913f9ac189a41bc", "message": "Create formPath()", "committedDate": "2020-04-11T08:45:21Z", "type": "commit"}, {"oid": "898a1030cbd093d65d70f4fc15104ac2b8421c83", "url": "https://github.com/apache/helix/commit/898a1030cbd093d65d70f4fc15104ac2b8421c83", "message": "Close data accessors.", "committedDate": "2020-04-11T08:50:44Z", "type": "commit"}]}