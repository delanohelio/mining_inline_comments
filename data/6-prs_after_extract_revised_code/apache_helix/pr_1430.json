{"pr_number": 1430, "pr_title": "Add getResourceCustomized View REST API", "pr_createdAt": "2020-10-02T16:23:08Z", "pr_url": "https://github.com/apache/helix/pull/1430", "timeline": [{"oid": "ec9bc0b184c7806584f3d23b0bd65a883a1c5fa9", "url": "https://github.com/apache/helix/commit/ec9bc0b184c7806584f3d23b0bd65a883a1c5fa9", "message": "add getResourceCustomized View REST API", "committedDate": "2020-10-02T16:16:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk4NzYzNQ==", "url": "https://github.com/apache/helix/pull/1430#discussion_r498987635", "bodyText": "Could you add a test case where the call returns something?", "author": "mgao0", "createdAt": "2020-10-02T18:34:59Z", "path": "helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java", "diffHunk": "@@ -162,6 +162,13 @@ public void testExternalView() throws IOException {\n     System.out.println(\"End test :\" + TestHelper.getTestMethodName());\n   }\n \n+  @Test(dependsOnMethods = \"testExternalView\")\n+  public void testCustomizedView() {\n+    System.out.println(\"Start test :\" + TestHelper.getTestMethodName());\n+    get(\"clusters/\" + CLUSTER_NAME + \"/resources/\" + RESOURCE_NAME + \"/customizedView\", null,\n+        Response.Status.NOT_FOUND.getStatusCode(), true);\n+  }\n+", "originalCommit": "ec9bc0b184c7806584f3d23b0bd65a883a1c5fa9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA0MTA1MQ==", "url": "https://github.com/apache/helix/pull/1430#discussion_r499041051", "bodyText": "Thanks for adding the test.", "author": "mgao0", "createdAt": "2020-10-02T20:42:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk4NzYzNQ=="}], "type": "inlineReview", "revised_code": {"commit": "38d6ec09e7083d3766489f79c2d28c4dbecf9535", "chunk": "diff --git a/helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java b/helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java\nindex 37b7bf5d2..d194ccbdb 100644\n--- a/helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java\n+++ b/helix-rest/src/test/java/org/apache/helix/rest/server/TestResourceAccessor.java\n\n@@ -163,10 +165,19 @@ public class TestResourceAccessor extends AbstractTestClass {\n   }\n \n   @Test(dependsOnMethods = \"testExternalView\")\n-  public void testCustomizedView() {\n+  public void testCustomizedView() throws IOException {\n     System.out.println(\"Start test :\" + TestHelper.getTestMethodName());\n-    get(\"clusters/\" + CLUSTER_NAME + \"/resources/\" + RESOURCE_NAME + \"/customizedView\", null,\n-        Response.Status.NOT_FOUND.getStatusCode(), true);\n+    ZNRecord znRecord = new ZNRecord(\"test_customizedView\");\n+    _baseAccessor\n+        .set(PropertyPathBuilder.customizedView(CLUSTER_NAME, CUSTOMIZED_STATE_TYPE, RESOURCE_NAME),\n+            znRecord, 1);\n+    String body =\n+        get(\"clusters/\" + CLUSTER_NAME + \"/resources/\" + RESOURCE_NAME + \"/\" + CUSTOMIZED_STATE_TYPE\n+            + \"/customizedView\", null, Response.Status.OK.getStatusCode(), true);\n+    CustomizedView customizedView = new CustomizedView(toZNRecord(body));\n+    Assert.assertEquals(customizedView, _gSetupTool.getClusterManagementTool()\n+        .getResourceCustomizedView(CLUSTER_NAME, RESOURCE_NAME, CUSTOMIZED_STATE_TYPE));\n+    System.out.println(\"End test :\" + TestHelper.getTestMethodName());\n   }\n \n   @Test(dependsOnMethods = \"testExternalView\")\n"}}, {"oid": "38d6ec09e7083d3766489f79c2d28c4dbecf9535", "url": "https://github.com/apache/helix/commit/38d6ec09e7083d3766489f79c2d28c4dbecf9535", "message": "improve test", "committedDate": "2020-10-02T20:39:33Z", "type": "commit"}]}