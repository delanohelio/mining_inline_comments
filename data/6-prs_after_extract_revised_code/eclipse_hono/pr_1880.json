{"pr_number": 1880, "pr_title": "Add base work for the JDBC device registry implementation", "pr_createdAt": "2020-04-06T13:25:18Z", "pr_url": "https://github.com/eclipse/hono/pull/1880", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTM5MDk1NQ==", "url": "https://github.com/eclipse/hono/pull/1880#discussion_r405390955", "bodyText": "We should add JavaDoc comments for these classes. And also enable checkstyle plugin for the module. Although I'd be in favor of relaxing some of the rules regarding the JavaDoc comments.", "author": "dejanb", "createdAt": "2020-04-08T09:35:41Z", "path": "service-base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/config/JdbcDeviceProperties.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+\n+package org.eclipse.hono.service.base.jdbc.config;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonInclude.Include;\n+\n+@JsonInclude(value = Include.NON_NULL)\n+public class JdbcDeviceProperties {", "originalCommit": "38aaa8c197ca456b86ec62542ff950e3252c5855", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8fa029020e27dff578e7a2e63190739c46b5652a", "chunk": "diff --git a/service-base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/config/JdbcDeviceProperties.java b/services/base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/config/JdbcDeviceProperties.java\nsimilarity index 87%\nrename from service-base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/config/JdbcDeviceProperties.java\nrename to services/base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/config/JdbcDeviceProperties.java\nindex 32a6ec6bf..c6c612c5c 100644\n--- a/service-base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/config/JdbcDeviceProperties.java\n+++ b/services/base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/config/JdbcDeviceProperties.java\n\n@@ -16,6 +16,9 @@ package org.eclipse.hono.service.base.jdbc.config;\n import com.fasterxml.jackson.annotation.JsonInclude;\n import com.fasterxml.jackson.annotation.JsonInclude.Include;\n \n+/**\n+ *\n+ */\n @JsonInclude(value = Include.NON_NULL)\n public class JdbcDeviceProperties {\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTM5NTcwNg==", "url": "https://github.com/eclipse/hono/pull/1880#discussion_r405395706", "bodyText": "Could we use OperationResult class here?", "author": "dejanb", "createdAt": "2020-04-08T09:43:17Z", "path": "service-base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/store/device/DeviceReadResult.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+\n+package org.eclipse.hono.service.base.jdbc.store.device;\n+\n+import java.util.Optional;\n+\n+import org.eclipse.hono.service.management.device.Device;\n+\n+import com.google.common.base.MoreObjects;\n+\n+public class DeviceReadResult {", "originalCommit": "38aaa8c197ca456b86ec62542ff950e3252c5855", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTQwNTE4MA==", "url": "https://github.com/eclipse/hono/pull/1880#discussion_r405405180", "bodyText": "I would like to avoid that. First of all, that would introduce a dependency on the higher level stuff, to this lower level module. Also would the other fields (status, cache directive) have no meaning on this level.", "author": "ctron", "createdAt": "2020-04-08T09:58:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTM5NTcwNg=="}], "type": "inlineReview", "revised_code": {"commit": "8fa029020e27dff578e7a2e63190739c46b5652a", "chunk": "diff --git a/service-base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/store/device/DeviceReadResult.java b/services/base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/store/device/DeviceReadResult.java\nsimilarity index 77%\nrename from service-base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/store/device/DeviceReadResult.java\nrename to services/base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/store/device/DeviceReadResult.java\nindex b8cbea04a..f482a82dd 100644\n--- a/service-base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/store/device/DeviceReadResult.java\n+++ b/services/base-jdbc/src/main/java/org/eclipse/hono/service/base/jdbc/store/device/DeviceReadResult.java\n\n@@ -13,19 +13,29 @@\n \n package org.eclipse.hono.service.base.jdbc.store.device;\n \n+import java.util.Objects;\n import java.util.Optional;\n \n import org.eclipse.hono.service.management.device.Device;\n \n import com.google.common.base.MoreObjects;\n \n+/**\n+ * A read result for device information.\n+ */\n public class DeviceReadResult {\n+\n     private Device device;\n     private Optional<String> resourceVersion;\n \n-    public DeviceReadResult(Device device, Optional<String> resourceVersion) {\n+    /**\n+     * Create a new instance.\n+     * @param device The device.\n+     * @param resourceVersion The optional resource version.\n+     */\n+    public DeviceReadResult(final Device device, final Optional<String> resourceVersion) {\n         this.device = device;\n-        this.resourceVersion = resourceVersion;\n+        this.resourceVersion = Objects.requireNonNull(resourceVersion);\n     }\n \n     public Device getDevice() {\n"}}, {"oid": "8fa029020e27dff578e7a2e63190739c46b5652a", "url": "https://github.com/eclipse/hono/commit/8fa029020e27dff578e7a2e63190739c46b5652a", "message": "Add base work for the JDBC device registry implementation", "committedDate": "2020-04-08T15:18:08Z", "type": "commit"}, {"oid": "8fa029020e27dff578e7a2e63190739c46b5652a", "url": "https://github.com/eclipse/hono/commit/8fa029020e27dff578e7a2e63190739c46b5652a", "message": "Add base work for the JDBC device registry implementation", "committedDate": "2020-04-08T15:18:08Z", "type": "forcePushed"}]}