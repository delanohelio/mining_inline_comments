{"pr_number": 5136, "pr_title": "GEODE-8137 - Implement loadService.", "pr_createdAt": "2020-05-19T23:36:39Z", "pr_url": "https://github.com/apache/geode/pull/5136", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM5NjcxOQ==", "url": "https://github.com/apache/geode/pull/5136#discussion_r428396719", "bodyText": "Please print the stacktrace. so please revert back to logger.error(e)", "author": "kohlmu-pivotal", "createdAt": "2020-05-21T01:29:28Z", "path": "geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleService.java", "diffHunk": "@@ -92,18 +98,20 @@ public boolean loadModule(ModuleDescriptor moduleDescriptor) {\n         builder.addResourceRoot(ResourceLoaderSpec.createResourceLoaderSpec(resourceLoader));\n       }\n     } catch (IOException e) {\n-      logger.error(e);\n+      logger.error(e.getMessage());", "originalCommit": "8437ec16f4d9d573179bd4ad0778a077aaa26039", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc3MjE4OA==", "url": "https://github.com/apache/geode/pull/5136#discussion_r428772188", "bodyText": "Updated", "author": "yozaner1324", "createdAt": "2020-05-21T16:36:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM5NjcxOQ=="}], "type": "inlineReview", "revised_code": {"commit": "7d66148d8942bf0db9bd4253a0c5e9f9efe6bceb", "chunk": "diff --git a/geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleService.java b/geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleServiceImpl.java\nsimilarity index 87%\nrename from geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleService.java\nrename to geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleServiceImpl.java\nindex 9bce27d5a3..c7be4c5838 100644\n--- a/geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleService.java\n+++ b/geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleServiceImpl.java\n\n@@ -98,20 +101,24 @@ public class JBossModuleService implements ModuleService {\n         builder.addResourceRoot(ResourceLoaderSpec.createResourceLoaderSpec(resourceLoader));\n       }\n     } catch (IOException e) {\n-      logger.error(e.getMessage());\n+      logger.error(e.getMessage(), e);\n       return false;\n     }\n \n+    // Add dependency on the system classloader so modules can access classes that aren't in\n+    // modules.\n     builder.addDependency(DependencySpec.createSystemDependencySpec(PathUtils.getPathSet(null)));\n \n+    // Build and register the ModuleSpec\n     ModuleSpec moduleSpec = builder.create();\n     moduleLoader.addModuleSpec(moduleSpec);\n \n+    // Load the module and add it to the modules map.\n     try {\n       modules.put(moduleDescriptor.getVersionedName(),\n           moduleLoader.loadModule(moduleSpec.getName()));\n     } catch (ModuleLoadException e) {\n-      logger.error(e.getMessage());\n+      logger.error(e.getMessage(), e);\n       return false;\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM5Njc2OA==", "url": "https://github.com/apache/geode/pull/5136#discussion_r428396768", "bodyText": "Please print the stacktrace. so please revert back to logger.error(e)", "author": "kohlmu-pivotal", "createdAt": "2020-05-21T01:29:42Z", "path": "geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleService.java", "diffHunk": "@@ -92,18 +98,20 @@ public boolean loadModule(ModuleDescriptor moduleDescriptor) {\n         builder.addResourceRoot(ResourceLoaderSpec.createResourceLoaderSpec(resourceLoader));\n       }\n     } catch (IOException e) {\n-      logger.error(e);\n+      logger.error(e.getMessage());\n       return false;\n     }\n \n+    builder.addDependency(DependencySpec.createSystemDependencySpec(PathUtils.getPathSet(null)));\n+\n     ModuleSpec moduleSpec = builder.create();\n     moduleLoader.addModuleSpec(moduleSpec);\n \n     try {\n       modules.put(moduleDescriptor.getVersionedName(),\n           moduleLoader.loadModule(moduleSpec.getName()));\n     } catch (ModuleLoadException e) {\n-      logger.error(e);\n+      logger.error(e.getMessage());", "originalCommit": "8437ec16f4d9d573179bd4ad0778a077aaa26039", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc3MjI5Nw==", "url": "https://github.com/apache/geode/pull/5136#discussion_r428772297", "bodyText": "Updated.", "author": "yozaner1324", "createdAt": "2020-05-21T16:36:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM5Njc2OA=="}], "type": "inlineReview", "revised_code": {"commit": "7d66148d8942bf0db9bd4253a0c5e9f9efe6bceb", "chunk": "diff --git a/geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleService.java b/geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleServiceImpl.java\nsimilarity index 87%\nrename from geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleService.java\nrename to geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleServiceImpl.java\nindex 9bce27d5a3..c7be4c5838 100644\n--- a/geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleService.java\n+++ b/geode-modules/src/main/java/org/apache/geode/services/module/impl/JBossModuleServiceImpl.java\n\n@@ -98,20 +101,24 @@ public class JBossModuleService implements ModuleService {\n         builder.addResourceRoot(ResourceLoaderSpec.createResourceLoaderSpec(resourceLoader));\n       }\n     } catch (IOException e) {\n-      logger.error(e.getMessage());\n+      logger.error(e.getMessage(), e);\n       return false;\n     }\n \n+    // Add dependency on the system classloader so modules can access classes that aren't in\n+    // modules.\n     builder.addDependency(DependencySpec.createSystemDependencySpec(PathUtils.getPathSet(null)));\n \n+    // Build and register the ModuleSpec\n     ModuleSpec moduleSpec = builder.create();\n     moduleLoader.addModuleSpec(moduleSpec);\n \n+    // Load the module and add it to the modules map.\n     try {\n       modules.put(moduleDescriptor.getVersionedName(),\n           moduleLoader.loadModule(moduleSpec.getName()));\n     } catch (ModuleLoadException e) {\n-      logger.error(e.getMessage());\n+      logger.error(e.getMessage(), e);\n       return false;\n     }\n \n"}}, {"oid": "7d66148d8942bf0db9bd4253a0c5e9f9efe6bceb", "url": "https://github.com/apache/geode/commit/7d66148d8942bf0db9bd4253a0c5e9f9efe6bceb", "message": "GEODE-8137 - Implement loadService.", "committedDate": "2020-05-21T16:31:10Z", "type": "commit"}, {"oid": "7d66148d8942bf0db9bd4253a0c5e9f9efe6bceb", "url": "https://github.com/apache/geode/commit/7d66148d8942bf0db9bd4253a0c5e9f9efe6bceb", "message": "GEODE-8137 - Implement loadService.", "committedDate": "2020-05-21T16:31:10Z", "type": "forcePushed"}]}