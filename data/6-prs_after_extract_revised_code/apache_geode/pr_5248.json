{"pr_number": 5248, "pr_title": "GEODE-8247: modified FilterRoutingInfo checks", "pr_createdAt": "2020-06-13T17:42:44Z", "pr_url": "https://github.com/apache/geode/pull/5248", "timeline": [{"oid": "d1711a1c800dd53c6af725f77191fe12946a685c", "url": "https://github.com/apache/geode/commit/d1711a1c800dd53c6af725f77191fe12946a685c", "message": "GEODE-8247: solution and new tests added", "committedDate": "2020-06-13T17:39:52Z", "type": "commit"}, {"oid": "c45da33251c2124faf4087856b4bff61581cd628", "url": "https://github.com/apache/geode/commit/c45da33251c2124faf4087856b4bff61581cd628", "message": "GEODE-8247: fix for failing test", "committedDate": "2020-06-13T21:21:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgwMTM3MA==", "url": "https://github.com/apache/geode/pull/5248#discussion_r439801370", "bodyText": "Please change names, e.g. onEventCalls -> onEventCreateCalls, onEventUPDATE -> onEventUpdateCalls", "author": "mkevo", "createdAt": "2020-06-14T07:39:34Z", "path": "geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java", "diffHunk": "@@ -196,6 +252,32 @@ public void close() {\n     }\n   }\n \n+  private class TestCqListener2 implements CqListener, Serializable {\n+    public int onEventCalls = 0;\n+    public int onEventUPDATE = 0;", "originalCommit": "c45da33251c2124faf4087856b4bff61581cd628", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2309cfe5b8ea80b0a42b1a5de78c45138bd9364d", "chunk": "diff --git a/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java b/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java\nindex efc7e4e6e6..dd50836f1f 100644\n--- a/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java\n+++ b/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java\n\n@@ -242,39 +242,31 @@ public class CQDistributedTest implements Serializable {\n     }\n \n     @Override\n-    public void onError(CqEvent aCqEvent) {\n-\n-    }\n+    public void onError(CqEvent aCqEvent) {}\n \n     @Override\n-    public void close() {\n-\n-    }\n+    public void close() {}\n   }\n \n   private class TestCqListener2 implements CqListener, Serializable {\n-    public int onEventCalls = 0;\n-    public int onEventUPDATE = 0;\n+    public int onEventCreateCalls = 0;\n+    public int onEventUpdateCalls = 0;\n \n     @Override\n     public void onEvent(CqEvent aCqEvent) {\n       Operation queryOperation = aCqEvent.getQueryOperation();\n       if (queryOperation.isCreate()) {\n-        onEventCalls++;\n+        onEventCreateCalls++;\n       } else if (queryOperation.isUpdate()) {\n-        onEventUPDATE++;\n+        onEventUpdateCalls++;\n       }\n     }\n \n     @Override\n-    public void onError(CqEvent aCqEvent) {\n-\n-    }\n+    public void onError(CqEvent aCqEvent) {}\n \n     @Override\n-    public void close() {\n-\n-    }\n+    public void close() {}\n   }\n \n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgwMTQwNw==", "url": "https://github.com/apache/geode/pull/5248#discussion_r439801407", "bodyText": "remove blank line", "author": "mkevo", "createdAt": "2020-06-14T07:40:05Z", "path": "geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java", "diffHunk": "@@ -196,6 +252,32 @@ public void close() {\n     }\n   }\n \n+  private class TestCqListener2 implements CqListener, Serializable {\n+    public int onEventCalls = 0;\n+    public int onEventUPDATE = 0;\n+\n+    @Override\n+    public void onEvent(CqEvent aCqEvent) {\n+      Operation queryOperation = aCqEvent.getQueryOperation();\n+      if (queryOperation.isCreate()) {\n+        onEventCalls++;\n+      } else if (queryOperation.isUpdate()) {\n+        onEventUPDATE++;\n+      }\n+    }\n+\n+    @Override\n+    public void onError(CqEvent aCqEvent) {\n+", "originalCommit": "c45da33251c2124faf4087856b4bff61581cd628", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2309cfe5b8ea80b0a42b1a5de78c45138bd9364d", "chunk": "diff --git a/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java b/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java\nindex efc7e4e6e6..dd50836f1f 100644\n--- a/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java\n+++ b/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java\n\n@@ -242,39 +242,31 @@ public class CQDistributedTest implements Serializable {\n     }\n \n     @Override\n-    public void onError(CqEvent aCqEvent) {\n-\n-    }\n+    public void onError(CqEvent aCqEvent) {}\n \n     @Override\n-    public void close() {\n-\n-    }\n+    public void close() {}\n   }\n \n   private class TestCqListener2 implements CqListener, Serializable {\n-    public int onEventCalls = 0;\n-    public int onEventUPDATE = 0;\n+    public int onEventCreateCalls = 0;\n+    public int onEventUpdateCalls = 0;\n \n     @Override\n     public void onEvent(CqEvent aCqEvent) {\n       Operation queryOperation = aCqEvent.getQueryOperation();\n       if (queryOperation.isCreate()) {\n-        onEventCalls++;\n+        onEventCreateCalls++;\n       } else if (queryOperation.isUpdate()) {\n-        onEventUPDATE++;\n+        onEventUpdateCalls++;\n       }\n     }\n \n     @Override\n-    public void onError(CqEvent aCqEvent) {\n-\n-    }\n+    public void onError(CqEvent aCqEvent) {}\n \n     @Override\n-    public void close() {\n-\n-    }\n+    public void close() {}\n   }\n \n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgwMTQzMA==", "url": "https://github.com/apache/geode/pull/5248#discussion_r439801430", "bodyText": "remove blank line", "author": "mkevo", "createdAt": "2020-06-14T07:40:20Z", "path": "geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java", "diffHunk": "@@ -196,6 +252,32 @@ public void close() {\n     }\n   }\n \n+  private class TestCqListener2 implements CqListener, Serializable {\n+    public int onEventCalls = 0;\n+    public int onEventUPDATE = 0;\n+\n+    @Override\n+    public void onEvent(CqEvent aCqEvent) {\n+      Operation queryOperation = aCqEvent.getQueryOperation();\n+      if (queryOperation.isCreate()) {\n+        onEventCalls++;\n+      } else if (queryOperation.isUpdate()) {\n+        onEventUPDATE++;\n+      }\n+    }\n+\n+    @Override\n+    public void onError(CqEvent aCqEvent) {\n+\n+    }\n+\n+    @Override\n+    public void close() {\n+", "originalCommit": "c45da33251c2124faf4087856b4bff61581cd628", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgwMjAyOA==", "url": "https://github.com/apache/geode/pull/5248#discussion_r439802028", "bodyText": "Thanks for comments. Updated", "author": "mivanac", "createdAt": "2020-06-14T07:48:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgwMTQzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgwMjI3OA==", "url": "https://github.com/apache/geode/pull/5248#discussion_r439802278", "bodyText": "Thanks!", "author": "mkevo", "createdAt": "2020-06-14T07:51:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgwMTQzMA=="}], "type": "inlineReview", "revised_code": {"commit": "2309cfe5b8ea80b0a42b1a5de78c45138bd9364d", "chunk": "diff --git a/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java b/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java\nindex efc7e4e6e6..dd50836f1f 100644\n--- a/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java\n+++ b/geode-cq/src/distributedTest/java/org/apache/geode/cache/query/cq/CQDistributedTest.java\n\n@@ -242,39 +242,31 @@ public class CQDistributedTest implements Serializable {\n     }\n \n     @Override\n-    public void onError(CqEvent aCqEvent) {\n-\n-    }\n+    public void onError(CqEvent aCqEvent) {}\n \n     @Override\n-    public void close() {\n-\n-    }\n+    public void close() {}\n   }\n \n   private class TestCqListener2 implements CqListener, Serializable {\n-    public int onEventCalls = 0;\n-    public int onEventUPDATE = 0;\n+    public int onEventCreateCalls = 0;\n+    public int onEventUpdateCalls = 0;\n \n     @Override\n     public void onEvent(CqEvent aCqEvent) {\n       Operation queryOperation = aCqEvent.getQueryOperation();\n       if (queryOperation.isCreate()) {\n-        onEventCalls++;\n+        onEventCreateCalls++;\n       } else if (queryOperation.isUpdate()) {\n-        onEventUPDATE++;\n+        onEventUpdateCalls++;\n       }\n     }\n \n     @Override\n-    public void onError(CqEvent aCqEvent) {\n-\n-    }\n+    public void onError(CqEvent aCqEvent) {}\n \n     @Override\n-    public void close() {\n-\n-    }\n+    public void close() {}\n   }\n \n \n"}}, {"oid": "2309cfe5b8ea80b0a42b1a5de78c45138bd9364d", "url": "https://github.com/apache/geode/commit/2309cfe5b8ea80b0a42b1a5de78c45138bd9364d", "message": "GEODE-8247: update after comments", "committedDate": "2020-06-14T07:49:48Z", "type": "commit"}]}