{"pr_number": 5076, "pr_title": "Geode 7812: Changes to PutAllClientServerDistributionTest", "pr_createdAt": "2020-05-08T16:20:48Z", "pr_url": "https://github.com/apache/geode/pull/5076", "timeline": [{"oid": "66f5e976fe62079a6b01fd152b21aece056c3004", "url": "https://github.com/apache/geode/commit/66f5e976fe62079a6b01fd152b21aece056c3004", "message": "GEODE-7812: Stripped down fix", "committedDate": "2020-05-07T22:48:51Z", "type": "commit"}, {"oid": "af9234da279334d8dee9fc34c3b253db216109db", "url": "https://github.com/apache/geode/commit/af9234da279334d8dee9fc34c3b253db216109db", "message": "GEODE-7812: Cleanup", "committedDate": "2020-05-08T16:19:00Z", "type": "commit"}, {"oid": "86c40999545ea657e087ae81b9827a2df9e804bd", "url": "https://github.com/apache/geode/commit/86c40999545ea657e087ae81b9827a2df9e804bd", "message": "GEODE-7812: Changing batch size.", "committedDate": "2020-05-08T18:21:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM1NTE5Nw==", "url": "https://github.com/apache/geode/pull/5076#discussion_r422355197", "bodyText": "It could so happen the number of buckets on this server could be less than 30; making putAll to success, changing it to less number will help.", "author": "agingade", "createdAt": "2020-05-08T20:23:55Z", "path": "geode-cq/src/distributedTest/java/org/apache/geode/internal/cache/PutAllClientServerDistributedTest.java", "diffHunk": "@@ -2305,24 +2300,21 @@ public void testEventIdMisorderInPRSingleHop() {\n     myRegion.getAttributesMutator().addCacheListener(new CountingCacheListener<>(clientCounter));\n     myRegion.registerInterest(\"ALL_KEYS\");\n \n+    // server1 and server2 will closeCache after created 10 keys\n     // server1 add slow listener\n     server1.invoke(() -> {\n       Region<String, TickerData> region = getCache().getRegion(regionName);\n       region.getAttributesMutator()\n           .addCacheListener(new SlowCountingCacheListener<>(new Action<>(Operation.CREATE,\n-              creates -> executorServiceRule.submit(() -> {\n-                closeCacheConditionally(creates, 10);\n-              }))));\n+              creates -> closeCacheConditionally(creates, 10))));\n     });\n \n     // server2 add slow listener\n     server2.invoke(() -> {\n       Region<String, TickerData> region = getCache().getRegion(regionName);\n       region.getAttributesMutator()\n           .addCacheListener(new SlowCountingCacheListener<>(new Action<>(Operation.CREATE,\n-              creates -> executorServiceRule.submit(() -> {\n-                closeCacheConditionally(creates, 10);\n-              }))));\n+              creates -> closeCacheConditionally(creates, 30))));", "originalCommit": "af9234da279334d8dee9fc34c3b253db216109db", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}