{"pr_number": 5204, "pr_title": "GEODE-8158: enhance LocalHostUtil to support anyLocalAddress", "pr_createdAt": "2020-06-03T00:44:45Z", "pr_url": "https://github.com/apache/geode/pull/5204", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDU3MzQ1Ng==", "url": "https://github.com/apache/geode/pull/5204#discussion_r434573456", "bodyText": "Should we create a Jira for this?", "author": "sabbey37", "createdAt": "2020-06-03T13:39:25Z", "path": "geode-redis/src/integrationTest/java/org/apache/geode/redis/general/ShutdownIntegrationTest.java", "diffHunk": "@@ -56,6 +57,7 @@ public void shutdownActuallyShutsDownTheServer() {\n   }\n \n   @Test\n+  @Ignore(\"this test is flaky\")", "originalCommit": "7302920854d9e879e051c26ce99b3fbb86e09a91", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY3NTI2OA==", "url": "https://github.com/apache/geode/pull/5204#discussion_r434675268", "bodyText": "I think I figured out why this test was still flaky. I removed this ignore and added a fix for the flakiness in: 823cf5a", "author": "dschneider-pivotal", "createdAt": "2020-06-03T15:56:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDU3MzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDczNTYwOA==", "url": "https://github.com/apache/geode/pull/5204#discussion_r434735608", "bodyText": "Good find!", "author": "jdeppe-pivotal", "createdAt": "2020-06-03T17:28:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDU3MzQ1Ng=="}], "type": "inlineReview", "revised_code": {"commit": "3ee4de4bb64dd725aaf8e1850ecd7eb210eb1606", "chunk": "diff --git a/geode-redis/src/integrationTest/java/org/apache/geode/redis/general/ShutdownIntegrationTest.java b/geode-redis/src/integrationTest/java/org/apache/geode/redis/general/ShutdownIntegrationTest.java\nindex 97d238ceeb..ce08e05772 100644\n--- a/geode-redis/src/integrationTest/java/org/apache/geode/redis/general/ShutdownIntegrationTest.java\n+++ b/geode-redis/src/integrationTest/java/org/apache/geode/redis/general/ShutdownIntegrationTest.java\n\n@@ -57,22 +56,16 @@ public class ShutdownIntegrationTest {\n   }\n \n   @Test\n-  @Ignore(\"this test is flaky\")\n   public void shutdownIsDisabled_whenOnlySupportedCommandsAreAllowed() {\n     server.getServer().setAllowUnsupportedCommands(false);\n \n     // Unfortunately Jedis' shutdown() doesn't seem to throw a JedisDataException when the command\n     // returns an error.\n-    try {\n-      jedis.shutdown();\n-    } catch (JedisConnectionException ignore) {\n-      // Sometimes it throws sometimes it does not.\n-    }\n+    jedis.shutdown();\n \n     // the old jedis client may be closed by shutdown even though disabled on server\n \n     Jedis jedis2 = new Jedis(\"localhost\", server.getPort(), REDIS_CLIENT_TIMEOUT);\n-    // the following keys intermittently fails with a SocketTimeoutException\n     assertThat(jedis2.keys(\"*\")).isEmpty();\n     jedis2.close();\n   }\n"}}, {"oid": "3ee4de4bb64dd725aaf8e1850ecd7eb210eb1606", "url": "https://github.com/apache/geode/commit/3ee4de4bb64dd725aaf8e1850ecd7eb210eb1606", "message": "spotless", "committedDate": "2020-06-03T17:00:32Z", "type": "forcePushed"}, {"oid": "3dee3f7d6a8a09fc98e07140dddb7f2a53980dc8", "url": "https://github.com/apache/geode/commit/3dee3f7d6a8a09fc98e07140dddb7f2a53980dc8", "message": "spotless", "committedDate": "2020-06-03T20:07:26Z", "type": "forcePushed"}, {"oid": "21ed7a5715d7f0609d8c911a827469120c9df9c4", "url": "https://github.com/apache/geode/commit/21ed7a5715d7f0609d8c911a827469120c9df9c4", "message": "Enhanced LocalHostUtil to support anyLocalAddress.\nChanged redis to have its default bind address to be anyLocalAddress instead of a single local address.", "committedDate": "2020-06-03T23:12:48Z", "type": "commit"}, {"oid": "21ed7a5715d7f0609d8c911a827469120c9df9c4", "url": "https://github.com/apache/geode/commit/21ed7a5715d7f0609d8c911a827469120c9df9c4", "message": "Enhanced LocalHostUtil to support anyLocalAddress.\nChanged redis to have its default bind address to be anyLocalAddress instead of a single local address.", "committedDate": "2020-06-03T23:12:48Z", "type": "forcePushed"}]}