{"pr_number": 4767, "pr_title": "GEODE-7842: Improve concurrent region creation", "pr_createdAt": "2020-03-03T22:43:00Z", "pr_url": "https://github.com/apache/geode/pull/4767", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM3Nzg2Ng==", "url": "https://github.com/apache/geode/pull/4767#discussion_r387377866", "bodyText": "Remove the duplicate code block that starts at line 69. Instead of checking before creating the region that it exists and then also handling it here; just handle it here (in the new exception catch).\nAlso add a unit test for this class that tests this new code path.", "author": "dschneider-pivotal", "createdAt": "2020-03-04T00:36:26Z", "path": "geode-gfsh/src/main/java/org/apache/geode/management/internal/cli/functions/RegionCreateFunction.java", "diffHunk": "@@ -99,10 +99,18 @@ public void execute(FunctionContext context) {\n     } catch (IllegalArgumentException e) {\n       resultSender.lastResult(handleException(memberNameOrId, e.getMessage(), e));\n     } catch (RegionExistsException e) {\n-      String exceptionMsg =\n-          CliStrings.format(CliStrings.CREATE_REGION__MSG__REGION_PATH_0_ALREADY_EXISTS_ON_1,\n-              regionCreateArgs.getRegionPath(), memberNameOrId);\n-      resultSender.lastResult(handleException(memberNameOrId, exceptionMsg, e));\n+      if (regionCreateArgs.isIfNotExists()) {", "originalCommit": "c8ad371004ed7713d7357afd5474648b6750c2c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzgxMzE2NQ==", "url": "https://github.com/apache/geode/pull/4767#discussion_r387813165", "bodyText": "Thanks for the suggestion. I've done that and added a unit test.", "author": "jdeppe-pivotal", "createdAt": "2020-03-04T17:16:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM3Nzg2Ng=="}], "type": "inlineReview", "revised_code": null}, {"oid": "1be123362e52735020d0b17987db20b1d0407f50", "url": "https://github.com/apache/geode/commit/1be123362e52735020d0b17987db20b1d0407f50", "message": "GEODE-7842: Improve concurrent region creation", "committedDate": "2020-03-04T16:41:20Z", "type": "commit"}, {"oid": "1be123362e52735020d0b17987db20b1d0407f50", "url": "https://github.com/apache/geode/commit/1be123362e52735020d0b17987db20b1d0407f50", "message": "GEODE-7842: Improve concurrent region creation", "committedDate": "2020-03-04T16:41:20Z", "type": "forcePushed"}, {"oid": "2c8ba0f01d2aef4f919105009bec9d53d7a4e40b", "url": "https://github.com/apache/geode/commit/2c8ba0f01d2aef4f919105009bec9d53d7a4e40b", "message": "Review updates", "committedDate": "2020-03-04T17:57:00Z", "type": "commit"}]}