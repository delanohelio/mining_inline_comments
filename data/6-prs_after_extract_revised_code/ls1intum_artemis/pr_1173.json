{"pr_number": 1173, "pr_title": "Rename modeling exercise server routes to follow REST guidelines", "pr_createdAt": "2020-01-06T22:37:27Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1173", "timeline": [{"oid": "f995231b5d81b862dfa39fb6defa0529d2b673bb", "url": "https://github.com/ls1intum/Artemis/commit/f995231b5d81b862dfa39fb6defa0529d2b673bb", "message": "Change modeling-editor to latest-submission route", "committedDate": "2020-01-06T22:10:23Z", "type": "commit"}, {"oid": "bf1cb45e499552064e3958749e0757b5a057c839", "url": "https://github.com/ls1intum/Artemis/commit/bf1cb45e499552064e3958749e0757b5a057c839", "message": "Save assessment route to end with assessment and not feedback", "committedDate": "2020-01-06T22:19:49Z", "type": "commit"}, {"oid": "2d2f69af0288d765a04f8f9aa81b7ba9867fa60f", "url": "https://github.com/ls1intum/Artemis/commit/2d2f69af0288d765a04f8f9aa81b7ba9867fa60f", "message": "Rename GET modeling example assessment route", "committedDate": "2020-01-06T22:24:19Z", "type": "commit"}, {"oid": "8a610b92d387e598274ae52d23468df1bc07c27c", "url": "https://github.com/ls1intum/Artemis/commit/8a610b92d387e598274ae52d23468df1bc07c27c", "message": "Rename GET Example Modeling Assessment", "committedDate": "2020-01-06T22:31:46Z", "type": "commit"}, {"oid": "6a17e5a4fd9b82f51b112ed030ede9fb0f903404", "url": "https://github.com/ls1intum/Artemis/commit/6a17e5a4fd9b82f51b112ed030ede9fb0f903404", "message": "Change PUT update modeling exercise", "committedDate": "2020-01-06T23:11:59Z", "type": "commit"}, {"oid": "7bcc2458027986f543980f88aaaa5786603168fc", "url": "https://github.com/ls1intum/Artemis/commit/7bcc2458027986f543980f88aaaa5786603168fc", "message": "Correct test method fake", "committedDate": "2020-01-14T07:39:24Z", "type": "commit"}, {"oid": "b8d81c302e0094f000e089fda43b93387a2a4257", "url": "https://github.com/ls1intum/Artemis/commit/b8d81c302e0094f000e089fda43b93387a2a4257", "message": "Fix build error", "committedDate": "2020-01-14T08:18:16Z", "type": "commit"}, {"oid": "bcce2a0dbb031da72b4921de993acd49d4f5ff57", "url": "https://github.com/ls1intum/Artemis/commit/bcce2a0dbb031da72b4921de993acd49d4f5ff57", "message": "Merge branch 'develop' into feature/modeling-route-rename\n\n# Conflicts:\n#\tsrc/test/java/de/tum/in/www1/artemis/ModelingSubmissionIntegrationTest.java", "committedDate": "2020-01-28T06:56:20Z", "type": "commit"}, {"oid": "1e05771b70bd7335a4b3bb8b871c4c8c0232bece", "url": "https://github.com/ls1intum/Artemis/commit/1e05771b70bd7335a4b3bb8b871c4c8c0232bece", "message": "Fixed server tests", "committedDate": "2020-01-28T07:10:03Z", "type": "commit"}, {"oid": "ebabbe1986b7ed5780d0984e92ff352d0ee9e1ef", "url": "https://github.com/ls1intum/Artemis/commit/ebabbe1986b7ed5780d0984e92ff352d0ee9e1ef", "message": "Fix modeling exercise tests", "committedDate": "2020-01-28T07:50:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4NTM2MA==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r371685360", "bodyText": "Why is the entity id a path variable here? As far as I can see it's normally not included explicitly in the path for our PUT endpoints. Is there a specific reason why it's needed here?", "author": "madwau", "createdAt": "2020-01-28T09:21:16Z", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java", "diffHunk": "@@ -116,17 +116,18 @@ public ModelingExerciseResource(ModelingExerciseRepository modelingExerciseRepos\n      * PUT /modeling-exercises : Updates an existing modelingExercise.\n      *\n      * @param modelingExercise the modelingExercise to update\n+     * @param exerciseId the id of the exercise\n      * @param notificationText the text shown to students\n      * @return the ResponseEntity with status 200 (OK) and with body the updated modelingExercise, or with status 400 (Bad Request) if the modelingExercise is not valid, or with\n      *         status 500 (Internal Server Error) if the modelingExercise couldn't be updated\n      * @throws URISyntaxException if the Location URI syntax is incorrect\n      */\n-    @PutMapping(\"/modeling-exercises\")\n+    @PutMapping(\"/modeling-exercises/{exerciseId}\")", "originalCommit": "ebabbe1986b7ed5780d0984e92ff352d0ee9e1ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTcwNDY2NA==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r371704664", "bodyText": "The main reason is to conform to the standards defined for REST endpoints. PUT endpoints should always include the entity id. I did couple of changes to make it clear that we need it in the code. Now we also check if the modeling exercise exists in the database prior to storing update modeling exercise", "author": "maxr96", "createdAt": "2020-01-28T09:58:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4NTM2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTcxMzUzMA==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r371713530", "bodyText": "Oh but then the behavior of the endpoint has been changed by the refactoring since it could be used before for both creating and updating whereas now it can only be used for updating. Did you check if all current usages are still valid with the new behavior?", "author": "madwau", "createdAt": "2020-01-28T10:15:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4NTM2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg3NjY2NQ==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r371876665", "bodyText": "Yes, I checked that the creation and updating of the modeling exercise works properly. I also decided to change the update for the modeling submission. This endpoint is a bit more dangerous so I will still have to test it.", "author": "maxr96", "createdAt": "2020-01-28T15:34:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4NTM2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1NzY4OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r373857689", "bodyText": "UPDATE\nFinished with the testing. Can you check it now?", "author": "maxr96", "createdAt": "2020-02-02T16:21:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4NTM2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIwNjIyOA==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r393206228", "bodyText": "This makes our whole REST API inconsistent. I think we should revert this change!", "author": "krusche", "createdAt": "2020-03-16T17:49:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4NTM2MA=="}], "type": "inlineReview", "revised_code": {"commit": "97f3a0dfd62221462c264641f7a1d1f2c3086a90", "chunk": "diff --git a/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java b/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java\nindex 9b4d73c2b7..21c378b941 100644\n--- a/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java\n+++ b/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java\n\n@@ -127,15 +122,17 @@ public class ModelingExerciseResource {\n     public ResponseEntity<ModelingExercise> updateModelingExercise(@PathVariable Long exerciseId, @RequestBody ModelingExercise modelingExercise,\n             @RequestParam(value = \"notificationText\", required = false) String notificationText) throws URISyntaxException {\n         log.debug(\"REST request to update ModelingExercise : {}\", modelingExercise);\n-        if (exerciseId == null) {\n-            return createModelingExercise(modelingExercise);\n-        }\n \n         ResponseEntity<ModelingExercise> responseFailure = checkModelingExercise(modelingExercise);\n         if (responseFailure != null) {\n             return responseFailure;\n         }\n \n+        // Check that the modeling exercise id is correct\n+        if (!modelingExerciseRepository.existsById(exerciseId) || !exerciseId.equals(modelingExercise.getId())) {\n+            throw new EntityNotFoundException(\"No modeling exercise with the id: \" + exerciseId + \"was found\");\n+        }\n+\n         // As persisting is cascaded for example submissions we have to set the reference to the exercise in the\n         // example submissions. Otherwise the connection between exercise and example submissions would be lost.\n         if (modelingExercise.getExampleSubmissions() != null) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4NjkzNg==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r371686936", "bodyText": "The naming seems very generic. Shouldn't modeling be in it somewhere since it only supports modeling exercises?", "author": "madwau", "createdAt": "2020-01-28T09:24:33Z", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java", "diffHunk": "@@ -323,9 +323,9 @@ else if (!authCheckService.isAtLeastInstructorForExercise(exercise)) {\n      * @param participationId the participationId for which to find the submission and data for the modeling editor\n      * @return the ResponseEntity with the submission as body\n      */\n-    @GetMapping(\"/modeling-editor/{participationId}\")\n+    @GetMapping(\"/participations/{participationId}/latest-submission\")", "originalCommit": "ebabbe1986b7ed5780d0984e92ff352d0ee9e1ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY5NDk3NA==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r371694974", "bodyText": "True. Missed it somehow. I renamed it to latest-modeling-submission", "author": "maxr96", "createdAt": "2020-01-28T09:40:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4NjkzNg=="}], "type": "inlineReview", "revised_code": {"commit": "a8c7121b52c043f47d038256b3e213c66a7b0ffd", "chunk": "diff --git a/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java b/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java\nindex ad1b7ea9c0..fa7328d621 100644\n--- a/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java\n+++ b/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java\n\n@@ -323,7 +323,7 @@ public class ModelingSubmissionResource {\n      * @param participationId the participationId for which to find the submission and data for the modeling editor\n      * @return the ResponseEntity with the submission as body\n      */\n-    @GetMapping(\"/participations/{participationId}/latest-submission\")\n+    @GetMapping(\"/participations/{participationId}/latest-modeling-submission\")\n     @PreAuthorize(\"hasAnyRole('USER', 'TA', 'INSTRUCTOR', 'ADMIN')\")\n     public ResponseEntity<ModelingSubmission> getLatestSubmissionForModelingEditor(@PathVariable Long participationId) {\n         StudentParticipation participation = participationService.findOneWithEagerSubmissionsAndResults(participationId);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4ODE0Nw==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r371688147", "bodyText": "The comment is no longer relevant.", "author": "madwau", "createdAt": "2020-01-28T09:27:05Z", "path": "src/test/java/de/tum/in/www1/artemis/ModelingExerciseIntegrationTest.java", "diffHunk": "@@ -117,15 +117,16 @@ public void testCreateModelingExercise_asInstructor() throws Exception {\n     public void testUpdateModelingExercise_asInstructor() throws Exception {\n         ModelingExercise modelingExercise = modelingExerciseUtilService.createModelingExercise(classExercise.getCourse().getId());\n         // The PUT request basically forwards to POST in case the modeling exercise id is not yet set.", "originalCommit": "ebabbe1986b7ed5780d0984e92ff352d0ee9e1ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgzNTU0NQ==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r373835545", "bodyText": "Good catch!", "author": "maxr96", "createdAt": "2020-02-02T10:38:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY4ODE0Nw=="}], "type": "inlineReview", "revised_code": {"commit": "a74922ad1ef998d8f63a53fcc83c26e05787a28b", "chunk": "diff --git a/src/test/java/de/tum/in/www1/artemis/ModelingExerciseIntegrationTest.java b/src/test/java/de/tum/in/www1/artemis/ModelingExerciseIntegrationTest.java\nindex 4a284d9d97..5fafabe860 100644\n--- a/src/test/java/de/tum/in/www1/artemis/ModelingExerciseIntegrationTest.java\n+++ b/src/test/java/de/tum/in/www1/artemis/ModelingExerciseIntegrationTest.java\n\n@@ -116,7 +116,6 @@ public class ModelingExerciseIntegrationTest extends AbstractSpringIntegrationTe\n     @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n     public void testUpdateModelingExercise_asInstructor() throws Exception {\n         ModelingExercise modelingExercise = modelingExerciseUtilService.createModelingExercise(classExercise.getCourse().getId());\n-        // The PUT request basically forwards to POST in case the modeling exercise id is not yet set.\n         ModelingExercise createdModelingExercise = request.postWithResponseBody(\"/api/modeling-exercises\", modelingExercise, ModelingExercise.class, HttpStatus.CREATED);\n \n         ModelingExercise modelingExerciseWithSubmission = modelingExerciseUtilService.addExampleSubmission(createdModelingExercise);\n"}}, {"oid": "a8c7121b52c043f47d038256b3e213c66a7b0ffd", "url": "https://github.com/ls1intum/Artemis/commit/a8c7121b52c043f47d038256b3e213c66a7b0ffd", "message": "Emphasize that latest submission is for the modeling exercise", "committedDate": "2020-01-28T09:38:06Z", "type": "commit"}, {"oid": "97f3a0dfd62221462c264641f7a1d1f2c3086a90", "url": "https://github.com/ls1intum/Artemis/commit/97f3a0dfd62221462c264641f7a1d1f2c3086a90", "message": "Check if the exercise id for updating modeling exercise is correct", "committedDate": "2020-01-28T09:58:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTcxNDM3OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r371714379", "bodyText": "I think the second condition should have a different error message since that could be pretty confusing otherwise if the exercise actually exists but there is just an id mismatch.", "author": "madwau", "createdAt": "2020-01-28T10:16:57Z", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java", "diffHunk": "@@ -116,25 +111,28 @@ public ModelingExerciseResource(ModelingExerciseRepository modelingExerciseRepos\n      * PUT /modeling-exercises : Updates an existing modelingExercise.\n      *\n      * @param modelingExercise the modelingExercise to update\n+     * @param exerciseId the id of the exercise\n      * @param notificationText the text shown to students\n      * @return the ResponseEntity with status 200 (OK) and with body the updated modelingExercise, or with status 400 (Bad Request) if the modelingExercise is not valid, or with\n      *         status 500 (Internal Server Error) if the modelingExercise couldn't be updated\n      * @throws URISyntaxException if the Location URI syntax is incorrect\n      */\n-    @PutMapping(\"/modeling-exercises\")\n+    @PutMapping(\"/modeling-exercises/{exerciseId}\")\n     @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n-    public ResponseEntity<ModelingExercise> updateModelingExercise(@RequestBody ModelingExercise modelingExercise,\n+    public ResponseEntity<ModelingExercise> updateModelingExercise(@PathVariable Long exerciseId, @RequestBody ModelingExercise modelingExercise,\n             @RequestParam(value = \"notificationText\", required = false) String notificationText) throws URISyntaxException {\n         log.debug(\"REST request to update ModelingExercise : {}\", modelingExercise);\n-        if (modelingExercise.getId() == null) {\n-            return createModelingExercise(modelingExercise);\n-        }\n \n         ResponseEntity<ModelingExercise> responseFailure = checkModelingExercise(modelingExercise);\n         if (responseFailure != null) {\n             return responseFailure;\n         }\n \n+        // Check that the modeling exercise id is correct\n+        if (!modelingExerciseRepository.existsById(exerciseId) || !exerciseId.equals(modelingExercise.getId())) {", "originalCommit": "97f3a0dfd62221462c264641f7a1d1f2c3086a90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg3NTc3NA==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r371875774", "bodyText": "You are right I split it into two checks. First is done on the ModelingExerciseService and second one here. The second one now says The updated modeling exercise doesn't match the given id if failed.", "author": "maxr96", "createdAt": "2020-01-28T15:32:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTcxNDM3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "170f42934eec7d10fbce6740417bd22ed90176c5", "chunk": "diff --git a/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java b/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java\nindex 21c378b941..eb02b9e57b 100644\n--- a/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java\n+++ b/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingExerciseResource.java\n\n@@ -119,7 +119,7 @@ public class ModelingExerciseResource {\n      */\n     @PutMapping(\"/modeling-exercises/{exerciseId}\")\n     @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n-    public ResponseEntity<ModelingExercise> updateModelingExercise(@PathVariable Long exerciseId, @RequestBody ModelingExercise modelingExercise,\n+    public ResponseEntity<ModelingExercise> updateModelingExercise(@PathVariable long exerciseId, @RequestBody ModelingExercise modelingExercise,\n             @RequestParam(value = \"notificationText\", required = false) String notificationText) throws URISyntaxException {\n         log.debug(\"REST request to update ModelingExercise : {}\", modelingExercise);\n \n"}}, {"oid": "170f42934eec7d10fbce6740417bd22ed90176c5", "url": "https://github.com/ls1intum/Artemis/commit/170f42934eec7d10fbce6740417bd22ed90176c5", "message": "Improve the checks for PUT endpoints for modeling submission and exercise", "committedDate": "2020-01-28T10:55:10Z", "type": "commit"}, {"oid": "5806084ef3a3082eccb0b0c7a8fef606cdeaacb7", "url": "https://github.com/ls1intum/Artemis/commit/5806084ef3a3082eccb0b0c7a8fef606cdeaacb7", "message": "Fixed broken tests", "committedDate": "2020-01-28T15:17:42Z", "type": "commit"}, {"oid": "ea7bb3386684666ddced1ae6c7b7d9250ed2b35d", "url": "https://github.com/ls1intum/Artemis/commit/ea7bb3386684666ddced1ae6c7b7d9250ed2b35d", "message": "Merge branch 'develop' into feature/modeling-route-rename\n\n# Conflicts:\n#\tsrc/main/java/de/tum/in/www1/artemis/web/rest/ModelingAssessmentResource.java\n#\tsrc/test/java/de/tum/in/www1/artemis/ModelingAssessmentIntegrationTest.java", "committedDate": "2020-01-28T15:28:33Z", "type": "commit"}, {"oid": "cc7015e51029c0db8adfd5b3cb4328e553a9d65c", "url": "https://github.com/ls1intum/Artemis/commit/cc7015e51029c0db8adfd5b3cb4328e553a9d65c", "message": "Fix wrong route in tests", "committedDate": "2020-01-28T15:38:33Z", "type": "commit"}, {"oid": "949665dec25dae24fc6698566ccc39f826084c0c", "url": "https://github.com/ls1intum/Artemis/commit/949665dec25dae24fc6698566ccc39f826084c0c", "message": "Undo unrelated changes", "committedDate": "2020-01-29T19:51:27Z", "type": "commit"}, {"oid": "ea8f02f8a5cf4560736aa4f0a38602453558eb40", "url": "https://github.com/ls1intum/Artemis/commit/ea8f02f8a5cf4560736aa4f0a38602453558eb40", "message": "Use primitive types", "committedDate": "2020-01-29T20:38:05Z", "type": "commit"}, {"oid": "7661c4e35b8186fd2be522eabf1111ddc1b46831", "url": "https://github.com/ls1intum/Artemis/commit/7661c4e35b8186fd2be522eabf1111ddc1b46831", "message": "Merge branch 'develop' into feature/modeling-route-rename", "committedDate": "2020-02-02T10:18:56Z", "type": "commit"}, {"oid": "91f04a6ce84d9bb4c4c8f41f67cea5d8576b7d9b", "url": "https://github.com/ls1intum/Artemis/commit/91f04a6ce84d9bb4c4c8f41f67cea5d8576b7d9b", "message": "Fix not working modeling submission update", "committedDate": "2020-02-02T10:34:38Z", "type": "commit"}, {"oid": "a74922ad1ef998d8f63a53fcc83c26e05787a28b", "url": "https://github.com/ls1intum/Artemis/commit/a74922ad1ef998d8f63a53fcc83c26e05787a28b", "message": "Remove comment that is not relevant anymore", "committedDate": "2020-02-02T10:38:33Z", "type": "commit"}, {"oid": "1a23be3037746520f40967e06fcb7ff4af589397", "url": "https://github.com/ls1intum/Artemis/commit/1a23be3037746520f40967e06fcb7ff4af589397", "message": "Undo auto code foramtting", "committedDate": "2020-02-02T10:42:55Z", "type": "commit"}, {"oid": "cc812591a5d744e9a471232ad1bbf03c25b1915b", "url": "https://github.com/ls1intum/Artemis/commit/cc812591a5d744e9a471232ad1bbf03c25b1915b", "message": "Fix get example assessment test", "committedDate": "2020-02-02T10:56:46Z", "type": "commit"}, {"oid": "18180202be119f440930b9d825d11a1dd88619b5", "url": "https://github.com/ls1intum/Artemis/commit/18180202be119f440930b9d825d11a1dd88619b5", "message": "Merge branch 'develop' into feature/modeling-route-rename", "committedDate": "2020-02-07T15:39:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg2Nzc0Nw==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r373867747", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void existsById(long exerciseId) {\n          \n          \n            \n                public void validateExerciseIdExists(long exerciseId) {", "author": "ungaralex", "createdAt": "2020-02-02T19:08:20Z", "path": "src/main/java/de/tum/in/www1/artemis/service/ModelingExerciseService.java", "diffHunk": "@@ -29,4 +29,10 @@ public ModelingExercise findOne(Long exerciseId) {\n         log.debug(\"Request to get Modeling Exercise : {}\", exerciseId);\n         return modelingExerciseRepository.findById(exerciseId).orElseThrow(() -> new EntityNotFoundException(\"Exercise with id: \\\"\" + exerciseId + \"\\\" does not exist\"));\n     }\n+\n+    public void existsById(long exerciseId) {", "originalCommit": "cc812591a5d744e9a471232ad1bbf03c25b1915b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE1MzY1MA==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r386153650", "bodyText": "Applied", "author": "maxr96", "createdAt": "2020-03-01T23:48:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg2Nzc0Nw=="}], "type": "inlineReview", "revised_code": {"commit": "f6acab2996413d39a6219d029ad6cd090622173d", "chunk": "diff --git a/src/main/java/de/tum/in/www1/artemis/service/ModelingExerciseService.java b/src/main/java/de/tum/in/www1/artemis/service/ModelingExerciseService.java\nindex b4468cfac8..497a5cb78f 100644\n--- a/src/main/java/de/tum/in/www1/artemis/service/ModelingExerciseService.java\n+++ b/src/main/java/de/tum/in/www1/artemis/service/ModelingExerciseService.java\n\n@@ -30,7 +30,7 @@ public class ModelingExerciseService {\n         return modelingExerciseRepository.findById(exerciseId).orElseThrow(() -> new EntityNotFoundException(\"Exercise with id: \\\"\" + exerciseId + \"\\\" does not exist\"));\n     }\n \n-    public void existsById(long exerciseId) {\n+    public void validateExerciseIdExists(long exerciseId) {\n         if (!modelingExerciseRepository.existsById(exerciseId)) {\n             throw new EntityNotFoundException(\"Modeling exercise with id \\\"\" + exerciseId + \"\\\" does not exist\");\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg2Nzg0MA==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r373867840", "bodyText": "Same suggestions as my other comment. Since we throw an exception in these cases and don't return any booleans, I think the other name is more expressive.", "author": "ungaralex", "createdAt": "2020-02-02T19:10:02Z", "path": "src/main/java/de/tum/in/www1/artemis/service/ModelingSubmissionService.java", "diffHunk": "@@ -386,4 +386,10 @@ public long countSubmissionsToAssessByCourseId(Long courseId) {\n     public long countSubmissionsToAssessByExerciseId(Long exerciseId) {\n         return modelingSubmissionRepository.countByExerciseIdSubmittedBeforeDueDate(exerciseId);\n     }\n+\n+    public void existsById(long submissionId) {", "originalCommit": "cc812591a5d744e9a471232ad1bbf03c25b1915b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE1MzcxMg==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r386153712", "bodyText": "Thank you for the suggestion. This definitely makes more sense", "author": "maxr96", "createdAt": "2020-03-01T23:48:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg2Nzg0MA=="}], "type": "inlineReview", "revised_code": {"commit": "f6acab2996413d39a6219d029ad6cd090622173d", "chunk": "diff --git a/src/main/java/de/tum/in/www1/artemis/service/ModelingSubmissionService.java b/src/main/java/de/tum/in/www1/artemis/service/ModelingSubmissionService.java\nindex 4aef6c3c9b..895f807bfd 100644\n--- a/src/main/java/de/tum/in/www1/artemis/service/ModelingSubmissionService.java\n+++ b/src/main/java/de/tum/in/www1/artemis/service/ModelingSubmissionService.java\n\n@@ -387,7 +387,7 @@ public class ModelingSubmissionService extends SubmissionService {\n         return modelingSubmissionRepository.countByExerciseIdSubmittedBeforeDueDate(exerciseId);\n     }\n \n-    public void existsById(long submissionId) {\n+    public void validateExerciseIdExists(long submissionId) {\n         if (!modelingSubmissionRepository.existsById(submissionId)) {\n             throw new EntityNotFoundException(\"Modeling submission with id \\\"\" + submissionId + \"\\\" does not exist\");\n         }\n"}}, {"oid": "937e03a48deaf32f5f5ad857dc6179a612b46769", "url": "https://github.com/ls1intum/Artemis/commit/937e03a48deaf32f5f5ad857dc6179a612b46769", "message": "Merged develop", "committedDate": "2020-03-01T18:42:05Z", "type": "commit"}, {"oid": "41fae2bdef1a326aa004484856c04cbd2c27d319", "url": "https://github.com/ls1intum/Artemis/commit/41fae2bdef1a326aa004484856c04cbd2c27d319", "message": "More test cases for Modeling Exercise Resource", "committedDate": "2020-03-01T23:33:30Z", "type": "commit"}, {"oid": "5d2b2aa4a42dfd8c6d8c7c043e38b17b169a3a4c", "url": "https://github.com/ls1intum/Artemis/commit/5d2b2aa4a42dfd8c6d8c7c043e38b17b169a3a4c", "message": "Merge remote-tracking branch 'origin/feature/modeling-route-rename' into feature/modeling-route-rename", "committedDate": "2020-03-01T23:33:50Z", "type": "commit"}, {"oid": "a01d878d6d7e173ccd7ba28a30b7e5265eed917e", "url": "https://github.com/ls1intum/Artemis/commit/a01d878d6d7e173ccd7ba28a30b7e5265eed917e", "message": "More test cases for Modeling Submission Resource", "committedDate": "2020-03-01T23:45:48Z", "type": "commit"}, {"oid": "f6acab2996413d39a6219d029ad6cd090622173d", "url": "https://github.com/ls1intum/Artemis/commit/f6acab2996413d39a6219d029ad6cd090622173d", "message": "Apply comments from code review", "committedDate": "2020-03-01T23:48:05Z", "type": "commit"}, {"oid": "76c4a61be4be1168dcc0714b607230619fa421a4", "url": "https://github.com/ls1intum/Artemis/commit/76c4a61be4be1168dcc0714b607230619fa421a4", "message": "Revert yarn lock change", "committedDate": "2020-03-01T23:50:53Z", "type": "commit"}, {"oid": "367ee54abbc622d4a1d2e068f17ea4243f03829c", "url": "https://github.com/ls1intum/Artemis/commit/367ee54abbc622d4a1d2e068f17ea4243f03829c", "message": "Added client tests to modeling submission component", "committedDate": "2020-03-02T00:57:27Z", "type": "commit"}, {"oid": "bfa0012940eece3f08b65d5cd4f77fda09f478a1", "url": "https://github.com/ls1intum/Artemis/commit/bfa0012940eece3f08b65d5cd4f77fda09f478a1", "message": "100% for modeling exercise resource", "committedDate": "2020-03-04T21:06:58Z", "type": "commit"}, {"oid": "a2f7ab7958a4cf6f95e1fe0ba650fd546e302bcf", "url": "https://github.com/ls1intum/Artemis/commit/a2f7ab7958a4cf6f95e1fe0ba650fd546e302bcf", "message": "100% for modeling submission resource", "committedDate": "2020-03-04T21:41:03Z", "type": "commit"}, {"oid": "da8bfbcf8cc79a65630b606e07ad2e3f090e7abb", "url": "https://github.com/ls1intum/Artemis/commit/da8bfbcf8cc79a65630b606e07ad2e3f090e7abb", "message": "99% for modeling assessment resource", "committedDate": "2020-03-04T23:09:31Z", "type": "commit"}, {"oid": "8bcf9fb9432c523fcbaff779df5bab6559f3a33e", "url": "https://github.com/ls1intum/Artemis/commit/8bcf9fb9432c523fcbaff779df5bab6559f3a33e", "message": "Merge branch 'develop' into feature/modeling-route-rename", "committedDate": "2020-03-12T19:16:38Z", "type": "commit"}, {"oid": "1a932707bab422c7c49a87f54b7419f213130908", "url": "https://github.com/ls1intum/Artemis/commit/1a932707bab422c7c49a87f54b7419f213130908", "message": "Merge branch 'develop' into feature/modeling-route-rename", "committedDate": "2020-03-13T14:49:26Z", "type": "commit"}, {"oid": "2771547fafce9ec398c5a65339356557d8706497", "url": "https://github.com/ls1intum/Artemis/commit/2771547fafce9ec398c5a65339356557d8706497", "message": "Merge branch 'develop' into feature/modeling-route-rename\n\n# Conflicts:\n#\tsrc/main/java/de/tum/in/www1/artemis/service/ModelingSubmissionService.java", "committedDate": "2020-03-14T15:53:51Z", "type": "commit"}, {"oid": "c118dfb69d14ebab43511709973d012c9cb954ad", "url": "https://github.com/ls1intum/Artemis/commit/c118dfb69d14ebab43511709973d012c9cb954ad", "message": "Fix modeling example submission and solution routing", "committedDate": "2020-03-14T19:20:31Z", "type": "commit"}, {"oid": "5650265535170ab6dbd7e0052dbee94534d3f79d", "url": "https://github.com/ls1intum/Artemis/commit/5650265535170ab6dbd7e0052dbee94534d3f79d", "message": "Merge branch 'develop' into feature/modeling-route-rename", "committedDate": "2020-03-16T14:16:29Z", "type": "commit"}, {"oid": "a896aa5ea5b3040c9a686c0dbe3c556e43c11161", "url": "https://github.com/ls1intum/Artemis/commit/a896aa5ea5b3040c9a686c0dbe3c556e43c11161", "message": "fix wrong name", "committedDate": "2020-03-16T14:30:31Z", "type": "commit"}, {"oid": "eb0dfff2aaa7fd219a372e06f3ac7718350ac858", "url": "https://github.com/ls1intum/Artemis/commit/eb0dfff2aaa7fd219a372e06f3ac7718350ac858", "message": "Merge branch 'develop' into feature/modeling-route-rename", "committedDate": "2020-03-16T15:08:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIwNjgxNw==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r393206817", "bodyText": "This makes our whole REST API inconsistent. I think we should revert this change!", "author": "krusche", "createdAt": "2020-03-16T17:50:53Z", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java", "diffHunk": "@@ -105,24 +105,29 @@ public ModelingSubmissionResource(ModelingSubmissionService modelingSubmissionSe\n      * submitting modeling submissions. The submit specific handling occurs in the ModelingSubmissionService.save() function.\n      *\n      * @param exerciseId         the id of the exercise for which to init a participation\n+     * @param submissionId       the id of the submission which needs to be updated\n      * @param principal          the current user principal\n      * @param modelingSubmission the modelingSubmission to update\n      * @return the ResponseEntity with status 200 (OK) and with body the updated modelingSubmission, or with status 400 (Bad Request) if the modelingSubmission is not valid, or\n      *         with status 500 (Internal Server Error) if the modelingSubmission couldn't be updated\n      */\n-    @PutMapping(\"/exercises/{exerciseId}/modeling-submissions\")\n+    @PutMapping(\"/exercises/{exerciseId}/modeling-submissions/{submissionId}\")", "originalCommit": "eb0dfff2aaa7fd219a372e06f3ac7718350ac858", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzM3MjEyNw==", "url": "https://github.com/ls1intum/Artemis/pull/1173#discussion_r393372127", "bodyText": "Reverted", "author": "maxr96", "createdAt": "2020-03-16T23:49:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIwNjgxNw=="}], "type": "inlineReview", "revised_code": {"commit": "049ac1bcfec639dfd78cd38c1dc4d15402ce5b6c", "chunk": "diff --git a/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java b/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java\nindex 9ed2bd42e9..be69333328 100644\n--- a/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java\n+++ b/src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java\n\n@@ -105,27 +105,19 @@ public class ModelingSubmissionResource {\n      * submitting modeling submissions. The submit specific handling occurs in the ModelingSubmissionService.save() function.\n      *\n      * @param exerciseId         the id of the exercise for which to init a participation\n-     * @param submissionId       the id of the submission which needs to be updated\n      * @param principal          the current user principal\n      * @param modelingSubmission the modelingSubmission to update\n      * @return the ResponseEntity with status 200 (OK) and with body the updated modelingSubmission, or with status 400 (Bad Request) if the modelingSubmission is not valid, or\n      *         with status 500 (Internal Server Error) if the modelingSubmission couldn't be updated\n      */\n-    @PutMapping(\"/exercises/{exerciseId}/modeling-submissions/{submissionId}\")\n+    @PutMapping(\"/exercises/{exerciseId}/modeling-submissions\")\n     @PreAuthorize(\"hasAnyRole('USER', 'TA', 'INSTRUCTOR', 'ADMIN')\")\n-    public ResponseEntity<ModelingSubmission> updateModelingSubmission(@PathVariable long exerciseId, @PathVariable long submissionId, Principal principal,\n-            @RequestBody ModelingSubmission modelingSubmission) {\n+    public ResponseEntity<ModelingSubmission> updateModelingSubmission(@PathVariable long exerciseId, Principal principal, @RequestBody ModelingSubmission modelingSubmission) {\n         log.debug(\"REST request to update ModelingSubmission : {}\", modelingSubmission.getModel());\n         final ModelingExercise modelingExercise = modelingExerciseService.findOne(exerciseId);\n         final User user = userService.getUserWithGroupsAndAuthorities();\n         checkAuthorization(modelingExercise, user);\n \n-        // Check that the modeling submission id is correct\n-        modelingSubmissionService.validateSubmissionIdExists(submissionId);\n-        if (modelingSubmission.getId() == null || !modelingSubmission.getId().equals(submissionId)) {\n-            throw new EntityNotFoundException(\"The updated modeling submission doesn't match the given id\" + submissionId);\n-        }\n-\n         modelingSubmission = modelingSubmissionService.save(modelingSubmission, modelingExercise, principal.getName());\n         modelingSubmissionService.hideDetails(modelingSubmission, user);\n         return ResponseEntity.ok(modelingSubmission);\n"}}, {"oid": "049ac1bcfec639dfd78cd38c1dc4d15402ce5b6c", "url": "https://github.com/ls1intum/Artemis/commit/049ac1bcfec639dfd78cd38c1dc4d15402ce5b6c", "message": "Revert PUT endpoint changes", "committedDate": "2020-03-16T23:34:24Z", "type": "commit"}, {"oid": "a41a4029c59d21fc9e20e65d7ca491a3811f0385", "url": "https://github.com/ls1intum/Artemis/commit/a41a4029c59d21fc9e20e65d7ca491a3811f0385", "message": "Merge remote-tracking branch 'origin/feature/modeling-route-rename' into feature/modeling-route-rename\n\n# Conflicts:\n#\tsrc/main/java/de/tum/in/www1/artemis/service/ModelingSubmissionService.java\n#\tsrc/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java", "committedDate": "2020-03-16T23:39:41Z", "type": "commit"}, {"oid": "7b63b81c3b79e2023c3888f7710eeb024abfa7f0", "url": "https://github.com/ls1intum/Artemis/commit/7b63b81c3b79e2023c3888f7710eeb024abfa7f0", "message": "Undo redundant change", "committedDate": "2020-03-17T00:33:15Z", "type": "commit"}, {"oid": "f3852a73aaf53b45d1c0b68f78a775d9aba2cafe", "url": "https://github.com/ls1intum/Artemis/commit/f3852a73aaf53b45d1c0b68f78a775d9aba2cafe", "message": "add TODOs for additional submission verification\n\nrevert update -> create removal", "committedDate": "2020-03-17T13:51:19Z", "type": "commit"}, {"oid": "ac63ec10fad1bd2c86179b72c0f10cfa2be72ab2", "url": "https://github.com/ls1intum/Artemis/commit/ac63ec10fad1bd2c86179b72c0f10cfa2be72ab2", "message": "Merge branch 'develop' into feature/modeling-route-rename", "committedDate": "2020-03-17T13:52:11Z", "type": "commit"}]}