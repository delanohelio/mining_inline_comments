{"pr_number": 1263, "pr_title": "No Mocking of Connector Services in Spring Tests", "pr_createdAt": "2020-03-02T11:20:42Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1263", "timeline": [{"oid": "8b53b8924cada79693a5021b68e419babca526a3", "url": "https://github.com/ls1intum/Artemis/commit/8b53b8924cada79693a5021b68e419babca526a3", "message": "Don't mock enablePlan and copyPlan for some Bamboo tests", "committedDate": "2020-02-25T15:35:05Z", "type": "commit"}, {"oid": "835297a00c2dae9bd19c6c65ade081a80b37dc3c", "url": "https://github.com/ls1intum/Artemis/commit/835297a00c2dae9bd19c6c65ade081a80b37dc3c", "message": "Don't mock updateBuildPlan for some Bamboo tests", "committedDate": "2020-02-25T16:37:47Z", "type": "commit"}, {"oid": "c0567095b60ce2057728ba567c81519c242dc31f", "url": "https://github.com/ls1intum/Artemis/commit/c0567095b60ce2057728ba567c81519c242dc31f", "message": "Don't mock Bamboo service in ProgrammingExerciseIntegrationTest", "committedDate": "2020-02-25T17:02:29Z", "type": "commit"}, {"oid": "b4cd9b432ba149b7cd90bb99c878d3837191e049", "url": "https://github.com/ls1intum/Artemis/commit/b4cd9b432ba149b7cd90bb99c878d3837191e049", "message": "Remove connector mocking for participation trigger build", "committedDate": "2020-03-02T11:03:43Z", "type": "commit"}, {"oid": "879ecaef35e4481d9c1b90f6412bfa4bcd0f59d3", "url": "https://github.com/ls1intum/Artemis/commit/879ecaef35e4481d9c1b90f6412bfa4bcd0f59d3", "message": "Remove unnecessary mocks", "committedDate": "2020-03-02T11:09:22Z", "type": "commit"}, {"oid": "cfcd77d82035cbb25f9ad71085d0aa7cf310348b", "url": "https://github.com/ls1intum/Artemis/commit/cfcd77d82035cbb25f9ad71085d0aa7cf310348b", "message": "Remove Bamboo conenctor mocks from ProgrammingExerciseTest", "committedDate": "2020-03-02T11:14:20Z", "type": "commit"}, {"oid": "9d2d95ff2bb38495917ff63fedb53de7d073b2cf", "url": "https://github.com/ls1intum/Artemis/commit/9d2d95ff2bb38495917ff63fedb53de7d073b2cf", "message": "Remove unnecessary Bamboo mocks from ProgrammingSubmissionAndResultIntegrationTest", "committedDate": "2020-03-02T11:17:14Z", "type": "commit"}, {"oid": "702122d45e518bc2ac935fba7683a957d2a72363", "url": "https://github.com/ls1intum/Artemis/commit/702122d45e518bc2ac935fba7683a957d2a72363", "message": "Don't mock Bamboo build result notification\n\nCreate model builder for test result notification", "committedDate": "2020-03-02T13:07:42Z", "type": "commit"}, {"oid": "99c4c1faebe7f393b5709edf079e9295e84ddd32", "url": "https://github.com/ls1intum/Artemis/commit/99c4c1faebe7f393b5709edf079e9295e84ddd32", "message": "Don't mock added webhooks to Bitbucket in Spring tests", "committedDate": "2020-03-02T13:54:57Z", "type": "commit"}, {"oid": "8694a1743de1211623dbc3a30bff8fe55c7e57a4", "url": "https://github.com/ls1intum/Artemis/commit/8694a1743de1211623dbc3a30bff8fe55c7e57a4", "message": "Remove Bitbucket mocks for deleting exercise", "committedDate": "2020-03-02T15:02:08Z", "type": "commit"}, {"oid": "75b09988cac9f224a77fc1628255f9511af20f52", "url": "https://github.com/ls1intum/Artemis/commit/75b09988cac9f224a77fc1628255f9511af20f52", "message": "Remove Bitbucket mocks from ProgrammingExerciseTest.java", "committedDate": "2020-03-02T15:08:53Z", "type": "commit"}, {"oid": "bcd389660844ab7ec6605be05eb66e65a632fc7e", "url": "https://github.com/ls1intum/Artemis/commit/bcd389660844ab7ec6605be05eb66e65a632fc7e", "message": "Remove Bitbucket copy repo mock from ProgrammingExerciseServiceIntegrationTest.java", "committedDate": "2020-03-02T15:24:59Z", "type": "commit"}, {"oid": "fae7765921885bfda6ce1e09efd717018934f545", "url": "https://github.com/ls1intum/Artemis/commit/fae7765921885bfda6ce1e09efd717018934f545", "message": "Remove Bitbucket mocks from ProgrammingExerciseScheduleServiceTest.java", "committedDate": "2020-03-02T15:39:48Z", "type": "commit"}, {"oid": "4489ad79d3e36f0dcd683e25ef47301c405f1b21", "url": "https://github.com/ls1intum/Artemis/commit/4489ad79d3e36f0dcd683e25ef47301c405f1b21", "message": "Fix trigger build server tests (instructor and tutor)", "committedDate": "2020-03-02T15:50:00Z", "type": "commit"}, {"oid": "fdc6c527ec5490b397fff007767f0fbafd6af210", "url": "https://github.com/ls1intum/Artemis/commit/fdc6c527ec5490b397fff007767f0fbafd6af210", "message": "Revert accidental comment removal", "committedDate": "2020-03-02T16:34:12Z", "type": "commit"}, {"oid": "5bf58c5c516ed3c4dfc666b4c690390f4ac01b26", "url": "https://github.com/ls1intum/Artemis/commit/5bf58c5c516ed3c4dfc666b4c690390f4ac01b26", "message": "Remove TODOs", "committedDate": "2020-03-02T16:40:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA0Mzk2MA==", "url": "https://github.com/ls1intum/Artemis/pull/1263#discussion_r387043960", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @SpyBean\n          \n          \n            \n                // please only use this to verify method calls using Mockito. Do not mock methods, instead mock the communication with Bamboo using the corresponding RestTemplate.\n          \n          \n            \n                @SpyBean", "author": "krusche", "createdAt": "2020-03-03T14:12:03Z", "path": "src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java", "diffHunk": "@@ -25,11 +25,9 @@\n     @SpyBean\n     protected LtiService ltiService;\n \n-    // TODO: we should not really mock BambooService, but only the API calls to Bamboo (e.g. based on the used RestTemplate)\n     @SpyBean", "originalCommit": "5bf58c5c516ed3c4dfc666b4c690390f4ac01b26", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e25717b200be18f1676e015c6d23c3eb418586a0", "chunk": "diff --git a/src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java b/src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java\nindex 8c759ea53..9fd21d4fe 100644\n--- a/src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java\n+++ b/src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java\n\n@@ -25,9 +25,11 @@ public abstract class AbstractSpringIntegrationTest {\n     @SpyBean\n     protected LtiService ltiService;\n \n+    // please only use this to verify method calls using Mockito. Do not mock methods, instead mock the communication with Bamboo using the corresponding RestTemplate.\n     @SpyBean\n     protected BambooService continuousIntegrationService;\n \n+    // please only use this to verify method calls using Mockito. Do not mock methods, instead mock the communication with Bitbucket using the corresponding RestTemplate.\n     @SpyBean\n     protected BitbucketService versionControlService;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA0NDE1OA==", "url": "https://github.com/ls1intum/Artemis/pull/1263#discussion_r387044158", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @SpyBean\n          \n          \n            \n                // please only use this to verify method calls using Mockito. Do not mock methods, instead mock the communication with Bitbucket using the corresponding RestTemplate.\n          \n          \n            \n                @SpyBean", "author": "krusche", "createdAt": "2020-03-03T14:12:21Z", "path": "src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java", "diffHunk": "@@ -25,11 +25,9 @@\n     @SpyBean\n     protected LtiService ltiService;\n \n-    // TODO: we should not really mock BambooService, but only the API calls to Bamboo (e.g. based on the used RestTemplate)\n     @SpyBean\n     protected BambooService continuousIntegrationService;\n \n-    // TODO: we should not really mock BitbucketService, but only the API calls to Bitbucket (e.g. based on the used RestTemplate)\n     @SpyBean", "originalCommit": "5bf58c5c516ed3c4dfc666b4c690390f4ac01b26", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e25717b200be18f1676e015c6d23c3eb418586a0", "chunk": "diff --git a/src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java b/src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java\nindex 8c759ea53..9fd21d4fe 100644\n--- a/src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java\n+++ b/src/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationTest.java\n\n@@ -25,9 +25,11 @@ public abstract class AbstractSpringIntegrationTest {\n     @SpyBean\n     protected LtiService ltiService;\n \n+    // please only use this to verify method calls using Mockito. Do not mock methods, instead mock the communication with Bamboo using the corresponding RestTemplate.\n     @SpyBean\n     protected BambooService continuousIntegrationService;\n \n+    // please only use this to verify method calls using Mockito. Do not mock methods, instead mock the communication with Bitbucket using the corresponding RestTemplate.\n     @SpyBean\n     protected BitbucketService versionControlService;\n \n"}}, {"oid": "e25717b200be18f1676e015c6d23c3eb418586a0", "url": "https://github.com/ls1intum/Artemis/commit/e25717b200be18f1676e015c6d23c3eb418586a0", "message": "Apply suggestions from code review", "committedDate": "2020-03-03T14:13:19Z", "type": "commit"}]}