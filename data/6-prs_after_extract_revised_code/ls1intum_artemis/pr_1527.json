{"pr_number": 1527, "pr_title": "Complaints for Team Exercises", "pr_createdAt": "2020-05-27T14:20:41Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1527", "timeline": [{"oid": "e2f693a64bc6d2a556d587d5210ccf3bcb8771af", "url": "https://github.com/ls1intum/Artemis/commit/e2f693a64bc6d2a556d587d5210ccf3bcb8771af", "message": "Initial version of complaints for teams", "committedDate": "2020-05-27T14:05:45Z", "type": "commit"}, {"oid": "5eeca6a462e329122184bd4e93fef70ef28f7b28", "url": "https://github.com/ls1intum/Artemis/commit/5eeca6a462e329122184bd4e93fef70ef28f7b28", "message": "Adapt", "committedDate": "2020-05-27T14:19:41Z", "type": "commit"}, {"oid": "ad14b92d6660fa24eaa1cb1fe38a6f7d9105901f", "url": "https://github.com/ls1intum/Artemis/commit/ad14b92d6660fa24eaa1cb1fe38a6f7d9105901f", "message": "Merge branch 'develop' into feature/team-exercises/complaints", "committedDate": "2020-05-27T14:20:49Z", "type": "commit"}, {"oid": "927f3dbb505f321595e5ef42d72ef6a4b7ce71d1", "url": "https://github.com/ls1intum/Artemis/commit/927f3dbb505f321595e5ef42d72ef6a4b7ce71d1", "message": "Fix method in DatabaseUtilService", "committedDate": "2020-05-27T14:33:16Z", "type": "commit"}, {"oid": "126faf45302bfb0b849831cd1a50ba1624f52aec", "url": "https://github.com/ls1intum/Artemis/commit/126faf45302bfb0b849831cd1a50ba1624f52aec", "message": "Docs", "committedDate": "2020-05-27T14:35:46Z", "type": "commit"}, {"oid": "615d8e12363e4e2dadd3fb0f125fe83092668940", "url": "https://github.com/ls1intum/Artemis/commit/615d8e12363e4e2dadd3fb0f125fe83092668940", "message": "Merge branch 'develop' into feature/team-exercises/complaints", "committedDate": "2020-05-27T15:14:49Z", "type": "commit"}, {"oid": "67e0fe7d3e66de98efd33fb0cce26ee6a41404f8", "url": "https://github.com/ls1intum/Artemis/commit/67e0fe7d3e66de98efd33fb0cce26ee6a41404f8", "message": "Merge branch 'develop' into feature/team-exercises/complaints", "committedDate": "2020-05-27T15:34:35Z", "type": "commit"}, {"oid": "8ee73a17658b2c8cac474adc8f03f6e5556184e0", "url": "https://github.com/ls1intum/Artemis/commit/8ee73a17658b2c8cac474adc8f03f6e5556184e0", "message": "Fix error in repo", "committedDate": "2020-05-27T15:54:06Z", "type": "commit"}, {"oid": "5626d82c94edbc1d1bf8c099485b5e67b0636b5e", "url": "https://github.com/ls1intum/Artemis/commit/5626d82c94edbc1d1bf8c099485b5e67b0636b5e", "message": "Default value for new request param", "committedDate": "2020-05-27T16:06:20Z", "type": "commit"}, {"oid": "3bae5913af7a3d9a5d4c3b2e90d2035db97ea042", "url": "https://github.com/ls1intum/Artemis/commit/3bae5913af7a3d9a5d4c3b2e90d2035db97ea042", "message": "Json properties of complaint", "committedDate": "2020-05-27T16:28:01Z", "type": "commit"}, {"oid": "83682498b78fd68cb02b62f1a96c2399b2aa15a5", "url": "https://github.com/ls1intum/Artemis/commit/83682498b78fd68cb02b62f1a96c2399b2aa15a5", "message": "Fix course reference", "committedDate": "2020-05-27T19:22:41Z", "type": "commit"}, {"oid": "3ebc7da4d9405a2886fb6ad3574baa105c92e695", "url": "https://github.com/ls1intum/Artemis/commit/3ebc7da4d9405a2886fb6ad3574baa105c92e695", "message": "Presence issue of course", "committedDate": "2020-05-27T19:30:51Z", "type": "commit"}, {"oid": "52c73d71e3361b96e024905d05d457793251da01", "url": "https://github.com/ls1intum/Artemis/commit/52c73d71e3361b96e024905d05d457793251da01", "message": "Fix test", "committedDate": "2020-05-27T19:52:27Z", "type": "commit"}, {"oid": "3df016de7c39ffd9a1456452ac1b56e07e3d3f23", "url": "https://github.com/ls1intum/Artemis/commit/3df016de7c39ffd9a1456452ac1b56e07e3d3f23", "message": "Fix client test", "committedDate": "2020-05-27T20:29:39Z", "type": "commit"}, {"oid": "038ce497088ebffb9bcdd972f9ce6be6fdc391c2", "url": "https://github.com/ls1intum/Artemis/commit/038ce497088ebffb9bcdd972f9ce6be6fdc391c2", "message": "Merge branch 'develop' into feature/team-exercises/complaints", "committedDate": "2020-05-30T11:08:47Z", "type": "commit"}, {"oid": "455141c9a44d92898386fc0313bbc381b5f397d3", "url": "https://github.com/ls1intum/Artemis/commit/455141c9a44d92898386fc0313bbc381b5f397d3", "message": "Improve migration and translations", "committedDate": "2020-05-30T12:12:01Z", "type": "commit"}, {"oid": "1672749cf40f429be9f40d9342e71dbb90b53d4f", "url": "https://github.com/ls1intum/Artemis/commit/1672749cf40f429be9f40d9342e71dbb90b53d4f", "message": "Client and server logic whether a tutor can respond to a complaint or more feedback request", "committedDate": "2020-05-30T13:19:33Z", "type": "commit"}, {"oid": "c96b6cd0fc7299ced55bc65479f4fc39b2a5f7e8", "url": "https://github.com/ls1intum/Artemis/commit/c96b6cd0fc7299ced55bc65479f4fc39b2a5f7e8", "message": "Fix test", "committedDate": "2020-05-30T13:47:36Z", "type": "commit"}, {"oid": "5b223374fa2eafa1902e882906f57a4fceafbef1", "url": "https://github.com/ls1intum/Artemis/commit/5b223374fa2eafa1902e882906f57a4fceafbef1", "message": "Fix test", "committedDate": "2020-05-30T13:48:29Z", "type": "commit"}, {"oid": "e4d36f73cc1cf32e20c5541138994e54ebb031e6", "url": "https://github.com/ls1intum/Artemis/commit/e4d36f73cc1cf32e20c5541138994e54ebb031e6", "message": "Add test for team complaint process", "committedDate": "2020-05-30T18:09:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MDE2Mg==", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r432880162", "bodyText": "I'm not sure if we want to allow instructors to review every complaint, is that something you considered?", "author": "sleiss", "createdAt": "2020-05-30T19:18:37Z", "path": "src/main/java/de/tum/in/www1/artemis/service/ComplaintResponseService.java", "diffHunk": "@@ -96,4 +89,36 @@ else if (!assessor.equals(reviewer) && (originalComplaint.getComplaintType() !=\n         complaintResponse.setComplaint(originalComplaint);\n         return complaintResponseRepository.save(complaintResponse);\n     }\n+\n+    /**\n+     * Checks whether the reviewer is authorized to respond to this complaint\n+     *\n+     * 1. Team Exercises\n+     *    => The team tutor assesses the submissions and responds to complaints and more feedback requests\n+     *\n+     * 2. Individual Exercises\n+     *    => Complaints can only be handled by a tutor who is not the original assessor\n+     *    => More feedback requests are handled by the assessor himself\n+     *\n+     * @param participation Participation to which the complaint belongs to\n+     * @param complaint Complaint for which to check\n+     * @param assessor Assessor of the submission whose assessment was complained about\n+     * @param reviewer Reviewer who is trying to create a response to the complaint\n+     * @return true if the tutor is allowed to respond to the complaint, false otherwise\n+     */\n+    private boolean isUserAuthorizedToRespondToComplaint(StudentParticipation participation, Complaint complaint, User assessor, User reviewer) {", "originalCommit": "e4d36f73cc1cf32e20c5541138994e54ebb031e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMDUwOQ==", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r433130509", "bodyText": "Good point. I basically wanted to keep the existing behavior for individual exercises the same and model the behavior for team exercises after it as far as there are parallels.\nThe behavior for individual exercises is that instructors could respond to a complaint but not to a more feedback request. That makes sense in so far as complaints in individual exercises can be handled by any secondary person who is at least a tutor while more feedback requests can only be handled by the originally assessor (since only they know why they assessed something a certain way).\nIn team exercises, both types of student feedback are only handled by the team tutor himself so in that regard they both behave more like \"more feedback\" requests for individual exercises. Thus I think it makes sense if only the original assessor can respond to complaints for team exercises. It would be surprising for the students if suddenly a different person responds when they expect it to be their tutor for team exercises.", "author": "madwau", "createdAt": "2020-06-01T09:23:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MDE2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE1MDk0Mw==", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r433150943", "bodyText": "My idea was that instructors could possibly solve a complaint in case a tutor is unable to do so, either because of lack of knowledge or e.g. personal issues that prevent the tutor from evaluating the complaint/feedback request.\nI agree that it does not make sense to add this right now, as there is also no way to display these requests. I still believe there might be some scenarios, like mentioned above, where it might be valid for an instructor to solve a complaint.\nAs this is out-of-scope for this PR, I will resolve this discussion.", "author": "sleiss", "createdAt": "2020-06-01T10:11:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MDE2Mg=="}], "type": "inlineReview", "revised_code": null}, {"oid": "4f9584f91d6e0ec8eb51401a9aad1cbdefd8c24c", "url": "https://github.com/ls1intum/Artemis/commit/4f9584f91d6e0ec8eb51401a9aad1cbdefd8c24c", "message": "Merge branch 'develop' into feature/team-exercises/complaints", "committedDate": "2020-06-01T09:10:44Z", "type": "commit"}, {"oid": "18cd86d290787606025b5c710cb109ae2c0a3561", "url": "https://github.com/ls1intum/Artemis/commit/18cd86d290787606025b5c710cb109ae2c0a3561", "message": "Fix formatting", "committedDate": "2020-06-01T09:13:41Z", "type": "commit"}, {"oid": "4b445ffdfea30e6b2abbeaf802560838b50649ba", "url": "https://github.com/ls1intum/Artemis/commit/4b445ffdfea30e6b2abbeaf802560838b50649ba", "message": "Fix typo\n\nCo-authored-by: Filip Gregurevic <51987021+filip-gregurevic@users.noreply.github.com>", "committedDate": "2020-06-01T10:18:34Z", "type": "commit"}]}