{"pr_number": 1998, "pr_title": "Plagiarism checks for text exercises", "pr_createdAt": "2020-08-05T12:43:44Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1998", "timeline": [{"oid": "f6fc33f920e251d760c3ee1dc6300ea00cd8facd", "url": "https://github.com/ls1intum/Artemis/commit/f6fc33f920e251d760c3ee1dc6300ea00cd8facd", "message": "Compute distance metrics for text submissions", "committedDate": "2020-08-05T12:39:06Z", "type": "commit"}, {"oid": "12e28bf378664427323986ce59df4a12a762c250", "url": "https://github.com/ls1intum/Artemis/commit/12e28bf378664427323986ce59df4a12a762c250", "message": "Downlaod from Client", "committedDate": "2020-08-05T14:13:14Z", "type": "commit"}, {"oid": "0aab51a7b25133b2307a56cbcd99c6730704252c", "url": "https://github.com/ls1intum/Artemis/commit/0aab51a7b25133b2307a56cbcd99c6730704252c", "message": "./gradlew :spotlessApply Good Suggestions", "committedDate": "2020-08-05T14:16:10Z", "type": "commit"}, {"oid": "61024c0f75b79877e61f662e48408996cc01dc96", "url": "https://github.com/ls1intum/Artemis/commit/61024c0f75b79877e61f662e48408996cc01dc96", "message": "./gradlew :spotlessApply Bad Suggestions", "committedDate": "2020-08-05T14:17:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIwOTExOQ==", "url": "https://github.com/ls1intum/Artemis/pull/1998#discussion_r466209119", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Convenience method of extract all latest submissions from a TextExercise and compute pair-wise distancse.\n          \n          \n            \n                 * Convenience method to extract all latest submissions from a TextExercise and compute pair-wise distances.", "author": "JonasPetry", "createdAt": "2020-08-06T07:44:58Z", "path": "src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package de.tum.in.www1.artemis.service.plagiarism.text;\n+\n+import static java.util.stream.Collectors.toUnmodifiableList;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.TextExercise;\n+import de.tum.in.www1.artemis.domain.TextSubmission;\n+import de.tum.in.www1.artemis.domain.participation.Participation;\n+\n+@Service\n+public class TextPlagiarismDetectionService {\n+\n+    /**\n+     * Convenience method of extract all latest submissions from a TextExercise and compute pair-wise distancse.", "originalCommit": "61024c0f75b79877e61f662e48408996cc01dc96", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0ef8bf524bc774c018e9fb95fd18ab155f30b106", "chunk": "diff --git a/src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java b/src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java\nindex 6bdf227d96..0676b79cf8 100644\n--- a/src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java\n+++ b/src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java\n\n@@ -18,7 +18,7 @@ import de.tum.in.www1.artemis.domain.participation.Participation;\n public class TextPlagiarismDetectionService {\n \n     /**\n-     * Convenience method of extract all latest submissions from a TextExercise and compute pair-wise distancse.\n+     * Convenience method to extract all latest submissions from a TextExercise and compute pair-wise distances.\n      *\n      * @param exerciseWithParticipationsAndSubmissions Text Exercise with fetched participations and submissions\n      * @param comparisionStrategy TextComparisionStrategy\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIxODUwNw==", "url": "https://github.com/ls1intum/Artemis/pull/1998#discussion_r466218507", "bodyText": "Iterating like that, items are only compared to items behind them in the list.\nIf there are submissions [a,b,c] and let's say a & c are identical, a would receive a low distance score and c would not be evaluated at all. Is this intended? If yes, I would indicate that somewhere in the documentation.", "author": "JonasPetry", "createdAt": "2020-08-06T08:00:14Z", "path": "src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package de.tum.in.www1.artemis.service.plagiarism.text;\n+\n+import static java.util.stream.Collectors.toUnmodifiableList;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.TextExercise;\n+import de.tum.in.www1.artemis.domain.TextSubmission;\n+import de.tum.in.www1.artemis.domain.participation.Participation;\n+\n+@Service\n+public class TextPlagiarismDetectionService {\n+\n+    /**\n+     * Convenience method of extract all latest submissions from a TextExercise and compute pair-wise distancse.\n+     *\n+     * @param exerciseWithParticipationsAndSubmissions Text Exercise with fetched participations and submissions\n+     * @param comparisionStrategy TextComparisionStrategy\n+     * @return Map of text submission pairs and distance score\n+     */\n+    public Map<Set<TextSubmission>, Double> compareSubmissionsForExerciseWithStrategy(TextExercise exerciseWithParticipationsAndSubmissions,\n+            TextComparisionStrategy comparisionStrategy) {\n+        final List<TextSubmission> textSubmissions = textSubmissionsForComparison(exerciseWithParticipationsAndSubmissions);\n+        return compareSubmissionsForExerciseWithStrategy(textSubmissions, comparisionStrategy);\n+    }\n+\n+    /**\n+     * Pairwise comparision of text submissions using a TextComparisionStrategy\n+     *\n+     * @param textSubmissions List of text submissions\n+     * @param comparisionStrategy TextComparisionStrategy\n+     * @return Map of text submission pairs and distance score\n+     */\n+    public Map<Set<TextSubmission>, Double> compareSubmissionsForExerciseWithStrategy(List<TextSubmission> textSubmissions, TextComparisionStrategy comparisionStrategy) {\n+        final Map<Set<TextSubmission>, Double> map = new HashMap<>();\n+\n+        for (int i = 0; i < textSubmissions.size(); i++) {", "originalCommit": "61024c0f75b79877e61f662e48408996cc01dc96", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQwODk2OA==", "url": "https://github.com/ls1intum/Artemis/pull/1998#discussion_r466408968", "bodyText": "The idea behind the loop is to only compare each pair once.\nfor a,b,c we will compare a & b, a & c, and b & c.\nOn purpose, this leaves out a & a, b & a, b & b, c & a, c & b, and c & c.", "author": "jpbernius", "createdAt": "2020-08-06T13:24:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIxODUwNw=="}], "type": "inlineReview", "revised_code": {"commit": "0ef8bf524bc774c018e9fb95fd18ab155f30b106", "chunk": "diff --git a/src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java b/src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java\nindex 6bdf227d96..0676b79cf8 100644\n--- a/src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java\n+++ b/src/main/java/de/tum/in/www1/artemis/service/plagiarism/text/TextPlagiarismDetectionService.java\n\n@@ -18,7 +18,7 @@ import de.tum.in.www1.artemis.domain.participation.Participation;\n public class TextPlagiarismDetectionService {\n \n     /**\n-     * Convenience method of extract all latest submissions from a TextExercise and compute pair-wise distancse.\n+     * Convenience method to extract all latest submissions from a TextExercise and compute pair-wise distances.\n      *\n      * @param exerciseWithParticipationsAndSubmissions Text Exercise with fetched participations and submissions\n      * @param comparisionStrategy TextComparisionStrategy\n"}}, {"oid": "5e9e9fd688bcd15940245e96fa14a6c861031ebc", "url": "https://github.com/ls1intum/Artemis/commit/5e9e9fd688bcd15940245e96fa14a6c861031ebc", "message": "Merge branch 'develop' into text-plag", "committedDate": "2020-08-06T08:22:22Z", "type": "commit"}, {"oid": "54f80d0350774a79026c813c5863a4970e89d29b", "url": "https://github.com/ls1intum/Artemis/commit/54f80d0350774a79026c813c5863a4970e89d29b", "message": "Merge branch 'develop' into text-plag", "committedDate": "2020-08-06T08:46:03Z", "type": "commit"}, {"oid": "0ef8bf524bc774c018e9fb95fd18ab155f30b106", "url": "https://github.com/ls1intum/Artemis/commit/0ef8bf524bc774c018e9fb95fd18ab155f30b106", "message": "Apply suggestions from code review\n\nCo-authored-by: Jonas Petry <51994246+JonasPetry@users.noreply.github.com>", "committedDate": "2020-08-06T13:21:50Z", "type": "commit"}, {"oid": "621af30a00595a5f995d53eecf0f829a1fa33939", "url": "https://github.com/ls1intum/Artemis/commit/621af30a00595a5f995d53eecf0f829a1fa33939", "message": "Merge branch 'develop' into text-plag", "committedDate": "2020-08-06T13:25:39Z", "type": "commit"}, {"oid": "4803a387e7d59678231c3663e2db6d53f1d7f238", "url": "https://github.com/ls1intum/Artemis/commit/4803a387e7d59678231c3663e2db6d53f1d7f238", "message": "Apply suggestions from code review\n\n* Improve Tests\n* Trim CSV Student Names\n* Improve imports\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-08-06T13:42:59Z", "type": "commit"}, {"oid": "023021fbf42caad6fc79a86acfb5e4a7754adb0c", "url": "https://github.com/ls1intum/Artemis/commit/023021fbf42caad6fc79a86acfb5e4a7754adb0c", "message": "Rename o to other\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-08-06T13:50:43Z", "type": "commit"}, {"oid": "5c47d056f19a6cf48272c9bd83211f4d1a564125", "url": "https://github.com/ls1intum/Artemis/commit/5c47d056f19a6cf48272c9bd83211f4d1a564125", "message": "Fix issues\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-08-06T13:57:55Z", "type": "commit"}, {"oid": "749524ac315df0b4ba989c8c7de51759c91444cc", "url": "https://github.com/ls1intum/Artemis/commit/749524ac315df0b4ba989c8c7de51759c91444cc", "message": "Merge branch 'develop' into text-plag\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>\n\n# Conflicts:\n#\tsrc/main/webapp/app/shared/util/download.util.ts", "committedDate": "2020-08-06T15:04:43Z", "type": "commit"}]}