{"pr_number": 150, "pr_title": "Make Ops classes accessible from sub-Ops classes", "pr_createdAt": "2020-11-16T04:31:48Z", "pr_url": "https://github.com/tensorflow/java/pull/150", "timeline": [{"oid": "43ac56abf01324f09ee51b93f96d2f8f77b5f236", "url": "https://github.com/tensorflow/java/commit/43ac56abf01324f09ee51b93f96d2f8f77b5f236", "message": "Adjust sub-Ops classes to take Ops in their constructor instead of Scope, and get the scope from that.  Save Ops parameter to field and add accessor for it.\n\nSigned-off-by: Ryan Nett <rnett@calpoly.edu>", "committedDate": "2020-11-16T04:25:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDYzOTM0OQ==", "url": "https://github.com/tensorflow/java/pull/150#discussion_r524639349", "bodyText": "Do we need this to be public?", "author": "karllessard", "createdAt": "2020-11-16T21:55:25Z", "path": "tensorflow-core/tensorflow-core-api/src/gen/annotations/org/tensorflow/op/AudioOps.java", "diffHunk": "@@ -144,4 +147,11 @@ public Mfcc mfcc(Operand<TFloat32> spectrogram, Operand<TInt32> sampleRate,\n       Mfcc.Options... options) {\n     return Mfcc.create(scope, spectrogram, sampleRate, options);\n   }\n+\n+  /**\n+   * Get the parent {@link Ops} object.\n+   */\n+  public final Ops ops() {\n+    return ops;\n+  }", "originalCommit": "43ac56abf01324f09ee51b93f96d2f8f77b5f236", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzE2OTY2MA==", "url": "https://github.com/tensorflow/java/pull/150#discussion_r527169660", "bodyText": "Unless you'd rather expose the field.  The point, as I understood it, was to allow a user to get to the Ops instance from a subgroup like MathOps, which requires it being public.  I could just make the final field public but the codebase seems to prefer accessor functions as is typical for Java.", "author": "rnett", "createdAt": "2020-11-19T20:14:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDYzOTM0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzIyMTI5Mg==", "url": "https://github.com/tensorflow/java/pull/150#discussion_r527221292", "bodyText": "Ah I forgot that when adding an extension method to MathOps, you are not in the scope of its package but in the public scope. So yes, this needs to be public then, all good, thanks", "author": "karllessard", "createdAt": "2020-11-19T21:42:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDYzOTM0OQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY1NjM4MQ==", "url": "https://github.com/tensorflow/java/pull/150#discussion_r524656381", "bodyText": "I was expecting to see LinalgSparseOp in your PR, which should be a child of LinalgOps, but now looking at the master code base, it looks that this child ops is not linked anymore to LinalgOps. Probably a mistake that has been introduced in the past by upgrading the TF core, unless all these sparseMatrix* endpoints have been removed from the native library as well... we can investigate that later but maybe right now we should simply delete it from our sources, as it brings confusion.", "author": "karllessard", "createdAt": "2020-11-16T22:06:37Z", "path": "tensorflow-core/tensorflow-core-api/src/gen/annotations/org/tensorflow/op/LinalgOps.java", "diffHunk": "@@ -1606,4 +1609,11 @@ public LoadAndRemapMatrix loadAndRemapMatrix(Operand<TString> ckptPath,\n       TriangularSolve.Options... options) {\n     return TriangularSolve.create(scope, matrix, rhs, options);\n   }\n+\n+  /**\n+   * Get the parent {@link Ops} object.\n+   */\n+  public final Ops ops() {\n+    return ops;\n+  }", "originalCommit": "43ac56abf01324f09ee51b93f96d2f8f77b5f236", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "cf67f0dfe2a20ccae35ef863b55fdf1045de628f", "url": "https://github.com/tensorflow/java/commit/cf67f0dfe2a20ccae35ef863b55fdf1045de628f", "message": "remove unlinked LinalgSparseOps\n\nSigned-off-by: Ryan Nett <rnett@calpoly.edu>", "committedDate": "2020-11-19T20:15:02Z", "type": "commit"}]}