{"pr_number": 27, "pr_title": "Deterministic ops generation", "pr_createdAt": "2020-02-07T19:50:50Z", "pr_url": "https://github.com/tensorflow/java/pull/27", "timeline": [{"oid": "c01b3ee614871f6821f2981599470f3a8a9c879a", "url": "https://github.com/tensorflow/java/commit/c01b3ee614871f6821f2981599470f3a8a9c879a", "message": "Enforcing an ordering on the ops generation. This should make it perfectly deterministic.", "committedDate": "2020-02-07T19:47:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU3NzkxMQ==", "url": "https://github.com/tensorflow/java/pull/27#discussion_r376577911", "bodyText": "no need of else blocks if you return in the previous if", "author": "karllessard", "createdAt": "2020-02-07T19:54:01Z", "path": "tensorflow-core/tensorflow-core-generator/src/main/java/org/tensorflow/processor/operator/OperatorProcessor.java", "diffHunk": "@@ -154,17 +155,39 @@ public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment\n   }\n \n   private static class OpsSpec {\n+    private static final Comparator<MethodSpec> PARAMETER_SPEC_COMPARATOR = (o1, o2) -> {\n+      if (o1.parameters.size() > o2.parameters.size()) {\n+        return 1;\n+      } else if (o1.parameters.size() < o2.parameters.size()) {", "originalCommit": "c01b3ee614871f6821f2981599470f3a8a9c879a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU3OTE0OA==", "url": "https://github.com/tensorflow/java/pull/27#discussion_r376579148", "bodyText": "Ok, I'll remove it.", "author": "Craigacp", "createdAt": "2020-02-07T19:56:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU3NzkxMQ=="}], "type": "inlineReview", "revised_code": {"commit": "9ccc4f0365b006808dc9f1d0a07210701c3350cc", "chunk": "diff --git a/tensorflow-core/tensorflow-core-generator/src/main/java/org/tensorflow/processor/operator/OperatorProcessor.java b/tensorflow-core/tensorflow-core-generator/src/main/java/org/tensorflow/processor/operator/OperatorProcessor.java\nindex 0736c99d..69f9720e 100644\n--- a/tensorflow-core/tensorflow-core-generator/src/main/java/org/tensorflow/processor/operator/OperatorProcessor.java\n+++ b/tensorflow-core/tensorflow-core-generator/src/main/java/org/tensorflow/processor/operator/OperatorProcessor.java\n\n@@ -160,19 +160,18 @@ public final class OperatorProcessor extends AbstractProcessor {\n         return 1;\n       } else if (o1.parameters.size() < o2.parameters.size()) {\n         return -1;\n-      } else {\n-        List<ParameterSpec> firstParams = o1.parameters;\n-        List<ParameterSpec> secondParams = o2.parameters;\n-        for (int i = 0; i < firstParams.size(); i++) {\n-          ParameterSpec first = firstParams.get(i);\n-          ParameterSpec second = secondParams.get(i);\n-          int compare = first.name.compareTo(second.name);\n-          if (compare != 0) {\n-            return compare;\n-          }\n+      }\n+      List<ParameterSpec> firstParams = o1.parameters;\n+      List<ParameterSpec> secondParams = o2.parameters;\n+      for (int i = 0; i < firstParams.size(); i++) {\n+        ParameterSpec first = firstParams.get(i);\n+        ParameterSpec second = secondParams.get(i);\n+        int compare = first.name.compareTo(second.name);\n+        if (compare != 0) {\n+          return compare;\n         }\n-        return 0;\n       }\n+      return 0;\n     };\n     private static final Comparator<MethodSpec> METHOD_SPEC_COMPARATOR = Comparator.comparing((MethodSpec m) -> m.name).thenComparing(PARAMETER_SPEC_COMPARATOR);\n \n"}}, {"oid": "9ccc4f0365b006808dc9f1d0a07210701c3350cc", "url": "https://github.com/tensorflow/java/commit/9ccc4f0365b006808dc9f1d0a07210701c3350cc", "message": "Removing an unnecessary else block.", "committedDate": "2020-02-07T19:57:07Z", "type": "commit"}, {"oid": "1b7e344f557bba049b000023a3af0cbc53a20dc7", "url": "https://github.com/tensorflow/java/commit/1b7e344f557bba049b000023a3af0cbc53a20dc7", "message": "And the other one.", "committedDate": "2020-02-07T20:08:56Z", "type": "commit"}]}