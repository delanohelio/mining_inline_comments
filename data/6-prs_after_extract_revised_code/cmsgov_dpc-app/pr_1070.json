{"pr_number": 1070, "pr_title": "DPC-643: fix sonar vulnerabilities in `dpc.testing.APIAuthHelpers`", "pr_createdAt": "2020-09-29T13:47:50Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/1070", "timeline": [{"oid": "1fbe6e6e360efcfbc4d4f7392eadc5be92714a6b", "url": "https://github.com/CMSgov/dpc-app/commit/1fbe6e6e360efcfbc4d4f7392eadc5be92714a6b", "message": "fix sonar vulnerabilities", "committedDate": "2020-09-28T21:25:05Z", "type": "commit"}, {"oid": "4380c792b09e16dbb745d9297fd4cbd4f1194f34", "url": "https://github.com/CMSgov/dpc-app/commit/4380c792b09e16dbb745d9297fd4cbd4f1194f34", "message": "fix: appease sonarqube by adding some exception throwing", "committedDate": "2020-09-29T14:27:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzgyNzYyMQ==", "url": "https://github.com/CMSgov/dpc-app/pull/1070#discussion_r497827621", "bodyText": "Would if (certs.length != 0) { throw new CertificateException(); } be enough to make Sonar happy?", "author": "em1", "createdAt": "2020-09-30T22:05:30Z", "path": "dpc-testing/src/main/java/gov/cms/dpc/testing/APIAuthHelpers.java", "diffHunk": "@@ -291,13 +292,23 @@ private static SSLContext createTrustingSSLContext() throws KeyManagementExcepti\n             }\n \n             @Override\n-            public void checkClientTrusted(X509Certificate[] certs, String authType) {\n-                // Do nothing\n+            public void checkClientTrusted(X509Certificate[] certs, String authType) throws CertificateException {\n+                if (certs.length == 0) {\n+                    // Do nothing because this is only used for smoke tests\n+                }\n+                else {\n+                    throw new CertificateException();\n+                }", "originalCommit": "4380c792b09e16dbb745d9297fd4cbd4f1194f34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzg2MDAxNg==", "url": "https://github.com/CMSgov/dpc-app/pull/1070#discussion_r497860016", "bodyText": "Could be! I'll try that out.", "author": "jonfulk", "createdAt": "2020-09-30T23:43:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzgyNzYyMQ=="}], "type": "inlineReview", "revised_code": {"commit": "60402609d6f70c65c70f2955999a215bc9f331ea", "chunk": "diff --git a/dpc-testing/src/main/java/gov/cms/dpc/testing/APIAuthHelpers.java b/dpc-testing/src/main/java/gov/cms/dpc/testing/APIAuthHelpers.java\nindex 8771bced..d1edaf0b 100644\n--- a/dpc-testing/src/main/java/gov/cms/dpc/testing/APIAuthHelpers.java\n+++ b/dpc-testing/src/main/java/gov/cms/dpc/testing/APIAuthHelpers.java\n\n@@ -293,22 +293,14 @@ public class APIAuthHelpers {\n \n             @Override\n             public void checkClientTrusted(X509Certificate[] certs, String authType) throws CertificateException {\n-                if (certs.length == 0) {\n-                    // Do nothing because this is only used for smoke tests\n-                }\n-                else {\n-                    throw new CertificateException();\n-                }\n+                // only used for testing, so no certificates expected\n+                if (certs.length != 0) { throw new CertificateException(); }\n             }\n \n             @Override\n             public void checkServerTrusted(X509Certificate[] certs, String authType) throws CertificateException {\n-                if (certs.length == 0) {\n-                    // Do nothing because this is only used for smoke tests\n-                }\n-                else {\n-                    throw new CertificateException();\n-                }\n+                // only used for testing, so no certificates expected\n+                if (certs.length != 0) { throw new CertificateException(); }\n             }\n \n         }};\n"}}, {"oid": "164325398524277589df5ff49ceb09e779017158", "url": "https://github.com/CMSgov/dpc-app/commit/164325398524277589df5ff49ceb09e779017158", "message": "Merge branch 'master' into jkf/dpc-643-sonar-vulns", "committedDate": "2020-10-01T13:30:26Z", "type": "commit"}, {"oid": "60402609d6f70c65c70f2955999a215bc9f331ea", "url": "https://github.com/CMSgov/dpc-app/commit/60402609d6f70c65c70f2955999a215bc9f331ea", "message": "fix: fewer lines of code ftw!", "committedDate": "2020-10-01T13:39:37Z", "type": "commit"}, {"oid": "7549f7c8ea075a1d1ff05a3e0d9edd87e591cb3f", "url": "https://github.com/CMSgov/dpc-app/commit/7549f7c8ea075a1d1ff05a3e0d9edd87e591cb3f", "message": "Merge branch 'master' into jkf/dpc-643-sonar-vulns", "committedDate": "2020-10-01T19:37:20Z", "type": "commit"}]}