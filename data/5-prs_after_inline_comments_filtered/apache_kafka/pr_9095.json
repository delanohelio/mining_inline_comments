{"pr_number": 9095, "pr_title": "KAFKA-10321: fix infinite blocking for global stream thread startup", "pr_createdAt": "2020-07-29T06:53:22Z", "pr_url": "https://github.com/apache/kafka/pull/9095", "timeline": [{"oid": "c73ef58d179a881680acf077e2386719ae490859", "url": "https://github.com/apache/kafka/commit/c73ef58d179a881680acf077e2386719ae490859", "message": "fix infinite blocking for global stream thread startup", "committedDate": "2020-07-29T06:49:54Z", "type": "commit"}, {"oid": "49f36eb1c009b072d80ad2dd5b17c09c5173a50f", "url": "https://github.com/apache/kafka/commit/49f36eb1c009b072d80ad2dd5b17c09c5173a50f", "message": "address John's comments", "committedDate": "2020-07-29T20:41:23Z", "type": "commit"}, {"oid": "928c61b718c631ff35fef8d5a57ce31aeabe0769", "url": "https://github.com/apache/kafka/commit/928c61b718c631ff35fef8d5a57ce31aeabe0769", "message": "make the start call safe", "committedDate": "2020-07-29T20:51:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU4OTAxNQ==", "url": "https://github.com/apache/kafka/pull/9095#discussion_r462589015", "bodyText": "Why not just state.CREATED as we are excluding three out of four states here?", "author": "guozhangwang", "createdAt": "2020-07-29T21:06:27Z", "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/GlobalStreamThread.java", "diffHunk": "@@ -173,6 +178,18 @@ public boolean stillRunning() {\n         }\n     }\n \n+    public boolean inErrorState() {\n+        synchronized (stateLock) {\n+            return state.inErrorState();\n+        }\n+    }\n+\n+    public boolean stillInitializing() {\n+        synchronized (stateLock) {\n+            return !state.isRunning() && !state.inErrorState();", "originalCommit": "928c61b718c631ff35fef8d5a57ce31aeabe0769", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c23123317ae1b90a705e353588b54e1a3294fcc0", "url": "https://github.com/apache/kafka/commit/c23123317ae1b90a705e353588b54e1a3294fcc0", "message": "use created instead", "committedDate": "2020-07-29T22:29:14Z", "type": "commit"}]}