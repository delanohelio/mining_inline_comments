{"pr_number": 8299, "pr_title": "KAFKA-9568: enforce rebalance if client endpoint has changed", "pr_createdAt": "2020-03-14T00:18:33Z", "pr_url": "https://github.com/apache/kafka/pull/8299", "timeline": [{"oid": "8a2ec5f53f878b73e09a2b4490756f1b90044609", "url": "https://github.com/apache/kafka/commit/8a2ec5f53f878b73e09a2b4490756f1b90044609", "message": "verify that our host info was included in the returned map, if applicable, and trigger a rebalance", "committedDate": "2020-03-18T05:39:45Z", "type": "commit"}, {"oid": "4d49d449ce5c2bfe0b71ddaf3a4c419af1bb3c93", "url": "https://github.com/apache/kafka/commit/4d49d449ce5c2bfe0b71ddaf3a4c419af1bb3c93", "message": "rename VP code for generic rebalance", "committedDate": "2020-03-18T05:39:45Z", "type": "commit"}, {"oid": "63c4d83142a1f8fa1cc47713d30939e12dbc9b50", "url": "https://github.com/apache/kafka/commit/63c4d83142a1f8fa1cc47713d30939e12dbc9b50", "message": "actually, introduce new code", "committedDate": "2020-03-18T05:39:45Z", "type": "commit"}, {"oid": "48356d3b794e70c3e4f7547cc94de2f82d74741d", "url": "https://github.com/apache/kafka/commit/48356d3b794e70c3e4f7547cc94de2f82d74741d", "message": "on 3rd thought, DO reuse the vp code", "committedDate": "2020-03-18T05:39:45Z", "type": "commit"}, {"oid": "91c2a85bcca110355e12c2205b789854eb1edccb", "url": "https://github.com/apache/kafka/commit/91c2a85bcca110355e12c2205b789854eb1edccb", "message": "move method call", "committedDate": "2020-03-18T05:39:45Z", "type": "commit"}, {"oid": "60798bbc5d6ba464637e90eeb31a4a42bd05e88f", "url": "https://github.com/apache/kafka/commit/60798bbc5d6ba464637e90eeb31a4a42bd05e88f", "message": "add test", "committedDate": "2020-03-18T05:42:33Z", "type": "commit"}, {"oid": "7f9efaeebb6623a29610fc50417fb62e823afc87", "url": "https://github.com/apache/kafka/commit/7f9efaeebb6623a29610fc50417fb62e823afc87", "message": "github review", "committedDate": "2020-03-18T05:43:03Z", "type": "commit"}, {"oid": "c6b60ad0cfca4722dee04001938d3b46246662ff", "url": "https://github.com/apache/kafka/commit/c6b60ad0cfca4722dee04001938d3b46246662ff", "message": "move HostInfo tests to separate class", "committedDate": "2020-03-18T05:43:03Z", "type": "commit"}, {"oid": "c6b60ad0cfca4722dee04001938d3b46246662ff", "url": "https://github.com/apache/kafka/commit/c6b60ad0cfca4722dee04001938d3b46246662ff", "message": "move HostInfo tests to separate class", "committedDate": "2020-03-18T05:43:03Z", "type": "forcePushed"}, {"oid": "80c457cbd193c011347903439463da5e0a46b19f", "url": "https://github.com/apache/kafka/commit/80c457cbd193c011347903439463da5e0a46b19f", "message": "checkstyle & fix test", "committedDate": "2020-03-18T05:44:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY3MjExNA==", "url": "https://github.com/apache/kafka/pull/8299#discussion_r394672114", "bodyText": "nit: extra spaces?", "author": "guozhangwang", "createdAt": "2020-03-18T22:20:13Z", "path": "streams/src/test/java/org/apache/kafka/streams/processor/internals/StreamsPartitionAssignorTest.java", "diffHunk": "@@ -1281,15 +1284,54 @@ public void shouldNotLoopInfinitelyOnMissingMetadataAndShouldNotCreateRelatedTas\n \n     @Test\n     public void shouldUpdateClusterMetadataAndHostInfoOnAssignment() {\n-        final TopicPartition partitionOne = new TopicPartition(\"topic\", 1);\n-        final TopicPartition partitionTwo = new TopicPartition(\"topic\", 2);\n-        final Map<HostInfo, Set<TopicPartition>> hostState = Collections.singletonMap(\n-            new HostInfo(\"localhost\", 9090), mkSet(partitionOne, partitionTwo));\n+        final Map<HostInfo, Set<TopicPartition>> initialHostState = mkMap(\n+            mkEntry(new HostInfo(\"localhost\", 9090), mkSet(t1p0, t1p1)),\n+            mkEntry(new HostInfo(\"otherhost\", 9090), mkSet(t2p0, t2p1))\n+            );", "originalCommit": "80c457cbd193c011347903439463da5e0a46b19f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY4OTc1NQ==", "url": "https://github.com/apache/kafka/pull/8299#discussion_r394689755", "bodyText": "Ack, I'll fix this in a next PR", "author": "ableegoldman", "createdAt": "2020-03-18T23:08:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY3MjExNA=="}], "type": "inlineReview"}]}