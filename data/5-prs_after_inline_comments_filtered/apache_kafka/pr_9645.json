{"pr_number": 9645, "pr_title": "MINOR: Update build and test dependencies", "pr_createdAt": "2020-11-23T19:32:03Z", "pr_url": "https://github.com/apache/kafka/pull/9645", "timeline": [{"oid": "12bb8191af3ed910a7cfdb78b046f7d38625b2f2", "url": "https://github.com/apache/kafka/commit/12bb8191af3ed910a7cfdb78b046f7d38625b2f2", "message": "MINOR: Update build and test dependencies", "committedDate": "2020-11-23T15:55:04Z", "type": "commit"}, {"oid": "bdb712096d6dc72b6d75916bcfbff89e56c39cba", "url": "https://github.com/apache/kafka/commit/bdb712096d6dc72b6d75916bcfbff89e56c39cba", "message": "Fix bug in ScramMechanism.fromMechanismName where it didn't handle an unknown mechanism name correctly", "committedDate": "2020-11-23T17:46:12Z", "type": "commit"}, {"oid": "e35c45f684a0b6d3b0ecc1bfea22ff419db8d0d6", "url": "https://github.com/apache/kafka/commit/e35c45f684a0b6d3b0ecc1bfea22ff419db8d0d6", "message": "Remove redundant null check", "committedDate": "2020-11-23T17:46:27Z", "type": "commit"}, {"oid": "d5e611c7ae8e04ec7622a3e8ad9eaa312d40ba66", "url": "https://github.com/apache/kafka/commit/d5e611c7ae8e04ec7622a3e8ad9eaa312d40ba66", "message": "Upgrade to spotbugs 4.1.4 and adjust exclusion to be more specific", "committedDate": "2020-11-23T17:47:50Z", "type": "commit"}, {"oid": "93157a949a441fad26d375c52643cf9464adbce2", "url": "https://github.com/apache/kafka/commit/93157a949a441fad26d375c52643cf9464adbce2", "message": "Introduce ScramMechanismTest", "committedDate": "2020-11-23T17:48:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk0NzI1MQ==", "url": "https://github.com/apache/kafka/pull/9645#discussion_r528947251", "bodyText": "cc @chia7712 since you changed related code recently.", "author": "ijuma", "createdAt": "2020-11-23T19:32:48Z", "path": "clients/src/main/java/org/apache/kafka/common/header/internals/RecordHeader.java", "diffHunk": "@@ -70,7 +70,7 @@ public boolean equals(Object o) {\n \n     @Override\n     public int hashCode() {\n-        int result = key() != null ? key().hashCode() : 0;\n+        int result = key().hashCode();", "originalCommit": "93157a949a441fad26d375c52643cf9464adbce2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk0NzcwNg==", "url": "https://github.com/apache/kafka/pull/9645#discussion_r528947706", "bodyText": "@rondagostino looks like the original implementation didn't achieve the goal. I added a test that failed without this change.", "author": "ijuma", "createdAt": "2020-11-23T19:33:43Z", "path": "clients/src/main/java/org/apache/kafka/clients/admin/ScramMechanism.java", "diffHunk": "@@ -49,8 +53,11 @@ public static ScramMechanism fromType(byte type) {\n      *     Salted Challenge Response Authentication Mechanism (SCRAM) SASL and GSS-API Mechanisms, Section 4</a>\n      */\n     public static ScramMechanism fromMechanismName(String mechanismName) {\n-        ScramMechanism retvalFoundMechanism = ScramMechanism.valueOf(mechanismName.replace('-', '_'));\n-        return retvalFoundMechanism != null ? retvalFoundMechanism : UNKNOWN;\n+        String normalizedMechanism = mechanismName.replace('-', '_');\n+        return Arrays.stream(VALUES)\n+            .filter(mechanism -> mechanism.name().equals(normalizedMechanism))\n+            .findFirst()\n+            .orElse(UNKNOWN);", "originalCommit": "93157a949a441fad26d375c52643cf9464adbce2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk4NjE5MA==", "url": "https://github.com/apache/kafka/pull/9645#discussion_r528986190", "bodyText": "Ah, you are right: valueOf() Throws: IllegalArgumentException - if the specified enum type has no constant with the specified name, or the specified class object does not represent an enum type.\nThanks for catching/testing for/fixing it.", "author": "rondagostino", "createdAt": "2020-11-23T20:47:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk0NzcwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE4MDA0Ng==", "url": "https://github.com/apache/kafka/pull/9645#discussion_r529180046", "bodyText": "@rondagostino do we need to cherry-pick this change to the 2.7 branch? I am not sure under which context this method is used and whether it's important enough to backport.", "author": "ijuma", "createdAt": "2020-11-24T03:34:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk0NzcwNg=="}], "type": "inlineReview"}, {"oid": "e25cdb0d0ecc90a4de991da5137291d378d9c1f5", "url": "https://github.com/apache/kafka/commit/e25cdb0d0ecc90a4de991da5137291d378d9c1f5", "message": "Fix checkstyle", "committedDate": "2020-11-23T22:30:28Z", "type": "commit"}, {"oid": "773f64e9906dcd147afec4eec1c73b17836dacbc", "url": "https://github.com/apache/kafka/commit/773f64e9906dcd147afec4eec1c73b17836dacbc", "message": "Merge branch 'trunk' into build-test-dep-updates", "committedDate": "2020-11-24T03:33:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE4MDQxNA==", "url": "https://github.com/apache/kafka/pull/9645#discussion_r529180414", "bodyText": "Could we reuse mechanismName (https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/admin/ScramMechanism.java#L79) so we don't need this duplicate replacement.", "author": "chia7712", "createdAt": "2020-11-24T03:35:58Z", "path": "clients/src/main/java/org/apache/kafka/clients/admin/ScramMechanism.java", "diffHunk": "@@ -49,8 +53,11 @@ public static ScramMechanism fromType(byte type) {\n      *     Salted Challenge Response Authentication Mechanism (SCRAM) SASL and GSS-API Mechanisms, Section 4</a>\n      */\n     public static ScramMechanism fromMechanismName(String mechanismName) {\n-        ScramMechanism retvalFoundMechanism = ScramMechanism.valueOf(mechanismName.replace('-', '_'));\n-        return retvalFoundMechanism != null ? retvalFoundMechanism : UNKNOWN;\n+        String normalizedMechanism = mechanismName.replace('-', '_');", "originalCommit": "773f64e9906dcd147afec4eec1c73b17836dacbc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTIwMjg0MA==", "url": "https://github.com/apache/kafka/pull/9645#discussion_r529202840", "bodyText": "Good suggestion, applied it.", "author": "ijuma", "createdAt": "2020-11-24T04:56:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE4MDQxNA=="}], "type": "inlineReview"}, {"oid": "d187756c7ff7f8430eb2cf10ce731f9015d2bfd7", "url": "https://github.com/apache/kafka/commit/d187756c7ff7f8430eb2cf10ce731f9015d2bfd7", "message": "Address review feedback", "committedDate": "2020-11-24T04:56:27Z", "type": "commit"}]}