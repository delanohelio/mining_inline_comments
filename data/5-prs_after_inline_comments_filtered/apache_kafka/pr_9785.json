{"pr_number": 9785, "pr_title": "KAFKA-10887 Migrate log4j-appender module to JUnit 5", "pr_createdAt": "2020-12-24T07:13:54Z", "pr_url": "https://github.com/apache/kafka/pull/9785", "timeline": [{"oid": "81d642c49fd8c05de4405430dea77b96d624deb5", "url": "https://github.com/apache/kafka/commit/81d642c49fd8c05de4405430dea77b96d624deb5", "message": "KAFKA-10887 Migrate log4j-appender module to JUnit 5", "committedDate": "2020-12-24T07:10:52Z", "type": "commit"}, {"oid": "2640cf19647cc3667bbde1a70ffde47abaeeb6e4", "url": "https://github.com/apache/kafka/commit/2640cf19647cc3667bbde1a70ffde47abaeeb6e4", "message": "add test prefix", "committedDate": "2020-12-24T09:52:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU4NjgwNQ==", "url": "https://github.com/apache/kafka/pull/9785#discussion_r554586805", "bodyText": "What is the reason for having assertDoesNotThrow here and below? The test will fail if an exception is thrown, so seems like unnecessary noise.", "author": "ijuma", "createdAt": "2021-01-10T15:58:15Z", "path": "log4j-appender/src/test/java/org/apache/kafka/log4jappender/KafkaLog4jAppenderTest.java", "diffHunk": "@@ -130,55 +116,51 @@ public void testLog4jAppends() {\n         for (int i = 1; i <= 5; ++i) {\n             logger.error(getMessage(i));\n         }\n-\n-        Assert.assertEquals(\n-            5, (getMockKafkaLog4jAppender()).getHistory().size());\n+        assertEquals(getMockKafkaLog4jAppender().getHistory().size(), 5);\n     }\n \n-    @Test(expected = RuntimeException.class)\n-    public void testLog4jAppendsWithSyncSendAndSimulateProducerFailShouldThrowException() {\n+    @Test\n+    public void testSyncSendAndSimulateProducerFailShouldThrowException() {\n         Properties props = getLog4jConfig(true);\n         props.put(\"log4j.appender.KAFKA.IgnoreExceptions\", \"false\");\n         PropertyConfigurator.configure(props);\n \n         MockKafkaLog4jAppender mockKafkaLog4jAppender = getMockKafkaLog4jAppender();\n         replaceProducerWithMocked(mockKafkaLog4jAppender, false);\n \n-        logger.error(getMessage(0));\n+        assertThrows(RuntimeException.class, () -> logger.error(getMessage(0)));\n     }\n \n     @Test\n-    public void testLog4jAppendsWithSyncSendWithoutIgnoringExceptionsShouldNotThrowException() {\n+    public void testSyncSendWithoutIgnoringExceptionsShouldNotThrowException() {\n         Properties props = getLog4jConfig(true);\n         props.put(\"log4j.appender.KAFKA.IgnoreExceptions\", \"false\");\n         PropertyConfigurator.configure(props);\n \n         MockKafkaLog4jAppender mockKafkaLog4jAppender = getMockKafkaLog4jAppender();\n         replaceProducerWithMocked(mockKafkaLog4jAppender, true);\n \n-        logger.error(getMessage(0));\n+        assertDoesNotThrow(() -> logger.error(getMessage(0)));", "originalCommit": "2640cf19647cc3667bbde1a70ffde47abaeeb6e4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU4OTMxNw==", "url": "https://github.com/apache/kafka/pull/9785#discussion_r554589317", "bodyText": "I considered it is a kind of highlight. However, it is unnecessary in this test case as it is the final line. @g1geordie WDYT? Should we file a PR to remove this unnecessary noise?", "author": "chia7712", "createdAt": "2021-01-10T16:18:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU4NjgwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU5MzAyNQ==", "url": "https://github.com/apache/kafka/pull/9785#discussion_r554593025", "bodyText": "As you think .  I just point out where we do the check .\nI will file a MINOR to change that    . Thank you", "author": "g1geordie", "createdAt": "2021-01-10T16:48:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU4NjgwNQ=="}], "type": "inlineReview"}]}