{"pr_number": 8324, "pr_title": "KAFKA-9701 (fix): Only check protocol name when generation is valid", "pr_createdAt": "2020-03-21T00:31:13Z", "pr_url": "https://github.com/apache/kafka/pull/8324", "timeline": [{"oid": "9e36f497c87f76fb237e56ecc9f2952224b55d98", "url": "https://github.com/apache/kafka/commit/9e36f497c87f76fb237e56ecc9f2952224b55d98", "message": "Check for no generation during sync group response", "committedDate": "2020-03-21T00:26:56Z", "type": "commit"}, {"oid": "5fccb32033c53fb3be3ea04fc99bb989913722ea", "url": "https://github.com/apache/kafka/commit/5fccb32033c53fb3be3ea04fc99bb989913722ea", "message": "add unit test", "committedDate": "2020-03-21T01:31:05Z", "type": "commit"}, {"oid": "5fccb32033c53fb3be3ea04fc99bb989913722ea", "url": "https://github.com/apache/kafka/commit/5fccb32033c53fb3be3ea04fc99bb989913722ea", "message": "add unit test", "committedDate": "2020-03-21T01:31:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI3Mzc5OQ==", "url": "https://github.com/apache/kafka/pull/8324#discussion_r396273799", "bodyText": "@guozhangwang @abbccdda Shouldn't we synchronise this or use a local reference of the generation to be 100% safe?", "author": "dajac", "createdAt": "2020-03-23T08:19:01Z", "path": "clients/src/main/java/org/apache/kafka/clients/consumer/internals/AbstractCoordinator.java", "diffHunk": "@@ -913,7 +913,8 @@ private boolean isProtocolTypeInconsistent(String protocolType) {\n     }\n \n     private boolean isProtocolNameInconsistent(String protocolName) {\n-        return protocolName != null && !protocolName.equals(generation().protocolName);\n+        return protocolName != null && generation() != Generation.NO_GENERATION\n+                   && !protocolName.equals(generation().protocolName);", "originalCommit": "5fccb32033c53fb3be3ea04fc99bb989913722ea", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}