{"pr_number": 8246, "pr_title": "KAFKA-6145: Pt 2. Include offset sums in subscription", "pr_createdAt": "2020-03-06T23:55:44Z", "pr_url": "https://github.com/apache/kafka/pull/8246", "timeline": [{"oid": "dd0366a1866541b4ee2b1a15c68aad7d5c222095", "url": "https://github.com/apache/kafka/commit/dd0366a1866541b4ee2b1a15c68aad7d5c222095", "message": "report offset sums", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "9f995fd93ee45180494892fb607617c920a7e1e0", "url": "https://github.com/apache/kafka/commit/9f995fd93ee45180494892fb607617c920a7e1e0", "message": "add test case", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "9ff3dfce8cea9e8c29e8f3136f848b852b2e05d7", "url": "https://github.com/apache/kafka/commit/9ff3dfce8cea9e8c29e8f3136f848b852b2e05d7", "message": "write checkpoint for unowned task", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "fc9b9433a200330cc0ab7231da78d35dba5e987f", "url": "https://github.com/apache/kafka/commit/fc9b9433a200330cc0ab7231da78d35dba5e987f", "message": "checkstyle", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "b10999a8b5ea381a6e4d20348c01407d0e4d7f12", "url": "https://github.com/apache/kafka/commit/b10999a8b5ea381a6e4d20348c01407d0e4d7f12", "message": "fix spelling", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "d96d2b9059100c5d953566dbe63f4a03ddfc38b5", "url": "https://github.com/apache/kafka/commit/d96d2b9059100c5d953566dbe63f4a03ddfc38b5", "message": "decode older subscriptions to dummy offset sums", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "e96442d1fd0767d2b84cc4da434515a3c20d0bca", "url": "https://github.com/apache/kafka/commit/e96442d1fd0767d2b84cc4da434515a3c20d0bca", "message": "checkstyle", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "146cff7cb4afa190d8a9feebe36acd955182affc", "url": "https://github.com/apache/kafka/commit/146cff7cb4afa190d8a9feebe36acd955182affc", "message": "github comments", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "801dfa740d664f12bec33f25ea08044e149fab3d", "url": "https://github.com/apache/kafka/commit/801dfa740d664f12bec33f25ea08044e149fab3d", "message": "more changes from github review", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "f3854dbfffd4eb9f0a5b09ef310a0de93dbda14e", "url": "https://github.com/apache/kafka/commit/f3854dbfffd4eb9f0a5b09ef310a0de93dbda14e", "message": "split out lock acquisition andcheckpoint reading/offset sum computation", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "0cf37a4b0f8db98a0c7e6b330a9b7b48ce309eb7", "url": "https://github.com/apache/kafka/commit/0cf37a4b0f8db98a0c7e6b330a9b7b48ce309eb7", "message": "add helper to StateDirectory", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "a6cad4328e56be2d79d2c8386309d36fe073401e", "url": "https://github.com/apache/kafka/commit/a6cad4328e56be2d79d2c8386309d36fe073401e", "message": "annoying but better tests", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "d1adbee9c794e9f728c8bf1a6a7e60f33212912b", "url": "https://github.com/apache/kafka/commit/d1adbee9c794e9f728c8bf1a6a7e60f33212912b", "message": "remove original monolith test", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "1eb7c0c57a6a1d71b6668dc32c6bba5afb9f6ca4", "url": "https://github.com/apache/kafka/commit/1eb7c0c57a6a1d71b6668dc32c6bba5afb9f6ca4", "message": "fix NPE", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "2fa42cb082fe3cd7bbb660036bdba8f9a184c07f", "url": "https://github.com/apache/kafka/commit/2fa42cb082fe3cd7bbb660036bdba8f9a184c07f", "message": "fix no-valid-checkpoint test", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "042b12b2a38b5c5ec2130f2ba983165ffaf6a2a5", "url": "https://github.com/apache/kafka/commit/042b12b2a38b5c5ec2130f2ba983165ffaf6a2a5", "message": "githubreview", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "d4b30920c00f675e862e1fc4ce510372d4334842", "url": "https://github.com/apache/kafka/commit/d4b30920c00f675e862e1fc4ce510372d4334842", "message": "checkstyle", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "cf64c338e070f42779751344f3d34800fafe9b96", "url": "https://github.com/apache/kafka/commit/cf64c338e070f42779751344f3d34800fafe9b96", "message": "log warning on overflow", "committedDate": "2020-03-12T21:16:34Z", "type": "commit"}, {"oid": "35675a7e494cdc1b06ad756d63be1262903ec444", "url": "https://github.com/apache/kafka/commit/35675a7e494cdc1b06ad756d63be1262903ec444", "message": "fix active task creator test", "committedDate": "2020-03-12T21:22:35Z", "type": "commit"}, {"oid": "35675a7e494cdc1b06ad756d63be1262903ec444", "url": "https://github.com/apache/kafka/commit/35675a7e494cdc1b06ad756d63be1262903ec444", "message": "fix active task creator test", "committedDate": "2020-03-12T21:22:35Z", "type": "forcePushed"}, {"oid": "298f1e23a3116e537f235f7ccb5bf0904c816f32", "url": "https://github.com/apache/kafka/commit/298f1e23a3116e537f235f7ccb5bf0904c816f32", "message": "don't attempt unlock for empty or checkpoint-less task dirs", "committedDate": "2020-03-12T22:24:27Z", "type": "commit"}, {"oid": "3135d653f8c7f1148381e25cc9dc423be195c7b4", "url": "https://github.com/apache/kafka/commit/3135d653f8c7f1148381e25cc9dc423be195c7b4", "message": "remove negative offset handling to enforce in separate PR", "committedDate": "2020-03-13T19:32:31Z", "type": "commit"}, {"oid": "a757918bbbf7c4b27aa29720e540a5603f890b1e", "url": "https://github.com/apache/kafka/commit/a757918bbbf7c4b27aa29720e540a5603f890b1e", "message": "fix tests", "committedDate": "2020-03-13T22:09:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY5NjEwNw==", "url": "https://github.com/apache/kafka/pull/8246#discussion_r392696107", "bodyText": "One last thing: Could you open another PR to add unit tests that check that the array is empty for the two edge cases?", "author": "cadonna", "createdAt": "2020-03-15T17:46:04Z", "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/StateDirectory.java", "diffHunk": "@@ -347,8 +349,14 @@ private synchronized void cleanRemovedTasks(final long cleanupDelayMs,\n      * @return The list of all the existing local directories for stream tasks\n      */\n     File[] listTaskDirectories() {", "originalCommit": "a757918bbbf7c4b27aa29720e540a5603f890b1e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI0NzI5Ng==", "url": "https://github.com/apache/kafka/pull/8246#discussion_r393247296", "bodyText": "Ack, added the tests to the Pt 2.5 PR", "author": "ableegoldman", "createdAt": "2020-03-16T18:58:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY5NjEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzMyNzAzMw==", "url": "https://github.com/apache/kafka/pull/8246#discussion_r393327033", "bodyText": "Actually, ended up doing some additional cleanup on the side so I split it out into a  small PR; please give this a quick review.\n#8304", "author": "ableegoldman", "createdAt": "2020-03-16T21:44:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY5NjEwNw=="}], "type": "inlineReview"}]}