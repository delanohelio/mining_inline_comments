{"pr_number": 9622, "pr_title": "KAFKA-10547; add topicId in MetadataResp", "pr_createdAt": "2020-11-19T11:59:14Z", "pr_url": "https://github.com/apache/kafka/pull/9622", "timeline": [{"oid": "54a2236a79cd1dc8c7208d253ca128cf6571953f", "url": "https://github.com/apache/kafka/commit/54a2236a79cd1dc8c7208d253ca128cf6571953f", "message": "KAFKA-10547; add topicId in metadata resp", "committedDate": "2020-11-23T13:53:29Z", "type": "forcePushed"}, {"oid": "6b3a0e6ebedc36413445a18df902694298e3de7a", "url": "https://github.com/apache/kafka/commit/6b3a0e6ebedc36413445a18df902694298e3de7a", "message": "KAFKA-10547; Add topicNames in MetadataCache", "committedDate": "2020-12-11T05:17:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzIyNDA5Mw==", "url": "https://github.com/apache/kafka/pull/9622#discussion_r543224093", "bodyText": "Do we have a use case that requires both maps to be stored in Cluster for fast lookups? Or would it be sufficient to store it one-way and look up the single map for the other way?", "author": "rajinisivaram", "createdAt": "2020-12-15T10:26:57Z", "path": "clients/src/main/java/org/apache/kafka/common/Cluster.java", "diffHunk": "@@ -46,6 +46,8 @@\n     private final Map<Integer, List<PartitionInfo>> partitionsByNode;\n     private final Map<Integer, Node> nodesById;\n     private final ClusterResource clusterResource;\n+    private final Map<String, Uuid> topicIds;\n+    private final Map<Uuid, String> topicNames;", "originalCommit": "6b3a0e6ebedc36413445a18df902694298e3de7a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI4OTg5Mg==", "url": "https://github.com/apache/kafka/pull/9622#discussion_r543289892", "bodyText": "Thank you for your suggestions, the topicNames is not used so I just removed it. Maybe we will add them if it's necessary in a future use case.", "author": "dengziming", "createdAt": "2020-12-15T12:10:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzIyNDA5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQ1MDI1Mg==", "url": "https://github.com/apache/kafka/pull/9622#discussion_r543450252", "bodyText": "nit: toString() unnecessary", "author": "rajinisivaram", "createdAt": "2020-12-15T15:34:58Z", "path": "clients/src/main/java/org/apache/kafka/common/requests/MetadataResponse.java", "diffHunk": "@@ -320,6 +333,7 @@ public String toString() {\n             return \"TopicMetadata{\" +\n                 \"error=\" + error +\n                 \", topic='\" + topic + '\\'' +\n+                \", topicId='\" + topicId.toString() + '\\'' +", "originalCommit": "dac9503351a8bc952e108ce69a819a79a64bfbec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5e599379a465658b52656aa67f46f3caa9e7bf12", "url": "https://github.com/apache/kafka/commit/5e599379a465658b52656aa67f46f3caa9e7bf12", "message": "KAFKA-10547; alter some unit tests\n\nKAFKA-10547; alter some integration tests\n\nKAFKA-10547; optimeze imports\n\nresolve comments", "committedDate": "2020-12-17T03:06:41Z", "type": "forcePushed"}, {"oid": "680308e856ee95a1895e16ec4f07efcf089ba42b", "url": "https://github.com/apache/kafka/commit/680308e856ee95a1895e16ec4f07efcf089ba42b", "message": "KAFKA-10547; alter some unit tests\n\nKAFKA-10547; alter some integration tests\n\nKAFKA-10547; optimeze imports\n\nresolve comments", "committedDate": "2020-12-17T03:17:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDk3NzU1MQ==", "url": "https://github.com/apache/kafka/pull/9622#discussion_r544977551", "bodyText": "nit: We don't use get prefix in other methods. Since this is part of the public API, can we change this to topicId(String topic) before merging?", "author": "rajinisivaram", "createdAt": "2020-12-17T10:26:39Z", "path": "clients/src/main/java/org/apache/kafka/common/Cluster.java", "diffHunk": "@@ -327,6 +346,14 @@ public Node controller() {\n         return controller;\n     }\n \n+    public Collection<Uuid> topicIds() {\n+        return topicIds.values();\n+    }\n+\n+    public Uuid getTopicId(String topic) {", "originalCommit": "680308e856ee95a1895e16ec4f07efcf089ba42b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDk4ODQ1OQ==", "url": "https://github.com/apache/kafka/pull/9622#discussion_r544988459", "bodyText": "Thank you for your reminder, it's helpful to me.", "author": "dengziming", "createdAt": "2020-12-17T10:43:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDk3NzU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njg2MzcxMQ==", "url": "https://github.com/apache/kafka/pull/9622#discussion_r546863711", "bodyText": "Can we also add this and any other new public APIs to the KIP page?", "author": "jolshan", "createdAt": "2020-12-21T18:32:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDk3NzU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDgyOTE3OQ==", "url": "https://github.com/apache/kafka/pull/9622#discussion_r550829179", "bodyText": "Thank you for your reminder, I have added these 2 methods to the KIP page, take a look if you have time.", "author": "dengziming", "createdAt": "2021-01-02T01:34:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDk3NzU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDkwNjA1NA==", "url": "https://github.com/apache/kafka/pull/9622#discussion_r550906054", "bodyText": "Thanks. looks good!", "author": "jolshan", "createdAt": "2021-01-02T18:08:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDk3NzU1MQ=="}], "type": "inlineReview"}, {"oid": "587c0e0652e8386126460ab4c4508349e24afa22", "url": "https://github.com/apache/kafka/commit/587c0e0652e8386126460ab4c4508349e24afa22", "message": "KAFKA-10547; alter some unit tests\n\nKAFKA-10547; alter some integration tests\n\nKAFKA-10547; optimeze imports\n\nresolve comments", "committedDate": "2020-12-17T10:41:15Z", "type": "commit"}, {"oid": "587c0e0652e8386126460ab4c4508349e24afa22", "url": "https://github.com/apache/kafka/commit/587c0e0652e8386126460ab4c4508349e24afa22", "message": "KAFKA-10547; alter some unit tests\n\nKAFKA-10547; alter some integration tests\n\nKAFKA-10547; optimeze imports\n\nresolve comments", "committedDate": "2020-12-17T10:41:15Z", "type": "forcePushed"}, {"oid": "b48aa7f4f949b234f486b462f90ddeaadca556ba", "url": "https://github.com/apache/kafka/commit/b48aa7f4f949b234f486b462f90ddeaadca556ba", "message": "Fix Scala 2.12 build", "committedDate": "2020-12-18T18:20:40Z", "type": "commit"}]}