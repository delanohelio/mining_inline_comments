{"pr_number": 8921, "pr_title": "KAFKA-10160: Kafka MM2 consumer configuration", "pr_createdAt": "2020-06-24T00:24:57Z", "pr_url": "https://github.com/apache/kafka/pull/8921", "timeline": [{"oid": "75b1c77542fe8269b89fb4f209520bb59e70ca3e", "url": "https://github.com/apache/kafka/commit/75b1c77542fe8269b89fb4f209520bb59e70ca3e", "message": "Update MirrorConnectorConfig.java\n\nKAFKA-10160: Removed hardcoded auto.offset.reset in MM2 consumer configuration, defaults to earliest unless specified.", "committedDate": "2020-06-24T00:06:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU4MDE3Ng==", "url": "https://github.com/apache/kafka/pull/8921#discussion_r444580176", "bodyText": "can leave off \"unless specified\" -- is redundant with \"default\".", "author": "ryannedolan", "createdAt": "2020-06-24T00:32:45Z", "path": "connect/mirror/src/main/java/org/apache/kafka/connect/mirror/MirrorConnectorConfig.java", "diffHunk": "@@ -123,6 +125,10 @@\n     private static final String CONSUMER_POLL_TIMEOUT_MILLIS_DOC = \"Timeout when polling source cluster.\";\n     public static final long CONSUMER_POLL_TIMEOUT_MILLIS_DEFAULT = 1000L;\n \n+    public static final String CONSUMER_AUTO_OFFSET_RESET = \"consumer.auto.offset.reset\";\n+    private static final String CONSUMER_AUTO_OFFSET_RESET_DOC = \"Consumer Auto offset reset, defaults to earliest unless specify.\";", "originalCommit": "75b1c77542fe8269b89fb4f209520bb59e70ca3e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU4NjcwNQ==", "url": "https://github.com/apache/kafka/pull/8921#discussion_r444586705", "bodyText": "Updated \"Consumer Auto offset reset, default to earliest unless specified.\"", "author": "satishbellapu", "createdAt": "2020-06-24T00:59:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU4MDE3Ng=="}], "type": "inlineReview"}, {"oid": "8594842653c4d944d8ddc403add123dee62bc8f3", "url": "https://github.com/apache/kafka/commit/8594842653c4d944d8ddc403add123dee62bc8f3", "message": "KAFKA-10160: Kafka MM2 consumer configuration\n\nupdated the doc", "committedDate": "2020-06-24T00:55:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg3MjM1Mg==", "url": "https://github.com/apache/kafka/pull/8921#discussion_r448872352", "bodyText": "Can we reuse ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG instead of defining a new constant?", "author": "mimaison", "createdAt": "2020-07-02T09:29:09Z", "path": "connect/mirror/src/main/java/org/apache/kafka/connect/mirror/MirrorConnectorConfig.java", "diffHunk": "@@ -67,6 +67,8 @@\n     protected static final String SYNC_TOPIC_ACLS = \"sync.topic.acls\";\n     protected static final String EMIT_HEARTBEATS = \"emit.heartbeats\";\n     protected static final String EMIT_CHECKPOINTS = \"emit.checkpoints\";\n+    protected static final String AUTH_OFFSET_RESET = \"auto.offset.reset\";\n+    protected static final String ENABLE_AUTO_COMMIT = \"enable.auto.commit\";", "originalCommit": "8594842653c4d944d8ddc403add123dee62bc8f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg3MjgxNQ==", "url": "https://github.com/apache/kafka/pull/8921#discussion_r448872815", "bodyText": "Can we reuse ConsumerConfig.AUTO_OFFSET_RESET_CONFIG instead of defining a new constant?", "author": "mimaison", "createdAt": "2020-07-02T09:29:51Z", "path": "connect/mirror/src/main/java/org/apache/kafka/connect/mirror/MirrorConnectorConfig.java", "diffHunk": "@@ -67,6 +67,8 @@\n     protected static final String SYNC_TOPIC_ACLS = \"sync.topic.acls\";\n     protected static final String EMIT_HEARTBEATS = \"emit.heartbeats\";\n     protected static final String EMIT_CHECKPOINTS = \"emit.checkpoints\";\n+    protected static final String AUTH_OFFSET_RESET = \"auto.offset.reset\";", "originalCommit": "8594842653c4d944d8ddc403add123dee62bc8f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg4MjE4OA==", "url": "https://github.com/apache/kafka/pull/8921#discussion_r448882188", "bodyText": "If a user sets somesource->sometarget.consumer.auto.offset.reset=latest that should be picked up by line 235-237.\nSo instead of defining a new config on MirrorConnectorConfig, could we do something like:\nprops.putIfAbsent(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, \"earliest\");\nWDYT?", "author": "mimaison", "createdAt": "2020-07-02T09:45:53Z", "path": "connect/mirror/src/main/java/org/apache/kafka/connect/mirror/MirrorConnectorConfig.java", "diffHunk": "@@ -229,8 +235,8 @@ Duration adminTimeout() {\n         props.putAll(originalsWithPrefix(SOURCE_CLUSTER_PREFIX));\n         props.keySet().retainAll(MirrorClientConfig.CLIENT_CONFIG_DEF.names());\n         props.putAll(originalsWithPrefix(CONSUMER_CLIENT_PREFIX));\n-        props.put(\"enable.auto.commit\", \"false\");\n-        props.put(\"auto.offset.reset\", \"earliest\");\n+        props.put(ENABLE_AUTO_COMMIT, \"false\");\n+        props.put(AUTH_OFFSET_RESET, CONSUMER_AUTO_OFFSET_RESET);", "originalCommit": "8594842653c4d944d8ddc403add123dee62bc8f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTcyNzU1NA==", "url": "https://github.com/apache/kafka/pull/8921#discussion_r449727554", "bodyText": "ACK", "author": "satishbellapu", "createdAt": "2020-07-04T01:33:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg4MjE4OA=="}], "type": "inlineReview"}, {"oid": "ce7aa32dc402163fdfe4587be2b3042987ec0613", "url": "https://github.com/apache/kafka/commit/ce7aa32dc402163fdfe4587be2b3042987ec0613", "message": "Improved the fix based on the review comments", "committedDate": "2020-07-04T01:25:02Z", "type": "commit"}, {"oid": "eaee882ee0141be107854262fc1bfde9a6a521dc", "url": "https://github.com/apache/kafka/commit/eaee882ee0141be107854262fc1bfde9a6a521dc", "message": "Added testcases", "committedDate": "2020-07-12T04:25:21Z", "type": "commit"}]}