{"pr_number": 8173, "pr_title": "KAFKA-9614: Not initialize topology twice in StreamTask", "pr_createdAt": "2020-02-26T18:24:38Z", "pr_url": "https://github.com/apache/kafka/pull/8173", "timeline": [{"oid": "58c817af11c2be32137c2199b819bc2a3a08cd8e", "url": "https://github.com/apache/kafka/commit/58c817af11c2be32137c2199b819bc2a3a08cd8e", "message": "first step", "committedDate": "2020-02-26T17:43:56Z", "type": "commit"}, {"oid": "e507c88ccb0196b53ddad7105bf37b1fefcd2785", "url": "https://github.com/apache/kafka/commit/e507c88ccb0196b53ddad7105bf37b1fefcd2785", "message": "Merge branch 'trunk' of https://github.com/apache/kafka into KMinor-not-initialize-topology-twice", "committedDate": "2020-02-26T17:44:04Z", "type": "commit"}, {"oid": "ef60891ca88d46a9f2bf6d26dfa16626420b4df9", "url": "https://github.com/apache/kafka/commit/ef60891ca88d46a9f2bf6d26dfa16626420b4df9", "message": "fix unit test", "committedDate": "2020-02-26T18:22:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc3ODIzNQ==", "url": "https://github.com/apache/kafka/pull/8173#discussion_r384778235", "bodyText": "Seems like maybe we could just get rid of the suspended state entirely, but I guess we plan to do that anyway if/when we remove support for EAGER", "author": "ableegoldman", "createdAt": "2020-02-26T21:30:59Z", "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamTask.java", "diffHunk": "@@ -282,9 +282,8 @@ public void resume() {\n                 break;\n \n             case SUSPENDED:\n-                // just re-initilaize the topology is sufficient\n-                initializeTopology();\n-\n+                // just transit the state without any logical changes: suspended and restoring states\n+                // are not actually any different for inner modules", "originalCommit": "ef60891ca88d46a9f2bf6d26dfa16626420b4df9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc4OTMwNQ==", "url": "https://github.com/apache/kafka/pull/8173#discussion_r384789305", "bodyText": "Yes -- from restoring to suspended it is only to update the local checkpoint file, from suspended to restoring there's actually nothing needed. In that sense restoring and suspended states are very similar already, BUT still not exactly the same.\nI do hope we get rid of it some time after we remove the EAGER protocol.", "author": "guozhangwang", "createdAt": "2020-02-26T21:52:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc3ODIzNQ=="}], "type": "inlineReview"}]}