{"pr_number": 7955, "pr_title": "KAFKA-9423: Refine layout of configuration options on website and make individual settings directly linkable", "pr_createdAt": "2020-01-14T12:10:14Z", "pr_url": "https://github.com/apache/kafka/pull/7955", "timeline": [{"oid": "9bfd0c4b1cc854716f05b60a3aba4956e3efd76f", "url": "https://github.com/apache/kafka/commit/9bfd0c4b1cc854716f05b60a3aba4956e3efd76f", "message": "KAFKA-9423: Refine layout of configuration options on website and make individual settings directly linkable", "committedDate": "2020-01-14T12:06:23Z", "type": "commit"}, {"oid": "5761888d74e43873282c0f927259d98d2aff9aff", "url": "https://github.com/apache/kafka/commit/5761888d74e43873282c0f927259d98d2aff9aff", "message": "Fixed unit test that was broken by the changed output of toHtml()", "committedDate": "2020-01-14T15:38:33Z", "type": "commit"}, {"oid": "77af2d2ca269775da3410852d41449313cfb1f31", "url": "https://github.com/apache/kafka/commit/77af2d2ca269775da3410852d41449313cfb1f31", "message": "Updated to reflect style discussions and cleaned up code a little.", "committedDate": "2020-01-21T15:33:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIyNzU4Mg==", "url": "https://github.com/apache/kafka/pull/7955#discussion_r369227582", "bodyText": "We should move this CSS to the website CSS file instead of having it inline here. The CSS file is in kafka-site, see https://github.com/apache/kafka-site/blob/asf-site/css/styles.css#L266.", "author": "mimaison", "createdAt": "2020-01-21T20:31:48Z", "path": "clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java", "diffHunk": "@@ -1453,19 +1453,20 @@ public String toHtml(Map<String, String> dynamicUpdateModes) {\n         List<ConfigKey> configs = sortedConfigs();\n         StringBuilder b = new StringBuilder();\n         b.append(\"<ul class=\\\"config-list\\\">\\n\");\n-\n         for (ConfigKey key : configs) {\n             if (key.internalConfig) {\n                 continue;\n             }\n-            b.append(\"<li>\");\n-            b.append(\"<b>\");\n-            b.append(key.name);\n-            b.append(\"</b>: \");\n-            b.append(key.documentation);\n-            b.append(\"<br/>\");\n-            // details\n-            b.append(\"<ul class=\\\"horizontal-list\\\">\");\n+            b.append(\"<li style=\\\"padding: 15 0 15 20; border-bottom: 1px solid black;\\\">\");", "originalCommit": "77af2d2ca269775da3410852d41449313cfb1f31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI3MDY5Mw==", "url": "https://github.com/apache/kafka/pull/7955#discussion_r369270693", "bodyText": "Ok, I'll add it to that file - was hoping to sneak past without having two separate pull requests ;)\nI'll just add a class \"config-list\" and put everything in there?", "author": "soenkeliebau", "createdAt": "2020-01-21T22:11:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIyNzU4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIyODExMw==", "url": "https://github.com/apache/kafka/pull/7955#discussion_r369228113", "bodyText": "Can we add line return after HTML block like tables, rows, list items so the generated HTML stays readable?", "author": "mimaison", "createdAt": "2020-01-21T20:33:00Z", "path": "clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java", "diffHunk": "@@ -1474,17 +1475,20 @@ public String toHtml(Map<String, String> dynamicUpdateModes) {\n                 String updateMode = dynamicUpdateModes.get(key.name);\n                 if (updateMode == null)\n                     updateMode = \"read-only\";\n-                addConfigDetail(b, \"Update Mode\", updateMode);\n+                addConfigDetail(b, \"Update Mode:\", updateMode);\n             }\n-            b.append(\"</ul>\");\n-            b.append(\"</li>\\n\");\n+            b.append(\"</tbody></table>\");\n+            b.append(\"</li>\");\n         }\n         b.append(\"</ul>\\n\");\n         return b.toString();\n     }\n \n     private static void addConfigDetail(StringBuilder builder, String name, String value) {\n-        builder.append(\"<li><b>\" + name + \"</b>: \" + value + \"</li>\");\n+        builder.append(\"<tr style=\\\"background-color: transparent; padding: 0 0 0 0;\\\">\" +\n+                \"<th style=\\\"border-width: 0; background-color: transparent; text-align: right; padding: 0 0 0 0; \\\">\" + name + \":</th>\" +\n+                \"<td style=\\\"border-width: 0; background-color: transparent; text-align: left; padding: 0 0 0 10;\\\">\" + value + \"</td>\" +\n+                \"</tr>\");", "originalCommit": "77af2d2ca269775da3410852d41449313cfb1f31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQyMTgxNg==", "url": "https://github.com/apache/kafka/pull/7955#discussion_r369421816", "bodyText": "I've added some newlines to make it more readable. It's still not great due to missing indentation, but I felt that would be taking it too far.", "author": "soenkeliebau", "createdAt": "2020-01-22T08:25:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIyODExMw=="}], "type": "inlineReview"}, {"oid": "cfb27bf4f7bda333dc81759aac1506ae767215d7", "url": "https://github.com/apache/kafka/commit/cfb27bf4f7bda333dc81759aac1506ae767215d7", "message": "Moved style definitions to .css file in kafka-site repo.", "committedDate": "2020-01-21T23:19:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTc2MDIwOQ==", "url": "https://github.com/apache/kafka/pull/7955#discussion_r375760209", "bodyText": "This makes stopbugs complain ... We should use %n in the format string instead of \\n", "author": "mimaison", "createdAt": "2020-02-06T10:41:18Z", "path": "clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java", "diffHunk": "@@ -1453,19 +1453,20 @@ public String toHtml(Map<String, String> dynamicUpdateModes) {\n         List<ConfigKey> configs = sortedConfigs();\n         StringBuilder b = new StringBuilder();\n         b.append(\"<ul class=\\\"config-list\\\">\\n\");\n-\n         for (ConfigKey key : configs) {\n             if (key.internalConfig) {\n                 continue;\n             }\n-            b.append(\"<li>\");\n-            b.append(\"<b>\");\n-            b.append(key.name);\n-            b.append(\"</b>: \");\n-            b.append(key.documentation);\n-            b.append(\"<br/>\");\n-            // details\n-            b.append(\"<ul class=\\\"horizontal-list\\\">\");\n+            b.append(\"<li>\\n\");\n+            b.append(String.format(\"<h4>\" +\n+                    \"<a id=\\\"%1$s\\\" href=\\\"#%1$s\\\">%1$s</a>\" +\n+                    \"</h4>\\n\", key.name));", "originalCommit": "cfb27bf4f7bda333dc81759aac1506ae767215d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkzMDUzMA==", "url": "https://github.com/apache/kafka/pull/7955#discussion_r376930530", "bodyText": "Done", "author": "soenkeliebau", "createdAt": "2020-02-10T08:55:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTc2MDIwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTc2MDU5MQ==", "url": "https://github.com/apache/kafka/pull/7955#discussion_r375760591", "bodyText": "No need for the extra :, addConfigDetail() already inserts it", "author": "mimaison", "createdAt": "2020-02-06T10:42:00Z", "path": "clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java", "diffHunk": "@@ -1474,17 +1475,20 @@ public String toHtml(Map<String, String> dynamicUpdateModes) {\n                 String updateMode = dynamicUpdateModes.get(key.name);\n                 if (updateMode == null)\n                     updateMode = \"read-only\";\n-                addConfigDetail(b, \"Update Mode\", updateMode);\n+                addConfigDetail(b, \"Update Mode:\", updateMode);", "originalCommit": "cfb27bf4f7bda333dc81759aac1506ae767215d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkyOTczMQ==", "url": "https://github.com/apache/kafka/pull/7955#discussion_r376929731", "bodyText": "Done", "author": "soenkeliebau", "createdAt": "2020-02-10T08:53:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTc2MDU5MQ=="}], "type": "inlineReview"}, {"oid": "1963b54cd979a8eb22556020d0242d194b50ee33", "url": "https://github.com/apache/kafka/commit/1963b54cd979a8eb22556020d0242d194b50ee33", "message": "Addressed comments from Michael.", "committedDate": "2020-02-10T08:57:14Z", "type": "commit"}]}