{"pr_number": 2989, "pr_title": "DROOLS-5394: Coverage Report Improvements (CSV File)", "pr_createdAt": "2020-07-14T10:12:05Z", "pr_url": "https://github.com/kiegroup/drools/pull/2989", "timeline": [{"oid": "ebf2a43c353d9184550a052ae28d894b3c7a4049", "url": "https://github.com/kiegroup/drools/commit/ebf2a43c353d9184550a052ae28d894b3c7a4049", "message": "DROOLS-5394: Improvements on Coverage Report", "committedDate": "2020-07-14T09:10:10Z", "type": "commit"}, {"oid": "6c01994aa263b20ed09afd01b8953b29d3824a10", "url": "https://github.com/kiegroup/drools/commit/6c01994aa263b20ed09afd01b8953b29d3824a10", "message": "DROOLS-5394: Improvements on Coverage Report", "committedDate": "2020-07-14T10:09:28Z", "type": "commit"}, {"oid": "f0a82d82ca3b50662c55796f178d768ec9eb4b73", "url": "https://github.com/kiegroup/drools/commit/f0a82d82ca3b50662c55796f178d768ec9eb4b73", "message": "DROOLS-5394: Improvements on Coverage Report", "committedDate": "2020-07-14T13:31:00Z", "type": "commit"}, {"oid": "96f88a29cd7fa607e1291233da2b82e8bb4f1400", "url": "https://github.com/kiegroup/drools/commit/96f88a29cd7fa607e1291233da2b82e8bb4f1400", "message": "DROOLS-5394: Tests", "committedDate": "2020-07-16T09:18:20Z", "type": "commit"}, {"oid": "be254407ef29b84857f49410954cf0b1a5475a87", "url": "https://github.com/kiegroup/drools/commit/be254407ef29b84857f49410954cf0b1a5475a87", "message": "DROOLS-5394: Tests", "committedDate": "2020-07-16T09:22:26Z", "type": "commit"}, {"oid": "6dd3b971cd0c07bd554ed3fce079d0f1f4fb7dbf", "url": "https://github.com/kiegroup/drools/commit/6dd3b971cd0c07bd554ed3fce079d0f1f4fb7dbf", "message": "Merge remote-tracking branch 'origin/master' into DROOLS-5394", "committedDate": "2020-07-16T09:22:36Z", "type": "commit"}, {"oid": "342fbebc02b85563a950293b79059dcefb5dfb54", "url": "https://github.com/kiegroup/drools/commit/342fbebc02b85563a950293b79059dcefb5dfb54", "message": "DROOLS-5394: Tests + Minors", "committedDate": "2020-07-16T09:46:59Z", "type": "commit"}, {"oid": "c12b8451215c962c4f397fa34ed11883e6afd416", "url": "https://github.com/kiegroup/drools/commit/c12b8451215c962c4f397fa34ed11883e6afd416", "message": "Merge remote-tracking branch 'origin/master' into DROOLS-5394", "committedDate": "2020-07-23T11:53:05Z", "type": "commit"}, {"oid": "9c9b270e497945345e9e6343a9e8a67dc11cedc7", "url": "https://github.com/kiegroup/drools/commit/9c9b270e497945345e9e6343a9e8a67dc11cedc7", "message": "DROOLS-5394: Changes Required during code review", "committedDate": "2020-07-23T11:54:22Z", "type": "commit"}, {"oid": "203ef64465e1f8e7a2bb25e1abd9d9913fcadf55", "url": "https://github.com/kiegroup/drools/commit/203ef64465e1f8e7a2bb25e1abd9d9913fcadf55", "message": "DROOLS-5394: Changes Required during code review", "committedDate": "2020-07-23T11:58:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcyNTQyNw==", "url": "https://github.com/kiegroup/drools/pull/2989#discussion_r459725427", "bodyText": "Not sure about this change: old logic is an audit log with ordered list of fired rules while now we will not have duplication\n(if a rule fires 10 times instead of once I think it is important to know) and neither ordering.\nFor the ordering should be enough to use a LinkedHashMap but still not sure about losing the duplication.\nIs this on purpose? Can you please clarify?", "author": "danielezonca", "createdAt": "2020-07-23T21:00:38Z", "path": "drools-scenario-simulation/drools-scenario-simulation-backend/src/main/java/org/drools/scenariosimulation/backend/runner/RuleScenarioRunnerHelper.java", "diffHunk": "@@ -99,8 +100,7 @@ protected ScenarioResultMetadata extractResultMetadata(Map<String, Object> reque\n         scenarioResultMetadata.addAllAvailable(availableRules);\n         scenarioResultMetadata.addAllExecuted(ruleExecuted);\n         final AtomicInteger counter = new AtomicInteger(0);\n-        coverageAgendaListener\n-                .getAuditsMessages().forEach(auditMessage -> scenarioResultMetadata.addAuditMessage(counter.addAndGet(1), auditMessage, \"INFO\"));\n+        ruleExecuted.keySet().forEach(ruleName -> scenarioResultMetadata.addAuditMessage(counter.addAndGet(1), ruleName, ConstantsHolder.EXECUTED));", "originalCommit": "203ef64465e1f8e7a2bb25e1abd9d9913fcadf55", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcyOTkzOA==", "url": "https://github.com/kiegroup/drools/pull/2989#discussion_r459729938", "bodyText": "@danielezonca You're right, it's wrong. I'll restore the previous list. Thanks", "author": "yesamer", "createdAt": "2020-07-23T21:10:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcyNTQyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg4OTc4MQ==", "url": "https://github.com/kiegroup/drools/pull/2989#discussion_r459889781", "bodyText": "@danielezonca Restored. Thank you for reported that.", "author": "yesamer", "createdAt": "2020-07-24T07:20:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcyNTQyNw=="}], "type": "inlineReview"}, {"oid": "7d6258d42a80ef35a7f92ab58ec328720f242b44", "url": "https://github.com/kiegroup/drools/commit/7d6258d42a80ef35a7f92ab58ec328720f242b44", "message": "DROOLS-5394: Changes Required during code review", "committedDate": "2020-07-24T06:10:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDAzOTU5Ng==", "url": "https://github.com/kiegroup/drools/pull/2989#discussion_r460039596", "bodyText": "Can you move rule1 to a variable?", "author": "danielezonca", "createdAt": "2020-07-24T13:05:44Z", "path": "drools-scenario-simulation/drools-scenario-simulation-backend/src/test/java/org/drools/scenariosimulation/backend/fluent/CoverageAgendaListenerTest.java", "diffHunk": "@@ -38,6 +38,6 @@ public void beforeMatchFired() {\n         assertEquals((Integer) 1, ruleExecuted.get(\"rule1\"));\n         List<String> auditMessages = coverageAgendaListener.getAuditsMessages();\n         assertEquals(1, auditMessages.size());\n-        assertEquals(auditMessages.get(0), CoverageAgendaListener.generateAuditMessage(\"rule1\"));\n+        assertEquals(\"rule1\", auditMessages.get(0));", "originalCommit": "7d6258d42a80ef35a7f92ab58ec328720f242b44", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDA5NjYwOQ==", "url": "https://github.com/kiegroup/drools/pull/2989#discussion_r460096609", "bodyText": "@danielezonca Done!", "author": "yesamer", "createdAt": "2020-07-24T14:42:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDAzOTU5Ng=="}], "type": "inlineReview"}, {"oid": "644c378e59f3ee51a03908947555349f8d99297f", "url": "https://github.com/kiegroup/drools/commit/644c378e59f3ee51a03908947555349f8d99297f", "message": "Merge remote-tracking branch 'origin/master' into DROOLS-5394", "committedDate": "2020-07-24T14:41:23Z", "type": "commit"}, {"oid": "8c78259e2d7e402c6daf00f205ca9c4db2bf07b7", "url": "https://github.com/kiegroup/drools/commit/8c78259e2d7e402c6daf00f205ca9c4db2bf07b7", "message": "DROOLS-5394: Changes Required during code review", "committedDate": "2020-07-24T14:41:41Z", "type": "commit"}]}