{"pr_number": 3048, "pr_title": "[KOGITO-2998] make optaplanner usage of knowledge builder compatible \u2026", "pr_createdAt": "2020-08-18T15:28:39Z", "pr_url": "https://github.com/kiegroup/drools/pull/3048", "timeline": [{"oid": "3833ea9e701d6d5f85d52503f355bf82a30e14be", "url": "https://github.com/kiegroup/drools/commit/3833ea9e701d6d5f85d52503f355bf82a30e14be", "message": "[KOGITO-2998] make optaplanner usage of knowledge builder compatible with native compilation", "committedDate": "2020-08-18T15:27:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjc4MTExNQ==", "url": "https://github.com/kiegroup/drools/pull/3048#discussion_r472781115", "bodyText": "Why you are not using org.kie.soup.xstream.XStreamUtils.createTrustingXStream anymore?", "author": "danielezonca", "createdAt": "2020-08-19T07:01:06Z", "path": "drools-compiler/src/main/java/org/drools/compiler/kproject/models/KieModuleMarshaller.java", "diffHunk": "@@ -0,0 +1,230 @@\n+/*\n+ * Copyright (c) 2020. Red Hat, Inc. and/or its affiliates.\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.drools.compiler.kproject.models;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+\n+import com.thoughtworks.xstream.XStream;\n+import com.thoughtworks.xstream.converters.MarshallingContext;\n+import com.thoughtworks.xstream.converters.UnmarshallingContext;\n+import com.thoughtworks.xstream.converters.basic.BooleanConverter;\n+import com.thoughtworks.xstream.converters.basic.ByteConverter;\n+import com.thoughtworks.xstream.converters.basic.DoubleConverter;\n+import com.thoughtworks.xstream.converters.basic.FloatConverter;\n+import com.thoughtworks.xstream.converters.basic.IntConverter;\n+import com.thoughtworks.xstream.converters.basic.LongConverter;\n+import com.thoughtworks.xstream.converters.basic.NullConverter;\n+import com.thoughtworks.xstream.converters.basic.ShortConverter;\n+import com.thoughtworks.xstream.converters.basic.StringConverter;\n+import com.thoughtworks.xstream.converters.collections.CollectionConverter;\n+import com.thoughtworks.xstream.converters.reflection.ReflectionConverter;\n+import com.thoughtworks.xstream.io.HierarchicalStreamReader;\n+import com.thoughtworks.xstream.io.HierarchicalStreamWriter;\n+import com.thoughtworks.xstream.io.xml.DomDriver;\n+import javax.xml.transform.Source;\n+import javax.xml.transform.stream.StreamSource;\n+import javax.xml.validation.Schema;\n+import javax.xml.validation.SchemaFactory;\n+\n+import com.thoughtworks.xstream.security.AnyTypePermission;\n+import org.drools.core.util.AbstractXStreamConverter;\n+import org.drools.core.util.IoUtils;\n+import org.kie.api.builder.model.KieBaseModel;\n+import org.kie.api.builder.model.KieModuleModel;\n+import org.xml.sax.SAXException;\n+\n+import static org.drools.core.util.IoUtils.readBytesFromInputStream;\n+\n+public class KieModuleMarshaller {\n+\n+    static final KieModuleMarshaller MARSHALLER = new KieModuleMarshaller();\n+\n+    private final XStream xStream;\n+\n+    private KieModuleMarshaller() {\n+        xStream = new XStream(new DomDriver()) {", "originalCommit": "3833ea9e701d6d5f85d52503f355bf82a30e14be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "062a82692df6605a58a081b4a22eb92c8560feaa", "url": "https://github.com/kiegroup/drools/commit/062a82692df6605a58a081b4a22eb92c8560feaa", "message": "[KOGITO-2998] use trusting xstream marshaller", "committedDate": "2020-08-19T07:19:29Z", "type": "commit"}]}