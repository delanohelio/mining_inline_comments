{"pr_number": 838, "pr_title": "PHOENIX-6034 Optimize InListIT", "pr_createdAt": "2020-07-21T06:53:55Z", "pr_url": "https://github.com/apache/phoenix/pull/838", "timeline": [{"oid": "cdeb6bf0b6365eb2c4c4be56e3c57e4f6a6faa8d", "url": "https://github.com/apache/phoenix/commit/cdeb6bf0b6365eb2c4c4be56e3c57e4f6a6faa8d", "message": "PHOENIX-6034 Optimize InListIT", "committedDate": "2020-07-21T06:51:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQwNTA0Ng==", "url": "https://github.com/apache/phoenix/pull/838#discussion_r477405046", "bodyText": "Instead of the initialized variable, could we change this to the @BeforeClass annotation instead?\nIn fact would the whole test still work if we only change @before to @BeforeClass?", "author": "lhofhansl", "createdAt": "2020-08-26T15:48:32Z", "path": "phoenix-core/src/it/java/org/apache/phoenix/end2end/InListIT.java", "diffHunk": "@@ -43,27 +46,39 @@\n import org.apache.phoenix.schema.types.PInteger;\n import org.apache.phoenix.util.PhoenixRuntime;\n import org.apache.phoenix.util.PropertiesUtil;\n+import org.junit.After;\n import org.junit.Before;\n import org.junit.Test;\n \n-import com.google.common.base.Function;\n-import com.google.common.base.Joiner;\n-import com.google.common.collect.Lists;\n-\n \n public class InListIT extends ParallelStatsDisabledIT {\n     private static final String TENANT_SPECIFIC_URL1 = getUrl() + ';' + TENANT_ID_ATTRIB + \"=tenant1\";\n-    String tableName;\n-    String descViewName;\n-    String ascViewName;\n+    private static boolean isInitialized = false;\n+    private static String tableName = generateUniqueName();\n+    private static String tableName2 = generateUniqueName();\n+    private static String descViewName = generateUniqueName();\n+    private static String ascViewName = generateUniqueName();\n+    private static String viewName1 = generateUniqueName();\n+    private static String viewName2 = generateUniqueName();\n+    private static String prefix = generateUniqueName();\n \n     @Before\n     public void setup() throws Exception {\n-        tableName = generateUniqueName();", "originalCommit": "cdeb6bf0b6365eb2c4c4be56e3c57e4f6a6faa8d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQyMTkzMg==", "url": "https://github.com/apache/phoenix/pull/838#discussion_r477421932", "bodyText": "And sorry I missed this for so long. I was off end of July and then missed it.", "author": "lhofhansl", "createdAt": "2020-08-26T16:13:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQwNTA0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMyMTgwNQ==", "url": "https://github.com/apache/phoenix/pull/838#discussion_r480321805", "bodyText": "would the whole test still work if we only change @before to @BeforeClass?\n\nYeah , actually @BeforeClass requires a method to be static so all the data structures need to be updated as static. I didn't spend time doing that probably because of being lazy though could have used @BeforeAll and make the Junit lifecycle to be @testinstance(Lifecycle.PER_CLASS) to avoid an initialized variable.", "author": "ankitsinghal", "createdAt": "2020-08-31T18:50:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQwNTA0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDgwNjI0Mw==", "url": "https://github.com/apache/phoenix/pull/838#discussion_r480806243", "bodyText": "I looked up @testinstance because it sounds interesting, but it's a Junit5 feature, and we're still on Junit 4. AFAICT The only solutions are your current one, or using @BeforeClass as you said.", "author": "stoty", "createdAt": "2020-09-01T04:55:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQwNTA0Ng=="}], "type": "inlineReview"}]}