{"pr_number": 3220, "pr_title": "Wip/6.0 Disallow FQN entity name in JPA compliance mode", "pr_createdAt": "2020-02-06T04:22:40Z", "pr_url": "https://github.com/hibernate/hibernate-orm/pull/3220", "timeline": [{"oid": "36d807f59b65606e9b9b9585b852a24fd20f06f8", "url": "https://github.com/hibernate/hibernate-orm/commit/36d807f59b65606e9b9b9585b852a24fd20f06f8", "message": "Disallow FQN as entity name in Jpa compliance mode", "committedDate": "2020-02-08T22:55:17Z", "type": "commit"}, {"oid": "36d807f59b65606e9b9b9585b852a24fd20f06f8", "url": "https://github.com/hibernate/hibernate-orm/commit/36d807f59b65606e9b9b9585b852a24fd20f06f8", "message": "Disallow FQN as entity name in Jpa compliance mode", "committedDate": "2020-02-08T22:55:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc0MDAwMA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3220#discussion_r376740000", "bodyText": "A little bit surprised @Nested is not allowed (seems @Test is the only expected annotation on top level). So I had to abandon my original plan to name the class to generic JpaCompliancTest to accommodate all kinds of violations.", "author": "NathanQingyangXu", "createdAt": "2020-02-08T23:01:41Z", "path": "hibernate-core/src/test/java/org/hibernate/orm/test/query/hql/JpaComplianceDisallowFQNTests.java", "diffHunk": "@@ -0,0 +1,43 @@\n+package org.hibernate.orm.test.query.hql;\n+\n+import org.hibernate.orm.test.query.sqm.BaseSqmUnitTest;\n+import org.hibernate.orm.test.query.sqm.domain.Person;\n+import org.hibernate.query.sqm.StrictJpaComplianceViolation;\n+import org.hibernate.testing.orm.junit.ExpectedException;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * @author Nahtan Xu\n+ */\n+@SuppressWarnings(\"WeakerAccess\")\n+public class JpaComplianceDisallowFQNTests extends BaseSqmUnitTest {\n+\n+\t@Override\n+\tprotected boolean strictJpaCompliance() {\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tprotected Class[] getAnnotatedClasses() {\n+\t\treturn new Class[] { Person.class };\n+\t}\n+\n+\t@Test\n+\t@ExpectedException(StrictJpaComplianceViolation.class)\n+\tpublic void testQuery() {\n+\t\tinterpretSelect( String.format( \"select p from %s p\", Person.class.getName() ) );\n+\t}\n+\t\n+\t@Test\n+\t@ExpectedException(StrictJpaComplianceViolation.class)\n+\tpublic void testUpdate() {\n+\t\tinterpretSelect( String.format( \"update %s set numberOfToes = 0\", Person.class.getName() ) );\n+\t}\n+\t\n+\t@Test\n+\t@ExpectedException(StrictJpaComplianceViolation.class)\n+\tpublic void testDelete() {\n+\t\tinterpretSelect( String.format( \"delete %s\", Person.class.getName() ) );\n+\t}\n+\t\n+}", "originalCommit": "36d807f59b65606e9b9b9585b852a24fd20f06f8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}