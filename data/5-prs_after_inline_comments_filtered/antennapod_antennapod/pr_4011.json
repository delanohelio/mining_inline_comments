{"pr_number": 4011, "pr_title": "show a warning dialog when importing a database", "pr_createdAt": "2020-04-06T04:13:24Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4011", "timeline": [{"oid": "1301bdd587bc0f2eae6d33c4e13a4f7d57482e6e", "url": "https://github.com/AntennaPod/AntennaPod/commit/1301bdd587bc0f2eae6d33c4e13a4f7d57482e6e", "message": "show a warning dialog when importing a database", "committedDate": "2020-04-06T04:12:19Z", "type": "commit"}, {"oid": "7bd259f59ae87bb14ad6079a1cdfbde2f859a89a", "url": "https://github.com/AntennaPod/AntennaPod/commit/7bd259f59ae87bb14ad6079a1cdfbde2f859a89a", "message": "soft keyboard", "committedDate": "2020-04-06T05:49:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg5NDg4Mw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4011#discussion_r403894883", "bodyText": "Please use a R.string resource, so the text can be translated", "author": "ByteHamster", "createdAt": "2020-04-06T07:54:43Z", "path": "app/src/main/java/de/danoeh/antennapod/fragment/preferences/ImportExportPreferencesFragment.java", "diffHunk": "@@ -173,16 +174,30 @@ private void exportDatabase() {\n     }\n \n     private void importDatabase() {\n-        if (Build.VERSION.SDK_INT >= 19) {\n-            Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\n-            intent.setType(\"*/*\");\n-            startActivityForResult(intent, REQUEST_CODE_RESTORE_DATABASE);\n-        } else {\n-            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n-            intent.setType(\"*/*\");\n-            startActivityForResult(Intent.createChooser(intent,\n-                    getString(R.string.import_select_file)), REQUEST_CODE_RESTORE_DATABASE);\n-        }\n+        // setup the alert builder\n+        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n+        builder.setTitle(R.string.database_import_label);\n+        builder.setMessage(R.string.database_import_warning);\n+\n+        // add a button\n+        builder.setNegativeButton(\"NO\", null);", "originalCommit": "7bd259f59ae87bb14ad6079a1cdfbde2f859a89a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg5NjIxNg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4011#discussion_r403896216", "bodyText": "You can directly call builder.show without creating a dialog object", "author": "ByteHamster", "createdAt": "2020-04-06T07:57:09Z", "path": "app/src/main/java/de/danoeh/antennapod/fragment/preferences/ImportExportPreferencesFragment.java", "diffHunk": "@@ -173,16 +174,30 @@ private void exportDatabase() {\n     }\n \n     private void importDatabase() {\n-        if (Build.VERSION.SDK_INT >= 19) {\n-            Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\n-            intent.setType(\"*/*\");\n-            startActivityForResult(intent, REQUEST_CODE_RESTORE_DATABASE);\n-        } else {\n-            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n-            intent.setType(\"*/*\");\n-            startActivityForResult(Intent.createChooser(intent,\n-                    getString(R.string.import_select_file)), REQUEST_CODE_RESTORE_DATABASE);\n-        }\n+        // setup the alert builder\n+        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n+        builder.setTitle(R.string.database_import_label);\n+        builder.setMessage(R.string.database_import_warning);\n+\n+        // add a button\n+        builder.setNegativeButton(\"NO\", null);\n+        builder.setPositiveButton(\"Replace\", (dialog, which) -> {\n+                    if (Build.VERSION.SDK_INT >= 19) {\n+                        Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\n+                        intent.setType(\"*/*\");\n+                        startActivityForResult(intent, REQUEST_CODE_RESTORE_DATABASE);\n+                    } else {\n+                        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n+                        intent.setType(\"*/*\");\n+                        startActivityForResult(Intent.createChooser(intent,\n+                                getString(R.string.import_select_file)), REQUEST_CODE_RESTORE_DATABASE);\n+                    }\n+                }\n+        );\n+\n+        // create and show the alert dialog\n+        AlertDialog dialog = builder.create();\n+        dialog.show();", "originalCommit": "7bd259f59ae87bb14ad6079a1cdfbde2f859a89a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cc764de0593db1b128552c0d582a1e3a8ce59d36", "url": "https://github.com/AntennaPod/AntennaPod/commit/cc764de0593db1b128552c0d582a1e3a8ce59d36", "message": "cleaner code", "committedDate": "2020-04-06T14:54:16Z", "type": "commit"}, {"oid": "e021869529d78830d512f629e0f4999b623606dd", "url": "https://github.com/AntennaPod/AntennaPod/commit/e021869529d78830d512f629e0f4999b623606dd", "message": "remove extra spaces", "committedDate": "2020-04-06T15:00:59Z", "type": "commit"}]}