{"pr_number": 4486, "pr_title": "Hardware keyboard support ", "pr_createdAt": "2020-10-01T17:46:47Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4486", "timeline": [{"oid": "115acf149191f6b0de6cf1ccea5793d8d6333986", "url": "https://github.com/AntennaPod/AntennaPod/commit/115acf149191f6b0de6cf1ccea5793d8d6333986", "message": "add basic hardware support", "committedDate": "2020-09-27T18:57:27Z", "type": "commit"}, {"oid": "0be98d769264ef2f1b776ad9333090d9f3e88f0a", "url": "https://github.com/AntennaPod/AntennaPod/commit/0be98d769264ef2f1b776ad9333090d9f3e88f0a", "message": "add volume keys", "committedDate": "2020-10-01T17:06:36Z", "type": "commit"}, {"oid": "2244dc207c9ed199077b528d26ed12d4d1a8c63d", "url": "https://github.com/AntennaPod/AntennaPod/commit/2244dc207c9ed199077b528d26ed12d4d1a8c63d", "message": "add hardware key support for VideoplayerActivity", "committedDate": "2020-10-01T17:43:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNTY1OA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498425658", "bodyText": "Hmm, I think I would skip the mute functionality. For Audio, it is kind of pointless.", "author": "ByteHamster", "createdAt": "2020-10-01T18:04:43Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,61 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        Intent serviceIntent = new Intent(this, PlaybackService.class);\n+        serviceIntent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);\n+\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute", "originalCommit": "2244dc207c9ed199077b528d26ed12d4d1a8c63d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ1NTQzNA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498455434", "bodyText": "Yes, I agree this is a personal decision but as most of the users use AntennaPod without an hardware keyboard and @alexanderadam wants a mute function, I think this should stay implemented, anyway.", "author": "asdoi", "createdAt": "2020-10-01T19:02:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNTY1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTQxMw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498509413", "bodyText": "The issue is only about video (and it contains things like captioning, which AntennaPod does not support).\n@alexanderadam Do you actually need muting for audio podcasts or was the table just an example?", "author": "ByteHamster", "createdAt": "2020-10-01T20:57:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNTY1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODYzNjY0OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498636649", "bodyText": "Ah sorry! @ByteHamster you're absolutely right, this was just an example. I copied these shortcuts from somewhere.\nI just removed the mute stuff from my comment.\nSorry about the confusion.\nIMHO mute really doesn't make any sense. I would simply stop the track if I don't want (or can't) to listen anymore.\n@asdoi thank you so much for working on this! \ud83d\ude4f", "author": "alexanderadam", "createdAt": "2020-10-02T06:29:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNTY1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg2NDI0OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498864249", "bodyText": "Ok. I now removed it for audio podcasts (MainActivty) should I also remove it for videos (VideoPlayerActivity)", "author": "asdoi", "createdAt": "2020-10-02T14:40:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNTY1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNjY3MA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498426670", "bodyText": "The media button receiver is not a service. I would try using a broadcast instead. I think we have a method somewhere that is called \"sendLocalBroadcast\" or something like that.", "author": "ByteHamster", "createdAt": "2020-10-01T18:06:41Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,61 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        Intent serviceIntent = new Intent(this, PlaybackService.class);\n+        serviceIntent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);\n+\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) == 0) {\n+                        //Unmute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);\n+                    } else {\n+                        //Mute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);\n+                    }\n+                }\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            default:\n+                return super.onKeyUp(keyCode, event);\n+        }\n+\n+        if (customKeyCode != null) {\n+            serviceIntent.putExtra(MediaButtonReceiver.EXTRA_KEYCODE, customKeyCode);\n+            ContextCompat.startForegroundService(this, serviceIntent);", "originalCommit": "2244dc207c9ed199077b528d26ed12d4d1a8c63d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ1MzU3Ng==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498453576", "bodyText": "I am using the PlaybackService (l. 523), I only use the EXTRA_KEYCODE from MediaButtonReceiver as name of the extras.", "author": "asdoi", "createdAt": "2020-10-01T18:58:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNjY3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwNjk3Mg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498506972", "bodyText": "Oh, sorry. That line was pretty far away. I'm wondering if this could lead to problems. MediaButtonReceiver uses a few more arguments for the PlaybackService. Maybe it would be better to send this to MediaButtonReceiver, just like the widget does. Not 100% sure.", "author": "ByteHamster", "createdAt": "2020-10-01T20:53:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNjY3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg2NTU0OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498865549", "bodyText": "If I send the new KeyEvent to MediaButtonReceiver the delay between the press and the responding action increased (on my emulator) a lot. Furthermore I took the intent from the MediaButtonReceiver, so the behaviour is the same.", "author": "asdoi", "createdAt": "2020-10-02T14:43:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNjY3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNzQwNA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498427404", "bodyText": "For double-tapping forward and backward, we already have a nice little animation. Could you try to add it here, too?", "author": "ByteHamster", "createdAt": "2020-10-01T18:08:05Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,96 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();", "originalCommit": "2244dc207c9ed199077b528d26ed12d4d1a8c63d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4286042c28fb2104df362f79660adce2ee5e8851", "url": "https://github.com/AntennaPod/AntennaPod/commit/4286042c28fb2104df362f79660adce2ee5e8851", "message": "add animations", "committedDate": "2020-10-01T19:06:45Z", "type": "commit"}, {"oid": "f3a82acba4b3a208013a66ddf1b515717b4837d3", "url": "https://github.com/AntennaPod/AntennaPod/commit/f3a82acba4b3a208013a66ddf1b515717b4837d3", "message": "fix codestyle", "committedDate": "2020-10-01T19:12:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTgyOQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498509829", "bodyText": "This could be painful for the ears. I think it would be better to only have that feature on supported Android versions and do nothing on older systems.", "author": "ByteHamster", "createdAt": "2020-10-01T20:58:51Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,102 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) == 0) {\n+                        //Unmute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,\n+                                audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);", "originalCommit": "f3a82acba4b3a208013a66ddf1b515717b4837d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg2NjIyNg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498866226", "bodyText": "Yes I agree, I removed the Unmute part, should I also remove the mute part?", "author": "asdoi", "createdAt": "2020-10-02T14:44:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTgyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMDk2Ng==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498510966", "bodyText": "This looks a bit strange. Doesn't Android have key bindings for going back, anyway?", "author": "ByteHamster", "createdAt": "2020-10-01T21:01:11Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,102 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) == 0) {\n+                        //Unmute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,\n+                                audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);\n+                    } else {\n+                        //Mute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);\n+                    }\n+                }\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_ESCAPE:\n+            case KeyEvent.KEYCODE_F:\n+                //Exit fullscreen mode\n+                onOptionsItemSelected(new ActionMenuItem(this, 0, android.R.id.home, 0, 0, \"\"));", "originalCommit": "f3a82acba4b3a208013a66ddf1b515717b4837d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMTcxNw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498511717", "bodyText": "I think this could lead to problems. If AntennaPod swallows key events, standard system keys could no longer work (things like copy-paste?)", "author": "ByteHamster", "createdAt": "2020-10-01T21:02:47Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,102 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) == 0) {\n+                        //Unmute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,\n+                                audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);\n+                    } else {\n+                        //Mute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);\n+                    }\n+                }\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_ESCAPE:\n+            case KeyEvent.KEYCODE_F:\n+                //Exit fullscreen mode\n+                onOptionsItemSelected(new ActionMenuItem(this, 0, android.R.id.home, 0, 0, \"\"));\n+                break;\n+            case KeyEvent.KEYCODE_P:\n+                //Toggle picture-in-picture mode\n+                compatEnterPictureInPicture();\n+                break;\n+            //Go to x% of video:\n+            case KeyEvent.KEYCODE_0:\n+                videoPercent = 0f;\n+                break;\n+            case KeyEvent.KEYCODE_1:\n+                videoPercent = 0.1f;\n+                break;\n+            case KeyEvent.KEYCODE_2:\n+                videoPercent = 0.2f;\n+                break;\n+            case KeyEvent.KEYCODE_3:\n+                videoPercent = 0.3f;\n+                break;\n+            case KeyEvent.KEYCODE_4:\n+                videoPercent = 0.4f;\n+                break;\n+            case KeyEvent.KEYCODE_5:\n+                videoPercent = 0.5f;\n+                break;\n+            case KeyEvent.KEYCODE_6:\n+                videoPercent = 0.6f;\n+                break;\n+            case KeyEvent.KEYCODE_7:\n+                videoPercent = 0.7f;\n+                break;\n+            case KeyEvent.KEYCODE_8:\n+                videoPercent = 0.8f;\n+                break;\n+            case KeyEvent.KEYCODE_9:\n+                videoPercent = 0.9f;\n+                break;\n+            default:\n+                return super.onKeyUp(keyCode, event);\n+        }\n+\n+        if (videoPercent != null) {\n+            controller.seekTo((int) (videoPercent * controller.getDuration()));\n+        }\n+        return true;", "originalCommit": "f3a82acba4b3a208013a66ddf1b515717b4837d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg3MTg2OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498871869", "bodyText": "For unhandled keycodes the default case is called which calls super.onKeyUp(keyCode, event); (l. 573)", "author": "asdoi", "createdAt": "2020-10-02T14:53:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMTcxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMjIzOA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498512238", "bodyText": "Does this conflict with navigating the app using a dpad? (related: #445)", "author": "ByteHamster", "createdAt": "2020-10-01T21:04:01Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,64 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        Intent serviceIntent = new Intent(this, PlaybackService.class);\n+        serviceIntent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);\n+\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:", "originalCommit": "f3a82acba4b3a208013a66ddf1b515717b4837d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg3MjkzOA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498872938", "bodyText": "Yes, on my emulator the arrow buttons sometimes also change the current focused view. I did not find a way to disable this.", "author": "asdoi", "createdAt": "2020-10-02T14:54:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMjIzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5NDEwMQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498894101", "bodyText": "Hmm. Then this mapping could cause issues with devices that do not have a touch screen (eg. Android TV). I would rather use a key mapping that does not interfere with navigation.", "author": "ByteHamster", "createdAt": "2020-10-02T15:30:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMjIzOA=="}], "type": "inlineReview"}, {"oid": "c5f1dd55957ae822211c2ee077957ff68c06a39c", "url": "https://github.com/AntennaPod/AntennaPod/commit/c5f1dd55957ae822211c2ee077957ff68c06a39c", "message": "remove mute from MainActivity", "committedDate": "2020-10-02T14:39:11Z", "type": "commit"}, {"oid": "0978cce38b0d6785a0c6118d841d8a4bdd7e8573", "url": "https://github.com/AntennaPod/AntennaPod/commit/0978cce38b0d6785a0c6118d841d8a4bdd7e8573", "message": "move intent to if clause", "committedDate": "2020-10-02T14:55:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5NDk3OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498894979", "bodyText": "Does the \"forward button skips\" preference influence the behavior of the key bindings? If I recall correctly, that was somehow related to the hardwarebutton extra.", "author": "ByteHamster", "createdAt": "2020-10-02T15:31:39Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,48 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            default:\n+                return super.onKeyUp(keyCode, event);\n+        }\n+\n+        if (customKeyCode != null) {\n+            Intent intent = new Intent(this, PlaybackService.class);\n+            intent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);", "originalCommit": "0978cce38b0d6785a0c6118d841d8a4bdd7e8573", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk5MTI3MA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498991270", "bodyText": "No it does not have any affect but as this line is not needed, let us keep it save", "author": "asdoi", "createdAt": "2020-10-02T18:43:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5NDk3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5OTAyNg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498899026", "bodyText": "I would also remove the mute part. Could be confusing otherwise.", "author": "ByteHamster", "createdAt": "2020-10-02T15:38:56Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,98 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) > 0) {\n+                        //Mute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);", "originalCommit": "0978cce38b0d6785a0c6118d841d8a4bdd7e8573", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2f1e856b4ac72fb237f4a9e0a774f6c0d9770ef0", "url": "https://github.com/AntennaPod/AntennaPod/commit/2f1e856b4ac72fb237f4a9e0a774f6c0d9770ef0", "message": "mute only on api > 23", "committedDate": "2020-10-02T18:32:46Z", "type": "commit"}, {"oid": "f1c01893174d486fede5cf8566a45d769534cf28", "url": "https://github.com/AntennaPod/AntennaPod/commit/f1c01893174d486fede5cf8566a45d769534cf28", "message": "mute only on api > 23", "committedDate": "2020-10-02T18:33:23Z", "type": "commit"}, {"oid": "33a048ba7fd8d17440937f3efc2e6ec71be875d2", "url": "https://github.com/AntennaPod/AntennaPod/commit/33a048ba7fd8d17440937f3efc2e6ec71be875d2", "message": "remove HardwareButton", "committedDate": "2020-10-02T18:41:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA0NTIxNA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r499045214", "bodyText": "Something like the following would make the code shorter and also allows to remove the variable videoPercent. I think having super.onKeyUp(keyCode, event) in the end of the method would also make it easier to see that the method still calls the system method.\nThis is a pretty common pattern when converting chars in c/c++, so I guess it should be okay to understand (even if it is a bit less self-explanatory than your version).\nif (keyCode >= KeyEvent.KEYCODE_0 && keyCode <= KeyEvent.KEYCODE_9) {\n    controller.seekTo((int) (0.1f * (keyCode - KeyEvent.KEYCODE_0) * controller.getDuration()));\n    return true;\n}", "author": "ByteHamster", "createdAt": "2020-10-02T20:52:37Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,95 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    return super.onKeyUp(keyCode, event);\n+                }\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_ESCAPE:\n+            case KeyEvent.KEYCODE_F:\n+                //Exit fullscreen mode\n+                onBackPressed();\n+                break;\n+            case KeyEvent.KEYCODE_P:\n+                //Toggle picture-in-picture mode\n+                compatEnterPictureInPicture();\n+                break;\n+            //Go to x% of video:\n+            case KeyEvent.KEYCODE_0:\n+                videoPercent = 0f;\n+                break;\n+            case KeyEvent.KEYCODE_1:\n+                videoPercent = 0.1f;\n+                break;\n+            case KeyEvent.KEYCODE_2:\n+                videoPercent = 0.2f;\n+                break;\n+            case KeyEvent.KEYCODE_3:\n+                videoPercent = 0.3f;\n+                break;\n+            case KeyEvent.KEYCODE_4:\n+                videoPercent = 0.4f;\n+                break;\n+            case KeyEvent.KEYCODE_5:\n+                videoPercent = 0.5f;\n+                break;\n+            case KeyEvent.KEYCODE_6:\n+                videoPercent = 0.6f;\n+                break;\n+            case KeyEvent.KEYCODE_7:\n+                videoPercent = 0.7f;\n+                break;\n+            case KeyEvent.KEYCODE_8:\n+                videoPercent = 0.8f;\n+                break;\n+            case KeyEvent.KEYCODE_9:\n+                videoPercent = 0.9f;\n+                break;", "originalCommit": "33a048ba7fd8d17440937f3efc2e6ec71be875d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "84b6387bc2f14f8eb010e887d899092caf68f841", "url": "https://github.com/AntennaPod/AntennaPod/commit/84b6387bc2f14f8eb010e887d899092caf68f841", "message": "add return super.onKeyUp() to the bottom", "committedDate": "2020-10-02T21:09:05Z", "type": "commit"}, {"oid": "c9fa719705ba1066e7504c8226eedf181f81b254", "url": "https://github.com/AntennaPod/AntennaPod/commit/c9fa719705ba1066e7504c8226eedf181f81b254", "message": "update shortcuts", "committedDate": "2020-10-14T15:42:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNjMwMw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r504906303", "bodyText": "Could you please add AudioManager.FLAG_SHOW_UI here, too?", "author": "ByteHamster", "createdAt": "2020-10-14T19:03:10Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,68 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                return true;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                return true;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                return true;\n+            case KeyEvent.KEYCODE_F:\n+            case KeyEvent.KEYCODE_ESCAPE:\n+                //Exit fullscreen mode\n+                onBackPressed();\n+                return true;\n+            case KeyEvent.KEYCODE_I:\n+                //Toggle picture-in-picture mode\n+                compatEnterPictureInPicture();\n+                return true;\n+            case KeyEvent.KEYCODE_PLUS: //Fallthrough\n+            case KeyEvent.KEYCODE_W:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_MINUS: //Fallthrough\n+            case KeyEvent.KEYCODE_S:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);", "originalCommit": "c9fa719705ba1066e7504c8226eedf181f81b254", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNjQ1OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r504906459", "bodyText": "Checkstyle complains that there is no default case.", "author": "ByteHamster", "createdAt": "2020-10-14T19:03:27Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,68 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                return true;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                return true;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                return true;\n+            case KeyEvent.KEYCODE_F:\n+            case KeyEvent.KEYCODE_ESCAPE:\n+                //Exit fullscreen mode\n+                onBackPressed();\n+                return true;\n+            case KeyEvent.KEYCODE_I:\n+                //Toggle picture-in-picture mode\n+                compatEnterPictureInPicture();\n+                return true;\n+            case KeyEvent.KEYCODE_PLUS: //Fallthrough\n+            case KeyEvent.KEYCODE_W:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_MINUS: //Fallthrough\n+            case KeyEvent.KEYCODE_S:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                    return true;\n+                }\n+                break;", "originalCommit": "c9fa719705ba1066e7504c8226eedf181f81b254", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYyMjM3MQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r505622371", "bodyText": "But there is no need for a default case.", "author": "asdoi", "createdAt": "2020-10-15T15:09:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNjQ1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcxNzI4OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r505717289", "bodyText": "Okay, I can merge it as-is (even though merging things with failing tests shows scary warnings :P)", "author": "ByteHamster", "createdAt": "2020-10-15T17:30:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNjQ1OQ=="}], "type": "inlineReview"}, {"oid": "7b9ede3d9adc0045d27a1890f83c54424b69f24a", "url": "https://github.com/AntennaPod/AntennaPod/commit/7b9ede3d9adc0045d27a1890f83c54424b69f24a", "message": "show ui on mute", "committedDate": "2020-10-15T15:10:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcxMDUwNA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r505710504", "bodyText": "This should be lowering ;)\nActually, I would suggest to just remove the comments explaining what is done. I think it's pretty obvious what the code does and it is always just a single line. Comments that basically just repeat the code make the code harder to read (more information readers needs to process).\nComments like Fallthrough explain things that developers need to have an eye on. The comment Go to x% of video is also fine because when looking at the code, it could take a second to get what it does. In contrast, a comment like Toggle picture-in-picture mode immediately followed compatEnterPictureInPicture(); does not really add value, in my opinion.", "author": "ByteHamster", "createdAt": "2020-10-15T17:18:29Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,58 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_PLUS: //Fallthrough\n+            case KeyEvent.KEYCODE_W:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_MINUS: //Fallthrough\n+            case KeyEvent.KEYCODE_S:\n+                //Raise volume", "originalCommit": "7b9ede3d9adc0045d27a1890f83c54424b69f24a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcxMDgyMQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r505710821", "bodyText": "Fallthrough comment missing :)", "author": "ByteHamster", "createdAt": "2020-10-15T17:19:03Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,68 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                return true;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                return true;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                return true;\n+            case KeyEvent.KEYCODE_F:", "originalCommit": "7b9ede3d9adc0045d27a1890f83c54424b69f24a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3893bf6cf3a4c8e2af407b2742d216a66170d173", "url": "https://github.com/AntennaPod/AntennaPod/commit/3893bf6cf3a4c8e2af407b2742d216a66170d173", "message": "update comments", "committedDate": "2020-10-15T17:56:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTgxMjc0Mg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r505812742", "bodyText": "Could you please make this line shorter (same for the mute feature of the other class)? That checkstyle issue can be fixed more cleanly than the missing default case :)", "author": "ByteHamster", "createdAt": "2020-10-15T20:16:24Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,52 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P:\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_PLUS: //Fallthrough\n+            case KeyEvent.KEYCODE_W:\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_MINUS: //Fallthrough\n+            case KeyEvent.KEYCODE_S:\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_M:\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, AudioManager.FLAG_SHOW_UI);", "originalCommit": "3893bf6cf3a4c8e2af407b2742d216a66170d173", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bf0bfd2a2b37a5ad08b0cd0115e51ebf1ec726e1", "url": "https://github.com/AntennaPod/AntennaPod/commit/bf0bfd2a2b37a5ad08b0cd0115e51ebf1ec726e1", "message": "fix checkstyle", "committedDate": "2020-10-16T14:19:11Z", "type": "commit"}]}