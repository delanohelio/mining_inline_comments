{"pr_number": 4582, "pr_title": "Share exported logs added", "pr_createdAt": "2020-10-22T10:26:15Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4582", "timeline": [{"oid": "d87296fad10ab233dd571a63b84da11bc8a8a7c0", "url": "https://github.com/AntennaPod/AntennaPod/commit/d87296fad10ab233dd571a63b84da11bc8a8a7c0", "message": "share feature added in export log and repositioned the export snack message in middle of screen", "committedDate": "2020-10-22T07:40:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDA4MzAxNg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4582#discussion_r510083016", "bodyText": "I think this snackbar is no longer needed when the share dialog opens anyway", "author": "ByteHamster", "createdAt": "2020-10-22T11:23:59Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/BugReportActivity.java", "diffHunk": "@@ -58,12 +64,35 @@ protected void onCreate(Bundle savedInstanceState) {\n                 filename.createNewFile();\n                 String cmd = \"logcat -d -f \" + filename.getAbsolutePath();\n                 Runtime.getRuntime().exec(cmd);\n-                Snackbar.make(findViewById(android.R.id.content),\n-                        filename.getAbsolutePath(), Snackbar.LENGTH_SHORT).show();\n+                Snackbar snack = Snackbar.make(findViewById(android.R.id.content),\n+                        filename.getAbsolutePath(), Snackbar.LENGTH_SHORT);", "originalCommit": "d87296fad10ab233dd571a63b84da11bc8a8a7c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cf7ab4a17c75a45d1f024d37a8159c519b9e1303", "url": "https://github.com/AntennaPod/AntennaPod/commit/cf7ab4a17c75a45d1f024d37a8159c519b9e1303", "message": "export log snackbar removed and updated the log file share", "committedDate": "2020-10-22T14:37:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ0OTQ4NQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4582#discussion_r510449485", "bodyText": "I think it would be better to create a new string here with a text like No compatible apps found.", "author": "ByteHamster", "createdAt": "2020-10-22T20:51:59Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/BugReportActivity.java", "diffHunk": "@@ -58,12 +69,36 @@ protected void onCreate(Bundle savedInstanceState) {\n                 filename.createNewFile();\n                 String cmd = \"logcat -d -f \" + filename.getAbsolutePath();\n                 Runtime.getRuntime().exec(cmd);\n-                Snackbar.make(findViewById(android.R.id.content),\n-                        filename.getAbsolutePath(), Snackbar.LENGTH_SHORT).show();\n+\n+                //share file\n+                try {\n+                    Intent shareIntent = new Intent(Intent.ACTION_SEND);\n+                    shareIntent.setType(\"text/*\");\n+                    Uri fileUri = FileProvider.getUriForFile(this, this.getString(de.danoeh.antennapod.core.R.string.provider_authority),\n+                            new File(filename.getAbsolutePath()));\n+                    shareIntent.putExtra(Intent.EXTRA_STREAM,  fileUri);\n+                    shareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n+                    if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.KITKAT) {\n+                        List<ResolveInfo> resInfoList = this.getPackageManager().queryIntentActivities(shareIntent, PackageManager.MATCH_DEFAULT_ONLY);\n+                        for (ResolveInfo resolveInfo : resInfoList) {\n+                            String packageName = resolveInfo.activityInfo.packageName;\n+                            this.grantUriPermission(packageName, fileUri, Intent.FLAG_GRANT_READ_URI_PERMISSION);\n+                        }\n+                    }\n+                    this.startActivity(Intent.createChooser(shareIntent, this.getString(de.danoeh.antennapod.core.R.string.share_file_label)));\n+\n+                }\n+                catch (Exception e){\n+                    e.printStackTrace();\n+                    Snackbar.make(findViewById(android.R.id.content),\"Failed to share file\", Snackbar.LENGTH_LONG).show();", "originalCommit": "cf7ab4a17c75a45d1f024d37a8159c519b9e1303", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "79b0d93d1a20710de59e4d9a9f83ebdeda6324c1", "url": "https://github.com/AntennaPod/AntennaPod/commit/79b0d93d1a20710de59e4d9a9f83ebdeda6324c1", "message": "code style changes", "committedDate": "2020-10-23T04:22:55Z", "type": "commit"}, {"oid": "638b7005ba5cb65499fee89c4ea0978948725afd", "url": "https://github.com/AntennaPod/AntennaPod/commit/638b7005ba5cb65499fee89c4ea0978948725afd", "message": "change in code style", "committedDate": "2020-10-23T04:53:56Z", "type": "commit"}, {"oid": "b1fa38a3f37fc38d77e761345358629e92ac04f5", "url": "https://github.com/AntennaPod/AntennaPod/commit/b1fa38a3f37fc38d77e761345358629e92ac04f5", "message": "code style changes", "committedDate": "2020-10-23T05:03:37Z", "type": "commit"}, {"oid": "0d4054d7eae53d6106dc0d41f98b0b38a2fa5b5b", "url": "https://github.com/AntennaPod/AntennaPod/commit/0d4054d7eae53d6106dc0d41f98b0b38a2fa5b5b", "message": "string moved in core folder", "committedDate": "2020-10-24T05:08:19Z", "type": "commit"}, {"oid": "4ee8a30a6867c9b4524fcfaf8164ef71c8d31a52", "url": "https://github.com/AntennaPod/AntennaPod/commit/4ee8a30a6867c9b4524fcfaf8164ef71c8d31a52", "message": "Update strings.xml", "committedDate": "2020-10-24T05:20:53Z", "type": "commit"}]}