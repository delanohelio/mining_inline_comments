{"pr_number": 3326, "pr_title": "Fixes: #3179 Make category search non case-sensitive", "pr_createdAt": "2020-01-16T09:09:22Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/3326", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwODE5NQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#discussion_r368308195", "bodyText": "Don\u2019t change CategoryClient directly. Change the top layer method that is passing the filter value. In this case it would be the corresponding fragment.", "author": "maskaravivek", "createdAt": "2020-01-19T17:07:02Z", "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryClient.java", "diffHunk": "@@ -30,14 +30,15 @@ public CategoryClient(CategoryInterface CategoryInterface) {\n \n     /**\n      * Searches for categories containing the specified string.\n+     * It will be converted to Lower Case as the server performs Case-insensitive search.\n      *\n      * @param filter    The string to be searched\n      * @param itemLimit How many results are returned\n      * @param offset    Starts returning items from the nth result. If offset is 9, the response starts with the 9th item of the search result\n      * @return\n      */\n     public Observable<String> searchCategories(String filter, int itemLimit, int offset) {\n-        return responseToCategoryName(CategoryInterface.searchCategories(filter, itemLimit, offset));\n+        return responseToCategoryName(CategoryInterface.searchCategories(filter.toLowerCase(), itemLimit, offset));", "originalCommit": "7bee1103084651c4ef0c55a3f8a829d244b95693", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwODI1Mw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#discussion_r368308253", "bodyText": "Same as above", "author": "maskaravivek", "createdAt": "2020-01-19T17:07:52Z", "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryClient.java", "diffHunk": "@@ -55,14 +56,15 @@ public CategoryClient(CategoryInterface CategoryInterface) {\n \n     /**\n      * Searches for categories starting with the specified string.\n+     * It will be converted to Lower Case as the server performs Case-insensitive search.\n      *\n      * @param prefix    The prefix to be searched\n      * @param itemLimit How many results are returned\n      * @param offset    Starts returning items from the nth result. If offset is 9, the response starts with the 9th item of the search result\n      * @return\n      */\n     public Observable<String> searchCategoriesForPrefix(String prefix, int itemLimit, int offset) {\n-        return responseToCategoryName(CategoryInterface.searchCategoriesForPrefix(prefix, itemLimit, offset));\n+        return responseToCategoryName(CategoryInterface.searchCategoriesForPrefix(prefix.toLowerCase(), itemLimit, offset));", "originalCommit": "7bee1103084651c4ef0c55a3f8a829d244b95693", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwODMyNQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#discussion_r368308325", "bodyText": "Are the java doc changes in this class related to the PR? If not it would be great if you could create another PR for it", "author": "maskaravivek", "createdAt": "2020-01-19T17:08:53Z", "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryItem.java", "diffHunk": "@@ -3,6 +3,10 @@\n import android.os.Parcel;\n import android.os.Parcelable;\n \n+/**", "originalCommit": "7bee1103084651c4ef0c55a3f8a829d244b95693", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5b05c97ec3d77e7900bad40edc95e188ccacb5d1", "url": "https://github.com/commons-app/apps-android-commons/commit/5b05c97ec3d77e7900bad40edc95e188ccacb5d1", "message": "CategoryItem: reverting javadoc changes", "committedDate": "2020-01-19T13:53:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODcwMjU1OQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#discussion_r368702559", "bodyText": "Please undo whitespace changes from this file.", "author": "maskaravivek", "createdAt": "2020-01-20T19:40:53Z", "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryItem.java", "diffHunk": "@@ -3,6 +3,7 @@\n import android.os.Parcel;\n import android.os.Parcelable;\n \n+", "originalCommit": "6272442bde8e67e3b3e3538ff7375577dc22ccd8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2fb891d846c9837d677e8aa9478add4d57498a19", "url": "https://github.com/commons-app/apps-android-commons/commit/2fb891d846c9837d677e8aa9478add4d57498a19", "message": "CategoryItem: fix whitespaces", "committedDate": "2020-01-21T11:33:29Z", "type": "forcePushed"}, {"oid": "0b8adab61bc14f101905ee9e676c86d7a2b1a4ef", "url": "https://github.com/commons-app/apps-android-commons/commit/0b8adab61bc14f101905ee9e676c86d7a2b1a4ef", "message": "CategoryClient: fix category search case-sensitivity by converting to lower case as MW api is inherently case-sensitive, the results obtained will be same", "committedDate": "2020-01-22T13:36:45Z", "type": "commit"}, {"oid": "75469266197c1d2c5296a6e615860f4262a5905e", "url": "https://github.com/commons-app/apps-android-commons/commit/75469266197c1d2c5296a6e615860f4262a5905e", "message": "CategoryItem: reverting javadoc changes", "committedDate": "2020-01-22T13:36:45Z", "type": "commit"}, {"oid": "514864abe3d6bd722e23bd49c4d525d34e046af0", "url": "https://github.com/commons-app/apps-android-commons/commit/514864abe3d6bd722e23bd49c4d525d34e046af0", "message": "CategoriesModel: make category search case-insensitive", "committedDate": "2020-01-22T13:36:45Z", "type": "commit"}, {"oid": "f742c349e8b908f136c290e619dae91f13a92a58", "url": "https://github.com/commons-app/apps-android-commons/commit/f742c349e8b908f136c290e619dae91f13a92a58", "message": "CategoryItem: fix whitespaces", "committedDate": "2020-01-22T13:36:46Z", "type": "commit"}, {"oid": "c36b4822d88bfb282cf129a5b976243bae9e5ad1", "url": "https://github.com/commons-app/apps-android-commons/commit/c36b4822d88bfb282cf129a5b976243bae9e5ad1", "message": "Add tests for case-insensitivity", "committedDate": "2020-01-22T13:36:46Z", "type": "commit"}, {"oid": "c36b4822d88bfb282cf129a5b976243bae9e5ad1", "url": "https://github.com/commons-app/apps-android-commons/commit/c36b4822d88bfb282cf129a5b976243bae9e5ad1", "message": "Add tests for case-insensitivity", "committedDate": "2020-01-22T13:36:46Z", "type": "forcePushed"}, {"oid": "c8e229212d6a9cb5c33930e39696087dd971766c", "url": "https://github.com/commons-app/apps-android-commons/commit/c8e229212d6a9cb5c33930e39696087dd971766c", "message": "CategoryClientTest: add more test cases", "committedDate": "2020-01-22T17:58:34Z", "type": "commit"}, {"oid": "fb422b5d7f7cd498c60190fa9297e53fbb5a49d9", "url": "https://github.com/commons-app/apps-android-commons/commit/fb422b5d7f7cd498c60190fa9297e53fbb5a49d9", "message": "CategoryClientTest: fix travis ci test", "committedDate": "2020-01-22T19:21:00Z", "type": "commit"}, {"oid": "fb422b5d7f7cd498c60190fa9297e53fbb5a49d9", "url": "https://github.com/commons-app/apps-android-commons/commit/fb422b5d7f7cd498c60190fa9297e53fbb5a49d9", "message": "CategoryClientTest: fix travis ci test", "committedDate": "2020-01-22T19:21:00Z", "type": "forcePushed"}, {"oid": "b85e3464ff8abd542d8ddef92fcf896fa59bbcc7", "url": "https://github.com/commons-app/apps-android-commons/commit/b85e3464ff8abd542d8ddef92fcf896fa59bbcc7", "message": "CategoriesModelTest: changes mage to CategoriesModel and tested", "committedDate": "2020-01-23T12:14:17Z", "type": "commit"}]}