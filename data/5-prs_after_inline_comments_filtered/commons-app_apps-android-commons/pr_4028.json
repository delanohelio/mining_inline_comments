{"pr_number": 4028, "pr_title": "fixes Progress Bar Visibility change with Orientation Change and login process terminated (#4001)", "pr_createdAt": "2020-11-11T10:04:15Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/4028", "timeline": [{"oid": "1a92b17e3761d8997239fdaf2160468db392ce24", "url": "https://github.com/commons-app/apps-android-commons/commit/1a92b17e3761d8997239fdaf2160468db392ce24", "message": "fixes #4001\n* Overrides the onSaveInstanceState method and onRestoreInstanceState method in LoginActivity.java\n* In onSaveInstanceState save  ProgressDailog state or visiblity and text of TextView(errorMessage)\n* In onRestoreInstanceState restore All saved Data", "committedDate": "2020-11-10T15:18:13Z", "type": "commit"}, {"oid": "2f99b5813ccb45aed3d989bcab3e900f26ff051d", "url": "https://github.com/commons-app/apps-android-commons/commit/2f99b5813ccb45aed3d989bcab3e900f26ff051d", "message": "Update the commit -https://github.com/commons-app/apps-android-commons/pull/4028/commits/1a92b17e3761d8997239fdaf2160468db392ce24", "committedDate": "2020-11-14T01:03:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI3OTcwMg==", "url": "https://github.com/commons-app/apps-android-commons/pull/4028#discussion_r525279702", "bodyText": "Could you look into the formatting please? There are random whitespaces where they should not exist.", "author": "misaochan", "createdAt": "2020-11-17T16:02:09Z", "path": "app/src/main/java/fr/free/nrw/commons/auth/LoginActivity.java", "diffHunk": "@@ -456,4 +459,48 @@ public static void startYourself(Context context) {\n         Intent intent = new Intent(context, LoginActivity.class);\n         context.startActivity(intent);\n     }\n+\n+    @Override\n+    protected void onSaveInstanceState(Bundle outState) {\n+        // if progressDialog is visible during the configuration change  then store state as  true else false so that\n+        // we maintain visiblity of progressDailog after configuration change\n+        if(progressDialog!=null&&progressDialog.isShowing()){\n+            outState.putBoolean(Save_progressDailog,true);\n+        }else{\n+            outState.putBoolean(Save_progressDailog,false);\n+        }\n+\n+        outState.putString(Save_errorMessage,errorMessage.getText().toString()); //Save the errorMessage\n+        outState.putString(Save_username,getUsername()); // Save the username\n+        outState.putString(Save_password,getPassword()); // Save thte password\n+    }\n+\n+    private String getUsername() {\n+        return usernameEdit.getText().toString();\n+    }\n+    private String getPassword(){\n+        return  passwordEdit.getText().toString();\n+  }\n+\n+    @Override\n+    protected void onRestoreInstanceState(final Bundle savedInstanceState) {\n+        super.onRestoreInstanceState(savedInstanceState);\n+\n+        usernameEdit.setText(savedInstanceState.getString(Save_username));\n+        passwordEdit.setText(savedInstanceState.getString(Save_password));\n+", "originalCommit": "2f99b5813ccb45aed3d989bcab3e900f26ff051d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI4MDA3NQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/4028#discussion_r525280075", "bodyText": "Please refer to codestyle, there should be whitespaces here and in other else statements.", "author": "misaochan", "createdAt": "2020-11-17T16:02:38Z", "path": "app/src/main/java/fr/free/nrw/commons/auth/LoginActivity.java", "diffHunk": "@@ -456,4 +459,48 @@ public static void startYourself(Context context) {\n         Intent intent = new Intent(context, LoginActivity.class);\n         context.startActivity(intent);\n     }\n+\n+    @Override\n+    protected void onSaveInstanceState(Bundle outState) {\n+        // if progressDialog is visible during the configuration change  then store state as  true else false so that\n+        // we maintain visiblity of progressDailog after configuration change\n+        if(progressDialog!=null&&progressDialog.isShowing()){\n+            outState.putBoolean(Save_progressDailog,true);\n+        }else{\n+            outState.putBoolean(Save_progressDailog,false);\n+        }\n+\n+        outState.putString(Save_errorMessage,errorMessage.getText().toString()); //Save the errorMessage\n+        outState.putString(Save_username,getUsername()); // Save the username\n+        outState.putString(Save_password,getPassword()); // Save thte password\n+    }\n+\n+    private String getUsername() {\n+        return usernameEdit.getText().toString();\n+    }\n+    private String getPassword(){\n+        return  passwordEdit.getText().toString();\n+  }\n+\n+    @Override\n+    protected void onRestoreInstanceState(final Bundle savedInstanceState) {\n+        super.onRestoreInstanceState(savedInstanceState);\n+\n+        usernameEdit.setText(savedInstanceState.getString(Save_username));\n+        passwordEdit.setText(savedInstanceState.getString(Save_password));\n+\n+\n+        if(savedInstanceState.getBoolean(Save_progressDailog)){\n+            performLogin();\n+        }\n+\n+        String errorMessage=savedInstanceState.getString(Save_errorMessage);\n+\n+        if(sessionManager.isUserLoggedIn()){\n+            showMessage(R.string.login_success, R.color.primaryDarkColor);\n+        }else{", "originalCommit": "2f99b5813ccb45aed3d989bcab3e900f26ff051d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9e26b1a2ffe1b3743280ec3fc557971e81d1c90c", "url": "https://github.com/commons-app/apps-android-commons/commit/9e26b1a2ffe1b3743280ec3fc557971e81d1c90c", "message": "formatting the codechanges", "committedDate": "2020-11-19T09:54:45Z", "type": "commit"}, {"oid": "4d43080668af45b5da79c65e88fc074f66797b19", "url": "https://github.com/commons-app/apps-android-commons/commit/4d43080668af45b5da79c65e88fc074f66797b19", "message": "reformated the codechange", "committedDate": "2020-11-21T15:19:43Z", "type": "commit"}]}