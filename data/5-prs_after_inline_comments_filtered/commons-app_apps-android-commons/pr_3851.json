{"pr_number": 3851, "pr_title": "Todo for user", "pr_createdAt": "2020-06-29T12:41:25Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/3851", "timeline": [{"oid": "497466285ce4f0e3619082db965acd4df7716e41", "url": "https://github.com/commons-app/apps-android-commons/commit/497466285ce4f0e3619082db965acd4df7716e41", "message": "Add a simple message", "committedDate": "2020-06-08T22:28:05Z", "type": "commit"}, {"oid": "852c824798265accb46ac7e7e36d80183ebb12a9", "url": "https://github.com/commons-app/apps-android-commons/commit/852c824798265accb46ac7e7e36d80183ebb12a9", "message": "Categories are edited", "committedDate": "2020-06-13T09:06:59Z", "type": "commit"}, {"oid": "b19d2919a3e1569153342e18893c45244f676f1f", "url": "https://github.com/commons-app/apps-android-commons/commit/b19d2919a3e1569153342e18893c45244f676f1f", "message": "Display categories", "committedDate": "2020-06-17T17:24:53Z", "type": "commit"}, {"oid": "5c71174161775ef1f66b711a369ce51df2c8517c", "url": "https://github.com/commons-app/apps-android-commons/commit/5c71174161775ef1f66b711a369ce51df2c8517c", "message": "read whole page", "committedDate": "2020-06-25T08:55:33Z", "type": "commit"}, {"oid": "17f0c2ccd65663ee66ca0407891ff07fd99d3cc1", "url": "https://github.com/commons-app/apps-android-commons/commit/17f0c2ccd65663ee66ca0407891ff07fd99d3cc1", "message": "Revert wrong changes", "committedDate": "2020-07-01T12:31:50Z", "type": "commit"}, {"oid": "2df909e9671784537d7b998f51da51e233d23a5a", "url": "https://github.com/commons-app/apps-android-commons/commit/2df909e9671784537d7b998f51da51e233d23a5a", "message": "Add newly added category field", "committedDate": "2020-07-01T15:05:58Z", "type": "commit"}, {"oid": "6c2c4ee03c03921b734682254b216cd72e8db015", "url": "https://github.com/commons-app/apps-android-commons/commit/6c2c4ee03c03921b734682254b216cd72e8db015", "message": "Doesnt displaey alreasy added categories", "committedDate": "2020-07-01T15:52:59Z", "type": "commit"}, {"oid": "413626e2d672fb6fdccfe92b4b6a34b5664c7214", "url": "https://github.com/commons-app/apps-android-commons/commit/413626e2d672fb6fdccfe92b4b6a34b5664c7214", "message": "add strings for notifications", "committedDate": "2020-07-03T14:39:38Z", "type": "commit"}, {"oid": "3f0c3d22305091e0d80e90f4d026110374e9a4b4", "url": "https://github.com/commons-app/apps-android-commons/commit/3f0c3d22305091e0d80e90f4d026110374e9a4b4", "message": "Fix conflicts", "committedDate": "2020-07-03T18:24:32Z", "type": "commit"}, {"oid": "085fea692e4a859440ad5a26b71092bc73db74ae", "url": "https://github.com/commons-app/apps-android-commons/commit/085fea692e4a859440ad5a26b71092bc73db74ae", "message": "clean code", "committedDate": "2020-07-06T13:06:55Z", "type": "commit"}, {"oid": "645a7dc494524e2899699abaceeeb1a2c05abe85", "url": "https://github.com/commons-app/apps-android-commons/commit/645a7dc494524e2899699abaceeeb1a2c05abe85", "message": "Merge remote-tracking branch 'upstream/master' into todoForUser", "committedDate": "2020-07-07T10:46:34Z", "type": "commit"}, {"oid": "4d4888f4fd59711b27f9263c31e137a17a4906ac", "url": "https://github.com/commons-app/apps-android-commons/commit/4d4888f4fd59711b27f9263c31e137a17a4906ac", "message": "Readd accidentally removed imports", "committedDate": "2020-07-07T11:12:28Z", "type": "commit"}, {"oid": "a9bff0ebc02d9f471db1f77a1826d507808fe043", "url": "https://github.com/commons-app/apps-android-commons/commit/a9bff0ebc02d9f471db1f77a1826d507808fe043", "message": "Fix edit layout style", "committedDate": "2020-07-07T16:33:08Z", "type": "commit"}, {"oid": "3bce4e5eca06455c0380add9d6c5e9783cac300f", "url": "https://github.com/commons-app/apps-android-commons/commit/3bce4e5eca06455c0380add9d6c5e9783cac300f", "message": "Fix category update messages", "committedDate": "2020-07-07T17:22:12Z", "type": "commit"}, {"oid": "4ed95482180a7a54fa7efbc3cdc353764cd5a9fb", "url": "https://github.com/commons-app/apps-android-commons/commit/4ed95482180a7a54fa7efbc3cdc353764cd5a9fb", "message": "Pass isWikipediaButtonDisplayed information to fragment", "committedDate": "2020-07-07T20:43:15Z", "type": "commit"}, {"oid": "9d70ea418d33c57c435c4c906633226c76f930e8", "url": "https://github.com/commons-app/apps-android-commons/commit/9d70ea418d33c57c435c4c906633226c76f930e8", "message": "Remove unused class", "committedDate": "2020-07-07T21:18:46Z", "type": "commit"}, {"oid": "0729554799b92b981017d14e6a1b34d2ed7d4f81", "url": "https://github.com/commons-app/apps-android-commons/commit/0729554799b92b981017d14e6a1b34d2ed7d4f81", "message": "Fix strings", "committedDate": "2020-07-07T22:50:41Z", "type": "commit"}, {"oid": "8cb80d5bac6b76c05585b163d7ba7e80fc0c42d9", "url": "https://github.com/commons-app/apps-android-commons/commit/8cb80d5bac6b76c05585b163d7ba7e80fc0c42d9", "message": "Fix conflicts", "committedDate": "2020-07-07T23:16:26Z", "type": "commit"}, {"oid": "701e516cc70d4acbc3aa714d4248505d7c63ab0c", "url": "https://github.com/commons-app/apps-android-commons/commit/701e516cc70d4acbc3aa714d4248505d7c63ab0c", "message": "Fix string", "committedDate": "2020-07-10T20:37:10Z", "type": "commit"}, {"oid": "439da0bb6053b85190f56e30370340f63e76d18c", "url": "https://github.com/commons-app/apps-android-commons/commit/439da0bb6053b85190f56e30370340f63e76d18c", "message": "Add exeption for uncategorised images too", "committedDate": "2020-07-10T20:58:36Z", "type": "commit"}, {"oid": "eb9275f06b92ff19ca3e94620a29576d8fdffd4c", "url": "https://github.com/commons-app/apps-android-commons/commit/eb9275f06b92ff19ca3e94620a29576d8fdffd4c", "message": "Revert project.xml changes", "committedDate": "2020-07-10T21:07:19Z", "type": "commit"}, {"oid": "ffc548a04d5e6e2b5724cb86978fb39301bfa059", "url": "https://github.com/commons-app/apps-android-commons/commit/ffc548a04d5e6e2b5724cb86978fb39301bfa059", "message": "fix update buttonvisibility issue", "committedDate": "2020-07-13T12:50:44Z", "type": "commit"}, {"oid": "94c7b024a12e05462df58e35633019230f45eab8", "url": "https://github.com/commons-app/apps-android-commons/commit/94c7b024a12e05462df58e35633019230f45eab8", "message": "Make sure it works for auto added categories too", "committedDate": "2020-07-13T13:24:10Z", "type": "commit"}, {"oid": "332d3cbfa3c1c5db4887c8af26dde14372642dfd", "url": "https://github.com/commons-app/apps-android-commons/commit/332d3cbfa3c1c5db4887c8af26dde14372642dfd", "message": "make the button visible", "committedDate": "2020-07-14T10:12:59Z", "type": "commit"}, {"oid": "f292cd131ff96e795272ce7b3cbb80747dcda6a8", "url": "https://github.com/commons-app/apps-android-commons/commit/f292cd131ff96e795272ce7b3cbb80747dcda6a8", "message": "Make the button appear when categories are entered", "committedDate": "2020-07-14T10:13:51Z", "type": "commit"}, {"oid": "672b7b0c702d61eeb7ce6414eb9c8f0b339bcad5", "url": "https://github.com/commons-app/apps-android-commons/commit/672b7b0c702d61eeb7ce6414eb9c8f0b339bcad5", "message": "Include cancel button", "committedDate": "2020-07-14T17:38:09Z", "type": "commit"}, {"oid": "db2fe3cd37f83ce0ac6ab4c8617d0d897b0a3eff", "url": "https://github.com/commons-app/apps-android-commons/commit/db2fe3cd37f83ce0ac6ab4c8617d0d897b0a3eff", "message": "Make view updated too", "committedDate": "2020-07-22T09:29:18Z", "type": "commit"}, {"oid": "0aff3ed183b2e582d04d452112cbd83b2fa5dc78", "url": "https://github.com/commons-app/apps-android-commons/commit/0aff3ed183b2e582d04d452112cbd83b2fa5dc78", "message": "Make category view edited", "committedDate": "2020-07-23T15:34:25Z", "type": "commit"}, {"oid": "05fc9a7817c481c05bd972e3569b622574daf0ab", "url": "https://github.com/commons-app/apps-android-commons/commit/05fc9a7817c481c05bd972e3569b622574daf0ab", "message": "Update categories in an hacky way", "committedDate": "2020-07-27T11:08:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDgzMDU5MQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3851#discussion_r460830591", "bodyText": "Here @ashishkumar468 , there is no need to build a reason. I just tried to mimic the same implementation as deleteHelper which does not raise exception. I don't know what I can put to this line, to be able to call flatMap.\nFor other implementation, see line 747 of same file\n    private void onDeleteClicked(Spinner spinner) {", "author": "neslihanturan", "createdAt": "2020-07-27T11:41:22Z", "path": "app/src/main/java/fr/free/nrw/commons/media/MediaDetailFragment.java", "diffHunk": "@@ -467,6 +622,55 @@ public void onCopyWikicodeClicked(){\n         Toast.makeText(getContext(), getString(R.string.wikicode_copied), Toast.LENGTH_SHORT).show();\n     }\n \n+    @OnClick(R.id.dummy_category_edit_container)\n+    public void onOutsideOfCategoryEditClicked() {\n+        if (dummyCategoryEditContainer.getVisibility() == VISIBLE) {\n+            dummyCategoryEditContainer.setVisibility(GONE);\n+        }\n+    }\n+\n+    @OnClick(R.id.categoryEditButton)\n+    public void onCategoryEditButtonClicked(){\n+        displayHideCategorySearch();\n+    }\n+\n+    public void displayHideCategorySearch() {\n+        if (dummyCategoryEditContainer.getVisibility() != VISIBLE) {\n+            dummyCategoryEditContainer.setVisibility(VISIBLE);\n+        } else {\n+            dummyCategoryEditContainer.setVisibility(GONE);\n+        }\n+    }\n+\n+    @OnClick(R.id.update_categories_button)\n+    public void onUpdateCategoriesClicked() {\n+       updateCategories(categoryEditSearchRecyclerViewAdapter.getNewCategories());\n+        displayHideCategorySearch();\n+    }\n+\n+    @OnClick(R.id.cancel_categories_button)\n+    public void onCancelCategoriesClicked() {\n+        displayHideCategorySearch();\n+    }\n+\n+    public void updateCategories(List<String> selectedCategories) {\n+        Single<Boolean> resultSingle =reasonBuilder.getReason(media, null)\n+            .flatMap((reason) -> categoryEditHelper.makeCategoryEdit(getContext(), media, selectedCategories, this));", "originalCommit": "05fc9a7817c481c05bd972e3569b622574daf0ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk5MTU5NQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3851#discussion_r460991595", "bodyText": "I could not understand @neslihanturan . What is the issue with this implementation?", "author": "ashishkumar468", "createdAt": "2020-07-27T15:51:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDgzMDU5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTEwNzM4MA==", "url": "https://github.com/commons-app/apps-android-commons/pull/3851#discussion_r461107380", "bodyText": "well, I don't need to bu\u0131ild a reason as \"reasonBuilder.getReason(media, null)\". It is only a need for deletion request. I used that line just to be able to implement the same structure with line 747. But my rxjava knowledge doesnt help me to find what to put before .flatMap, if not needed. Is it clear now?", "author": "neslihanturan", "createdAt": "2020-07-27T19:07:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDgzMDU5MQ=="}], "type": "inlineReview"}, {"oid": "bd63a0af039bef95bd8f6c4117a14fcc851de592", "url": "https://github.com/commons-app/apps-android-commons/commit/bd63a0af039bef95bd8f6c4117a14fcc851de592", "message": "Fix unnecessary method call", "committedDate": "2020-08-03T10:24:24Z", "type": "commit"}, {"oid": "6f453e0ea99a1586794aeb1503df0198c04c7364", "url": "https://github.com/commons-app/apps-android-commons/commit/6f453e0ea99a1586794aeb1503df0198c04c7364", "message": "Add notes for short term fix to display added category", "committedDate": "2020-08-03T11:27:40Z", "type": "commit"}, {"oid": "30967352635dfdf6dcb412810b118f52e88e1ca4", "url": "https://github.com/commons-app/apps-android-commons/commit/30967352635dfdf6dcb412810b118f52e88e1ca4", "message": "Fix tests", "committedDate": "2020-08-11T06:15:44Z", "type": "commit"}, {"oid": "70a469ac4b29051f4faf19b485b745a841d45c05", "url": "https://github.com/commons-app/apps-android-commons/commit/70a469ac4b29051f4faf19b485b745a841d45c05", "message": "Fix strings", "committedDate": "2020-08-13T12:14:40Z", "type": "commit"}, {"oid": "a551c76c2d7cf5271021af44cb5a43a9ab7f7797", "url": "https://github.com/commons-app/apps-android-commons/commit/a551c76c2d7cf5271021af44cb5a43a9ab7f7797", "message": "Fix click issue", "committedDate": "2020-08-13T12:15:08Z", "type": "commit"}]}