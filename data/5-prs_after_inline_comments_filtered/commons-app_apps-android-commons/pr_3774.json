{"pr_number": 3774, "pr_title": "Add destroyed column to BookmarkLocation table (##3729)", "pr_createdAt": "2020-05-26T06:05:53Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/3774", "timeline": [{"oid": "4dd1608a0ffde04b26126a7fb719f65592ac4022", "url": "https://github.com/commons-app/apps-android-commons/commit/4dd1608a0ffde04b26126a7fb719f65592ac4022", "message": "Add destroyed column to BookmarkLocation table (##3729)", "committedDate": "2020-05-26T05:57:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIxOTQ2MQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3774#discussion_r430219461", "bodyText": "this from == x && to == y is not how it should be done, typically this is done in a switch on from and you just let it fallthrough.\nThe problem is that we can never guarantee a user upgrades monotonically, a user could theoretically go from v1 to v100 with none of the intervening updates and migrations should happily walk them along that path", "author": "macgills", "createdAt": "2020-05-26T07:48:46Z", "path": "app/src/main/java/fr/free/nrw/commons/bookmarks/locations/BookmarkLocationsDao.java", "diffHunk": "@@ -276,6 +280,15 @@ public static void onUpdate(SQLiteDatabase db, int from, int to) {\n                 }\n                 return;\n             }\n+            if (from == 12 && to == 13) {", "originalCommit": "4dd1608a0ffde04b26126a7fb719f65592ac4022", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIyOTk1OA==", "url": "https://github.com/commons-app/apps-android-commons/pull/3774#discussion_r430229958", "bodyText": "So should I go ahead and change it to switch with fall through?", "author": "gvaibhav1734", "createdAt": "2020-05-26T08:06:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIxOTQ2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIzMjU4OQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3774#discussion_r430232589", "bodyText": "Yes please", "author": "macgills", "createdAt": "2020-05-26T08:11:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIxOTQ2MQ=="}], "type": "inlineReview"}, {"oid": "f5e005438268d8d5b51bf10158dd6f196ab6448d", "url": "https://github.com/commons-app/apps-android-commons/commit/f5e005438268d8d5b51bf10158dd6f196ab6448d", "message": "switch with fall through for migrations", "committedDate": "2020-05-26T08:24:39Z", "type": "commit"}]}