{"pr_number": 1625, "pr_title": "[Study Datastore] Externalized authorizationResource.properties parameters", "pr_createdAt": "2020-10-23T08:20:07Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1625", "timeline": [{"oid": "08f73abb10460d0e9aa5866046c1e929c537b1a4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/08f73abb10460d0e9aa5866046c1e929c537b1a4", "message": "[Study Datastore] Externalized authorizationResource.properties parameters\n\n[Study Datastore] Externalized authorizationResource.properties parameters", "committedDate": "2020-10-23T08:01:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg3OTQ2NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1625#discussion_r510879465", "bodyText": "Shouldn't it be?\nif (authPropMap.cotainsKey(bundleId) && ((String)authPropMap.get(bundleId) == appToken))", "author": "zohrehj", "createdAt": "2020-10-23T13:22:03Z", "path": "study-datastore/src/main/java/com/hphc/mystudies/web/servlet/AuthenticationService.java", "diffHunk": "@@ -49,7 +49,7 @@ public boolean authenticate(String authCredentials) {\n           final StringTokenizer tokenizer = new StringTokenizer(bundleIdAndAppToken, \":\");\n           final String bundleId = tokenizer.nextToken();\n           final String appToken = tokenizer.nextToken();\n-          if (authPropMap.containsKey(bundleId) && authPropMap.containsKey(appToken)) {\n+          if (authPropMap.containsValue(bundleId) && authPropMap.containsValue(appToken)) {", "originalCommit": "08f73abb10460d0e9aa5866046c1e929c537b1a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5ODMyOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1625#discussion_r512498329", "bodyText": "I tried with if (authPropMap.cotainsKey(bundleId) && ((String)authPropMap.get(bundleId) == appToken)) , its fails to validate the key and value. Hence I have changed the key value pair format in authorizationResource.properties file by keeping key on the left side and value on the right side as the logic to fetch value in  from environment variable in PropertiesUtil.java is commonly shared by remaining properties file as well.", "author": "aswinijena100", "createdAt": "2020-10-27T08:31:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg3OTQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjY5NDM0MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1625#discussion_r512694341", "bodyText": "the main issue with your approach is that they could sign in with any pair of bundleId and token, e.g iOS bundleID and Android appToken. We should prevent that.", "author": "zohrehj", "createdAt": "2020-10-27T13:33:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg3OTQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE3MTczOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1625#discussion_r514171739", "bodyText": "The same issue exist in FDA open implementation as well . To fix this issue code level changes are required to handle this scenario. Hence if you are okay I can raise one ticket and take it up this as a separate issue fix .", "author": "aswinijena100", "createdAt": "2020-10-29T10:59:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg3OTQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI0NzgxMg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1625#discussion_r514247812", "bodyText": "sounds good.", "author": "zohrehj", "createdAt": "2020-10-29T13:14:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg3OTQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI1NjM4Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1625#discussion_r514256387", "bodyText": "Issue #1714  created for this", "author": "aswinijena100", "createdAt": "2020-10-29T13:27:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg3OTQ2NQ=="}], "type": "inlineReview"}, {"oid": "bc7c5c1d4be14d24a96ae9d05b3f693d25cab267", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bc7c5c1d4be14d24a96ae9d05b3f693d25cab267", "message": "Merge branch 'develop' into study-datastore-authorization-prop-externalization", "committedDate": "2020-10-29T13:27:09Z", "type": "commit"}]}