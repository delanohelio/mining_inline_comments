{"pr_number": 620, "pr_title": "Participant manager's remaining repository and entity classes ", "pr_createdAt": "2020-07-13T11:48:21Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/620", "timeline": [{"oid": "41c5759db48b357ca9019d4c32c543e2f796aec2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/41c5759db48b357ca9019d4c32c543e2f796aec2", "message": "remaining repository and entity classes for participant manager /sites end point\n\nremaining repository and entity classes for participant manager /sites end point", "committedDate": "2020-07-13T11:45:51Z", "type": "commit"}, {"oid": "a1f1574f4fee952301510fa0c2150b7c4975f24f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a1f1574f4fee952301510fa0c2150b7c4975f24f", "message": "added column attributes\n\nadded column attributes", "committedDate": "2020-07-13T15:55:43Z", "type": "commit"}, {"oid": "aa626953887798fc6676b484e81de55fc36e6962", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/aa626953887798fc6676b484e81de55fc36e6962", "message": "Merge branch 'participant-manager-service-sites' into participant-manager-service-sites-pending-entities", "committedDate": "2020-07-13T16:08:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5MTA4Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/620#discussion_r455391086", "bodyText": "Do we want to name timestamp fields like this \"created/modified\" - at/on or date? I think we should be consistent. I raised a similar question on PR #580 so maybe you and Dhanya can discuss this", "author": "saminguyen", "createdAt": "2020-07-15T22:02:49Z", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/AppEntity.java", "diffHunk": "@@ -0,0 +1,158 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.model;\n+\n+import java.io.Serializable;\n+import java.sql.Timestamp;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import javax.persistence.CascadeType;\n+import javax.persistence.Column;\n+import javax.persistence.Entity;\n+import javax.persistence.FetchType;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.Id;\n+import javax.persistence.JoinColumn;\n+import javax.persistence.ManyToOne;\n+import javax.persistence.OneToMany;\n+import javax.persistence.Table;\n+\n+import org.hibernate.annotations.GenericGenerator;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\n+\n+import lombok.Getter;\n+import lombok.Setter;\n+import lombok.ToString;\n+\n+@Setter\n+@Getter\n+@Entity\n+@Table(name = \"app_info\")\n+@ConditionalOnProperty(\n+    value = \"participant.manager.entities.enabled\",\n+    havingValue = \"true\",\n+    matchIfMissing = false)\n+public class AppEntity implements Serializable {\n+\n+  private static final long serialVersionUID = 4985607753888575491L;\n+\n+  @ToString.Exclude\n+  @Id\n+  @GeneratedValue(generator = \"system-uuid\")\n+  @GenericGenerator(name = \"system-uuid\", strategy = \"uuid\")\n+  @Column(name = \"id\", updatable = false, nullable = false)\n+  private String id;\n+\n+  @ToString.Exclude\n+  @Column(name = \"custom_app_id\", length = 100)\n+  private String appId;\n+\n+  @ToString.Exclude\n+  @Column(name = \"app_name\", length = 100)\n+  private String appName;\n+\n+  @Column(name = \"app_description\", length = 100)\n+  private String appDescription;\n+\n+  @ToString.Exclude\n+  @ManyToOne(cascade = CascadeType.MERGE)\n+  @JoinColumn(name = \"org_info_id\")\n+  private OrgInfoEntity orgInfo;\n+\n+  @ToString.Exclude\n+  @Column(name = \"ios_bundle_id\", length = 100)\n+  private String iosBundleId;\n+\n+  @ToString.Exclude\n+  @Column(name = \"android_bundle_id\", length = 100)\n+  private String androidBundleId;\n+\n+  @ToString.Exclude\n+  @Column(name = \"ios_certificate\", length = 100)\n+  private String iosCertificate;\n+\n+  @ToString.Exclude\n+  @Column(name = \"ios_certificate_password\", length = 100)\n+  private String iosCertificatePassword;\n+\n+  @ToString.Exclude\n+  @Column(name = \"android_server_key\", length = 100)\n+  private String androidServerKey;\n+\n+  @ToString.Exclude\n+  @Column(name = \"from_email_id\", length = 100)\n+  private String formEmailId;\n+\n+  @ToString.Exclude\n+  @Column(name = \"from_email_password\", length = 100)\n+  private String fromEmailPassword;\n+\n+  @ToString.Exclude\n+  @Column(name = \"reg_email_sub\", length = 100)\n+  private String regEmailSub;\n+\n+  @ToString.Exclude\n+  @Column(name = \"reg_email_body\", length = 100)\n+  private String regEmailBody;\n+\n+  @ToString.Exclude\n+  @Column(name = \"forgot_email_sub\", length = 100)\n+  private String forgotEmailSub;\n+\n+  @Column(name = \"forgot_email_body\", length = 100)\n+  private String forgotEmailBody;\n+\n+  @Column(name = \"method_handler\", length = 100)\n+  private Integer methodHandler;\n+\n+  @Column(name = \"created_by\", nullable = false, length = 64)\n+  private String createdBy;\n+\n+  @Column(name = \"modified_by\", nullable = false, length = 64)\n+  private String modifiedBy;\n+\n+  @Column(\n+      name = \"modified_date\",\n+      insertable = false,\n+      updatable = false,\n+      columnDefinition = \"TIMESTAMP DEFAULT CURRENT_TIMESTAMP\")\n+  private Timestamp modified;\n+\n+  @Column(\n+      name = \"created_on\",\n+      insertable = false,\n+      updatable = false,\n+      columnDefinition = \"TIMESTAMP DEFAULT CURRENT_TIMESTAMP\")\n+  private Timestamp created;", "originalCommit": "aa626953887798fc6676b484e81de55fc36e6962", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIxOTQ3MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/620#discussion_r456219471", "bodyText": "We named the fields as created_timestamp, modified_timestamp but Zohreh suggested us to rename the fields to created, modified for timestamp. We'll be using created and modified for consistency.", "author": "Kantharajut-btc", "createdAt": "2020-07-17T05:02:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5MTA4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5Mjk1Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/620#discussion_r455392952", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              @Column(name = \"edit\", length = 100)\n          \n          \n            \n              private Integer edit;\n          \n          \n            \n              @Column(name = \"canEdit\", length = 100)\n          \n          \n            \n              private Integer canEdit;\n          \n      \n    \n    \n  \n\nOr you can also name it edit_permission. What are the possible values for this Integer field?", "author": "saminguyen", "createdAt": "2020-07-15T22:07:16Z", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/AppPermissionEntity.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.model;\n+\n+import java.io.Serializable;\n+import java.sql.Timestamp;\n+\n+import javax.persistence.CascadeType;\n+import javax.persistence.Column;\n+import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.Id;\n+import javax.persistence.JoinColumn;\n+import javax.persistence.ManyToOne;\n+import javax.persistence.Table;\n+\n+import org.hibernate.annotations.GenericGenerator;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\n+\n+import lombok.Getter;\n+import lombok.Setter;\n+import lombok.ToString;\n+\n+@ToString\n+@Setter\n+@Getter\n+@Entity\n+@Table(name = \"app_permissions\")\n+@ConditionalOnProperty(\n+    value = \"participant.manager.entities.enabled\",\n+    havingValue = \"true\",\n+    matchIfMissing = false)\n+public class AppPermissionEntity implements Serializable {\n+\n+  private static final long serialVersionUID = 8610289975376774137L;\n+\n+  @ToString.Exclude\n+  @Id\n+  @GeneratedValue(generator = \"system-uuid\")\n+  @GenericGenerator(name = \"system-uuid\", strategy = \"uuid\")\n+  @Column(name = \"id\", updatable = false, nullable = false)\n+  private String id;\n+\n+  @ManyToOne(cascade = CascadeType.MERGE)\n+  @JoinColumn(name = \"ur_admin_user_id\")\n+  private UserRegAdminEntity urAdminUser;\n+\n+  @ManyToOne(cascade = CascadeType.MERGE)\n+  @JoinColumn(name = \"app_info_id\")\n+  private AppEntity appInfo;\n+\n+  @Column(name = \"edit\", length = 100)\n+  private Integer edit;", "originalCommit": "aa626953887798fc6676b484e81de55fc36e6962", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA2MzM1Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/620#discussion_r457063356", "bodyText": "Changed column name to edit_permission and its length to 1\nPossible values: 0-read, 1-read and edit, null-no permission", "author": "Kantharajut-btc", "createdAt": "2020-07-20T05:26:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5Mjk1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5MzUxOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/620#discussion_r455393519", "bodyText": "similar comment as above on timestamp field naming", "author": "saminguyen", "createdAt": "2020-07-15T22:08:33Z", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/OrgInfoEntity.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.model;\n+\n+import java.io.Serializable;\n+import java.sql.Timestamp;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import javax.persistence.CascadeType;\n+import javax.persistence.Column;\n+import javax.persistence.Entity;\n+import javax.persistence.FetchType;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.Id;\n+import javax.persistence.OneToMany;\n+import javax.persistence.Table;\n+\n+import org.hibernate.annotations.GenericGenerator;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\n+\n+import lombok.Getter;\n+import lombok.Setter;\n+import lombok.ToString;\n+\n+@Setter\n+@Getter\n+@Entity\n+@Table(name = \"org_info\")\n+@ConditionalOnProperty(\n+    value = \"participant.manager.entities.enabled\",\n+    havingValue = \"true\",\n+    matchIfMissing = false)\n+public class OrgInfoEntity implements Serializable {\n+\n+  private static final long serialVersionUID = 1L;\n+\n+  @ToString.Exclude\n+  @Id\n+  @GeneratedValue(generator = \"system-uuid\")\n+  @GenericGenerator(name = \"system-uuid\", strategy = \"uuid\")\n+  @Column(name = \"id\", updatable = false, nullable = false)\n+  private String id;\n+\n+  @Column(name = \"name\", length = 100)\n+  private String name;\n+\n+  @Column(name = \"org_id\", length = 100)\n+  private String orgId;\n+\n+  @Column(\n+      name = \"created_on\",\n+      insertable = false,\n+      updatable = false,\n+      columnDefinition = \"TIMESTAMP DEFAULT CURRENT_TIMESTAMP\")\n+  private Timestamp created;", "originalCommit": "aa626953887798fc6676b484e81de55fc36e6962", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIxOTg0NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/620#discussion_r456219844", "bodyText": "We named the fields as created_timestamp, modified_timestamp but Zohreh suggested us to rename the fields to created, modified for timestamp. We'll be using created and modified for consistency.", "author": "Kantharajut-btc", "createdAt": "2020-07-17T05:03:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5MzUxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5NDE4Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/620#discussion_r455394182", "bodyText": "similar suggestion on naming (can_edit or edit_permission)", "author": "saminguyen", "createdAt": "2020-07-15T22:10:13Z", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/model/StudyPermissionEntity.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.model;\n+\n+import java.io.Serializable;\n+import java.sql.Timestamp;\n+\n+import javax.persistence.CascadeType;\n+import javax.persistence.Column;\n+import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.Id;\n+import javax.persistence.JoinColumn;\n+import javax.persistence.ManyToOne;\n+import javax.persistence.Table;\n+\n+import org.hibernate.annotations.GenericGenerator;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\n+\n+import lombok.Getter;\n+import lombok.Setter;\n+import lombok.ToString;\n+\n+@Setter\n+@Getter\n+@ToString\n+@Entity\n+@Table(name = \"study_permissions\")\n+@ConditionalOnProperty(\n+    value = \"participant.manager.entities.enabled\",\n+    havingValue = \"true\",\n+    matchIfMissing = false)\n+public class StudyPermissionEntity implements Serializable {\n+\n+  private static final long serialVersionUID = -9223143734827095684L;\n+\n+  @ToString.Exclude\n+  @Id\n+  @GeneratedValue(generator = \"system-uuid\")\n+  @GenericGenerator(name = \"system-uuid\", strategy = \"uuid\")\n+  @Column(name = \"id\", updatable = false, nullable = false)\n+  private String id;\n+\n+  @ManyToOne(cascade = CascadeType.MERGE)\n+  @JoinColumn(name = \"app_info_id\")\n+  private AppEntity appInfo;\n+\n+  @ManyToOne(cascade = CascadeType.MERGE)\n+  @JoinColumn(name = \"study_id\")\n+  private StudyEntity study;\n+\n+  @ManyToOne(cascade = CascadeType.MERGE)\n+  @JoinColumn(name = \"ur_admin_user_id\")\n+  private UserRegAdminEntity urAdminUser;\n+\n+  @Column(name = \"edit\", length = 100)\n+  private Integer edit;", "originalCommit": "aa626953887798fc6676b484e81de55fc36e6962", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA2NTQ3MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/620#discussion_r457065471", "bodyText": "Changed column name to edit_permission and its length to 1\nPossible values: 0-read, 1-read and edit, null-no permission", "author": "Kantharajut-btc", "createdAt": "2020-07-20T05:30:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM5NDE4Mg=="}], "type": "inlineReview"}, {"oid": "a10d2c648fce1ab1c7551f7f545cee3f538bfc6d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a10d2c648fce1ab1c7551f7f545cee3f538bfc6d", "message": "Fixed PR #620 review comments\n\n1. Removed unused method from StudyRepository\n2. Rename column to edit_permission and changed its length to 1", "committedDate": "2020-07-20T05:23:27Z", "type": "commit"}, {"oid": "0d6e6644847f337f9bf42f2dd065973d538ebb08", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0d6e6644847f337f9bf42f2dd065973d538ebb08", "message": "Added nullable=true for edit_permission column\n\nAdded nullable=true for edit_permission column", "committedDate": "2020-07-20T05:29:59Z", "type": "commit"}, {"oid": "d1e065ee2a9571a0b23634ddc785e8a7cefa390b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d1e065ee2a9571a0b23634ddc785e8a7cefa390b", "message": "Merge branch 'participant-manager-service-sites' into participant-manager-service-sites-pending-entities", "committedDate": "2020-07-28T03:59:16Z", "type": "commit"}, {"oid": "1686f3f1bd7591862093b770537ae69df88e8c0c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1686f3f1bd7591862093b770537ae69df88e8c0c", "message": "Merge branch 'develop' into participant-manager-service-sites-pending-entities", "committedDate": "2020-08-06T16:55:44Z", "type": "commit"}]}