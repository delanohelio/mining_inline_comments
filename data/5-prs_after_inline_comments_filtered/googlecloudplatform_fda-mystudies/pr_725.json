{"pr_number": 725, "pr_title": "Participant Manager Service [PATCH]  /studies/{studyId}/targetEnrollment endpoint implementation", "pr_createdAt": "2020-08-05T08:39:51Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725", "timeline": [{"oid": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0a1ce125f5af3a1440e0e4833f8e69925cc7226a", "message": "PATCH /studies/{studyId}/targetEnrollment endpoint implementation with integration tests\n\nPATCH /studies/{studyId}/targetEnrollment endpoint implementation with integration tests", "committedDate": "2020-08-05T08:31:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1MzgzNQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r465953835", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_DEACTIVE_SITE(\n          \n          \n            \n              CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_DECOMMISSIONED_SITE(", "author": "saminguyen", "createdAt": "2020-08-05T19:29:12Z", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/ErrorCode.java", "diffHunk": "@@ -166,7 +163,16 @@\n       500,\n       \"EC_914\",\n       HttpStatus.INTERNAL_SERVER_ERROR.toString(),\n-      \"Unable to import the participants\");\n+      \"Unable to import the participants\"),\n+\n+  CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_CLOSE_STUDY(\n+      400, \"EC-95\", Constants.BAD_REQUEST, \" Cannot update enrollment target for closed study\"),\n+\n+  CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_DEACTIVE_SITE(", "originalCommit": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE0NzAxMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466147011", "bodyText": "Changed to CANNOT_UPDATE_ENROLLMENT_TARGET_FOR_DECOMMISSIONED_SITE", "author": "Kantharajut-btc", "createdAt": "2020-08-06T05:00:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1MzgzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1Mzk3OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r465953978", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  HttpStatus.OK, \"MSG-0030\", \"Target enrolllment updated successfully\");\n          \n          \n            \n                  HttpStatus.OK, \"MSG-0030\", \"Target enrollment updated successfully\");", "author": "saminguyen", "createdAt": "2020-08-05T19:29:27Z", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java", "diffHunk": "@@ -80,7 +77,10 @@\n \n   GET_SITES_SUCCESS(HttpStatus.OK, \"MSG-0018\", \"Get sites successfully\"),\n \n-  PROFILE_UPDATE_SUCCESS(HttpStatus.OK, \"MSG-0011\", \"Profile updated successfully\");\n+  PROFILE_UPDATE_SUCCESS(HttpStatus.OK, \"MSG-0011\", \"Profile updated successfully\"),\n+\n+  TARGET_ENROLLMENT_UPDATE_SUCCESS(\n+      HttpStatus.OK, \"MSG-0030\", \"Target enrolllment updated successfully\");", "originalCommit": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE0NzExMw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466147113", "bodyText": "typo corrected", "author": "Kantharajut-btc", "createdAt": "2020-08-06T05:00:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1Mzk3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTk4NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r465955984", "bodyText": "This is not being used in this PR. Please remove if only the func below is needed.", "author": "saminguyen", "createdAt": "2020-08-05T19:33:27Z", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/SiteRepository.java", "diffHunk": "@@ -37,4 +37,10 @@\n \n   @Query(\"SELECT site from SiteEntity site where site.study.id IN (:studyIds)\")\n   public List<SiteEntity> findByStudyIds(@Param(\"studyIds\") List<String> studyIds);\n+\n+  @Query(\"SELECT site from SiteEntity site where site.study.id= :studyId\")\n+  public List<SiteEntity> findByStudyId(String studyId);", "originalCommit": "0a1ce125f5af3a1440e0e4833f8e69925cc7226a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE0NzI4Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466147283", "bodyText": "Removed this unused method", "author": "Kantharajut-btc", "createdAt": "2020-08-06T05:01:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTk4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE1NjcwMA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466156700", "bodyText": "Can you rename the remaining method findByStudyId for consistency in naming? Also I just figured by looking at this whole file that findBySites and findByStudyIds are also exactly the same, too. Please correct that either in this PR or a separate one with a bug filed.", "author": "saminguyen", "createdAt": "2020-08-06T05:35:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTk4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjE1OTc3MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/725#discussion_r466159770", "bodyText": "Reused findByStudyIds by deleting findBySites and renamed method name to findByStudyId", "author": "Kantharajut-btc", "createdAt": "2020-08-06T05:45:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTk4NA=="}], "type": "inlineReview"}, {"oid": "bcc5658b9e091fd171564f756bfb179c371c73ab", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bcc5658b9e091fd171564f756bfb179c371c73ab", "message": "Fixed PR comments\n\nFixed PR comments", "committedDate": "2020-08-06T04:56:34Z", "type": "commit"}, {"oid": "4235d38101823c4113031a30780c3d1ffaeaa005", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4235d38101823c4113031a30780c3d1ffaeaa005", "message": "Fixed PR comments\n\nFixed PR comments", "committedDate": "2020-08-06T05:42:29Z", "type": "commit"}, {"oid": "ee2a05d87eb0ccd825f56f66359927c0f5475760", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ee2a05d87eb0ccd825f56f66359927c0f5475760", "message": "Merge branch 'develop' of https://github.com/GoogleCloudPlatform/fda-mystudies into participant-manager-update-target-enrollment\n\n# Conflicts:\n#\tcommon-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/ErrorCode.java\n#\tcommon-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/MessageCode.java\n#\tcommon-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/repository/SiteRepository.java\n#\tparticipant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/StudyController.java\n#\tparticipant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/AppServiceImpl.java\n#\tparticipant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/common/ApiEndpoint.java\n#\tparticipant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/AppControllerTest.java\n#\tparticipant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/LocationControllerTest.java\n#\tparticipant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/SiteControllerTest.java\n#\tparticipant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java\n#\tparticipant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserControllerTest.java\n#\tparticipant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileControllerTest.java\n#\tparticipant-manager-module/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/helper/TestDataHelper.java", "committedDate": "2020-08-19T17:06:56Z", "type": "commit"}]}