{"pr_number": 1354, "pr_title": "Data integrity check response datastore", "pr_createdAt": "2020-10-13T16:04:27Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1354", "timeline": [{"oid": "f57b73c5caaf0d53f129ec52674afefaf8b1cfa2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f57b73c5caaf0d53f129ec52674afefaf8b1cfa2", "message": "Response Datastore Data Integrity Check changes post folder restructure\n\nResponse Datastore Data Integrity Check changes post folder restructure", "committedDate": "2020-10-13T15:57:36Z", "type": "commit"}, {"oid": "af930900c54780073c1b6e7bf385cb8b23aeeb77", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/af930900c54780073c1b6e7bf385cb8b23aeeb77", "message": "Formatted source\n\nFormatted source", "committedDate": "2020-10-13T15:59:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA3NTUxMA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1354#discussion_r504075510", "bodyText": "[response-server Checks] reported by reviewdog \ud83d\udc36\nAbbreviation in name 'participantBO' must contain no more than '1' consecutive capital letters.", "author": "github-actions", "createdAt": "2020-10-13T16:05:28Z", "path": "response-datastore/response-server-service/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/CommonDaoImpl.java", "diffHunk": "@@ -30,18 +30,18 @@\n   @Autowired private EntityManagerFactory entityManagerFactory;\n \n   @Override\n-  public ParticipantBo getParticipantInfoDetails(String participantId) {\n+  public ParticipantInfoEntity getParticipantInfoDetails(String participantId) {\n     logger.info(\"CommonDaoImpl getParticipantInfoDetails() - Ends \");\n     CriteriaBuilder criteriaBuilder = null;\n-    CriteriaQuery<ParticipantBo> participantBoCriteriaQuery = null;\n-    Root<ParticipantBo> participantBoRoot = null;\n+    CriteriaQuery<ParticipantInfoEntity> participantBoCriteriaQuery = null;\n+    Root<ParticipantInfoEntity> participantBoRoot = null;\n     Predicate[] participantBoPredicates = new Predicate[1];\n-    List<ParticipantBo> participantBoList = null;\n-    ParticipantBo participantBO = null;\n+    List<ParticipantInfoEntity> participantBoList = null;\n+    ParticipantInfoEntity participantBO = null;", "originalCommit": "af930900c54780073c1b6e7bf385cb8b23aeeb77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA3NTUxMw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1354#discussion_r504075513", "bodyText": "[response-server Checks] reported by reviewdog \ud83d\udc36\nMissing a Javadoc comment.", "author": "github-actions", "createdAt": "2020-10-13T16:05:28Z", "path": "response-datastore/response-server-service/src/test/java/com/google/cloud/healthcare/fdamystudies/helper/TestDataHelper.java", "diffHunk": "@@ -19,12 +19,13 @@\n @Component\n public class TestDataHelper {\n \n-  @Autowired private ParticipantBoRepository participantBoRepository;\n+  @Autowired private ParticipantInfoRepository participantBoRepository;\n \n-  public ParticipantBo saveParticipant() {\n-    ParticipantBo participant = new ParticipantBo();\n-    participant.setTokenIdentifier(IdGenerator.id());\n-    participant.setParticipantIdentifier(IdGenerator.id());\n+  public ParticipantInfoEntity saveParticipant() {", "originalCommit": "af930900c54780073c1b6e7bf385cb8b23aeeb77", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc3NDcyNw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1354#discussion_r504774727", "bodyText": "please fix", "author": "zohrehj", "createdAt": "2020-10-14T15:32:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA3NTUxMw=="}], "type": "inlineReview"}, {"oid": "e1c364828284ae710dba84bd818a0bc599015884", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e1c364828284ae710dba84bd818a0bc599015884", "message": "Merge branch 'develop' into Data-integrity-Check-Response-Datastore", "committedDate": "2020-10-13T16:07:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc3NDI5OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1354#discussion_r504774299", "bodyText": "nit: might have been better to name these total_count, completed_count and missed_count to clarify that they are integers", "author": "zohrehj", "createdAt": "2020-10-14T15:31:55Z", "path": "response-datastore/response-server-service/src/main/java/com/google/cloud/healthcare/fdamystudies/response/model/ParticipantActivitiesEntity.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Use of this source code is governed by an MIT-style\n+ * license that can be found in the LICENSE file or at\n+ * https://opensource.org/licenses/MIT.\n+ */\n+\n+package com.google.cloud.healthcare.fdamystudies.response.model;\n+\n+import static com.google.cloud.healthcare.fdamystudies.common.ColumnConstraints.LARGE_LENGTH;\n+import static com.google.cloud.healthcare.fdamystudies.common.ColumnConstraints.SMALL_LENGTH;\n+import static com.google.cloud.healthcare.fdamystudies.common.ColumnConstraints.XS_LENGTH;\n+\n+import java.io.Serializable;\n+import java.sql.Timestamp;\n+import javax.persistence.Column;\n+import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.Id;\n+import javax.persistence.Index;\n+import javax.persistence.Table;\n+import lombok.Getter;\n+import lombok.Setter;\n+import org.hibernate.annotations.CreationTimestamp;\n+import org.hibernate.annotations.GenericGenerator;\n+\n+@Setter\n+@Getter\n+@Entity\n+@Table(\n+    name = \"participant_activities\",\n+    indexes = {\n+      @Index(name = \"participant_activities_participant_id_idx\", columnList = \"participant_id\"),\n+      @Index(name = \"participant_activities_study_id_idx\", columnList = \"study_id\")\n+    })\n+public class ParticipantActivitiesEntity implements Serializable {\n+\n+  private static final long serialVersionUID = 1005603353927628403L;\n+\n+  @Id\n+  @GeneratedValue(generator = \"system-uuid\")\n+  @GenericGenerator(name = \"system-uuid\", strategy = \"uuid\")\n+  @Column(name = \"id\", updatable = false, nullable = false)\n+  private String id;\n+\n+  @Column(name = \"participant_id\", nullable = false, length = SMALL_LENGTH)\n+  private String participantId;\n+\n+  @Column(name = \"study_id\", nullable = false, length = XS_LENGTH)\n+  private String studyId;\n+\n+  @Column(name = \"activity_id\", nullable = false, length = SMALL_LENGTH)\n+  private String activityId;\n+\n+  @Column(name = \"bookmark\", columnDefinition = \"TINYINT(1) default 0\")\n+  private Boolean bookmark;\n+\n+  @Column(name = \"activity_version\", nullable = false, length = XS_LENGTH)\n+  private String activityVersion;\n+\n+  @Column(name = \"activity_state\", nullable = false, length = LARGE_LENGTH)\n+  private String activityState;\n+\n+  @Column(name = \"activity_run_id\", nullable = false, length = XS_LENGTH)\n+  private String activityRunId;\n+\n+  @Column(name = \"total\")\n+  private Integer total;\n+\n+  @Column(name = \"completed\")\n+  private Integer completed;\n+\n+  @Column(name = \"missed\")\n+  private Integer missed;", "originalCommit": "e1c364828284ae710dba84bd818a0bc599015884", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg0Mzg0OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1354#discussion_r504843849", "bodyText": "changed the column name as suggested", "author": "aswinijena100", "createdAt": "2020-10-14T17:17:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc3NDI5OQ=="}], "type": "inlineReview"}, {"oid": "b5aa3840179c516ca315df786d07d891ab24b096", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b5aa3840179c516ca315df786d07d891ab24b096", "message": "Rename Columns as per PR reveiw comments\n\nRename Columns as per PR reveiw comments", "committedDate": "2020-10-14T17:14:23Z", "type": "commit"}, {"oid": "61a79803e1defbf9e6aa184d49508ac7efea7e2c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/61a79803e1defbf9e6aa184d49508ac7efea7e2c", "message": "Merge branch 'develop' into Data-integrity-Check-Response-Datastore", "committedDate": "2020-10-14T17:16:57Z", "type": "commit"}]}