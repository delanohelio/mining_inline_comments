{"pr_number": 819, "pr_title": "feat(logout): Added post logout hook to add custom logic", "pr_createdAt": "2020-04-03T08:00:56Z", "pr_url": "https://github.com/eclipse/sw360/pull/819", "timeline": [{"oid": "3be06d09dec9185fddf7e8407530169937910d14", "url": "https://github.com/eclipse/sw360/commit/3be06d09dec9185fddf7e8407530169937910d14", "message": "feat(logout): Added post logout hook to add custom logic\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-04-09T13:44:17Z", "type": "forcePushed"}, {"oid": "01fa6c5e23d6c22659b9218cdb3c7e90e649e2fa", "url": "https://github.com/eclipse/sw360/commit/01fa6c5e23d6c22659b9218cdb3c7e90e649e2fa", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-04-20T07:52:44Z", "type": "forcePushed"}, {"oid": "e14509879339d6f97e573ba9bacfbd9d75b3ba62", "url": "https://github.com/eclipse/sw360/commit/e14509879339d6f97e573ba9bacfbd9d75b3ba62", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-04-20T10:15:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI5Njk4Ng==", "url": "https://github.com/eclipse/sw360/pull/819#discussion_r411296986", "bodyText": "Maybe redirecting to custom logout page can also be added here,\nwhich gets executed based on condition\nthat property logout.redirect.url is not null and not empty.", "author": "JaideepPalit", "createdAt": "2020-04-20T11:19:16Z", "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/users/LogoutAction.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright Siemens AG, 2020. Part of the SW360 Portal Project.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.sw360.portal.users;\n+\n+import javax.servlet.http.*;\n+\n+import org.eclipse.sw360.portal.components.LoggingComponent;\n+import org.osgi.service.component.annotations.*;\n+\n+import com.liferay.portal.kernel.events.*;\n+\n+/**\n+ * This class can be used to write any custom logic post logout such as\n+ * redirecting to a custom logout page, integrating and invalidating third party\n+ * auth cookies viz mod-mellon etc.\n+ *\n+ * @author smruti.sahoo@siemens.com\n+ *\n+ */\n+@Component(\n+    immediate = true,\n+    property = {\"key=logout.events.post\" },\n+    service = LifecycleAction.class,\n+    configurationPolicy = ConfigurationPolicy.REQUIRE,\n+    enabled = false\n+)\n+public class LogoutAction extends LoggingComponent implements LifecycleAction {\n+\n+    @Override\n+    public void processLifecycleEvent(LifecycleEvent lifecycleEvent) throws ActionException {\n+        HttpServletResponse response = lifecycleEvent.getResponse();\n+        response.setHeader(\"Clear-Site-Data\", \"\\\"cache\\\", \\\"storage\\\", \\\"cookies\\\"\");", "originalCommit": "e14509879339d6f97e573ba9bacfbd9d75b3ba62", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjE3MDE4Ng==", "url": "https://github.com/eclipse/sw360/pull/819#discussion_r412170186", "bodyText": "Thanks @JaideepPalit for the suggestion. I have added it in sw360.properties", "author": "smrutis1", "createdAt": "2020-04-21T13:10:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI5Njk4Ng=="}], "type": "inlineReview"}, {"oid": "c01322e3e195f830bf5094755877e81cda706876", "url": "https://github.com/eclipse/sw360/commit/c01322e3e195f830bf5094755877e81cda706876", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-04-21T12:46:33Z", "type": "commit"}, {"oid": "c01322e3e195f830bf5094755877e81cda706876", "url": "https://github.com/eclipse/sw360/commit/c01322e3e195f830bf5094755877e81cda706876", "message": "feat(logout): Added post logout hook to add custom logic\n\n   * Fixed components activation dynamically\n   * Added `Clear-Site-Data` response header upon logout to clear cookies, storage and cache\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-04-21T12:46:33Z", "type": "forcePushed"}]}