{"pr_number": 887, "pr_title": "feat(project-report): Layout and content update in project report", "pr_createdAt": "2020-06-15T14:05:06Z", "pr_url": "https://github.com/eclipse/sw360/pull/887", "timeline": [{"oid": "f2d0d6011d5cdd11443cbe129e4a51c051bb13a7", "url": "https://github.com/eclipse/sw360/commit/f2d0d6011d5cdd11443cbe129e4a51c051bb13a7", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-06-18T13:33:03Z", "type": "forcePushed"}, {"oid": "42bd47e6f6b49c658a03a00db8a1f848b3cc572b", "url": "https://github.com/eclipse/sw360/commit/42bd47e6f6b49c658a03a00db8a1f848b3cc572b", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-06-19T05:38:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTUxNzQ4Ng==", "url": "https://github.com/eclipse/sw360/pull/887#discussion_r449517486", "bodyText": "Kindly check code formatting is missing to some place", "author": "JaideepPalit", "createdAt": "2020-07-03T10:46:22Z", "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/projects/ProjectPortletUtils.java", "diffHunk": "@@ -148,14 +170,20 @@ private static void updateProjectTodosFromRequest(String[] ids, String userId, P\n                     projectTodo.fulfilled = false;\n                     projectTodo.setUserId(userId);\n                     projectTodo.setUpdated(updated);\n+                    projectTodo.setComments(getCommentsByTodoId(request, projectTodo.todoId));\n                     return projectTodo;\n                 })\n                 .collect(Collectors.toSet());\n \n         projectTodos.addAll(changedToNotFulfilled);\n+        projectTodos.addAll(listOfNotFulfilledProjectIds);\n         project.setTodos(projectTodos);\n     }\n \n+    public static String getCommentsByTodoId(PortletRequest request, String id) {\n+        return request.getParameter(\"projectobligation:\"+id);", "originalCommit": "42bd47e6f6b49c658a03a00db8a1f848b3cc572b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTUyMDAwNg==", "url": "https://github.com/eclipse/sw360/pull/887#discussion_r449520006", "bodyText": "Add error log", "author": "JaideepPalit", "createdAt": "2020-07-03T10:52:06Z", "path": "libraries/lib-datahandler/src/main/java/org/eclipse/sw360/datahandler/common/SW360Utils.java", "diffHunk": "@@ -270,13 +277,37 @@ public static String printFullname(Release release) {\n         return getReleaseFullname(vendorName, release.getName(), release.getVersion());\n     }\n \n-    public static Map<Todo, TodoInfo> getProjectObligations(Project project) {\n+    public static Map<Obligations, TodoInfo> getProjectObligations(Project project) {\n+        final LicenseService.Iface licenseClient = new ThriftClients().makeLicenseClient();\n+\n+        Set<ProjectTodo> projectTodos = project.getTodosSize() > 0 ? project.getTodos() : Collections.emptySet();\n+        try {\n+            return licenseClient.getTodos().stream()\n+                    .filter(o -> o.isValidForProject())\n+                    .filter(o -> Objects.nonNull(o.getObligationType()))\n+                    .filter(o->o.getObligationType().equals(ObligationType.PRODUCT_OBLIGATION))\n+                    .collect(Collectors.toMap(\n+                            todo -> todo,\n+                            todo -> new TodoInfo(projectTodos.stream()\n+                                        .filter(projectTodo -> projectTodo.getTodoId().equals(todo.getId()))\n+                                        .findFirst()\n+                                        .orElseGet(ProjectTodo::new))\n+                            )\n+                    );\n+        } catch (TException te) {\n+            return Collections.emptyMap();", "originalCommit": "42bd47e6f6b49c658a03a00db8a1f848b3cc572b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAxNDY4NA==", "url": "https://github.com/eclipse/sw360/pull/887#discussion_r452014684", "bodyText": "Done", "author": "smrutis1", "createdAt": "2020-07-09T07:22:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTUyMDAwNg=="}], "type": "inlineReview"}, {"oid": "26d3d5de7649be5e9fe7303a2f3ef66981df7deb", "url": "https://github.com/eclipse/sw360/commit/26d3d5de7649be5e9fe7303a2f3ef66981df7deb", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-07-08T08:00:38Z", "type": "forcePushed"}, {"oid": "45ead8a2f2c1f4e7973ab4f13980d618466215e1", "url": "https://github.com/eclipse/sw360/commit/45ead8a2f2c1f4e7973ab4f13980d618466215e1", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-07-08T17:09:36Z", "type": "forcePushed"}, {"oid": "4638664bc5f6cd3a568c615afc9c1eeb4e5dc576", "url": "https://github.com/eclipse/sw360/commit/4638664bc5f6cd3a568c615afc9c1eeb4e5dc576", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-07-09T07:05:43Z", "type": "forcePushed"}, {"oid": "e64e8c3e6e1783eaea67268b46d31fc99a434974", "url": "https://github.com/eclipse/sw360/commit/e64e8c3e6e1783eaea67268b46d31fc99a434974", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-07-17T07:55:03Z", "type": "forcePushed"}, {"oid": "787aa1be1d8415f8d227b6d9b262a104a9073bb4", "url": "https://github.com/eclipse/sw360/commit/787aa1be1d8415f8d227b6d9b262a104a9073bb4", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-07-17T10:55:11Z", "type": "forcePushed"}, {"oid": "39ea743315260096ed5bf323ea5b28871668c009", "url": "https://github.com/eclipse/sw360/commit/39ea743315260096ed5bf323ea5b28871668c009", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-07-21T06:05:55Z", "type": "forcePushed"}, {"oid": "1b4f236258586a3ae131a6b4941bb0f23644fc72", "url": "https://github.com/eclipse/sw360/commit/1b4f236258586a3ae131a6b4941bb0f23644fc72", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-07-22T11:15:53Z", "type": "commit"}, {"oid": "1b4f236258586a3ae131a6b4941bb0f23644fc72", "url": "https://github.com/eclipse/sw360/commit/1b4f236258586a3ae131a6b4941bb0f23644fc72", "message": "feat(project-report): Layout and content update in project report\n\n\t* Renamed todo to obligation in admin section.\n        * Now different levels of obligations(viz. organisation obligation, project obligation etc.) can be added in that section, the same will be\n          reflected in administration section of individual project, where user can choose fill the fulfillment details of the obligation.\n        * In product clearing report chapter 1.4.3 and 1.4.4 if there is no content per default the shall be the sentences \"No commercial 3rd party software is used\".\n        * Common rules table renamed to Organisation obligation.\n        * Additional requirement table renamed to component obligation.\n        * Added a table for project level obligation.\n        * Spliited the additional component obligation table license wise.\n          etc.\n\nSigned-off-by: Smruti Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-07-22T11:15:53Z", "type": "forcePushed"}]}