{"pr_number": 9590, "pr_title": "DruidInputSource can add new dimensions during re-ingestion", "pr_createdAt": "2020-03-31T01:19:59Z", "pr_url": "https://github.com/apache/druid/pull/9590", "timeline": [{"oid": "6a4ee82a8fcbe5cc79d973abe4857e32ff686490", "url": "https://github.com/apache/druid/commit/6a4ee82a8fcbe5cc79d973abe4857e32ff686490", "message": "WIP integration tests", "committedDate": "2020-03-31T00:35:32Z", "type": "commit"}, {"oid": "045584b0f6fbee9ca5c07117bf6f21d6e2815c8b", "url": "https://github.com/apache/druid/commit/045584b0f6fbee9ca5c07117bf6f21d6e2815c8b", "message": "Add integration test for ingestion with transformSpec", "committedDate": "2020-03-31T01:17:57Z", "type": "commit"}, {"oid": "46ae13bb23811b8337025554ef4e0be2bff6e604", "url": "https://github.com/apache/druid/commit/46ae13bb23811b8337025554ef4e0be2bff6e604", "message": "WIP almost working tests", "committedDate": "2020-03-31T03:00:26Z", "type": "commit"}, {"oid": "608e56846d5c419d6e0f38f92ab73b773239c644", "url": "https://github.com/apache/druid/commit/608e56846d5c419d6e0f38f92ab73b773239c644", "message": "Add ignored tests", "committedDate": "2020-03-31T03:03:53Z", "type": "commit"}, {"oid": "0f7dd96d66daabb322afd8936a7fca101bd54952", "url": "https://github.com/apache/druid/commit/0f7dd96d66daabb322afd8936a7fca101bd54952", "message": "checkstyle stuff", "committedDate": "2020-03-31T03:55:48Z", "type": "commit"}, {"oid": "f6f10aaabcce7d2675b92b5ba92b2fe0cc290648", "url": "https://github.com/apache/druid/commit/f6f10aaabcce7d2675b92b5ba92b2fe0cc290648", "message": "remove newPage from index task ingestion spec", "committedDate": "2020-03-31T03:58:47Z", "type": "commit"}, {"oid": "013150d4e0f49798c48c8e19e6cad7909ed3f2c6", "url": "https://github.com/apache/druid/commit/013150d4e0f49798c48c8e19e6cad7909ed3f2c6", "message": "more test cleanup", "committedDate": "2020-03-31T04:07:53Z", "type": "commit"}, {"oid": "db4dc280e35d35c4dc4035c61bc4bfdbeaa59283", "url": "https://github.com/apache/druid/commit/db4dc280e35d35c4dc4035c61bc4bfdbeaa59283", "message": "still not quite working", "committedDate": "2020-03-31T04:15:06Z", "type": "commit"}, {"oid": "8d2c471ac91093f46ae292c42fdddc4a22a20f68", "url": "https://github.com/apache/druid/commit/8d2c471ac91093f46ae292c42fdddc4a22a20f68", "message": "Actually disable the tests", "committedDate": "2020-03-31T04:31:15Z", "type": "commit"}, {"oid": "9da1c534a5046e1d1af9189405d9b787a300f81d", "url": "https://github.com/apache/druid/commit/9da1c534a5046e1d1af9189405d9b787a300f81d", "message": "working tests", "committedDate": "2020-03-31T06:29:13Z", "type": "commit"}, {"oid": "7afad45495820ca7e297a25316fc3de57d3a6f06", "url": "https://github.com/apache/druid/commit/7afad45495820ca7e297a25316fc3de57d3a6f06", "message": "fix codestyle", "committedDate": "2020-03-31T06:30:34Z", "type": "commit"}, {"oid": "65216e3a583e2e1a2f88aebd66ebb9be5fe40535", "url": "https://github.com/apache/druid/commit/65216e3a583e2e1a2f88aebd66ebb9be5fe40535", "message": "dont use junit in integration tests", "committedDate": "2020-03-31T07:52:04Z", "type": "commit"}, {"oid": "fc8feddc1616c9ecc3b251af918a02dcb1924882", "url": "https://github.com/apache/druid/commit/fc8feddc1616c9ecc3b251af918a02dcb1924882", "message": "actually fix the bug", "committedDate": "2020-03-31T21:18:12Z", "type": "commit"}, {"oid": "53433a2623d7669e6ca80bf91bbd4bb1572c391d", "url": "https://github.com/apache/druid/commit/53433a2623d7669e6ca80bf91bbd4bb1572c391d", "message": "fix checkstyle", "committedDate": "2020-03-31T21:22:44Z", "type": "commit"}, {"oid": "d5ee5ef38e6f706a2e55f12420d0d0409e048bec", "url": "https://github.com/apache/druid/commit/d5ee5ef38e6f706a2e55f12420d0d0409e048bec", "message": "bring index tests closer to reindex tests", "committedDate": "2020-03-31T21:32:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkxNDQwMg==", "url": "https://github.com/apache/druid/pull/9590#discussion_r401914402", "bodyText": "nit: please add description for the return value or remove this.", "author": "jihoonson", "createdAt": "2020-04-01T21:16:11Z", "path": "indexing-service/src/main/java/org/apache/druid/indexing/common/ReingestionTimelineUtils.java", "diffHunk": "@@ -101,4 +103,34 @@\n                     .mapToObj(orderedMetrics::get)\n                     .collect(Collectors.toList());\n   }\n+\n+  /**\n+   * Utility function to get dimensions that should be ingested. The preferred order is\n+   * - Explicit dimensions if they are provided.\n+   * - Custom dimensions are provided in the inputSpec.\n+   * - Calculate dimensions from the timeline but exclude any dimension exclusions.\n+   *\n+   * @param explicitDimensions sent as part of the re-ingestion InputSource.\n+   * @param dimensionsSpec from the provided ingestion spec.\n+   * @param timeLineSegments for the datasource that is being read.\n+   * @return", "originalCommit": "d5ee5ef38e6f706a2e55f12420d0d0409e048bec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}