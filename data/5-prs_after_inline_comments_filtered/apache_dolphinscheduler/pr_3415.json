{"pr_number": 3415, "pr_title": "[Improvement][server] Fix some sonar analyzed bugs", "pr_createdAt": "2020-08-05T06:10:00Z", "pr_url": "https://github.com/apache/dolphinscheduler/pull/3415", "timeline": [{"oid": "f59acd141a183d60e8ba81247782d7ddf0ebdbd7", "url": "https://github.com/apache/dolphinscheduler/commit/f59acd141a183d60e8ba81247782d7ddf0ebdbd7", "message": "[FIX_BUG][*]fix sonar bugs\nfix assert error(assertions always pass)", "committedDate": "2020-08-05T04:43:29Z", "type": "commit"}, {"oid": "680d370f1c980ba6cf10817d627f03045d70304d", "url": "https://github.com/apache/dolphinscheduler/commit/680d370f1c980ba6cf10817d627f03045d70304d", "message": "fix assert error(assertions always pass)\ninsert data should judging the success status", "committedDate": "2020-08-05T04:44:56Z", "type": "commit"}, {"oid": "494039419aa1e781491881cafa142b9d5c8d9883", "url": "https://github.com/apache/dolphinscheduler/commit/494039419aa1e781491881cafa142b9d5c8d9883", "message": "fix assert error(assertions always pass)", "committedDate": "2020-08-05T04:51:25Z", "type": "commit"}, {"oid": "4ff1e9be3855f1060a567aa2ae3caa743d2486ec", "url": "https://github.com/apache/dolphinscheduler/commit/4ff1e9be3855f1060a567aa2ae3caa743d2486ec", "message": "use AtomicReference<Object> to replace unsafe volatile Object", "committedDate": "2020-08-05T05:01:18Z", "type": "commit"}, {"oid": "3b8df7459da4efc0c8493ebe74d63f834c2d6635", "url": "https://github.com/apache/dolphinscheduler/commit/3b8df7459da4efc0c8493ebe74d63f834c2d6635", "message": "use AtomicReference<Object> to replace unsafe volatile Object", "committedDate": "2020-08-05T05:03:27Z", "type": "commit"}, {"oid": "1be935e100c0515a8413df69515f9bc594559f84", "url": "https://github.com/apache/dolphinscheduler/commit/1be935e100c0515a8413df69515f9bc594559f84", "message": "lazy initialization holder class Singleton...", "committedDate": "2020-08-05T06:07:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA5MTE1Mg==", "url": "https://github.com/apache/dolphinscheduler/pull/3415#discussion_r466091152", "bodyText": "If the RuntimeException, how the invokers to handle it ?", "author": "gabrywu", "createdAt": "2020-08-06T01:23:34Z", "path": "dolphinscheduler-dao/src/test/java/org/apache/dolphinscheduler/dao/mapper/ResourceMapperTest.java", "diffHunk": "@@ -76,8 +76,10 @@ private Resource insertOne(){\n         resource.setDirectory(false);\n         resource.setType(ResourceType.FILE);\n         resource.setUserId(111);\n-        resourceMapper.insert(resource);\n-        return resource;\n+        if( resourceMapper.insert(resource)>0 ){\n+            return resource;\n+        }\n+        throw new RuntimeException(\"insert data error\");", "originalCommit": "1be935e100c0515a8413df69515f9bc594559f84", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA5MzU3NQ==", "url": "https://github.com/apache/dolphinscheduler/pull/3415#discussion_r466093575", "bodyText": "I also think assert.fail() is better.", "author": "yangyichao-mango", "createdAt": "2020-08-06T01:32:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA5MTE1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM4NDE1Ng==", "url": "https://github.com/apache/dolphinscheduler/pull/3415#discussion_r466384156", "bodyText": "Thanks for your review, I will finish it later", "author": "CalvinKirs", "createdAt": "2020-08-06T12:43:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA5MTE1Mg=="}], "type": "inlineReview"}, {"oid": "b5b691b53b8527376dce9204e20707dcebe8b192", "url": "https://github.com/apache/dolphinscheduler/commit/b5b691b53b8527376dce9204e20707dcebe8b192", "message": "reformat code\njudge database operations", "committedDate": "2020-08-10T11:49:13Z", "type": "commit"}, {"oid": "ba8d552b1af954ed0c1aff8f91e3b2ce440bf317", "url": "https://github.com/apache/dolphinscheduler/commit/ba8d552b1af954ed0c1aff8f91e3b2ce440bf317", "message": "reformat code\njudge database operations", "committedDate": "2020-08-10T12:23:01Z", "type": "commit"}, {"oid": "c3f902734f62626892fb6eb307a81dbcc9c3114c", "url": "https://github.com/apache/dolphinscheduler/commit/c3f902734f62626892fb6eb307a81dbcc9c3114c", "message": "revert", "committedDate": "2020-08-11T01:35:26Z", "type": "commit"}, {"oid": "44358ee1f0ae37bb7bfc16b972aabfe091d8adb2", "url": "https://github.com/apache/dolphinscheduler/commit/44358ee1f0ae37bb7bfc16b972aabfe091d8adb2", "message": "use ThreadLocalRandom to build random numbers", "committedDate": "2020-08-11T05:36:01Z", "type": "commit"}, {"oid": "42e7a3a792681c35360ea2ba0c4c8d1522467411", "url": "https://github.com/apache/dolphinscheduler/commit/42e7a3a792681c35360ea2ba0c4c8d1522467411", "message": "reform code", "committedDate": "2020-08-12T12:29:36Z", "type": "commit"}, {"oid": "cadb5d70fd16ef6d3b6722751d339598f6142d51", "url": "https://github.com/apache/dolphinscheduler/commit/cadb5d70fd16ef6d3b6722751d339598f6142d51", "message": "fix dao test error", "committedDate": "2020-08-12T12:44:42Z", "type": "commit"}, {"oid": "ee71089d259bb13f06792a0c3e2e7e0047ea20c5", "url": "https://github.com/apache/dolphinscheduler/commit/ee71089d259bb13f06792a0c3e2e7e0047ea20c5", "message": "judge database operations", "committedDate": "2020-08-12T12:46:57Z", "type": "commit"}]}