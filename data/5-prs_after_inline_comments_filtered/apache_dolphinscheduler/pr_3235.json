{"pr_number": 3235, "pr_title": "[Feature#3234][cluster]enhanced load balancing", "pr_createdAt": "2020-07-18T04:04:23Z", "pr_url": "https://github.com/apache/dolphinscheduler/pull/3235", "timeline": [{"oid": "0cb9ec34df9feb5f6d88f6a41fd73b0af6ea051b", "url": "https://github.com/apache/dolphinscheduler/commit/0cb9ec34df9feb5f6d88f6a41fd73b0af6ea051b", "message": "[Future#3234][cluster]enhanced load balancing\nweight-based load balancing algorithm\nthis close # 3234", "committedDate": "2020-07-18T04:02:49Z", "type": "commit"}, {"oid": "dc4ba7703fbfc79f0954c8a10789b7ce831a9e39", "url": "https://github.com/apache/dolphinscheduler/commit/dc4ba7703fbfc79f0954c8a10789b7ce831a9e39", "message": "remove useless parameter", "committedDate": "2020-07-18T04:24:58Z", "type": "commit"}, {"oid": "d80129667aaf0378a59a38e5b4ff289aad017cbb", "url": "https://github.com/apache/dolphinscheduler/commit/d80129667aaf0378a59a38e5b4ff289aad017cbb", "message": "code smell", "committedDate": "2020-07-18T07:26:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc2NTE3Ng==", "url": "https://github.com/apache/dolphinscheduler/pull/3235#discussion_r456765176", "bodyText": "Hi,\nThis variable is not used in this project, please delete.\nIf you have any question or suggestion, please put forward~", "author": "yangyichao-mango", "createdAt": "2020-07-18T08:19:18Z", "path": "dolphinscheduler-common/src/main/java/org/apache/dolphinscheduler/common/Constants.java", "diffHunk": "@@ -249,6 +249,8 @@ private Constants() {\n \n     public static final String WORKER_RESERVED_MEMORY = \"worker.reserved.memory\";\n \n+    public static final String WORKER_WEIGHT = \"worker.weight\";", "originalCommit": "d80129667aaf0378a59a38e5b4ff289aad017cbb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc2NTQ2OA==", "url": "https://github.com/apache/dolphinscheduler/pull/3235#discussion_r456765468", "bodyText": "Hi,\nIf user choose to use RoundRobinSelector, there will be no need to add the weight to zk heartbeat info. Maybe we can design this feature better.\nIf you have any question or suggestion, please put forward~", "author": "yangyichao-mango", "createdAt": "2020-07-18T08:23:08Z", "path": "dolphinscheduler-server/src/main/java/org/apache/dolphinscheduler/server/worker/registry/WorkerRegistry.java", "diffHunk": "@@ -152,6 +152,7 @@ public void unRegistry() {\n             // trim and lower case is need\n             workerZkPathBuilder.append(workGroup.trim().toLowerCase()).append(SLASH);\n             workerZkPathBuilder.append(address);\n+            workerZkPathBuilder.append(weight).append(SLASH);", "originalCommit": "d80129667aaf0378a59a38e5b4ff289aad017cbb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc2NjYxMg==", "url": "https://github.com/apache/dolphinscheduler/pull/3235#discussion_r456766612", "bodyText": "Hi, in my opinion, every load choice is related to weight. Can you talk about why it is not needed when using the RoundRobin algorithm?", "author": "CalvinKirs", "createdAt": "2020-07-18T08:37:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc2NTQ2OA=="}], "type": "inlineReview"}, {"oid": "4d984fc05a0945d8d32e9dfe4bb1950606de4631", "url": "https://github.com/apache/dolphinscheduler/commit/4d984fc05a0945d8d32e9dfe4bb1950606de4631", "message": "load balancing according to work group", "committedDate": "2020-07-18T13:47:41Z", "type": "commit"}, {"oid": "88a2c00eeb4cb13c806b4e9ea70cc400ea431b93", "url": "https://github.com/apache/dolphinscheduler/commit/88a2c00eeb4cb13c806b4e9ea70cc400ea431b93", "message": "add smooth weight round robin", "committedDate": "2020-07-19T05:33:50Z", "type": "commit"}, {"oid": "38a04ae55f1160484a91a4e457c3768b2173c23f", "url": "https://github.com/apache/dolphinscheduler/commit/38a04ae55f1160484a91a4e457c3768b2173c23f", "message": "remove unused constants", "committedDate": "2020-07-19T05:35:57Z", "type": "commit"}, {"oid": "0f268b62b7e576de76591ec012dcbc920324794d", "url": "https://github.com/apache/dolphinscheduler/commit/0f268b62b7e576de76591ec012dcbc920324794d", "message": "perfect unit test", "committedDate": "2020-07-19T05:49:48Z", "type": "commit"}, {"oid": "e6312c558c75a3ad1c18976294667ed69ade97d3", "url": "https://github.com/apache/dolphinscheduler/commit/e6312c558c75a3ad1c18976294667ed69ade97d3", "message": "code smell", "committedDate": "2020-07-19T06:03:09Z", "type": "commit"}, {"oid": "05e17a18d92a8ea0e85083155a528bba77112b22", "url": "https://github.com/apache/dolphinscheduler/commit/05e17a18d92a8ea0e85083155a528bba77112b22", "message": "code smell", "committedDate": "2020-07-19T06:25:28Z", "type": "commit"}, {"oid": "b508581ff2a36f0a9ffae198af0f8813464fb96d", "url": "https://github.com/apache/dolphinscheduler/commit/b508581ff2a36f0a9ffae198af0f8813464fb96d", "message": "add work weight config", "committedDate": "2020-07-19T07:24:41Z", "type": "commit"}, {"oid": "0bfe7e7c38484d359a0df7e9441456e17475b9a5", "url": "https://github.com/apache/dolphinscheduler/commit/0bfe7e7c38484d359a0df7e9441456e17475b9a5", "message": "fix config error", "committedDate": "2020-08-10T07:48:55Z", "type": "commit"}, {"oid": "1c704472b3a419296ea5fd0a2b2ac808bf0c4590", "url": "https://github.com/apache/dolphinscheduler/commit/1c704472b3a419296ea5fd0a2b2ac808bf0c4590", "message": "add weight docs to readme.md", "committedDate": "2020-08-10T07:49:37Z", "type": "commit"}]}