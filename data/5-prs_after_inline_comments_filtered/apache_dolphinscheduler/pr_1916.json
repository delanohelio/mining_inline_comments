{"pr_number": 1916, "pr_title": "modify LoggerServiceTest UT by mock", "pr_createdAt": "2020-02-09T08:40:56Z", "pr_url": "https://github.com/apache/dolphinscheduler/pull/1916", "timeline": [{"oid": "257a3ee3e37720c028a92c3abdeb828e60dbbcc8", "url": "https://github.com/apache/dolphinscheduler/commit/257a3ee3e37720c028a92c3abdeb828e60dbbcc8", "message": "Merge pull request #18 from apache/dev\n\nupdate", "committedDate": "2019-12-30T10:38:34Z", "type": "commit"}, {"oid": "d5fe55ad56bd902523a0868a7d4f5d2bed3e8caa", "url": "https://github.com/apache/dolphinscheduler/commit/d5fe55ad56bd902523a0868a7d4f5d2bed3e8caa", "message": "modify UdfFuncServiceTest UT", "committedDate": "2019-12-30T10:44:03Z", "type": "commit"}, {"oid": "38e3af0dee6ec28cb99e1ce6b4fdcf66ec7ef367", "url": "https://github.com/apache/dolphinscheduler/commit/38e3af0dee6ec28cb99e1ce6b4fdcf66ec7ef367", "message": "Merge pull request #19 from apache/dev\n\nupdate", "committedDate": "2020-01-02T08:38:31Z", "type": "commit"}, {"oid": "67acd09f9401ea675d0231a610c23a8b58459767", "url": "https://github.com/apache/dolphinscheduler/commit/67acd09f9401ea675d0231a610c23a8b58459767", "message": "fix get tenantCode my NPE", "committedDate": "2020-01-02T08:53:07Z", "type": "commit"}, {"oid": "32604123eb94edb0148b0f38e6947e07894f0ae8", "url": "https://github.com/apache/dolphinscheduler/commit/32604123eb94edb0148b0f38e6947e07894f0ae8", "message": "add  ResourcesServiceTest", "committedDate": "2020-01-02T08:53:43Z", "type": "commit"}, {"oid": "b0d73fb7897d94e318d63748d87b271f6adf984b", "url": "https://github.com/apache/dolphinscheduler/commit/b0d73fb7897d94e318d63748d87b271f6adf984b", "message": "add error log", "committedDate": "2020-01-04T03:40:53Z", "type": "commit"}, {"oid": "a1fe80eaa302c26c236a181ebd0e0970d71eade6", "url": "https://github.com/apache/dolphinscheduler/commit/a1fe80eaa302c26c236a181ebd0e0970d71eade6", "message": "Merge pull request #21 from apache/dev\n\nupdate", "committedDate": "2020-01-07T13:35:48Z", "type": "commit"}, {"oid": "ec13974eedf824172b256a21c18fee49e554da84", "url": "https://github.com/apache/dolphinscheduler/commit/ec13974eedf824172b256a21c18fee49e554da84", "message": "Merge pull request #27 from apache/dev\n\nupdate", "committedDate": "2020-01-15T05:56:13Z", "type": "commit"}, {"oid": "b4a6d5440fe62da1135acc7b3a6134ae890a6f29", "url": "https://github.com/apache/dolphinscheduler/commit/b4a6d5440fe62da1135acc7b3a6134ae890a6f29", "message": "add BaseServiceTest BaseServiceTest UT", "committedDate": "2020-01-15T06:11:09Z", "type": "commit"}, {"oid": "b34f9745dc63e8e95407f5c0612db13b649b6e4a", "url": "https://github.com/apache/dolphinscheduler/commit/b34f9745dc63e8e95407f5c0612db13b649b6e4a", "message": "update", "committedDate": "2020-01-15T06:56:17Z", "type": "commit"}, {"oid": "19bde513504d991443995d0a3246afc86bc537bb", "url": "https://github.com/apache/dolphinscheduler/commit/19bde513504d991443995d0a3246afc86bc537bb", "message": "fix word spelling", "committedDate": "2020-01-16T07:43:58Z", "type": "commit"}, {"oid": "55923016b49c4e9c0a425a2ea0be890a1e5635de", "url": "https://github.com/apache/dolphinscheduler/commit/55923016b49c4e9c0a425a2ea0be890a1e5635de", "message": "Revert \"fix word spelling\"\n\nThis reverts commit 19bde513504d991443995d0a3246afc86bc537bb.", "committedDate": "2020-01-16T07:57:16Z", "type": "commit"}, {"oid": "25c63336bfe86c81ff1d05dc0cc43a2d1a94b2c5", "url": "https://github.com/apache/dolphinscheduler/commit/25c63336bfe86c81ff1d05dc0cc43a2d1a94b2c5", "message": "Merge branch 'dev' of https://github.com/apache/incubator-dolphinscheduler into apache-dev\n\n# Conflicts:\n#\tpom.xml", "committedDate": "2020-01-16T08:32:08Z", "type": "commit"}, {"oid": "9ebe177e1113b845a50336cb1c1221b0265dce6a", "url": "https://github.com/apache/dolphinscheduler/commit/9ebe177e1113b845a50336cb1c1221b0265dce6a", "message": "fix Misspelled words", "committedDate": "2020-01-16T08:55:45Z", "type": "commit"}, {"oid": "49b4d084b35a0d4ee9cdcf4ecb1ebafa03bc828e", "url": "https://github.com/apache/dolphinscheduler/commit/49b4d084b35a0d4ee9cdcf4ecb1ebafa03bc828e", "message": "Merge pull request #1 from apache/dev\n\nudpate", "committedDate": "2020-02-08T10:08:04Z", "type": "commit"}, {"oid": "5c9e8b4b1614686db0d02b0628ae232b3a850389", "url": "https://github.com/apache/dolphinscheduler/commit/5c9e8b4b1614686db0d02b0628ae232b3a850389", "message": "Merge pull request #2 from apache/dev\n\nupdate", "committedDate": "2020-02-09T08:27:30Z", "type": "commit"}, {"oid": "e00ef4915d50db3d594e89da8bc0efa9b4e25ba7", "url": "https://github.com/apache/dolphinscheduler/commit/e00ef4915d50db3d594e89da8bc0efa9b4e25ba7", "message": "modify loggerService UT by Mock", "committedDate": "2020-02-09T08:32:10Z", "type": "commit"}, {"oid": "b3976da5b022886b9d7089b856118e75d7884707", "url": "https://github.com/apache/dolphinscheduler/commit/b3976da5b022886b9d7089b856118e75d7884707", "message": "modify LoggerServiceTest ut", "committedDate": "2020-02-10T03:35:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg5NDIwNg==", "url": "https://github.com/apache/dolphinscheduler/pull/1916#discussion_r376894206", "bodyText": "Repalce @RunWith(PowerMockRunner.class) with @RunWith(MockitoJUnitRunner.Silent.class) will get right coverage\u3002", "author": "Jave-Chen", "createdAt": "2020-02-10T07:07:16Z", "path": "dolphinscheduler-api/src/test/java/org/apache/dolphinscheduler/api/service/LoggerServiceTest.java", "diffHunk": "@@ -16,37 +16,97 @@\n  */\n package org.apache.dolphinscheduler.api.service;\n \n-import org.apache.dolphinscheduler.api.ApiApplicationServer;\n import org.apache.dolphinscheduler.api.enums.Status;\n+import org.apache.dolphinscheduler.api.log.LogClient;\n import org.apache.dolphinscheduler.api.utils.Result;\n-import org.apache.dolphinscheduler.common.enums.UserType;\n-import org.apache.dolphinscheduler.dao.entity.User;\n+import org.apache.dolphinscheduler.dao.ProcessDao;\n+import org.apache.dolphinscheduler.dao.entity.TaskInstance;\n import org.junit.Assert;\n+import org.junit.Before;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.powermock.api.mockito.PowerMockito;\n+import org.powermock.core.classloader.annotations.PrepareForTest;\n+import org.powermock.modules.junit4.PowerMockRunner;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n-import org.springframework.beans.factory.annotation.Autowired;\n-import org.springframework.boot.test.context.SpringBootTest;\n-import org.springframework.test.context.junit4.SpringRunner;\n \n-@RunWith(SpringRunner.class)\n-@SpringBootTest(classes = ApiApplicationServer.class)\n+@RunWith(PowerMockRunner.class)\n+@PrepareForTest({LoggerService.class})", "originalCommit": "b3976da5b022886b9d7089b856118e75d7884707", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkwNjI5MA==", "url": "https://github.com/apache/dolphinscheduler/pull/1916#discussion_r376906290", "bodyText": "modify @RunWith(MockitoJUnitRunner.class)", "author": "samz406", "createdAt": "2020-02-10T07:51:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg5NDIwNg=="}], "type": "inlineReview"}, {"oid": "69fa28357b025655ab5b0d6d2d5536e2e6add558", "url": "https://github.com/apache/dolphinscheduler/commit/69fa28357b025655ab5b0d6d2d5536e2e6add558", "message": "modify @RunWith(MockitoJUnitRunner.class)", "committedDate": "2020-02-10T07:33:37Z", "type": "commit"}, {"oid": "1172abee44b2b894b10b88233919959d383acb13", "url": "https://github.com/apache/dolphinscheduler/commit/1172abee44b2b894b10b88233919959d383acb13", "message": "add comment", "committedDate": "2020-02-11T01:00:56Z", "type": "commit"}]}