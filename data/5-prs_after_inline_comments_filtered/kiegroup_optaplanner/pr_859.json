{"pr_number": 859, "pr_title": "PLANNER-1950 ConstraintProvider tests for School Timetabling quickstarts", "pr_createdAt": "2020-07-27T15:31:55Z", "pr_url": "https://github.com/kiegroup/optaplanner/pull/859", "timeline": [{"oid": "2f0809fe1dee73eb6d95159f4032992606ed3f6d", "url": "https://github.com/kiegroup/optaplanner/commit/2f0809fe1dee73eb6d95159f4032992606ed3f6d", "message": "PLANNER-1950 Add constraint provider test to quarkus-school-timetabling-quickstart", "committedDate": "2020-07-27T15:16:44Z", "type": "commit"}, {"oid": "f713072be65ffd757fcb7dc6ff6a12241a883861", "url": "https://github.com/kiegroup/optaplanner/commit/f713072be65ffd757fcb7dc6ff6a12241a883861", "message": "PLANNER-1950 Add constraint provider test to spring-boot-school-timetabling-quickstart", "committedDate": "2020-07-27T15:20:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk4MzQ4Nw==", "url": "https://github.com/kiegroup/optaplanner/pull/859#discussion_r460983487", "bodyText": "Not public?", "author": "Christopher-Chianelli", "createdAt": "2020-07-27T15:39:38Z", "path": "optaplanner-quickstarts/quarkus-school-timetabling/src/test/java/org/acme/schooltimetabling/solver/TimeTableConstraintProviderTest.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.acme.schooltimetabling.solver;\n+\n+import java.time.DayOfWeek;\n+import java.time.LocalTime;\n+\n+import org.acme.schooltimetabling.domain.Lesson;\n+import org.acme.schooltimetabling.domain.Room;\n+import org.acme.schooltimetabling.domain.TimeTable;\n+import org.acme.schooltimetabling.domain.Timeslot;\n+import org.junit.jupiter.api.Test;\n+import org.optaplanner.test.api.score.stream.ConstraintVerifier;\n+\n+class TimeTableConstraintProviderTest {", "originalCommit": "f713072be65ffd757fcb7dc6ff6a12241a883861", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk4NzI1Mg==", "url": "https://github.com/kiegroup/optaplanner/pull/859#discussion_r460987252", "bodyText": "Since JUnit 5, it needn't be. And I would argue it shouldn't be, as it doesn't export anything to any other class, nor does it need to be visible.\nMost of Optaplanner code makes the test class public. However, the constraint provider in facility maintenance quickstart already doesn't. So, faced with a choice, I picked the rule that was closer and made more sense.", "author": "triceo", "createdAt": "2020-07-27T15:45:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk4MzQ4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NDAxOQ==", "url": "https://github.com/kiegroup/optaplanner/pull/859#discussion_r461174019", "bodyText": "In a real project, this constructor would deserve a documentation explaining how long a timeslot it creates if you do not provide an end time. Not sure if it's worth it for the quickstart. Your call.", "author": "yurloc", "createdAt": "2020-07-27T21:14:27Z", "path": "optaplanner-quickstarts/quarkus-school-timetabling/src/main/java/org/acme/schooltimetabling/domain/Timeslot.java", "diffHunk": "@@ -54,6 +54,11 @@ public Timeslot(DayOfWeek dayOfWeek, LocalTime startTime, LocalTime endTime) {\n         this.endTime = endTime;\n     }\n \n+    public Timeslot(long id, DayOfWeek dayOfWeek, LocalTime startTime) {", "originalCommit": "f713072be65ffd757fcb7dc6ff6a12241a883861", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NTkyNQ==", "url": "https://github.com/kiegroup/optaplanner/pull/859#discussion_r461175925", "bodyText": "The end time doesn't really matter anyways; all that matter if time slots are exactly the same or not (the constraints do not check for overlap of time slots, but equality of time slots)", "author": "Christopher-Chianelli", "createdAt": "2020-07-27T21:18:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NDAxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NzA2Nw==", "url": "https://github.com/kiegroup/optaplanner/pull/859#discussion_r461177067", "bodyText": "(actually, it does matter for one constraint - teacherTimeEfficiency and studentGroupSubjectVariety, where we check for > 30 minutes gaps). There is an implict assumption that timeslots do not overlap", "author": "Christopher-Chianelli", "createdAt": "2020-07-27T21:20:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NDAxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMyMjQ2Ng==", "url": "https://github.com/kiegroup/optaplanner/pull/859#discussion_r461322466", "bodyText": "Considering that this would be the only Javadoc in the entire project, I decided against it. Merging.", "author": "triceo", "createdAt": "2020-07-28T05:13:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NDAxOQ=="}], "type": "inlineReview"}]}