{"pr_number": 686, "pr_title": "Remove containers grace period", "pr_createdAt": "2020-01-16T11:00:47Z", "pr_url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686", "timeline": [{"oid": "e5faa7f39ad15fe8acfdbbf691b9b6b10bb478e9", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/e5faa7f39ad15fe8acfdbbf691b9b6b10bb478e9", "message": "Set terminationGracePeriodSeconds to 0 to avoid waiting 30 seconds for pod termination.", "committedDate": "2020-01-17T13:32:03Z", "type": "commit"}, {"oid": "e5faa7f39ad15fe8acfdbbf691b9b6b10bb478e9", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/e5faa7f39ad15fe8acfdbbf691b9b6b10bb478e9", "message": "Set terminationGracePeriodSeconds to 0 to avoid waiting 30 seconds for pod termination.", "committedDate": "2020-01-17T13:32:03Z", "type": "forcePushed"}, {"oid": "88a10ee1d61e6082067f739813b01018ffaab384", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/88a10ee1d61e6082067f739813b01018ffaab384", "message": "Merge branch 'master' into remove-grace-period", "committedDate": "2020-01-17T14:39:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk3OTk2NQ==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686#discussion_r367979965", "bodyText": "Is this really safe?", "author": "jglick", "createdAt": "2020-01-17T15:02:17Z", "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/PodTemplateBuilder.java", "diffHunk": "@@ -198,6 +198,7 @@ public Pod build() {\n             builder.withNodeSelector(nodeSelector);\n         }\n \n+        builder.withTerminationGracePeriodSeconds(0L);", "originalCommit": "88a10ee1d61e6082067f739813b01018ffaab384", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk4MTAxMw==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686#discussion_r367981013", "bodyText": "I was wondering as well in case some process really need to do cleanup. Probably safer to set it for all tests.", "author": "Vlatombe", "createdAt": "2020-01-17T15:04:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk3OTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0MjEyOQ==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686#discussion_r368042129", "bodyText": "safer to set it for all tests\n\nDo you mean set it only for tests?", "author": "jglick", "createdAt": "2020-01-17T17:06:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk3OTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0MjM2Mg==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686#discussion_r368042362", "bodyText": "Yes this is what I meant", "author": "Vlatombe", "createdAt": "2020-01-17T17:06:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk3OTk2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk4MDA0Mg==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686#discussion_r367980042", "bodyText": "Fine here in tests.", "author": "jglick", "createdAt": "2020-01-17T15:02:26Z", "path": "src/test/java/org/csanchez/jenkins/plugins/kubernetes/pipeline/ContainerExecDecoratorTest.java", "diffHunk": "@@ -120,7 +120,7 @@ public void configureCloud() throws Exception {\n                 .withCommand(\"cat\").withTty(true).withWorkingDir(\"/home/jenkins/agent1\").build();\n         String podName = \"test-command-execution-\" + RandomStringUtils.random(5, \"bcdfghjklmnpqrstvwxz0123456789\");\n         pod = client.pods().create(new PodBuilder().withNewMetadata().withName(podName)\n-                .withLabels(getLabels(this, name)).endMetadata().withNewSpec().withContainers(c, d).withNodeSelector(Collections.singletonMap(\"kubernetes.io/os\", \"linux\")).endSpec().build());\n+                .withLabels(getLabels(this, name)).endMetadata().withNewSpec().withContainers(c, d).withNodeSelector(Collections.singletonMap(\"kubernetes.io/os\", \"linux\")).withTerminationGracePeriodSeconds(0L).endSpec().build());", "originalCommit": "88a10ee1d61e6082067f739813b01018ffaab384", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c42025b5d226014e8e16609bfc97565e5c19d4ec", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/c42025b5d226014e8e16609bfc97565e5c19d4ec", "message": "Merge branch 'master' into remove-grace-period", "committedDate": "2020-01-17T16:56:32Z", "type": "commit"}, {"oid": "4a62d0afa4d35796385c1799c82583cbfdd497cf", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/4a62d0afa4d35796385c1799c82583cbfdd497cf", "message": "Only set terminationGracePeriodSeconds for tests", "committedDate": "2020-01-17T17:11:24Z", "type": "commit"}, {"oid": "3fb121da98d77b22ed156fdf05b48c26a3af01d3", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/3fb121da98d77b22ed156fdf05b48c26a3af01d3", "message": "Merge branch 'master' into remove-grace-period", "committedDate": "2020-01-20T08:03:13Z", "type": "commit"}]}