{"pr_number": 2223, "pr_title": "Allow adding span processors when building a tracer provider.", "pr_createdAt": "2020-12-08T06:02:42Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2223", "timeline": [{"oid": "50f8054188f8001a8bb5e882912b27c7cc63df46", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/50f8054188f8001a8bb5e882912b27c7cc63df46", "message": "Allow adding span processors when building a tracer provider.", "committedDate": "2020-12-08T05:57:52Z", "type": "commit"}, {"oid": "a5d1b8bfcd39626af5cd4a6fa56cc7e48203b1bb", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a5d1b8bfcd39626af5cd4a6fa56cc7e48203b1bb", "message": "Drift", "committedDate": "2020-12-08T06:54:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0NzMwNA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2223#discussion_r538647304", "bodyText": "the downside about removing this is that now we won't be adding span processors to a pre-configured SDK. Not sure if we're ok with that or not. I know we've chatted about removing the ability to provide the fully configured SDK altogether, which would make this (obviously) just fine.", "author": "jkwatson", "createdAt": "2020-12-08T17:40:16Z", "path": "sdk/all/src/main/java/io/opentelemetry/sdk/OpenTelemetrySdk.java", "diffHunk": "@@ -216,10 +216,6 @@ public OpenTelemetrySdk build() {\n       MeterProvider meterProvider = buildMeterProvider();\n       TracerSdkProvider tracerProvider = buildTracerProvider();\n \n-      for (SpanProcessor spanProcessor : spanProcessors) {\n-        tracerProvider.addSpanProcessor(spanProcessor);\n-      }", "originalCommit": "a5d1b8bfcd39626af5cd4a6fa56cc7e48203b1bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY1NDY4NA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2223#discussion_r538654684", "bodyText": "should we also do this up on line 236 to preserve backward compatibility? I was very surprised that there wasn't a unit test that verified this.", "author": "jkwatson", "createdAt": "2020-12-08T17:47:16Z", "path": "sdk/all/src/main/java/io/opentelemetry/sdk/OpenTelemetrySdk.java", "diffHunk": "@@ -252,6 +248,7 @@ private TracerSdkProvider buildTracerProvider() {\n       if (traceConfig != null) {\n         tracerProviderBuilder.setTraceConfig(traceConfig);\n       }\n+      spanProcessors.forEach(tracerProviderBuilder::addSpanProcessor);", "originalCommit": "a5d1b8bfcd39626af5cd4a6fa56cc7e48203b1bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk1MzkxNQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2223#discussion_r538953915", "bodyText": "Thanks, didn't notice / intend the change in behavior.", "author": "anuraaga", "createdAt": "2020-12-09T02:20:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY1NDY4NA=="}], "type": "inlineReview"}, {"oid": "f4dab61a0ee89bb2b24b4c1e43840a616381b417", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f4dab61a0ee89bb2b24b4c1e43840a616381b417", "message": "Mutate provided providers too for now.", "committedDate": "2020-12-09T02:21:32Z", "type": "commit"}, {"oid": "108b948eb43cf45e39390df17ff2d09c28cf3141", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/108b948eb43cf45e39390df17ff2d09c28cf3141", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into tracer-sdk-builder-addspanprocessor", "committedDate": "2020-12-15T06:01:09Z", "type": "commit"}, {"oid": "9f02469fda92a6d335355310ef766ed6a4cec82e", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/9f02469fda92a6d335355310ef766ed6a4cec82e", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into tracer-sdk-builder-addspanprocessor", "committedDate": "2020-12-17T02:12:13Z", "type": "commit"}, {"oid": "b1aebbb7c47c03bb6ef9667b12182293e444001a", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/b1aebbb7c47c03bb6ef9667b12182293e444001a", "message": "Spot", "committedDate": "2020-12-17T02:15:05Z", "type": "commit"}]}