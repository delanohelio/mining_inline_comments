{"pr_number": 763, "pr_title": "Fix exporterTimesOut test being flaky.", "pr_createdAt": "2020-01-16T13:37:11Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/763", "timeline": [{"oid": "1f909dc1fac9153f77157b9351eee30a297080e2", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/1f909dc1fac9153f77157b9351eee30a297080e2", "message": "Fix exporterTimesOut test being flaky.", "committedDate": "2020-01-16T13:34:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUwNzI5NA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/763#discussion_r367507294", "bodyText": "I would expect this to be smaller than 1000 (thread sleep) to prove that the timeout occur", "author": "bogdandrutu", "createdAt": "2020-01-16T16:08:05Z", "path": "sdk/src/test/java/io/opentelemetry/sdk/trace/export/BatchSpansProcessorTest.java", "diffHunk": "@@ -230,7 +230,7 @@ public void serviceHandlerThrowsException() {\n     assertThat(exported).containsExactly(span2.toSpanData());\n   }\n \n-  @Test\n+  @Test(timeout = 5000)", "originalCommit": "1f909dc1fac9153f77157b9351eee30a297080e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUzMTg2OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/763#discussion_r367531869", "bodyText": "yeah, this needs to be shorter than the timeout or we won't be testing anything.", "author": "jkwatson", "createdAt": "2020-01-16T16:49:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUwNzI5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUzOTA2Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/763#discussion_r367539062", "bodyText": "We test that an InterruptedException is thrown in the exporter, otherwise the await will never return?", "author": "Oberon00", "createdAt": "2020-01-16T17:01:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUwNzI5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzU0NTY1NA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/763#discussion_r367545654", "bodyText": "oh you're totally right. the no-timeout version on the latch makes this work. sorry for the brain-fart.", "author": "jkwatson", "createdAt": "2020-01-16T17:14:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUwNzI5NA=="}], "type": "inlineReview"}]}