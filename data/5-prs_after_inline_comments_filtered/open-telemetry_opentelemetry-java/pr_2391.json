{"pr_number": 2391, "pr_title": "Add aggregation factory and remove specialized only the aggregator by\u2026", "pr_createdAt": "2020-12-22T17:56:59Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2391", "timeline": [{"oid": "0d78c1304bad22702ca5da3f29c09dc5a3b33330", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/0d78c1304bad22702ca5da3f29c09dc5a3b33330", "message": "Add aggregation factory and remove specialized only the aggregator by value type\n\nThis will allow to specialize merge arguments and other methods in the Aggregation by the type of the value recorded.\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-22T17:58:14Z", "type": "forcePushed"}, {"oid": "3a59ba4b3125f6721c32a08733af41192b3d872d", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3a59ba4b3125f6721c32a08733af41192b3d872d", "message": "Add aggregation factory and remove specialized only the aggregator by value type\n\nThis will allow to specialize merge arguments and other methods in the Aggregation by the type of the value recorded.\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-22T18:10:52Z", "type": "commit"}, {"oid": "3a59ba4b3125f6721c32a08733af41192b3d872d", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3a59ba4b3125f6721c32a08733af41192b3d872d", "message": "Add aggregation factory and remove specialized only the aggregator by value type\n\nThis will allow to specialize merge arguments and other methods in the Aggregation by the type of the value recorded.\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-22T18:10:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ1NTg5MA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2391#discussion_r547455890", "bodyText": "I wonder if we could hide the AggregatorFactory on the Aggregation and just have a method like getAggregator() on it directly, so simplify the call chain. I might be missing something, though.", "author": "jkwatson", "createdAt": "2020-12-22T19:11:17Z", "path": "sdk/metrics/src/main/java/io/opentelemetry/sdk/metrics/aggregation/CountAggregation.java", "diffHunk": "@@ -10,19 +10,20 @@\n import io.opentelemetry.sdk.metrics.aggregator.AggregatorFactory;\n import io.opentelemetry.sdk.metrics.aggregator.CountAggregator;\n import io.opentelemetry.sdk.metrics.common.InstrumentDescriptor;\n-import io.opentelemetry.sdk.metrics.common.InstrumentValueType;\n import io.opentelemetry.sdk.metrics.data.MetricData;\n import io.opentelemetry.sdk.resources.Resource;\n import java.util.List;\n import java.util.Map;\n import javax.annotation.concurrent.Immutable;\n \n @Immutable\n-enum CountAggregation implements Aggregation {\n-  INSTANCE;\n+final class CountAggregation implements Aggregation {\n+  static final CountAggregation INSTANCE = new CountAggregation();\n+\n+  private CountAggregation() {}\n \n   @Override\n-  public AggregatorFactory getAggregatorFactory(InstrumentValueType instrumentValueType) {\n+  public AggregatorFactory getAggregatorFactory() {", "originalCommit": "3a59ba4b3125f6721c32a08733af41192b3d872d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ1ODY5NQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2391#discussion_r547458695", "bodyText": "Will look later, I think I need the factory, but you will see that probably needs a different name.", "author": "bogdandrutu", "createdAt": "2020-12-22T19:17:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ1NTg5MA=="}], "type": "inlineReview"}]}