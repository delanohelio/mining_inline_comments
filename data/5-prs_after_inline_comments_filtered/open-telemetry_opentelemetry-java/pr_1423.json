{"pr_number": 1423, "pr_title": "Implemented index page for zPages", "pr_createdAt": "2020-07-16T16:49:08Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423", "timeline": [{"oid": "e9e4dfd3019049ad02df8b880ed88f4d532aaaa4", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e9e4dfd3019049ad02df8b880ed88f4d532aaaa4", "message": "Added two abstract getter method for obtaining page information", "committedDate": "2020-07-16T05:07:55Z", "type": "commit"}, {"oid": "95555a557ee0b613ffaefcec5e0c994e7e275f78", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/95555a557ee0b613ffaefcec5e0c994e7e275f78", "message": "Added page information getter method", "committedDate": "2020-07-16T05:08:16Z", "type": "commit"}, {"oid": "442a2172dfb758f6d5b73fd7fbfe532237f1947f", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/442a2172dfb758f6d5b73fd7fbfe532237f1947f", "message": "Implemented index zPage handler", "committedDate": "2020-07-16T05:08:30Z", "type": "commit"}, {"oid": "61118a4ce488463ad3091fdb136d945edf5c1912", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/61118a4ce488463ad3091fdb136d945edf5c1912", "message": "Implemented index page for zPages", "committedDate": "2020-07-16T16:01:33Z", "type": "commit"}, {"oid": "34a988cd793860d587d26c57dcc548903105c456", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/34a988cd793860d587d26c57dcc548903105c456", "message": "Added unit test for index zPage", "committedDate": "2020-07-16T16:18:44Z", "type": "commit"}, {"oid": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/4d8a6a82a45372150ddaebba3a3de0efd4f44e31", "message": "Small style and comment fixes", "committedDate": "2020-07-16T16:35:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzNDIwNQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r455934205", "bodyText": "nit: this should end with .", "author": "LinghanX", "createdAt": "2020-07-16T16:58:41Z", "path": "sdk_extensions/zpages/src/main/java/io/opentelemetry/sdk/extensions/zpages/ZPageServer.java", "diffHunk": "@@ -59,7 +60,7 @@\n  */\n @ThreadSafe\n public final class ZPageServer {\n-  // The maximum number of queued incoming connections allowed on the HttpServer listening socket.\n+  // The maximum number of queued incoming connections allowed on the HttpServer listening socket", "originalCommit": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzNTUxNA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r455935514", "bodyText": "Should all comments end with .?", "author": "wtyanan", "createdAt": "2020-07-16T17:00:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzNDIwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzOTQyMQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r455939421", "bodyText": "I don't think we need to end them all with period, especially since this isn't actually a sentence. :)", "author": "jkwatson", "createdAt": "2020-07-16T17:07:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzNDIwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA0MzY0Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r456043642", "bodyText": "I wish the font were slightly bigger in the text on the page, but that's a very minor issue.", "author": "jkwatson", "createdAt": "2020-07-16T20:00:25Z", "path": "sdk_extensions/zpages/src/main/java/io/opentelemetry/sdk/extensions/zpages/IndexZPageHandler.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2020, OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.sdk.extensions.zpages;\n+\n+import java.io.OutputStream;\n+import java.io.PrintStream;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+import javax.annotation.Nullable;\n+\n+final class IndexZPageHandler extends ZPageHandler {\n+  private static final String INDEX_URL = \"/\";\n+  private static final String INDEX_NAME = \"Index\";\n+  private static final String INDEX_DESCRITION = \"Index page of zPages\";\n+  private static final Logger logger = Logger.getLogger(IndexZPageHandler.class.getName());\n+  @Nullable private final List<ZPageHandler> availableHandlers;\n+\n+  IndexZPageHandler(@Nullable List<ZPageHandler> availableHandlers) {\n+    this.availableHandlers = availableHandlers;\n+  }\n+\n+  @Override\n+  public String getUrlPath() {\n+    return INDEX_URL;\n+  }\n+\n+  @Override\n+  public String getPageName() {\n+    return INDEX_NAME;\n+  }\n+\n+  @Override\n+  public String getPageDescription() {\n+    return INDEX_DESCRITION;\n+  }\n+\n+  private static void emitPageLinkAndInfo(PrintStream out, ZPageHandler handler) {\n+    out.print(\"<a href=\\\"\" + handler.getUrlPath() + \"\\\">\");\n+    out.print(\"<h2 style=\\\"text-align: left;\\\">\" + handler.getPageName() + \"</h2>\");\n+    out.print(\"</a>\");\n+    out.print(\"<p>\" + handler.getPageDescription() + \"</p>\");\n+  }\n+\n+  @Override\n+  public void emitHtml(Map<String, String> queryMap, OutputStream outputStream) {\n+    // PrintStream for emiting HTML contents\n+    try (PrintStream out = new PrintStream(outputStream, /* autoFlush= */ false, \"UTF-8\")) {\n+      out.print(\"<!DOCTYPE html>\");\n+      out.print(\"<html lang=\\\"en\\\">\");\n+      out.print(\"<head>\");\n+      out.print(\"<meta charset=\\\"UTF-8\\\">\");\n+      out.print(\n+          \"<link rel=\\\"shortcut icon\\\" href=\\\"data:image/png;base64,\"\n+              + ZPageLogo.getFaviconBase64()\n+              + \"\\\" type=\\\"image/png\\\">\");\n+      out.print(\n+          \"<link href=\\\"https://fonts.googleapis.com/css?family=Open+Sans:300\\\"\"\n+              + \"rel=\\\"stylesheet\\\">\");\n+      out.print(\n+          \"<link href=\\\"https://fonts.googleapis.com/css?family=Roboto\\\" rel=\\\"stylesheet\\\">\");\n+      out.print(\"<title>zPages</title>\");\n+      out.print(\"<style>\");\n+      out.print(ZPageStyle.style);\n+      out.print(\"</style>\");\n+      out.print(\"</head>\");\n+      out.print(\"<body>\");\n+      out.print(\n+          \"<a href=\\\"/\\\"><img style=\\\"height: 90px;\\\" src=\\\"data:image/png;base64,\"\n+              + ZPageLogo.getLogoBase64()\n+              + \"\\\" /></a>\");\n+      out.print(\"<h1 style=\\\"text-align: left;\\\">zPages</h1>\");\n+      out.print(\n+          \"<p>OpenTelemetry provides in-process web pages that display collected data from\"", "originalCommit": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "93c460f87452c720a75efcefde1004b11183a059", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/93c460f87452c720a75efcefde1004b11183a059", "message": "Increased font size, code style fix", "committedDate": "2020-07-16T20:53:57Z", "type": "commit"}, {"oid": "d94b3aa70fcc812b790389940fc842a25db9c8de", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/d94b3aa70fcc812b790389940fc842a25db9c8de", "message": "Merged with OpenTelemetry master branch for latest updates", "committedDate": "2020-07-16T20:54:14Z", "type": "commit"}, {"oid": "3bf2bab05d5cf0d743278832cfc0287bf25cca63", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3bf2bab05d5cf0d743278832cfc0287bf25cca63", "message": "Fixed font size issue", "committedDate": "2020-07-16T21:01:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE0OTgxOA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r456149818", "bodyText": "We should almost never have a nullable container, if there are no handlers the caller would just pass empty", "author": "anuraaga", "createdAt": "2020-07-17T00:22:58Z", "path": "sdk_extensions/zpages/src/main/java/io/opentelemetry/sdk/extensions/zpages/IndexZPageHandler.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2020, OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.sdk.extensions.zpages;\n+\n+import java.io.OutputStream;\n+import java.io.PrintStream;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+import javax.annotation.Nullable;\n+\n+final class IndexZPageHandler extends ZPageHandler {\n+  private static final String INDEX_URL = \"/\";\n+  private static final String INDEX_NAME = \"Index\";\n+  private static final String INDEX_DESCRITION = \"Index page of zPages\";\n+  private static final Logger logger = Logger.getLogger(IndexZPageHandler.class.getName());\n+  @Nullable private final List<ZPageHandler> availableHandlers;\n+\n+  IndexZPageHandler(@Nullable List<ZPageHandler> availableHandlers) {", "originalCommit": "3bf2bab05d5cf0d743278832cfc0287bf25cca63", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ0OTgyMA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r456449820", "bodyText": "Should I make adjustment and open another PR?", "author": "wtyanan", "createdAt": "2020-07-17T13:41:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE0OTgxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ4NTkxMA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r456485910", "bodyText": "Yeah I think that'd be nice :)", "author": "anuraaga", "createdAt": "2020-07-17T14:41:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE0OTgxOA=="}], "type": "inlineReview"}]}