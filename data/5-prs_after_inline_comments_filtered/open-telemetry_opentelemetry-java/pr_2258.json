{"pr_number": 2258, "pr_title": "Change bound factory to accept Aggregator", "pr_createdAt": "2020-12-10T04:21:01Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2258", "timeline": [{"oid": "c89fab89e2bac6e5c073b6fcfbf7da7a7bf314a6", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c89fab89e2bac6e5c073b6fcfbf7da7a7bf314a6", "message": "Change bound factory to accept Aggregator\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-10T04:30:04Z", "type": "forcePushed"}, {"oid": "0ef9345341af562f72fe124fe01e2fedab36e12b", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/0ef9345341af562f72fe124fe01e2fedab36e12b", "message": "Change bound factory to accept Aggregator\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-10T04:35:44Z", "type": "commit"}, {"oid": "0ef9345341af562f72fe124fe01e2fedab36e12b", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/0ef9345341af562f72fe124fe01e2fedab36e12b", "message": "Change bound factory to accept Aggregator\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>", "committedDate": "2020-12-10T04:35:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgzOTE2Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2258#discussion_r539839163", "bodyText": "@jkwatson see what I mentioned in the previous PR :)", "author": "bogdandrutu", "createdAt": "2020-12-10T04:37:26Z", "path": "sdk/metrics/src/main/java/io/opentelemetry/sdk/metrics/DoubleCounterSdk.java", "diffHunk": "@@ -37,8 +38,8 @@ public void add(double increment) {\n   static final class BoundInstrument extends AbstractBoundInstrument\n       implements DoubleCounter.BoundDoubleCounter {\n \n-    BoundInstrument(InstrumentProcessor instrumentProcessor) {\n-      super(instrumentProcessor.getAggregator());\n+    BoundInstrument(Aggregator aggregator) {\n+      super(aggregator);", "originalCommit": "0ef9345341af562f72fe124fe01e2fedab36e12b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDMwMjI1Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2258#discussion_r540302252", "bodyText": "interesting that the coupling is the reverse of what is in @jmacd's design in the spec. I don't think it's necessarily a problem, but it might point at some tweaks to the SDK spec being necessary.", "author": "jkwatson", "createdAt": "2020-12-10T16:18:22Z", "path": "sdk/metrics/src/main/java/io/opentelemetry/sdk/metrics/AbstractSynchronousInstrument.java", "diffHunk": "@@ -41,7 +42,7 @@ public B bind(Labels labels) {\n     }\n \n     // Missing entry or no longer mapped, try to add a new entry.\n-    binding = boundFactory.apply(instrumentProcessor);\n+    binding = boundFactory.apply(instrumentProcessor.getAggregator());", "originalCommit": "0ef9345341af562f72fe124fe01e2fedab36e12b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}