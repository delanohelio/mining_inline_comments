{"pr_number": 1656, "pr_title": "Reverse the precedence on Labels and Attributes to prefer the last one added, rather than the first.", "pr_createdAt": "2020-09-16T18:51:44Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1656", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk1NzY5NA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1656#discussion_r489957694", "bodyText": "You're the metric expert :) But at a glance it seems like order is supposed to matter here?", "author": "anuraaga", "createdAt": "2020-09-17T04:14:11Z", "path": "exporters/otlp/src/test/java/io/opentelemetry/exporters/otlp/MetricAdapterTest.java", "diffHunk": "@@ -52,7 +52,7 @@ void toProtoLabels() {\n     assertThat(MetricAdapter.toProtoLabels(Labels.of(\"k\", \"v\")))\n         .containsExactly(StringKeyValue.newBuilder().setKey(\"k\").setValue(\"v\").build());\n     assertThat(MetricAdapter.toProtoLabels(Labels.of(\"k1\", \"v1\", \"k2\", \"v2\")))\n-        .containsExactly(\n+        .containsExactlyInAnyOrder(", "originalCommit": "8b7f923fbf7eb060386ebed705cfc99f276275fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMxNTk2OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1656#discussion_r490315969", "bodyText": "\"expert\". actually, I think this can be reverted, now that I reverse the list after de-duping. I'll look", "author": "jkwatson", "createdAt": "2020-09-17T14:52:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk1NzY5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk1OTAxNg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1656#discussion_r489959016", "bodyText": "Not a big deal, but surprised by the change since looks like only one link :)", "author": "anuraaga", "createdAt": "2020-09-17T04:16:18Z", "path": "sdk/tracing/src/test/java/io/opentelemetry/sdk/trace/SpanBuilderSdkTest.java", "diffHunk": "@@ -139,7 +139,7 @@ void truncateLinkAttributes() {\n     RecordEventsReadableSpan span = (RecordEventsReadableSpan) spanBuilder.startSpan();\n     try {\n       assertThat(span.toSpanData().getLinks())\n-          .containsExactly(\n+          .containsExactlyInAnyOrder(", "originalCommit": "8b7f923fbf7eb060386ebed705cfc99f276275fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMxODQ5Ng==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1656#discussion_r490318496", "bodyText": "isn't needed. this snuck in while I was hacking on stuff, and forgot to revert.", "author": "jkwatson", "createdAt": "2020-09-17T14:55:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk1OTAxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMyMDE2Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1656#discussion_r490320162", "bodyText": "fixed, and thanks for the sharp eye!", "author": "jkwatson", "createdAt": "2020-09-17T14:57:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk1OTAxNg=="}], "type": "inlineReview"}, {"oid": "79b310335724afb4d986bdd8b2dc451626839ea6", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/79b310335724afb4d986bdd8b2dc451626839ea6", "message": "revert 2 unneeded assertion changes", "committedDate": "2020-09-17T15:00:29Z", "type": "forcePushed"}, {"oid": "33d9ed24fd4bc51a8268b44e23a3ee5f4d449e53", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/33d9ed24fd4bc51a8268b44e23a3ee5f4d449e53", "message": "Reverse the precedence on Labels and Attributes to prefer the last one added, rather than the first.\n\nNote: this necessitated changing the way Resources were merged, and the way recordException was implemented.\nAdded an addAll method to the builder to support efficiently addition of attributes from existing attributes.", "committedDate": "2020-09-21T22:18:32Z", "type": "commit"}, {"oid": "29591b69fd4746b6923055051e11c212a90fe017", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/29591b69fd4746b6923055051e11c212a90fe017", "message": "run the formatter", "committedDate": "2020-09-21T22:18:35Z", "type": "commit"}, {"oid": "c3856658986c9ebcd76a5bba4979ff75dfedc67b", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c3856658986c9ebcd76a5bba4979ff75dfedc67b", "message": "revert 2 unneeded assertion changes", "committedDate": "2020-09-21T22:18:41Z", "type": "commit"}, {"oid": "83d457ec4720a782148ebbba962be3976e0d95f3", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/83d457ec4720a782148ebbba962be3976e0d95f3", "message": "Update from rebase", "committedDate": "2020-09-21T22:35:58Z", "type": "commit"}, {"oid": "83d457ec4720a782148ebbba962be3976e0d95f3", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/83d457ec4720a782148ebbba962be3976e0d95f3", "message": "Update from rebase", "committedDate": "2020-09-21T22:35:58Z", "type": "forcePushed"}]}