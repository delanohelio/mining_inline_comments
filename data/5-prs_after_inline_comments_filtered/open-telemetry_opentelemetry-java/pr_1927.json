{"pr_number": 1927, "pr_title": "start up the test zpages server on a random port", "pr_createdAt": "2020-10-29T23:55:04Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1927", "timeline": [{"oid": "f475e6e5bbe54aee5e6b209493180acdd4d8b763", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f475e6e5bbe54aee5e6b209493180acdd4d8b763", "message": "start up the test zpages server on a random port and shut it down", "committedDate": "2020-10-29T23:53:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMzU0Nw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1927#discussion_r514633547", "bodyText": "Doesn't port 0 work?", "author": "anuraaga", "createdAt": "2020-10-29T23:58:24Z", "path": "sdk_extensions/zpages/src/test/java/io/opentelemetry/sdk/extensions/zpages/ZPageServerTest.java", "diffHunk": "@@ -18,9 +19,16 @@\n   void tracezSpanProcessorOnlyAddedOnce() throws IOException {\n     // tracezSpanProcessor is not added yet\n     assertThat(ZPageServer.getIsTracezSpanProcesserAdded()).isFalse();\n-    HttpServer server = HttpServer.create(new InetSocketAddress(8888), 5);\n-    ZPageServer.registerAllPagesToHttpServer(server);\n-    // tracezSpanProcessor is added\n-    assertThat(ZPageServer.getIsTracezSpanProcesserAdded()).isTrue();\n+    HttpServer server = null;\n+    try {\n+      server = HttpServer.create(new InetSocketAddress(new Random().nextInt(1000) + 2000), 5);", "originalCommit": "f475e6e5bbe54aee5e6b209493180acdd4d8b763", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDUzOA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1927#discussion_r514634538", "bodyText": "hmm. good question. from the javadocs, yes! good catch!", "author": "jkwatson", "createdAt": "2020-10-30T00:01:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMzU0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDkwNg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1927#discussion_r514634906", "bodyText": "fixed.", "author": "jkwatson", "createdAt": "2020-10-30T00:03:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMzU0Nw=="}], "type": "inlineReview"}, {"oid": "b94d145e492baaabe9a06dcd38cd0fbd3f4986a2", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/b94d145e492baaabe9a06dcd38cd0fbd3f4986a2", "message": "have the jvm pick a random port for us", "committedDate": "2020-10-30T00:02:20Z", "type": "commit"}]}