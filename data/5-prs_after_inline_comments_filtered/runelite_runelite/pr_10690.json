{"pr_number": 10690, "pr_title": "Add ability and config to swap Lookup and Search in wiki plugin", "pr_createdAt": "2020-01-29T22:58:42Z", "pr_url": "https://github.com/runelite/runelite/pull/10690", "timeline": [{"oid": "6ac8f11fc552bb5d16e76afe57e60f79a58633cd", "url": "https://github.com/runelite/runelite/commit/6ac8f11fc552bb5d16e76afe57e60f79a58633cd", "message": "Add config and ability to swap Lookup and Search in wiki plugin", "committedDate": "2020-01-29T22:56:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4MzU5Mg==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r372683592", "bodyText": "Remove empty line", "author": "TheStonedTurtle", "createdAt": "2020-01-29T23:15:47Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiConfig.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*\n+ * Copyright (c) 2020, Henry Darnell <hjdarnel@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.wiki;\n+\n+import net.runelite.client.config.Config;\n+import net.runelite.client.config.ConfigGroup;\n+import net.runelite.client.config.ConfigItem;\n+\n+@ConfigGroup(\"wiki\")\n+public interface WikiConfig extends Config\n+{\n+", "originalCommit": "6ac8f11fc552bb5d16e76afe57e60f79a58633cd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4MzYyOQ==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r372683629", "bodyText": "Remove empty line", "author": "TheStonedTurtle", "createdAt": "2020-01-29T23:15:55Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiConfig.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*\n+ * Copyright (c) 2020, Henry Darnell <hjdarnel@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.wiki;\n+\n+import net.runelite.client.config.Config;\n+import net.runelite.client.config.ConfigGroup;\n+import net.runelite.client.config.ConfigItem;\n+\n+@ConfigGroup(\"wiki\")\n+public interface WikiConfig extends Config\n+{\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"swapLookupSearch\",\n+\t\tname = \"Swap Lookup and Search\",\n+\t\tdescription = \"Swap Lookup to left-click Search on the Wiki button\",\n+\t\tposition = 1\n+\t)\n+\tdefault boolean swapLookupSearch()\n+\t{\n+\t\treturn false;\n+\t}\n+", "originalCommit": "6ac8f11fc552bb5d16e76afe57e60f79a58633cd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY4Mzc5OA==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r372683798", "bodyText": "Remove added whitespace", "author": "TheStonedTurtle", "createdAt": "2020-01-29T23:16:31Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -373,8 +399,8 @@ public void onMenuEntryAdded(MenuEntryAdded event)\n \t\t\t\tMenuEntry[] oldEntries = menuEntries;\n \t\t\t\tmenuEntries = Arrays.copyOf(menuEntries, menuEntries.length - 1);\n \t\t\t\tfor (int ourEntry = oldEntries.length - 1;\n-\t\t\t\t\tourEntry >= 2 && oldEntries[oldEntries.length - 1].getType() != MenuAction.SPELL_CAST_ON_WIDGET.getId();\n-\t\t\t\t\tourEntry--)\n+\t\t\t\t\t ourEntry >= 2 && oldEntries[oldEntries.length - 1].getType() != MenuAction.SPELL_CAST_ON_WIDGET.getId();\n+\t\t\t\t\t ourEntry--)", "originalCommit": "6ac8f11fc552bb5d16e76afe57e60f79a58633cd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "516dff2bcd76a16be607d709392e4a716af7078d", "url": "https://github.com/runelite/runelite/commit/516dff2bcd76a16be607d709392e4a716af7078d", "message": "Clean up code to a ternary", "committedDate": "2020-01-29T23:20:49Z", "type": "commit"}, {"oid": "0419cfd67de7ac2fddc5528816364ed8088a89dd", "url": "https://github.com/runelite/runelite/commit/0419cfd67de7ac2fddc5528816364ed8088a89dd", "message": "Remove added whitespace", "committedDate": "2020-01-29T23:21:01Z", "type": "commit"}, {"oid": "02b7fca8c60906cdcb4bbe03eb2e9ca116949bb5", "url": "https://github.com/runelite/runelite/commit/02b7fca8c60906cdcb4bbe03eb2e9ca116949bb5", "message": "Remove added whitespace", "committedDate": "2020-01-29T23:22:39Z", "type": "commit"}, {"oid": "df99d1d60c76d87c9625c1c83b7482a2a1927c16", "url": "https://github.com/runelite/runelite/commit/df99d1d60c76d87c9625c1c83b7482a2a1927c16", "message": "Update comment, remove more whitespace", "committedDate": "2020-01-29T23:29:02Z", "type": "commit"}, {"oid": "86df488e38a9d62a51f9a5534b79937cbed03dd4", "url": "https://github.com/runelite/runelite/commit/86df488e38a9d62a51f9a5534b79937cbed03dd4", "message": "Rebuild widget on config change", "committedDate": "2020-01-30T00:21:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA3NDA3Mg==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373074072", "bodyText": "You should probably use addWidgets instead of startUp and move the code in shutDown to a new method instead and call that here.", "author": "dekvall", "createdAt": "2020-01-30T17:01:38Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -204,6 +220,17 @@ private void onWidgetHiddenChanged(WidgetHiddenChanged ev)\n \t\t}\n \t}\n \n+\t@Subscribe\n+\tpublic void onConfigChanged(ConfigChanged event)\n+\t{\n+\t\tif (event.getGroup().equals(CONFIG_GROUP_KEY))\n+\t\t{\n+\t\t\t// Since the Widget menu is configured on startup, it's easiest to just rebuild it when the config changes\n+\t\t\tshutDown();\n+\t\t\tstartUp();", "originalCommit": "86df488e38a9d62a51f9a5534b79937cbed03dd4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI1NzkwMg==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373257902", "bodyText": "How does this look now?", "author": "hjdarnel", "createdAt": "2020-01-31T00:01:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA3NDA3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA3NjYxMQ==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373076611", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tprivate static final String CONFIG_GROUP_KEY = \"wiki\";\n          \n          \n            \n            \tstatic final String CONFIG_GROUP_KEY = \"wiki\";", "author": "dekvall", "createdAt": "2020-01-30T17:06:14Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -104,6 +110,14 @@\n \n \tprivate boolean wikiSelected = false;\n \n+\tprivate static final String CONFIG_GROUP_KEY = \"wiki\";", "originalCommit": "86df488e38a9d62a51f9a5534b79937cbed03dd4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA3NzI0NA==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373077244", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            @ConfigGroup(\"wiki\")\n          \n          \n            \n            @ConfigGroup(WikiPlugin.CONFIG_GROUP_KEY)", "author": "dekvall", "createdAt": "2020-01-30T17:07:25Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiConfig.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright (c) 2020, Henry Darnell <hjdarnel@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.wiki;\n+\n+import net.runelite.client.config.Config;\n+import net.runelite.client.config.ConfigGroup;\n+import net.runelite.client.config.ConfigItem;\n+\n+@ConfigGroup(\"wiki\")", "originalCommit": "86df488e38a9d62a51f9a5534b79937cbed03dd4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA4MzgzNw==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373083837", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tif (ev.getOp() == (position + 1))\n          \n          \n            \n            \t\t\tif (ev.getOp() == position + 1)", "author": "dekvall", "createdAt": "2020-01-30T17:19:31Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -180,16 +194,18 @@ private void addWidgets()\n \t\t\ticon.setSpriteId(SpriteID.WIKI_SELECTED);\n \t\t\tclient.setAllWidgetsAreOpTargetable(true);\n \t\t});\n-\t\ticon.setAction(5, \"Search\"); // Start at option 5 so the target op is ontop\n+\n+\t\t// set position to 5 if we want Lookup on left-click, or set position to 4 if we want Search\n+\t\tfinal int position = config.swapLookupSearch() ? 4 : 5;\n+\t\ticon.setAction(position, \"Search\");\n \t\ticon.setOnOpListener((JavaScriptCallback) ev ->\n \t\t{\n-\t\t\tswitch (ev.getOp())\n+\t\t\tif (ev.getOp() == (position + 1))", "originalCommit": "86df488e38a9d62a51f9a5534b79937cbed03dd4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA5MDIyNg==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373090226", "bodyText": "I think this name is a bit ambiguous, it's not clear to me what will happen when i toggle the option. Something like Leftclick Search would be better imo.", "author": "dekvall", "createdAt": "2020-01-30T17:31:58Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiConfig.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright (c) 2020, Henry Darnell <hjdarnel@gmail.com>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.wiki;\n+\n+import net.runelite.client.config.Config;\n+import net.runelite.client.config.ConfigGroup;\n+import net.runelite.client.config.ConfigItem;\n+\n+@ConfigGroup(\"wiki\")\n+public interface WikiConfig extends Config\n+{\n+\t@ConfigItem(\n+\t\tkeyName = \"swapLookupSearch\",\n+\t\tname = \"Swap Lookup and Search\",", "originalCommit": "86df488e38a9d62a51f9a5534b79937cbed03dd4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI1Nzg5NQ==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373257895", "bodyText": "Does it make more sense now?", "author": "hjdarnel", "createdAt": "2020-01-31T00:01:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA5MDIyNg=="}], "type": "inlineReview"}, {"oid": "2e7c4bbb99ce914dddf698b9ca86d512f181c99a", "url": "https://github.com/runelite/runelite/commit/2e7c4bbb99ce914dddf698b9ca86d512f181c99a", "message": "Address PR comments", "committedDate": "2020-01-31T00:00:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI2MTYwNw==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373261607", "bodyText": "Remove the clientThread from here invocation and invoke it similarily to addWidgets with `clientThread.invokeLater(this::removeWidgets)", "author": "dekvall", "createdAt": "2020-01-31T00:16:41Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -112,6 +126,11 @@ public void startUp()\n \n \t@Override\n \tpublic void shutDown()\n+\t{\n+\t\tremoveWidgets();\n+\t}\n+\n+\tprivate void removeWidgets()", "originalCommit": "2e7c4bbb99ce914dddf698b9ca86d512f181c99a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5f19f38874145ec574e097233e0be316fb7eafdf", "url": "https://github.com/runelite/runelite/commit/5f19f38874145ec574e097233e0be316fb7eafdf", "message": "move clientThread.invokeLater out into calling functions", "committedDate": "2020-01-31T04:43:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY5NDQ5Mg==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373694492", "bodyText": "This comment feels outdated", "author": "dekvall", "createdAt": "2020-01-31T21:30:58Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -204,6 +223,17 @@ private void onWidgetHiddenChanged(WidgetHiddenChanged ev)\n \t\t}\n \t}\n \n+\t@Subscribe\n+\tpublic void onConfigChanged(ConfigChanged event)\n+\t{\n+\t\tif (event.getGroup().equals(CONFIG_GROUP_KEY))\n+\t\t{\n+\t\t\t// Since the Widget menu is configured on startup, it's easiest to just rebuild it when the config changes", "originalCommit": "5f19f38874145ec574e097233e0be316fb7eafdf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY5NTQ0OA==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373695448", "bodyText": "This comment feels redundant, the code right below it tells us the same thing", "author": "dekvall", "createdAt": "2020-01-31T21:33:32Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -180,16 +197,18 @@ private void addWidgets()\n \t\t\ticon.setSpriteId(SpriteID.WIKI_SELECTED);\n \t\t\tclient.setAllWidgetsAreOpTargetable(true);\n \t\t});\n-\t\ticon.setAction(5, \"Search\"); // Start at option 5 so the target op is ontop\n+\n+\t\t// set position to 5 if we want Lookup on left-click, or set position to 4 if we want Search", "originalCommit": "5f19f38874145ec574e097233e0be316fb7eafdf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY5NjIwOA==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373696208", "bodyText": "position feels a bit broad and could have a better name. Isn't it actually the index of the search op?", "author": "dekvall", "createdAt": "2020-01-31T21:35:34Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -180,16 +197,18 @@ private void addWidgets()\n \t\t\ticon.setSpriteId(SpriteID.WIKI_SELECTED);\n \t\t\tclient.setAllWidgetsAreOpTargetable(true);\n \t\t});\n-\t\ticon.setAction(5, \"Search\"); // Start at option 5 so the target op is ontop\n+\n+\t\t// set position to 5 if we want Lookup on left-click, or set position to 4 if we want Search\n+\t\tfinal int position = config.leftClickSearch() ? 4 : 5;", "originalCommit": "5f19f38874145ec574e097233e0be316fb7eafdf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyNDg5Ng==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373724896", "bodyText": "It's the index but I don't personally understand the order (if there's only 3 elements in the array... why is position 4 on top \ud83d\ude04)", "author": "hjdarnel", "createdAt": "2020-01-31T23:10:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY5NjIwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyNTQ0Mg==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373725442", "bodyText": "there are 10 slots in the array, and the optarget is as if it is in slot 4\u00bd, so you have to use something <=4 to put it before, and >=5 to put it after", "author": "abextm", "createdAt": "2020-01-31T23:12:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY5NjIwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyODk0Nw==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373728947", "bodyText": "That makes sense. Thanks!", "author": "hjdarnel", "createdAt": "2020-01-31T23:27:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY5NjIwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY5ODgxOA==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373698818", "bodyText": "I don't fully understand why this is position + 1 but it was case 6 earlier so i guess it's fine", "author": "dekvall", "createdAt": "2020-01-31T21:43:14Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -180,16 +197,18 @@ private void addWidgets()\n \t\t\ticon.setSpriteId(SpriteID.WIKI_SELECTED);\n \t\t\tclient.setAllWidgetsAreOpTargetable(true);\n \t\t});\n-\t\ticon.setAction(5, \"Search\"); // Start at option 5 so the target op is ontop\n+\n+\t\t// set position to 5 if we want Lookup on left-click, or set position to 4 if we want Search\n+\t\tfinal int position = config.leftClickSearch() ? 4 : 5;\n+\t\ticon.setAction(position, \"Search\");\n \t\ticon.setOnOpListener((JavaScriptCallback) ev ->\n \t\t{\n-\t\t\tswitch (ev.getOp())\n+\t\t\tif (ev.getOp() == position + 1)", "originalCommit": "5f19f38874145ec574e097233e0be316fb7eafdf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcwMTg2Mw==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373701863", "bodyText": "javascriptcallback lives in cs2 land with 1 based indexes, setAction is in engine land with 0 based indexes", "author": "abextm", "createdAt": "2020-01-31T21:52:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY5ODgxOA=="}], "type": "inlineReview"}, {"oid": "5dff26ba67d9078ffbb9713a8a53d36ac4e0619f", "url": "https://github.com/runelite/runelite/commit/5dff26ba67d9078ffbb9713a8a53d36ac4e0619f", "message": "Respond to PR", "committedDate": "2020-01-31T23:10:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyNTg4Mg==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373725882", "bodyText": "use a single invokeLater here", "author": "abextm", "createdAt": "2020-01-31T23:14:28Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -204,6 +222,16 @@ private void onWidgetHiddenChanged(WidgetHiddenChanged ev)\n \t\t}\n \t}\n \n+\t@Subscribe\n+\tpublic void onConfigChanged(ConfigChanged event)\n+\t{\n+\t\tif (event.getGroup().equals(CONFIG_GROUP_KEY))\n+\t\t{\n+\t\t\tclientThread.invokeLater(this::removeWidgets);", "originalCommit": "5dff26ba67d9078ffbb9713a8a53d36ac4e0619f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyNjEwMg==", "url": "https://github.com/runelite/runelite/pull/10690#discussion_r373726102", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tfinal int index = config.leftClickSearch() ? 4 : 5;\n          \n          \n            \n            \t\tfinal int searchIndex = config.leftClickSearch() ? 4 : 5;", "author": "abextm", "createdAt": "2020-01-31T23:15:30Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/wiki/WikiPlugin.java", "diffHunk": "@@ -180,16 +197,17 @@ private void addWidgets()\n \t\t\ticon.setSpriteId(SpriteID.WIKI_SELECTED);\n \t\t\tclient.setAllWidgetsAreOpTargetable(true);\n \t\t});\n-\t\ticon.setAction(5, \"Search\"); // Start at option 5 so the target op is ontop\n+\n+\t\tfinal int index = config.leftClickSearch() ? 4 : 5;", "originalCommit": "5dff26ba67d9078ffbb9713a8a53d36ac4e0619f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5a92d0aca14073bda1411062f9d06b65744b8834", "url": "https://github.com/runelite/runelite/commit/5a92d0aca14073bda1411062f9d06b65744b8834", "message": "Respond to PR", "committedDate": "2020-01-31T23:27:25Z", "type": "commit"}, {"oid": "4a1bdeeeb22e6b32d7663374a7fed34db1d4b547", "url": "https://github.com/runelite/runelite/commit/4a1bdeeeb22e6b32d7663374a7fed34db1d4b547", "message": "Fix style", "committedDate": "2020-01-31T23:34:10Z", "type": "commit"}]}