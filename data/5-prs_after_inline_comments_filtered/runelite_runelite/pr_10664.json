{"pr_number": 10664, "pr_title": "Sidebar toggle hotkey changes", "pr_createdAt": "2020-01-26T22:19:43Z", "pr_url": "https://github.com/runelite/runelite/pull/10664", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzMTM1MQ==", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r381831351", "bodyText": "This shouldn't be in this PR", "author": "Nightfirecat", "createdAt": "2020-02-20T07:50:49Z", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -588,6 +600,34 @@ public void requestFocus()\n \t\t{\n \t\t\tOSXUtil.requestFocus();\n \t\t}\n+\t\t// The workaround for Windows is to minimise and then un-minimise the client to bring\n+\t\t// it to the front because java.awt.Window#toFront doesn't work reliably.\n+\t\t// See https://stackoverflow.com/questions/309023/how-to-bring-a-window-to-the-front/7435722#7435722\n+\t\telse if (OSType.getOSType() == OSType.Windows && !frame.isFocused())", "originalCommit": "c917b0ba54ffdef42fdcee600815a8b324ed6f30", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4NTg3Mw==", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r381885873", "bodyText": "\ud83d\udc40 how'd that get in there", "author": "Hannah-GBS", "createdAt": "2020-02-20T09:41:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzMTM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk3NDI2MA==", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r381974260", "bodyText": "Fixed\nprobably\nmaybe\ngit is hard", "author": "Hannah-GBS", "createdAt": "2020-02-20T12:41:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzMTM1MQ=="}], "type": "inlineReview"}, {"oid": "d641346cd7afd15922d165c1de6bb36e2f54dcf5", "url": "https://github.com/runelite/runelite/commit/d641346cd7afd15922d165c1de6bb36e2f54dcf5", "message": "Add configurable hotkey to toggle the plugin panel", "committedDate": "2020-02-20T12:39:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE4NjM3OA==", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r382186378", "bodyText": "This can be shortened to final HotkeyListener sidebarListener = new HotkeyListener(config::sidebarToggleKey)", "author": "Nightfirecat", "createdAt": "2020-02-20T18:42:50Z", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -346,7 +343,7 @@ public void init(final RuneLite runelite) throws Exception\n \n \t\t\t// Add key listener\n \t\t\tfinal HotkeyListener sidebarListener = new HotkeyListener(() ->", "originalCommit": "9b0d23a3bfe0c176bad5874db9a677a791e5dd47", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE4NjU4NA==", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r382186584", "bodyText": "This can be shortened to final HotkeyListener pluginPanelListener = new HotkeyListener(config::panelToggleKey)", "author": "Nightfirecat", "createdAt": "2020-02-20T18:43:17Z", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -354,6 +354,18 @@ public void hotkeyPressed()\n \n \t\t\tkeyManager.registerKeyListener(sidebarListener);\n \n+\t\t\tfinal HotkeyListener pluginPanelListener = new HotkeyListener(() ->\n+\t\t\t\tconfig.panelToggleKey())", "originalCommit": "d641346cd7afd15922d165c1de6bb36e2f54dcf5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE4OTUxNw==", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r382189517", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t//Checks if the toolbar was previously closed by toggleSidebar\n          \n          \n            \n            \t\t\t// Add the plugin toolbar if it was previously closed by toggleSidebar", "author": "Nightfirecat", "createdAt": "2020-02-20T18:49:00Z", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -739,6 +751,30 @@ private void toggleSidebar()\n \t\t}\n \t}\n \n+\tprivate void togglePluginPanel()\n+\t{\n+\t\t// Toggle sidebar open\n+\t\tboolean isPanelOpen = sidebarOpen;\n+\t\tsidebarOpen = !sidebarOpen;\n+\n+\t\tif (isPanelOpen)\n+\t\t{\n+\t\t\tcontract();\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\t// Try to restore last panel\n+\t\t\texpand(currentNavButton);\n+\n+\t\t\t//Checks if the toolbar was previously closed by toggleSidebar", "originalCommit": "d641346cd7afd15922d165c1de6bb36e2f54dcf5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74", "url": "https://github.com/runelite/runelite/commit/395f7eb5565bfe6a28feb8f53ac9c58946e6aa74", "message": "Add configurable hotkey to toggle the plugin panel", "committedDate": "2020-02-21T07:06:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAxNzI2NA==", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r394017264", "bodyText": "Per Adam's comment, this causes the frame to expand by the plugin toolbar's width if you collapse the panel (F+12) then expand the sidebar (F+11). From what I can tell, that's partially because of the sidebarOpen = !sidebarOpen; state mutation which happens here.\nAnyway, I think this whole method body can safely be replaced by the following:\nfinal boolean pluginPanelOpen = pluginPanel != null;\n\ncurrentButton.setSelected(!pluginPanelOpen);\n\nif (pluginPanelOpen)\n{\n\tcontract();\n}\nelse\n{\n\texpand(currentNavButton);\n}", "author": "Nightfirecat", "createdAt": "2020-03-17T22:55:24Z", "path": "runelite-client/src/main/java/net/runelite/client/ui/ClientUI.java", "diffHunk": "@@ -742,6 +749,30 @@ private void toggleSidebar()\n \t\t}\n \t}\n \n+\tprivate void togglePluginPanel()\n+\t{\n+\t\t// Toggle sidebar open\n+\t\tboolean isPanelOpen = sidebarOpen;\n+\t\tsidebarOpen = !sidebarOpen;\n+\n+\t\tif (isPanelOpen)\n+\t\t{\n+\t\t\tcontract();\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\t// Try to restore last panel\n+\t\t\texpand(currentNavButton);\n+\n+\t\t\t// Add the plugin toolbar if it was previously closed by toggleSidebar\n+\t\t\tif (!container.isAncestorOf(pluginToolbar))\n+\t\t\t{\n+\t\t\t\tcontainer.add(pluginToolbar);\n+\t\t\t\tframe.expandBy(pluginToolbar.getWidth());\n+\t\t\t}\n+\t\t}", "originalCommit": "395f7eb5565bfe6a28feb8f53ac9c58946e6aa74", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NTM1Ng==", "url": "https://github.com/runelite/runelite/pull/10664#discussion_r394665356", "bodyText": "I neglected to suggest a null check for currentButton, since that can be nulled when clicking a plugin panel open and closed again. I've amended your commit to add this.", "author": "Nightfirecat", "createdAt": "2020-03-18T22:03:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAxNzI2NA=="}], "type": "inlineReview"}, {"oid": "7fafa5fbd0674a02347eb0cc7f89ee3f4ab86f9f", "url": "https://github.com/runelite/runelite/commit/7fafa5fbd0674a02347eb0cc7f89ee3f4ab86f9f", "message": "Add configurable hotkey to toggle the plugin panel", "committedDate": "2020-03-18T00:22:57Z", "type": "forcePushed"}, {"oid": "6c29f88e54c86caf4f79b8c14fe9964a6de9b750", "url": "https://github.com/runelite/runelite/commit/6c29f88e54c86caf4f79b8c14fe9964a6de9b750", "message": "Add configurable hotkey to toggle the plugin panel", "committedDate": "2020-03-18T21:36:36Z", "type": "forcePushed"}, {"oid": "0edc2250ba1434f43b5d1727069e7b1d92d6d952", "url": "https://github.com/runelite/runelite/commit/0edc2250ba1434f43b5d1727069e7b1d92d6d952", "message": "Add configurable hotkey to toggle the plugin panel", "committedDate": "2020-03-18T21:58:38Z", "type": "forcePushed"}, {"oid": "4cde9ed1e4ce635c9b7ba211180c611f6940288d", "url": "https://github.com/runelite/runelite/commit/4cde9ed1e4ce635c9b7ba211180c611f6940288d", "message": "Add configurable hotkey to toggle the plugin panel", "committedDate": "2020-03-31T17:24:06Z", "type": "forcePushed"}, {"oid": "7784395255a41c350a3088796b996ecf4d56a89a", "url": "https://github.com/runelite/runelite/commit/7784395255a41c350a3088796b996ecf4d56a89a", "message": "client: Make toggle sidebar hotkey configurable", "committedDate": "2020-05-13T02:45:13Z", "type": "commit"}, {"oid": "15e0f1e5f22a1543b08253edaf15779128cb688d", "url": "https://github.com/runelite/runelite/commit/15e0f1e5f22a1543b08253edaf15779128cb688d", "message": "client: Add configurable hotkey to toggle plugin panel", "committedDate": "2020-05-13T02:45:41Z", "type": "commit"}, {"oid": "15e0f1e5f22a1543b08253edaf15779128cb688d", "url": "https://github.com/runelite/runelite/commit/15e0f1e5f22a1543b08253edaf15779128cb688d", "message": "client: Add configurable hotkey to toggle plugin panel", "committedDate": "2020-05-13T02:45:41Z", "type": "forcePushed"}]}