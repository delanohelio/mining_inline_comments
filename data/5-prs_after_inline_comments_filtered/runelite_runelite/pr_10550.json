{"pr_number": 10550, "pr_title": "Added the ability to mark ignored players inside clan chat", "pr_createdAt": "2020-01-04T18:49:48Z", "pr_url": "https://github.com/runelite/runelite/pull/10550", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEwNjQ4OA==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r363106488", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tif (!config.showIgnores())\n          \n          \n            \n            \t\t\t\tif (config.showIgnores())\n          \n          \n            \n            \t\t\t\t{\n          \n          \n            \n            \t\t\t\t\tclientThread.invoke(this::colorIgnoredPlayers);\n          \n          \n            \n            \t\t\t\t}", "author": "Adam-", "createdAt": "2020-01-05T17:29:37Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -541,6 +542,13 @@ public void onScriptCallbackEvent(ScriptCallbackEvent scriptCallbackEvent)\n \t\t\t\tclientThread.invokeLater(() -> confirmKickPlayer(kickPlayerName));\n \t\t\t\tbreak;\n \t\t\t}\n+\t\t\tcase \"clanChatChannelRebuild\":\n+\t\t\t\tif (!config.showIgnores())", "originalCommit": "897c8ffe7c1333c3598f9780ce1dfb50f81f4868", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEwNjUxMQ==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r363106511", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tif (client.getWidget(WidgetInfo.CLAN_CHAT_LIST).getChildren() == null)\n          \n          \n            \n            \t\tWidget clanChatList = client.getWidget(WidgetInfo.CLAN_CHAT_LIST)\n          \n          \n            \n            \t\tif (clanChatList == null || clanChatList.getChildren() == null)", "author": "Adam-", "createdAt": "2020-01-05T17:30:17Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -668,4 +676,23 @@ private void confirmKickPlayer(final String kickPlayerName)\n \t\t\t.option(\"2. Cancel\", Runnables::doNothing)\n \t\t\t.build();\n \t}\n+\n+\tprivate void colorIgnoredPlayers()\n+\t{\n+\t\tif (client.getWidget(WidgetInfo.CLAN_CHAT_LIST).getChildren() == null)", "originalCommit": "897c8ffe7c1333c3598f9780ce1dfb50f81f4868", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEwNjUyMg==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r363106522", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tfor (Widget listWidget : client.getWidget(WidgetInfo.CLAN_CHAT_LIST).getChildren())\n          \n          \n            \n            \t\tfor (Widget listWidget : clanChatList.getChildren())", "author": "Adam-", "createdAt": "2020-01-05T17:30:30Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -668,4 +676,23 @@ private void confirmKickPlayer(final String kickPlayerName)\n \t\t\t.option(\"2. Cancel\", Runnables::doNothing)\n \t\t\t.build();\n \t}\n+\n+\tprivate void colorIgnoredPlayers()\n+\t{\n+\t\tif (client.getWidget(WidgetInfo.CLAN_CHAT_LIST).getChildren() == null)\n+\t\t{\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tColor ignoreColor = config.showIgnores() ? config.showIgnoresColor() : Color.WHITE;\n+\t\tfor (Widget listWidget : client.getWidget(WidgetInfo.CLAN_CHAT_LIST).getChildren())", "originalCommit": "897c8ffe7c1333c3598f9780ce1dfb50f81f4868", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEwNjU2MQ==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r363106561", "bodyText": "Is there a better way to detect this? Some people have an rsn matching World \\\\d+", "author": "Adam-", "createdAt": "2020-01-05T17:31:09Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -668,4 +676,23 @@ private void confirmKickPlayer(final String kickPlayerName)\n \t\t\t.option(\"2. Cancel\", Runnables::doNothing)\n \t\t\t.build();\n \t}\n+\n+\tprivate void colorIgnoredPlayers()\n+\t{\n+\t\tif (client.getWidget(WidgetInfo.CLAN_CHAT_LIST).getChildren() == null)\n+\t\t{\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tColor ignoreColor = config.showIgnores() ? config.showIgnoresColor() : Color.WHITE;\n+\t\tfor (Widget listWidget : client.getWidget(WidgetInfo.CLAN_CHAT_LIST).getChildren())\n+\t\t{\n+\t\t\tif (listWidget.getText().isEmpty() || listWidget.getText().matches(\"World \\\\d+\") ||", "originalCommit": "897c8ffe7c1333c3598f9780ce1dfb50f81f4868", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEwODE5Mw==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r363108193", "bodyText": "Added so it hops every 3 widgets, since the order that the widgets go in is name, world, icon.", "author": "melkypie", "createdAt": "2020-01-05T18:04:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEwNjU2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAwNTc3OA==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r364005778", "bodyText": "Ideally the config names should be fairly short since it is what shows in the panel, and then have a longer description. maybe Mark ignored players or something.", "author": "Adam-", "createdAt": "2020-01-07T23:45:02Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatConfig.java", "diffHunk": "@@ -148,4 +149,26 @@ default boolean confirmKicks()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"showIgnores\",\n+\t\tname = \"Marks players who are on ignore list\",", "originalCommit": "3054b132eacb21d1c87daa4498c75eaff2b4b6a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAwNTg0Nw==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r364005847", "bodyText": "newline above this.", "author": "Adam-", "createdAt": "2020-01-07T23:45:17Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -167,6 +167,7 @@ public void onConfigChanged(ConfigChanged configChanged)\n \t\t\t{\n \t\t\t\tremoveClanCounter();\n \t\t\t}\n+\t\t\tcolorIgnoredPlayers();", "originalCommit": "3054b132eacb21d1c87daa4498c75eaff2b4b6a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAwNjEzNg==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r364006136", "bodyText": "You can pull the ignore container out of this loop", "author": "Adam-", "createdAt": "2020-01-07T23:46:25Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -668,4 +675,26 @@ private void confirmKickPlayer(final String kickPlayerName)\n \t\t\t.option(\"2. Cancel\", Runnables::doNothing)\n \t\t\t.build();\n \t}\n+\n+\tprivate void colorIgnoredPlayers()\n+\t{\n+\t\tWidget clanChatList = client.getWidget(WidgetInfo.CLAN_CHAT_LIST);\n+\t\tif (clanChatList == null || clanChatList.getChildren() == null)\n+\t\t{\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tColor ignoreColor = config.showIgnores() ? config.showIgnoresColor() : Color.WHITE;\n+\t\t// Iterate every 3 widgets, since the order of widgets is name, world, icon\n+\t\t// and World \\\\d+ could be a players name\n+\t\tfor (int i = 0; i < clanChatList.getChildren().length; i += 3)\n+\t\t{\n+\t\t\tWidget listWidget = clanChatList.getChild(i);\n+\t\t\tif (listWidget.getText().isEmpty() || client.getIgnoreContainer().findByName(listWidget.getText()) == null)", "originalCommit": "3054b132eacb21d1c87daa4498c75eaff2b4b6a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6d007cbd08bd9abcc21d96443e332d88cbfcb5d5", "url": "https://github.com/runelite/runelite/commit/6d007cbd08bd9abcc21d96443e332d88cbfcb5d5", "message": "clanchat: ability to mark ignored players\n\nRevert change and only add ClahnChatChannelRebuidl script files\n\nRevert the changes for scripts\n\nAdd back script changes, fix a spelling mistake and fix regex issue\n\nInvoke colorIngorePlayers later\n\nCo-Authored-By: Adam <adam@sigterm.info>\n\nMake clanChatList a variable\n\nCo-Authored-By: Adam <adam@sigterm.info>\n\nUse clanChatList in for\n\nCo-Authored-By: Adam <adam@sigterm.info>\n\nFix possible World player names\n\nSome optimization work and remove scripts\n\nRevert \"Some optimization work and remove scripts\"\n\nThis reverts commit 29cc2d20f3a313ec3b7df7cf24186192883faf0b.", "committedDate": "2020-01-11T01:45:56Z", "type": "forcePushed"}, {"oid": "1f8863b81cb5e63c864e8234e0dd8b9d6cc8c970", "url": "https://github.com/runelite/runelite/commit/1f8863b81cb5e63c864e8234e0dd8b9d6cc8c970", "message": "clanchat: ability to mark ignored players\n\nAdds the ability to configure whether or not to mark ignored players inside clanchat with a chosen color\nCo-Authored-By: Adam <adam@sigterm.info>", "committedDate": "2020-01-11T01:53:23Z", "type": "forcePushed"}, {"oid": "0b56fc08d0a5ca27df27a66881782e6840fc9d68", "url": "https://github.com/runelite/runelite/commit/0b56fc08d0a5ca27df27a66881782e6840fc9d68", "message": "clanchat: ability to mark ignored players\n\nAdds the ability to configure whether or not to mark ignored players inside clanchat with a chosen color\nCo-Authored-By: Adam <adam@sigterm.info>", "committedDate": "2020-01-11T02:01:38Z", "type": "forcePushed"}, {"oid": "b410ee4b548756bf46908a3bfea6611ac090c9e8", "url": "https://github.com/runelite/runelite/commit/b410ee4b548756bf46908a3bfea6611ac090c9e8", "message": "clanchat: ability to mark ignored players\n\nAdds the ability to configure whether or not to mark ignored players inside clanchat with a chosen color\n\nCo-Authored-By: Adam <adam@sigterm.info>", "committedDate": "2020-01-11T02:41:08Z", "type": "forcePushed"}, {"oid": "3f54eb3386eb111d0fcb23d004e727cdd97f7bdb", "url": "https://github.com/runelite/runelite/commit/3f54eb3386eb111d0fcb23d004e727cdd97f7bdb", "message": "clanchat: ability to mark ignored players\n\nAdds the ability to configure whether or not to mark ignored players inside clanchat with a chosen color\n\nCo-Authored-By: Adam <adam@sigterm.info>", "committedDate": "2020-01-11T06:48:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg5MzQ0Mg==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r366893442", "bodyText": "This needs to run on the client thread. Also you could check the config key being changed.", "author": "Adam-", "createdAt": "2020-01-15T14:08:22Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -167,6 +169,8 @@ public void onConfigChanged(ConfigChanged configChanged)\n \t\t\t{\n \t\t\t\tremoveClanCounter();\n \t\t\t}\n+\n+\t\t\tcolorIgnoredPlayers();", "originalCommit": "3f54eb3386eb111d0fcb23d004e727cdd97f7bdb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg5NDUwNA==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r366894504", "bodyText": "maybe \"Recolors players on your ignore list\" or something. \"Allows you to pick out\" could mean anything.", "author": "Adam-", "createdAt": "2020-01-15T14:10:30Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatConfig.java", "diffHunk": "@@ -148,4 +149,26 @@ default boolean confirmKicks()\n \t{\n \t\treturn false;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"showIgnores\",\n+\t\tname = \"Marks ignored players\",\n+\t\tdescription = \"Allows you to pick out players that are from your ignore list\",", "originalCommit": "3f54eb3386eb111d0fcb23d004e727cdd97f7bdb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg5NDg3MA==", "url": "https://github.com/runelite/runelite/pull/10550#discussion_r366894870", "bodyText": "this comment is just explaining why your previous implementation is a bad idea, but has nothing to do with this. i would remove it.", "author": "Adam-", "createdAt": "2020-01-15T14:11:09Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/clanchat/ClanChatPlugin.java", "diffHunk": "@@ -668,4 +678,28 @@ private void confirmKickPlayer(final String kickPlayerName)\n \t\t\t.option(\"2. Cancel\", Runnables::doNothing)\n \t\t\t.build();\n \t}\n+\n+\tprivate void colorIgnoredPlayers()\n+\t{\n+\t\tWidget clanChatList = client.getWidget(WidgetInfo.CLAN_CHAT_LIST);\n+\t\tif (clanChatList == null || clanChatList.getChildren() == null)\n+\t\t{\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tColor ignoreColor = config.showIgnores() ? config.showIgnoresColor() : Color.WHITE;\n+\t\tNameableContainer<Ignore> ignoreContainer = client.getIgnoreContainer();\n+\t\t// Iterate every 3 widgets, since the order of widgets is name, world, icon\n+\t\t// and World \\\\d+ could be a players name", "originalCommit": "3f54eb3386eb111d0fcb23d004e727cdd97f7bdb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a3e714da64f599805116052ea2ff24c93c4da7e0", "url": "https://github.com/runelite/runelite/commit/a3e714da64f599805116052ea2ff24c93c4da7e0", "message": "clanchat: ability to mark ignored players\n\nAdds the ability to configure whether or not to mark ignored players inside clanchat with a chosen color\n\nCo-Authored-By: Adam <adam@sigterm.info>", "committedDate": "2020-01-19T21:09:28Z", "type": "forcePushed"}, {"oid": "c1fc88a11f9713d13b1ef496c3cff430d37aa540", "url": "https://github.com/runelite/runelite/commit/c1fc88a11f9713d13b1ef496c3cff430d37aa540", "message": "clanchat: ability to mark ignored players\n\nAdds the ability to configure whether or not to mark ignored players inside clanchat with a chosen color\n\nCo-Authored-By: Adam <adam@sigterm.info>", "committedDate": "2020-01-19T21:41:06Z", "type": "forcePushed"}, {"oid": "8d77486948d452d4dd6df2f73174d42370626335", "url": "https://github.com/runelite/runelite/commit/8d77486948d452d4dd6df2f73174d42370626335", "message": "clanchat: add ability to recolor ignored players\n\nAdds the ability to configure whether or not to mark ignored players inside clanchat with a chosen color\n\nCo-Authored-By: Adam <adam@sigterm.info>", "committedDate": "2020-01-19T21:44:31Z", "type": "forcePushed"}, {"oid": "4174954f43dc8c60b3f06274e250c7179c19cfc3", "url": "https://github.com/runelite/runelite/commit/4174954f43dc8c60b3f06274e250c7179c19cfc3", "message": "clanchat: add ability to recolor ignored players\n\nAdds the ability to configure whether or not to mark ignored players inside clanchat with a chosen color\n\nCo-Authored-By: Adam <adam@sigterm.info>", "committedDate": "2020-01-20T22:48:27Z", "type": "commit"}, {"oid": "4174954f43dc8c60b3f06274e250c7179c19cfc3", "url": "https://github.com/runelite/runelite/commit/4174954f43dc8c60b3f06274e250c7179c19cfc3", "message": "clanchat: add ability to recolor ignored players\n\nAdds the ability to configure whether or not to mark ignored players inside clanchat with a chosen color\n\nCo-Authored-By: Adam <adam@sigterm.info>", "committedDate": "2020-01-20T22:48:27Z", "type": "forcePushed"}]}