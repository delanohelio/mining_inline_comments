{"pr_number": 11016, "pr_title": "friendslist: update titles using onScriptPostFired rather than onGameTick", "pr_createdAt": "2020-03-15T16:48:52Z", "pr_url": "https://github.com/runelite/runelite/pull/11016", "timeline": [{"oid": "f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "url": "https://github.com/runelite/runelite/commit/f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick", "committedDate": "2020-03-15T17:03:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEyMjExOQ==", "url": "https://github.com/runelite/runelite/pull/11016#discussion_r394122119", "bodyText": "There's already extra whitespace at the end of the method before, we definitely don't need more of it. Remove these empty lines.\n\n  \n    \n      \n        Suggested change", "author": "Nightfirecat", "createdAt": "2020-03-18T06:02:25Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/friendlist/FriendListPlugin.java", "diffHunk": "@@ -62,44 +63,52 @@ protected void shutDown()\n \t}\n \n \t@Subscribe\n-\tpublic void onGameTick(GameTick tick)\n+\tpublic void onScriptPostFired(ScriptPostFired event)\n \t{\n-\t\tfinal int world = client.getWorld();\n-\t\tfinal boolean isMember = client.getVar(VarPlayer.MEMBERSHIP_DAYS) > 0;\n-\n-\t\tfinal NameableContainer<Friend> friendContainer = client.getFriendContainer();\n-\t\tfinal int friendCount = friendContainer.getCount();\n-\t\tif (friendCount >= 0)\n+\t\tif (event.getScriptId() == ScriptID.FRIENDS_LIST_BUILD)\n \t\t{\n-\t\t\tfinal int limit = isMember ? MAX_FRIENDS_P2P : MAX_FRIENDS_F2P;\n+\t\t\tfinal int world = client.getWorld();\n+\t\t\tfinal boolean isMember = client.getVar(VarPlayer.MEMBERSHIP_DAYS) > 0;\n+\t\t\tfinal NameableContainer<Friend> friendContainer = client.getFriendContainer();\n+\t\t\tfinal int friendCount = friendContainer.getCount();\n+\t\t\tif (friendCount >= 0)\n+\t\t\t{\n+\t\t\t\tfinal int limit = isMember ? MAX_FRIENDS_P2P : MAX_FRIENDS_F2P;\n \n-\t\t\tfinal String title = \"Friends - W\" +\n-\t\t\t\tworld +\n-\t\t\t\t\" (\" +\n-\t\t\t\tfriendCount +\n-\t\t\t\t\"/\" +\n-\t\t\t\tlimit +\n-\t\t\t\t\")\";\n+\t\t\t\tfinal String title = \"Friends - W\" +\n+\t\t\t\t\tworld +\n+\t\t\t\t\t\" (\" +\n+\t\t\t\t\tfriendCount +\n+\t\t\t\t\t\"/\" +\n+\t\t\t\t\tlimit +\n+\t\t\t\t\t\")\";\n \n-\t\t\tsetFriendsListTitle(title);\n+\t\t\t\tsetFriendsListTitle(title);\n+\t\t\t}\n \t\t}\n-\n-\t\tfinal NameableContainer<Ignore> ignoreContainer = client.getIgnoreContainer();\n-\t\tfinal int ignoreCount = ignoreContainer.getCount();\n-\t\tif (ignoreCount >= 0)\n+\t\telse if (event.getScriptId() == ScriptID.IGNORE_LIST_BUILD)\n \t\t{\n-\t\t\tfinal int limit = isMember ? MAX_IGNORES_P2P : MAX_IGNORES_F2P;\n+\t\t\tfinal int world = client.getWorld();\n+\t\t\tfinal boolean isMember = client.getVar(VarPlayer.MEMBERSHIP_DAYS) > 0;\n+\t\t\tfinal NameableContainer<Ignore> ignoreContainer = client.getIgnoreContainer();\n+\t\t\tfinal int ignoreCount = ignoreContainer.getCount();\n+\t\t\tif (ignoreCount >= 0)\n+\t\t\t{\n+\t\t\t\tfinal int limit = isMember ? MAX_IGNORES_P2P : MAX_IGNORES_F2P;\n \n-\t\t\tfinal String title = \"Ignores - W\" +\n-\t\t\t\tworld +\n-\t\t\t\t\" (\" +\n-\t\t\t\tignoreCount +\n-\t\t\t\t\"/\" +\n-\t\t\t\tlimit +\n-\t\t\t\t\")\";\n+\t\t\t\tfinal String title = \"Ignores - W\" +\n+\t\t\t\t\tworld +\n+\t\t\t\t\t\" (\" +\n+\t\t\t\t\tignoreCount +\n+\t\t\t\t\t\"/\" +\n+\t\t\t\t\tlimit +\n+\t\t\t\t\t\")\";\n \n-\t\t\tsetIgnoreListTitle(title);\n+\t\t\t\tsetIgnoreListTitle(title);\n+\t\t\t}\n \t\t}\n+\n+", "originalCommit": "f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "url": "https://github.com/runelite/runelite/commit/cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick", "committedDate": "2020-03-18T11:18:16Z", "type": "commit"}, {"oid": "cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "url": "https://github.com/runelite/runelite/commit/cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick", "committedDate": "2020-03-18T11:18:16Z", "type": "forcePushed"}]}