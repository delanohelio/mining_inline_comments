{"pr_number": 9041, "pr_title": "System name validation / Manager Tests", "pr_createdAt": "2020-09-26T13:25:15Z", "pr_url": "https://github.com/JMRI/JMRI/pull/9041", "timeline": [{"oid": "26e56be4ff7013b464c94f4afff241aeccc8c0e5", "url": "https://github.com/JMRI/JMRI/commit/26e56be4ff7013b464c94f4afff241aeccc8c0e5", "message": "change Bundle name to generic", "committedDate": "2020-09-26T10:36:16Z", "type": "commit"}, {"oid": "381b747e1c8ec5153db89102b75925b94f5a6f2d", "url": "https://github.com/JMRI/JMRI/commit/381b747e1c8ec5153db89102b75925b94f5a6f2d", "message": "add unit tests to AbstractManagerTest", "committedDate": "2020-09-26T10:37:04Z", "type": "commit"}, {"oid": "05fc816b174c68cea7939e9ac9959c61c7c44b44", "url": "https://github.com/JMRI/JMRI/commit/05fc816b174c68cea7939e9ac9959c61c7c44b44", "message": "add validation ecos STR", "committedDate": "2020-09-26T10:37:31Z", "type": "commit"}, {"oid": "907135763d5e73feb85c8f0e366822659688c583", "url": "https://github.com/JMRI/JMRI/commit/907135763d5e73feb85c8f0e366822659688c583", "message": "grapevine - fix bundle", "committedDate": "2020-09-26T10:37:59Z", "type": "commit"}, {"oid": "ee261f8b2c0a4555cd46681a0a696573408cb79f", "url": "https://github.com/JMRI/JMRI/commit/ee261f8b2c0a4555cd46681a0a696573408cb79f", "message": "add validation OpenLCB STL", "committedDate": "2020-09-26T10:38:24Z", "type": "commit"}, {"oid": "7d96b877ecd46e50fe33565c6a49f43fa74657cd", "url": "https://github.com/JMRI/JMRI/commit/7d96b877ecd46e50fe33565c6a49f43fa74657cd", "message": "add validation RasPi ST", "committedDate": "2020-09-26T10:38:45Z", "type": "commit"}, {"oid": "3c032d2089665db3be40f1f54883f269db6880e9", "url": "https://github.com/JMRI/JMRI/commit/3c032d2089665db3be40f1f54883f269db6880e9", "message": "add validation dcc4pc SR", "committedDate": "2020-09-26T10:39:14Z", "type": "commit"}, {"oid": "0c609a2984dc6d387bb70579382cd9f597d5aad4", "url": "https://github.com/JMRI/JMRI/commit/0c609a2984dc6d387bb70579382cd9f597d5aad4", "message": "add validation Tams ST", "committedDate": "2020-09-26T10:39:38Z", "type": "commit"}, {"oid": "0b3e2c02553f5c64f22181259c5a68f36a01e59e", "url": "https://github.com/JMRI/JMRI/commit/0b3e2c02553f5c64f22181259c5a68f36a01e59e", "message": "add throws to jmri Manager", "committedDate": "2020-09-26T10:40:34Z", "type": "commit"}, {"oid": "8d52d817f5b108e3ef6c5a9cfeeddfdbc4050db0", "url": "https://github.com/JMRI/JMRI/commit/8d52d817f5b108e3ef6c5a9cfeeddfdbc4050db0", "message": "add validation JMRIClient ST", "committedDate": "2020-09-26T10:41:32Z", "type": "commit"}, {"oid": "5e585ef9ed1882a64bd06a2d8e7eaf197eb09108", "url": "https://github.com/JMRI/JMRI/commit/5e585ef9ed1882a64bd06a2d8e7eaf197eb09108", "message": "add validation SRCP ST", "committedDate": "2020-09-26T10:41:52Z", "type": "commit"}, {"oid": "28a1db1a650d68376f6c0a872629809383ed6c04", "url": "https://github.com/JMRI/JMRI/commit/28a1db1a650d68376f6c0a872629809383ed6c04", "message": "add validation Loconet TranspondingTag", "committedDate": "2020-09-26T10:42:42Z", "type": "commit"}, {"oid": "53e1ec8244525c8b119c80af1ce727d6f9f4a293", "url": "https://github.com/JMRI/JMRI/commit/53e1ec8244525c8b119c80af1ce727d6f9f4a293", "message": "LightManager add default validSystemNameConfig", "committedDate": "2020-09-26T10:50:05Z", "type": "commit"}, {"oid": "fe7ed30443625f09781807bd421b2ef177b589c4", "url": "https://github.com/JMRI/JMRI/commit/fe7ed30443625f09781807bd421b2ef177b589c4", "message": "add validation Xpa T", "committedDate": "2020-09-26T10:52:43Z", "type": "commit"}, {"oid": "f0fae85b974e024118542c092fe06a4f1517d6b4", "url": "https://github.com/JMRI/JMRI/commit/f0fae85b974e024118542c092fe06a4f1517d6b4", "message": "add validation AbstractReporterManager / rfid", "committedDate": "2020-09-26T10:56:50Z", "type": "commit"}, {"oid": "b11bfb34fac26ef51f9fdb0a379592a5487723d8", "url": "https://github.com/JMRI/JMRI/commit/b11bfb34fac26ef51f9fdb0a379592a5487723d8", "message": "Force provided Turnouts through makeSystemName to get proper error message", "committedDate": "2020-09-26T10:59:27Z", "type": "commit"}, {"oid": "509941a261d0c089bda51497f0a18411bd79974d", "url": "https://github.com/JMRI/JMRI/commit/509941a261d0c089bda51497f0a18411bd79974d", "message": "add custom system names to test against", "committedDate": "2020-09-26T11:00:47Z", "type": "commit"}, {"oid": "47d97f0dd4d2b6fdc2cfba4f3ac7e2a37664e620", "url": "https://github.com/JMRI/JMRI/commit/47d97f0dd4d2b6fdc2cfba4f3ac7e2a37664e620", "message": "override tests on subclasses with no custom validation", "committedDate": "2020-09-26T11:01:31Z", "type": "commit"}, {"oid": "8c8045829c27426e8cff8f109490cd81902764b4", "url": "https://github.com/JMRI/JMRI/commit/8c8045829c27426e8cff8f109490cd81902764b4", "message": "override tests for other managers which do not validate system names", "committedDate": "2020-09-26T12:43:56Z", "type": "commit"}, {"oid": "76247f55685d0ae6389d140dd3a78f7edd4700ae", "url": "https://github.com/JMRI/JMRI/commit/76247f55685d0ae6389d140dd3a78f7edd4700ae", "message": "reduce duplicate OpenLCB code", "committedDate": "2020-09-28T17:21:17Z", "type": "commit"}, {"oid": "f4adca696e2e63279de87da81f28df04677cc2d1", "url": "https://github.com/JMRI/JMRI/commit/f4adca696e2e63279de87da81f28df04677cc2d1", "message": "add validateTrimmedMin1NumberSystemNameFormat / validateSystemNameFormatOnlyNumeric", "committedDate": "2020-09-28T17:27:37Z", "type": "commit"}, {"oid": "935d2125e2e5a11cfcb02940a7805b3959ce84a0", "url": "https://github.com/JMRI/JMRI/commit/935d2125e2e5a11cfcb02940a7805b3959ce84a0", "message": "system names at least 1 number", "committedDate": "2020-09-28T17:28:36Z", "type": "commit"}, {"oid": "b2aabd44a524073b2e578d5464a96e903084e30d", "url": "https://github.com/JMRI/JMRI/commit/b2aabd44a524073b2e578d5464a96e903084e30d", "message": "system names numeric only", "committedDate": "2020-09-28T17:29:20Z", "type": "commit"}, {"oid": "09041c525762321005c56d85cb5dd3f586b5bcd2", "url": "https://github.com/JMRI/JMRI/commit/09041c525762321005c56d85cb5dd3f586b5bcd2", "message": "more system names at least 1 number", "committedDate": "2020-09-28T17:29:44Z", "type": "commit"}, {"oid": "98f93ec9b81b5a07107fdfbd3b82ab78648f4dfd", "url": "https://github.com/JMRI/JMRI/commit/98f93ec9b81b5a07107fdfbd3b82ab78648f4dfd", "message": "fix missing javadoc", "committedDate": "2020-09-28T18:01:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyMTM1Nw==", "url": "https://github.com/JMRI/JMRI/pull/9041#discussion_r497021357", "bodyText": "Why is this test here? Will the test fail for this class if it's removed? Or is it here as a reminder if some developer later adds class-specific name validation?", "author": "danielb987", "createdAt": "2020-09-29T20:23:15Z", "path": "java/test/jmri/jmrit/audio/DefaultAudioManagerTest.java", "diffHunk": "@@ -100,6 +101,16 @@ public void testGetNamedBeanSet() {\n         result = l.getNamedBeanSet().size();\n         Assert.assertEquals(\"Verify that we get two buffers & one listener\", expResult, result);\n     }\n+    \n+    @Test\n+    @Override\n+    @ToDo(\"Use test when tested class performs class-specific name validation.\")\n+    public void testMakeSystemNameWithNoPrefixNotASystemName() {}", "originalCommit": "98f93ec9b81b5a07107fdfbd3b82ab78648f4dfd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzg4OTEzNQ==", "url": "https://github.com/JMRI/JMRI/pull/9041#discussion_r497889135", "bodyText": "This test overrides the generic test that system names without a prefix and text \"$:\" should fail with exception.\nThis could be a perfectly valid system name for some managers, hence the test won't work for all scenarios, especially those that don't perform any type of custom validation.\nDoes the \"@todo\" annotation feel OK or should it be removed?", "author": "icklesteve", "createdAt": "2020-10-01T00:47:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyMTM1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ5MDgyOQ==", "url": "https://github.com/JMRI/JMRI/pull/9041#discussion_r498490829", "bodyText": "https://www.jmri.org/help/en/html/doc/Technical/JUnit.shtml\nToDo is used when the test needs more work to function correctly.\nIn this case, I think it would be better to change it to a simple comment, since this test is not relevant for this class.", "author": "danielb987", "createdAt": "2020-10-01T20:17:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyMTM1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODgxNTE3NQ==", "url": "https://github.com/JMRI/JMRI/pull/9041#discussion_r498815175", "bodyText": "Thanks for the comment Daniel, makes sense.", "author": "icklesteve", "createdAt": "2020-10-02T13:18:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyMTM1Nw=="}], "type": "inlineReview"}, {"oid": "74b99d7680e449fde36c176528638e9aa7c59d38", "url": "https://github.com/JMRI/JMRI/commit/74b99d7680e449fde36c176528638e9aa7c59d38", "message": "update no prefix invalid test", "committedDate": "2020-10-01T00:37:36Z", "type": "commit"}, {"oid": "3e4234ac82b9c0e874c64c7e01d008d4b287c24d", "url": "https://github.com/JMRI/JMRI/commit/3e4234ac82b9c0e874c64c7e01d008d4b287c24d", "message": "update test annotation", "committedDate": "2020-10-02T12:57:38Z", "type": "commit"}, {"oid": "fe79b1941ff990047feb9b177ffc5e6233f21bc4", "url": "https://github.com/JMRI/JMRI/commit/fe79b1941ff990047feb9b177ffc5e6233f21bc4", "message": "remove validation loconet transponding tag manager", "committedDate": "2020-10-02T12:58:27Z", "type": "commit"}, {"oid": "1082dbdb44aebcc0f7a6f8f46163ee65775c9cfc", "url": "https://github.com/JMRI/JMRI/commit/1082dbdb44aebcc0f7a6f8f46163ee65775c9cfc", "message": "remove validation abstractreportermanager", "committedDate": "2020-10-02T12:58:55Z", "type": "commit"}, {"oid": "884503fc7235fb359782bbd8934e318db32fddf3", "url": "https://github.com/JMRI/JMRI/commit/884503fc7235fb359782bbd8934e318db32fddf3", "message": "Update current-draft-note.shtml", "committedDate": "2020-10-02T12:59:11Z", "type": "commit"}, {"oid": "1bc5905bb2b55678c375abe5bbff7d042b8b7e86", "url": "https://github.com/JMRI/JMRI/commit/1bc5905bb2b55678c375abe5bbff7d042b8b7e86", "message": "update tests reportermanagers with no validation method", "committedDate": "2020-10-02T14:21:17Z", "type": "commit"}, {"oid": "68b42aace1e25972c427a0f75c5d9320e99ce59b", "url": "https://github.com/JMRI/JMRI/commit/68b42aace1e25972c427a0f75c5d9320e99ce59b", "message": "add cbusreportermgr jmriclientrepmanager validatesystemname methods", "committedDate": "2020-10-02T14:22:15Z", "type": "commit"}]}