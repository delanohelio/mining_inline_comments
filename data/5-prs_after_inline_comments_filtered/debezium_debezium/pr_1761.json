{"pr_number": 1761, "pr_title": "DBZ-2303 Set source when new table detected", "pr_createdAt": "2020-08-21T09:22:29Z", "pr_url": "https://github.com/debezium/debezium/pull/1761", "timeline": [{"oid": "6ccb499d042fe0c797f4d20ce6f9a0f89b142c11", "url": "https://github.com/debezium/debezium/commit/6ccb499d042fe0c797f4d20ce6f9a0f89b142c11", "message": "DBZ-2303 Set source when new table detected", "committedDate": "2020-08-21T13:39:43Z", "type": "commit"}, {"oid": "6ccb499d042fe0c797f4d20ce6f9a0f89b142c11", "url": "https://github.com/debezium/debezium/commit/6ccb499d042fe0c797f4d20ce6f9a0f89b142c11", "message": "DBZ-2303 Set source when new table detected", "committedDate": "2020-08-21T13:39:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc2NDE3OA==", "url": "https://github.com/debezium/debezium/pull/1761#discussion_r474764178", "bodyText": "Not directly about the PR, but more in general we maybe could think about changing the method signature to explicitly pass timestamp, database and snapshot parameters as @NotNull. Such issues are easy because we are passing the complete SourceInfo here and we don't really need the object. WDYT?", "author": "rk3rn3r", "createdAt": "2020-08-21T15:18:11Z", "path": "debezium-core/src/main/java/io/debezium/connector/AbstractSourceInfoStructMaker.java", "diffHunk": "@@ -46,12 +47,14 @@ protected SchemaBuilder commonSchemaBuilder() {\n     }\n \n     protected Struct commonStruct(T sourceInfo) {", "originalCommit": "6ccb499d042fe0c797f4d20ce6f9a0f89b142c11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUyMzI3Mg==", "url": "https://github.com/debezium/debezium/pull/1761#discussion_r475523272", "bodyText": "I created https://issues.redhat.com/browse/DBZ-2443 for that", "author": "rk3rn3r", "createdAt": "2020-08-24T11:06:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc2NDE3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc2OTA0Ng==", "url": "https://github.com/debezium/debezium/pull/1761#discussion_r474769046", "bodyText": "The question is if the null safety is the job of the getters, or, like here done outside.\nMaybe we can make the getters final default methods in the interface and make new abstract getters like protected getDatabaseSourceInfo() that will be implemented by the implementing classes.\nWe still call the (new) default final getters (like database()) but it will call the implemented abstract getDatabaseSourceInfo() and does the null safety?\nAgain this must not be part of the PR, but would be nice to have your opinion.", "author": "rk3rn3r", "createdAt": "2020-08-21T15:25:57Z", "path": "debezium-core/src/main/java/io/debezium/connector/AbstractSourceInfoStructMaker.java", "diffHunk": "@@ -46,12 +47,14 @@ protected SchemaBuilder commonSchemaBuilder() {\n     }\n \n     protected Struct commonStruct(T sourceInfo) {\n+        final Instant timestamp = sourceInfo.timestamp() == null ? Instant.now() : sourceInfo.timestamp();", "originalCommit": "6ccb499d042fe0c797f4d20ce6f9a0f89b142c11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUyMzE4Ng==", "url": "https://github.com/debezium/debezium/pull/1761#discussion_r475523186", "bodyText": "I created https://issues.redhat.com/browse/DBZ-2443 for that", "author": "rk3rn3r", "createdAt": "2020-08-24T11:06:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc2OTA0Ng=="}], "type": "inlineReview"}]}