{"pr_number": 1221, "pr_title": "DBZ-1052 Transaction metadata", "pr_createdAt": "2020-01-22T11:41:30Z", "pr_url": "https://github.com/debezium/debezium/pull/1221", "timeline": [{"oid": "1a38b5bb321791975eddbdf018b95b6b07d60240", "url": "https://github.com/debezium/debezium/commit/1a38b5bb321791975eddbdf018b95b6b07d60240", "message": "DBZ-1052 Transaction metadata for SQL Server", "committedDate": "2020-01-22T12:19:10Z", "type": "forcePushed"}, {"oid": "e53bf32c0e1cbae7503138a52073a6267fc68bc3", "url": "https://github.com/debezium/debezium/commit/e53bf32c0e1cbae7503138a52073a6267fc68bc3", "message": "DBZ-1052 Transaction metadata for SQL Server", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "35a26452bc11df57015387f3e5a76595f18bab31", "url": "https://github.com/debezium/debezium/commit/35a26452bc11df57015387f3e5a76595f18bab31", "message": "DBZ-1052 Transaction metadata for Postgres/pgoutput", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "21148195b05f2bdcc2f1b11a7c44e09ae1a45890", "url": "https://github.com/debezium/debezium/commit/21148195b05f2bdcc2f1b11a7c44e09ae1a45890", "message": "DBZ-1052 Transaction metadata for Postgres/wal2json", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "a6935db3a0a0a41124f7a3636a2304318a0d26f7", "url": "https://github.com/debezium/debezium/commit/a6935db3a0a0a41124f7a3636a2304318a0d26f7", "message": "DBZ-1052 Test for limited Postgres/protobuf", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "4b281619a0b9f69436370e7175ba5320c31c5ecb", "url": "https://github.com/debezium/debezium/commit/4b281619a0b9f69436370e7175ba5320c31c5ecb", "message": "DBZ-1052 Skip CE for transaction struct", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "f90beea0de3bda14ac8c1a1f91e9c765d593c43f", "url": "https://github.com/debezium/debezium/commit/f90beea0de3bda14ac8c1a1f91e9c765d593c43f", "message": "DBZ-1052 Fix test for offset size", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "2ccc5281fd74b5c7d96a1befc1fcade76e49d618", "url": "https://github.com/debezium/debezium/commit/2ccc5281fd74b5c7d96a1befc1fcade76e49d618", "message": "DBZ-1052 Support for full Postgres/protobuf", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "799dfb2cf00401ec7b0c6b5712ca5d5207211f73", "url": "https://github.com/debezium/debezium/commit/799dfb2cf00401ec7b0c6b5712ca5d5207211f73", "message": "DBZ-1052 Remove unused fields; added JavaDoc", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "7e85f723117f768a45e97d0e58747d2086fc0880", "url": "https://github.com/debezium/debezium/commit/7e85f723117f768a45e97d0e58747d2086fc0880", "message": "DBZ-1052 Change TX topic name", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "be098b746591fff70112df45b0b7d568508c331b", "url": "https://github.com/debezium/debezium/commit/be098b746591fff70112df45b0b7d568508c331b", "message": "DBZ-1052 Remove suprfluous test", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "585cf3eaecd466d9254998a53ad86b83d6691baa", "url": "https://github.com/debezium/debezium/commit/585cf3eaecd466d9254998a53ad86b83d6691baa", "message": "DBZ-1052 Transaction block moved to envelope", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "264f7a6e585eef1f9a46ea93e89a9b33dec3e8d5", "url": "https://github.com/debezium/debezium/commit/264f7a6e585eef1f9a46ea93e89a9b33dec3e8d5", "message": "DBZ-1052 Add counts per table to END", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "ac702618b8b2e44f72e2ddcde72a946ed8a8e14e", "url": "https://github.com/debezium/debezium/commit/ac702618b8b2e44f72e2ddcde72a946ed8a8e14e", "message": "DBZ-1052 CE support for tx metadata in data messages", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "1d845dd9febae9ce0bccc4d3bf785073ec9b5c49", "url": "https://github.com/debezium/debezium/commit/1d845dd9febae9ce0bccc4d3bf785073ec9b5c49", "message": "DBZ-1052 Add tx enable option to connector definitions", "committedDate": "2020-01-30T14:04:22Z", "type": "commit"}, {"oid": "1ab3f7b0bad35d0def908f5d48ffc67f7b5eab55", "url": "https://github.com/debezium/debezium/commit/1ab3f7b0bad35d0def908f5d48ffc67f7b5eab55", "message": "DBZ-1052 Docs for CE and postgres", "committedDate": "2020-01-31T04:59:28Z", "type": "commit"}, {"oid": "1ab3f7b0bad35d0def908f5d48ffc67f7b5eab55", "url": "https://github.com/debezium/debezium/commit/1ab3f7b0bad35d0def908f5d48ffc67f7b5eab55", "message": "DBZ-1052 Docs for CE and postgres", "committedDate": "2020-01-31T04:59:28Z", "type": "forcePushed"}, {"oid": "2f41544b8777e819091e17c4d2b132bba9b746e3", "url": "https://github.com/debezium/debezium/commit/2f41544b8777e819091e17c4d2b132bba9b746e3", "message": "DBZ-1052 Expand known protobuf messages list", "committedDate": "2020-01-31T08:31:46Z", "type": "commit"}, {"oid": "2f41544b8777e819091e17c4d2b132bba9b746e3", "url": "https://github.com/debezium/debezium/commit/2f41544b8777e819091e17c4d2b132bba9b746e3", "message": "DBZ-1052 Expand known protobuf messages list", "committedDate": "2020-01-31T08:31:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQ0Nzk3NQ==", "url": "https://github.com/debezium/debezium/pull/1221#discussion_r373447975", "bodyText": "Isn't the early return a problem as we'd miss the update of lastCompletelyProcessedLsn below?", "author": "gunnarmorling", "createdAt": "2020-01-31T12:05:03Z", "path": "debezium-connector-postgres/src/main/java/io/debezium/connector/postgresql/PostgresStreamingChangeEventSource.java", "diffHunk": "@@ -126,15 +128,33 @@ public void execute(ChangeEventSourceContext context) throws InterruptedExceptio\n                         dispatcher.dispatchHeartbeatEvent(offsetContext);\n                         return;\n                     }\n+                    if (TransactionMessage.isTransactionalMessage(message) && !connectorConfig.shouldProvideTransactionMetadata()) {\n+                        LOGGER.trace(\"Received transactional message {}\", message);\n+                        return;", "originalCommit": "2f41544b8777e819091e17c4d2b132bba9b746e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "662195b4690e15e729851d28504b767154db4379", "url": "https://github.com/debezium/debezium/commit/662195b4690e15e729851d28504b767154db4379", "message": "DBZ-1052 Misc. clean-up\n\n* Doc updates\n* Changed static method to instance", "committedDate": "2020-01-31T12:12:24Z", "type": "commit"}, {"oid": "b16e612f47873eb0aa15e558a0c5074a21c6e84d", "url": "https://github.com/debezium/debezium/commit/b16e612f47873eb0aa15e558a0c5074a21c6e84d", "message": "DBZ-1052 Docs for Oracle and SQL Server", "committedDate": "2020-01-31T13:05:56Z", "type": "commit"}, {"oid": "9641575d0669336be686e4f452f0caaad4b0ed7f", "url": "https://github.com/debezium/debezium/commit/9641575d0669336be686e4f452f0caaad4b0ed7f", "message": "DBZ-1052 Flush LSN for skipped tx messages", "committedDate": "2020-01-31T13:07:13Z", "type": "commit"}, {"oid": "6e41122237e706a282911f8ef3b52558a49b6472", "url": "https://github.com/debezium/debezium/commit/6e41122237e706a282911f8ef3b52558a49b6472", "message": "DBZ-1052 Stabilize test for changed heartbeats", "committedDate": "2020-02-03T06:04:27Z", "type": "commit"}, {"oid": "6e41122237e706a282911f8ef3b52558a49b6472", "url": "https://github.com/debezium/debezium/commit/6e41122237e706a282911f8ef3b52558a49b6472", "message": "DBZ-1052 Stabilize test for changed heartbeats", "committedDate": "2020-02-03T06:04:27Z", "type": "forcePushed"}]}