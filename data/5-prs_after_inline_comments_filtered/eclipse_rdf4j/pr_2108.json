{"pr_number": 2108, "pr_title": "GH-2107 predict the size of the data that needs to be read in DataFile", "pr_createdAt": "2020-04-19T17:23:04Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2108", "timeline": [{"oid": "b2f9d68121e47eeb0ac160d3e33f7a99f50b5496", "url": "https://github.com/eclipse/rdf4j/commit/b2f9d68121e47eeb0ac160d3e33f7a99f50b5496", "message": "remove assert for performance\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-04-19T17:30:23Z", "type": "forcePushed"}, {"oid": "faf8762023baa2428b3721b200dc43d02c093a67", "url": "https://github.com/eclipse/rdf4j/commit/faf8762023baa2428b3721b200dc43d02c093a67", "message": "remove assert for performance\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-04-19T18:31:49Z", "type": "forcePushed"}, {"oid": "c3d46843c6a990014c9f5ba13b28e69687a9c2a1", "url": "https://github.com/eclipse/rdf4j/commit/c3d46843c6a990014c9f5ba13b28e69687a9c2a1", "message": "GH-2107 benchmark\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-04-19T18:43:55Z", "type": "commit"}, {"oid": "a80147a05a9114dea9ce721f54f6f31afdaab282", "url": "https://github.com/eclipse/rdf4j/commit/a80147a05a9114dea9ce721f54f6f31afdaab282", "message": "GH-2107 predict the size of the data that needs to be read in DataFile\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-04-19T18:43:56Z", "type": "commit"}, {"oid": "92df2cccad810dcad0b704199e870463b350af24", "url": "https://github.com/eclipse/rdf4j/commit/92df2cccad810dcad0b704199e870463b350af24", "message": "remove assert for performance\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-04-19T18:43:56Z", "type": "commit"}, {"oid": "92df2cccad810dcad0b704199e870463b350af24", "url": "https://github.com/eclipse/rdf4j/commit/92df2cccad810dcad0b704199e870463b350af24", "message": "remove assert for performance\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-04-19T18:43:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTAxNzU3OQ==", "url": "https://github.com/eclipse/rdf4j/pull/2108#discussion_r411017579", "bodyText": "Very clever. Is 25 as a starting point based on any sort of observation of what is \"typical\"? Or is it more a \"we need to start somewhere\"?", "author": "jeenbroekstra", "createdAt": "2020-04-19T23:36:42Z", "path": "core/sail/nativerdf/src/main/java/org/eclipse/rdf4j/sail/nativerdf/datastore/DataFile.java", "diffHunk": "@@ -121,29 +121,61 @@ public long storeData(byte[] data) throws IOException {\n \t\treturn offset;\n \t}\n \n+\t// This variable is used for predicting the number of bytes to read in getData(long offset). This helps us to only\n+\t// need to execute a single IO read instead of first one read to find the length and then one read to read the data.\n+\tint dataLengthApproximateAverage = 25;", "originalCommit": "92df2cccad810dcad0b704199e870463b350af24", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}