{"pr_number": 2433, "pr_title": "GH-2431 all benchmarks now have a main, and a fat jar", "pr_createdAt": "2020-08-09T05:54:52Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2433", "timeline": [{"oid": "a0db615d15043808f3728ea569c0854b2b3639da", "url": "https://github.com/eclipse/rdf4j/commit/a0db615d15043808f3728ea569c0854b2b3639da", "message": "GH-2431 all benchmarks now have a main, and a fat jar\n\n- main method makes direct execution from IDE possible\n- fat jar (target/jmh-benchmark.jar) makes command line execution\npossible", "committedDate": "2020-08-09T05:38:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3MDE1MA==", "url": "https://github.com/eclipse/rdf4j/pull/2433#discussion_r467570150", "bodyText": "Btw. The stack profiler is terrible. It's more often than not gives the wrong results because it only benchmarks safe points. 20 stack lines is also a bit little. I think you need a hundred or maybe more.\nI just Java Flight Recorder for profiling.", "author": "hmottestad", "createdAt": "2020-08-09T11:12:32Z", "path": "core/sail/memory/src/test/java/org/eclipse/rdf4j/sail/memory/benchmark/MemoryBenchmark.java", "diffHunk": "@@ -45,6 +49,16 @@\n \n \tprivate List<Statement> statementList = getStatements();\n \n+\tpublic static void main(String[] args) throws RunnerException {\n+\t\tOptions opt = new OptionsBuilder()\n+\t\t\t\t.include(\"MemoryBenchmark.load\") // adapt to run other benchmark tests\n+\t\t\t\t// .addProfiler(\"stack\", \"lines=20;period=1;top=20\")", "originalCommit": "a0db615d15043808f3728ea569c0854b2b3639da", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3NTUyMQ==", "url": "https://github.com/eclipse/rdf4j/pull/2433#discussion_r467575521", "bodyText": "I just copy pasted that from somewhere but good to know.", "author": "jeenbroekstra", "createdAt": "2020-08-09T12:04:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3MDE1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3MDMzNQ==", "url": "https://github.com/eclipse/rdf4j/pull/2433#discussion_r467570335", "bodyText": "I also noticed that you added main methods to each file. I'll have to try with IntelliJ to see if it doesn't mess up the plugins detection of what to run. I'm away from my computer for a week now, so just merge it and I'll give it a go sometime later. \ufffc", "author": "hmottestad", "createdAt": "2020-08-09T11:13:53Z", "path": "core/sail/memory/src/test/java/org/eclipse/rdf4j/sail/memory/benchmark/QueryBenchmark.java", "diffHunk": "@@ -68,6 +72,16 @@\n \n \tList<Statement> statementList;\n \n+\tpublic static void main(String[] args) throws RunnerException {", "originalCommit": "a0db615d15043808f3728ea569c0854b2b3639da", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3NTE5Ng==", "url": "https://github.com/eclipse/rdf4j/pull/2433#discussion_r467575196", "bodyText": "No rush, I'm supposed to be on holiday myself (at home, we're still in lockdown here).", "author": "jeenbroekstra", "createdAt": "2020-08-09T12:01:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3MDMzNQ=="}], "type": "inlineReview"}]}