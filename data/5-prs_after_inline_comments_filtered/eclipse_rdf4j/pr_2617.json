{"pr_number": 2617, "pr_title": "GH-1942 Rio RDF and QueryResult Writer support for non-default character encoding", "pr_createdAt": "2020-10-23T03:51:23Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2617", "timeline": [{"oid": "23495c1978ab1556bdc6e8d19a8245b4afa253ca", "url": "https://github.com/eclipse/rdf4j/commit/23495c1978ab1556bdc6e8d19a8245b4afa253ca", "message": "GH-1942: Added Writer constructor for relevant QueryResultWriter classes\n\nSigned-off-by: Erik Godding Boye <1142578+erikgb@users.noreply.github.com>", "committedDate": "2020-04-19T14:26:31Z", "type": "commit"}, {"oid": "f55ae83e755844d2e1801729df055608133437f5", "url": "https://github.com/eclipse/rdf4j/commit/f55ae83e755844d2e1801729df055608133437f5", "message": "GH-1942: Assured correct state handling in Writer constructors for relevant RDFWriter classes\n\nSigned-off-by: Erik Godding Boye <1142578+erikgb@users.noreply.github.com>", "committedDate": "2020-04-19T14:26:54Z", "type": "commit"}, {"oid": "d863e5868bd2e4e989203125542c9fde535eee03", "url": "https://github.com/eclipse/rdf4j/commit/d863e5868bd2e4e989203125542c9fde535eee03", "message": "Merge branch 'develop' into GH-1942-writer-character-encoding", "committedDate": "2020-04-21T01:27:02Z", "type": "commit"}, {"oid": "68b7ee42934bace6d8c93c778925ac595bf78c57", "url": "https://github.com/eclipse/rdf4j/commit/68b7ee42934bace6d8c93c778925ac595bf78c57", "message": "Merge branch 'GH-1942-writer-char-encoding' into GH-1942-writer-character-encoding", "committedDate": "2020-10-22T23:52:58Z", "type": "commit"}, {"oid": "b44926024fbf64aca7023637184a17e1e187d991", "url": "https://github.com/eclipse/rdf4j/commit/b44926024fbf64aca7023637184a17e1e187d991", "message": "Merge pull request #2106 from erikgb/GH-1942-writer-character-encoding\n\nGH-1942 Made sure all character format writers have Writer constructor", "committedDate": "2020-10-23T00:31:40Z", "type": "commit"}, {"oid": "9e3e5a74f346ab2ef7193ab76ef252ce0646306f", "url": "https://github.com/eclipse/rdf4j/commit/9e3e5a74f346ab2ef7193ab76ef252ce0646306f", "message": "GH-1942 roundtrip test for non-default encoding in RDFWriters", "committedDate": "2020-10-23T02:25:20Z", "type": "commit"}, {"oid": "ba46cc6da6b8c352f50d45bc7f5baab27be50e4a", "url": "https://github.com/eclipse/rdf4j/commit/ba46cc6da6b8c352f50d45bc7f5baab27be50e4a", "message": "GH-1942 introduce ByteSink/CharSink and clean up constructors", "committedDate": "2020-10-23T04:24:53Z", "type": "commit"}, {"oid": "b12ca74ce6c43b77cd2624bae39a309837763fba", "url": "https://github.com/eclipse/rdf4j/commit/b12ca74ce6c43b77cd2624bae39a309837763fba", "message": "Merge branch 'GH-1942-bytesink-charsink' into GH-1942-writer-char-encoding", "committedDate": "2020-10-23T04:31:56Z", "type": "commit"}, {"oid": "b12ca74ce6c43b77cd2624bae39a309837763fba", "url": "https://github.com/eclipse/rdf4j/commit/b12ca74ce6c43b77cd2624bae39a309837763fba", "message": "Merge branch 'GH-1942-bytesink-charsink' into GH-1942-writer-char-encoding", "committedDate": "2020-10-23T04:31:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY1MzM3NQ==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r510653375", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * @param out     The OutputStream to write the Turtle document to. The writer will use\n          \n          \n            \n            \t * @param out     The OutputStream to write the Turtle document to.", "author": "erikgb", "createdAt": "2020-10-23T06:12:38Z", "path": "core/rio/turtle/src/main/java/org/eclipse/rdf4j/rio/turtle/TurtleWriter.java", "diffHunk": "@@ -114,11 +107,10 @@ public TurtleWriter(OutputStream out) {\n \t/**\n \t * Creates a new TurtleWriter that will write to the supplied OutputStream.\n \t *\n-\t * @param out     The OutputStream to write the Turtle document to.\n+\t * @param out     The OutputStream to write the Turtle document to. The writer will use", "originalCommit": "b12ca74ce6c43b77cd2624bae39a309837763fba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY1NjQ4Ng==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r510656486", "bodyText": "Suggested change", "author": "erikgb", "createdAt": "2020-10-23T06:15:43Z", "path": "core/rio/trix/src/main/java/org/eclipse/rdf4j/rio/trix/TriXWriter.java", "diffHunk": "@@ -210,4 +211,5 @@ private static final boolean contextsEquals(Resource context1, Resource context2\n \t\t\treturn context1.equals(context2);\n \t\t}\n \t}\n+", "originalCommit": "b12ca74ce6c43b77cd2624bae39a309837763fba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY1OTU1OQ==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r510659559", "bodyText": "Maybe remove this - since the corresponding Methods-marker is deleted.", "author": "erikgb", "createdAt": "2020-10-23T06:22:00Z", "path": "core/rio/trix/src/main/java/org/eclipse/rdf4j/rio/trix/TriXWriter.java", "diffHunk": "@@ -42,13 +43,13 @@\n  *\n  * @author Arjohn Kampman\n  */\n-public class TriXWriter extends AbstractRDFWriter implements RDFWriter {\n+public class TriXWriter extends AbstractRDFWriter implements RDFWriter, CharSink {\n \n \t/*-----------*", "originalCommit": "b12ca74ce6c43b77cd2624bae39a309837763fba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc4MjA2MQ==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r510782061", "bodyText": "I'm sort of removing these as I see them but missed this one. Will fix.", "author": "jeenbroekstra", "createdAt": "2020-10-23T10:14:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY1OTU1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4NTE5Ng==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r510685196", "bodyText": "I think the following block is quite long and a bit hard to read. Would it be possible to split it up with some private methods? Or replacing the instanceof conditionals with use of the Strategy/Visitor Pattern? I tend to prefer it to get better compile-time checks.", "author": "erikgb", "createdAt": "2020-10-23T07:23:06Z", "path": "core/http/client/src/main/java/org/eclipse/rdf4j/http/client/SPARQLProtocolSession.java", "diffHunk": "@@ -685,15 +688,24 @@ protected void getTupleQueryResult(HttpUriRequest method, TupleQueryResultHandle\n \t\t\t\t\t\t.orElseThrow(() -> new RepositoryException(\n \t\t\t\t\t\t\t\t\"Server responded with an unsupported file format: \" + mimeType));\n \n-\t\t\t\t// Check if we can pass through to the output stream directly\n+\t\t\t\t// Check if we can pass through to the writer directly\n \t\t\t\tif (handler instanceof TupleQueryResultWriter) {\n \t\t\t\t\tTupleQueryResultWriter tqrWriter = (TupleQueryResultWriter) handler;\n \t\t\t\t\tif (tqrWriter.getTupleQueryResultFormat().equals(format)) {\n-\t\t\t\t\t\tOutputStream out = tqrWriter.getOutputStream().orElse(null);\n-\t\t\t\t\t\tif (out != null) {\n-\t\t\t\t\t\t\tInputStream in = response.getEntity().getContent();\n-\t\t\t\t\t\t\tIOUtils.copy(in, out);\n-\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\tif (tqrWriter instanceof CharSink) {", "originalCommit": "b12ca74ce6c43b77cd2624bae39a309837763fba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc4MTYyMA==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r510781620", "bodyText": "Yeah good point, not sure about a visitor but I'll DRY it up a bit at least.", "author": "jeenbroekstra", "createdAt": "2020-10-23T10:13:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4NTE5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM2MzUzMA==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511363530", "bodyText": "Much better, even if I try to avoid instanceof - if possible.", "author": "erikgb", "createdAt": "2020-10-24T09:32:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4NTE5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4NTQwNw==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r510685407", "bodyText": "I think the following block is quite long and a bit hard to read. Would it be possible to split it up with some private methods? Or replacing the instanceof conditionals with use of the Strategy/Visitor Pattern? I tend to prefer it to get better compile-time checks.", "author": "erikgb", "createdAt": "2020-10-23T07:23:34Z", "path": "core/http/client/src/main/java/org/eclipse/rdf4j/http/client/SPARQLProtocolSession.java", "diffHunk": "@@ -853,15 +865,24 @@ protected void getRDF(HttpUriRequest method, RDFHandler handler, boolean require\n \t\t\t\tRDFFormat format = RDFFormat.matchMIMEType(mimeType, rdfFormats)\n \t\t\t\t\t\t.orElseThrow(() -> new RepositoryException(\n \t\t\t\t\t\t\t\t\"Server responded with an unsupported file format: \" + mimeType));\n-\t\t\t\t// Check if we can pass through to the output stream directly\n+\t\t\t\t// Check if we can pass through to the writer directly\n \t\t\t\tif (handler instanceof RDFWriter) {\n \t\t\t\t\tRDFWriter rdfWriter = (RDFWriter) handler;\n \t\t\t\t\tif (rdfWriter.getRDFFormat().equals(format)) {\n-\t\t\t\t\t\tOutputStream out = rdfWriter.getOutputStream().orElse(null);\n-\t\t\t\t\t\tif (out != null) {\n-\t\t\t\t\t\t\tInputStream in = response.getEntity().getContent();\n-\t\t\t\t\t\t\tIOUtils.copy(in, out);\n-\t\t\t\t\t\t\treturn;\n+\t\t\t\t\t\tif (rdfWriter instanceof CharSink) {", "originalCommit": "b12ca74ce6c43b77cd2624bae39a309837763fba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTIwMzI3Mw==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511203273", "bodyText": "I didn't quite use a strategy pattern in the end but I've managed to simplify things a little, have another look.", "author": "jeenbroekstra", "createdAt": "2020-10-24T00:07:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4NTQwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM2MzY4Mw==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511363683", "bodyText": "Great job! Much better now!", "author": "erikgb", "createdAt": "2020-10-24T09:33:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4NTQwNw=="}], "type": "inlineReview"}, {"oid": "a9fe9cecf370cbc8b2e22561ad9a4abbd2076d16", "url": "https://github.com/eclipse/rdf4j/commit/a9fe9cecf370cbc8b2e22561ad9a4abbd2076d16", "message": "GH-1942 moved new Sink interfaces to common.io package, DRYed up code a bit\n\n- generic Sink interface to allow fileformat retrieval without knowing\nthe specific type of writer (RDF or QueryResult)\n- moved Sinks to org.eclipse.rdf4j.common.io to make them more\ngenerically reusable.\n- DRYed up SPARQLProtocolSession code to determine if passthrough of\neither RDF data or sparql query result is possible.", "committedDate": "2020-10-24T00:03:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTIwNTk1MA==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511205950", "bodyText": "Fwiw I'm open to other/better naming suggestions. \"Sink\" is very generic.", "author": "jeenbroekstra", "createdAt": "2020-10-24T00:16:01Z", "path": "core/util/src/main/java/org/eclipse/rdf4j/common/io/Sink.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/******************************************************************************* \n+ * Copyright (c) 2020 Eclipse RDF4J contributors. \n+ * All rights reserved. This program and the accompanying materials \n+ * are made available under the terms of the Eclipse Distribution License v1.0 \n+ * which accompanies this distribution, and is available at \n+ * http://www.eclipse.org/org/documents/edl-v10.php. \n+ *******************************************************************************/\n+package org.eclipse.rdf4j.common.io;\n+\n+import org.eclipse.rdf4j.common.lang.FileFormat;\n+\n+/**\n+ * \n+ * A Sink writes data in a particular {@link FileFormat}.\n+ * \n+ * @author Jeen Broekstra\n+ * @since 3.5.0\n+ */\n+public interface Sink {", "originalCommit": "a9fe9cecf370cbc8b2e22561ad9a4abbd2076d16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTMzNjMwNg==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511336306", "bodyText": "Naming is always the hardest part! I think we need to decide if we want to include some term(s) from where we are \"coming\" or to where we are \"going\". Some ideas: RdfDataSink, RdfOutputStreamProvider, RdfWriterSink. Put I also think we can keep the generic Sink name. This will almost be a marker interface, and only minor parts of code will have to relate to it.", "author": "erikgb", "createdAt": "2020-10-24T08:19:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTIwNTk1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTUyNTQ0Mg==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511525442", "bodyText": "Thanks, all decent suggestions, but the core problem is that it should cover both RDF data and SPARQL Tuple Query results, so I'm a little uncomfortable prefixing it with \"Rdf\". I'll go the path of least resistance and stick with Sink for now I think.", "author": "jeenbroekstra", "createdAt": "2020-10-24T23:31:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTIwNTk1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM0MDk5Mw==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511340993", "bodyText": "I think this statement mandates to make the getWriter method final.", "author": "erikgb", "createdAt": "2020-10-24T08:40:13Z", "path": "core/queryresultio/sparqljson/src/main/java/org/eclipse/rdf4j/query/resultio/sparqljson/AbstractSPARQLJSONWriter.java", "diffHunk": "@@ -77,15 +75,26 @@\n \n \tprotected final JsonGenerator jg;\n \n+\tprivate final Writer writer;\n+\n \tprotected AbstractSPARQLJSONWriter(OutputStream out) {\n-\t\tsuper(out);\n+\t\tthis(new OutputStreamWriter(out, StandardCharsets.UTF_8));\n+\t}\n+\n+\tprotected AbstractSPARQLJSONWriter(Writer writer) {\n+\t\tthis.writer = writer;\n \t\ttry {\n-\t\t\tjg = JSON_FACTORY.createGenerator(new OutputStreamWriter(out, StandardCharsets.UTF_8));\n+\t\t\tjg = JSON_FACTORY.createGenerator(writer);", "originalCommit": "a9fe9cecf370cbc8b2e22561ad9a4abbd2076d16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTUyNTQ5MA==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511525490", "bodyText": "Good catch - will fix.", "author": "jeenbroekstra", "createdAt": "2020-10-24T23:31:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM0MDk5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM1NzEwOA==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511357108", "bodyText": "There are utilities in Http Client for obtaining the Charset! Something in the line of\nHttpEntity entity = response.getEntity();\nContentType contentType = ContentType.get(entity);\nif (contentType == null) {\n   return Optional.empty();\n}\nreturn Optional.ofNullable(contentType.getCharset());\nOr is there a reason for not using it?", "author": "erikgb", "createdAt": "2020-10-24T09:16:54Z", "path": "core/http/client/src/main/java/org/eclipse/rdf4j/http/client/SPARQLProtocolSession.java", "diffHunk": "@@ -1139,6 +1150,35 @@ protected String getResponseMIMEType(HttpResponse method) throws IOException {\n \t\treturn null;\n \t}\n \n+\t/**\n+\t * Gets the character encoding specified in the HTTP headers of the supplied response, if any. For example, if the\n+\t * response headers contain <tt>Content-Type: application/xml;charset=UTF-8</tt>, this method will return\n+\t * {@link StandardCharsets#UTF_8 UTF-8} as the character encoding.\n+\t * \n+\t * @param response the response to get the character encoding from.\n+\t * @return the response character encoding, {@link Optional#empty()} if it can not be determined.\n+\t */\n+\tOptional<Charset> getResponseCharset(HttpResponse response) {\n+\t\tHeader[] headers = response.getHeaders(\"Content-Type\");", "originalCommit": "a9fe9cecf370cbc8b2e22561ad9a4abbd2076d16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTUyNTY5MQ==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511525691", "bodyText": "I'm aware of the utilities, but I figured I'd do the minimal change only, so I just copied / adapted this from existing internal methods dealing with the content type. A lot of that code is from the httpclient 3.x days when it didn't have these kinds of utilities (or perhaps we weren't aware of it at the time).\nYou're right that it could probably be cleaned up a bit though, I'll take another look at it.", "author": "jeenbroekstra", "createdAt": "2020-10-24T23:34:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM1NzEwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTUyODE2MQ==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511528161", "bodyText": "I've had a quick look but I'm not confident about changing how content-type header processing is handled in general without introducing regressions. It needs some better test coverage to get certainty on that and I just don't want to spend the effort right now (it's also somewhat out of scope for this ticket).  So I'll stick with the current approach for now. I have logged a separate ticket to deal with some general cleanup of this part of the code: #2619.", "author": "jeenbroekstra", "createdAt": "2020-10-25T00:10:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM1NzEwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM2MTcwNQ==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511361705", "bodyText": "Maybe introduce a variable for the used Charset?", "author": "erikgb", "createdAt": "2020-10-24T09:28:00Z", "path": "core/http/client/src/main/java/org/eclipse/rdf4j/http/client/SPARQLProtocolSession.java", "diffHunk": "@@ -880,6 +866,31 @@ protected void getRDF(HttpUriRequest method, RDFHandler handler, boolean require\n \t\t}\n \t}\n \n+\t/**\n+\t * Pass through response content directly to the supplied sink if possible.\n+\t * \n+\t * @param response       the {@link HttpResponse} with the content.\n+\t * @param responseFormat the format of the response.\n+\t * @param sink           the {@link Sink} to pass the content through to.\n+\t * @return {@code true} if the content was passed through, {@code false} otherwise.\n+\t * @throws IOException\n+\t */\n+\tprivate boolean passThrough(HttpResponse response, FileFormat responseFormat, Sink sink)\n+\t\t\tthrows IOException {\n+\t\tif (responseFormat.equals(sink.getFileFormat())) {\n+\t\t\tInputStream in = response.getEntity().getContent();\n+\t\t\tif (sink instanceof CharSink) {\n+\t\t\t\tIOUtils.copy(in, ((CharSink) sink).getWriter(),\n+\t\t\t\t\t\tgetResponseCharset(response).orElse(responseFormat.getCharset()));", "originalCommit": "a9fe9cecf370cbc8b2e22561ad9a4abbd2076d16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTUyNTg4MQ==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511525881", "bodyText": "My personal rule of thumb is not to introduce a variable unless you refer to it at least twice and/or the code becomes unreadable without it. YMMV but I think this is still in the \"easy enough to read\" category :)", "author": "jeenbroekstra", "createdAt": "2020-10-24T23:37:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM2MTcwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTU2NTE5Mw==", "url": "https://github.com/eclipse/rdf4j/pull/2617#discussion_r511565193", "bodyText": "A programmer will always have a personal preference. \ud83d\ude09 I am fine with that, and agree that this case is in the category \"easy enough to read\".", "author": "erikgb", "createdAt": "2020-10-25T08:32:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTM2MTcwNQ=="}], "type": "inlineReview"}, {"oid": "9d2b5eb853e38abe40df78f01deaa1181982fae0", "url": "https://github.com/eclipse/rdf4j/commit/9d2b5eb853e38abe40df78f01deaa1181982fae0", "message": "GH-1942 make final because it is internally injected in the JsonGenerator", "committedDate": "2020-10-25T00:10:55Z", "type": "commit"}]}