{"pr_number": 2358, "pr_title": "GH-2357 Add NTripletsParser comment lines handling", "pr_createdAt": "2020-07-13T20:51:49Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2358", "timeline": [{"oid": "816e69eecbec11b704a7a8c4b4459c10e9d20c91", "url": "https://github.com/eclipse/rdf4j/commit/816e69eecbec11b704a7a8c4b4459c10e9d20c91", "message": "GH-2357 Add NTripletsParser comment lines handling\n\nSigned-off-by: Elad Shaked <elad.shaked@sparkbeyond.com>", "committedDate": "2020-07-13T20:50:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAyMTYwMQ==", "url": "https://github.com/eclipse/rdf4j/pull/2358#discussion_r454021601", "bodyText": "rdfHandler may be null (e.g. when the parser is used for verification only) so you need a null-check here.", "author": "jeenbroekstra", "createdAt": "2020-07-14T00:16:42Z", "path": "core/rio/ntriples/src/main/java/org/eclipse/rdf4j/rio/ntriples/NTriplesParser.java", "diffHunk": "@@ -240,6 +247,17 @@ protected int skipLine(int c) throws IOException {\n \t\treturn c;\n \t}\n \n+\tprotected int skipLine(int c) throws IOException {\n+\t\treturn skipLine(c, null);\n+\t}\n+\n+\tprivate int parseComment(int c) throws IOException {\n+\t\tStringBuilder sb = new StringBuilder(100);\n+\t\tint res = skipLine(c, sb);\n+\t\trdfHandler.handleComment(sb.toString());", "originalCommit": "816e69eecbec11b704a7a8c4b4459c10e9d20c91", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAyNDcwNw==", "url": "https://github.com/eclipse/rdf4j/pull/2358#discussion_r454024707", "bodyText": "We discourage the use of wildcard imports - could you tweak your editor settings?", "author": "jeenbroekstra", "createdAt": "2020-07-14T00:27:12Z", "path": "core/rio/ntriples/src/test/java/org/eclipse/rdf4j/rio/ntriples/AbstractNTriplesParserUnitTest.java", "diffHunk": "@@ -12,15 +12,15 @@\n \n import java.io.InputStream;\n import java.io.StringReader;\n-import java.util.ArrayList;\n-import java.util.Collections;\n-import java.util.List;\n+import java.util.*;", "originalCommit": "816e69eecbec11b704a7a8c4b4459c10e9d20c91", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAzMTY4OA==", "url": "https://github.com/eclipse/rdf4j/pull/2358#discussion_r454031688", "bodyText": "I just had a closer look and you get a test failure because this does not check if c (after reading the code point on line 216) is -1.", "author": "jeenbroekstra", "createdAt": "2020-07-14T00:49:02Z", "path": "core/rio/ntriples/src/main/java/org/eclipse/rdf4j/rio/ntriples/NTriplesParser.java", "diffHunk": "@@ -211,9 +211,16 @@ protected int skipToEndOfLine(int c) throws IOException {\n \t * Reads characters from reader until the first EOL has been read. The first character after the EOL is returned. In\n \t * case the end of the character stream has been reached, -1 is returned.\n \t */\n-\tprotected int skipLine(int c) throws IOException {\n+\tprotected int skipLine(int c, StringBuilder sb) throws IOException {\n \t\twhile (c != -1 && c != '\\r' && c != '\\n') {\n \t\t\tc = readCodePoint();\n+\t\t\tif (sb != null) {\n+\t\t\t\tsb.append(Character.toChars(c));", "originalCommit": "816e69eecbec11b704a7a8c4b4459c10e9d20c91", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8a32983e071d9c53fa7222999d92bc37d18fb310", "url": "https://github.com/eclipse/rdf4j/commit/8a32983e071d9c53fa7222999d92bc37d18fb310", "message": "GH-2357 Fixes a per review\n\nSigned-off-by: Elad Shaked <elad.shaked@sparkbeyond.com>", "committedDate": "2020-07-14T06:35:29Z", "type": "commit"}, {"oid": "13b509a2460927194929085e3b080f9867f80c65", "url": "https://github.com/eclipse/rdf4j/commit/13b509a2460927194929085e3b080f9867f80c65", "message": "GH-2357 Fixed formatting\n\nSigned-off-by: Elad Shaked <elad.shaked@sparkbeyond.com>", "committedDate": "2020-07-14T06:39:29Z", "type": "commit"}]}