{"pr_number": 2051, "pr_title": "GH-2024 rdfstar support in memorystore", "pr_createdAt": "2020-03-30T04:55:51Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2051", "timeline": [{"oid": "ba6bab603485c6f88ddf2c4390d6f580786439a8", "url": "https://github.com/eclipse/rdf4j/commit/ba6bab603485c6f88ddf2c4390d6f580786439a8", "message": "GH-2024 added stringValue for MemTriple\n\n- added unit tests on equality and stringValue representation\n\nSigned-off-by: Jeen Broekstra <jeen.broekstra@gmail.com>", "committedDate": "2020-03-30T04:59:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTkyOTUxNg==", "url": "https://github.com/eclipse/rdf4j/pull/2051#discussion_r399929516", "bodyText": "Just looking at this, I'm wondering how (non-)obvious the difference between ValueFactory.createStatement and ValueFactory.createTriple will be to users. Apart from making sure it's clearly explained in the javadoc, any ideas around how to make this more clear?", "author": "jeenbroekstra", "createdAt": "2020-03-30T05:06:33Z", "path": "testsuites/repository/src/main/java/org/eclipse/rdf4j/repository/RDFStarSupportTest.java", "diffHunk": "@@ -0,0 +1,131 @@\n+/******************************************************************************* \n+ * Copyright (c) 2020 Eclipse RDF4J contributors.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Distribution License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/org/documents/edl-v10.php.\n+ *******************************************************************************/\n+package org.eclipse.rdf4j.repository;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.junit.Assert.fail;\n+\n+import java.util.concurrent.TimeUnit;\n+\n+import org.eclipse.rdf4j.model.BNode;\n+import org.eclipse.rdf4j.model.IRI;\n+import org.eclipse.rdf4j.model.Literal;\n+import org.eclipse.rdf4j.model.Triple;\n+import org.eclipse.rdf4j.model.ValueFactory;\n+import org.eclipse.rdf4j.model.vocabulary.FOAF;\n+import org.eclipse.rdf4j.model.vocabulary.RDF;\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.rules.Timeout;\n+\n+/**\n+ * Test cases for RDF* support in the Repository.\n+ * \n+ * @author Jeen Broekstra\n+ *\n+ */\n+public abstract class RDFStarSupportTest {\n+\t/**\n+\t * Timeout all individual tests after 10 minutes.\n+\t */\n+\t@Rule\n+\tpublic Timeout to = new Timeout(10, TimeUnit.MINUTES);\n+\n+\tprivate Repository testRepository;\n+\n+\tprivate RepositoryConnection testCon;\n+\n+\tprivate ValueFactory vf;\n+\n+\tprivate BNode bob;\n+\n+\tprivate BNode alice;\n+\n+\tprivate BNode alexander;\n+\n+\tprivate Literal nameAlice;\n+\n+\tprivate Literal nameBob;\n+\n+\tprivate Literal mboxAlice;\n+\n+\tprivate Literal mboxBob;\n+\n+\tprivate IRI context1;\n+\n+\tprivate IRI context2;\n+\n+\t@Before\n+\tpublic void setUp() throws Exception {\n+\t\ttestRepository = createRepository();\n+\n+\t\ttestCon = testRepository.getConnection();\n+\t\ttestCon.clear();\n+\t\ttestCon.clearNamespaces();\n+\n+\t\tvf = testRepository.getValueFactory();\n+\n+\t\t// Initialize values\n+\t\tbob = vf.createBNode();\n+\t\talice = vf.createBNode();\n+\t\talexander = vf.createBNode();\n+\n+\t\tnameAlice = vf.createLiteral(\"Alice\");\n+\t\tnameBob = vf.createLiteral(\"Bob\");\n+\n+\t\tmboxAlice = vf.createLiteral(\"alice@example.org\");\n+\t\tmboxBob = vf.createLiteral(\"bob@example.org\");\n+\n+\t\tcontext1 = vf.createIRI(\"urn:x-local:graph1\");\n+\t\tcontext2 = vf.createIRI(\"urn:x-local:graph2\");\n+\t}\n+\n+\t@After\n+\tpublic void tearDown() throws Exception {\n+\t\ttry {\n+\t\t\ttestCon.close();\n+\t\t} finally {\n+\t\t\ttestRepository.shutDown();\n+\t\t}\n+\t}\n+\n+\t@Test\n+\tpublic void testAddRDFStarSubject() throws Exception {\n+\t\tTriple rdfStarTriple = vf.createTriple(bob, FOAF.NAME, nameBob);\n+\n+\t\ttestCon.add(rdfStarTriple, RDF.TYPE, RDF.ALT);\n+\n+\t\tassertThat(testCon.hasStatement(rdfStarTriple, RDF.TYPE, RDF.ALT, false)).isTrue();\n+\t}\n+\n+\t@Test\n+\tpublic void testAddRDFStarObject() throws Exception {\n+\t\tTriple rdfStarTriple = vf.createTriple(bob, FOAF.NAME, nameBob);\n+\n+\t\ttestCon.add(RDF.ALT, RDF.TYPE, rdfStarTriple);\n+\n+\t\tassertThat(testCon.hasStatement(RDF.ALT, RDF.TYPE, rdfStarTriple, false)).isTrue();\n+\t}\n+\n+\t@Test\n+\tpublic void testAddRDFStarContext() throws Exception {\n+\t\tTriple rdfStarTriple = vf.createTriple(bob, FOAF.NAME, nameBob);", "originalCommit": "ba6bab603485c6f88ddf2c4390d6f580786439a8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk3MDMyMQ==", "url": "https://github.com/eclipse/rdf4j/pull/2051#discussion_r399970321", "bodyText": "If you are a complete newbie it might be unclear but if that is the case there will lots of other confusing things too. Once you realize you can't pass a Triple where a Statement is expected it should be obvious they aren't interchangeable. The multitude of methods that have \"statement\" in their name (hasStatement, getStatements, exportStatements, handleStatement etc.) are also a clear indication of what is expected or returned there.\nIf you aren't new to RDF4J it shouldn't be a problem at all.", "author": "avataar", "createdAt": "2020-03-30T07:10:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTkyOTUxNg=="}], "type": "inlineReview"}, {"oid": "94459da09aadf7012ea1b71e2d91104cf738e545", "url": "https://github.com/eclipse/rdf4j/commit/94459da09aadf7012ea1b71e2d91104cf738e545", "message": "GH-2024 adding/retrieving of Triple objects in memorystore\n\n- added MemTriple class to keep track of triple objects in the\nmemorystore\n- SimpleTriple.equals loosened to allow equality with any Triple\n  implementation (cf how this works for SimpleIRI, SimpleLiteral, etc.)\n- added test case class for RDF* support in repository testsuite\n- added unit tests on equality and stringValue representation\n\nSigned-off-by: Jeen Broekstra <jeen.broekstra@gmail.com>", "committedDate": "2020-03-30T05:14:42Z", "type": "commit"}, {"oid": "94459da09aadf7012ea1b71e2d91104cf738e545", "url": "https://github.com/eclipse/rdf4j/commit/94459da09aadf7012ea1b71e2d91104cf738e545", "message": "GH-2024 adding/retrieving of Triple objects in memorystore\n\n- added MemTriple class to keep track of triple objects in the\nmemorystore\n- SimpleTriple.equals loosened to allow equality with any Triple\n  implementation (cf how this works for SimpleIRI, SimpleLiteral, etc.)\n- added test case class for RDF* support in repository testsuite\n- added unit tests on equality and stringValue representation\n\nSigned-off-by: Jeen Broekstra <jeen.broekstra@gmail.com>", "committedDate": "2020-03-30T05:14:42Z", "type": "forcePushed"}]}