{"pr_number": 1830, "pr_title": "GH-1739 strip context", "pr_createdAt": "2020-01-12T01:57:33Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/1830", "timeline": [{"oid": "e42348c008b728dad35fa327b984bdeb98893ed5", "url": "https://github.com/eclipse/rdf4j/commit/e42348c008b728dad35fa327b984bdeb98893ed5", "message": "GH-1739 add Statements#stripContext", "committedDate": "2020-01-12T01:58:29Z", "type": "forcePushed"}, {"oid": "e8321c2c1fb7cf994d64a84c84041ecc3e15b96f", "url": "https://github.com/eclipse/rdf4j/commit/e8321c2c1fb7cf994d64a84c84041ecc3e15b96f", "message": "GH-1739 add Statements#stripContext\n\nGH-1739 add stripContexts to Models util", "committedDate": "2020-01-12T02:55:51Z", "type": "forcePushed"}, {"oid": "034cad64648849fcbc4bc341ae54221f393c5fd5", "url": "https://github.com/eclipse/rdf4j/commit/034cad64648849fcbc4bc341ae54221f393c5fd5", "message": "GH-1739 add Statements#stripContext\n\nGH-1739 add stripContexts to Models util", "committedDate": "2020-01-12T03:06:21Z", "type": "forcePushed"}, {"oid": "317a3422f7412f29c0df2fd71caa2c79a2fc7ac2", "url": "https://github.com/eclipse/rdf4j/commit/317a3422f7412f29c0df2fd71caa2c79a2fc7ac2", "message": "GH-1739 add Statements#stripContext\n\nGH-1739 add stripContexts to Models util", "committedDate": "2020-01-12T03:08:58Z", "type": "commit"}, {"oid": "317a3422f7412f29c0df2fd71caa2c79a2fc7ac2", "url": "https://github.com/eclipse/rdf4j/commit/317a3422f7412f29c0df2fd71caa2c79a2fc7ac2", "message": "GH-1739 add Statements#stripContext\n\nGH-1739 add stripContexts to Models util", "committedDate": "2020-01-12T03:08:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1NTIxNQ==", "url": "https://github.com/eclipse/rdf4j/pull/1830#discussion_r365555215", "bodyText": "Sorry for the import reorg, I've temporarily been using IntelliJ instead of Eclipse and obviously hit the wrong key combo somewhere.", "author": "jeenbroekstra", "createdAt": "2020-01-12T03:32:32Z", "path": "core/model/src/main/java/org/eclipse/rdf4j/model/util/Models.java", "diffHunk": "@@ -32,6 +24,15 @@\n import java.util.stream.Collectors;\n import java.util.stream.StreamSupport;\n \n+import org.eclipse.rdf4j.model.BNode;\n+import org.eclipse.rdf4j.model.IRI;\n+import org.eclipse.rdf4j.model.Literal;\n+import org.eclipse.rdf4j.model.Model;\n+import org.eclipse.rdf4j.model.Resource;\n+import org.eclipse.rdf4j.model.Statement;\n+import org.eclipse.rdf4j.model.Value;\n+import org.eclipse.rdf4j.model.impl.LinkedHashModel;", "originalCommit": "317a3422f7412f29c0df2fd71caa2c79a2fc7ac2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU4NTcwOA==", "url": "https://github.com/eclipse/rdf4j/pull/1830#discussion_r365585708", "bodyText": "That's pretty sweet :)", "author": "hmottestad", "createdAt": "2020-01-12T14:10:13Z", "path": "core/model/src/main/java/org/eclipse/rdf4j/model/util/Models.java", "diffHunk": "@@ -488,6 +489,27 @@ public static boolean isSubset(Set<? extends Statement> model1, Set<? extends St\n \t\treturn isSubsetInternal(toSet(model1), toModel(model2));\n \t}\n \n+\t/**\n+\t * Strips contexts from the input model. This method provides a new {@link Model} containing all statements from the\n+\t * input model, with the supplied contexts removed from those statements.\n+\t *\n+\t * @param model    the input model\n+\t * @param contexts the contexts to remove. This is a vararg and as such is optional. If not supplied, the method\n+\t *                 strips <i>all</i> contexts.\n+\t * @return a new {@link Model} object containg the same statements as the input model, with the supplied contexts\n+\t *         stripped.\n+\t */\n+\tpublic static Model stripContexts(Model model, Resource... contexts) {\n+\t\tfinal List<Resource> contextList = Arrays.asList(contexts);\n+\t\treturn model.stream().map(st -> {\n+\t\t\tif (contextList.isEmpty() || contextList.contains(st.getContext())) {\n+\t\t\t\treturn Statements.stripContext(st);\n+\t\t\t} else {\n+\t\t\t\treturn st;\n+\t\t\t}\n+\t\t}).collect(Collectors.toCollection(LinkedHashModel::new));", "originalCommit": "317a3422f7412f29c0df2fd71caa2c79a2fc7ac2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}