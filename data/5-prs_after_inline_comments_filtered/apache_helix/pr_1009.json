{"pr_number": 1009, "pr_title": "Configurable thread pool size for AssignableInstance", "pr_createdAt": "2020-05-13T20:10:51Z", "pr_url": "https://github.com/apache/helix/pull/1009", "timeline": [{"oid": "3cb45f96fb8e7a5b1acb6e907c49eeac7038877e", "url": "https://github.com/apache/helix/commit/3cb45f96fb8e7a5b1acb6e907c49eeac7038877e", "message": "Added logic to AssignableInstance", "committedDate": "2020-05-13T17:33:21Z", "type": "commit"}, {"oid": "c812e41be4e7c74ac951707d1c49e813f1fd219f", "url": "https://github.com/apache/helix/commit/c812e41be4e7c74ac951707d1c49e813f1fd219f", "message": "Fix tests", "committedDate": "2020-05-13T19:58:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc1MzgwOA==", "url": "https://github.com/apache/helix/pull/1009#discussion_r424753808", "bodyText": "Do we do a null check on _liveInstance?", "author": "narendly", "createdAt": "2020-05-13T21:55:35Z", "path": "helix-core/src/main/java/org/apache/helix/task/assigner/AssignableInstance.java", "diffHunk": "@@ -113,7 +113,7 @@ private void refreshTotalCapacity() {\n     if (resourceCapacity == null) {\n       resourceCapacity = new HashMap<>();\n       resourceCapacity.put(LiveInstance.InstanceResourceType.TASK_EXEC_THREAD.name(),\n-          Integer.toString(TaskConstants.DEFAULT_TASK_THREAD_POOL_SIZE));\n+          Integer.toString(_liveInstance.getCurrentTaskThreadPoolSize()));", "originalCommit": "c812e41be4e7c74ac951707d1c49e813f1fd219f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc1ODAxMA==", "url": "https://github.com/apache/helix/pull/1009#discussion_r424758010", "bodyText": "There is a null check before _liveInstance assignment, see line 72.", "author": "NealSun96", "createdAt": "2020-05-13T22:05:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc1MzgwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc1NDIwNg==", "url": "https://github.com/apache/helix/pull/1009#discussion_r424754206", "bodyText": "Nit: rename to \"expectedCurrentTaskThreadPoolSize\"?", "author": "narendly", "createdAt": "2020-05-13T21:56:38Z", "path": "helix-core/src/test/java/org/apache/helix/task/assigner/TestAssignableInstance.java", "diffHunk": "@@ -55,18 +55,20 @@ public void testInvalidInitialization() {\n \n   @Test\n   public void testInitializationWithQuotaUnset() {\n+    int testCurrentTaskThreadPoolSize = 100;", "originalCommit": "c812e41be4e7c74ac951707d1c49e813f1fd219f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc1ODA2Nw==", "url": "https://github.com/apache/helix/pull/1009#discussion_r424758067", "bodyText": "Sure. The one in testNormalTryAssign() will stay as is because it's not used for assertion.", "author": "NealSun96", "createdAt": "2020-05-13T22:05:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc1NDIwNg=="}], "type": "inlineReview"}, {"oid": "f247a49b83c21dd68054a86ca27ce2ee28a187f8", "url": "https://github.com/apache/helix/commit/f247a49b83c21dd68054a86ca27ce2ee28a187f8", "message": "Naming", "committedDate": "2020-05-13T22:26:50Z", "type": "commit"}]}