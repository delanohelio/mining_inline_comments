{"pr_number": 944, "pr_title": "Add CustomizedView Root Change Listener to the Router", "pr_createdAt": "2020-04-10T16:35:02Z", "pr_url": "https://github.com/apache/helix/pull/944", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1ODQxOA==", "url": "https://github.com/apache/helix/pull/944#discussion_r406858418", "bodyText": "So the prefetched type is not used anywhere. I think we should add listeners to the intersection of the available types and the user required types, right?", "author": "zhangmeng916", "createdAt": "2020-04-10T17:25:23Z", "path": "helix-core/src/main/java/org/apache/helix/spectator/RoutingTableProvider.java", "diffHunk": "@@ -683,6 +694,27 @@ public void onCustomizedViewChange(List<CustomizedView> customizedViewList,\n     }\n   }\n \n+  @Override\n+  @PreFetch(enabled = false)\n+  public void onCustomizedViewRootChange(List<String> customizedViewTypes,", "originalCommit": "71cee83c3ffb6ef3b70f5eed15f7842f665fb37d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3NzgxMA==", "url": "https://github.com/apache/helix/pull/944#discussion_r406877810", "bodyText": "I added prefetch to the code in case we want to enable it in the future. However, we do not use it here. At the end of the day, I think intersection does not matter and here we only need to register what user requested. Please let me know if that answers your question.", "author": "alirezazamani", "createdAt": "2020-04-10T18:11:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1ODQxOA=="}], "type": "inlineReview"}, {"oid": "c16d241a2a4f8a65e5df3da88ad2ec42253b091a", "url": "https://github.com/apache/helix/commit/c16d241a2a4f8a65e5df3da88ad2ec42253b091a", "message": "Add registration logic for CustomizedView listeners\n\nIn this commit, a new logic is added which target the scenario where user\ndisables and enables specific types. In this case, since the CustomizedView\npath for that type is removed by the controller, the router looses its\nlistener. In this commit, we added root change lister and re-registers the\nlistens again.", "committedDate": "2020-04-10T19:18:01Z", "type": "commit"}, {"oid": "c16d241a2a4f8a65e5df3da88ad2ec42253b091a", "url": "https://github.com/apache/helix/commit/c16d241a2a4f8a65e5df3da88ad2ec42253b091a", "message": "Add registration logic for CustomizedView listeners\n\nIn this commit, a new logic is added which target the scenario where user\ndisables and enables specific types. In this case, since the CustomizedView\npath for that type is removed by the controller, the router looses its\nlistener. In this commit, we added root change lister and re-registers the\nlistens again.", "committedDate": "2020-04-10T19:18:01Z", "type": "forcePushed"}]}