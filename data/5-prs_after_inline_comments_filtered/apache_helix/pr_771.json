{"pr_number": 771, "pr_title": "Create metadata-store-directory-common module", "pr_createdAt": "2020-02-17T01:05:58Z", "pr_url": "https://github.com/apache/helix/pull/771", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDAwMTUzMQ==", "url": "https://github.com/apache/helix/pull/771#discussion_r380001531", "bodyText": "This is almost same as REST module. Can we think about how to reduce the redundancy of the code?", "author": "junkaixue", "createdAt": "2020-02-17T06:20:57Z", "path": "metadata-store-directory/src/main/java/org/apache/helix/metadatastore/server/MetadataStoreDirectoryServer.java", "diffHunk": "@@ -0,0 +1,232 @@\n+package org.apache.helix.metadatastore.server;\n+\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import javax.net.ssl.SSLContext;\n+\n+import org.apache.helix.metadatastore.server.common.ContextPropertyKeys;\n+import org.apache.helix.metadatastore.server.common.RestNamespace;\n+import org.apache.helix.metadatastore.server.common.ServletType;\n+import org.apache.helix.metadatastore.server.auditlog.AuditLogger;\n+import org.apache.helix.metadatastore.server.filters.AuditLogFilter;\n+import org.apache.helix.metadatastore.server.filters.CORSFilter;\n+import org.eclipse.jetty.http.HttpVersion;\n+import org.eclipse.jetty.server.HttpConfiguration;\n+import org.eclipse.jetty.server.HttpConnectionFactory;\n+import org.eclipse.jetty.server.SecureRequestCustomizer;\n+import org.eclipse.jetty.server.Server;\n+import org.eclipse.jetty.server.ServerConnector;\n+import org.eclipse.jetty.server.SslConnectionFactory;\n+import org.eclipse.jetty.servlet.ServletContextHandler;\n+import org.eclipse.jetty.servlet.ServletHolder;\n+import org.eclipse.jetty.util.ssl.SslContextFactory;\n+import org.glassfish.jersey.server.ResourceConfig;\n+import org.glassfish.jersey.server.ServerProperties;\n+import org.glassfish.jersey.servlet.ServletContainer;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+\n+public class MetadataStoreDirectoryServer {", "originalCommit": "a95fe06b42c0d0a007d43df5d559aba9667a1389", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDAyMTc5MQ==", "url": "https://github.com/apache/helix/pull/771#discussion_r380021791", "bodyText": "This is because this is a REST deployable itself.\nWe could first make it work/run as a standalone, and think about cutting down more things as necessary. I've tried to remove as much unnecessary code as possible.\nIf you have concrete suggestions, please post them here.", "author": "narendly", "createdAt": "2020-02-17T07:39:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDAwMTUzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDAwMTYwOQ==", "url": "https://github.com/apache/helix/pull/771#discussion_r380001609", "bodyText": "Same here.", "author": "junkaixue", "createdAt": "2020-02-17T06:21:23Z", "path": "metadata-store-directory/src/main/java/org/apache/helix/metadatastore/server/MetadataStoreDirectoryServiceMain.java", "diffHunk": "@@ -0,0 +1,163 @@\n+package org.apache.helix.metadatastore.server;\n+\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.commons.cli.CommandLine;\n+import org.apache.commons.cli.CommandLineParser;\n+import org.apache.commons.cli.GnuParser;\n+import org.apache.commons.cli.HelpFormatter;\n+import org.apache.commons.cli.Option;\n+import org.apache.commons.cli.OptionBuilder;\n+import org.apache.commons.cli.Options;\n+import org.apache.commons.cli.ParseException;\n+import org.apache.helix.metadatastore.server.common.RestNamespace;\n+import org.apache.helix.metadatastore.server.auditlog.auditloggers.FileBasedAuditLogger;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.yaml.snakeyaml.Yaml;\n+\n+\n+public class MetadataStoreDirectoryServiceMain {", "originalCommit": "a95fe06b42c0d0a007d43df5d559aba9667a1389", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDAyMTgxOA==", "url": "https://github.com/apache/helix/pull/771#discussion_r380021818", "bodyText": "This is because this is a REST deployable itself.\nWe could first make it work/run as a standalone, and think about cutting down more things as necessary. I've tried to remove as much unnecessary code as possible.\nIf you have concrete suggestions, please post them here.", "author": "narendly", "createdAt": "2020-02-17T07:39:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDAwMTYwOQ=="}], "type": "inlineReview"}, {"oid": "30e47de7be8ef5cacc8feafd7a27de23c8ac2dbe", "url": "https://github.com/apache/helix/commit/30e47de7be8ef5cacc8feafd7a27de23c8ac2dbe", "message": "Create metadata-store-directory module", "committedDate": "2020-02-20T02:31:39Z", "type": "commit"}, {"oid": "7b786124f5a948e415e3460a05ce58f81adf5209", "url": "https://github.com/apache/helix/commit/7b786124f5a948e415e3460a05ce58f81adf5209", "message": "Remove MSDS from Helix REST", "committedDate": "2020-02-20T02:34:15Z", "type": "commit"}, {"oid": "6ebcdcfcaeef55cf7c81c9345005d3748eb4cb66", "url": "https://github.com/apache/helix/commit/6ebcdcfcaeef55cf7c81c9345005d3748eb4cb66", "message": "Add metadata-store-directory-common", "committedDate": "2020-02-20T02:34:15Z", "type": "commit"}, {"oid": "b0eab92a06f8d1351df0b438c5aa11bed47654ad", "url": "https://github.com/apache/helix/commit/b0eab92a06f8d1351df0b438c5aa11bed47654ad", "message": "Add comments", "committedDate": "2020-02-20T02:34:15Z", "type": "commit"}, {"oid": "06b15bb3ec9dd6406f5a128f5cad6c7ed9862a01", "url": "https://github.com/apache/helix/commit/06b15bb3ec9dd6406f5a128f5cad6c7ed9862a01", "message": "sadf", "committedDate": "2020-02-20T02:34:15Z", "type": "commit"}, {"oid": "a0f54e450e1e68059a5846927e1e30a47c29d272", "url": "https://github.com/apache/helix/commit/a0f54e450e1e68059a5846927e1e30a47c29d272", "message": "Fix", "committedDate": "2020-02-20T02:34:15Z", "type": "commit"}, {"oid": "fff86a19f220b78f45d8a5ed82141198a72f9d53", "url": "https://github.com/apache/helix/commit/fff86a19f220b78f45d8a5ed82141198a72f9d53", "message": "f", "committedDate": "2020-02-20T02:34:15Z", "type": "commit"}, {"oid": "f423e724c883fbd22e9b12891e8980f1f91c73ed", "url": "https://github.com/apache/helix/commit/f423e724c883fbd22e9b12891e8980f1f91c73ed", "message": "remove server module", "committedDate": "2020-02-20T02:34:15Z", "type": "commit"}, {"oid": "6b2ae8ab51bdc3b5c82d114a8836e7b38fd8e7e1", "url": "https://github.com/apache/helix/commit/6b2ae8ab51bdc3b5c82d114a8836e7b38fd8e7e1", "message": "remove", "committedDate": "2020-02-20T02:34:15Z", "type": "commit"}, {"oid": "ba664213f2b6951f5cc116333a2248c9576b413b", "url": "https://github.com/apache/helix/commit/ba664213f2b6951f5cc116333a2248c9576b413b", "message": "merge conflict", "committedDate": "2020-02-20T03:00:54Z", "type": "commit"}, {"oid": "ba664213f2b6951f5cc116333a2248c9576b413b", "url": "https://github.com/apache/helix/commit/ba664213f2b6951f5cc116333a2248c9576b413b", "message": "merge conflict", "committedDate": "2020-02-20T03:00:54Z", "type": "forcePushed"}, {"oid": "0c6ffba622d3a6145820d0cc8d7e55368e8f6516", "url": "https://github.com/apache/helix/commit/0c6ffba622d3a6145820d0cc8d7e55368e8f6516", "message": "fix bug", "committedDate": "2020-02-20T03:03:50Z", "type": "commit"}]}