{"pr_number": 1251, "pr_title": "Add totalMessageReceivedCounter and decrepcate old totalMessageReceived", "pr_createdAt": "2020-08-11T22:35:32Z", "pr_url": "https://github.com/apache/helix/pull/1251", "timeline": [{"oid": "d44674ba2a23110d934c008db091964a4b512cb3", "url": "https://github.com/apache/helix/commit/d44674ba2a23110d934c008db091964a4b512cb3", "message": "Add totalMessageReceivedCounter and decrepcate old totalMessageReceived\n\nCurrently we should have counter type for totalMessageReceived but did not make it correct.\nTo fix this, we should have the a new counter metrics instead of directly changing the metrics for smooth migration.", "committedDate": "2020-08-11T19:22:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA0OTU4NA==", "url": "https://github.com/apache/helix/pull/1251#discussion_r469049584", "bodyText": "Nit: I think it would be good to add here why this needs to be a counter. We could add something like:\nBecause this is a metric indicating a \"total\" count (a.k.a. ever-increasing) value, we want to make sure this metric is a counter. If a gauge is used, the metric might get reset upon a controller switch, which won't be ever-increasing.\nWhat do you think?", "author": "narendly", "createdAt": "2020-08-12T07:07:53Z", "path": "helix-core/src/main/java/org/apache/helix/monitoring/mbeans/ResourceMonitor.java", "diffHunk": "@@ -71,8 +71,9 @@\n   private SimpleDynamicMetric<Long> _successTopStateHandoffCounter;\n   private SimpleDynamicMetric<Long> _failedTopStateHandoffCounter;\n   private SimpleDynamicMetric<Long> _maxSinglePartitionTopStateHandoffDuration;\n-  private SimpleDynamicMetric<Long> _totalMessageReceived;\n-\n+  @Deprecated\n+  private SimpleDynamicMetric<Long> _totalMessageReceived; // This should be counter but it is not now", "originalCommit": "d44674ba2a23110d934c008db091964a4b512cb3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ0MDkyOQ==", "url": "https://github.com/apache/helix/pull/1251#discussion_r469440929", "bodyText": "Sure. Let me add the comment.", "author": "junkaixue", "createdAt": "2020-08-12T17:58:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA0OTU4NA=="}], "type": "inlineReview"}, {"oid": "706377082427c04b6df95a884ef359a06bc45067", "url": "https://github.com/apache/helix/commit/706377082427c04b6df95a884ef359a06bc45067", "message": "Add comments", "committedDate": "2020-08-12T18:00:18Z", "type": "commit"}]}