{"pr_number": 757, "pr_title": "Add write REST endpoints to helix rest for metadata store directory", "pr_createdAt": "2020-02-12T05:35:20Z", "pr_url": "https://github.com/apache/helix/pull/757", "timeline": [{"oid": "eac6a9fe03e24dac5d1fb2318577c0923e72fff7", "url": "https://github.com/apache/helix/commit/eac6a9fe03e24dac5d1fb2318577c0923e72fff7", "message": "Add write REST endpoints to helix rest for metadata store directory service.", "committedDate": "2020-02-12T06:01:56Z", "type": "commit"}, {"oid": "eac6a9fe03e24dac5d1fb2318577c0923e72fff7", "url": "https://github.com/apache/helix/commit/eac6a9fe03e24dac5d1fb2318577c0923e72fff7", "message": "Add write REST endpoints to helix rest for metadata store directory service.", "committedDate": "2020-02-12T06:01:56Z", "type": "forcePushed"}, {"oid": "5a3dc2eee819ada366efe4c24021a1a9b5a1c08a", "url": "https://github.com/apache/helix/commit/5a3dc2eee819ada366efe4c24021a1a9b5a1c08a", "message": "Remove testing log.", "committedDate": "2020-02-12T18:07:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQyMDgzNg==", "url": "https://github.com/apache/helix/pull/757#discussion_r378420836", "bodyText": "Why is this error? Should we make this an info log? And \"updating {} {}\" is not detailed enough.\nSay something like \"Successfully added metadata store realm {} to namespace {}!\"... and put it after the call so we know it succeeded.", "author": "narendly", "createdAt": "2020-02-12T18:04:32Z", "path": "helix-rest/src/main/java/org/apache/helix/rest/server/resources/metadatastore/MetadataStoreDirectoryAccessor.java", "diffHunk": "@@ -84,6 +86,31 @@ public Response getAllMetadataStoreRealms() {\n     return JSONRepresentation(responseMap);\n   }\n \n+  @PUT\n+  @Path(\"/metadata-store-realms/{realm}\")\n+  public Response addMetadataStoreRealm(@PathParam(\"realm\") String realm) {\n+    try {\n+      LOG.error(\"updating {} {}\", _namespace, realm);", "originalCommit": "eac6a9fe03e24dac5d1fb2318577c0923e72fff7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ4MDkwOA==", "url": "https://github.com/apache/helix/pull/757#discussion_r378480908", "bodyText": "It was left for me to debug. I've removed it before you finished the review. But somehow you still saw it.", "author": "huizhilu", "createdAt": "2020-02-12T19:58:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQyMDgzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODYzNjg5MQ==", "url": "https://github.com/apache/helix/pull/757#discussion_r378636891", "bodyText": "Why did we decide to make this a PathParam instead of a QueryParam? I think QueryParam would be easier to use and would minimize unnecessary confusion.", "author": "narendly", "createdAt": "2020-02-13T03:41:57Z", "path": "helix-rest/src/main/java/org/apache/helix/rest/server/resources/metadatastore/MetadataStoreDirectoryAccessor.java", "diffHunk": "@@ -124,7 +148,34 @@ public Response getShardingKeys(@QueryParam(\"realm\") String realm) {\n     return JSONRepresentation(responseMap);\n   }\n \n-  private void getHelixNamespace() {\n+  @PUT\n+  @Path(\"/metadata-store-realms/{realm}/sharding-keys/{sharding-key: .+}\")", "originalCommit": "5a3dc2eee819ada366efe4c24021a1a9b5a1c08a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODYzODc5NA==", "url": "https://github.com/apache/helix/pull/757#discussion_r378638794", "bodyText": "I actually take this back. I think this approach makes sense - the fact that sharding key strings contain \"/\"s threw me off. Resolving.", "author": "narendly", "createdAt": "2020-02-13T03:51:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODYzNjg5MQ=="}], "type": "inlineReview"}, {"oid": "7e4c9d104b4d83e8695dcc2a4b0dd86746394021", "url": "https://github.com/apache/helix/commit/7e4c9d104b4d83e8695dcc2a4b0dd86746394021", "message": "Fix tests, remove deprecates and warnings.", "committedDate": "2020-02-13T05:11:59Z", "type": "commit"}, {"oid": "3d0d045f0ba22e4e6fbe0ca563e9608d188d30cf", "url": "https://github.com/apache/helix/commit/3d0d045f0ba22e4e6fbe0ca563e9608d188d30cf", "message": "Add requests should return created response.", "committedDate": "2020-02-13T05:39:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMTI3MQ==", "url": "https://github.com/apache/helix/pull/757#discussion_r379121271", "bodyText": "Nit: a good addition to this would be a TestHelper.verify() that checks that the deletion has completed.", "author": "narendly", "createdAt": "2020-02-13T21:12:59Z", "path": "helix-rest/src/test/java/org/apache/helix/rest/metadatastore/accessor/TestZkRoutingDataReader.java", "diffHunk": "@@ -42,12 +42,16 @@\n \n   @BeforeClass\n   public void beforeClass() {\n+    ZK_SERVER_MAP.get(ZK_ADDR).getZkClient()\n+        .deleteRecursively(MetadataStoreRoutingConstants.ROUTING_DATA_PATH);", "originalCommit": "3d0d045f0ba22e4e6fbe0ca563e9608d188d30cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyNTExMA==", "url": "https://github.com/apache/helix/pull/757#discussion_r379125110", "bodyText": "This should be a must because I believe there would be a latency for write -> read. I will add them once we have write operations ready and enable the asserts", "author": "huizhilu", "createdAt": "2020-02-13T21:21:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMTI3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMTMzNA==", "url": "https://github.com/apache/helix/pull/757#discussion_r379121334", "bodyText": "Nit: a good addition to this would be a TestHelper.verify() that checks that the deletion has completed.", "author": "narendly", "createdAt": "2020-02-13T21:13:06Z", "path": "helix-rest/src/test/java/org/apache/helix/rest/metadatastore/accessor/TestZkRoutingDataReader.java", "diffHunk": "@@ -42,12 +42,16 @@\n \n   @BeforeClass\n   public void beforeClass() {\n+    ZK_SERVER_MAP.get(ZK_ADDR).getZkClient()\n+        .deleteRecursively(MetadataStoreRoutingConstants.ROUTING_DATA_PATH);\n     _zkRoutingDataReader = new ZkRoutingDataReader(DUMMY_NAMESPACE, ZK_ADDR, null);\n   }\n \n   @AfterClass\n   public void afterClass() {\n     _zkRoutingDataReader.close();\n+    ZK_SERVER_MAP.get(ZK_ADDR).getZkClient()\n+        .deleteRecursively(MetadataStoreRoutingConstants.ROUTING_DATA_PATH);", "originalCommit": "3d0d045f0ba22e4e6fbe0ca563e9608d188d30cf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMTYwNQ==", "url": "https://github.com/apache/helix/pull/757#discussion_r379121605", "bodyText": "Nit: could we avoid static imports and use them inline?", "author": "narendly", "createdAt": "2020-02-13T21:13:40Z", "path": "helix-rest/src/test/java/org/apache/helix/rest/server/resources/zookeeper/TestMetadataStoreDirectoryAccessor.java", "diffHunk": "@@ -27,38 +27,60 @@\n import java.util.List;\n import java.util.Map;\n import java.util.Set;\n+import javax.ws.rs.client.Entity;\n+import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n \n+import com.google.common.collect.ImmutableMap;\n import com.google.common.collect.ImmutableSet;\n-import org.apache.helix.ZNRecord;\n-import org.apache.helix.manager.zk.ZNRecordSerializer;\n+import org.apache.helix.rest.metadatastore.MetadataStoreDirectory;\n+import org.apache.helix.rest.metadatastore.ZkMetadataStoreDirectory;\n import org.apache.helix.rest.metadatastore.constant.MetadataStoreRoutingConstants;\n+import org.apache.helix.rest.metadatastore.exceptions.InvalidRoutingDataException;\n import org.apache.helix.rest.server.AbstractTestClass;\n import org.apache.helix.rest.server.util.JerseyUriRequestBuilder;\n+import org.apache.helix.zookeeper.datamodel.ZNRecord;\n+import org.apache.helix.zookeeper.datamodel.serializer.ZNRecordSerializer;\n import org.testng.Assert;\n import org.testng.annotations.AfterClass;\n import org.testng.annotations.BeforeClass;\n import org.testng.annotations.Test;\n \n+import static org.apache.helix.rest.common.HelixRestNamespace.DEFAULT_NAMESPACE_NAME;\n+", "originalCommit": "3d0d045f0ba22e4e6fbe0ca563e9608d188d30cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMjYwNg==", "url": "https://github.com/apache/helix/pull/757#discussion_r379122606", "bodyText": "Since this is a test class, I am actually fine leaving it in either way if you think this improves readability.", "author": "narendly", "createdAt": "2020-02-13T21:15:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMTYwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE1MDIzNA==", "url": "https://github.com/apache/helix/pull/757#discussion_r379150234", "bodyText": "I don't have strong preference. I will address this in next PR for read endpoints.", "author": "huizhilu", "createdAt": "2020-02-13T22:16:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMTYwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMTk0OQ==", "url": "https://github.com/apache/helix/pull/757#discussion_r379121949", "bodyText": "Could add TestHelper.verify for making the test stable.", "author": "narendly", "createdAt": "2020-02-13T21:14:23Z", "path": "helix-rest/src/test/java/org/apache/helix/rest/server/resources/zookeeper/TestMetadataStoreDirectoryAccessor.java", "diffHunk": "@@ -27,38 +27,60 @@\n import java.util.List;\n import java.util.Map;\n import java.util.Set;\n+import javax.ws.rs.client.Entity;\n+import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n \n+import com.google.common.collect.ImmutableMap;\n import com.google.common.collect.ImmutableSet;\n-import org.apache.helix.ZNRecord;\n-import org.apache.helix.manager.zk.ZNRecordSerializer;\n+import org.apache.helix.rest.metadatastore.MetadataStoreDirectory;\n+import org.apache.helix.rest.metadatastore.ZkMetadataStoreDirectory;\n import org.apache.helix.rest.metadatastore.constant.MetadataStoreRoutingConstants;\n+import org.apache.helix.rest.metadatastore.exceptions.InvalidRoutingDataException;\n import org.apache.helix.rest.server.AbstractTestClass;\n import org.apache.helix.rest.server.util.JerseyUriRequestBuilder;\n+import org.apache.helix.zookeeper.datamodel.ZNRecord;\n+import org.apache.helix.zookeeper.datamodel.serializer.ZNRecordSerializer;\n import org.testng.Assert;\n import org.testng.annotations.AfterClass;\n import org.testng.annotations.BeforeClass;\n import org.testng.annotations.Test;\n \n+import static org.apache.helix.rest.common.HelixRestNamespace.DEFAULT_NAMESPACE_NAME;\n+\n \n public class TestMetadataStoreDirectoryAccessor extends AbstractTestClass {\n   /*\n    * The following are constants to be used for testing.\n    */\n+  private static final String TEST_NAMESPACE_URI_PREFIX = \"/namespaces/\" + TEST_NAMESPACE;\n+  private static final String NON_EXISTING_NAMESPACE_URI_PREFIX =\n+      \"/namespaces/not-existed-namespace/metadata-store-realms/\";\n   private static final String TEST_REALM_1 = \"testRealm1\";\n   private static final List<String> TEST_SHARDING_KEYS_1 =\n       Arrays.asList(\"/sharding/key/1/a\", \"/sharding/key/1/b\", \"/sharding/key/1/c\");\n   private static final String TEST_REALM_2 = \"testRealm2\";\n   private static final List<String> TEST_SHARDING_KEYS_2 =\n       Arrays.asList(\"/sharding/key/1/d\", \"/sharding/key/1/e\", \"/sharding/key/1/f\");\n+  private static final String TEST_REALM_3 = \"testRealm3\";\n+  private static final String TEST_SHARDING_KEY = \"/sharding/key/1/x\";\n \n   // List of all ZK addresses, each of which corresponds to a namespace/routing ZK\n   private List<String> _zkList;\n+  private MetadataStoreDirectory _metadataStoreDirectory;\n \n   @BeforeClass\n-  public void beforeClass() {\n+  public void beforeClass() throws InvalidRoutingDataException {\n     _zkList = new ArrayList<>(ZK_SERVER_MAP.keySet());\n \n+    _zkList.forEach(zk -> ZK_SERVER_MAP.get(zk).getZkClient()\n+        .deleteRecursively(MetadataStoreRoutingConstants.ROUTING_DATA_PATH));", "originalCommit": "3d0d045f0ba22e4e6fbe0ca563e9608d188d30cf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMzE0MA==", "url": "https://github.com/apache/helix/pull/757#discussion_r379123140", "bodyText": "Probably a good idea to add a TestHelper.verify().", "author": "narendly", "createdAt": "2020-02-13T21:17:06Z", "path": "helix-rest/src/test/java/org/apache/helix/rest/server/resources/zookeeper/TestMetadataStoreDirectoryAccessor.java", "diffHunk": "@@ -167,9 +254,58 @@ public void testGetShardingKeysInRealm() throws IOException {\n     Assert.assertEquals(queriedShardingKeys, expectedShardingKeys);\n   }\n \n+  @Test\n+  public void testAddShardingKey() {\n+    Set<String> expectedShardingKeysSet = new HashSet<>(\n+        _metadataStoreDirectory.getAllShardingKeysInRealm(TEST_NAMESPACE, TEST_REALM_1));\n+\n+    Assert.assertFalse(expectedShardingKeysSet.contains(TEST_SHARDING_KEY),\n+        \"Realm does not have sharding key: \" + TEST_SHARDING_KEY);\n+\n+    // Request that gets not found response.\n+    put(NON_EXISTING_NAMESPACE_URI_PREFIX + TEST_REALM_1 + \"/sharding-keys/\" + TEST_SHARDING_KEY,\n+        null, Entity.entity(\"\", MediaType.APPLICATION_JSON_TYPE),\n+        Response.Status.NOT_FOUND.getStatusCode());\n+\n+    // Successful request.\n+    put(TEST_NAMESPACE_URI_PREFIX + \"/metadata-store-realms/\" + TEST_REALM_1 + \"/sharding-keys/\"\n+            + TEST_SHARDING_KEY, null, Entity.entity(\"\", MediaType.APPLICATION_JSON_TYPE),\n+        Response.Status.CREATED.getStatusCode());\n+\n+    Set<String> updatedShardingKeysSet = new HashSet<>(\n+        _metadataStoreDirectory.getAllShardingKeysInRealm(TEST_NAMESPACE, TEST_REALM_1));\n+    expectedShardingKeysSet.add(TEST_SHARDING_KEY);\n+\n+//    Assert.assertEquals(updatedShardingKeysSet, expectedShardingKeysSet);\n+  }\n+\n+  @Test(dependsOnMethods = \"testAddShardingKey\")\n+  public void testDeleteShardingKey() {\n+    Set<String> expectedShardingKeysSet = new HashSet<>(\n+        _metadataStoreDirectory.getAllShardingKeysInRealm(TEST_NAMESPACE, TEST_REALM_1));\n+\n+//    Assert.assertTrue(expectedShardingKeysSet.contains(TEST_SHARDING_KEY),\n+//        \"Realm should have sharding key: \" + TEST_SHARDING_KEY);\n+\n+    // Request that gets not found response.\n+    delete(NON_EXISTING_NAMESPACE_URI_PREFIX + TEST_REALM_1 + \"/sharding-keys/\" + TEST_SHARDING_KEY,\n+        Response.Status.NOT_FOUND.getStatusCode());\n+\n+    // Successful request.\n+    delete(TEST_NAMESPACE_URI_PREFIX + \"/metadata-store-realms/\" + TEST_REALM_1 + \"/sharding-keys/\"\n+        + TEST_SHARDING_KEY, Response.Status.OK.getStatusCode());\n+\n+    Set<String> updatedShardingKeysSet = new HashSet<>(\n+        _metadataStoreDirectory.getAllShardingKeysInRealm(TEST_NAMESPACE, TEST_REALM_1));\n+    expectedShardingKeysSet.remove(TEST_SHARDING_KEY);\n+\n+//    Assert.assertEquals(updatedShardingKeysSet, expectedShardingKeysSet);\n+  }\n+\n   @AfterClass\n   public void afterClass() {\n+    _metadataStoreDirectory.close();\n     _zkList.forEach(zk -> ZK_SERVER_MAP.get(zk).getZkClient()\n-        .deleteRecursive(MetadataStoreRoutingConstants.ROUTING_DATA_PATH));\n+        .deleteRecursively(MetadataStoreRoutingConstants.ROUTING_DATA_PATH));", "originalCommit": "3d0d045f0ba22e4e6fbe0ca563e9608d188d30cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE0OTg1Mg==", "url": "https://github.com/apache/helix/pull/757#discussion_r379149852", "bodyText": "deleteRecursively is a sync blocking call. Once deleteRecursively completes, the path is deleted.", "author": "huizhilu", "createdAt": "2020-02-13T22:15:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyMzE0MA=="}], "type": "inlineReview"}, {"oid": "2331b29092cd0f5ab224aff12798f7e83453b389", "url": "https://github.com/apache/helix/commit/2331b29092cd0f5ab224aff12798f7e83453b389", "message": "Verify routing data path is deleted.", "committedDate": "2020-02-13T23:04:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE3MzEwOA==", "url": "https://github.com/apache/helix/pull/757#discussion_r379173108", "bodyText": "Should we do an Assert.assertTrue on the return value of verify()?", "author": "narendly", "createdAt": "2020-02-13T23:18:26Z", "path": "helix-rest/src/test/java/org/apache/helix/rest/server/resources/zookeeper/TestMetadataStoreDirectoryAccessor.java", "diffHunk": "@@ -167,9 +252,73 @@ public void testGetShardingKeysInRealm() throws IOException {\n     Assert.assertEquals(queriedShardingKeys, expectedShardingKeys);\n   }\n \n+  @Test\n+  public void testAddShardingKey() {\n+    Set<String> expectedShardingKeysSet = new HashSet<>(\n+        _metadataStoreDirectory.getAllShardingKeysInRealm(TEST_NAMESPACE, TEST_REALM_1));\n+\n+    Assert.assertFalse(expectedShardingKeysSet.contains(TEST_SHARDING_KEY),\n+        \"Realm does not have sharding key: \" + TEST_SHARDING_KEY);\n+\n+    // Request that gets not found response.\n+    put(NON_EXISTING_NAMESPACE_URI_PREFIX + TEST_REALM_1 + \"/sharding-keys/\" + TEST_SHARDING_KEY,\n+        null, Entity.entity(\"\", MediaType.APPLICATION_JSON_TYPE),\n+        Response.Status.NOT_FOUND.getStatusCode());\n+\n+    // Successful request.\n+    put(TEST_NAMESPACE_URI_PREFIX + \"/metadata-store-realms/\" + TEST_REALM_1 + \"/sharding-keys/\"\n+            + TEST_SHARDING_KEY, null, Entity.entity(\"\", MediaType.APPLICATION_JSON_TYPE),\n+        Response.Status.CREATED.getStatusCode());\n+\n+    Set<String> updatedShardingKeysSet = new HashSet<>(\n+        _metadataStoreDirectory.getAllShardingKeysInRealm(TEST_NAMESPACE, TEST_REALM_1));\n+    expectedShardingKeysSet.add(TEST_SHARDING_KEY);\n+\n+//    Assert.assertEquals(updatedShardingKeysSet, expectedShardingKeysSet);\n+  }\n+\n+  @Test(dependsOnMethods = \"testAddShardingKey\")\n+  public void testDeleteShardingKey() {\n+    Set<String> expectedShardingKeysSet = new HashSet<>(\n+        _metadataStoreDirectory.getAllShardingKeysInRealm(TEST_NAMESPACE, TEST_REALM_1));\n+\n+//    Assert.assertTrue(expectedShardingKeysSet.contains(TEST_SHARDING_KEY),\n+//        \"Realm should have sharding key: \" + TEST_SHARDING_KEY);\n+\n+    // Request that gets not found response.\n+    delete(NON_EXISTING_NAMESPACE_URI_PREFIX + TEST_REALM_1 + \"/sharding-keys/\" + TEST_SHARDING_KEY,\n+        Response.Status.NOT_FOUND.getStatusCode());\n+\n+    // Successful request.\n+    delete(TEST_NAMESPACE_URI_PREFIX + \"/metadata-store-realms/\" + TEST_REALM_1 + \"/sharding-keys/\"\n+        + TEST_SHARDING_KEY, Response.Status.OK.getStatusCode());\n+\n+    Set<String> updatedShardingKeysSet = new HashSet<>(\n+        _metadataStoreDirectory.getAllShardingKeysInRealm(TEST_NAMESPACE, TEST_REALM_1));\n+    expectedShardingKeysSet.remove(TEST_SHARDING_KEY);\n+\n+//    Assert.assertEquals(updatedShardingKeysSet, expectedShardingKeysSet);\n+  }\n+\n   @AfterClass\n-  public void afterClass() {\n-    _zkList.forEach(zk -> ZK_SERVER_MAP.get(zk).getZkClient()\n-        .deleteRecursive(MetadataStoreRoutingConstants.ROUTING_DATA_PATH));\n+  public void afterClass() throws Exception {\n+    _metadataStoreDirectory.close();\n+    deleteRoutingDataPath();\n+  }\n+\n+  private void deleteRoutingDataPath() throws Exception {", "originalCommit": "2331b29092cd0f5ab224aff12798f7e83453b389", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE3MzE1Nw==", "url": "https://github.com/apache/helix/pull/757#discussion_r379173157", "bodyText": "Should we do an Assert.assertTrue on the return value of verify()?", "author": "narendly", "createdAt": "2020-02-13T23:18:35Z", "path": "helix-rest/src/test/java/org/apache/helix/rest/metadatastore/accessor/TestZkRoutingDataReader.java", "diffHunk": "@@ -130,4 +133,18 @@ public void testGetRoutingDataMSRDChildEmptyValue() {\n               + \". Routing ZooKeeper address: \" + ZK_ADDR));\n     }\n   }\n+\n+  private void deleteRoutingDataPath() throws Exception {", "originalCommit": "2331b29092cd0f5ab224aff12798f7e83453b389", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "66567be5ce18d080c3f9e4eb70f45b085082ffd0", "url": "https://github.com/apache/helix/commit/66567be5ce18d080c3f9e4eb70f45b085082ffd0", "message": "Add assert in after class cleanup.", "committedDate": "2020-02-13T23:27:37Z", "type": "commit"}]}