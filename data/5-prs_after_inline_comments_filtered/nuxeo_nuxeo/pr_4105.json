{"pr_number": 4105, "pr_title": "NXP-27786: rename DocumentMultivaluedProperty.addItem to make it easi\u2026", "pr_createdAt": "2020-06-03T07:21:51Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4105", "timeline": [{"oid": "024819154846cc699d339ddc554bf5ceb68482a4", "url": "https://github.com/nuxeo/nuxeo/commit/024819154846cc699d339ddc554bf5ceb68482a4", "message": "NXP-27786: rename DocumentMultivaluedProperty.addItem to make it easier to find in studio and make it consistant with the name of the opposite remove operation", "committedDate": "2020-06-03T05:57:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3NjIxNA==", "url": "https://github.com/nuxeo/nuxeo/pull/4105#discussion_r434376214", "bodyText": "You must keep the old alias as well.", "author": "efge", "createdAt": "2020-06-03T07:52:50Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/operations/document/AddEntryToMultiValuedProperty.java", "diffHunk": "@@ -41,10 +41,10 @@\n  * @author <a href=\"mailto:bjalon@nuxeo.com\">Benjamin JALON</a>\n  * @since 5.7\n  */\n-@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"AddEntryToMultivaluedProperty\" })\n+@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"DocumentMultivaluedProperty.addItem\" })", "originalCommit": "024819154846cc699d339ddc554bf5ceb68482a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3Njg2OQ==", "url": "https://github.com/nuxeo/nuxeo/pull/4105#discussion_r434376869", "bodyText": "Our convention for operation names is to have an uppercase after the period.", "author": "efge", "createdAt": "2020-06-03T07:54:00Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/operations/document/AddEntryToMultiValuedProperty.java", "diffHunk": "@@ -41,10 +41,10 @@\n  * @author <a href=\"mailto:bjalon@nuxeo.com\">Benjamin JALON</a>\n  * @since 5.7\n  */\n-@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"AddEntryToMultivaluedProperty\" })\n+@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"DocumentMultivaluedProperty.addItem\" })\n public class AddEntryToMultiValuedProperty extends AbstractOperationMultiValuedProperty {\n \n-    public static final String ID = \"DocumentMultivaluedProperty.addItem\";\n+    public static final String ID = \"Document.addEntrytoMultivaluedProperty\";", "originalCommit": "024819154846cc699d339ddc554bf5ceb68482a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM4OTA5NQ==", "url": "https://github.com/nuxeo/nuxeo/pull/4105#discussion_r434389095", "bodyText": "Are we confident to remove AddEntryToMultivaluedProperty alias?", "author": "kevinleturc", "createdAt": "2020-06-03T08:15:31Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/operations/document/AddEntryToMultiValuedProperty.java", "diffHunk": "@@ -41,10 +41,10 @@\n  * @author <a href=\"mailto:bjalon@nuxeo.com\">Benjamin JALON</a>\n  * @since 5.7\n  */\n-@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"AddEntryToMultivaluedProperty\" })\n+@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"DocumentMultivaluedProperty.addItem\" })", "originalCommit": "024819154846cc699d339ddc554bf5ceb68482a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM4OTYxNQ==", "url": "https://github.com/nuxeo/nuxeo/pull/4105#discussion_r434389615", "bodyText": "The other operation is first letter capitalized, we may want to have the same thing:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final String ID = \"Document.addEntrytoMultivaluedProperty\";\n          \n          \n            \n                public static final String ID = \"Document.AddEntrytoMultivaluedProperty\";", "author": "kevinleturc", "createdAt": "2020-06-03T08:16:29Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/operations/document/AddEntryToMultiValuedProperty.java", "diffHunk": "@@ -41,10 +41,10 @@\n  * @author <a href=\"mailto:bjalon@nuxeo.com\">Benjamin JALON</a>\n  * @since 5.7\n  */\n-@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"AddEntryToMultivaluedProperty\" })\n+@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"DocumentMultivaluedProperty.addItem\" })\n public class AddEntryToMultiValuedProperty extends AbstractOperationMultiValuedProperty {\n \n-    public static final String ID = \"DocumentMultivaluedProperty.addItem\";\n+    public static final String ID = \"Document.addEntrytoMultivaluedProperty\";", "originalCommit": "024819154846cc699d339ddc554bf5ceb68482a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "05f43e3423db72b3d98a698d5ea2b2ac1a21d13a", "url": "https://github.com/nuxeo/nuxeo/commit/05f43e3423db72b3d98a698d5ea2b2ac1a21d13a", "message": "NXP-27786: fix operation ID and keep old alias", "committedDate": "2020-06-03T08:35:47Z", "type": "commit"}]}