{"pr_number": 4333, "pr_title": "NXP-29578: correctly initialize the workflow with the given variables", "pr_createdAt": "2020-09-22T14:13:26Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4333", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc3NDE3MQ==", "url": "https://github.com/nuxeo/nuxeo/pull/4333#discussion_r492774171", "bodyText": "This seems brittle, what if there's a \" in the value?", "author": "efge", "createdAt": "2020-09-22T14:20:59Z", "path": "modules/platform/nuxeo-platform-document-routing/nuxeo-routing-rest-api/src/test/java/org/nuxeo/ecm/restapi/server/RoutingRestBaseTest.java", "diffHunk": "@@ -119,6 +126,15 @@ protected String getCreateAndStartWorkflowBodyContent(String workflowName, List<\n             result.append(\"]\");\n         }\n \n+        if (variables != null && !variables.isEmpty()) {\n+            result.append(\", \\\"variables\\\": {\");\n+            result.append(variables.entrySet()\n+                                   .stream()\n+                                   .map(e -> \"\\\"\" + e.getKey() + \"\\\": \\\"\" + e.getValue() + \"\\\"\")", "originalCommit": "2871a4bc36b7011d33879206403fde90cdccf15d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4NzcyMg==", "url": "https://github.com/nuxeo/nuxeo/pull/4333#discussion_r492787722", "bodyText": "It fails :)", "author": "troger", "createdAt": "2020-09-22T14:37:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc3NDE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgwMTUyNw==", "url": "https://github.com/nuxeo/nuxeo/pull/4333#discussion_r492801527", "bodyText": "Ah j'avais pas vu que c'\u00e9tait dans les tests...", "author": "efge", "createdAt": "2020-09-22T14:54:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc3NDE3MQ=="}], "type": "inlineReview"}, {"oid": "959e0841db82af606f459e1f8da252c32c4cd7b5", "url": "https://github.com/nuxeo/nuxeo/commit/959e0841db82af606f459e1f8da252c32c4cd7b5", "message": "NXP-29578: correctly initialize the workflow with the given variables", "committedDate": "2020-09-22T14:37:00Z", "type": "forcePushed"}, {"oid": "10e8120baecda646f9534f69b06ac5d8153016a4", "url": "https://github.com/nuxeo/nuxeo/commit/10e8120baecda646f9534f69b06ac5d8153016a4", "message": "NXP-29578: correctly initialize the workflow with the given variables", "committedDate": "2020-09-22T14:39:27Z", "type": "forcePushed"}, {"oid": "3f7afbdd1b98a1e9d4ef2fcf13719d0a99c2c56f", "url": "https://github.com/nuxeo/nuxeo/commit/3f7afbdd1b98a1e9d4ef2fcf13719d0a99c2c56f", "message": "NXP-29578: cleanup/format", "committedDate": "2020-09-23T09:44:24Z", "type": "commit"}, {"oid": "b536eaa82986274ca36933b67f91f6f2680c3d3a", "url": "https://github.com/nuxeo/nuxeo/commit/b536eaa82986274ca36933b67f91f6f2680c3d3a", "message": "NXP-29578: correctly initialize the workflow with the given variables", "committedDate": "2020-09-23T09:44:56Z", "type": "commit"}, {"oid": "b536eaa82986274ca36933b67f91f6f2680c3d3a", "url": "https://github.com/nuxeo/nuxeo/commit/b536eaa82986274ca36933b67f91f6f2680c3d3a", "message": "NXP-29578: correctly initialize the workflow with the given variables", "committedDate": "2020-09-23T09:44:56Z", "type": "forcePushed"}]}