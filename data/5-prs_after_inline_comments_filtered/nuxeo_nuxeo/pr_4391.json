{"pr_number": 4391, "pr_title": "NXP-29772: Fix list/grid view display when POST method is used by pag\u2026", "pr_createdAt": "2020-10-16T13:45:28Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4391", "timeline": [{"oid": "3d535b096a86eef9bb2dda03179aecd9f3142fc0", "url": "https://github.com/nuxeo/nuxeo/commit/3d535b096a86eef9bb2dda03179aecd9f3142fc0", "message": "NXP-29772: Fix list/grid view display when POST method is used by page providers", "committedDate": "2020-10-16T13:49:47Z", "type": "forcePushed"}, {"oid": "7d89e78bead87772e60bf57905ad19122720ffc0", "url": "https://github.com/nuxeo/nuxeo/commit/7d89e78bead87772e60bf57905ad19122720ffc0", "message": "NXP-29772: Fix list/grid view display when POST method is used by page providers", "committedDate": "2020-10-16T13:53:07Z", "type": "forcePushed"}, {"oid": "52412030793179daa3255a75dc94a85b849090fd", "url": "https://github.com/nuxeo/nuxeo/commit/52412030793179daa3255a75dc94a85b849090fd", "message": "NXP-29772: Fix list/grid view display when POST method is used by page providers", "committedDate": "2020-10-19T09:11:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzYxMjUzMw==", "url": "https://github.com/nuxeo/nuxeo/pull/4391#discussion_r507612533", "bodyText": "Maybe?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    int offset  = 1;\n          \n          \n            \n                    List<JsonNode> documents = session.newRequest(DocumentPageProviderOperation.ID)\n          \n          \n            \n                                                      .set(\"providerName\", \"PageProvider\")\n          \n          \n            \n                                                      .executeReturningDocuments();\n          \n          \n            \n                    assertNotNull(documents);\n          \n          \n            \n                    List<JsonNode> documentsOffset = session.newRequest(DocumentPageProviderOperation.ID)\n          \n          \n            \n                                                      .set(\"providerName\", \"PageProvider\")\n          \n          \n            \n                                                      .set(\"offset\", offset)\n          \n          \n            \n                                                      .executeReturningDocuments();\n          \n          \n            \n                    assertNotNull(documentsOffset);\n          \n          \n            \n                    assertEquals(documents.get(offset),documentsOffset.get(0));\n          \n          \n            \n                    // retrieve first page in order to check if offset is well taken into account\n          \n          \n            \n                    List<JsonNode> documents = session.newRequest(DocumentPageProviderOperation.ID)\n          \n          \n            \n                                                      .set(\"providerName\", \"PageProvider\")\n          \n          \n            \n                                                      .executeReturningDocuments();\n          \n          \n            \n                    assertNotNull(documents);\n          \n          \n            \n                    \n          \n          \n            \n                    int offset  = 1;\n          \n          \n            \n                    List<JsonNode> documentsOffset = session.newRequest(DocumentPageProviderOperation.ID)\n          \n          \n            \n                                                      .set(\"providerName\", \"PageProvider\")\n          \n          \n            \n                                                      .set(\"offset\", offset)\n          \n          \n            \n                                                      .executeReturningDocuments();\n          \n          \n            \n                    assertNotNull(documentsOffset);\n          \n          \n            \n                    assertEquals(documents.get(offset), documentsOffset.get(0));", "author": "kevinleturc", "createdAt": "2020-10-19T09:43:24Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-test/src/test/java/org/nuxeo/ecm/automation/server/test/TestDocumentPageProviderOperation.java", "diffHunk": "@@ -64,4 +64,19 @@ public void testDocumentPageProviderOperation() throws IOException {\n         assertNotNull(documents);\n         assertEquals(1, documents.size());\n     }\n+\n+    @Test\n+    public void testDocumentPageProviderOperationWithOffset() throws IOException {\n+        int offset  = 1;\n+        List<JsonNode> documents = session.newRequest(DocumentPageProviderOperation.ID)\n+                                          .set(\"providerName\", \"PageProvider\")\n+                                          .executeReturningDocuments();\n+        assertNotNull(documents);\n+        List<JsonNode> documentsOffset = session.newRequest(DocumentPageProviderOperation.ID)\n+                                          .set(\"providerName\", \"PageProvider\")\n+                                          .set(\"offset\", offset)\n+                                          .executeReturningDocuments();\n+        assertNotNull(documentsOffset);\n+        assertEquals(documents.get(offset),documentsOffset.get(0));", "originalCommit": "52412030793179daa3255a75dc94a85b849090fd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "963cf8df44d7727e8d03bc6a261101e910b35196", "url": "https://github.com/nuxeo/nuxeo/commit/963cf8df44d7727e8d03bc6a261101e910b35196", "message": "NXP-29772: Fix list/grid view display when POST method is used by page providers", "committedDate": "2020-10-19T13:39:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1ODQ4OQ==", "url": "https://github.com/nuxeo/nuxeo/pull/4391#discussion_r507758489", "bodyText": "There's a tiny format issue:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertEquals(documents.get(offset),documentsOffset.get(0));\n          \n          \n            \n                    assertEquals(documents.get(offset), documentsOffset.get(0));", "author": "kevinleturc", "createdAt": "2020-10-19T13:45:33Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-test/src/test/java/org/nuxeo/ecm/automation/server/test/TestDocumentPageProviderOperation.java", "diffHunk": "@@ -64,4 +64,21 @@ public void testDocumentPageProviderOperation() throws IOException {\n         assertNotNull(documents);\n         assertEquals(1, documents.size());\n     }\n+\n+    @Test\n+    public void testDocumentPageProviderOperationWithOffset() throws IOException {\n+        // retrieve first page in order to check if offset is well taken into account\n+        List<JsonNode> documents = session.newRequest(DocumentPageProviderOperation.ID)\n+                                          .set(\"providerName\", \"PageProvider\")\n+                                          .executeReturningDocuments();\n+        assertNotNull(documents);\n+\n+        int offset  = 1;\n+        List<JsonNode> documentsOffset = session.newRequest(DocumentPageProviderOperation.ID)\n+                                          .set(\"providerName\", \"PageProvider\")\n+                                          .set(\"offset\", offset)\n+                                          .executeReturningDocuments();\n+        assertNotNull(documentsOffset);\n+        assertEquals(documents.get(offset),documentsOffset.get(0));", "originalCommit": "963cf8df44d7727e8d03bc6a261101e910b35196", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "107071b297951f4f045f60306e4079f294797a65", "url": "https://github.com/nuxeo/nuxeo/commit/107071b297951f4f045f60306e4079f294797a65", "message": "NXP-29772: Fix list/grid view display when POST method is used by page providers", "committedDate": "2020-10-19T13:47:24Z", "type": "forcePushed"}, {"oid": "28dcf5bec7fbf109b282e233ce49e5296d9f2c48", "url": "https://github.com/nuxeo/nuxeo/commit/28dcf5bec7fbf109b282e233ce49e5296d9f2c48", "message": "NXP-29772: Fix list/grid view display when POST method is used by page providers", "committedDate": "2020-10-28T09:26:30Z", "type": "commit"}, {"oid": "28dcf5bec7fbf109b282e233ce49e5296d9f2c48", "url": "https://github.com/nuxeo/nuxeo/commit/28dcf5bec7fbf109b282e233ce49e5296d9f2c48", "message": "NXP-29772: Fix list/grid view display when POST method is used by page providers", "committedDate": "2020-10-28T09:26:30Z", "type": "forcePushed"}]}