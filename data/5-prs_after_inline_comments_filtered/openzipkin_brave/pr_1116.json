{"pr_number": 1116, "pr_title": "Fixes accidental parse fail when trace ID is padded right", "pr_createdAt": "2020-03-19T07:43:30Z", "pr_url": "https://github.com/openzipkin/brave/pull/1116", "timeline": [{"oid": "0421aab866ce9db559d8926f18a88c03b32af724", "url": "https://github.com/openzipkin/brave/commit/0421aab866ce9db559d8926f18a88c03b32af724", "message": "Fixes accidental parse fail when trace ID is padded right\n\nPadding the right side of the trace ID with zeros is bad practice, but\nit should be permitted. This changes the code and tests to ensure we\ndon't accidentally fail.", "committedDate": "2020-03-19T07:42:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgzOTg0Ng==", "url": "https://github.com/openzipkin/brave/pull/1116#discussion_r394839846", "bodyText": "later, we could consider sneaky sharing between b3 single format and here, as the parsing requirements are similar", "author": "codefromthecrypt", "createdAt": "2020-03-19T07:45:44Z", "path": "brave/src/main/java/brave/propagation/TraceContext.java", "diffHunk": "@@ -445,21 +445,30 @@ boolean invalidIdLength(Object key, int length, int max) {\n       return true;\n     }\n \n-    boolean isNull(Object key, String maybeNull) {\n+    static boolean isNull(Object key, String maybeNull) {\n       if (maybeNull != null) return false;\n       Platform.get().log(\"{0} was null\", key, null);\n       return true;\n     }\n \n-    void maybeLogNotLowerHex(String notLowerHex) {\n+    /** Helps differentiate a parse failure from a successful parse of all zeros. */\n+    static boolean isAllZeros(String value, int beginIndex, int endIndex) {", "originalCommit": "0421aab866ce9db559d8926f18a88c03b32af724", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDg0NzQ5OA==", "url": "https://github.com/openzipkin/brave/pull/1116#discussion_r394847498", "bodyText": "I definitely want to refactor this afterwards as it is annoying. for now, just fixing the bug", "author": "codefromthecrypt", "createdAt": "2020-03-19T08:04:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgzOTg0Ng=="}], "type": "inlineReview"}, {"oid": "83ee67a85c9349dcce9ee9d37503f460e03fb14d", "url": "https://github.com/openzipkin/brave/commit/83ee67a85c9349dcce9ee9d37503f460e03fb14d", "message": "ensures logging when using builder (b3 multi uses this)", "committedDate": "2020-03-19T08:03:30Z", "type": "commit"}]}