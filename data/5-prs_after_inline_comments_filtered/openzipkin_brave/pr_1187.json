{"pr_number": 1187, "pr_title": "Extracts ValueUpdater from ExtraBaggageFields for use in decoding", "pr_createdAt": "2020-05-03T11:36:12Z", "pr_url": "https://github.com/openzipkin/brave/pull/1187", "timeline": [{"oid": "f6b6035c7944d7dba926cb395472abec1f63d849", "url": "https://github.com/openzipkin/brave/commit/f6b6035c7944d7dba926cb395472abec1f63d849", "message": "Extracts ValueUpdater from ExtraBaggageFields for use in decoding\n\nThis addresses a design problem where we formerly leaked an internal\ntype for baggage decoding. Even though BaggageCodec is not yet public,\nit is in progress to become so. Cleaning this up paves the way for us\nto expose it.\n\nSee https://github.com/openzipkin/brave/pull/1182#issuecomment-621575987", "committedDate": "2020-05-03T11:35:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA5MDU5Ng==", "url": "https://github.com/openzipkin/brave/pull/1187#discussion_r419090596", "bodyText": "notice only change is @Override", "author": "codefromthecrypt", "createdAt": "2020-05-03T11:37:53Z", "path": "brave/src/main/java/brave/internal/baggage/ExtraBaggageFields.java", "diffHunk": "@@ -69,16 +69,7 @@ public boolean isDynamic() {\n     return internal.getValue(field);\n   }\n \n-  /**\n-   * Updates a state object to include a value change.\n-   *\n-   * @param field the field that was updated\n-   * @param value {@code null} means remove the mapping to this field.\n-   * @return true implies a a change in the underlying state\n-   * @see BaggageField#updateValue(TraceContext, String)\n-   * @see BaggageField#updateValue(TraceContextOrSamplingFlags, String)\n-   */\n-  public boolean updateValue(BaggageField field, @Nullable String value) {\n+  @Override public boolean updateValue(BaggageField field, @Nullable String value) {", "originalCommit": "f6b6035c7944d7dba926cb395472abec1f63d849", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d2320cf7e905b5ec0098be7651a51dfb4d139e9e", "url": "https://github.com/openzipkin/brave/commit/d2320cf7e905b5ec0098be7651a51dfb4d139e9e", "message": "adjusts rationale as the logic is wrong", "committedDate": "2020-05-03T13:34:27Z", "type": "commit"}, {"oid": "2cf5d0a440331a942b9bc91f1c66226cb68e57e8", "url": "https://github.com/openzipkin/brave/commit/2cf5d0a440331a942b9bc91f1c66226cb68e57e8", "message": "too much delete", "committedDate": "2020-05-03T13:41:08Z", "type": "commit"}, {"oid": "469b8ce7cef12fa37e753089c9511fc0bd2e28ec", "url": "https://github.com/openzipkin/brave/commit/469b8ce7cef12fa37e753089c9511fc0bd2e28ec", "message": "completes rationale", "committedDate": "2020-05-04T00:34:28Z", "type": "commit"}, {"oid": "52ae02375cebfcb89a73560c46b3b3e791b5230b", "url": "https://github.com/openzipkin/brave/commit/52ae02375cebfcb89a73560c46b3b3e791b5230b", "message": "missed backtick", "committedDate": "2020-05-04T00:55:02Z", "type": "commit"}, {"oid": "9f1c3e0d1a4132941a42fefd662b7ae8b8707f14", "url": "https://github.com/openzipkin/brave/commit/9f1c3e0d1a4132941a42fefd662b7ae8b8707f14", "message": "double-negative", "committedDate": "2020-05-04T00:56:54Z", "type": "commit"}, {"oid": "04043d20d1c0dcac1daad10baeb0dc838c5b00c8", "url": "https://github.com/openzipkin/brave/commit/04043d20d1c0dcac1daad10baeb0dc838c5b00c8", "message": "typo", "committedDate": "2020-05-04T00:57:49Z", "type": "commit"}, {"oid": "f4db647004e35ee05214105f45b86dd124a6e525", "url": "https://github.com/openzipkin/brave/commit/f4db647004e35ee05214105f45b86dd124a6e525", "message": "typo", "committedDate": "2020-05-04T00:58:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE5MzczMQ==", "url": "https://github.com/openzipkin/brave/pull/1187#discussion_r419193731", "bodyText": "Override toString too?", "author": "anuraaga", "createdAt": "2020-05-04T02:32:45Z", "path": "brave/src/main/java/brave/baggage/BaggageField.java", "diffHunk": "@@ -101,6 +101,31 @@\n  * @since 5.11\n  */\n public final class BaggageField {\n+  /**\n+   * Used to decouple baggage value updates from {@link TraceContext} or {@link\n+   * TraceContextOrSamplingFlags} storage.\n+   *\n+   * @since 5.12\n+   */\n+  public interface ValueUpdater {\n+    /** @since 5.12 */\n+    ValueUpdater NOOP = new ValueUpdater() {", "originalCommit": "f4db647004e35ee05214105f45b86dd124a6e525", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "66da8e9a383e659a342f37f04f3f681501f3640e", "url": "https://github.com/openzipkin/brave/commit/66da8e9a383e659a342f37f04f3f681501f3640e", "message": "normalizes comments", "committedDate": "2020-05-04T02:51:19Z", "type": "commit"}, {"oid": "b6e259b6870fe6cb4edb1a0dd84c2e431c86c0fa", "url": "https://github.com/openzipkin/brave/commit/b6e259b6870fe6cb4edb1a0dd84c2e431c86c0fa", "message": "users are allowed to know things :D", "committedDate": "2020-05-04T03:43:49Z", "type": "commit"}]}