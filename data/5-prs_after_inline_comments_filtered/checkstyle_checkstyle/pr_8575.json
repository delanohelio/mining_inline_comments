{"pr_number": 8575, "pr_title": "Issue #8505: Records Support check update for JavaNCSSCheck", "pr_createdAt": "2020-07-29T01:26:41Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8575", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk4NTIzMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8575#discussion_r461985230", "bodyText": "I chose 500 somewhat arbitrarily;  if anyone objects we can just set it to 1500, which is the max for classes.  In my mind, a record should be more brief than a class, so it made sense to set the default at one-third the length of a class.", "author": "nmancus1", "createdAt": "2020-07-29T01:30:21Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/metrics/JavaNCSSCheck.java", "diffHunk": "@@ -211,6 +226,9 @@\n     /** Default constant for max file ncss. */\n     private static final int CLASS_MAX_NCSS = 1500;\n \n+    /** Default constant for max record ncss. */\n+    private static final int RECORD_MAX_NCSS = 500;", "originalCommit": "45580ff0a4952cbae2968e2e000c3ab56e95e358", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA2MTk5OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8575#discussion_r462061998", "bodyText": "I agree. 150 is a more reasonable limit.", "author": "pbludov", "createdAt": "2020-07-29T06:15:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk4NTIzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk4NTY5Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8575#discussion_r461985692", "bodyText": "I needed to create this to reduce cyclomatic complexity in the leaveToken() method, so I also used this method in the visitToken() method.", "author": "nmancus1", "createdAt": "2020-07-29T01:32:13Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/metrics/JavaNCSSCheck.java", "diffHunk": "@@ -453,6 +495,18 @@ private static boolean isExpressionCountable(DetailAST ast) {\n         return countable;\n     }\n \n+    /**\n+     * Checks if a token is a method, constructor, or compact constructor definition.\n+     *\n+     * @param tokenType the type of token we are checking\n+     * @return true if token type is method or ctor definition, false otherwise\n+     */\n+    private static boolean isMethodOrCtorDefinition(int tokenType) {", "originalCommit": "45580ff0a4952cbae2968e2e000c3ab56e95e358", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA1NDg0Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8575#discussion_r462054846", "bodyText": "Why not move all five tokens here? Compact ctor's are more like \"instance init\" than methods.", "author": "pbludov", "createdAt": "2020-07-29T05:54:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk4NTY5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM2OTcyOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8575#discussion_r462369729", "bodyText": "I thought about that, but honestly I couldn't think of a good name for the method.", "author": "nmancus1", "createdAt": "2020-07-29T15:03:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk4NTY5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxNDcwNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8575#discussion_r462414705", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-29T16:05:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk4NTY5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxNDk1MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8575#discussion_r462414951", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-29T16:05:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk4NTY5Mg=="}], "type": "inlineReview"}, {"oid": "b689d2408e2fd035703b4b20b2947893ae25c87f", "url": "https://github.com/checkstyle/checkstyle/commit/b689d2408e2fd035703b4b20b2947893ae25c87f", "message": "Issue #8505: Records Support check update for JavaNCSSCheck", "committedDate": "2020-07-29T01:38:56Z", "type": "forcePushed"}, {"oid": "1780148ac60e16e56d3b8a38285c61982f0f4a81", "url": "https://github.com/checkstyle/checkstyle/commit/1780148ac60e16e56d3b8a38285c61982f0f4a81", "message": "Issue #8505: Records Support check update for JavaNCSSCheck", "committedDate": "2020-07-29T02:04:31Z", "type": "forcePushed"}, {"oid": "08ba501c910aa0893bcb91a8da9f1816becf1177", "url": "https://github.com/checkstyle/checkstyle/commit/08ba501c910aa0893bcb91a8da9f1816becf1177", "message": "Issue #8505: Records Support check update for JavaNCSSCheck", "committedDate": "2020-07-29T16:01:22Z", "type": "forcePushed"}, {"oid": "11eceab27050c539160e0e040b27cdc3ed458ed2", "url": "https://github.com/checkstyle/checkstyle/commit/11eceab27050c539160e0e040b27cdc3ed458ed2", "message": "Issue #8505: Records Support check update for JavaNCSSCheck", "committedDate": "2020-08-06T16:41:21Z", "type": "forcePushed"}, {"oid": "f261005ec08ba568b49c0e7d4f305673f774b6f8", "url": "https://github.com/checkstyle/checkstyle/commit/f261005ec08ba568b49c0e7d4f305673f774b6f8", "message": "Issue #8505: Records Support check update for JavaNCSSCheck", "committedDate": "2020-08-07T01:45:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYzNTkzMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8575#discussion_r467635931", "bodyText": "are you sure we need this ? we suppose to not run any other Checks over inputs.", "author": "romani", "createdAt": "2020-08-09T22:26:21Z", "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/metrics/javancss/InputJavaNCSSRecordsAndCompactCtors.java", "diffHunk": "@@ -0,0 +1,180 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.metrics.javancss; // violation for file\n+\n+import java.time.LocalDateTime;\n+\n+/* Config:\n+ * methodMaximum = 7\n+ * classMaximum = 3\n+ * fileMaximum = 2\n+ * recordMaximum = 4\n+ */\n+// -@cs[AbbreviationAsWordInName] We can not change it as,", "originalCommit": "f261005ec08ba568b49c0e7d4f305673f774b6f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODU3MTIyMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8575#discussion_r468571222", "bodyText": "You are correct, fixed.", "author": "nmancus1", "createdAt": "2020-08-11T13:17:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYzNTkzMQ=="}], "type": "inlineReview"}, {"oid": "00746ee82666c019c9154f825e643805c72d8598", "url": "https://github.com/checkstyle/checkstyle/commit/00746ee82666c019c9154f825e643805c72d8598", "message": "Issue #8505: Records Support check update for JavaNCSSCheck", "committedDate": "2020-08-11T13:17:15Z", "type": "commit"}, {"oid": "00746ee82666c019c9154f825e643805c72d8598", "url": "https://github.com/checkstyle/checkstyle/commit/00746ee82666c019c9154f825e643805c72d8598", "message": "Issue #8505: Records Support check update for JavaNCSSCheck", "committedDate": "2020-08-11T13:17:15Z", "type": "forcePushed"}]}