{"pr_number": 8595, "pr_title": "Issue #8748: Create new check RecordComponentNumberCheck", "pr_createdAt": "2020-08-03T12:40:52Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8595", "timeline": [{"oid": "ebb61996ce6276e304d01b1cfc9ee0e652a861b1", "url": "https://github.com/checkstyle/checkstyle/commit/ebb61996ce6276e304d01b1cfc9ee0e652a861b1", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-03T12:57:03Z", "type": "forcePushed"}, {"oid": "75507e697143cb274bf11df71de6657b40bab073", "url": "https://github.com/checkstyle/checkstyle/commit/75507e697143cb274bf11df71de6657b40bab073", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-03T16:26:59Z", "type": "forcePushed"}, {"oid": "f887b4c37f895a0c1513ede49e92df0d6859ab2c", "url": "https://github.com/checkstyle/checkstyle/commit/f887b4c37f895a0c1513ede49e92df0d6859ab2c", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-07T13:28:17Z", "type": "forcePushed"}, {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4", "url": "https://github.com/checkstyle/checkstyle/commit/30418fdfc7295981ad166a7282ecfc5c1969eee4", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-07T15:21:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NjgxNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467486817", "bodyText": "This can be done using TokenUtils::forEachChild", "author": "pbludov", "createdAt": "2020-08-08T17:33:48Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,356 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPackage} - Specify the maximum number of {@code package} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxProtected} - Specify the maximum number of {@code protected} components\n+ * allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPublic} - Specify the maximum number of {@code public} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all scope levels for a record definition:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPackage\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxProtected\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"3\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"10\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.packageComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.privateComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.protectedComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.publicComponents}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PRIVATE_COMPONENTS = \"too.many.privateComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PACKAGE_COMPONENTS = \"too.many.packageComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PROTECTED_COMPONENTS = \"too.many.protectedComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PUBLIC_COMPONENTS = \"too.many.publicComponents\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of {@code private} components allowed. */\n+    private int maxPrivate = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code package} components allowed. */\n+    private int maxPackage = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code protected} components allowed. */\n+    private int maxProtected = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code public} components allowed. */\n+    private int maxPublic = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Setter to specify the maximum number of {@code private} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPrivate(int value) {\n+        maxPrivate = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code package} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPackage(int value) {\n+        maxPackage = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code protected} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxProtected(int value) {\n+        maxProtected = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code public} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPublic(int value) {\n+        maxPublic = value;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     *\n+     */\n+    private static void countComponents(ComponentCounter counter, DetailAST ast) {\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+        final DetailAST modifiers =\n+                ast.findFirstToken(TokenTypes.MODIFIERS);\n+\n+        counter.setScope(ScopeUtil.getScopeFromMods(modifiers));\n+\n+        DetailAST componentToCount =", "originalCommit": "30418fdfc7295981ad166a7282ecfc5c1969eee4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc0ODM2NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r468748364", "bodyText": "Can you give me an example?  forEachChild() performs an action on each child, I'm not sure how that applies here.", "author": "nmancus1", "createdAt": "2020-08-11T17:32:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NjgxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNDc2MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r469034761", "bodyText": "TokenUtil.forEachChild(recordComponents,\n                TokenTypes.RECORD_COMPONENT_DEF, node -> counter.increment());\nWhat your code actually does:\n\nFor each child from the first child find one with type==TokenTypes.RECORD_COMPONENT_DEF.\nDouble check the type. Then increment the counter.\nloop over the rest of children\nIt can be simplified to\n\n        DetailAST componentToCount = recordComponents.getFirstChild();\n        while (componentToCount != null) {\n            if (componentToCount.getType() == TokenTypes.RECORD_COMPONENT_DEF) {\n                counter.increment();\n            }\n            componentToCount = componentToCount.getNextSibling();\n        }\n... and this is exactly what TokenUtils::forEachChild does:\n\nloop for each child\ncompare type\nif match, invoke callback", "author": "pbludov", "createdAt": "2020-08-12T06:34:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NjgxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTIwMTgyNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r469201827", "bodyText": "Thanks a lot, @pbludov .  It is done.", "author": "nmancus1", "createdAt": "2020-08-12T11:53:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NjgxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4Nzc1NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467487754", "bodyText": "Now the indent is a single space. Please revert or reformat this expression completely, may be\nfor (DetailAST token = aMods.getFirstChild();\n        token != null && returnValue == Scope.PACKAGE;\n        token = token.getNextSibling()) {\n    if (\"public\".equals(token.getText())) {\n?", "author": "pbludov", "createdAt": "2020-08-08T17:45:15Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/utils/ScopeUtil.java", "diffHunk": "@@ -44,7 +44,7 @@ public static Scope getScopeFromMods(DetailAST aMods) {\n         Scope returnValue = Scope.PACKAGE;\n         for (DetailAST token = aMods.getFirstChild(); token != null\n                 && returnValue == Scope.PACKAGE;\n-                token = token.getNextSibling()) {\n+             token = token.getNextSibling()) {", "originalCommit": "30418fdfc7295981ad166a7282ecfc5c1969eee4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc1NDEwNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r468754107", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-08-11T17:42:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4Nzc1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4Nzg0MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467487841", "bodyText": "Extra blank line in the end of the comment", "author": "pbludov", "createdAt": "2020-08-08T17:46:30Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,356 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPackage} - Specify the maximum number of {@code package} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxProtected} - Specify the maximum number of {@code protected} components\n+ * allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPublic} - Specify the maximum number of {@code public} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all scope levels for a record definition:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPackage\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxProtected\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"3\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"10\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.packageComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.privateComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.protectedComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.publicComponents}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PRIVATE_COMPONENTS = \"too.many.privateComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PACKAGE_COMPONENTS = \"too.many.packageComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PROTECTED_COMPONENTS = \"too.many.protectedComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PUBLIC_COMPONENTS = \"too.many.publicComponents\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of {@code private} components allowed. */\n+    private int maxPrivate = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code package} components allowed. */\n+    private int maxPackage = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code protected} components allowed. */\n+    private int maxProtected = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code public} components allowed. */\n+    private int maxPublic = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Setter to specify the maximum number of {@code private} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPrivate(int value) {\n+        maxPrivate = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code package} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPackage(int value) {\n+        maxPackage = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code protected} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxProtected(int value) {\n+        maxProtected = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code public} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPublic(int value) {\n+        maxPublic = value;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     *\n+     */\n+    private static void countComponents(ComponentCounter counter, DetailAST ast) {\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+        final DetailAST modifiers =\n+                ast.findFirstToken(TokenTypes.MODIFIERS);\n+\n+        counter.setScope(ScopeUtil.getScopeFromMods(modifiers));\n+\n+        DetailAST componentToCount =\n+                recordComponents.findFirstToken(TokenTypes.RECORD_COMPONENT_DEF);\n+\n+        while (componentToCount != null) {\n+\n+            if (componentToCount.getType() == TokenTypes.RECORD_COMPONENT_DEF) {\n+                counter.increment();\n+            }\n+            componentToCount = componentToCount.getNextSibling();\n+\n+        }\n+\n+    }\n+\n+    /**\n+     * Check the counter and report violations.\n+     *\n+     * @param counter the component counter to check\n+     * @param ast to report violations against.\n+     */\n+    private void checkCounter(ComponentCounter counter, DetailAST ast) {\n+        final Scope scope = counter.getScope();\n+        if (scope == Scope.PRIVATE) {\n+            checkMax(maxPrivate, counter.getTotal(),\n+                    MSG_PRIVATE_COMPONENTS, ast);\n+        }\n+        else if (scope == Scope.PUBLIC) {\n+            checkMax(maxPublic, counter.getTotal(),\n+                    MSG_PUBLIC_COMPONENTS, ast);\n+        }\n+        else if (scope == Scope.PROTECTED) {\n+            checkMax(maxProtected, counter.getTotal(),\n+                    MSG_PROTECTED_COMPONENTS, ast);\n+        }\n+        else {\n+            checkMax(maxPackage, counter.getTotal(),\n+                    MSG_PACKAGE_COMPONENTS, ast);\n+        }\n+    }\n+\n+    /**\n+     * Method for reporting if a maximum has been exceeded.\n+     *\n+     * @param max the maximum allowed value\n+     * @param value the actual value\n+     * @param msg the message to log. Takes two arguments of value and maximum.\n+     * @param ast the AST to associate with the message.\n+     */\n+    private void checkMax(int max, int value, String msg, DetailAST ast) {\n+        if (max < value) {\n+            log(ast, msg, value, max);\n+        }\n+    }\n+\n+    /**\n+     * Counter class used to track the scope of the record definition and the number of\n+     * components in the record component list.\n+     *\n+     */\n+    private static class ComponentCounter {\n+\n+        /** The scope of the record definition. */\n+        private Scope scope;\n+\n+        /** Tracks the total. */\n+        private int total;\n+\n+        /**\n+         * Increments to counter by one.\n+         *", "originalCommit": "30418fdfc7295981ad166a7282ecfc5c1969eee4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc1NDA0MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r468754041", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-08-11T17:42:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4Nzg0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4Nzg4OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467487889", "bodyText": "Extra blank line in the end of the comment", "author": "pbludov", "createdAt": "2020-08-08T17:46:52Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,356 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPackage} - Specify the maximum number of {@code package} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxProtected} - Specify the maximum number of {@code protected} components\n+ * allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPublic} - Specify the maximum number of {@code public} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all scope levels for a record definition:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPackage\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxProtected\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"3\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"10\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.packageComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.privateComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.protectedComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.publicComponents}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PRIVATE_COMPONENTS = \"too.many.privateComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PACKAGE_COMPONENTS = \"too.many.packageComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PROTECTED_COMPONENTS = \"too.many.protectedComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PUBLIC_COMPONENTS = \"too.many.publicComponents\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of {@code private} components allowed. */\n+    private int maxPrivate = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code package} components allowed. */\n+    private int maxPackage = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code protected} components allowed. */\n+    private int maxProtected = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code public} components allowed. */\n+    private int maxPublic = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Setter to specify the maximum number of {@code private} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPrivate(int value) {\n+        maxPrivate = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code package} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPackage(int value) {\n+        maxPackage = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code protected} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxProtected(int value) {\n+        maxProtected = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code public} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPublic(int value) {\n+        maxPublic = value;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     *\n+     */\n+    private static void countComponents(ComponentCounter counter, DetailAST ast) {\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+        final DetailAST modifiers =\n+                ast.findFirstToken(TokenTypes.MODIFIERS);\n+\n+        counter.setScope(ScopeUtil.getScopeFromMods(modifiers));\n+\n+        DetailAST componentToCount =\n+                recordComponents.findFirstToken(TokenTypes.RECORD_COMPONENT_DEF);\n+\n+        while (componentToCount != null) {\n+\n+            if (componentToCount.getType() == TokenTypes.RECORD_COMPONENT_DEF) {\n+                counter.increment();\n+            }\n+            componentToCount = componentToCount.getNextSibling();\n+\n+        }\n+\n+    }\n+\n+    /**\n+     * Check the counter and report violations.\n+     *\n+     * @param counter the component counter to check\n+     * @param ast to report violations against.\n+     */\n+    private void checkCounter(ComponentCounter counter, DetailAST ast) {\n+        final Scope scope = counter.getScope();\n+        if (scope == Scope.PRIVATE) {\n+            checkMax(maxPrivate, counter.getTotal(),\n+                    MSG_PRIVATE_COMPONENTS, ast);\n+        }\n+        else if (scope == Scope.PUBLIC) {\n+            checkMax(maxPublic, counter.getTotal(),\n+                    MSG_PUBLIC_COMPONENTS, ast);\n+        }\n+        else if (scope == Scope.PROTECTED) {\n+            checkMax(maxProtected, counter.getTotal(),\n+                    MSG_PROTECTED_COMPONENTS, ast);\n+        }\n+        else {\n+            checkMax(maxPackage, counter.getTotal(),\n+                    MSG_PACKAGE_COMPONENTS, ast);\n+        }\n+    }\n+\n+    /**\n+     * Method for reporting if a maximum has been exceeded.\n+     *\n+     * @param max the maximum allowed value\n+     * @param value the actual value\n+     * @param msg the message to log. Takes two arguments of value and maximum.\n+     * @param ast the AST to associate with the message.\n+     */\n+    private void checkMax(int max, int value, String msg, DetailAST ast) {\n+        if (max < value) {\n+            log(ast, msg, value, max);\n+        }\n+    }\n+\n+    /**\n+     * Counter class used to track the scope of the record definition and the number of\n+     * components in the record component list.\n+     *", "originalCommit": "30418fdfc7295981ad166a7282ecfc5c1969eee4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc1Mzk4Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r468753986", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-08-11T17:42:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4Nzg4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NzkxMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467487910", "bodyText": "Extra blank line in the end of the comment", "author": "pbludov", "createdAt": "2020-08-08T17:47:05Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,356 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPackage} - Specify the maximum number of {@code package} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxProtected} - Specify the maximum number of {@code protected} components\n+ * allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPublic} - Specify the maximum number of {@code public} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all scope levels for a record definition:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPackage\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxProtected\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"3\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"10\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.packageComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.privateComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.protectedComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.publicComponents}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PRIVATE_COMPONENTS = \"too.many.privateComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PACKAGE_COMPONENTS = \"too.many.packageComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PROTECTED_COMPONENTS = \"too.many.protectedComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PUBLIC_COMPONENTS = \"too.many.publicComponents\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of {@code private} components allowed. */\n+    private int maxPrivate = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code package} components allowed. */\n+    private int maxPackage = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code protected} components allowed. */\n+    private int maxProtected = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code public} components allowed. */\n+    private int maxPublic = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Setter to specify the maximum number of {@code private} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPrivate(int value) {\n+        maxPrivate = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code package} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPackage(int value) {\n+        maxPackage = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code protected} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxProtected(int value) {\n+        maxProtected = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code public} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPublic(int value) {\n+        maxPublic = value;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     *", "originalCommit": "30418fdfc7295981ad166a7282ecfc5c1969eee4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc1Mzg4MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r468753881", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-08-11T17:42:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NzkxMA=="}], "type": "inlineReview"}, {"oid": "cea445cd512b85d7dba44e7dfadbaeb0e1f5ddb9", "url": "https://github.com/checkstyle/checkstyle/commit/cea445cd512b85d7dba44e7dfadbaeb0e1f5ddb9", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-11T17:37:33Z", "type": "forcePushed"}, {"oid": "275d0e1ab44387ee6adf312d3d661b308472005d", "url": "https://github.com/checkstyle/checkstyle/commit/275d0e1ab44387ee6adf312d3d661b308472005d", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-12T11:48:33Z", "type": "forcePushed"}, {"oid": "049d3a74687da4cae8fb0b78468692fb660480e7", "url": "https://github.com/checkstyle/checkstyle/commit/049d3a74687da4cae8fb0b78468692fb660480e7", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-12T11:56:53Z", "type": "forcePushed"}, {"oid": "27230bbf7fe9219c941c082b6dacd08c2a2d1f3c", "url": "https://github.com/checkstyle/checkstyle/commit/27230bbf7fe9219c941c082b6dacd08c2a2d1f3c", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-12T19:37:33Z", "type": "forcePushed"}, {"oid": "4e49ca3e9b23884f19c95994a04142d4040c6f28", "url": "https://github.com/checkstyle/checkstyle/commit/4e49ca3e9b23884f19c95994a04142d4040c6f28", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-14T22:16:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc2MzU0Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r474763546", "bodyText": "it confuse me. I read it as max value of private components in record.\ndid you mean ?\n Property {@code maxInPrivateRecord} - Specify the maximum number of components allowed in {@code private} records.", "author": "romani", "createdAt": "2020-08-21T15:17:05Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,345 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.", "originalCommit": "4e49ca3e9b23884f19c95994a04142d4040c6f28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA1MjQwNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r475052405", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-08-22T06:09:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc2MzU0Ng=="}], "type": "inlineReview"}, {"oid": "082fa3c5dd2ebf5bb772ec38daa878675ae5b804", "url": "https://github.com/checkstyle/checkstyle/commit/082fa3c5dd2ebf5bb772ec38daa878675ae5b804", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-21T17:12:46Z", "type": "forcePushed"}, {"oid": "a81f196e0fc1affd5da98d74ec5e4a5f89d1391d", "url": "https://github.com/checkstyle/checkstyle/commit/a81f196e0fc1affd5da98d74ec5e4a5f89d1391d", "message": "Issue #8521: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-24T14:54:27Z", "type": "forcePushed"}, {"oid": "9c24ade027030ea81d947fd5edbd9cdecd6b49b1", "url": "https://github.com/checkstyle/checkstyle/commit/9c24ade027030ea81d947fd5edbd9cdecd6b49b1", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-24T15:14:06Z", "type": "forcePushed"}, {"oid": "3ed6a15e8e2b8d2ad0b22286d12df4608872602f", "url": "https://github.com/checkstyle/checkstyle/commit/3ed6a15e8e2b8d2ad0b22286d12df4608872602f", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-24T15:55:58Z", "type": "forcePushed"}, {"oid": "33f125bf6434ee48d083d995f2f800da619a55a3", "url": "https://github.com/checkstyle/checkstyle/commit/33f125bf6434ee48d083d995f2f800da619a55a3", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-25T00:59:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjExOTcyMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476119722", "bodyText": "maxComponents", "author": "romani", "createdAt": "2020-08-25T03:35:08Z", "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/recordcomponentnumber/SuppressionXpathRecordComponentNumber2.java", "diffHunk": "@@ -0,0 +1,13 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.sizes.recordcomponentnumber;\n+\n+/* Config:\n+ * maxPublic = 10", "originalCommit": "33f125bf6434ee48d083d995f2f800da619a55a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE1ODQyMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476158423", "bodyText": "maxComponents -> max", "author": "nmancus1", "createdAt": "2020-08-25T04:31:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjExOTcyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTIyNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476179227", "bodyText": "Not done", "author": "romani", "createdAt": "2020-08-25T05:03:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjExOTcyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMTE0MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476121140", "bodyText": "Other properties like this just named max", "author": "romani", "createdAt": "2020-08-25T03:37:22Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,298 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxComponents} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int maxComponents = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxComponents(int value) {", "originalCommit": "33f125bf6434ee48d083d995f2f800da619a55a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE1ODI5NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476158295", "bodyText": "Done.", "author": "nmancus1", "createdAt": "2020-08-25T04:31:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMTE0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMjU3MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476122570", "bodyText": "Please move this to visitToken method, we should see logic in that method", "author": "romani", "createdAt": "2020-08-25T03:39:20Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,298 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxComponents} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int maxComponents = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxComponents(int value) {\n+        maxComponents = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     */\n+    private static void countComponents(ComponentCounter counter, DetailAST ast) {\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+\n+        counter.setAccessModifierOption(getAccessModifier(ast));\n+\n+        TokenUtil.forEachChild(recordComponents,\n+                TokenTypes.RECORD_COMPONENT_DEF, node -> counter.increment());\n+\n+    }\n+\n+    /**\n+     * Check the counter and report violations.\n+     *\n+     * @param counter the component counter to check\n+     * @param ast to report violations against.\n+     */\n+    private void checkCounter(ComponentCounter counter, DetailAST ast) {\n+        if (matchAccessModifiers(counter.getAccessModifierOption())\n+                && counter.getTotal() > maxComponents) {\n+            log(ast, MSG_KEY, counter.getTotal(), maxComponents);", "originalCommit": "33f125bf6434ee48d083d995f2f800da619a55a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE1ODE4MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476158180", "bodyText": "Done.", "author": "nmancus1", "createdAt": "2020-08-25T04:30:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMjU3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMzUwNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476433505", "bodyText": "Improved further.", "author": "nmancus1", "createdAt": "2020-08-25T13:06:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMjU3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMzMxNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476123315", "bodyText": "Return a value from this method", "author": "romani", "createdAt": "2020-08-25T03:40:21Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,298 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxComponents} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int maxComponents = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxComponents(int value) {\n+        maxComponents = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);", "originalCommit": "33f125bf6434ee48d083d995f2f800da619a55a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE1ODA3MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476158070", "bodyText": "I've returned a ComponentCounter, so that we can also track the access modifier associated with the components we are counting.", "author": "nmancus1", "createdAt": "2020-08-25T04:30:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMzMxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMzMyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476433324", "bodyText": "now returning an int, fixed.", "author": "nmancus1", "createdAt": "2020-08-25T13:06:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMzMxNQ=="}], "type": "inlineReview"}, {"oid": "019eb82b788086963d9ea34017e58db8feb72766", "url": "https://github.com/checkstyle/checkstyle/commit/019eb82b788086963d9ea34017e58db8feb72766", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-25T04:28:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTA0Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476179047", "bodyText": "?", "author": "romani", "createdAt": "2020-08-25T05:02:49Z", "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/recordcomponentnumber/SuppressionXpathRecordComponentNumber1.java", "diffHunk": "@@ -0,0 +1,18 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.sizes.recordcomponentnumber;\n+\n+/* Config:\n+ * maxPublic = 8", "originalCommit": "019eb82b788086963d9ea34017e58db8feb72766", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMzgzNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476433837", "bodyText": "Got sleep, and fixed.", "author": "nmancus1", "createdAt": "2020-08-25T13:07:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTA0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTUzNg==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476179536", "bodyText": "Do not even count if modifier is not matching", "author": "romani", "createdAt": "2020-08-25T05:04:45Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,288 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Count record components in this record definition\n+        final ComponentCounter counter = countComponents(ast);\n+\n+        // Check counter and report violations\n+        if (matchAccessModifiers(counter.getAccessModifierOption())", "originalCommit": "019eb82b788086963d9ea34017e58db8feb72766", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMjY2MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476432660", "bodyText": "Much better, done.", "author": "nmancus1", "createdAt": "2020-08-25T13:05:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTUzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTg0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476179843", "bodyText": "Please remove this class, to just count you need single variable.", "author": "romani", "createdAt": "2020-08-25T05:05:46Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,288 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Count record components in this record definition\n+        final ComponentCounter counter = countComponents(ast);\n+\n+        // Check counter and report violations\n+        if (matchAccessModifiers(counter.getAccessModifierOption())\n+            && counter.getTotal() > max) {\n+            log(ast, MSG_KEY, counter.getTotal(), max);\n+        }\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param ast the ast to check\n+     * @return instance of component counter with count of components and\n+     *     access modifier of record definition.\n+     */\n+    private static ComponentCounter countComponents(DetailAST ast) {\n+        final ComponentCounter counter = new ComponentCounter();\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+\n+        counter.setAccessModifierOption(getAccessModifier(ast));\n+\n+        TokenUtil.forEachChild(recordComponents,\n+                TokenTypes.RECORD_COMPONENT_DEF, node -> counter.increment());\n+\n+        return counter;\n+    }\n+\n+    /**\n+     * Returns the access modifier of the record definition at the specified AST. If\n+     * the record definition is in an interface or annotation block,\n+     * the access modifier is assumed to be public.\n+     *\n+     * @param ast the token of the method/constructor.\n+     * @return the access modifier of the method/constructor.\n+     */\n+    private static AccessModifierOption getAccessModifier(final DetailAST ast) {\n+        final DetailAST modsToken = ast.findFirstToken(TokenTypes.MODIFIERS);\n+        return CheckUtil.getAccessModifierFromModifiersToken(modsToken);\n+    }\n+\n+    /**\n+     * Checks whether a record definition has the correct access modifier to be checked.\n+     *\n+     * @param accessModifier the access modifier of the record definition.\n+     * @return whether the record definition matches the expected access modifier.\n+     */\n+    private boolean matchAccessModifiers(final AccessModifierOption accessModifier) {\n+        return Arrays.stream(accessModifiers)\n+                .anyMatch(modifier -> modifier == accessModifier);\n+    }\n+\n+    /**\n+     * Counter class used to track the access modifier of the record definition and the number of\n+     * components in the record component list.\n+     */\n+    private static class ComponentCounter {", "originalCommit": "019eb82b788086963d9ea34017e58db8feb72766", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMjc4OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476432789", "bodyText": "Removed, thank you.", "author": "nmancus1", "createdAt": "2020-08-25T13:05:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTg0Mw=="}], "type": "inlineReview"}, {"oid": "19cac768b89ed40f44678281a48deb477bba6b39", "url": "https://github.com/checkstyle/checkstyle/commit/19cac768b89ed40f44678281a48deb477bba6b39", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-25T13:05:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MDE0MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476470140", "bodyText": "headers why in plural ?\nplease do singular.", "author": "romani", "createdAt": "2020-08-25T13:58:44Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.", "originalCommit": "19cac768b89ed40f44678281a48deb477bba6b39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MTE3OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476541178", "bodyText": "Plural -> singular", "author": "nmancus1", "createdAt": "2020-08-25T15:32:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MDE0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MTc1Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476471757", "bodyText": "it would be awesome to find some link in jdk that explain what is \"header\"", "author": "romani", "createdAt": "2020-08-25T14:00:48Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.", "originalCommit": "19cac768b89ed40f44678281a48deb477bba6b39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MDc5Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476540797", "bodyText": "Linked.", "author": "nmancus1", "createdAt": "2020-08-25T15:31:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYyOTU3NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476629574", "bodyText": "please use http://cr.openjdk.java.net/~gbierman/jep359/jep359-20191031/specs/records-jls.html#jls-8.10.1\nto point closely to where it is mentioned.", "author": "romani", "createdAt": "2020-08-25T17:46:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzNzQ3OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476637479", "bodyText": "I agree, but it makes the line too long, or breaks the link in the javadoc. I couldn't figure out a way to \"continue the line\" like with \\ in bash.", "author": "nmancus1", "createdAt": "2020-08-25T17:59:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjY3NTM1Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476675352", "bodyText": "Fixed, I thought that Checkstyle would complain about line length > 100.", "author": "nmancus1", "createdAt": "2020-08-25T19:07:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjY3NzQ5OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476677499", "bodyText": "Check is skipping lines with http just for this reason", "author": "romani", "createdAt": "2020-08-25T19:11:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MTc1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MjIyMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476472222", "bodyText": "please add example of code for default config to should behavior on default config", "author": "romani", "createdAt": "2020-08-25T14:01:32Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>", "originalCommit": "19cac768b89ed40f44678281a48deb477bba6b39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjUzNjg4OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476536889", "bodyText": "Done.", "author": "nmancus1", "createdAt": "2020-08-25T15:26:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MjIyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MDcwNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476540707", "bodyText": "Added.", "author": "nmancus1", "createdAt": "2020-08-25T15:31:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MjIyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3Mjc0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476472743", "bodyText": "reuse getAcceptableTokens()", "author": "romani", "createdAt": "2020-08-25T14:02:16Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,", "originalCommit": "19cac768b89ed40f44678281a48deb477bba6b39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MDY0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476540643", "bodyText": "Reused.", "author": "nmancus1", "createdAt": "2020-08-25T15:31:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3Mjc0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MzUxNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476473517", "bodyText": "remove comment, code is self descriptive", "author": "romani", "createdAt": "2020-08-25T14:03:16Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Check access modifier of record definition\n+        final DetailAST modifiers =\n+            ast.findFirstToken(TokenTypes.MODIFIERS);\n+        final AccessModifierOption accessModifier =\n+            CheckUtil.getAccessModifierFromModifiersToken(modifiers);\n+\n+        // If access modifier of record definition matches access modifier options,\n+        // count components", "originalCommit": "19cac768b89ed40f44678281a48deb477bba6b39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MDU1Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476540553", "bodyText": "Removed.", "author": "nmancus1", "createdAt": "2020-08-25T15:31:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MzUxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MzU5OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476473599", "bodyText": "removoe comment", "author": "romani", "createdAt": "2020-08-25T14:03:23Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Check access modifier of record definition\n+        final DetailAST modifiers =\n+            ast.findFirstToken(TokenTypes.MODIFIERS);\n+        final AccessModifierOption accessModifier =\n+            CheckUtil.getAccessModifierFromModifiersToken(modifiers);\n+\n+        // If access modifier of record definition matches access modifier options,\n+        // count components\n+        if (matchAccessModifiers(accessModifier)) {\n+            final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+            final int componentCount = countComponents(recordComponents);\n+\n+            // Check counter and report violations", "originalCommit": "19cac768b89ed40f44678281a48deb477bba6b39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MDQyNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476540427", "bodyText": "Removed.", "author": "nmancus1", "createdAt": "2020-08-25T15:31:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MzU5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3Mzc5Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476473797", "bodyText": "remvoe coment", "author": "romani", "createdAt": "2020-08-25T14:03:38Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Check access modifier of record definition", "originalCommit": "19cac768b89ed40f44678281a48deb477bba6b39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MDMyMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476540321", "bodyText": "Removed.", "author": "nmancus1", "createdAt": "2020-08-25T15:31:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3Mzc5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3NDQxMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476474413", "bodyText": "if this is formattign refactoring , please move to  separate commit.", "author": "romani", "createdAt": "2020-08-25T14:04:26Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/utils/ScopeUtil.java", "diffHunk": "@@ -42,9 +42,9 @@ private ScopeUtil() {\n     public static Scope getScopeFromMods(DetailAST aMods) {\n         // default scope\n         Scope returnValue = Scope.PACKAGE;\n-        for (DetailAST token = aMods.getFirstChild(); token != null\n-                && returnValue == Scope.PACKAGE;\n-                token = token.getNextSibling()) {\n+        for (DetailAST token = aMods.getFirstChild();\n+                 token != null && returnValue == Scope.PACKAGE;\n+                 token = token.getNextSibling()) {", "originalCommit": "19cac768b89ed40f44678281a48deb477bba6b39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MDEzMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476540131", "bodyText": "Reverted.", "author": "nmancus1", "createdAt": "2020-08-25T15:30:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3NDQxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3OTgxNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476479814", "bodyText": "lets avoid this.\nin future we will load config from this comment, this approach will complicate everything.\nsingle instance of Check should be used for file.", "author": "romani", "createdAt": "2020-08-25T14:11:00Z", "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/sizes/recordcomponentnumber/InputRecordComponentNumberDifferentMaxForScope.java", "diffHunk": "@@ -0,0 +1,140 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.sizes.recordcomponentnumber;\n+\n+import java.awt.Point;\n+import java.awt.Shape;\n+import java.util.ArrayDeque;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+\n+import org.w3c.dom.Node;\n+\n+/* Config:\n+ *\n+ * public \"max\" = 5", "originalCommit": "19cac768b89ed40f44678281a48deb477bba6b39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ4NjkzNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476486934", "bodyText": "Can I just remove this test then?  The point of this one was to prove that we can use multiple configs for different access modifiers.", "author": "nmancus1", "createdAt": "2020-08-25T14:20:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3OTgxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5MDQwNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476490405", "bodyText": "yes, just  remove test", "author": "romani", "createdAt": "2020-08-25T14:24:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3OTgxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjUzOTQyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476539424", "bodyText": "Removed and added  a new one, set to only \"private\" access modifier.  This was required for test coverage.", "author": "nmancus1", "createdAt": "2020-08-25T15:29:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3OTgxNA=="}], "type": "inlineReview"}, {"oid": "e6b235fcb64f8cf1cbbba2db685b28fe15212a28", "url": "https://github.com/checkstyle/checkstyle/commit/e6b235fcb64f8cf1cbbba2db685b28fe15212a28", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-25T15:23:38Z", "type": "forcePushed"}, {"oid": "ac987d85d26984918ce27be4d25f678e1c8cae56", "url": "https://github.com/checkstyle/checkstyle/commit/ac987d85d26984918ce27be4d25f678e1c8cae56", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-25T17:04:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzMTMxMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476631310", "bodyText": "it is stateless.\nstateless means ready for  Multithread mode (our future)", "author": "romani", "createdAt": "2020-08-25T17:49:14Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,241 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the\n+ * <a href=\"http://cr.openjdk.java.net/~gbierman/jep359/jep359-20191031/specs/records-jls.html\">\n+ * header</a> of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed in the header of a\n+ * record definition.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y) { // ok, 2 components\n+ *     ...\n+ * }\n+ *\n+ * record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data\n+ *                           String location, Date date, Image image) { // violation, 9 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck", "originalCommit": "ac987d85d26984918ce27be4d25f678e1c8cae56", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjY3NDkxMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476674911", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-08-25T19:07:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzMTMxMA=="}], "type": "inlineReview"}, {"oid": "40815f338b209478b7bf031fdec14b99c564052f", "url": "https://github.com/checkstyle/checkstyle/commit/40815f338b209478b7bf031fdec14b99c564052f", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-25T19:03:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcwNDM0OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476704348", "bodyText": "https://docs.oracle.com/javase/specs/jls/se14/preview/specs/records-jls.html#jls-8.10.1\n?", "author": "pbludov", "createdAt": "2020-08-25T20:02:00Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,241 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the\n+ * <a href=\"http://cr.openjdk.java.net/~gbierman/jep359/jep359-20191031/specs/records-jls.html#jls-8.10.1\">", "originalCommit": "40815f338b209478b7bf031fdec14b99c564052f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcwNTEyMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476705122", "bodyText": "#8595 (comment)", "author": "nmancus1", "createdAt": "2020-08-25T20:03:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcwNDM0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcwNzY5MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476707690", "bodyText": "Your link will allow us to remove gbierman from whitelist.words,  I will change it.", "author": "nmancus1", "createdAt": "2020-08-25T20:08:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcwNDM0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcxNDI5MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476714290", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-08-25T20:22:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcwNDM0OA=="}], "type": "inlineReview"}, {"oid": "20386c785d2c79d34d0a876de2a0077c247caf67", "url": "https://github.com/checkstyle/checkstyle/commit/20386c785d2c79d34d0a876de2a0077c247caf67", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-25T20:20:57Z", "type": "commit"}, {"oid": "20386c785d2c79d34d0a876de2a0077c247caf67", "url": "https://github.com/checkstyle/checkstyle/commit/20386c785d2c79d34d0a876de2a0077c247caf67", "message": "Issue #8748: Create new check RecordComponentNumberCheck", "committedDate": "2020-08-25T20:20:57Z", "type": "forcePushed"}]}