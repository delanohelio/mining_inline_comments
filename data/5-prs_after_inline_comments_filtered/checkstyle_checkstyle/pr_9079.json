{"pr_number": 9079, "pr_title": "Issue #9071: New keyword throwing unresolvable indentation errors", "pr_createdAt": "2020-12-04T10:50:36Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/9079", "timeline": [{"oid": "c1fa695a0457b3ef972a0e4c9fc238ae985da289", "url": "https://github.com/checkstyle/checkstyle/commit/c1fa695a0457b3ef972a0e4c9fc238ae985da289", "message": "Issue #9071: Unresolvable 'new' Indentation Rule conflict introduced in 8.38", "committedDate": "2020-12-04T10:53:56Z", "type": "forcePushed"}, {"oid": "820e08ba250eca642319f1ec74fef08848d784eb", "url": "https://github.com/checkstyle/checkstyle/commit/820e08ba250eca642319f1ec74fef08848d784eb", "message": "Issue #9071: Unresolvable 'new' Indentation Rule conflict introduced in 8.38", "committedDate": "2020-12-04T11:34:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1ODc5NA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r537058794", "bodyText": "it should be violation.", "author": "romani", "createdAt": "2020-12-06T15:19:01Z", "path": "src/it/resources/com/google/checkstyle/test/chapter4formatting/rule4841indentation/ClassWithChainedMethods.java", "diffHunk": "@@ -24,7 +24,7 @@ public static void main(String[] args) { //indent:2 exp:2\n     .length(); //indent:4 exp:>=8 warn\n \n     int length2 =  //indent:4 exp:4\n-    new ClassWithChainedMethods(\"param1\",\"param2\") //indent:4 exp:>=8 warn\n+    new ClassWithChainedMethods(\"param1\",\"param2\") //indent:4 exp:4", "originalCommit": "820e08ba250eca642319f1ec74fef08848d784eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzEwNjAyNw==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r537106027", "bodyText": "Yes, it is suspicious. This file when I checked against the same config, thowed 17 errror (including above). But this is showing only 3 errors.\nMaybe it is only catching warns and not errors and since code for checking new is entirely  moved to its handler, The handler throws errors and doesn't being caught under the warns categories.\nSee the test logic: \n  \n    \n      checkstyle/src/it/java/com/google/checkstyle/test/chapter4formatting/rule4841indentation/IndentationTest.java\n    \n    \n        Lines 139 to 152\n      in\n      820e08b\n    \n    \n    \n    \n\n        \n          \n           public void testWarnChained() throws Exception { \n        \n\n        \n          \n               final String[] expected = { \n        \n\n        \n          \n                   \"18:5: \" + getCheckMessage(IndentationCheck.class, \n        \n\n        \n          \n                           MSG_CHILD_ERROR, \"method call\", 4, 8), \n        \n\n        \n          \n                   \"23:5: \" + getCheckMessage(IndentationCheck.class, MSG_ERROR, \".\", 4, 8), \n        \n\n        \n          \n                   \"24:5: \" + getCheckMessage(IndentationCheck.class, MSG_ERROR, \".\", 4, 8), \n        \n\n        \n          \n               }; \n        \n\n        \n          \n            \n        \n\n        \n          \n               final Configuration checkConfig = getModuleConfig(\"Indentation\"); \n        \n\n        \n          \n               final String filePath = getPath(\"ClassWithChainedMethods.java\"); \n        \n\n        \n          \n            \n        \n\n        \n          \n               final Integer[] warnList = getLinesWithWarn(filePath); \n        \n\n        \n          \n               verify(checkConfig, filePath, expected, warnList); \n        \n\n        \n          \n           }", "author": "Abhishek-kumar09", "createdAt": "2020-12-06T19:25:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1ODc5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzEwNzM4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r537107388", "bodyText": "see getLinesWithWarn(filePath);  on line 150.", "author": "Abhishek-kumar09", "createdAt": "2020-12-06T19:32:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1ODc5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQ1MjUyOA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r546452528", "bodyText": "please make comment //indent:4 exp:8 warn\nall lines with violation should have warn comment, event it is not yet enforced.\nwe did not make it enforced to keep comment aligned with actual violation.\nIt is enforced in it folder, but not in test folder. It is one of future GSoC projects to make our UTs be more behavior focused and comments in Input actually define expected violation.", "author": "romani", "createdAt": "2020-12-20T23:32:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1ODc5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODcwNTk4OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r548705989", "bodyText": "Corrected!, actually the checkConfig here is only Indentation, and I thought it is following the default indentation profile, and I checked it against cli on terminal and everything was fine.\nBut later on further debugging, founded that it was just another config with different properties and indentation attributes.\nChecked it only cli, and got the same result, then further found  that the problem was caused be chained method calls where the new is not the direct child of assign which was not covered in the current code logic.\nNow Corrected!", "author": "Abhishek-kumar09", "createdAt": "2020-12-24T19:04:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1ODc5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTMzOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r537059339", "bodyText": "linewrapping is 4.\nSo should be //indent:20 exp: 16 warn\nwe should not suggest indentation of 12 as it will be violation.", "author": "romani", "createdAt": "2020-12-06T15:22:02Z", "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/indentation/indentation/InputIndentationCustomAnnotation.java", "diffHunk": "@@ -83,8 +83,8 @@\n         @Override //indent:8 exp:8\n         public String toString() { //indent:8 exp:8\n             return //indent:12 exp:12\n-                    new String( //indent:20 exp:20\n-                            new StringBuilder(\"Hello\") //indent:28 exp:28\n+                    new String( //indent:20 exp:12,16 warn", "originalCommit": "820e08ba250eca642319f1ec74fef08848d784eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzEwNTExOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r537105119", "bodyText": "Yes, but earlier it was explictly coded like that to follow the current indent of parent, and then lineWrpping also (multi-indents) so left that logic.\nIn some cases it is good for code readability too, to indent new keyword just down its parent.\nThough I could change the logic to strictly follow only lineWrapping.", "author": "Abhishek-kumar09", "createdAt": "2020-12-06T19:19:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY1MzI5MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r539653291", "bodyText": "But yes, there is some problem...Corrected Now.\nDone.", "author": "Abhishek-kumar09", "createdAt": "2020-12-09T21:16:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTk3MTY4NA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r541971684", "bodyText": "now it is much better.\n        checkConfig.addAttribute(\"lineWrappingIndentation\", \"4\");\n        checkConfig.addAttribute(\"forceStrictCondition\", \"true\");\n\nso warn after update is good.", "author": "romani", "createdAt": "2020-12-13T17:49:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTMzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTU0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r537059543", "bodyText": "is it because they have their own handlers ?", "author": "romani", "createdAt": "2020-12-06T15:23:09Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/LineWrappingHandler.java", "diffHunk": "@@ -69,6 +69,16 @@ public static LineWrappingOptions ofBoolean(boolean val) {\n \n     }\n \n+    /**\n+     * The list of ignored token types for being checked by lineWrapping indentation\n+     * inside {@code checkIndentation()}.", "originalCommit": "820e08ba250eca642319f1ec74fef08848d784eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzEwNjQ2NA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r537106464", "bodyText": "Yes, they do interuptions with the dedicated handlers, like here in this issue.\nSo if everything is covered inside the handler, then no need to explicitly check it against the lineWrappingHandler.", "author": "Abhishek-kumar09", "createdAt": "2020-12-06T19:27:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTU0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTk2OTUwNA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r541969504", "bodyText": "please mention a reason in javadoc, to be more explicit", "author": "romani", "createdAt": "2020-12-13T17:37:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTU0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTk3NTI1NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r541975255", "bodyText": "done", "author": "Abhishek-kumar09", "createdAt": "2020-12-13T18:11:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTU0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQ1Mjc2Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r546452763", "bodyText": "please make javadoc links to such classes, wedo not have that much of them, it make sense to reference.", "author": "romani", "createdAt": "2020-12-20T23:34:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTU0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODcyODc1Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r548728757", "bodyText": "Done", "author": "Abhishek-kumar09", "createdAt": "2020-12-24T19:39:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTU0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTcyOA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r537059728", "bodyText": "diff report is heavily polluted by such update\ncan we avoid such wording update ?", "author": "romani", "createdAt": "2020-12-06T15:24:18Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/indentation/IndentationCheckTest.java", "diffHunk": "@@ -668,8 +668,8 @@ public void testInvalidMethodWithChecker()\n             \"110:15: \" + getCheckMessage(MSG_ERROR, \"operator new\", 14, 16),\n             \"113:11: \" + getCheckMessage(MSG_CHILD_ERROR, \"method call\", 10, 12),\n             \"118:15: \" + getCheckMessage(MSG_ERROR, \"operator new\", 14, 16),\n-            \"122:11: \" + getCheckMessage(MSG_ERROR, \"new\", 10, 12),\n-            \"126:11: \" + getCheckMessage(MSG_ERROR, \"new\", 10, 12),\n+            \"122:11: \" + getCheckMessage(MSG_ERROR, \"operator new\", 10, 12),", "originalCommit": "820e08ba250eca642319f1ec74fef08848d784eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzEwNjkxNw==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r537106917", "bodyText": "I guess no.\nSince Inside the newHandler the message is new operator and inside linewrapping it was only new.\nThough its our choice to choose between new or new operator, but the diff report will still be polluted for once atleast.", "author": "Abhishek-kumar09", "createdAt": "2020-12-06T19:30:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTcyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQ1MzIyOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r546453229", "bodyText": "checkstyle/src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/NewHandler.java\n    \n    \n        Lines 42 to 47\n      in\n      432bafd\n    \n    \n    \n    \n\n        \n          \n           public NewHandler(IndentationCheck indentCheck, \n        \n\n        \n          \n                             DetailAST ast, \n        \n\n        \n          \n                             AbstractExpressionHandler parent) { \n        \n\n        \n          \n               super(indentCheck, \"operator new\", ast, parent); \n        \n\n        \n          \n               mainAst = ast; \n        \n\n        \n          \n           } \n        \n    \n  \n\n\n\ninside linewrapping it was only new\n\ncan you share exact line where it is defined ?", "author": "romani", "createdAt": "2020-12-20T23:38:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTcyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQ1NzQ3MA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r546457470", "bodyText": "please help to remove this word from message in scope of #9113\nit will simplify regression report review.\nYou can place update for message in this PR as separate commit so it will be easy to regenerate report.\nUnfortunately Indentation Check is so complicated and so many variations of code could be so we rely of diff report too much, as  our test have only very basic set of inputs.\nCurrent diff report is unmanageable, too much changes.", "author": "romani", "createdAt": "2020-12-21T00:16:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTcyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQ1NzU3OA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r546457578", "bodyText": "please help to remove this word from message in scope of #9113\nit will simplify regression report review.\nYou can place update for message in this PR as separate commit so it will be easy to regenerate report.\nUnfortunately Indentation Check is so complicated and so many variations of code could be so we rely of diff report too much, as  our test have only very basic set of inputs.\nCurrent diff report is unmanageable, too much changes.", "author": "romani", "createdAt": "2020-12-21T00:17:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTcyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODcyOTkzMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r548729931", "bodyText": "Doing it, operator new to new\nGenerating the report at this point.\ndone", "author": "Abhishek-kumar09", "createdAt": "2020-12-24T19:40:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA1OTcyOA=="}], "type": "inlineReview"}, {"oid": "fdeabf2fd3986307200ed45bc8a7e5db89e5d210", "url": "https://github.com/checkstyle/checkstyle/commit/fdeabf2fd3986307200ed45bc8a7e5db89e5d210", "message": "Issue #9071: Unresolvable 'new' Indentation Rule conflict introduced in 8.38", "committedDate": "2020-12-09T21:16:53Z", "type": "forcePushed"}, {"oid": "974b23341d6198bf5d3ccefa9026b0f3c1e45345", "url": "https://github.com/checkstyle/checkstyle/commit/974b23341d6198bf5d3ccefa9026b0f3c1e45345", "message": "Issue #9071: Unresolvable 'new' Indentation Rule conflict introduced in 8.38", "committedDate": "2020-12-13T18:04:33Z", "type": "forcePushed"}, {"oid": "05268ab56edc041dd12099700e633fe872996d3f", "url": "https://github.com/checkstyle/checkstyle/commit/05268ab56edc041dd12099700e633fe872996d3f", "message": "Issue #9071: Unresolvable 'new' Indentation Rule conflict introduced in 8.38", "committedDate": "2020-12-24T18:52:43Z", "type": "forcePushed"}, {"oid": "5dc2ba8efeb1340202a6612ddb088a5a47bc7c6b", "url": "https://github.com/checkstyle/checkstyle/commit/5dc2ba8efeb1340202a6612ddb088a5a47bc7c6b", "message": "Issue #9071: Unresolvable 'new' Indentation Rule conflict introduced in 8.38", "committedDate": "2020-12-24T19:37:36Z", "type": "forcePushed"}, {"oid": "12fe5fd0aeba9409113374585a1284373a3588e6", "url": "https://github.com/checkstyle/checkstyle/commit/12fe5fd0aeba9409113374585a1284373a3588e6", "message": "Issue #9071: Unresolvable 'new' Indentation Rule conflict introduced in 8.38", "committedDate": "2020-12-24T19:46:53Z", "type": "forcePushed"}, {"oid": "9c2d6a127a722d025e454711dd2302b417133d19", "url": "https://github.com/checkstyle/checkstyle/commit/9c2d6a127a722d025e454711dd2302b417133d19", "message": "minor: modify pgjdbc for wercker failure", "committedDate": "2020-12-29T22:26:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDUyMjMyOA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554522328", "bodyText": "isForceStrictCond is a bad name for a variable. Why not isForceStrictCondition or forceStrictCondition?\nIf a line does not fit, you can add overload to isAcceptable method. Something like IndentLevel.isAcceptable(int indent, boolean isForceStrictCondition). Then it will add a bit of readability.", "author": "pbludov", "createdAt": "2021-01-10T07:01:35Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/NewHandler.java", "diffHunk": "@@ -42,19 +42,20 @@\n     public NewHandler(IndentationCheck indentCheck,\n                       DetailAST ast,\n                       AbstractExpressionHandler parent) {\n-        super(indentCheck, \"operator new\", ast, parent);\n+        super(indentCheck, \"new\", ast, parent);\n         mainAst = ast;\n     }\n \n     @Override\n     public void checkIndentation() {\n         // if new is on the line start and it is not the part of assignment.\n-        if (isOnStartOfLine(mainAst)\n-                && !isNewKeywordFollowedByAssign()) {\n+        if (isOnStartOfLine(mainAst)) {\n             final int columnNo = expandedTabsColumnNo(mainAst);\n             final IndentLevel level = getIndentImpl();\n \n-            if (columnNo < level.getFirstIndentLevel()) {\n+            final boolean isForceStrictCond = getIndentCheck().isForceStrictCondition();", "originalCommit": "9c2d6a127a722d025e454711dd2302b417133d19", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU0NDM2OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554544369", "bodyText": "Done.", "author": "Abhishek-kumar09", "createdAt": "2021-01-10T10:13:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDUyMjMyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDYyNjYyNw==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554626627", "bodyText": "Please undo new method", "author": "romani", "createdAt": "2021-01-10T21:39:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDUyMjMyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDUyNTE5MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554525191", "bodyText": "shortening again", "author": "pbludov", "createdAt": "2021-01-10T07:28:59Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/indentation/IndentationCheckTest.java", "diffHunk": "@@ -1011,16 +1011,46 @@ public void testNewKeyword() throws Exception {\n     }\n \n     @Test\n-    public void testNewChildren() throws Exception {\n+    public void testNewKeyword2() throws Exception {\n         final DefaultConfiguration checkConfig = createModuleConfig(IndentationCheck.class);\n \n         checkConfig.addAttribute(\"basicOffset\", \"4\");\n-        checkConfig.addAttribute(\"forceStrictCondition\", \"false\");\n+        checkConfig.addAttribute(\"forceStrictCondition\", \"true\");\n+        checkConfig.addAttribute(\"lineWrappingIndentation\", \"8\");\n+        checkConfig.addAttribute(\"tabWidth\", \"4\");\n+        checkConfig.addAttribute(\"throwsIndent\", \"8\");\n+        final String[] expected = CommonUtil.EMPTY_STRING_ARRAY;\n+        verifyWarns(checkConfig, getPath(\"InputIndentationNew.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testValidNewKeywordWithForceStrictCond() throws Exception {", "originalCommit": "9c2d6a127a722d025e454711dd2302b417133d19", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU0NDQwNA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554544404", "bodyText": "Done", "author": "Abhishek-kumar09", "createdAt": "2021-01-10T10:13:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDUyNTE5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDUyNTIwMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554525201", "bodyText": "shortening again", "author": "pbludov", "createdAt": "2021-01-10T07:29:07Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/indentation/IndentationCheckTest.java", "diffHunk": "@@ -1011,16 +1011,46 @@ public void testNewKeyword() throws Exception {\n     }\n \n     @Test\n-    public void testNewChildren() throws Exception {\n+    public void testNewKeyword2() throws Exception {\n         final DefaultConfiguration checkConfig = createModuleConfig(IndentationCheck.class);\n \n         checkConfig.addAttribute(\"basicOffset\", \"4\");\n-        checkConfig.addAttribute(\"forceStrictCondition\", \"false\");\n+        checkConfig.addAttribute(\"forceStrictCondition\", \"true\");\n+        checkConfig.addAttribute(\"lineWrappingIndentation\", \"8\");\n+        checkConfig.addAttribute(\"tabWidth\", \"4\");\n+        checkConfig.addAttribute(\"throwsIndent\", \"8\");\n+        final String[] expected = CommonUtil.EMPTY_STRING_ARRAY;\n+        verifyWarns(checkConfig, getPath(\"InputIndentationNew.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testValidNewKeywordWithForceStrictCond() throws Exception {\n+        final DefaultConfiguration checkConfig = createModuleConfig(IndentationCheck.class);\n+\n+        checkConfig.addAttribute(\"basicOffset\", \"4\");\n+        checkConfig.addAttribute(\"forceStrictCondition\", \"true\");\n         checkConfig.addAttribute(\"lineWrappingIndentation\", \"8\");\n         checkConfig.addAttribute(\"tabWidth\", \"4\");\n         checkConfig.addAttribute(\"throwsIndent\", \"8\");\n         final String[] expected = CommonUtil.EMPTY_STRING_ARRAY;\n-        verifyWarns(checkConfig, getPath(\"InputIndentationValidNewChildren.java\"), expected);\n+        verifyWarns(checkConfig, getPath(\"InputIndentationNew.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testInvalidNewKeywordWithForceStrictCond() throws Exception {", "originalCommit": "9c2d6a127a722d025e454711dd2302b417133d19", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU0NDQxNA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554544414", "bodyText": "Done", "author": "Abhishek-kumar09", "createdAt": "2021-01-10T10:14:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDUyNTIwMQ=="}], "type": "inlineReview"}, {"oid": "2c95c7af584b73b4a8d3f314e777d0d2fa5f1c4d", "url": "https://github.com/checkstyle/checkstyle/commit/2c95c7af584b73b4a8d3f314e777d0d2fa5f1c4d", "message": "Issue #9113: change in violation message 'operator new' to just 'new'", "committedDate": "2021-01-10T10:07:33Z", "type": "forcePushed"}, {"oid": "18a62124f31a7ad6ad38b41f331b0b715b2fbe17", "url": "https://github.com/checkstyle/checkstyle/commit/18a62124f31a7ad6ad38b41f331b0b715b2fbe17", "message": "Issue #9113: change in violation message 'operator new' to just 'new'", "committedDate": "2021-01-10T10:09:37Z", "type": "forcePushed"}, {"oid": "bccf8d812f824972f4e4f9868c519b3281a27507", "url": "https://github.com/checkstyle/checkstyle/commit/bccf8d812f824972f4e4f9868c519b3281a27507", "message": "minor: modify pgjdbc for wercker failure", "committedDate": "2021-01-10T10:13:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU0NDU3Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554544572", "bodyText": "Some code changes in Lambda handler, Will share a regression report to check everything is fine for lambda too, seperately.", "author": "Abhishek-kumar09", "createdAt": "2021-01-10T10:15:25Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/LambdaHandler.java", "diffHunk": "@@ -124,8 +124,7 @@ public void checkIndentation() {\n      */\n     private boolean isNonAcceptableIndent(int astColumnNo, IndentLevel level) {\n         return astColumnNo < level.getFirstIndentLevel()\n-            || getIndentCheck().isForceStrictCondition()\n-               && !level.isAcceptable(astColumnNo);\n+            || !level.isAcceptable(astColumnNo, getIndentCheck().isForceStrictCondition());", "originalCommit": "bccf8d812f824972f4e4f9868c519b3281a27507", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU4NDM2NA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554584364", "bodyText": "Did regression report, and didn't find any changes.\nforceStrictTrue: https://abhishek-kumar09.github.io/Issue3135/\nforceStrict False: https://abhishek-kumar09.github.io/IndentaionReport/\nSo looking good.", "author": "Abhishek-kumar09", "createdAt": "2021-01-10T15:39:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU0NDU3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU4NDk0NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554584945", "bodyText": "now IDEA do not like this code - https://teamcity.jetbrains.com/viewLog.html?buildId=3266967&tab=Inspection&buildTypeId=Checkstyle_IdeaInspectionsPullRequest\nsrc/main/java/com/puppycrawl/tools/checkstyle/checks/indentation\nIndentLevel.java (1)\n94: isAcceptable() 'public' method isAcceptable() with 'boolean' parameter", "author": "romani", "createdAt": "2021-01-10T15:44:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU0NDU3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDYyNDM3NA==", "url": "https://github.com/checkstyle/checkstyle/pull/9079#discussion_r554624374", "bodyText": "It is sad. @Abhishek-kumar09, Please undo the new method.", "author": "pbludov", "createdAt": "2021-01-10T21:19:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU0NDU3Mg=="}], "type": "inlineReview"}, {"oid": "48c2763f66f5fc40298dbcd08648d969320a9c82", "url": "https://github.com/checkstyle/checkstyle/commit/48c2763f66f5fc40298dbcd08648d969320a9c82", "message": "minor: modify pgjdbc for wercker failure", "committedDate": "2021-01-10T11:17:19Z", "type": "forcePushed"}, {"oid": "f2487202029b5cfb98a4b7e47e53a59e46b55720", "url": "https://github.com/checkstyle/checkstyle/commit/f2487202029b5cfb98a4b7e47e53a59e46b55720", "message": "minor: modify pgjdbc for wercker failure", "committedDate": "2021-01-11T03:44:09Z", "type": "forcePushed"}, {"oid": "f9f304b878b993b241f36b4a9d82263ab9ef2e93", "url": "https://github.com/checkstyle/checkstyle/commit/f9f304b878b993b241f36b4a9d82263ab9ef2e93", "message": "Issue #9086: ForceStrictCondition should not affect individual array elements", "committedDate": "2021-01-11T09:46:24Z", "type": "forcePushed"}, {"oid": "ef2489eec236e195adbfe8a38efc305a641eda48", "url": "https://github.com/checkstyle/checkstyle/commit/ef2489eec236e195adbfe8a38efc305a641eda48", "message": "Issue #9071: New keyword throwing unresolvable indentation errors", "committedDate": "2021-01-11T12:22:29Z", "type": "forcePushed"}, {"oid": "6afd41150fe0a848981d1116a96fe96511c8cb03", "url": "https://github.com/checkstyle/checkstyle/commit/6afd41150fe0a848981d1116a96fe96511c8cb03", "message": "Issue #9071: New keyword throwing unresolvable indentation errors", "committedDate": "2021-01-11T12:40:26Z", "type": "forcePushed"}, {"oid": "7a1883917a5e63e1719515a3dd12ccf158613831", "url": "https://github.com/checkstyle/checkstyle/commit/7a1883917a5e63e1719515a3dd12ccf158613831", "message": "Issue #9071: New keyword throwing unresolvable indentation errors", "committedDate": "2021-01-12T15:36:57Z", "type": "forcePushed"}, {"oid": "d909ac6ce51a4ab622157eca9c400a48400b5868", "url": "https://github.com/checkstyle/checkstyle/commit/d909ac6ce51a4ab622157eca9c400a48400b5868", "message": "Issue #9071: New keyword throwing unresolvable indentation errors", "committedDate": "2021-01-13T18:48:32Z", "type": "commit"}, {"oid": "d909ac6ce51a4ab622157eca9c400a48400b5868", "url": "https://github.com/checkstyle/checkstyle/commit/d909ac6ce51a4ab622157eca9c400a48400b5868", "message": "Issue #9071: New keyword throwing unresolvable indentation errors", "committedDate": "2021-01-13T18:48:32Z", "type": "forcePushed"}]}