{"pr_number": 7935, "pr_title": "Issue #7677: add UnnecessarySemicolonAfterOuterTypeDeclarationCheck", "pr_createdAt": "2020-03-22T07:52:37Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/7935", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA4NTgzOA==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r396085838", "bodyText": "Just a note: these classes are needed for 100% coverage?", "author": "pbludov", "createdAt": "2020-03-22T12:04:17Z", "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/unnecessarysemicolonaftertypedeclaration/InputUnnecessarySemicolonAfterTypeDeclaration.java", "diffHunk": "@@ -0,0 +1,45 @@\n+package com.puppycrawl.tools.checkstyle.checks.coding.unnecessarysemicolonaftertypedeclaration;\n+\n+/**\n+ * Config = default\n+ */\n+public class InputUnnecessarySemicolonAfterTypeDeclaration {\n+\n+    enum innerEnum {\n+\n+    }; // OK, nested enum\n+\n+    @interface innerAnnotation {\n+\n+    }; // OK, nested annotation\n+\n+    interface innerInterface {\n+\n+    }; // OK, nested interface\n+\n+    class innerClass {\n+\n+    };  // OK, nested class\n+\n+}; // violation\n+\n+enum e {\n+\n+}; // violation\n+\n+@interface an {\n+\n+}; // violation\n+\n+interface i {\n+\n+}; // violation\n+\n+\n+enum okEnum {}", "originalCommit": "9e32a5cbf7351b4b47db42aadc0fcbcf7dc6743f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA4ODk2Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r396088966", "bodyText": "We need 2 of them - one where next sibling is not semicolon, and one where next sibling is null.\nI decided to keep all 4 possible type declarations.", "author": "strkkk", "createdAt": "2020-03-22T12:40:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA4NTgzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgwODU4MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r399808581", "bodyText": "@pbludov , the more test cases the better, we should not reply on exact implementation of Check.", "author": "romani", "createdAt": "2020-03-29T14:52:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA4NTgzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5MjI1Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r396092257", "bodyText": "Should this be UnnecessarySemicolonAfterOuterTypeDeclarationCheck.", "author": "rnveach", "createdAt": "2020-03-22T13:14:05Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/UnnecessarySemicolonAfterTypeDeclarationCheck.java", "diffHunk": "@@ -0,0 +1,122 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks if unnecessary semicolon is used after type declaration.\n+ * </p>\n+ * <p>\n+ * This check is not applicable to nested type declarations,\n+ * <a\n+ * href=\"https://checkstyle.org/config_coding.html#UnnecessarySemicolonAfterTypeMemberDeclaration\">\n+ * UnnecessarySemicolonAfterTypeMemberDeclaration</a> is responsible for it.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code tokens} - tokens to check\n+ * Default value is:\n+ * <a href=\"https://checkstyle.org/apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#CLASS_DEF\">\n+ * CLASS_DEF</a>,\n+ * <a href=\"https://checkstyle.org/apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#INTERFACE_DEF\">\n+ * INTERFACE_DEF</a>,\n+ * <a href=\"https://checkstyle.org/apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ENUM_DEF\">\n+ * ENUM_DEF</a>,\n+ * <a href=\"https://checkstyle.org/apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ANNOTATION_DEF\">\n+ * ANNOTATION_DEF</a>.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=&quot;UnnecessarySemicolonAfterTypeDeclaration&quot;/&gt;\n+ * </pre>\n+ * <p>Example:</p>\n+ * <pre>\n+ * class A {\n+ *\n+ *     class Nested {\n+ *\n+ *     }; // OK, nested type declarations are ignored\n+ *\n+ * }; // violation\n+ *\n+ * interface B {\n+ *\n+ * }; // violation\n+ *\n+ * enum C {\n+ *\n+ * }; // violation\n+ *\n+ * {@literal @}interface D {\n+ *\n+ * }; // violation\n+ * </pre>\n+ *\n+ * @since 8.31\n+ */\n+@StatelessCheck\n+public final class UnnecessarySemicolonAfterTypeDeclarationCheck extends AbstractCheck {", "originalCommit": "9e32a5cbf7351b4b47db42aadc0fcbcf7dc6743f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjYzOTkyNg==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r396639926", "bodyText": "Good question.\n@romani what do you think, should \"Outer\" be added to check name?\nI added changes in separate commit, if this name change is not needed, I will just revert it.", "author": "strkkk", "createdAt": "2020-03-23T17:47:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5MjI1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgwNDc5NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r399804795", "bodyText": "@strkkk , yes, please change a name. To be more exact by name.\nsorry I did not noticed this unresolved conversation before.", "author": "romani", "createdAt": "2020-03-29T14:23:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5MjI1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgwODE1Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r399808152", "bodyText": "@romani name has been changed already, I also updated original issue and contribution repo PR.\nOnly diff report has previous name, but it is ok", "author": "strkkk", "createdAt": "2020-03-29T14:49:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5MjI1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgwODYxMg==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r399808612", "bodyText": "confirmed.", "author": "romani", "createdAt": "2020-03-29T14:53:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5MjI1Nw=="}], "type": "inlineReview"}, {"oid": "2b0f825965eaa8c3ded2c7da49e1b77fc11959f6", "url": "https://github.com/checkstyle/checkstyle/commit/2b0f825965eaa8c3ded2c7da49e1b77fc11959f6", "message": "Issue #7677: correct review items", "committedDate": "2020-03-23T17:53:07Z", "type": "forcePushed"}, {"oid": "3a9b494b64f8da1ba0d33b729f3183d94ad41fc6", "url": "https://github.com/checkstyle/checkstyle/commit/3a9b494b64f8da1ba0d33b729f3183d94ad41fc6", "message": "Issue #7677: correct review items", "committedDate": "2020-03-25T16:18:40Z", "type": "forcePushed"}, {"oid": "20d7e38dd68efcf5389dec282d2c2eed7d8740e8", "url": "https://github.com/checkstyle/checkstyle/commit/20d7e38dd68efcf5389dec282d2c2eed7d8740e8", "message": "Issue #7677: correct review items", "committedDate": "2020-03-25T16:24:18Z", "type": "forcePushed"}, {"oid": "dfb42c6587057eaf14691308d73bca7aabb09d92", "url": "https://github.com/checkstyle/checkstyle/commit/dfb42c6587057eaf14691308d73bca7aabb09d92", "message": "Issue #7677: add UnnecessarySemicolonAfterOuterTypeDeclarationCheck", "committedDate": "2020-03-26T06:45:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyNDMwNw==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r399724307", "bodyText": "Please add one more test method", "author": "romani", "createdAt": "2020-03-28T23:58:26Z", "path": "src/it/java/org/checkstyle/suppressionxpathfilter/XpathRegressionUnnecessarySemicolonAfterOuterTypeDeclarationTest.java", "diffHunk": "@@ -0,0 +1,56 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package org.checkstyle.suppressionxpathfilter;\n+\n+import java.io.File;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.checks.coding.UnnecessarySemicolonAfterOuterTypeDeclarationCheck;\n+\n+public class XpathRegressionUnnecessarySemicolonAfterOuterTypeDeclarationTest\n+        extends AbstractXpathTestSupport {\n+\n+    private static final Class<UnnecessarySemicolonAfterOuterTypeDeclarationCheck> CLASS =\n+        UnnecessarySemicolonAfterOuterTypeDeclarationCheck.class;\n+\n+    @Override\n+    protected String getCheckName() {\n+        return CLASS.getSimpleName();\n+    }\n+\n+    @Test\n+    public void testOne() throws Exception {", "originalCommit": "dfb42c6587057eaf14691308d73bca7aabb09d92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc2ODMxMA==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r399768310", "bodyText": "done", "author": "strkkk", "createdAt": "2020-03-29T09:04:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyNDMwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgwNjMyNg==", "url": "https://github.com/checkstyle/checkstyle/pull/7935#discussion_r399806326", "bodyText": "we will have validation on this - #7987\nI tired to keep this in mind.", "author": "romani", "createdAt": "2020-03-29T14:34:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyNDMwNw=="}], "type": "inlineReview"}, {"oid": "f2f0484a2a0f2fa9adedd66abdf46c81d9480c8f", "url": "https://github.com/checkstyle/checkstyle/commit/f2f0484a2a0f2fa9adedd66abdf46c81d9480c8f", "message": "Issue #7677: add UnnecessarySemicolonAfterOuterTypeDeclarationCheck", "committedDate": "2020-03-29T09:02:44Z", "type": "forcePushed"}, {"oid": "8cafc5d7903dd2b0248958fa13a54fe87cba2edd", "url": "https://github.com/checkstyle/checkstyle/commit/8cafc5d7903dd2b0248958fa13a54fe87cba2edd", "message": "Issue #7677: add UnnecessarySemicolonAfterOuterTypeDeclarationCheck", "committedDate": "2020-03-29T10:32:22Z", "type": "commit"}, {"oid": "8cafc5d7903dd2b0248958fa13a54fe87cba2edd", "url": "https://github.com/checkstyle/checkstyle/commit/8cafc5d7903dd2b0248958fa13a54fe87cba2edd", "message": "Issue #7677: add UnnecessarySemicolonAfterOuterTypeDeclarationCheck", "committedDate": "2020-03-29T10:32:22Z", "type": "forcePushed"}]}