{"pr_number": 7931, "pr_title": "Issue #7848: SuppressWarningsHolder should not report violations", "pr_createdAt": "2020-03-21T15:04:04Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/7931", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcwOTE1Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r396709157", "bodyText": "We need to remove all functionality that is logging of violations.\nPlease remove line with logging of violation, remove message, all locations of annotations is valid", "author": "romani", "createdAt": "2020-03-23T19:39:47Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/SuppressWarningsHolder.java", "diffHunk": "@@ -441,6 +441,7 @@ private static DetailAST getAcceptableParent(DetailAST child) {\n             case TokenTypes.DOT:\n             case TokenTypes.ANNOTATION:\n             case TokenTypes.MODIFIERS:\n+            case TokenTypes.RESOURCE:", "originalCommit": "b4ac7d0aafe27b4edeb525117fcafb74858d4642", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg3ODU3Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r396878576", "bodyText": "@romani Done", "author": "AmrDeveloper", "createdAt": "2020-03-24T03:08:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcwOTE1Nw=="}], "type": "inlineReview"}, {"oid": "8dece524f481a80ea71b55a279a116c4a6a57c9b", "url": "https://github.com/checkstyle/checkstyle/commit/8dece524f481a80ea71b55a279a116c4a6a57c9b", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-03-23T21:28:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc2ODc1Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r403768757", "bodyText": "please remove it from here.\nthis module do not report any violations now, so it should not be there.\nModule will never report violations, Xpath will never be able to suppress violations from it.\nUT might be complaining on absent module, so we need to update UT to skip skip module from consideration as it has no violations, so no need to have support of Xpath for it.", "author": "romani", "createdAt": "2020-04-05T22:54:12Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/filters/SuppressionXpathFilter.java", "diffHunk": "@@ -116,6 +116,9 @@\n  * RegexpSinglelineJava\n  * </li>\n  * <li>\n+ * SuppressWarningsHolder", "originalCommit": "8dece524f481a80ea71b55a279a116c4a6a57c9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDkxMjM1MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r404912350", "bodyText": "@romani Done", "author": "AmrDeveloper", "createdAt": "2020-04-07T15:42:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc2ODc1Nw=="}], "type": "inlineReview"}, {"oid": "f1f6f6577c87690ea8ff243beb7f9295a0a7f4d7", "url": "https://github.com/checkstyle/checkstyle/commit/f1f6f6577c87690ea8ff243beb7f9295a0a7f4d7", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-06T11:06:48Z", "type": "forcePushed"}, {"oid": "028ae378092a6bf30388f00f12bd75a8e4c32561", "url": "https://github.com/checkstyle/checkstyle/commit/028ae378092a6bf30388f00f12bd75a8e4c32561", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-07T14:46:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIyMDk5MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r407220990", "bodyText": "This should be moved to something else as the check will never have xpath support. It doesn't create violations.\nI would create a new field for it that specifically says they will not have xpath support ever, and give a reason why for this check.", "author": "rnveach", "createdAt": "2020-04-12T16:26:13Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XpathRegressionTest.java", "diffHunk": "@@ -155,6 +155,7 @@\n             \"SuperClone\",\n             \"SuperFinalize\",\n             \"SuppressWarnings\",\n+            \"SuppressWarningsHolder\",", "originalCommit": "028ae378092a6bf30388f00f12bd75a8e4c32561", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIzODg4MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r407238881", "bodyText": "@rnveach Thanks, You are right\nOnce you create the new field I will rebase and move it to the new field", "author": "AmrDeveloper", "createdAt": "2020-04-12T18:58:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIyMDk5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzczMzY2NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r407733665", "bodyText": "@AmrDeveloper I was referring to as if I was working the PR myself. You should make the changes as part of your PR.", "author": "rnveach", "createdAt": "2020-04-13T21:31:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIyMDk5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg2NTg2Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r407865866", "bodyText": "As part of this PR, you need to update UT to skip such module at all.", "author": "romani", "createdAt": "2020-04-14T04:52:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIyMDk5MA=="}], "type": "inlineReview"}, {"oid": "250cbfd7b576fb90c70ccb77cb9fe98fd1d335c9", "url": "https://github.com/checkstyle/checkstyle/commit/250cbfd7b576fb90c70ccb77cb9fe98fd1d335c9", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-14T10:03:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM0ODAwMg==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r408348002", "bodyText": "NO_VIOLATION_MODULES\nAll Checks must have violations.", "author": "romani", "createdAt": "2020-04-14T18:29:27Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XpathRegressionTest.java", "diffHunk": "@@ -160,6 +160,12 @@\n             \"VisibilityModifier\"\n     ));\n \n+    // Checks that will never have xpath support ever because they not report violations\n+    // till https://github.com/checkstyle/checkstyle/issues/7848\n+    private static final Set<String> NO_VIOLATION_CHECKS = new HashSet<>(Collections.singletonList(", "originalCommit": "250cbfd7b576fb90c70ccb77cb9fe98fd1d335c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MzIwNg==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r408663206", "bodyText": "Done", "author": "AmrDeveloper", "createdAt": "2020-04-15T08:18:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM0ODAwMg=="}], "type": "inlineReview"}, {"oid": "56a80c5f67994d4576eb5be2ae8c6fbd79ff0ea4", "url": "https://github.com/checkstyle/checkstyle/commit/56a80c5f67994d4576eb5be2ae8c6fbd79ff0ea4", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-14T18:40:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTUzNDE2Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r409534166", "bodyText": "please remove comment with \"till\".\n\"till\" means .... when such issue become closed, we can remove code below.\nBut it is the same issue as you fix. Such block of code will exists till we remove SuppressWarningsHolder from repo, we do not have issue on this for now, it is far future.", "author": "romani", "createdAt": "2020-04-16T12:57:44Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XpathRegressionTest.java", "diffHunk": "@@ -160,6 +160,12 @@\n             \"VisibilityModifier\"\n     ));\n \n+    // Modules that will never have xpath support ever because they not report violations\n+    // till https://github.com/checkstyle/checkstyle/issues/7848", "originalCommit": "56a80c5f67994d4576eb5be2ae8c6fbd79ff0ea4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTUzNTk3OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r409535979", "bodyText": "please remove MSG_KEY from module, it should not be used any more.", "author": "romani", "createdAt": "2020-04-16T13:00:15Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/SuppressWarningsHolderTest.java", "diffHunk": "@@ -259,9 +259,7 @@ public void testIsSuppressedWithAllArgument() throws Exception {\n     public void testAnnotationInTry() throws Exception {\n         final Configuration checkConfig = createModuleConfig(SuppressWarningsHolder.class);\n \n-        final String[] expected = {\n-            \"11:14: \" + getCheckMessage(SuppressWarningsHolder.MSG_KEY),", "originalCommit": "56a80c5f67994d4576eb5be2ae8c6fbd79ff0ea4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "925d65f58b6dfb22c493e11068b8567b00bf817b", "url": "https://github.com/checkstyle/checkstyle/commit/925d65f58b6dfb22c493e11068b8567b00bf817b", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-16T16:55:23Z", "type": "forcePushed"}, {"oid": "c60ec3e82b9a7bfd620a05b5f36277562ec62aae", "url": "https://github.com/checkstyle/checkstyle/commit/c60ec3e82b9a7bfd620a05b5f36277562ec62aae", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-16T19:00:19Z", "type": "forcePushed"}, {"oid": "3895d5e992daeb37a4991f7b7c0d9c6968cb97c2", "url": "https://github.com/checkstyle/checkstyle/commit/3895d5e992daeb37a4991f7b7c0d9c6968cb97c2", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-16T22:20:48Z", "type": "forcePushed"}, {"oid": "5b96268b72e5a39248be1ce6b118446c41c2d126", "url": "https://github.com/checkstyle/checkstyle/commit/5b96268b72e5a39248be1ce6b118446c41c2d126", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-17T10:18:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI1NTA0Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r410255047", "bodyText": "please remove comment, I do not understand it. Exception will fail whole Checkstyle execution, it is not validation, any Check can throw exception. Or make comment // No messages in just module\nPlease try to remove SuppressWarningsHolder from getCheckstyleChecks return, if there a lot of other changes(please share them here) are required then lets keep it and we will create new issue on this and address separately.", "author": "romani", "createdAt": "2020-04-17T14:20:11Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/AllChecksTest.java", "diffHunk": "@@ -488,6 +488,11 @@ public void testAllCheckstyleChecksHaveMessage() throws Exception {\n         for (Class<?> module : CheckUtil.getCheckstyleChecks()) {\n             final String name = module.getSimpleName();\n \n+            // hidden exception messages\n+            if (\"SuppressWarningsHolder\".equals(name)) {", "originalCommit": "5b96268b72e5a39248be1ce6b118446c41c2d126", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM1NDg5MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r410354891", "bodyText": "@romani  I updated the comment to // No messages in just module\nand I am waiting for Travis to rebase if it's failed\nin getCheckstyleChecks we can add one more filter to remove SuppressWarningsHolder from the result\npublic static Set<Class<?>> getCheckstyleChecks() throws IOException {\n        final ClassLoader loader = Thread.currentThread().getContextClassLoader();\n        final String packageName = \"com.puppycrawl.tools.checkstyle\";\n        return getCheckstyleModulesRecursive(packageName, loader).stream()\n                .filter(ModuleReflectionUtil::isCheckstyleTreeWalkerCheck)\n                .filter(aClass -> \"SuppressWarningsHolder\".equals(aClass.getName()))\n                .collect(Collectors.toSet());\n}", "author": "AmrDeveloper", "createdAt": "2020-04-17T17:05:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI1NTA0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcwMTc4Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/7931#discussion_r410701786", "bodyText": "Ok, lets do this in separate PR , new issue #8121 .\nYou are welcome to fix it as you know all details.", "author": "romani", "createdAt": "2020-04-18T14:01:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI1NTA0Nw=="}], "type": "inlineReview"}, {"oid": "9a19f2c56d04468d7243dc079598cdae5f446589", "url": "https://github.com/checkstyle/checkstyle/commit/9a19f2c56d04468d7243dc079598cdae5f446589", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-17T15:08:22Z", "type": "forcePushed"}, {"oid": "aa522f1b8dbebb41b384e01705699ada8203e1a7", "url": "https://github.com/checkstyle/checkstyle/commit/aa522f1b8dbebb41b384e01705699ada8203e1a7", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-18T09:11:41Z", "type": "commit"}, {"oid": "aa522f1b8dbebb41b384e01705699ada8203e1a7", "url": "https://github.com/checkstyle/checkstyle/commit/aa522f1b8dbebb41b384e01705699ada8203e1a7", "message": "Issue #7848: SuppressWarningsHolder should not report violations", "committedDate": "2020-04-18T09:11:41Z", "type": "forcePushed"}]}