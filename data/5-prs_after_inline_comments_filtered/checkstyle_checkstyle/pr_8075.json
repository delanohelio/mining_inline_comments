{"pr_number": 8075, "pr_title": "Issue #7889: add UT to validate URL is correct in config.xml and fix a typo", "pr_createdAt": "2020-04-12T04:40:19Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8075", "timeline": [{"oid": "a91caf575df4d0b0db733ffec9e986b68f566c70", "url": "https://github.com/checkstyle/checkstyle/commit/a91caf575df4d0b0db733ffec9e986b68f566c70", "message": "doc: fix typo in checks.xml", "committedDate": "2020-04-16T05:17:40Z", "type": "forcePushed"}, {"oid": "a7b735e4c41c095fdb7c7ec24238e5d72d8cb794", "url": "https://github.com/checkstyle/checkstyle/commit/a7b735e4c41c095fdb7c7ec24238e5d72d8cb794", "message": "doc: fix typo in checks.xml", "committedDate": "2020-04-17T07:51:55Z", "type": "forcePushed"}, {"oid": "1ac07d2661524099b521282f40a83d70e80b47f8", "url": "https://github.com/checkstyle/checkstyle/commit/1ac07d2661524099b521282f40a83d70e80b47f8", "message": "doc: fix typo in checks.xml", "committedDate": "2020-04-19T16:24:51Z", "type": "forcePushed"}, {"oid": "6616c4b708376ddf49e63f9de57029934bc281c7", "url": "https://github.com/checkstyle/checkstyle/commit/6616c4b708376ddf49e63f9de57029934bc281c7", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-21T17:54:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM3NTIyMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r412375220", "bodyText": "I try my best but not find a way to solve CloseResource violation in pmd. If I add try-catch to fix violation in pmd, I will get another violation that Checkstyle only allow failure in try-catch when this is Test class.", "author": "HuGanghui", "createdAt": "2020-04-21T18:02:41Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,202 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");\n+    }\n+\n+    private static String getXmlPath() {\n+        return \"src/xdocs/checks.xml\";\n+    }\n+\n+    private Map<String, String[]> getXdocsMap() {\n+        final String rootPath = getRootPath();\n+        final File checks = new File(rootPath + \"/\" + PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootdir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(rootPath + \"/\" + PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list((rootdir, pathname) -> {\n+                    return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+                });\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list((rootdir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            });\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest myhandler = new CheckTest(NODE_NAME);\n+        final InputStream input = Files.newInputStream(", "originalCommit": "6616c4b708376ddf49e63f9de57029934bc281c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjYyNzgzNg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r412627836", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-22T02:44:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM3NTIyMA=="}], "type": "inlineReview"}, {"oid": "f68d84d1a1f5b138d470fb8006ef4472a7db890f", "url": "https://github.com/checkstyle/checkstyle/commit/f68d84d1a1f5b138d470fb8006ef4472a7db890f", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-22T02:31:17Z", "type": "forcePushed"}, {"oid": "812e38bd5add8e8ebf0a086c9c6bb036eb08b905", "url": "https://github.com/checkstyle/checkstyle/commit/812e38bd5add8e8ebf0a086c9c6bb036eb08b905", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-22T02:43:04Z", "type": "forcePushed"}, {"oid": "c815faa1137458927e76f09f291b077c14343a9f", "url": "https://github.com/checkstyle/checkstyle/commit/c815faa1137458927e76f09f291b077c14343a9f", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-22T04:58:47Z", "type": "forcePushed"}, {"oid": "04b300a32e07f45b6fb589a535b4f16f02bdf0ae", "url": "https://github.com/checkstyle/checkstyle/commit/04b300a32e07f45b6fb589a535b4f16f02bdf0ae", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-22T05:37:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc5NzMwOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r412797309", "bodyText": "please use try-with-resources here", "author": "strkkk", "createdAt": "2020-04-22T08:52:17Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,200 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");\n+    }\n+\n+    private static String getXmlPath() {\n+        return \"src/xdocs/checks.xml\";\n+    }\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final String rootPath = getRootPath();\n+        final File checks = new File(rootPath + \"/\" + PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(rootPath + \"/\" + PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list((rootDir, pathname) -> {\n+                    return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+                });\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list((rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            });\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final InputStream input = Files.newInputStream(", "originalCommit": "04b300a32e07f45b6fb589a535b4f16f02bdf0ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM4ODg4Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414388886", "bodyText": "done~", "author": "HuGanghui", "createdAt": "2020-04-24T08:22:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc5NzMwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc5ODMxNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r412798314", "bodyText": "strings != null && strings[0] != null && qName.equals(nodeName) this check is duplicated (see previous method)", "author": "strkkk", "createdAt": "2020-04-22T08:53:46Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,200 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");\n+    }\n+\n+    private static String getXmlPath() {\n+        return \"src/xdocs/checks.xml\";\n+    }\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final String rootPath = getRootPath();\n+        final File checks = new File(rootPath + \"/\" + PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(rootPath + \"/\" + PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list((rootDir, pathname) -> {\n+                    return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+                });\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list((rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            });\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final InputStream input = Files.newInputStream(\n+                Paths.get(getRootPath() + \"/\" + getXmlPath()));\n+        parser.parse(input, checkHandler);\n+        final String[][] strings = checkHandler.getStrings();\n+        input.close();\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (String[] sub : strings) {\n+            assertEquals(sub[1], sub[2],\n+                    \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                            + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            if (sub[1].equals(COMMENTS_INDENTATION) || sub[1].equals(INDENTATION)) {\n+                assertEquals(MISC, sub[0],\n+                        \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                                + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            }\n+            else if (sub[1].equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, sub[0],\n+                        \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                                + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(sub[0]);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    for (String filename : moduleFileNames) {\n+                        if ((sub[1] + SUFFIX_CHECK_JAVA).equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertTrue(match, \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                            + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+                }\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_ONE = \"#\";\n+\n+        public static final String SPLIT_TWO = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private final String nodeName;\n+\n+        private String[] strings;\n+\n+        private List<String[]> list;\n+\n+        private String currentTag;\n+\n+        public CheckTest(String nodeName) {\n+            this.nodeName = nodeName;\n+        }\n+\n+        public String[][] getStrings() {\n+            final String[][] stringArrays = new String[list.size()][];\n+            return list.toArray(stringArrays);\n+        }\n+\n+        @Override\n+        public void startDocument() {\n+            list = new ArrayList<>();\n+        }\n+\n+        @Override\n+        public void startElement(String uri, String localName, String qName,\n+                                 Attributes attributes) {\n+            if (qName.equals(nodeName)) {\n+                strings = new String[3];\n+                final String[] splitStrings = attributes.getValue(0).split(SPLIT_ONE);\n+                if (splitStrings[0].substring(0, 7).equals(PREFIX_CONFIG)) {\n+                    final String moduleName = splitStrings[0].substring(7).split(SPLIT_TWO)[0];\n+                    strings[0] = moduleName;\n+                    strings[1] = splitStrings[1];\n+                }\n+            }\n+            currentTag = qName;\n+        }\n+\n+        @Override\n+        public void characters(char[] ch, int start, int length) {\n+            if (currentTag != null && strings != null\n+                    && strings[0] != null && currentTag.equals(nodeName)) {\n+                final String currentValue = new String(ch, start, length).trim();\n+                if (!currentValue.isEmpty() && !\"\\n\".equals(currentValue)) {\n+                    strings[2] = currentValue;\n+                }\n+                currentTag = null;\n+            }\n+        }\n+\n+        @Override\n+        public void endElement(String uri, String localName, String qName) {\n+            if (strings != null && strings[0] != null && qName.equals(nodeName)) {", "originalCommit": "04b300a32e07f45b6fb589a535b4f16f02bdf0ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM5MDA2MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414390060", "bodyText": "actually, it is not duplicated and is meaningful. If I remove strings != null && strings[0] != null or  strings != null, it will both have null point error.", "author": "HuGanghui", "createdAt": "2020-04-24T08:24:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc5ODMxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4NDM4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414484388", "bodyText": "why don't use List instead of array? you can change both checks to just !list.isEmpty()", "author": "strkkk", "createdAt": "2020-04-24T10:55:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc5ODMxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU3MDM0NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414570344", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-24T13:20:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc5ODMxNA=="}], "type": "inlineReview"}, {"oid": "1df118293bfede0921fde7ba12159d31f1b31bc1", "url": "https://github.com/checkstyle/checkstyle/commit/1df118293bfede0921fde7ba12159d31f1b31bc1", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-24T08:12:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM4Njk2MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414386961", "bodyText": "now I use try but not catch block and it is ok. But when I use try-catch, will have a error as follows:\n[INFO] --- maven-checkstyle-plugin:3.1.1:check (sevntu-checkstyle-check) @ checkstyle ---\n[INFO] There is 1 error reported by Checkstyle 8.29 with /Users/hgh/Desktop/checkstyle/config/checkstyle_sevntu_checks.xml ruleset.\n[ERROR] src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java:[99,9] (extension) RequireFailForTryCatchInJunit: try/catch either requires a fail at the end of the try clause for junit tests or to remove the try/catch completely.\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 02:03 min\n[INFO] Finished at: 2020-04-24T16:16:58+08:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.1:check (sevntu-checkstyle-check) on project checkstyle: You have 1 Checkstyle violation. -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\nis it ok just use try block?", "author": "HuGanghui", "createdAt": "2020-04-24T08:19:11Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,200 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");\n+    }\n+\n+    private static String getXmlPath() {\n+        return \"src/xdocs/checks.xml\";\n+    }\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final String rootPath = getRootPath();\n+        final File checks = new File(rootPath + \"/\" + PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(rootPath + \"/\" + PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list((rootDir, pathname) -> {\n+                    return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+                });\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list((rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            });\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        try (InputStream input = Files.newInputStream(", "originalCommit": "1df118293bfede0921fde7ba12159d31f1b31bc1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1db1771af7aa14e61c3e1e01c8014c8097715cee", "url": "https://github.com/checkstyle/checkstyle/commit/1db1771af7aa14e61c3e1e01c8014c8097715cee", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-24T10:38:49Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4Mjg5Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414482892", "bodyText": "why not use static final field? Such method looks weird", "author": "strkkk", "createdAt": "2020-04-24T10:52:15Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,201 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");\n+    }\n+\n+    private static String getXmlPath() {\n+        return \"src/xdocs/checks.xml\";", "originalCommit": "1db1771af7aa14e61c3e1e01c8014c8097715cee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU3MDQyNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414570427", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-24T13:20:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4Mjg5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4MzYxNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414483615", "bodyText": "\"URL in\" + getXmlPath() + \" is inconsistent: \"\n                            + sub[0] + \" \" + sub[1] + \" \" + sub[2]\n\nThis string is duplicated 4 times. Please create a variable with this value and reuse it", "author": "strkkk", "createdAt": "2020-04-24T10:53:40Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,201 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");\n+    }\n+\n+    private static String getXmlPath() {\n+        return \"src/xdocs/checks.xml\";\n+    }\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final String rootPath = getRootPath();\n+        final File checks = new File(rootPath + \"/\" + PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(rootPath + \"/\" + PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list((rootDir, pathname) -> {\n+                    return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+                });\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list((rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            });\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final String[][] strings;\n+        try (InputStream input = Files.newInputStream(\n+                Paths.get(getRootPath() + \"/\" + getXmlPath()))) {\n+            parser.parse(input, checkHandler);\n+            strings = checkHandler.getStrings();\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (String[] sub : strings) {\n+            assertEquals(sub[1], sub[2],\n+                    \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                            + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            if (sub[1].equals(COMMENTS_INDENTATION) || sub[1].equals(INDENTATION)) {\n+                assertEquals(MISC, sub[0],\n+                        \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                                + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            }\n+            else if (sub[1].equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, sub[0],\n+                        \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                                + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(sub[0]);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    for (String filename : moduleFileNames) {\n+                        if ((sub[1] + SUFFIX_CHECK_JAVA).equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertTrue(match, \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                            + sub[0] + \" \" + sub[1] + \" \" + sub[2]);", "originalCommit": "1db1771af7aa14e61c3e1e01c8014c8097715cee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU3MDU2MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414570561", "bodyText": "done~", "author": "HuGanghui", "createdAt": "2020-04-24T13:21:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4MzYxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4NDcyNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414484725", "bodyText": "substring(0, 7) why 7? please avoid magic numbers", "author": "strkkk", "createdAt": "2020-04-24T10:55:39Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,201 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");\n+    }\n+\n+    private static String getXmlPath() {\n+        return \"src/xdocs/checks.xml\";\n+    }\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final String rootPath = getRootPath();\n+        final File checks = new File(rootPath + \"/\" + PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(rootPath + \"/\" + PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list((rootDir, pathname) -> {\n+                    return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+                });\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list((rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            });\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final String[][] strings;\n+        try (InputStream input = Files.newInputStream(\n+                Paths.get(getRootPath() + \"/\" + getXmlPath()))) {\n+            parser.parse(input, checkHandler);\n+            strings = checkHandler.getStrings();\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (String[] sub : strings) {\n+            assertEquals(sub[1], sub[2],\n+                    \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                            + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            if (sub[1].equals(COMMENTS_INDENTATION) || sub[1].equals(INDENTATION)) {\n+                assertEquals(MISC, sub[0],\n+                        \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                                + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            }\n+            else if (sub[1].equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, sub[0],\n+                        \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                                + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(sub[0]);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    for (String filename : moduleFileNames) {\n+                        if ((sub[1] + SUFFIX_CHECK_JAVA).equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertTrue(match, \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                            + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+                }\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_ONE = \"#\";\n+\n+        public static final String SPLIT_TWO = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private final String nodeName;\n+\n+        private String[] strings;\n+\n+        private List<String[]> list;\n+\n+        private String currentTag;\n+\n+        public CheckTest(String nodeName) {\n+            this.nodeName = nodeName;\n+        }\n+\n+        public String[][] getStrings() {\n+            final String[][] stringArrays = new String[list.size()][];\n+            return list.toArray(stringArrays);\n+        }\n+\n+        @Override\n+        public void startDocument() {\n+            list = new ArrayList<>();\n+        }\n+\n+        @Override\n+        public void startElement(String uri, String localName, String qName,\n+                                 Attributes attributes) {\n+            if (qName.equals(nodeName)) {\n+                strings = new String[3];\n+                final String[] splitStrings = attributes.getValue(0).split(SPLIT_ONE);\n+                if (splitStrings[0].substring(0, 7).equals(PREFIX_CONFIG)) {", "originalCommit": "1db1771af7aa14e61c3e1e01c8014c8097715cee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU3MDY0NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414570645", "bodyText": "done~", "author": "HuGanghui", "createdAt": "2020-04-24T13:21:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4NDcyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4NTg0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414485843", "bodyText": "(rootDir, pathname) -> {\n                    return pathname.endsWith(SUFFIX_CHECK_JAVA);\n                }\n\nthis predicate is also duplicated 3 times (negation counts as well), please make it a variable", "author": "strkkk", "createdAt": "2020-04-24T10:57:35Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,201 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");\n+    }\n+\n+    private static String getXmlPath() {\n+        return \"src/xdocs/checks.xml\";\n+    }\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final String rootPath = getRootPath();\n+        final File checks = new File(rootPath + \"/\" + PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(rootPath + \"/\" + PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list((rootDir, pathname) -> {\n+                    return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+                });", "originalCommit": "1db1771af7aa14e61c3e1e01c8014c8097715cee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU3MDkyNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414570925", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-24T13:21:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4NTg0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4Njg2MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414486861", "bodyText": "System.getProperty(\"user.dir\") I do not really understand purpose of this", "author": "strkkk", "createdAt": "2020-04-24T10:59:29Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,201 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");", "originalCommit": "1db1771af7aa14e61c3e1e01c8014c8097715cee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU3NTIwMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414575203", "bodyText": "done, I use Paths.get() to get file path now", "author": "HuGanghui", "createdAt": "2020-04-24T13:27:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4Njg2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4NzU2Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414487563", "bodyText": "Why don't use list or map? it is way more convenient than multidimensional arrays. Please change.", "author": "strkkk", "createdAt": "2020-04-24T11:00:53Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,201 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static String getRootPath() {\n+        return System.getProperty(\"user.dir\");\n+    }\n+\n+    private static String getXmlPath() {\n+        return \"src/xdocs/checks.xml\";\n+    }\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final String rootPath = getRootPath();\n+        final File checks = new File(rootPath + \"/\" + PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(rootPath + \"/\" + PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list((rootDir, pathname) -> {\n+                    return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+                });\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list((rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            });\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final String[][] strings;\n+        try (InputStream input = Files.newInputStream(\n+                Paths.get(getRootPath() + \"/\" + getXmlPath()))) {\n+            parser.parse(input, checkHandler);\n+            strings = checkHandler.getStrings();\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (String[] sub : strings) {\n+            assertEquals(sub[1], sub[2],\n+                    \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                            + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            if (sub[1].equals(COMMENTS_INDENTATION) || sub[1].equals(INDENTATION)) {\n+                assertEquals(MISC, sub[0],\n+                        \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                                + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            }\n+            else if (sub[1].equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, sub[0],\n+                        \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                                + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(sub[0]);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    for (String filename : moduleFileNames) {\n+                        if ((sub[1] + SUFFIX_CHECK_JAVA).equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertTrue(match, \"URL in\" + getXmlPath() + \" is inconsistent: \"\n+                            + sub[0] + \" \" + sub[1] + \" \" + sub[2]);\n+                }\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_ONE = \"#\";\n+\n+        public static final String SPLIT_TWO = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private final String nodeName;\n+\n+        private String[] strings;\n+\n+        private List<String[]> list;\n+\n+        private String currentTag;\n+\n+        public CheckTest(String nodeName) {\n+            this.nodeName = nodeName;\n+        }\n+\n+        public String[][] getStrings() {", "originalCommit": "1db1771af7aa14e61c3e1e01c8014c8097715cee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU3NTUwOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r414575509", "bodyText": "done~", "author": "HuGanghui", "createdAt": "2020-04-24T13:27:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ4NzU2Mw=="}], "type": "inlineReview"}, {"oid": "733708ca2a06e70960ded01a8c489acbf39de48c", "url": "https://github.com/checkstyle/checkstyle/commit/733708ca2a06e70960ded01a8c489acbf39de48c", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-24T13:19:32Z", "type": "forcePushed"}, {"oid": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "url": "https://github.com/checkstyle/checkstyle/commit/61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-24T14:50:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MTUwNg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415051506", "bodyText": "I see no need for this variable", "author": "strkkk", "createdAt": "2020-04-25T12:19:28Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,197 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final Path PACKAGE_NAME_PATH =\n+            Paths.get(\"src/main/java/com/puppycrawl/tools/checkstyle/checks\");\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME_PATH.toString());\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME_PATH + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final List<List<String>> list;", "originalCommit": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTIwNjU5Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415206593", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T03:53:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MTUwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MTUxNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415051514", "bodyText": "why do you need to convert it to Path?\nI see 2 usages and both of them converting path to string.", "author": "strkkk", "createdAt": "2020-04-25T12:19:32Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,197 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final Path PACKAGE_NAME_PATH =\n+            Paths.get(\"src/main/java/com/puppycrawl/tools/checkstyle/checks\");", "originalCommit": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTIwNjY0NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415206645", "bodyText": "done, this is  not necessary", "author": "HuGanghui", "createdAt": "2020-04-26T03:53:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MTUxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjEyMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415052123", "bodyText": "Please use String.format", "author": "strkkk", "createdAt": "2020-04-25T12:23:10Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,197 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final Path PACKAGE_NAME_PATH =\n+            Paths.get(\"src/main/java/com/puppycrawl/tools/checkstyle/checks\");\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME_PATH.toString());\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME_PATH + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final List<List<String>> list;\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+            list = checkHandler.list;\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage =\n+                    \"URL in\" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                            + moduleName + \" \" + checkName1 + \" \" + checkName2;", "originalCommit": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTIwNjM0NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415206344", "bodyText": "String.format is forbidden, so I retain it\n[ERROR] Forbidden method invocation: java.lang.String#format(java.lang.String,java.lang.Object[]) [Uses default locale]\n[ERROR]   in com.puppycrawl.tools.checkstyle.internal.XdocsUrlTest (XdocsUrlTest.java:99)\n[ERROR] Scanned 2034 class file(s) for forbidden API invocations (in 1.54s), 1 error(s).", "author": "HuGanghui", "createdAt": "2020-04-26T03:51:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjEyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI1OTk4NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415259985", "bodyText": "It is not forbidden, its usage without explicit locale setting is forbidden.\nYou should use String.format(Locale.ROOT, \"template\", args) method\nYou can find examples in codebase", "author": "strkkk", "createdAt": "2020-04-26T09:04:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjEyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0MzAwNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415343007", "bodyText": "done~", "author": "HuGanghui", "createdAt": "2020-04-26T16:05:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjEyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjI1Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415052252", "bodyText": "assertEquals\nFor new unit tests google Truth assertWithMessage should be used", "author": "strkkk", "createdAt": "2020-04-25T12:23:52Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,197 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final Path PACKAGE_NAME_PATH =\n+            Paths.get(\"src/main/java/com/puppycrawl/tools/checkstyle/checks\");\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME_PATH.toString());\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME_PATH + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final List<List<String>> list;\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+            list = checkHandler.list;\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage =\n+                    \"URL in\" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                            + moduleName + \" \" + checkName1 + \" \" + checkName2;\n+            assertEquals(checkName1, checkName2, errorMessage);\n+            if (checkName1.equals(COMMENTS_INDENTATION) || checkName1.equals(INDENTATION)) {\n+                assertEquals(MISC, moduleName, errorMessage);\n+            }\n+            else if (checkName1.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, moduleName, errorMessage);", "originalCommit": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTIwNjY2Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415206663", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T03:53:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjI1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjQwMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415052403", "bodyText": "same for other assertions", "author": "strkkk", "createdAt": "2020-04-25T12:24:48Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,197 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final Path PACKAGE_NAME_PATH =\n+            Paths.get(\"src/main/java/com/puppycrawl/tools/checkstyle/checks\");\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME_PATH.toString());\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME_PATH + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final List<List<String>> list;\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+            list = checkHandler.list;\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage =\n+                    \"URL in\" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                            + moduleName + \" \" + checkName1 + \" \" + checkName2;\n+            assertEquals(checkName1, checkName2, errorMessage);\n+            if (checkName1.equals(COMMENTS_INDENTATION) || checkName1.equals(INDENTATION)) {\n+                assertEquals(MISC, moduleName, errorMessage);\n+            }\n+            else if (checkName1.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, moduleName, errorMessage);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(moduleName);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    for (String filename : moduleFileNames) {\n+                        if ((checkName1 + SUFFIX_CHECK_JAVA).equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertTrue(match, errorMessage);", "originalCommit": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTIwNjY4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415206688", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T03:53:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjQwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjU5Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415052593", "bodyText": "why you need to create copy of list?\nI see no usages of this getList() method in code", "author": "strkkk", "createdAt": "2020-04-25T12:26:04Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,197 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final Path PACKAGE_NAME_PATH =\n+            Paths.get(\"src/main/java/com/puppycrawl/tools/checkstyle/checks\");\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME_PATH.toString());\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME_PATH + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final List<List<String>> list;\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+            list = checkHandler.list;\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage =\n+                    \"URL in\" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                            + moduleName + \" \" + checkName1 + \" \" + checkName2;\n+            assertEquals(checkName1, checkName2, errorMessage);\n+            if (checkName1.equals(COMMENTS_INDENTATION) || checkName1.equals(INDENTATION)) {\n+                assertEquals(MISC, moduleName, errorMessage);\n+            }\n+            else if (checkName1.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, moduleName, errorMessage);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(moduleName);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    for (String filename : moduleFileNames) {\n+                        if ((checkName1 + SUFFIX_CHECK_JAVA).equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertTrue(match, errorMessage);\n+                }\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_ONE = \"#\";\n+\n+        public static final String SPLIT_TWO = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private final String nodeName;\n+\n+        private List<List<String>> list;\n+\n+        private List<String> stringList;\n+\n+        private String currentTag;\n+\n+        public CheckTest(String nodeName) {\n+            this.nodeName = nodeName;\n+        }\n+\n+        public List<List<String>> getList() {\n+            final List<List<String>> copyList = new ArrayList<>();\n+            for (List<String> elemList: list) {\n+                final List<String> tempList = new ArrayList<>(elemList);\n+                copyList.add(tempList);\n+            }\n+            return copyList;", "originalCommit": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTIwNjc0OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415206748", "bodyText": "done, remove it, it is redundant", "author": "HuGanghui", "createdAt": "2020-04-26T03:54:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MjU5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1Mjg0Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415052842", "bodyText": ".substring(0, PREFIX_CONFIG.length()).equals(PREFIX_CONFIG)\nstartsWith(PREFIX_CONFIG) looks simpler", "author": "strkkk", "createdAt": "2020-04-25T12:27:36Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,197 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final Path PACKAGE_NAME_PATH =\n+            Paths.get(\"src/main/java/com/puppycrawl/tools/checkstyle/checks\");\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME_PATH.toString());\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME_PATH + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final List<List<String>> list;\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+            list = checkHandler.list;\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage =\n+                    \"URL in\" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                            + moduleName + \" \" + checkName1 + \" \" + checkName2;\n+            assertEquals(checkName1, checkName2, errorMessage);\n+            if (checkName1.equals(COMMENTS_INDENTATION) || checkName1.equals(INDENTATION)) {\n+                assertEquals(MISC, moduleName, errorMessage);\n+            }\n+            else if (checkName1.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, moduleName, errorMessage);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(moduleName);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    for (String filename : moduleFileNames) {\n+                        if ((checkName1 + SUFFIX_CHECK_JAVA).equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertTrue(match, errorMessage);\n+                }\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_ONE = \"#\";\n+\n+        public static final String SPLIT_TWO = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private final String nodeName;\n+\n+        private List<List<String>> list;\n+\n+        private List<String> stringList;\n+\n+        private String currentTag;\n+\n+        public CheckTest(String nodeName) {\n+            this.nodeName = nodeName;\n+        }\n+\n+        public List<List<String>> getList() {\n+            final List<List<String>> copyList = new ArrayList<>();\n+            for (List<String> elemList: list) {\n+                final List<String> tempList = new ArrayList<>(elemList);\n+                copyList.add(tempList);\n+            }\n+            return copyList;\n+        }\n+\n+        @Override\n+        public void startDocument() {\n+            list = new ArrayList<>();\n+        }\n+\n+        @Override\n+        public void startElement(String uri, String localName, String qName,\n+                                 Attributes attributes) {\n+            if (qName.equals(nodeName)) {\n+                final String[] splitStrings = attributes.getValue(0).split(SPLIT_ONE);\n+                if (splitStrings[0].substring(0, PREFIX_CONFIG.length()).equals(PREFIX_CONFIG)) {", "originalCommit": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTIwNjc3Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415206772", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T03:54:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1Mjg0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MzEwNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415053105", "bodyText": "splitStrings[0].substring(PREFIX_CONFIG.length()).split(SPLIT_TWO)[0];\nIt is not clear how module name is extracted.", "author": "strkkk", "createdAt": "2020-04-25T12:29:10Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,197 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final Path PACKAGE_NAME_PATH =\n+            Paths.get(\"src/main/java/com/puppycrawl/tools/checkstyle/checks\");\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME_PATH.toString());\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME_PATH + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final List<List<String>> list;\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+            list = checkHandler.list;\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage =\n+                    \"URL in\" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                            + moduleName + \" \" + checkName1 + \" \" + checkName2;\n+            assertEquals(checkName1, checkName2, errorMessage);\n+            if (checkName1.equals(COMMENTS_INDENTATION) || checkName1.equals(INDENTATION)) {\n+                assertEquals(MISC, moduleName, errorMessage);\n+            }\n+            else if (checkName1.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, moduleName, errorMessage);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(moduleName);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    for (String filename : moduleFileNames) {\n+                        if ((checkName1 + SUFFIX_CHECK_JAVA).equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertTrue(match, errorMessage);\n+                }\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_ONE = \"#\";\n+\n+        public static final String SPLIT_TWO = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private final String nodeName;\n+\n+        private List<List<String>> list;\n+\n+        private List<String> stringList;\n+\n+        private String currentTag;\n+\n+        public CheckTest(String nodeName) {\n+            this.nodeName = nodeName;\n+        }\n+\n+        public List<List<String>> getList() {\n+            final List<List<String>> copyList = new ArrayList<>();\n+            for (List<String> elemList: list) {\n+                final List<String> tempList = new ArrayList<>(elemList);\n+                copyList.add(tempList);\n+            }\n+            return copyList;\n+        }\n+\n+        @Override\n+        public void startDocument() {\n+            list = new ArrayList<>();\n+        }\n+\n+        @Override\n+        public void startElement(String uri, String localName, String qName,\n+                                 Attributes attributes) {\n+            if (qName.equals(nodeName)) {\n+                final String[] splitStrings = attributes.getValue(0).split(SPLIT_ONE);\n+                if (splitStrings[0].substring(0, PREFIX_CONFIG.length()).equals(PREFIX_CONFIG)) {\n+                    stringList = new ArrayList<>();\n+                    final String moduleName =\n+                            splitStrings[0].substring(PREFIX_CONFIG.length()).split(SPLIT_TWO)[0];", "originalCommit": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTIwNjc4NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415206784", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T03:54:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MzEwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2MDUyOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415260529", "bodyText": "It is not clear.\nThe reason I am asking is that variable names like splitStrings, SPLIT_ONE and SPLIT_TWO tells me nothing about logic, it is hard to follow.", "author": "strkkk", "createdAt": "2020-04-26T09:06:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MzEwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0Mjc1OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415342758", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T16:04:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MzEwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MzIxMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415053213", "bodyText": "checkName1 + SUFFIX_CHECK_JAVA\nshould be extracted to variable to avoid concat every time", "author": "strkkk", "createdAt": "2020-04-25T12:29:56Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,197 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final Path PACKAGE_NAME_PATH =\n+            Paths.get(\"src/main/java/com/puppycrawl/tools/checkstyle/checks\");\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME_PATH.toString());\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME_PATH + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        final List<List<String>> list;\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+            list = checkHandler.list;\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage =\n+                    \"URL in\" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                            + moduleName + \" \" + checkName1 + \" \" + checkName2;\n+            assertEquals(checkName1, checkName2, errorMessage);\n+            if (checkName1.equals(COMMENTS_INDENTATION) || checkName1.equals(INDENTATION)) {\n+                assertEquals(MISC, moduleName, errorMessage);\n+            }\n+            else if (checkName1.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertEquals(ANNOTATION, moduleName, errorMessage);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(moduleName);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    for (String filename : moduleFileNames) {\n+                        if ((checkName1 + SUFFIX_CHECK_JAVA).equals(filename)) {", "originalCommit": "61a0561609215d2ce89b16edfa0dcb9d7ac79fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTIwNjc5NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415206795", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T03:54:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA1MzIxMw=="}], "type": "inlineReview"}, {"oid": "f2fe0615a0bfd25579f32ea6200e9d8524191f43", "url": "https://github.com/checkstyle/checkstyle/commit/f2fe0615a0bfd25579f32ea6200e9d8524191f43", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-26T03:11:18Z", "type": "forcePushed"}, {"oid": "d7f34a58ef39199df4a0903559d240e7887e1fe9", "url": "https://github.com/checkstyle/checkstyle/commit/d7f34a58ef39199df4a0903559d240e7887e1fe9", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-26T03:52:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2MTIwNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415261204", "bodyText": "checkName1 and checkName2 please rename to make it more understandable", "author": "strkkk", "createdAt": "2020-04-26T09:10:36Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,186 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);", "originalCommit": "d7f34a58ef39199df4a0903559d240e7887e1fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0Mjc5Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415342792", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T16:04:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2MTIwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2MTQ2OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415261468", "bodyText": "here just names are listed, but it is not clear what it is incorrect", "author": "strkkk", "createdAt": "2020-04-26T09:11:45Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,186 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage = \"URL in \" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                    + moduleName + \" \" + checkName1 + \" \" + checkName2;", "originalCommit": "d7f34a58ef39199df4a0903559d240e7887e1fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0Mjg3NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415342875", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T16:05:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2MTQ2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2MTk4Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415261986", "bodyText": "no need to make a constructor for this, the only value for node is \"a\", it can be used directly", "author": "strkkk", "createdAt": "2020-04-26T09:14:46Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,186 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage = \"URL in \" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                    + moduleName + \" \" + checkName1 + \" \" + checkName2;\n+            assertWithMessage(errorMessage).that(checkName2).matches(checkName1);\n+            if (checkName1.equals(COMMENTS_INDENTATION) || checkName1.equals(INDENTATION)) {\n+                assertWithMessage(errorMessage).that(moduleName).matches(MISC);\n+            }\n+            else if (checkName1.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertWithMessage(errorMessage).that(moduleName).matches(ANNOTATION);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(moduleName);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    final String checkNameWithSuffix = checkName1 + SUFFIX_CHECK_JAVA;\n+                    for (String filename : moduleFileNames) {\n+                        if (checkNameWithSuffix.equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertWithMessage(errorMessage).that(match).isTrue();\n+                }\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_ONE = \"#\";\n+\n+        public static final String SPLIT_TWO = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private final String nodeName;\n+\n+        private List<List<String>> list;\n+\n+        private List<String> stringList;\n+\n+        private String currentTag;\n+\n+        public CheckTest(String nodeName) {\n+            this.nodeName = nodeName;", "originalCommit": "d7f34a58ef39199df4a0903559d240e7887e1fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0Mjg3OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415342879", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T16:05:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2MTk4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2MjE3NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415262174", "bodyText": "please rename variables. It is confusing to see list and stringList, it is not clear what they are for", "author": "strkkk", "createdAt": "2020-04-26T09:15:56Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,186 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String NODE_NAME = \"a\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest(NODE_NAME);\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.list) {\n+            final String moduleName = sub.get(0);\n+            final String checkName1 = sub.get(1);\n+            final String checkName2 = sub.get(2);\n+            final String errorMessage = \"URL in \" + AVAILABLE_CHECKS_PATH + \" is inconsistent: \"\n+                    + moduleName + \" \" + checkName1 + \" \" + checkName2;\n+            assertWithMessage(errorMessage).that(checkName2).matches(checkName1);\n+            if (checkName1.equals(COMMENTS_INDENTATION) || checkName1.equals(INDENTATION)) {\n+                assertWithMessage(errorMessage).that(moduleName).matches(MISC);\n+            }\n+            else if (checkName1.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertWithMessage(errorMessage).that(moduleName).matches(ANNOTATION);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(moduleName);\n+                if (moduleFileNames != null) {\n+                    boolean match = false;\n+                    final String checkNameWithSuffix = checkName1 + SUFFIX_CHECK_JAVA;\n+                    for (String filename : moduleFileNames) {\n+                        if (checkNameWithSuffix.equals(filename)) {\n+                            match = true;\n+                            break;\n+                        }\n+                    }\n+                    assertWithMessage(errorMessage).that(match).isTrue();\n+                }\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_ONE = \"#\";\n+\n+        public static final String SPLIT_TWO = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private final String nodeName;\n+\n+        private List<List<String>> list;\n+\n+        private List<String> stringList;", "originalCommit": "d7f34a58ef39199df4a0903559d240e7887e1fe9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0Mjg4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415342888", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-26T16:05:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2MjE3NA=="}], "type": "inlineReview"}, {"oid": "53103c69044469933432c3dafc2b9955560b6e46", "url": "https://github.com/checkstyle/checkstyle/commit/53103c69044469933432c3dafc2b9955560b6e46", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-26T16:02:54Z", "type": "forcePushed"}, {"oid": "8d79d13ee38142ad26acac05d52d3cfbdb234743", "url": "https://github.com/checkstyle/checkstyle/commit/8d79d13ee38142ad26acac05d52d3cfbdb234743", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-27T01:24:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2NDczMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415664733", "bodyText": "it looks like same thing can be done with simple regex (remove start and end of module name\nmoduleNameWithHtml.replaceAll((\".*config_)|(\\\\.html.*))", "author": "strkkk", "createdAt": "2020-04-27T09:40:45Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,189 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest();\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.checkNamesList) {\n+            final String moduleName = sub.get(0);\n+            final String checkNameInAttribute = sub.get(1);\n+            final String checkNameInText = sub.get(2);\n+            final String checkNameInconsistentErrorMsg = String.format(Locale.ROOT,\n+                    \"checkName %s in attribute is not consistent with %s in text in %s\",\n+                    checkNameInAttribute, checkNameInText, AVAILABLE_CHECKS_PATH);\n+            assertWithMessage(checkNameInconsistentErrorMsg)\n+                    .that(checkNameInText).matches(checkNameInAttribute);\n+            final String checkNameModuleErrorMsg = String.format(Locale.ROOT,\n+                    \"checkName %s is not in %s module\", checkNameInAttribute, moduleName);\n+            if (checkNameInAttribute.equals(COMMENTS_INDENTATION)\n+                    || checkNameInAttribute.equals(INDENTATION)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(MISC);\n+            }\n+            else if (checkNameInAttribute.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(ANNOTATION);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(moduleName);\n+                final String moduleNameErrorMsg = String.format(Locale.ROOT,\n+                        \"module name: %s is not exist in %s\", moduleName, PACKAGE_NAME);\n+                assertWithMessage(moduleNameErrorMsg).that(moduleFileNames).isNotNull();\n+                boolean match = false;\n+                final String checkNameWithSuffix = checkNameInAttribute + SUFFIX_CHECK_JAVA;\n+                for (String filename : moduleFileNames) {\n+                    if (checkNameWithSuffix.equals(filename)) {\n+                        match = true;\n+                        break;\n+                    }\n+                }\n+                assertWithMessage(checkNameModuleErrorMsg).that(match).isTrue();\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_CHECK_NAME_IN_ATTRIBUTE = \"#\";\n+\n+        public static final String SPLIT_MODULE_NAME_IN_ATTRIBUTE = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private static final String NODE_NAME = \"a\";\n+\n+        private List<List<String>> checkNamesList;\n+\n+        private List<String> singleCheckNameList;\n+\n+        private String currentTag;\n+\n+        @Override\n+        public void startDocument() {\n+            checkNamesList = new ArrayList<>();\n+        }\n+\n+        @Override\n+        public void startElement(String uri, String localName, String qName,\n+                                 Attributes attributes) {\n+            if (qName.equals(NODE_NAME)) {\n+                final String[] moduleAndCheckName =\n+                        attributes.getValue(0).split(SPLIT_CHECK_NAME_IN_ATTRIBUTE);\n+                if (moduleAndCheckName[0].startsWith(PREFIX_CONFIG)) {\n+                    singleCheckNameList = new ArrayList<>();\n+                    final String moduleNameWithHtml =\n+                            moduleAndCheckName[0].substring(PREFIX_CONFIG.length());\n+                    final String moduleName =\n+                            moduleNameWithHtml.split(SPLIT_MODULE_NAME_IN_ATTRIBUTE)[0];", "originalCommit": "8d79d13ee38142ad26acac05d52d3cfbdb234743", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg3ODQ1Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415878457", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-27T14:49:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2NDczMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2ODE0OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415668149", "bodyText": "it is better to have this list and clear it every time, e.g.\nif(qName.equals(NODE_NAME)) {\n  checkNamesList.addAll(singleCheckNameList);\n  singleCheckNameList.clear();\n}\n\nAnd you can remove line 158 and init field with empty list\nSame can be done for checkNamesList ( can be cleared in endDocument method)", "author": "strkkk", "createdAt": "2020-04-27T09:45:49Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,189 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest();\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.checkNamesList) {\n+            final String moduleName = sub.get(0);\n+            final String checkNameInAttribute = sub.get(1);\n+            final String checkNameInText = sub.get(2);\n+            final String checkNameInconsistentErrorMsg = String.format(Locale.ROOT,\n+                    \"checkName %s in attribute is not consistent with %s in text in %s\",\n+                    checkNameInAttribute, checkNameInText, AVAILABLE_CHECKS_PATH);\n+            assertWithMessage(checkNameInconsistentErrorMsg)\n+                    .that(checkNameInText).matches(checkNameInAttribute);\n+            final String checkNameModuleErrorMsg = String.format(Locale.ROOT,\n+                    \"checkName %s is not in %s module\", checkNameInAttribute, moduleName);\n+            if (checkNameInAttribute.equals(COMMENTS_INDENTATION)\n+                    || checkNameInAttribute.equals(INDENTATION)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(MISC);\n+            }\n+            else if (checkNameInAttribute.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(ANNOTATION);\n+            }\n+            else {\n+                final String[] moduleFileNames = checksNamesMap.get(moduleName);\n+                final String moduleNameErrorMsg = String.format(Locale.ROOT,\n+                        \"module name: %s is not exist in %s\", moduleName, PACKAGE_NAME);\n+                assertWithMessage(moduleNameErrorMsg).that(moduleFileNames).isNotNull();\n+                boolean match = false;\n+                final String checkNameWithSuffix = checkNameInAttribute + SUFFIX_CHECK_JAVA;\n+                for (String filename : moduleFileNames) {\n+                    if (checkNameWithSuffix.equals(filename)) {\n+                        match = true;\n+                        break;\n+                    }\n+                }\n+                assertWithMessage(checkNameModuleErrorMsg).that(match).isTrue();\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        public static final String SPLIT_CHECK_NAME_IN_ATTRIBUTE = \"#\";\n+\n+        public static final String SPLIT_MODULE_NAME_IN_ATTRIBUTE = \"\\\\.\";\n+\n+        public static final String PREFIX_CONFIG = \"config_\";\n+\n+        private static final String NODE_NAME = \"a\";\n+\n+        private List<List<String>> checkNamesList;\n+\n+        private List<String> singleCheckNameList;\n+\n+        private String currentTag;\n+\n+        @Override\n+        public void startDocument() {\n+            checkNamesList = new ArrayList<>();\n+        }\n+\n+        @Override\n+        public void startElement(String uri, String localName, String qName,\n+                                 Attributes attributes) {\n+            if (qName.equals(NODE_NAME)) {\n+                final String[] moduleAndCheckName =\n+                        attributes.getValue(0).split(SPLIT_CHECK_NAME_IN_ATTRIBUTE);\n+                if (moduleAndCheckName[0].startsWith(PREFIX_CONFIG)) {\n+                    singleCheckNameList = new ArrayList<>();\n+                    final String moduleNameWithHtml =\n+                            moduleAndCheckName[0].substring(PREFIX_CONFIG.length());\n+                    final String moduleName =\n+                            moduleNameWithHtml.split(SPLIT_MODULE_NAME_IN_ATTRIBUTE)[0];\n+                    singleCheckNameList.add(moduleName);\n+                    singleCheckNameList.add(moduleAndCheckName[1]);\n+                }\n+            }\n+            currentTag = qName;\n+        }\n+\n+        @Override\n+        public void characters(char[] ch, int start, int length) {\n+            if (currentTag != null && singleCheckNameList != null && currentTag.equals(NODE_NAME)) {\n+                final String currentValue = new String(ch, start, length).trim();\n+                if (!currentValue.isEmpty() && !\"\\n\".equals(currentValue)) {\n+                    singleCheckNameList.add(currentValue);\n+                }\n+                currentTag = null;\n+            }\n+        }\n+\n+        @Override\n+        public void endElement(String uri, String localName, String qName) {\n+            if (singleCheckNameList != null && qName.equals(NODE_NAME)) {\n+                checkNamesList.add(singleCheckNameList);\n+                singleCheckNameList = null;", "originalCommit": "8d79d13ee38142ad26acac05d52d3cfbdb234743", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4Mzc3Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415883773", "bodyText": "it is not proper, although singleCheckNameList is added to checkNamesList, two references point to the same object, so if clear(), checkNamesList will contain nothing. Same as checkNamesList if it is cleared in endDocument, error will happen in line 94 \"for (List sub : checkHandler.checkNamesList) {\" which is empty", "author": "HuGanghui", "createdAt": "2020-04-27T14:55:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2ODE0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2OTUwMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415669501", "bodyText": "checkName -> Check with name\nall %s -> '%s'\nwith %s -> with check name\ntext in %s -> text in file '%s'", "author": "strkkk", "createdAt": "2020-04-27T09:47:47Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,189 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest();\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.checkNamesList) {\n+            final String moduleName = sub.get(0);\n+            final String checkNameInAttribute = sub.get(1);\n+            final String checkNameInText = sub.get(2);\n+            final String checkNameInconsistentErrorMsg = String.format(Locale.ROOT,\n+                    \"checkName %s in attribute is not consistent with %s in text in %s\",", "originalCommit": "8d79d13ee38142ad26acac05d52d3cfbdb234743", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4Mzg2NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415883865", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-27T14:55:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2OTUwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2OTU5Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415669597", "bodyText": "same here", "author": "strkkk", "createdAt": "2020-04-27T09:47:56Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,189 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });\n+        final Map<String, String[]> checksNamesMap = new HashMap<>();\n+        if (checksSubDirNames != null) {\n+            final FilenameFilter filter = (rootDir, pathname) -> {\n+                return pathname.endsWith(SUFFIX_CHECK_JAVA);\n+            };\n+            for (String dirName : checksSubDirNames) {\n+                final File dirFile = new File(PACKAGE_NAME + \"/\" + dirName);\n+                final String[] fileNames = dirFile.list(filter);\n+                checksNamesMap.put(dirName, fileNames);\n+            }\n+            final String[] miscNames = checks.list(filter);\n+            checksNamesMap.put(MISC, miscNames);\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest();\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, String[]> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.checkNamesList) {\n+            final String moduleName = sub.get(0);\n+            final String checkNameInAttribute = sub.get(1);\n+            final String checkNameInText = sub.get(2);\n+            final String checkNameInconsistentErrorMsg = String.format(Locale.ROOT,\n+                    \"checkName %s in attribute is not consistent with %s in text in %s\",\n+                    checkNameInAttribute, checkNameInText, AVAILABLE_CHECKS_PATH);\n+            assertWithMessage(checkNameInconsistentErrorMsg)\n+                    .that(checkNameInText).matches(checkNameInAttribute);\n+            final String checkNameModuleErrorMsg = String.format(Locale.ROOT,\n+                    \"checkName %s is not in %s module\", checkNameInAttribute, moduleName);", "originalCommit": "8d79d13ee38142ad26acac05d52d3cfbdb234743", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4MzkyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r415883924", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-27T14:55:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2OTU5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjUyMjg0Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r416522847", "bodyText": "no, it is not done :)", "author": "strkkk", "createdAt": "2020-04-28T11:00:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2OTU5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3NDg1OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r416674859", "bodyText": "done, sorry I missed it.", "author": "HuGanghui", "createdAt": "2020-04-28T14:47:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2OTU5Nw=="}], "type": "inlineReview"}, {"oid": "efe848ee48e06384bebe00955a62713b01161800", "url": "https://github.com/checkstyle/checkstyle/commit/efe848ee48e06384bebe00955a62713b01161800", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-27T14:43:01Z", "type": "forcePushed"}, {"oid": "b2ceac39a9edff7200f6ecb01139d6f9186fc822", "url": "https://github.com/checkstyle/checkstyle/commit/b2ceac39a9edff7200f6ecb01139d6f9186fc822", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-28T14:44:07Z", "type": "forcePushed"}, {"oid": "b2f70bccb0b2bfd9bf04c5a446e41ce39fa0b65a", "url": "https://github.com/checkstyle/checkstyle/commit/b2f70bccb0b2bfd9bf04c5a446e41ce39fa0b65a", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-04-30T08:21:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNjQxNg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r419036416", "bodyText": "I assume this is getting the list of checks in checkstyle and their packages. Why don't you just use CheckUtil.getCheckstyleChecks ?", "author": "rnveach", "createdAt": "2020-05-03T02:32:01Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,187 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.File;\n+import java.io.FilenameFilter;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String SUFFIX_JAVA = \".java\";\n+\n+    public static final String SUFFIX_CHECK_JAVA = \"Check.java\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, String[]> getXdocsMap() {\n+        final File checks = new File(PACKAGE_NAME);\n+        final String[] checksSubDirNames = checks.list((rootDir, pathname) -> {\n+            return !pathname.endsWith(SUFFIX_JAVA);\n+        });", "originalCommit": "b2f70bccb0b2bfd9bf04c5a446e41ce39fa0b65a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEwNTU5Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r419105592", "bodyText": "becase 1. CheckUtil.getCheckstyleChecks only return checks that are TreeWalkerCheck, but checks.xml contains all checks, such as HeaderCheck, LineLengthCheck and so on 2. and CheckUtil.getCheckstyleChecks return a Set<Class<?>>, which is not classified according to packages so we also need to the similar work to classify it.", "author": "HuGanghui", "createdAt": "2020-05-03T13:42:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNjQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTExMTYyOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r419111629", "bodyText": "There is CheckUtil.getCheckstyleModules which will return everything. You can use ModuleReflectionUtil to trim down to the specifics you need.\nSince you get the class, you can obtain the package name from that and build using a Map and list.\n\nBy scanning files you are going to get more than final classes, you could pick up abstract classes like AbstractSuperCheck and any misc files we have to add.", "author": "rnveach", "createdAt": "2020-05-03T14:30:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNjQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3NDkzMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r422474933", "bodyText": "ok, done~", "author": "HuGanghui", "createdAt": "2020-05-09T09:30:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNjQxNg=="}], "type": "inlineReview"}, {"oid": "edb8593569bc15c15733660fdfa367798ff9539d", "url": "https://github.com/checkstyle/checkstyle/commit/edb8593569bc15c15733660fdfa367798ff9539d", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-05-09T09:29:09Z", "type": "forcePushed"}, {"oid": "9a9e266533baa4331e084634f278bd4abc95a0e2", "url": "https://github.com/checkstyle/checkstyle/commit/9a9e266533baa4331e084634f278bd4abc95a0e2", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-05-09T10:57:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2MzMyNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r423363325", "bodyText": "As I mentioned, you should use ModuleReflectionUtil to find each type of module.\nYou are just looking for isCheckstyleTreeWalkerCheck and isFileSetModule.", "author": "rnveach", "createdAt": "2020-05-11T22:48:19Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,200 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String SUFFIX_CHECK = \"Check\";\n+\n+    public static final String CHECKS = \"checks\";\n+\n+    public static final String CHECKSTYLE = \"checkstyle\";\n+\n+    public static final String FILTERS = \"filters\";\n+\n+    public static final String FILE_FILTERS = \"filefilters\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, ArrayList<String>> getXdocsMap() throws IOException {\n+        final Map<String, ArrayList<String>> checksNamesMap = new HashMap<>();\n+        final Set<Class<?>> checkSet = CheckUtil.getCheckstyleModules();\n+        for (Class<?> check : checkSet) {\n+            final String[] splitArray = check.getName().split(\"\\\\.\");\n+            String subPackage = splitArray[splitArray.length - 2];\n+            if (!subPackage.equals(CHECKSTYLE)\n+                    && !subPackage.equals(FILTERS)\n+                    && !subPackage.equals(FILE_FILTERS)) {", "originalCommit": "9a9e266533baa4331e084634f278bd4abc95a0e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ1MDkzNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r423450935", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-12T04:12:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2MzMyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2NDM4Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r423364383", "bodyText": "Why are all these fields public? If they aren't used outside this class, they should be private.", "author": "rnveach", "createdAt": "2020-05-11T22:51:40Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,200 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String SUFFIX_CHECK = \"Check\";", "originalCommit": "9a9e266533baa4331e084634f278bd4abc95a0e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ1MDk1OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r423450959", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-12T04:12:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2NDM4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2NDcxMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r423364711", "bodyText": "You could just do check.getPackage()", "author": "rnveach", "createdAt": "2020-05-11T22:52:42Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,200 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String SUFFIX_CHECK = \"Check\";\n+\n+    public static final String CHECKS = \"checks\";\n+\n+    public static final String CHECKSTYLE = \"checkstyle\";\n+\n+    public static final String FILTERS = \"filters\";\n+\n+    public static final String FILE_FILTERS = \"filefilters\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, ArrayList<String>> getXdocsMap() throws IOException {\n+        final Map<String, ArrayList<String>> checksNamesMap = new HashMap<>();\n+        final Set<Class<?>> checkSet = CheckUtil.getCheckstyleModules();\n+        for (Class<?> check : checkSet) {\n+            final String[] splitArray = check.getName().split(\"\\\\.\");\n+            String subPackage = splitArray[splitArray.length - 2];", "originalCommit": "9a9e266533baa4331e084634f278bd4abc95a0e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ2Mjg1OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r423462858", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-12T05:00:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2NDcxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2NDgyNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r423364825", "bodyText": "You could just do check.getSimpleName()", "author": "rnveach", "createdAt": "2020-05-11T22:53:01Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,200 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+\n+public class XdocsUrlTest {\n+\n+    public static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    public static final String SUFFIX_CHECK = \"Check\";\n+\n+    public static final String CHECKS = \"checks\";\n+\n+    public static final String CHECKSTYLE = \"checkstyle\";\n+\n+    public static final String FILTERS = \"filters\";\n+\n+    public static final String FILE_FILTERS = \"filefilters\";\n+\n+    public static final String MISC = \"misc\";\n+\n+    public static final String ANNOTATION = \"annotation\";\n+\n+    public static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    public static final String INDENTATION = \"Indentation\";\n+\n+    public static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    public static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, ArrayList<String>> getXdocsMap() throws IOException {\n+        final Map<String, ArrayList<String>> checksNamesMap = new HashMap<>();\n+        final Set<Class<?>> checkSet = CheckUtil.getCheckstyleModules();\n+        for (Class<?> check : checkSet) {\n+            final String[] splitArray = check.getName().split(\"\\\\.\");\n+            String subPackage = splitArray[splitArray.length - 2];\n+            if (!subPackage.equals(CHECKSTYLE)\n+                    && !subPackage.equals(FILTERS)\n+                    && !subPackage.equals(FILE_FILTERS)) {\n+                if (subPackage.equals(CHECKS)) {\n+                    subPackage = MISC;\n+                }\n+                final String checkName = splitArray[splitArray.length - 1];", "originalCommit": "9a9e266533baa4331e084634f278bd4abc95a0e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ1MTE0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r423451143", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-12T04:13:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2NDgyNQ=="}], "type": "inlineReview"}, {"oid": "f578e5572e750613b062fa7f7fb1dc3387e91c59", "url": "https://github.com/checkstyle/checkstyle/commit/f578e5572e750613b062fa7f7fb1dc3387e91c59", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-05-12T04:11:47Z", "type": "forcePushed"}, {"oid": "13496d3396182e225e67f751fc183f624f80b622", "url": "https://github.com/checkstyle/checkstyle/commit/13496d3396182e225e67f751fc183f624f80b622", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-05-12T05:00:06Z", "type": "forcePushed"}, {"oid": "da9402c92f63e6edaa09d8b40891103ce723444a", "url": "https://github.com/checkstyle/checkstyle/commit/da9402c92f63e6edaa09d8b40891103ce723444a", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-05-12T07:00:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzEzOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r426183139", "bodyText": "Can't we or the filter stream to combine the 2 checks, isCheckstyleTreeWalkerCheck and isFileSetModule? This way we only need to parse it once and only have 1 set.", "author": "rnveach", "createdAt": "2020-05-16T19:24:38Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,205 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.ModuleReflectionUtil;\n+\n+public class XdocsUrlTest {\n+\n+    private static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    private static final String TREE_WORKER = \"TreeWalker\";\n+\n+    private static final String SUFFIX_CHECK = \"Check\";\n+\n+    private static final String CHECKS = \"checks\";\n+\n+    private static final String MISC = \"misc\";\n+\n+    private static final String ANNOTATION = \"annotation\";\n+\n+    private static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    private static final String INDENTATION = \"Indentation\";\n+\n+    private static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, ArrayList<String>> getXdocsMap() throws IOException {\n+        final Map<String, ArrayList<String>> checksNamesMap = new HashMap<>();\n+        final Set<Class<?>> checkSet = CheckUtil.getCheckstyleModules();\n+        final Set<Class<?>> treeWalkerCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isCheckstyleTreeWalkerCheck)\n+                .collect(Collectors.toSet());\n+        final Set<Class<?>> fileSetCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isFileSetModule)", "originalCommit": "da9402c92f63e6edaa09d8b40891103ce723444a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MzU0NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r427293545", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-19T13:17:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzEzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzMxOA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r426183318", "bodyText": "is not => does not", "author": "rnveach", "createdAt": "2020-05-16T19:26:28Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,205 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.ModuleReflectionUtil;\n+\n+public class XdocsUrlTest {\n+\n+    private static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    private static final String TREE_WORKER = \"TreeWalker\";\n+\n+    private static final String SUFFIX_CHECK = \"Check\";\n+\n+    private static final String CHECKS = \"checks\";\n+\n+    private static final String MISC = \"misc\";\n+\n+    private static final String ANNOTATION = \"annotation\";\n+\n+    private static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    private static final String INDENTATION = \"Indentation\";\n+\n+    private static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, ArrayList<String>> getXdocsMap() throws IOException {\n+        final Map<String, ArrayList<String>> checksNamesMap = new HashMap<>();\n+        final Set<Class<?>> checkSet = CheckUtil.getCheckstyleModules();\n+        final Set<Class<?>> treeWalkerCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isCheckstyleTreeWalkerCheck)\n+                .collect(Collectors.toSet());\n+        final Set<Class<?>> fileSetCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isFileSetModule)\n+                .collect(Collectors.toSet());\n+        checkSet.clear();\n+        checkSet.addAll(treeWalkerCheckSet);\n+        checkSet.addAll(fileSetCheckSet);\n+        for (Class<?> check : checkSet) {\n+            final String checkName = check.getSimpleName();\n+            if (!checkName.equals(TREE_WORKER)) {\n+                String packageName = check.getPackage().getName();\n+                packageName = packageName.substring(packageName.lastIndexOf('.') + 1);\n+                if (packageName.equals(CHECKS)) {\n+                    packageName = MISC;\n+                }\n+                if (checksNamesMap.get(packageName) == null) {\n+                    final ArrayList<String> arrayList = new ArrayList<>();\n+                    arrayList.add(checkName);\n+                    checksNamesMap.put(packageName, arrayList);\n+                }\n+                else {\n+                    checksNamesMap.get(packageName).add(checkName);\n+                }\n+            }\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest();\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, ArrayList<String>> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.checkNamesList) {\n+            final String moduleName = sub.get(0);\n+            final String checkNameInAttribute = sub.get(1);\n+            final String checkNameInText = sub.get(2);\n+            final String checkNameInconsistentErrorMsg = String.format(Locale.ROOT,\n+                    \"Check with name '%s' in attribute \"\n+                            + \"is not consistent with check name in text in file '%s'\",\n+                    checkNameInAttribute, AVAILABLE_CHECKS_PATH);\n+            assertWithMessage(checkNameInconsistentErrorMsg)\n+                    .that(checkNameInText).matches(checkNameInAttribute);\n+            final String checkNameModuleErrorMsg = String.format(Locale.ROOT,\n+                    \"Check with name '%s' is not in '%s' module\",\n+                    checkNameInAttribute, moduleName);\n+            if (checkNameInAttribute.equals(COMMENTS_INDENTATION)\n+                    || checkNameInAttribute.equals(INDENTATION)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(MISC);\n+            }\n+            else if (checkNameInAttribute.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(ANNOTATION);\n+            }\n+            else {\n+                final Iterable<String> moduleFileNames = checksNamesMap.get(moduleName);\n+                final String moduleNameErrorMsg = String.format(Locale.ROOT,\n+                        \"module name: '%s' is not exist in '%s'\", moduleName, PACKAGE_NAME);", "originalCommit": "da9402c92f63e6edaa09d8b40891103ce723444a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MzYwMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r427293600", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-19T13:17:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzMxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzQ1OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r426183458", "bodyText": "This field can be made final.", "author": "rnveach", "createdAt": "2020-05-16T19:28:36Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,205 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.ModuleReflectionUtil;\n+\n+public class XdocsUrlTest {\n+\n+    private static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    private static final String TREE_WORKER = \"TreeWalker\";\n+\n+    private static final String SUFFIX_CHECK = \"Check\";\n+\n+    private static final String CHECKS = \"checks\";\n+\n+    private static final String MISC = \"misc\";\n+\n+    private static final String ANNOTATION = \"annotation\";\n+\n+    private static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    private static final String INDENTATION = \"Indentation\";\n+\n+    private static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, ArrayList<String>> getXdocsMap() throws IOException {\n+        final Map<String, ArrayList<String>> checksNamesMap = new HashMap<>();\n+        final Set<Class<?>> checkSet = CheckUtil.getCheckstyleModules();\n+        final Set<Class<?>> treeWalkerCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isCheckstyleTreeWalkerCheck)\n+                .collect(Collectors.toSet());\n+        final Set<Class<?>> fileSetCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isFileSetModule)\n+                .collect(Collectors.toSet());\n+        checkSet.clear();\n+        checkSet.addAll(treeWalkerCheckSet);\n+        checkSet.addAll(fileSetCheckSet);\n+        for (Class<?> check : checkSet) {\n+            final String checkName = check.getSimpleName();\n+            if (!checkName.equals(TREE_WORKER)) {\n+                String packageName = check.getPackage().getName();\n+                packageName = packageName.substring(packageName.lastIndexOf('.') + 1);\n+                if (packageName.equals(CHECKS)) {\n+                    packageName = MISC;\n+                }\n+                if (checksNamesMap.get(packageName) == null) {\n+                    final ArrayList<String> arrayList = new ArrayList<>();\n+                    arrayList.add(checkName);\n+                    checksNamesMap.put(packageName, arrayList);\n+                }\n+                else {\n+                    checksNamesMap.get(packageName).add(checkName);\n+                }\n+            }\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest();\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, ArrayList<String>> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.checkNamesList) {\n+            final String moduleName = sub.get(0);\n+            final String checkNameInAttribute = sub.get(1);\n+            final String checkNameInText = sub.get(2);\n+            final String checkNameInconsistentErrorMsg = String.format(Locale.ROOT,\n+                    \"Check with name '%s' in attribute \"\n+                            + \"is not consistent with check name in text in file '%s'\",\n+                    checkNameInAttribute, AVAILABLE_CHECKS_PATH);\n+            assertWithMessage(checkNameInconsistentErrorMsg)\n+                    .that(checkNameInText).matches(checkNameInAttribute);\n+            final String checkNameModuleErrorMsg = String.format(Locale.ROOT,\n+                    \"Check with name '%s' is not in '%s' module\",\n+                    checkNameInAttribute, moduleName);\n+            if (checkNameInAttribute.equals(COMMENTS_INDENTATION)\n+                    || checkNameInAttribute.equals(INDENTATION)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(MISC);\n+            }\n+            else if (checkNameInAttribute.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(ANNOTATION);\n+            }\n+            else {\n+                final Iterable<String> moduleFileNames = checksNamesMap.get(moduleName);\n+                final String moduleNameErrorMsg = String.format(Locale.ROOT,\n+                        \"module name: '%s' is not exist in '%s'\", moduleName, PACKAGE_NAME);\n+                assertWithMessage(moduleNameErrorMsg).that(moduleFileNames).isNotNull();\n+                boolean match = false;\n+                final String checkNameWithSuffix = checkNameInAttribute + SUFFIX_CHECK;\n+                for (String filename : moduleFileNames) {\n+                    if (checkNameWithSuffix.equals(filename)) {\n+                        match = true;\n+                        break;\n+                    }\n+                }\n+                assertWithMessage(checkNameModuleErrorMsg).that(match).isTrue();\n+            }\n+        }\n+    }\n+\n+    public static final class CheckTest extends DefaultHandler {\n+\n+        private static final String SPLIT_CHECK_NAME_IN_ATTRIBUTE = \"#\";\n+\n+        private static final String PREFIX_CONFIG = \"config_\";\n+\n+        private static final String NODE_NAME = \"a\";\n+\n+        private List<List<String>> checkNamesList;", "originalCommit": "da9402c92f63e6edaa09d8b40891103ce723444a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MzY0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r427293643", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-19T13:17:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzQ1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzY2OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r426183669", "bodyText": "ArrayList => List\nYou should use the interface over the exact declaration when possible.", "author": "rnveach", "createdAt": "2020-05-16T19:31:39Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,205 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.ModuleReflectionUtil;\n+\n+public class XdocsUrlTest {\n+\n+    private static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    private static final String TREE_WORKER = \"TreeWalker\";\n+\n+    private static final String SUFFIX_CHECK = \"Check\";\n+\n+    private static final String CHECKS = \"checks\";\n+\n+    private static final String MISC = \"misc\";\n+\n+    private static final String ANNOTATION = \"annotation\";\n+\n+    private static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    private static final String INDENTATION = \"Indentation\";\n+\n+    private static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, ArrayList<String>> getXdocsMap() throws IOException {\n+        final Map<String, ArrayList<String>> checksNamesMap = new HashMap<>();\n+        final Set<Class<?>> checkSet = CheckUtil.getCheckstyleModules();\n+        final Set<Class<?>> treeWalkerCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isCheckstyleTreeWalkerCheck)\n+                .collect(Collectors.toSet());\n+        final Set<Class<?>> fileSetCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isFileSetModule)\n+                .collect(Collectors.toSet());\n+        checkSet.clear();\n+        checkSet.addAll(treeWalkerCheckSet);\n+        checkSet.addAll(fileSetCheckSet);\n+        for (Class<?> check : checkSet) {\n+            final String checkName = check.getSimpleName();\n+            if (!checkName.equals(TREE_WORKER)) {\n+                String packageName = check.getPackage().getName();\n+                packageName = packageName.substring(packageName.lastIndexOf('.') + 1);\n+                if (packageName.equals(CHECKS)) {\n+                    packageName = MISC;\n+                }\n+                if (checksNamesMap.get(packageName) == null) {\n+                    final ArrayList<String> arrayList = new ArrayList<>();\n+                    arrayList.add(checkName);\n+                    checksNamesMap.put(packageName, arrayList);\n+                }\n+                else {\n+                    checksNamesMap.get(packageName).add(checkName);\n+                }\n+            }\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest();\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, ArrayList<String>> checksNamesMap = getXdocsMap();", "originalCommit": "da9402c92f63e6edaa09d8b40891103ce723444a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MzY4MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r427293681", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-19T13:17:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzY2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzY4Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r426183687", "bodyText": "Why Iterable over List?", "author": "rnveach", "createdAt": "2020-05-16T19:32:01Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,205 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.ModuleReflectionUtil;\n+\n+public class XdocsUrlTest {\n+\n+    private static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    private static final String TREE_WORKER = \"TreeWalker\";\n+\n+    private static final String SUFFIX_CHECK = \"Check\";\n+\n+    private static final String CHECKS = \"checks\";\n+\n+    private static final String MISC = \"misc\";\n+\n+    private static final String ANNOTATION = \"annotation\";\n+\n+    private static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    private static final String INDENTATION = \"Indentation\";\n+\n+    private static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, ArrayList<String>> getXdocsMap() throws IOException {\n+        final Map<String, ArrayList<String>> checksNamesMap = new HashMap<>();\n+        final Set<Class<?>> checkSet = CheckUtil.getCheckstyleModules();\n+        final Set<Class<?>> treeWalkerCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isCheckstyleTreeWalkerCheck)\n+                .collect(Collectors.toSet());\n+        final Set<Class<?>> fileSetCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isFileSetModule)\n+                .collect(Collectors.toSet());\n+        checkSet.clear();\n+        checkSet.addAll(treeWalkerCheckSet);\n+        checkSet.addAll(fileSetCheckSet);\n+        for (Class<?> check : checkSet) {\n+            final String checkName = check.getSimpleName();\n+            if (!checkName.equals(TREE_WORKER)) {\n+                String packageName = check.getPackage().getName();\n+                packageName = packageName.substring(packageName.lastIndexOf('.') + 1);\n+                if (packageName.equals(CHECKS)) {\n+                    packageName = MISC;\n+                }\n+                if (checksNamesMap.get(packageName) == null) {\n+                    final ArrayList<String> arrayList = new ArrayList<>();\n+                    arrayList.add(checkName);\n+                    checksNamesMap.put(packageName, arrayList);\n+                }\n+                else {\n+                    checksNamesMap.get(packageName).add(checkName);\n+                }\n+            }\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest();\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, ArrayList<String>> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.checkNamesList) {\n+            final String moduleName = sub.get(0);\n+            final String checkNameInAttribute = sub.get(1);\n+            final String checkNameInText = sub.get(2);\n+            final String checkNameInconsistentErrorMsg = String.format(Locale.ROOT,\n+                    \"Check with name '%s' in attribute \"\n+                            + \"is not consistent with check name in text in file '%s'\",\n+                    checkNameInAttribute, AVAILABLE_CHECKS_PATH);\n+            assertWithMessage(checkNameInconsistentErrorMsg)\n+                    .that(checkNameInText).matches(checkNameInAttribute);\n+            final String checkNameModuleErrorMsg = String.format(Locale.ROOT,\n+                    \"Check with name '%s' is not in '%s' module\",\n+                    checkNameInAttribute, moduleName);\n+            if (checkNameInAttribute.equals(COMMENTS_INDENTATION)\n+                    || checkNameInAttribute.equals(INDENTATION)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(MISC);\n+            }\n+            else if (checkNameInAttribute.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(ANNOTATION);\n+            }\n+            else {\n+                final Iterable<String> moduleFileNames = checksNamesMap.get(moduleName);", "originalCommit": "da9402c92f63e6edaa09d8b40891103ce723444a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5Mzg1Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r427293856", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-19T13:17:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzY4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4Mzc3Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r426183772", "bodyText": "Why not moduleFileNames.contains(checkNameWithSuffix)?", "author": "rnveach", "createdAt": "2020-05-16T19:33:02Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsUrlTest.java", "diffHunk": "@@ -0,0 +1,205 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.internal;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.junit.jupiter.api.Test;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+import com.puppycrawl.tools.checkstyle.internal.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.ModuleReflectionUtil;\n+\n+public class XdocsUrlTest {\n+\n+    private static final String PACKAGE_NAME =\n+            \"src/main/java/com/puppycrawl/tools/checkstyle/checks\";\n+\n+    private static final String TREE_WORKER = \"TreeWalker\";\n+\n+    private static final String SUFFIX_CHECK = \"Check\";\n+\n+    private static final String CHECKS = \"checks\";\n+\n+    private static final String MISC = \"misc\";\n+\n+    private static final String ANNOTATION = \"annotation\";\n+\n+    private static final String COMMENTS_INDENTATION = \"CommentsIndentation\";\n+\n+    private static final String INDENTATION = \"Indentation\";\n+\n+    private static final String SUPPRESS_WARNINGS_HOLDER = \"SuppressWarningsHolder\";\n+\n+    private static final Path AVAILABLE_CHECKS_PATH = Paths.get(\"src/xdocs/checks.xml\");\n+\n+    private static Map<String, ArrayList<String>> getXdocsMap() throws IOException {\n+        final Map<String, ArrayList<String>> checksNamesMap = new HashMap<>();\n+        final Set<Class<?>> checkSet = CheckUtil.getCheckstyleModules();\n+        final Set<Class<?>> treeWalkerCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isCheckstyleTreeWalkerCheck)\n+                .collect(Collectors.toSet());\n+        final Set<Class<?>> fileSetCheckSet = checkSet.stream()\n+                .filter(ModuleReflectionUtil::isFileSetModule)\n+                .collect(Collectors.toSet());\n+        checkSet.clear();\n+        checkSet.addAll(treeWalkerCheckSet);\n+        checkSet.addAll(fileSetCheckSet);\n+        for (Class<?> check : checkSet) {\n+            final String checkName = check.getSimpleName();\n+            if (!checkName.equals(TREE_WORKER)) {\n+                String packageName = check.getPackage().getName();\n+                packageName = packageName.substring(packageName.lastIndexOf('.') + 1);\n+                if (packageName.equals(CHECKS)) {\n+                    packageName = MISC;\n+                }\n+                if (checksNamesMap.get(packageName) == null) {\n+                    final ArrayList<String> arrayList = new ArrayList<>();\n+                    arrayList.add(checkName);\n+                    checksNamesMap.put(packageName, arrayList);\n+                }\n+                else {\n+                    checksNamesMap.get(packageName).add(checkName);\n+                }\n+            }\n+        }\n+        return checksNamesMap;\n+    }\n+\n+    @Test\n+    public void testXdocsUrl() throws Exception {\n+        final SAXParserFactory parserFactory = SAXParserFactory.newInstance();\n+        final SAXParser parser = parserFactory.newSAXParser();\n+        final CheckTest checkHandler = new CheckTest();\n+        try (InputStream input = Files.newInputStream(AVAILABLE_CHECKS_PATH)) {\n+            parser.parse(input, checkHandler);\n+        }\n+        final Map<String, ArrayList<String>> checksNamesMap = getXdocsMap();\n+        for (List<String> sub : checkHandler.checkNamesList) {\n+            final String moduleName = sub.get(0);\n+            final String checkNameInAttribute = sub.get(1);\n+            final String checkNameInText = sub.get(2);\n+            final String checkNameInconsistentErrorMsg = String.format(Locale.ROOT,\n+                    \"Check with name '%s' in attribute \"\n+                            + \"is not consistent with check name in text in file '%s'\",\n+                    checkNameInAttribute, AVAILABLE_CHECKS_PATH);\n+            assertWithMessage(checkNameInconsistentErrorMsg)\n+                    .that(checkNameInText).matches(checkNameInAttribute);\n+            final String checkNameModuleErrorMsg = String.format(Locale.ROOT,\n+                    \"Check with name '%s' is not in '%s' module\",\n+                    checkNameInAttribute, moduleName);\n+            if (checkNameInAttribute.equals(COMMENTS_INDENTATION)\n+                    || checkNameInAttribute.equals(INDENTATION)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(MISC);\n+            }\n+            else if (checkNameInAttribute.equals(SUPPRESS_WARNINGS_HOLDER)) {\n+                assertWithMessage(checkNameModuleErrorMsg).that(moduleName).matches(ANNOTATION);\n+            }\n+            else {\n+                final Iterable<String> moduleFileNames = checksNamesMap.get(moduleName);\n+                final String moduleNameErrorMsg = String.format(Locale.ROOT,\n+                        \"module name: '%s' is not exist in '%s'\", moduleName, PACKAGE_NAME);\n+                assertWithMessage(moduleNameErrorMsg).that(moduleFileNames).isNotNull();\n+                boolean match = false;\n+                final String checkNameWithSuffix = checkNameInAttribute + SUFFIX_CHECK;\n+                for (String filename : moduleFileNames) {\n+                    if (checkNameWithSuffix.equals(filename)) {\n+                        match = true;\n+                        break;\n+                    }\n+                }\n+                assertWithMessage(checkNameModuleErrorMsg).that(match).isTrue();", "originalCommit": "da9402c92f63e6edaa09d8b40891103ce723444a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MzkwMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8075#discussion_r427293902", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-19T13:17:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4Mzc3Mg=="}], "type": "inlineReview"}, {"oid": "e4abdb27415d050036ea2bdf82e81ba8a3966d8a", "url": "https://github.com/checkstyle/checkstyle/commit/e4abdb27415d050036ea2bdf82e81ba8a3966d8a", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-05-19T13:12:16Z", "type": "forcePushed"}, {"oid": "a0a9f53d951570f274a2d127d67bbcd13bc1f903", "url": "https://github.com/checkstyle/checkstyle/commit/a0a9f53d951570f274a2d127d67bbcd13bc1f903", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-05-19T13:20:20Z", "type": "forcePushed"}, {"oid": "6dc5d6e007ad8d0c94615c2cab818f3755e7ae9d", "url": "https://github.com/checkstyle/checkstyle/commit/6dc5d6e007ad8d0c94615c2cab818f3755e7ae9d", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-05-21T03:37:38Z", "type": "commit"}, {"oid": "6dc5d6e007ad8d0c94615c2cab818f3755e7ae9d", "url": "https://github.com/checkstyle/checkstyle/commit/6dc5d6e007ad8d0c94615c2cab818f3755e7ae9d", "message": "Issue #7889: add UT to be added to validate URL is correct in config.xml and fix a typo", "committedDate": "2020-05-21T03:37:38Z", "type": "forcePushed"}]}