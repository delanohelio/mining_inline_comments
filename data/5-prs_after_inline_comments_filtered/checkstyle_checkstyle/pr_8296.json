{"pr_number": 8296, "pr_title": "Issue #7730: Update AbstractChecks to log DetailAST - EmptyLineSeparator", "pr_createdAt": "2020-06-02T03:21:05Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8296", "timeline": [{"oid": "c8914ae3b7bd934e0b3b8170c7b5277f2075b8de", "url": "https://github.com/checkstyle/checkstyle/commit/c8914ae3b7bd934e0b3b8170c7b5277f2075b8de", "message": "Issue #7730: Update AbstractChecks to log DetailAST - EmptyLineSeparator", "committedDate": "2020-06-02T15:41:49Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r433985339", "bodyText": "it is unavoidable that we will get RegexpMultiline violation when we want to show a example about multiple empty lines. So I find a way to add a comment on multiple empty lines, is it ok?", "author": "HuGanghui", "createdAt": "2020-06-02T15:52:48Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/whitespace/EmptyLineSeparatorCheck.java", "diffHunk": "@@ -46,6 +46,18 @@\n  * is required at its end (for example for CLASS_DEF it is after '}').\n  * Also, trailing comments are skipped.\n  * </p>\n+ * <p>\n+ * ATTENTION: violations from multiple empty lines cannot be suppressed via XPath (#8179).\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * class Test {\n+ *     private int k;\n+ *\n+ *                                  // violation, multiple empty lines\n+ *     private static void foo() {}\n+ * }\n+ * </pre>", "originalCommit": "c8914ae3b7bd934e0b3b8170c7b5277f2075b8de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDU4MzgxMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r434583810", "bodyText": "please print config config also to show how exactly to reproduce this problem.\nI tried your input no vioaltion.\nrivanov@p5510:/var/tmp$ cat config.xml \n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n          \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n          \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<module name=\"Checker\">\n    <module name=\"TreeWalker\">\n      <module name=\"EmptyLineSeparator\">\n      </module>\n    </module>\n</module>\nrivanov@p5510:/var/tmp$ cat Test.java \nclass Test {\n    private int k;\n\n\n    private static void foo() {}\n}\nrivanov@p5510:/var/tmp$ java -jar /var/tmp/checkstyle-8.32-all.jar -c config.xml Test.java \nStarting audit...\nAudit done.\n\nafter update please share CLI output of your example and in issue description and screenshot of web site after generation.", "author": "romani", "createdAt": "2020-06-03T13:52:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDYyMDg1NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r434620854", "bodyText": "done,  this should add\nproperty name=\"allowMultipleEmptyLines\" value=\"false\"\ncomment link is here #7730 (comment)", "author": "HuGanghui", "createdAt": "2020-06-03T14:41:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY2NTcxNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r434665717", "bodyText": "violation is not on line where you put //violation, violation is on line 6,checkstyle report it on 7, that, please clarify, Lets keep in descrition ATTENTION: violations from multiple empty lines cannot be suppressed via XPath (until #8179). Please move example of code and config to \"Example\" section.", "author": "romani", "createdAt": "2020-06-03T15:42:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcwMDQ5Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r434700497", "bodyText": "yes, I know that violation is not on line where I put, reason is that it seems unavoidable that we will get RegexpMultiline violation when we want to show an example about multiple empty lines. So I find this way to add a comment on multiple empty lines but which cause another problem is that violation is not on line where I put.", "author": "HuGanghui", "createdAt": "2020-06-03T16:30:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM0OTM4NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r435349384", "bodyText": "@HuGanghui , please do what I requested in #8296 (comment)\nplease show CLI output in PR description for newly added Example, please place //violation on line where violation is placed by checkstyle.  We can do // violation, before his like there two empty lines", "author": "romani", "createdAt": "2020-06-04T15:30:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY3MTEzMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r435671131", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-06-05T03:29:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY3OTU1Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r435679557", "bodyText": "@HuGanghui @romani As far as I understood we log violations about empty lines based on AST element following or preceding  empty line.\nWhat if here, instead of logging line number we log nearest following AST element?\nWhat do you think guys?", "author": "timurt", "createdAt": "2020-06-05T04:09:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyNzU2NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r435927564", "bodyText": "@timurt , this exactly what #8179 is about.", "author": "romani", "createdAt": "2020-06-05T13:39:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkzNjU3NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r435936575", "bodyText": "@HuGanghui , please explain why we can not suppress violation that you reported in PR description by Xpath, it is reported on AST node, it is suppress-able. Please read #8179 attentively, there are problems with lines that comes after method definition.\nafter your update you can not use this example, and yes it was good example on previous version (config and input file is from PR description):\n$ java $RUN_LOCALE -jar /var/tmp/checkstyle-8.33-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:7: 'METHOD_DEF' has more than 1 empty lines before. [EmptyLineSeparator]\nAudit done.\nCheckstyle ends with 1 errors.", "author": "romani", "createdAt": "2020-06-05T13:54:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk4NTMzOQ=="}], "type": "inlineReview"}, {"oid": "70b2bd97f54c2f8ad0897ac6e3473b646b77084a", "url": "https://github.com/checkstyle/checkstyle/commit/70b2bd97f54c2f8ad0897ac6e3473b646b77084a", "message": "Issue #7730: Update AbstractChecks to log DetailAST - EmptyLineSeparator", "committedDate": "2020-06-04T07:51:42Z", "type": "forcePushed"}, {"oid": "c32b846c9404986f9c8cfcc86529e7786556f064", "url": "https://github.com/checkstyle/checkstyle/commit/c32b846c9404986f9c8cfcc86529e7786556f064", "message": "Issue #7730: Update AbstractChecks to log DetailAST - EmptyLineSeparator", "committedDate": "2020-06-04T14:28:37Z", "type": "forcePushed"}, {"oid": "8c95e1447571c3c6e9feef8ad49bb5f472eecd18", "url": "https://github.com/checkstyle/checkstyle/commit/8c95e1447571c3c6e9feef8ad49bb5f472eecd18", "message": "Issue #7730: Update AbstractChecks to log DetailAST - EmptyLineSeparator", "committedDate": "2020-06-05T03:30:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY3Mzg2Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r435673866", "bodyText": "please provide full link", "author": "timurt", "createdAt": "2020-06-05T03:42:58Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/whitespace/EmptyLineSeparatorCheck.java", "diffHunk": "@@ -46,6 +46,9 @@\n  * is required at its end (for example for CLASS_DEF it is after '}').\n  * Also, trailing comments are skipped.\n  * </p>\n+ * <p>\n+ * ATTENTION: violations from multiple empty lines cannot be suppressed via XPath (#8179).", "originalCommit": "8c95e1447571c3c6e9feef8ad49bb5f472eecd18", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTg5NTk0OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r435895949", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-06-05T12:44:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY3Mzg2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY3NjI2Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r435676263", "bodyText": "Could you please add more explanation why we need to disallow multiple empty lines, that for multiple lines only line number is logged, otherwise line number and column number is logged", "author": "timurt", "createdAt": "2020-06-05T03:54:08Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/whitespace/EmptyLineSeparatorCheck.java", "diffHunk": "@@ -234,7 +237,27 @@\n  *   }\n  * }\n  * </pre>\n+ * <p>\n+ * To disallow multiple empty lines:", "originalCommit": "8c95e1447571c3c6e9feef8ad49bb5f472eecd18", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTg5NjQ4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8296#discussion_r435896488", "bodyText": "done, only line number is using checkstyle-8.32-SNAPSHOT-all.jar, now I have update to latest version  checkstyle-8.34-SNAPSHOT-all.jar", "author": "HuGanghui", "createdAt": "2020-06-05T12:44:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY3NjI2Mw=="}], "type": "inlineReview"}, {"oid": "7b4a4e633011dfc2f19bd17c0994ad16529e837b", "url": "https://github.com/checkstyle/checkstyle/commit/7b4a4e633011dfc2f19bd17c0994ad16529e837b", "message": "Issue #7730: Update AbstractChecks to log DetailAST - EmptyLineSeparator", "committedDate": "2020-06-05T12:32:07Z", "type": "forcePushed"}, {"oid": "508b0f30cae2d8d151c62a99b0c5933ad2b00054", "url": "https://github.com/checkstyle/checkstyle/commit/508b0f30cae2d8d151c62a99b0c5933ad2b00054", "message": "Issue #7730: Update AbstractChecks to log DetailAST - EmptyLineSeparator", "committedDate": "2020-06-07T07:53:33Z", "type": "forcePushed"}, {"oid": "fb4912e894efe9b9c2c5aa4c8a01ee7cd4571ec0", "url": "https://github.com/checkstyle/checkstyle/commit/fb4912e894efe9b9c2c5aa4c8a01ee7cd4571ec0", "message": "Issue #7730: Update AbstractChecks to log DetailAST - EmptyLineSeparator", "committedDate": "2020-06-08T02:14:37Z", "type": "commit"}, {"oid": "fb4912e894efe9b9c2c5aa4c8a01ee7cd4571ec0", "url": "https://github.com/checkstyle/checkstyle/commit/fb4912e894efe9b9c2c5aa4c8a01ee7cd4571ec0", "message": "Issue #7730: Update AbstractChecks to log DetailAST - EmptyLineSeparator", "committedDate": "2020-06-08T02:14:37Z", "type": "forcePushed"}]}