{"pr_number": 8115, "pr_title": "Issue #8110: Remove from PackageDeclaration validation for empty files", "pr_createdAt": "2020-04-17T09:55:37Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8115", "timeline": [{"oid": "3e530648e32192b673842de294e6d64951de008f", "url": "https://github.com/checkstyle/checkstyle/commit/3e530648e32192b673842de294e6d64951de008f", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-18T12:18:01Z", "type": "forcePushed"}, {"oid": "87da46fb7d34d35553c38ecc7f10d5b4e10b6492", "url": "https://github.com/checkstyle/checkstyle/commit/87da46fb7d34d35553c38ecc7f10d5b4e10b6492", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-18T15:40:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc5MDMyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410790324", "bodyText": "Please remove this update of doc. We do not need it, nobody request such feature to exist. It was our overengineering.", "author": "romani", "createdAt": "2020-04-19T01:49:03Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/regexp/RegexpMultilineCheck.java", "diffHunk": "@@ -104,6 +104,23 @@\n  * greedy will allow multiple violations in the example to be found in the same file.\n  * </p>\n  *\n+ * <p>\n+ * To configure the check to restrict an empty file:", "originalCommit": "87da46fb7d34d35553c38ecc7f10d5b4e10b6492", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg0Njg1OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410846859", "bodyText": "Done.", "author": "Gaurav-Punjabi", "createdAt": "2020-04-19T08:06:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc5MDMyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg5Mzg5Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410893893", "bodyText": "I so sorry, please restore doc, for some reason I though that you did it in PackageDeclaration Check doc. We do doc need it in RegexpMultilineCheck.\ngithub fortunately keep old commits - 87da46f , you can restore it from here.", "author": "romani", "createdAt": "2020-04-19T12:31:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc5MDMyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkwMjI5OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410902298", "bodyText": "No problem restored them \ud83d\udc4d", "author": "Gaurav-Punjabi", "createdAt": "2020-04-19T13:13:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc5MDMyNA=="}], "type": "inlineReview"}, {"oid": "7324c57df6578f21547b7a60a0530dea1413adbd", "url": "https://github.com/checkstyle/checkstyle/commit/7324c57df6578f21547b7a60a0530dea1413adbd", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-19T08:05:31Z", "type": "forcePushed"}, {"oid": "f1111de2a6d49c0f8a35e1fa7c7d1c57c200673f", "url": "https://github.com/checkstyle/checkstyle/commit/f1111de2a6d49c0f8a35e1fa7c7d1c57c200673f", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-19T10:35:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg5NTYxNg==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410895616", "bodyText": "please keep it. On such files there should no violations too.", "author": "romani", "createdAt": "2020-04-19T12:40:27Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/PackageDeclarationCheckTest.java", "diffHunk": "@@ -56,17 +56,6 @@ public void testDefaultWithPackage() throws Exception {\n         verify(checkConfig, getPath(\"InputPackageDeclarationPlain.java\"), expected);\n     }\n \n-    @Test\n-    public void testOnFileWithCommentOnly() throws Exception {\n-        final DefaultConfiguration checkConfig = createModuleConfig(PackageDeclarationCheck.class);\n-\n-        final String[] expected = {\n-            \"1: \" + getCheckMessage(MSG_KEY_MISSING),\n-        };\n-\n-        verify(checkConfig, getPath(\"InputPackageDeclarationWithCommentOnly.java\"), expected);", "originalCommit": "f1111de2a6d49c0f8a35e1fa7c7d1c57c200673f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkwMzQyMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410903423", "bodyText": "But this test is failing due to this change, a file with comment does not generate a violation. Are you suggesting that I should change the expected violations to no violations?", "author": "Gaurav-Punjabi", "createdAt": "2020-04-19T13:19:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg5NTYxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkxMjUzMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410912533", "bodyText": "it should not generate violation - it is by design.\nTests is good to show that.", "author": "romani", "createdAt": "2020-04-19T14:00:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg5NTYxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkyOTI0Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410929242", "bodyText": "Done", "author": "Gaurav-Punjabi", "createdAt": "2020-04-19T15:28:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg5NTYxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI1NzE3Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r412257176", "bodyText": "please restore test method in original place, not need to remove it and add it at other place.\nWe need to minimize diff.", "author": "romani", "createdAt": "2020-04-21T14:54:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg5NTYxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI2MDMxMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r412260312", "bodyText": "Done", "author": "Gaurav-Punjabi", "createdAt": "2020-04-21T14:57:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg5NTYxNg=="}], "type": "inlineReview"}, {"oid": "87da46fb7d34d35553c38ecc7f10d5b4e10b6492", "url": "https://github.com/checkstyle/checkstyle/commit/87da46fb7d34d35553c38ecc7f10d5b4e10b6492", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-18T15:40:31Z", "type": "forcePushed"}, {"oid": "e74be343e609865e39948f87b0ef61e29df8bf4a", "url": "https://github.com/checkstyle/checkstyle/commit/e74be343e609865e39948f87b0ef61e29df8bf4a", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-19T14:01:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkxNDA5OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410914099", "bodyText": "there is no ease way to show that file is empty.\nplease do it as I did at issue description by printing of its content:\n/var/tmp$ cat Test.java \n\n\n\n\n\n/var/tmp$\n/var/tmp/Test.java // violation\n\nlast line it might make sense to put in separate PRE tag, please experiment of better look during rendering.", "author": "romani", "createdAt": "2020-04-19T14:08:57Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/regexp/RegexpMultilineCheck.java", "diffHunk": "@@ -104,6 +104,23 @@\n  * greedy will allow multiple violations in the example to be found in the same file.\n  * </p>\n  *\n+ * <p>\n+ * To configure the check to restrict an empty file:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=&quot;RegexpMultiline&quot;&gt;\n+ *     &lt;property name=&quot;format&quot; value=&quot;^\\s*$&quot; /&gt;\n+ *     &lt;property name=&quot;matchAcrossLines&quot; value=&quot;true&quot; /&gt;\n+ *     &lt;property name=&quot;message&quot; value=&quot;Empty file is not allowed&quot; /&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example of violation from the above config:\n+ * </p>\n+ * <pre>\n+ * [...This is an empty file] // violation", "originalCommit": "e74be343e609865e39948f87b0ef61e29df8bf4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkyODQ2MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r410928460", "bodyText": "@romani is this okay ?", "author": "Gaurav-Punjabi", "createdAt": "2020-04-19T15:24:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkxNDA5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTA4MzEwNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r411083107", "bodyText": "Good", "author": "romani", "createdAt": "2020-04-20T04:21:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkxNDA5OQ=="}], "type": "inlineReview"}, {"oid": "ccf762afafd05e7d79b3824d4dce4bb85fc6b233", "url": "https://github.com/checkstyle/checkstyle/commit/ccf762afafd05e7d79b3824d4dce4bb85fc6b233", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-19T15:25:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTA4MjkzNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r411082935", "bodyText": "Please remove only this line, most of our users use checkstyle through plugins.", "author": "romani", "createdAt": "2020-04-20T04:21:23Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/regexp/RegexpMultilineCheck.java", "diffHunk": "@@ -104,6 +104,32 @@\n  * greedy will allow multiple violations in the example to be found in the same file.\n  * </p>\n  *\n+ * <p>\n+ * To configure the check to restrict an empty file:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=&quot;RegexpMultiline&quot;&gt;\n+ *     &lt;property name=&quot;format&quot; value=&quot;^\\s*$&quot; /&gt;\n+ *     &lt;property name=&quot;matchAcrossLines&quot; value=&quot;true&quot; /&gt;\n+ *     &lt;property name=&quot;message&quot; value=&quot;Empty file is not allowed&quot; /&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example of violation from the above config:\n+ * </p>\n+ * <pre>\n+ * /var/tmp$ cat -n Test.java\n+ * 1\n+ * 2\n+ * 3\n+ * 4\n+ * </pre>\n+ * <p>Result:</p>\n+ * <pre>\n+ * /var/tmp$ java -jar checkstyle-8.31-all.jar -c config.xml Test.java", "originalCommit": "ccf762afafd05e7d79b3824d4dce4bb85fc6b233", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTA5NzEyMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8115#discussion_r411097122", "bodyText": "Done", "author": "Gaurav-Punjabi", "createdAt": "2020-04-20T05:11:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTA4MjkzNQ=="}], "type": "inlineReview"}, {"oid": "5730249c6fb81ef3e301f5c7d33d0bc24f5b605b", "url": "https://github.com/checkstyle/checkstyle/commit/5730249c6fb81ef3e301f5c7d33d0bc24f5b605b", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-20T05:11:07Z", "type": "forcePushed"}, {"oid": "70888db7e98d792cfe00e6dabd8666b75e6fbf4e", "url": "https://github.com/checkstyle/checkstyle/commit/70888db7e98d792cfe00e6dabd8666b75e6fbf4e", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-21T14:46:53Z", "type": "forcePushed"}, {"oid": "08563b90c4de9eef94473e6977c42e0a7a6466a7", "url": "https://github.com/checkstyle/checkstyle/commit/08563b90c4de9eef94473e6977c42e0a7a6466a7", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-21T14:50:12Z", "type": "forcePushed"}, {"oid": "f00502a14f381e60e900f289f8f71dbdd00979e8", "url": "https://github.com/checkstyle/checkstyle/commit/f00502a14f381e60e900f289f8f71dbdd00979e8", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-21T14:55:39Z", "type": "forcePushed"}, {"oid": "c3e6a401eac80166bc04ff74adfc2616d795e084", "url": "https://github.com/checkstyle/checkstyle/commit/c3e6a401eac80166bc04ff74adfc2616d795e084", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-21T14:57:10Z", "type": "forcePushed"}, {"oid": "15a1565e8390b41d19f0e03f2d982f9a79e1fb5b", "url": "https://github.com/checkstyle/checkstyle/commit/15a1565e8390b41d19f0e03f2d982f9a79e1fb5b", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-22T22:48:24Z", "type": "forcePushed"}, {"oid": "d9f83a6aa450f9f2ab9939216a302463e26ca793", "url": "https://github.com/checkstyle/checkstyle/commit/d9f83a6aa450f9f2ab9939216a302463e26ca793", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-24T12:07:06Z", "type": "forcePushed"}, {"oid": "20f43044ca044e6296546dfb6385183ab1d5e72f", "url": "https://github.com/checkstyle/checkstyle/commit/20f43044ca044e6296546dfb6385183ab1d5e72f", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-28T16:20:16Z", "type": "forcePushed"}, {"oid": "868dcb7ae63b6a88ff9241126a736797b4679678", "url": "https://github.com/checkstyle/checkstyle/commit/868dcb7ae63b6a88ff9241126a736797b4679678", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-28T16:25:38Z", "type": "commit"}, {"oid": "868dcb7ae63b6a88ff9241126a736797b4679678", "url": "https://github.com/checkstyle/checkstyle/commit/868dcb7ae63b6a88ff9241126a736797b4679678", "message": "Issue #8110: Remove from PackageDeclaration validation for empty files", "committedDate": "2020-04-28T16:25:38Z", "type": "forcePushed"}]}