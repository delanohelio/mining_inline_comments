{"pr_number": 1824, "pr_title": "Raise a helpful error message when an obviously-invalid region name is given to the SDK.", "pr_createdAt": "2020-05-07T22:24:24Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1824", "timeline": [{"oid": "407f1f599c37d283c0a212b43597a56bb0eafa01", "url": "https://github.com/aws/aws-sdk-java-v2/commit/407f1f599c37d283c0a212b43597a56bb0eafa01", "message": "Raise a helpful error message when an obviously-invalid region name is given to the SDK.\n\nPreviously, a NullPointerException would be raised. Fixes #1642.", "committedDate": "2020-05-07T22:22:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgyOTU4Mw==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1824#discussion_r421829583", "bodyText": "This change is unrelated, but it prevents an error message being logged when the profile file is null.", "author": "millems", "createdAt": "2020-05-07T22:24:59Z", "path": "core/regions/src/main/java/software/amazon/awssdk/regions/servicemetadata/EnhancedS3ServiceMetadata.java", "diffHunk": "@@ -100,12 +100,16 @@ private static String envVarSetting() {\n         return SdkSystemSetting.AWS_S3_US_EAST_1_REGIONAL_ENDPOINT.getStringValue().orElse(null);\n     }\n \n-    private String profileFileSetting(Supplier<ProfileFile> profileFileSupplier, Supplier<String> profileName) {\n+    private String profileFileSetting(Supplier<ProfileFile> profileFileSupplier, Supplier<String> profileNameSupplier) {\n         try {\n-            return profileFileSupplier.get()\n-                                      .profile(profileName.get())\n-                                      .flatMap(p -> p.property(ProfileProperty.S3_US_EAST_1_REGIONAL_ENDPOINT))\n-                                      .orElse(null);\n+            ProfileFile profileFile = profileFileSupplier.get();\n+            String profileName = profileNameSupplier.get();\n+            if (profileFile == null || profileName == null) {\n+                return null;\n+            }\n+            return profileFile.profile(profileName)\n+                              .flatMap(p -> p.property(ProfileProperty.S3_US_EAST_1_REGIONAL_ENDPOINT))\n+                              .orElse(null);", "originalCommit": "407f1f599c37d283c0a212b43597a56bb0eafa01", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e427b9859328ef46da89dc7c039d60dd608cb5c0", "url": "https://github.com/aws/aws-sdk-java-v2/commit/e427b9859328ef46da89dc7c039d60dd608cb5c0", "message": "Merge branch 'master' into millem/bad-region-error-improvement", "committedDate": "2020-05-07T22:26:41Z", "type": "commit"}]}