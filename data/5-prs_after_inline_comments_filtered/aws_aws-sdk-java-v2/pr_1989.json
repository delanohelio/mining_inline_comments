{"pr_number": 1989, "pr_title": "Various codegen performance improvements.", "pr_createdAt": "2020-08-14T21:57:48Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1989", "timeline": [{"oid": "482691bd1de819ba37fa43a7153f4350850303cd", "url": "https://github.com/aws/aws-sdk-java-v2/commit/482691bd1de819ba37fa43a7153f4350850303cd", "message": "Various codegen performance improvements.\n\nOnly potentially impacting change: intermediate model is no longer written to disk, because it is not used.", "committedDate": "2020-08-14T21:57:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg4NDIxMw==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1989#discussion_r470884213", "bodyText": "Should this be moved to a static block within this class?", "author": "dagnir", "createdAt": "2020-08-14T22:04:13Z", "path": "codegen/src/main/java/software/amazon/awssdk/codegen/CodeGenerator.java", "diffHunk": "@@ -66,12 +57,14 @@ public static Builder builder() {\n      * code.\n      */\n     public void execute() {\n+        // Make sure ClassName is statically initialized before we do anything in parallel.\n+        // Parallel static initialization of ClassName and TypeName can result in a deadlock:\n+        // https://github.com/square/javapoet/issues/799\n+        ClassName.get(Object.class);\n+", "originalCommit": "482691bd1de819ba37fa43a7153f4350850303cd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg4NzY4MQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1989#discussion_r470887681", "bodyText": "Sure", "author": "millems", "createdAt": "2020-08-14T22:16:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg4NDIxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg4ODQwNQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1989#discussion_r470888405", "bodyText": "Fixed.", "author": "millems", "createdAt": "2020-08-14T22:19:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg4NDIxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg4NDc4OA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1989#discussion_r470884788", "bodyText": "nit: use Paths.get() so we can remove call to toPath() later", "author": "dagnir", "createdAt": "2020-08-14T22:06:12Z", "path": "codegen/src/main/java/software/amazon/awssdk/codegen/emitters/CodeWriter.java", "diffHunk": "@@ -100,22 +99,20 @@ public CodeWriter(String dir, String file, String fileNameSuffix) {\n      */\n     @Override\n     public void flush() {\n-        PrintWriter out = null;\n         try {\n-            File outputFile = Utils.createFile(dir, this.file);\n+            File outputFile = new File(dir, this.file);", "originalCommit": "482691bd1de819ba37fa43a7153f4350850303cd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg4ODQyNw==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1989#discussion_r470888427", "bodyText": "Fixed.", "author": "millems", "createdAt": "2020-08-14T22:19:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg4NDc4OA=="}], "type": "inlineReview"}, {"oid": "3ec15f3612c75582eaeb2c361a906c26aa849d8b", "url": "https://github.com/aws/aws-sdk-java-v2/commit/3ec15f3612c75582eaeb2c361a906c26aa849d8b", "message": "Various codegen performance improvements.\n\nOnly potentially impacting change: intermediate model is no longer written to disk, because it is not used.", "committedDate": "2020-08-14T22:19:00Z", "type": "forcePushed"}, {"oid": "419ff0848a8af54c99212a542ba2731cd0021aab", "url": "https://github.com/aws/aws-sdk-java-v2/commit/419ff0848a8af54c99212a542ba2731cd0021aab", "message": "Various codegen performance improvements.\n\nOnly potentially impacting change: intermediate model is no longer written to disk, because it is not used.", "committedDate": "2020-08-17T19:49:02Z", "type": "forcePushed"}, {"oid": "7cb893b5524368e3d9f9ec377d9734f7eb89622f", "url": "https://github.com/aws/aws-sdk-java-v2/commit/7cb893b5524368e3d9f9ec377d9734f7eb89622f", "message": "Various codegen performance improvements.\n\nOnly potentially impacting change: intermediate model is no longer written to disk, because it is not used.", "committedDate": "2020-08-17T20:10:03Z", "type": "forcePushed"}, {"oid": "9196156022f11e0569b9691adbf9da9472b589a6", "url": "https://github.com/aws/aws-sdk-java-v2/commit/9196156022f11e0569b9691adbf9da9472b589a6", "message": "Various codegen performance improvements.\n\nOnly potentially impacting change: intermediate model is no longer written to disk, because it is not used.", "committedDate": "2020-08-18T17:35:34Z", "type": "forcePushed"}, {"oid": "18f29cb1a7d312c5c35cd0c5a110ac53dad413cf", "url": "https://github.com/aws/aws-sdk-java-v2/commit/18f29cb1a7d312c5c35cd0c5a110ac53dad413cf", "message": "Various codegen performance improvements.\n\nOnly potentially impacting change: intermediate model is no longer written to disk, because it is not used.", "committedDate": "2020-08-18T18:20:09Z", "type": "commit"}, {"oid": "18f29cb1a7d312c5c35cd0c5a110ac53dad413cf", "url": "https://github.com/aws/aws-sdk-java-v2/commit/18f29cb1a7d312c5c35cd0c5a110ac53dad413cf", "message": "Various codegen performance improvements.\n\nOnly potentially impacting change: intermediate model is no longer written to disk, because it is not used.", "committedDate": "2020-08-18T18:20:09Z", "type": "forcePushed"}, {"oid": "386ebe79aa3f5d1fbec48ad2fb4e8e9c522baf88", "url": "https://github.com/aws/aws-sdk-java-v2/commit/386ebe79aa3f5d1fbec48ad2fb4e8e9c522baf88", "message": "Merge branch 'master' into millem/codegen-performance-improvement", "committedDate": "2020-08-19T22:08:17Z", "type": "commit"}, {"oid": "ec8d301a2c8dc39a187b158f00d60d6ab5c841a7", "url": "https://github.com/aws/aws-sdk-java-v2/commit/ec8d301a2c8dc39a187b158f00d60d6ab5c841a7", "message": "Merge branch 'master' into millem/codegen-performance-improvement", "committedDate": "2020-08-20T22:45:34Z", "type": "commit"}, {"oid": "17a13c1907b5468edbfa0e9c12a8a48c6037935c", "url": "https://github.com/aws/aws-sdk-java-v2/commit/17a13c1907b5468edbfa0e9c12a8a48c6037935c", "message": "Merge branch 'master' into millem/codegen-performance-improvement", "committedDate": "2020-08-24T20:53:44Z", "type": "commit"}]}