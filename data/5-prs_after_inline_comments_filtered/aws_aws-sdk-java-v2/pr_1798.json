{"pr_number": 1798, "pr_title": "Expose the extendedRequestId from SdkServiceException", "pr_createdAt": "2020-04-29T20:33:58Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1798", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcwMzYwNg==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1798#discussion_r424703606", "bodyText": "I realize it's actually DRYer to do this here, but for consistency can we set the extendedRequestId the same way we set the requestId: when the exception is created? (And maybe just print null instead of not available)\nWe can add a getter for retrieving it (that sometimes returns null).", "author": "millems", "createdAt": "2020-05-13T20:12:58Z", "path": "core/aws-core/src/main/java/software/amazon/awssdk/awscore/exception/AwsServiceException.java", "diffHunk": "@@ -62,10 +62,13 @@ public AwsErrorDetails awsErrorDetails() {\n     @Override\n     public String getMessage() {\n         if (awsErrorDetails != null) {\n+            String extendedRequestId =\n+                awsErrorDetails().sdkHttpResponse().firstMatchingHeader(\"x-amz-id-2\").orElse(\"not available\");\n             return awsErrorDetails().errorMessage() +\n                     \" (Service: \" + awsErrorDetails().serviceName() +\n                     \", Status Code: \" + statusCode() +\n-                    \", Request ID: \" + requestId() + \")\";\n+                    \", Request ID: \" + requestId() +\n+                    \", Extended Request ID: \" + extendedRequestId + \")\";", "originalCommit": "a62869263ce708e2607124875c10d2d8b883761e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcxMzYzNA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1798#discussion_r424713634", "bodyText": "Yep, that's actually how I initially implemented this, but I was trying to make this simpler because I was worried the change would be too complicated.  I'll put out the original version today.", "author": "Sarev0k", "createdAt": "2020-05-13T20:32:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcwMzYwNg=="}], "type": "inlineReview"}, {"oid": "cc797f83018339104d9f45c9a79e327416e1fe61", "url": "https://github.com/aws/aws-sdk-java-v2/commit/cc797f83018339104d9f45c9a79e327416e1fe61", "message": "Expose the extendedRequestId from SdkServiceException, so it can be provided to support to investigate issues", "committedDate": "2020-05-13T21:09:17Z", "type": "commit"}, {"oid": "6fb8287ad2192c5cd1de8d0c459c2cdd92d77f49", "url": "https://github.com/aws/aws-sdk-java-v2/commit/6fb8287ad2192c5cd1de8d0c459c2cdd92d77f49", "message": "Merge branch 'master' into master", "committedDate": "2020-05-13T22:19:37Z", "type": "commit"}]}