{"pr_number": 1854, "pr_title": "Update docs based on latest discussions", "pr_createdAt": "2020-05-19T23:43:14Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1854", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE3MTI1Ng==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1854#discussion_r428171256", "bodyText": "Seems to be a repeat of the multithreading info", "author": "cenedhryn", "createdAt": "2020-05-20T17:04:37Z", "path": "docs/design/core/metrics/prototype/MetricPublisher.java", "diffHunk": "@@ -1,68 +1,48 @@\n-/*\n- * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\").\n- * You may not use this file except in compliance with the License.\n- * A copy of the License is located at\n- *\n- *  http://aws.amazon.com/apache2.0\n- *\n- * or in the \"license\" file accompanying this file. This file is distributed\n- * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n- * express or implied. See the License for the specific language governing\n- * permissions and limitations under the License.\n- */\n-\n-package software.amazon.awssdk.metrics.publisher;\n-\n-import java.util.concurrent.CompletableFuture;\n-import software.amazon.awssdk.annotations.SdkPublicApi;\n-import software.amazon.awssdk.metrics.registry.MetricRegistry;\n-\n /**\n- * Interface to report and publish the collected SDK metrics to external sources.\n- *\n- * Publisher implementations create and maintain resources (like clients, thread pool etc) that are used for publishing.\n- * They should be closed in the close() method to avoid resource leakage.\n- *\n+ * Interface to report and publish the collected SDK metric events to external\n+ * sources.\n  * <p>\n- *     As metrics are not part of the business logic, failures caused by metrics features should not fail the application.\n- *     So SDK publisher implementations suppress all errors during the metrics publishing and log them.\n- * </p>\n- *\n+ * Conceptually, a publisher receives a stream of {@link MetricCollection}\n+ * objects overs its lifetime through its {@link #publish(MetricCollection)} )}\n+ * method.  Implementations are then free further aggregate these events into\n+ * sets of metrics that are then published to some external system for further\n+ * use.  As long as a publisher is not closed, then it can receive {@code\n+ * MetricCollection} objects at any time. In addition, as the SDK makes use of\n+ * multithreading, it's possible that the publisher is shared concurrently by\n+ * multiple threads, and necessitates that all implementations are threadsafe.\n  * <p>\n- *     In certain situations (high throttling errors, metrics are reported faster than publishing etc), storing all the metrics\n- *     might take up lot of memory and can crash the application. In these cases, it is recommended to have a max limit on\n- *     number of metrics stored or memory used for metrics and drop the metrics when the limit is breached.\n- * </p>\n+ * The SDK may invoke methods on the interface from multiple threads", "originalCommit": "c0bd459403fe16ac6c1b068ec1d65d49223db5bd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5c2eef6127a3245c079682fc0fbc51d489dc89e2", "url": "https://github.com/aws/aws-sdk-java-v2/commit/5c2eef6127a3245c079682fc0fbc51d489dc89e2", "message": "Update docs based on latest discussions", "committedDate": "2020-05-19T23:38:56Z", "type": "forcePushed"}, {"oid": "6d110279e588a3731fd49d2d3e1e2cca9b183701", "url": "https://github.com/aws/aws-sdk-java-v2/commit/6d110279e588a3731fd49d2d3e1e2cca9b183701", "message": "Update docs based on latest discussions", "committedDate": "2020-05-20T17:41:32Z", "type": "commit"}, {"oid": "6d110279e588a3731fd49d2d3e1e2cca9b183701", "url": "https://github.com/aws/aws-sdk-java-v2/commit/6d110279e588a3731fd49d2d3e1e2cca9b183701", "message": "Update docs based on latest discussions", "committedDate": "2020-05-20T17:41:32Z", "type": "forcePushed"}]}