{"pr_number": 2041, "pr_title": "Parse XML errors like in S3", "pr_createdAt": "2020-09-17T16:53:08Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/2041", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3OTM0Ng==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2041#discussion_r490479346", "bodyText": "Thinking about this some more, I'm not sure that this is the right behavior; it's possible that the user could still want this behavior even with an endpoint override.\nCan we leave this change out of the client for now? For testing, we can we can just add a new client interceptor that changes the request URL to the WireMock host before it's sent.", "author": "dagnir", "createdAt": "2020-09-17T18:46:29Z", "path": "services/s3control/src/main/java/software/amazon/awssdk/services/s3control/internal/interceptors/EndpointAddressInterceptor.java", "diffHunk": "@@ -81,7 +86,7 @@ private String resolveHost(SdkHttpRequest request, String accountId, S3ControlCo\n \n         }\n         validateComponentIsHostnameCompliant(accountId, \"account id\");\n-        return String.format(\"%s.%s\", accountId, host);\n+        return hasEndpointOverride ? host : String.format(\"%s.%s\", accountId, host);", "originalCommit": "4c969c0e4b9ec01e891f129cb4e6c589c4442224", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU1NTM0MQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2041#discussion_r490555341", "bodyText": "Yes, that sounds like a less intrusive change.", "author": "cenedhryn", "createdAt": "2020-09-17T20:52:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3OTM0Ng=="}], "type": "inlineReview"}, {"oid": "4ef8508945adef1bbb0f59809432835e56e85cb5", "url": "https://github.com/aws/aws-sdk-java-v2/commit/4ef8508945adef1bbb0f59809432835e56e85cb5", "message": "Changes document error root definition for XML based errors to same as AWS S1, so that errors are fully parsed. This change also adds honoring endpoint overrides for the S3 Control client.", "committedDate": "2020-09-17T22:39:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDYwMzAxOA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2041#discussion_r490603018", "bodyText": "New changes look good, but looks like this still needs to be reverted along with the accompanying test.", "author": "dagnir", "createdAt": "2020-09-17T22:45:18Z", "path": "services/s3control/src/main/java/software/amazon/awssdk/services/s3control/internal/interceptors/EndpointAddressInterceptor.java", "diffHunk": "@@ -81,7 +86,7 @@ private String resolveHost(SdkHttpRequest request, String accountId, S3ControlCo\n \n         }\n         validateComponentIsHostnameCompliant(accountId, \"account id\");\n-        return String.format(\"%s.%s\", accountId, host);\n+        return hasEndpointOverride ? host : String.format(\"%s.%s\", accountId, host);", "originalCommit": "4ef8508945adef1bbb0f59809432835e56e85cb5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2ccfa146e55d0261408557fa525ee3ec9b0ca7d9", "url": "https://github.com/aws/aws-sdk-java-v2/commit/2ccfa146e55d0261408557fa525ee3ec9b0ca7d9", "message": "Changes document error root definition for XML based errors to same as AWS S1, so that errors are fully parsed. This change also adds honoring endpoint overrides for the S3 Control client.", "committedDate": "2020-09-18T00:00:13Z", "type": "commit"}, {"oid": "2ccfa146e55d0261408557fa525ee3ec9b0ca7d9", "url": "https://github.com/aws/aws-sdk-java-v2/commit/2ccfa146e55d0261408557fa525ee3ec9b0ca7d9", "message": "Changes document error root definition for XML based errors to same as AWS S1, so that errors are fully parsed. This change also adds honoring endpoint overrides for the S3 Control client.", "committedDate": "2020-09-18T00:00:13Z", "type": "forcePushed"}]}