{"pr_number": 1878, "pr_title": "Update infantry damage divisor setter and name", "pr_createdAt": "2020-07-22T18:56:17Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/1878", "timeline": [{"oid": "99e3be11310843d4545f2e3da42587290aacb29f", "url": "https://github.com/MegaMek/mekhq/commit/99e3be11310843d4545f2e3da42587290aacb29f", "message": "Account for myomer implants in infantry damage divisor.", "committedDate": "2020-07-22T15:47:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEyOTc4OA==", "url": "https://github.com/MegaMek/mekhq/pull/1878#discussion_r459129788", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        ((Infantry) entity).getArmorDamageDivisor(), ((Infantry) entity).isArmorEncumbering(), ((Infantry)entity).hasDEST(), ((Infantry)entity).hasSneakCamo(), ((Infantry)entity).hasSneakECM(), ((Infantry)entity).hasSneakIR(), ((Infantry)entity).hasSpaceSuit());\n          \n          \n            \n                                        ((Infantry) entity).getArmorDamageDivisor(), ((Infantry) entity).isArmorEncumbering(), ((Infantry) entity).hasDEST(), ((Infantry) entity).hasSneakCamo(), ((Infantry) entity).hasSneakECM(), ((Infantry) entity).hasSneakIR(), ((Infantry) entity).hasSpaceSuit());", "author": "Windchild292", "createdAt": "2020-07-22T22:57:08Z", "path": "MekHQ/src/mekhq/campaign/unit/Unit.java", "diffHunk": "@@ -3152,52 +3152,55 @@ else if(entity instanceof BattleArmor) {\n                 jj--;\n             }\n         }\n-        if(entity instanceof Infantry && !(entity instanceof BattleArmor)) {\n-            if(null == motiveType && entity.getMovementMode() != EntityMovementMode.INF_LEG) {\n+        if (entity.isConventionalInfantry()) {\n+            if ((null == motiveType) && (entity.getMovementMode() != EntityMovementMode.INF_LEG)) {\n                 int number = entity.getOInternal(Infantry.LOC_INFANTRY);\n-                if(((Infantry)entity).isMechanized()) {\n-                    number = ((Infantry)entity).getSquadN();\n+                if (((Infantry) entity).isMechanized()) {\n+                    number = ((Infantry) entity).getSquadN();\n                 }\n-                while(number > 0) {\n+                while (number > 0) {\n                     motiveType = new InfantryMotiveType(0, getCampaign(), entity.getMovementMode());\n                     addPart(motiveType);\n                     partsToAdd.add(motiveType);\n                     number--;\n                 }\n             }\n-            if(null == infantryArmor) {\n-                EquipmentType eq = ((Infantry)entity).getArmorKit();\n+            if (null == infantryArmor) {\n+                EquipmentType eq = ((Infantry) entity).getArmorKit();\n                 if (null != eq) {\n                     infantryArmor = new EquipmentPart(0, eq, 0, 1.0, false, getCampaign());\n                 } else {\n-                    infantryArmor = new InfantryArmorPart(0, getCampaign(), ((Infantry)entity).getDamageDivisor(), ((Infantry)entity).isArmorEncumbering(), ((Infantry)entity).hasDEST(), ((Infantry)entity).hasSneakCamo(), ((Infantry)entity).hasSneakECM(), ((Infantry)entity).hasSneakIR(), ((Infantry)entity).hasSpaceSuit());\n+                    infantryArmor = new InfantryArmorPart(0, getCampaign(),\n+                            ((Infantry) entity).getArmorDamageDivisor(), ((Infantry) entity).isArmorEncumbering(), ((Infantry)entity).hasDEST(), ((Infantry)entity).hasSneakCamo(), ((Infantry)entity).hasSneakECM(), ((Infantry)entity).hasSneakIR(), ((Infantry)entity).hasSpaceSuit());", "originalCommit": "99e3be11310843d4545f2e3da42587290aacb29f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEyOTk4OA==", "url": "https://github.com/MegaMek/mekhq/pull/1878#discussion_r459129988", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                            ((Infantry) entity).getArmorDamageDivisor(), ((Infantry)entity).isArmorEncumbering(), ((Infantry)entity).hasDEST(), ((Infantry)entity).hasSneakCamo(), ((Infantry)entity).hasSneakECM(),\n          \n          \n            \n                                            ((Infantry) entity).getArmorDamageDivisor(), ((Infantry) entity).isArmorEncumbering(), ((Infantry) entity).hasDEST(), ((Infantry) entity).hasSneakCamo(), ((Infantry) entity).hasSneakECM(),", "author": "Windchild292", "createdAt": "2020-07-22T22:57:43Z", "path": "MekHQ/src/mekhq/campaign/unit/Unit.java", "diffHunk": "@@ -3152,52 +3152,55 @@ else if(entity instanceof BattleArmor) {\n                 jj--;\n             }\n         }\n-        if(entity instanceof Infantry && !(entity instanceof BattleArmor)) {\n-            if(null == motiveType && entity.getMovementMode() != EntityMovementMode.INF_LEG) {\n+        if (entity.isConventionalInfantry()) {\n+            if ((null == motiveType) && (entity.getMovementMode() != EntityMovementMode.INF_LEG)) {\n                 int number = entity.getOInternal(Infantry.LOC_INFANTRY);\n-                if(((Infantry)entity).isMechanized()) {\n-                    number = ((Infantry)entity).getSquadN();\n+                if (((Infantry) entity).isMechanized()) {\n+                    number = ((Infantry) entity).getSquadN();\n                 }\n-                while(number > 0) {\n+                while (number > 0) {\n                     motiveType = new InfantryMotiveType(0, getCampaign(), entity.getMovementMode());\n                     addPart(motiveType);\n                     partsToAdd.add(motiveType);\n                     number--;\n                 }\n             }\n-            if(null == infantryArmor) {\n-                EquipmentType eq = ((Infantry)entity).getArmorKit();\n+            if (null == infantryArmor) {\n+                EquipmentType eq = ((Infantry) entity).getArmorKit();\n                 if (null != eq) {\n                     infantryArmor = new EquipmentPart(0, eq, 0, 1.0, false, getCampaign());\n                 } else {\n-                    infantryArmor = new InfantryArmorPart(0, getCampaign(), ((Infantry)entity).getDamageDivisor(), ((Infantry)entity).isArmorEncumbering(), ((Infantry)entity).hasDEST(), ((Infantry)entity).hasSneakCamo(), ((Infantry)entity).hasSneakECM(), ((Infantry)entity).hasSneakIR(), ((Infantry)entity).hasSpaceSuit());\n+                    infantryArmor = new InfantryArmorPart(0, getCampaign(),\n+                            ((Infantry) entity).getArmorDamageDivisor(), ((Infantry) entity).isArmorEncumbering(), ((Infantry)entity).hasDEST(), ((Infantry)entity).hasSneakCamo(), ((Infantry)entity).hasSneakECM(), ((Infantry)entity).hasSneakIR(), ((Infantry)entity).hasSpaceSuit());\n                 }\n-                if(infantryArmor.getStickerPrice().isPositive()) {\n+                if (infantryArmor.getStickerPrice().isPositive()) {\n                     int number = entity.getOInternal(Infantry.LOC_INFANTRY);\n-                    while(number > 0) {\n-                        infantryArmor = new InfantryArmorPart(0, getCampaign(), ((Infantry)entity).getDamageDivisor(), ((Infantry)entity).isArmorEncumbering(), ((Infantry)entity).hasDEST(), ((Infantry)entity).hasSneakCamo(), ((Infantry)entity).hasSneakECM(), ((Infantry)entity).hasSneakIR(), ((Infantry)entity).hasSpaceSuit());\n+                    while (number > 0) {\n+                        infantryArmor = new InfantryArmorPart(0, getCampaign(),\n+                                ((Infantry) entity).getArmorDamageDivisor(), ((Infantry)entity).isArmorEncumbering(), ((Infantry)entity).hasDEST(), ((Infantry)entity).hasSneakCamo(), ((Infantry)entity).hasSneakECM(),", "originalCommit": "99e3be11310843d4545f2e3da42587290aacb29f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b49f945304cf91d308aaf213d2f438d5f77b838c", "url": "https://github.com/MegaMek/mekhq/commit/b49f945304cf91d308aaf213d2f438d5f77b838c", "message": "Update MekHQ/src/mekhq/campaign/unit/Unit.java\n\nCo-authored-by: Justin Bowen <39067288+Windchild292@users.noreply.github.com>", "committedDate": "2020-07-23T00:40:30Z", "type": "commit"}, {"oid": "9ad815103a0f740a4ca8ae7889296d42d01c9e9a", "url": "https://github.com/MegaMek/mekhq/commit/9ad815103a0f740a4ca8ae7889296d42d01c9e9a", "message": "Update MekHQ/src/mekhq/campaign/unit/Unit.java\n\nCo-authored-by: Justin Bowen <39067288+Windchild292@users.noreply.github.com>", "committedDate": "2020-07-23T00:40:43Z", "type": "commit"}]}