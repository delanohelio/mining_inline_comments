{"pr_number": 1401, "pr_title": "1263: Fixing Marriages Without Surnames", "pr_createdAt": "2020-01-19T04:22:41Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/1401", "timeline": [{"oid": "4e9623c91e6553ed228cefd1438048dc264fc19d", "url": "https://github.com/MegaMek/mekhq/commit/4e9623c91e6553ed228cefd1438048dc264fc19d", "message": "Adding statements to handle Personnel without a surname", "committedDate": "2020-01-18T23:54:11Z", "type": "commit"}, {"oid": "f23908552a0afc0a1ced49da1407acea6ff5c63c", "url": "https://github.com/MegaMek/mekhq/commit/f23908552a0afc0a1ced49da1407acea6ff5c63c", "message": "Changing null comparison to space comparison", "committedDate": "2020-01-19T00:01:18Z", "type": "commit"}, {"oid": "05a9b9848d6269fcc943fc55c49371687cb06bcf", "url": "https://github.com/MegaMek/mekhq/commit/05a9b9848d6269fcc943fc55c49371687cb06bcf", "message": "Fixing how empty surnames are handled in MekHQ", "committedDate": "2020-01-19T01:12:50Z", "type": "commit"}, {"oid": "341de99a7f55ec16a5f99aad9794d2d18aa3b580", "url": "https://github.com/MegaMek/mekhq/commit/341de99a7f55ec16a5f99aad9794d2d18aa3b580", "message": "Ordering Changes in Marriage Function", "committedDate": "2020-01-19T01:43:21Z", "type": "commit"}, {"oid": "29b89737be121fe2e086f87226a84e74c660b828", "url": "https://github.com/MegaMek/mekhq/commit/29b89737be121fe2e086f87226a84e74c660b828", "message": "1263: Fixed Marriages without surnames", "committedDate": "2020-01-19T04:21:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI2NDkyNw==", "url": "https://github.com/MegaMek/mekhq/pull/1401#discussion_r368264927", "bodyText": "We have a method like this in megamek.common.util, let's use that instead of reinventing the wheel.", "author": "NickAragua", "createdAt": "2020-01-19T04:29:18Z", "path": "MekHQ/src/mekhq/gui/adapter/PersonnelTableMouseAdapter.java", "diffHunk": "@@ -2632,15 +2679,16 @@ private JMenuItem newMenuItem(String text, String command, boolean enabled) {\n     }\n \n     private JCheckBoxMenuItem newCheckboxMenu(String text, String command, boolean selected) {\n-        return newCheckboxMenu(text, command, selected, true);\n-    }\n-\n-    private JCheckBoxMenuItem newCheckboxMenu(String text, String command, boolean selected, boolean enabled) {\n         JCheckBoxMenuItem result = new JCheckBoxMenuItem(text);\n         result.setSelected(selected);\n         result.setActionCommand(command);\n         result.addActionListener(this);\n         result.setEnabled(true);\n         return result;\n     }\n+\n+    private boolean IsNullOrEmpty(String str){\n+        return str.trim().length() == 0;\n+//        return ((str != null) && (!str.trim().isEmpty()));", "originalCommit": "29b89737be121fe2e086f87226a84e74c660b828", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI2NTI1OA==", "url": "https://github.com/MegaMek/mekhq/pull/1401#discussion_r368265258", "bodyText": "Ah, I forgot to hit enter to ask if there was pre-existing way to do this in MekHQ. And otherwise, I would have suggested making one, cause the fact it isn't standard in Java is bloody annoying.", "author": "Windchild292", "createdAt": "2020-01-19T04:38:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI2NDkyNw=="}], "type": "inlineReview"}, {"oid": "fa9e611a4b2d12ccf72146e9de432cad387556ab", "url": "https://github.com/MegaMek/mekhq/commit/fa9e611a4b2d12ccf72146e9de432cad387556ab", "message": "Using StringUtil", "committedDate": "2020-01-19T04:45:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI5NDc5Mw==", "url": "https://github.com/MegaMek/mekhq/pull/1401#discussion_r368294793", "bodyText": "If >= 2 wouldn't the surname be selectedName[selectedName.length - 1] ?", "author": "sixlettervariables", "createdAt": "2020-01-19T13:39:13Z", "path": "MekHQ/src/mekhq/gui/adapter/PersonnelTableMouseAdapter.java", "diffHunk": "@@ -528,34 +529,81 @@ public void actionPerformed(ActionEvent action) {\n                 Person spouse = gui.getCampaign().getPerson(UUID.fromString(data[1]));\n                 String surnameOption = data[2];\n \n-                String selectedSurname = selectedPerson.getName().split(SPACE, 2)[1];\n-                String spouseSurname = spouse.getName().split(SPACE, 2)[1];\n-                String selectedGivenname = selectedPerson.getName().split(SPACE, 2)[0];\n-                String spouseGivenname = spouse.getName().split(SPACE, 2)[0];\n+                String[] selectedName = selectedPerson.getName().split(SPACE, 2);\n+                String[] spouseName = spouse.getName().split(SPACE,2);\n+                String selectedGivenName = \"\", selectedSurname = \"\", spouseGivenName = \"\", spouseSurname = \"\";\n+\n+                if (selectedName.length >= 2) {\n+                    selectedGivenName = selectedName[0];\n+                    selectedSurname = selectedName[1];", "originalCommit": "fa9e611a4b2d12ccf72146e9de432cad387556ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMjc4Nw==", "url": "https://github.com/MegaMek/mekhq/pull/1401#discussion_r368302787", "bodyText": "You are correct, and the GivenName would be the rest of the name with the removal of the Surname. I'm going to assume a single last name for this PR, and create a RFE to permit multiple last names", "author": "Windchild292", "createdAt": "2020-01-19T15:38:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI5NDc5Mw=="}], "type": "inlineReview"}, {"oid": "265d424b8456aaa44258aaa6bd317886ac55cff6", "url": "https://github.com/MegaMek/mekhq/commit/265d424b8456aaa44258aaa6bd317886ac55cff6", "message": "Adding support for multi-part first names in marriages", "committedDate": "2020-01-19T16:41:40Z", "type": "commit"}]}