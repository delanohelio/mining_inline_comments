{"pr_number": 5217, "pr_title": "Add the rallying banner", "pr_createdAt": "2020-06-12T23:27:45Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5217", "timeline": [{"oid": "95d237f8ab317d6cafb47c73ec873d41448c5da1", "url": "https://github.com/ldtteam/minecolonies/commit/95d237f8ab317d6cafb47c73ec873d41448c5da1", "message": "PROTOTYPE! DO NOT MERGE! Started work on dman request refactoring", "committedDate": "2020-05-21T19:24:41Z", "type": "commit"}, {"oid": "09551b45471e78a0e83c7af70f5752423ff3929f", "url": "https://github.com/ldtteam/minecolonies/commit/09551b45471e78a0e83c7af70f5752423ff3929f", "message": "PROTOTYPE! DO NOT MERGE! Mainly reworked Deliveryman AI", "committedDate": "2020-05-21T23:58:36Z", "type": "commit"}, {"oid": "ee8f836baf67d5e8345ea088c96942bc268190ef", "url": "https://github.com/ldtteam/minecolonies/commit/ee8f836baf67d5e8345ea088c96942bc268190ef", "message": "Prepared deliveryman for new pickup system", "committedDate": "2020-05-22T17:43:43Z", "type": "commit"}, {"oid": "4a34ee1fb881332e4d39248bb72495788aa0f723", "url": "https://github.com/ldtteam/minecolonies/commit/4a34ee1fb881332e4d39248bb72495788aa0f723", "message": "Made workers create a pickup request after dump.", "committedDate": "2020-05-22T19:15:21Z", "type": "commit"}, {"oid": "4603247b5bee04ff36ba43e5bea03b7273e0f9cc", "url": "https://github.com/ldtteam/minecolonies/commit/4603247b5bee04ff36ba43e5bea03b7273e0f9cc", "message": "Aligned code with reality", "committedDate": "2020-05-22T21:27:06Z", "type": "commit"}, {"oid": "94939217b33cccd4a1c934787f70c6826dc28069", "url": "https://github.com/ldtteam/minecolonies/commit/94939217b33cccd4a1c934787f70c6826dc28069", "message": "Almost completed prototype. Deliveryman can now pickup on-demand", "committedDate": "2020-05-22T23:07:27Z", "type": "commit"}, {"oid": "3202fa4812b58248fc22ca394e71b768e6da84f9", "url": "https://github.com/ldtteam/minecolonies/commit/3202fa4812b58248fc22ca394e71b768e6da84f9", "message": "Added info text on force pickup", "committedDate": "2020-05-23T19:15:46Z", "type": "commit"}, {"oid": "d8d5706dd20ad0f870a00c3d7d7092a558460f0a", "url": "https://github.com/ldtteam/minecolonies/commit/d8d5706dd20ad0f870a00c3d7d7092a558460f0a", "message": "Improved overall stability of the dman", "committedDate": "2020-05-23T23:25:58Z", "type": "commit"}, {"oid": "11cd22e03bf6e4f0df7e1ec86c26edbca3a1dd5f", "url": "https://github.com/ldtteam/minecolonies/commit/11cd22e03bf6e4f0df7e1ec86c26edbca3a1dd5f", "message": "Adapted delays a bit, and don't request a pickup when another request is already active.", "committedDate": "2020-05-24T00:02:50Z", "type": "commit"}, {"oid": "e2511aa580136c0526e642a6d152ddf0af31ee67", "url": "https://github.com/ldtteam/minecolonies/commit/e2511aa580136c0526e642a6d152ddf0af31ee67", "message": "Updated RS version", "committedDate": "2020-05-24T08:56:01Z", "type": "commit"}, {"oid": "3bff523867e61ac49cced9927b7616584f46111f", "url": "https://github.com/ldtteam/minecolonies/commit/3bff523867e61ac49cced9927b7616584f46111f", "message": "Merge remote-tracking branch 'upstream/version/1.15' into feature/wip-request-pickup", "committedDate": "2020-05-24T08:56:44Z", "type": "commit"}, {"oid": "c2f58392cc7d4d3c9bf7e171230b00dc44af0822", "url": "https://github.com/ldtteam/minecolonies/commit/c2f58392cc7d4d3c9bf7e171230b00dc44af0822", "message": "Made it so that the builder also doesn't keep requesting pickups.", "committedDate": "2020-05-24T14:10:34Z", "type": "commit"}, {"oid": "4a19b255cafc070a7c75d263f4ff6db25757e7e2", "url": "https://github.com/ldtteam/minecolonies/commit/4a19b255cafc070a7c75d263f4ff6db25757e7e2", "message": "Streamlined delays", "committedDate": "2020-05-24T15:05:53Z", "type": "commit"}, {"oid": "5c619830b632f8886c07316ef8448287c5e7e274", "url": "https://github.com/ldtteam/minecolonies/commit/5c619830b632f8886c07316ef8448287c5e7e274", "message": "Removed unnecessary imports", "committedDate": "2020-05-24T15:45:48Z", "type": "commit"}, {"oid": "1df41d6bb78b072ca6a70b3249ade20c08dc9090", "url": "https://github.com/ldtteam/minecolonies/commit/1df41d6bb78b072ca6a70b3249ade20c08dc9090", "message": "Added a (somewhat lazy) protection against pickup-request spam while inventory is full", "committedDate": "2020-05-24T17:41:31Z", "type": "commit"}, {"oid": "ead3609d3fce423bf0e3b5d1fb71d2c650162e54", "url": "https://github.com/ldtteam/minecolonies/commit/ead3609d3fce423bf0e3b5d1fb71d2c650162e54", "message": "Added missing comment for isPickupLockEnabled", "committedDate": "2020-05-24T17:46:41Z", "type": "commit"}, {"oid": "b0d717897751eb0bb341b407f70c564a2da2bf6b", "url": "https://github.com/ldtteam/minecolonies/commit/b0d717897751eb0bb341b407f70c564a2da2bf6b", "message": "Use built-in-function instead of isPickupLockEnabled to avoid multiple pickup-requests at once.", "committedDate": "2020-05-24T21:05:51Z", "type": "commit"}, {"oid": "deccf790812e9606dee0df91d3dccf2effba469a", "url": "https://github.com/ldtteam/minecolonies/commit/deccf790812e9606dee0df91d3dccf2effba469a", "message": "Fixed the stash, made it so that only one pickup request can be active per building, reduced pickup delay to 2 ticks (gathering larger buildings took too long)", "committedDate": "2020-05-25T19:22:32Z", "type": "commit"}, {"oid": "b2b9ff1f114a99ded4bef9716d967d5d29ca2d43", "url": "https://github.com/ldtteam/minecolonies/commit/b2b9ff1f114a99ded4bef9716d967d5d29ca2d43", "message": "Added Javadoc", "committedDate": "2020-05-25T19:54:57Z", "type": "commit"}, {"oid": "2d821950bc74740f327fd6ff826234e4cbac44e2", "url": "https://github.com/ldtteam/minecolonies/commit/2d821950bc74740f327fd6ff826234e4cbac44e2", "message": "Merge branch 'up/version/1.15' into feature/request-pickup\n\nConflicts:\n\tsrc/api/java/com/minecolonies/api/util/constant/TranslationConstants.java\n\tsrc/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java\n\tsrc/main/java/com/minecolonies/coremod/entity/ai/citizen/deliveryman/EntityAIWorkDeliveryman.java", "committedDate": "2020-05-25T20:11:21Z", "type": "commit"}, {"oid": "844cd2eae24618e468941dc99511ebb1fcebc494", "url": "https://github.com/ldtteam/minecolonies/commit/844cd2eae24618e468941dc99511ebb1fcebc494", "message": "Merge branch 'up/version/1.15' into feature/request-pickup", "committedDate": "2020-05-25T20:24:43Z", "type": "commit"}, {"oid": "2ea2300ee1ebcee339fc8eccbfb63d8fff1f5ad6", "url": "https://github.com/ldtteam/minecolonies/commit/2ea2300ee1ebcee339fc8eccbfb63d8fff1f5ad6", "message": "Merge branch 'up/version/1.15' into feature/request-pickup", "committedDate": "2020-05-25T20:55:11Z", "type": "commit"}, {"oid": "4cd0e424a710039d30c24bfd11d5661641dcae34", "url": "https://github.com/ldtteam/minecolonies/commit/4cd0e424a710039d30c24bfd11d5661641dcae34", "message": "Caught possible nullpointer exception.", "committedDate": "2020-05-25T22:07:16Z", "type": "commit"}, {"oid": "51e3213491c7a0abc6f765647e87095be07cf004", "url": "https://github.com/ldtteam/minecolonies/commit/51e3213491c7a0abc6f765647e87095be07cf004", "message": "Changed the dman's item comparator to be nbt-sensitive, since the RS will tell the dman *exactly* what to pick up.", "committedDate": "2020-05-26T18:22:49Z", "type": "commit"}, {"oid": "aac342d565ef17f85ec20696949296eb6e01780c", "url": "https://github.com/ldtteam/minecolonies/commit/aac342d565ef17f85ec20696949296eb6e01780c", "message": "Another attempt to get the item comparison during prepareDelivery() right, using ItemStackUtils this time.", "committedDate": "2020-05-27T18:28:15Z", "type": "commit"}, {"oid": "99d22886eda746e50131ec8a473ff393fa0ed2fb", "url": "https://github.com/ldtteam/minecolonies/commit/99d22886eda746e50131ec8a473ff393fa0ed2fb", "message": "Merge branch 'version/1.15' into feature/request-pickup", "committedDate": "2020-05-28T19:21:33Z", "type": "commit"}, {"oid": "6b77b545df1c47495837447b42236cce878a3524", "url": "https://github.com/ldtteam/minecolonies/commit/6b77b545df1c47495837447b42236cce878a3524", "message": "Added rallying banner item and recipe.", "committedDate": "2020-05-29T18:22:55Z", "type": "commit"}, {"oid": "35494a264a827b90e6158cb3805ecec9fd6ba44c", "url": "https://github.com/ldtteam/minecolonies/commit/35494a264a827b90e6158cb3805ecec9fd6ba44c", "message": "Added simple connector between banners and guard towers.", "committedDate": "2020-05-30T08:14:55Z", "type": "commit"}, {"oid": "3bb8b1238a47a2726d5335d274dcf54939f5eef9", "url": "https://github.com/ldtteam/minecolonies/commit/3bb8b1238a47a2726d5335d274dcf54939f5eef9", "message": "Added client-side highlighting of rallied guard towers", "committedDate": "2020-05-30T18:38:42Z", "type": "commit"}, {"oid": "37f851e411590e6e95670b9c409e4453dfb1dba2", "url": "https://github.com/ldtteam/minecolonies/commit/37f851e411590e6e95670b9c409e4453dfb1dba2", "message": "Added scaling mechanism to priorities, so that they internally don't increase linearly but following a quadratic function. This will make the aging mechanism slower.", "committedDate": "2020-05-30T20:10:19Z", "type": "commit"}, {"oid": "4390e3b0776dd066c26d6221a60bdaf1ed30455e", "url": "https://github.com/ldtteam/minecolonies/commit/4390e3b0776dd066c26d6221a60bdaf1ed30455e", "message": "Added pickup priority to deliveryman-hut", "committedDate": "2020-05-30T20:32:13Z", "type": "commit"}, {"oid": "28b333795a6d7a2f04c38f71695757a18a0eaf29", "url": "https://github.com/ldtteam/minecolonies/commit/28b333795a6d7a2f04c38f71695757a18a0eaf29", "message": "Workers will now only request a pickup after dumping if they have actually dumped something.", "committedDate": "2020-05-30T21:43:42Z", "type": "commit"}, {"oid": "fa90d53fb2f746bafda8967f8c87eb7686e33143", "url": "https://github.com/ldtteam/minecolonies/commit/fa90d53fb2f746bafda8967f8c87eb7686e33143", "message": "Adjusted priority calculation back to linear ... makes more sense after all.", "committedDate": "2020-05-30T21:51:57Z", "type": "commit"}, {"oid": "e0552a2b3483070e364213e45ed9b1b82e2adfe7", "url": "https://github.com/ldtteam/minecolonies/commit/e0552a2b3483070e364213e45ed9b1b82e2adfe7", "message": "Show priority only on requests that actually have priorities in the dman hut GUI. Also fixed label.", "committedDate": "2020-05-30T22:00:22Z", "type": "commit"}, {"oid": "1198e2117a2346ff18639d4d3c5781ff496a4872", "url": "https://github.com/ldtteam/minecolonies/commit/1198e2117a2346ff18639d4d3c5781ff496a4872", "message": "Merge branch 'feature/show-pickup-priority-in-dman-hut' into improvement/pickup-request-frequency", "committedDate": "2020-05-30T22:00:44Z", "type": "commit"}, {"oid": "b6f8fb158f7d6f32ae2fb60e6a7c29ce3db8373d", "url": "https://github.com/ldtteam/minecolonies/commit/b6f8fb158f7d6f32ae2fb60e6a7c29ce3db8373d", "message": "Renamed getPlayerToFollow to getPositionToFollow, which makes more sense. Prepared AI to rally.", "committedDate": "2020-05-31T20:42:31Z", "type": "commit"}, {"oid": "cfe79013c197ebab34442efc9e1d4d920bdbd67d", "url": "https://github.com/ldtteam/minecolonies/commit/cfe79013c197ebab34442efc9e1d4d920bdbd67d", "message": "Added prototype rallying", "committedDate": "2020-05-31T23:05:26Z", "type": "commit"}, {"oid": "b29ce35934750f57cd93a88134e63fc1147e78da", "url": "https://github.com/ldtteam/minecolonies/commit/b29ce35934750f57cd93a88134e63fc1147e78da", "message": "Added a few chat messages, and randomized the position of guards so they don't clump together so much", "committedDate": "2020-06-01T09:35:17Z", "type": "commit"}, {"oid": "e38df6f8c983a0a3d06e7b7c849e9dda6310b3c6", "url": "https://github.com/ldtteam/minecolonies/commit/e38df6f8c983a0a3d06e7b7c849e9dda6310b3c6", "message": "Gave guards level-depending speed when rallying to the player", "committedDate": "2020-06-01T09:59:20Z", "type": "commit"}, {"oid": "1eeae0dacd036e74e2f3f5cd4a7ad6cb63fca432", "url": "https://github.com/ldtteam/minecolonies/commit/1eeae0dacd036e74e2f3f5cd4a7ad6cb63fca432", "message": "Improved responsiveness of guards and handled events for drop, move-to-chest, etc.", "committedDate": "2020-06-01T17:31:01Z", "type": "commit"}, {"oid": "a50d883fb13979e126df10339b40195e16f144a6", "url": "https://github.com/ldtteam/minecolonies/commit/a50d883fb13979e126df10339b40195e16f144a6", "message": "Some usability improvements", "committedDate": "2020-06-01T18:42:16Z", "type": "commit"}, {"oid": "e6db9f722421603d620b2fc286e79e0c052b9747", "url": "https://github.com/ldtteam/minecolonies/commit/e6db9f722421603d620b2fc286e79e0c052b9747", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner", "committedDate": "2020-06-01T18:43:21Z", "type": "commit"}, {"oid": "9209bdde4fcd3ae2d15190051f4f0ced3695e37f", "url": "https://github.com/ldtteam/minecolonies/commit/9209bdde4fcd3ae2d15190051f4f0ced3695e37f", "message": "Merge branch 'feature/rallying-banner' into test/rallying-banner-+-dman\n\nConflicts:\n\tsrc/api/java/com/minecolonies/api/util/constant/TranslationConstants.java", "committedDate": "2020-06-01T18:48:31Z", "type": "commit"}, {"oid": "8356c2216d0ce89fc6bdc1cf40ecf3868e8d6cd3", "url": "https://github.com/ldtteam/minecolonies/commit/8356c2216d0ce89fc6bdc1cf40ecf3868e8d6cd3", "message": "Fixed copy/paste error", "committedDate": "2020-06-01T18:50:11Z", "type": "commit"}, {"oid": "51a5f51b2127786e7c1ad4da059a68ae9c79e718", "url": "https://github.com/ldtteam/minecolonies/commit/51a5f51b2127786e7c1ad4da059a68ae9c79e718", "message": "Merge branch 'improvement/pickup-request-frequency' into test/rallying-banner-+-dman", "committedDate": "2020-06-01T18:57:19Z", "type": "commit"}, {"oid": "c8aa43b2f291caf1933cc64d3ce39201f4a09513", "url": "https://github.com/ldtteam/minecolonies/commit/c8aa43b2f291caf1933cc64d3ce39201f4a09513", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner", "committedDate": "2020-06-01T21:42:58Z", "type": "commit"}, {"oid": "8bd61f90003cf589aab842f0801569f0e7a84cba", "url": "https://github.com/ldtteam/minecolonies/commit/8bd61f90003cf589aab842f0801569f0e7a84cba", "message": "Fixed pacifism in guards", "committedDate": "2020-06-02T17:14:40Z", "type": "commit"}, {"oid": "312f105ef2786dabe85f866f1e02ee1017989da4", "url": "https://github.com/ldtteam/minecolonies/commit/312f105ef2786dabe85f866f1e02ee1017989da4", "message": "Code cleanup and added support for barracks towers", "committedDate": "2020-06-02T18:57:06Z", "type": "commit"}, {"oid": "be5559968febc80c8fcbe58101ceeb8678397ced", "url": "https://github.com/ldtteam/minecolonies/commit/be5559968febc80c8fcbe58101ceeb8678397ced", "message": "Merge branch 'feature/rallying-banner' into test/rallying-banner-+-dman\n\nConflicts:\n\tsrc/main/java/com/minecolonies/coremod/items/ItemBannerRallyGuards.java", "committedDate": "2020-06-02T18:59:26Z", "type": "commit"}, {"oid": "fdca5f989bc330af33c076675592b834816f874e", "url": "https://github.com/ldtteam/minecolonies/commit/fdca5f989bc330af33c076675592b834816f874e", "message": "Merge branch 'up/version/1.15' into test/rallying-banner-+-dman", "committedDate": "2020-06-02T19:01:03Z", "type": "commit"}, {"oid": "f2a63794be22c7c9b46c1d172f53c61e30fd4a2c", "url": "https://github.com/ldtteam/minecolonies/commit/f2a63794be22c7c9b46c1d172f53c61e30fd4a2c", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner", "committedDate": "2020-06-03T20:13:03Z", "type": "commit"}, {"oid": "47ac8e69e1d34aaa0f0ee6035587d0818e809c91", "url": "https://github.com/ldtteam/minecolonies/commit/47ac8e69e1d34aaa0f0ee6035587d0818e809c91", "message": "Cleaned up code", "committedDate": "2020-06-03T21:03:16Z", "type": "commit"}, {"oid": "a16733d117bbefc1130dc2e03795a3cc4b75935c", "url": "https://github.com/ldtteam/minecolonies/commit/a16733d117bbefc1130dc2e03795a3cc4b75935c", "message": "Added GUI", "committedDate": "2020-06-04T21:16:19Z", "type": "commit"}, {"oid": "313c3f0b53357ab9155d390789b650e94e265224", "url": "https://github.com/ldtteam/minecolonies/commit/313c3f0b53357ab9155d390789b650e94e265224", "message": "Improved GUI layout", "committedDate": "2020-06-06T19:03:25Z", "type": "commit"}, {"oid": "eb19759f1bed4fbb302a46bdc68459f53896dcfc", "url": "https://github.com/ldtteam/minecolonies/commit/eb19759f1bed4fbb302a46bdc68459f53896dcfc", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner", "committedDate": "2020-06-06T19:04:13Z", "type": "commit"}, {"oid": "1f48cfaef8afcd114eea3bf34dd6dcfb36f06f10", "url": "https://github.com/ldtteam/minecolonies/commit/1f48cfaef8afcd114eea3bf34dd6dcfb36f06f10", "message": "Added interdimensional support and improved GUI yet again", "committedDate": "2020-06-06T23:46:33Z", "type": "commit"}, {"oid": "17351e56a7673b9ceded3ab355dcc154799ac288", "url": "https://github.com/ldtteam/minecolonies/commit/17351e56a7673b9ceded3ab355dcc154799ac288", "message": "Fixed window messages for multiplayer server", "committedDate": "2020-06-07T17:53:55Z", "type": "commit"}, {"oid": "4517a84d86d82cfd73ebfb6303cf7d30651ba4c8", "url": "https://github.com/ldtteam/minecolonies/commit/4517a84d86d82cfd73ebfb6303cf7d30651ba4c8", "message": "Fixed client/server-separate code. GUI now works and functions :-D", "committedDate": "2020-06-07T21:28:12Z", "type": "commit"}, {"oid": "444e1c30be3d75956463ffd63939ed00eaf10fd6", "url": "https://github.com/ldtteam/minecolonies/commit/444e1c30be3d75956463ffd63939ed00eaf10fd6", "message": "Fixed null pointer crash when AI is not loaded during broadcast", "committedDate": "2020-06-08T18:15:11Z", "type": "commit"}, {"oid": "feb73693a053eaf86d499378e208eca4092237e5", "url": "https://github.com/ldtteam/minecolonies/commit/feb73693a053eaf86d499378e208eca4092237e5", "message": "Better tooltips and hints", "committedDate": "2020-06-08T18:44:58Z", "type": "commit"}, {"oid": "45a662671a2fbcaa06fac8ace683092bf255c77f", "url": "https://github.com/ldtteam/minecolonies/commit/45a662671a2fbcaa06fac8ace683092bf255c77f", "message": "Stabilized rallying code", "committedDate": "2020-06-08T20:14:04Z", "type": "commit"}, {"oid": "0df48110b15007cd2c9610230a187ccbc9bb033a", "url": "https://github.com/ldtteam/minecolonies/commit/0df48110b15007cd2c9610230a187ccbc9bb033a", "message": "Cleaned code", "committedDate": "2020-06-08T21:29:02Z", "type": "commit"}, {"oid": "11f0dbaa420e61f2504b7731f2a624a9de4620e6", "url": "https://github.com/ldtteam/minecolonies/commit/11f0dbaa420e61f2504b7731f2a624a9de4620e6", "message": "Structurized code a bit better to separate client/server code.", "committedDate": "2020-06-09T20:58:46Z", "type": "commit"}, {"oid": "3d2953fb7d80c0dce8f3e66bb3628d59f481c336", "url": "https://github.com/ldtteam/minecolonies/commit/3d2953fb7d80c0dce8f3e66bb3628d59f481c336", "message": "Refactor to be based on ILocation, which enables support for banner tile entities.", "committedDate": "2020-06-10T00:00:40Z", "type": "commit"}, {"oid": "ed224fe89822888f446a25d986184952e3fcfb0f", "url": "https://github.com/ldtteam/minecolonies/commit/ed224fe89822888f446a25d986184952e3fcfb0f", "message": "Prevent damage from player to guards while rallied and added appropriate glow effects", "committedDate": "2020-06-11T15:42:09Z", "type": "commit"}, {"oid": "0240220170a7586018c7fba1fd67df0596f8a5b8", "url": "https://github.com/ldtteam/minecolonies/commit/0240220170a7586018c7fba1fd67df0596f8a5b8", "message": "Added permissions for the rallying banner", "committedDate": "2020-06-11T16:29:56Z", "type": "commit"}, {"oid": "d17e1968f66ca64fa9d73ccd93b5d10e048924db", "url": "https://github.com/ldtteam/minecolonies/commit/d17e1968f66ca64fa9d73ccd93b5d10e048924db", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner\n\nConflicts:\n\tsrc/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java\n\tsrc/main/java/com/minecolonies/coremod/event/ClientEventHandler.java", "committedDate": "2020-06-11T16:36:29Z", "type": "commit"}, {"oid": "ced39ef1d4ac3a7a6321811cefe0af8b18e0aa65", "url": "https://github.com/ldtteam/minecolonies/commit/ced39ef1d4ac3a7a6321811cefe0af8b18e0aa65", "message": "Added rallying to the states that should prevent dumping", "committedDate": "2020-06-11T16:42:40Z", "type": "commit"}, {"oid": "807754e12f17f3ef2dfa20eb7bac011bbbeb2df5", "url": "https://github.com/ldtteam/minecolonies/commit/807754e12f17f3ef2dfa20eb7bac011bbbeb2df5", "message": "Forge Update Compatibility", "committedDate": "2020-06-11T18:42:25Z", "type": "commit"}, {"oid": "565192facd1b57f9486de7cc88c65d58ec0cc8b0", "url": "https://github.com/ldtteam/minecolonies/commit/565192facd1b57f9486de7cc88c65d58ec0cc8b0", "message": "Coding Style", "committedDate": "2020-06-11T18:49:53Z", "type": "commit"}, {"oid": "7a878d0fb16fe95aa5df2bd9a09d84453720b235", "url": "https://github.com/ldtteam/minecolonies/commit/7a878d0fb16fe95aa5df2bd9a09d84453720b235", "message": "Added null-check", "committedDate": "2020-06-11T18:51:10Z", "type": "commit"}, {"oid": "bc6dab4f1415cc67e0a85cf10d77e03a94b4d810", "url": "https://github.com/ldtteam/minecolonies/commit/bc6dab4f1415cc67e0a85cf10d77e03a94b4d810", "message": "Coding style fixes and JDoc", "committedDate": "2020-06-12T19:36:46Z", "type": "commit"}, {"oid": "14c33f1389dea572557c2c3f12fbe006539a15f7", "url": "https://github.com/ldtteam/minecolonies/commit/14c33f1389dea572557c2c3f12fbe006539a15f7", "message": "Traded minor lag for stability", "committedDate": "2020-06-12T19:59:30Z", "type": "commit"}, {"oid": "1bad1d28d5f3231cd9d4b7a35c3f22aa20872282", "url": "https://github.com/ldtteam/minecolonies/commit/1bad1d28d5f3231cd9d4b7a35c3f22aa20872282", "message": "Added a saturation penalty and a range limitation to the banner", "committedDate": "2020-06-12T22:43:31Z", "type": "commit"}, {"oid": "2dbda5ba1253cf053bbd6e98ff49b76efab7007e", "url": "https://github.com/ldtteam/minecolonies/commit/2dbda5ba1253cf053bbd6e98ff49b76efab7007e", "message": "Fixed adding citizens to colony too early, thereby duplicating skeleton entries.", "committedDate": "2020-06-12T23:26:26Z", "type": "commit"}, {"oid": "43072614ae9c89d2d068b2738f7e64f642e56088", "url": "https://github.com/ldtteam/minecolonies/commit/43072614ae9c89d2d068b2738f7e64f642e56088", "message": "Removed unnecessary team-addition, and stabilized team-removal of citizens", "committedDate": "2020-06-13T21:53:30Z", "type": "commit"}, {"oid": "13e24fd190f661e74cf01022779a8ed18f17668c", "url": "https://github.com/ldtteam/minecolonies/commit/13e24fd190f661e74cf01022779a8ed18f17668c", "message": "Merge branch 'version/1.15' into feature/rallying-banner", "committedDate": "2020-06-15T11:58:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxNTI5OA==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440215298", "bodyText": "I think teams are not per-world, so we probably should add colony id + colony dimension to avoid future problems", "author": "someaddons", "createdAt": "2020-06-15T14:26:41Z", "path": "src/main/java/com/minecolonies/coremod/colony/Colony.java", "diffHunk": "@@ -493,16 +498,24 @@ public void updateAttackingPlayers()\n         }\n     }\n \n+    @Override\n+    public ScorePlayerTeam getTeam()\n+    {\n+        // This getter will create the team if it doesn't exist. Could do something different though in the future.\n+        return checkOrCreateTeam();\n+    }\n+\n     /**\n      * Check or create the team.\n      */\n-    private void checkOrCreateTeam()\n+    private ScorePlayerTeam checkOrCreateTeam()\n     {\n         if (this.world.getScoreboard().getTeam(TEAM_COLONY_NAME + id) == null)", "originalCommit": "13e24fd190f661e74cf01022779a8ed18f17668c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQxOTUzOA==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440419538", "bodyText": "I have not changed this, it was \"always\" this way.\nAccording to https://minecraft.gamepedia.com/Scoreboard#NBT_format, it seems that the Scoreboard, and thereby the teams, are dimension-agnostic. I hope that colony IDs are unique across multiple dimensions as well?", "author": "JiaYow", "createdAt": "2020-06-15T20:11:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxNTI5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyODAyNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440428025", "bodyText": "colony ID's arent unique for dimensions, need dimension+colony ID. And ye I saw that it was like that before, but while you're on changing it we should probably add the dimension ID to it", "author": "someaddons", "createdAt": "2020-06-15T20:28:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxNTI5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQwMzUxOQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r442403519", "bodyText": "Fixed in 1123994 and e54bba8.", "author": "JiaYow", "createdAt": "2020-06-18T17:55:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxNTI5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyMjAzOA==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440222038", "bodyText": "I think we can add Officer's here too and you need to bump up the permissions version ontop on changes for backwards compat stuff", "author": "someaddons", "createdAt": "2020-06-15T14:35:55Z", "path": "src/main/java/com/minecolonies/coremod/colony/permissions/Permissions.java", "diffHunk": "@@ -136,7 +136,7 @@ public Permissions(@NotNull final Colony colony)\n         this.setPermission(Rank.OWNER, Action.TELEPORT_TO_COLONY);\n         this.setPermission(Rank.OWNER, Action.RECEIVE_MESSAGES_FAR_AWAY);\n         this.setPermission(Rank.OWNER, Action.CAN_KEEP_COLONY_ACTIVE_WHILE_AWAY);\n-\n+        this.setPermission(Rank.OWNER, Action.RALLY_GUARDS);", "originalCommit": "13e24fd190f661e74cf01022779a8ed18f17668c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQwMzc0NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r442403745", "bodyText": "Changed in 6a08fe3.", "author": "JiaYow", "createdAt": "2020-06-18T17:55:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyMjAzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNDA2OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440224069", "bodyText": "Is start working unused now? if so remove the AITarget/function", "author": "someaddons", "createdAt": "2020-06-15T14:38:40Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIFight.java", "diffHunk": "@@ -84,9 +84,9 @@ public AbstractEntityAIFight(@NotNull final J job)\n     {\n         super(job);\n         super.registerTargets(\n-          new AITarget(IDLE, START_WORKING, 1),\n+          new AITarget(IDLE, PREPARING, 1),", "originalCommit": "13e24fd190f661e74cf01022779a8ed18f17668c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyMjI4NA==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440422284", "bodyText": "START_WORKING is still used for regeneration and when a weapon breaks on the guard etc. I just made it not be the initial state, because that means that after server restart the guards will always go home to their hut (startWorkingFromOwnBuilding is part of that state), which would potentially kill you when a server restart happens while you're rally/fighting.\nIn any case, Ray wanted to improve the guard AI anyway - it's a little bit \"weird\" at the moment, definitely not like more modern AIs are programmed. So he will probably change this too, if he wants to.", "author": "JiaYow", "createdAt": "2020-06-15T20:16:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNDA2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ1MTgzMg==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440451832", "bodyText": "ah its still used fine then", "author": "someaddons", "createdAt": "2020-06-15T21:16:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNDA2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNjU1Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440226557", "bodyText": "Did you consider that they use up food too when fighting?", "author": "someaddons", "createdAt": "2020-06-15T14:42:04Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java", "diffHunk": "@@ -140,6 +142,11 @@\n      */\n     private static final int GUARD_REGEN_INTERVAL = 40;\n \n+    /**\n+     * Interval between saturation losses during rallying. 1 saturation loss per interval.\n+     */\n+    private static final int RALLY_SATURATION_LOSS_INTERVAL = TICKS_SECOND * 10;", "originalCommit": "13e24fd190f661e74cf01022779a8ed18f17668c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyMzgxNA==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440423814", "bodyText": "I did. That is why the saturation reduction from this mechanism is always a fraction of your current saturation, ie. when you have low saturation, it won't deduct a lot, so it's not that punishing. Actually, this mechanism alone will only affect your saturation very little when you are below 3 points or so. The point of this code is mainly to force the saturation down to <2 after ~5 minutes of idling/walking, at which point unrallying will flatly set the saturation to 0, thereby forcing them to eat.", "author": "JiaYow", "createdAt": "2020-06-15T20:20:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNjU1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ1MTY3OA==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440451678", "bodyText": "kk nice :D was just making sure you considered it", "author": "someaddons", "createdAt": "2020-06-15T21:15:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNjU1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQwNDU4Ng==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r442404586", "bodyText": "I changed the penalty a little bit in e54bba8. It will now reduce the saturation even slower (after about 5 minutes you reach LOW_SATURATION (which is 3 currently), but the flat reduction on unrallying is also increased to LOW_SATURATION. So, they fight longer, but will more likely have to eat after rallying.", "author": "JiaYow", "createdAt": "2020-06-18T17:57:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNjU1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyOTY1OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440229659", "bodyText": "think we should check if a potion effect already exists before applying a new one", "author": "someaddons", "createdAt": "2020-06-15T14:46:16Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java", "diffHunk": "@@ -537,13 +600,30 @@ private IAIState helping()\n     }\n \n     /**\n-     * Decide what we should do next! Ticked once every 20 Ticks\n+     * Decide what we should do next! Ticked once every GUARD_TASK_INTERVAL Ticks\n      *\n      * @return the next IAIState.\n      */\n     protected IAIState decide()\n     {\n         reduceAttackDelay(GUARD_TASK_INTERVAL * getTickRate());\n+\n+        final ILocation rallyLocation = buildingGuards.getRallyLocation();\n+\n+        if (rallyLocation != null || buildingGuards.getTask() == GuardTask.FOLLOW)\n+        {\n+            worker.addPotionEffect(new EffectInstance(GLOW_EFFECT, GLOW_EFFECT_DURATION, GLOW_EFFECT_MULTIPLIER, false, false));", "originalCommit": "13e24fd190f661e74cf01022779a8ed18f17668c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyNjQ3MQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440426471", "bodyText": "The Follow-code didn't do that either, and as far as I understand, adding potion effects ontop of existing ones will simply extend the duration.\nSo, as far as I understand it, checking for the potion effect will only cost performance without doing anything meaningful.", "author": "JiaYow", "createdAt": "2020-06-15T20:25:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyOTY1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg3NjM0NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440876345", "bodyText": "actually the applying is more expensive than checking for existing, since applying involves events fired for other mods which listen to potion stuff. And some of those mods checks are rather laggy, thats why xD", "author": "someaddons", "createdAt": "2020-06-16T14:03:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyOTY1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0ODQ4Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r441848487", "bodyText": "I understand, but simply adding the if-clause would cause stutter-glowing. The decide() function is only called once every 5 seconds. If the effect runs out 1 second after the last check, the guard will stop glowing for 4 seconds, and then light up again. Is it worth adding logic to check the remaining time of the effect vs. the time until the next check?", "author": "JiaYow", "createdAt": "2020-06-17T21:37:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyOTY1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MTIyMQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r441851221", "bodyText": "once every 5 seconds should be finne.", "author": "Raycoms", "createdAt": "2020-06-17T21:43:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyOTY1OQ=="}], "type": "inlineReview"}, {"oid": "221e1ca73e2e9e949e949c138047df9bb85ddae8", "url": "https://github.com/ldtteam/minecolonies/commit/221e1ca73e2e9e949e949c138047df9bb85ddae8", "message": "Merge branch 'version/1.15' into feature/rallying-banner", "committedDate": "2020-06-16T19:21:11Z", "type": "commit"}, {"oid": "11239948122b624f3494ec0f60eb8519fa4edd7c", "url": "https://github.com/ldtteam/minecolonies/commit/11239948122b624f3494ec0f60eb8519fa4edd7c", "message": "Streamlined the team names and added the dimension to the name", "committedDate": "2020-06-17T21:21:05Z", "type": "commit"}, {"oid": "6a08fe33d144a6ba20a88e01ab004f84e48f2254", "url": "https://github.com/ldtteam/minecolonies/commit/6a08fe33d144a6ba20a88e01ab004f84e48f2254", "message": "Added RALLY_GUARDS to default permission of officers, bumped permission version", "committedDate": "2020-06-17T21:22:31Z", "type": "commit"}, {"oid": "d906d47855c915137c4971f12bf5e1000db4800b", "url": "https://github.com/ldtteam/minecolonies/commit/d906d47855c915137c4971f12bf5e1000db4800b", "message": "Merge branch 'feature/rallying-banner' of github.com:JiaYow/minecolonies into feature/rallying-banner", "committedDate": "2020-06-17T21:37:47Z", "type": "commit"}, {"oid": "e54bba836fe3d29f5d8d2ffd2e538cbdc16c440d", "url": "https://github.com/ldtteam/minecolonies/commit/e54bba836fe3d29f5d8d2ffd2e538cbdc16c440d", "message": "Prevent guards from eating during fights, renamed colony team, balanced rally saturation penalty", "committedDate": "2020-06-18T17:42:53Z", "type": "commit"}, {"oid": "2f75d3d92aaf87705740dc83bc40a722f85126c8", "url": "https://github.com/ldtteam/minecolonies/commit/2f75d3d92aaf87705740dc83bc40a722f85126c8", "message": "Merge branch 'version/1.15' into feature/rallying-banner", "committedDate": "2020-06-20T12:18:09Z", "type": "commit"}]}