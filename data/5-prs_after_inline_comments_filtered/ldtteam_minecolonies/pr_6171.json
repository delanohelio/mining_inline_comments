{"pr_number": 6171, "pr_title": "Small statemachine improvement", "pr_createdAt": "2020-11-29T15:58:29Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/6171", "timeline": [{"oid": "848a0971c2a68e860cc52b0e01a760de877f8bfb", "url": "https://github.com/ldtteam/minecolonies/commit/848a0971c2a68e860cc52b0e01a760de877f8bfb", "message": "Improve statemachine a bit, removing unnecessary lookups", "committedDate": "2020-11-29T15:52:20Z", "type": "commit"}, {"oid": "2d53f77a7196c681259cd9a978a96e27456196b2", "url": "https://github.com/ldtteam/minecolonies/commit/2d53f77a7196c681259cd9a978a96e27456196b2", "message": "jdoc", "committedDate": "2020-11-29T15:55:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI0MzEzNg==", "url": "https://github.com/ldtteam/minecolonies/pull/6171#discussion_r532243136", "bodyText": "Specific type instead of List<T>", "author": "OrionDevelopment", "createdAt": "2020-11-29T17:51:49Z", "path": "src/api/java/com/minecolonies/api/entity/ai/statemachine/basestatemachine/BasicStateMachine.java", "diffHunk": "@@ -27,6 +27,11 @@\n     @NotNull\n     protected final Map<IStateEventType, ArrayList<T>> eventTransitionMap;\n \n+    /**\n+     * The current states list of transitions\n+     */\n+    protected ArrayList<T> currentStateTransitions;\n+", "originalCommit": "2d53f77a7196c681259cd9a978a96e27456196b2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI0NjczMQ==", "url": "https://github.com/ldtteam/minecolonies/pull/6171#discussion_r532246731", "bodyText": "hm there is a bunch of places in there where we're expecting that type though", "author": "someaddons", "createdAt": "2020-11-29T18:21:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI0MzEzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI1MDAzMw==", "url": "https://github.com/ldtteam/minecolonies/pull/6171#discussion_r532250033", "bodyText": "ye I can't change it anyway nicely", "author": "someaddons", "createdAt": "2020-11-29T18:50:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI0MzEzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI1MDA3MA==", "url": "https://github.com/ldtteam/minecolonies/pull/6171#discussion_r532250070", "bodyText": "Then refactor it.\nYou should never ever have a field with a concrete type. Especially ArrayList since it's api surface is identical to the normal list in all places that matter.", "author": "OrionDevelopment", "createdAt": "2020-11-29T18:50:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI0MzEzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI1MDU3Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/6171#discussion_r532250572", "bodyText": "What do you mean you can't change it anyway nicely?!?!??", "author": "OrionDevelopment", "createdAt": "2020-11-29T18:55:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI0MzEzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI1MDYxNg==", "url": "https://github.com/ldtteam/minecolonies/pull/6171#discussion_r532250616", "bodyText": "oh I think I just misunderstood, sure I'll change it to the list basetype :D", "author": "someaddons", "createdAt": "2020-11-29T18:55:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI0MzEzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI0MzI2Ng==", "url": "https://github.com/ldtteam/minecolonies/pull/6171#discussion_r532243266", "bodyText": "Again specific type.", "author": "OrionDevelopment", "createdAt": "2020-11-29T17:52:36Z", "path": "src/api/java/com/minecolonies/api/entity/ai/statemachine/tickratestatemachine/TickRateStateMachine.java", "diffHunk": "@@ -31,6 +31,13 @@\n      */\n     private int tickRateCounter = 0;\n \n+    /**\n+     * Reference to our used global transition lists\n+     */\n+    private final ArrayList<ITickingTransition<S>> aiBlockingTransitions;", "originalCommit": "2d53f77a7196c681259cd9a978a96e27456196b2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d159e80eb780005d28b8e51c62273aead1078484", "url": "https://github.com/ldtteam/minecolonies/commit/d159e80eb780005d28b8e51c62273aead1078484", "message": "switch arraylist types out", "committedDate": "2020-11-29T18:57:53Z", "type": "commit"}]}