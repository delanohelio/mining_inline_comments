{"pr_number": 5699, "pr_title": "Add Min/max level of building to custom recipes", "pr_createdAt": "2020-09-02T14:36:42Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5699", "timeline": [{"oid": "692e3bfaa1bab97a4abb4fa2fd8cb557420dae07", "url": "https://github.com/ldtteam/minecolonies/commit/692e3bfaa1bab97a4abb4fa2fd8cb557420dae07", "message": "add building min and max level to custom recipes", "committedDate": "2020-09-02T14:27:58Z", "type": "commit"}, {"oid": "4560afe0d18baebe1a1d6b86f1d02eab9c76d615", "url": "https://github.com/ldtteam/minecolonies/commit/4560afe0d18baebe1a1d6b86f1d02eab9c76d615", "message": "Fix recipe removal in custom recipes", "committedDate": "2020-09-02T14:28:31Z", "type": "commit"}, {"oid": "dc2b3c6ccef9dc9d785d169edbf57807892585b0", "url": "https://github.com/ldtteam/minecolonies/commit/dc2b3c6ccef9dc9d785d169edbf57807892585b0", "message": "Make citizen XP pickup try 5 times and force", "committedDate": "2020-09-02T14:33:44Z", "type": "commit"}, {"oid": "334b249ffab6dcf56f45bc445afc5fab7a03dcfe", "url": "https://github.com/ldtteam/minecolonies/commit/334b249ffab6dcf56f45bc445afc5fab7a03dcfe", "message": "Fix bad default recruitment item", "committedDate": "2020-09-02T14:54:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEzNDc2Ng==", "url": "https://github.com/ldtteam/minecolonies/pull/5699#discussion_r482134766", "bodyText": "isnt that the same as recipeMap.get(toRemove)?", "author": "someaddons", "createdAt": "2020-09-02T14:55:43Z", "path": "src/main/java/com/minecolonies/coremod/colony/crafting/CustomRecipeManager.java", "diffHunk": "@@ -85,6 +89,19 @@ public void removeRecipe(@NotNull final JsonObject recipeJson, @NotNull final Re\n      */\n     public Set<CustomRecipe> getRecipes(@NotNull final String crafter)\n     {\n+        if(!removedRecipes.isEmpty())\n+        {\n+            for(ResourceLocation toRemove: removedRecipes)\n+            {\n+                final Optional<HashMap<ResourceLocation, CustomRecipe>> crafterMap = recipeMap.entrySet().stream().map(r -> r.getValue()).filter(r1 -> r1.keySet().contains(toRemove)).findFirst();", "originalCommit": "dc2b3c6ccef9dc9d785d169edbf57807892585b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0ODc5Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/5699#discussion_r482148793", "bodyText": "No, recipeMap is a <String, Map<ResourceLocation, CustomRecipe>> where the string is the crafter name, since that is primary access route. During removal, I don't know which crafter it's coming from, so we're retrieving the correct submap.", "author": "Mekle001", "createdAt": "2020-09-02T15:10:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEzNDc2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE1NDg4MA==", "url": "https://github.com/ldtteam/minecolonies/pull/5699#discussion_r482154880", "bodyText": "ah true, had assumed its a resloc map", "author": "someaddons", "createdAt": "2020-09-02T15:17:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEzNDc2Ng=="}], "type": "inlineReview"}]}