{"pr_number": 4763, "pr_title": "Setup sound datagen", "pr_createdAt": "2020-04-25T22:37:16Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/4763", "timeline": [{"oid": "eeac19ead2d08ac5c04294dbd6245ce13c5b97db", "url": "https://github.com/ldtteam/minecolonies/commit/eeac19ead2d08ac5c04294dbd6245ce13c5b97db", "message": "Setup sound datagen", "committedDate": "2020-04-25T22:34:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTE1OTk2MA==", "url": "https://github.com/ldtteam/minecolonies/pull/4763#discussion_r415159960", "bodyText": "var name^^", "author": "someaddons", "createdAt": "2020-04-25T22:42:41Z", "path": "src/main/java/com/minecolonies/coremod/generation/defaults/DefaultSoundProvider.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.minecolonies.coremod.generation.defaults;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.ldtteam.datagenerators.sounds.SoundsJson;\n+import com.minecolonies.api.colony.jobs.registry.IJobRegistry;\n+import com.minecolonies.api.colony.jobs.registry.JobEntry;\n+import com.minecolonies.api.sounds.EventType;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.generation.DataGeneratorConstants;\n+import net.minecraft.data.DataGenerator;\n+import net.minecraft.data.DirectoryCache;\n+import net.minecraft.data.IDataProvider;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.*;\n+\n+public class DefaultSoundProvider implements IDataProvider\n+{\n+\n+    private final DataGenerator generator;\n+\n+    public DefaultSoundProvider(final DataGenerator generator)\n+    {\n+        this.generator = generator;\n+    }\n+\n+    @Override\n+    public void act(@NotNull final DirectoryCache cache) throws IOException\n+    {\n+        final Map<String[], List<String>> map = new LinkedHashMap<>();\n+\n+        final List<String> defaultSounds = new ArrayList<>();\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say1\");\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say2\");\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say3\");\n+\n+        final List<String> childSounds = new ArrayList<>();\n+        childSounds.add(\"minecolonies:mob/citizen/child/laugh1\");\n+        childSounds.add(\"minecolonies:mob/citizen/child/laugh2\");\n+\n+        for (final JobEntry job : IJobRegistry.getInstance().getValues())\n+        {\n+            if (job.getRegistryName().getNamespace().equals(Constants.MOD_ID) && !job.getRegistryName().getPath().equals(\"placeholder\"))\n+            {\n+                for (final EventType soundEvents : EventType.values())\n+                {\n+                    map.put(new String[]{\"mob.\" + job.getRegistryName().getPath() + \".male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+                    map.put(new String[]{\"mob.\" + job.getRegistryName().getPath() + \".female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+                }\n+            }\n+        }\n+\n+        for (final EventType soundEvents : EventType.values())\n+        {\n+            map.put(new String[]{\"mob.citizen.male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+            map.put(new String[]{\"mob.citizen.female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+        }\n+\n+        for (final EventType soundEvents : EventType.values())\n+        {\n+            map.put(new String[]{\"mob.child.male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+            map.put(new String[]{\"mob.child.female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+        }\n+\n+        map.put(new String[]{\"mob.barbarian.death\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/death\"));\n+        map.put(new String[]{\"mob.barbarian.say\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/say\"));\n+        map.put(new String[]{\"mob.barbarian.hurt\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/hurt1, minecolonies:mob/barbarian/hurt2, minecolonies:mob/barbarian/hurt3, minecolonies:mob/barbarian/hurt4\"));\n+\n+        map.put(new String[]{\"mob.citizen.snore\", \"neutral\"}, ImmutableList.of(\"minecolonies:mob/citizen/snore\"));\n+\n+        final SoundsJson lootTableJson = new SoundsJson(map);", "originalCommit": "eeac19ead2d08ac5c04294dbd6245ce13c5b97db", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTE2MDA0Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/4763#discussion_r415160043", "bodyText": "here too", "author": "someaddons", "createdAt": "2020-04-25T22:43:08Z", "path": "src/main/java/com/minecolonies/coremod/generation/defaults/DefaultSoundProvider.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.minecolonies.coremod.generation.defaults;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.ldtteam.datagenerators.sounds.SoundsJson;\n+import com.minecolonies.api.colony.jobs.registry.IJobRegistry;\n+import com.minecolonies.api.colony.jobs.registry.JobEntry;\n+import com.minecolonies.api.sounds.EventType;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.generation.DataGeneratorConstants;\n+import net.minecraft.data.DataGenerator;\n+import net.minecraft.data.DirectoryCache;\n+import net.minecraft.data.IDataProvider;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.*;\n+\n+public class DefaultSoundProvider implements IDataProvider\n+{\n+\n+    private final DataGenerator generator;\n+\n+    public DefaultSoundProvider(final DataGenerator generator)\n+    {\n+        this.generator = generator;\n+    }\n+\n+    @Override\n+    public void act(@NotNull final DirectoryCache cache) throws IOException\n+    {\n+        final Map<String[], List<String>> map = new LinkedHashMap<>();\n+\n+        final List<String> defaultSounds = new ArrayList<>();\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say1\");\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say2\");\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say3\");\n+\n+        final List<String> childSounds = new ArrayList<>();\n+        childSounds.add(\"minecolonies:mob/citizen/child/laugh1\");\n+        childSounds.add(\"minecolonies:mob/citizen/child/laugh2\");\n+\n+        for (final JobEntry job : IJobRegistry.getInstance().getValues())\n+        {\n+            if (job.getRegistryName().getNamespace().equals(Constants.MOD_ID) && !job.getRegistryName().getPath().equals(\"placeholder\"))\n+            {\n+                for (final EventType soundEvents : EventType.values())\n+                {\n+                    map.put(new String[]{\"mob.\" + job.getRegistryName().getPath() + \".male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+                    map.put(new String[]{\"mob.\" + job.getRegistryName().getPath() + \".female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+                }\n+            }\n+        }\n+\n+        for (final EventType soundEvents : EventType.values())\n+        {\n+            map.put(new String[]{\"mob.citizen.male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+            map.put(new String[]{\"mob.citizen.female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+        }\n+\n+        for (final EventType soundEvents : EventType.values())\n+        {\n+            map.put(new String[]{\"mob.child.male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+            map.put(new String[]{\"mob.child.female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+        }\n+\n+        map.put(new String[]{\"mob.barbarian.death\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/death\"));\n+        map.put(new String[]{\"mob.barbarian.say\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/say\"));\n+        map.put(new String[]{\"mob.barbarian.hurt\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/hurt1, minecolonies:mob/barbarian/hurt2, minecolonies:mob/barbarian/hurt3, minecolonies:mob/barbarian/hurt4\"));\n+\n+        map.put(new String[]{\"mob.citizen.snore\", \"neutral\"}, ImmutableList.of(\"minecolonies:mob/citizen/snore\"));\n+\n+        final SoundsJson lootTableJson = new SoundsJson(map);\n+        final Path savePath = generator.getOutputFolder().resolve(DataGeneratorConstants.ASSETS_DIR).resolve(\"sounds.json\");\n+        IDataProvider.save(DataGeneratorConstants.GSON, cache, lootTableJson.serialize(), savePath);\n+    }\n+\n+    @NotNull\n+    @Override\n+    public String getName()\n+    {\n+        return \"Default Block Loot Table Provider\";", "originalCommit": "eeac19ead2d08ac5c04294dbd6245ce13c5b97db", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dbf5323cba9f8eff8e8c0656820be70eaac35ada", "url": "https://github.com/ldtteam/minecolonies/commit/dbf5323cba9f8eff8e8c0656820be70eaac35ada", "message": "fix sound file", "committedDate": "2020-04-25T22:46:01Z", "type": "commit"}, {"oid": "87e692024b69c31b3ac7fa079dddd16079d3b8ec", "url": "https://github.com/ldtteam/minecolonies/commit/87e692024b69c31b3ac7fa079dddd16079d3b8ec", "message": "fix var names", "committedDate": "2020-04-25T22:47:35Z", "type": "commit"}, {"oid": "eb08107456993f80337527a5587ba4889fc6d936", "url": "https://github.com/ldtteam/minecolonies/commit/eb08107456993f80337527a5587ba4889fc6d936", "message": "add those two too", "committedDate": "2020-04-25T22:48:28Z", "type": "commit"}, {"oid": "fe1f4670c91a7d51e7a05182ffe2b037b3c3dc1f", "url": "https://github.com/ldtteam/minecolonies/commit/fe1f4670c91a7d51e7a05182ffe2b037b3c3dc1f", "message": "add patreon name", "committedDate": "2020-04-26T08:41:49Z", "type": "commit"}, {"oid": "a65d248b214227eec11b793137aee82e9306ed1f", "url": "https://github.com/ldtteam/minecolonies/commit/a65d248b214227eec11b793137aee82e9306ed1f", "message": "fix loottable provider", "committedDate": "2020-04-26T08:47:23Z", "type": "commit"}]}