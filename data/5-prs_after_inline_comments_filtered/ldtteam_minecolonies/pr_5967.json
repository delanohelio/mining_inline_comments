{"pr_number": 5967, "pr_title": "Added a recipe status as per ldtteam/minecolonies-features#152", "pr_createdAt": "2020-10-21T15:45:38Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5967", "timeline": [{"oid": "67846ae5ba934b46c805203faa80c8ac1df01e02", "url": "https://github.com/ldtteam/minecolonies/commit/67846ae5ba934b46c805203faa80c8ac1df01e02", "message": "Added a recipe status as per ldtteam/minecolonies-features#152", "committedDate": "2020-10-13T21:14:54Z", "type": "commit"}, {"oid": "91753b83a64c2a341190eb94b02a4e11204453af", "url": "https://github.com/ldtteam/minecolonies/commit/91753b83a64c2a341190eb94b02a4e11204453af", "message": "Added a recipe status as per ldtteam/minecolonies-features#152", "committedDate": "2020-10-21T15:29:05Z", "type": "commit"}, {"oid": "f583c731a963cf1320a68a6fbffe582728f04445", "url": "https://github.com/ldtteam/minecolonies/commit/f583c731a963cf1320a68a6fbffe582728f04445", "message": "Removed old recipe cap code", "committedDate": "2020-10-21T15:31:41Z", "type": "commit"}, {"oid": "0484dc4a8e4288d091bb8b6efe68ad0181c415ec", "url": "https://github.com/ldtteam/minecolonies/commit/0484dc4a8e4288d091bb8b6efe68ad0181c415ec", "message": "Merged Changes", "committedDate": "2020-10-21T15:33:15Z", "type": "commit"}, {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc", "url": "https://github.com/ldtteam/minecolonies/commit/cb1e483e758f7735166a5ed46a91f9e7685e89fc", "message": "Removed re-added old static method", "committedDate": "2020-10-21T15:40:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQwMDU5Ng==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509400596", "bodyText": "There are at least 3 instances in the codebase of this. Can you please remove the other 2?", "author": "Mekle001", "createdAt": "2020-10-21T15:47:17Z", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingCrafter.java", "diffHunk": "@@ -211,27 +206,6 @@ public View(final IColonyView c, final BlockPos l)\n             super(c, l);\n         }\n \n-        /**\n-         * Check if an additional recipe can be added.\n-         *\n-         * @return true if so.\n-         */\n-        public boolean canRecipeBeAdded()\n-        {\n-            return AbstractBuildingCrafter.canBuildingCanLearnMoreRecipes(getBuildingLevel(), super.getRecipes().size());\n-        }\n-    }\n-\n-    /**\n-     * Check if an additional recipe can be added.\n-     *\n-     * @param learnedRecipes the learned recipes.\n-     * @param buildingLevel  the building level.\n-     * @return true if so.\n-     */\n-    public static boolean canBuildingCanLearnMoreRecipes(final int buildingLevel, final int learnedRecipes)", "originalCommit": "cb1e483e758f7735166a5ed46a91f9e7685e89fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMjkzOQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509412939", "bodyText": "the formatting is off here slightly.", "author": "Raycoms", "createdAt": "2020-10-21T16:03:55Z", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -445,13 +445,21 @@ public boolean isRecipeAlterationAllowed()\n      */\n     private boolean hasSpaceForMoreRecipes()\n     {\n+\n+        return maxRecipes() > getRecipes().size() + 1;\n+    }\n+\n+    /**\n+     * Gets the maximum number of recipes a building may have at the current time.\n+     */\n+    private int maxRecipes() {", "originalCommit": "cb1e483e758f7735166a5ed46a91f9e7685e89fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxODIyNA==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509418224", "bodyText": "I see two things on formatting here:\n\nthe curly brace needs to be on the next line\nmaxRecipes should be getMaxRecipes", "author": "Mekle001", "createdAt": "2020-10-21T16:11:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMjkzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ0Nzg1OA==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509447858", "bodyText": "Changed the formatting, and the function name", "author": "KatrinaAS", "createdAt": "2020-10-21T16:55:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMjkzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzIzOA==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509413238", "bodyText": "Much better to synch the whole number instead of just \"is there more space\"", "author": "Raycoms", "createdAt": "2020-10-21T16:04:19Z", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -729,9 +737,9 @@ public void serializeToView(@NotNull final PacketBuffer buf)\n         buf.writeInt(getPrimarySkill().ordinal());\n         buf.writeInt(getSecondarySkill().ordinal());\n         buf.writeInt(getMaxInhabitants());\n-        buf.writeBoolean(hasSpaceForMoreRecipes());\n         buf.writeBoolean(isRecipeAlterationAllowed());\n         buf.writeString(jobDisplayName);\n+        buf.writeInt(maxRecipes());\n     }", "originalCommit": "cb1e483e758f7735166a5ed46a91f9e7685e89fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ0ODYxNA==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509448614", "bodyText": "I must admit I was worried when I changed this at first, removing something from a buffer always seems a fragile point to me", "author": "KatrinaAS", "createdAt": "2020-10-21T16:56:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzIzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzM1Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509413357", "bodyText": "Also formatting", "author": "Raycoms", "createdAt": "2020-10-21T16:04:29Z", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -1114,7 +1122,11 @@ public boolean canCraftComplexRecipes()\n         @Override\n         public boolean canRecipeBeAdded()\n         {\n-            return canAddMoreRecipes;\n+            return getMaxRecipes() > getRecipes().size() + 1;\n+        }\n+\n+        public int getMaxRecipes() {", "originalCommit": "cb1e483e758f7735166a5ed46a91f9e7685e89fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ0ODczNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509448735", "bodyText": "Changed formatting", "author": "KatrinaAS", "createdAt": "2020-10-21T16:56:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzM1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ1MDI2OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509450269", "bodyText": "getMaxRecipes still has the curly brace in the wrong place", "author": "Mekle001", "createdAt": "2020-10-21T16:58:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzM1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ1MjUzNA==", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509452534", "bodyText": "Oh, there it is.", "author": "Mekle001", "createdAt": "2020-10-21T17:01:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzM1Nw=="}], "type": "inlineReview"}, {"oid": "bdd15b115cd3dd51e294a2b605653a099d4b33c0", "url": "https://github.com/ldtteam/minecolonies/commit/bdd15b115cd3dd51e294a2b605653a099d4b33c0", "message": "Some formatting fixes, plus removing more old static code", "committedDate": "2020-10-21T16:53:57Z", "type": "commit"}]}