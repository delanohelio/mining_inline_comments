{"pr_number": 4950, "pr_title": "Feature/plantation", "pr_createdAt": "2020-05-09T19:55:54Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/4950", "timeline": [{"oid": "7abda97505613524c1783e401763d679964ab370", "url": "https://github.com/ldtteam/minecolonies/commit/7abda97505613524c1783e401763d679964ab370", "message": "Basic planter setup", "committedDate": "2020-05-09T10:32:14Z", "type": "commit"}, {"oid": "fcf40ee160f879f8f7d0cbb201e6ce081feec746", "url": "https://github.com/ldtteam/minecolonies/commit/fcf40ee160f879f8f7d0cbb201e6ce081feec746", "message": "add schematic", "committedDate": "2020-05-09T10:45:51Z", "type": "commit"}, {"oid": "13b9a33882cf1db8de4bca0ed0bf3bef21b7d8da", "url": "https://github.com/ldtteam/minecolonies/commit/13b9a33882cf1db8de4bca0ed0bf3bef21b7d8da", "message": "Add a fix and finish planter model", "committedDate": "2020-05-09T10:57:53Z", "type": "commit"}, {"oid": "462aae4980c3ab5bea9f78f5f1ef4bd3759a141a", "url": "https://github.com/ldtteam/minecolonies/commit/462aae4980c3ab5bea9f78f5f1ef4bd3759a141a", "message": "loot table and sound gen", "committedDate": "2020-05-09T11:04:29Z", "type": "commit"}, {"oid": "15a2a4bebda4b9b83ea5d0177e4b4b75a58bc409", "url": "https://github.com/ldtteam/minecolonies/commit/15a2a4bebda4b9b83ea5d0177e4b4b75a58bc409", "message": "AI setup", "committedDate": "2020-05-09T17:39:48Z", "type": "commit"}, {"oid": "ba63c31eaf4f3de81cd02ef0e6054f66adbc53fc", "url": "https://github.com/ldtteam/minecolonies/commit/ba63c31eaf4f3de81cd02ef0e6054f66adbc53fc", "message": "Stop setting delay in walking\n\nAI should handle that", "committedDate": "2020-05-09T18:48:29Z", "type": "commit"}, {"oid": "897f8e1ccffd7adf4d2f087358c61db3fc4437e0", "url": "https://github.com/ldtteam/minecolonies/commit/897f8e1ccffd7adf4d2f087358c61db3fc4437e0", "message": "Fix tool and overrule detection", "committedDate": "2020-05-09T18:48:38Z", "type": "commit"}, {"oid": "fea2f1725d52a13c794083ac2b4eb54c21126a89", "url": "https://github.com/ldtteam/minecolonies/commit/fea2f1725d52a13c794083ac2b4eb54c21126a89", "message": "don't walk on bamboo", "committedDate": "2020-05-09T18:49:44Z", "type": "commit"}, {"oid": "fa6f8f1ad2ffbac7d924a124794972cc5561400d", "url": "https://github.com/ldtteam/minecolonies/commit/fa6f8f1ad2ffbac7d924a124794972cc5561400d", "message": "keep axe", "committedDate": "2020-05-09T19:59:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTMwNA==", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549304", "bodyText": "nice find :)", "author": "someaddons", "createdAt": "2020-05-09T21:38:29Z", "path": "src/api/java/com/minecolonies/api/colony/requestsystem/requestable/Tool.java", "diffHunk": "@@ -142,7 +142,7 @@ public boolean matches(@NotNull final ItemStack stack)\n                 && getToolClasses(stack).stream()\n                 .filter(s -> getToolClass().getName().equalsIgnoreCase(s))\n                 .map(ToolType::getToolType)\n-                .anyMatch(t -> t != ToolType.NONE && !(stack.isDamaged() || stack.getDamage() > 0) && ItemStackUtils.hasToolLevel(stack, t, getMinLevel(), getMaxLevel()));\n+                .anyMatch(t -> t != ToolType.NONE && (stack.getDamage() > 0 || !stack.isDamaged()) && ItemStackUtils.hasToolLevel(stack, t, getMinLevel(), getMaxLevel()));", "originalCommit": "fa6f8f1ad2ffbac7d924a124794972cc5561400d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTM4Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549387", "bodyText": "old javadoc", "author": "someaddons", "createdAt": "2020-05-09T21:39:23Z", "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "diffHunk": "@@ -0,0 +1,81 @@\n+package com.minecolonies.coremod.client.gui;\n+\n+import com.ldtteam.blockout.controls.Button;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingMiner;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingPlantation;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.List;\n+\n+/**\n+ * Window for the crusher hut.", "originalCommit": "fa6f8f1ad2ffbac7d924a124794972cc5561400d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTQxMQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549411", "bodyText": "still not the crusher :)", "author": "someaddons", "createdAt": "2020-05-09T21:39:38Z", "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "diffHunk": "@@ -0,0 +1,81 @@\n+package com.minecolonies.coremod.client.gui;\n+\n+import com.ldtteam.blockout.controls.Button;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingMiner;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingPlantation;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.List;\n+\n+/**\n+ * Window for the crusher hut.\n+ */\n+public class WindowHutPlantation extends AbstractWindowWorkerBuilding<BuildingPlantation.View>\n+{\n+    /**\n+     * The mode button id.\n+     */\n+    private static final String BLOCK_BUTTON = \"block\";\n+\n+    /**\n+     * The id of the gui.\n+     */\n+    private static final String CRUSHER_RESOURCE_SUFFIX = \":gui/windowhutplantation.xml\";", "originalCommit": "fa6f8f1ad2ffbac7d924a124794972cc5561400d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTQzOA==", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549438", "bodyText": "button isnt a crusher either", "author": "someaddons", "createdAt": "2020-05-09T21:40:02Z", "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "diffHunk": "@@ -0,0 +1,81 @@\n+package com.minecolonies.coremod.client.gui;\n+\n+import com.ldtteam.blockout.controls.Button;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingMiner;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingPlantation;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.List;\n+\n+/**\n+ * Window for the crusher hut.\n+ */\n+public class WindowHutPlantation extends AbstractWindowWorkerBuilding<BuildingPlantation.View>\n+{\n+    /**\n+     * The mode button id.\n+     */\n+    private static final String BLOCK_BUTTON = \"block\";\n+\n+    /**\n+     * The id of the gui.\n+     */\n+    private static final String CRUSHER_RESOURCE_SUFFIX = \":gui/windowhutplantation.xml\";\n+\n+    /**\n+     * Constructor for the window of the miner hut.\n+     *\n+     * @param building {@link BuildingMiner.View}.\n+     */\n+    public WindowHutPlantation(final BuildingPlantation.View building)\n+    {\n+        super(building, Constants.MOD_ID + CRUSHER_RESOURCE_SUFFIX);\n+        final Button crushingSettingsButton = findPaneOfTypeByID(BLOCK_BUTTON, Button.class);", "originalCommit": "fa6f8f1ad2ffbac7d924a124794972cc5561400d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTQ2Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549462", "bodyText": "plantingmodes?^^", "author": "someaddons", "createdAt": "2020-05-09T21:40:24Z", "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "diffHunk": "@@ -0,0 +1,81 @@\n+package com.minecolonies.coremod.client.gui;\n+\n+import com.ldtteam.blockout.controls.Button;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingMiner;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingPlantation;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.List;\n+\n+/**\n+ * Window for the crusher hut.\n+ */\n+public class WindowHutPlantation extends AbstractWindowWorkerBuilding<BuildingPlantation.View>\n+{\n+    /**\n+     * The mode button id.\n+     */\n+    private static final String BLOCK_BUTTON = \"block\";\n+\n+    /**\n+     * The id of the gui.\n+     */\n+    private static final String CRUSHER_RESOURCE_SUFFIX = \":gui/windowhutplantation.xml\";\n+\n+    /**\n+     * Constructor for the window of the miner hut.\n+     *\n+     * @param building {@link BuildingMiner.View}.\n+     */\n+    public WindowHutPlantation(final BuildingPlantation.View building)\n+    {\n+        super(building, Constants.MOD_ID + CRUSHER_RESOURCE_SUFFIX);\n+        final Button crushingSettingsButton = findPaneOfTypeByID(BLOCK_BUTTON, Button.class);\n+\n+        registerButton(BLOCK_BUTTON, this::switchCrushingMode);\n+        setupSettings(crushingSettingsButton);\n+    }\n+\n+    /**\n+     * Switch the mode after clicking the button.\n+     *\n+     * @param crushingSettingsButton the clicked button.\n+     */\n+    private void switchCrushingMode(final Button crushingSettingsButton)", "originalCommit": "fa6f8f1ad2ffbac7d924a124794972cc5561400d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTY2Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549662", "bodyText": "little description of what he's doing here would be nice", "author": "someaddons", "createdAt": "2020-05-09T21:42:20Z", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingPlantation.java", "diffHunk": "@@ -0,0 +1,336 @@\n+package com.minecolonies.coremod.colony.buildings.workerbuildings;\n+\n+import com.ldtteam.blockout.views.Window;\n+import com.minecolonies.api.colony.ICitizenData;\n+import com.minecolonies.api.colony.IColony;\n+import com.minecolonies.api.colony.IColonyManager;\n+import com.minecolonies.api.colony.IColonyView;\n+import com.minecolonies.api.colony.buildings.ModBuildings;\n+import com.minecolonies.api.colony.buildings.registry.BuildingEntry;\n+import com.minecolonies.api.colony.jobs.IJob;\n+import com.minecolonies.api.colony.requestsystem.token.IToken;\n+import com.minecolonies.api.crafting.IRecipeStorage;\n+import com.minecolonies.api.entity.citizen.Skill;\n+import com.minecolonies.api.util.ItemStackUtils;\n+import com.minecolonies.api.util.constant.ToolType;\n+import com.minecolonies.coremod.Network;\n+import com.minecolonies.coremod.client.gui.WindowHutPlantation;\n+import com.minecolonies.coremod.colony.buildings.AbstractBuildingCrafter;\n+import com.minecolonies.coremod.colony.jobs.JobPlanter;\n+import com.minecolonies.coremod.network.messages.server.colony.building.plantation.PlantationSetPhaseMessage;\n+import com.minecolonies.coremod.research.UnlockBuildingResearchEffect;\n+import net.minecraft.block.Block;\n+import net.minecraft.block.Blocks;\n+import net.minecraft.entity.player.PlayerEntity;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import net.minecraft.item.Items;\n+import net.minecraft.nbt.CompoundNBT;\n+import net.minecraft.nbt.ListNBT;\n+import net.minecraft.nbt.NBTUtil;\n+import net.minecraft.network.PacketBuffer;\n+import net.minecraft.util.Tuple;\n+import net.minecraft.util.math.BlockPos;\n+import net.minecraft.util.text.TranslationTextComponent;\n+import net.minecraft.world.World;\n+import net.minecraftforge.common.util.Constants;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static com.minecolonies.api.util.constant.BuildingConstants.CONST_DEFAULT_MAX_BUILDING_LEVEL;\n+import static com.minecolonies.api.util.constant.NbtTagConstants.*;\n+import static com.minecolonies.api.util.constant.ToolLevelConstants.TOOL_LEVEL_WOOD_OR_GOLD;\n+\n+/**\n+ * Class of the plantation building.", "originalCommit": "fa6f8f1ad2ffbac7d924a124794972cc5561400d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "aa16041d2734ddce74d8907331be78da957964f6", "url": "https://github.com/ldtteam/minecolonies/commit/aa16041d2734ddce74d8907331be78da957964f6", "message": "Not a crusher", "committedDate": "2020-05-10T08:05:23Z", "type": "commit"}, {"oid": "0ea18a0ab7845d81561c937a1ac376182368ebf7", "url": "https://github.com/ldtteam/minecolonies/commit/0ea18a0ab7845d81561c937a1ac376182368ebf7", "message": "also catch this crash with a logged exc", "committedDate": "2020-05-10T08:45:59Z", "type": "commit"}, {"oid": "53a991ab9e5585de430353b2b930f8d357c41c09", "url": "https://github.com/ldtteam/minecolonies/commit/53a991ab9e5585de430353b2b930f8d357c41c09", "message": "fix #4955", "committedDate": "2020-05-10T12:18:46Z", "type": "commit"}, {"oid": "19b61ad49ad9c36a86e204fa81333c69f918b5d8", "url": "https://github.com/ldtteam/minecolonies/commit/19b61ad49ad9c36a86e204fa81333c69f918b5d8", "message": "Cleanup API mess and correctly calculate ponds", "committedDate": "2020-05-10T13:57:50Z", "type": "commit"}, {"oid": "986d228f432233e48e70a944de26d30efd784786", "url": "https://github.com/ldtteam/minecolonies/commit/986d228f432233e48e70a944de26d30efd784786", "message": "fix #4864", "committedDate": "2020-05-10T15:31:10Z", "type": "commit"}, {"oid": "fcd9f1fd766db57ab176f0ab6bbbaaa5a319245f", "url": "https://github.com/ldtteam/minecolonies/commit/fcd9f1fd766db57ab176f0ab6bbbaaa5a319245f", "message": "Merge remote-tracking branch 'origin/version/1.15' into feature/plantation", "committedDate": "2020-05-10T15:32:41Z", "type": "commit"}, {"oid": "4e59f2c03dc5a75dcf1402bf8395ef29e7e7560b", "url": "https://github.com/ldtteam/minecolonies/commit/4e59f2c03dc5a75dcf1402bf8395ef29e7e7560b", "message": "fix recipes", "committedDate": "2020-05-10T15:33:06Z", "type": "commit"}, {"oid": "0cf81abcd6d4614e39426c39dc87c63efa5c53c1", "url": "https://github.com/ldtteam/minecolonies/commit/0cf81abcd6d4614e39426c39dc87c63efa5c53c1", "message": "fix #4966", "committedDate": "2020-05-11T10:39:22Z", "type": "commit"}, {"oid": "69b0354c39a56d6e839da1e8b52bf815d4b3570b", "url": "https://github.com/ldtteam/minecolonies/commit/69b0354c39a56d6e839da1e8b52bf815d4b3570b", "message": "Merge remote-tracking branch 'origin/version/1.15' into feature/plantation", "committedDate": "2020-05-12T21:43:50Z", "type": "commit"}, {"oid": "595d831816360379be3d1b2259cdc7b1df0c56e6", "url": "https://github.com/ldtteam/minecolonies/commit/595d831816360379be3d1b2259cdc7b1df0c56e6", "message": "fix generic", "committedDate": "2020-05-12T21:45:26Z", "type": "commit"}, {"oid": "8de8d26186b58232ca6f4f438d0f6a4cd176a5ef", "url": "https://github.com/ldtteam/minecolonies/commit/8de8d26186b58232ca6f4f438d0f6a4cd176a5ef", "message": "soem more cleanup and fix actions done", "committedDate": "2020-05-12T21:47:49Z", "type": "commit"}, {"oid": "76979f6a145d2c83023ccba27484e9c90df2bf6e", "url": "https://github.com/ldtteam/minecolonies/commit/76979f6a145d2c83023ccba27484e9c90df2bf6e", "message": "bump forge, fix block", "committedDate": "2020-05-13T17:32:06Z", "type": "commit"}, {"oid": "ca27ceff486f15007b414fa76b942f6054b17826", "url": "https://github.com/ldtteam/minecolonies/commit/ca27ceff486f15007b414fa76b942f6054b17826", "message": "also hotfix on 1.15", "committedDate": "2020-05-14T08:38:44Z", "type": "commit"}, {"oid": "3710e7f56492c15f487161c753f19a2b2bb00d4a", "url": "https://github.com/ldtteam/minecolonies/commit/3710e7f56492c15f487161c753f19a2b2bb00d4a", "message": "Merge branch 'version/1.15' into feature/plantation", "committedDate": "2020-05-14T17:42:14Z", "type": "commit"}, {"oid": "cfef08004d3e37cfa6953777ff05743dbd9fa75a", "url": "https://github.com/ldtteam/minecolonies/commit/cfef08004d3e37cfa6953777ff05743dbd9fa75a", "message": "fix issues", "committedDate": "2020-05-14T17:44:39Z", "type": "commit"}]}