{"pr_number": 6386, "pr_title": "Fix jstyle was invalid with default section at the start", "pr_createdAt": "2020-05-01T16:30:26Z", "pr_url": "https://github.com/JabRef/jabref/pull/6386", "timeline": [{"oid": "ede97db9827b58537583a8871e201ef0dcc16916", "url": "https://github.com/JabRef/jabref/commit/ede97db9827b58537583a8871e201ef0dcc16916", "message": "Fix jstyle was invalid with default section at the start\n\nFixes #6303\nAdapted the error message to give a hint what is probably missing.\n\nI also noticed a problem in eclipse when executing the L10n test. It was missing an add-opens", "committedDate": "2020-05-01T16:30:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYzNzAxOQ==", "url": "https://github.com/JabRef/jabref/pull/6386#discussion_r418637019", "bodyText": "Is it possible to get more information (than a boolean) about why a style file is not valid? I guess the missing default may only be one of many reasons and so far the error message is not really helpful in diagnosing the problem.", "author": "tobiasdiez", "createdAt": "2020-05-01T17:08:39Z", "path": "src/main/java/org/jabref/gui/openoffice/StyleSelectDialogViewModel.java", "diffHunk": "@@ -71,7 +71,7 @@ public void addStyleFile() {\n                 styles.setAll(loadStyles());\n                 selectedItem.setValue(getStyleOrDefault(stylePath));\n             } else {\n-                dialogService.showErrorDialogAndWait(Localization.lang(\"Invalid style selected\"), Localization.lang(\"You must select a valid style file.\"));\n+                dialogService.showErrorDialogAndWait(Localization.lang(\"Invalid style selected\"), Localization.lang(\"You must select a valid style file. Your style is probably missing a line for the type \\\"default\\\".\"));", "originalCommit": "ede97db9827b58537583a8871e201ef0dcc16916", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1MjEwNw==", "url": "https://github.com/JabRef/jabref/pull/6386#discussion_r418652107", "bodyText": "This is more or less the only reason. The other is that if you have no sections defined.\nOther things (Layout parsing etc) are already handled with exceptions\n\n  \n    \n      jabref/src/main/java/org/jabref/logic/openoffice/OOBibStyle.java\n    \n    \n        Lines 327 to 331\n      in\n      940ef9d\n    \n    \n    \n    \n\n        \n          \n           // Set validity boolean based on whether we found anything interesting \n        \n\n        \n          \n           // in the file: \n        \n\n        \n          \n           if ((mode != BibStyleMode.NONE) && isDefaultLayoutPresent) { \n        \n\n        \n          \n               valid = true; \n        \n\n        \n          \n           }", "author": "Siedlerchr", "createdAt": "2020-05-01T17:40:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYzNzAxOQ=="}], "type": "inlineReview"}, {"oid": "64ff0958a5892dba7f7443d1e7f2d3dcfa49252c", "url": "https://github.com/JabRef/jabref/commit/64ff0958a5892dba7f7443d1e7f2d3dcfa49252c", "message": "Add test for validity", "committedDate": "2020-05-01T17:46:43Z", "type": "commit"}]}