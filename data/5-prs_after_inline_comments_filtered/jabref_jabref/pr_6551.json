{"pr_number": 6551, "pr_title": "Add more menu items to library context menu", "pr_createdAt": "2020-05-29T09:29:16Z", "pr_url": "https://github.com/JabRef/jabref/pull/6551", "timeline": [{"oid": "70da7fea79078fae7cf2b998f535dc88332e0440", "url": "https://github.com/JabRef/jabref/commit/70da7fea79078fae7cf2b998f535dc88332e0440", "message": "add context menu", "committedDate": "2020-05-29T07:52:30Z", "type": "commit"}, {"oid": "612255252d9ac1de47ba9dd2984ffbf6790612ef", "url": "https://github.com/JabRef/jabref/commit/612255252d9ac1de47ba9dd2984ffbf6790612ef", "message": "add test", "committedDate": "2020-05-29T07:53:12Z", "type": "commit"}, {"oid": "d407607729effb81dede2efcc72f721b80cbac71", "url": "https://github.com/JabRef/jabref/commit/d407607729effb81dede2efcc72f721b80cbac71", "message": "delete jabRefFrameTest", "committedDate": "2020-05-29T09:07:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5NjU5MQ==", "url": "https://github.com/JabRef/jabref/pull/6551#discussion_r432396591", "bodyText": "Maybe you can add a utility method in ActionHelper to check if there are multiple databases present? In that case the entry for this could be disabled if not.", "author": "calixtus", "createdAt": "2020-05-29T10:28:48Z", "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "diffHunk": "@@ -1316,6 +1323,31 @@ public void execute() {\n         }\n     }\n \n+    private class CloseOthersDatabaseAction extends SimpleCommand {", "originalCommit": "d407607729effb81dede2efcc72f721b80cbac71", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0NjExOA==", "url": "https://github.com/JabRef/jabref/pull/6551#discussion_r432846118", "bodyText": "Do you mean that I only need to disable the menu items when there is only one databese opened but no need to hide these items?\nJust like the following is OK?", "author": "Hollyqqqqq", "createdAt": "2020-05-30T14:33:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5NjU5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ1NTM2Mg==", "url": "https://github.com/JabRef/jabref/pull/6551#discussion_r432455362", "bodyText": "I wouldn't add the \"Manage cite key pattern\". It's not that important and also not directly concerned with the library.", "author": "tobiasdiez", "createdAt": "2020-05-29T12:40:14Z", "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "diffHunk": "@@ -1079,11 +1079,18 @@ public void updateAllTabTitles() {\n         }\n     }\n \n-    private static ContextMenu createTabContextMenu(KeyBindingRepository keyBindingRepository, BasePanel panel, StateManager stateManager) {\n+    private ContextMenu createTabContextMenu(KeyBindingRepository keyBindingRepository) {\n         ContextMenu contextMenu = new ContextMenu();\n         ActionFactory factory = new ActionFactory(keyBindingRepository);\n \n-        contextMenu.getItems().add(factory.createMenuItem(StandardActions.LIBRARY_PROPERTIES, new LibraryPropertiesAction(panel.frame(), stateManager)));\n+        contextMenu.getItems().addAll(\n+                factory.createMenuItem(StandardActions.CLOSE_LIBRARY, new CloseDatabaseAction()),\n+                factory.createMenuItem(StandardActions.CLOSE_OTHER_LIBRARIES, new CloseOthersDatabaseAction()),\n+                factory.createMenuItem(StandardActions.CLOSE_ALL_LIBRARIES, new CloseAllDatabaseAction()),\n+                new SeparatorMenuItem(),\n+                factory.createMenuItem(StandardActions.LIBRARY_PROPERTIES, new LibraryPropertiesAction(this, stateManager)),\n+                factory.createMenuItem(StandardActions.MANAGE_CITE_KEY_PATTERNS, new BibtexKeyPatternAction(this, stateManager))", "originalCommit": "d407607729effb81dede2efcc72f721b80cbac71", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0NjE4OQ==", "url": "https://github.com/JabRef/jabref/pull/6551#discussion_r432846189", "bodyText": "Yeah, I think what you said is very reasonable. I will try to do it.", "author": "Hollyqqqqq", "createdAt": "2020-05-30T14:35:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ1NTM2Mg=="}], "type": "inlineReview"}, {"oid": "b1982c0be187a6a6e61766ab9b01d0d1ba82f5d0", "url": "https://github.com/JabRef/jabref/commit/b1982c0be187a6a6e61766ab9b01d0d1ba82f5d0", "message": "Merge remote-tracking branch 'upstream/master' into fix-for-issue-6527", "committedDate": "2020-05-30T06:53:35Z", "type": "commit"}, {"oid": "cd2fc42237242773685a3b38c2021e07cdbade39", "url": "https://github.com/JabRef/jabref/commit/cd2fc42237242773685a3b38c2021e07cdbade39", "message": "update", "committedDate": "2020-05-31T00:15:54Z", "type": "commit"}, {"oid": "937cc8c9236858b3173ee89cca6ac21fc24fb8f0", "url": "https://github.com/JabRef/jabref/commit/937cc8c9236858b3173ee89cca6ac21fc24fb8f0", "message": "checkstyle", "committedDate": "2020-06-01T00:19:34Z", "type": "commit"}, {"oid": "6c10d73cc492e36829f85773cf1e7f898f87ac9f", "url": "https://github.com/JabRef/jabref/commit/6c10d73cc492e36829f85773cf1e7f898f87ac9f", "message": "Update JabRef_en.properties", "committedDate": "2020-06-01T04:40:02Z", "type": "commit"}, {"oid": "d4e03bf693d448bd4ed1ab0f7fc9ece9a62089cc", "url": "https://github.com/JabRef/jabref/commit/d4e03bf693d448bd4ed1ab0f7fc9ece9a62089cc", "message": "Update JabRef_en.properties", "committedDate": "2020-06-01T04:41:21Z", "type": "commit"}]}