{"pr_number": 6771, "pr_title": "Shared database synchronized by FocusChangedEvent", "pr_createdAt": "2020-08-19T17:49:54Z", "pr_url": "https://github.com/JabRef/jabref/pull/6771", "timeline": [{"oid": "87adec3b09a9f65f37dae13b842069e3c7af29cd", "url": "https://github.com/JabRef/jabref/commit/87adec3b09a9f65f37dae13b842069e3c7af29cd", "message": "Added FocusChangedEvent, fired in BibEntry when setFocusedField is called. Focus is changed in EntryEditor.\nCoarseChangeFilter with no special function -> does not work with shared databases.", "committedDate": "2020-08-19T12:18:18Z", "type": "commit"}, {"oid": "0c895c166bfaa19d0f3ef00fc459eb6728523f03", "url": "https://github.com/JabRef/jabref/commit/0c895c166bfaa19d0f3ef00fc459eb6728523f03", "message": "Uncomment FieldChangedEvent listener.", "committedDate": "2020-08-19T14:05:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEyMTA2NQ==", "url": "https://github.com/JabRef/jabref/pull/6771#discussion_r475121065", "bodyText": "I think the problem is that you are listening to an Event from the EventBus which is nowhere fired", "author": "Siedlerchr", "createdAt": "2020-08-22T19:08:24Z", "path": "src/main/java/org/jabref/logic/shared/DBMSSynchronizer.java", "diffHunk": "@@ -136,6 +137,23 @@ public void listen(MetaDataChangedEvent event) {\n         }\n     }\n \n+    /**\n+     * Listening method. Updates an existing shared {@link BibEntry} by focus request.\n+     *\n+     * @param event {@link FocusChangedEvent} object\n+     */\n+    @Subscribe\n+    public void listen(FocusChangedEvent event) {", "originalCommit": "0c895c166bfaa19d0f3ef00fc459eb6728523f03", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEyMTEyOA==", "url": "https://github.com/JabRef/jabref/pull/6771#discussion_r475121128", "bodyText": "See the eventBus.post method, the eventBus post method is reposinsible for firing the event.", "author": "Siedlerchr", "createdAt": "2020-08-22T19:09:10Z", "path": "src/main/java/org/jabref/model/database/event/CoarseChangeFilter.java", "diffHunk": "@@ -31,8 +31,10 @@ public synchronized void listen(@SuppressWarnings(\"unused\") BibDatabaseContextCh\n             // Only relay event if the field changes are more than one character or a new field is edited\n             FieldChangedEvent fieldChange = (FieldChangedEvent) event;\n             boolean isEditOnNewField = lastFieldChanged == null || !lastFieldChanged.equals(fieldChange.getField());\n+            // Only deltas of 1 registered by fieldChange\n+            boolean isMajorChange = fieldChange.getDelta() >= 1;\n \n-            if (fieldChange.getDelta() > 1 || isEditOnNewField) {\n+            if (isEditOnNewField) {\n                 lastFieldChanged = fieldChange.getField();", "originalCommit": "0c895c166bfaa19d0f3ef00fc459eb6728523f03", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c53ed5675c6da19aff7934a8b651153ea12b0a2f", "url": "https://github.com/JabRef/jabref/commit/c53ed5675c6da19aff7934a8b651153ea12b0a2f", "message": "Removed FocusChangedEvent.java due to improper dependencies.\nIntroduced DelayTaskThrottler on CoarseChangeFilter.", "committedDate": "2020-08-25T07:23:23Z", "type": "commit"}, {"oid": "079f913eb1dbbd8bd9533f67a63f2e05125f2fb1", "url": "https://github.com/JabRef/jabref/commit/079f913eb1dbbd8bd9533f67a63f2e05125f2fb1", "message": "Delete FocusChangedEvent.java", "committedDate": "2020-08-27T07:14:07Z", "type": "commit"}, {"oid": "a680ecb1a328b68007ff704dd2481ded9143d8dc", "url": "https://github.com/JabRef/jabref/commit/a680ecb1a328b68007ff704dd2481ded9143d8dc", "message": "Update EntryEditor.java", "committedDate": "2020-09-01T16:02:45Z", "type": "commit"}, {"oid": "346d85a3a2f4ab60b024cd0a1623fc733e9a904a", "url": "https://github.com/JabRef/jabref/commit/346d85a3a2f4ab60b024cd0a1623fc733e9a904a", "message": "Update CoarseChangeFilter.java", "committedDate": "2020-09-01T16:07:02Z", "type": "commit"}, {"oid": "2fb31f7fe830fc1dd224e28156a58bf388cd496c", "url": "https://github.com/JabRef/jabref/commit/2fb31f7fe830fc1dd224e28156a58bf388cd496c", "message": "Update CoarseChangeFilter.java", "committedDate": "2020-09-01T16:10:35Z", "type": "commit"}, {"oid": "b76e7f21bd1a9c488d0c4a998d432495e5c834ed", "url": "https://github.com/JabRef/jabref/commit/b76e7f21bd1a9c488d0c4a998d432495e5c834ed", "message": "Update CoarseChangeFilter.java", "committedDate": "2020-09-01T16:15:04Z", "type": "commit"}]}