{"pr_number": 6960, "pr_title": "Corrected shortcut", "pr_createdAt": "2020-09-29T09:21:32Z", "pr_url": "https://github.com/JabRef/jabref/pull/6960", "timeline": [{"oid": "5158e87d25429fdbdaac3a2fd91eedcd8a0fc6ec", "url": "https://github.com/JabRef/jabref/commit/5158e87d25429fdbdaac3a2fd91eedcd8a0fc6ec", "message": "Corrected shortcut", "committedDate": "2020-09-29T09:07:29Z", "type": "commit"}, {"oid": "62a4fa89a9fc9796c2bf14963300e98d0015111d", "url": "https://github.com/JabRef/jabref/commit/62a4fa89a9fc9796c2bf14963300e98d0015111d", "message": "6796 fixed", "committedDate": "2020-10-13T11:58:26Z", "type": "commit"}, {"oid": "692b398f89070458935ff77899761e39215afeee", "url": "https://github.com/JabRef/jabref/commit/692b398f89070458935ff77899761e39215afeee", "message": "Added new entry in JabRef_en.properties file\nCorrected TypeEditorViewModel & KeyBinding", "committedDate": "2020-10-14T07:12:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ3ODcxNg==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504478716", "bodyText": "You don't need to add it here. This class is only used for the field type in the entry editor, and there are predefined values for this field.", "author": "tobiasdiez", "createdAt": "2020-10-14T08:01:47Z", "path": "src/main/java/org/jabref/gui/fieldeditors/TypeEditorViewModel.java", "diffHunk": "@@ -23,6 +23,7 @@ public TypeEditorViewModel(Field field, SuggestionProvider<?> suggestionProvider\n         itemMap.put(\"software\", Localization.lang(\"Software\"));\n         itemMap.put(\"datacd\", Localization.lang(\"Data CD\"));\n         itemMap.put(\"audiocd\", Localization.lang(\"Audio CD\"));\n+        itemMap.put(\"inproceedings\", Localization.lang(\"InProceedings\"));", "originalCommit": "692b398f89070458935ff77899761e39215afeee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ5NjY2NA==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504496664", "bodyText": "Ah, my fault. What code comment should go there to point to the code where this happens? \ud83d\ude07", "author": "koppor", "createdAt": "2020-10-14T08:30:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ3ODcxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ3ODk3MQ==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504478971", "bodyText": "Please remove the default shortcut for techreport and inprocceedings as well.", "author": "tobiasdiez", "createdAt": "2020-10-14T08:02:09Z", "path": "src/main/java/org/jabref/gui/keyboard/KeyBinding.java", "diffHunk": "@@ -46,12 +46,13 @@\n     NEW_BOOK(\"New book\", Localization.lang(\"New book\"), \"ctrl+shift+B\", KeyBindingCategory.BIBTEX),\n     NEW_ENTRY(\"New entry\", Localization.lang(\"New entry\"), \"ctrl+N\", KeyBindingCategory.BIBTEX),\n     NEW_ENTRY_FROM_PLAIN_TEXT(\"New entry from plain text\", Localization.lang(\"New entry from plain text\"), \"ctrl+shift+N\", KeyBindingCategory.BIBTEX),\n-    NEW_INBOOK(\"New inbook\", Localization.lang(\"New inbook\"), \"ctrl+shift+I\", KeyBindingCategory.BIBTEX),\n-    NEW_MASTERSTHESIS(\"New mastersthesis\", Localization.lang(\"New mastersthesis\"), \"ctrl+shift+M\", KeyBindingCategory.BIBTEX),\n-    NEW_PHDTHESIS(\"New phdthesis\", Localization.lang(\"New phdthesis\"), \"ctrl+shift+T\", KeyBindingCategory.BIBTEX),\n-    NEW_PROCEEDINGS(\"New proceedings\", Localization.lang(\"New proceedings\"), \"ctrl+shift+P\", KeyBindingCategory.BIBTEX),\n-    NEW_UNPUBLISHED(\"New unpublished\", Localization.lang(\"New unpublished\"), \"ctrl+shift+U\", KeyBindingCategory.BIBTEX),\n-    NEW_TECHREPORT(\"New technical report\", Localization.lang(\"New technical report\"), \"ctrl+shift+R\", KeyBindingCategory.BIBTEX),\n+    NEW_INBOOK(\"New inbook\", Localization.lang(\"New inbook\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_MASTERSTHESIS(\"New mastersthesis\", Localization.lang(\"New mastersthesis\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_PHDTHESIS(\"New phdthesis\", Localization.lang(\"New phdthesis\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_PROCEEDINGS(\"New proceedings\", Localization.lang(\"New proceedings\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_UNPUBLISHED(\"New unpublished\", Localization.lang(\"New unpublished\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_TECHREPORT(\"New technical report\", Localization.lang(\"New technical report\"), \"alt+shift+R\", KeyBindingCategory.BIBTEX),", "originalCommit": "692b398f89070458935ff77899761e39215afeee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDUzNTI5OQ==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504535299", "bodyText": "OK", "author": "Gena928", "createdAt": "2020-10-14T09:29:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ3ODk3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ3OTE3NQ==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504479175", "bodyText": "Please revert to ctrl + shrift + r", "author": "tobiasdiez", "createdAt": "2020-10-14T08:02:30Z", "path": "src/main/java/org/jabref/gui/keyboard/KeyBinding.java", "diffHunk": "@@ -61,7 +62,7 @@\n     OPEN_OPEN_OFFICE_LIBRE_OFFICE_CONNECTION(\"Open OpenOffice/LibreOffice connection\", Localization.lang(\"Open OpenOffice/LibreOffice connection\"), \"alt+0\", KeyBindingCategory.TOOLS),\n     OPEN_URL_OR_DOI(\"Open URL or DOI\", Localization.lang(\"Open URL or DOI\"), \"F3\", KeyBindingCategory.TOOLS),\n     PASTE(\"Paste\", Localization.lang(\"Paste\"), \"ctrl+V\", KeyBindingCategory.EDIT),\n-    PULL_CHANGES_FROM_SHARED_DATABASE(\"Pull changes from shared database\", Localization.lang(\"Pull changes from shared database\"), \"ctrl+shift+R\", KeyBindingCategory.FILE),\n+    PULL_CHANGES_FROM_SHARED_DATABASE(\"Pull changes from shared database\", Localization.lang(\"Pull changes from shared database\"), \"alt+shift+D\", KeyBindingCategory.FILE),", "originalCommit": "692b398f89070458935ff77899761e39215afeee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDUzNTM3NQ==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504535375", "bodyText": "OK", "author": "Gena928", "createdAt": "2020-10-14T09:29:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ3OTE3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4MjY3NA==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504482674", "bodyText": "Are you sure this works? I would gess getDefaultKeyBinding is always empty for NEW_INBOOK even though the user has overwritten it. On first glance, I would suggest to change the getKeyCombination method below to public Optional<KeyCombination> getKeyCombination(KeyBinding bindName) and return an empty optional if binding is empty.\nMoreover, get should probably return en empty string instead of \"Not associated\" to be consistent.", "author": "tobiasdiez", "createdAt": "2020-10-14T08:08:20Z", "path": "src/main/java/org/jabref/gui/keyboard/KeyBindingRepository.java", "diffHunk": "@@ -113,8 +113,10 @@ public int size() {\n \n     public Optional<KeyBinding> mapToKeyBinding(KeyEvent keyEvent) {\n         for (KeyBinding binding : KeyBinding.values()) {\n-            if (checkKeyCombinationEquality(binding, keyEvent)) {\n-                return Optional.of(binding);\n+            if (!binding.getDefaultKeyBinding().isEmpty()){", "originalCommit": "692b398f89070458935ff77899761e39215afeee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDUzODE4OA==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504538188", "bodyText": "It works. If I change the next statement\nfrom public KeyCombination getKeyCombination(KeyBinding bindName)\nto Optional<KeyCombination> getKeyCombination(KeyBinding bindName)\nI have to change other parts of code. For example line 141\nfrom KeyCombination keyCombination = getKeyCombination(binding);\nto KeyCombination keyCombination = getKeyCombination(binding).get();\nIs this what you mean?", "author": "Gena928", "createdAt": "2020-10-14T09:34:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4MjY3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU0NjEzNQ==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504546135", "bodyText": "Okay, can you briefly explain why it works? I thought \"getDefaultKeyBinding\" then always returns an empty string, so this check is always false.\nYeah, there are more code changes required for my suggestion. I think it would provide a clean solution to handle the case that for a given keybinding there is not necessarily a keycombination. But I didn't had the time yet to check the code in detail. So if your solution indeed works, then it's fine with me as well.", "author": "tobiasdiez", "createdAt": "2020-10-14T09:46:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4MjY3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU1NTkzNQ==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504555935", "bodyText": "I started debugger and see that it always returns shortcut from KeyBinding.java file.\n\nSolution with Optional looks more clean. I just want to confirm that if we implement it, we also change other parts of code to getKeyCombination(binding).get().", "author": "Gena928", "createdAt": "2020-10-14T10:02:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4MjY3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU5NTY3Mg==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504595672", "bodyText": "In case this is done, the code fragment is getKeyCombination(binding).ifpresent(combination -> ...)", "author": "koppor", "createdAt": "2020-10-14T11:15:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4MjY3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY3OTUwMg==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504679502", "bodyText": "@Gena928 Exactly! So if you change the keybinding for \"New inbook\" to something, then getDefaultKeybinding should still return an empty string, so the code never goes into the if body in this case (although it should to match the new-user defined key).", "author": "tobiasdiez", "createdAt": "2020-10-14T13:32:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4MjY3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDcxMDk0Mg==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r504710942", "bodyText": "@tobiasdiez\nI agree. If you change default shortcut, this code will not work.", "author": "Gena928", "createdAt": "2020-10-14T14:12:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4MjY3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIyNjU1Ng==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r505226556", "bodyText": "I'll try to fix today.", "author": "Gena928", "createdAt": "2020-10-15T06:55:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4MjY3NA=="}], "type": "inlineReview"}, {"oid": "87df8c750e944b7e5dca1b0fe287f00ddcf9bee9", "url": "https://github.com/JabRef/jabref/commit/87df8c750e944b7e5dca1b0fe287f00ddcf9bee9", "message": "Merge remote-tracking branch 'JabRefMaster/master' into 6867(2)\n\n# Conflicts:\n#\tsrc/main/resources/l10n/JabRef_en.properties", "committedDate": "2020-10-14T08:33:55Z", "type": "commit"}, {"oid": "bf6c0f7dc554eba9dae3ab5eba03078990890dc8", "url": "https://github.com/JabRef/jabref/commit/bf6c0f7dc554eba9dae3ab5eba03078990890dc8", "message": "Save before making changes", "committedDate": "2020-10-14T12:12:26Z", "type": "commit"}, {"oid": "3c3f91892f15c07a4990af1e7b03471b8e0f0992", "url": "https://github.com/JabRef/jabref/commit/3c3f91892f15c07a4990af1e7b03471b8e0f0992", "message": "Changed \"getKeyCombination\" method of KeyBindingRepository and all it's dependencies.", "committedDate": "2020-10-15T18:29:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE5MjEzMQ==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r507192131", "bodyText": "Checkstyle issue: Put the space back between ) and {", "author": "calixtus", "createdAt": "2020-10-18T17:49:37Z", "path": "src/main/java/org/jabref/gui/keyboard/KeyBindingRepository.java", "diffHunk": "@@ -112,21 +112,23 @@ public int size() {\n     }\n \n     public Optional<KeyBinding> mapToKeyBinding(KeyEvent keyEvent) {\n-        for (KeyBinding binding : KeyBinding.values()) {\n+        for (KeyBinding binding : KeyBinding.values()){", "originalCommit": "3c3f91892f15c07a4990af1e7b03471b8e0f0992", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE5MjU5Mw==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r507192593", "bodyText": "New inproceedings needs to be put in the english localization file.", "author": "calixtus", "createdAt": "2020-10-18T17:54:03Z", "path": "src/main/java/org/jabref/gui/keyboard/KeyBinding.java", "diffHunk": "@@ -46,12 +46,13 @@\n     NEW_BOOK(\"New book\", Localization.lang(\"New book\"), \"ctrl+shift+B\", KeyBindingCategory.BIBTEX),\n     NEW_ENTRY(\"New entry\", Localization.lang(\"New entry\"), \"ctrl+N\", KeyBindingCategory.BIBTEX),\n     NEW_ENTRY_FROM_PLAIN_TEXT(\"New entry from plain text\", Localization.lang(\"New entry from plain text\"), \"ctrl+shift+N\", KeyBindingCategory.BIBTEX),\n-    NEW_INBOOK(\"New inbook\", Localization.lang(\"New inbook\"), \"ctrl+shift+I\", KeyBindingCategory.BIBTEX),\n-    NEW_MASTERSTHESIS(\"New mastersthesis\", Localization.lang(\"New mastersthesis\"), \"ctrl+shift+M\", KeyBindingCategory.BIBTEX),\n-    NEW_PHDTHESIS(\"New phdthesis\", Localization.lang(\"New phdthesis\"), \"ctrl+shift+T\", KeyBindingCategory.BIBTEX),\n-    NEW_PROCEEDINGS(\"New proceedings\", Localization.lang(\"New proceedings\"), \"ctrl+shift+P\", KeyBindingCategory.BIBTEX),\n-    NEW_UNPUBLISHED(\"New unpublished\", Localization.lang(\"New unpublished\"), \"ctrl+shift+U\", KeyBindingCategory.BIBTEX),\n-    NEW_TECHREPORT(\"New technical report\", Localization.lang(\"New technical report\"), \"ctrl+shift+R\", KeyBindingCategory.BIBTEX),\n+    NEW_INBOOK(\"New inbook\", Localization.lang(\"New inbook\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_MASTERSTHESIS(\"New mastersthesis\", Localization.lang(\"New mastersthesis\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_PHDTHESIS(\"New phdthesis\", Localization.lang(\"New phdthesis\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_PROCEEDINGS(\"New proceedings\", Localization.lang(\"New proceedings\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_UNPUBLISHED(\"New unpublished\", Localization.lang(\"New unpublished\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_TECHREPORT(\"New technical report\", Localization.lang(\"New technical report\"), \"\", KeyBindingCategory.BIBTEX),\n+    NEW_INPROCEEDINGS(\"New inproceesings\", Localization.lang(\"New inproceedings\"), \"\", KeyBindingCategory.BIBTEX),", "originalCommit": "3c3f91892f15c07a4990af1e7b03471b8e0f0992", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d480045bf1c0639b84ebc84a02d3186e18cc0ae7", "url": "https://github.com/JabRef/jabref/commit/d480045bf1c0639b84ebc84a02d3186e18cc0ae7", "message": "Corrected pull requests (comments from @calixtus)", "committedDate": "2020-10-18T18:07:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE5NTk0Ng==", "url": "https://github.com/JabRef/jabref/pull/6960#discussion_r507195946", "bodyText": "Missing whitespace.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (!keyCombination.isPresent()){\n          \n          \n            \n                    if (!keyCombination.isPresent()) {", "author": "calixtus", "createdAt": "2020-10-18T18:24:12Z", "path": "src/main/java/org/jabref/gui/keyboard/KeyBindingRepository.java", "diffHunk": "@@ -137,8 +139,11 @@ public KeyCombination getKeyCombination(KeyBinding bindName) {\n      * @return true if matching, else false\n      */\n     public boolean checkKeyCombinationEquality(KeyBinding binding, KeyEvent keyEvent) {\n-        KeyCombination keyCombination = getKeyCombination(binding);\n-        return checkKeyCombinationEquality(keyCombination, keyEvent);\n+        Optional<KeyCombination> keyCombination = getKeyCombination(binding);\n+        if (!keyCombination.isPresent()){", "originalCommit": "d480045bf1c0639b84ebc84a02d3186e18cc0ae7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3d120ac933db87157d090c49216d023eadf8729d", "url": "https://github.com/JabRef/jabref/commit/3d120ac933db87157d090c49216d023eadf8729d", "message": "Corrected pull requests (comments from @calixtus)", "committedDate": "2020-10-18T18:39:42Z", "type": "commit"}, {"oid": "3c9981cb81d9a9110d98631992263e6070b31eb0", "url": "https://github.com/JabRef/jabref/commit/3c9981cb81d9a9110d98631992263e6070b31eb0", "message": "Merge branch 'master' into 6867(2)", "committedDate": "2020-10-18T19:02:08Z", "type": "commit"}, {"oid": "2abea9ec86cc1f71be67e0e79adb54b892cdadd4", "url": "https://github.com/JabRef/jabref/commit/2abea9ec86cc1f71be67e0e79adb54b892cdadd4", "message": "Add whitespace in KeyBindingRepository", "committedDate": "2020-10-18T21:41:56Z", "type": "commit"}]}