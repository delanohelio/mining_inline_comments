{"pr_number": 6315, "pr_title": "Make wrap fields also visible in entry editor", "pr_createdAt": "2020-04-19T17:53:25Z", "pr_url": "https://github.com/JabRef/jabref/pull/6315", "timeline": [{"oid": "0b39116fee9819c5bc0bd32246ed7c5a0fe091fb", "url": "https://github.com/JabRef/jabref/commit/0b39116fee9819c5bc0bd32246ed7c5a0fe091fb", "message": "Make wrap fields also visible in entry editor\n\nFixes #4373", "committedDate": "2020-04-19T17:57:36Z", "type": "commit"}, {"oid": "0b39116fee9819c5bc0bd32246ed7c5a0fe091fb", "url": "https://github.com/JabRef/jabref/commit/0b39116fee9819c5bc0bd32246ed7c5a0fe091fb", "message": "Make wrap fields also visible in entry editor\n\nFixes #4373", "committedDate": "2020-04-19T17:57:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk4OTcyMg==", "url": "https://github.com/JabRef/jabref/pull/6315#discussion_r410989722", "bodyText": "I don't understand the reference to FieldContentFormatter which doesn't seem to be used.", "author": "tobiasdiez", "createdAt": "2020-04-19T20:57:37Z", "path": "src/main/java/org/jabref/model/entry/field/FieldFactory.java", "diffHunk": "@@ -139,13 +139,10 @@ public static boolean isInternalField(Field field) {\n         return defaultGeneralFields;\n     }\n \n-    // TODO: Move somewhere more appropriate and make user-configurable\n-    public static boolean isSingleLineField(final Field field) {\n-        if (field.equals(StandardField.ABSTRACT) || field.equals(StandardField.COMMENT)) {\n-            return false;\n-        }\n \n+    public static boolean isMultiLineField(final Field field, List<Field> nonWrappableFields) {\n         // Treat unknown fields as multi-line fields\n-        return !(field instanceof UnknownField);\n+        // FieldContentFormatter provides us with the addtional field abstract, comment and review", "originalCommit": "0b39116fee9819c5bc0bd32246ed7c5a0fe091fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk4OTk1Mw==", "url": "https://github.com/JabRef/jabref/pull/6315#discussion_r410989953", "bodyText": "I think the todo still makes sense: this should be configurable and should be moved somewhere else in the future.", "author": "tobiasdiez", "createdAt": "2020-04-19T20:58:44Z", "path": "src/main/java/org/jabref/model/entry/field/FieldFactory.java", "diffHunk": "@@ -139,13 +139,10 @@ public static boolean isInternalField(Field field) {\n         return defaultGeneralFields;\n     }\n \n-    // TODO: Move somewhere more appropriate and make user-configurable\n-    public static boolean isSingleLineField(final Field field) {\n-        if (field.equals(StandardField.ABSTRACT) || field.equals(StandardField.COMMENT)) {\n-            return false;\n-        }\n \n+    public static boolean isMultiLineField(final Field field, List<Field> nonWrappableFields) {", "originalCommit": "0b39116fee9819c5bc0bd32246ed7c5a0fe091fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgwMDgxMQ==", "url": "https://github.com/JabRef/jabref/pull/6315#discussion_r412800811", "bodyText": "Is the additional ; intended?\nDoes getStringList() return an additional empty list item then?", "author": "calixtus", "createdAt": "2020-04-22T08:56:57Z", "path": "src/main/java/org/jabref/preferences/JabRefPreferences.java", "diffHunk": "@@ -571,7 +571,7 @@ private JabRefPreferences() {\n         defaults.put(DEFAULT_BIBTEX_KEY_PATTERN, \"[auth][year]\");\n         defaults.put(DO_NOT_RESOLVE_STRINGS_FOR, StandardField.URL.getName());\n         defaults.put(RESOLVE_STRINGS_ALL_FIELDS, Boolean.FALSE);\n-        defaults.put(NON_WRAPPABLE_FIELDS, \"pdf;ps;url;doi;file;isbn;issn\");\n+        defaults.put(NON_WRAPPABLE_FIELDS, \"pdf;ps;url;doi;file;isbn;issn;\");", "originalCommit": "0b39116fee9819c5bc0bd32246ed7c5a0fe091fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4dab523fa63a65acb40284d715f464dbad8b7683", "url": "https://github.com/JabRef/jabref/commit/4dab523fa63a65acb40284d715f464dbad8b7683", "message": "Merge remote-tracking branch 'upstream/master' into multiline\n\n* upstream/master:\n  Update label names\n  Squashed 'src/main/resources/csl-locales/' changes from d0ee4d13c9..79845b087b\n  Squashed 'src/main/resources/csl-styles/' changes from c1793d2fe0..143464eff6\n  Cite work by @ayaankazerouni\n  Improve performance for loading files (#6332)\n  Add ADR von JUnit vs. AssertJ (#6335)\n  'Name' textfield on focus instead of 'OK' button when user clicks on 'Add subgroup' option (#6330)\n  Bump jurt from 6.3.2 to 6.4.3 (#6325)\n  Bump unoil from 6.3.2 to 6.4.3 (#6320)\n  Bump ridl from 6.3.2 to 6.4.3 (#6326)\n  Bump classgraph from 4.8.69 to 4.8.71 (#6322)\n  Bump flexmark from 0.61.6 to 0.61.16 (#6318)\n  Bump richtextfx from 0.10.4 to 0.10.5 (#6319)\n  Bump guava from 28.2-jre to 29.0-jre (#6323)\n  Bump flexmark-ext-gfm-tasklist from 0.61.6 to 0.61.16 (#6327)\n  Bump org.beryx.jlink from 2.17.5 to 2.17.7 (#6324)\n  Improve performance massively by fixing a stupid binding mistake (#6316)\n  Fixed missing paste command (#6313)\n  Remove cache of auto completion results (#6310)", "committedDate": "2020-04-24T17:15:12Z", "type": "commit"}, {"oid": "7d21e0614cd7653a5b448c7ebce718b43ba605ba", "url": "https://github.com/JabRef/jabref/commit/7d21e0614cd7653a5b448c7ebce718b43ba605ba", "message": "change comment", "committedDate": "2020-04-24T17:20:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM5MDUyOQ==", "url": "https://github.com/JabRef/jabref/pull/6315#discussion_r415390529", "bodyText": "Can we use an enum here? I really don't like the booleans - and we see changing the flag from singleLine to multiLine was necessary of readability. (Otherweise, the variable would be kept to flag singleLine - and negation would be used)\nI propose to use a boolean enum as proposed at https://stackoverflow.com/a/12713550/873282\nenum USED_LINES {\n    MULTI(true), SINGLE(false);\n...\nMaybe, just a simple enum would also be OK. Then, the construction from boolean would be a bit more tricky though.", "author": "koppor", "createdAt": "2020-04-26T20:11:08Z", "path": "src/main/java/org/jabref/gui/fieldeditors/FieldEditors.java", "diffHunk": "@@ -52,10 +51,10 @@ public static FieldEditorFX getForField(final Field field,\n                 preferences.getBoolean(JabRefPreferences.ENFORCE_LEGAL_BIBTEX_KEY),\n                 preferences.getBoolean(JabRefPreferences.ALLOW_INTEGER_EDITION_BIBTEX));\n \n-        final boolean isSingleLine = FieldFactory.isSingleLineField(field);\n+         boolean isMultiLine = FieldFactory.isMultiLineField(field, preferences.getFieldContentParserPreferences().getNonWrappableFields());", "originalCommit": "7d21e0614cd7653a5b448c7ebce718b43ba605ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQwOTE2Mg==", "url": "https://github.com/JabRef/jabref/pull/6315#discussion_r415409162", "bodyText": "If you want to go in this direction, an enum FieldType with Text and TextLong would make the most sense and conveys the semantics. Can then be extended in the future to include Keywords, Numeric etc.", "author": "tobiasdiez", "createdAt": "2020-04-26T21:51:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM5MDUyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk4NzM3NA==", "url": "https://github.com/JabRef/jabref/pull/6315#discussion_r415987374", "bodyText": "I really would like to leave it for the moment and implement a more generic solution in a follow up PR. I think about integrating it in the custom entry types dialog.", "author": "Siedlerchr", "createdAt": "2020-04-27T17:00:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM5MDUyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM5MDcyNA==", "url": "https://github.com/JabRef/jabref/pull/6315#discussion_r415390724", "bodyText": "Not that the true/false branches were just be wrapped. Another indicator for an enum!", "author": "koppor", "createdAt": "2020-04-26T20:11:50Z", "path": "src/main/java/org/jabref/gui/fieldeditors/PersonsEditor.java", "diffHunk": "@@ -23,12 +23,10 @@ public PersonsEditor(final Field field,\n                          final SuggestionProvider<?> suggestionProvider,\n                          final JabRefPreferences preferences,\n                          final FieldCheckers fieldCheckers,\n-                         final boolean isSingleLine) {\n+                         final boolean isMultiLine) {\n         this.viewModel = new PersonsEditorViewModel(field, suggestionProvider, preferences.getAutoCompletePreferences(), fieldCheckers);\n \n-        textInput = isSingleLine\n-                ? new EditorTextField()\n-                : new EditorTextArea();\n+        textInput = isMultiLine ? new EditorTextArea() : new EditorTextField();", "originalCommit": "7d21e0614cd7653a5b448c7ebce718b43ba605ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1dc4fc5c5061fd4e0ce64dcf3be39862dbf751a3", "url": "https://github.com/JabRef/jabref/commit/1dc4fc5c5061fd4e0ce64dcf3be39862dbf751a3", "message": "Merge remote-tracking branch 'upstream/master' into multiline\n\n* upstream/master:\n  Backward compatibility for 4.3.1 (#6296)\n  Fix Export to clipboard Dialog icon (#6345)\n  Refactor EntryEditorPreferences (#6245)", "committedDate": "2020-04-27T16:49:59Z", "type": "commit"}, {"oid": "3fdb701cb8063579a77e682f74241a7a6e4efa68", "url": "https://github.com/JabRef/jabref/commit/3fdb701cb8063579a77e682f74241a7a6e4efa68", "message": "add changelog", "committedDate": "2020-04-27T17:01:00Z", "type": "commit"}, {"oid": "e99a550f2557144654f56766a62871fe7409b778", "url": "https://github.com/JabRef/jabref/commit/e99a550f2557144654f56766a62871fe7409b778", "message": "Merge branch 'master' into multiline", "committedDate": "2020-05-02T15:48:15Z", "type": "commit"}]}