{"pr_number": 6809, "pr_title": "Fixes #6705 , added icon for multiple identifiers", "pr_createdAt": "2020-08-30T06:12:14Z", "pr_url": "https://github.com/JabRef/jabref/pull/6809", "timeline": [{"oid": "f8e2ed809c8b4faca6e0a2a66b13b719df823661", "url": "https://github.com/JabRef/jabref/commit/f8e2ed809c8b4faca6e0a2a66b13b719df823661", "message": "Fixes 6705 , added icon for multiple identifiers\nand modified behaviour to open eprint when clicked without opening menu\n\nAdded change log\n\nChanged name for enum\n\nFixed checkstyle errors", "committedDate": "2020-08-30T07:35:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIwNzU5Mg==", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480207592", "bodyText": "please remove this newline", "author": "tobiasdiez", "createdAt": "2020-08-31T15:29:27Z", "path": "src/main/java/org/jabref/gui/maintable/CellFactory.java", "diffHunk": "@@ -94,6 +98,7 @@ public CellFactory(ExternalFileTypes externalFileTypes, UndoManager undoManager)\n         icon = printedViewModel.getIcon();\n         // icon.setToolTipText(printedViewModel.getLocalization());\n         TABLE_ICONS.put(SpecialField.PRINTED, icon);\n+", "originalCommit": "f8e2ed809c8b4faca6e0a2a66b13b719df823661", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk5MDkwNw==", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480990907", "bodyText": "removed this line", "author": "hemantgs", "createdAt": "2020-09-01T09:13:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIwNzU5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIxMjY5OA==", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480212698", "bodyText": "The old code .withGraphic(this::createIdentifierGraphic) should still work.", "author": "tobiasdiez", "createdAt": "2020-08-31T15:37:52Z", "path": "src/main/java/org/jabref/gui/maintable/columns/LinkedIdentifierColumn.java", "diffHunk": "@@ -49,17 +50,31 @@ public LinkedIdentifierColumn(MainTableColumnModel model,\n         this.setResizable(false);\n         this.setCellValueFactory(cellData -> cellData.getValue().getLinkedIdentifiers());\n         new ValueTableCellFactory<BibEntryTableViewModel, Map<Field, String>>()\n-                .withGraphic(this::createIdentifierGraphic)\n+                .withGraphic(values -> createIdentifierGraphic(values))", "originalCommit": "f8e2ed809c8b4faca6e0a2a66b13b719df823661", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk5MTAxMg==", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480991012", "bodyText": "reverted this", "author": "hemantgs", "createdAt": "2020-09-01T09:13:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIxMjY5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQwNTU5Mw==", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480405593", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (values.size() > 1) {\n          \n          \n            \n                        return cellFactory.getTableIcon(StandardField.URLS);\n          \n          \n            \n                    } else if (values.size() == 1) {\n          \n          \n            \n                        return cellFactory.getTableIcon(StandardField.URL);\n          \n          \n            \n                    } else {\n          \n          \n            \n                        return null;\n          \n          \n            \n                    }\n          \n          \n            \n                    if (values.size() > 1) {\n          \n          \n            \n                        return IconTheme.JabRefIcons.MULTIPLE_LINKS.getGraphicNode();\n          \n          \n            \n                    } else if (values.size() == 1) {\n          \n          \n            \n                        return IconTheme.JabRefIcons.LINK.getGraphicNode();\n          \n          \n            \n                    } else {\n          \n          \n            \n                        return null;\n          \n          \n            \n                    }\n          \n      \n    \n    \n  \n\nWe talked in JabCon2020 a bit about this and we think that it would be better to directly load the icons here instead of introducing a new field URLS in StandardFields in the model package for a ui feature.", "author": "calixtus", "createdAt": "2020-08-31T21:20:32Z", "path": "src/main/java/org/jabref/gui/maintable/columns/LinkedIdentifierColumn.java", "diffHunk": "@@ -49,17 +50,31 @@ public LinkedIdentifierColumn(MainTableColumnModel model,\n         this.setResizable(false);\n         this.setCellValueFactory(cellData -> cellData.getValue().getLinkedIdentifiers());\n         new ValueTableCellFactory<BibEntryTableViewModel, Map<Field, String>>()\n-                .withGraphic(this::createIdentifierGraphic)\n+                .withGraphic(values -> createIdentifierGraphic(values))\n                 .withTooltip(this::createIdentifierTooltip)\n                 .withMenu(this::createIdentifierMenu)\n+                .withOnMouseClickedEvent((entry, linkedFiles) -> event -> {\n+                    if ((event.getButton() == MouseButton.PRIMARY) && (linkedFiles.size() == 1)) {\n+                        // Open linked identifier directly only if 1 entry is preset\n+                        try {\n+                            for (Field field : linkedFiles.keySet()) {\n+                                JabRefDesktop.openExternalViewer(database, linkedFiles.get(field), field);\n+                            }\n+                        } catch (IOException e) {\n+                            dialogService.showErrorDialogAndWait(Localization.lang(\"Unable to open link.\"), e);\n+                        }\n+                    }\n+                })\n                 .install(this);\n     }\n \n     private Node createIdentifierGraphic(Map<Field, String> values) {\n-        if (values.isEmpty()) {\n-            return null;\n-        } else {\n+        if (values.size() > 1) {\n+            return cellFactory.getTableIcon(StandardField.URLS);\n+        } else if (values.size() == 1) {\n             return cellFactory.getTableIcon(StandardField.URL);\n+        } else {\n+            return null;\n         }", "originalCommit": "f8e2ed809c8b4faca6e0a2a66b13b719df823661", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk5Mzk0Mg==", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480993942", "bodyText": "@calixtus Yeah , that makes sense too , I have changed it to use JabRefIcons directly", "author": "hemantgs", "createdAt": "2020-09-01T09:19:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQwNTU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk5NzcyNg==", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480997726", "bodyText": "I could not find a multiple links icon , so for now I have left it as a such , with link and link-variant\nsome other alternatives are\nfor single link\n\nfor multiple", "author": "hemantgs", "createdAt": "2020-09-01T09:25:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQwNTU5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQwNTY4OQ==", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480405689", "bodyText": "See above.", "author": "calixtus", "createdAt": "2020-08-31T21:20:47Z", "path": "src/main/java/org/jabref/model/entry/field/StandardField.java", "diffHunk": "@@ -123,6 +123,7 @@\n     TYPE(\"type\", FieldProperty.TYPE),\n     URI(\"uri\", \"URI\"),\n     URL(\"url\", \"URL\", FieldProperty.EXTERNAL, FieldProperty.VERBATIM),\n+    URLS(\"urls\", \"URLS\", FieldProperty.VERBATIM),", "originalCommit": "f8e2ed809c8b4faca6e0a2a66b13b719df823661", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk5MTI3Nw==", "url": "https://github.com/JabRef/jabref/pull/6809#discussion_r480991277", "bodyText": "removed this", "author": "hemantgs", "createdAt": "2020-09-01T09:14:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQwNTY4OQ=="}], "type": "inlineReview"}, {"oid": "673b9f55fb5d4d5416e5d5ac81a759b5fa96a95a", "url": "https://github.com/JabRef/jabref/commit/673b9f55fb5d4d5416e5d5ac81a759b5fa96a95a", "message": "Fixes 6705 , added icon for multiple identifiers\nand modified behaviour to open eprint when clicked without opening menu\n\nAdded change log\n\nChanged name for enum\n\nFixed checkstyle errors", "committedDate": "2020-09-01T09:09:06Z", "type": "commit"}, {"oid": "4c2f4935cf1c07b44cb99c7f75e2734fce01839f", "url": "https://github.com/JabRef/jabref/commit/4c2f4935cf1c07b44cb99c7f75e2734fce01839f", "message": "Fixed checkstyle errors", "committedDate": "2020-09-01T09:09:07Z", "type": "forcePushed"}, {"oid": "1b373ea912f823965c600caac5fad481e5225336", "url": "https://github.com/JabRef/jabref/commit/1b373ea912f823965c600caac5fad481e5225336", "message": "Fixed checkstyle errors\n\nFixed checkstyle errors", "committedDate": "2020-09-01T09:28:21Z", "type": "commit"}, {"oid": "1b373ea912f823965c600caac5fad481e5225336", "url": "https://github.com/JabRef/jabref/commit/1b373ea912f823965c600caac5fad481e5225336", "message": "Fixed checkstyle errors\n\nFixed checkstyle errors", "committedDate": "2020-09-01T09:28:21Z", "type": "forcePushed"}, {"oid": "16ee90226abbe425aed972c87f33df799e1f3937", "url": "https://github.com/JabRef/jabref/commit/16ee90226abbe425aed972c87f33df799e1f3937", "message": "Remove unused icons", "committedDate": "2020-09-01T10:43:10Z", "type": "commit"}, {"oid": "e94e4976f9b8fa71e1b40099bf9742e63a1cbd16", "url": "https://github.com/JabRef/jabref/commit/e94e4976f9b8fa71e1b40099bf9742e63a1cbd16", "message": "Fixed merge error in CHANGELOG.md", "committedDate": "2020-09-01T10:44:00Z", "type": "commit"}, {"oid": "727365968cfc820e0433d28132cbcb9e22eabc51", "url": "https://github.com/JabRef/jabref/commit/727365968cfc820e0433d28132cbcb9e22eabc51", "message": "Merge branch 'master' into ui-inconsistensies", "committedDate": "2020-09-01T10:46:54Z", "type": "commit"}]}