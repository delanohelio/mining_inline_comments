{"pr_number": 6552, "pr_title": "Fix author formatter for unchanged names", "pr_createdAt": "2020-05-29T17:30:03Z", "pr_url": "https://github.com/JabRef/jabref/pull/6552", "timeline": [{"oid": "581446b1426f639be8ce30a6bf752d3dea91dc07", "url": "https://github.com/JabRef/jabref/commit/581446b1426f639be8ce30a6bf752d3dea91dc07", "message": "Fix caching of preferences", "committedDate": "2020-06-08T18:15:55Z", "type": "commit"}, {"oid": "0020c219269b78ec693993910add46cdd9f4dc0c", "url": "https://github.com/JabRef/jabref/commit/0020c219269b78ec693993910add46cdd9f4dc0c", "message": "Refactor static import of format preferences enums", "committedDate": "2020-06-09T19:48:15Z", "type": "commit"}, {"oid": "81c0018e06aa5944b2f976368e5d74ad6805916e", "url": "https://github.com/JabRef/jabref/commit/81c0018e06aa5944b2f976368e5d74ad6805916e", "message": "Revert \"Drop caching of unformatted strings in...\"\n\nThis reverts commit 557ffc9f", "committedDate": "2020-06-09T19:57:01Z", "type": "commit"}, {"oid": "26cf448e77326cd9ddc2b8459fd4747ee98bd17d", "url": "https://github.com/JabRef/jabref/commit/26cf448e77326cd9ddc2b8459fd4747ee98bd17d", "message": "Fix for getting unformatted latex-free names\n\nMoving the responsibility of getting the unformatted latex-free name to\naid in caching and keeping it consistent with other getter functions.", "committedDate": "2020-06-09T20:12:21Z", "type": "commit"}, {"oid": "0942e2ce1c7bf9bb98e0d6a00d20d057a2354f66", "url": "https://github.com/JabRef/jabref/commit/0942e2ce1c7bf9bb98e0d6a00d20d057a2354f66", "message": "Refactor the fields loop\n\nMove the fields loop from BibEntryTableViewModel to\nMainTableFieldValueFormatter.", "committedDate": "2020-06-09T21:31:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzczNzEyOA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r437737128", "bodyText": "I don't think this is avoidable with the current structure if we want to cache unformatted latex-free strings.", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-06-09T21:37:34Z", "path": "src/main/java/org/jabref/model/entry/AuthorList.java", "diffHunk": "@@ -169,6 +171,7 @@ public static AuthorList parse(final String authors) {\n         if (authorList == null) {\n             AuthorListParser parser = new AuthorListParser();\n             authorList = parser.parse(authors);\n+            authorList.authorsUnformatted = new String(authors);", "originalCommit": "81c0018e06aa5944b2f976368e5d74ad6805916e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc0MDkyMQ==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r440740921", "bodyText": "(see above)", "author": "tobiasdiez", "createdAt": "2020-06-16T10:13:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzczNzEyOA=="}], "type": "inlineReview"}, {"oid": "3e562d8c3f7d06ec7fd2a99adb3e27746fbeb541", "url": "https://github.com/JabRef/jabref/commit/3e562d8c3f7d06ec7fd2a99adb3e27746fbeb541", "message": "Fix typo in formatFieldValueLatexFree", "committedDate": "2020-06-09T21:48:38Z", "type": "commit"}, {"oid": "7616fbe62b77c3c1665c2b80411d65034e71d9fd", "url": "https://github.com/JabRef/jabref/commit/7616fbe62b77c3c1665c2b80411d65034e71d9fd", "message": "Fix reference of bibDatabaseContext in Formatter\n\nStore a reference to the used BibDatabase in\nMainTableFieldValueFormatter with the constructor.", "committedDate": "2020-06-10T16:37:05Z", "type": "commit"}, {"oid": "4c457f34be32d0d24f6bef60c1fbf5e782d63035", "url": "https://github.com/JabRef/jabref/commit/4c457f34be32d0d24f6bef60c1fbf5e782d63035", "message": "Fix access modifier", "committedDate": "2020-06-12T15:59:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDczNDY4Ng==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r440734686", "bodyText": "I think this needs be a class variable, since otherwise the bindings / listeners are deleted by the garbage collector.", "author": "tobiasdiez", "createdAt": "2020-06-16T10:02:39Z", "path": "src/main/java/org/jabref/gui/maintable/MainTableDataModel.java", "diffHunk": "@@ -26,20 +26,23 @@\n import com.tobiasdiez.easybind.EasyBind;\n \n public class MainTableDataModel {\n-    private final FilteredList<BibEntryTableViewModel> entriesFiltered;", "originalCommit": "4c457f34be32d0d24f6bef60c1fbf5e782d63035", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDczNzM4NA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r440737384", "bodyText": "I think the suffix LatexFree can be removed again (since this is implicitly included in \"format\")", "author": "tobiasdiez", "createdAt": "2020-06-16T10:07:15Z", "path": "src/main/java/org/jabref/gui/maintable/MainTableFieldValueFormatter.java", "diffHunk": "@@ -0,0 +1,87 @@\n+package org.jabref.gui.maintable;\n+\n+import java.util.Optional;\n+\n+import org.jabref.model.database.BibDatabase;\n+import org.jabref.model.database.BibDatabaseContext;\n+import org.jabref.model.entry.AuthorList;\n+import org.jabref.model.entry.BibEntry;\n+import org.jabref.model.entry.field.Field;\n+import org.jabref.model.entry.field.FieldProperty;\n+import org.jabref.model.entry.field.OrFields;\n+import org.jabref.preferences.PreferencesService;\n+\n+import static org.jabref.gui.maintable.MainTableNameFormatPreferences.AbbreviationStyle;\n+import static org.jabref.gui.maintable.MainTableNameFormatPreferences.DisplayStyle;\n+\n+public class MainTableFieldValueFormatter {\n+    private final DisplayStyle displayStyle;\n+    private final AbbreviationStyle abbreviationStyle;\n+    private final BibDatabase bibDatabase;\n+\n+    MainTableFieldValueFormatter(PreferencesService preferences, BibDatabaseContext bibDatabaseContext) {\n+        MainTableNameFormatPreferences nameFormatPreferences = preferences.getMainTableNameFormatPreferences();\n+        this.displayStyle = nameFormatPreferences.getDisplayStyle();\n+        this.abbreviationStyle = nameFormatPreferences.getAbbreviationStyle();\n+        this.bibDatabase = bibDatabaseContext.getDatabase();\n+    }\n+\n+    /**\n+     * Format fields for {@link BibEntryTableViewModel}, according to user preferences and with latex translated to\n+     * unicode if possible.\n+     *\n+     * @param fields the fields argument of {@link BibEntryTableViewModel#getFields(OrFields)}.\n+     * @param entry the BibEntry of {@link BibEntryTableViewModel}.\n+     * @return The formatted name field.\n+     */\n+    public String formatFieldsValuesLatexFree(final OrFields fields, final BibEntry entry) {", "originalCommit": "4c457f34be32d0d24f6bef60c1fbf5e782d63035", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk0MzI1Ng==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r440943256", "bodyText": "Sure! The prefix is removed from the methods of MainTableFieldValueFormatter", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-06-16T15:29:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDczNzM4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc0MDM4OQ==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r440740389", "bodyText": "I would handle the AS_IS case already here\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (field.getProperties().contains(FieldProperty.PERSON_NAMES)) {\n          \n          \n            \n                        if (field.getProperties().contains(FieldProperty.PERSON_NAMES) && displayStyle != DisplayStyle.AS_IS) {\n          \n      \n    \n    \n  \n\nThis has a slightly better performance and you don't need to store the original string in the AuthorList.", "author": "tobiasdiez", "createdAt": "2020-06-16T10:12:46Z", "path": "src/main/java/org/jabref/gui/maintable/MainTableFieldValueFormatter.java", "diffHunk": "@@ -0,0 +1,87 @@\n+package org.jabref.gui.maintable;\n+\n+import java.util.Optional;\n+\n+import org.jabref.model.database.BibDatabase;\n+import org.jabref.model.database.BibDatabaseContext;\n+import org.jabref.model.entry.AuthorList;\n+import org.jabref.model.entry.BibEntry;\n+import org.jabref.model.entry.field.Field;\n+import org.jabref.model.entry.field.FieldProperty;\n+import org.jabref.model.entry.field.OrFields;\n+import org.jabref.preferences.PreferencesService;\n+\n+import static org.jabref.gui.maintable.MainTableNameFormatPreferences.AbbreviationStyle;\n+import static org.jabref.gui.maintable.MainTableNameFormatPreferences.DisplayStyle;\n+\n+public class MainTableFieldValueFormatter {\n+    private final DisplayStyle displayStyle;\n+    private final AbbreviationStyle abbreviationStyle;\n+    private final BibDatabase bibDatabase;\n+\n+    MainTableFieldValueFormatter(PreferencesService preferences, BibDatabaseContext bibDatabaseContext) {\n+        MainTableNameFormatPreferences nameFormatPreferences = preferences.getMainTableNameFormatPreferences();\n+        this.displayStyle = nameFormatPreferences.getDisplayStyle();\n+        this.abbreviationStyle = nameFormatPreferences.getAbbreviationStyle();\n+        this.bibDatabase = bibDatabaseContext.getDatabase();\n+    }\n+\n+    /**\n+     * Format fields for {@link BibEntryTableViewModel}, according to user preferences and with latex translated to\n+     * unicode if possible.\n+     *\n+     * @param fields the fields argument of {@link BibEntryTableViewModel#getFields(OrFields)}.\n+     * @param entry the BibEntry of {@link BibEntryTableViewModel}.\n+     * @return The formatted name field.\n+     */\n+    public String formatFieldsValuesLatexFree(final OrFields fields, final BibEntry entry) {\n+        for (Field field : fields) {\n+            if (field.getProperties().contains(FieldProperty.PERSON_NAMES)) {", "originalCommit": "4c457f34be32d0d24f6bef60c1fbf5e782d63035", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk0NDAxNA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r440944014", "bodyText": "Yupp, you are right. I tunnel visioned a bit too much while making the changes =/", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-06-16T15:30:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc0MDM4OQ=="}], "type": "inlineReview"}, {"oid": "d183705a35b8f2615dde23a6569b7aa6ce0c7e7e", "url": "https://github.com/JabRef/jabref/commit/d183705a35b8f2615dde23a6569b7aa6ce0c7e7e", "message": "Fix that removes \"LatexFree\" when it is implied", "committedDate": "2020-06-16T13:25:29Z", "type": "commit"}, {"oid": "431811a667ee43c4c9bb4d148547075a5e424e8c", "url": "https://github.com/JabRef/jabref/commit/431811a667ee43c4c9bb4d148547075a5e424e8c", "message": "Fix that restores class variable `entriesFiltered`", "committedDate": "2020-06-16T14:46:26Z", "type": "commit"}, {"oid": "8ad3aaf0fa7c38270c05c381c239a79cb5ff1329", "url": "https://github.com/JabRef/jabref/commit/8ad3aaf0fa7c38270c05c381c239a79cb5ff1329", "message": "Fix handling of DisplayStyle.AS_IS\n\nCo-authored-by: Tobias Diez <tobiasdiez@gmx.de>", "committedDate": "2020-06-16T14:55:01Z", "type": "commit"}, {"oid": "a81f1e94ea9af35eaa0719272a6abd7310e09a5e", "url": "https://github.com/JabRef/jabref/commit/a81f1e94ea9af35eaa0719272a6abd7310e09a5e", "message": "Drop AuthorList caching of unformatted string", "committedDate": "2020-06-16T15:00:49Z", "type": "commit"}, {"oid": "c55b1b6a739e4bec6828bfb2e6c11a688f7f6cd0", "url": "https://github.com/JabRef/jabref/commit/c55b1b6a739e4bec6828bfb2e6c11a688f7f6cd0", "message": "Merge branch 'fix-for-issue-6459' of https://github.com/k3KAW8Pnf7mkmdSMPHz27/jabref into fix-for-issue-6459", "committedDate": "2020-06-16T15:03:29Z", "type": "commit"}, {"oid": "c8380a8b886cded03c2915a265248e1767e6975f", "url": "https://github.com/JabRef/jabref/commit/c8380a8b886cded03c2915a265248e1767e6975f", "message": "Merge branch 'master' into fix-for-issue-6459", "committedDate": "2020-06-16T15:13:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk2MTEyMA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r440961120", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return `true` iff the other object is an AuthorList, all Authors are in the same order, and all Authors field\n          \n          \n            \n                 * @return `true` iff the other object is an AuthorList, all contained authors are in the same order (and these authors are `String.equal`)", "author": "koppor", "createdAt": "2020-06-16T15:53:50Z", "path": "src/main/java/org/jabref/model/entry/AuthorList.java", "diffHunk": "@@ -647,10 +566,14 @@ public String getAsFirstLastNamesLatexFree(boolean abbreviate, boolean oxfordCom\n     /**\n      * Compare this object with the given one.\n      * <p>\n-     * Will return true iff the other object is an Author and all fields are identical on a string comparison.\n+     * @return `true` iff the other object is an AuthorList, all Authors are in the same order, and all Authors field", "originalCommit": "c55b1b6a739e4bec6828bfb2e6c11a688f7f6cd0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDI5Mg==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r441074292", "bodyText": "I'd suggest changing the parenthesis to \"(and these authors' fields are Objects.equals)\"?\nI'll update the JavaDoc in Author.java as well.", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-06-16T18:56:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk2MTEyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA4MTg1OA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r441081858", "bodyText": "Good idea!\nI already commited the change to checkstyle.xml.\nAfter that udpate, this PR is good to go.", "author": "koppor", "createdAt": "2020-06-16T19:10:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk2MTEyMA=="}], "type": "inlineReview"}, {"oid": "6155e14f0d00d33db35c559aefe643f2ad20956e", "url": "https://github.com/JabRef/jabref/commit/6155e14f0d00d33db35c559aefe643f2ad20956e", "message": "Add `MainTableFieldValueFormatter` to checkstyle", "committedDate": "2020-06-16T18:47:07Z", "type": "commit"}, {"oid": "1eeddaba779882b9f7e14fdbfadea26798723334", "url": "https://github.com/JabRef/jabref/commit/1eeddaba779882b9f7e14fdbfadea26798723334", "message": "Add MainTableFieldValueFormatter to exclusion list", "committedDate": "2020-06-16T18:52:06Z", "type": "commit"}, {"oid": "2ff9553b6ed17a7c2060d8dab82bc45d789536cd", "url": "https://github.com/JabRef/jabref/commit/2ff9553b6ed17a7c2060d8dab82bc45d789536cd", "message": "Fix JavaDoc for `Author.equals`", "committedDate": "2020-06-16T19:08:26Z", "type": "commit"}, {"oid": "2396fb2a779d18d46525998c2c52ca4a8c112d78", "url": "https://github.com/JabRef/jabref/commit/2396fb2a779d18d46525998c2c52ca4a8c112d78", "message": "Revert \"Add `MainTableFieldValueFormatter` to ...\"\n\nThis reverts commit 6155e14f", "committedDate": "2020-06-16T19:09:34Z", "type": "commit"}, {"oid": "b16d457f84d2f3434252120df900adf2f95e58de", "url": "https://github.com/JabRef/jabref/commit/b16d457f84d2f3434252120df900adf2f95e58de", "message": "Merge branch 'fix-for-issue-6459' of https://github.com/k3KAW8Pnf7mkmdSMPHz27/jabref into fix-for-issue-6459", "committedDate": "2020-06-16T19:10:05Z", "type": "commit"}, {"oid": "a9e4f72b633628d3e9ca0279eeff3c3c621edaa7", "url": "https://github.com/JabRef/jabref/commit/a9e4f72b633628d3e9ca0279eeff3c3c621edaa7", "message": "Fix JavaDoc description of AuthorList.equals\n\nCo-authored-by: Oliver Kopp <kopp.dev@gmail.com>", "committedDate": "2020-06-16T19:13:49Z", "type": "commit"}, {"oid": "d7d692eaab28f3fff3455cb2154c41278f7c1349", "url": "https://github.com/JabRef/jabref/commit/d7d692eaab28f3fff3455cb2154c41278f7c1349", "message": "Merge branch 'fix-for-issue-6459' of https://github.com/k3KAW8Pnf7mkmdSMPHz27/jabref into fix-for-issue-6459", "committedDate": "2020-06-16T19:14:11Z", "type": "commit"}, {"oid": "0c0e77701566a73c991d03157d7cfbceb101ed49", "url": "https://github.com/JabRef/jabref/commit/0c0e77701566a73c991d03157d7cfbceb101ed49", "message": "Fix JavaDoc adherence with Author.equals", "committedDate": "2020-06-16T19:15:42Z", "type": "commit"}, {"oid": "fd405cf1600bb2fb4225c3fef34cfd3580b04e75", "url": "https://github.com/JabRef/jabref/commit/fd405cf1600bb2fb4225c3fef34cfd3580b04e75", "message": "Fix Pattern.compile for frequently used regexes", "committedDate": "2020-05-13T15:06:51Z", "type": "commit"}, {"oid": "a6354e39e96938e731f59e166c876d9fe32432a6", "url": "https://github.com/JabRef/jabref/commit/a6354e39e96938e731f59e166c876d9fe32432a6", "message": "Fix one additional Pattern.compile", "committedDate": "2020-05-13T17:07:16Z", "type": "commit"}, {"oid": "149ed4f18e55d451b6335f6740e9a70b84cf221b", "url": "https://github.com/JabRef/jabref/commit/149ed4f18e55d451b6335f6740e9a70b84cf221b", "message": "Fix style and unnecessary escape sequences", "committedDate": "2020-05-13T17:09:49Z", "type": "commit"}, {"oid": "b57f1b2e970fc30f41cd6e307863f10d93e4e1f8", "url": "https://github.com/JabRef/jabref/commit/b57f1b2e970fc30f41cd6e307863f10d93e4e1f8", "message": "Fix invalid index in call to substring\n\nThe original condition is evaluated to false.\nThe substring is shorter than \"uni\".", "committedDate": "2020-05-13T17:13:16Z", "type": "commit"}, {"oid": "fae093bb05f79ea69ffca36abf96cc237aa1931e", "url": "https://github.com/JabRef/jabref/commit/fae093bb05f79ea69ffca36abf96cc237aa1931e", "message": "Refactor name and javadoc of a regex", "committedDate": "2020-05-13T17:34:21Z", "type": "commit"}, {"oid": "5a23a9a09c485f5beefbb8607d3bcb86d3d659a3", "url": "https://github.com/JabRef/jabref/commit/5a23a9a09c485f5beefbb8607d3bcb86d3d659a3", "message": "Fix use of compiled regex for matching department", "committedDate": "2020-05-13T17:35:52Z", "type": "commit"}, {"oid": "6af8c7e3549eca925967476c737e919a990d4f01", "url": "https://github.com/JabRef/jabref/commit/6af8c7e3549eca925967476c737e919a990d4f01", "message": "Fix check for uppercase letter\n\nPerhaps the assumption should be that the letters are ASCII.\nIf all letters are ASCII checking 'A' <= k.charAt(0) <= 'Z'\nmight make more sense.\nI am not convinced about doing this with a regex.", "committedDate": "2020-05-13T17:38:41Z", "type": "commit"}, {"oid": "716f885e97a49433853aeb0c73064e7d25a4faae", "url": "https://github.com/JabRef/jabref/commit/716f885e97a49433853aeb0c73064e7d25a4faae", "message": "Fix usage of uncompiled regex", "committedDate": "2020-05-13T19:06:24Z", "type": "commit"}, {"oid": "cdfd56a1b2f50f9b781e7129e45dc3d9e61c1967", "url": "https://github.com/JabRef/jabref/commit/cdfd56a1b2f50f9b781e7129e45dc3d9e61c1967", "message": "Fix readability?", "committedDate": "2020-05-13T20:44:59Z", "type": "commit"}, {"oid": "b227edb72040f1e3b5184d35faa9bea24dd4429e", "url": "https://github.com/JabRef/jabref/commit/b227edb72040f1e3b5184d35faa9bea24dd4429e", "message": "Add test cases\n\nBoth test cases involves an author name containing department or school\n without university or institute of technology.", "committedDate": "2020-05-13T21:25:52Z", "type": "commit"}, {"oid": "ef7f9798339d53f28e64c7801dab0eb0b6099724", "url": "https://github.com/JabRef/jabref/commit/ef7f9798339d53f28e64c7801dab0eb0b6099724", "message": "Fix `null` appearing as part of author name\n\nCorporate authors without university/institute of technology", "committedDate": "2020-05-13T21:29:12Z", "type": "commit"}, {"oid": "9ac3993cb84e814ef3318ab12bf79461a6c1a84b", "url": "https://github.com/JabRef/jabref/commit/9ac3993cb84e814ef3318ab12bf79461a6c1a84b", "message": "Refactor name of capital regex pattern", "committedDate": "2020-05-14T12:57:07Z", "type": "commit"}, {"oid": "85c96ceecd81f2b43c2eb2480ab37ab07b97f062", "url": "https://github.com/JabRef/jabref/commit/85c96ceecd81f2b43c2eb2480ab37ab07b97f062", "message": "Merge branch 'master' into fix-for-issue-6459\n\n# Conflicts:\n#\tsrc/main/java/org/jabref/logic/bibtexkeypattern/BracketedPattern.java", "committedDate": "2020-05-15T17:23:13Z", "type": "commit"}, {"oid": "6ded410cdfc14fd4100080face795204a07e25bd", "url": "https://github.com/JabRef/jabref/commit/6ded410cdfc14fd4100080face795204a07e25bd", "message": "Add debug output for reordering of names in fields", "committedDate": "2020-05-15T18:50:20Z", "type": "commit"}, {"oid": "e8c3007c7160d02e7c730683131ea57636728927", "url": "https://github.com/JabRef/jabref/commit/e8c3007c7160d02e7c730683131ea57636728927", "message": "Merge branch 'master' into fix-for-issue-6459", "committedDate": "2020-05-18T18:02:38Z", "type": "commit"}, {"oid": "72eb1fe361426bf5d46679ccea1330487ad49b9d", "url": "https://github.com/JabRef/jabref/commit/72eb1fe361426bf5d46679ccea1330487ad49b9d", "message": "Add helper methods", "committedDate": "2020-05-18T19:33:11Z", "type": "commit"}, {"oid": "2eee8dd9768091649c7ca815beed10b161f6c6e5", "url": "https://github.com/JabRef/jabref/commit/2eee8dd9768091649c7ca815beed10b161f6c6e5", "message": "Fix missing negation in \"uni\" matching", "committedDate": "2020-05-18T20:31:10Z", "type": "commit"}, {"oid": "cc540298ab5ddceb0ed3b85599817ff3cd862a2f", "url": "https://github.com/JabRef/jabref/commit/cc540298ab5ddceb0ed3b85599817ff3cd862a2f", "message": "Fix test cases for corporate authors", "committedDate": "2020-05-18T20:33:54Z", "type": "commit"}, {"oid": "1063ae1c721def7edcf845a942c97575f825eb1e", "url": "https://github.com/JabRef/jabref/commit/1063ae1c721def7edcf845a942c97575f825eb1e", "message": "Fix to keep all uppercase letters in abbreviation", "committedDate": "2020-05-19T13:56:29Z", "type": "commit"}, {"oid": "ef94758a932e3dd171530352aa48551dbaa107cf", "url": "https://github.com/JabRef/jabref/commit/ef94758a932e3dd171530352aa48551dbaa107cf", "message": "Fix commented out code", "committedDate": "2020-05-19T14:06:52Z", "type": "commit"}, {"oid": "e80bd8be5e8dd9f5d3f60a189b862ea7579047bb", "url": "https://github.com/JabRef/jabref/commit/e80bd8be5e8dd9f5d3f60a189b862ea7579047bb", "message": "Fix key for institution's name containing keyword\n\nIf the name of an institution can't be split, assume that\n\"School\"/\"Department\" is part of the name.", "committedDate": "2020-05-19T14:54:30Z", "type": "commit"}, {"oid": "a0ed455bd7d164fd37d30dcbcbd9abfe0d4f02eb", "url": "https://github.com/JabRef/jabref/commit/a0ed455bd7d164fd37d30dcbcbd9abfe0d4f02eb", "message": "Fix test case for short institution name", "committedDate": "2020-05-19T15:10:15Z", "type": "commit"}, {"oid": "4db082435d021941ada53c8091de5786dac38480", "url": "https://github.com/JabRef/jabref/commit/4db082435d021941ada53c8091de5786dac38480", "message": "Refactor check for institution types", "committedDate": "2020-05-19T15:11:35Z", "type": "commit"}, {"oid": "383fc14680a90c8d77e8739e60ce9f6294895812", "url": "https://github.com/JabRef/jabref/commit/383fc14680a90c8d77e8739e60ce9f6294895812", "message": "Refactor comments and names improving readability?", "committedDate": "2020-05-19T15:28:13Z", "type": "commit"}, {"oid": "c3e5f097f843288a4aa38d833062c8384c2880f1", "url": "https://github.com/JabRef/jabref/commit/c3e5f097f843288a4aa38d833062c8384c2880f1", "message": "Refactor to improve readability and closure", "committedDate": "2020-05-19T15:39:37Z", "type": "commit"}, {"oid": "5990c2a248f63283cd676449c4f89f63968baf2a", "url": "https://github.com/JabRef/jabref/commit/5990c2a248f63283cd676449c4f89f63968baf2a", "message": "Fix JavaDoc\n\nMinor typos and the \"rest\" part is now created differently.", "committedDate": "2020-05-19T16:00:04Z", "type": "commit"}, {"oid": "0df3cdbdf6730ae2d82c8fb2c0d9e7ca3e3cd683", "url": "https://github.com/JabRef/jabref/commit/0df3cdbdf6730ae2d82c8fb2c0d9e7ca3e3cd683", "message": "Fix JavaDoc typos", "committedDate": "2020-05-19T16:02:15Z", "type": "commit"}, {"oid": "f0d9601b9d479a7ec2fb72e4df5ba638f3260fb5", "url": "https://github.com/JabRef/jabref/commit/f0d9601b9d479a7ec2fb72e4df5ba638f3260fb5", "message": "Fix preliminary order for authors -> latexfree", "committedDate": "2020-05-19T21:04:26Z", "type": "commit"}, {"oid": "6f26a736129aeb2002290cbaa1d65470b314c964", "url": "https://github.com/JabRef/jabref/commit/6f26a736129aeb2002290cbaa1d65470b314c964", "message": "Drop logger", "committedDate": "2020-05-19T21:12:39Z", "type": "commit"}, {"oid": "9b717c5b448bb18f26c872bc42207a142d491453", "url": "https://github.com/JabRef/jabref/commit/9b717c5b448bb18f26c872bc42207a142d491453", "message": "Add convenience methods for cached latexfree names", "committedDate": "2020-05-20T13:45:07Z", "type": "commit"}, {"oid": "5ed9c54abbac1b632d7500e78cda8649268e6b6f", "url": "https://github.com/JabRef/jabref/commit/5ed9c54abbac1b632d7500e78cda8649268e6b6f", "message": "Add name format method for names containing latex", "committedDate": "2020-05-20T13:48:04Z", "type": "commit"}, {"oid": "d6e9e7035c198199a0ca4ac7b7adf9d8679ecece", "url": "https://github.com/JabRef/jabref/commit/d6e9e7035c198199a0ca4ac7b7adf9d8679ecece", "message": "Add call to formatNameLatexFree", "committedDate": "2020-05-20T13:51:22Z", "type": "commit"}, {"oid": "2dc664de4522dd58c0e427a3c03172a9ebb22134", "url": "https://github.com/JabRef/jabref/commit/2dc664de4522dd58c0e427a3c03172a9ebb22134", "message": "Fix unclear statement in JavaDoc", "committedDate": "2020-05-20T14:42:58Z", "type": "commit"}, {"oid": "f0fd4f1cb84007b0cb7e490313d68b5db217519f", "url": "https://github.com/JabRef/jabref/commit/f0fd4f1cb84007b0cb7e490313d68b5db217519f", "message": "Fix to only keep the first character of each word\n\nThere are some examples that will turn out wrong if only capital letters\n are kept, e.g., \"iOS Developer University Program\".\n The original problem with \"The School of Life\" becoming too short is\n avoided by only removing school/department for names containing two or\n  more ',' separated strings. This will still produce an unexpected\n   result if the address of the institution is part of the authors field", "committedDate": "2020-05-20T17:47:10Z", "type": "commit"}, {"oid": "feebf8152671d0d212c1fbdf0e744fbaefe3f1e9", "url": "https://github.com/JabRef/jabref/commit/feebf8152671d0d212c1fbdf0e744fbaefe3f1e9", "message": "Add latexfree Natbib test cases", "committedDate": "2020-05-21T22:14:36Z", "type": "commit"}, {"oid": "d4c2ce38c48e8af98ecf2a0e70dd763d540a3352", "url": "https://github.com/JabRef/jabref/commit/d4c2ce38c48e8af98ecf2a0e70dd763d540a3352", "message": "Fix typo in latex-free test cases", "committedDate": "2020-05-21T22:17:39Z", "type": "commit"}, {"oid": "04abe5e45fa5d01edb2f4c358907759326fa1e14", "url": "https://github.com/JabRef/jabref/commit/04abe5e45fa5d01edb2f4c358907759326fa1e14", "message": "Add Natbib test with escaped brackets", "committedDate": "2020-05-22T13:08:46Z", "type": "commit"}, {"oid": "3f3ef6270fb4461a92a9cd3de0dc2ddfe4196e11", "url": "https://github.com/JabRef/jabref/commit/3f3ef6270fb4461a92a9cd3de0dc2ddfe4196e11", "message": "Add Natbib institution test with escaped brackets", "committedDate": "2020-05-22T13:26:26Z", "type": "commit"}, {"oid": "f4fbec134bc6de3e3dad7756df021b1b0f49e54d", "url": "https://github.com/JabRef/jabref/commit/f4fbec134bc6de3e3dad7756df021b1b0f49e54d", "message": "Add test for latex-free comma separated lastnames", "committedDate": "2020-05-22T13:43:08Z", "type": "commit"}, {"oid": "a256fa810abc0ae03d1175a03b769c9e579fb466", "url": "https://github.com/JabRef/jabref/commit/a256fa810abc0ae03d1175a03b769c9e579fb466", "message": "Add test for latex-free comma separated first name\n\nFirst name first and abbreviated first name first", "committedDate": "2020-05-22T14:08:06Z", "type": "commit"}, {"oid": "4961c534e9feae10a213f82a1a4a1f1c4b058078", "url": "https://github.com/JabRef/jabref/commit/4961c534e9feae10a213f82a1a4a1f1c4b058078", "message": "Add test for latex-free comma separated last name\n\nLast name first and abbreviated first names", "committedDate": "2020-05-22T14:21:17Z", "type": "commit"}, {"oid": "a443db07282ee198365dc080fdbd3faaca603b1c", "url": "https://github.com/JabRef/jabref/commit/a443db07282ee198365dc080fdbd3faaca603b1c", "message": "Fix adherence to JavaDoc and readability(?)", "committedDate": "2020-05-22T14:46:55Z", "type": "commit"}, {"oid": "dd492e61922a89717f984e9f00d585d980ab7617", "url": "https://github.com/JabRef/jabref/commit/dd492e61922a89717f984e9f00d585d980ab7617", "message": "Fix readability(?)", "committedDate": "2020-05-22T18:01:33Z", "type": "commit"}, {"oid": "71e45d48e9b2d4c0ffd997044fc6873094cce19d", "url": "https://github.com/JabRef/jabref/commit/71e45d48e9b2d4c0ffd997044fc6873094cce19d", "message": "Fix CheckStyle issues\n\nThe deprecated static methods BibtexKeyGenerator.generateKey are moved\nto the test file as a similar convenience method is required for\nthe test cases. Suppress warning has been added for some methods.", "committedDate": "2020-05-22T20:12:33Z", "type": "commit"}, {"oid": "2748dcd5962d7cca651f9d7223e2278396cdafe7", "url": "https://github.com/JabRef/jabref/commit/2748dcd5962d7cca651f9d7223e2278396cdafe7", "message": "Merge branch 'master' into fix-for-issue-6459", "committedDate": "2020-05-22T20:23:27Z", "type": "commit"}, {"oid": "3b0dda3af6bd2d3ea90dad99f73c0377d1af603c", "url": "https://github.com/JabRef/jabref/commit/3b0dda3af6bd2d3ea90dad99f73c0377d1af603c", "message": "Fix CHANGELOG.md", "committedDate": "2020-05-22T20:29:55Z", "type": "commit"}, {"oid": "78b66f7d9206224c7b48f70baee1219eeed7e6d4", "url": "https://github.com/JabRef/jabref/commit/78b66f7d9206224c7b48f70baee1219eeed7e6d4", "message": "Fix mistake in BibtexKeyGeneratorTest\n\ngenerateKey was not copy-pasted properly.", "committedDate": "2020-05-22T20:45:20Z", "type": "commit"}, {"oid": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "url": "https://github.com/JabRef/jabref/commit/55ef8e7bede442fe2de7ab5c453d067205e0befc", "message": "Add test for oxford comma", "committedDate": "2020-05-24T14:40:59Z", "type": "commit"}, {"oid": "237dc35c4e4723a0c5a3df330a9c8b88503114a4", "url": "https://github.com/JabRef/jabref/commit/237dc35c4e4723a0c5a3df330a9c8b88503114a4", "message": "Merge branch 'master' into fix-for-issue-6459", "committedDate": "2020-05-26T12:10:03Z", "type": "commit"}, {"oid": "78fade6b39a45e537932f6ab029795193db7435d", "url": "https://github.com/JabRef/jabref/commit/78fade6b39a45e537932f6ab029795193db7435d", "message": "Fix miss-capitalization of enum", "committedDate": "2020-05-26T13:15:06Z", "type": "commit"}, {"oid": "3de984dcfe2956ef77060f47946a1f007cbee3f5", "url": "https://github.com/JabRef/jabref/commit/3de984dcfe2956ef77060f47946a1f007cbee3f5", "message": "Fix fields not displayed latex-free", "committedDate": "2020-05-26T18:53:45Z", "type": "commit"}, {"oid": "ecac6732788879ed2d2898e48af081fa7397bbfc", "url": "https://github.com/JabRef/jabref/commit/ecac6732788879ed2d2898e48af081fa7397bbfc", "message": "Fix in-line methods in MainTableNameFormatter", "committedDate": "2020-05-26T19:04:30Z", "type": "commit"}, {"oid": "1c4928bbd3b3b051943bccd54e3c88c76231b7d4", "url": "https://github.com/JabRef/jabref/commit/1c4928bbd3b3b051943bccd54e3c88c76231b7d4", "message": "Fix in-line of generateKey() method", "committedDate": "2020-05-26T20:24:26Z", "type": "commit"}, {"oid": "55f3f1826287d14d73c924719f32c92ad6dde713", "url": "https://github.com/JabRef/jabref/commit/55f3f1826287d14d73c924719f32c92ad6dde713", "message": "Fix separating tests into parsing/representation", "committedDate": "2020-05-26T21:28:40Z", "type": "commit"}, {"oid": "e6cda69de72610e492f8623df8d8fd44768fe74c", "url": "https://github.com/JabRef/jabref/commit/e6cda69de72610e492f8623df8d8fd44768fe74c", "message": "Fix cache check and simplify expressions", "committedDate": "2020-05-26T21:32:46Z", "type": "commit"}, {"oid": "2e120fd8b242958c8da3cc6032c97c5dfc1d66d0", "url": "https://github.com/JabRef/jabref/commit/2e120fd8b242958c8da3cc6032c97c5dfc1d66d0", "message": "Drop inlined methods", "committedDate": "2020-05-26T21:33:35Z", "type": "commit"}, {"oid": "8cc947c23f53087b97a05265a9d735e37cabc689", "url": "https://github.com/JabRef/jabref/commit/8cc947c23f53087b97a05265a9d735e37cabc689", "message": "Fix most abbreviated abbreviations", "committedDate": "2020-05-26T21:45:17Z", "type": "commit"}, {"oid": "2fc9e169282e5f5d9d2b0d1a8b5db452521afac2", "url": "https://github.com/JabRef/jabref/commit/2fc9e169282e5f5d9d2b0d1a8b5db452521afac2", "message": "Drop old formatName method", "committedDate": "2020-05-27T17:43:56Z", "type": "commit"}, {"oid": "b4b39937134920e0adc0947d44183fa476190248", "url": "https://github.com/JabRef/jabref/commit/b4b39937134920e0adc0947d44183fa476190248", "message": "Refactor formatNameLatexFree\n\nThe author list parsing is moved outside of the if/else statements", "committedDate": "2020-05-27T17:45:23Z", "type": "commit"}, {"oid": "3cb62328bac5bc0dcf48de337de097aee5c54dd9", "url": "https://github.com/JabRef/jabref/commit/3cb62328bac5bc0dcf48de337de097aee5c54dd9", "message": "Refactor new parse tests", "committedDate": "2020-05-27T17:48:08Z", "type": "commit"}, {"oid": "b3f0d1bbecd6ec1f9de572cb2570b770cd0bd84a", "url": "https://github.com/JabRef/jabref/commit/b3f0d1bbecd6ec1f9de572cb2570b770cd0bd84a", "message": "Add more parse tests", "committedDate": "2020-05-27T21:12:20Z", "type": "commit"}, {"oid": "5a27bbca52dd44d563d81d876a6f7b22f3a49ad6", "url": "https://github.com/JabRef/jabref/commit/5a27bbca52dd44d563d81d876a6f7b22f3a49ad6", "message": "Drop all test cases containing escaped brackets", "committedDate": "2020-05-27T21:28:28Z", "type": "commit"}, {"oid": "c7578b37f605085afb23068d4a615435cef661b4", "url": "https://github.com/JabRef/jabref/commit/c7578b37f605085afb23068d4a615435cef661b4", "message": "Refactor parse with latex tests\n\nMove them close to other parse tests", "committedDate": "2020-05-27T21:31:13Z", "type": "commit"}, {"oid": "b8bf4f374d70dedd9036b5f7ad24edf642f36fae", "url": "https://github.com/JabRef/jabref/commit/b8bf4f374d70dedd9036b5f7ad24edf642f36fae", "message": "Fix my own spelling mistakes", "committedDate": "2020-05-27T21:35:08Z", "type": "commit"}, {"oid": "cc23e29b0c205df2a0f135a80d896cfa4d8cc7ea", "url": "https://github.com/JabRef/jabref/commit/cc23e29b0c205df2a0f135a80d896cfa4d8cc7ea", "message": "Refactor abbreviation name", "committedDate": "2020-05-28T14:14:57Z", "type": "commit"}, {"oid": "24398b426fb9c4dcf83c78117db694f77783e35f", "url": "https://github.com/JabRef/jabref/commit/24398b426fb9c4dcf83c78117db694f77783e35f", "message": "Add latex-free unformatted authors' strings", "committedDate": "2020-05-29T15:05:10Z", "type": "commit"}, {"oid": "5308717147316e12480a6edffecc76db473e3e7f", "url": "https://github.com/JabRef/jabref/commit/5308717147316e12480a6edffecc76db473e3e7f", "message": "Add test for latex-free unformatted authors\n\nSame as for all others", "committedDate": "2020-05-29T15:05:53Z", "type": "commit"}, {"oid": "b2b523cc521f96495231626b79ab37d6cabdb19b", "url": "https://github.com/JabRef/jabref/commit/b2b523cc521f96495231626b79ab37d6cabdb19b", "message": "Merge branch 'master' into fix-for-issue-6459\n\n# Conflicts:\n#\tsrc/main/java/org/jabref/gui/maintable/BibEntryTableViewModel.java\n#\tsrc/main/java/org/jabref/gui/maintable/MainTableNameFormatter.java\n#\tsrc/main/java/org/jabref/model/entry/AuthorList.java\n#\tsrc/test/java/org/jabref/model/entry/AuthorListTest.java", "committedDate": "2020-05-29T15:28:11Z", "type": "commit"}, {"oid": "94a46e2802b2e817030c4d9dbe387351794b202c", "url": "https://github.com/JabRef/jabref/commit/94a46e2802b2e817030c4d9dbe387351794b202c", "message": "Add change to CHANGELOG.md", "committedDate": "2020-05-29T17:51:21Z", "type": "commit"}, {"oid": "539c6167fc7f4a378adf59453455a22b398c75ab", "url": "https://github.com/JabRef/jabref/commit/539c6167fc7f4a378adf59453455a22b398c75ab", "message": "Revert \"Add change to CHANGELOG.md\"\n\nThis reverts commit 94a46e28", "committedDate": "2020-05-29T18:22:17Z", "type": "commit"}, {"oid": "476b5b8b3939348fa09c65241125e20d6be3eee9", "url": "https://github.com/JabRef/jabref/commit/476b5b8b3939348fa09c65241125e20d6be3eee9", "message": "Fix dependence on parse in test cases", "committedDate": "2020-06-01T17:00:09Z", "type": "commit"}, {"oid": "2642cb940ee4fbffc8f527a5b91b8b1ee9f016ae", "url": "https://github.com/JabRef/jabref/commit/2642cb940ee4fbffc8f527a5b91b8b1ee9f016ae", "message": "Add AuthorList cache tests", "committedDate": "2020-06-01T18:21:55Z", "type": "commit"}, {"oid": "4ecdbf84dd565f8db31423917d66979b079c854c", "url": "https://github.com/JabRef/jabref/commit/4ecdbf84dd565f8db31423917d66979b079c854c", "message": "Add AuthorList institution cache test\n\nSince the name of an institution can be used to create an `Author`\ndirectly it is the most likely `Author` to contain a reference to the\noriginal String object and create a memory leak.", "committedDate": "2020-06-01T18:51:02Z", "type": "commit"}, {"oid": "b18e60db4df5802ef2c034fb63cd08ac9adf7b15", "url": "https://github.com/JabRef/jabref/commit/b18e60db4df5802ef2c034fb63cd08ac9adf7b15", "message": "Fix readability in a test case", "committedDate": "2020-06-01T20:07:08Z", "type": "commit"}, {"oid": "7e840bcd972ce4584eea3e9009e00326caf2164d", "url": "https://github.com/JabRef/jabref/commit/7e840bcd972ce4584eea3e9009e00326caf2164d", "message": "Fix readability and memory leak", "committedDate": "2020-06-01T20:09:06Z", "type": "commit"}, {"oid": "2bfbd71eb36c4f6dcd916126ed733d734bbf116b", "url": "https://github.com/JabRef/jabref/commit/2bfbd71eb36c4f6dcd916126ed733d734bbf116b", "message": "Merge branch 'master' into fix-for-issue-6459", "committedDate": "2020-06-01T20:17:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ3NDIxOA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r433474218", "bodyText": "If the AuthorList is not created by the factory method parse, it was not created from a String and authorsUnformatted does not exist. An alternative would be to just throw an exception, currently that would just force the test cases to change.\nThere is a public constructor for AuthorList that is removable. The two protected constructors are also removable if AuthorListParser is made an inner class but I'd consider that detrimental to readability.", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-06-01T20:34:45Z", "path": "src/main/java/org/jabref/model/entry/AuthorList.java", "diffHunk": "@@ -653,6 +570,10 @@ public String getAsUnformattedLatexFree() {\n             return authorsUnformattedLatexFree;\n         }\n \n+        // The AuthorList was not created with the factory method\n+        if (authorsUnformatted == null) {\n+            authorsUnformatted = getAsFirstLastNamesWithAnd();\n+        }", "originalCommit": "7e840bcd972ce4584eea3e9009e00326caf2164d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a4cb1ef05f9c2434c910b8025d1b37b050cdc5ec", "url": "https://github.com/JabRef/jabref/commit/a4cb1ef05f9c2434c910b8025d1b37b050cdc5ec", "message": "Fix int flag, changed to enum", "committedDate": "2020-06-03T16:42:07Z", "type": "commit"}, {"oid": "ac8759bf00ee480809fa2372401db0e7bec00111", "url": "https://github.com/JabRef/jabref/commit/ac8759bf00ee480809fa2372401db0e7bec00111", "message": "Fix readability of TEX_NAMES set?", "committedDate": "2020-06-03T16:54:51Z", "type": "commit"}, {"oid": "cea4c5ec59234a0468af4317e0aec9f9e63a7c56", "url": "https://github.com/JabRef/jabref/commit/cea4c5ec59234a0468af4317e0aec9f9e63a7c56", "message": "Fix JavaDoc after flag changed from int to enum", "committedDate": "2020-06-03T17:45:52Z", "type": "commit"}, {"oid": "03a632cb4335a3f5558ef33e8389e0a99a860b8f", "url": "https://github.com/JabRef/jabref/commit/03a632cb4335a3f5558ef33e8389e0a99a860b8f", "message": "Fix AuthorList.equals\n\nUpdated JavaDoc and now checks if the other object is itself", "committedDate": "2020-06-03T18:26:11Z", "type": "commit"}, {"oid": "e22a0984c53fcd89562a68fae5f05077faed138d", "url": "https://github.com/JabRef/jabref/commit/e22a0984c53fcd89562a68fae5f05077faed138d", "message": "Fix abbreviation in JavaDoc", "committedDate": "2020-06-03T19:18:22Z", "type": "commit"}, {"oid": "0fd46d711eba1028aaad45119945e46cd252fef8", "url": "https://github.com/JabRef/jabref/commit/0fd46d711eba1028aaad45119945e46cd252fef8", "message": "Refactor name of tests for AuthorListParser", "committedDate": "2020-06-03T19:19:31Z", "type": "commit"}, {"oid": "d50c7cf297bde636e3297d8a0199b08dc22fcb91", "url": "https://github.com/JabRef/jabref/commit/d50c7cf297bde636e3297d8a0199b08dc22fcb91", "message": "Fix re-enable commented out tests", "committedDate": "2020-06-03T19:27:47Z", "type": "commit"}, {"oid": "4b389a63e72e4cdd95a352794cb1a6dbd1c3a3a8", "url": "https://github.com/JabRef/jabref/commit/4b389a63e72e4cdd95a352794cb1a6dbd1c3a3a8", "message": "Add test for first name starting with umlaut", "committedDate": "2020-06-03T19:28:15Z", "type": "commit"}, {"oid": "cd68f6cb2f4f7ffdda1c69c2c7df31fe81ce059d", "url": "https://github.com/JabRef/jabref/commit/cd68f6cb2f4f7ffdda1c69c2c7df31fe81ce059d", "message": "Fix update JavaDoc\n\nThe parser is intended to deal with a format that is not BibTeX but\nappears to be used in practice", "committedDate": "2020-06-03T19:29:49Z", "type": "commit"}, {"oid": "f3340b243bd13e8b8a64165c838d551267a9d9df", "url": "https://github.com/JabRef/jabref/commit/f3340b243bd13e8b8a64165c838d551267a9d9df", "message": "Fix unique names in test cases\n\nMake the unique names more realistic", "committedDate": "2020-06-03T19:52:30Z", "type": "commit"}, {"oid": "10fff4c7f75f64bf884a177fe1e830f8a7a8fbfd", "url": "https://github.com/JabRef/jabref/commit/10fff4c7f75f64bf884a177fe1e830f8a7a8fbfd", "message": "Fix a datastructure in AuthorListParser", "committedDate": "2020-06-03T20:04:56Z", "type": "commit"}, {"oid": "b5caec8871cd4aeb7b19df5039da15d7d6f1ba9d", "url": "https://github.com/JabRef/jabref/commit/b5caec8871cd4aeb7b19df5039da15d7d6f1ba9d", "message": "Fix typos", "committedDate": "2020-06-03T20:51:43Z", "type": "commit"}, {"oid": "fbe65013d786936fdcea582a01e2af5c73741a17", "url": "https://github.com/JabRef/jabref/commit/fbe65013d786936fdcea582a01e2af5c73741a17", "message": "Add missed oxford comma test cases", "committedDate": "2020-06-03T21:00:27Z", "type": "commit"}, {"oid": "7c4faa38b97701d6987437052faf912a8442fc78", "url": "https://github.com/JabRef/jabref/commit/7c4faa38b97701d6987437052faf912a8442fc78", "message": "Add test cases for equals", "committedDate": "2020-06-03T21:42:51Z", "type": "commit"}, {"oid": "e028993c5e4806217aa05ab685fb559ecbfb62f4", "url": "https://github.com/JabRef/jabref/commit/e028993c5e4806217aa05ab685fb559ecbfb62f4", "message": "Add more equals test cases", "committedDate": "2020-06-03T21:50:41Z", "type": "commit"}, {"oid": "a78460f3b599dbaf89a879b469fe1fcdbeb5d03a", "url": "https://github.com/JabRef/jabref/commit/a78460f3b599dbaf89a879b469fe1fcdbeb5d03a", "message": "Fix typo", "committedDate": "2020-06-03T21:51:02Z", "type": "commit"}, {"oid": "4abe8557b6013a87fdef6599ceb9e806dbc62f4a", "url": "https://github.com/JabRef/jabref/commit/4abe8557b6013a87fdef6599ceb9e806dbc62f4a", "message": "Add tests for `hashCode`", "committedDate": "2020-06-03T21:59:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTE4NTMzMA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r435185330", "bodyText": "In case the cache contains the author string, the new code has to search twice for its occurrence: once in containsKey and once in get. Performance wise it's better to use get once and then use a if (...==null) check.", "author": "tobiasdiez", "createdAt": "2020-06-04T11:32:42Z", "path": "src/main/java/org/jabref/model/entry/AuthorList.java", "diffHunk": "@@ -168,60 +164,16 @@ public AuthorList() {\n      * @param authors The string of authors or editors in bibtex format to parse.\n      * @return An AuthorList object representing the given authors.\n      */\n-    public static AuthorList parse(String authors) {\n+    public static AuthorList parse(final String authors) {\n         Objects.requireNonNull(authors);\n \n-        // Handle case names in order lastname, firstname and separated by \",\"\n-        // E.g., Ali Babar, M., Dings\u00f8yr, T., Lago, P., van der Vliet, H.\n-        final boolean authorsContainAND = authors.toUpperCase(Locale.ENGLISH).contains(\" AND \");\n-        final boolean authorsContainOpeningBrace = authors.contains(\"{\");\n-        final boolean authorsContainSemicolon = authors.contains(\";\");\n-        final boolean authorsContainTwoOrMoreCommas = (authors.length() - authors.replace(\",\", \"\").length()) >= 2;\n-        if (!authorsContainAND && !authorsContainOpeningBrace && !authorsContainSemicolon && authorsContainTwoOrMoreCommas) {\n-            List<String> arrayNameList = Arrays.asList(authors.split(\",\"));\n-\n-            // Delete spaces for correct case identification\n-            arrayNameList.replaceAll(String::trim);\n-\n-            // Looking for space between pre- and lastname\n-            boolean spaceInAllParts = arrayNameList.stream().filter(name -> name.contains(\" \")).collect(Collectors\n-                    .toList()).size() == arrayNameList.size();\n-\n-            // We hit the comma name separator case\n-            // Usually the getAsLastFirstNamesWithAnd method would separate them if pre- and lastname are separated with \"and\"\n-            // If not, we check if spaces separate pre- and lastname\n-            if (spaceInAllParts) {\n-                authors = authors.replaceAll(\",\", \" and\");\n-            } else {\n-                // Looking for name affixes to avoid\n-                // arrayNameList needs to reduce by the count off avoiding terms\n-                // valuePartsCount holds the count of name parts without the avoided terms\n-\n-                int valuePartsCount = arrayNameList.size();\n-                // Holds the index of each term which needs to be avoided\n-                Collection<Integer> avoidIndex = new HashSet<>();\n-\n-                for (int i = 0; i < arrayNameList.size(); i++) {\n-                    if (AVOID_TERMS_IN_LOWER_CASE.contains(arrayNameList.get(i).toLowerCase(Locale.ROOT))) {\n-                        avoidIndex.add(i);\n-                        valuePartsCount--;\n-                    }\n-                }\n-\n-                if ((valuePartsCount % 2) == 0) {\n-                    // We hit the described special case with name affix like Jr\n-                    authors = buildWithAffix(avoidIndex, arrayNameList).toString();\n-                }\n-            }\n-        }\n-\n-        AuthorList authorList = AUTHOR_CACHE.get(authors);\n-        if (authorList == null) {\n+        if (!AUTHOR_CACHE.containsKey(authors)) {", "originalCommit": "4abe8557b6013a87fdef6599ceb9e806dbc62f4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTE5MTU4NA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r435191584", "bodyText": "Usually you don't need to write tests for equals or hashCode. These methods are usually automatically generated by the IDE anyways. (You can keep the tests here, was just a general remark for next time).", "author": "tobiasdiez", "createdAt": "2020-06-04T11:45:06Z", "path": "src/test/java/org/jabref/model/entry/AuthorListTest.java", "diffHunk": "@@ -1152,4 +1273,70 @@ public void correctNamesWithOneComma() throws Exception {\n         expected = new Author(\"Jos\u00e9 Mar\u00eda\", \"J. M.\", null, \"Rodriguez Fernandez\", null);\n         assertEquals(new AuthorList(expected), AuthorList.parse(\"Rodriguez Fernandez, Jos\u00e9 Mar\u00eda\"));\n     }\n+\n+    @Test\n+    public void equalsFalseDifferentOrder() {", "originalCommit": "4abe8557b6013a87fdef6599ceb9e806dbc62f4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI1MTIyNA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r435251224", "bodyText": "Ok! General remarks are needed and appreciated! \ud83d\ude04", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-06-04T13:26:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTE5MTU4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTE5MzcxNw==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r435193717", "bodyText": "Your fix works but needs quite some changes. What about adding a test here \n  \n    \n      jabref/src/main/java/org/jabref/gui/maintable/BibEntryTableViewModel.java\n    \n    \n         Line 127\n      in\n      41678ce\n    \n    \n    \n    \n\n        \n          \n           if (field.getProperties().contains(FieldProperty.PERSON_NAMES)) { \n        \n    \n  \n\n\nthat makes sure that the complicated author parsing code is only invoked if the display style is not AS_IS? Should also do the trick, right?", "author": "tobiasdiez", "createdAt": "2020-06-04T11:49:42Z", "path": "src/main/java/org/jabref/gui/maintable/MainTableNameFormatter.java", "diffHunk": "@@ -37,7 +37,7 @@ public String formatNameLatexFree(final String nameToFormat) {\n \n         switch (nameFormatPreferences.getDisplayStyle()) {\n             case AS_IS:\n-                return nameToFormat;\n+                return authors.getAsUnformattedLatexFree();", "originalCommit": "4abe8557b6013a87fdef6599ceb9e806dbc62f4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU3ODE0Mw==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r435578143", "bodyText": "Checking AS_IS in\n\n\n  \n    \n      jabref/src/main/java/org/jabref/gui/maintable/BibEntryTableViewModel.java\n    \n    \n         Line 127\n      in\n      41678ce\n    \n    \n    \n    \n\n        \n          \n           if (field.getProperties().contains(FieldProperty.PERSON_NAMES)) { \n        \n    \n  \n\n\n\nwill indeed produce less code (and frankly, I didn't even think about that change). My argument for the current structure is to,\n\nlet MainTableNameFormatter handle the user's preferences,\nlet AuthorList handle all formatting/caching for authors.\n\nAnyway, I have updated with an attempt at the described changes!", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-06-04T22:04:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTE5MzcxNw=="}], "type": "inlineReview"}, {"oid": "551c6e2749ba6d215dd1caf2d670c74d764b63b2", "url": "https://github.com/JabRef/jabref/commit/551c6e2749ba6d215dd1caf2d670c74d764b63b2", "message": "Fix removes unnecessary call to `Map.contains`", "committedDate": "2020-06-04T13:24:56Z", "type": "commit"}, {"oid": "557ffc9fdf137350ef3738d6f02991bd00deab10", "url": "https://github.com/JabRef/jabref/commit/557ffc9fdf137350ef3738d6f02991bd00deab10", "message": "Drop caching of unformatted strings in AuthorList", "committedDate": "2020-06-04T22:03:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk1NjY3Mw==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r435956673", "bodyText": "The preferences are rather slow and this method is called for every row in the main table, so this will lead to performance problems. You can cache the getMainTableNameFormatPreferences as a class variable (initalized in the constructor).", "author": "tobiasdiez", "createdAt": "2020-06-05T14:23:42Z", "path": "src/main/java/org/jabref/gui/maintable/MainTableNameFormatter.java", "diffHunk": "@@ -51,4 +49,8 @@ public String formatNameLatexFree(final String nameToFormat) {\n                         false);\n         }\n     }\n+\n+    public boolean needsFormatting() {\n+        return preferencesService.getMainTableNameFormatPreferences().getDisplayStyle() != MainTableNameFormatPreferences.DisplayStyle.AS_IS;", "originalCommit": "557ffc9fdf137350ef3738d6f02991bd00deab10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk2MTAzMA==", "url": "https://github.com/JabRef/jabref/pull/6552#discussion_r435961030", "bodyText": "You raised a good point that the formatting should be handled by the nameFormatter.\nSuggestion: move the compete code of this if block to the name formatter. Then you can add the if check there, and keep the responsibility of the author formatting in that class.\nFor this the entry, field and database need to be passed to the formatNameLatexFree method (maybe pass the database already as a constructor element).", "author": "tobiasdiez", "createdAt": "2020-06-05T14:30:31Z", "path": "src/main/java/org/jabref/gui/maintable/BibEntryTableViewModel.java", "diffHunk": "@@ -124,7 +124,8 @@ public BibEntry getEntry() {\n \n         value = Bindings.createStringBinding(() -> {\n             for (Field field : fields) {\n-                if (field.getProperties().contains(FieldProperty.PERSON_NAMES)) {\n+                if (field.getProperties().contains(FieldProperty.PERSON_NAMES)\n+                        && nameFormatter.getValue().needsFormatting()) {", "originalCommit": "557ffc9fdf137350ef3738d6f02991bd00deab10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}