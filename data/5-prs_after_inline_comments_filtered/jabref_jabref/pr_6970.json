{"pr_number": 6970, "pr_title": "Fix could not connect to LO on Mac OSX", "pr_createdAt": "2020-10-03T15:12:32Z", "pr_url": "https://github.com/JabRef/jabref/pull/6970", "timeline": [{"oid": "9beb43cf054f91db036a172020b14f64572cd611", "url": "https://github.com/JabRef/jabref/commit/9beb43cf054f91db036a172020b14f64572cd611", "message": "Fix could not connect to LO on Mac OSX\n\nRefactor", "committedDate": "2020-10-03T15:10:40Z", "type": "commit"}, {"oid": "539b827eda7dcc6b228929ad81e2762e02d79624", "url": "https://github.com/JabRef/jabref/commit/539b827eda7dcc6b228929ad81e2762e02d79624", "message": "add link to pr", "committedDate": "2020-10-03T15:18:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE3OTc2Mg==", "url": "https://github.com/JabRef/jabref/pull/6970#discussion_r499179762", "bodyText": "Please add a Logger statement here so that strange cases can be debugged.", "author": "koppor", "createdAt": "2020-10-03T20:32:45Z", "path": "src/main/java/org/jabref/logic/openoffice/OpenOfficeFileSearch.java", "diffHunk": "@@ -33,19 +37,17 @@\n     }\n \n     private static List<Path> findOpenOfficeDirectories(List<Path> programDirectories) {\n-        List<Path> result = new ArrayList<>();\n \n-        for (Path programDir : programDirectories) {\n-            File[] subDirs = programDir.toFile().listFiles(File::isDirectory);\n-            if (subDirs != null) {\n-                for (File dir : subDirs) {\n-                    if (dir.getPath().toLowerCase(Locale.ROOT).contains(\"openoffice\") || dir.getPath().toLowerCase(Locale.ROOT).contains(\"libreoffice\")) {\n-                        result.add(dir.toPath());\n-                    }\n-                }\n+        BiPredicate<Path, BasicFileAttributes> filePredicate = (path, attr) -> attr.isDirectory() && (path.toString().toLowerCase(Locale.ROOT).contains(\"openoffice\")\n+                                                                               || path.toString().toLowerCase(Locale.ROOT).contains(\"libreoffice\"));\n+\n+        return programDirectories.stream().flatMap(dirs -> {\n+            try {\n+                return Files.find(dirs, 1, filePredicate);\n+            } catch (IOException e) {\n+                return Stream.empty();", "originalCommit": "539b827eda7dcc6b228929ad81e2762e02d79624", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b997075024e6839ecc96613bfcdcc73033487537", "url": "https://github.com/JabRef/jabref/commit/b997075024e6839ecc96613bfcdcc73033487537", "message": "Update CHANGELOG.md\n\nCo-authored-by: Oliver Kopp <kopp.dev@gmail.com>", "committedDate": "2020-10-03T20:46:06Z", "type": "commit"}, {"oid": "d5e4f747f64012fc6eb569b9600bb39777b69533", "url": "https://github.com/JabRef/jabref/commit/d5e4f747f64012fc6eb569b9600bb39777b69533", "message": "Update CHANGELOG.md\n\nCo-authored-by: Oliver Kopp <kopp.dev@gmail.com>", "committedDate": "2020-10-03T20:46:14Z", "type": "commit"}, {"oid": "a5a8ddf54638cada9efa69a582dd8d869e7a1653", "url": "https://github.com/JabRef/jabref/commit/a5a8ddf54638cada9efa69a582dd8d869e7a1653", "message": "Merge branch 'master' into fixLOMac", "committedDate": "2020-10-03T20:49:08Z", "type": "commit"}, {"oid": "237cff7b16c22490f4cb4ae310ff7decf6200fc0", "url": "https://github.com/JabRef/jabref/commit/237cff7b16c22490f4cb4ae310ff7decf6200fc0", "message": "add Logger for exception", "committedDate": "2020-10-03T20:52:00Z", "type": "commit"}, {"oid": "3856405b48f89d859f223cbf5b3c303567e19f72", "url": "https://github.com/JabRef/jabref/commit/3856405b48f89d859f223cbf5b3c303567e19f72", "message": "fix changelog dot", "committedDate": "2020-10-03T20:56:37Z", "type": "commit"}]}