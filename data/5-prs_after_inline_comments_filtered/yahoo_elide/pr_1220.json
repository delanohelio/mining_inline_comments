{"pr_number": 1220, "pr_title": "Elide 5.x dynamic config handlebars hydration", "pr_createdAt": "2020-03-18T18:37:47Z", "pr_url": "https://github.com/yahoo/elide/pull/1220", "timeline": [{"oid": "4d058f281142420054a77d348b6ba01955ab5292", "url": "https://github.com/yahoo/elide/commit/4d058f281142420054a77d348b6ba01955ab5292", "message": "Methods to hydrate security and config templates", "committedDate": "2020-03-25T02:46:35Z", "type": "forcePushed"}, {"oid": "5f3fc54e299233b5660bbfbc78e0a45c7c79df6d", "url": "https://github.com/yahoo/elide/commit/5f3fc54e299233b5660bbfbc78e0a45c7c79df6d", "message": "Methods to hydrate security and config templates", "committedDate": "2020-03-25T02:50:45Z", "type": "forcePushed"}, {"oid": "c58a789dc6fb8bc8963f731bfb092d24f7f7de21", "url": "https://github.com/yahoo/elide/commit/c58a789dc6fb8bc8963f731bfb092d24f7f7de21", "message": "JavaDocs", "committedDate": "2020-03-25T14:13:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwMjUyNA==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398202524", "bodyText": "Why not just dimDataType.equals(typeToMatch)?", "author": "aklish", "createdAt": "2020-03-25T22:13:34Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHelper.java", "diffHunk": "@@ -0,0 +1,246 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Dimension;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Join;\n+\n+import com.github.jknack.handlebars.Options;\n+\n+import org.apache.commons.lang3.builder.EqualsBuilder;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Locale;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Helper class for handlebar template hydration.\n+ */\n+public class HandlebarsHelper {\n+\n+    private static final String EMPTY_STRING = \"\";\n+    private static final String UNDERSCORE = \"_\";\n+    private static final String STRING = \"String\";\n+    private static final String DATE = \"Date\";\n+    private static final String DOUBLE = \"Double\";\n+    private static final String LONG = \"Long\";\n+    private static final String BOOLEAN = \"Boolean\";\n+    private static final String SPACE = \" \";\n+    private static final String FOUR_SPACES = \"    \";\n+    private static final String EIGHT_SPACES = FOUR_SPACES + FOUR_SPACES;\n+    private static final String NEWLINE = \"\\n\";\n+    private static final String WHITESPACE_REGEX = \"\\\\s+\";\n+\n+    /**\n+     * Capitalize first letter of the string.\n+     * @param str string to capitalize first letter\n+     * @return string with first letter capitalized\n+     */\n+    public String capitalizeFirstLetter(String str) {\n+\n+        return (str == null || str.length() == 0) ? str : str.substring(0, 1).toUpperCase(Locale.ENGLISH)\n+                + str.substring(1);\n+    }\n+\n+    /**\n+     * Transform string to upper case.\n+     * @param obj Object representation of the string\n+     * @return string converted to upper case\n+     */\n+    public String toUpperCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toUpperCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * Transform string to lower case.\n+     * @param obj Object representation of the string\n+     * @return string converted to lower case\n+     */\n+    public String toLowerCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toLowerCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * If template matches a string.\n+     * @param str String representation of the template\n+     * @param options options object with string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifContains(String str, Options options) throws IOException {\n+\n+        String toMatch = options.param(0, null);\n+        return options.isFalsy(contains(str, toMatch)) ? options.inverse() : options.fn();\n+    }\n+\n+    /**\n+     * If type of dimension matches passed value.\n+     * @param dim Elide dimension object\n+     * @param options options object with type/string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifDimTypeMatches(Dimension dim, Options options) throws IOException {\n+\n+        String dimDataType = dim.getType().toString();\n+        String typeToMatch = options.param(0, null);\n+        boolean result = new EqualsBuilder().append(dimDataType, typeToMatch).isEquals();", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwMjcwNQ==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398202705", "bodyText": "BigDecimal.", "author": "aklish", "createdAt": "2020-03-25T22:13:58Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHelper.java", "diffHunk": "@@ -0,0 +1,246 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Dimension;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Join;\n+\n+import com.github.jknack.handlebars.Options;\n+\n+import org.apache.commons.lang3.builder.EqualsBuilder;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Locale;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Helper class for handlebar template hydration.\n+ */\n+public class HandlebarsHelper {\n+\n+    private static final String EMPTY_STRING = \"\";\n+    private static final String UNDERSCORE = \"_\";\n+    private static final String STRING = \"String\";\n+    private static final String DATE = \"Date\";\n+    private static final String DOUBLE = \"Double\";\n+    private static final String LONG = \"Long\";\n+    private static final String BOOLEAN = \"Boolean\";\n+    private static final String SPACE = \" \";\n+    private static final String FOUR_SPACES = \"    \";\n+    private static final String EIGHT_SPACES = FOUR_SPACES + FOUR_SPACES;\n+    private static final String NEWLINE = \"\\n\";\n+    private static final String WHITESPACE_REGEX = \"\\\\s+\";\n+\n+    /**\n+     * Capitalize first letter of the string.\n+     * @param str string to capitalize first letter\n+     * @return string with first letter capitalized\n+     */\n+    public String capitalizeFirstLetter(String str) {\n+\n+        return (str == null || str.length() == 0) ? str : str.substring(0, 1).toUpperCase(Locale.ENGLISH)\n+                + str.substring(1);\n+    }\n+\n+    /**\n+     * Transform string to upper case.\n+     * @param obj Object representation of the string\n+     * @return string converted to upper case\n+     */\n+    public String toUpperCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toUpperCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * Transform string to lower case.\n+     * @param obj Object representation of the string\n+     * @return string converted to lower case\n+     */\n+    public String toLowerCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toLowerCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * If template matches a string.\n+     * @param str String representation of the template\n+     * @param options options object with string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifContains(String str, Options options) throws IOException {\n+\n+        String toMatch = options.param(0, null);\n+        return options.isFalsy(contains(str, toMatch)) ? options.inverse() : options.fn();\n+    }\n+\n+    /**\n+     * If type of dimension matches passed value.\n+     * @param dim Elide dimension object\n+     * @param options options object with type/string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifDimTypeMatches(Dimension dim, Options options) throws IOException {\n+\n+        String dimDataType = dim.getType().toString();\n+        String typeToMatch = options.param(0, null);\n+        boolean result = new EqualsBuilder().append(dimDataType, typeToMatch).isEquals();\n+        return result ? options.fn() : options.inverse();\n+    }\n+\n+    /**\n+     * If string contains passed value.\n+     * @param str String to be searched\n+     * @param search pattern to search\n+     * @return true/false if matched\n+     */\n+    public boolean contains(String str, String search) {\n+\n+        return (str == null || str.indexOf(search) < 0);\n+    }\n+\n+    /**\n+     * Generate setter method.\n+     * @param type Type of the field\n+     * @param fieldName Field Name\n+     * @return setter method\n+     */\n+    public String generateSetterMethod(String type, String fieldName) {\n+\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate setter method for Dimension Type.\n+     * @param dim Dimension Object\n+     * @return setter method\n+     */\n+    public String generateDimSetterMethod(Dimension dim) {\n+\n+        String type = getDimensionType(dim);\n+        String fieldName = dim.getName();\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate setter method for Join Type.\n+     * @param join Join Object\n+     * @return setter method\n+     */\n+    public String generateJoinSetterMethod(Join join) {\n+\n+        String type = capitalizeFirstLetter(join.getTo());\n+        String fieldName = join.getName();\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method.\n+     * @param type Type of the field\n+     * @param fieldName field Name\n+     * @return getter method\n+     */\n+    public String generateGetterMethod(String type, String fieldName) {\n+\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method for Dimension type.\n+     * @param dim Dimension Object\n+     * @return getter method\n+     */\n+    public String generateDimGetterMethod(Dimension dim) {\n+\n+        String type = getDimensionType(dim);\n+        String fieldName = dim.getName();\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method for Join type.\n+     * @param join Join Object\n+     * @return getter method\n+     */\n+    public String generateJoinGetterMethod(Join join) {\n+\n+        String type = capitalizeFirstLetter(join.getTo());\n+        String fieldName = join.getName();\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    // Security.java helper methods\n+    /**\n+     * Get the Class Name for Security.\n+     * @param name Name of the security rule\n+     * @return Capitalize First Letter of Each Word and remove spaces\n+     */\n+    public String getClassSuffix(String name) {\n+\n+        String[] nameSplit = name.trim().split(WHITESPACE_REGEX);\n+        return String.join(EMPTY_STRING,\n+                Arrays.asList(nameSplit).stream().map(str -> capitalizeFirstLetter(str)).collect(Collectors.toList()));\n+    }\n+\n+    /**\n+     * Get Variable Name for Security rule.\n+     * @param name Name of the security rule\n+     * @return Change each word to upper case and replace spaces with underscore\n+     */\n+    public String getVarName(String name) {\n+\n+        String[] nameSplit = name.trim().split(WHITESPACE_REGEX);\n+        return String.join(UNDERSCORE,\n+                Arrays.asList(nameSplit).stream().map(str -> toUpperCase(str)).collect(Collectors.toList()));\n+    }\n+\n+    /**\n+     * Get Name of the security role from security rule.\n+     * @param name Name of the security rule\n+     * @return Last word in lower case\n+     */\n+    public String getRoleName(String name) {\n+\n+        String[] nameSplit = name.trim().split(WHITESPACE_REGEX);\n+        return toLowerCase(nameSplit[nameSplit.length - 1]);\n+    }\n+\n+    /**\n+     * Get java type name corresponding to the dimension type.\n+     * @param dim Dimension Object\n+     * @return The corresponding java type name\n+     */\n+    public String getDimensionType(Dimension dim) {\n+\n+        switch (dim.getType()) {\n+            case BOOLEAN:\n+                return BOOLEAN;\n+            case COORDINATE:\n+                return STRING;\n+            case INTEGER:\n+                return LONG;\n+            case TEXT:\n+                return STRING;\n+            case TIME:\n+                return DATE;\n+            case DECIMAL:\n+                return DOUBLE;\n+            case MONEY:\n+                return DOUBLE;", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwMjgxNQ==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398202815", "bodyText": "BigDecimal.", "author": "aklish", "createdAt": "2020-03-25T22:14:10Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHelper.java", "diffHunk": "@@ -0,0 +1,246 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Dimension;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Join;\n+\n+import com.github.jknack.handlebars.Options;\n+\n+import org.apache.commons.lang3.builder.EqualsBuilder;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Locale;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Helper class for handlebar template hydration.\n+ */\n+public class HandlebarsHelper {\n+\n+    private static final String EMPTY_STRING = \"\";\n+    private static final String UNDERSCORE = \"_\";\n+    private static final String STRING = \"String\";\n+    private static final String DATE = \"Date\";\n+    private static final String DOUBLE = \"Double\";\n+    private static final String LONG = \"Long\";\n+    private static final String BOOLEAN = \"Boolean\";\n+    private static final String SPACE = \" \";\n+    private static final String FOUR_SPACES = \"    \";\n+    private static final String EIGHT_SPACES = FOUR_SPACES + FOUR_SPACES;\n+    private static final String NEWLINE = \"\\n\";\n+    private static final String WHITESPACE_REGEX = \"\\\\s+\";\n+\n+    /**\n+     * Capitalize first letter of the string.\n+     * @param str string to capitalize first letter\n+     * @return string with first letter capitalized\n+     */\n+    public String capitalizeFirstLetter(String str) {\n+\n+        return (str == null || str.length() == 0) ? str : str.substring(0, 1).toUpperCase(Locale.ENGLISH)\n+                + str.substring(1);\n+    }\n+\n+    /**\n+     * Transform string to upper case.\n+     * @param obj Object representation of the string\n+     * @return string converted to upper case\n+     */\n+    public String toUpperCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toUpperCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * Transform string to lower case.\n+     * @param obj Object representation of the string\n+     * @return string converted to lower case\n+     */\n+    public String toLowerCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toLowerCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * If template matches a string.\n+     * @param str String representation of the template\n+     * @param options options object with string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifContains(String str, Options options) throws IOException {\n+\n+        String toMatch = options.param(0, null);\n+        return options.isFalsy(contains(str, toMatch)) ? options.inverse() : options.fn();\n+    }\n+\n+    /**\n+     * If type of dimension matches passed value.\n+     * @param dim Elide dimension object\n+     * @param options options object with type/string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifDimTypeMatches(Dimension dim, Options options) throws IOException {\n+\n+        String dimDataType = dim.getType().toString();\n+        String typeToMatch = options.param(0, null);\n+        boolean result = new EqualsBuilder().append(dimDataType, typeToMatch).isEquals();\n+        return result ? options.fn() : options.inverse();\n+    }\n+\n+    /**\n+     * If string contains passed value.\n+     * @param str String to be searched\n+     * @param search pattern to search\n+     * @return true/false if matched\n+     */\n+    public boolean contains(String str, String search) {\n+\n+        return (str == null || str.indexOf(search) < 0);\n+    }\n+\n+    /**\n+     * Generate setter method.\n+     * @param type Type of the field\n+     * @param fieldName Field Name\n+     * @return setter method\n+     */\n+    public String generateSetterMethod(String type, String fieldName) {\n+\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate setter method for Dimension Type.\n+     * @param dim Dimension Object\n+     * @return setter method\n+     */\n+    public String generateDimSetterMethod(Dimension dim) {\n+\n+        String type = getDimensionType(dim);\n+        String fieldName = dim.getName();\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate setter method for Join Type.\n+     * @param join Join Object\n+     * @return setter method\n+     */\n+    public String generateJoinSetterMethod(Join join) {\n+\n+        String type = capitalizeFirstLetter(join.getTo());\n+        String fieldName = join.getName();\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method.\n+     * @param type Type of the field\n+     * @param fieldName field Name\n+     * @return getter method\n+     */\n+    public String generateGetterMethod(String type, String fieldName) {\n+\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method for Dimension type.\n+     * @param dim Dimension Object\n+     * @return getter method\n+     */\n+    public String generateDimGetterMethod(Dimension dim) {\n+\n+        String type = getDimensionType(dim);\n+        String fieldName = dim.getName();\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method for Join type.\n+     * @param join Join Object\n+     * @return getter method\n+     */\n+    public String generateJoinGetterMethod(Join join) {\n+\n+        String type = capitalizeFirstLetter(join.getTo());\n+        String fieldName = join.getName();\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    // Security.java helper methods\n+    /**\n+     * Get the Class Name for Security.\n+     * @param name Name of the security rule\n+     * @return Capitalize First Letter of Each Word and remove spaces\n+     */\n+    public String getClassSuffix(String name) {\n+\n+        String[] nameSplit = name.trim().split(WHITESPACE_REGEX);\n+        return String.join(EMPTY_STRING,\n+                Arrays.asList(nameSplit).stream().map(str -> capitalizeFirstLetter(str)).collect(Collectors.toList()));\n+    }\n+\n+    /**\n+     * Get Variable Name for Security rule.\n+     * @param name Name of the security rule\n+     * @return Change each word to upper case and replace spaces with underscore\n+     */\n+    public String getVarName(String name) {\n+\n+        String[] nameSplit = name.trim().split(WHITESPACE_REGEX);\n+        return String.join(UNDERSCORE,\n+                Arrays.asList(nameSplit).stream().map(str -> toUpperCase(str)).collect(Collectors.toList()));\n+    }\n+\n+    /**\n+     * Get Name of the security role from security rule.\n+     * @param name Name of the security rule\n+     * @return Last word in lower case\n+     */\n+    public String getRoleName(String name) {\n+\n+        String[] nameSplit = name.trim().split(WHITESPACE_REGEX);\n+        return toLowerCase(nameSplit[nameSplit.length - 1]);\n+    }\n+\n+    /**\n+     * Get java type name corresponding to the dimension type.\n+     * @param dim Dimension Object\n+     * @return The corresponding java type name\n+     */\n+    public String getDimensionType(Dimension dim) {\n+\n+        switch (dim.getType()) {\n+            case BOOLEAN:\n+                return BOOLEAN;\n+            case COORDINATE:\n+                return STRING;\n+            case INTEGER:\n+                return LONG;\n+            case TEXT:\n+                return STRING;\n+            case TIME:\n+                return DATE;\n+            case DECIMAL:\n+                return DOUBLE;", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwMzkxMQ==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398203911", "bodyText": "The role name should not be extracted from the Rules - but rather the Roles.  As such, we don't need to parse text like \"Principal is ADMIN\".", "author": "aklish", "createdAt": "2020-03-25T22:16:35Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHelper.java", "diffHunk": "@@ -0,0 +1,246 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Dimension;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Join;\n+\n+import com.github.jknack.handlebars.Options;\n+\n+import org.apache.commons.lang3.builder.EqualsBuilder;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Locale;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Helper class for handlebar template hydration.\n+ */\n+public class HandlebarsHelper {\n+\n+    private static final String EMPTY_STRING = \"\";\n+    private static final String UNDERSCORE = \"_\";\n+    private static final String STRING = \"String\";\n+    private static final String DATE = \"Date\";\n+    private static final String DOUBLE = \"Double\";\n+    private static final String LONG = \"Long\";\n+    private static final String BOOLEAN = \"Boolean\";\n+    private static final String SPACE = \" \";\n+    private static final String FOUR_SPACES = \"    \";\n+    private static final String EIGHT_SPACES = FOUR_SPACES + FOUR_SPACES;\n+    private static final String NEWLINE = \"\\n\";\n+    private static final String WHITESPACE_REGEX = \"\\\\s+\";\n+\n+    /**\n+     * Capitalize first letter of the string.\n+     * @param str string to capitalize first letter\n+     * @return string with first letter capitalized\n+     */\n+    public String capitalizeFirstLetter(String str) {\n+\n+        return (str == null || str.length() == 0) ? str : str.substring(0, 1).toUpperCase(Locale.ENGLISH)\n+                + str.substring(1);\n+    }\n+\n+    /**\n+     * Transform string to upper case.\n+     * @param obj Object representation of the string\n+     * @return string converted to upper case\n+     */\n+    public String toUpperCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toUpperCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * Transform string to lower case.\n+     * @param obj Object representation of the string\n+     * @return string converted to lower case\n+     */\n+    public String toLowerCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toLowerCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * If template matches a string.\n+     * @param str String representation of the template\n+     * @param options options object with string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifContains(String str, Options options) throws IOException {\n+\n+        String toMatch = options.param(0, null);\n+        return options.isFalsy(contains(str, toMatch)) ? options.inverse() : options.fn();\n+    }\n+\n+    /**\n+     * If type of dimension matches passed value.\n+     * @param dim Elide dimension object\n+     * @param options options object with type/string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifDimTypeMatches(Dimension dim, Options options) throws IOException {\n+\n+        String dimDataType = dim.getType().toString();\n+        String typeToMatch = options.param(0, null);\n+        boolean result = new EqualsBuilder().append(dimDataType, typeToMatch).isEquals();\n+        return result ? options.fn() : options.inverse();\n+    }\n+\n+    /**\n+     * If string contains passed value.\n+     * @param str String to be searched\n+     * @param search pattern to search\n+     * @return true/false if matched\n+     */\n+    public boolean contains(String str, String search) {\n+\n+        return (str == null || str.indexOf(search) < 0);\n+    }\n+\n+    /**\n+     * Generate setter method.\n+     * @param type Type of the field\n+     * @param fieldName Field Name\n+     * @return setter method\n+     */\n+    public String generateSetterMethod(String type, String fieldName) {\n+\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate setter method for Dimension Type.\n+     * @param dim Dimension Object\n+     * @return setter method\n+     */\n+    public String generateDimSetterMethod(Dimension dim) {\n+\n+        String type = getDimensionType(dim);\n+        String fieldName = dim.getName();\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate setter method for Join Type.\n+     * @param join Join Object\n+     * @return setter method\n+     */\n+    public String generateJoinSetterMethod(Join join) {\n+\n+        String type = capitalizeFirstLetter(join.getTo());\n+        String fieldName = join.getName();\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method.\n+     * @param type Type of the field\n+     * @param fieldName field Name\n+     * @return getter method\n+     */\n+    public String generateGetterMethod(String type, String fieldName) {\n+\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method for Dimension type.\n+     * @param dim Dimension Object\n+     * @return getter method\n+     */\n+    public String generateDimGetterMethod(Dimension dim) {\n+\n+        String type = getDimensionType(dim);\n+        String fieldName = dim.getName();\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method for Join type.\n+     * @param join Join Object\n+     * @return getter method\n+     */\n+    public String generateJoinGetterMethod(Join join) {\n+\n+        String type = capitalizeFirstLetter(join.getTo());\n+        String fieldName = join.getName();\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    // Security.java helper methods\n+    /**\n+     * Get the Class Name for Security.\n+     * @param name Name of the security rule\n+     * @return Capitalize First Letter of Each Word and remove spaces\n+     */\n+    public String getClassSuffix(String name) {\n+\n+        String[] nameSplit = name.trim().split(WHITESPACE_REGEX);\n+        return String.join(EMPTY_STRING,\n+                Arrays.asList(nameSplit).stream().map(str -> capitalizeFirstLetter(str)).collect(Collectors.toList()));\n+    }\n+\n+    /**\n+     * Get Variable Name for Security rule.\n+     * @param name Name of the security rule\n+     * @return Change each word to upper case and replace spaces with underscore\n+     */\n+    public String getVarName(String name) {\n+\n+        String[] nameSplit = name.trim().split(WHITESPACE_REGEX);\n+        return String.join(UNDERSCORE,\n+                Arrays.asList(nameSplit).stream().map(str -> toUpperCase(str)).collect(Collectors.toList()));\n+    }\n+\n+    /**\n+     * Get Name of the security role from security rule.\n+     * @param name Name of the security rule\n+     * @return Last word in lower case\n+     */\n+    public String getRoleName(String name) {", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwNzA0Mw==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398207043", "bodyText": "This logic feels inverted to me.", "author": "aklish", "createdAt": "2020-03-25T22:23:50Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHelper.java", "diffHunk": "@@ -0,0 +1,246 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Dimension;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Join;\n+\n+import com.github.jknack.handlebars.Options;\n+\n+import org.apache.commons.lang3.builder.EqualsBuilder;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Locale;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Helper class for handlebar template hydration.\n+ */\n+public class HandlebarsHelper {\n+\n+    private static final String EMPTY_STRING = \"\";\n+    private static final String UNDERSCORE = \"_\";\n+    private static final String STRING = \"String\";\n+    private static final String DATE = \"Date\";\n+    private static final String DOUBLE = \"Double\";\n+    private static final String LONG = \"Long\";\n+    private static final String BOOLEAN = \"Boolean\";\n+    private static final String SPACE = \" \";\n+    private static final String FOUR_SPACES = \"    \";\n+    private static final String EIGHT_SPACES = FOUR_SPACES + FOUR_SPACES;\n+    private static final String NEWLINE = \"\\n\";\n+    private static final String WHITESPACE_REGEX = \"\\\\s+\";\n+\n+    /**\n+     * Capitalize first letter of the string.\n+     * @param str string to capitalize first letter\n+     * @return string with first letter capitalized\n+     */\n+    public String capitalizeFirstLetter(String str) {\n+\n+        return (str == null || str.length() == 0) ? str : str.substring(0, 1).toUpperCase(Locale.ENGLISH)\n+                + str.substring(1);\n+    }\n+\n+    /**\n+     * Transform string to upper case.\n+     * @param obj Object representation of the string\n+     * @return string converted to upper case\n+     */\n+    public String toUpperCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toUpperCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * Transform string to lower case.\n+     * @param obj Object representation of the string\n+     * @return string converted to lower case\n+     */\n+    public String toLowerCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toLowerCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * If template matches a string.\n+     * @param str String representation of the template\n+     * @param options options object with string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifContains(String str, Options options) throws IOException {\n+\n+        String toMatch = options.param(0, null);\n+        return options.isFalsy(contains(str, toMatch)) ? options.inverse() : options.fn();\n+    }\n+\n+    /**\n+     * If type of dimension matches passed value.\n+     * @param dim Elide dimension object\n+     * @param options options object with type/string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifDimTypeMatches(Dimension dim, Options options) throws IOException {\n+\n+        String dimDataType = dim.getType().toString();\n+        String typeToMatch = options.param(0, null);\n+        boolean result = new EqualsBuilder().append(dimDataType, typeToMatch).isEquals();\n+        return result ? options.fn() : options.inverse();\n+    }\n+\n+    /**\n+     * If string contains passed value.\n+     * @param str String to be searched\n+     * @param search pattern to search\n+     * @return true/false if matched\n+     */\n+    public boolean contains(String str, String search) {\n+\n+        return (str == null || str.indexOf(search) < 0);", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwNzEyMg==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398207122", "bodyText": "We can remove all the generate getter and setter methods.", "author": "aklish", "createdAt": "2020-03-25T22:24:03Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHelper.java", "diffHunk": "@@ -0,0 +1,246 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Dimension;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Join;\n+\n+import com.github.jknack.handlebars.Options;\n+\n+import org.apache.commons.lang3.builder.EqualsBuilder;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Locale;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Helper class for handlebar template hydration.\n+ */\n+public class HandlebarsHelper {\n+\n+    private static final String EMPTY_STRING = \"\";\n+    private static final String UNDERSCORE = \"_\";\n+    private static final String STRING = \"String\";\n+    private static final String DATE = \"Date\";\n+    private static final String DOUBLE = \"Double\";\n+    private static final String LONG = \"Long\";\n+    private static final String BOOLEAN = \"Boolean\";\n+    private static final String SPACE = \" \";\n+    private static final String FOUR_SPACES = \"    \";\n+    private static final String EIGHT_SPACES = FOUR_SPACES + FOUR_SPACES;\n+    private static final String NEWLINE = \"\\n\";\n+    private static final String WHITESPACE_REGEX = \"\\\\s+\";\n+\n+    /**\n+     * Capitalize first letter of the string.\n+     * @param str string to capitalize first letter\n+     * @return string with first letter capitalized\n+     */\n+    public String capitalizeFirstLetter(String str) {\n+\n+        return (str == null || str.length() == 0) ? str : str.substring(0, 1).toUpperCase(Locale.ENGLISH)\n+                + str.substring(1);\n+    }\n+\n+    /**\n+     * Transform string to upper case.\n+     * @param obj Object representation of the string\n+     * @return string converted to upper case\n+     */\n+    public String toUpperCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toUpperCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * Transform string to lower case.\n+     * @param obj Object representation of the string\n+     * @return string converted to lower case\n+     */\n+    public String toLowerCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toLowerCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * If template matches a string.\n+     * @param str String representation of the template\n+     * @param options options object with string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifContains(String str, Options options) throws IOException {\n+\n+        String toMatch = options.param(0, null);\n+        return options.isFalsy(contains(str, toMatch)) ? options.inverse() : options.fn();\n+    }\n+\n+    /**\n+     * If type of dimension matches passed value.\n+     * @param dim Elide dimension object\n+     * @param options options object with type/string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifDimTypeMatches(Dimension dim, Options options) throws IOException {\n+\n+        String dimDataType = dim.getType().toString();\n+        String typeToMatch = options.param(0, null);\n+        boolean result = new EqualsBuilder().append(dimDataType, typeToMatch).isEquals();\n+        return result ? options.fn() : options.inverse();\n+    }\n+\n+    /**\n+     * If string contains passed value.\n+     * @param str String to be searched\n+     * @param search pattern to search\n+     * @return true/false if matched\n+     */\n+    public boolean contains(String str, String search) {\n+\n+        return (str == null || str.indexOf(search) < 0);\n+    }\n+\n+    /**\n+     * Generate setter method.\n+     * @param type Type of the field\n+     * @param fieldName Field Name\n+     * @return setter method\n+     */\n+    public String generateSetterMethod(String type, String fieldName) {", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwNzUxNg==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398207516", "bodyText": "All the security helpers can probably be removed since they are parsing the rules and not the roles.  Rules is phase 2.", "author": "aklish", "createdAt": "2020-03-25T22:25:03Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHelper.java", "diffHunk": "@@ -0,0 +1,246 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Dimension;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Join;\n+\n+import com.github.jknack.handlebars.Options;\n+\n+import org.apache.commons.lang3.builder.EqualsBuilder;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Locale;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Helper class for handlebar template hydration.\n+ */\n+public class HandlebarsHelper {\n+\n+    private static final String EMPTY_STRING = \"\";\n+    private static final String UNDERSCORE = \"_\";\n+    private static final String STRING = \"String\";\n+    private static final String DATE = \"Date\";\n+    private static final String DOUBLE = \"Double\";\n+    private static final String LONG = \"Long\";\n+    private static final String BOOLEAN = \"Boolean\";\n+    private static final String SPACE = \" \";\n+    private static final String FOUR_SPACES = \"    \";\n+    private static final String EIGHT_SPACES = FOUR_SPACES + FOUR_SPACES;\n+    private static final String NEWLINE = \"\\n\";\n+    private static final String WHITESPACE_REGEX = \"\\\\s+\";\n+\n+    /**\n+     * Capitalize first letter of the string.\n+     * @param str string to capitalize first letter\n+     * @return string with first letter capitalized\n+     */\n+    public String capitalizeFirstLetter(String str) {\n+\n+        return (str == null || str.length() == 0) ? str : str.substring(0, 1).toUpperCase(Locale.ENGLISH)\n+                + str.substring(1);\n+    }\n+\n+    /**\n+     * Transform string to upper case.\n+     * @param obj Object representation of the string\n+     * @return string converted to upper case\n+     */\n+    public String toUpperCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toUpperCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * Transform string to lower case.\n+     * @param obj Object representation of the string\n+     * @return string converted to lower case\n+     */\n+    public String toLowerCase(Object obj) {\n+\n+        return (obj == null) ? EMPTY_STRING : obj.toString().toLowerCase(Locale.ENGLISH);\n+    }\n+\n+    /**\n+     * If template matches a string.\n+     * @param str String representation of the template\n+     * @param options options object with string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifContains(String str, Options options) throws IOException {\n+\n+        String toMatch = options.param(0, null);\n+        return options.isFalsy(contains(str, toMatch)) ? options.inverse() : options.fn();\n+    }\n+\n+    /**\n+     * If type of dimension matches passed value.\n+     * @param dim Elide dimension object\n+     * @param options options object with type/string to match\n+     * @return template if matched\n+     * @throws IOException IOException\n+     */\n+    public CharSequence ifDimTypeMatches(Dimension dim, Options options) throws IOException {\n+\n+        String dimDataType = dim.getType().toString();\n+        String typeToMatch = options.param(0, null);\n+        boolean result = new EqualsBuilder().append(dimDataType, typeToMatch).isEquals();\n+        return result ? options.fn() : options.inverse();\n+    }\n+\n+    /**\n+     * If string contains passed value.\n+     * @param str String to be searched\n+     * @param search pattern to search\n+     * @return true/false if matched\n+     */\n+    public boolean contains(String str, String search) {\n+\n+        return (str == null || str.indexOf(search) < 0);\n+    }\n+\n+    /**\n+     * Generate setter method.\n+     * @param type Type of the field\n+     * @param fieldName Field Name\n+     * @return setter method\n+     */\n+    public String generateSetterMethod(String type, String fieldName) {\n+\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate setter method for Dimension Type.\n+     * @param dim Dimension Object\n+     * @return setter method\n+     */\n+    public String generateDimSetterMethod(Dimension dim) {\n+\n+        String type = getDimensionType(dim);\n+        String fieldName = dim.getName();\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate setter method for Join Type.\n+     * @param join Join Object\n+     * @return setter method\n+     */\n+    public String generateJoinSetterMethod(Join join) {\n+\n+        String type = capitalizeFirstLetter(join.getTo());\n+        String fieldName = join.getName();\n+        return \"public void set\" + capitalizeFirstLetter(fieldName) + \"(\" + type + SPACE + fieldName + \") {\" + NEWLINE\n+                        + EIGHT_SPACES + \"this.\" + fieldName + \" = \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method.\n+     * @param type Type of the field\n+     * @param fieldName field Name\n+     * @return getter method\n+     */\n+    public String generateGetterMethod(String type, String fieldName) {\n+\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method for Dimension type.\n+     * @param dim Dimension Object\n+     * @return getter method\n+     */\n+    public String generateDimGetterMethod(Dimension dim) {\n+\n+        String type = getDimensionType(dim);\n+        String fieldName = dim.getName();\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    /**\n+     * Generate getter method for Join type.\n+     * @param join Join Object\n+     * @return getter method\n+     */\n+    public String generateJoinGetterMethod(Join join) {\n+\n+        String type = capitalizeFirstLetter(join.getTo());\n+        String fieldName = join.getName();\n+        return \"public \" + type + \" get\" + capitalizeFirstLetter(fieldName) + \"() {\" + NEWLINE + EIGHT_SPACES\n+                        + \"return \" + fieldName + \";\" + NEWLINE + FOUR_SPACES + \"}\";\n+    }\n+\n+    // Security.java helper methods\n+    /**\n+     * Get the Class Name for Security.\n+     * @param name Name of the security rule\n+     * @return Capitalize First Letter of Each Word and remove spaces\n+     */\n+    public String getClassSuffix(String name) {", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwODExMQ==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398208111", "bodyText": "ElideTable needs a better class name since it is really a configuration object and not a singular table.", "author": "aklish", "createdAt": "2020-03-25T22:26:36Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHydrator.java", "diffHunk": "@@ -0,0 +1,112 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.ElideSecurity;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.ElideTable;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Table;\n+import com.github.jknack.handlebars.Context;\n+import com.github.jknack.handlebars.EscapingStrategy;\n+import com.github.jknack.handlebars.EscapingStrategy.Hbs;\n+import com.github.jknack.handlebars.Handlebars;\n+import com.github.jknack.handlebars.Template;\n+import com.github.jknack.handlebars.helper.ConditionalHelpers;\n+import com.github.jknack.handlebars.io.ClassPathTemplateLoader;\n+import com.github.jknack.handlebars.io.TemplateLoader;\n+\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+\n+/**\n+ * Class for handlebars hydration.\n+ */\n+public class HandlebarsHydrator {\n+\n+    public static final EscapingStrategy MY_ESCAPING_STRATEGY = new Hbs(new String[][]{\n+        {\"<\", \"&lt;\" },\n+        {\">\", \"&gt;\" },\n+        {\"\\\"\", \"&quot;\" },\n+        {\"`\", \"&#x60;\" },\n+        {\"&\", \"&amp;\" }\n+    });\n+\n+    /**\n+     * Method to hydrate the Table template.\n+     * @param table ElideTable object\n+     * @return table java class list\n+     * @throws IOException IOException\n+     */\n+    public List<String> hydrateTableTemplate(ElideTable table) throws IOException {", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwODgyMA==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398208820", "bodyText": "Rename ElideSecurity to ElideSecurityConfig", "author": "aklish", "createdAt": "2020-03-25T22:28:17Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHydrator.java", "diffHunk": "@@ -0,0 +1,112 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.ElideSecurity;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.ElideTable;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Table;\n+import com.github.jknack.handlebars.Context;\n+import com.github.jknack.handlebars.EscapingStrategy;\n+import com.github.jknack.handlebars.EscapingStrategy.Hbs;\n+import com.github.jknack.handlebars.Handlebars;\n+import com.github.jknack.handlebars.Template;\n+import com.github.jknack.handlebars.helper.ConditionalHelpers;\n+import com.github.jknack.handlebars.io.ClassPathTemplateLoader;\n+import com.github.jknack.handlebars.io.TemplateLoader;\n+\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+\n+/**\n+ * Class for handlebars hydration.\n+ */\n+public class HandlebarsHydrator {\n+\n+    public static final EscapingStrategy MY_ESCAPING_STRATEGY = new Hbs(new String[][]{\n+        {\"<\", \"&lt;\" },\n+        {\">\", \"&gt;\" },\n+        {\"\\\"\", \"&quot;\" },\n+        {\"`\", \"&#x60;\" },\n+        {\"&\", \"&amp;\" }\n+    });\n+\n+    /**\n+     * Method to hydrate the Table template.\n+     * @param table ElideTable object\n+     * @return table java class list\n+     * @throws IOException IOException\n+     */\n+    public List<String> hydrateTableTemplate(ElideTable table) throws IOException {\n+\n+        List<String> tableClassStringList = new ArrayList<>();\n+\n+        TemplateLoader loader = new ClassPathTemplateLoader(\"/templates\");\n+        Handlebars handlebars = new Handlebars(loader).with(MY_ESCAPING_STRATEGY);\n+        handlebars.registerHelpers(ConditionalHelpers.class);\n+        handlebars.registerHelpers(new HandlebarsHelper());\n+        Template template = handlebars.compile(\"table\");\n+\n+        for (Table t : table.getTables()) {\n+            tableClassStringList.add(template.apply(t));\n+        }\n+\n+        return tableClassStringList;\n+    }\n+\n+    /**\n+     * Method to replace variables in hjson config.\n+     * @param config hjson config string\n+     * @param replacements Map of variable key value pairs\n+     * @return hjson config string with variables replaced\n+     * @throws IOException IOException\n+     */\n+    public String hydrateConfigTemplate(String config, Map<String, Object> replacements) throws IOException {\n+\n+        Context context = Context.newBuilder(replacements).build();\n+        Handlebars handlebars = new Handlebars();\n+        Template template = handlebars.compileInline(config);\n+\n+        return template.apply(context);\n+    }\n+\n+    /**\n+     * Method to return the List of Class Names hydrated.\n+     * @param table ElideTable object\n+     * @return table java class name list\n+     * @throws IOException IOException\n+     */\n+    public List<String> getTableClassNames(ElideTable table) throws IOException {\n+\n+        List<String> tableClassStringNameList = new ArrayList<>();\n+\n+        HandlebarsHelper helper = new HandlebarsHelper();\n+\n+        for (Table t : table.getTables()) {\n+            tableClassStringNameList.add(helper.capitalizeFirstLetter(t.getName()));\n+        }\n+\n+        return tableClassStringNameList;\n+    }\n+\n+    /**\n+     * Method to hydrate the Security template.\n+     * @param security ElideSecurity Object\n+     * @return security java class string\n+     * @throws IOException IOException\n+     */\n+    public String hydrateSecurityTemplate(ElideSecurity security) throws IOException {", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIwOTY1Nw==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r398209657", "bodyText": "Its hard to say if these method signatures are the right ones without seeing the calling code.  I'm confused why this is returning a list of Strings for example and not a Map.", "author": "aklish", "createdAt": "2020-03-25T22:29:56Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHydrator.java", "diffHunk": "@@ -0,0 +1,112 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.ElideSecurity;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.ElideTable;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Table;\n+import com.github.jknack.handlebars.Context;\n+import com.github.jknack.handlebars.EscapingStrategy;\n+import com.github.jknack.handlebars.EscapingStrategy.Hbs;\n+import com.github.jknack.handlebars.Handlebars;\n+import com.github.jknack.handlebars.Template;\n+import com.github.jknack.handlebars.helper.ConditionalHelpers;\n+import com.github.jknack.handlebars.io.ClassPathTemplateLoader;\n+import com.github.jknack.handlebars.io.TemplateLoader;\n+\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+\n+/**\n+ * Class for handlebars hydration.\n+ */\n+public class HandlebarsHydrator {\n+\n+    public static final EscapingStrategy MY_ESCAPING_STRATEGY = new Hbs(new String[][]{\n+        {\"<\", \"&lt;\" },\n+        {\">\", \"&gt;\" },\n+        {\"\\\"\", \"&quot;\" },\n+        {\"`\", \"&#x60;\" },\n+        {\"&\", \"&amp;\" }\n+    });\n+\n+    /**\n+     * Method to hydrate the Table template.\n+     * @param table ElideTable object\n+     * @return table java class list\n+     * @throws IOException IOException\n+     */\n+    public List<String> hydrateTableTemplate(ElideTable table) throws IOException {\n+\n+        List<String> tableClassStringList = new ArrayList<>();\n+\n+        TemplateLoader loader = new ClassPathTemplateLoader(\"/templates\");\n+        Handlebars handlebars = new Handlebars(loader).with(MY_ESCAPING_STRATEGY);\n+        handlebars.registerHelpers(ConditionalHelpers.class);\n+        handlebars.registerHelpers(new HandlebarsHelper());\n+        Template template = handlebars.compile(\"table\");\n+\n+        for (Table t : table.getTables()) {\n+            tableClassStringList.add(template.apply(t));\n+        }\n+\n+        return tableClassStringList;", "originalCommit": "89060707ae67ab6d4459e870daf5d6f15e34890b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e41f9e615abe0c37cee07314093651aeba912180", "url": "https://github.com/yahoo/elide/commit/e41f9e615abe0c37cee07314093651aeba912180", "message": "Pom updates", "committedDate": "2020-03-25T14:18:07Z", "type": "forcePushed"}, {"oid": "b70800f98d2057f1d7ab8e19ea7e510fdc4fe955", "url": "https://github.com/yahoo/elide/commit/b70800f98d2057f1d7ab8e19ea7e510fdc4fe955", "message": "Adding Handlebar template hydration logic\n\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "0c82eb44d43e4c8d26ae5102062b98bddbd65d43", "url": "https://github.com/yahoo/elide/commit/0c82eb44d43e4c8d26ae5102062b98bddbd65d43", "message": "Adding Handlebar template hydration logic\n\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "486a37ea95b9d2aef6ece9b61ef558d412eda814", "url": "https://github.com/yahoo/elide/commit/486a37ea95b9d2aef6ece9b61ef558d412eda814", "message": "Refactoring.\n\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "94acfdd3e79b078ebc75161a38464d41e2c31d23", "url": "https://github.com/yahoo/elide/commit/94acfdd3e79b078ebc75161a38464d41e2c31d23", "message": "Template updates.\n\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "89b21e5dbc07d27c45b0377946c44257b1bff9d2", "url": "https://github.com/yahoo/elide/commit/89b21e5dbc07d27c45b0377946c44257b1bff9d2", "message": "Update the return type\n\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "15a744ee3ad35788c853064ef6086f683be071a2", "url": "https://github.com/yahoo/elide/commit/15a744ee3ad35788c853064ef6086f683be071a2", "message": "method to return class Name list.\n\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "ef92afb562d6e37e3b26feeefb8042087cdf1d07", "url": "https://github.com/yahoo/elide/commit/ef92afb562d6e37e3b26feeefb8042087cdf1d07", "message": "method to return class Name list.\n\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "a9b4a8b976695bc5538e3e8cd60ec464fca0043d", "url": "https://github.com/yahoo/elide/commit/a9b4a8b976695bc5538e3e8cd60ec464fca0043d", "message": "method to return class Name list.\n\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "2479564bda1e7da2fab443e32027254d4e0fd39f", "url": "https://github.com/yahoo/elide/commit/2479564bda1e7da2fab443e32027254d4e0fd39f", "message": "Adding @Entity", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "05cf8fdced62272feee455c2de7db94c5d46e2b3", "url": "https://github.com/yahoo/elide/commit/05cf8fdced62272feee455c2de7db94c5d46e2b3", "message": "Methods to hydrate security and config templates", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "45d7a76c2e9ddd43d622d04e9509d11c76abe558", "url": "https://github.com/yahoo/elide/commit/45d7a76c2e9ddd43d622d04e9509d11c76abe558", "message": "JavaDocs", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "10c6327e1e086f494934341706a92862deef3c54", "url": "https://github.com/yahoo/elide/commit/10c6327e1e086f494934341706a92862deef3c54", "message": "Pom updates", "committedDate": "2020-03-27T19:41:01Z", "type": "commit"}, {"oid": "10c6327e1e086f494934341706a92862deef3c54", "url": "https://github.com/yahoo/elide/commit/10c6327e1e086f494934341706a92862deef3c54", "message": "Pom updates", "committedDate": "2020-03-27T19:41:01Z", "type": "forcePushed"}, {"oid": "8000f604235ac46f9bb4a5b3690a8f7dd15903a5", "url": "https://github.com/yahoo/elide/commit/8000f604235ac46f9bb4a5b3690a8f7dd15903a5", "message": "Review Comments", "committedDate": "2020-03-27T20:59:49Z", "type": "commit"}, {"oid": "636cff97778c9bcbd00487cdce0b5f36c865517d", "url": "https://github.com/yahoo/elide/commit/636cff97778c9bcbd00487cdce0b5f36c865517d", "message": "Add prefix for Security Role", "committedDate": "2020-03-27T22:13:19Z", "type": "commit"}, {"oid": "21ff790f9be5f4a9e99e2e37cda439b31a5f2936", "url": "https://github.com/yahoo/elide/commit/21ff790f9be5f4a9e99e2e37cda439b31a5f2936", "message": "Merge branch 'elide-5.x-dynamic-config' into elide-5.x-dynamic-config-handlebars", "committedDate": "2020-03-30T20:31:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMwNzg2Ng==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r401307866", "bodyText": "As mentioned in the other comment, this should return multiple classes by looping the individual entries in roles. So this class should also return a map like hydrateTableTemplate.", "author": "moizarafat", "createdAt": "2020-04-01T01:36:24Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHydrator.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.ElideSecurity;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.ElideTable;\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Table;\n+import com.github.jknack.handlebars.Context;\n+import com.github.jknack.handlebars.EscapingStrategy;\n+import com.github.jknack.handlebars.EscapingStrategy.Hbs;\n+import com.github.jknack.handlebars.Handlebars;\n+import com.github.jknack.handlebars.Template;\n+import com.github.jknack.handlebars.helper.ConditionalHelpers;\n+import com.github.jknack.handlebars.io.ClassPathTemplateLoader;\n+import com.github.jknack.handlebars.io.TemplateLoader;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * Class for handlebars hydration.\n+ */\n+public class HandlebarsHydrator {\n+\n+    public static final EscapingStrategy MY_ESCAPING_STRATEGY = new Hbs(new String[][]{\n+        {\"<\", \"&lt;\" },\n+        {\">\", \"&gt;\" },\n+        {\"\\\"\", \"&quot;\" },\n+        {\"`\", \"&#x60;\" },\n+        {\"&\", \"&amp;\" }\n+    });\n+\n+    /**\n+     * Method to hydrate the Table template.\n+     * @param table ElideTable object\n+     * @return map with key as table java class name and value as table java class definition\n+     * @throws IOException IOException\n+     */\n+    public Map<String, String> hydrateTableTemplate(ElideTable table) throws IOException {\n+\n+        Map<String, String> tableClasses = new HashMap<>();\n+\n+        TemplateLoader loader = new ClassPathTemplateLoader(\"/templates\");\n+        Handlebars handlebars = new Handlebars(loader).with(MY_ESCAPING_STRATEGY);\n+        HandlebarsHelper helper = new HandlebarsHelper();\n+        handlebars.registerHelpers(ConditionalHelpers.class);\n+        handlebars.registerHelpers(helper);\n+        Template template = handlebars.compile(\"table\");\n+\n+        for (Table t : table.getTables()) {\n+            tableClasses.put(helper.capitalizeFirstLetter(t.getName()), template.apply(t));\n+        }\n+\n+        return tableClasses;\n+    }\n+\n+    /**\n+     * Method to replace variables in hjson config.\n+     * @param config hjson config string\n+     * @param replacements Map of variable key value pairs\n+     * @return hjson config string with variables replaced\n+     * @throws IOException IOException\n+     */\n+    public String hydrateConfigTemplate(String config, Map<String, Object> replacements) throws IOException {\n+\n+        Context context = Context.newBuilder(replacements).build();\n+        Handlebars handlebars = new Handlebars();\n+        Template template = handlebars.compileInline(config);\n+\n+        return template.apply(context);\n+    }\n+\n+    /**\n+     * Method to hydrate the Security template.\n+     * @param security ElideSecurity Object\n+     * @return security java class string\n+     * @throws IOException IOException\n+     */\n+    public String hydrateSecurityTemplate(ElideSecurity security) throws IOException {\n+\n+        TemplateLoader loader = new ClassPathTemplateLoader(\"/templates\");\n+        Handlebars handlebars = new Handlebars(loader).with(MY_ESCAPING_STRATEGY);\n+        handlebars.registerHelpers(ConditionalHelpers.class);\n+        handlebars.registerHelpers(new HandlebarsHelper());\n+        Template template = handlebars.compile(\"security\");\n+\n+        return template.apply(security);", "originalCommit": "21ff790f9be5f4a9e99e2e37cda439b31a5f2936", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1df5396477847581c244e59cb84f3efa249101d2", "url": "https://github.com/yahoo/elide/commit/1df5396477847581c244e59cb84f3efa249101d2", "message": "Merge branch 'elide-5.x-dynamic-config' into elide-5.x-dynamic-config-handlebars", "committedDate": "2020-04-01T15:29:46Z", "type": "commit"}, {"oid": "39651fdbfdd2ff3bf1c47007885fcc33135699e1", "url": "https://github.com/yahoo/elide/commit/39651fdbfdd2ff3bf1c47007885fcc33135699e1", "message": "Fix class names", "committedDate": "2020-04-01T15:33:43Z", "type": "commit"}, {"oid": "1015e470523481c24db0bf0dcac9d38fe67512d2", "url": "https://github.com/yahoo/elide/commit/1015e470523481c24db0bf0dcac9d38fe67512d2", "message": "Review Comments for returning Security classes as Map", "committedDate": "2020-04-01T15:40:32Z", "type": "commit"}, {"oid": "e00d0b25871443e04057f279861e1926fcae1e2a", "url": "https://github.com/yahoo/elide/commit/e00d0b25871443e04057f279861e1926fcae1e2a", "message": "Merge branch 'elide-5.x-dynamic-config-handlebars' of github.com:yahoo/elide into elide-5.x-dynamic-config-handlebars", "committedDate": "2020-04-01T15:44:25Z", "type": "commit"}, {"oid": "ec1cacf7cf1d3f8381b7704ba422a3a351b5d140", "url": "https://github.com/yahoo/elide/commit/ec1cacf7cf1d3f8381b7704ba422a3a351b5d140", "message": "Use getter methods for ElideConfigParser", "committedDate": "2020-04-01T16:08:34Z", "type": "commit"}, {"oid": "e61393c2e6710dcaf160d9fb3f09769b13851231", "url": "https://github.com/yahoo/elide/commit/e61393c2e6710dcaf160d9fb3f09769b13851231", "message": "merge", "committedDate": "2020-04-01T20:27:26Z", "type": "commit"}, {"oid": "694435c3244bbaa5b1170c553a35e01ce49c01a2", "url": "https://github.com/yahoo/elide/commit/694435c3244bbaa5b1170c553a35e01ce49c01a2", "message": "variable substitution/hydration", "committedDate": "2020-04-03T05:15:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM5NzQ4OA==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r403397488", "bodyText": "We should call populatePojo method by passing util.resolveVariables(tableJson, this.variables) as an argument and move the logic related to populating tables.addAll(table.getTables()); into populatePojo", "author": "moizarafat", "createdAt": "2020-04-04T00:41:00Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/ElideConfigParser.java", "diffHunk": "@@ -72,12 +72,14 @@ private void parse(String localConfigPath) throws Exception {\n \n         //security\n         String securityJson = util.getJsonConfig(localConfigPath, DynamicConfigHelpersUtil.SCHEMA_TYPE_SECURITY).get(0);\n-        populatePojo(securityJson, DynamicConfigHelpersUtil.SCHEMA_TYPE_SECURITY);\n+        populatePojo(util.resolveVariables(securityJson, this.variables),\n+                DynamicConfigHelpersUtil.SCHEMA_TYPE_SECURITY);\n \n         //table\n         Set<Table> tables = new HashSet<>();\n         for (String tableJson : util.getJsonConfig(localConfigPath, DynamicConfigHelpersUtil.SCHEMA_TYPE_TABLE)) {\n-            ElideTableConfig table = (ElideTableConfig) parseJsonConfig(tableJson,\n+            ElideTableConfig table = (ElideTableConfig) parseJsonConfig(", "originalCommit": "694435c3244bbaa5b1170c553a35e01ce49c01a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM4MjY2Mw==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r410382663", "bodyText": "resolved in #1210", "author": "AvaniMakwana", "createdAt": "2020-04-17T17:58:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM5NzQ4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM5NzU4Mg==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r403397582", "bodyText": "Is this intended?", "author": "moizarafat", "createdAt": "2020-04-04T00:41:37Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/test/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/ElideConfigParserTest.java", "diffHunk": "@@ -41,13 +42,15 @@ public void testValidateVariablePath() throws Exception {\n             assertEquals(t.getMeasures().get(0).getName() , t.getMeasures().get(0).getDescription());\n             assertEquals(\"MAX(score)\", t.getMeasures().get(0).getDefinition());\n             assertEquals(Table.Cardinality.LARGE, t.getCardinality());\n+            // test hydration, variable substitution\n+            assertEquals(Type.INTEGER, t.getMeasures().get(0).getType());\n         }\n     }\n \n     @Test\n     public void testNullConfig() {\n         try {\n-            testClass.parseConfigPath(null);\n+//            testClass.parseConfigPath(null);", "originalCommit": "694435c3244bbaa5b1170c553a35e01ce49c01a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM4MjYwNQ==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r410382605", "bodyText": "resolved in #1210", "author": "AvaniMakwana", "createdAt": "2020-04-17T17:58:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM5NzU4Mg=="}], "type": "inlineReview"}, {"oid": "c1016e14d984d06ecc34d0c3cd819baab523ca24", "url": "https://github.com/yahoo/elide/commit/c1016e14d984d06ecc34d0c3cd819baab523ca24", "message": "Merge branch 'elide-5.x-dynamic-config' into elide-5.x-dynamic-config-handlebars", "committedDate": "2020-04-04T23:46:16Z", "type": "commit"}, {"oid": "224cabea9c3e66c74171f280f06c98aa7931f72c", "url": "https://github.com/yahoo/elide/commit/224cabea9c3e66c74171f280f06c98aa7931f72c", "message": "Review Comments", "committedDate": "2020-04-17T15:40:25Z", "type": "commit"}, {"oid": "3d04fde754be854f9b00691496945a8e2c448945", "url": "https://github.com/yahoo/elide/commit/3d04fde754be854f9b00691496945a8e2c448945", "message": "Review Comments", "committedDate": "2020-04-17T15:54:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5NzU0OA==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r411597548", "bodyText": "Maybe call capitalizeFirstLetter here.", "author": "aklish", "createdAt": "2020-04-20T18:28:30Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/handlebars/HandlebarsHelper.java", "diffHunk": "@@ -0,0 +1,113 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.contrib.dynamicconfighelpers.parser.handlebars;\n+\n+import com.yahoo.elide.contrib.dynamicconfighelpers.model.Type;\n+import com.github.jknack.handlebars.Options;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Locale;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Helper class for handlebar template hydration.\n+ */\n+public class HandlebarsHelper {\n+\n+    private static final String EMPTY_STRING = \"\";\n+    private static final String STRING = \"String\";\n+    private static final String DATE = \"Date\";\n+    private static final String BIGDECIMAL = \"BigDecimal\";\n+    private static final String LONG = \"Long\";\n+    private static final String BOOLEAN = \"Boolean\";\n+    private static final String WHITESPACE_REGEX = \"\\\\s+\";\n+\n+    /**\n+     * Capitalize first letter of the string.\n+     * @param str string to capitalize first letter\n+     * @return string with first letter capitalized\n+     */\n+    public String capitalizeFirstLetter(String str) {\n+\n+        return (str == null || str.length() == 0) ? str : str.substring(0, 1).toUpperCase(Locale.ENGLISH)\n+                + str.substring(1);\n+    }\n+\n+    /**\n+     * Transform string to capitalize first letter of each word and remove spaces.\n+     * @param str String to be transformed\n+     * @return Capitalize First Letter of Each Word and remove spaces\n+     */\n+    public String firstCharOnlyToUpper(String str) {\n+\n+        return (str == null || str.length() == 0) ? str\n+                : String.join(EMPTY_STRING, Arrays.asList(str.trim().split(WHITESPACE_REGEX)).stream().map(\n+                        s -> s.substring(0, 1).toUpperCase(Locale.ENGLISH) + s.substring(1).toLowerCase(Locale.ENGLISH))", "originalCommit": "3d04fde754be854f9b00691496945a8e2c448945", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY2NTE5OA==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r411665198", "bodyText": "capitalizeFirstLetter is to change first character to uppercase and keep others as is.\nfirstCharOnlyToUpper is to change first character of each word to uppercase, change other\ncharacters to lower case and remove spaces. Renaming method name  to \"titleCaseRemoveSpaces\"\nAlso changing definition to \"s -> toUpperCase(s.substring(0, 1)) + toLowerCase(s.substring(1)))\" ,", "author": "rishi-aga", "createdAt": "2020-04-20T20:21:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5NzU0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM0MjI0NQ==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r413342245", "bodyText": "Calling capitalizeFirstLetter will run substring again even for 1 character passed to it, so we decided to skip that call.", "author": "moizarafat", "createdAt": "2020-04-22T21:22:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5NzU0OA=="}], "type": "inlineReview"}, {"oid": "a71fab0f6c2062d95fb283228b436916039ca370", "url": "https://github.com/yahoo/elide/commit/a71fab0f6c2062d95fb283228b436916039ca370", "message": "Review Comments", "committedDate": "2020-04-20T20:21:41Z", "type": "commit"}, {"oid": "e36cc01d6976ce0f511e47babd3b5b2e313b2138", "url": "https://github.com/yahoo/elide/commit/e36cc01d6976ce0f511e47babd3b5b2e313b2138", "message": "Merge with Dynamic Config Branch", "committedDate": "2020-04-22T19:32:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5NjQyNQ==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r413896425", "bodyText": "util.resolveVariables should also be called in populateTablesPojo.", "author": "moizarafat", "createdAt": "2020-04-23T15:28:27Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/ElideConfigParser.java", "diffHunk": "@@ -56,7 +56,8 @@ private void parse(String localConfigPath) throws Exception {\n \n         //security\n         String securityJson = util.getJsonConfig(localConfigPath, DynamicConfigHelpersUtil.SCHEMA_TYPE_SECURITY).get(0);\n-        populatePojo(securityJson, DynamicConfigHelpersUtil.SCHEMA_TYPE_SECURITY);\n+        populatePojo(util.resolveVariables(securityJson, this.variables),\n+                DynamicConfigHelpersUtil.SCHEMA_TYPE_SECURITY);\n \n         //table\n         populateTablesPojo(util.getJsonConfig(localConfigPath, DynamicConfigHelpersUtil.SCHEMA_TYPE_TABLE));", "originalCommit": "e36cc01d6976ce0f511e47babd3b5b2e313b2138", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIyNzIwMA==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r416227200", "bodyText": "populateTablesPojo method is calling util.resolveVariables", "author": "rishi-aga", "createdAt": "2020-04-27T23:52:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg5NjQyNQ=="}], "type": "inlineReview"}, {"oid": "39da827dda5536874d670e0b16765e2ddf3afbc9", "url": "https://github.com/yahoo/elide/commit/39da827dda5536874d670e0b16765e2ddf3afbc9", "message": "Fix test cases after rebase", "committedDate": "2020-04-23T17:51:19Z", "type": "commit"}, {"oid": "bda83724b973f59653a2224e91da9230ecb73f92", "url": "https://github.com/yahoo/elide/commit/bda83724b973f59653a2224e91da9230ecb73f92", "message": "Streamlining test case", "committedDate": "2020-04-23T18:44:02Z", "type": "commit"}, {"oid": "3ef27c868ea147fbc5aabb744bcdc9b5e49a6047", "url": "https://github.com/yahoo/elide/commit/3ef27c868ea147fbc5aabb744bcdc9b5e49a6047", "message": "Review comments and handlebars version", "committedDate": "2020-04-27T23:55:02Z", "type": "commit"}, {"oid": "4c84f7586bc7dc0367f692758df32af69b22f680", "url": "https://github.com/yahoo/elide/commit/4c84f7586bc7dc0367f692758df32af69b22f680", "message": "merge conflicts resolution", "committedDate": "2020-04-30T22:45:33Z", "type": "commit"}, {"oid": "e45089a2af1accbd62d87f2e9659d9899840e0a9", "url": "https://github.com/yahoo/elide/commit/e45089a2af1accbd62d87f2e9659d9899840e0a9", "message": "Merge errors", "committedDate": "2020-04-30T22:56:06Z", "type": "commit"}, {"oid": "b09b47accba6615d8c865b64f01cbe02520f6adc", "url": "https://github.com/yahoo/elide/commit/b09b47accba6615d8c865b64f01cbe02520f6adc", "message": "Merge errors", "committedDate": "2020-04-30T23:14:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI3ODk4NQ==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r418278985", "bodyText": "Don't print stack traces.  Instead use SLF4J to log them.", "author": "aklish", "createdAt": "2020-04-30T20:46:27Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/ElideConfigParser.java", "diffHunk": "@@ -39,50 +39,51 @@\n      */\n     public void parseConfigPath(String localFilePath) {\n         try {\n-      if (util.isNullOrEmpty(localFilePath)) {\n-    throw new NullPointerException(\"Config path is null\");\n-      }\n-      parse(localFilePath);\n+            if (util.isNullOrEmpty(localFilePath)) {\n+                throw new NullPointerException(\"Config path is null\");\n+            }\n+            parse(localFilePath);\n         } catch (Exception e) {\n-      e.printStackTrace();\n-      log.error(e.getMessage());\n+            e.printStackTrace();", "originalCommit": "3ef27c868ea147fbc5aabb744bcdc9b5e49a6047", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI3OTc4MQ==", "url": "https://github.com/yahoo/elide/pull/1220#discussion_r418279781", "bodyText": "Methods should not throw Exception.  They should be specific about the exceptions they throw.", "author": "aklish", "createdAt": "2020-04-30T20:48:06Z", "path": "elide-contrib/elide-dynamic-config-helpers/src/main/java/com/yahoo/elide/contrib/dynamicconfighelpers/parser/ElideConfigParser.java", "diffHunk": "@@ -39,50 +39,51 @@\n      */\n     public void parseConfigPath(String localFilePath) {\n         try {\n-      if (util.isNullOrEmpty(localFilePath)) {\n-    throw new NullPointerException(\"Config path is null\");\n-      }\n-      parse(localFilePath);\n+            if (util.isNullOrEmpty(localFilePath)) {\n+                throw new NullPointerException(\"Config path is null\");\n+            }\n+            parse(localFilePath);\n         } catch (Exception e) {\n-      e.printStackTrace();\n-      log.error(e.getMessage());\n+            e.printStackTrace();\n+            log.error(e.getMessage());\n         }\n     }\n \n     private void parse(String localConfigPath) throws Exception {\n-        //variables\n+        // variables", "originalCommit": "3ef27c868ea147fbc5aabb744bcdc9b5e49a6047", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ed4b3ff33c19974f371b6f90bb4b30a669ee2fbb", "url": "https://github.com/yahoo/elide/commit/ed4b3ff33c19974f371b6f90bb4b30a669ee2fbb", "message": "Remove Duplicate entries in POM", "committedDate": "2020-05-04T20:29:04Z", "type": "commit"}, {"oid": "ed4b3ff33c19974f371b6f90bb4b30a669ee2fbb", "url": "https://github.com/yahoo/elide/commit/ed4b3ff33c19974f371b6f90bb4b30a669ee2fbb", "message": "Remove Duplicate entries in POM", "committedDate": "2020-05-04T20:29:04Z", "type": "forcePushed"}, {"oid": "b7d2652207416e46a5d51da296c08fd92bd98063", "url": "https://github.com/yahoo/elide/commit/b7d2652207416e46a5d51da296c08fd92bd98063", "message": "Use if-else for table and sql source", "committedDate": "2020-05-04T20:46:42Z", "type": "commit"}, {"oid": "5b22ce39b20ea5b3e6c21b49079ca5dffcf83d3e", "url": "https://github.com/yahoo/elide/commit/5b22ce39b20ea5b3e6c21b49079ca5dffcf83d3e", "message": "Remove unused properties", "committedDate": "2020-05-06T20:47:09Z", "type": "commit"}, {"oid": "e78fa68cdea35f14a48d9b7c7feba3b952c60f26", "url": "https://github.com/yahoo/elide/commit/e78fa68cdea35f14a48d9b7c7feba3b952c60f26", "message": "Merge branch 'elide-5.x-dynamic-config' into elide-5.x-dynamic-config-handlebars", "committedDate": "2020-05-11T05:49:58Z", "type": "commit"}, {"oid": "971fab98b310024c421312c0e1f2f5eb2ee539c6", "url": "https://github.com/yahoo/elide/commit/971fab98b310024c421312c0e1f2f5eb2ee539c6", "message": "Update DynamicConfigHelpers.java", "committedDate": "2020-05-13T04:22:56Z", "type": "commit"}, {"oid": "f8dddc89cc901ca7bb3df6131661aec2966529f6", "url": "https://github.com/yahoo/elide/commit/f8dddc89cc901ca7bb3df6131661aec2966529f6", "message": "Update ElideConfigParser.java", "committedDate": "2020-05-13T04:23:47Z", "type": "commit"}, {"oid": "70f8f1ca22fe03b2e702d361e6cfb694db5d16e0", "url": "https://github.com/yahoo/elide/commit/70f8f1ca22fe03b2e702d361e6cfb694db5d16e0", "message": "Review Comments", "committedDate": "2020-05-13T04:43:38Z", "type": "commit"}, {"oid": "a2097065c69eac2eda20fe8e4acf240413fbe71c", "url": "https://github.com/yahoo/elide/commit/a2097065c69eac2eda20fe8e4acf240413fbe71c", "message": "Merge branch 'elide-5.x-dynamic-config' into elide-5.x-dynamic-config-handlebars", "committedDate": "2020-05-14T01:42:03Z", "type": "commit"}, {"oid": "b19a573cf8e52884da2a09a1398406e74d278644", "url": "https://github.com/yahoo/elide/commit/b19a573cf8e52884da2a09a1398406e74d278644", "message": "Update DynamicConfigHelpersTest.java", "committedDate": "2020-05-14T02:08:13Z", "type": "commit"}, {"oid": "4db405249fe2b939058c3681f09eef545947d7f6", "url": "https://github.com/yahoo/elide/commit/4db405249fe2b939058c3681f09eef545947d7f6", "message": "Update DynamicConfigHelpers.java", "committedDate": "2020-05-14T02:08:49Z", "type": "commit"}, {"oid": "3c0a14e6b67fcebc8c96ed42b60bc77145472332", "url": "https://github.com/yahoo/elide/commit/3c0a14e6b67fcebc8c96ed42b60bc77145472332", "message": "Update DynamicConfigHelpers.java", "committedDate": "2020-05-14T02:09:43Z", "type": "commit"}]}