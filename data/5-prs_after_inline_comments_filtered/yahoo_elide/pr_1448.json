{"pr_number": 1448, "pr_title": "Aggregation DataStore QueryLogger Implementation", "pr_createdAt": "2020-07-17T22:07:27Z", "pr_url": "https://github.com/yahoo/elide/pull/1448", "timeline": [{"oid": "f0d0931989c9f9a0af6adb579e12fdb49b9b07eb", "url": "https://github.com/yahoo/elide/commit/f0d0931989c9f9a0af6adb579e12fdb49b9b07eb", "message": "parent a14ccfbb7b558d27799b4e7b1916850519639708\nauthor Jack (\uc815\ud658) <QubitPi@users.noreply.github.com> 1559678988 -0700\ncommitter Aaron Klish <klish@verizonmedia.com> 1589583449 -0500\n\nCreate AggregationDataStore module (#845)\n\n* Create AggregationDataStore module\n\n* Address Aaron's comments\n\n* Fix build failure\n\nAggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\nDefine QueryEngine Contract (#867)\n\nFixed rebase on master\n\nSQL Query Engine  (#878)\n\n* AggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\nAdded calcite as a dependency.  Merged in changes for QueryEngine interface\n\nFixed checkstyle issues\n\nAdded basic H2 DB test harness\n\nStarted breaking out projections\n\nMoved getValue and setValue from PersistentResource to EntityDictionary\n\nAdded basic logic to hydrate entities\n\nAdded FromTable and FromSubquery annotations.  Add explicit exclusion of entity relationship hydration\n\nMinor cleanup\n\nRefactored HQLFilterOperation to take an alias generator\n\nAdded test support for RSQL filter generation. Some cleanup\n\nAdded basic support for WHERE clause filtering on the fact table\n\nAdded working test for subquery SQL\n\nAdded basic join logic for filters\n\nAdded a test with a subquery and a filter join\n\nRefactored Schema classes and Query to support metric aggregation SQL expansion\n\nAdded group by support\n\nAdded logic for ID generation\n\nAdded sorting logic and test\n\nAdded pagination support and testing\n\nAll column references use proper name now for SQL\n\nRemoved calcite as a query engine\n\nRefactored HQLFilterOperation so it can be used for Having and Where clause generaiton\n\nAdded HAVING clause support\n\nChanged Query to take schema instead of entityClass\n\nFirst pass at cleanup\n\nFixed checkstyles\n\nCleanup\n\nCleanup\n\nAdded a complex SQL expression test and fixed bugs\n\nFixed merge issues.  Added another test.  Added better logging\n\nFixed bug in pagination SQL generation\n\n* Build is working\n\n* Inspection rework\n\nAdd EntityProjection plumbing (#949)\n\n* AggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\n* Initial sketch\n\nPersistentResourceTest now passes\n\nLifeCycleTest tests now pass\n\nMore API changes for data store transaction.  Also fixed createObject in persistent resource to take the correct projection\n\nStarted to refactor tests\n\nIncludedProcessorTest refactored\n\nRefactored LifeCycleTest\n\nStarted refactor on PersistentResourceTest\n\nMore refactoring.  Fixed a bug in Resource.toPersistentResource\n\nOnly one test failing in PersistentResourceTest\n\nPersistentResourceTests now pass\n\nUpdateOnCreateTests now pass\n\nAdded skeleton for translating JSON-API URL path into an EntityProjection\n\nBasic EntityProjectionMaker almost complete\n\nAdded ability to merge entity projections by relationship\n\nAdded first test for EntityProjectionMaker\n\nNon-working veresion (but clean)\n\nTests now pass\n\nAll EntityProjectioNMaker tests pass\n\nElide-Core now builds\n\nAdded handling of sparse attributes and relationships\n\nExpanding attributes for included entities\n\nFixed a number of bugs found in IT tests\n\nFixed some of the EntityProjectionMaker tests\n\nFixed unit tests\n\nMade temporary modifications to exclude GraphQL (Build now passes)\n\nAdded sparse field unit tests for EntityProjectionMaker\n\n* Fixed build issues after rebase\n\n* Removed duplicated Schema class from rebase\n\n* Entity projection with aliases (#963)\n\n* Hacked up PersistentResource with new design\n\n* Core now compiles (and tests can run\n\n* EntityProjectionMaker tests pass\n\n* Build now passes (major cleanup still needed\n\n* Wire in entity projection4 json api (#964)\n\n* Fixed DataStore API.  Fixed a lot of the core unit tests\n\n* Checkstyles and more fixes\n\n* Hibernate 5 Tests Pass\n\n* Full build passes\n\n* Wire in entity projection4 json api (#965)\n\n* Initial concept.  No testing changed.\n\n* Core compiles and EntityProjectionMaker tests (original ones) now pass\n\n* Minor edits to TestRequestScope\n\n* Full build passes now\n\n* removed entity dictionary from entity projection\n\n* Pre-inspection cleanup\n\n* minor inspection fixup\n\nHydrate Relationship (#987)\n\n* AggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\n* Added basic H2 DB test harness\n\n* Started breaking out projections\n\n* Moved getValue and setValue from PersistentResource to EntityDictionary\n\n* Added basic logic to hydrate entities\n\n* Added FromTable and FromSubquery annotations.  Add explicit exclusion of entity relationship hydration\n\n* Refactored HQLFilterOperation to take an alias generator\n\n* Added test support for RSQL filter generation. Some cleanup\n\n* Added basic support for WHERE clause filtering on the fact table\n\n* Added working test for subquery SQL\n\n* Added basic join logic for filters\n\n* Added a test with a subquery and a filter join\n\n* Refactored Schema classes and Query to support metric aggregation SQL expansion\n\n* Added group by support\n\n* Added logic for ID generation\n\n* Added sorting logic and test\n\n* Added pagination support and testing\n\n* All column references use proper name now for SQL\n\n* Removed calcite as a query engine\n\n* Refactored HQLFilterOperation so it can be used for Having and Where clause generaiton\n\n* Added HAVING clause support\n\n* Changed Query to take schema instead of entityClass\n\n* First pass at cleanup\n\n* Fixed checkstyles\n\n* Cleanup\n\n* Hydrate Relationship\n\n* Cleanup\n\n* Added a complex SQL expression test and fixed bugs\n\n* Fixed merge issues.  Added another test.  Added better logging\n\n* Self-review\n\n* Self-review\n\n* Self-review\n\n* Self-review\n\n* Self-review\n\n* Address comments from @aklish\n\n* Refactor EntityHydrator (#893)\n\n* rebase\n\n* keep Jiaqi's changes\n\n* fix id\n\n* fix maven verify\n\n* Remove HQLFilterOperation\n\n* fix dictionary\n\n* fix SqlEngineTest\n\n* remove unused part\n\n* make codacy happy\n\n* should use getParametrizedType\n\n* address comments\n\nImplement GraphQLEntityProjectionMaker (#986)\n\n* AggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\n* Initial sketch\n\nPersistentResourceTest now passes\n\nLifeCycleTest tests now pass\n\nMore API changes for data store transaction.  Also fixed createObject in persistent resource to take the correct projection\n\nStarted to refactor tests\n\nIncludedProcessorTest refactored\n\nRefactored LifeCycleTest\n\nStarted refactor on PersistentResourceTest\n\nMore refactoring.  Fixed a bug in Resource.toPersistentResource\n\nOnly one test failing in PersistentResourceTest\n\nPersistentResourceTests now pass\n\nUpdateOnCreateTests now pass\n\nAdded skeleton for translating JSON-API URL path into an EntityProjection\n\nBasic EntityProjectionMaker almost complete\n\nAdded ability to merge entity projections by relationship\n\nAdded first test for EntityProjectionMaker\n\nNon-working veresion (but clean)\n\nTests now pass\n\nAll EntityProjectioNMaker tests pass\n\nElide-Core now builds\n\nAdded handling of sparse attributes and relationships\n\nExpanding attributes for included entities\n\nFixed a number of bugs found in IT tests\n\nFixed some of the EntityProjectionMaker tests\n\nFixed unit tests\n\nMade temporary modifications to exclude GraphQL (Build now passes)\n\nAdded sparse field unit tests for EntityProjectionMaker\n\n* Fixed build issues after rebase\n\n* GraphQL projection maker using document\n\n* Argument handling and fragment check\n\n* Add comments\n\n* Add fragment resolver\n\n* fix typo\n\n* break code into more methods\n\n* remove pagination and sorting\n\n* Removed duplicated Schema class from rebase\n\n* re-arrange keywords\n\n* Address comment\n\n* Add arguments for attribute fields\n\n* Handle arguments\n\n* support partial query, update edges/node logic\n\n* Entity projection with aliases\n\n* Entity projection with aliases (#963)\n\n* Hacked up PersistentResource with new design\n\n* Core now compiles (and tests can run\n\n* EntityProjectionMaker tests pass\n\n* Build now passes (major cleanup still needed\n\n* fix create relationship object using entity\n\n* Add tests passed\n\n* code clean up\n\n* refactor fatcher, fix test cases\n\n* rename keywords\n\n* rebase branch (#12)\n\n* rebased\n\n* Graphql projection refactor (#13)\n\n* fix fragment resolver\n\n* Fix variable resolver\n\n* Wire in entity projection4 json api (#964)\n\n* Fixed DataStore API.  Fixed a lot of the core unit tests\n\n* Checkstyles and more fixes\n\n* Hibernate 5 Tests Pass\n\n* Full build passes\n\n* Wire in entity projection4 json api (#965)\n\n* Initial concept.  No testing changed.\n\n* Core compiles and EntityProjectionMaker tests (original ones) now pass\n\n* Minor edits to TestRequestScope\n\n* Full build passes now\n\n* removed entity dictionary from entity projection\n\n* Pre-inspection cleanup\n\n* minor inspection fixup\n\n* rebase\n\n* Rebased on AggregationDataStore\n\n* clean up extra new lines\n\n* address comments\n\n* Builder pattern\n\n* update comments\n\n* remove projection in entity\n\n* fix jackson\n\n* Hydrate Relationship (#987) (#15)\n\n* Address some codecy comments\n\n* Add comment for partial query\n\n* Reenable tests\n\n* Address comments, refactor alias\n\n* Add test for alias\n\n* swapped test case\n\n* fix get type\n\nAdded AggregationDataStore Code (#991)\n\n* Adding testing for aggregation data store\n\n* Debugging integration tests\n\n* Continuing testing work\n\n* AggregationDataStore\n\n* AggregationDataStore testing\n\n* Added more tests\n\n* Aggregation Data Store\n\n* Cleaned up testing code\n\n* Cleaned up code, fixed helper for AggregationDataStore\n\n* end\n\n* Fixed checkstyle, other minor fixes\n\n* fixed comment\n\n* Minor fixes\n\n* Fixed id type issue, added exception for queries with no metrics\n\nFixed build (#993)\n\nMaking TimeDimension an interface (#992)\n\n[maven-release-plugin] prepare release 5.0.0-pr1\n\n[maven-release-plugin] prepare for next development iteration\n\nRenamed graphQL file to match test (#1002)\n\n[maven-release-plugin] prepare release 5.0.0-pr2\n\n[maven-release-plugin] prepare for next development iteration\n\nAdd JoinTo annotation (#1006)\n\n* Added JoinTo Annotation\n\n* Added working test\n\n* Added TODO comment for next PR\n\n* Added TODO comment for next PR\n\n* Added Sorting and Filtering support for JoinTo Columns\n\n* Fixed IT tests for Aggregation Data Store\n\n* Moved entityManager creation to happen separately for each query (#1008)\n\n* Moved entityManager creation to happen separately for each query\n\n* Closing EntityManager after each query\n\n* Inspection rework\n\nColumn annotation (#1017)\n\n* Solved column issue and added QueryEngineFactory\n\n* Caching query engine in AggregationDataStore\n\n* Fixed column description\n\n* Update SQLQueryEngine.java (#1019)\n\n* Add SQLMetrix, rearrange packages (#1020)\n\n* Add SQLMetrix, rearrange packages\n\n* address comment\n\nManager transacton manually (#1021)\n\n* Manager transacton manually\n\n* Add readonly\n\nHydrate GraphQL Schema with parameterized attributes (#1018)\n\n* GraphQL schema expose expected argument name and its type for each attribute\n\n* Change empty arguments to unmodifable set\n\nAggregationStore: Add multiple time grain definitions to schema (#1022)\n\n* Fixed checkstyle warnings and errors.  Separated the Query dimension interface from the Schema dimension interface\n\n* Added skeleton code to convert entity projection arguments into time grains\n\n* Cleanup\n\n* Class renames per inspection comments\n\n* Inspection comments\n\nRefactor time dimension logic (#1028)\n\n* Manager transacton manually\n\n* Add readonly\n\n* some rework\n\n* use getTimeDimension()\n\n* change exception\n\nISSUE-1026 Add support for @Subselect (#1038)\n\n* Manager transacton manually\n\n* Add readonly\n\n* some rework\n\n* use getTimeDimension()\n\n* change exception\n\n* ISSUE-1026 Add support for @Subselect\n\n* Address comments\n\nISSUE-1027 Support join for having clause (#1039)\n\n* Manager transacton manually\n\n* Add readonly\n\n* some rework\n\n* use getTimeDimension()\n\n* change exception\n\n* ISSUE-1027 Support join for having clause\n\nfunction name fixed to enableISO8601Dates (#1052)\n\nSupport for multiple queries at root is added (#1044)\n\n* Support for multiple queries at root is added\n\n* Added test with alias\n\n* comments resolved\n\nAdd time grain to GraphQL schema (#1042)\n\n* Added basic plumbing to push attributes from the entity projection down to the QueryEngine\n\n* Added logic to expand SQL time expression in SQLQueryEngine\n\n* Added SQLQueryEngine tests\n\n* Added IT tests\n\n* The AggregationStore now adds graphql parameters for parameterized columns\n\n* Minor refactor\n\n* Inspection rework\n\n* Minor fix\n\nSupport multiple query of same entity with different alias (#1055)\n\n* Support multiple query of same entity with different alias\n\n* add static method to generate keyname for GraphQLProjectionInfo projections\n\n* Remove aliasPartialQuerySameAttribute\n\nMetadataStore Models (#1068)\n\n* Manager transacton manually\n\n* Add readonly\n\n* some rework\n\n* use getTimeDimension()\n\n* change exception\n\n* Metadatastore models\n\n* Address comments\n\n* address comments\n\n* move root\n\n* fix style check\n\nSQLQueryTemplate Model (#1073)\n\n* SQLQueryTemplate\n\n* SQLTables\n\n* refactor\n\n* update sql dimension projection\n\n* update sql dimension projection\n\n* clean up dimension projection\n\n* refactor sql components\n\n* aggregatable field rework\n\n* add comments\n\n* rearrange packages\n\n* Add dimension projection back\n\n* fix checkstyle\n\n* Add dictionary\n\n* Simplify MetricFunction and SQLQueryTemplate\n\n* Address comments\n\nIntegrate Metadata Model and SQLQueryTemplate Model (#1083)\n\n* Integrate Metadata Model and SQLQueryTemplate Model\n\n* remove AggregationDictionary and AggregationManager\n\n* Add timezone\n\n* Can only query analyticView\n\nFixed issues with rebase\n\nAdd auto configuration for aggregation store (#1087)\n\n* Added autoconfiguration for QueryEngineFactory\n\n* Unified class scanning.  Started cleaning up datastores so they only register the entities they manage\n\n* Full build passes\n\n* Minor cleanup\n\n* Minor refactoring\n\n* Added EntityManagerFactory bean configuratino\n\n* Refactored class scanning for Elide standalone\n\n* Updated spring boot starter pom\n\n* Removed @Entity from all metadata models.  Started cleaning up entity dictionary entity registration\n\n* Broken implementation.  Just checking in so I can revert if needed.\n\n* All tests pass\n\n* Added unit tests\n\n* Minor cleanup\n\n* One more fix\n\n* Fixed broken tests\n\n* Added package include support back\n\n* Class scanning for annotations ignores inherited\n\n* Added a test based on inspection comments\n\n* Inspection comment fix\n\n* Changed initalization of MetadataStore\n\n* More inspection rework\n\n* Turned back on OWASP scanning\n\n* More rework\n\nremove @Inherited (#1092)\n\nSupport Non JPA Entity in AggregationDataStore (#1051)\n\n* Create AggregationDataStore module (#845)\n\n* Create AggregationDataStore module\n\n* Address Aaron's comments\n\n* Fix build failure\n\nAggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\nDefine QueryEngine Contract (#867)\n\nFixed rebase on master\n\nSQL Query Engine  (#878)\n\n* AggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\nAdded calcite as a dependency.  Merged in changes for QueryEngine interface\n\nFixed checkstyle issues\n\nAdded basic H2 DB test harness\n\nStarted breaking out projections\n\nMoved getValue and setValue from PersistentResource to EntityDictionary\n\nAdded basic logic to hydrate entities\n\nAdded FromTable and FromSubquery annotations.  Add explicit exclusion of entity relationship hydration\n\nMinor cleanup\n\nRefactored HQLFilterOperation to take an alias generator\n\nAdded test support for RSQL filter generation. Some cleanup\n\nAdded basic support for WHERE clause filtering on the fact table\n\nAdded working test for subquery SQL\n\nAdded basic join logic for filters\n\nAdded a test with a subquery and a filter join\n\nRefactored Schema classes and Query to support metric aggregation SQL expansion\n\nAdded group by support\n\nAdded logic for ID generation\n\nAdded sorting logic and test\n\nAdded pagination support and testing\n\nAll column references use proper name now for SQL\n\nRemoved calcite as a query engine\n\nRefactored HQLFilterOperation so it can be used for Having and Where clause generaiton\n\nAdded HAVING clause support\n\nChanged Query to take schema instead of entityClass\n\nFirst pass at cleanup\n\nFixed checkstyles\n\nCleanup\n\nCleanup\n\nAdded a complex SQL expression test and fixed bugs\n\nFixed merge issues.  Added another test.  Added better logging\n\nFixed bug in pagination SQL generation\n\n* Build is working\n\n* Inspection rework\n\nAdd EntityProjection plumbing (#949)\n\n* AggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\n* Initial sketch\n\nPersistentResourceTest now passes\n\nLifeCycleTest tests now pass\n\nMore API changes for data store transaction.  Also fixed createObject in persistent resource to take the correct projection\n\nStarted to refactor tests\n\nIncludedProcessorTest refactored\n\nRefactored LifeCycleTest\n\nStarted refactor on PersistentResourceTest\n\nMore refactoring.  Fixed a bug in Resource.toPersistentResource\n\nOnly one test failing in PersistentResourceTest\n\nPersistentResourceTests now pass\n\nUpdateOnCreateTests now pass\n\nAdded skeleton for translating JSON-API URL path into an EntityProjection\n\nBasic EntityProjectionMaker almost complete\n\nAdded ability to merge entity projections by relationship\n\nAdded first test for EntityProjectionMaker\n\nNon-working veresion (but clean)\n\nTests now pass\n\nAll EntityProjectioNMaker tests pass\n\nElide-Core now builds\n\nAdded handling of sparse attributes and relationships\n\nExpanding attributes for included entities\n\nFixed a number of bugs found in IT tests\n\nFixed some of the EntityProjectionMaker tests\n\nFixed unit tests\n\nMade temporary modifications to exclude GraphQL (Build now passes)\n\nAdded sparse field unit tests for EntityProjectionMaker\n\n* Fixed build issues after rebase\n\n* Removed duplicated Schema class from rebase\n\n* Entity projection with aliases (#963)\n\n* Hacked up PersistentResource with new design\n\n* Core now compiles (and tests can run\n\n* EntityProjectionMaker tests pass\n\n* Build now passes (major cleanup still needed\n\n* Wire in entity projection4 json api (#964)\n\n* Fixed DataStore API.  Fixed a lot of the core unit tests\n\n* Checkstyles and more fixes\n\n* Hibernate 5 Tests Pass\n\n* Full build passes\n\n* Wire in entity projection4 json api (#965)\n\n* Initial concept.  No testing changed.\n\n* Core compiles and EntityProjectionMaker tests (original ones) now pass\n\n* Minor edits to TestRequestScope\n\n* Full build passes now\n\n* removed entity dictionary from entity projection\n\n* Pre-inspection cleanup\n\n* minor inspection fixup\n\nHydrate Relationship (#987)\n\n* AggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\n* Added basic H2 DB test harness\n\n* Started breaking out projections\n\n* Moved getValue and setValue from PersistentResource to EntityDictionary\n\n* Added basic logic to hydrate entities\n\n* Added FromTable and FromSubquery annotations.  Add explicit exclusion of entity relationship hydration\n\n* Refactored HQLFilterOperation to take an alias generator\n\n* Added test support for RSQL filter generation. Some cleanup\n\n* Added basic support for WHERE clause filtering on the fact table\n\n* Added working test for subquery SQL\n\n* Added basic join logic for filters\n\n* Added a test with a subquery and a filter join\n\n* Refactored Schema classes and Query to support metric aggregation SQL expansion\n\n* Added group by support\n\n* Added logic for ID generation\n\n* Added sorting logic and test\n\n* Added pagination support and testing\n\n* All column references use proper name now for SQL\n\n* Removed calcite as a query engine\n\n* Refactored HQLFilterOperation so it can be used for Having and Where clause generaiton\n\n* Added HAVING clause support\n\n* Changed Query to take schema instead of entityClass\n\n* First pass at cleanup\n\n* Fixed checkstyles\n\n* Cleanup\n\n* Hydrate Relationship\n\n* Cleanup\n\n* Added a complex SQL expression test and fixed bugs\n\n* Fixed merge issues.  Added another test.  Added better logging\n\n* Self-review\n\n* Self-review\n\n* Self-review\n\n* Self-review\n\n* Self-review\n\n* Address comments from @aklish\n\n* Refactor EntityHydrator (#893)\n\n* rebase\n\n* keep Jiaqi's changes\n\n* fix id\n\n* fix maven verify\n\n* Remove HQLFilterOperation\n\n* fix dictionary\n\n* fix SqlEngineTest\n\n* remove unused part\n\n* make codacy happy\n\n* should use getParametrizedType\n\n* address comments\n\nImplement GraphQLEntityProjectionMaker (#986)\n\n* AggregationDataStore: Schema (#846)\n\n* AggregationDataStore: Static Attribute Aggregation\n\n* Address comments\n\n* Implement TimeDimension and all its supporting components\n\n* refactor\n\n* Address comments from @aklish\n\n* Address comments from @aklish && Tests & Javadoc\n\n* Address comments from @aklish\n\n* Address comments from @aklish and @hellohanchen\n\n* Address comments from Aaron\n\n* ToMany is not supported\n\n* Address comments from Aaron\n\n* Initial sketch\n\nPersistentResourceTest now passes\n\nLifeCycleTest tests now pass\n\nMore API changes for data store transaction.  Also fixed createObject in persistent resource to take the correct projection\n\nStarted to refactor tests\n\nIncludedProcessorTest refactored\n\nRefactored LifeCycleTest\n\nStarted refactor on PersistentResourceTest\n\nMore refactoring.  Fixed a bug in Resource.toPersistentResource\n\nOnly one test failing in PersistentResourceTest\n\nPersistentResourceTests now pass\n\nUpdateOnCreateTests now pass\n\nAdded skeleton for translating JSON-API URL path into an EntityProjection\n\nBasic EntityProjectionMaker almost complete\n\nAdded ability to merge entity projections by relationship\n\nAdded first test for EntityProjectionMaker\n\nNon-working veresion (but clean)\n\nTests now pass\n\nAll EntityProjectioNMaker tests pass\n\nElide-Core now builds\n\nAdded handling of sparse attributes and relationships\n\nExpanding attributes for included entities\n\nFixed a number of bugs found in IT tests\n\nFixed some of the EntityProjectionMaker tests\n\nFixed unit tests\n\nMade temporary modifications to exclude GraphQL (Build now passes)\n\nAdded sparse field unit tests for EntityProjectionMaker\n\n* Fixed build issues after rebase\n\n* GraphQL projection maker using document\n\n* Argument handling and fragment check\n\n* Add comments\n\n* Add fragment resolver\n\n* fix typo\n\n* break code into more methods\n\n* remove pagination and sorting\n\n* Removed duplicated Schema class from rebase\n\n* re-arrange keywords\n\n* Address comment\n\n* Add arguments for attribute fields\n\n* Handle arguments\n\n* support partial query, update edges/node logic\n\n* Entity projection with aliases\n\n* Entity projection with aliases (#963)\n\n* Hacked up PersistentResource with new design\n\n* Core now compiles (and tests can run\n\n* EntityProjectionMaker tests pass\n\n* Build now passes (major cleanup still needed\n\n* fix create relationship object using entity\n\n* Add tests passed\n\n* code clean up\n\n* refactor fatcher, fix test cases\n\n* rename keywords\n\n* rebase branch (#12)\n\n* rebased\n\n* Graphql projection refactor (#13)\n\n* fix fragment resolver\n\n* Fix variable resolver\n\n* Wire in entity projection4 json api (#964)\n\n* Fixed DataStore API.  Fixed a lot of the core unit tests\n\n* Checkstyles and more fixes\n\n* Hibernate 5 Tests Pass\n\n* Full build passes\n\n* Wire in entity projection4 json api (#965)\n\n* Initial concept.  No testing changed.\n\n* Core compiles and EntityProjectionMaker tests (original ones) now pass\n\n* Minor edits to TestRequestScope\n\n* Full build passes now\n\n* removed entity dictionary from entity projection\n\n* Pre-inspection cleanup\n\n* minor inspection fixup\n\n* rebase\n\n* Rebased on AggregationDataStore\n\n* clean up extra new lines\n\n* address comments\n\n* Builder pattern\n\n* update comments\n\n* remove projection in entity\n\n* fix jackson\n\n* Hydrate Relationship (#987) (#15)\n\n* Address some codecy comments\n\n* Add comment for partial query\n\n* Reenable tests\n\n* Address comments, refactor alias\n\n* Add test for alias\n\n* swapped test case\n\n* fix get type\n\nAdded AggregationDataStore Code (#991)\n\n* Adding testing for aggregation data store\n\n* Debugging integration tests\n\n* Continuing testing work\n\n* AggregationDataStore\n\n* AggregationDataStore testing\n\n* Added more tests\n\n* Aggregation Data Store\n\n* Cleaned up testing code\n\n* Cleaned up code, fixed helper for AggregationDataStore\n\n* end\n\n* Fixed checkstyle, other minor fixes\n\n* fixed comment\n\n* Minor fixes\n\n* Fixed id type issue, added exception for queries with no metrics\n\nFixed build (#993)\n\nMaking TimeDimension an interface (#992)\n\n* [maven-release-plugin] prepare release 5.0.0-pr1\n\n* [maven-release-plugin] prepare for next development iteration\n\n* Renamed graphQL file to match test (#1002)\n\n* [maven-release-plugin] prepare release 5.0.0-pr2\n\n* [maven-release-plugin] prepare for next development iteration\n\n* Add JoinTo annotation (#1006)\n\n* Added JoinTo Annotation\n\n* Added working test\n\n* Added TODO comment for next PR\n\n* Added TODO comment for next PR\n\n* Added Sorting and Filtering support for JoinTo Columns\n\n* Fixed IT tests for Aggregation Data Store\n\n* Moved entityManager creation to happen separately for each query (#1008)\n\n* Moved entityManager creation to happen separately for each query\n\n* Closing EntityManager after each query\n\n* Inspection rework\n\n* Column annotation (#1017)\n\n* Solved column issue and added QueryEngineFactory\n\n* Caching query engine in AggregationDataStore\n\n* Fixed column description\n\n* Update SQLQueryEngine.java (#1019)\n\n* Add SQLMetrix, rearrange packages (#1020)\n\n* Add SQLMetrix, rearrange packages\n\n* address comment\n\n* Manager transacton manually\n\n* Add readonly\n\n* Manager transacton manually (#1021)\n\n* Manager transacton manually\n\n* Add readonly\n\n* Hydrate GraphQL Schema with parameterized attributes (#1018)\n\n* GraphQL schema expose expected argument name and its type for each attribute\n\n* Change empty arguments to unmodifable set\n\n* AggregationStore: Add multiple time grain definitions to schema (#1022)\n\n* Fixed checkstyle warnings and errors.  Separated the Query dimension interface from the Schema dimension interface\n\n* Added skeleton code to convert entity projection arguments into time grains\n\n* Cleanup\n\n* Class renames per inspection comments\n\n* Inspection comments\n\n* some rework\n\n* use getTimeDimension()\n\n* change exception\n\n* Refactor time dimension logic (#1028)\n\n* Manager transacton manually\n\n* Add readonly\n\n* some rework\n\n* use getTimeDimension()\n\n* change exception\n\n* ISSUE-1026 Add support for @Subselect (#1038)\n\n* Manager transacton manually\n\n* Add readonly\n\n* some rework\n\n* use getTimeDimension()\n\n* change exception\n\n* ISSUE-1026 Add support for @Subselect\n\n* Address comments\n\n* ISSUE-1027 Support join for having clause (#1039)\n\n* Manager transacton manually\n\n* Add readonly\n\n* some rework\n\n* use getTimeDimension()\n\n* change exception\n\n* ISSUE-1027 Support join for having clause\n\n* View Design\n\n* Add tests and cleanup\n\n* rename annotation\n\n* function name fixed to enableISO8601Dates (#1052)\n\n* fix bugs\n\n* Support for multiple queries at root is added (#1044)\n\n* Support for multiple queries at root is added\n\n* Added test with alias\n\n* comments resolved\n\n* merge annotations\n\n* don't group by view relationship\n\n* Add time grain to GraphQL schema (#1042)\n\n* Added basic plumbing to push attributes from the entity projection down to the QueryEngine\n\n* Added logic to expand SQL time expression in SQLQueryEngine\n\n* Added SQLQueryEngine tests\n\n* Added IT tests\n\n* The AggregationStore now adds graphql parameters for parameterized columns\n\n* Minor refactor\n\n* Inspection rework\n\n* Minor fix\n\n* Support multiple query of same entity with different alias (#1055)\n\n* Support multiple query of same entity with different alias\n\n* add static method to generate keyname for GraphQLProjectionInfo projections\n\n* Remove aliasPartialQuerySameAttribute\n\n* MetadataStore Models (#1068)\n\n* Manager transacton manually\n\n* Add readonly\n\n* some rework\n\n* use getTimeDimension()\n\n* change exception\n\n* Metadatastore models\n\n* Address comments\n\n* address comments\n\n* move root\n\n* fix style check\n\n* SQLQueryTemplate Model (#1073)\n\n* SQLQueryTemplate\n\n* SQLTables\n\n* refactor\n\n* update sql dimension projection\n\n* update sql dimension projection\n\n* clean up dimension projection\n\n* refactor sql components\n\n* aggregatable field rework\n\n* add comments\n\n* rearrange packages\n\n* Add dimension projection back\n\n* fix checkstyle\n\n* Add dictionary\n\n* Simplify MetricFunction and SQLQueryTemplate\n\n* Address comments\n\n* Integrate Metadata Model and SQLQueryTemplate Model (#1083)\n\n* Integrate Metadata Model and SQLQueryTemplate Model\n\n* remove AggregationDictionary and AggregationManager\n\n* Add timezone\n\n* Can only query analyticView\n\n* integrate view with aggregation and metadata\n\n* remove includeField\n\n* remove @view\n\n* Use NonEntityDictionary\n\n* remove id\n\n* revert access changes\n\n* fix JPA entity check\n\n* remove @Entity from analyticViews\n\n* use table name as relationship type id\n\n* revert NonEntitydictinoary\n\n* tiny rework\n\n* Integration tests\n\n* Add jsonapi ittest\n\n* aggregation data store doesn't manage jpa entities\n\n* address comments\n\nfix integration dependencies (#1093)\n\n[maven-release-plugin] prepare release 5.0.0-pr3\n\n[maven-release-plugin] prepare for next development iteration\n\nFixed elide standalone pom from rebase\n\nFixed minor bug in rebase\n\nFixed rebase\n\nImproving class scanning performance for MetadataStore (#1117)\n\nEnable elide5 travis builds (#1129)\n\n* Move repeated @Sql annotations to class level (#1119)\n\n* Turning on travis builds with code coverage for Elide 5.x\n\n* Fixing security issue in spring-boot-web\n\nCo-authored-by: Brutus5000 <Brutus5000@gmx.net>\n\nFix sorting and ambiguous join issue (#1127)\n\n* Added sorting on aggregated metric based on latest elide-5.x\n\n* Fix ambiguity problem\n\n* update comments\n\n* fix codacy\n\n* refactor generateColumnReference\n\n* update comment\n\n* address comments\n\n* test cleanup\n\n* update unittest\n\n* fix elide core alias\n\n* QueryValidatorTest\n\n* EntityProjectionTranslatorTest\n\n* go joinFragment approach\n\n* delete jointrienode\n\nSupport no metric query (#1137)\n\n[maven-release-plugin] prepare release 5.0.0-pr4\n\n[maven-release-plugin] prepare for next development iteration\n\nCheck dependency injection (#1138)\n\n* Move repeated @Sql annotations to class level (#1119)\n\n* Fixing OWASP security warning for Tomcat dependency in Spring Web (#1132)\n\n* Adding support for dependency injection of Checks.  Added test injection classes\n\n* Unit tests pass\n\n* Tests pass\n\n* Removed Initializer Concept\n\nCo-authored-by: Brutus5000 <Brutus5000@gmx.net>\n\nFix travis log length (#1140)\n\n* Move repeated @Sql annotations to class level (#1119)\n\n* Fixing OWASP security warning for Tomcat dependency in Spring Web (#1132)\n\n* Removed unnecessary request/response logging (to shorten travis logs)\n\n* Address inspection comments\n\n* Address inspection comments\n\n* Address inspection comments\n\n* Removed logging of graphQL model building to shorten length\n\n* Fixed compilation error\n\nCo-authored-by: Brutus5000 <Brutus5000@gmx.net>\n\n[maven-release-plugin] prepare release 5.0.0-pr5\n\n[maven-release-plugin] prepare for next development iteration\n\nRefactoring Elide Security Checks (#1144)\n\nRemoved UpdateOnCreate.  Refactored AuditLogger, Pagination, & Sorting (#1146)\n\n* Removed UpdateOnCreate.  Refactored AuditLogger\n\n* Refactored Sorting\n\n* Refactored Pagination\n\n* Refactored Pagination\n\n* Pagination refactor builds and tests pass\n\n* Codacy fixes\n\n* Inspection rework\n\n* Fixes build\n\n* More inspection rework\n\n* Fix build\n\nRefactor share permission (#1154)\n\n* Refactored Sorting\n\n* Refactored Pagination\n\n* Refactored Pagination\n\n* Pagination refactor builds and tests pass\n\n* Codacy fixes\n\n* Refactored SharePermission to NonTransferable\n\n* Fixed build\n\n* Fixed startup bug\n\n* Fixed codacy and inspection comments\n\n* Update elide-core/src/main/java/com/yahoo/elide/core/EntityDictionary.java\n\nCo-Authored-By: Jon Kilroy <jkilroy@gmail.com>\n\n* Inspection rework\n\nCo-authored-by: Jon Kilroy <jkilroy@gmail.com>\n\nmetadata refactor (#1179)\n\n* metadata refactor\n\n* merge table and analyticView\n\n* fix reflection package\n\n* Make Table constrcut its own columns\n\n* table json type alias\n\n* add comment\n\n@Join and JoinPath\n\nadd comment\n\nhide non-jpd entities in grpahql\n\nhide joins\n\nrefactor hidden\n\nremove ant\n\nremove relationshp, update model (#1186)\n\nRebased on master\n\n[maven-release-plugin] prepare release 5.0.0-pr6\n\n[maven-release-plugin] prepare for next development iteration\n\nsourceColumn (#1196)\n\n* sourceColumn\n\n* address comment\n\n* change to sourcePath\n\nCleaning up ElideSettings\n\nAdded more test fixes\n\nFixed a number of broken tests\n\nBuild completes\n\nFixed JSON-API Patch Response\n\nFixed GraphQL errors.  Added better errors for Forbidden Access Exception.\n\nMinor fix\n\nAdded setId to EntityDictionary\n\nInitial version\n\nAll test pass except for spring\n\nBuild passes\n\nAdding checkstyle comments for classes\n\nInspection comments\n\nFixed checkstyle issues\n\nChange the way types are named in the GraphQL schema (#1215)\n\n* name utils\n\n* ready for review\n\n* fix: AggregationDataStoreIntegrationTest#testGraphQLSchema\n\nLabel Resolver for Dimension Formula (#1208)\n\n* sql expression to dimension formula\n\n* Metric formula\n\n* Add unit tests\n\n* refacot formula references\n\n* fix comment\n\n* fix comment\n\n* resolve physical column\n\n* refactor dimensionFormula\n\n* cleanup\n\n* label resolver\n\n* cleanup\n\n* refactor\n\n* cleanup\n\n* move code\n\n* labelStore\n\n* labelStore 2\n\n* remove generator\n\n* refactor metric formula\n\n* address comments\n\n* move symbol table into sql query engine\n\n* remove sourceColumn\n\n* update reference expression\n\n* visitor design\n\n* add comments\n\n* add unit join path test\n\n* fix timeDimensionProjection\n\n* fix null value number\n\n* address comments\n\n* fix codacy\n\nCo-authored-by: hchen04 <han.chen@oath.com>\n\nFixing broken javadoc\n\nColumnProjection Refactor (#1239)\n\n* unify projections\n\n* remove getFunction()\n\n* add table into query template\n\nCo-authored-by: hchen04 <han.chen@oath.com>\n\nRefactored metric SQL expansion to occur dynamically at query time ra\u2026 (#1270)\n\n* Refactored metric SQL expansion to occur dynamically at query time rather than statically during service initialization\n\n* Update elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/queryengines/sql/query/SQLMetricProjection.java\n\nCo-Authored-By: Jon Kilroy <jkilroy@gmail.com>\n\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\nCo-authored-by: Jon Kilroy <jkilroy@gmail.com>\n\nRemove path logic from aggregation store (#1271)\n\n* Extended query validation to ensure where clause and sorting clauses don't traverse relationships\n\n* Added error check for relationship traversal for Having clauses\n\n* Hacked up logic to remove reference Table resolve references that take a path\n\n* Minor refactoring\n\n* Removed logic to extend join path\n\n* Refactored column projections to use generics\n\n* Removed reference functions from MetricProjection base class\n\n* Refactored so that all SQL generation is done inside the ColumnProjection\n\n* Refactored so all projection happens through projections\n\n* Refactored column projection creation\n\n* Removed unnecessary code\n\n* Added templateQuery to arguments required to generate SQL in column projections\n\n* Fixed codacy issues\n\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\n\nAdded InMemoryStore to list of datastores that run IT tests (#1225)\n\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\n\nAdding TimeDimensions to Table (#1273)\n\nElide 5.x async (#1203)\n\n* Adding Async Entity Models\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding async module and fixing parent pom version\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding async service classes, security and cleanup services\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding Copyright License Header to Async module classes\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Using new request scope for datastore transactions\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Remove thread sleep used in testing\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing based on code quality review from codacy\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing additional issues based on code quality review from codacy\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding getter for AsyncQueryResult\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Reformatting.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding mappedBy.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Fixing several review comments - pom, lombok, thread exec\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing codacity errors\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Moving all the DB ORM logic to a utility class for Async\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Remove dependency on number of hosts, delete permission, separate method for interrupttime calculation\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Variable Naming convention.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Variable Naming convention.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Removing unwanted params.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Making cleaner a separate service.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Remove unwanted params.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Remove unwanted tabs.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Updating order of modules.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding cleanup sql.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding delete logic.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding query result retention.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Resolving build error.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Changing AsyncDbUtil to use Functional Interface\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Removing sleep\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding functional interface logic for executeInTransaction\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding debug statements for AsyncDbUtil\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Codacity errors, exception handling\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding Async Entity Models\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding async module and fixing parent pom version\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding async service classes, security and cleanup services\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding Copyright License Header to Async module classes\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Using new request scope for datastore transactions\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Remove thread sleep used in testing\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing based on code quality review from codacy\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing additional issues based on code quality review from codacy\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding getter for AsyncQueryResult\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Reformatting.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding mappedBy.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Fixing several review comments - pom, lombok, thread exec\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing codacity errors\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Moving all the DB ORM logic to a utility class for Async\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Remove dependency on number of hosts, delete permission, separate method for interrupttime calculation\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Variable Naming convention.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Variable Naming convention.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Removing unwanted params.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Making cleaner a separate service.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Remove unwanted params.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Remove unwanted tabs.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Updating order of modules.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding cleanup sql.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding delete logic.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding query result retention.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Resolving build error.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Changing AsyncDbUtil to use Functional Interface\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Removing sleep\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding functional interface logic for executeInTransaction\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding debug statements for AsyncDbUtil\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Codacity errors, exception handling\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Rebased with elide-5.x and changed User principal logic\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Rebase\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Changing CleanerThread to use ExecuteInTransaction\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Removing unused imports\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Delete Method changes\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Overriding hashCode and equals\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Overriding hashCode and equals\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Removing unused method\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Changing response logic for AsyncQuery\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding return to delete method\n\n* Resolving Review Comments\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Resolve some review comments\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Changing the DAO contract and updating references to DAO\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Removing singletons and extra constructors, simplyfing logic\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding default constructor and setters for DefaultDAO\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing codacy error\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Changing Base to use correct obj\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing review comments\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Resolving review comments\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Review comments\n\nCo-authored-by: Abhino <Abhino@gmail.com>\n\n* Elide 5.x elide-async integration in elide-standalone (#1205)\n\n* Integrating elide-async.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Default enableAsync to False.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Default enableAsync to False.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Integrating elide-async.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Default enableAsync to False.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Default enableAsync to False.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Resolving review comments.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Resolving review comments.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Removing unwanted params.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Binding Cleaner service.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\nBinding Cleaner service.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding query result retention.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Integrating elide-async.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Default enableAsync to False.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Default enableAsync to False.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Integrating elide-async.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Resolving review comments.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Resolving review comments.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Removing unwanted params.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Binding Cleaner service.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\nBinding Cleaner service.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding query result retention.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Making AsyncQueryDAO configurable\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Making AsyncQueryDAO configurable\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Review comments\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Review comments\n\nCo-authored-by: abhino <abhino@gmail.com>\n\n* Changing call to DefaultAsyncQueryDAO\n\n* Review comments\n\nCo-authored-by: Abhino <Abhino@gmail.com>\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Elide 5.x elide-async integration in elide-spring (#1204)\n\n* Integrating elide-async.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\nIntegrating elide-async.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Removing unwanted params.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Binding Cleaner service.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding query result retention.\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding DAO configuration\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Checkstyle error\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Review comments\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Review comments\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Review comments\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Codacy Error\n\nCo-authored-by: Abhino <Abhino@gmail.com>\n\n* Changing include type to asyncQuery to avoid conflict\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Sync\n\nCo-authored-by: Abhino <Abhino@gmail.com>\n\n* Singleton for Cleaner Service\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Singleton for Cleaner Service\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Singleton for Cleaner Service\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Singleton for Executor Service\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Sync with Standalone Value\n\n* Changes to change UUID columns type as varchar(36)\n\n* Review Comments\n\n* Review Comments\n\n* Fix review comments\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Updating per review comments\n\n* Remove unused import\n\n* Removing status change to Queued\n\n* removing unused import\n\n* prepersist for status\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\nCo-authored-by: avijay <abhinav.vijaykumar@verizonmedia.com>\nCo-authored-by: moiz arafat <moiz.arafat@oath.com>\nCo-authored-by: Moiz Arafat <4307621+moizarafat@users.noreply.github.com>\nCo-authored-by: moizarafat <moiz.arafat@verizonmedia.com>\n\nSimplify life cycle hooks (#1224)\n\n* Initial version\n\n* Finished code.  Starting to flesh out tests\n\n* Elide core compiles\n\n* Removed CRUDEvent.CrudAction\n\n* Added new test structure for LifeCycleTest\n\n* Fixed bug in Persistent Resource where relationship reads did not tigger a lifecycle event\n\n* Added several LifeCycle Tests\n\n* Added create test for persistent resource\n\n* Added Elide Persistent Resource Update Test\n\n* Added update with change spec test\n\n* Added Relationship Edit test\n\n* Added relationship test\n\n* Fixed checkstyle and compilation errors\n\n* Added remove from collection test\n\n* Added exception tests\n\n* Added delete test\n\n* Added read test\n\n* Fixed checkstyles\n\n* Elide core builds and tests pass\n\n* Fixed graphQL tests\n\n* Full build now passes\n\n* Removed old life cycle annotations\n\n* Minor cleanup\n\n* Fixed codacy issues\n\n* Update README.md\n\nCo-Authored-By: Jon Kilroy <jkilroy@gmail.com>\n\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\nCo-authored-by: Jon Kilroy <jkilroy@gmail.com>\n\nFixed elide-5.x build\n\nFixed rebase issues\n\nTurning off retireJS for dependency check\n\nBetter errors for missing IDs in Patch Extension Request. (#1278) (#1281)\n\n* Better errors for missing IDs in Patch Extension Request. (#1278)\n\n* Return a better error when handling invalid patch extension requests that are missing IDs\n\n* Added tests\n\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\n\n* Expect encoded response as array\n\nCo-authored-by: Aaron Klish <aklish@gmail.com>\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\nCo-authored-by: wcekan <wcekan@verizonmedia.com>\n\n[maven-release-plugin] prepare release 5.0.0-pr8\n\n[maven-release-plugin] prepare for next development iteration\n\nPatch Extension Lifecycle tests (#1280)\n\n* Patch Extension Lifecycle tests\n\n* Missing check\n\n* Update error body\n\nCo-authored-by: wcekan <wcekan@verizonmedia.com>\n\nAdd version support (#1295)\n\n* Initial non working version\n\n* More changes\n\n* Build passes\n\n* Expanded version param outside entity dictionary\n\n* Plumbed API version up through RequestScope\n\n* Plumbed API version up to controllers and endpoints\n\n* All code minus async written and working\n\n* Code complete\n\n* Build passes\n\n* All tests are passing\n\n* Changed aggregation store Table id to include version.  Metadata will now surface table versions\n\n* Added a swagger IT test with API versions\n\n* Replace empty version string with constant.  Fixed a few bugs in JSON-API parser\n\n* Added graphql type introspection test\n\n* Added graphql type introspection test\n\n* Added spring controller test.  Fixed issue with version header parsing\n\n* Added spring controller test for graphql\n\n* Added swagger controller tests\n\n* Added more happy path versioned tests\n\n* Fixed bug in GraphQLIT\n\n* Added graphQL test for invalid API version\n\n* ADded invalid API version graphql controller test\n\n* Fixed checkstyles\n\n* Added standalone and patch extension tests\n\n* Fixed build errors and codacy errors\n\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\n\nMigrated spring controllers to use async (#1296)\n\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\n\nfixes for Async Models lifecycle hooks failing (#1294)\n\n* elide standalone fixes for lifecycle hooks failing\n\n* Manual Binding of lifecycle hooks\n\n* Manual binding of lifecycle in elide spring\n\n* Refactor\n\n* Review Comments\n\n* elide standalone fixes for lifecycle hooks failing\n\n* Manual Binding of lifecycle hooks\n\n* Manual binding of lifecycle in elide spring\n\n* Refactor\n\n* Review Comments\n\n* Rebase with 5.x\n\nCo-authored-by: moiz arafat <moiz.arafat@oath.com>\n\nImplement equals/hashCode and immutability where needed (#1297)\n\n* ColumnProjection must implement equals/hashCode\n\n* Use @Value for SQLTimeDimensionProjection\n\n* Use @Value for Argument\n\n* Use @Value for TimeDimensionGrain\n\n* Use @Value for TimeDimension\n\n* Make Column/Metric immutable\n\n* Table can be immutable\n\n* Use @Value to simplify Query\n\nChanges elide to only inject models annotated with @Inject (#1299)\n\n* Changes elide to only inject models annotated with @Inject\n\n* Codacy fix\n\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\n\nEnhancemnents to Aggregation Store (#1300)\n\nCo-authored-by: moiz arafat <moiz.arafat@oath.com>\n\nQueryEngine result cache (#1279)\n\n* Add QueryEngine cache API\n\n* Remove outdated javadoc text\n\nElide Async Feature Unit and Integration Tests (#1311)\n\n* Added integration,unit test setup for Async Module with few tests\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding Licence headers, Sample entity and working Async test for POST,GET\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding additional integration tests\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding remaining integration tests and updating javadocs\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding all unit tests\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Updating tests to work with Singleton changes\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Modifying tests to work with singleton logic\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Resolving some codacy errors\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding DSL for GraphQL and addressing review comments\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing unit tests and checkstyle errors\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Moving tests to new format\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing session not closed error and checkstyle errors\n\n* Fixing imports\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Removing unused method and updating harness\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Updating unit tests\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Updating ResourceConfig for AsyncTest\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Moving logic for resource config to new test binder\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Adding bindFactory logic for async services\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing IT\n\n* Fixing IT\n\nCo-authored-by: Abhino <abhino@gmail.com>\n\n* Adding Remaining integration tests\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Consolidating filter logic for integration tests\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing legacy Hibernate entity manager store (so it doesn't recycle the entity manager\n\n* Adding additional integration tests for Standalone and Spring boot\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Fixing codacy errors\n\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\n\n* Review Comments\n\nCo-authored-by: abhino <abhino@gmail.com>\n\nCo-authored-by: avijay <abhinav.vijaykumar@verizonmedia.com>\nCo-authored-by: moizarafat <moiz.arafat@gmail.com>\nCo-authored-by: moiz arafat <moiz.arafat@oath.com>\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>\n\nin memory compilation integrated with dynamic config helpers (#1255)\n\n* Rebase against 5.x\n\nCo-authored-by: Ayeswarya <ayeswarya.anandan@verizonmedia.com>\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\n\n* pom fix\n\nCo-authored-by: Ayeswarya <ayeswarya.anandan@verizonmedia.com>\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\n\n* pom fix\n\nCo-authored-by: Ayeswarya <ayeswarya.anandan@verizonmedia.com>\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\n\n* Merging 1220\n\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\n\n* Spring Boot Changes\n\nCo-authored-by: Ayeswarya <ayeswarya.anandan@verizonmedia.com>\n\n* Spring Boot Changes\n\nCo-authored-by: Ayeswarya <ayeswarya.anandan@verizonmedia.com>\n\n* Spring Boot Changes\n\nCo-authored-by: Ayeswarya <ayeswarya.anandan@verizonmedia.com>\n\n* Review Comments\n\nCo-authored-by: Ayeswarya <ayeswarya.anandan@verizonmedia.com>\n\n* Update DynamicConfigTest.java\n\n* Review Comments\n\nCo-authored-by: Ayeswarya <ayeswarya.anandan@verizonmedia.com>\n\nCo-authored-by: moiz arafat <moiz.arafat@verizonmedia.com>\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>", "committedDate": "2020-05-28T15:15:49Z", "type": "commit"}, {"oid": "8cdd9ddf50a779e9d25e5d67e353bc0c556219bc", "url": "https://github.com/yahoo/elide/commit/8cdd9ddf50a779e9d25e5d67e353bc0c556219bc", "message": "Fixed issues with rebase", "committedDate": "2020-05-28T15:16:33Z", "type": "commit"}, {"oid": "c5a44fce2a886e78a0ea2b33931221f1cbc7a716", "url": "https://github.com/yahoo/elide/commit/c5a44fce2a886e78a0ea2b33931221f1cbc7a716", "message": "Finished rebase", "committedDate": "2020-05-28T15:16:34Z", "type": "commit"}, {"oid": "0bf0b1ea91fa43b1df3d413d95f0d6a90542e38f", "url": "https://github.com/yahoo/elide/commit/0bf0b1ea91fa43b1df3d413d95f0d6a90542e38f", "message": "Async ID change from UUID to String and Dynamic Config FIx (#1325)\n\n* Async UUID to String, Dynamic Config NPE\r\n\r\n* Update DefaultAsyncQueryDAOTest.java", "committedDate": "2020-05-28T15:16:34Z", "type": "commit"}, {"oid": "315d254cab16013ae00f187bb567407279b4baca", "url": "https://github.com/yahoo/elide/commit/315d254cab16013ae00f187bb567407279b4baca", "message": "TANDS-19093-transactionRegistry-interface (#1332)\n\n* TANDS-19093-transactionRegistry-interface\r\n\r\n* TANDS-19093-transactionRegistry-interface\r\n\r\n* TANDS-19093-transactionRegistry-interface\r\n\r\n* TANDS-19093-fixing-bugs\r\n\r\n* TANDS-19093-fixing-bugs\r\n\r\n* TANDS-19093-fixing-bugs\r\n\r\n* TANDS-19093-fixing-bugs\r\n\r\nCo-authored-by: Ramsha Rao <ramsha.rao@verizonmedia.com>", "committedDate": "2020-05-28T15:16:34Z", "type": "commit"}, {"oid": "8990160b81e523ada9d958230768e2411c4bd196", "url": "https://github.com/yahoo/elide/commit/8990160b81e523ada9d958230768e2411c4bd196", "message": "add requestId (#1331)\n\nCo-authored-by: aaggarwal <ashish.aggarwal@oath.com>", "committedDate": "2020-05-28T15:16:34Z", "type": "commit"}, {"oid": "39f9c660338614458ed7991752ef9335ad7194ee", "url": "https://github.com/yahoo/elide/commit/39f9c660338614458ed7991752ef9335ad7194ee", "message": "[maven-release-plugin] prepare release 5.0.0-pr9", "committedDate": "2020-05-28T15:16:34Z", "type": "commit"}, {"oid": "cec7d1e7a7837baefe9d1f1161e495765e350f05", "url": "https://github.com/yahoo/elide/commit/cec7d1e7a7837baefe9d1f1161e495765e350f05", "message": "[maven-release-plugin] prepare for next development iteration", "committedDate": "2020-05-28T15:16:34Z", "type": "commit"}, {"oid": "04049117fa4c69cd3dd74e2b78f83470fd8098fc", "url": "https://github.com/yahoo/elide/commit/04049117fa4c69cd3dd74e2b78f83470fd8098fc", "message": "Introduce QueryResult class for QueryEngine caching (#1333)\n\n* Make QueryEngine cache bypass flag part of Query\r\n\r\n* Forming the cache key is not free, so don't a use stub cache\r\n\r\n* Add QueryResult class\r\n\r\n* Add pageTotals to QueryResult\r\n\r\n* Pass page totals through QueryResult instead of Pagination\r\n\r\n* Codacy doesn't know @Value makes fields private", "committedDate": "2020-05-28T15:16:34Z", "type": "commit"}, {"oid": "2f9f56a18028cdd6987a92d56cec8a0d573bed44", "url": "https://github.com/yahoo/elide/commit/2f9f56a18028cdd6987a92d56cec8a0d573bed44", "message": "remove missing javadoc warnings (#1337)\n\nCo-authored-by: Chandrasekar Rajasekar <chandrasekar.rajasekar@oath.com>", "committedDate": "2020-05-28T15:16:34Z", "type": "commit"}, {"oid": "c18fabf0d8dad05960dfad293b5f346a7e1d43a4", "url": "https://github.com/yahoo/elide/commit/c18fabf0d8dad05960dfad293b5f346a7e1d43a4", "message": "Elide 5.x dynamic config standalone (#1259)\n\n* Fix method call, Swagger Doc Update\r\n\r\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\r\n\r\n* Swagger doc update\r\n\r\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\r\n\r\n* update pom.xml\r\n\r\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\r\n\r\n* update pom.xml\r\n\r\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\r\n\r\n* review comments\r\n\r\nCo-authored-by: AvaniMakwana <Avani.makwana@outlook.com>\r\n\r\n* Update ElideStandaloneSettings.java\r\n\r\n* Update pom.xml\r\n\r\n* Update pom.xml\r\n\r\nCo-authored-by: moiz arafat <moiz.arafat@verizonmedia.com>", "committedDate": "2020-05-28T15:16:57Z", "type": "commit"}, {"oid": "10b118a24ea1b8d5fde48c765efb34bc1293b7fb", "url": "https://github.com/yahoo/elide/commit/10b118a24ea1b8d5fde48c765efb34bc1293b7fb", "message": "addTransaction-removeTransaction (#1338)\n\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169\r\n\r\n* TANDS-19169-changing-CVSS-score\r\n\r\n* addTransaction-removeTransaction\r\n\r\n* addTransaction-removeTransaction\r\n\r\n* addTransaction-removeTransaction\r\n\r\n* addTransaction-removeTransaction\r\n\r\n* addTransaction-removeTransaction\r\n\r\n* addressing-comments\r\n\r\n* addressing-comments\r\n\r\n* addressing-comments\r\n\r\n* addressing-comments\r\n\r\n* addressing-comments\r\n\r\n* addressing-comments\r\n\r\n* addressing-comments\r\n\r\n* addressing-comments\r\n\r\n* addressing-comments\r\n\r\n* making DataStore an abstract class\r\n\r\n* making DataStore an abstract class\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* adding-transaction-id to transaction implementations\r\n\r\n* adding-transaction-id to transaction implementations\r\n\r\n* adding-transaction-id to transaction implementations\r\n\r\n* adding-transaction-id to transaction implementations\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* addressing comments\r\n\r\n* addressing comments\r\n\r\n* addressing comments\r\n\r\n* fixing bugs\r\n\r\nCo-authored-by: Ramsha Rao <ramsha.rao@verizonmedia.com>", "committedDate": "2020-05-28T15:16:57Z", "type": "commit"}, {"oid": "aaf621f72654b4b953b8f0773c86c8bdaaf7b594", "url": "https://github.com/yahoo/elide/commit/aaf621f72654b4b953b8f0773c86c8bdaaf7b594", "message": "Fixed rebase", "committedDate": "2020-05-28T15:40:05Z", "type": "commit"}, {"oid": "d4623bcd634406d7828736f4fa8a09e89e8a7fff", "url": "https://github.com/yahoo/elide/commit/d4623bcd634406d7828736f4fa8a09e89e8a7fff", "message": "Removed old elide example modules", "committedDate": "2020-05-28T15:41:04Z", "type": "commit"}, {"oid": "2abbf68533160dae026a0c967c1b3502e0fc2fa0", "url": "https://github.com/yahoo/elide/commit/2abbf68533160dae026a0c967c1b3502e0fc2fa0", "message": "[maven-release-plugin] prepare release 5.0.0-pr10", "committedDate": "2020-05-28T15:55:17Z", "type": "commit"}, {"oid": "3dc187c561ff40a74e4eb9c8fc6346ac9a75f91f", "url": "https://github.com/yahoo/elide/commit/3dc187c561ff40a74e4eb9c8fc6346ac9a75f91f", "message": "[maven-release-plugin] prepare for next development iteration", "committedDate": "2020-05-28T15:55:40Z", "type": "commit"}, {"oid": "f0ef023dec0d66ec0cab651e075167cfe833811f", "url": "https://github.com/yahoo/elide/commit/f0ef023dec0d66ec0cab651e075167cfe833811f", "message": "Validation for Model Configs (#1306)\n\n* Dynamic Config Validator\r\n\r\nCo-authored-by: rishi-aga <rishi.aga123@gmail.com>\r\n\r\n* Review Comments\r\n\r\n* Review Comments\r\n\r\n* Use DynamicConfigValidator instead of ElideConfigParser\r\n\r\nCo-authored-by: moiz arafat <moiz.arafat@verizonmedia.com>", "committedDate": "2020-06-01T16:15:41Z", "type": "commit"}, {"oid": "46f83b0dc04df42e06f5b6a7f52c13d0e2dee449", "url": "https://github.com/yahoo/elide/commit/46f83b0dc04df42e06f5b6a7f52c13d0e2dee449", "message": "add explicit join (#1364)\n\nCo-authored-by: Chandrasekar Rajasekar <chandrasekar.rajasekar@oath.com>", "committedDate": "2020-06-03T22:11:14Z", "type": "commit"}, {"oid": "2853ad4d2d9fa2b9576626ab7a71c8d935a20394", "url": "https://github.com/yahoo/elide/commit/2853ad4d2d9fa2b9576626ab7a71c8d935a20394", "message": "Fixes - Honor Doc Version in SwaggerController and Use ISO8601Dates Serde Format in Date Formatting  (#1336)\n\n* misc_fixes\r\n\r\n* review comments\r\n\r\n* Review Comments\r\n\r\n* DyFixes\r\n\r\n* DyFixes", "committedDate": "2020-06-04T15:06:59Z", "type": "commit"}, {"oid": "f2094833eccf4eac51ce423e11f2769381d10242", "url": "https://github.com/yahoo/elide/commit/f2094833eccf4eac51ce423e11f2769381d10242", "message": "Elide dynamic config model verification (#1354)\n\n* sign & Verify model\r\n\r\n* review comments\r\n\r\n* typo fix\r\n\r\n* indent fix\r\n\r\n* review comment\r\n\r\n* additional testcases\r\n\r\n* revert system exit\r\n\r\n* fix codacy\r\n\r\n* add return\r\n\r\n* add system exit\r\n\r\nCo-authored-by: amakwana <avani.makwana@oath.com>", "committedDate": "2020-06-10T15:53:43Z", "type": "commit"}, {"oid": "af132fd2a73af3f18661db78eca514f8d3038ecf", "url": "https://github.com/yahoo/elide/commit/af132fd2a73af3f18661db78eca514f8d3038ecf", "message": "Add caching support to SQLQueryEngine (#1319)\n\n* Support caching in SQLQueryEngine\r\n\r\n* Allow SQLUnitTest.init to set cache\r\n\r\n* Add SQLQueryEngine cache unit tests\r\n\r\n* Declare query dimensions / metrics non-null\r\n\r\n* Handle table version as String\r\n\r\n* Polish QueryKeyExtractor\r\n\r\n* Add QueryKeyExtractor UTs\r\n\r\n* Manage QueryEngine.Transaction in AggregationDataStoreTransaction\r\n\r\n* Fix UTs\r\n\r\n* Fix assertEquals in existing UT\r\n\r\n* Move caching to AggregationDataStoreTransaction\r\n\r\n* Change getTableVersion to take table argument\r\n\r\n* Address review comments", "committedDate": "2020-06-12T21:53:17Z", "type": "commit"}, {"oid": "df7926f2eacd0c636ec775808aa97cee500c7dec", "url": "https://github.com/yahoo/elide/commit/df7926f2eacd0c636ec775808aa97cee500c7dec", "message": "Miscellanous fix (#1371)\n\n* Debug\r\n\r\n* Update DefaultAsyncQueryDAO.java\r\n\r\n* Update DefaultAsyncQueryDAO.java\r\n\r\n* Throw exception instead\r\n\r\n* Update AsyncQueryInterruptThread.java\r\n\r\n* Update pom.xml\r\n\r\n* Unit test case update\r\n\r\n* Update DefaultAsyncQueryDAO.java", "committedDate": "2020-06-16T16:23:58Z", "type": "commit"}, {"oid": "ff86c56fde9064e1719ea35660fd04c42c949662", "url": "https://github.com/yahoo/elide/commit/ff86c56fde9064e1719ea35660fd04c42c949662", "message": "implement cancel function (#1367)\n\n* implement cancel function\r\n\r\n* addressing comments\r\n\r\n* addressing comments\r\n\r\n* Future implementation\r\n\r\n* Future implementation\r\n\r\n* Future implementation\r\n\r\n* Future implementation\r\n\r\n* Future implementation\r\n\r\n* adding Future Task\r\n\r\n* adding Future Task\r\n\r\n* adding Future Task\r\n\r\n* fixing future implementation\r\n\r\n* fixing future implementation\r\n\r\n* fixing future implementation\r\n\r\n* fixing future implementation\r\n\r\n* fixing future implementation\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing bugs\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing issues\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* ExecutionException\r\n\r\n* fixing issues\r\n\r\n* aggregation changes\r\n\r\n* aggregation changes\r\n\r\n* aggregation changes\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* fixing bugs\r\n\r\n* rebasing\r\n\r\n* adddressing comments\r\n\r\n* adddressing comments\r\n\r\n* addressing comments\r\n\r\n* addressing comments\r\n\r\nCo-authored-by: Ramsha Rao <ramsha.rao@verizonmedia.com>", "committedDate": "2020-06-17T16:26:09Z", "type": "commit"}, {"oid": "5da1616f92275e7893a57965107d8e077ca87768", "url": "https://github.com/yahoo/elide/commit/5da1616f92275e7893a57965107d8e077ca87768", "message": "Enable query caching by default (#1378)\n\n* Create new cache package\r\n\r\n* Add caffeine cache based impl\r\n\r\n* Configure Caffeine cache by default\r\n\r\n* Publish cache metrics under Spring/micrometer\r\n\r\n* Lint\r\n\r\n* Fix javadoc\r\n\r\n* Rename max cache size for clarity\r\n\r\n* Update ElideAutoConfiguration.java\r\n\r\nCo-authored-by: Aaron Klish <aklish@gmail.com>", "committedDate": "2020-06-17T19:08:31Z", "type": "commit"}, {"oid": "aa4b3e82601adc3bff677382940d547c59465aa4", "url": "https://github.com/yahoo/elide/commit/aa4b3e82601adc3bff677382940d547c59465aa4", "message": "Multiplex Transaction Lazy Initialize and Dynamic Config fixes (#1383)", "committedDate": "2020-06-19T15:43:46Z", "type": "commit"}, {"oid": "5f948ba42b041367868f07dc00e762e5bd36df68", "url": "https://github.com/yahoo/elide/commit/5f948ba42b041367868f07dc00e762e5bd36df68", "message": "CARBON-212 TimeZone Serde (#1386)\n\n* serde code\r\n\r\n* default val\r\n\r\n* timezone serde tests\r\n\r\n* refactor\r\n\r\n* review comments", "committedDate": "2020-06-19T20:40:06Z", "type": "commit"}, {"oid": "40ed701d0f0e64d5ece915222b925e17782425df", "url": "https://github.com/yahoo/elide/commit/40ed701d0f0e64d5ece915222b925e17782425df", "message": "Fixes for query cache spring integration (#1381)\n\n* Test that query cache is active and publishing metrics\r\n\r\n* Update README.md with new property\r\n\r\n* Align columns\r\n\r\n* Allow injected Cache to be null\r\n\r\n* Fix typo", "committedDate": "2020-06-23T18:25:39Z", "type": "commit"}, {"oid": "df72df0430254e8c90ecdbf2e63a1167aa094bec", "url": "https://github.com/yahoo/elide/commit/df72df0430254e8c90ecdbf2e63a1167aa094bec", "message": "[maven-release-plugin] prepare release 5.0.0-pr11", "committedDate": "2020-06-23T21:22:39Z", "type": "commit"}, {"oid": "600444a4870bea384dffe8c0964673594ecd4293", "url": "https://github.com/yahoo/elide/commit/600444a4870bea384dffe8c0964673594ecd4293", "message": "[maven-release-plugin] prepare for next development iteration", "committedDate": "2020-06-23T21:22:59Z", "type": "commit"}, {"oid": "761e0e90185a685da609f9e582fea627af01bcd6", "url": "https://github.com/yahoo/elide/commit/761e0e90185a685da609f9e582fea627af01bcd6", "message": "Update: Remove slf4j-simple dependency (#1402)", "committedDate": "2020-06-24T22:03:31Z", "type": "commit"}, {"oid": "8878db5078785d3502668466208b0a6d0da19914", "url": "https://github.com/yahoo/elide/commit/8878db5078785d3502668466208b0a6d0da19914", "message": "Fix: Check for null super in `getInheritedTypes` (#1401)", "committedDate": "2020-06-24T22:03:58Z", "type": "commit"}, {"oid": "c74e629c19fde960662b4a5a7c945f74207728d6", "url": "https://github.com/yahoo/elide/commit/c74e629c19fde960662b4a5a7c945f74207728d6", "message": "Carbon 167 Async Enhancements Embeddable (#1353)\n\n* changes from old branch for async enhancements\r\n\r\n* remove dependencies and column annotation\r\n\r\n* pr11\r\n\r\n* remove commented line\r\n\r\n* gs\r\n\r\n* async after test scenarios per review comments\r\n\r\n* reduce redundancy\r\n\r\n* changes to async query execution\r\n\r\n* review tweaks\r\n\r\n* remove unused method\r\n\r\n* Test cases\r\n\r\n* integration test\r\n\r\n* exception name\r\n\r\n* commit hook and async it tests\r\n\r\n* Async Happy Path tests and new delay datastore\r\n\r\n* extend IntegrationTest\r\n\r\n* checkstyle fix\r\n\r\n* transient update query worker\r\n\r\n* exception catch change\r\n\r\n* unit test and comments\r\n\r\n* codacy\r\n\r\n* codacy\r\n\r\n* remove imports\r\n\r\n* add to remove\r\n\r\n* remove interrupt thread\r\n\r\n* interrrupt thread\r\n\r\n* delete interrupt thread\r\n\r\n* add back interrupt thread\r\n\r\n* Review comments\r\n\r\n* add interrupt\r\n\r\n* remove interrupt\r\n\r\n* include interrupt thread to overcome merge conflict\r\n\r\n* merge 5.x\r\n\r\n* test changes\r\n\r\n* remove asyncinterruptthread\r\n\r\n* graphql tests and remove mocking for queryObj\r\n\r\n* dsl generation of queries for happy path graphql tests\r\n\r\n* review changes\r\n\r\n* move sleep delay flag to aftereach method", "committedDate": "2020-06-25T21:56:26Z", "type": "commit"}, {"oid": "24c97b63760cc3caee09be7f8db07301c572fae2", "url": "https://github.com/yahoo/elide/commit/24c97b63760cc3caee09be7f8db07301c572fae2", "message": "[maven-release-plugin] prepare release 5.0.0-pr12", "committedDate": "2020-06-25T22:15:57Z", "type": "commit"}, {"oid": "d4901c6f07e57aa179c5afd640c9c67e90a8cdaf", "url": "https://github.com/yahoo/elide/commit/d4901c6f07e57aa179c5afd640c9c67e90a8cdaf", "message": "[maven-release-plugin] prepare for next development iteration", "committedDate": "2020-06-25T22:16:14Z", "type": "commit"}, {"oid": "ae8444a8b561969b746ba8d44e3ce04ea6ed43c7", "url": "https://github.com/yahoo/elide/commit/ae8444a8b561969b746ba8d44e3ce04ea6ed43c7", "message": "Async change to use onReadPreSecurity Hook (#1409)\n\n* Fix for graphql async\r\n\r\n* Aysnc ReadPreSecurity Hook\r\n\r\n* Review comments\r\n\r\n* Review comments\r\n\r\n* Review comments\r\n\r\n* fix for NPE\r\n\r\n* checkstyle fix", "committedDate": "2020-07-02T15:07:19Z", "type": "commit"}, {"oid": "4a9af0463a45e828cc7d8fc4231c21733c26b3fb", "url": "https://github.com/yahoo/elide/commit/4a9af0463a45e828cc7d8fc4231c21733c26b3fb", "message": "Carbon 213 - Add Category to table and columns (#1407)\n\n* add category to aggregate\r\n\r\n* initial working code\r\n\r\n* refactor testcases:\r\n\r\n* test table category\r\n\r\n* remove category for metric function", "committedDate": "2020-07-02T15:11:08Z", "type": "commit"}, {"oid": "6f9d946559d2800d56f0696e2946c10e6b30868f", "url": "https://github.com/yahoo/elide/commit/6f9d946559d2800d56f0696e2946c10e6b30868f", "message": "Added tests for GraphQL Fragment Regression (#1414)\n\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>", "committedDate": "2020-07-02T20:05:53Z", "type": "commit"}, {"oid": "b7f666492246a529b3c2816371b149dddb0df030", "url": "https://github.com/yahoo/elide/commit/b7f666492246a529b3c2816371b149dddb0df030", "message": "[maven-release-plugin] prepare release 5.0.0-pr13", "committedDate": "2020-07-02T20:24:23Z", "type": "commit"}, {"oid": "a7ba85a05153f50f3ad42c52f66c895fa382315e", "url": "https://github.com/yahoo/elide/commit/a7ba85a05153f50f3ad42c52f66c895fa382315e", "message": "[maven-release-plugin] prepare for next development iteration", "committedDate": "2020-07-02T20:24:39Z", "type": "commit"}, {"oid": "1d8d9446bafdc7047b283e3a0d64525f7d158222", "url": "https://github.com/yahoo/elide/commit/1d8d9446bafdc7047b283e3a0d64525f7d158222", "message": "Elide 5.x - Async Tests, Break loop when fail (#1422)\n\n* Loop Break when query fails\r\n\r\n* adding assert fail\r\n\r\n* Removing queued\r\n\r\n* Import fix\r\n\r\n* Tomcat version fix\r\n\r\n* Assert import\r\n\r\n* Error message", "committedDate": "2020-07-08T14:24:33Z", "type": "commit"}, {"oid": "99bef6f242f340421535d897632b8b80f1e1f4d2", "url": "https://github.com/yahoo/elide/commit/99bef6f242f340421535d897632b8b80f1e1f4d2", "message": "Elide 5.x Async Create Permission Fix (#1425)\n\n* NCreate Permission Check on AsyncQuery\r\n\r\n* Create Permission Check on AsyncQuery\r\n\r\n* Updating test case\r\n\r\n* Cleanup", "committedDate": "2020-07-08T19:59:15Z", "type": "commit"}, {"oid": "70ab71e8f07e11161fecd6c77687bede370bb95f", "url": "https://github.com/yahoo/elide/commit/70ab71e8f07e11161fecd6c77687bede370bb95f", "message": "Elide 5- Unify request ids (#1423)\n\n* Unified request ID for elide 5\r\n\r\n* Fixing issues\r\n\r\n* Fixed some tests\r\n\r\n* Fixed build\r\n\r\n* Removed Data Store Transaction changes for request ID\r\n\r\n* Inspection rework\r\n\r\nCo-authored-by: Aaron Klish <klish@verizonmedia.com>", "committedDate": "2020-07-08T22:26:47Z", "type": "commit"}, {"oid": "7cf0e22d90594132baf9b57c8141cb409b2dda37", "url": "https://github.com/yahoo/elide/commit/7cf0e22d90594132baf9b57c8141cb409b2dda37", "message": "Merge Conflicts Elide-5.x fixed", "committedDate": "2020-07-10T14:26:14Z", "type": "commit"}, {"oid": "bf3351f6cd521e667f2b504fd4214e6486fff156", "url": "https://github.com/yahoo/elide/commit/bf3351f6cd521e667f2b504fd4214e6486fff156", "message": "Basic Implementation Ready", "committedDate": "2020-07-16T16:57:09Z", "type": "commit"}, {"oid": "9e01af91856bafb19ef7fdc5cf3f61cc9557e2aa", "url": "https://github.com/yahoo/elide/commit/9e01af91856bafb19ef7fdc5cf3f61cc9557e2aa", "message": "Tests Updated", "committedDate": "2020-07-16T18:20:01Z", "type": "commit"}, {"oid": "ab4b03a37aed5df33c34cc0444a8f613db76fef3", "url": "https://github.com/yahoo/elide/commit/ab4b03a37aed5df33c34cc0444a8f613db76fef3", "message": "AggregationDS Query Logger Implemented", "committedDate": "2020-07-17T22:00:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5NzMzMA==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r456697330", "bodyText": "Why not just set the logger in the constructor?", "author": "aklish", "createdAt": "2020-07-17T22:18:54Z", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/AggregationDataStore.java", "diffHunk": "@@ -74,6 +76,11 @@ public void populateEntityDictionary(EntityDictionary dictionary) {\n \n     @Override\n     public DataStoreTransaction beginTransaction() {\n-        return new AggregationDataStoreTransaction(queryEngine, cache);\n+        return new AggregationDataStoreTransaction(queryEngine, cache, queryLogger);\n+    }\n+\n+    public AggregationDataStore setupCustomQueryLogger(QueryLogger logger) {", "originalCommit": "ab4b03a37aed5df33c34cc0444a8f613db76fef3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwNDM5Mw==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r456704393", "bodyText": "For navi or any other external application to instantiate their own querylogger, this function can be used to update the default QueryLogger from Noop to their custom querylogger.", "author": "dvarshney1", "createdAt": "2020-07-17T22:46:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5NzMzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM3MTMyMg==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r458371322", "bodyText": "That should happen in the constructor though - not a set function.  Ideally, most stuff should be immutable.", "author": "aklish", "createdAt": "2020-07-21T20:34:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5NzMzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5Nzc3Nw==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r456697777", "bodyText": "There are enums with the HTTP status codes (Like HttpStatus).", "author": "aklish", "createdAt": "2020-07-17T22:20:30Z", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/AggregationDataStoreTransaction.java", "diffHunk": "@@ -61,27 +70,41 @@ public void createObject(Object entity, RequestScope scope) {\n \n     @Override\n     public Iterable<Object> loadObjects(EntityProjection entityProjection, RequestScope scope) {\n-        Query query = buildQuery(entityProjection, scope);\n         QueryResult result = null;\n-\n+        QueryResponse response = null;\n         String cacheKey = null;\n-        if (cache != null && !query.isBypassingCache()) {\n-            String tableVersion = queryEngine.getTableVersion(query.getTable(), queryEngineTransaction);\n-            if (tableVersion != null) {\n-                cacheKey = tableVersion + ';' + QueryKeyExtractor.extractKey(query);\n-                result = cache.get(cacheKey);\n+        try {\n+            aggregationAcceptQuery(scope);\n+            Query query = buildQuery(entityProjection, scope);\n+            if (cache != null && !query.isBypassingCache()) {\n+                String tableVersion = queryEngine.getTableVersion(query.getTable(), queryEngineTransaction);\n+                if (tableVersion != null) {\n+                    cacheKey = tableVersion + ';' + QueryKeyExtractor.extractKey(query);\n+                    result = cache.get(cacheKey);\n+                }\n             }\n-        }\n-        if (result == null) {\n-            result = queryEngine.executeQuery(query, queryEngineTransaction);\n-            if (cacheKey != null) {\n-                cache.put(cacheKey, result);\n+            aggregationProcessQuery(result, entityProjection.getType().getName(),\n+                    query, scope);\n+            if (result == null) {\n+                result = queryEngine.executeQuery(query, queryEngineTransaction);\n+                if (cacheKey != null) {\n+                    cache.put(cacheKey, result);\n+                }\n             }\n+            if (entityProjection.getPagination() != null && entityProjection.getPagination().returnPageTotals()) {\n+                entityProjection.getPagination().setPageTotals(result.getPageTotals());\n+            }\n+            response = new QueryResponse(200, result.getData(), null);", "originalCommit": "ab4b03a37aed5df33c34cc0444a8f613db76fef3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5NDMzNw==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r457694337", "bodyText": "Resolved in latest commit", "author": "dvarshney1", "createdAt": "2020-07-20T21:11:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5Nzc3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5ODExMw==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r456698113", "bodyText": "Not all query engines are SQL query engines.  QueryEngine cannot have a dependency on anything related to SQL.", "author": "aklish", "createdAt": "2020-07-17T22:21:41Z", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/QueryEngine.java", "diffHunk": "@@ -193,4 +194,12 @@ private void populateMetaData(MetaDataStore metaDataStore) {\n     public Table getTable(String classAlias) {\n         return tables.get(classAlias);\n     }\n+\n+    /**\n+     * Translates the client query into SQL.\n+     *\n+     * @param query the client query.\n+     * @return the SQL query.\n+     */\n+    public abstract SQLQuery toSQL(Query query);", "originalCommit": "ab4b03a37aed5df33c34cc0444a8f613db76fef3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5ODMwMg==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r456698302", "bodyText": "Instead, make this method:\npublic abstract String explain(Query query);", "author": "aklish", "createdAt": "2020-07-17T22:22:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5ODExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5NDE1NQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r457694155", "bodyText": "Resolved in latest commit", "author": "dvarshney1", "createdAt": "2020-07-20T21:11:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5ODExMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5ODgyOQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r456698829", "bodyText": "I don't think this is ever invoked.", "author": "aklish", "createdAt": "2020-07-17T22:24:42Z", "path": "elide-core/src/main/java/com/yahoo/elide/core/QueryLogger.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.core;\n+\n+import java.security.Principal;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.UUID;\n+import javax.ws.rs.core.MultivaluedMap;\n+\n+/**\n+ * Query Logger Interface for Elide\n+ */\n+public interface QueryLogger {\n+\n+    /**\n+     * Accepts the incoming GraphQL query and notes the start time for the query\n+     * @param queryId The RequestScope requestId.\n+     * @param user The Principal user\n+     * @param headers Http Request Headers\n+     * @param apiVer API Version\n+     * @param apiQuery QueryString of the requested URL request\n+     */\n+    void acceptQuery(UUID queryId, Principal user, Map<String, String> headers,\n+                     String apiVer, String apiQuery);\n+\n+    /**\n+     * Accepts the incoming JSON API query and notes the start time for the query\n+     * @param queryId The RequestScope requestId.\n+     * @param user The Principal user\n+     * @param headers Http Request Headers\n+     * @param apiVer API Version\n+     * @param queryParams QueryParams for the incoming JSON API query\n+     * @param path The apiQuery endpoint path for the incoming query\n+     */\n+    void acceptQuery(UUID queryId, Principal user, Map<String, String> headers, String apiVer,\n+                     Optional<MultivaluedMap<String, String>> queryParams, String path);\n+\n+    /**\n+     * Processes and logs all the queries from QueryDetail\n+     * @param queryId The RequestScope requestId.\n+     * @param qd The QueryDetail Object\n+     */\n+    void processQuery(UUID queryId, QueryDetail qd);\n+\n+    /**\n+     * Cancels all queries currently running for a particular requestId\n+     * @param queryId The RequestScope requestId.\n+     */\n+    void cancelQuery(UUID queryId);", "originalCommit": "ab4b03a37aed5df33c34cc0444a8f613db76fef3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUzOTQxNQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r457539415", "bodyText": "This is a member function of the QueryLogger class as indicated in the docs. Yep, you are right, this is never invoked.", "author": "dvarshney1", "createdAt": "2020-07-20T16:28:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5ODgyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM3NTM5Mg==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r458375392", "bodyText": "So I think we should call this function from transaction.cancel.  In order for that to work, we probably need to change the contract of the DataStoreTransaction.cancel to include the RequestScope.", "author": "aklish", "createdAt": "2020-07-21T20:42:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5ODgyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5OTgzOQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r456699839", "bodyText": "I think I might try to collapse these three functions into the main logic.  A few reasons:\n\nSingle line functions are often not necessary.\nThe isCached logic is tied to code outside the function - so this can't really be reused (the purpose of a function).\nSome of the variables seem like they might be common across the functions.", "author": "aklish", "createdAt": "2020-07-17T22:28:33Z", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/AggregationDataStoreTransaction.java", "diffHunk": "@@ -104,4 +127,20 @@ Query buildQuery(EntityProjection entityProjection, RequestScope scope) {\n     public void cancel() {\n         queryEngineTransaction.cancel();\n     }\n+\n+    private void aggregationCompleteQuery(RequestScope scope, QueryResponse response) {", "originalCommit": "ab4b03a37aed5df33c34cc0444a8f613db76fef3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5NDUwMQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r457694501", "bodyText": "Resolved in latest commit", "author": "dvarshney1", "createdAt": "2020-07-20T21:12:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5OTgzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMDAzOQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r456700039", "bodyText": "Instead of modelName - what if we changed this to the query itself (of type Query).", "author": "aklish", "createdAt": "2020-07-17T22:29:25Z", "path": "elide-core/src/main/java/com/yahoo/elide/core/QueryDetail.java", "diffHunk": "@@ -0,0 +1,24 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.core;\n+\n+import lombok.AllArgsConstructor;\n+import lombok.Getter;\n+import lombok.NoArgsConstructor;\n+import lombok.Value;\n+\n+/**\n+ * QueryDetail implementation class. Stores the model name (root entity class) and\n+ * the queryText that the underlying datastore will eventually run\n+ */\n+@Value\n+@AllArgsConstructor\n+@NoArgsConstructor(force = true)\n+public class QueryDetail {\n+    @Getter private String modelName;", "originalCommit": "ab4b03a37aed5df33c34cc0444a8f613db76fef3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMDMxOQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r456700319", "bodyText": "On second thought, It might be cleaner if we just made these arguments to the processQuery function.  QueryDetail is missing some fields (like the requestId) - which makes me think they all either need to come together - or we should keep them as separate arguments.", "author": "aklish", "createdAt": "2020-07-17T22:30:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMDAzOQ=="}], "type": "inlineReview"}, {"oid": "61b44dbd637321637c7acb79ad4d854e7ecab262", "url": "https://github.com/yahoo/elide/commit/61b44dbd637321637c7acb79ad4d854e7ecab262", "message": "First set of reviews fixed", "committedDate": "2020-07-20T21:00:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM3NDE0NA==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r458374144", "bodyText": "Let's remove the QueryDetail class - and instead pass the Query object here along with queryText and isCached flags.", "author": "aklish", "createdAt": "2020-07-21T20:39:57Z", "path": "elide-core/src/main/java/com/yahoo/elide/core/QueryLogger.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.core;\n+\n+import java.security.Principal;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.UUID;\n+import javax.ws.rs.core.MultivaluedMap;\n+\n+/**\n+ * Query Logger Interface for Elide\n+ */\n+public interface QueryLogger {\n+\n+    /**\n+     * Accepts the incoming GraphQL query and notes the start time for the query\n+     * @param queryId The RequestScope requestId.\n+     * @param user The Principal user\n+     * @param headers Http Request Headers\n+     * @param apiVer API Version\n+     * @param apiQuery QueryString of the requested URL request\n+     */\n+    void acceptQuery(UUID queryId, Principal user, Map<String, String> headers,\n+                     String apiVer, String apiQuery);\n+\n+    /**\n+     * Accepts the incoming JSON API query and notes the start time for the query\n+     * @param queryId The RequestScope requestId.\n+     * @param user The Principal user\n+     * @param headers Http Request Headers\n+     * @param apiVer API Version\n+     * @param queryParams QueryParams for the incoming JSON API query\n+     * @param path The apiQuery endpoint path for the incoming query\n+     */\n+    void acceptQuery(UUID queryId, Principal user, Map<String, String> headers, String apiVer,\n+                     Optional<MultivaluedMap<String, String>> queryParams, String path);\n+\n+    /**\n+     * Processes and logs all the queries from QueryDetail\n+     * @param queryId The RequestScope requestId.\n+     * @param qd The QueryDetail Object\n+     */\n+    void processQuery(UUID queryId, QueryDetail qd);", "originalCommit": "61b44dbd637321637c7acb79ad4d854e7ecab262", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "94aaf6dcbd95278fd5b0b003ab49af8d9d33b152", "url": "https://github.com/yahoo/elide/commit/94aaf6dcbd95278fd5b0b003ab49af8d9d33b152", "message": "Second Set of Reviews Fixed", "committedDate": "2020-07-22T20:08:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEwMTI2Ng==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459101266", "bodyText": "We should mention that this method must be thread safe.", "author": "aklish", "createdAt": "2020-07-22T21:43:41Z", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/core/QueryLogger.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.datastores.aggregation.core;\n+\n+import com.yahoo.elide.datastores.aggregation.query.Query;\n+\n+import java.security.Principal;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.UUID;\n+import javax.ws.rs.core.MultivaluedMap;\n+\n+/**\n+ * Query Logger Interface for Elide\n+ */\n+public interface QueryLogger {\n+\n+    /**\n+     * Accepts the incoming GraphQL query and notes the start time for the query\n+     * @param queryId The RequestScope requestId.\n+     * @param user The Principal user\n+     * @param headers Http Request Headers\n+     * @param apiVer API Version\n+     * @param apiQuery QueryString of the requested URL request\n+     */\n+    void acceptQuery(UUID queryId, Principal user, Map<String, String> headers,\n+                     String apiVer, String apiQuery);\n+\n+    /**\n+     * Accepts the incoming JSON API query and notes the start time for the query\n+     * @param queryId The RequestScope requestId.\n+     * @param user The Principal user\n+     * @param headers Http Request Headers\n+     * @param apiVer API Version\n+     * @param queryParams QueryParams for the incoming JSON API query\n+     * @param path The apiQuery endpoint path for the incoming query\n+     */\n+    void acceptQuery(UUID queryId, Principal user, Map<String, String> headers, String apiVer,\n+                     Optional<MultivaluedMap<String, String>> queryParams, String path);\n+\n+    /**\n+     * Processes and logs all the queries from QueryDetail\n+     * @param queryId The RequestScope requestId.\n+     * @param query The underlying Query\n+     * @param apiQuery The output querytext\n+     * @param isCached Whether the result came from a cache or not\n+     */\n+    void processQuery(UUID queryId, Query query, String apiQuery, boolean isCached);\n+\n+    /**\n+     * Cancels all queries currently running for a particular requestId\n+     * @param queryId The RequestScope requestId.", "originalCommit": "94aaf6dcbd95278fd5b0b003ab49af8d9d33b152", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEwMjMyOA==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459102328", "bodyText": "Do we need both of these acceptQuery methods or can we just have the one below?", "author": "aklish", "createdAt": "2020-07-22T21:45:59Z", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/core/QueryLogger.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.datastores.aggregation.core;\n+\n+import com.yahoo.elide.datastores.aggregation.query.Query;\n+\n+import java.security.Principal;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.UUID;\n+import javax.ws.rs.core.MultivaluedMap;\n+\n+/**\n+ * Query Logger Interface for Elide\n+ */\n+public interface QueryLogger {\n+\n+    /**\n+     * Accepts the incoming GraphQL query and notes the start time for the query\n+     * @param queryId The RequestScope requestId.\n+     * @param user The Principal user\n+     * @param headers Http Request Headers\n+     * @param apiVer API Version\n+     * @param apiQuery QueryString of the requested URL request\n+     */\n+    void acceptQuery(UUID queryId, Principal user, Map<String, String> headers,", "originalCommit": "94aaf6dcbd95278fd5b0b003ab49af8d9d33b152", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEwNzY2MQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459107661", "bodyText": "We can just have the one below. Do not need the other one since Querylogger no longer lives in Elide. Will update this", "author": "dvarshney1", "createdAt": "2020-07-22T21:58:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEwMjMyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEwMjg2NQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459102865", "bodyText": "I'm wondering if it would be more powerful to log the elide User object here instead of the Principal.  The user has some additional bits (like the role support).", "author": "aklish", "createdAt": "2020-07-22T21:47:10Z", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/core/QueryLogger.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.datastores.aggregation.core;\n+\n+import com.yahoo.elide.datastores.aggregation.query.Query;\n+\n+import java.security.Principal;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.UUID;\n+import javax.ws.rs.core.MultivaluedMap;\n+\n+/**\n+ * Query Logger Interface for Elide\n+ */\n+public interface QueryLogger {\n+\n+    /**\n+     * Accepts the incoming GraphQL query and notes the start time for the query\n+     * @param queryId The RequestScope requestId.\n+     * @param user The Principal user\n+     * @param headers Http Request Headers\n+     * @param apiVer API Version\n+     * @param apiQuery QueryString of the requested URL request\n+     */\n+    void acceptQuery(UUID queryId, Principal user, Map<String, String> headers,\n+                     String apiVer, String apiQuery);\n+\n+    /**\n+     * Accepts the incoming JSON API query and notes the start time for the query\n+     * @param queryId The RequestScope requestId.\n+     * @param user The Principal user\n+     * @param headers Http Request Headers\n+     * @param apiVer API Version\n+     * @param queryParams QueryParams for the incoming JSON API query\n+     * @param path The apiQuery endpoint path for the incoming query\n+     */\n+    void acceptQuery(UUID queryId, Principal user, Map<String, String> headers, String apiVer,", "originalCommit": "94aaf6dcbd95278fd5b0b003ab49af8d9d33b152", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEwMzAzNA==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459103034", "bodyText": "?", "author": "aklish", "createdAt": "2020-07-22T21:47:36Z", "path": "elide-datastore/elide-datastore-aggregation/src/main/java/com/yahoo/elide/datastores/aggregation/core/QueryResponse.java", "diffHunk": "@@ -0,0 +1,20 @@\n+/*\n+ * Copyright 2020, Yahoo Inc.\n+ * Licensed under the Apache License, Version 2.0\n+ * See LICENSE file in project root for terms.\n+ */\n+package com.yahoo.elide.datastores.aggregation.core;\n+//live inside aggregation ds", "originalCommit": "94aaf6dcbd95278fd5b0b003ab49af8d9d33b152", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEwOTA0Ng==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459109046", "bodyText": "Sorry about this. Modified", "author": "dvarshney1", "createdAt": "2020-07-22T22:01:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEwMzAzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEwNDcyNw==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459104727", "bodyText": "I feel like we should have one test for query logging failures (where an exception is thrown).  Also, we should have one test for cancelation.", "author": "aklish", "createdAt": "2020-07-22T21:51:13Z", "path": "elide-datastore/elide-datastore-aggregation/src/test/java/com/yahoo/elide/datastores/aggregation/AggregationDataStoreTransactionTest.java", "diffHunk": "@@ -50,8 +54,8 @@\n     // inject our own query instead of using buildQuery impl\n     private class MyAggregationDataStoreTransaction extends AggregationDataStoreTransaction {\n \n-        public MyAggregationDataStoreTransaction(QueryEngine queryEngine, Cache cache) {\n-            super(queryEngine, cache);\n+        public MyAggregationDataStoreTransaction(QueryEngine queryEngine, Cache cache, QueryLogger queryLogger) {\n+            super(queryEngine, cache, queryLogger);", "originalCommit": "94aaf6dcbd95278fd5b0b003ab49af8d9d33b152", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "700497ca510017d5c0dfcf3be7b2e26ee789d106", "url": "https://github.com/yahoo/elide/commit/700497ca510017d5c0dfcf3be7b2e26ee789d106", "message": "Thirs Set of Reviews Fixed", "committedDate": "2020-07-23T15:57:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcyOTQxOQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459729419", "bodyText": "I don't think we need this variable.", "author": "aklish", "createdAt": "2020-07-23T21:09:00Z", "path": "elide-datastore/elide-datastore-aggregation/src/test/java/com/yahoo/elide/datastores/aggregation/AggregationDataStoreTransactionTest.java", "diffHunk": "@@ -222,4 +224,47 @@ public void loadObjectsBypassCache() {\n         Mockito.verify(queryLogger, times(1)).completeQuery(\n                 Mockito.eq(scope.getRequestId()), any());\n     }\n+\n+    @Test\n+    public void loadObjectsExceptionThrownTest() throws Exception {\n+        Mockito.reset(queryLogger);\n+        Object result = null;\n+        try {\n+            query = Query.builder().table(playerStatsTable).bypassingCache(true).build();\n+            SQLQuery myQuery = SQLQuery.builder().clientQuery(query)\n+                    .fromClause(query.getTable().getName())\n+                    .projectionClause(\" \").build();\n+\n+            when(queryEngine.executeQuery(query, qeTransaction)).thenReturn(null);\n+            when(queryEngine.explain(query)).thenReturn(myQuery.toString());\n+            AggregationDataStoreTransaction transaction =\n+                    new MyAggregationDataStoreTransaction(queryEngine, cache, queryLogger);\n+            EntityProjection entityProjection = EntityProjection.builder().type(PlayerStats.class).build();\n+\n+            transaction.loadObjects(entityProjection, scope);\n+\n+        } catch (Exception e) {\n+                result = e.getMessage();\n+        } finally {\n+            Object finalResult = result;", "originalCommit": "700497ca510017d5c0dfcf3be7b2e26ee789d106", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTc0OTUzMQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459749531", "bodyText": "The local variable that we are referencing from inside the lambda expression should be final. That is why we have this. Otherwise, we can also check for Mockito.verify() from inside the catch block. We will not need to have the finalResult local variable then.", "author": "dvarshney1", "createdAt": "2020-07-23T21:53:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcyOTQxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcyOTU0NQ==", "url": "https://github.com/yahoo/elide/pull/1448#discussion_r459729545", "bodyText": "We can do this without the finally block.", "author": "aklish", "createdAt": "2020-07-23T21:09:17Z", "path": "elide-datastore/elide-datastore-aggregation/src/test/java/com/yahoo/elide/datastores/aggregation/AggregationDataStoreTransactionTest.java", "diffHunk": "@@ -222,4 +224,47 @@ public void loadObjectsBypassCache() {\n         Mockito.verify(queryLogger, times(1)).completeQuery(\n                 Mockito.eq(scope.getRequestId()), any());\n     }\n+\n+    @Test\n+    public void loadObjectsExceptionThrownTest() throws Exception {\n+        Mockito.reset(queryLogger);\n+        Object result = null;\n+        try {\n+            query = Query.builder().table(playerStatsTable).bypassingCache(true).build();\n+            SQLQuery myQuery = SQLQuery.builder().clientQuery(query)\n+                    .fromClause(query.getTable().getName())\n+                    .projectionClause(\" \").build();\n+\n+            when(queryEngine.executeQuery(query, qeTransaction)).thenReturn(null);\n+            when(queryEngine.explain(query)).thenReturn(myQuery.toString());\n+            AggregationDataStoreTransaction transaction =\n+                    new MyAggregationDataStoreTransaction(queryEngine, cache, queryLogger);\n+            EntityProjection entityProjection = EntityProjection.builder().type(PlayerStats.class).build();\n+\n+            transaction.loadObjects(entityProjection, scope);\n+\n+        } catch (Exception e) {\n+                result = e.getMessage();\n+        } finally {", "originalCommit": "700497ca510017d5c0dfcf3be7b2e26ee789d106", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a8ab236e8bef1517b35f4279dd29dad7d9c541d8", "url": "https://github.com/yahoo/elide/commit/a8ab236e8bef1517b35f4279dd29dad7d9c541d8", "message": "Fourth Set of Reviews Fixed", "committedDate": "2020-07-24T14:01:56Z", "type": "commit"}]}