{"pr_number": 3161, "pr_title": "KOGITO-1156: [DMN Designer] Documentation - Buttons (Download, Print) do not work on VSCode", "pr_createdAt": "2020-02-14T18:23:43Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3161", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY1MDE1Nw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3161#discussion_r379650157", "bodyText": "I'd like to deprecate IsKogito and use EditorContextProvider.getChannel() instead. KogitoChannel.DEFAULT would signify Business Central (however you might find the buttons work OK for KogitoChannel.GITHUB too).", "author": "manstis", "createdAt": "2020-02-14T21:22:31Z", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/documentation/DMNDocumentationView.java", "diffHunk": "@@ -62,21 +65,33 @@\n \n     private final HTMLDownloadHelper downloadHelper;\n \n+    private final IsKogito isKogito;\n+\n     @Inject\n     public DMNDocumentationView(final HTMLDivElement documentationPanel,\n                                 final HTMLDivElement documentationContent,\n                                 final HTMLButtonElement printButton,\n                                 final HTMLButtonElement downloadHtmlFile,\n                                 final PrintHelper printHelper,\n                                 final DMNDocumentationService documentationService,\n-                                final HTMLDownloadHelper downloadHelper) {\n+                                final HTMLDownloadHelper downloadHelper,\n+                                final IsKogito isKogito) {\n         this.documentationPanel = documentationPanel;\n         this.documentationContent = documentationContent;\n         this.printButton = printButton;\n         this.downloadHtmlFile = downloadHtmlFile;\n         this.printHelper = printHelper;\n         this.documentationService = documentationService;\n         this.downloadHelper = downloadHelper;\n+        this.isKogito = isKogito;\n+    }\n+\n+    @PostConstruct\n+    public void setup() {\n+        if (isKogito.get()) {", "originalCommit": "a25e3967c047c035246c7b30010453248b50567a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDEyMzg0Mw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3161#discussion_r380123843", "bodyText": "Let me know once this conversation is resolved", "author": "jomarko", "createdAt": "2020-02-17T11:17:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY1MDE1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDMwODE1MQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3161#discussion_r380308151", "bodyText": "@manstis It is ok to add dependency to 'appformer-kogito-bridge'?", "author": "danielzhe", "createdAt": "2020-02-17T17:43:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY1MDE1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM2MTQwOQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3161#discussion_r380361409", "bodyText": "@danielzhe LOL.. and so it gets more complicated :-(\nIMO we'll need to revert the change proposed in DMNDocumentationView and then write a new @Alternative version in kie-wb-common-dmn-webapp-kogito-common that ... extends DMNDocumentationView and uses EditorContextProvider.getChannel(). You'll also need to add appformer-kogito-bridge as a dependency tokie-wb-common-dmn-webapp-kogito-common.", "author": "manstis", "createdAt": "2020-02-17T20:49:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY1MDE1Nw=="}], "type": "inlineReview"}, {"oid": "d8a4293ed45c210a6edcc440242ad24cca139eb2", "url": "https://github.com/kiegroup/kie-wb-common/commit/d8a4293ed45c210a6edcc440242ad24cca139eb2", "message": "Tests", "committedDate": "2020-02-19T18:05:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzgwMTMwMw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3161#discussion_r383801303", "bodyText": "Please remove this private field and also the dependency for appformer-kogito-bridge. Or am I missing something?", "author": "jomarko", "createdAt": "2020-02-25T10:47:53Z", "path": "kie-wb-common-dmn/kie-wb-common-dmn-webapp-kogito-common/src/main/java/org/kie/workbench/common/dmn/webapp/kogito/common/client/editor/DMNDocumentationView.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.dmn.webapp.kogito.common.client.editor;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.inject.Alternative;\n+import javax.inject.Inject;\n+\n+import elemental2.dom.HTMLButtonElement;\n+import elemental2.dom.HTMLDivElement;\n+import org.appformer.kogito.bridge.client.context.EditorContextProvider;\n+import org.kie.workbench.common.dmn.client.editors.documentation.common.DMNDocumentationService;\n+import org.kie.workbench.common.dmn.client.editors.documentation.common.HTMLDownloadHelper;\n+import org.kie.workbench.common.stunner.core.client.util.PrintHelper;\n+\n+import static org.kie.workbench.common.dmn.client.editors.types.common.HiddenHelper.hide;\n+\n+@Alternative\n+public class DMNDocumentationView extends org.kie.workbench.common.dmn.client.editors.documentation.DMNDocumentationView {\n+\n+    private final EditorContextProvider contextProvider;", "originalCommit": "d8a4293ed45c210a6edcc440242ad24cca139eb2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2d2efa6479ed45df8342ac6766a535dd419de5aa", "url": "https://github.com/kiegroup/kie-wb-common/commit/2d2efa6479ed45df8342ac6766a535dd419de5aa", "message": "KOGITO-1156: [DMN Designer] Documentation - Buttons (Download, Print) do not work on VSCode", "committedDate": "2020-02-26T18:52:30Z", "type": "commit"}, {"oid": "2d2efa6479ed45df8342ac6766a535dd419de5aa", "url": "https://github.com/kiegroup/kie-wb-common/commit/2d2efa6479ed45df8342ac6766a535dd419de5aa", "message": "KOGITO-1156: [DMN Designer] Documentation - Buttons (Download, Print) do not work on VSCode", "committedDate": "2020-02-26T18:52:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzNTQ4Nw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3161#discussion_r385035487", "bodyText": "Should this not be annotated @Inject?", "author": "manstis", "createdAt": "2020-02-27T10:22:51Z", "path": "kie-wb-common-dmn/kie-wb-common-dmn-webapp-kogito-common/src/main/java/org/kie/workbench/common/dmn/webapp/kogito/common/client/editor/DMNDocumentationViewButtonsVisibilitySupplier.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.dmn.webapp.kogito.common.client.editor;\n+\n+import java.util.Objects;\n+\n+import javax.enterprise.context.Dependent;\n+import javax.enterprise.inject.Alternative;\n+\n+import org.appformer.kogito.bridge.client.context.EditorContextProvider;\n+\n+import static org.appformer.kogito.bridge.client.context.KogitoChannel.VSCODE;\n+\n+@Dependent\n+@Alternative\n+public class DMNDocumentationViewButtonsVisibilitySupplier extends org.kie.workbench.common.dmn.client.editors.documentation.DMNDocumentationViewButtonsVisibilitySupplier {\n+\n+    private final EditorContextProvider contextProvider;\n+\n+    public DMNDocumentationViewButtonsVisibilitySupplier(final EditorContextProvider contextProvider) {", "originalCommit": "2d2efa6479ed45df8342ac6766a535dd419de5aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzNjQwNA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3161#discussion_r385036404", "bodyText": "Probably best to annotate this @ApplicationScoped otherwise we run the risk of a new instance being created for every injection point (OK, OK, we only have one at the moment.. but probably good practice to annotate correctly?)", "author": "manstis", "createdAt": "2020-02-27T10:24:33Z", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/documentation/DMNDocumentationViewButtonsVisibilitySupplier.java", "diffHunk": "@@ -0,0 +1,24 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.dmn.client.editors.documentation;\n+\n+public class DMNDocumentationViewButtonsVisibilitySupplier {", "originalCommit": "2d2efa6479ed45df8342ac6766a535dd419de5aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2NzM5OQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3161#discussion_r385167399", "bodyText": "I agree.", "author": "danielzhe", "createdAt": "2020-02-27T14:56:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzNjQwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA0MDA0Mw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3161#discussion_r385040043", "bodyText": "@ApplicationScoped would be inherited so no need to duplicate (but, to be honest, I'd probably add anyway to make it more explicit to developers without the need to walk the inheritance tree).", "author": "manstis", "createdAt": "2020-02-27T10:30:58Z", "path": "kie-wb-common-dmn/kie-wb-common-dmn-webapp-kogito-common/src/main/java/org/kie/workbench/common/dmn/webapp/kogito/common/client/editor/DMNDocumentationViewButtonsVisibilitySupplier.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.dmn.webapp.kogito.common.client.editor;\n+\n+import java.util.Objects;\n+\n+import javax.enterprise.context.Dependent;\n+import javax.enterprise.inject.Alternative;\n+\n+import org.appformer.kogito.bridge.client.context.EditorContextProvider;\n+\n+import static org.appformer.kogito.bridge.client.context.KogitoChannel.VSCODE;\n+\n+@Dependent\n+@Alternative\n+public class DMNDocumentationViewButtonsVisibilitySupplier extends org.kie.workbench.common.dmn.client.editors.documentation.DMNDocumentationViewButtonsVisibilitySupplier {", "originalCommit": "2d2efa6479ed45df8342ac6766a535dd419de5aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1abaf3b7a695802e49ec65945034fc89189f3880", "url": "https://github.com/kiegroup/kie-wb-common/commit/1abaf3b7a695802e49ec65945034fc89189f3880", "message": "Changes from code review.", "committedDate": "2020-02-27T14:54:26Z", "type": "commit"}]}