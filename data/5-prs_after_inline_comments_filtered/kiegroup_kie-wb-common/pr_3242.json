{"pr_number": 3242, "pr_title": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "pr_createdAt": "2020-03-24T22:30:17Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3242", "timeline": [{"oid": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "url": "https://github.com/kiegroup/kie-wb-common/commit/792df31ec197f0344aeb810126f3a3f8b1fee53e", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-03-25T15:44:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzMDA5Mg==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398130092", "bodyText": "I think there exists an org.kie.workbench.common.stunner.core.util.HashUtil class, which if already doesn't contain this logic, maybe you can just move it to that class in some public static mehtod.", "author": "romartin", "createdAt": "2020-03-25T19:56:20Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-api/src/main/java/org/kie/workbench/common/stunner/bpmn/forms/model/MetaDataEditorFieldDefinition.java", "diffHunk": "@@ -0,0 +1,77 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.bpmn.forms.model;\n+\n+import java.util.Objects;\n+\n+import org.jboss.errai.common.client.api.annotations.Portable;\n+import org.jboss.errai.databinding.client.api.Bindable;\n+import org.kie.workbench.common.forms.fields.shared.AbstractFieldDefinition;\n+import org.kie.workbench.common.forms.model.FieldDefinition;\n+\n+@Portable\n+@Bindable\n+public class MetaDataEditorFieldDefinition extends AbstractFieldDefinition {\n+\n+    public static final MetaDataEditorFieldType FIELD_TYPE = new MetaDataEditorFieldType();\n+\n+    private String defaultValue;\n+\n+    public MetaDataEditorFieldDefinition() {\n+        super(String.class.getName());\n+    }\n+\n+    @Override\n+    public MetaDataEditorFieldType getFieldType() {\n+        return FIELD_TYPE;\n+    }\n+\n+    public String getDefaultValue() {\n+        return defaultValue;\n+    }\n+\n+    public void setDefaultValue(String defaultValue) {\n+        this.defaultValue = defaultValue;\n+    }\n+\n+    @Override\n+    protected void doCopyFrom(FieldDefinition other) {\n+        if (other instanceof MetaDataEditorFieldDefinition) {\n+            this.setDefaultValue(((MetaDataEditorFieldDefinition) other).getDefaultValue());\n+        }\n+    }\n+\n+    @Override\n+    public boolean equals(Object o) {\n+        if (super.equals(o)) {\n+            if (o instanceof MetaDataEditorFieldDefinition) {\n+                MetaDataEditorFieldDefinition other = (MetaDataEditorFieldDefinition) o;\n+                return Objects.equals(defaultValue, other.defaultValue);\n+            }\n+        }\n+        return false;\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        int result = super.hashCode();", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxODcyMQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398218721", "bodyText": "Fixed!", "author": "handreyrc", "createdAt": "2020-03-25T22:51:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzMDA5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzMTg0MA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398131840", "bodyText": "minor comment - maybe would result easier to read by using a new filter operation for each one of the conditions inside this single filter, this way it will result on something readable as:\nmetadataExtensions.stream() .filter(..) .filter(..) .filter(..) .filter(..) .map(...). .collect()", "author": "romartin", "createdAt": "2020-03-25T19:59:24Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-backend/src/main/java/org/kie/workbench/common/stunner/bpmn/backend/converters/customproperties/elements/MetaDataAttributesElement.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.bpmn.backend.converters.customproperties.elements;\n+\n+import java.util.Collection;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+import org.eclipse.bpmn2.BaseElement;\n+import org.eclipse.bpmn2.ExtensionAttributeValue;\n+import org.eclipse.emf.ecore.EStructuralFeature;\n+import org.eclipse.emf.ecore.impl.EStructuralFeatureImpl;\n+import org.eclipse.emf.ecore.util.FeatureMap;\n+import org.jboss.drools.DroolsFactory;\n+import org.jboss.drools.MetaDataType;\n+\n+import static org.jboss.drools.DroolsPackage.Literals.DOCUMENT_ROOT__META_DATA;\n+import static org.kie.workbench.common.stunner.bpmn.backend.converters.tostunner.properties.Scripts.asCData;\n+\n+public class MetaDataAttributesElement extends ElementDefinition<String> {\n+\n+    public static final String DELIMITER = \"\u00d8\";\n+    public static final String SEPARATOR = \"\u00df\";\n+\n+    public MetaDataAttributesElement(String name) {\n+        super(name, \"\");\n+    }\n+\n+    @Override\n+    public String getValue(BaseElement element) {\n+        return getStringValue(element)\n+                .orElse(getDefaultValue());\n+    }\n+\n+    @Override\n+    public void setValue(BaseElement element, String value) {\n+        setStringValue(element, value);\n+    }\n+\n+    private void setStringValue(BaseElement element, String value) {\n+        Stream.of(value.split(DELIMITER))\n+                .map(this::extensionOf)\n+                .forEach(getExtensionElements(element)::add);\n+    }\n+\n+    private Optional<String> getStringValue(BaseElement element) {\n+        List<ExtensionAttributeValue> extValues = element.getExtensionValues();\n+\n+        List<FeatureMap> extElementsList = extValues.stream()\n+                .map(ExtensionAttributeValue::getValue)\n+                .collect(Collectors.toList());\n+\n+        List<MetaDataType> metadataExtensions = extElementsList.stream()\n+                .map(extAttrVal -> (List<MetaDataType>) extAttrVal.get(DOCUMENT_ROOT__META_DATA, true))\n+                .flatMap(Collection::stream)\n+                .collect(Collectors.toList());\n+\n+        String metaDataAttributes = metadataExtensions.stream()\n+                .filter(metaDataType -> metaDataType.getName() != null &&", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxODYzMQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398218631", "bodyText": "Adjusted!", "author": "handreyrc", "createdAt": "2020-03-25T22:51:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzMTg0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzNzExNQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398137115", "bodyText": "It's your fist MVP component, and you was based on some other already existig component, so no worries, no need to change this now, but keep in mind that the idea is trying NOT to use the model classes on the View. For example, the MetaDataRow class should not appear on this View interface, it should be better working with primitive types and just having all the MetaDataRow handling on the Presenter class, which will pass primitives types to the view.\nThe views should be agnostic as much as possible to the model, and do not provide any kind of logic. This way we keep things decoupled from the implementation, and changing from canvas to any other kind of view technology will be much easier this way.\nAnyway, as commented, just keep that in mind, no need to change it now, but we'll have to refactor some other components as well once having the time :)", "author": "romartin", "createdAt": "2020-03-25T20:09:11Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/metaDataEditor/MetaDataEditorWidgetView.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.bpmn.client.forms.fields.metaDataEditor;\n+\n+import java.util.List;\n+\n+import com.google.gwt.user.client.ui.IsWidget;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.fields.model.MetaDataRow;\n+import org.uberfire.backend.vfs.Path;\n+\n+public interface MetaDataEditorWidgetView extends IsWidget {", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzODE3Nw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398138177", "bodyText": "this field should be managed by the presenter class, not on the view, could be easy to refactor and move it to the presenter? You can for example add new methods on the view interface to pass the errors to the presenter,, which will inject the ErrorPopupPresenter and properly use it.", "author": "romartin", "createdAt": "2020-03-25T20:11:16Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/metaDataEditor/MetaDataListItemWidgetViewImpl.java", "diffHunk": "@@ -0,0 +1,181 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.bpmn.client.forms.fields.metaDataEditor;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.event.Event;\n+import javax.inject.Inject;\n+\n+import com.google.gwt.event.dom.client.ClickEvent;\n+import com.google.gwt.event.logical.shared.ValueChangeEvent;\n+import org.gwtbootstrap3.client.ui.Button;\n+import org.gwtbootstrap3.client.ui.constants.IconType;\n+import org.jboss.errai.databinding.client.api.DataBinder;\n+import org.jboss.errai.ui.shared.api.annotations.AutoBound;\n+import org.jboss.errai.ui.shared.api.annotations.Bound;\n+import org.jboss.errai.ui.shared.api.annotations.DataField;\n+import org.jboss.errai.ui.shared.api.annotations.EventHandler;\n+import org.jboss.errai.ui.shared.api.annotations.Templated;\n+import org.kie.workbench.common.stunner.bpmn.client.StunnerSpecific;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.fields.i18n.StunnerFormsClientFieldsConstants;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.fields.model.MetaDataRow;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.util.StringUtils;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.widgets.AttributeValueTextBox;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.widgets.VariableNameTextBox;\n+import org.uberfire.client.workbench.widgets.common.ErrorPopupPresenter;\n+import org.uberfire.workbench.events.NotificationEvent;\n+\n+/**\n+ * A templated widget that will be used to display a row in a table of\n+ * {@link MetaDataRow}s.\n+ * <p>\n+ * The Name field and Value of MetaDataRow are Bound.\n+ */\n+@Templated(\"MetaDataEditorWidget.html#metaDataRow\")\n+public class MetaDataListItemWidgetViewImpl implements MetaDataListItemWidgetView {\n+\n+    /**\n+     * Errai's data binding module will automatically bind the provided instance\n+     * of the model (see {@link #setModel(MetaDataRow)}) to all fields annotated\n+     * with {@link Bound}. If not specified otherwise, the bindings occur based on\n+     * matching field names (e.g. MetaDataRow.attribute will automatically be kept in\n+     * sync with the data-field \"attribute\")\n+     */\n+    @Inject\n+    @AutoBound\n+    protected DataBinder<MetaDataRow> metaDataRow;\n+\n+    @Inject\n+    @Bound\n+    @DataField\n+    @StunnerSpecific\n+    protected VariableNameTextBox attribute;\n+\n+    @Inject\n+    @Bound\n+    @DataField\n+    @StunnerSpecific\n+    protected AttributeValueTextBox value;\n+\n+    @Inject\n+    protected ErrorPopupPresenter errorPopupPresenter;", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU2MTkwMA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r399561900", "bodyText": "@handreyrc any comment here? are you still working on refactoring this or you think it's not possible now for some reason? Thx!", "author": "romartin", "createdAt": "2020-03-27T22:13:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzODE3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjYzODg3Ng==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r402638876", "bodyText": "Hey @romartin, for some reason I bypassed this issue. I'll check it!", "author": "handreyrc", "createdAt": "2020-04-02T22:45:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzODE3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY5NTkwMw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r402695903", "bodyText": "@romartin Fixed! Could you check if it is ok?", "author": "handreyrc", "createdAt": "2020-04-03T02:03:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzODE3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzODQ3Mw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398138473", "bodyText": "same here, could you move this to the presenter? it's the presenter responsible for firing notifications, not the view itself.", "author": "romartin", "createdAt": "2020-03-25T20:11:47Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/metaDataEditor/MetaDataListItemWidgetViewImpl.java", "diffHunk": "@@ -0,0 +1,181 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.bpmn.client.forms.fields.metaDataEditor;\n+\n+import javax.annotation.PostConstruct;\n+import javax.enterprise.event.Event;\n+import javax.inject.Inject;\n+\n+import com.google.gwt.event.dom.client.ClickEvent;\n+import com.google.gwt.event.logical.shared.ValueChangeEvent;\n+import org.gwtbootstrap3.client.ui.Button;\n+import org.gwtbootstrap3.client.ui.constants.IconType;\n+import org.jboss.errai.databinding.client.api.DataBinder;\n+import org.jboss.errai.ui.shared.api.annotations.AutoBound;\n+import org.jboss.errai.ui.shared.api.annotations.Bound;\n+import org.jboss.errai.ui.shared.api.annotations.DataField;\n+import org.jboss.errai.ui.shared.api.annotations.EventHandler;\n+import org.jboss.errai.ui.shared.api.annotations.Templated;\n+import org.kie.workbench.common.stunner.bpmn.client.StunnerSpecific;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.fields.i18n.StunnerFormsClientFieldsConstants;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.fields.model.MetaDataRow;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.util.StringUtils;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.widgets.AttributeValueTextBox;\n+import org.kie.workbench.common.stunner.bpmn.client.forms.widgets.VariableNameTextBox;\n+import org.uberfire.client.workbench.widgets.common.ErrorPopupPresenter;\n+import org.uberfire.workbench.events.NotificationEvent;\n+\n+/**\n+ * A templated widget that will be used to display a row in a table of\n+ * {@link MetaDataRow}s.\n+ * <p>\n+ * The Name field and Value of MetaDataRow are Bound.\n+ */\n+@Templated(\"MetaDataEditorWidget.html#metaDataRow\")\n+public class MetaDataListItemWidgetViewImpl implements MetaDataListItemWidgetView {\n+\n+    /**\n+     * Errai's data binding module will automatically bind the provided instance\n+     * of the model (see {@link #setModel(MetaDataRow)}) to all fields annotated\n+     * with {@link Bound}. If not specified otherwise, the bindings occur based on\n+     * matching field names (e.g. MetaDataRow.attribute will automatically be kept in\n+     * sync with the data-field \"attribute\")\n+     */\n+    @Inject\n+    @AutoBound\n+    protected DataBinder<MetaDataRow> metaDataRow;\n+\n+    @Inject\n+    @Bound\n+    @DataField\n+    @StunnerSpecific\n+    protected VariableNameTextBox attribute;\n+\n+    @Inject\n+    @Bound\n+    @DataField\n+    @StunnerSpecific\n+    protected AttributeValueTextBox value;\n+\n+    @Inject\n+    protected ErrorPopupPresenter errorPopupPresenter;\n+\n+    private String currentValue;\n+    private String currentName;\n+\n+    @Inject\n+    protected Event<NotificationEvent> notification;", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU2MTkxMw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r399561913", "bodyText": "@handreyrc any comment here? are you still working on refactoring this or you think it's not possible now for some reason? Thx!", "author": "romartin", "createdAt": "2020-03-27T22:13:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzODQ3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjYyNjAwNg==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r402626006", "bodyText": "@handreyrc ?? ^^", "author": "romartin", "createdAt": "2020-04-02T22:12:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzODQ3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjYzOTAzMw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r402639033", "bodyText": "@romartin I'll check this one too.", "author": "handreyrc", "createdAt": "2020-04-02T22:45:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzODQ3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY5NTk4NQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r402695985", "bodyText": "@romartin Fixed! Could you check if it is ok too?", "author": "handreyrc", "createdAt": "2020-04-03T02:03:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzODQ3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzOTA2NQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398139065", "bodyText": "incomplete javadocs, better removing it... it does not provide any useful info", "author": "romartin", "createdAt": "2020-03-25T20:12:51Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/model/MetaDataAttribute.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.bpmn.client.forms.fields.model;\n+\n+public class MetaDataAttribute {\n+\n+    private String attribute;\n+    private String value;\n+    private static final String DELIMITER = \"\u00df\";\n+\n+    public MetaDataAttribute() {\n+    }\n+\n+    public MetaDataAttribute(final String attribute) {\n+        this.attribute = attribute;\n+    }\n+\n+    public MetaDataAttribute(final String attribute,\n+                             final String value) {\n+        this.attribute = attribute;\n+        this.value = value;\n+    }\n+\n+    public MetaDataAttribute(final MetaDataRow row) {\n+        this.attribute = row.getAttribute();\n+        this.value = row.getValue();\n+    }\n+\n+    public String getAttribute() {\n+        return attribute;\n+    }\n+\n+    public void setAttribute(final String attribute) {\n+        this.attribute = attribute;\n+    }\n+\n+    public String getValue() {\n+        return value;\n+    }\n+\n+    public void setValue(final String value) {\n+        this.value = value;\n+    }\n+\n+    public String toString() {\n+        if (attribute != null && !attribute.isEmpty()) {\n+            StringBuilder sb = new StringBuilder().append(attribute);\n+            if (value != null && !value.isEmpty()) {\n+                sb.append(DELIMITER).append(value);\n+            }\n+            return sb.toString();\n+        }\n+        return \"\";\n+    }\n+\n+    /**", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxODI4MA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398218280", "bodyText": "Removed!", "author": "handreyrc", "createdAt": "2020-03-25T22:50:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzOTA2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzOTgxOQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398139819", "bodyText": "can be private? or at least package protected access?", "author": "romartin", "createdAt": "2020-03-25T20:14:05Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/widgets/AttributeValueTextBox.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.stunner.bpmn.client.forms.widgets;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import com.google.gwt.regexp.shared.RegExp;\n+import org.kie.workbench.common.stunner.bpmn.client.StunnerSpecific;\n+\n+@StunnerSpecific\n+public class AttributeValueTextBox extends AbstractValidatingTextBox {\n+\n+    Set<String> invalidValues = null;\n+    boolean isCaseSensitive = false;\n+    String invalidValueErrorMessage = null;\n+\n+    protected String invalidCharacterTypedMessage;\n+    protected String invalidCharactersInValueErrorMessage;\n+\n+    // Pattern for valid value\n+    protected RegExp regExp = null;\n+\n+    /**\n+     * Sets the RegExp pattern for the TextBox\n+     *\n+     * @param pattern\n+     * @param invalidCharactersInValueErrorMessage\n+     */\n+    public void setRegExp(final String pattern,\n+                          final String invalidCharactersInValueErrorMessage,\n+                          final String invalidCharacterTypedMessage) {\n+        regExp = RegExp.compile(pattern);\n+        this.invalidCharactersInValueErrorMessage = invalidCharactersInValueErrorMessage;\n+        this.invalidCharacterTypedMessage = invalidCharacterTypedMessage;\n+    }\n+\n+    /**\n+     * Sets the invalid values for the TextBox\n+     *\n+     * @param invalidValues\n+     * @param isCaseSensitive\n+     * @param invalidValueErrorMessage\n+     */\n+    public void setInvalidValues(final Set<String> invalidValues,\n+                                 final boolean isCaseSensitive,\n+                                 final String invalidValueErrorMessage) {\n+        if (isCaseSensitive) {\n+            this.invalidValues = invalidValues;\n+        } else {\n+            this.invalidValues = new HashSet<>();\n+            for (String value : invalidValues) {\n+                this.invalidValues.add(value.toLowerCase());\n+            }\n+        }\n+        this.isCaseSensitive = isCaseSensitive;\n+        this.invalidValueErrorMessage = invalidValueErrorMessage;\n+    }\n+\n+    /**\n+     * Tests whether a value is in the list of invalid values\n+     *\n+     * @param value\n+     * @return error message if value is invalid; otherwise null\n+     */\n+    protected String testForInvalidValue(final String value) {\n+        if (value == null || value.isEmpty() || invalidValues == null) {\n+            return null;\n+        }\n+        String testValue;\n+        if (!isCaseSensitive) {\n+            testValue = value.toLowerCase();\n+        } else {\n+            testValue = value;\n+        }\n+        if (invalidValues.contains(testValue)) {\n+            return invalidValueErrorMessage;\n+        } else {\n+            return null;\n+        }\n+    }\n+\n+    @Override\n+    public String isValidValue(String value, boolean isOnFocusLost) {\n+        if (invalidValues != null && !invalidValues.isEmpty() && isOnFocusLost) {\n+            String err = testForInvalidValue(value);\n+            if (err != null && !err.isEmpty()) {\n+                return err;\n+            }\n+        }\n+        if (regExp != null) {\n+            boolean isValid = this.regExp.test(value);\n+            if (!isValid) {\n+                String invalidChars = getInvalidCharsInName(value);\n+                return (isOnFocusLost ? invalidCharactersInValueErrorMessage : invalidCharacterTypedMessage)\n+                        + \": \" + invalidChars;\n+            }\n+        }\n+        return null;\n+    }\n+\n+    @Override\n+    protected String makeValidValue(final String value) {\n+        if (value == null || value.isEmpty()) {\n+            return \"\";\n+        }\n+        // It's a known invalid value\n+        if (testForInvalidValue(value) != null) {\n+            return \"\";\n+        } else {\n+            StringBuilder validValue = new StringBuilder(value.length());\n+            for (int i = 0; i < value.length(); i++) {\n+                char c = value.charAt(i);\n+                if (isValidChar(c)) {\n+                    validValue.append(c);\n+                }\n+            }\n+            return validValue.toString();\n+        }\n+    }\n+\n+    protected boolean isValidChar(final char c) {", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxODE4Nw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398218187", "bodyText": "Changed to private!", "author": "handreyrc", "createdAt": "2020-03-25T22:50:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzOTgxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzOTkzMg==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398139932", "bodyText": "can be private? or at least package protected access?", "author": "romartin", "createdAt": "2020-03-25T20:14:18Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/widgets/AttributeValueTextBox.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.stunner.bpmn.client.forms.widgets;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import com.google.gwt.regexp.shared.RegExp;\n+import org.kie.workbench.common.stunner.bpmn.client.StunnerSpecific;\n+\n+@StunnerSpecific\n+public class AttributeValueTextBox extends AbstractValidatingTextBox {\n+\n+    Set<String> invalidValues = null;\n+    boolean isCaseSensitive = false;\n+    String invalidValueErrorMessage = null;\n+\n+    protected String invalidCharacterTypedMessage;\n+    protected String invalidCharactersInValueErrorMessage;\n+\n+    // Pattern for valid value\n+    protected RegExp regExp = null;\n+\n+    /**\n+     * Sets the RegExp pattern for the TextBox\n+     *\n+     * @param pattern\n+     * @param invalidCharactersInValueErrorMessage\n+     */\n+    public void setRegExp(final String pattern,\n+                          final String invalidCharactersInValueErrorMessage,\n+                          final String invalidCharacterTypedMessage) {\n+        regExp = RegExp.compile(pattern);\n+        this.invalidCharactersInValueErrorMessage = invalidCharactersInValueErrorMessage;\n+        this.invalidCharacterTypedMessage = invalidCharacterTypedMessage;\n+    }\n+\n+    /**\n+     * Sets the invalid values for the TextBox\n+     *\n+     * @param invalidValues\n+     * @param isCaseSensitive\n+     * @param invalidValueErrorMessage\n+     */\n+    public void setInvalidValues(final Set<String> invalidValues,\n+                                 final boolean isCaseSensitive,\n+                                 final String invalidValueErrorMessage) {\n+        if (isCaseSensitive) {\n+            this.invalidValues = invalidValues;\n+        } else {\n+            this.invalidValues = new HashSet<>();\n+            for (String value : invalidValues) {\n+                this.invalidValues.add(value.toLowerCase());\n+            }\n+        }\n+        this.isCaseSensitive = isCaseSensitive;\n+        this.invalidValueErrorMessage = invalidValueErrorMessage;\n+    }\n+\n+    /**\n+     * Tests whether a value is in the list of invalid values\n+     *\n+     * @param value\n+     * @return error message if value is invalid; otherwise null\n+     */\n+    protected String testForInvalidValue(final String value) {\n+        if (value == null || value.isEmpty() || invalidValues == null) {\n+            return null;\n+        }\n+        String testValue;\n+        if (!isCaseSensitive) {\n+            testValue = value.toLowerCase();\n+        } else {\n+            testValue = value;\n+        }\n+        if (invalidValues.contains(testValue)) {\n+            return invalidValueErrorMessage;\n+        } else {\n+            return null;\n+        }\n+    }\n+\n+    @Override\n+    public String isValidValue(String value, boolean isOnFocusLost) {\n+        if (invalidValues != null && !invalidValues.isEmpty() && isOnFocusLost) {\n+            String err = testForInvalidValue(value);\n+            if (err != null && !err.isEmpty()) {\n+                return err;\n+            }\n+        }\n+        if (regExp != null) {\n+            boolean isValid = this.regExp.test(value);\n+            if (!isValid) {\n+                String invalidChars = getInvalidCharsInName(value);\n+                return (isOnFocusLost ? invalidCharactersInValueErrorMessage : invalidCharacterTypedMessage)\n+                        + \": \" + invalidChars;\n+            }\n+        }\n+        return null;\n+    }\n+\n+    @Override\n+    protected String makeValidValue(final String value) {\n+        if (value == null || value.isEmpty()) {\n+            return \"\";\n+        }\n+        // It's a known invalid value\n+        if (testForInvalidValue(value) != null) {\n+            return \"\";\n+        } else {\n+            StringBuilder validValue = new StringBuilder(value.length());\n+            for (int i = 0; i < value.length(); i++) {\n+                char c = value.charAt(i);\n+                if (isValidChar(c)) {\n+                    validValue.append(c);\n+                }\n+            }\n+            return validValue.toString();\n+        }\n+    }\n+\n+    protected boolean isValidChar(final char c) {\n+        return isValidChar(regExp, c);\n+    }\n+\n+    protected String getInvalidCharsInName(final String value) {", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxODEzNQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398218135", "bodyText": "Changed to private!", "author": "handreyrc", "createdAt": "2020-03-25T22:50:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzOTkzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE0MDA3Mg==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398140072", "bodyText": "can be private? or at least package protected access?", "author": "romartin", "createdAt": "2020-03-25T20:14:35Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/widgets/AttributeValueTextBox.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.stunner.bpmn.client.forms.widgets;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import com.google.gwt.regexp.shared.RegExp;\n+import org.kie.workbench.common.stunner.bpmn.client.StunnerSpecific;\n+\n+@StunnerSpecific\n+public class AttributeValueTextBox extends AbstractValidatingTextBox {\n+\n+    Set<String> invalidValues = null;\n+    boolean isCaseSensitive = false;\n+    String invalidValueErrorMessage = null;\n+\n+    protected String invalidCharacterTypedMessage;\n+    protected String invalidCharactersInValueErrorMessage;\n+\n+    // Pattern for valid value\n+    protected RegExp regExp = null;\n+\n+    /**\n+     * Sets the RegExp pattern for the TextBox\n+     *\n+     * @param pattern\n+     * @param invalidCharactersInValueErrorMessage\n+     */\n+    public void setRegExp(final String pattern,\n+                          final String invalidCharactersInValueErrorMessage,\n+                          final String invalidCharacterTypedMessage) {\n+        regExp = RegExp.compile(pattern);\n+        this.invalidCharactersInValueErrorMessage = invalidCharactersInValueErrorMessage;\n+        this.invalidCharacterTypedMessage = invalidCharacterTypedMessage;\n+    }\n+\n+    /**\n+     * Sets the invalid values for the TextBox\n+     *\n+     * @param invalidValues\n+     * @param isCaseSensitive\n+     * @param invalidValueErrorMessage\n+     */\n+    public void setInvalidValues(final Set<String> invalidValues,\n+                                 final boolean isCaseSensitive,\n+                                 final String invalidValueErrorMessage) {\n+        if (isCaseSensitive) {\n+            this.invalidValues = invalidValues;\n+        } else {\n+            this.invalidValues = new HashSet<>();\n+            for (String value : invalidValues) {\n+                this.invalidValues.add(value.toLowerCase());\n+            }\n+        }\n+        this.isCaseSensitive = isCaseSensitive;\n+        this.invalidValueErrorMessage = invalidValueErrorMessage;\n+    }\n+\n+    /**\n+     * Tests whether a value is in the list of invalid values\n+     *\n+     * @param value\n+     * @return error message if value is invalid; otherwise null\n+     */\n+    protected String testForInvalidValue(final String value) {", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxODA2MA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398218060", "bodyText": "Changed to private!", "author": "handreyrc", "createdAt": "2020-03-25T22:49:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE0MDA3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE0MDIxNA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398140214", "bodyText": "remove javadocs, no useful info IMO", "author": "romartin", "createdAt": "2020-03-25T20:14:52Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/widgets/AttributeValueTextBox.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.stunner.bpmn.client.forms.widgets;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import com.google.gwt.regexp.shared.RegExp;\n+import org.kie.workbench.common.stunner.bpmn.client.StunnerSpecific;\n+\n+@StunnerSpecific\n+public class AttributeValueTextBox extends AbstractValidatingTextBox {\n+\n+    Set<String> invalidValues = null;\n+    boolean isCaseSensitive = false;\n+    String invalidValueErrorMessage = null;\n+\n+    protected String invalidCharacterTypedMessage;\n+    protected String invalidCharactersInValueErrorMessage;\n+\n+    // Pattern for valid value\n+    protected RegExp regExp = null;\n+\n+    /**\n+     * Sets the RegExp pattern for the TextBox\n+     *\n+     * @param pattern\n+     * @param invalidCharactersInValueErrorMessage\n+     */\n+    public void setRegExp(final String pattern,\n+                          final String invalidCharactersInValueErrorMessage,\n+                          final String invalidCharacterTypedMessage) {\n+        regExp = RegExp.compile(pattern);\n+        this.invalidCharactersInValueErrorMessage = invalidCharactersInValueErrorMessage;\n+        this.invalidCharacterTypedMessage = invalidCharacterTypedMessage;\n+    }\n+\n+    /**", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxNzk0NA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398217944", "bodyText": "Removed!", "author": "handreyrc", "createdAt": "2020-03-25T22:49:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE0MDIxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE0MDM4NA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398140384", "bodyText": "remove javadocs, no useful info IMO", "author": "romartin", "createdAt": "2020-03-25T20:15:12Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/widgets/AttributeValueTextBox.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.stunner.bpmn.client.forms.widgets;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import com.google.gwt.regexp.shared.RegExp;\n+import org.kie.workbench.common.stunner.bpmn.client.StunnerSpecific;\n+\n+@StunnerSpecific\n+public class AttributeValueTextBox extends AbstractValidatingTextBox {\n+\n+    Set<String> invalidValues = null;\n+    boolean isCaseSensitive = false;\n+    String invalidValueErrorMessage = null;\n+\n+    protected String invalidCharacterTypedMessage;\n+    protected String invalidCharactersInValueErrorMessage;\n+\n+    // Pattern for valid value\n+    protected RegExp regExp = null;\n+\n+    /**\n+     * Sets the RegExp pattern for the TextBox\n+     *\n+     * @param pattern\n+     * @param invalidCharactersInValueErrorMessage\n+     */\n+    public void setRegExp(final String pattern,\n+                          final String invalidCharactersInValueErrorMessage,\n+                          final String invalidCharacterTypedMessage) {\n+        regExp = RegExp.compile(pattern);\n+        this.invalidCharactersInValueErrorMessage = invalidCharactersInValueErrorMessage;\n+        this.invalidCharacterTypedMessage = invalidCharacterTypedMessage;\n+    }\n+\n+    /**\n+     * Sets the invalid values for the TextBox\n+     *\n+     * @param invalidValues\n+     * @param isCaseSensitive\n+     * @param invalidValueErrorMessage\n+     */\n+    public void setInvalidValues(final Set<String> invalidValues,\n+                                 final boolean isCaseSensitive,\n+                                 final String invalidValueErrorMessage) {\n+        if (isCaseSensitive) {\n+            this.invalidValues = invalidValues;\n+        } else {\n+            this.invalidValues = new HashSet<>();\n+            for (String value : invalidValues) {\n+                this.invalidValues.add(value.toLowerCase());\n+            }\n+        }\n+        this.isCaseSensitive = isCaseSensitive;\n+        this.invalidValueErrorMessage = invalidValueErrorMessage;\n+    }\n+\n+    /**", "originalCommit": "792df31ec197f0344aeb810126f3a3f8b1fee53e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxNzg2Mg==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3242#discussion_r398217862", "bodyText": "Removed!", "author": "handreyrc", "createdAt": "2020-03-25T22:49:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE0MDM4NA=="}], "type": "inlineReview"}, {"oid": "c1af6fbdaaee5b4f15f3a871e55ef2e93c119b40", "url": "https://github.com/kiegroup/kie-wb-common/commit/c1af6fbdaaee5b4f15f3a871e55ef2e93c119b40", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-03-26T01:29:54Z", "type": "forcePushed"}, {"oid": "8985e3fcb8165909b0f628c477f77cbfe09bf750", "url": "https://github.com/kiegroup/kie-wb-common/commit/8985e3fcb8165909b0f628c477f77cbfe09bf750", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-03-26T22:42:01Z", "type": "forcePushed"}, {"oid": "f5feba93564a0a6139bc1e80bafc90b4250e07b9", "url": "https://github.com/kiegroup/kie-wb-common/commit/f5feba93564a0a6139bc1e80bafc90b4250e07b9", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-03-28T00:29:33Z", "type": "forcePushed"}, {"oid": "840a8f7414d8bf251a782e14ee5c19383381203b", "url": "https://github.com/kiegroup/kie-wb-common/commit/840a8f7414d8bf251a782e14ee5c19383381203b", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-03-30T16:05:59Z", "type": "forcePushed"}, {"oid": "78daf480b019bb6caf207063544cddcdeb004bdf", "url": "https://github.com/kiegroup/kie-wb-common/commit/78daf480b019bb6caf207063544cddcdeb004bdf", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-03-30T23:33:21Z", "type": "forcePushed"}, {"oid": "a68643d847ee60671fa74bb95404a0e9c6d3ee1e", "url": "https://github.com/kiegroup/kie-wb-common/commit/a68643d847ee60671fa74bb95404a0e9c6d3ee1e", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-03-31T13:37:01Z", "type": "forcePushed"}, {"oid": "14985a7bfc8ba50f2be8a39436a565fc5bfc803a", "url": "https://github.com/kiegroup/kie-wb-common/commit/14985a7bfc8ba50f2be8a39436a565fc5bfc803a", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-03-31T17:17:52Z", "type": "forcePushed"}, {"oid": "d683ab1ef79374df99ea5946ff94bc678b038d68", "url": "https://github.com/kiegroup/kie-wb-common/commit/d683ab1ef79374df99ea5946ff94bc678b038d68", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-03-31T19:48:57Z", "type": "forcePushed"}, {"oid": "b4f775d4b55fb6d7b290511c31c73928cd66d8a4", "url": "https://github.com/kiegroup/kie-wb-common/commit/b4f775d4b55fb6d7b290511c31c73928cd66d8a4", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-04-01T03:27:13Z", "type": "forcePushed"}, {"oid": "6e706f3468aac6f15f8dcadc289b6f1cc186453c", "url": "https://github.com/kiegroup/kie-wb-common/commit/6e706f3468aac6f15f8dcadc289b6f1cc186453c", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-04-01T14:55:42Z", "type": "forcePushed"}, {"oid": "3660f3d47c7a9d9d9b01b7aad339565176904744", "url": "https://github.com/kiegroup/kie-wb-common/commit/3660f3d47c7a9d9d9b01b7aad339565176904744", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-04-03T01:51:43Z", "type": "forcePushed"}, {"oid": "e01c065488006d235b318c18908e72788adae17c", "url": "https://github.com/kiegroup/kie-wb-common/commit/e01c065488006d235b318c18908e72788adae17c", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-04-03T02:20:01Z", "type": "forcePushed"}, {"oid": "d04cb5636a6f25252817d490ed63fb308a134995", "url": "https://github.com/kiegroup/kie-wb-common/commit/d04cb5636a6f25252817d490ed63fb308a134995", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-04-07T19:21:47Z", "type": "commit"}, {"oid": "d04cb5636a6f25252817d490ed63fb308a134995", "url": "https://github.com/kiegroup/kie-wb-common/commit/d04cb5636a6f25252817d490ed63fb308a134995", "message": "KOGITO-988: Stunner - [VSCode] Support for process metadata attributes", "committedDate": "2020-04-07T19:21:47Z", "type": "forcePushed"}]}