{"pr_number": 6880, "pr_title": "feat: Add new outlier detection API [DHIS2-10113]", "pr_createdAt": "2020-12-10T15:35:20Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/6880", "timeline": [{"oid": "ab73a892b7e154a616f0dd2888400fe8cbf97035", "url": "https://github.com/dhis2/dhis2-core/commit/ab73a892b7e154a616f0dd2888400fe8cbf97035", "message": "Outlier detection", "committedDate": "2020-12-10T14:37:13Z", "type": "commit"}, {"oid": "8751a417b7f92f615c7213dfbd52b8450248a036", "url": "https://github.com/dhis2/dhis2-core/commit/8751a417b7f92f615c7213dfbd52b8450248a036", "message": "Add validation", "committedDate": "2020-12-10T15:14:43Z", "type": "commit"}, {"oid": "d56608860f8ac223bb9194db3c7e5f19277a5c28", "url": "https://github.com/dhis2/dhis2-core/commit/d56608860f8ac223bb9194db3c7e5f19277a5c28", "message": "Add interface", "committedDate": "2020-12-10T15:19:17Z", "type": "commit"}, {"oid": "ce163fb7a95f4e722ed46b807c94392634b8d673", "url": "https://github.com/dhis2/dhis2-core/commit/ce163fb7a95f4e722ed46b807c94392634b8d673", "message": "Add controller", "committedDate": "2020-12-10T15:22:58Z", "type": "commit"}, {"oid": "ebdaf3d8097ff2263d5edef0121f1387d02fbbb3", "url": "https://github.com/dhis2/dhis2-core/commit/ebdaf3d8097ff2263d5edef0121f1387d02fbbb3", "message": "Add licenses", "committedDate": "2020-12-10T15:29:15Z", "type": "commit"}, {"oid": "1cb135f82aa9c24c1555075383086d60beb0596b", "url": "https://github.com/dhis2/dhis2-core/commit/1cb135f82aa9c24c1555075383086d60beb0596b", "message": "Add controller", "committedDate": "2020-12-10T15:29:41Z", "type": "commit"}, {"oid": "4172d612cc41d5e0dc6d57fc2db5fd0d29bba266", "url": "https://github.com/dhis2/dhis2-core/commit/4172d612cc41d5e0dc6d57fc2db5fd0d29bba266", "message": "Add NamedParameterJdbcTemplate", "committedDate": "2020-12-10T15:34:17Z", "type": "commit"}, {"oid": "ab8efe1abd00b8c8da7914795eb91886e5fea5a8", "url": "https://github.com/dhis2/dhis2-core/commit/ab8efe1abd00b8c8da7914795eb91886e5fea5a8", "message": "Update code style", "committedDate": "2020-12-10T15:40:56Z", "type": "commit"}, {"oid": "d6bfb404724fdf16a30ce9935038a951cd7d1312", "url": "https://github.com/dhis2/dhis2-core/commit/d6bfb404724fdf16a30ce9935038a951cd7d1312", "message": "Update code style", "committedDate": "2020-12-10T15:41:32Z", "type": "commit"}, {"oid": "2b6a057f4aebf7d0b7b4153adcc2a5cfd422e15b", "url": "https://github.com/dhis2/dhis2-core/commit/2b6a057f4aebf7d0b7b4153adcc2a5cfd422e15b", "message": "Update SQL", "committedDate": "2020-12-10T15:45:00Z", "type": "commit"}, {"oid": "63f330cc0244e44ce0555f254b52fe4efd3359cd", "url": "https://github.com/dhis2/dhis2-core/commit/63f330cc0244e44ce0555f254b52fe4efd3359cd", "message": "Update SQL", "committedDate": "2020-12-10T15:48:04Z", "type": "commit"}, {"oid": "c527098de3c066d37ed4329254abbd447a7dce75", "url": "https://github.com/dhis2/dhis2-core/commit/c527098de3c066d37ed4329254abbd447a7dce75", "message": "Update SQL", "committedDate": "2020-12-10T15:50:02Z", "type": "commit"}, {"oid": "e6cbae75d735265e05eb989a5134f2f4181a7fdd", "url": "https://github.com/dhis2/dhis2-core/commit/e6cbae75d735265e05eb989a5134f2f4181a7fdd", "message": "Update SQL", "committedDate": "2020-12-10T15:51:10Z", "type": "commit"}, {"oid": "40034558677a88cbb66e8cb6994a3c52b26bea53", "url": "https://github.com/dhis2/dhis2-core/commit/40034558677a88cbb66e8cb6994a3c52b26bea53", "message": "Minor", "committedDate": "2020-12-10T15:57:47Z", "type": "commit"}, {"oid": "9baddf6939a2c7fb84858d498972a925797a4a88", "url": "https://github.com/dhis2/dhis2-core/commit/9baddf6939a2c7fb84858d498972a925797a4a88", "message": "Update SQL", "committedDate": "2020-12-10T16:09:30Z", "type": "commit"}, {"oid": "a67211fed4d003859717ad985c94a3ccd42576a6", "url": "https://github.com/dhis2/dhis2-core/commit/a67211fed4d003859717ad985c94a3ccd42576a6", "message": "Add metadata", "committedDate": "2020-12-10T16:22:53Z", "type": "commit"}, {"oid": "bdccf47803ec0c5986309f023a15642176a5cea9", "url": "https://github.com/dhis2/dhis2-core/commit/bdccf47803ec0c5986309f023a15642176a5cea9", "message": "Add license", "committedDate": "2020-12-10T16:25:02Z", "type": "commit"}, {"oid": "851e7e18a24a06c665a98e5bedcec0099c1a9fc5", "url": "https://github.com/dhis2/dhis2-core/commit/851e7e18a24a06c665a98e5bedcec0099c1a9fc5", "message": "Add json", "committedDate": "2020-12-10T16:25:48Z", "type": "commit"}, {"oid": "e90c1c9f044fc9a663ffc54e046514a0b2aa1c8d", "url": "https://github.com/dhis2/dhis2-core/commit/e90c1c9f044fc9a663ffc54e046514a0b2aa1c8d", "message": "Use date comparison", "committedDate": "2020-12-10T16:56:12Z", "type": "commit"}, {"oid": "ee3022f8226f0acb1c787cdfdeafaba77172529b", "url": "https://github.com/dhis2/dhis2-core/commit/ee3022f8226f0acb1c787cdfdeafaba77172529b", "message": "Use date comparison", "committedDate": "2020-12-10T17:26:00Z", "type": "commit"}, {"oid": "b1a4cf46c5e12e3b5037a72c9900810792de8cdc", "url": "https://github.com/dhis2/dhis2-core/commit/b1a4cf46c5e12e3b5037a72c9900810792de8cdc", "message": "Use date comparison", "committedDate": "2020-12-10T17:50:36Z", "type": "commit"}, {"oid": "6820ab6145b44a53fa5b85b187af3d8f79a8085a", "url": "https://github.com/dhis2/dhis2-core/commit/6820ab6145b44a53fa5b85b187af3d8f79a8085a", "message": "Filter numeric", "committedDate": "2020-12-10T19:06:10Z", "type": "commit"}, {"oid": "3524c7e24725afa650bd084fa0e2eef2ca32b18f", "url": "https://github.com/dhis2/dhis2-core/commit/3524c7e24725afa650bd084fa0e2eef2ca32b18f", "message": "Add names", "committedDate": "2020-12-10T19:32:58Z", "type": "commit"}, {"oid": "ba4aa6326dc04951704645ab40109a189fbf91ab", "url": "https://github.com/dhis2/dhis2-core/commit/ba4aa6326dc04951704645ab40109a189fbf91ab", "message": "Add max check", "committedDate": "2020-12-10T19:48:50Z", "type": "commit"}, {"oid": "e988b830087f30569521c9ac0b2dfd35689ce98a", "url": "https://github.com/dhis2/dhis2-core/commit/e988b830087f30569521c9ac0b2dfd35689ce98a", "message": "Add metadata", "committedDate": "2020-12-10T19:54:07Z", "type": "commit"}, {"oid": "a6ad8db22ba8a79a7d6ee5595c9c0ddf02bd0ad2", "url": "https://github.com/dhis2/dhis2-core/commit/a6ad8db22ba8a79a7d6ee5595c9c0ddf02bd0ad2", "message": "Order bY", "committedDate": "2020-12-10T20:49:53Z", "type": "commit"}, {"oid": "c7daa8e85b3465b9d616d311cafe7b6df38b2bf8", "url": "https://github.com/dhis2/dhis2-core/commit/c7daa8e85b3465b9d616d311cafe7b6df38b2bf8", "message": "Update code", "committedDate": "2020-12-10T20:51:59Z", "type": "commit"}, {"oid": "f6dc69999b8d6f95a00003d534c9e80583a97923", "url": "https://github.com/dhis2/dhis2-core/commit/f6dc69999b8d6f95a00003d534c9e80583a97923", "message": "Update code", "committedDate": "2020-12-10T20:52:40Z", "type": "commit"}, {"oid": "2a378299e760d5bcd93a51cdfae697db68d5f0d2", "url": "https://github.com/dhis2/dhis2-core/commit/2a378299e760d5bcd93a51cdfae697db68d5f0d2", "message": "Max limit", "committedDate": "2020-12-10T22:26:30Z", "type": "commit"}, {"oid": "04fa7d748a2fc75508e85dc821d86ea8a5520413", "url": "https://github.com/dhis2/dhis2-core/commit/04fa7d748a2fc75508e85dc821d86ea8a5520413", "message": "Add javadoc", "committedDate": "2020-12-10T22:31:57Z", "type": "commit"}, {"oid": "f21a18c8ce12b10c404bfbbf098ed188623585a3", "url": "https://github.com/dhis2/dhis2-core/commit/f21a18c8ce12b10c404bfbbf098ed188623585a3", "message": "Add javadoc", "committedDate": "2020-12-10T22:34:07Z", "type": "commit"}, {"oid": "82081db82a05ac8559c56e92672e5f350adac2d6", "url": "https://github.com/dhis2/dhis2-core/commit/82081db82a05ac8559c56e92672e5f350adac2d6", "message": "Add javadoc", "committedDate": "2020-12-10T22:35:26Z", "type": "commit"}, {"oid": "3492027cd38debf841cc9d90f5d24e9b6b471fc0", "url": "https://github.com/dhis2/dhis2-core/commit/3492027cd38debf841cc9d90f5d24e9b6b471fc0", "message": "Add javadoc", "committedDate": "2020-12-10T22:42:50Z", "type": "commit"}, {"oid": "8568890f337e6ae5063cf382ae441a942ae98710", "url": "https://github.com/dhis2/dhis2-core/commit/8568890f337e6ae5063cf382ae441a942ae98710", "message": "Add validation", "committedDate": "2020-12-10T22:45:06Z", "type": "commit"}, {"oid": "f19d0eef072244260fa33e86dc5fc0ab880b5c0b", "url": "https://github.com/dhis2/dhis2-core/commit/f19d0eef072244260fa33e86dc5fc0ab880b5c0b", "message": "Add validation", "committedDate": "2020-12-10T22:45:47Z", "type": "commit"}, {"oid": "3544e1f14e6d2c110b422e19e93580dbccb32f2c", "url": "https://github.com/dhis2/dhis2-core/commit/3544e1f14e6d2c110b422e19e93580dbccb32f2c", "message": "Add validation", "committedDate": "2020-12-10T22:47:23Z", "type": "commit"}, {"oid": "680721bedbcdb2bcd1812cd0550404f82f047870", "url": "https://github.com/dhis2/dhis2-core/commit/680721bedbcdb2bcd1812cd0550404f82f047870", "message": "Add code", "committedDate": "2020-12-10T22:52:25Z", "type": "commit"}, {"oid": "aa9077dfe5673ee02184b33b07642373e58584d8", "url": "https://github.com/dhis2/dhis2-core/commit/aa9077dfe5673ee02184b33b07642373e58584d8", "message": "Add code", "committedDate": "2020-12-10T22:54:24Z", "type": "commit"}, {"oid": "1e247328f93bbd0e0a728a98a042bbca703714f3", "url": "https://github.com/dhis2/dhis2-core/commit/1e247328f93bbd0e0a728a98a042bbca703714f3", "message": "Add validation", "committedDate": "2020-12-10T23:04:46Z", "type": "commit"}, {"oid": "f3886a301f613dd892a6bcf05750ce6a1ca09ae4", "url": "https://github.com/dhis2/dhis2-core/commit/f3886a301f613dd892a6bcf05750ce6a1ca09ae4", "message": "Add javadoc", "committedDate": "2020-12-10T23:08:42Z", "type": "commit"}, {"oid": "c9159f8532639b6c8a62027cf9c3f6b76c792746", "url": "https://github.com/dhis2/dhis2-core/commit/c9159f8532639b6c8a62027cf9c3f6b76c792746", "message": "Update code", "committedDate": "2020-12-11T08:22:08Z", "type": "commit"}, {"oid": "9fb143ab436828b462f80d163d24555a1a98881e", "url": "https://github.com/dhis2/dhis2-core/commit/9fb143ab436828b462f80d163d24555a1a98881e", "message": "Merge branch 'master' into DHIS2-10113-outlier-analysis", "committedDate": "2020-12-11T12:16:33Z", "type": "commit"}, {"oid": "d4b3696ec94401eb3052d9c9315d5a11f0dd1a1a", "url": "https://github.com/dhis2/dhis2-core/commit/d4b3696ec94401eb3052d9c9315d5a11f0dd1a1a", "message": "Update code", "committedDate": "2020-12-11T12:20:47Z", "type": "commit"}, {"oid": "35cfcc947206e6cdca018607b50e9150a61f2776", "url": "https://github.com/dhis2/dhis2-core/commit/35cfcc947206e6cdca018607b50e9150a61f2776", "message": "Update code", "committedDate": "2020-12-11T12:21:44Z", "type": "commit"}, {"oid": "77b9628c148d6f845b6c25166f495856455d7db5", "url": "https://github.com/dhis2/dhis2-core/commit/77b9628c148d6f845b6c25166f495856455d7db5", "message": "Merge branch 'master' into DHIS2-10113-outlier-analysis", "committedDate": "2020-12-14T13:13:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzE1OTY4OQ==", "url": "https://github.com/dhis2/dhis2-core/pull/6880#discussion_r543159689", "bodyText": "package before license", "author": "mortenoh", "createdAt": "2020-12-15T08:56:45Z", "path": "dhis-2/dhis-services/dhis-service-validation/src/main/java/org/hisp/dhis/outlierdetection/Order.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+package org.hisp.dhis.outlierdetection;", "originalCommit": "77b9628c148d6f845b6c25166f495856455d7db5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "aa9972bff40a465c64dd99641d199c6f4cdd21e2", "url": "https://github.com/dhis2/dhis2-core/commit/aa9972bff40a465c64dd99641d199c6f4cdd21e2", "message": "Add  test", "committedDate": "2020-12-15T09:40:45Z", "type": "commit"}, {"oid": "b924b8bdafea818d87badc4e8af23734fed1e9d8", "url": "https://github.com/dhis2/dhis2-core/commit/b924b8bdafea818d87badc4e8af23734fed1e9d8", "message": "Update test", "committedDate": "2020-12-15T09:52:56Z", "type": "commit"}, {"oid": "b53eddf79530545ba6186db8a3dc766fae14bf05", "url": "https://github.com/dhis2/dhis2-core/commit/b53eddf79530545ba6186db8a3dc766fae14bf05", "message": "Update test", "committedDate": "2020-12-15T10:00:05Z", "type": "commit"}, {"oid": "61f22fef5e508e79262aa8fbfc967d88b8937af0", "url": "https://github.com/dhis2/dhis2-core/commit/61f22fef5e508e79262aa8fbfc967d88b8937af0", "message": "Add test", "committedDate": "2020-12-15T10:07:02Z", "type": "commit"}, {"oid": "bfac760c84559edb2477b10a4baea76a18d9ed01", "url": "https://github.com/dhis2/dhis2-core/commit/bfac760c84559edb2477b10a4baea76a18d9ed01", "message": "Update test", "committedDate": "2020-12-15T10:12:47Z", "type": "commit"}, {"oid": "7870cc6510c269e9da794cca4dafc541815ca5e4", "url": "https://github.com/dhis2/dhis2-core/commit/7870cc6510c269e9da794cca4dafc541815ca5e4", "message": "Add test", "committedDate": "2020-12-15T11:10:35Z", "type": "commit"}, {"oid": "f97138da51f7e12bba7cd5d57513a6c3f1ab2e2b", "url": "https://github.com/dhis2/dhis2-core/commit/f97138da51f7e12bba7cd5d57513a6c3f1ab2e2b", "message": "Merge branch 'master' into DHIS2-10113-outlier-analysis", "committedDate": "2020-12-15T11:55:11Z", "type": "commit"}, {"oid": "ba58ec8d14b4af7506cb60f619b28554324d05e2", "url": "https://github.com/dhis2/dhis2-core/commit/ba58ec8d14b4af7506cb60f619b28554324d05e2", "message": "Add test", "committedDate": "2020-12-15T12:37:37Z", "type": "commit"}, {"oid": "6acecd7babf126abe2c2d25fd286eac559c82c86", "url": "https://github.com/dhis2/dhis2-core/commit/6acecd7babf126abe2c2d25fd286eac559c82c86", "message": "Update test", "committedDate": "2020-12-15T12:40:29Z", "type": "commit"}, {"oid": "bff710368941381ee7194630025bfe28c542bff6", "url": "https://github.com/dhis2/dhis2-core/commit/bff710368941381ee7194630025bfe28c542bff6", "message": "Add test", "committedDate": "2020-12-15T16:07:05Z", "type": "commit"}, {"oid": "c2961b57a7de21988329af9760cb6d77a92be105", "url": "https://github.com/dhis2/dhis2-core/commit/c2961b57a7de21988329af9760cb6d77a92be105", "message": "Update get method", "committedDate": "2020-12-15T16:12:48Z", "type": "commit"}, {"oid": "7f2bdc19066fbaeb6429b8c777a4cd86efbc924d", "url": "https://github.com/dhis2/dhis2-core/commit/7f2bdc19066fbaeb6429b8c777a4cd86efbc924d", "message": "Update test", "committedDate": "2020-12-15T16:14:10Z", "type": "commit"}, {"oid": "d61c3eda0adeaf8b6c288e5344901d6c00245357", "url": "https://github.com/dhis2/dhis2-core/commit/d61c3eda0adeaf8b6c288e5344901d6c00245357", "message": "Update test", "committedDate": "2020-12-15T16:15:30Z", "type": "commit"}, {"oid": "f8464fdf51baaeac8ca5b8ea30d3ec76ec65f748", "url": "https://github.com/dhis2/dhis2-core/commit/f8464fdf51baaeac8ca5b8ea30d3ec76ec65f748", "message": "Add javadoc", "committedDate": "2020-12-15T19:17:48Z", "type": "commit"}, {"oid": "80864a074e304d4ab9e2f8537105521b1acd111e", "url": "https://github.com/dhis2/dhis2-core/commit/80864a074e304d4ab9e2f8537105521b1acd111e", "message": "Update method name", "committedDate": "2020-12-15T19:21:43Z", "type": "commit"}, {"oid": "ed10677b1aaf9e2d342e345cf9ea3219b5217ef6", "url": "https://github.com/dhis2/dhis2-core/commit/ed10677b1aaf9e2d342e345cf9ea3219b5217ef6", "message": "Rename method", "committedDate": "2020-12-15T19:24:11Z", "type": "commit"}, {"oid": "955a7b18f5a4ac259bed1b7b5def6178d0e53a20", "url": "https://github.com/dhis2/dhis2-core/commit/955a7b18f5a4ac259bed1b7b5def6178d0e53a20", "message": "Update test", "committedDate": "2020-12-15T19:26:31Z", "type": "commit"}, {"oid": "f421d597a19abf926cf25a2759db7200fa88a5c1", "url": "https://github.com/dhis2/dhis2-core/commit/f421d597a19abf926cf25a2759db7200fa88a5c1", "message": "Update test", "committedDate": "2020-12-15T19:27:09Z", "type": "commit"}, {"oid": "d28a89a8d391f113ce55592ba94f7d8e34fd07f4", "url": "https://github.com/dhis2/dhis2-core/commit/d28a89a8d391f113ce55592ba94f7d8e34fd07f4", "message": "Update test", "committedDate": "2020-12-15T19:29:11Z", "type": "commit"}, {"oid": "8c29150191486578dc714fcb071793aaadf793ab", "url": "https://github.com/dhis2/dhis2-core/commit/8c29150191486578dc714fcb071793aaadf793ab", "message": "Update test", "committedDate": "2020-12-15T19:31:17Z", "type": "commit"}, {"oid": "fddee44d0b55a76e000aa9aa5298b0a387ebb56b", "url": "https://github.com/dhis2/dhis2-core/commit/fddee44d0b55a76e000aa9aa5298b0a387ebb56b", "message": "Update test", "committedDate": "2020-12-15T19:31:51Z", "type": "commit"}, {"oid": "b2f1cdd051d1162d6b35ac93e5bfa5ae65368694", "url": "https://github.com/dhis2/dhis2-core/commit/b2f1cdd051d1162d6b35ac93e5bfa5ae65368694", "message": "Update test", "committedDate": "2020-12-15T21:22:27Z", "type": "commit"}, {"oid": "1c570a186aa34eb2e06d4999df5c3f7c2e6c017c", "url": "https://github.com/dhis2/dhis2-core/commit/1c570a186aa34eb2e06d4999df5c3f7c2e6c017c", "message": "Add period handling", "committedDate": "2020-12-16T06:10:04Z", "type": "commit"}, {"oid": "1d2899660545e107b9f3dde677738f1700db4cfb", "url": "https://github.com/dhis2/dhis2-core/commit/1d2899660545e107b9f3dde677738f1700db4cfb", "message": "Update SQL", "committedDate": "2020-12-16T06:20:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA1NjA2OA==", "url": "https://github.com/dhis2/dhis2-core/pull/6880#discussion_r544056068", "bodyText": "mix of Integer and int ?", "author": "netroms", "createdAt": "2020-12-16T07:07:58Z", "path": "dhis-2/dhis-services/dhis-service-validation/src/main/java/org/hisp/dhis/outlierdetection/OutlierDetectionMetadata.java", "diffHunk": "@@ -0,0 +1,57 @@\n+package org.hisp.dhis.outlierdetection;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+import lombok.Data;\n+\n+/**\n+ * Metadata for an outlier detection response.\n+ *\n+ * @author Lars Helge Overland\n+ */\n+@Data\n+public class OutlierDetectionMetadata\n+{\n+    @JsonProperty\n+    private OutlierDetectionAlgorithm outlierAlgorithm;\n+\n+    @JsonProperty\n+    private double threshold;\n+\n+    @JsonProperty\n+    private Order orderBy;\n+\n+    @JsonProperty\n+    private int maxResults;", "originalCommit": "1d2899660545e107b9f3dde677738f1700db4cfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA4NTU5NQ==", "url": "https://github.com/dhis2/dhis2-core/pull/6880#discussion_r544085595", "bodyText": "Good spot. Fixed.", "author": "larshelge", "createdAt": "2020-12-16T07:57:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA1NjA2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA1NzY5Mg==", "url": "https://github.com/dhis2/dhis2-core/pull/6880#discussion_r544057692", "bodyText": "Better to use Lombok builder?", "author": "netroms", "createdAt": "2020-12-16T07:09:48Z", "path": "dhis-2/dhis-services/dhis-service-validation/src/main/java/org/hisp/dhis/outlierdetection/OutlierDetectionRequest.java", "diffHunk": "@@ -0,0 +1,143 @@\n+package org.hisp.dhis.outlierdetection;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import java.util.ArrayList;\n+import java.util.Date;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.hisp.dhis.dataelement.DataElement;\n+import org.hisp.dhis.organisationunit.OrganisationUnit;\n+import com.google.common.base.Preconditions;\n+\n+import lombok.Getter;\n+\n+/**\n+ * Encapsulation of an outlier detection request.\n+ *\n+ * @author Lars Helge Overland\n+ */\n+@Getter\n+public class OutlierDetectionRequest\n+{\n+    private List<DataElement> dataElements = new ArrayList<>();\n+\n+    private Date startDate;\n+\n+    private Date endDate;\n+\n+    private List<OrganisationUnit> orgUnits = new ArrayList<>();\n+\n+    private OrgUnitSelection orgUnitSelection;\n+\n+    private OutlierDetectionAlgorithm outlierAlgorithm = OutlierDetectionAlgorithm.Z_SCORE;\n+\n+    private double threshold;\n+\n+    private Order orderBy;\n+\n+    private int maxResults;\n+\n+    public List<Long> getDataElementIds()\n+    {\n+        return dataElements.stream()\n+            .map( DataElement::getId )\n+            .collect( Collectors.toList() );\n+    }\n+\n+    private OutlierDetectionRequest()\n+    {\n+    }\n+\n+    public static class Builder", "originalCommit": "1d2899660545e107b9f3dde677738f1700db4cfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA4NjAxMQ==", "url": "https://github.com/dhis2/dhis2-core/pull/6880#discussion_r544086011", "bodyText": "Yep considered that, possibly better, but would want a bit more control over the builder for null checks, special start + end date method, etc.", "author": "larshelge", "createdAt": "2020-12-16T07:58:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA1NzY5Mg=="}], "type": "inlineReview"}, {"oid": "6d5464672f103cac587acbbd7aae6dbac5a4444d", "url": "https://github.com/dhis2/dhis2-core/commit/6d5464672f103cac587acbbd7aae6dbac5a4444d", "message": "Remove numeric check", "committedDate": "2020-12-16T07:55:16Z", "type": "commit"}, {"oid": "59ba9bb5220c9535533af6f6a9ae7678d6ee3a1a", "url": "https://github.com/dhis2/dhis2-core/commit/59ba9bb5220c9535533af6f6a9ae7678d6ee3a1a", "message": "Use object props", "committedDate": "2020-12-16T07:57:20Z", "type": "commit"}, {"oid": "85263236422aa1a772a2919a76d7d28954d7e26d", "url": "https://github.com/dhis2/dhis2-core/commit/85263236422aa1a772a2919a76d7d28954d7e26d", "message": "Code style", "committedDate": "2020-12-16T07:59:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDEwNjc4MQ==", "url": "https://github.com/dhis2/dhis2-core/pull/6880#discussion_r544106781", "bodyText": "Maybe better to use a list here? List<ErrorMessage> in case there are multiple violations", "author": "mortenoh", "createdAt": "2020-12-16T08:34:08Z", "path": "dhis-2/dhis-services/dhis-service-validation/src/main/java/org/hisp/dhis/outlierdetection/OutlierDetectionService.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package org.hisp.dhis.outlierdetection;\n+\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+import org.hisp.dhis.common.IllegalQueryException;\n+import org.hisp.dhis.feedback.ErrorMessage;\n+\n+/**\n+ * Outlier detection service.\n+ *\n+ * @author Lars Helge Overland\n+ */\n+public interface OutlierDetectionService\n+{\n+    /**\n+     * Validates the given request.\n+     *\n+     * @param request the {@link OutlierDetectionRequest}.\n+     * @throws IllegalQueryException if request is invalid.\n+     */\n+    void validate( OutlierDetectionRequest request )\n+        throws IllegalQueryException;\n+\n+    /**\n+     * Validates the given request.\n+     *\n+     * @param request the {@link OutlierDetectionRequest}.\n+     * @return an {@link ErrorMessage} if request is invalid, or null if valid.\n+     */\n+    ErrorMessage validateForErrorMessage( OutlierDetectionRequest request );", "originalCommit": "85263236422aa1a772a2919a76d7d28954d7e26d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE1MjE2NQ==", "url": "https://github.com/dhis2/dhis2-core/pull/6880#discussion_r544152165", "bodyText": "The idea is that the API returns the first error message in a web message (standard error format). This is consistent with analytics and other APIs. Then the client must retry until there are no errors. I think we just stick with this pattern.", "author": "larshelge", "createdAt": "2020-12-16T09:41:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDEwNjc4MQ=="}], "type": "inlineReview"}]}