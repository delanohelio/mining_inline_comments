{"pr_number": 6736, "pr_title": "fix: add validation for tei type on relationship constraint", "pr_createdAt": "2020-11-20T14:15:19Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/6736", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzcyNDM3OQ==", "url": "https://github.com/dhis2/dhis2-core/pull/6736#discussion_r527724379", "bodyText": "is this .map(Optional::of) needed?", "author": "enricocolasante", "createdAt": "2020-11-20T14:22:50Z", "path": "dhis-2/dhis-services/dhis-service-tracker/src/main/java/org/hisp/dhis/tracker/validation/hooks/RelationshipsValidationHook.java", "diffHunk": "@@ -189,6 +209,26 @@ else if ( constraint.getRelationshipEntity().equals( PROGRAM_STAGE_INSTANCE ) )\n         return result;\n     }\n \n+    private Optional<String> getRelationshipTypeUidFromTrackedEntity( TrackerImportValidationContext ctx, String uid )\n+    {\n+        return getTrackedEntityTypeFromTrackedEntity( ctx, uid ).map( Optional::of )", "originalCommit": "39f5f7224a982076973f4dee1458d72416df9bc0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM4MDM5Mw==", "url": "https://github.com/dhis2/dhis2-core/pull/6736#discussion_r529380393", "bodyText": "Yes, without it the code would not compile. See image", "author": "luciano-fiandesio", "createdAt": "2020-11-24T09:56:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzcyNDM3OQ=="}], "type": "inlineReview"}, {"oid": "a38b89cac4add18acebbb61ee5eaab59d8bbcdf6", "url": "https://github.com/dhis2/dhis2-core/commit/a38b89cac4add18acebbb61ee5eaab59d8bbcdf6", "message": "fix: add validation for tei type on relationship constraint", "committedDate": "2020-11-24T09:38:50Z", "type": "commit"}, {"oid": "3ae6144e99ce49c93df4ac094319b949b42e12b8", "url": "https://github.com/dhis2/dhis2-core/commit/3ae6144e99ce49c93df4ac094319b949b42e12b8", "message": "chore: fix test after conflict resolution", "committedDate": "2020-11-24T09:50:50Z", "type": "commit"}, {"oid": "3ae6144e99ce49c93df4ac094319b949b42e12b8", "url": "https://github.com/dhis2/dhis2-core/commit/3ae6144e99ce49c93df4ac094319b949b42e12b8", "message": "chore: fix test after conflict resolution", "committedDate": "2020-11-24T09:50:50Z", "type": "forcePushed"}]}