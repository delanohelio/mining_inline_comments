{"pr_number": 4721, "pr_title": "fix: Remove continuous execution of job configurations", "pr_createdAt": "2020-01-16T10:34:55Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/4721", "timeline": [{"oid": "8c49fe7d1af832d0d9bfdbe37eb007d17297b46e", "url": "https://github.com/dhis2/dhis2-core/commit/8c49fe7d1af832d0d9bfdbe37eb007d17297b46e", "message": "Constructor cleanup", "committedDate": "2020-01-16T09:56:33Z", "type": "commit"}, {"oid": "6e8c8f9d10462f23a03a798cc0e864803abffdf0", "url": "https://github.com/dhis2/dhis2-core/commit/6e8c8f9d10462f23a03a798cc0e864803abffdf0", "message": "Cleanup", "committedDate": "2020-01-16T09:58:32Z", "type": "commit"}, {"oid": "1398daa6d861ddae5e5a74c9602c1852212f7dc3", "url": "https://github.com/dhis2/dhis2-core/commit/1398daa6d861ddae5e5a74c9602c1852212f7dc3", "message": "Minor", "committedDate": "2020-01-16T09:59:27Z", "type": "commit"}, {"oid": "3f5277d47e94db8c4e642217353b447527b4e8fe", "url": "https://github.com/dhis2/dhis2-core/commit/3f5277d47e94db8c4e642217353b447527b4e8fe", "message": "Test", "committedDate": "2020-01-16T10:04:13Z", "type": "commit"}, {"oid": "93f738c135fa483d27b7c523dc0f76b6ae464117", "url": "https://github.com/dhis2/dhis2-core/commit/93f738c135fa483d27b7c523dc0f76b6ae464117", "message": "Cleanup", "committedDate": "2020-01-16T10:05:18Z", "type": "commit"}, {"oid": "4b350298b73bcdca85aa7bbcf0eb7c35ea02d944", "url": "https://github.com/dhis2/dhis2-core/commit/4b350298b73bcdca85aa7bbcf0eb7c35ea02d944", "message": "Cleanup", "committedDate": "2020-01-16T10:06:45Z", "type": "commit"}, {"oid": "55f5b5bec6b9dbd36556e6ef781ffc870201aa52", "url": "https://github.com/dhis2/dhis2-core/commit/55f5b5bec6b9dbd36556e6ef781ffc870201aa52", "message": "Minor", "committedDate": "2020-01-16T10:08:03Z", "type": "commit"}, {"oid": "510450fd044bb6d1e677d9fde1562c9e7748f6d2", "url": "https://github.com/dhis2/dhis2-core/commit/510450fd044bb6d1e677d9fde1562c9e7748f6d2", "message": "Merge branch 'master' into dhis2-lars", "committedDate": "2020-01-16T10:18:43Z", "type": "commit"}, {"oid": "8c820a1b20a0b9df577c530f1c135bfdf9b5bf11", "url": "https://github.com/dhis2/dhis2-core/commit/8c820a1b20a0b9df577c530f1c135bfdf9b5bf11", "message": "Remove continuous exection", "committedDate": "2020-01-16T10:33:53Z", "type": "commit"}, {"oid": "830bdbca02af37132b7991e70df8ed935abe6661", "url": "https://github.com/dhis2/dhis2-core/commit/830bdbca02af37132b7991e70df8ed935abe6661", "message": "Minor", "committedDate": "2020-01-16T10:39:17Z", "type": "commit"}, {"oid": "37e85bf7b21be6b4386ba7b11c9223aaa28d070f", "url": "https://github.com/dhis2/dhis2-core/commit/37e85bf7b21be6b4386ba7b11c9223aaa28d070f", "message": "Minor", "committedDate": "2020-01-16T10:54:17Z", "type": "commit"}, {"oid": "cbd10d6e479b8bd8ec3e9edf652d434cdce0cea9", "url": "https://github.com/dhis2/dhis2-core/commit/cbd10d6e479b8bd8ec3e9edf652d434cdce0cea9", "message": "Tests", "committedDate": "2020-01-16T12:20:05Z", "type": "commit"}, {"oid": "ccfbc686925966033ff05d83c20233011b7f74b0", "url": "https://github.com/dhis2/dhis2-core/commit/ccfbc686925966033ff05d83c20233011b7f74b0", "message": "Minor", "committedDate": "2020-01-16T12:22:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQwMTEzNw==", "url": "https://github.com/dhis2/dhis2-core/pull/4721#discussion_r367401137", "bodyText": "This seems to be used only by tests, I'd move it inside the tests or make a small Cron util class with more cases, like HOURLY, EVERY_MINUTE, etc.", "author": "luciano-fiandesio", "createdAt": "2020-01-16T12:54:38Z", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/scheduling/SchedulingManager.java", "diffHunk": "@@ -52,6 +52,8 @@\n  */\n public interface SchedulingManager\n {\n+    String CRON_HOURLY = \"0 0 * ? * *\";", "originalCommit": "ccfbc686925966033ff05d83c20233011b7f74b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ2ODczNg==", "url": "https://github.com/dhis2/dhis2-core/pull/4721#discussion_r367468736", "bodyText": "Alright, fixed.", "author": "larshelge", "createdAt": "2020-01-16T15:05:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQwMTEzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQwNjQxMQ==", "url": "https://github.com/dhis2/dhis2-core/pull/4721#discussion_r367406411", "bodyText": "This assumes that only one type of jobtype can run at the same time: is it always the case?", "author": "luciano-fiandesio", "createdAt": "2020-01-16T13:07:20Z", "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/scheduling/DefaultSchedulingManager.java", "diffHunk": "@@ -134,9 +131,8 @@ public boolean isJobConfigurationRunning( JobConfiguration jobConfiguration )\n             return false;\n         }\n \n-        return !jobConfiguration.isContinuousExecution() &&\n-            runningJobConfigurations.stream().anyMatch(\n-                jc -> jc.getJobType().equals( jobConfiguration.getJobType() ) && !jc.isContinuousExecution() );\n+        return runningJobConfigurations.stream().anyMatch(\n+            jc -> jc.getJobType().equals( jobConfiguration.getJobType() ) );", "originalCommit": "ccfbc686925966033ff05d83c20233011b7f74b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ2Nzk4Mg==", "url": "https://github.com/dhis2/dhis2-core/pull/4721#discussion_r367467982", "bodyText": "Yes that's the case and it is the current behavior, I wanted to keep existing behavior as close as possible in this particular PR.", "author": "larshelge", "createdAt": "2020-01-16T15:03:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQwNjQxMQ=="}], "type": "inlineReview"}, {"oid": "6b95d0b3ed024976e721b8aed01a384c4b50a59d", "url": "https://github.com/dhis2/dhis2-core/commit/6b95d0b3ed024976e721b8aed01a384c4b50a59d", "message": "Minor", "committedDate": "2020-01-16T15:06:04Z", "type": "commit"}]}