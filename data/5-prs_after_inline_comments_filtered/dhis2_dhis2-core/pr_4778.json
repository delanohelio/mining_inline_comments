{"pr_number": 4778, "pr_title": "fix: Add Visualization support to Dashboard search and removing .hbm files [DHIS2-7946]", "pr_createdAt": "2020-01-29T13:41:20Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/4778", "timeline": [{"oid": "c712c094a7f079bbd3ef997c4d45355d87ee72cb", "url": "https://github.com/dhis2/dhis2-core/commit/c712c094a7f079bbd3ef997c4d45355d87ee72cb", "message": "feat: Merge Chart + ReportTable [DHIS2-7946]\n\nCreate the  new Visualization object to unify Chart and ReportTable. This is the initial commit including the CRUD and small changes in Interpretation.", "committedDate": "2019-11-27T18:50:59Z", "type": "commit"}, {"oid": "828d1e65c00e147cf399a528bf364669885a5917", "url": "https://github.com/dhis2/dhis2-core/commit/828d1e65c00e147cf399a528bf364669885a5917", "message": "feat: (2.34) Adding Flyway for Visualization tables [DHIS2-7946]\n\nAdding the Flyway scripts for the new Visualization tables.", "committedDate": "2019-11-29T10:47:55Z", "type": "commit"}, {"oid": "6b54fbba10f3d625e7fbd4f0f822871118822248", "url": "https://github.com/dhis2/dhis2-core/commit/6b54fbba10f3d625e7fbd4f0f822871118822248", "message": "feat: (2.34) Replacing ReportTable references [DHIS2-7946]\n\nReplacing all ReportTable references by the new Visualization object.", "committedDate": "2019-11-29T12:32:15Z", "type": "commit"}, {"oid": "883f6e84546cd0578ecf90334b68b95d90a3a6fb", "url": "https://github.com/dhis2/dhis2-core/commit/883f6e84546cd0578ecf90334b68b95d90a3a6fb", "message": "feat: (2.34) Add Visualization to Dashboard [DHIS2-7946]\n\nThis is an initial commit to support the Visualization in the Dashboard.", "committedDate": "2019-11-29T14:55:17Z", "type": "commit"}, {"oid": "1afd5b5a1a58ec137dbc28388bed3e6fb001a387", "url": "https://github.com/dhis2/dhis2-core/commit/1afd5b5a1a58ec137dbc28388bed3e6fb001a387", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2019-11-29T14:55:23Z", "type": "commit"}, {"oid": "a89231d23e2cf6d84b9641690da87dd5789e5187", "url": "https://github.com/dhis2/dhis2-core/commit/a89231d23e2cf6d84b9641690da87dd5789e5187", "message": "feat: Draft Dashboard support for Visualization [DHIS2-7946]", "committedDate": "2019-12-01T17:08:23Z", "type": "commit"}, {"oid": "d6ebd0d6c73236799fb81fbc4558c6a058b7e782", "url": "https://github.com/dhis2/dhis2-core/commit/d6ebd0d6c73236799fb81fbc4558c6a058b7e782", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2019-12-01T17:11:30Z", "type": "commit"}, {"oid": "877bfc63adb67436d2ffb4f02cf86d087d8a9ab5", "url": "https://github.com/dhis2/dhis2-core/commit/877bfc63adb67436d2ffb4f02cf86d087d8a9ab5", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2019-12-02T09:19:13Z", "type": "commit"}, {"oid": "06b73f46d73ba154dea0ae365e004f1d253c9d7a", "url": "https://github.com/dhis2/dhis2-core/commit/06b73f46d73ba154dea0ae365e004f1d253c9d7a", "message": "feat: Adding migration scripts + fixes [DHIS2-7946]\n\nAdding initial versions of the migration scripts along with some fixes for the new tables.", "committedDate": "2019-12-02T15:34:57Z", "type": "commit"}, {"oid": "d9f92240796c83c1289823009d0b516f437352ae", "url": "https://github.com/dhis2/dhis2-core/commit/d9f92240796c83c1289823009d0b516f437352ae", "message": "feat: Fixing Hibernate mappings and model [DHIS2-7946]\n\nUnifying the cumulative column and fixing the reporting params.", "committedDate": "2019-12-02T15:36:50Z", "type": "commit"}, {"oid": "fdef9e2fd25bdc654b68e8bcb400467fea10b481", "url": "https://github.com/dhis2/dhis2-core/commit/fdef9e2fd25bdc654b68e8bcb400467fea10b481", "message": "feat: Fixing migration script [DHIS2-7946]\n\nFixing invalid column name when updating the dashboarditem table.", "committedDate": "2019-12-02T19:34:43Z", "type": "commit"}, {"oid": "43b8f2f8e9694b0fd1566e0d90fbc9195a1d6057", "url": "https://github.com/dhis2/dhis2-core/commit/43b8f2f8e9694b0fd1566e0d90fbc9195a1d6057", "message": "feat: Reverting Chart/ReportTable code [DHIS2-7946]\n\nAdding back some code to minimize impacts in ReportTable/Chart.", "committedDate": "2019-12-03T08:04:22Z", "type": "commit"}, {"oid": "a422f8d834fb96996a0d4fb52ed7482a0a62fbd3", "url": "https://github.com/dhis2/dhis2-core/commit/a422f8d834fb96996a0d4fb52ed7482a0a62fbd3", "message": "feat: Migration for Report table [DHIS2-7946]\n\nAnother Flyway script to pupulate the Report table with the correct Visualization ids.", "committedDate": "2019-12-03T08:17:54Z", "type": "commit"}, {"oid": "eb2fbc722edfba1a3bc7d6dcdab0776f0df2a0d3", "url": "https://github.com/dhis2/dhis2-core/commit/eb2fbc722edfba1a3bc7d6dcdab0776f0df2a0d3", "message": "feat: Improving and unifying Flyway scripts [DHIS2-7946]\n\nUnifying the data migration scripts into one and adding default values for null boolean columns and publicaccess.", "committedDate": "2019-12-03T11:06:03Z", "type": "commit"}, {"oid": "26b524c4a00db3dfbe12a12c7662528d5fde91fb", "url": "https://github.com/dhis2/dhis2-core/commit/26b524c4a00db3dfbe12a12c7662528d5fde91fb", "message": "feat: Set default values for numeric columns [DHIS2-7946]\n\nAdding UPDATE statements to set default values for primitive numeric columns.", "committedDate": "2019-12-03T14:51:17Z", "type": "commit"}, {"oid": "2b2df6b67e39a885f7821e79a8f3e3e558d4adfe", "url": "https://github.com/dhis2/dhis2-core/commit/2b2df6b67e39a885f7821e79a8f3e3e558d4adfe", "message": "feat: Adding support for custom Axes [DHIS2-7946]\n\nAdding support for custom Axes into Visualization. This is the old Series from Chart.", "committedDate": "2019-12-03T16:08:57Z", "type": "commit"}, {"oid": "c19cb187cbc047ab4cc99c9d5527e73b0424ef94", "url": "https://github.com/dhis2/dhis2-core/commit/c19cb187cbc047ab4cc99c9d5527e73b0424ef94", "message": "feat: Adding migreation for series items [DHIS2-7946]\n\nIncluding the migration for series items into axis table.", "committedDate": "2019-12-04T11:10:02Z", "type": "commit"}, {"oid": "3788fc90b1f6effb7fc46d8383645ad13ff258ab", "url": "https://github.com/dhis2/dhis2-core/commit/3788fc90b1f6effb7fc46d8383645ad13ff258ab", "message": "feat: Emptying Visualization in Hibernate dbms [DHIS2-7946]\n\nAdding the new Visualization tables into the HibernateDbmsManager cleaning routine.", "committedDate": "2019-12-04T12:40:14Z", "type": "commit"}, {"oid": "a655ce77cb452b23aad013335b019f0d65ac1759", "url": "https://github.com/dhis2/dhis2-core/commit/a655ce77cb452b23aad013335b019f0d65ac1759", "message": "feat: Remove public prefixes from Flyway scripts [DHIS2-7946]\n\nSmall change to remove the DB public schema from Flyway scripts.", "committedDate": "2019-12-04T12:51:36Z", "type": "commit"}, {"oid": "ee38905c82fe991cfe04ec65aa75f949daa8599e", "url": "https://github.com/dhis2/dhis2-core/commit/ee38905c82fe991cfe04ec65aa75f949daa8599e", "message": "feat: JFreeChart not supported to Visualization [DHIS2-7946]\n\nAdding a comment to make explicit that Visualization does not support image/file generation.", "committedDate": "2019-12-04T13:58:30Z", "type": "commit"}, {"oid": "841d6921525e02af107ae7e6c2bc1db92b53159d", "url": "https://github.com/dhis2/dhis2-core/commit/841d6921525e02af107ae7e6c2bc1db92b53159d", "message": "feat: Improving axis naming [DHIS2-7946]\n\nRenaming axis to optionalAxis as this is a very specific option.", "committedDate": "2019-12-04T14:58:28Z", "type": "commit"}, {"oid": "d36d1823857773a9fe5d7f3698735d66f1de343a", "url": "https://github.com/dhis2/dhis2-core/commit/d36d1823857773a9fe5d7f3698735d66f1de343a", "message": "feat: Support Visualization in DataStatistics [DHIS2-7946]\n\nAdding Visualization into the DataStatistics flow along with Flyway migrations.", "committedDate": "2019-12-04T15:51:33Z", "type": "commit"}, {"oid": "ecdecbf71ed82819cdfa9ffeecd5c81a791e3590", "url": "https://github.com/dhis2/dhis2-core/commit/ecdecbf71ed82819cdfa9ffeecd5c81a791e3590", "message": "feat: Increasing endpoint version [DHIS2-7946]\n\nIncreasing the endpoint version to v34. Also reverting a code change mistake.", "committedDate": "2019-12-04T16:10:00Z", "type": "commit"}, {"oid": "8ea84060f6e519daa6012894fa26272b5d245d9d", "url": "https://github.com/dhis2/dhis2-core/commit/8ea84060f6e519daa6012894fa26272b5d245d9d", "message": "feat: Removing ownership from migrations [DHIS2-7946]\n\nFixing creation of tables. Removing ownership assignment.", "committedDate": "2019-12-04T17:48:07Z", "type": "commit"}, {"oid": "e4d1f6b284d92ebcd2a86aa4f4bd26025ac82c20", "url": "https://github.com/dhis2/dhis2-core/commit/e4d1f6b284d92ebcd2a86aa4f4bd26025ac82c20", "message": "feat: Removing ownership from migrations [DHIS2-7946]\n\nFixing creation of tables. Removing ownership assignment.", "committedDate": "2019-12-04T17:52:13Z", "type": "commit"}, {"oid": "8b406ec976ff9c3affd6abd9973e95c1313bb20f", "url": "https://github.com/dhis2/dhis2-core/commit/8b406ec976ff9c3affd6abd9973e95c1313bb20f", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2019-12-04T21:35:26Z", "type": "commit"}, {"oid": "3ae8c21151934f412ff910e8fd6ef500d7af4b7e", "url": "https://github.com/dhis2/dhis2-core/commit/3ae8c21151934f412ff910e8fd6ef500d7af4b7e", "message": "feat: Removing non-used column [DHIS2-7946]\n\nRemoving the categorycomboid column from the migration as it's not being mapped anywhere.", "committedDate": "2019-12-04T22:42:58Z", "type": "commit"}, {"oid": "54974a572033b66ddb9a8bc9530d74d9cc792223", "url": "https://github.com/dhis2/dhis2-core/commit/54974a572033b66ddb9a8bc9530d74d9cc792223", "message": "feat: Removing others unused DB columns [DHIS2-7946]\n\nColumns that are not present in the integration tests DB are removed.", "committedDate": "2019-12-05T10:39:34Z", "type": "commit"}, {"oid": "e649f786a6075b18f34ad31cd29fbcdb6a47fdb9", "url": "https://github.com/dhis2/dhis2-core/commit/e649f786a6075b18f34ad31cd29fbcdb6a47fdb9", "message": "feat: Adding fix for NPE [DHIS2-7946]\n\nInitializaing the Axes list and avoid a NPE later on the flow.", "committedDate": "2019-12-05T10:59:03Z", "type": "commit"}, {"oid": "3b3a90135fd6b83e8148aaea956b53d13b1ca9ae", "url": "https://github.com/dhis2/dhis2-core/commit/3b3a90135fd6b83e8148aaea956b53d13b1ca9ae", "message": "feat: Adding code review improvements [DHIS2-7946]\n\nAddressing the initial code review changes raised by Luciano (2.34).", "committedDate": "2019-12-09T14:36:22Z", "type": "commit"}, {"oid": "3b6aac2e2cc74cf92f67c22198d99d97f4750259", "url": "https://github.com/dhis2/dhis2-core/commit/3b6aac2e2cc74cf92f67c22198d99d97f4750259", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2019-12-10T14:10:13Z", "type": "commit"}, {"oid": "4367894360f9dde4db5d75691fe5771aa9810bc2", "url": "https://github.com/dhis2/dhis2-core/commit/4367894360f9dde4db5d75691fe5771aa9810bc2", "message": "(2.34) Upgrading migration versions [DHIS2-7946]\n\nUpdating the versions as other PRs have already got the previous versions.", "committedDate": "2019-12-10T14:21:45Z", "type": "commit"}, {"oid": "d06f080fbad5c0ecca8d812d3f5748c6b85b7bc6", "url": "https://github.com/dhis2/dhis2-core/commit/d06f080fbad5c0ecca8d812d3f5748c6b85b7bc6", "message": "feat: (2.34) Code review typo fix [DHIS2-7946]\n\nTiny fix for a typo in the Javadoc.", "committedDate": "2019-12-11T10:54:14Z", "type": "commit"}, {"oid": "d3e30fe0149e0643c58be7f1fb418ba9649518d9", "url": "https://github.com/dhis2/dhis2-core/commit/d3e30fe0149e0643c58be7f1fb418ba9649518d9", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2019-12-13T08:27:34Z", "type": "commit"}, {"oid": "87140b8cd8cf9c3952e482e04459e39a91c6f237", "url": "https://github.com/dhis2/dhis2-core/commit/87140b8cd8cf9c3952e482e04459e39a91c6f237", "message": "feat: (2.34) Fixing Report references to Visualization [DHIS2-7946]\n\nSwitching some Report references to the new ReportingParams object related to Visualization.", "committedDate": "2019-12-13T08:56:19Z", "type": "commit"}, {"oid": "1b6700ff077b89fc6feaef4abdf7eb70630b383b", "url": "https://github.com/dhis2/dhis2-core/commit/1b6700ff077b89fc6feaef4abdf7eb70630b383b", "message": "feat: (2.34) Fixing failing tests [DHIS2-7946]\n\nReverting a few changes to keep Report compatibility and fix failing tests.", "committedDate": "2019-12-13T09:55:17Z", "type": "commit"}, {"oid": "f2637afbaf07d8af7c76796e6dc292e582739035", "url": "https://github.com/dhis2/dhis2-core/commit/f2637afbaf07d8af7c76796e6dc292e582739035", "message": "feat: Unit test for Visualization/Grid generation [DHIS2-7946]", "committedDate": "2019-12-13T15:01:09Z", "type": "commit"}, {"oid": "550a82a37a026a653ed0cd7889c3918b6d2a78b6", "url": "https://github.com/dhis2/dhis2-core/commit/550a82a37a026a653ed0cd7889c3918b6d2a78b6", "message": "feat: (2.34) Code clean up in the Controller [DHIS2-7946]\n\nJust a small code clean up in the VisualizationController.", "committedDate": "2019-12-16T10:57:35Z", "type": "commit"}, {"oid": "14dc08c6e50f49b5325bfdcc5151f5245141c168", "url": "https://github.com/dhis2/dhis2-core/commit/14dc08c6e50f49b5325bfdcc5151f5245141c168", "message": "Code style", "committedDate": "2019-12-18T08:57:18Z", "type": "commit"}, {"oid": "09a9076b43ecbc38c7bfa238405b2701f86411c4", "url": "https://github.com/dhis2/dhis2-core/commit/09a9076b43ecbc38c7bfa238405b2701f86411c4", "message": "Code style", "committedDate": "2019-12-18T09:02:54Z", "type": "commit"}, {"oid": "f2aff5626d21837910ebc709a6b562aea78c9621", "url": "https://github.com/dhis2/dhis2-core/commit/f2aff5626d21837910ebc709a6b562aea78c9621", "message": "Code style", "committedDate": "2019-12-18T09:08:14Z", "type": "commit"}, {"oid": "17cc68670d083d7457608230f9713498bc84577d", "url": "https://github.com/dhis2/dhis2-core/commit/17cc68670d083d7457608230f9713498bc84577d", "message": "Code style", "committedDate": "2019-12-18T09:09:41Z", "type": "commit"}, {"oid": "a4acc61ed525eb6d38f980862eb37d4ac9bd694b", "url": "https://github.com/dhis2/dhis2-core/commit/a4acc61ed525eb6d38f980862eb37d4ac9bd694b", "message": "Merge branch 'DHIS2-7946' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2019-12-18T10:17:27Z", "type": "commit"}, {"oid": "a943f8fc6558839d6fcd1d889c7011eeb52f7141", "url": "https://github.com/dhis2/dhis2-core/commit/a943f8fc6558839d6fcd1d889c7011eeb52f7141", "message": "feat: Reverting null checkings [DHIS2-7946]\n\nRemoving additional  null, added previously as part of theis task.", "committedDate": "2019-12-18T14:34:29Z", "type": "commit"}, {"oid": "375c969de8d5969bf230ceecfe0a6cba9f8e91e7", "url": "https://github.com/dhis2/dhis2-core/commit/375c969de8d5969bf230ceecfe0a6cba9f8e91e7", "message": "(feat) Merging master into [DHIS2-7946]", "committedDate": "2019-12-19T13:52:01Z", "type": "commit"}, {"oid": "431f41cc2071dc159986cf18b9af38179783d060", "url": "https://github.com/dhis2/dhis2-core/commit/431f41cc2071dc159986cf18b9af38179783d060", "message": "Merge with master", "committedDate": "2020-01-02T12:35:07Z", "type": "commit"}, {"oid": "eaf3bd39205b265033b77074d4cc0ca9497251ce", "url": "https://github.com/dhis2/dhis2-core/commit/eaf3bd39205b265033b77074d4cc0ca9497251ce", "message": "Merge with master", "committedDate": "2020-01-02T12:35:55Z", "type": "commit"}, {"oid": "8ed5bc6217485583a986dbc56f2eb4ba0b886869", "url": "https://github.com/dhis2/dhis2-core/commit/8ed5bc6217485583a986dbc56f2eb4ba0b886869", "message": "feat: Removing unnecessary SQL statement and TODO comment [DHIS2-7946]", "committedDate": "2020-01-02T12:54:26Z", "type": "commit"}, {"oid": "e353daa2d6c355e3497257aadebfeb3d727f458a", "url": "https://github.com/dhis2/dhis2-core/commit/e353daa2d6c355e3497257aadebfeb3d727f458a", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-03T07:57:51Z", "type": "commit"}, {"oid": "80ec432ff90785ac6eb7fb9fcdf20d3d87022dd8", "url": "https://github.com/dhis2/dhis2-core/commit/80ec432ff90785ac6eb7fb9fcdf20d3d87022dd8", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-03T11:22:26Z", "type": "commit"}, {"oid": "cf56e1f2830fb75b3368c2dd9e9258b9a5471766", "url": "https://github.com/dhis2/dhis2-core/commit/cf56e1f2830fb75b3368c2dd9e9258b9a5471766", "message": "feat: Upgrading Flyway script versions [DHIS2-7946]\n\nUpdating the versions so we avoid conflicts with other branches which are already using these versions.", "committedDate": "2020-01-03T11:29:58Z", "type": "commit"}, {"oid": "4d46a2c43c6c3f8b3d32bfa285bb07cabcfcc6f5", "url": "https://github.com/dhis2/dhis2-core/commit/4d46a2c43c6c3f8b3d32bfa285bb07cabcfcc6f5", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-08T06:44:28Z", "type": "commit"}, {"oid": "caa42c48f57b10cc6555c4b943d5a8d783b20780", "url": "https://github.com/dhis2/dhis2-core/commit/caa42c48f57b10cc6555c4b943d5a8d783b20780", "message": "feat: Updating schema desc. to support r/w access [DHIS2-7946]", "committedDate": "2020-01-08T06:45:39Z", "type": "commit"}, {"oid": "4d1b48cbcf35c45daa67dbef234f299635790ddb", "url": "https://github.com/dhis2/dhis2-core/commit/4d1b48cbcf35c45daa67dbef234f299635790ddb", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-10T11:37:05Z", "type": "commit"}, {"oid": "e8f603839450fd9991cda83267a077fc315339cb", "url": "https://github.com/dhis2/dhis2-core/commit/e8f603839450fd9991cda83267a077fc315339cb", "message": "feat: Adding Fa\u00e7ade to support ReportTable API [DHIS2-7946]", "committedDate": "2020-01-10T11:38:33Z", "type": "commit"}, {"oid": "dfa8fff5412fddcfbf3d8523a442c774d525e0c9", "url": "https://github.com/dhis2/dhis2-core/commit/dfa8fff5412fddcfbf3d8523a442c774d525e0c9", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-10T12:39:02Z", "type": "commit"}, {"oid": "f16a9c49dfca33300794e210e7ca7e4f141d8853", "url": "https://github.com/dhis2/dhis2-core/commit/f16a9c49dfca33300794e210e7ca7e4f141d8853", "message": "feat: Fixing Interpretation API [DHIS2-7946]\n\nAdding migration for Interpretation and small code improvements/fixes.", "committedDate": "2020-01-10T17:51:16Z", "type": "commit"}, {"oid": "c7e81551876065f466b94a0f1c7aff45b6cf3fb9", "url": "https://github.com/dhis2/dhis2-core/commit/c7e81551876065f466b94a0f1c7aff45b6cf3fb9", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-10T20:30:30Z", "type": "commit"}, {"oid": "0464d964bb24d67207b85e8546e8df97c860f5bf", "url": "https://github.com/dhis2/dhis2-core/commit/0464d964bb24d67207b85e8546e8df97c860f5bf", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-10T22:34:55Z", "type": "commit"}, {"oid": "9c5fa6542f18c8b8a72075faadfd4915d6738eb8", "url": "https://github.com/dhis2/dhis2-core/commit/9c5fa6542f18c8b8a72075faadfd4915d6738eb8", "message": "feat: Supporting the old Charts API [DHIS2-7946]", "committedDate": "2020-01-10T22:47:20Z", "type": "commit"}, {"oid": "ac748c903f3d76b0a5aa0ed17b06fc9ab671465b", "url": "https://github.com/dhis2/dhis2-core/commit/ac748c903f3d76b0a5aa0ed17b06fc9ab671465b", "message": "feat: Removing FKs from Intepretation table [DHIS2-7946]\n\nThe chart and reporttable FKs are no longer required and need to be dropped in favour of Visualization.", "committedDate": "2020-01-13T08:41:27Z", "type": "commit"}, {"oid": "6bb2b01235f0586833a45c3a80bffb6d7f6d3db8", "url": "https://github.com/dhis2/dhis2-core/commit/6bb2b01235f0586833a45c3a80bffb6d7f6d3db8", "message": "feat: Add IF EXISTS checking to FK removal [DHIS2-7946]", "committedDate": "2020-01-13T10:07:03Z", "type": "commit"}, {"oid": "4f92eecbbcc19c1f2d935f6847dd1cec029e1f63", "url": "https://github.com/dhis2/dhis2-core/commit/4f92eecbbcc19c1f2d935f6847dd1cec029e1f63", "message": "feat: Clean-up related to PIE/GAUGE data [DHIS2-7946]", "committedDate": "2020-01-13T11:04:50Z", "type": "commit"}, {"oid": "b0becbb50dc846127e62fc3317f064e53a565c82", "url": "https://github.com/dhis2/dhis2-core/commit/b0becbb50dc846127e62fc3317f064e53a565c82", "message": "feat: Make Interpretation backward compatible [DHIS2-7946]", "committedDate": "2020-01-13T12:53:22Z", "type": "commit"}, {"oid": "2ea565dc9d853eb0183964e774fe8e30e1eb37a3", "url": "https://github.com/dhis2/dhis2-core/commit/2ea565dc9d853eb0183964e774fe8e30e1eb37a3", "message": "feat: Adding support for old char/reportTable [DHIS2-7946]", "committedDate": "2020-01-16T12:36:16Z", "type": "commit"}, {"oid": "125435ac0b756a658c342861d572289d716282a8", "url": "https://github.com/dhis2/dhis2-core/commit/125435ac0b756a658c342861d572289d716282a8", "message": "feat: Adding support for old Chart and ReportTable [DHIS2-7946]\n\nThis will keep backward compatibility until the Visualization is fully migrated.", "committedDate": "2020-01-16T14:57:00Z", "type": "commit"}, {"oid": "1a4d87f90d835550d8b3efdb40ac5727ab02d30f", "url": "https://github.com/dhis2/dhis2-core/commit/1a4d87f90d835550d8b3efdb40ac5727ab02d30f", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-20T14:14:01Z", "type": "commit"}, {"oid": "a9a208108f0eb884839de38ba08ee79886c56ee3", "url": "https://github.com/dhis2/dhis2-core/commit/a9a208108f0eb884839de38ba08ee79886c56ee3", "message": "fix: Changing flyway script version to avoid conflict [DHIS2-7946]", "committedDate": "2020-01-20T14:22:47Z", "type": "commit"}, {"oid": "b80b91a727fc76c62223e426ea49bdd706630246", "url": "https://github.com/dhis2/dhis2-core/commit/b80b91a727fc76c62223e426ea49bdd706630246", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-21T09:09:51Z", "type": "commit"}, {"oid": "0a73b3671b577412bc0c92207ab47ecfe7e4853b", "url": "https://github.com/dhis2/dhis2-core/commit/0a73b3671b577412bc0c92207ab47ecfe7e4853b", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-01-21T13:11:49Z", "type": "commit"}, {"oid": "ee9e9c62d362f6c9a1be12dd32bbc471b797660a", "url": "https://github.com/dhis2/dhis2-core/commit/ee9e9c62d362f6c9a1be12dd32bbc471b797660a", "message": "fix: Add Visualization support to Dashboard search and removing .hbm files\n\nBackward support for Dashboard search and removal of Chart and ReportTable hbm files. Also include some small fixes for issues found during tests.", "committedDate": "2020-01-29T13:03:34Z", "type": "commit"}, {"oid": "cef9bb2fbc2dcdca38fdf423136cc4d3548de07d", "url": "https://github.com/dhis2/dhis2-core/commit/cef9bb2fbc2dcdca38fdf423136cc4d3548de07d", "message": "feat: Merging master into [DHIS2-7946]", "committedDate": "2020-01-29T13:31:43Z", "type": "commit"}, {"oid": "4e2e282a426238e63bcc6198b12f84cf924608a3", "url": "https://github.com/dhis2/dhis2-core/commit/4e2e282a426238e63bcc6198b12f84cf924608a3", "message": "fix: Reverting changing mistake [DHIS2-7946]", "committedDate": "2020-01-29T13:40:46Z", "type": "commit"}, {"oid": "5f11e0812514996b939dbeab87bea462405be8ce", "url": "https://github.com/dhis2/dhis2-core/commit/5f11e0812514996b939dbeab87bea462405be8ce", "message": "fix: Tiny bug fix regarding Chart reporting [DHIS2-7946]", "committedDate": "2020-01-29T14:20:20Z", "type": "commit"}, {"oid": "0623c3c6c97e1e7b4ab3c05487a1cb99a50bc773", "url": "https://github.com/dhis2/dhis2-core/commit/0623c3c6c97e1e7b4ab3c05487a1cb99a50bc773", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-02-03T08:33:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk3OTc0Mw==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r373979743", "bodyText": "Codestyle, brackets on new line.", "author": "larshelge", "createdAt": "2020-02-03T08:51:00Z", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/visualization/SimpleVisualizationView.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+package org.hisp.dhis.visualization;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n+import org.hisp.dhis.common.BaseIdentifiableObject;\n+import org.hisp.dhis.common.DxfNamespaces;\n+import org.hisp.dhis.common.annotation.Description;\n+\n+public class SimpleVisualizationView extends BaseIdentifiableObject {\n+\n+    private VisualizationType type;\n+\n+    @JsonProperty\n+    @JacksonXmlProperty( namespace = DxfNamespaces.DXF_2_0 )\n+    @Description( \"The type of the Visualization object. Only used for Visualization objects.\" )\n+    public VisualizationType getType() {", "originalCommit": "0623c3c6c97e1e7b4ab3c05487a1cb99a50bc773", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk4NTUyNA==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r373985524", "bodyText": "Fixed", "author": "maikelarabori", "createdAt": "2020-02-03T09:04:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk3OTc0Mw=="}], "type": "inlineReview"}, {"oid": "f72d624b15095dcfe697e76001f3e8482ccbe0b7", "url": "https://github.com/dhis2/dhis2-core/commit/f72d624b15095dcfe697e76001f3e8482ccbe0b7", "message": "fix: Removing unnecessary code [DHIS2-7946]", "committedDate": "2020-02-03T08:52:15Z", "type": "commit"}, {"oid": "4496b1d78ad41b95f00e15ff2f8d505f801c5fd1", "url": "https://github.com/dhis2/dhis2-core/commit/4496b1d78ad41b95f00e15ff2f8d505f801c5fd1", "message": "fix: Code formatting [DHIS2-7945]", "committedDate": "2020-02-03T09:03:02Z", "type": "commit"}, {"oid": "aa9f2a2b25dbb0d0983c76f33b15492c6ae344c1", "url": "https://github.com/dhis2/dhis2-core/commit/aa9f2a2b25dbb0d0983c76f33b15492c6ae344c1", "message": "Merge branch 'master' of https://github.com/dhis2/dhis2-core into DHIS2-7946", "committedDate": "2020-02-03T09:36:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAyODQzNQ==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374028435", "bodyText": "Instead of converting \"real-time\", should we instead convert dashboard items once with Flyway?", "author": "larshelge", "createdAt": "2020-02-03T10:34:47Z", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/dashboard/DashboardItem.java", "diffHunk": "@@ -528,4 +540,96 @@ public void setWidth( Integer width )\n     {\n         this.width = width;\n     }\n+\n+    /******************************\n+     * Deprecated methods required to keep ReportTable and Chart backward compatible\n+     ******************************/\n+\n+    private Visualization convertToVisualization( final Chart chart )", "originalCommit": "aa9f2a2b25dbb0d0983c76f33b15492c6ae344c1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAyODY5MQ==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374028691", "bodyText": "Could we add a description at the class level with the purpose of this class?", "author": "larshelge", "createdAt": "2020-02-03T10:35:17Z", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/visualization/SimpleVisualizationView.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*\n+ * Copyright (c) 2004-2020, University of Oslo\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ * Redistributions of source code must retain the above copyright notice, this\n+ * list of conditions and the following disclaimer.\n+ *\n+ * Redistributions in binary form must reproduce the above copyright notice,\n+ * this list of conditions and the following disclaimer in the documentation\n+ * and/or other materials provided with the distribution.\n+ * Neither the name of the HISP project nor the names of its contributors may\n+ * be used to endorse or promote products derived from this software without\n+ * specific prior written permission.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n+ * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+\n+package org.hisp.dhis.visualization;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n+import org.hisp.dhis.common.BaseIdentifiableObject;\n+import org.hisp.dhis.common.DxfNamespaces;\n+import org.hisp.dhis.common.annotation.Description;\n+\n+public class SimpleVisualizationView", "originalCommit": "aa9f2a2b25dbb0d0983c76f33b15492c6ae344c1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA1ODY1Nw==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374058657", "bodyText": "Done", "author": "maikelarabori", "createdAt": "2020-02-03T11:45:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAyODY5MQ=="}], "type": "inlineReview"}, {"oid": "f7661606df31ab640d00dfe4bad7e7fd1d921772", "url": "https://github.com/dhis2/dhis2-core/commit/f7661606df31ab640d00dfe4bad7e7fd1d921772", "message": "fix: Adding Javadoc into SimpleVisualizationObject [DHIS2-7946]", "committedDate": "2020-02-03T10:55:41Z", "type": "commit"}, {"oid": "6ba633dd67823231484297bae1779bf965dec902", "url": "https://github.com/dhis2/dhis2-core/commit/6ba633dd67823231484297bae1779bf965dec902", "message": "fix: Add  missed Visualization code to Dashboard service [DHIS2-7946]", "committedDate": "2020-02-03T11:04:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA2MDgxNA==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374060814", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                if (visualization.hasReportingParams()) {\n          \n          \n            \n                                if ( visualization.hasReportingParams() ) \n          \n          \n            \n                                {", "author": "stian-sandvold", "createdAt": "2020-02-03T11:51:25Z", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/ReportTableFacadeController.java", "diffHunk": "@@ -1138,28 +1143,33 @@ private Visualization convertToVisualization( final ReportTable reportTable )\n     private List<ReportTable> convertToReportTableList( List<Visualization> entities )\n     {\n         List<ReportTable> reportTables = new ArrayList<>();\n+\n         if ( CollectionUtils.isNotEmpty( entities ) )\n         {\n             for ( final Visualization visualization : entities )\n             {\n-                final ReportTable reportTable = new ReportTable();\n-                BeanUtils.copyProperties( visualization, reportTable );\n-\n-                // Copy report params\n-                if ( visualization.hasReportingParams() )\n+                // Consider only Visualization types of Pivot Table\n+                if ( visualization.getType() != null\n+                    && \"PIVOT_TABLE\".equalsIgnoreCase( visualization.getType().name() ) )\n                 {\n-                    final ReportingParams reportingParams = visualization.getReportingParams();\n-                    final ReportParams reportParams = new ReportParams();\n+                    final ReportTable reportTable = new ReportTable();\n+                    BeanUtils.copyProperties( visualization, reportTable );\n \n-                    reportParams.setParamGrandParentOrganisationUnit( reportingParams.isGrandParentOrganisationUnit() );\n-                    reportParams.setParamOrganisationUnit( reportingParams.isOrganisationUnit() );\n-                    reportParams.setParamParentOrganisationUnit( reportingParams.isParentOrganisationUnit() );\n-                    reportParams.setParamReportingMonth( reportingParams.isReportingPeriod() );\n+                    // Copy report params\n+                    if (visualization.hasReportingParams()) {", "originalCommit": "6ba633dd67823231484297bae1779bf965dec902", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA2MDg5MQ==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374060891", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    reportParams.setParamGrandParentOrganisationUnit(reportingParams.isGrandParentOrganisationUnit());\n          \n          \n            \n                                    reportParams.setParamGrandParentOrganisationUnit( reportingParams.isGrandParentOrganisationUnit() );", "author": "stian-sandvold", "createdAt": "2020-02-03T11:51:37Z", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/ReportTableFacadeController.java", "diffHunk": "@@ -1138,28 +1143,33 @@ private Visualization convertToVisualization( final ReportTable reportTable )\n     private List<ReportTable> convertToReportTableList( List<Visualization> entities )\n     {\n         List<ReportTable> reportTables = new ArrayList<>();\n+\n         if ( CollectionUtils.isNotEmpty( entities ) )\n         {\n             for ( final Visualization visualization : entities )\n             {\n-                final ReportTable reportTable = new ReportTable();\n-                BeanUtils.copyProperties( visualization, reportTable );\n-\n-                // Copy report params\n-                if ( visualization.hasReportingParams() )\n+                // Consider only Visualization types of Pivot Table\n+                if ( visualization.getType() != null\n+                    && \"PIVOT_TABLE\".equalsIgnoreCase( visualization.getType().name() ) )\n                 {\n-                    final ReportingParams reportingParams = visualization.getReportingParams();\n-                    final ReportParams reportParams = new ReportParams();\n+                    final ReportTable reportTable = new ReportTable();\n+                    BeanUtils.copyProperties( visualization, reportTable );\n \n-                    reportParams.setParamGrandParentOrganisationUnit( reportingParams.isGrandParentOrganisationUnit() );\n-                    reportParams.setParamOrganisationUnit( reportingParams.isOrganisationUnit() );\n-                    reportParams.setParamParentOrganisationUnit( reportingParams.isParentOrganisationUnit() );\n-                    reportParams.setParamReportingMonth( reportingParams.isReportingPeriod() );\n+                    // Copy report params\n+                    if (visualization.hasReportingParams()) {\n+                        final ReportingParams reportingParams = visualization.getReportingParams();\n+                        final ReportParams reportParams = new ReportParams();\n \n-                    reportTable.setReportParams( reportParams );\n-                }\n+                        reportParams.setParamGrandParentOrganisationUnit(reportingParams.isGrandParentOrganisationUnit());", "originalCommit": "6ba633dd67823231484297bae1779bf965dec902", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA2MDk2OQ==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374060969", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    reportParams.setParamOrganisationUnit(reportingParams.isOrganisationUnit());\n          \n          \n            \n                                    reportParams.setParamOrganisationUnit( reportingParams.isOrganisationUnit() );", "author": "stian-sandvold", "createdAt": "2020-02-03T11:51:48Z", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/ReportTableFacadeController.java", "diffHunk": "@@ -1138,28 +1143,33 @@ private Visualization convertToVisualization( final ReportTable reportTable )\n     private List<ReportTable> convertToReportTableList( List<Visualization> entities )\n     {\n         List<ReportTable> reportTables = new ArrayList<>();\n+\n         if ( CollectionUtils.isNotEmpty( entities ) )\n         {\n             for ( final Visualization visualization : entities )\n             {\n-                final ReportTable reportTable = new ReportTable();\n-                BeanUtils.copyProperties( visualization, reportTable );\n-\n-                // Copy report params\n-                if ( visualization.hasReportingParams() )\n+                // Consider only Visualization types of Pivot Table\n+                if ( visualization.getType() != null\n+                    && \"PIVOT_TABLE\".equalsIgnoreCase( visualization.getType().name() ) )\n                 {\n-                    final ReportingParams reportingParams = visualization.getReportingParams();\n-                    final ReportParams reportParams = new ReportParams();\n+                    final ReportTable reportTable = new ReportTable();\n+                    BeanUtils.copyProperties( visualization, reportTable );\n \n-                    reportParams.setParamGrandParentOrganisationUnit( reportingParams.isGrandParentOrganisationUnit() );\n-                    reportParams.setParamOrganisationUnit( reportingParams.isOrganisationUnit() );\n-                    reportParams.setParamParentOrganisationUnit( reportingParams.isParentOrganisationUnit() );\n-                    reportParams.setParamReportingMonth( reportingParams.isReportingPeriod() );\n+                    // Copy report params\n+                    if (visualization.hasReportingParams()) {\n+                        final ReportingParams reportingParams = visualization.getReportingParams();\n+                        final ReportParams reportParams = new ReportParams();\n \n-                    reportTable.setReportParams( reportParams );\n-                }\n+                        reportParams.setParamGrandParentOrganisationUnit(reportingParams.isGrandParentOrganisationUnit());\n+                        reportParams.setParamOrganisationUnit(reportingParams.isOrganisationUnit());", "originalCommit": "6ba633dd67823231484297bae1779bf965dec902", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA2MTA0Nw==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374061047", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    reportParams.setParamParentOrganisationUnit(reportingParams.isParentOrganisationUnit());\n          \n          \n            \n                                    reportParams.setParamParentOrganisationUnit( reportingParams.isParentOrganisationUnit() );", "author": "stian-sandvold", "createdAt": "2020-02-03T11:52:00Z", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/ReportTableFacadeController.java", "diffHunk": "@@ -1138,28 +1143,33 @@ private Visualization convertToVisualization( final ReportTable reportTable )\n     private List<ReportTable> convertToReportTableList( List<Visualization> entities )\n     {\n         List<ReportTable> reportTables = new ArrayList<>();\n+\n         if ( CollectionUtils.isNotEmpty( entities ) )\n         {\n             for ( final Visualization visualization : entities )\n             {\n-                final ReportTable reportTable = new ReportTable();\n-                BeanUtils.copyProperties( visualization, reportTable );\n-\n-                // Copy report params\n-                if ( visualization.hasReportingParams() )\n+                // Consider only Visualization types of Pivot Table\n+                if ( visualization.getType() != null\n+                    && \"PIVOT_TABLE\".equalsIgnoreCase( visualization.getType().name() ) )\n                 {\n-                    final ReportingParams reportingParams = visualization.getReportingParams();\n-                    final ReportParams reportParams = new ReportParams();\n+                    final ReportTable reportTable = new ReportTable();\n+                    BeanUtils.copyProperties( visualization, reportTable );\n \n-                    reportParams.setParamGrandParentOrganisationUnit( reportingParams.isGrandParentOrganisationUnit() );\n-                    reportParams.setParamOrganisationUnit( reportingParams.isOrganisationUnit() );\n-                    reportParams.setParamParentOrganisationUnit( reportingParams.isParentOrganisationUnit() );\n-                    reportParams.setParamReportingMonth( reportingParams.isReportingPeriod() );\n+                    // Copy report params\n+                    if (visualization.hasReportingParams()) {\n+                        final ReportingParams reportingParams = visualization.getReportingParams();\n+                        final ReportParams reportParams = new ReportParams();\n \n-                    reportTable.setReportParams( reportParams );\n-                }\n+                        reportParams.setParamGrandParentOrganisationUnit(reportingParams.isGrandParentOrganisationUnit());\n+                        reportParams.setParamOrganisationUnit(reportingParams.isOrganisationUnit());\n+                        reportParams.setParamParentOrganisationUnit(reportingParams.isParentOrganisationUnit());", "originalCommit": "6ba633dd67823231484297bae1779bf965dec902", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA2MTEzNA==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374061134", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    reportParams.setParamReportingMonth(reportingParams.isReportingPeriod());\n          \n          \n            \n                                    reportParams.setParamReportingMonth( reportingParams.isReportingPeriod() );", "author": "stian-sandvold", "createdAt": "2020-02-03T11:52:13Z", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/ReportTableFacadeController.java", "diffHunk": "@@ -1138,28 +1143,33 @@ private Visualization convertToVisualization( final ReportTable reportTable )\n     private List<ReportTable> convertToReportTableList( List<Visualization> entities )\n     {\n         List<ReportTable> reportTables = new ArrayList<>();\n+\n         if ( CollectionUtils.isNotEmpty( entities ) )\n         {\n             for ( final Visualization visualization : entities )\n             {\n-                final ReportTable reportTable = new ReportTable();\n-                BeanUtils.copyProperties( visualization, reportTable );\n-\n-                // Copy report params\n-                if ( visualization.hasReportingParams() )\n+                // Consider only Visualization types of Pivot Table\n+                if ( visualization.getType() != null\n+                    && \"PIVOT_TABLE\".equalsIgnoreCase( visualization.getType().name() ) )\n                 {\n-                    final ReportingParams reportingParams = visualization.getReportingParams();\n-                    final ReportParams reportParams = new ReportParams();\n+                    final ReportTable reportTable = new ReportTable();\n+                    BeanUtils.copyProperties( visualization, reportTable );\n \n-                    reportParams.setParamGrandParentOrganisationUnit( reportingParams.isGrandParentOrganisationUnit() );\n-                    reportParams.setParamOrganisationUnit( reportingParams.isOrganisationUnit() );\n-                    reportParams.setParamParentOrganisationUnit( reportingParams.isParentOrganisationUnit() );\n-                    reportParams.setParamReportingMonth( reportingParams.isReportingPeriod() );\n+                    // Copy report params\n+                    if (visualization.hasReportingParams()) {\n+                        final ReportingParams reportingParams = visualization.getReportingParams();\n+                        final ReportParams reportParams = new ReportParams();\n \n-                    reportTable.setReportParams( reportParams );\n-                }\n+                        reportParams.setParamGrandParentOrganisationUnit(reportingParams.isGrandParentOrganisationUnit());\n+                        reportParams.setParamOrganisationUnit(reportingParams.isOrganisationUnit());\n+                        reportParams.setParamParentOrganisationUnit(reportingParams.isParentOrganisationUnit());\n+                        reportParams.setParamReportingMonth(reportingParams.isReportingPeriod());", "originalCommit": "6ba633dd67823231484297bae1779bf965dec902", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA2MTE4OQ==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374061189", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    reportTable.setReportParams(reportParams);\n          \n          \n            \n                                    reportTable.setReportParams( reportParams );", "author": "stian-sandvold", "createdAt": "2020-02-03T11:52:20Z", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/ReportTableFacadeController.java", "diffHunk": "@@ -1138,28 +1143,33 @@ private Visualization convertToVisualization( final ReportTable reportTable )\n     private List<ReportTable> convertToReportTableList( List<Visualization> entities )\n     {\n         List<ReportTable> reportTables = new ArrayList<>();\n+\n         if ( CollectionUtils.isNotEmpty( entities ) )\n         {\n             for ( final Visualization visualization : entities )\n             {\n-                final ReportTable reportTable = new ReportTable();\n-                BeanUtils.copyProperties( visualization, reportTable );\n-\n-                // Copy report params\n-                if ( visualization.hasReportingParams() )\n+                // Consider only Visualization types of Pivot Table\n+                if ( visualization.getType() != null\n+                    && \"PIVOT_TABLE\".equalsIgnoreCase( visualization.getType().name() ) )\n                 {\n-                    final ReportingParams reportingParams = visualization.getReportingParams();\n-                    final ReportParams reportParams = new ReportParams();\n+                    final ReportTable reportTable = new ReportTable();\n+                    BeanUtils.copyProperties( visualization, reportTable );\n \n-                    reportParams.setParamGrandParentOrganisationUnit( reportingParams.isGrandParentOrganisationUnit() );\n-                    reportParams.setParamOrganisationUnit( reportingParams.isOrganisationUnit() );\n-                    reportParams.setParamParentOrganisationUnit( reportingParams.isParentOrganisationUnit() );\n-                    reportParams.setParamReportingMonth( reportingParams.isReportingPeriod() );\n+                    // Copy report params\n+                    if (visualization.hasReportingParams()) {\n+                        final ReportingParams reportingParams = visualization.getReportingParams();\n+                        final ReportParams reportParams = new ReportParams();\n \n-                    reportTable.setReportParams( reportParams );\n-                }\n+                        reportParams.setParamGrandParentOrganisationUnit(reportingParams.isGrandParentOrganisationUnit());\n+                        reportParams.setParamOrganisationUnit(reportingParams.isOrganisationUnit());\n+                        reportParams.setParamParentOrganisationUnit(reportingParams.isParentOrganisationUnit());\n+                        reportParams.setParamReportingMonth(reportingParams.isReportingPeriod());\n \n-                reportTables.add( reportTable );\n+                        reportTable.setReportParams(reportParams);", "originalCommit": "6ba633dd67823231484297bae1779bf965dec902", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA2MTI0Nw==", "url": "https://github.com/dhis2/dhis2-core/pull/4778#discussion_r374061247", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                reportTables.add(reportTable);\n          \n          \n            \n                                reportTables.add( reportTable );", "author": "stian-sandvold", "createdAt": "2020-02-03T11:52:30Z", "path": "dhis-2/dhis-web/dhis-web-api/src/main/java/org/hisp/dhis/webapi/controller/ReportTableFacadeController.java", "diffHunk": "@@ -1138,28 +1143,33 @@ private Visualization convertToVisualization( final ReportTable reportTable )\n     private List<ReportTable> convertToReportTableList( List<Visualization> entities )\n     {\n         List<ReportTable> reportTables = new ArrayList<>();\n+\n         if ( CollectionUtils.isNotEmpty( entities ) )\n         {\n             for ( final Visualization visualization : entities )\n             {\n-                final ReportTable reportTable = new ReportTable();\n-                BeanUtils.copyProperties( visualization, reportTable );\n-\n-                // Copy report params\n-                if ( visualization.hasReportingParams() )\n+                // Consider only Visualization types of Pivot Table\n+                if ( visualization.getType() != null\n+                    && \"PIVOT_TABLE\".equalsIgnoreCase( visualization.getType().name() ) )\n                 {\n-                    final ReportingParams reportingParams = visualization.getReportingParams();\n-                    final ReportParams reportParams = new ReportParams();\n+                    final ReportTable reportTable = new ReportTable();\n+                    BeanUtils.copyProperties( visualization, reportTable );\n \n-                    reportParams.setParamGrandParentOrganisationUnit( reportingParams.isGrandParentOrganisationUnit() );\n-                    reportParams.setParamOrganisationUnit( reportingParams.isOrganisationUnit() );\n-                    reportParams.setParamParentOrganisationUnit( reportingParams.isParentOrganisationUnit() );\n-                    reportParams.setParamReportingMonth( reportingParams.isReportingPeriod() );\n+                    // Copy report params\n+                    if (visualization.hasReportingParams()) {\n+                        final ReportingParams reportingParams = visualization.getReportingParams();\n+                        final ReportParams reportParams = new ReportParams();\n \n-                    reportTable.setReportParams( reportParams );\n-                }\n+                        reportParams.setParamGrandParentOrganisationUnit(reportingParams.isGrandParentOrganisationUnit());\n+                        reportParams.setParamOrganisationUnit(reportingParams.isOrganisationUnit());\n+                        reportParams.setParamParentOrganisationUnit(reportingParams.isParentOrganisationUnit());\n+                        reportParams.setParamReportingMonth(reportingParams.isReportingPeriod());\n \n-                reportTables.add( reportTable );\n+                        reportTable.setReportParams(reportParams);\n+                    }\n+\n+                    reportTables.add(reportTable);", "originalCommit": "6ba633dd67823231484297bae1779bf965dec902", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "938fe18100dd6d9551f11b4d39404368cdfef6c4", "url": "https://github.com/dhis2/dhis2-core/commit/938fe18100dd6d9551f11b4d39404368cdfef6c4", "message": "Apply suggestions from code review", "committedDate": "2020-02-03T11:53:45Z", "type": "commit"}]}