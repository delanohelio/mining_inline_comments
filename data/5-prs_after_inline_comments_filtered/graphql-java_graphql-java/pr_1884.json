{"pr_number": 1884, "pr_title": "1764 allow interfaces to implement other interfaces", "pr_createdAt": "2020-04-27T10:11:03Z", "pr_url": "https://github.com/graphql-java/graphql-java/pull/1884", "timeline": [{"oid": "1b120b2858f08cd535fceb04e56f5380fb0de52d", "url": "https://github.com/graphql-java/graphql-java/commit/1b120b2858f08cd535fceb04e56f5380fb0de52d", "message": "1764: Interfaces implementing interfaces working with partial validation", "committedDate": "2020-04-27T08:49:57Z", "type": "commit"}, {"oid": "5dca065f49021a26ec7041dfdd85d0eec334c638", "url": "https://github.com/graphql-java/graphql-java/commit/5dca065f49021a26ec7041dfdd85d0eec334c638", "message": "1764: Assert error messages", "committedDate": "2020-04-27T09:34:40Z", "type": "commit"}, {"oid": "ecb52d31d3db49aeca521fccc8f2b6c1e15eb040", "url": "https://github.com/graphql-java/graphql-java/commit/ecb52d31d3db49aeca521fccc8f2b6c1e15eb040", "message": "1764: Check if interface is implementing itself\n\nfixes: #1764", "committedDate": "2020-04-27T10:08:04Z", "type": "commit"}, {"oid": "ea740efacc54ea02d415f35448aa3e5e4fefd95a", "url": "https://github.com/graphql-java/graphql-java/commit/ea740efacc54ea02d415f35448aa3e5e4fefd95a", "message": "1764: Fix bug with circular dependency", "committedDate": "2020-04-28T23:07:02Z", "type": "commit"}, {"oid": "ea740efacc54ea02d415f35448aa3e5e4fefd95a", "url": "https://github.com/graphql-java/graphql-java/commit/ea740efacc54ea02d415f35448aa3e5e4fefd95a", "message": "1764: Fix bug with circular dependency", "committedDate": "2020-04-28T23:07:02Z", "type": "forcePushed"}, {"oid": "3dfdab1b12fa64c4032737d59dec792083c86bb8", "url": "https://github.com/graphql-java/graphql-java/commit/3dfdab1b12fa64c4032737d59dec792083c86bb8", "message": "1764: Use String.join instead of realying on Collection#toString", "committedDate": "2020-04-28T23:19:56Z", "type": "commit"}, {"oid": "3dfdab1b12fa64c4032737d59dec792083c86bb8", "url": "https://github.com/graphql-java/graphql-java/commit/3dfdab1b12fa64c4032737d59dec792083c86bb8", "message": "1764: Use String.join instead of realying on Collection#toString", "committedDate": "2020-04-28T23:19:56Z", "type": "forcePushed"}, {"oid": "ae71b4a3898bb26823ea0c158856b0cdae044dc7", "url": "https://github.com/graphql-java/graphql-java/commit/ae71b4a3898bb26823ea0c158856b0cdae044dc7", "message": "1764: Better test assertions", "committedDate": "2020-04-29T08:44:59Z", "type": "commit"}, {"oid": "81b1b2628018493c6ff265ce7906270d2a7cf765", "url": "https://github.com/graphql-java/graphql-java/commit/81b1b2628018493c6ff265ce7906270d2a7cf765", "message": "1764: Add tests for transitive implementation declared in interface extensions", "committedDate": "2020-04-29T09:01:37Z", "type": "commit"}, {"oid": "0039150ff8f3179d5bd98ec72f64225e9c026fd7", "url": "https://github.com/graphql-java/graphql-java/commit/0039150ff8f3179d5bd98ec72f64225e9c026fd7", "message": "1764: Simplify implementation of transitive validation", "committedDate": "2020-04-29T22:57:58Z", "type": "commit"}, {"oid": "465e4a98490411b1011dd09b68aa9ff10b1f2c3b", "url": "https://github.com/graphql-java/graphql-java/commit/465e4a98490411b1011dd09b68aa9ff10b1f2c3b", "message": "1764: Fix transitive implementation declared in extension interface bug", "committedDate": "2020-05-17T09:52:17Z", "type": "commit"}, {"oid": "4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "url": "https://github.com/graphql-java/graphql-java/commit/4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "message": "1764: Add tests for field and arguments check", "committedDate": "2020-05-17T09:52:29Z", "type": "commit"}, {"oid": "4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "url": "https://github.com/graphql-java/graphql-java/commit/4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "message": "1764: Add tests for field and arguments check", "committedDate": "2020-05-17T09:52:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkxOTgwNw==", "url": "https://github.com/graphql-java/graphql-java/pull/1884#discussion_r426919807", "bodyText": "please use our map static function instead of streams directly", "author": "andimarek", "createdAt": "2020-05-18T22:10:27Z", "path": "src/main/java/graphql/introspection/IntrospectionResultToSchema.java", "diffHunk": "@@ -185,6 +184,13 @@ InterfaceTypeDefinition createInterface(Map<String, Object> input) {\n \n         InterfaceTypeDefinition.Builder interfaceTypeDefinition = InterfaceTypeDefinition.newInterfaceTypeDefinition().name((String) input.get(\"name\"));\n         interfaceTypeDefinition.description(toDescription(input));\n+        if (input.containsKey(\"interfaces\") && input.get(\"interfaces\") != null) {\n+            interfaceTypeDefinition.implementz(\n+                    ((List<Map<String, Object>>) input.get(\"interfaces\")).stream()", "originalCommit": "4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyMDU2MQ==", "url": "https://github.com/graphql-java/graphql-java/pull/1884#discussion_r426920561", "bodyText": "why the recursive type definition here?", "author": "andimarek", "createdAt": "2020-05-18T22:12:26Z", "path": "src/main/java/graphql/language/ImplementingTypeDefinition.java", "diffHunk": "@@ -0,0 +1,19 @@\n+package graphql.language;\n+\n+\n+import graphql.PublicApi;\n+\n+import java.util.List;\n+\n+/**\n+ * A {@link TypeDefinition} that might implement interfaces\n+ *\n+ * @param <T>\n+ */\n+@PublicApi\n+public interface ImplementingTypeDefinition<T extends ImplementingTypeDefinition> extends TypeDefinition<T> {", "originalCommit": "4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzExNjQ3MA==", "url": "https://github.com/graphql-java/graphql-java/pull/1884#discussion_r427116470", "bodyText": "Yep, not needed. <T extends TypeDefinition> should be enough.", "author": "felipe-gdr", "createdAt": "2020-05-19T08:20:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyMDU2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyMDcyMA==", "url": "https://github.com/graphql-java/graphql-java/pull/1884#discussion_r426920720", "bodyText": "not great name, but not in scope to change it here.", "author": "andimarek", "createdAt": "2020-05-18T22:12:50Z", "path": "src/main/java/graphql/language/ImplementingTypeDefinition.java", "diffHunk": "@@ -0,0 +1,19 @@\n+package graphql.language;\n+\n+\n+import graphql.PublicApi;\n+\n+import java.util.List;\n+\n+/**\n+ * A {@link TypeDefinition} that might implement interfaces\n+ *\n+ * @param <T>\n+ */\n+@PublicApi\n+public interface ImplementingTypeDefinition<T extends ImplementingTypeDefinition> extends TypeDefinition<T> {\n+\n+    List<Type> getImplements();", "originalCommit": "4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyMTQwNg==", "url": "https://github.com/graphql-java/graphql-java/pull/1884#discussion_r426921406", "bodyText": "please use our map util function.", "author": "andimarek", "createdAt": "2020-05-18T22:14:42Z", "path": "src/main/java/graphql/parser/GraphqlAntlrToLanguage.java", "diffHunk": "@@ -882,4 +878,14 @@ protected SourceLocation getSourceLocation(ParserRuleContext parserRuleContext)\n         return comments;\n     }\n \n+\n+    private List<Type> getImplementz(GraphqlParser.ImplementsInterfacesContext implementsInterfacesContext) {\n+        List<Type> implementz = new ArrayList<>();\n+        while (implementsInterfacesContext != null) {\n+            List<TypeName> typeNames = implementsInterfacesContext.typeName().stream().map(this::createTypeName).collect(toList());", "originalCommit": "4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyMTgxOA==", "url": "https://github.com/graphql-java/graphql-java/pull/1884#discussion_r426921818", "bodyText": "please use the util function", "author": "andimarek", "createdAt": "2020-05-18T22:15:47Z", "path": "src/main/java/graphql/schema/idl/SchemaTypeChecker.java", "diffHunk": "@@ -90,7 +85,7 @@\n \n     private void checkForMissingTypes(List<GraphQLError> errors, TypeDefinitionRegistry typeRegistry) {\n         // type extensions\n-        List<ObjectTypeExtensionDefinition> typeExtensions = typeRegistry.objectTypeExtensions().values().stream().flatMap(Collection::stream).collect(Collectors.toList());\n+        List<ObjectTypeExtensionDefinition> typeExtensions = typeRegistry.objectTypeExtensions().values().stream().flatMap(Collection::stream).collect(toList());", "originalCommit": "4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzEyMjEzNw==", "url": "https://github.com/graphql-java/graphql-java/pull/1884#discussion_r427122137", "bodyText": "FpKit#flatList applies to List<List<>> and we have a Collection<List<>> here.\nShould we create a more generic flatten method in FpKit?", "author": "felipe-gdr", "createdAt": "2020-05-19T08:29:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyMTgxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyMjI4NQ==", "url": "https://github.com/graphql-java/graphql-java/pull/1884#discussion_r426922285", "bodyText": "this is a breaking change. Should we consider adding another one and keeping this one for use object implementations?", "author": "andimarek", "createdAt": "2020-05-18T22:17:06Z", "path": "src/main/java/graphql/schema/idl/TypeDefinitionRegistry.java", "diffHunk": "@@ -453,13 +454,13 @@ public boolean isObjectType(Type type) {\n     }\n \n     /**\n-     * Returns the list of object types that implement the given interface type\n+     * Returns the list of object and interface types that implement the given interface type\n      *\n      * @param targetInterface the target to search for\n      * @return the list of object types that implement the given interface type\n      */\n-    public List<ObjectTypeDefinition> getImplementationsOf(InterfaceTypeDefinition targetInterface) {\n-        List<ObjectTypeDefinition> objectTypeDefinitions = getTypes(ObjectTypeDefinition.class);\n+    public List<ImplementingTypeDefinition> getImplementationsOf(InterfaceTypeDefinition targetInterface) {", "originalCommit": "4015f0d1ef7403a8ca96add2ac75c42aa98398ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzEyNTU3Mg==", "url": "https://github.com/graphql-java/graphql-java/pull/1884#discussion_r427125572", "bodyText": "Yep, just noticed that this is public API. I'll create a new method.", "author": "felipe-gdr", "createdAt": "2020-05-19T08:34:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyMjI4NQ=="}], "type": "inlineReview"}, {"oid": "cfe170ee8966c63d2a8e10ba7f75f7cc24b8b2ce", "url": "https://github.com/graphql-java/graphql-java/commit/cfe170ee8966c63d2a8e10ba7f75f7cc24b8b2ce", "message": "1764: Create integration test", "committedDate": "2020-05-20T10:42:05Z", "type": "commit"}, {"oid": "04cfbe74b09e7b67094c0b7a69cff427d113f5bb", "url": "https://github.com/graphql-java/graphql-java/commit/04cfbe74b09e7b67094c0b7a69cff427d113f5bb", "message": "1764: PR feedback\n- use FpKit\n- fix Generic definition in ImplementingTypeDefinition\n- don't break public API in TypeDefinitionRegistry", "committedDate": "2020-05-20T10:46:58Z", "type": "commit"}, {"oid": "04cfbe74b09e7b67094c0b7a69cff427d113f5bb", "url": "https://github.com/graphql-java/graphql-java/commit/04cfbe74b09e7b67094c0b7a69cff427d113f5bb", "message": "1764: PR feedback\n- use FpKit\n- fix Generic definition in ImplementingTypeDefinition\n- don't break public API in TypeDefinitionRegistry", "committedDate": "2020-05-20T10:46:58Z", "type": "forcePushed"}, {"oid": "39dc3d4f59671ef3459dd138e384e5802eea1208", "url": "https://github.com/graphql-java/graphql-java/commit/39dc3d4f59671ef3459dd138e384e5802eea1208", "message": "1764: Improve query integration test and add introspection query test", "committedDate": "2020-05-21T22:12:22Z", "type": "commit"}, {"oid": "765698305714677f61fb0e1c2ac469ed97f6a48c", "url": "https://github.com/graphql-java/graphql-java/commit/765698305714677f61fb0e1c2ac469ed97f6a48c", "message": "improve tests", "committedDate": "2020-05-21T23:19:18Z", "type": "commit"}, {"oid": "d04a6ec315e1fc2301c22a1f44712ab16842b507", "url": "https://github.com/graphql-java/graphql-java/commit/d04a6ec315e1fc2301c22a1f44712ab16842b507", "message": "add Interfaces to GraphQLInterfaceType\nfix introspection interfaces field", "committedDate": "2020-05-22T00:47:51Z", "type": "commit"}, {"oid": "b785a5b0266e4bb1ff191be541c62d90d76de519", "url": "https://github.com/graphql-java/graphql-java/commit/b785a5b0266e4bb1ff191be541c62d90d76de519", "message": "test programmatically GraphQLInterfaceType\nand test SchemaPrinter", "committedDate": "2020-05-22T01:38:48Z", "type": "commit"}, {"oid": "2792f3aaa692d17bb86332a78a7c3f4ab94f1452", "url": "https://github.com/graphql-java/graphql-java/commit/2792f3aaa692d17bb86332a78a7c3f4ab94f1452", "message": "transitively declaring all interfaces", "committedDate": "2020-05-22T01:49:13Z", "type": "commit"}, {"oid": "24150503f8a7db0cdd7d7c567cc317d24a9ea731", "url": "https://github.com/graphql-java/graphql-java/commit/24150503f8a7db0cdd7d7c567cc317d24a9ea731", "message": "astprinter handles interfaces in interfaces", "committedDate": "2020-05-22T04:35:09Z", "type": "commit"}, {"oid": "e7a5d841afff2d81c011aae33e4c37cb9898de19", "url": "https://github.com/graphql-java/graphql-java/commit/e7a5d841afff2d81c011aae33e4c37cb9898de19", "message": "add schema printer test", "committedDate": "2020-05-22T04:46:28Z", "type": "commit"}, {"oid": "420481f12a40de2abf22578a711a50d921ffd620", "url": "https://github.com/graphql-java/graphql-java/commit/420481f12a40de2abf22578a711a50d921ffd620", "message": "1764: Implemente interface implement interface validation in SchemaValidator", "committedDate": "2020-05-24T04:30:12Z", "type": "commit"}, {"oid": "08d4bb9d8bb83148e2fdef4e25fedcc850a3029d", "url": "https://github.com/graphql-java/graphql-java/commit/08d4bb9d8bb83148e2fdef4e25fedcc850a3029d", "message": "add test for interface extensions", "committedDate": "2020-05-24T06:19:00Z", "type": "commit"}, {"oid": "760188984685d7572893027e2e9b92af9c267f22", "url": "https://github.com/graphql-java/graphql-java/commit/760188984685d7572893027e2e9b92af9c267f22", "message": "Merge branch 'master' into 1764_allow-interfaces-to-implement-other-interfaces", "committedDate": "2020-05-24T06:34:30Z", "type": "commit"}]}