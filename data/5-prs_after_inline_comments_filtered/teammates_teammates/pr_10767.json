{"pr_number": 10767, "pr_title": "[#10693] Add allow rich text editor frontend option", "pr_createdAt": "2020-10-07T15:40:37Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10767", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM5MzQ2MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r501393461", "bodyText": "Shouldn't this be specific to TEXT question?", "author": "xpdavid", "createdAt": "2020-10-08T01:06:53Z", "path": "src/main/java/teammates/common/datatransfer/attributes/FeedbackQuestionAttributes.java", "diffHunk": "@@ -31,6 +31,7 @@\n     public List<FeedbackParticipantType> showResponsesTo;\n     public List<FeedbackParticipantType> showGiverNameTo;\n     public List<FeedbackParticipantType> showRecipientNameTo;\n+    public boolean allowRichText;", "originalCommit": "bb35d5b748fc44f24155b31cbc97541fcb556553", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTQwOTI1MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r501409250", "bodyText": "Ok. Will localize it to text question only.\n@xpdavid On another note, FeedbackQuestionAttributes is the single entity that handles the question's attributes. From the frontend, this allowRichText field is propagated together with the form model. Regarding your concern, should I really split it in the Backend and handle it separately?\nMy current plan would be to segregate this part into FeedbackTextQuestionDetails, as it is the Text Question specific entity.", "author": "moziliar", "createdAt": "2020-10-08T02:13:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM5MzQ2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTQxMTIxMA==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r501411210", "bodyText": "I hope you notice that it does not make sense for other question types (at least rank/rubric etc.)", "author": "xpdavid", "createdAt": "2020-10-08T02:22:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM5MzQ2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTQzMjUzMA==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r501432530", "bodyText": "Yes. It does disturb me a little when I fill in that field for other question type due to typing. Should it be a sidecar attribute for TEXT question alone instead of one baked into the question?", "author": "moziliar", "createdAt": "2020-10-08T03:50:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM5MzQ2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTQzMjg4NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r501432885", "bodyText": "Regarding your concern, should I really split it in the Backend and handle it separately?\n\nWhat do you mean by handle it separately?\nFrankly speaking, you have to modify FeedbackTextQuestionDetails (i.e. the backend) to get things to work.", "author": "xpdavid", "createdAt": "2020-10-08T03:52:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM5MzQ2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTYyMTIwMw==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r501621203", "bodyText": "Yup. I realised and refactored it...\nIt should now be contained within FeedbackTextQuestionDetails", "author": "moziliar", "createdAt": "2020-10-08T10:40:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM5MzQ2MQ=="}], "type": "inlineReview"}, {"oid": "29f06c9ffd4252e70506c2e3434e6342446cdb22", "url": "https://github.com/TEAMMATES/teammates/commit/29f06c9ffd4252e70506c2e3434e6342446cdb22", "message": "Refactor change to text editor option to be contained in text type", "committedDate": "2020-10-08T04:51:50Z", "type": "forcePushed"}, {"oid": "db133804cdc5992fb6628c09aca1577b0d03876a", "url": "https://github.com/TEAMMATES/teammates/commit/db133804cdc5992fb6628c09aca1577b0d03876a", "message": "Refactor change to text editor option to be contained in text type", "committedDate": "2020-10-08T04:52:31Z", "type": "forcePushed"}, {"oid": "df17440a2929c5e01c1de52ae754c9ba513ba92a", "url": "https://github.com/TEAMMATES/teammates/commit/df17440a2929c5e01c1de52ae754c9ba513ba92a", "message": "Refactor change to text editor option to be contained in text type", "committedDate": "2020-10-08T04:53:07Z", "type": "forcePushed"}, {"oid": "807ebdf9ec2365165d29269ec389c6b81010f2d9", "url": "https://github.com/TEAMMATES/teammates/commit/807ebdf9ec2365165d29269ec389c6b81010f2d9", "message": "Refactor change to text editor option to be contained in text type", "committedDate": "2020-10-08T04:54:29Z", "type": "forcePushed"}, {"oid": "fb93b35cdcfa260cf27272504c0d4c3b86c2a3de", "url": "https://github.com/TEAMMATES/teammates/commit/fb93b35cdcfa260cf27272504c0d4c3b86c2a3de", "message": "Refactor change to text editor option to be contained in text type", "committedDate": "2020-10-08T04:58:52Z", "type": "forcePushed"}, {"oid": "bcc56228dbbee86c3bbf64e46e395f9a798c93f1", "url": "https://github.com/TEAMMATES/teammates/commit/bcc56228dbbee86c3bbf64e46e395f9a798c93f1", "message": "Refactor change to text editor option to be contained in text type", "committedDate": "2020-10-08T05:00:33Z", "type": "forcePushed"}, {"oid": "e5a0e08a6030cf133679c94d71cbb193485c2ffe", "url": "https://github.com/TEAMMATES/teammates/commit/e5a0e08a6030cf133679c94d71cbb193485c2ffe", "message": "Refactor change to text editor option to be contained in text type", "committedDate": "2020-10-08T05:02:48Z", "type": "forcePushed"}, {"oid": "94911b3f37597dee786bcd1e9feae8312ea26630", "url": "https://github.com/TEAMMATES/teammates/commit/94911b3f37597dee786bcd1e9feae8312ea26630", "message": "Refactor change to text editor option to be contained in text type", "committedDate": "2020-10-08T06:24:01Z", "type": "forcePushed"}, {"oid": "d5c99c9a48ca2bca0eb4a835bbf747d790ab29d6", "url": "https://github.com/TEAMMATES/teammates/commit/d5c99c9a48ca2bca0eb4a835bbf747d790ab29d6", "message": "Add allow rich text editor frontend option", "committedDate": "2020-10-08T07:36:16Z", "type": "commit"}, {"oid": "3ec09dd16f1d1b4e6ee22850b46506c2e03a9b42", "url": "https://github.com/TEAMMATES/teammates/commit/3ec09dd16f1d1b4e6ee22850b46506c2e03a9b42", "message": "Update UI checkbox display", "committedDate": "2020-10-08T07:36:16Z", "type": "commit"}, {"oid": "fcd442f3796262b13a72ee54d8aac602e364eda5", "url": "https://github.com/TEAMMATES/teammates/commit/fcd442f3796262b13a72ee54d8aac602e364eda5", "message": "Propagate allow rich text option to backend and reflect in FE", "committedDate": "2020-10-08T07:36:16Z", "type": "commit"}, {"oid": "1e83032c4e184134aa33f2c59dae6b214804b488", "url": "https://github.com/TEAMMATES/teammates/commit/1e83032c4e184134aa33f2c59dae6b214804b488", "message": "Refactor change to text editor option to be contained in text type", "committedDate": "2020-10-08T07:36:16Z", "type": "commit"}, {"oid": "2208bee38c9f5f66127b40ee4e7c5acf8f2da1af", "url": "https://github.com/TEAMMATES/teammates/commit/2208bee38c9f5f66127b40ee4e7c5acf8f2da1af", "message": "Update UI", "committedDate": "2020-10-08T07:36:16Z", "type": "commit"}, {"oid": "8e99a20807c1c5e9a79a781b042a9f9774ba253f", "url": "https://github.com/TEAMMATES/teammates/commit/8e99a20807c1c5e9a79a781b042a9f9774ba253f", "message": "Update submission UI to toggle between plain and rich text", "committedDate": "2020-10-08T07:36:16Z", "type": "commit"}, {"oid": "7d72744f4543fc0fb94ea4442d4320bf0b1fbd6e", "url": "https://github.com/TEAMMATES/teammates/commit/7d72744f4543fc0fb94ea4442d4320bf0b1fbd6e", "message": "Enable deletion of existing responses on change from rich to plain text", "committedDate": "2020-10-08T07:36:49Z", "type": "commit"}, {"oid": "7d72744f4543fc0fb94ea4442d4320bf0b1fbd6e", "url": "https://github.com/TEAMMATES/teammates/commit/7d72744f4543fc0fb94ea4442d4320bf0b1fbd6e", "message": "Enable deletion of existing responses on change from rich to plain text", "committedDate": "2020-10-08T07:36:49Z", "type": "forcePushed"}, {"oid": "5e44389e2402026e10b5c269f5472feda03740e1", "url": "https://github.com/TEAMMATES/teammates/commit/5e44389e2402026e10b5c269f5472feda03740e1", "message": "Fix lint", "committedDate": "2020-10-08T07:56:43Z", "type": "commit"}, {"oid": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11", "url": "https://github.com/TEAMMATES/teammates/commit/41b70c2a35808c93a4d65e5dd70fb51f45bc0f11", "message": "Retake snapshot", "committedDate": "2020-10-08T10:30:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNDUyOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502114528", "bodyText": "boolean variable can start with is,should,has,can\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private boolean allowRichText;\n          \n          \n            \n                private boolean shouldAllowRichText;", "author": "xpdavid", "createdAt": "2020-10-09T01:11:19Z", "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -13,19 +13,27 @@\n     @Nullable\n     private Integer recommendedLength;\n \n+    private boolean allowRichText;", "originalCommit": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjE2MDc0OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502160748", "bodyText": "I think the more important change needed here is boolean -> Boolean. @xpdavid you should know why.", "author": "wkurniawan07", "createdAt": "2020-10-09T03:10:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNDUyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI0NTYwOQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502245609", "bodyText": "@xpdavid\nUnderstand. Will just rename all.\n@wkurniawan07\nWhy is there a need to use Boxed type? Is it coz of the POJO requirement? Will change it regardless.", "author": "moziliar", "createdAt": "2020-10-09T07:42:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNDUyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0NzIxMw==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502847213", "bodyText": "Actual question detail is stored as serialized JSON string in DB. Putting as boolean should be fine as when the string is serialized back, the default constructor is called. So there will be no NPE here.", "author": "xpdavid", "createdAt": "2020-10-11T00:19:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNDUyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg2NDQ1NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502864455", "bodyText": "So it is fine boxed or unboxed? I tend to leave it boxed for consistency then... thanks for the info.", "author": "moziliar", "createdAt": "2020-10-11T04:38:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNDUyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg2OTUwNQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502869505", "bodyText": "Let do it Boxed to explicitly say the field is null for legacy data.", "author": "xpdavid", "createdAt": "2020-10-11T05:51:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNDUyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkxODExMg==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502918112", "bodyText": "Let do it Boxed to explicitly say the field is null for legacy data.\n\nWait so should I tag it Nullable? Hmm then how would the legacy data turn out to be?\nAnywhere else should I turn it into Boxed type? Or just at data layer?", "author": "moziliar", "createdAt": "2020-10-11T13:49:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNDUyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNTA3Mg==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502115072", "bodyText": "Take a look at how shouldChangesRequireResponseDeletion is called. Do you need cast operation here?", "author": "xpdavid", "createdAt": "2020-10-09T01:12:10Z", "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -13,19 +13,27 @@\n     @Nullable\n     private Integer recommendedLength;\n \n+    private boolean allowRichText;\n+\n     public FeedbackTextQuestionDetails() {\n         super(FeedbackQuestionType.TEXT);\n         recommendedLength = null;\n+        allowRichText = true;\n     }\n \n     public FeedbackTextQuestionDetails(String questionText) {\n         super(FeedbackQuestionType.TEXT, questionText);\n         recommendedLength = null;\n+        allowRichText = true;\n     }\n \n     @Override\n     public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {\n-        return false;\n+        assert newDetails instanceof FeedbackTextQuestionDetails;\n+\n+        // delete the existing response upon change from rich text allowed to disallowed\n+        // due to the effort to cleanup of HTML tags from the respondents\n+        return !((FeedbackTextQuestionDetails) newDetails).allowRichText && allowRichText;", "originalCommit": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjU2MDEyNA==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502560124", "bodyText": "teammates/src/main/java/teammates/common/datatransfer/questions/FeedbackContributionQuestionDetails.java\n    \n    \n        Lines 40 to 41\n      in\n      60400d6\n    \n    \n    \n    \n\n        \n          \n           FeedbackContributionQuestionDetails newContribDetails = (FeedbackContributionQuestionDetails) newDetails; \n        \n\n        \n          \n           return newContribDetails.isNotSureAllowed != this.isNotSureAllowed; \n        \n    \n  \n\n\nI refer to the above lines, where there is an explicit casting to get the ContributionQuestionDetails specific attributes. I assumed doing it inline like the above would not raise any eyebrows.", "author": "moziliar", "createdAt": "2020-10-09T16:59:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNTA3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjU2MDU2NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502560565", "bodyText": "And that this part needs to be extracted out, as the behaviour changes according to the exact values this attribute holds.", "author": "moziliar", "createdAt": "2020-10-09T17:00:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNTA3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0NjkwNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502846906", "bodyText": "My bad. It's fine then :D", "author": "xpdavid", "createdAt": "2020-10-11T00:15:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNTA3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNjk1NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502116955", "bodyText": "There are multiple places where you should add the new fields to the test data :D\n\nRecommend to write a script to that\nI should have said this change technically requires data migration. @madanalogy we should create post-issue step for this.", "author": "xpdavid", "createdAt": "2020-10-09T01:15:41Z", "path": "src/test/java/teammates/common/util/JsonUtilsTest.java", "diffHunk": "@@ -45,6 +45,7 @@ public void testFeedbackQuestionDetailsAdaptor_withComposedQuestionDetails_shoul\n                     + \"  \\\"feedbackSessionName\\\": \\\"testFeedbackSession\\\",\\n\"\n                     + \"  \\\"courseId\\\": \\\"testingCourse\\\",\\n\"\n                     + \"  \\\"questionDetails\\\": {\\n\"\n+                    + \"    \\\"allowRichText\\\": true,\\n\"", "originalCommit": "41b70c2a35808c93a4d65e5dd70fb51f45bc0f11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjE1OTE3NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502159175", "bodyText": "The change only affects question details for FeedbackText question types right?", "author": "madanalogy", "createdAt": "2020-10-09T03:03:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNjk1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjU2MTA1Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502561053", "bodyText": "@xpdavid Do I alter all the tests already? It does not seem to break the existing tests so I probably would have to use IDE lookup to update all.", "author": "moziliar", "createdAt": "2020-10-09T17:01:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNjk1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjU2MTQ0OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502561448", "bodyText": "@madanalogy Yes. It is part of FeedbackTextQuestionDetails. Totally contained like other attributes.", "author": "moziliar", "createdAt": "2020-10-09T17:02:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNjk1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0NjcyOQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r502846729", "bodyText": "Do I alter all the tests already?\n\nNo. See at least typicalDataBundle.json. Or we can edit the test files as post-data migration step (to \"simulate\" the legacy data format) @madanalogy your call :D", "author": "xpdavid", "createdAt": "2020-10-11T00:13:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjExNjk1NQ=="}], "type": "inlineReview"}, {"oid": "fb68cf454918895238a1d410904c2127bc583728", "url": "https://github.com/TEAMMATES/teammates/commit/fb68cf454918895238a1d410904c2127bc583728", "message": "Refactor naming of rich text option", "committedDate": "2020-10-09T17:36:12Z", "type": "commit"}, {"oid": "3d49279d18c6107bf4b55dd9c0a9ce2c185de47d", "url": "https://github.com/TEAMMATES/teammates/commit/3d49279d18c6107bf4b55dd9c0a9ce2c185de47d", "message": "Change boolean to Boxed type", "committedDate": "2020-10-10T02:27:49Z", "type": "commit"}, {"oid": "fbe912c6e2a839a0d4490491f491b3aa9d3618e0", "url": "https://github.com/TEAMMATES/teammates/commit/fbe912c6e2a839a0d4490491f491b3aa9d3618e0", "message": "Change CSS id to class", "committedDate": "2020-10-10T02:28:10Z", "type": "commit"}, {"oid": "31816776cdc9f8f6cbceb2b5ec6796fcd6602fe4", "url": "https://github.com/TEAMMATES/teammates/commit/31816776cdc9f8f6cbceb2b5ec6796fcd6602fe4", "message": "Fix lint", "committedDate": "2020-10-10T03:58:48Z", "type": "commit"}, {"oid": "fec4f48c8ec09dd5daaf46959719db02b382f030", "url": "https://github.com/TEAMMATES/teammates/commit/fec4f48c8ec09dd5daaf46959719db02b382f030", "message": "Localize change to text alignment in text qn edit details", "committedDate": "2020-10-11T13:58:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgzNzE3OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r509837178", "bodyText": "Should use Assumption (search on codebase for example) class as -ea is turned off in GAE.", "author": "xpdavid", "createdAt": "2020-10-22T02:09:33Z", "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -13,19 +13,27 @@\n     @Nullable\n     private Integer recommendedLength;\n \n+    private Boolean shouldAllowRichText;\n+\n     public FeedbackTextQuestionDetails() {\n         super(FeedbackQuestionType.TEXT);\n         recommendedLength = null;\n+        shouldAllowRichText = true;\n     }\n \n     public FeedbackTextQuestionDetails(String questionText) {\n         super(FeedbackQuestionType.TEXT, questionText);\n         recommendedLength = null;\n+        shouldAllowRichText = true;\n     }\n \n     @Override\n     public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {\n-        return false;\n+        assert newDetails instanceof FeedbackTextQuestionDetails;", "originalCommit": "fec4f48c8ec09dd5daaf46959719db02b382f030", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "109db46c2c074537d2587604fca765a51e94953c", "url": "https://github.com/TEAMMATES/teammates/commit/109db46c2c074537d2587604fca765a51e94953c", "message": "Change assert to Assumption", "committedDate": "2020-10-23T06:22:42Z", "type": "commit"}, {"oid": "2e54a3ce5bf94f0b31f994822d095a325ff8877b", "url": "https://github.com/TEAMMATES/teammates/commit/2e54a3ce5bf94f0b31f994822d095a325ff8877b", "message": "Remove unused lines", "committedDate": "2020-10-23T06:23:43Z", "type": "commit"}, {"oid": "1bca3de758731c93a81c24adafa3d5dc76090e20", "url": "https://github.com/TEAMMATES/teammates/commit/1bca3de758731c93a81c24adafa3d5dc76090e20", "message": "Add row to html", "committedDate": "2020-10-23T06:34:03Z", "type": "commit"}, {"oid": "c6f2d3fdd8355c5c14ef4dbcf1423e6369a68876", "url": "https://github.com/TEAMMATES/teammates/commit/c6f2d3fdd8355c5c14ef4dbcf1423e6369a68876", "message": "Fix indentation", "committedDate": "2020-10-23T06:36:05Z", "type": "commit"}, {"oid": "01cc0e2f4e312012f9fb0033da8062ed2b55c1ac", "url": "https://github.com/TEAMMATES/teammates/commit/01cc0e2f4e312012f9fb0033da8062ed2b55c1ac", "message": "Remove unnecessary state", "committedDate": "2020-10-23T06:39:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwNjU5Ng==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r513906596", "bodyText": "Minor: I think we should have a test case to check the field is set to true when it get constructed.", "author": "xpdavid", "createdAt": "2020-10-29T03:07:57Z", "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -6,26 +6,35 @@\n import javax.annotation.Nullable;\n \n import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;\n+import teammates.common.util.Assumption;\n import teammates.common.util.Const;\n \n public class FeedbackTextQuestionDetails extends FeedbackQuestionDetails {\n \n     @Nullable\n     private Integer recommendedLength;\n \n+    private Boolean shouldAllowRichText;\n+\n     public FeedbackTextQuestionDetails() {\n         super(FeedbackQuestionType.TEXT);\n         recommendedLength = null;\n+        shouldAllowRichText = true;", "originalCommit": "01cc0e2f4e312012f9fb0033da8062ed2b55c1ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "802c6f33a674fb963e25740e217c55a8049ca811", "url": "https://github.com/TEAMMATES/teammates/commit/802c6f33a674fb963e25740e217c55a8049ca811", "message": "Add test case for default rich text option", "committedDate": "2020-10-30T15:58:34Z", "type": "commit"}, {"oid": "23e940277ab2728571b1c61290193dd2c974c6e0", "url": "https://github.com/TEAMMATES/teammates/commit/23e940277ab2728571b1c61290193dd2c974c6e0", "message": "Add inline checkbox toggle", "committedDate": "2020-10-30T16:04:44Z", "type": "commit"}, {"oid": "6d5e14855006abc9c57a544e13177b0368281909", "url": "https://github.com/TEAMMATES/teammates/commit/6d5e14855006abc9c57a544e13177b0368281909", "message": "Merge branch 'master' into 10693-make-rich-text-for-essay-configurable", "committedDate": "2020-10-30T16:06:23Z", "type": "commit"}, {"oid": "1618c5dd74ab1d774e4e7da02e7c43fcc328a9a6", "url": "https://github.com/TEAMMATES/teammates/commit/1618c5dd74ab1d774e4e7da02e7c43fcc328a9a6", "message": "Update snapshot", "committedDate": "2020-10-31T02:22:29Z", "type": "commit"}, {"oid": "c5b20f9993cae7b24a3c55db8d89bfab60d40a93", "url": "https://github.com/TEAMMATES/teammates/commit/c5b20f9993cae7b24a3c55db8d89bfab60d40a93", "message": "Merge branch 'master' into 10693-make-rich-text-for-essay-configurable", "committedDate": "2020-11-10T01:24:17Z", "type": "commit"}, {"oid": "7123507b6db2c2bb39306ac708631e460425b2f8", "url": "https://github.com/TEAMMATES/teammates/commit/7123507b6db2c2bb39306ac708631e460425b2f8", "message": "Fix unit test", "committedDate": "2020-11-10T05:09:25Z", "type": "commit"}, {"oid": "9611b0beb7a097a9fe7d66a6c5965af2a8b363f2", "url": "https://github.com/TEAMMATES/teammates/commit/9611b0beb7a097a9fe7d66a6c5965af2a8b363f2", "message": "Fix lint", "committedDate": "2020-11-10T07:24:46Z", "type": "commit"}, {"oid": "210b9840990fc29262312af201ffee496d9d62b1", "url": "https://github.com/TEAMMATES/teammates/commit/210b9840990fc29262312af201ffee496d9d62b1", "message": "Merge branch 'master' into 10693-make-rich-text-for-essay-configurable", "committedDate": "2020-11-13T15:14:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjAwOTM1NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r532009355", "bodyText": "Since your variable is a boxed type instead of a primitive, would recommend following the same convention here (i.e. Boolean instead of boolean). Unless you've tried that and it doesn't work?", "author": "madanalogy", "createdAt": "2020-11-28T09:17:07Z", "path": "src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java", "diffHunk": "@@ -59,4 +68,12 @@ public Integer getRecommendedLength() {\n     public void setRecommendedLength(Integer recommendedLength) {\n         this.recommendedLength = recommendedLength;\n     }\n+\n+    public boolean getShouldAllowRichText() {\n+        return shouldAllowRichText;\n+    }\n+\n+    public void setShouldAllowRichText(boolean shouldAllowRichText) {", "originalCommit": "210b9840990fc29262312af201ffee496d9d62b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjUwOTE1MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10767#discussion_r536509150", "bodyText": "So sorry for the late reply too, just ended my semester with some leftover matters taken care of too. I have not tried it, but it must be an oversight from me that this remains as unboxed. Will change it.", "author": "moziliar", "createdAt": "2020-12-05T04:24:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjAwOTM1NQ=="}], "type": "inlineReview"}, {"oid": "068056384b64d5bb0cf37ab9955c7ee610181236", "url": "https://github.com/TEAMMATES/teammates/commit/068056384b64d5bb0cf37ab9955c7ee610181236", "message": "Change boolean to boxed type", "committedDate": "2020-12-05T04:25:58Z", "type": "commit"}, {"oid": "6a0a0d30974cef4cf307acdf53a9ae224319cb42", "url": "https://github.com/TEAMMATES/teammates/commit/6a0a0d30974cef4cf307acdf53a9ae224319cb42", "message": "Merge branch '10693-make-rich-text-for-essay-configurable' of https://github.com/moziliar/teammates into 10693-make-rich-text-for-essay-configurable", "committedDate": "2020-12-05T04:26:08Z", "type": "commit"}, {"oid": "ff347fa7c3913979e5c8fc95488806210cf23923", "url": "https://github.com/TEAMMATES/teammates/commit/ff347fa7c3913979e5c8fc95488806210cf23923", "message": "Merge branch 'master' into 10693-make-rich-text-for-essay-configurable", "committedDate": "2020-12-06T13:52:21Z", "type": "commit"}]}