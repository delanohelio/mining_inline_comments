{"pr_number": 10695, "pr_title": "[#10691] Weighted rubric question missing statistics ", "pr_createdAt": "2020-09-06T20:13:08Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10695", "timeline": [{"oid": "2504db327b50259ab62fc445aa61b579d09e6042", "url": "https://github.com/TEAMMATES/teammates/commit/2504db327b50259ab62fc445aa61b579d09e6042", "message": "Fix student result page rubric statistics", "committedDate": "2020-09-06T13:58:05Z", "type": "commit"}, {"oid": "68322e88937c14153d3976503031fc4dbb868c9c", "url": "https://github.com/TEAMMATES/teammates/commit/68322e88937c14153d3976503031fc4dbb868c9c", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into fix-rubric-statistics", "committedDate": "2020-09-06T20:05:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwOTcxNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10695#discussion_r489109716", "bodyText": "This might need some reviews as it might leak information", "author": "xpdavid", "createdAt": "2020-09-16T01:36:05Z", "path": "src/main/java/teammates/ui/webapi/output/SessionResultsData.java", "diffHunk": "@@ -144,15 +147,14 @@ private static ResponseOutput buildSingleResponseForStudent(\n         } else {\n             // we don't want student to figure out who is who by using the hash\n             recipientName = removeAnonymousHash(getRecipientNameOfResponse(response, bundle).getName());\n+            recipientTeam = bundle.getRoster().getInfoForIdentifier(response.getRecipient()).getTeamName();\n         }\n \n         // process comments\n         List<FeedbackResponseCommentAttributes> feedbackResponseComments =\n                 bundle.getResponseCommentsMap().getOrDefault(response.getId(), Collections.emptyList());\n         Queue<CommentOutput> comments = buildComments(feedbackResponseComments, bundle);\n \n-        // Student does not need to know the teams for giver and/or recipient\n-        // unless the student him/herself is the giver and/or recipient", "originalCommit": "68322e88937c14153d3976503031fc4dbb868c9c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTEzMzU4OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10695#discussion_r499133588", "bodyText": "Added a check that the recipient is not anonymous before adding the team name. Thus, there should not be any leaks as if the recipient is not anonymous there should not be any problem with knowing his team.", "author": "jtankw3", "createdAt": "2020-10-03T09:46:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwOTcxNg=="}], "type": "inlineReview"}, {"oid": "7c85d9e3a29aa9ec88c99a87de13de7353bb52b8", "url": "https://github.com/TEAMMATES/teammates/commit/7c85d9e3a29aa9ec88c99a87de13de7353bb52b8", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into fix-rubric-statistics", "committedDate": "2020-10-03T06:24:01Z", "type": "commit"}, {"oid": "a5586075d01523aa9bd10a5b6ff03090c306ef8d", "url": "https://github.com/TEAMMATES/teammates/commit/a5586075d01523aa9bd10a5b6ff03090c306ef8d", "message": "Add anonymous check for team name", "committedDate": "2020-10-03T08:23:04Z", "type": "commit"}, {"oid": "d938369740ee006f9ceb98344d22696019d60ee1", "url": "https://github.com/TEAMMATES/teammates/commit/d938369740ee006f9ceb98344d22696019d60ee1", "message": "Shift filtering of responses to single-statistic", "committedDate": "2020-10-03T08:38:18Z", "type": "commit"}, {"oid": "d94e3a103f434e3d0067316682d723f4d1492227", "url": "https://github.com/TEAMMATES/teammates/commit/d94e3a103f434e3d0067316682d723f4d1492227", "message": "Clean up boolean condition for rubric calculation", "committedDate": "2020-10-03T08:40:07Z", "type": "commit"}, {"oid": "989998cfe023952ddb6910f839d99e6c22e6350f", "url": "https://github.com/TEAMMATES/teammates/commit/989998cfe023952ddb6910f839d99e6c22e6350f", "message": "Use empty string instead of null of team names", "committedDate": "2020-10-03T09:21:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwMjQ0Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10695#discussion_r513902447", "bodyText": "Let me just confirm @damithc\nIs is ok to show team name when the name of student is visible?", "author": "xpdavid", "createdAt": "2020-10-29T02:59:24Z", "path": "src/main/java/teammates/ui/output/SessionResultsData.java", "diffHunk": "@@ -144,15 +146,16 @@ private static ResponseOutput buildSingleResponseForStudent(\n         } else {\n             // we don't want student to figure out who is who by using the hash\n             recipientName = removeAnonymousHash(getRecipientNameOfResponse(response, bundle).getName());\n+            if (!recipientName.contains(Const.DISPLAYED_NAME_FOR_ANONYMOUS_PARTICIPANT)) {", "originalCommit": "989998cfe023952ddb6910f839d99e6c22e6350f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwODkxNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10695#discussion_r513908916", "bodyText": "Yes,  I think so. If  the student name is known, no point hiding the team name as a student can only belong to one team and the instructor know which team that is.", "author": "damithc", "createdAt": "2020-10-29T03:13:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwMjQ0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDEwNzgzOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10695#discussion_r514107838", "bodyText": "@xpdavid Should I proceed to merge?", "author": "jtankw3", "createdAt": "2020-10-29T09:14:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwMjQ0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMjQ0Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10695#discussion_r514632447", "bodyText": "Sure \ud83d\udc4d", "author": "xpdavid", "createdAt": "2020-10-29T23:54:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwMjQ0Nw=="}], "type": "inlineReview"}, {"oid": "c9c35f296b4dccea11a58bc8c5d038f25948210a", "url": "https://github.com/TEAMMATES/teammates/commit/c9c35f296b4dccea11a58bc8c5d038f25948210a", "message": "Merge branch 'master' into fix-rubric-statistics", "committedDate": "2020-10-29T05:09:11Z", "type": "commit"}]}