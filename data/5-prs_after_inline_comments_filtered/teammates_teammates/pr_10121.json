{"pr_number": 10121, "pr_title": "[#10110] Updated CommentOutput to hide commentGiverName in JSON", "pr_createdAt": "2020-05-26T14:55:26Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10121", "timeline": [{"oid": "0267b768959021523b7b1bb7e074eb05986ec9ec", "url": "https://github.com/TEAMMATES/teammates/commit/0267b768959021523b7b1bb7e074eb05986ec9ec", "message": "updated CommentOutput to hide commentGiverName", "committedDate": "2020-05-26T14:49:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY1MzcxMw==", "url": "https://github.com/TEAMMATES/teammates/pull/10121#discussion_r430653713", "bodyText": "There are multiple things here:\n\nYou should hide not only the giver name but also the giver itself.\nYou should also hide lastEditorName and lastEditor\nWe only want to do so for participantComment. I think you can just blindly hiding the field without looking at the visibility for participant comment as the fields should not be used in the frontend.\nIf you want to follow the visibility, it should be the comment visibility not the response visibility.\n\nMaybe create a method here and call it when participantComment get constructed?", "author": "xpdavid", "createdAt": "2020-05-26T19:27:46Z", "path": "src/main/java/teammates/ui/webapi/output/SessionResultsData.java", "diffHunk": "@@ -352,7 +352,10 @@ public CommentOutput getParticipantComment() {\n \n         public CommentOutput(FeedbackResponseCommentAttributes frc, String commentGiverName, String lastEditorName) {\n             super(frc);\n-            this.commentGiverName = commentGiverName;\n+\n+            // If response is anonymous to everyone, then comment giver's name is also hidden.\n+            this.commentGiverName = (frc.showGiverNameTo.isEmpty()) ? null : commentGiverName;", "originalCommit": "0267b768959021523b7b1bb7e074eb05986ec9ec", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE1MTEyMg==", "url": "https://github.com/TEAMMATES/teammates/pull/10121#discussion_r431151122", "bodyText": "Updated to hide commentGiver, commentGiverName, lastEditorEmail, lastEditorName for participantComment.", "author": "Derek-Hardy", "createdAt": "2020-05-27T13:55:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY1MzcxMw=="}], "type": "inlineReview"}, {"oid": "d985d3b9410b12a1ca0a2470b082a99da2b3cd17", "url": "https://github.com/TEAMMATES/teammates/commit/d985d3b9410b12a1ca0a2470b082a99da2b3cd17", "message": "updated CommentOutput constructor to hide fields for participant comment", "committedDate": "2020-05-27T06:29:17Z", "type": "commit"}, {"oid": "90e813fcf7e16883eab6a73465cbb3d84a8e3f0e", "url": "https://github.com/TEAMMATES/teammates/commit/90e813fcf7e16883eab6a73465cbb3d84a8e3f0e", "message": "Merge branch 'master' into 10110-hide-fields-in-CommentOutput", "committedDate": "2020-05-28T01:27:10Z", "type": "commit"}]}