{"pr_number": 10311, "pr_title": "[#9536] Fix Instructor Course Edit Page E2E Test", "pr_createdAt": "2020-07-13T14:14:26Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10311", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNTI2MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10311#discussion_r454335261", "bodyText": "What event is being waited for here?", "author": "wkurniawan07", "createdAt": "2020-07-14T12:56:18Z", "path": "src/e2e/java/teammates/e2e/pageobjects/InstructorCourseEditPage.java", "diffHunk": "@@ -299,6 +299,7 @@ private void clickAddNewInstructorButton() {\n \n     private void clickEditInstructorButton(int instrNum) {\n         click(getEditInstructorButton(instrNum));\n+        waitForPageToLoad(true);", "originalCommit": "f853181a21a4445cfd2c1c46437d2e8e5492c7d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUxNDAyNw==", "url": "https://github.com/TEAMMATES/teammates/pull/10311#discussion_r454514027", "bodyText": "The custom privilege settings panel is removed from the DOM when not in edit mode. The wait is for the custom privilege settings panel to be loaded as the test is looking for the custom privilege settings panel immediately after clicking the edit button.", "author": "jtankw3", "createdAt": "2020-07-14T17:15:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNTI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgwMzg5NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10311#discussion_r454803895", "bodyText": "Then it's not exactly accurate to use waitForPageToLoad? It seems that the element to be waited here is very specific.", "author": "wkurniawan07", "createdAt": "2020-07-15T05:39:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNTI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI4MTk0Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10311#discussion_r455281947", "bodyText": "It seems I was wrong about why the test was failing. I tried to add a wait for the panel specifically but it did not work so well. The webdriver still throws missing element exception for the panel even though it is supposedly being waited for.\nI am not too sure what is the real root cause but my hunch is that the part of the test with toggling repeats the edit and save action too quickly, causing the get and wait of the webdriver to interact with the old elements which results in errors. Adding a slight delay between the toggles greatly reduced the error rate.", "author": "jtankw3", "createdAt": "2020-07-15T19:13:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNTI2MQ=="}], "type": "inlineReview"}, {"oid": "767825506cf0b96ab3506d8a8776bd75d774c82d", "url": "https://github.com/TEAMMATES/teammates/commit/767825506cf0b96ab3506d8a8776bd75d774c82d", "message": "Adjust wait to help flakiness", "committedDate": "2020-07-15T17:23:05Z", "type": "forcePushed"}, {"oid": "704fdede0a0f2dd910fec0fcfc3ee19561cc2086", "url": "https://github.com/TEAMMATES/teammates/commit/704fdede0a0f2dd910fec0fcfc3ee19561cc2086", "message": "Adjust wait to help flakiness", "committedDate": "2020-07-15T18:43:36Z", "type": "commit"}, {"oid": "704fdede0a0f2dd910fec0fcfc3ee19561cc2086", "url": "https://github.com/TEAMMATES/teammates/commit/704fdede0a0f2dd910fec0fcfc3ee19561cc2086", "message": "Adjust wait to help flakiness", "committedDate": "2020-07-15T18:43:36Z", "type": "forcePushed"}, {"oid": "51af95bb725a55e150b29d31c6fcf16a20d81837", "url": "https://github.com/TEAMMATES/teammates/commit/51af95bb725a55e150b29d31c6fcf16a20d81837", "message": "Merge branch 'master' into fix-instructor-course-edit", "committedDate": "2020-07-18T09:13:39Z", "type": "commit"}]}