{"pr_number": 10637, "pr_title": "[#10634] Run component tests only once in CI", "pr_createdAt": "2020-08-23T18:00:35Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10637", "timeline": [{"oid": "2e51704228946cd6bf3a6ad442d0c7235ba83693", "url": "https://github.com/TEAMMATES/teammates/commit/2e51704228946cd6bf3a6ad442d0c7235ba83693", "message": "Move isTravis and isAppVeyor variables to correct place", "committedDate": "2020-08-24T17:30:37Z", "type": "forcePushed"}, {"oid": "2495d3243407e95a6f45c3963a9708cc7e4b52ca", "url": "https://github.com/TEAMMATES/teammates/commit/2495d3243407e95a6f45c3963a9708cc7e4b52ca", "message": "Remove unused failedTests configuration", "committedDate": "2020-08-28T18:06:10Z", "type": "commit"}, {"oid": "d5eea955160574d202a004e908ccab899e9cda4a", "url": "https://github.com/TEAMMATES/teammates/commit/d5eea955160574d202a004e908ccab899e9cda4a", "message": "Run component tests only once", "committedDate": "2020-08-28T18:06:10Z", "type": "commit"}, {"oid": "477cbe294890d221d6915de8e434cdc863ba5ea9", "url": "https://github.com/TEAMMATES/teammates/commit/477cbe294890d221d6915de8e434cdc863ba5ea9", "message": "Improve E2E test instructions", "committedDate": "2020-08-28T18:06:10Z", "type": "commit"}, {"oid": "22446dff679908b8d07927cc2aae529ccb10a136", "url": "https://github.com/TEAMMATES/teammates/commit/22446dff679908b8d07927cc2aae529ccb10a136", "message": "Add short wait for time-sensitive tests", "committedDate": "2020-08-28T18:06:10Z", "type": "commit"}, {"oid": "980379b57b0bd1615e06c9bd8ba25ef332ceb3da", "url": "https://github.com/TEAMMATES/teammates/commit/980379b57b0bd1615e06c9bd8ba25ef332ceb3da", "message": "Remove unnecessary deprecation warning", "committedDate": "2020-08-28T18:06:10Z", "type": "commit"}, {"oid": "39ede750bf0a2e91dd7f5355e1049681eb7a893a", "url": "https://github.com/TEAMMATES/teammates/commit/39ede750bf0a2e91dd7f5355e1049681eb7a893a", "message": "Move isTravis and isAppVeyor variables to correct place", "committedDate": "2020-08-28T18:06:10Z", "type": "commit"}, {"oid": "39ede750bf0a2e91dd7f5355e1049681eb7a893a", "url": "https://github.com/TEAMMATES/teammates/commit/39ede750bf0a2e91dd7f5355e1049681eb7a893a", "message": "Move isTravis and isAppVeyor variables to correct place", "committedDate": "2020-08-28T18:06:10Z", "type": "forcePushed"}, {"oid": "71234a614cae11b9020d3be67b852804d4ca0c44", "url": "https://github.com/TEAMMATES/teammates/commit/71234a614cae11b9020d3be67b852804d4ca0c44", "message": "Update outdated test instructions and remove mentions to * green", "committedDate": "2020-08-29T01:14:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTgzNTE0Mg==", "url": "https://github.com/TEAMMATES/teammates/pull/10637#discussion_r479835142", "bodyText": "I am a bit worrying about adding checks like this for some reasons:\n\nYou don't know when you should add the operation (all read-after-write so some cases)\nThe checks might be brittle\n\nMight be we want to turn on the strong consistency settings for local testing.", "author": "xpdavid", "createdAt": "2020-08-31T00:18:38Z", "path": "src/test/java/teammates/test/cases/automated/FeedbackSessionClosingRemindersActionTest.java", "diffHunk": "@@ -94,6 +95,9 @@ public void allTests() throws Exception {\n         session3.setSentOpenEmail(false); // fsLogic will set the flag to true\n         verifyPresentInDatastore(session3);\n \n+        // wait for very briefly so that the above session will be within the time limit\n+        ThreadHelper.waitFor(5);", "originalCommit": "22446dff679908b8d07927cc2aae529ccb10a136", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTgzNzg4MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10637#discussion_r479837880", "bodyText": "The check is not brittle, and this has nothing to do with weak/strong consistency. You only need to guarantee a one millisecond wait between when the session closing time is updated to be (now + 1 day) and when the action which queries the session is called. In some environments (especially AppVeyor) the time taken between the two blocks is apparently less than 1ms.", "author": "wkurniawan07", "createdAt": "2020-08-31T00:39:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTgzNTE0Mg=="}], "type": "inlineReview"}, {"oid": "b601230918685469791578755c7e82891a0963cd", "url": "https://github.com/TEAMMATES/teammates/commit/b601230918685469791578755c7e82891a0963cd", "message": "Merge branch 'master' into run-tests-once", "committedDate": "2020-08-31T06:50:17Z", "type": "commit"}]}