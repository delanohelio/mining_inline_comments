{"pr_number": 10018, "pr_title": "[#9946] Migrate to new admin search endpoint", "pr_createdAt": "2020-04-12T14:37:16Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10018", "timeline": [{"oid": "28fa8a2c9243b1318b8166df399e314ee1cf0c0a", "url": "https://github.com/TEAMMATES/teammates/commit/28fa8a2c9243b1318b8166df399e314ee1cf0c0a", "message": "test", "committedDate": "2020-04-13T14:15:06Z", "type": "forcePushed"}, {"oid": "4effd646fffd8d2630de6f93ccf57ce3ea7c90f8", "url": "https://github.com/TEAMMATES/teammates/commit/4effd646fffd8d2630de6f93ccf57ce3ea7c90f8", "message": "fix", "committedDate": "2020-04-13T14:58:15Z", "type": "forcePushed"}, {"oid": "05b4d1bfa5d745d1825f3fa9d3070b1787e3391f", "url": "https://github.com/TEAMMATES/teammates/commit/05b4d1bfa5d745d1825f3fa9d3070b1787e3391f", "message": "Test", "committedDate": "2020-04-14T04:44:07Z", "type": "forcePushed"}, {"oid": "9e25ee3ad0e170800eb3cd69735151a6daea50af", "url": "https://github.com/TEAMMATES/teammates/commit/9e25ee3ad0e170800eb3cd69735151a6daea50af", "message": "Fix", "committedDate": "2020-04-14T09:30:43Z", "type": "forcePushed"}, {"oid": "c51c632e94f07c84f6ae734f249d3c1a09aefe3b", "url": "https://github.com/TEAMMATES/teammates/commit/c51c632e94f07c84f6ae734f249d3c1a09aefe3b", "message": "FINALLY", "committedDate": "2020-04-14T12:01:58Z", "type": "forcePushed"}, {"oid": "83cf947f624350a9d08cee91b32c5e20e5d8e97c", "url": "https://github.com/TEAMMATES/teammates/commit/83cf947f624350a9d08cee91b32c5e20e5d8e97c", "message": "Migrate to the new admin search point and update E2E tests", "committedDate": "2020-04-17T03:58:20Z", "type": "forcePushed"}, {"oid": "2d4afeb284c10cdbb04fd6bcd4d4b6854ae211e8", "url": "https://github.com/TEAMMATES/teammates/commit/2d4afeb284c10cdbb04fd6bcd4d4b6854ae211e8", "message": "Migrate to the new admin search point and update E2E tests", "committedDate": "2020-04-17T04:00:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY1NjkzNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10018#discussion_r410656936", "bodyText": "Can we use empty string instead of undefined? Why the undefined is there in the first place?", "author": "xpdavid", "createdAt": "2020-04-18T06:33:31Z", "path": "src/e2e/java/teammates/e2e/cases/e2e/AdminSearchPageE2ETest.java", "diffHunk": "@@ -177,17 +178,17 @@ private void verifyInstructorRowContent(InstructorAttributes instructor, Account\n     }\n \n     private String getExpectedInstructorHomePageLink(InstructorAttributes instructor) {\n-        return instructor.isRegistered() ? createUrl(Const.WebPageURIs.INSTRUCTOR_HOME_PAGE)\n-                .withUserId(instructor.googleId)\n-                .toAbsoluteString()\n-                : \"\";\n+        String googleId = instructor.isRegistered() ? instructor.googleId : \"undefined\";", "originalCommit": "2d4afeb284c10cdbb04fd6bcd4d4b6854ae211e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY3MjU0Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10018#discussion_r410672543", "bodyText": "Yep, we can, we can even remove the param if its value its an empty string, which I use another function in link.service.ts to fix", "author": "hcwong", "createdAt": "2020-04-18T09:10:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY1NjkzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY1Njk1NA==", "url": "https://github.com/TEAMMATES/teammates/pull/10018#discussion_r410656954", "bodyText": "Same here", "author": "xpdavid", "createdAt": "2020-04-18T06:33:39Z", "path": "src/e2e/java/teammates/e2e/cases/e2e/AdminSearchPageE2ETest.java", "diffHunk": "@@ -177,17 +178,17 @@ private void verifyInstructorRowContent(InstructorAttributes instructor, Account\n     }\n \n     private String getExpectedInstructorHomePageLink(InstructorAttributes instructor) {\n-        return instructor.isRegistered() ? createUrl(Const.WebPageURIs.INSTRUCTOR_HOME_PAGE)\n-                .withUserId(instructor.googleId)\n-                .toAbsoluteString()\n-                : \"\";\n+        String googleId = instructor.isRegistered() ? instructor.googleId : \"undefined\";\n+        return createUrl(Const.WebPageURIs.INSTRUCTOR_HOME_PAGE)\n+                .withUserId(googleId)\n+                .toAbsoluteString();\n     }\n \n     private String getExpectedInstructorManageAccountLink(InstructorAttributes instructor) {\n-        return instructor.isRegistered() ? createUrl(Const.WebPageURIs.ADMIN_ACCOUNTS_PAGE)\n-                .withInstructorId(instructor.googleId)\n-                .toAbsoluteString()\n-                : \"\";\n+        String googleId = instructor.isRegistered() ? instructor.googleId : \"undefined\";", "originalCommit": "2d4afeb284c10cdbb04fd6bcd4d4b6854ae211e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY3MjYzNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10018#discussion_r410672636", "bodyText": "Yep, I just didn't add a destructuring default value, so adding a default value prevents the stringified form of undefined from appearing, fixed", "author": "hcwong", "createdAt": "2020-04-18T09:11:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY1Njk1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY1NzA1OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10018#discussion_r410657058", "bodyText": "So it should be change to verifyAccessibleForAdmin?", "author": "xpdavid", "createdAt": "2020-04-18T06:34:34Z", "path": "src/test/java/teammates/test/cases/webapi/GetCourseActionTest.java", "diffHunk": "@@ -178,7 +178,6 @@ protected void testAccessControl_testStudentAccess_shouldPass() {\n         verifyInaccessibleWithoutLogin(submissionParams);\n         verifyInaccessibleForUnregisteredUsers(submissionParams);\n         verifyInaccessibleForInstructors(submissionParams);\n-        verifyInaccessibleForAdmin(submissionParams);", "originalCommit": "2d4afeb284c10cdbb04fd6bcd4d4b6854ae211e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY3MjY3NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10018#discussion_r410672675", "bodyText": "Yea, should have done this welp thanks, fixed!", "author": "hcwong", "createdAt": "2020-04-18T09:11:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY1NzA1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY1NzA2OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10018#discussion_r410657068", "bodyText": "Same here", "author": "xpdavid", "createdAt": "2020-04-18T06:34:40Z", "path": "src/test/java/teammates/test/cases/webapi/GetFeedbackSessionsActionTest.java", "diffHunk": "@@ -269,11 +269,6 @@ protected void testAccessControl() throws Exception {\n         loginAsStudentInstructor(instructor1OfCourse1.googleId);\n         verifyCanAccess(courseParam);\n \n-        String[] adminEntityParam = {\n-                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.ADMIN,\n-        };\n-\n-        verifyInaccessibleForAdmin(adminEntityParam);", "originalCommit": "2d4afeb284c10cdbb04fd6bcd4d4b6854ae211e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY1NzA3Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10018#discussion_r410657073", "bodyText": "Same here", "author": "xpdavid", "createdAt": "2020-04-18T06:34:45Z", "path": "src/test/java/teammates/test/cases/webapi/GetInstructorPrivilegeActionTest.java", "diffHunk": "@@ -410,7 +410,6 @@ protected void testAccessControl() throws Exception {\n         verifyInaccessibleWithoutLogin(submissionParams);\n         verifyInaccessibleForUnregisteredUsers(submissionParams);\n         verifyInaccessibleForStudents(submissionParams);\n-        verifyInaccessibleForAdmin(submissionParams);", "originalCommit": "2d4afeb284c10cdbb04fd6bcd4d4b6854ae211e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a478dc3783e92c561cfaa3d507285d3bfe528c9f", "url": "https://github.com/TEAMMATES/teammates/commit/a478dc3783e92c561cfaa3d507285d3bfe528c9f", "message": "Migrate to the new admin search point and update E2E tests", "committedDate": "2020-04-20T16:46:05Z", "type": "commit"}, {"oid": "7aaab4b46b8ccfac3fe4522036d08ae8e570203f", "url": "https://github.com/TEAMMATES/teammates/commit/7aaab4b46b8ccfac3fe4522036d08ae8e570203f", "message": "Fix comments", "committedDate": "2020-04-20T16:46:05Z", "type": "commit"}, {"oid": "eac5eb51e09137eff0d04f8c52729f400a011ee3", "url": "https://github.com/TEAMMATES/teammates/commit/eac5eb51e09137eff0d04f8c52729f400a011ee3", "message": "Fix link service to remove empty param values", "committedDate": "2020-04-20T16:46:05Z", "type": "commit"}, {"oid": "94e8aa71b30e37bb8fdc9a41defb9141e316a033", "url": "https://github.com/TEAMMATES/teammates/commit/94e8aa71b30e37bb8fdc9a41defb9141e316a033", "message": "Fix linting", "committedDate": "2020-04-20T16:46:05Z", "type": "commit"}, {"oid": "e43369c29a5622196561ee97121a68a1900dae60", "url": "https://github.com/TEAMMATES/teammates/commit/e43369c29a5622196561ee97121a68a1900dae60", "message": "remove line", "committedDate": "2020-04-20T16:46:05Z", "type": "commit"}, {"oid": "0294d0e9e4bc6aad81d7871b654465d3f3c4e9a1", "url": "https://github.com/TEAMMATES/teammates/commit/0294d0e9e4bc6aad81d7871b654465d3f3c4e9a1", "message": "Fix indentation", "committedDate": "2020-04-20T16:46:05Z", "type": "commit"}, {"oid": "0294d0e9e4bc6aad81d7871b654465d3f3c4e9a1", "url": "https://github.com/TEAMMATES/teammates/commit/0294d0e9e4bc6aad81d7871b654465d3f3c4e9a1", "message": "Fix indentation", "committedDate": "2020-04-20T16:46:05Z", "type": "forcePushed"}, {"oid": "64fe9759b608f91f3c146f5daeb747f061be60f8", "url": "https://github.com/TEAMMATES/teammates/commit/64fe9759b608f91f3c146f5daeb747f061be60f8", "message": "Refactor filterEmptyParam to navigationService", "committedDate": "2020-04-20T17:05:53Z", "type": "commit"}, {"oid": "8f1efd47c7f0e6ca004ecba27be9e80b5a8b1d38", "url": "https://github.com/TEAMMATES/teammates/commit/8f1efd47c7f0e6ca004ecba27be9e80b5a8b1d38", "message": "fix linter errors", "committedDate": "2020-04-20T17:12:13Z", "type": "commit"}, {"oid": "20a6aa51c90ce430a70c07884eefc8cf1a22fc85", "url": "https://github.com/TEAMMATES/teammates/commit/20a6aa51c90ce430a70c07884eefc8cf1a22fc85", "message": "remove unnecessary empty line", "committedDate": "2020-04-20T17:13:54Z", "type": "commit"}, {"oid": "a1de0c7f334df1a4f49a80c80b82f0f2f404f642", "url": "https://github.com/TEAMMATES/teammates/commit/a1de0c7f334df1a4f49a80c80b82f0f2f404f642", "message": "Move filterEmptyParam logic back to link service", "committedDate": "2020-04-21T01:10:38Z", "type": "commit"}]}