{"pr_number": 10680, "pr_title": "[#10598] Combine teammates.ui.automated and teammates.ui.webapi into unified REST API package", "pr_createdAt": "2020-09-02T01:34:39Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10680", "timeline": [{"oid": "245ab2e265a9a816f9ce9a8be84836f449744ee2", "url": "https://github.com/TEAMMATES/teammates/commit/245ab2e265a9a816f9ce9a8be84836f449744ee2", "message": "Use proper subclass of ActionResult for all Action classes", "committedDate": "2020-09-04T07:43:28Z", "type": "forcePushed"}, {"oid": "68552f05b17fac0341d97c8f42827cc4ea7e29e8", "url": "https://github.com/TEAMMATES/teammates/commit/68552f05b17fac0341d97c8f42827cc4ea7e29e8", "message": "Use proper subclass of ActionResult for all Action classes", "committedDate": "2020-09-06T01:24:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA5NTg4NA==", "url": "https://github.com/TEAMMATES/teammates/pull/10680#discussion_r484095884", "bodyText": "Should we put the request object into another package as it will incorrectly be synced to the frontend.", "author": "xpdavid", "createdAt": "2020-09-06T17:38:46Z", "path": "src/main/java/teammates/ui/webapi/request/FeedbackSessionRemindRequest.java", "diffHunk": "@@ -0,0 +1,45 @@\n+package teammates.ui.webapi.request;\n+\n+/**\n+ * The request of specifying reminder emails to be sent.\n+ */\n+public class FeedbackSessionRemindRequest extends BasicRequest {", "originalCommit": "d165c3f048ce043ec1d38328572bda728f87000f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDEzMDQ4OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10680#discussion_r484130488", "bodyText": "I don't see this as a good reason. Yes it will be synced to the front-end, but it is not incorrect unless someone decides to incorrectly use it (which should be caught during E2E test).", "author": "wkurniawan07", "createdAt": "2020-09-06T23:51:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA5NTg4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA5NjMyOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10680#discussion_r484096328", "bodyText": "If we allow both parameters and body, shouldn't that be more consistent with the REST API", "author": "xpdavid", "createdAt": "2020-09-06T17:43:00Z", "path": "src/main/java/teammates/logic/core/TaskQueuesLogic.java", "diffHunk": "@@ -35,13 +36,18 @@ public void addDeferredTask(TaskWrapper task, long countdownTime) {\n             taskToBeAdded.countdownMillis(countdownTime);\n         }\n \n-        for (Map.Entry<String, String[]> entry : task.getParamMap().entrySet()) {\n-            String name = entry.getKey();\n-            String[] values = entry.getValue();\n+        // Task queue API only allows either parameter map or body, not both", "originalCommit": "fa92fe907c46a2f18efb69c06eee6fa32245a17e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDEzMDUzMg==", "url": "https://github.com/TEAMMATES/teammates/pull/10680#discussion_r484130532", "bodyText": "No, that's not the issue. By \"task queue API\" I am referring to GAE's API. If they allow both I would have allowed both.", "author": "wkurniawan07", "createdAt": "2020-09-06T23:51:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA5NjMyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA5NjM5OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10680#discussion_r484096399", "bodyText": "Of course, we want to disallow the body for GET.", "author": "xpdavid", "createdAt": "2020-09-06T17:44:02Z", "path": "src/main/java/teammates/ui/webapi/action/ActionFactory.java", "diffHunk": "@@ -116,10 +118,38 @@\n         map(ResourceURIs.STUDENT_PROFILE_PICTURE, DELETE, DeleteStudentProfilePictureAction.class);\n         map(ResourceURIs.INSTRUCTOR, PUT, UpdateInstructorAction.class);\n         map(ResourceURIs.INSTRUCTOR, POST, CreateInstructorAction.class);\n+\n+        // Cron jobs; use GET request", "originalCommit": "e7cffc495a8945359040eb388c428f9f7e54bbbd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDEzMDU2OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10680#discussion_r484130569", "bodyText": "Not the issue either. Cron jobs using GET is a prescribed condition from GAE. Same thing with task queue using POST.", "author": "wkurniawan07", "createdAt": "2020-09-06T23:51:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA5NjM5OQ=="}], "type": "inlineReview"}, {"oid": "c234e787e665f68d1dd9df1f51ea488ee4e87c81", "url": "https://github.com/TEAMMATES/teammates/commit/c234e787e665f68d1dd9df1f51ea488ee4e87c81", "message": "Use proper subclass of ActionResult for all Action classes", "committedDate": "2020-09-08T15:08:18Z", "type": "forcePushed"}, {"oid": "dc5a2003d44ecf8fdf5b2f31d77d5c50d4b5d735", "url": "https://github.com/TEAMMATES/teammates/commit/dc5a2003d44ecf8fdf5b2f31d77d5c50d4b5d735", "message": "Use proper subclass of ActionResult for all Action classes", "committedDate": "2020-09-12T02:20:59Z", "type": "forcePushed"}, {"oid": "dd25aeebb0d3a56320fe70b26f69aac955da6c0a", "url": "https://github.com/TEAMMATES/teammates/commit/dd25aeebb0d3a56320fe70b26f69aac955da6c0a", "message": "Use proper subclass of ActionResult for all Action classes", "committedDate": "2020-09-13T02:53:32Z", "type": "forcePushed"}, {"oid": "33f54fff81944f0d131d4ae4b0cae407472093c0", "url": "https://github.com/TEAMMATES/teammates/commit/33f54fff81944f0d131d4ae4b0cae407472093c0", "message": "Use proper subclass of ActionResult for all Action classes", "committedDate": "2020-09-14T13:59:03Z", "type": "forcePushed"}, {"oid": "b9192b4f10a5174b99191f4515065da0cca133cc", "url": "https://github.com/TEAMMATES/teammates/commit/b9192b4f10a5174b99191f4515065da0cca133cc", "message": "Add AdminOnlyAction class", "committedDate": "2020-09-16T04:01:07Z", "type": "commit"}, {"oid": "2b608f121fe6e77f449f42926ca162456e0f2e02", "url": "https://github.com/TEAMMATES/teammates/commit/2b608f121fe6e77f449f42926ca162456e0f2e02", "message": "Merge automated actions to webapi", "committedDate": "2020-09-16T04:01:08Z", "type": "commit"}, {"oid": "ecee4ef4ddbcb3b4548cf7f0b6c02ed32539d741", "url": "https://github.com/TEAMMATES/teammates/commit/ecee4ef4ddbcb3b4548cf7f0b6c02ed32539d741", "message": "Add request body field for TaskWrapper", "committedDate": "2020-09-16T04:01:08Z", "type": "commit"}, {"oid": "4dab57a095ea7d6f6c787fbc62efdd4796bea1f9", "url": "https://github.com/TEAMMATES/teammates/commit/4dab57a095ea7d6f6c787fbc62efdd4796bea1f9", "message": "Standardize parameter name for course ID and session name", "committedDate": "2020-09-16T04:01:08Z", "type": "commit"}, {"oid": "c7e194610a466370d72fc5825552afeaa37ae75a", "url": "https://github.com/TEAMMATES/teammates/commit/c7e194610a466370d72fc5825552afeaa37ae75a", "message": "Use request body for some automated actions", "committedDate": "2020-09-16T04:01:08Z", "type": "commit"}, {"oid": "0f0adb199b8486f23927bf2277d71bc466fb4b1c", "url": "https://github.com/TEAMMATES/teammates/commit/0f0adb199b8486f23927bf2277d71bc466fb4b1c", "message": "Deprecate multivalue parameter map for TaskWrapper, Action, BackDoor class", "committedDate": "2020-09-16T04:01:08Z", "type": "commit"}, {"oid": "9a0fcedc9128c1e051f4384e8e7d44b24c2cc4ea", "url": "https://github.com/TEAMMATES/teammates/commit/9a0fcedc9128c1e051f4384e8e7d44b24c2cc4ea", "message": "Rename ui.webapi.* to ui.*", "committedDate": "2020-09-16T04:01:09Z", "type": "commit"}, {"oid": "ffdb5695b4411858e6473ac463c0cbadd3d5b3de", "url": "https://github.com/TEAMMATES/teammates/commit/ffdb5695b4411858e6473ac463c0cbadd3d5b3de", "message": "Use proper subclass of ActionResult for all Action classes", "committedDate": "2020-09-16T04:01:09Z", "type": "commit"}, {"oid": "ffdb5695b4411858e6473ac463c0cbadd3d5b3de", "url": "https://github.com/TEAMMATES/teammates/commit/ffdb5695b4411858e6473ac463c0cbadd3d5b3de", "message": "Use proper subclass of ActionResult for all Action classes", "committedDate": "2020-09-16T04:01:09Z", "type": "forcePushed"}]}