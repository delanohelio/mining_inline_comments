{"pr_number": 1498, "pr_title": "SOLR-14351: commitScheduler was missing MDC logging", "pr_createdAt": "2020-05-08T05:14:56Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1498", "timeline": [{"oid": "a070d26d03e3fe15c8aa9dad868e607a30edda2a", "url": "https://github.com/apache/lucene-solr/commit/a070d26d03e3fe15c8aa9dad868e607a30edda2a", "message": "SOLR-14351: commitScheduler was missing MDC logging", "committedDate": "2020-05-08T04:55:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcyMjIwOQ==", "url": "https://github.com/apache/lucene-solr/pull/1498#discussion_r422722209", "bodyText": "Is there an issue for improving ExecutorUtil for this?", "author": "madrob", "createdAt": "2020-05-11T00:16:40Z", "path": "solr/core/src/java/org/apache/solr/update/CommitTracker.java", "diffHunk": "@@ -57,8 +58,10 @@\n   private int docsUpperBound;\n   private long timeUpperBound;\n   private long tLogFileSizeUpperBound;\n-  \n-  private final ScheduledExecutorService scheduler = \n+\n+  // note: can't use ExecutorsUtil because it doesn't have a *scheduled* ExecutorService.\n+  //  Not a big deal but it means we must take care of MDC logging here.", "originalCommit": "a070d26d03e3fe15c8aa9dad868e607a30edda2a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcyNDE2Nw==", "url": "https://github.com/apache/lucene-solr/pull/1498#discussion_r422724167", "bodyText": "I thought of that.  There isn't much need for a ScheduledExecutorService throughout Solr, and it'd probably add a bunch of code over in ExecutorsUtil to add one.  I looked at all that ExecutorsUtil does which is kind of a ton and thought all I really want here is a basic MDC to set the core for logging and that's it.  That said, if you think the usage here ought to be doing more than just this, then we should probably go add stuff to ExecutorsUtil for the Scheduled case.", "author": "dsmiley", "createdAt": "2020-05-11T00:30:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcyMjIwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDY5MzY4NQ==", "url": "https://github.com/apache/lucene-solr/pull/1498#discussion_r424693685", "bodyText": "I think it's fine.", "author": "madrob", "createdAt": "2020-05-13T19:54:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcyMjIwOQ=="}], "type": "inlineReview"}]}