{"pr_number": 1369, "pr_title": "SOLR-14213: Allow enabling shared store to be scriptable", "pr_createdAt": "2020-03-21T01:52:42Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1369", "timeline": [{"oid": "0dd231532287914a453164753f8349d8ef17af8b", "url": "https://github.com/apache/lucene-solr/commit/0dd231532287914a453164753f8349d8ef17af8b", "message": "Allow enabling shared store to be scriptable", "committedDate": "2020-03-21T01:44:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY0OTAzNg==", "url": "https://github.com/apache/lucene-solr/pull/1369#discussion_r396649036", "bodyText": "fyi I moved the actual initialization method from SharedStoreConfig to SolrXmlConfig to avoid duplicating the existing field extraction methods or changing their visibility and so it aligns with how the rest of the section objects are being created. I've kept the SharedStoreConfig since I anticipate we'll start using it once we complete the enabling configurable's work.", "author": "andyvuong", "createdAt": "2020-03-23T18:00:51Z", "path": "solr/core/src/java/org/apache/solr/core/SolrXmlConfig.java", "diffHunk": "@@ -568,4 +568,17 @@ private static PluginInfo getTracerPluginInfo(XmlConfigFile config) {\n     Node node = config.getNode(\"solr/tracerConfig\", false);\n     return (node == null) ? null : new PluginInfo(node, \"tracerConfig\", false, true);\n   }\n+  \n+  private static SharedStoreConfig loadSharedStoreConfig(NamedList<Object> nl) {", "originalCommit": "0dd231532287914a453164753f8349d8ef17af8b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5Mzc3MA==", "url": "https://github.com/apache/lucene-solr/pull/1369#discussion_r398893770", "bodyText": "Maybe it works for now, but later we might want to properly add an enabled property to SharedStoreConfig and create SharedStoreConfig even enabled is false.", "author": "mbwaheed", "createdAt": "2020-03-26T21:08:11Z", "path": "solr/core/src/java/org/apache/solr/core/SolrXmlConfig.java", "diffHunk": "@@ -568,4 +568,17 @@ private static PluginInfo getTracerPluginInfo(XmlConfigFile config) {\n     Node node = config.getNode(\"solr/tracerConfig\", false);\n     return (node == null) ? null : new PluginInfo(node, \"tracerConfig\", false, true);\n   }\n+  \n+  private static SharedStoreConfig loadSharedStoreConfig(NamedList<Object> nl) {\n+    if (nl == null) {\n+      // shared store is not configured\n+      return null;\n+    } \n+    boolean enabled = Boolean.parseBoolean(\n+        required(\"sharedStore\", \"sharedStoreEnabled\", removeValue(nl, \"sharedStoreEnabled\")));\n+    if (enabled) {\n+      return new SharedStoreConfig();\n+    }", "originalCommit": "0dd231532287914a453164753f8349d8ef17af8b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}