{"pr_number": 1296, "pr_title": "LUCENE-9253: Support custom dictionaries in KoreanTokenizer", "pr_createdAt": "2020-02-27T17:59:02Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1296", "timeline": [{"oid": "bd194278c2b66896827192c2f6e1c7492b777baf", "url": "https://github.com/apache/lucene-solr/commit/bd194278c2b66896827192c2f6e1c7492b777baf", "message": "support custom system dictionary and unknown dictionary in KoreanTokenizer\n\nSigned-off-by: Namgyu Kim <namgyu@apache.org>", "committedDate": "2020-02-27T17:35:06Z", "type": "commit"}, {"oid": "d5e44e95175dbf027915e162925057bbcc14200b", "url": "https://github.com/apache/lucene-solr/commit/d5e44e95175dbf027915e162925057bbcc14200b", "message": "fix wrong tag in javadoc\n\nSigned-off-by: Namgyu Kim <kng0828@gmail.com>", "committedDate": "2020-02-27T18:12:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEwNzc2OQ==", "url": "https://github.com/apache/lucene-solr/pull/1296#discussion_r386107769", "bodyText": "Don't capitalize \"If\"", "author": "msokolov", "createdAt": "2020-03-01T13:21:06Z", "path": "lucene/analysis/nori/src/java/org/apache/lucene/analysis/ko/KoreanTokenizer.java", "diffHunk": "@@ -185,16 +185,43 @@ public KoreanTokenizer(AttributeFactory factory, UserDictionary userDictionary,\n    * @param discardPunctuation true if punctuation tokens should be dropped from the output.\n    */\n   public KoreanTokenizer(AttributeFactory factory, UserDictionary userDictionary, DecompoundMode mode, boolean outputUnknownUnigrams, boolean discardPunctuation) {\n+    this(factory,\n+        TokenInfoDictionary.getInstance(),\n+        UnknownDictionary.getInstance(),\n+        ConnectionCosts.getInstance(),\n+        userDictionary, mode, outputUnknownUnigrams, discardPunctuation);\n+  }\n+\n+  /**\n+   * <p>Create a new KoreanTokenizer supplying a custom system dictionary and unknown dictionary.\n+   * This constructor provides an entry point for users that want to construct custom language models\n+   * that can be used as input to {@link org.apache.lucene.analysis.ko.util.DictionaryBuilder}.</p>\n+   *\n+   * @param factory the AttributeFactory to use\n+   * @param systemDictionary a custom known token dictionary\n+   * @param unkDictionary a custom unknown token dictionary\n+   * @param connectionCosts custom token transition costs\n+   * @param userDictionary Optional: if non-null, user dictionary.\n+   * @param mode Decompound mode.\n+   * @param outputUnknownUnigrams If true outputs unigrams for unknown words.", "originalCommit": "d5e44e95175dbf027915e162925057bbcc14200b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEyMjY3OA==", "url": "https://github.com/apache/lucene-solr/pull/1296#discussion_r386122678", "bodyText": "Oh, I did that because it was capitalized before.\nI'll change the other constructors as well.", "author": "danmuzi", "createdAt": "2020-03-01T16:48:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEwNzc2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEwODAyNA==", "url": "https://github.com/apache/lucene-solr/pull/1296#discussion_r386108024", "bodyText": "so .. this basically follows the pattern from JapaneseTokenizer, I think. .. but somehow I don't see where we defined ResourceScheme? We're not referencing the one in kuromoji, right?", "author": "msokolov", "createdAt": "2020-03-01T13:24:31Z", "path": "lucene/analysis/nori/src/java/org/apache/lucene/analysis/ko/dict/BinaryDictionary.java", "diffHunk": "@@ -150,7 +150,18 @@ protected final InputStream getResource(String suffix) throws IOException {\n         throw new IllegalStateException(\"unknown resource scheme \" + resourceScheme);\n     }\n   }\n-  \n+\n+  public static InputStream getResource(ResourceScheme scheme, String path) throws IOException {", "originalCommit": "d5e44e95175dbf027915e162925057bbcc14200b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEyMjcyNA==", "url": "https://github.com/apache/lucene-solr/pull/1296#discussion_r386122724", "bodyText": "It's the same as Kuromoji's pattern.\nBut there is no relation with Kuromoji.\nIt's already written as an enum in this class.\n\n  \n    \n      lucene-solr/lucene/analysis/nori/src/java/org/apache/lucene/analysis/ko/dict/BinaryDictionary.java\n    \n    \n        Lines 45 to 47\n      in\n      d5e44e9\n    \n    \n    \n    \n\n        \n          \n           public enum ResourceScheme { \n        \n\n        \n          \n             CLASSPATH, FILE \n        \n\n        \n          \n           }", "author": "danmuzi", "createdAt": "2020-03-01T16:49:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEwODAyNA=="}], "type": "inlineReview"}, {"oid": "2a43cc22d5a0da63ac6ab04fc9c26f582ce954e6", "url": "https://github.com/apache/lucene-solr/commit/2a43cc22d5a0da63ac6ab04fc9c26f582ce954e6", "message": "remove some capital letters in Javadoc\n\nSigned-off-by: Namgyu Kim <namgyu@apache.org>", "committedDate": "2020-03-01T16:51:09Z", "type": "commit"}, {"oid": "c36616f8567ac393c3f99226febe6995cae066ba", "url": "https://github.com/apache/lucene-solr/commit/c36616f8567ac393c3f99226febe6995cae066ba", "message": "add a change log to CHANGES.txt\n\nSigned-off-by: Namgyu Kim <namgyu@apache.org>", "committedDate": "2020-03-01T17:02:54Z", "type": "commit"}, {"oid": "65d9bd61fedd847bb6bc8d0484843676a55836df", "url": "https://github.com/apache/lucene-solr/commit/65d9bd61fedd847bb6bc8d0484843676a55836df", "message": "resovle a conflict in CHANGES.txt", "committedDate": "2020-03-01T18:07:17Z", "type": "commit"}]}