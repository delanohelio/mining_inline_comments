{"pr_number": 1979, "pr_title": "LUCENE-9574 Add DropIfFlaggedFilterFactory", "pr_createdAt": "2020-10-14T03:08:06Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1979", "timeline": [{"oid": "f41ab5ac0d9eb6578bf379351d70a95e40e24ae7", "url": "https://github.com/apache/lucene-solr/commit/f41ab5ac0d9eb6578bf379351d70a95e40e24ae7", "message": "LUCENE-9574 Add DropIfFlaggedFilterFactory", "committedDate": "2020-10-13T23:50:51Z", "type": "commit"}, {"oid": "0d33101b37f858dca465d8f8485900061c6a049c", "url": "https://github.com/apache/lucene-solr/commit/0d33101b37f858dca465d8f8485900061c6a049c", "message": "LUCENE-9574 tidy up test", "committedDate": "2020-10-14T03:14:38Z", "type": "commit"}, {"oid": "a2a8c4ea270a05ee01646cf5913fbeb4e44d3747", "url": "https://github.com/apache/lucene-solr/commit/a2a8c4ea270a05ee01646cf5913fbeb4e44d3747", "message": "LUCENE-9574 fix @since", "committedDate": "2020-10-14T11:49:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY2MzAwNg==", "url": "https://github.com/apache/lucene-solr/pull/1979#discussion_r504663006", "bodyText": "Can you make the class final and make the constructor public? Why is this protected?", "author": "uschindler", "createdAt": "2020-10-14T13:09:44Z", "path": "lucene/analysis/common/src/java/org/apache/lucene/analysis/miscellaneous/DropIfFlaggedFilter.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.lucene.analysis.miscellaneous;\n+\n+import org.apache.lucene.analysis.FilteringTokenFilter;\n+import org.apache.lucene.analysis.TokenStream;\n+import org.apache.lucene.analysis.tokenattributes.FlagsAttribute;\n+\n+/**\n+ * Allows Tokens with a given combination of flags to be dropped. If all flags specified are present\n+ * the token is dropped, otherwise it is retained.\n+ *\n+ * @see DropIfFlaggedFilterFactory\n+ * @since 8.8.0\n+ */\n+public class DropIfFlaggedFilter extends FilteringTokenFilter {\n+  private final FlagsAttribute flagsAtt = addAttribute(FlagsAttribute.class);\n+  private final int dropFlags;\n+\n+  /**\n+   * Construct a token stream filtering the given input.\n+   *\n+   * @param input the source stream\n+   * @param dropFlags a combination of flags that indicates that the token should be dropped.\n+   */\n+  @SuppressWarnings(\"WeakerAccess\")\n+  protected DropIfFlaggedFilter(TokenStream input, int dropFlags) {", "originalCommit": "a2a8c4ea270a05ee01646cf5913fbeb4e44d3747", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDcyNjYxMw==", "url": "https://github.com/apache/lucene-solr/pull/1979#discussion_r504726613", "bodyText": "Not sure why that wound up protected.  Thx for noticing this.", "author": "gus-asf", "createdAt": "2020-10-14T14:31:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY2MzAwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY2NDA4Mw==", "url": "https://github.com/apache/lucene-solr/pull/1979#discussion_r504664083", "bodyText": "You should make the class final, too. That's not a requirement, but would be in line with other filters. The reason is: We don't want subclasses, as we prefer delegation over inheritance.", "author": "uschindler", "createdAt": "2020-10-14T13:11:09Z", "path": "lucene/analysis/common/src/java/org/apache/lucene/analysis/miscellaneous/DropIfFlaggedFilter.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.lucene.analysis.miscellaneous;\n+\n+import org.apache.lucene.analysis.FilteringTokenFilter;\n+import org.apache.lucene.analysis.TokenStream;\n+import org.apache.lucene.analysis.tokenattributes.FlagsAttribute;\n+\n+/**\n+ * Allows Tokens with a given combination of flags to be dropped. If all flags specified are present\n+ * the token is dropped, otherwise it is retained.\n+ *\n+ * @see DropIfFlaggedFilterFactory\n+ * @since 8.8.0\n+ */\n+public class DropIfFlaggedFilter extends FilteringTokenFilter {", "originalCommit": "a2a8c4ea270a05ee01646cf5913fbeb4e44d3747", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDcyNjUwMQ==", "url": "https://github.com/apache/lucene-solr/pull/1979#discussion_r504726501", "bodyText": "If it's a standard for the project I'll do it. I have my disagreements but we can hash that out elsewhere.", "author": "gus-asf", "createdAt": "2020-10-14T14:31:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY2NDA4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc5ODE2MA==", "url": "https://github.com/apache/lucene-solr/pull/1979#discussion_r504798160", "bodyText": "Thanks. All fine.", "author": "uschindler", "createdAt": "2020-10-14T16:05:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY2NDA4Mw=="}], "type": "inlineReview"}, {"oid": "473a1a2294bf08dc8c4a3e306958d3c46debcc8a", "url": "https://github.com/apache/lucene-solr/commit/473a1a2294bf08dc8c4a3e306958d3c46debcc8a", "message": "LUCENE-9574 add spurious white space back into CHANGES.txt", "committedDate": "2020-10-14T15:22:14Z", "type": "commit"}, {"oid": "1f030a8f09e6f8c3bbbc8a56478a68e4cbb312db", "url": "https://github.com/apache/lucene-solr/commit/1f030a8f09e6f8c3bbbc8a56478a68e4cbb312db", "message": "LUCENE-9574 fix up some modifiers", "committedDate": "2020-10-14T15:31:18Z", "type": "commit"}]}