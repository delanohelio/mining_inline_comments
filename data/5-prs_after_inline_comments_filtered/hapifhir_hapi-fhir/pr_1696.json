{"pr_number": 1696, "pr_title": "Drop unnecessary index", "pr_createdAt": "2020-02-03T00:57:50Z", "pr_url": "https://github.com/hapifhir/hapi-fhir/pull/1696", "timeline": [{"oid": "a3b3957e636f24d32b0720c97944be31a0cab447", "url": "https://github.com/hapifhir/hapi-fhir/commit/a3b3957e636f24d32b0720c97944be31a0cab447", "message": "Drop unnecessary index", "committedDate": "2020-02-03T00:56:30Z", "type": "commit"}, {"oid": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa", "url": "https://github.com/hapifhir/hapi-fhir/commit/4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa", "message": "Merge branch 'master' into ja_20200202_remove_unneeded_index", "committedDate": "2020-02-03T10:27:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEzNjQxMg==", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696#discussion_r374136412", "bodyText": "I'm curious why you got rid of this query. Don't we still need it to populate designations in an expansion?", "author": "dmuylwyk", "createdAt": "2020-02-03T14:36:28Z", "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/dao/data/ITermValueSetConceptDesignationDao.java", "diffHunk": "@@ -37,6 +35,4 @@\n \t@Modifying\n \tvoid deleteByTermValueSetId(@Param(\"pid\") Long theValueSetId);\n \n-\t@Query(\"SELECT vscd FROM TermValueSetConceptDesignation vscd WHERE vscd.myConcept.myId = :pid\")", "originalCommit": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE3NjQ2NQ==", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696#discussion_r374176465", "bodyText": "That query was not used at all, I only deleted it because IJ flagged it as an unused method", "author": "jamesagnew", "createdAt": "2020-02-03T15:43:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEzNjQxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEzNzI1MQ==", "url": "https://github.com/hapifhir/hapi-fhir/pull/1696#discussion_r374137251", "bodyText": "Yep, this index was definitely wrong. We eventually need indexes on designation.language and designation.use to support the designation in parameter of the $expand operation; however, we definitely do not need an index on designation.value. Glad this came to light.", "author": "dmuylwyk", "createdAt": "2020-02-03T14:37:59Z", "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/entity/TermValueSetConceptDesignation.java", "diffHunk": "@@ -33,9 +33,7 @@\n import static org.apache.commons.lang3.StringUtils.left;\n import static org.apache.commons.lang3.StringUtils.length;\n \n-@Table(name = \"TRM_VALUESET_C_DESIGNATION\", indexes = {\n-\t@Index(name = \"IDX_VALUESET_C_DSGNTN_VAL\", columnList = \"VAL\")", "originalCommit": "4b0eb1feef8adad69ea26b5fb2e97e5951b8e8fa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}