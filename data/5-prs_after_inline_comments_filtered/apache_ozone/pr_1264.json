{"pr_number": 1264, "pr_title": "HDDS-4035. Update logs of HadoopDirGenerator.", "pr_createdAt": "2020-07-27T11:35:26Z", "pr_url": "https://github.com/apache/ozone/pull/1264", "timeline": [{"oid": "95b00142732c241c4d060cf6bf7a9b0105eae59a", "url": "https://github.com/apache/ozone/commit/95b00142732c241c4d060cf6bf7a9b0105eae59a", "message": "HDDS-4035. Add logs to HadoopNestedDirGenerator.", "committedDate": "2020-07-27T11:31:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA5NDcwOA==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462094708", "bodyText": "Sometimes freon is executed from 'shell' sometimes from 'command line', BaseFreonGenerator.printReport already handle this and we can follow this approach.\nAlong with this patch, can you change the \"System.out\" in https://github.com/apache/hadoop-ozone/blob/master/hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopDirTreeGenerator.java#L154 as well. Thanks!", "author": "rakeshadr", "createdAt": "2020-07-29T07:28:40Z", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopNestedDirGenerator.java", "diffHunk": "@@ -109,5 +117,7 @@ private void createDir(long counter) throws Exception {\n       Path dir = new Path(rootPath.concat(\"/\").concat(childDir));\n       fileSystem.mkdirs(dir.getParent());\n     }\n+    System.out.println(\"\\nSuccessfully created directories. Total \" +", "originalCommit": "95b00142732c241c4d060cf6bf7a9b0105eae59a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUwMzYyNQ==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462503625", "bodyText": "Thanks for the review Rakesh. I have updated the PR and also the logs of HadoopTreeDirGenerator as per your suggestions.", "author": "aryangupta1998", "createdAt": "2020-07-29T18:31:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA5NDcwOA=="}], "type": "inlineReview"}, {"oid": "62b639c3c784cca5665f14103e0a5aff9bd90de4", "url": "https://github.com/apache/ozone/commit/62b639c3c784cca5665f14103e0a5aff9bd90de4", "message": "HDDS-4035. Update logs of HadoopTreeDirGenerator/HadoopNestedDirGenerator.", "committedDate": "2020-07-29T18:28:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjA3Mg==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462716072", "bodyText": "Latest patch looks good. Adding few minor comments:\nPlease add javadoc and change the parameter name 's' to 'msg', just to make it more readable.", "author": "rakeshadr", "createdAt": "2020-07-30T03:41:41Z", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,15 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  public void print(String s){", "originalCommit": "62b639c3c784cca5665f14103e0a5aff9bd90de4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NDI2OQ==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462764269", "bodyText": "Added javadoc, changed 's' to 'msg'.", "author": "aryangupta1998", "createdAt": "2020-07-30T06:30:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjA3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjIzNA==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462716234", "bodyText": "minor comment: please remove 'return null' inside the else block as below return is sufficient.", "author": "rakeshadr", "createdAt": "2020-07-30T03:42:17Z", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopDirTreeGenerator.java", "diffHunk": "@@ -97,17 +97,25 @@\n \n   @Override\n   public Void call() throws Exception {\n-\n-    init();\n-    OzoneConfiguration configuration = createOzoneConfiguration();\n-    fileSystem = FileSystem.get(URI.create(rootPath), configuration);\n-\n-    contentGenerator = new ContentGenerator(fileSizeInBytes, bufferSize);\n-    timer = getMetrics().timer(\"file-create\");\n-\n-    runTests(this::createDir);\n+    String s;\n+    if (depth <= 0) {\n+      s = \"Invalid depth value, depth value should be greater than zero!\";\n+      print(s);\n+    } else if (span <= 0) {\n+      s = \"Invalid span value, span value should be greater than zero!\";\n+      print(s);\n+    } else {\n+      init();\n+      OzoneConfiguration configuration = createOzoneConfiguration();\n+      fileSystem = FileSystem.get(URI.create(rootPath), configuration);\n+\n+      contentGenerator = new ContentGenerator(fileSizeInBytes, bufferSize);\n+      timer = getMetrics().timer(\"file-create\");\n+\n+      runTests(this::createDir);\n+      return null;", "originalCommit": "62b639c3c784cca5665f14103e0a5aff9bd90de4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NDUzMQ==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462764531", "bodyText": "Removed 'return null' statement inside else block.", "author": "aryangupta1998", "createdAt": "2020-07-30T06:31:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjIzNA=="}], "type": "inlineReview"}, {"oid": "96d54cce36fc658083ae1d0b5b4bd2705d6e8096", "url": "https://github.com/apache/ozone/commit/96d54cce36fc658083ae1d0b5b4bd2705d6e8096", "message": "HDDS-4035. Update logs of HadoopTreeDirGenerator/HadoopNestedDirGenerator - Fixed minor changes.", "committedDate": "2020-07-30T06:32:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2Nzk3NA==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462767974", "bodyText": "As this is base class, please remove the inherited class details here.\nyou can write something like,\n\"Print out reports with the given message.\"", "author": "rakeshadr", "createdAt": "2020-07-30T06:40:21Z", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,19 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  /**\n+   * Print out the messages for HadoopNestedDirGenerator", "originalCommit": "96d54cce36fc658083ae1d0b5b4bd2705d6e8096", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc4NzYyMw==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462787623", "bodyText": "Changed the javadoc.", "author": "aryangupta1998", "createdAt": "2020-07-30T07:05:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2Nzk3NA=="}], "type": "inlineReview"}, {"oid": "e9d81f51fbb3e54919d89802139f527477c47787", "url": "https://github.com/apache/ozone/commit/e9d81f51fbb3e54919d89802139f527477c47787", "message": "HDDS-4035. Update logs of HadoopTreeDirGenerator/HadoopNestedDirGenerator - Fixed Javadoc.", "committedDate": "2020-07-30T07:03:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM5MzQzMQ==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r463393431", "bodyText": "Given we only have one String msg here, we can eliminate thew List allocation here by just simply call\nprint.accept(msg) in line 313.", "author": "xiaoyuyao", "createdAt": "2020-07-31T04:01:30Z", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,18 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  /**\n+   * Print out reports with the given message.\n+   */\n+  public void print(String msg){\n+    List<String> messages = new LinkedList<>();\n+    messages.add(msg);", "originalCommit": "e9d81f51fbb3e54919d89802139f527477c47787", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ4MDY1OQ==", "url": "https://github.com/apache/ozone/pull/1264#discussion_r463480659", "bodyText": "Thanks @xiaoyuyao. Fixed the print function.", "author": "aryangupta1998", "createdAt": "2020-07-31T08:37:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM5MzQzMQ=="}], "type": "inlineReview"}, {"oid": "4cda37cfd21d0bed5c1af74c97064dca4763a8b3", "url": "https://github.com/apache/ozone/commit/4cda37cfd21d0bed5c1af74c97064dca4763a8b3", "message": "HDDS-4035. Fixed Print Function in BaseFreonGenerator.", "committedDate": "2020-07-31T08:36:07Z", "type": "commit"}, {"oid": "80111a78213f846e476982d591e76630c81407f4", "url": "https://github.com/apache/ozone/commit/80111a78213f846e476982d591e76630c81407f4", "message": "HDDS-4035. Fixed Print Function in BaseFreonGenerator.", "committedDate": "2020-08-02T04:38:21Z", "type": "commit"}, {"oid": "044728a63922904e53ddd16b6e4c30a4c959a2f0", "url": "https://github.com/apache/ozone/commit/044728a63922904e53ddd16b6e4c30a4c959a2f0", "message": "trigger new CI check", "committedDate": "2020-08-04T11:24:57Z", "type": "commit"}, {"oid": "3be1cd9158bc3d147ba939da52256f9627c2773b", "url": "https://github.com/apache/ozone/commit/3be1cd9158bc3d147ba939da52256f9627c2773b", "message": "trigger new CI check", "committedDate": "2020-08-04T11:25:40Z", "type": "commit"}, {"oid": "4fe1bfac331bad10d63e95d15395ccb63b9fbba7", "url": "https://github.com/apache/ozone/commit/4fe1bfac331bad10d63e95d15395ccb63b9fbba7", "message": "trigger new CI check", "committedDate": "2020-08-05T13:28:13Z", "type": "commit"}]}