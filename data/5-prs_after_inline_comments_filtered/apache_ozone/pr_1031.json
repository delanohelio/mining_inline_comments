{"pr_number": 1031, "pr_title": "HDDS-3745. Improve OM and SCM performance with 64% by avoid collect datanode information  to s3g", "pr_createdAt": "2020-06-06T06:00:53Z", "pr_url": "https://github.com/apache/ozone/pull/1031", "timeline": [{"oid": "5757fd14494105daa947cc530164a63b4c62cb6a", "url": "https://github.com/apache/ozone/commit/5757fd14494105daa947cc530164a63b4c62cb6a", "message": "HDDS-3745. Improve OM and SCM performance with 50% by avoid call getServiceList in s3g", "committedDate": "2020-06-06T06:06:36Z", "type": "forcePushed"}, {"oid": "5e11bb45bb0ecc7396bd8e217b8c3555b55623eb", "url": "https://github.com/apache/ozone/commit/5e11bb45bb0ecc7396bd8e217b8c3555b55623eb", "message": "HDDS-3745. Improve OM and SCM performance with 50% by avoid call getServiceList in s3g", "committedDate": "2020-06-06T07:13:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ0Mzk0NQ==", "url": "https://github.com/apache/ozone/pull/1031#discussion_r436443945", "bodyText": "how about\ncaCertPem = ozoneManagerClient.getCaCertificate();\n\nonly invoke when security is enabled.", "author": "GlenGeng", "createdAt": "2020-06-08T03:45:11Z", "path": "hadoop-ozone/client/src/main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java", "diffHunk": "@@ -170,10 +169,10 @@ public RpcClient(ConfigurationSource conf, String omServiceId)\n         OzoneManagerProtocol.class, conf\n     );\n     dtService = omTransport.getDelegationTokenService();\n-    ServiceInfoEx serviceInfoEx = ozoneManagerClient.getServiceInfo();\n+    String certificate = ozoneManagerClient.getCaCertificate();\n     String caCertPem = null;\n     if (OzoneSecurityUtil.isSecurityEnabled(conf)) {\n-      caCertPem = serviceInfoEx.getCaCertificate();\n+      caCertPem = certificate;", "originalCommit": "5e11bb45bb0ecc7396bd8e217b8c3555b55623eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ0NDgxOQ==", "url": "https://github.com/apache/ozone/pull/1031#discussion_r436444819", "bodyText": "CI does not passed if we do this, maybe CI want ozoneManagerClient.getCaCertificate throw exception even if security is not enabled. I will find the reason.", "author": "runzhiwang", "createdAt": "2020-06-08T03:50:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ0Mzk0NQ=="}], "type": "inlineReview"}, {"oid": "3325a78390d6cd1c600a21e503c699b639fac230", "url": "https://github.com/apache/ozone/commit/3325a78390d6cd1c600a21e503c699b639fac230", "message": "HDDS-3745. Improve OM and SCM performance with 64% by avoid call getServiceList in s3g", "committedDate": "2020-06-08T11:08:16Z", "type": "forcePushed"}, {"oid": "a002f5f03f58213e2fe714e7be1e7c6519061bb9", "url": "https://github.com/apache/ozone/commit/a002f5f03f58213e2fe714e7be1e7c6519061bb9", "message": "Improve OM and SCM performance with 64% by avoid collect datanode information to s3g", "committedDate": "2020-06-14T10:18:14Z", "type": "forcePushed"}, {"oid": "636e6d5249b7133fa4fd619bae1d482e246262a8", "url": "https://github.com/apache/ozone/commit/636e6d5249b7133fa4fd619bae1d482e246262a8", "message": "Improve OM and SCM performance with 64% by avoid collect datanode information to s3g", "committedDate": "2020-06-14T10:58:37Z", "type": "forcePushed"}, {"oid": "f333972f188b41b5315dbb120bf0a46882a62ccb", "url": "https://github.com/apache/ozone/commit/f333972f188b41b5315dbb120bf0a46882a62ccb", "message": "Improve OM and SCM performance with 64% by avoid collect datanode information to s3g", "committedDate": "2020-06-15T00:02:14Z", "type": "forcePushed"}, {"oid": "13fb742cbbe3a9c535ea284cf95b939044a8c424", "url": "https://github.com/apache/ozone/commit/13fb742cbbe3a9c535ea284cf95b939044a8c424", "message": "Improve OM and SCM performance with 64% by avoid collect datanode information to s3g", "committedDate": "2020-06-15T00:57:01Z", "type": "forcePushed"}, {"oid": "13fb742cbbe3a9c535ea284cf95b939044a8c424", "url": "https://github.com/apache/ozone/commit/13fb742cbbe3a9c535ea284cf95b939044a8c424", "message": "Improve OM and SCM performance with 64% by avoid collect datanode information to s3g", "committedDate": "2020-06-15T00:57:01Z", "type": "commit"}]}