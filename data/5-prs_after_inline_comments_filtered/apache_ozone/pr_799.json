{"pr_number": 799, "pr_title": "HDDS-3360. Duplicate Ozone Client in renew/cancel token handlers", "pr_createdAt": "2020-04-09T08:32:35Z", "pr_url": "https://github.com/apache/ozone/pull/799", "timeline": [{"oid": "a2715f93fa03fe81184dbf72bc89409b47649b82", "url": "https://github.com/apache/ozone/commit/a2715f93fa03fe81184dbf72bc89409b47649b82", "message": "HDDS-3340. Move Ozone Shell from ozone-manager to tools", "committedDate": "2020-04-05T08:29:18Z", "type": "commit"}, {"oid": "d7dfa1d623624386c436a0166685133e75ddf6fa", "url": "https://github.com/apache/ozone/commit/d7dfa1d623624386c436a0166685133e75ddf6fa", "message": "trigger new CI check", "committedDate": "2020-04-05T11:55:36Z", "type": "commit"}, {"oid": "6e35eeff54c9f519303bbb134087a068f8f65d03", "url": "https://github.com/apache/ozone/commit/6e35eeff54c9f519303bbb134087a068f8f65d03", "message": "trigger new CI check", "committedDate": "2020-04-05T12:57:03Z", "type": "commit"}, {"oid": "c9b7de5d4c60f7a10a9c8b0b9f977e1ed6753908", "url": "https://github.com/apache/ozone/commit/c9b7de5d4c60f7a10a9c8b0b9f977e1ed6753908", "message": "trigger new CI check", "committedDate": "2020-04-05T17:58:22Z", "type": "commit"}, {"oid": "9bace72f298e66f27edf786f1898e0fab4fe2e4a", "url": "https://github.com/apache/ozone/commit/9bace72f298e66f27edf786f1898e0fab4fe2e4a", "message": "Merge remote-tracking branch 'origin/master' into HDDS-3340", "committedDate": "2020-04-07T09:43:04Z", "type": "commit"}, {"oid": "1f2255b69fc3b40ff2062e9e041881f5adafdf12", "url": "https://github.com/apache/ozone/commit/1f2255b69fc3b40ff2062e9e041881f5adafdf12", "message": "Merge remote-tracking branch 'origin/master' into HDDS-3340", "committedDate": "2020-04-08T13:53:05Z", "type": "commit"}, {"oid": "480b467302ea1b6175b27c673c8f3ee6c8fbe2e5", "url": "https://github.com/apache/ozone/commit/480b467302ea1b6175b27c673c8f3ee6c8fbe2e5", "message": "HDDS-3360. Duplicate Ozone Client in renew/cancel token handlers", "committedDate": "2020-04-09T05:28:00Z", "type": "commit"}, {"oid": "c42707e3fbaba9d92a7795b314d6405d5e9d603a", "url": "https://github.com/apache/ozone/commit/c42707e3fbaba9d92a7795b314d6405d5e9d603a", "message": "trigger new CI check", "committedDate": "2020-04-09T06:31:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI5ODI1Mg==", "url": "https://github.com/apache/ozone/pull/799#discussion_r406298252", "bodyText": "NIT: isApplicable is very generic, can this be more specific? when it return null (e.g., the user input miss some arguments), do we ensure context related help returned from the console output? Maybe we can add a negative case in the new acceptance test.", "author": "xiaoyuyao", "createdAt": "2020-04-09T15:42:50Z", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/Handler.java", "diffHunk": "@@ -58,15 +58,25 @@ public OzoneConfiguration createOzoneConfiguration() {\n     return parent.createOzoneConfiguration();\n   }\n \n-  protected abstract OzoneAddress getAddress() throws OzoneClientException;\n+  protected OzoneAddress getAddress() throws OzoneClientException {\n+    return new OzoneAddress();\n+  }\n \n   protected abstract void execute(OzoneClient client, OzoneAddress address)\n       throws IOException, OzoneClientException;\n \n+  protected boolean isApplicable() {", "originalCommit": "c42707e3fbaba9d92a7795b314d6405d5e9d603a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc1Mzg1Mg==", "url": "https://github.com/apache/ozone/pull/799#discussion_r408753852", "bodyText": "Thanks @xiaoyuyao for the review.\n\nNIT: isApplicable is very generic, can this be more specific?\n\nHandler itself is very generic, at that level I don't think the method can be more specific.  Added javadoc for isApplicable to explain its intended usage.  Also changed few more classes to override it and got rid of their own explicit if check in execute.\n\nwhen it return null (e.g., the user input miss some arguments),\n\nNote that Void call() always returns null, it's not a sign of success/failure.\n\ndo we ensure context related help returned from the console output? Maybe we can add a negative case in the new acceptance test.\n\nI have added such negative test case for token operations.", "author": "adoroszlai", "createdAt": "2020-04-15T10:54:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI5ODI1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE4NjUwOA==", "url": "https://github.com/apache/ozone/pull/799#discussion_r409186508", "bodyText": "LGTM, +1. Thanks for the update!", "author": "xiaoyuyao", "createdAt": "2020-04-15T23:10:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI5ODI1Mg=="}], "type": "inlineReview"}, {"oid": "b3f9c4f3e8c10f5a6bcb949ca4b158c0631b7b14", "url": "https://github.com/apache/ozone/commit/b3f9c4f3e8c10f5a6bcb949ca4b158c0631b7b14", "message": "Merge remote-tracking branch 'origin/master' into HDDS-3360", "committedDate": "2020-04-09T17:36:09Z", "type": "commit"}, {"oid": "d7abc58521d5931174b201f7fd2409eeac84fb61", "url": "https://github.com/apache/ozone/commit/d7abc58521d5931174b201f7fd2409eeac84fb61", "message": "HDDS-3360. Use qualified name for securityEnabled", "committedDate": "2020-04-14T09:35:14Z", "type": "commit"}, {"oid": "a5b8be133ac25ade73d746675e42c9c2e6472df7", "url": "https://github.com/apache/ozone/commit/a5b8be133ac25ade73d746675e42c9c2e6472df7", "message": "HDDS-3360. Document isApplicable", "committedDate": "2020-04-14T09:40:17Z", "type": "commit"}, {"oid": "efbd54a1a773c2ef96452cc722eb46b3a1ed02cb", "url": "https://github.com/apache/ozone/commit/efbd54a1a773c2ef96452cc722eb46b3a1ed02cb", "message": "HDDS-3360. Test token operations in both secure and unsecure environment", "committedDate": "2020-04-14T11:45:11Z", "type": "commit"}, {"oid": "43297722f60904103432f5cf1b4aaa36bb587506", "url": "https://github.com/apache/ozone/commit/43297722f60904103432f5cf1b4aaa36bb587506", "message": "trigger new CI check", "committedDate": "2020-04-15T07:58:35Z", "type": "commit"}, {"oid": "c91d6abc368540ef29504ecb61a6cb1aeb4e4d9e", "url": "https://github.com/apache/ozone/commit/c91d6abc368540ef29504ecb61a6cb1aeb4e4d9e", "message": "trigger new CI check", "committedDate": "2020-04-15T09:02:30Z", "type": "commit"}]}