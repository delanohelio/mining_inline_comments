{"pr_number": 689, "pr_title": "HDDS-3183. Deprecate old Recon HTTP Server Keytab config key.", "pr_createdAt": "2020-03-16T16:38:29Z", "pr_url": "https://github.com/apache/ozone/pull/689", "timeline": [{"oid": "02bdacd062b7e0f4a2bda644e30ca9ddc84d4c51", "url": "https://github.com/apache/ozone/commit/02bdacd062b7e0f4a2bda644e30ca9ddc84d4c51", "message": "HDDS-3183. Deprecate old Recon HTTP Server Keytab config key.", "committedDate": "2020-03-16T16:35:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE5Mjg3Nw==", "url": "https://github.com/apache/ozone/pull/689#discussion_r393192877", "bodyText": "Maybe we can add a method 'addConfigurationOverrides' in the ConfigurationProvider provider and move this logic there? When we have more deprecated keys in the future, it may be easier to maintain them there.", "author": "avijayanhwx", "createdAt": "2020-03-16T17:27:28Z", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/ReconServer.java", "diffHunk": "@@ -66,6 +67,9 @@ public static void main(String[] args) {\n   @Override\n   public Void call() throws Exception {\n     OzoneConfiguration ozoneConfiguration = createOzoneConfiguration();\n+    Configuration.addDeprecation(\n+        ReconServerConfigKeys.OZONE_RECON_HTTP_KEYTAB_FILE_OLD,", "originalCommit": "02bdacd062b7e0f4a2bda644e30ca9ddc84d4c51", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c40d06d860f42bca170d6557f5538d931e736141", "url": "https://github.com/apache/ozone/commit/c40d06d860f42bca170d6557f5538d931e736141", "message": "Fix review comments.", "committedDate": "2020-03-16T19:35:36Z", "type": "commit"}, {"oid": "a76a9044682a02383642630a6b630da7d4a11181", "url": "https://github.com/apache/ozone/commit/a76a9044682a02383642630a6b630da7d4a11181", "message": "Fix review comments.", "committedDate": "2020-03-16T23:43:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU3MDU1NQ==", "url": "https://github.com/apache/ozone/pull/689#discussion_r394570555", "bodyText": "NIT: should we move this to a static block of the class to avoid issues like caller forget to invoke setConfiguration explicitly?\nstatic {\naddDeprecations();\n}", "author": "xiaoyuyao", "createdAt": "2020-03-18T18:53:43Z", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/ConfigurationProvider.java", "diffHunk": "@@ -32,10 +33,17 @@\n \n   private static OzoneConfiguration configuration;\n \n+  private static void addDeprecations() {\n+    Configuration.addDeprecation(\n+        ReconServerConfigKeys.OZONE_RECON_HTTP_KEYTAB_FILE_OLD,\n+        ReconServerConfigKeys.OZONE_RECON_HTTP_KEYTAB_FILE);\n+  }\n+\n   @VisibleForTesting\n   public static void setConfiguration(OzoneConfiguration conf) {\n     if (configuration == null) {\n       ConfigurationProvider.configuration = conf;\n+      ConfigurationProvider.addDeprecations();", "originalCommit": "a76a9044682a02383642630a6b630da7d4a11181", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY5MDgyNA==", "url": "https://github.com/apache/ozone/pull/689#discussion_r394690824", "bodyText": "Good suggestion! I have fixed it in the latest commit. Thanks!", "author": "vivekratnavel", "createdAt": "2020-03-18T23:11:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU3MDU1NQ=="}], "type": "inlineReview"}, {"oid": "d5d06d6c511b82e6be96490694c60fdbcf846bf2", "url": "https://github.com/apache/ozone/commit/d5d06d6c511b82e6be96490694c60fdbcf846bf2", "message": "Fix review comments.", "committedDate": "2020-03-18T23:11:10Z", "type": "commit"}, {"oid": "dafc7f1de5393a0764e5deabad3add95e0e1874e", "url": "https://github.com/apache/ozone/commit/dafc7f1de5393a0764e5deabad3add95e0e1874e", "message": "Merge remote-tracking branch 'apache/master' into HDDS-3183", "committedDate": "2020-03-19T01:03:07Z", "type": "commit"}]}