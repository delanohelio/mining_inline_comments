{"pr_number": 1053, "pr_title": "HDDS-3737. Avoid serialization between UUID and String", "pr_createdAt": "2020-06-10T23:55:51Z", "pr_url": "https://github.com/apache/ozone/pull/1053", "timeline": [{"oid": "aab5dc910a1bbe66a379da44bf3b521d0b44711c", "url": "https://github.com/apache/ozone/commit/aab5dc910a1bbe66a379da44bf3b521d0b44711c", "message": "HDDS-3737. Avoid serialization between UUID and String", "committedDate": "2020-06-11T00:03:00Z", "type": "forcePushed"}, {"oid": "a378929b4e731407f9939464e27c30a387124451", "url": "https://github.com/apache/ozone/commit/a378929b4e731407f9939464e27c30a387124451", "message": "HDDS-3737. Avoid serialization between UUID and String", "committedDate": "2020-06-11T00:24:34Z", "type": "forcePushed"}, {"oid": "5652ea1160b646a8e48bf142dac1166d809ea7cc", "url": "https://github.com/apache/ozone/commit/5652ea1160b646a8e48bf142dac1166d809ea7cc", "message": "HDDS-3737. Avoid serialization between UUID and String", "committedDate": "2020-06-11T11:47:03Z", "type": "forcePushed"}, {"oid": "c9d2cb3031bff71b00d4378a065fcf734f0f7444", "url": "https://github.com/apache/ozone/commit/c9d2cb3031bff71b00d4378a065fcf734f0f7444", "message": "triger ci", "committedDate": "2020-06-11T23:55:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0NjA1OA==", "url": "https://github.com/apache/ozone/pull/1053#discussion_r441046058", "bodyText": "Correct me if I'm wrong, with current approach, the improvement will be limited as fromProtoBuf to String will prefer process UUID before ID128. And to protoBuf will need to add both String version of UUID and the long/long version of uuid 128.", "author": "xiaoyuyao", "createdAt": "2020-06-16T18:10:31Z", "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/pipeline/Pipeline.java", "diffHunk": "@@ -301,14 +306,21 @@ public static Pipeline getFromProtobuf(HddsProtos.Pipeline pipeline)\n     for (DatanodeDetailsProto member : pipeline.getMembersList()) {\n       nodes.add(DatanodeDetails.getFromProtoBuf(member));\n     }\n+    UUID leaderId = null;\n+    if (pipeline.hasLeaderID() &&\n+        StringUtils.isNotEmpty(pipeline.getLeaderID())) {\n+      leaderId = UUID.fromString(pipeline.getLeaderID());", "originalCommit": "c9d2cb3031bff71b00d4378a065fcf734f0f7444", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0NDYyNA==", "url": "https://github.com/apache/ozone/pull/1053#discussion_r447544624", "bodyText": "@xiaoyuyao  Sorry for missing the comment. @elek  Thanks for reminding.\n\nThe improvement will be limited as fromProtoBuf to String will prefer process UUID before ID128\n\nDo you mean we should prefer ID128 before process UUID.fromString ? If so, I think you are totally right, I will update it.  Besides I will also remove  UUID.fromString in the future.\n\nAnd to protoBuf will need to add both String version of UUID and the long/long version of uuid 128\n\nThis is for compatibility, in the future, I will remove String version of UUID.", "author": "runzhiwang", "createdAt": "2020-06-30T09:28:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0NjA1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzY5NzAzMQ==", "url": "https://github.com/apache/ozone/pull/1053#discussion_r447697031", "bodyText": "@xiaoyuyao Thanks for review. I have updated the patch, Could you help review it again ?", "author": "runzhiwang", "createdAt": "2020-06-30T13:49:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0NjA1OA=="}], "type": "inlineReview"}, {"oid": "0800726ab023371b87cbba15bc38ee966a27344c", "url": "https://github.com/apache/ozone/commit/0800726ab023371b87cbba15bc38ee966a27344c", "message": "HDDS-3737. Avoid serialization between UUID and String", "committedDate": "2020-06-30T09:49:15Z", "type": "commit"}, {"oid": "469285404325e3bcf7c6f1f9594ea4e502917b47", "url": "https://github.com/apache/ozone/commit/469285404325e3bcf7c6f1f9594ea4e502917b47", "message": "fix code review", "committedDate": "2020-06-30T09:49:15Z", "type": "commit"}, {"oid": "469285404325e3bcf7c6f1f9594ea4e502917b47", "url": "https://github.com/apache/ozone/commit/469285404325e3bcf7c6f1f9594ea4e502917b47", "message": "fix code review", "committedDate": "2020-06-30T09:49:15Z", "type": "forcePushed"}, {"oid": "15310ad56061c08fb6eb1630d68dc06813bfaa07", "url": "https://github.com/apache/ozone/commit/15310ad56061c08fb6eb1630d68dc06813bfaa07", "message": "triger ci", "committedDate": "2020-06-30T10:52:02Z", "type": "commit"}]}