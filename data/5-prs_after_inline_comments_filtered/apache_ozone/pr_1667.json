{"pr_number": 1667, "pr_title": "HDDS-4525. Replace Hadoop variables and functions in Ozone shell scripts with Ozone-specific ones", "pr_createdAt": "2020-12-07T13:43:36Z", "pr_url": "https://github.com/apache/ozone/pull/1667", "timeline": [{"oid": "71eee7ab9c42a871b6c687a2d0805cd1810f5241", "url": "https://github.com/apache/ozone/commit/71eee7ab9c42a871b6c687a2d0805cd1810f5241", "message": "HDDS-4525. Replace Hadoop variables and functions in Ozone shell scripts with Ozone-specific ones", "committedDate": "2020-12-04T14:53:29Z", "type": "commit"}, {"oid": "52dcf871f10b3c7dee333e68cd2aa384592c9fc2", "url": "https://github.com/apache/ozone/commit/52dcf871f10b3c7dee333e68cd2aa384592c9fc2", "message": "Run envvars CLI test", "committedDate": "2020-12-05T07:09:17Z", "type": "commit"}, {"oid": "71be10e91c297258231a3e42ed3c9bf9bde6898d", "url": "https://github.com/apache/ozone/commit/71be10e91c297258231a3e42ed3c9bf9bde6898d", "message": "Add test for ozone classpath", "committedDate": "2020-12-06T17:24:29Z", "type": "commit"}, {"oid": "4b75cb364a56b3a13cc8ac84c4419a3946423e8a", "url": "https://github.com/apache/ozone/commit/4b75cb364a56b3a13cc8ac84c4419a3946423e8a", "message": "remove assertion about output", "committedDate": "2020-12-06T17:27:08Z", "type": "commit"}, {"oid": "6299ac0eebb537f93420d94be95916423c49f49c", "url": "https://github.com/apache/ozone/commit/6299ac0eebb537f93420d94be95916423c49f49c", "message": "set +e", "committedDate": "2020-12-06T18:01:24Z", "type": "commit"}, {"oid": "5341926a9df84ea8b9377deb96b0e4778faccd70", "url": "https://github.com/apache/ozone/commit/5341926a9df84ea8b9377deb96b0e4778faccd70", "message": "avoid deprecation warning in compose environments", "committedDate": "2020-12-07T07:57:50Z", "type": "commit"}, {"oid": "f2f14aec0aeb79a668408bc7104f3518561293f5", "url": "https://github.com/apache/ozone/commit/f2f14aec0aeb79a668408bc7104f3518561293f5", "message": "Fix classpath test", "committedDate": "2020-12-07T08:17:12Z", "type": "commit"}, {"oid": "3c2945537c2d514966e6f0d8dc52236b942b06a3", "url": "https://github.com/apache/ozone/commit/3c2945537c2d514966e6f0d8dc52236b942b06a3", "message": "allow creating files in dist/target", "committedDate": "2020-12-07T09:24:24Z", "type": "commit"}, {"oid": "268ea6dc05b3e534e4e1f2b1ca7e7c1b9463fe40", "url": "https://github.com/apache/ozone/commit/268ea6dc05b3e534e4e1f2b1ca7e7c1b9463fe40", "message": "rename OZONE_CONF_DIR to OZONE_CONFIG_DIR", "committedDate": "2020-12-07T09:35:35Z", "type": "commit"}, {"oid": "bd662394ca66a0c23b8403f079b7321430bc3afa", "url": "https://github.com/apache/ozone/commit/bd662394ca66a0c23b8403f079b7321430bc3afa", "message": "fix perm", "committedDate": "2020-12-07T10:17:58Z", "type": "commit"}, {"oid": "7fde59bf504d4f7d383adfd9399232e73c89b8bc", "url": "https://github.com/apache/ozone/commit/7fde59bf504d4f7d383adfd9399232e73c89b8bc", "message": "Revert \"allow creating files in dist/target\"\n\nThis reverts commit 3c2945537c2d514966e6f0d8dc52236b942b06a3.", "committedDate": "2020-12-07T10:31:07Z", "type": "commit"}, {"oid": "afa19d8f2b5a96e0989c3ec82b05f2dc74d54ad1", "url": "https://github.com/apache/ozone/commit/afa19d8f2b5a96e0989c3ec82b05f2dc74d54ad1", "message": "Add compatibility test for command-line options", "committedDate": "2020-12-08T06:13:22Z", "type": "commit"}, {"oid": "3a820c60422974e2738c8c0e5200d444f4056cfb", "url": "https://github.com/apache/ozone/commit/3a820c60422974e2738c8c0e5200d444f4056cfb", "message": "trigger new CI check", "committedDate": "2020-12-08T07:35:56Z", "type": "commit"}, {"oid": "8767d83ff0f365800df5733f5fbf97b0e59028d9", "url": "https://github.com/apache/ozone/commit/8767d83ff0f365800df5733f5fbf97b0e59028d9", "message": "trigger new CI check", "committedDate": "2020-12-08T13:36:34Z", "type": "commit"}, {"oid": "d767e1bf9d87e78ab30c5e5c618f464aa1ee6b8f", "url": "https://github.com/apache/ozone/commit/d767e1bf9d87e78ab30c5e5c618f464aa1ee6b8f", "message": "trigger new CI check", "committedDate": "2020-12-10T12:04:27Z", "type": "commit"}, {"oid": "e54c4390bcc8374970baa120b6c6d9b5a375ff1d", "url": "https://github.com/apache/ozone/commit/e54c4390bcc8374970baa120b6c6d9b5a375ff1d", "message": "Merge remote-tracking branch 'origin/master' into HDDS-4525", "committedDate": "2020-12-12T11:51:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTcxMzI3Mg==", "url": "https://github.com/apache/ozone/pull/1667#discussion_r541713272", "bodyText": "Should be OZONE_CONFIG_DIR? nvm", "author": "smengcl", "createdAt": "2020-12-12T18:30:39Z", "path": "hadoop-hdds/framework/src/main/java/org/apache/hadoop/hdds/utils/db/DBConfigFromFile.java", "diffHunk": "@@ -65,7 +65,7 @@ public static File getConfigLocation() throws IOException {\n \n     if (StringUtil.isBlank(path)) {\n       LOG.debug(\"Unable to find the configuration directory. \"\n-          + \"Please make sure that HADOOP_CONF_DIR is setup correctly.\");\n+          + \"Please make sure that \" + CONFIG_DIR + \" is setup correctly.\");", "originalCommit": "d767e1bf9d87e78ab30c5e5c618f464aa1ee6b8f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzAyODY5OA==", "url": "https://github.com/apache/ozone/pull/1667#discussion_r543028698", "bodyText": "We duplicate this if statement here, first to write a debug level log message second to return null, can we pull the two together, and also change the log message here, and state the reason why we fail by saying something like:\nCONFIG_DIR + \" variable is empty, please make sure it is setup correctly!\"", "author": "fapifta", "createdAt": "2020-12-15T04:01:52Z", "path": "hadoop-hdds/framework/src/main/java/org/apache/hadoop/hdds/utils/db/DBConfigFromFile.java", "diffHunk": "@@ -65,7 +65,7 @@ public static File getConfigLocation() throws IOException {\n \n     if (StringUtil.isBlank(path)) {", "originalCommit": "e54c4390bcc8374970baa120b6c6d9b5a375ff1d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEyMTMwNw==", "url": "https://github.com/apache/ozone/pull/1667#discussion_r543121307", "bodyText": "Not introduced by this change, but thanks for pointing out, let's fix it anyway.", "author": "adoroszlai", "createdAt": "2020-12-15T07:54:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzAyODY5OA=="}], "type": "inlineReview"}, {"oid": "aab17a2ad1eb1a94acd843520da14337b8b3d664", "url": "https://github.com/apache/ozone/commit/aab17a2ad1eb1a94acd843520da14337b8b3d664", "message": "Remove duplicate `if`", "committedDate": "2020-12-15T06:34:24Z", "type": "commit"}, {"oid": "f12aca5019391deb746cdff09734d98366406c5a", "url": "https://github.com/apache/ozone/commit/f12aca5019391deb746cdff09734d98366406c5a", "message": "Some leftover references to Hadoop stuff in comments", "committedDate": "2020-12-15T07:56:18Z", "type": "commit"}, {"oid": "9719e2b1539e767ce586be9bc2d2f555c3357140", "url": "https://github.com/apache/ozone/commit/9719e2b1539e767ce586be9bc2d2f555c3357140", "message": "Remove some leftover HDFS/YARN/MAPRED variables", "committedDate": "2020-12-15T07:56:18Z", "type": "commit"}, {"oid": "476cdd2e9e6c8e3b084f910359809dd30091304b", "url": "https://github.com/apache/ozone/commit/476cdd2e9e6c8e3b084f910359809dd30091304b", "message": "Rename HDFS_OM_SH_OPTS to OZONE_SH_OPTS", "committedDate": "2020-12-15T07:56:18Z", "type": "commit"}, {"oid": "a992588bf942f8f93fd7e1efebbbaa1d8b877120", "url": "https://github.com/apache/ozone/commit/a992588bf942f8f93fd7e1efebbbaa1d8b877120", "message": "Remove HDFS_SCM_CLI_OPTS from `ozone insight`\n\nUsage of this variable was introduced as leftover from copy-paste (of\n`scmcli` subcommand, which was above the new `insight` case at that\ntime).", "committedDate": "2020-12-15T07:56:18Z", "type": "commit"}, {"oid": "ca031fdce6e0b33b5643fd58de23bfed69771b0b", "url": "https://github.com/apache/ozone/commit/ca031fdce6e0b33b5643fd58de23bfed69771b0b", "message": "simplify ozone_bootstrap call", "committedDate": "2020-12-15T10:43:52Z", "type": "commit"}, {"oid": "1241e1ef77fb95ec19207cf8651a4b88497a70e6", "url": "https://github.com/apache/ozone/commit/1241e1ef77fb95ec19207cf8651a4b88497a70e6", "message": "Rename OZONE_CONFIG_DIR to OZONE_CONF_DIR", "committedDate": "2020-12-16T07:32:32Z", "type": "commit"}, {"oid": "2036228561e6811b9364fefd874d6b5a85a3c440", "url": "https://github.com/apache/ozone/commit/2036228561e6811b9364fefd874d6b5a85a3c440", "message": "HDDS-4601. envtoconf broken for .conf and few other formats", "committedDate": "2020-12-16T09:15:06Z", "type": "commit"}, {"oid": "a8f619a24981666cbb0dc43cec1d28a24530ce0d", "url": "https://github.com/apache/ozone/commit/a8f619a24981666cbb0dc43cec1d28a24530ce0d", "message": "workaround for HDDS-4601 and HADOOP-17436", "committedDate": "2020-12-16T12:57:14Z", "type": "commit"}, {"oid": "a70def928eca460dcf5abb3b0dfe87f01cec29e5", "url": "https://github.com/apache/ozone/commit/a70def928eca460dcf5abb3b0dfe87f01cec29e5", "message": "Merge remote-tracking branch 'origin/master' into HDDS-4525", "committedDate": "2020-12-16T18:23:44Z", "type": "commit"}, {"oid": "15192d34ec13fb9bc7c22089842a9a372e59ecc8", "url": "https://github.com/apache/ozone/commit/15192d34ec13fb9bc7c22089842a9a372e59ecc8", "message": "Merge remote-tracking branch 'origin/master' into HDDS-4525", "committedDate": "2021-01-04T14:38:00Z", "type": "commit"}, {"oid": "464bf0f32a921a9928e7789d8578f09228d9020e", "url": "https://github.com/apache/ozone/commit/464bf0f32a921a9928e7789d8578f09228d9020e", "message": "Merge remote-tracking branch 'origin/master' into HDDS-4525", "committedDate": "2021-01-21T17:17:06Z", "type": "commit"}]}