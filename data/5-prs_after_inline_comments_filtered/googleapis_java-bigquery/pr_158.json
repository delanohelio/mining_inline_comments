{"pr_number": 158, "pr_title": "feat: expose requirepartitionfilter field in table", "pr_createdAt": "2020-02-06T05:43:42Z", "pr_url": "https://github.com/googleapis/java-bigquery/pull/158", "timeline": [{"oid": "f3d85265adb211feb2c799a13912a47e3e0d751e", "url": "https://github.com/googleapis/java-bigquery/commit/f3d85265adb211feb2c799a13912a47e3e0d751e", "message": "feat: expose requirepartitionfilter field in table", "committedDate": "2020-02-05T13:41:31Z", "type": "commit"}, {"oid": "a5aeb516dce994dc19f34e6a25eb01f810eae7e5", "url": "https://github.com/googleapis/java-bigquery/commit/a5aeb516dce994dc19f34e6a25eb01f810eae7e5", "message": "feat: modified java doc", "committedDate": "2020-02-06T05:33:37Z", "type": "commit"}, {"oid": "8b206c741fcac69c03814609eb78bc2159a8c618", "url": "https://github.com/googleapis/java-bigquery/commit/8b206c741fcac69c03814609eb78bc2159a8c618", "message": "feat: ignore differences", "committedDate": "2020-02-06T06:04:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NTk3Mw==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r375895973", "bodyText": "This is an API breaking change that requires a major version bump per semver.  If this were non-abstract with a default implementation that would not be so.", "author": "elharo", "createdAt": "2020-02-06T15:18:32Z", "path": "google-cloud-bigquery/src/main/java/com/google/cloud/bigquery/TableInfo.java", "diffHunk": "@@ -130,6 +131,8 @@ public Table apply(TableInfo tableInfo) {\n     public abstract TableInfo build();\n \n     public abstract Builder setEncryptionConfiguration(EncryptionConfiguration configuration);\n+\n+    public abstract Builder setRequirePartitionFilter(Boolean requirePartitionFilter);", "originalCommit": "8b206c741fcac69c03814609eb78bc2159a8c618", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjIxNjI2MQ==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r376216261", "bodyText": "@elharo please take a look on this existing PR Ref https://github.com/googleapis/google-cloud-java/pull/6321/files#diff-2814f0d886d621f57ac6eaaabd329765R127-R134, same thing introduced before and it did not break any API change.", "author": "pmakani", "createdAt": "2020-02-07T05:06:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NTk3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM1Mjg5Mw==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r376352893", "bodyText": "This breaks all existing subclasses. It looks like an incompatible API change. So does the one you cite. What am I missing?", "author": "elharo", "createdAt": "2020-02-07T11:51:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NTk3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM2MTY0Mg==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r376361642", "bodyText": "@shollyman do you think if users are extending TableInfo.Builder ? i think it's most unlikely that's why i introduced setter.", "author": "pmakani", "createdAt": "2020-02-07T12:16:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NTk3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM2MjIxMQ==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r376362211", "bodyText": "@elharo TableInfo.Builder is extended only once within the client.", "author": "pmakani", "createdAt": "2020-02-07T12:18:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NTk3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM2NzUxOQ==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r376367519", "bodyText": "The class is non-final, public, and has an implicit public constructor. In hindsight, I suspect that was a mistake but we're stuck with it now until the next major version bump. We've made a commitment to our users not to break the API until then so we need to find another way around this. There are several. The cleanest and simplest is probably a default implementation that makes the method non-abstract.", "author": "elharo", "createdAt": "2020-02-07T12:33:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NTk3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDgyMjk4OQ==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r380822989", "bodyText": "If I'm parsing elharo's comment correctly, the issue is we're starting with a new abstract implementation that all implementors must deal with, and that may break existing subclassing.\nThe default implementation (in the backend) treats this as false when not specified.  However, an alternate default implementation choice here may be to surface a NotImplementedException to signal to third parties about missing functionality.  Which feels like the better solution here to you @elharo?", "author": "shollyman", "createdAt": "2020-02-18T17:27:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NTk3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkxNjc5Nw==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r380916797", "bodyText": "Can the default implementation simply set the field in the usual way?", "author": "elharo", "createdAt": "2020-02-18T20:28:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NTk3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDcxMjM3Nw==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r384712377", "bodyText": "will add an empty default implementation.", "author": "stephaniewang526", "createdAt": "2020-02-26T19:26:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NTk3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NjY0Ng==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r375896646", "bodyText": "did the return type change here or did you just remove the outer class?", "author": "elharo", "createdAt": "2020-02-06T15:19:35Z", "path": "google-cloud-bigquery/src/main/java/com/google/cloud/bigquery/Table.java", "diffHunk": "@@ -139,7 +139,7 @@ public Builder setDefinition(TableDefinition definition) {\n     }\n \n     @Override\n-    public TableInfo.Builder setEncryptionConfiguration(EncryptionConfiguration configuration) {\n+    public Builder setEncryptionConfiguration(EncryptionConfiguration configuration) {", "originalCommit": "8b206c741fcac69c03814609eb78bc2159a8c618", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY0NzQ0NQ==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r384647445", "bodyText": "@pmakani hi Praful - could you explain why TableInfo need to be removed here please?", "author": "stephaniewang526", "createdAt": "2020-02-26T17:27:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NjY0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY1Mzc3Nw==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r384653777", "bodyText": "caught up w Praful -- this is to make the method consistent with the other existing methods which are not using TableInfo as an outer class.", "author": "stephaniewang526", "createdAt": "2020-02-26T17:39:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NjY0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY2MDAxOA==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r384660018", "bodyText": "Looking at this again. This is not OK absent a major version bump, and it probably doesn't justify that. I would mark this method deprecated and introduce a new method that returns a Table.Builder, but you don't need to delete this one now.", "author": "elharo", "createdAt": "2020-02-26T17:50:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg5NjY0Ng=="}], "type": "inlineReview"}, {"oid": "09a7cf8c2114e37682e5d4503d17b786bcd72111", "url": "https://github.com/googleapis/java-bigquery/commit/09a7cf8c2114e37682e5d4503d17b786bcd72111", "message": "remove clirr-ignored-differences file\n\nthis will no longer be needed", "committedDate": "2020-02-26T19:49:29Z", "type": "commit"}, {"oid": "13a0f495f880c2e2e4182f92e1e947be8dc10757", "url": "https://github.com/googleapis/java-bigquery/commit/13a0f495f880c2e2e4182f92e1e947be8dc10757", "message": "add TableInfo outer-class back", "committedDate": "2020-02-26T19:50:28Z", "type": "commit"}, {"oid": "b946f382e59a50f4d15893b7ee7b6a63ac36363a", "url": "https://github.com/googleapis/java-bigquery/commit/b946f382e59a50f4d15893b7ee7b6a63ac36363a", "message": "remove abstract implementation of setRequirePartitionFilter\n\nadd empty default implementation instead in the public class", "committedDate": "2020-02-26T19:52:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA5OTY2Ng==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r385099666", "bodyText": "delete \"to be specified\"", "author": "elharo", "createdAt": "2020-02-27T12:37:39Z", "path": "google-cloud-bigquery/src/main/java/com/google/cloud/bigquery/TableInfo.java", "diffHunk": "@@ -399,6 +414,14 @@ public BigInteger getNumRows() {\n     return labels.userMap();\n   }\n \n+  /**\n+   * Returns true if a partition filter (that can be used for partition elimination) is required to", "originalCommit": "b946f382e59a50f4d15893b7ee7b6a63ac36363a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2ODY5NA==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r385168694", "bodyText": "will do once GH is back up", "author": "stephaniewang526", "createdAt": "2020-02-27T14:58:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA5OTY2Ng=="}], "type": "inlineReview"}, {"oid": "feab1593780d99e515ffdc8fe1df39690ad56b85", "url": "https://github.com/googleapis/java-bigquery/commit/feab1593780d99e515ffdc8fe1df39690ad56b85", "message": "remove extraneous words", "committedDate": "2020-02-27T14:59:12Z", "type": "commit"}, {"oid": "9d669cb88d08a8bfc7086bb00c629a65d7e4af04", "url": "https://github.com/googleapis/java-bigquery/commit/9d669cb88d08a8bfc7086bb00c629a65d7e4af04", "message": "remove whitespaces", "committedDate": "2020-02-27T15:01:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTIyOTYyNA==", "url": "https://github.com/googleapis/java-bigquery/pull/158#discussion_r385229624", "bodyText": "@pmakani - hey i can't seem to get this right on GH... could you please see to getting the comment here right to be \"is required for...\"", "author": "stephaniewang526", "createdAt": "2020-02-27T16:40:15Z", "path": "google-cloud-bigquery/src/main/java/com/google/cloud/bigquery/TableInfo.java", "diffHunk": "@@ -399,6 +414,14 @@ public BigInteger getNumRows() {\n     return labels.userMap();\n   }\n \n+  /**\n+   * Returns true if a partition filter (that can be used for partition elimination) is", "originalCommit": "9d669cb88d08a8bfc7086bb00c629a65d7e4af04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "29cf74ce5b20a0e86a472b6d86f6197aaa090629", "url": "https://github.com/googleapis/java-bigquery/commit/29cf74ce5b20a0e86a472b6d86f6197aaa090629", "message": "feat: update javadoc", "committedDate": "2020-02-27T17:37:52Z", "type": "commit"}, {"oid": "29cf74ce5b20a0e86a472b6d86f6197aaa090629", "url": "https://github.com/googleapis/java-bigquery/commit/29cf74ce5b20a0e86a472b6d86f6197aaa090629", "message": "feat: update javadoc", "committedDate": "2020-02-27T17:37:52Z", "type": "forcePushed"}, {"oid": "06419fd701515769af1f1a18e789627e1449088e", "url": "https://github.com/googleapis/java-bigquery/commit/06419fd701515769af1f1a18e789627e1449088e", "message": "feat: lint", "committedDate": "2020-02-27T17:44:55Z", "type": "commit"}]}