{"pr_number": 1042, "pr_title": "OKAPI-945: Document dockerRegistries [] and [ {} ]", "pr_createdAt": "2020-11-11T09:06:19Z", "pr_url": "https://github.com/folio-org/okapi/pull/1042", "timeline": [{"oid": "27c8300ea11a37e7c743e2e702239a72114377f2", "url": "https://github.com/folio-org/okapi/commit/27c8300ea11a37e7c743e2e702239a72114377f2", "message": "OKAPI-945: Document dockerRegistries [] and [ {} ]\n\n[] is zero registries and disables pull requests.\n[{}] is unauthenticated DockerHub.", "committedDate": "2020-11-11T09:02:23Z", "type": "commit"}, {"oid": "4fb3c475d033ec0e7de996fe7c4f38bc2d02faf1", "url": "https://github.com/folio-org/okapi/commit/4fb3c475d033ec0e7de996fe7c4f38bc2d02faf1", "message": "Avoid line wrap", "committedDate": "2020-11-11T09:17:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MTMwNA==", "url": "https://github.com/folio-org/okapi/pull/1042#discussion_r521371304", "bodyText": "I think it's better to assign a message for this by adding an entry in okapi-core/src/main/resources/infra-messages/Messages_en.properties", "author": "adamdickmeiss", "createdAt": "2020-11-11T13:51:05Z", "path": "okapi-core/src/main/java/org/folio/okapi/service/impl/DockerModuleHandle.java", "diffHunk": "@@ -37,6 +37,10 @@\n @java.lang.SuppressWarnings({\"squid:S1192\"})\n public class DockerModuleHandle implements ModuleHandle {\n \n+  static final String DOCKER_REGISTRIES_EMPTY_LIST =\n+      \"dockerRegistries=[] contains no registry and disables docker pull. \"\n+          + \"For unauthenticated pull from DockerHub use [ {} ].\";\n+\n   private final Logger logger;", "originalCommit": "27c8300ea11a37e7c743e2e702239a72114377f2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQzMTEyMw==", "url": "https://github.com/folio-org/okapi/pull/1042#discussion_r521431123", "bodyText": "https://github.com/folio-org/okapi/tree/master/okapi-core/src/main/resources/infra-messages hasn't been used since 2018. And there isn't any translation yet. I would rather propose to delete infra-messages and move the message into the code to improve code readability.", "author": "julianladisch", "createdAt": "2020-11-11T15:19:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MTMwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ5ODUxMA==", "url": "https://github.com/folio-org/okapi/pull/1042#discussion_r521498510", "bodyText": "Are you kidding?", "author": "adamdickmeiss", "createdAt": "2020-11-11T16:54:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MTMwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUwODE0Ng==", "url": "https://github.com/folio-org/okapi/pull/1042#discussion_r521508146", "bodyText": "FWIW, let's must merge this now and have this discussion later.. The messages returned IMHO should be accommodated with the message ID .. Eg (OKAPI-12345) messsage .. It serves as a nice unique way of telling what has returned the message. Of course, the log might have backtraces and all.. But for a system user, it's nice to be able to spot WHAT has actually generated some message .. Okapi? RMB ? Or code from a module?", "author": "adamdickmeiss", "createdAt": "2020-11-11T17:09:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MTMwNA=="}], "type": "inlineReview"}, {"oid": "ecba7e210bde6a941544618cf8d574058525989f", "url": "https://github.com/folio-org/okapi/commit/ecba7e210bde6a941544618cf8d574058525989f", "message": "Align default behavior in dist/okapi.sh with documented behavior for dockerRegistries.", "committedDate": "2020-11-11T18:50:02Z", "type": "commit"}, {"oid": "af2262a1a42e2eedc1262352c6701265dae7874b", "url": "https://github.com/folio-org/okapi/commit/af2262a1a42e2eedc1262352c6701265dae7874b", "message": "Quote \"${docker_registries:-[\\{\\}]}\", exit on JSON failure", "committedDate": "2020-11-12T12:04:25Z", "type": "commit"}, {"oid": "7643807fb9b8ccb864c3c92262b5b59f1a1baf00", "url": "https://github.com/folio-org/okapi/commit/7643807fb9b8ccb864c3c92262b5b59f1a1baf00", "message": "Fix wrong { masking", "committedDate": "2020-11-16T15:22:36Z", "type": "commit"}, {"oid": "ecb83677ffa3f2c99a300ddaa738add2f48c7774", "url": "https://github.com/folio-org/okapi/commit/ecb83677ffa3f2c99a300ddaa738add2f48c7774", "message": "Merge branch 'master' into OKAPI-945-dockerRegistries-empty-list", "committedDate": "2020-11-16T15:35:28Z", "type": "commit"}]}