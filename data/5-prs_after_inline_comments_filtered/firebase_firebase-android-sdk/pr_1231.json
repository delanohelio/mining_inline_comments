{"pr_number": 1231, "pr_title": "Do not set test experiments as active experiments", "pr_createdAt": "2020-02-11T19:23:00Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1231", "timeline": [{"oid": "24834ce4a08c9a50f0cb1142c9e10fa915b217e2", "url": "https://github.com/firebase/firebase-android-sdk/commit/24834ce4a08c9a50f0cb1142c9e10fa915b217e2", "message": "Do not set test experiments as active experiments", "committedDate": "2020-02-11T19:22:19Z", "type": "commit"}, {"oid": "32538c9b97e2848a1d033174d9b887e03063dd0c", "url": "https://github.com/firebase/firebase-android-sdk/commit/32538c9b97e2848a1d033174d9b887e03063dd0c", "message": "derp crash derp", "committedDate": "2020-02-11T19:23:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1MTE0NA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1231#discussion_r377851144", "bodyText": "can we add a debug log if it's a test one but not active? could be useful for devs debugging their experiment setup?", "author": "MeghaB", "createdAt": "2020-02-11T19:30:12Z", "path": "firebase-inappmessaging/src/main/java/com/google/firebase/inappmessaging/internal/InAppMessageStreamManager.java", "diffHunk": "@@ -317,8 +317,11 @@ private boolean shouldIgnoreCache(String event) {\n       campaignId = content.getExperimentalPayload().getCampaignId();\n       campaignName = content.getExperimentalPayload().getCampaignName();\n       // At this point we set the experiment to become active in analytics.\n-      abtIntegrationHelper.setExperimentActive(\n-          content.getExperimentalPayload().getExperimentPayload());\n+      // As long as it's not a test experiment.\n+      if (!content.getIsTestCampaign()) {\n+        abtIntegrationHelper.setExperimentActive(", "originalCommit": "32538c9b97e2848a1d033174d9b887e03063dd0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg2NjgxMQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1231#discussion_r377866811", "bodyText": "A test experiment will never be active and never be running. As far as FIAM is concerned nothing about test experiments will ever be reported to the abt sdk. The test device helper already does log a message indicating that a test campaign was received and the device is now set in test mode. Should I add an extra message or does the current logging sound good?", "author": "JasonAHeron", "createdAt": "2020-02-11T20:00:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1MTE0NA=="}], "type": "inlineReview"}, {"oid": "5bff65326e6e4d16d4c704d9952dd88d65ec9f5a", "url": "https://github.com/firebase/firebase-android-sdk/commit/5bff65326e6e4d16d4c704d9952dd88d65ec9f5a", "message": "i hate you android", "committedDate": "2020-02-11T20:20:49Z", "type": "commit"}]}