{"pr_number": 1263, "pr_title": "Quick Fix: FIS SDK \"current time\" doesn't get update.", "pr_createdAt": "2020-02-21T01:56:31Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1263", "timeline": [{"oid": "b518cb83f7510e39677909faeb6d944e81639b6c", "url": "https://github.com/firebase/firebase-android-sdk/commit/b518cb83f7510e39677909faeb6d944e81639b6c", "message": "Fix bug: FIS SDK system time doesn't get update.", "committedDate": "2020-02-21T01:27:35Z", "type": "commit"}, {"oid": "3d39769d34eb2943509184e30a7544a02c0046b6", "url": "https://github.com/firebase/firebase-android-sdk/commit/3d39769d34eb2943509184e30a7544a02c0046b6", "message": "Fix bug: FIS SDK system time doesn't get update.", "committedDate": "2020-02-21T02:39:29Z", "type": "commit"}, {"oid": "f2b32447b15b128d56a0cd1ed0da0fc12ce00372", "url": "https://github.com/firebase/firebase-android-sdk/commit/f2b32447b15b128d56a0cd1ed0da0fc12ce00372", "message": "Merge branch 'fix-fis-system-time' of github.com:firebase/firebase-android-sdk into fix-fis-system-time", "committedDate": "2020-02-21T02:47:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3MjcxNA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1263#discussion_r382372714", "bodyText": "make this + TimeUnit.MINUTES.toSeconds(30) please\nFIS SDK should update a FIS auth token even if it is still valid for another hour...\n(see grace period)", "author": "andirayo", "createdAt": "2020-02-21T02:54:23Z", "path": "firebase-installations/src/test/java/com/google/firebase/installations/FirebaseInstallationsTest.java", "diffHunk": "@@ -639,13 +554,13 @@ public void testGetAuthToken_expiredAuthToken_fetchedNewTokenFromFIS() throws Ex\n         PersistedInstallationEntry.INSTANCE.withRegisteredFid(\n             TEST_FID_1,\n             TEST_REFRESH_TOKEN,\n-            utils.currentTimeInSecs(),\n+            // Make experation time to be 30 min ago\n+            utils.currentTimeInSecs()\n+                - TEST_TOKEN_EXPIRATION_TIMESTAMP\n+                - TimeUnit.MINUTES.toSeconds(30),", "originalCommit": "f2b32447b15b128d56a0cd1ed0da0fc12ce00372", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NDIzMw==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1263#discussion_r382374233", "bodyText": "done", "author": "ChaoqunCHEN", "createdAt": "2020-02-21T03:00:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3MjcxNA=="}], "type": "inlineReview"}, {"oid": "6a97306169c49c87f16a3700cdde853c92116adb", "url": "https://github.com/firebase/firebase-android-sdk/commit/6a97306169c49c87f16a3700cdde853c92116adb", "message": "Merge branch 'fix-fis-system-time' of github.com:firebase/firebase-android-sdk into fix-fis-system-time", "committedDate": "2020-02-21T02:56:54Z", "type": "commit"}, {"oid": "92670220703cf11aa7afb9d47b44f9dbabf50397", "url": "https://github.com/firebase/firebase-android-sdk/commit/92670220703cf11aa7afb9d47b44f9dbabf50397", "message": "Merge branch 'fix-fis-system-time' of github.com:firebase/firebase-android-sdk into fix-fis-system-time", "committedDate": "2020-02-21T03:00:01Z", "type": "commit"}]}