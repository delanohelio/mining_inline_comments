{"pr_number": 6864, "pr_title": "Fix PBF remember password", "pr_createdAt": "2020-06-26T05:59:55Z", "pr_url": "https://github.com/triplea-game/triplea/pull/6864", "timeline": [{"oid": "7c793bcbca8ca02df86e77ad1e0f84a36810be5f", "url": "https://github.com/triplea-game/triplea/commit/7c793bcbca8ca02df86e77ad1e0f84a36810be5f", "message": "Fix PBF remember password\n\n1. Change the dummy password length to match users password length.\n   Note, we write a dummy password to the UI to avoid having to\n   write the real password as a string value back to the UI.\n\n2. Fix PBF password being over-written by the dummy password by\n   detecting if we are over-writing using a dummy password. The UI\n   was not supposed to fire an event unless the user was typing\n   a real password into the password field, though UI events\n   can be fired for other reasons which will send a dummy password\n   for persistence to the back-end. Ignoring a dummy password\n   value resolves this, otherwise the users password is overwritten.", "committedDate": "2020-06-26T05:55:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNzY4NA==", "url": "https://github.com/triplea-game/triplea/pull/6864#discussion_r446037684", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                boolean dummyPassword = true;\n          \n          \n            \n                for (final Character passwordChar : password) {\n          \n          \n            \n                  if (passwordChar != '*') {\n          \n          \n            \n                    dummyPassword = false;\n          \n          \n            \n                    break;\n          \n          \n            \n                  }\n          \n          \n            \n                }\n          \n          \n            \n                return password.length > 0 && dummyPassword;\n          \n          \n            \n                return password.length > 0 && Arrays.stream(password).allMatch(c -> c == '*');", "author": "RoiEXLab", "createdAt": "2020-06-26T08:17:22Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModel.java", "diffHunk": "@@ -62,6 +71,17 @@ void setForumPassword(final char[] password) {\n     readyCallback.run();\n   }\n \n+  private boolean isDummyPassword(final char[] password) {\n+    boolean dummyPassword = true;\n+    for (final Character passwordChar : password) {\n+      if (passwordChar != '*') {\n+        dummyPassword = false;\n+        break;\n+      }\n+    }\n+    return password.length > 0 && dummyPassword;", "originalCommit": "7c793bcbca8ca02df86e77ad1e0f84a36810be5f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA2MTg1NA==", "url": "https://github.com/triplea-game/triplea/pull/6864#discussion_r446061854", "bodyText": "Arrays.stream() kept doing a Stream<char[]> instead of Stream<Character>, I'll be curious if this works.", "author": "DanVanAtta", "createdAt": "2020-06-26T09:04:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNzY4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA3NTY0MQ==", "url": "https://github.com/triplea-game/triplea/pull/6864#discussion_r446075641", "bodyText": "You're right forgot this detail, however I found this approach:\nCharBuffer.wrap(abc).chars().allMatch(c -> c == '*')", "author": "RoiEXLab", "createdAt": "2020-06-26T09:31:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNzY4NA=="}], "type": "inlineReview"}]}