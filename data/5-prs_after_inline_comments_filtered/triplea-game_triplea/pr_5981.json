{"pr_number": 5981, "pr_title": "Update PBEM validation to allow games without setting an email server.", "pr_createdAt": "2020-02-26T06:11:21Z", "pr_url": "https://github.com/triplea-game/triplea/pull/5981", "timeline": [{"oid": "37f082adcf2a6605833d41320b990111ca5d2916", "url": "https://github.com/triplea-game/triplea/commit/37f082adcf2a6605833d41320b990111ca5d2916", "message": "Update PBEM validation to allow games without setting an email server.\n\nEnables the 'play' button on PBEM game even if email server is not\nset. This allows for games with 'verified dice' using a dice server\nand manual attachment of save games sent via email manually.\n\nPreviously it was required to also set email server settings which\nallowed for automatic emails to be sent.", "committedDate": "2020-02-26T05:55:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI5MTcxMw==", "url": "https://github.com/triplea-game/triplea/pull/5981#discussion_r384291713", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-26T06:12:56Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbem/EmailSenderEditor.java", "diffHunk": "@@ -186,27 +189,12 @@ private void testEmail() {\n         .start();\n   }\n \n-  /** Checks if fields are set, if so enables them and returns true, false otherwise. */\n-  public boolean areFieldsValid() {\n-    final boolean setupValid =\n-        ClientSetting.emailServerHost.isSet()\n-            && ClientSetting.emailServerPort.isSet()\n-            && ClientSetting.emailServerSecurity.isSet()\n-            && ClientSetting.emailUsername.isSet();\n-\n-    final String toAddressText = toAddress.getText();\n-    final boolean addressValid =\n-        !toAddressText.isEmpty() && PlayerEmailValidation.isValid(toAddressText);\n-    SwingComponents.highlightLabelIfNotValid(addressValid, toLabel);\n-    final boolean allValid = setupValid && addressValid;\n-    testEmail.setEnabled(allValid);\n-    return allValid;\n-  }\n-\n   public void applyToGameProperties(final GameProperties properties) {\n-    properties.set(IEmailSender.SUBJECT, subject.getText());\n-    properties.set(IEmailSender.RECIPIENTS, toAddress.getText());\n-    properties.set(IEmailSender.POST_AFTER_COMBAT, alsoPostAfterCombatMove.isSelected());\n+    if (!toAddress.getText().isBlank() && PlayerEmailValidation.isValid(toAddress.getText())) {", "originalCommit": "37f082adcf2a6605833d41320b990111ca5d2916", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}