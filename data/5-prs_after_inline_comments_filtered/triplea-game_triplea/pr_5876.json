{"pr_number": 5876, "pr_title": "Remove 'show map only'", "pr_createdAt": "2020-01-24T08:20:22Z", "pr_url": "https://github.com/triplea-game/triplea/pull/5876", "timeline": [{"oid": "331045111b522ebf8ed08b8588c96e0282ea6e59", "url": "https://github.com/triplea-game/triplea/commit/331045111b522ebf8ed08b8588c96e0282ea6e59", "message": "Remove 'show map only'\n\nRemoval reasons:\n- Feature is very buggy and will be difficult to fix.\n- Feature had a poor UX, was not clear when it was enabled and even could be used.\n- Feature is largely a copy/paste of show-history, not clear it was a good idea to add\n  beyond it was 'easy' to add.\n- Feature is arguably unnecessary, can be replicated by minimizing the left and right\n  side-bars\n\nResolves bug #5860", "committedDate": "2020-01-24T08:17:27Z", "type": "commit"}, {"oid": "331045111b522ebf8ed08b8588c96e0282ea6e59", "url": "https://github.com/triplea-game/triplea/commit/331045111b522ebf8ed08b8588c96e0282ea6e59", "message": "Remove 'show map only'\n\nRemoval reasons:\n- Feature is very buggy and will be difficult to fix.\n- Feature had a poor UX, was not clear when it was enabled and even could be used.\n- Feature is largely a copy/paste of show-history, not clear it was a good idea to add\n  beyond it was 'easy' to add.\n- Feature is arguably unnecessary, can be replicated by minimizing the left and right\n  side-bars\n\nResolves bug #5860", "committedDate": "2020-01-24T08:17:27Z", "type": "forcePushed"}, {"oid": "99e44c5ba91593d75173773ef901edb08e81e9ca", "url": "https://github.com/triplea-game/triplea/commit/99e44c5ba91593d75173773ef901edb08e81e9ca", "message": "Remove unnecessary parens", "committedDate": "2020-01-24T08:36:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MTE2OQ==", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370871169", "bodyText": "Just a random thought:\nIf the instanceof check came before the equality check that would be a sneaky built-in null check as well", "author": "RoiEXLab", "createdAt": "2020-01-24T22:31:18Z", "path": "game-core/src/main/java/games/strategy/triplea/ui/BattlePanel.java", "diffHunk": "@@ -240,57 +240,50 @@ public void showBattle(\n             cleanUpBattleWindow();\n             currentBattleDisplayed = null;\n           }\n-          if (!getMap().getUiContext().getShowMapOnly()) {\n-            battleDisplay =\n-                new BattleDisplay(\n-                    getData(),\n-                    location,\n-                    attacker,\n-                    defender,\n-                    attackingUnits,\n-                    defendingUnits,\n-                    killedUnits,\n-                    attackingWaitingToDie,\n-                    defendingWaitingToDie,\n-                    BattlePanel.this.getMap(),\n-                    isAmphibious,\n-                    battleType,\n-                    amphibiousLandAttackers);\n-            battleFrame.setTitle(\n-                attacker.getName()\n-                    + \" attacks \"\n-                    + defender.getName()\n-                    + \" in \"\n-                    + location.getName());\n-            battleFrame.getContentPane().removeAll();\n-            battleFrame.getContentPane().add(battleDisplay);\n-            battleFrame.setMinimumSize(new Dimension(800, 600));\n-            battleFrame.setLocationRelativeTo(JOptionPane.getFrameForComponent(BattlePanel.this));\n-            PbemDiceRoller.setFocusWindow(battleFrame);\n-            boolean foundHumanInBattle = false;\n-            for (final Player gamePlayer :\n-                getMap().getUiContext().getLocalPlayers().getLocalPlayers()) {\n-              if ((gamePlayer.getGamePlayer().equals(attacker)\n-                      && gamePlayer instanceof TripleAPlayer)\n-                  || (gamePlayer.getGamePlayer().equals(defender)\n-                      && gamePlayer instanceof TripleAPlayer)) {\n-                foundHumanInBattle = true;\n-                break;\n-              }\n-            }\n-            if (ClientSetting.showBattlesWhenObserving.getValueOrThrow() || foundHumanInBattle) {\n-              battleFrame.setAlwaysOnTop(true);\n-              battleFrame.setVisible(true);\n-              battleFrame.validate();\n-              battleFrame.invalidate();\n-              battleFrame.repaint();\n-            } else {\n-              battleFrame.setVisible(false);\n+          battleDisplay =\n+              new BattleDisplay(\n+                  getData(),\n+                  location,\n+                  attacker,\n+                  defender,\n+                  attackingUnits,\n+                  defendingUnits,\n+                  killedUnits,\n+                  attackingWaitingToDie,\n+                  defendingWaitingToDie,\n+                  BattlePanel.this.getMap(),\n+                  isAmphibious,\n+                  battleType,\n+                  amphibiousLandAttackers);\n+          battleFrame.setTitle(\n+              attacker.getName() + \" attacks \" + defender.getName() + \" in \" + location.getName());\n+          battleFrame.getContentPane().removeAll();\n+          battleFrame.getContentPane().add(battleDisplay);\n+          battleFrame.setMinimumSize(new Dimension(800, 600));\n+          battleFrame.setLocationRelativeTo(JOptionPane.getFrameForComponent(BattlePanel.this));\n+          PbemDiceRoller.setFocusWindow(battleFrame);\n+          boolean foundHumanInBattle = false;\n+          for (final Player gamePlayer :\n+              getMap().getUiContext().getLocalPlayers().getLocalPlayers()) {\n+            if ((gamePlayer.getGamePlayer().equals(attacker) && gamePlayer instanceof TripleAPlayer)\n+                || (gamePlayer.getGamePlayer().equals(defender)\n+                    && gamePlayer instanceof TripleAPlayer)) {", "originalCommit": "99e44c5ba91593d75173773ef901edb08e81e9ca", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MjI2MQ==", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370872261", "bodyText": "This code seems oddly familiar ^^\nI think I created a PR for this, but I don't remember what it was about \ud83d\ude05", "author": "RoiEXLab", "createdAt": "2020-01-24T22:35:11Z", "path": "game-core/src/main/java/games/strategy/triplea/ui/TripleAFrame.java", "diffHunk": "@@ -2352,58 +2321,13 @@ private void showGame() {\n     mapPanel.setRoute(null);\n   }\n \n-  private void showMapOnly() {\n-    // Are we coming from showHistory mode or showGame mode?", "originalCommit": "99e44c5ba91593d75173773ef901edb08e81e9ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3Mjg2Mg==", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370872862", "bodyText": "'showMapOnly' is a copy/paste of the above block, 'showCurrentGame' and also 'showHistory'.\nI wonder if that is why it is familiar, or if for other reason.", "author": "DanVanAtta", "createdAt": "2020-01-24T22:37:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MjI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3NDE4MQ==", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370874181", "bodyText": "I think I did a refactoring that touched all of the 3 methods.\nFound it via git blame: #4737", "author": "RoiEXLab", "createdAt": "2020-01-24T22:42:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MjI2MQ=="}], "type": "inlineReview"}]}