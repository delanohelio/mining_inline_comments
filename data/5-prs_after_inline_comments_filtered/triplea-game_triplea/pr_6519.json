{"pr_number": 6519, "pr_title": "Do reverse-connection check of new game hosts when posting games", "pr_createdAt": "2020-05-23T22:52:23Z", "pr_url": "https://github.com/triplea-game/triplea/pull/6519", "timeline": [{"oid": "0c25ce7d3da607cabf1275eda6a95269acf9992d", "url": "https://github.com/triplea-game/triplea/commit/0c25ce7d3da607cabf1275eda6a95269acf9992d", "message": "Do reverse-connection check of new game hosts when posting games\n\nThis update combines the connectivity check endpoint with the post-game\nendpoint. This avoids any timing issues and seeks to simplify\nthe game posting flow. Instead of a client doing two round trips\nto the server to first post a game and then ask for a connectivity\ncheck, it is done as one now.\n\nFor implementation updates, we update the response from the game-posting\nrequest to include both game-id (nullable) and the result of the\nconnectivity check. After posting a game we now should check\nthe connectivity result and if okay, then proceed, otherwise\nexecute the previous behavior when the connectivity check failed\n(which is to show the \"this is how to set up port forwarding\" message\nand shutdown).", "committedDate": "2020-05-23T22:50:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NDQxMQ==", "url": "https://github.com/triplea-game/triplea/pull/6519#discussion_r429684411", "bodyText": "What is the \"How to host\" button currently doing?\nWe might want to mention the possibility of using a relay service in the future", "author": "RoiEXLab", "createdAt": "2020-05-24T23:12:50Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/WatcherThreadMessaging.java", "diffHunk": "@@ -12,14 +12,31 @@\n \n /** Interface to communicate lobby watcher events to user. */\n public interface WatcherThreadMessaging {\n-  void serverNotAvailableHandler(String message);\n+  String COMPUTER_NOT_REACHABLE_ERROR_MESSAGE =\n+      \"Your computer is not reachable from the internet.\\n\"\n+          + \"Please make sure your Firewall allows incoming connections (hosting) \"\n+          + \"for TripleA.\\n\"\n+          + \"(The firewall exception must be updated every time a new version of \"\n+          + \"TripleA comes out.)\\n\"\n+          + \"And that your Router is configured to send TCP traffic the correct port \"\n+          + \" to your local ip address.\\n\"\n+          + \"See 'How To Host...' in the help menu, at the top of the lobby \"", "originalCommit": "0c25ce7d3da607cabf1275eda6a95269acf9992d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTk3NDQ2MA==", "url": "https://github.com/triplea-game/triplea/pull/6519#discussion_r429974460", "bodyText": "Good question, this is something to update. We no longer have a 'how to host' menu option. The reason it was removed is that the game was linking to many forum posts, some/many of which were getting out of date. Instead of having that type of situation, instead all help content should be linked to the user guide and then we maintain just one link to the user guide.", "author": "DanVanAtta", "createdAt": "2020-05-25T14:50:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NDQxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTk3NDc3OA==", "url": "https://github.com/triplea-game/triplea/pull/6519#discussion_r429974778", "bodyText": "If the 'how to host' page is updated to mention a relay service, then we'll have that done.", "author": "DanVanAtta", "createdAt": "2020-05-25T14:51:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NDQxMQ=="}], "type": "inlineReview"}]}