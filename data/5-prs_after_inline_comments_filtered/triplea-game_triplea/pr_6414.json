{"pr_number": 6414, "pr_title": "Moderator Mute (Front-End)", "pr_createdAt": "2020-05-06T04:50:32Z", "pr_url": "https://github.com/triplea-game/triplea/pull/6414", "timeline": [{"oid": "708494336abf852e80aea615acd60fc6111710bf", "url": "https://github.com/triplea-game/triplea/commit/708494336abf852e80aea615acd60fc6111710bf", "message": "Moderator Mute (Front-End)\n\n- Add front-end implementation for moderator mute ability.\n  Mutes are capped to 60 minutes.\n- Add no-op backend controller endpoint to do mutes\n- Restructure BanDuration dialog to be more generic and\n  rename to 'ActionDuration'\n- Allow for the action duration time unit and max unit to\n  be specified per instance\n- Restructure Action duration dialog to return an optional\n  duration instead of automatically running an action.\n- Remove the 'permanent' time-unit (it defaulted to a very\n  large number), instead moderators can do the same and\n  just ban for 10,000 months or something similar.\n- Add a confirmation prompt to both player mute and\n  player ban actions.", "committedDate": "2020-05-06T04:36:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU0NDE3Mg==", "url": "https://github.com/triplea-game/triplea/pull/6414#discussion_r420544172", "bodyText": "Method prompt has 70 lines of code (exceeds 30 allowed). Consider refactoring.", "author": "codeclimate", "createdAt": "2020-05-06T04:52:35Z", "path": "game-core/src/main/java/games/strategy/engine/lobby/client/ui/action/ActionDurationDialog.java", "diffHunk": "@@ -0,0 +1,130 @@\n+package games.strategy.engine.lobby.client.ui.action;\n+\n+import java.awt.Frame;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.concurrent.atomic.AtomicReference;\n+import javax.annotation.Nonnull;\n+import javax.swing.JComboBox;\n+import javax.swing.JDialog;\n+import javax.swing.JSpinner;\n+import javax.swing.SpinnerNumberModel;\n+import lombok.AllArgsConstructor;\n+import lombok.Builder;\n+import org.triplea.swing.JButtonBuilder;\n+import org.triplea.swing.JLabelBuilder;\n+import org.triplea.swing.jpanel.JPanelBuilder;\n+import org.triplea.swing.key.binding.KeyCode;\n+import org.triplea.swing.key.binding.SwingKeyBinding;\n+\n+/** A UI-Utility class that can be used to prompt the user for a timespan. */\n+@Builder\n+public final class ActionDurationDialog {\n+  private static final long serialVersionUID = 1367343948352548021L;\n+  private static final String TITLE = \"Select Timespan\";\n+\n+  @Builder.Default private int maxDuration = 10_000_000;\n+  @Builder.Default private List<ActionTimeUnit> timeUnits = List.of(ActionTimeUnit.values());\n+  @Nonnull private final ActionName actionName;\n+  @Nonnull private final Frame parent;\n+\n+  @AllArgsConstructor\n+  public enum ActionName {\n+    BAN(\"ban\"),\n+    MUTE(\"mute\");\n+    private final String label;\n+  }\n+\n+  private enum Result {\n+    OK,\n+    CANCEL\n+  }\n+\n+  /**\n+   * Prompts the user to enter a timespan. If the operation is not cancelled, the action Consumer is\n+   * run. Not that the Date passed to the consumer can be null if the user chose forever.\n+   */\n+  public Optional<ActionDuration> prompt() {", "originalCommit": "708494336abf852e80aea615acd60fc6111710bf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "68283312f9c3cbab845a17ae61767ed377a3fd8a", "url": "https://github.com/triplea-game/triplea/commit/68283312f9c3cbab845a17ae61767ed377a3fd8a", "message": "Merge remote-tracking branch 'origin/master' into moderator-mute-frontend-completed", "committedDate": "2020-05-08T02:09:00Z", "type": "commit"}, {"oid": "a3cff6808168d5dcbeb0fc6f42ad365b43690d9b", "url": "https://github.com/triplea-game/triplea/commit/a3cff6808168d5dcbeb0fc6f42ad365b43690d9b", "message": "Add import post-merge conflict resolution", "committedDate": "2020-05-08T02:09:44Z", "type": "commit"}, {"oid": "39aa5571767bacd3b6a760367cd9ed86c1ba0492", "url": "https://github.com/triplea-game/triplea/commit/39aa5571767bacd3b6a760367cd9ed86c1ba0492", "message": "Merge remote-tracking branch 'origin/master' into moderator-mute-frontend-completed", "committedDate": "2020-05-08T06:52:10Z", "type": "commit"}]}