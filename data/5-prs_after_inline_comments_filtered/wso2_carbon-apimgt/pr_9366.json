{"pr_number": 9366, "pr_title": "Fixing inconsistencies when importing/exporting APIs/API Products/Applications with Throttling Policies using the API Controller", "pr_createdAt": "2020-11-05T07:01:10Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/9366", "timeline": [{"oid": "50c788d79690167ed9b2554c5d929469de805ebf", "url": "https://github.com/wso2/carbon-apimgt/commit/50c788d79690167ed9b2554c5d929469de805ebf", "message": "Fix Advanced Throttling Policy importing issues with API Resources", "committedDate": "2020-11-04T04:09:24Z", "type": "commit"}, {"oid": "24ed14d176caeb48767ffca874b6ddaddee4c21d", "url": "https://github.com/wso2/carbon-apimgt/commit/24ed14d176caeb48767ffca874b6ddaddee4c21d", "message": "Fix API Level Advanced Throttling Policy importing issues", "committedDate": "2020-11-04T04:09:24Z", "type": "commit"}, {"oid": "7827948c611a3d761d7fb5df3378f39a8286e935", "url": "https://github.com/wso2/carbon-apimgt/commit/7827948c611a3d761d7fb5df3378f39a8286e935", "message": "Fix Subscription Level Throttling Policy issues for APIs", "committedDate": "2020-11-04T13:51:28Z", "type": "commit"}, {"oid": "0ccfb0e7aba5b2a816c531a30a7fb88300f84b23", "url": "https://github.com/wso2/carbon-apimgt/commit/0ccfb0e7aba5b2a816c531a30a7fb88300f84b23", "message": "Fix Subscription Level and Product Level Throttling Policy issues for API Products", "committedDate": "2020-11-05T03:34:25Z", "type": "commit"}, {"oid": "b233042c5d4522c8018234472d72cfdbf6d0a093", "url": "https://github.com/wso2/carbon-apimgt/commit/b233042c5d4522c8018234472d72cfdbf6d0a093", "message": "Fix Application Level Throttling Policy issues", "committedDate": "2020-11-06T07:55:05Z", "type": "commit"}, {"oid": "b233042c5d4522c8018234472d72cfdbf6d0a093", "url": "https://github.com/wso2/carbon-apimgt/commit/b233042c5d4522c8018234472d72cfdbf6d0a093", "message": "Fix Application Level Throttling Policy issues", "committedDate": "2020-11-06T07:55:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjcwMjc5OA==", "url": "https://github.com/wso2/carbon-apimgt/pull/9366#discussion_r566702798", "bodyText": "No exception is thrown in this method. Please correct the java docs.", "author": "npamudika", "createdAt": "2021-01-29T09:53:45Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/importexport/utils/APIAndAPIProductCommonUtil.java", "diffHunk": "@@ -639,4 +647,74 @@ public static void addClientCertificates(String pathToArchive, APIProvider apiPr\n             throw new APIImportExportException(errorMessage, e);\n         }\n     }\n+\n+    /**\n+     * Get the subscription level policy names of an API/API Product\n+     *\n+     * @param apiTypeWrapper API or API Product to be exported\n+     * @throws APIImportExportException", "originalCommit": "b233042c5d4522c8018234472d72cfdbf6d0a093", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Njg3NjMyMw==", "url": "https://github.com/wso2/carbon-apimgt/pull/9366#discussion_r566876323", "bodyText": "Fixed via eb9b718", "author": "wasuradananjith", "createdAt": "2021-01-29T14:53:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjcwMjc5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjcwMzQ1Mg==", "url": "https://github.com/wso2/carbon-apimgt/pull/9366#discussion_r566703452", "bodyText": "APIManagementException is thrown, replace the APIImportExportException with it in the java docs.", "author": "npamudika", "createdAt": "2021-01-29T09:54:51Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/importexport/utils/APIAndAPIProductCommonUtil.java", "diffHunk": "@@ -639,4 +647,74 @@ public static void addClientCertificates(String pathToArchive, APIProvider apiPr\n             throw new APIImportExportException(errorMessage, e);\n         }\n     }\n+\n+    /**\n+     * Get the subscription level policy names of an API/API Product\n+     *\n+     * @param apiTypeWrapper API or API Product to be exported\n+     * @throws APIImportExportException\n+     */\n+    public static Set<String> getAvailableTierNames(ApiTypeWrapper apiTypeWrapper) {\n+        Set<String> tiers = new LinkedHashSet<String>();\n+        Set<Tier> tiersFromApi;\n+        if (!apiTypeWrapper.isAPIProduct()) {\n+            tiersFromApi = apiTypeWrapper.getApi().getAvailableTiers();\n+        } else {\n+            tiersFromApi = apiTypeWrapper.getApiProduct().getAvailableTiers();\n+        }\n+        for (Tier tier : tiersFromApi) {\n+            tiers.add(tier.getName());\n+        }\n+        return tiers;\n+    }\n+\n+    /**\n+     * Set the subscription level tiers of an API/API Product by validating with the tiers available in the environment\n+     *\n+     * @param apiJsonContent JSON content of API or API Product to be imported\n+     * @param apiProvider    API Provider\n+     * @throws APIImportExportException", "originalCommit": "b233042c5d4522c8018234472d72cfdbf6d0a093", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Njg3NjI2OQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/9366#discussion_r566876269", "bodyText": "Fixed via eb9b718", "author": "wasuradananjith", "createdAt": "2021-01-29T14:53:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjcwMzQ1Mg=="}], "type": "inlineReview"}]}