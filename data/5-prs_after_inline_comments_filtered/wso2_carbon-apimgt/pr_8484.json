{"pr_number": 8484, "pr_title": "Fetch specific registry entry", "pr_createdAt": "2020-05-11T12:31:00Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8484", "timeline": [{"oid": "ad92f59f471289422531dc03396415ce5b694b82", "url": "https://github.com/wso2/carbon-apimgt/commit/ad92f59f471289422531dc03396415ce5b694b82", "message": "Fetch specific registry entry", "committedDate": "2020-05-11T12:30:08Z", "type": "commit"}, {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6", "url": "https://github.com/wso2/carbon-apimgt/commit/7f91ee9fc9e0e956de72c988aa98998e7fbc63a6", "message": "Fix syntax issue", "committedDate": "2020-05-11T12:31:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMDAyMA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423010020", "bodyText": "Shouldn't we verify the existence of the registry before getting the entry? Otherwise, this might work when querying using wrong registry id and correct entry id.\nOr else, we should change the resource without requiring the registry id right?", "author": "ChamodDamitha", "createdAt": "2020-05-11T12:40:56Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "diffHunk": "@@ -143,14 +143,20 @@ public Response deleteRegistry(String registryId, MessageContext messageContext)\n \n     @Override\n     public Response getRegistryEntryByUuid(String registryId, String entryId, MessageContext messageContext) {\n-        RegistryEntryDTO registryEntry = new RegistryEntryDTO();\n-        registryEntry.setEntryName(\"Pizzashack-endpoint\");\n-        registryEntry.setMetadata(\"{ \\\"mutualTLS\\\" : true }\");\n-        registryEntry.setDefinitionType(RegistryEntryDTO.DefinitionTypeEnum.OAS);\n-        registryEntry.setDefinitionUrl(\"http://localhost/pizzashack?swagger.json\");\n-        registryEntry.setServiceType(RegistryEntryDTO.ServiceTypeEnum.REST);\n-        registryEntry.setServiceUrl(\"http://localhost/pizzashack\");\n-        return Response.ok().entity(registryEntry).build();\n+        EndpointRegistry registryProvider = new EndpointRegistryImpl();\n+        EndpointRegistryEntry endpointRegistryEntry = null;\n+        try {\n+            endpointRegistryEntry = registryProvider.getEndpointRegistryEntryByUUID(entryId);", "originalCommit": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMzk5NQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423013995", "bodyText": "correct. will fix it.", "author": "fazlan-nazeem", "createdAt": "2020-05-11T12:47:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMDAyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAzNDI2Mg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423034262", "bodyText": "fixed", "author": "fazlan-nazeem", "createdAt": "2020-05-11T13:21:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMDAyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMTU1NA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423011554", "bodyText": "registryId should be replaced entryId ?", "author": "ChamodDamitha", "createdAt": "2020-05-11T12:43:45Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "diffHunk": "@@ -143,14 +143,20 @@ public Response deleteRegistry(String registryId, MessageContext messageContext)\n \n     @Override\n     public Response getRegistryEntryByUuid(String registryId, String entryId, MessageContext messageContext) {\n-        RegistryEntryDTO registryEntry = new RegistryEntryDTO();\n-        registryEntry.setEntryName(\"Pizzashack-endpoint\");\n-        registryEntry.setMetadata(\"{ \\\"mutualTLS\\\" : true }\");\n-        registryEntry.setDefinitionType(RegistryEntryDTO.DefinitionTypeEnum.OAS);\n-        registryEntry.setDefinitionUrl(\"http://localhost/pizzashack?swagger.json\");\n-        registryEntry.setServiceType(RegistryEntryDTO.ServiceTypeEnum.REST);\n-        registryEntry.setServiceUrl(\"http://localhost/pizzashack\");\n-        return Response.ok().entity(registryEntry).build();\n+        EndpointRegistry registryProvider = new EndpointRegistryImpl();\n+        EndpointRegistryEntry endpointRegistryEntry = null;\n+        try {\n+            endpointRegistryEntry = registryProvider.getEndpointRegistryEntryByUUID(entryId);\n+            if (endpointRegistryEntry == null) {\n+                RestApiUtil.handleResourceNotFoundError(\"Endpoint registry entry with the id: \" + entryId +\n+                        \" is not found\", log);\n+            }\n+        } catch (APIManagementException e) {\n+            RestApiUtil.handleInternalServerError(\"Error while fetching endpoint registry entry: \"\n+                    + registryId, e, log);", "originalCommit": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAzNDQwMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423034401", "bodyText": "yes, fixed.", "author": "fazlan-nazeem", "createdAt": "2020-05-11T13:22:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMTU1NA=="}], "type": "inlineReview"}, {"oid": "63176f1e5492cc773b9a2eaf454bf74ffb95ba20", "url": "https://github.com/wso2/carbon-apimgt/commit/63176f1e5492cc773b9a2eaf454bf74ffb95ba20", "message": "Validate by registryId", "committedDate": "2020-05-11T13:18:46Z", "type": "commit"}, {"oid": "8cca315e6e4bd768dd75f20dff710460c88ccafe", "url": "https://github.com/wso2/carbon-apimgt/commit/8cca315e6e4bd768dd75f20dff710460c88ccafe", "message": "remove unwanted file", "committedDate": "2020-05-11T13:21:27Z", "type": "commit"}]}