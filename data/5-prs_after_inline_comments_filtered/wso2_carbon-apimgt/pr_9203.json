{"pr_number": 9203, "pr_title": "Fix NPE when importing OAS3 files", "pr_createdAt": "2020-08-19T02:56:24Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/9203", "timeline": [{"oid": "a4c8ab9cf33e9a6a3b8645e73e0ea58e7cd11e39", "url": "https://github.com/wso2/carbon-apimgt/commit/a4c8ab9cf33e9a6a3b8645e73e0ea58e7cd11e39", "message": "populating default security scheme", "committedDate": "2020-08-19T02:48:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjY3NTk0Nw==", "url": "https://github.com/wso2/carbon-apimgt/pull/9203#discussion_r472675947", "bodyText": "Shall we add a comment on what we are doing here. ie: Populating the default security scheme.", "author": "tgtshanika", "createdAt": "2020-08-19T04:26:24Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "diffHunk": "@@ -1458,6 +1460,14 @@ private OpenAPI injectOtherScopesToDefaultScheme(OpenAPI openAPI) throws APIMana\n             if (defaultScheme == null) {\n                 SecurityScheme newDefault = new SecurityScheme();\n                 newDefault.setType(SecurityScheme.Type.OAUTH2);\n+                OAuthFlows newDefaultFlows = new OAuthFlows();", "originalCommit": "a4c8ab9cf33e9a6a3b8645e73e0ea58e7cd11e39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjY4MTgzOQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/9203#discussion_r472681839", "bodyText": "fixed with 0d3ff9c", "author": "RakhithaRR", "createdAt": "2020-08-19T04:36:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjY3NTk0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjY3NzIwNg==", "url": "https://github.com/wso2/carbon-apimgt/pull/9203#discussion_r472677206", "bodyText": "Check the same flow with Swagger 2 API definition and fix it in OAS2Parser, if the same issue is there.", "author": "tgtshanika", "createdAt": "2020-08-19T04:28:23Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "diffHunk": "@@ -1458,6 +1460,14 @@ private OpenAPI injectOtherScopesToDefaultScheme(OpenAPI openAPI) throws APIMana\n             if (defaultScheme == null) {\n                 SecurityScheme newDefault = new SecurityScheme();\n                 newDefault.setType(SecurityScheme.Type.OAUTH2);\n+                OAuthFlows newDefaultFlows = new OAuthFlows();\n+                OAuthFlow newDefaultFlow = new OAuthFlow();\n+                newDefaultFlow.setAuthorizationUrl(\"https://test.com\");\n+                Scopes newDefaultScopes = new Scopes();\n+                newDefaultFlow.setScopes(newDefaultScopes);\n+                newDefaultFlows.setImplicit(newDefaultFlow);\n+                newDefault.setFlows(newDefaultFlows);\n+\n                 securitySchemes.put(OPENAPI_SECURITY_SCHEMA_KEY, newDefault);", "originalCommit": "a4c8ab9cf33e9a6a3b8645e73e0ea58e7cd11e39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjY3OTE2OA==", "url": "https://github.com/wso2/carbon-apimgt/pull/9203#discussion_r472679168", "bodyText": "Default security is populated in v2 parser. So, this issue is not there.", "author": "RakhithaRR", "createdAt": "2020-08-19T04:31:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjY3NzIwNg=="}], "type": "inlineReview"}, {"oid": "0d3ff9c41a0ca9835c6b2ed6b7740f38cdf1003a", "url": "https://github.com/wso2/carbon-apimgt/commit/0d3ff9c41a0ca9835c6b2ed6b7740f38cdf1003a", "message": "added comments", "committedDate": "2020-08-19T04:35:31Z", "type": "commit"}]}