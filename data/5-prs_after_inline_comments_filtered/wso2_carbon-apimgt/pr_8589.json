{"pr_number": 8589, "pr_title": "Update endpoint registry resources to restrict on registry type", "pr_createdAt": "2020-05-28T03:49:26Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8589", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU2NzQwNg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8589#discussion_r431567406", "bodyText": "Rather than checking for the existence and then creating the Registry, can't we simply fetch the registry and then create it if it's null?", "author": "jaadds", "createdAt": "2020-05-28T03:55:20Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/impl/EndpointRegistryImpl.java", "diffHunk": "@@ -113,24 +119,35 @@ public void deleteEndpointRegistry(String registryUUID) throws EndpointRegistryE\n     /**\n      * Returns details of all Endpoint Registries belong to a given tenant\n      *\n-     * @param name         Registry name\n-     * @param sortBy       Name of the sorting field\n-     * @param sortOrder    Order of sorting (asc or desc)\n-     * @param limit        Limit\n-     * @param offset       Offset\n      * @param tenantDomain\n      * @return A list of EndpointRegistryInfo objects\n      * @throws EndpointRegistryException if failed to get details of an Endpoint Registries\n      */\n-    public List<EndpointRegistryInfo> getEndpointRegistries(String name, String sortBy, String sortOrder,\n-                                                            int limit, int offset,\n-                                                            String tenantDomain) throws EndpointRegistryException {\n+    public List<EndpointRegistryInfo> getEndpointRegistries(String tenantDomain) throws EndpointRegistryException {\n \n         int tenantId;\n         try {\n             tenantId = ServiceReferenceHolder.getInstance().getRealmService().getTenantManager()\n                     .getTenantId(tenantDomain);\n-            return registryDAO.getEndpointRegistries(name, sortBy, sortOrder, limit, offset, tenantId);\n+            // Create the default registry if no registry found\n+            if (!registryDAO.isEndpointRegistryTypeExists(EndpointRegistryConstants.REGISTRY_TYPE_WSO2, tenantId) &&", "originalCommit": "c21b7b834baace0284794e8da9a2b0fc875cc15e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3MTA3NA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8589#discussion_r431571074", "bodyText": "Fixed", "author": "ChamodDamitha", "createdAt": "2020-05-28T04:12:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU2NzQwNg=="}], "type": "inlineReview"}, {"oid": "57df790c82a44144a82bf19cd18d50b58d332e37", "url": "https://github.com/wso2/carbon-apimgt/commit/57df790c82a44144a82bf19cd18d50b58d332e37", "message": "Update endpoint registry resources to restrict on registry type", "committedDate": "2020-05-28T04:11:45Z", "type": "commit"}, {"oid": "57df790c82a44144a82bf19cd18d50b58d332e37", "url": "https://github.com/wso2/carbon-apimgt/commit/57df790c82a44144a82bf19cd18d50b58d332e37", "message": "Update endpoint registry resources to restrict on registry type", "committedDate": "2020-05-28T04:11:45Z", "type": "forcePushed"}]}