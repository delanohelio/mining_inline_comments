{"pr_number": 8784, "pr_title": "Validating synapse artifacts from synapse configuration in gateway RestAPI", "pr_createdAt": "2020-06-18T15:05:51Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8784", "timeline": [{"oid": "a3661a2daf7b14a1f4b3bc72bf809c0cbe37aa56", "url": "https://github.com/wso2/carbon-apimgt/commit/a3661a2daf7b14a1f4b3bc72bf809c0cbe37aa56", "message": "restAPI changes", "committedDate": "2020-06-18T14:15:00Z", "type": "commit"}, {"oid": "04087ac5ee09709069dd9327f67ee34b5eeab3be", "url": "https://github.com/wso2/carbon-apimgt/commit/04087ac5ee09709069dd9327f67ee34b5eeab3be", "message": "remove newlines", "committedDate": "2020-06-18T14:16:38Z", "type": "commit"}, {"oid": "b7efc5d8081a1a209e457275977bd2dea2d65e8f", "url": "https://github.com/wso2/carbon-apimgt/commit/b7efc5d8081a1a209e457275977bd2dea2d65e8f", "message": "handle errors", "committedDate": "2020-06-18T14:24:00Z", "type": "commit"}, {"oid": "996441b02a18e8ceedb36216f72a4e45c4734dfd", "url": "https://github.com/wso2/carbon-apimgt/commit/996441b02a18e8ceedb36216f72a4e45c4734dfd", "message": "Validate getAPIArtifact", "committedDate": "2020-06-18T15:02:47Z", "type": "commit"}, {"oid": "6725e049ff0bb0cdf7dbd1131c0e9c335f0fa911", "url": "https://github.com/wso2/carbon-apimgt/commit/6725e049ff0bb0cdf7dbd1131c0e9c335f0fa911", "message": "formatted the code", "committedDate": "2020-06-18T15:05:07Z", "type": "commit"}, {"oid": "75212045edcd0d071ea160c50ce5e9e1a0739f06", "url": "https://github.com/wso2/carbon-apimgt/commit/75212045edcd0d071ea160c50ce5e9e1a0739f06", "message": "Exposing details from inmemory artifacts", "committedDate": "2020-06-22T07:12:11Z", "type": "commit"}, {"oid": "0b548db98e547ea8c2f8c472c5bb343986a79d4b", "url": "https://github.com/wso2/carbon-apimgt/commit/0b548db98e547ea8c2f8c472c5bb343986a79d4b", "message": "getting artifacts sepeartely", "committedDate": "2020-06-22T15:22:40Z", "type": "commit"}, {"oid": "53ef33741f7a72199bf67bf9911cc4a84060687b", "url": "https://github.com/wso2/carbon-apimgt/commit/53ef33741f7a72199bf67bf9911cc4a84060687b", "message": "refine imports", "committedDate": "2020-06-22T15:24:45Z", "type": "commit"}, {"oid": "e2528166aa928ae3b636c418b9b5d35f7fce7be5", "url": "https://github.com/wso2/carbon-apimgt/commit/e2528166aa928ae3b636c418b9b5d35f7fce7be5", "message": "added vaidations for RESTAPI implementations", "committedDate": "2020-06-22T17:39:08Z", "type": "commit"}, {"oid": "561dbe3ec9099c5ea2c9d752ab809eb999f83424", "url": "https://github.com/wso2/carbon-apimgt/commit/561dbe3ec9099c5ea2c9d752ab809eb999f83424", "message": "return list instead of string from endpointServiceproxy", "committedDate": "2020-06-22T17:59:16Z", "type": "commit"}, {"oid": "1ad14286faad11f58c66398ad1d15f0138186706", "url": "https://github.com/wso2/carbon-apimgt/commit/1ad14286faad11f58c66398ad1d15f0138186706", "message": "Change parameters", "committedDate": "2020-06-25T07:10:41Z", "type": "commit"}, {"oid": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "url": "https://github.com/wso2/carbon-apimgt/commit/a1562425a0031c8cdf8d2534f344db9910a9d8db", "message": "add DB opeartions", "committedDate": "2020-06-25T07:11:37Z", "type": "commit"}, {"oid": "30b329b919e4ecfccbc8d71b765f63afa37609fb", "url": "https://github.com/wso2/carbon-apimgt/commit/30b329b919e4ecfccbc8d71b765f63afa37609fb", "message": "Merge remote-tracking branch 'upstream/master' into gatewayRESTAPI", "committedDate": "2020-06-25T07:12:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY2OTI3Mg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445669272", "bodyText": "We should not access DAO layer outside impl. Even in gateway profile, we might not have access to db.", "author": "1akshitha", "createdAt": "2020-06-25T16:03:38Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/ApiArtifactApiServiceImpl.java", "diffHunk": "@@ -18,24 +18,101 @@\n \n package org.wso2.carbon.apimgt.rest.api.gateway.v1.impl;\n \n+import org.apache.axis2.AxisFault;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.json.JSONArray;\n import org.json.JSONObject;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n import org.wso2.carbon.apimgt.api.gateway.GatewayAPIDTO;\n+import org.wso2.carbon.apimgt.api.gateway.GatewayContentDTO;\n import org.wso2.carbon.apimgt.gateway.InMemoryAPIDeployer;\n-import org.wso2.carbon.apimgt.rest.api.gateway.v1.*;\n+import org.wso2.carbon.apimgt.gateway.utils.EndpointAdminServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.LocalEntryServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.SequenceAdminServiceProxy;\n+import org.wso2.carbon.apimgt.impl.dao.ApiMgtDAO;\n+import org.wso2.carbon.apimgt.rest.api.gateway.v1.ApiArtifactApiService;\n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.wso2.carbon.endpoint.EndpointAdminException;\n+\n \n import javax.ws.rs.core.Response;\n \n public class ApiArtifactApiServiceImpl implements ApiArtifactApiService {\n \n-    public Response apiArtifactGet(String apiName, String label, String apiId, MessageContext messageContext) {\n+    private static final Log log = LogFactory.getLog(ApiArtifactApiServiceImpl.class);\n+\n+    private ApiMgtDAO apiMgtDAO = ApiMgtDAO.getInstance();", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTgxNDgxMw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445814813", "bodyText": "79c1b54", "author": "Sarangan0219", "createdAt": "2020-06-25T20:19:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY2OTI3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY2OTU1Ng==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445669556", "bodyText": "use the artifact retriever to get the gateway API Id", "author": "1akshitha", "createdAt": "2020-06-25T16:04:06Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/ApiArtifactApiServiceImpl.java", "diffHunk": "@@ -18,24 +18,101 @@\n \n package org.wso2.carbon.apimgt.rest.api.gateway.v1.impl;\n \n+import org.apache.axis2.AxisFault;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.json.JSONArray;\n import org.json.JSONObject;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n import org.wso2.carbon.apimgt.api.gateway.GatewayAPIDTO;\n+import org.wso2.carbon.apimgt.api.gateway.GatewayContentDTO;\n import org.wso2.carbon.apimgt.gateway.InMemoryAPIDeployer;\n-import org.wso2.carbon.apimgt.rest.api.gateway.v1.*;\n+import org.wso2.carbon.apimgt.gateway.utils.EndpointAdminServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.LocalEntryServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.SequenceAdminServiceProxy;\n+import org.wso2.carbon.apimgt.impl.dao.ApiMgtDAO;\n+import org.wso2.carbon.apimgt.rest.api.gateway.v1.ApiArtifactApiService;\n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.wso2.carbon.endpoint.EndpointAdminException;\n+\n \n import javax.ws.rs.core.Response;\n \n public class ApiArtifactApiServiceImpl implements ApiArtifactApiService {\n \n-    public Response apiArtifactGet(String apiName, String label, String apiId, MessageContext messageContext) {\n+    private static final Log log = LogFactory.getLog(ApiArtifactApiServiceImpl.class);\n+\n+    private ApiMgtDAO apiMgtDAO = ApiMgtDAO.getInstance();\n+    private final String SUPER_TENAT_DOMAIN = \"carbon.super\";\n+\n+    @Override\n+    public Response apiArtifactGet(String apiName, String version , String tenantDomain, MessageContext messageContext) {\n \n         InMemoryAPIDeployer inMemoryApiDeployer = new InMemoryAPIDeployer();\n+        if (tenantDomain == null){\n+            tenantDomain =SUPER_TENAT_DOMAIN;\n+        }\n+        String apiId = null;\n+        String label = null;\n+        try {\n+            apiId = apiMgtDAO.getGatewayAPIId(apiName,version,tenantDomain);", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTgxNDcwNA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445814704", "bodyText": "79c1b54", "author": "Sarangan0219", "createdAt": "2020-06-25T20:19:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY2OTU1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MTYwMg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445671602", "bodyText": "What will happen if the artifact status is \"remove\"? We have to check for that before retrieving the artifacts", "author": "1akshitha", "createdAt": "2020-06-25T16:07:20Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/ApiArtifactApiServiceImpl.java", "diffHunk": "@@ -18,24 +18,101 @@\n \n package org.wso2.carbon.apimgt.rest.api.gateway.v1.impl;\n \n+import org.apache.axis2.AxisFault;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.json.JSONArray;\n import org.json.JSONObject;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n import org.wso2.carbon.apimgt.api.gateway.GatewayAPIDTO;\n+import org.wso2.carbon.apimgt.api.gateway.GatewayContentDTO;\n import org.wso2.carbon.apimgt.gateway.InMemoryAPIDeployer;\n-import org.wso2.carbon.apimgt.rest.api.gateway.v1.*;\n+import org.wso2.carbon.apimgt.gateway.utils.EndpointAdminServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.LocalEntryServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.SequenceAdminServiceProxy;\n+import org.wso2.carbon.apimgt.impl.dao.ApiMgtDAO;\n+import org.wso2.carbon.apimgt.rest.api.gateway.v1.ApiArtifactApiService;\n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.wso2.carbon.endpoint.EndpointAdminException;\n+\n \n import javax.ws.rs.core.Response;\n \n public class ApiArtifactApiServiceImpl implements ApiArtifactApiService {\n \n-    public Response apiArtifactGet(String apiName, String label, String apiId, MessageContext messageContext) {\n+    private static final Log log = LogFactory.getLog(ApiArtifactApiServiceImpl.class);\n+\n+    private ApiMgtDAO apiMgtDAO = ApiMgtDAO.getInstance();\n+    private final String SUPER_TENAT_DOMAIN = \"carbon.super\";\n+\n+    @Override\n+    public Response apiArtifactGet(String apiName, String version , String tenantDomain, MessageContext messageContext) {\n \n         InMemoryAPIDeployer inMemoryApiDeployer = new InMemoryAPIDeployer();\n+        if (tenantDomain == null){\n+            tenantDomain =SUPER_TENAT_DOMAIN;\n+        }\n+        String apiId = null;\n+        String label = null;\n+        try {\n+            apiId = apiMgtDAO.getGatewayAPIId(apiName,version,tenantDomain);\n+            label = apiMgtDAO.getGatewayAPILabel(apiId);\n+        } catch (APIManagementException e) {\n+            log.error(e);\n+        }\n         GatewayAPIDTO gatewayAPIDTO = inMemoryApiDeployer.getAPIArtifact(apiId, label);", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY1MjIyNA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r450652224", "bodyText": "This call will only fetch the API Artifacts which have the artifact status of \"publish\" .  https://github.com/wso2/carbon-apimgt/blob/master/components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/InMemoryAPIDeployer.java#L70", "author": "Sarangan0219", "createdAt": "2020-07-07T07:05:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MTYwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3Mjg2Mg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445672862", "bodyText": "Shall we add this details to the response? It is good to know which endpoints were not added.", "author": "1akshitha", "createdAt": "2020-06-25T16:09:12Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/ApiArtifactApiServiceImpl.java", "diffHunk": "@@ -18,24 +18,101 @@\n \n package org.wso2.carbon.apimgt.rest.api.gateway.v1.impl;\n \n+import org.apache.axis2.AxisFault;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.json.JSONArray;\n import org.json.JSONObject;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n import org.wso2.carbon.apimgt.api.gateway.GatewayAPIDTO;\n+import org.wso2.carbon.apimgt.api.gateway.GatewayContentDTO;\n import org.wso2.carbon.apimgt.gateway.InMemoryAPIDeployer;\n-import org.wso2.carbon.apimgt.rest.api.gateway.v1.*;\n+import org.wso2.carbon.apimgt.gateway.utils.EndpointAdminServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.LocalEntryServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.SequenceAdminServiceProxy;\n+import org.wso2.carbon.apimgt.impl.dao.ApiMgtDAO;\n+import org.wso2.carbon.apimgt.rest.api.gateway.v1.ApiArtifactApiService;\n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.wso2.carbon.endpoint.EndpointAdminException;\n+\n \n import javax.ws.rs.core.Response;\n \n public class ApiArtifactApiServiceImpl implements ApiArtifactApiService {\n \n-    public Response apiArtifactGet(String apiName, String label, String apiId, MessageContext messageContext) {\n+    private static final Log log = LogFactory.getLog(ApiArtifactApiServiceImpl.class);\n+\n+    private ApiMgtDAO apiMgtDAO = ApiMgtDAO.getInstance();\n+    private final String SUPER_TENAT_DOMAIN = \"carbon.super\";\n+\n+    @Override\n+    public Response apiArtifactGet(String apiName, String version , String tenantDomain, MessageContext messageContext) {\n \n         InMemoryAPIDeployer inMemoryApiDeployer = new InMemoryAPIDeployer();\n+        if (tenantDomain == null){\n+            tenantDomain =SUPER_TENAT_DOMAIN;\n+        }\n+        String apiId = null;\n+        String label = null;\n+        try {\n+            apiId = apiMgtDAO.getGatewayAPIId(apiName,version,tenantDomain);\n+            label = apiMgtDAO.getGatewayAPILabel(apiId);\n+        } catch (APIManagementException e) {\n+            log.error(e);\n+        }\n         GatewayAPIDTO gatewayAPIDTO = inMemoryApiDeployer.getAPIArtifact(apiId, label);\n-        String definition;\n+        String definition = null;\n         JSONObject responseObj = new JSONObject();\n+\n         if (gatewayAPIDTO != null) {\n-            definition = gatewayAPIDTO.getApiDefinition();\n+            try {\n+                if (gatewayAPIDTO.getEndpointEntriesToBeAdd() != null ) {\n+                    JSONArray endPointArray = new JSONArray();\n+                    EndpointAdminServiceProxy endpointAdminServiceProxy = new EndpointAdminServiceProxy\n+                            (gatewayAPIDTO.getTenantDomain());\n+                    for (GatewayContentDTO gatewayEndpoint : gatewayAPIDTO.getEndpointEntriesToBeAdd()) {\n+                        if (endpointAdminServiceProxy.isEndpointExist(gatewayEndpoint.getName())) {\n+                            endPointArray.put(endpointAdminServiceProxy.getEndpoints(gatewayEndpoint.getName()));\n+                        } else {\n+                            log.error(gatewayEndpoint.getName() + \" was not deployed in the gateway\");", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcwNjEzMg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445706132", "bodyText": "2bef8ac", "author": "Sarangan0219", "createdAt": "2020-06-25T17:01:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3Mjg2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MzI1Nw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445673257", "bodyText": "Better to have this detail in the response", "author": "1akshitha", "createdAt": "2020-06-25T16:09:44Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/ApiArtifactApiServiceImpl.java", "diffHunk": "@@ -18,24 +18,101 @@\n \n package org.wso2.carbon.apimgt.rest.api.gateway.v1.impl;\n \n+import org.apache.axis2.AxisFault;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.json.JSONArray;\n import org.json.JSONObject;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n import org.wso2.carbon.apimgt.api.gateway.GatewayAPIDTO;\n+import org.wso2.carbon.apimgt.api.gateway.GatewayContentDTO;\n import org.wso2.carbon.apimgt.gateway.InMemoryAPIDeployer;\n-import org.wso2.carbon.apimgt.rest.api.gateway.v1.*;\n+import org.wso2.carbon.apimgt.gateway.utils.EndpointAdminServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.LocalEntryServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.SequenceAdminServiceProxy;\n+import org.wso2.carbon.apimgt.impl.dao.ApiMgtDAO;\n+import org.wso2.carbon.apimgt.rest.api.gateway.v1.ApiArtifactApiService;\n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.wso2.carbon.endpoint.EndpointAdminException;\n+\n \n import javax.ws.rs.core.Response;\n \n public class ApiArtifactApiServiceImpl implements ApiArtifactApiService {\n \n-    public Response apiArtifactGet(String apiName, String label, String apiId, MessageContext messageContext) {\n+    private static final Log log = LogFactory.getLog(ApiArtifactApiServiceImpl.class);\n+\n+    private ApiMgtDAO apiMgtDAO = ApiMgtDAO.getInstance();\n+    private final String SUPER_TENAT_DOMAIN = \"carbon.super\";\n+\n+    @Override\n+    public Response apiArtifactGet(String apiName, String version , String tenantDomain, MessageContext messageContext) {\n \n         InMemoryAPIDeployer inMemoryApiDeployer = new InMemoryAPIDeployer();\n+        if (tenantDomain == null){\n+            tenantDomain =SUPER_TENAT_DOMAIN;\n+        }\n+        String apiId = null;\n+        String label = null;\n+        try {\n+            apiId = apiMgtDAO.getGatewayAPIId(apiName,version,tenantDomain);\n+            label = apiMgtDAO.getGatewayAPILabel(apiId);\n+        } catch (APIManagementException e) {\n+            log.error(e);\n+        }\n         GatewayAPIDTO gatewayAPIDTO = inMemoryApiDeployer.getAPIArtifact(apiId, label);\n-        String definition;\n+        String definition = null;\n         JSONObject responseObj = new JSONObject();\n+\n         if (gatewayAPIDTO != null) {\n-            definition = gatewayAPIDTO.getApiDefinition();\n+            try {\n+                if (gatewayAPIDTO.getEndpointEntriesToBeAdd() != null ) {\n+                    JSONArray endPointArray = new JSONArray();\n+                    EndpointAdminServiceProxy endpointAdminServiceProxy = new EndpointAdminServiceProxy\n+                            (gatewayAPIDTO.getTenantDomain());\n+                    for (GatewayContentDTO gatewayEndpoint : gatewayAPIDTO.getEndpointEntriesToBeAdd()) {\n+                        if (endpointAdminServiceProxy.isEndpointExist(gatewayEndpoint.getName())) {\n+                            endPointArray.put(endpointAdminServiceProxy.getEndpoints(gatewayEndpoint.getName()));\n+                        } else {\n+                            log.error(gatewayEndpoint.getName() + \" was not deployed in the gateway\");\n+                        }\n+                    }\n+                    responseObj.put(\"Endpoints\", endPointArray);\n+                }\n+\n+                if (gatewayAPIDTO.getLocalEntriesToBeAdd() != null) {\n+                    JSONArray localEntryArray = new JSONArray();\n+                    LocalEntryServiceProxy localEntryServiceProxy = new\n+                            LocalEntryServiceProxy(gatewayAPIDTO.getTenantDomain());\n+                    for (GatewayContentDTO localEntry : gatewayAPIDTO.getLocalEntriesToBeAdd()) {\n+                        if (localEntryServiceProxy.isEntryExists(localEntry.getName())) {\n+                            localEntryArray.put(localEntryServiceProxy.getEntry(localEntry.getName()));\n+                        } else {\n+                            log.error(localEntry.getName() + \" was not deployed in the gateway\");", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcwNjA1NQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445706055", "bodyText": "2bef8ac", "author": "Sarangan0219", "createdAt": "2020-06-25T17:01:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MzI1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MzUwNA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445673504", "bodyText": "Better to have this detail in the response", "author": "1akshitha", "createdAt": "2020-06-25T16:10:06Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/ApiArtifactApiServiceImpl.java", "diffHunk": "@@ -18,24 +18,101 @@\n \n package org.wso2.carbon.apimgt.rest.api.gateway.v1.impl;\n \n+import org.apache.axis2.AxisFault;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.json.JSONArray;\n import org.json.JSONObject;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n import org.wso2.carbon.apimgt.api.gateway.GatewayAPIDTO;\n+import org.wso2.carbon.apimgt.api.gateway.GatewayContentDTO;\n import org.wso2.carbon.apimgt.gateway.InMemoryAPIDeployer;\n-import org.wso2.carbon.apimgt.rest.api.gateway.v1.*;\n+import org.wso2.carbon.apimgt.gateway.utils.EndpointAdminServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.LocalEntryServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.SequenceAdminServiceProxy;\n+import org.wso2.carbon.apimgt.impl.dao.ApiMgtDAO;\n+import org.wso2.carbon.apimgt.rest.api.gateway.v1.ApiArtifactApiService;\n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.wso2.carbon.endpoint.EndpointAdminException;\n+\n \n import javax.ws.rs.core.Response;\n \n public class ApiArtifactApiServiceImpl implements ApiArtifactApiService {\n \n-    public Response apiArtifactGet(String apiName, String label, String apiId, MessageContext messageContext) {\n+    private static final Log log = LogFactory.getLog(ApiArtifactApiServiceImpl.class);\n+\n+    private ApiMgtDAO apiMgtDAO = ApiMgtDAO.getInstance();\n+    private final String SUPER_TENAT_DOMAIN = \"carbon.super\";\n+\n+    @Override\n+    public Response apiArtifactGet(String apiName, String version , String tenantDomain, MessageContext messageContext) {\n \n         InMemoryAPIDeployer inMemoryApiDeployer = new InMemoryAPIDeployer();\n+        if (tenantDomain == null){\n+            tenantDomain =SUPER_TENAT_DOMAIN;\n+        }\n+        String apiId = null;\n+        String label = null;\n+        try {\n+            apiId = apiMgtDAO.getGatewayAPIId(apiName,version,tenantDomain);\n+            label = apiMgtDAO.getGatewayAPILabel(apiId);\n+        } catch (APIManagementException e) {\n+            log.error(e);\n+        }\n         GatewayAPIDTO gatewayAPIDTO = inMemoryApiDeployer.getAPIArtifact(apiId, label);\n-        String definition;\n+        String definition = null;\n         JSONObject responseObj = new JSONObject();\n+\n         if (gatewayAPIDTO != null) {\n-            definition = gatewayAPIDTO.getApiDefinition();\n+            try {\n+                if (gatewayAPIDTO.getEndpointEntriesToBeAdd() != null ) {\n+                    JSONArray endPointArray = new JSONArray();\n+                    EndpointAdminServiceProxy endpointAdminServiceProxy = new EndpointAdminServiceProxy\n+                            (gatewayAPIDTO.getTenantDomain());\n+                    for (GatewayContentDTO gatewayEndpoint : gatewayAPIDTO.getEndpointEntriesToBeAdd()) {\n+                        if (endpointAdminServiceProxy.isEndpointExist(gatewayEndpoint.getName())) {\n+                            endPointArray.put(endpointAdminServiceProxy.getEndpoints(gatewayEndpoint.getName()));\n+                        } else {\n+                            log.error(gatewayEndpoint.getName() + \" was not deployed in the gateway\");\n+                        }\n+                    }\n+                    responseObj.put(\"Endpoints\", endPointArray);\n+                }\n+\n+                if (gatewayAPIDTO.getLocalEntriesToBeAdd() != null) {\n+                    JSONArray localEntryArray = new JSONArray();\n+                    LocalEntryServiceProxy localEntryServiceProxy = new\n+                            LocalEntryServiceProxy(gatewayAPIDTO.getTenantDomain());\n+                    for (GatewayContentDTO localEntry : gatewayAPIDTO.getLocalEntriesToBeAdd()) {\n+                        if (localEntryServiceProxy.isEntryExists(localEntry.getName())) {\n+                            localEntryArray.put(localEntryServiceProxy.getEntry(localEntry.getName()));\n+                        } else {\n+                            log.error(localEntry.getName() + \" was not deployed in the gateway\");\n+                        }\n+                    }\n+                    responseObj.put(\"Local Entries\", localEntryArray);\n+                }\n+\n+                if (gatewayAPIDTO.getSequenceToBeAdd() != null ) {\n+                    JSONArray sequencesArray = new JSONArray();\n+                    SequenceAdminServiceProxy sequenceAdminServiceProxy =\n+                            new SequenceAdminServiceProxy(gatewayAPIDTO.getTenantDomain());\n+                    for (GatewayContentDTO sequence : gatewayAPIDTO.getSequenceToBeAdd()) {\n+                        if(sequenceAdminServiceProxy.isExistingSequence(sequence.getName())) {\n+                            sequencesArray.put(sequenceAdminServiceProxy.getSequence(sequence.getName()));\n+                        } else {\n+                            log.error(sequence.getName() + \" was not deployed in the gateway\");", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcwNTU1MA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445705550", "bodyText": "2bef8ac", "author": "Sarangan0219", "createdAt": "2020-06-25T17:00:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MzUwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3NDA5Mg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445674092", "bodyText": "we have to handle the errors too. If there was an error, need that details in the response", "author": "1akshitha", "createdAt": "2020-06-25T16:10:59Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/ApiArtifactApiServiceImpl.java", "diffHunk": "@@ -18,24 +18,101 @@\n \n package org.wso2.carbon.apimgt.rest.api.gateway.v1.impl;\n \n+import org.apache.axis2.AxisFault;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.json.JSONArray;\n import org.json.JSONObject;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n import org.wso2.carbon.apimgt.api.gateway.GatewayAPIDTO;\n+import org.wso2.carbon.apimgt.api.gateway.GatewayContentDTO;\n import org.wso2.carbon.apimgt.gateway.InMemoryAPIDeployer;\n-import org.wso2.carbon.apimgt.rest.api.gateway.v1.*;\n+import org.wso2.carbon.apimgt.gateway.utils.EndpointAdminServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.LocalEntryServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.SequenceAdminServiceProxy;\n+import org.wso2.carbon.apimgt.impl.dao.ApiMgtDAO;\n+import org.wso2.carbon.apimgt.rest.api.gateway.v1.ApiArtifactApiService;\n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.wso2.carbon.endpoint.EndpointAdminException;\n+\n \n import javax.ws.rs.core.Response;\n \n public class ApiArtifactApiServiceImpl implements ApiArtifactApiService {\n \n-    public Response apiArtifactGet(String apiName, String label, String apiId, MessageContext messageContext) {\n+    private static final Log log = LogFactory.getLog(ApiArtifactApiServiceImpl.class);\n+\n+    private ApiMgtDAO apiMgtDAO = ApiMgtDAO.getInstance();\n+    private final String SUPER_TENAT_DOMAIN = \"carbon.super\";\n+\n+    @Override\n+    public Response apiArtifactGet(String apiName, String version , String tenantDomain, MessageContext messageContext) {\n \n         InMemoryAPIDeployer inMemoryApiDeployer = new InMemoryAPIDeployer();\n+        if (tenantDomain == null){\n+            tenantDomain =SUPER_TENAT_DOMAIN;\n+        }\n+        String apiId = null;\n+        String label = null;\n+        try {\n+            apiId = apiMgtDAO.getGatewayAPIId(apiName,version,tenantDomain);\n+            label = apiMgtDAO.getGatewayAPILabel(apiId);\n+        } catch (APIManagementException e) {\n+            log.error(e);\n+        }\n         GatewayAPIDTO gatewayAPIDTO = inMemoryApiDeployer.getAPIArtifact(apiId, label);\n-        String definition;\n+        String definition = null;\n         JSONObject responseObj = new JSONObject();\n+\n         if (gatewayAPIDTO != null) {\n-            definition = gatewayAPIDTO.getApiDefinition();\n+            try {\n+                if (gatewayAPIDTO.getEndpointEntriesToBeAdd() != null ) {\n+                    JSONArray endPointArray = new JSONArray();\n+                    EndpointAdminServiceProxy endpointAdminServiceProxy = new EndpointAdminServiceProxy\n+                            (gatewayAPIDTO.getTenantDomain());\n+                    for (GatewayContentDTO gatewayEndpoint : gatewayAPIDTO.getEndpointEntriesToBeAdd()) {\n+                        if (endpointAdminServiceProxy.isEndpointExist(gatewayEndpoint.getName())) {\n+                            endPointArray.put(endpointAdminServiceProxy.getEndpoints(gatewayEndpoint.getName()));\n+                        } else {\n+                            log.error(gatewayEndpoint.getName() + \" was not deployed in the gateway\");\n+                        }\n+                    }\n+                    responseObj.put(\"Endpoints\", endPointArray);\n+                }\n+\n+                if (gatewayAPIDTO.getLocalEntriesToBeAdd() != null) {\n+                    JSONArray localEntryArray = new JSONArray();\n+                    LocalEntryServiceProxy localEntryServiceProxy = new\n+                            LocalEntryServiceProxy(gatewayAPIDTO.getTenantDomain());\n+                    for (GatewayContentDTO localEntry : gatewayAPIDTO.getLocalEntriesToBeAdd()) {\n+                        if (localEntryServiceProxy.isEntryExists(localEntry.getName())) {\n+                            localEntryArray.put(localEntryServiceProxy.getEntry(localEntry.getName()));\n+                        } else {\n+                            log.error(localEntry.getName() + \" was not deployed in the gateway\");\n+                        }\n+                    }\n+                    responseObj.put(\"Local Entries\", localEntryArray);\n+                }\n+\n+                if (gatewayAPIDTO.getSequenceToBeAdd() != null ) {\n+                    JSONArray sequencesArray = new JSONArray();\n+                    SequenceAdminServiceProxy sequenceAdminServiceProxy =\n+                            new SequenceAdminServiceProxy(gatewayAPIDTO.getTenantDomain());\n+                    for (GatewayContentDTO sequence : gatewayAPIDTO.getSequenceToBeAdd()) {\n+                        if(sequenceAdminServiceProxy.isExistingSequence(sequence.getName())) {\n+                            sequencesArray.put(sequenceAdminServiceProxy.getSequence(sequence.getName()));\n+                        } else {\n+                            log.error(sequence.getName() + \" was not deployed in the gateway\");\n+                        }\n+                    }\n+                    responseObj.put(\"Sequences\", sequencesArray);\n+                }\n+            } catch (EndpointAdminException e) {\n+                log.error(\"Error in fetching deployed Endpoints from Synapse Configuration.\" , e);\n+            } catch (AxisFault axisFault) {\n+                log.error(\"Error in fetching deployed artifacts from Synapse Configuration.\" , axisFault);\n+            }\n+\n             responseObj.put(\"Definition\", definition);\n             String responseStringObj = String.valueOf(responseObj);\n             return Response.ok().entity(responseStringObj).build();", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3NDMxMA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445674310", "bodyText": "better to have this in the response", "author": "1akshitha", "createdAt": "2020-06-25T16:11:19Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/EndPointsApiServiceImpl.java", "diffHunk": "@@ -38,9 +44,19 @@ public Response endPointsGet(String apiName, String label, String apiId, Message\n         JSONObject responseObj = new JSONObject();\n         JSONArray endPointArray = new JSONArray();\n         if (gatewayAPIDTO != null) {\n-            if (gatewayAPIDTO.getEndpointEntriesToBeAdd() != null) {\n+            if (gatewayAPIDTO.getEndpointEntriesToBeAdd() != null ) {\n+                EndpointAdminServiceProxy endpointAdminServiceProxy = new EndpointAdminServiceProxy\n+                        (gatewayAPIDTO.getTenantDomain());\n                 for (GatewayContentDTO gatewayEndpoint : gatewayAPIDTO.getEndpointEntriesToBeAdd()) {\n-                    endPointArray.put(gatewayEndpoint.getContent());\n+                    try {\n+                        if (endpointAdminServiceProxy.isEndpointExist(gatewayEndpoint.getName())) {\n+                            endPointArray.put(endpointAdminServiceProxy.getEndpoints(gatewayEndpoint.getName()));\n+                        } else {\n+                            log.error(gatewayEndpoint.getName() + \" was not deployed in the gateway\");", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcwMjM5MA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445702390", "bodyText": "2bef8ac", "author": "Sarangan0219", "createdAt": "2020-06-25T16:55:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3NDMxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3NDQxMw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445674413", "bodyText": "better to have this in the response", "author": "1akshitha", "createdAt": "2020-06-25T16:11:27Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/LocalEntryApiServiceImpl.java", "diffHunk": "@@ -39,8 +46,19 @@ public Response localEntryGet(String apiName, String label, String apiId, Messag\n         JSONArray localEntryArray = new JSONArray();\n         if (gatewayAPIDTO != null) {\n             if (gatewayAPIDTO.getLocalEntriesToBeAdd() != null) {\n+                LocalEntryServiceProxy localEntryServiceProxy = new\n+                        LocalEntryServiceProxy(gatewayAPIDTO.getTenantDomain());\n                 for (GatewayContentDTO localEntry : gatewayAPIDTO.getLocalEntriesToBeAdd()) {\n-                    localEntryArray.put(localEntry.getContent());\n+                    try {\n+                        if (localEntryServiceProxy.isEntryExists(localEntry.getName())) {\n+                            localEntryArray.put(localEntryServiceProxy.getEntry(localEntry.getName()));\n+                        } else {\n+                            log.error(localEntry.getName() + \" was not deployed in the gateway\");", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcwMjM1NA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445702354", "bodyText": "2bef8ac", "author": "Sarangan0219", "createdAt": "2020-06-25T16:55:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3NDQxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3NDUzMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445674531", "bodyText": "better to have this in the response", "author": "1akshitha", "createdAt": "2020-06-25T16:11:37Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/SequenceApiServiceImpl.java", "diffHunk": "@@ -38,9 +44,19 @@ public Response sequenceGet(String apiName, String label, String apiId, MessageC\n         JSONObject responseObj = new JSONObject();\n         JSONArray sequencesArray = new JSONArray();\n         if (gatewayAPIDTO != null) {\n-            if (gatewayAPIDTO.getSequenceToBeAdd() != null) {\n+            if (gatewayAPIDTO.getSequenceToBeAdd() != null ) {\n+                SequenceAdminServiceProxy sequenceAdminServiceProxy =\n+                        new SequenceAdminServiceProxy(gatewayAPIDTO.getTenantDomain());\n                 for (GatewayContentDTO sequence : gatewayAPIDTO.getSequenceToBeAdd()) {\n-                    sequencesArray.put(sequence.getContent());\n+                    try {\n+                        if (sequenceAdminServiceProxy.isExistingSequence(sequence.getName())) {\n+                            sequencesArray.put(sequenceAdminServiceProxy.getSequence(sequence.getName()));\n+                        } else {\n+                            log.error(sequence.getName() + \" was not deployed in the gateway\");", "originalCommit": "a1562425a0031c8cdf8d2534f344db9910a9d8db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcwMjMyMA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r445702320", "bodyText": "2bef8ac", "author": "Sarangan0219", "createdAt": "2020-06-25T16:55:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3NDUzMQ=="}], "type": "inlineReview"}, {"oid": "2bef8ac27b023cef0271216e1b2942bc739efacc", "url": "https://github.com/wso2/carbon-apimgt/commit/2bef8ac27b023cef0271216e1b2942bc739efacc", "message": "address review comments", "committedDate": "2020-06-25T16:53:11Z", "type": "commit"}, {"oid": "a0712a208818f9e91dae73f39aeda9b50ba9a5ac", "url": "https://github.com/wso2/carbon-apimgt/commit/a0712a208818f9e91dae73f39aeda9b50ba9a5ac", "message": "edit individual synapse artifacts", "committedDate": "2020-06-25T17:43:59Z", "type": "commit"}, {"oid": "79c1b54ed87ee44cc8828ac3065a843208a9967e", "url": "https://github.com/wso2/carbon-apimgt/commit/79c1b54ed87ee44cc8828ac3065a843208a9967e", "message": "add webservice for RESTAPI calls", "committedDate": "2020-06-25T20:18:22Z", "type": "commit"}, {"oid": "7c765d7416c9e1d0f09f8fc67b744a699f2b1e9f", "url": "https://github.com/wso2/carbon-apimgt/commit/7c765d7416c9e1d0f09f8fc67b744a699f2b1e9f", "message": "refractor code", "committedDate": "2020-06-26T10:07:06Z", "type": "commit"}, {"oid": "24dfd6a57a7defae99737ab424e11582068aeac4", "url": "https://github.com/wso2/carbon-apimgt/commit/24dfd6a57a7defae99737ab424e11582068aeac4", "message": "Refractor code", "committedDate": "2020-07-07T04:11:35Z", "type": "commit"}, {"oid": "b4bfdd1bb0369edbe724b7e4d0c34f18b47807dd", "url": "https://github.com/wso2/carbon-apimgt/commit/b4bfdd1bb0369edbe724b7e4d0c34f18b47807dd", "message": "Adding HTTP request for gateway", "committedDate": "2020-07-07T06:58:54Z", "type": "commit"}, {"oid": "926eee0a013c9b54f892e107fe21bef97801eb3d", "url": "https://github.com/wso2/carbon-apimgt/commit/926eee0a013c9b54f892e107fe21bef97801eb3d", "message": "Resolve merge conflicts", "committedDate": "2020-07-10T11:07:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA1NDUxNQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r547054515", "bodyText": "formatting issues", "author": "chashikajw", "createdAt": "2020-12-22T03:58:27Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/ApiArtifactApiServiceImpl.java", "diffHunk": "@@ -18,25 +18,112 @@\n \n package org.wso2.carbon.apimgt.rest.api.gateway.v1.impl;\n \n+import org.apache.axis2.AxisFault;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.json.JSONArray;\n import org.json.JSONObject;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n import org.wso2.carbon.apimgt.api.gateway.GatewayAPIDTO;\n+import org.wso2.carbon.apimgt.api.gateway.GatewayContentDTO;\n import org.wso2.carbon.apimgt.gateway.InMemoryAPIDeployer;\n-import org.wso2.carbon.apimgt.rest.api.gateway.v1.*;\n+import org.wso2.carbon.apimgt.gateway.utils.EndpointAdminServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.LocalEntryServiceProxy;\n+import org.wso2.carbon.apimgt.gateway.utils.SequenceAdminServiceProxy;\n+import org.wso2.carbon.apimgt.impl.APIConstants;\n+import org.wso2.carbon.apimgt.impl.dao.ApiMgtDAO;\n+import org.wso2.carbon.apimgt.rest.api.gateway.v1.ApiArtifactApiService;\n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.wso2.carbon.apimgt.rest.api.util.utils.RestApiUtil;\n+import org.wso2.carbon.endpoint.EndpointAdminException;\n+\n \n import javax.ws.rs.core.Response;\n+import java.util.Map;\n \n public class ApiArtifactApiServiceImpl implements ApiArtifactApiService {\n \n-    public Response apiArtifactGet(String apiName, String label, String apiId, MessageContext messageContext) {\n+    private static final Log log = LogFactory.getLog(ApiArtifactApiServiceImpl.class);\n+    private final String SUPER_TENAT_DOMAIN = \"carbon.super\";\n+\n+    @Override\n+    public Response apiArtifactGet(String apiName, String version , String tenantDomain,\n+            MessageContext messageContext) {\n \n         InMemoryAPIDeployer inMemoryApiDeployer = new InMemoryAPIDeployer();\n+        if (tenantDomain == null){\n+            tenantDomain =SUPER_TENAT_DOMAIN;", "originalCommit": "926eee0a013c9b54f892e107fe21bef97801eb3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjA3MzY4Nw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r552073687", "bodyText": "Fixed in the latest version https://github.com/wso2/carbon-apimgt/blob/master/components/apimgt/org.wso2.carbon.apimgt.rest.api.gateway.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/gateway/v1/impl/ApiArtifactApiServiceImpl.java#L54", "author": "Sarangan0219", "createdAt": "2021-01-05T17:16:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA1NDUxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA1NTgxMA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r547055810", "bodyText": "extra line spaces", "author": "chashikajw", "createdAt": "2020-12-22T04:04:14Z", "path": "components/apimgt/org.wso2.carbon.apimgt.internal.service/src/gen/java/org/wso2/carbon/apimgt/internal/service/SynapseAttributesApi.java", "diffHunk": "@@ -0,0 +1,50 @@\n+package org.wso2.carbon.apimgt.internal.service;\n+\n+import org.wso2.carbon.apimgt.internal.service.dto.ErrorDTO;\n+import org.wso2.carbon.apimgt.internal.service.dto.SynapseAttributesDTO;\n+import org.wso2.carbon.apimgt.internal.service.SynapseAttributesApiService;\n+import org.wso2.carbon.apimgt.internal.service.impl.SynapseAttributesApiServiceImpl;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n+\n+import javax.ws.rs.*;\n+import javax.ws.rs.core.Context;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.SecurityContext;\n+import javax.inject.Inject;\n+\n+import io.swagger.annotations.*;\n+import java.io.InputStream;\n+\n+import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.apache.cxf.jaxrs.ext.multipart.Attachment;\n+import org.apache.cxf.jaxrs.ext.multipart.Multipart;\n+\n+import java.util.Map;\n+import java.util.List;\n+import javax.validation.constraints.*;\n+@Path(\"/synapse-attributes\")\n+\n+@Api(description = \"the synapse-attributes API\")\n+\n+@Produces({ \"application/json\" })\n+\n+\n+public class SynapseAttributesApi  {\n+\n+  @Context MessageContext securityContext;\n+\n+SynapseAttributesApiService delegate = new SynapseAttributesApiServiceImpl();\n+\n+\n+    @GET\n+    \n+    ", "originalCommit": "926eee0a013c9b54f892e107fe21bef97801eb3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjA3MjIzMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r552072231", "bodyText": "That is an Auto-generated File. We don't need to modify anything there.", "author": "Sarangan0219", "createdAt": "2021-01-05T17:14:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA1NTgxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA1NjAyMA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r547056020", "bodyText": "Extra added line spaces", "author": "chashikajw", "createdAt": "2020-12-22T04:05:05Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/GatewayArtifactsMgtDAO.java", "diffHunk": "@@ -246,9 +246,70 @@ public boolean isAPIArtifactExists(String APIId, String gatewayLabel) throws API\n         return false;\n     }\n \n+\n+", "originalCommit": "926eee0a013c9b54f892e107fe21bef97801eb3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjA3NTUxOA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8784#discussion_r552075518", "bodyText": "Fixed 8254a1c", "author": "Sarangan0219", "createdAt": "2021-01-05T17:19:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA1NjAyMA=="}], "type": "inlineReview"}]}