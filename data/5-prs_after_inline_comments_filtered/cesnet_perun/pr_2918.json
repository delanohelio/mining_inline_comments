{"pr_number": 2918, "pr_title": "Sponsorship ends with last sponsor", "pr_createdAt": "2020-10-06T08:22:08Z", "pr_url": "https://github.com/CESNET/perun/pull/2918", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgyNDM0Ng==", "url": "https://github.com/CESNET/perun/pull/2918#discussion_r500824346", "bodyText": "Just a typo:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertFalse(\"Member's' sponsorship should have been removed.\",sponsoredMember.isSponsored());\n          \n          \n            \n            \t\tassertFalse(\"Member's sponsorship should have been removed.\",sponsoredMember.isSponsored());", "author": "metodej", "createdAt": "2020-10-07T08:19:03Z", "path": "perun-core/src/test/java/cz/metacentrum/perun/core/entry/MembersManagerEntryIntegrationTest.java", "diffHunk": "@@ -1413,7 +1413,7 @@ public void createSponsoredMember() throws Exception {\n \t\tperun.getGroupsManagerBl().removeMember(sess,sponsors,sponsorMember);\n \t\t//refresh from DB\n \t\tsponsoredMember = perun.getMembersManagerBl().getMemberById(sess,sponsoredMember.getId());\n-\t\tassertTrue(\"sponsored member without sponsors should still have flag sponsored\",sponsoredMember.isSponsored());\n+\t\tassertFalse(\"Member's' sponsorship should have been removed.\",sponsoredMember.isSponsored());", "originalCommit": "763b43fdacb1411ac617f949ba4d0992be4f5dc9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUyNjA1OQ==", "url": "https://github.com/CESNET/perun/pull/2918#discussion_r501526059", "bodyText": "fixed", "author": "balcirakpeter", "createdAt": "2020-10-08T08:07:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgyNDM0Ng=="}], "type": "inlineReview"}, {"oid": "63552fe71123f69e731d0095c3580bdbe196502f", "url": "https://github.com/CESNET/perun/commit/63552fe71123f69e731d0095c3580bdbe196502f", "message": "Sponsorship ends with last sponsor\n\n- Method removeSponsor was changed.\n  Now when a last member's sponsor is removed, also member's\n  sponshorship is removed. Therefore, member expires as a normal member.\n- Method deleteMember was also changed.\n  Now sponsors of member are always removed. It does\n  not matter if the member is sponsored or not. It is because when\n  member's sponsorship is set to false, his links to sponsors preserves\n  (as inactive). Therefore, it would not be possible to delete member.", "committedDate": "2020-10-08T08:06:47Z", "type": "commit"}, {"oid": "63552fe71123f69e731d0095c3580bdbe196502f", "url": "https://github.com/CESNET/perun/commit/63552fe71123f69e731d0095c3580bdbe196502f", "message": "Sponsorship ends with last sponsor\n\n- Method removeSponsor was changed.\n  Now when a last member's sponsor is removed, also member's\n  sponshorship is removed. Therefore, member expires as a normal member.\n- Method deleteMember was also changed.\n  Now sponsors of member are always removed. It does\n  not matter if the member is sponsored or not. It is because when\n  member's sponsorship is set to false, his links to sponsors preserves\n  (as inactive). Therefore, it would not be possible to delete member.", "committedDate": "2020-10-08T08:06:47Z", "type": "forcePushed"}]}