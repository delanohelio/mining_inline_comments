{"pr_number": 8914, "pr_title": "Add code for AArch64 to DDR JITRegMap", "pr_createdAt": "2020-03-19T10:16:55Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/8914", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzNTQzNA==", "url": "https://github.com/eclipse-openj9/openj9/pull/8914#discussion_r395135434", "bodyText": "Why are these listed in reverse order? Why not the same order as [1]?\n[1] https://github.com/eclipse/openj9/blob/master/runtime/util/jitregs.c#L394-L401", "author": "keithc-ca", "createdAt": "2020-03-19T15:57:42Z", "path": "debugtools/DDR_VM/src/com/ibm/j9ddr/vm29/j9/stackwalker/JITRegMap.java", "diffHunk": "@@ -371,6 +371,80 @@\n \t\t\t\t\t\t0x06\t/* jit_r6 */\n \t\t\t\t};\n \t\t\t}\n+\t\t} else if (J9ConfigFlags.arch_aarch64) {\n+\t\t\t/* 64 bit only */\n+\t\t\tjitRegisterNames = new String[] {\n+\t\t\t\t\t\"jit_r0\",\n+\t\t\t\t\t\"jit_r1\",\n+\t\t\t\t\t\"jit_r2\",\n+\t\t\t\t\t\"jit_r3\",\n+\t\t\t\t\t\"jit_r4\",\n+\t\t\t\t\t\"jit_r5\",\n+\t\t\t\t\t\"jit_r6\",\n+\t\t\t\t\t\"jit_r7\",\n+\t\t\t\t\t\"jit_r8\",\n+\t\t\t\t\t\"jit_r9\",\n+\t\t\t\t\t\"jit_r10\",\n+\t\t\t\t\t\"jit_r11\",\n+\t\t\t\t\t\"jit_r12\",\n+\t\t\t\t\t\"jit_r13\",\n+\t\t\t\t\t\"jit_r14\",\n+\t\t\t\t\t\"jit_r15\",\n+\t\t\t\t\t\"jit_r16\",\n+\t\t\t\t\t\"jit_r17\",\n+\t\t\t\t\t\"jit_r18\",\n+\t\t\t\t\t\"jit_r19\",\n+\t\t\t\t\t\"jit_r20\",\n+\t\t\t\t\t\"jit_r21\",\n+\t\t\t\t\t\"jit_r22\",\n+\t\t\t\t\t\"jit_r23\",\n+\t\t\t\t\t\"jit_r24\",\n+\t\t\t\t\t\"jit_r25\",\n+\t\t\t\t\t\"jit_r26\",\n+\t\t\t\t\t\"jit_r27\",\n+\t\t\t\t\t\"jit_r28\",\n+\t\t\t\t\t\"jit_r29\",\n+\t\t\t\t\t\"jit_r30\",\n+\t\t\t\t\t\"jit_r31\"\n+\t\t\t};\n+\n+\t\t\tjitCalleeDestroyedRegisterList = new int[] {\n+\t\t\t\t\t0x00,   /* jit_r0 */\n+\t\t\t\t\t0x01,   /* jit_r1 */\n+\t\t\t\t\t0x02,   /* jit_r2 */\n+\t\t\t\t\t0x03,   /* jit_r3 */\n+\t\t\t\t\t0x04,   /* jit_r4 */\n+\t\t\t\t\t0x05,   /* jit_r5 */\n+\t\t\t\t\t0x06,   /* jit_r6 */\n+\t\t\t\t\t0x07,   /* jit_r7 */\n+\t\t\t\t\t0x08,   /* jit_r8 */\n+\t\t\t\t\t0x09,   /* jit_r9 */\n+\t\t\t\t\t0x0A,   /* jit_r10 */\n+\t\t\t\t\t0x0B,   /* jit_r11 */\n+\t\t\t\t\t0x0C,   /* jit_r12 */\n+\t\t\t\t\t0x0D,   /* jit_r13 */\n+\t\t\t\t\t0x0E,   /* jit_r14 */\n+\t\t\t\t\t0x0F,   /* jit_r15 */\n+\t\t\t\t\t0x10,   /* jit_r16 */\n+\t\t\t\t\t0x11,   /* jit_r17 */\n+\t\t\t\t\t0x12,   /* jit_r18 */\n+\t\t\t\t\t0x13,   /* jit_r19 */\n+\t\t\t\t\t0x14,   /* jit_r20 */\n+\t\t\t\t\t0x1D,   /* jit_r29 */\n+\t\t\t\t\t0x1E,   /* jit_r30 */\n+\t\t\t\t\t0x1F    /* jit_r31 */\n+\t\t\t};\n+\n+\t\t\tjitCalleeSavedRegisterList = new int[] {\n+\t\t\t\t\t0x1C,   /* jit_r28 */\n+\t\t\t\t\t0x1B,   /* jit_r27 */\n+\t\t\t\t\t0x1A,   /* jit_r26 */\n+\t\t\t\t\t0x19,   /* jit_r25 */\n+\t\t\t\t\t0x18,   /* jit_r24 */\n+\t\t\t\t\t0x17,   /* jit_r23 */\n+\t\t\t\t\t0x16,   /* jit_r22 */\n+\t\t\t\t\t0x15    /* jit_r21 */", "originalCommit": "b32965bab1f5e8cca89300e1e921c0f372984aa8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUzNzM3Ng==", "url": "https://github.com/eclipse-openj9/openj9/pull/8914#discussion_r395537376", "bodyText": "I didn't notice that JITRegMap.java needs to be consistent with jitregs.c, and I wrote the code based on the power version.\nUpdated.", "author": "knn-k", "createdAt": "2020-03-20T10:04:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzNTQzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzNjg2Mw==", "url": "https://github.com/eclipse-openj9/openj9/pull/8914#discussion_r395136863", "bodyText": "Why are these included? They're not included in [1].\n[1] https://github.com/eclipse/openj9/blob/master/runtime/util/jitregs.c#L370", "author": "keithc-ca", "createdAt": "2020-03-19T15:59:34Z", "path": "debugtools/DDR_VM/src/com/ibm/j9ddr/vm29/j9/stackwalker/JITRegMap.java", "diffHunk": "@@ -371,6 +371,80 @@\n \t\t\t\t\t\t0x06\t/* jit_r6 */\n \t\t\t\t};\n \t\t\t}\n+\t\t} else if (J9ConfigFlags.arch_aarch64) {\n+\t\t\t/* 64 bit only */\n+\t\t\tjitRegisterNames = new String[] {\n+\t\t\t\t\t\"jit_r0\",\n+\t\t\t\t\t\"jit_r1\",\n+\t\t\t\t\t\"jit_r2\",\n+\t\t\t\t\t\"jit_r3\",\n+\t\t\t\t\t\"jit_r4\",\n+\t\t\t\t\t\"jit_r5\",\n+\t\t\t\t\t\"jit_r6\",\n+\t\t\t\t\t\"jit_r7\",\n+\t\t\t\t\t\"jit_r8\",\n+\t\t\t\t\t\"jit_r9\",\n+\t\t\t\t\t\"jit_r10\",\n+\t\t\t\t\t\"jit_r11\",\n+\t\t\t\t\t\"jit_r12\",\n+\t\t\t\t\t\"jit_r13\",\n+\t\t\t\t\t\"jit_r14\",\n+\t\t\t\t\t\"jit_r15\",\n+\t\t\t\t\t\"jit_r16\",\n+\t\t\t\t\t\"jit_r17\",\n+\t\t\t\t\t\"jit_r18\",\n+\t\t\t\t\t\"jit_r19\",\n+\t\t\t\t\t\"jit_r20\",\n+\t\t\t\t\t\"jit_r21\",\n+\t\t\t\t\t\"jit_r22\",\n+\t\t\t\t\t\"jit_r23\",\n+\t\t\t\t\t\"jit_r24\",\n+\t\t\t\t\t\"jit_r25\",\n+\t\t\t\t\t\"jit_r26\",\n+\t\t\t\t\t\"jit_r27\",\n+\t\t\t\t\t\"jit_r28\",\n+\t\t\t\t\t\"jit_r29\",\n+\t\t\t\t\t\"jit_r30\",\n+\t\t\t\t\t\"jit_r31\"\n+\t\t\t};\n+\n+\t\t\tjitCalleeDestroyedRegisterList = new int[] {\n+\t\t\t\t\t0x00,   /* jit_r0 */\n+\t\t\t\t\t0x01,   /* jit_r1 */\n+\t\t\t\t\t0x02,   /* jit_r2 */\n+\t\t\t\t\t0x03,   /* jit_r3 */\n+\t\t\t\t\t0x04,   /* jit_r4 */\n+\t\t\t\t\t0x05,   /* jit_r5 */\n+\t\t\t\t\t0x06,   /* jit_r6 */\n+\t\t\t\t\t0x07,   /* jit_r7 */\n+\t\t\t\t\t0x08,   /* jit_r8 */\n+\t\t\t\t\t0x09,   /* jit_r9 */\n+\t\t\t\t\t0x0A,   /* jit_r10 */\n+\t\t\t\t\t0x0B,   /* jit_r11 */\n+\t\t\t\t\t0x0C,   /* jit_r12 */\n+\t\t\t\t\t0x0D,   /* jit_r13 */\n+\t\t\t\t\t0x0E,   /* jit_r14 */\n+\t\t\t\t\t0x0F,   /* jit_r15 */\n+\t\t\t\t\t0x10,   /* jit_r16 */\n+\t\t\t\t\t0x11,   /* jit_r17 */\n+\t\t\t\t\t0x12,   /* jit_r18 */\n+\t\t\t\t\t0x13,   /* jit_r19 */\n+\t\t\t\t\t0x14,   /* jit_r20 */\n+\t\t\t\t\t0x1D,   /* jit_r29 */\n+\t\t\t\t\t0x1E,   /* jit_r30 */\n+\t\t\t\t\t0x1F    /* jit_r31 */", "originalCommit": "b32965bab1f5e8cca89300e1e921c0f372984aa8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUzNzU5MA==", "url": "https://github.com/eclipse-openj9/openj9/pull/8914#discussion_r395537590", "bodyText": "Same as above.  Updated the code.", "author": "knn-k", "createdAt": "2020-03-20T10:04:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEzNjg2Mw=="}], "type": "inlineReview"}, {"oid": "6b6d6c6256a96bd74ef611b884f166db2f996828", "url": "https://github.com/eclipse-openj9/openj9/commit/6b6d6c6256a96bd74ef611b884f166db2f996828", "message": "Add code for AArch64 to DDR JITRegMap\n\nThis commit adds code for AArch64 to DDR JITRegMap, initializing\nthree arrays.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>", "committedDate": "2020-03-20T09:56:16Z", "type": "commit"}, {"oid": "6b6d6c6256a96bd74ef611b884f166db2f996828", "url": "https://github.com/eclipse-openj9/openj9/commit/6b6d6c6256a96bd74ef611b884f166db2f996828", "message": "Add code for AArch64 to DDR JITRegMap\n\nThis commit adds code for AArch64 to DDR JITRegMap, initializing\nthree arrays.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>", "committedDate": "2020-03-20T09:56:16Z", "type": "forcePushed"}]}