{"pr_number": 11016, "pr_title": "Add OpenJ9DiagnosticsMXBean queryDumpOptions() and tests", "pr_createdAt": "2020-10-27T22:24:33Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/11016", "timeline": [{"oid": "68f585856eac962c2ec89ba374d3636b09294ed1", "url": "https://github.com/eclipse-openj9/openj9/commit/68f585856eac962c2ec89ba374d3636b09294ed1", "message": "Add OpenJ9DiagnosticsMXBean queryDumpOptions() and tests\n\nReplace test modes Mode100, Mode101 with NoOptions, otherwise the test\nonly runs in XL mode. Using these modes is historic and unnecessary.\n\nMy original plan was to add a getter to correspond with\nsetDumpOptions(), however the Dump.queryDumpOptions() API returns a\nString[] containing the entire -Xdump configuration, like follows. Using\nthe name getDumpOptions() in the MXBean results in\n`javax.management.NotCompliantMBeanException: Getter and setter for\nDumpOptions have inconsistent types`.\n```\nsystem:events=gpf+abort+traceassert+corruptcache,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..0,priority=999,request=serial\nsystem:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..1,priority=999,request=exclusive+compact+prepwalk\nheap:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/heapdump.%Y%m%d.%H%M%S.%pid.%seq.phd,range=1..4,priority=500,request=exclusive+compact+prepwalk,opts=PHD\netc.\n```\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-10-27T22:30:59Z", "type": "forcePushed"}, {"oid": "1e70ba9df7a37d807366567bb2e80fc22b4aff36", "url": "https://github.com/eclipse-openj9/openj9/commit/1e70ba9df7a37d807366567bb2e80fc22b4aff36", "message": "Add OpenJ9DiagnosticsMXBean queryDumpOptions() and tests\n\nReplace test modes Mode100, Mode101 with NoOptions, otherwise the test\nonly runs in XL mode. Using these modes is historic and unnecessary.\n\nMy original plan was to add a getter to correspond with\nsetDumpOptions(), however the Dump.queryDumpOptions() API returns a\nString[] containing the entire -Xdump configuration, like follows. Using\nthe name getDumpOptions() in the MXBean results in\n`javax.management.NotCompliantMBeanException: Getter and setter for\nDumpOptions have inconsistent types`.\n```\nsystem:events=gpf+abort+traceassert+corruptcache,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..0,priority=999,request=serial\nsystem:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..1,priority=999,request=exclusive+compact+prepwalk\nheap:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/heapdump.%Y%m%d.%H%M%S.%pid.%seq.phd,range=1..4,priority=500,request=exclusive+compact+prepwalk,opts=PHD\netc.\n```\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-10-27T22:34:34Z", "type": "forcePushed"}, {"oid": "3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "url": "https://github.com/eclipse-openj9/openj9/commit/3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "message": "Add OpenJ9DiagnosticsMXBean queryDumpOptions() and tests\n\nReplace test modes Mode100, Mode101 with NoOptions, otherwise the test\nonly runs in XL mode. Using these modes is historic and unnecessary.\n\nMy original plan was to add a getter to correspond with\nsetDumpOptions(), however the Dump.queryDumpOptions() API returns a\nString[] containing the entire -Xdump configuration, like follows. Using\nthe name getDumpOptions() in the MXBean results in\n`javax.management.NotCompliantMBeanException: Getter and setter for\nDumpOptions have inconsistent types`.\n```\nsystem:events=gpf+abort+traceassert+corruptcache,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..0,priority=999,request=serial\nsystem:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..1,priority=999,request=exclusive+compact+prepwalk\nheap:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/heapdump.%Y%m%d.%H%M%S.%pid.%seq.phd,range=1..4,priority=500,request=exclusive+compact+prepwalk,opts=PHD\netc.\n```\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-10-27T22:56:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxMzgxNA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514213814", "bodyText": "The possibility of InvalidOptionException should be documented.\nBetter, just remove it from the throws clause - it doesn't appear to be possible.", "author": "keithc-ca", "createdAt": "2020-10-29T12:18:01Z", "path": "jcl/src/jdk.management/share/classes/openj9/lang/management/OpenJ9DiagnosticsMXBean.java", "diffHunk": "@@ -68,10 +68,20 @@\n \t */\n \tpublic void resetDumpOptions() throws ConfigurationUnavailableException;\n \n+\t/**\n+\t * Returns the current dump configuration as an array of Strings.\n+\t * The syntax of the option Strings is the same as the -Xdump command-line option,\n+\t * with the initial -Xdump: omitted. See the -Xdump option section on dump agents in\n+\t * the documentation for the OpenJ9 JVM.\n+\t *\n+\t * @throws SecurityException if there is a security manager and it doesn't allow the checks required to read the dump settings\n+\t */\n+\tpublic String[] queryDumpOptions() throws InvalidOptionException, ConfigurationUnavailableException;", "originalCommit": "3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIzNjMyNA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514236324", "bodyText": "Actually, neither exception can be thrown (the implementation has no throws clause).", "author": "keithc-ca", "createdAt": "2020-10-29T12:56:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxMzgxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM2MTU5OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514361598", "bodyText": "I forgot to remove these.", "author": "pshipton", "createdAt": "2020-10-29T15:42:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxMzgxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxNzA1NQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514217055", "bodyText": "While you're fixing inconsistencies in indentation, please fix all of them.", "author": "keithc-ca", "createdAt": "2020-10-29T12:24:07Z", "path": "jcl/src/openj9.jvm/share/classes/com/ibm/jvm/Dump.java", "diffHunk": "@@ -627,10 +627,10 @@ public static void setDumpOptions(String dumpOptions) throws InvalidDumpOptionEx\n     }\n     \n     /**", "originalCommit": "3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIyOTA4Ng==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514229086", "bodyText": "This might return null which is not documented.", "author": "keithc-ca", "createdAt": "2020-10-29T12:44:30Z", "path": "jcl/src/jdk.management/share/classes/openj9/lang/management/internal/OpenJ9DiagnosticsMXBeanImpl.java", "diffHunk": "@@ -111,6 +112,23 @@ public void resetDumpOptions() throws ConfigurationUnavailableException {\n \t\t}\n \t}\n \n+\t/**\n+\t * {@inheritDoc}\n+\t */\n+\t@Override\n+\tpublic String[] queryDumpOptions() {\n+\t\tcheckManagementSecurityPermission();\n+\t\ttry {\n+\t\t\t/*[IF Sidecar19-SE]*/ if (2 > 1) {\n+\t\t\treturn (String[])dump_queryDumpOptions.invoke(null);", "originalCommit": "3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM2MzkxMg==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514363912", "bodyText": "It shouldn't ever return null, I think that only occurs if there is a programming error. Added , or null if an internal error occurs. to cover that case.", "author": "pshipton", "createdAt": "2020-10-29T15:45:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIyOTA4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIzODYyNw==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514238627", "bodyText": "No trailing whitespace, please (lines 264 & 270).", "author": "keithc-ca", "createdAt": "2020-10-29T12:59:41Z", "path": "test/functional/JLM_Tests/src/org/openj9/test/java/lang/management/TestOpenJ9DiagnosticsMXBean.java", "diffHunk": "@@ -252,8 +252,38 @@ private void testLocal_setDumpOptions() throws InvalidOptionException, Configura\n \t\tString dir = \".\" + File.separator + \"local\";\n \t\tString dumpFileName = \"javacore_alloc.txt\";\n \t\tString dumpFilePath = dir + File.separator + dumpFileName;\n+\n \t\tdiagBean.resetDumpOptions();\n+\n+\t\tString[] resetOptions = diagBean.queryDumpOptions();\n+\t\tfor (String option : resetOptions) {\n+\t\t\tif (option.startsWith(\"java:events=allocation\")) {\n+\t\t\t\tAssert.fail(\"Found unexpected dump option: \" + option);\n+\t\t\t}\n+\t\t}\n+\t\t\n \t\tdiagBean.setDumpOptions(\"java:events=allocation,filter=#1k,range=1..1,file=\" + dumpFilePath);\n+\n+\t\tboolean optionFound = false;\n+\t\tString[] options = diagBean.queryDumpOptions();\n+\t\tfor (String option : options) {\n+\t\t\t// The options get reordered and defaults added, check parts separately ", "originalCommit": "3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI0MzIwNA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514243204", "bodyText": "nit: space after :", "author": "keithc-ca", "createdAt": "2020-10-29T13:06:57Z", "path": "test/functional/JLM_Tests/src/org/openj9/test/java/lang/management/TestOpenJ9DiagnosticsMXBean.java", "diffHunk": "@@ -339,11 +369,50 @@ private void testRemote_setDumpOptions() throws InvalidOptionException, Configur\n \t\tString dir = \".\" + File.separator + \"remote\";\n \t\tString dumpFileName = \"javacore_alloc.txt\";\n \t\tString dumpFilePath = dir + File.separator + dumpFileName;\n+\n \t\tdiagBeanRemote.resetDumpOptions();\n+\n+\t\tString[] resetOptions = diagBeanRemote.queryDumpOptions();\n+\t\tfor (String option : resetOptions) {\n+\t\t\tif (option.startsWith(\"java:events=allocation\") || option.startsWith(\"java:events=catch\")) {\n+\t\t\t\tAssert.fail(\"Found unexpected dump option:\" + option);", "originalCommit": "3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI0Mzk2MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514243961", "bodyText": "trailing whitespace", "author": "keithc-ca", "createdAt": "2020-10-29T13:08:10Z", "path": "test/functional/JLM_Tests/src/org/openj9/test/java/lang/management/TestOpenJ9DiagnosticsMXBean.java", "diffHunk": "@@ -339,11 +369,50 @@ private void testRemote_setDumpOptions() throws InvalidOptionException, Configur\n \t\tString dir = \".\" + File.separator + \"remote\";\n \t\tString dumpFileName = \"javacore_alloc.txt\";\n \t\tString dumpFilePath = dir + File.separator + dumpFileName;\n+\n \t\tdiagBeanRemote.resetDumpOptions();\n+\n+\t\tString[] resetOptions = diagBeanRemote.queryDumpOptions();\n+\t\tfor (String option : resetOptions) {\n+\t\t\tif (option.startsWith(\"java:events=allocation\") || option.startsWith(\"java:events=catch\")) {\n+\t\t\t\tAssert.fail(\"Found unexpected dump option:\" + option);\n+\t\t\t}\n+\t\t}\n+\n \t\tdiagBeanRemote.setDumpOptions(\"java:events=allocation,filter=#1k,range=1..1,file=\" + dumpFilePath);\n \t\tdumpFileName = \"javacore_unsupported.txt\";\n-\t\tdumpFilePath = dir + File.separator + dumpFileName;\n-\t\tdiagBeanRemote.setDumpOptions(\"java:events=catch,filter=java/io/UnsupportedEncodingException,range=1..1,file=\" + dumpFilePath);\n+\t\tString catchDumpFilePath = dir + File.separator + dumpFileName;\n+\t\tdiagBeanRemote.setDumpOptions(\"java:events=catch,filter=java/io/UnsupportedEncodingException,range=1..1,file=\" + catchDumpFilePath);\n+\n+\t\tString[] options = diagBeanRemote.queryDumpOptions();\n+\t\tboolean allocOptionFound = false;\n+\t\tboolean catchOptionFound = false;\n+\t\tfor (String option : options) {\n+\t\t\t// The options get reordered and defaults added, check parts separately ", "originalCommit": "3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI0NDUxNg==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514244516", "bodyText": "Please indent consistently (like 392-399, above).", "author": "keithc-ca", "createdAt": "2020-10-29T13:09:05Z", "path": "test/functional/JLM_Tests/src/org/openj9/test/java/lang/management/TestOpenJ9DiagnosticsMXBean.java", "diffHunk": "@@ -339,11 +369,50 @@ private void testRemote_setDumpOptions() throws InvalidOptionException, Configur\n \t\tString dir = \".\" + File.separator + \"remote\";\n \t\tString dumpFileName = \"javacore_alloc.txt\";\n \t\tString dumpFilePath = dir + File.separator + dumpFileName;\n+\n \t\tdiagBeanRemote.resetDumpOptions();\n+\n+\t\tString[] resetOptions = diagBeanRemote.queryDumpOptions();\n+\t\tfor (String option : resetOptions) {\n+\t\t\tif (option.startsWith(\"java:events=allocation\") || option.startsWith(\"java:events=catch\")) {\n+\t\t\t\tAssert.fail(\"Found unexpected dump option:\" + option);\n+\t\t\t}\n+\t\t}\n+\n \t\tdiagBeanRemote.setDumpOptions(\"java:events=allocation,filter=#1k,range=1..1,file=\" + dumpFilePath);\n \t\tdumpFileName = \"javacore_unsupported.txt\";\n-\t\tdumpFilePath = dir + File.separator + dumpFileName;\n-\t\tdiagBeanRemote.setDumpOptions(\"java:events=catch,filter=java/io/UnsupportedEncodingException,range=1..1,file=\" + dumpFilePath);\n+\t\tString catchDumpFilePath = dir + File.separator + dumpFileName;\n+\t\tdiagBeanRemote.setDumpOptions(\"java:events=catch,filter=java/io/UnsupportedEncodingException,range=1..1,file=\" + catchDumpFilePath);\n+\n+\t\tString[] options = diagBeanRemote.queryDumpOptions();\n+\t\tboolean allocOptionFound = false;\n+\t\tboolean catchOptionFound = false;\n+\t\tfor (String option : options) {\n+\t\t\t// The options get reordered and defaults added, check parts separately \n+\t\t\tif (option.startsWith(\"java:events=allocation,\") &&\n+\t\t\t\toption.contains(\",filter=#1k\") &&\n+\t\t\t\toption.contains(\",range=1..1\") &&\n+\t\t\t\toption.contains(dumpFilePath)\n+\t\t\t) {\n+\t\t\t\tallocOptionFound = true;\n+\t\t\t\tif (catchOptionFound) break;\n+\t\t\t}\n+\t\t\tif (option.startsWith(\"java:events=catch,\") &&\n+\t\t\t\t\toption.contains(\",filter=java/io/UnsupportedEncodingException\") &&\n+\t\t\t\t\toption.contains(\",range=1..1\") &&\n+\t\t\t\t\toption.contains(catchDumpFilePath)\n+\t\t\t\t) {\n+\t\t\t\t\tcatchOptionFound = true;\n+\t\t\t\t\tif (allocOptionFound) break;\n+\t\t\t\t}", "originalCommit": "3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI0NDY1OQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514244659", "bodyText": "trailing whitespace", "author": "keithc-ca", "createdAt": "2020-10-29T13:09:18Z", "path": "test/functional/JLM_Tests/src/org/openj9/test/java/lang/management/TestOpenJ9DiagnosticsMXBean.java", "diffHunk": "@@ -339,11 +369,50 @@ private void testRemote_setDumpOptions() throws InvalidOptionException, Configur\n \t\tString dir = \".\" + File.separator + \"remote\";\n \t\tString dumpFileName = \"javacore_alloc.txt\";\n \t\tString dumpFilePath = dir + File.separator + dumpFileName;\n+\n \t\tdiagBeanRemote.resetDumpOptions();\n+\n+\t\tString[] resetOptions = diagBeanRemote.queryDumpOptions();\n+\t\tfor (String option : resetOptions) {\n+\t\t\tif (option.startsWith(\"java:events=allocation\") || option.startsWith(\"java:events=catch\")) {\n+\t\t\t\tAssert.fail(\"Found unexpected dump option:\" + option);\n+\t\t\t}\n+\t\t}\n+\n \t\tdiagBeanRemote.setDumpOptions(\"java:events=allocation,filter=#1k,range=1..1,file=\" + dumpFilePath);\n \t\tdumpFileName = \"javacore_unsupported.txt\";\n-\t\tdumpFilePath = dir + File.separator + dumpFileName;\n-\t\tdiagBeanRemote.setDumpOptions(\"java:events=catch,filter=java/io/UnsupportedEncodingException,range=1..1,file=\" + dumpFilePath);\n+\t\tString catchDumpFilePath = dir + File.separator + dumpFileName;\n+\t\tdiagBeanRemote.setDumpOptions(\"java:events=catch,filter=java/io/UnsupportedEncodingException,range=1..1,file=\" + catchDumpFilePath);\n+\n+\t\tString[] options = diagBeanRemote.queryDumpOptions();\n+\t\tboolean allocOptionFound = false;\n+\t\tboolean catchOptionFound = false;\n+\t\tfor (String option : options) {\n+\t\t\t// The options get reordered and defaults added, check parts separately \n+\t\t\tif (option.startsWith(\"java:events=allocation,\") &&\n+\t\t\t\toption.contains(\",filter=#1k\") &&\n+\t\t\t\toption.contains(\",range=1..1\") &&\n+\t\t\t\toption.contains(dumpFilePath)\n+\t\t\t) {\n+\t\t\t\tallocOptionFound = true;\n+\t\t\t\tif (catchOptionFound) break;\n+\t\t\t}\n+\t\t\tif (option.startsWith(\"java:events=catch,\") &&\n+\t\t\t\t\toption.contains(\",filter=java/io/UnsupportedEncodingException\") &&\n+\t\t\t\t\toption.contains(\",range=1..1\") &&\n+\t\t\t\t\toption.contains(catchDumpFilePath)\n+\t\t\t\t) {\n+\t\t\t\t\tcatchOptionFound = true;\n+\t\t\t\t\tif (allocOptionFound) break;\n+\t\t\t\t}\n+\t\t}\n+\t\tif (!allocOptionFound || !catchOptionFound) {\n+\t\t\tfor (String option : options) {\n+\t\t\t\tSystem.out.println(option);\n+\t\t\t}\n+\t\t\tAssert.fail(\"Failed to find expected dump options\");\n+\t\t}\n+\t\t", "originalCommit": "3ad56b3958fc19b352ad7cbe243047e7aeadaf54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1f5615bb77f7b59f34dda8c092cfec5ec8251183", "url": "https://github.com/eclipse-openj9/openj9/commit/1f5615bb77f7b59f34dda8c092cfec5ec8251183", "message": "Add OpenJ9DiagnosticsMXBean queryDumpOptions() and tests\n\nReplace test modes Mode100, Mode101 with NoOptions, otherwise the test\nonly runs in XL mode. Using these modes is historic and unnecessary.\n\nMy original plan was to add a getter to correspond with\nsetDumpOptions(), however the Dump.queryDumpOptions() API returns a\nString[] containing the entire -Xdump configuration, like follows. Using\nthe name getDumpOptions() in the MXBean results in\n`javax.management.NotCompliantMBeanException: Getter and setter for\nDumpOptions have inconsistent types`.\n```\nsystem:events=gpf+abort+traceassert+corruptcache,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..0,priority=999,request=serial\nsystem:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..1,priority=999,request=exclusive+compact+prepwalk\nheap:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/heapdump.%Y%m%d.%H%M%S.%pid.%seq.phd,range=1..4,priority=500,request=exclusive+compact+prepwalk,opts=PHD\netc.\n```\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-10-29T15:47:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM5NjQ2Mw==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514396463", "bodyText": "I'm not sure why you modified these two lines, but there's a strange mix of indentation styles:\n\n384 starts with 4 spaces and a tab\n385 & 386 start with a tab, a space and a tab\n\nMaybe we should defer cleaning up that mess?", "author": "keithc-ca", "createdAt": "2020-10-29T16:28:06Z", "path": "jcl/src/openj9.jvm/share/classes/com/ibm/jvm/Dump.java", "diffHunk": "@@ -382,8 +382,8 @@ public static String systemDumpToFile(String fileNamePattern) throws InvalidDump\n     \t\trequest = \"system\"; //$NON-NLS-1$\n     \t}\n     \tString dump = null;\n-       \tdump = triggerDump(request, \"systemDumpToFile\"); //$NON-NLS-1$\n-       \treturn dump;\n+\t \tdump = triggerDump(request, \"systemDumpToFile\"); //$NON-NLS-1$\n+\t \treturn dump;", "originalCommit": "1f5615bb77f7b59f34dda8c092cfec5ec8251183", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQyMDY3NQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514420675", "bodyText": "Tried again, please see the latest update.", "author": "pshipton", "createdAt": "2020-10-29T17:01:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM5NjQ2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM5Njg5MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514396891", "bodyText": "nit: double space before 'the'", "author": "keithc-ca", "createdAt": "2020-10-29T16:28:39Z", "path": "jcl/src/openj9.jvm/share/classes/com/ibm/jvm/Dump.java", "diffHunk": "@@ -575,10 +575,10 @@ private static String triggerDump(String dumpSettings, String event) throws Inva\n \t}\n \n \t/**\n-     * Sets options for the dump subsystem.\n-     * The dump option is passed in as an String.\n-     * Use the same syntax as the -Xdump command-line option, with the initial -Xdump: omitted.\n-     * See Using the -Xdump option as described in the section on dump agents\n+\t * Sets options for the dump subsystem.\n+\t * The dump option is passed in as an String.\n+\t * Use the same syntax as the -Xdump command-line option, with the initial -Xdump: omitted.\n+\t * See  the -Xdump option section on dump agents", "originalCommit": "1f5615bb77f7b59f34dda8c092cfec5ec8251183", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQyMDc0Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/11016#discussion_r514420742", "bodyText": "Fixed.", "author": "pshipton", "createdAt": "2020-10-29T17:01:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM5Njg5MQ=="}], "type": "inlineReview"}, {"oid": "8b20918e8446da8500959a4a1d44872ff1b771c5", "url": "https://github.com/eclipse-openj9/openj9/commit/8b20918e8446da8500959a4a1d44872ff1b771c5", "message": "Add OpenJ9DiagnosticsMXBean queryDumpOptions() and tests\n\nReplace test modes Mode100, Mode101 with NoOptions, otherwise the test\nonly runs in XL mode. Using these modes is historic and unnecessary.\n\nMy original plan was to add a getter to correspond with\nsetDumpOptions(), however the Dump.queryDumpOptions() API returns a\nString[] containing the entire -Xdump configuration, like follows. Using\nthe name getDumpOptions() in the MXBean results in\n`javax.management.NotCompliantMBeanException: Getter and setter for\nDumpOptions have inconsistent types`.\n```\nsystem:events=gpf+abort+traceassert+corruptcache,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..0,priority=999,request=serial\nsystem:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..1,priority=999,request=exclusive+compact+prepwalk\nheap:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/heapdump.%Y%m%d.%H%M%S.%pid.%seq.phd,range=1..4,priority=500,request=exclusive+compact+prepwalk,opts=PHD\netc.\n```\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-10-29T17:00:28Z", "type": "forcePushed"}, {"oid": "b724b244b7d1fee83af8099ef5fcded3725805f7", "url": "https://github.com/eclipse-openj9/openj9/commit/b724b244b7d1fee83af8099ef5fcded3725805f7", "message": "Add OpenJ9DiagnosticsMXBean queryDumpOptions() and tests\n\nReplace test modes Mode100, Mode101 with NoOptions, otherwise the test\nonly runs in XL mode. Using these modes is historic and unnecessary.\n\nMy original plan was to add a getter to correspond with\nsetDumpOptions(), however the Dump.queryDumpOptions() API returns a\nString[] containing the entire -Xdump configuration, like follows. Using\nthe name getDumpOptions() in the MXBean results in\n`javax.management.NotCompliantMBeanException: Getter and setter for\nDumpOptions have inconsistent types`.\n```\nsystem:events=gpf+abort+traceassert+corruptcache,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..0,priority=999,request=serial\nsystem:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..1,priority=999,request=exclusive+compact+prepwalk\nheap:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/heapdump.%Y%m%d.%H%M%S.%pid.%seq.phd,range=1..4,priority=500,request=exclusive+compact+prepwalk,opts=PHD\netc.\n```\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-10-29T17:03:36Z", "type": "commit"}, {"oid": "b724b244b7d1fee83af8099ef5fcded3725805f7", "url": "https://github.com/eclipse-openj9/openj9/commit/b724b244b7d1fee83af8099ef5fcded3725805f7", "message": "Add OpenJ9DiagnosticsMXBean queryDumpOptions() and tests\n\nReplace test modes Mode100, Mode101 with NoOptions, otherwise the test\nonly runs in XL mode. Using these modes is historic and unnecessary.\n\nMy original plan was to add a getter to correspond with\nsetDumpOptions(), however the Dump.queryDumpOptions() API returns a\nString[] containing the entire -Xdump configuration, like follows. Using\nthe name getDumpOptions() in the MXBean results in\n`javax.management.NotCompliantMBeanException: Getter and setter for\nDumpOptions have inconsistent types`.\n```\nsystem:events=gpf+abort+traceassert+corruptcache,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..0,priority=999,request=serial\nsystem:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/core.%Y%m%d.%H%M%S.%pid.%seq.dmp,range=1..1,priority=999,request=exclusive+compact+prepwalk\nheap:events=systhrow,filter=java/lang/OutOfMemoryError,file=/home/peter/heapdump.%Y%m%d.%H%M%S.%pid.%seq.phd,range=1..4,priority=500,request=exclusive+compact+prepwalk,opts=PHD\netc.\n```\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>", "committedDate": "2020-10-29T17:03:36Z", "type": "forcePushed"}]}