{"pr_number": 386, "pr_title": "Fixes #159: Adds dict support for DefaultFilter", "pr_createdAt": "2020-01-15T21:10:47Z", "pr_url": "https://github.com/HubSpot/jinjava/pull/386", "timeline": [{"oid": "5c495af73e178f07815723b88975b07db74ca2cb", "url": "https://github.com/HubSpot/jinjava/commit/5c495af73e178f07815723b88975b07db74ca2cb", "message": "Fixes #159: Adds dict support for DefaultFilter", "committedDate": "2020-01-15T21:10:12Z", "type": "commit"}, {"oid": "5c495af73e178f07815723b88975b07db74ca2cb", "url": "https://github.com/HubSpot/jinjava/commit/5c495af73e178f07815723b88975b07db74ca2cb", "message": "Fixes #159: Adds dict support for DefaultFilter", "committedDate": "2020-01-15T21:10:12Z", "type": "forcePushed"}, {"oid": "8487a16e6e88aad6405f46066e0d7dc31edfd759", "url": "https://github.com/HubSpot/jinjava/commit/8487a16e6e88aad6405f46066e0d7dc31edfd759", "message": "removes undesired code from Filter.java", "committedDate": "2020-01-15T21:39:30Z", "type": "commit"}, {"oid": "d097b1785cedd47bbe08ba527ca9070f81bab263", "url": "https://github.com/HubSpot/jinjava/commit/d097b1785cedd47bbe08ba527ca9070f81bab263", "message": "removes whitespaces from DateTimeFormatFilter.java", "committedDate": "2020-01-15T22:13:58Z", "type": "commit"}, {"oid": "7abb0ccd3ca407d960236dcbc33e7df19a6dad06", "url": "https://github.com/HubSpot/jinjava/commit/7abb0ccd3ca407d960236dcbc33e7df19a6dad06", "message": "Fixes Style Check Errors", "committedDate": "2020-01-15T22:30:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYwMTA5Nw==", "url": "https://github.com/HubSpot/jinjava/pull/386#discussion_r367601097", "bodyText": "You could do this all in one loop. In fact, you don't need stringArgs at all. I know this was just moved from another file, but might as well clean it up while we're in here.", "author": "jboulter", "createdAt": "2020-01-16T19:15:58Z", "path": "src/main/java/com/hubspot/jinjava/lib/filter/DateTimeFormatFilter.java", "diffHunk": "@@ -27,10 +31,19 @@ public String getName() {\n \n   @Override\n   public Object filter(Object var, JinjavaInterpreter interpreter,\n-      String... args) {\n+      Object... args) {\n+\n+    List<String> stringArgs = new ArrayList<>();", "originalCommit": "7abb0ccd3ca407d960236dcbc33e7df19a6dad06", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYxODA0Ng==", "url": "https://github.com/HubSpot/jinjava/pull/386#discussion_r367618046", "bodyText": "done \ud83d\udc4d", "author": "gabru-md", "createdAt": "2020-01-16T19:52:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYwMTA5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYwMjE2MQ==", "url": "https://github.com/HubSpot/jinjava/pull/386#discussion_r367602161", "bodyText": "Objects.toString takes care of nulls for you.", "author": "jboulter", "createdAt": "2020-01-16T19:18:10Z", "path": "src/main/java/com/hubspot/jinjava/lib/filter/DivideFilter.java", "diffHunk": "@@ -41,11 +42,11 @@\n public class DivideFilter implements Filter {\n \n   @Override\n-  public Object filter(Object object, JinjavaInterpreter interpreter, String... arg) {\n+  public Object filter(Object object, JinjavaInterpreter interpreter, Object... arg) {\n     if (arg.length < 1) {\n       throw new TemplateSyntaxException(interpreter, getName(), \"requires 1 number (divisor) argument\");\n     }\n-    String toMul = arg[0];\n+    String toMul = arg[0] == null ? null : Objects.toString(arg[0]);", "originalCommit": "7abb0ccd3ca407d960236dcbc33e7df19a6dad06", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYxMzUyNQ==", "url": "https://github.com/HubSpot/jinjava/pull/386#discussion_r367613525", "bodyText": "Docs state that it returns \"null\" and not null.\nAlso if I use Objects.toString(arg[0]) then the following test breaks. Therefore had to ensure that arg[0] == null check was made.", "author": "gabru-md", "createdAt": "2020-01-16T19:42:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYwMjE2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODEwMDc0Nw==", "url": "https://github.com/HubSpot/jinjava/pull/386#discussion_r368100747", "bodyText": "Ah, good to know.", "author": "boulter", "createdAt": "2020-01-17T19:31:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYwMjE2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYwMzE2MQ==", "url": "https://github.com/HubSpot/jinjava/pull/386#discussion_r367603161", "bodyText": "this is the only real significant change, right?", "author": "jboulter", "createdAt": "2020-01-16T19:20:22Z", "path": "src/main/java/com/hubspot/jinjava/lib/filter/DefaultFilter.java", "diffHunk": "@@ -61,7 +64,7 @@ public Object filter(Object object, JinjavaInterpreter interpreter, String... ar\n       return object;\n     }\n \n-    return args[0];\n+    return (args[0] instanceof PyWrapper) ? args[0] : Objects.toString(args[0]);", "originalCommit": "7abb0ccd3ca407d960236dcbc33e7df19a6dad06", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYxMzg2OQ==", "url": "https://github.com/HubSpot/jinjava/pull/386#discussion_r367613869", "bodyText": "Yes. basically checking if the argument is an instance of PyWrapper then we do not need to convert it into String.", "author": "gabru-md", "createdAt": "2020-01-16T19:43:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYwMzE2MQ=="}], "type": "inlineReview"}, {"oid": "ea624292f3949db242896cb722b4a784bef08e4f", "url": "https://github.com/HubSpot/jinjava/commit/ea624292f3949db242896cb722b4a784bef08e4f", "message": "Removes stringArgs from DateTimeFormatFilter", "committedDate": "2020-01-16T19:53:19Z", "type": "commit"}, {"oid": "ea624292f3949db242896cb722b4a784bef08e4f", "url": "https://github.com/HubSpot/jinjava/commit/ea624292f3949db242896cb722b4a784bef08e4f", "message": "Removes stringArgs from DateTimeFormatFilter", "committedDate": "2020-01-16T19:53:19Z", "type": "forcePushed"}]}