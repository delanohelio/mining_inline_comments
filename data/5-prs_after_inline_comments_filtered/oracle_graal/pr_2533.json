{"pr_number": 2533, "pr_title": "Remote attach options are not only ports #2532", "pr_createdAt": "2020-06-03T06:39:53Z", "pr_url": "https://github.com/oracle/graal/pull/2533", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDUwNjAwOA==", "url": "https://github.com/oracle/graal/pull/2533#discussion_r434506008", "bodyText": "Please also update the corresponding help text in \n  \n    \n      graal/substratevm/src/com.oracle.svm.driver/resources/HelpExtra.txt\n    \n    \n         Line 14\n      in\n      12cd99f\n    \n    \n    \n    \n\n        \n          \n           --debug-attach[=<port>]", "author": "olpaw", "createdAt": "2020-06-03T11:45:59Z", "path": "substratevm/src/com.oracle.svm.driver/src/com/oracle/svm/driver/DefaultOptionHandler.java", "diffHunk": "@@ -158,17 +158,10 @@ public boolean consume(Queue<String> args) {\n             }\n             useDebugAttach = true;\n             String debugAttachArg = args.poll();\n-            String portSuffix = debugAttachArg.substring(debugAttach.length());\n-            int debugPort = 8000;\n-            if (!portSuffix.isEmpty()) {\n-                try {\n-                    debugPort = Integer.parseInt(portSuffix.substring(1));\n-                } catch (NumberFormatException e) {\n-                    NativeImage.showError(\"Invalid \" + debugAttach + \" option: \" + debugAttachArg);\n-                }\n-            }\n+            String addressSuffix = debugAttachArg.substring(debugAttach.length());\n+            String address = addressSuffix.isEmpty() ? \"8000\" : addressSuffix.substring(1);\n             /* Using agentlib to allow interoperability with other agents */\n-            nativeImage.addImageBuilderJavaArgs(\"-agentlib:jdwp=transport=dt_socket,server=y,address=\" + debugPort + \",suspend=y\");\n+            nativeImage.addImageBuilderJavaArgs(\"-agentlib:jdwp=transport=dt_socket,server=y,address=\" + address + \",suspend=y\");", "originalCommit": "4765e53be246a9fb3379f81e6e9e54fb3a93323d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0bfc51539b7b76a46e282804ea6b0da875b14e1e", "url": "https://github.com/oracle/graal/commit/0bfc51539b7b76a46e282804ea6b0da875b14e1e", "message": "Remote attach options are not only ports #2532\n\n* It can also be a combination of <host>:<port>,\nand host can also be '*'.\n* Let the JDK itself validate and throw the appropiate the error if needed.\n* Avoids duplicating JDK validation code.", "committedDate": "2020-06-11T12:46:01Z", "type": "commit"}, {"oid": "0bfc51539b7b76a46e282804ea6b0da875b14e1e", "url": "https://github.com/oracle/graal/commit/0bfc51539b7b76a46e282804ea6b0da875b14e1e", "message": "Remote attach options are not only ports #2532\n\n* It can also be a combination of <host>:<port>,\nand host can also be '*'.\n* Let the JDK itself validate and throw the appropiate the error if needed.\n* Avoids duplicating JDK validation code.", "committedDate": "2020-06-11T12:46:01Z", "type": "forcePushed"}]}