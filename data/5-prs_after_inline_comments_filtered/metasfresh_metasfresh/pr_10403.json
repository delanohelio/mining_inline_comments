{"pr_number": 10403, "pr_title": "REST Endpoint for Invoice data Query by customer", "pr_createdAt": "2020-12-10T06:00:39Z", "pr_url": "https://github.com/metasfresh/metasfresh/pull/10403", "timeline": [{"oid": "2bb33ed94b85a73f52b0dc983a585bae99b5b0f6", "url": "https://github.com/metasfresh/metasfresh/commit/2bb33ed94b85a73f52b0dc983a585bae99b5b0f6", "message": "Add InvoiceInfo Endpoint\n\nhttps://github.com/metasfresh/metasfresh/issues/10396\nSigned-off-by: TheBestPessimist <cristian@tbp.land>", "committedDate": "2020-12-09T14:45:58Z", "type": "commit"}, {"oid": "0568af55e7d43996ec1dfae132a59a6d35e7a83b", "url": "https://github.com/metasfresh/metasfresh/commit/0568af55e7d43996ec1dfae132a59a6d35e7a83b", "message": "Little fixes here, little fixes there, little fixes everywhere\n\nSigned-off-by: TheBestPessimist <cristian@tbp.land>", "committedDate": "2020-12-10T07:02:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkxOTI5Mw==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539919293", "bodyText": "pls extract service as field", "author": "teosarca", "createdAt": "2020-12-10T07:04:59Z", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/InvoiceService.java", "diffHunk": "@@ -65,6 +77,34 @@ public boolean hasArchive(@NonNull final InvoiceId invoiceId)\n \t\treturn archiveBL.getLastArchive(TableRecordReference.of(I_C_Invoice.Table_Name, invoiceId));\n \t}\n \n+\t@NonNull\n+\tpublic JSONInvoiceInfoResponse getInvoiceInfo(@NonNull final InvoiceId invoiceId, final String ad_language)\n+\t{\n+\t\tfinal JSONInvoiceInfoResponse.JSONInvoiceInfoResponseBuilder result = JSONInvoiceInfoResponse.builder();\n+\n+\t\tfinal I_C_Invoice invoice = invoiceDAO.getByIdInTrx(invoiceId);\n+\n+\t\tfinal CurrencyCode currency = Services.get(ICurrencyDAO.class).getCurrencyCodeById(CurrencyId.ofRepoId(invoice.getC_Currency_ID()));", "originalCommit": "0568af55e7d43996ec1dfae132a59a6d35e7a83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk0MzE0OQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539943149", "bodyText": "done", "author": "TheBestPessimist", "createdAt": "2020-12-10T07:42:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkxOTI5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyMjA4Ng==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539922086", "bodyText": "is there any reason for this naming convention?\ni would prefer camel case", "author": "teosarca", "createdAt": "2020-12-10T07:08:03Z", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoice/impl/JSONInvoiceInfoResponse.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * #%L\n+ * de.metas.business.rest-api-impl\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.rest_api.invoice.impl;\n+\n+import com.fasterxml.jackson.annotation.JsonAutoDetect;\n+import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n+import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;\n+import de.metas.currency.CurrencyCode;\n+import lombok.Builder;\n+import lombok.NonNull;\n+import lombok.Singular;\n+import lombok.Value;\n+\n+import java.math.BigDecimal;\n+import java.util.List;\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceInfoResponse.JSONInvoiceInfoResponseBuilder.class)\n+public class JSONInvoiceInfoResponse\n+{\n+\t@Singular\n+\t@NonNull\n+\tList<JSONInvoiceLineInfo> lineInfos;\n+\n+\t@JsonIgnoreProperties(ignoreUnknown = true)\n+\t@JsonPOJOBuilder(withPrefix = \"\")\n+\tstatic class JSONInvoiceInfoResponseBuilder\n+\t{\n+\t}\n+}\n+\n+\n+@Builder\n+@Value\n+@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE, isGetterVisibility = JsonAutoDetect.Visibility.NONE, setterVisibility = JsonAutoDetect.Visibility.NONE)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@JsonDeserialize(builder = JSONInvoiceLineInfo.JSONInvoiceLineInfoBuilder.class)\n+class JSONInvoiceLineInfo\n+{\n+\tint line_number;\n+\tString product_name;\n+\tBigDecimal qty_invoiced;\n+\tBigDecimal price;\n+\tBigDecimal tax_rate;\n+\tBigDecimal line_net_amt;\n+\tCurrencyCode currency;", "originalCommit": "0568af55e7d43996ec1dfae132a59a6d35e7a83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk0MzY3NA==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539943674", "bodyText": "In order not to add the annotation @JsonProperty for all of them.\nIt's not lazyness. I think the code looks cleaner like this, plus this is a JSON class, so nobody will change it.", "author": "TheBestPessimist", "createdAt": "2020-12-10T07:43:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyMjA4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3ODQ4NQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539978485", "bodyText": "u can have camel case and not having to annotate the fields with JsonProperty.\nIs there some standard about how to fields shall look in the json?", "author": "teosarca", "createdAt": "2020-12-10T08:43:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyMjA4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk5NTQxNw==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539995417", "bodyText": "renamed to camelCase", "author": "TheBestPessimist", "createdAt": "2020-12-10T09:08:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyMjA4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyNjkxMQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539926911", "bodyText": "try/catch, return ResponseEntity.badRequestSomething(JsonError.of...)", "author": "teosarca", "createdAt": "2020-12-10T07:13:48Z", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,28 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\")\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());", "originalCommit": "0568af55e7d43996ec1dfae132a59a6d35e7a83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk0NzkwMA==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539947900", "bodyText": "done", "author": "TheBestPessimist", "createdAt": "2020-12-10T07:52:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkyNjkxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkzMzA4Nw==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539933087", "bodyText": "i think Optional is not needed because tax record shall always exist for a given ID. If not, it's a db inconsistency and not a missing rate.\nBut, instead of BigDecimal, pls consider returning de.metas.util.lang.Percent", "author": "teosarca", "createdAt": "2020-12-10T07:22:08Z", "path": "backend/de.metas.business/src/main/java/de/metas/tax/api/impl/TaxDAO.java", "diffHunk": "@@ -213,4 +190,15 @@ public ITranslatableString getTaxCategoryNameById(@Nullable final TaxCategoryId\n \n \t\treturn Optional.ofNullable(taxCategoryId);\n \t}\n+\n+\t@Override\n+\tpublic Optional<BigDecimal> getRateById(@NonNull final TaxId taxId)", "originalCommit": "0568af55e7d43996ec1dfae132a59a6d35e7a83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1MDg4NQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539950885", "bodyText": "done", "author": "TheBestPessimist", "createdAt": "2020-12-10T07:57:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkzMzA4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkzMzkzOA==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539933938", "bodyText": "are these HTTP codes still valid for this method?", "author": "teosarca", "createdAt": "2020-12-10T07:24:07Z", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,28 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\")", "originalCommit": "0568af55e7d43996ec1dfae132a59a6d35e7a83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3MjU3OA==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r539972578", "bodyText": "yes", "author": "TheBestPessimist", "createdAt": "2020-12-10T08:34:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTkzMzkzOA=="}], "type": "inlineReview"}, {"oid": "cb75dbe51b9bad3b7137c3e4615ffb0ee46d0728", "url": "https://github.com/metasfresh/metasfresh/commit/cb75dbe51b9bad3b7137c3e4615ffb0ee46d0728", "message": "Little fixes here, little fixes there, little fixes everywhere\n\nSigned-off-by: TheBestPessimist <cristian@tbp.land>", "committedDate": "2020-12-10T07:58:12Z", "type": "commit"}, {"oid": "b14820c4fa152750a68bf81bb618539b38277fb3", "url": "https://github.com/metasfresh/metasfresh/commit/b14820c4fa152750a68bf81bb618539b38277fb3", "message": "Fix names\n\nSigned-off-by: TheBestPessimist <cristian@tbp.land>", "committedDate": "2020-12-10T09:07:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxNjA2Nw==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540016067", "bodyText": "pls use JsonError class that we already have", "author": "teosarca", "createdAt": "2020-12-10T09:37:45Z", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +159,35 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\"),\n+\t\t\t@ApiResponse(code = 422, message = \"An error happened during Invoice info retrieval\"),\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\ttry\n+\t\t{\n+\t\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());\n+\t\t\treturn ResponseEntity.ok(invoiceInfo);\n+\t\t}\n+\t\tcatch (final Exception e)\n+\t\t{\n+\t\t\treturn ResponseEntity.unprocessableEntity().body(e.getLocalizedMessage());", "originalCommit": "b14820c4fa152750a68bf81bb618539b38277fb3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxNjU2OA==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540016568", "bodyText": "i.e. de.metas.common.rest_api.JsonError", "author": "teosarca", "createdAt": "2020-12-10T09:38:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxNjA2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA5OTI4MA==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540099280", "bodyText": "done", "author": "TheBestPessimist", "createdAt": "2020-12-10T11:39:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxNjA2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxODQ0Mw==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540018443", "bodyText": "now that i am looking, why not using getTaxById... even overriding with a method which takes TaxId as param?", "author": "teosarca", "createdAt": "2020-12-10T09:40:58Z", "path": "backend/de.metas.business/src/main/java/de/metas/tax/api/impl/TaxDAO.java", "diffHunk": "@@ -213,4 +190,15 @@ public ITranslatableString getTaxCategoryNameById(@Nullable final TaxCategoryId\n \n \t\treturn Optional.ofNullable(taxCategoryId);\n \t}\n+\n+\t@Override\n+\tpublic Percent getRateById(@NonNull final TaxId taxId)\n+\t{\n+\t\tfinal I_C_Tax tax = queryBL.createQueryBuilder(I_C_Tax.class)", "originalCommit": "b14820c4fa152750a68bf81bb618539b38277fb3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDEwMTIzNQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540101235", "bodyText": "done", "author": "TheBestPessimist", "createdAt": "2020-12-10T11:42:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxODQ0Mw=="}], "type": "inlineReview"}, {"oid": "41802cf75cbbd9de08b03a6cb9d0c4c68fe29b67", "url": "https://github.com/metasfresh/metasfresh/commit/41802cf75cbbd9de08b03a6cb9d0c4c68fe29b67", "message": "Use `JsonError` when returning error", "committedDate": "2020-12-10T11:41:05Z", "type": "commit"}, {"oid": "507a2af244dd7c89f455fc70e6661da0d539c8c8", "url": "https://github.com/metasfresh/metasfresh/commit/507a2af244dd7c89f455fc70e6661da0d539c8c8", "message": "Add `getTaxById` using RepoIdAware", "committedDate": "2020-12-10T11:43:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExMjA2OA==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540112068", "bodyText": "isn't de.metas.rest_api.utils.JsonErrors accesible from here?\nthat would create nice instances", "author": "teosarca", "createdAt": "2020-12-10T12:00:39Z", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -157,6 +162,42 @@ public InvoicesRestControllerImpl(\n \t\treturn ResponseEntity.notFound().build();\n \t}\n \n+\t@ApiResponses(value = {\n+\t\t\t@ApiResponse(code = 200, message = \"Invoice info retrieved\"),\n+\t\t\t@ApiResponse(code = 401, message = \"You are not authorized\"),\n+\t\t\t@ApiResponse(code = 404, message = \"No Invoice found\"),\n+\t\t\t@ApiResponse(code = 422, message = \"An error happened during Invoice info retrieval\"),\n+\t})\n+\t@GetMapping(path = \"{invoiceId}/invoiceInfo\", produces = \"application/json\")\n+\t@Override\n+\tpublic ResponseEntity<?> getInvoiceInfo(\n+\t\t\t@ApiParam(required = true, value = \"metasfreshId of the invoice\")\n+\t\t\t@PathVariable(\"invoiceId\") final int invoiceRecordId)\n+\t{\n+\t\tfinal InvoiceId invoiceId = InvoiceId.ofRepoIdOrNull(invoiceRecordId);\n+\t\tif (invoiceId == null)\n+\t\t{\n+\t\t\treturn ResponseEntity.notFound().build();\n+\t\t}\n+\n+\t\ttry\n+\t\t{\n+\t\t\tfinal JSONInvoiceInfoResponse invoiceInfo = invoiceService.getInvoiceInfo(invoiceId, Env.getAD_Language());\n+\t\t\treturn ResponseEntity.ok(invoiceInfo);\n+\t\t}\n+\t\tcatch (final Exception ex)\n+\t\t{\n+\t\t\tfinal JsonError error = JsonError.ofSingleItem(", "originalCommit": "507a2af244dd7c89f455fc70e6661da0d539c8c8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExNDQ3OQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540114479", "bodyText": "done", "author": "TheBestPessimist", "createdAt": "2020-12-10T12:04:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExMjA2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExMjI2MA==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540112260", "bodyText": "same as above", "author": "teosarca", "createdAt": "2020-12-10T12:00:55Z", "path": "backend/de.metas.business.rest-api-impl/src/main/java/de/metas/rest_api/invoicecandidates/impl/InvoicesRestControllerImpl.java", "diffHunk": "@@ -176,9 +217,16 @@ public InvoicesRestControllerImpl(\n \t\t\t\t\t? ResponseEntity.ok(response.get())\n \t\t\t\t\t: ResponseEntity.notFound().build();\n \t\t}\n-\t\tcatch (final Exception e)\n+\t\tcatch (final Exception ex)\n \t\t{\n-\t\t\treturn ResponseEntity.unprocessableEntity().body(e.getLocalizedMessage());\n+\t\t\tfinal JsonError error = JsonError.ofSingleItem(", "originalCommit": "507a2af244dd7c89f455fc70e6661da0d539c8c8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExNDUzOQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10403#discussion_r540114539", "bodyText": "done", "author": "TheBestPessimist", "createdAt": "2020-12-10T12:04:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExMjI2MA=="}], "type": "inlineReview"}, {"oid": "558b0bae82360039c470926b3ef7c0236addb1a5", "url": "https://github.com/metasfresh/metasfresh/commit/558b0bae82360039c470926b3ef7c0236addb1a5", "message": "Use nicer builder for creating errors", "committedDate": "2020-12-10T12:05:06Z", "type": "commit"}, {"oid": "f442d28e4e63c8239b60bad43a0866d12fdf15f6", "url": "https://github.com/metasfresh/metasfresh/commit/f442d28e4e63c8239b60bad43a0866d12fdf15f6", "message": "Indentation", "committedDate": "2020-12-10T12:06:59Z", "type": "commit"}]}