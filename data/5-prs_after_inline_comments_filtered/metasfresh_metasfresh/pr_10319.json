{"pr_number": 10319, "pr_title": "#10318 Use last archive when no other info for creating the report", "pr_createdAt": "2020-11-26T20:53:36Z", "pr_url": "https://github.com/metasfresh/metasfresh/pull/10319", "timeline": [{"oid": "84e5f140f34a55527e3b94f05661237b78fcb09e", "url": "https://github.com/metasfresh/metasfresh/commit/84e5f140f34a55527e3b94f05661237b78fcb09e", "message": "#10318 Use last archive when no other info for creating the report\n\nhttps://github.com/metasfresh/metasfresh/issues/10318", "committedDate": "2020-11-26T20:53:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQzNjI1OQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10319#discussion_r531436259", "bodyText": "lastArchiveResult  is nullable, so u shall check if is null", "author": "teosarca", "createdAt": "2020-11-27T08:02:41Z", "path": "backend/de.metas.document.archive/de.metas.document.archive.base/src/main/java/de/metas/document/archive/spi/impl/DefaultModelArchiver.java", "diffHunk": "@@ -128,22 +131,18 @@ public ArchiveResult archive()\n \t\t\t\t\t\t//\n \t\t\t\t\t\t.build());\n \n-\t\tfinal boolean wasReturnedFromArchive = false; // TODO: impl\n+\t\tfinal ArchiveResult lastArchiveResult = report.getLastArchiveResult();\n+\n \t\tfinal ArchiveResult archiveResult;\n-\t\tif (!wasReturnedFromArchive)\n+\n+\t\tif (lastArchiveResult.isNoArchive())", "originalCommit": "84e5f140f34a55527e3b94f05661237b78fcb09e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQzNjY1OQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10319#discussion_r531436659", "bodyText": "limit the scope, move it down, where it is initialized", "author": "teosarca", "createdAt": "2020-11-27T08:03:44Z", "path": "backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/report/DocumentReportService.java", "diffHunk": "@@ -122,6 +128,8 @@ public DocumentReportResult createReport(@NonNull final DocumentReportRequest re\n \t\tfinal StandardDocumentReportType standardDocumentReportType = computeStandardDocumentReportTypeOrNull(request);\n \n \t\t//\n+\t\tArchiveResult lastArchiveResult = ArchiveResult.EMPTY;", "originalCommit": "84e5f140f34a55527e3b94f05661237b78fcb09e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQzNzE2MQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10319#discussion_r531437161", "bodyText": "minor: rename it to lastArchive", "author": "teosarca", "createdAt": "2020-11-27T08:04:52Z", "path": "backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/report/DocumentReportResult.java", "diffHunk": "@@ -63,6 +65,9 @@\n \t@NonNull\n \t@Builder.Default\n \tPrintCopies copies = PrintCopies.ONE;\n+\t\n+\t@Nullable\n+\tArchiveResult lastArchiveResult;", "originalCommit": "84e5f140f34a55527e3b94f05661237b78fcb09e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d810874e9dc89a92b6e84829798a120e8820bcfc", "url": "https://github.com/metasfresh/metasfresh/commit/d810874e9dc89a92b6e84829798a120e8820bcfc", "message": "#10318 refactoring, nullcheck\n\nhttps://github.com/metasfresh/metasfresh/issues/10318", "committedDate": "2020-11-27T08:20:39Z", "type": "commit"}]}