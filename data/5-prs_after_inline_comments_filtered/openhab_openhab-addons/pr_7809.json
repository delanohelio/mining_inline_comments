{"pr_number": 7809, "pr_title": "[hue] Keep compatibility with hue emulation for groups", "pr_createdAt": "2020-05-27T20:33:51Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/7809", "timeline": [{"oid": "d7a4f2a3547fa6f09a4c231c52567888207d6062", "url": "https://github.com/openhab/openhab-addons/commit/d7a4f2a3547fa6f09a4c231c52567888207d6062", "message": "[hue] Keep compatibility with hue emulation for groups\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>", "committedDate": "2020-05-27T21:40:46Z", "type": "commit"}, {"oid": "d7a4f2a3547fa6f09a4c231c52567888207d6062", "url": "https://github.com/openhab/openhab-addons/commit/d7a4f2a3547fa6f09a4c231c52567888207d6062", "message": "[hue] Keep compatibility with hue emulation for groups\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>", "committedDate": "2020-05-27T21:40:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ3NzI2MQ==", "url": "https://github.com/openhab/openhab-addons/pull/7809#discussion_r431477261", "bodyText": "Why a new state?", "author": "cpmeister", "createdAt": "2020-05-27T22:24:51Z", "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/handler/HueBridgeHandler.java", "diffHunk": "@@ -238,7 +238,7 @@ protected void doConnectedRun() throws IOException, ApiException {\n             Map<String, FullGroup> lastGroupStateCopy = new HashMap<>(lastGroupStates);\n \n             for (final FullGroup fullGroup : hueBridge.getGroups()) {\n-                State groupState = fullGroup.getState();\n+                State groupState = new State();", "originalCommit": "d7a4f2a3547fa6f09a4c231c52567888207d6062", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4MTAzNA==", "url": "https://github.com/openhab/openhab-addons/pull/7809#discussion_r431481034", "bodyText": "Because this state is not returned by the API.\nIn fact, for groups, the hue bridge is returning a state object but this is a different object than the one we map in class State (the state for lights). This is the reason why there was no NPE with the hue bridge. But with the hue emulation binding, fullGroup.getState() is null and this leads to a NPE few lines below.", "author": "lolodomo", "createdAt": "2020-05-27T22:35:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ3NzI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4MjgyMA==", "url": "https://github.com/openhab/openhab-addons/pull/7809#discussion_r431482820", "bodyText": "understood", "author": "cpmeister", "createdAt": "2020-05-27T22:40:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ3NzI2MQ=="}], "type": "inlineReview"}]}