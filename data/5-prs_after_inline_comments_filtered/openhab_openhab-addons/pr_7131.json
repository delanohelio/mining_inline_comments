{"pr_number": 7131, "pr_title": "[groheondus] Upgrade java API to latest version", "pr_createdAt": "2020-03-09T15:37:24Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/7131", "timeline": [{"oid": "378af2bd69e8f02ddd718138be6c35c54436f770", "url": "https://github.com/openhab/openhab-addons/commit/378af2bd69e8f02ddd718138be6c35c54436f770", "message": "[groheondus] Upgrade java API to latest version\n\nThis is a pre-step for supporting more GROHE devices, see #4550 for\nthat. It also enables us to use a more reliable way to login with\nusername/password (even given it relies on the web-based form :P).\n\nSigned-off-by: Florian <florian.schmidt.welzow@t-online.de>", "committedDate": "2020-03-09T15:34:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDAyNjcwMg==", "url": "https://github.com/openhab/openhab-addons/pull/7131#discussion_r390026702", "bodyText": "Given that they are two Appliance classes in the api I would suggest making the namespaces explicit.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            case Appliance.TYPE:\n          \n          \n            \n                            case org.grohe.ondus.api.model.sense.Appliance.TYPE:", "author": "cpmeister", "createdAt": "2020-03-10T00:05:35Z", "path": "bundles/org.openhab.binding.groheondus/src/main/java/org/openhab/binding/groheondus/internal/discovery/GroheOndusDiscoveryService.java", "diffHunk": "@@ -82,10 +79,10 @@ protected void startScan() {\n             ThingUID bridgeUID = bridgeHandler.getThing().getUID();\n             ThingUID thingUID = null;\n             switch (appliance.getType()) {\n-                case SenseGuardAppliance.TYPE:\n+                case org.grohe.ondus.api.model.guard.Appliance.TYPE:\n                     thingUID = new ThingUID(THING_TYPE_SENSEGUARD, appliance.getApplianceId());\n                     break;\n-                case SenseAppliance.TYPE:\n+                case Appliance.TYPE:", "originalCommit": "378af2bd69e8f02ddd718138be6c35c54436f770", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIyNDA5NA==", "url": "https://github.com/openhab/openhab-addons/pull/7131#discussion_r390224094", "bodyText": "Agreed! :)", "author": "FlorianSW", "createdAt": "2020-03-10T10:36:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDAyNjcwMg=="}], "type": "inlineReview"}, {"oid": "aabf4ee297d8240b521661624328f135404e300f", "url": "https://github.com/openhab/openhab-addons/commit/aabf4ee297d8240b521661624328f135404e300f", "message": "Implement review comments\n\nSigned-off-by: Florian <florian.schmidt.welzow@t-online.de>", "committedDate": "2020-03-10T10:36:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ0MzEwOA==", "url": "https://github.com/openhab/openhab-addons/pull/7131#discussion_r390443108", "bodyText": "This change is functionally equivalent though right?", "author": "cpmeister", "createdAt": "2020-03-10T16:24:45Z", "path": "bundles/org.openhab.binding.groheondus/src/main/java/org/openhab/binding/groheondus/internal/handler/GroheOndusAccountHandler.java", "diffHunk": "@@ -142,7 +142,9 @@ public void initialize() {\n                 ondusService = OndusService.login(storage.get(STORAGE_KEY_REFRESH_TOKEN));\n                 scheduleTokenRefresh();\n             } else {\n-                ondusService = OndusService.login(config.username, config.password);\n+                // TODO: That's probably really inefficient, internally the loginWebform method acquires a refresh\n+                // token, maybe there should be a way to obtain this token here, somehow.\n+                ondusService = OndusService.loginWebform(config.username, config.password);", "originalCommit": "aabf4ee297d8240b521661624328f135404e300f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTEyNDU1Mw==", "url": "https://github.com/openhab/openhab-addons/pull/7131#discussion_r391124553", "bodyText": "Yes, it just uses another method to login :) From a user point of view, nothing really changes with that.", "author": "FlorianSW", "createdAt": "2020-03-11T17:04:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ0MzEwOA=="}], "type": "inlineReview"}]}