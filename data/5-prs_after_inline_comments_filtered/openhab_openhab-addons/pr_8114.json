{"pr_number": 8114, "pr_title": "[lgwebos] Thing actions still working after a bundle restart", "pr_createdAt": "2020-07-13T11:18:24Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/8114", "timeline": [{"oid": "4effec8b53f8357017b6872870168b4c5225be01", "url": "https://github.com/openhab/openhab-addons/commit/4effec8b53f8357017b6872870168b4c5225be01", "message": "[lgwebos] Thing actions still working after a bundle restart\n\nRelated to openhab/openhab-core#1265\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>", "committedDate": "2020-07-13T13:05:07Z", "type": "commit"}, {"oid": "4effec8b53f8357017b6872870168b4c5225be01", "url": "https://github.com/openhab/openhab-addons/commit/4effec8b53f8357017b6872870168b4c5225be01", "message": "[lgwebos] Thing actions still working after a bundle restart\n\nRelated to openhab/openhab-core#1265\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>", "committedDate": "2020-07-13T13:05:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk0MTQ2OA==", "url": "https://github.com/openhab/openhab-addons/pull/8114#discussion_r453941468", "bodyText": "I don't think the bugfix would work here. The proxy workaround would only work for methods that have parameters and return types that are loaded in a 3rd untouched classloader (e.g. parent or core). The Application class is loaded as part of the bundle classloader so the bug would still be present when LGWebOSActions attempts to use Application instances returned from getApplications().\nOne thing to note is that getApplications isn't annotated with @RuleAction which would mean the getApplications static method doesn't have a corresponding RuleAction. I'm not sure why this would be the case.\n@sprehn can you give an explanation?", "author": "cpmeister", "createdAt": "2020-07-13T21:23:33Z", "path": "bundles/org.openhab.binding.lgwebos/src/main/java/org/openhab/binding/lgwebos/action/ILGWebOSActions.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.lgwebos.action;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+\n+/**\n+ * The {@link ILGWebOSActions} defines the interface for all thing actions supported by the binding.\n+ *\n+ * @author Laurent Garnier - Initial contribution\n+ */\n+@NonNullByDefault\n+public interface ILGWebOSActions {\n+\n+    public void showToast(String text) throws IOException;\n+\n+    public void showToast(String icon, String text) throws IOException;\n+\n+    public void launchBrowser(String url);\n+\n+    public List<Application> getApplications();", "originalCommit": "4effec8b53f8357017b6872870168b4c5225be01", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTMyOTA0OQ==", "url": "https://github.com/openhab/openhab-addons/pull/8114#discussion_r455329049", "bodyText": "Ok, even if we could still have a problem with getApplications, at least it will be ok for all other actions.\nAs we are on a temporary workaround, I propose to accept this limit and mention it with a comment in the code.\nIs it ok for you ?\nFor the missing @RuleAction , good catch, I hope @sprehn is still available to answer this question.", "author": "lolodomo", "createdAt": "2020-07-15T20:41:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk0MTQ2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI2NDY2NA==", "url": "https://github.com/openhab/openhab-addons/pull/8114#discussion_r456264664", "bodyText": "Comment added for getApplications", "author": "lolodomo", "createdAt": "2020-07-17T07:21:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk0MTQ2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI5OTM5NQ==", "url": "https://github.com/openhab/openhab-addons/pull/8114#discussion_r457299395", "bodyText": "Hi, this method's intend is to allow users to find out what the Ids of applications are. It is not designed to work with the new rule engine. I think it is now safe to remove it all together from the action, as the binding can now be queried for the same information via karaf console.", "author": "sprehn", "createdAt": "2020-07-20T11:31:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk0MTQ2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMyODg0Ng==", "url": "https://github.com/openhab/openhab-addons/pull/8114#discussion_r457328846", "bodyText": "Done, action removed.", "author": "lolodomo", "createdAt": "2020-07-20T12:16:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk0MTQ2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY1OTMyNw==", "url": "https://github.com/openhab/openhab-addons/pull/8114#discussion_r457659327", "bodyText": "super, pls do me the favor and also delete the section in the readme file.\nhttps://www.openhab.org/addons/bindings/lgwebos/#list-getapplications", "author": "sprehn", "createdAt": "2020-07-20T20:02:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk0MTQ2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2NDk1MA==", "url": "https://github.com/openhab/openhab-addons/pull/8114#discussion_r457664950", "bodyText": "since this is merged already, see #8161", "author": "sprehn", "createdAt": "2020-07-20T20:13:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk0MTQ2OA=="}], "type": "inlineReview"}, {"oid": "7632ed50d1207acd123f581886b2a9457715bb9e", "url": "https://github.com/openhab/openhab-addons/commit/7632ed50d1207acd123f581886b2a9457715bb9e", "message": "Comment added for getApplications\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>", "committedDate": "2020-07-17T07:19:57Z", "type": "commit"}, {"oid": "6311a1e6dbf406a7322d4d1912beb59769847bd0", "url": "https://github.com/openhab/openhab-addons/commit/6311a1e6dbf406a7322d4d1912beb59769847bd0", "message": "Action getApplications removed\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>", "committedDate": "2020-07-20T12:14:28Z", "type": "commit"}]}