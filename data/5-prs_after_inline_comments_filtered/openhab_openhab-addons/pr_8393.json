{"pr_number": 8393, "pr_title": "[radiothermostat] Added Absolute Setpoint Mode", "pr_createdAt": "2020-09-04T04:20:31Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/8393", "timeline": [{"oid": "edd222f0ee0f6c8cf65c111c261462684b572778", "url": "https://github.com/openhab/openhab-addons/commit/edd222f0ee0f6c8cf65c111c261462684b572778", "message": "Added absolute control mode to the Radio Thermostat binding.\n\nSigned-off-by: Ted Jordan <silverfunk@gmail.com>", "committedDate": "2020-09-04T04:34:44Z", "type": "commit"}, {"oid": "13475ea8dd4533ab9a871a74ea24351c6fbbb750", "url": "https://github.com/openhab/openhab-addons/commit/13475ea8dd4533ab9a871a74ea24351c6fbbb750", "message": "Explained the absolute parameter is optional.\n\nSigned-off-by: Ted Jordan <silverfunk@gmail.com>", "committedDate": "2020-09-04T04:34:44Z", "type": "commit"}, {"oid": "ed64593863d0fa8a86831c4c184566757a644d9c", "url": "https://github.com/openhab/openhab-addons/commit/ed64593863d0fa8a86831c4c184566757a644d9c", "message": "Update bundles/org.openhab.binding.radiothermostat/src/main/resources/ESH-INF/thing/thing-types.xml\n\nCo-authored-by: cpmeister <mistercpp2000@gmail.com>\nSigned-off-by: Ted Jordan <silverfunk@gmail.com>", "committedDate": "2020-09-08T02:41:02Z", "type": "commit"}, {"oid": "a6c91b2b5bedae5e1b6ef0405e30ebcbee9e10e4", "url": "https://github.com/openhab/openhab-addons/commit/a6c91b2b5bedae5e1b6ef0405e30ebcbee9e10e4", "message": "Fixed the spelling of permanent.\nCo-authored-by: mlobstein\nSigned-off-by: Ted Jordan <silverfunk@gmail.com>", "committedDate": "2020-09-08T02:46:33Z", "type": "commit"}, {"oid": "507140fe848b57c9206c2cf6d2a28eb968135657", "url": "https://github.com/openhab/openhab-addons/commit/507140fe848b57c9206c2cf6d2a28eb968135657", "message": "Refactored code to removed suppressed warnings.\nChanged the absolute parameter to setpointMode.\n\nSigned-off-by: silverfunk <silverfunk@gmail.com>", "committedDate": "2020-09-09T02:00:09Z", "type": "commit"}, {"oid": "d15ea1b5db280a26719c0d5a237c9ab7cf6ebf7e", "url": "https://github.com/openhab/openhab-addons/commit/d15ea1b5db280a26719c0d5a237c9ab7cf6ebf7e", "message": "Fixed a few code style errors.\n\nSigned-off-by: silverfunk <silverfunk@gmail.com>", "committedDate": "2020-09-09T02:16:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI5NjU1NA==", "url": "https://github.com/openhab/openhab-addons/pull/8393#discussion_r485296554", "bodyText": "Should probably be hostName.equals(\"\"), sorry about that.", "author": "mlobstein", "createdAt": "2020-09-09T02:13:53Z", "path": "bundles/org.openhab.binding.radiothermostat/src/main/java/org/openhab/binding/radiothermostat/internal/handler/RadioThermostatHandler.java", "diffHunk": "@@ -87,37 +86,66 @@\n     private @Nullable ScheduledFuture<?> refreshJob;\n     private @Nullable ScheduledFuture<?> logRefreshJob;\n \n-    private @Nullable RadioThermostatConfiguration config;\n+    private int refreshPeriod = DEFAULT_REFRESH_PERIOD;\n+    private int logRefreshPeriod = DEFAULT_LOG_REFRESH_PERIOD;\n+    private boolean isCT80 = false;\n+    private boolean disableLogs = false;\n+    private String setpointCmdKeyPrefix = \"t_\";\n \n-    public RadioThermostatHandler(Thing thing,\n-            @Nullable RadioThermostatStateDescriptionProvider stateDescriptionProvider, HttpClient httpClient) {\n+    public RadioThermostatHandler(Thing thing, RadioThermostatStateDescriptionProvider stateDescriptionProvider,\n+            HttpClient httpClient) {\n         super(thing);\n         this.stateDescriptionProvider = stateDescriptionProvider;\n         gson = new Gson();\n         connector = new RadioThermostatConnector(httpClient);\n     }\n \n-    @SuppressWarnings(\"null\")\n     @Override\n     public void initialize() {\n         logger.debug(\"Initializing RadioThermostat handler.\");\n-        this.config = getConfigAs(RadioThermostatConfiguration.class);\n-        connector.setThermostatHostName(config.hostName);\n+        RadioThermostatConfiguration config = getConfigAs(RadioThermostatConfiguration.class);\n+\n+        final String hostName = config.hostName;\n+        final Integer refresh = config.refresh;\n+        final Integer logRefresh = config.logRefresh;\n+        this.isCT80 = config.isCT80;\n+        this.disableLogs = config.disableLogs;\n+\n+        if (hostName == null || hostName == \"\") {", "originalCommit": "507140fe848b57c9206c2cf6d2a28eb968135657", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI5Nzg2OQ==", "url": "https://github.com/openhab/openhab-addons/pull/8393#discussion_r485297869", "bodyText": "nice", "author": "mlobstein", "createdAt": "2020-09-09T02:19:12Z", "path": "bundles/org.openhab.binding.radiothermostat/src/main/java/org/openhab/binding/radiothermostat/internal/handler/RadioThermostatHandler.java", "diffHunk": "@@ -248,10 +278,10 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n                 case SET_POINT:\n                     String cmdKey = null;\n                     if (rthermData.getThermostatData().getMode() == 1) {\n-                        cmdKey = \"t_heat\";\n+                        cmdKey = this.setpointCmdKeyPrefix + \"heat\";", "originalCommit": "d15ea1b5db280a26719c0d5a237c9ab7cf6ebf7e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMxMzg0Mw==", "url": "https://github.com/openhab/openhab-addons/pull/8393#discussion_r485313843", "bodyText": "There you go, took care of it.", "author": "silverfunk", "createdAt": "2020-09-09T03:22:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI5Nzg2OQ=="}], "type": "inlineReview"}, {"oid": "802d7fbafdc069072a9af2f37d6daf75b70b7792", "url": "https://github.com/openhab/openhab-addons/commit/802d7fbafdc069072a9af2f37d6daf75b70b7792", "message": "Changed a string comparison to use the equals() method.\n\nSigned-off-by: silverfunk <silverfunk@gmail.com>", "committedDate": "2020-09-09T03:20:11Z", "type": "commit"}, {"oid": "9f91747870e7d0b66bd5e82540632cf229e0733f", "url": "https://github.com/openhab/openhab-addons/commit/9f91747870e7d0b66bd5e82540632cf229e0733f", "message": "Forgot to leave the check for null in place.\n\nSigned-off-by: silverfunk <silverfunk@gmail.com>", "committedDate": "2020-09-09T03:32:16Z", "type": "commit"}]}