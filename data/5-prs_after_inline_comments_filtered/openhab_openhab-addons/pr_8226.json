{"pr_number": 8226, "pr_title": "[insteon] Added the ability to configure devices from the UI", "pr_createdAt": "2020-07-29T20:32:49Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/8226", "timeline": [{"oid": "6ca0f41d0452626424df8a2b9132b4cd26c154c4", "url": "https://github.com/openhab/openhab-addons/commit/6ca0f41d0452626424df8a2b9132b4cd26c154c4", "message": "[insteon] Added the ability to configure devices and channels from the UI\n\nSigned-off-by: Rob Nielsen <rob.nielsen@yahoo.com>", "committedDate": "2020-07-29T20:30:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDgwOTExOQ==", "url": "https://github.com/openhab/openhab-addons/pull/8226#discussion_r470809119", "bodyText": "As the framework logs the detail message already, the log message could be removed.", "author": "fwolter", "createdAt": "2020-08-14T18:49:11Z", "path": "bundles/org.openhab.binding.insteon/src/main/java/org/openhab/binding/insteon/internal/handler/InsteonDeviceHandler.java", "diffHunk": "@@ -146,23 +155,41 @@ public void initialize() {\n             String productKey = config.getProductKey();\n             if (DeviceTypeLoader.instance().getDeviceType(productKey) == null) {\n                 String msg = \"Unable to start Insteon device, invalid product key '\" + productKey + \"'.\";\n-                logger.warn(\"{}\", msg);\n+                logger.warn(\"{} {}\", thing.getUID().getAsString(), msg);\n \n                 updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR, msg);\n                 return;\n             }\n \n+            String deviceConfig = config.getDeviceConfig();\n+            Map<String, @Nullable Object> deviceConfigMap;\n+            if (deviceConfig != null) {\n+                Type mapType = new TypeToken<Map<String, Object>>() {\n+                }.getType();\n+                try {\n+                    deviceConfigMap = new Gson().fromJson(deviceConfig, mapType);\n+                } catch (JsonParseException e) {\n+                    String msg = \"The device configuration parameter is not valid JSON.\";\n+                    logger.warn(\"{} {}\", thing.getUID().getAsString(), msg);\n+\n+                    updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR, msg);", "originalCommit": "6ca0f41d0452626424df8a2b9132b4cd26c154c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTAzNjgwMA==", "url": "https://github.com/openhab/openhab-addons/pull/8226#discussion_r471036800", "bodyText": "I'd rather leave it in, it can be useful to see these sorts of warnings in the log file.", "author": "robnielsen", "createdAt": "2020-08-15T21:44:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDgwOTExOQ=="}], "type": "inlineReview"}, {"oid": "9deac442d955b75d75c894a90dc51302c0379c41", "url": "https://github.com/openhab/openhab-addons/commit/9deac442d955b75d75c894a90dc51302c0379c41", "message": "[insteon] removed ability to configure channels from device config option\n\nSigned-off-by: Rob Nielsen <rob.nielsen@yahoo.com>", "committedDate": "2020-08-16T14:46:06Z", "type": "commit"}]}