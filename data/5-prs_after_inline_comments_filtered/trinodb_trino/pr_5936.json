{"pr_number": 5936, "pr_title": "Fix FlakyTestRetryAnalyzer in product tests", "pr_createdAt": "2020-11-12T11:17:12Z", "pr_url": "https://github.com/trinodb/trino/pull/5936", "timeline": [{"oid": "97809904099d6759384f699ef6bc8227962e55f7", "url": "https://github.com/trinodb/trino/commit/97809904099d6759384f699ef6bc8227962e55f7", "message": "Fix FlakyTestRetryAnalyzer in product tests", "committedDate": "2020-11-12T11:24:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA0MDkwOA==", "url": "https://github.com/trinodb/trino/pull/5936#discussion_r522040908", "bodyText": "How about doing both system property and env var?", "author": "kokosing", "createdAt": "2020-11-12T11:37:12Z", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/TestRun.java", "diffHunk": "@@ -246,7 +246,7 @@ private Environment getEnvironment()\n                     exposePort(container, 5007); // debug port\n                 }\n \n-                if (Boolean.getBoolean(\"CONTINUOUS_INTEGRATION\")) {", "originalCommit": "97809904099d6759384f699ef6bc8227962e55f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA0MzE3OQ==", "url": "https://github.com/trinodb/trino/pull/5936#discussion_r522043179", "bodyText": "But nobody passes the System property today? A system property already exists as io.prestosql.testng.services.FlakyTestRetryAnalyzer.enabled but we don't use it except in the tests of FlakyTestRetryAnalyzer.", "author": "hashhar", "createdAt": "2020-11-12T11:41:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA0MDkwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA1MDYwNQ==", "url": "https://github.com/trinodb/trino/pull/5936#discussion_r522050605", "bodyText": "ok. let's leave it as it is then. thanks", "author": "kokosing", "createdAt": "2020-11-12T11:54:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA0MDkwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA1Njk2NA==", "url": "https://github.com/trinodb/trino/pull/5936#discussion_r522056964", "bodyText": "== \"true\"?", "author": "losipiuk", "createdAt": "2020-11-12T12:05:54Z", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/TestRun.java", "diffHunk": "@@ -246,7 +246,7 @@ private Environment getEnvironment()\n                     exposePort(container, 5007); // debug port\n                 }\n \n-                if (Boolean.getBoolean(\"CONTINUOUS_INTEGRATION\")) {\n+                if (System.getenv(\"CONTINUOUS_INTEGRATION\") != null) {", "originalCommit": "97809904099d6759384f699ef6bc8227962e55f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA1NzY1Nw==", "url": "https://github.com/trinodb/trino/pull/5936#discussion_r522057657", "bodyText": "See https://github.com/prestosql/presto/blob/e88c8e7d8437eddcb805fe434a0170a43e441b51/presto-testng-services/src/main/java/io/prestosql/testng/services/FlakyTestRetryAnalyzer.java#L105-L106 for the intent.", "author": "hashhar", "createdAt": "2020-11-12T12:07:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA1Njk2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA2ODEyMw==", "url": "https://github.com/trinodb/trino/pull/5936#discussion_r522068123", "bodyText": "and also #5936 (comment)", "author": "findepi", "createdAt": "2020-11-12T12:26:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA1Njk2NA=="}], "type": "inlineReview"}]}