{"pr_number": 6232, "pr_title": "Allow returning custom metrics from ConnectorPageSource", "pr_createdAt": "2020-12-07T19:58:01Z", "pr_url": "https://github.com/trinodb/trino/pull/6232", "timeline": [{"oid": "d39b4d0bb67dfeb52ae55e67f5ed2fc09c44231f", "url": "https://github.com/trinodb/trino/commit/d39b4d0bb67dfeb52ae55e67f5ed2fc09c44231f", "message": "Allow exposing custom metrics from the connector", "committedDate": "2021-05-06T11:24:22Z", "type": "forcePushed"}, {"oid": "e6682337acfec795aa69b92c7b5df552e4329d85", "url": "https://github.com/trinodb/trino/commit/e6682337acfec795aa69b92c7b5df552e4329d85", "message": "Move Mergeable interface to SPI", "committedDate": "2021-06-27T11:26:49Z", "type": "commit"}, {"oid": "568eed4bbf8327070d798a8dbef07161e02c1827", "url": "https://github.com/trinodb/trino/commit/568eed4bbf8327070d798a8dbef07161e02c1827", "message": "Allow exposing custom metrics from the connector", "committedDate": "2021-07-01T19:35:31Z", "type": "commit"}, {"oid": "7c3a96cb9e7aec3101cce7ac67517b1a1e2f384f", "url": "https://github.com/trinodb/trino/commit/7c3a96cb9e7aec3101cce7ac67517b1a1e2f384f", "message": "Implement Count and Histogram metrics in trino-plugin-toolkit\n\nAlso, add an integration test to TestMemorySmoke", "committedDate": "2021-07-01T19:35:31Z", "type": "commit"}, {"oid": "7c3a96cb9e7aec3101cce7ac67517b1a1e2f384f", "url": "https://github.com/trinodb/trino/commit/7c3a96cb9e7aec3101cce7ac67517b1a1e2f384f", "message": "Implement Count and Histogram metrics in trino-plugin-toolkit\n\nAlso, add an integration test to TestMemorySmoke", "committedDate": "2021-07-01T19:35:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODE3NTAzMQ==", "url": "https://github.com/trinodb/trino/pull/6232#discussion_r678175031", "bodyText": "Would it be possible to avoid using raw types here?", "author": "findepi", "createdAt": "2021-07-28T10:27:32Z", "path": "plugin/trino-memory/src/test/java/io/trino/plugin/memory/TestMemorySmoke.java", "diffHunk": "@@ -107,6 +113,40 @@ public void testSelect()\n         assertQueryResult(\"SELECT count(*) FROM test_select\", 75L);\n     }\n \n+    @Test\n+    public void testCustomMetricsScanFilter()\n+    {\n+        Map<String, Metric> metrics = collectCustomMetrics(\"SELECT partkey FROM part WHERE partkey % 1000 > 0\");", "originalCommit": "7c3a96cb9e7aec3101cce7ac67517b1a1e2f384f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODU2MzkzMg==", "url": "https://github.com/trinodb/trino/pull/6232#discussion_r678563932", "bodyText": "Sounds good - do you mean returning a Metrics object from collectCustomMetrics() (instead of a Map)?\nIf so, I think it can be fixed by master...rzeyde-varada:fixup-metrics-test.", "author": "rzeyde-varada", "createdAt": "2021-07-28T18:43:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODE3NTAzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODk0NzUxMA==", "url": "https://github.com/trinodb/trino/pull/6232#discussion_r678947510", "bodyText": "I don't know this code, so cannot suggest something.\nJust my IDE warns me that Metric is a generic class, but here it's used without <...>.\nmaybe Metric<?> would do for now", "author": "findepi", "createdAt": "2021-07-29T08:40:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODE3NTAzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTIxODE1NQ==", "url": "https://github.com/trinodb/trino/pull/6232#discussion_r679218155", "bodyText": "Opened #8707.", "author": "rzeyde-varada", "createdAt": "2021-07-29T14:43:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODE3NTAzMQ=="}], "type": "inlineReview"}]}