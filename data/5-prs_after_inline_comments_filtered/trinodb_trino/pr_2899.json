{"pr_number": 2899, "pr_title": "Remove access control checkCanShowTablesMetadata", "pr_createdAt": "2020-02-21T14:43:25Z", "pr_url": "https://github.com/trinodb/trino/pull/2899", "timeline": [{"oid": "91fdfec5ad3ca7a7d3774f35c2335d8263da1493", "url": "https://github.com/trinodb/trino/commit/91fdfec5ad3ca7a7d3774f35c2335d8263da1493", "message": "Remove access control checkCanShowTablesMetadata", "committedDate": "2020-02-22T19:04:28Z", "type": "commit"}, {"oid": "91fdfec5ad3ca7a7d3774f35c2335d8263da1493", "url": "https://github.com/trinodb/trino/commit/91fdfec5ad3ca7a7d3774f35c2335d8263da1493", "message": "Remove access control checkCanShowTablesMetadata", "committedDate": "2020-02-22T19:04:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk0NDk2NA==", "url": "https://github.com/trinodb/trino/pull/2899#discussion_r382944964", "bodyText": "Can you file an issue for this one?  I believe we should have some kind of access control on SHOW GRANTS FOR TABLE.  My guess would be you can always see your own grants, or if you are the owner, you can see all grants... or maybe the \"with grant option\".  We'll need to look it up in the spec.", "author": "dain", "createdAt": "2020-02-22T22:04:27Z", "path": "presto-main/src/main/java/io/prestosql/sql/rewrite/ShowQueriesRewrite.java", "diffHunk": "@@ -231,10 +227,6 @@ protected Node visitShowGrants(ShowGrants showGrants, Void context)\n \n                 catalogName = qualifiedTableName.getCatalogName();\n \n-                accessControl.checkCanShowTablesMetadata(", "originalCommit": "91fdfec5ad3ca7a7d3774f35c2335d8263da1493", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE1NDA0NA==", "url": "https://github.com/trinodb/trino/pull/2899#discussion_r383154044", "bodyText": "Currently, it is only implemented for hive.security=sql-standard. If you have SET ROLE admin then you display all table privileges, otherwise you display only session user grants.", "author": "kokosing", "createdAt": "2020-02-24T09:29:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk0NDk2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE4NTU2Ng==", "url": "https://github.com/trinodb/trino/pull/2899#discussion_r383185566", "bodyText": "Maybe we should have something like filterTablePrivileges or filterGrants. The same thing goes to listing roles I think. In both cases, it is currently handled in sql-standard access control directy.", "author": "kokosing", "createdAt": "2020-02-24T10:30:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk0NDk2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE4NjIzNA==", "url": "https://github.com/trinodb/trino/pull/2899#discussion_r383186234", "bodyText": "Having that said, I don't think there is anything actionable to be logged for today.", "author": "kokosing", "createdAt": "2020-02-24T10:31:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk0NDk2NA=="}], "type": "inlineReview"}]}