{"pr_number": 6051, "pr_title": "Make RedisPlugin immutable", "pr_createdAt": "2020-11-23T10:40:32Z", "pr_url": "https://github.com/trinodb/trino/pull/6051", "timeline": [{"oid": "ff2c577bfdd7bda0049f0a963854a34649ce1c7b", "url": "https://github.com/trinodb/trino/commit/ff2c577bfdd7bda0049f0a963854a34649ce1c7b", "message": "Make RedisPlugin immutable\n\nMove testing facilities out to a testing class.", "committedDate": "2020-11-23T10:40:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY0MDI4OA==", "url": "https://github.com/trinodb/trino/pull/6051#discussion_r528640288", "bodyText": "Best would be to apply same approach as in Kafka. #6046 where tableDescriptionSupplier is some form of metastore (like HMS in Hive connector). WDYT?", "author": "kokosing", "createdAt": "2020-11-23T11:36:48Z", "path": "presto-redis/src/main/java/io/prestosql/plugin/redis/RedisPlugin.java", "diffHunk": "@@ -13,35 +13,21 @@\n  */\n package io.prestosql.plugin.redis;\n \n-import com.google.common.annotations.VisibleForTesting;\n import com.google.common.collect.ImmutableList;\n import io.prestosql.spi.Plugin;\n import io.prestosql.spi.connector.ConnectorFactory;\n-import io.prestosql.spi.connector.SchemaTableName;\n \n-import java.util.Map;\n import java.util.Optional;\n-import java.util.function.Supplier;\n-\n-import static java.util.Objects.requireNonNull;\n \n /**\n  * Presto plugin to use Redis as a data source.\n  */\n public class RedisPlugin\n         implements Plugin\n {\n-    private Optional<Supplier<Map<SchemaTableName, RedisTableDescription>>> tableDescriptionSupplier = Optional.empty();", "originalCommit": "ff2c577bfdd7bda0049f0a963854a34649ce1c7b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY0MjM5MQ==", "url": "https://github.com/trinodb/trino/pull/6051#discussion_r528642391", "bodyText": "I think this could be a nice follow up", "author": "findepi", "createdAt": "2020-11-23T11:40:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY0MDI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ4MzY4NA==", "url": "https://github.com/trinodb/trino/pull/6051#discussion_r529483684", "bodyText": "Please capture this as issue so some one could follow up.", "author": "kokosing", "createdAt": "2020-11-24T11:44:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY0MDI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkzOTQ2MQ==", "url": "https://github.com/trinodb/trino/pull/6051#discussion_r529939461", "bodyText": "can you please do it? you'll better describe this. and i actually do not want this change to happen :)", "author": "findepi", "createdAt": "2020-11-24T22:26:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY0MDI4OA=="}], "type": "inlineReview"}]}