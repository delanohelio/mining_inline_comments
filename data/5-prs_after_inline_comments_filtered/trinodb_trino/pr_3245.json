{"pr_number": 3245, "pr_title": "Fix query failure when DF allows join to become INNER (v2)", "pr_createdAt": "2020-03-26T15:52:29Z", "pr_url": "https://github.com/trinodb/trino/pull/3245", "timeline": [{"oid": "825ba27f0e662bcf4465a8604d6a364ae196b1c0", "url": "https://github.com/trinodb/trino/commit/825ba27f0e662bcf4465a8604d6a364ae196b1c0", "message": "Remove JoinNode constraint\n\n`PredicatePushDown` may determine a join needs to be inner because of\ndynamic filter function call. Since dynamic filters pushdown is delayed\nafter join reordering, when this happens the distribution type may be\nfixed already. For INNER joins we are able to completely remove join\ncondition.", "committedDate": "2020-03-26T15:50:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTE1NjE5Ng==", "url": "https://github.com/trinodb/trino/pull/3245#discussion_r399156196", "bodyText": "move the check to io.prestosql.sql.planner.optimizations.AddExchanges.Rewriter#planPartitionedJoin instead.", "author": "sopel39", "createdAt": "2020-03-27T10:06:40Z", "path": "presto-main/src/main/java/io/prestosql/sql/planner/plan/JoinNode.java", "diffHunk": "@@ -136,12 +135,6 @@ public JoinNode(\n                     \"%s join do not work with %s distribution type\",\n                     type,\n                     distributionType.get());\n-            // It does not make sense to PARTITION when there is nothing to partition on\n-            checkArgument(", "originalCommit": "825ba27f0e662bcf4465a8604d6a364ae196b1c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}