{"pr_number": 5819, "pr_title": "Allow defining system properties before connector properties in hive query builder", "pr_createdAt": "2020-11-04T15:40:45Z", "pr_url": "https://github.com/trinodb/trino/pull/5819", "timeline": [{"oid": "a4e0d030776c0e40547dde263d22d224156eaf3d", "url": "https://github.com/trinodb/trino/commit/a4e0d030776c0e40547dde263d22d224156eaf3d", "message": "Allow defining system properties before connector properties", "committedDate": "2020-11-04T15:40:08Z", "type": "commit"}, {"oid": "53edd53bbe04067334b43f84b0bd07d090ffbd2a", "url": "https://github.com/trinodb/trino/commit/53edd53bbe04067334b43f84b0bd07d090ffbd2a", "message": "Fix formatting", "committedDate": "2020-11-04T15:40:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ2MDAzOA==", "url": "https://github.com/trinodb/trino/pull/5819#discussion_r517460038", "bodyText": "slightly tangential to this PR, but this property seems to get overriden, since setSingleExtraProperty replaces the previously set properties?", "author": "phd3", "createdAt": "2020-11-04T16:12:36Z", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveDynamicPartitionPruning.java", "diffHunk": "@@ -63,11 +63,11 @@ protected QueryRunner createQueryRunner()\n             throws Exception\n     {\n         return HiveQueryRunner.builder()\n-                .setInitialTables(getTables())\n-                .setHiveProperties(ImmutableMap.of(\"hive.dynamic-filtering-probe-blocking-timeout\", \"1h\"))\n                 // Reduced partitioned join limit for large DF to enable DF min/max collection with ENABLE_LARGE_DYNAMIC_FILTERS\n                 .setSingleExtraProperty(\"dynamic-filtering.large-partitioned.max-distinct-values-per-driver\", \"100\")", "originalCommit": "a4e0d030776c0e40547dde263d22d224156eaf3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ2ODYyNw==", "url": "https://github.com/trinodb/trino/pull/5819#discussion_r517468627", "bodyText": "Good catch.", "author": "findepi", "createdAt": "2020-11-04T16:24:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ2MDAzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ3MjYwNg==", "url": "https://github.com/trinodb/trino/pull/5819#discussion_r517472606", "bodyText": "Added a fix for this.\ncc @raunaqmorarka", "author": "findepi", "createdAt": "2020-11-04T16:30:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ2MDAzOA=="}], "type": "inlineReview"}, {"oid": "ca71fdece6fc5b1a067ccecdb72a0bbc28badec6", "url": "https://github.com/trinodb/trino/commit/ca71fdece6fc5b1a067ccecdb72a0bbc28badec6", "message": "Replace misleading setSingleExtraProperty method\n\nThe method was documented as overwriting previous settings but there\nstill was at least one incorrect usage. Replace the method with a new\none with more useful semantics.", "committedDate": "2020-11-04T17:07:27Z", "type": "commit"}, {"oid": "ca71fdece6fc5b1a067ccecdb72a0bbc28badec6", "url": "https://github.com/trinodb/trino/commit/ca71fdece6fc5b1a067ccecdb72a0bbc28badec6", "message": "Replace misleading setSingleExtraProperty method\n\nThe method was documented as overwriting previous settings but there\nstill was at least one incorrect usage. Replace the method with a new\none with more useful semantics.", "committedDate": "2020-11-04T17:07:27Z", "type": "forcePushed"}]}