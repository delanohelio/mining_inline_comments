{"pr_number": 7628, "pr_title": "IGNITE-7609 .NET: FieldsQueryCursor should expose data types too", "pr_createdAt": "2020-04-06T14:12:17Z", "pr_url": "https://github.com/apache/ignite/pull/7628", "timeline": [{"oid": "47caa934d076038fbb2194936a259d8026060842", "url": "https://github.com/apache/ignite/commit/47caa934d076038fbb2194936a259d8026060842", "message": "---", "committedDate": "2020-03-21T13:22:47Z", "type": "commit"}, {"oid": "a651f36176174851ec1c73a78157df97c5b8f222", "url": "https://github.com/apache/ignite/commit/a651f36176174851ec1c73a78157df97c5b8f222", "message": "implement simple types", "committedDate": "2020-04-02T11:39:44Z", "type": "commit"}, {"oid": "fb3d787e4c743a9ce292412e5428b973f9005610", "url": "https://github.com/apache/ignite/commit/fb3d787e4c743a9ce292412e5428b973f9005610", "message": "Merge branch 'master' into IGNITE-7609-fields-query-expose-types", "committedDate": "2020-04-03T19:03:00Z", "type": "commit"}, {"oid": "d3d0901ec52c6d6adffd857638d2c89941fdb3a5", "url": "https://github.com/apache/ignite/commit/d3d0901ec52c6d6adffd857638d2c89941fdb3a5", "message": "implement client", "committedDate": "2020-04-04T21:00:47Z", "type": "commit"}, {"oid": "9ff3619bf60d3ae339d4d637b45ab952bf36292c", "url": "https://github.com/apache/ignite/commit/9ff3619bf60d3ae339d4d637b45ab952bf36292c", "message": "fix typos", "committedDate": "2020-04-06T13:57:52Z", "type": "commit"}, {"oid": "0050efc9b563294062efc1ca9c0ca31fb734f35d", "url": "https://github.com/apache/ignite/commit/0050efc9b563294062efc1ca9c0ca31fb734f35d", "message": "throw not supported", "committedDate": "2020-04-06T14:05:10Z", "type": "commit"}, {"oid": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5", "url": "https://github.com/apache/ignite/commit/8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5", "message": "some clean up before review", "committedDate": "2020-04-06T14:11:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzODYxNg==", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404138616", "bodyText": "metadatas -> metas", "author": "ptupitsyn", "createdAt": "2020-04-06T14:32:19Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();", "originalCommit": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0MDMxNQ==", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404140315", "bodyText": "https://cwiki.apache.org/confluence/display/IGNITE/Abbreviation+Rules\nWeird rules, but we follow them.", "author": "ptupitsyn", "createdAt": "2020-04-06T14:34:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzODYxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzOTEyNw==", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404139127", "bodyText": "cursor.fieldsMeta() is not guaranteed to return a non-null result, let's add a check.", "author": "ptupitsyn", "createdAt": "2020-04-06T14:32:51Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();\n+\n+            writer.writeInt(metadatas.size());", "originalCommit": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzOTMxMw==", "url": "https://github.com/apache/ignite/pull/7628#discussion_r404139313", "bodyText": "metadata -> meta", "author": "ptupitsyn", "createdAt": "2020-04-06T14:33:04Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -70,6 +84,17 @@ public PlatformFieldsQueryCursor(PlatformContext platformCtx, QueryCursorEx<List\n             for (int i = 0; i < cnt; i++) {\n                 writer.writeString(fq.getFieldName(i));\n             }\n+        } else if (type == OP_GET_FIELDS_META) {\n+            QueryCursorEx<List<?>> cursor = cursor();\n+\n+            List<GridQueryFieldMetadata> metadatas = cursor.fieldsMeta();\n+\n+            writer.writeInt(metadatas.size());\n+\n+            for (GridQueryFieldMetadata metadata: metadatas){", "originalCommit": "8e0e34ab7f6f6dbb68c9d38bfc253e309d3935f5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dedbc8478faab64890751515e677758764250bb7", "url": "https://github.com/apache/ignite/commit/dedbc8478faab64890751515e677758764250bb7", "message": "fixes after review", "committedDate": "2020-04-06T21:03:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4MjQwNw==", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405682407", "bodyText": "Something happened with comments blocks here and below. Please revert unrelated changes.", "author": "ptupitsyn", "createdAt": "2020-04-08T17:11:32Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/platform/cache/query/PlatformFieldsQueryCursor.java", "diffHunk": "@@ -22,29 +22,40 @@\n import org.apache.ignite.internal.binary.BinaryRawWriterEx;\n import org.apache.ignite.internal.processors.cache.query.QueryCursorEx;\n import org.apache.ignite.internal.processors.platform.PlatformContext;\n+import org.apache.ignite.internal.processors.query.GridQueryFieldMetadata;\n \n import java.util.List;\n \n /**\n  * Interop cursor for fields query.\n  */\n public class PlatformFieldsQueryCursor extends PlatformAbstractQueryCursor<List<?>> {\n-    /** Gets field names. */\n+    /**", "originalCommit": "dedbc8478faab64890751515e677758764250bb7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc3NjUzNw==", "url": "https://github.com/apache/ignite/pull/7628#discussion_r405776537", "bodyText": "Auto-formatting by IDE.", "author": "gurustron", "createdAt": "2020-04-08T19:56:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4MjQwNw=="}], "type": "inlineReview"}, {"oid": "ae0b12fb1547c419bd5ba001452c99913126c0fb", "url": "https://github.com/apache/ignite/commit/ae0b12fb1547c419bd5ba001452c99913126c0fb", "message": "fixes after review", "committedDate": "2020-04-08T19:53:49Z", "type": "commit"}]}