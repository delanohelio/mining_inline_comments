{"pr_number": 3174, "pr_title": "Log Hibernate exceptions during indexing", "pr_createdAt": "2020-02-12T08:52:03Z", "pr_url": "https://github.com/kitodo/kitodo-production/pull/3174", "timeline": [{"oid": "4c964ec61b880d78e77989c22996d78a77931f73", "url": "https://github.com/kitodo/kitodo-production/commit/4c964ec61b880d78e77989c22996d78a77931f73", "message": "Log Hibernate exceptions during indexing", "committedDate": "2020-02-12T08:47:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI4NzQ2MA==", "url": "https://github.com/kitodo/kitodo-production/pull/3174#discussion_r378287460", "bodyText": "Log it yes, but catch it?\nmaybe make an extra catch clause for it, log it and rethrow it.\nShouldn't hibernate exceptions be logged by hibernate anyway?", "author": "Kathrin-Huber", "createdAt": "2020-02-12T14:33:17Z", "path": "Kitodo/src/main/java/org/kitodo/production/helper/IndexWorker.java", "diffHunk": "@@ -76,7 +77,7 @@ public void run() {\n                     indexChunks(batchSize);\n                 }\n             }\n-        } catch (CustomResponseException | DAOException e) {\n+        } catch (CustomResponseException | DAOException | HibernateException e) {", "originalCommit": "4c964ec61b880d78e77989c22996d78a77931f73", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODMwMjkzNg==", "url": "https://github.com/kitodo/kitodo-production/pull/3174#discussion_r378302936", "bodyText": "Basically, the result is the same, the thread ends in both cases, and the thrown exception is evaluated nowhere. No, Hibernate only logs very generic message (\"LoadContexts - HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.collectionloadcontext@5d6148a<rs=com.mchange.v2.c3p0.impl.newproxyresultset@29c7bd3 [wrapping: null]>\", \"HHH000160: On CollectionLoadContext#cleanup, localLoadingCollectionKeys contained [1] entries\") that don't really give you the reason for the error, unfortunately. The question would rather be whether the exception should not also be displayed to the user in the user interface (in all three cases)? And, would there something have to be reset so that the indexing buttons are re-enabled?", "author": "matthias-ronge", "createdAt": "2020-02-12T14:56:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI4NzQ2MA=="}], "type": "inlineReview"}]}