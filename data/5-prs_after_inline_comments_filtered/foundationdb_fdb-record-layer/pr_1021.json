{"pr_number": 1021, "pr_title": " Resolves #1020: Dangling sampled key read operation can log a lot", "pr_createdAt": "2020-08-20T14:24:12Z", "pr_url": "https://github.com/FoundationDB/fdb-record-layer/pull/1021", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5Mzc4Mw==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1021#discussion_r474193783", "bodyText": "Should this be an enum?", "author": "alecgrieser", "createdAt": "2020-08-20T18:39:35Z", "path": "fdb-extensions/src/main/java/com/apple/foundationdb/ErrorCodes.java", "diffHunk": "@@ -0,0 +1,181 @@\n+/*\n+ * ErrorCodes.java\n+ *\n+ * This source file is part of the FoundationDB open source project\n+ *\n+ * Copyright 2015-2020 Apple Inc. and the FoundationDB project authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.apple.foundationdb;\n+\n+import com.apple.foundationdb.annotation.API;\n+import com.google.common.collect.ImmutableMap;\n+\n+import javax.annotation.Nonnull;\n+import java.util.Map;\n+\n+/**\n+ * FDB error codes (from https://apple.github.io/foundationdb/api-error-codes.html) and handy methods to\n+ * interpret them.\n+ */\n+@API(API.Status.MAINTAINED)\n+public class ErrorCodes {", "originalCommit": "d2007f761e740201e95a27d94f22c84c97228043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc2MTg4Mg==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1021#discussion_r499761882", "bodyText": "@alecgrieser Sorry this has been stagnating so long.  I updated this to an enum.  It does have the benefit that we can later add other attributes to the error, but it does make other things a little more awkward - for example, there is no good way to represent an error code that we have never seen before.  But, I'm not unhappy with the change.", "author": "scgray", "createdAt": "2020-10-05T17:34:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5Mzc4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQzOTI4OQ==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1021#discussion_r500439289", "bodyText": "I think I like the enum better, though it kind of seems like this should really be an enum that lives in the Java bindings, but alas. The foundationdb project already has some automation that can generate C++ files based on these error definitions, so it seems like they should be able to generate this enum as well.\nThere's an alternative version of this change that resolves #1020 but doesn't try and fix the problem of error codes (partially to avoid having two changes in one PR and partially to avoid trying to argue on how the API should look). I'm happy enough with how this is, though.", "author": "alecgrieser", "createdAt": "2020-10-06T16:34:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5Mzc4Mw=="}], "type": "inlineReview"}, {"oid": "1a4f5e64230492ba1b78b0dc5ab832ea02e89461", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/1a4f5e64230492ba1b78b0dc5ab832ea02e89461", "message": "Resolves #1020: Dangling sampled key read operation can log a lot", "committedDate": "2020-10-05T16:11:24Z", "type": "commit"}, {"oid": "c6f1b3fe9a4701954214d5f7f1837d0581786254", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/c6f1b3fe9a4701954214d5f7f1837d0581786254", "message": "Use symbolic error codes when possible", "committedDate": "2020-10-05T16:11:24Z", "type": "commit"}, {"oid": "e2063632058aee9a63b4d2097bf01baed3728ecb", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/e2063632058aee9a63b4d2097bf01baed3728ecb", "message": "Change to enum", "committedDate": "2020-10-05T17:32:32Z", "type": "forcePushed"}, {"oid": "79d9770d15177efdf145b0224b0c709f42eb17d8", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/79d9770d15177efdf145b0224b0c709f42eb17d8", "message": "Change to ErrorCodes class to FDBError enum", "committedDate": "2020-10-07T14:39:28Z", "type": "forcePushed"}, {"oid": "3e43051ee29529c8f859453fcce1d4a9635d11df", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/3e43051ee29529c8f859453fcce1d4a9635d11df", "message": "Change to ErrorCodes class to FDBError enum", "committedDate": "2020-10-07T21:17:26Z", "type": "commit"}, {"oid": "3e43051ee29529c8f859453fcce1d4a9635d11df", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/3e43051ee29529c8f859453fcce1d4a9635d11df", "message": "Change to ErrorCodes class to FDBError enum", "committedDate": "2020-10-07T21:17:26Z", "type": "forcePushed"}]}