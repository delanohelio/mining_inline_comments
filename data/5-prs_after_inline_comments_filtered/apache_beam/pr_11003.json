{"pr_number": 11003, "pr_title": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "pr_createdAt": "2020-02-28T17:44:58Z", "pr_url": "https://github.com/apache/beam/pull/11003", "timeline": [{"oid": "43aee22febe3c25c57029dd707ef998db59c7399", "url": "https://github.com/apache/beam/commit/43aee22febe3c25c57029dd707ef998db59c7399", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default", "committedDate": "2020-02-28T18:20:43Z", "type": "forcePushed"}, {"oid": "4771c190009a885333b493c4816cd9c68401f74d", "url": "https://github.com/apache/beam/commit/4771c190009a885333b493c4816cd9c68401f74d", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-02-28T18:50:43Z", "type": "forcePushed"}, {"oid": "2bf31692e9c11819cc69e959372858bd303f44cb", "url": "https://github.com/apache/beam/commit/2bf31692e9c11819cc69e959372858bd303f44cb", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-02-28T19:12:11Z", "type": "forcePushed"}, {"oid": "2a42bd08103055a022b9bbc2831d48c018edfb0a", "url": "https://github.com/apache/beam/commit/2a42bd08103055a022b9bbc2831d48c018edfb0a", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-02-28T19:12:58Z", "type": "forcePushed"}, {"oid": "b9f55211223c4ef87dbb4dce9a7422a0fa9c445f", "url": "https://github.com/apache/beam/commit/b9f55211223c4ef87dbb4dce9a7422a0fa9c445f", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-02-28T19:36:41Z", "type": "forcePushed"}, {"oid": "91da3224a6532c87d15d676a591ba5740320aefc", "url": "https://github.com/apache/beam/commit/91da3224a6532c87d15d676a591ba5740320aefc", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-02-28T19:39:32Z", "type": "forcePushed"}, {"oid": "f4debaeeef9bd59e6ca3c8e1cd22d6e1179687ac", "url": "https://github.com/apache/beam/commit/f4debaeeef9bd59e6ca3c8e1cd22d6e1179687ac", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-02-28T21:13:53Z", "type": "forcePushed"}, {"oid": "fe2a1992fdc3d297a20c40e8a9b678eca3ee9c6c", "url": "https://github.com/apache/beam/commit/fe2a1992fdc3d297a20c40e8a9b678eca3ee9c6c", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-02-28T21:22:31Z", "type": "forcePushed"}, {"oid": "2838085a062a3bc9b65dee47f68554f35ed764bb", "url": "https://github.com/apache/beam/commit/2838085a062a3bc9b65dee47f68554f35ed764bb", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-03-06T18:39:44Z", "type": "forcePushed"}, {"oid": "e9b241f2a43fcc3c9ba77ee5eb2214839ae1ec42", "url": "https://github.com/apache/beam/commit/e9b241f2a43fcc3c9ba77ee5eb2214839ae1ec42", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-03-06T19:12:01Z", "type": "forcePushed"}, {"oid": "5238997e3b47b8743062aabcb57a237793859397", "url": "https://github.com/apache/beam/commit/5238997e3b47b8743062aabcb57a237793859397", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-03-09T18:24:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg5MzgyNQ==", "url": "https://github.com/apache/beam/pull/11003#discussion_r389893825", "bodyText": "I would suggest to add .withMethod(Method.FILE_LOADS) to be explicit. It connects it better with the comment above. And is protected in case the default changes.", "author": "kennknowles", "createdAt": "2020-03-09T18:52:56Z", "path": "sdks/java/extensions/sql/datacatalog/src/test/java/org/apache/beam/sdk/extensions/sql/meta/provider/datacatalog/DataCatalogBigQueryIT.java", "diffHunk": "@@ -69,9 +73,18 @@\n \n     @Test\n     public void testRead() throws Exception {\n-      bigQuery.insertRows(ID_NAME_SCHEMA, row(1, \"name1\"), row(2, \"name2\"), row(3, \"name3\"));\n-\n       TableReference bqTable = bigQuery.tableReference();\n+\n+      // Streaming inserts do not work with DIRECT_READ mode, there is a several hour lag.\n+      PCollection<Row> data =\n+          writePipeline.apply(Create.of(row(1, \"name1\"), row(2, \"name2\"), row(3, \"name3\")));\n+      data.apply(\n+          BigQueryIO.<Row>write()\n+              .withSchema(BigQueryUtils.toTableSchema(ID_NAME_SCHEMA))\n+              .withFormatFunction(BigQueryUtils.toTableRow())", "originalCommit": "5238997e3b47b8743062aabcb57a237793859397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwMzExMA==", "url": "https://github.com/apache/beam/pull/11003#discussion_r389903110", "bodyText": "Done", "author": "apilloud", "createdAt": "2020-03-09T19:10:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg5MzgyNQ=="}], "type": "inlineReview"}, {"oid": "fffdc78cd846bf3b0b9a0b6a9118117e56e14a9a", "url": "https://github.com/apache/beam/commit/fffdc78cd846bf3b0b9a0b6a9118117e56e14a9a", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-03-09T19:09:36Z", "type": "commit"}, {"oid": "fffdc78cd846bf3b0b9a0b6a9118117e56e14a9a", "url": "https://github.com/apache/beam/commit/fffdc78cd846bf3b0b9a0b6a9118117e56e14a9a", "message": "[BEAM-9411] Enable BigQuery DIRECT_READ by default in SQL", "committedDate": "2020-03-09T19:09:36Z", "type": "forcePushed"}]}