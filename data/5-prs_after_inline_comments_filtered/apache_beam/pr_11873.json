{"pr_number": 11873, "pr_title": "[BEAM-3489] DataflowRunner to read PubsubMessage if getNeedsMessageId is true", "pr_createdAt": "2020-05-31T12:15:39Z", "pr_url": "https://github.com/apache/beam/pull/11873", "timeline": [{"oid": "803d3ff9b35a5ebd17c5463718f79152c42c55a2", "url": "https://github.com/apache/beam/commit/803d3ff9b35a5ebd17c5463718f79152c42c55a2", "message": "DataflowRunner to read PubsubMessage if getNeedsMessageId is true", "committedDate": "2020-05-31T12:28:02Z", "type": "forcePushed"}, {"oid": "5f2c05f0883dcbdfb2cab8cb4ea141b9353017b6", "url": "https://github.com/apache/beam/commit/5f2c05f0883dcbdfb2cab8cb4ea141b9353017b6", "message": "DataflowRunner to read PubsubMessage if getNeedsMessageId is true", "committedDate": "2020-05-31T12:31:07Z", "type": "commit"}, {"oid": "5f2c05f0883dcbdfb2cab8cb4ea141b9353017b6", "url": "https://github.com/apache/beam/commit/5f2c05f0883dcbdfb2cab8cb4ea141b9353017b6", "message": "DataflowRunner to read PubsubMessage if getNeedsMessageId is true", "committedDate": "2020-05-31T12:31:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4ODUxNQ==", "url": "https://github.com/apache/beam/pull/11873#discussion_r434188515", "bodyText": "Minor suggestion:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  if (overriddenTransform.getNeedsAttributes() | overriddenTransform.getNeedsMessageId()) {\n          \n          \n            \n                  if (overriddenTransform.getNeedsAttributes() || overriddenTransform.getNeedsMessageId()) {", "author": "lukecwik", "createdAt": "2020-06-02T21:34:09Z", "path": "runners/google-cloud-dataflow-java/src/main/java/org/apache/beam/runners/dataflow/DataflowRunner.java", "diffHunk": "@@ -1353,14 +1353,14 @@ public void translate(StreamingPubsubIORead transform, TranslationContext contex\n             PropertyNames.PUBSUB_ID_ATTRIBUTE, overriddenTransform.getIdAttribute());\n       }\n       // In both cases, the transform needs to read PubsubMessage. However, in case it needs\n-      // the attributes, we supply an identity \"parse fn\" so the worker will read PubsubMessage's\n-      // from Windmill and simply pass them around; and in case it doesn't need attributes,\n-      // we're already implicitly using a \"Coder\" that interprets the data as a PubsubMessage's\n-      // payload.\n-      if (overriddenTransform.getNeedsAttributes()) {\n+      // the attributes or messageId, we supply an identity \"parse fn\" so the worker will\n+      // read PubsubMessage's from Windmill and simply pass them around; and in case it\n+      // doesn't need attributes, we're already implicitly using a \"Coder\" that interprets\n+      // the data as a PubsubMessage's payload.\n+      if (overriddenTransform.getNeedsAttributes() | overriddenTransform.getNeedsMessageId()) {", "originalCommit": "5f2c05f0883dcbdfb2cab8cb4ea141b9353017b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NzAyNg==", "url": "https://github.com/apache/beam/pull/11873#discussion_r434197026", "bodyText": "Other then this change, this  looks good to me. We'll see what the tests have to say.", "author": "lukecwik", "createdAt": "2020-06-02T21:54:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4ODUxNQ=="}], "type": "inlineReview"}, {"oid": "026cfe45dee318bbfff410362e6436a9203aae57", "url": "https://github.com/apache/beam/commit/026cfe45dee318bbfff410362e6436a9203aae57", "message": "changed | to ||", "committedDate": "2020-06-03T18:26:23Z", "type": "commit"}, {"oid": "0d0286f5b53900055d1834883f4162fd189c09fc", "url": "https://github.com/apache/beam/commit/0d0286f5b53900055d1834883f4162fd189c09fc", "message": "spotless apply", "committedDate": "2020-06-13T08:03:10Z", "type": "commit"}]}