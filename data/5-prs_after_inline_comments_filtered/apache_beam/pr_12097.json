{"pr_number": 12097, "pr_title": "[BEAM-10327] Create a pattern that shows use of Schema using Joins", "pr_createdAt": "2020-06-26T07:56:26Z", "pr_url": "https://github.com/apache/beam/pull/12097", "timeline": [{"oid": "c511cd68dad5bba9a468dea8769e473b355af89f", "url": "https://github.com/apache/beam/commit/c511cd68dad5bba9a468dea8769e473b355af89f", "message": "[BEAM-10327] Create a pattern that shows use of Schema using Joins", "committedDate": "2020-06-26T07:47:40Z", "type": "commit"}, {"oid": "e36b1b0997b6edbe0c0fbaeb105c91495d354bf3", "url": "https://github.com/apache/beam/commit/e36b1b0997b6edbe0c0fbaeb105c91495d354bf3", "message": "Run Spotless PreCommit", "committedDate": "2020-06-26T15:01:33Z", "type": "commit"}, {"oid": "f9443d5c0ddc3d8ca444d2cabdbeab79ddb3bbda", "url": "https://github.com/apache/beam/commit/f9443d5c0ddc3d8ca444d2cabdbeab79ddb3bbda", "message": "Add tests for the SchemaJoinPattern and Fix Documentation", "committedDate": "2020-06-26T23:02:32Z", "type": "commit"}, {"oid": "f3db8eaa7ba60d18998308d49e0ea1a1aff81370", "url": "https://github.com/apache/beam/commit/f3db8eaa7ba60d18998308d49e0ea1a1aff81370", "message": "QuickFix", "committedDate": "2020-06-26T23:51:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc2NDI5NQ==", "url": "https://github.com/apache/beam/pull/12097#discussion_r446764295", "bodyText": "As this is example snippet code, consider if it would be easier for the reader to have the code be inlined here rather than be abstracted in a class.", "author": "rezarokni", "createdAt": "2020-06-29T04:23:13Z", "path": "examples/java/src/test/java/org/apache/beam/examples/snippets/SnippetsTest.java", "diffHunk": "@@ -154,6 +156,73 @@ public void testCoGroupByKeyTuple() throws IOException {\n     p.run();\n   }\n \n+  /* Tests SchemaJoinPattern */\n+  @Test\n+  public void testSchemaJoinPattern() {\n+    // [START SchemaJoinPatternCreate]\n+    // Define Schemas\n+    Schema emailSchema =\n+        Schema.of(\n+            Schema.Field.of(\"name\", Schema.FieldType.STRING),\n+            Schema.Field.of(\"email\", Schema.FieldType.STRING));\n+\n+    Schema phoneSchema =\n+        Schema.of(\n+            Schema.Field.of(\"name\", Schema.FieldType.STRING),\n+            Schema.Field.of(\"phone\", Schema.FieldType.STRING));\n+\n+    // Create User Data Collections\n+    final List<Row> emailUsers =\n+        Arrays.asList(\n+            Row.withSchema(emailSchema).addValue(\"person1\").addValue(\"person1@example.com\").build(),\n+            Row.withSchema(emailSchema).addValue(\"person2\").addValue(\"person2@example.com\").build(),\n+            Row.withSchema(emailSchema).addValue(\"person3\").addValue(\"person3@example.com\").build(),\n+            Row.withSchema(emailSchema)\n+                .addValue(\"person4\")\n+                .addValue(\"person4@example.com\")\n+                .build());\n+\n+    final List<Row> phoneUsers =\n+        Arrays.asList(\n+            Row.withSchema(phoneSchema).addValue(\"person1\").addValue(\"111-222-3333\").build(),\n+            Row.withSchema(phoneSchema).addValue(\"person2\").addValue(\"222-333-4444\").build(),\n+            Row.withSchema(phoneSchema).addValue(\"person3\").addValue(\"444-333-4444\").build(),\n+            Row.withSchema(phoneSchema).addValue(\"person4\").addValue(\"555-333-4444\").build());\n+\n+    // [END SchemaJoinPatternCreate]\n+\n+    PCollection<String> actualFormattedResult =\n+        Snippets.SchemaJoinPattern.main(p, emailUsers, phoneUsers, emailSchema, phoneSchema);", "originalCommit": "f3db8eaa7ba60d18998308d49e0ea1a1aff81370", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4af470d00cf7eb5687ef572faf80ffa0f949b293", "url": "https://github.com/apache/beam/commit/4af470d00cf7eb5687ef572faf80ffa0f949b293", "message": "Add non-match to example and documentation improvements", "committedDate": "2020-06-29T10:04:20Z", "type": "commit"}, {"oid": "5e81c24fd56bf9d2790f63103a240f2a697124d4", "url": "https://github.com/apache/beam/commit/5e81c24fd56bf9d2790f63103a240f2a697124d4", "message": "quickfix", "committedDate": "2020-06-29T13:16:24Z", "type": "commit"}]}