{"pr_number": 6193, "pr_title": "Add option to not fix the content length", "pr_createdAt": "2020-09-23T11:22:53Z", "pr_url": "https://github.com/zaproxy/zaproxy/pull/6193", "timeline": [{"oid": "d9ae6b8cd57a3a638bd3d81078b236b07975d80f", "url": "https://github.com/zaproxy/zaproxy/commit/d9ae6b8cd57a3a638bd3d81078b236b07975d80f", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-23T11:55:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ5OTIxMA==", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493499210", "bodyText": "setVisible?", "author": "thc202", "createdAt": "2020-09-23T11:54:38Z", "path": "zap/src/main/java/org/zaproxy/zap/extension/brk/BreakPanel.java", "diffHunk": "@@ -328,6 +343,7 @@ public void run() {\n                                 responsePanel.setEditable(true);\n                                 cl.show(panelContent, RESPONSE_PANEL);\n                             }\n+                            getButtonFixContentLength().setEnabled(msg instanceof HttpMessage);", "originalCommit": "d628a1a4a7d967891392d67f8b240b30493bce85", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ5OTI0Ng==", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493499246", "bodyText": "Needs equivalent in/for the response.", "author": "thc202", "createdAt": "2020-09-23T11:54:40Z", "path": "zap/src/main/java/org/zaproxy/zap/extension/brk/BreakPanel.java", "diffHunk": "@@ -356,6 +372,12 @@ public void run() {\n \n                             if (isRequest) {\n                                 requestPanel.saveData();\n+                                Message msg = getMessage();\n+                                if (msg instanceof HttpMessage", "originalCommit": "d628a1a4a7d967891392d67f8b240b30493bce85", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjU5MzEzNw==", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r496593137", "bodyText": "The option is not being shown for the response.", "author": "thc202", "createdAt": "2020-09-29T09:58:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ5OTI0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzUwMzY5Mw==", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493503693", "bodyText": "Worth verifying that the header is not changed at all.", "author": "thc202", "createdAt": "2020-09-23T11:59:26Z", "path": "zap/src/test/java/org/zaproxy/zap/extension/httppanel/view/impl/models/http/BodyByteHttpPanelViewModelTest.java", "diffHunk": "@@ -122,7 +122,6 @@ void shouldSetDataIntoBody() {\n         model.setData(otherBodyContent);\n         // Then\n         verify(body).setBody(otherBodyContent);\n-        verify(header).setContentLength(otherBodyContent.length);", "originalCommit": "d9ae6b8cd57a3a638bd3d81078b236b07975d80f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjU5MzU0Mw==", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r496593543", "bodyText": "Was suggesting e.g. verify(header, times(0)).setContentLength(anyInt()); and in all places that was checking the header before.", "author": "thc202", "createdAt": "2020-09-29T09:59:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzUwMzY5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzUwMzkzNw==", "url": "https://github.com/zaproxy/zaproxy/pull/6193#discussion_r493503937", "bodyText": "Should use this class.", "author": "thc202", "createdAt": "2020-09-23T11:59:42Z", "path": "zap/src/main/java/org/zaproxy/zap/extension/brk/BreakPanel.java", "diffHunk": "@@ -509,6 +532,21 @@ public void setButtonMode(int mode) {\n         responseBreakButtons.setButtonMode(mode);\n     }\n \n+    private ZapToggleButton getButtonFixContentLength() {\n+        if (fixContentLength == null) {\n+            fixContentLength =\n+                    new ZapToggleButton(\n+                            DisplayUtils.getScaledIcon(\n+                                    new ImageIcon(\n+                                            HttpPanelSender.class.getResource(", "originalCommit": "d9ae6b8cd57a3a638bd3d81078b236b07975d80f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5b73830eb988dd50b49a6af23ef83a3f8eac2225", "url": "https://github.com/zaproxy/zaproxy/commit/5b73830eb988dd50b49a6af23ef83a3f8eac2225", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-23T12:31:21Z", "type": "forcePushed"}, {"oid": "6d9f4afe937d493c67543d3de73389db8f0b7550", "url": "https://github.com/zaproxy/zaproxy/commit/6d9f4afe937d493c67543d3de73389db8f0b7550", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-23T12:43:48Z", "type": "forcePushed"}, {"oid": "cc08a67aef33160fb50ecdd7300435965e85a303", "url": "https://github.com/zaproxy/zaproxy/commit/cc08a67aef33160fb50ecdd7300435965e85a303", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-30T09:05:34Z", "type": "forcePushed"}, {"oid": "a7274bc7e4f5017f852b99ad57e61476cfb0486f", "url": "https://github.com/zaproxy/zaproxy/commit/a7274bc7e4f5017f852b99ad57e61476cfb0486f", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-30T12:34:14Z", "type": "forcePushed"}, {"oid": "96083032ba483c9eb038021d26d6f8075c92e748", "url": "https://github.com/zaproxy/zaproxy/commit/96083032ba483c9eb038021d26d6f8075c92e748", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-30T12:35:29Z", "type": "forcePushed"}, {"oid": "b6cf16190b3a2349f5e142f047198853bcdc9b57", "url": "https://github.com/zaproxy/zaproxy/commit/b6cf16190b3a2349f5e142f047198853bcdc9b57", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-30T12:50:26Z", "type": "forcePushed"}, {"oid": "3eeb952dc0af880a22b4304e10b9dc659cb20b2a", "url": "https://github.com/zaproxy/zaproxy/commit/3eeb952dc0af880a22b4304e10b9dc659cb20b2a", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-30T14:04:02Z", "type": "forcePushed"}, {"oid": "1ec14e9b956ca5297eb3061c8c29bb1d78e4039a", "url": "https://github.com/zaproxy/zaproxy/commit/1ec14e9b956ca5297eb3061c8c29bb1d78e4039a", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-30T14:13:29Z", "type": "commit"}, {"oid": "1ec14e9b956ca5297eb3061c8c29bb1d78e4039a", "url": "https://github.com/zaproxy/zaproxy/commit/1ec14e9b956ca5297eb3061c8c29bb1d78e4039a", "message": "Add option to not fix the content length\n\nFixes #560\n\nSigned-off-by: Simon Bennetts <psiinon@gmail.com>", "committedDate": "2020-09-30T14:13:29Z", "type": "forcePushed"}]}