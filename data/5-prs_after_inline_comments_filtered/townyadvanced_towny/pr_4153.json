{"pr_number": 4153, "pr_title": "Add 3 \"placeholders\" usable in \"entering town titles\".", "pr_createdAt": "2020-07-09T18:20:06Z", "pr_url": "https://github.com/TownyAdvanced/Towny/pull/4153", "timeline": [{"oid": "d9b6e45e48405fc524e6edc45647349fed43f3e7", "url": "https://github.com/TownyAdvanced/Towny/commit/d9b6e45e48405fc524e6edc45647349fed43f3e7", "message": "Added a new Town method, getNumResidentsOnline(), returning as integer the count of the online(s) resident(s) inside the town.", "committedDate": "2020-07-08T21:08:10Z", "type": "commit"}, {"oid": "dbaa6e7fbf7e48c76f8a5ab1afa81994f654985a", "url": "https://github.com/TownyAdvanced/Towny/commit/dbaa6e7fbf7e48c76f8a5ab1afa81994f654985a", "message": "Added 3 \"placeholders\" ({town_motd}, {town_residents} and {town_residents_online}) who can be used inside notification.titles.*.", "committedDate": "2020-07-08T21:10:05Z", "type": "commit"}, {"oid": "71b79ee51e4644b2e933ca35a73a6e8338b00215", "url": "https://github.com/TownyAdvanced/Towny/commit/71b79ee51e4644b2e933ca35a73a6e8338b00215", "message": "Merge remote-tracking branch 'remotes/upstream/master'", "committedDate": "2020-07-08T21:12:41Z", "type": "commit"}, {"oid": "fe0f4162d91743c68f040177822e2cc38ad8cf03", "url": "https://github.com/TownyAdvanced/Towny/commit/fe0f4162d91743c68f040177822e2cc38ad8cf03", "message": "Clean up.", "committedDate": "2020-07-09T17:48:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQxMzkyOQ==", "url": "https://github.com/TownyAdvanced/Towny/pull/4153#discussion_r452413929", "bodyText": "This needs to be removed, we already have a method TownyAPI#getOnlineResidents() that does this.", "author": null, "createdAt": "2020-07-09T18:35:11Z", "path": "src/com/palmergames/bukkit/towny/object/Town.java", "diffHunk": "@@ -296,6 +297,22 @@ public int getNumResidents() {\n \t\treturn residents.size();\n \t}\n \n+\tpublic int getNumResidentsOnline() {\n+\t\tint onlineResidents = 0;\n+\t\tfor(Resident resident: getResidents()) {\n+\t\t\tif(resident.isNPC()) {\n+\t\t\t\tonlineResidents++;\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\t\t\t\n+\t\t\tPlayer player = Bukkit.getServer().getPlayer(resident.getName());\n+\t\t\tif(player.isOnline()) {\n+\t\t\t\tonlineResidents++;\n+\t\t\t}\n+\t\t}\n+\t\treturn onlineResidents;\n+\t}\n+\t", "originalCommit": "fe0f4162d91743c68f040177822e2cc38ad8cf03", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f48511adcff567f94e8138c04c0fc2aad1b05faf", "url": "https://github.com/TownyAdvanced/Towny/commit/f48511adcff567f94e8138c04c0fc2aad1b05faf", "message": "Removed `getNumResidentsOnline()`.", "committedDate": "2020-07-09T19:05:36Z", "type": "commit"}, {"oid": "69621d15c6af546dceb6b15fc57004a282b8d5e3", "url": "https://github.com/TownyAdvanced/Towny/commit/69621d15c6af546dceb6b15fc57004a282b8d5e3", "message": "Make `{town_residents_online}` use `TownyAPI#getOnlineResidents(town)`.", "committedDate": "2020-07-09T19:07:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQzMzM5Mg==", "url": "https://github.com/TownyAdvanced/Towny/pull/4153#discussion_r452433392", "bodyText": "Undo wildcard import.", "author": "LlmDl", "createdAt": "2020-07-09T19:12:21Z", "path": "src/com/palmergames/bukkit/towny/listeners/TownyPlayerListener.java", "diffHunk": "@@ -1,11 +1,6 @@\n package com.palmergames.bukkit.towny.listeners;\n \n-import com.palmergames.bukkit.towny.Towny;\n-import com.palmergames.bukkit.towny.TownyAPI;\n-import com.palmergames.bukkit.towny.TownyMessaging;\n-import com.palmergames.bukkit.towny.TownySettings;\n-import com.palmergames.bukkit.towny.TownyTimerHandler;\n-import com.palmergames.bukkit.towny.TownyUniverse;\n+import com.palmergames.bukkit.towny.*;", "originalCommit": "69621d15c6af546dceb6b15fc57004a282b8d5e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2ebb63b4345f56bc278bce454ba957f5c189ff85", "url": "https://github.com/TownyAdvanced/Towny/commit/2ebb63b4345f56bc278bce454ba957f5c189ff85", "message": "Revert back Town.java.", "committedDate": "2020-07-09T19:20:06Z", "type": "commit"}, {"oid": "f4c069422f635224f8a99e277c4c0fa325f765a8", "url": "https://github.com/TownyAdvanced/Towny/commit/f4c069422f635224f8a99e277c4c0fa325f765a8", "message": "Restore imports in TownyPlayerListener.java.", "committedDate": "2020-07-09T19:26:20Z", "type": "commit"}, {"oid": "484fd4abd0415de2b9e4bc881c103ba24d0a6c7c", "url": "https://github.com/TownyAdvanced/Towny/commit/484fd4abd0415de2b9e4bc881c103ba24d0a6c7c", "message": "Removed unwanted empty line in TownyPlayerListener.java.", "committedDate": "2020-07-09T19:34:03Z", "type": "commit"}, {"oid": "90dec42e56ecb0a22fa1a956ac48f94fc677aa0a", "url": "https://github.com/TownyAdvanced/Towny/commit/90dec42e56ecb0a22fa1a956ac48f94fc677aa0a", "message": "Fix {town_residents_online} output :x", "committedDate": "2020-07-09T19:41:38Z", "type": "commit"}]}