{"pr_number": 5601, "pr_title": "Use explicit charset instead of default charset", "pr_createdAt": "2020-09-30T15:33:05Z", "pr_url": "https://github.com/apache/skywalking/pull/5601", "timeline": [{"oid": "84ccd994c1c083d846b297e0aa72500a1cc2309f", "url": "https://github.com/apache/skywalking/commit/84ccd994c1c083d846b297e0aa72500a1cc2309f", "message": "Use explicit charset instead of default charset\n\nImplicit use of the platform default charset, which can result in differing behaviour between JVM executions or incorrect behavior if the encoding of the data source doesn't match expectations.", "committedDate": "2020-09-30T15:31:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY0MjUxNw==", "url": "https://github.com/apache/skywalking/pull/5601#discussion_r497642517", "bodyText": "ByteBufferBackingArray:  ByteBuffer.array() shouldn't be called unless ByteBuffer.arrayOffset() is used or if the ByteBuffer was initialized using ByteBuffer.wrap() or ByteBuffer.allocate().", "author": "sonatype-lift", "createdAt": "2020-09-30T16:26:02Z", "path": "apm-sniffer/apm-sdk-plugin/avro-plugin/src/main/java/org/apache/skywalking/apm/plugin/avro/SWServerRPCPlugin.java", "diffHunk": "@@ -50,7 +51,7 @@ public void serverReceiveRequest(RPCContext context) {\n         while (items.hasNext()) {\n             items = items.next();\n             ByteBuffer buffer = (ByteBuffer) meta.get(new Utf8(items.getHeadKey()));\n-            items.setHeadValue(new String(buffer.array()));\n+            items.setHeadValue(new String(buffer.array(), StandardCharsets.UTF_8));", "originalCommit": "84ccd994c1c083d846b297e0aa72500a1cc2309f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY0NDQxNw==", "url": "https://github.com/apache/skywalking/pull/5601#discussion_r497644417", "bodyText": "This is another issue reported separately, will be fixed in another PR", "author": "kezhenxu94", "createdAt": "2020-09-30T16:28:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY0MjUxNw=="}], "type": "inlineReview"}, {"oid": "e015d7620141d25f94ff9dc9b50acb2359c32da0", "url": "https://github.com/apache/skywalking/commit/e015d7620141d25f94ff9dc9b50acb2359c32da0", "message": "Merge branch 'master' into muse-bug-bash/Defaultcharset", "committedDate": "2020-10-01T00:16:48Z", "type": "commit"}, {"oid": "15c22f19cec9707b09ae0c2b36f03be9f02395af", "url": "https://github.com/apache/skywalking/commit/15c22f19cec9707b09ae0c2b36f03be9f02395af", "message": "Merge branch 'master' into muse-bug-bash/Defaultcharset", "committedDate": "2020-10-01T00:25:48Z", "type": "commit"}, {"oid": "7ebe9634d3d8bf2d4a05ac2f3c3da3df48f2fc93", "url": "https://github.com/apache/skywalking/commit/7ebe9634d3d8bf2d4a05ac2f3c3da3df48f2fc93", "message": "Merge branch 'master' into muse-bug-bash/Defaultcharset", "committedDate": "2020-10-01T09:29:08Z", "type": "commit"}, {"oid": "fffdfed9bcb861d8802a1633d97015da16861203", "url": "https://github.com/apache/skywalking/commit/fffdfed9bcb861d8802a1633d97015da16861203", "message": "Merge branch 'master' into muse-bug-bash/Defaultcharset", "committedDate": "2020-10-01T11:06:14Z", "type": "commit"}]}