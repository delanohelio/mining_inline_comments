{"pr_number": 5293, "pr_title": "agent plugins selector", "pr_createdAt": "2020-08-11T05:52:53Z", "pr_url": "https://github.com/apache/skywalking/pull/5293", "timeline": [{"oid": "002f4c2573399a96649a64fb399dc8b7e80cd175", "url": "https://github.com/apache/skywalking/commit/002f4c2573399a96649a64fb399dc8b7e80cd175", "message": "add SuperDataset tag for add super size dataset shards config in es", "committedDate": "2020-05-16T09:46:41Z", "type": "commit"}, {"oid": "3fead29fe6379c1784feb1e21b28888266242d69", "url": "https://github.com/apache/skywalking/commit/3fead29fe6379c1784feb1e21b28888266242d69", "message": "explain the meaning of indexShardsNumber and superDatasetIndexShardsFactor", "committedDate": "2020-05-16T13:40:59Z", "type": "commit"}, {"oid": "f84bf3ea704ac9c0b7d751d6533d8ad25ba94625", "url": "https://github.com/apache/skywalking/commit/f84bf3ea704ac9c0b7d751d6533d8ad25ba94625", "message": "code style format", "committedDate": "2020-05-17T08:19:36Z", "type": "commit"}, {"oid": "b9c0d17a67d7213e7426b1449410700079b0ac2a", "url": "https://github.com/apache/skywalking/commit/b9c0d17a67d7213e7426b1449410700079b0ac2a", "message": "Merge branch 'master' into master", "committedDate": "2020-05-17T08:35:47Z", "type": "commit"}, {"oid": "f176bdbb28a466f0683d341d7b5eb1782068438f", "url": "https://github.com/apache/skywalking/commit/f176bdbb28a466f0683d341d7b5eb1782068438f", "message": "code style format", "committedDate": "2020-05-17T08:55:05Z", "type": "commit"}, {"oid": "34df4295c55fb7343a4e3e3dc86ff417d44f0010", "url": "https://github.com/apache/skywalking/commit/34df4295c55fb7343a4e3e3dc86ff417d44f0010", "message": "code style format and change notes", "committedDate": "2020-05-17T08:59:25Z", "type": "commit"}, {"oid": "e698ddf0b0d522894d94b4f1143210afabffd8d5", "url": "https://github.com/apache/skywalking/commit/e698ddf0b0d522894d94b4f1143210afabffd8d5", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-05-20T08:01:53Z", "type": "commit"}, {"oid": "52e21a287727aeffa241533f3c208a7b9c4fb215", "url": "https://github.com/apache/skywalking/commit/52e21a287727aeffa241533f3c208a7b9c4fb215", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-05-27T13:54:44Z", "type": "commit"}, {"oid": "87cc6a2c405f3b31deaf8d5a47f718edd6c0eee5", "url": "https://github.com/apache/skywalking/commit/87cc6a2c405f3b31deaf8d5a47f718edd6c0eee5", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-10T04:41:26Z", "type": "commit"}, {"oid": "39669e67a8b738f7cf5030b3277ddc1668a88835", "url": "https://github.com/apache/skywalking/commit/39669e67a8b738f7cf5030b3277ddc1668a88835", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-22T09:47:59Z", "type": "commit"}, {"oid": "172145bdc3ca85d0876cbd8f0b113c571fdb8c79", "url": "https://github.com/apache/skywalking/commit/172145bdc3ca85d0876cbd8f0b113c571fdb8c79", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-12T14:33:34Z", "type": "commit"}, {"oid": "2c32e00ae24a9f7ec30510ce292006172356a7cf", "url": "https://github.com/apache/skywalking/commit/2c32e00ae24a9f7ec30510ce292006172356a7cf", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-14T07:36:38Z", "type": "commit"}, {"oid": "7be9f078d9264919eb1158e31c39fb2c5c3fdd0d", "url": "https://github.com/apache/skywalking/commit/7be9f078d9264919eb1158e31c39fb2c5c3fdd0d", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-20T02:13:49Z", "type": "commit"}, {"oid": "9bf0783eb1f479ba7c17bc0d5c44c9a1fc3bfd40", "url": "https://github.com/apache/skywalking/commit/9bf0783eb1f479ba7c17bc0d5c44c9a1fc3bfd40", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-29T15:07:45Z", "type": "commit"}, {"oid": "2dd54c30375f24bc5f46f3a84a284893b0adb105", "url": "https://github.com/apache/skywalking/commit/2dd54c30375f24bc5f46f3a84a284893b0adb105", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-01T09:14:36Z", "type": "commit"}, {"oid": "3d67538404afe862216472843f94ec376bbd7a14", "url": "https://github.com/apache/skywalking/commit/3d67538404afe862216472843f94ec376bbd7a14", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-09T14:50:36Z", "type": "commit"}, {"oid": "b87c3de4b9ef94ef82d3a01f43e3ad3e0663dbce", "url": "https://github.com/apache/skywalking/commit/b87c3de4b9ef94ef82d3a01f43e3ad3e0663dbce", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-10T06:55:52Z", "type": "commit"}, {"oid": "de1c3a89eae512f6dde4275856a3d42107c61794", "url": "https://github.com/apache/skywalking/commit/de1c3a89eae512f6dde4275856a3d42107c61794", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-11T03:31:37Z", "type": "commit"}, {"oid": "fe3b139fab9516ef4c6f5c29ecce140d7677ff94", "url": "https://github.com/apache/skywalking/commit/fe3b139fab9516ef4c6f5c29ecce140d7677ff94", "message": "plugin selector for common agent packages", "committedDate": "2020-08-11T05:47:47Z", "type": "commit"}, {"oid": "206e096125befaf9b8dbc76a616a7e88026728fc", "url": "https://github.com/apache/skywalking/commit/206e096125befaf9b8dbc76a616a7e88026728fc", "message": "plugin excludes selector", "committedDate": "2020-08-11T06:54:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODM2NzMzMw==", "url": "https://github.com/apache/skywalking/pull/5293#discussion_r468367333", "bodyText": "You forgot to update the name includes, should be excludes", "author": "kezhenxu94", "createdAt": "2020-08-11T07:00:56Z", "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/plugin/PluginSelector.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.agent.core.plugin;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import static org.apache.skywalking.apm.agent.core.conf.Config.Plugin.EXCLUDE_PLUGINS;\n+\n+public class PluginSelector {\n+\n+    public List<PluginDefine> select(List<PluginDefine> pluginDefines) {\n+        if (!EXCLUDE_PLUGINS.isEmpty()) {\n+            List<String> includes = Arrays.asList(EXCLUDE_PLUGINS.toLowerCase().split(\",\"));", "originalCommit": "206e096125befaf9b8dbc76a616a7e88026728fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODM3MTAyOA==", "url": "https://github.com/apache/skywalking/pull/5293#discussion_r468371028", "bodyText": "fix", "author": "EvanLjp", "createdAt": "2020-08-11T07:09:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODM2NzMzMw=="}], "type": "inlineReview"}, {"oid": "1df99ab9f95b04bedfe8e2dc8661ca8466f491c4", "url": "https://github.com/apache/skywalking/commit/1df99ab9f95b04bedfe8e2dc8661ca8466f491c4", "message": "plugin excludes selector doc", "committedDate": "2020-08-11T07:08:53Z", "type": "commit"}, {"oid": "433408a6c0689df93634011e1412b135e493856c", "url": "https://github.com/apache/skywalking/commit/433408a6c0689df93634011e1412b135e493856c", "message": "add agent plugin list doc", "committedDate": "2020-08-12T02:57:04Z", "type": "commit"}, {"oid": "6951f589a7f9e9c29306af69979abe7e426f0494", "url": "https://github.com/apache/skywalking/commit/6951f589a7f9e9c29306af69979abe7e426f0494", "message": "Merge branch 'master' into activate-plugins", "committedDate": "2020-08-12T03:33:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTEwNTgxOQ==", "url": "https://github.com/apache/skywalking/pull/5293#discussion_r469105819", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                     * Excludes some plugins which define in plugins dir\n          \n          \n            \n                     * Exclude activated plugins", "author": "wu-sheng", "createdAt": "2020-08-12T08:49:43Z", "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/conf/Config.java", "diffHunk": "@@ -266,6 +266,11 @@\n          * Control the length of the peer field.\n          */\n         public static int PEER_MAX_LENGTH = 200;\n+\n+        /**\n+         * Excludes some plugins which define in plugins dir", "originalCommit": "6951f589a7f9e9c29306af69979abe7e426f0494", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI4NzY5MA==", "url": "https://github.com/apache/skywalking/pull/5293#discussion_r469287690", "bodyText": "fix", "author": "EvanLjp", "createdAt": "2020-08-12T14:09:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTEwNTgxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTEwNjA5OQ==", "url": "https://github.com/apache/skywalking/pull/5293#discussion_r469106099", "bodyText": "Comments required.", "author": "wu-sheng", "createdAt": "2020-08-12T08:50:08Z", "path": "apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/plugin/PluginSelector.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+package org.apache.skywalking.apm.agent.core.plugin;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import static org.apache.skywalking.apm.agent.core.conf.Config.Plugin.EXCLUDE_PLUGINS;\n+\n+public class PluginSelector {", "originalCommit": "6951f589a7f9e9c29306af69979abe7e426f0494", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI4NzY0Ng==", "url": "https://github.com/apache/skywalking/pull/5293#discussion_r469287646", "bodyText": "fix", "author": "EvanLjp", "createdAt": "2020-08-12T14:09:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTEwNjA5OQ=="}], "type": "inlineReview"}, {"oid": "dcad9cc044aa0bccdd495453b42015c1ea5d7d14", "url": "https://github.com/apache/skywalking/commit/dcad9cc044aa0bccdd495453b42015c1ea5d7d14", "message": "fix some nits", "committedDate": "2020-08-12T14:07:01Z", "type": "commit"}, {"oid": "a0bd235338b8d8c4a188c4aefa2a2496e6936fb8", "url": "https://github.com/apache/skywalking/commit/a0bd235338b8d8c4a188c4aefa2a2496e6936fb8", "message": "Merge branch 'activate-plugins' of https://github.com/EvanLjp/skywalking into activate-plugins", "committedDate": "2020-08-12T14:07:41Z", "type": "commit"}, {"oid": "e2cb9d776c1b7e230388975a6f8ba54222ee87a7", "url": "https://github.com/apache/skywalking/commit/e2cb9d776c1b7e230388975a6f8ba54222ee87a7", "message": "Merge remote-tracking branch 'upstream/master' into activate-plugins", "committedDate": "2020-08-12T14:08:36Z", "type": "commit"}, {"oid": "71a0a4320d6238091ad3793571b1bbd11bd54e9c", "url": "https://github.com/apache/skywalking/commit/71a0a4320d6238091ad3793571b1bbd11bd54e9c", "message": "add check-javaagent-plugin-list.sh", "committedDate": "2020-08-13T04:59:49Z", "type": "commit"}, {"oid": "32e14700cf474c03a92a0f60d9765cf15e4ed035", "url": "https://github.com/apache/skywalking/commit/32e14700cf474c03a92a0f60d9765cf15e4ed035", "message": "Merge remote-tracking branch 'upstream/master' into activate-plugins", "committedDate": "2020-08-13T05:05:49Z", "type": "commit"}, {"oid": "dd1f1c7e689aaab4f2a5cffa90942dc6a3fb4a6c", "url": "https://github.com/apache/skywalking/commit/dd1f1c7e689aaab4f2a5cffa90942dc6a3fb4a6c", "message": "format", "committedDate": "2020-08-13T07:42:47Z", "type": "commit"}, {"oid": "44f158c362d453e7fa9b926212b6c3517fd7d254", "url": "https://github.com/apache/skywalking/commit/44f158c362d453e7fa9b926212b6c3517fd7d254", "message": "Update apm-sniffer/config/agent.config\r\n\r\nFix format.", "committedDate": "2020-08-13T07:49:10Z", "type": "commit"}, {"oid": "b89f822f9ae6bcf583c6d4ac2fef1bdaf5a5d8e5", "url": "https://github.com/apache/skywalking/commit/b89f822f9ae6bcf583c6d4ac2fef1bdaf5a5d8e5", "message": "Merge branch 'master' into activate-plugins", "committedDate": "2020-08-13T08:08:57Z", "type": "commit"}, {"oid": "d3a81b84581a0698bdfd2ccb369e819bf126a356", "url": "https://github.com/apache/skywalking/commit/d3a81b84581a0698bdfd2ccb369e819bf126a356", "message": "add ci process", "committedDate": "2020-08-13T09:19:00Z", "type": "commit"}, {"oid": "c4d220658588e65b928b1a3e364275ed6816bc8c", "url": "https://github.com/apache/skywalking/commit/c4d220658588e65b928b1a3e364275ed6816bc8c", "message": "Merge branch 'activate-plugins' of https://github.com/EvanLjp/skywalking into activate-plugins", "committedDate": "2020-08-13T09:20:33Z", "type": "commit"}, {"oid": "eaa19e18182e8cf9ea9984068cfd16fe01225cf3", "url": "https://github.com/apache/skywalking/commit/eaa19e18182e8cf9ea9984068cfd16fe01225cf3", "message": "chmod +x check-javaagent-plugin-list.sh", "committedDate": "2020-08-13T12:03:16Z", "type": "commit"}, {"oid": "c1281d127ec78ae5f0d7bc8f8ba16859d30c391b", "url": "https://github.com/apache/skywalking/commit/c1281d127ec78ae5f0d7bc8f8ba16859d30c391b", "message": "fix ci script tool", "committedDate": "2020-08-13T14:38:36Z", "type": "commit"}, {"oid": "978e1b06b189a0c9d303cf3ec966cc2dfbca7f69", "url": "https://github.com/apache/skywalking/commit/978e1b06b189a0c9d303cf3ec966cc2dfbca7f69", "message": "move position", "committedDate": "2020-08-13T14:56:05Z", "type": "commit"}, {"oid": "1a20492dcf4447a9abf21cfc2e17b42ca01e6a94", "url": "https://github.com/apache/skywalking/commit/1a20492dcf4447a9abf21cfc2e17b42ca01e6a94", "message": "Merge branch 'master' into activate-plugins", "committedDate": "2020-08-13T16:23:41Z", "type": "commit"}, {"oid": "f67f493b9bfc82e867fe82a1f3832295855dea74", "url": "https://github.com/apache/skywalking/commit/f67f493b9bfc82e867fe82a1f3832295855dea74", "message": "fix plugin list doc", "committedDate": "2020-08-14T00:46:10Z", "type": "commit"}, {"oid": "085739e693ed5f58d517f1e1d574de4629cf7639", "url": "https://github.com/apache/skywalking/commit/085739e693ed5f58d517f1e1d574de4629cf7639", "message": "fix script", "committedDate": "2020-08-14T02:16:20Z", "type": "commit"}, {"oid": "5d158ae46d7e47e61e5e10897677693ffb3f8340", "url": "https://github.com/apache/skywalking/commit/5d158ae46d7e47e61e5e10897677693ffb3f8340", "message": "add echo", "committedDate": "2020-08-14T03:05:39Z", "type": "commit"}, {"oid": "4e802435935d853bda3ddf2011a4713065cb8a1c", "url": "https://github.com/apache/skywalking/commit/4e802435935d853bda3ddf2011a4713065cb8a1c", "message": "remove rm", "committedDate": "2020-08-14T04:32:11Z", "type": "commit"}, {"oid": "a2a002056b57dae6a4647d991b381a4e3ee55550", "url": "https://github.com/apache/skywalking/commit/a2a002056b57dae6a4647d991b381a4e3ee55550", "message": "test script", "committedDate": "2020-08-14T04:46:18Z", "type": "commit"}, {"oid": "ce1f724e4501952092a094068dbaa4479a7901ef", "url": "https://github.com/apache/skywalking/commit/ce1f724e4501952092a094068dbaa4479a7901ef", "message": "test", "committedDate": "2020-08-14T05:35:37Z", "type": "commit"}, {"oid": "941c3ecddb0e0e54098b50a58ac5967196abbf92", "url": "https://github.com/apache/skywalking/commit/941c3ecddb0e0e54098b50a58ac5967196abbf92", "message": "Merge branch 'master' into activate-plugins", "committedDate": "2020-08-14T05:54:45Z", "type": "commit"}]}