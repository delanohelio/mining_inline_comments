{"pr_number": 4954, "pr_title": "fix lettuce plugin sometimes trace doesn\u2018t show span layer", "pr_createdAt": "2020-06-20T11:50:17Z", "pr_url": "https://github.com/apache/skywalking/pull/4954", "timeline": [{"oid": "ee0e3d30b3b89cf4f479de3a2d140b6c21c7fdd3", "url": "https://github.com/apache/skywalking/commit/ee0e3d30b3b89cf4f479de3a2d140b6c21c7fdd3", "message": "fix issue 4879", "committedDate": "2020-06-20T11:33:21Z", "type": "commit"}, {"oid": "f82dab156b441c5375b6a14c6ee95acf5c95a664", "url": "https://github.com/apache/skywalking/commit/f82dab156b441c5375b6a14c6ee95acf5c95a664", "message": "Merge branch 'master' into fix-issue-4879", "committedDate": "2020-06-20T11:57:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzEyNzM1Mw==", "url": "https://github.com/apache/skywalking/pull/4954#discussion_r443127353", "bodyText": "I think you should create Tags#CACHE_TYPE. Redis is not DB from my understanding.", "author": "wu-sheng", "createdAt": "2020-06-20T12:28:52Z", "path": "apm-sniffer/apm-sdk-plugin/lettuce-5.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/lettuce/v5/AsyncCommandMethodInterceptor.java", "diffHunk": "@@ -40,6 +42,8 @@ public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allAr\n         String operationName = \"Lettuce/\" + asyncCommand.getType().name();\n         AbstractSpan span = ContextManager.createLocalSpan(operationName + \"/onComplete\");\n         span.setComponent(ComponentsDefine.LETTUCE);\n+        Tags.DB_TYPE.set(span, \"Redis\");", "originalCommit": "f82dab156b441c5375b6a14c6ee95acf5c95a664", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzEyNzQ0OA==", "url": "https://github.com/apache/skywalking/pull/4954#discussion_r443127448", "bodyText": "Ignore me, I noticed the old codes showing this as a DB.", "author": "wu-sheng", "createdAt": "2020-06-20T12:30:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzEyNzM1Mw=="}], "type": "inlineReview"}]}