{"pr_number": 4787, "pr_title": "Various monitor improvements", "pr_createdAt": "2020-11-12T21:03:34Z", "pr_url": "https://github.com/bisq-network/bisq/pull/4787", "timeline": [{"oid": "5c7aa80afaaf244c0757852d8305890a91db5986", "url": "https://github.com/bisq-network/bisq/commit/5c7aa80afaaf244c0757852d8305890a91db5986", "message": "Add deviation to persistent warnings/alerts", "committedDate": "2020-11-12T20:58:55Z", "type": "commit"}, {"oid": "850f73aad5a1bf0935ced160c0c61be581413a17", "url": "https://github.com/bisq-network/bisq/commit/850f73aad5a1bf0935ced160c0c61be581413a17", "message": "Fix formatting", "committedDate": "2020-11-12T20:58:55Z", "type": "commit"}, {"oid": "4d17e986a2246badcfe151c794ba0d2e67a50672", "url": "https://github.com/bisq-network/bisq/commit/4d17e986a2246badcfe151c794ba0d2e67a50672", "message": "Update COMMIT_HASH to 04440f95 (after merged master)", "committedDate": "2020-11-12T20:58:55Z", "type": "commit"}, {"oid": "ac955e1875ae35d0ece0fd43a7ad033973597b21", "url": "https://github.com/bisq-network/bisq/commit/ac955e1875ae35d0ece0fd43a7ad033973597b21", "message": "Reduce TTL for ack and mailbox messages", "committedDate": "2020-11-12T20:58:55Z", "type": "commit"}, {"oid": "b09ebdeeba35fa7870d5f61f2ff6e08d8f538ab7", "url": "https://github.com/bisq-network/bisq/commit/b09ebdeeba35fa7870d5f61f2ff6e08d8f538ab7", "message": "Update COMMIT_HASH to fd2a04a2", "committedDate": "2020-11-12T20:58:56Z", "type": "commit"}, {"oid": "012c54cf0241f627b7324216b69dc1fe6f131be6", "url": "https://github.com/bisq-network/bisq/commit/012c54cf0241f627b7324216b69dc1fe6f131be6", "message": "Fix log at startup", "committedDate": "2020-11-12T20:58:56Z", "type": "commit"}, {"oid": "f10d2318f308cb8221d99a31acf6d8f57273e292", "url": "https://github.com/bisq-network/bisq/commit/f10d2318f308cb8221d99a31acf6d8f57273e292", "message": "Log when we remove expired entries", "committedDate": "2020-11-12T20:58:56Z", "type": "commit"}, {"oid": "4bececeb4ca24e7722f1235d0ea95b5418ef0283", "url": "https://github.com/bisq-network/bisq/commit/4bececeb4ca24e7722f1235d0ea95b5418ef0283", "message": "Increase MAX_PERMITTED_MESSAGE_SIZE to 15 MB, increase SOCKET_TIMEOUT to 6 min", "committedDate": "2020-11-12T20:58:56Z", "type": "commit"}, {"oid": "b002c93d784e6fb3cd30c11aa08e46fcf69ff23d", "url": "https://github.com/bisq-network/bisq/commit/b002c93d784e6fb3cd30c11aa08e46fcf69ff23d", "message": "Increase SOCKET_TIMEOUT to 6 min", "committedDate": "2020-11-12T20:58:56Z", "type": "commit"}, {"oid": "a1c84741f3b32b0de56734d0506cf9c131c0971e", "url": "https://github.com/bisq-network/bisq/commit/a1c84741f3b32b0de56734d0506cf9c131c0971e", "message": "Add comments, revert TTL change at AckMessage as it has no effect anyway", "committedDate": "2020-11-12T20:58:56Z", "type": "commit"}, {"oid": "33e378accdbd575ef6352c076a534c84d2d3cb83", "url": "https://github.com/bisq-network/bisq/commit/33e378accdbd575ef6352c076a534c84d2d3cb83", "message": "Update COMMIT_HASH to fec8f6e3", "committedDate": "2020-11-12T20:58:56Z", "type": "commit"}, {"oid": "16880b2f6abb72d8cd08ff171598a1434815abdb", "url": "https://github.com/bisq-network/bisq/commit/16880b2f6abb72d8cd08ff171598a1434815abdb", "message": "Change deviation limits for OfferPayload", "committedDate": "2020-11-12T20:58:56Z", "type": "commit"}, {"oid": "86a853bfb996c2377a346e161b522d4a26edb195", "url": "https://github.com/bisq-network/bisq/commit/86a853bfb996c2377a346e161b522d4a26edb195", "message": "Set response time only in non error case", "committedDate": "2020-11-12T20:58:56Z", "type": "commit"}, {"oid": "a0565425df6175e2e95d1e705596fb05f3327670", "url": "https://github.com/bisq-network/bisq/commit/a0565425df6175e2e95d1e705596fb05f3327670", "message": "Add historical data for error msg\nRename 'Number of responses' to 'Number of requests'\nRename timeout err msg\n\n@jmacxx: See comment at `getErrorMsgLine`... If you need those historical\nerror msg data in the json as well we need to refactor a bit more...", "committedDate": "2020-11-12T20:58:57Z", "type": "commit"}, {"oid": "1eca9dff4b6ea471f1430aac7fbba9068b1435b3", "url": "https://github.com/bisq-network/bisq/commit/1eca9dff4b6ea471f1430aac7fbba9068b1435b3", "message": "Use dash for empty filteredSeedNodes value", "committedDate": "2020-11-12T20:58:57Z", "type": "commit"}, {"oid": "5e4156910a893da39f718ce482dbcd9337cded38", "url": "https://github.com/bisq-network/bisq/commit/5e4156910a893da39f718ce482dbcd9337cded38", "message": "Add hasError util method\nReformattings, cleanups", "committedDate": "2020-11-12T20:58:57Z", "type": "commit"}, {"oid": "04ab5077830864e546393b325bec56e0c84d7bef", "url": "https://github.com/bisq-network/bisq/commit/04ab5077830864e546393b325bec56e0c84d7bef", "message": "Update COMMIT_HASH to 627888f0", "committedDate": "2020-11-12T20:58:57Z", "type": "commit"}, {"oid": "86a204528408a81e05cb2989ff2d93007bd5b976", "url": "https://github.com/bisq-network/bisq/commit/86a204528408a81e05cb2989ff2d93007bd5b976", "message": "Fix wrong kb display", "committedDate": "2020-11-12T20:58:57Z", "type": "commit"}, {"oid": "69802e232ddfbb3bb371a9f1172cc9bc148787cf", "url": "https://github.com/bisq-network/bisq/commit/69802e232ddfbb3bb371a9f1172cc9bc148787cf", "message": "Reduce timeout", "committedDate": "2020-11-12T20:58:57Z", "type": "commit"}, {"oid": "bb095d413ca8e81138eb69c65594aa002249e3f7", "url": "https://github.com/bisq-network/bisq/commit/bb095d413ca8e81138eb69c65594aa002249e3f7", "message": "Increase timout to 90 sec", "committedDate": "2020-11-12T20:58:57Z", "type": "commit"}, {"oid": "6a2583d5fa20c3a8090785ba988d0b3ec68fda9b", "url": "https://github.com/bisq-network/bisq/commit/6a2583d5fa20c3a8090785ba988d0b3ec68fda9b", "message": "Decrease deviationTolerance for numAllConnectionsLostEvents", "committedDate": "2020-11-12T20:58:57Z", "type": "commit"}, {"oid": "1b7c1ce49a60f2c3796fdda98ef1caf3dc142660", "url": "https://github.com/bisq-network/bisq/commit/1b7c1ce49a60f2c3796fdda98ef1caf3dc142660", "message": "Only reset numAllConnectionsLostEvents if we have nodes connected", "committedDate": "2020-11-12T20:58:57Z", "type": "commit"}, {"oid": "2486bd512fdf12fb6af30a0eab59e7ce960d38a8", "url": "https://github.com/bisq-network/bisq/commit/2486bd512fdf12fb6af30a0eab59e7ce960d38a8", "message": "Shut down if more then 1 all connections lost events", "committedDate": "2020-11-12T20:58:58Z", "type": "commit"}, {"oid": "8bc78c852b9a94021409d43f0fce296c83849387", "url": "https://github.com/bisq-network/bisq/commit/8bc78c852b9a94021409d43f0fce296c83849387", "message": "Cleanup tor dir if all connections lost", "committedDate": "2020-11-12T20:58:58Z", "type": "commit"}, {"oid": "2b807769d4590389bf9ca5bfb4a130deaebd7d5a", "url": "https://github.com/bisq-network/bisq/commit/2b807769d4590389bf9ca5bfb4a130deaebd7d5a", "message": "Update commit hash to 7f83d1b3", "committedDate": "2020-11-12T20:58:58Z", "type": "commit"}, {"oid": "ee5fca95324ebd125193a787d70e1c2c1cd1eb75", "url": "https://github.com/bisq-network/bisq/commit/ee5fca95324ebd125193a787d70e1c2c1cd1eb75", "message": "Revert timeout changes and MAX_PERMITTED_MESSAGE_SIZE change", "committedDate": "2020-11-12T21:01:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgwMTEzNA==", "url": "https://github.com/bisq-network/bisq/pull/4787#discussion_r523801134", "bodyText": "I almost left a comment regarding a little precedence confusion, re:\n( System.currentTimeMillis() - requestInfo1.getRequestStartTime()  ) > TimeUnit.HOURS.toMillis(24)\n\nThe precedence rules work, but now it's clear from the change below.", "author": "ghubstan", "createdAt": "2020-11-15T19:21:43Z", "path": "inventory/src/main/java/bisq/inventory/InventoryWebServer.java", "diffHunk": "@@ -484,14 +487,12 @@ private String getErrorMsgLine(NodeAddress seedNode,\n                 RequestInfo requestInfo1 = requestInfoList.get(i);\n \n                 // We ignore old errors as at startup timeouts are expected and each node restarts once a day\n-                if (requestInfo1.getRequestStartTime() > 0 &&\n-                        System.currentTimeMillis() - requestInfo1.getRequestStartTime() > TimeUnit.HOURS.toMillis(24)) {", "originalCommit": "5e4156910a893da39f718ce482dbcd9337cded38", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ccfcc351f4b25cfd4989cd753363e252d08ddaaa", "url": "https://github.com/bisq-network/bisq/commit/ccfcc351f4b25cfd4989cd753363e252d08ddaaa", "message": "Clean tor dir at startup", "committedDate": "2020-11-18T01:17:44Z", "type": "commit"}]}