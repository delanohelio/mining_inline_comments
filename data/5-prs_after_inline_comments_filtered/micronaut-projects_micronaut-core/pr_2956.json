{"pr_number": 2956, "pr_title": "Upgrade netty and add Cookie SameSite attribute support", "pr_createdAt": "2020-03-20T18:34:28Z", "pr_url": "https://github.com/micronaut-projects/micronaut-core/pull/2956", "timeline": [{"oid": "be7994f8cc4fc9056bd44649430ad040193ddfe4", "url": "https://github.com/micronaut-projects/micronaut-core/commit/be7994f8cc4fc9056bd44649430ad040193ddfe4", "message": "Upgrade netty and add Cookie SameSite attribute support", "committedDate": "2020-03-20T18:35:31Z", "type": "forcePushed"}, {"oid": "2f390c12b6c91fd7139896a3f35c988e1a0d4bf1", "url": "https://github.com/micronaut-projects/micronaut-core/commit/2f390c12b6c91fd7139896a3f35c988e1a0d4bf1", "message": "Upgrade netty and add Cookie SameSite attribute support", "committedDate": "2020-03-20T18:55:02Z", "type": "forcePushed"}, {"oid": "6e41eadd9dbc9f432b665ed116b1981603d6dbca", "url": "https://github.com/micronaut-projects/micronaut-core/commit/6e41eadd9dbc9f432b665ed116b1981603d6dbca", "message": "Upgrade netty and add Cookie SameSite attribute support", "committedDate": "2020-03-20T19:10:54Z", "type": "forcePushed"}, {"oid": "fc70ac1e06a9ca428e20fc370828902aadbee971", "url": "https://github.com/micronaut-projects/micronaut-core/commit/fc70ac1e06a9ca428e20fc370828902aadbee971", "message": "Upgrade netty and add Cookie SameSite attribute support", "committedDate": "2020-03-20T19:40:39Z", "type": "forcePushed"}, {"oid": "218cb756aed8ec0f966b3a00e0f52c033f383ee5", "url": "https://github.com/micronaut-projects/micronaut-core/commit/218cb756aed8ec0f966b3a00e0f52c033f383ee5", "message": "Upgrade netty and add Cookie SameSite attribute support", "committedDate": "2020-03-20T19:58:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDYyMw==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980623", "bodyText": "Maybe prefer Optional<SameSite>", "author": "graemerocher", "createdAt": "2020-03-21T10:20:17Z", "path": "http/src/main/java/io/micronaut/http/cookie/Cookie.java", "diffHunk": "@@ -78,6 +78,23 @@\n      */\n     long getMaxAge();\n \n+    /**\n+     * Checks to see if this {@link Cookie} can be sent along cross-site requests.\n+     * For more information, please look\n+     * <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">here</a>\n+     * @return The SameSite attribute of the cookie\n+     */\n+    @Nullable SameSite getSameSite();", "originalCommit": "218cb756aed8ec0f966b3a00e0f52c033f383ee5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDc2OQ==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980769", "bodyText": "Also should be a default method that return Optional.empty() to avoid breaking API change", "author": "graemerocher", "createdAt": "2020-03-21T10:22:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDYyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAwNTYzMw==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r396005633", "bodyText": "Done", "author": "croudet", "createdAt": "2020-03-21T16:18:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDYyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDY2NA==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980664", "bodyText": "Argument should have @Nullable", "author": "graemerocher", "createdAt": "2020-03-21T10:20:37Z", "path": "http/src/main/java/io/micronaut/http/cookie/Cookie.java", "diffHunk": "@@ -78,6 +78,23 @@\n      */\n     long getMaxAge();\n \n+    /**\n+     * Checks to see if this {@link Cookie} can be sent along cross-site requests.\n+     * For more information, please look\n+     * <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">here</a>\n+     * @return The SameSite attribute of the cookie\n+     */\n+    @Nullable SameSite getSameSite();\n+\n+    /**\n+     * Determines if this this {@link Cookie} can be sent along cross-site requests.\n+     * For more information, please look\n+     *  <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">here</a>\n+     * @param sameSite SameSite value\n+     * @return This cookie\n+     */\n+    @Nonnull Cookie sameSite(SameSite sameSite);", "originalCommit": "218cb756aed8ec0f966b3a00e0f52c033f383ee5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDgxOA==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980818", "bodyText": "Make it a default no-op method to avoid breaking API change", "author": "graemerocher", "createdAt": "2020-03-21T10:22:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDY2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAwNTY0NA==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r396005644", "bodyText": "Done", "author": "croudet", "createdAt": "2020-03-21T16:18:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDY2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDcyNA==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980724", "bodyText": "Can you not just use valueOf? https://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#valueOf(java.lang.Class,%20java.lang.String)", "author": "graemerocher", "createdAt": "2020-03-21T10:21:52Z", "path": "http/src/main/java/io/micronaut/http/cookie/SameSite.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2017-2020 original authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.micronaut.http.cookie;\n+\n+/**\n+ * Possible values for the SameSite attribute.\n+ * See <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">changes to RFC6265bis</a>\n+ */\n+public enum SameSite {\n+  Lax,\n+  Strict,\n+  None;\n+\n+  /**\n+   * Return the enum value corresponding to the passed in same-site-flag, using a case insensitive comparison.\n+   *\n+   * @param name value for the SameSite Attribute\n+   * @return enum value for the provided name or null\n+   */\n+  static SameSite of(String name) {\n+      if (name != null) {\n+          for (SameSite each : SameSite.class.getEnumConstants()) {\n+              if (each.name().equalsIgnoreCase(name)) {\n+                  return each;", "originalCommit": "218cb756aed8ec0f966b3a00e0f52c033f383ee5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAwNTY1Ng==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r396005656", "bodyText": "Removed", "author": "croudet", "createdAt": "2020-03-21T16:18:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDcyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDgzNg==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980836", "bodyText": "Make a default method that returns Optional.empty() to avoid breaking API change", "author": "graemerocher", "createdAt": "2020-03-21T10:23:18Z", "path": "http/src/main/java/io/micronaut/http/cookie/CookieConfiguration.java", "diffHunk": "@@ -63,4 +63,9 @@\n      * @return The max age to use for the cookie\n      */\n     Optional<TemporalAmount> getCookieMaxAge();\n+\n+    /**\n+     * @return return the SameSite to use for the cookie.\n+     */\n+    Optional<SameSite> getCookieSameSite();", "originalCommit": "218cb756aed8ec0f966b3a00e0f52c033f383ee5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAwNTY3Mg==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r396005672", "bodyText": "Done", "author": "croudet", "createdAt": "2020-03-21T16:18:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDgzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDg0Nw==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980847", "bodyText": "add @author and @since tags", "author": "graemerocher", "createdAt": "2020-03-21T10:23:34Z", "path": "http/src/main/java/io/micronaut/http/cookie/SameSite.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2017-2020 original authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.micronaut.http.cookie;\n+\n+/**\n+ * Possible values for the SameSite attribute.\n+ * See <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">changes to RFC6265bis</a>\n+ */", "originalCommit": "218cb756aed8ec0f966b3a00e0f52c033f383ee5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAwNTY4Ng==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r396005686", "bodyText": "Done", "author": "croudet", "createdAt": "2020-03-21T16:18:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDg0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDg3OQ==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r395980879", "bodyText": "javadoc for each constant please", "author": "graemerocher", "createdAt": "2020-03-21T10:23:47Z", "path": "http/src/main/java/io/micronaut/http/cookie/SameSite.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 2017-2020 original authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.micronaut.http.cookie;\n+\n+/**\n+ * Possible values for the SameSite attribute.\n+ * See <a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-05\">changes to RFC6265bis</a>\n+ */\n+public enum SameSite {\n+  Lax,\n+  Strict,\n+  None;", "originalCommit": "218cb756aed8ec0f966b3a00e0f52c033f383ee5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAwNTY5MQ==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/2956#discussion_r396005691", "bodyText": "Done", "author": "croudet", "createdAt": "2020-03-21T16:18:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk4MDg3OQ=="}], "type": "inlineReview"}, {"oid": "bf711c99149751b1308b6a46d6af65b325e86762", "url": "https://github.com/micronaut-projects/micronaut-core/commit/bf711c99149751b1308b6a46d6af65b325e86762", "message": "Upgrade netty and add Cookie SameSite attribute support", "committedDate": "2020-03-21T15:57:44Z", "type": "commit"}, {"oid": "bf711c99149751b1308b6a46d6af65b325e86762", "url": "https://github.com/micronaut-projects/micronaut-core/commit/bf711c99149751b1308b6a46d6af65b325e86762", "message": "Upgrade netty and add Cookie SameSite attribute support", "committedDate": "2020-03-21T15:57:44Z", "type": "forcePushed"}]}