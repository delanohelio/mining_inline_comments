{"pr_number": 3550, "pr_title": "[2.5.5] extracted duplicate to resolvePartition method in the enqueue method.", "pr_createdAt": "2020-10-07T09:11:44Z", "pr_url": "https://github.com/thingsboard/thingsboard/pull/3550", "timeline": [{"oid": "f83c3d065935a556e8046491f1a6f69775ecfc26", "url": "https://github.com/thingsboard/thingsboard/commit/f83c3d065935a556e8046491f1a6f69775ecfc26", "message": "fix duplicates", "committedDate": "2020-10-07T09:08:05Z", "type": "commit"}, {"oid": "99fdf20948fb857e930bd43b08920c03f6e9eeca", "url": "https://github.com/thingsboard/thingsboard/commit/99fdf20948fb857e930bd43b08920c03f6e9eeca", "message": "added null check for queueName", "committedDate": "2020-10-07T09:31:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTYwNTI4NQ==", "url": "https://github.com/thingsboard/thingsboard/pull/3550#discussion_r501605285", "bodyText": "I beleive this is wrong. Enqueue is to put to a root rule chain. EnqueueForTellNext - to put into the same topic and same place in the rule chain.", "author": "ashvayka", "createdAt": "2020-10-08T10:13:25Z", "path": "application/src/main/java/org/thingsboard/server/actors/ruleChain/DefaultTbContext.java", "diffHunk": "@@ -114,7 +116,7 @@ public void tellSelf(TbMsg msg, long delayMs) {\n \n     @Override\n     public void enqueue(TbMsg tbMsg, Runnable onSuccess, Consumer<Throwable> onFailure) {\n-        TopicPartitionInfo tpi = mainCtx.resolve(ServiceType.TB_RULE_ENGINE, getTenantId(), tbMsg.getOriginator());\n+        TopicPartitionInfo tpi = resolvePartition(tbMsg);", "originalCommit": "99fdf20948fb857e930bd43b08920c03f6e9eeca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTYwOTYxNw==", "url": "https://github.com/thingsboard/thingsboard/pull/3550#discussion_r501609617", "bodyText": "Done", "author": "ShvaykaD", "createdAt": "2020-10-08T10:20:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTYwNTI4NQ=="}], "type": "inlineReview"}, {"oid": "ab9189202c1a752e8d1a1d2c7d10bf1218389e7d", "url": "https://github.com/thingsboard/thingsboard/commit/ab9189202c1a752e8d1a1d2c7d10bf1218389e7d", "message": "revert the enqueue(root rule chain) method changes", "committedDate": "2020-10-08T10:19:49Z", "type": "commit"}]}