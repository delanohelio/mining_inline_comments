{"pr_number": 1047, "pr_title": "TSK-1197: readded test case for testing the ordering of the databases\u2026", "pr_createdAt": "2020-05-04T13:22:37Z", "pr_url": "https://github.com/Taskana/taskana/pull/1047", "timeline": [{"oid": "cb4450c87c75e6bdee293c502ac203f8fdcb3862", "url": "https://github.com/Taskana/taskana/commit/cb4450c87c75e6bdee293c502ac203f8fdcb3862", "message": "TSK-1197: readded test case for testing the ordering of the databases H2, Postgress and DB2; remove Db2 10.5 travis job\nTSK-1197: build Postgres image with german collation", "committedDate": "2020-05-04T13:16:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU0OTQ1NA==", "url": "https://github.com/Taskana/taskana/pull/1047#discussion_r419549454", "bodyText": "This looks like a big code smell due to the dependency to the database locale.\nTicket?", "author": "mustaphazorgati", "createdAt": "2020-05-04T16:06:49Z", "path": "lib/taskana-core/src/main/java/pro/taskana/task/internal/TaskServiceImpl.java", "diffHunk": "@@ -261,7 +261,7 @@ public Task createTask(Task taskToCreate)\n         // primary key violation: \"UC_EXTERNAL_ID_INDEX_2 ON TASKANA.TASK(EXTERNAL_ID) ...\n         String msg = e.getMessage() != null ? e.getMessage().toLowerCase() : null;\n         if (msg != null\n-            && (msg.contains(\"violation\") || msg.contains(\"violates\"))\n+            && (msg.contains(\"violation\") || msg.contains(\"violates\") || msg.contains(\"verletzt\"))", "originalCommit": "cb4450c87c75e6bdee293c502ac203f8fdcb3862", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg4NDA2Mw==", "url": "https://github.com/Taskana/taskana/pull/1047#discussion_r419884063", "bodyText": "Yes I also think a ticket would be great. Maybe there is a way to get this done in a better way. I always thought that all DBs have an explicit \"UniqueContraintViolation\" exception. It seems that is not the case and therefore this workaround is implemented.", "author": "sfrevel", "createdAt": "2020-05-05T06:15:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU0OTQ1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA1MzUzNw==", "url": "https://github.com/Taskana/taskana/pull/1047#discussion_r420053537", "bodyText": "did you create the ticket?", "author": "mustaphazorgati", "createdAt": "2020-05-05T11:57:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU0OTQ1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA4MDQ0Nw==", "url": "https://github.com/Taskana/taskana/pull/1047#discussion_r420080447", "bodyText": "Yes, now i did ;D\nhttps://taskana.atlassian.net/browse/TSK-1231", "author": "sfrevel", "createdAt": "2020-05-05T12:46:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU0OTQ1NA=="}], "type": "inlineReview"}, {"oid": "fb1182370436c9ee20af28dd162cd58c57172d8c", "url": "https://github.com/Taskana/taskana/commit/fb1182370436c9ee20af28dd162cd58c57172d8c", "message": "TSK-1197: use only postgres:10 tag; use only docker compose up; clean up docker compose installation for travis\n\nTSK-1197: moved docker-compose install to the right place; fixed variable definition\n\nTSK-1197: remove docker-compose installation, use preinstalled travis version\n\nTSK-1197: harmonize postgres db version parameter in scripts preparedb and test.sh\n\nTSK-1197: removed DB2_10_5 handling from scripts", "committedDate": "2020-05-05T13:04:16Z", "type": "commit"}, {"oid": "fb1182370436c9ee20af28dd162cd58c57172d8c", "url": "https://github.com/Taskana/taskana/commit/fb1182370436c9ee20af28dd162cd58c57172d8c", "message": "TSK-1197: use only postgres:10 tag; use only docker compose up; clean up docker compose installation for travis\n\nTSK-1197: moved docker-compose install to the right place; fixed variable definition\n\nTSK-1197: remove docker-compose installation, use preinstalled travis version\n\nTSK-1197: harmonize postgres db version parameter in scripts preparedb and test.sh\n\nTSK-1197: removed DB2_10_5 handling from scripts", "committedDate": "2020-05-05T13:04:16Z", "type": "forcePushed"}]}