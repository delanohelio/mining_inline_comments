{"pr_number": 1349, "pr_title": "TSK-1355: Adjust all single() methods to use mybatis selectOne", "pr_createdAt": "2020-11-23T09:14:47Z", "pr_url": "https://github.com/Taskana/taskana/pull/1349", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTYwODQ2Ng==", "url": "https://github.com/Taskana/taskana/pull/1349#discussion_r559608466", "bodyText": "I think, we should document this Exception in the JavaDoc of the API, shouldn't we?", "author": "holgerhagen", "createdAt": "2021-01-18T14:35:14Z", "path": "history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryClassificationHistoryAccTest.java", "diffHunk": "@@ -96,17 +98,31 @@ void should_ReturnEmptyList_When_ProvidingWrongContraints() {\n   @Test\n   void should_ReturnSingleHistoryEvent_When_UsingSingleMethod() {\n     ClassificationHistoryEvent single =\n-        historyService.createClassificationHistoryQuery().userIdIn(\"peter\").single();\n+        historyService\n+            .createClassificationHistoryQuery()\n+            .userIdIn(\"peter\")\n+            .classificationIdIn(\"CLI:000000000000000000000000000000000001\")\n+            .single();\n     assertThat(single.getEventType()).isEqualTo(ClassificationHistoryEventType.CREATED.getName());\n \n     single =\n         historyService\n             .createClassificationHistoryQuery()\n             .eventTypeIn(ClassificationHistoryEventType.CREATED.getName(), \"xy\")\n+            .classificationIdIn(\"CLI:000000000000000000000000000000000001\")\n             .single();\n     assertThat(single.getUserId()).isEqualTo(\"peter\");\n   }\n \n+  @Test\n+  void should_ThrowException_When_SingleMethodRetrievesMoreThanOneEventFromDatabase() {\n+\n+    ClassificationHistoryQuery query =\n+        getHistoryService().createClassificationHistoryQuery().userIdIn(\"peter\");\n+\n+    assertThatThrownBy(() -> query.single()).isInstanceOf(TooManyResultsException.class);", "originalCommit": "b4587e8d0329b7bf41bcca9073a90b61bfc6e69f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7579e414aae0902f2fbfb9ab03fa921257513014", "url": "https://github.com/Taskana/taskana/commit/7579e414aae0902f2fbfb9ab03fa921257513014", "message": "TSK-1355: Adjust all single() methods to use mybatis selectOne", "committedDate": "2021-01-20T07:28:44Z", "type": "commit"}, {"oid": "d81f542c011903db1c220b4ef023d5db09e11d25", "url": "https://github.com/Taskana/taskana/commit/d81f542c011903db1c220b4ef023d5db09e11d25", "message": "TSK-1355: Review Findings", "committedDate": "2021-01-20T07:28:44Z", "type": "commit"}]}