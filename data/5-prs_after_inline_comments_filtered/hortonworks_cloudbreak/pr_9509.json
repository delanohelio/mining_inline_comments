{"pr_number": 9509, "pr_title": "CB-9548 enable firewall rules in case google cloud which are comming \u2026", "pr_createdAt": "2020-11-24T16:54:45Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/9509", "timeline": [{"oid": "f0760baeebe38d169e5d60800726dc7c32398a11", "url": "https://github.com/hortonworks/cloudbreak/commit/f0760baeebe38d169e5d60800726dc7c32398a11", "message": "CB-9548 enable firewall rules in case google cloud which are comming from the shared/host project or the user create environment without any firewall rule. Tested scenarios are 1. the vpc information coming from the base project without firewall information. 2. the vpc is shared vpc and the firewall rule coming from the host project. 3. the vpc is shared vpc and the firewall rule coming from the base project.", "committedDate": "2020-11-24T17:47:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTgxMzE1Ng==", "url": "https://github.com/hortonworks/cloudbreak/pull/9509#discussion_r529813156", "bodyText": "nit : which -> with\n\"We can not read the host project with id\"", "author": "cegganesh84", "createdAt": "2020-11-24T19:05:52Z", "path": "cloud-gcp/src/main/java/com/sequenceiq/cloudbreak/cloud/gcp/GcpPlatformResources.java", "diffHunk": "@@ -262,6 +263,23 @@ public CloudSecurityGroups securityGroups(CloudCredential cloudCredential, Regio\n             result.computeIfAbsent(region.value(), k -> new HashSet<>()).add(cloudSecurityGroup);\n         }\n \n+        if (filters != null) {\n+            String sharedProjectId = filters.get(SHARED_PROJECT_ID);\n+            if (!Strings.isNullOrEmpty(sharedProjectId)) {\n+                try {\n+                    FirewallList sharedProjectFirewalls = compute.firewalls().list(sharedProjectId).execute();\n+                    for (Firewall firewall : sharedProjectFirewalls.getItems()) {\n+                        Map<String, Object> properties = new HashMap<>();\n+                        properties.put(\"network\", getNetworkName(firewall));\n+                        CloudSecurityGroup cloudSecurityGroup = new CloudSecurityGroup(firewall.getName(), firewall.getName(), properties);\n+                        result.computeIfAbsent(region.value(), k -> new HashSet<>()).add(cloudSecurityGroup);\n+                    }\n+                } catch (Exception ex) {\n+                    LOGGER.warn(String.format(\"We can not read the host project which id %s\", sharedProjectId));", "originalCommit": "f0760baeebe38d169e5d60800726dc7c32398a11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "67dc1d2b301858ca1318e33551d2b1d9f05f4f2a", "url": "https://github.com/hortonworks/cloudbreak/commit/67dc1d2b301858ca1318e33551d2b1d9f05f4f2a", "message": "CB-9548 enable firewall rules in case google cloud which are comming from the shared/host project or the user create environment without any firewall rule. Tested scenarios are 1. the vpc information coming from the base project without firewall information. 2. the vpc is shared vpc and the firewall rule coming from the host project. 3. the vpc is shared vpc and the firewall rule coming from the base project.", "committedDate": "2020-11-24T20:54:56Z", "type": "commit"}, {"oid": "67dc1d2b301858ca1318e33551d2b1d9f05f4f2a", "url": "https://github.com/hortonworks/cloudbreak/commit/67dc1d2b301858ca1318e33551d2b1d9f05f4f2a", "message": "CB-9548 enable firewall rules in case google cloud which are comming from the shared/host project or the user create environment without any firewall rule. Tested scenarios are 1. the vpc information coming from the base project without firewall information. 2. the vpc is shared vpc and the firewall rule coming from the host project. 3. the vpc is shared vpc and the firewall rule coming from the base project.", "committedDate": "2020-11-24T20:54:56Z", "type": "forcePushed"}]}