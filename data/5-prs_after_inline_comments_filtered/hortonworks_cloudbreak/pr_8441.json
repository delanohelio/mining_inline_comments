{"pr_number": 8441, "pr_title": "CB-7360 Speed up handling of encrypted EBS", "pr_createdAt": "2020-06-28T01:18:35Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8441", "timeline": [{"oid": "0303e48ca79d8f5a5c49249fe68a8cb98a6c244f", "url": "https://github.com/hortonworks/cloudbreak/commit/0303e48ca79d8f5a5c49249fe68a8cb98a6c244f", "message": "CB-7360 Speed up handling of encrypted EBS\n\nSquashed commits:\nCB-7360 Add unit tests; fix aws-cf-dbstack.ftl JSON error", "committedDate": "2020-06-28T00:54:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUzOTIxMA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8441#discussion_r447539210", "bodyText": "Minor, we could introduce a new method to replace group.getReferenceInstanceConfiguration().getTemplate() with getReferenceTemplate as it is used at many places.", "author": "keyki", "createdAt": "2020-06-30T09:19:49Z", "path": "cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/resource/AwsVolumeResourceBuilder.java", "diffHunk": "@@ -226,18 +229,39 @@ private String getAvailabilityZoneFromSubnet(AuthenticatedContext auth, CloudRes\n                 .build();\n     }\n \n-    private Function<VolumeSetAttributes.Volume, CreateVolumeRequest> createVolumeRequest(String snapshotId, TagSpecification tagSpecification,\n-            VolumeSetAttributes volumeSet) {\n-        return volume -> new CreateVolumeRequest()\n-                .withAvailabilityZone(volumeSet.getAvailabilityZone())\n-                .withSize(volume.getSize())\n-                .withSnapshotId(snapshotId)\n-                .withTagSpecifications(tagSpecification)\n-                .withVolumeType(volume.getType());\n+    private boolean isFastEbsEncryptionEnabled(Group group) {\n+        return new AwsInstanceView(group.getReferenceInstanceConfiguration().getTemplate()).isFastEbsEncryptionEnabled();", "originalCommit": "0303e48ca79d8f5a5c49249fe68a8cb98a6c244f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU3NTMzMQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8441#discussion_r447575331", "bodyText": "Good idea, will do that in a follow-up PR. \ud83d\udc4d", "author": "lajosrodek", "createdAt": "2020-06-30T10:19:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUzOTIxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI1OTgzNw==", "url": "https://github.com/hortonworks/cloudbreak/pull/8441#discussion_r449259837", "bodyText": "See #8482.", "author": "lajosrodek", "createdAt": "2020-07-02T20:50:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUzOTIxMA=="}], "type": "inlineReview"}]}