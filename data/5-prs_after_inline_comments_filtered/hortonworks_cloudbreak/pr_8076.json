{"pr_number": 8076, "pr_title": "CB-7083 - Availability zone fetching optimisations", "pr_createdAt": "2020-05-15T14:32:30Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8076", "timeline": [{"oid": "5718407b7366b56964575646b147c10eefa2faae", "url": "https://github.com/hortonworks/cloudbreak/commit/5718407b7366b56964575646b147c10eefa2faae", "message": "CB-7083 - Availability zone fetching optimisations", "committedDate": "2020-05-15T14:46:55Z", "type": "forcePushed"}, {"oid": "dc08ed7b13143367d39f35b2ac8e9d5d2c1dc024", "url": "https://github.com/hortonworks/cloudbreak/commit/dc08ed7b13143367d39f35b2ac8e9d5d2c1dc024", "message": "CB-7083 - Availability zone fetching optimisations", "committedDate": "2020-05-15T16:49:17Z", "type": "forcePushed"}, {"oid": "6ef15fd8faf9511fb64979ec678dcffa9fd44e0d", "url": "https://github.com/hortonworks/cloudbreak/commit/6ef15fd8faf9511fb64979ec678dcffa9fd44e0d", "message": "CB-7083 - Availability zone fetching optimisations", "committedDate": "2020-05-15T17:09:24Z", "type": "forcePushed"}, {"oid": "3269c15454cceb256e7fa645875a4ab80b898a46", "url": "https://github.com/hortonworks/cloudbreak/commit/3269c15454cceb256e7fa645875a4ab80b898a46", "message": "CB-7083 - Availability zone fetching optimisations", "committedDate": "2020-05-15T18:11:03Z", "type": "forcePushed"}, {"oid": "227e5c71f63256312eecea7a813c876c8ee39b32", "url": "https://github.com/hortonworks/cloudbreak/commit/227e5c71f63256312eecea7a813c876c8ee39b32", "message": "CB-7083 - Availability zone fetching optimisations", "committedDate": "2020-05-18T08:56:11Z", "type": "forcePushed"}, {"oid": "8768c5b0d340d6e051698ba143f726b53e92df3e", "url": "https://github.com/hortonworks/cloudbreak/commit/8768c5b0d340d6e051698ba143f726b53e92df3e", "message": "CB-7083 - Availability zone fetching optimisations", "committedDate": "2020-05-18T10:50:28Z", "type": "forcePushed"}, {"oid": "6a0d94b495ecd3a660dd4324278fda9a3bb311b8", "url": "https://github.com/hortonworks/cloudbreak/commit/6a0d94b495ecd3a660dd4324278fda9a3bb311b8", "message": "CB-7083 - Availability zone fetching optimisations", "committedDate": "2020-05-18T11:51:06Z", "type": "forcePushed"}, {"oid": "84bce5cec739b6cf483481bc13d9c2494add648a", "url": "https://github.com/hortonworks/cloudbreak/commit/84bce5cec739b6cf483481bc13d9c2494add648a", "message": "CB-7083 - Availability zone fetching optimisations", "committedDate": "2020-05-18T15:59:40Z", "type": "commit"}, {"oid": "84bce5cec739b6cf483481bc13d9c2494add648a", "url": "https://github.com/hortonworks/cloudbreak/commit/84bce5cec739b6cf483481bc13d9c2494add648a", "message": "CB-7083 - Availability zone fetching optimisations", "committedDate": "2020-05-18T15:59:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA4Nzk0Ng==", "url": "https://github.com/hortonworks/cloudbreak/pull/8076#discussion_r427087946", "bodyText": "This seems to be the single place where false is passed as value. Since this new parameter never comes from user input or something dynamic, I would argue to introduce a a different method for this.", "author": "daszabo", "createdAt": "2020-05-19T07:31:48Z", "path": "environment/src/main/java/com/sequenceiq/environment/environment/service/EnvironmentService.java", "diffHunk": "@@ -157,7 +157,7 @@ public CloudRegions getRegionsByEnvironment(Environment environment) {\n         PlatformResourceRequest platformResourceRequest = new PlatformResourceRequest();\n         platformResourceRequest.setCredential(environment.getCredential());\n         platformResourceRequest.setCloudPlatform(environment.getCloudPlatform());\n-        return platformParameterService.getRegionsByCredential(platformResourceRequest);\n+        return platformParameterService.getRegionsByCredential(platformResourceRequest, false);", "originalCommit": "84bce5cec739b6cf483481bc13d9c2494add648a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA5NjY2NQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8076#discussion_r427096665", "bodyText": "I can create a getRegionsWithoutAZs method in the CloudParameterService. But in the SPI I would keep a the current implementation. Is that OK for you?", "author": "attilapalfi92", "createdAt": "2020-05-19T07:47:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA4Nzk0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE3ODk2OQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8076#discussion_r427178969", "bodyText": "Well, the spi part would be the whole point. I am not adamant in making the change, it works as it is now, its just that it is not too pretty.", "author": "daszabo", "createdAt": "2020-05-19T09:57:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA4Nzk0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE4NDAzMQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8076#discussion_r427184031", "bodyText": "That would not be prettier. The boolean value travels in the GetPlatformRegionsRequestV2 object and in the GetRegionsV2Handler there would be an if condition based on the boolean value to call the regions or regionsWithoutAZs method. It wouldn't be nice at all in my opinion. This was what I first wanted, but when I was there, I saw that passing the boolean from the GetPlatformRegionsRequestV2 is a nicer solution.", "author": "attilapalfi92", "createdAt": "2020-05-19T10:06:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA4Nzk0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIwMTc5Mw==", "url": "https://github.com/hortonworks/cloudbreak/pull/8076#discussion_r427201793", "bodyText": "Or you meant completely new spi regions handler too, I think that would be an overkill.", "author": "attilapalfi92", "createdAt": "2020-05-19T10:37:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA4Nzk0Ng=="}], "type": "inlineReview"}]}