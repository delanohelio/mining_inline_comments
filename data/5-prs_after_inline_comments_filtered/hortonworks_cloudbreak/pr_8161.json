{"pr_number": 8161, "pr_title": "CB-7163 Add spot max price capability", "pr_createdAt": "2020-05-27T14:51:19Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8161", "timeline": [{"oid": "5b848b544956d29c578a012212844e6a1a2594c5", "url": "https://github.com/hortonworks/cloudbreak/commit/5b848b544956d29c578a012212844e6a1a2594c5", "message": "CB-7163 Add spot max price capability", "committedDate": "2020-05-29T08:43:15Z", "type": "forcePushed"}, {"oid": "cb970c4b33be73c94412af9a80c7dabee77e0697", "url": "https://github.com/hortonworks/cloudbreak/commit/cb970c4b33be73c94412af9a80c7dabee77e0697", "message": "CB-7163 Add spot max price capability", "committedDate": "2020-05-29T14:55:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxOTA2NA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8161#discussion_r436619064", "bodyText": "what if spotPercentage is not present? the orElse(0) logic is changed here", "author": "bergerdenes", "createdAt": "2020-06-08T11:09:40Z", "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/converter/EnvironmentApiConverter.java", "diffHunk": "@@ -178,16 +177,18 @@ private ParametersDto azureParamsToParametersDto(AzureEnvironmentParameters azur\n     }\n \n     private AwsParametersDto awsParamsToAwsParameters(AwsEnvironmentParameters aws, AwsFreeIpaParameters awsFreeIpa) {\n-        return AwsParametersDto.builder()\n+        AwsParametersDto.Builder builder = AwsParametersDto.builder()\n                 .withDynamoDbTableName(Optional.ofNullable(aws)\n                         .map(AwsEnvironmentParameters::getS3guard)\n                         .map(S3GuardRequestParameters::getDynamoDbTableName)\n-                        .orElse(null))\n-                .withFreeIpaSpotPercentage(Optional.ofNullable(awsFreeIpa)\n-                        .map(AwsFreeIpaParameters::getSpot)\n-                        .map(AwsFreeIpaSpotParameters::getPercentage)\n-                        .orElse(0))\n-                .build();\n+                        .orElse(null));\n+        Optional.ofNullable(awsFreeIpa)\n+                .map(AwsFreeIpaParameters::getSpot)\n+                .ifPresent(awsFreeIpaSpotParameters -> {\n+                    builder.withFreeIpaSpotPercentage(awsFreeIpaSpotParameters.getPercentage())", "originalCommit": "cb970c4b33be73c94412af9a80c7dabee77e0697", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE1MzMzNQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8161#discussion_r452153335", "bodyText": "null is treated as a default 0 value, so it was not necessary in the first place", "author": "Bajzathd", "createdAt": "2020-07-09T11:36:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxOTA2NA=="}], "type": "inlineReview"}, {"oid": "bb397baf235a94d3c1c36d627d65aa177c02c8cf", "url": "https://github.com/hortonworks/cloudbreak/commit/bb397baf235a94d3c1c36d627d65aa177c02c8cf", "message": "CB-7163 Add spot max price capability", "committedDate": "2020-07-08T14:28:09Z", "type": "forcePushed"}, {"oid": "1294215a7196826d2a9a45e7d2e6bd05b9cb62b6", "url": "https://github.com/hortonworks/cloudbreak/commit/1294215a7196826d2a9a45e7d2e6bd05b9cb62b6", "message": "CB-7163 Add spot max price capability", "committedDate": "2020-07-08T15:22:38Z", "type": "commit"}, {"oid": "1294215a7196826d2a9a45e7d2e6bd05b9cb62b6", "url": "https://github.com/hortonworks/cloudbreak/commit/1294215a7196826d2a9a45e7d2e6bd05b9cb62b6", "message": "CB-7163 Add spot max price capability", "committedDate": "2020-07-08T15:22:38Z", "type": "forcePushed"}]}