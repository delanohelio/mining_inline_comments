{"pr_number": 7728, "pr_title": "CB-874 Make FreeIPA and RDS provisioning parallel", "pr_createdAt": "2020-04-03T09:01:55Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7728", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDExNzk2Ng==", "url": "https://github.com/hortonworks/cloudbreak/pull/7728#discussion_r404117966", "bodyText": "passing this response along is not necessary. If I'm not mistaken it's used in ProvisionerService#startStackProvisioning, but that info is already in SdxCluster, so I would drop it entirely if possible", "author": "lacikaaa", "createdAt": "2020-04-06T14:06:08Z", "path": "datalake/src/main/java/com/sequenceiq/datalake/flow/create/event/EnvWaitRequest.java", "diffHunk": "@@ -2,19 +2,27 @@\n \n import com.sequenceiq.datalake.flow.SdxContext;\n import com.sequenceiq.datalake.flow.SdxEvent;\n+import com.sequenceiq.redbeams.api.endpoint.v4.databaseserver.responses.DatabaseServerStatusV4Response;\n \n public class EnvWaitRequest extends SdxEvent {\n \n-    public EnvWaitRequest(Long sdxId, String userId) {\n+    private DatabaseServerStatusV4Response databaseServerResponse;", "originalCommit": "4f728f1773226271ad8e3165a386272633f4cb38", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDExOTc2Mg==", "url": "https://github.com/hortonworks/cloudbreak/pull/7728#discussion_r404119762", "bodyText": "I think it's possible that we have the old version running, and it's in SDX_CREATION_WAIT_ENV_STATE. We shut it down and fire up this new version. When it's finished with the SDX_CREATION_WAIT_ENV_STATE the new version will move to SDX_CREATION_START_STATE and will skip SDX_CREATION_WAIT_RDS_STATE. Could you check?", "author": "lacikaaa", "createdAt": "2020-04-06T14:08:38Z", "path": "datalake/src/main/java/com/sequenceiq/datalake/flow/create/SdxCreateFlowConfig.java", "diffHunk": "@@ -24,24 +24,35 @@\n \n     private static final List<Transition<SdxCreateState, SdxCreateEvent>> TRANSITIONS = new Builder<SdxCreateState, SdxCreateEvent>()\n             .defaultFailureEvent(SDX_CREATE_FAILED_EVENT)\n+\n             .from(INIT_STATE)\n-            .to(SDX_CREATION_WAIT_ENV_STATE)\n+            .to(SDX_CREATION_WAIT_RDS_STATE)\n             .event(SdxCreateEvent.ENV_WAIT_EVENT).defaultFailureEvent()\n-            .from(SDX_CREATION_WAIT_ENV_STATE)\n+\n+            .from(INIT_STATE)\n             .to(SDX_CREATION_WAIT_RDS_STATE)\n-            .event(SdxCreateEvent.ENV_WAIT_SUCCESS_EVENT).defaultFailureEvent()\n+            .event(SdxCreateEvent.RDS_WAIT_EVENT).defaultFailureEvent()\n+\n             .from(SDX_CREATION_WAIT_RDS_STATE)\n-            .to(SDX_CREATION_START_STATE)\n+            .to(SDX_CREATION_WAIT_ENV_STATE)\n             .event(SdxCreateEvent.RDS_WAIT_SUCCESS_EVENT).defaultFailureEvent()\n+\n+            .from(SDX_CREATION_WAIT_ENV_STATE)\n+            .to(SDX_CREATION_START_STATE)\n+            .event(SdxCreateEvent.ENV_WAIT_SUCCESS_EVENT).defaultFailureEvent()", "originalCommit": "4f728f1773226271ad8e3165a386272633f4cb38", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a5e9e19262e8e3af60c299d9ceedda37916896d2", "url": "https://github.com/hortonworks/cloudbreak/commit/a5e9e19262e8e3af60c299d9ceedda37916896d2", "message": "CB-874 Make FreeIPA and RDS provisioning parallel", "committedDate": "2020-04-16T14:34:11Z", "type": "forcePushed"}, {"oid": "d249a4f29bbc484d5dcdb02fb6959cb49ec97a15", "url": "https://github.com/hortonworks/cloudbreak/commit/d249a4f29bbc484d5dcdb02fb6959cb49ec97a15", "message": "CB-874 Make FreeIPA and RDS provisioning parallel", "committedDate": "2020-04-16T15:09:13Z", "type": "forcePushed"}, {"oid": "afb62ad9bc48138c16172086ff1da368700e3bba", "url": "https://github.com/hortonworks/cloudbreak/commit/afb62ad9bc48138c16172086ff1da368700e3bba", "message": "CB-874 Make FreeIPA and RDS provisioning parallel", "committedDate": "2020-04-16T15:34:26Z", "type": "forcePushed"}, {"oid": "fff27436bd124400d9b75f102830f58ff6138e53", "url": "https://github.com/hortonworks/cloudbreak/commit/fff27436bd124400d9b75f102830f58ff6138e53", "message": "CB-874 Make FreeIPA and RDS provisioning parallel", "committedDate": "2020-04-17T13:20:28Z", "type": "forcePushed"}, {"oid": "2a1a78fc0f70396dd5acbab55a21ac4c0f026729", "url": "https://github.com/hortonworks/cloudbreak/commit/2a1a78fc0f70396dd5acbab55a21ac4c0f026729", "message": "CB-874 Make FreeIPA and RDS provisioning parallel", "committedDate": "2020-04-17T13:51:18Z", "type": "commit"}, {"oid": "2a1a78fc0f70396dd5acbab55a21ac4c0f026729", "url": "https://github.com/hortonworks/cloudbreak/commit/2a1a78fc0f70396dd5acbab55a21ac4c0f026729", "message": "CB-874 Make FreeIPA and RDS provisioning parallel", "committedDate": "2020-04-17T13:51:18Z", "type": "forcePushed"}]}