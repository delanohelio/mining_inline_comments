{"pr_number": 7314, "pr_title": "CB-5363 Fix MDC context in image selection", "pr_createdAt": "2020-02-18T10:51:55Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7314", "timeline": [{"oid": "34391fa320029902c3b35a3ef000b28a5581e8a3", "url": "https://github.com/hortonworks/cloudbreak/commit/34391fa320029902c3b35a3ef000b28a5581e8a3", "message": "CB-5363 Fix MDC context in image selection", "committedDate": "2020-02-18T10:50:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwMDE2Mg==", "url": "https://github.com/hortonworks/cloudbreak/pull/7314#discussion_r380600162", "bodyText": "please check if this cleanup is needed", "author": "horadla23", "createdAt": "2020-02-18T10:57:10Z", "path": "core/src/main/java/com/sequenceiq/cloudbreak/controller/StackCreatorService.java", "diffHunk": "@@ -423,6 +422,8 @@ private Blueprint determineBlueprint(StackV4Request stackRequest, Workspace work\n                     baseImageEnabled,\n                     user,\n                     image -> true);\n+            MDCBuilder.cleanupMdc();", "originalCommit": "34391fa320029902c3b35a3ef000b28a5581e8a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYzNDU4Nw==", "url": "https://github.com/hortonworks/cloudbreak/pull/7314#discussion_r380634587", "bodyText": "Yes we need this because we use a thread pool and other totally unrelated tasks will run on the same thread in the future.", "author": "foldik", "createdAt": "2020-02-18T12:13:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwMDE2Mg=="}], "type": "inlineReview"}]}