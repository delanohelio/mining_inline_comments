{"pr_number": 8340, "pr_title": "CB-7365 Extract magic string literals in AwsInstanceView", "pr_createdAt": "2020-06-19T10:32:37Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8340", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMyNDE5OQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8340#discussion_r443324199", "bodyText": "As it is used in case of GCP we could move this constant one layer upper to the provider generic InstanceTemplate class.", "author": "biharitomi", "createdAt": "2020-06-22T05:29:13Z", "path": "cloud-api/src/main/java/com/sequenceiq/cloudbreak/cloud/model/instance/AwsInstanceTemplate.java", "diffHunk": "@@ -0,0 +1,90 @@\n+package com.sequenceiq.cloudbreak.cloud.model.instance;\n+\n+import java.util.Collection;\n+import java.util.Map;\n+\n+import com.sequenceiq.cloudbreak.cloud.model.InstanceStatus;\n+import com.sequenceiq.cloudbreak.cloud.model.InstanceTemplate;\n+import com.sequenceiq.cloudbreak.cloud.model.Volume;\n+import com.sequenceiq.common.api.type.EncryptionType;\n+\n+public class AwsInstanceTemplate extends InstanceTemplate {\n+\n+    /**\n+     * Key of the optional dynamic parameter denoting whether EBS encryption is enabled or not. This applies to both root & attached (data) volumes.\n+     *\n+     * <p>\n+     *     Permitted values:\n+     *     <ul>\n+     *         <li>{@code Boolean.TRUE} instance, {@code \"true\"} (ignoring case): Encryption is enabled.</li>\n+     *         <li>{@code Boolean.FALSE} instance, {@code \"false\"} (or any other {@code String} not equal to {@code \"true\"} ignoring case), {@code null}:\n+     *         Encryption is disabled.</li>\n+     *     </ul>\n+     * </p>\n+     *\n+     * @see #putParameter(String, Object)\n+     * @see Boolean#parseBoolean(String)\n+     */\n+    public static final String EBS_ENCRYPTION_ENABLED = \"encrypted\";\n+\n+    /**\n+     * Key of the optional dynamic parameter denoting the type of AWS KMS encryption key to use for EBS encryption. Relevant only when encryption has been\n+     * enabled via parameter {@link #EBS_ENCRYPTION_ENABLED}.\n+     *\n+     * <p>\n+     *     Permitted values are the names of enum constants in {@link EncryptionType}:\n+     *     <ul>\n+     *         <li>{@code \"NONE\"}, {@code null}: No KMS key. Since EBS encryption always needs some KMS key, this setting essentially disables encryption.</li>\n+     *         <li>{@code \"DEFAULT\"}: Use the <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSEncryption.html#EBSEncryption_key_mgmt\">default\n+     *         key for EBS encryption</a> in the target Region. This can actually point to the AWS-managed KMS key with alias {@code alias/aws/ebs}, or\n+     *         some customer-managed symmetric KMS key.</li>\n+     *         <li>{@code \"CUSTOM\"}: Use the customer-managed symmetric KMS key specified in {@link #EBS_ENCRYPTION_KMS_KEY_ARN}.</li>\n+     *     </ul>\n+     * </p>\n+     *\n+     * @see #EBS_ENCRYPTION_ENABLED\n+     * @see #EBS_ENCRYPTION_KMS_KEY_ARN\n+     * @see #putParameter(String, Object)\n+     * @see EncryptionType\n+     */\n+    public static final String EBS_ENCRYPTION_KMS_KEY_TYPE = \"type\";", "originalCommit": "27e40e8db17b425e50b26dc5a4422b135084bc9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU5OTQ4MQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8340#discussion_r443599481", "bodyText": "Done. Also moved the similarly common \"key\" constant.", "author": "lajosrodek", "createdAt": "2020-06-22T14:28:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMyNDE5OQ=="}], "type": "inlineReview"}, {"oid": "839362c278eee5e3e8daa4f484a8f9f5b29922b2", "url": "https://github.com/hortonworks/cloudbreak/commit/839362c278eee5e3e8daa4f484a8f9f5b29922b2", "message": "CB-7365 Extract magic string literals in AwsInstanceView\n\nAlso replace raw strings with EncryptionType enum constant names.\n\nSquashed commits:\n\nCB-7365 Move EBS_ENCRYPTION_KMS_KEY_TYPE and EBS_ENCRYPTION_KMS_KEY_ARN\n        to superclass InstanceTemplate, renaming them to\n        VOLUME_ENCRYPTION_KEY_TYPE and VOLUME_ENCRYPTION_KEY_ID,\n        respectively. Replace occurrences of these magic strings in GCP\n        classes & tests as well.", "committedDate": "2020-06-22T14:19:49Z", "type": "forcePushed"}, {"oid": "51786faa3d45581e23e69e515ed3d4d61173fd0c", "url": "https://github.com/hortonworks/cloudbreak/commit/51786faa3d45581e23e69e515ed3d4d61173fd0c", "message": "CB-7365 Extract magic string literals in AwsInstanceView\n\nAlso replace raw strings with EncryptionType enum constant names.\n\nSquashed commits:\n\nCB-7365 Move EBS_ENCRYPTION_KMS_KEY_TYPE and EBS_ENCRYPTION_KMS_KEY_ARN\n        to superclass InstanceTemplate, renaming them to\n        VOLUME_ENCRYPTION_KEY_TYPE and VOLUME_ENCRYPTION_KEY_ID,\n        respectively. Replace occurrences of these magic strings in GCP\n        classes & tests as well.", "committedDate": "2020-06-22T17:41:49Z", "type": "commit"}, {"oid": "51786faa3d45581e23e69e515ed3d4d61173fd0c", "url": "https://github.com/hortonworks/cloudbreak/commit/51786faa3d45581e23e69e515ed3d4d61173fd0c", "message": "CB-7365 Extract magic string literals in AwsInstanceView\n\nAlso replace raw strings with EncryptionType enum constant names.\n\nSquashed commits:\n\nCB-7365 Move EBS_ENCRYPTION_KMS_KEY_TYPE and EBS_ENCRYPTION_KMS_KEY_ARN\n        to superclass InstanceTemplate, renaming them to\n        VOLUME_ENCRYPTION_KEY_TYPE and VOLUME_ENCRYPTION_KEY_ID,\n        respectively. Replace occurrences of these magic strings in GCP\n        classes & tests as well.", "committedDate": "2020-06-22T17:41:49Z", "type": "forcePushed"}]}