{"pr_number": 3268, "pr_title": "chore: update showcase version for sequence tests", "pr_createdAt": "2020-08-24T20:19:49Z", "pr_url": "https://github.com/googleapis/gapic-generator/pull/3268", "timeline": [{"oid": "4cde440332a0c2a01bc3e2edf4d8b3ee584b3414", "url": "https://github.com/googleapis/gapic-generator/commit/4cde440332a0c2a01bc3e2edf4d8b3ee584b3414", "message": "chore: update showcase version for sequence tests", "committedDate": "2020-08-24T21:24:39Z", "type": "commit"}, {"oid": "4cde440332a0c2a01bc3e2edf4d8b3ee584b3414", "url": "https://github.com/googleapis/gapic-generator/commit/4cde440332a0c2a01bc3e2edf4d8b3ee584b3414", "message": "chore: update showcase version for sequence tests", "committedDate": "2020-08-24T21:24:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzMDIyMg==", "url": "https://github.com/googleapis/gapic-generator/pull/3268#discussion_r475930222", "bodyText": "Why not just int i = 1 in the for loop declaration?", "author": "vam-google", "createdAt": "2020-08-24T22:30:32Z", "path": "showcase/java/src/test/java/com/google/api/showcase/ShowcaseTest.java", "diffHunk": "@@ -258,4 +277,66 @@ public void block() {\n                 .build());\n     assertThat(result.getContent()).isEqualTo(\"Hello, World!\");\n   }\n+\n+  @Test\n+  public void attemptSequence() {\n+    Sequence toCreate =\n+        Sequence.newBuilder()\n+            .addResponses(\n+                Sequence.Response.newBuilder()\n+                    .setStatus(Status.newBuilder().setCode(Code.UNAVAILABLE_VALUE)))\n+            .addResponses(\n+                Sequence.Response.newBuilder()\n+                    .setStatus(Status.newBuilder().setCode(Code.UNAVAILABLE_VALUE)))\n+            .addResponses(\n+                Sequence.Response.newBuilder()\n+                    .setStatus(Status.newBuilder().setCode(Code.OK_VALUE)))\n+            .build();\n+    Sequence sequence = seqClient.createSequence(toCreate);\n+    assertThat(sequence.getName()).isNotNull();\n+\n+    seqClient.attemptSequence(sequence.getName());\n+\n+    SequenceReport report = seqClient.getSequenceReport(sequence.getName() + \"/sequenceReport\");\n+    assertThat(report.getAttemptsList()).isNotNull();\n+    assertThat(report.getAttemptsList().size()).isEqualTo(3);\n+  }\n+\n+  @Test\n+  public void attemptSequenceTimeoutBackoff() {\n+    Sequence toCreate =\n+        Sequence.newBuilder()\n+            .addResponses(\n+                Sequence.Response.newBuilder()\n+                    .setDelay(Duration.newBuilder().setSeconds(2L))\n+                    .setStatus(Status.newBuilder().setCode(Code.UNAVAILABLE_VALUE)))\n+            .addResponses(\n+                Sequence.Response.newBuilder()\n+                    .setDelay(Duration.newBuilder().setSeconds(2L))\n+                    .setStatus(Status.newBuilder().setCode(Code.UNAVAILABLE_VALUE)))\n+            .addResponses(\n+                Sequence.Response.newBuilder()\n+                    .setStatus(Status.newBuilder().setCode(Code.OK_VALUE)))\n+            .build();\n+    Sequence sequence = seqClient.createSequence(toCreate);\n+    assertThat(sequence.getName()).isNotNull();\n+\n+    seqClient.attemptSequence(\n+        AttemptSequenceRequest.newBuilder().setName(sequence.getName()).build());\n+\n+    SequenceReport report = seqClient.getSequenceReport(sequence.getName() + \"/sequenceReport\");\n+    assertThat(report.getAttemptsList()).isNotNull();\n+    assertThat(report.getAttemptsList().size()).isEqualTo(3);\n+    for (int i = 0; i < report.getAttemptsList().size(); i++) {\n+      if (i == 0) {", "originalCommit": "4cde440332a0c2a01bc3e2edf4d8b3ee584b3414", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzMjg1MA==", "url": "https://github.com/googleapis/gapic-generator/pull/3268#discussion_r475932850", "bodyText": "Good call, changed.", "author": "noahdietz", "createdAt": "2020-08-24T22:38:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzMDIyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzMDkyNA==", "url": "https://github.com/googleapis/gapic-generator/pull/3268#discussion_r475930924", "bodyText": "The other test is TimeoutBackoff, can you be more specific about what this test tests?", "author": "vam-google", "createdAt": "2020-08-24T22:32:32Z", "path": "showcase/java/src/test/java/com/google/api/showcase/ShowcaseTest.java", "diffHunk": "@@ -258,4 +277,66 @@ public void block() {\n                 .build());\n     assertThat(result.getContent()).isEqualTo(\"Hello, World!\");\n   }\n+\n+  @Test\n+  public void attemptSequence() {", "originalCommit": "4cde440332a0c2a01bc3e2edf4d8b3ee584b3414", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzMzE1NQ==", "url": "https://github.com/googleapis/gapic-generator/pull/3268#discussion_r475933155", "bodyText": "I opted to remove this test because it wasn't doing anything more than the TimeoutBackoff one. It was the first one I added as I was developing it and I removed some others that were irrelevant to this PR, but neglected to remove this one.", "author": "noahdietz", "createdAt": "2020-08-24T22:39:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzMDkyNA=="}], "type": "inlineReview"}, {"oid": "989d842a980984dbff14e8b43a71b670bd358956", "url": "https://github.com/googleapis/gapic-generator/commit/989d842a980984dbff14e8b43a71b670bd358956", "message": "incorporate feedback", "committedDate": "2020-08-24T22:37:45Z", "type": "commit"}, {"oid": "cba9f3018faac9110280d694be49ace9ff09d95c", "url": "https://github.com/googleapis/gapic-generator/commit/cba9f3018faac9110280d694be49ace9ff09d95c", "message": "regen ruby showcase without sequence service", "committedDate": "2020-08-25T00:19:31Z", "type": "commit"}, {"oid": "764eb14af18fec6991f4dc87352875b818b3d008", "url": "https://github.com/googleapis/gapic-generator/commit/764eb14af18fec6991f4dc87352875b818b3d008", "message": "fix languages flag", "committedDate": "2020-08-25T00:25:40Z", "type": "commit"}, {"oid": "28468c8072fd26fe4807e7e79c4fded64bb3819e", "url": "https://github.com/googleapis/gapic-generator/commit/28468c8072fd26fe4807e7e79c4fded64bb3819e", "message": "remove Sequence service from config for ruby", "committedDate": "2020-08-25T00:55:21Z", "type": "commit"}, {"oid": "6412c4ec202b6034f2fb989609d63b863509bd35", "url": "https://github.com/googleapis/gapic-generator/commit/6412c4ec202b6034f2fb989609d63b863509bd35", "message": "fix sed maybe", "committedDate": "2020-08-25T01:07:16Z", "type": "commit"}, {"oid": "d26709114d2f13ba02fd27a2609cd77ccbfca181", "url": "https://github.com/googleapis/gapic-generator/commit/d26709114d2f13ba02fd27a2609cd77ccbfca181", "message": "fix gen script", "committedDate": "2020-08-25T01:39:29Z", "type": "commit"}, {"oid": "8c653b508cf4f3ba180a748fd2e881ff866afd95", "url": "https://github.com/googleapis/gapic-generator/commit/8c653b508cf4f3ba180a748fd2e881ff866afd95", "message": "fix gen script maybe", "committedDate": "2020-08-25T01:45:14Z", "type": "commit"}]}