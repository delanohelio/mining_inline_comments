{"pr_number": 956, "pr_title": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406", "pr_createdAt": "2020-07-09T05:50:05Z", "pr_url": "https://github.com/halo-dev/halo/pull/956", "timeline": [{"oid": "7117a7f29e7d558bc47be27145e8a3067633f2a7", "url": "https://github.com/halo-dev/halo/commit/7117a7f29e7d558bc47be27145e8a3067633f2a7", "message": "\u4fee\u6539\u7f13\u5b58\u65f6\u957f", "committedDate": "2020-07-09T02:29:24Z", "type": "commit"}, {"oid": "869cd9a007fa8fcfff5e391f02a791fb9fcd9d90", "url": "https://github.com/halo-dev/halo/commit/869cd9a007fa8fcfff5e391f02a791fb9fcd9d90", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406", "committedDate": "2020-07-09T05:25:03Z", "type": "commit"}, {"oid": "9ea362fa20c43c4fef2d8711fb58c8b141d4c6e1", "url": "https://github.com/halo-dev/halo/commit/9ea362fa20c43c4fef2d8711fb58c8b141d4c6e1", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406", "committedDate": "2020-07-09T05:26:24Z", "type": "commit"}, {"oid": "e162a566187eca5c843845b46aae16e155aacac1", "url": "https://github.com/halo-dev/halo/commit/e162a566187eca5c843845b46aae16e155aacac1", "message": "Merge pull request #1 from halo-dev/master\n\n\u4fee\u6539\u7f13\u5b58\u65f6\u957f (#954)", "committedDate": "2020-07-09T05:29:08Z", "type": "commit"}, {"oid": "1b57225001343e4e1062d9dbdadb7440f14ceab1", "url": "https://github.com/halo-dev/halo/commit/1b57225001343e4e1062d9dbdadb7440f14ceab1", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406", "committedDate": "2020-07-09T05:48:31Z", "type": "commit"}, {"oid": "cf39244dc1136156c6effbdce8135332669e4baf", "url": "https://github.com/halo-dev/halo/commit/cf39244dc1136156c6effbdce8135332669e4baf", "message": "Merge remote-tracking branch 'origin/master'", "committedDate": "2020-07-09T05:49:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk4NjE1Ng==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r451986156", "bodyText": "\u662f\u5426\u9700\u8981\u8003\u8651\u4e00\u4e0b\u9700\u8981\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u4ee3\u7406\u5462\uff1f", "author": "JohnNiang", "createdAt": "2020-07-09T06:14:32Z", "path": "src/main/java/run/halo/app/utils/HttpClientUtils.java", "diffHunk": "@@ -44,7 +47,13 @@ public static CloseableHttpClient createHttpsClient(int timeout) throws KeyStore\n             .loadTrustMaterial(null, (certificate, authType) -> true)\n             .build();\n \n-        return HttpClients.custom()\n+        final HttpClientBuilder httpClientBuilder = HttpClients.custom();\n+        final String httpProxy = System.getenv(\"http_proxy\");", "originalCommit": "cf39244dc1136156c6effbdce8135332669e4baf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk4NzE5Ng==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r451987196", "bodyText": "Follow: https://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientProxyAuthentication.java", "author": "JohnNiang", "createdAt": "2020-07-09T06:17:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk4NjE1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAxNTY3Ng==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452015676", "bodyText": "\u52a0\u4e86\u54c8", "author": "sheiy", "createdAt": "2020-07-09T07:24:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk4NjE1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA0NTU5OQ==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452045599", "bodyText": "\u5efa\u8bae\u5bf9\u89e3\u6790 http_proxy \u90e8\u5206\u7684\u4ee3\u7801\u62bd\u51fa\u6765\uff0c\u5e76\u5bf9\u5176\u5199\u4e00\u4e9b\u6d4b\u8bd5\u3002", "author": "JohnNiang", "createdAt": "2020-07-09T08:19:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk4NjE1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwMTg3Ng==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452101876", "bodyText": "\u6211\u6ce8\u91ca\u6389\u4e5f\u80fd\u6b63\u5e38\u542f\u52a8\u73b0\u5728\u7cfb\u7edf\u4e2d\u662f\u5426\u8fd8\u5728\u4f7f\u7528\u8fd9\u4e2a\u5305\uff1f//    implementation \"com.google.zxing:core:$zxingVersion\"", "author": "sheiy", "createdAt": "2020-07-09T09:54:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk4NjE1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE2NzU5Nw==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452167597", "bodyText": "\u8be5\u4f9d\u8d56\u4f3c\u4e4e\u6ca1\u6709\u88ab\u7528\u5230\u3002\u53ef\u4ee5\u79fb\u51fa\u3002", "author": "JohnNiang", "createdAt": "2020-07-09T12:05:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk4NjE1Ng=="}], "type": "inlineReview"}, {"oid": "4a380d80ef7c352788e93231dd3ec81ae2cb5113", "url": "https://github.com/halo-dev/halo/commit/4a380d80ef7c352788e93231dd3ec81ae2cb5113", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406", "committedDate": "2020-07-09T07:19:50Z", "type": "commit"}, {"oid": "554f4657ea49b7705e2bc8002839ae59216c4faf", "url": "https://github.com/halo-dev/halo/commit/554f4657ea49b7705e2bc8002839ae59216c4faf", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406\n\u6dfb\u52a0\u6ce8\u91ca", "committedDate": "2020-07-09T07:21:54Z", "type": "commit"}, {"oid": "dcead705f70883ea7f4bd1d961ff44b566433a21", "url": "https://github.com/halo-dev/halo/commit/dcead705f70883ea7f4bd1d961ff44b566433a21", "message": "\u6dfb\u52a0\u5355\u5143\u6d4b\u8bd5\n\u6ca1\u6709useJUnitPlatform()\u5355\u5143\u6d4b\u8bd5\u8dd1\u4e0d\u8d77\u6765", "committedDate": "2020-07-09T09:48:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE2MzI1MQ==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452163251", "bodyText": "\u63a8\u8350\u7528 org.junit.jupiter.api.Assertions#assertArrayEquals()\u3002", "author": "JohnNiang", "createdAt": "2020-07-09T11:56:37Z", "path": "src/test/java/run/halo/app/utils/HttpClientUtilsTest.java", "diffHunk": "@@ -0,0 +1,32 @@\n+package run.halo.app.utils;\n+\n+import cn.hutool.core.lang.Tuple;\n+import org.junit.jupiter.api.Test;\n+\n+import java.lang.reflect.Method;\n+\n+public class HttpClientUtilsTest {\n+\n+\n+    @Test\n+    void resolveHttpProxyTest() throws Exception {\n+        final Method resolveHttpProxy = HttpClientUtils.class.getDeclaredMethod(\"resolveHttpProxy\", String.class);\n+        resolveHttpProxy.setAccessible(true);\n+\n+        Tuple result = (Tuple) resolveHttpProxy.invoke(null, \"http://127.0.0.1\");\n+        assert result.get(0).equals(\"http://127.0.0.1\");", "originalCommit": "dcead705f70883ea7f4bd1d961ff44b566433a21", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE2NDQ5MA==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452164490", "bodyText": "\u8fd8\u6709 org.junit.jupiter.api.Assertions#assertEquals()\u3002", "author": "JohnNiang", "createdAt": "2020-07-09T11:59:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE2MzI1MQ=="}], "type": "inlineReview"}, {"oid": "480a6505c62d400a1eda2d3f35a569a1a69a384c", "url": "https://github.com/halo-dev/halo/commit/480a6505c62d400a1eda2d3f35a569a1a69a384c", "message": "\u4fee\u6539\u5355\u5143\u6d4b\u8bd5\uff0c\u5220\u9664zxing\u7684\u4f9d\u8d56", "committedDate": "2020-07-10T01:58:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU4NTM1OA==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452585358", "bodyText": "\u7a81\u7136\u53d1\u73b0\u8fd9\u91cc\u6709\u4e9b\u4e0d\u6807\u51c6\u3002\nu:p@https://127.0.0.1:123\nhttps://u:p@127.0.0.1:123\n\u5b9e\u9645\u4e0a resolveHttpProxy \u8fd9\u6bb5\u903b\u8f91\u5728 java.net.URI \u5df2\u7ecf\u5b9e\u73b0\u4e86\u3002", "author": "JohnNiang", "createdAt": "2020-07-10T02:13:14Z", "path": "src/test/java/run/halo/app/utils/HttpClientUtilsTest.java", "diffHunk": "@@ -5,28 +5,27 @@\n \n import java.lang.reflect.Method;\n \n-public class HttpClientUtilsTest {\n+import static org.junit.jupiter.api.Assertions.assertArrayEquals;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n \n+public class HttpClientUtilsTest {\n \n     @Test\n     void resolveHttpProxyTest() throws Exception {\n         final Method resolveHttpProxy = HttpClientUtils.class.getDeclaredMethod(\"resolveHttpProxy\", String.class);\n         resolveHttpProxy.setAccessible(true);\n \n         Tuple result = (Tuple) resolveHttpProxy.invoke(null, \"http://127.0.0.1\");\n-        assert result.get(0).equals(\"http://127.0.0.1\");\n+        assertEquals(result.get(0), \"http://127.0.0.1\");\n \n         result = (Tuple) resolveHttpProxy.invoke(null, \"https://127.0.0.1\");\n-        assert result.get(0).equals(\"https://127.0.0.1\");\n+        assertEquals(result.get(0), \"https://127.0.0.1\");\n \n         result = (Tuple) resolveHttpProxy.invoke(null, \"https://127.0.0.1:123\");\n-        assert result.get(0).equals(\"https://127.0.0.1:123\");\n+        assertEquals(result.get(0), \"https://127.0.0.1:123\");\n \n         result = (Tuple) resolveHttpProxy.invoke(null, \"u:p@https://127.0.0.1:123\");", "originalCommit": "480a6505c62d400a1eda2d3f35a569a1a69a384c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU4OTg4MA==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452589880", "bodyText": "\u6211\u7f51\u4e0a\u641clinux\u547d\u4ee4\u884c\u914d\u7f6e\u4ee3\u7406\u8c8c\u4f3c\u662f\u8fd9\u4e2a\u683c\u5f0f\u554a \u4e0d\u8fc7\u6211\u6ca1\u8bd5\u8fc7", "author": "sheiy", "createdAt": "2020-07-10T02:31:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU4NTM1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU5NDM4Mw==", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452594383", "bodyText": "\u767e\u5ea6\u5bb3\u4eba  \u6211\u521agoogle\u4e86\u4e0b  https://u:p@127.0.0.1:123 \u8fd9\u79cd\u624d\u662f\u5bf9\u7684  \u6211\u6539\u4e0b\u3002\u3002\u3002\u3002", "author": "sheiy", "createdAt": "2020-07-10T02:50:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU4NTM1OA=="}], "type": "inlineReview"}, {"oid": "e6ca92268e7a1462fee6bf92a10b627416e0d00b", "url": "https://github.com/halo-dev/halo/commit/e6ca92268e7a1462fee6bf92a10b627416e0d00b", "message": "\u4fee\u6b63\u9519\u8bef\u7684http\u914d\u7f6e\u683c\u5f0f", "committedDate": "2020-07-10T03:27:00Z", "type": "commit"}]}