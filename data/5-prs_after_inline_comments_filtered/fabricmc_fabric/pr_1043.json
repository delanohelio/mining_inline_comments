{"pr_number": 1043, "pr_title": "Tristate extensions", "pr_createdAt": "2020-08-25T03:06:04Z", "pr_url": "https://github.com/FabricMC/fabric/pull/1043", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEwNTk0Ng==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476105946", "bodyText": "are you annotating the method or its return type here? imo should be the return type", "author": "zml2008", "createdAt": "2020-08-25T03:15:00Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;\n+\t\t}\n+\n+\t\treturn TriState.of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t/* @Nullable */", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjExNjkwMQ==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476116901", "bodyText": "This refers to the return type of the method, the Boolean.\nObviously pending on loom 0.5 for jetbrains annotations to make this concretely clear.", "author": "i509VCB", "createdAt": "2020-08-25T03:31:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEwNTk0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjExODU2NQ==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476118565", "bodyText": "ah -- I don't know if you all have figured out the code style for that yet, but normally for type annotations i'd stick them directly against the return type (since they're effectively type use annotations), so a method with type and method annotations would look something like:\n@Override\npublic @Nullable Boolean blah() {\n    return /* blah */;\n}", "author": "zml2008", "createdAt": "2020-08-25T03:33:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEwNTk0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjExOTI5NA==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476119294", "bodyText": "Aren't those two annotation styles effectively the same?\nPretty sure there is probably a way to make checkstyle enforce the annotation position in that case.", "author": "i509VCB", "createdAt": "2020-08-25T03:34:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEwNTk0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3NzQyMw==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476177423", "bodyText": "for the compiler, yes -- but for the reader imo that's more clear. Of course this is entirely a code style thing, but hopefully i have permission to bikeshed a little", "author": "zml2008", "createdAt": "2020-08-25T04:57:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEwNTk0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE4MzIyNA==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476183224", "bodyText": "If you did want that change, you may as well open an RFC for style change (I want religious use of this in codebase so I'll need to open one soon).", "author": "i509VCB", "createdAt": "2020-08-25T05:18:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEwNTk0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI0NzMxNA==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476247314", "bodyText": "Not totally necessary, but this could probably just be expressed with the ternary operator instead.\nreturn bool == null ? DEFAULT : TriState.of(bool.booleanValue());", "author": "Vaerian", "createdAt": "2020-08-25T07:50:43Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI0OTUxOA==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476249518", "bodyText": "Same here, could probably be a ternary. I only mention it because all of the methods in the file are basically the same level of complexity, but some of them use the ternary operator, and some of them just use a traditional if statement. It might be good to just pick one and uniformly use that one.\nreturn this == TriState.DEFAULT ? null : this.get();", "author": "Vaerian", "createdAt": "2020-08-25T07:54:38Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;\n+\t\t}\n+\n+\t\treturn TriState.of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t/* @Nullable */\n+\tpublic Boolean getBoxed() {\n+\t\tif (this == TriState.DEFAULT) {", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1NDcwNA==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476254704", "bodyText": "Could be good to make a private mapEq or mapValue common method that takes in a Supplier and a TriState because mapTrue, mapFalse, and mapDefault all use the same logic except they use different things to compare to.\nTake for example\nprivate <T> Optional<T> mapEq(TriState comparison, Supplier<T> mapper) {\n    Objects.requireNonNull(mapper);\n\n    if (this == comparison) {\n        return Optional.ofNullable(mapper.get());\n    }\n\n    return Optional.empty();\n}\n\npublic <T> Optional<T> mapTrue(Supplier<T> mapper) {\n    return this.mapEq(TriState.TRUE, mapper);\n}\n\npublic <T> Optional<T> mapFalse(Supplier<T> mapper) {\n    return this.mapEq(TriState.FALSE, mapper);\n}\n\npublic <T> Optional<T> mapDefault(Supplier<T> mapper) {\n    return this.mapEq(TriState.DEFAULT, mapper);\n}", "author": "Vaerian", "createdAt": "2020-08-25T08:02:58Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;\n+\t\t}\n+\n+\t\treturn TriState.of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t/* @Nullable */\n+\tpublic Boolean getBoxed() {\n+\t\tif (this == TriState.DEFAULT) {\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\treturn this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param value the value to fallback to\n+\t * @return the value of the tri-state or the supplied value if {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElse(boolean value) {\n+\t\treturn this == TriState.DEFAULT ? value : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param supplier the supplier used to get the value to fallback to\n+\t * @return the value of the tri-state or the value of the supplier if the tri-state is {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElseGet(BooleanSupplier supplier) {\n+\t\treturn this == TriState.DEFAULT ? supplier.getAsBoolean() : this.get();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#TRUE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapTrue(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1NTk2MQ==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476255961", "bodyText": "Sometimes you use TriState.FALSE and other times you just use FALSE. I personally prefer TriState.FALSE just to be explicit, but I would just choose one and stick to that as a general style rule.", "author": "Vaerian", "createdAt": "2020-08-25T08:04:29Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;\n+\t\t}\n+\n+\t\treturn TriState.of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t/* @Nullable */\n+\tpublic Boolean getBoxed() {\n+\t\tif (this == TriState.DEFAULT) {\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\treturn this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param value the value to fallback to\n+\t * @return the value of the tri-state or the supplied value if {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElse(boolean value) {\n+\t\treturn this == TriState.DEFAULT ? value : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param supplier the supplier used to get the value to fallback to\n+\t * @return the value of the tri-state or the value of the supplier if the tri-state is {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElseGet(BooleanSupplier supplier) {\n+\t\treturn this == TriState.DEFAULT ? supplier.getAsBoolean() : this.get();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#TRUE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapTrue(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == TRUE) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#FALSE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapFalse(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == FALSE) {", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1NjYxOQ==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476256619", "bodyText": "Choose TRUE or TriState.TRUE as a general style", "author": "Vaerian", "createdAt": "2020-08-25T08:05:03Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;\n+\t\t}\n+\n+\t\treturn TriState.of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t/* @Nullable */\n+\tpublic Boolean getBoxed() {\n+\t\tif (this == TriState.DEFAULT) {\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\treturn this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param value the value to fallback to\n+\t * @return the value of the tri-state or the supplied value if {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElse(boolean value) {\n+\t\treturn this == TriState.DEFAULT ? value : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param supplier the supplier used to get the value to fallback to\n+\t * @return the value of the tri-state or the value of the supplier if the tri-state is {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElseGet(BooleanSupplier supplier) {\n+\t\treturn this == TriState.DEFAULT ? supplier.getAsBoolean() : this.get();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#TRUE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapTrue(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == TRUE) {", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1NzIwOQ==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476257209", "bodyText": "Choose TRUE and FALSE or TriState.TRUE and TriState.FALSE as a general style", "author": "Vaerian", "createdAt": "2020-08-25T08:05:35Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1NzU5Nw==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476257597", "bodyText": "Choose DEFAULT or TriState.DEFAULT as a general style", "author": "Vaerian", "createdAt": "2020-08-25T08:06:00Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1Nzc3OA==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476257778", "bodyText": "Choose TRUE or TriState.TRUE as a general style", "author": "Vaerian", "createdAt": "2020-08-25T08:06:20Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;\n+\t\t}\n+\n+\t\treturn TriState.of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1ODE5NQ==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476258195", "bodyText": "Choose DEFAULT or TriState.DEFAULT as a general style", "author": "Vaerian", "createdAt": "2020-08-25T08:07:00Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;\n+\t\t}\n+\n+\t\treturn TriState.of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t/* @Nullable */\n+\tpublic Boolean getBoxed() {\n+\t\tif (this == TriState.DEFAULT) {\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\treturn this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param value the value to fallback to\n+\t * @return the value of the tri-state or the supplied value if {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElse(boolean value) {\n+\t\treturn this == TriState.DEFAULT ? value : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param supplier the supplier used to get the value to fallback to\n+\t * @return the value of the tri-state or the value of the supplier if the tri-state is {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElseGet(BooleanSupplier supplier) {\n+\t\treturn this == TriState.DEFAULT ? supplier.getAsBoolean() : this.get();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#TRUE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapTrue(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == TRUE) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#FALSE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapFalse(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == FALSE) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#DEFAULT}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#DEFAULT} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapDefault(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == DEFAULT) {", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI1ODQ0NA==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476258444", "bodyText": "Choose TRUE or TriState.TRUE as a general style", "author": "Vaerian", "createdAt": "2020-08-25T08:07:25Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;\n+\t\t}\n+\n+\t\treturn TriState.of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t/* @Nullable */\n+\tpublic Boolean getBoxed() {\n+\t\tif (this == TriState.DEFAULT) {\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\treturn this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param value the value to fallback to\n+\t * @return the value of the tri-state or the supplied value if {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElse(boolean value) {\n+\t\treturn this == TriState.DEFAULT ? value : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param supplier the supplier used to get the value to fallback to\n+\t * @return the value of the tri-state or the value of the supplier if the tri-state is {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElseGet(BooleanSupplier supplier) {\n+\t\treturn this == TriState.DEFAULT ? supplier.getAsBoolean() : this.get();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#TRUE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapTrue(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == TRUE) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#FALSE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapFalse(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == FALSE) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#DEFAULT}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#DEFAULT} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapDefault(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == DEFAULT) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Calls the supplied runnable if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param runnable the interface to run\n+\t */\n+\tpublic void ifTrue(Runnable runnable) {\n+\t\tif (this == TRUE) {", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI2MDU2MQ==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r476260561", "bodyText": "Same here you could probably just make one general method and have the three enum type corresponding methods just use that one general method's return with the respective enum type as a parameter.\nprivate void ifEq(TriState comparison, Runnable runnable) {\n    if (this == comparison) {\n        runnable.run();\n    }\n}\n\npublic void ifTrue(Runnable runnable) {\n    this.ifEq(TriState.TRUE, runnable);\n}\n\npublic void ifFalse(Runnable runnable) {\n    this.ifEq(TriState.FALSE, runnable);\n}\n\npublic void ifDefault(Runnable runnable) {\n    this.ifEq(TriState.DEFAULT, runnable);\n}", "author": "Vaerian", "createdAt": "2020-08-25T08:11:03Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,197 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(/* @Nullable */ Boolean bool) {\n+\t\tif (bool == null) {\n+\t\t\treturn DEFAULT;\n+\t\t}\n+\n+\t\treturn TriState.of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t/* @Nullable */\n+\tpublic Boolean getBoxed() {\n+\t\tif (this == TriState.DEFAULT) {\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\treturn this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param value the value to fallback to\n+\t * @return the value of the tri-state or the supplied value if {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElse(boolean value) {\n+\t\treturn this == TriState.DEFAULT ? value : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param supplier the supplier used to get the value to fallback to\n+\t * @return the value of the tri-state or the value of the supplier if the tri-state is {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElseGet(BooleanSupplier supplier) {\n+\t\treturn this == TriState.DEFAULT ? supplier.getAsBoolean() : this.get();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#TRUE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapTrue(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == TRUE) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#FALSE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapFalse(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == FALSE) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#DEFAULT}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#DEFAULT} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapDefault(Supplier<T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == DEFAULT) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Calls the supplied runnable if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param runnable the interface to run\n+\t */\n+\tpublic void ifTrue(Runnable runnable) {\n+\t\tif (this == TRUE) {", "originalCommit": "83ddb2b96e6b18f3b8708987b1f2b66ac057c388", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "50aa052c804d2416a4a1c6db1172559bb7464820", "url": "https://github.com/FabricMC/fabric/commit/50aa052c804d2416a4a1c6db1172559bb7464820", "message": "Tri-state extensions\n\nAdds new extensions to tri-state and some javadoc.", "committedDate": "2020-09-20T18:49:33Z", "type": "commit"}, {"oid": "9100e94d89cdd2e9d66a27fccc912eb64fd91e12", "url": "https://github.com/FabricMC/fabric/commit/9100e94d89cdd2e9d66a27fccc912eb64fd91e12", "message": "Part 2", "committedDate": "2020-09-20T18:49:33Z", "type": "commit"}, {"oid": "3b3b759d208a20c7f865c9cadfce5f853c6889f3", "url": "https://github.com/FabricMC/fabric/commit/3b3b759d208a20c7f865c9cadfce5f853c6889f3", "message": "Comment fix", "committedDate": "2020-09-20T18:49:33Z", "type": "commit"}, {"oid": "1360f4da47ce689ee533312cc6b78f4810f577ac", "url": "https://github.com/FabricMC/fabric/commit/1360f4da47ce689ee533312cc6b78f4810f577ac", "message": "More conistent codestyle, abstract the map and ifxyz code a bit", "committedDate": "2020-09-20T18:49:33Z", "type": "commit"}, {"oid": "1360f4da47ce689ee533312cc6b78f4810f577ac", "url": "https://github.com/FabricMC/fabric/commit/1360f4da47ce689ee533312cc6b78f4810f577ac", "message": "More conistent codestyle, abstract the map and ifxyz code a bit", "committedDate": "2020-09-20T18:49:33Z", "type": "forcePushed"}, {"oid": "1559a1ba26b17cbb56388922ca38972060ea0ec6", "url": "https://github.com/FabricMC/fabric/commit/1559a1ba26b17cbb56388922ca38972060ea0ec6", "message": "Annotations", "committedDate": "2020-09-20T18:51:33Z", "type": "commit"}, {"oid": "d8f74f82ce0e1bb620a21c0552813d99b9781800", "url": "https://github.com/FabricMC/fabric/commit/d8f74f82ce0e1bb620a21c0552813d99b9781800", "message": "Player said no to qualifying static members local to the TriState enum.", "committedDate": "2020-10-01T16:17:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwMjM0Nw==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r498502347", "bodyText": "xception -> exception", "author": "LoganDark", "createdAt": "2020-10-01T20:43:09Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,185 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+import org.jetbrains.annotations.Nullable;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(@Nullable Boolean bool) {\n+\t\treturn bool == null ? DEFAULT : of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t@Nullable\n+\tpublic Boolean getBoxed() {\n+\t\treturn this == DEFAULT ? null : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param value the value to fallback to\n+\t * @return the value of the tri-state or the supplied value if {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElse(boolean value) {\n+\t\treturn this == DEFAULT ? value : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param supplier the supplier used to get the value to fallback to\n+\t * @return the value of the tri-state or the value of the supplier if the tri-state is {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElseGet(BooleanSupplier supplier) {\n+\t\treturn this == DEFAULT ? supplier.getAsBoolean() : this.get();\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#TRUE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapTrue(Supplier<@Nullable T> mapper) {\n+\t\treturn this.mapEq(TRUE, mapper);\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#FALSE} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapFalse(Supplier<@Nullable T> mapper) {\n+\t\treturn this.mapEq(FALSE, mapper);\n+\t}\n+\n+\t/**\n+\t * Maps the value of an optional if this tri-state is {@link TriState#DEFAULT}.\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object supplied by the mapper\n+\t * @return an optional containing the value if {@link TriState#DEFAULT} and the value returned by the mapper is non-null, otherwise {@link Optional#empty()}.\n+\t */\n+\tpublic <T> Optional<T> mapDefault(Supplier<@Nullable T> mapper) {\n+\t\treturn this.mapEq(DEFAULT, mapper);\n+\t}\n+\n+\tprivate <T> Optional<T> mapEq(TriState comparison, Supplier<@Nullable T> mapper) {\n+\t\tObjects.requireNonNull(mapper);\n+\n+\t\tif (this == comparison) {\n+\t\t\treturn Optional.ofNullable(mapper.get());\n+\t\t}\n+\n+\t\treturn Optional.empty();\n+\t}\n+\n+\t/**\n+\t * Calls the supplied runnable if this tri-state is {@link TriState#TRUE}.\n+\t *\n+\t * @param runnable the interface to run\n+\t */\n+\tpublic void ifTrue(Runnable runnable) {\n+\t\tthis.ifEq(TRUE, runnable);\n+\t}\n+\n+\t/**\n+\t * Calls the supplied runnable if this tri-state is {@link TriState#FALSE}.\n+\t *\n+\t * @param runnable the interface to run\n+\t */\n+\tpublic void ifFalse(Runnable runnable) {\n+\t\tthis.ifEq(FALSE, runnable);\n+\t}\n+\n+\t/**\n+\t * Calls the supplied runnable if this tri-state is {@link TriState#DEFAULT}.\n+\t *\n+\t * @param runnable the interface to run\n+\t */\n+\tpublic void ifDefault(Runnable runnable) {\n+\t\tthis.ifEq(DEFAULT, runnable);\n+\t}\n+\n+\tprivate void ifEq(TriState comparison, Runnable runnable) {\n+\t\tObjects.requireNonNull(runnable);\n+\n+\t\tif (this == comparison) {\n+\t\t\trunnable.run();\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state, or throws an exception if this tri-state's value is {@link TriState#DEFAULT}.\n+\t *\n+\t * @param exceptionSupplier the supplying function that produces an xception to be thrown", "originalCommit": "d8f74f82ce0e1bb620a21c0552813d99b9781800", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8c6730d988e61cddf75a0ce7adf03a46e054660a", "url": "https://github.com/FabricMC/fabric/commit/8c6730d988e61cddf75a0ce7adf03a46e054660a", "message": "Exceptional spelling", "committedDate": "2020-10-02T05:09:16Z", "type": "commit"}, {"oid": "f1a6357ab966bb54301107b8888cbcf6f9430ab8", "url": "https://github.com/FabricMC/fabric/commit/f1a6357ab966bb54301107b8888cbcf6f9430ab8", "message": "add a more Optional-like map method and drop if*State*", "committedDate": "2020-10-04T01:00:13Z", "type": "commit"}, {"oid": "e267d5ed347217014bbd3f96fb28be54d90d684d", "url": "https://github.com/FabricMC/fabric/commit/e267d5ed347217014bbd3f96fb28be54d90d684d", "message": "? extends T this time", "committedDate": "2020-10-04T01:26:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUwNDkyNg==", "url": "https://github.com/FabricMC/fabric/pull/1043#discussion_r499504926", "bodyText": "everything else checks this == DEFAULT instead, should probably be changed here, too, for consistency.", "author": "UpcraftLP", "createdAt": "2020-10-05T10:41:57Z", "path": "fabric-api-base/src/main/java/net/fabricmc/fabric/api/util/TriState.java", "diffHunk": "@@ -16,16 +16,124 @@\n \n package net.fabricmc.fabric.api.util;\n \n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Supplier;\n+\n+import org.jetbrains.annotations.Nullable;\n+\n+/**\n+ * Represents a boolean value which can be true, false or refer to a default value.\n+ */\n public enum TriState {\n+\t/**\n+\t * Represents the boolean value of {@code false}.\n+\t */\n \tFALSE,\n+\t/**\n+\t * Represents a value that refers to a \"default\" value, often as a fallback.\n+\t */\n \tDEFAULT,\n+\t/**\n+\t * Represents the boolean value of {@code true}.\n+\t */\n \tTRUE;\n \n-\tpublic static TriState of(boolean b) {\n-\t\treturn b ? TRUE : FALSE;\n+\t/**\n+\t * Gets the corresponding tri-state from a boolean value.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(boolean bool) {\n+\t\treturn bool ? TRUE : FALSE;\n+\t}\n+\n+\t/**\n+\t * Gets a tri-state from a nullable boxed boolean.\n+\t *\n+\t * @param bool the boolean value\n+\t * @return {@link TriState#DEFAULT} if {@code null}.\n+\t * Otherwise {@link TriState#TRUE} or {@link TriState#FALSE} depending on the value of the boolean.\n+\t */\n+\tpublic static TriState of(@Nullable Boolean bool) {\n+\t\treturn bool == null ? DEFAULT : of(bool.booleanValue());\n \t}\n \n+\t/**\n+\t * Gets the value of the tri-state.\n+\t *\n+\t * @return true if the tri-state is {@link TriState#TRUE}.\n+\t * Otherwise false.\n+\t */\n \tpublic boolean get() {\n \t\treturn this == TRUE;\n \t}\n+\n+\t/**\n+\t * Gets the value of the tri-state as a boxed, nullable boolean.\n+\t *\n+\t * @return {@code null} if {@link TriState#DEFAULT}.\n+\t * Otherwise {@code true} if {@link TriState#TRUE} or {@code false} if {@link TriState#FALSE}.\n+\t */\n+\t@Nullable\n+\tpublic Boolean getBoxed() {\n+\t\treturn this == DEFAULT ? null : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param value the value to fallback to\n+\t * @return the value of the tri-state or the supplied value if {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElse(boolean value) {\n+\t\treturn this == DEFAULT ? value : this.get();\n+\t}\n+\n+\t/**\n+\t * Gets the value of this tri-state.\n+\t * If the value is {@link TriState#DEFAULT} then use the supplied value.\n+\t *\n+\t * @param supplier the supplier used to get the value to fallback to\n+\t * @return the value of the tri-state or the value of the supplier if the tri-state is {@link TriState#DEFAULT}.\n+\t */\n+\tpublic boolean orElseGet(BooleanSupplier supplier) {\n+\t\treturn this == DEFAULT ? supplier.getAsBoolean() : this.get();\n+\t}\n+\n+\t/**\n+\t * Maps the boolean value of this tri-state if it is {@link TriState#TRUE} or {@link TriState#FALSE}\n+\t *\n+\t * @param mapper the mapper to use\n+\t * @param <T> the type of object being supplier by the mapper\n+\t * @return an optional containing the mapped value; {@link Optional#empty()} if the tri-state is {@link TriState#DEFAULT} or the value provided by the mapper is {@code null}.\n+\t */\n+\tpublic <T> Optional<T> map(BooleanFunction<@Nullable ? extends T> mapper) {\n+\t\tObjects.requireNonNull(mapper, \"Mapper function cannot be null\");\n+\n+\t\tif (this.getBoxed() == null) {", "originalCommit": "e267d5ed347217014bbd3f96fb28be54d90d684d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fea558ac9bb81ae9653f6a21d6ca28e4af5aaef3", "url": "https://github.com/FabricMC/fabric/commit/fea558ac9bb81ae9653f6a21d6ca28e4af5aaef3", "message": "Compare to default rather than null of getBoxed", "committedDate": "2020-10-05T14:35:56Z", "type": "commit"}, {"oid": "1c72f7df07a3931a8060abcc42a47c1f1183baf2", "url": "https://github.com/FabricMC/fabric/commit/1c72f7df07a3931a8060abcc42a47c1f1183baf2", "message": "Puncation of course", "committedDate": "2020-10-05T15:00:58Z", "type": "commit"}]}