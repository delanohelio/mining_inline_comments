{"pr_number": 15102, "pr_title": "Move SIP security and monitor features to OL", "pr_createdAt": "2020-11-24T20:47:03Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/15102", "timeline": [{"oid": "38a64dbedf4337bf9b5ffd0d72fb247a4d1378f1", "url": "https://github.com/OpenLiberty/open-liberty/commit/38a64dbedf4337bf9b5ffd0d72fb247a4d1378f1", "message": "Move the SIP Container security and monitor features to OL\n\nMove SIP security and monitor features to OL\n\ndd the API file", "committedDate": "2020-11-25T18:21:17Z", "type": "forcePushed"}, {"oid": "134885bf8a51ade66aef7988c606535976b8afe3", "url": "https://github.com/OpenLiberty/open-liberty/commit/134885bf8a51ade66aef7988c606535976b8afe3", "message": "Move the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove SIP security and monitor features to OL\n\ndd the API file\n\nMove SIP security and monitor features to OL", "committedDate": "2020-11-26T00:56:15Z", "type": "forcePushed"}, {"oid": "625ce214a1e46abecd8797946f29d5cc627167da", "url": "https://github.com/OpenLiberty/open-liberty/commit/625ce214a1e46abecd8797946f29d5cc627167da", "message": "Move the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove SIP security and monitor features to OL\n\ndd the API file\n\nMove SIP security and monitor features to OL\n\nFix the javadoc zip file name", "committedDate": "2020-12-03T18:39:23Z", "type": "forcePushed"}, {"oid": "1acce86d8c6fc0661df496b39a23f6ff13f650fb", "url": "https://github.com/OpenLiberty/open-liberty/commit/1acce86d8c6fc0661df496b39a23f6ff13f650fb", "message": "Move the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove SIP security and monitor features to OL\n\ndd the API file\n\nMove SIP security and monitor features to OL\n\nFix the javadoc zip file name\n\nRename the SIP security feature", "committedDate": "2020-12-04T18:19:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAyNTI2MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15102#discussion_r538025261", "bodyText": "Should remove reference to @author", "author": "jhanders34", "createdAt": "2020-12-08T04:26:43Z", "path": "dev/com.ibm.ws.sipcontainer.monitor/src/com/ibm/ws/sip/monitor/pmi/application/ApplicationsModule.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*******************************************************************************\n+ * Copyright (c) 2013 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.sip.monitor.pmi.application;\n+\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+import java.util.concurrent.ConcurrentMap;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+\n+import org.osgi.service.component.annotations.Activate;\n+import org.osgi.service.component.annotations.Component;\n+import org.osgi.service.component.annotations.ConfigurationPolicy;\n+import org.osgi.service.component.annotations.Deactivate;\n+import org.osgi.service.component.annotations.Modified;\n+\n+import com.ibm.ws.sip.container.pmi.ApplicationModuleInterface;\n+import com.ibm.ws.sip.container.pmi.listener.ApplicationsPMIListener;\n+\n+@Component(configurationPolicy = ConfigurationPolicy.IGNORE)\n+\n+/**\n+ * This class is a listener to SIP loaded applications. Each time the SIP Container loads a new SIP application\n+ * it calls getApplicationModuel() method that creates a module for this application to manage the application counters.\n+ * \n+ * @author galina", "originalCommit": "1acce86d8c6fc0661df496b39a23f6ff13f650fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAyNTMyOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15102#discussion_r538025328", "bodyText": "Should remove reference to @author", "author": "jhanders34", "createdAt": "2020-12-08T04:26:53Z", "path": "dev/com.ibm.ws.sipcontainer.monitor/src/com/ibm/ws/sip/monitor/pmi/basic/SipContainerBasicCountersMonitor.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*******************************************************************************\n+ * Copyright (c) 2013 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.sip.monitor.pmi.basic;\n+\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+\n+import com.ibm.websphere.monitor.annotation.Monitor;\n+import com.ibm.websphere.monitor.annotation.PublishedMetric;\n+import com.ibm.websphere.monitor.meters.Meter;\n+import com.ibm.websphere.monitor.meters.MeterCollection;\n+\n+/**\n+ * Monitor Class for the sip container basic counters.\n+ * \n+ * This class is responsible for calculating and reporting SIP basic counters provides by the <code>SipContainerBasicCountersMXBean</code>.\n+ * \n+ * @author galina, Sep 29, 2015", "originalCommit": "1acce86d8c6fc0661df496b39a23f6ff13f650fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAyNTM4NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15102#discussion_r538025385", "bodyText": "Should remove reference to @author", "author": "jhanders34", "createdAt": "2020-12-08T04:27:04Z", "path": "dev/com.ibm.ws.sipcontainer.security/src/com/ibm/websphere/security/tai/extension/HTTPTrustAssociationInterceptor.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/*******************************************************************************\n+ * Copyright (c) 2009 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.websphere.security.tai.extension;\n+\n+import java.util.Properties;\n+\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+\n+import com.ibm.websphere.security.WebTrustAssociationFailedException;\n+import com.ibm.wsspi.security.tai.TAIResult;\n+\n+/**\n+ * The <code>HTTPTrustAssociationInterceptor</code> is an interface for developing a HTTP custom trust association interceptor (TAI).\n+ * A custom  TAI that implements this interface should also extend <code>com.ibm.wsspi.security.tai.extension.BaseTrustAssociationInterceptor</code> class.\n+ * <p> \n+ * The custom TAI must implement the following methods:\n+ * <p>\n+ * <code>initialize</code> to allocate any resources needed for the TAI\n+ * <p>\n+ * <code>negotiateValidateandEstablishProtocolTrust</code> that returns <code>TAIResult</code> to indicate the status of the HTTP message being processed\n+ * <p> \n+ * <code>isTargetProtocolInterceptor</code> that returns false/true to indicate whether a HTTP message will be handled by the TAI. \n+ * \n+ * @author Michael Gilfix (<a href=\"mailto:mgilfix@us.ibm.com\">mgilfix@us.ibm.com</a>)", "originalCommit": "1acce86d8c6fc0661df496b39a23f6ff13f650fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAyNTQyMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15102#discussion_r538025423", "bodyText": "Should remove reference to @author", "author": "jhanders34", "createdAt": "2020-12-08T04:27:12Z", "path": "dev/com.ibm.ws.sipcontainer.security/src/com/ibm/websphere/security/tai/extension/SIPTrustAssociationInterceptor.java", "diffHunk": "@@ -0,0 +1,109 @@\n+/*******************************************************************************\n+ * Copyright (c) 2009 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.websphere.security.tai.extension;\n+\n+import java.util.Properties;\n+\n+import javax.servlet.sip.SipServletMessage;\n+import javax.servlet.sip.SipServletRequest;\n+import javax.servlet.sip.SipServletResponse;\n+\n+import com.ibm.websphere.security.WebTrustAssociationFailedException;\n+import com.ibm.wsspi.security.tai.TAIResult;\n+\n+/**\n+ * The <code>SIPTrustAssociationInterceptor</code> is an interface for developing a SIP custom trust association interceptor (TAI).\n+ * \n+ * A custom TAI that implements this interface should also extend <code>com.ibm.wsspi.security.tai.extension.BaseTrustAssociationInterceptor</code> class.\n+ * \n+ * <p>\n+ * The custom TAI must implement the following methods:\n+ * <p>\n+ * <code>initialize</code> to allocate any resources needed for the TAI\n+ * <p>\n+ * <code>negotiateValidateandEstablishProtocolTrust</code> that returns <code>TAIResult</code> to indicate the status of the message being processed\n+ * <p> \n+ * <code>isTargetProtocolInterceptor</code> that returns false/true to indicate whether a SIP message will be handled by the TAI. \n+ * <p>\n+ * \n+ * The idea is during processing a SIP request, the Liberty server will pass the <code>\n+ * SipServletRequest</code> and <code>SipServletResponse</code> to the SIP trust association interceptor. \n+ * The trust association interceptor can inspect the SIP message to see if it contains security\n+ * attributes (authentication or authorization attributes) from the third party security service.\n+ * </p>\n+ * @author Michael Gilfix (<a href=\"mailto:mgilfix@us.ibm.com\">mgilfix@us.ibm.com</a>)", "originalCommit": "1acce86d8c6fc0661df496b39a23f6ff13f650fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAyNTQ4MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15102#discussion_r538025480", "bodyText": "Should remove reference to @author", "author": "jhanders34", "createdAt": "2020-12-08T04:27:21Z", "path": "dev/com.ibm.ws.sipcontainer.security/src/com/ibm/wsspi/security/tai/extension/BaseTrustAssociationInterceptor.java", "diffHunk": "@@ -0,0 +1,114 @@\n+/*******************************************************************************\n+ * Copyright (c) 2009 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.wsspi.security.tai.extension;\n+\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import javax.servlet.sip.SipServletRequest;\n+import javax.servlet.sip.SipServletResponse;\n+\n+import com.ibm.websphere.security.tai.extension.HTTPTrustAssociationInterceptor;\n+import com.ibm.websphere.security.tai.extension.SIPTrustAssociationInterceptor;\n+import com.ibm.websphere.security.WebTrustAssociationFailedException;\n+import com.ibm.ws.sip.container.was.ThreadLocalStorage;\n+import com.ibm.wsspi.security.tai.TAIResult;\n+import com.ibm.wsspi.security.tai.TrustAssociationInterceptor;\n+\n+/**\n+ * This abstract <code>BaseTrustAssociationInterceptor</code> class provides a base implementation of the <code>TrustAssociationInterceptor</code> interface.\n+ * \n+ * @author Michael Gilfix (<a href=\"mailto:mgilfix@us.ibm.com\">mgilfix@us.ibm.com</a>)", "originalCommit": "1acce86d8c6fc0661df496b39a23f6ff13f650fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAyNTU0NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15102#discussion_r538025544", "bodyText": "Should remove reference to @author", "author": "jhanders34", "createdAt": "2020-12-08T04:27:31Z", "path": "dev/com.ibm.ws.sipcontainer.servlet.3.1/src/com/ibm/ws/sip/container/was/servlet31/SipMessage31.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*******************************************************************************\n+ * Copyright (c) 2014 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.sip.container.was.servlet31;\n+\n+import com.ibm.websphere.servlet31.request.IRequest31;\n+import com.ibm.websphere.servlet31.response.IResponse31;\n+import com.ibm.ws.sip.container.was.message.SipMessage;\n+\n+/**\n+ * A version of SIP message that implements servlet31 request\\response.\n+ * Only used to add the inheritance without any actual content.\n+ * @author sagia", "originalCommit": "1acce86d8c6fc0661df496b39a23f6ff13f650fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAyNTU3OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15102#discussion_r538025579", "bodyText": "Should remove reference to @author", "author": "jhanders34", "createdAt": "2020-12-08T04:27:39Z", "path": "dev/com.ibm.ws.sipcontainer.servlet.3.1/src/com/ibm/ws/sip/container/was/servlet31/SipMessageFactory31.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*******************************************************************************\n+ * Copyright (c) 2014 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.sip.container.was.servlet31;\n+\n+import org.osgi.service.component.ComponentContext;\n+import org.osgi.service.component.annotations.Component;\n+import org.osgi.service.component.annotations.ConfigurationPolicy;\n+\n+import com.ibm.ws.sip.container.was.message.SipMessage;\n+import com.ibm.ws.sip.container.was.message.SipMessageFactory;\n+\n+/**\n+ * Service that generate servlets31 sip messages.\n+ * The service is used in the case that servlets31 feature is enabled in addition to the sip container.\n+ * It will replace the SipMessageFactory and will use the servlets31 message.\n+ * @author sagia", "originalCommit": "1acce86d8c6fc0661df496b39a23f6ff13f650fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAyNTYyNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15102#discussion_r538025625", "bodyText": "Should remove reference to @author", "author": "jhanders34", "createdAt": "2020-12-08T04:27:47Z", "path": "dev/com.ibm.ws.sipcontainer.servlet.3.1/src/com/ibm/ws/sip/container/was/servlet31/converged/SessionContextRegistryConverged31Impl.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*******************************************************************************\n+ * Copyright (c) 2014 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.sip.container.was.servlet31.converged;\n+\n+import com.ibm.ws.session.SessionApplicationParameters;\n+import com.ibm.ws.session.SessionManagerConfig;\n+import com.ibm.ws.webcontainer.httpsession.SessionManager;\n+import com.ibm.ws.webcontainer.session.IHttpSessionContext;\n+import com.ibm.wsspi.sip.converge.ConvergedHttpSessionContextImpl;\n+import com.ibm.wsspi.sip.converge.SessionContextRegistryConvergedImpl;\n+\n+/**\n+ * Extends the SessionContextRegistryConvergedImpl and providing ConvergedApplication (SIP and HTTP)\n+ * ability.\n+ * Support for Servlet 3.1 envirnoment.\n+ * \n+ * @author anatf", "originalCommit": "1acce86d8c6fc0661df496b39a23f6ff13f650fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "694c1657f0bebfd0a50dea3f2dbcd2718485f9e5", "url": "https://github.com/OpenLiberty/open-liberty/commit/694c1657f0bebfd0a50dea3f2dbcd2718485f9e5", "message": "Move the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove SIP security and monitor features to OL\n\ndd the API file\n\nMove SIP security and monitor features to OL\n\nFix the javadoc zip file name\n\nRename the SIP security feature\n\nCode review fixes", "committedDate": "2020-12-08T14:36:11Z", "type": "forcePushed"}, {"oid": "46d08c4ec097d5ac9abf93eeeccdc201558a9d53", "url": "https://github.com/OpenLiberty/open-liberty/commit/46d08c4ec097d5ac9abf93eeeccdc201558a9d53", "message": "Move the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove SIP security and monitor features to OL\n\ndd the API file\n\nMove SIP security and monitor features to OL\n\nFix the javadoc zip file name\n\nRename the SIP security feature\n\nCode review fixes\n\nExpose the com.ibm.wsspi.security.tai.extension package", "committedDate": "2020-12-09T22:32:41Z", "type": "commit"}, {"oid": "46d08c4ec097d5ac9abf93eeeccdc201558a9d53", "url": "https://github.com/OpenLiberty/open-liberty/commit/46d08c4ec097d5ac9abf93eeeccdc201558a9d53", "message": "Move the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove the SIP Container security and monitor features to OL\n\nMove SIP security and monitor features to OL\n\ndd the API file\n\nMove SIP security and monitor features to OL\n\nFix the javadoc zip file name\n\nRename the SIP security feature\n\nCode review fixes\n\nExpose the com.ibm.wsspi.security.tai.extension package", "committedDate": "2020-12-09T22:32:41Z", "type": "forcePushed"}]}