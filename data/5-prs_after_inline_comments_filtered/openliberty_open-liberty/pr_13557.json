{"pr_number": 13557, "pr_title": "Enable JMSProducer and JMSConsumer tests", "pr_createdAt": "2020-08-18T21:49:56Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/13557", "timeline": [{"oid": "12db8a02399383412fc03403a29004ee75652669", "url": "https://github.com/OpenLiberty/open-liberty/commit/12db8a02399383412fc03403a29004ee75652669", "message": "Enable JMSProducerTest_118071 and JMSProducerTest_118073.  Trim web.xml for enabled tests.  Some corrections to server configurations for enabled tests.", "committedDate": "2020-08-18T21:47:22Z", "type": "commit"}, {"oid": "33fccae0fe0a2b9ff3ea76b293ab1921a1f29853", "url": "https://github.com/OpenLiberty/open-liberty/commit/33fccae0fe0a2b9ff3ea76b293ab1921a1f29853", "message": "Enable JMSConsumerTest_118076 and JMSConsumerTest_118077.", "committedDate": "2020-08-19T22:24:58Z", "type": "commit"}, {"oid": "340e9f334572c451f8414e75a6abd978dc01b5aa", "url": "https://github.com/OpenLiberty/open-liberty/commit/340e9f334572c451f8414e75a6abd978dc01b5aa", "message": "Enablement of JMS20 tests except MDB tests.", "committedDate": "2020-09-12T01:06:29Z", "type": "commit"}, {"oid": "af2635e31957be09febf1ff60b5a5f9d9a5e84dd", "url": "https://github.com/OpenLiberty/open-liberty/commit/af2635e31957be09febf1ff60b5a5f9d9a5e84dd", "message": "Merge branch 'integration' into jms-port-fat-2", "committedDate": "2020-09-14T14:14:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgyNTYwMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13557#discussion_r488825600", "bodyText": "\"Outgoing\"?", "author": "joe-chacko", "createdAt": "2020-09-15T17:07:40Z", "path": "dev/com.ibm.ws.messaging.open_jms20_fat/test-applications/JMSProducer/src/jmsproducer/web/JMSProducerServlet.java", "diffHunk": "@@ -3702,52 +3729,85 @@ public void testSetTimeToLive_B_SecOff(\n         }\n     }\n \n+    private void displayProducer(JMSProducer jmsProducer, String tag) {\n+        System.out.println(tag + \": JMSProducer [ \" + jmsProducer + \" ]\");\n+    }\n+\n+    private void displayMessage(Message message, String tag) throws JMSException {\n+        System.out.println(tag + \": Message [ \" + message + \" ]\");\n+    }\n+\n     public void testSetTimeToLive_TCP_SecOff(\n         HttpServletRequest request, HttpServletResponse response) throws Throwable {\n \n+        String methodName = \"testSetTimeToLive_TCP_SecOff\";\n+\n         JMSContext jmsContextQCFTCP = qcfTCP.createContext();\n         emptyQueue(qcfTCP, queue1);\n         JMSConsumer jmsConsumer = jmsContextQCFTCP.createConsumer(queue1);\n         JMSProducer jmsProducer = jmsContextQCFTCP.createProducer();\n \n-        TextMessage msgOut = jmsContextQCFTCP.createTextMessage();\n+        // jmsProducer.setDeliveryMode(DeliveryMode.NON_PERSISTENT); // Doesn't change the test result.\n \n-        long defaultTimeToLive = jmsProducer.getTimeToLive();\n-        System.out.println(\"Default time to live [ \" + defaultTimeToLive + \" ]\");\n+        TextMessage msgOut = jmsContextQCFTCP.createTextMessage();\n+        displayMessage(msgOut, methodName + \" Ougoing Message\");", "originalCommit": "af2635e31957be09febf1ff60b5a5f9d9a5e84dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTU0NTc5Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13557#discussion_r489545797", "bodyText": "Ah, yeah, that should be \"Outgoing\"; fortunately, that is just diagnostic output and not impacting the test result.  I'll fix it in a future PR.", "author": "tbitonti", "createdAt": "2020-09-16T15:52:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgyNTYwMA=="}], "type": "inlineReview"}]}