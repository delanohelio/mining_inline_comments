{"pr_number": 11417, "pr_title": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "pr_createdAt": "2020-03-23T14:27:26Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/11417", "timeline": [{"oid": "97098056643b741d1d87205a14d4cb711af2e4d3", "url": "https://github.com/OpenLiberty/open-liberty/commit/97098056643b741d1d87205a14d4cb711af2e4d3", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-02T15:51:16Z", "type": "forcePushed"}, {"oid": "043811767c02d5379856a9cf949e0b52958e61e4", "url": "https://github.com/OpenLiberty/open-liberty/commit/043811767c02d5379856a9cf949e0b52958e61e4", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-02T17:37:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU3OTgzNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11417#discussion_r402579836", "bodyText": "Not a fan of this or the getListenPort() method names. I would rather they were getLdapPort() and getLdapsPort().\nNot sure if you can rename getListenPort() without making changes in WS-CD-Open. If WS-CD-Open calls getListenPort(), deprecate that method and create these two others and then replace any calls in Open Liberty. If WS-CD-Open doesn't call this method, then you can remove the method entirely.", "author": "jvanhill", "createdAt": "2020-04-02T20:06:24Z", "path": "dev/com.ibm.ws.com.unboundid/src/com/ibm/ws/com/unboundid/InMemoryLDAPServer.java", "diffHunk": "@@ -292,7 +294,7 @@ public int importFromLDIF(boolean clear, String path) throws LDAPException {\n      * @param listenerName - The name of the listener for which to retrieve the listen port. It may be null in order to obtain the listen port for the first active listener\n      * @return The configured listen port for the specified listener, or -1 if there is no such listener or the listener is not active.\n      */\n-    public int getListenPort(String listenerName) {\n-        return ds.getListenPort(listenerName);\n+    public int getSecureListenPort() {", "originalCommit": "043811767c02d5379856a9cf949e0b52958e61e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU4MDkyMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11417#discussion_r402580920", "bodyText": "Rename this to ldapServer.", "author": "jvanhill", "createdAt": "2020-04-02T20:08:34Z", "path": "dev/com.ibm.ws.security.wim.adapter.ldap_fat/fat/src/com/ibm/ws/security/wim/adapter/ldap/fat/URAPIs_TDSLDAP_SSLTest.java", "diffHunk": "@@ -50,20 +53,68 @@\n     /** Test rule for testing for expected exceptions. */\n     @Rule\n     public ExpectedException expectedException = ExpectedException.none();\n-\n-    //private final LeakedPasswordChecker passwordChecker = new LeakedPasswordChecker(server);\n+    private static InMemoryTDSLDAPServer ds;", "originalCommit": "043811767c02d5379856a9cf949e0b52958e61e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "925a0063b34aa475694378fdc0da7e326c5e28cc", "url": "https://github.com/OpenLiberty/open-liberty/commit/925a0063b34aa475694378fdc0da7e326c5e28cc", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-03T14:38:32Z", "type": "forcePushed"}, {"oid": "a88b4c2e8fe0414e92e9792473d26883bed46ad6", "url": "https://github.com/OpenLiberty/open-liberty/commit/a88b4c2e8fe0414e92e9792473d26883bed46ad6", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-03T14:55:46Z", "type": "forcePushed"}, {"oid": "07162f0c9e51d4b16c78ecf451c09cbb45b3b63b", "url": "https://github.com/OpenLiberty/open-liberty/commit/07162f0c9e51d4b16c78ecf451c09cbb45b3b63b", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-03T17:01:03Z", "type": "forcePushed"}, {"oid": "0448873f928aa64f95124703ec1abef2c1b9263a", "url": "https://github.com/OpenLiberty/open-liberty/commit/0448873f928aa64f95124703ec1abef2c1b9263a", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-03T17:06:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzIwNTk5Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11417#discussion_r403205992", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Get the port the server is listening to.\n          \n          \n            \n                 * Get the port for the insecure LDAP port.", "author": "jvanhill", "createdAt": "2020-04-03T18:06:39Z", "path": "dev/com.ibm.ws.com.unboundid/src/com/ibm/ws/com/unboundid/InMemoryLDAPServer.java", "diffHunk": "@@ -211,8 +213,26 @@ public InetAddress getListenAddress() {\n      *\n      * @return the port this directory server is listening to\n      */\n+    @Deprecated\n     public int getListenPort() {\n-        return ds.getListenPort(\"LDAP\");\n+        return ds.getListenPort(listenerName);\n+    }\n+\n+    /**\n+     * Get the port the server is listening to.", "originalCommit": "0448873f928aa64f95124703ec1abef2c1b9263a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzIwNjE3Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11417#discussion_r403206177", "bodyText": "LDAP port", "author": "jvanhill", "createdAt": "2020-04-03T18:06:52Z", "path": "dev/com.ibm.ws.com.unboundid/src/com/ibm/ws/com/unboundid/InMemoryLDAPServer.java", "diffHunk": "@@ -211,8 +213,26 @@ public InetAddress getListenAddress() {\n      *\n      * @return the port this directory server is listening to\n      */\n+    @Deprecated\n     public int getListenPort() {\n-        return ds.getListenPort(\"LDAP\");\n+        return ds.getListenPort(listenerName);\n+    }\n+\n+    /**\n+     * Get the port the server is listening to.\n+     *\n+     * @return the port this directory server is listening to", "originalCommit": "0448873f928aa64f95124703ec1abef2c1b9263a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzIwNjYzNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11417#discussion_r403206636", "bodyText": "Update this javadoc:\nGet the secure LDAPS port.\n@return LDAPS port", "author": "jvanhill", "createdAt": "2020-04-03T18:07:24Z", "path": "dev/com.ibm.ws.com.unboundid/src/com/ibm/ws/com/unboundid/InMemoryLDAPServer.java", "diffHunk": "@@ -211,8 +213,26 @@ public InetAddress getListenAddress() {\n      *\n      * @return the port this directory server is listening to\n      */\n+    @Deprecated\n     public int getListenPort() {\n-        return ds.getListenPort(\"LDAP\");\n+        return ds.getListenPort(listenerName);\n+    }\n+\n+    /**\n+     * Get the port the server is listening to.\n+     *\n+     * @return the port this directory server is listening to\n+     */\n+    public int getLdapPort() {\n+        return ds.getListenPort(listenerName);\n+    }\n+\n+    /**", "originalCommit": "0448873f928aa64f95124703ec1abef2c1b9263a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzIwNzI4MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11417#discussion_r403207281", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * This InMemoryTDSLDAPServer is currently using a null schema to host the data, this could be replaced in the future with a robust activeDirectory schema design\n          \n          \n            \n             * This InMemoryTDSLDAPServer is currently using a null schema to host the data, this could be replaced in the future with a robust TDS schema design", "author": "jvanhill", "createdAt": "2020-04-03T18:08:11Z", "path": "dev/com.ibm.ws.com.unboundid/src/com/ibm/ws/com/unboundid/InMemoryTDSLDAPServer.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package com.ibm.ws.com.unboundid;\n+\n+import com.ibm.websphere.simplicity.log.Log;\n+\n+/**\n+ * An in memory UnboundID LDAP server designed to contain the same data as the Tivoli Directory Server instance of the ApacheDS stand-alone LDAP Servers.\n+ *\n+ * This InMemoryTDSLDAPServer is currently using a null schema to host the data, this could be replaced in the future with a robust activeDirectory schema design", "originalCommit": "0448873f928aa64f95124703ec1abef2c1b9263a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzIwODcwMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11417#discussion_r403208701", "bodyText": "Update copyright above.", "author": "jvanhill", "createdAt": "2020-04-03T18:09:56Z", "path": "dev/com.ibm.ws.security.wim.adapter.ldap_fat/fat/src/com/ibm/ws/security/wim/adapter/ldap/fat/URAPIs_TDSLDAP_SSLTest.java", "diffHunk": "@@ -50,20 +53,68 @@\n     /** Test rule for testing for expected exceptions. */\n     @Rule\n     public ExpectedException expectedException = ExpectedException.none();\n-\n-    //private final LeakedPasswordChecker passwordChecker = new LeakedPasswordChecker(server);\n+    private static InMemoryTDSLDAPServer ldapServer;", "originalCommit": "0448873f928aa64f95124703ec1abef2c1b9263a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c4c4da63502dda0e74100b6779d695da04587308", "url": "https://github.com/OpenLiberty/open-liberty/commit/c4c4da63502dda0e74100b6779d695da04587308", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-03T19:57:33Z", "type": "forcePushed"}, {"oid": "ab8a3233ae6c86a5f3b79face99a3f79e463c32f", "url": "https://github.com/OpenLiberty/open-liberty/commit/ab8a3233ae6c86a5f3b79face99a3f79e463c32f", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-03T20:28:16Z", "type": "forcePushed"}, {"oid": "2fb171be0be324f1ff45a079d707116b9c6cb99f", "url": "https://github.com/OpenLiberty/open-liberty/commit/2fb171be0be324f1ff45a079d707116b9c6cb99f", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-06T18:47:58Z", "type": "forcePushed"}, {"oid": "412f6cb4bd33adf8243c2de182ba08df05cb23d5", "url": "https://github.com/OpenLiberty/open-liberty/commit/412f6cb4bd33adf8243c2de182ba08df05cb23d5", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-06T20:31:51Z", "type": "commit"}, {"oid": "412f6cb4bd33adf8243c2de182ba08df05cb23d5", "url": "https://github.com/OpenLiberty/open-liberty/commit/412f6cb4bd33adf8243c2de182ba08df05cb23d5", "message": "Implement unboundid server for InMemoryTDSLDAPServer SSL test", "committedDate": "2020-04-06T20:31:51Z", "type": "forcePushed"}]}