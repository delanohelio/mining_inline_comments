{"pr_number": 14963, "pr_title": "Runtime updates for jaxws-2.3", "pr_createdAt": "2020-11-13T16:17:17Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14963", "timeline": [{"oid": "7331953aa59a9edd7eed6aa79ef2ca5bd41c3a44", "url": "https://github.com/OpenLiberty/open-liberty/commit/7331953aa59a9edd7eed6aa79ef2ca5bd41c3a44", "message": "Undo changes to jaxws.common by bad merge", "committedDate": "2020-11-13T16:32:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzA2NTQ5Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r523065492", "bodyText": "Because these tests use jaxwstest-2.x feature files to override what API's are exported to the APP class path, I've had to break the tests into different versions. I had a problem building them after I undid some tests changes, and for the sake of time I've just stashed them locally to revisit.", "author": "neuwerk", "createdAt": "2020-11-13T16:34:33Z", "path": "dev/com.ibm.ws.jaxws.2.2.webcontainer_fat/fat/src/com/ibm/ws/jaxws/fat/FATSuite.java", "diffHunk": "@@ -33,7 +33,9 @@\n                 CXFJMXSupportTest.class,\n                 WebServiceMonitorTest.class,\n                 HttpConduitPropertiesTest.class,\n+                //HttpConduitPropertiesTest23.class,", "originalCommit": "7331953aa59a9edd7eed6aa79ef2ca5bd41c3a44", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "35259487ef04b4431024027567317336110c630f", "url": "https://github.com/OpenLiberty/open-liberty/commit/35259487ef04b4431024027567317336110c630f", "message": "jaxws-2.3 runtime and FAT updates", "committedDate": "2020-11-20T02:05:25Z", "type": "forcePushed"}, {"oid": "f16e9b5c5e2b36848268264ad7104e673e34850e", "url": "https://github.com/OpenLiberty/open-liberty/commit/f16e9b5c5e2b36848268264ad7104e673e34850e", "message": "jaxws-2.3 runtime and FAT updates", "committedDate": "2020-11-20T14:14:37Z", "type": "forcePushed"}, {"oid": "5a3991f7a1573d2eb934ef381a59321da8d703bc", "url": "https://github.com/OpenLiberty/open-liberty/commit/5a3991f7a1573d2eb934ef381a59321da8d703bc", "message": "jaxws-2.3 runtime and FAT updates\n\nmerge fixing", "committedDate": "2020-11-20T15:38:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg4NjQ1Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r527886453", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright (c) 2019 IBM Corporation and others.\n          \n          \n            \n             * Copyright (c) 2020 IBM Corporation and others.", "author": "andymc12", "createdAt": "2020-11-20T18:12:49Z", "path": "dev/com.ibm.ws.jaxws.2.2.webcontainer_fat/fat/src/com/ibm/ws/jaxws/fat/EJBServiceRefBndTest23.java", "diffHunk": "@@ -0,0 +1,146 @@\n+/*******************************************************************************\n+ * Copyright (c) 2019 IBM Corporation and others.", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0MjQ1OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535342458", "bodyText": "Refactored and deleted this file", "author": "neuwerk", "createdAt": "2020-12-03T15:38:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg4NjQ1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg4NzY0Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r527887642", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright (c) 2019 IBM Corporation and others.\n          \n          \n            \n             * Copyright (c) 2020 IBM Corporation and others.", "author": "andymc12", "createdAt": "2020-11-20T18:15:00Z", "path": "dev/com.ibm.ws.jaxws.2.2.webcontainer_fat/fat/src/com/ibm/ws/jaxws/fat/HttpConduitPropertiesTest23.java", "diffHunk": "@@ -0,0 +1,426 @@\n+/*******************************************************************************\n+ * Copyright (c) 2019 IBM Corporation and others.", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0Mjk2OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535342969", "bodyText": "Refactored and deleted this file", "author": "neuwerk", "createdAt": "2020-12-03T15:39:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg4NzY0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyNjg0OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528026848", "bodyText": "Could you add //Liberty change comments here to distinguish the code that is specific to Liberty vs the rest of CXF code?", "author": "andymc12", "createdAt": "2020-11-20T23:42:06Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/ConduitConfigurer.java", "diffHunk": "@@ -0,0 +1,208 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.ibm.ws.jaxws;\n+\n+import java.util.Dictionary;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+import java.util.concurrent.CopyOnWriteArrayList;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import org.apache.cxf.Bus;\n+import org.apache.cxf.transport.http.HTTPConduit;\n+import org.apache.cxf.transport.http.HTTPConduitConfigurer;\n+import org.osgi.framework.BundleContext;\n+import org.osgi.service.cm.ConfigurationException;\n+\n+import com.ibm.websphere.ras.Tr;\n+import com.ibm.websphere.ras.TraceComponent;\n+\n+/**\n+ *  Allows us to Apply our HTTPConduit configuration on a HTTPConduit via a ManagedService added to the Bus\n+ *  Mostly borrowed from\n+ *  org.apache.cxf.transport.http.asyncclient.Activator\n+ *  org.apache.cxf.transport.http.osgi.HttpConduitConfigApplier\n+ */\n+public class ConduitConfigurer extends ConduitConfigurerService  implements HTTPConduitConfigurer {", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyNjk4Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528026987", "bodyText": "Same comment here wrt //Liberty change", "author": "andymc12", "createdAt": "2020-11-20T23:42:40Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/ConduitConfigurerService.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.ibm.ws.jaxws;\n+\n+import java.util.Dictionary;\n+import java.util.Enumeration;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.apache.cxf.Bus;\n+import org.apache.cxf.transport.http.asyncclient.AsyncHTTPConduitFactory;\n+import org.osgi.framework.BundleContext;\n+import org.osgi.framework.ServiceReference;\n+import org.osgi.service.cm.ConfigurationException;\n+import org.osgi.service.cm.ManagedService;\n+import org.osgi.util.tracker.ServiceTracker;\n+\n+import com.ibm.websphere.ras.Tr;\n+import com.ibm.websphere.ras.TraceComponent;\n+\n+/**\n+ *  Lifted from org.apache.cxf.transport.http.asyncclient.Activator\n+ */\n+public class ConduitConfigurerService extends ServiceTracker<Bus, Bus> implements ManagedService {", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyNzMxNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528027316", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright (c) 2012 IBM Corporation and others.\n          \n          \n            \n             * Copyright (c) 2019, 2020 IBM Corporation and others.", "author": "andymc12", "createdAt": "2020-11-20T23:44:00Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/bus/LibertyApplicationBusFactory.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*******************************************************************************\n- * Copyright (c) 2019 IBM Corporation and others.\n+ * Copyright (c) 2012 IBM Corporation and others.", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyNzcyMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528027722", "bodyText": "Remove these lines?", "author": "andymc12", "createdAt": "2020-11-20T23:45:31Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/client/LibertyCustomizeBindingOutInterceptor.java", "diffHunk": "@@ -244,26 +183,95 @@ protected void customizePortAddress(Message message) {\n     }\n \n     private void customizeHttpConduitProperties(Message message, Bus bus, ConfigProperties configProps) {\n-        Conduit conduit = message.getExchange().getConduit(message);\n-        HTTPConduitConfigurer conduitConfigurer = bus.getExtension(HTTPConduitConfigurer.class);\n+        HTTPConduit conduit = (HTTPConduit) message.getExchange().getConduit(message);\n+        // applyClientPolicies(configProps.getProperties(), conduit);\n+\n+        //Conduit conduit = message.getExchange().getConduit(message);", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyODM3Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528028377", "bodyText": "Is this just added for auto-trace injection?  I don't think it's necessary unless you also want to add explicit trace statements.", "author": "andymc12", "createdAt": "2020-11-20T23:48:38Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/metadata/JaxWsModuleMetaData.java", "diffHunk": "@@ -27,6 +30,8 @@\n  * JaxWsModuleMetaData holds all the runtime data for the webservice engine, e.g. Container, classloader and etc.\n  */\n public class JaxWsModuleMetaData {\n+    \n+    private static final TraceComponent tc = Tr.register( JaxWsModuleMetaData.class);", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyODUzOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528028539", "bodyText": "Same as above - you can probably remove this unless you want to add explicit trace statements.", "author": "andymc12", "createdAt": "2020-11-20T23:49:16Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/metadata/JaxWsServerMetaData.java", "diffHunk": "@@ -15,11 +15,15 @@\n import java.util.Map.Entry;\n \n import com.ibm.websphere.csi.J2EEName;\n+import com.ibm.websphere.ras.Tr;\n+import com.ibm.websphere.ras.TraceComponent;\n import com.ibm.ws.jaxws.bus.LibertyApplicationBus;\n import com.ibm.ws.jaxws.bus.LibertyApplicationBusFactory;\n \n public class JaxWsServerMetaData {\n \n+    private static final TraceComponent tc = Tr.register( JaxWsServerMetaData.class);", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyODY5NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528028694", "bodyText": "Remove this line too?", "author": "andymc12", "createdAt": "2020-11-20T23:49:47Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/policy/DynamicAttachmentProvider.java", "diffHunk": "@@ -110,7 +110,8 @@ public Policy getEffectivePolicy(BindingMessageInfo bmi) {\n     }\n \n     // @TJJ removed overridde annotation", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyODk1Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528028953", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Policy getEffectivePolicy(BindingFaultInfo bfi, Message M) {\n          \n          \n            \n                public Policy getEffectivePolicy(BindingFaultInfo bfi, Message m) {\n          \n      \n    \n    \n  \n\nsuggest lowercase for parameter variables", "author": "andymc12", "createdAt": "2020-11-20T23:50:51Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/policy/DynamicAttachmentProvider.java", "diffHunk": "@@ -69,8 +69,8 @@ public String getLocation() {\n         return location;\n     }\n \n-    // @TJJ removed overridde annotation\n-    public Policy getEffectivePolicy(BindingFaultInfo bfi) {\n+    @Override\n+    public Policy getEffectivePolicy(BindingFaultInfo bfi, Message M) {", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyOTAwMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528029002", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Policy getEffectivePolicy(BindingMessageInfo bmi, Message M) {\n          \n          \n            \n                public Policy getEffectivePolicy(BindingMessageInfo bmi, Message m) {", "author": "andymc12", "createdAt": "2020-11-20T23:51:01Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/policy/DynamicAttachmentProvider.java", "diffHunk": "@@ -89,8 +89,8 @@ public Policy getEffectivePolicy(BindingFaultInfo bfi) {\n         return p;\n     }\n \n-    // @TJJ removed overridde annotation\n-    public Policy getEffectivePolicy(BindingMessageInfo bmi) {\n+    @Override\n+    public Policy getEffectivePolicy(BindingMessageInfo bmi, Message M) {", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyOTA0OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528029049", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Policy getEffectivePolicy(BindingOperationInfo boi, Message M) {\n          \n          \n            \n                public Policy getEffectivePolicy(BindingOperationInfo boi, Message m) {", "author": "andymc12", "createdAt": "2020-11-20T23:51:09Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/policy/DynamicAttachmentProvider.java", "diffHunk": "@@ -110,7 +110,8 @@ public Policy getEffectivePolicy(BindingMessageInfo bmi) {\n     }\n \n     // @TJJ removed overridde annotation\n-    public Policy getEffectivePolicy(BindingOperationInfo boi) {\n+    @Override\n+    public Policy getEffectivePolicy(BindingOperationInfo boi, Message M) {", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyOTA3NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528029074", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Policy getEffectivePolicy(EndpointInfo ei, Message M) {\n          \n          \n            \n                public Policy getEffectivePolicy(EndpointInfo ei, Message m) {", "author": "andymc12", "createdAt": "2020-11-20T23:51:18Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/policy/DynamicAttachmentProvider.java", "diffHunk": "@@ -129,8 +130,8 @@ public Policy getEffectivePolicy(BindingOperationInfo boi) {\n         return p;\n     }\n \n-    // @TJJ removed overridde annotation\n-    public Policy getEffectivePolicy(EndpointInfo ei) {\n+    @Override\n+    public Policy getEffectivePolicy(EndpointInfo ei, Message M) {", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyOTEwNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r528029107", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Policy getEffectivePolicy(ServiceInfo si, Message M) {\n          \n          \n            \n                public Policy getEffectivePolicy(ServiceInfo si, Message m) {", "author": "andymc12", "createdAt": "2020-11-20T23:51:26Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/policy/DynamicAttachmentProvider.java", "diffHunk": "@@ -149,8 +150,8 @@ public Policy getEffectivePolicy(EndpointInfo ei) {\n         return p;\n     }\n \n-    // @TJJ removed overridde annotation\n-    public Policy getEffectivePolicy(ServiceInfo si) {\n+    @Override\n+    public Policy getEffectivePolicy(ServiceInfo si, Message M) {", "originalCommit": "69827679e6e9a49d97b5b5f042d0f5826cbb4878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d62924d7aabc0ccc847e83f0fb83f16187405923", "url": "https://github.com/OpenLiberty/open-liberty/commit/d62924d7aabc0ccc847e83f0fb83f16187405923", "message": "add wsat\n\njaxws-2.3 runtime and FAT updates\n\nmerge fixing\n\nadditional jaxws-2.3 code clean up changes\n\nAdd jaxws-2.3 changes for code review and more test fixes", "committedDate": "2020-11-23T09:20:09Z", "type": "forcePushed"}, {"oid": "78a64c9e5b5d62deb5cc4f6b5082c628e86f1134", "url": "https://github.com/OpenLiberty/open-liberty/commit/78a64c9e5b5d62deb5cc4f6b5082c628e86f1134", "message": "Update CXF versions to match CXF Core to fix failures in multiple jaxrs and jaxws buckets", "committedDate": "2020-11-24T21:12:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDAyMzc5MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r530023791", "bodyText": "@TJJ still here", "author": "WhiteCat22", "createdAt": "2020-11-25T00:07:34Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/policy/DynamicAttachmentProvider.java", "diffHunk": "@@ -110,7 +110,8 @@ public Policy getEffectivePolicy(BindingMessageInfo bmi) {\n     }\n \n     // @TJJ removed overridde annotation", "originalCommit": "78a64c9e5b5d62deb5cc4f6b5082c628e86f1134", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDAzODI4Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r530038286", "bodyText": "Nice catch!", "author": "neuwerk", "createdAt": "2020-11-25T00:52:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDAyMzc5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDAyNDYwNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r530024606", "bodyText": "should be 2019, 2020\nwe are supposed to preserve the original date", "author": "WhiteCat22", "createdAt": "2020-11-25T00:10:09Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/threading/LibertyJaxWsAutomaticWorkQueueImpl.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*******************************************************************************\n- * Copyright (c) 2019 IBM Corporation and others.\n+ * Copyright (c) 2020 IBM Corporation and others.", "originalCommit": "78a64c9e5b5d62deb5cc4f6b5082c628e86f1134", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "33192c7927bae6e5516a9ccb59bbd5edbdff6c9d", "url": "https://github.com/OpenLiberty/open-liberty/commit/33192c7927bae6e5516a9ccb59bbd5edbdff6c9d", "message": "More code review comments\n\nremove wrong version change\n\nremove wrong version change", "committedDate": "2020-11-25T16:01:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDU2MDIxNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r530560216", "bodyText": "Copyright year adjustment", "author": "BerksanAtes", "createdAt": "2020-11-25T18:06:56Z", "path": "dev/com.ibm.ws.jaxws.2.3.webcontainer/src/com/ibm/ws/jaxws23/webcontainer/LibertyJaxWsServlet.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*******************************************************************************\n- * Copyright (c) 2019 IBM Corporation and others.\n+ * Copyright (c) 2012 IBM Corporation and others.", "originalCommit": "33192c7927bae6e5516a9ccb59bbd5edbdff6c9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM1MTc2MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535351760", "bodyText": "Removed webcontainer bundle", "author": "neuwerk", "createdAt": "2020-12-03T15:47:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDU2MDIxNg=="}], "type": "inlineReview"}, {"oid": "c612ac854cf268b9805f607807d2963c5b51e676", "url": "https://github.com/OpenLiberty/open-liberty/commit/c612ac854cf268b9805f607807d2963c5b51e676", "message": "Update CXF versions to match CXF Core to fix failures in multiple jaxrs and jaxws buckets\n\nMore code review comments\n\nMore code review comments\n\nremove wrong version change\n\nremove wrong version change\n\nMore code review changes", "committedDate": "2020-11-25T20:58:08Z", "type": "forcePushed"}, {"oid": "432992c3adcb846c4ae54cef461c963d615866c3", "url": "https://github.com/OpenLiberty/open-liberty/commit/432992c3adcb846c4ae54cef461c963d615866c3", "message": "Update CXF versions to match CXF Core to fix failures in multiple jaxrs and jaxws buckets\n\nMore code review comments\n\nMore code review comments\n\nremove wrong version change\n\nremove wrong version change\n\nMore code review changes", "committedDate": "2020-11-28T21:25:07Z", "type": "forcePushed"}, {"oid": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "url": "https://github.com/OpenLiberty/open-liberty/commit/a6acc20fd1ba794ff76daa387c092f02af53f57d", "message": "Update CXF versions to match CXF Core to fix failures in multiple jaxrs and jaxws buckets\n\nMore code review comments\n\nMore code review comments\n\nremove wrong version change\n\nremove wrong version change\n\nMore code review changes\n\nUdno bnd.overrides typo\n\nDiable instrumentation to prevent unncessary FFDCs from being generating by custom JAX-RS execptions", "committedDate": "2020-11-30T15:49:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzMDQ3Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533030472", "bodyText": "So why do you want to have false?", "author": "jhanders34", "createdAt": "2020-12-01T02:23:48Z", "path": "dev/com.ibm.ws.jaxws.2.2.webcontainer_fat/fat/src/com/ibm/ws/jaxws/fat/EJBServiceRefBndTest.java", "diffHunk": "@@ -87,7 +94,10 @@ public void tearDown() throws Exception {\n         }\n \n         if (server.isStarted()) {\n-            server.stopServer();\n+\n+            // Since the individual tests are starting the server due to the config change\n+            // You must remove the false boolean in order to get logs for debuging failures\n+            server.stopServer(false);", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQzMDY0Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533430646", "bodyText": "That's fair, I was just returning the test to how it was written originally but why it was set to false in the first place doesn't make sense. I'll change it.", "author": "neuwerk", "createdAt": "2020-12-01T14:04:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzMDQ3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzMTEwOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533031109", "bodyText": "Why not adding jaxwstest-2.3?  Wouldn't that make combining the tests into a single test like mentioned above possible?", "author": "jhanders34", "createdAt": "2020-12-01T02:25:51Z", "path": "dev/com.ibm.ws.jaxws.2.2.webcontainer_fat/fat/src/com/ibm/ws/jaxws/fat/FATSuite.java", "diffHunk": "@@ -43,6 +48,6 @@\n })\n public class FATSuite {\n     @ClassRule\n-    public static RepeatTests r = RepeatTests.withoutModification().andWith(new FeatureReplacementAction().addFeature(\"jaxws-2.3\").removeFeature(\"jaxws-2.2\").removeFeature(\"jsp-2.2\").withID(\"jaxws-2.3\"));\n+    public static RepeatTests r = RepeatTests.withoutModification().andWith(new FeatureReplacementAction().addFeature(\"jaxws-2.3\").removeFeature(\"jaxws-2.2\").removeFeature(\"jsp-2.2\").removeFeature(\"servlet-3.1\").removeFeature(\"jaxwstest-2.2\").withID(\"jaxws-2.3\"));", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQzNzU1MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533437550", "bodyText": "Oh nice catch, I actually didn't intend to leave that removal here. That was a hold over from my initial attempt to keep both versions in one test. I actually hadn't thought of adding the jaxwstest-2.3 here, and maybe that would work? I guess it depends on when the config change described here actually occurs. The test is manually copying the test feature file jaxwstest-2.3.mf to the wlp\\lib directory in the @BeforeClass, method so if the feature is there at that point, I suppose it would work.", "author": "neuwerk", "createdAt": "2020-12-01T14:14:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzMTEwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU5MDI0NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533590245", "bodyText": "yeah I would expect you to add the 2.2 and 2.3 mf files during @BeforeClass and then remove them the same way you do now.", "author": "jhanders34", "createdAt": "2020-12-01T17:25:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzMTEwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzNzE4OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533037188", "bodyText": "Again same question about the com.ibm.ws instead of using existing cxf file.", "author": "jhanders34", "createdAt": "2020-12-01T02:45:11Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/JaxwsConduitConfigActivator.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/**", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQ4NTEyNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533485124", "bodyText": "There are several reasons I did this:\n\nI had to split the original CXF classes as written. The main reason for splitting the classes is that the the way in which the jaxws-2.x integration layer adds it's sub-classed or Open-Liberty specific extensions to CXF's Bus. That's using via Bus Extensions, and the way that our integration layer registers these extensions requires the extension to have a default constructor. I split the single CXF Activator class into the ConduitConfigurer and ConduitConfigurerService because of the need for a default constructor.\nCXF uses an OSGi ManagedService for the configuration application to it's Conduit object, and builds that MangedService with the bundle context via the bundle activation method. I created the JaxWsConduitConfigActivator for two functions: to serve as a declarative service and get the BundleContext needed for the ManagedService, but also to act as an ExtensionProvider so we can register the our ConduitConfigurer class as an HTTPConduitConfigurer extension on the Bus. Of the three classes this is probably the most functionally different from the original CXF class. I \"lifted\" the start() stop() methods, but it's role as an DS Component is unique to Open-Libertry\nThe CXF Activator class relies on another CXF BundleActivator class: the HTTPTransportsActivator class. The JAX-RS team disables that class from being turned on (see com.ibm.ws.cxf.transports.http.NoOpActivator), which means the original CXF class is unusable at runtime by our JAX-WS integration layer. This refactoring allows our integration layer to get around disabling the rest of CXF transport layer's bundle activation.\nThe HttpConduitConfigApplier is a private class, so opening it up to would be a change to CXF which I was trying to avoid. If a change to making the class public is fine, then I do think this class could be dropped entirely.", "author": "neuwerk", "createdAt": "2020-12-01T15:07:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzNzE4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMyNTkyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535325927", "bodyText": "Then my concern is that we do not have the open liberty copyright.  Should it have both the open liberty copyright and the CXF apache one?  Of course this applies to the other ones as well.", "author": "jhanders34", "createdAt": "2020-12-03T15:22:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzNzE4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzNzQ0MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533037440", "bodyText": "Again same questions.  Could we subclass instead of taking the whole file and bring it over?", "author": "jhanders34", "createdAt": "2020-12-01T02:46:03Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/JaxwsHttpConduitConfigApplier.java", "diffHunk": "@@ -0,0 +1,387 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.ibm.ws.jaxws;\n+\n+\n+import java.util.Dictionary;\n+import java.util.Enumeration;\n+import java.util.List;\n+import java.util.StringTokenizer;\n+\n+import org.apache.cxf.configuration.jsse.TLSClientParameters;\n+import org.apache.cxf.configuration.jsse.TLSParameterJaxBUtils;\n+import org.apache.cxf.configuration.security.AuthorizationPolicy;\n+import org.apache.cxf.configuration.security.CertStoreType;\n+import org.apache.cxf.configuration.security.CertificateConstraintsType;\n+import org.apache.cxf.configuration.security.CombinatorType;\n+import org.apache.cxf.configuration.security.DNConstraintsType;\n+import org.apache.cxf.configuration.security.FiltersType;\n+import org.apache.cxf.configuration.security.KeyManagersType;\n+import org.apache.cxf.configuration.security.KeyStoreType;\n+import org.apache.cxf.configuration.security.ProxyAuthorizationPolicy;\n+import org.apache.cxf.configuration.security.SecureRandomParameters;\n+import org.apache.cxf.configuration.security.TrustManagersType;\n+import org.apache.cxf.transport.http.HTTPConduit;\n+import org.apache.cxf.transport.http.auth.HttpAuthSupplier;\n+import org.apache.cxf.transports.http.configuration.ConnectionType;\n+import org.apache.cxf.transports.http.configuration.HTTPClientPolicy;\n+import org.apache.cxf.transports.http.configuration.ProxyServerType;\n+\n+import com.ibm.websphere.ras.Tr;\n+import com.ibm.websphere.ras.TraceComponent;\n+\n+/**\n+ * Applies configuration properties to a HTTPConduit\n+ * Lifted from org.apache.cxf.transport.http.osgi.HttpConduitConfigApplier\n+ */\n+public class JaxwsHttpConduitConfigApplier {", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzODAyOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533038028", "bodyText": "Why not just declare them final in the method signature?  Seems silly to make new variables if you can just have it final in the method parameters.", "author": "jhanders34", "createdAt": "2020-12-01T02:47:57Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/bus/LibertyApplicationBusFactory.java", "diffHunk": "@@ -103,9 +106,16 @@ public LibertyApplicationBus createBus(Map<Class<?>, Object> e, Map<String, Obje\n \n         Bus originalBus = getThreadDefaultBus(false);\n \n+        final Map<Class<?>, Object> e1 = e;", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzOTQwMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533039402", "bodyText": "Should this be done conditionally if there are SSL properties set like is done with JAXRS?", "author": "jhanders34", "createdAt": "2020-12-01T02:52:25Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/client/LibertyServiceImpl.java", "diffHunk": "@@ -158,6 +159,8 @@ protected void configureCustomizeBinding(Client client, QName portName) {\n \n         Set<ConfigProperties> configPropsSet = servicePropertiesMap.get(portName);\n         client.getOutInterceptors().add(new LibertyCustomizeBindingOutInterceptor(wsrInfo, securityConfigService, configPropsSet));\n+\n+        client.getOutInterceptors().add(new LibertyJaxWsClientSSLOutInterceptor(wsrInfo, securityConfigService, configPropsSet, client.getEndpoint().getEndpointInfo()));", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQ5MDg5Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533490897", "bodyText": "I hadn't considered this. I borrowed the SSLOutInterceptor model from the jaxrs-2.1 implementation, but I recycled the original SSL config code that we had in the LibertyCustomizeBindingOutInterceptor. That class has a conditional check that I moved over into the LibertyJaxWsClientSSLOutInterceptor, it's handleMessage() method won't do anything if there's no SSL Config, just like was being done in LibertyCustomizeBindingOutInterceptor. There might be a case for moving the check to registering the interceptor, rather than always enabling it...", "author": "neuwerk", "createdAt": "2020-12-01T15:15:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzOTQwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzYxNDE0Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533614146", "bodyText": "I forgot to put a link to the JAXRS way of doing it:  https://github.com/OpenLiberty/open-liberty/blob/integration/dev/com.ibm.ws.jaxrs.2.0.client/src/com/ibm/ws/jaxrs20/client/JAXRSClientImpl.java#L193", "author": "jhanders34", "createdAt": "2020-12-01T18:01:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzOTQwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzcwNzMwMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533707303", "bodyText": "So JAX-RS is using the Config to check whether on not to add the SSL Interceptor, which works on one level but the LibertyJaxWsClientSecurityOutInterceptor (I've renamed it like you suggested) does more than just SSL, like you rightly pointed out, so I do think we should always enable it. I could refactor the interceptor into multiple interceptors for handling SSL, Basic Auth, and WSDL redirects but I'm not convinced that's necessary.", "author": "neuwerk", "createdAt": "2020-12-01T20:40:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAzOTQwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA0MDM1Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533040353", "bodyText": "This added import is not used it would appear.", "author": "jhanders34", "createdAt": "2020-12-01T02:55:28Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/metadata/JaxWsModuleMetaData.java", "diffHunk": "@@ -16,7 +16,10 @@\n import java.util.Map;\n \n import com.ibm.websphere.csi.J2EEName;\n+import com.ibm.websphere.ras.Tr;\n+import com.ibm.websphere.ras.TraceComponent;\n import com.ibm.ws.container.service.app.deploy.ModuleInfo;\n+import com.ibm.ws.jaxws.client.injection.ServiceRefObjectFactory;", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA0MTcyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533041727", "bodyText": "Is the Endpoint guaranteed to be the same object for a particular endpoint?", "author": "jhanders34", "createdAt": "2020-12-01T02:59:50Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/support/LibertyJaxWsCompatibleWSDLGetInterceptor.java", "diffHunk": "@@ -77,110 +84,73 @@ public LibertyJaxWsCompatibleWSDLGetInterceptor(String implBeanClazzName, String\n \n     }\n \n-    // @TJJ removed the @Override\n-    public Document getDocument(Message message, String base, Map<String, String> params, String ctxUri, EndpointInfo endpointInfo) {\n-\n-        if (wsdlLoationExisted) {\n-            if (TraceComponent.isAnyTracingEnabled() && tc.isWarningEnabled()) {\n-                Tr.warning(tc, \"warn.no.wsdl.generate\", implBeanClazzName);\n-            }\n-            return noWSDLDoc;\n-        } else {\n-            if (TraceComponent.isAnyTracingEnabled() && tc.isWarningEnabled()) {\n-                Tr.warning(tc, \"error.no.wsdl.find\", new Object[] { wsdlLocation, implBeanClazzName });\n-            }\n-            return noWSDLLocationDoc;\n-        }\n-    }\n+\n+    private Document getDocument(WSDLGetUtils utils,\n+                                Message message, String base,\n+                                Map<String, String> params, String ctxUri) {\n+       // cannot have two wsdl's being generated for the same endpoint at the same\n+       // time as the addresses may get mixed up\n+       // For WSDL's the WSDLWriter does not share any state between documents.\n+       // For XSD's, the WSDLGetUtils makes a copy of any XSD schema documents before updating\n+       // any addresses and returning them, so for both WSDL and XSD this is the only part that needs\n+       // to be synchronized.\n+       synchronized (message.getExchange().getEndpoint()) {", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQ5NTY2NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533495664", "bodyText": "I believe so, the Endpoint is a private field that to my knowledge is only ever set in the Exchange's constructor.", "author": "neuwerk", "createdAt": "2020-12-01T15:21:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA0MTcyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU5NzEyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533597121", "bodyText": "Well that begs the question if the Exchange is different to have a different Endpoint", "author": "jhanders34", "createdAt": "2020-12-01T17:36:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA0MTcyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA0MjQ2NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533042465", "bodyText": "There is a lot of change here.  The copyright should be updated to include 2020.  You should do the same for other classes you changed.", "author": "jhanders34", "createdAt": "2020-12-01T03:02:27Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/support/LibertyJaxWsCompatibleWSDLGetInterceptor.java", "diffHunk": "@@ -77,110 +84,73 @@ public LibertyJaxWsCompatibleWSDLGetInterceptor(String implBeanClazzName, String\n \n     }\n \n-    // @TJJ removed the @Override\n-    public Document getDocument(Message message, String base, Map<String, String> params, String ctxUri, EndpointInfo endpointInfo) {\n-\n-        if (wsdlLoationExisted) {\n-            if (TraceComponent.isAnyTracingEnabled() && tc.isWarningEnabled()) {\n-                Tr.warning(tc, \"warn.no.wsdl.generate\", implBeanClazzName);\n-            }\n-            return noWSDLDoc;\n-        } else {\n-            if (TraceComponent.isAnyTracingEnabled() && tc.isWarningEnabled()) {\n-                Tr.warning(tc, \"error.no.wsdl.find\", new Object[] { wsdlLocation, implBeanClazzName });\n-            }\n-            return noWSDLLocationDoc;\n-        }\n-    }\n+\n+    private Document getDocument(WSDLGetUtils utils,", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA0MzY5OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533043698", "bodyText": "Should this be in a finally block?", "author": "jhanders34", "createdAt": "2020-12-01T03:06:43Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/threading/LibertyJaxWsAutomaticWorkQueueImpl.java", "diffHunk": "@@ -10,15 +10,47 @@\n  *******************************************************************************/\n package com.ibm.ws.jaxws.threading;\n \n+import java.security.AccessController;\n import java.util.concurrent.ScheduledExecutorService;\n import java.util.concurrent.TimeUnit;\n \n import org.apache.cxf.workqueue.AutomaticWorkQueue;\n \n+import com.ibm.ws.util.ThreadContextAccessor;\n import com.ibm.wsspi.threading.WSExecutorService;\n \n public class LibertyJaxWsAutomaticWorkQueueImpl implements AutomaticWorkQueue {\n \n+    private static final ThreadContextAccessor THREAD_CONTEXT_ACCESSOR =\n+                    AccessController.doPrivileged(ThreadContextAccessor.getPrivilegedAction());\n+\n+    /**\n+     * Borrowed from jaxrs-2.x to udpate our LibertyThreadPoolAdapter to match changes need for CXF Updates\n+     * LibertyJaxWsWorker helps to switch the Thread Context Classloader of InvocationCallback & CompletionCallback to application context classloader which can access the jaxws-2.3\n+     * spec API such as Client API\n+     */\n+    public class LibertyJaxWsWorker implements Runnable {\n+\n+        private final Runnable work;\n+        private final ClassLoader appContextClassLoader;\n+\n+        public LibertyJaxWsWorker(Runnable work) {\n+            this.work = work;\n+            //get the application context classloader from main thread\n+            this.appContextClassLoader = THREAD_CONTEXT_ACCESSOR.getContextClassLoader(Thread.currentThread());\n+        }\n+\n+        @Override\n+        public void run() {\n+            //switch thread context classloader of async thread to application context classloader\n+            ClassLoader oClsLoader = THREAD_CONTEXT_ACCESSOR.getContextClassLoader(Thread.currentThread());\n+            THREAD_CONTEXT_ACCESSOR.setContextClassLoader(Thread.currentThread(), appContextClassLoader);\n+            work.run();\n+            //after callback done, switch back the original classloader\n+            THREAD_CONTEXT_ACCESSOR.setContextClassLoader(Thread.currentThread(), oClsLoader);", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI5ODk3NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533298974", "bodyText": "setThreadContext is not necessary to be here.  initialValue is called on get if nothing is in the ThreadLocal and get will put it in automatically into the ThreadLocal without your needing to call set in initialValue.", "author": "jhanders34", "createdAt": "2020-12-01T10:34:20Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/threading/LibertyJaxWsWorkQueueThreadContextHelper.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.jaxws.threading;\n+\n+/**\n+ *\n+ */\n+public class LibertyJaxWsWorkQueueThreadContextHelper {\n+\n+    private static ThreadLocal<LibertyJaxWsWorkQueueThreadContext> threadLocal = new ThreadLocal<LibertyJaxWsWorkQueueThreadContext>() {\n+\n+        @Override\n+        protected LibertyJaxWsWorkQueueThreadContext initialValue() {\n+            LibertyJaxWsWorkQueueThreadContext wqtc = new LibertyJaxWsWorkQueueThreadContext();\n+            LibertyJaxWsWorkQueueThreadContextHelper.setThreadContext(wqtc);", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMxMjIyNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533312225", "bodyText": "Many of these variables could be declared final earlier instead of having to make extra variables just to be final.", "author": "jhanders34", "createdAt": "2020-12-01T10:45:25Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/client/LibertyProviderImpl.java", "diffHunk": "@@ -91,7 +91,7 @@ public ServiceDelegate createServiceDelegate(URL url, QName qname,\n         AtomicServiceReference<JaxWsSecurityConfigurationService> secConfigSR = securityConfigSR.get();\n         JaxWsSecurityConfigurationService securityConfigService = secConfigSR == null ? null : secConfigSR.getService();\n \n-        // @TJJ create final vars in order to call a doPriv when creating the LibertyServiceImpl as required by java 2 security\n+        // Create final vars in order to call a doPriv when creating the LibertyServiceImpl as required by java 2 security\n         final JaxWsSecurityConfigurationService scs = securityConfigService;\n         final WebServiceRefInfo wi = wsrInfo;\n         final Bus b = bus;", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0Njg4Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535346886", "bodyText": "Marking resolved, but added another comment earlier explaining how this was done for bus doesn't work.", "author": "jhanders34", "createdAt": "2020-12-03T15:43:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMxMjIyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMxNzcxNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533317717", "bodyText": "This Interceptor seems to handle both SSL and basic auth so the having the name SSL as part of the class name is misleading.  So either it should be specific to SSL only or the name changed to Security instead of SSL?  The class comment here only talks about SSL and not basic auth so that is also misleading.", "author": "jhanders34", "createdAt": "2020-12-01T10:53:59Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws23/client/security/LibertyJaxWsClientSSLOutInterceptor.java", "diffHunk": "@@ -0,0 +1,241 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.jaxws23.client.security;\n+\n+import java.io.IOException;\n+import java.lang.reflect.Method;\n+import java.security.AccessController;\n+import java.security.PrivilegedAction;\n+import java.security.PrivilegedExceptionAction;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicReference;\n+\n+import javax.net.ssl.SSLSocketFactory;\n+import javax.xml.namespace.QName;\n+\n+import org.apache.cxf.common.util.PropertyUtils;\n+import org.apache.cxf.common.util.StringUtils;\n+import org.apache.cxf.configuration.jsse.TLSClientParameters;\n+import org.apache.cxf.interceptor.Fault;\n+import org.apache.cxf.message.Message;\n+import org.apache.cxf.phase.AbstractPhaseInterceptor;\n+import org.apache.cxf.transport.Conduit;\n+import org.apache.cxf.transport.http.HTTPConduit;\n+import org.apache.cxf.transports.http.configuration.HTTPClientPolicy;\n+import org.apache.cxf.ws.addressing.EndpointReferenceType;\n+\n+import com.ibm.websphere.ras.Tr;\n+import com.ibm.websphere.ras.TraceComponent;\n+import com.ibm.ws.jaxws.metadata.ConfigProperties;\n+import com.ibm.ws.jaxws.metadata.PortComponentRefInfo;\n+import com.ibm.ws.jaxws.metadata.WebServiceRefInfo;\n+import com.ibm.ws.jaxws.security.JaxWsSecurityConfigurationService;\n+import com.ibm.wsspi.kernel.service.utils.AtomicServiceReference;\n+\n+import org.apache.cxf.Bus;\n+import org.apache.cxf.interceptor.Fault;\n+import org.apache.cxf.message.Message;\n+import org.apache.cxf.phase.AbstractPhaseInterceptor;\n+import org.apache.cxf.phase.Phase;\n+import org.apache.cxf.service.model.EndpointInfo;\n+import org.apache.cxf.transport.Conduit;\n+import org.apache.cxf.transport.http.HTTPConduit;\n+import org.apache.cxf.transport.http.HTTPConduitConfigurer;\n+import org.osgi.service.cm.ConfigurationException;\n+import org.osgi.service.cm.ManagedServiceFactory;\n+\n+import com.ibm.websphere.ras.ProtectedString;\n+import com.ibm.websphere.ras.Tr;\n+import com.ibm.websphere.ras.TraceComponent;\n+import com.ibm.websphere.ras.annotation.Sensitive;\n+import com.ibm.ws.jaxws.JaxWsConstants;\n+import com.ibm.ws.jaxws.metadata.ConfigProperties;\n+import com.ibm.ws.jaxws.metadata.PortComponentRefInfo;\n+import com.ibm.ws.jaxws.metadata.WebServiceRefInfo;\n+import com.ibm.ws.jaxws.security.JaxWsSecurityConfigurationService;\n+\n+/**\n+ * Used to set the SSL config on the Client side conduit. This removes the need to modify the\n+ * HttpConduit directly through an extended LibertyHttpConduit \n+ */\n+public class LibertyJaxWsClientSSLOutInterceptor extends AbstractPhaseInterceptor<Message> {", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMzMDg4NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533330885", "bodyText": "If methodDispatcher is null then we should skip this entire logic.  No reason to loop through a for loop just to do nothing in it if methodDispatcher is null.", "author": "jhanders34", "createdAt": "2020-12-01T11:16:33Z", "path": "dev/com.ibm.ws.jaxws.2.3.ejb/src/com/ibm/ws/jaxws/ejb/EJBJaxWsWebEndpoint.java", "diffHunk": "@@ -116,20 +115,31 @@ public void init(ServletConfig servletConfig) throws ServletException {\n             inInterceptors.add(ejbPreInvokeInterceptor);\n             outInterceptors.add(new EJBPostInvokeInterceptor());\n         } else {\n-            Service service = serviceFactory.getService();\n+\n+            if (service == null) {\n+                service = serviceFactory.getService();\n+            }\n+\n             org.apache.cxf.service.model.EndpointInfo cxfEndpointInfo = service.getEndpointInfo(endpointInfo.getWsdlPort());\n-            //MethodDispatcher methodDispatcher = (MethodDispatcher) service.get(MethodDispatcher.class.getName());\n-            JAXWSMethodDispatcher methodDispatcher = (JAXWSMethodDispatcher) service.get(JAXWSMethodDispatcher.class.getName());\n+\n+            JAXWSMethodDispatcher methodDispatcher = (JAXWSMethodDispatcher) service.get(MethodDispatcher.class.getName());\n             List<Method> methods = new ArrayList<Method>(cxfEndpointInfo.getBinding().getOperations().size());\n-            for (BindingOperationInfo bindingOperationInfo : cxfEndpointInfo.getBinding().getOperations()) {\n-                Method method = methodDispatcher.getMethod(bindingOperationInfo);\n-                if (method != null) {\n-                    methods.add(method);\n-                } else {\n-                    if (TraceComponent.isAnyTracingEnabled() && tc.isDebugEnabled()) {\n-                        Tr.debug(tc, \"Unable to get method for binding operation info \" + bindingOperationInfo.getName());\n+            if (cxfEndpointInfo.getBinding().getOperations() != null) {\n+                for (BindingOperationInfo bindingOperationInfo : cxfEndpointInfo.getBinding().getOperations()) {\n+                    if (methodDispatcher != null && bindingOperationInfo != null) {", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMzMjk0Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533332946", "bodyText": "Why would ejbContainer be null?  If it can be null here, couldn't it be null in the if as well?\nThis same logic does not exist in the 2.2 version of the code.  If it can be null, the logic should be there as well.", "author": "jhanders34", "createdAt": "2020-12-01T11:20:18Z", "path": "dev/com.ibm.ws.jaxws.2.3.ejb/src/com/ibm/ws/jaxws/ejb/EJBPreInvokeInterceptor.java", "diffHunk": "@@ -91,8 +90,10 @@ public void handleMessage(SoapMessage message) throws Fault {\n                 endpointManager = ejbContainer.createWebServiceEndpointManager(j2EEName, Provider.class);\n                 targetMethod = getProviderMethod(implClass);\n             } else {\n-                endpointManager = ejbContainer.createWebServiceEndpointManager(j2EEName, methods);\n-                targetMethod = getTargetMethod(implClass, message);\n+                if (ejbContainer != null) {", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxNDMyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533514321", "bodyText": "This was some debugging logic I added that I didn't remove. Thanks for catching it.", "author": "neuwerk", "createdAt": "2020-12-01T15:44:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMzMjk0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMzNjMzNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533336335", "bodyText": "The isAnnotationPresent can be cached during the constructor instead of having to calculate it each time that handleMessage is called.  Not sure if the annotation service should be used instead of calling it directly.\nIf you change it in 2.3, you should also look at changing it in 2.2 as well.", "author": "jhanders34", "createdAt": "2020-12-01T11:26:14Z", "path": "dev/com.ibm.ws.jaxws.2.3.ejb/src/com/ibm/ws/jaxws/ejb/EJBPreInvokeInterceptor.java", "diffHunk": "@@ -77,7 +77,6 @@ public EJBPreInvokeInterceptor(J2EEName j2EEName, Class<?> implClass, EJBContain\n         this.j2EEName = j2EEName;\n         this.ejbContainer = ejbContainer;\n         this.methods = methods == null ? null : methods.toArray(new Method[0]);", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxNzkyMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533517923", "bodyText": "Oh, nice suggestion. I'm going to open an issue for both, if that's good with you?", "author": "neuwerk", "createdAt": "2020-12-01T15:48:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMzNjMzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU5ODIwMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533598202", "bodyText": "Why open an issue for something that can be done in 15 seconds?", "author": "jhanders34", "createdAt": "2020-12-01T17:37:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMzNjMzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM1MTQwMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533351400", "bodyText": "This is different than 2.2.  Should this be updated in the 2.2 version as well.  Like I said if the code is the same between the two might as well just have one copy.", "author": "jhanders34", "createdAt": "2020-12-01T11:53:07Z", "path": "dev/com.ibm.ws.jaxws.2.3.webcontainer/src/com/ibm/ws/jaxws23/webcontainer/JaxWsHttpServletRequestAdapter.java", "diffHunk": "@@ -41,7 +42,7 @@\n  * as in EJB based Web Services, the EJB invocation context is built very earlier in one intercepter, which may cause issue for those methods requiring\n  * Web Component Context MetaData\n  */\n-public class JaxWsHttpServletRequestAdapter implements HttpServletRequest {\n+public class JaxWsHttpServletRequestAdapter extends HttpServletRequestWrapper implements HttpServletRequest {", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM3MTQyMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535371420", "bodyText": "So you didn't carry this over to the 2.2 version.  So it isn't needed?", "author": "jhanders34", "createdAt": "2020-12-03T16:10:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM1MTQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQyNzYwNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535427606", "bodyText": "This was an attempt to mimic what the jaxrs-2.1 is doing with more updated version of the spec. Since this change wasn't needed in the first place, I've removed it along with all the other duplicate code in the ...jaxws.2.3.webcontainer.", "author": "neuwerk", "createdAt": "2020-12-03T17:15:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM1MTQwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM1NjM3MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533356370", "bodyText": "I did not find any server.xml files that have jaxwstest-2.2 and jsp-2.2, so it seems unnecessary to have the removeFeature calls for them.", "author": "jhanders34", "createdAt": "2020-12-01T12:01:28Z", "path": "dev/com.ibm.ws.jaxws.cdi_fat/fat/src/com/ibm/ws/jaxws/cdi/FATSuite.java", "diffHunk": "@@ -10,17 +10,30 @@\n  *******************************************************************************/\n package com.ibm.ws.jaxws.cdi;\n \n+import org.junit.ClassRule;\n import org.junit.runner.RunWith;\n import org.junit.runners.Suite;\n import org.junit.runners.Suite.SuiteClasses;\n \n import componenttest.custom.junit.runner.AlwaysPassesTest;\n+import componenttest.rules.repeater.FeatureReplacementAction;\n+import componenttest.rules.repeater.RepeatTests;\n \n @RunWith(Suite.class)\n @SuiteClasses({\n                 AlwaysPassesTest.class,\n                 BasicTest.class,\n })\n public class FATSuite {\n+    @ClassRule\n+    public static RepeatTests r = RepeatTests.withoutModification()\n+                    .andWith(new FeatureReplacementAction().addFeature(\"jaxws-2.3\")\n+                                    .addFeature(\"cdi-2.0\")\n+                                    .removeFeature(\"cdi-1.2\")\n+                                    .removeFeature(\"jaxws-2.2\")\n+                                    .removeFeature(\"jsp-2.2\")\n+                                    .removeFeature(\"servlet-3.1\")\n+                                    .removeFeature(\"jaxwstest-2.2\")", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQyNjA4Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535426086", "bodyText": "removed", "author": "neuwerk", "createdAt": "2020-12-03T17:13:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM1NjM3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ0ODMyMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535448320", "bodyText": "One of the server.xml files in the project has servlet-3.1.  You removed that one as well.  Any reason why?", "author": "jhanders34", "createdAt": "2020-12-03T17:45:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM1NjM3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM2OTQyOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533369429", "bodyText": "jsp-2.2, servlet-3.1 and jaxwstest-2.2 are not necessary since server.xml files don't use them in this fat project.", "author": "jhanders34", "createdAt": "2020-12-01T12:24:58Z", "path": "dev/com.ibm.ws.jaxws.ejb_fat/fat/src/com/ibm/ws/jaxws/ejb/suite/FATSuite.java", "diffHunk": "@@ -42,4 +46,7 @@\n                 EJBWSInterceptorTest.class\n })\n public class FATSuite {\n+    @ClassRule\n+    public static RepeatTests r = RepeatTests.withoutModification().andWith(new FeatureReplacementAction().addFeature(\"jaxws-2.3\").removeFeature(\"jaxws-2.2\").removeFeature(\"jsp-2.2\").removeFeature(\"servlet-3.1\").removeFeature(\"jaxwstest-2.2\").withID(\"jaxws-2.3\"));", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQyNTIyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535425221", "bodyText": "Removed", "author": "neuwerk", "createdAt": "2020-12-03T17:12:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM2OTQyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM3NjYxMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533376610", "bodyText": "No Liberty change comments in this class.  What did you change from the vanilla CXF version?", "author": "jhanders34", "createdAt": "2020-12-01T12:38:05Z", "path": "dev/com.ibm.ws.org.apache.cxf.cxf.rt.frontend.jaxws.3.2/src/org/apache/cxf/jaxws/JaxwsClientCallback.java", "diffHunk": "@@ -0,0 +1,135 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.jaxws;\n+\n+import java.util.Map;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.xml.ws.AsyncHandler;\n+import javax.xml.ws.Response;\n+\n+import org.apache.cxf.endpoint.ClientCallback;\n+", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQyMDk3MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535420970", "bodyText": "Removed this file", "author": "neuwerk", "createdAt": "2020-12-03T17:07:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM3NjYxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM3NzAzNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533377035", "bodyText": "No Liberty change comments in this class. What did you change from the vanilla CXF version?", "author": "jhanders34", "createdAt": "2020-12-01T12:38:55Z", "path": "dev/com.ibm.ws.org.apache.cxf.cxf.rt.frontend.jaxws.3.2/src/org/apache/cxf/jaxws/ServiceImpl.java", "diffHunk": "@@ -0,0 +1,772 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.jaxws;\n+\n+import java.net.MalformedURLException;\n+import java.net.URI;\n+import java.net.URL;\n+import java.security.AccessController;\n+import java.security.PrivilegedAction;\n+import java.security.PrivilegedExceptionAction;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.ResourceBundle;\n+import java.util.concurrent.Executor;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+\n+import javax.jws.WebService;\n+import javax.wsdl.Definition;\n+import javax.wsdl.Port;\n+import javax.wsdl.extensions.ExtensibilityElement;\n+import javax.wsdl.extensions.http.HTTPAddress;\n+import javax.wsdl.extensions.soap.SOAPAddress;\n+import javax.wsdl.extensions.soap12.SOAP12Address;\n+import javax.wsdl.extensions.soap12.SOAP12Binding;\n+import javax.xml.bind.JAXBContext;\n+import javax.xml.namespace.QName;\n+import javax.xml.ws.Dispatch;\n+import javax.xml.ws.EndpointReference;\n+import javax.xml.ws.Service.Mode;\n+import javax.xml.ws.WebServiceException;\n+import javax.xml.ws.WebServiceFeature;\n+import javax.xml.ws.handler.Handler;\n+import javax.xml.ws.handler.HandlerResolver;\n+import javax.xml.ws.soap.SOAPBinding;\n+import javax.xml.ws.spi.ServiceDelegate;\n+\n+import org.apache.cxf.Bus;\n+import org.apache.cxf.BusException;\n+import org.apache.cxf.BusFactory;\n+import org.apache.cxf.binding.BindingFactoryManager;\n+import org.apache.cxf.binding.soap.wsdl.extensions.SoapAddress;\n+import org.apache.cxf.binding.soap.wsdl.extensions.SoapBinding;\n+import org.apache.cxf.common.i18n.Message;\n+import org.apache.cxf.common.i18n.UncheckedException;\n+import org.apache.cxf.common.logging.LogUtils;\n+import org.apache.cxf.common.util.PackageUtils;\n+import org.apache.cxf.common.util.StringUtils;\n+import org.apache.cxf.configuration.Configurer;\n+import org.apache.cxf.databinding.DataBinding;\n+import org.apache.cxf.databinding.source.SourceDataBinding;\n+import org.apache.cxf.endpoint.Client;\n+import org.apache.cxf.endpoint.ClientImpl;\n+import org.apache.cxf.endpoint.EndpointException;\n+import org.apache.cxf.endpoint.ServiceContractResolverRegistry;\n+import org.apache.cxf.feature.Feature;\n+import org.apache.cxf.frontend.ClientProxy;\n+import org.apache.cxf.helpers.CastUtils;\n+import org.apache.cxf.interceptor.AbstractBasicInterceptorProvider;\n+import org.apache.cxf.jaxb.JAXBDataBinding;\n+import org.apache.cxf.jaxws.binding.soap.JaxWsSoapBindingConfiguration;\n+import org.apache.cxf.jaxws.handler.HandlerResolverImpl;\n+import org.apache.cxf.jaxws.handler.PortInfoImpl;\n+import org.apache.cxf.jaxws.spi.ProviderImpl;\n+import org.apache.cxf.jaxws.support.BindingID;\n+import org.apache.cxf.jaxws.support.DummyImpl;\n+import org.apache.cxf.jaxws.support.JaxWsClientEndpointImpl;\n+import org.apache.cxf.jaxws.support.JaxWsEndpointImpl;\n+import org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean;\n+import org.apache.cxf.service.Service;\n+import org.apache.cxf.service.factory.AbstractServiceFactoryBean;\n+import org.apache.cxf.service.factory.ServiceConstructionException;\n+import org.apache.cxf.service.model.BindingInfo;\n+import org.apache.cxf.service.model.BindingOperationInfo;\n+import org.apache.cxf.service.model.EndpointInfo;\n+import org.apache.cxf.service.model.ServiceInfo;\n+import org.apache.cxf.service.model.ServiceModelUtil;\n+import org.apache.cxf.transport.DestinationFactory;\n+import org.apache.cxf.transport.DestinationFactoryManager;\n+import org.apache.cxf.ws.addressing.EndpointReferenceType;\n+import org.apache.cxf.ws.addressing.EndpointReferenceUtils;\n+import org.apache.cxf.wsdl.WSDLManager;\n+import org.apache.cxf.wsdl.http.AddressType;\n+import org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean;\n+import org.apache.cxf.wsdl11.WSDLServiceFactory;\n+", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM3NzIwMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533377200", "bodyText": "No Liberty change comments in this class. What did you change from the vanilla CXF version?", "author": "jhanders34", "createdAt": "2020-12-01T12:39:12Z", "path": "dev/com.ibm.ws.org.apache.cxf.cxf.rt.frontend.jaxws.3.2/src/org/apache/cxf/jaxws/handler/soap/SOAPHandlerInterceptor.java", "diffHunk": "@@ -0,0 +1,349 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.jaxws.handler.soap;\n+\n+import java.net.URI;\n+import java.util.ArrayList;\n+import java.util.HashSet;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.ListIterator;\n+import java.util.Set;\n+\n+import javax.xml.namespace.QName;\n+import javax.xml.soap.Node;\n+import javax.xml.soap.SOAPBody;\n+import javax.xml.soap.SOAPElement;\n+import javax.xml.soap.SOAPException;\n+import javax.xml.soap.SOAPHeader;\n+import javax.xml.soap.SOAPMessage;\n+import javax.xml.stream.XMLStreamException;\n+import javax.xml.stream.XMLStreamReader;\n+import javax.xml.transform.dom.DOMSource;\n+import javax.xml.ws.Binding;\n+import javax.xml.ws.handler.Handler;\n+import javax.xml.ws.handler.MessageContext;\n+import javax.xml.ws.handler.soap.SOAPHandler;\n+import javax.xml.ws.handler.soap.SOAPMessageContext;\n+\n+import org.apache.cxf.binding.soap.HeaderUtil;\n+import org.apache.cxf.binding.soap.SoapMessage;\n+import org.apache.cxf.binding.soap.interceptor.AbstractSoapInterceptor;\n+import org.apache.cxf.binding.soap.interceptor.SoapInterceptor;\n+import org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor;\n+import org.apache.cxf.binding.soap.saaj.SAAJInInterceptor;\n+import org.apache.cxf.binding.soap.saaj.SAAJOutInterceptor;\n+import org.apache.cxf.binding.soap.saaj.SAAJUtils;\n+import org.apache.cxf.endpoint.Endpoint;\n+import org.apache.cxf.helpers.CastUtils;\n+import org.apache.cxf.interceptor.Fault;\n+import org.apache.cxf.interceptor.Interceptor;\n+import org.apache.cxf.interceptor.InterceptorChain;\n+import org.apache.cxf.interceptor.OutgoingChainInterceptor;\n+import org.apache.cxf.jaxws.handler.AbstractProtocolHandlerInterceptor;\n+import org.apache.cxf.jaxws.handler.HandlerChainInvoker;\n+import org.apache.cxf.message.Exchange;\n+import org.apache.cxf.message.Message;\n+import org.apache.cxf.message.MessageImpl;\n+import org.apache.cxf.phase.Phase;\n+import org.apache.cxf.staxutils.StaxUtils;\n+import org.apache.cxf.transport.MessageObserver;\n+import org.apache.cxf.ws.addressing.Names;\n+", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQyMDc5OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535420799", "bodyText": "Added a comment at top of the class about this being one of those classes that needs to be recompiled without change", "author": "neuwerk", "createdAt": "2020-12-03T17:07:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM3NzIwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM3OTQxNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533379417", "bodyText": "No Liberty change comments in this class. What did you change from the vanilla CXF version?", "author": "jhanders34", "createdAt": "2020-12-01T12:43:09Z", "path": "dev/com.ibm.ws.org.apache.cxf.cxf.rt.wsdl.3.2/src/org/apache/cxf/wsdl/interceptor/DocLiteralInInterceptor.java", "diffHunk": "@@ -0,0 +1,360 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.wsdl.interceptors;\n+\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.logging.Logger;\n+\n+import javax.xml.namespace.QName;\n+import javax.xml.stream.XMLStreamConstants;\n+import javax.xml.stream.XMLStreamReader;\n+\n+import org.apache.cxf.common.logging.LogUtils;\n+import org.apache.cxf.databinding.DataReader;\n+import org.apache.cxf.endpoint.Endpoint;\n+import org.apache.cxf.interceptor.AbstractInDatabindingInterceptor;\n+import org.apache.cxf.interceptor.Fault;\n+import org.apache.cxf.message.Exchange;\n+import org.apache.cxf.message.Message;\n+import org.apache.cxf.message.MessageContentsList;\n+import org.apache.cxf.message.MessageUtils;\n+import org.apache.cxf.phase.Phase;\n+import org.apache.cxf.service.Service;\n+import org.apache.cxf.service.model.BindingMessageInfo;\n+import org.apache.cxf.service.model.BindingOperationInfo;\n+import org.apache.cxf.service.model.MessageInfo;\n+import org.apache.cxf.service.model.MessagePartInfo;\n+import org.apache.cxf.service.model.OperationInfo;\n+import org.apache.cxf.service.model.ServiceInfo;\n+import org.apache.cxf.service.model.ServiceModelUtil;\n+import org.apache.cxf.staxutils.DepthXMLStreamReader;\n+import org.apache.cxf.staxutils.StaxUtils;\n+import org.apache.ws.commons.schema.XmlSchemaElement;\n+import org.apache.ws.commons.schema.constants.Constants;\n+", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQxOTcyNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535419724", "bodyText": "Removed this file", "author": "neuwerk", "createdAt": "2020-12-03T17:05:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM3OTQxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM3OTY4OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r533379689", "bodyText": "No Liberty change comments in this class. What did you change from the vanilla CXF version?", "author": "jhanders34", "createdAt": "2020-12-01T12:43:35Z", "path": "dev/com.ibm.ws.org.apache.cxf.cxf.rt.wsdl.3.2/src/org/apache/cxf/wsdl/service/factory/ReflectionServiceFactoryBean.java", "diffHunk": "@@ -0,0 +1,2626 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.wsdl.service.factory;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Array;\n+import java.lang.reflect.Field;\n+import java.lang.reflect.GenericArrayType;\n+import java.lang.reflect.Method;\n+import java.lang.reflect.ParameterizedType;\n+import java.lang.reflect.Proxy;\n+import java.lang.reflect.Type;\n+import java.lang.reflect.TypeVariable;\n+import java.net.MalformedURLException;\n+import java.net.URI;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.Set;\n+import java.util.concurrent.ConcurrentHashMap;\n+import java.util.concurrent.Executor;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+\n+import javax.wsdl.Operation;\n+import javax.xml.bind.annotation.XmlAttachmentRef;\n+import javax.xml.bind.annotation.XmlElementWrapper;\n+import javax.xml.bind.annotation.XmlList;\n+import javax.xml.bind.annotation.XmlMimeType;\n+import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\n+import javax.xml.namespace.QName;\n+\n+import org.w3c.dom.DOMError;\n+import org.w3c.dom.DOMErrorHandler;\n+\n+import org.apache.cxf.BusException;\n+import org.apache.cxf.annotations.EvaluateAllEndpoints;\n+import org.apache.cxf.binding.BindingFactoryManager;\n+import org.apache.cxf.catalog.CatalogXmlSchemaURIResolver;\n+import org.apache.cxf.common.classloader.ClassLoaderUtils;\n+import org.apache.cxf.common.i18n.Message;\n+import org.apache.cxf.common.logging.LogUtils;\n+import org.apache.cxf.common.util.StringUtils;\n+import org.apache.cxf.common.util.SystemPropertyAction;\n+import org.apache.cxf.common.xmlschema.SchemaCollection;\n+import org.apache.cxf.common.xmlschema.XmlSchemaUtils;\n+import org.apache.cxf.databinding.DataBinding;\n+import org.apache.cxf.databinding.source.mime.MimeAttribute;\n+import org.apache.cxf.databinding.source.mime.MimeSerializer;\n+import org.apache.cxf.endpoint.Endpoint;\n+import org.apache.cxf.endpoint.EndpointException;\n+import org.apache.cxf.endpoint.EndpointImpl;\n+import org.apache.cxf.endpoint.ServiceContractResolverRegistry;\n+import org.apache.cxf.feature.Feature;\n+import org.apache.cxf.helpers.CastUtils;\n+import org.apache.cxf.interceptor.Fault;\n+import org.apache.cxf.interceptor.FaultOutInterceptor;\n+import org.apache.cxf.message.Exchange;\n+import org.apache.cxf.resource.ResourceManager;\n+import org.apache.cxf.service.Service;\n+import org.apache.cxf.service.ServiceImpl;\n+import org.apache.cxf.service.ServiceModelSchemaValidator;\n+import org.apache.cxf.service.factory.FactoryBeanListener;\n+import org.apache.cxf.service.factory.FactoryBeanListener.Event;\n+import org.apache.cxf.service.factory.ServiceConstructionException;\n+import org.apache.cxf.service.factory.SimpleMethodDispatcher;\n+import org.apache.cxf.service.invoker.FactoryInvoker;\n+import org.apache.cxf.service.invoker.Invoker;\n+import org.apache.cxf.service.invoker.MethodDispatcher;\n+import org.apache.cxf.service.invoker.SingletonFactory;\n+import org.apache.cxf.service.model.AbstractMessageContainer;\n+import org.apache.cxf.service.model.BindingInfo;\n+import org.apache.cxf.service.model.BindingOperationInfo;\n+import org.apache.cxf.service.model.EndpointInfo;\n+import org.apache.cxf.service.model.FaultInfo;\n+import org.apache.cxf.service.model.InterfaceInfo;\n+import org.apache.cxf.service.model.MessageInfo;\n+import org.apache.cxf.service.model.MessagePartInfo;\n+import org.apache.cxf.service.model.OperationInfo;\n+import org.apache.cxf.service.model.SchemaInfo;\n+import org.apache.cxf.service.model.ServiceInfo;\n+import org.apache.cxf.service.model.UnwrappedOperationInfo;\n+import org.apache.cxf.wsdl.WSDLConstants;\n+import org.apache.cxf.wsdl11.WSDLServiceBuilder;\n+import org.apache.cxf.wsdl11.WSDLServiceFactory;\n+import org.apache.ws.commons.schema.XmlSchema;\n+import org.apache.ws.commons.schema.XmlSchemaComplexType;\n+import org.apache.ws.commons.schema.XmlSchemaElement;\n+import org.apache.ws.commons.schema.XmlSchemaExternal;\n+import org.apache.ws.commons.schema.XmlSchemaForm;\n+import org.apache.ws.commons.schema.XmlSchemaImport;\n+import org.apache.ws.commons.schema.XmlSchemaSequence;\n+import org.apache.ws.commons.schema.XmlSchemaType;\n+import org.apache.ws.commons.schema.constants.Constants;\n+import org.apache.ws.commons.schema.utils.NamespaceMap;\n+\n+\n+\n+/**\n+ * Introspects a class and builds a {@link Service} from it. If a WSDL URL is\n+ * specified, a Service model will be directly from the WSDL and then metadata\n+ * will be filled in from the service class. If no WSDL URL is specified, the\n+ * Service will be constructed directly from the class structure.\n+ */\n+//CHECKSTYLE:OFF:NCSS    -   This class is just huge and complex\n+public class ReflectionServiceFactoryBean extends org.apache.cxf.service.factory.AbstractServiceFactoryBean {", "originalCommit": "a6acc20fd1ba794ff76daa387c092f02af53f57d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQxOTQxOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535419418", "bodyText": "Removed this file", "author": "neuwerk", "createdAt": "2020-12-03T17:05:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM3OTY4OQ=="}], "type": "inlineReview"}, {"oid": "16a88ef8099870fb3887e2d8ef7708e612bd24f2", "url": "https://github.com/OpenLiberty/open-liberty/commit/16a88ef8099870fb3887e2d8ef7708e612bd24f2", "message": "Code Review Changes", "committedDate": "2020-12-03T09:18:10Z", "type": "forcePushed"}, {"oid": "37d25f2714cff4b328891a449e17266aa2edf824", "url": "https://github.com/OpenLiberty/open-liberty/commit/37d25f2714cff4b328891a449e17266aa2edf824", "message": "Code Review Changes\n\nfix merge problems\n\nFix missing artifact from merge", "committedDate": "2020-12-03T09:50:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTIyOTEwMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14963#discussion_r535229103", "bodyText": "This logic doesn't work.  You will get an NPE if clientMetaData is null.", "author": "jhanders34", "createdAt": "2020-12-03T13:31:38Z", "path": "dev/com.ibm.ws.jaxws.2.3.common/src/com/ibm/ws/jaxws/client/LibertyProviderImpl.java", "diffHunk": "@@ -73,31 +73,25 @@ public ServiceDelegate createServiceDelegate(URL url, QName qname,\n             throw new IllegalStateException(e);\n         }\n         \n-        Bus bus = null;\n+\n+        final Bus bus;\n         JaxWsClientMetaData clientMetaData = JaxWsMetaDataManager.getJaxWsClientMetaData();\n-        if (clientMetaData != null) {\n+        boolean hasClientBus = (clientMetaData.getClientBus() != null);", "originalCommit": "37d25f2714cff4b328891a449e17266aa2edf824", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "930439119c42755db35c506cc6ae242021a2462b", "url": "https://github.com/OpenLiberty/open-liberty/commit/930439119c42755db35c506cc6ae242021a2462b", "message": "Code Review Changes\n\nfix merge problems\n\nFix missing artifact from merge\n\nMore code review changes to refactor jaxws-2.3\n\nReadd eecomptabile", "committedDate": "2020-12-03T21:16:05Z", "type": "forcePushed"}, {"oid": "6a928ddd5d9622e484cc21ab05a5ae2c0ebf3a98", "url": "https://github.com/OpenLiberty/open-liberty/commit/6a928ddd5d9622e484cc21ab05a5ae2c0ebf3a98", "message": "remove autoprovisioning on jaxws-2.3\n\nReadd jaxb-2.3 changes", "committedDate": "2020-12-03T22:47:02Z", "type": "forcePushed"}, {"oid": "9abf6a20245cd2d9b23da2eda5569cc61734b93c", "url": "https://github.com/OpenLiberty/open-liberty/commit/9abf6a20245cd2d9b23da2eda5569cc61734b93c", "message": "Code Review Changes\n\nfix merge problems\n\nFix missing artifact from merge\n\nMore code review changes to refactor jaxws-2.3\n\nReadd eecomptabile\n\nremove autoprovisioning on jaxws-2.3\n\nReadd jaxb-2.3 changes\n\nFat test fixes", "committedDate": "2020-12-04T08:14:27Z", "type": "forcePushed"}, {"oid": "49820a9e33ec2681714c1a6948934639fade187d", "url": "https://github.com/OpenLiberty/open-liberty/commit/49820a9e33ec2681714c1a6948934639fade187d", "message": "Update jaxws.2.3.common to implement missing methods", "committedDate": "2020-12-04T19:59:32Z", "type": "commit"}, {"oid": "9e409d66d259bbabccb31b0811408c7eb2351b66", "url": "https://github.com/OpenLiberty/open-liberty/commit/9e409d66d259bbabccb31b0811408c7eb2351b66", "message": "Changes to support CXF jaxws-2.3 runtime updates\n\nWIP: fat changes for PB run\n\nUndo changes to jaxws.common by bad merge\n\nRevert \"Undo changes to jaxws.common by bad merge\"\n\nThis reverts commit 7331953aa59a9edd7eed6aa79ef2ca5bd41c3a44.\n\nRevert \"Update jaxws.2.3.common to implement missing methods\"\n\nThis reverts commit b083587f1bb1c3c408a17d4164d2961a3f720dfd.\n\nRevert \"WIP: fat changes for PB run\"\n\nThis reverts commit 3dc167ac029ff4b18b5219fd188d834e549d8e49.\n\nRevert \"Revert \"WIP: fat changes for PB run\"\"\n\nThis reverts commit 310fc06d4f435c45e9165af7ed6d35ddb851865f.", "committedDate": "2020-12-04T19:59:33Z", "type": "commit"}, {"oid": "1c548f5af67c48b09684a37ad9daf16ef1ddf764", "url": "https://github.com/OpenLiberty/open-liberty/commit/1c548f5af67c48b09684a37ad9daf16ef1ddf764", "message": "add wsat\n\njaxws-2.3 runtime and FAT updates\n\nmerge fixing\n\nadditional jaxws-2.3 code clean up changes\n\nAdd jaxws-2.3 changes for code review and more test fixes", "committedDate": "2020-12-04T19:59:36Z", "type": "commit"}, {"oid": "79d6222c9a42e081d8cb9d6943f6354c4accab41", "url": "https://github.com/OpenLiberty/open-liberty/commit/79d6222c9a42e081d8cb9d6943f6354c4accab41", "message": "Update CXF versions to match CXF Core to fix failures in multiple jaxrs and jaxws buckets\n\nMore code review comments\n\nMore code review comments\n\nremove wrong version change\n\nremove wrong version change\n\nMore code review changes\n\nUdno bnd.overrides typo\n\nDiable instrumentation to prevent unncessary FFDCs from being generating by custom JAX-RS execptions", "committedDate": "2020-12-04T19:59:37Z", "type": "commit"}, {"oid": "526a86baefbab145dfeab4ea411f84917a0fef72", "url": "https://github.com/OpenLiberty/open-liberty/commit/526a86baefbab145dfeab4ea411f84917a0fef72", "message": "Code Review Changes\n\nfix merge problems\n\nFix missing artifact from merge\n\nMore code review changes to refactor jaxws-2.3\n\nReadd eecomptabile\n\nremove autoprovisioning on jaxws-2.3\n\nReadd jaxb-2.3 changes\n\nFat test fixes", "committedDate": "2020-12-04T19:59:39Z", "type": "commit"}, {"oid": "5719b538682d41b29d0bb769f6021c07156b588f", "url": "https://github.com/OpenLiberty/open-liberty/commit/5719b538682d41b29d0bb769f6021c07156b588f", "message": "Fix test repeat actions\n\nadd missing forServers", "committedDate": "2020-12-04T19:59:43Z", "type": "commit"}, {"oid": "5719b538682d41b29d0bb769f6021c07156b588f", "url": "https://github.com/OpenLiberty/open-liberty/commit/5719b538682d41b29d0bb769f6021c07156b588f", "message": "Fix test repeat actions\n\nadd missing forServers", "committedDate": "2020-12-04T19:59:43Z", "type": "forcePushed"}]}