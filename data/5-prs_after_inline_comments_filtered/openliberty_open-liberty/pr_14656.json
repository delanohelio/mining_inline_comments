{"pr_number": 14656, "pr_title": "Issue 14655: Only check on baseEntries after config processed", "pr_createdAt": "2020-10-22T19:18:19Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14656", "timeline": [{"oid": "522a47216445b83eb330c3e58d4fbbacf503dd8b", "url": "https://github.com/OpenLiberty/open-liberty/commit/522a47216445b83eb330c3e58d4fbbacf503dd8b", "message": "Issue 14655: Only check on baseEntries after config processed", "committedDate": "2020-10-22T21:14:07Z", "type": "forcePushed"}, {"oid": "526f9dd6e38a91bad3f05c6aea7607305a7865c9", "url": "https://github.com/OpenLiberty/open-liberty/commit/526f9dd6e38a91bad3f05c6aea7607305a7865c9", "message": "Issue 14655: Only check on baseEntries after config processed", "committedDate": "2020-10-23T13:11:36Z", "type": "forcePushed"}, {"oid": "91633a9d85b0929ec289ef3020073101ead7cb5f", "url": "https://github.com/OpenLiberty/open-liberty/commit/91633a9d85b0929ec289ef3020073101ead7cb5f", "message": "Issue 14655: Only check on baseEntries after config processed", "committedDate": "2020-10-26T19:34:10Z", "type": "forcePushed"}, {"oid": "19bf4e0171b279996218cdb22cbbe279e65abe2b", "url": "https://github.com/OpenLiberty/open-liberty/commit/19bf4e0171b279996218cdb22cbbe279e65abe2b", "message": "Issue 14655: Only check on baseEntries after config processed", "committedDate": "2020-10-27T17:19:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk4MDYwMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14656#discussion_r512980602", "bodyText": "Add javadoc.", "author": "jvanhill", "createdAt": "2020-10-27T19:43:07Z", "path": "dev/com.ibm.ws.security.wim.core/src/com/ibm/ws/security/wim/ConfigManager.java", "diffHunk": "@@ -424,10 +434,14 @@ public void registerRealmConfigChangeListener(RealmConfigChangeListener listener\n             listeners.add(listener);\n     }\n \n+    public void deregisterRealmConfigChangeListener(RealmConfigChangeListener listener) {", "originalCommit": "19bf4e0171b279996218cdb22cbbe279e65abe2b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ2OTQ4MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14656#discussion_r514469481", "bodyText": "Done", "author": "kristip17", "createdAt": "2020-10-29T18:15:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk4MDYwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk4MTc4Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14656#discussion_r512981782", "bodyText": "Remove trivial? Add javadoc.", "author": "jvanhill", "createdAt": "2020-10-27T19:44:52Z", "path": "dev/com.ibm.ws.security.wim.core/src/com/ibm/ws/security/wim/ConfigManager.java", "diffHunk": "@@ -496,4 +510,56 @@ public long getPageCacheTimeOut() {\n     void setRepositoryManager(RepositoryManager repositoryManager) {\n         this.repositoryManager = repositoryManager;\n     }\n+\n+    @Trivial", "originalCommit": "19bf4e0171b279996218cdb22cbbe279e65abe2b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ2OTczMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14656#discussion_r514469733", "bodyText": "Done", "author": "kristip17", "createdAt": "2020-10-29T18:15:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk4MTc4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk4MTg4Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14656#discussion_r512981887", "bodyText": "Ditto.", "author": "jvanhill", "createdAt": "2020-10-27T19:45:00Z", "path": "dev/com.ibm.ws.security.wim.core/src/com/ibm/ws/security/wim/ConfigManager.java", "diffHunk": "@@ -496,4 +510,56 @@ public long getPageCacheTimeOut() {\n     void setRepositoryManager(RepositoryManager repositoryManager) {\n         this.repositoryManager = repositoryManager;\n     }\n+\n+    @Trivial\n+    @Reference(service = FutureMonitor.class)\n+    protected void setFutureMonitor(FutureMonitor futureMonitor) {\n+        _futureMonitor = futureMonitor;\n+    }\n+\n+    @Trivial", "originalCommit": "19bf4e0171b279996218cdb22cbbe279e65abe2b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ2OTY0OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14656#discussion_r514469649", "bodyText": "Done", "author": "kristip17", "createdAt": "2020-10-29T18:15:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk4MTg4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk4NDg1OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14656#discussion_r512984859", "bodyText": "Reverse the string equality check so the constant is first to protect against possible NPE.", "author": "jvanhill", "createdAt": "2020-10-27T19:48:46Z", "path": "dev/com.ibm.ws.security.wim.core/src/com/ibm/ws/security/wim/ConfigManager.java", "diffHunk": "@@ -496,4 +510,56 @@ public long getPageCacheTimeOut() {\n     void setRepositoryManager(RepositoryManager repositoryManager) {\n         this.repositoryManager = repositoryManager;\n     }\n+\n+    @Trivial\n+    @Reference(service = FutureMonitor.class)\n+    protected void setFutureMonitor(FutureMonitor futureMonitor) {\n+        _futureMonitor = futureMonitor;\n+    }\n+\n+    @Trivial\n+    protected void unsetFutureMonitor(FutureMonitor futureMonitor) {\n+        _futureMonitor = null;\n+    }\n+\n+    /**\n+     * After a configuration modification, run a RealConfigChange check which will verify the participatingBaseEntries.\n+     *\n+     * We used to do this directly from the modify command, but timing change during startup/modify and we would process the check\n+     * before the user registries activated, leading to misleading error messages being printed.\n+     */\n+    @Trivial\n+    @Override\n+    public void notificationCreated(RuntimeUpdateManager updateManager, RuntimeUpdateNotification notification) {\n+        if (modified && notification.getName().equals(RuntimeUpdateNotification.CONFIG_UPDATES_DELIVERED)) {", "originalCommit": "19bf4e0171b279996218cdb22cbbe279e65abe2b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ3MDM5Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14656#discussion_r514470396", "bodyText": "Done", "author": "kristip17", "createdAt": "2020-10-29T18:16:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk4NDg1OQ=="}], "type": "inlineReview"}, {"oid": "bf95fa7679e8c438191bad413eaddad683d360c2", "url": "https://github.com/OpenLiberty/open-liberty/commit/bf95fa7679e8c438191bad413eaddad683d360c2", "message": "Issue 14655: Only check on baseEntries after config processed", "committedDate": "2020-10-29T19:21:45Z", "type": "forcePushed"}, {"oid": "83483d16056fa9daec9f41842c1b26b2efd7e021", "url": "https://github.com/OpenLiberty/open-liberty/commit/83483d16056fa9daec9f41842c1b26b2efd7e021", "message": "Issue 14655: Only check on baseEntries after config processed", "committedDate": "2020-10-30T14:13:53Z", "type": "commit"}, {"oid": "83483d16056fa9daec9f41842c1b26b2efd7e021", "url": "https://github.com/OpenLiberty/open-liberty/commit/83483d16056fa9daec9f41842c1b26b2efd7e021", "message": "Issue 14655: Only check on baseEntries after config processed", "committedDate": "2020-10-30T14:13:53Z", "type": "forcePushed"}]}