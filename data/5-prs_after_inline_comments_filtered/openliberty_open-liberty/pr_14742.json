{"pr_number": 14742, "pr_title": "Migrate FAT project 'com.ibm.ws.messaging.open_jms20context_fat' from\u2026", "pr_createdAt": "2020-10-28T19:32:53Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14742", "timeline": [{"oid": "ee4b07560cb2beead89cd6d292c215f1050e6d6a", "url": "https://github.com/OpenLiberty/open-liberty/commit/ee4b07560cb2beead89cd6d292c215f1050e6d6a", "message": "Migrate FAT project 'com.ibm.ws.messaging.open_jms20context_fat' from commercial liberty.\nCreate FAT project;\nEnable all JMSTemporaryQueue test classes and one context test class:\n    JMSContextTest_118065_TQ\n    JMSContextTest_118066_TQ\n    JMSContextTest_118068_TQ\n    JMSContextTest_118077_TQ\n    JMSContextTest_118067", "committedDate": "2020-10-28T19:41:28Z", "type": "forcePushed"}, {"oid": "eaf3803ab662f3233b41e3e221459f4162cd80f7", "url": "https://github.com/OpenLiberty/open-liberty/commit/eaf3803ab662f3233b41e3e221459f4162cd80f7", "message": "Migrate FAT project 'com.ibm.ws.messaging.open_jms20context_fat' from commercial liberty.\nCreate FAT project;\nEnable all JMSTemporaryQueue test classes and one context test class:\n    JMSContextTest_118065_TQ\n    JMSContextTest_118066_TQ\n    JMSContextTest_118068_TQ\n    JMSContextTest_118077_TQ\n    JMSContextTest_118067", "committedDate": "2020-10-28T19:44:19Z", "type": "commit"}, {"oid": "eaf3803ab662f3233b41e3e221459f4162cd80f7", "url": "https://github.com/OpenLiberty/open-liberty/commit/eaf3803ab662f3233b41e3e221459f4162cd80f7", "message": "Migrate FAT project 'com.ibm.ws.messaging.open_jms20context_fat' from commercial liberty.\nCreate FAT project;\nEnable all JMSTemporaryQueue test classes and one context test class:\n    JMSContextTest_118065_TQ\n    JMSContextTest_118066_TQ\n    JMSContextTest_118068_TQ\n    JMSContextTest_118077_TQ\n    JMSContextTest_118067", "committedDate": "2020-10-28T19:44:19Z", "type": "forcePushed"}, {"oid": "4af70cae056b4d16e3282ed57b3dbc435cdd7f89", "url": "https://github.com/OpenLiberty/open-liberty/commit/4af70cae056b4d16e3282ed57b3dbc435cdd7f89", "message": "Enable test class JMSContext_118070Servlet.", "committedDate": "2020-10-29T02:10:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM5MTkzOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14742#discussion_r514391938", "bodyText": "Please enable the FAT suite to run ee9, only.", "author": "dazavala", "createdAt": "2020-10-29T16:21:57Z", "path": "dev/com.ibm.ws.messaging.open_jms20context_fat/fat/src/com/ibm/ws/messaging/JMS20/fat/FATSuite.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*******************************************************************************\n+ * Copyright (c) 2013, 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.messaging.JMS20.fat;\n+\n+import org.junit.ClassRule;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Suite;\n+import org.junit.runners.Suite.SuiteClasses;\n+\n+import componenttest.rules.repeater.JakartaEE9Action;\n+import componenttest.rules.repeater.RepeatTests;\n+\n+@RunWith(Suite.class)\n+@SuiteClasses({\n+        // All tests use the same client and engine servers:\n+        //   JMSContextClient, JMSContextEngine;\n+\n+        // Lite mode test classes:\n+\n+        // LiteBucketSet1Test.class,\n+        // LiteBucketSet2Test.class,\n+        // LiteBucketSet3Test.class,\n+\n+        // Full mode test classes:\n+\n+        // Many of the tests use the same client and engine server configurations?\n+        //   JMSContextClient.xml, JMSContextEngine.xml\n+\n+        // JMSContextTest_118058.class, // JMSContext App\n+        // JMSContextTest_118061.class, // JMSContext App\n+        // JMSContextTest_118062.class, // JMSContext App\n+\n+        JMSContextTest_118067.class, // JMSContext_118067 App\n+        JMSContextTest_118070.class, // JMSContext_118070 App\n+        // JMSContextTest_118075.class, // JMSContext_118075 App\n+\n+        // The temporary queue tests use different client and engine server configurations:\n+        //   JMSContextEngine_TQ.xml, JMSContextClient_TQ.xml; \n+\n+        JMSContextTest_118065_TQ.class, // JMSTemporaryQueue App\n+        JMSContextTest_118066_TQ.class, // JMSTemporaryQueue App\n+        JMSContextTest_118068_TQ.class, // JMSTemporaryQueue App\n+        JMSContextTest_118077_TQ.class, // JMSTemporaryQueue App\n+})\n+public class FATSuite {\n+    // Run only during the Jakarta repeat for now.  When\n+    // the tests are removed from WS-CD-Open, the pre-jakarta\n+    // repeat can be re-enabled in open-liberty.\n+\n+    @ClassRule", "originalCommit": "4af70cae056b4d16e3282ed57b3dbc435cdd7f89", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ0MzI4NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14742#discussion_r517443285", "bodyText": "Will do in the final delivery.  I have this enabled for both repeats for my initial personal builds.", "author": "tbitonti", "createdAt": "2020-11-04T15:49:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM5MTkzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ3NDM0Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14742#discussion_r514474347", "bodyText": "Fyi, If you scan for pattern // @Test when enabling specific test methods, you might miss this one.", "author": "dazavala", "createdAt": "2020-10-29T18:23:00Z", "path": "dev/com.ibm.ws.messaging.open_jms20context_fat/fat/src/com/ibm/ws/messaging/JMS20/fat/JMSContextTest_118061.java", "diffHunk": "@@ -0,0 +1,467 @@\n+/*******************************************************************************\n+ * Copyright (c) 2013, 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.messaging.JMS20.fat;\n+\n+import static org.junit.Assert.assertTrue;\n+\n+import java.io.IOException;\n+\n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import componenttest.custom.junit.runner.Mode;\n+import componenttest.custom.junit.runner.Mode.TestMode;\n+import componenttest.topology.impl.LibertyServer;\n+import componenttest.topology.impl.LibertyServerFactory;\n+import com.ibm.websphere.simplicity.ShrinkHelper;\n+\n+@Mode(TestMode.FULL)\n+public class JMSContextTest_118061 {\n+    private static LibertyServer engineServer =\n+        LibertyServerFactory.getLibertyServer(\"JMSContextEngine\");\n+\n+    private static LibertyServer clientServer =\n+        LibertyServerFactory.getLibertyServer(\"JMSContextClient\");\n+    private static final int clientPort = clientServer.getHttpDefaultPort();\n+    private static final String clientHost = clientServer.getHostname();\n+\n+    private static final String appName = \"JMSContext\";\n+    private static final String[] appPackages = new String[] { \"jmscontext.web\" };\n+    private static final String contextRoot = \"JMSContext\";\n+\n+    private boolean runInServlet(String test) throws IOException {\n+        return TestUtils.runInServlet(clientHost, clientPort, contextRoot, test);\n+        // throws IOException\n+    }\n+\n+    @BeforeClass\n+    public static void testConfigFileChange() throws Exception {\n+        engineServer.copyFileToLibertyInstallRoot(\n+            \"lib/features\",\n+            \"features/testjmsinternals-1.0.mf\");\n+        engineServer.setServerConfigurationFile(\"JMSContextEngine.xml\");\n+\n+        clientServer.copyFileToLibertyInstallRoot(\n+            \"lib/features\",\n+            \"features/testjmsinternals-1.0.mf\");\n+        clientServer.setServerConfigurationFile(\"JMSContextClient.xml\");\n+        TestUtils.addDropinsWebApp(clientServer, appName, appPackages);\n+\n+        engineServer.startServer(\"JMSContextTest_118061_Engine.log\");\n+        clientServer.startServer(\"JMSContextTest_118061_Client.log\");\n+    }\n+\n+    @AfterClass\n+    public static void tearDown() {\n+        try {\n+            clientServer.stopServer();\n+        } catch ( Exception e ) {\n+            e.printStackTrace();\n+        }\n+\n+        try {\n+            engineServer.stopServer();\n+        } catch ( Exception e ) {\n+            e.printStackTrace();\n+        }\n+\n+        ShrinkHelper.cleanAllExportedArchives();\n+    }\n+\n+    // 118061 :JMSContext: Handle creation of various Message types for the\n+    // JMSContext to be used by applications to send and receive JMS messages\n+\n+    // 118061_3 Verify creation of Object message from JMSContext.\n+    // createObjectMessage(Serializable object).Perform a getObject,setObject\n+    // and getBody. Send and Receive\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateObjectMessageSer_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateObjectMessageSer_B_SecOff\");\n+        assertTrue(\"Test testCreateObjectMessageSer_B_SecOff failed\", testResult);\n+    }\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateObjectMessageSer_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateObjectMessageSer_TCP_SecOff\");\n+        assertTrue(\"Test testCreateObjectMessageSer_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_4 Verify creation of Stream Message from\n+    // JMSContext.createStreamMessage(), Perform operation for setdata and\n+    // reading data. Send and Receive\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateStreamMessage_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateStreamMessage_B_SecOff\");\n+        assertTrue(\"Test testCreateStreamMessage_B_SecOff failed\", testResult);\n+    }\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateStreamMessage_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateStreamMessage_TCP_SecOff\");\n+        assertTrue(\"Test testCreateStreamMessage_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_6 Verify creation of Text Message from\n+    // JMSContext.createTextMessage(String text). Send and Receive\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateTextMessageStr_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateTextMessageStr_B_SecOff\");\n+        assertTrue(\"Test testCreateTextMessageStr_B_SecOff failed\", testResult);\n+    }\n+\n+    // TCP and Security Off\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateTextMessageStr_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateTextMessageStr_TCP_SecOff\");\n+        assertTrue(\"Test testCreateTextMessageStr_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_7 Verify creation of Map Message from\n+    // JMSContext.createMapMessage() .Perform set and get operation. Send and\n+    // receive\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateMapMessage_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateMapMessage_B_SecOff\");\n+        assertTrue(\"Test testCreateMapMessage_B_SecOff failed\", testResult);\n+    }\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateMapMessage_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateMapMessage_TCP_SecOff\");\n+        assertTrue(\"Test testCreateMapMessage_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_8 Verify creation of ByteMessage from\n+    // JMSContext.createBytesMessage(). Peform writeBytes, readBytes and getBody\n+    // operation. Send and Receive.\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateBytesMessage_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateBytesMessage_B_SecOff\");\n+        assertTrue(\"Test testCreateBytesMessage_B_SecOff failed\", testResult);\n+    }\n+\n+    // TCP and Security Off\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testCreateBytesMessage_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testCreateBytesMessage_TCP_SecOff\");\n+        assertTrue(\"Test testCreateBytesMessage_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_9 Verify set and get operation on Message header field\n+    // JMSDestination-\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSDestination_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSDestination_B_SecOff\");\n+        assertTrue(\"Test testJMSDestination_B_SecOff failed\", testResult);\n+    }\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSDestination_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSDestination_TCP_SecOff\");\n+        assertTrue(\"Test testJMSDestination_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_10 Verify set and get operation on Message header field\n+    // JMSDeliveryMode-\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSDeliveryMode_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSDeliveryMode_B_SecOff\");\n+        assertTrue(\"Test testJMSDeliveryMode_B_SecOff failed\", testResult);\n+    }\n+\n+    // TCP and Security Off\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSDeliveryMode_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSDeliveryMode_TCP_SecOff\");\n+        assertTrue(\"Test testJMSDeliveryMode_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_12 Verify set and get operation on Message header field\n+    // JMSTimeStamp\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSTimestamp_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSTimestamp_B_SecOff\");\n+        assertTrue(\"Test testJMSTimestamp_B_SecOff failed\", testResult);\n+    }\n+\n+    // TCP and Security Off\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSTimestamp_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSTimestamp_TCP_SecOff\");\n+        assertTrue(\"Test testJMSTimestamp_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_13 Verify set and get operation on Message header field\n+    // JMSCorrelationID\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSCorrelationID_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSCorrelationID_B_SecOff\");\n+        assertTrue(\"Test testJMSCorrelationID_B_SecOff failed\", testResult);\n+    }\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSCorrelationID_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSCorrelationID_TCP_SecOff\");\n+        assertTrue(\"Test testJMSCorrelationID_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_14 Verify set and get operation on Message header field\n+    // JMSCorrelationIDAsBytes\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSCorrelationIDAsBytes_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSCorrelationIDAsBytes_B_SecOff\");\n+        assertTrue(\"Test testJMSCorrelationIDAsBytes_B_SecOff failed\", testResult);\n+    }\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSCorrelationIDAsBytes_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSCorrelationIDAsBytes_TCP_SecOff\");\n+        assertTrue(\"Test testJMSCorrelationIDAsBytes_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_15 Verify set and get operation on Message header field JMSReplyTo\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSReplyTo_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSReplyTo_B_SecOff\");\n+        assertTrue(\"Test testJMSReplyTo_B_SecOff failed\", testResult);\n+    }\n+\n+    @Mode(TestMode.FULL)\n+    @Test\n+    public void testJMSReplyTo_TCP_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSReplyTo_TCP_SecOff\");\n+        assertTrue(\"Test testJMSReplyTo_TCP_SecOff failed\", testResult);\n+    }\n+\n+    // 118061_16 Verify set and get operation on Message header field\n+    // JMSRedelivered\n+\n+    // @Test\n+    public void testJMSRedelivered_B_SecOff() throws Exception {\n+        boolean testResult = runInServlet(\"testJMSRedelivered_B_SecOff\");\n+        assertTrue(\"Test testJMSRedelivered_B_SecOff failed\", testResult);\n+    }\n+\n+    //@Test", "originalCommit": "4af70cae056b4d16e3282ed57b3dbc435cdd7f89", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ0MjIwMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14742#discussion_r517442200", "bodyText": "Noted.  I'm correcting that comment to '// @test' to be consistent with the other disabled test.\nI checked the original tests, and the two disabled tests were originally disabled.  I'm adding a comment to note that.", "author": "tbitonti", "createdAt": "2020-11-04T15:48:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ3NDM0Nw=="}], "type": "inlineReview"}, {"oid": "88f535fd0d38c5d381c0a7e1344c9a1178ed6ea7", "url": "https://github.com/OpenLiberty/open-liberty/commit/88f535fd0d38c5d381c0a7e1344c9a1178ed6ea7", "message": "Enable JMSContextTest_118075.", "committedDate": "2020-11-04T04:49:41Z", "type": "commit"}, {"oid": "dd6f0a0b828fa0bbd9068bb1c87587fd84edbe45", "url": "https://github.com/OpenLiberty/open-liberty/commit/dd6f0a0b828fa0bbd9068bb1c87587fd84edbe45", "message": "Enable Lite mode tests: LiteBucketSet1Test.java, LiteBucketSet2Test.java, LiteBucketSet3Test.java.\nSwitch to running with the Jakarta repeat, only.\nMove mdb application to \"unused\".", "committedDate": "2020-11-06T19:26:53Z", "type": "commit"}]}