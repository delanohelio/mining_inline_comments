{"pr_number": 15070, "pr_title": "Avoid NPE in case where an app handler is unset", "pr_createdAt": "2020-11-20T14:30:30Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/15070", "timeline": [{"oid": "d9b5eefbefe339fa11457e6b6bcc46babc6de9e7", "url": "https://github.com/OpenLiberty/open-liberty/commit/d9b5eefbefe339fa11457e6b6bcc46babc6de9e7", "message": "Avoid NPE in case where an app handler is unset", "committedDate": "2020-11-20T14:29:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkzNzMzMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15070#discussion_r527937331", "bodyText": "I would make this final", "author": "tjwatson", "createdAt": "2020-11-20T19:53:11Z", "path": "dev/com.ibm.ws.app.manager/src/com/ibm/ws/app/manager/internal/statemachine/StartAction.java", "diffHunk": "@@ -118,8 +118,14 @@ public StartAction(ApplicationConfig config,\n     @Override\n     public void execute(ExecutorService executor) {\n         _startTime.set(System.currentTimeMillis());\n+        @SuppressWarnings({ \"rawtypes\" })\n+        ApplicationHandler handler = _aii.getHandler();", "originalCommit": "d9b5eefbefe339fa11457e6b6bcc46babc6de9e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkzODMzMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15070#discussion_r527938330", "bodyText": "I don't see how an NPE is prevented here when handler==null. Did you intend to return early from the if (handler == null) check above?", "author": "tjwatson", "createdAt": "2020-11-20T19:55:14Z", "path": "dev/com.ibm.ws.app.manager/src/com/ibm/ws/app/manager/internal/statemachine/StartAction.java", "diffHunk": "@@ -128,13 +134,11 @@ public void execute(ExecutorService executor) {\n             @SuppressWarnings(\"deprecation\")\n             @Override\n             public void run() {\n-                AppMessageHelper.get(_aii.getHandler()).audit(\"APPLICATION_SLOW_STARTUP\", _config.getName(), TimestampUtils.getElapsedTime(_startTime.get()));\n+                AppMessageHelper.get(handler).audit(\"APPLICATION_SLOW_STARTUP\", _config.getName(), TimestampUtils.getElapsedTime(_startTime.get()));\n             }\n         }, maxWait, TimeUnit.SECONDS));\n \n         try {\n-            @SuppressWarnings(\"rawtypes\")\n-            ApplicationHandler handler = _aii.getHandler();\n             @SuppressWarnings(\"unchecked\")\n             ApplicationMonitoringInformation ami = handler.setUpApplicationMonitoring(_aii);", "originalCommit": "d9b5eefbefe339fa11457e6b6bcc46babc6de9e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cd7281a722f0c4cfeccf76c750f205e03deb9080", "url": "https://github.com/OpenLiberty/open-liberty/commit/cd7281a722f0c4cfeccf76c750f205e03deb9080", "message": "Return when the handler is null", "committedDate": "2020-11-20T20:34:56Z", "type": "commit"}, {"oid": "e512885f44196e1289449da96a10367bfe011c1e", "url": "https://github.com/OpenLiberty/open-liberty/commit/e512885f44196e1289449da96a10367bfe011c1e", "message": "Make handler final", "committedDate": "2020-11-20T20:46:00Z", "type": "commit"}]}