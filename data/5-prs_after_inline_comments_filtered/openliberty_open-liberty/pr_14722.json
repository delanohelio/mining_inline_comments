{"pr_number": 14722, "pr_title": "[14698] Improve perf and log message when using RequestScoped interface", "pr_createdAt": "2020-10-27T21:29:47Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14722", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA2NDQwOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14722#discussion_r513064408", "bodyText": "Any need for null checks for processBean or bean?", "author": "jim-krueger", "createdAt": "2020-10-27T22:13:25Z", "path": "dev/com.ibm.ws.microprofile.rest.client.cdi/src/com/ibm/ws/microprofile/rest/client/cdi/LibertyRestClientExtension.java", "diffHunk": "@@ -91,5 +96,24 @@ public void registerClientBeans(@Observes AfterBeanDiscovery afterBeanDiscovery,\n \n     public void registerErrors(@Observes AfterDeploymentValidation afterDeploymentValidation) {\n         errors.forEach(afterDeploymentValidation::addDeploymentProblem);\n+        if (!requestScopedInterfaces.isEmpty()) {\n+            \n+            Tr.info(tc, \"rest.client.interface.using.request.scope\", \n+                    requestScopedInterfaces.stream().map(c -> c.getName()).collect(Collectors.joining(\" \")));\n+        }\n+        \n+    }\n+\n+    public void logRequestScopedClientInterfaces(@Observes ProcessBean<?> processBean) {", "originalCommit": "9fece0b2ae3a9426bf5d9dd92296534cfd47576a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzEzOTk5MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14722#discussion_r513139991", "bodyText": "According to the CDI docs/examples, the processBean should always be non-null.", "author": "andymc12", "createdAt": "2020-10-28T02:20:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA2NDQwOA=="}], "type": "inlineReview"}, {"oid": "8319118f05e30a921cc463295ecb0953c4dba8be", "url": "https://github.com/OpenLiberty/open-liberty/commit/8319118f05e30a921cc463295ecb0953c4dba8be", "message": "[14698] Improve perf and log message when using RequestScoped interface", "committedDate": "2020-10-29T16:31:49Z", "type": "commit"}, {"oid": "f72414df2d8e71623bb59fbbada91dd5f7f148a2", "url": "https://github.com/OpenLiberty/open-liberty/commit/f72414df2d8e71623bb59fbbada91dd5f7f148a2", "message": "[14698] Upgrade CXF 3.4.1 snapshot for MP bundle", "committedDate": "2020-10-29T16:31:50Z", "type": "forcePushed"}, {"oid": "cadc969499a02e5fd1d794ebaab85183ccb366ea", "url": "https://github.com/OpenLiberty/open-liberty/commit/cadc969499a02e5fd1d794ebaab85183ccb366ea", "message": "[14698] Log `@Dependent` client intf injected into `@RequestScoped` bean\n\nThis anti-pattern results in the same net performance loss as if the\nrest client interface were explicitly annotated with `@RequestScoped`.", "committedDate": "2020-10-30T13:47:14Z", "type": "commit"}, {"oid": "08912940dd86de359a238522ccc947ab5bfad786", "url": "https://github.com/OpenLiberty/open-liberty/commit/08912940dd86de359a238522ccc947ab5bfad786", "message": "[14698] Upgrade CXF 3.4.1 snapshot for MP bundle", "committedDate": "2020-10-30T13:47:34Z", "type": "commit"}, {"oid": "08912940dd86de359a238522ccc947ab5bfad786", "url": "https://github.com/OpenLiberty/open-liberty/commit/08912940dd86de359a238522ccc947ab5bfad786", "message": "[14698] Upgrade CXF 3.4.1 snapshot for MP bundle", "committedDate": "2020-10-30T13:47:34Z", "type": "forcePushed"}]}