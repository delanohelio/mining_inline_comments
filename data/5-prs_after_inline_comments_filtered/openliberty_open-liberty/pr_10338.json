{"pr_number": 10338, "pr_title": "Adding programmatic timer", "pr_createdAt": "2020-01-08T19:42:50Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/10338", "timeline": [{"oid": "2a146b789000937be3f09dbc3cc675859b256fd1", "url": "https://github.com/OpenLiberty/open-liberty/commit/2a146b789000937be3f09dbc3cc675859b256fd1", "message": "Adding programmatic timer", "committedDate": "2020-01-08T20:38:43Z", "type": "forcePushed"}, {"oid": "c4b3e180167af8938717ecf9042ec1b1d34781b6", "url": "https://github.com/OpenLiberty/open-liberty/commit/c4b3e180167af8938717ecf9042ec1b1d34781b6", "message": "Adding programmatic timer", "committedDate": "2020-01-08T20:41:57Z", "type": "commit"}, {"oid": "c4b3e180167af8938717ecf9042ec1b1d34781b6", "url": "https://github.com/OpenLiberty/open-liberty/commit/c4b3e180167af8938717ecf9042ec1b1d34781b6", "message": "Adding programmatic timer", "committedDate": "2020-01-08T20:41:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjI3MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10338#discussion_r364442271", "bodyText": "The fact that it is possible to run the test with a one-phase only data source tells me that we need to add/update a scenario to cover multiple transactional resources.  It's fine to deliver this for now, be we need a follow-on work item to cover that.  It should be an easy update, just tweak the @Resource for the DataSource in AutomaticDatabase timer.  But then the create table code will need to be moved so that XADataSource can be used.", "author": "njr-11", "createdAt": "2020-01-08T21:04:25Z", "path": "dev/com.ibm.ws.concurrent.persistent_fat_demo_timers/fat/src/com/ibm/ws/concurrent/persistent/fat/demo/timers/DemoTimerTest.java", "diffHunk": "@@ -56,6 +56,15 @@ public static void setUp() throws Exception {\n         //Get driver name\n         server.addEnvVar(\"DB_DRIVER\", DatabaseContainerType.valueOf(testContainer).getDriverName());\n \n+        if (DatabaseContainerType.valueOf(testContainer) == DatabaseContainerType.Oracle) {\n+            //Type=javax.sql.ConnectionPoolDataSource to avoid\n+            //  ORA-02089: COMMIT is not allowed in a subordinate session\n+            //  when application tries to create a new table using oracle.\n+            server.addEnvVar(\"DS_TYPE\", \"javax.sql.ConnectionPoolDataSource\");", "originalCommit": "c4b3e180167af8938717ecf9042ec1b1d34781b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ1MTk2Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10338#discussion_r364451962", "bodyText": "Yes, I will come back to this in another PR.", "author": "KyleAure", "createdAt": "2020-01-08T21:28:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjI3MQ=="}], "type": "inlineReview"}, {"oid": "79ef95f347c1e6cba4b598de134dfe37a90ae1d8", "url": "https://github.com/OpenLiberty/open-liberty/commit/79ef95f347c1e6cba4b598de134dfe37a90ae1d8", "message": "feedback changes", "committedDate": "2020-01-08T21:20:35Z", "type": "commit"}]}