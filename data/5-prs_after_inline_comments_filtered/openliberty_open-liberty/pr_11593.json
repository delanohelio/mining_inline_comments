{"pr_number": 11593, "pr_title": "Migrate JAXRS WebContainer FAT testcases to Open Liberty", "pr_createdAt": "2020-04-01T22:06:42Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/11593", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MDExMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r401960112", "bodyText": "I think this is what the copyright tool is complaining about.  Can you delete these comments?  The copyright header at the top looks right.", "author": "andymc12", "createdAt": "2020-04-01T23:03:37Z", "path": "dev/com.ibm.ws.jaxrs.2.x.webcontainer_fat/fat/src/com/ibm/ws/jaxrs2x/fat/helloworld/HelloWorldTest.java", "diffHunk": "@@ -0,0 +1,176 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package com.ibm.ws.jaxrs2x.fat.helloworld;\n+\n+/*\n+ * IBM Confidential\n+ *\n+ * OCO Source Materials\n+ *\n+ * Copyright IBM Corp. 2011\n+ *\n+ * The source code for this program is not published or other-\n+ * wise divested of its trade secrets, irrespective of what has\n+ * been deposited with the U.S. Copyright Office.\n+ */", "originalCommit": "7095b91c3d6754b0d85f54282b3e4c70fadcf1bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQwODMzMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r402408333", "bodyText": "Done", "author": "jim-krueger", "createdAt": "2020-04-02T15:33:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MDExMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MDQxMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r401960413", "bodyText": "This seems out of place.  Can you put the import static lines above the regular import lines?", "author": "andymc12", "createdAt": "2020-04-01T23:04:19Z", "path": "dev/com.ibm.ws.jaxrs.2.x.webcontainer_fat/fat/src/com/ibm/ws/jaxrs2x/fat/helloworld/HelloWorldTest.java", "diffHunk": "@@ -0,0 +1,176 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package com.ibm.ws.jaxrs2x.fat.helloworld;\n+\n+/*\n+ * IBM Confidential\n+ *\n+ * OCO Source Materials\n+ *\n+ * Copyright IBM Corp. 2011\n+ *\n+ * The source code for this program is not published or other-\n+ * wise divested of its trade secrets, irrespective of what has\n+ * been deposited with the U.S. Copyright Office.\n+ */\n+import java.io.File;", "originalCommit": "7095b91c3d6754b0d85f54282b3e4c70fadcf1bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQwOTMxMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r402409310", "bodyText": "Done", "author": "jim-krueger", "createdAt": "2020-04-02T15:35:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MDQxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MDY0NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r401960645", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            //    private final Class<?> c = HelloWorldTest.class;\n          \n      \n    \n    \n  \n\nLet's go ahead and remove any dead code.", "author": "andymc12", "createdAt": "2020-04-01T23:05:02Z", "path": "dev/com.ibm.ws.jaxrs.2.x.webcontainer_fat/fat/src/com/ibm/ws/jaxrs2x/fat/helloworld/HelloWorldTest.java", "diffHunk": "@@ -0,0 +1,176 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package com.ibm.ws.jaxrs2x.fat.helloworld;\n+\n+/*\n+ * IBM Confidential\n+ *\n+ * OCO Source Materials\n+ *\n+ * Copyright IBM Corp. 2011\n+ *\n+ * The source code for this program is not published or other-\n+ * wise divested of its trade secrets, irrespective of what has\n+ * been deposited with the U.S. Copyright Office.\n+ */\n+import java.io.File;\n+\n+import static org.junit.Assert.fail;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.net.HttpURLConnection;\n+import java.net.URL;\n+\n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import com.ibm.websphere.simplicity.ShrinkHelper;\n+\n+import componenttest.annotation.Server;\n+import componenttest.custom.junit.runner.FATRunner;\n+import componenttest.topology.impl.LibertyServer;\n+\n+@RunWith(FATRunner.class)\n+public class HelloWorldTest {\n+    @Server(\"com.ibm.ws.jaxrs2x.fat\")\n+    public static LibertyServer server;\n+\n+//    private final Class<?> c = HelloWorldTest.class;", "originalCommit": "7095b91c3d6754b0d85f54282b3e4c70fadcf1bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQwOTY2OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r402409669", "bodyText": "Done", "author": "jim-krueger", "createdAt": "2020-04-02T15:35:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MDY0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MTAzNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r401961037", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            //        server.addInstalledAppForValidation(thirdpartylibwar);", "author": "andymc12", "createdAt": "2020-04-01T23:06:18Z", "path": "dev/com.ibm.ws.jaxrs.2.x.webcontainer_fat/fat/src/com/ibm/ws/jaxrs2x/fat/multipart/MultipartTest.java", "diffHunk": "@@ -0,0 +1,141 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package com.ibm.ws.jaxrs2x.fat.multipart;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+import java.io.File;\n+import java.io.IOException;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.ClientProtocolException;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.entity.mime.MultipartEntityBuilder;\n+import org.apache.http.entity.mime.content.FileBody;\n+import org.apache.http.entity.mime.content.StringBody;\n+import org.apache.http.impl.client.DefaultHttpClient;\n+import org.apache.http.util.EntityUtils;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import com.ibm.websphere.simplicity.ShrinkHelper;\n+\n+import componenttest.annotation.Server;\n+import componenttest.custom.junit.runner.FATRunner;\n+import componenttest.topology.impl.LibertyServer;\n+import componenttest.topology.impl.LibertyServerFactory;\n+\n+@RunWith(FATRunner.class)\n+public class MultipartTest {\n+\n+    @Server(\"com.ibm.ws.jaxrs2x.fat.thirdpartylib\")\n+    public static LibertyServer server;\n+\n+    private static final String thirdpartylibwar = \"thirdpartylib\";\n+\n+    private static String MULTIPART_URI = null;\n+    private static String MULTIPARTBODY_URI = null;\n+\n+    @BeforeClass\n+    public static void setup() throws Exception {\n+\n+        WebArchive app = ShrinkHelper.buildDefaultApp(thirdpartylibwar, \"com.ibm.ws.jaxrs2x.fat.thirdparty.multipart\");\n+        ShrinkHelper.exportAppToServer(server, app);\n+        server.addInstalledAppForValidation(thirdpartylibwar);\n+\n+        \n+//        server.addInstalledAppForValidation(thirdpartylibwar);", "originalCommit": "7095b91c3d6754b0d85f54282b3e4c70fadcf1bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQxMjExNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r402412115", "bodyText": "Done", "author": "jim-krueger", "createdAt": "2020-04-02T15:39:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MTAzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MjA4Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r401962087", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            //import org.apache.cxf.jaxrs.ext.multipart.Attachment;", "author": "andymc12", "createdAt": "2020-04-01T23:09:22Z", "path": "dev/com.ibm.ws.jaxrs.2.x.webcontainer_fat/test-applications/thirdpartylib/src/com/ibm/ws/jaxrs2x/fat/thirdparty/multipart/UploadServiceImpl.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package com.ibm.ws.jaxrs2x.fat.thirdparty.multipart;\n+\n+import java.io.File;\n+import java.io.FileOutputStream;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.util.List;\n+\n+import javax.activation.DataHandler;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.ws.rs.Consumes;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.core.Context;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.MultivaluedMap;\n+import javax.ws.rs.core.Response;\n+\n+import com.ibm.websphere.jaxrs20.multipart.IAttachment;\n+\n+//import org.apache.cxf.jaxrs.ext.multipart.Attachment;", "originalCommit": "7095b91c3d6754b0d85f54282b3e4c70fadcf1bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQxNDk0NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r402414945", "bodyText": "Done", "author": "jim-krueger", "createdAt": "2020-04-02T15:42:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MjA4Nw=="}], "type": "inlineReview"}, {"oid": "1ff3d60a48aabebd57019dbf29f8472c397dc1f6", "url": "https://github.com/OpenLiberty/open-liberty/commit/1ff3d60a48aabebd57019dbf29f8472c397dc1f6", "message": "Migrate JAXRS WebContainer FAT testcases to Open Liberty", "committedDate": "2020-04-02T15:53:41Z", "type": "forcePushed"}, {"oid": "94c8d6b16323cad6c3f0b252a3257be47ab950f0", "url": "https://github.com/OpenLiberty/open-liberty/commit/94c8d6b16323cad6c3f0b252a3257be47ab950f0", "message": "Migrate JAXRS WebContainer FAT testcases to Open Liberty", "committedDate": "2020-04-02T16:45:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUxNDUwOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r402514509", "bodyText": "delete empty comment", "author": "WhiteCat22", "createdAt": "2020-04-02T18:11:13Z", "path": "dev/com.ibm.ws.jaxrs.2.x.webcontainer_fat/fat/src/com/ibm/ws/jaxrs2x/fat/disablejaxrs11/DisableJaxRS11Test.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package com.ibm.ws.jaxrs2x.fat.disablejaxrs11;\n+\n+import static org.junit.Assert.assertTrue;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import com.ibm.websphere.simplicity.log.Log;\n+\n+import componenttest.annotation.Server;\n+import componenttest.custom.junit.runner.FATRunner;\n+import componenttest.topology.impl.LibertyServer;\n+import componenttest.topology.impl.LibertyServerFactory;\n+\n+/**", "originalCommit": "94c8d6b16323cad6c3f0b252a3257be47ab950f0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUxNDczOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r402514739", "bodyText": "delete empty comment", "author": "WhiteCat22", "createdAt": "2020-04-02T18:11:38Z", "path": "dev/com.ibm.ws.jaxrs.2.x.webcontainer_fat/fat/src/com/ibm/ws/jaxrs2x/fat/jsonp/JaxRsJsonPTest.java", "diffHunk": "@@ -0,0 +1,148 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package com.ibm.ws.jaxrs2x.fat.jsonp;\n+\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+import java.io.IOException;\n+\n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import com.ibm.websphere.simplicity.ShrinkHelper;\n+import com.ibm.websphere.simplicity.log.Log;\n+import com.ibm.ws.jaxrs2x.fat.TestUtils;\n+\n+import componenttest.annotation.AllowedFFDC;\n+import componenttest.annotation.Server;\n+import componenttest.custom.junit.runner.FATRunner;\n+import componenttest.topology.impl.LibertyServer;\n+import componenttest.topology.impl.LibertyServerFactory;\n+\n+/**", "originalCommit": "94c8d6b16323cad6c3f0b252a3257be47ab950f0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUxNTQwNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11593#discussion_r402515404", "bodyText": "delete empty comment", "author": "WhiteCat22", "createdAt": "2020-04-02T18:12:48Z", "path": "dev/com.ibm.ws.jaxrs.2.x.webcontainer_fat/test-applications/jsonp/src/com/ibm/ws/jaxrs2x/fat/jsonp/service/TestApplication.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package com.ibm.ws.jaxrs2x.fat.jsonp.service;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import javax.ws.rs.core.Application;\n+\n+/**", "originalCommit": "94c8d6b16323cad6c3f0b252a3257be47ab950f0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1c706972905e22c9f994dd4704b969932783de4e", "url": "https://github.com/OpenLiberty/open-liberty/commit/1c706972905e22c9f994dd4704b969932783de4e", "message": "Migrate JAXRS WebContainer FAT testcases to Open Liberty", "committedDate": "2020-04-02T18:27:30Z", "type": "commit"}, {"oid": "1c706972905e22c9f994dd4704b969932783de4e", "url": "https://github.com/OpenLiberty/open-liberty/commit/1c706972905e22c9f994dd4704b969932783de4e", "message": "Migrate JAXRS WebContainer FAT testcases to Open Liberty", "committedDate": "2020-04-02T18:27:30Z", "type": "forcePushed"}]}