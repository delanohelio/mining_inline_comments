{"pr_number": 1826, "pr_title": "Adds support for side-loading of new resources.", "pr_createdAt": "2020-12-02T21:35:33Z", "pr_url": "https://github.com/fcrepo/fcrepo/pull/1826", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1MjM0NQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r534552345", "bodyText": "Typo 4040", "author": "pwinckles", "createdAt": "2020-12-02T23:28:13Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/AbstractResourceIT.java", "diffHunk": "@@ -634,6 +635,12 @@ protected static void assertDeleted(final String id) {\n         assertThat(\"Expected object to be deleted\", getStatus(new HttpGet(location)), is(GONE.getStatusCode()));\n     }\n \n+    protected static void assertNotFound(final String id) {\n+        final String location = serverAddress + id;\n+        assertThat(\"Expected object to return 404\", getStatus(new HttpHead(location)), is(NOT_FOUND.getStatusCode()));\n+        assertThat(\"Expected object to return 4040\", getStatus(new HttpGet(location)), is(NOT_FOUND.getStatusCode()));", "originalCommit": "fdda2ec2604b9504da1b33f0cf4da0fb06fae2ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1NTkzNA==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r534555934", "bodyText": "This operation will need to acquire a lock on the resource. Locking coming in: #1823", "author": "pwinckles", "createdAt": "2020-12-02T23:37:06Z", "path": "fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/services/ReindexServiceImpl.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.kernel.impl.services;\n+\n+import org.fcrepo.kernel.api.identifiers.FedoraId;\n+import org.fcrepo.kernel.api.operations.ReindexResourceOperationFactory;\n+import org.fcrepo.kernel.api.services.ReindexService;\n+import org.fcrepo.persistence.api.PersistentStorageSessionManager;\n+import org.springframework.stereotype.Component;\n+\n+import javax.inject.Inject;\n+\n+/**\n+ * Implementation of {@link org.fcrepo.kernel.api.services.ReindexService}\n+ *\n+ * @author dbernstein\n+ */\n+@Component\n+public class ReindexServiceImpl extends AbstractService implements ReindexService {\n+\n+    @Inject\n+    private PersistentStorageSessionManager persistentStorageSessionManager;\n+\n+    @Inject\n+    private ReindexResourceOperationFactory resourceOperationFactory;\n+\n+    @Override\n+    public void reindexByFedoraId(final String txId, final String principal, final FedoraId fedoraId) {\n+        final var operation = resourceOperationFactory.create(fedoraId).userPrincipal(principal).build();\n+        final var psession = persistentStorageSessionManager.getSession(txId);\n+        psession.persist(operation);", "originalCommit": "fdda2ec2604b9504da1b33f0cf4da0fb06fae2ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1NjkyOQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r534556929", "bodyText": "It seems like there might not be a great solution for this currently, but I believe reindexing is applying live changes to the search index that will not be rollback if the commit ultimately fails.", "author": "pwinckles", "createdAt": "2020-12-02T23:39:49Z", "path": "fcrepo-http-api/src/main/java/org/fcrepo/http/api/FedoraReindex.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.http.api;\n+\n+import io.micrometer.core.annotation.Timed;\n+import org.apache.http.HttpStatus;\n+import org.fcrepo.kernel.api.identifiers.FedoraId;\n+import org.fcrepo.kernel.api.services.ReindexService;\n+import org.slf4j.Logger;\n+import org.springframework.context.annotation.Scope;\n+\n+import javax.inject.Inject;\n+import javax.ws.rs.BadRequestException;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.Response;\n+\n+import static java.lang.String.format;\n+import static javax.ws.rs.core.MediaType.APPLICATION_JSON;\n+import static javax.ws.rs.core.Response.status;\n+import static org.fcrepo.http.commons.domain.RDFMediaType.TEXT_PLAIN_WITH_CHARSET;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+/**\n+ * @author dbernstein\n+ * @since 12/01/20\n+ */\n+@Timed\n+@Scope(\"request\")\n+@Path(\"/{path: (.+/)?}fcr:reindex\")\n+public class FedoraReindex extends FedoraBaseResource {\n+\n+    private static final Logger LOGGER = getLogger(FedoraReindex.class);\n+\n+    @Inject\n+    private ReindexService reindexService;\n+\n+    @PathParam(\"path\")\n+    protected String externalPath;\n+\n+    /**\n+     * Default JAX-RS entry point\n+     */\n+    public FedoraReindex() {\n+        super();\n+    }\n+\n+    /**\n+     * Reindex a fedora resource.\n+     *\n+     * @return A response\n+     */\n+    @POST\n+    @Produces({APPLICATION_JSON + \";qs=1.0\",\n+            TEXT_PLAIN_WITH_CHARSET})\n+    public Response reindexObject() {\n+        LOGGER.info(\"receiving reindex request for fedora_id = {}\", externalPath);\n+        try {\n+            final var transaction = transaction();\n+            final var id = FedoraId.create(externalPath);\n+            if (doesResourceExist(transaction, id, false)) {\n+                //TODO : remove this block once reindexing of existing resources is supported.\n+                return status(HttpStatus.SC_CONFLICT, \"Reindexing of existing resources is not currently supported. \" +\n+                        \"Only resources that have not yet been indexed are allowed.\").build();\n+            } else {\n+                this.reindexService.reindexByFedoraId(transaction().getId(), getUserPrincipal(), id.asBaseId());\n+                transaction.commitIfShortLived();", "originalCommit": "fdda2ec2604b9504da1b33f0cf4da0fb06fae2ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2OTYzMQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r536269631", "bodyText": "We're passing in the transactionId to the reindex service which ultimately gets passed down to the DbSearchIndex.   Isn't it a matter of adding transaction support to the search index was we're doing with other indices like the FedoraToOcflObjectIndex (which could be added in a downstream ticket)?", "author": "dbernstein", "createdAt": "2020-12-04T17:45:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1NjkyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjMwMjAzNA==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r536302034", "bodyText": "Yes, if the search table was updated in the same way as the other tables that would solve the problem. I guess I had thought that you didn't want the search index to have a sibling transaction table? Won't that impact all of the queries?", "author": "pwinckles", "createdAt": "2020-12-04T18:41:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1NjkyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjMwMzE2NQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r536303165", "bodyText": "Or are you thinking that changes in the transaction table will never be visible until they're merged into the main table?", "author": "pwinckles", "createdAt": "2020-12-04T18:43:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1NjkyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM4MjczMQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r536382731", "bodyText": "I'm thinking the search table would work like the others.  I'll create a jira for that.", "author": "dbernstein", "createdAt": "2020-12-04T21:13:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1NjkyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM4NDM1MA==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r536384350", "bodyText": "https://jira.lyrasis.org/browse/FCREPO-3561", "author": "dbernstein", "createdAt": "2020-12-04T21:16:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1NjkyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1ODA5Nw==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r534558097", "bodyText": "This is a happy path test. Other test ideas:\n\nWhat happens if you attempt to reindex an object that does not exist?\nWhat happens if you attempt to reindex an archival group part rather than the ag? For example, info:fedora/ag/child rather than info:fedora/ag\nWhat happens if the object exists but is invalid?", "author": "pwinckles", "createdAt": "2020-12-02T23:42:49Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraReindexIT.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.integration.http.api;\n+\n+import org.apache.commons.io.FileUtils;\n+import org.apache.http.HttpStatus;\n+import org.junit.Test;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.test.context.TestExecutionListeners;\n+\n+import java.nio.file.Path;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+/**\n+ * @author dbernstein\n+ * @since 12/01/20\n+ */\n+@TestExecutionListeners(\n+        listeners = {LinuxTestIsolationExecutionListener.class},\n+        mergeMode = TestExecutionListeners.MergeMode.MERGE_WITH_DEFAULTS)\n+public class FedoraReindexIT extends AbstractResourceIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(FedoraReindexIT.class);\n+\n+    @Test\n+    public void testSideLoading() throws Exception {", "originalCommit": "fdda2ec2604b9504da1b33f0cf4da0fb06fae2ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1ODk2OA==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r534558968", "bodyText": "I think this should be doesResourceExist(transaction, id, true). Otherwise I think it will return false for resources that are deleted by not purged.", "author": "pwinckles", "createdAt": "2020-12-02T23:45:06Z", "path": "fcrepo-http-api/src/main/java/org/fcrepo/http/api/FedoraReindex.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.http.api;\n+\n+import io.micrometer.core.annotation.Timed;\n+import org.apache.http.HttpStatus;\n+import org.fcrepo.kernel.api.identifiers.FedoraId;\n+import org.fcrepo.kernel.api.services.ReindexService;\n+import org.slf4j.Logger;\n+import org.springframework.context.annotation.Scope;\n+\n+import javax.inject.Inject;\n+import javax.ws.rs.BadRequestException;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.Response;\n+\n+import static java.lang.String.format;\n+import static javax.ws.rs.core.MediaType.APPLICATION_JSON;\n+import static javax.ws.rs.core.Response.status;\n+import static org.fcrepo.http.commons.domain.RDFMediaType.TEXT_PLAIN_WITH_CHARSET;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+/**\n+ * @author dbernstein\n+ * @since 12/01/20\n+ */\n+@Timed\n+@Scope(\"request\")\n+@Path(\"/{path: (.+/)?}fcr:reindex\")\n+public class FedoraReindex extends FedoraBaseResource {\n+\n+    private static final Logger LOGGER = getLogger(FedoraReindex.class);\n+\n+    @Inject\n+    private ReindexService reindexService;\n+\n+    @PathParam(\"path\")\n+    protected String externalPath;\n+\n+    /**\n+     * Default JAX-RS entry point\n+     */\n+    public FedoraReindex() {\n+        super();\n+    }\n+\n+    /**\n+     * Reindex a fedora resource.\n+     *\n+     * @return A response\n+     */\n+    @POST\n+    @Produces({APPLICATION_JSON + \";qs=1.0\",\n+            TEXT_PLAIN_WITH_CHARSET})\n+    public Response reindexObject() {\n+        LOGGER.info(\"receiving reindex request for fedora_id = {}\", externalPath);\n+        try {\n+            final var transaction = transaction();\n+            final var id = FedoraId.create(externalPath);\n+            if (doesResourceExist(transaction, id, false)) {", "originalCommit": "fdda2ec2604b9504da1b33f0cf4da0fb06fae2ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1OTkwOA==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r534559908", "bodyText": "This indexing does not do any sort of validation. I am okay giving that a pass for this PR, but, if we don't do validation here, then we need a follow up ticket to validate side-loaded objects. I don't know if it's a beta blocker (seems very important to me because it's likely people will create invalid objects by hand) or not, but definitely a release blocker.", "author": "pwinckles", "createdAt": "2020-12-02T23:47:36Z", "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/ReindexResourcePersister.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.persistence.ocfl.impl;\n+\n+import org.fcrepo.kernel.api.operations.ResourceOperation;\n+import org.fcrepo.persistence.api.exceptions.PersistentStorageException;\n+import org.fcrepo.persistence.ocfl.api.Persister;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import static org.fcrepo.kernel.api.operations.ResourceOperationType.REINDEX;\n+\n+/**\n+ * Reindex resource rersister\n+ *\n+ * @author dbernstein\n+ */\n+class ReindexResourcePersister implements Persister {\n+\n+    private static final Logger log = LoggerFactory.getLogger(ReindexResourcePersister.class);\n+\n+    private ReindexService reindexService;\n+\n+    /**\n+     * Constructor\n+     *\n+     * @param reindexService the reindex service\n+     */\n+    protected ReindexResourcePersister(final ReindexService reindexService) {\n+        this.reindexService = reindexService;\n+    }\n+\n+    @Override\n+    public boolean handle(final ResourceOperation operation) {\n+        return operation != null && REINDEX.equals(operation.getType());\n+    }\n+\n+    @Override\n+    public void persist(final OcflPersistentStorageSession session, final ResourceOperation operation)\n+            throws PersistentStorageException {\n+        final var ocflId = operation.getResourceId().getBaseId();\n+        try {\n+            this.reindexService.indexOcflObject(session.getId(), ocflId);", "originalCommit": "fdda2ec2604b9504da1b33f0cf4da0fb06fae2ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM2NjM2Nw==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r536366367", "bodyText": "https://jira.lyrasis.org/browse/FCREPO-3560", "author": "dbernstein", "createdAt": "2020-12-04T20:39:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1OTkwOA=="}], "type": "inlineReview"}, {"oid": "f241b2e9261e0715928426411fdca02f1b1474e5", "url": "https://github.com/fcrepo/fcrepo/commit/f241b2e9261e0715928426411fdca02f1b1474e5", "message": "Adds additional integration tests, ensures 405s returned on non-POST operations, and\nimproves error message returned on bad requests.", "committedDate": "2020-12-04T20:38:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM3MDA5OA==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r536370098", "bodyText": "Where do you acquire the lock?", "author": "pwinckles", "createdAt": "2020-12-04T20:46:41Z", "path": "fcrepo-http-api/src/main/java/org/fcrepo/http/api/FedoraReindex.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.http.api;\n+\n+import io.micrometer.core.annotation.Timed;\n+import org.apache.http.HttpStatus;\n+import org.fcrepo.kernel.api.identifiers.FedoraId;\n+import org.fcrepo.kernel.api.services.ReindexService;\n+import org.slf4j.Logger;\n+import org.springframework.context.annotation.Scope;\n+\n+import javax.inject.Inject;\n+import javax.ws.rs.BadRequestException;\n+import javax.ws.rs.DELETE;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.PUT;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.Response;\n+\n+import static java.lang.String.format;\n+import static javax.ws.rs.core.MediaType.APPLICATION_JSON;\n+import static javax.ws.rs.core.Response.status;\n+import static org.fcrepo.http.commons.domain.RDFMediaType.TEXT_PLAIN_WITH_CHARSET;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+/**\n+ * @author dbernstein\n+ * @since 12/01/20\n+ */\n+@Timed\n+@Scope(\"request\")\n+@Path(\"/{path: (.+/)?}fcr:reindex\")\n+public class FedoraReindex extends FedoraBaseResource {\n+\n+    private static final Logger LOGGER = getLogger(FedoraReindex.class);\n+\n+    @Inject\n+    private ReindexService reindexService;\n+\n+    @PathParam(\"path\")\n+    protected String externalPath;\n+\n+    /**\n+     * Default JAX-RS entry point\n+     */\n+    public FedoraReindex() {\n+        super();\n+    }\n+\n+    /**\n+     * Reindex a fedora resource.\n+     *\n+     * @return A response\n+     */\n+    @POST\n+    @Produces({APPLICATION_JSON + \";qs=1.0\",\n+            TEXT_PLAIN_WITH_CHARSET})\n+    public Response reindexObject() {\n+        LOGGER.info(\"receiving reindex request for fedora_id = {}\", externalPath);\n+        try {\n+            final var transaction = transaction();\n+            final var id = FedoraId.create(externalPath);\n+            if (doesResourceExist(transaction, id, true)) {\n+                //TODO : remove this block once reindexing of existing resources is supported.\n+                return status(HttpStatus.SC_CONFLICT, \"Reindexing of existing resources is not currently supported. \" +\n+                        \"Only resources that have not yet been indexed are allowed.\").build();\n+            } else {\n+                try {\n+                    this.reindexService.reindexByFedoraId(transaction().getId(), getUserPrincipal(), id.asBaseId());\n+                    transaction.commitIfShortLived();\n+                    final var message = format(\"successfully reindexed %s\", id.getBaseId());\n+                    LOGGER.info(message);\n+                    return status(HttpStatus.SC_NO_CONTENT, message).build();\n+                } finally {\n+                    transaction().releaseResourceLocksIfShortLived();", "originalCommit": "f241b2e9261e0715928426411fdca02f1b1474e5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODcyNDQ1OA==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r538724458", "bodyText": "This is inconsistent with how locking is done in the other services. It will work, but, to me, having the kernel acquire a lock rather than the http layer seems more appropriate.", "author": "pwinckles", "createdAt": "2020-12-08T18:58:08Z", "path": "fcrepo-http-api/src/main/java/org/fcrepo/http/api/FedoraReindex.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.http.api;\n+\n+import io.micrometer.core.annotation.Timed;\n+import org.apache.http.HttpStatus;\n+import org.fcrepo.kernel.api.identifiers.FedoraId;\n+import org.fcrepo.kernel.api.services.ReindexService;\n+import org.slf4j.Logger;\n+import org.springframework.context.annotation.Scope;\n+\n+import javax.inject.Inject;\n+import javax.ws.rs.BadRequestException;\n+import javax.ws.rs.DELETE;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.PUT;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.Response;\n+\n+import static java.lang.String.format;\n+import static javax.ws.rs.core.MediaType.APPLICATION_JSON;\n+import static javax.ws.rs.core.Response.status;\n+import static org.fcrepo.http.commons.domain.RDFMediaType.TEXT_PLAIN_WITH_CHARSET;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+/**\n+ * @author dbernstein\n+ * @since 12/01/20\n+ */\n+@Timed\n+@Scope(\"request\")\n+@Path(\"/{path: (.+/)?}fcr:reindex\")\n+public class FedoraReindex extends FedoraBaseResource {\n+\n+    private static final Logger LOGGER = getLogger(FedoraReindex.class);\n+\n+    @Inject\n+    private ReindexService reindexService;\n+\n+    @PathParam(\"path\")\n+    protected String externalPath;\n+\n+    /**\n+     * Default JAX-RS entry point\n+     */\n+    public FedoraReindex() {\n+        super();\n+    }\n+\n+    /**\n+     * Reindex a fedora resource.\n+     *\n+     * @return A response\n+     */\n+    @POST\n+    @Produces({APPLICATION_JSON + \";qs=1.0\",\n+            TEXT_PLAIN_WITH_CHARSET})\n+    public Response reindexObject() {\n+        LOGGER.info(\"receiving reindex request for fedora_id = {}\", externalPath);\n+        try {\n+            final var transaction = transaction();\n+            final var id = FedoraId.create(externalPath);\n+            if (doesResourceExist(transaction, id, true)) {\n+                //TODO : remove this block once reindexing of existing resources is supported.\n+                return status(HttpStatus.SC_CONFLICT, \"Reindexing of existing resources is not currently supported. \" +\n+                        \"Only resources that have not yet been indexed are allowed.\").build();\n+            } else {\n+                try {\n+                    final var baseId = id.asBaseId();\n+                    transaction.lockResource(baseId);", "originalCommit": "2fc5bb59a75d6e599e3e0ec38e4746317b0aefeb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI4MjI5OQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r540282299", "bodyText": "@pwinckles :  I'm assuming the lock should also be released in the kernel layer as well (ie in the same routine as it is being done here in the http layer)?", "author": "dbernstein", "createdAt": "2020-12-10T15:53:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODcyNDQ1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ0NzA3Mg==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r540447072", "bodyText": "The way all of the other services work is that the kernel layer acquires the lock and the http layer initiates the transaction commit. The locks cannot be released before the transaction is committed, so so long as the transaction is committed in the http layer, the locks must also be released there.\nIf it is possible to push the commit down to the kernel, that does seem better to me, but I think we need to be consistent so that it's easy to reason about.", "author": "pwinckles", "createdAt": "2020-12-10T19:42:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODcyNDQ1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc3MzQ2MQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r543773461", "bodyText": "Please update this TODO comment to reference: https://jira.lyrasis.org/browse/FCREPO-3553", "author": "awoods", "createdAt": "2020-12-15T23:54:34Z", "path": "fcrepo-http-api/src/main/java/org/fcrepo/http/api/FedoraReindex.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.http.api;\n+\n+import io.micrometer.core.annotation.Timed;\n+import org.apache.http.HttpStatus;\n+import org.fcrepo.kernel.api.identifiers.FedoraId;\n+import org.fcrepo.kernel.api.services.ReindexService;\n+import org.slf4j.Logger;\n+import org.springframework.context.annotation.Scope;\n+\n+import javax.inject.Inject;\n+import javax.ws.rs.BadRequestException;\n+import javax.ws.rs.DELETE;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.PUT;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.Response;\n+\n+import static java.lang.String.format;\n+import static javax.ws.rs.core.MediaType.APPLICATION_JSON;\n+import static javax.ws.rs.core.Response.status;\n+import static org.fcrepo.http.commons.domain.RDFMediaType.TEXT_PLAIN_WITH_CHARSET;\n+import static org.slf4j.LoggerFactory.getLogger;\n+\n+/**\n+ * @author dbernstein\n+ * @since 12/01/20\n+ */\n+@Timed\n+@Scope(\"request\")\n+@Path(\"/{path: (.+/)?}fcr:reindex\")\n+public class FedoraReindex extends FedoraBaseResource {\n+\n+    private static final Logger LOGGER = getLogger(FedoraReindex.class);\n+\n+    @Inject\n+    private ReindexService reindexService;\n+\n+    @PathParam(\"path\")\n+    protected String externalPath;\n+\n+    /**\n+     * Default JAX-RS entry point\n+     */\n+    public FedoraReindex() {\n+        super();\n+    }\n+\n+    /**\n+     * Reindex a fedora resource.\n+     *\n+     * @return A response\n+     */\n+    @POST\n+    @Produces({APPLICATION_JSON + \";qs=1.0\",\n+            TEXT_PLAIN_WITH_CHARSET})\n+    public Response reindexObject() {\n+        LOGGER.info(\"receiving reindex request for fedora_id = {}\", externalPath);\n+        try {\n+            final var transaction = transaction();\n+            final var id = FedoraId.create(externalPath);\n+            if (doesResourceExist(transaction, id, true)) {\n+                //TODO : remove this block once reindexing of existing resources is supported.", "originalCommit": "2fc5bb59a75d6e599e3e0ec38e4746317b0aefeb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc3ODI1MQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r543778251", "bodyText": "Jumbled grammar: \"Failed find to the root resource\"", "author": "awoods", "createdAt": "2020-12-16T00:06:33Z", "path": "fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/ReindexService.java", "diffHunk": "@@ -146,7 +145,11 @@ public void indexOcflObject(final String txId, final String ocflId) {\n             });\n \n             if (rootId.get() == null) {\n-                throw new IllegalStateException(String.format(\"Failed to find root resource in object %s\", ocflId));\n+                throw new IllegalStateException(String.format(\"Failed find to the root resource in object identified\" +", "originalCommit": "2fc5bb59a75d6e599e3e0ec38e4746317b0aefeb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5NTUwMQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r544495501", "bodyText": "Did I write this?", "author": "pwinckles", "createdAt": "2020-12-16T17:42:00Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/BaseTestExecutionListener.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.integration.http.api;\n+\n+import org.fcrepo.http.commons.test.util.ContainerWrapper;\n+import org.fcrepo.kernel.api.ContainmentIndex;\n+import org.fcrepo.persistence.ocfl.api.FedoraToOcflObjectIndex;\n+import org.fcrepo.search.api.SearchIndex;\n+import org.springframework.test.context.TestContext;\n+import org.springframework.test.context.support.AbstractTestExecutionListener;\n+\n+/**\n+ * A base class test execution listener class.\n+ *\n+ * @author pwinkles", "originalCommit": "e22bffa12f68c6ab7485bda2e672f376371fbec7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUxMTYyMw==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r544511623", "bodyText": "If so, you misspelled your name.", "author": "awoods", "createdAt": "2020-12-16T18:05:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5NTUwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyMjY2Mg==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r544522662", "bodyText": "Since it was a refactoring and it included only your previous work,  I wanted to give credit where it was due.  I'll fix the spelling!", "author": "dbernstein", "createdAt": "2020-12-16T18:22:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5NTUwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5Njg2Nw==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r544496867", "bodyText": "I see that you moved this method up from another class, but while you're touching the code it is perhaps worth noting that there are now other tables that need to be cleared. Full list can be found here:\n\n  \n    \n      fcrepo/fcrepo-persistence-ocfl/src/main/java/org/fcrepo/persistence/ocfl/impl/ReindexService.java\n    \n    \n         Line 184\n      in\n      cf90469\n    \n    \n    \n    \n\n        \n          \n           public void reset() {", "author": "pwinckles", "createdAt": "2020-12-16T17:44:10Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/BaseTestExecutionListener.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.integration.http.api;\n+\n+import org.fcrepo.http.commons.test.util.ContainerWrapper;\n+import org.fcrepo.kernel.api.ContainmentIndex;\n+import org.fcrepo.persistence.ocfl.api.FedoraToOcflObjectIndex;\n+import org.fcrepo.search.api.SearchIndex;\n+import org.springframework.test.context.TestContext;\n+import org.springframework.test.context.support.AbstractTestExecutionListener;\n+\n+/**\n+ * A base class test execution listener class.\n+ *\n+ * @author pwinkles\n+ */\n+public class BaseTestExecutionListener extends AbstractTestExecutionListener {\n+\n+    protected void cleanDb(final TestContext testContext) {\n+        final ContainmentIndex containmentIndex = getBean(testContext, \"containmentIndex\");\n+        final FedoraToOcflObjectIndex ocflIndex = getBean(testContext, \"ocflIndex\");\n+        final SearchIndex searchIndex = getBean(testContext, \"searchIndex\");\n+\n+        containmentIndex.reset();\n+        ocflIndex.reset();\n+        searchIndex.reset();", "originalCommit": "e22bffa12f68c6ab7485bda2e672f376371fbec7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyMDEwMw==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r544520103", "bodyText": "Thanks - I'll take a look.", "author": "dbernstein", "createdAt": "2020-12-16T18:18:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5Njg2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUwMzUzNg==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r544503536", "bodyText": "Does this work? I don't remember the specifics anymore, but previously I had a terrible time getting windows to delete files deterministically. Assuming it does, how about we do the following?\n\nRename LinuxTestIsolationExecutionListener to TestIsolationExcecutionListener\nRemove the windows check\nGet the path to the ocfl root from the ocfl config, rather than hard coding (for example).\nDelete the ocfl root\nCall RepositoryInitializer.initialize() rather than the cleanup db code. Assuming there isn't a reason not to do this, this should be safer.\n\nThen, we should need this class and could just use modified class everywhere. I'm not sure if the dirties context bit is necessary. Did you try it without it? I believe the Rebuild listener uses it because it tampers with system properties that affect how the beans are loaded, but you aren't doing that here.", "author": "pwinckles", "createdAt": "2020-12-16T17:53:45Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/ReindexExecutionListener.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Licensed to DuraSpace under one or more contributor license agreements.\n+ * See the NOTICE file distributed with this work for additional information\n+ * regarding copyright ownership.\n+ *\n+ * DuraSpace licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except in\n+ * compliance with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.fcrepo.integration.http.api;\n+\n+import org.apache.commons.io.FileUtils;\n+import org.springframework.test.annotation.DirtiesContext.HierarchyMode;\n+import org.springframework.test.context.TestContext;\n+\n+import java.nio.file.Path;\n+\n+/**\n+ * Isolate ReindexITs from the rest of the IT contexts as well as tests within ReindexIT.\n+ *\n+ * @author dbernstein\n+ */\n+public class ReindexExecutionListener extends BaseTestExecutionListener {\n+\n+    @Override\n+    public void afterTestMethod(final TestContext testContext) throws Exception {\n+        FileUtils.deleteDirectory(Path.of(\"target/fcrepo-home/data/ocfl-root\").toFile());", "originalCommit": "e22bffa12f68c6ab7485bda2e672f376371fbec7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyMTQxMg==", "url": "https://github.com/fcrepo/fcrepo/pull/1826#discussion_r544521412", "bodyText": "Okay - that all sounds good. I'll try it.", "author": "dbernstein", "createdAt": "2020-12-16T18:20:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUwMzUzNg=="}], "type": "inlineReview"}, {"oid": "5d53fcb989167e1b8db6b88d9a42fcd6bb3d1dc1", "url": "https://github.com/fcrepo/fcrepo/commit/5d53fcb989167e1b8db6b88d9a42fcd6bb3d1dc1", "message": "Adds support for side-loading of new resources.\nResolves: https://jira.lyrasis.org/browse/FCREPO-3332", "committedDate": "2020-12-16T20:51:43Z", "type": "commit"}, {"oid": "3ab582e78abca1629575a8b4185d003008e78d09", "url": "https://github.com/fcrepo/fcrepo/commit/3ab582e78abca1629575a8b4185d003008e78d09", "message": "Adds locking support as well as minor updates in response to feedback.", "committedDate": "2020-12-16T20:51:43Z", "type": "commit"}, {"oid": "6643181e9868abfa9cea80c5945eb37568a941df", "url": "https://github.com/fcrepo/fcrepo/commit/6643181e9868abfa9cea80c5945eb37568a941df", "message": "Adds additional integration tests, ensures 405s returned on non-POST operations, and\nimproves error message returned on bad requests.", "committedDate": "2020-12-16T20:51:43Z", "type": "commit"}, {"oid": "46c54f22d85051ffa5e41e92e03929d3413ae610", "url": "https://github.com/fcrepo/fcrepo/commit/46c54f22d85051ffa5e41e92e03929d3413ae610", "message": "Ensures the resource to be indexed is locked first.", "committedDate": "2020-12-16T20:51:43Z", "type": "commit"}, {"oid": "e2cf32c23843dbf77283bb179edaa2217cd4721e", "url": "https://github.com/fcrepo/fcrepo/commit/e2cf32c23843dbf77283bb179edaa2217cd4721e", "message": "Fixes broken integration test on windows.", "committedDate": "2020-12-16T20:51:43Z", "type": "commit"}, {"oid": "3309e5084c383f90e421b0d0d9fb8174797df042", "url": "https://github.com/fcrepo/fcrepo/commit/3309e5084c383f90e421b0d0d9fb8174797df042", "message": "Fixes suboptimal grammar in error message.", "committedDate": "2020-12-16T20:51:43Z", "type": "commit"}, {"oid": "3c859a3d1c7a23fc1ab79aa9adf1c8d7e0c15ae3", "url": "https://github.com/fcrepo/fcrepo/commit/3c859a3d1c7a23fc1ab79aa9adf1c8d7e0c15ae3", "message": "Adds jira reference to todo.", "committedDate": "2020-12-16T20:51:43Z", "type": "commit"}, {"oid": "fe890b21a685ccf9dd464d48b17cd8d87aaf39b7", "url": "https://github.com/fcrepo/fcrepo/commit/fe890b21a685ccf9dd464d48b17cd8d87aaf39b7", "message": "Second attempt to fix integration test failure on windows.", "committedDate": "2020-12-16T20:59:35Z", "type": "commit"}, {"oid": "fe890b21a685ccf9dd464d48b17cd8d87aaf39b7", "url": "https://github.com/fcrepo/fcrepo/commit/fe890b21a685ccf9dd464d48b17cd8d87aaf39b7", "message": "Second attempt to fix integration test failure on windows.", "committedDate": "2020-12-16T20:59:35Z", "type": "forcePushed"}]}