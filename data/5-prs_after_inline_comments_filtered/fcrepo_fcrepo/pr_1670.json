{"pr_number": 1670, "pr_title": "re-enable dynamic port selection for cli ITest", "pr_createdAt": "2020-04-30T17:44:13Z", "pr_url": "https://github.com/fcrepo/fcrepo/pull/1670", "timeline": [{"oid": "6b25f3b20f2da6e71eba65bf081b4dc81df9b0ce", "url": "https://github.com/fcrepo/fcrepo/commit/6b25f3b20f2da6e71eba65bf081b4dc81df9b0ce", "message": "re-enable dynamic port selection for cli ITest; while keeping IDE ITests working", "committedDate": "2020-04-30T17:37:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIwMDAxNQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1670#discussion_r418200015", "bodyText": "What purpose does looking for fcrepo.dynamic.test.port service, since you removed its being set in the pom.xml? https://github.com/fcrepo4/fcrepo4/pull/1670/files#diff-44094b67d49071d47bb32efe43678722L70", "author": "awoods", "createdAt": "2020-04-30T18:15:43Z", "path": "fcrepo-auth-common/src/test/java/org/fcrepo/auth/integration/AbstractResourceIT.java", "diffHunk": "@@ -48,8 +52,8 @@ public void setLogger() {\n         logger = LoggerFactory.getLogger(this.getClass());\n     }\n \n-    private static final int SERVER_PORT = Integer.parseInt(System\n-            .getProperty(\"fcrepo.dynamic.test.port\", \"8080\"));\n+    private static final int SERVER_PORT = parseInt(Objects.requireNonNullElse(\n+            Strings.emptyToNull(System.getProperty(\"fcrepo.dynamic.test.port\")), \"8080\"));", "originalCommit": "6b25f3b20f2da6e71eba65bf081b4dc81df9b0ce", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIwMzgwMQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1670#discussion_r418203801", "bodyText": "?\nThe property is set by the build-maven-helper-plugin when it reserves a port. The line I removed was the line that @bbpennel added that original broke the dynamic port assignment.", "author": "pwinckles", "createdAt": "2020-04-30T18:22:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIwMDAxNQ=="}], "type": "inlineReview"}, {"oid": "c0bfe522a01827dedfa5c05aa30bf60e588bef3f", "url": "https://github.com/fcrepo/fcrepo/commit/c0bfe522a01827dedfa5c05aa30bf60e588bef3f", "message": "fix line length", "committedDate": "2020-04-30T18:28:22Z", "type": "commit"}, {"oid": "3ded8e6650f5d901043680a8d04a8308888030bb", "url": "https://github.com/fcrepo/fcrepo/commit/3ded8e6650f5d901043680a8d04a8308888030bb", "message": "fix port when property is null", "committedDate": "2020-05-01T12:30:39Z", "type": "commit"}]}