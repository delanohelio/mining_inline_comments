{"pr_number": 2875, "pr_title": "Initial support for MatchPredicates in Device REST API", "pr_createdAt": "2020-03-03T15:56:19Z", "pr_url": "https://github.com/eclipse/kapua/pull/2875", "timeline": [{"oid": "01a41d53c58c80a28b35c40166e4f4744637440b", "url": "https://github.com/eclipse/kapua/commit/01a41d53c58c80a28b35c40166e4f4744637440b", "message": "Initial support for MatchPredicates in Device REST API\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-03T16:04:12Z", "type": "forcePushed"}, {"oid": "d97bc837798085a37ff5ee1439abb33e6272edf4", "url": "https://github.com/eclipse/kapua/commit/d97bc837798085a37ff5ee1439abb33e6272edf4", "message": "Initial support for MatchPredicates in Device REST API\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-03T16:21:37Z", "type": "forcePushed"}, {"oid": "438e8b93d41a5960163be6f9ff30e86650375767", "url": "https://github.com/eclipse/kapua/commit/438e8b93d41a5960163be6f9ff30e86650375767", "message": "Initial support for MatchPredicates in Device REST API\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-04T11:42:31Z", "type": "forcePushed"}, {"oid": "da275c611721cc63545c910112c96b353785dc4f", "url": "https://github.com/eclipse/kapua/commit/da275c611721cc63545c910112c96b353785dc4f", "message": "Initial support for MatchPredicates in Device REST API\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-04T14:29:58Z", "type": "forcePushed"}, {"oid": "e80b00f3aefbc4d9bca0c640a757b97c017cb060", "url": "https://github.com/eclipse/kapua/commit/e80b00f3aefbc4d9bca0c640a757b97c017cb060", "message": "Initial support for MatchPredicates in Device REST API\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-04T14:46:39Z", "type": "forcePushed"}, {"oid": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "url": "https://github.com/eclipse/kapua/commit/e89ce594627293b00dbcb3438ed9a13c31dbd723", "message": "Initial support for MatchPredicates in Device REST API\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-05T07:55:34Z", "type": "commit"}, {"oid": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "url": "https://github.com/eclipse/kapua/commit/e89ce594627293b00dbcb3438ed9a13c31dbd723", "message": "Initial support for MatchPredicates in Device REST API\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-05T07:55:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2MDY5MA==", "url": "https://github.com/eclipse/kapua/pull/2875#discussion_r465560690", "bodyText": "Please fix", "author": "Coduz", "createdAt": "2020-08-05T08:27:34Z", "path": "commons/src/main/java/org/eclipse/kapua/commons/model/query/predicate/AbstractMatchPredicate.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.commons.model.query.predicate;\n+\n+import java.util.List;\n+\n+import org.eclipse.kapua.model.query.predicate.MatchPredicate;\n+\n+/**\n+ * {@link MatchPredicate} implementation.\n+ *\n+ * @since 1.2.0", "originalCommit": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2MTE0MA==", "url": "https://github.com/eclipse/kapua/pull/2875#discussion_r465561140", "bodyText": "Please fix", "author": "Coduz", "createdAt": "2020-08-05T08:28:21Z", "path": "service/api/src/main/java/org/eclipse/kapua/model/query/predicate/AttributePredicate.java", "diffHunk": "@@ -71,6 +71,17 @@\n          * @since 1.0.0\n          */\n         STARTS_WITH,\n+\n+        /**\n+         * The same of {@link #STARTS_WITH} {@link Operator} but case insensitive\n+         * <p>\n+         * Matches results with value that starts with the given value, case insensitive.\n+         * To be used with {@link String} {@link org.eclipse.kapua.model.KapuaEntityAttributes}.\n+         *\n+         * @since 1.2.0", "originalCommit": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2MTIzNA==", "url": "https://github.com/eclipse/kapua/pull/2875#discussion_r465561234", "bodyText": "Please fix", "author": "Coduz", "createdAt": "2020-08-05T08:28:29Z", "path": "service/api/src/main/java/org/eclipse/kapua/model/query/predicate/AttributePredicate.java", "diffHunk": "@@ -83,6 +94,18 @@\n          */\n         LIKE,\n \n+        /**\n+         * {@link #LIKE} {@link Operator} but case insensitive\n+         * <p>\n+         * Matches results with value that are like (in SQL fashion) the given value case insensitive.\n+         * To be used with {@link String} {@link org.eclipse.kapua.model.KapuaEntityAttributes}.\n+         * <p>\n+         * If you want to match only the beginning of the {@link String} please consider using {@link #STARTS_WITH_IGNORE_CASE}.\n+         *\n+         * @since 1.2.0", "originalCommit": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2MTM0Mg==", "url": "https://github.com/eclipse/kapua/pull/2875#discussion_r465561342", "bodyText": "Please fix", "author": "Coduz", "createdAt": "2020-08-05T08:28:40Z", "path": "service/api/src/main/java/org/eclipse/kapua/model/query/predicate/MatchPredicate.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.model.query.predicate;\n+\n+import java.util.List;\n+\n+/**\n+ * {@link MatchPredicate} definition.\n+ *\n+ * @param <T> Attribute value type.\n+ * @since 1.2.0", "originalCommit": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2MTQzOQ==", "url": "https://github.com/eclipse/kapua/pull/2875#discussion_r465561439", "bodyText": "Please fix", "author": "Coduz", "createdAt": "2020-08-05T08:28:48Z", "path": "service/api/src/main/java/org/eclipse/kapua/model/query/predicate/MatchPredicate.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.model.query.predicate;\n+\n+import java.util.List;\n+\n+/**\n+ * {@link MatchPredicate} definition.\n+ *\n+ * @param <T> Attribute value type.\n+ * @since 1.2.0\n+ */\n+public interface MatchPredicate<T> extends QueryPredicate {\n+\n+    /**\n+     * Gets the name of the {@link org.eclipse.kapua.model.KapuaEntityAttributes} to compare.\n+     *\n+     * @return The name name of the {@link org.eclipse.kapua.model.KapuaEntityAttributes} to compare.\n+     * @since 1.0.0", "originalCommit": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2MTQ5Mw==", "url": "https://github.com/eclipse/kapua/pull/2875#discussion_r465561493", "bodyText": "Please fix", "author": "Coduz", "createdAt": "2020-08-05T08:28:54Z", "path": "service/api/src/main/java/org/eclipse/kapua/model/query/predicate/MatchPredicate.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.model.query.predicate;\n+\n+import java.util.List;\n+\n+/**\n+ * {@link MatchPredicate} definition.\n+ *\n+ * @param <T> Attribute value type.\n+ * @since 1.2.0\n+ */\n+public interface MatchPredicate<T> extends QueryPredicate {\n+\n+    /**\n+     * Gets the name of the {@link org.eclipse.kapua.model.KapuaEntityAttributes} to compare.\n+     *\n+     * @return The name name of the {@link org.eclipse.kapua.model.KapuaEntityAttributes} to compare.\n+     * @since 1.0.0\n+     */\n+    List<String> getAttributeNames();\n+\n+    /**\n+     * Gets the value to compare the results.\n+     *\n+     * @return The value to compare the results.\n+     * @since 1.0.0", "originalCommit": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2MTc0OQ==", "url": "https://github.com/eclipse/kapua/pull/2875#discussion_r465561749", "bodyText": "Please fix", "author": "Coduz", "createdAt": "2020-08-05T08:29:21Z", "path": "service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceMatchPredicate.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.service.device.registry;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+\n+import org.eclipse.kapua.commons.model.query.predicate.AbstractMatchPredicate;\n+\n+public class DeviceMatchPredicate<T> extends AbstractMatchPredicate<T> {\n+\n+    /**\n+     * Constructor.\n+     * <p>\n+     *\n+     * @param matchTerm\n+     * @since 1.2.0", "originalCommit": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2MTkwNg==", "url": "https://github.com/eclipse/kapua/pull/2875#discussion_r465561906", "bodyText": "Please remove <p>", "author": "Coduz", "createdAt": "2020-08-05T08:29:37Z", "path": "service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceMatchPredicate.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.service.device.registry;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+\n+import org.eclipse.kapua.commons.model.query.predicate.AbstractMatchPredicate;\n+\n+public class DeviceMatchPredicate<T> extends AbstractMatchPredicate<T> {\n+\n+    /**\n+     * Constructor.\n+     * <p>", "originalCommit": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2NDE0NA==", "url": "https://github.com/eclipse/kapua/pull/2875#discussion_r465564144", "bodyText": "new ArrayList<> can be removed since Arrays.asList returns a List", "author": "Coduz", "createdAt": "2020-08-05T08:33:34Z", "path": "service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceMatchPredicate.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.service.device.registry;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+\n+import org.eclipse.kapua.commons.model.query.predicate.AbstractMatchPredicate;\n+\n+public class DeviceMatchPredicate<T> extends AbstractMatchPredicate<T> {\n+\n+    /**\n+     * Constructor.\n+     * <p>\n+     *\n+     * @param matchTerm\n+     * @since 1.2.0\n+     */\n+    public DeviceMatchPredicate(T matchTerm) {\n+        this.attributeNames = new ArrayList<>(Arrays.asList(", "originalCommit": "e89ce594627293b00dbcb3438ed9a13c31dbd723", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7536c63afa7844041396d4553c0471bb8072e40c", "url": "https://github.com/eclipse/kapua/commit/7536c63afa7844041396d4553c0471bb8072e40c", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-05T09:00:10Z", "type": "forcePushed"}, {"oid": "b06809851527dae735ab87b00cb51c085ba90463", "url": "https://github.com/eclipse/kapua/commit/b06809851527dae735ab87b00cb51c085ba90463", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-05T09:03:06Z", "type": "commit"}, {"oid": "b06809851527dae735ab87b00cb51c085ba90463", "url": "https://github.com/eclipse/kapua/commit/b06809851527dae735ab87b00cb51c085ba90463", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-05T09:03:06Z", "type": "forcePushed"}]}