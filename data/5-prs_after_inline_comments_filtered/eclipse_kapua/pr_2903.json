{"pr_number": 2903, "pr_title": "RESTful HTTP return codes", "pr_createdAt": "2020-03-19T15:36:23Z", "pr_url": "https://github.com/eclipse/kapua/pull/2903", "timeline": [{"oid": "dad78a836b31a0199ba8cb44d2f82d286b07f11a", "url": "https://github.com/eclipse/kapua/commit/dad78a836b31a0199ba8cb44d2f82d286b07f11a", "message": "Return 201 for Created and 204 for No Content\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-19T11:56:39Z", "type": "commit"}, {"oid": "d8a2962c47c40a2809defb427e97dad4b567d662", "url": "https://github.com/eclipse/kapua/commit/d8a2962c47c40a2809defb427e97dad4b567d662", "message": "Throw KapuaException instead of Exception\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-19T12:26:37Z", "type": "commit"}, {"oid": "7fcaef2148895936d413c735f0842b52814fbaa1", "url": "https://github.com/eclipse/kapua/commit/7fcaef2148895936d413c735f0842b52814fbaa1", "message": "Use base class for static references\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-19T12:36:31Z", "type": "commit"}, {"oid": "b55a00171dd5075ce3ecc7d9bb2ae791f76abeb8", "url": "https://github.com/eclipse/kapua/commit/b55a00171dd5075ce3ecc7d9bb2ae791f76abeb8", "message": "Other Sonar fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-19T14:57:38Z", "type": "commit"}, {"oid": "7846f60f8e40309f91b15f48ee3a8df722295015", "url": "https://github.com/eclipse/kapua/commit/7846f60f8e40309f91b15f48ee3a8df722295015", "message": "Change return codes in OpenAPI spec\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-19T15:43:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MjE0MA==", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395492140", "bodyText": "Use returnNoContent()", "author": "Coduz", "createdAt": "2020-03-20T08:27:54Z", "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementBundles.java", "diffHunk": "@@ -80,7 +81,7 @@ public Response start(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @PathParam(\"bundleId\") String bundleId,\n-            @QueryParam(\"timeout\") Long timeout) throws Exception {\n+            @QueryParam(\"timeout\") Long timeout) throws KapuaException {\n         bundleService.start(scopeId, deviceId, bundleId, timeout);\n \n         return returnOk();", "originalCommit": "7846f60f8e40309f91b15f48ee3a8df722295015", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MjIxMA==", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395492210", "bodyText": "Use returnNoContent()", "author": "Coduz", "createdAt": "2020-03-20T08:28:03Z", "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementBundles.java", "diffHunk": "@@ -105,7 +106,7 @@ public Response stop(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @PathParam(\"bundleId\") String bundleId,\n-            @QueryParam(\"timeout\") Long timeout) throws Exception {\n+            @QueryParam(\"timeout\") Long timeout) throws KapuaException {\n         bundleService.stop(scopeId, deviceId, bundleId, timeout);\n \n         return returnOk();", "originalCommit": "7846f60f8e40309f91b15f48ee3a8df722295015", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MjU0MA==", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395492540", "bodyText": "Use returnNoContent()\nAlso in updateComponent", "author": "Coduz", "createdAt": "2020-03-20T08:28:44Z", "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementConfigurations.java", "diffHunk": "@@ -81,7 +82,7 @@ public Response update(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @QueryParam(\"timeout\") Long timeout,\n-            DeviceConfiguration deviceConfiguration) throws Exception {\n+            DeviceConfiguration deviceConfiguration) throws KapuaException {\n         configurationService.put(scopeId, deviceId, deviceConfiguration, timeout);\n \n         return returnOk();", "originalCommit": "7846f60f8e40309f91b15f48ee3a8df722295015", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MzUzMA==", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395493530", "bodyText": "Use returnNoContent()", "author": "Coduz", "createdAt": "2020-03-20T08:30:59Z", "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementPackages.java", "diffHunk": "@@ -112,8 +119,10 @@ public Response uninstall(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @QueryParam(\"timeout\") Long timeout,\n-            DevicePackageUninstallRequest packageUninstallRequest) throws Exception {\n-        packageService.uninstallExec(scopeId, deviceId, packageUninstallRequest, timeout);\n+            DevicePackageUninstallRequest packageUninstallRequest) throws KapuaException {\n+        DevicePackageUninstallOptions options = packageFactory.newDevicePackageUninstallOptions();\n+        options.setTimeout(timeout);\n+        packageService.uninstallExec(scopeId, deviceId, packageUninstallRequest, options);\n \n         return returnOk();", "originalCommit": "7846f60f8e40309f91b15f48ee3a8df722295015", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MzU3MQ==", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395493571", "bodyText": "Use returnNoContent()", "author": "Coduz", "createdAt": "2020-03-20T08:31:07Z", "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementPackages.java", "diffHunk": "@@ -83,8 +88,10 @@ public Response download(\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @QueryParam(\"timeout\") Long timeout,\n             DevicePackageDownloadRequest packageDownloadRequest)\n-            throws Exception {\n-        packageService.downloadExec(scopeId, deviceId, packageDownloadRequest, timeout);\n+            throws KapuaException {\n+        DevicePackageDownloadOptions options = packageFactory.newDevicePackageDownloadOptions();\n+        options.setTimeout(timeout);\n+        packageService.downloadExec(scopeId, deviceId, packageDownloadRequest, options);\n \n         return returnOk();", "originalCommit": "7846f60f8e40309f91b15f48ee3a8df722295015", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MzcyMA==", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395493720", "bodyText": "Use returnNoContent()", "author": "Coduz", "createdAt": "2020-03-20T08:31:32Z", "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementSnapshots.java", "diffHunk": "@@ -83,7 +84,7 @@ public Response rollback(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @PathParam(\"snapshotId\") String snapshotId,\n-            @QueryParam(\"timeout\") Long timeout) throws Exception {\n+            @QueryParam(\"timeout\") Long timeout) throws KapuaException {\n         snapshotService.rollback(scopeId, deviceId, snapshotId, timeout);\n \n         return returnOk();", "originalCommit": "7846f60f8e40309f91b15f48ee3a8df722295015", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f36cd32c8749f9d2641945df5f53b672f191bf39", "url": "https://github.com/eclipse/kapua/commit/f36cd32c8749f9d2641945df5f53b672f191bf39", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-20T09:51:44Z", "type": "forcePushed"}, {"oid": "70f5b13ec9863ef21448194734764636a30b7696", "url": "https://github.com/eclipse/kapua/commit/70f5b13ec9863ef21448194734764636a30b7696", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-20T09:50:21Z", "type": "forcePushed"}, {"oid": "d2ec6f5d85c9140e31716812af03968c542d807e", "url": "https://github.com/eclipse/kapua/commit/d2ec6f5d85c9140e31716812af03968c542d807e", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-20T10:34:21Z", "type": "commit"}, {"oid": "d2ec6f5d85c9140e31716812af03968c542d807e", "url": "https://github.com/eclipse/kapua/commit/d2ec6f5d85c9140e31716812af03968c542d807e", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-20T10:34:21Z", "type": "forcePushed"}]}