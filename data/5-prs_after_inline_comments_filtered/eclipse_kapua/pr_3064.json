{"pr_number": 3064, "pr_title": "Added JUnit tests for TransportModule part1", "pr_createdAt": "2020-09-02T07:04:04Z", "pr_url": "https://github.com/eclipse/kapua/pull/3064", "timeline": [{"oid": "f730ab020d5bbc04b3d1d7342550595c0ccfeb55", "url": "https://github.com/eclipse/kapua/commit/f730ab020d5bbc04b3d1d7342550595c0ccfeb55", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>", "committedDate": "2020-09-03T07:36:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwMTEwMg==", "url": "https://github.com/eclipse/kapua/pull/3064#discussion_r482901102", "bodyText": "Please add test:\n@Test\n public void mqttMessageConstructorResponseTopicNullTest() {\n     MqttMessage mqttMessage = new MqttMessage(requestTopic, (MqttTopic) null, mqttPayload);\n     assertEquals(\"Expected and actual value should be the same!\", requestTopic , mqttMessage.getRequestTopic());\n     assertNull(\"Null expected!\", mqttMessage.getResponseTopic());\n     assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n }", "author": "LeoNerdoG", "createdAt": "2020-09-03T11:17:58Z", "path": "transport/mqtt/src/test/java/org/eclipse/kapua/transport/mqtt/test/message/mqtt/MqttMessageTest.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.transport.mqtt.test.message.mqtt;\n+\n+import org.eclipse.kapua.qa.markers.junit.JUnitTests;\n+import org.eclipse.kapua.transport.message.mqtt.MqttMessage;\n+import org.eclipse.kapua.transport.message.mqtt.MqttPayload;\n+import org.eclipse.kapua.transport.message.mqtt.MqttTopic;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+\n+import java.util.Date;\n+\n+@Category(JUnitTests.class)\n+public class MqttMessageTest extends Assert {\n+\n+    MqttTopic requestTopic, responseTopic;\n+    MqttPayload mqttPayload;\n+    Date date;\n+\n+    @Before\n+    public void createInstancesOfClasses() {\n+        requestTopic = new MqttTopic(\"requestTopic\");\n+        responseTopic = new MqttTopic(\"responseTopic\");\n+        mqttPayload = new MqttPayload(\"payload.code\".getBytes());\n+        date = new Date();\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructorTest() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, responseTopic, mqttPayload);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", responseTopic, mqttMessage.getResponseTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructorRequestTopicNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(null, responseTopic, mqttPayload);\n+        assertNull(\"Null expected!\", mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", responseTopic, mqttMessage.getResponseTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructorRequestPayloadNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, responseTopic, null);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", responseTopic, mqttMessage.getResponseTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", \"\", mqttMessage.getPayload().toString());\n+    }\n+", "originalCommit": "f730ab020d5bbc04b3d1d7342550595c0ccfeb55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwMTYwNQ==", "url": "https://github.com/eclipse/kapua/pull/3064#discussion_r482901605", "bodyText": "Please add test:\n    @Test\n    public void mqttMessageConstructor2DateNullTest() {\n        MqttMessage mqttMessage = new MqttMessage(requestTopic, (Date) null, mqttPayload);\n        assertEquals(\"Expected and actual value should be the same!\", requestTopic , mqttMessage.getRequestTopic());\n        assertNull(\"Null expected!\", mqttMessage.getResponseTopic());\n        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n    }", "author": "LeoNerdoG", "createdAt": "2020-09-03T11:18:57Z", "path": "transport/mqtt/src/test/java/org/eclipse/kapua/transport/mqtt/test/message/mqtt/MqttMessageTest.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.transport.mqtt.test.message.mqtt;\n+\n+import org.eclipse.kapua.qa.markers.junit.JUnitTests;\n+import org.eclipse.kapua.transport.message.mqtt.MqttMessage;\n+import org.eclipse.kapua.transport.message.mqtt.MqttPayload;\n+import org.eclipse.kapua.transport.message.mqtt.MqttTopic;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+\n+import java.util.Date;\n+\n+@Category(JUnitTests.class)\n+public class MqttMessageTest extends Assert {\n+\n+    MqttTopic requestTopic, responseTopic;\n+    MqttPayload mqttPayload;\n+    Date date;\n+\n+    @Before\n+    public void createInstancesOfClasses() {\n+        requestTopic = new MqttTopic(\"requestTopic\");\n+        responseTopic = new MqttTopic(\"responseTopic\");\n+        mqttPayload = new MqttPayload(\"payload.code\".getBytes());\n+        date = new Date();\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructorTest() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, responseTopic, mqttPayload);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", responseTopic, mqttMessage.getResponseTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructorRequestTopicNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(null, responseTopic, mqttPayload);\n+        assertNull(\"Null expected!\", mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", responseTopic, mqttMessage.getResponseTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructorRequestPayloadNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, responseTopic, null);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", responseTopic, mqttMessage.getResponseTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", \"\", mqttMessage.getPayload().toString());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructor2Test() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, date, mqttPayload);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", date, mqttMessage.getTimestamp());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructor2MqttRequestNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(null, date, mqttPayload);\n+        assertNull(\"Null expected!\", mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", date, mqttMessage.getTimestamp());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructor2RequestPayloadNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, date, null);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", date, mqttMessage.getTimestamp());\n+        assertEquals(\"Expected and actual value should be the same!\", \"\", mqttMessage.getPayload().toString());\n+    }\n+", "originalCommit": "f730ab020d5bbc04b3d1d7342550595c0ccfeb55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNDEwOA==", "url": "https://github.com/eclipse/kapua/pull/3064#discussion_r482904108", "bodyText": "For MqttMessage constructors add additional tests:\n\nalphanumeric characters combined with numbers and whitespaces for requestTopic, responseTopic, Payload and receivedOn paramteres\nalphanumeric characters combined with special symbols and whitespaces for requestTopic, responseTopic, Payload and receivedOn paramteres\n\nWe need these checks for future, if implementations change, that we get notified by tests.\nAlso add additional tests just for setters in this case, because for now the setters are only implicitly tested, throught constructors. Again, if implementation changes, we will be \"notified\" by tests.", "author": "LeoNerdoG", "createdAt": "2020-09-03T11:23:33Z", "path": "transport/mqtt/src/test/java/org/eclipse/kapua/transport/mqtt/test/message/mqtt/MqttMessageTest.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.transport.mqtt.test.message.mqtt;\n+\n+import org.eclipse.kapua.qa.markers.junit.JUnitTests;\n+import org.eclipse.kapua.transport.message.mqtt.MqttMessage;\n+import org.eclipse.kapua.transport.message.mqtt.MqttPayload;\n+import org.eclipse.kapua.transport.message.mqtt.MqttTopic;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+\n+import java.util.Date;\n+\n+@Category(JUnitTests.class)\n+public class MqttMessageTest extends Assert {\n+\n+    MqttTopic requestTopic, responseTopic;\n+    MqttPayload mqttPayload;\n+    Date date;\n+\n+    @Before\n+    public void createInstancesOfClasses() {\n+        requestTopic = new MqttTopic(\"requestTopic\");\n+        responseTopic = new MqttTopic(\"responseTopic\");\n+        mqttPayload = new MqttPayload(\"payload.code\".getBytes());\n+        date = new Date();\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructorTest() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, responseTopic, mqttPayload);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", responseTopic, mqttMessage.getResponseTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructorRequestTopicNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(null, responseTopic, mqttPayload);\n+        assertNull(\"Null expected!\", mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", responseTopic, mqttMessage.getResponseTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructorRequestPayloadNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, responseTopic, null);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", responseTopic, mqttMessage.getResponseTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", \"\", mqttMessage.getPayload().toString());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructor2Test() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, date, mqttPayload);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", date, mqttMessage.getTimestamp());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructor2MqttRequestNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(null, date, mqttPayload);\n+        assertNull(\"Null expected!\", mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", date, mqttMessage.getTimestamp());\n+        assertEquals(\"Expected and actual value should be the same!\", mqttPayload, mqttMessage.getPayload());\n+    }\n+\n+    @Test\n+    public void mqttMessageConstructor2RequestPayloadNullTest() {\n+        MqttMessage mqttMessage = new MqttMessage(requestTopic, date, null);\n+        assertEquals(\"Expected and actual value should be the same!\", requestTopic, mqttMessage.getRequestTopic());\n+        assertEquals(\"Expected and actual value should be the same!\", date, mqttMessage.getTimestamp());\n+        assertEquals(\"Expected and actual value should be the same!\", \"\", mqttMessage.getPayload().toString());\n+    }\n+\n+    @Test", "originalCommit": "f730ab020d5bbc04b3d1d7342550595c0ccfeb55", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTUzNDM5OA==", "url": "https://github.com/eclipse/kapua/pull/3064#discussion_r485534398", "bodyText": "Just add stuff into the\n    @Before\n    public void createInstancesOfClasses() {\n        requestTopic = new MqttTopic(\"requestTopic\");\n        responseTopic = new MqttTopic(\"responseTopic\");\n        mqttPayload = new MqttPayload(\"payload.code\".getBytes());\n        date = new Date();\n    }\n\npart (you can change the whole suite into parameterized tests), so we check for all other options.", "author": "LeoNerdoG", "createdAt": "2020-09-09T11:21:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNDEwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkzNzEwNw==", "url": "https://github.com/eclipse/kapua/pull/3064#discussion_r482937107", "bodyText": "Please add test:\n    @Test\n    public void constructorTest1() throws IllegalAccessException, InvocationTargetException, InstantiationException, NoSuchMethodException {\n        Constructor<MqttPayload> argvalidator = MqttPayload.class.getDeclaredConstructor();\n        Constructor<MqttPayload> mqttPayloadConstructor = MqttPayload.class.getDeclaredConstructor();\n        mqttPayloadConstructor.setAccessible(true);\n        mqttPayloadConstructor.newInstance();\n    }\n\nfor checking the default package-only-accessible constructor, to achieve higher coverage.", "author": "LeoNerdoG", "createdAt": "2020-09-03T12:24:52Z", "path": "transport/mqtt/src/test/java/org/eclipse/kapua/transport/mqtt/test/message/mqtt/MqttPayloadTest.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.transport.mqtt.test.message.mqtt;\n+\n+import org.eclipse.kapua.qa.markers.junit.JUnitTests;\n+import org.eclipse.kapua.transport.message.mqtt.MqttPayload;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+\n+@Category(JUnitTests.class)\n+public class MqttPayloadTest extends Assert {\n+\n+    MqttPayload mqttPayload;\n+\n+    @Before\n+    public void createInstanceOfClass() {\n+        mqttPayload = new MqttPayload(body);\n+    }\n+\n+    byte[] body = \"!#$%&'()=?\u2044@\u2039\u203a\u20ac\u00b0\u00b7\u201a,.-;:_\u00c8\u02c7\u00bf<>\u00ab\u2018\u201d\u2019\u00c9\u00d8\u220f{}|\u00c6\u00e6\u00d2uF8FF\u00d4\u00d3\u00cc\u00cf\u00ce\u00c5\u00ab\u00bb\u00c7\u25ca\u00d1\u02c6\u00af\u00c8\u02c7qwertyuiopasdfghjklzxcvbnm1234567890\".getBytes();\n+\n+    @Test\n+    public void mqttPayloadSetAndGetTest() {\n+        mqttPayload.setBody(body);\n+        assertEquals(\"Expected and actual values should be the same!\", body, mqttPayload.getBody());\n+    }\n+", "originalCommit": "f730ab020d5bbc04b3d1d7342550595c0ccfeb55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "31cf670eb6fb914ec6f284eda7580f612d960e24", "url": "https://github.com/eclipse/kapua/commit/31cf670eb6fb914ec6f284eda7580f612d960e24", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>", "committedDate": "2020-09-07T13:02:42Z", "type": "forcePushed"}, {"oid": "1eb5aa51e7b61cd9089f9d73e1d17262584ad63b", "url": "https://github.com/eclipse/kapua/commit/1eb5aa51e7b61cd9089f9d73e1d17262584ad63b", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>", "committedDate": "2020-09-11T09:38:07Z", "type": "forcePushed"}, {"oid": "654f4d6790bd873bee04298b5bf609d0e30e0916", "url": "https://github.com/eclipse/kapua/commit/654f4d6790bd873bee04298b5bf609d0e30e0916", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>", "committedDate": "2020-09-11T12:41:00Z", "type": "forcePushed"}, {"oid": "afb3b500b4450dfd1aa7bb02f56f71e4fa1e6693", "url": "https://github.com/eclipse/kapua/commit/afb3b500b4450dfd1aa7bb02f56f71e4fa1e6693", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>", "committedDate": "2020-09-11T13:19:55Z", "type": "forcePushed"}, {"oid": "0678a08ee9be19e7099c8139f70febe24e223fb8", "url": "https://github.com/eclipse/kapua/commit/0678a08ee9be19e7099c8139f70febe24e223fb8", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>", "committedDate": "2020-09-28T06:37:19Z", "type": "forcePushed"}, {"oid": "615e00956d6dbcf7ac0a3bba22cbdddb9111e328", "url": "https://github.com/eclipse/kapua/commit/615e00956d6dbcf7ac0a3bba22cbdddb9111e328", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>", "committedDate": "2020-09-30T09:28:20Z", "type": "forcePushed"}, {"oid": "88fd650e275ce3986479c71c087df97c3844a4ea", "url": "https://github.com/eclipse/kapua/commit/88fd650e275ce3986479c71c087df97c3844a4ea", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@endava.com>", "committedDate": "2020-10-09T13:18:48Z", "type": "forcePushed"}, {"oid": "6bb94bf4d3809dad72f7247335670017c03a50b2", "url": "https://github.com/eclipse/kapua/commit/6bb94bf4d3809dad72f7247335670017c03a50b2", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@endava.com>", "committedDate": "2020-10-09T14:03:58Z", "type": "commit"}, {"oid": "6bb94bf4d3809dad72f7247335670017c03a50b2", "url": "https://github.com/eclipse/kapua/commit/6bb94bf4d3809dad72f7247335670017c03a50b2", "message": "Added JUnit tests for TransportModule part1\n\nSigned-off-by: code-incubus <nemanja.milutinovic@endava.com>", "committedDate": "2020-10-09T14:03:58Z", "type": "forcePushed"}]}