{"pr_number": 2897, "pr_title": "Fix sonar cloud 2020 03 06", "pr_createdAt": "2020-03-17T10:51:45Z", "pr_url": "https://github.com/eclipse/kapua/pull/2897", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYxMzU0Ng==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r393613546", "bodyText": "did you change the loadConnectionUserCouplingModeFromConfig?\nisn't it no more bound to a scope?", "author": "riccardomodanese", "createdAt": "2020-03-17T11:33:12Z", "path": "broker-core/src/main/java/org/eclipse/kapua/broker/core/plugin/authentication/AuthenticationLogic.java", "diffHunk": "@@ -165,12 +166,12 @@ protected void enforceDeviceConnectionUserBound(Map<String, Object> options, Dev\n         if (deviceConnection != null) {\n             ConnectionUserCouplingMode connectionUserCouplingMode = deviceConnection.getUserCouplingMode();\n             if (ConnectionUserCouplingMode.INHERITED.equals(deviceConnection.getUserCouplingMode())) {\n-                connectionUserCouplingMode = loadConnectionUserCouplingModeFromConfig(scopeId, options);\n+                connectionUserCouplingMode = loadConnectionUserCouplingModeFromConfig(options);", "originalCommit": "54ceb127c3d7fdaef5d21df8dd436b764bedd736", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY0NDQ1NQ==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r393644455", "bodyText": "scopeId is not used in loadConnectionUserCouplingModeFromConfig(), so it has been removed from the method signature.\nSee AuthenticationLogic.java:246", "author": "lorthirk", "createdAt": "2020-03-17T12:32:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYxMzU0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYyNjkwMg==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r393626902", "bodyText": "I dont' recall why we commented this code but, looking at it, I would leave it here for a while, waiting for a proper analysis about its role", "author": "riccardomodanese", "createdAt": "2020-03-17T11:58:49Z", "path": "commons/src/main/java/org/eclipse/kapua/commons/event/ServiceInspector.java", "diffHunk": "@@ -108,121 +108,36 @@ private ServiceInspector() {}\n \n         return configurations;\n     }\n-//", "originalCommit": "54ceb127c3d7fdaef5d21df8dd436b764bedd736", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY0Njc4MQ==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r393646781", "bodyText": "That code is commented since 1620737 (committed on 22/12/2017), which is the first commit containing this file. This means that this code has always been a comment in its entire life.", "author": "lorthirk", "createdAt": "2020-03-17T12:36:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYyNjkwMg=="}], "type": "inlineReview"}, {"oid": "215273fb5d8bdf5f7a9b39560d89f63d0f928305", "url": "https://github.com/eclipse/kapua/commit/215273fb5d8bdf5f7a9b39560d89f63d0f928305", "message": "Final SonarCloud fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-18T08:34:56Z", "type": "forcePushed"}, {"oid": "c64cd20870498b5c0f8a449ed4e71002109c9e0a", "url": "https://github.com/eclipse/kapua/commit/c64cd20870498b5c0f8a449ed4e71002109c9e0a", "message": "Final SonarCloud fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-18T10:06:30Z", "type": "forcePushed"}, {"oid": "6fea97e334f937102ab8c8f4f429623c1d145615", "url": "https://github.com/eclipse/kapua/commit/6fea97e334f937102ab8c8f4f429623c1d145615", "message": "Final SonarCloud fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-18T10:20:23Z", "type": "forcePushed"}, {"oid": "c3a8a5028ff956414f2624efd0937f7f634d4bbd", "url": "https://github.com/eclipse/kapua/commit/c3a8a5028ff956414f2624efd0937f7f634d4bbd", "message": "Final SonarCloud fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-18T12:17:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA3ODIxOQ==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395078219", "bodyText": "\ud83d\ude0d", "author": "Coduz", "createdAt": "2020-03-19T14:41:59Z", "path": "commons/src/main/java/org/eclipse/kapua/commons/configuration/AbstractKapuaConfigurableService.java", "diffHunk": "@@ -92,16 +98,10 @@ private static KapuaTmetadata readMetadata(String pid) throws Exception {\n      * @param parentId\n      * @throws KapuaException\n      */\n-    private void validateConfigurations(String pid, KapuaTocd ocd, Map<String, Object> updatedProps, KapuaId scopeId, KapuaId parentId)\n+    private void validateConfigurations(KapuaTocd ocd, Map<String, Object> updatedProps, KapuaId scopeId, KapuaId parentId)\n             throws KapuaException {\n         if (ocd != null) {\n-\n-            // build a map of all the attribute definitions\n-            Map<String, KapuaTad> attrDefs = new HashMap<>();\n-            List<KapuaTad> defs = ocd.getAD();\n-            for (KapuaTad def : defs) {\n-                attrDefs.put(def.getId(), def);\n-            }\n+            Map<String, KapuaTad> attrDefs = ocd.getAD().stream().collect(Collectors.toMap(KapuaTad::getId, def -> def));", "originalCommit": "c3a8a5028ff956414f2624efd0937f7f634d4bbd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA3ODM2Mg==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395078362", "bodyText": "\ud83d\ude0d", "author": "Coduz", "createdAt": "2020-03-19T14:42:10Z", "path": "commons/src/main/java/org/eclipse/kapua/commons/configuration/AbstractKapuaConfigurableService.java", "diffHunk": "@@ -133,22 +133,34 @@ private void validateConfigurations(String pid, KapuaTocd ocd, Map<String, Objec\n                 }\n             }\n \n-            // make sure all required properties are set\n-            for (KapuaTad attrDef : ocd.getAD()) {\n-                // to the required attributes make sure a value is defined.\n-                if (attrDef.isRequired()) {\n-                    if (updatedProps.get(attrDef.getId()) == null) {\n-                        // if the default one is not defined, throw\n-                        // exception.\n-                        throw new KapuaConfigurationException(KapuaConfigurationErrorCodes.REQUIRED_ATTRIBUTE_MISSING, attrDef.getId());\n-                    }\n-                }\n-            }\n+            checkRequiredProperties(ocd, updatedProps);", "originalCommit": "c3a8a5028ff956414f2624efd0937f7f634d4bbd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA4NDkyNw==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395084927", "bodyText": "For all of this class I would use scopeId and id for as argument names so we can fall back on values coming from the EntityAttributes", "author": "Coduz", "createdAt": "2020-03-19T14:50:44Z", "path": "commons/src/main/java/org/eclipse/kapua/commons/service/event/store/internal/EventStoreServiceImpl.java", "diffHunk": "@@ -42,6 +42,7 @@\n     private static final AuthorizationService AUTHORIZATION_SERVICE = LOCATOR.getService(AuthorizationService.class);\n     private static final PermissionFactory PERMISSION_FACTORY = LOCATOR.getFactory(PermissionFactory.class);\n \n+    private static final String KAPUA_EVENT_ID = \"kapuaEventId\";", "originalCommit": "c3a8a5028ff956414f2624efd0937f7f634d4bbd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA4NjIxNw==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395086217", "bodyText": "It is possibile to change this to use Pattern?", "author": "Coduz", "createdAt": "2020-03-19T14:52:24Z", "path": "commons/src/main/java/org/eclipse/kapua/commons/setting/system/SystemSetting.java", "diffHunk": "@@ -37,7 +37,7 @@ private SystemSetting() {\n         super(CONFIG_RESOURCE_NAME);\n     }\n \n-    public String getMessageClassifier() throws KapuaRuntimeException {\n+    public String getMessageClassifier() {\n         String classifier = config.getString(COMMONS_CONTROL_MESSAGE_CLASSIFIER);\n         if (classifier.matches(\"([#>\\\\./\\\\+\\\\*\u200c\u200b])\")) {", "originalCommit": "c3a8a5028ff956414f2624efd0937f7f634d4bbd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA4NzI3NQ==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395087275", "bodyText": "Get this from ConsoleMessages.error().\nAlso for other occurrencies on this class", "author": "Coduz", "createdAt": "2020-03-19T14:53:45Z", "path": "console/core/src/main/java/org/eclipse/kapua/app/console/core/client/ChangePasswordDialog.java", "diffHunk": "@@ -103,14 +104,14 @@ public void onFailure(Throwable caught) {\n                 if (caught instanceof GwtKapuaException) {\n                     GwtKapuaException gwtCaught = (GwtKapuaException) caught;\n                     if (gwtCaught.getCode().equals(GwtKapuaErrorCode.INVALID_USERNAME_PASSWORD)) {\n-                        ConsoleInfo.display(\"Error\", ActionDialog.MSGS.changePasswordError(MSGS.changePasswordErrorWrongOldPassword()));\n+                        ConsoleInfo.display(ERROR, ActionDialog.MSGS.changePasswordError(MSGS.changePasswordErrorWrongOldPassword()));", "originalCommit": "c3a8a5028ff956414f2624efd0937f7f634d4bbd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA5Mzg3Mw==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395093873", "bodyText": "Get this from ConsoleMessages.error()", "author": "Coduz", "createdAt": "2020-03-19T15:02:17Z", "path": "console/module/account/src/main/java/org/eclipse/kapua/app/console/module/account/client/toolbar/AccountAddDialog.java", "diffHunk": "@@ -289,13 +291,13 @@ public void handleEvent(BaseEvent be) {\n \n     public void validateAccount() {\n         if (accountNameField.getValue() == null || organizationName.getValue() == null || organizationEmail.getValue() == null) {\n-            ConsoleInfo.display(\"Error\", CMSGS.allFieldsRequired());\n+            ConsoleInfo.display(ERROR, CMSGS.allFieldsRequired());", "originalCommit": "c3a8a5028ff956414f2624efd0937f7f634d4bbd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fd68a0e3ea605b52f025831a72d897ea6e64e188", "url": "https://github.com/eclipse/kapua/commit/fd68a0e3ea605b52f025831a72d897ea6e64e188", "message": "Final SonarCloud fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-19T16:39:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE2ODAxNQ==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395168015", "bodyText": "Make this static \ud83d\ude01", "author": "Coduz", "createdAt": "2020-03-19T16:43:33Z", "path": "commons/src/main/java/org/eclipse/kapua/commons/setting/system/SystemSetting.java", "diffHunk": "@@ -37,9 +40,11 @@ private SystemSetting() {\n         super(CONFIG_RESOURCE_NAME);\n     }\n \n-    public String getMessageClassifier() throws KapuaRuntimeException {\n+    public String getMessageClassifier() {\n         String classifier = config.getString(COMMONS_CONTROL_MESSAGE_CLASSIFIER);\n-        if (classifier.matches(\"([#>\\\\./\\\\+\\\\*\u200c\u200b])\")) {\n+        Pattern pattern = Pattern.compile(\"([#>./+*\u200c\u200b])\");", "originalCommit": "cac6b7053940d88b075dfad79f9e546cb5c43672", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "url": "https://github.com/eclipse/kapua/commit/6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-19T16:46:55Z", "type": "forcePushed"}, {"oid": "522c358bd1151fd9d52c9964455aa49ad7edb989", "url": "https://github.com/eclipse/kapua/commit/522c358bd1151fd9d52c9964455aa49ad7edb989", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-19T17:20:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE3NDg3Ng==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395174876", "bodyText": "Can we add try finally closing the Writer?", "author": "Coduz", "createdAt": "2020-03-19T16:53:29Z", "path": "console/module/device/src/main/java/org/eclipse/kapua/app/console/module/device/servlet/DeviceEventExporterCsv.java", "diffHunk": "@@ -50,11 +51,11 @@ public void init(final String scopeId, String clientId)\n         dateFormat = new SimpleDateFormat(\"MM/dd/yyyy HH:mm:ss.SSS\");\n \n         response.setContentType(\"text/csv\");\n-        response.setCharacterEncoding(\"UTF-8\");\n-        response.setHeader(\"Content-Disposition\", \"attachment; filename*=UTF-8''\" + URLEncoder.encode(clientId, \"UTF-8\") + \"_device_events.csv\");\n+        response.setCharacterEncoding(CharEncoding.UTF_8);\n+        response.setHeader(\"Content-Disposition\", \"attachment; filename*=UTF-8''\" + URLEncoder.encode(clientId, CharEncoding.UTF_8) + \"_device_events.csv\");\n         response.setHeader(\"Cache-Control\", \"no-transform, max-age=0\");\n \n-        OutputStreamWriter osw = new OutputStreamWriter(response.getOutputStream(), Charset.forName(\"UTF-8\"));\n+        OutputStreamWriter osw = new OutputStreamWriter(response.getOutputStream(), Charset.forName(CharEncoding.UTF_8));", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE3NTA2MA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395175060", "bodyText": "Can we add try finally closing the Writer?", "author": "Coduz", "createdAt": "2020-03-19T16:53:43Z", "path": "console/module/device/src/main/java/org/eclipse/kapua/app/console/module/device/servlet/DeviceExporterCsv.java", "diffHunk": "@@ -56,7 +57,7 @@ public void init(String accountId, String accountName)\n         this.accountName = accountName;\n         dateFormat = new SimpleDateFormat(\"MM/dd/yyyy HH:mm:ss.SSS\");\n \n-        OutputStreamWriter osw = new OutputStreamWriter(response.getOutputStream(), Charset.forName(\"UTF-8\"));\n+        OutputStreamWriter osw = new OutputStreamWriter(response.getOutputStream(), Charset.forName(CharEncoding.UTF_8));", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE3NjQ1NA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395176454", "bodyText": "Please use ConsoleMessages.error()", "author": "Coduz", "createdAt": "2020-03-19T16:55:42Z", "path": "console/module/endpoint/src/main/java/org/eclipse/kapua/app/console/module/endpoint/client/EndpointAddDialog.java", "diffHunk": "@@ -101,15 +103,15 @@ public void createBody() {\n \n     public void validateEndPoint() {\n         if (endpointSchemaField.getValue() == null || endpointDnsField.getValue() == null) {\n-            ConsoleInfo.display(\"Error\", CMSGS.allFieldsRequired());\n+            ConsoleInfo.display(ERROR, CMSGS.allFieldsRequired());", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE3NzU4Mg==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395177582", "bodyText": "Can we add try finally closing the Writer?", "author": "Coduz", "createdAt": "2020-03-19T16:57:18Z", "path": "console/module/job/src/main/java/org/eclipse/kapua/app/console/module/job/servlet/JobTargetExporterCsv.java", "diffHunk": "@@ -59,11 +60,11 @@ public void init(final String scopeId, String jobId)\n         dateFormat = new SimpleDateFormat(\"MM/dd/yyyy HH:mm:ss.SSS\");\n \n         response.setContentType(\"text/csv\");\n-        response.setCharacterEncoding(\"UTF-8\");\n-        response.setHeader(\"Content-Disposition\", \"attachment; filename*=UTF-8''\" + URLEncoder.encode(jobId, \"UTF-8\") + \"_job_targets.csv\");\n+        response.setCharacterEncoding(CharEncoding.UTF_8);\n+        response.setHeader(\"Content-Disposition\", \"attachment; filename*=UTF-8''\" + URLEncoder.encode(jobId, CharEncoding.UTF_8) + \"_job_targets.csv\");\n         response.setHeader(\"Cache-Control\", \"no-transform, max-age=0\");\n \n-        OutputStreamWriter osw = new OutputStreamWriter(response.getOutputStream(), Charset.forName(\"UTF-8\"));\n+        OutputStreamWriter osw = new OutputStreamWriter(response.getOutputStream(), Charset.forName(CharEncoding.UTF_8));", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE3ODAyMA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395178020", "bodyText": "Please use ConsoleMessages.error()", "author": "Coduz", "createdAt": "2020-03-19T16:57:58Z", "path": "console/module/user/src/main/java/org/eclipse/kapua/app/console/module/user/client/dialog/UserAddDialog.java", "diffHunk": "@@ -234,17 +236,17 @@ public void handleEvent(BaseEvent be) {\n \n     public void validateUser() {\n         if (username.getValue() == null || (passwordIsShown && password.getValue() == null) || (passwordIsShown && confirmPassword.getValue() == null)) {\n-            ConsoleInfo.display(\"Error\", CMSGS.allFieldsRequired());\n+            ConsoleInfo.display(ERROR, CMSGS.allFieldsRequired());", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE3ODIxMA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395178210", "bodyText": "Please use ConsoleMessages.error()", "author": "Coduz", "createdAt": "2020-03-19T16:58:15Z", "path": "console/module/user/src/main/java/org/eclipse/kapua/app/console/module/user/client/dialog/UserEditDialog.java", "diffHunk": "@@ -79,11 +81,11 @@ public void onFailure(Throwable cause) {\n     @Override\n     public void validateUser() {\n         if (!email.isValid()) {\n-            ConsoleInfo.display(\"Error\", email.getErrorMessage());\n+            ConsoleInfo.display(ERROR, email.getErrorMessage());", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE4MDM4OA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395180388", "bodyText": "Make use of KapuaEntityAttributes.scopeId and KapuaEntityAttributes.id", "author": "Coduz", "createdAt": "2020-03-19T17:01:23Z", "path": "job-engine/jbatch/src/main/java/org/eclipse/kapua/job/engine/jbatch/JobEngineServiceJbatch.java", "diffHunk": "@@ -66,6 +66,10 @@\n     private static final JobTargetService JOB_TARGET_SERVICE = LOCATOR.getService(JobTargetService.class);\n     private static final JobTargetFactory JOB_TARGET_FACTORY = LOCATOR.getFactory(JobTargetFactory.class);\n \n+    private static final String SCOPE_ID = \"scopeId\";", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE4MDg3OA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395180878", "bodyText": "\ud83d\ude0d", "author": "Coduz", "createdAt": "2020-03-19T17:02:11Z", "path": "qa/common/src/main/java/org/eclipse/kapua/qa/common/DBHelper.java", "diffHunk": "@@ -166,7 +167,9 @@ public void dropAll() throws SQLException {\n \n         while (sqlResults.next()) {\n             String sqlStatement = String.format(\"DROP TABLE %s\", sqlResults.getString(\"TABLE_NAME\").toUpperCase());\n-            connection.prepareStatement(sqlStatement).execute();\n+            try (PreparedStatement preparedStatement = connection.prepareStatement(sqlStatement)) {", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE4MjU3Ng==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395182576", "bodyText": "Make use of KapuaEntityAttributes.scopeId, KapuaEntityAttributes.id, and AccountAttributes.expirationDate", "author": "Coduz", "createdAt": "2020-03-19T17:04:43Z", "path": "service/account/internal/src/main/java/org/eclipse/kapua/service/account/internal/AccountServiceImpl.java", "diffHunk": "@@ -63,6 +63,11 @@\n     @Inject\n     private PermissionFactory permissionFactory;\n \n+    private static final String SCOPE_ID = \"scopeId\";", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE5MTY4MA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395191680", "bodyText": "Make use of KapuaEntityAttributes.scopeId", "author": "Coduz", "createdAt": "2020-03-19T17:18:30Z", "path": "service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/common/DeviceValidation.java", "diffHunk": "@@ -55,6 +55,9 @@\n     private static DeviceRegistryService deviceRegistryService;\n     private static DeviceFactory deviceFactory;\n \n+    private static final String SCOPE_ID = \"scopeId\";", "originalCommit": "6d10d144475e32f45a5de0a7011df2a7a1ce13bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE5NzU3NQ==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395197575", "bodyText": "Make user of KapuaEntityAttributes.scopeId and KapuaEntityAttributes.id", "author": "Coduz", "createdAt": "2020-03-19T17:27:11Z", "path": "service/scheduler/quartz/src/main/java/org/eclipse/kapua/service/scheduler/trigger/definition/quartz/TriggerDefinitionServiceImpl.java", "diffHunk": "@@ -45,6 +45,8 @@\n     @Inject\n     private PermissionFactory permissionFactory;\n \n+    private static final String STEP_DEFINITION_ID = \"stepDefinitionId\";", "originalCommit": "522c358bd1151fd9d52c9964455aa49ad7edb989", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUxNjgzNQ==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395516835", "bodyText": "Make use of KapuaEntityAttributes.scopeId and KapuaEntityAttributes.id", "author": "Coduz", "createdAt": "2020-03-20T09:22:33Z", "path": "service/job/internal/src/main/java/org/eclipse/kapua/service/job/internal/JobServiceImpl.java", "diffHunk": "@@ -59,6 +59,8 @@\n \n     private static final KapuaLocator LOCATOR = KapuaLocator.getInstance();\n \n+    private static final String JOB_ID = \"jobId\";", "originalCommit": "522c358bd1151fd9d52c9964455aa49ad7edb989", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUxOTg1OA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395519858", "bodyText": "Make use of KapuaEntityAttributes.scopeId and KapuaEntityAttributes.id", "author": "Coduz", "createdAt": "2020-03-20T09:28:33Z", "path": "service/security/shiro/src/main/java/org/eclipse/kapua/service/authentication/credential/shiro/CredentialServiceImpl.java", "diffHunk": "@@ -64,6 +64,8 @@ public CredentialServiceImpl() {\n         super(CredentialService.class.getName(), AuthenticationDomains.CREDENTIAL_DOMAIN, AuthenticationEntityManagerFactory.getInstance());\n     }\n \n+    private static final String SCOPE_ID = \"scopeId\";", "originalCommit": "522c358bd1151fd9d52c9964455aa49ad7edb989", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyMDIyMA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395520220", "bodyText": "Make use of KapuaEntityAttributes.scopeId and KapuaEntityAttributes.id", "author": "Coduz", "createdAt": "2020-03-20T09:29:17Z", "path": "service/security/shiro/src/main/java/org/eclipse/kapua/service/authentication/token/shiro/AccessTokenServiceImpl.java", "diffHunk": "@@ -50,6 +50,9 @@\n     private static final AuthorizationService AUTHORIZATION_SERVICE = LOCATOR.getService(AuthorizationService.class);\n     private static final PermissionFactory PERMISSION_FACTORY = LOCATOR.getFactory(PermissionFactory.class);\n \n+    private static final String SCOPE_ID = \"scopeId\";", "originalCommit": "522c358bd1151fd9d52c9964455aa49ad7edb989", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyMDQ3MA==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395520470", "bodyText": "Make use of KapuaEntityAttributes.scopeId and KapuaEntityAttributes.id", "author": "Coduz", "createdAt": "2020-03-20T09:29:51Z", "path": "service/security/shiro/src/main/java/org/eclipse/kapua/service/authorization/access/shiro/AccessPermissionServiceImpl.java", "diffHunk": "@@ -48,6 +48,8 @@\n @KapuaProvider\n public class AccessPermissionServiceImpl extends AbstractKapuaService implements AccessPermissionService {\n \n+    private static final String SCOPE_ID = \"scopeId\";", "originalCommit": "522c358bd1151fd9d52c9964455aa49ad7edb989", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyMDc5Mw==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395520793", "bodyText": "Make use of KapuaEntityAttributes.scopeId and KapuaEntityAttributes.id", "author": "Coduz", "createdAt": "2020-03-20T09:30:29Z", "path": "service/security/shiro/src/main/java/org/eclipse/kapua/service/authorization/access/shiro/AccessRoleServiceImpl.java", "diffHunk": "@@ -46,6 +46,8 @@\n @KapuaProvider\n public class AccessRoleServiceImpl extends AbstractKapuaService implements AccessRoleService {\n \n+    private static final String SCOPE_ID = \"scopeId\";", "originalCommit": "522c358bd1151fd9d52c9964455aa49ad7edb989", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyMzA5NQ==", "url": "https://github.com/eclipse/kapua/pull/2897#discussion_r395523095", "bodyText": "Make use of KapuaEntityAttributes.scopeId and KapuaEntityAttributes.id", "author": "Coduz", "createdAt": "2020-03-20T09:35:11Z", "path": "service/security/shiro/src/main/java/org/eclipse/kapua/service/authorization/role/shiro/RolePermissionServiceImpl.java", "diffHunk": "@@ -52,6 +52,8 @@\n \n     private static final RoleService ROLE_SERVICE = KapuaLocator.getInstance().getService(RoleService.class);\n \n+    private static final String SCOPE_ID = \"scopeId\";", "originalCommit": "522c358bd1151fd9d52c9964455aa49ad7edb989", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1e46380a55a14a3176eb9b0439678cc45c28dce5", "url": "https://github.com/eclipse/kapua/commit/1e46380a55a14a3176eb9b0439678cc45c28dce5", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-20T11:51:32Z", "type": "forcePushed"}, {"oid": "286883ec6db2879fcd5b1d1040286e4224f3f78e", "url": "https://github.com/eclipse/kapua/commit/286883ec6db2879fcd5b1d1040286e4224f3f78e", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-20T13:51:09Z", "type": "forcePushed"}, {"oid": "307ef9713f4cee5f45c8a239034e2281bd022d23", "url": "https://github.com/eclipse/kapua/commit/307ef9713f4cee5f45c8a239034e2281bd022d23", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-23T08:32:44Z", "type": "forcePushed"}, {"oid": "0ea22a6969a99cdad118f1f93cd9041632892b43", "url": "https://github.com/eclipse/kapua/commit/0ea22a6969a99cdad118f1f93cd9041632892b43", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-23T10:41:04Z", "type": "forcePushed"}, {"oid": "2d7157b6cb40d09eb5bfe6feee69bd5cc96cea05", "url": "https://github.com/eclipse/kapua/commit/2d7157b6cb40d09eb5bfe6feee69bd5cc96cea05", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-03-23T11:41:03Z", "type": "forcePushed"}, {"oid": "88e993db8113b3890f4035c766f92cf451fc7285", "url": "https://github.com/eclipse/kapua/commit/88e993db8113b3890f4035c766f92cf451fc7285", "message": "Removed useless log call in KapuaSecurityBrokerFilter\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-04-01T12:04:51Z", "type": "forcePushed"}, {"oid": "4e0cfa75af0a6d400eb2df159c27f9a114ecc4a9", "url": "https://github.com/eclipse/kapua/commit/4e0cfa75af0a6d400eb2df159c27f9a114ecc4a9", "message": "Removed useless log call in KapuaSecurityBrokerFilter\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-04-09T10:58:32Z", "type": "forcePushed"}, {"oid": "3efcdb4695d5693194550a7da8ddee4830a595bc", "url": "https://github.com/eclipse/kapua/commit/3efcdb4695d5693194550a7da8ddee4830a595bc", "message": "Removed useless log call in KapuaSecurityBrokerFilter\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-10T13:55:30Z", "type": "forcePushed"}, {"oid": "a8c7544c7d897c33d9c5780b8a4d145de5ad544f", "url": "https://github.com/eclipse/kapua/commit/a8c7544c7d897c33d9c5780b8a4d145de5ad544f", "message": "Removed useless log call in KapuaSecurityBrokerFilter\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-10T14:11:30Z", "type": "forcePushed"}, {"oid": "16842a239b105375d01c52d2b72bbe734292d2dc", "url": "https://github.com/eclipse/kapua/commit/16842a239b105375d01c52d2b72bbe734292d2dc", "message": "Remove multiple string occurrences (Sonar rule java:S1192)\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:01:37Z", "type": "commit"}, {"oid": "fa3ff0873c3aa1e60b96218f7f8089ac32c91ef0", "url": "https://github.com/eclipse/kapua/commit/fa3ff0873c3aa1e60b96218f7f8089ac32c91ef0", "message": "Add try-with-resource and other minor Sonar bug fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:01:38Z", "type": "commit"}, {"oid": "8a55c4a23c9b11ff5e4ba358002eea6f035be3a7", "url": "https://github.com/eclipse/kapua/commit/8a55c4a23c9b11ff5e4ba358002eea6f035be3a7", "message": "Renamed Button to KapuaButton, and other minor Sonar fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:01:39Z", "type": "commit"}, {"oid": "108a2e9b0d958e7e9c02d5fb685eecce8ba9d38d", "url": "https://github.com/eclipse/kapua/commit/108a2e9b0d958e7e9c02d5fb685eecce8ba9d38d", "message": "More minor Sonar fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:01:39Z", "type": "commit"}, {"oid": "d3ec7cb9af8f2479870eaaa5e26ee3fcefc6e7e1", "url": "https://github.com/eclipse/kapua/commit/d3ec7cb9af8f2479870eaaa5e26ee3fcefc6e7e1", "message": "A few more Sonar fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:01:40Z", "type": "commit"}, {"oid": "8a27285825eca4fe6e79b557d7a4473aef6fb47c", "url": "https://github.com/eclipse/kapua/commit/8a27285825eca4fe6e79b557d7a4473aef6fb47c", "message": "More Sonar issues fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:01:40Z", "type": "commit"}, {"oid": "c97c2ea67582a6cdc6cba20202fe34f13ba86ddc", "url": "https://github.com/eclipse/kapua/commit/c97c2ea67582a6cdc6cba20202fe34f13ba86ddc", "message": "Security issues for Sonar java:S2755 and javasecurity:S2083\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:01:40Z", "type": "commit"}, {"oid": "2ed5694d027625e421474ceafd94438d6ec8bbcb", "url": "https://github.com/eclipse/kapua/commit/2ed5694d027625e421474ceafd94438d6ec8bbcb", "message": "KapuaSecurityBrokerFilter Sonar fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:01:41Z", "type": "commit"}, {"oid": "b7498e126af370e4eecccc236fa57048f4829b6b", "url": "https://github.com/eclipse/kapua/commit/b7498e126af370e4eecccc236fa57048f4829b6b", "message": "More Sonar issues fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:02:20Z", "type": "commit"}, {"oid": "ac5f5551b6c342dc9eae882f15350444524ce83f", "url": "https://github.com/eclipse/kapua/commit/ac5f5551b6c342dc9eae882f15350444524ce83f", "message": "Removed KapuaQuery type parameter\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:02:56Z", "type": "commit"}, {"oid": "de6efb32371a63cf8a25b0e6901c6543572ebb3d", "url": "https://github.com/eclipse/kapua/commit/de6efb32371a63cf8a25b0e6901c6543572ebb3d", "message": "More minor Sonar fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:03:00Z", "type": "commit"}, {"oid": "97cfd5fa3c9102ae023d8920f1daca2a322c3550", "url": "https://github.com/eclipse/kapua/commit/97cfd5fa3c9102ae023d8920f1daca2a322c3550", "message": "More minor Sonar fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:04:48Z", "type": "commit"}, {"oid": "0426da2544ff4c8fdfc834d06f411995e3ac0d36", "url": "https://github.com/eclipse/kapua/commit/0426da2544ff4c8fdfc834d06f411995e3ac0d36", "message": "Final SonarCloud fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:04:53Z", "type": "commit"}, {"oid": "7a728a1d5b0af2368de87aeff39497ec030f806f", "url": "https://github.com/eclipse/kapua/commit/7a728a1d5b0af2368de87aeff39497ec030f806f", "message": "Address PR comments\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:05:16Z", "type": "commit"}, {"oid": "c57bbc45e5a138c539b1f17598f460cf2f1f1472", "url": "https://github.com/eclipse/kapua/commit/c57bbc45e5a138c539b1f17598f460cf2f1f1472", "message": "Removed useless log call in KapuaSecurityBrokerFilter\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:05:21Z", "type": "commit"}, {"oid": "c57bbc45e5a138c539b1f17598f460cf2f1f1472", "url": "https://github.com/eclipse/kapua/commit/c57bbc45e5a138c539b1f17598f460cf2f1f1472", "message": "Removed useless log call in KapuaSecurityBrokerFilter\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>", "committedDate": "2020-08-26T14:05:21Z", "type": "forcePushed"}]}