{"pr_number": 3776, "pr_title": "Feature/3595/service info", "pr_createdAt": "2020-09-01T22:30:19Z", "pr_url": "https://github.com/dockstore/dockstore/pull/3776", "timeline": [{"oid": "201cde38d240d28490904d1efb477d2d09112962", "url": "https://github.com/dockstore/dockstore/commit/201cde38d240d28490904d1efb477d2d09112962", "message": "Use new iteration of TRS", "committedDate": "2020-09-01T19:52:25Z", "type": "commit"}, {"oid": "24451c08c6d9c8860029919b29c5362d3ca65555", "url": "https://github.com/dockstore/dockstore/commit/24451c08c6d9c8860029919b29c5362d3ca65555", "message": "Add test", "committedDate": "2020-09-01T21:40:17Z", "type": "commit"}, {"oid": "0dbd824dce81f03cd38798e0e1799fe74f81d912", "url": "https://github.com/dockstore/dockstore/commit/0dbd824dce81f03cd38798e0e1799fe74f81d912", "message": "Fixes", "committedDate": "2020-09-01T21:40:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEyNzEwNQ==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482127105", "bodyText": "Should this mention Dockstore? I could see it other way; as other fields mention it. Depends if this describes the API or the implementation.", "author": "coverbeck", "createdAt": "2020-09-02T14:46:07Z", "path": "dockstore-webservice/src/main/java/io/openapi/api/impl/ServiceInfoApiServiceImpl.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package io.openapi.api.impl;\n+\n+import java.util.Date;\n+import java.util.Optional;\n+\n+import javax.ws.rs.container.ContainerRequestContext;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.SecurityContext;\n+\n+import io.dockstore.webservice.core.User;\n+import io.openapi.api.ServiceInfoApiService;\n+import io.openapi.model.Service;\n+import io.openapi.model.ServiceType;\n+\n+public class ServiceInfoApiServiceImpl extends ServiceInfoApiService {\n+    @Override\n+    public Response getServiceInfo(SecurityContext securityContext, ContainerRequestContext value, Optional<User> user) {\n+        Service service = getService();\n+        return Response.ok().entity(service).build();\n+    }\n+\n+    public static Service getService() {\n+        Service service = new Service();\n+        service.setId(\"1\");\n+        service.setName(\"Dockstore\");\n+        service.setType(getServiceType());\n+        service.setDescription(\"The GA4GH Tool Registry API is a standard for listing and describing available tools (both stand-alone, Docker-based tools as well as workflows in CWL, WDL, Nextflow, or Galaxy) in a given registry,\");", "originalCommit": "0dbd824dce81f03cd38798e0e1799fe74f81d912", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE3MzA4Mg==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482173082", "bodyText": "Yes, it from https://github.com/ga4gh-discovery/ga4gh-service-info/blob/develop/service-info.yaml#L57 I think it is reasonable to say something like \"Dockstore is an implementation of the GA4GH Tool Registry API ...\"", "author": "denis-yuen", "createdAt": "2020-09-02T15:42:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEyNzEwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEyODAwMA==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482128000", "bodyText": "Wonder if you shouldn't just link to docs.dockstore.org -- we've talked about tagging doc releases; if we ever do that, it might be better to let the redirect handle the final location.", "author": "coverbeck", "createdAt": "2020-09-02T14:47:16Z", "path": "dockstore-webservice/src/main/java/io/openapi/api/impl/ServiceInfoApiServiceImpl.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package io.openapi.api.impl;\n+\n+import java.util.Date;\n+import java.util.Optional;\n+\n+import javax.ws.rs.container.ContainerRequestContext;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.SecurityContext;\n+\n+import io.dockstore.webservice.core.User;\n+import io.openapi.api.ServiceInfoApiService;\n+import io.openapi.model.Service;\n+import io.openapi.model.ServiceType;\n+\n+public class ServiceInfoApiServiceImpl extends ServiceInfoApiService {\n+    @Override\n+    public Response getServiceInfo(SecurityContext securityContext, ContainerRequestContext value, Optional<User> user) {\n+        Service service = getService();\n+        return Response.ok().entity(service).build();\n+    }\n+\n+    public static Service getService() {\n+        Service service = new Service();\n+        service.setId(\"1\");\n+        service.setName(\"Dockstore\");\n+        service.setType(getServiceType());\n+        service.setDescription(\"The GA4GH Tool Registry API is a standard for listing and describing available tools (both stand-alone, Docker-based tools as well as workflows in CWL, WDL, Nextflow, or Galaxy) in a given registry,\");\n+        service.setOrganization(getOrganization());\n+        service.setContactUrl(\"https://discuss.dockstore.org/t/opening-helpdesk-tickets/1506\");\n+        service.setDocumentationUrl(\"https://docs.dockstore.org/en/develop\");", "originalCommit": "0dbd824dce81f03cd38798e0e1799fe74f81d912", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEzMTE5NA==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482131194", "bodyText": "Should at least be a constant (you have it below). Or, without fully understanding the whole TRS build process as it's integrated with Dockstore, could we derive the version from the openapi.yaml that we build against? I don't know if the version is in there or not. But when we upgrade to 2.0.2, we'll have to remember to update this version.", "author": "coverbeck", "createdAt": "2020-09-02T14:51:10Z", "path": "dockstore-webservice/src/main/java/io/openapi/api/impl/ServiceInfoApiServiceImpl.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package io.openapi.api.impl;\n+\n+import java.util.Date;\n+import java.util.Optional;\n+\n+import javax.ws.rs.container.ContainerRequestContext;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.SecurityContext;\n+\n+import io.dockstore.webservice.core.User;\n+import io.openapi.api.ServiceInfoApiService;\n+import io.openapi.model.Service;\n+import io.openapi.model.ServiceType;\n+\n+public class ServiceInfoApiServiceImpl extends ServiceInfoApiService {\n+    @Override\n+    public Response getServiceInfo(SecurityContext securityContext, ContainerRequestContext value, Optional<User> user) {\n+        Service service = getService();\n+        return Response.ok().entity(service).build();\n+    }\n+\n+    public static Service getService() {\n+        Service service = new Service();\n+        service.setId(\"1\");\n+        service.setName(\"Dockstore\");\n+        service.setType(getServiceType());\n+        service.setDescription(\"The GA4GH Tool Registry API is a standard for listing and describing available tools (both stand-alone, Docker-based tools as well as workflows in CWL, WDL, Nextflow, or Galaxy) in a given registry,\");\n+        service.setOrganization(getOrganization());\n+        service.setContactUrl(\"https://discuss.dockstore.org/t/opening-helpdesk-tickets/1506\");\n+        service.setDocumentationUrl(\"https://docs.dockstore.org/en/develop\");\n+        // TODO: Somehow get swagger codegen to generate string parameter (RFC 3339) instead of Date\n+        service.setCreatedAt(new Date());\n+        // TODO: Somehow get swagger codegen to generate string parameter (RFC 3339) instead of Date\n+        service.setUpdatedAt(new Date());\n+        service.setEnvironment(\"prod\");\n+        service.setVersion(\"2.0.1\");", "originalCommit": "0dbd824dce81f03cd38798e0e1799fe74f81d912", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0Njc3OA==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482146778", "bodyText": "Ok, I think the version above is supposed to be Dockstore version (1.10.0-SNAPSHOT)", "author": "garyluu", "createdAt": "2020-09-02T15:09:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEzMTE5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE3NTQ2Mg==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482175462", "bodyText": "Use Maven filtering to auto populate this for auto updates. https://github.com/dockstore/dockstore/blob/develop/dockstore-webservice/src/main/templates/io/dockstore/webservice/resources/Description.java has an example", "author": "denis-yuen", "createdAt": "2020-09-02T15:46:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEzMTE5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE3NDI0OA==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482174248", "bodyText": "\"First deployed and available\"\nDon't think it needs to be specifically this version.\nCan pick first time we implemented TRS V2 and deployed it", "author": "denis-yuen", "createdAt": "2020-09-02T15:44:23Z", "path": "dockstore-webservice/src/main/java/io/openapi/api/impl/ServiceInfoApiServiceImpl.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package io.openapi.api.impl;\n+\n+import java.util.Date;\n+import java.util.Optional;\n+\n+import javax.ws.rs.container.ContainerRequestContext;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.SecurityContext;\n+\n+import io.dockstore.webservice.core.User;\n+import io.openapi.api.ServiceInfoApiService;\n+import io.openapi.model.Service;\n+import io.openapi.model.ServiceType;\n+\n+public class ServiceInfoApiServiceImpl extends ServiceInfoApiService {\n+    @Override\n+    public Response getServiceInfo(SecurityContext securityContext, ContainerRequestContext value, Optional<User> user) {\n+        Service service = getService();\n+        return Response.ok().entity(service).build();\n+    }\n+\n+    public static Service getService() {\n+        Service service = new Service();\n+        service.setId(\"1\");\n+        service.setName(\"Dockstore\");\n+        service.setType(getServiceType());\n+        service.setDescription(\"The GA4GH Tool Registry API is a standard for listing and describing available tools (both stand-alone, Docker-based tools as well as workflows in CWL, WDL, Nextflow, or Galaxy) in a given registry,\");\n+        service.setOrganization(getOrganization());\n+        service.setContactUrl(\"https://discuss.dockstore.org/t/opening-helpdesk-tickets/1506\");\n+        service.setDocumentationUrl(\"https://docs.dockstore.org/en/develop\");\n+        // TODO: Somehow get swagger codegen to generate string parameter (RFC 3339) instead of Date\n+        service.setCreatedAt(new Date());", "originalCommit": "0dbd824dce81f03cd38798e0e1799fe74f81d912", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE3NDgzMA==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482174830", "bodyText": "\"Last updated\" not sure if it means last time the implementation of the API changed or when content changed", "author": "denis-yuen", "createdAt": "2020-09-02T15:45:13Z", "path": "dockstore-webservice/src/main/java/io/openapi/api/impl/ServiceInfoApiServiceImpl.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package io.openapi.api.impl;\n+\n+import java.util.Date;\n+import java.util.Optional;\n+\n+import javax.ws.rs.container.ContainerRequestContext;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.SecurityContext;\n+\n+import io.dockstore.webservice.core.User;\n+import io.openapi.api.ServiceInfoApiService;\n+import io.openapi.model.Service;\n+import io.openapi.model.ServiceType;\n+\n+public class ServiceInfoApiServiceImpl extends ServiceInfoApiService {\n+    @Override\n+    public Response getServiceInfo(SecurityContext securityContext, ContainerRequestContext value, Optional<User> user) {\n+        Service service = getService();\n+        return Response.ok().entity(service).build();\n+    }\n+\n+    public static Service getService() {\n+        Service service = new Service();\n+        service.setId(\"1\");\n+        service.setName(\"Dockstore\");\n+        service.setType(getServiceType());\n+        service.setDescription(\"The GA4GH Tool Registry API is a standard for listing and describing available tools (both stand-alone, Docker-based tools as well as workflows in CWL, WDL, Nextflow, or Galaxy) in a given registry,\");\n+        service.setOrganization(getOrganization());\n+        service.setContactUrl(\"https://discuss.dockstore.org/t/opening-helpdesk-tickets/1506\");\n+        service.setDocumentationUrl(\"https://docs.dockstore.org/en/develop\");\n+        // TODO: Somehow get swagger codegen to generate string parameter (RFC 3339) instead of Date\n+        service.setCreatedAt(new Date());\n+        // TODO: Somehow get swagger codegen to generate string parameter (RFC 3339) instead of Date\n+        service.setUpdatedAt(new Date());", "originalCommit": "0dbd824dce81f03cd38798e0e1799fe74f81d912", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIyOTg5Mw==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482229893", "bodyText": "As in https://github.com/ga4gh-discovery/ga4gh-service-info/blob/develop/service-info.yaml#L93 seems ambiguous\nIs it when the standard changed?\nWhen the API implementation of the standard changed?\nWhen the content backing the API changed?\nWorth asking a question on the ga4gh-service-info repo via issue", "author": "denis-yuen", "createdAt": "2020-09-02T17:08:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE3NDgzMA=="}], "type": "inlineReview"}, {"oid": "ad2997d7a53e36501cc6ddca8362e4b4ff2a6e5d", "url": "https://github.com/dockstore/dockstore/commit/ad2997d7a53e36501cc6ddca8362e4b4ff2a6e5d", "message": "Minor changes, actually set prod/dev, use artifact version", "committedDate": "2020-09-02T16:14:53Z", "type": "commit"}, {"oid": "ad2997d7a53e36501cc6ddca8362e4b4ff2a6e5d", "url": "https://github.com/dockstore/dockstore/commit/ad2997d7a53e36501cc6ddca8362e4b4ff2a6e5d", "message": "Minor changes, actually set prod/dev, use artifact version", "committedDate": "2020-09-02T16:14:53Z", "type": "forcePushed"}, {"oid": "18e6e7d943f785ba0b6dd39be2306cec2d2659f9", "url": "https://github.com/dockstore/dockstore/commit/18e6e7d943f785ba0b6dd39be2306cec2d2659f9", "message": "Change dates", "committedDate": "2020-09-02T17:18:29Z", "type": "commit"}, {"oid": "3c78b2e18569e3e168ff7743ff46a0845f9f3869", "url": "https://github.com/dockstore/dockstore/commit/3c78b2e18569e3e168ff7743ff46a0845f9f3869", "message": "Add/remove some comments", "committedDate": "2020-09-02T17:47:34Z", "type": "commit"}, {"oid": "8bb84ef80d39371869ecca28fcd8ad313e9e5bbb", "url": "https://github.com/dockstore/dockstore/commit/8bb84ef80d39371869ecca28fcd8ad313e9e5bbb", "message": "Update openapi.yaml", "committedDate": "2020-09-02T17:47:42Z", "type": "commit"}, {"oid": "5b4d84ed88645e8c5592105af0c07e0f7374e847", "url": "https://github.com/dockstore/dockstore/commit/5b4d84ed88645e8c5592105af0c07e0f7374e847", "message": "Merge branch 'develop' into feature/3595/serviceInfo", "committedDate": "2020-09-02T17:48:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ4NjQ1NQ==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482486455", "bodyText": "So update date will be when this class is instantiated, probably when the webservice comes up.\nAs in other comment, this is ok for now but worth checking what they meant this date to be.", "author": "denis-yuen", "createdAt": "2020-09-02T21:23:52Z", "path": "dockstore-webservice/src/main/java/io/openapi/api/impl/ServiceInfoApiServiceImpl.java", "diffHunk": "@@ -0,0 +1,93 @@\n+package io.openapi.api.impl;\n+\n+import java.time.LocalDate;\n+import java.time.Month;\n+import java.time.ZoneId;\n+import java.util.Date;\n+import java.util.Optional;\n+\n+import javax.ws.rs.container.ContainerRequestContext;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.SecurityContext;\n+\n+import io.dockstore.webservice.core.User;\n+import io.openapi.api.ServiceInfoApiService;\n+import io.openapi.model.Service;\n+import io.openapi.model.ServiceType;\n+import io.swagger.api.impl.ToolsApiServiceImpl;\n+\n+import static io.dockstore.common.PipHelper.DEV_SEM_VER;\n+\n+public class ServiceInfoApiServiceImpl extends ServiceInfoApiService {\n+    public static final Date UPDATE_DATE = new Date();", "originalCommit": "5b4d84ed88645e8c5592105af0c07e0f7374e847", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjUwMjg1NQ==", "url": "https://github.com/dockstore/dockstore/pull/3776#discussion_r482502855", "bodyText": "ga4gh-discovery/ga4gh-service-info#65", "author": "garyluu", "createdAt": "2020-09-02T21:43:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ4NjQ1NQ=="}], "type": "inlineReview"}, {"oid": "6119fd28a915ef87f727d015538f05c6d5239814", "url": "https://github.com/dockstore/dockstore/commit/6119fd28a915ef87f727d015538f05c6d5239814", "message": "Merge branch 'develop' into feature/3595/serviceInfo", "committedDate": "2020-09-04T14:44:34Z", "type": "commit"}, {"oid": "f79cb91eb5e8426d1d34623d945d6493612f449e", "url": "https://github.com/dockstore/dockstore/commit/f79cb91eb5e8426d1d34623d945d6493612f449e", "message": "Use tag", "committedDate": "2020-09-08T16:44:36Z", "type": "commit"}, {"oid": "ba1778f94582589a9864106220ab502a90509865", "url": "https://github.com/dockstore/dockstore/commit/ba1778f94582589a9864106220ab502a90509865", "message": "Merge branch 'develop' into feature/3595/serviceInfo", "committedDate": "2020-09-08T21:42:47Z", "type": "commit"}, {"oid": "0fe63f9c25e5c46a73c070fa76b25c35c41565a8", "url": "https://github.com/dockstore/dockstore/commit/0fe63f9c25e5c46a73c070fa76b25c35c41565a8", "message": "Merge branch 'develop' into feature/3595/serviceInfo", "committedDate": "2020-09-11T18:21:00Z", "type": "commit"}, {"oid": "82db6f495d344d53d4e31fc4f553f0528fb0fbbc", "url": "https://github.com/dockstore/dockstore/commit/82db6f495d344d53d4e31fc4f553f0528fb0fbbc", "message": "Merge branch 'develop' into feature/3595/serviceInfo", "committedDate": "2020-09-11T19:21:04Z", "type": "commit"}]}