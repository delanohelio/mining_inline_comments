{"pr_number": 3350, "pr_title": "slight optimization for user/my{Entries} endpoints", "pr_createdAt": "2020-03-26T16:15:28Z", "pr_url": "https://github.com/dockstore/dockstore/pull/3350", "timeline": [{"oid": "0700cfe6393c7eaa09e52339039cdda6bbeadde2", "url": "https://github.com/dockstore/dockstore/commit/0700cfe6393c7eaa09e52339039cdda6bbeadde2", "message": "small optimization, get Tools, Workflows, and Services separately for each user/my{entry} endpoint", "committedDate": "2020-03-25T23:28:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcwNTI3OQ==", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r398705279", "bodyText": "I think this should return a List<T> intstead of List<Entry>. Then you shouldn't need to do the casts in UserResource.", "author": "coverbeck", "createdAt": "2020-03-26T16:20:14Z", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/jdbi/EntryDAO.java", "diffHunk": "@@ -154,6 +154,10 @@ public T findPublishedById(long id) {\n         return list(namedQuery(\"io.dockstore.webservice.core.\" + typeOfT.getSimpleName() + \".getEntryLiteByUserId\").setParameter(\"userId\", userId));\n     }\n \n+    public List<Entry> findMyEntries(long userId) {", "originalCommit": "0700cfe6393c7eaa09e52339039cdda6bbeadde2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcyMzU0NQ==", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r398723545", "bodyText": "complained apparently for services, so I'll just leave that one. Also found a few more places that could swap out to use the namedQueries", "author": "Ldcabansay", "createdAt": "2020-03-26T16:43:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcwNTI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcyNDYzNA==", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r398724634", "bodyText": "Complained for bioWorkflow too...", "author": "Ldcabansay", "createdAt": "2020-03-26T16:44:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcwNTI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcyODM5MQ==", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r398728391", "bodyText": "How did it complain? I remember talking about this with you, but at that time didn't realize the it was in this class with generics.", "author": "coverbeck", "createdAt": "2020-03-26T16:49:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcwNTI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODczNzU3Nw==", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r398737577", "bodyText": "just that Service and BioWorkflow weren't of type Workflow, which is weird.", "author": "Ldcabansay", "createdAt": "2020-03-26T17:01:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcwNTI3OQ=="}], "type": "inlineReview"}, {"oid": "e79b2ae3576be64af99d85f08fed89bd2dbe1842", "url": "https://github.com/dockstore/dockstore/commit/e79b2ae3576be64af99d85f08fed89bd2dbe1842", "message": "add optimization to more endpoints", "committedDate": "2020-03-26T19:27:23Z", "type": "commit"}, {"oid": "c2094ccdeed365d786b7fe0841145807d9839bc0", "url": "https://github.com/dockstore/dockstore/commit/c2094ccdeed365d786b7fe0841145807d9839bc0", "message": "Add cherry pick 4d6b96a: Seems to work locally", "committedDate": "2020-03-26T20:08:19Z", "type": "commit"}, {"oid": "95da81950a8660c45254950f7f915064dc317ce4", "url": "https://github.com/dockstore/dockstore/commit/95da81950a8660c45254950f7f915064dc317ce4", "message": "added a todo, mainly pushing to kickoff new circleCI build after config error", "committedDate": "2020-03-26T21:06:13Z", "type": "commit"}, {"oid": "0def2a6265119e06bf151d4faac4d6c06d6b1ef8", "url": "https://github.com/dockstore/dockstore/commit/0def2a6265119e06bf151d4faac4d6c06d6b1ef8", "message": "Merge branch 'develop' into feature/3143/optimize_myEntries", "committedDate": "2020-03-29T23:32:08Z", "type": "commit"}, {"oid": "da9888b109b9d345bd8b86b72b6263227113350a", "url": "https://github.com/dockstore/dockstore/commit/da9888b109b9d345bd8b86b72b6263227113350a", "message": "add openapi.yaml changes", "committedDate": "2020-03-30T18:05:42Z", "type": "commit"}, {"oid": "63015f82905bc7af1338681a77c63798722f50ae", "url": "https://github.com/dockstore/dockstore/commit/63015f82905bc7af1338681a77c63798722f50ae", "message": "fix broken test", "committedDate": "2020-03-31T01:27:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk4MTAwNw==", "url": "https://github.com/dockstore/dockstore/pull/3350#discussion_r400981007", "bodyText": "Not really sure I understand what is going on here.\nI would have expected services on line 220 to be filled with services, then workflows here to be filled with workflows.\nIt seems odd to me to expect a 500 error?", "author": "denis-yuen", "createdAt": "2020-03-31T14:56:28Z", "path": "dockstore-integration-testing/src/test/java/io/dockstore/webservice/ServiceIT.java", "diffHunk": "@@ -217,7 +218,14 @@ public void testGitHubAppEndpoints() throws Exception {\n         // Test user endpoints\n         UsersApi usersApi = new UsersApi(webClient);\n         services = usersApi.userServices(service.getUsers().get(0).getId());\n-        List<io.swagger.client.model.Workflow> workflows = usersApi.userWorkflows(service.getUsers().get(0).getId());\n+        List<io.swagger.client.model.Workflow> workflows = new ArrayList<>();\n+        try {\n+            workflows.addAll(usersApi.userWorkflows(service.getUsers().get(0).getId()));", "originalCommit": "63015f82905bc7af1338681a77c63798722f50ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5f7974e37e694091327227b0da962056fb6120df", "url": "https://github.com/dockstore/dockstore/commit/5f7974e37e694091327227b0da962056fb6120df", "message": "fix named queries for BioWorkflow, more slight optimizations, revert openapi.yml changes", "committedDate": "2020-03-31T21:48:17Z", "type": "commit"}]}