{"pr_number": 2111, "pr_title": "Fix #2107 by throwing (and checking) a specialized error", "pr_createdAt": "2020-04-09T16:33:07Z", "pr_url": "https://github.com/reactor/reactor-core/pull/2111", "timeline": [{"oid": "fb737a9280c104bba99633a1bbe4d5e36d1e631b", "url": "https://github.com/reactor/reactor-core/commit/fb737a9280c104bba99633a1bbe4d5e36d1e631b", "message": "Fix #2107 by throwing (and checking) a specialized error", "committedDate": "2020-04-09T16:31:43Z", "type": "commit"}, {"oid": "b036a867d68e32c741b4562eaa046c09a3ae1a83", "url": "https://github.com/reactor/reactor-core/commit/b036a867d68e32c741b4562eaa046c09a3ae1a83", "message": "Merge branch 'master' into specialized_error_from_reportThrowInSubscribe\n\n# Conflicts:\n#\treactor-test/src/main/java/reactor/test/DefaultStepVerifierBuilder.java", "committedDate": "2020-04-09T16:33:40Z", "type": "commit"}, {"oid": "99ade54b8dba0a81f7504a38831566e0a9aa8bb3", "url": "https://github.com/reactor/reactor-core/commit/99ade54b8dba0a81f7504a38831566e0a9aa8bb3", "message": "add javadocs, reuse in `Operators#error`", "committedDate": "2020-04-14T12:14:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4ODk1OA==", "url": "https://github.com/reactor/reactor-core/pull/2111#discussion_r408088958", "bodyText": "@simonbasle after thinking more about it, I ended up with OnErrorSubscription in both #error and #reportThrowInSubscribe.\nThe meaning of it is the same - we pass a dummy subscription to satisfy spec's 1.9 rule.\nBut now #error and #reportThrowInSubscribe look almost identical (except the spec violating catch).\nWDYT about adding try {} catch {} to error and removing reportThrowInSubscribe?", "author": "bsideup", "createdAt": "2020-04-14T12:16:22Z", "path": "reactor-core/src/main/java/reactor/core/publisher/Operators.java", "diffHunk": "@@ -181,13 +193,13 @@ public static Subscription emptySubscription() {\n \t * @param e the actual error\n \t */\n \tpublic static void error(Subscriber<?> s, Throwable e) {\n-\t\ts.onSubscribe(EmptySubscription.INSTANCE);\n+\t\ts.onSubscribe(OnErrorSubscription.INSTANCE);", "originalCommit": "99ade54b8dba0a81f7504a38831566e0a9aa8bb3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIyNzAwOA==", "url": "https://github.com/reactor/reactor-core/pull/2111#discussion_r408227008", "bodyText": "I'm not comfortable with this modification, as #error can be used as part of the normal path, where we KNOW the subscription isn't supposed to be passed yet. the only situation where the double subscribe can be ignored by StepVerifier is reportThrowInSubscribe", "author": "simonbasle", "createdAt": "2020-04-14T15:26:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4ODk1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODcyNjc1OQ==", "url": "https://github.com/reactor/reactor-core/pull/2111#discussion_r408726759", "bodyText": "pushed a new attempt :D", "author": "bsideup", "createdAt": "2020-04-15T10:03:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4ODk1OA=="}], "type": "inlineReview"}, {"oid": "3d4362b642b5c3086e0600fc5e15acfd7e85b13c", "url": "https://github.com/reactor/reactor-core/commit/3d4362b642b5c3086e0600fc5e15acfd7e85b13c", "message": "Merge branch 'master' into specialized_error_from_reportThrowInSubscribe", "committedDate": "2020-04-14T15:12:35Z", "type": "commit"}, {"oid": "251871ffef272480b86e71c3fb1ebd4e2a937e3e", "url": "https://github.com/reactor/reactor-core/commit/251871ffef272480b86e71c3fb1ebd4e2a937e3e", "message": "restore `EmptySubscription` in `Operators.error`", "committedDate": "2020-04-15T10:03:04Z", "type": "commit"}]}