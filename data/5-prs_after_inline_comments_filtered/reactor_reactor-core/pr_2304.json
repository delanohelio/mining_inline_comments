{"pr_number": 2304, "pr_title": "fix #1803 instrumenting onNext in MonoMetrics", "pr_createdAt": "2020-08-05T16:20:33Z", "pr_url": "https://github.com/reactor/reactor-core/pull/2304", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjUzMTk1Mg==", "url": "https://github.com/reactor/reactor-core/pull/2304#discussion_r466531952", "bodyText": "the status values are wrong here", "author": "simonbasle", "createdAt": "2020-08-06T16:22:04Z", "path": "reactor-core/src/main/java/reactor/core/publisher/FluxMetrics.java", "diffHunk": "@@ -220,7 +226,7 @@ public Object scanUnsafe(Attr key) {\n \tstatic final String METER_SUBSCRIBED     = \".subscribed\";\n \t/**\n \t * Meter that times the duration elapsed between a subscription and the termination or cancellation of the sequence.\n-\t * A status tag is added to specify what event caused the timer to end (onComplete, onError, cancel).\n+\t * A status tag is added to specify what event caused the timer to end (onComplete, onCompleteEmpty, onError, cancel).", "originalCommit": "ad76461552b0031f977c834b880ddf249df7ff48", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d4158f461a0cd8ee8f3a05f8039bab857f5e99f6", "url": "https://github.com/reactor/reactor-core/commit/d4158f461a0cd8ee8f3a05f8039bab857f5e99f6", "message": "fix #1803 Differentiate empty vs valued sequences in metrics via tag\n\nThis commit changes the status tag associated with completion on the\nreactor.flow.duration Timer to differentiate the case where the Flux\nor Mono completed without a single `onNext` (`status=completedEmpty`)\nfrom the case where data was emitted (`status=completed`).", "committedDate": "2020-08-07T14:08:37Z", "type": "commit"}, {"oid": "d4158f461a0cd8ee8f3a05f8039bab857f5e99f6", "url": "https://github.com/reactor/reactor-core/commit/d4158f461a0cd8ee8f3a05f8039bab857f5e99f6", "message": "fix #1803 Differentiate empty vs valued sequences in metrics via tag\n\nThis commit changes the status tag associated with completion on the\nreactor.flow.duration Timer to differentiate the case where the Flux\nor Mono completed without a single `onNext` (`status=completedEmpty`)\nfrom the case where data was emitted (`status=completed`).", "committedDate": "2020-08-07T14:08:37Z", "type": "forcePushed"}]}