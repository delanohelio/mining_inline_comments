{"pr_number": 36, "pr_title": "Moar registries", "pr_createdAt": "2020-01-25T13:34:51Z", "pr_url": "https://github.com/PatchworkMC/patchwork-api/pull/36", "timeline": [{"oid": "087c16c0aa5e769b27d01f312057492dafed14fb", "url": "https://github.com/PatchworkMC/patchwork-api/commit/087c16c0aa5e769b27d01f312057492dafed14fb", "message": "Entity rendering registry", "committedDate": "2020-01-24T18:12:37Z", "type": "commit"}, {"oid": "be8cf8f9a89155dd0ed917e12712de5d484acf42", "url": "https://github.com/PatchworkMC/patchwork-api/commit/be8cf8f9a89155dd0ed917e12712de5d484acf42", "message": "Pretty much all of the Forge exposed registries", "committedDate": "2020-01-25T13:21:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzNjUyNQ==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/36#discussion_r370936525", "bodyText": "Is this line really necessary?", "author": "shedaniel", "createdAt": "2020-01-25T14:34:07Z", "path": "patchwork-registries/src/main/java/com/patchworkmc/mixin/registries/MixinActivity.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Minecraft Forge, Patchwork Project\n+ * Copyright (c) 2016-2020, 2019-2020\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package com.patchworkmc.mixin.registries;\n+\n+import net.minecraftforge.registries.IForgeRegistryEntry;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.Unique;\n+\n+import net.minecraft.entity.ai.brain.Activity;\n+import net.minecraft.util.Identifier;\n+import net.minecraft.util.registry.Registry;\n+\n+import com.patchworkmc.impl.registries.ExtendedForgeRegistryEntry;\n+\n+@Mixin(Activity.class)\n+public class MixinActivity implements ExtendedForgeRegistryEntry<Activity> {\n+\t@Unique\n+\tprivate Identifier registryName;\n+\n+\t@Override\n+\tpublic IForgeRegistryEntry setRegistryName(Identifier name) {\n+\t\tthis.registryName = name;\n+\n+\t\treturn this;\n+\t}\n+\n+\tpublic Identifier getRegistryName() {\n+\t\tIdentifier current = Registry.ACTIVITY.getId((Activity) (Object) this);\n+\t\tIdentifier set = registryName;", "originalCommit": "be8cf8f9a89155dd0ed917e12712de5d484acf42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0MDUyNg==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/36#discussion_r370940526", "bodyText": "Sloppy copy paste job :p", "author": "florensie", "createdAt": "2020-01-25T15:52:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzNjUyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzNjUzNw==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/36#discussion_r370936537", "bodyText": "Same as above", "author": "shedaniel", "createdAt": "2020-01-25T14:34:20Z", "path": "patchwork-registries/src/main/java/com/patchworkmc/mixin/registries/MixinBiomeSourceType.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Minecraft Forge, Patchwork Project\n+ * Copyright (c) 2016-2020, 2019-2020\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package com.patchworkmc.mixin.registries;\n+\n+import net.minecraftforge.registries.IForgeRegistryEntry;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.Unique;\n+\n+import net.minecraft.world.biome.source.BiomeSourceType;\n+import net.minecraft.util.Identifier;\n+import net.minecraft.util.registry.Registry;\n+\n+import com.patchworkmc.impl.registries.ExtendedForgeRegistryEntry;\n+\n+@Mixin(BiomeSourceType.class)\n+public class MixinBiomeSourceType implements ExtendedForgeRegistryEntry<BiomeSourceType> {\n+\t@Unique\n+\tprivate Identifier registryName;\n+\n+\t@Override\n+\tpublic IForgeRegistryEntry setRegistryName(Identifier name) {\n+\t\tthis.registryName = name;\n+\n+\t\treturn this;\n+\t}\n+\n+\tpublic Identifier getRegistryName() {\n+\t\tIdentifier current = Registry.BIOME_SOURCE_TYPE.getId((BiomeSourceType) (Object) this);\n+\t\tIdentifier set = registryName;", "originalCommit": "be8cf8f9a89155dd0ed917e12712de5d484acf42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzNjU0Mw==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/36#discussion_r370936543", "bodyText": "Same", "author": "shedaniel", "createdAt": "2020-01-25T14:34:27Z", "path": "patchwork-registries/src/main/java/com/patchworkmc/mixin/registries/MixinBlockEntityType.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Minecraft Forge, Patchwork Project\n+ * Copyright (c) 2016-2020, 2019-2020\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package com.patchworkmc.mixin.registries;\n+\n+import net.minecraftforge.registries.IForgeRegistryEntry;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.Unique;\n+\n+import net.minecraft.block.entity.BlockEntityType;\n+import net.minecraft.util.Identifier;\n+import net.minecraft.util.registry.Registry;\n+\n+import com.patchworkmc.impl.registries.ExtendedForgeRegistryEntry;\n+\n+@Mixin(BlockEntityType.class)\n+public class MixinBlockEntityType implements ExtendedForgeRegistryEntry<BlockEntityType> {\n+\t@Unique\n+\tprivate Identifier registryName;\n+\n+\t@Override\n+\tpublic IForgeRegistryEntry setRegistryName(Identifier name) {\n+\t\tthis.registryName = name;\n+\n+\t\treturn this;\n+\t}\n+\n+\tpublic Identifier getRegistryName() {\n+\t\tIdentifier current = Registry.BLOCK_ENTITY.getId((BlockEntityType) (Object) this);\n+\t\tIdentifier set = registryName;", "originalCommit": "be8cf8f9a89155dd0ed917e12712de5d484acf42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzNjU0Ng==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/36#discussion_r370936546", "bodyText": "Same", "author": "shedaniel", "createdAt": "2020-01-25T14:34:36Z", "path": "patchwork-registries/src/main/java/com/patchworkmc/mixin/registries/MixinCarver.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Minecraft Forge, Patchwork Project\n+ * Copyright (c) 2016-2020, 2019-2020\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package com.patchworkmc.mixin.registries;\n+\n+import net.minecraftforge.registries.IForgeRegistryEntry;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.Unique;\n+\n+import net.minecraft.world.gen.carver.Carver;\n+import net.minecraft.util.Identifier;\n+import net.minecraft.util.registry.Registry;\n+\n+import com.patchworkmc.impl.registries.ExtendedForgeRegistryEntry;\n+\n+@Mixin(Carver.class)\n+public class MixinCarver implements ExtendedForgeRegistryEntry<Carver> {\n+\t@Unique\n+\tprivate Identifier registryName;\n+\n+\t@Override\n+\tpublic IForgeRegistryEntry setRegistryName(Identifier name) {\n+\t\tthis.registryName = name;\n+\n+\t\treturn this;\n+\t}\n+\n+\tpublic Identifier getRegistryName() {\n+\t\tIdentifier current = Registry.CARVER.getId((Carver) (Object) this);\n+\t\tIdentifier set = registryName;", "originalCommit": "be8cf8f9a89155dd0ed917e12712de5d484acf42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzNjU1NQ==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/36#discussion_r370936555", "bodyText": "Same", "author": "shedaniel", "createdAt": "2020-01-25T14:34:45Z", "path": "patchwork-registries/src/main/java/com/patchworkmc/mixin/registries/MixinChunkGeneratorType.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Minecraft Forge, Patchwork Project\n+ * Copyright (c) 2016-2020, 2019-2020\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package com.patchworkmc.mixin.registries;\n+\n+import net.minecraftforge.registries.IForgeRegistryEntry;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.Unique;\n+\n+import net.minecraft.world.gen.chunk.ChunkGeneratorType;\n+import net.minecraft.util.Identifier;\n+import net.minecraft.util.registry.Registry;\n+\n+import com.patchworkmc.impl.registries.ExtendedForgeRegistryEntry;\n+\n+@Mixin(ChunkGeneratorType.class)\n+public class MixinChunkGeneratorType implements ExtendedForgeRegistryEntry<ChunkGeneratorType> {\n+\t@Unique\n+\tprivate Identifier registryName;\n+\n+\t@Override\n+\tpublic IForgeRegistryEntry setRegistryName(Identifier name) {\n+\t\tthis.registryName = name;\n+\n+\t\treturn this;\n+\t}\n+\n+\tpublic Identifier getRegistryName() {\n+\t\tIdentifier current = Registry.CHUNK_GENERATOR_TYPE.getId((ChunkGeneratorType) (Object) this);\n+\t\tIdentifier set = registryName;", "originalCommit": "be8cf8f9a89155dd0ed917e12712de5d484acf42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzNjU3Nw==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/36#discussion_r370936577", "bodyText": "We can really shorten this with registryName == null ? Registry.CHUNK_STATUS.getDefaultId() : registryName; tbh", "author": "shedaniel", "createdAt": "2020-01-25T14:35:30Z", "path": "patchwork-registries/src/main/java/com/patchworkmc/mixin/registries/MixinChunkStatus.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Minecraft Forge, Patchwork Project\n+ * Copyright (c) 2016-2020, 2019-2020\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package com.patchworkmc.mixin.registries;\n+\n+import net.minecraftforge.registries.IForgeRegistryEntry;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.Unique;\n+\n+import net.minecraft.world.chunk.ChunkStatus;\n+import net.minecraft.util.Identifier;\n+import net.minecraft.util.registry.Registry;\n+\n+import com.patchworkmc.impl.registries.ExtendedForgeRegistryEntry;\n+\n+@Mixin(ChunkStatus.class)\n+public class MixinChunkStatus implements ExtendedForgeRegistryEntry<ChunkStatus> {\n+\t@Unique\n+\tprivate Identifier registryName;\n+\n+\t@Override\n+\tpublic IForgeRegistryEntry setRegistryName(Identifier name) {\n+\t\tthis.registryName = name;\n+\n+\t\treturn this;\n+\t}\n+\n+\tpublic Identifier getRegistryName() {\n+\t\tIdentifier current = Registry.CHUNK_STATUS.getId((ChunkStatus) (Object) this);\n+\t\tIdentifier set = registryName;", "originalCommit": "be8cf8f9a89155dd0ed917e12712de5d484acf42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0MDQ4Nw==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/36#discussion_r370940487", "bodyText": "It won't have the same effect will it?\nRight now the priority would be current -> registryName -> default.\nWith yours it would be registryName -> default.", "author": "florensie", "createdAt": "2020-01-25T15:51:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzNjU3Nw=="}], "type": "inlineReview"}, {"oid": "e410be235bd4fd166478705e973d976cbe02e70c", "url": "https://github.com/PatchworkMC/patchwork-api/commit/e410be235bd4fd166478705e973d976cbe02e70c", "message": "Fix sloppy copy pasting", "committedDate": "2020-01-25T16:00:36Z", "type": "commit"}, {"oid": "ebf63754329187abe7494dacaa5242a8fd62de82", "url": "https://github.com/PatchworkMC/patchwork-api/commit/ebf63754329187abe7494dacaa5242a8fd62de82", "message": "Merge branch 'master' of https://github.com/PatchworkMC/patchwork-api into moar-registries\n\n\u0001 Conflicts:\n\u0001\tpatchwork-registries/src/main/java/com/patchworkmc/mixin/registries/MixinBiome.java\n\u0001\tpatchwork-registries/src/main/java/com/patchworkmc/mixin/registries/MixinFeature.java\n\u0001\tpatchwork-registries/src/main/java/com/patchworkmc/mixin/registries/MixinSurfaceBuilder.java", "committedDate": "2020-01-26T00:53:08Z", "type": "commit"}, {"oid": "6362526897d7da233c111f39323399610653ff91", "url": "https://github.com/PatchworkMC/patchwork-api/commit/6362526897d7da233c111f39323399610653ff91", "message": "Deduplication", "committedDate": "2020-01-26T01:41:25Z", "type": "commit"}, {"oid": "16c7932e5f14098c1869634829720e76a8df8ba2", "url": "https://github.com/PatchworkMC/patchwork-api/commit/16c7932e5f14098c1869634829720e76a8df8ba2", "message": "why not \u00af\\_(\u30c4)_/\u00af", "committedDate": "2020-01-26T01:48:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk2OTYzMw==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/36#discussion_r370969633", "bodyText": "I think we're safe to leave out internal implementation details like this one, mods that call them are probably doing something wrong", "author": "coderbot16", "createdAt": "2020-01-26T02:41:37Z", "path": "patchwork-registries/src/main/java/net/minecraftforge/fml/client/registry/RenderingRegistry.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Minecraft Forge, Patchwork Project\n+ * Copyright (c) 2016-2020, 2019-2020\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.fml.client.registry;\n+\n+import net.minecraft.client.render.entity.EntityRenderDispatcher;\n+import net.minecraft.entity.Entity;\n+\n+import net.fabricmc.fabric.api.client.render.EntityRendererRegistry;\n+\n+public class RenderingRegistry {\n+\t/**\n+\t * Register an entity rendering handler. This will, after mod initialization, be inserted into the main\n+\t * render map for entities.\n+\t * Call this during {@link net.minecraftforge.fml.event.lifecycle.FMLClientSetupEvent}.\n+\t * This method is safe to call during parallel mod loading.\n+\t */\n+\tpublic static <T extends Entity> void registerEntityRenderingHandler(Class<T> entityClass, IRenderFactory<? super T> renderFactory) {\n+\t\tEntityRendererRegistry.INSTANCE.register(entityClass, (dispatcher, context) -> renderFactory.createRenderFor(dispatcher));\n+\t}\n+\n+\t// This is here just in case a mod calls it, entity renderers are loaded by the Fabric API\n+\tpublic static void loadEntityRenderers(EntityRenderDispatcher manager) { }", "originalCommit": "16c7932e5f14098c1869634829720e76a8df8ba2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9193935576982b0b2e1ef91723eded3609e92b87", "url": "https://github.com/PatchworkMC/patchwork-api/commit/9193935576982b0b2e1ef91723eded3609e92b87", "message": "e n h a n c e (RecipeSerializers)", "committedDate": "2020-01-26T03:10:17Z", "type": "commit"}, {"oid": "6a30418e34437e53d877e759e7c047ab6e2e2172", "url": "https://github.com/PatchworkMC/patchwork-api/commit/6a30418e34437e53d877e759e7c047ab6e2e2172", "message": "review", "committedDate": "2020-01-26T03:12:08Z", "type": "commit"}, {"oid": "9e611f427aedfe236699558c7bf7bf953156f3d0", "url": "https://github.com/PatchworkMC/patchwork-api/commit/9e611f427aedfe236699558c7bf7bf953156f3d0", "message": "IDEA messed up the indents\n(I swear it wasn't me)", "committedDate": "2020-01-26T03:15:50Z", "type": "commit"}, {"oid": "87d5da6724a60c73ea0e844c62a4fb4735de647e", "url": "https://github.com/PatchworkMC/patchwork-api/commit/87d5da6724a60c73ea0e844c62a4fb4735de647e", "message": "License", "committedDate": "2020-01-26T03:20:23Z", "type": "commit"}]}