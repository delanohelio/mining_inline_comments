{"pr_number": 4280, "pr_title": "perf(chunkprovider): add sorting for incoming request on chunk loading/generation.", "pr_createdAt": "2020-11-26T14:38:12Z", "pr_url": "https://github.com/MovingBlocks/Terasology/pull/4280", "timeline": [{"oid": "f04674d381b4be5d362c71a915b66e95af82e05a", "url": "https://github.com/MovingBlocks/Terasology/commit/f04674d381b4be5d362c71a915b66e95af82e05a", "message": "pref(chunkprovider): add sorting for incoming request on chunk loading/generation. chunks should ready faster then before", "committedDate": "2020-11-26T14:36:40Z", "type": "commit"}, {"oid": "bbf7661c9cf99b36fbc15bc67cd09f1c538a5299", "url": "https://github.com/MovingBlocks/Terasology/commit/bbf7661c9cf99b36fbc15bc67cd09f1c538a5299", "message": "Merge branch 'develop' into perf/chunkprovider-change-sorting", "committedDate": "2020-11-26T14:38:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2MTE3MQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/4280#discussion_r536261171", "bodyText": "\ud83d\udc4d", "author": "skaldarnar", "createdAt": "2020-12-04T17:31:46Z", "path": "engine/src/main/java/org/terasology/world/chunks/localChunkProvider/LocalChunkProvider.java", "diffHunk": "@@ -284,7 +284,6 @@ private void deactivateBlocks() {\n     private void checkForUnload() {\n         PerformanceMonitor.startActivity(\"Unloading irrelevant chunks\");\n         int unloaded = 0;\n-        logger.debug(\"Compacting cache\");", "originalCommit": "bbf7661c9cf99b36fbc15bc67cd09f1c538a5299", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2MTc0Nw==", "url": "https://github.com/MovingBlocks/Terasology/pull/4280#discussion_r536261747", "bodyText": "Do we just need fewer tasks, or is this part of a greater picture (take less threads here, but use more somewhere else)?", "author": "skaldarnar", "createdAt": "2020-12-04T17:32:39Z", "path": "engine/src/main/java/org/terasology/world/chunks/pipeline/ChunkProcessingPipeline.java", "diffHunk": "@@ -43,17 +44,16 @@\n  */\n public class ChunkProcessingPipeline {\n \n-    private static final int NUM_TASK_THREADS = 8;\n+    private static final int NUM_TASK_THREADS = 4;", "originalCommit": "bbf7661c9cf99b36fbc15bc67cd09f1c538a5299", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI2OTYwNQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/4280#discussion_r536269605", "bodyText": "this is indeed black magic - where doe the order come from?", "author": "skaldarnar", "createdAt": "2020-12-04T17:45:30Z", "path": "engine/src/main/java/org/terasology/world/chunks/pipeline/ChunkProcessingPipeline.java", "diffHunk": "@@ -82,6 +82,18 @@ public ChunkProcessingPipeline(Function<Vector3ic, Chunk> chunkProvider, Compara\n         reactor.start();\n     }\n \n+    /**\n+     * BlackMagic method: {@link ExecutorCompletionService} wraps task with QueueingFuture (private access)", "originalCommit": "bbf7661c9cf99b36fbc15bc67cd09f1c538a5299", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0287bbb45ebf9c511511cb04da1c2bb6d796b364", "url": "https://github.com/MovingBlocks/Terasology/commit/0287bbb45ebf9c511511cb04da1c2bb6d796b364", "message": "Merge branch 'develop' into perf/chunkprovider-change-sorting", "committedDate": "2020-12-04T18:05:50Z", "type": "commit"}]}