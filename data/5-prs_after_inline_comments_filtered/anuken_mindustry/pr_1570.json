{"pr_number": 1570, "pr_title": "Add \"pardon\" command for votekicks", "pr_createdAt": "2020-02-12T20:27:07Z", "pr_url": "https://github.com/Anuken/Mindustry/pull/1570", "timeline": [{"oid": "01fa1223d96d2655679d5d12af047268e1d204c9", "url": "https://github.com/Anuken/Mindustry/commit/01fa1223d96d2655679d5d12af047268e1d204c9", "message": "Add \"pardon\" command\n\nAllows players who have been incorrectly votekicked to join again", "committedDate": "2020-02-12T20:25:49Z", "type": "commit"}, {"oid": "83886867ae73f415ff25fdd828a54d48f9e70fe1", "url": "https://github.com/Anuken/Mindustry/commit/83886867ae73f415ff25fdd828a54d48f9e70fe1", "message": "isn't hasn't", "committedDate": "2020-02-12T20:29:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxMDAxMQ==", "url": "https://github.com/Anuken/Mindustry/pull/1570#discussion_r378510011", "bodyText": "Use getInfoOptional; getInfo will always create an info if it does not exist, and may never return null.", "author": "Anuken", "createdAt": "2020-02-12T21:01:32Z", "path": "server/src/mindustry/server/ServerControl.java", "diffHunk": "@@ -659,6 +659,16 @@ private void registerCommands(){\n                 err(\"That IP/ID is not banned!\");\n             }\n         });\n+        \n+        handler.register(\"pardon\", \"<ID>\", \"Pardons a votekicked player by ID and allows them to join again.\", arg -> {\n+            PlayerInfo info = netServer.admins.getInfo(arg[0]);", "originalCommit": "83886867ae73f415ff25fdd828a54d48f9e70fe1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxMDA2NA==", "url": "https://github.com/Anuken/Mindustry/pull/1570#discussion_r378510064", "bodyText": "extra space", "author": "Anuken", "createdAt": "2020-02-12T21:01:38Z", "path": "server/src/mindustry/server/ServerControl.java", "diffHunk": "@@ -659,6 +659,16 @@ private void registerCommands(){\n                 err(\"That IP/ID is not banned!\");\n             }\n         });\n+        \n+        handler.register(\"pardon\", \"<ID>\", \"Pardons a votekicked player by ID and allows them to join again.\", arg -> {\n+            PlayerInfo info = netServer.admins.getInfo(arg[0]);\n+            if(info != null){\n+                info.lastKicked = 0;\n+                info(\"Pardoned player: {0}\", info.lastName);\n+            } else{", "originalCommit": "83886867ae73f415ff25fdd828a54d48f9e70fe1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxOTcwMg==", "url": "https://github.com/Anuken/Mindustry/pull/1570#discussion_r378519702", "bodyText": "I meant the space in } else{ before the else.", "author": "Anuken", "createdAt": "2020-02-12T21:22:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxMDA2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUyMDU3NA==", "url": "https://github.com/Anuken/Mindustry/pull/1570#discussion_r378520574", "bodyText": "oh", "author": "fuzzbuck", "createdAt": "2020-02-12T21:24:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUxMDA2NA=="}], "type": "inlineReview"}, {"oid": "f7176e66578221f097f5cb00820b74a61da067b4", "url": "https://github.com/Anuken/Mindustry/commit/f7176e66578221f097f5cb00820b74a61da067b4", "message": "getInfoOptional & space", "committedDate": "2020-02-12T21:08:26Z", "type": "commit"}, {"oid": "87808dc8078aa2eeda228d72f680064ddf950fb5", "url": "https://github.com/Anuken/Mindustry/commit/87808dc8078aa2eeda228d72f680064ddf950fb5", "message": "pardon me\n\nno pun intended", "committedDate": "2020-02-12T21:25:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQ3OTUyMw==", "url": "https://github.com/Anuken/Mindustry/pull/1570#discussion_r386479523", "bodyText": "Might be more accurate to say \"That ID can't be found\" instead.", "author": "Anuken", "createdAt": "2020-03-02T15:55:03Z", "path": "server/src/mindustry/server/ServerControl.java", "diffHunk": "@@ -666,7 +666,7 @@ private void registerCommands(){\n             if(info != null){\n                 info.lastKicked = 0;\n                 info(\"Pardoned player: {0}\", info.lastName);\n-            } else{\n+            }else{\n                 err(\"That ID hasn't been votekicked!\");", "originalCommit": "87808dc8078aa2eeda228d72f680064ddf950fb5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2OTk1NA==", "url": "https://github.com/Anuken/Mindustry/pull/1570#discussion_r386569954", "bodyText": "oke", "author": "fuzzbuck", "createdAt": "2020-03-02T18:29:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQ3OTUyMw=="}], "type": "inlineReview"}, {"oid": "2bb79cf99f6d6da594fc7defce7cb69daeb37405", "url": "https://github.com/Anuken/Mindustry/commit/2bb79cf99f6d6da594fc7defce7cb69daeb37405", "message": "Update ServerControl.java", "committedDate": "2020-03-02T18:29:43Z", "type": "commit"}]}