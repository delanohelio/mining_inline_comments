{"pr_number": 9559, "pr_title": "feat: document level npm css", "pr_createdAt": "2020-12-03T07:53:44Z", "pr_url": "https://github.com/vaadin/flow/pull/9559", "timeline": [{"oid": "d77623c7f25f882c6512aebd8b08155f5d604c6e", "url": "https://github.com/vaadin/flow/commit/d77623c7f25f882c6512aebd8b08155f5d604c6e", "message": "feat: document level npm css\n\nNow there is a possibility to use the\n\"documentCss\" key in theme.json to\ninject npm css into the document rool level\nelement.\n\nThis is mostly for embedded web components\nas they do not target document by default\n\nFixes #9533", "committedDate": "2020-12-09T05:30:45Z", "type": "commit"}, {"oid": "d77623c7f25f882c6512aebd8b08155f5d604c6e", "url": "https://github.com/vaadin/flow/commit/d77623c7f25f882c6512aebd8b08155f5d604c6e", "message": "feat: document level npm css\n\nNow there is a possibility to use the\n\"documentCss\" key in theme.json to\ninject npm css into the document rool level\nelement.\n\nThis is mostly for embedded web components\nas they do not target document by default\n\nFixes #9533", "committedDate": "2020-12-09T05:30:45Z", "type": "forcePushed"}, {"oid": "d92c5b4b6ef1512212d66c8b3781567a47cb1c07", "url": "https://github.com/vaadin/flow/commit/d92c5b4b6ef1512212d66c8b3781567a47cb1c07", "message": "Dont allow faulty appshell configuration", "committedDate": "2020-12-09T05:37:24Z", "type": "commit"}, {"oid": "1c05dc10ace63969999e8c6823b0201eead19b00", "url": "https://github.com/vaadin/flow/commit/1c05dc10ace63969999e8c6823b0201eead19b00", "message": "Fix test expectation", "committedDate": "2020-12-09T06:19:29Z", "type": "commit"}, {"oid": "3ec5f8868660c4bf45248741c4f1db93dfe55b84", "url": "https://github.com/vaadin/flow/commit/3ec5f8868660c4bf45248741c4f1db93dfe55b84", "message": "Merge branch 'master' into issues/9533_document_level_css\n\n# Conflicts:\n#\tflow-server/src/main/resources/plugins/application-theme-plugin/package.json\n#\tflow-server/src/main/resources/plugins/application-theme-plugin/theme-generator.js\n#\tflow-server/src/main/resources/webpack.generated.js\n#\tflow-tests/test-embedding/test-embedding-application-theme/src/test/java/com/vaadin/flow/webcomponent/ApplicationThemeComponentIT.java", "committedDate": "2020-12-14T11:13:17Z", "type": "commit"}, {"oid": "750c24d43efbac89e9eb78ad881859c06398960f", "url": "https://github.com/vaadin/flow/commit/750c24d43efbac89e9eb78ad881859c06398960f", "message": "Merge branch 'master' into issues/9533_document_level_css\n\n# Conflicts:\n#\tflow-tests/test-embedding/test-embedding-application-theme/src/test/java/com/vaadin/flow/webcomponent/ApplicationThemeComponentIT.java", "committedDate": "2020-12-17T07:43:11Z", "type": "commit"}, {"oid": "bc73782cec69271b4bc68628ffc36f11fa129d97", "url": "https://github.com/vaadin/flow/commit/bc73782cec69271b4bc68628ffc36f11fa129d97", "message": "Use more targeted bookkeeping for globalCss\n\nHave a full map on where the global css\nhas been injected to so that if we add for\nshadow roots we don't add to document,\nbut we are able to add to other shadow roots.", "committedDate": "2020-12-17T09:37:27Z", "type": "commit"}, {"oid": "55b105123ba7231b005edfa9a656a30b727e816e", "url": "https://github.com/vaadin/flow/commit/55b105123ba7231b005edfa9a656a30b727e816e", "message": "Add comment on why we also inject to target", "committedDate": "2020-12-17T12:38:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTA3Nzc4Mw==", "url": "https://github.com/vaadin/flow/pull/9559#discussion_r545077783", "bodyText": "Broken indent", "author": "pleku", "createdAt": "2020-12-17T13:10:21Z", "path": "flow-tests/test-embedding/test-embedding-application-theme/src/test/java/com/vaadin/flow/webcomponent/ApplicationThemeComponentIT.java", "diffHunk": "@@ -73,11 +68,34 @@ public void applicationTheme_GlobalCss_isUsedOnlyInEmbeddeComponent() {\n \n         Assert.assertNotEquals(\"Ostrich\", body.getCssValue(\"font-family\"));\n \n-        getDriver().get(getRootURL() + \"/VAADIN/static/themes/embedded-theme/img/bg.jpg\");\n+        Assert\n+            .assertEquals(\"Embedded style should not match external component\",\n+                \"rgba(0, 0, 255, 1)\",\n+                $(SpanElement.class).id(\"overflow\").getCssValue(\"color\"));\n+                getDriver().get(getRootURL() + \"/themes/embedded-theme/img/bg.jpg\");", "originalCommit": "bc73782cec69271b4bc68628ffc36f11fa129d97", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTA3OTU5MQ==", "url": "https://github.com/vaadin/flow/pull/9559#discussion_r545079591", "bodyText": "I'll fix it if the build breaks.", "author": "caalador", "createdAt": "2020-12-17T13:13:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTA3Nzc4Mw=="}], "type": "inlineReview"}]}