{"pr_number": 9588, "pr_title": "feat: Embedded component appTheme support", "pr_createdAt": "2020-12-07T12:02:52Z", "pr_url": "https://github.com/vaadin/flow/pull/9588", "timeline": [{"oid": "89cd62f858995a6c668e91cb14357d8699a78b1b", "url": "https://github.com/vaadin/flow/commit/89cd62f858995a6c668e91cb14357d8699a78b1b", "message": "feat: Embedded component appTheme support\n\nAdd support for application theme with\nembedded components.\n\nFixes #8564", "committedDate": "2020-12-07T12:02:07Z", "type": "commit"}, {"oid": "f09fdb9693e6830e5a2d82b9c88472e42c71d85c", "url": "https://github.com/vaadin/flow/commit/f09fdb9693e6830e5a2d82b9c88472e42c71d85c", "message": "Enable disabling of web component generation.", "committedDate": "2020-12-08T07:38:02Z", "type": "commit"}, {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27", "url": "https://github.com/vaadin/flow/commit/aba80a41959b8e013860e81d95aced48a1d28d27", "message": "Handle null themeDefinition", "committedDate": "2020-12-08T09:12:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE3NDE3OA==", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538174178", "bodyText": "So if one has @Theme(value=\"my-theme\", variant=Lumo.DARK) in their exported web component it will not apply the variant ?\nOr does it fail already before this place ?", "author": "pleku", "createdAt": "2020-12-08T09:27:15Z", "path": "flow-server/src/main/java/com/vaadin/flow/component/webcomponent/WebComponentUI.java", "diffHunk": "@@ -286,7 +288,8 @@ private void assignThemeVariant() {\n         WebComponentConfigurationRegistry registry = getConfigurationRegistry();\n         Optional<Theme> theme = registry\n                 .getEmbeddedApplicationAnnotation(Theme.class);\n-        if (!theme.isPresent()) {\n+        if (!theme.isPresent() || theme.get().themeClass()\n+            .equals(AbstractTheme.class)) {", "originalCommit": "aba80a41959b8e013860e81d95aced48a1d28d27", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE5NDg0NA==", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538194844", "bodyText": "This will not do anything if you have a themeClass in theme. You can have my-theme and theme variant.", "author": "caalador", "createdAt": "2020-12-08T09:54:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE3NDE3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MDcyNQ==", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538180725", "bodyText": "Not sure why do we need to expose this even now ?", "author": "pleku", "createdAt": "2020-12-08T09:36:22Z", "path": "flow-server/src/main/java/com/vaadin/flow/server/InitParameters.java", "diffHunk": "@@ -158,4 +158,10 @@\n      * component UI imports them as dependencies.\n      */\n     public static final String COMPILED_WEB_COMPONENTS_PATH = \"compiled.web.components.path\";\n+\n+    /**\n+     * Configuration for determining if embeddable web components should\n+     * be generated. By default they are generated.\n+     */\n+    public static final String GENERATE_WEB_COMPONENTS = \"generateEmbeddableWebComponents\";", "originalCommit": "aba80a41959b8e013860e81d95aced48a1d28d27", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE5NTc5Ng==", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538195796", "bodyText": "I don't understand why this was not configurable from the beginning, but I'll revert this.", "author": "caalador", "createdAt": "2020-12-08T09:56:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MDcyNQ=="}], "type": "inlineReview"}, {"oid": "c2558f7e3014c694bbdc799ec9db5d120c127e86", "url": "https://github.com/vaadin/flow/commit/c2558f7e3014c694bbdc799ec9db5d120c127e86", "message": "Revert \"Enable disabling of web component generation.\"\n\nThis reverts commit f09fdb9693e6830e5a2d82b9c88472e42c71d85c.", "committedDate": "2020-12-08T09:55:37Z", "type": "commit"}, {"oid": "660b0c7ac9922bcca9728c4d52c214057f83e8d1", "url": "https://github.com/vaadin/flow/commit/660b0c7ac9922bcca9728c4d52c214057f83e8d1", "message": "Fix test to have correct name", "committedDate": "2020-12-08T10:07:10Z", "type": "commit"}, {"oid": "757bba791e5f68630558540c0e9e705f429c81b0", "url": "https://github.com/vaadin/flow/commit/757bba791e5f68630558540c0e9e705f429c81b0", "message": "Clean imports", "committedDate": "2020-12-08T10:19:38Z", "type": "commit"}]}