{"pr_number": 8930, "pr_title": "Live reload on frontend changes", "pr_createdAt": "2020-09-01T12:13:59Z", "pr_url": "https://github.com/vaadin/flow/pull/8930", "timeline": [{"oid": "73666967e988eb28f446f56ca84eb00fff03881b", "url": "https://github.com/vaadin/flow/commit/73666967e988eb28f446f56ca84eb00fff03881b", "message": "Run prepare-frontend in test modules", "committedDate": "2020-09-02T09:41:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk2MjYzNA==", "url": "https://github.com/vaadin/flow/pull/8930#discussion_r481962634", "bodyText": "Do not forget to remove this deprecated code someday.", "author": "vaadin-bot", "createdAt": "2020-09-02T10:22:37Z", "path": "flow-server/src/main/java/com/vaadin/flow/server/Constants.java", "diffHunk": "@@ -496,6 +496,12 @@\n     @Deprecated\n     public static final String SERVLET_PARAMETER_DEVMODE_ENABLE_LIVE_RELOAD = InitParameters.SERVLET_PARAMETER_DEVMODE_ENABLE_LIVE_RELOAD;", "originalCommit": "73666967e988eb28f446f56ca84eb00fff03881b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d3913dfbfffe9c08e847d3a5a66c0d0520382fa8", "url": "https://github.com/vaadin/flow/commit/d3913dfbfffe9c08e847d3a5a66c0d0520382fa8", "message": "Remove unused imports", "committedDate": "2020-09-02T12:25:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjcxMzQ2OA==", "url": "https://github.com/vaadin/flow/pull/8930#discussion_r482713468", "bodyText": "Could perhaps be BufferedReader in = new BufferedReader(new InputStreamReader(accept.getInputStream(), StandardCharsets.UTF_8)); so there are no suprises on the encodings.", "author": "caalador", "createdAt": "2020-09-03T05:31:37Z", "path": "flow-server/src/main/java/com/vaadin/flow/server/DevServerWatchDog.java", "diffHunk": "@@ -79,6 +82,18 @@ private Logger getLogger() {\n             return LoggerFactory.getLogger(WatchDogServer.class);\n         }\n \n+        private void enterReloadMessageReadLoop(Socket accept) throws IOException{\n+            BufferedReader in = new BufferedReader(new InputStreamReader(accept.getInputStream()));", "originalCommit": "1e21ce2f6eb98a4421fec668d936176c2ae428eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjczMjg5Nw==", "url": "https://github.com/vaadin/flow/pull/8930#discussion_r482732897", "bodyText": "Done. Also set encoding from the webpack side.", "author": "joheriks", "createdAt": "2020-09-03T06:28:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjcxMzQ2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc0NzM0NQ==", "url": "https://github.com/vaadin/flow/pull/8930#discussion_r482747345", "bodyText": "Helper class could be final.\nAnd it should have a default private CTOR to avoid instantiation which shows that this is a class with only static methods.", "author": "denis-anisimov", "createdAt": "2020-09-03T06:59:33Z", "path": "flow-server/src/main/java/com/vaadin/flow/internal/BootstrapHandlerHelper.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.internal;\n+\n+import java.io.Serializable;\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+\n+import com.vaadin.flow.server.BootstrapHandler;\n+import com.vaadin.flow.server.HandlerHelper;\n+import com.vaadin.flow.server.VaadinRequest;\n+import com.vaadin.flow.server.VaadinSession;\n+\n+/**\n+ * Helper methods for use in bootstrapping.\n+ *\n+ */\n+public class BootstrapHandlerHelper implements Serializable {", "originalCommit": "8f226590b2d987485c5ad8357a7fa75a3e54e980", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc2NTkzMA==", "url": "https://github.com/vaadin/flow/pull/8930#discussion_r482765930", "bodyText": "Done", "author": "joheriks", "createdAt": "2020-09-03T07:30:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc0NzM0NQ=="}], "type": "inlineReview"}, {"oid": "f8cd464c6effa0bc9fbebfdd7dc3f041c404d26e", "url": "https://github.com/vaadin/flow/commit/f8cd464c6effa0bc9fbebfdd7dc3f041c404d26e", "message": "Live reload on frontend changes\n\nTrigger live reload when webpack recompiles frontend files\n\nWhen the webpack dev server finished recompilation, it notifies the Java server over\nthe watchdog connection. When the server notices the message, it sends a browser reload\nmessage over the dedicated live reload web socket connection.\n\nOther changes in this commit:\n- vaadin-devmode-gizmo is now bundled separately and managed by webpack.generated.js (so no longer added to generated-flow-imports)\n- Convert VaadinDevmodeGizmo to TypeScript", "committedDate": "2020-09-03T07:35:10Z", "type": "commit"}, {"oid": "2a0e998c12cd83943432d75538d3c3eb1e71b4dc", "url": "https://github.com/vaadin/flow/commit/2a0e998c12cd83943432d75538d3c3eb1e71b4dc", "message": "IE11 compatibility fixes:\n- JS color constants as CSS `var` cannot be used for dynamic styles\n- No use of findIndex", "committedDate": "2020-09-03T07:35:10Z", "type": "commit"}, {"oid": "89435963f33969957c7501c9df6ba1ad27398ccd", "url": "https://github.com/vaadin/flow/commit/89435963f33969957c7501c9df6ba1ad27398ccd", "message": "Updated .gitignore and added package.json, package-lock.json", "committedDate": "2020-09-03T07:35:10Z", "type": "commit"}, {"oid": "459adaf239c11e0344137d507b034e36a9b428e7", "url": "https://github.com/vaadin/flow/commit/459adaf239c11e0344137d507b034e36a9b428e7", "message": "Run prepare-frontend in test modules", "committedDate": "2020-09-03T07:35:10Z", "type": "commit"}, {"oid": "8df7bfba7b323c13c5bad63d2f6220387565a8ba", "url": "https://github.com/vaadin/flow/commit/8df7bfba7b323c13c5bad63d2f6220387565a8ba", "message": "Remove unused imports", "committedDate": "2020-09-03T07:35:10Z", "type": "commit"}, {"oid": "441c880b15b3ef607929e1bcf11571fec9e8b496", "url": "https://github.com/vaadin/flow/commit/441c880b15b3ef607929e1bcf11571fec9e8b496", "message": "Restored BootstrapHandler::getServiceURL for backwards compatibility", "committedDate": "2020-09-03T07:35:10Z", "type": "commit"}, {"oid": "0081f196f93ddca7c8178b26e8e6bee89b9d8a44", "url": "https://github.com/vaadin/flow/commit/0081f196f93ddca7c8178b26e8e6bee89b9d8a44", "message": "Set utf8 explicitly on webpack <-> server connection", "committedDate": "2020-09-03T07:35:10Z", "type": "commit"}, {"oid": "b20aec923fba2f486109a3945bbc5e1c828cab43", "url": "https://github.com/vaadin/flow/commit/b20aec923fba2f486109a3945bbc5e1c828cab43", "message": "Newline at EOF", "committedDate": "2020-09-03T07:35:10Z", "type": "commit"}, {"oid": "5d4c26c70608f72323f0d5961862781e1792508f", "url": "https://github.com/vaadin/flow/commit/5d4c26c70608f72323f0d5961862781e1792508f", "message": "Added missing import from rebase", "committedDate": "2020-09-03T07:36:43Z", "type": "commit"}, {"oid": "5d4c26c70608f72323f0d5961862781e1792508f", "url": "https://github.com/vaadin/flow/commit/5d4c26c70608f72323f0d5961862781e1792508f", "message": "Added missing import from rebase", "committedDate": "2020-09-03T07:36:43Z", "type": "forcePushed"}]}