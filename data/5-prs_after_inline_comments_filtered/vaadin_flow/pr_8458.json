{"pr_number": 8458, "pr_title": "Cherry picks 2.2", "pr_createdAt": "2020-05-29T08:25:54Z", "pr_url": "https://github.com/vaadin/flow/pull/8458", "timeline": [{"oid": "3b27af34f2dfa7f14a764ed45a9436fc7cc6da77", "url": "https://github.com/vaadin/flow/commit/3b27af34f2dfa7f14a764ed45a9436fc7cc6da77", "message": "Fix issue with Push unsubscribe URL. (#8330)\n\nRelated to #8177", "committedDate": "2020-05-28T13:15:05Z", "type": "commit"}, {"oid": "636cc20d79c5a5790792897a0020b3828610a2d5", "url": "https://github.com/vaadin/flow/commit/636cc20d79c5a5790792897a0020b3828610a2d5", "message": "Workaround a bug in the external reflection library. (#8431)\n\nFixes #8371", "committedDate": "2020-05-29T08:20:09Z", "type": "commit"}, {"oid": "4da0fcecb16af63410f073d3cbaf8b064291a9a8", "url": "https://github.com/vaadin/flow/commit/4da0fcecb16af63410f073d3cbaf8b064291a9a8", "message": "Force pnpm version >=4.4.0, <4.6.0 (#8452)\n\nFixes #8434", "committedDate": "2020-05-29T08:20:19Z", "type": "commit"}, {"oid": "5c74bef8deba844390e58e3215266fc3e89544e7", "url": "https://github.com/vaadin/flow/commit/5c74bef8deba844390e58e3215266fc3e89544e7", "message": "Force chokidar version to ^3.4.0 (#8432) (#8451)\n\nFixes #8432", "committedDate": "2020-05-29T12:05:44Z", "type": "commit"}, {"oid": "a6c240e7e192f68e55c02442f42e2eef213676c6", "url": "https://github.com/vaadin/flow/commit/a6c240e7e192f68e55c02442f42e2eef213676c6", "message": "Removing deprecated parameter from DataNode constructor (#8325)\n\nIf you use container (such as the latest Wilfdly) which forces to use significantly newer version of Jsoup than Vaadin depends to, this can cause a problem as deprecated method as been removed.", "committedDate": "2020-06-01T08:41:15Z", "type": "commit"}, {"oid": "34d1cd243185fbe826feb78ac997476b58f9aa0e", "url": "https://github.com/vaadin/flow/commit/34d1cd243185fbe826feb78ac997476b58f9aa0e", "message": "Fix Javadoc typo in NavigationTargetFilter (#8467)", "committedDate": "2020-06-01T09:15:05Z", "type": "commit"}, {"oid": "2c699d638b24567c25a9d43cd06a73aa2d12a2ff", "url": "https://github.com/vaadin/flow/commit/2c699d638b24567c25a9d43cd06a73aa2d12a2ff", "message": "Close UI after refreshing the page in PreserveOnRefresh case and mark it\n(#8365)\n\nFixes #8286\n\n\n# Conflicts:\n#\tflow-server/src/main/java/com/vaadin/flow/router/internal/AbstractNavigationStateRenderer.java\n\n# Conflicts:\n#\tflow-server/src/main/java/com/vaadin/flow/router/internal/AbstractNavigationStateRenderer.java", "committedDate": "2020-06-02T05:05:45Z", "type": "commit"}, {"oid": "9a17d515a4912c20806a7dba26cb3d73b0af7383", "url": "https://github.com/vaadin/flow/commit/9a17d515a4912c20806a7dba26cb3d73b0af7383", "message": "Close client app on change location (#8334)\n\nFixes #8177\n# Conflicts:\n#\tflow-server/src/main/java/com/vaadin/flow/component/page/Page.java\n#\tflow-server/src/test/java/com/vaadin/flow/component/page/PageTest.java\n\n# Conflicts:\n#\tflow-client/src/main/java/com/vaadin/client/flow/ExecuteJavaScriptProcessor.java", "committedDate": "2020-06-02T05:08:15Z", "type": "commit"}, {"oid": "6615300e27573a25f67e62274bb4a73d32d94991", "url": "https://github.com/vaadin/flow/commit/6615300e27573a25f67e62274bb4a73d32d94991", "message": "Listen detach events on \"listenOn\" components in shortcut registration (#8391)\n\nFixes #8247", "committedDate": "2020-06-02T05:08:39Z", "type": "commit"}, {"oid": "2eee4163dd73645cd51a5e7fbb6b588eb37f19e6", "url": "https://github.com/vaadin/flow/commit/2eee4163dd73645cd51a5e7fbb6b588eb37f19e6", "message": "Don't override initial value of hidden HTML Element attribute. (#8419)\n\nFixes #8100", "committedDate": "2020-06-02T05:08:46Z", "type": "commit"}, {"oid": "285982df059f79836e1e275dc0d740631ce8cc3d", "url": "https://github.com/vaadin/flow/commit/285982df059f79836e1e275dc0d740631ce8cc3d", "message": "Adapt test code to 2.x branch", "committedDate": "2020-06-02T05:24:13Z", "type": "commit"}, {"oid": "b5cbd31bac06586ce5e853e46602e852dd5c894b", "url": "https://github.com/vaadin/flow/commit/b5cbd31bac06586ce5e853e46602e852dd5c894b", "message": "Update ExecuteJavaScriptProcessor.java", "committedDate": "2020-06-02T06:01:58Z", "type": "commit"}, {"oid": "0f4ca66466607850c713c7d43cd1f07bb5f50609", "url": "https://github.com/vaadin/flow/commit/0f4ca66466607850c713c7d43cd1f07bb5f50609", "message": "Adapt gwt push connection test for 2.x branch.", "committedDate": "2020-06-02T06:19:48Z", "type": "commit"}, {"oid": "67bff8ddbb0d1923faf330256668f2841e1cdef1", "url": "https://github.com/vaadin/flow/commit/67bff8ddbb0d1923faf330256668f2841e1cdef1", "message": "Merge branch 'cp/2.2' of git@github.com:vaadin/flow.git into cp/2.2", "committedDate": "2020-06-02T07:35:37Z", "type": "commit"}, {"oid": "2b27c882328e56efc6568e06767b93192f793d4b", "url": "https://github.com/vaadin/flow/commit/2b27c882328e56efc6568e06767b93192f793d4b", "message": "Quiet down logs for deployment (#8471)\n\nRemoves highlighting blocks, extra whitespace and changes output block\nabout application start up to a oneliner.\n\nFixes #8404, 8395\nRelated to #8104", "committedDate": "2020-06-02T09:56:59Z", "type": "commit"}, {"oid": "8c8f05c6d43844998ea484775aec64de19c32ee9", "url": "https://github.com/vaadin/flow/commit/8c8f05c6d43844998ea484775aec64de19c32ee9", "message": "Fix issues after cherry-pick", "committedDate": "2020-06-03T09:26:46Z", "type": "commit"}, {"oid": "8c8f05c6d43844998ea484775aec64de19c32ee9", "url": "https://github.com/vaadin/flow/commit/8c8f05c6d43844998ea484775aec64de19c32ee9", "message": "Fix issues after cherry-pick", "committedDate": "2020-06-03T09:26:46Z", "type": "forcePushed"}, {"oid": "2d1c615cd853e9eb9085edd00352b9b328ef2574", "url": "https://github.com/vaadin/flow/commit/2d1c615cd853e9eb9085edd00352b9b328ef2574", "message": "1000th fix after cherry-pick", "committedDate": "2020-06-03T10:21:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ4MzczMw==", "url": "https://github.com/vaadin/flow/pull/8458#discussion_r434483733", "bodyText": "Merge this if statement with the enclosing one.", "author": "vaadin-bot", "createdAt": "2020-06-03T11:00:13Z", "path": "flow-server/src/main/java/com/vaadin/flow/server/DefaultDeploymentConfiguration.java", "diffHunk": "@@ -146,18 +143,13 @@ private void logMessages() {\n         Logger logger = LoggerFactory.getLogger(getClass().getName());\n \n         if (!warnings.isEmpty()) {\n-            warnings.add(0, HEADER);\n-            warnings.add(1, DEPLOYMENT_WARNINGS);\n-            warnings.add(\"\\n\");\n+            warnings.add(0, DEPLOYMENT_WARNINGS);\n             // merging info messages to warnings for now\n             warnings.addAll(info);\n-            warnings.add(SEPARATOR);\n             if (logger.isWarnEnabled()) {\n                 logger.warn(String.join(\"\\n\", warnings));\n             }\n         } else if (!info.isEmpty()) {\n-            info.add(0, HEADER);\n-            info.add(SEPARATOR);\n             if (logger.isInfoEnabled()) {", "originalCommit": "2d1c615cd853e9eb9085edd00352b9b328ef2574", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ4Mzc0Mg==", "url": "https://github.com/vaadin/flow/pull/8458#discussion_r434483742", "bodyText": "Add a private constructor to hide the implicit public one.", "author": "vaadin-bot", "createdAt": "2020-06-03T11:00:14Z", "path": "flow-server/src/main/java/com/vaadin/flow/internal/nodefeature/ElementListenerMapUtil.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.internal.nodefeature;\n+\n+import java.util.Set;\n+\n+public class ElementListenerMapUtil {", "originalCommit": "2d1c615cd853e9eb9085edd00352b9b328ef2574", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ4Mzc0OQ==", "url": "https://github.com/vaadin/flow/pull/8458#discussion_r434483749", "bodyText": "Remove this use of \"SUPPORTED_PNPM_MAJOR_VERSION\"; it is deprecated.", "author": "vaadin-bot", "createdAt": "2020-06-03T11:00:15Z", "path": "flow-server/src/main/java/com/vaadin/flow/server/frontend/FrontendTools.java", "diffHunk": "@@ -113,6 +113,10 @@\n     public static final int SUPPORTED_PNPM_MAJOR_VERSION = Constants.SUPPORTED_PNPM_MAJOR_VERSION;", "originalCommit": "2d1c615cd853e9eb9085edd00352b9b328ef2574", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ4Mzc1NQ==", "url": "https://github.com/vaadin/flow/pull/8458#discussion_r434483755", "bodyText": "Remove this use of \"SUPPORTED_PNPM_MINOR_VERSION\"; it is deprecated.", "author": "vaadin-bot", "createdAt": "2020-06-03T11:00:16Z", "path": "flow-server/src/main/java/com/vaadin/flow/server/frontend/FrontendTools.java", "diffHunk": "@@ -113,6 +113,10 @@\n     public static final int SUPPORTED_PNPM_MAJOR_VERSION = Constants.SUPPORTED_PNPM_MAJOR_VERSION;\n     public static final int SUPPORTED_PNPM_MINOR_VERSION = Constants.SUPPORTED_PNPM_MINOR_VERSION;", "originalCommit": "2d1c615cd853e9eb9085edd00352b9b328ef2574", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ4Mzc3Mg==", "url": "https://github.com/vaadin/flow/pull/8458#discussion_r434483772", "bodyText": "Reduce this lambda expression number of lines from 21 to at most 20.", "author": "vaadin-bot", "createdAt": "2020-06-03T11:00:17Z", "path": "flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java", "diffHunk": "@@ -70,17 +71,40 @@\n \n     private ShortcutEventListener eventListener;\n \n+    private List<Registration> registrations = new ArrayList<>();\n+\n     // beforeClientResponse callback\n     private final SerializableConsumer<ExecutionContext> beforeClientResponseConsumer = executionContext -> {", "originalCommit": "2d1c615cd853e9eb9085edd00352b9b328ef2574", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}