{"pr_number": 4736, "pr_title": "Timelock consensus", "pr_createdAt": "2020-04-27T14:19:04Z", "pr_url": "https://github.com/palantir/atlasdb/pull/4736", "timeline": [{"oid": "e5355a5f9afc9c95a1d4f86d234720da4a00899d", "url": "https://github.com/palantir/atlasdb/commit/e5355a5f9afc9c95a1d4f86d234720da4a00899d", "message": "Resource and loader", "committedDate": "2020-04-27T17:30:56Z", "type": "commit"}, {"oid": "55e3efad37c51896a9257a99b5cb3f6e31e69f53", "url": "https://github.com/palantir/atlasdb/commit/55e3efad37c51896a9257a99b5cb3f6e31e69f53", "message": "Wiring creation", "committedDate": "2020-04-27T17:33:32Z", "type": "commit"}, {"oid": "d03a308ffa73f69b8b6a6cca653852965a89c899", "url": "https://github.com/palantir/atlasdb/commit/d03a308ffa73f69b8b6a6cca653852965a89c899", "message": "Null check", "committedDate": "2020-04-27T17:34:13Z", "type": "commit"}, {"oid": "32933a109ab81f042aab2afcfc2108a62598300f", "url": "https://github.com/palantir/atlasdb/commit/32933a109ab81f042aab2afcfc2108a62598300f", "message": "Address comments - I", "committedDate": "2020-04-27T17:37:02Z", "type": "commit"}, {"oid": "555873c78958717d1808dcf84d66e300e0e83f26", "url": "https://github.com/palantir/atlasdb/commit/555873c78958717d1808dcf84d66e300e0e83f26", "message": "cosensus - 1", "committedDate": "2020-04-27T17:37:02Z", "type": "commit"}, {"oid": "1f0301557356468cfb353f377abdb153be293daf", "url": "https://github.com/palantir/atlasdb/commit/1f0301557356468cfb353f377abdb153be293daf", "message": "Validating advancement in sequence numbers for Paxos", "committedDate": "2020-04-27T17:37:02Z", "type": "commit"}, {"oid": "9fe45001d9aa4eeaaf5de232d3637965c306c9c4", "url": "https://github.com/palantir/atlasdb/commit/9fe45001d9aa4eeaaf5de232d3637965c306c9c4", "message": "Revert \"Validating advancement in sequence numbers for Paxos\"\n\nThis reverts commit c87e24869a6c52bcdc05f1b82f43db3b835bff00.", "committedDate": "2020-04-27T17:37:02Z", "type": "commit"}, {"oid": "74d284073788e15fff686a004ed02d81dfee27a2", "url": "https://github.com/palantir/atlasdb/commit/74d284073788e15fff686a004ed02d81dfee27a2", "message": "Refactor", "committedDate": "2020-04-27T17:37:02Z", "type": "commit"}, {"oid": "be7bfd910bb71d8be38d5ca41b07c0339e4e26ea", "url": "https://github.com/palantir/atlasdb/commit/be7bfd910bb71d8be38d5ca41b07c0339e4e26ea", "message": "handle exception", "committedDate": "2020-04-27T17:37:02Z", "type": "commit"}, {"oid": "cb06ab6442cee6c53a30a0660440e1fbf288093c", "url": "https://github.com/palantir/atlasdb/commit/cb06ab6442cee6c53a30a0660440e1fbf288093c", "message": "Fix", "committedDate": "2020-04-27T18:04:59Z", "type": "commit"}, {"oid": "cb06ab6442cee6c53a30a0660440e1fbf288093c", "url": "https://github.com/palantir/atlasdb/commit/cb06ab6442cee6c53a30a0660440e1fbf288093c", "message": "Fix", "committedDate": "2020-04-27T18:04:59Z", "type": "forcePushed"}, {"oid": "d5cc1bc90d5a29f3d1d79f76f48d87a8f4eff849", "url": "https://github.com/palantir/atlasdb/commit/d5cc1bc90d5a29f3d1d79f76f48d87a8f4eff849", "message": "Javadoc - 1", "committedDate": "2020-04-27T19:22:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ2MjExMQ==", "url": "https://github.com/palantir/atlasdb/pull/4736#discussion_r416462111", "bodyText": "nit: is there a need to explicitly box timestamp?", "author": "jeremyk-91", "createdAt": "2020-04-28T09:20:05Z", "path": "timelock-impl/src/main/java/com/palantir/atlasdb/timelock/management/NamespacedConsensus.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.atlasdb.timelock.management;\n+\n+import com.palantir.atlasdb.timelock.TimeLockServices;\n+import com.palantir.atlasdb.timelock.TimelockNamespaces;\n+import com.palantir.timestamp.TimestampService;\n+\n+public class NamespacedConsensus {\n+    /**\n+     * Gets a fresh timestamp for namespace from {@link TimestampService#getFreshTimestamp()} and fast forwards\n+     * the timestamp by 1 million for the given namespace.\n+     *\n+     * @param namespace namespace for which consensus has to be achieved\n+     */\n+    public static void achieveConsensusForNamespace(TimelockNamespaces timelockNamespaces,\n+            String namespace) {\n+        TimeLockServices timeLockServices = timelockNamespaces.get(namespace);\n+        Long timestamp = timeLockServices.getTimelockService().getFreshTimestamp() + 1000000L;", "originalCommit": "d5cc1bc90d5a29f3d1d79f76f48d87a8f4eff849", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8bd15568cf53dbff267462b057036387848e1079", "url": "https://github.com/palantir/atlasdb/commit/8bd15568cf53dbff267462b057036387848e1079", "message": "Address comments", "committedDate": "2020-04-28T10:21:38Z", "type": "commit"}, {"oid": "b07830a26e42b0f0f3eb348f9f87c4a26d2c55fa", "url": "https://github.com/palantir/atlasdb/commit/b07830a26e42b0f0f3eb348f9f87c4a26d2c55fa", "message": "Checkstyle | Address comments\n\nCo-Authored-By: Jeremy Kong <jeremykong@hotmail.com>", "committedDate": "2020-04-28T10:23:21Z", "type": "commit"}]}