{"pr_number": 4866, "pr_title": "Adjust AssertUtils to be safelogging compatible", "pr_createdAt": "2020-06-24T20:34:34Z", "pr_url": "https://github.com/palantir/atlasdb/pull/4866", "timeline": [{"oid": "628775eabb55ed907d0b9efc8d25dbd65fa76f96", "url": "https://github.com/palantir/atlasdb/commit/628775eabb55ed907d0b9efc8d25dbd65fa76f96", "message": "Adjust AssertUtils to be safelogging compatible\n\nFormat string and args will be passed to slf4j directly,\ninstead of doing our own manual formatting.", "committedDate": "2020-06-24T20:30:10Z", "type": "commit"}, {"oid": "d2fedcb89e627931eeb359557704d85ac4d94d27", "url": "https://github.com/palantir/atlasdb/commit/d2fedcb89e627931eeb359557704d85ac4d94d27", "message": "Add generated changelog entries", "committedDate": "2020-06-24T20:30:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE2OTYwOQ==", "url": "https://github.com/palantir/atlasdb/pull/4866#discussion_r445169609", "bodyText": "Have you verified this works as expected? I think the throwable needs to be the last parameter.", "author": "carterkozak", "createdAt": "2020-06-24T21:01:37Z", "path": "atlasdb-commons/src/main/java/com/palantir/util/AssertUtils.java", "diffHunk": "@@ -119,7 +120,11 @@ public static void assertAndLogWithException(boolean cheapTest, String msg, Thro\n     public static void assertAndLogWithException(Logger log, boolean cheapTest, String format, Throwable t,\n             Object... args) {\n         if (!cheapTest) {\n-            assertAndLogWithException(log, false, String.format(format, args), t);\n+            Object[] newArgs = new Object[args.length + 1];\n+            newArgs[0] = t;", "originalCommit": "d2fedcb89e627931eeb359557704d85ac4d94d27", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "000ff63652c5308bf83a7c670a8012c17d90b8d5", "url": "https://github.com/palantir/atlasdb/commit/000ff63652c5308bf83a7c670a8012c17d90b8d5", "message": "Fixup order of arguments", "committedDate": "2020-06-24T22:26:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzEwNDM1MA==", "url": "https://github.com/palantir/atlasdb/pull/4866#discussion_r447104350", "bodyText": "Unfortunately this generally isn't allowed in gradle-baseline. I'm not sure what a good solution here is: separately doing a string substitution, maybe?", "author": "jeremyk-91", "createdAt": "2020-06-29T16:36:36Z", "path": "atlasdb-commons/src/main/java/com/palantir/util/AssertUtils.java", "diffHunk": "@@ -119,7 +121,10 @@ public static void assertAndLogWithException(boolean cheapTest, String msg, Thro\n     public static void assertAndLogWithException(Logger log, boolean cheapTest, String format, Throwable t,\n             Object... args) {\n         if (!cheapTest) {\n-            assertAndLogWithException(log, false, String.format(format, args), t);\n+            Object[] newArgs = Arrays.copyOf(args, args.length + 1);\n+            newArgs[args.length] = t;\n+            log.error(\"Assertion \" + format + \" with exception \", newArgs);", "originalCommit": "000ff63652c5308bf83a7c670a8012c17d90b8d5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6be83733c6bf3947ac4106f76f0d63ffcafe1b23", "url": "https://github.com/palantir/atlasdb/commit/6be83733c6bf3947ac4106f76f0d63ffcafe1b23", "message": "Merge remote-tracking branch 'refs/remotes/origin/develop' into develop", "committedDate": "2020-07-02T17:02:48Z", "type": "commit"}, {"oid": "1c576f66dec39e82aac9e699515b37b3010fca03", "url": "https://github.com/palantir/atlasdb/commit/1c576f66dec39e82aac9e699515b37b3010fca03", "message": "Address gradle-baseline issues", "committedDate": "2020-07-02T17:10:12Z", "type": "commit"}, {"oid": "b015c56bfe684e7ba1da8c7002a04ef869140182", "url": "https://github.com/palantir/atlasdb/commit/b015c56bfe684e7ba1da8c7002a04ef869140182", "message": "Fix PostgresVersionCheckTest", "committedDate": "2020-07-02T19:00:41Z", "type": "commit"}, {"oid": "b842575b851e36b341c96168be4f5823253d74e8", "url": "https://github.com/palantir/atlasdb/commit/b842575b851e36b341c96168be4f5823253d74e8", "message": "Actually fix it", "committedDate": "2020-07-02T21:13:57Z", "type": "commit"}, {"oid": "cd0d3fb560cebae7d89d9ee9ab81ad27c4b727de", "url": "https://github.com/palantir/atlasdb/commit/cd0d3fb560cebae7d89d9ee9ab81ad27c4b727de", "message": "organize imports", "committedDate": "2020-07-02T21:15:00Z", "type": "commit"}]}