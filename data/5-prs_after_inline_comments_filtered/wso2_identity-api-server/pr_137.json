{"pr_number": 137, "pr_title": "Add tenant management rest API", "pr_createdAt": "2020-04-08T03:36:28Z", "pr_url": "https://github.com/wso2/identity-api-server/pull/137", "timeline": [{"oid": "a5dfc200dc185939c8c7ce1076d5693f0056ba9e", "url": "https://github.com/wso2/identity-api-server/commit/a5dfc200dc185939c8c7ce1076d5693f0056ba9e", "message": "Add tenant management rest API", "committedDate": "2020-04-08T03:34:36Z", "type": "commit"}, {"oid": "cd2b7db14257954d4ad9c396c27ffabea027fdc1", "url": "https://github.com/wso2/identity-api-server/commit/cd2b7db14257954d4ad9c396c27ffabea027fdc1", "message": "Fix osgi service issue", "committedDate": "2020-04-08T10:27:37Z", "type": "commit"}, {"oid": "9f3dbcc2f9aa7618d57f07c9ed50e94a26af174a", "url": "https://github.com/wso2/identity-api-server/commit/9f3dbcc2f9aa7618d57f07c9ed50e94a26af174a", "message": "Add dependencies to the pom file", "committedDate": "2020-04-08T10:33:53Z", "type": "commit"}, {"oid": "d3f4107f5168fde6eafb412cd9b4b79d1df2ed01", "url": "https://github.com/wso2/identity-api-server/commit/d3f4107f5168fde6eafb412cd9b4b79d1df2ed01", "message": "Resolve conflicts", "committedDate": "2020-04-08T10:52:24Z", "type": "commit"}, {"oid": "116570c089e07ee80e5dfad85d9f7b299bf07254", "url": "https://github.com/wso2/identity-api-server/commit/116570c089e07ee80e5dfad85d9f7b299bf07254", "message": "Fix NPE", "committedDate": "2020-04-09T08:38:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYyMTU0Nw==", "url": "https://github.com/wso2/identity-api-server/pull/137#discussion_r406621547", "bodyText": "license missing", "author": "IsuraD", "createdAt": "2020-04-10T06:25:47Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.common/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/common/TenantManagementConstants.java", "diffHunk": "@@ -0,0 +1,77 @@\n+package org.wso2.carbon.identity.api.server.tenant.management.common;", "originalCommit": "116570c089e07ee80e5dfad85d9f7b299bf07254", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYyMTYyMw==", "url": "https://github.com/wso2/identity-api-server/pull/137#discussion_r406621623", "bodyText": "license missing", "author": "IsuraD", "createdAt": "2020-04-10T06:26:07Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.common/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/common/TenantManagementServiceHolder.java", "diffHunk": "@@ -0,0 +1,31 @@\n+package org.wso2.carbon.identity.api.server.tenant.management.common;", "originalCommit": "116570c089e07ee80e5dfad85d9f7b299bf07254", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYyMTY1NQ==", "url": "https://github.com/wso2/identity-api-server/pull/137#discussion_r406621655", "bodyText": "license missing", "author": "IsuraD", "createdAt": "2020-04-10T06:26:16Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.common/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/common/factory/TenantMgtOSGIServiceFactory.java", "diffHunk": "@@ -0,0 +1,37 @@\n+package org.wso2.carbon.identity.api.server.tenant.management.common.factory;", "originalCommit": "116570c089e07ee80e5dfad85d9f7b299bf07254", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYyMTg3NQ==", "url": "https://github.com/wso2/identity-api-server/pull/137#discussion_r406621875", "bodyText": "2020", "author": "IsuraD", "createdAt": "2020-04-10T06:27:11Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/gen/java/org/wso2/carbon/identity/api/server/tenant/management/v1/TenantsApi.java", "diffHunk": "@@ -0,0 +1,167 @@\n+/*\n+* Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "originalCommit": "116570c089e07ee80e5dfad85d9f7b299bf07254", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYyMTkzMQ==", "url": "https://github.com/wso2/identity-api-server/pull/137#discussion_r406621931", "bodyText": "2020", "author": "IsuraD", "createdAt": "2020-04-10T06:27:26Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/gen/java/org/wso2/carbon/identity/api/server/tenant/management/v1/TenantsApiService.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+* Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "originalCommit": "116570c089e07ee80e5dfad85d9f7b299bf07254", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYyMTk2NQ==", "url": "https://github.com/wso2/identity-api-server/pull/137#discussion_r406621965", "bodyText": "2020", "author": "IsuraD", "createdAt": "2020-04-10T06:27:33Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/gen/java/org/wso2/carbon/identity/api/server/tenant/management/v1/factories/TenantsApiServiceFactory.java", "diffHunk": "@@ -0,0 +1,30 @@\n+/*\n+* Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "originalCommit": "116570c089e07ee80e5dfad85d9f7b299bf07254", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYyMjI5Mw==", "url": "https://github.com/wso2/identity-api-server/pull/137#discussion_r406622293", "bodyText": "can mvoe to inside try", "author": "IsuraD", "createdAt": "2020-04-10T06:28:40Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/v1/core/ServerTenantManagementService.java", "diffHunk": "@@ -0,0 +1,410 @@\n+package org.wso2.carbon.identity.api.server.tenant.management.v1.core;\n+\n+import org.apache.commons.collections.CollectionUtils;\n+import org.apache.commons.lang.StringUtils;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.wso2.carbon.identity.api.server.common.ContextLoader;\n+import org.wso2.carbon.identity.api.server.common.error.APIError;\n+import org.wso2.carbon.identity.api.server.common.error.ErrorResponse;\n+import org.wso2.carbon.identity.api.server.tenant.management.common.TenantManagementConstants;\n+import org.wso2.carbon.identity.api.server.tenant.management.common.TenantManagementServiceHolder;\n+import org.wso2.carbon.identity.api.server.tenant.management.v1.model.AdditionalClaims;\n+import org.wso2.carbon.identity.api.server.tenant.management.v1.model.Link;\n+import org.wso2.carbon.identity.api.server.tenant.management.v1.model.OwnerResponse;\n+import org.wso2.carbon.identity.api.server.tenant.management.v1.model.TenantListItem;\n+import org.wso2.carbon.identity.api.server.tenant.management.v1.model.TenantModel;\n+import org.wso2.carbon.identity.api.server.tenant.management.v1.model.TenantPutModel;\n+import org.wso2.carbon.identity.api.server.tenant.management.v1.model.TenantResponseModel;\n+import org.wso2.carbon.identity.api.server.tenant.management.v1.model.TenantsListResponse;\n+import org.wso2.carbon.stratos.common.constants.TenantConstants;\n+import org.wso2.carbon.stratos.common.exception.TenantManagementClientException;\n+import org.wso2.carbon.stratos.common.exception.TenantManagementServerException;\n+import org.wso2.carbon.stratos.common.exception.TenantMgtException;\n+import org.wso2.carbon.tenant.mgt.services.TenantMgtService;\n+import org.wso2.carbon.user.core.common.User;\n+import org.wso2.carbon.user.core.tenant.Tenant;\n+import org.wso2.carbon.user.core.tenant.TenantSearchResult;\n+\n+import java.io.UnsupportedEncodingException;\n+import java.net.URLEncoder;\n+import java.nio.charset.StandardCharsets;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import javax.ws.rs.core.Response;\n+\n+import static org.wso2.carbon.identity.api.server.common.Constants.V1_API_PATH_COMPONENT;\n+import static org.wso2.carbon.identity.api.server.tenant.management.common.TenantManagementConstants.TENANT_MANAGEMENT_PATH_COMPONENT;\n+\n+/**\n+ * Call internal osgi services to perform server tenant management related operations.\n+ */\n+public class ServerTenantManagementService {\n+\n+    private static final Log log = LogFactory.getLog(ServerTenantManagementService.class);\n+\n+    /**\n+     * Add a tenant.\n+     *\n+     * @param tenantModel tenantModel.\n+     * @return TenantResponseModel.\n+     */\n+    public String addTenant(TenantModel tenantModel) {\n+\n+        Tenant tenant;", "originalCommit": "116570c089e07ee80e5dfad85d9f7b299bf07254", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "808fafba6aa19e5690fbe729d7b2d7be8dd1655b", "url": "https://github.com/wso2/identity-api-server/commit/808fafba6aa19e5690fbe729d7b2d7be8dd1655b", "message": "Add license headers and fix comments", "committedDate": "2020-04-10T12:28:40Z", "type": "forcePushed"}, {"oid": "a4e54f654bd3e921841a0b486ca97f8a06d13d63", "url": "https://github.com/wso2/identity-api-server/commit/a4e54f654bd3e921841a0b486ca97f8a06d13d63", "message": "Add license headers and fix comments", "committedDate": "2020-04-10T12:43:16Z", "type": "commit"}, {"oid": "a4e54f654bd3e921841a0b486ca97f8a06d13d63", "url": "https://github.com/wso2/identity-api-server/commit/a4e54f654bd3e921841a0b486ca97f8a06d13d63", "message": "Add license headers and fix comments", "committedDate": "2020-04-10T12:43:16Z", "type": "forcePushed"}, {"oid": "7025b4d4b3e578f17e04005a30aa012e5d74373c", "url": "https://github.com/wso2/identity-api-server/commit/7025b4d4b3e578f17e04005a30aa012e5d74373c", "message": "Resolve conflicts", "committedDate": "2020-04-10T14:05:49Z", "type": "commit"}, {"oid": "8f83ebd697908fb840801889540d2295afc11257", "url": "https://github.com/wso2/identity-api-server/commit/8f83ebd697908fb840801889540d2295afc11257", "message": "Update pom", "committedDate": "2020-04-10T18:40:10Z", "type": "commit"}, {"oid": "8f83ebd697908fb840801889540d2295afc11257", "url": "https://github.com/wso2/identity-api-server/commit/8f83ebd697908fb840801889540d2295afc11257", "message": "Update pom", "committedDate": "2020-04-10T18:40:10Z", "type": "forcePushed"}]}