{"pr_number": 170, "pr_title": "Modify the application filter validation logic", "pr_createdAt": "2020-06-04T07:26:11Z", "pr_url": "https://github.com/wso2/identity-api-server/pull/170", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA1NTY1Mw==", "url": "https://github.com/wso2/identity-api-server/pull/170#discussion_r435055653", "bodyText": "can move these two inside the try.", "author": "thanujalk", "createdAt": "2020-06-04T07:44:20Z", "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/ServerApplicationManagementService.java", "diffHunk": "@@ -845,20 +849,28 @@ private ServiceProvider getServiceProvider(String applicationId) {\n \n     private String buildFilter(String filter) {\n \n+        ExpressionNode expressionNode;\n+        FilterTreeBuilder filterTreeBuilder;", "originalCommit": "7bf3ce799fbb137bf285001e061186e0456c0644", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA1NjE1NA==", "url": "https://github.com/wso2/identity-api-server/pull/170#discussion_r435056154", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            filterTreeBuilder = new FilterTreeBuilder(filter);\n          \n          \n            \n                           FilterTreeBuilder filterTreeBuilder = new FilterTreeBuilder(filter);", "author": "thanujalk", "createdAt": "2020-06-04T07:45:15Z", "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/ServerApplicationManagementService.java", "diffHunk": "@@ -845,20 +849,28 @@ private ServiceProvider getServiceProvider(String applicationId) {\n \n     private String buildFilter(String filter) {\n \n+        ExpressionNode expressionNode;\n+        FilterTreeBuilder filterTreeBuilder;\n         if (StringUtils.isNotBlank(filter)) {\n-            String[] filterArgs = filter.split(\"\\\\s+\");\n-            if (filterArgs.length == 3) {\n-                String searchField = filterArgs[0];\n-                if (SEARCH_SUPPORTED_FIELDS.contains(searchField)) {\n-                    String searchOperation = filterArgs[1];\n-                    String searchValue = filterArgs[2];\n-                    return generateFilterStringForBackend(searchField, searchOperation, searchValue);\n+            try {\n+                filterTreeBuilder = new FilterTreeBuilder(filter);", "originalCommit": "7bf3ce799fbb137bf285001e061186e0456c0644", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA1NjM3NA==", "url": "https://github.com/wso2/identity-api-server/pull/170#discussion_r435056374", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                expressionNode = (ExpressionNode) rootNode;\n          \n          \n            \n                                ExpressionNode expressionNode = (ExpressionNode) rootNode;", "author": "thanujalk", "createdAt": "2020-06-04T07:45:40Z", "path": "components/org.wso2.carbon.identity.api.server.application.management/org.wso2.carbon.identity.api.server.application.management.v1/src/main/java/org/wso2/carbon/identity/api/server/application/management/v1/core/ServerApplicationManagementService.java", "diffHunk": "@@ -845,20 +849,28 @@ private ServiceProvider getServiceProvider(String applicationId) {\n \n     private String buildFilter(String filter) {\n \n+        ExpressionNode expressionNode;\n+        FilterTreeBuilder filterTreeBuilder;\n         if (StringUtils.isNotBlank(filter)) {\n-            String[] filterArgs = filter.split(\"\\\\s+\");\n-            if (filterArgs.length == 3) {\n-                String searchField = filterArgs[0];\n-                if (SEARCH_SUPPORTED_FIELDS.contains(searchField)) {\n-                    String searchOperation = filterArgs[1];\n-                    String searchValue = filterArgs[2];\n-                    return generateFilterStringForBackend(searchField, searchOperation, searchValue);\n+            try {\n+                filterTreeBuilder = new FilterTreeBuilder(filter);\n+                Node rootNode = filterTreeBuilder.buildTree();\n+                if (rootNode instanceof ExpressionNode) {\n+                    expressionNode = (ExpressionNode) rootNode;", "originalCommit": "7bf3ce799fbb137bf285001e061186e0456c0644", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9b930bcca1f4a14c2e5ad5660e802dab67306cdc", "url": "https://github.com/wso2/identity-api-server/commit/9b930bcca1f4a14c2e5ad5660e802dab67306cdc", "message": "Modify the application filter validation logic", "committedDate": "2020-06-04T07:52:27Z", "type": "commit"}, {"oid": "9b930bcca1f4a14c2e5ad5660e802dab67306cdc", "url": "https://github.com/wso2/identity-api-server/commit/9b930bcca1f4a14c2e5ad5660e802dab67306cdc", "message": "Modify the application filter validation logic", "committedDate": "2020-06-04T07:52:27Z", "type": "forcePushed"}]}