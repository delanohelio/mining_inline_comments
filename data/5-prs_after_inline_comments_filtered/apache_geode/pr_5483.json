{"pr_number": 5483, "pr_title": "GEODE-8462: Make geode server startup fail if geode redis server has a port conflict", "pr_createdAt": "2020-08-27T20:25:06Z", "pr_url": "https://github.com/apache/geode/pull/5483", "timeline": [{"oid": "3699644d23ff1c6e319f47c4ad65de8c61ac47c7", "url": "https://github.com/apache/geode/commit/3699644d23ff1c6e319f47c4ad65de8c61ac47c7", "message": "GEODE-8462: Make geode server startup fail if geode redis server has port conflict", "committedDate": "2020-08-28T15:28:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI0NzMxMw==", "url": "https://github.com/apache/geode/pull/5483#discussion_r480247313", "bodyText": "Was this non-daemon thread still hanging around and that caused problems? It might be okay for this to be daemon threads (that allows the JVM to exit without shutting down the redis server) but we should probably still do some cleanup of these groups before we throw the ManagementException. We should try calling the \"stop\" method before throwing the ManagementException", "author": "dschneider-pivotal", "createdAt": "2020-08-31T16:32:33Z", "path": "geode-redis/src/main/java/org/apache/geode/redis/internal/netty/NettyRedisServer.java", "diffHunk": "@@ -99,7 +99,7 @@ public NettyRedisServer(Supplier<DistributionConfig> configSupplier,\n       throw new IllegalArgumentException(\"Redis port cannot be less than 0\");\n     }\n     this.bindAddress = getBindAddress(requestedAddress);\n-    selectorGroup = createEventLoopGroup(\"Selector\", false, 1);\n+    selectorGroup = createEventLoopGroup(\"Selector\", true, 1);", "originalCommit": "3699644d23ff1c6e319f47c4ad65de8c61ac47c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM0NzY0MQ==", "url": "https://github.com/apache/geode/pull/5483#discussion_r480347641", "bodyText": "Good call, Darrel! Just updated it.  We decided to leave the selectorGroup as a daemon thread.", "author": "sabbey37", "createdAt": "2020-08-31T19:26:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI0NzMxMw=="}], "type": "inlineReview"}, {"oid": "4ba8f3c66fb89a9c9c8c4cdc8f8768985307c3d8", "url": "https://github.com/apache/geode/commit/4ba8f3c66fb89a9c9c8c4cdc8f8768985307c3d8", "message": "GEODE-8462: Make geode server startup fail if geode redis server has port conflict", "committedDate": "2020-09-02T20:29:46Z", "type": "commit"}, {"oid": "6bebff861142e587e85a2e6e47dae6c87f355413", "url": "https://github.com/apache/geode/commit/6bebff861142e587e85a2e6e47dae6c87f355413", "message": "Switch to supported method after rebase", "committedDate": "2020-09-02T20:41:53Z", "type": "commit"}, {"oid": "6bebff861142e587e85a2e6e47dae6c87f355413", "url": "https://github.com/apache/geode/commit/6bebff861142e587e85a2e6e47dae6c87f355413", "message": "Switch to supported method after rebase", "committedDate": "2020-09-02T20:41:53Z", "type": "forcePushed"}]}