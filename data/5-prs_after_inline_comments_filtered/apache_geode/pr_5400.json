{"pr_number": 5400, "pr_title": "GEODE-7864: Fix several LGTM warnings", "pr_createdAt": "2020-07-24T23:12:28Z", "pr_url": "https://github.com/apache/geode/pull/5400", "timeline": [{"oid": "82c87573e139d5860f97cd1c85dbccc7ddb90e30", "url": "https://github.com/apache/geode/commit/82c87573e139d5860f97cd1c85dbccc7ddb90e30", "message": "GEODE-7864: Fix several LGTM warnings\n\n- This commit addresses warnings with the language-features, logic,\nuseless-code, readability and security tags on LGTM\n- The change to CompactRangeIndex may be fixing a bug/incorrectness in\nthe code\n\nAuthored-by: Donal Evans <doevans@vmware.com>", "committedDate": "2020-07-25T18:54:21Z", "type": "forcePushed"}, {"oid": "c32020eb8f49ad26aebbf88706793f70b49dbacc", "url": "https://github.com/apache/geode/commit/c32020eb8f49ad26aebbf88706793f70b49dbacc", "message": "GEODE-7864: Fix several LGTM warnings\n\n- This commit addresses warnings with the language-features, logic,\nuseless-code, readability and security tags on LGTM\n- The change to CompactRangeIndex may be fixing a bug/incorrectness in\nthe code\n\nAuthored-by: Donal Evans <doevans@vmware.com>", "committedDate": "2020-07-25T21:41:05Z", "type": "commit"}, {"oid": "c32020eb8f49ad26aebbf88706793f70b49dbacc", "url": "https://github.com/apache/geode/commit/c32020eb8f49ad26aebbf88706793f70b49dbacc", "message": "GEODE-7864: Fix several LGTM warnings\n\n- This commit addresses warnings with the language-features, logic,\nuseless-code, readability and security tags on LGTM\n- The change to CompactRangeIndex may be fixing a bug/incorrectness in\nthe code\n\nAuthored-by: Donal Evans <doevans@vmware.com>", "committedDate": "2020-07-25T21:41:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg5NTA0OA==", "url": "https://github.com/apache/geode/pull/5400#discussion_r461895048", "bodyText": "This seems like a behavior change, sorry if i am missing something.", "author": "nabarunnag", "createdAt": "2020-07-28T21:38:24Z", "path": "geode-core/src/main/java/org/apache/geode/cache/query/internal/index/CompactRangeIndex.java", "diffHunk": "@@ -939,7 +939,7 @@ protected boolean evaluateEntry(IndexInfo indexInfo, ExecutionContext context, O\n       // either of them is null and operator is other than == or !=\n       if (result == QueryService.UNDEFINED) {\n         // Undefined is added to results for != conditions only\n-        if (operator != OQLLexerTokenTypes.TOK_NE || operator != OQLLexerTokenTypes.TOK_NE_ALT) {", "originalCommit": "c32020eb8f49ad26aebbf88706793f70b49dbacc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg5NTQyNA==", "url": "https://github.com/apache/geode/pull/5400#discussion_r461895424", "bodyText": "judging by this comment.\n// Undefined is added to results for != conditions only", "author": "nabarunnag", "createdAt": "2020-07-28T21:39:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg5NTA0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkwOTQ3Mg==", "url": "https://github.com/apache/geode/pull/5400#discussion_r461909472", "bodyText": "It is a change in behaviour, but I think it's a change that introduces the originally intended behaviour. The previous logic always evaluated to true, which made me think that there might have been a mistake in it. The comment about \"for != conditions only\" I think is referring to the TOK_NE and TOK_NE_ALT types (not equal and not equal alt), not that the operator should be not equal to them.\nPreviously, any time the result was UNDEFINED it would be added to the results, but with the change, it's only added to the results if the operator is TOK_NE or TOK_NE_ALT, which sounds from the comment to be what was originally intended. All of the tests are passing here with this change, and I ran some other tests privately that also hit no issues, so I'm fairly confident that this isn't breaking anything.", "author": "DonalEvans", "createdAt": "2020-07-28T21:57:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg5NTA0OA=="}], "type": "inlineReview"}]}