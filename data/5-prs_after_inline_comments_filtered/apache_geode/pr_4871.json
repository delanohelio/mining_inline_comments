{"pr_number": 4871, "pr_title": "GEODE-7864: Override the default implementation of write(byte[],int,int)", "pr_createdAt": "2020-03-29T02:42:33Z", "pr_url": "https://github.com/apache/geode/pull/4871", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDU0Mzk2MA==", "url": "https://github.com/apache/geode/pull/4871#discussion_r400543960", "bodyText": "Looks liker we are calling write twice now. Earlier behavior was calling write on parent class FilterOutputStream.", "author": "agingade", "createdAt": "2020-03-30T22:57:08Z", "path": "geode-common/src/main/java/org/apache/geode/util/internal/TeeOutputStream.java", "diffHunk": "@@ -61,6 +61,15 @@ public void write(int b) throws IOException {\n     }\n   }\n \n+  @Override\n+  public void write(byte[] b, int off, int len) throws IOException {\n+    super.write(b, off, len);\n+    OutputStream os = this.branch;", "originalCommit": "33aff78c3f22f700cdd4096fb0ad175c14627692", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcwNDc2OQ==", "url": "https://github.com/apache/geode/pull/4871#discussion_r401704769", "bodyText": "I don't see any unit tests for this class. I think you are right that this will write the bytes twice the branch stream.", "author": "pivotal-jbarrett", "createdAt": "2020-04-01T15:28:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDU0Mzk2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDYwMjg2NQ==", "url": "https://github.com/apache/geode/pull/4871#discussion_r410602865", "bodyText": "The Constructor can provide two output streams. the super call will only write into the one of the stream not on the other and hence we have to write into the other stream in the overridden method", "author": "nabarunnag", "createdAt": "2020-04-18T04:03:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDU0Mzk2MA=="}], "type": "inlineReview"}, {"oid": "05c3ecd6c9191c4b964569588ed5e720b964100e", "url": "https://github.com/apache/geode/commit/05c3ecd6c9191c4b964569588ed5e720b964100e", "message": "GEODE-7864: Override the default implementation of write(byte[],int,int)\n\n\t* Prevent overheads of writing one byte at a time.", "committedDate": "2020-04-18T00:14:49Z", "type": "forcePushed"}, {"oid": "54c972f1bcd078f62f2cfe78fea4add1ce9016a2", "url": "https://github.com/apache/geode/commit/54c972f1bcd078f62f2cfe78fea4add1ce9016a2", "message": "GEODE-7864: Override the default implementation of write(byte[],int,int)\n\n\t* Prevent overheads of writing one byte at a time.", "committedDate": "2020-05-27T21:44:05Z", "type": "commit"}, {"oid": "54c972f1bcd078f62f2cfe78fea4add1ce9016a2", "url": "https://github.com/apache/geode/commit/54c972f1bcd078f62f2cfe78fea4add1ce9016a2", "message": "GEODE-7864: Override the default implementation of write(byte[],int,int)\n\n\t* Prevent overheads of writing one byte at a time.", "committedDate": "2020-05-27T21:44:05Z", "type": "forcePushed"}]}