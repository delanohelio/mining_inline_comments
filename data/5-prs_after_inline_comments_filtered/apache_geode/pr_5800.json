{"pr_number": 5800, "pr_title": "GEODE-8755: Write content list files to integration test dir", "pr_createdAt": "2020-12-01T23:25:40Z", "pr_url": "https://github.com/apache/geode/pull/5800", "timeline": [{"oid": "235b59eda3af0419e558284c9608daf3a9b71bb4", "url": "https://github.com/apache/geode/commit/235b59eda3af0419e558284c9608daf3a9b71bb4", "message": "GEODE-8755: Write bundled jars file correct dir\n\nBundledJarsJUnitTest once again writes the bundled_jars.txt file to the\nintegrationTest dir, where the failure message instructs the user to\nlook for it.\n\nAuthored-by: Dale Emery <demery@vmware.com>", "committedDate": "2020-12-02T01:26:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMzODQ3MA==", "url": "https://github.com/apache/geode/pull/5800#discussion_r534338470", "bodyText": "This change looks good, however, BundledJarsJUnitTest is not the only test that has this problem; AssemblyContentsIntegrationTest and GeodeDependencyJarIntegrationTest also need essentially the same change.", "author": "yozaner1324", "createdAt": "2020-12-02T17:12:29Z", "path": "geode-assembly/src/integrationTest/java/org/apache/geode/BundledJarsJUnitTest.java", "diffHunk": "@@ -67,7 +67,7 @@ public void verifyBundledJarsHaveNotChanged() throws IOException {\n         sortedJars.entrySet().stream().map(entry -> removeVersion(entry.getKey()));\n     Set<String> bundledJarNames = new TreeSet<>(lines.collect(Collectors.toSet()));\n \n-    Files.write(Paths.get(\"bundled_jars.txt\"), bundledJarNames);\n+    Files.write(Paths.get(\"..\", \"bundled_jars.txt\"), bundledJarNames);", "originalCommit": "235b59eda3af0419e558284c9608daf3a9b71bb4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM1NjMwMQ==", "url": "https://github.com/apache/geode/pull/5800#discussion_r534356301", "bodyText": "I did a scan of the integration test output to spot this kind of file. I found AssemblyContentsIntegrationTest and GeodeDependencyJarIntegrationTest. I will fix those. If you know of others, let me know.", "author": "demery-pivotal", "createdAt": "2020-12-02T17:38:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMzODQ3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM1OTIxNQ==", "url": "https://github.com/apache/geode/pull/5800#discussion_r534359215", "bodyText": "The three mentioned tests are the only ones I'm aware of that write files that need to be accessed after the test runs. I searched for all other occurrences of \"Files.write\" and none seemed important. I'm not sure there is a better way to identify which files are important vs random temp files.", "author": "yozaner1324", "createdAt": "2020-12-02T17:42:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMzODQ3MA=="}], "type": "inlineReview"}, {"oid": "505e46b0ff7fe2bb9dd891781b4fd36fc38f33e5", "url": "https://github.com/apache/geode/commit/505e46b0ff7fe2bb9dd891781b4fd36fc38f33e5", "message": "GEODE-8755: Write bundled jars file correct dir\n\nBundledJarsJUnitTest, AssemblyContentsIntegrationTest, and\nGeodeDependencyJarIntegrationTest once again write their output to the\nfile paths indicated in their failure messages.\n\nAuthored-by: Dale Emery <demery@vmware.com>", "committedDate": "2020-12-02T17:41:43Z", "type": "forcePushed"}, {"oid": "a0518cf5d6cb1c0deecebea44675669484050b72", "url": "https://github.com/apache/geode/commit/a0518cf5d6cb1c0deecebea44675669484050b72", "message": "GEODE-8755: Write bundled jars file correct dir\n\nBundledJarsJUnitTest, AssemblyContentsIntegrationTest, and\nGeodeDependencyJarIntegrationTest once again write their output to the\nfile paths indicated in their failure messages.\n\nAuthored-by: Dale Emery <demery@vmware.com>", "committedDate": "2020-12-02T18:41:47Z", "type": "commit"}, {"oid": "a0518cf5d6cb1c0deecebea44675669484050b72", "url": "https://github.com/apache/geode/commit/a0518cf5d6cb1c0deecebea44675669484050b72", "message": "GEODE-8755: Write bundled jars file correct dir\n\nBundledJarsJUnitTest, AssemblyContentsIntegrationTest, and\nGeodeDependencyJarIntegrationTest once again write their output to the\nfile paths indicated in their failure messages.\n\nAuthored-by: Dale Emery <demery@vmware.com>", "committedDate": "2020-12-02T18:41:47Z", "type": "forcePushed"}]}