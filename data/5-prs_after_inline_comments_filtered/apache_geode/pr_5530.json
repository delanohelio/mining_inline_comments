{"pr_number": 5530, "pr_title": "GEODE-8517: GatewaySenderEventImpl's 2 new attributes were introduced\u2026", "pr_createdAt": "2020-09-22T03:32:53Z", "pr_url": "https://github.com/apache/geode/pull/5530", "timeline": [{"oid": "b3a2976be0d51954240729572f1e60dc5b6ef23d", "url": "https://github.com/apache/geode/commit/b3a2976be0d51954240729572f1e60dc5b6ef23d", "message": "GEODE-8517: GatewaySenderEventImpl's 2 new attributes were introduced in 1.14 not 1.13", "committedDate": "2020-09-22T03:30:57Z", "type": "commit"}, {"oid": "f973151fc70448079c5eff8d053a44398c883868", "url": "https://github.com/apache/geode/commit/f973151fc70448079c5eff8d053a44398c883868", "message": "fix sanctionedDataSerializables.txt", "committedDate": "2020-09-22T05:37:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg4ODk2Mg==", "url": "https://github.com/apache/geode/pull/5530#discussion_r492888962", "bodyText": "I think this need a conditional check.\nif (version >= KnownVersion.GEODE_1_14_0.ordinal()) {\n}\nSo that it will not send data that old version server can not deserialize.", "author": "pivotal-eshu", "createdAt": "2020-09-22T16:52:13Z", "path": "geode-core/src/main/java/org/apache/geode/internal/cache/wan/GatewaySenderEventImpl.java", "diffHunk": "@@ -710,7 +710,7 @@ public int getDSFID() {\n   @Override\n   public void toData(DataOutput out,\n       SerializationContext context) throws IOException {\n-    toDataPre_GEODE_1_13_0_0(out, context);\n+    toDataPre_GEODE_1_14_0_0(out, context);\n     boolean hasTransaction = this.transactionId != null;", "originalCommit": "f973151fc70448079c5eff8d053a44398c883868", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTIyMDQ1Mg==", "url": "https://github.com/apache/geode/pull/5530#discussion_r495220452", "bodyText": "The version in toData() is 0. So it will not help. I added \"if (version == 0 || version >= KnownVersion.GEODE_1_14_0.ordinal()) {\" too. The result is the same. It did not improve on reproducing 49196.", "author": "gesterzhou", "createdAt": "2020-09-25T20:40:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg4ODk2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI1MTA5OQ==", "url": "https://github.com/apache/geode/pull/5530#discussion_r501251099", "bodyText": "There is no need for condition check here. The appropriate version of toData() is invoked by  DSFIDSerializerImpl.invokeToData() and InternalDataSerializer.invokeToData(). Similarly, there is no need from condition check in fromData().", "author": "jchen21", "createdAt": "2020-10-07T19:15:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg4ODk2Mg=="}], "type": "inlineReview"}, {"oid": "7b80fcfb9662b8e40a75bc250aa6e7a484952af9", "url": "https://github.com/apache/geode/commit/7b80fcfb9662b8e40a75bc250aa6e7a484952af9", "message": "Add a unit test", "committedDate": "2020-09-28T22:23:45Z", "type": "commit"}, {"oid": "61980f8d95b8dfed2dd23a4540b22893e936f57c", "url": "https://github.com/apache/geode/commit/61980f8d95b8dfed2dd23a4540b22893e936f57c", "message": "Remove unnecessary IF condition check.", "committedDate": "2020-10-07T19:32:18Z", "type": "commit"}, {"oid": "5d2726fa0818cf57e13d92d65d5d019460cfd31d", "url": "https://github.com/apache/geode/commit/5d2726fa0818cf57e13d92d65d5d019460cfd31d", "message": "Add new tests", "committedDate": "2020-10-07T23:33:02Z", "type": "commit"}, {"oid": "d0e43285f3969dae9e7d4621fce6974cc9e09ab7", "url": "https://github.com/apache/geode/commit/d0e43285f3969dae9e7d4621fce6974cc9e09ab7", "message": "Revert \"Remove unnecessary IF condition check.\"\n\nThis reverts commit 61980f8d95b8dfed2dd23a4540b22893e936f57c.", "committedDate": "2020-10-08T22:17:43Z", "type": "commit"}, {"oid": "7b5ececd2e7dd93bfb5faf46e347c8e0b4de4011", "url": "https://github.com/apache/geode/commit/7b5ececd2e7dd93bfb5faf46e347c8e0b4de4011", "message": "Bring back a unit test", "committedDate": "2020-10-08T22:25:35Z", "type": "commit"}]}