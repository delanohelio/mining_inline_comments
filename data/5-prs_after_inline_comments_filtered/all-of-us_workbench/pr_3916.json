{"pr_number": 3916, "pr_title": "[RW-5312][risk=no] Add genomics microarray field to cdrVersion", "pr_createdAt": "2020-08-25T19:25:29Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3916", "timeline": [{"oid": "b35aeca8d1b05c3517307cfc43e935197138a97e", "url": "https://github.com/all-of-us/workbench/commit/b35aeca8d1b05c3517307cfc43e935197138a97e", "message": "add genomics microarray field to cdrVersion", "committedDate": "2020-08-25T19:23:38Z", "type": "commit"}, {"oid": "f0026904d0abfea6c8e9cd8191c9f417b7561a82", "url": "https://github.com/all-of-us/workbench/commit/f0026904d0abfea6c8e9cd8191c9f417b7561a82", "message": "add microarry field to CdrVersion", "committedDate": "2020-08-26T14:37:42Z", "type": "commit"}, {"oid": "56857d41c9cea943b1c30c5156b46190b23d08d4", "url": "https://github.com/all-of-us/workbench/commit/56857d41c9cea943b1c30c5156b46190b23d08d4", "message": "expose microarray field in API, add test, convert to mapstruct", "committedDate": "2020-08-26T15:06:15Z", "type": "commit"}, {"oid": "40f82ca721516c0a96a1ed1cc7d823748fdeba8e", "url": "https://github.com/all-of-us/workbench/commit/40f82ca721516c0a96a1ed1cc7d823748fdeba8e", "message": "Merge branch 'master' of github.com:all-of-us/workbench into songe/RW-5312", "committedDate": "2020-08-26T15:15:19Z", "type": "commit"}, {"oid": "bd318e099857f1b89961e3d45486829384503bef", "url": "https://github.com/all-of-us/workbench/commit/bd318e099857f1b89961e3d45486829384503bef", "message": "spotless", "committedDate": "2020-08-26T15:27:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ0ODg3Mg==", "url": "https://github.com/all-of-us/workbench/pull/3916#discussion_r477448872", "bodyText": "Also - nice, thanks for adding the mapper", "author": "calbach", "createdAt": "2020-08-26T16:55:57Z", "path": "api/src/main/java/org/pmiops/workbench/cdr/CdrVersionMapper.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package org.pmiops.workbench.cdr;\n+\n+import org.mapstruct.Mapper;\n+import org.mapstruct.Mapping;\n+import org.pmiops.workbench.db.model.DbCdrVersion;\n+import org.pmiops.workbench.model.CdrVersion;\n+import org.pmiops.workbench.utils.mappers.CommonMappers;\n+import org.pmiops.workbench.utils.mappers.MapStructConfig;\n+\n+@Mapper(\n+    config = MapStructConfig.class,\n+    uses = {CommonMappers.class})\n+public interface CdrVersionMapper {", "originalCommit": "bd318e099857f1b89961e3d45486829384503bef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3fda9538d0d7bbb446e5401d3db226fe44b6e058", "url": "https://github.com/all-of-us/workbench/commit/3fda9538d0d7bbb446e5401d3db226fe44b6e058", "message": "config field fixe", "committedDate": "2020-08-26T20:47:42Z", "type": "commit"}, {"oid": "c6155bb200008f6571b95a7b0d87aa10806ddc3d", "url": "https://github.com/all-of-us/workbench/commit/c6155bb200008f6571b95a7b0d87aa10806ddc3d", "message": "convert microarray bq string to boolean when exposed to API", "committedDate": "2020-08-26T20:48:04Z", "type": "commit"}, {"oid": "b253938b1589acd098f37e46a5fc4c06735466be", "url": "https://github.com/all-of-us/workbench/commit/b253938b1589acd098f37e46a5fc4c06735466be", "message": "spotless", "committedDate": "2020-08-26T20:49:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU5MzE3OQ==", "url": "https://github.com/all-of-us/workbench/pull/3916#discussion_r477593179", "bodyText": "nit: null or empty might be slightly less error-prone. I'm worried about someone putting microarrayBigQueryDataset: \"\" in the JSON.", "author": "calbach", "createdAt": "2020-08-26T21:14:16Z", "path": "api/src/main/java/org/pmiops/workbench/cdr/CdrVersionMapper.java", "diffHunk": "@@ -0,0 +1,23 @@\n+package org.pmiops.workbench.cdr;\n+\n+import org.mapstruct.Mapper;\n+import org.mapstruct.Mapping;\n+import org.pmiops.workbench.db.model.DbCdrVersion;\n+import org.pmiops.workbench.model.CdrVersion;\n+import org.pmiops.workbench.utils.mappers.CommonMappers;\n+import org.pmiops.workbench.utils.mappers.MapStructConfig;\n+\n+@Mapper(\n+    config = MapStructConfig.class,\n+    uses = {CommonMappers.class})\n+public interface CdrVersionMapper {\n+\n+  @Mapping(source = \"microarrayBigqueryDataset\", target = \"hasMicroarrayData\")\n+  @Mapping(source = \"dataAccessLevelEnum\", target = \"dataAccessLevel\")\n+  @Mapping(source = \"archivalStatusEnum\", target = \"archivalStatus\")\n+  CdrVersion dbModelToClient(DbCdrVersion db);\n+\n+  default boolean isNonNull(String s) {\n+    return s != null;", "originalCommit": "b253938b1589acd098f37e46a5fc4c06735466be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bfc98246ce9f74c79af9aa9acc6326f2e926ca68", "url": "https://github.com/all-of-us/workbench/commit/bfc98246ce9f74c79af9aa9acc6326f2e926ca68", "message": "add empty string check", "committedDate": "2020-08-26T21:51:49Z", "type": "commit"}]}