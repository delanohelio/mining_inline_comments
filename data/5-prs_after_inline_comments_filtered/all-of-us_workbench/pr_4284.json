{"pr_number": 4284, "pr_title": "[no ticket][risk=no] domain count fix", "pr_createdAt": "2020-11-12T22:29:00Z", "pr_url": "https://github.com/all-of-us/workbench/pull/4284", "timeline": [{"oid": "b5a65563a08e334197146df1203fd120e9bfef88", "url": "https://github.com/all-of-us/workbench/commit/b5a65563a08e334197146df1203fd120e9bfef88", "message": "fixing code to add rank1", "committedDate": "2020-11-12T19:44:07Z", "type": "commit"}, {"oid": "0a78b63dc4cbac3d23709983cbec030372559fa1", "url": "https://github.com/all-of-us/workbench/commit/0a78b63dc4cbac3d23709983cbec030372559fa1", "message": "fix problems", "committedDate": "2020-11-12T22:26:25Z", "type": "commit"}, {"oid": "029bdfaa5410952cd62ec9b69d0a04ffda5cd05e", "url": "https://github.com/all-of-us/workbench/commit/029bdfaa5410952cd62ec9b69d0a04ffda5cd05e", "message": "Merge branch 'freemabd/domain-count-fix' of https://github.com/all-of-us/workbench into freemabd/domain-count-fix", "committedDate": "2020-11-12T22:27:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjU4MTE5MQ==", "url": "https://github.com/all-of-us/workbench/pull/4284#discussion_r522581191", "bodyText": "shouldn't this be \"isSelectable\"?", "author": "jscherdin", "createdAt": "2020-11-13T03:02:30Z", "path": "api/src/main/java/org/pmiops/workbench/cdr/dao/CBCriteriaDao.java", "diffHunk": "@@ -166,7 +166,7 @@\n \n   @Query(\n       value =\n-          \"select c from DbCriteria c where domainId=:domain and match(fullText, concat('+[', :domain, '_rank1]')) > 0 order by c.count desc, c.name asc\")\n+          \"select c from DbCriteria c where domainId=:domain and selectable = 1 and match(fullText, concat('+[', :domain, '_rank1]')) > 0 order by c.count desc, c.name asc\")", "originalCommit": "029bdfaa5410952cd62ec9b69d0a04ffda5cd05e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk1MTYwNQ==", "url": "https://github.com/all-of-us/workbench/pull/4284#discussion_r522951605", "bodyText": "This is JPQL(query using the Object properties) not SQL", "author": "freemabd", "createdAt": "2020-11-13T13:32:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjU4MTE5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk3NjI0MQ==", "url": "https://github.com/all-of-us/workbench/pull/4284#discussion_r522976241", "bodyText": "Ok. the switching back and forth between native sql and jpql confused me", "author": "jscherdin", "createdAt": "2020-11-13T14:15:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjU4MTE5MQ=="}], "type": "inlineReview"}]}