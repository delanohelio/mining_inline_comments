{"pr_number": 3678, "pr_title": "[RW-4957][risk=no] UI to update verified institutional affiliation", "pr_createdAt": "2020-06-16T18:31:45Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3678", "timeline": [{"oid": "538ac95f7aeee9580c9faf3e72aa1e9221903ad5", "url": "https://github.com/all-of-us/workbench/commit/538ac95f7aeee9580c9faf3e72aa1e9221903ad5", "message": "shelving", "committedDate": "2020-06-12T18:02:03Z", "type": "commit"}, {"oid": "ebcc09b9ca66915ce7f7bca00f461e547cf15ca9", "url": "https://github.com/all-of-us/workbench/commit/ebcc09b9ca66915ce7f7bca00f461e547cf15ca9", "message": "make the update actually work", "committedDate": "2020-06-16T15:33:41Z", "type": "commit"}, {"oid": "4206326ceadee289045706da372b76c8875c3ad7", "url": "https://github.com/all-of-us/workbench/commit/4206326ceadee289045706da372b76c8875c3ad7", "message": "validate.js", "committedDate": "2020-06-16T17:59:50Z", "type": "commit"}, {"oid": "77735f506d908c4d5d614a70cf3175530e470187", "url": "https://github.com/all-of-us/workbench/commit/77735f506d908c4d5d614a70cf3175530e470187", "message": "lint", "committedDate": "2020-06-16T18:25:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA2MzA1Ng==", "url": "https://github.com/all-of-us/workbench/pull/3678#discussion_r441063056", "bodyText": "this whole block is kind of janky and I expect the entire thing to get deleted by RW-4980.", "author": "als364", "createdAt": "2020-06-16T18:36:26Z", "path": "api/src/main/java/org/pmiops/workbench/api/ProfileController.java", "diffHunk": "@@ -705,11 +710,26 @@ private void updateProfileForUser(DbUser user, Profile updatedProfile, Profile p\n     user.setLastModifiedTime(now);\n \n     updateInstitutionalAffiliations(updatedProfile, user);\n-    if (workbenchConfigProvider.get().featureFlags.requireInstitutionalVerification) {\n+    boolean requireInstitutionalVerification =\n+        workbenchConfigProvider.get().featureFlags.requireInstitutionalVerification;\n+    if (requireInstitutionalVerification) {\n       profileService.validateInstitutionalAffiliation(updatedProfile);\n     }\n \n     userService.updateUserWithConflictHandling(user);\n+    if (requireInstitutionalVerification) {", "originalCommit": "77735f506d908c4d5d614a70cf3175530e470187", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwMDkyNw==", "url": "https://github.com/all-of-us/workbench/pull/3678#discussion_r441100927", "bodyText": "That sounds about right - but it fits the current state of things", "author": "jmthibault79", "createdAt": "2020-06-16T19:46:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA2MzA1Ng=="}], "type": "inlineReview"}, {"oid": "57b61b59b72a912378b322f0f13b9851c8762307", "url": "https://github.com/all-of-us/workbench/commit/57b61b59b72a912378b322f0f13b9851c8762307", "message": "typo ugh ugh ugh", "committedDate": "2020-06-16T20:06:44Z", "type": "commit"}, {"oid": "6793cb511b0b1680b5fda28c4f16df55203e0db3", "url": "https://github.com/all-of-us/workbench/commit/6793cb511b0b1680b5fda28c4f16df55203e0db3", "message": "actually don't need these", "committedDate": "2020-06-16T20:15:27Z", "type": "commit"}, {"oid": "b446460ce9aae5ba624ba5c3e825098cddcdf743", "url": "https://github.com/all-of-us/workbench/commit/b446460ce9aae5ba624ba5c3e825098cddcdf743", "message": "set old to new", "committedDate": "2020-06-16T20:35:51Z", "type": "commit"}, {"oid": "6fe104137f9f779b91863ad7f2fb8b2bac7a930a", "url": "https://github.com/all-of-us/workbench/commit/6fe104137f9f779b91863ad7f2fb8b2bac7a930a", "message": "move things to different places", "committedDate": "2020-06-16T21:02:51Z", "type": "commit"}, {"oid": "1b17c71d495c13d355d6249827cda0a4dd22c6cf", "url": "https://github.com/all-of-us/workbench/commit/1b17c71d495c13d355d6249827cda0a4dd22c6cf", "message": "added test", "committedDate": "2020-06-16T21:13:42Z", "type": "commit"}, {"oid": "f5cdaaca28d052f1b2986c80d50af215bbdcdc6b", "url": "https://github.com/all-of-us/workbench/commit/f5cdaaca28d052f1b2986c80d50af215bbdcdc6b", "message": "lint", "committedDate": "2020-06-16T21:20:03Z", "type": "commit"}, {"oid": "12e58ba884fc806f8109f13dab3054321b5c8c3c", "url": "https://github.com/all-of-us/workbench/commit/12e58ba884fc806f8109f13dab3054321b5c8c3c", "message": "some more review changes", "committedDate": "2020-06-17T20:27:38Z", "type": "commit"}, {"oid": "be3bb3ea81a028dd69c822d30db632f43dcb9bf5", "url": "https://github.com/all-of-us/workbench/commit/be3bb3ea81a028dd69c822d30db632f43dcb9bf5", "message": "institution checking", "committedDate": "2020-06-18T19:11:09Z", "type": "commit"}, {"oid": "015fd1941dea759de54fbc2ec2d49c42cfdef075", "url": "https://github.com/all-of-us/workbench/commit/015fd1941dea759de54fbc2ec2d49c42cfdef075", "message": "lint", "committedDate": "2020-06-18T20:38:55Z", "type": "commit"}, {"oid": "d95a303a77ac6e5496c6510f09a091c27afaa3cc", "url": "https://github.com/all-of-us/workbench/commit/d95a303a77ac6e5496c6510f09a091c27afaa3cc", "message": "get rid of state", "committedDate": "2020-06-18T20:45:57Z", "type": "commit"}, {"oid": "1f033b1f595b9d3d38344ebe1c3f867c8bfe2972", "url": "https://github.com/all-of-us/workbench/commit/1f033b1f595b9d3d38344ebe1c3f867c8bfe2972", "message": "actually set displayname", "committedDate": "2020-06-19T15:33:31Z", "type": "commit"}, {"oid": "1c8195dedb66b33d578bb580216d197281f99336", "url": "https://github.com/all-of-us/workbench/commit/1c8195dedb66b33d578bb580216d197281f99336", "message": "lint'", "committedDate": "2020-06-19T16:05:51Z", "type": "commit"}]}