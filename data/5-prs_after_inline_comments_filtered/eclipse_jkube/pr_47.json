{"pr_number": 47, "pr_title": "Refactor Jkube-kit in order to be independent from maven", "pr_createdAt": "2020-01-23T14:02:44Z", "pr_url": "https://github.com/eclipse/jkube/pull/47", "timeline": [{"oid": "a6e8f43f3fc8614fc92f19bc713a9539ac2a2341", "url": "https://github.com/eclipse/jkube/commit/a6e8f43f3fc8614fc92f19bc713a9539ac2a2341", "message": "Added tests and license headers to new files", "committedDate": "2020-01-24T10:34:51Z", "type": "forcePushed"}, {"oid": "d32406d1c4e9e99db67ceed718058009d59679cf", "url": "https://github.com/eclipse/jkube/commit/d32406d1c4e9e99db67ceed718058009d59679cf", "message": "Added tests and license headers to new files", "committedDate": "2020-01-24T10:55:10Z", "type": "forcePushed"}, {"oid": "5f298b8ca7d28f37feeb5a0e94f3e3587e54e3ec", "url": "https://github.com/eclipse/jkube/commit/5f298b8ca7d28f37feeb5a0e94f3e3587e54e3ec", "message": "Removed Maven dependency from build api/ and service/", "committedDate": "2020-01-28T16:31:59Z", "type": "forcePushed"}, {"oid": "775ff6fe877c1c411c2a4f7894a25615c08ce8b5", "url": "https://github.com/eclipse/jkube/commit/775ff6fe877c1c411c2a4f7894a25615c08ce8b5", "message": "Removed Maven dependency from build api/ and service/", "committedDate": "2020-01-29T08:36:40Z", "type": "forcePushed"}, {"oid": "907c70c47a998bf0d2eb7f842d6d6baf5c1e0575", "url": "https://github.com/eclipse/jkube/commit/907c70c47a998bf0d2eb7f842d6d6baf5c1e0575", "message": "Removed Maven dependency from build api/ and service/", "committedDate": "2020-01-29T09:01:21Z", "type": "forcePushed"}, {"oid": "af3f98d62daa922652fb8f8e32d22a37f2fe0f5b", "url": "https://github.com/eclipse/jkube/commit/af3f98d62daa922652fb8f8e32d22a37f2fe0f5b", "message": "Removed Maven dependency from build api/ and service/", "committedDate": "2020-01-29T13:36:16Z", "type": "forcePushed"}, {"oid": "8b85de7f4dd79183f251dc761a0ede936f21a01a", "url": "https://github.com/eclipse/jkube/commit/8b85de7f4dd79183f251dc761a0ede936f21a01a", "message": "Removed Maven dependency from build api/ and service/", "committedDate": "2020-01-29T13:46:02Z", "type": "forcePushed"}, {"oid": "8075f70d8dc65552321943a76a19a16241f2a9cf", "url": "https://github.com/eclipse/jkube/commit/8075f70d8dc65552321943a76a19a16241f2a9cf", "message": "Removed Maven dependency from build api/ and service/", "committedDate": "2020-01-29T14:28:52Z", "type": "forcePushed"}, {"oid": "4e1964a6a932292ca10532421efa554dee4df063", "url": "https://github.com/eclipse/jkube/commit/4e1964a6a932292ca10532421efa554dee4df063", "message": "Removed Maven dependency from build api/ and service/", "committedDate": "2020-01-29T15:00:38Z", "type": "forcePushed"}, {"oid": "5e7d7f9b79840c232f64a14d2e356872a54ecdbe", "url": "https://github.com/eclipse/jkube/commit/5e7d7f9b79840c232f64a14d2e356872a54ecdbe", "message": "Removed Maven dependency from build api/ and service/", "committedDate": "2020-01-29T16:18:59Z", "type": "forcePushed"}, {"oid": "c2917a7cd0bb744a2975fe6aaed317efe9b64bb1", "url": "https://github.com/eclipse/jkube/commit/c2917a7cd0bb744a2975fe6aaed317efe9b64bb1", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-05T16:28:34Z", "type": "forcePushed"}, {"oid": "77df4eb0d5ac67990c2d3cca2198448fa64a0bec", "url": "https://github.com/eclipse/jkube/commit/77df4eb0d5ac67990c2d3cca2198448fa64a0bec", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-05T16:53:23Z", "type": "forcePushed"}, {"oid": "2bac133c12ab1f9ff58f8eb67f11b2a9cae630ec", "url": "https://github.com/eclipse/jkube/commit/2bac133c12ab1f9ff58f8eb67f11b2a9cae630ec", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-06T06:36:20Z", "type": "forcePushed"}, {"oid": "333e8cd3b063bf1e31bd239cb30fa69e1ed75022", "url": "https://github.com/eclipse/jkube/commit/333e8cd3b063bf1e31bd239cb30fa69e1ed75022", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-06T06:53:27Z", "type": "forcePushed"}, {"oid": "9d671adab235f782554a7218c29a1dd56b163ebb", "url": "https://github.com/eclipse/jkube/commit/9d671adab235f782554a7218c29a1dd56b163ebb", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-06T15:03:07Z", "type": "forcePushed"}, {"oid": "4dc9817840aea5aa51a04e219177e325ad8a4f63", "url": "https://github.com/eclipse/jkube/commit/4dc9817840aea5aa51a04e219177e325ad8a4f63", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-06T16:54:17Z", "type": "forcePushed"}, {"oid": "d7971b2bd439f81060f8bb3292ea5b70ed670587", "url": "https://github.com/eclipse/jkube/commit/d7971b2bd439f81060f8bb3292ea5b70ed670587", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-07T08:37:27Z", "type": "forcePushed"}, {"oid": "c89d2a81b1afd6d022dc8b41b32d12a290cb4a56", "url": "https://github.com/eclipse/jkube/commit/c89d2a81b1afd6d022dc8b41b32d12a290cb4a56", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-08T08:10:14Z", "type": "forcePushed"}, {"oid": "9515ecf990e43b97c0012fc5d768e88272d7655b", "url": "https://github.com/eclipse/jkube/commit/9515ecf990e43b97c0012fc5d768e88272d7655b", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-08T09:50:49Z", "type": "forcePushed"}, {"oid": "b561cc155d6f570c5a4f3a551e8d4bba6efd05aa", "url": "https://github.com/eclipse/jkube/commit/b561cc155d6f570c5a4f3a551e8d4bba6efd05aa", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-09T08:57:40Z", "type": "forcePushed"}, {"oid": "7e367f1063a4765f4c92a04b4e8ff6077075f758", "url": "https://github.com/eclipse/jkube/commit/7e367f1063a4765f4c92a04b4e8ff6077075f758", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-09T09:12:23Z", "type": "forcePushed"}, {"oid": "585f7c1573b08d22af20cf5c37c704b9f9ed8f09", "url": "https://github.com/eclipse/jkube/commit/585f7c1573b08d22af20cf5c37c704b9f9ed8f09", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-10T06:10:01Z", "type": "forcePushed"}, {"oid": "a410ae3e58ffb509255f70dbc4bd72daa2468549", "url": "https://github.com/eclipse/jkube/commit/a410ae3e58ffb509255f70dbc4bd72daa2468549", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-10T09:11:00Z", "type": "forcePushed"}, {"oid": "53c6b9f0345885ab603921d903a13557a5ef1567", "url": "https://github.com/eclipse/jkube/commit/53c6b9f0345885ab603921d903a13557a5ef1567", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-10T15:36:55Z", "type": "forcePushed"}, {"oid": "dfbc8d7033331f00e8bf074fdfdc8fd8ddcc33d3", "url": "https://github.com/eclipse/jkube/commit/dfbc8d7033331f00e8bf074fdfdc8fd8ddcc33d3", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-12T08:55:30Z", "type": "forcePushed"}, {"oid": "879263f306a5dbf708285ceb63f9cb130a81a052", "url": "https://github.com/eclipse/jkube/commit/879263f306a5dbf708285ceb63f9cb130a81a052", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-12T14:56:45Z", "type": "forcePushed"}, {"oid": "3949f5254cdefc09036c8cb4c68c50ce1e510668", "url": "https://github.com/eclipse/jkube/commit/3949f5254cdefc09036c8cb4c68c50ce1e510668", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-12T17:27:54Z", "type": "forcePushed"}, {"oid": "fc2d1e431ec590d9710e60986493dab5e1be87b1", "url": "https://github.com/eclipse/jkube/commit/fc2d1e431ec590d9710e60986493dab5e1be87b1", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-13T06:39:35Z", "type": "forcePushed"}, {"oid": "261d7fd226bef512a87c936706c2b473df7518fb", "url": "https://github.com/eclipse/jkube/commit/261d7fd226bef512a87c936706c2b473df7518fb", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-13T07:05:30Z", "type": "forcePushed"}, {"oid": "39850fcbbc123d4c5cd93de9002b40538841cd7d", "url": "https://github.com/eclipse/jkube/commit/39850fcbbc123d4c5cd93de9002b40538841cd7d", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-14T08:55:51Z", "type": "forcePushed"}, {"oid": "7433ec037e8fd57d2d63c058d2fdc07b35398b2e", "url": "https://github.com/eclipse/jkube/commit/7433ec037e8fd57d2d63c058d2fdc07b35398b2e", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-15T06:22:09Z", "type": "forcePushed"}, {"oid": "afcde517bad8b09538f8f93bf28cfcd5f95949a9", "url": "https://github.com/eclipse/jkube/commit/afcde517bad8b09538f8f93bf28cfcd5f95949a9", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-15T06:38:21Z", "type": "forcePushed"}, {"oid": "749a4e2b44c69a73fad0da2c74a49822f495e640", "url": "https://github.com/eclipse/jkube/commit/749a4e2b44c69a73fad0da2c74a49822f495e640", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-15T09:56:55Z", "type": "forcePushed"}, {"oid": "5cec28de21bf92ce697c4af68a63a253410202c1", "url": "https://github.com/eclipse/jkube/commit/5cec28de21bf92ce697c4af68a63a253410202c1", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-15T10:02:05Z", "type": "forcePushed"}, {"oid": "c60343fae7ed7fe84890537c11d0f77412fb0d6c", "url": "https://github.com/eclipse/jkube/commit/c60343fae7ed7fe84890537c11d0f77412fb0d6c", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-18T07:05:04Z", "type": "forcePushed"}, {"oid": "bcd808a52e2faf0d7d90d66f7c5266166e2c6dea", "url": "https://github.com/eclipse/jkube/commit/bcd808a52e2faf0d7d90d66f7c5266166e2c6dea", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-20T11:58:01Z", "type": "forcePushed"}, {"oid": "94f32674c605569459c8fda0ea16ff078b584cf0", "url": "https://github.com/eclipse/jkube/commit/94f32674c605569459c8fda0ea16ff078b584cf0", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-20T12:17:52Z", "type": "forcePushed"}, {"oid": "85eb9574bbcabede7b467f0b0c90a4ace12c9fc4", "url": "https://github.com/eclipse/jkube/commit/85eb9574bbcabede7b467f0b0c90a4ace12c9fc4", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-20T12:50:25Z", "type": "forcePushed"}, {"oid": "6e186a5d7c7e0f49d76f5477b48909916e2b4600", "url": "https://github.com/eclipse/jkube/commit/6e186a5d7c7e0f49d76f5477b48909916e2b4600", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-20T13:58:31Z", "type": "forcePushed"}, {"oid": "8daa3f3d3e07bb115cddf367808c69e53f8d9057", "url": "https://github.com/eclipse/jkube/commit/8daa3f3d3e07bb115cddf367808c69e53f8d9057", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-21T17:03:29Z", "type": "forcePushed"}, {"oid": "9b62653548ee1370a6bcf64384df27a57784aa6e", "url": "https://github.com/eclipse/jkube/commit/9b62653548ee1370a6bcf64384df27a57784aa6e", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-24T08:43:08Z", "type": "forcePushed"}, {"oid": "c5ac9ab75c8dae9c7a948bc92c76ec8d57f38eec", "url": "https://github.com/eclipse/jkube/commit/c5ac9ab75c8dae9c7a948bc92c76ec8d57f38eec", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-24T09:55:42Z", "type": "forcePushed"}, {"oid": "72a9f099e1e788bbd52608f6d120e35894d10ca5", "url": "https://github.com/eclipse/jkube/commit/72a9f099e1e788bbd52608f6d120e35894d10ca5", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-24T11:03:00Z", "type": "forcePushed"}, {"oid": "98aadd7a21746a6f5f1946b7d312b78241069168", "url": "https://github.com/eclipse/jkube/commit/98aadd7a21746a6f5f1946b7d312b78241069168", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-24T17:24:22Z", "type": "forcePushed"}, {"oid": "2bcbdd1425ae5977b188877a5e56d86ac316ef6c", "url": "https://github.com/eclipse/jkube/commit/2bcbdd1425ae5977b188877a5e56d86ac316ef6c", "message": "Decouple Docker build service from Maven\n\nThis is related to #30", "committedDate": "2020-02-25T07:22:51Z", "type": "commit"}, {"oid": "1b751bad36cdffe58320ffe1c4fd5779e48f7978", "url": "https://github.com/eclipse/jkube/commit/1b751bad36cdffe58320ffe1c4fd5779e48f7978", "message": "Replace MavenProject with generic JkubeProject", "committedDate": "2020-02-25T07:22:51Z", "type": "commit"}, {"oid": "5e20567178771c563e4f9d8373be71ee307cd9cb", "url": "https://github.com/eclipse/jkube/commit/5e20567178771c563e4f9d8373be71ee307cd9cb", "message": "Deleting unused classes in maven", "committedDate": "2020-02-25T07:22:51Z", "type": "commit"}, {"oid": "5793c109dda08b6a876cdcc77c0adc0dc698927a", "url": "https://github.com/eclipse/jkube/commit/5793c109dda08b6a876cdcc77c0adc0dc698927a", "message": "Added tests and license headers to new files", "committedDate": "2020-02-25T07:22:51Z", "type": "commit"}, {"oid": "25ceec1651d01a8be40c29fe3fc6dcf85f0e4644", "url": "https://github.com/eclipse/jkube/commit/25ceec1651d01a8be40c29fe3fc6dcf85f0e4644", "message": "Merged maven/ module inside service/", "committedDate": "2020-02-25T07:22:51Z", "type": "commit"}, {"oid": "13fc431fdb4f2be201680943ef614ebe1d0140a4", "url": "https://github.com/eclipse/jkube/commit/13fc431fdb4f2be201680943ef614ebe1d0140a4", "message": "Removed Maven dependency from build api/ and service/", "committedDate": "2020-02-25T07:22:51Z", "type": "commit"}, {"oid": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "url": "https://github.com/eclipse/jkube/commit/ea7a738d493e96953c2f6ec07727a198ac3aa707", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-25T10:13:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxOTMxMA==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r383919310", "bodyText": "Add a private constructor so that we enforce the use of the singleton.", "author": "manusa", "createdAt": "2020-02-25T14:40:13Z", "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/core/assembly/DockerAssemblyManager.java", "diffHunk": "@@ -76,17 +62,12 @@\n     public static final String DOCKER_INCLUDE = \".maven-dockerinclude\";\n     public static final String DOCKERFILE_NAME = \"Dockerfile\";\n \n-    @Requirement\n-    private AssemblyArchiver assemblyArchiver;\n-\n-    @Requirement\n-    private AssemblyReader assemblyReader;\n-\n-    @Requirement\n-    private ArchiverManager archiverManager;\n-\n-    @Requirement(hint = \"track\")\n-    private Archiver trackArchiver;\n+    public static DockerAssemblyManager getInstance() {\n+        if (dockerAssemblyManager == null) {\n+            dockerAssemblyManager = new DockerAssemblyManager();\n+        }\n+        return dockerAssemblyManager;\n+    }\n ", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkyNDE0Mw==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r383924143", "bodyText": "This looks really messy.\nI guess this is like this for deserialization?\nIn any case it would be good to have a proper POJO to represent this \"settings\" structure.", "author": "manusa", "createdAt": "2020-02-25T14:47:29Z", "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/RegistryService.java", "diffHunk": "@@ -210,8 +219,8 @@ public Builder registry(String registry) {\n                 return this;\n             }\n \n-            public Builder settings(Settings settings) {\n-                context.settings = settings;\n+            public Builder settings(Map<String, AbstractMap.SimpleEntry<AbstractMap.SimpleEntry<String, String>, Map<String, Object>>> registryServerSettingsAsMap) {", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkyNTk2Mg==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r383925962", "bodyText": "No need to add throws IllegalStateException it's a RuntimeException > remove from method signature.", "author": "manusa", "createdAt": "2020-02-25T14:50:14Z", "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/auth/AuthConfigFactory.java", "diffHunk": "@@ -328,15 +315,15 @@ private AuthConfig getAuthConfigFromSystemProperties(LookupMode lookupMode) thro\n                 throw new IOException(\"No \" + passwordKey + \" provided for username \" + props.getProperty(userKey));\n             }\n             return new AuthConfig(props.getProperty(userKey),\n-                                  decrypt(props.getProperty(passwordKey)),\n+                                  passwordDecryptionMethod.apply(props.getProperty(passwordKey)),\n                                   props.getProperty(lookupMode.asSysProperty(AUTH_EMAIL)),\n                                   props.getProperty(lookupMode.asSysProperty(AUTH_AUTHTOKEN)));\n         } else {\n             return null;\n         }\n     }\n \n-    private AuthConfig getAuthConfigFromOpenShiftConfig(LookupMode lookupMode, Map authConfigMap) throws MojoExecutionException {\n+    private AuthConfig getAuthConfigFromOpenShiftConfig(LookupMode lookupMode, Map authConfigMap) throws IllegalStateException {", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkyNjM3OQ==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r383926379", "bodyText": "Remove IllegalStateExceptionfrom method signature", "author": "manusa", "createdAt": "2020-02-25T14:50:54Z", "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/auth/AuthConfigFactory.java", "diffHunk": "@@ -520,21 +507,21 @@ private AuthConfig parseUser(String userName, Map user) {\n                               token, null, null);\n     }\n \n-    private AuthConfig validateMandatoryOpenShiftLogin(AuthConfig openShiftAuthConfig, String useOpenAuthModeProp) throws MojoExecutionException {\n+    private AuthConfig validateMandatoryOpenShiftLogin(AuthConfig openShiftAuthConfig, String useOpenAuthModeProp) throws IllegalStateException {", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkzNjUyMw==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r383936523", "bodyText": "Please, name static constants in Uppercase.\nThese the most basic language coding conventions used across any Java code-base. It's very important to name things following this foundation guidelines as when we Java coders read code with certain letter-case we assume the named entity is a class, package, instance, constant, etc.", "author": "manusa", "createdAt": "2020-02-25T15:05:33Z", "path": "jkube-kit/common-maven/src/main/java/org/eclipse/jkube/kit/common/util/AnsiLogger.java", "diffHunk": "@@ -49,15 +49,13 @@\n     private List<LogVerboseCategory> verboseModes = null;\n \n     // ANSI escapes for various colors (or empty strings if no coloring is used)\n-    static Ansi.Color\n-            COLOR_ERROR = RED,\n-            COLOR_INFO = GREEN,\n-            COLOR_WARNING = YELLOW,\n-            COLOR_PROGRESS_ID = YELLOW,\n-            COLOR_PROGRESS_STATUS = GREEN,\n-            COLOR_PROGRESS_BAR = CYAN,\n-            COLOR_EMPHASIS = BLUE;\n-\n+    static Ansi.Color error = RED;", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MDI2NA==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r383940264", "bodyText": "Better to use a specific POJO to represent the Plugins object.\nJavadoc description looks outdated and inaccurate.", "author": "manusa", "createdAt": "2020-02-25T15:11:23Z", "path": "jkube-kit/common-maven/src/main/java/org/eclipse/jkube/kit/common/util/MavenUtil.java", "diffHunk": "@@ -180,6 +149,55 @@ public static Plugin getPluginOfAnyGroupId(MavenProject project, String pluginAr\n         return getPlugin(project, null, pluginArtifact);\n     }\n \n+    /**\n+     * Returns a comma separated string with dependency list in format\n+     *  groupId,artifactId,version,configuration,execution1|execution2|execution3\n+     *\n+     * @param project Maven project\n+     * @return list of dependencies in comma separated strings\n+     */\n+    public static List<AbstractMap.SimpleEntry<String, Map<String, Object>>> getPluginsAsString(MavenProject project) {", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MzY3NQ==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r383943675", "bodyText": "As in previous comment, better to use a specific typed POJO to represent this structure.\nThis is tightly related to the comment in RegistryService.Builder#settings where you are eventually converting what we return here to List<RegistryServerConfiguration>", "author": "manusa", "createdAt": "2020-02-25T15:16:38Z", "path": "jkube-kit/common-maven/src/main/java/org/eclipse/jkube/kit/common/util/MavenUtil.java", "diffHunk": "@@ -331,5 +349,81 @@ public static String getDocumentationUrl (MavenProject project) {\n             throw new IOException(\"Cannot extract compile class path elements\", e);\n         }\n     }\n+\n+    public static Map<String, AbstractMap.SimpleEntry<AbstractMap.SimpleEntry<String, String>, Map<String, Object>>> getRegistryServerFromMavenSettings(Settings settings) {", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk1MjgyMw==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r383952823", "bodyText": "What is 63?\nDeclare a constant with a descriptive name please.", "author": "manusa", "createdAt": "2020-02-25T15:30:32Z", "path": "jkube-kit/common/src/main/java/org/eclipse/jkube/kit/common/util/JkubeProjectUtil.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/**\n+ * Copyright (c) 2019 Red Hat, Inc.\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at:\n+ *\n+ *     https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Red Hat, Inc. - initial API and implementation\n+ */\n+package org.eclipse.jkube.kit.common.util;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.eclipse.jkube.kit.common.JkubeProject;\n+import org.eclipse.jkube.kit.common.JkubeProjectDependency;\n+import org.eclipse.jkube.kit.common.JkubeProjectPlugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.net.URLClassLoader;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Properties;\n+import java.util.function.Predicate;\n+\n+public class JkubeProjectUtil {\n+    private JkubeProjectUtil() { }\n+\n+    public static <T> Optional<T> iterateOverListWithCondition(List<T> dependencyList, Predicate<? super T> condition) {\n+        return dependencyList.stream().filter(condition).findFirst();\n+    }\n+\n+    public static String getAnyDependencyVersionWithGroupId(JkubeProject jkubeProject, String groupId) {\n+        Optional<JkubeProjectDependency> value = iterateOverListWithCondition(jkubeProject.getDependencies(),\n+                dependency -> dependency.getGroupId().equals(groupId));\n+\n+        return value.map(JkubeProjectDependency::getVersion).orElse(null);\n+    }\n+\n+    public static JkubeProjectPlugin getPlugin(JkubeProject jkubeProject, String groupId, String artifactId) {\n+        Optional<JkubeProjectPlugin> value = iterateOverListWithCondition(jkubeProject.getPlugins(),\n+                plugin -> plugin.getGroupId().equals(groupId) && plugin.getArtifactId().equals(artifactId));\n+        return value.orElse(null);\n+    }\n+\n+    public static JkubeProjectPlugin getPlugin(JkubeProject jkubeProject, String artifactId) {\n+        Optional<JkubeProjectPlugin> value = iterateOverListWithCondition(jkubeProject.getPlugins(),\n+                plugin -> plugin.getArtifactId().equals(artifactId));\n+        return value.orElse(null);\n+    }\n+\n+    public static boolean hasPlugin(JkubeProject jkubeProject, String groupId, String artifactId) {\n+        return getPlugin(jkubeProject, groupId, artifactId) != null;\n+    }\n+\n+    public static boolean hasPluginOfAnyArtifactId(JkubeProject jkubeProject, String artifactId) {\n+        return getPlugin(jkubeProject, artifactId) != null;\n+    }\n+\n+    public static boolean hasDependency(JkubeProject jkubeProject, String groupId, String artifactId) {\n+        return getDependency(jkubeProject, groupId, artifactId) != null;\n+    }\n+\n+    public static JkubeProjectDependency getDependency(JkubeProject jkubeProject, String groupId, String artifactId) {\n+        List<JkubeProjectDependency> dependencyList = jkubeProject.getDependencies();\n+        if (dependencyList != null) {\n+            Optional<JkubeProjectDependency> value = iterateOverListWithCondition(dependencyList,\n+                    dependency -> dependency.getGroupId().equals(groupId) && dependency.getArtifactId().equals(artifactId));\n+\n+            return value.orElse(null);\n+        }\n+        return null;\n+    }\n+\n+    public static boolean hasResource(JkubeProject project, String... paths) throws IOException {\n+        try (URLClassLoader compileClassLoader = ClassUtil.createClassLoader(project.getCompileClassPathElements(), project.getOutputDirectory())) {\n+            for (String path : paths) {\n+                try {\n+                    if (compileClassLoader.getResource(path) != null) {\n+                        return true;\n+                    }\n+                } catch (Exception e) {\n+                    throw new IOException(e);\n+                }\n+            }\n+        }\n+        return false;\n+    }\n+\n+    public static Properties getPropertiesWithSystemOverrides(JkubeProject project) {\n+        Properties properties = new Properties(project.getProperties());\n+        properties.putAll(System.getProperties());\n+        return properties;\n+    }\n+\n+    public static File getFinalOutputArtifact(JkubeProject jkubeProject) {\n+        String nameOfFinalArtifact;\n+        if (jkubeProject.getBuildFinalName() == null) {\n+            nameOfFinalArtifact = jkubeProject.getArtifactId() + \"-\"\n+                    + jkubeProject.getVersion() + \".\" + jkubeProject.getPackaging();\n+        } else {\n+            nameOfFinalArtifact = jkubeProject.getBuildFinalName() + \".\" + jkubeProject.getPackaging();\n+        }\n+        File outputDirectory = new File(jkubeProject.getBuildDirectory());\n+        File finalArtifact = new File(outputDirectory, nameOfFinalArtifact);\n+        return finalArtifact.exists() ? finalArtifact : null;\n+    }\n+\n+    public static String createDefaultResourceName(String artifactId, String ... suffixes) {\n+        String suffix = StringUtils.join(suffixes, \"-\");\n+        String ret = artifactId + (suffix.length() > 0 ? \"-\" + suffix : \"\");\n+        if (ret.length() > 63) {", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk1ODAyMQ==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r383958021", "bodyText": "Is this OK?\ngetArtifacts returns all dependencies in the project.\nJust to be sure, does getDependenciesWithTransitive return all dependencies too?", "author": "manusa", "createdAt": "2020-02-25T15:38:09Z", "path": "jkube-kit/enricher/api/src/main/java/org/eclipse/jkube/maven/enricher/api/JkubeEnricherContext.java", "diffHunk": "@@ -100,41 +93,26 @@ public GroupArtifactVersion getGav() {\n \n     @Override\n     public File getProjectDirectory() {\n-        return getProject().getBasedir();\n+        return getProject().getBaseDirectory();\n     }\n \n     @Override\n-    public List<Dependency> getDependencies(boolean transitive) {\n-        final Set<Artifact> artifacts = transitive ?\n-            getProject().getArtifacts() : getProject().getDependencyArtifacts();\n-\n-        final List<Dependency> dependencies = new ArrayList<>();\n-\n-        for (Artifact artifact : artifacts) {\n-            dependencies.add(\n-                new Dependency(new GroupArtifactVersion(artifact.getGroupId(),\n-                                                        artifact.getArtifactId(),\n-                                                        artifact.getVersion()),\n-                               artifact.getType(),\n-                               artifact.getScope(),\n-                               artifact.getFile()));\n-        }\n-\n-        return dependencies;\n+    public List<JkubeProjectDependency> getDependencies(boolean transitive) {\n+        return transitive ? getProject().getDependenciesWithTransitive() : getProject().getDependencies();", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk1MzkzNg==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384953936", "bodyText": "Umm, getDependencyArtifacts() returns direct dependencies", "author": "rohanKanojia", "createdAt": "2020-02-27T07:35:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk1ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk1NjM3Nw==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384956377", "bodyText": "I am using two objects which are set using getArtifacts() and getDependencyArtifacts(): \n  \n    \n      jkube/jkube-kit/common-maven/src/main/java/org/eclipse/jkube/kit/common/util/MavenUtil.java\n    \n    \n         Line 188\n      in\n      75cc07b\n    \n    \n    \n    \n\n        \n          \n           public static List<String> getDependenciesAsString(MavenProject project, boolean transitive) {", "author": "rohanKanojia", "createdAt": "2020-02-27T07:41:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk1ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk5Njg2OQ==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384996869", "bodyText": "I'm asking about the first case (transitive == true), and just to make sure.\nThe question is:  does getDependenciesWithTransitive return all dependencies too?\nI don't understand your answer, you mean that this call gets delegated to > getArtifacts()?", "author": "manusa", "createdAt": "2020-02-27T09:14:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk1ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAwMDg5Mg==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r385000892", "bodyText": "getDepenenciesWithTransitive() delegates to getArtifacts() (returns all dependencies)\ngetDependencies() delegates to getDependencyArtifacts() (returns direct dependencies)", "author": "rohanKanojia", "createdAt": "2020-02-27T09:22:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk1ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAwNjY1NA==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r385006654", "bodyText": "\ud83d\udc4d", "author": "manusa", "createdAt": "2020-02-27T09:32:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk1ODAyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI5NDMyNQ==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384294325", "bodyText": "Inconsistent with the code-style in the rest of the code base, check IDE settings.", "author": "manusa", "createdAt": "2020-02-26T06:23:14Z", "path": "jkube-kit/common-maven/src/main/java/org/eclipse/jkube/kit/common/util/MavenUtil.java", "diffHunk": "@@ -17,33 +17,39 @@\n import java.io.FileInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n-import java.net.MalformedURLException;\n-import java.net.URL;\n+import java.lang.reflect.Method;\n import java.net.URLClassLoader;\n-import java.util.ArrayList;\n-import java.util.Collection;\n-import java.util.List;\n-import java.util.Optional;\n-import java.util.Properties;\n-import java.util.Set;\n+import java.util.*;", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI5NTU0NA==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384295544", "bodyText": "No need to add throws IllegalStateException  it's a RuntimeException > remove from method signature.", "author": "manusa", "createdAt": "2020-02-26T06:27:54Z", "path": "jkube-kit/generator/java-exec/src/main/java/org/eclipse/jkube/generator/javaexec/FatJarDetector.java", "diffHunk": "@@ -36,7 +34,7 @@\n         this.directory = new File(dir);\n     }\n \n-    Result scan() throws MojoExecutionException {\n+    Result scan() throws IllegalStateException {", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI5NjI5MQ==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384296291", "bodyText": "Try to always use Collections.emptyList() (typed) instead of Collections.EMPTY_LIST (raw type)", "author": "manusa", "createdAt": "2020-02-26T06:30:57Z", "path": "jkube-kit/generator/java-exec/src/test/java/org/eclipse/jkube/generator/javaexec/JavaExecGeneratorMainClassDeterminationTest.java", "diffHunk": "@@ -63,25 +60,23 @@\n     @Before\n     public void setUp() throws Exception{\n         new Expectations() {{\n-            mavenProject.getBuild();\n-            result = build;\n-            mavenProject.getPlugin(anyString);\n-            result = null;\n-            mavenProject.getVersion();\n+            jkubeProject.getPlugins();\n+            result = Collections.EMPTY_LIST;", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMzNzIzMQ==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384337231", "bodyText": "Constant, please use correct letter-case: JKUBE_PLUGINS", "author": "manusa", "createdAt": "2020-02-26T08:32:23Z", "path": "jkube-kit/jkube-kit-vertx/src/main/java/org/eclipse/jkube/vertx/enricher/VertxHealthCheckEnricher.java", "diffHunk": "@@ -63,11 +63,11 @@ public String apply(@Nullable String input) {\n             return input == null ? null : input.trim();\n         }\n     };\n-    protected static final String[] jkubePlugins = {\"org.eclipse.jkube:k8s-maven-plugin\", \"org.eclipse.jkube:oc-maven-plugin\"};\n+    protected static final String[] jkubePlugins = {\"k8s-maven-plugin\", \"oc-maven-plugin\"};", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMzODY3OQ==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384338679", "bodyText": "Please, see other comments regarding specific POJOS for configuration entities and their deserialization.\nDeserializing something into a Map and then accessing keys through String will eventually end up in a very difficult to detect BUG.", "author": "manusa", "createdAt": "2020-02-26T08:35:30Z", "path": "jkube-kit/jkube-kit-vertx/src/main/java/org/eclipse/jkube/vertx/generator/VertxPortsExtractor.java", "diffHunk": "@@ -32,17 +34,21 @@ public String getConfigPathPropertyName() {\n     }\n \n     @Override\n-    public String getConfigPathFromProject(MavenProject project) {\n-        Plugin plugin = project.getPlugin(Constants.VERTX_MAVEN_PLUGIN_GROUP + \":\" + Constants.VERTX_MAVEN_PLUGIN_ARTIFACT);\n-        if (plugin == null) {\n-            return null;\n-        }\n+    public String getConfigPathFromProject(JkubeProject project) {\n+        JkubeProjectPlugin plugin = JkubeProjectUtil.getPlugin(project, Constants.VERTX_MAVEN_PLUGIN_GROUP, Constants.VERTX_MAVEN_PLUGIN_ARTIFACT);\n \n-        Xpp3Dom configuration = (Xpp3Dom) plugin.getConfiguration();\n-        if (configuration == null) {\n-            return null;\n+        if (plugin != null) {\n+            Map<String, Object> pluginConfiguration = plugin.getConfiguration();", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0MTc2Nw==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384341767", "bodyText": "Rename this variable", "author": "manusa", "createdAt": "2020-02-26T08:42:06Z", "path": "jkube-kit/resource/service/src/main/java/org/eclipse/jkube/kit/config/service/JkubeServiceHub.java", "diffHunk": "@@ -48,9 +47,7 @@\n \n     private BuildService.BuildServiceConfig buildServiceConfig;\n \n-    private RepositorySystem repositorySystem;\n-\n-    private MavenProject mavenProject;\n+    private JkubeProject mavenProject;", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0MTg3MA==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384341870", "bodyText": "Rename this variable too", "author": "manusa", "createdAt": "2020-02-26T08:42:20Z", "path": "jkube-kit/resource/service/src/main/java/org/eclipse/jkube/kit/config/service/JkubeServiceHub.java", "diffHunk": "@@ -154,12 +150,7 @@ public Builder buildServiceConfig(BuildService.BuildServiceConfig buildServiceCo\n             return this;\n         }\n \n-        public Builder repositorySystem(RepositorySystem repositorySystem) {\n-            hub.repositorySystem = repositorySystem;\n-            return this;\n-        }\n-\n-        public Builder mavenProject(MavenProject mavenProject) {\n+        public Builder jkubeProject(JkubeProject mavenProject) {", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0MzMzNQ==", "url": "https://github.com/eclipse/jkube/pull/47#discussion_r384343335", "bodyText": "Rename variable", "author": "manusa", "createdAt": "2020-02-26T08:45:12Z", "path": "jkube-kit/resource/service/src/test/java/org/eclipse/jkube/kit/config/service/JkubeServiceHubTest.java", "diffHunk": "@@ -48,10 +47,7 @@\n     private BuildService.BuildServiceConfig buildServiceConfig;\n \n     @Mocked\n-    private MavenProject mavenProject;\n-\n-    @Mocked\n-    private RepositorySystem repositorySystem;\n+    private JkubeProject mavenProject;", "originalCommit": "ea7a738d493e96953c2f6ec07727a198ac3aa707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "75cc07b3a796f7e60011e534be94429c84b0cb30", "url": "https://github.com/eclipse/jkube/commit/75cc07b3a796f7e60011e534be94429c84b0cb30", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-27T07:35:41Z", "type": "forcePushed"}, {"oid": "9264da6540cb15c6e4c09d9912a7432b083ea5af", "url": "https://github.com/eclipse/jkube/commit/9264da6540cb15c6e4c09d9912a7432b083ea5af", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-27T07:45:04Z", "type": "forcePushed"}, {"oid": "f3849e48473625b9ba00aedfd2ed4d7990346b75", "url": "https://github.com/eclipse/jkube/commit/f3849e48473625b9ba00aedfd2ed4d7990346b75", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-27T10:30:43Z", "type": "commit"}, {"oid": "f3849e48473625b9ba00aedfd2ed4d7990346b75", "url": "https://github.com/eclipse/jkube/commit/f3849e48473625b9ba00aedfd2ed4d7990346b75", "message": "Removed common-maven/ from build/ module\n\n+ Got rid of plexus dependency", "committedDate": "2020-02-27T10:30:43Z", "type": "forcePushed"}]}