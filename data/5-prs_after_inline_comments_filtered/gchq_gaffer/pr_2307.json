{"pr_number": 2307, "pr_title": "Gh 2306 fix serialisation issue", "pr_createdAt": "2020-09-16T09:36:08Z", "pr_url": "https://github.com/gchq/Gaffer/pull/2307", "timeline": [{"oid": "a97ea68bb2fb9ec75ca1737c52dc8a9d47bb1a5d", "url": "https://github.com/gchq/Gaffer/commit/a97ea68bb2fb9ec75ca1737c52dc8a9d47bb1a5d", "message": "gh-2306 fixed failing tests in federated store", "committedDate": "2020-09-15T09:29:00Z", "type": "commit"}, {"oid": "ed7672c678d9f2ffb6aff2bf0beef7c3d2719d96", "url": "https://github.com/gchq/Gaffer/commit/ed7672c678d9f2ffb6aff2bf0beef7c3d2719d96", "message": "gh-2306 improved serialisation logic for NamedOperationDetail", "committedDate": "2020-09-15T16:24:23Z", "type": "commit"}, {"oid": "0022baa66d616abe3b1c8ac36a77747077d92286", "url": "https://github.com/gchq/Gaffer/commit/0022baa66d616abe3b1c8ac36a77747077d92286", "message": "gh-2306 applied fix to NamedOperationDetail and FederatedAccess", "committedDate": "2020-09-16T07:53:21Z", "type": "commit"}, {"oid": "b76dfe2320b0987cfd4728119f1935c9ac7fbdd7", "url": "https://github.com/gchq/Gaffer/commit/b76dfe2320b0987cfd4728119f1935c9ac7fbdd7", "message": "Fixed tests and checkstyle", "committedDate": "2020-09-16T09:34:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA3NzgwOA==", "url": "https://github.com/gchq/Gaffer/pull/2307#discussion_r490077808", "bodyText": "This isn't used\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import com.google.common.collect.Maps;", "author": "m29827", "createdAt": "2020-09-17T08:49:13Z", "path": "core/data/src/main/java/uk/gov/gchq/gaffer/data/elementdefinition/view/NamedViewDetail.java", "diffHunk": "@@ -18,7 +18,10 @@\n \n import com.fasterxml.jackson.annotation.JsonIgnore;\n import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n import com.fasterxml.jackson.annotation.JsonPropertyOrder;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n+import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;\n import com.google.common.collect.Maps;", "originalCommit": "e31cff0ce6528c310d9acca6c113f1b4d5ac6d2f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA4MjkyNQ==", "url": "https://github.com/gchq/Gaffer/pull/2307#discussion_r490082925", "bodyText": "I just pushed up a commit that reverted the removal of the Maps.newHashMap() call so the import is now used", "author": "d47853", "createdAt": "2020-09-17T08:56:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA3NzgwOA=="}], "type": "inlineReview"}, {"oid": "154ec2712772f045bd510356030317bcf47ebd23", "url": "https://github.com/gchq/Gaffer/commit/154ec2712772f045bd510356030317bcf47ebd23", "message": "gh-2306 fixed tests", "committedDate": "2020-09-17T08:50:23Z", "type": "commit"}, {"oid": "154ec2712772f045bd510356030317bcf47ebd23", "url": "https://github.com/gchq/Gaffer/commit/154ec2712772f045bd510356030317bcf47ebd23", "message": "gh-2306 fixed tests", "committedDate": "2020-09-17T08:50:23Z", "type": "forcePushed"}, {"oid": "d7dd226ce73cf7e4fe2a27f3e41fced6152fd792", "url": "https://github.com/gchq/Gaffer/commit/d7dd226ce73cf7e4fe2a27f3e41fced6152fd792", "message": "gh-2306 fixed failing test", "committedDate": "2020-09-17T09:31:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEyOTc1NQ==", "url": "https://github.com/gchq/Gaffer/pull/2307#discussion_r490129755", "bodyText": "Maybe remove this\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    System.out.println(new String(JSONSerialiser.serialise(allowBlankUserAndTestUserReadAccess, true)));", "author": "m29827", "createdAt": "2020-09-17T10:12:21Z", "path": "store-implementation/federated-store/src/test/java/uk/gov/gchq/gaffer/federatedstore/operation/handler/impl/FederatedAddGraphWithHooksHandlerTest.java", "diffHunk": "@@ -388,10 +393,12 @@ public void shouldAddGraphWithCustomReadAccessPredicate() throws Exception {\n \n         assertEquals(0, store.getGraphs(testUser, null, ignore).size());\n \n-        final AccessPredicate allowBlankUserAndTestUserReadAccess = new AccessPredicate((user) -> {\n-            return user.getUserId().equals(blankUser.getUserId()) || user.getUserId().equals(testUser.getUserId());\n-        });\n+        final AccessPredicate allowBlankUserAndTestUserReadAccess = new AccessPredicate(new AdaptedPredicate(\n+                new CallMethod(\"getUserId\"),\n+                new Or<>(new IsEqual(testUser.getUserId()), new IsEqual(blankUser.getUserId()))\n+        ));\n \n+        System.out.println(new String(JSONSerialiser.serialise(allowBlankUserAndTestUserReadAccess, true)));", "originalCommit": "154ec2712772f045bd510356030317bcf47ebd23", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dc8d90e14b71029d59515d2881d47dda179a23d4", "url": "https://github.com/gchq/Gaffer/commit/dc8d90e14b71029d59515d2881d47dda179a23d4", "message": "Apply suggestions from code review\n\nCo-authored-by: m29827 <62667809+m29827@users.noreply.github.com>", "committedDate": "2020-09-17T11:01:11Z", "type": "commit"}, {"oid": "1a09daf9a1b994f5c9a372ff698c554fd364ca96", "url": "https://github.com/gchq/Gaffer/commit/1a09daf9a1b994f5c9a372ff698c554fd364ca96", "message": "Merge branch 'develop' into gh-2306-fix-serialisation-issue", "committedDate": "2020-09-17T11:02:42Z", "type": "commit"}, {"oid": "917105ce03d238e0ffc1906b745540216d1e9db2", "url": "https://github.com/gchq/Gaffer/commit/917105ce03d238e0ffc1906b745540216d1e9db2", "message": "gh-2306 removed unused import", "committedDate": "2020-09-17T11:29:47Z", "type": "commit"}]}