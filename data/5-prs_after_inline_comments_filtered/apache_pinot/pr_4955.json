{"pr_number": 4955, "pr_title": "Fix the client id to be topic and partition", "pr_createdAt": "2020-01-02T22:12:52Z", "pr_url": "https://github.com/apache/pinot/pull/4955", "timeline": [{"oid": "eb8fc579f2b31bd0bcd5b83da8536e46ec3dd6e3", "url": "https://github.com/apache/pinot/commit/eb8fc579f2b31bd0bcd5b83da8536e46ec3dd6e3", "message": "Fix the client id to be topic and partition\n\nThis is a possible backward-incompatible change with metrics and monitoring\nsystems.\n\nEarlier client id was set to partition ID and host name, causing collision\nif there are different topics being consumed on any host running pinot realtime\nconsumer.\n\nIf a pinot installation uses the metrics generated by Kafka, then the alerting\nand monitoring system should move to use the new client ID in metric names,\nif any.\n\nMetrics generated by Pinot do not use client ID, so no change is required for\nfor any pinot metrics being monitored.", "committedDate": "2020-01-02T22:05:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY1MTE4OA==", "url": "https://github.com/apache/pinot/pull/4955#discussion_r362651188", "bodyText": "nit: one extra space between + and \"-\"", "author": "jackjlli", "createdAt": "2020-01-02T22:17:55Z", "path": "pinot-core/src/main/java/org/apache/pinot/core/data/manager/realtime/LLRealtimeSegmentDataManager.java", "diffHunk": "@@ -1103,7 +1102,7 @@ public LLRealtimeSegmentDataManager(RealtimeSegmentZKMetadata segmentZKMetadata,\n \n     // Create message decoder\n     _messageDecoder = StreamDecoderProvider.create(_partitionLevelStreamConfig, _schema);\n-    _clientId = _streamPartitionId + \"-\" + NetUtil.getHostnameOrAddress();\n+    _clientId = _streamTopic +  \"-\" + _streamPartitionId;", "originalCommit": "eb8fc579f2b31bd0bcd5b83da8536e46ec3dd6e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2c842c49ab8e0f2ca332d52936ac7fff75c794dc", "url": "https://github.com/apache/pinot/commit/2c842c49ab8e0f2ca332d52936ac7fff75c794dc", "message": "Remove extra space", "committedDate": "2020-01-02T22:20:27Z", "type": "commit"}]}