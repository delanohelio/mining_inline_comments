{"pr_number": 5836, "pr_title": "Fix data ingestion from Amazon S3 bucket", "pr_createdAt": "2020-08-10T09:43:12Z", "pr_url": "https://github.com/apache/pinot/pull/5836", "timeline": [{"oid": "c462e61bbb9e27c159014f278539a3ebd75c6c91", "url": "https://github.com/apache/pinot/commit/c462e61bbb9e27c159014f278539a3ebd75c6c91", "message": "return full paths along with scheme in listFiles", "committedDate": "2020-08-10T09:32:12Z", "type": "commit"}, {"oid": "ff999f65757ecbb46334a5d615fe379817a7d668", "url": "https://github.com/apache/pinot/commit/ff999f65757ecbb46334a5d615fe379817a7d668", "message": "take only path instead of URI to create local file", "committedDate": "2020-08-10T09:32:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA2ODczNQ==", "url": "https://github.com/apache/pinot/pull/5836#discussion_r468068735", "bodyText": "nit: if (fileKey.startsWith(DELIMITER)) {", "author": "xiangfu0", "createdAt": "2020-08-10T17:37:46Z", "path": "pinot-plugins/pinot-file-system/pinot-s3/src/main/java/org/apache/pinot/plugin/filesystem/S3PinotFS.java", "diffHunk": "@@ -391,7 +393,11 @@ public long length(URI fileUri)\n       listObjectsV2Response.contents().stream().forEach(object -> {\n         //Only add files and not directories\n         if (!object.key().equals(fileUri.getPath()) && !object.key().endsWith(DELIMITER)) {\n-          builder.add(object.key());\n+          String fileKey = object.key();\n+          if(fileKey.startsWith(DELIMITER)){", "originalCommit": "ff999f65757ecbb46334a5d615fe379817a7d668", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQwNjQxNQ==", "url": "https://github.com/apache/pinot/pull/5836#discussion_r468406415", "bodyText": "does it look fine now?", "author": "KKcorps", "createdAt": "2020-08-11T08:17:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA2ODczNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE0ODQ1MQ==", "url": "https://github.com/apache/pinot/pull/5836#discussion_r468148451", "bodyText": "do we need those imports?", "author": "xiangfu0", "createdAt": "2020-08-10T20:00:26Z", "path": "pinot-plugins/pinot-file-system/pinot-s3/src/test/java/org/apache/pinot/plugin/filesystem/S3PinotFSTest.java", "diffHunk": "@@ -28,12 +28,16 @@\n import java.util.Arrays;\n import java.util.List;\n import org.apache.commons.io.IOUtils;\n+import org.apache.pinot.spi.env.PinotConfiguration;", "originalCommit": "ff999f65757ecbb46334a5d615fe379817a7d668", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQwNjMwNA==", "url": "https://github.com/apache/pinot/pull/5836#discussion_r468406304", "bodyText": "Removed unused imports.", "author": "KKcorps", "createdAt": "2020-08-11T08:17:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE0ODQ1MQ=="}], "type": "inlineReview"}, {"oid": "4deddbf9776942478e39a78a1eae1f2dd16468cc", "url": "https://github.com/apache/pinot/commit/4deddbf9776942478e39a78a1eae1f2dd16468cc", "message": "removing unused imports from test", "committedDate": "2020-08-11T08:07:47Z", "type": "commit"}, {"oid": "80c96931265d25deca24463eac975a305a143b67", "url": "https://github.com/apache/pinot/commit/80c96931265d25deca24463eac975a305a143b67", "message": "formatting fix", "committedDate": "2020-08-11T08:10:42Z", "type": "commit"}]}