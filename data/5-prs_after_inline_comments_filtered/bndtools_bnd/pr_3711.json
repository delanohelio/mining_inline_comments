{"pr_number": 3711, "pr_title": "[jareditor] JarEditor Temp project support", "pr_createdAt": "2020-01-13T14:57:42Z", "pr_url": "https://github.com/bndtools/bnd/pull/3711", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg1ODc5Mw==", "url": "https://github.com/bndtools/bnd/pull/3711#discussion_r365858793", "bodyText": "Why do you need the non-null filter? The Class.isInstance will already filter out null values.", "author": "bjhargrave", "createdAt": "2020-01-13T15:16:53Z", "path": "bndtools.jareditor/src/bndtools/jareditor/internal/TemporaryProjectFilter.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package bndtools.jareditor.internal;\n+\n+import java.util.Objects;\n+import java.util.Optional;\n+\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.jdt.core.IJavaProject;\n+import org.eclipse.jface.viewers.Viewer;\n+import org.eclipse.jface.viewers.ViewerFilter;\n+\n+public class TemporaryProjectFilter extends ViewerFilter {\n+\n+\t@Override\n+\tpublic boolean select(Viewer viewer, Object parentElement, Object element) {\n+\t\tif (element instanceof IJavaProject) {\n+\t\t\telement = ((IJavaProject) element).getProject();\n+\t\t}\n+\n+\t\treturn !Optional.ofNullable(element)\n+\t\t\t.filter(IProject.class::isInstance)\n+\t\t\t.map(IProject.class::cast)\n+\t\t\t.filter(Objects::nonNull)", "originalCommit": "1afe6e188c4198bfa9a71cc8af154644983eccd8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2NzkzOQ==", "url": "https://github.com/bndtools/bnd/pull/3711#discussion_r365867939", "bodyText": "Good point, I can remove it.", "author": "gamerson", "createdAt": "2020-01-13T15:33:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg1ODc5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg1OTY2Mg==", "url": "https://github.com/bndtools/bnd/pull/3711#discussion_r365859662", "bodyText": "Perhaps Bndtools should be in the name so people can associate seeing this with Bndtools?", "author": "bjhargrave", "createdAt": "2020-01-13T15:18:23Z", "path": "bndtools.jareditor/src/bndtools/jareditor/internal/TemporaryProject.java", "diffHunk": "@@ -0,0 +1,133 @@\n+package bndtools.jareditor.internal;\n+\n+import org.eclipse.core.resources.IContainer;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IProjectDescription;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.IWorkspaceRoot;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.IPath;\n+import org.eclipse.core.runtime.IProgressMonitor;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.SubMonitor;\n+import org.eclipse.jdt.core.IClasspathEntry;\n+import org.eclipse.jdt.core.IJavaProject;\n+import org.eclipse.jdt.core.JavaCore;\n+import org.eclipse.jdt.core.JavaModelException;\n+import org.eclipse.jdt.launching.JavaRuntime;\n+\n+public class TemporaryProject {\n+\n+\tpublic static final String PROJECT_NAME = \"JAREditorTempFiles\";", "originalCommit": "1afe6e188c4198bfa9a71cc8af154644983eccd8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2ODQ3Ng==", "url": "https://github.com/bndtools/bnd/pull/3711#discussion_r365868476", "bodyText": "Agreed, that would let people know where it is coming from when they encounter it.", "author": "gamerson", "createdAt": "2020-01-13T15:34:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg1OTY2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2MDcwMA==", "url": "https://github.com/bndtools/bnd/pull/3711#discussion_r365860700", "bodyText": "I don't see where this private method selectProject is ever called.", "author": "bjhargrave", "createdAt": "2020-01-13T15:20:14Z", "path": "bndtools.jareditor/src/bndtools/jareditor/internal/TemporaryFile.java", "diffHunk": "@@ -63,7 +64,14 @@\n \t\t}\n \t}\n \n-\tprivate static Result<IFolder, String> select() throws CoreException, IOException {\n+\tprivate static Result<IFolder, String> selectTempProject() throws CoreException, IOException {\n+\t\tIProject project = tempProject.getJavaProject()\n+\t\t\t.getProject();\n+\n+\t\treturn Result.ok(project.getFolder(\"temp\"));\n+\t}\n+\n+\tprivate static Result<IFolder, String> selectProject() throws CoreException, IOException {", "originalCommit": "1afe6e188c4198bfa9a71cc8af154644983eccd8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2OTE0NA==", "url": "https://github.com/bndtools/bnd/pull/3711#discussion_r365869144", "bodyText": "It can be removed, I just left it in case we needed both mechanisms for some reason.", "author": "gamerson", "createdAt": "2020-01-13T15:35:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2MDcwMA=="}], "type": "inlineReview"}, {"oid": "40b7a928d35bd38070cc0cbe6545b8069b913e14", "url": "https://github.com/bndtools/bnd/commit/40b7a928d35bd38070cc0cbe6545b8069b913e14", "message": "[jareditor] Use workbench label provider to show standard icons\n\nSigned-off-by: Gregory Amerson <gregory.amerson@liferay.com>", "committedDate": "2020-01-13T17:08:22Z", "type": "commit"}, {"oid": "1ec7cc188915c845e06e02f6e29551c7f363b683", "url": "https://github.com/bndtools/bnd/commit/1ec7cc188915c845e06e02f6e29551c7f363b683", "message": "[jareditor] add support project for temp files instead of using linked folders\n\nSigned-off-by: Gregory Amerson <gregory.amerson@liferay.com>", "committedDate": "2020-01-13T17:09:12Z", "type": "commit"}, {"oid": "66df637c3af46ae06ffcdb3157602e4dea772b0b", "url": "https://github.com/bndtools/bnd/commit/66df637c3af46ae06ffcdb3157602e4dea772b0b", "message": "[jareditor] add jareditor temp projects to test repos\n\nSigned-off-by: Gregory Amerson <gregory.amerson@liferay.com>", "committedDate": "2020-01-13T17:10:24Z", "type": "commit"}, {"oid": "66df637c3af46ae06ffcdb3157602e4dea772b0b", "url": "https://github.com/bndtools/bnd/commit/66df637c3af46ae06ffcdb3157602e4dea772b0b", "message": "[jareditor] add jareditor temp projects to test repos\n\nSigned-off-by: Gregory Amerson <gregory.amerson@liferay.com>", "committedDate": "2020-01-13T17:10:24Z", "type": "forcePushed"}]}