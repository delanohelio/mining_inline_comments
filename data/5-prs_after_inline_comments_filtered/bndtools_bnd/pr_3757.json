{"pr_number": 3757, "pr_title": "Pkriens/diverse", "pr_createdAt": "2020-02-03T11:31:07Z", "pr_url": "https://github.com/bndtools/bnd/pull/3757", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA4NTYxNw==", "url": "https://github.com/bndtools/bnd/pull/3757#discussion_r374085617", "bodyText": "You should close this HttpClient. The old code does this.", "author": "bjhargrave", "createdAt": "2020-02-03T12:54:23Z", "path": "org.bndtools.templating.gitrepo/src/org/bndtools/templating/jgit/Cache.java", "diffHunk": "@@ -10,14 +10,21 @@\n import aQute.bnd.service.url.TaggedData;\n import aQute.lib.io.IO;\n import aQute.libg.tuple.Pair;\n+import bndtools.central.Central;\n \n public class Cache {\n \n     private final ConcurrentMap<URI, Pair<String, byte[]>> cache = new ConcurrentHashMap<>();\n \n-    public byte[] download(URI uri) throws IOException {\n+\tpublic byte[] download(URI uri) throws Exception {\n         byte[] data;\n-        try (HttpClient client = new HttpClient()) {\n+\t\ttry {\n+\t\t\tHttpClient client = Central.getWorkspace()\n+\t\t\t\t.getPlugin(HttpClient.class);\n+\n+\t\t\tif (client == null)\n+\t\t\t\tclient = new HttpClient();", "originalCommit": "f650796cf4a0165b1c70b548fb4d8ca829591062", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODcxMzk5Mg==", "url": "https://github.com/bndtools/bnd/pull/3757#discussion_r378713992", "bodyText": "I've removed it, it must be there always", "author": "pkriens", "createdAt": "2020-02-13T08:33:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA4NTYxNw=="}], "type": "inlineReview"}, {"oid": "7d1076d51cbcddec7658292326bdf6f5913852dc", "url": "https://github.com/bndtools/bnd/commit/7d1076d51cbcddec7658292326bdf6f5913852dc", "message": "[ui] Remove retina warning\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>", "committedDate": "2020-02-13T07:38:37Z", "type": "commit"}, {"oid": "396832dae8d053840877c542a8a9277d14a9cb86", "url": "https://github.com/bndtools/bnd/commit/396832dae8d053840877c542a8a9277d14a9cb86", "message": "[runtime] Made tables more readable by turning edges in spaces\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>", "committedDate": "2020-02-13T07:38:37Z", "type": "commit"}, {"oid": "a02e37ac5f2ba72bcb908db7ed2795dff416d472", "url": "https://github.com/bndtools/bnd/commit/a02e37ac5f2ba72bcb908db7ed2795dff416d472", "message": "[doc] GLOB table fixed\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>", "committedDate": "2020-02-13T07:38:37Z", "type": "commit"}, {"oid": "fca3068e2508d17de3d0dd4e438ff0e83b8bc0d4", "url": "https://github.com/bndtools/bnd/commit/fca3068e2508d17de3d0dd4e438ff0e83b8bc0d4", "message": "[templates] Fixed Workspace Templates\n\n- The existing template used a branch that did not exist, fixed to default.\n- Added the new min workspace\n\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>", "committedDate": "2020-02-13T07:38:37Z", "type": "commit"}, {"oid": "77a8568ba63d030a4275f77bfdf2686193b5f916", "url": "https://github.com/bndtools/bnd/commit/77a8568ba63d030a4275f77bfdf2686193b5f916", "message": "[templates] The Http Client in the Github cache was unconnected\n\nThe Github cache created an Http Client out of the blue. Made\nit use the one from the workspace.\n\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>", "committedDate": "2020-02-13T07:38:37Z", "type": "commit"}, {"oid": "77a8568ba63d030a4275f77bfdf2686193b5f916", "url": "https://github.com/bndtools/bnd/commit/77a8568ba63d030a4275f77bfdf2686193b5f916", "message": "[templates] The Http Client in the Github cache was unconnected\n\nThe Github cache created an Http Client out of the blue. Made\nit use the one from the workspace.\n\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>", "committedDate": "2020-02-13T07:38:37Z", "type": "forcePushed"}]}