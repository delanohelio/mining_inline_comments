{"pr_number": 1368, "pr_title": "Logging dig difinition fetched by http_call> operator", "pr_createdAt": "2020-02-28T02:25:43Z", "pr_url": "https://github.com/treasure-data/digdag/pull/1368", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU5NjgzNg==", "url": "https://github.com/treasure-data/digdag/pull/1368#discussion_r385596836", "bodyText": "I am afraid of increasing server log.  If max response size is big, this log is also big.", "author": "yoyama", "createdAt": "2020-02-28T09:42:59Z", "path": "digdag-standards/src/main/java/io/digdag/standards/operator/HttpCallOperatorFactory.java", "diffHunk": "@@ -133,6 +133,8 @@ public TaskResult runTask()\n \n             // parse content based on response media type\n             String digFileSource = reformatDigFile(content, response.getMediaType(), mediaTypeOverride);\n+            // write workflow definition to log\n+            logger.info(\"Fetched definition for http_call>:\\n{}\", digFileSource);", "originalCommit": "454028bb61e46b292035edcc35a45a83ad4b0dc7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE3MDg1MA==", "url": "https://github.com/treasure-data/digdag/pull/1368#discussion_r386170850", "bodyText": "@yoyama Thank you for comment.\nEven if config.http_call.max_response_content_size is too large, I assume log string size could not be a problem, because the log string will be out through TaskLogger and its implementations have some mechanisms to handle huge amount of log strings.\nIn addition, other factories possible to write large volume logs, for instance, TdOperatorFactory writes query statement that may be large.", "author": "petitviolet", "createdAt": "2020-03-02T02:14:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU5NjgzNg=="}], "type": "inlineReview"}, {"oid": "a16c788e16ef7fce30179ff13e27cc978c15e252", "url": "https://github.com/treasure-data/digdag/commit/a16c788e16ef7fce30179ff13e27cc978c15e252", "message": "Logging dig difinition fetched by http_call> operator\n\nTo make debugging easier, logging digdag definition which is fetched by `http_call>` operator.\nAlso added a test case for `HttpCallOperatorFactory` to confirm added logging works as expected.\n\nFor example, the log looks like:\n```\n11:09:25.035 [Test worker] INFO  i.d.s.o.HttpCallOperatorFactory - Fetched definition for http_call>:\n+sample:\n  echo>: 'hello'\n```", "committedDate": "2020-03-31T07:24:38Z", "type": "commit"}, {"oid": "a16c788e16ef7fce30179ff13e27cc978c15e252", "url": "https://github.com/treasure-data/digdag/commit/a16c788e16ef7fce30179ff13e27cc978c15e252", "message": "Logging dig difinition fetched by http_call> operator\n\nTo make debugging easier, logging digdag definition which is fetched by `http_call>` operator.\nAlso added a test case for `HttpCallOperatorFactory` to confirm added logging works as expected.\n\nFor example, the log looks like:\n```\n11:09:25.035 [Test worker] INFO  i.d.s.o.HttpCallOperatorFactory - Fetched definition for http_call>:\n+sample:\n  echo>: 'hello'\n```", "committedDate": "2020-03-31T07:24:38Z", "type": "forcePushed"}]}