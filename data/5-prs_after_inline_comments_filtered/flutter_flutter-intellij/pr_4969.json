{"pr_number": 4969, "pr_title": "Show option to open browser DevTools on general download failure", "pr_createdAt": "2020-10-15T23:19:51Z", "pr_url": "https://github.com/flutter/flutter-intellij/pull/4969", "timeline": [{"oid": "6c1385a54259937004a0a9e1bdc7c06fea707132", "url": "https://github.com/flutter/flutter-intellij/commit/6c1385a54259937004a0a9e1bdc7c06fea707132", "message": "Show option to open browser DevTools on general download failure", "committedDate": "2020-10-15T23:11:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjYyODQ3Mg==", "url": "https://github.com/flutter/flutter-intellij/pull/4969#discussion_r506628472", "bodyText": "Retry installation ?", "author": "devoncarew", "createdAt": "2020-10-16T17:42:32Z", "path": "src/io/flutter/view/FlutterView.java", "diffHunk": "@@ -462,27 +463,33 @@ else if (newStatus.equals(JxBrowserStatus.INSTALLATION_FAILED)) {\n     catch (TimeoutException e) {\n       // TODO(helin24): Are there better options for this case? e.g. stop installation and retry, link to open in browser?\n       presentLabel(toolWindow, INSTALLATION_TIMED_OUT_LABEL);\n-      FlutterInitializer.getAnalytics().sendEvent(\"jxbrowser\", \"timedOut\");\n+      FlutterInitializer.getAnalytics().sendEvent(JxBrowserManager.ANALYTICS_CATEGORY, \"timedOut\");\n     }\n   }\n \n   protected void handleJxBrowserInstallationFailed(FlutterApp app, InspectorService inspectorService, ToolWindow toolWindow) {\n+    final List<LabelInput> inputs = new ArrayList<>();\n+\n     if (!JxBrowserUtils.licenseIsSet()) {\n       // If the license isn't available, allow the user to open the equivalent page in a non-embedded browser window.\n-      presentClickableLabel(\n-        toolWindow, \"The JxBrowser license could not be found.\", \"Open DevTools in the browser?\",\n-        (linkLabel, data) -> {\n-          presentDevTools(app, inspectorService, toolWindow, false);\n-        });\n+      inputs.add(new LabelInput(\"The JxBrowser license could not be found.\"));\n+      inputs.add(new LabelInput(\"Open DevTools in the browser?\", (linkLabel, data) -> {\n+        presentDevTools(app, inspectorService, toolWindow, false);\n+      }));\n     }\n     else {\n-      // Allow the user to manually restart.\n-      presentClickableLabel(\n-        toolWindow, \"JxBrowser installation failed.\", \"Retry?\", (linkLabel, data) -> {\n-          JxBrowserManager.getInstance().retryFromFailed(app.getProject());\n-          handleJxBrowserInstallationInProgress(app, inspectorService, toolWindow);\n-        });\n+      // Allow the user to manually restart or open the equivalent page in a non-embedded browser window.\n+      inputs.add(new LabelInput(\"JxBrowser installation failed.\"));\n+      inputs.add(new LabelInput(\"Retry?\", (linkLabel, data) -> {", "originalCommit": "6c1385a54259937004a0a9e1bdc7c06fea707132", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjYyODY0Ng==", "url": "https://github.com/flutter/flutter-intellij/pull/4969#discussion_r506628646", "bodyText": "Open DevTools in a browser  ?", "author": "devoncarew", "createdAt": "2020-10-16T17:42:50Z", "path": "src/io/flutter/view/FlutterView.java", "diffHunk": "@@ -462,27 +463,33 @@ else if (newStatus.equals(JxBrowserStatus.INSTALLATION_FAILED)) {\n     catch (TimeoutException e) {\n       // TODO(helin24): Are there better options for this case? e.g. stop installation and retry, link to open in browser?\n       presentLabel(toolWindow, INSTALLATION_TIMED_OUT_LABEL);\n-      FlutterInitializer.getAnalytics().sendEvent(\"jxbrowser\", \"timedOut\");\n+      FlutterInitializer.getAnalytics().sendEvent(JxBrowserManager.ANALYTICS_CATEGORY, \"timedOut\");\n     }\n   }\n \n   protected void handleJxBrowserInstallationFailed(FlutterApp app, InspectorService inspectorService, ToolWindow toolWindow) {\n+    final List<LabelInput> inputs = new ArrayList<>();\n+\n     if (!JxBrowserUtils.licenseIsSet()) {\n       // If the license isn't available, allow the user to open the equivalent page in a non-embedded browser window.\n-      presentClickableLabel(\n-        toolWindow, \"The JxBrowser license could not be found.\", \"Open DevTools in the browser?\",\n-        (linkLabel, data) -> {\n-          presentDevTools(app, inspectorService, toolWindow, false);\n-        });\n+      inputs.add(new LabelInput(\"The JxBrowser license could not be found.\"));\n+      inputs.add(new LabelInput(\"Open DevTools in the browser?\", (linkLabel, data) -> {\n+        presentDevTools(app, inspectorService, toolWindow, false);\n+      }));\n     }\n     else {\n-      // Allow the user to manually restart.\n-      presentClickableLabel(\n-        toolWindow, \"JxBrowser installation failed.\", \"Retry?\", (linkLabel, data) -> {\n-          JxBrowserManager.getInstance().retryFromFailed(app.getProject());\n-          handleJxBrowserInstallationInProgress(app, inspectorService, toolWindow);\n-        });\n+      // Allow the user to manually restart or open the equivalent page in a non-embedded browser window.\n+      inputs.add(new LabelInput(\"JxBrowser installation failed.\"));\n+      inputs.add(new LabelInput(\"Retry?\", (linkLabel, data) -> {\n+        JxBrowserManager.getInstance().retryFromFailed(app.getProject());\n+        handleJxBrowserInstallationInProgress(app, inspectorService, toolWindow);\n+      }));\n+      inputs.add(new LabelInput(\"Alternatively, open Devtools in the browser.\", (linkLabel, data) -> {", "originalCommit": "6c1385a54259937004a0a9e1bdc7c06fea707132", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3916a7c43905eca73bebb1f37aa9730217092c77", "url": "https://github.com/flutter/flutter-intellij/commit/3916a7c43905eca73bebb1f37aa9730217092c77", "message": "Edit wording", "committedDate": "2020-10-16T18:13:23Z", "type": "commit"}]}