{"pr_number": 967, "pr_title": "BXC-2641/2642 - Tombstone updates", "pr_createdAt": "2020-04-28T15:08:28Z", "pr_url": "https://github.com/UNC-Libraries/box-c/pull/967", "timeline": [{"oid": "4272773e767e08998c7d2a6cb511377f549c4514", "url": "https://github.com/UNC-Libraries/box-c/commit/4272773e767e08998c7d2a6cb511377f549c4514", "message": "Retain memberOf relationship for tombstones", "committedDate": "2020-04-27T19:57:26Z", "type": "commit"}, {"oid": "77281e36b68a9552201d25552a8e4d20ae6bf957", "url": "https://github.com/UNC-Libraries/box-c/commit/77281e36b68a9552201d25552a8e4d20ae6bf957", "message": "Avoid indexing tombstones", "committedDate": "2020-04-27T19:57:52Z", "type": "commit"}, {"oid": "25440e50225c20870277c32126298b408bffa078", "url": "https://github.com/UNC-Libraries/box-c/commit/25440e50225c20870277c32126298b408bffa078", "message": "Treat permissions to view tombstones the same as marked for deletion. Tombstones are now content objects.", "committedDate": "2020-04-28T12:51:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU0Mzc0Ng==", "url": "https://github.com/UNC-Libraries/box-c/pull/967#discussion_r417543746", "bodyText": "Does this need another set of () around it?", "author": "lfarrell", "createdAt": "2020-04-29T19:02:27Z", "path": "fcrepo-clients/src/main/java/edu/unc/lib/dl/acl/fcrepo4/ObjectAclFactory.java", "diffHunk": "@@ -200,7 +205,8 @@ public void setRepositoryObjectCacheLoader(RepositoryObjectCacheLoader repositor\n             while (it.hasNext()) {\n                 Statement stmt = it.next();\n                 Property property = stmt.getPredicate();\n-                if (CdrAcl.NS.equals(property.getNameSpace())) {\n+                if (CdrAcl.NS.equals(property.getNameSpace())\n+                        || RDF.type.equals(property) && Cdr.Tombstone.equals(stmt.getResource())) {", "originalCommit": "25440e50225c20870277c32126298b408bffa078", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU2MDg2MQ==", "url": "https://github.com/UNC-Libraries/box-c/pull/967#discussion_r417560861", "bodyText": "hmm, yeah that would be safest. In java && takes precedence over || so it'd be evaluated first, which I guess is why this worked, but it'd be safer to group it", "author": "bbpennel", "createdAt": "2020-04-29T19:33:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU0Mzc0Ng=="}], "type": "inlineReview"}, {"oid": "80a6d12cbfe67a3688ddd6f9bd76ff0ee3a43747", "url": "https://github.com/UNC-Libraries/box-c/commit/80a6d12cbfe67a3688ddd6f9bd76ff0ee3a43747", "message": "Add parentheses", "committedDate": "2020-04-29T19:35:15Z", "type": "commit"}]}