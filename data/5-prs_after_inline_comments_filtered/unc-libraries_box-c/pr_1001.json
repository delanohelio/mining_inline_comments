{"pr_number": 1001, "pr_title": "Make sure id is lowercase for migrations.", "pr_createdAt": "2020-05-29T14:13:34Z", "pr_url": "https://github.com/UNC-Libraries/box-c/pull/1001", "timeline": [{"oid": "d7db809e6df549494620400c707c7f1df64f6b31", "url": "https://github.com/UNC-Libraries/box-c/commit/d7db809e6df549494620400c707c7f1df64f6b31", "message": "Make sure id is lowercase.", "committedDate": "2020-05-29T14:03:14Z", "type": "commit"}, {"oid": "5dd0c0ad72f7f2f7e02af14e6953e99692ca4c4b", "url": "https://github.com/UNC-Libraries/box-c/commit/5dd0c0ad72f7f2f7e02af14e6953e99692ca4c4b", "message": "Add test for uppercase uuids", "committedDate": "2020-05-29T14:52:40Z", "type": "commit"}, {"oid": "180d9d277c334d19f9abf4b6035cc9f0f14dc7d5", "url": "https://github.com/UNC-Libraries/box-c/commit/180d9d277c334d19f9abf4b6035cc9f0f14dc7d5", "message": "Allow uppercase UUIDs", "committedDate": "2020-05-29T18:20:28Z", "type": "commit"}, {"oid": "fb1ea7690263a85b819cb12b6b8dee9f00409f1e", "url": "https://github.com/UNC-Libraries/box-c/commit/fb1ea7690263a85b819cb12b6b8dee9f00409f1e", "message": "Transform bxc3 pids to lowercase", "committedDate": "2020-06-01T14:33:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5MDcyOQ==", "url": "https://github.com/UNC-Libraries/box-c/pull/1001#discussion_r433290729", "bodyText": "this line can be removed", "author": "bbpennel", "createdAt": "2020-06-01T15:06:51Z", "path": "migration-util/src/main/java/edu/unc/lib/dcr/migration/deposit/DepositRecordTransformer.java", "diffHunk": "@@ -152,6 +153,7 @@ protected void compute() {\n     }\n \n     private boolean isDepositRecord(Resource bxc3Resc) {\n+        PIDs.get(bxc3Resc.toString().toLowerCase());", "originalCommit": "fb1ea7690263a85b819cb12b6b8dee9f00409f1e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5MTEzNg==", "url": "https://github.com/UNC-Libraries/box-c/pull/1001#discussion_r433291136", "bodyText": "The behavior of this method is very specific to RELS-EXT now, so it should probably be renamed to convertRelsExtToStream", "author": "bbpennel", "createdAt": "2020-06-01T15:07:33Z", "path": "migration-util/src/main/java/edu/unc/lib/dcr/migration/fcrepo3/FoxmlDocumentHelpers.java", "diffHunk": "@@ -130,7 +131,25 @@ public static String getFoxmlPid(Document foxml) {\n     public static InputStream convertElementToStream(Element el) throws IOException {", "originalCommit": "fb1ea7690263a85b819cb12b6b8dee9f00409f1e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5MjU3Mg==", "url": "https://github.com/UNC-Libraries/box-c/pull/1001#discussion_r433292572", "bodyText": "For the sake of consistency, use getId() instead of getUUID(), since you are doing that for the other lowercase calls.", "author": "bbpennel", "createdAt": "2020-06-01T15:10:02Z", "path": "migration-util/src/main/java/edu/unc/lib/dcr/migration/deposit/DepositRecordTransformationService.java", "diffHunk": "@@ -75,7 +75,8 @@ public int perform(Path pidListPath, String destLocId) {\n     }\n \n     public PID getTransformedPid(PID originalPid) {\n-        return generateIds ? pidMinter.mintDepositRecordPid() : originalPid;\n+        return generateIds ? pidMinter.mintDepositRecordPid() : PIDs.get(DEPOSIT_RECORD_BASE,\n+                originalPid.getUUID().toLowerCase());", "originalCommit": "fb1ea7690263a85b819cb12b6b8dee9f00409f1e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d89b02944912c54956612546b944f3559c53aa45", "url": "https://github.com/UNC-Libraries/box-c/commit/d89b02944912c54956612546b944f3559c53aa45", "message": "Rename methods and remove redundant code lines", "committedDate": "2020-06-08T12:52:32Z", "type": "commit"}]}