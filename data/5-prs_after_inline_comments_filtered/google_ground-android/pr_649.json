{"pr_number": 649, "pr_title": "Restore map position and zoom level on configuration change.", "pr_createdAt": "2020-12-17T17:28:13Z", "pr_url": "https://github.com/google/ground-android/pull/649", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg0OTk3OQ==", "url": "https://github.com/google/ground-android/pull/649#discussion_r545849979", "bodyText": "Please add copyright header.", "author": "gino-m", "createdAt": "2020-12-18T14:03:38Z", "path": "gnd/src/main/java/com/google/android/gnd/ui/map/GroundCameraPosition.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.google.android.gnd.ui.map;", "originalCommit": "65a27d88824e1e89e69b8908f8da7bbc61556ef6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1MDUyNA==", "url": "https://github.com/google/ground-android/pull/649#discussion_r545850524", "bodyText": "We haven't been prefixing classes with Ground since the package name sufficiently disambiguates. Could we use CameraPosition instead?", "author": "gino-m", "createdAt": "2020-12-18T14:04:37Z", "path": "gnd/src/main/java/com/google/android/gnd/ui/map/GroundCameraPosition.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.google.android.gnd.ui.map;\n+\n+import com.google.android.gnd.model.feature.Point;\n+\n+public class GroundCameraPosition {\n+\n+  private final Point target;\n+  private final Float zoomLevel;\n+\n+  public GroundCameraPosition(Point target, Float zoomLevel) {", "originalCommit": "65a27d88824e1e89e69b8908f8da7bbc61556ef6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY0MDYyMQ==", "url": "https://github.com/google/ground-android/pull/649#discussion_r546640621", "bodyText": "Sure. There's already a CameraPosition class in com.google.android.gms.maps.model so I added the Ground prefix to our class to avoid having to qualify usage of both classes in GoogleMapsMapAdapter, however, it's only one line so actually CameraPosition makes much more sense.", "author": "dturner", "createdAt": "2020-12-21T10:56:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1MDUyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1MTAwOA==", "url": "https://github.com/google/ground-android/pull/649#discussion_r545851008", "bodyText": "Strike \"viewport\", since it implies the bounds are returned; better just \"camera position\".", "author": "gino-m", "createdAt": "2020-12-18T14:05:23Z", "path": "gnd/src/main/java/com/google/android/gnd/ui/map/MapAdapter.java", "diffHunk": "@@ -37,15 +37,21 @@\n    */\n   Observable<Point> getDragInteractions();\n \n-  /** Returns a stream that emits the viewport center on each camera movement. */\n-  Observable<Point> getCameraMoves();\n+  /** Returns a stream that emits the viewport camera position on each camera movement. */", "originalCommit": "65a27d88824e1e89e69b8908f8da7bbc61556ef6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY0MTYyMA==", "url": "https://github.com/google/ground-android/pull/649#discussion_r546641620", "bodyText": "Thanks. Btw did you know that you can insert a suggestion like this using the +/- symbol above?", "author": "dturner", "createdAt": "2020-12-21T10:58:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1MTAwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1MTExOA==", "url": "https://github.com/google/ground-android/pull/649#discussion_r545851118", "bodyText": "Repositions the camera.", "author": "gino-m", "createdAt": "2020-12-18T14:05:33Z", "path": "gnd/src/main/java/com/google/android/gnd/ui/map/MapAdapter.java", "diffHunk": "@@ -37,15 +37,21 @@\n    */\n   Observable<Point> getDragInteractions();\n \n-  /** Returns a stream that emits the viewport center on each camera movement. */\n-  Observable<Point> getCameraMoves();\n+  /** Returns a stream that emits the viewport camera position on each camera movement. */\n+  Observable<GroundCameraPosition> getCameraMoves();\n \n   /** Enables map gestures like pan and zoom. */\n   void enable();\n \n   /** Disables all map gestures like pan and zoom. */\n   void disable();\n \n+  /**\n+   * Repositions the viewport camera position.", "originalCommit": "65a27d88824e1e89e69b8908f8da7bbc61556ef6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3f2c7af36cbc67fd2a38d119a178e5dd8bd1bc42", "url": "https://github.com/google/ground-android/commit/3f2c7af36cbc67fd2a38d119a178e5dd8bd1bc42", "message": "WIP Map Fixes", "committedDate": "2020-12-21T11:08:15Z", "type": "commit"}, {"oid": "8255c8ac1d9314a36ca2ea5ba04cb9e436d5e949", "url": "https://github.com/google/ground-android/commit/8255c8ac1d9314a36ca2ea5ba04cb9e436d5e949", "message": "Restore map position and zoom level on configuration change. Fixes #605", "committedDate": "2020-12-21T11:08:31Z", "type": "commit"}, {"oid": "e46608143a6d9f7c8e05673190bc742b1d0e5818", "url": "https://github.com/google/ground-android/commit/e46608143a6d9f7c8e05673190bc742b1d0e5818", "message": "Address feedback. Fix checkstyle issues.", "committedDate": "2020-12-21T11:08:31Z", "type": "commit"}, {"oid": "e46608143a6d9f7c8e05673190bc742b1d0e5818", "url": "https://github.com/google/ground-android/commit/e46608143a6d9f7c8e05673190bc742b1d0e5818", "message": "Address feedback. Fix checkstyle issues.", "committedDate": "2020-12-21T11:08:31Z", "type": "forcePushed"}]}