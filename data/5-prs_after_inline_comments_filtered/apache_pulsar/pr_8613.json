{"pr_number": 8613, "pr_title": "Support enable WebSocket on Pulsar Proxy.", "pr_createdAt": "2020-11-18T13:09:55Z", "pr_url": "https://github.com/apache/pulsar/pull/8613", "timeline": [{"oid": "8a4864c421bace2d361aed34eb290cba7c85880b", "url": "https://github.com/apache/pulsar/commit/8a4864c421bace2d361aed34eb290cba7c85880b", "message": "Enable WebSocket on Pulsar Proxy.", "committedDate": "2020-11-18T13:08:28Z", "type": "commit"}, {"oid": "38759bef834318cdf0a59c43016e367546fcde01", "url": "https://github.com/apache/pulsar/commit/38759bef834318cdf0a59c43016e367546fcde01", "message": "Fix test.", "committedDate": "2020-11-18T13:23:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjU3OTgwOA==", "url": "https://github.com/apache/pulsar/pull/8613#discussion_r526579808", "bodyText": "The documentation here is wrong?", "author": "sijie", "createdAt": "2020-11-19T04:01:09Z", "path": "pulsar-proxy/src/main/java/org/apache/pulsar/proxy/server/ProxyConfiguration.java", "diffHunk": "@@ -528,6 +530,20 @@\n             )\n         }\n     )\n+\n+    /***** --- WebSocket --- ****/\n+    @FieldContext(\n+            category = CATEGORY_WEBSOCKET,\n+            doc = \"The directory to locate WebSocket servlet\"", "originalCommit": "38759bef834318cdf0a59c43016e367546fcde01", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cfd526149d97bad53bfc681cdeab18eb69fea1b7", "url": "https://github.com/apache/pulsar/commit/cfd526149d97bad53bfc681cdeab18eb69fea1b7", "message": "Fix document", "committedDate": "2020-11-19T08:09:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjcxMjk0OA==", "url": "https://github.com/apache/pulsar/pull/8613#discussion_r526712948", "bodyText": "IIUC if we always enable websockets in this test we are losing to test the case in which websocket is disabled\nis it correct ?\nit would be better to have tests that cover default configurations together with tests that test additional features", "author": "eolivelli", "createdAt": "2020-11-19T09:28:54Z", "path": "tests/integration/src/test/java/org/apache/pulsar/tests/integration/proxy/TestProxy.java", "diffHunk": "@@ -53,6 +65,7 @@\n         proxyViaURL = new ProxyContainer(clusterName, \"proxy-via-url\")\n             .withEnv(\"brokerServiceURL\", \"pulsar://pulsar-broker-0:6650\")\n             .withEnv(\"brokerWebServiceURL\", \"http://pulsar-broker-0:8080\")\n+            .withEnv(\"webSocketServiceEnabled\", \"true\")", "originalCommit": "cfd526149d97bad53bfc681cdeab18eb69fea1b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM3ODgzMg==", "url": "https://github.com/apache/pulsar/pull/8613#discussion_r527378832", "bodyText": "Make sense, I have updated the test.", "author": "codelipenghui", "createdAt": "2020-11-20T03:59:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjcxMjk0OA=="}], "type": "inlineReview"}, {"oid": "a43120af5b1b577a47a1b0f4ab96fafd9a262e46", "url": "https://github.com/apache/pulsar/commit/a43120af5b1b577a47a1b0f4ab96fafd9a262e46", "message": "Merge remote-tracking branch 'apache/master' into penghui/websocket_proxy", "committedDate": "2020-11-19T12:39:02Z", "type": "commit"}, {"oid": "08751284678be74ec1c0e739450d8ced01e8f54d", "url": "https://github.com/apache/pulsar/commit/08751284678be74ec1c0e739450d8ced01e8f54d", "message": "Fix test.", "committedDate": "2020-11-19T12:45:45Z", "type": "commit"}, {"oid": "19b5d900946d663646cb2902ec996463af0972fa", "url": "https://github.com/apache/pulsar/commit/19b5d900946d663646cb2902ec996463af0972fa", "message": "Fix test.", "committedDate": "2020-11-19T12:50:25Z", "type": "commit"}, {"oid": "aef4d9706e51c19748e1bcedfa7deba8036ce3eb", "url": "https://github.com/apache/pulsar/commit/aef4d9706e51c19748e1bcedfa7deba8036ce3eb", "message": "Fix tests.", "committedDate": "2020-11-20T03:55:00Z", "type": "commit"}, {"oid": "5a34b55a6d1f1c333bdeda8bb8009b9b7b1349a4", "url": "https://github.com/apache/pulsar/commit/5a34b55a6d1f1c333bdeda8bb8009b9b7b1349a4", "message": "Fix tests.", "committedDate": "2020-11-20T06:38:24Z", "type": "commit"}, {"oid": "4355e44e201a6a9b8cf96ef9edf677398a4a26c7", "url": "https://github.com/apache/pulsar/commit/4355e44e201a6a9b8cf96ef9edf677398a4a26c7", "message": "Fix tests.", "committedDate": "2020-11-20T09:54:36Z", "type": "commit"}, {"oid": "aaeee1e499acfd399f1aae059ef19e7d2d973b58", "url": "https://github.com/apache/pulsar/commit/aaeee1e499acfd399f1aae059ef19e7d2d973b58", "message": "Fix tests.", "committedDate": "2020-11-20T12:08:57Z", "type": "commit"}, {"oid": "eb67441a2226946093614426b5565f30b368e71b", "url": "https://github.com/apache/pulsar/commit/eb67441a2226946093614426b5565f30b368e71b", "message": "Fix tests.", "committedDate": "2020-11-20T16:13:04Z", "type": "commit"}]}