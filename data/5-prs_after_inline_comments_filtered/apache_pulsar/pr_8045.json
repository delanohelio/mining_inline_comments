{"pr_number": 8045, "pr_title": "Add an REST endpoint to trigger backlogQuotaCheck", "pr_createdAt": "2020-09-12T15:05:46Z", "pr_url": "https://github.com/apache/pulsar/pull/8045", "timeline": [{"oid": "c765dc316324e997bc0ab3d67500212c5fd9e70f", "url": "https://github.com/apache/pulsar/commit/c765dc316324e997bc0ab3d67500212c5fd9e70f", "message": "add an REST endpoint to trigger backlogQuotaCheck", "committedDate": "2020-09-12T15:00:54Z", "type": "commit"}, {"oid": "9e85b45ceadaea6f17e557278dd8bb533f46ed45", "url": "https://github.com/apache/pulsar/commit/9e85b45ceadaea6f17e557278dd8bb533f46ed45", "message": "fix testDuplication often fails", "committedDate": "2020-09-12T16:02:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQzNDA5NA==", "url": "https://github.com/apache/pulsar/pull/8045#discussion_r488434094", "bodyText": "I don't think we use CamelCase for naming the endpoint. We can rename it to /backlog-quota-check.", "author": "sijie", "createdAt": "2020-09-15T07:05:53Z", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/admin/impl/BrokersBase.java", "diffHunk": "@@ -255,6 +256,26 @@ public InternalConfigurationData getInternalConfigurationData() {\n         return pulsar().getInternalConfigurationData();\n     }\n \n+    @GET\n+    @Path(\"/backlogQuotaCheck\")", "originalCommit": "9e85b45ceadaea6f17e557278dd8bb533f46ed45", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQzNDMyMw==", "url": "https://github.com/apache/pulsar/pull/8045#discussion_r488434323", "bodyText": "why do we need to add sleep here?", "author": "sijie", "createdAt": "2020-09-15T07:06:20Z", "path": "pulsar-broker/src/test/java/org/apache/pulsar/broker/service/persistent/TopicDuplicationTest.java", "diffHunk": "@@ -69,6 +69,7 @@ public void testDuplicationApi() throws Exception {\n         assertNull(enabled);\n \n         admin.topics().enableDeduplication(topicName, true);\n+        Thread.sleep(1000);", "originalCommit": "9e85b45ceadaea6f17e557278dd8bb533f46ed45", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQzNDUxOA==", "url": "https://github.com/apache/pulsar/pull/8045#discussion_r488434518", "bodyText": "same comment as above.", "author": "sijie", "createdAt": "2020-09-15T07:06:44Z", "path": "pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdBrokers.java", "diffHunk": "@@ -135,5 +146,6 @@ public CmdBrokers(PulsarAdmin admin) {\n         jcommander.addCommand(\"get-internal-config\", new GetInternalConfigurationCmd());\n         jcommander.addCommand(\"get-runtime-config\", new GetRuntimeConfigCmd());\n         jcommander.addCommand(\"healthcheck\", new HealthcheckCmd());\n+        jcommander.addCommand(\"backlogQuotaCheck\", new BacklogQuotaCheckCmd());", "originalCommit": "9e85b45ceadaea6f17e557278dd8bb533f46ed45", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e1ccce0930eef34903c56e7d231327a7705e8059", "url": "https://github.com/apache/pulsar/commit/e1ccce0930eef34903c56e7d231327a7705e8059", "message": "fix style", "committedDate": "2020-09-15T07:37:33Z", "type": "commit"}, {"oid": "2aa76cc600eb78956cd5960a7c5982487e9c71a5", "url": "https://github.com/apache/pulsar/commit/2aa76cc600eb78956cd5960a7c5982487e9c71a5", "message": "Merge branch 'master' into endpoint", "committedDate": "2020-09-17T02:25:21Z", "type": "commit"}]}