{"pr_number": 785, "pr_title": "Bugfix/issue646", "pr_createdAt": "2020-08-18T00:30:48Z", "pr_url": "https://github.com/constellation-app/constellation/pull/785", "timeline": [{"oid": "f860cf9021fa85bda68c70ad10b8f3261138d80b", "url": "https://github.com/constellation-app/constellation/commit/f860cf9021fa85bda68c70ad10b8f3261138d80b", "message": ":bug: Fixed bug when rapidly opening and closing view\nWhen rapidly opening and closing the analytic view with multiple graphs\nopen a RenderException was shown. Fixed by converting the\ntop/bottom|Label|Floats/Ints member variables into separate instances\nwhenever used. Previously they were sometimes being changed by another\nmethod whilst the current method wasn't finished. Previously they were\nbeing re-intialised as empty each time anyway so being a member \nvariable was unnecessary.", "committedDate": "2020-08-17T06:48:22Z", "type": "commit"}, {"oid": "ee1e4121f6f7e3c50830be8be5529aa0d8779f0b", "url": "https://github.com/constellation-app/constellation/commit/ee1e4121f6f7e3c50830be8be5529aa0d8779f0b", "message": "Merge branch 'master' into bugfix/Issue646", "committedDate": "2020-08-17T22:07:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2Mjk1Mw==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r471862953", "bodyText": "finals?", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:33:20Z", "path": "CoreOpenGLDisplay/src/au/gov/asd/tac/constellation/visual/opengl/renderer/batcher/NodeLabelBatcher.java", "diffHunk": "@@ -150,12 +146,13 @@ public void createShader(GL3 gl) throws IOException {\n \n     @Override\n     public GLRenderableUpdateTask createBatch(final VisualAccess access) {\n-        topLabelFloats = new FloatArray();\n-        topLabelInts = new IntArray();\n-        bottomLabelFloats = new FloatArray();\n-        bottomLabelInts = new IntArray();\n-        fillTopLabels(access);\n-        fillBottomLabels(access);\n+        FloatArray topLabelFloats = new FloatArray();", "originalCommit": "ee1e4121f6f7e3c50830be8be5529aa0d8779f0b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUzNzQwNg==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r472537406", "bodyText": "yes and done.", "author": "Nova-2119", "createdAt": "2020-08-18T22:54:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2Mjk1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2MzA0Nw==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r471863047", "bodyText": "finals.", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:33:49Z", "path": "CoreOpenGLDisplay/src/au/gov/asd/tac/constellation/visual/opengl/renderer/batcher/NodeLabelBatcher.java", "diffHunk": "@@ -196,8 +193,8 @@ public GLRenderableUpdateTask updateBottomLabels(final VisualAccess access) {\n             bottomBatch.finalise(gl);\n         };\n     }\n-\n-    private void fillTopLabels(final VisualAccess access) {\n+    \n+    private void fillTopLabels(final VisualAccess access, FloatArray topLabelFloats, IntArray topLabelInts) {", "originalCommit": "ee1e4121f6f7e3c50830be8be5529aa0d8779f0b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUzNzQyNg==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r472537426", "bodyText": "Done :)", "author": "Nova-2119", "createdAt": "2020-08-18T22:54:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2MzA0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2MzA3Ng==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r471863076", "bodyText": "finals.", "author": "cygnus-x-1", "createdAt": "2020-08-18T01:33:55Z", "path": "CoreOpenGLDisplay/src/au/gov/asd/tac/constellation/visual/opengl/renderer/batcher/NodeLabelBatcher.java", "diffHunk": "@@ -207,7 +204,7 @@ private void fillTopLabels(final VisualAccess access) {\n         topLabelInts.trimToSize();\n     }\n \n-    private void fillBottomLabels(final VisualAccess access) {\n+    private void fillBottomLabels(final VisualAccess access, FloatArray bottomLabelFloats, IntArray bottomLabelInts) {", "originalCommit": "ee1e4121f6f7e3c50830be8be5529aa0d8779f0b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUzNzQ4OA==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r472537488", "bodyText": "Done", "author": "Nova-2119", "createdAt": "2020-08-18T22:54:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg2MzA3Ng=="}], "type": "inlineReview"}, {"oid": "d0801eb8113d6e5bea2112ef17d13634e3fa6be6", "url": "https://github.com/constellation-app/constellation/commit/d0801eb8113d6e5bea2112ef17d13634e3fa6be6", "message": ":bug: FloatArary and IntArray not trimToSize in rawArray method\nPreviously when calling rawArray an array larger than the recorded size\nof FloatArray/IntArray could be returned. By calling trimToSize prior in\nthe rawArray method prior to returning the stored array we ensure that\nthe size of the array returned matches that recorded in the size variable.\nThis fixes a bug caused when repeatedly opening and closing views.", "committedDate": "2020-08-18T05:30:05Z", "type": "commit"}, {"oid": "0502677a2716c5d8aa72a39582e2562666ddf5d5", "url": "https://github.com/constellation-app/constellation/commit/0502677a2716c5d8aa72a39582e2562666ddf5d5", "message": "Merge branch 'master' into bugfix/Issue646", "committedDate": "2020-08-18T05:31:08Z", "type": "commit"}, {"oid": "724f9bec86cf3cf0ae0dab071d0e9ed64953e663", "url": "https://github.com/constellation-app/constellation/commit/724f9bec86cf3cf0ae0dab071d0e9ed64953e663", "message": ":art: Made variables final as per PR feedback.", "committedDate": "2020-08-18T05:37:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjYzNzA1Mw==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r472637053", "bodyText": "Minor but it might be good to add some spaces here", "author": "antares1470", "createdAt": "2020-08-19T03:22:34Z", "path": "CoreUtilities/src/au/gov/asd/tac/constellation/utilities/graphics/FloatArray.java", "diffHunk": "@@ -134,6 +134,7 @@ public FloatArray(final int initialCapacity) {\n             throw new IllegalArgumentException(\"Illegal Capacity: \" + initialCapacity);\n         }\n         this.elementData = new float[initialCapacity];\n+        size=0;", "originalCommit": "724f9bec86cf3cf0ae0dab071d0e9ed64953e663", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzM3NjkzNA==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r473376934", "bodyText": "See latest changes, I think this is what you meant?", "author": "Nova-2119", "createdAt": "2020-08-19T22:14:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjYzNzA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzQxNDA0Ng==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r473414046", "bodyText": "Not quite. I meant size=0 becoming size = 0", "author": "antares1470", "createdAt": "2020-08-19T23:03:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjYzNzA1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjYzNzEzMg==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r472637132", "bodyText": "same here", "author": "antares1470", "createdAt": "2020-08-19T03:22:41Z", "path": "CoreUtilities/src/au/gov/asd/tac/constellation/utilities/graphics/IntArray.java", "diffHunk": "@@ -133,6 +133,7 @@ public IntArray(final int initialCapacity) {\n             throw new IllegalArgumentException(\"Illegal Capacity: \" + initialCapacity);\n         }\n         this.elementData = new int[initialCapacity];\n+        size=0;", "originalCommit": "724f9bec86cf3cf0ae0dab071d0e9ed64953e663", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzM3Njk0OQ==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r473376949", "bodyText": "See latest changes, I think this is what you meant?", "author": "Nova-2119", "createdAt": "2020-08-19T22:14:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjYzNzEzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzQxNDI2MQ==", "url": "https://github.com/constellation-app/constellation/pull/785#discussion_r473414261", "bodyText": "Not quite. I meant size=0 becoming size = 0", "author": "antares1470", "createdAt": "2020-08-19T23:04:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjYzNzEzMg=="}], "type": "inlineReview"}, {"oid": "032c01e7c51e5a14241d6bf4b63d740d2a194bc9", "url": "https://github.com/constellation-app/constellation/commit/032c01e7c51e5a14241d6bf4b63d740d2a194bc9", "message": ":art: Added spaces for readability", "committedDate": "2020-08-19T22:12:27Z", "type": "commit"}, {"oid": "8023bc589a3eebb36dca48bf4ae10fd1e2cd0ac1", "url": "https://github.com/constellation-app/constellation/commit/8023bc589a3eebb36dca48bf4ae10fd1e2cd0ac1", "message": "Merge branch 'master' into bugfix/Issue646", "committedDate": "2020-08-19T22:13:15Z", "type": "commit"}, {"oid": "25854af7cb9555133cfe9e13abc3a04eed48b7b3", "url": "https://github.com/constellation-app/constellation/commit/25854af7cb9555133cfe9e13abc3a04eed48b7b3", "message": ":art: Added spaces for readability", "committedDate": "2020-08-21T01:03:12Z", "type": "commit"}, {"oid": "8ccaeb600fe84148f178639e81dc3cd88ef8a260", "url": "https://github.com/constellation-app/constellation/commit/8ccaeb600fe84148f178639e81dc3cd88ef8a260", "message": "Merge branch 'master' into bugfix/Issue646", "committedDate": "2020-08-21T01:04:01Z", "type": "commit"}]}