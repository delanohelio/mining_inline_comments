{"pr_number": 555, "pr_title": "Add Search filters to Transaction Types and Node Types tabs in Schema View", "pr_createdAt": "2020-05-27T06:41:45Z", "pr_url": "https://github.com/constellation-app/constellation/pull/555", "timeline": [{"oid": "269b6ab157e9ebc9000e2b70434174485123a630", "url": "https://github.com/constellation-app/constellation/commit/269b6ab157e9ebc9000e2b70434174485123a630", "message": "Add Search filters to Transaction Types and Node Types tabs", "committedDate": "2020-05-27T06:24:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NDcxOA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r431094718", "bodyText": "I wonder if it'd be better to move this into a stylesheet, given that we're looking to implement light/dark themes and the highlight style might need to change with the theme.", "author": "cygnus-x-1", "createdAt": "2020-05-27T12:55:28Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -59,11 +63,14 @@\n     public static final String MIMETYPE = \"application/x-constellation-transactiontype\";\n     public static final DataFormat TRANSACTION_TYPE = new DataFormat(MIMETYPE);\n     private static final int ICON_IMAGE_SIZE = 16;\n+    private static final String HIGHLIGHT_BLUE_STYLE = \"-fx-background-color: rgb(30,144,255); -fx-padding: 2 5 2 5;\";", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA4ODk2OQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433088969", "bodyText": "@cygnus-x-1 Do you mean a new css file or a java class like JavafxStyleManager? I couldn't find a way how that would support light/dark themes. Is it implemented anywhere in the current code?\nOr can I use Style-Timeline-Light.css and Style-Timeline-Dark.css maybe?", "author": "Auriga2", "createdAt": "2020-06-01T07:45:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NDcxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3MzM2Mw==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433573363", "bodyText": "I think what @cygnus-x-1 is referring to is if you could try to put this into the table-view.css file. There is a separate issue I created to create a light and dark theme and the way we can implement that is to decide which css file we load. That can be done at the generic view framework and what I will do as part of that ticket is to create something like table-view-light.css and table-view-dark.css. As a prerequisite for that, getting you to put the styles in the css file will help (i.e rather than having it in the code). Noted that there are still other parts of the application that have Java FX styling in code and they need to be fixed too; if we can have new changes not go in the code that will help.", "author": "arcturus2", "createdAt": "2020-06-02T01:31:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NDcxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNDQyMA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433604420", "bodyText": "Added a similar schema-view.css as these are in Schema View module.", "author": "Auriga2", "createdAt": "2020-06-02T03:47:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NDcxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NTM3Mg==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r431095372", "bodyText": "You should try to avoid non-descriptive variable names like this.", "author": "cygnus-x-1", "createdAt": "2020-05-27T12:56:27Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -130,15 +143,98 @@ public void newActiveGraph(final Graph graph) {\n             } else {\n                 schemaLabel.setText(\"No schema available\");\n             }\n+            populateTree();\n+        });\n+    }\n \n-            final TreeItem<SchemaTransactionType> root = createNode(null);\n-            treeView.setRoot(root);\n+    private VBox addFilter() {\n+        filterText.setPromptText(\"Filter transaction types\");\n+        final ToggleGroup tg = new ToggleGroup();", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3MzYzMA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433573630", "bodyText": "@Auriga2 just wondering if you saw this comment? If you need a hand let me know. so something like toggleGroup would be preferred.", "author": "arcturus2", "createdAt": "2020-06-02T01:32:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NTM3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5NzYyMQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r431097621", "bodyText": "why does only this variable have 'Label' in its name?", "author": "cygnus-x-1", "createdAt": "2020-05-27T12:59:11Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -130,15 +143,98 @@ public void newActiveGraph(final Graph graph) {\n             } else {\n                 schemaLabel.setText(\"No schema available\");\n             }\n+            populateTree();\n+        });\n+    }\n \n-            final TreeItem<SchemaTransactionType> root = createNode(null);\n-            treeView.setRoot(root);\n+    private VBox addFilter() {\n+        filterText.setPromptText(\"Filter transaction types\");\n+        final ToggleGroup tg = new ToggleGroup();\n+        startsWithRb.setToggleGroup(tg);\n+        startsWithRb.setPadding(new Insets(0, 0, 0, 5));\n+        startsWithRb.setSelected(true);\n+        final RadioButton containsRb = new RadioButton(\"Contains\");\n+        containsRb.setToggleGroup(tg);\n+        containsRb.setPadding(new Insets(0, 0, 0, 5));\n+\n+        tg.selectedToggleProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n         });\n+\n+        filterText.textProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n+        });\n+\n+        final HBox headerBox = new HBox(new Label(\"Filter: \"), filterText, startsWithRb, containsRb);\n+        headerBox.setAlignment(Pos.CENTER_LEFT);\n+        headerBox.setPadding(new Insets(5));\n+\n+        final VBox box = new VBox(schemaLabel, headerBox, treeView);\n+        VBox.setVgrow(treeView, Priority.ALWAYS);\n+        return box;\n+    }\n+\n+    private void populateTree() {\n+        final TreeItem<SchemaTransactionType> root = createNode(null);\n+        treeView.setRoot(root);\n+    }\n+\n+    private boolean isFilterMatchCurrentNode(SchemaTransactionType treeItem) {\n+        boolean found = isFilterMatchText(treeItem.getName());\n+        if (!found) {\n+            found = isFilterMatchAnyProperty(treeItem);\n+        }\n+        return found;\n+    }\n+\n+    private boolean isFilterMatchAnyProperty(SchemaTransactionType treeItem) {\n+        boolean found = false;\n+        final String name = treeItem.getName();\n+        found = isFilterMatchText(name);\n+        if (!found) {\n+            final String description = treeItem.getDescription();\n+            found = isFilterMatchText(description);\n+        }\n+        if (!found) {\n+            final String color = treeItem.getColor().toString();\n+            found = isFilterMatchText(color);\n+        }\n+        if (!found) {\n+            final String style = treeItem.getStyle().toString();\n+            found = isFilterMatchText(style);\n+        }\n+        if (!found) {\n+            final String directedLabel = treeItem.isDirected().toString();", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5ODE5MQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r431098191", "bodyText": "This could be final.", "author": "cygnus-x-1", "createdAt": "2020-05-27T12:59:38Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -130,15 +143,98 @@ public void newActiveGraph(final Graph graph) {\n             } else {\n                 schemaLabel.setText(\"No schema available\");\n             }\n+            populateTree();\n+        });\n+    }\n \n-            final TreeItem<SchemaTransactionType> root = createNode(null);\n-            treeView.setRoot(root);\n+    private VBox addFilter() {\n+        filterText.setPromptText(\"Filter transaction types\");\n+        final ToggleGroup tg = new ToggleGroup();\n+        startsWithRb.setToggleGroup(tg);\n+        startsWithRb.setPadding(new Insets(0, 0, 0, 5));\n+        startsWithRb.setSelected(true);\n+        final RadioButton containsRb = new RadioButton(\"Contains\");\n+        containsRb.setToggleGroup(tg);\n+        containsRb.setPadding(new Insets(0, 0, 0, 5));\n+\n+        tg.selectedToggleProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n         });\n+\n+        filterText.textProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n+        });\n+\n+        final HBox headerBox = new HBox(new Label(\"Filter: \"), filterText, startsWithRb, containsRb);\n+        headerBox.setAlignment(Pos.CENTER_LEFT);\n+        headerBox.setPadding(new Insets(5));\n+\n+        final VBox box = new VBox(schemaLabel, headerBox, treeView);\n+        VBox.setVgrow(treeView, Priority.ALWAYS);\n+        return box;\n+    }\n+\n+    private void populateTree() {\n+        final TreeItem<SchemaTransactionType> root = createNode(null);\n+        treeView.setRoot(root);\n+    }\n+\n+    private boolean isFilterMatchCurrentNode(SchemaTransactionType treeItem) {\n+        boolean found = isFilterMatchText(treeItem.getName());\n+        if (!found) {\n+            found = isFilterMatchAnyProperty(treeItem);\n+        }\n+        return found;\n+    }\n+\n+    private boolean isFilterMatchAnyProperty(SchemaTransactionType treeItem) {\n+        boolean found = false;\n+        final String name = treeItem.getName();\n+        found = isFilterMatchText(name);\n+        if (!found) {\n+            final String description = treeItem.getDescription();\n+            found = isFilterMatchText(description);\n+        }\n+        if (!found) {\n+            final String color = treeItem.getColor().toString();\n+            found = isFilterMatchText(color);\n+        }\n+        if (!found) {\n+            final String style = treeItem.getStyle().toString();\n+            found = isFilterMatchText(style);\n+        }\n+        if (!found) {\n+            final String directedLabel = treeItem.isDirected().toString();\n+            found = isFilterMatchText(directedLabel);\n+        }\n+        if (!found) {\n+            final String hierachy = treeItem.getHierachy();\n+            found = isFilterMatchText(hierachy);\n+        }\n+        if (!found) {\n+            for (String property : treeItem.getProperties().keySet()) {", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5ODU5NA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r431098594", "bodyText": "This and the variables below could be final.", "author": "cygnus-x-1", "createdAt": "2020-05-27T12:59:58Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -200,12 +296,20 @@ public void setContent(final Tab tab) {\n                         grid.add(propertyLabel, 1, gridPosition);\n                     }\n                 }\n-\n+                for (Node child : grid.getChildren()) {", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTEwNjQxOA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r431106418", "bodyText": "This block could be made more compact using something like\nreturn isFilterMatchText(treeItem.getName()) \n    || isFilterMatchText(treeItem.getDescription())\n    ...\n    || treeItem.getProperties.stream().anyMatch(property -> \n        property != null && isFilterMatchText(property.toString())\n    );\n\n...although I do wonder how much readability you'd lose.", "author": "cygnus-x-1", "createdAt": "2020-05-27T13:06:32Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -130,15 +143,98 @@ public void newActiveGraph(final Graph graph) {\n             } else {\n                 schemaLabel.setText(\"No schema available\");\n             }\n+            populateTree();\n+        });\n+    }\n \n-            final TreeItem<SchemaTransactionType> root = createNode(null);\n-            treeView.setRoot(root);\n+    private VBox addFilter() {\n+        filterText.setPromptText(\"Filter transaction types\");\n+        final ToggleGroup tg = new ToggleGroup();\n+        startsWithRb.setToggleGroup(tg);\n+        startsWithRb.setPadding(new Insets(0, 0, 0, 5));\n+        startsWithRb.setSelected(true);\n+        final RadioButton containsRb = new RadioButton(\"Contains\");\n+        containsRb.setToggleGroup(tg);\n+        containsRb.setPadding(new Insets(0, 0, 0, 5));\n+\n+        tg.selectedToggleProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n         });\n+\n+        filterText.textProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n+        });\n+\n+        final HBox headerBox = new HBox(new Label(\"Filter: \"), filterText, startsWithRb, containsRb);\n+        headerBox.setAlignment(Pos.CENTER_LEFT);\n+        headerBox.setPadding(new Insets(5));\n+\n+        final VBox box = new VBox(schemaLabel, headerBox, treeView);\n+        VBox.setVgrow(treeView, Priority.ALWAYS);\n+        return box;\n+    }\n+\n+    private void populateTree() {\n+        final TreeItem<SchemaTransactionType> root = createNode(null);\n+        treeView.setRoot(root);\n+    }\n+\n+    private boolean isFilterMatchCurrentNode(SchemaTransactionType treeItem) {\n+        boolean found = isFilterMatchText(treeItem.getName());\n+        if (!found) {\n+            found = isFilterMatchAnyProperty(treeItem);\n+        }\n+        return found;\n+    }\n+\n+    private boolean isFilterMatchAnyProperty(SchemaTransactionType treeItem) {\n+        boolean found = false;\n+        final String name = treeItem.getName();", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2MzY0OQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432263649", "bodyText": "I'll add my 2 cents here and say that provided you added each condition on a new line, I think what @cygnus-x-1 has suggested is more readable than a large list of if statements. The numerous amount of if statements will also increase the cognitive complexity higher than I reckon it needs to be", "author": "antares1470", "createdAt": "2020-05-29T05:31:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTEwNjQxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3ODU2Ng==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433578566", "bodyText": "@Auriga2 did you see this message?", "author": "arcturus2", "createdAt": "2020-06-02T01:52:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTEwNjQxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2MTA2Mg==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432261062", "bodyText": "This can all be simplified to return isFilterMatchText(treeItem.getName()) || isFilterMatchAnyProperty(treeItem)", "author": "antares1470", "createdAt": "2020-05-29T05:21:40Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -130,15 +143,98 @@ public void newActiveGraph(final Graph graph) {\n             } else {\n                 schemaLabel.setText(\"No schema available\");\n             }\n+            populateTree();\n+        });\n+    }\n \n-            final TreeItem<SchemaTransactionType> root = createNode(null);\n-            treeView.setRoot(root);\n+    private VBox addFilter() {\n+        filterText.setPromptText(\"Filter transaction types\");\n+        final ToggleGroup tg = new ToggleGroup();\n+        startsWithRb.setToggleGroup(tg);\n+        startsWithRb.setPadding(new Insets(0, 0, 0, 5));\n+        startsWithRb.setSelected(true);\n+        final RadioButton containsRb = new RadioButton(\"Contains\");\n+        containsRb.setToggleGroup(tg);\n+        containsRb.setPadding(new Insets(0, 0, 0, 5));\n+\n+        tg.selectedToggleProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n         });\n+\n+        filterText.textProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n+        });\n+\n+        final HBox headerBox = new HBox(new Label(\"Filter: \"), filterText, startsWithRb, containsRb);\n+        headerBox.setAlignment(Pos.CENTER_LEFT);\n+        headerBox.setPadding(new Insets(5));\n+\n+        final VBox box = new VBox(schemaLabel, headerBox, treeView);\n+        VBox.setVgrow(treeView, Priority.ALWAYS);\n+        return box;\n+    }\n+\n+    private void populateTree() {\n+        final TreeItem<SchemaTransactionType> root = createNode(null);\n+        treeView.setRoot(root);\n+    }\n+\n+    private boolean isFilterMatchCurrentNode(SchemaTransactionType treeItem) {\n+        boolean found = isFilterMatchText(treeItem.getName());\n+        if (!found) {\n+            found = isFilterMatchAnyProperty(treeItem);\n+        }\n+        return found;", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI4OTI5MQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432289291", "bodyText": "I just tried to loop the properties only if it doesn't match the type name, to avoid unnecessary processing. May be worthless the effort in this scenario?", "author": "Auriga2", "createdAt": "2020-05-29T06:54:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2MTA2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3ODQwOA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433578408", "bodyText": "@Auriga2 so what you had is fine though it could be simplified with @antares1470's suggestion as a 1 line return statement. Are you able to consider making this change?", "author": "arcturus2", "createdAt": "2020-06-02T01:51:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2MTA2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NDQ3NQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432264475", "bodyText": "Can probably omit .toLowerCase() if you are just checking if it's empty", "author": "antares1470", "createdAt": "2020-05-29T05:34:36Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -291,16 +395,20 @@ public boolean isLeaf() {\n                     // Any vertextype that points to itself is in the root layer.\n                     for (final SchemaTransactionType tt : transactionTypes) {\n                         if (tt.getSuperType() == tt) {\n+                            if (isFilterMatchCurrentNode(tt) || filterText.getText().toLowerCase().isEmpty()) {", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI4ODc4Ng==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432288786", "bodyText": "Ah yes. Fixed it.", "author": "Auriga2", "createdAt": "2020-05-29T06:52:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NDQ3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NDU1Mg==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432264552", "bodyText": "same here", "author": "antares1470", "createdAt": "2020-05-29T05:34:51Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -291,16 +395,20 @@ public boolean isLeaf() {\n                     // Any vertextype that points to itself is in the root layer.\n                     for (final SchemaTransactionType tt : transactionTypes) {\n                         if (tt.getSuperType() == tt) {\n+                            if (isFilterMatchCurrentNode(tt) || filterText.getText().toLowerCase().isEmpty()) {\n                             children.add(createNode(tt));\n                         }\n                     }\n+                    }\n                 } else {\n                     for (final SchemaTransactionType tt : transactionTypes) {\n                         if (tt.getSuperType() == value && tt != value) {\n+                            if (isFilterMatchCurrentNode(tt) || filterText.getText().toLowerCase().isEmpty()) {", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI4ODkwMg==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432288902", "bodyText": "Fixed.", "author": "Auriga2", "createdAt": "2020-05-29T06:53:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NDU1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NDg4OA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432264888", "bodyText": "Similar to what was mentioned in the other file, this can probably be reduced to one return statement", "author": "antares1470", "createdAt": "2020-05-29T05:36:11Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/VertexTypeNodeProvider.java", "diffHunk": "@@ -177,15 +187,122 @@ public void newActiveGraph(final Graph graph) {\n             } else {\n                 schemaLabel.setText(\"No schema available\");\n             }\n+            populateTree();\n+        });\n+    }\n+\n+    private VBox addFilter() {\n+        filterText.setPromptText(\"Filter Node types\");\n+        final ToggleGroup tg = new ToggleGroup();\n+        startsWithRb.setToggleGroup(tg);\n+        startsWithRb.setPadding(new Insets(0, 0, 0, 5));\n+        startsWithRb.setSelected(true);\n+        final RadioButton containsRb = new RadioButton(\"Contains\");\n+        containsRb.setToggleGroup(tg);\n+        containsRb.setPadding(new Insets(0, 0, 0, 5));\n+\n+        tg.selectedToggleProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n+        });\n \n-            final TreeItem<SchemaVertexType> root = createNode(null);\n-            treeView.setRoot(root);\n+        filterText.textProperty().addListener((ov, oldValue, newValue) -> {\n+            populateTree();\n         });\n+\n+        final HBox headerBox = new HBox(new Label(\"Filter: \"), filterText, startsWithRb, containsRb);\n+        headerBox.setAlignment(Pos.CENTER_LEFT);\n+        headerBox.setPadding(new Insets(5));\n+\n+        final VBox box = new VBox(schemaLabel, headerBox, treeView);\n+        VBox.setVgrow(treeView, Priority.ALWAYS);\n+        return box;\n+    }\n+\n+    private void populateTree() {\n+        final TreeItem<SchemaVertexType> root = createNode(null);\n+        treeView.setRoot(root);\n+    }\n+\n+    private boolean isFilterMatchTextCurrentNodeOrAnyChildren(SchemaVertexType treeItem) {\n+        boolean found = isFilterMatchText(treeItem.getName());\n+        if (!found) {\n+            found = isFilterMatchTextAnyProperty(treeItem);\n+        }\n+        if (!found) {\n+            found = isFilterMatchTextAnyChildNodes(treeItem);\n+        }\n+        return found;", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NTI2Mg==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432265262", "bodyText": "This and the above can be made final", "author": "antares1470", "createdAt": "2020-05-29T05:37:42Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/VertexTypeNodeProvider.java", "diffHunk": "@@ -303,12 +420,20 @@ public void setContent(final Tab tab) {\n                         grid.add(propertyLabel, 1, gridPosition);\n                     }\n                 }\n-\n+                for (Node child : grid.getChildren()) {\n+                    Integer column = GridPane.getColumnIndex(child);\n+                    Integer row = GridPane.getRowIndex(child);", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NTQ0NA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432265444", "bodyText": "can probably omit toLowerCase() if just doing emptiness check", "author": "antares1470", "createdAt": "2020-05-29T05:38:21Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/VertexTypeNodeProvider.java", "diffHunk": "@@ -395,17 +520,20 @@ public boolean isLeaf() {\n                     // Any vertextype that points to itself is in the root layer.\n                     for (final SchemaVertexType vt : vertexTypes) {\n                         if (vt.getSuperType() == vt) {\n+                            if (isFilterMatchTextCurrentNodeOrAnyChildren(vt) || filterText.getText().toLowerCase().isEmpty()) {", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI4OTY0NQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432289645", "bodyText": "Yes, fixed.", "author": "Auriga2", "createdAt": "2020-05-29T06:55:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NTQ0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NTQ2Nw==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432265467", "bodyText": "same here", "author": "antares1470", "createdAt": "2020-05-29T05:38:28Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/VertexTypeNodeProvider.java", "diffHunk": "@@ -395,17 +520,20 @@ public boolean isLeaf() {\n                     // Any vertextype that points to itself is in the root layer.\n                     for (final SchemaVertexType vt : vertexTypes) {\n                         if (vt.getSuperType() == vt) {\n+                            if (isFilterMatchTextCurrentNodeOrAnyChildren(vt) || filterText.getText().toLowerCase().isEmpty()) {\n                             children.add(createNode(vt));\n                         }\n                     }\n+                    }\n                 } else {\n                     for (final SchemaVertexType vt : vertexTypes) {\n                         if (vt.getSuperType() == value && vt != value) {\n+                            if (isFilterMatchTextCurrentNodeOrAnyChildren(vt) || filterText.getText().toLowerCase().isEmpty()) {", "originalCommit": "269b6ab157e9ebc9000e2b70434174485123a630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI4OTczMg==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r432289732", "bodyText": "Yes, fixed.", "author": "Auriga2", "createdAt": "2020-05-29T06:55:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NTQ2Nw=="}], "type": "inlineReview"}, {"oid": "17846549a982161c51cf34b861e2f43e538b5538", "url": "https://github.com/constellation-app/constellation/commit/17846549a982161c51cf34b861e2f43e538b5538", "message": "Bug fixes and improvements", "committedDate": "2020-06-02T03:44:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNjIxMQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433606211", "bodyText": "Change this return to !filterText.getText().isEmpty() || isFilterMatchText(treeItem.getName()) || isFilterMatchAnyProperty(treeItem)", "author": "antares1470", "createdAt": "2020-06-02T03:56:05Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -180,54 +180,25 @@ private void populateTree() {\n     }\n \n     private boolean isFilterMatchCurrentNode(SchemaTransactionType treeItem) {\n-        boolean found = isFilterMatchText(treeItem.getName());\n-        if (!found) {\n-            found = isFilterMatchAnyProperty(treeItem);\n-        }\n-        return found;\n+        return filterText.getText().toLowerCase().isEmpty() ? false\n+                : isFilterMatchText(treeItem.getName()) || isFilterMatchAnyProperty(treeItem);", "originalCommit": "17846549a982161c51cf34b861e2f43e538b5538", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY3MDU0MQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433670541", "bodyText": "@antares1470 I added original line to avoid further processing when the string is null. Feels like the above will still try to process when it is null? (I yet have to remove the .toLowerCase() from the check)", "author": "Auriga2", "createdAt": "2020-06-02T07:21:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNjIxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIyMzQ2Mw==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434223463", "bodyText": "@Auriga2 So in this case (and the others I've suggested), Java will lazily evaluate the or boolean conditions (i.e. if the first condition is true it doesn't evaluate the rest of them).\nIf you want to avoid further processing for null, isEmpty() won't actually check that (in fact you'll get null pointer calling a isEmpty() on null). If you want to include a null check, change !filterText.getText().isEmpty() to StringUtils.isNotBlank(filterText.getText()) which will check for both null and empty.\nUltimately, the purpose of my suggestions is to remove the literal boolean false from the statements (which is a sonar code smell)", "author": "antares1470", "createdAt": "2020-06-02T23:10:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNjIxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2MzY2NA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434263664", "bodyText": "Yeah when it (either) is empty, that side is false, so it valuates the other side because of False ||.\nLooks like we should add an && there.\nSorry I meant empty. But checking for both could be better.", "author": "Auriga2", "createdAt": "2020-06-03T01:43:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNjIxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2NTM1MA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434265350", "bodyText": "My bad, you are correct (I was mixing up my translations). It should be !filterText.getText().isEmpty() && (isFilterMatchText(treeItem.getName()) || isFilterMatchAnyProperty(treeItem))\nIf you don't think a null check is necessary, than just using isEmpty() is fine\nI'll edit the other comments accordingly", "author": "antares1470", "createdAt": "2020-06-03T01:50:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNjIxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2ODAyMg==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434268022", "bodyText": "I think it's safer to use isNotBlank. I edited them all, and will test a bit and push in a while.", "author": "Auriga2", "createdAt": "2020-06-03T02:02:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNjIxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzM0Ng==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433607346", "bodyText": "change this return to !filterInputText.isEmpty() && !propertyValue.isEmpty() && (startsWithRb.isSelected() ? propertyValue.toLowerCase().startsWith(filterInputText) : propertyValue.toLowerCase().contains(filterInputText))", "author": "antares1470", "createdAt": "2020-06-02T04:01:22Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -180,54 +180,25 @@ private void populateTree() {\n     }\n \n     private boolean isFilterMatchCurrentNode(SchemaTransactionType treeItem) {\n-        boolean found = isFilterMatchText(treeItem.getName());\n-        if (!found) {\n-            found = isFilterMatchAnyProperty(treeItem);\n-        }\n-        return found;\n+        return filterText.getText().toLowerCase().isEmpty() ? false\n+                : isFilterMatchText(treeItem.getName()) || isFilterMatchAnyProperty(treeItem);\n     }\n \n     private boolean isFilterMatchAnyProperty(SchemaTransactionType treeItem) {\n-        boolean found = false;\n-        final String name = treeItem.getName();\n-        found = isFilterMatchText(name);\n-        if (!found) {\n-            final String description = treeItem.getDescription();\n-            found = isFilterMatchText(description);\n-        }\n-        if (!found) {\n-            final String color = treeItem.getColor().toString();\n-            found = isFilterMatchText(color);\n-        }\n-        if (!found) {\n-            final String style = treeItem.getStyle().toString();\n-            found = isFilterMatchText(style);\n-        }\n-        if (!found) {\n-            final String directedLabel = treeItem.isDirected().toString();\n-            found = isFilterMatchText(directedLabel);\n-        }\n-        if (!found) {\n-            final String hierachy = treeItem.getHierachy();\n-            found = isFilterMatchText(hierachy);\n-        }\n-        if (!found) {\n-            for (String property : treeItem.getProperties().keySet()) {\n-                final Object propertyValue = treeItem.getProperty(property);\n-                if (propertyValue != null) {\n-                    found = isFilterMatchText(propertyValue.toString());\n-                    if (found) {\n-                        break;\n-                    }\n-                }\n-            }\n-        }\n-        return found;\n+        return isFilterMatchText(treeItem.getName())\n+                || isFilterMatchText(treeItem.getDescription())\n+                || isFilterMatchText(Objects.toString(treeItem.getColor().toString(), \"\"))\n+                || isFilterMatchText(Objects.toString(treeItem.getStyle().toString(), \"\"))\n+                || isFilterMatchText(Objects.toString(treeItem.isDirected().toString(), \"\"))\n+                || isFilterMatchText(treeItem.getHierachy())\n+                || !(treeItem.getProperties().keySet().isEmpty()) && treeItem.getProperties().keySet().stream().anyMatch(property\n+                -> property != null && isFilterMatchText(property.toString())\n+        );\n     }\n \n     private boolean isFilterMatchText(final String propertyValue) {\n         final String filterInputText = filterText.getText().toLowerCase();\n-        return filterInputText.isEmpty() ? false : startsWithRb.isSelected()\n+        return (filterInputText.isEmpty() || propertyValue.isEmpty()) ? false : startsWithRb.isSelected()\n                 ? propertyValue.toLowerCase().startsWith(filterInputText) : propertyValue.toLowerCase().contains(filterInputText);", "originalCommit": "17846549a982161c51cf34b861e2f43e538b5538", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY3MDgxMg==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433670812", "bodyText": "Same issue as above.", "author": "Auriga2", "createdAt": "2020-06-02T07:22:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzM0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIyNDAyOA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434224028", "bodyText": "see above comment", "author": "antares1470", "createdAt": "2020-06-02T23:12:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzM0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2ODQ1OA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434268458", "bodyText": "Similarly,  && seems to work here.", "author": "Auriga2", "createdAt": "2020-06-03T02:04:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzM0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzU0Ng==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433607546", "bodyText": "Change this return to !filterText.getText().isEmpty() && (isFilterMatchText(treeItem.getName()) || isFilterMatchAnyProperty(treeItem) || isFilterMatchAnyChildNodes(treeItem))", "author": "antares1470", "createdAt": "2020-06-02T04:02:27Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/VertexTypeNodeProvider.java", "diffHunk": "@@ -223,79 +223,41 @@ private void populateTree() {\n         treeView.setRoot(root);\n     }\n \n-    private boolean isFilterMatchTextCurrentNodeOrAnyChildren(SchemaVertexType treeItem) {\n-        boolean found = isFilterMatchText(treeItem.getName());\n-        if (!found) {\n-            found = isFilterMatchTextAnyProperty(treeItem);\n-        }\n-        if (!found) {\n-            found = isFilterMatchTextAnyChildNodes(treeItem);\n-        }\n-        return found;\n+    private boolean isFilterMatchCurrentNodeOrAnyChildren(SchemaVertexType treeItem) {\n+        return filterText.getText().toLowerCase().isEmpty() ? false\n+                : isFilterMatchText(treeItem.getName()) || isFilterMatchAnyProperty(treeItem) || isFilterMatchAnyChildNodes(treeItem);", "originalCommit": "17846549a982161c51cf34b861e2f43e538b5538", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY2OTE4Ng==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433669186", "bodyText": "@antares1470  I added original line to avoid further processing when the strings are null. Feels like the above will still try to process when it is null?", "author": "Auriga2", "createdAt": "2020-06-02T07:18:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzU0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIyNDA3Mw==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434224073", "bodyText": "see above comment", "author": "antares1470", "createdAt": "2020-06-02T23:12:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzU0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2ODU5MA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434268590", "bodyText": "Similarly,  && seems to work here.", "author": "Auriga2", "createdAt": "2020-06-03T02:04:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzU0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzk1MA==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433607950", "bodyText": "change this return to !filterInputText.isEmpty() && !propertyValue.isEmpty() && (startsWithRb.isSelected() ? propertyValue.toLowerCase().startsWith(filterInputText) : propertyValue.toLowerCase().contains(filterInputText))", "author": "antares1470", "createdAt": "2020-06-02T04:04:15Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/VertexTypeNodeProvider.java", "diffHunk": "@@ -223,79 +223,41 @@ private void populateTree() {\n         treeView.setRoot(root);\n     }\n \n-    private boolean isFilterMatchTextCurrentNodeOrAnyChildren(SchemaVertexType treeItem) {\n-        boolean found = isFilterMatchText(treeItem.getName());\n-        if (!found) {\n-            found = isFilterMatchTextAnyProperty(treeItem);\n-        }\n-        if (!found) {\n-            found = isFilterMatchTextAnyChildNodes(treeItem);\n-        }\n-        return found;\n+    private boolean isFilterMatchCurrentNodeOrAnyChildren(SchemaVertexType treeItem) {\n+        return filterText.getText().toLowerCase().isEmpty() ? false\n+                : isFilterMatchText(treeItem.getName()) || isFilterMatchAnyProperty(treeItem) || isFilterMatchAnyChildNodes(treeItem);\n     }\n \n-    private boolean isFilterMatchTextAnyChildNodes(SchemaVertexType treeItem) {\n+    private boolean isFilterMatchAnyChildNodes(SchemaVertexType treeItem) {\n         boolean found = false;\n-        final List<SchemaVertexType> children = vertexTypes.stream().filter(vt -> vt.getSuperType() == treeItem && vt != treeItem).collect(Collectors.toList());\n+        final List<SchemaVertexType> children = vertexTypes.stream().filter(vt\n+                -> vt.getSuperType() == treeItem && vt != treeItem).collect(Collectors.toList());\n \n         for (SchemaVertexType child : children) {\n-            found = isFilterMatchTextCurrentNodeOrAnyChildren(child);\n+            found = isFilterMatchCurrentNodeOrAnyChildren(child);\n             if (found) {\n                 break;\n             }\n         }\n         return found;\n     }\n \n-    private boolean isFilterMatchTextAnyProperty(SchemaVertexType treeItem) {\n-        boolean found = false;\n-        final String name = treeItem.getName();\n-        found = isFilterMatchText(name);\n-        if (!found) {\n-            final String description = treeItem.getDescription();\n-            found = isFilterMatchText(description);\n-        }\n-        if (!found) {\n-            final String color = treeItem.getColor().toString();\n-            found = isFilterMatchText(color);\n-        }\n-        if (!found) {\n-            final String foregroundIconLabel = treeItem.getForegroundIcon().getName();\n-            found = isFilterMatchText(foregroundIconLabel);\n-        }\n-        if (!found) {\n-            if (treeItem.getValidationRegex() != null) {\n-                final String validationLabel = treeItem.getValidationRegex().toString();\n-                found = isFilterMatchText(validationLabel);\n-            }\n-        }\n-        if (!found) {\n-            if (treeItem.getDetectionRegex() != null) {\n-                final String detectionLabel = treeItem.getDetectionRegex().toString();\n-                found = isFilterMatchText(detectionLabel);\n-            }\n-        }\n-        if (!found) {\n-            final String hierachy = treeItem.getHierachy();\n-            found = isFilterMatchText(hierachy);\n-        }\n-        if (!found) {\n-            for (String property : treeItem.getProperties().keySet()) {\n-                final Object propertyValue = treeItem.getProperty(property);\n-                if (propertyValue != null) {\n-                    found = isFilterMatchText(propertyValue.toString());\n-                    if (found) {\n-                        break;\n-                    }\n-                }\n-            }\n-        }\n-        return found;\n+    private boolean isFilterMatchAnyProperty(SchemaVertexType treeItem) {\n+        return isFilterMatchText(treeItem.getName())\n+                || isFilterMatchText(treeItem.getDescription())\n+                || isFilterMatchText(treeItem.getColor().getName())\n+                || isFilterMatchText(treeItem.getForegroundIcon().getName())\n+                || isFilterMatchText(Objects.toString(treeItem.getValidationRegex(), \"\"))\n+                || isFilterMatchText(Objects.toString(treeItem.getDetectionRegex(), \"\"))\n+                || isFilterMatchText(treeItem.getHierachy())\n+                || !(treeItem.getProperties().keySet().isEmpty()) && treeItem.getProperties().keySet().stream().anyMatch(property\n+                -> property != null && isFilterMatchText(property.toString())\n+        );\n     }\n \n     private boolean isFilterMatchText(final String propertyValue) {\n         final String filterInputText = filterText.getText().toLowerCase();\n-        return filterInputText.isEmpty() ? false : startsWithRb.isSelected()\n+        return (filterInputText.isEmpty() || propertyValue.isEmpty()) ? false : startsWithRb.isSelected()\n                 ? propertyValue.toLowerCase().startsWith(filterInputText) : propertyValue.toLowerCase().contains(filterInputText);", "originalCommit": "17846549a982161c51cf34b861e2f43e538b5538", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY2Nzg4Nw==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r433667887", "bodyText": "I added original line to avoid further processing when the strings are null. Feels like the above will still try to process when either is null?", "author": "Auriga2", "createdAt": "2020-06-02T07:16:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzk1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIyNDEyMQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434224121", "bodyText": "see above comment", "author": "antares1470", "createdAt": "2020-06-02T23:12:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzk1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI2ODY0NQ==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434268645", "bodyText": "Similarly,  && seems to work here.", "author": "Auriga2", "createdAt": "2020-06-03T02:05:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzk1MA=="}], "type": "inlineReview"}, {"oid": "f0d56636798a0ee5c0b1ec2936fa3ab3c29f8284", "url": "https://github.com/constellation-app/constellation/commit/f0d56636798a0ee5c0b1ec2936fa3ab3c29f8284", "message": " Improvements and fix code smells", "committedDate": "2020-06-03T03:28:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk4OTQ0Nw==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434989447", "bodyText": "I'd suggest expanding out the variable name tt.", "author": "cygnus-x-1", "createdAt": "2020-06-04T04:44:19Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/TransactionTypeNodeProvider.java", "diffHunk": "@@ -290,18 +368,17 @@ public boolean isLeaf() {\n                     // Null is a special marker for the single root node.\n                     // Any vertextype that points to itself is in the root layer.\n                     for (final SchemaTransactionType tt : transactionTypes) {\n-                        if (tt.getSuperType() == tt) {\n-                            children.add(createNode(tt));\n+                        if ((tt.getSuperType() == tt) && (isFilterMatchCurrentNode(tt) || filterText.getText().isEmpty())) {", "originalCommit": "f0d56636798a0ee5c0b1ec2936fa3ab3c29f8284", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk4OTUxNg==", "url": "https://github.com/constellation-app/constellation/pull/555#discussion_r434989516", "bodyText": "...and similarly the variable name vt.", "author": "cygnus-x-1", "createdAt": "2020-06-04T04:44:42Z", "path": "CoreSchemaView/src/au/gov/asd/tac/constellation/views/schemaview/providers/VertexTypeNodeProvider.java", "diffHunk": "@@ -394,18 +483,17 @@ public boolean isLeaf() {\n                     // Null is a special marker for the single root node.\n                     // Any vertextype that points to itself is in the root layer.\n                     for (final SchemaVertexType vt : vertexTypes) {\n-                        if (vt.getSuperType() == vt) {\n-                            children.add(createNode(vt));\n+                        if ((vt.getSuperType() == vt) && (isFilterMatchCurrentNodeOrAnyChildren(vt) || filterText.getText().isEmpty())) {", "originalCommit": "f0d56636798a0ee5c0b1ec2936fa3ab3c29f8284", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7633272a6f8f70d8cda24222e4ff75b9892a9587", "url": "https://github.com/constellation-app/constellation/commit/7633272a6f8f70d8cda24222e4ff75b9892a9587", "message": "Fix some non-descriptive variable names", "committedDate": "2020-06-04T05:44:18Z", "type": "commit"}]}