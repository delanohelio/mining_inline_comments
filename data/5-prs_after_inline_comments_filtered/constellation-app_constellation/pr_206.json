{"pr_number": 206, "pr_title": "Dav graph creation fix #158", "pr_createdAt": "2020-01-16T23:52:32Z", "pr_url": "https://github.com/constellation-app/constellation/pull/206", "timeline": [{"oid": "758f13788693487b154d04dd8a6807c6a1cc621b", "url": "https://github.com/constellation-app/constellation/commit/758f13788693487b154d04dd8a6807c6a1cc621b", "message": "Implement fix for #158", "committedDate": "2020-01-16T23:19:33Z", "type": "commit"}, {"oid": "644fcf91941cd9235287d9cf1da4804de6f86505", "url": "https://github.com/constellation-app/constellation/commit/644fcf91941cd9235287d9cf1da4804de6f86505", "message": "Merge pull request #5 from constellation-app/master\n\nUpdate Master", "committedDate": "2020-01-16T23:35:06Z", "type": "commit"}, {"oid": "6a44cf228b5e52bff1692c8e700c27161fffae1e", "url": "https://github.com/constellation-app/constellation/commit/6a44cf228b5e52bff1692c8e700c27161fffae1e", "message": "Merge branch 'master' into DAV-Graph-Creation", "committedDate": "2020-01-16T23:36:01Z", "type": "commit"}, {"oid": "3647a0ba890e533cf6a7b37f09e5c0a65dd3c6e1", "url": "https://github.com/constellation-app/constellation/commit/3647a0ba890e533cf6a7b37f09e5c0a65dd3c6e1", "message": "Code Formatting", "committedDate": "2020-01-16T23:40:36Z", "type": "commit"}, {"oid": "422ea67a731eb3189e8b4d14ed82d3f96cb8ed27", "url": "https://github.com/constellation-app/constellation/commit/422ea67a731eb3189e8b4d14ed82d3f96cb8ed27", "message": "Update comment accuracy", "committedDate": "2020-01-17T00:00:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc0MzAwMQ==", "url": "https://github.com/constellation-app/constellation/pull/206#discussion_r367743001", "bodyText": "Thanks for looking into this so quickly @aldebaran30701.\nJust with this, given we are running this inside setOnAction() something to be mindful of is whether this is running on the JavaFX graphics thread. If so it could lock up the app.\nI will do some testing and get back to you but I like the idea.", "author": "arcturus2", "createdAt": "2020-01-17T02:25:43Z", "path": "CoreDataAccessView/src/au/gov/asd/tac/constellation/views/dataaccess/panes/DataAccessPane.java", "diffHunk": "@@ -208,9 +209,32 @@ public DataAccessPane(DataAccessViewTopComponent topComponent) {\n \n         executeButton.setStyle(GO_STYLE);\n         executeButton.setOnAction((ActionEvent event) -> {\n+            boolean pluginSelected = false;\n+            boolean selectedPluginsValid = true;\n+            \n+            // check for activated plugins and their validity.\n+            for (Tab tab : dataAccessTabPane.getTabs()) {\n+                if (tabHasEnabledPlugins(tab)) {\n+                    pluginSelected = true;\n+                    if (!validateTabEnabledPlugins(tab)) {\n+                        selectedPluginsValid = false;\n+                    }\n+                } \n+            }\n+            // when no graph present, create new graph\n+            if(graphId == null){\n+                if (pluginSelected && selectedPluginsValid) {\n+                    NewDefaultSchemaGraphAction graphAction = new NewDefaultSchemaGraphAction();\n+                    graphAction.actionPerformed(null);\n+                    while(GraphManager.getDefault().getActiveGraph() == null){", "originalCommit": "422ea67a731eb3189e8b4d14ed82d3f96cb8ed27", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMzOTEwNQ==", "url": "https://github.com/constellation-app/constellation/pull/206#discussion_r368339105", "bodyText": "@aldebaran30701 I had a look at this and yes this is running on the FX thread and it does lock up the application. I don't think we can do anything in this case unless we have a progress circle saying that something is happening. I'll say that this is out of scope for this ticket though.\nDuring testing I noticed that when I pressed go, the plugin I had set to run didn't run. I had to click Go again to make the plugin run. Have you seen this? This was happening every single time to me so it didn't work as expected. The test I did was add \"www.google.com\" to the \"Extract Types from Text\" plugin. I expected a node on the graph after it created the graph but it's empty.\nCan you have a look when you get the chance @aldebaran30701?", "author": "arcturus2", "createdAt": "2020-01-20T00:56:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc0MzAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODM2ODc5NQ==", "url": "https://github.com/constellation-app/constellation/pull/206#discussion_r368368795", "bodyText": "I've just got around to checking this out.\nI notice what you mean about hanging, it appears frozen but then loads the graph. I am currently unsure how I could go about loading the graph without the delay. If I load it on another thread, the user still waits, only the UI will be usable.\nGreat catch! The Graph State was null in the first call to Update(), which then initialized it. I added some initialization code just after the graph ID assigning so it will work on one click. this shouldn't effect load times.", "author": "aldebaran30701", "createdAt": "2020-01-20T04:48:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc0MzAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODM4MDEyMg==", "url": "https://github.com/constellation-app/constellation/pull/206#discussion_r368380122", "bodyText": "Thanks @aldebaran30701 its working great now and very intuitive.\nWith regards to the delay I tried running some of the work in a different thread and it took longer lol so I think it's current behaviour is something we have to live with.\nOn web apps now that follow Material UI then have a small loading bar at the top. Something like that would be pretty cool I reckon.", "author": "arcturus2", "createdAt": "2020-01-20T06:00:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc0MzAwMQ=="}], "type": "inlineReview"}, {"oid": "8bdcbf403abe718d209ed2dba90620ff19f9a16b", "url": "https://github.com/constellation-app/constellation/commit/8bdcbf403abe718d209ed2dba90620ff19f9a16b", "message": "Merge pull request #6 from constellation-app/master\n\nUpdate Master", "committedDate": "2020-01-20T04:22:11Z", "type": "commit"}, {"oid": "d4eccb8a2d7dd47d627bd110e0132d09abbc3a6c", "url": "https://github.com/constellation-app/constellation/commit/d4eccb8a2d7dd47d627bd110e0132d09abbc3a6c", "message": "Merge branch 'master' into DAV-Graph-Creation", "committedDate": "2020-01-20T04:22:51Z", "type": "commit"}, {"oid": "5bb74424194890beb3334778586e6994867cc560", "url": "https://github.com/constellation-app/constellation/commit/5bb74424194890beb3334778586e6994867cc560", "message": "Add GraphState for newly built graph", "committedDate": "2020-01-20T04:42:52Z", "type": "commit"}]}