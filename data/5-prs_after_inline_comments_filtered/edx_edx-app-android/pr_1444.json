{"pr_number": 1444, "pr_title": "Show fields error after at least once focus has lost", "pr_createdAt": "2020-07-27T17:20:18Z", "pr_url": "https://github.com/edx/edx-app-android/pull/1444", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE0MzAyMQ==", "url": "https://github.com/edx/edx-app-android/pull/1444#discussion_r463143021", "bodyText": "I think the following lines of code will cover the story requirement\n        // Add text change listener\n        mEditText.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\n            }\n\n            @Override\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\n                // Clear Error from the field\n                if (mErrorTextView.getVisibility() == View.VISIBLE) {\n                    mErrorTextView.setText(null);\n                    mErrorTextView.setVisibility(View.GONE);\n                    mTextInputLayout.setContentDescription(null);\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable s) {\n            }\n        });\n\n        mEditText.setOnFocusChangeListener((v, hasFocus) -> {\n            if (!hasFocus) {\n                isValidInput();\n            }\n        });", "author": "farhan-arshad-dev", "createdAt": "2020-07-30T17:04:03Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/registration/view/RegistrationEditTextView.java", "diffHunk": "@@ -92,13 +93,23 @@ public void onTextChanged(CharSequence s, int start, int before, int count) {\n                     isChangedByUser = true;\n                     return;\n                 }\n-                isValidInput();\n+                // Don't show the error until view has lost the focus at least once\n+                if (hasFocusLost) {\n+                    isValidInput();\n+                }\n             }\n \n             @Override\n             public void afterTextChanged(Editable s) {\n             }\n         });\n+\n+        mEditText.setOnFocusChangeListener((v, hasFocus) -> {\n+            if (!hasFocus) {\n+                isValidInput();\n+                hasFocusLost = true;\n+            }\n+        });\n     }", "originalCommit": "f6076d386d0e55397a8380ec31741058bc69e5e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTAwMzcwNQ==", "url": "https://github.com/edx/edx-app-android/pull/1444#discussion_r465003705", "bodyText": "As per discussion on LEARNER-7767 Hilary approved the iOS flow implemented by @saeedbashir", "author": "omerhabib26", "createdAt": "2020-08-04T12:10:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE0MzAyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2NTc4NQ==", "url": "https://github.com/edx/edx-app-android/pull/1444#discussion_r465065785", "bodyText": "AutoComplete not showing error on focus out, to solve this issue we need to make the method call isValidInput();", "author": "farhan-arshad-dev", "createdAt": "2020-08-04T13:52:32Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/module/registration/view/RegistrationSelectView.java", "diffHunk": "@@ -87,8 +91,10 @@ public void afterTextChanged(Editable s) {\n         mInputView.setOnFocusChangeListener(new View.OnFocusChangeListener() {\n             @Override\n             public void onFocusChange(View v, boolean hasFocus) {\n-                if(hasFocus){\n+                if (hasFocus) {\n                     mInputView.showDropDown();\n+                } else {\n+                    hasFocusLost = true;", "originalCommit": "9a91cbb14e65c75a47caa40a775b873454e9bf43", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c9a3f9cd977e85a9756593132501a25a935b3822", "url": "https://github.com/edx/edx-app-android/commit/c9a3f9cd977e85a9756593132501a25a935b3822", "message": "Show fields error after at least once focus has lost\n- LEARNER-7780\n- Highlight error once focus has lost on first time input\n- after once follow the previous flow", "committedDate": "2020-08-04T15:07:54Z", "type": "commit"}, {"oid": "c9a3f9cd977e85a9756593132501a25a935b3822", "url": "https://github.com/edx/edx-app-android/commit/c9a3f9cd977e85a9756593132501a25a935b3822", "message": "Show fields error after at least once focus has lost\n- LEARNER-7780\n- Highlight error once focus has lost on first time input\n- after once follow the previous flow", "committedDate": "2020-08-04T15:07:54Z", "type": "forcePushed"}]}