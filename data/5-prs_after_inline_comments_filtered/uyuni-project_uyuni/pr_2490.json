{"pr_number": 2490, "pr_title": "Add filter during remote commands to machines only in maintenance mode", "pr_createdAt": "2020-08-14T14:07:58Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2490", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDY4MTg2Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/2490#discussion_r470681863", "bodyText": "I think the ! (not) is wrong here. When a system is in maintenance mode, we can run remote commands.", "author": "mcalmer", "createdAt": "2020-08-14T15:05:15Z", "path": "java/code/src/com/suse/manager/webui/websocket/RemoteMinionCommands.java", "diffHunk": "@@ -133,8 +135,10 @@ public void onMessage(Session session, String messageBody) {\n             int timeOut = 600; // 10 minutes\n \n             if (msg.isPreview()) {\n+\n                 List<String> allVisibleMinions = MinionServerFactory\n                         .lookupVisibleToUser(webSession.getUser())\n+                        .filter(m -> !mm.isSystemInMaintenanceMode(m))", "originalCommit": "773140d4ff23843a1ebc4746a942eb13b8fc49d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc2NzQxOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2490#discussion_r470767419", "bodyText": "Agreed, we discussed offline and I think Martin is about to fix it.", "author": "ncounter", "createdAt": "2020-08-14T17:47:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDY4MTg2Mw=="}], "type": "inlineReview"}, {"oid": "f2f7261b4b8ecad8f028b96e43bcb42a0b3695f0", "url": "https://github.com/uyuni-project/uyuni/commit/f2f7261b4b8ecad8f028b96e43bcb42a0b3695f0", "message": "filter machines not in maintenance mode for remote commands", "committedDate": "2020-08-17T08:53:16Z", "type": "commit"}, {"oid": "81b29420adea5e5ae343ee2478d058af82d4ea1a", "url": "https://github.com/uyuni-project/uyuni/commit/81b29420adea5e5ae343ee2478d058af82d4ea1a", "message": "update changelog", "committedDate": "2020-08-17T08:53:16Z", "type": "commit"}, {"oid": "81b29420adea5e5ae343ee2478d058af82d4ea1a", "url": "https://github.com/uyuni-project/uyuni/commit/81b29420adea5e5ae343ee2478d058af82d4ea1a", "message": "update changelog", "committedDate": "2020-08-17T08:53:16Z", "type": "forcePushed"}]}