{"pr_number": 2416, "pr_title": "Fix rhel clones products detection", "pr_createdAt": "2020-07-14T15:57:36Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2416", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQxMzM1OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2416#discussion_r456413358", "bodyText": "Tested on Oracle Linux and with Salt 3000 the os grain is OEL.", "author": "mateiw", "createdAt": "2020-07-17T12:35:11Z", "path": "java/code/src/com/suse/manager/reactor/messaging/RegistrationUtils.java", "diffHunk": "@@ -363,12 +363,14 @@ public static void subscribeMinionToChannels(SystemQuery systemQuery, MinionServ\n                     })).collect(toSet());\n         }\n         else if (\"redhat\".equalsIgnoreCase(grains.getValueAsString(OS)) ||\n-                \"centos\".equalsIgnoreCase(grains.getValueAsString(OS))) {\n+                 \"centos\".equalsIgnoreCase(grains.getValueAsString(OS)) ||\n+                 \"oracle\".equalsIgnoreCase(grains.getValueAsString(OS))) {", "originalCommit": "543176b6fceb8b9cd1b5feedcd3365d0dc411415", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3OTM5NA==", "url": "https://github.com/uyuni-project/uyuni/pull/2416#discussion_r456779394", "bodyText": "Thanks. Fixed", "author": "mcalmer", "createdAt": "2020-07-18T11:15:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQxMzM1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU1NzgwNA==", "url": "https://github.com/uyuni-project/uyuni/pull/2416#discussion_r456557804", "bodyText": "In the DB the name of the product is one of oraclelinux-6, oraclelinux-7 or oraclelinux-8 but this method will look for the product by the lower cased name i.e. oraclelinux", "author": "mateiw", "createdAt": "2020-07-17T16:49:25Z", "path": "java/code/src/com/suse/manager/reactor/utils/RhelUtils.java", "diffHunk": "@@ -207,6 +222,11 @@ public String getRelease() {\n                     majorVersion, release, arch));\n         }\n \n+        // next check if OracleLinux\n+        if (oracleReleaseFile.filter(StringUtils::isNotBlank).isPresent()) {\n+            return oracleReleaseFile.map(v -> detectPlainRHEL(v, arch, \"OracleLinux\"));", "originalCommit": "543176b6fceb8b9cd1b5feedcd3365d0dc411415", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYxMzYzNg==", "url": "https://github.com/uyuni-project/uyuni/pull/2416#discussion_r456613636", "bodyText": "Right, the fix for this is also in this PR. The additional_products.json file will change the db entries after a mgr-sync refresh", "author": "mcalmer", "createdAt": "2020-07-17T18:42:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU1NzgwNA=="}], "type": "inlineReview"}, {"oid": "c960b59aed006fd88bc0900ab3fa8a8b3f3defee", "url": "https://github.com/uyuni-project/uyuni/commit/c960b59aed006fd88bc0900ab3fa8a8b3f3defee", "message": "update changelogs", "committedDate": "2020-07-18T11:11:15Z", "type": "forcePushed"}, {"oid": "e8fad9ccb9f4b67d3b8a6681556c8b408fd13e1d", "url": "https://github.com/uyuni-project/uyuni/commit/e8fad9ccb9f4b67d3b8a6681556c8b408fd13e1d", "message": "update changelog", "committedDate": "2020-07-18T11:14:59Z", "type": "forcePushed"}, {"oid": "c5fafe25a6e6e2f7d826c9798a664efff358969b", "url": "https://github.com/uyuni-project/uyuni/commit/c5fafe25a6e6e2f7d826c9798a664efff358969b", "message": "update changelog", "committedDate": "2020-07-18T11:17:33Z", "type": "forcePushed"}, {"oid": "06e993e5be24d9729fcc4dc714fcdce929dc33be", "url": "https://github.com/uyuni-project/uyuni/commit/06e993e5be24d9729fcc4dc714fcdce929dc33be", "message": "fix redhat-release test", "committedDate": "2020-07-20T12:59:10Z", "type": "commit"}, {"oid": "2a111be31d3d4cb391b89769e16a9a39375fa331", "url": "https://github.com/uyuni-project/uyuni/commit/2a111be31d3d4cb391b89769e16a9a39375fa331", "message": "remove versions from product identifier", "committedDate": "2020-07-20T12:59:10Z", "type": "commit"}, {"oid": "cd2b2822c00dfe25bd3f833a74a2f70e1da5678d", "url": "https://github.com/uyuni-project/uyuni/commit/cd2b2822c00dfe25bd3f833a74a2f70e1da5678d", "message": "find SUSE Products for RedHat clones", "committedDate": "2020-07-20T12:59:10Z", "type": "commit"}, {"oid": "860249042f6232f6a40badc6ee0513a4a6998a9e", "url": "https://github.com/uyuni-project/uyuni/commit/860249042f6232f6a40badc6ee0513a4a6998a9e", "message": "parse and handle oracle-release file to detect OracleLinux", "committedDate": "2020-07-20T12:59:10Z", "type": "commit"}, {"oid": "c835007aaf92e7238925cea002415d81a2797942", "url": "https://github.com/uyuni-project/uyuni/commit/c835007aaf92e7238925cea002415d81a2797942", "message": "get oracle-release content if exists", "committedDate": "2020-07-20T12:59:10Z", "type": "commit"}, {"oid": "4042690c4ee2d978b1b5641b13bc183f189b63d1", "url": "https://github.com/uyuni-project/uyuni/commit/4042690c4ee2d978b1b5641b13bc183f189b63d1", "message": "parse oracle and centos release and return also RedHat like products", "committedDate": "2020-07-20T12:59:10Z", "type": "commit"}, {"oid": "97bce9437bc67c3e4c19e8db0adf0ca9ac2799b2", "url": "https://github.com/uyuni-project/uyuni/commit/97bce9437bc67c3e4c19e8db0adf0ca9ac2799b2", "message": "update changelogs", "committedDate": "2020-07-20T12:59:45Z", "type": "commit"}, {"oid": "538511d621b96bdedacfb0380da5e63dd80318c1", "url": "https://github.com/uyuni-project/uyuni/commit/538511d621b96bdedacfb0380da5e63dd80318c1", "message": "fix centos detection", "committedDate": "2020-07-20T12:59:47Z", "type": "commit"}, {"oid": "c6b629c63b0fe2f605bd98174692feb795581cf1", "url": "https://github.com/uyuni-project/uyuni/commit/c6b629c63b0fe2f605bd98174692feb795581cf1", "message": "update changelog", "committedDate": "2020-07-20T13:00:09Z", "type": "commit"}, {"oid": "c6b629c63b0fe2f605bd98174692feb795581cf1", "url": "https://github.com/uyuni-project/uyuni/commit/c6b629c63b0fe2f605bd98174692feb795581cf1", "message": "update changelog", "committedDate": "2020-07-20T13:00:09Z", "type": "forcePushed"}]}