{"pr_number": 553, "pr_title": "VERY EXPERIMENTAL: refactoring storage of pause and resume", "pr_createdAt": "2020-12-22T20:52:24Z", "pr_url": "https://github.com/OpenTracksApp/OpenTracks/pull/553", "timeline": [{"oid": "0b59ea96293bffba8fdae0a50e4d467030d46a81", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/0b59ea96293bffba8fdae0a50e4d467030d46a81", "message": "Use system time instead of GPS-provided time.", "committedDate": "2020-12-24T19:42:21Z", "type": "forcePushed"}, {"oid": "dea018565692fa92c768216c1ec8d3f833006867", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/dea018565692fa92c768216c1ec8d3f833006867", "message": "Use system time instead of GPS-provided time.", "committedDate": "2020-12-25T18:32:30Z", "type": "forcePushed"}, {"oid": "3a1ae3405c6086bf33b79b67ed4097734b763c75", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/3a1ae3405c6086bf33b79b67ed4097734b763c75", "message": "Track segmentation: only insert one trackpoint and set the type.\nExisting data is not migrated.", "committedDate": "2020-12-25T19:27:45Z", "type": "forcePushed"}, {"oid": "a688fc3d3490c586dc7936bc7425d7239007e1c1", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/a688fc3d3490c586dc7936bc7425d7239007e1c1", "message": "Track segmentation: only insert one trackpoint and set the type.\nExisting data is not migrated.", "committedDate": "2020-12-27T22:28:08Z", "type": "forcePushed"}, {"oid": "ada7ac7e66e3f56a26cbd49daf8f52936696de61", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/ada7ac7e66e3f56a26cbd49daf8f52936696de61", "message": "Cleanup.", "committedDate": "2020-12-28T18:32:21Z", "type": "forcePushed"}, {"oid": "4e3fee5ee8420977d8d8d1cf3c055fbac7f6a249", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/4e3fee5ee8420977d8d8d1cf3c055fbac7f6a249", "message": "Cleanup.", "committedDate": "2020-12-29T23:40:43Z", "type": "forcePushed"}, {"oid": "7427783fabec4f4459fdd85db0713e9e2777577e", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/7427783fabec4f4459fdd85db0713e9e2777577e", "message": "Cleanup.", "committedDate": "2021-01-01T11:34:11Z", "type": "forcePushed"}, {"oid": "aeb5bd1d2a4c501e23ded956af3cb3792598673e", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/aeb5bd1d2a4c501e23ded956af3cb3792598673e", "message": "Cleanup.", "committedDate": "2021-01-01T18:53:12Z", "type": "forcePushed"}, {"oid": "bdf9c3d8e9ded5aefedae334b4849411e4435aae", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/bdf9c3d8e9ded5aefedae334b4849411e4435aae", "message": "Cleanup.", "committedDate": "2021-01-01T19:03:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk5MjQ1Nw==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/553#discussion_r550992457", "bodyText": "That's not gonna work either. It should be 200 * 1E6 \ud83d\ude09", "author": "pstorch", "createdAt": "2021-01-03T11:22:03Z", "path": "src/main/java/de/dennisguse/opentracks/content/provider/CustomSQLiteOpenHelper.java", "diffHunk": "@@ -345,8 +345,8 @@ private void upgradeFrom29to30(SQLiteDatabase db) {\n \n         // TrackPoints\n         db.execSQL(\"ALTER TABLE trackpoints ADD COLUMN type TEXT CHECK(type IN (-2, -1, 0, 1))\");\n-        db.execSQL(\"UPDATE trackpoints SET type = -2, latitude = NULL, longitude = NULL WHERE latitude = 200.0\");\n-        db.execSQL(\"UPDATE trackpoints SET type = 1, latitude = NULL, longitude = NULL WHERE latitude = 100.0\");\n+        db.execSQL(\"UPDATE trackpoints SET type = -2, latitude = NULL, longitude = NULL WHERE latitude = 200\");", "originalCommit": "9425684543a12dc4cd22cba305809a3dab5897e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk5NjYyNA==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/553#discussion_r550996624", "bodyText": "Grummel ;)", "author": "dennisguse", "createdAt": "2021-01-03T12:02:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk5MjQ1Nw=="}], "type": "inlineReview"}, {"oid": "9402de10063611e9387f483fbcccf03ecbc9c069", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/9402de10063611e9387f483fbcccf03ecbc9c069", "message": "Fix database migration (it is an Integer not a double).", "committedDate": "2021-01-03T12:07:07Z", "type": "forcePushed"}, {"oid": "6e71934b29218473cd3d242198861e4f59349ecb", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/6e71934b29218473cd3d242198861e4f59349ecb", "message": "Fix database migration (it is an Integer not a double).", "committedDate": "2021-01-03T12:37:04Z", "type": "forcePushed"}, {"oid": "6d705f4be57422f28af0194faa20d59db1b51e52", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/6d705f4be57422f28af0194faa20d59db1b51e52", "message": "Import: restore manual segment start/end if resume/pause trackpoints were exported.", "committedDate": "2021-01-08T06:42:13Z", "type": "forcePushed"}, {"oid": "e3c80c3a5b86003920a6380ca1a8185108727114", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/e3c80c3a5b86003920a6380ca1a8185108727114", "message": "Dashboard API: send protocol version v2.", "committedDate": "2021-01-08T19:43:35Z", "type": "forcePushed"}, {"oid": "77c927f27be4c1585d7efc37766752ddf1063afa", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/77c927f27be4c1585d7efc37766752ddf1063afa", "message": "Marker refactoring.\nLocation values are stored directly.", "committedDate": "2021-01-09T20:41:05Z", "type": "forcePushed"}, {"oid": "be25e3c9f48c389a7d963ffcd66c580ecb9f3b30", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/be25e3c9f48c389a7d963ffcd66c580ecb9f3b30", "message": "Marker refactoring.\nLocation values are stored directly.", "committedDate": "2021-01-10T19:26:29Z", "type": "forcePushed"}, {"oid": "4452a97729206c50ca492136d9375d405a69a9b8", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/4452a97729206c50ca492136d9375d405a69a9b8", "message": "document new TrackPoint segment structure.\n#316.", "committedDate": "2021-01-14T19:15:19Z", "type": "forcePushed"}, {"oid": "8852bed0b945c229dbca0a331ce28c43d7e7e49d", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/8852bed0b945c229dbca0a331ce28c43d7e7e49d", "message": "TrackStatisticsUpdater updates only by adding TrackPoints.\n#316.", "committedDate": "2021-01-15T07:01:01Z", "type": "forcePushed"}, {"oid": "90f0ffee16879d15a65aac940cf9ec46d4eaa43d", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/90f0ffee16879d15a65aac940cf9ec46d4eaa43d", "message": "TrackStatisticsUpdater updates only by adding TrackPoints.\n#316.", "committedDate": "2021-01-16T19:12:39Z", "type": "forcePushed"}, {"oid": "ebf0db85be0fd862cc2c9b1a349933b41d1791dd", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/ebf0db85be0fd862cc2c9b1a349933b41d1791dd", "message": "Import: compute TrackStatistics onTrackEnd.\nExportImportTest were not checking TrackStatistics correctly.\n\n#316.", "committedDate": "2021-01-17T09:15:18Z", "type": "forcePushed"}, {"oid": "c8b1027de47cb88f0f42894fe200f470bd7f0a63", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/c8b1027de47cb88f0f42894fe200f470bd7f0a63", "message": "Import: empty tracks cannot be imported as TrackStatistics cannot be restored.\n#316.", "committedDate": "2021-01-23T11:47:25Z", "type": "forcePushed"}, {"oid": "3cb2a33a30323e923a5b017dc11995a336cdede1", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/3cb2a33a30323e923a5b017dc11995a336cdede1", "message": "Segments: use TrackPoint.type.\nSo, far specific latitude for segment start/end (i.e., PAUSE/RESUME) was used.\n#316.", "committedDate": "2021-01-24T20:36:26Z", "type": "commit"}, {"oid": "3b0229100e6a31c67652dd862bcc0ee96890ae52", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/3b0229100e6a31c67652dd862bcc0ee96890ae52", "message": "Use system time instead of GPS-provided time.\n#316.", "committedDate": "2021-01-24T20:36:26Z", "type": "commit"}, {"oid": "0fcbd4c8c127c324fdbb48d34eb8635bd46e146d", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/0fcbd4c8c127c324fdbb48d34eb8635bd46e146d", "message": "Segments: only insert one trackpoint and set the type.\nExisting data is not migrated.\n#316.", "committedDate": "2021-01-24T20:36:26Z", "type": "commit"}, {"oid": "24657b123933c1457952d7b5f23a8c1b5fd8fb46", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/24657b123933c1457952d7b5f23a8c1b5fd8fb46", "message": "Segments: import/export is working incl. restoring TrackStatistics.\nKML exports sensor data if actually present.\n\n#316.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "9b26f4f706c9230cdc8e2a3779f358c882a86c43", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/9b26f4f706c9230cdc8e2a3779f358c882a86c43", "message": "Cleanup.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "871b0a25b5d5b6a2936704d9de61d9b57ff69ae0", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/871b0a25b5d5b6a2936704d9de61d9b57ff69ae0", "message": "Segments: on import restore manual segment start/end if resume/pause trackpoints were exported.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "ff2789ef300c131b8468fdb2d7b2aa6d24c17d1b", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/ff2789ef300c131b8468fdb2d7b2aa6d24c17d1b", "message": "Segments: document new TrackPoint segment structure.\n#316.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "99230597da6f1bc11d663c2a9dad809f0ba4fa1b", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/99230597da6f1bc11d663c2a9dad809f0ba4fa1b", "message": "Dashboard API: send protocol version v2.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "7fa955c81104e64337d13b54202d47847fcc1c2e", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/7fa955c81104e64337d13b54202d47847fcc1c2e", "message": "Replace `long time_ms` with Instant and Duration, respectively.\nFixes #561.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "1f6f1920f0f7383fac0146311167ac054aabba83", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/1f6f1920f0f7383fac0146311167ac054aabba83", "message": "Cleanup.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "7de402fd0c75950382f631328565457eaf1115f6", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/7de402fd0c75950382f631328565457eaf1115f6", "message": "TrackStatistics startTime/stopTime is null on creation.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "da21d069db339eb4e52a4eeb7811fd5c0ad48fd3", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/da21d069db339eb4e52a4eeb7811fd5c0ad48fd3", "message": "TrackDataHub always sends via handler.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "63faeafb894100635e6dcbdb680c5ec05e60fee7", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/63faeafb894100635e6dcbdb680c5ec05e60fee7", "message": "Marker refactoring.\nLocation values are stored directly.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "3b721f8b80aedee51cfa24a09bbc875fbaf71458", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/3b721f8b80aedee51cfa24a09bbc875fbaf71458", "message": "TrackStatisticsUpdater updates only by adding TrackPoints.\n#316.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "91c4349a89579a727d3cc79033b7dd9d811fae59", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/91c4349a89579a727d3cc79033b7dd9d811fae59", "message": "Import: compute TrackStatistics onTrackEnd.\nExportImportTest were not checking TrackStatistics correctly.\n\n#316.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "4dab1eb744cde3dcfd74fec50635147a2956b8ba", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/4dab1eb744cde3dcfd74fec50635147a2956b8ba", "message": "Import: segments might contain no TrackPoints.\n#316.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "641df071281de772e37a08af67cb665dacd90ff3", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/641df071281de772e37a08af67cb665dacd90ff3", "message": "Import: empty tracks cannot be imported as TrackStatistics cannot be restored.\n#316.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "c45f867ec6ad9b7475044edd2e6615f947226ee0", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/c45f867ec6ad9b7475044edd2e6615f947226ee0", "message": "TrackStatistics: merge previous segment whenever a new starts/ends.", "committedDate": "2021-01-24T20:36:27Z", "type": "commit"}, {"oid": "c45f867ec6ad9b7475044edd2e6615f947226ee0", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/c45f867ec6ad9b7475044edd2e6615f947226ee0", "message": "TrackStatistics: merge previous segment whenever a new starts/ends.", "committedDate": "2021-01-24T20:36:27Z", "type": "forcePushed"}]}