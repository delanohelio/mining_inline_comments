{"pr_number": 239, "pr_title": "doc is now rebuilt immediately before sending publish event", "pr_createdAt": "2020-02-26T22:11:20Z", "pr_url": "https://github.com/redhataccess/pantheon/pull/239", "timeline": [{"oid": "d694ba1b070feea7e34e0d24d63aaa0e7704f985", "url": "https://github.com/redhataccess/pantheon/commit/d694ba1b070feea7e34e0d24d63aaa0e7704f985", "message": "doc is now rebuilt immediately before sending publish event", "committedDate": "2020-02-26T22:08:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDg3NDQ1Ng==", "url": "https://github.com/redhataccess/pantheon/pull/239#discussion_r384874456", "bodyText": "seems like we already have fetched some of those values:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        Optional<ModuleVersion> versionToRelease = getModule(request).getReleasedVersion(getLocale(request));\n          \n          \n            \n                        Optional<ModuleVersion> versionToRelease = module.getReleasedVersion(locale);", "author": "carlosmunoz", "createdAt": "2020-02-27T02:01:27Z", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/module/PublishDraftVersion.java", "diffHunk": "@@ -58,6 +63,14 @@ public void run(SlingHttpServletRequest request, PostResponse response, SlingPos\n             Locale locale = getLocale(request);\n             Module module = getModule(request);\n             ModuleLocale moduleLocale = module.getModuleLocale(locale);\n+\n+\n+            //FIXME - this is a hack that needs to be removed when we have the attribute placeholder logic implemented\n+            Optional<ModuleVersion> versionToRelease = getModule(request).getReleasedVersion(getLocale(request));", "originalCommit": "d694ba1b070feea7e34e0d24d63aaa0e7704f985", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDg3NDY2NQ==", "url": "https://github.com/redhataccess/pantheon/pull/239#discussion_r384874665", "bodyText": "not sure we need this... an empty context will do in this scenario", "author": "carlosmunoz", "createdAt": "2020-02-27T02:02:25Z", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/module/PublishDraftVersion.java", "diffHunk": "@@ -58,6 +63,14 @@ public void run(SlingHttpServletRequest request, PostResponse response, SlingPos\n             Locale locale = getLocale(request);\n             Module module = getModule(request);\n             ModuleLocale moduleLocale = module.getModuleLocale(locale);\n+\n+\n+            //FIXME - this is a hack that needs to be removed when we have the attribute placeholder logic implemented\n+            Optional<ModuleVersion> versionToRelease = getModule(request).getReleasedVersion(getLocale(request));\n+            Map<String, Object> context = asciidoctorService.buildContextFromRequest(request);", "originalCommit": "d694ba1b070feea7e34e0d24d63aaa0e7704f985", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ea4b7648aeb2e95cfd9c3fabf4f7e44f38c0596b", "url": "https://github.com/redhataccess/pantheon/commit/ea4b7648aeb2e95cfd9c3fabf4f7e44f38c0596b", "message": "Simplifying due to review feedback", "committedDate": "2020-02-27T15:47:21Z", "type": "commit"}]}