{"pr_number": 6502, "pr_title": "Automated deck renaming", "pr_createdAt": "2020-06-19T00:29:06Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6502", "timeline": [{"oid": "dc03062afe23971d44a295220d1da14b6e1b437f", "url": "https://github.com/ankidroid/Anki-Android/commit/dc03062afe23971d44a295220d1da14b6e1b437f", "message": "In case of duplicate deck name, add \"+\"\n\nThis is the new behaviour in anki", "committedDate": "2020-06-19T00:14:30Z", "type": "commit"}, {"oid": "3156b67c71cf76e52c2351b8b03851a0f76141ce", "url": "https://github.com/ankidroid/Anki-Android/commit/3156b67c71cf76e52c2351b8b03851a0f76141ce", "message": "Change :: before looking for duplicate deck name", "committedDate": "2020-06-19T00:16:32Z", "type": "commit"}, {"oid": "af55f5e398bf37985523655650e949ead740b027", "url": "https://github.com/ankidroid/Anki-Android/commit/af55f5e398bf37985523655650e949ead740b027", "message": "Replace \"::::\" by \"blank\" in deck name\n\nthis is consistent with current behaviour", "committedDate": "2020-06-19T00:19:27Z", "type": "commit"}, {"oid": "882517d66226407a4a6d87cc38a1208ff9e2ed58", "url": "https://github.com/ankidroid/Anki-Android/commit/882517d66226407a4a6d87cc38a1208ff9e2ed58", "message": "Empty deck name is replaced by \"blank\"\n\nTo be consistent with upstream", "committedDate": "2020-06-19T00:22:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU4Mjg2Mg==", "url": "https://github.com/ankidroid/Anki-Android/pull/6502#discussion_r442582862", "bodyText": "Please note this is not a request for change. I think this is kind of C-like code though, and it's more expressive to use String.contains(otherString) when that's what you are really asking. I checked and in real scenarios comparing two Strings the performance is the same. Not worth changing at all - it's a weak opinion in an area we have no standard on, just a language nerd note.", "author": "mikehardy", "createdAt": "2020-06-19T01:24:43Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Decks.java", "diffHunk": "@@ -792,7 +792,10 @@ private void _checkDeckTree() {\n             // ensure no sections are blank\n             if (deck.getString(\"name\").indexOf(\"::::\") != -1) {\n                 Timber.i(\"fix deck with missing sections %s\", deck.getString(\"name\"));\n-                deck.put(\"name\", \"recovered\"+Utils.intTime(1000));\n+                do {\n+                    deck.put(\"name\", deck.getString(\"name\").replace(\"::::\", \"::blank::\"));\n+                    // We may need to iterate, in order to replace \"::::::\" and adding to \"blank\" in it.\n+                } while (deck.getString(\"name\").indexOf(\"::::\") != -1);", "originalCommit": "af55f5e398bf37985523655650e949ead740b027", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}