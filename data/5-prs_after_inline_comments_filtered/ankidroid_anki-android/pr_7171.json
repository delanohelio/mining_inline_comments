{"pr_number": 7171, "pr_title": "NF: represents counts as a class", "pr_createdAt": "2020-09-20T08:04:55Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/7171", "timeline": [{"oid": "c71cf08e0be8b1d0d508143409c352c9d152b3fc", "url": "https://github.com/ankidroid/Anki-Android/commit/c71cf08e0be8b1d0d508143409c352c9d152b3fc", "message": "NF: represent counts's index as enum", "committedDate": "2020-09-20T08:30:36Z", "type": "forcePushed"}, {"oid": "23033549caf94179b686725ef51421dab9d830f3", "url": "https://github.com/ankidroid/Anki-Android/commit/23033549caf94179b686725ef51421dab9d830f3", "message": "NF: represent counts's index as enum", "committedDate": "2020-09-20T08:32:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjQ5Nw==", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#discussion_r491706497", "bodyText": "It's a Queue not a Column really, isn't it? This feels like a mental hold-over from the int[0,1,2] previous vs naming it what it really represents", "author": "mikehardy", "createdAt": "2020-09-20T16:12:13Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sched/Counts.java", "diffHunk": "@@ -11,6 +13,10 @@\n  * Represents the three counts shown in deck picker and reviewer. Semantically more meaningful than int[]\n  */\n public class Counts {\n+    public enum Column {", "originalCommit": "23033549caf94179b686725ef51421dab9d830f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcyNTY0Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#discussion_r491725646", "bodyText": "In my head, I was thinking about the column of number in the deck picker. It counts the number of elements in the queue. But I honestly don't care about the name. I find .getNew() far more than [0], then whether it's a queue or a column matter little", "author": "Arthur-Milchior", "createdAt": "2020-09-20T19:31:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjQ5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczMjMzMg==", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#discussion_r491732332", "bodyText": "I agree it is not the most important thing, but access to these can be completely unordered so do like queue better. Thanks", "author": "mikehardy", "createdAt": "2020-09-20T20:44:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjQ5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjYxNg==", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#discussion_r491706616", "bodyText": "it seems like all the Counts usage is encapsulated except this - here you just reach and set something, but the Counts object has some math that it does also. I'd prefer the queue members of Count to be actually encapsulated and not accessed here in this manner for consistency", "author": "mikehardy", "createdAt": "2020-09-20T16:13:49Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sched/Sched.java", "diffHunk": "@@ -133,13 +133,13 @@ public void answerCard(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {\n \n \n     @Override\n-    public int[] counts(@NonNull Card card) {\n-        int[] counts = counts();\n+    public Counts counts(@NonNull Card card) {\n+        Counts counts = counts();\n         int idx = countIdx(card);\n         if (idx == 1) {\n-            counts[1] += card.getLeft() / 1000;\n+            counts.mLrn += card.getLeft() / 1000;", "originalCommit": "9c52bff224fd77f640f93ffa104a66d64d4a77ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcyNTY2Mw==", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#discussion_r491725663", "bodyText": "Corrected.", "author": "Arthur-Milchior", "createdAt": "2020-09-20T19:32:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjYxNg=="}], "type": "inlineReview"}, {"oid": "811285bc94cbf50a7a6ccc84ab2ef456805b60c5", "url": "https://github.com/ankidroid/Anki-Android/commit/811285bc94cbf50a7a6ccc84ab2ef456805b60c5", "message": "NF: represent counts's index as enum", "committedDate": "2020-09-20T19:29:36Z", "type": "forcePushed"}, {"oid": "f76d91444f1df17151b052d8c8e4bb2e05ecba67", "url": "https://github.com/ankidroid/Anki-Android/commit/f76d91444f1df17151b052d8c8e4bb2e05ecba67", "message": "NF: represent counts's index as enum", "committedDate": "2020-09-20T20:53:24Z", "type": "forcePushed"}, {"oid": "6ef47838ca7012307b54e7045d05d88baf6fb111", "url": "https://github.com/ankidroid/Anki-Android/commit/6ef47838ca7012307b54e7045d05d88baf6fb111", "message": "NF: represents counts as a class\n\nI don't like int[] when we know exactly that they are three elements. Furthermore, counts appear in enough place that it\nmakes sens to create a class for it. This makes for more readable code", "committedDate": "2020-09-21T23:50:32Z", "type": "commit"}, {"oid": "a8ecb592bc5a437c106a5bad4592aef410287acb", "url": "https://github.com/ankidroid/Anki-Android/commit/a8ecb592bc5a437c106a5bad4592aef410287acb", "message": "NF: represent counts's index as enum", "committedDate": "2020-09-21T23:50:32Z", "type": "commit"}, {"oid": "a8ecb592bc5a437c106a5bad4592aef410287acb", "url": "https://github.com/ankidroid/Anki-Android/commit/a8ecb592bc5a437c106a5bad4592aef410287acb", "message": "NF: represent counts's index as enum", "committedDate": "2020-09-21T23:50:32Z", "type": "forcePushed"}]}