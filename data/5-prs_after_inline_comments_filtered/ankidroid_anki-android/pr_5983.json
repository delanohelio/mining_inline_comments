{"pr_number": 5983, "pr_title": "LINT: Replace try..close with try-with-resources", "pr_createdAt": "2020-04-12T13:25:36Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/5983", "timeline": [{"oid": "74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "url": "https://github.com/ankidroid/Anki-Android/commit/74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "message": "LINT: Replace try..close with try-with-resources\n\nAutomated lint fix from Android Studio (except 1, which involved moving\na nll variable, then an auto fix)\nFinally, manual undo of the whitespace changes.\n\nAvailable on all API levels:\n\nIn addition to the Java 8 language features and APIs above,\nAndroid Studio 3.0 and later extends support for try-with-resources to\nall Android API levels.\n\nhttps://developer.android.com/studio/write/java8-support", "committedDate": "2020-04-12T13:31:05Z", "type": "commit"}, {"oid": "74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "url": "https://github.com/ankidroid/Anki-Android/commit/74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "message": "LINT: Replace try..close with try-with-resources\n\nAutomated lint fix from Android Studio (except 1, which involved moving\na nll variable, then an auto fix)\nFinally, manual undo of the whitespace changes.\n\nAvailable on all API levels:\n\nIn addition to the Java 8 language features and APIs above,\nAndroid Studio 3.0 and later extends support for try-with-resources to\nall Android API levels.\n\nhttps://developer.android.com/studio/write/java8-support", "committedDate": "2020-04-12T13:31:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIwMTE4MQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/5983#discussion_r407201181", "bodyText": "I double-checked and close exceptions in try-with-resources are suppressed in that you can't handle them, but they are caught and logged which is the same \"recovery\" (or lack of) we are attempting. \ud83d\udc4d", "author": "mikehardy", "createdAt": "2020-04-12T13:51:01Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/multimediacard/fields/BasicAudioClipFieldController.java", "diffHunk": "@@ -147,15 +145,6 @@ public void onActivityResult(int requestCode, int resultCode, Intent data) {\n                 UIUtils.showThemedToast(AnkiDroidApp.getInstance().getApplicationContext(),\n                         AnkiDroidApp.getInstance().getString(R.string.multimedia_editor_something_wrong), true);\n             }\n-            finally {\n-                try {\n-                    if (inputStream != null) {\n-                        inputStream.close();", "originalCommit": "74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIwMTI5Mg==", "url": "https://github.com/ankidroid/Anki-Android/pull/5983#discussion_r407201292", "bodyText": "And this could have thrown I think, so this will actually / maybe fix some issues", "author": "mikehardy", "createdAt": "2020-04-12T13:51:54Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Card.java", "diffHunk": "@@ -163,10 +161,6 @@ public void load() {\n             mODid = cursor.getLong(15);\n             mFlags = cursor.getInt(16);\n             mData = cursor.getString(17);\n-        } finally {\n-            if (cursor != null) {\n-                cursor.close();", "originalCommit": "74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}