{"pr_number": 6727, "pr_title": "Tests whether mCurrentEditedCard is null", "pr_createdAt": "2020-07-23T15:09:13Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6727", "timeline": [{"oid": "eab1d3122a8f83b77abbf1b81f7b674ee62afee0", "url": "https://github.com/ankidroid/Anki-Android/commit/eab1d3122a8f83b77abbf1b81f7b674ee62afee0", "message": "Tests whether mCurrentEditedCard is null\n\nTests throughout the whole code, even if the only problem known to date is in:\n```\nif (!mEditorNote.cids().contains(mCurrentEditedCard.getId())) {\n```\n\nThis should solve #6719", "committedDate": "2020-07-23T15:06:24Z", "type": "commit"}, {"oid": "cd6a9e6b2d8dbc6eee584823d7e3323742a82f1c", "url": "https://github.com/ankidroid/Anki-Android/commit/cd6a9e6b2d8dbc6eee584823d7e3323742a82f1c", "message": "Set mCurrentEditedCard to null when no current card", "committedDate": "2020-07-23T15:15:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU4NzE2NQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6727#discussion_r459587165", "bodyText": "This seems like the right thing to do as I read the whole onCollectionLoaded, but NoteEditor is a mess so it is hard to say for sure. It's clear from the crash not detected in unit tests that our coverage here isn't great but NoteEditor is scheduled for some serious work soon anyway, so hopefully it gets covered ...", "author": "mikehardy", "createdAt": "2020-07-23T16:46:35Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/NoteEditor.java", "diffHunk": "@@ -422,6 +423,7 @@ protected void onCollectionLoaded(Collection col) {\n \n \n         mAedictIntent = false;\n+        mCurrentEditedCard = null;", "originalCommit": "cd6a9e6b2d8dbc6eee584823d7e3323742a82f1c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}