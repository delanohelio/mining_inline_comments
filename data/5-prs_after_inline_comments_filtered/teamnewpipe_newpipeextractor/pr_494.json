{"pr_number": 494, "pr_title": "[media.ccc.de] Add \"recent\" kiosk", "pr_createdAt": "2020-12-22T23:12:51Z", "pr_url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/494", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU1NjUxNw==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/494#discussion_r547556517", "bodyText": "event.getArray(\"persons\").getString(0)", "author": "B0pol", "createdAt": "2020-12-22T23:31:02Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/media_ccc/extractors/MediaCCCRecentKioskExtractor.java", "diffHunk": "@@ -0,0 +1,79 @@\n+package org.schabi.newpipe.extractor.services.media_ccc.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamType;\n+\n+import javax.annotation.Nullable;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+\n+public class MediaCCCRecentKioskExtractor implements StreamInfoItemExtractor {\n+\n+    private final JsonObject event;\n+\n+    public MediaCCCRecentKioskExtractor(final JsonObject event) {\n+        this.event = event;\n+    }\n+\n+    @Override\n+    public String getName() throws ParsingException {\n+        return event.getString(\"title\");\n+    }\n+\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return event.getString(\"frontend_link\");\n+    }\n+\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        return event.getString(\"thumb_url\");\n+    }\n+\n+    @Override\n+    public StreamType getStreamType() throws ParsingException {\n+        return StreamType.VIDEO_STREAM;\n+    }\n+\n+    @Override\n+    public boolean isAd() throws ParsingException {\n+        return false;\n+    }\n+\n+    @Override\n+    public long getDuration() throws ParsingException {\n+        return event.getInt(\"duration\");\n+    }\n+\n+    @Override\n+    public long getViewCount() throws ParsingException {\n+        return event.getInt(\"view_count\");\n+    }\n+\n+    @Override\n+    public String getUploaderName() throws ParsingException {\n+        return \"\";", "originalCommit": "1db2fe41a54ae85765b6cfec72c7101df104d053", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU1OTQ2Mw==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/494#discussion_r547559463", "bodyText": "person contains people who participated in a talk / video. That's more like a tag.\nThe uploader is in our case the conference, but we only have the URL for that conference and making 100 requests to get conference names is a little out of scope.", "author": "TobiGr", "createdAt": "2020-12-22T23:41:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU1NjUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODkxMjA2MQ==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/494#discussion_r548912061", "bodyText": "From the readme:\n\nEvery talk (alias event, in other systems also called lecture or session) is assigned to exactly one conference (e.g. the congress or lecture series like datengarten or openchaos) and consists of multiple files alias recordings. These files can be video or audio recordings of the talk in different formats and languages (live-translation), subtitle tracks as srt or slides as pdf.", "author": "TobiGr", "createdAt": "2020-12-25T21:09:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU1NjUxNw=="}], "type": "inlineReview"}, {"oid": "96cd996d75463d08aaaa89ece15868666a394cbe", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/96cd996d75463d08aaaa89ece15868666a394cbe", "message": "[media.ccc.de] Add \"recent\" kiosk", "committedDate": "2020-12-23T14:55:01Z", "type": "forcePushed"}, {"oid": "ed6ae329b3d7b2ab50c3a2b358281c9ce203c460", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ed6ae329b3d7b2ab50c3a2b358281c9ce203c460", "message": "[media.ccc.de] Add \"recent\" kiosk", "committedDate": "2020-12-25T21:26:58Z", "type": "commit"}, {"oid": "b2154c6e873cc6352e26e1cc0c110af8a3123166", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/b2154c6e873cc6352e26e1cc0c110af8a3123166", "message": "[media.ccc.de] Fix conferences kiosk test", "committedDate": "2020-12-25T22:55:45Z", "type": "commit"}, {"oid": "b2154c6e873cc6352e26e1cc0c110af8a3123166", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/b2154c6e873cc6352e26e1cc0c110af8a3123166", "message": "[media.ccc.de] Fix conferences kiosk test", "committedDate": "2020-12-25T22:55:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk2NzMzMQ==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/494#discussion_r548967331", "bodyText": "do you know what's the difference between length and duration?", "author": "B0pol", "createdAt": "2020-12-26T10:13:46Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/media_ccc/extractors/MediaCCCRecentKioskExtractor.java", "diffHunk": "@@ -0,0 +1,79 @@\n+package org.schabi.newpipe.extractor.services.media_ccc.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamType;\n+\n+import javax.annotation.Nullable;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+\n+public class MediaCCCRecentKioskExtractor implements StreamInfoItemExtractor {\n+\n+    private final JsonObject event;\n+\n+    public MediaCCCRecentKioskExtractor(final JsonObject event) {\n+        this.event = event;\n+    }\n+\n+    @Override\n+    public String getName() throws ParsingException {\n+        return event.getString(\"title\");\n+    }\n+\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return event.getString(\"frontend_link\");\n+    }\n+\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        return event.getString(\"thumb_url\");\n+    }\n+\n+    @Override\n+    public StreamType getStreamType() throws ParsingException {\n+        return StreamType.VIDEO_STREAM;\n+    }\n+\n+    @Override\n+    public boolean isAd() throws ParsingException {\n+        return false;\n+    }\n+\n+    @Override\n+    public long getDuration() throws ParsingException {\n+        return event.getInt(\"duration\");", "originalCommit": "b2154c6e873cc6352e26e1cc0c110af8a3123166", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk2OTU2OA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/494#discussion_r548969568", "bodyText": "no. both values are the same in all 100 entries.", "author": "TobiGr", "createdAt": "2020-12-26T10:41:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk2NzMzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk2Nzc4OA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/494#discussion_r548967788", "bodyText": "this returns an api link. Are you sure it is ok?\nWithout an api request you can build the uploader url, get the last part from this link and add it here: https://media.ccc.de/c/<uploader_id>", "author": "B0pol", "createdAt": "2020-12-26T10:19:18Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/media_ccc/extractors/MediaCCCRecentKioskExtractor.java", "diffHunk": "@@ -0,0 +1,79 @@\n+package org.schabi.newpipe.extractor.services.media_ccc.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamType;\n+\n+import javax.annotation.Nullable;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+\n+public class MediaCCCRecentKioskExtractor implements StreamInfoItemExtractor {\n+\n+    private final JsonObject event;\n+\n+    public MediaCCCRecentKioskExtractor(final JsonObject event) {\n+        this.event = event;\n+    }\n+\n+    @Override\n+    public String getName() throws ParsingException {\n+        return event.getString(\"title\");\n+    }\n+\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return event.getString(\"frontend_link\");\n+    }\n+\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        return event.getString(\"thumb_url\");\n+    }\n+\n+    @Override\n+    public StreamType getStreamType() throws ParsingException {\n+        return StreamType.VIDEO_STREAM;\n+    }\n+\n+    @Override\n+    public boolean isAd() throws ParsingException {\n+        return false;\n+    }\n+\n+    @Override\n+    public long getDuration() throws ParsingException {\n+        return event.getInt(\"duration\");\n+    }\n+\n+    @Override\n+    public long getViewCount() throws ParsingException {\n+        return event.getInt(\"view_count\");\n+    }\n+\n+    @Override\n+    public String getUploaderName() throws ParsingException {\n+        return \"\";\n+    }\n+\n+    @Override\n+    public String getUploaderUrl() throws ParsingException {\n+        return event.getString(\"conference_url\");", "originalCommit": "b2154c6e873cc6352e26e1cc0c110af8a3123166", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk3NDU2MA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/494#discussion_r548974560", "bodyText": "done.\nthe problem is still that the uploader is not shown, because we don't have the uploader name / conference name.\nWe could make an API request to get the conference name and store the value in some static map to reduce the number of requests. Do we need to conference name in the list?", "author": "TobiGr", "createdAt": "2020-12-26T11:45:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk2Nzc4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk3NzI5MQ==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/494#discussion_r548977291", "bodyText": "I now get the conference URL.\nDisadvantage: ~560kB are downloaded, 7 requests made. The number of requests and the size of the retrieve JSON documents can vary extremely. This is because every conference documents contains massive data about their events.\n@Stypox @B0pol @TheAssassin\nEdit: I opened voc/voctoweb#495", "author": "TobiGr", "createdAt": "2020-12-26T12:18:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk2Nzc4OA=="}], "type": "inlineReview"}, {"oid": "41699798fe83093661cbcb42dab78937b14f06fe", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/41699798fe83093661cbcb42dab78937b14f06fe", "message": "[media.ccc.de] Use web URL for uploaderUrl instead of API URL in recent", "committedDate": "2020-12-26T11:47:32Z", "type": "commit"}, {"oid": "41699798fe83093661cbcb42dab78937b14f06fe", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/41699798fe83093661cbcb42dab78937b14f06fe", "message": "[media.ccc.de] Use web URL for uploaderUrl instead of API URL in recent", "committedDate": "2020-12-26T11:47:32Z", "type": "forcePushed"}, {"oid": "d1a0686d2ffd3eedf0f503fc7c63ca8bd943d8e5", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/d1a0686d2ffd3eedf0f503fc7c63ca8bd943d8e5", "message": "[media.ccc.de] Get conference name from API URL", "committedDate": "2020-12-26T12:15:03Z", "type": "commit"}, {"oid": "0cfefe222ac361c257bd88cdc4148aa200ff7e4e", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/0cfefe222ac361c257bd88cdc4148aa200ff7e4e", "message": "Revert \"[media.ccc.de] Get conference name from API URL\"\n\nThis reverts commit d1a0686d2ffd3eedf0f503fc7c63ca8bd943d8e5.", "committedDate": "2020-12-26T15:55:44Z", "type": "commit"}, {"oid": "090dade5b338c278c9a6c8f51c25b6bd2d45d1ed", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/090dade5b338c278c9a6c8f51c25b6bd2d45d1ed", "message": "[media.ccc.de] Add short test for recent kiosk", "committedDate": "2020-12-27T00:03:08Z", "type": "commit"}, {"oid": "674f2227f3a1ca11cbc9101a9d6211ad7babd42a", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/674f2227f3a1ca11cbc9101a9d6211ad7babd42a", "message": "make url pattern static", "committedDate": "2020-12-27T00:27:37Z", "type": "commit"}, {"oid": "ed9402c002e6de521bd1992a08a421d7180d2ccd", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ed9402c002e6de521bd1992a08a421d7180d2ccd", "message": "[media.ccc.de] Escape \".\" in id pattern", "committedDate": "2020-12-27T10:01:10Z", "type": "commit"}]}