{"pr_number": 410, "pr_title": "Fix parsing Soundcloud tracks that contain the term 'sets'", "pr_createdAt": "2020-10-11T03:30:24Z", "pr_url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/410", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIxMDExMw==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/410#discussion_r505210113", "bodyText": "Actually I think I was wrong above and that this should be changed to url.contains(\"/sets/\") && !url.endsWith(\"/sets\") && !url.endsWith(\"/sets/\") so that it only doesn't get soundcloud.com/artist/sets URLs, while e.g. soundcloud.com/artist/track-ending-with-sets still works.", "author": "wb9688", "createdAt": "2020-10-15T06:41:31Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/soundcloud/SoundcloudParsingHelper.java", "diffHunk": "@@ -153,7 +153,7 @@ public static String resolveIdWithEmbedPlayer(String url) throws IOException, Re\n         String response = NewPipe.getDownloader().get(\"https://w.soundcloud.com/player/?url=\"\n                 + URLEncoder.encode(url, \"UTF-8\"), SoundCloud.getLocalization()).responseBody();\n         // handle playlists / sets different and get playlist id via uir field in JSON\n-        if (url.contains(\"sets\") && !url.endsWith(\"sets\") && !url.endsWith(\"sets/\"))\n+        if (url.contains(\"/sets/\") && !url.endsWith(\"sets\") && !url.endsWith(\"sets/\"))", "originalCommit": "313720fe37e6ddea33b4770f51be99c7db525475", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIzMjA1MQ==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/410#discussion_r505232051", "bodyText": "so that it only doesn't get soundcloud.com/artist/sets\n\nYeah, this seems to be working, but it will still error out on a widget-related issue, similar to that of #412 (comment) in where it lacks data. Otherwise it seems to be detecting it as a channel type request just fine", "author": "Scrxtchy", "createdAt": "2020-10-15T06:59:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIxMDExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE4Mzc2MQ==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/410#discussion_r506183761", "bodyText": "With changes in f803558, as URLs need to have their tailing slash removed, it is now impossible for a URL to end in sets/. However I am having a decent struggle determining if ending with sets should be checked if /sets/ is our primary check. This has genuinely caused quite a headache. I have left it in there for safety reasons, but if you think that this would be adequate to be removed, then it shall not be a hassle", "author": "Scrxtchy", "createdAt": "2020-10-16T08:49:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIxMDExMw=="}], "type": "inlineReview"}, {"oid": "ba8eaaf80e913bb6d61787eb12deba6818e439f3", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ba8eaaf80e913bb6d61787eb12deba6818e439f3", "message": "Fix parsing Soundcloud tracks that contain the term 'sets'", "committedDate": "2020-10-15T07:01:43Z", "type": "forcePushed"}, {"oid": "f803558d1d3c87f9cefcbec2819615721d71d05a", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/f803558d1d3c87f9cefcbec2819615721d71d05a", "message": "Fix parsing Soundcloud tracks that contain the term 'sets'", "committedDate": "2020-10-16T08:42:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5MDU4Mw==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/410#discussion_r512190583", "bodyText": "Why not moving this inside resolveIdWithEmbedPlayer?", "author": "Stypox", "createdAt": "2020-10-26T18:46:00Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/soundcloud/linkHandler/SoundcloudChannelLinkHandlerFactory.java", "diffHunk": "@@ -21,6 +21,8 @@ public static SoundcloudChannelLinkHandlerFactory getInstance() {\n     @Override\n     public String getId(String url) throws ParsingException {\n         Utils.checkUrl(URL_PATTERN, url);\n+        // Remove the tailing slash from URLs due to issues with the SoundCloud API\n+        if (url.charAt(url.length() -1) == '/') url = url.substring(0, url.length()-1);", "originalCommit": "f803558d1d3c87f9cefcbec2819615721d71d05a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjMxNTM0NA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/410#discussion_r512315344", "bodyText": "I think I was just mimicking what I did in 6a70cb9\nbut I think I can move everything to that instead\nI don't really remember my branches that well anymore, but I think I got it", "author": "Scrxtchy", "createdAt": "2020-10-26T22:50:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5MDU4Mw=="}], "type": "inlineReview"}, {"oid": "687d321584188809cbefa9e1c73828a541b5dc85", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/687d321584188809cbefa9e1c73828a541b5dc85", "message": "Fix parsing Soundcloud tracks that contain the term 'sets'", "committedDate": "2020-10-26T22:50:17Z", "type": "forcePushed"}, {"oid": "56a6b7c42c23e1e3eddd2ee0640488df7ec7e19b", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/56a6b7c42c23e1e3eddd2ee0640488df7ec7e19b", "message": "Fix parsing Soundcloud tracks that contain the term 'sets'", "committedDate": "2020-10-27T10:00:33Z", "type": "forcePushed"}, {"oid": "947ce3ee10d3a68947cfd7f3a3df6196f8414174", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/947ce3ee10d3a68947cfd7f3a3df6196f8414174", "message": "Fix parsing Soundcloud tracks that contain the term 'sets'", "committedDate": "2020-10-27T20:55:02Z", "type": "commit"}, {"oid": "947ce3ee10d3a68947cfd7f3a3df6196f8414174", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/947ce3ee10d3a68947cfd7f3a3df6196f8414174", "message": "Fix parsing Soundcloud tracks that contain the term 'sets'", "committedDate": "2020-10-27T20:55:02Z", "type": "forcePushed"}]}