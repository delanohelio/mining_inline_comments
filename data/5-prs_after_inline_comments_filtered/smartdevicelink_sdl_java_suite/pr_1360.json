{"pr_number": 1360, "pr_title": "Fix #1351", "pr_createdAt": "2020-05-20T20:00:01Z", "pr_url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1360", "timeline": [{"oid": "9abcf88a4253faae9405d74d82bb224bb425c9b2", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/9abcf88a4253faae9405d74d82bb224bb425c9b2", "message": "Fix #1351", "committedDate": "2020-05-20T19:24:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg1NzA3OA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1360#discussion_r428857078", "bodyText": "I think we should call this method first thing in onCreate() because currently, the service could enter foreground before adding the exception handler", "author": "bilal-alsharifi", "createdAt": "2020-05-21T19:11:06Z", "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterService.java", "diffHunk": "@@ -1170,6 +1178,9 @@ protected void deployNextRouterService(){\n \t}\n \t\n \tpublic void startUpSequence(){\n+\n+\t\tsetRouterServiceExceptionHandler();", "originalCommit": "9abcf88a4253faae9405d74d82bb224bb425c9b2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f1e5a2da78b4e5f13fbffcb9f873d3b5c8978c5d", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/f1e5a2da78b4e5f13fbffcb9f873d3b5c8978c5d", "message": "Move exception handler set to start of oncreate", "committedDate": "2020-05-22T18:11:55Z", "type": "commit"}, {"oid": "3622bf7bafb6aa7553ef5a08e6ea0d45eb2a7e77", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/3622bf7bafb6aa7553ef5a08e6ea0d45eb2a7e77", "message": "Add try/catch to setting prefs in exception handlr", "committedDate": "2020-05-22T18:13:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM5MTc0NQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1360#discussion_r429391745", "bodyText": "Spacing seems to be strange here.", "author": "bilal-alsharifi", "createdAt": "2020-05-22T18:19:22Z", "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterService.java", "diffHunk": "@@ -1107,7 +1107,9 @@ private boolean initCheck(){\n \t@Override\n \tpublic void onCreate() {\n \t\tsuper.onCreate();\n-\t\t//This must be done regardless of if this service shuts down or not\n+\t\t//Add this first to avoid the runtime exceptions for the entire lifecycle of the service\n+        setRouterServiceExceptionHandler();", "originalCommit": "f1e5a2da78b4e5f13fbffcb9f873d3b5c8978c5d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM5MTg1OA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1360#discussion_r429391858", "bodyText": "Spacing seems to be strange here as well.", "author": "bilal-alsharifi", "createdAt": "2020-05-22T18:19:41Z", "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterService.java", "diffHunk": "@@ -1229,7 +1229,11 @@ public void uncaughtException(Thread t, Throwable e) {\n \t\t\t\t\t\t\t&& e.getMessage().contains(\"invalid channel for service notification\")) { //This is the message received in the exception for notification channel issues\n \n \t\t\t\t\t\t// Set the flag to not delete the notification channel to avoid this exception in the future\n-\t\t\t\t\t\tSdlRouterService.this.setSdlRouterServicePrefs(KEY_AVOID_NOTIFICATION_CHANNEL_DELETE, true);\n+\t\t\t\t\t\ttry{\n+\t\t\t\t\t\t    SdlRouterService.this.setSdlRouterServicePrefs(KEY_AVOID_NOTIFICATION_CHANNEL_DELETE, true);\n+                        }catch (Exception exception){", "originalCommit": "3622bf7bafb6aa7553ef5a08e6ea0d45eb2a7e77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "70b159561e5eada8859580532149cbf59c955555", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/70b159561e5eada8859580532149cbf59c955555", "message": "Update spacing", "committedDate": "2020-05-22T18:41:57Z", "type": "commit"}, {"oid": "83d53f1eaa63ea93063c5e2ba545a95af01f2715", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/83d53f1eaa63ea93063c5e2ba545a95af01f2715", "message": "Fix spacing for comment", "committedDate": "2020-05-22T18:42:49Z", "type": "commit"}, {"oid": "f1fa811dda8db3c6de768501380da7858eadfd62", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/f1fa811dda8db3c6de768501380da7858eadfd62", "message": "Remove extra line", "committedDate": "2020-05-22T18:43:56Z", "type": "commit"}, {"oid": "96319543277de7c3ae0ba4f645997c0fcf12e193", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/96319543277de7c3ae0ba4f645997c0fcf12e193", "message": "Update version to 4.11.1", "committedDate": "2020-05-26T14:27:57Z", "type": "commit"}, {"oid": "b6a0a626e1861d7cf313f3281fa9c08682fb540b", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/b6a0a626e1861d7cf313f3281fa9c08682fb540b", "message": "Update CHANGELOG.md", "committedDate": "2020-05-26T14:28:19Z", "type": "commit"}]}