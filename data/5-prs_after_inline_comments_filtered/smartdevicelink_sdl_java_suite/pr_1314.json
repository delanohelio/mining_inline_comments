{"pr_number": 1314, "pr_title": "Bugfix/issue 1282", "pr_createdAt": "2020-03-20T15:33:21Z", "pr_url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314", "timeline": [{"oid": "e504c0373670cefb7ef92ed5070806597b55a2c3", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/e504c0373670cefb7ef92ed5070806597b55a2c3", "message": "Scale Workaround for High Res Ford/Linc displays", "committedDate": "2020-03-19T19:24:47Z", "type": "commit"}, {"oid": "6a98ffb54b4d9ce4476f8468b4c91778afb29e0b", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/6a98ffb54b4d9ce4476f8468b4c91778afb29e0b", "message": "Resolve VideoStreamManagerTests", "committedDate": "2020-03-19T19:57:39Z", "type": "commit"}, {"oid": "94e8fd8d6e2fcd9af831f052c2e110ff2d2e757a", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/94e8fd8d6e2fcd9af831f052c2e110ff2d2e757a", "message": "Implement getRegisterAppInterfaceResponse for SE", "committedDate": "2020-03-19T20:44:11Z", "type": "commit"}, {"oid": "cc7240533a10167e1d1879af1b124d6e9683cc96", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/cc7240533a10167e1d1879af1b124d6e9683cc96", "message": "Add tests for Ford High Res", "committedDate": "2020-03-20T14:33:56Z", "type": "commit"}, {"oid": "0b14a393969a4d12ea637f1d108c6d84f815041a", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/0b14a393969a4d12ea637f1d108c6d84f815041a", "message": "Update parameter comments for update", "committedDate": "2020-03-20T15:32:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjYzNjAwMA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314#discussion_r396636000", "bodyText": "It is possible that VehicleType and Make can be null, need to check for Null", "author": "JulianKast", "createdAt": "2020-03-23T17:41:41Z", "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/video/VideoStreamManager.java", "diffHunk": "@@ -176,10 +177,10 @@ public void onNotified(RPCNotification notification) {\n \t};\n \n \t// MANAGER APIs\n-\n \tpublic VideoStreamManager(ISdl internalInterface){\n \t\tsuper(internalInterface);\n \n+\t\tvehicleMake = internalInterface.getRegisterAppInterfaceResponse().getVehicleType().getMake();", "originalCommit": "0b14a393969a4d12ea637f1d108c6d84f815041a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc0MTMwNQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314#discussion_r396741305", "bodyText": "Added null check for vehicletype, vehicle make will be passed as null if it is returned as null and initialized vehicleMake variable to be null", "author": "RHenigan", "createdAt": "2020-03-23T20:37:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjYzNjAwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY1OTM4MA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314#discussion_r396659380", "bodyText": "vehicleMake can be null here if you check for null in VideoStreamManager and don't set it.", "author": "JulianKast", "createdAt": "2020-03-23T18:17:14Z", "path": "base/src/main/java/com/smartdevicelink/streaming/video/VideoStreamingParameters.java", "diffHunk": "@@ -131,9 +131,52 @@ public void update(VideoStreamingParameters params){\n      * Update the values contained in the capability that should have been returned through the SystemCapabilityManager.\n      * This update will use the most preferred streaming format from the module.\n      * @param capability the video streaming capability returned from the SystemCapabilityManager\n+     * @param vehicleMake the vehicle make from the RegisterAppInterfaceResponse\n      * @see com.smartdevicelink.proxy.SystemCapabilityManager\n      * @see VideoStreamingCapability\n      */\n+    public void update(VideoStreamingCapability capability, String vehicleMake){\n+        if(capability.getMaxBitrate()!=null){ this.bitrate = capability.getMaxBitrate() * 1000; } // NOTE: the unit of maxBitrate in getSystemCapability is kbps.\n+        double scale = DEFAULT_SCALE;\n+        if(capability.getScale() != null) { scale = capability.getScale(); }\n+        ImageResolution resolution = capability.getPreferredResolution();\n+        if(resolution!=null){\n+\n+            if((vehicleMake.contains(\"Ford\") || vehicleMake.contains(\"Lincoln\")) && ((resolution.getResolutionHeight()!=null && resolution.getResolutionHeight() > 800) || (resolution.getResolutionWidth() !=null && resolution.getResolutionWidth() > 800))) {", "originalCommit": "0b14a393969a4d12ea637f1d108c6d84f815041a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc0MTQyNQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314#discussion_r396741425", "bodyText": "added null check for vehiclemake", "author": "RHenigan", "createdAt": "2020-03-23T20:37:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY1OTM4MA=="}], "type": "inlineReview"}, {"oid": "9c5c4c18d32fef734880b4280f905903aacfa6cd", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/9c5c4c18d32fef734880b4280f905903aacfa6cd", "message": "Add null checks for vehicle type and make", "committedDate": "2020-03-23T20:21:16Z", "type": "commit"}]}