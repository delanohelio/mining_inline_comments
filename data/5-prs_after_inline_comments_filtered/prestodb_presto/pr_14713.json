{"pr_number": 14713, "pr_title": "Add session property to set bucket function type", "pr_createdAt": "2020-06-24T03:20:55Z", "pr_url": "https://github.com/prestodb/presto/pull/14713", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA5MTgxOA==", "url": "https://github.com/prestodb/presto/pull/14713#discussion_r445091818", "bodyText": "bucketFunctionType", "author": "arhimondr", "createdAt": "2020-06-24T18:32:50Z", "path": "presto-hive/src/main/java/com/facebook/presto/hive/HiveMetadata.java", "diffHunk": "@@ -2285,7 +2287,22 @@ public ConnectorTableLayoutHandle getAlternativeLayoutHandle(ConnectorSession se\n     @Override\n     public ConnectorPartitioningHandle getPartitioningHandleForExchange(ConnectorSession session, int partitionCount, List<Type> partitionTypes)\n     {\n-        return createPrestoNativePartitioningHandle(partitionCount, partitionTypes, OptionalInt.empty());\n+        BucketFunctionType bucketFunctionType = getBucketFunctionTypeForExchange(session);\n+        switch (getBucketFunctionTypeForExchange(session)) {", "originalCommit": "18c5df5bcaf65b7c904f9ca318070cb3cc11d225", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA5MjA1OQ==", "url": "https://github.com/prestodb/presto/pull/14713#discussion_r445092059", "bodyText": "nit: Hash function type for exchange", "author": "arhimondr", "createdAt": "2020-06-24T18:33:20Z", "path": "presto-hive/src/main/java/com/facebook/presto/hive/HiveClientConfig.java", "diffHunk": "@@ -1082,6 +1085,19 @@ public HiveClientConfig setSortedWritingEnabled(boolean sortedWritingEnabled)\n         return this;\n     }\n \n+    @Config(\"hive.bucket-function-type-for-exchange\")\n+    @ConfigDescription(\"Experimental: hash function type for bucketed table exchange\")", "originalCommit": "18c5df5bcaf65b7c904f9ca318070cb3cc11d225", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA5MjIyMg==", "url": "https://github.com/prestodb/presto/pull/14713#discussion_r445092222", "bodyText": "nit: unnecessary change", "author": "arhimondr", "createdAt": "2020-06-24T18:33:35Z", "path": "presto-hive/src/main/java/com/facebook/presto/hive/HiveClientConfig.java", "diffHunk": "@@ -129,7 +130,9 @@\n     private boolean skipTargetCleanupOnRollback;\n \n     private boolean bucketExecutionEnabled = true;\n+", "originalCommit": "18c5df5bcaf65b7c904f9ca318070cb3cc11d225", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "39b61eab58528fc8d0dfb46e04613e90002b01f8", "url": "https://github.com/prestodb/presto/commit/39b61eab58528fc8d0dfb46e04613e90002b01f8", "message": "Add session property to set bucket function type\n\nTo control hash function type for exchange.", "committedDate": "2020-06-24T19:09:45Z", "type": "commit"}, {"oid": "39b61eab58528fc8d0dfb46e04613e90002b01f8", "url": "https://github.com/prestodb/presto/commit/39b61eab58528fc8d0dfb46e04613e90002b01f8", "message": "Add session property to set bucket function type\n\nTo control hash function type for exchange.", "committedDate": "2020-06-24T19:09:45Z", "type": "forcePushed"}]}