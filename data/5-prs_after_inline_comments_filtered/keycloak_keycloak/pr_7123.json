{"pr_number": 7123, "pr_title": "[KEYCLOAK-14335] - Not initializing entity associations and removing bi-directional ones", "pr_createdAt": "2020-05-29T14:56:02Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7123", "timeline": [{"oid": "3b64c32797a9be2bb4d5139ba363fdf0bd5265ab", "url": "https://github.com/keycloak/keycloak/commit/3b64c32797a9be2bb4d5139ba363fdf0bd5265ab", "message": "[KEYCLOAK-14335] - Not initializing entity associations and removing bi-directional ones", "committedDate": "2020-05-29T14:57:56Z", "type": "forcePushed"}, {"oid": "80ecf7cdaef8653e2900bb31d13d47a913fe2078", "url": "https://github.com/keycloak/keycloak/commit/80ecf7cdaef8653e2900bb31d13d47a913fe2078", "message": "[KEYCLOAK-14335] - Not initializing entity associations and removing bi-directional ones", "committedDate": "2020-05-29T15:32:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY2MTkzMg==", "url": "https://github.com/keycloak/keycloak/pull/7123#discussion_r433661932", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String appEntityId = client !=null ? em.getReference(ClientEntity.class, client.getId()).getId() : null;\n          \n          \n            \n                    realm.setMasterAdminClient(appEntityId);\n          \n          \n            \n                    em.flush();\n          \n          \n            \n                    realm.setMasterAdminClient(client.getId());\n          \n      \n    \n    \n  \n\nI don't think we need to lookup the client here, nor do we need an em.flush here.", "author": "stianst", "createdAt": "2020-06-02T07:03:14Z", "path": "model/jpa/src/main/java/org/keycloak/models/jpa/RealmAdapter.java", "diffHunk": "@@ -1245,8 +1249,8 @@ public ClientModel getMasterAdminClient() {\n \n     @Override\n     public void setMasterAdminClient(ClientModel client) {\n-        ClientEntity appEntity = client !=null ? em.getReference(ClientEntity.class, client.getId()) : null;\n-        realm.setMasterAdminClient(appEntity);\n+        String appEntityId = client !=null ? em.getReference(ClientEntity.class, client.getId()).getId() : null;\n+        realm.setMasterAdminClient(appEntityId);\n         em.flush();", "originalCommit": "80ecf7cdaef8653e2900bb31d13d47a913fe2078", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c2b63dfde111734c9016ca5301f66c4a93a678c9", "url": "https://github.com/keycloak/keycloak/commit/c2b63dfde111734c9016ca5301f66c4a93a678c9", "message": "[KEYCLOAK-14335] - Not initializing entity associations and removing bi-directional ones\n\nCo-authored-by: Stian Thorgersen <stian@redhat.com>\nCo-authored-by: Hynek Mlnarik <hmlnarik@redhat.com>", "committedDate": "2020-06-02T13:26:07Z", "type": "commit"}, {"oid": "c2b63dfde111734c9016ca5301f66c4a93a678c9", "url": "https://github.com/keycloak/keycloak/commit/c2b63dfde111734c9016ca5301f66c4a93a678c9", "message": "[KEYCLOAK-14335] - Not initializing entity associations and removing bi-directional ones\n\nCo-authored-by: Stian Thorgersen <stian@redhat.com>\nCo-authored-by: Hynek Mlnarik <hmlnarik@redhat.com>", "committedDate": "2020-06-02T13:26:07Z", "type": "forcePushed"}]}