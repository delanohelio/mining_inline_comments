{"pr_number": 6937, "pr_title": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForU\u2026", "pr_createdAt": "2020-03-26T20:48:41Z", "pr_url": "https://github.com/keycloak/keycloak/pull/6937", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkzMDAzNg==", "url": "https://github.com/keycloak/keycloak/pull/6937#discussion_r398930036", "bodyText": "Instead of all these changes to UsersResource isn't better to just change org.keycloak.storage.UserStorageManager#searchForUser and call the expected method depending on the SEARCH filter? Something like this:\nif (attributes.containsKey(UserModel.SEARCH)) {\n                    return ((UserQueryProvider)provider).searchForUser(attributes.get(UserModel.SEARCH), realm, first, max);\n                } else {\n                    return ((UserQueryProvider)provider).searchForUser(attributes, realm, first, max);                    \n                }", "author": "pedroigor", "createdAt": "2020-03-26T22:27:32Z", "path": "services/src/main/java/org/keycloak/services/resources/admin/UsersResource.java", "diffHunk": "@@ -325,7 +338,7 @@ public Integer getUsersCount(@QueryParam(\"search\") String search,\n             }\n         }\n \n-        List<UserModel> userModels = session.users().searchForUser(attributes, realm, firstResult, maxResults);\n+        List<UserModel> userModels = searchImpl.get();", "originalCommit": "b968d092a96cbd377c662dc041840b3b69a5896f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTExOTg2NQ==", "url": "https://github.com/keycloak/keycloak/pull/6937#discussion_r399119865", "bodyText": "@pedroigor +1, Updated PR per your suggestion.", "author": "mposolda", "createdAt": "2020-03-27T09:02:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkzMDAzNg=="}], "type": "inlineReview"}, {"oid": "a47de813a402c54cdafffe5d22f45ba42d1e2e4d", "url": "https://github.com/keycloak/keycloak/commit/a47de813a402c54cdafffe5d22f45ba42d1e2e4d", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console", "committedDate": "2020-03-27T08:39:52Z", "type": "forcePushed"}, {"oid": "04895150bbea256600b1c619d19cccea7f0972eb", "url": "https://github.com/keycloak/keycloak/commit/04895150bbea256600b1c619d19cccea7f0972eb", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console", "committedDate": "2020-03-27T08:53:31Z", "type": "forcePushed"}, {"oid": "8d5933a363cc3f46813a69552cc00e2b29df6379", "url": "https://github.com/keycloak/keycloak/commit/8d5933a363cc3f46813a69552cc00e2b29df6379", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console", "committedDate": "2020-03-27T11:16:43Z", "type": "commit"}, {"oid": "8d5933a363cc3f46813a69552cc00e2b29df6379", "url": "https://github.com/keycloak/keycloak/commit/8d5933a363cc3f46813a69552cc00e2b29df6379", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console", "committedDate": "2020-03-27T11:16:43Z", "type": "forcePushed"}]}