{"pr_number": 7233, "pr_title": "KEYCLOAK-14653 Changed operation type to UPDATE when updating client scopes", "pr_createdAt": "2020-07-06T08:15:46Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7233", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTM0NzMzOA==", "url": "https://github.com/keycloak/keycloak/pull/7233#discussion_r555347338", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    adminEvent.operation(OperationType.UPDATE).resource(ResourceType.CLIENT).resourcePath(session.getContext().getUri()).representation(rep).success();\n          \n          \n            \n                            adminEvent.operation(OperationType.CREATE).resource(ResourceType.CLIENT_SCOPE_CLIENT_MAPPING).resourcePath(session.getContext().getUri()).success();", "author": "hmlnarik", "createdAt": "2021-01-11T21:21:32Z", "path": "services/src/main/java/org/keycloak/services/resources/admin/ClientResource.java", "diffHunk": "@@ -344,7 +344,8 @@ private void addDefaultClientScope(String clientScopeId, boolean defaultScope) {\n         }\n         client.addClientScope(clientScope, defaultScope);\n \n-        adminEvent.operation(OperationType.CREATE).resource(ResourceType.CLIENT).resourcePath(session.getContext().getUri()).success();\n+        final ClientRepresentation rep = ModelToRepresentation.toRepresentation(client, session);\n+        adminEvent.operation(OperationType.UPDATE).resource(ResourceType.CLIENT).resourcePath(session.getContext().getUri()).representation(rep).success();", "originalCommit": "33977b472934a3e8645fc9581685c18eb9929719", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTM0OTQxNQ==", "url": "https://github.com/keycloak/keycloak/pull/7233#discussion_r555349415", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    adminEvent.operation(OperationType.UPDATE).resource(ResourceType.CLIENT).resourcePath(session.getContext().getUri()).representation(rep).success();\n          \n          \n            \n                    adminEvent.operation(OperationType.DELETE).resource(ResourceType.CLIENT_SCOPE_CLIENT_MAPPING).resourcePath(session.getContext().getUri()).success();\t```", "author": "hmlnarik", "createdAt": "2021-01-11T21:25:35Z", "path": "services/src/main/java/org/keycloak/services/resources/admin/ClientResource.java", "diffHunk": "@@ -360,7 +361,8 @@ public void removeDefaultClientScope(@PathParam(\"clientScopeId\") String clientSc\n         }\n         client.removeClientScope(clientScope);\n \n-        adminEvent.operation(OperationType.DELETE).resource(ResourceType.CLIENT).resourcePath(session.getContext().getUri()).success();\n+        final ClientRepresentation rep = ModelToRepresentation.toRepresentation(client, session);\n+        adminEvent.operation(OperationType.UPDATE).resource(ResourceType.CLIENT).resourcePath(session.getContext().getUri()).representation(rep).success();", "originalCommit": "33977b472934a3e8645fc9581685c18eb9929719", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "116c025eaf96bff1224a7b877c7707cca81b8f92", "url": "https://github.com/keycloak/keycloak/commit/116c025eaf96bff1224a7b877c7707cca81b8f92", "message": "[KEYCLOAK-14653] Changed operation type to UPDATE when updating client scopes in a client and added representation.", "committedDate": "2021-01-13T11:09:44Z", "type": "commit"}, {"oid": "116c025eaf96bff1224a7b877c7707cca81b8f92", "url": "https://github.com/keycloak/keycloak/commit/116c025eaf96bff1224a7b877c7707cca81b8f92", "message": "[KEYCLOAK-14653] Changed operation type to UPDATE when updating client scopes in a client and added representation.", "committedDate": "2021-01-13T11:09:44Z", "type": "forcePushed"}, {"oid": "cc596c117a78a67769dd4851990ed06dab47dd74", "url": "https://github.com/keycloak/keycloak/commit/cc596c117a78a67769dd4851990ed06dab47dd74", "message": "Applied PR suggestion: added resourceType and changed operation types", "committedDate": "2021-01-13T11:22:23Z", "type": "commit"}, {"oid": "35a4e08d36e3b3bd0e748e24060f2058427d4a76", "url": "https://github.com/keycloak/keycloak/commit/35a4e08d36e3b3bd0e748e24060f2058427d4a76", "message": "Removed representations as suggested", "committedDate": "2021-01-13T11:25:17Z", "type": "commit"}]}