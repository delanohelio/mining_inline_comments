{"pr_number": 7554, "pr_title": "KEYCLOAK-15841 Upgrade rest of the minor forms to PF4", "pr_createdAt": "2020-10-30T09:38:57Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7554", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0MzUwMw==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517243503", "bodyText": "This PO represents a page in the old Account Console, not the login page. It shouldn't be modified.", "author": "vmuzikar", "createdAt": "2020-11-04T10:28:29Z", "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/AccountUpdateProfilePage.java", "diffHunk": "@@ -180,8 +184,16 @@ public String getSuccess(){\n         return successMessage.getText();\n     }\n \n-    public String getError() {\n-        return errorMessage.getText();\n+    public String getAlertError() {\n+        try {\n+            return errorMessage.getText();\n+        } catch (NoSuchElementException e) {\n+            return null;\n+        }\n+    }\n+\n+    public UpdateProfileErrors getInputErrors() {\n+        return errorsPage;", "originalCommit": "9ad14856e4c8b43cbb0122d40dd6993fb94bd886", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ0NjExNw==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517446117", "bodyText": "Ok", "author": "mabartos", "createdAt": "2020-11-04T15:53:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0MzUwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NzA5OQ==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517247099", "bodyText": "Why to make this change in this PR? Shouldn't it belong to #7516 which addresses migration of this file?", "author": "vmuzikar", "createdAt": "2020-11-04T10:34:17Z", "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/LoginTotpPage.java", "diffHunk": "@@ -45,15 +45,30 @@\n     @FindBy(className = \"alert-error\")\n     private WebElement loginErrorMessage;\n \n+    @FindBy(id = \"input-error-otp-code\")\n+    private WebElement totpInputCodeError;\n+\n     public void login(String totp) {\n         otpInput.clear();\n         if (totp != null) otpInput.sendKeys(totp);\n \n         submitButton.click();\n     }\n \n-    public String getError() {\n-        return loginErrorMessage != null ? loginErrorMessage.getText() : null;\n+    public String getAlertError() {\n+        try {\n+            return UIUtils.getTextFromElement(loginErrorMessage);\n+        } catch (NoSuchElementException e) {\n+            return null;\n+        }\n+    }\n+\n+    public String getInputError(){\n+        try {\n+            return UIUtils.getTextFromElement(totpInputCodeError);\n+        } catch (NoSuchElementException e) {\n+            return null;\n+        }", "originalCommit": "9ad14856e4c8b43cbb0122d40dd6993fb94bd886", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM2OTUzNQ==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517369535", "bodyText": "Commented above.", "author": "mabartos", "createdAt": "2020-11-04T14:10:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NzA5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0OTI0Ng==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517249246", "bodyText": "Why to have this as a separate PO (or in fact a page fragment)? I believe it won't be used anywhere but in LoginUpdateProfilePage, correct?", "author": "vmuzikar", "createdAt": "2020-11-04T10:37:46Z", "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/UpdateProfileErrors.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates\n+ * and other contributors as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.keycloak.testsuite.pages;\n+\n+import org.openqa.selenium.NoSuchElementException;\n+import org.openqa.selenium.WebElement;\n+import org.openqa.selenium.support.FindBy;\n+\n+import static org.keycloak.testsuite.util.UIUtils.getTextFromElement;\n+\n+/**\n+ * @author <a href=\"mailto:mabartos@redhat.com\">Martin Bartos</a>\n+ */\n+public class UpdateProfileErrors {", "originalCommit": "9ad14856e4c8b43cbb0122d40dd6993fb94bd886", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM3MTc0Mw==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517371743", "bodyText": "I didn't want to hide main components in LoginUpdateProfilePage by a lot of error fields. So, IMO, it's nicer to separate errors from the other components. WDYT @vmuzikar ?", "author": "mabartos", "createdAt": "2020-11-04T14:12:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0OTI0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM3NDc0OQ==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517374749", "bodyText": "If you really want to put it inside a separate class, I'd make it a nested class inside LoginUpdateProfilePage as it really belongs to it. ;)", "author": "vmuzikar", "createdAt": "2020-11-04T14:17:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0OTI0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI1MDEwMQ==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517250101", "bodyText": "This is an old Account Console test. It shouldn't be modified at all.", "author": "vmuzikar", "createdAt": "2020-11-04T10:39:16Z", "path": "testsuite/integration-arquillian/tests/base/src/test/java/org/keycloak/testsuite/account/AccountFormServiceTest.java", "diffHunk": "@@ -265,11 +265,11 @@ public void changePassword() {\n         String userId = event.getUserId();\n \n         changePasswordPage.changePassword(\"\", \"new-password\", \"new-password\");\n-        Assert.assertEquals(\"Please specify password.\", profilePage.getError());\n+        Assert.assertEquals(\"Please specify password.\", profilePage.getAlertError());", "originalCommit": "9ad14856e4c8b43cbb0122d40dd6993fb94bd886", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM3MTgzMA==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517371830", "bodyText": "Ok", "author": "mabartos", "createdAt": "2020-11-04T14:12:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI1MDEwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI1NDg1NQ==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517254855", "bodyText": "Did you try to run the SSSD tests? I believe they are excluded by default.", "author": "vmuzikar", "createdAt": "2020-11-04T10:47:18Z", "path": "testsuite/integration-arquillian/tests/other/sssd/src/test/java/org/keycloak/testsuite/sssd/SSSDTest.java", "diffHunk": "@@ -188,7 +185,7 @@ public void changeReadOnlyProfile() throws Exception {\n \n         profilePage.updateProfile(\"New first\", \"New last\", \"new@email.com\");\n \n-        Assert.assertEquals(\"You can't update your account as it is read-only.\", profilePage.getError());", "originalCommit": "9ad14856e4c8b43cbb0122d40dd6993fb94bd886", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM3NTk2NA==", "url": "https://github.com/keycloak/keycloak/pull/7554#discussion_r517375964", "bodyText": "I'm not sure, I'll take a look at this. Thanks!", "author": "mabartos", "createdAt": "2020-11-04T14:18:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI1NDg1NQ=="}], "type": "inlineReview"}, {"oid": "2e2f584b2695e4bc1791b8eb55e5d566374549c8", "url": "https://github.com/keycloak/keycloak/commit/2e2f584b2695e4bc1791b8eb55e5d566374549c8", "message": "Remove separate error class", "committedDate": "2020-11-04T15:59:40Z", "type": "forcePushed"}, {"oid": "e32fb16b1c9a401f685ac5a11f2336cec5e227c5", "url": "https://github.com/keycloak/keycloak/commit/e32fb16b1c9a401f685ac5a11f2336cec5e227c5", "message": "KEYCLOAK-15841 Upgrade rest of the minor forms to PF4", "committedDate": "2020-11-05T10:23:25Z", "type": "commit"}, {"oid": "e32fb16b1c9a401f685ac5a11f2336cec5e227c5", "url": "https://github.com/keycloak/keycloak/commit/e32fb16b1c9a401f685ac5a11f2336cec5e227c5", "message": "KEYCLOAK-15841 Upgrade rest of the minor forms to PF4", "committedDate": "2020-11-05T10:23:25Z", "type": "forcePushed"}]}