{"pr_number": 7463, "pr_title": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.1.Final\"", "pr_createdAt": "2020-10-02T09:14:47Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7463", "timeline": [{"oid": "42b7f77dbf8e7411aeeea7f005f93eaf08cf2502", "url": "https://github.com/keycloak/keycloak/commit/42b7f77dbf8e7411aeeea7f005f93eaf08cf2502", "message": "[KEYCLOAK-15780] Replace data structures / methods deprecated in\nInfinispan 10.x with their Infinispan 11.x suggested counterparts:\n\n* Replace ConcurrentHashSet with ConcurrentHashMap.newKeySet() per:\n  https://docs.jboss.org/infinispan/11.0/apidocs/org/infinispan/commons/util/concurrent/ConcurrentHashSet.html\n\n* Replace GlobalJmxConfigurationBuilder.allowDuplicateDomains() with domain(java.lang.String) per:\n  https://docs.jboss.org/infinispan/10.1/apidocs/org/infinispan/configuration/global/GlobalJmxConfigurationBuilder.html#allowDuplicateDomains(java.lang.Boolean)\n\n* Replace GlobalJmxStatisticsConfigurationBuilder.allowDuplicateDomains() with domain(java.lang.String) per:\n  https://docs.jboss.org/infinispan/10.1/apidocs/org/infinispan/configuration/global/GlobalJmxStatisticsConfigurationBuilder.html#allowDuplicateDomains(java.lang.Boolean)\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-10-02T14:57:58Z", "type": "forcePushed"}, {"oid": "719f1570d82a0ccc145989b76dcae953245e46a8", "url": "https://github.com/keycloak/keycloak/commit/719f1570d82a0ccc145989b76dcae953245e46a8", "message": "[KEYCLOAK-15780] Replace deprecated 'globalJmxStatistics()' method\nwith the newly suggested 'jmx()' one:\n    https://docs.jboss.org/infinispan/10.1/apidocs/org/infinispan/configuration/global/GlobalConfigurationChildBuilder.html#globalJmxStatistics()\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-10-14T08:52:49Z", "type": "forcePushed"}, {"oid": "55793255ca6aedaf862aee93785eef6ec2e3f910", "url": "https://github.com/keycloak/keycloak/commit/55793255ca6aedaf862aee93785eef6ec2e3f910", "message": "[KEYCLOAK-15780] Workaround org.bouncycastle.bcpkix 's\n\"java.lang.NoClassDefFoundError: Failed to link org/bouncycastle/openssl/PEMWriter\"\nissue when trying to generate PEM signature keys for the realm\nin question via PemUtils Keycloak package (IOW when DefaultKeyManager\nissues a message like:\n\n'19:09:15,351 INFO  [org.keycloak.keys.DefaultKeyManager] (default task-1) No keys found for realm=master and algorithm=RS256 for use=SIG. Generating keys.'\n\nFix the issue by explicitly listing all compile / runtime dependencies\nfor all the utilized \"org.bouncycastle.*\" modules\n\nThanks to Peter Skopek for the suggestion that properly listing\nall \"org.bouncycastle.bcpkix\" (compile / runtime) dependencies\nmight help the module to get properly loaded!\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-10-19T17:29:47Z", "type": "forcePushed"}, {"oid": "38b19483dc8685e8679d2e21a324ca7ea357b7a4", "url": "https://github.com/keycloak/keycloak/commit/38b19483dc8685e8679d2e21a324ca7ea357b7a4", "message": "[KEYCLOAK-16031] Upgrade to Wildfly \"21.0.0.Final\" / Wildfly Core \"13.0.1.Final\"\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-10-23T16:15:39Z", "type": "forcePushed"}, {"oid": "b19e8279b4c2f769f62d96b2a1561d8eaf6ddaef", "url": "https://github.com/keycloak/keycloak/commit/b19e8279b4c2f769f62d96b2a1561d8eaf6ddaef", "message": "[KEYCLOAK-15692] Make the RH-SSO adapter updates optional\n(perform them only if explicitly requested via new '-r' or\n '--update-rh-sso-adapters' CLI option)\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-10-26T18:37:50Z", "type": "forcePushed"}, {"oid": "5ca84cb188408ca90b4fa6b174ba19fef3e4b803", "url": "https://github.com/keycloak/keycloak/commit/5ca84cb188408ca90b4fa6b174ba19fef3e4b803", "message": "[KEYCLOAK-15692] Update \"urn:jboss:domain:\\d+\" XML namespace\nto the value used by Wildfly Core 13.0.1.Final tag:\n* https://github.com/wildfly/wildfly-core/blob/13.0.1.Final/controller/src/main/java/org/jboss/as/controller/parsing/Namespace.java#L110\n* https://github.com/wildfly/wildfly-core/blob/13.0.1.Final/controller/src/main/java/org/jboss/as/controller/parsing/Namespace.java#L105\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-10-26T19:57:44Z", "type": "forcePushed"}, {"oid": "1049faf7ac3dcdca5c7a4d5e6ad742455c345309", "url": "https://github.com/keycloak/keycloak/commit/1049faf7ac3dcdca5c7a4d5e6ad742455c345309", "message": "[KEYCLOAK-15692] Fix failures of the server org.keycloak.test.config.migration.ConfigMigrationTest\n\nFixes errors like:\n\nmvn clean install -B -Pauth-server-wildfly -f testsuite/integration-arquillian/tests/other/server-config-migration/pom.xml -Dtest=org.keycloak.test.config.migration.ConfigMigrationTest\n...\n[INFO]\n[INFO] Results:\n[INFO]\n[ERROR] Failures:\n[ERROR]   ConfigMigrationTest.testStandalone:55->compareConfigs:94->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:105 * navigation -> [root, result, socket-binding-group, standard-sockets, remote-destination-outbound-socket-binding, mail-smtp, host] *  expected:<EXPRESSION> but was:<STRING>\n[ERROR]   ConfigMigrationTest.testStandaloneHA:60->compareConfigs:94->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:105 * navigation -> [root, result, socket-binding-group, standard-sockets, remote-destination-outbound-socket-binding, mail-smtp, host] *  expected:<EXPRESSION> but was:<STRING>\n[INFO]\n[ERROR] Tests run: 3, Failures: 2, Errors: 0, Skipped: 0\n...\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-10-29T13:50:38Z", "type": "forcePushed"}, {"oid": "7f66a3a7f34555624180f02f7331fd0b7d2864e5", "url": "https://github.com/keycloak/keycloak/commit/7f66a3a7f34555624180f02f7331fd0b7d2864e5", "message": "[KEYCLOAK-15692] Fix failures of the server org.keycloak.test.config.migration.ConfigMigrationTest\n\nFixes errors like:\n\nmvn clean install -B -Pauth-server-wildfly -f testsuite/integration-arquillian/tests/other/server-config-migration/pom.xml -Dtest=org.keycloak.test.config.migration.ConfigMigrationTest\n...\n[INFO]\n[INFO] Results:\n[INFO]\n[ERROR] Failures:\n[ERROR]   ConfigMigrationTest.testStandalone:55->compareConfigs:94->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:105 * navigation -> [root, result, socket-binding-group, standard-sockets, remote-destination-outbound-socket-binding, mail-smtp, host] *  expected:<EXPRESSION> but was:<STRING>\n[ERROR]   ConfigMigrationTest.testStandaloneHA:60->compareConfigs:94->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:117->compareConfigsDeeply:105 * navigation -> [root, result, socket-binding-group, standard-sockets, remote-destination-outbound-socket-binding, mail-smtp, host] *  expected:<EXPRESSION> but was:<STRING>\n[INFO]\n[ERROR] Tests run: 3, Failures: 2, Errors: 0, Skipped: 0\n...\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-10-29T13:52:13Z", "type": "forcePushed"}, {"oid": "50103b7b64b7081e4947ac9b6fa27aa457de28e6", "url": "https://github.com/keycloak/keycloak/commit/50103b7b64b7081e4947ac9b6fa27aa457de28e6", "message": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.0.Final\"\n\nBase fixes:\n* [KEYCLOAK-15780]      Upgrade Keycloak to Wildfly 21.0.0.Beta1 / Wildfly Core 13.0.0.Beta6\n* [KEYCLOAK-16031]      Upgrade Keycloak to Wildfly 21.0.0.Final / Wildfly Core 13.0.1.Final\n\nOther (dependent) fixes:\n* [KEYCLOAK-15408]      Deprecate former Wildfly and Wildfly Core versions in Arquillian's\n                        testsuite pom.xml file as part of the upgrade script\n* [KEYCLOAK-15442]      Update the version of 'jboss-parent' as part of the Wildfly upgrade\n                        script if necessary\n* [KEYCLOAK-15474]      Add --verbose and --force options to the Wildfly upgrade automated script\n* [KEYCLOAK-15649]      Update \"urn:jboss:domain:infinispan:10.0\" version as part of the Wildfly\n                        upgrade automated script\n* [KEYCLOAK-15652]      Wildfly upgrade automated script - Align Python artifact version\n                        comparsion algorithm with the Maven / Java one\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-10-29T14:04:26Z", "type": "forcePushed"}, {"oid": "130fe6986a65a36089b2b315a80b4f5754ef4104", "url": "https://github.com/keycloak/keycloak/commit/130fe6986a65a36089b2b315a80b4f5754ef4104", "message": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.0.Final\"\n\nBase fixes:\n* [KEYCLOAK-15780]      Upgrade Keycloak to Wildfly 21.0.0.Beta1 / Wildfly Core 13.0.0.Beta6\n* [KEYCLOAK-16031]      Upgrade Keycloak to Wildfly 21.0.0.Final / Wildfly Core 13.0.1.Final\n\nOther (dependent) fixes:\n* [KEYCLOAK-15408]      Deprecate former Wildfly and Wildfly Core versions in Arquillian's\n                        testsuite pom.xml file as part of the upgrade script\n* [KEYCLOAK-15442]      Update the version of 'jboss-parent' as part of the Wildfly upgrade\n                        script if necessary\n* [KEYCLOAK-15474]      Add --verbose and --force options to the Wildfly upgrade automated script\n* [KEYCLOAK-15649]      Update \"urn:jboss:domain:infinispan:10.0\" version as part of the Wildfly\n                        upgrade automated script\n* [KEYCLOAK-15652]      Wildfly upgrade automated script - Align Python artifact version\n                        comparsion algorithm with the Maven / Java one\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-03T18:47:08Z", "type": "forcePushed"}, {"oid": "760d8f6fc3015896db3047893f8d6e7d73e51350", "url": "https://github.com/keycloak/keycloak/commit/760d8f6fc3015896db3047893f8d6e7d73e51350", "message": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.0.Final\"\n\nBase fixes:\n* [KEYCLOAK-15780]      Upgrade Keycloak to Wildfly 21.0.0.Beta1 / Wildfly Core 13.0.0.Beta6\n* [KEYCLOAK-16031]      Upgrade Keycloak to Wildfly 21.0.0.Final / Wildfly Core 13.0.1.Final\n\nOther (dependent) fixes:\n* [KEYCLOAK-15408]      Deprecate former Wildfly and Wildfly Core versions in Arquillian's\n                        testsuite pom.xml file as part of the upgrade script\n* [KEYCLOAK-15442]      Update the version of 'jboss-parent' as part of the Wildfly upgrade\n                        script if necessary\n* [KEYCLOAK-15474]      Add --verbose and --force options to the Wildfly upgrade automated script\n* [KEYCLOAK-15649]      Update \"urn:jboss:domain:infinispan:10.0\" version as part of the Wildfly\n                        upgrade automated script\n* [KEYCLOAK-15652]      Wildfly upgrade automated script - Align Python artifact version\n                        comparsion algorithm with the Maven / Java one\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-04T12:54:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkzNjk3Mw==", "url": "https://github.com/keycloak/keycloak/pull/7463#discussion_r517936973", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> ConcurrentHashMap.newKeySet())\n          \n          \n            \n                                KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, ConcurrentHashMap::newKeySet)\n          \n      \n    \n    \n  \n\nThe lamba can be avoided.", "author": "martin-kanis", "createdAt": "2020-11-05T10:15:15Z", "path": "model/infinispan/src/main/java/org/keycloak/cluster/infinispan/LockEntryPredicate.java", "diffHunk": "@@ -77,7 +77,7 @@ public LockEntryPredicate readObject(ObjectInput input) throws IOException, Clas\n \n         public LockEntryPredicate readObjectVersion1(ObjectInput input) throws IOException, ClassNotFoundException {\n             return new LockEntryPredicate(\n-                    KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> new ConcurrentHashSet<>())\n+                    KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> ConcurrentHashMap.newKeySet())", "originalCommit": "760d8f6fc3015896db3047893f8d6e7d73e51350", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg3NzY0OQ==", "url": "https://github.com/keycloak/keycloak/pull/7463#discussion_r528877649", "bodyText": "@martin-kanis Corrected per the suggestion in the latest version (please double-check). Thanks!", "author": "iankko", "createdAt": "2020-11-23T17:30:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkzNjk3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkzNzQxMg==", "url": "https://github.com/keycloak/keycloak/pull/7463#discussion_r517937412", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> ConcurrentHashMap.newKeySet()),  // clientScopes\n          \n          \n            \n                          KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, ConcurrentHashMap::newKeySet),  // clientScopes", "author": "martin-kanis", "createdAt": "2020-11-05T10:16:01Z", "path": "model/infinispan/src/main/java/org/keycloak/models/sessions/infinispan/entities/AuthenticationSessionEntity.java", "diffHunk": "@@ -234,14 +233,14 @@ public AuthenticationSessionEntity readObjectVersion1(ObjectInput input) throws\n \n               MarshallUtil.unmarshallString(input),     // redirectUri\n               MarshallUtil.unmarshallString(input),     // action\n-              KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> new ConcurrentHashSet<>()),  // clientScopes\n+              KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> ConcurrentHashMap.newKeySet()),  // clientScopes", "originalCommit": "760d8f6fc3015896db3047893f8d6e7d73e51350", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg3NzkwNw==", "url": "https://github.com/keycloak/keycloak/pull/7463#discussion_r528877907", "bodyText": "Ditto, fixed in latest version.", "author": "iankko", "createdAt": "2020-11-23T17:31:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkzNzQxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkzNzc2OA==", "url": "https://github.com/keycloak/keycloak/pull/7463#discussion_r517937768", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> ConcurrentHashMap.newKeySet()),  // requiredActions\n          \n          \n            \n                          KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, ConcurrentHashMap::newKeySet),  // requiredActions", "author": "martin-kanis", "createdAt": "2020-11-05T10:16:33Z", "path": "model/infinispan/src/main/java/org/keycloak/models/sessions/infinispan/entities/AuthenticationSessionEntity.java", "diffHunk": "@@ -234,14 +233,14 @@ public AuthenticationSessionEntity readObjectVersion1(ObjectInput input) throws\n \n               MarshallUtil.unmarshallString(input),     // redirectUri\n               MarshallUtil.unmarshallString(input),     // action\n-              KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> new ConcurrentHashSet<>()),  // clientScopes\n+              KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> ConcurrentHashMap.newKeySet()),  // clientScopes\n \n               KeycloakMarshallUtil.readMap(input, KeycloakMarshallUtil.STRING_EXT, EXECUTION_STATUS_EXT, size -> new ConcurrentHashMap<>(size)), // executionStatus\n               MarshallUtil.unmarshallString(input),     // protocol\n \n               KeycloakMarshallUtil.readMap(input, KeycloakMarshallUtil.STRING_EXT, KeycloakMarshallUtil.STRING_EXT, size -> new ConcurrentHashMap<>(size)), // clientNotes\n               KeycloakMarshallUtil.readMap(input, KeycloakMarshallUtil.STRING_EXT, KeycloakMarshallUtil.STRING_EXT, size -> new ConcurrentHashMap<>(size)), // authNotes\n-              KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> new ConcurrentHashSet<>()),  // requiredActions\n+              KeycloakMarshallUtil.readCollection(input, KeycloakMarshallUtil.STRING_EXT, size -> ConcurrentHashMap.newKeySet()),  // requiredActions", "originalCommit": "760d8f6fc3015896db3047893f8d6e7d73e51350", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg3ODAzOA==", "url": "https://github.com/keycloak/keycloak/pull/7463#discussion_r528878038", "bodyText": "And this one too", "author": "iankko", "createdAt": "2020-11-23T17:31:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkzNzc2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk0NDYzNg==", "url": "https://github.com/keycloak/keycloak/pull/7463#discussion_r517944636", "bodyText": "I'm wondering what is purpose of these boolean variables across *Test.java classes when they are never changed. They could be probably eliminated and code could be simplified.", "author": "martin-kanis", "createdAt": "2020-11-05T10:27:21Z", "path": "model/infinispan/src/test/java/org/keycloak/models/sessions/infinispan/initializer/ConcurrencyVersioningTest.java", "diffHunk": "@@ -234,19 +234,16 @@ public static void endBatch(Cache<String, String> cache) {\n \n \n     protected DefaultCacheManager getVersionedCacheManager() {\n-        GlobalConfigurationBuilder gcb = new GlobalConfigurationBuilder();\n-\n-\n-        boolean clustered = false;\n         boolean async = false;\n-        boolean allowDuplicateJMXDomains = true;\n+        boolean clustered = false;", "originalCommit": "760d8f6fc3015896db3047893f8d6e7d73e51350", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg4Mjk2Mg==", "url": "https://github.com/keycloak/keycloak/pull/7463#discussion_r528882962", "bodyText": "Right, great catch, thanks Martin! Previously tried to do the minimal necessary amount of changes to get the code to compile with new Wildfly / Wildfly Core version. But you are correct regarding those two variables (assuming they got there as the code for new test got copied from DefaultInfinispanConnectionProviderFactory.java [in this file those two can be initialized from system properties] and assuming as the code of these tests got simplified / reduced during the time, their use doesn't make much sense already).\nIn any case, dropped their use if / where applicable (in tests touched within this PR). Please see the latest version.", "author": "iankko", "createdAt": "2020-11-23T17:39:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk0NDYzNg=="}], "type": "inlineReview"}, {"oid": "a83a86cf3fa4a49f304173bcc9b89aa8256fb99a", "url": "https://github.com/keycloak/keycloak/commit/a83a86cf3fa4a49f304173bcc9b89aa8256fb99a", "message": "[KEYCLOAK-15692] Fix (majority of) failing Quarkus tests\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-09T12:58:18Z", "type": "forcePushed"}, {"oid": "f875eb82921c9f547389d9243a6735f7c585987d", "url": "https://github.com/keycloak/keycloak/commit/f875eb82921c9f547389d9243a6735f7c585987d", "message": "[KEYCLOAK-15692] Temporarily enable SSL handshake debug option for Keycloak.X CI\n\n[KEYCLOAK-15692] Temporarily enable / setup tmate session to remotely debug TLS\nfailure on GitHub actions. See:\n\n* https://github.community/t/debugging-github-actions-locally-or-ssh-to-workspace/16974/3\n* https://github.com/marketplace/actions/debugging-with-tmate\n\nfor details\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-10T10:11:04Z", "type": "forcePushed"}, {"oid": "0cc78fa4391faee5c8e85961ee09925c089dbfdf", "url": "https://github.com/keycloak/keycloak/commit/0cc78fa4391faee5c8e85961ee09925c089dbfdf", "message": "[KEYCLOAK-15692] Temporarily enable SSL handshake debug option for Keycloak.X CI\n\n[KEYCLOAK-15692] Temporarily enable / setup tmate session to remotely debug TLS\nfailure on GitHub actions. See:\n\n* https://github.community/t/debugging-github-actions-locally-or-ssh-to-workspace/16974/3\n* https://github.com/marketplace/actions/debugging-with-tmate\n\nfor details\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-10T10:41:13Z", "type": "forcePushed"}, {"oid": "d88516866a4b061b19f5aeb08f327d1eb5dd2cb2", "url": "https://github.com/keycloak/keycloak/commit/d88516866a4b061b19f5aeb08f327d1eb5dd2cb2", "message": "[KEYCLOAK-15692] Temporarily enable SSL handshake debug option for Keycloak.X CI\n\n[KEYCLOAK-15692] Temporarily enable / setup tmate session to remotely debug TLS\nfailure on GitHub actions. See:\n\n* https://github.community/t/debugging-github-actions-locally-or-ssh-to-workspace/16974/3\n* https://github.com/marketplace/actions/debugging-with-tmate\n\nfor details\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-10T10:54:56Z", "type": "forcePushed"}, {"oid": "6018200e431e176145b73ac2e5c3867054ec7d5d", "url": "https://github.com/keycloak/keycloak/commit/6018200e431e176145b73ac2e5c3867054ec7d5d", "message": "[KEYCLOAK-15692] Enable tmate SSH session for GitHub actions\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-10T11:14:57Z", "type": "forcePushed"}, {"oid": "8df023b0ffda19c3ba0c8f1fcf35d2a094200217", "url": "https://github.com/keycloak/keycloak/commit/8df023b0ffda19c3ba0c8f1fcf35d2a094200217", "message": "[KEYCLOAK-15692] Enable tmate SSH session for GitHub actions\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-10T11:26:51Z", "type": "forcePushed"}, {"oid": "a17df670b9a9c4bf791a00d5e75d557d231ec893", "url": "https://github.com/keycloak/keycloak/commit/a17df670b9a9c4bf791a00d5e75d557d231ec893", "message": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.0.Final\"\n\nBase fixes:\n* [KEYCLOAK-15780]      Upgrade Keycloak to Wildfly 21.0.0.Beta1 / Wildfly Core 13.0.0.Beta6\n* [KEYCLOAK-16031]      Upgrade Keycloak to Wildfly 21.0.0.Final / Wildfly Core 13.0.1.Final\n\nOther (dependent) fixes:\n* [KEYCLOAK-15408]      Deprecate former Wildfly and Wildfly Core versions in Arquillian's\n                        testsuite pom.xml file as part of the upgrade script\n* [KEYCLOAK-15442]      Update the version of 'jboss-parent' as part of the Wildfly upgrade\n                        script if necessary\n* [KEYCLOAK-15474]      Add --verbose and --force options to the Wildfly upgrade automated script\n* [KEYCLOAK-15649]      Update \"urn:jboss:domain:infinispan:10.0\" version as part of the Wildfly\n                        upgrade automated script\n* [KEYCLOAK-15652]      Wildfly upgrade automated script - Align Python artifact version\n                        comparsion algorithm with the Maven / Java one\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-10T15:54:56Z", "type": "forcePushed"}, {"oid": "65b33367ed7b18ab1e0ecfb0b58017fe03b6b6c6", "url": "https://github.com/keycloak/keycloak/commit/65b33367ed7b18ab1e0ecfb0b58017fe03b6b6c6", "message": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.0.Final\"\n\nBase fixes:\n* [KEYCLOAK-15780]      Upgrade Keycloak to Wildfly 21.0.0.Beta1 / Wildfly Core 13.0.0.Beta6\n* [KEYCLOAK-16031]      Upgrade Keycloak to Wildfly 21.0.0.Final / Wildfly Core 13.0.1.Final\n\nOther (dependent) fixes:\n* [KEYCLOAK-15408]      Deprecate former Wildfly and Wildfly Core versions in Arquillian's\n                        testsuite pom.xml file as part of the upgrade script\n* [KEYCLOAK-15442]      Update the version of 'jboss-parent' as part of the Wildfly upgrade\n                        script if necessary\n* [KEYCLOAK-15474]      Add --verbose and --force options to the Wildfly upgrade automated script\n* [KEYCLOAK-15649]      Update \"urn:jboss:domain:infinispan:10.0\" version as part of the Wildfly\n                        upgrade automated script\n* [KEYCLOAK-15652]      Wildfly upgrade automated script - Align Python artifact version\n                        comparsion algorithm with the Maven / Java one\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-11T09:16:38Z", "type": "forcePushed"}, {"oid": "8563ea92105b80a8b8538e6e81a006853be8321a", "url": "https://github.com/keycloak/keycloak/commit/8563ea92105b80a8b8538e6e81a006853be8321a", "message": "[KEYCLOAK-15692] Work-around OpenJSSE TlsMasterSecretGenerator error:\n    https://github.com/openjsse/openjsse/issues/11\n\nSince configuring client-side truststore of default Elytron's RESTEasy\nclient implementation via wildfly-config.xml ends up with a TLS handshake\nerror like:\n\njava.security.ProviderException: java.security.InvalidAlgorithmParameterException: TlsMasterSecretGenerator must be initialized using a TlsMasterSecretParameterSpec\n                                 at org.openjsse.sun.security.ssl.SSLMasterKeyDerivation$LegacyMasterKeyDerivation.deriveKey(SSLMasterKeyDerivation.java:160)\n\non platforms using the OpenJSSE PKIX security provider (instead\nof the native SunJSSE or IBMCertPath ones), e.g. the 18.04 LTS\n'ubuntu-latest' image when connecting a client with OpenJSSE to\na TLS server without OpenJSSE, change the way we are creating\nJAX-RS / RESTEasy client instances across the tests (to utilize\nclient-side truststore if it was requested via system properties,\nor use the default SSL context in the case it wasn't). This avoids\nthe problem\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-11T20:54:47Z", "type": "forcePushed"}, {"oid": "9066bee86a0c55681e2c6382f7550a4ce8ca9951", "url": "https://github.com/keycloak/keycloak/commit/9066bee86a0c55681e2c6382f7550a4ce8ca9951", "message": "[KEYCLOAK-15692] Work-around OpenJSSE TlsMasterSecretGenerator error:\n    https://github.com/openjsse/openjsse/issues/11\n\nSince configuring client-side truststore of default Elytron's RESTEasy\nclient implementation via wildfly-config.xml ends up with a TLS handshake\nerror like:\n\njava.security.ProviderException: java.security.InvalidAlgorithmParameterException: TlsMasterSecretGenerator must be initialized using a TlsMasterSecretParameterSpec\n                                 at org.openjsse.sun.security.ssl.SSLMasterKeyDerivation$LegacyMasterKeyDerivation.deriveKey(SSLMasterKeyDerivation.java:160)\n\non platforms using the OpenJSSE PKIX security provider (instead\nof the native SunJSSE or IBMCertPath ones), e.g. the 18.04 LTS\n'ubuntu-latest' image when connecting a client with OpenJSSE to\na TLS server without OpenJSSE, change the way we are creating\nJAX-RS / RESTEasy client instances across the tests (to utilize\nclient-side truststore if it was requested via system properties,\nor use the default SSL context in the case it wasn't). This avoids\nthe problem\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-12T08:17:04Z", "type": "forcePushed"}, {"oid": "747503bac765914967130bb589653405105da46c", "url": "https://github.com/keycloak/keycloak/commit/747503bac765914967130bb589653405105da46c", "message": "[KEYCLOAK-15692] Work-around OpenJSSE TlsMasterSecretGenerator error:\n    https://github.com/openjsse/openjsse/issues/11\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-15T17:01:08Z", "type": "forcePushed"}, {"oid": "1f6dce251f6140aec1b2eb3ee0651cf10c1b16f3", "url": "https://github.com/keycloak/keycloak/commit/1f6dce251f6140aec1b2eb3ee0651cf10c1b16f3", "message": "[KEYCLOAK-15692] Fix the MetricsRestServiceTest.testHealthEndpoint test\nAdd ephemeral *.db files generated by Quarkus run to gitignore\n\nFix MetricsRestServiceTest.testHealthEndpoint failure:\n...\nError: OR] Failures:\nError: OR]   MetricsRestServiceTest.testHealthEndpoint:58\n-- Expected: response body matches a string containing \"{\\\"status\\\":\\\"UP\\\",\\\"checks\\\":[]}\"\n--      but: was <org.jboss.resteasy.client.jaxrs.engines.ApacheHttpClient4Engine$1@78fdb71b>\n...\n\nAfter inspection the current substring match is too strict, adding some\ndebug prints, the difference is as follows:\n\nGot the following response = {\"status\":\"UP\",\"checks\":[{\"name\":\"boot-errors\",\"status\":\"UP\"},{\"name\":\"deployments-status\",\"status\":\"UP\",\"data\":{\"keycloak-server.war\":\"OK\"}},{\"name\":\"server-state\",\"status\":\"UP\",\"data\":{\"value\":\"running\"}},{\"name\":\"empty-liveness-checks\",\"status\":\"UP\"},{\"name\":\"empty-readiness-checks\",\"status\":\"UP\"}]}\nBut was expecting {\"status\":\"UP\",\"checks\":[]}\n\nThe health point test was created before any readiness / liveness checks\nwere added. Thus make the string match more checks tolerant (since what\nactually matters for the test result is the 'UP' status field of the endpoint).\n\nAlso add temporary *.db files generated within the quarkus/data directory\nupon Quarkus run to gitignore.\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-16T10:27:11Z", "type": "forcePushed"}, {"oid": "1d65ed3d67e627555cc6d8d35b4be92f6b45a53b", "url": "https://github.com/keycloak/keycloak/commit/1d65ed3d67e627555cc6d8d35b4be92f6b45a53b", "message": "[KEYCLOAK-15692] Fix org.bouncycastle.* deprecated symbols warning\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-18T15:09:39Z", "type": "forcePushed"}, {"oid": "89f8a5bf49938d8e96e6afc9a084d3d3790f1c0a", "url": "https://github.com/keycloak/keycloak/commit/89f8a5bf49938d8e96e6afc9a084d3d3790f1c0a", "message": "[KEYCLOAK-15692] Fix org.bouncycastle.* deprecated symbols warning\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-23T09:52:41Z", "type": "forcePushed"}, {"oid": "8b28f23d3212f1fc3f364d964933328a95f1455b", "url": "https://github.com/keycloak/keycloak/commit/8b28f23d3212f1fc3f364d964933328a95f1455b", "message": "[KEYCLOAK-15692] Address issues pointed out by Martin Kanis during PR review.\nThanks, Martin!\n\nNamely:\n* Drop unnecessary lambdas,\n* Sort out / simplify the code / drop the unneeded 'async' & 'clustered'\n  variables across various tests\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-23T17:13:43Z", "type": "forcePushed"}, {"oid": "be2ef52d906f84df53c7d9da1de5ac59cedf2043", "url": "https://github.com/keycloak/keycloak/commit/be2ef52d906f84df53c7d9da1de5ac59cedf2043", "message": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.0.Final\"\n\nBase fixes:\n* [KEYCLOAK-15780]      Upgrade Keycloak to Wildfly 21.0.0.Beta1 / Wildfly Core 13.0.0.Beta6\n* [KEYCLOAK-16031]      Upgrade Keycloak to Wildfly 21.0.0.Final / Wildfly Core 13.0.1.Final\n\nOther (dependent) fixes:\n* [KEYCLOAK-15408]      Deprecate former Wildfly and Wildfly Core versions in Arquillian's\n                        testsuite pom.xml file as part of the upgrade script\n* [KEYCLOAK-15442]      Update the version of 'jboss-parent' as part of the Wildfly upgrade\n                        script if necessary\n* [KEYCLOAK-15474]      Add --verbose and --force options to the Wildfly upgrade automated script\n* [KEYCLOAK-15649]      Update \"urn:jboss:domain:infinispan:10.0\" version as part of the Wildfly\n                        upgrade automated script\n* [KEYCLOAK-15652]      Wildfly upgrade automated script - Align Python artifact version\n                        comparsion algorithm with the Maven / Java one\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-23T17:25:41Z", "type": "forcePushed"}, {"oid": "614f16af0a293f3f4eb5b1debf4bc58133219514", "url": "https://github.com/keycloak/keycloak/commit/614f16af0a293f3f4eb5b1debf4bc58133219514", "message": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.1.Final\"\n\nBase fixes:\n* [KEYCLOAK-15780]      Upgrade Keycloak to Wildfly 21.0.0.Beta1 / Wildfly Core 13.0.0.Beta6\n* [KEYCLOAK-16031]      Upgrade Keycloak to Wildfly 21.0.0.Final / Wildfly Core 13.0.1.Final\n* [KEYCLOAK-16442]      Upgrade Keycloak to Wildfly 21.0.1.Final / Wildfly Core 13.0.3.Final\n\nOther (dependent) fixes:\n* [KEYCLOAK-15408]      Deprecate former Wildfly and Wildfly Core versions in Arquillian's\n                        testsuite pom.xml file as part of the upgrade script\n* [KEYCLOAK-15442]      Update the version of 'jboss-parent' as part of the Wildfly upgrade\n                        script if necessary\n* [KEYCLOAK-15474]      Add --verbose and --force options to the Wildfly upgrade automated script\n* [KEYCLOAK-15649]      Update \"urn:jboss:domain:infinispan:10.0\" version as part of the Wildfly\n                        upgrade automated script\n* [KEYCLOAK-15652]      Wildfly upgrade automated script - Align Python artifact version\n                        comparsion algorithm with the Maven / Java one\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-24T12:09:28Z", "type": "forcePushed"}, {"oid": "ea1cfecb5a1f877f106a3cfac115c9206f2c09d5", "url": "https://github.com/keycloak/keycloak/commit/ea1cfecb5a1f877f106a3cfac115c9206f2c09d5", "message": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.1.Final\"\n\nBase fixes:\n* [KEYCLOAK-15780]      Upgrade Keycloak to Wildfly 21.0.0.Beta1 / Wildfly Core 13.0.0.Beta6\n* [KEYCLOAK-16031]      Upgrade Keycloak to Wildfly 21.0.0.Final / Wildfly Core 13.0.1.Final\n* [KEYCLOAK-16442]      Upgrade Keycloak to Wildfly 21.0.1.Final / Wildfly Core 13.0.3.Final\n\nOther (dependent) fixes:\n* [KEYCLOAK-15408]      Deprecate former Wildfly and Wildfly Core versions in Arquillian's\n                        testsuite pom.xml file as part of the upgrade script\n* [KEYCLOAK-15442]      Update the version of 'jboss-parent' as part of the Wildfly upgrade\n                        script if necessary\n* [KEYCLOAK-15474]      Add --verbose and --force options to the Wildfly upgrade automated script\n* [KEYCLOAK-15649]      Update \"urn:jboss:domain:infinispan:10.0\" version as part of the Wildfly\n                        upgrade automated script\n* [KEYCLOAK-15652]      Wildfly upgrade automated script - Align Python artifact version\n                        comparsion algorithm with the Maven / Java one\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-25T21:54:02Z", "type": "commit"}, {"oid": "ea1cfecb5a1f877f106a3cfac115c9206f2c09d5", "url": "https://github.com/keycloak/keycloak/commit/ea1cfecb5a1f877f106a3cfac115c9206f2c09d5", "message": "[KEYCLOAK-15692] Upgrade to Wildfly \"21.0.1.Final\"\n\nBase fixes:\n* [KEYCLOAK-15780]      Upgrade Keycloak to Wildfly 21.0.0.Beta1 / Wildfly Core 13.0.0.Beta6\n* [KEYCLOAK-16031]      Upgrade Keycloak to Wildfly 21.0.0.Final / Wildfly Core 13.0.1.Final\n* [KEYCLOAK-16442]      Upgrade Keycloak to Wildfly 21.0.1.Final / Wildfly Core 13.0.3.Final\n\nOther (dependent) fixes:\n* [KEYCLOAK-15408]      Deprecate former Wildfly and Wildfly Core versions in Arquillian's\n                        testsuite pom.xml file as part of the upgrade script\n* [KEYCLOAK-15442]      Update the version of 'jboss-parent' as part of the Wildfly upgrade\n                        script if necessary\n* [KEYCLOAK-15474]      Add --verbose and --force options to the Wildfly upgrade automated script\n* [KEYCLOAK-15649]      Update \"urn:jboss:domain:infinispan:10.0\" version as part of the Wildfly\n                        upgrade automated script\n* [KEYCLOAK-15652]      Wildfly upgrade automated script - Align Python artifact version\n                        comparsion algorithm with the Maven / Java one\n\nSigned-off-by: Jan Lieskovsky <jlieskov@redhat.com>", "committedDate": "2020-11-25T21:54:02Z", "type": "forcePushed"}]}