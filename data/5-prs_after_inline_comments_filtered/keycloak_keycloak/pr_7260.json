{"pr_number": 7260, "pr_title": "KEYCLOAK-12249 added test to test that time is localized", "pr_createdAt": "2020-07-13T13:16:43Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7260", "timeline": [{"oid": "53e0550bbe8206794ad92c77417a61bccc4d04ac", "url": "https://github.com/keycloak/keycloak/commit/53e0550bbe8206794ad92c77417a61bccc4d04ac", "message": "KEYCLOAK-12249 added test to test that time is localized", "committedDate": "2020-07-14T09:45:17Z", "type": "forcePushed"}, {"oid": "72f893a13c7cc426fa3d1098a27311d7402dc7ef", "url": "https://github.com/keycloak/keycloak/commit/72f893a13c7cc426fa3d1098a27311d7402dc7ef", "message": "KEYCLOAK-12249 added test to test that time is localized", "committedDate": "2020-07-14T12:27:25Z", "type": "forcePushed"}, {"oid": "8f5d359ff0af19ebc25f506f98184871acae5495", "url": "https://github.com/keycloak/keycloak/commit/8f5d359ff0af19ebc25f506f98184871acae5495", "message": "KEYCLOAK-12249 added test to test that time is localized", "committedDate": "2020-07-14T14:10:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgxMzg4NA==", "url": "https://github.com/keycloak/keycloak/pull/7260#discussion_r454813884", "bodyText": "Just out of curiosity, what's the reason to make changes on WelcomeScreen page object?", "author": "vmuzikar", "createdAt": "2020-07-15T06:10:29Z", "path": "testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/page/WelcomeScreen.java", "diffHunk": "@@ -41,21 +41,21 @@\n     @FindBy(xpath = \"//*[@id='\" + ROOT_ELEMENT_ID + \"']//header\")\n     private WelcomeScreenHeader header;\n \n-    @FindBy(xpath = \"//*[@id='landing-personal-info']/a\")\n+    @FindBy(xpath = \"//a[@id='landing-personal-info']\")", "originalCommit": "8f5d359ff0af19ebc25f506f98184871acae5495", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg0MDkxNA==", "url": "https://github.com/keycloak/keycloak/pull/7260#discussion_r454840914", "bodyText": "I'm also fixing a test in this PR", "author": "edewit", "createdAt": "2020-07-15T07:14:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgxMzg4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgxNDMyMQ==", "url": "https://github.com/keycloak/keycloak/pull/7260#discussion_r454814321", "bodyText": "Please don't use star imports. It's somewhere specified in our code style but can't find it right now. Correct, @ssilvert?", "author": "vmuzikar", "createdAt": "2020-07-15T06:11:38Z", "path": "testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/DeviceActivityTest.java", "diffHunk": "@@ -46,12 +49,10 @@\n import static org.hamcrest.Matchers.hasProperty;\n import static org.hamcrest.Matchers.is;\n import static org.hamcrest.Matchers.not;\n-import static org.junit.Assert.assertEquals;\n-import static org.junit.Assert.assertFalse;\n-import static org.junit.Assert.assertThat;\n-import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.*;", "originalCommit": "8f5d359ff0af19ebc25f506f98184871acae5495", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgxNjIxMw==", "url": "https://github.com/keycloak/keycloak/pull/7260#discussion_r454816213", "bodyText": "This is not needed. We don't care about exact time of the session.", "author": "vmuzikar", "createdAt": "2020-07-15T06:16:35Z", "path": "testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/DeviceActivityTest.java", "diffHunk": "@@ -229,6 +231,34 @@ public void timesTests() {\n         assertEquals(startedAt.plusSeconds(ssoLifespan), expiresAt);\n     }\n \n+    @Test\n+    public void timeLocaleTest() {\n+        String sessionId = createSession(Browsers.CHROME);\n+        testingClient.server().run(session -> {\n+            RealmModel realm = session.realms().getRealmByName(TEST);\n+            UserSessionModel userSession = session.sessions().getUserSession(realm, sessionId);\n+\n+            userSession.setLastSessionRefresh(Time.currentTime());\n+        });", "originalCommit": "8f5d359ff0af19ebc25f506f98184871acae5495", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgxODM1OQ==", "url": "https://github.com/keycloak/keycloak/pull/7260#discussion_r454818359", "bodyText": "Locale is not specified in the formatter. Is that intentional? I know it defaults to English in most cases but not sure what happens if someone runs the test on a machine with different locale.", "author": "vmuzikar", "createdAt": "2020-07-15T06:22:43Z", "path": "testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/InternationalizationTest.java", "diffHunk": "@@ -93,6 +105,34 @@ public void userAttributeTest() {\n         assertCustomLocalePersonalInfo();\n     }\n \n+    @Test\n+    public void shouldDisplayTimeUsingSelectedLocale() {\n+        signingInPage.navigateTo();\n+        loginToAccount();\n+        SigningInPage.UserCredential passwordCred =\n+                passwordCredentialType.getUserCredential(testUserResource().credentials().get(0).getId());\n+\n+        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"MMMM d, yyyy, h:mm a\");", "originalCommit": "8f5d359ff0af19ebc25f506f98184871acae5495", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "745b79510c2fe137920d04d7d3a33e106e4094bb", "url": "https://github.com/keycloak/keycloak/commit/745b79510c2fe137920d04d7d3a33e106e4094bb", "message": "KEYCLOAK-12249 added test to test that time is localized", "committedDate": "2020-07-15T07:18:33Z", "type": "commit"}, {"oid": "745b79510c2fe137920d04d7d3a33e106e4094bb", "url": "https://github.com/keycloak/keycloak/commit/745b79510c2fe137920d04d7d3a33e106e4094bb", "message": "KEYCLOAK-12249 added test to test that time is localized", "committedDate": "2020-07-15T07:18:33Z", "type": "forcePushed"}]}