{"pr_number": 7328, "pr_title": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "pr_createdAt": "2020-08-11T10:15:15Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7328", "timeline": [{"oid": "dba7f0b347291f3fbfa4cec036f8b0f6d972a166", "url": "https://github.com/keycloak/keycloak/commit/dba7f0b347291f3fbfa4cec036f8b0f6d972a166", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-11T14:35:41Z", "type": "forcePushed"}, {"oid": "a1dc963847e9702a97495dc9c523f56b9b3d79b6", "url": "https://github.com/keycloak/keycloak/commit/a1dc963847e9702a97495dc9c523f56b9b3d79b6", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-13T07:52:32Z", "type": "forcePushed"}, {"oid": "c0362da7af9c15141bd99d0577c5cc076ef035a1", "url": "https://github.com/keycloak/keycloak/commit/c0362da7af9c15141bd99d0577c5cc076ef035a1", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-13T10:08:12Z", "type": "forcePushed"}, {"oid": "4d5c79a1e346f9b25c39fb68a3e9ac85f6e4749f", "url": "https://github.com/keycloak/keycloak/commit/4d5c79a1e346f9b25c39fb68a3e9ac85f6e4749f", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-18T07:56:00Z", "type": "forcePushed"}, {"oid": "34f4242a5ec6bb785abc4f193576c9ced18c625a", "url": "https://github.com/keycloak/keycloak/commit/34f4242a5ec6bb785abc4f193576c9ced18c625a", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-18T08:45:03Z", "type": "forcePushed"}, {"oid": "c97d18b1b15bbddff51a181253bc7b2dfef23e4b", "url": "https://github.com/keycloak/keycloak/commit/c97d18b1b15bbddff51a181253bc7b2dfef23e4b", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-18T10:29:51Z", "type": "forcePushed"}, {"oid": "7333120e5e2e36df627277233b1a4b4cae05c343", "url": "https://github.com/keycloak/keycloak/commit/7333120e5e2e36df627277233b1a4b4cae05c343", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-18T12:19:28Z", "type": "forcePushed"}, {"oid": "493f41f94f448c1d2cfa4416bf7d6a14821f87d0", "url": "https://github.com/keycloak/keycloak/commit/493f41f94f448c1d2cfa4416bf7d6a14821f87d0", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-18T12:30:29Z", "type": "forcePushed"}, {"oid": "e294322976729e11b9dab0d4b0af4e6d8e65a5b3", "url": "https://github.com/keycloak/keycloak/commit/e294322976729e11b9dab0d4b0af4e6d8e65a5b3", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-26T08:06:23Z", "type": "forcePushed"}, {"oid": "0c7eb05b891a662b33b420d1f316fcddf2ffa00d", "url": "https://github.com/keycloak/keycloak/commit/0c7eb05b891a662b33b420d1f316fcddf2ffa00d", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-26T09:36:13Z", "type": "forcePushed"}, {"oid": "39ea083986a313aa5100175309385578d80b0765", "url": "https://github.com/keycloak/keycloak/commit/39ea083986a313aa5100175309385578d80b0765", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-26T15:28:26Z", "type": "commit"}, {"oid": "39ea083986a313aa5100175309385578d80b0765", "url": "https://github.com/keycloak/keycloak/commit/39ea083986a313aa5100175309385578d80b0765", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "committedDate": "2020-08-26T15:28:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI4MTc5NQ==", "url": "https://github.com/keycloak/keycloak/pull/7328#discussion_r478281795", "bodyText": "Could be\nreturn Stream.concat(super.getGroupsStream(), Stream.of(group))\n    .filter(Objects::nonNull);", "author": "hmlnarik", "createdAt": "2020-08-27T09:26:59Z", "path": "federation/ldap/src/main/java/org/keycloak/storage/ldap/mappers/HardcodedLDAPGroupStorageMapper.java", "diffHunk": "@@ -51,12 +50,12 @@ public UserModel proxy(LDAPObject ldapUser, UserModel delegate, RealmModel realm\n         return new UserModelDelegate(delegate) {\n \n             @Override\n-            public Set<GroupModel> getGroups() {\n-                Set<GroupModel> groups = new HashSet<GroupModel>(super.getGroups());\n+            public Stream<GroupModel> getGroupsStream() {\n+                Stream<GroupModel> groups = super.getGroupsStream();\n \n                 GroupModel group = getGroup(realm);\n                 if (group != null) {\n-                    groups.add(group);\n+                    return Stream.concat(groups, Stream.of(group));", "originalCommit": "39ea083986a313aa5100175309385578d80b0765", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}