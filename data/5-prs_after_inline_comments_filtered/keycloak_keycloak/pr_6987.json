{"pr_number": 6987, "pr_title": "KEYCLOAK-12936 only change the locale in the AccountPage.", "pr_createdAt": "2020-04-20T13:03:06Z", "pr_url": "https://github.com/keycloak/keycloak/pull/6987", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUzNDgxMw==", "url": "https://github.com/keycloak/keycloak/pull/6987#discussion_r414534813", "bodyText": "Please us this instead:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    WaitUtils.pause(1000);\n          \n          \n            \n                    WaitUtils.waitForPageToLoad();", "author": "vmuzikar", "createdAt": "2020-04-24T12:24:16Z", "path": "testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/InternationalizationTest.java", "diffHunk": "@@ -53,29 +52,17 @@ public void addTestRealms(List<RealmRepresentation> testRealms) {\n     @Before\n     public void beforeI18nTest() {\n         assertTestUserLocale(null);\n-        assertEquals(DEFAULT_LOCALE_NAME, welcomeScreen.header().getCurrentLocaleName());\n-    }\n-\n-    @Test\n-    public void welcomeScreenTest() {\n-        welcomeScreen.header().selectLocale(CUSTOM_LOCALE);\n-        assertCustomLocaleWelcomeScreen();\n-\n-        // check if selected locale is preserved\n-        welcomeScreen.clickPersonalInfoLink();\n-        assertCustomLocaleLoginPage();\n-        loginToAccount();\n-        assertTestUserLocale(CUSTOM_LOCALE);\n-        assertCustomLocalePersonalInfo();\n     }\n \n     @Test\n     public void loggedInPageTest() {\n         personalInfoPage.navigateTo();\n         loginToAccount();\n         assertTestUserLocale(null);\n-        assertEquals(DEFAULT_LOCALE_NAME, personalInfoPage.header().getCurrentLocaleName());\n-        personalInfoPage.header().selectLocale(CUSTOM_LOCALE);\n+        personalInfoPage.selectLocale(CUSTOM_LOCALE);\n+        personalInfoPage.clickSave(false);\n+        WaitUtils.pause(1000);", "originalCommit": "dde1c310499f328b899e43e11f4f0dc1969145bd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUzNjMxMg==", "url": "https://github.com/keycloak/keycloak/pull/6987#discussion_r414536312", "bodyText": "Could you please extend the test a bit? We need to be sure i18n works on the Welcome Screen as well.", "author": "vmuzikar", "createdAt": "2020-04-24T12:26:46Z", "path": "testsuite/integration-arquillian/tests/other/base-ui/src/test/java/org/keycloak/testsuite/ui/account2/InternationalizationTest.java", "diffHunk": "@@ -53,29 +52,17 @@ public void addTestRealms(List<RealmRepresentation> testRealms) {\n     @Before\n     public void beforeI18nTest() {\n         assertTestUserLocale(null);\n-        assertEquals(DEFAULT_LOCALE_NAME, welcomeScreen.header().getCurrentLocaleName());\n-    }\n-\n-    @Test\n-    public void welcomeScreenTest() {\n-        welcomeScreen.header().selectLocale(CUSTOM_LOCALE);\n-        assertCustomLocaleWelcomeScreen();\n-\n-        // check if selected locale is preserved\n-        welcomeScreen.clickPersonalInfoLink();\n-        assertCustomLocaleLoginPage();\n-        loginToAccount();\n-        assertTestUserLocale(CUSTOM_LOCALE);\n-        assertCustomLocalePersonalInfo();\n     }\n \n     @Test\n     public void loggedInPageTest() {\n         personalInfoPage.navigateTo();\n         loginToAccount();\n         assertTestUserLocale(null);\n-        assertEquals(DEFAULT_LOCALE_NAME, personalInfoPage.header().getCurrentLocaleName());\n-        personalInfoPage.header().selectLocale(CUSTOM_LOCALE);\n+        personalInfoPage.selectLocale(CUSTOM_LOCALE);\n+        personalInfoPage.clickSave(false);\n+        WaitUtils.pause(1000);\n+", "originalCommit": "dde1c310499f328b899e43e11f4f0dc1969145bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU3NDU3Mg==", "url": "https://github.com/keycloak/keycloak/pull/6987#discussion_r414574572", "bodyText": "well there is the assertCustomLocaleWelcomeScreen there isn't much more to test I'm afraid.", "author": "edewit", "createdAt": "2020-04-24T13:26:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUzNjMxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU5NTAzMw==", "url": "https://github.com/keycloak/keycloak/pull/6987#discussion_r414595033", "bodyText": "You're correct, scratch this. I missed the last line (assertCustomLocaleWelcomeScreen();) in this test.", "author": "vmuzikar", "createdAt": "2020-04-24T13:55:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUzNjMxMg=="}], "type": "inlineReview"}, {"oid": "2f2530a5452c3a9f0ec7e6221d3bfeade31146cc", "url": "https://github.com/keycloak/keycloak/commit/2f2530a5452c3a9f0ec7e6221d3bfeade31146cc", "message": "KEYCLOAK-12936 only change the locale in the AccountPage.", "committedDate": "2020-04-24T13:19:42Z", "type": "forcePushed"}, {"oid": "4b2d2fdc58d520b3a0cc5251686045068451e70d", "url": "https://github.com/keycloak/keycloak/commit/4b2d2fdc58d520b3a0cc5251686045068451e70d", "message": "KEYCLOAK-12936 only change the locale in the AccountPage.", "committedDate": "2020-04-24T13:26:55Z", "type": "forcePushed"}, {"oid": "015ddc4158b2ffb1aeb1f0c2bee04b37d6a9869c", "url": "https://github.com/keycloak/keycloak/commit/015ddc4158b2ffb1aeb1f0c2bee04b37d6a9869c", "message": "KEYCLOAK-12936 only change the locale in the AccountPage.", "committedDate": "2020-04-24T13:51:47Z", "type": "commit"}, {"oid": "015ddc4158b2ffb1aeb1f0c2bee04b37d6a9869c", "url": "https://github.com/keycloak/keycloak/commit/015ddc4158b2ffb1aeb1f0c2bee04b37d6a9869c", "message": "KEYCLOAK-12936 only change the locale in the AccountPage.", "committedDate": "2020-04-24T13:51:47Z", "type": "forcePushed"}]}