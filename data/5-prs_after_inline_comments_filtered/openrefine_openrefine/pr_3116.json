{"pr_number": 3116, "pr_title": "Handle NumberFormatException thrown in DatabaseImportController", "pr_createdAt": "2020-08-23T15:11:51Z", "pr_url": "https://github.com/OpenRefine/OpenRefine/pull/3116", "timeline": [{"oid": "608d1f63e238e37147ee664af9ca031f691294f8", "url": "https://github.com/OpenRefine/OpenRefine/commit/608d1f63e238e37147ee664af9ca031f691294f8", "message": "Handle NumberFormatException thrown in DatabaseImportController", "committedDate": "2020-08-23T15:06:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ1NTAxMA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3116#discussion_r476455010", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    }catch(NumberFormatException nfE) {\n          \n          \n            \n                    } catch(NumberFormatException nfE) {", "author": "wetneb", "createdAt": "2020-08-25T13:38:23Z", "path": "extensions/database/src/com/google/refine/extension/database/DatabaseImportController.java", "diffHunk": "@@ -450,7 +450,11 @@ private DatabaseQueryInfo getQueryInfo(HttpServletRequest request) {\n         jdbcConfig.setConnectionName(request.getParameter(\"connectionName\"));\n         jdbcConfig.setDatabaseType(request.getParameter(\"databaseType\"));\n         jdbcConfig.setDatabaseHost(request.getParameter(\"databaseServer\"));\n-        jdbcConfig.setDatabasePort(Integer.parseInt(request.getParameter(\"databasePort\")));\n+        try {\n+        \tjdbcConfig.setDatabasePort(Integer.parseInt(request.getParameter(\"databasePort\")));\n+        }catch(NumberFormatException nfE) {", "originalCommit": "608d1f63e238e37147ee664af9ca031f691294f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYyNTA0NA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3116#discussion_r476625044", "bodyText": "Why was this marked as resolved when the change suggested by @wetneb (space between the brace and catch) wasn't made?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    }catch(NumberFormatException nfE) {\n          \n          \n            \n                    } catch(NumberFormatException nfE) {", "author": "tfmorris", "createdAt": "2020-08-25T17:38:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ1NTAxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ1NTI4NA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3116#discussion_r476455284", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \tlogger.error(\"getQueryInfo :: NumberFormatException ::{}\", nfE);\n          \n          \n            \n                    \tlogger.error(\"getQueryInfo :: invalid database port ::{}\", nfE);", "author": "wetneb", "createdAt": "2020-08-25T13:38:48Z", "path": "extensions/database/src/com/google/refine/extension/database/DatabaseImportController.java", "diffHunk": "@@ -450,7 +450,11 @@ private DatabaseQueryInfo getQueryInfo(HttpServletRequest request) {\n         jdbcConfig.setConnectionName(request.getParameter(\"connectionName\"));\n         jdbcConfig.setDatabaseType(request.getParameter(\"databaseType\"));\n         jdbcConfig.setDatabaseHost(request.getParameter(\"databaseServer\"));\n-        jdbcConfig.setDatabasePort(Integer.parseInt(request.getParameter(\"databasePort\")));\n+        try {\n+        \tjdbcConfig.setDatabasePort(Integer.parseInt(request.getParameter(\"databasePort\")));\n+        }catch(NumberFormatException nfE) {\n+        \tlogger.error(\"getQueryInfo :: NumberFormatException ::{}\", nfE);", "originalCommit": "608d1f63e238e37147ee664af9ca031f691294f8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d83d4d97665aa70422795f4d285ca08d1c7b7e53", "url": "https://github.com/OpenRefine/OpenRefine/commit/d83d4d97665aa70422795f4d285ca08d1c7b7e53", "message": "Update extensions/database/src/com/google/refine/extension/database/DatabaseImportController.java\n\nCo-authored-by: Antonin Delpeuch <antonin@delpeuch.eu>", "committedDate": "2020-08-25T13:43:08Z", "type": "commit"}, {"oid": "1b1e815973c79d90033735d3438310eba0e2bf4e", "url": "https://github.com/OpenRefine/OpenRefine/commit/1b1e815973c79d90033735d3438310eba0e2bf4e", "message": "Update DatabaseImportController.java\n\nAdd space just before the catch block", "committedDate": "2020-08-25T17:48:09Z", "type": "commit"}]}