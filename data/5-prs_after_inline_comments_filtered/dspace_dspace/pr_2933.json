{"pr_number": 2933, "pr_title": "Cookie preferences & End User Agreement per account - initial registries update", "pr_createdAt": "2020-08-19T13:26:55Z", "pr_url": "https://github.com/DSpace/DSpace/pull/2933", "timeline": [{"oid": "e1fb87773c4aac18072fb8eef37cf866945d95e4", "url": "https://github.com/DSpace/DSpace/commit/e1fb87773c4aac18072fb8eef37cf866945d95e4", "message": "taskid 72455 Cookie Preferences per account", "committedDate": "2020-08-13T18:11:32Z", "type": "commit"}, {"oid": "5eaee53c6b8f598e6c1392dc12660b7505646fcf", "url": "https://github.com/DSpace/DSpace/commit/5eaee53c6b8f598e6c1392dc12660b7505646fcf", "message": "taskid 72455 Cookie Preferences per account - feedback", "committedDate": "2020-08-19T13:16:59Z", "type": "commit"}, {"oid": "899f04c5ed1651ce04c3a51e1442c9d9cd4bac81", "url": "https://github.com/DSpace/DSpace/commit/899f04c5ed1651ce04c3a51e1442c9d9cd4bac81", "message": "Additional metadatafield related to the cookie preferences", "committedDate": "2020-08-20T11:06:02Z", "type": "commit"}, {"oid": "1773b40acb9fe65488abc59e8c101c66767650c8", "url": "https://github.com/DSpace/DSpace/commit/1773b40acb9fe65488abc59e8c101c66767650c8", "message": "Checkstyle fix", "committedDate": "2020-08-20T12:53:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc0NzkwMA==", "url": "https://github.com/DSpace/DSpace/pull/2933#discussion_r474747900", "bodyText": "I would like to see these tests have more accurate sample metadata.  So, based on the discussion in this ticket, the end-user field should likely be set to true, and the cookies field should store a sample Klaro cookie (if we know what that looks like...if we do not, some sort of sample array of values is good enough).  That would help us better document how these fields are expected to be used.", "author": "tdonohue", "createdAt": "2020-08-21T14:51:26Z", "path": "dspace-api/src/test/java/org/dspace/eperson/EPersonTest.java", "diffHunk": "@@ -78,6 +78,23 @@ public void destroy() {\n         super.destroy();\n     }\n \n+    @Test\n+    public void testPreferences() throws Exception {\n+\n+        ePersonService.addMetadata(context, eperson, \"dspace\", \"agreements\", \"end-user\", null, \"test\");\n+        ePersonService.addMetadata(context, eperson, \"dspace\", \"agreements\", \"cookies\", null,\n+                                   \"Dspace cookies agreement metadata\");", "originalCommit": "1773b40acb9fe65488abc59e8c101c66767650c8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMxNzE5NA==", "url": "https://github.com/DSpace/DSpace/pull/2933#discussion_r479317194", "bodyText": "I'd checked with the Angular team for an example of the klaro cookie, so we've used this in our test.\nI totally agree that actually having relevant information in the test would result in the actual test being more understood.", "author": "jonas-atmire", "createdAt": "2020-08-28T13:58:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc0NzkwMA=="}], "type": "inlineReview"}, {"oid": "8adc7e5c318bd09dcf38133319da61d67b261328", "url": "https://github.com/DSpace/DSpace/commit/8adc7e5c318bd09dcf38133319da61d67b261328", "message": "taskid 72455 Cookie Preferences per account - add scope notes and more realistic test value", "committedDate": "2020-08-28T13:26:22Z", "type": "commit"}]}