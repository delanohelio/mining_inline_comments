{"pr_number": 2650, "pr_title": "Default webui.submit.upload.required", "pr_createdAt": "2020-01-23T10:00:35Z", "pr_url": "https://github.com/DSpace/DSpace/pull/2650", "timeline": [{"oid": "d2876e29dc1075a85afd8ee82d15a0455793532c", "url": "https://github.com/DSpace/DSpace/commit/d2876e29dc1075a85afd8ee82d15a0455793532c", "message": "webui.submit.upload.required should default to true", "committedDate": "2020-01-02T17:28:22Z", "type": "commit"}, {"oid": "a962c35a8103f7c0ed356d6db5fffd9b6f46ae2b", "url": "https://github.com/DSpace/DSpace/commit/a962c35a8103f7c0ed356d6db5fffd9b6f46ae2b", "message": "webui.submit.upload.required should default to true", "committedDate": "2020-01-03T08:40:37Z", "type": "commit"}, {"oid": "f935faade145f961e964fe81a0345ef3e3f1da1a", "url": "https://github.com/DSpace/DSpace/commit/f935faade145f961e964fe81a0345ef3e3f1da1a", "message": "webui.submit.upload.required should default to true", "committedDate": "2020-01-03T09:59:11Z", "type": "commit"}, {"oid": "1bb451db41ee6bb49336ffcb34d80608f7e3a230", "url": "https://github.com/DSpace/DSpace/commit/1bb451db41ee6bb49336ffcb34d80608f7e3a230", "message": "webui.submit.upload.required should default to true", "committedDate": "2020-01-03T11:10:12Z", "type": "commit"}, {"oid": "575e672fbabe78c816d980f112e2ef68f51148cc", "url": "https://github.com/DSpace/DSpace/commit/575e672fbabe78c816d980f112e2ef68f51148cc", "message": "webui.submit.upload.required should default to true", "committedDate": "2020-01-03T12:57:25Z", "type": "commit"}, {"oid": "f8ab7def82783da2325c55fbf88d5ec269190cce", "url": "https://github.com/DSpace/DSpace/commit/f8ab7def82783da2325c55fbf88d5ec269190cce", "message": "68373: test fix by setting webui.submit.upload.required=false &\nextra tests for file upload when upload.required = true", "committedDate": "2020-01-22T14:23:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkyNDUxNQ==", "url": "https://github.com/DSpace/DSpace/pull/2650#discussion_r371924515", "bodyText": "@benbosman : I'm curious why we are not storing this configuration in the required local param?  This seems to be different than how we treat other fields in this UploadConfiguration, e.g. see the getMaxSize() method: https://github.com/DSpace/DSpace/blob/master/dspace-api/src/main/java/org/dspace/submit/model/UploadConfiguration.java#L43\nAre you implying that we need to change the behavior here for all the fields?  Or, is this field somehow unique?", "author": "tdonohue", "createdAt": "2020-01-28T16:47:06Z", "path": "dspace-api/src/main/java/org/dspace/submit/model/UploadConfiguration.java", "diffHunk": "@@ -53,7 +53,9 @@ public void setMaxSize(Long maxSize) {\n \n     public Boolean isRequired() {\n         if (required == null) {\n-            required = configurationService.getBooleanProperty(\"webui.submit.upload.required\");\n+            //defaults to true\n+            //don't store a local copy of the configuration property\n+            return configurationService.getBooleanProperty(\"webui.submit.upload.required\", true);", "originalCommit": "f8ab7def82783da2325c55fbf88d5ec269190cce", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ4OTU1NA==", "url": "https://github.com/DSpace/DSpace/pull/2650#discussion_r372489554", "bodyText": "if we store it in a local param, we can't override it in ITs and test both settings", "author": "benbosman", "createdAt": "2020-01-29T16:27:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkyNDUxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ5NTA0NQ==", "url": "https://github.com/DSpace/DSpace/pull/2650#discussion_r372495045", "bodyText": "@benbosman: Ugh, that implies to me that UploadConfiguration itself likely needs rework (or even possibly removal).  You are correct obviously that ITs/tests need to be able to override configuration easily....if UploadConfiguration causes that to not be possible, it may need to go away.\n(To clarify, I'm not saying that's required from this PR, it could happen in a follow-up or later PR.  It just sounds to me like this UploadConfiguration class is not serving any clear purpose.)", "author": "tdonohue", "createdAt": "2020-01-29T16:36:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkyNDUxNQ=="}], "type": "inlineReview"}]}