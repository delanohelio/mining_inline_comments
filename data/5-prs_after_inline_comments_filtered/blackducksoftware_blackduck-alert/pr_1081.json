{"pr_number": 1081, "pr_title": "Azure Boards Context", "pr_createdAt": "2020-07-23T17:26:49Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081", "timeline": [{"oid": "c7e2b153662805e7caf54098f25029c55915337b", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/c7e2b153662805e7caf54098f25029c55915337b", "message": "Feat(Azure Channel): Begin implementing azure context", "committedDate": "2020-07-23T14:21:34Z", "type": "commit"}, {"oid": "15661316c1106606e4509f2f54c3e700af0ce119", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/15661316c1106606e4509f2f54c3e700af0ce119", "message": "Feat(Azure Boards Channel): Implement OAuth DataStore and add required fields", "committedDate": "2020-07-23T17:16:32Z", "type": "commit"}, {"oid": "aefb1a75979a7b70d0be2363b268ecae954485ba", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/aefb1a75979a7b70d0be2363b268ecae954485ba", "message": "Fix(Azure Boards Channel): Update required fields for AzureBoardsProperties", "committedDate": "2020-07-23T17:25:51Z", "type": "commit"}, {"oid": "a715645a728b4f087286ea6435ae26b833edd02f", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a715645a728b4f087286ea6435ae26b833edd02f", "message": "Fix(Azure Boards Channel): Fix missing database field entry and clean up commented code", "committedDate": "2020-07-23T18:06:56Z", "type": "commit"}, {"oid": "a715645a728b4f087286ea6435ae26b833edd02f", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a715645a728b4f087286ea6435ae26b833edd02f", "message": "Fix(Azure Boards Channel): Fix missing database field entry and clean up commented code", "committedDate": "2020-07-23T18:06:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2MjUzMw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459662533", "bodyText": "should azureProjectName be here twice? Are projectName and projectKey the same?", "author": "ChomickiM", "createdAt": "2020-07-23T18:58:00Z", "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/AzureBoardsChannel.java", "diffHunk": "@@ -74,8 +79,22 @@ public IssueTrackerResponse sendRequests(IssueTrackerContext context, List<Issue\n     }\n \n     private IssueConfig createIssueConfig(FieldAccessor fieldAccessor) {\n-        // FIXME implement\n-        return null;\n+        String azureProjectName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_AZURE_PROJECT);\n+        String workItemCreatorEmail = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_CREATOR_EMAIL);\n+        String workItemTypeName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_TYPE);\n+        boolean commentOnWorkItems = fieldAccessor.getBooleanOrFalse(AzureBoardsDescriptor.KEY_WORK_ITEM_COMMENT);\n+        String completedStateName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_COMPLETED_STATE);\n+        String reopenStateName = fieldAccessor.getStringOrNull(AzureBoardsDescriptor.KEY_WORK_ITEM_REOPEN_STATE);\n+        return new IssueConfig(\n+            azureProjectName,\n+            azureProjectName,", "originalCommit": "a715645a728b4f087286ea6435ae26b833edd02f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2OTQ5Ng==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459669496", "bodyText": "The intention of this class was not clear. The three fields are:\n\nprojectKey\nprojectName\nprojectId\n\nThere is no distinction between projectKey and projectName in Azure. There is a projectId (UUID type), but it would have to be requested through the API.", "author": "gkillough", "createdAt": "2020-07-23T19:11:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2MjUzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MjQ3MA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459672470", "bodyText": "We could add another variable with the Authorization and Token URL hostnames, cut down on duplication.", "author": "bamandel", "createdAt": "2020-07-23T19:17:05Z", "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "diffHunk": "@@ -30,6 +30,8 @@\n \n public class AzureHttpServiceFactory {\n     public static final String DEFAULT_BASE_URL = \"https://dev.azure.com\";\n+    public static final String DEFAULT_AUTHORIZATION_URL = \"https://app.vssps.visualstudio.com/oauth2/authorize&response_type=Assertion\";\n+    public static final String DEFAULT_TOKEN_URL = \"https://app.vssps.visualstudio.com/oauth2/token?client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer\";", "originalCommit": "a715645a728b4f087286ea6435ae26b833edd02f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MzA3MQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459673071", "bodyText": "Are these URLs always going to be the same?", "author": "psantos1113", "createdAt": "2020-07-23T19:18:11Z", "path": "azure-boards-common/src/main/java/com/synopsys/integration/azure/boards/common/http/AzureHttpServiceFactory.java", "diffHunk": "@@ -30,6 +30,8 @@\n \n public class AzureHttpServiceFactory {\n     public static final String DEFAULT_BASE_URL = \"https://dev.azure.com\";\n+    public static final String DEFAULT_AUTHORIZATION_URL = \"https://app.vssps.visualstudio.com/oauth2/authorize&response_type=Assertion\";\n+    public static final String DEFAULT_TOKEN_URL = \"https://app.vssps.visualstudio.com/oauth2/token?client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer\";", "originalCommit": "a715645a728b4f087286ea6435ae26b833edd02f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3NTM0NQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459675345", "bodyText": "These are the two URLs will never change for OAuth?", "author": "psantos1113", "createdAt": "2020-07-23T19:22:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MzA3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3NTUzMA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459675530", "bodyText": "As far as I can tell, yes. The base url might be different if they aren't hosted, but it's unclear how OAuth works in that case.", "author": "gkillough", "createdAt": "2020-07-23T19:22:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3MzA3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3OTEwMw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459679103", "bodyText": "If we're doing OAuth, shouldn't Consumer and private keys always be needed in the handshake?", "author": "bamandel", "createdAt": "2020-07-23T19:29:28Z", "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsGlobalUIConfig.java", "diffHunk": "@@ -39,20 +37,15 @@\n public class AzureBoardsGlobalUIConfig extends UIConfig {\n     public static final String LABEL_AZURE_BOARDS_URL = \"Url\";\n     public static final String LABEL_ORGANIZATION_NAME = \"Organization Name\";\n-    public static final String LABEL_CONSUMER_KEY = \"Consumer Key\";\n-    public static final String LABEL_PRIVATE_KEY = \"Private Key\";", "originalCommit": "a715645a728b4f087286ea6435ae26b833edd02f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY4NjI5OQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1081#discussion_r459686299", "bodyText": "Not for OAuth 2.0.", "author": "gkillough", "createdAt": "2020-07-23T19:43:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3OTEwMw=="}], "type": "inlineReview"}, {"oid": "9f38249ee868d8cb43fdb485aa996fdd5a18400b", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/9f38249ee868d8cb43fdb485aa996fdd5a18400b", "message": "Chore(Azure Boards Library): Add TODO for OAuth url constants", "committedDate": "2020-07-23T20:24:46Z", "type": "commit"}, {"oid": "0979f200f515365d06eb40c8eae6142ff3a3d978", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0979f200f515365d06eb40c8eae6142ff3a3d978", "message": "Chore(Alert Common): Add TODO for issue config", "committedDate": "2020-07-24T12:24:19Z", "type": "commit"}, {"oid": "295f630ea3184c438bb2767c79ad723b23ff3a1a", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/295f630ea3184c438bb2767c79ad723b23ff3a1a", "message": "Merge branch 'master' into gk_create_azure_context", "committedDate": "2020-07-24T12:24:51Z", "type": "commit"}]}