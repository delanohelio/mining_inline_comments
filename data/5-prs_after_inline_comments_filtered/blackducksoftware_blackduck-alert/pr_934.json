{"pr_number": 934, "pr_title": "provider table", "pr_createdAt": "2020-03-25T21:00:02Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/934", "timeline": [{"oid": "aee22ed92ecd7b96427b3c20c64c73c4df7709bf", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/aee22ed92ecd7b96427b3c20c64c73c4df7709bf", "message": "feat: Add initial provider component.", "committedDate": "2020-03-12T18:48:06Z", "type": "commit"}, {"oid": "ba9decbc217cfaacf9a9242aec4800b8dab8557f", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ba9decbc217cfaacf9a9242aec4800b8dab8557f", "message": "Merge remote-tracking branch 'origin/master' into ps_provider_table", "committedDate": "2020-03-12T18:48:50Z", "type": "commit"}, {"oid": "b8464490e5d8a50f46ef3d7632b88faac27d918d", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b8464490e5d8a50f46ef3d7632b88faac27d918d", "message": "feat: Fetch all provider global configurations.", "committedDate": "2020-03-13T19:44:23Z", "type": "commit"}, {"oid": "ae358cb652cc597dc26aff9fa8a493c56c084fc4", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ae358cb652cc597dc26aff9fa8a493c56c084fc4", "message": "feat: Provider get table data to display.", "committedDate": "2020-03-16T16:40:10Z", "type": "commit"}, {"oid": "bceb347a225f5b4dff151d20d9662b1d9cee102c", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/bceb347a225f5b4dff151d20d9662b1d9cee102c", "message": "feat: Implement ability to create and edit configs.", "committedDate": "2020-03-17T16:05:23Z", "type": "commit"}, {"oid": "e7558cb09f9a94a22e6c0af567e4940ad5e8f4a6", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e7558cb09f9a94a22e6c0af567e4940ad5e8f4a6", "message": "feat: Add ability to test configurations.", "committedDate": "2020-03-17T18:43:19Z", "type": "commit"}, {"oid": "3f18246df9fa8bbe12f40458980a69870447c7b3", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/3f18246df9fa8bbe12f40458980a69870447c7b3", "message": "feat: Add test button and status message.", "committedDate": "2020-03-17T19:45:39Z", "type": "commit"}, {"oid": "5bca0463327b211fef0449d10055bcae4a813317", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/5bca0463327b211fef0449d10055bcae4a813317", "message": "Merge remote-tracking branch 'origin/master' into ps_provider_table", "committedDate": "2020-03-17T19:46:41Z", "type": "commit"}, {"oid": "ee1c27f3b86407bad0e3cdcd09c9ada56461ca93", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ee1c27f3b86407bad0e3cdcd09c9ada56461ca93", "message": "feat: Only get the provider global configuration.", "committedDate": "2020-03-18T15:07:31Z", "type": "commit"}, {"oid": "a8cae6221f7e1c98ff5a85c74538e9e6718964db", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a8cae6221f7e1c98ff5a85c74538e9e6718964db", "message": "feat: Fix the edit save and cancel buttons.", "committedDate": "2020-03-18T20:12:00Z", "type": "commit"}, {"oid": "ee18f9d9bfb36b47d38531c7a9ebb179a1f65311", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ee18f9d9bfb36b47d38531c7a9ebb179a1f65311", "message": "feat: use callbacks for table events.", "committedDate": "2020-03-20T18:08:03Z", "type": "commit"}, {"oid": "54eb0f511b96514098015a482d58135967be7e5c", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/54eb0f511b96514098015a482d58135967be7e5c", "message": "Merge remote-tracking branch 'origin/master' into ps_provider_table", "committedDate": "2020-03-20T19:31:34Z", "type": "commit"}, {"oid": "a711a6fc3260bb81c9b501b26ce8cc98c1816efa", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a711a6fc3260bb81c9b501b26ce8cc98c1816efa", "message": "feat: Implement correct updates to the table on save.", "committedDate": "2020-03-20T20:12:42Z", "type": "commit"}, {"oid": "4dd854f3993fb27e4622e31eba4eac81d7c6173f", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4dd854f3993fb27e4622e31eba4eac81d7c6173f", "message": "feat: Get latest table data on save or delete.", "committedDate": "2020-03-24T18:02:37Z", "type": "commit"}, {"oid": "e3eaeb285c7256a1b1e69de0e6c12c5f6abd76b6", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e3eaeb285c7256a1b1e69de0e6c12c5f6abd76b6", "message": "feat: Use TableDisplay callbacks.", "committedDate": "2020-03-24T18:07:57Z", "type": "commit"}, {"oid": "7587087131c355f6e808f8ddef4cb661ddccce98", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/7587087131c355f6e808f8ddef4cb661ddccce98", "message": "feat: Use TableDisplay callbacks.", "committedDate": "2020-03-24T18:11:47Z", "type": "commit"}, {"oid": "ea769f785ec7a0001c085c27d9ab6314cb24d80a", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ea769f785ec7a0001c085c27d9ab6314cb24d80a", "message": "feat: Use TableDisplay callbacks for roles.", "committedDate": "2020-03-24T18:20:56Z", "type": "commit"}, {"oid": "de43b3390c2a89fb81869ec2667e6b6f0660e87e", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/de43b3390c2a89fb81869ec2667e6b6f0660e87e", "message": "Merge remote-tracking branch 'origin/master' into ps_provider_table", "committedDate": "2020-03-24T20:17:14Z", "type": "commit"}, {"oid": "dbd4f401c5039b11096726839f3a2e8eb95c5300", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/dbd4f401c5039b11096726839f3a2e8eb95c5300", "message": "feat: Separate copy functionality from edit in the tables.", "committedDate": "2020-03-25T13:17:56Z", "type": "commit"}, {"oid": "117cfe10b732e7e7994e4df99787f29fd5cca004", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/117cfe10b732e7e7994e4df99787f29fd5cca004", "message": "feat: Add custom column renderers to TableDisplay.", "committedDate": "2020-03-25T13:36:20Z", "type": "commit"}, {"oid": "e363ffe80b2673e4b4a3a63883b62eb97f1ae24e", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e363ffe80b2673e4b4a3a63883b62eb97f1ae24e", "message": "feat: Add provider name validator.", "committedDate": "2020-03-25T15:27:29Z", "type": "commit"}, {"oid": "db0f0e8231da752ee9354a9097247e7fbe8dec7e", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/db0f0e8231da752ee9354a9097247e7fbe8dec7e", "message": "feat: Clear sensitive fields when copying.", "committedDate": "2020-03-25T16:07:02Z", "type": "commit"}, {"oid": "af342d13d11874ba679af0e4b737fee02c19ae46", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/af342d13d11874ba679af0e4b737fee02c19ae46", "message": "feat: Remove old Providers display.", "committedDate": "2020-03-25T18:00:46Z", "type": "commit"}, {"oid": "688e00f5c0b90dcae9a61a5c49f79c8b9015a4f9", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/688e00f5c0b90dcae9a61a5c49f79c8b9015a4f9", "message": "feat: Use the new confirm modal for delete.", "committedDate": "2020-03-25T19:06:04Z", "type": "commit"}, {"oid": "cd38969112dc6b8a643f918e7fc33ff471031890", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/cd38969112dc6b8a643f918e7fc33ff471031890", "message": "Merge remote-tracking branch 'origin/master' into ps_provider_table", "committedDate": "2020-03-25T20:50:47Z", "type": "commit"}, {"oid": "4f484bb8b61e8a2708b5b6100f99a7954e4b5e35", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4f484bb8b61e8a2708b5b6100f99a7954e4b5e35", "message": "Merge remote-tracking branch 'origin/master' into ps_provider_table", "committedDate": "2020-03-26T10:18:41Z", "type": "commit"}, {"oid": "2212415e7b0427bb939ad359710bca887d161791", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/2212415e7b0427bb939ad359710bca887d161791", "message": "feat: Update the import statements.", "committedDate": "2020-03-26T11:57:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODYyMTA0Mg==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/934#discussion_r398621042", "bodyText": "I don't think we really need this empty check. If the content is empty, we'll stream through an empty list creating another empty list which we're checking later on.", "author": "bamandel", "createdAt": "2020-03-26T14:34:37Z", "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/descriptor/config/ui/ProviderGlobalUIConfig.java", "diffHunk": "@@ -58,4 +74,29 @@ public ProviderKey getProviderKey() {\n         return providerKey;\n     }\n \n+    private Collection<String> validateDuplicateNames(FieldValueModel fieldToValidate, FieldModel fieldModel) {\n+        try {\n+            List<ConfigurationModel> configurations = configurationAccessor.getConfigurationsByDescriptorType(DescriptorType.PROVIDER);\n+            if (!configurations.isEmpty()) {", "originalCommit": "2212415e7b0427bb939ad359710bca887d161791", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODczNTMwNg==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/934#discussion_r398735306", "bodyText": "I think this is defensive coding and saves us from running a few lines of code that we may not want.", "author": "jamesrichard91", "createdAt": "2020-03-26T16:58:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODYyMTA0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY2NzYzMg==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/934#discussion_r398667632", "bodyText": "Should this be a database constraint? I don't think this is the appropriate place to handle this error.", "author": "gkillough", "createdAt": "2020-03-26T15:33:02Z", "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/descriptor/config/ui/ProviderGlobalUIConfig.java", "diffHunk": "@@ -58,4 +74,29 @@ public ProviderKey getProviderKey() {\n         return providerKey;\n     }\n \n+    private Collection<String> validateDuplicateNames(FieldValueModel fieldToValidate, FieldModel fieldModel) {\n+        try {\n+            List<ConfigurationModel> configurations = configurationAccessor.getConfigurationsByDescriptorType(DescriptorType.PROVIDER);\n+            if (!configurations.isEmpty()) {\n+                List<ConfigurationModel> modelsWithName = configurations.stream()\n+                                                              .filter(configurationModel ->\n+                                                                          configurationModel.getField(ProviderDescriptor.KEY_PROVIDER_CONFIG_NAME)\n+                                                                              .flatMap(ConfigurationFieldModel::getFieldValue)\n+                                                                              .filter(configName -> configName.equals(fieldToValidate.getValue().orElse(\"\")))\n+                                                                              .isPresent())\n+                                                              .collect(Collectors.toList());\n+                if (modelsWithName.size() > 1) {\n+                    return List.of(ERROR_DUPLICATE_PROVIDER_NAME);", "originalCommit": "2212415e7b0427bb939ad359710bca887d161791", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODczNjYyNw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/934#discussion_r398736627", "bodyText": "We could move this duplicate validation into the database accessors.", "author": "jamesrichard91", "createdAt": "2020-03-26T17:00:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY2NzYzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxNjQ5Ng==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/934#discussion_r398816496", "bodyText": "A database exception won't get associated as a field exception and then we can't display the error of a duplicate name with the name text field in the form.  We perform the same validation with job names and construct the the field exception in the JobConfigActions.  If I throw a database exception it won't be tied to a field.  We should add a constraint to the database that the configuration name be unique", "author": "psantos1113", "createdAt": "2020-03-26T18:55:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY2NzYzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxODMzNQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/934#discussion_r398818335", "bodyText": "My bad, I realize this is the validator, not the endpoint.", "author": "gkillough", "createdAt": "2020-03-26T18:58:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY2NzYzMg=="}], "type": "inlineReview"}, {"oid": "0d00d13c771d53614ab6ff492cc864705daf48d9", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0d00d13c771d53614ab6ff492cc864705daf48d9", "message": "Merge remote-tracking branch 'origin/master' into ps_provider_table", "committedDate": "2020-03-26T18:33:28Z", "type": "commit"}, {"oid": "d1e94f723b5d7e066daaa74d45ecddeccde85f04", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d1e94f723b5d7e066daaa74d45ecddeccde85f04", "message": "refactor: Implement PR feedback.", "committedDate": "2020-03-26T19:34:54Z", "type": "commit"}]}