{"pr_number": 1187, "pr_title": "home controller", "pr_createdAt": "2020-09-24T13:50:48Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/1187", "timeline": [{"oid": "1233f0eb094401dfdddcd25efde0d6afff4520cb", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/1233f0eb094401dfdddcd25efde0d6afff4520cb", "message": "refactor: Create an actions class for the home controller.", "committedDate": "2020-09-24T13:30:54Z", "type": "commit"}, {"oid": "b24ebb0cc019aca47e8a6484b685fefd5e8b5081", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b24ebb0cc019aca47e8a6484b685fefd5e8b5081", "message": "test: Add missing tests to increase code coverage.", "committedDate": "2020-09-24T13:44:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5NDA3NA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1187#discussion_r494394074", "bodyText": "Small thing, but a multiline comment would probably be better here.", "author": "bamandel", "createdAt": "2020-09-24T15:05:04Z", "path": "src/main/java/com/synopsys/integration/alert/web/api/home/HomeController.java", "diffHunk": "@@ -28,58 +28,39 @@\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.http.HttpStatus;\n import org.springframework.http.MediaType;\n-import org.springframework.security.core.Authentication;\n-import org.springframework.security.core.GrantedAuthority;\n-import org.springframework.security.core.context.SecurityContextHolder;\n-import org.springframework.security.web.csrf.CsrfToken;\n-import org.springframework.security.web.csrf.HttpSessionCsrfTokenRepository;\n import org.springframework.stereotype.Controller;\n import org.springframework.web.bind.annotation.GetMapping;\n import org.springframework.web.bind.annotation.ResponseBody;\n import org.springframework.web.bind.annotation.ResponseStatus;\n \n import com.synopsys.integration.alert.common.rest.ResponseFactory;\n-import com.synopsys.integration.alert.web.security.authentication.saml.SAMLContext;\n \n @Controller\n public class HomeController {\n-    private static final String ROLE_ANONYMOUS = \"ROLE_ANONYMOUS\";\n-    private final HttpSessionCsrfTokenRepository csrfTokenRespository;\n-    private final SAMLContext samlContext;\n+    private final HomeActions actions;\n \n     @Autowired\n-    public HomeController(HttpSessionCsrfTokenRepository csrfTokenRepository, SAMLContext samlContext) {\n-        this.csrfTokenRespository = csrfTokenRepository;\n-        this.samlContext = samlContext;\n+    public HomeController(HomeActions actions) {\n+        this.actions = actions;\n     }\n \n     @GetMapping(value = { \"/\", \"/error\", \"/channels/**\", \"/providers/**\", \"/general/**\" }, produces = MediaType.TEXT_HTML_VALUE)\n     public String index() {\n+        // This is using Thymeleaf templating therefore we cannot return just a string from an ActionResponse otherwise the templating will not be\n+        // setup correctly and Alert will return a 404 on the main page because index.html will not be served up by this method.", "originalCommit": "b24ebb0cc019aca47e8a6484b685fefd5e8b5081", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "03940855482871b03cf409e62823f3c29674cb31", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/03940855482871b03cf409e62823f3c29674cb31", "message": "chore: Update to a multi-line comment.", "committedDate": "2020-09-24T15:37:40Z", "type": "commit"}]}