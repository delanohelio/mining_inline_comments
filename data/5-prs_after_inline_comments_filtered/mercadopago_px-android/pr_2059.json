{"pr_number": 2059, "pr_title": "[enhancement] call clear cap service when tokenize after esc cap", "pr_createdAt": "2020-03-03T21:21:37Z", "pr_url": "https://github.com/mercadopago/px-android/pull/2059", "timeline": [{"oid": "4dda9f8689d16b11d2ff2d3fb9f9ba4d9095208b", "url": "https://github.com/mercadopago/px-android/commit/4dda9f8689d16b11d2ff2d3fb9f9ba4d9095208b", "message": "* Called clear cap service when tokenize after esc cap", "committedDate": "2020-03-03T21:24:13Z", "type": "forcePushed"}, {"oid": "e4664d98fb458efc6514d5f3e93607ea76cc797b", "url": "https://github.com/mercadopago/px-android/commit/e4664d98fb458efc6514d5f3e93607ea76cc797b", "message": "* Called clear cap service when tokenize after esc cap", "committedDate": "2020-03-03T22:00:00Z", "type": "commit"}, {"oid": "e4664d98fb458efc6514d5f3e93607ea76cc797b", "url": "https://github.com/mercadopago/px-android/commit/e4664d98fb458efc6514d5f3e93607ea76cc797b", "message": "* Called clear cap service when tokenize after esc cap", "committedDate": "2020-03-03T22:00:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY1MTY5OQ==", "url": "https://github.com/mercadopago/px-android/pull/2059#discussion_r387651699", "bodyText": "Si sale bien o mal, siempre hacemos lo mismo? resolveTokenCreation(token)", "author": "jorGonzalez291292", "createdAt": "2020-03-04T13:03:08Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/CardTokenService.java", "diffHunk": "@@ -104,4 +106,24 @@ public void execute(final Callback<Token> callback) {\n             .updateToken(tokenId, paymentSettingRepository.getPublicKey(), paymentSettingRepository.getPrivateKey(),\n                 securityCodeIntent);\n     }\n-}\n+\n+    @Override\n+    public void clearCap(@NonNull final String cardId, @NonNull final ClearCapCallback callback) {\n+        if (TextUtil.isEmpty(paymentSettingRepository.getPrivateKey())) {\n+            callback.execute();\n+            return;\n+        }\n+        gatewayService.clearCap(API_ENVIRONMENT_INIT, cardId, paymentSettingRepository.getPrivateKey())\n+            .enqueue(new Callback<String>() {\n+                @Override\n+                public void success(final String s) {\n+                    callback.execute();\n+                }\n+\n+                @Override\n+                public void failure(final ApiException apiException) {\n+                    callback.execute();", "originalCommit": "e4664d98fb458efc6514d5f3e93607ea76cc797b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY2NzMxNA==", "url": "https://github.com/mercadopago/px-android/pull/2059#discussion_r387667314", "bodyText": "Asi es", "author": "cgaggino", "createdAt": "2020-03-04T13:32:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY1MTY5OQ=="}], "type": "inlineReview"}]}