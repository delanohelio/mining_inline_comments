{"pr_number": 5738, "pr_title": "Ensure `model.allParents` always includes `model.parent`.", "pr_createdAt": "2020-03-28T22:59:10Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/5738", "timeline": [{"oid": "d9b47ef3cbf5512c481a2b053f5ee87e304df41f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d9b47ef3cbf5512c481a2b053f5ee87e304df41f", "message": "Ensure `model.allParents` always includes `model.parent`.\n\n`allParents` is used by generators with multiple inheritance, e.g typescript and perl", "committedDate": "2020-03-28T22:46:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc4ODY4MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5738#discussion_r399788681", "bodyText": "Doesn't the spec (at least 3.0.3 does as far as I can tell) require a discriminator?", "author": "TiFu", "createdAt": "2020-03-29T12:09:36Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -1255,18 +1254,18 @@ public static String getParentName(ComposedSchema composedSchema, Map<String, Sc\n                         }\n                     } else {\n                         // not a parent since discriminator.propertyName is not set\n-                        refedWithoutDiscriminator.add(parentName);\n                     }\n                 } else {\n                     // not a ref, doing nothing\n                 }\n             }\n         }\n \n-        if (names.size() == 0 && refedWithoutDiscriminator.size() == 1) {\n-            LOGGER.warn(\"[deprecated] inheritance without use of 'discriminator.propertyName' is deprecated \" +", "originalCommit": "d9b47ef3cbf5512c481a2b053f5ee87e304df41f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgyNTMzMA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5738#discussion_r399825330", "bodyText": "It definitely does.\nI have no idea why this \"deprecated\" case is handled this way. What this PR does is making sure both parent and allParents consistently handle it the same way.\nWe might want to remove this deprecated logic in generator 5.0", "author": "amakhrov", "createdAt": "2020-03-29T17:06:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc4ODY4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1MzkyNg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5738#discussion_r399853926", "bodyText": "In that case, wouldn't it make sense to leave the warning in until the (language-agnostic part of the) generator just flat out rejects specs with missing discriminators?\nOr does it already do that?", "author": "TiFu", "createdAt": "2020-03-29T21:06:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc4ODY4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NTg2Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5738#discussion_r399855863", "bodyText": "This warning still lives in getParentName(), where it was originally introduced.\nIn my earlier PR I duplicated the logic from getParentName() into this getAllParentsName() - together with the warning. Apparently it was not a robust approach, so i this PR I remove the duplicated logic, and just call getParentName from getAllParentsName.\nThis way getAllParentsName doesn't really care about any special handling in getParentName", "author": "amakhrov", "createdAt": "2020-03-29T21:23:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc4ODY4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk3MzY1MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5738#discussion_r399973650", "bodyText": "the \"deprecated\" behavior is to support openapi 2.0", "author": "macjohnny", "createdAt": "2020-03-30T07:17:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc4ODY4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE5ODUxMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5738#discussion_r400198511", "bodyText": "Alright, if it's still handled in getParentName() that lgtm", "author": "TiFu", "createdAt": "2020-03-30T13:39:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc4ODY4MQ=="}], "type": "inlineReview"}]}