{"pr_number": 6729, "pr_title": "[Dart] Fix enum generation", "pr_createdAt": "2020-06-20T21:26:32Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/6729", "timeline": [{"oid": "16e991c9d2a8285d71c4ca1951727f1f68d18dba", "url": "https://github.com/OpenAPITools/openapi-generator/commit/16e991c9d2a8285d71c4ca1951727f1f68d18dba", "message": "[Dart] Fix enum generation", "committedDate": "2020-06-20T20:53:34Z", "type": "commit"}, {"oid": "9689bdf04be96d9c626d2d2e44870f3b4460bcee", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9689bdf04be96d9c626d2d2e44870f3b4460bcee", "message": "Update generated Order file", "committedDate": "2020-06-20T20:57:07Z", "type": "commit"}, {"oid": "7ca7b3d52d320d4bf073bcb3e7debc69d5a084b5", "url": "https://github.com/OpenAPITools/openapi-generator/commit/7ca7b3d52d320d4bf073bcb3e7debc69d5a084b5", "message": "Re-add constructor", "committedDate": "2020-06-20T21:25:46Z", "type": "commit"}, {"oid": "6b9c5b084ee689fbcc222032ab7062687eb07cfc", "url": "https://github.com/OpenAPITools/openapi-generator/commit/6b9c5b084ee689fbcc222032ab7062687eb07cfc", "message": "Generate dart2 files", "committedDate": "2020-06-20T21:26:01Z", "type": "commit"}, {"oid": "c2751a3b537842e17991ad56f4b4d03147175512", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c2751a3b537842e17991ad56f4b4d03147175512", "message": "Dart - nicer enum formatting", "committedDate": "2020-06-20T21:31:41Z", "type": "commit"}, {"oid": "b55e1a3e6418ebb0e037cb51e70cd7edc23a1e9d", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b55e1a3e6418ebb0e037cb51e70cd7edc23a1e9d", "message": "Dart - generate enum name as className+enumName", "committedDate": "2020-06-21T05:00:17Z", "type": "commit"}, {"oid": "5f7082ecbfc12603e57fec0410b8645a324f9d58", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5f7082ecbfc12603e57fec0410b8645a324f9d58", "message": "Dart - dont initialize vars to null by default\n\nFixes #3633", "committedDate": "2020-06-21T05:30:53Z", "type": "commit"}, {"oid": "5030a9975741bd06af7e8426d94cb670681e3771", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5030a9975741bd06af7e8426d94cb670681e3771", "message": "Dart - Generate inlined enums and deserialize them", "committedDate": "2020-06-21T07:30:54Z", "type": "commit"}, {"oid": "5030a9975741bd06af7e8426d94cb670681e3771", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5030a9975741bd06af7e8426d94cb670681e3771", "message": "Dart - Generate inlined enums and deserialize them", "committedDate": "2020-06-21T07:30:54Z", "type": "forcePushed"}, {"oid": "9e6a682bc02287e1720c427796d88b42019c56db", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9e6a682bc02287e1720c427796d88b42019c56db", "message": "Merge branch 'master' of github.com:agilob/openapi-generator into 6727", "committedDate": "2020-06-28T08:07:59Z", "type": "commit"}, {"oid": "9e6a682bc02287e1720c427796d88b42019c56db", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9e6a682bc02287e1720c427796d88b42019c56db", "message": "Merge branch 'master' of github.com:agilob/openapi-generator into 6727", "committedDate": "2020-06-28T08:07:59Z", "type": "forcePushed"}, {"oid": "4c2b320c1a244e66c8dccdc34c9521ceecd2019b", "url": "https://github.com/OpenAPITools/openapi-generator/commit/4c2b320c1a244e66c8dccdc34c9521ceecd2019b", "message": "Merge branch 'master' into 6727", "committedDate": "2020-06-28T08:10:48Z", "type": "commit"}, {"oid": "3ae01009e8d1616f3005da558d0b7df23dc47f8f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/3ae01009e8d1616f3005da558d0b7df23dc47f8f", "message": "Dart - Fix using default value", "committedDate": "2020-06-28T17:25:56Z", "type": "commit"}, {"oid": "3bf4c15c00c8c6fb79a67b7510157ac829906f2c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/3bf4c15c00c8c6fb79a67b7510157ac829906f2c", "message": "Fix typo", "committedDate": "2020-06-28T17:27:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY3NjUyNw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6729#discussion_r446676527", "bodyText": "This fixes not setting null value on properties that don't have default value. Dart is evolving to non-null by default language, so this will be important in the next releases of the language.", "author": "agilob", "createdAt": "2020-06-28T17:29:33Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/DartClientCodegen.java", "diffHunk": "@@ -414,7 +416,7 @@ public String toDefaultValue(Schema schema) {\n             }\n             return schema.getDefault().toString();\n         } else {\n-            return \"null\";\n+            return null;", "originalCommit": "3ae01009e8d1616f3005da558d0b7df23dc47f8f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3f8cc2afc8c8842d63004add8602034936b47447", "url": "https://github.com/OpenAPITools/openapi-generator/commit/3f8cc2afc8c8842d63004add8602034936b47447", "message": "Regenerate add dart files", "committedDate": "2020-06-28T17:33:51Z", "type": "commit"}, {"oid": "26ee46c96cf1b721b13b5b75b305a8dc8aa46f61", "url": "https://github.com/OpenAPITools/openapi-generator/commit/26ee46c96cf1b721b13b5b75b305a8dc8aa46f61", "message": "Merge branch 'master' of github.com:agilob/openapi-generator into 6727", "committedDate": "2020-06-28T18:18:08Z", "type": "commit"}, {"oid": "fb0934628c103bd37c4d0dfb78828d8cf677ffac", "url": "https://github.com/OpenAPITools/openapi-generator/commit/fb0934628c103bd37c4d0dfb78828d8cf677ffac", "message": "dart Revert override for dart dio and jaguar", "committedDate": "2020-06-28T18:23:11Z", "type": "commit"}, {"oid": "d38383f68b40c25cf86841761885bb8895d60233", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d38383f68b40c25cf86841761885bb8895d60233", "message": "Fix dart model tests", "committedDate": "2020-06-28T18:39:50Z", "type": "commit"}, {"oid": "6b352d845a0bab609ff3113869312048170a9f92", "url": "https://github.com/OpenAPITools/openapi-generator/commit/6b352d845a0bab609ff3113869312048170a9f92", "message": "Merge branch 'master' of github.com:OpenAPITools/openapi-generator into 6727", "committedDate": "2020-06-29T07:16:57Z", "type": "commit"}, {"oid": "73d45faefe6d6035faa945422b893856e2d3fc8f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/73d45faefe6d6035faa945422b893856e2d3fc8f", "message": "Merge branch 'master' of github.com:OpenAPITools/openapi-generator into 6727", "committedDate": "2020-06-29T17:59:55Z", "type": "commit"}, {"oid": "3325489e0dc66bf8c8b773440259cc8d67aefed3", "url": "https://github.com/OpenAPITools/openapi-generator/commit/3325489e0dc66bf8c8b773440259cc8d67aefed3", "message": "Merge branch 'master' of github.com:OpenAPITools/openapi-generator into 6727", "committedDate": "2020-06-30T21:02:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk3MDkyNw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6729#discussion_r448970927", "bodyText": "Quick question: should this be null instead of \"null\" similar to https://github.com/OpenAPITools/openapi-generator/pull/6729/files#r446676527 ?", "author": "wing328", "createdAt": "2020-07-02T12:39:47Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/DartDioClientCodegen.java", "diffHunk": "@@ -130,13 +130,21 @@ public void setBrowserClient(boolean browserClient) {\n     }\n \n     @Override\n-    public String toDefaultValue(Schema p) {\n-        if (ModelUtils.isMapSchema(p)) {\n+    public String toDefaultValue(Schema schema) {\n+        if (ModelUtils.isMapSchema(schema)) {\n             return \"const {}\";\n-        } else if (ModelUtils.isArraySchema(p)) {\n+        } else if (ModelUtils.isArraySchema(schema)) {\n             return \"const []\";\n         }\n-        return super.toDefaultValue(p);\n+\n+        if (schema.getDefault() != null) {\n+            if (ModelUtils.isStringSchema(schema)) {\n+                return \"\\\"\" + schema.getDefault().toString().replaceAll(\"\\\"\", \"\\\\\\\"\") + \"\\\"\";\n+            }\n+            return schema.getDefault().toString();\n+        } else {\n+            return \"null\";", "originalCommit": "3325489e0dc66bf8c8b773440259cc8d67aefed3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAwODMxNA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6729#discussion_r449008314", "bodyText": "This is in template DartDio - a webframework I don't know, so I made this change backwards compatible for the framework, as they use int x=  null. Pure dart2 generator will not have default null.", "author": "agilob", "createdAt": "2020-07-02T13:38:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk3MDkyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAwODU0Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6729#discussion_r449008547", "bodyText": "Same thing in DartJaguar, backwards compatible template.", "author": "agilob", "createdAt": "2020-07-02T13:39:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk3MDkyNw=="}], "type": "inlineReview"}, {"oid": "7c215c684108f8e55fe751b9a92e836d11f6276b", "url": "https://github.com/OpenAPITools/openapi-generator/commit/7c215c684108f8e55fe751b9a92e836d11f6276b", "message": "Merge branch 'master' of github.com:OpenAPITools/openapi-generator into 6727", "committedDate": "2020-07-02T13:19:56Z", "type": "commit"}, {"oid": "b8e8403497e69f8abc4d4d942e8213116388a1f2", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b8e8403497e69f8abc4d4d942e8213116388a1f2", "message": "Fix dart1 generated template", "committedDate": "2020-07-02T13:28:48Z", "type": "commit"}, {"oid": "c90511cdba25ea3f3b2d462c74af96c17fdf80b3", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c90511cdba25ea3f3b2d462c74af96c17fdf80b3", "message": "Merge branch 'master' of github.com:agilob/openapi-generator into 6727", "committedDate": "2020-07-21T17:10:01Z", "type": "commit"}, {"oid": "eec86f34d7c2435f1f88aaea65448ba487f75e4d", "url": "https://github.com/OpenAPITools/openapi-generator/commit/eec86f34d7c2435f1f88aaea65448ba487f75e4d", "message": "Use {{{datatypeWithEnum}}}", "committedDate": "2020-07-21T17:10:14Z", "type": "commit"}, {"oid": "75c4b8ce27940b7711397337e7493709473d38e8", "url": "https://github.com/OpenAPITools/openapi-generator/commit/75c4b8ce27940b7711397337e7493709473d38e8", "message": "Dart - throw when enum not known", "committedDate": "2020-07-21T17:30:00Z", "type": "commit"}, {"oid": "75c4b8ce27940b7711397337e7493709473d38e8", "url": "https://github.com/OpenAPITools/openapi-generator/commit/75c4b8ce27940b7711397337e7493709473d38e8", "message": "Dart - throw when enum not known", "committedDate": "2020-07-21T17:30:00Z", "type": "forcePushed"}, {"oid": "b4a3c9222c0ae06f793a0a8a2cc4d4ae92968896", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b4a3c9222c0ae06f793a0a8a2cc4d4ae92968896", "message": "Merge branch 'master' of github.com:OpenAPITools/openapi-generator into 6727", "committedDate": "2020-07-22T15:17:59Z", "type": "commit"}, {"oid": "e7f3e8e16d099af2c5dba7638150a4cb9bde145f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/e7f3e8e16d099af2c5dba7638150a4cb9bde145f", "message": "Fix generating enum with datatype from list", "committedDate": "2020-07-22T18:29:51Z", "type": "commit"}]}