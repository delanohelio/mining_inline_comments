{"pr_number": 6699, "pr_title": "Make ApiClient in retrofit2 be able to use own OkHttpClient", "pr_createdAt": "2020-06-17T15:05:48Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/6699", "timeline": [{"oid": "c46b027e38016bdbb7011127a61b5a607e2692cd", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c46b027e38016bdbb7011127a61b5a607e2692cd", "message": "Merge pull request #1 from OpenAPITools/master\n\nUpdate my fork", "committedDate": "2020-06-17T13:17:13Z", "type": "commit"}, {"oid": "b4fec1c68b0117be5541160c84815eea7070f312", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b4fec1c68b0117be5541160c84815eea7070f312", "message": "set adapterBuilder.client() only if okBuilder was used in retrofit2", "committedDate": "2020-06-17T14:49:01Z", "type": "commit"}, {"oid": "6f646db7e4e274e99f850cb67656412670380b1d", "url": "https://github.com/OpenAPITools/openapi-generator/commit/6f646db7e4e274e99f850cb67656412670380b1d", "message": "updated the samples", "committedDate": "2020-06-18T10:02:59Z", "type": "commit"}, {"oid": "b0855b3d38d8340a426d0cd6474aa2badbc71be6", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b0855b3d38d8340a426d0cd6474aa2badbc71be6", "message": "added field okHttpClient and updated samples", "committedDate": "2020-06-22T14:15:35Z", "type": "commit"}, {"oid": "26f777ac42bf8d73041fafb71b913a341d8bf7ba", "url": "https://github.com/OpenAPITools/openapi-generator/commit/26f777ac42bf8d73041fafb71b913a341d8bf7ba", "message": "bug fixed, added exception if okBuilder is null", "committedDate": "2020-06-26T09:53:59Z", "type": "commit"}, {"oid": "ef3a88e61184295470d69331c510a1507e8a5c58", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ef3a88e61184295470d69331c510a1507e8a5c58", "message": "added semicolon", "committedDate": "2020-06-26T13:26:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMjM4NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#discussion_r446232385", "bodyText": "space missing", "author": "cbornet", "createdAt": "2020-06-26T14:51:47Z", "path": "samples/client/petstore/java/retrofit2/src/main/java/org/openapitools/client/ApiClient.java", "diffHunk": "@@ -137,7 +137,7 @@ public void createDefaultAdapter() {\n   public <S> S createService(Class<S> serviceClass) {\n     if (okHttpClient != null) {\n         return adapterBuilder.client(okHttpClient).build().create(serviceClass);\n-    else {\n+    }else {", "originalCommit": "26f777ac42bf8d73041fafb71b913a341d8bf7ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMjkxOA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#discussion_r446232918", "bodyText": "Use RuntimeException ? (or even better : create an ApiClientException)", "author": "cbornet", "createdAt": "2020-06-26T14:52:35Z", "path": "samples/client/petstore/java/retrofit2/src/main/java/org/openapitools/client/ApiClient.java", "diffHunk": "@@ -311,9 +311,11 @@ public ApiClient addAuthorization(String authName, Interceptor authorization) {\n       throw new RuntimeException(\"auth name \\\"\" + authName + \"\\\" already in api authorizations\");\n     }\n     apiAuthorizations.put(authName, authorization);\n-    if(okBuilder != null){\n-      okBuilder.addInterceptor(authorization);\n+    if(okBuilder == null){\n+    \tthrow new Exception(\"okBuilder is null\")", "originalCommit": "26f777ac42bf8d73041fafb71b913a341d8bf7ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzNjA4MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#discussion_r446236081", "bodyText": "The message could be more explicit. Something like \"the ApiClient was created with a built okClient so it's not possible to add an authorization interceptor to it\".", "author": "cbornet", "createdAt": "2020-06-26T14:57:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMjkxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjkzOTQ2MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#discussion_r446939460", "bodyText": "What is the advantage of creating an own ApiClientException comparing to the RuntimeException here in this case?", "author": "tgerth", "createdAt": "2020-06-29T12:41:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMjkxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk0Mjg2Ng==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#discussion_r446942866", "bodyText": "See https://rules.sonarsource.com/java/RSPEC-112 . But we already have a bunch of RuntimeException so...", "author": "cbornet", "createdAt": "2020-06-29T12:46:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMjkxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk2NTA0OQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#discussion_r446965049", "bodyText": "Ah ok I see but as you said we already have many RuntimeExceptions so I will use a RuntimeException here if that's ok and then maybe in future you/we can change them to own Exceptions.", "author": "tgerth", "createdAt": "2020-06-29T13:20:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMjkxOA=="}], "type": "inlineReview"}, {"oid": "d7634aea28b5456166441b5fc16398ff1cc26543", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d7634aea28b5456166441b5fc16398ff1cc26543", "message": "added space, changed Exception to RuntimeException and changed its message", "committedDate": "2020-06-29T14:32:53Z", "type": "commit"}, {"oid": "d1de6b8fa206f2f3a702f64e8f2d60c343f5a4d2", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d1de6b8fa206f2f3a702f64e8f2d60c343f5a4d2", "message": "updated the samples", "committedDate": "2020-06-29T14:50:39Z", "type": "commit"}, {"oid": "ccf3c20f00d443d23b5037ed95928a0d35c0e4d6", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ccf3c20f00d443d23b5037ed95928a0d35c0e4d6", "message": "Merge pull request #2 from OpenAPITools/master\n\nUpdate my fork", "committedDate": "2020-06-30T13:19:15Z", "type": "commit"}]}