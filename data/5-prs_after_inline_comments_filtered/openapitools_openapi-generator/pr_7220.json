{"pr_number": 7220, "pr_title": "[codegen][Python] Add model cache to speed up code generation", "pr_createdAt": "2020-08-15T05:11:34Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/7220", "timeline": [{"oid": "b59960e00d30fcedc9f63fd1c2d0e78455beef4f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b59960e00d30fcedc9f63fd1c2d0e78455beef4f", "message": "Merge pull request #24 from OpenAPITools/master\n\nMerge upstream fixes", "committedDate": "2020-08-03T15:04:28Z", "type": "commit"}, {"oid": "df4e5ca9ac443df61d403d8c3761dac9a857b452", "url": "https://github.com/OpenAPITools/openapi-generator/commit/df4e5ca9ac443df61d403d8c3761dac9a857b452", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator", "committedDate": "2020-08-13T19:39:51Z", "type": "commit"}, {"oid": "9a23d90e71a7ebf0b4c4299785320ecd85d3b08e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9a23d90e71a7ebf0b4c4299785320ecd85d3b08e", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator", "committedDate": "2020-08-14T14:18:19Z", "type": "commit"}, {"oid": "0974336610d39bbcb3c6882370d6eb0b9e1d27b7", "url": "https://github.com/OpenAPITools/openapi-generator/commit/0974336610d39bbcb3c6882370d6eb0b9e1d27b7", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator", "committedDate": "2020-08-14T23:34:31Z", "type": "commit"}, {"oid": "db1f359694dcd846f3a638e7f37e7c9c25f64cc0", "url": "https://github.com/OpenAPITools/openapi-generator/commit/db1f359694dcd846f3a638e7f37e7c9c25f64cc0", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator", "committedDate": "2020-08-15T05:07:05Z", "type": "commit"}, {"oid": "4bfd89a8dba12735fabc9cedbb78bb851ce69e98", "url": "https://github.com/OpenAPITools/openapi-generator/commit/4bfd89a8dba12735fabc9cedbb78bb851ce69e98", "message": "Add modelName to schema cache.", "committedDate": "2020-08-15T05:09:03Z", "type": "commit"}, {"oid": "11f52352a25df1d0fc43b316ed74879c1d5b2433", "url": "https://github.com/OpenAPITools/openapi-generator/commit/11f52352a25df1d0fc43b316ed74879c1d5b2433", "message": "Add modelName to schema cache.", "committedDate": "2020-08-15T15:55:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU5NzI3MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7220#discussion_r471597270", "bodyText": "How about using this in DefaultCodegen.java here?", "author": "spacether", "createdAt": "2020-08-17T16:30:03Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "diffHunk": "@@ -449,6 +452,23 @@ private void registerMustacheLambdas() {\n         return objs;\n     }\n \n+    /**\n+     * Return a map from model name to Schema for efficient lookup.\n+     * \n+     * @return map from model name to Schema.\n+     */\n+    protected Map<String, Schema> getModelNameToSchemaCache() {", "originalCommit": "11f52352a25df1d0fc43b316ed74879c1d5b2433", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTcxNzAyMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7220#discussion_r471717021", "bodyText": "Thank you for doing that!", "author": "spacether", "createdAt": "2020-08-17T19:06:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU5NzI3MA=="}], "type": "inlineReview"}, {"oid": "6d8c8041488813a227344f8d3353fb4d9baf2bb5", "url": "https://github.com/OpenAPITools/openapi-generator/commit/6d8c8041488813a227344f8d3353fb4d9baf2bb5", "message": "add cache optimizations", "committedDate": "2020-08-17T18:22:33Z", "type": "commit"}, {"oid": "6a4ec04657aadb45358ed29e24ffb8f5ac7ab9cf", "url": "https://github.com/OpenAPITools/openapi-generator/commit/6a4ec04657aadb45358ed29e24ffb8f5ac7ab9cf", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator", "committedDate": "2020-08-17T18:26:57Z", "type": "commit"}, {"oid": "d66962164d53899892e1fdda79940f4880c193f5", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d66962164d53899892e1fdda79940f4880c193f5", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into add-model-cache", "committedDate": "2020-08-17T18:27:42Z", "type": "commit"}, {"oid": "f5f451e099093ccc8fc032ced430fa9c65c7eb4c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/f5f451e099093ccc8fc032ced430fa9c65c7eb4c", "message": "add cache optimizations", "committedDate": "2020-08-17T20:51:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjMxMDMyMw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7220#discussion_r472310323", "bodyText": "How about deleting firstPattern + secondPattern now that you are no longer using them?", "author": "spacether", "createdAt": "2020-08-18T16:04:59Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/StringUtils.java", "diffHunk": "@@ -57,18 +75,18 @@\n      * @return The underscored version of the word\n      */\n     public static String underscore(final String word) {\n-        return underscoreWords.get(word, wordToUnderscore -> {\n+        return underscoreWordsCache.get(word, wordToUnderscore -> {\n             String result;\n             String firstPattern = \"([A-Z]+)([A-Z][a-z])\";\n             String secondPattern = \"([a-z\\\\d])([A-Z])\";", "originalCommit": "f5f451e099093ccc8fc032ced430fa9c65c7eb4c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjMxNjgxMw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7220#discussion_r472316813", "bodyText": "Thanks for catching this. Done", "author": "sebastien-rosset", "createdAt": "2020-08-18T16:15:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjMxMDMyMw=="}], "type": "inlineReview"}, {"oid": "9da490052a75acabff10f55bca077e9b8c64e1f7", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9da490052a75acabff10f55bca077e9b8c64e1f7", "message": "remove unused variable", "committedDate": "2020-08-18T16:14:23Z", "type": "commit"}, {"oid": "b817a4800ee9b161ffa34f0ee20f9a01c9e5a047", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b817a4800ee9b161ffa34f0ee20f9a01c9e5a047", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator", "committedDate": "2020-08-18T17:35:26Z", "type": "commit"}, {"oid": "66a0aef09e4cc851bdc18f19cd5db2eb75b6d54a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/66a0aef09e4cc851bdc18f19cd5db2eb75b6d54a", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into add-model-cache", "committedDate": "2020-08-18T17:35:57Z", "type": "commit"}]}