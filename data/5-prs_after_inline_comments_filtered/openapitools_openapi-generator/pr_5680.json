{"pr_number": 5680, "pr_title": "[C#] Fixed valuetype parameters and discriminator deserialization", "pr_createdAt": "2020-03-23T19:11:41Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/5680", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY5NDE2MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5680#discussion_r396694161", "bodyText": "Should be noted that this code is just copied from the csharp-netcore generator and works properly there", "author": "gbrown-ce", "createdAt": "2020-03-23T19:13:10Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/CSharpClientCodegen.java", "diffHunk": "@@ -651,13 +651,25 @@ public void postProcessParameter(CodegenParameter parameter) {\n         postProcessPattern(parameter.pattern, parameter.vendorExtensions);\n         postProcessEmitDefaultValue(parameter.vendorExtensions);\n         super.postProcessParameter(parameter);\n+        \n+        if (nullableType.contains(parameter.dataType)) {", "originalCommit": "a98757bcf47f225da3d05731c4dedda6fa143383", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY5NDIxOQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5680#discussion_r396694219", "bodyText": "Should be noted that this code is just copied from the csharp-netcore generator and works properly there", "author": "gbrown-ce", "createdAt": "2020-03-23T19:13:17Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/CSharpClientCodegen.java", "diffHunk": "@@ -651,13 +651,25 @@ public void postProcessParameter(CodegenParameter parameter) {\n         postProcessPattern(parameter.pattern, parameter.vendorExtensions);\n         postProcessEmitDefaultValue(parameter.vendorExtensions);\n         super.postProcessParameter(parameter);\n+        \n+        if (nullableType.contains(parameter.dataType)) {\n+            if (!parameter.required) { //optional\n+                parameter.dataType = parameter.dataType + \"?\";\n+            } else {\n+                parameter.vendorExtensions.put(\"x-csharp-value-type\", true);\n+            }\n+        }\n     }\n \n     @Override\n     public void postProcessModelProperty(CodegenModel model, CodegenProperty property) {\n         postProcessPattern(property.pattern, property.vendorExtensions);\n         postProcessEmitDefaultValue(property.vendorExtensions);\n         super.postProcessModelProperty(model, property);\n+        \n+        if (!property.isContainer && (nullableType.contains(property.dataType) || property.isEnum)) {", "originalCommit": "a98757bcf47f225da3d05731c4dedda6fa143383", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQzMTU2OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5680#discussion_r400431568", "bodyText": "Previously this only flagged things in the allVars array which are not actually references to the objecsts in the readWrite or readOnly arrays, so it was missing out on this decoration", "author": "gbrown-ce", "createdAt": "2020-03-30T19:14:55Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/AbstractCSharpCodegen.java", "diffHunk": "@@ -470,6 +470,32 @@ private void postProcessEnumRefs(final Map<String, Object> models) {\n                         var.isPrimitiveType = true;\n                     }\n                 }\n+                for (CodegenProperty var : model.readWriteVars) {", "originalCommit": "ba0a8b39a89e09eded3448692c657ef7ff71181b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4a2b88801e36c7d14903a3da061e196e13254034", "url": "https://github.com/OpenAPITools/openapi-generator/commit/4a2b88801e36c7d14903a3da061e196e13254034", "message": "Fields that are required should emit default values (otherwise the consuming API might throw a fit", "committedDate": "2020-04-03T15:43:15Z", "type": "forcePushed"}, {"oid": "35e1e992d1836513479d8fdc91b964c84c07bc7e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/35e1e992d1836513479d8fdc91b964c84c07bc7e", "message": "Fixed valuetype parameters and discriminator deserialization\n\n- Made non-required valuetypes nullable, and flagged required valuetypes as \"x-csharp-value-type\"\n- Made sure to camelCase discriminator property names in Subtype converter", "committedDate": "2020-04-24T16:55:04Z", "type": "commit"}, {"oid": "3afe020abb5bbc525b171fa78f50b3b22e3e44bc", "url": "https://github.com/OpenAPITools/openapi-generator/commit/3afe020abb5bbc525b171fa78f50b3b22e3e44bc", "message": "Ran pet store sample script", "committedDate": "2020-04-24T16:55:05Z", "type": "commit"}, {"oid": "c735e51115e3424efd3e7975ef4ff2fee43c8907", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c735e51115e3424efd3e7975ef4ff2fee43c8907", "message": "Ensure that readWriteVars and readOnlyVars are also marked as isEnum and isPrimitiveType where appropriate", "committedDate": "2020-04-24T16:55:05Z", "type": "commit"}, {"oid": "2f614f0d3d3755f2c42016b4230e98a44f4c80a0", "url": "https://github.com/OpenAPITools/openapi-generator/commit/2f614f0d3d3755f2c42016b4230e98a44f4c80a0", "message": "Updated petstore sample with enum fix", "committedDate": "2020-04-24T16:55:05Z", "type": "commit"}, {"oid": "5727fab6a6f6337c5e1ab9bd75ba8d33d906b1d9", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5727fab6a6f6337c5e1ab9bd75ba8d33d906b1d9", "message": "Fields that are required should emit default values (otherwise the consuming API might throw a fit", "committedDate": "2020-04-24T16:55:06Z", "type": "commit"}, {"oid": "ecabacff4829f62308c4b55651fdb6e7ff95879c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ecabacff4829f62308c4b55651fdb6e7ff95879c", "message": "Added missing sample updated", "committedDate": "2020-04-24T16:55:06Z", "type": "commit"}, {"oid": "722342a124bbaf5f19ea50417b3a355f0d084c41", "url": "https://github.com/OpenAPITools/openapi-generator/commit/722342a124bbaf5f19ea50417b3a355f0d084c41", "message": "Re-ran petstore example script to grab all changes", "committedDate": "2020-04-24T16:55:07Z", "type": "commit"}, {"oid": "cda388658845ec2cda6d42b8443f44448149a491", "url": "https://github.com/OpenAPITools/openapi-generator/commit/cda388658845ec2cda6d42b8443f44448149a491", "message": "Rebased and re-ran example update script", "committedDate": "2020-04-24T17:02:07Z", "type": "commit"}, {"oid": "cda388658845ec2cda6d42b8443f44448149a491", "url": "https://github.com/OpenAPITools/openapi-generator/commit/cda388658845ec2cda6d42b8443f44448149a491", "message": "Rebased and re-ran example update script", "committedDate": "2020-04-24T17:02:07Z", "type": "forcePushed"}, {"oid": "635d176810bbf98d26ffd8fbcc72e0dda29505df", "url": "https://github.com/OpenAPITools/openapi-generator/commit/635d176810bbf98d26ffd8fbcc72e0dda29505df", "message": "update csharp samples", "committedDate": "2020-04-27T13:15:38Z", "type": "commit"}]}