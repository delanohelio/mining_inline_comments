{"pr_number": 7364, "pr_title": "Update Vert.x Web template to Vert.x 4", "pr_createdAt": "2020-09-07T10:25:46Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/7364", "timeline": [{"oid": "e39dea0dcc42bb09868be9cda790b9e879fdc2c1", "url": "https://github.com/OpenAPITools/openapi-generator/commit/e39dea0dcc42bb09868be9cda790b9e879fdc2c1", "message": "Update Vert.x Web template to Vert.x 4\n\nSigned-off-by: Francesco Guardiani <francescoguard@gmail.com>", "committedDate": "2020-09-07T10:19:55Z", "type": "commit"}, {"oid": "1d8ac8004c038e15eb9c6cd8f2b3eac49d02d3e7", "url": "https://github.com/OpenAPITools/openapi-generator/commit/1d8ac8004c038e15eb9c6cd8f2b3eac49d02d3e7", "message": "Bad pom\n\nSigned-off-by: Francesco Guardiani <francescoguard@gmail.com>", "committedDate": "2020-09-07T13:09:45Z", "type": "commit"}, {"oid": "0252364d1f20d93d789f5d226de26e4be55ea741", "url": "https://github.com/OpenAPITools/openapi-generator/commit/0252364d1f20d93d789f5d226de26e4be55ea741", "message": "Bad pom 2\n\nSigned-off-by: Francesco Guardiani <francescoguard@gmail.com>", "committedDate": "2020-09-07T14:05:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIzNzAzNA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7364#discussion_r489237034", "bodyText": "@slinkydeveloper what about updating typeMapping instead to map these types (e.g. UUID) with \"String\"?", "author": "wing328", "createdAt": "2020-09-16T07:54:31Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/JavaVertXWebServerCodegen.java", "diffHunk": "@@ -141,11 +135,39 @@ public void postProcessModelProperty(CodegenModel model, CodegenProperty propert\n                 if (operation.returnType == null) {\n                     operation.returnType = \"Void\";\n                 }\n+                if (operation.allParams.stream().anyMatch(p -> p.isFormParam && p.isFile)) {\n+                    // If there is a file upload, exclude other form params since it's not clear how the user should access to these\n+                    operation.allParams = operation\n+                        .allParams\n+                        .stream()\n+                        .filter(p -> !p.isFormParam || p.isFile)\n+                        .collect(Collectors.toList());\n+                } else if (operation.allParams.stream().anyMatch(p -> p.isFormParam)) {\n+                    // In Vert.x 4 Web OpenAPI the forms are handled as single json object\n+                    // We create a dummy param here and remove the other ones\n+                    CodegenParameter dummyParam = new CodegenParameter();\n+                    dummyParam.isFormParam = true;\n+                    dummyParam.isFile = false;\n+                    dummyParam.dataType = \"JsonObject\";\n+                    dummyParam.paramName = \"formBody\";\n+                    operation.allParams = Stream.concat(\n+                        operation.allParams.stream().filter(p -> !p.isFormParam),\n+                        Stream.of(dummyParam)\n+                    ).collect(Collectors.toList());\n+                }\n             }\n         }\n         return newObjs;\n     }\n \n+    @Override\n+    public void postProcessParameter(CodegenParameter parameter) {\n+        super.postProcessParameter(parameter);\n+        if (parameter.isUuid || parameter.isDate || parameter.isDateTime) {\n+            parameter.dataType = \"String\";", "originalCommit": "0252364d1f20d93d789f5d226de26e4be55ea741", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTU3NTUyNA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7364#discussion_r489575524", "bodyText": "WDYM? Vert.x doesn't have any \"strong\" mapping for uuid/date/datetime", "author": "slinkydeveloper", "createdAt": "2020-09-16T16:39:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIzNzAzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTMxNTg1MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7364#discussion_r491315851", "bodyText": "I'll submit a separate PR to show you how I would have done it.", "author": "wing328", "createdAt": "2020-09-19T07:42:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIzNzAzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY2NDQ3MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7364#discussion_r491664471", "bodyText": "I've filed #7457. Please take a look when you've time.", "author": "wing328", "createdAt": "2020-09-20T07:43:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIzNzAzNA=="}], "type": "inlineReview"}, {"oid": "5590e20568acdd49ead0c9c92615d9874b342b1f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5590e20568acdd49ead0c9c92615d9874b342b1f", "message": "Stick to Java 8\n\nSigned-off-by: Francesco Guardiani <francescoguard@gmail.com>", "committedDate": "2020-09-16T16:41:39Z", "type": "commit"}, {"oid": "7f9fd0865663f4bf44d2d413583302c3a11b1a3d", "url": "https://github.com/OpenAPITools/openapi-generator/commit/7f9fd0865663f4bf44d2d413583302c3a11b1a3d", "message": "Latest vert.x 4\n\nSigned-off-by: Francesco Guardiani <francescoguard@gmail.com>", "committedDate": "2020-09-17T17:07:41Z", "type": "commit"}]}