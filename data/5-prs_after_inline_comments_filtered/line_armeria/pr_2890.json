{"pr_number": 2890, "pr_title": "Hide over-exposed public APIs part 2", "pr_createdAt": "2020-07-10T03:15:07Z", "pr_url": "https://github.com/line/armeria/pull/2890", "timeline": [{"oid": "51cfe4a1ea32c2b0c70738072740d4c6e29635f8", "url": "https://github.com/line/armeria/commit/51cfe4a1ea32c2b0c70738072740d4c6e29635f8", "message": "Hide over-exposed public APIs part 2\n- (Breaking)\n  - Move `common.util.NonNullByDefault` to `common.annotation.NonNullByDefault`\n  - Move `common.util.UnstableApi` to `common.annotation.UnstableApi`\n  - `KeyedCircuitBreakerMapping.KeySelector` is now `KeySelector`.\n  - `KeyedCircuitBreakerMapping.KeySelector.HOST` is removed. Use `CircuitBreakerMapping.perHost()`.\n  - `KeyedCircuitBreakerMapping.KeySelector.METHOD` is removed. Use `CircuitBreakerMapping.perMethod()`.\n  - `KeyedCircuitBreakerMapping.KeySelector.HOST_AND_METHOD` is removed.\n     Use `CircuitBreakerMapping.perHostAndMethod()`.\n\n- (Deprecated)\n  - `ClientFactoryOptions.of()` is deprecated. Use `ClientFactoryOptions.emtpy()`.\n  - `MetricCollectingCircuitBreakerListener` is deprecated.\n     Use `CircuitBreakerListener.metricCollection()`.\n  - `RateLimitingThrottlingStrategy` is deprecated. Use `ThrottlingStrategy#rateLimiting()`.\n\n- Miscellenious\n  - Add rnn and final where applicable\n  - Update Javadoc", "committedDate": "2020-07-10T03:13:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQwOTA1OA==", "url": "https://github.com/line/armeria/pull/2890#discussion_r453409058", "bodyText": "Add @Deprecation in class?", "author": "ikhoon", "createdAt": "2020-07-13T02:55:40Z", "path": "core/src/main/java/com/linecorp/armeria/client/circuitbreaker/MetricCollectingCircuitBreakerListener.java", "diffHunk": "@@ -57,22 +57,28 @@\n  */\n public final class MetricCollectingCircuitBreakerListener implements CircuitBreakerListener {", "originalCommit": "51cfe4a1ea32c2b0c70738072740d4c6e29635f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ1NTgzMg==", "url": "https://github.com/line/armeria/pull/2890#discussion_r453455832", "bodyText": "Fixed. Thanks. \ud83d\ude09", "author": "minwoox", "createdAt": "2020-07-13T06:17:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQwOTA1OA=="}], "type": "inlineReview"}, {"oid": "4ccb87f39bbcbc0f476d072feba7956371cc68e7", "url": "https://github.com/line/armeria/commit/4ccb87f39bbcbc0f476d072feba7956371cc68e7", "message": "Revert KeySelector", "committedDate": "2020-07-13T06:16:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ2MDg2Mw==", "url": "https://github.com/line/armeria/pull/2890#discussion_r453460863", "bodyText": "How about making it accept a BiFunction<String, String, CircuitBreaker>?", "author": "trustin", "createdAt": "2020-07-13T06:33:30Z", "path": "core/src/main/java/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerMapping.java", "diffHunk": "@@ -71,7 +61,7 @@ static CircuitBreakerMapping perHost(Function<String, CircuitBreaker> factory) {\n      *                creates a new {@link CircuitBreaker}\n      */\n     static CircuitBreakerMapping perHostAndMethod(Function<String, CircuitBreaker> factory) {\n-        return new KeyedCircuitBreakerMapping<>(KeySelectorUtil.hostAndMethodSelector, factory);\n+        return new KeyedCircuitBreakerMapping<>(KeySelector.HOST_AND_METHOD, factory);\n     }", "originalCommit": "4ccb87f39bbcbc0f476d072feba7956371cc68e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7454537eb8ed70f23167508532621d614882ef72", "url": "https://github.com/line/armeria/commit/7454537eb8ed70f23167508532621d614882ef72", "message": "Add BiFunctions", "committedDate": "2020-07-13T10:24:07Z", "type": "commit"}, {"oid": "84a0aec16a51e8a448e386939b7750051ad5f49c", "url": "https://github.com/line/armeria/commit/84a0aec16a51e8a448e386939b7750051ad5f49c", "message": "Revert \"Add BiFunctions\"\n\nThis reverts commit 7454537eb8ed70f23167508532621d614882ef72.", "committedDate": "2020-07-13T10:44:29Z", "type": "commit"}, {"oid": "3eaaf7e133f659969112f9951f23f2d0f591864d", "url": "https://github.com/line/armeria/commit/3eaaf7e133f659969112f9951f23f2d0f591864d", "message": "Remove KeySelector", "committedDate": "2020-07-14T01:44:41Z", "type": "commit"}, {"oid": "094f3b0540157638484c638d415d67cf6d91d456", "url": "https://github.com/line/armeria/commit/094f3b0540157638484c638d415d67cf6d91d456", "message": "Merge branch 'master' into over_exposed_api", "committedDate": "2020-07-14T03:22:15Z", "type": "commit"}]}