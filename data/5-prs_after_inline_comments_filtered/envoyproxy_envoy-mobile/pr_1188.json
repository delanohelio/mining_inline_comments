{"pr_number": 1188, "pr_title": "bridge: add register string accessor functionality plus expose on Android", "pr_createdAt": "2020-11-21T00:25:35Z", "pr_url": "https://github.com/envoyproxy/envoy-mobile/pull/1188", "timeline": [{"oid": "fbb1690b8226388aa875b49c2d1ce116f9ccd505", "url": "https://github.com/envoyproxy/envoy-mobile/commit/fbb1690b8226388aa875b49c2d1ce116f9ccd505", "message": "bridge: add register string accessor functionality plus expose on Android\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-11-21T00:25:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzNzc4NQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1188#discussion_r528037785", "bodyText": "Given that this accessor runs on the threading context that calls it I am not sure if we need it versus just passing the EnvoyStringAccessor to the jni and retaining that.", "author": "junr03", "createdAt": "2020-11-21T00:29:54Z", "path": "library/java/src/io/envoyproxy/envoymobile/engine/JvmStringAccessorContext.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package io.envoyproxy.envoymobile.engine;\n+\n+import java.nio.ByteBuffer;\n+\n+import io.envoyproxy.envoymobile.engine.types.EnvoyStringAccessor;\n+\n+class JvmStringAccessorContext {", "originalCommit": "fbb1690b8226388aa875b49c2d1ce116f9ccd505", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ4OTgzNw==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1188#discussion_r529489837", "bodyText": "The concrete class allows methods to be cached.", "author": "goaway", "createdAt": "2020-11-24T11:55:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzNzc4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzODI2OQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1188#discussion_r528038269", "bodyText": "decided to return a ByteBuffer here rather than a String to take advantage of the utilities we already have that bridge it into an envoy_data.\nAlthough it wouldn't be too complicated to create a bridging utility from String to envoy_data if we'd rather use that type.", "author": "junr03", "createdAt": "2020-11-21T00:32:18Z", "path": "library/java/src/io/envoyproxy/envoymobile/engine/types/EnvoyStringAccessor.java", "diffHunk": "@@ -0,0 +1,11 @@\n+package io.envoyproxy.envoymobile.engine.types;\n+\n+import java.nio.ByteBuffer;\n+\n+public interface EnvoyStringAccessor {\n+\n+  /**\n+   * Called to retrieve a string from the Application\n+   */\n+  ByteBuffer getString();", "originalCommit": "fbb1690b8226388aa875b49c2d1ce116f9ccd505", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ5MDE3NQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1188#discussion_r529490175", "bodyText": "Seems fine. Don't we already have a utility for String though?", "author": "goaway", "createdAt": "2020-11-24T11:56:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzODI2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkxOTY2OA==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1188#discussion_r529919668", "bodyText": "Not afaict? We have a byte buffer and a byte array utility. I guess the byte array one can be used with a jstring? But you have to copy.", "author": "junr03", "createdAt": "2020-11-24T22:07:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzODI2OQ=="}], "type": "inlineReview"}, {"oid": "fe74a2a4c24a24660c358a8906c9a11f68f5a3ee", "url": "https://github.com/envoyproxy/envoy-mobile/commit/fe74a2a4c24a24660c358a8906c9a11f68f5a3ee", "message": "comments\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-11-24T22:05:41Z", "type": "commit"}, {"oid": "a6f16b1c7053e60bf56a439cd58f972c5adf1f69", "url": "https://github.com/envoyproxy/envoy-mobile/commit/a6f16b1c7053e60bf56a439cd58f972c5adf1f69", "message": "add accessor all the way\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-12-01T17:52:21Z", "type": "commit"}, {"oid": "be82552d1711b1100724da34c0e6eaa5f89cfd5c", "url": "https://github.com/envoyproxy/envoy-mobile/commit/be82552d1711b1100724da34c0e6eaa5f89cfd5c", "message": "fmt\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-12-01T18:12:23Z", "type": "commit"}, {"oid": "5659a0199d0103a81cf68e1eac62187c00ed1961", "url": "https://github.com/envoyproxy/envoy-mobile/commit/5659a0199d0103a81cf68e1eac62187c00ed1961", "message": "Merge branch 'main' into register-api\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-12-01T18:12:49Z", "type": "commit"}, {"oid": "4a694d726dc06fa7f8e898e4761ab8c88d3ad57f", "url": "https://github.com/envoyproxy/envoy-mobile/commit/4a694d726dc06fa7f8e898e4761ab8c88d3ad57f", "message": "comments\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-12-02T00:20:41Z", "type": "commit"}, {"oid": "84877a26491b19d00ee7fda7a9a0751207440553", "url": "https://github.com/envoyproxy/envoy-mobile/commit/84877a26491b19d00ee7fda7a9a0751207440553", "message": "fix test\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-12-03T00:58:36Z", "type": "commit"}]}