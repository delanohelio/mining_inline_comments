{"pr_number": 2352, "pr_title": "Messaging health check", "pr_createdAt": "2020-09-11T15:18:37Z", "pr_url": "https://github.com/oracle/helidon/pull/2352", "timeline": [{"oid": "6828d75aa509ed571f493171c73cfc4699ff97f2", "url": "https://github.com/oracle/helidon/commit/6828d75aa509ed571f493171c73cfc4699ff97f2", "message": "Messaging health check\n\nSigned-off-by: Daniel Kec <daniel.kec@oracle.com>", "committedDate": "2020-09-17T12:18:00Z", "type": "commit"}, {"oid": "838a62fdf03c6605f3af0f740af0c95a0b2fb13e", "url": "https://github.com/oracle/helidon/commit/838a62fdf03c6605f3af0f740af0c95a0b2fb13e", "message": "Aliveness check tests\n\nSigned-off-by: Daniel Kec <daniel.kec@oracle.com>", "committedDate": "2020-09-17T12:18:00Z", "type": "commit"}, {"oid": "d5154d51147fa4d5c39ed286710bdd0e80c059a5", "url": "https://github.com/oracle/helidon/commit/d5154d51147fa4d5c39ed286710bdd0e80c059a5", "message": "Module info fix\n\nSigned-off-by: Daniel Kec <daniel.kec@oracle.com>", "committedDate": "2020-09-17T12:18:00Z", "type": "commit"}, {"oid": "db53ff622a003ea22c773b7d7fa022e67ac73807", "url": "https://github.com/oracle/helidon/commit/db53ff622a003ea22c773b7d7fa022e67ac73807", "message": "Cleanup\n\nSigned-off-by: Daniel Kec <daniel.kec@oracle.com>", "committedDate": "2020-09-17T12:18:00Z", "type": "commit"}, {"oid": "a1a921579604dee3a3dd302c7bbe5f69feb51e0d", "url": "https://github.com/oracle/helidon/commit/a1a921579604dee3a3dd302c7bbe5f69feb51e0d", "message": "Use @HelidonTest\n\nSigned-off-by: Daniel Kec <daniel.kec@oracle.com>", "committedDate": "2020-09-17T13:14:01Z", "type": "forcePushed"}, {"oid": "a1a921579604dee3a3dd302c7bbe5f69feb51e0d", "url": "https://github.com/oracle/helidon/commit/a1a921579604dee3a3dd302c7bbe5f69feb51e0d", "message": "Use @HelidonTest\n\nSigned-off-by: Daniel Kec <daniel.kec@oracle.com>", "committedDate": "2020-09-17T13:14:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzc3NzY5Mg==", "url": "https://github.com/oracle/helidon/pull/2352#discussion_r493777692", "bodyText": "Is there a possibility isUp is called before connect? If so, this would return null and most likely cause a NPE", "author": "tomas-langer", "createdAt": "2020-09-23T17:48:28Z", "path": "microprofile/messaging/core/src/main/java/io/helidon/microprofile/messaging/UniversalChannel.java", "diffHunk": "@@ -67,6 +69,10 @@ void setOutgoing(OutgoingMethod outgoingMethod) {\n         this.outgoingMethod = outgoingMethod;\n     }\n \n+    AtomicBoolean isUp() {\n+        return up;", "originalCommit": "a1a921579604dee3a3dd302c7bbe5f69feb51e0d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzc3ODQ5Ng==", "url": "https://github.com/oracle/helidon/pull/2352#discussion_r493778496", "bodyText": "Also up is not volatile. Even if the field is AtomicBoolean, access to it must be correctly synchronized if the field may be created in a different thread.\nMaybe the AtomicBoolean should be final and true and sent to Probe.connect as a parameter", "author": "tomas-langer", "createdAt": "2020-09-23T17:49:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzc3NzY5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE4MDE4Mw==", "url": "https://github.com/oracle/helidon/pull/2352#discussion_r496180183", "bodyText": "oj, thx!", "author": "danielkec", "createdAt": "2020-09-28T19:24:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzc3NzY5Mg=="}], "type": "inlineReview"}, {"oid": "0ffe728ab5e48454e6aa7b015cfdf724dee337cf", "url": "https://github.com/oracle/helidon/commit/0ffe728ab5e48454e6aa7b015cfdf724dee337cf", "message": "Review issues, add readiness check\n\nSigned-off-by: Daniel Kec <daniel.kec@oracle.com>", "committedDate": "2020-09-28T19:26:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYzODgwMw==", "url": "https://github.com/oracle/helidon/pull/2352#discussion_r497638803", "bodyText": "This is leaking internal state - this method may just return a boolean", "author": "tomas-langer", "createdAt": "2020-09-30T16:20:23Z", "path": "microprofile/messaging/core/src/main/java/io/helidon/microprofile/messaging/UniversalChannel.java", "diffHunk": "@@ -69,8 +70,12 @@ void setOutgoing(OutgoingMethod outgoingMethod) {\n         this.outgoingMethod = outgoingMethod;\n     }\n \n-    AtomicBoolean isUp() {\n-        return up;\n+    AtomicBoolean isLive() {", "originalCommit": "0ffe728ab5e48454e6aa7b015cfdf724dee337cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY1NDg0NQ==", "url": "https://github.com/oracle/helidon/pull/2352#discussion_r497654845", "bodyText": "package private, but true, I've got changes in here from another PR, will fix it there", "author": "danielkec", "createdAt": "2020-09-30T16:45:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYzODgwMw=="}], "type": "inlineReview"}]}