{"pr_number": 2495, "pr_title": "Request scope propagation for non-async calls in FT", "pr_createdAt": "2020-11-03T15:43:31Z", "pr_url": "https://github.com/oracle/helidon/pull/2495", "timeline": [{"oid": "714c17c1194c1650d11551765fcbb569414350c4", "url": "https://github.com/oracle/helidon/commit/714c17c1194c1650d11551765fcbb569414350c4", "message": "New test for issue 2480.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>", "committedDate": "2020-10-26T17:29:01Z", "type": "commit"}, {"oid": "a2a53567f9c9d156726a4bcebd5ef57e78ed63e2", "url": "https://github.com/oracle/helidon/commit/a2a53567f9c9d156726a4bcebd5ef57e78ed63e2", "message": "Swithed to new test framework for MP.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>", "committedDate": "2020-10-26T17:36:00Z", "type": "commit"}, {"oid": "1f1c85e5234d6e9c0d9212793144208f20326edd", "url": "https://github.com/oracle/helidon/commit/1f1c85e5234d6e9c0d9212793144208f20326edd", "message": "Use a wrapped supplier to propagate request scope even for synchronous calls as some FT primitives (like Retry) use executors and may run code in a different thread. Updated new test that fails without this change and passes with it.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>", "committedDate": "2020-11-03T15:40:20Z", "type": "commit"}, {"oid": "8fa3b61ad030b5f20a858a2ea8cd6b8a90c3ad77", "url": "https://github.com/oracle/helidon/commit/8fa3b61ad030b5f20a858a2ea8cd6b8a90c3ad77", "message": "Renamed variable.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>", "committedDate": "2020-11-03T15:45:12Z", "type": "commit"}, {"oid": "9b366c26d94ddb31da8525281d577b189e4882f0", "url": "https://github.com/oracle/helidon/commit/9b366c26d94ddb31da8525281d577b189e4882f0", "message": "Fixed copyright problems.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>", "committedDate": "2020-11-03T18:47:45Z", "type": "commit"}, {"oid": "b023804ff0b4ef2293eddab472cb15987f951906", "url": "https://github.com/oracle/helidon/commit/b023804ff0b4ef2293eddab472cb15987f951906", "message": "Dropped fixed port in config.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>", "committedDate": "2020-11-03T19:17:33Z", "type": "commit"}, {"oid": "2484a57c54e9fe50d31e7623bacab89fcac9ef69", "url": "https://github.com/oracle/helidon/commit/2484a57c54e9fe50d31e7623bacab89fcac9ef69", "message": "Remove redundant main class.\n\nSigned-off-by: Santiago Pericasgeertsen <santiago.pericasgeertsen@oracle.com>", "committedDate": "2020-11-03T20:40:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzAwMzkxMw==", "url": "https://github.com/oracle/helidon/pull/2495#discussion_r517003913", "bodyText": "Intentional?", "author": "ljnelson", "createdAt": "2020-11-03T22:56:25Z", "path": "tests/functional/request-scope/src/main/java/io/helidon/tests/functional/requestscope/RequestTestQualifier.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright (c) 2020 Oracle and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.helidon.tests.functional.requestscope;\n+\n+import javax.enterprise.context.RequestScoped;\n+import javax.inject.Inject;\n+\n+@RequestScoped\n+@TestQualifier\n+public class RequestTestQualifier {\n+\n+    @Inject\n+    TenantContext tenantContext;\n+\n+    public String test() throws Exception {\n+        String tenantId = tenantContext.getTenantId();\n+        System.out.println(\"Tenant Context: \" + tenantId);", "originalCommit": "2484a57c54e9fe50d31e7623bacab89fcac9ef69", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}