{"pr_number": 1038, "pr_title": "Add Adform video bid response support", "pr_createdAt": "2020-11-30T01:42:44Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/1038", "timeline": [{"oid": "f99e0d79acb77d7302db1b57da2d6bfe70b32099", "url": "https://github.com/prebid/prebid-server-java/commit/f99e0d79acb77d7302db1b57da2d6bfe70b32099", "message": "Add Adform video bid response support", "committedDate": "2020-11-30T01:42:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYzNjIwNw==", "url": "https://github.com/prebid/prebid-server-java/pull/1038#discussion_r532636207", "bodyText": "Seems we don't need else here. Just if on new line.", "author": "rpanchyk", "createdAt": "2020-11-30T14:28:04Z", "path": "src/main/java/org/prebid/server/bidder/adform/AdformBidder.java", "diffHunk": "@@ -291,24 +291,43 @@ private String getUrl(List<ExtImpAdform> extImpAdforms) {\n \n         for (int i = 0; i < adformBids.size(); i++) {\n             final AdformBid adformBid = adformBids.get(i);\n-            if (StringUtils.isEmpty(adformBid.getBanner()) || !Objects.equals(adformBid.getResponse(), BANNER)) {\n+            final String adm = resolveAdm(adformBid);\n+            if (StringUtils.isBlank(adm)) {\n                 continue;\n             }\n+            final BidType bidType = resolveBidType(adformBid.getResponse());\n             final Imp imp = imps.get(i);\n             bidderBids.add(BidderBid.of(Bid.builder()\n                             .id(imp.getId())\n                             .impid(imp.getId())\n                             .price(adformBid.getWinBid())\n-                            .adm(adformBid.getBanner())\n+                            .adm(adm)\n                             .w(adformBid.getWidth())\n                             .h(adformBid.getHeight())\n                             .dealid(adformBid.getDealId())\n                             .crid(adformBid.getWinCrid())\n                             .build(),\n-                    BidType.banner,\n+                    bidType,\n                     currency));\n         }\n \n         return bidderBids;\n     }\n+\n+    private String resolveAdm(AdformBid adformBid) {\n+        if (Objects.equals(adformBid.getResponse(), \"banner\")) {\n+            return adformBid.getBanner();\n+        } else if (Objects.equals(adformBid.getResponse(), \"vast_content\")) {", "originalCommit": "f99e0d79acb77d7302db1b57da2d6bfe70b32099", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYzNjU3OA==", "url": "https://github.com/prebid/prebid-server-java/pull/1038#discussion_r532636578", "bodyText": "Can be transformed to ternary checking.", "author": "rpanchyk", "createdAt": "2020-11-30T14:28:39Z", "path": "src/main/java/org/prebid/server/bidder/adform/AdformBidder.java", "diffHunk": "@@ -291,24 +291,43 @@ private String getUrl(List<ExtImpAdform> extImpAdforms) {\n \n         for (int i = 0; i < adformBids.size(); i++) {\n             final AdformBid adformBid = adformBids.get(i);\n-            if (StringUtils.isEmpty(adformBid.getBanner()) || !Objects.equals(adformBid.getResponse(), BANNER)) {\n+            final String adm = resolveAdm(adformBid);\n+            if (StringUtils.isBlank(adm)) {\n                 continue;\n             }\n+            final BidType bidType = resolveBidType(adformBid.getResponse());\n             final Imp imp = imps.get(i);\n             bidderBids.add(BidderBid.of(Bid.builder()\n                             .id(imp.getId())\n                             .impid(imp.getId())\n                             .price(adformBid.getWinBid())\n-                            .adm(adformBid.getBanner())\n+                            .adm(adm)\n                             .w(adformBid.getWidth())\n                             .h(adformBid.getHeight())\n                             .dealid(adformBid.getDealId())\n                             .crid(adformBid.getWinCrid())\n                             .build(),\n-                    BidType.banner,\n+                    bidType,\n                     currency));\n         }\n \n         return bidderBids;\n     }\n+\n+    private String resolveAdm(AdformBid adformBid) {\n+        if (Objects.equals(adformBid.getResponse(), \"banner\")) {\n+            return adformBid.getBanner();\n+        } else if (Objects.equals(adformBid.getResponse(), \"vast_content\")) {\n+            return adformBid.getVastContent();\n+        }\n+\n+        return \"\";\n+    }\n+\n+    private BidType resolveBidType(String response) {\n+        if (Objects.equals(response, BANNER)) {", "originalCommit": "f99e0d79acb77d7302db1b57da2d6bfe70b32099", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "35c8f7b3c5bb5c15c430c7279252b503903a015e", "url": "https://github.com/prebid/prebid-server-java/commit/35c8f7b3c5bb5c15c430c7279252b503903a015e", "message": "Fixes after review", "committedDate": "2020-11-30T14:36:38Z", "type": "commit"}, {"oid": "a156ff16058caae2f9748c4dda0c6e93411f7f29", "url": "https://github.com/prebid/prebid-server-java/commit/a156ff16058caae2f9748c4dda0c6e93411f7f29", "message": "Merge branch 'master' into adform/video/support", "committedDate": "2020-12-02T14:27:26Z", "type": "commit"}]}