{"pr_number": 1020, "pr_title": "Use POST, preserve original user agent and user ip in the headers", "pr_createdAt": "2020-11-18T14:37:42Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/1020", "timeline": [{"oid": "9498e0c82b639daf61d5289586d1dfbcfa5dd8f9", "url": "https://github.com/prebid/prebid-server-java/commit/9498e0c82b639daf61d5289586d1dfbcfa5dd8f9", "message": "Use POST, preserve original user agent and user ip in the headers", "committedDate": "2020-11-18T14:33:43Z", "type": "commit"}, {"oid": "bd5dbd16a96de975f8fe3901bdf529fc4250d1cf", "url": "https://github.com/prebid/prebid-server-java/commit/bd5dbd16a96de975f8fe3901bdf529fc4250d1cf", "message": "Change test to stub for post", "committedDate": "2020-11-18T14:52:40Z", "type": "commit"}, {"oid": "cbe2bcd1084848f43588d7a9b95cb504a5fd6289", "url": "https://github.com/prebid/prebid-server-java/commit/cbe2bcd1084848f43588d7a9b95cb504a5fd6289", "message": "cleanup", "committedDate": "2020-11-18T14:57:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg4MTcwNA==", "url": "https://github.com/prebid/prebid-server-java/pull/1020#discussion_r526881704", "bodyText": "Pls return headers instead.", "author": "rpanchyk", "createdAt": "2020-11-19T13:30:25Z", "path": "src/main/java/org/prebid/server/bidder/adhese/AdheseBidder.java", "diffHunk": "@@ -83,13 +85,22 @@ public AdheseBidder(String endpointUrl, JacksonMapper mapper) {\n \n         return Result.of(Collections.singletonList(\n                 HttpRequest.<Void>builder()\n-                        .method(HttpMethod.GET)\n+                        .method(HttpMethod.POST)\n                         .uri(uri)\n-                        .headers(HttpUtil.headers())\n+                        .headers(replaceHeaders(request.getDevice()))\n                         .build()),\n                 Collections.emptyList());\n     }\n \n+    private MultiMap replaceHeaders(Device device) {\n+        MultiMap headers = HttpUtil.headers();\n+        if (device != null) {\n+            HttpUtil.addHeaderIfValueIsNotEmpty(headers, HttpUtil.USER_AGENT_HEADER, device.getUa());\n+            HttpUtil.addHeaderIfValueIsNotEmpty(headers, HttpHeaders.createOptimized(\"X-Real-IP\"), device.getIp());\n+        }\n+        return HttpUtil.headers();", "originalCommit": "cbe2bcd1084848f43588d7a9b95cb504a5fd6289", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "25bca3d07eae068cfb4638d89bd9f01d5a3d95f4", "url": "https://github.com/prebid/prebid-server-java/commit/25bca3d07eae068cfb4638d89bd9f01d5a3d95f4", "message": "actually return modified headers", "committedDate": "2020-11-19T14:44:06Z", "type": "commit"}]}