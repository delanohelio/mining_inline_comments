{"pr_number": 849, "pr_title": "Support pubmatic video duration and primary category", "pr_createdAt": "2020-08-07T14:33:02Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/849", "timeline": [{"oid": "e2efb5add30a5f0540b30d1ab590c5c6fb32052d", "url": "https://github.com/prebid/prebid-server-java/commit/e2efb5add30a5f0540b30d1ab590c5c6fb32052d", "message": "Support pubmatic video duration and primary category", "committedDate": "2020-08-07T14:24:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4NjIxMQ==", "url": "https://github.com/prebid/prebid-server-java/pull/849#discussion_r480086211", "bodyText": "remove /n pls", "author": "DGarbar", "createdAt": "2020-08-31T12:08:10Z", "path": "src/main/java/org/prebid/server/auction/BidResponseCreator.java", "diffHunk": "@@ -719,16 +725,30 @@ private Bid toBid(BidderBid bidderBid, String bidder, ExtRequestTargeting target\n         final Events events = eventsEnabled && eventsAllowedByRequest\n                 ? eventsService.createEvent(eventBidId, bidder, account.getId(), auctionTimestamp)\n                 : null;\n-\n-        final ExtBidPrebid prebidExt = ExtBidPrebid.of(\n-                generatedBidId, bidType, targetingKeywords, cache, storedVideo, events, null);\n+        final ExtBidPrebid prebidExt = ExtBidPrebid\n+                .builder()", "originalCommit": "e2efb5add30a5f0540b30d1ab590c5c6fb32052d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4NzIyMw==", "url": "https://github.com/prebid/prebid-server-java/pull/849#discussion_r480087223", "bodyText": "Lets extract this method to be more consistent. (We extracted all methods above and use variables to build)", "author": "DGarbar", "createdAt": "2020-08-31T12:10:17Z", "path": "src/main/java/org/prebid/server/auction/BidResponseCreator.java", "diffHunk": "@@ -719,16 +725,30 @@ private Bid toBid(BidderBid bidderBid, String bidder, ExtRequestTargeting target\n         final Events events = eventsEnabled && eventsAllowedByRequest\n                 ? eventsService.createEvent(eventBidId, bidder, account.getId(), auctionTimestamp)\n                 : null;\n-\n-        final ExtBidPrebid prebidExt = ExtBidPrebid.of(\n-                generatedBidId, bidType, targetingKeywords, cache, storedVideo, events, null);\n+        final ExtBidPrebid prebidExt = ExtBidPrebid\n+                .builder()\n+                .bidid(generatedBidId)\n+                .type(bidType)\n+                .targeting(targetingKeywords)\n+                .cache(cache)\n+                .storedRequestAttributes(storedVideo)\n+                .events(events)\n+                .video(getExtBidPrebidVideo(bid.getExt()))", "originalCommit": "e2efb5add30a5f0540b30d1ab590c5c6fb32052d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDExODY5Mg==", "url": "https://github.com/prebid/prebid-server-java/pull/849#discussion_r480118692", "bodyText": "Lets move this method to the end of the file, to match method workflow order", "author": "DGarbar", "createdAt": "2020-08-31T13:10:01Z", "path": "src/main/java/org/prebid/server/auction/BidResponseCreator.java", "diffHunk": "@@ -719,16 +725,30 @@ private Bid toBid(BidderBid bidderBid, String bidder, ExtRequestTargeting target\n         final Events events = eventsEnabled && eventsAllowedByRequest\n                 ? eventsService.createEvent(eventBidId, bidder, account.getId(), auctionTimestamp)\n                 : null;\n-\n-        final ExtBidPrebid prebidExt = ExtBidPrebid.of(\n-                generatedBidId, bidType, targetingKeywords, cache, storedVideo, events, null);\n+        final ExtBidPrebid prebidExt = ExtBidPrebid\n+                .builder()\n+                .bidid(generatedBidId)\n+                .type(bidType)\n+                .targeting(targetingKeywords)\n+                .cache(cache)\n+                .storedRequestAttributes(storedVideo)\n+                .events(events)\n+                .video(getExtBidPrebidVideo(bid.getExt()))\n+                .build();\n \n         final ExtPrebid<ExtBidPrebid, ObjectNode> bidExt = ExtPrebid.of(prebidExt, bid.getExt());\n         bid.setExt(mapper.mapper().valueToTree(bidExt));\n \n         return bid;\n     }\n \n+    private ExtBidPrebidVideo getExtBidPrebidVideo(ObjectNode bidExt) {", "originalCommit": "e2efb5add30a5f0540b30d1ab590c5c6fb32052d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0cea738cd1c7750d7d66ea873dfe05d82e453d52", "url": "https://github.com/prebid/prebid-server-java/commit/0cea738cd1c7750d7d66ea873dfe05d82e453d52", "message": "Merge branch 'master' into support-pubmatic-duration-and-category", "committedDate": "2020-09-07T12:21:36Z", "type": "commit"}, {"oid": "c8ab3cd8fabcca2631ad3cff6b062a5a538101d9", "url": "https://github.com/prebid/prebid-server-java/commit/c8ab3cd8fabcca2631ad3cff6b062a5a538101d9", "message": "Minor refactoring according to review comments", "committedDate": "2020-09-07T12:28:55Z", "type": "commit"}, {"oid": "34ce744c03a1ddc81e866c7be91ab30fb92bfa84", "url": "https://github.com/prebid/prebid-server-java/commit/34ce744c03a1ddc81e866c7be91ab30fb92bfa84", "message": "Merge branch 'master' into support-pubmatic-duration-and-category\n\n# Conflicts:\n#\tsrc/main/java/org/prebid/server/auction/BidResponseCreator.java\n#\tsrc/test/java/org/prebid/server/auction/BidResponseCreatorTest.java", "committedDate": "2020-09-18T08:29:08Z", "type": "commit"}]}