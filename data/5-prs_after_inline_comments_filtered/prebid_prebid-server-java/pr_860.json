{"pr_number": 860, "pr_title": "Make version endpoint unprotected and add pbs version to the response", "pr_createdAt": "2020-08-13T08:48:38Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/860", "timeline": [{"oid": "96a97a80179daad194c56d93540aceaf4c0d6f64", "url": "https://github.com/prebid/prebid-server-java/commit/96a97a80179daad194c56d93540aceaf4c0d6f64", "message": "Make version endpoint unprotected and add pbs version to the response", "committedDate": "2020-08-13T08:47:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg0MDYxNQ==", "url": "https://github.com/prebid/prebid-server-java/pull/860#discussion_r469840615", "bodyText": "i'd like to log at ERROR level here.", "author": "rpanchyk", "createdAt": "2020-08-13T10:02:33Z", "path": "src/main/java/org/prebid/server/handler/VersionHandler.java", "diffHunk": "@@ -37,17 +37,19 @@ public static VersionHandler create(String revisionFilePath, JacksonMapper mappe\n             revision = mapper.mapper().readValue(ResourceUtil.readFromClasspath(revisionFilePath), Revision.class);\n         } catch (IllegalArgumentException | IOException e) {\n             logger.warn(\"Was not able to read revision file {0}. Reason: {1}\", revisionFilePath, e.getMessage());", "originalCommit": "96a97a80179daad194c56d93540aceaf4c0d6f64", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg0MTE4NA==", "url": "https://github.com/prebid/prebid-server-java/pull/860#discussion_r469841184", "bodyText": "Can we compose full version info in create() method, bc no reason to recreate the same state?", "author": "rpanchyk", "createdAt": "2020-08-13T10:03:35Z", "path": "src/main/java/org/prebid/server/handler/VersionHandler.java", "diffHunk": "@@ -37,17 +37,19 @@ public static VersionHandler create(String revisionFilePath, JacksonMapper mappe\n             revision = mapper.mapper().readValue(ResourceUtil.readFromClasspath(revisionFilePath), Revision.class);\n         } catch (IllegalArgumentException | IOException e) {\n             logger.warn(\"Was not able to read revision file {0}. Reason: {1}\", revisionFilePath, e.getMessage());\n-            revision = Revision.of(DEFAULT_REVISION_VALUE);\n+            revision = Revision.of(NOT_SET, NOT_SET);\n         }\n-        return new VersionHandler(revision.commitHash == null ? Revision.of(DEFAULT_REVISION_VALUE) : revision, mapper);\n+        return new VersionHandler(revision, mapper);\n     }\n \n     /**\n      * Responds with commit revision.\n      */\n     @Override\n     public void handle(RoutingContext context) {\n-        final RevisionResponse revisionResponse = RevisionResponse.of(revision.commitHash);\n+        final RevisionResponse revisionResponse = RevisionResponse.of(", "originalCommit": "96a97a80179daad194c56d93540aceaf4c0d6f64", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8ebd5c300269963504419f7665d80e3924e83224", "url": "https://github.com/prebid/prebid-server-java/commit/8ebd5c300269963504419f7665d80e3924e83224", "message": "Pull request comments resolved", "committedDate": "2020-08-13T10:43:17Z", "type": "commit"}, {"oid": "8bd01bcf317c05a60d85f19c54eff6b8dc2262a1", "url": "https://github.com/prebid/prebid-server-java/commit/8bd01bcf317c05a60d85f19c54eff6b8dc2262a1", "message": "Add missing code", "committedDate": "2020-08-13T10:53:42Z", "type": "commit"}]}