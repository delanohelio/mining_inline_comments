{"pr_number": 1063, "pr_title": "Yeahmobi bidder review", "pr_createdAt": "2020-12-09T07:22:43Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/1063", "timeline": [{"oid": "d73f40edda0a5299a2d7442ddd2f326ccc8bacfc", "url": "https://github.com/prebid/prebid-server-java/commit/d73f40edda0a5299a2d7442ddd2f326ccc8bacfc", "message": "Yeahmobi bidder review", "committedDate": "2020-12-09T07:22:03Z", "type": "commit"}, {"oid": "7e3f2fbf9059c097525b99e31062858876622371", "url": "https://github.com/prebid/prebid-server-java/commit/7e3f2fbf9059c097525b99e31062858876622371", "message": "Merge branch 'master' into yeahmobi/review", "committedDate": "2021-02-11T09:22:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDM1OTc3Nw==", "url": "https://github.com/prebid/prebid-server-java/pull/1063#discussion_r574359777", "bodyText": "Pls specify exception explicitly @SneakyThrows(JsonProcessingException.class) for more control, but personally i'd use just regular try-catch instead. Up to you.", "author": "rpanchyk", "createdAt": "2021-02-11T09:38:58Z", "path": "src/main/java/org/prebid/server/bidder/yeahmobi/YeahmobiBidder.java", "diffHunk": "@@ -90,32 +90,35 @@ private ExtImpYeahmobi parseImpExt(Imp imp) {\n         try {\n             return mapper.mapper().convertValue(imp.getExt(), YEAHMOBI_EXT_TYPE_REFERENCE).getBidder();\n         } catch (IllegalArgumentException e) {\n-            throw new PreBidException(e.getMessage(), e);\n+            throw new PreBidException(String.format(\"Impression id=%s, has invalid Ext\", imp.getId()));\n         }\n     }\n \n-    @SneakyThrows\n     private Imp processImp(Imp imp) {\n         final Native xNative = imp.getXNative();\n \n         if (xNative != null) {\n-            final JsonNode nativeRequest = xNative.getRequest() != null\n-                    ? mapper.mapper().readValue(xNative.getRequest(), JsonNode.class)\n-                    : null;\n-\n-            final String newNativeRequest;\n-            final ObjectNode objectNode = mapper.mapper().createObjectNode().set(\"native\", nativeRequest);\n-            newNativeRequest = nativeRequest == null || nativeRequest.get(\"native\") == null\n-                    ? mapper.mapper().writeValueAsString(objectNode)\n-                    : null;\n-\n-            return newNativeRequest != null\n-                    ? imp.toBuilder().xNative(Native.builder().request(newNativeRequest).build()).build()\n+            final String resolvedNativeRequest = resolveNativeRequest(xNative.getRequest());\n+            return resolvedNativeRequest != null\n+                    ? imp.toBuilder().xNative(Native.builder().request(resolvedNativeRequest).build()).build()\n                     : imp;\n         }\n         return imp;\n     }\n \n+    @SneakyThrows", "originalCommit": "d73f40edda0a5299a2d7442ddd2f326ccc8bacfc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDM3OTA4MQ==", "url": "https://github.com/prebid/prebid-server-java/pull/1063#discussion_r574379081", "bodyText": "Thx, less magic - good project.", "author": "rpanchyk", "createdAt": "2021-02-11T10:08:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDM1OTc3Nw=="}], "type": "inlineReview"}, {"oid": "84f1aafbbfb04793f1f4cab98903e601e78f09ac", "url": "https://github.com/prebid/prebid-server-java/commit/84f1aafbbfb04793f1f4cab98903e601e78f09ac", "message": "Fixes after review", "committedDate": "2021-02-11T09:55:29Z", "type": "commit"}]}