{"pr_number": 2552, "pr_title": "PodStatusUtil#isRunning & #isInitializing (#2293)", "pr_createdAt": "2020-10-20T20:48:56Z", "pr_url": "https://github.com/fabric8io/kubernetes-client/pull/2552", "timeline": [{"oid": "524561ae54a7221caf00011d570094c2274707bb", "url": "https://github.com/fabric8io/kubernetes-client/commit/524561ae54a7221caf00011d570094c2274707bb", "message": "PodStatus#isRunning & #isInitializing (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-20T21:04:22Z", "type": "forcePushed"}, {"oid": "0a88e2c6767dd921294357c583af071ec865a016", "url": "https://github.com/fabric8io/kubernetes-client/commit/0a88e2c6767dd921294357c583af071ec865a016", "message": "PodStatus#isRunning & #isInitializing (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-20T21:08:28Z", "type": "forcePushed"}, {"oid": "257a11749958cc7aeff1183145fa1e28870bd3a1", "url": "https://github.com/fabric8io/kubernetes-client/commit/257a11749958cc7aeff1183145fa1e28870bd3a1", "message": "PodStatus#isRunning & #isInitializing (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-20T21:12:53Z", "type": "forcePushed"}, {"oid": "d3597a0fb5e758eb2ee101722529eea7e1da6094", "url": "https://github.com/fabric8io/kubernetes-client/commit/d3597a0fb5e758eb2ee101722529eea7e1da6094", "message": "PodStatus#isRunning & #isInitializing (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-20T21:18:33Z", "type": "forcePushed"}, {"oid": "67e8c24713d60e0bcdbe8687b52501eec3fac3fc", "url": "https://github.com/fabric8io/kubernetes-client/commit/67e8c24713d60e0bcdbe8687b52501eec3fac3fc", "message": "PodStatusUtil#isRunning & #isInitializing (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-20T21:20:08Z", "type": "forcePushed"}, {"oid": "0bd34e3e8015c6159208ce0a78580b256696deb5", "url": "https://github.com/fabric8io/kubernetes-client/commit/0bd34e3e8015c6159208ce0a78580b256696deb5", "message": "PodStatusUtil#isRunning & #isInitializing (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-21T09:38:02Z", "type": "forcePushed"}, {"oid": "b4d6c7c44fead8ea2e03533ff7148003e0b699c8", "url": "https://github.com/fabric8io/kubernetes-client/commit/b4d6c7c44fead8ea2e03533ff7148003e0b699c8", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-21T11:06:47Z", "type": "forcePushed"}, {"oid": "59db972cff542b134273a39483558a2e58c5c616", "url": "https://github.com/fabric8io/kubernetes-client/commit/59db972cff542b134273a39483558a2e58c5c616", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-21T11:16:58Z", "type": "forcePushed"}, {"oid": "06901705c43e7e4d0a141667e5e55b23ab7c2130", "url": "https://github.com/fabric8io/kubernetes-client/commit/06901705c43e7e4d0a141667e5e55b23ab7c2130", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-21T11:54:20Z", "type": "forcePushed"}, {"oid": "547b17af5395db1dcb46a78aea2610c970e8b374", "url": "https://github.com/fabric8io/kubernetes-client/commit/547b17af5395db1dcb46a78aea2610c970e8b374", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-21T11:57:34Z", "type": "forcePushed"}, {"oid": "59101b1df18077887f4da15bc5ffcc166423f8d7", "url": "https://github.com/fabric8io/kubernetes-client/commit/59101b1df18077887f4da15bc5ffcc166423f8d7", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-21T12:13:46Z", "type": "forcePushed"}, {"oid": "6a435f7e038a08f69a4c393f49c0b37a8b21537f", "url": "https://github.com/fabric8io/kubernetes-client/commit/6a435f7e038a08f69a4c393f49c0b37a8b21537f", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-21T13:19:13Z", "type": "forcePushed"}, {"oid": "3e55d0b197f45229b11983e1ab0c0c84607ec2eb", "url": "https://github.com/fabric8io/kubernetes-client/commit/3e55d0b197f45229b11983e1ab0c0c84607ec2eb", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-21T19:09:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTg4MjMyMg==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2552#discussion_r509882322", "bodyText": "\u2764\ufe0f so clear and legible", "author": "manusa", "createdAt": "2020-10-22T05:07:05Z", "path": "kubernetes-client/src/test/java/io/fabric8/kubernetes/client/utils/PodStatusUtilTest.java", "diffHunk": "@@ -0,0 +1,360 @@\n+/**\n+ * Copyright (C) 2015 Red Hat, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.fabric8.kubernetes.client.utils;\n+\n+import io.fabric8.kubernetes.api.model.ContainerStatus;\n+import io.fabric8.kubernetes.api.model.Pod;\n+import lombok.val;\n+import org.junit.Test;\n+\n+import java.util.List;\n+\n+import static io.fabric8.kubernetes.client.utils.PodMockUtils.condition;\n+import static io.fabric8.kubernetes.client.utils.PodMockUtils.containerState;\n+import static io.fabric8.kubernetes.client.utils.PodMockUtils.containerStateRunning;\n+import static io.fabric8.kubernetes.client.utils.PodMockUtils.containerStateTerminated;\n+import static io.fabric8.kubernetes.client.utils.PodMockUtils.containerStateWaiting;\n+import static io.fabric8.kubernetes.client.utils.PodMockUtils.containerStatus;\n+import static io.fabric8.kubernetes.client.utils.PodMockUtils.pod;\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+public class PodStatusUtilTest {\n+\n+    private ContainerStatus runningReady = containerStatus(\n+        true,\n+        containerState(\n+            null,\n+            null,\n+            containerStateRunning()\n+        )\n+    );\n+\n+    @Test\n+    public void isRunning_should_return_true_if_pod_is_in_phase_running() {\n+        // given\n+        Pod pod = pod(\"starwars\")", "originalCommit": "3e55d0b197f45229b11983e1ab0c0c84607ec2eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQzOTIwMA==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2552#discussion_r512439200", "bodyText": "Just a minor comment, Could you please add some javadocs for this class?", "author": "rohanKanojia", "createdAt": "2020-10-27T06:17:07Z", "path": "kubernetes-client/src/test/java/io/fabric8/kubernetes/client/utils/PodMockUtils.java", "diffHunk": "@@ -0,0 +1,273 @@\n+/**\n+ * Copyright (C) 2015 Red Hat, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.fabric8.kubernetes.client.utils;\n+\n+import io.fabric8.kubernetes.api.model.ContainerState;\n+import io.fabric8.kubernetes.api.model.ContainerStateRunning;\n+import io.fabric8.kubernetes.api.model.ContainerStateTerminated;\n+import io.fabric8.kubernetes.api.model.ContainerStateWaiting;\n+import io.fabric8.kubernetes.api.model.ContainerStatus;\n+import io.fabric8.kubernetes.api.model.ObjectMeta;\n+import io.fabric8.kubernetes.api.model.Pod;\n+import io.fabric8.kubernetes.api.model.PodCondition;\n+import io.fabric8.kubernetes.api.model.PodStatus;\n+import org.mockito.Mockito;\n+\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+\n+public class PodMockUtils {\n+\n+    public static PodMockBuilder pod(String name) {\n+        return new PodMockBuilder(name);\n+    }\n+\n+    public static PodCondition condition(String type, String status) {\n+        PodCondition mock = mock(PodCondition.class);\n+        when(mock.getType())\n+                .thenReturn(type);\n+        when(mock.getStatus())\n+                .thenReturn(status);\n+        return mock;\n+    }\n+\n+    public static ContainerStatus containerStatus(ContainerState state) {\n+        return containerStatus(false, state);\n+    }\n+\n+    public static ContainerStatus containerStatus(Boolean ready, ContainerState state) {\n+        ContainerStatus mock = mock(ContainerStatus.class);\n+        when(mock.getReady())\n+                .thenReturn(ready);\n+        when(mock.getState())\n+                .thenReturn(state);\n+        return mock;\n+    }\n+\n+    public static ContainerState containerState(ContainerStateTerminated terminated, ContainerStateWaiting waiting, ContainerStateRunning running) {\n+        ContainerState mock = mock(ContainerState.class);\n+        when(mock.getTerminated())\n+                .thenReturn(terminated);\n+        when(mock.getWaiting())\n+                .thenReturn(waiting);\n+        when(mock.getRunning())\n+                .thenReturn(running);\n+        return mock;\n+    }\n+\n+    public static ContainerStateTerminated containerStateTerminated(Integer exitCode, String reason) {\n+        ContainerStateTerminated mock = mock(ContainerStateTerminated.class);\n+        when(mock.getExitCode())\n+                .thenReturn(exitCode);\n+        when(mock.getReason())\n+                .thenReturn(reason);\n+        return mock;\n+    }\n+\n+    public static ContainerStateWaiting containerStateWaiting(String reason) {\n+        ContainerStateWaiting mock = mock(ContainerStateWaiting.class);\n+        when(mock.getReason())\n+                .thenReturn(reason);\n+        return mock;\n+    }\n+\n+    public static ContainerStateRunning containerStateRunning() {", "originalCommit": "3e55d0b197f45229b11983e1ab0c0c84607ec2eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU1NzAxMQ==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2552#discussion_r512557011", "bodyText": "This is a class that holds utils to create a pod mock. I added extensive javadocs.", "author": "adietish", "createdAt": "2020-10-27T10:02:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQzOTIwMA=="}], "type": "inlineReview"}, {"oid": "5291d901b8a3241a5a2c3341818e385f2f93ee9e", "url": "https://github.com/fabric8io/kubernetes-client/commit/5291d901b8a3241a5a2c3341818e385f2f93ee9e", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-27T10:00:45Z", "type": "forcePushed"}, {"oid": "e621751ddf1a60cc4453cafc54801152f2822123", "url": "https://github.com/fabric8io/kubernetes-client/commit/e621751ddf1a60cc4453cafc54801152f2822123", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-27T10:03:59Z", "type": "commit"}, {"oid": "e621751ddf1a60cc4453cafc54801152f2822123", "url": "https://github.com/fabric8io/kubernetes-client/commit/e621751ddf1a60cc4453cafc54801152f2822123", "message": "PodStatusUtil#isRunning, #isInitializing, #getContainerStatuses (#2293)\n\nSigned-off-by: Andre Dietisheim <adietish@redhat.com>", "committedDate": "2020-10-27T10:03:59Z", "type": "forcePushed"}]}