{"pr_number": 2339, "pr_title": "Fix #2299: Improve error handling of RejectedExecutionException from ExecutorService", "pr_createdAt": "2020-07-09T17:53:12Z", "pr_url": "https://github.com/fabric8io/kubernetes-client/pull/2339", "timeline": [{"oid": "7c7ff796f9b07c3e965fbeb05c2a6e1991bca107", "url": "https://github.com/fabric8io/kubernetes-client/commit/7c7ff796f9b07c3e965fbeb05c2a6e1991bca107", "message": "Fix #2299: Improve error handling of RejectedExecutionException from ExecutorService", "committedDate": "2020-07-09T18:26:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY4OTg0MQ==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2339#discussion_r452689841", "bodyText": "Not really sure if this Exception we'll be ever reached (at least for the cause described in the message). The exectorService.isShutdown()  check should prevent the exception for the alleged causes described in the message.", "author": "manusa", "createdAt": "2020-07-10T08:07:27Z", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/internal/ExecWebSocketListener.java", "diffHunk": "@@ -205,11 +206,15 @@ public void onOpen(WebSocket webSocket, Response response) {\n             }\n \n             webSocketRef.set(webSocket);\n-            executorService.submit(pumper);\n-            started.set(true);\n-            queue.add(true);\n+            if (!executorService.isShutdown()) {\n+              executorService.submit(pumper);\n+              started.set(true);\n+              queue.add(true);\n+            }\n         } catch (IOException e) {\n-            queue.add(new KubernetesClientException(OperationSupport.createStatus(response)));\n+          queue.add(new KubernetesClientException(OperationSupport.createStatus(response)));\n+        } catch (RejectedExecutionException rejectedTaskException) {\n+          throw new KubernetesClientException(\"Unable to write to OutputStream since close() has been called.\", rejectedTaskException.getCause());", "originalCommit": "7c7ff796f9b07c3e965fbeb05c2a6e1991bca107", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjcwMDY5NA==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2339#discussion_r452700694", "bodyText": "ohk. I'll remove this catch block", "author": "rohanKanojia", "createdAt": "2020-07-10T08:29:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY4OTg0MQ=="}], "type": "inlineReview"}, {"oid": "5a68719e82368ce575a6b10d3dc10ed597d9d37c", "url": "https://github.com/fabric8io/kubernetes-client/commit/5a68719e82368ce575a6b10d3dc10ed597d9d37c", "message": "Fix #2299: Improve error handling of RejectedExecutionException from ExecutorService", "committedDate": "2020-07-10T13:27:49Z", "type": "forcePushed"}, {"oid": "b8723537303845eb4572bbd47097ac332e81b9f2", "url": "https://github.com/fabric8io/kubernetes-client/commit/b8723537303845eb4572bbd47097ac332e81b9f2", "message": "Fix #2299: Improve error handling of RejectedExecutionException from ExecutorService", "committedDate": "2020-07-13T12:18:54Z", "type": "commit"}, {"oid": "b8723537303845eb4572bbd47097ac332e81b9f2", "url": "https://github.com/fabric8io/kubernetes-client/commit/b8723537303845eb4572bbd47097ac332e81b9f2", "message": "Fix #2299: Improve error handling of RejectedExecutionException from ExecutorService", "committedDate": "2020-07-13T12:18:54Z", "type": "forcePushed"}]}