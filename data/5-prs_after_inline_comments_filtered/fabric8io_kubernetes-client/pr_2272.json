{"pr_number": 2272, "pr_title": "Fix #1868: Add Support for rolling update", "pr_createdAt": "2020-06-08T16:06:56Z", "pr_url": "https://github.com/fabric8io/kubernetes-client/pull/2272", "timeline": [{"oid": "45ae281ce743a0409acb3d0dbddb73a971dd082b", "url": "https://github.com/fabric8io/kubernetes-client/commit/45ae281ce743a0409acb3d0dbddb73a971dd082b", "message": "Fix #1868: Add Support for rolling update", "committedDate": "2020-06-08T16:34:56Z", "type": "forcePushed"}, {"oid": "ab6ab044c53cd135f9c22a2a1584664d4a173ab9", "url": "https://github.com/fabric8io/kubernetes-client/commit/ab6ab044c53cd135f9c22a2a1584664d4a173ab9", "message": "Fix #1868: Add Support for rolling update", "committedDate": "2020-06-09T09:52:18Z", "type": "forcePushed"}, {"oid": "c869fe3043ac26b1a40387704fe40e75c4e5f968", "url": "https://github.com/fabric8io/kubernetes-client/commit/c869fe3043ac26b1a40387704fe40e75c4e5f968", "message": "Fix #1868: Add Support for rolling update", "committedDate": "2020-06-11T10:02:29Z", "type": "forcePushed"}, {"oid": "01e10c414cfac5c533587c976d0482e47f49a1b5", "url": "https://github.com/fabric8io/kubernetes-client/commit/01e10c414cfac5c533587c976d0482e47f49a1b5", "message": "Fix #1868: Add Support for rolling update", "committedDate": "2020-06-11T11:22:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk3MTQ1Mg==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2272#discussion_r439971452", "bodyText": "nit: when retrieving the first item of a collection, in general it's better to do\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Container container = oldRC.getSpec().getTemplate().getSpec().getContainers().get(0);\n          \n          \n            \n                Container container = oldRC.getSpec().getTemplate().getSpec().getContainers().iterator().next();\n          \n      \n    \n    \n  \n\nThis won't be affected by performance issues for specific collection implementations (imagine containers was some sort of LinkedList where access by index was heavily penalized)", "author": "manusa", "createdAt": "2020-06-15T07:11:48Z", "path": "kubernetes-client/src/main/java/io/fabric8/kubernetes/client/dsl/internal/apps/v1/ReplicaSetOperationsImpl.java", "diffHunk": "@@ -78,23 +77,57 @@ public ReplicaSet updateImage(String image) {\n     ReplicaSet oldRC = get();\n \n     if (oldRC == null) {\n-      throw new KubernetesClientException(\"Existing replica set doesn't exist\");\n+      throw new KubernetesClientException(\"Existing replication controller doesn't exist\");\n     }\n     if (oldRC.getSpec().getTemplate().getSpec().getContainers().size() > 1) {\n       throw new KubernetesClientException(\"Image update is not supported for multicontainer pods\");\n     }\n-    if (oldRC.getSpec().getTemplate().getSpec().getContainers().size() == 0) {\n+    if (oldRC.getSpec().getTemplate().getSpec().getContainers().isEmpty()) {\n       throw new KubernetesClientException(\"Pod has no containers!\");\n     }\n \n-    Container updatedContainer = new ContainerBuilder(oldRC.getSpec().getTemplate().getSpec().getContainers().iterator().next()).withImage(image).build();\n+    Container container = oldRC.getSpec().getTemplate().getSpec().getContainers().get(0);", "originalCommit": "01e10c414cfac5c533587c976d0482e47f49a1b5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b3ea32b6a109fcd434f669e9f0e02bf811e245df", "url": "https://github.com/fabric8io/kubernetes-client/commit/b3ea32b6a109fcd434f669e9f0e02bf811e245df", "message": "Fix #1868: Add Support for rolling update", "committedDate": "2020-06-15T12:53:23Z", "type": "commit"}, {"oid": "b3ea32b6a109fcd434f669e9f0e02bf811e245df", "url": "https://github.com/fabric8io/kubernetes-client/commit/b3ea32b6a109fcd434f669e9f0e02bf811e245df", "message": "Fix #1868: Add Support for rolling update", "committedDate": "2020-06-15T12:53:23Z", "type": "forcePushed"}]}