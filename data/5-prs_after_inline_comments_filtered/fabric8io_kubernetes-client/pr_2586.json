{"pr_number": 2586, "pr_title": "Chore: Added a table for Kubectl to Fabric8 Kubernetes Java Client mappings", "pr_createdAt": "2020-11-02T07:51:17Z", "pr_url": "https://github.com/fabric8io/kubernetes-client/pull/2586", "timeline": [{"oid": "ba9e63318a23ae77c6ddc9729a343c84cb7a28b6", "url": "https://github.com/fabric8io/kubernetes-client/commit/ba9e63318a23ae77c6ddc9729a343c84cb7a28b6", "message": "Chore: Added a table for Kubectl to Fabric8 Kubernetes Java Client mappings", "committedDate": "2020-11-02T10:05:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg4MzkzNw==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2586#discussion_r515883937", "bodyText": "I recall we exposed the applicable config, what's missing so that we don't have to deserialize the config file again?", "author": "manusa", "createdAt": "2020-11-02T10:41:59Z", "path": "kubernetes-examples/src/main/java/io/fabric8/kubernetes/examples/kubectl/equivalents/ConfigListUsers.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/**\n+ * Copyright (C) 2015 Red Hat, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.fabric8.kubernetes.examples.kubectl.equivalents;\n+\n+import io.fabric8.kubernetes.api.model.Config;\n+import io.fabric8.kubernetes.api.model.NamedAuthInfo;\n+import io.fabric8.kubernetes.client.utils.Serialization;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileNotFoundException;\n+\n+/**\n+ * Java equivalent to `kubectl config view -o jsonpath='{.users[*].name}'`. Gets a list of users\n+ * found in KubeConfig\n+ */\n+public class ConfigListUsers {\n+  private static final Logger logger = LoggerFactory.getLogger(ConfigListUsers.class);\n+\n+  public static void main(String[] args) throws FileNotFoundException {\n+    // Gets KubeConfig via reading KubeConfig environment variable or ~/.kube/config\n+    String kubeConfigFileName = io.fabric8.kubernetes.client.Config.getKubeconfigFilename();\n+    if (kubeConfigFileName != null) {\n+      File kubeConfigFile = new File(kubeConfigFileName);\n+      Config kubeConfigObj = Serialization.unmarshal(new FileInputStream(kubeConfigFile), Config.class);", "originalCommit": "ba9e63318a23ae77c6ddc9729a343c84cb7a28b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk1ODA5NA==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2586#discussion_r515958094", "bodyText": "Do you mean Config.getKubeConfigContents() which got added in #2290? I'll check if it works when I update it", "author": "rohanKanojia", "createdAt": "2020-11-02T13:06:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg4MzkzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ5MDA2MQ==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2586#discussion_r517490061", "bodyText": "Yes, I remember Andre provided some refactors to expose some configuration fields. So not sure if these values can or cannot be picked up from there and why.", "author": "manusa", "createdAt": "2020-11-04T16:55:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg4MzkzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk3MDEyOA==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2586#discussion_r519970128", "bodyText": "I checked Config but I could not find a method which exposes list of users. It exposes stuff like NamedContext all and current ones but not users.", "author": "rohanKanojia", "createdAt": "2020-11-09T16:59:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg4MzkzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMyNTMwNQ==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2586#discussion_r520325305", "bodyText": "So does it make sense to store this information there?\nWhat I mean is that we are already adding/caching the contexts (#2290) in the config. A context without the rest of user info is kind of incomplete IMO.\nOr maybe we should even store the whole io.fabric8.kubernetes.api.model.Config model. Remove the duplicate fields from Config (i.e. List) add extra getters and modify the current getContexts() to retrieve values from the local io.fabric8.kubernetes.api.model.Config.", "author": "manusa", "createdAt": "2020-11-10T06:39:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg4MzkzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDk3ODY1NQ==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2586#discussion_r524978655", "bodyText": "I think we should do it. But in the scope of another issue.", "author": "rohanKanojia", "createdAt": "2020-11-17T08:46:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg4MzkzNw=="}], "type": "inlineReview"}, {"oid": "430bf2029b7f28470aff1777600f997b1056b0ae", "url": "https://github.com/fabric8io/kubernetes-client/commit/430bf2029b7f28470aff1777600f997b1056b0ae", "message": "Chore: Added a table for Kubectl to Fabric8 Kubernetes Java Client mappings", "committedDate": "2020-11-09T16:59:43Z", "type": "forcePushed"}, {"oid": "d06013c9cb43619cb6de64b6f5e76ed809db0b02", "url": "https://github.com/fabric8io/kubernetes-client/commit/d06013c9cb43619cb6de64b6f5e76ed809db0b02", "message": "Chore: Added a table for Kubectl to Fabric8 Kubernetes Java Client mappings", "committedDate": "2020-11-17T08:43:07Z", "type": "commit"}, {"oid": "d06013c9cb43619cb6de64b6f5e76ed809db0b02", "url": "https://github.com/fabric8io/kubernetes-client/commit/d06013c9cb43619cb6de64b6f5e76ed809db0b02", "message": "Chore: Added a table for Kubectl to Fabric8 Kubernetes Java Client mappings", "committedDate": "2020-11-17T08:43:07Z", "type": "forcePushed"}]}