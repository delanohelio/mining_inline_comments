{"pr_number": 821, "pr_title": "fix(e2e): Fix transportclient tests not waiting for devices to subscribe to methods before invoking methods", "pr_createdAt": "2020-06-24T22:45:53Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/821", "timeline": [{"oid": "5e7e8db24da8dbcd53191efbdf49b7df2f86a4cd", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/5e7e8db24da8dbcd53191efbdf49b7df2f86a4cd", "message": "fix(e2e): Fix transportclient tests not waiting for devices to subscribe to methods before invoking methods\n\nsubscribeToDeviceMethod(...) is asynchronous (with a callback), but it was being used as if it was synchronous", "committedDate": "2020-06-24T22:44:57Z", "type": "commit"}, {"oid": "3fa2c59e179a97d120d5e3975aa4c57bafc6917a", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/3fa2c59e179a97d120d5e3975aa4c57bafc6917a", "message": "Merge branch 'master' into timtay/multiplexMethod", "committedDate": "2020-06-25T01:53:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg2OTY1Ng==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/821#discussion_r445869656", "bodyText": "just wondering why is this one tagged as ContinuousIntegrationTest and the other one above is not?", "author": "bikamani", "createdAt": "2020-06-25T22:18:15Z", "path": "iot-e2e-tests/common/src/test/java/tests/integration/com/microsoft/azure/sdk/iot/iothub/TransportClientTests.java", "diffHunk": "@@ -389,7 +403,20 @@ public void invokeMethodInvokeParallelSucceed() throws Exception\n \n         for (int i = 0; i < testInstance.clientArrayList.size(); i++)\n         {\n-            ((DeviceClient)testInstance.clientArrayList.get(i)).subscribeToDeviceMethod(new SampleDeviceMethodCallback(), null, new DeviceMethodStatusCallBack(), null);\n+            DeviceMethodStatusCallBack subscribedCallback = new DeviceMethodStatusCallBack();", "originalCommit": "3fa2c59e179a97d120d5e3975aa4c57bafc6917a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg3MDEzOQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/821#discussion_r445870139", "bodyText": "The CI test is just a parallelized flavor of the other test. For our check in builds, the simpler test is sufficient for coverage", "author": "timtay-microsoft", "createdAt": "2020-06-25T22:19:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTg2OTY1Ng=="}], "type": "inlineReview"}]}