{"pr_number": 820, "pr_title": "Fix flakey twin e2e tests", "pr_createdAt": "2020-06-24T22:18:08Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/820", "timeline": [{"oid": "fb11806ac7a356c264e6c25bf76abea1bc4ccccb", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/fb11806ac7a356c264e6c25bf76abea1bc4ccccb", "message": "fix(e2e): Fix issue where transport client twin tests sometimes threw a null pointer exception\n\nThe twin service client can be relegated to the test instance. Having a static instance was causing issues as it was sometimes prematurely disposed and would cause the NPE", "committedDate": "2020-06-24T21:37:11Z", "type": "commit"}, {"oid": "130e02285b11fe59dc8c9faae5d59bf0ab1eb81c", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/130e02285b11fe59dc8c9faae5d59bf0ab1eb81c", "message": "fix(e2e): Fix flakey twin tests\n\nA lot of scenarios had a 3 second timeout which is rather strict. Opening that timeout up to 1 minute so that the test isn't as flakey", "committedDate": "2020-06-24T22:02:44Z", "type": "commit"}, {"oid": "7ee0d882897499576248c904010d9c6943245180", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/7ee0d882897499576248c904010d9c6943245180", "message": "Revert \"fix(e2e): Fix issue where transport client twin tests sometimes threw a null pointer exception\"\n\nThis reverts commit fb11806ac7a356c264e6c25bf76abea1bc4ccccb.", "committedDate": "2020-06-24T22:17:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIwMjkzMg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/820#discussion_r445202932", "bodyText": "This was labeled as 30 seconds, but it was actually only 3 seconds", "author": "timtay-microsoft", "createdAt": "2020-06-24T22:18:41Z", "path": "iot-e2e-tests/common/src/test/java/tests/integration/com/microsoft/azure/sdk/iot/iothub/setup/DeviceTwinCommon.java", "diffHunk": "@@ -103,9 +103,9 @@ public static Collection inputs() throws Exception\n \n     // Max time to wait to see it on Hub\n     protected static final long PERIODIC_WAIT_TIME_FOR_VERIFICATION = 1000; // 1 sec\n-    protected static final long MAX_WAIT_TIME_FOR_VERIFICATION = 3000; // 30 sec", "originalCommit": "7ee0d882897499576248c904010d9c6943245180", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIwNzk1NA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/820#discussion_r445207954", "bodyText": "And I assume 3 seconds wasn't long enough and extending the wait period will fix the flakiness?", "author": "azabbasi", "createdAt": "2020-06-24T22:32:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIwMjkzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTI1NTE1NQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/820#discussion_r445255155", "bodyText": "Yeah", "author": "timtay-microsoft", "createdAt": "2020-06-25T01:15:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIwMjkzMg=="}], "type": "inlineReview"}, {"oid": "f3add1f00c7895e573ffe2f0fe7e29e391b50dd8", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/f3add1f00c7895e573ffe2f0fe7e29e391b50dd8", "message": "Merge branch 'master' into timtay/twinTimeout", "committedDate": "2020-06-25T01:15:27Z", "type": "commit"}]}