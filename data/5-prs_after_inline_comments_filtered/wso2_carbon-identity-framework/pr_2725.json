{"pr_number": 2725, "pr_title": "Fix application and internal role count from framework level", "pr_createdAt": "2020-02-05T13:47:17Z", "pr_url": "https://github.com/wso2/carbon-identity-framework/pull/2725", "timeline": [{"oid": "b2f6dcd384a3ddc7510ffa22d8fba575f080abf8", "url": "https://github.com/wso2/carbon-identity-framework/commit/b2f6dcd384a3ddc7510ffa22d8fba575f080abf8", "message": "Revert the logic for application and internal role count.", "committedDate": "2020-02-05T13:23:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTc4NzkxOQ==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2725#discussion_r375787919", "bodyText": "Need to use the hybrid role manager instead.", "author": "tharindu-bandara", "createdAt": "2020-02-06T11:43:40Z", "path": "components/user-store/org.wso2.carbon.identity.user.store.count/src/main/java/org/wso2/carbon/identity/user/store/count/UserStoreCountService.java", "diffHunk": "@@ -86,13 +86,10 @@\n             roleCounts[i] = new PairDTO(userStoreDomain, Long.toString(count));\n             i++;\n         }\n-        String internalDomainFilter = UserCoreConstants.INTERNAL_DOMAIN + UserCoreConstants.DOMAIN_SEPARATOR + filter;\n-        String applicationDomainFilter = InternalStoreCountConstants.APPLICATION_DOMAIN +\n-                UserCoreConstants.DOMAIN_SEPARATOR + filter;\n-        roleCounts[i] = new PairDTO(UserCoreConstants.INTERNAL_DOMAIN, String.valueOf(\n-                getRoleCount(internalDomainFilter)));\n-        roleCounts[++i] = new PairDTO(InternalStoreCountConstants.APPLICATION_DOMAIN, String.valueOf(\n-                getRoleCount(applicationDomainFilter)));\n+        roleCounts[i] =  new PairDTO(UserCoreConstants.INTERNAL_DOMAIN, String.valueOf(\n+                UserStoreCountUtils.getInternalRoleCount(filter)));", "originalCommit": "b2f6dcd384a3ddc7510ffa22d8fba575f080abf8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}