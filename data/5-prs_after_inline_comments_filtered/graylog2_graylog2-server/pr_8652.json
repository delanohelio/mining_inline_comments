{"pr_number": 8652, "pr_title": "Use GRNs instead of Strings in AvailableGrantee model", "pr_createdAt": "2020-07-29T15:16:34Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/8652", "timeline": [{"oid": "56f75255e54406ba040470a051aa743b3c50495c", "url": "https://github.com/Graylog2/graylog2-server/commit/56f75255e54406ba040470a051aa743b3c50495c", "message": "Use GRNs instead of Strings in AvailableGrantee model", "committedDate": "2020-07-29T13:23:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzAzNzk0MQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8652#discussion_r463037941", "bodyText": "Why are you converting this into a method instead of keeping it as a constant? If we use a method, we should adhere to the method naming conventions.", "author": "bernd", "createdAt": "2020-07-30T14:28:52Z", "path": "graylog2-server/src/main/java/org/graylog/grn/GRNRegistry.java", "diffHunk": "@@ -33,7 +33,10 @@\n  */\n @Singleton\n public class GRNRegistry {\n-    public static final String GLOBAL_USER_GRN = \"grn::::builtin-team:everyone\"; // TODO: Find a better name for the \"everyone\" grantee GRN type\n+    // TODO: Find a better name for the \"everyone\" grantee GRN type\n+    public GRN GLOBAL_USER_GRN() {", "originalCommit": "56f75255e54406ba040470a051aa743b3c50495c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3ODE4MA==", "url": "https://github.com/Graylog2/graylog2-server/pull/8652#discussion_r464278180", "bodyText": "yeah, not sure what I did there :-D", "author": "mpfz0r", "createdAt": "2020-08-03T08:49:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzAzNzk0MQ=="}], "type": "inlineReview"}, {"oid": "3f785e5e48dae86b0516cc9ca2f7cd42433f598c", "url": "https://github.com/Graylog2/graylog2-server/commit/3f785e5e48dae86b0516cc9ca2f7cd42433f598c", "message": "Merge remote-tracking branch 'origin/feature/permissions' into add-teams-support", "committedDate": "2020-07-31T10:37:39Z", "type": "commit"}, {"oid": "563a7859fc244b94db96c0057a707776191b9760", "url": "https://github.com/Graylog2/graylog2-server/commit/563a7859fc244b94db96c0057a707776191b9760", "message": "Keep GLOBAL_USER_GRN a constant", "committedDate": "2020-08-03T08:49:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2MzQ5NA==", "url": "https://github.com/Graylog2/graylog2-server/pull/8652#discussion_r465063494", "bodyText": "How about using this? That way we can make it static and don't have a public instance field that looks like a constant.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public final GRN GLOBAL_USER_GRN = newGRN(GRNTypes.BUILTIN_TEAM, \"everyone\");\n          \n          \n            \n                public static final GRN GLOBAL_USER_GRN = BUILTIN_TEAM.newGRNBuilder().entity(\"everyone\").build();;", "author": "bernd", "createdAt": "2020-08-04T13:49:19Z", "path": "graylog2-server/src/main/java/org/graylog/grn/GRNRegistry.java", "diffHunk": "@@ -33,7 +33,8 @@\n  */\n @Singleton\n public class GRNRegistry {\n-    public static final String GLOBAL_USER_GRN = \"grn::::builtin-team:everyone\"; // TODO: Find a better name for the \"everyone\" grantee GRN type\n+    // TODO: Find a better name for the \"everyone\" grantee GRN type\n+    public final GRN GLOBAL_USER_GRN = newGRN(GRNTypes.BUILTIN_TEAM, \"everyone\");", "originalCommit": "563a7859fc244b94db96c0057a707776191b9760", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2ODE3MA==", "url": "https://github.com/Graylog2/graylog2-server/pull/8652#discussion_r465068170", "bodyText": "ah, much nicer", "author": "mpfz0r", "createdAt": "2020-08-04T13:55:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2MzQ5NA=="}], "type": "inlineReview"}, {"oid": "e496364499970309206622ec301459ccc71d3bc4", "url": "https://github.com/Graylog2/graylog2-server/commit/e496364499970309206622ec301459ccc71d3bc4", "message": "Update graylog2-server/src/main/java/org/graylog/grn/GRNRegistry.java\n\nCo-authored-by: Bernd Ahlers <bernd@users.noreply.github.com>", "committedDate": "2020-08-04T13:55:58Z", "type": "commit"}, {"oid": "e420265297d81949538b912288ddf21b59110e11", "url": "https://github.com/Graylog2/graylog2-server/commit/e420265297d81949538b912288ddf21b59110e11", "message": "Fix compile error and access constant via class", "committedDate": "2020-08-04T14:07:23Z", "type": "commit"}]}