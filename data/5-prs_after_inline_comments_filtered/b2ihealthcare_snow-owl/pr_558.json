{"pr_number": 558, "pr_title": "SO-4029: Add generic set member search functionality", "pr_createdAt": "2020-05-15T09:40:01Z", "pr_url": "https://github.com/b2ihealthcare/snow-owl/pull/558", "timeline": [{"oid": "6d08ec3a22d927e9cfe51944acf65cd984028e92", "url": "https://github.com/b2ihealthcare/snow-owl/commit/6d08ec3a22d927e9cfe51944acf65cd984028e92", "message": "SO-4029: Generate worklist for mappings", "committedDate": "2020-05-15T09:11:52Z", "type": "commit"}, {"oid": "7cccff313cc87f554a2c49da7cbbb816145b3aba", "url": "https://github.com/b2ihealthcare/snow-owl/commit/7cccff313cc87f554a2c49da7cbbb816145b3aba", "message": "Revert \"SO-4029: Generate worklist for mappings\"\n\nThis reverts commit 6d08ec3a22d927e9cfe51944acf65cd984028e92.", "committedDate": "2020-05-15T09:20:30Z", "type": "commit"}, {"oid": "fce18984c51b00d47e1fb6fc2bf8eba125cf59dc", "url": "https://github.com/b2ihealthcare/snow-owl/commit/fce18984c51b00d47e1fb6fc2bf8eba125cf59dc", "message": "SO-4029: Generate work list for mappings", "committedDate": "2020-05-15T09:37:38Z", "type": "commit"}, {"oid": "6a847c8cd85c0afb5c8eae6fe9e0956107294bff", "url": "https://github.com/b2ihealthcare/snow-owl/commit/6a847c8cd85c0afb5c8eae6fe9e0956107294bff", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4029-generate_worklist_for_mappings", "committedDate": "2020-06-04T09:02:53Z", "type": "commit"}, {"oid": "0ca4bc4bfe1680af4986d51c4709fb80711ed63f", "url": "https://github.com/b2ihealthcare/snow-owl/commit/0ca4bc4bfe1680af4986d51c4709fb80711ed63f", "message": "SO-4029: Create generic member domain, search", "committedDate": "2020-06-05T10:17:39Z", "type": "commit"}, {"oid": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "url": "https://github.com/b2ihealthcare/snow-owl/commit/e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "message": "SO-4029: Test the generic member search API from the SNOMEDCT side", "committedDate": "2020-06-08T09:02:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc0NTM1OQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r436745359", "bodyText": "Please make this class final", "author": "nagyo", "createdAt": "2020-06-08T14:18:42Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/MemberSearchRequest.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.request;\n+\n+import java.io.IOException;\n+\n+import com.b2international.commons.options.Options;\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.uri.CodeSystemURI;\n+\n+/**\n+* @since 7.7\n+*/\n+public class MemberSearchRequest extends SearchResourceRequest<BranchContext, SetMembers> {", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc0NTk2OA==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r436745968", "bodyText": "Please make this class final", "author": "nagyo", "createdAt": "2020-06-08T14:19:39Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/MemberSearchRequestBuilder.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.request;\n+\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.request.SetMemberSearchRequestEvaluator.OptionKey;\n+\n+/**\n+* @since 7.7\n+*/\n+public class MemberSearchRequestBuilder extends SearchResourceRequestBuilder<MemberSearchRequestBuilder, BranchContext, SetMembers> ", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc0OTE1NA==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r436749154", "bodyText": "You can use \"SNOMEDCT/LATEST\" so there is no need to hardcode this effective time here.", "author": "nagyo", "createdAt": "2020-06-08T14:24:18Z", "path": "snomed/com.b2international.snowowl.snomed.core.rest.tests/src/com/b2international/snowowl/snomed/core/request/MemberSearchRequestSnomedTest.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.snomed.core.request;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.util.Set;\n+\n+import org.junit.Test;\n+\n+import com.b2international.snowowl.core.codesystem.CodeSystemRequests;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.snomed.common.SnomedConstants.Concepts;\n+import com.b2international.snowowl.snomed.common.SnomedTerminologyComponentConstants;\n+import com.b2international.snowowl.snomed.core.domain.refset.SnomedReferenceSetMembers;\n+import com.b2international.snowowl.snomed.datastore.request.SnomedRequests;\n+import com.b2international.snowowl.test.commons.Services;\n+import com.google.common.collect.FluentIterable;\n+\n+/**\n+ * @since 7.7\n+ */\n+public class MemberSearchRequestSnomedTest {\n+\n+\tprivate static final String CODESYSTEM = SnomedTerminologyComponentConstants.SNOMED_SHORT_NAME + \"/2018-01-31\";", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc3NjM1MQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r436776351", "bodyText": "This seems weird. There is no way to have control over the \"label\" of the refset member. Locales must be configurable for the generic set member request. Please add support for that!", "author": "nagyo", "createdAt": "2020-06-08T15:00:27Z", "path": "snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/datastore/request/SnomedRefSetMemberSearchRequestEvaluator.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.snomed.datastore.request;\n+\n+import static com.b2international.snowowl.snomed.common.SnomedTerminologyComponentConstants.REFSET_MEMBER_NUMBER;\n+\n+import java.util.stream.Collectors;\n+\n+import com.b2international.commons.options.Options;\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMember;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.request.SetMemberSearchRequestEvaluator;\n+import com.b2international.snowowl.core.uri.CodeSystemURI;\n+import com.b2international.snowowl.snomed.core.domain.SnomedConcept;\n+import com.b2international.snowowl.snomed.core.domain.SnomedConcepts;\n+\n+/**\n+ * @since 7.7\n+ */\n+public class SnomedRefSetMemberSearchRequestEvaluator implements SetMemberSearchRequestEvaluator {\n+\n+\t@Override\n+\tpublic SetMembers evaluate(CodeSystemURI uri, BranchContext context, Options search) {\n+\t\t\n+\t\tif (!search.containsKey(OptionKey.SET)) {\n+\t\t\treturn SetMemberSearchRequestEvaluator.NOOP.evaluate(uri, context, search);\n+\t\t}\n+\t\t\n+\t\tfinal String refsetId = search.get(OptionKey.SET, String.class);\n+\t\tfinal Integer limit = search.get(OptionKey.LIMIT, Integer.class);\n+\t\tfinal String searchAfter = search.get(OptionKey.AFTER, String.class);\n+\t\t\n+\t\tSnomedConcepts concepts = SnomedRequests.prepareSearchConcept()\n+\t\t\t.isActiveMemberOf(refsetId)\n+\t\t\t.setExpand(\"preferredDescriptions()\")\n+\t\t\t.setLimit(limit)\n+\t\t\t.setSearchAfter(searchAfter)\n+\t\t\t.build()\n+\t\t\t.execute(context);\n+\t\t\n+\t\treturn new SetMembers(concepts.stream().map(c -> toMember(c, uri)).collect(Collectors.toList()),\n+\t\t\t\tconcepts.getSearchAfter(),\n+\t\t\t\tconcepts.getLimit(),\n+\t\t\t\tconcepts.getTotal()\n+\t\t);\n+\t\t\n+\t}\n+\n+\tprivate SetMember toMember(SnomedConcept concept, CodeSystemURI uri) {\n+\t\treturn new SetMember(REFSET_MEMBER_NUMBER, \n+\t\t\t\turi.getCodeSystem(),\n+\t\t\t\tconcept.getId(),\n+\t\t\t\tconcept.getPreferredDescriptions().first().get().getTerm(),", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwMDQyOQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r437300429", "bodyText": "Use the new ComponentURI here as well, so you could replace three fields with one.", "author": "cmark", "createdAt": "2020-06-09T10:16:56Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/SetMember.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.domain;\n+\n+/**\n+ * @since 7.7\n+ */\n+public final class SetMember extends BaseComponent {\n+\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\tprivate final String sourceCodeSystem;\n+\tprivate final String sourceCode;", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwMDcyNw==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r437300727", "bodyText": "Use referencedComponentURI as field name instead of using source* fields.", "author": "cmark", "createdAt": "2020-06-09T10:17:30Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/SetMember.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.domain;\n+\n+/**\n+ * @since 7.7\n+ */\n+public final class SetMember extends BaseComponent {\n+\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\tprivate final String sourceCodeSystem;\n+\tprivate final String sourceCode;\n+\tprivate final String sourceTerm;\n+\t\n+\tprivate final String iconId;\n+\tprivate final short terminologyComponentId;\n+\t\n+\tpublic SetMember(short memberTermionlogyComponentId, String codeSystem, String referencedComponentId, String term, String iconId) {\n+\t\tthis.sourceCodeSystem = codeSystem;\n+\t\tthis.sourceCode = referencedComponentId;\n+\t\tthis.sourceTerm = term;\n+\t\tthis.iconId = iconId;\n+\t\tthis.terminologyComponentId = memberTermionlogyComponentId;\n+\t}\n+\t\n+\t@Override\n+\tpublic short getTerminologyComponentId() {\n+\t\treturn terminologyComponentId;\n+\t}\n+\n+\tpublic String getIconId() {\n+\t\treturn iconId;\n+\t}\n+\n+\tpublic String getSourceCodeSystem() {", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwMDk0Mg==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r437300942", "bodyText": "Add JSON deserialization annotations.", "author": "cmark", "createdAt": "2020-06-09T10:17:57Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/SetMembers.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.domain;\n+\n+import java.util.Collections;\n+import java.util.List;\n+\n+/**\n+ * @since 7.7\n+ */\n+public final class SetMembers extends PageableCollectionResource<SetMember> {\n+\n+\tprivate static final long serialVersionUID = 1L;\n+\t\n+\tpublic SetMembers(int limit, int total) {\n+\t\tsuper(Collections.emptyList(), null, limit, total);\n+\t}\n+\t\n+\tpublic SetMembers(List<SetMember> items, String searchAfter, int limit, int total) {", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwMTQ0Mg==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r437301442", "bodyText": "Add sort and other generic options from superclass.", "author": "cmark", "createdAt": "2020-06-09T10:18:52Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/MemberSearchRequest.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.request;\n+\n+import java.io.IOException;\n+\n+import com.b2international.commons.options.Options;\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.uri.CodeSystemURI;\n+\n+/**\n+* @since 7.7\n+*/\n+public class MemberSearchRequest extends SearchResourceRequest<BranchContext, SetMembers> {\n+\n+\t\n+\tprivate static final long serialVersionUID = 1L;\n+\t\n+\t@Override\n+\tprotected SetMembers createEmptyResult(int limit) {\n+\t\treturn new SetMembers(limit, 0);\n+\t}\n+\t\n+\t@Override\n+\tprotected SetMembers doExecute(BranchContext context) throws IOException {\n+\t\tOptions options = Options.builder()\n+\t\t\t\t.putAll(options())\n+\t\t\t\t.put(SetMemberSearchRequestEvaluator.OptionKey.AFTER, searchAfter())\n+\t\t\t\t.put(SetMemberSearchRequestEvaluator.OptionKey.LIMIT, limit())", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwMjcwNg==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r437302706", "bodyText": "Use filterBy* method names for filters.", "author": "cmark", "createdAt": "2020-06-09T10:21:15Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/MemberSearchRequestBuilder.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.request;\n+\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.request.SetMemberSearchRequestEvaluator.OptionKey;\n+\n+/**\n+* @since 7.7\n+*/\n+public class MemberSearchRequestBuilder extends SearchResourceRequestBuilder<MemberSearchRequestBuilder, BranchContext, SetMembers> \n+\t\timplements RevisionIndexRequestBuilder<SetMembers> {\n+\t\n+\tpublic MemberSearchRequestBuilder setContainer(String setId) {", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwMjgzMw==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r437302833", "bodyText": "Use method chaining here, return addOption(...);", "author": "cmark", "createdAt": "2020-06-09T10:21:29Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/MemberSearchRequestBuilder.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.request;\n+\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.request.SetMemberSearchRequestEvaluator.OptionKey;\n+\n+/**\n+* @since 7.7\n+*/\n+public class MemberSearchRequestBuilder extends SearchResourceRequestBuilder<MemberSearchRequestBuilder, BranchContext, SetMembers> \n+\t\timplements RevisionIndexRequestBuilder<SetMembers> {\n+\t\n+\tpublic MemberSearchRequestBuilder setContainer(String setId) {\n+\t\taddOption(OptionKey.SET, setId);", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwMzYyNg==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r437303626", "bodyText": "This is only an optional filter, I would return all members if no filters are specified.", "author": "cmark", "createdAt": "2020-06-09T10:22:59Z", "path": "snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/datastore/request/SnomedRefSetMemberSearchRequestEvaluator.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.snomed.datastore.request;\n+\n+import static com.b2international.snowowl.snomed.common.SnomedTerminologyComponentConstants.REFSET_MEMBER_NUMBER;\n+\n+import java.util.stream.Collectors;\n+\n+import com.b2international.commons.options.Options;\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMember;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.request.SetMemberSearchRequestEvaluator;\n+import com.b2international.snowowl.core.uri.CodeSystemURI;\n+import com.b2international.snowowl.snomed.core.domain.SnomedConcept;\n+import com.b2international.snowowl.snomed.core.domain.SnomedConcepts;\n+\n+/**\n+ * @since 7.7\n+ */\n+public class SnomedRefSetMemberSearchRequestEvaluator implements SetMemberSearchRequestEvaluator {\n+\n+\t@Override\n+\tpublic SetMembers evaluate(CodeSystemURI uri, BranchContext context, Options search) {\n+\t\t\n+\t\tif (!search.containsKey(OptionKey.SET)) {", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwNDAxNQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r437304015", "bodyText": "This still Concept only, what about supporting Descriptions and other components as referenced components? Make this member search request evaluator generic.", "author": "cmark", "createdAt": "2020-06-09T10:23:43Z", "path": "snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/datastore/request/SnomedRefSetMemberSearchRequestEvaluator.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.snomed.datastore.request;\n+\n+import static com.b2international.snowowl.snomed.common.SnomedTerminologyComponentConstants.REFSET_MEMBER_NUMBER;\n+\n+import java.util.stream.Collectors;\n+\n+import com.b2international.commons.options.Options;\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMember;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.request.SetMemberSearchRequestEvaluator;\n+import com.b2international.snowowl.core.uri.CodeSystemURI;\n+import com.b2international.snowowl.snomed.core.domain.SnomedConcept;\n+import com.b2international.snowowl.snomed.core.domain.SnomedConcepts;\n+\n+/**\n+ * @since 7.7\n+ */\n+public class SnomedRefSetMemberSearchRequestEvaluator implements SetMemberSearchRequestEvaluator {\n+\n+\t@Override\n+\tpublic SetMembers evaluate(CodeSystemURI uri, BranchContext context, Options search) {\n+\t\t\n+\t\tif (!search.containsKey(OptionKey.SET)) {\n+\t\t\treturn SetMemberSearchRequestEvaluator.NOOP.evaluate(uri, context, search);\n+\t\t}\n+\t\t\n+\t\tfinal String refsetId = search.get(OptionKey.SET, String.class);\n+\t\tfinal Integer limit = search.get(OptionKey.LIMIT, Integer.class);\n+\t\tfinal String searchAfter = search.get(OptionKey.AFTER, String.class);\n+\t\t\n+\t\tSnomedConcepts concepts = SnomedRequests.prepareSearchConcept()", "originalCommit": "e6cf1e62c67093ab86b1b86eaedc3b6136bc08bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d637c810045c07e55217d4b71499b53935591652", "url": "https://github.com/b2ihealthcare/snow-owl/commit/d637c810045c07e55217d4b71499b53935591652", "message": "Merge remote-tracking branch 'origin/7.x' into\nissue/SO-4029-generate_worklist_for_mappings\n\nConflicts:\n\tcore/com.b2international.snowowl.core/src/com/b2international/snowowl/core/codesystem/CodeSystemRequests.java\n\tcore/com.b2international.snowowl.core/src/com/b2international/snowowl/core/repository/TerminologyRepositoryPlugin.java\n\tsnomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/SnomedPlugin.java", "committedDate": "2020-06-10T13:24:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY2ODIxMQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438668211", "bodyText": "\u26a0\ufe0f Missing letter in method name.", "author": "apeteri", "createdAt": "2020-06-11T09:45:18Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/codesystem/CodeSystemRequests.java", "diffHunk": "@@ -71,6 +72,15 @@ public static ConceptSearchRequestBuilder prepareSearchConcepts() {\n \t\treturn new ConceptSearchRequestBuilder();\n \t}\n \t\n+\t/**\n+\t * Creates a new generic set member search request builder.\n+\t * \n+\t * @return the builder to configure for generic set member search\n+\t */\n+\tpublic static MemberSearchRequestBuilder prepareSearcMembers() {", "originalCommit": "d637c810045c07e55217d4b71499b53935591652", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7130fbfc0a538f03aa05ed5f63ede2f3ab6fea73", "url": "https://github.com/b2ihealthcare/snow-owl/commit/7130fbfc0a538f03aa05ed5f63ede2f3ab6fea73", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4029-generate_worklist_for_mappings", "committedDate": "2020-06-11T13:03:05Z", "type": "commit"}, {"oid": "3eadb5d87e343481e2189d2d9144e57190e5a715", "url": "https://github.com/b2ihealthcare/snow-owl/commit/3eadb5d87e343481e2189d2d9144e57190e5a715", "message": "SO-4029: Fix hardcoded codesystem uri", "committedDate": "2020-06-11T14:55:44Z", "type": "commit"}, {"oid": "97553014c9a7d5a22e5aeca40becff5237324ebf", "url": "https://github.com/b2ihealthcare/snow-owl/commit/97553014c9a7d5a22e5aeca40becff5237324ebf", "message": "SO-4029: Make request, builder classes final", "committedDate": "2020-06-11T14:55:45Z", "type": "commit"}, {"oid": "06c80b32a381f27a434d52349bf6246570dac671", "url": "https://github.com/b2ihealthcare/snow-owl/commit/06c80b32a381f27a434d52349bf6246570dac671", "message": "SO-4029: Add locales support to member search request evaluator", "committedDate": "2020-06-11T14:55:45Z", "type": "commit"}, {"oid": "27a35254ed7bb133f2e7b6ff84941d9cd06f581b", "url": "https://github.com/b2ihealthcare/snow-owl/commit/27a35254ed7bb133f2e7b6ff84941d9cd06f581b", "message": "SO-4029: Refactor SetMemberSearch API\n\n* Use new ComponentURI to store referenced component\n* Add json deserialization annotiations to SetMember\n* Fix method name typo\n* Add sort by option to member evaluation request\n* Return all members in SNOMED CT member search if no set id is\nspecified\n* Extend SNOMED CT set member evaluation to other component types\nbesides concepts", "committedDate": "2020-06-11T14:55:46Z", "type": "commit"}, {"oid": "5f7d4114e15070c5dd6c17d439e0ff63bc6ec795", "url": "https://github.com/b2ihealthcare/snow-owl/commit/5f7d4114e15070c5dd6c17d439e0ff63bc6ec795", "message": "SO-4029: Use fsn expand to obtain set member terms", "committedDate": "2020-06-11T14:55:46Z", "type": "commit"}, {"oid": "eae72bc4be727e05145c945c7a9b610a9aaff2b3", "url": "https://github.com/b2ihealthcare/snow-owl/commit/eae72bc4be727e05145c945c7a9b610a9aaff2b3", "message": "SO-4029: Fix ComponentURI initialization errors", "committedDate": "2020-06-11T15:42:45Z", "type": "commit"}, {"oid": "dc264fe742b0db22ad843e268615618d31a79b90", "url": "https://github.com/b2ihealthcare/snow-owl/commit/dc264fe742b0db22ad843e268615618d31a79b90", "message": "SO-4029: Add JSON deserialization annotations to collection resource", "committedDate": "2020-06-11T16:35:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2NjY0Ng==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438966646", "bodyText": "This should be final, so the class is immutable.", "author": "cmark", "createdAt": "2020-06-11T17:51:17Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/SetMember.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.domain;\n+\n+import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+/**\n+ * @since 7.7\n+ */\n+public final class SetMember extends BaseComponent {\n+\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\tprivate ComponentURI referencedComponentURI;", "originalCommit": "dc264fe742b0db22ad843e268615618d31a79b90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2Njc0Ng==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438966746", "bodyText": "Indentation!", "author": "cmark", "createdAt": "2020-06-11T17:51:23Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/SetMember.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.domain;\n+\n+import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+/**\n+ * @since 7.7\n+ */\n+public final class SetMember extends BaseComponent {\n+\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\tprivate ComponentURI referencedComponentURI;\n+\t\n+\tprivate final String sourceTerm;\n+\tprivate final String iconId;\n+\tprivate final short terminologyComponentId;\n+\t\n+    @JsonCreator", "originalCommit": "dc264fe742b0db22ad843e268615618d31a79b90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2NzI3Mg==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438967272", "bodyText": "Duplicate information, this is present in the ComponentURI referencedComponentURI argument as well.", "author": "cmark", "createdAt": "2020-06-11T17:52:00Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/SetMember.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.domain;\n+\n+import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+/**\n+ * @since 7.7\n+ */\n+public final class SetMember extends BaseComponent {\n+\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\tprivate ComponentURI referencedComponentURI;\n+\t\n+\tprivate final String sourceTerm;\n+\tprivate final String iconId;\n+\tprivate final short terminologyComponentId;\n+\t\n+    @JsonCreator\n+\tpublic SetMember(\n+\t\t\t@JsonProperty(\"referencedComponentURI\") ComponentURI referencedComponentURI,\n+\t\t\t@JsonProperty(\"terminologyComponentId\") short terminologyComponentId,\n+\t\t\t@JsonProperty(\"term\") String term,\n+\t\t\t@JsonProperty(\"iconId\") String iconId) {\n+\t\tthis.referencedComponentURI = referencedComponentURI;\n+\t\tthis.terminologyComponentId = terminologyComponentId;", "originalCommit": "dc264fe742b0db22ad843e268615618d31a79b90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2NzUxNQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438967515", "bodyText": "Rename this field to term.", "author": "cmark", "createdAt": "2020-06-11T17:52:17Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/SetMember.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.domain;\n+\n+import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+/**\n+ * @since 7.7\n+ */\n+public final class SetMember extends BaseComponent {\n+\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\tprivate ComponentURI referencedComponentURI;\n+\t\n+\tprivate final String sourceTerm;", "originalCommit": "dc264fe742b0db22ad843e268615618d31a79b90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2Nzg3Mg==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438967872", "bodyText": "Add equals(), hashCode(), toString() implementations.", "author": "cmark", "createdAt": "2020-06-11T17:52:42Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/SetMember.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.domain;\n+\n+import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+/**\n+ * @since 7.7\n+ */\n+public final class SetMember extends BaseComponent {\n+\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\tprivate ComponentURI referencedComponentURI;\n+\t\n+\tprivate final String sourceTerm;\n+\tprivate final String iconId;\n+\tprivate final short terminologyComponentId;\n+\t\n+    @JsonCreator\n+\tpublic SetMember(\n+\t\t\t@JsonProperty(\"referencedComponentURI\") ComponentURI referencedComponentURI,\n+\t\t\t@JsonProperty(\"terminologyComponentId\") short terminologyComponentId,\n+\t\t\t@JsonProperty(\"term\") String term,\n+\t\t\t@JsonProperty(\"iconId\") String iconId) {\n+\t\tthis.referencedComponentURI = referencedComponentURI;\n+\t\tthis.terminologyComponentId = terminologyComponentId;\n+\t\tthis.sourceTerm = term;\n+\t\tthis.iconId = iconId;\n+\t}\n+\t\n+\t@Override\n+\tpublic short getTerminologyComponentId() {\n+\t\treturn terminologyComponentId;\n+\t}\n+\n+\tpublic String getIconId() {\n+\t\treturn iconId;\n+\t}\n+\n+\tpublic String getSourceTerm() {\n+\t\treturn sourceTerm;\n+\t}\n+\n+\tpublic ComponentURI getReferencedComponentURI() {\n+\t\treturn referencedComponentURI;\n+\t}", "originalCommit": "dc264fe742b0db22ad843e268615618d31a79b90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2ODQ1OQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438968459", "bodyText": "It would be better not to extend from BaseComponent in this case, since we cannot guarantuee that a member always has a unique ID.", "author": "cmark", "createdAt": "2020-06-11T17:53:24Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/SetMember.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.domain;\n+\n+import com.b2international.snowowl.core.uri.ComponentURI;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+/**\n+ * @since 7.7\n+ */\n+public final class SetMember extends BaseComponent {", "originalCommit": "dc264fe742b0db22ad843e268615618d31a79b90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2OTI0MA==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438969240", "bodyText": "On a second thought, this might be already added via options(). Could you please check?", "author": "cmark", "createdAt": "2020-06-11T17:54:22Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/MemberSearchRequest.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.request;\n+\n+import java.io.IOException;\n+\n+import com.b2international.commons.options.Options;\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.uri.CodeSystemURI;\n+\n+/**\n+* @since 7.7\n+*/\n+public final class MemberSearchRequest extends SearchResourceRequest<BranchContext, SetMembers> {\n+\n+\t\n+\tprivate static final long serialVersionUID = 1L;\n+\t\n+\t@Override\n+\tprotected SetMembers createEmptyResult(int limit) {\n+\t\treturn new SetMembers(limit, 0);\n+\t}\n+\t\n+\t@Override\n+\tprotected SetMembers doExecute(BranchContext context) throws IOException {\n+\t\tOptions options = Options.builder()\n+\t\t\t\t.putAll(options())\n+\t\t\t\t.put(SetMemberSearchRequestEvaluator.OptionKey.AFTER, searchAfter())\n+\t\t\t\t.put(SetMemberSearchRequestEvaluator.OptionKey.LIMIT, limit())\n+\t\t\t\t.put(SetMemberSearchRequestEvaluator.OptionKey.LOCALES, locales())\n+\t\t\t\t.put(SearchResourceRequest.OptionKey.SORT_BY, sortBy())", "originalCommit": "dc264fe742b0db22ad843e268615618d31a79b90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMzNTEzNw==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r439335137", "bodyText": "It isn't added by options()", "author": "AAAlinaaa", "createdAt": "2020-06-12T10:21:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2OTI0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3MDI0Nw==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438970247", "bodyText": "Add support for multi-valued filtering by Set ID via a filterBySets(Iterable<String>) method.", "author": "cmark", "createdAt": "2020-06-11T17:55:29Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/MemberSearchRequestBuilder.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.core.request;\n+\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.domain.SetMembers;\n+import com.b2international.snowowl.core.request.SetMemberSearchRequestEvaluator.OptionKey;\n+\n+/**\n+* @since 7.7\n+*/\n+public final class MemberSearchRequestBuilder extends SearchResourceRequestBuilder<MemberSearchRequestBuilder, BranchContext, SetMembers> \n+\t\timplements RevisionIndexRequestBuilder<SetMembers> {\n+\t\n+\tpublic MemberSearchRequestBuilder filterBySet(String setId) {", "originalCommit": "dc264fe742b0db22ad843e268615618d31a79b90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3MjA4OA==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/558#discussion_r438972088", "bodyText": "This was intentionally using ==, because the original class was using an interner to cache the values.\nI think a simple Interners.weakInterner() could be added to cache the instances and reduce the memory footprint of this value class.", "author": "cmark", "createdAt": "2020-06-11T17:57:48Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/uri/ComponentURI.java", "diffHunk": "@@ -90,7 +90,7 @@ public String identifier() {\n \n \t@JsonIgnore\n \tpublic final boolean isUnknown() {\n-\t\treturn UNKNOWN == this;\n+\t\treturn UNKNOWN.equals(this);", "originalCommit": "dc264fe742b0db22ad843e268615618d31a79b90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "af88597ffdf6f9a6181ef0f89ac14af892f5fc49", "url": "https://github.com/b2ihealthcare/snow-owl/commit/af88597ffdf6f9a6181ef0f89ac14af892f5fc49", "message": "SO-4029: Remove BaseComponent as SetMember superclass, make all ...\n\n...fields final, add equals, hashcode toString methods", "committedDate": "2020-06-12T10:55:46Z", "type": "commit"}, {"oid": "60a385436d0e8d2058064a8d16c2c2f71fe804e8", "url": "https://github.com/b2ihealthcare/snow-owl/commit/60a385436d0e8d2058064a8d16c2c2f71fe804e8", "message": "SO-4029: Use a weak interner to cache ComponentURI instances", "committedDate": "2020-06-12T11:28:27Z", "type": "commit"}, {"oid": "6b6d94c0faba7dc1d148d2e8fe8e567e685176f6", "url": "https://github.com/b2ihealthcare/snow-owl/commit/6b6d94c0faba7dc1d148d2e8fe8e567e685176f6", "message": "SO-4029: Use MoreObjects.toStringHelper", "committedDate": "2020-06-12T12:49:03Z", "type": "commit"}, {"oid": "42fef13fe9819d63dbddbc4a9646ab8555d7267c", "url": "https://github.com/b2ihealthcare/snow-owl/commit/42fef13fe9819d63dbddbc4a9646ab8555d7267c", "message": "SO-4029: Shift jackson annotation to factory method, use obj references", "committedDate": "2020-06-12T12:49:58Z", "type": "commit"}, {"oid": "af49ee6e6a3bf3703c85b5d8a0d8d02bfedf1c06", "url": "https://github.com/b2ihealthcare/snow-owl/commit/af49ee6e6a3bf3703c85b5d8a0d8d02bfedf1c06", "message": "SO-4029: Add support for multi-valued filtering by Set ID", "committedDate": "2020-06-12T13:35:36Z", "type": "commit"}, {"oid": "ffa5dd944ca445f083d20ce10868e3bdea6a0e5e", "url": "https://github.com/b2ihealthcare/snow-owl/commit/ffa5dd944ca445f083d20ce10868e3bdea6a0e5e", "message": "Merge remote-tracking branch 'origin/7.x' into\nissue/SO-4029-generate_worklist_for_mappings\n\nConflicts:\n\tcore/com.b2international.snowowl.core/src/com/b2international/snowowl/core/uri/ComponentURI.java\n\tsnomed/com.b2international.snowowl.snomed.datastore.tests/src/com/b2international/snowowl/snomed/datastore/index/entry/SnomedRefSetMemberDocumentSerializationTest.java", "committedDate": "2020-06-15T10:05:59Z", "type": "commit"}]}