{"pr_number": 580, "pr_title": "SO-4103: New rule: Active descriptions on inactive concepts should have a single inactivation indicator member ", "pr_createdAt": "2020-06-04T12:09:14Z", "pr_url": "https://github.com/b2ihealthcare/snow-owl/pull/580", "timeline": [{"oid": "916882c85fedea52f1913f2f0fb81d95a5b37517", "url": "https://github.com/b2ihealthcare/snow-owl/commit/916882c85fedea52f1913f2f0fb81d95a5b37517", "message": "SO-4103: add new validation rule for inactive members", "committedDate": "2020-06-04T12:05:47Z", "type": "commit"}, {"oid": "4104a725ac75c6116b36b1e38711193d1fa912b0", "url": "https://github.com/b2ihealthcare/snow-owl/commit/4104a725ac75c6116b36b1e38711193d1fa912b0", "message": "SO-4103: remove sysout", "committedDate": "2020-06-09T12:44:35Z", "type": "commit"}, {"oid": "31deb5bda808d104f81b21c3f1b17547c099d074", "url": "https://github.com/b2ihealthcare/snow-owl/commit/31deb5bda808d104f81b21c3f1b17547c099d074", "message": "SO-4103: change order of equation", "committedDate": "2020-06-09T12:46:27Z", "type": "commit"}, {"oid": "2449f7c7f93fb3057f5147ab0956d03928488180", "url": "https://github.com/b2ihealthcare/snow-owl/commit/2449f7c7f93fb3057f5147ab0956d03928488180", "message": "SO-4103: fix rule", "committedDate": "2020-06-11T15:09:17Z", "type": "commit"}, {"oid": "9d46e459801c3ac1385e44cfeec1ae31d4299b9a", "url": "https://github.com/b2ihealthcare/snow-owl/commit/9d46e459801c3ac1385e44cfeec1ae31d4299b9a", "message": "SO-4103: add test for rule 671", "committedDate": "2020-06-11T16:06:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3NzI5Mw==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/580#discussion_r440077293", "bodyText": "There is no test for active description with incorrect indicator value in the refset.\nThere is no test for inactive description without any indicator value in the refset.", "author": "cmark", "createdAt": "2020-06-15T10:22:36Z", "path": "snomed/com.b2international.snowowl.validation.snomed/src/test/java/com/b2international/snowowl/validation/snomed/GenericValidationRuleTest.java", "diffHunk": "@@ -499,5 +499,36 @@ public void rule670() throws Exception {\n \t\tassertAffectedComponents(issues, \n \t\t\t\tComponentIdentifier.of(SnomedTerminologyComponentConstants.CONCEPT_NUMBER, Concepts.IS_A));\n \t}\n+\n+\t@Test\n+\tpublic void rule671() throws Exception {\n+\t\tfinal String ruleId = \"671\";\n+\t\tindexRule(ruleId);\n+\t\t\n+\t\tString conceptId = generateConceptId();\n+\t\tSnomedDescriptionIndexEntry fsn = description(generateDescriptionId(), Concepts.FULLY_SPECIFIED_NAME, \"Fully specified name 3 (tag)\")\n+\t\t\t\t.conceptId(conceptId)\n+\t\t\t\t.acceptability(Concepts.REFSET_LANGUAGE_TYPE_ES, Acceptability.PREFERRED)\n+\t\t\t\t.build();\n+\t\tSnomedDescriptionIndexEntry pt = description(generateDescriptionId(), Concepts.SYNONYM, \"Preferred term 3\")\n+\t\t\t\t.acceptability(Concepts.REFSET_LANGUAGE_TYPE_ES, Acceptability.PREFERRED)\n+\t\t\t\t.conceptId(conceptId)\n+\t\t\t\t.build();\n+\t\tSnomedRefSetMemberIndexEntry ptMember = member(pt.getId(), SnomedTerminologyComponentConstants.DESCRIPTION_NUMBER, Concepts.REFSET_DESCRIPTION_INACTIVITY_INDICATOR).valueId(Concepts.CONCEPT_NON_CURRENT).build();", "originalCommit": "9d46e459801c3ac1385e44cfeec1ae31d4299b9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk5Njk3Mg==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/580#discussion_r440996972", "bodyText": "Done", "author": "molnarlaura", "createdAt": "2020-06-16T16:47:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3NzI5Mw=="}], "type": "inlineReview"}, {"oid": "c71070368d91f9558d5158f0601b765e64118bbc", "url": "https://github.com/b2ihealthcare/snow-owl/commit/c71070368d91f9558d5158f0601b765e64118bbc", "message": "SO-4103: add new cases for testing rule 671", "committedDate": "2020-06-16T09:50:24Z", "type": "commit"}, {"oid": "7d13d7c23b4056e3f3f188886a2059733e60218f", "url": "https://github.com/b2ihealthcare/snow-owl/commit/7d13d7c23b4056e3f3f188886a2059733e60218f", "message": "SO-4103: change filtering logic", "committedDate": "2020-06-16T10:14:23Z", "type": "commit"}, {"oid": "8fc25cfa78ea555ff72754410a7f68cf1d8b6e86", "url": "https://github.com/b2ihealthcare/snow-owl/commit/8fc25cfa78ea555ff72754410a7f68cf1d8b6e86", "message": "SO-4103: fix test", "committedDate": "2020-06-16T13:18:27Z", "type": "commit"}, {"oid": "91e2695eb858b19268b50ff626e2139831b81e25", "url": "https://github.com/b2ihealthcare/snow-owl/commit/91e2695eb858b19268b50ff626e2139831b81e25", "message": "SO-4103: refactor script", "committedDate": "2020-06-16T13:22:46Z", "type": "commit"}, {"oid": "c1b24f2413cda8b5c1ed87bd3f360110b0566e7b", "url": "https://github.com/b2ihealthcare/snow-owl/commit/c1b24f2413cda8b5c1ed87bd3f360110b0566e7b", "message": "SO-4103: rename variable", "committedDate": "2020-06-17T08:59:10Z", "type": "commit"}]}