{"pr_number": 4004, "pr_title": "Fixed null pointer and deployment issue on Xenserver with L2 Guest network with configDrive", "pr_createdAt": "2020-03-31T08:39:08Z", "pr_url": "https://github.com/apache/cloudstack/pull/4004", "timeline": [{"oid": "6833d8b1d0f91c78c509dccd063788c66e8b5dcc", "url": "https://github.com/apache/cloudstack/commit/6833d8b1d0f91c78c509dccd063788c66e8b5dcc", "message": "Fixed null pointer and deployment issue on configDrive network", "committedDate": "2020-03-31T08:20:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAzNDA2OQ==", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r407034069", "bodyText": "maybe give the 3 a constant with descriptive name", "author": "DaanHoogland", "createdAt": "2020-04-11T08:11:06Z", "path": "plugins/hypervisors/xenserver/src/main/java/com/cloud/hypervisor/xenserver/resource/CitrixResourceBase.java", "diffHunk": "@@ -1156,7 +1156,7 @@ public VBD createVbd(final Connection conn, final DiskTO volume, final String vm\n         if (volume.getType() == Volume.Type.ISO) {\n             vbdr.mode = Types.VbdMode.RO;\n             vbdr.type = Types.VbdType.CD;\n-            vbdr.userdevice = \"3\";\n+            vbdr.userdevice = String.valueOf(3 + isoCount);", "originalCommit": "6833d8b1d0f91c78c509dccd063788c66e8b5dcc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEwOTUwMg==", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r410109502", "bodyText": "@DaanHoogland I have made the changes.", "author": "Spaceman1984", "createdAt": "2020-04-17T09:37:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAzNDA2OQ=="}], "type": "inlineReview"}, {"oid": "412694c5676f5b5d0e6667826e832d6bcab5a662", "url": "https://github.com/apache/cloudstack/commit/412694c5676f5b5d0e6667826e832d6bcab5a662", "message": "Review changes - Created const value for user device id and refactored disk prepare method.", "committedDate": "2020-04-17T08:07:37Z", "type": "commit"}, {"oid": "0c2773c82f85c9c0169eefa4c409c078ff7b4fcc", "url": "https://github.com/apache/cloudstack/commit/0c2773c82f85c9c0169eefa4c409c078ff7b4fcc", "message": "Fixed vm with configdrive migration error", "committedDate": "2020-04-20T09:57:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxMzY4OQ==", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r411413689", "bodyText": "\u00bfcan you create a final (static) field for this?", "author": "DaanHoogland", "createdAt": "2020-04-20T14:15:28Z", "path": "plugins/hypervisors/xenserver/src/main/java/com/cloud/hypervisor/xenserver/resource/CitrixResourceBase.java", "diffHunk": "@@ -5542,7 +5544,7 @@ public boolean attachConfigDriveToMigratedVm(Connection conn, String vmName, Str\n             s_logger.debug(\"Attaching config drive iso device for the VM \" + vmName + \" In host \" + ipAddr);\n             Set<VM> vms = VM.getByNameLabel(conn, vmName);\n \n-            SR sr = getSRByNameLabel(conn, _configDriveSRName + ipAddr);\n+            SR sr = getSRByNameLabel(conn, vmName + \"-ISO\");", "originalCommit": "0c2773c82f85c9c0169eefa4c409c078ff7b4fcc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI4OTQ2Nw==", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r419289467", "bodyText": "Done", "author": "Spaceman1984", "createdAt": "2020-05-04T08:42:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxMzY4OQ=="}], "type": "inlineReview"}, {"oid": "ea077bcfb221f0d42342615a91e6418c4249ecc2", "url": "https://github.com/apache/cloudstack/commit/ea077bcfb221f0d42342615a91e6418c4249ecc2", "message": "Fixed iso not attaching after migration", "committedDate": "2020-05-04T08:20:22Z", "type": "commit"}, {"oid": "f1779e3653b69d192e128d989e09d76d4b1ed021", "url": "https://github.com/apache/cloudstack/commit/f1779e3653b69d192e128d989e09d76d4b1ed021", "message": "Added static string", "committedDate": "2020-05-04T08:26:09Z", "type": "commit"}, {"oid": "cbbaad89991c667d58cfb3a8e46079d725146273", "url": "https://github.com/apache/cloudstack/commit/cbbaad89991c667d58cfb3a8e46079d725146273", "message": "Added static string", "committedDate": "2020-05-04T08:42:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg2NjAxOA==", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r428866018", "bodyText": "can you explain? I don't see it being used anywhere", "author": "DaanHoogland", "createdAt": "2020-05-21T19:29:13Z", "path": "server/src/main/java/com/cloud/network/element/ConfigDriveNetworkElement.java", "diffHunk": "@@ -478,7 +476,7 @@ private boolean deleteConfigDriveIso(final VirtualMachine vm) throws ResourceUna\n         return true;\n     }\n \n-    private void addConfigDriveDisk(final VirtualMachineProfile profile, final DataStore dataStore) throws ResourceUnavailableException {\n+    public static void addConfigDriveDisk(final VirtualMachineProfile profile, final DataStore dataStore) throws ResourceUnavailableException {", "originalCommit": "cbbaad89991c667d58cfb3a8e46079d725146273", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTEzNjcxNA==", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r431136714", "bodyText": "@Spaceman1984 have you seen this question?", "author": "nvazquez", "createdAt": "2020-05-27T13:37:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg2NjAxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY3MTI4Ng==", "url": "https://github.com/apache/cloudstack/pull/4004#discussion_r433671286", "bodyText": "Must be a leftover artifact from long days of experimentation, will remove.", "author": "Spaceman1984", "createdAt": "2020-06-02T07:23:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg2NjAxOA=="}], "type": "inlineReview"}, {"oid": "1f5df355fc02a8e43ed7567b5311c56d16fda86e", "url": "https://github.com/apache/cloudstack/commit/1f5df355fc02a8e43ed7567b5311c56d16fda86e", "message": "Removed public modifier", "committedDate": "2020-06-02T07:24:02Z", "type": "commit"}]}