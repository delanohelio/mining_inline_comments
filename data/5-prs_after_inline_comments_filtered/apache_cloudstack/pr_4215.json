{"pr_number": 4215, "pr_title": "Enable account settings to be visible under domain settings", "pr_createdAt": "2020-07-17T07:38:19Z", "pr_url": "https://github.com/apache/cloudstack/pull/4215", "timeline": [{"oid": "b4a3f92c428b6e68600df482cc6df5a3acc1ea3b", "url": "https://github.com/apache/cloudstack/commit/b4a3f92c428b6e68600df482cc6df5a3acc1ea3b", "message": "Enable account settings to be visible under domain settings\n\nAll the account settings can't be configured under domain\nlevel settings right now.\nBy default, if account setting is not configured then\nits value will be taken from global setting.\nAdd a global setting \"enable.account.settings.for.domain\"\nso that if its enabled then all the account level settings\nwill be visible under domain levelsettings also.\nIf account level setting is configured then that value will\nbe considered else it will take domain scope value. If\ndomain scope value is not configured then it will pick\nit up from global setting.\n\nIf domain level setting is not configured then by default\nthe value will be taken from global setting\nAdd another global setting \"enable.domain.settings.for.child.domain\"\nso that when its true, if a value for domain setting is not\nconfigured then its parent domain value is considered until\nit reaches ROOT domain. If no value is configured till ROOT\ndomain then global setting value will be taken.\n\nAlso display all the settings configured under the domain level\nin list domains api response", "committedDate": "2020-10-28T12:21:10Z", "type": "forcePushed"}, {"oid": "32e3d082325b8a9ba36e6affce269aa8942a33ee", "url": "https://github.com/apache/cloudstack/commit/32e3d082325b8a9ba36e6affce269aa8942a33ee", "message": "Fix NPE while deleting domain", "committedDate": "2020-12-10T15:34:02Z", "type": "forcePushed"}, {"oid": "065782e1e6a167015e5d87633a5f29970a0dd50c", "url": "https://github.com/apache/cloudstack/commit/065782e1e6a167015e5d87633a5f29970a0dd50c", "message": "Enable account settings to be visible under domain settings\n\nAll the account settings can't be configured under domain\nlevel settings right now.\nBy default, if account setting is not configured then\nits value will be taken from global setting.\nAdd a global setting \"enable.account.settings.for.domain\"\nso that if its enabled then all the account level settings\nwill be visible under domain levelsettings also.\nIf account level setting is configured then that value will\nbe considered else it will take domain scope value. If\ndomain scope value is not configured then it will pick\nit up from global setting.\n\nIf domain level setting is not configured then by default\nthe value will be taken from global setting\nAdd another global setting \"enable.domain.settings.for.child.domain\"\nso that when its true, if a value for domain setting is not\nconfigured then its parent domain value is considered until\nit reaches ROOT domain. If no value is configured till ROOT\ndomain then global setting value will be taken.\n\nAlso display all the settings configured under the domain level\nin list domains api response", "committedDate": "2021-03-23T13:20:58Z", "type": "forcePushed"}, {"oid": "1ed663777c4824297de76561f4b3fccdc029d270", "url": "https://github.com/apache/cloudstack/commit/1ed663777c4824297de76561f4b3fccdc029d270", "message": "Enable account settings to be visible under domain settings\n\nAll the account settings can't be configured under domain\nlevel settings right now.\nBy default, if account setting is not configured then\nits value will be taken from global setting.\nAdd a global setting \"enable.account.settings.for.domain\"\nso that if its enabled then all the account level settings\nwill be visible under domain levelsettings also.\nIf account level setting is configured then that value will\nbe considered else it will take domain scope value. If\ndomain scope value is not configured then it will pick\nit up from global setting.\n\nIf domain level setting is not configured then by default\nthe value will be taken from global setting\nAdd another global setting \"enable.domain.settings.for.child.domain\"\nso that when its true, if a value for domain setting is not\nconfigured then its parent domain value is considered until\nit reaches ROOT domain. If no value is configured till ROOT\ndomain then global setting value will be taken.\n\nAlso display all the settings configured under the domain level\nin list domains api response", "committedDate": "2021-03-23T13:25:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjMzOTY5OA==", "url": "https://github.com/apache/cloudstack/pull/4215#discussion_r602339698", "bodyText": "naming convention for static final dictates as above ALL_CAPS_WITH_UNDERSCORES", "author": "DaanHoogland", "createdAt": "2021-03-26T14:30:13Z", "path": "server/src/main/java/com/cloud/configuration/ConfigurationManagerImpl.java", "diffHunk": "@@ -6485,6 +6492,7 @@ public String getConfigComponentName() {\n     @Override\n     public ConfigKey<?>[] getConfigKeys() {\n         return new ConfigKey<?>[] {SystemVMUseLocalStorage, IOPS_MAX_READ_LENGTH, IOPS_MAX_WRITE_LENGTH,\n-                BYTES_MAX_READ_LENGTH, BYTES_MAX_WRITE_LENGTH, ADD_HOST_ON_SERVICE_RESTART_KVM, SET_HOST_DOWN_TO_MAINTENANCE};\n+                BYTES_MAX_READ_LENGTH, BYTES_MAX_WRITE_LENGTH, ADD_HOST_ON_SERVICE_RESTART_KVM, SET_HOST_DOWN_TO_MAINTENANCE,\n+                EnableAccountSettingsForDomain, EnableDomainSettingsForChildDomain};", "originalCommit": "1ed663777c4824297de76561f4b3fccdc029d270", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjM0Mjg1Mg==", "url": "https://github.com/apache/cloudstack/pull/4215#discussion_r602342852", "bodyText": "this string should probably come from some static final as now it is encoded twice (at least)", "author": "DaanHoogland", "createdAt": "2021-03-26T14:34:26Z", "path": "engine/schema/src/main/java/com/cloud/domain/dao/DomainDetailsDaoImpl.java", "diffHunk": "@@ -98,7 +107,24 @@ public Scope getScope() {\n \n     @Override\n     public String getConfigValue(long id, ConfigKey<?> key) {\n-        DomainDetailVO vo = findDetail(id, key.key());\n+        DomainDetailVO vo = null;\n+        String enableDomainSettingsForChildDomain = _configDao.getValue(\"enable.domain.settings.for.child.domain\");", "originalCommit": "1ed663777c4824297de76561f4b3fccdc029d270", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0ea04656f4671fab45ff2a9d78add341916fac1c", "url": "https://github.com/apache/cloudstack/commit/0ea04656f4671fab45ff2a9d78add341916fac1c", "message": "Enable account settings to be visible under domain settings\n\nAll the account settings can't be configured under domain\nlevel settings right now.\nBy default, if account setting is not configured then\nits value will be taken from global setting.\nAdd a global setting \"enable.account.settings.for.domain\"\nso that if its enabled then all the account level settings\nwill be visible under domain levelsettings also.\nIf account level setting is configured then that value will\nbe considered else it will take domain scope value. If\ndomain scope value is not configured then it will pick\nit up from global setting.\n\nIf domain level setting is not configured then by default\nthe value will be taken from global setting\nAdd another global setting \"enable.domain.settings.for.child.domain\"\nso that when its true, if a value for domain setting is not\nconfigured then its parent domain value is considered until\nit reaches ROOT domain. If no value is configured till ROOT\ndomain then global setting value will be taken.\n\nAlso display all the settings configured under the domain level\nin list domains api response", "committedDate": "2021-09-08T08:12:25Z", "type": "forcePushed"}, {"oid": "50f4a8a77f8105b608db9c471c0046575fd695a5", "url": "https://github.com/apache/cloudstack/commit/50f4a8a77f8105b608db9c471c0046575fd695a5", "message": "Enable account settings to be visible under domain settings\n\nAll the account settings can't be configured under domain\nlevel settings right now.\nBy default, if account setting is not configured then\nits value will be taken from global setting.\nAdd a global setting \"enable.account.settings.for.domain\"\nso that if its enabled then all the account level settings\nwill be visible under domain levelsettings also.\nIf account level setting is configured then that value will\nbe considered else it will take domain scope value. If\ndomain scope value is not configured then it will pick\nit up from global setting.\n\nIf domain level setting is not configured then by default\nthe value will be taken from global setting\nAdd another global setting \"enable.domain.settings.for.child.domain\"\nso that when its true, if a value for domain setting is not\nconfigured then its parent domain value is considered until\nit reaches ROOT domain. If no value is configured till ROOT\ndomain then global setting value will be taken.\n\nAlso display all the settings configured under the domain level\nin list domains api response", "committedDate": "2021-09-20T11:18:20Z", "type": "commit"}, {"oid": "bca8556e3ebe27fcaedb11c83384fa8499e586dd", "url": "https://github.com/apache/cloudstack/commit/bca8556e3ebe27fcaedb11c83384fa8499e586dd", "message": "rename variables", "committedDate": "2021-09-20T11:18:22Z", "type": "commit"}, {"oid": "bca8556e3ebe27fcaedb11c83384fa8499e586dd", "url": "https://github.com/apache/cloudstack/commit/bca8556e3ebe27fcaedb11c83384fa8499e586dd", "message": "rename variables", "committedDate": "2021-09-20T11:18:22Z", "type": "forcePushed"}]}