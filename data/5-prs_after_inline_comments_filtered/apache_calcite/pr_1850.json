{"pr_number": 1850, "pr_title": "[CALCITE-3847] Decorrelation for join with lateral table outputs wron\u2026", "pr_createdAt": "2020-03-09T12:05:29Z", "pr_url": "https://github.com/apache/calcite/pull/1850", "timeline": [{"oid": "62e7bee8141127d8f94811add2b3998f24f663bd", "url": "https://github.com/apache/calcite/commit/62e7bee8141127d8f94811add2b3998f24f663bd", "message": "[CALCITE-3847] Decorrelation for join with lateral table outputs wrong plan if the join condition contains correlation variables", "committedDate": "2020-03-09T12:04:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNDI3NA==", "url": "https://github.com/apache/calcite/pull/1850#discussion_r389624274", "bodyText": "This class also contains methods for non-logical rel nodes, for example, decorrelateRel(Filter rel). Should be TableFunctionScan there instead of LogicalTableFunctionScan to ensure that this issue wouldn't be reproduced for other implementations of TableFunctionScan?", "author": "vvysotskyi", "createdAt": "2020-03-09T12:18:59Z", "path": "core/src/main/java/org/apache/calcite/sql2rel/RelDecorrelator.java", "diffHunk": "@@ -1032,6 +1033,13 @@ public Frame decorrelateRel(LogicalSnapshot rel) {\n     return decorrelateRel((RelNode) rel);\n   }\n \n+  public Frame decorrelateRel(LogicalTableFunctionScan rel) {", "originalCommit": "62e7bee8141127d8f94811add2b3998f24f663bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY2OTM1MQ==", "url": "https://github.com/apache/calcite/pull/1850#discussion_r389669351", "bodyText": "Decoration should only happen for logical nodes, we keep node Filter only for compatibility with old version Calcite.", "author": "danny0405", "createdAt": "2020-03-09T13:33:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNDI3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY4MzUwOA==", "url": "https://github.com/apache/calcite/pull/1850#discussion_r389683508", "bodyText": "Ok, thanks for the explanation.", "author": "vvysotskyi", "createdAt": "2020-03-09T13:46:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNDI3NA=="}], "type": "inlineReview"}]}