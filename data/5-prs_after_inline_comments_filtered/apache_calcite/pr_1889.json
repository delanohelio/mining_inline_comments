{"pr_number": 1889, "pr_title": "[CALCITE-3576] Remove enumerable convention check in FilterIntoJoinRule", "pr_createdAt": "2020-03-29T04:01:05Z", "pr_url": "https://github.com/apache/calcite/pull/1889", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMyMzc4MA==", "url": "https://github.com/apache/calcite/pull/1889#discussion_r401323780", "bodyText": "If NOT_ENUMERABLE is not needed any more, should we also no need to retain the predicate parameter?", "author": "chunweilei", "createdAt": "2020-04-01T02:39:22Z", "path": "core/src/main/java/org/apache/calcite/rel/rules/FilterJoinRule.java", "diffHunk": "@@ -53,28 +52,21 @@\n    * will be pushed into the ON clause. */\n   public static final Predicate TRUE_PREDICATE = (join, joinType, exp) -> true;\n \n-  /** Predicate that returns true if the join is not Enumerable convention,\n-   * will be replaced by {@link #TRUE_PREDICATE} once enumerable join supports\n-   * non-equi join. */\n-  // to be removed before 1.22.0\n-  private static final Predicate NOT_ENUMERABLE = (join, joinType, exp) ->\n-      join.getConvention() != EnumerableConvention.INSTANCE;\n-\n   /** Rule that pushes predicates from a Filter into the Join below them. */\n   public static final FilterJoinRule FILTER_ON_JOIN =\n       new FilterIntoJoinRule(true, RelFactories.LOGICAL_BUILDER,\n-          NOT_ENUMERABLE);\n+          TRUE_PREDICATE);\n ", "originalCommit": "c6a1c9180ffabca1ff898ff62d26690e1c8c03bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM4OTU4NA==", "url": "https://github.com/apache/calcite/pull/1889#discussion_r403389584", "bodyText": "I guess still need it for backward compatibility, in case some other is still using it.", "author": "hsyuan", "createdAt": "2020-04-03T23:59:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMyMzc4MA=="}], "type": "inlineReview"}, {"oid": "51524a324fe4fc99b074c780f1265a86288b3661", "url": "https://github.com/apache/calcite/commit/51524a324fe4fc99b074c780f1265a86288b3661", "message": "Adjust nestedloop join cost model", "committedDate": "2020-04-03T23:20:30Z", "type": "forcePushed"}, {"oid": "1002d983f009c763f32d2baa3df575a060fddf7c", "url": "https://github.com/apache/calcite/commit/1002d983f009c763f32d2baa3df575a060fddf7c", "message": "[CALCITE-3576] Remove enumerable convention check in FilterIntoJoinRule", "committedDate": "2020-04-13T00:43:17Z", "type": "forcePushed"}, {"oid": "e22565c9e8e8eeb0b47bc1814a5db09c827e9995", "url": "https://github.com/apache/calcite/commit/e22565c9e8e8eeb0b47bc1814a5db09c827e9995", "message": "[CALCITE-3576] Remove enumerable convention check in FilterIntoJoinRule\n\nAlso tuned nestedloop join cost model to give it some penalty to favor\nnon-nestedloop joins.\n\nClose #1889", "committedDate": "2020-04-14T00:37:15Z", "type": "commit"}, {"oid": "e22565c9e8e8eeb0b47bc1814a5db09c827e9995", "url": "https://github.com/apache/calcite/commit/e22565c9e8e8eeb0b47bc1814a5db09c827e9995", "message": "[CALCITE-3576] Remove enumerable convention check in FilterIntoJoinRule\n\nAlso tuned nestedloop join cost model to give it some penalty to favor\nnon-nestedloop joins.\n\nClose #1889", "committedDate": "2020-04-14T00:37:15Z", "type": "forcePushed"}]}