{"pr_number": 9895, "pr_title": "Use the new func registry for the _values and unnest functions.", "pr_createdAt": "2020-04-24T11:27:44Z", "pr_url": "https://github.com/crate/crate/pull/9895", "timeline": [{"oid": "09cee198b3c6e85b8723fc71545eaa8f890625e3", "url": "https://github.com/crate/crate/commit/09cee198b3c6e85b8723fc71545eaa8f890625e3", "message": "Use the new func registry for the unnest function.", "committedDate": "2020-04-24T13:20:39Z", "type": "forcePushed"}, {"oid": "22c8b5f05176455ff4359cd2b9471e546e59d929", "url": "https://github.com/crate/crate/commit/22c8b5f05176455ff4359cd2b9471e546e59d929", "message": "Use the new func registry for the unnest function.", "committedDate": "2020-04-24T14:34:46Z", "type": "forcePushed"}, {"oid": "c3006739c69c6323ed9526e4593595e2e5af1b3c", "url": "https://github.com/crate/crate/commit/c3006739c69c6323ed9526e4593595e2e5af1b3c", "message": "Use the new func registry for the unnest function.", "committedDate": "2020-04-28T13:47:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY4MzQxNw==", "url": "https://github.com/crate/crate/pull/9895#discussion_r416683417", "bodyText": "Could we use functions.getQualified(ValuesFunction.SIGNATURE, Symbols.typeView(arrays)) instead? Looks like at this point all arguments are already validated and we could avoid signature matching...", "author": "seut", "createdAt": "2020-04-28T14:57:47Z", "path": "sql/src/main/java/io/crate/analyze/relations/RelationAnalyzer.java", "diffHunk": "@@ -708,9 +709,17 @@ public AnalyzedRelation visitValues(Values values, StatementAnalysisContext cont\n                 columnValues\n             ));\n         }\n-        FunctionIdent functionIdent = new FunctionIdent(ValuesFunction.NAME, Symbols.typeView(arrays));\n-        FunctionImplementation implementation = functions.getQualified(functionIdent);\n-        Function function = new Function(implementation.info(), arrays);\n+\n+        FunctionImplementation implementation = functions.resolveBuiltInFunctionBySignature(", "originalCommit": "68decb6eaf61c153f257f79ff2dc2b92953eaeb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjgwOTk2Mw==", "url": "https://github.com/crate/crate/pull/9895#discussion_r416809963", "bodyText": "\ud83d\udc4d sure, it makes more sense!", "author": "kovrus", "createdAt": "2020-04-28T17:53:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY4MzQxNw=="}], "type": "inlineReview"}, {"oid": "26c8e90a1433a7830de5552232603e80f26617c2", "url": "https://github.com/crate/crate/commit/26c8e90a1433a7830de5552232603e80f26617c2", "message": "Use the new func registry for the _values function.", "committedDate": "2020-04-29T11:41:12Z", "type": "commit"}, {"oid": "0791fce3e128f2d36694fd5e41537fb5eba2a4eb", "url": "https://github.com/crate/crate/commit/0791fce3e128f2d36694fd5e41537fb5eba2a4eb", "message": "Use the new func registry for the unnest function.", "committedDate": "2020-04-29T11:41:12Z", "type": "commit"}, {"oid": "0791fce3e128f2d36694fd5e41537fb5eba2a4eb", "url": "https://github.com/crate/crate/commit/0791fce3e128f2d36694fd5e41537fb5eba2a4eb", "message": "Use the new func registry for the unnest function.", "committedDate": "2020-04-29T11:41:12Z", "type": "forcePushed"}]}