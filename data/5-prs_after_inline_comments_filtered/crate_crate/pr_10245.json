{"pr_number": 10245, "pr_title": "Add doc-value aggregator for min aggregation", "pr_createdAt": "2020-07-17T13:50:22Z", "pr_url": "https://github.com/crate/crate/pull/10245", "timeline": [{"oid": "033a27f2966802811485645058655ad06a724d66", "url": "https://github.com/crate/crate/commit/033a27f2966802811485645058655ad06a724d66", "message": "Add doc-value aggregator for min aggregation\n\n    Q: select min(duration) from uservisits\n    C: 1\n    | Version |         Mean \u00b1    Stdev |        Min |     Median |         Q3 |        Max |\n    |   V1    |       67.925 \u00b1   46.711 |     51.515 |     64.499 |     67.515 |   1100.817 |\n    |   V2    |       24.338 \u00b1   19.621 |     19.274 |     21.725 |     23.292 |    443.536 |\n    \u251c---------\u2534-------------------------\u2534------------\u2534------------\u2534------------\u2534------------\u2518\n    |               -  94.48%                           -  99.22%\n    There is a 100.00% probability that the observed difference is not random, and the best estimate of that difference is 94.48%\n    The test has statistical significance\n\n    Q: select min(\"adRevenue\") from uservisits\n    C: 1\n    | Version |         Mean \u00b1    Stdev |        Min |     Median |         Q3 |        Max |\n    |   V1    |       70.576 \u00b1   14.037 |     58.433 |     69.340 |     71.356 |    361.102 |\n    |   V2    |       32.801 \u00b1    7.910 |     21.266 |     34.532 |     36.867 |    129.560 |\n    \u251c---------\u2534-------------------------\u2534------------\u2534------------\u2534------------\u2534------------\u2518\n    |               -  73.08%                           -  67.02%\n    There is a 100.00% probability that the observed difference is not random, and the best estimate of that difference is 73.08%\n    The test has statistical significance", "committedDate": "2020-07-17T13:46:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ1NjIzMw==", "url": "https://github.com/crate/crate/pull/10245#discussion_r456456233", "bodyText": "The value defaulted to 0, so if the table only contained negative values the result would have been null, because each value would have been smaller than 0 and it would have assumed that there was no value at all.\nNo change entry or so because the max aggregate change wasn't released yet.", "author": "mfussenegger", "createdAt": "2020-07-17T13:52:26Z", "path": "server/src/main/java/io/crate/execution/engine/aggregation/impl/MaximumAggregation.java", "diffHunk": "@@ -87,7 +87,7 @@ public LongMax(String columnName, DataType<?> partialType) {\n \n         @Override\n         public MutableLong initialState() {\n-            return new MutableLong();\n+            return new MutableLong(Long.MIN_VALUE);", "originalCommit": "033a27f2966802811485645058655ad06a724d66", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}