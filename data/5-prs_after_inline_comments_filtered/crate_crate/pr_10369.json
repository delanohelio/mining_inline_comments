{"pr_number": 10369, "pr_title": "Add doc-values aggregator for the count(v) aggregation.", "pr_createdAt": "2020-08-13T13:24:25Z", "pr_url": "https://github.com/crate/crate/pull/10369", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTk4NDkxMw==", "url": "https://github.com/crate/crate/pull/10369#discussion_r469984913", "bodyText": "Could we also optimize the string type case?", "author": "mfussenegger", "createdAt": "2020-08-13T14:16:15Z", "path": "server/src/main/java/io/crate/execution/engine/aggregation/impl/CountAggregation.java", "diffHunk": "@@ -261,4 +284,51 @@ public LongState removeFromAggregatedState(RamAccounting ramAccounting,\n         }\n         return previousAggState;\n     }\n+\n+    @Override\n+    public DocValueAggregator<?> getDocValueAggregator(List<DataType<?>> argumentTypes,\n+                                                       List<MappedFieldType> fieldTypes) {", "originalCommit": "24ad1614a65c3a52f7b5e565ba662dfe595b0ad5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTk5MDM3NQ==", "url": "https://github.com/crate/crate/pull/10369#discussion_r469990375", "bodyText": "Yes, I was looking into it because of the rest StringAgg, ArrayAgg and CollectAgg, I was planning to do it as a separate step, but can add it here as well.", "author": "kovrus", "createdAt": "2020-08-13T14:23:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTk4NDkxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTk5MjkyNg==", "url": "https://github.com/crate/crate/pull/10369#discussion_r469992926", "bodyText": "Also fine to follow up on it later.", "author": "mfussenegger", "createdAt": "2020-08-13T14:26:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTk4NDkxMw=="}], "type": "inlineReview"}, {"oid": "b25b3f81cef65c06ade594867f3590da510cebc9", "url": "https://github.com/crate/crate/commit/b25b3f81cef65c06ade594867f3590da510cebc9", "message": "fixup! Add doc-values aggregator for the count(v) aggregation.", "committedDate": "2020-08-13T14:51:51Z", "type": "forcePushed"}, {"oid": "d95d300c6c528ec3f030f14035daea7b846a936d", "url": "https://github.com/crate/crate/commit/d95d300c6c528ec3f030f14035daea7b846a936d", "message": "Add doc-values aggregator for the count(v) aggregation.\n\nIt improves the performance of the global standard deviation aggregations.\nSee https://github.com/crate/crate/pull/10048 for more information", "committedDate": "2020-08-13T15:19:06Z", "type": "commit"}, {"oid": "d95d300c6c528ec3f030f14035daea7b846a936d", "url": "https://github.com/crate/crate/commit/d95d300c6c528ec3f030f14035daea7b846a936d", "message": "Add doc-values aggregator for the count(v) aggregation.\n\nIt improves the performance of the global standard deviation aggregations.\nSee https://github.com/crate/crate/pull/10048 for more information", "committedDate": "2020-08-13T15:19:06Z", "type": "forcePushed"}, {"oid": "886235bdf4e89608ab599c8884be98f50d82dc79", "url": "https://github.com/crate/crate/commit/886235bdf4e89608ab599c8884be98f50d82dc79", "message": "Merge branch 'master' into r/count-doc-values-aggregator", "committedDate": "2020-08-13T16:16:01Z", "type": "commit"}]}