{"pr_number": 10105, "pr_title": "Simplify/Optimize BlobStoreRepository and related classes", "pr_createdAt": "2020-06-19T12:41:44Z", "pr_url": "https://github.com/crate/crate/pull/10105", "timeline": [{"oid": "e33b57a7640a0ed2654b185a1f878ae370b162ff", "url": "https://github.com/crate/crate/commit/e33b57a7640a0ed2654b185a1f878ae370b162ff", "message": "Optimize restore shard operation", "committedDate": "2020-06-19T12:42:50Z", "type": "commit"}, {"oid": "f2fd96ce742d1835ee73d3275d2078ca506e0c22", "url": "https://github.com/crate/crate/commit/f2fd96ce742d1835ee73d3275d2078ca506e0c22", "message": "Remove unused code from BlobStoreRepository", "committedDate": "2020-06-19T12:42:50Z", "type": "commit"}, {"oid": "7b334f522181f0d6b0db74e0577f2540c11efc9d", "url": "https://github.com/crate/crate/commit/7b334f522181f0d6b0db74e0577f2540c11efc9d", "message": "Simplify BlobStoreRepository\n\nBased on https://github.com/elastic/elasticsearch/pull/42578\nand https://github.com/elastic/elasticsearch/pull/42833", "committedDate": "2020-06-19T12:42:50Z", "type": "forcePushed"}, {"oid": "f743c8758c1844e68823c0564d367934c0495ac4", "url": "https://github.com/crate/crate/commit/f743c8758c1844e68823c0564d367934c0495ac4", "message": "Simplify BlobStoreRepository\n\nBased on https://github.com/elastic/elasticsearch/pull/42578\nand https://github.com/elastic/elasticsearch/pull/42833", "committedDate": "2020-06-19T13:22:37Z", "type": "commit"}, {"oid": "0a6946c684bf6d5463f585a87298fc0ddfe2c607", "url": "https://github.com/crate/crate/commit/0a6946c684bf6d5463f585a87298fc0ddfe2c607", "message": "Remove unused code in BlobStoreRepository", "committedDate": "2020-06-19T13:22:37Z", "type": "commit"}, {"oid": "0a6946c684bf6d5463f585a87298fc0ddfe2c607", "url": "https://github.com/crate/crate/commit/0a6946c684bf6d5463f585a87298fc0ddfe2c607", "message": "Remove unused code in BlobStoreRepository", "committedDate": "2020-06-19T13:22:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1NTkxOQ==", "url": "https://github.com/crate/crate/pull/10105#discussion_r442855919", "bodyText": "Just as input for further backports. When adapting the style maybe stick to our usual formats. Either 1 line per argument or all arguments in one line.", "author": "mfussenegger", "createdAt": "2020-06-19T13:57:15Z", "path": "server/src/main/java/org/elasticsearch/index/shard/StoreRecovery.java", "diffHunk": "@@ -464,7 +464,8 @@ private void restore(final IndexShard indexShard, final Repository repository, f\n                 snapshotShardId = new ShardId(indexName, IndexMetaData.INDEX_UUID_NA_VALUE, shardId.id());\n             }\n             final IndexId indexId = repository.getRepositoryData().resolveIndexId(indexName);\n-            repository.restoreShard(indexShard, restoreSource.snapshot().getSnapshotId(), restoreSource.version(), indexId, snapshotShardId, indexShard.recoveryState());\n+            repository.restoreShard(indexShard.store(), restoreSource.snapshot().getSnapshotId(),\n+                                    restoreSource.version(), indexId, snapshotShardId, indexShard.recoveryState());", "originalCommit": "0a6946c684bf6d5463f585a87298fc0ddfe2c607", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b086bf830940b8611adc733b5151934a885b3ca6", "url": "https://github.com/crate/crate/commit/b086bf830940b8611adc733b5151934a885b3ca6", "message": "Merge branch 'master' into mkleen/simplify_blobstore_repo", "committedDate": "2020-06-19T16:29:46Z", "type": "commit"}]}