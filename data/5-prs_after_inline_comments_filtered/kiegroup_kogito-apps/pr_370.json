{"pr_number": 370, "pr_title": "FAI-241: Model definition endpoint - UI changes", "pr_createdAt": "2020-08-05T13:19:15Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/370", "timeline": [{"oid": "41758c544601dfcefc9d9ca2d47252488b5a8b55", "url": "https://github.com/kiegroup/kogito-apps/commit/41758c544601dfcefc9d9ca2d47252488b5a8b55", "message": "FAI-241: Model definition endpoint - UI changes", "committedDate": "2020-08-05T13:22:23Z", "type": "forcePushed"}, {"oid": "afbce0d3afd028b0fcf94521240d72c682c09ac7", "url": "https://github.com/kiegroup/kogito-apps/commit/afbce0d3afd028b0fcf94521240d72c682c09ac7", "message": "FAI-241: Model definition endpoint - UI changes", "committedDate": "2020-08-05T13:25:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIxOTEzMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/370#discussion_r466219132", "bodyText": "add TODO comment to replace null null?", "author": "r00ta", "createdAt": "2020-08-06T08:01:21Z", "path": "trusty/trusty-service/src/main/java/org/kie/kogito/trusty/service/api/ExecutionsApiV1.java", "diffHunk": "@@ -142,4 +146,52 @@ private OffsetDateTime parseParameterDate(String date) {\n \n         return ZonedDateTime.parse(date, DateTimeFormatter.ISO_OFFSET_DATE_TIME).toOffsetDateTime();\n     }\n+\n+    /**\n+     * Gets the model associated with an execution.\n+     *\n+     * @param executionId The execution ID.\n+     * @return The model associated with the execution.\n+     */\n+    @GET\n+    @Path(\"/{executionId}/model\")\n+    @APIResponses(value = {\n+            @APIResponse(description = \"Gets the model associated with an execution.\", responseCode = \"200\", content = @Content(mediaType = MediaType.TEXT_PLAIN, schema = @Schema(type = SchemaType.STRING))),\n+            @APIResponse(description = \"Bad Request\", responseCode = \"400\", content = @Content(mediaType = MediaType.TEXT_PLAIN))\n+    }\n+    )\n+    @Operation(summary = \"Gets the model associated with an execution.\")\n+    @Produces(MediaType.TEXT_PLAIN)\n+    public Response getModel(\n+            @Parameter(\n+                    name = \"executionId\",\n+                    description = \"The execution ID.\",\n+                    required = true,\n+                    schema = @Schema(implementation = String.class)\n+            ) @PathParam(\"executionId\") String executionId) {\n+        return handleModelRequest(executionId);\n+    }\n+\n+    private Response handleModelRequest(String executionId) {\n+        return retrieveModel(executionId)\n+                .map(definition -> Response.ok(definition).build())\n+                .orElseGet(() -> Response.status(Response.Status.BAD_REQUEST.getStatusCode()).build());\n+    }\n+\n+    private Optional<String> retrieveModel(String executionId) {\n+        try {\n+            Optional<Decision> decision = retrieveDecision(executionId);\n+            return decision.map(d -> executionService.getModelById(ModelIdCreator.makeIdentifier(null, null, null, d.getExecutedModelName(), d.getExecutedModelNamespace())));", "originalCommit": "afbce0d3afd028b0fcf94521240d72c682c09ac7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjI4NjgyMw==", "url": "https://github.com/kiegroup/kogito-apps/pull/370#discussion_r466286823", "bodyText": "Done (in new commit).", "author": "manstis", "createdAt": "2020-08-06T09:35:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIxOTEzMg=="}], "type": "inlineReview"}, {"oid": "496ffb298c008b46093627f6e94a1d327fb6659c", "url": "https://github.com/kiegroup/kogito-apps/commit/496ffb298c008b46093627f6e94a1d327fb6659c", "message": "Add comment regarding GAV use in constructing modelId", "committedDate": "2020-08-06T09:34:59Z", "type": "forcePushed"}, {"oid": "6a48ecc9ce0101a1d90a0a645abee7113aee35b4", "url": "https://github.com/kiegroup/kogito-apps/commit/6a48ecc9ce0101a1d90a0a645abee7113aee35b4", "message": "FAI-241: Model definition endpoint - UI changes", "committedDate": "2020-08-07T07:18:41Z", "type": "commit"}, {"oid": "6a48ecc9ce0101a1d90a0a645abee7113aee35b4", "url": "https://github.com/kiegroup/kogito-apps/commit/6a48ecc9ce0101a1d90a0a645abee7113aee35b4", "message": "FAI-241: Model definition endpoint - UI changes", "committedDate": "2020-08-07T07:18:41Z", "type": "forcePushed"}]}