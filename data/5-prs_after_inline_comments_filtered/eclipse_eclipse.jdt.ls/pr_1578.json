{"pr_number": 1578, "pr_title": "Refresh the project when updating the referenced libraries", "pr_createdAt": "2020-10-21T08:20:09Z", "pr_url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1578", "timeline": [{"oid": "eb17833122072ccef9294121277e635be3628e0b", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/eb17833122072ccef9294121277e635be3628e0b", "message": "Refresh the project when updating the referenced libraries\n\nSigned-off-by: Sheng Chen <sheche@microsoft.com>", "committedDate": "2020-10-21T08:17:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY2NjQ5Mw==", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1578#discussion_r510666493", "bodyText": "When the resource in jdt is out of sync with the local file system, InvisibleProjectBuildSupport#fileChanged also invoke resource.refreshLocal to sync the model, what's the purpose of this new line?", "author": "testforstephen", "createdAt": "2020-10-23T06:40:55Z", "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/ProjectUtils.java", "diffHunk": "@@ -349,6 +349,7 @@ public static void updateBinaries(IJavaProject javaProject, Map<Path, IPath> lib\n \t\tif (!Arrays.equals(rawClasspath, newClasspath)) {\n \t\t\tjavaProject.setRawClasspath(newClasspath, monitor);\n \t\t}\n+\t\tjavaProject.getProject().refreshLocal(IResource.DEPTH_ZERO, monitor);", "originalCommit": "eb17833122072ccef9294121277e635be3628e0b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4Nzg3OQ==", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1578#discussion_r510687879", "bodyText": "This added line does not fully solved the problem, I'll update the PR later", "author": "jdneo", "createdAt": "2020-10-23T07:28:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY2NjQ5Mw=="}], "type": "inlineReview"}, {"oid": "d80a863674d8e577298dde10c26f5ef660537c66", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/d80a863674d8e577298dde10c26f5ef660537c66", "message": "Use refreshExternalArchives\n\nSigned-off-by: Sheng Chen <sheche@microsoft.com>", "committedDate": "2020-10-23T07:30:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk3NTY5MQ==", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1578#discussion_r511975691", "bodyText": "In the commit viewer, I noticed this line has an extraneous whitespace (extra tabs?). I would probably fix this just before merging.", "author": "rgrunber", "createdAt": "2020-10-26T13:53:02Z", "path": "org.eclipse.jdt.ls.tests/src/org/eclipse/jdt/ls/core/internal/managers/InvisibleProjectBuildSupportTest.java", "diffHunk": "@@ -429,4 +437,30 @@ public void testImportReferencedLibrariesConfiguration() throws Exception {\n \t\t\tassertEquals(\"Configuration with sources\", libraries, preferences.getReferencedLibraries());\n \t\t}\n \t}\n+\n+\t@Test\n+\tpublic void testUpdateReferencedLibraries() throws Exception {\n+\t\tIProject project = copyAndImportFolder(\"singlefile/simple\", \"src/App.java\");\n+\t\tNavigateToDefinitionHandler handler = new NavigateToDefinitionHandler(preferenceManager);\n+\t\tString uri = ClassFileUtil.getURI(project, \"App\");\n+\t\tTextDocumentIdentifier identifier = new TextDocumentIdentifier(uri);\n+\t\tList<? extends Location> definitions = handler.definition(new TextDocumentPositionParams(identifier, new Position(0, 13)), monitor);\n+\t\t", "originalCommit": "d80a863674d8e577298dde10c26f5ef660537c66", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5c8c82a19ae62829f975c80db001954bd1d18737", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/5c8c82a19ae62829f975c80db001954bd1d18737", "message": "Correct the format\n\nSigned-off-by: Sheng Chen <sheche@microsoft.com>", "committedDate": "2020-10-27T01:37:43Z", "type": "commit"}]}