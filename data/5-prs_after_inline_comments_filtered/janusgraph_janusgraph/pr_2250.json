{"pr_number": 2250, "pr_title": "Remove LoggingSchemaMaker & enable logging option for schema makers", "pr_createdAt": "2020-11-15T02:52:49Z", "pr_url": "https://github.com/JanusGraph/janusgraph/pull/2250", "timeline": [{"oid": "024045f940cbfa0ed1eef1436d879ef48cb7ae71", "url": "https://github.com/JanusGraph/janusgraph/commit/024045f940cbfa0ed1eef1436d879ef48cb7ae71", "message": "Remove LoggingSchemaMaker & enable logging option for schema makers\n\nThis commit reorganizes packages of schema makers, removes\nLoggingSchemaMaker and adds logging option for schema makers.\n\nSigned-off-by: Boxuan Li <liboxuan@connect.hku.hk>", "committedDate": "2020-11-15T06:55:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTk5MTY4OQ==", "url": "https://github.com/JanusGraph/janusgraph/pull/2250#discussion_r525991689", "bodyText": "(nitpick) I would expand the description a bit to include that this logging applies to the schema makers /  schema operations. Also, all descriptions here seem to be complete sentences so they should start with a capital latter and end with a \".\".", "author": "FlorianHockmann", "createdAt": "2020-11-18T10:51:57Z", "path": "janusgraph-core/src/main/java/org/janusgraph/graphdb/configuration/GraphDatabaseConfiguration.java", "diffHunk": "@@ -318,10 +316,12 @@ public boolean apply(@Nullable String s) {\n             put(\"ignore-prop\", IgnorePropertySchemaMaker.INSTANCE);\n             put(\"default\", JanusGraphDefaultSchemaMaker.INSTANCE);\n             put(\"tp3\", Tp3DefaultSchemaMaker.INSTANCE);\n-            put(\"logging\", LoggingSchemaMaker.DEFAULT_INSTANCE);\n         }}\n     );\n \n+    public static final ConfigOption<Boolean> SCHEMA_MAKER_LOGGING = new ConfigOption<>(SCHEMA_NS, \"logging\",\n+            \"whether logging is enabled\", ConfigOption.Type.MASKABLE, false);", "originalCommit": "024045f940cbfa0ed1eef1436d879ef48cb7ae71", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAxMjUwMQ==", "url": "https://github.com/JanusGraph/janusgraph/pull/2250#discussion_r526012501", "bodyText": "Wouldn't it make sense to add the information to this log message that the edge label will now be created?", "author": "FlorianHockmann", "createdAt": "2020-11-18T11:25:27Z", "path": "janusgraph-core/src/main/java/org/janusgraph/core/schema/JanusGraphDefaultSchemaMaker.java", "diffHunk": "@@ -31,30 +33,96 @@\n public class JanusGraphDefaultSchemaMaker implements DefaultSchemaMaker {\n \n     public static final DefaultSchemaMaker INSTANCE = new JanusGraphDefaultSchemaMaker();\n+    private static final Logger log = LoggerFactory.getLogger(JanusGraphDefaultSchemaMaker.class);\n+\n+    private boolean loggingEnabled;\n \n     private JanusGraphDefaultSchemaMaker() {\n     }\n \n+    @Override\n+    public void enableLogging(Boolean enabled) {\n+        if (Boolean.TRUE.equals(enabled)) {\n+            loggingEnabled = true;\n+        }\n+    }\n+\n     @Override\n     public Cardinality defaultPropertyCardinality(String key) {\n         return Cardinality.SINGLE;\n     }\n \n+    @Override\n+    public EdgeLabel makeEdgeLabel(EdgeLabelMaker factory) {\n+        logWarn(\"Edge Label with given name does not exist: {}\", factory.getName());", "originalCommit": "024045f940cbfa0ed1eef1436d879ef48cb7ae71", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAyMTE1MA==", "url": "https://github.com/JanusGraph/janusgraph/pull/2250#discussion_r526021150", "bodyText": "Make sense. I simply didn't change the log message introduced by #1918 so that behavior wouldn't change. But anyway, it would be better to improve the log message as well.", "author": "li-boxuan", "createdAt": "2020-11-18T11:40:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAxMjUwMQ=="}], "type": "inlineReview"}, {"oid": "0700a24ed9318138fd7a65875795323e3c3bb459", "url": "https://github.com/JanusGraph/janusgraph/commit/0700a24ed9318138fd7a65875795323e3c3bb459", "message": "Remove LoggingSchemaMaker & enable logging option for schema makers\n\nThis commit reorganizes packages of schema makers, removes\nLoggingSchemaMaker and adds logging option for schema makers.\n\nSigned-off-by: Boxuan Li <liboxuan@connect.hku.hk>", "committedDate": "2020-11-20T14:03:22Z", "type": "forcePushed"}, {"oid": "e202398f767802d45b19e3b25147efcb55cdd1c4", "url": "https://github.com/JanusGraph/janusgraph/commit/e202398f767802d45b19e3b25147efcb55cdd1c4", "message": "Remove LoggingSchemaMaker & enable logging option for schema makers\n\nThis commit reorganizes packages of schema makers, removes\nLoggingSchemaMaker and adds logging option for schema makers.\n\nSigned-off-by: Boxuan Li <liboxuan@connect.hku.hk>", "committedDate": "2020-11-20T15:40:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc5NzE3OQ==", "url": "https://github.com/JanusGraph/janusgraph/pull/2250#discussion_r527797179", "bodyText": "(nitpick) I think the  \"'\" should be backticks to properly render this as inline code in markdown.", "author": "FlorianHockmann", "createdAt": "2020-11-20T16:12:14Z", "path": "janusgraph-core/src/main/java/org/janusgraph/graphdb/configuration/GraphDatabaseConfiguration.java", "diffHunk": "@@ -318,10 +316,15 @@ public boolean apply(@Nullable String s) {\n             put(\"ignore-prop\", IgnorePropertySchemaMaker.INSTANCE);\n             put(\"default\", JanusGraphDefaultSchemaMaker.INSTANCE);\n             put(\"tp3\", Tp3DefaultSchemaMaker.INSTANCE);\n-            put(\"logging\", LoggingSchemaMaker.DEFAULT_INSTANCE);\n         }}\n     );\n \n+    public static final ConfigOption<Boolean> SCHEMA_MAKER_LOGGING = new ConfigOption<>(SCHEMA_NS, \"logging\",\n+            \"Controls whether logging is enabled for schema makers. This only takes effect if you set 'schema.default' \" +\n+            \"to 'default' or 'ignore-prop'. For 'default' schema maker, warning messages will be logged before schema types \" +", "originalCommit": "e202398f767802d45b19e3b25147efcb55cdd1c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8b2510e4c22ac48da6d5d36068696c5e1596e648", "url": "https://github.com/JanusGraph/janusgraph/commit/8b2510e4c22ac48da6d5d36068696c5e1596e648", "message": "Remove LoggingSchemaMaker & enable logging option for schema makers\n\nThis commit reorganizes packages of schema makers, removes\nLoggingSchemaMaker and adds logging option for schema makers.\n\nSigned-off-by: Boxuan Li <liboxuan@connect.hku.hk>", "committedDate": "2020-11-21T03:51:29Z", "type": "commit"}, {"oid": "8b2510e4c22ac48da6d5d36068696c5e1596e648", "url": "https://github.com/JanusGraph/janusgraph/commit/8b2510e4c22ac48da6d5d36068696c5e1596e648", "message": "Remove LoggingSchemaMaker & enable logging option for schema makers\n\nThis commit reorganizes packages of schema makers, removes\nLoggingSchemaMaker and adds logging option for schema makers.\n\nSigned-off-by: Boxuan Li <liboxuan@connect.hku.hk>", "committedDate": "2020-11-21T03:51:29Z", "type": "forcePushed"}]}