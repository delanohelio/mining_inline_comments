{"pr_number": 2004, "pr_title": "Cleanup files", "pr_createdAt": "2020-03-02T21:16:10Z", "pr_url": "https://github.com/JanusGraph/janusgraph/pull/2004", "timeline": [{"oid": "8a4116826c5cd5faed984d8708a466f2a59a9aa0", "url": "https://github.com/JanusGraph/janusgraph/commit/8a4116826c5cd5faed984d8708a466f2a59a9aa0", "message": "Cleanup files\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>", "committedDate": "2020-03-02T21:16:33Z", "type": "forcePushed"}, {"oid": "08f044d3e6ea51fb3b5ecdd96322f1251c248e1f", "url": "https://github.com/JanusGraph/janusgraph/commit/08f044d3e6ea51fb3b5ecdd96322f1251c248e1f", "message": "Cleanup files\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>", "committedDate": "2020-03-02T21:16:48Z", "type": "forcePushed"}, {"oid": "21129103d1b5dde77795a59e18ecb0e4709bc320", "url": "https://github.com/JanusGraph/janusgraph/commit/21129103d1b5dde77795a59e18ecb0e4709bc320", "message": "Cleanup files\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>", "committedDate": "2020-03-03T13:19:18Z", "type": "forcePushed"}, {"oid": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb", "url": "https://github.com/JanusGraph/janusgraph/commit/43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb", "message": "Cleanup files\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>", "committedDate": "2020-03-03T21:20:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzNzY2NA==", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387437664", "bodyText": "As far as I remember (not sure) String.format is slower than concatenation due to regex (which is slow).\nI would just rewrite it like: sb.append(\">\").append(levels[i - 1]).append(\": \").append(counts[i]).append(\"; \").append(System.lineSeparator()); to make sure that we have the best performance here. Actually string concatanation is compiled into a sequence of .append by the compiler but I am not sure how it compiles string concatanations which a passed into string builder. So, as for me the safest code would be to write sequance of .append chain here instead of plain string concatanations or String.format.", "author": "porunov", "createdAt": "2020-03-04T03:59:27Z", "path": "janusgraph-inmemory/src/main/java/org/janusgraph/diskstorage/inmemory/InMemoryKeyColumnValueStoreFragmentationReport.java", "diffHunk": "@@ -215,11 +215,11 @@ private void printHistogram(StringBuilder sb, int[] levels, int[] counts) {\n         int i;\n         for (i = 0; i < levels.length; i++) {\n             if (counts[i] > 0) {\n-                sb.append(\"<=\" + levels[i] + \": \" + counts[i] + \"; \");\n+                sb.append(String.format(\"<=%d: %d; \", levels[i], counts[i]));\n             }\n         }\n         if (counts[i] > 0) {\n-            sb.append(\">\" + levels[i - 1] + \": \" + counts[i] + \"; \").append(System.lineSeparator());\n+            sb.append(String.format(\">%d: %d; \", levels[i - 1], counts[i])).append(System.lineSeparator());", "originalCommit": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzNzc3MA==", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387437770", "bodyText": "Same here. I would use sequence of .append instead of String.format", "author": "porunov", "createdAt": "2020-03-04T04:00:06Z", "path": "janusgraph-inmemory/src/main/java/org/janusgraph/diskstorage/inmemory/InMemoryKeyColumnValueStoreFragmentationReport.java", "diffHunk": "@@ -215,11 +215,11 @@ private void printHistogram(StringBuilder sb, int[] levels, int[] counts) {\n         int i;\n         for (i = 0; i < levels.length; i++) {\n             if (counts[i] > 0) {\n-                sb.append(\"<=\" + levels[i] + \": \" + counts[i] + \"; \");\n+                sb.append(String.format(\"<=%d: %d; \", levels[i], counts[i]));", "originalCommit": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzNzk5Mw==", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387437993", "bodyText": "Same here. Try to avoid usage of String.format", "author": "porunov", "createdAt": "2020-03-04T04:01:10Z", "path": "janusgraph-examples/example-common/src/main/java/org/janusgraph/example/JanusGraphApp.java", "diffHunk": "@@ -219,10 +219,12 @@ protected String createSchemaRequest() {\n \n         // mixed indexes\n         if (useMixedIndex) {\n-            s.append(\"management.buildIndex(\\\"vAge\\\", Vertex.class).addKey(age).buildMixedIndex(\\\"\" + mixedIndexConfigName\n-                    + \"\\\"); \");\n-            s.append(\"management.buildIndex(\\\"eReasonPlace\\\", Edge.class).addKey(reason).addKey(place).buildMixedIndex(\\\"\"\n-                    + mixedIndexConfigName + \"\\\"); \");\n+            s.append(String.format(", "originalCommit": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzOTY1Nw==", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387439657", "bodyText": "I would also moved this whole class into janusgraph-test because it is used only for tests.", "author": "porunov", "createdAt": "2020-03-04T04:10:11Z", "path": "janusgraph-core/src/main/java/org/janusgraph/util/datastructures/RandomRemovalList.java", "diffHunk": "@@ -134,7 +134,10 @@ public boolean contains(Object o) {\n     public boolean containsAll(Collection<?> c) {", "originalCommit": "43b2ed0f66a2fb68c5a0313db4a4d6e46c15efbb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk1ODU2MQ==", "url": "https://github.com/JanusGraph/janusgraph/pull/2004#discussion_r387958561", "bodyText": "I removed the class complete.", "author": "farodin91", "createdAt": "2020-03-04T21:56:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzOTY1Nw=="}], "type": "inlineReview"}, {"oid": "c206e4e25484b04dffc39997372dc851240b93e7", "url": "https://github.com/JanusGraph/janusgraph/commit/c206e4e25484b04dffc39997372dc851240b93e7", "message": "Cleanup files\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>", "committedDate": "2020-03-04T21:47:58Z", "type": "commit"}, {"oid": "c206e4e25484b04dffc39997372dc851240b93e7", "url": "https://github.com/JanusGraph/janusgraph/commit/c206e4e25484b04dffc39997372dc851240b93e7", "message": "Cleanup files\n\nSigned-off-by: Jan Jansen <jan.jansen@gdata.de>", "committedDate": "2020-03-04T21:47:58Z", "type": "forcePushed"}]}