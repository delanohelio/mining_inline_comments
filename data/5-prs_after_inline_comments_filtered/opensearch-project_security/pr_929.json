{"pr_number": 929, "pr_title": "Refactor Resolved", "pr_createdAt": "2020-12-24T04:26:08Z", "pr_url": "https://github.com/opensearch-project/security/pull/929", "timeline": [{"oid": "a4090f72dfe3ce02c49d81d37aa65ff44c4309ab", "url": "https://github.com/opensearch-project/security/commit/a4090f72dfe3ce02c49d81d37aa65ff44c4309ab", "message": "Drop Serializable and Writeable from Resolved as it is never transferred over the wire or persisted", "committedDate": "2020-12-24T04:59:13Z", "type": "commit"}, {"oid": "a4090f72dfe3ce02c49d81d37aa65ff44c4309ab", "url": "https://github.com/opensearch-project/security/commit/a4090f72dfe3ce02c49d81d37aa65ff44c4309ab", "message": "Drop Serializable and Writeable from Resolved as it is never transferred over the wire or persisted", "committedDate": "2020-12-24T04:59:13Z", "type": "forcePushed"}, {"oid": "ba296b07ea88403bc82d28458752b7008517228e", "url": "https://github.com/opensearch-project/security/commit/ba296b07ea88403bc82d28458752b7008517228e", "message": "Refactor Resolved.Builder to ResolvedIndicesProvider", "committedDate": "2021-01-20T23:57:35Z", "type": "commit"}, {"oid": "ba296b07ea88403bc82d28458752b7008517228e", "url": "https://github.com/opensearch-project/security/commit/ba296b07ea88403bc82d28458752b7008517228e", "message": "Refactor Resolved.Builder to ResolvedIndicesProvider", "committedDate": "2021-01-20T23:57:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjM1NTgyMQ==", "url": "https://github.com/opensearch-project/security/pull/929#discussion_r566355821", "bodyText": "Why we choose MultiKey to use here?", "author": "cliu123", "createdAt": "2021-01-28T19:33:51Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/security/resolver/IndexResolverReplacer.java", "diffHunk": "@@ -158,106 +152,165 @@ private static final boolean isLocalAll(final String... requestedPatterns) {\n         return false;\n     }\n \n-    private Resolved resolveIndexPatterns(final IndicesOptions indicesOptions, final boolean enableCrossClusterResolution, final String... requestedPatterns0) {\n+    private class ResolvedIndicesProvider implements IndicesProvider {\n+        private final ImmutableSet.Builder<String> aliases;\n+        private final ImmutableSet.Builder<String> allIndices;\n+        private final ImmutableSet.Builder<String> originalRequested;\n+        private final ImmutableSet.Builder<String> remoteIndices;\n+        // set of previously resolved index requests to avoid resolving\n+        // the same index more than once while processing bulk requests\n+        private final Set<MultiKey> alreadyResolved;", "originalCommit": "ba296b07ea88403bc82d28458752b7008517228e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjQ1NzQ4OA==", "url": "https://github.com/opensearch-project/security/pull/929#discussion_r566457488", "bodyText": "As it provides the required functionality without any additional dependencies and simplifies the code.", "author": "vrozov", "createdAt": "2021-01-28T22:42:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjM1NTgyMQ=="}], "type": "inlineReview"}]}