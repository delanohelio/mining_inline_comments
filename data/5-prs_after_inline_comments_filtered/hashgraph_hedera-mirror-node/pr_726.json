{"pr_number": 726, "pr_title": "Added running_hash_version migration", "pr_createdAt": "2020-04-29T20:23:26Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/726", "timeline": [{"oid": "207809aa02b4419543dc979ecc3aacfa4c8edabf", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/207809aa02b4419543dc979ecc3aacfa4c8edabf", "message": "Migrate db to add runningHashVersion\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-29T20:18:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNDMwOQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417604309", "bodyText": "int like the schema", "author": "steven-sheehy", "createdAt": "2020-04-29T20:52:43Z", "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/domain/TopicMessage.java", "diffHunk": "@@ -44,4 +44,6 @@\n     private long sequenceNumber;\n \n     private int topicNum;\n+\n+    private long runningHashVersion;", "originalCommit": "207809aa02b4419543dc979ecc3aacfa4c8edabf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYzMDkzOA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417630938", "bodyText": "I thought that too but the transaction receipt proto returns this as long, so I opted for that and converting at write time.\nCan flip it", "author": "Nana-EC", "createdAt": "2020-04-29T21:44:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwNDMwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMDIxMw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417610213", "bodyText": "This doesn't normalize 0 to 1 in case this is deployed before R5 or when processing pre-R5 transactions during catch up.", "author": "steven-sheehy", "createdAt": "2020-04-29T21:03:35Z", "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/parser/record/RecordItemParser.java", "diffHunk": "@@ -202,7 +202,7 @@ private void insertConsensusTopicMessage(ConsensusSubmitMessageTransactionBody t\n                 Utility.timeStampInNanos(transactionRecord.getConsensusTimestamp()),\n                 transactionBody.getMessage().toByteArray(), (int) topicId.getRealmNum(),\n                 receipt.getTopicRunningHash().toByteArray(), receipt.getTopicSequenceNumber(),\n-                (int) topicId.getTopicNum());\n+                (int) topicId.getTopicNum(), receipt.getTopicRunningHashVersion());", "originalCommit": "207809aa02b4419543dc979ecc3aacfa4c8edabf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY1OTA1Nw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/726#discussion_r417659057", "bodyText": "Added normalize logic", "author": "Nana-EC", "createdAt": "2020-04-29T22:53:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMDIxMw=="}], "type": "inlineReview"}, {"oid": "5cc441880265a7923ad5ee8a9517bc75d9b68368", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/5cc441880265a7923ad5ee8a9517bc75d9b68368", "message": "Set time to May 5th, at 19:00 UTC and updated config name\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-29T21:17:34Z", "type": "commit"}, {"oid": "30c05725aa3658ca9bb5396ef5d367d9186c6ff8", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/30c05725aa3658ca9bb5396ef5d367d9186c6ff8", "message": "Address feedback on naming and constraints\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-29T22:45:53Z", "type": "commit"}, {"oid": "f3bfbfdb1fd00512156d99b79273c38e93a3dc24", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/f3bfbfdb1fd00512156d99b79273c38e93a3dc24", "message": "Merged record to entity refactor\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-29T22:50:06Z", "type": "commit"}, {"oid": "0251807ccc4fceabea84c488956ca6745e17dd36", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/0251807ccc4fceabea84c488956ca6745e17dd36", "message": "Fixed repeated runing_hash column\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-29T22:58:20Z", "type": "commit"}, {"oid": "9d9ae7310f0265e609b99db39486be0f047fdb05", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9d9ae7310f0265e609b99db39486be0f047fdb05", "message": "Removed value of topicRunningHashV2AddedTimestamp to enforce deployment time set\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-29T23:10:31Z", "type": "commit"}]}