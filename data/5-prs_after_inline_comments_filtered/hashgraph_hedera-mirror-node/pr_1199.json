{"pr_number": 1199, "pr_title": "Add Transaction Suppliers to generate HAPI transactions", "pr_createdAt": "2020-10-28T03:21:33Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199", "timeline": [{"oid": "844b4477f038feafc0b82a020d7e2ea8b7bc9071", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/844b4477f038feafc0b82a020d7e2ea8b7bc9071", "message": "Add interface for Transaction Suppliers and Account suppliers\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-28T00:10:56Z", "type": "commit"}, {"oid": "cfa3adba5cb7651a8415a98bf26c21fef200ba93", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/cfa3adba5cb7651a8415a98bf26c21fef200ba93", "message": "Add HCS basic suppliers\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-28T03:14:22Z", "type": "commit"}, {"oid": "cedc87a9e964aa2d7acd8ce5980f742c38426602", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/cedc87a9e964aa2d7acd8ce5980f742c38426602", "message": "Add sdk to datagenerator pom\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-28T03:22:23Z", "type": "commit"}, {"oid": "3948aa333cb9d0feb7662350b6716343d74ca098", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/3948aa333cb9d0feb7662350b6716343d74ca098", "message": "Add HTS Suppliers\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T04:26:45Z", "type": "commit"}, {"oid": "4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "message": "Refactor Crypto Transfer class name\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T04:31:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzMDE5NA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514330194", "bodyText": "Licenses missing from most files", "author": "steven-sheehy", "createdAt": "2020-10-29T15:03:39Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/TransactionSupplier.java", "diffHunk": "@@ -0,0 +1,10 @@\n+package com.hedera.datagenerator.sdk.supplier;\n+", "originalCommit": "4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM4OTk4MA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514389980", "bodyText": "Fixed, I think I have everything set up now to auto-generate.", "author": "ijungmann", "createdAt": "2020-10-29T16:19:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzMDE5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzMTk5OQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514331999", "bodyText": "Should probably remove logging of secrets.", "author": "steven-sheehy", "createdAt": "2020-10-29T15:05:55Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/account/AccountCreateTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package com.hedera.datagenerator.sdk.supplier.account;\n+\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+import lombok.extern.log4j.Log4j2;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountCreateTransaction;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PrivateKey;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PublicKey;\n+\n+@Builder\n+@Value\n+@Log4j2\n+public class AccountCreateTransactionSupplier implements TransactionSupplier<AccountCreateTransaction> {\n+\n+    //Required\n+    private final Ed25519PublicKey publicKey;\n+\n+    //Optional\n+    @Builder.Default\n+    private final long initialBalance = 10_000_000;\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public AccountCreateTransaction get() {\n+        return new AccountCreateTransaction()\n+                .setKey(publicKey != null ? publicKey : generateKeys())\n+                .setInitialBalance(initialBalance)\n+                .setMaxTransactionFee(maxTransactionFee)\n+                .setTransactionMemo(\"Supplier create account_\" + Instant.now());\n+    }\n+\n+    private Ed25519PublicKey generateKeys() {\n+        Ed25519PrivateKey privateKey = Ed25519PrivateKey.generate();\n+        Ed25519PublicKey publicKey = privateKey.publicKey;\n+\n+        log.debug(\"Private key = {}\", privateKey);", "originalCommit": "4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ0ODQxNQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514448415", "bodyText": "Sure, this was mainly for testing purposes so I could reuse the account without generating outside keys.  It's been removed.", "author": "ijungmann", "createdAt": "2020-10-29T17:42:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzMTk5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzMzcwMw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514333703", "bodyText": "Should probably mention mirror node generating this. Mirror node created test account at now()", "author": "steven-sheehy", "createdAt": "2020-10-29T15:07:59Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/account/AccountCreateTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package com.hedera.datagenerator.sdk.supplier.account;\n+\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+import lombok.extern.log4j.Log4j2;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountCreateTransaction;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PrivateKey;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PublicKey;\n+\n+@Builder\n+@Value\n+@Log4j2\n+public class AccountCreateTransactionSupplier implements TransactionSupplier<AccountCreateTransaction> {\n+\n+    //Required\n+    private final Ed25519PublicKey publicKey;\n+\n+    //Optional\n+    @Builder.Default\n+    private final long initialBalance = 10_000_000;\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public AccountCreateTransaction get() {\n+        return new AccountCreateTransaction()\n+                .setKey(publicKey != null ? publicKey : generateKeys())\n+                .setInitialBalance(initialBalance)\n+                .setMaxTransactionFee(maxTransactionFee)\n+                .setTransactionMemo(\"Supplier create account_\" + Instant.now());", "originalCommit": "4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU2MTM5OA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514561398", "bodyText": "Good idea, all memos should now be reworded to reflect this verbiage.", "author": "ijungmann", "createdAt": "2020-10-29T20:56:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzMzcwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzNDkzNA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514334934", "bodyText": "Would prefer all fields be built-in Java types so they can be populated dynamically from Spring Boot config. It also keeps SDK classes from leaking outside the suppliers. For example, this field should be String.", "author": "steven-sheehy", "createdAt": "2020-10-29T15:09:31Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/account/AccountCreateTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package com.hedera.datagenerator.sdk.supplier.account;\n+\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+import lombok.extern.log4j.Log4j2;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountCreateTransaction;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PrivateKey;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PublicKey;\n+\n+@Builder\n+@Value\n+@Log4j2\n+public class AccountCreateTransactionSupplier implements TransactionSupplier<AccountCreateTransaction> {\n+\n+    //Required\n+    private final Ed25519PublicKey publicKey;", "originalCommit": "4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU4NjcwMw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514586703", "bodyText": "All fields have been refactored to be Java types.", "author": "ijungmann", "createdAt": "2020-10-29T21:46:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzNDkzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzNzI4Mw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514337283", "bodyText": "Null check here is redundant as setting null has no side effects. Can just add to chaining methods.", "author": "steven-sheehy", "createdAt": "2020-10-29T15:12:32Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/account/AccountUpdateTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.hedera.datagenerator.sdk.supplier.account;\n+\n+import java.time.Duration;\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import lombok.Builder;\n+import lombok.Value;\n+import lombok.extern.log4j.Log4j2;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.account.AccountUpdateTransaction;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PublicKey;\n+\n+@Builder\n+@Value\n+@Log4j2\n+public class AccountUpdateTransactionSupplier implements TransactionSupplier<AccountUpdateTransaction> {\n+\n+    //Required\n+    private final AccountId accountId;\n+    private final Ed25519PublicKey publicKey;\n+\n+    //Optional\n+    private final AccountId proxyAccountId;\n+    @Builder.Default\n+    private final Instant expirationTime = Instant.now().plus(120, ChronoUnit.DAYS);\n+    @Builder.Default\n+    private final Duration autoRenewPeriod = Duration.ofSeconds(8000000);\n+    @Builder.Default\n+    private final boolean receiverSignatureRequired = false;\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public AccountUpdateTransaction get() {\n+        AccountUpdateTransaction transaction = new AccountUpdateTransaction()\n+                .setAccountId(accountId)\n+                .setKey(publicKey)\n+                .setReceiverSignatureRequired(receiverSignatureRequired)\n+                .setExpirationTime(expirationTime)\n+                .setAutoRenewPeriod(autoRenewPeriod)\n+                .setMaxTransactionFee(maxTransactionFee)\n+                .setTransactionMemo(\"Supplier update account_\" + Instant.now());\n+\n+        if (proxyAccountId != null) {", "originalCommit": "4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ1OTY2MQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514459661", "bodyText": "The builder set method here is internally calling accountId.toProto(), which causes an NPE when it's null.  Seems like the sdk transactions do this to all account ids and all keys at least.", "author": "ijungmann", "createdAt": "2020-10-29T17:59:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzNzI4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzODMyNQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514338325", "bodyText": "Would prefer fields sorted alphabetically within their required/optional groupings. Would also prefer an extra newline between annotated fields as it's hard to read without.", "author": "steven-sheehy", "createdAt": "2020-10-29T15:13:52Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/account/AccountUpdateTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.hedera.datagenerator.sdk.supplier.account;\n+\n+import java.time.Duration;\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import lombok.Builder;\n+import lombok.Value;\n+import lombok.extern.log4j.Log4j2;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.account.AccountUpdateTransaction;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PublicKey;\n+\n+@Builder\n+@Value\n+@Log4j2\n+public class AccountUpdateTransactionSupplier implements TransactionSupplier<AccountUpdateTransaction> {\n+\n+    //Required\n+    private final AccountId accountId;\n+    private final Ed25519PublicKey publicKey;\n+\n+    //Optional\n+    private final AccountId proxyAccountId;", "originalCommit": "4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU0MjMwNg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514542306", "bodyText": "Fields should all be alphabetized now, and added a new line before any annotated field.", "author": "ijungmann", "createdAt": "2020-10-29T20:21:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzODMyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzODg4NQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514338885", "bodyText": "Would prefer chaining invocations sorted.", "author": "steven-sheehy", "createdAt": "2020-10-29T15:14:29Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/account/AccountUpdateTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.hedera.datagenerator.sdk.supplier.account;\n+\n+import java.time.Duration;\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import lombok.Builder;\n+import lombok.Value;\n+import lombok.extern.log4j.Log4j2;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.account.AccountUpdateTransaction;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PublicKey;\n+\n+@Builder\n+@Value\n+@Log4j2\n+public class AccountUpdateTransactionSupplier implements TransactionSupplier<AccountUpdateTransaction> {\n+\n+    //Required\n+    private final AccountId accountId;\n+    private final Ed25519PublicKey publicKey;\n+\n+    //Optional\n+    private final AccountId proxyAccountId;\n+    @Builder.Default\n+    private final Instant expirationTime = Instant.now().plus(120, ChronoUnit.DAYS);\n+    @Builder.Default\n+    private final Duration autoRenewPeriod = Duration.ofSeconds(8000000);\n+    @Builder.Default\n+    private final boolean receiverSignatureRequired = false;\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public AccountUpdateTransaction get() {\n+        AccountUpdateTransaction transaction = new AccountUpdateTransaction()\n+                .setAccountId(accountId)", "originalCommit": "4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU0MjQ1Mw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514542453", "bodyText": "All chaining should be sorted alphabetically now.", "author": "ijungmann", "createdAt": "2020-10-29T20:21:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzODg4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM0NjEyNQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514346125", "bodyText": "Since we don't have an acronym HAS for accounts, etc. it might be better to name the package after the transaction prefix for consistency with the other network services. e.g. hcs -> consensus and hts -> token", "author": "steven-sheehy", "createdAt": "2020-10-29T15:23:49Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/hcs/ConsensusSubmitMessageTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,43 @@\n+package com.hedera.datagenerator.sdk.supplier.hcs;", "originalCommit": "4a6f4eff18fd1bdd8a27fa4e54351664bb439afc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDUwMzYxNQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514503615", "bodyText": "Makes sense, done.", "author": "ijungmann", "createdAt": "2020-10-29T19:12:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM0NjEyNQ=="}], "type": "inlineReview"}, {"oid": "aceae19806cafe8322699f17dbee47725b1c31fb", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/aceae19806cafe8322699f17dbee47725b1c31fb", "message": "Refactoring\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T15:57:07Z", "type": "commit"}, {"oid": "fc8173001da2e55897c067fcfdfe02f845c84d1a", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/fc8173001da2e55897c067fcfdfe02f845c84d1a", "message": "Add licensing info\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T15:58:17Z", "type": "commit"}, {"oid": "dab5575d0d606af453e5b150ad6432ed98923211", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/dab5575d0d606af453e5b150ad6432ed98923211", "message": "Correct license info\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T16:13:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQxMzk3MA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514413970", "bodyText": "Can we make it so that the timestamp always starts the message and any optional message provided is added to it\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .setMessage(message != null ? message : getMessage())\n          \n          \n            \n                            .setMessage(getMessage() + message != null ? \"_\" + message : '')", "author": "Nana-EC", "createdAt": "2020-10-29T16:52:10Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/hcs/ConsensusSubmitMessageTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,63 @@\n+package com.hedera.datagenerator.sdk.supplier.hcs;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import com.google.common.primitives.Longs;\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+import org.apache.commons.codec.binary.Base64;\n+import org.apache.commons.lang3.RandomStringUtils;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusMessageSubmitTransaction;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusTopicId;\n+\n+@Builder\n+@Value\n+public class ConsensusSubmitMessageTransactionSupplier implements TransactionSupplier<ConsensusMessageSubmitTransaction> {\n+\n+    //Required\n+    private final ConsensusTopicId topicId;\n+\n+    //Optional\n+    private final String message;\n+    @Builder.Default\n+    private final int messageSize = 256;\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000;\n+\n+    @Override\n+    public ConsensusMessageSubmitTransaction get() {\n+        return new ConsensusMessageSubmitTransaction()\n+                .setTopicId(topicId)\n+                .setMessage(message != null ? message : getMessage())", "originalCommit": "dab5575d0d606af453e5b150ad6432ed98923211", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU5NTA3MA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514595070", "bodyText": "I'm okay with adding a timestamp to the front, but if someone adds their own message do we want to continue generating random alphanumeric chars to fill it out?  I approached this as either give a complete message or give a message size to generate, not both.\nI've pushed a variation on this where the getMessage() is changed to just append the timestamp to the custom message if applicable, let me know if you think differently.", "author": "ijungmann", "createdAt": "2020-10-29T22:06:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQxMzk3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyNzAyMg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514627022", "bodyText": "This is correct. Should be encodedTimestamp plus  on of the two, custom message or random message .", "author": "Nana-EC", "createdAt": "2020-10-29T23:36:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQxMzk3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQyOTQwOA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514429408", "bodyText": "This is missing the setFreezeDefault property.\nAssuming default of false this will mean the freezeKey is set accounts onboarded to the token will have an Unfrozen status and can immediately start to transfer tokens.\nSetting it to true would give the opposite effect.", "author": "Nana-EC", "createdAt": "2020-10-29T17:14:18Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/hts/TokenCreateTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,74 @@\n+package com.hedera.datagenerator.sdk.supplier.hts;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PublicKey;\n+import com.hedera.hashgraph.sdk.token.TokenCreateTransaction;\n+\n+@Builder\n+@Value\n+public class TokenCreateTransactionSupplier implements TransactionSupplier<TokenCreateTransaction> {\n+    //Required\n+    private final AccountId treasuryAccount;\n+\n+    //Optional\n+    private final Ed25519PublicKey adminKey;\n+    @Builder.Default\n+    private final String symbol = \"HMNT\";\n+    @Builder.Default\n+    private final int initialSupply = 1000000000;\n+    @Builder.Default\n+    private boolean freezeDefault = false;\n+    @Builder.Default\n+    private int decimals = 10;\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public TokenCreateTransaction get() {\n+        TokenCreateTransaction tokenCreateTransaction = new TokenCreateTransaction()\n+                .setSymbol(symbol)\n+                .setName(symbol + \"_name\")\n+                .setDecimals(decimals)\n+                .setInitialSupply(initialSupply)\n+                .setAutoRenewAccount(treasuryAccount)\n+                .setTreasury(treasuryAccount)\n+                .setMaxTransactionFee(maxTransactionFee)\n+                .setTransactionMemo(\"Supplier Create token_\" + Instant.now());\n+\n+        if (adminKey != null) {\n+            tokenCreateTransaction\n+                    .setAdminKey(adminKey)\n+                    .setSupplyKey(adminKey)\n+                    .setWipeKey(adminKey)\n+                    .setFreezeKey(adminKey)", "originalCommit": "dab5575d0d606af453e5b150ad6432ed98923211", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU1MTIyNQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514551225", "bodyText": "Good catch, I was flip-flopping on setting this field since in the vast majority of cases we would leave it to the default (false/not frozen), but I've added it back since more options probably isn't a bad thing.", "author": "ijungmann", "createdAt": "2020-10-29T20:37:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQyOTQwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzMDQ1Mg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514430452", "bodyText": "Use maxTransactionFee\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .setMaxTransactionFee(1_000_000_000)\n          \n          \n            \n                            .setMaxTransactionFee(maxTransactionFee)", "author": "Nana-EC", "createdAt": "2020-10-29T17:15:41Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/hts/TokenFreezeTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.hedera.datagenerator.sdk.supplier.hts;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.token.TokenFreezeTransaction;\n+import com.hedera.hashgraph.sdk.token.TokenId;\n+\n+@Builder\n+@Value\n+public class TokenFreezeTransactionSupplier implements TransactionSupplier<TokenFreezeTransaction> {\n+    //Required\n+    private final TokenId tokenId;\n+    private final AccountId accountId;\n+\n+    //Optional\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public TokenFreezeTransaction get() {\n+        return new TokenFreezeTransaction()\n+                .setAccountId(accountId)\n+                .setMaxTransactionFee(1_000_000_000)", "originalCommit": "dab5575d0d606af453e5b150ad6432ed98923211", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU0NjE4MQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514546181", "bodyText": "Fixed", "author": "ijungmann", "createdAt": "2020-10-29T20:28:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzMDQ1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzMjA5OQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514432099", "bodyText": "Use maxTransactionFee\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .setMaxTransactionFee(1_000_000_000)\n          \n          \n            \n                            .setMaxTransactionFee(maxTransactionFee)", "author": "Nana-EC", "createdAt": "2020-10-29T17:17:56Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/hts/TokenRevokeKYCTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.hedera.datagenerator.sdk.supplier.hts;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.token.TokenId;\n+import com.hedera.hashgraph.sdk.token.TokenRevokeKycTransaction;\n+\n+@Builder\n+@Value\n+public class TokenRevokeKYCTransactionSupplier implements TransactionSupplier<TokenRevokeKycTransaction> {\n+    //Required\n+    private final TokenId tokenId;\n+    private final AccountId accountId;\n+\n+    //Optional\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public TokenRevokeKycTransaction get() {\n+        return new TokenRevokeKycTransaction()\n+                .setAccountId(accountId)\n+                .setTokenId(tokenId)\n+                .setMaxTransactionFee(1_000_000_000)", "originalCommit": "dab5575d0d606af453e5b150ad6432ed98923211", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU0NjEyMw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514546123", "bodyText": "Fixed", "author": "ijungmann", "createdAt": "2020-10-29T20:28:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzMjA5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzNTQ2Mw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514435463", "bodyText": "Should we update this to be like the HCS submit message and use a timestamp here that will allow us to calculate latency on the perf subscriber side?\nPretty much set it to the same value returned by ConsensusSubmitTransactionSupplier.getMessage()\nIf there's an applicable class that can hold the function for sharing that would be good also.\nI might do this on the acceptance side myself so suggesting it here also.", "author": "Nana-EC", "createdAt": "2020-10-29T17:23:01Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/hts/TokenTransferTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package com.hedera.datagenerator.sdk.supplier.hts;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.token.TokenId;\n+import com.hedera.hashgraph.sdk.token.TokenTransferTransaction;\n+\n+@Builder\n+@Value\n+public class TokenTransferTransactionSupplier implements TransactionSupplier<TokenTransferTransaction> {\n+    //Required\n+    private final TokenId tokenId;\n+    private final AccountId senderId;\n+    private final AccountId recipientId;\n+\n+    //Optional\n+    @Builder.Default\n+    private final int amount = 1;\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000;\n+\n+    @Override\n+    public TokenTransferTransaction get() {\n+        return new TokenTransferTransaction()\n+                .addSender(tokenId, senderId, amount)\n+                .addRecipient(tokenId, recipientId, amount)\n+                .setMaxTransactionFee(maxTransactionFee)\n+                .setTransactionMemo(\"Supplier Transfer token_\" + Instant.now());", "originalCommit": "dab5575d0d606af453e5b150ad6432ed98923211", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDQwNQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514634405", "bodyText": "After some discussion, decided to append an encoded timestamp to the front of all transaction memos in the Suppliers.", "author": "ijungmann", "createdAt": "2020-10-30T00:01:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzNTQ2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzNjI2Mg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514436262", "bodyText": "Missing timestamp which seems to be the convention being establish\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .setTransactionMemo(\"Supplier Update token_\");\n          \n          \n            \n                            .setTransactionMemo(\"Supplier Update token_\" +  Instant.now());", "author": "Nana-EC", "createdAt": "2020-10-29T17:24:12Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/hts/TokenUpdateTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,79 @@\n+package com.hedera.datagenerator.sdk.supplier.hts;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import java.time.Duration;\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import lombok.Builder;\n+import lombok.Value;\n+\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PublicKey;\n+import com.hedera.hashgraph.sdk.token.TokenId;\n+import com.hedera.hashgraph.sdk.token.TokenUpdateTransaction;\n+\n+@Builder\n+@Value\n+public class TokenUpdateTransactionSupplier implements TransactionSupplier<TokenUpdateTransaction> {\n+    //Required\n+    private final AccountId treasuryAccountId;\n+    private final TokenId tokenId;\n+\n+    //Optional\n+    private final Ed25519PublicKey adminKey;\n+    @Builder.Default\n+    private final String symbol = \"HMNT\";\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+    @Builder.Default\n+    private final Instant expirationTime = Instant.now().plus(120, ChronoUnit.DAYS);\n+    @Builder.Default\n+    private final Duration autoRenewPeriod = Duration.ofSeconds(8000000);\n+\n+    @Override\n+    public TokenUpdateTransaction get() {\n+        TokenUpdateTransaction tokenUpdateTransaction = new TokenUpdateTransaction()\n+                .setTokenId(tokenId)\n+                .setSybmol(symbol)\n+                .setName(symbol + \"_name\")\n+                .setExpirationTime(expirationTime)\n+                .setAutoRenewPeriod(autoRenewPeriod)\n+                .setMaxTransactionFee(maxTransactionFee)\n+                .setTransactionMemo(\"Supplier Update token_\");", "originalCommit": "dab5575d0d606af453e5b150ad6432ed98923211", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU1NDI5OA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514554298", "bodyText": "Fixed", "author": "ijungmann", "createdAt": "2020-10-29T20:43:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzNjI2Mg=="}], "type": "inlineReview"}, {"oid": "ae67c9d7ded037da06b1ef7e73275028c66140be", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ae67c9d7ded037da06b1ef7e73275028c66140be", "message": "Remove key logging when creating account\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T17:41:31Z", "type": "commit"}, {"oid": "70884667710eb398950c28edef8d5a5fb035fbde", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/70884667710eb398950c28edef8d5a5fb035fbde", "message": "Refactor Account Update to account for NPE\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T17:55:42Z", "type": "commit"}, {"oid": "45afc23767aa5e6cc36b333cbf69a02dfd2f1297", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/45afc23767aa5e6cc36b333cbf69a02dfd2f1297", "message": "Rename supplier packages to be consistent\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T19:11:57Z", "type": "commit"}, {"oid": "feadbc70157c0947b8bac7d785e53db16f997fd8", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/feadbc70157c0947b8bac7d785e53db16f997fd8", "message": "Rename supplier packages to be consistent\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T19:14:15Z", "type": "commit"}, {"oid": "503465d56ded39aef50d91585db3b96c644314ff", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/503465d56ded39aef50d91585db3b96c644314ff", "message": "Alphabetize supplier fields and chaining\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T20:19:20Z", "type": "commit"}, {"oid": "007fe81064821ea10057899e9c953800c773beee", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/007fe81064821ea10057899e9c953800c773beee", "message": "Correct max transaction fee chain to use field\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T20:28:01Z", "type": "commit"}, {"oid": "40a0040399d2b3d30577f5919d35e777b36521a9", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/40a0040399d2b3d30577f5919d35e777b36521a9", "message": "Add freeze default to chain\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T20:34:24Z", "type": "commit"}, {"oid": "052659f8d63b0939848486425c8944514990a777", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/052659f8d63b0939848486425c8944514990a777", "message": "Fix missing timestamp in token update\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T20:42:58Z", "type": "commit"}, {"oid": "241ff7ae5a21a2fc09d59139cee77c3cdaaef726", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/241ff7ae5a21a2fc09d59139cee77c3cdaaef726", "message": "Reword transaction memos to be clear for main nodes\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T20:55:32Z", "type": "commit"}, {"oid": "c10cb8c042a9fc447a94172e7bf28f159b19a411", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c10cb8c042a9fc447a94172e7bf28f159b19a411", "message": "Refactor supplier fields to be primitives for spring boot\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T21:36:52Z", "type": "commit"}, {"oid": "e9fb7234bdcaf4c1871e0b9c4377ce5094b5f63c", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/e9fb7234bdcaf4c1871e0b9c4377ce5094b5f63c", "message": "Refactor to put instant and duration fields back\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T21:45:59Z", "type": "commit"}, {"oid": "9d7e3432d9ebd1f2732cc1565a8a16a17a74f189", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9d7e3432d9ebd1f2732cc1565a8a16a17a74f189", "message": "Refactor submit message supplier to append timestamp to message regardless\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T22:06:35Z", "type": "commit"}, {"oid": "8a4796d2918952cd55878a3a5ba3dd97c3660f49", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/8a4796d2918952cd55878a3a5ba3dd97c3660f49", "message": "Alter transaction memos to have encoded timestamp in front\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T23:10:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyNjEzNQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514626135", "bodyText": "nit:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return Base64.encodeBase64String(timeRefBytes) + randomAlphanumeric;\n          \n          \n            \n                    return Utility.getEncodedTimestamp() + \"_\" + randomAlphanumeric;\n          \n      \n    \n    \n  \n\nOr call once and use is both returns\nString encodedTimestamp = Utility.getEncodedTimestamp();", "author": "Nana-EC", "createdAt": "2020-10-29T23:33:32Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/consensus/ConsensusSubmitMessageTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,72 @@\n+package com.hedera.datagenerator.sdk.supplier.consensus;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import com.google.common.primitives.Longs;\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+import org.apache.commons.codec.binary.Base64;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.commons.lang3.StringUtils;\n+\n+import com.hedera.datagenerator.common.Utility;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusMessageSubmitTransaction;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusTopicId;\n+\n+@Builder\n+@Value\n+public class ConsensusSubmitMessageTransactionSupplier implements TransactionSupplier<ConsensusMessageSubmitTransaction> {\n+\n+    //Required\n+    private final String topicId;\n+\n+    //Optional\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000;\n+    private final String message = StringUtils.EMPTY;\n+\n+    @Builder.Default\n+    private final int messageSize = 256;\n+\n+    @Override\n+    public ConsensusMessageSubmitTransaction get() {\n+        return new ConsensusMessageSubmitTransaction()\n+                .setMaxTransactionFee(maxTransactionFee)\n+                .setMessage(getMessage())\n+                .setTopicId(ConsensusTopicId.fromString(topicId))\n+                .setTransactionMemo(Utility.getEncodedTimestamp() + \"_Mirror node submitted test message at \" + Instant\n+                        .now());\n+    }\n+\n+    private String getMessage() {\n+        //If a custom message is entered, append the timestamp to the front and leave the message unaltered\n+        if (StringUtils.isNotBlank(message)) {\n+            return Utility.getEncodedTimestamp() + \"_\" + message;\n+        }\n+        //Generate a message from the timestamp and a random alphanumeric String\n+        byte[] timeRefBytes = Longs.toByteArray(Instant.now().toEpochMilli());\n+        int additionalBytes = messageSize <= timeRefBytes.length ? 0 : messageSize - timeRefBytes.length;\n+        String randomAlphanumeric = RandomStringUtils.randomAlphanumeric(additionalBytes);\n+        return Base64.encodeBase64String(timeRefBytes) + randomAlphanumeric;", "originalCommit": "8a4796d2918952cd55878a3a5ba3dd97c3660f49", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDU1MA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514634550", "bodyText": "Went with the call once, use in both approach.", "author": "ijungmann", "createdAt": "2020-10-30T00:01:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyNjEzNQ=="}], "type": "inlineReview"}, {"oid": "d7d5cff498f194c249f87999860f69b0e74bd843", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/d7d5cff498f194c249f87999860f69b0e74bd843", "message": "Add exception throwing when required fields are not set\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T23:44:14Z", "type": "commit"}, {"oid": "973d959a110ae98f5dc46cf6f628c7a5fe6d1a1a", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/973d959a110ae98f5dc46cf6f628c7a5fe6d1a1a", "message": "Add new lines to standardize format\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T23:47:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyOTEyMg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514629122", "bodyText": "I realize we're repeating the encodedTimestamp + message + readable instant time.\nWe could move this into the new Utility class you added and make it easier\n    public static String getTransactionMemo(String message) {\n         return Utility.getEncodedTimestamp() + \"_\" + message + \" at \" + Instant.now();\n     }\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .setTransactionMemo(Utility.getEncodedTimestamp() + \"_Mirror node wiped test token at \" + Instant\n          \n          \n            \n                            .setTransactionMemo(Utility.getTransactionMemo(\"Mirror node wiped test token\"))", "author": "Nana-EC", "createdAt": "2020-10-29T23:43:33Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/token/TokenWipeTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,56 @@\n+package com.hedera.datagenerator.sdk.supplier.token;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+\n+import com.hedera.datagenerator.common.Utility;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.token.TokenId;\n+import com.hedera.hashgraph.sdk.token.TokenWipeTransaction;\n+\n+@Builder\n+@Value\n+public class TokenWipeTransactionSupplier implements TransactionSupplier<TokenWipeTransaction> {\n+    private final String accountId;\n+    private final String tokenId;\n+\n+    //Optional\n+    @Builder.Default\n+    private final long amount = 1;\n+\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public TokenWipeTransaction get() {\n+        return new TokenWipeTransaction()\n+                .setAccountId(AccountId.fromString(accountId))\n+                .setAmount(amount)\n+                .setMaxTransactionFee(maxTransactionFee)\n+                .setTokenId(TokenId.fromString(tokenId))\n+                .setTransactionMemo(Utility.getEncodedTimestamp() + \"_Mirror node wiped test token at \" + Instant", "originalCommit": "8a4796d2918952cd55878a3a5ba3dd97c3660f49", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzODk1NQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r514638955", "bodyText": "Good call, did this for all classes.", "author": "ijungmann", "createdAt": "2020-10-30T00:18:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyOTEyMg=="}], "type": "inlineReview"}, {"oid": "067d88ed68ec6221265cd93f9cb7f7fbea392b3f", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/067d88ed68ec6221265cd93f9cb7f7fbea392b3f", "message": "Correct token transaction error message\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-29T23:51:23Z", "type": "commit"}, {"oid": "7adc93c88e595b15fae531904c1a9eec57d98e24", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/7adc93c88e595b15fae531904c1a9eec57d98e24", "message": "Minor refactor of submit message\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-30T00:00:13Z", "type": "commit"}, {"oid": "1f26a3bb43a1e8335804fa906f3be970c01085f9", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/1f26a3bb43a1e8335804fa906f3be970c01085f9", "message": "Refactor transaction memos to use utility class\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-30T00:18:18Z", "type": "commit"}, {"oid": "ff723c17ca13616cc7e318df25e5d4cc076a7193", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ff723c17ca13616cc7e318df25e5d4cc076a7193", "message": "Change Supplier error message to use simple class name\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-30T14:55:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE3MTk4Nw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515171987", "bodyText": "needs some newlines", "author": "steven-sheehy", "createdAt": "2020-10-30T15:14:53Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/common/Utility.java", "diffHunk": "@@ -0,0 +1,59 @@\n+package com.hedera.datagenerator.common;/*", "originalCommit": "ff723c17ca13616cc7e318df25e5d4cc076a7193", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIzMzEyOA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515233128", "bodyText": "Newlines added.", "author": "ijungmann", "createdAt": "2020-10-30T16:45:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE3MTk4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE5MTUwNA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515191504", "bodyText": "Would be simpler if the exception took in the TransactionSupplier object and formatted the message internally.\nthrow new TransactionSupplierException(this, \"topicId\");", "author": "steven-sheehy", "createdAt": "2020-10-30T15:39:11Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/consensus/ConsensusDeleteTopicTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,57 @@\n+package com.hedera.datagenerator.sdk.supplier.consensus;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import lombok.Builder;\n+import lombok.Value;\n+import org.apache.commons.lang3.StringUtils;\n+\n+import com.hedera.datagenerator.common.Utility;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplierException;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusTopicDeleteTransaction;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusTopicId;\n+\n+@Builder\n+@Value\n+public class ConsensusDeleteTopicTransactionSupplier implements TransactionSupplier<ConsensusTopicDeleteTransaction> {\n+\n+    //Required\n+    private final String topicId;\n+\n+    //Optional\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public ConsensusTopicDeleteTransaction get() {\n+\n+        if (StringUtils.isBlank(topicId)) {\n+            throw new TransactionSupplierException(this.getClass()", "originalCommit": "ff723c17ca13616cc7e318df25e5d4cc076a7193", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0NjUzNw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515246537", "bodyText": "Good call, made this change.  I also moved the required fields list to a static final List field at the top of each class so the calls are identical.", "author": "ijungmann", "createdAt": "2020-10-30T17:06:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE5MTUwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE5MjY1Ng==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515192656", "bodyText": "Think this needs a @Builder.Default otherwise it can never be changed.", "author": "steven-sheehy", "createdAt": "2020-10-30T15:40:58Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/consensus/ConsensusSubmitMessageTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,78 @@\n+package com.hedera.datagenerator.sdk.supplier.consensus;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import com.google.common.primitives.Longs;\n+import java.time.Instant;\n+import lombok.Builder;\n+import lombok.Value;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.commons.lang3.StringUtils;\n+\n+import com.hedera.datagenerator.common.Utility;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplierException;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusMessageSubmitTransaction;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusTopicId;\n+\n+@Builder\n+@Value\n+public class ConsensusSubmitMessageTransactionSupplier implements TransactionSupplier<ConsensusMessageSubmitTransaction> {\n+\n+    //Required\n+    private final String topicId;\n+\n+    //Optional\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000;\n+    private final String message = StringUtils.EMPTY;", "originalCommit": "ff723c17ca13616cc7e318df25e5d4cc076a7193", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIzMzc2Ng==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515233766", "bodyText": "Yep, added.", "author": "ijungmann", "createdAt": "2020-10-30T16:46:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE5MjY1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE5MzQ0Mg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515193442", "bodyText": "This checks two fields but error only mentions one. Should probably separate.", "author": "steven-sheehy", "createdAt": "2020-10-30T15:42:08Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/consensus/ConsensusUpdateTopicTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package com.hedera.datagenerator.sdk.supplier.consensus;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import java.time.Duration;\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import lombok.Builder;\n+import lombok.Value;\n+import org.apache.commons.lang3.StringUtils;\n+\n+import com.hedera.datagenerator.common.Utility;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplierException;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusTopicId;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusTopicUpdateTransaction;\n+import com.hedera.hashgraph.sdk.crypto.ed25519.Ed25519PublicKey;\n+\n+@Builder\n+@Value\n+public class ConsensusUpdateTopicTransactionSupplier implements TransactionSupplier<ConsensusTopicUpdateTransaction> {\n+\n+    //Required\n+    private final String topicId;\n+\n+    //Optional\n+    private final String adminKey;\n+    private final String autoRenewAccountId;\n+\n+    @Builder.Default\n+    private final Duration autoRenewPeriod = Duration.ofSeconds(8000000);\n+\n+    @Builder.Default\n+    private final Instant expirationTime = Instant.now().plus(120, ChronoUnit.DAYS);\n+\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000_000;\n+\n+    @Override\n+    public ConsensusTopicUpdateTransaction get() {\n+\n+        if (StringUtils.isBlank(topicId) || StringUtils.isBlank(autoRenewAccountId)) {\n+            throw new TransactionSupplierException(this.getClass()\n+                    .getSimpleName() + \" requires a topicId be provided\");", "originalCommit": "ff723c17ca13616cc7e318df25e5d4cc076a7193", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0Mzg1Mg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515243852", "bodyText": "Yep, copy-paste error, fixed.", "author": "ijungmann", "createdAt": "2020-10-30T17:01:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE5MzQ0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE5NjAyMQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515196021", "bodyText": "TokenGrantKycTransactionSupplier to preserve the naming from the SDK and the proto. Same for revoke", "author": "steven-sheehy", "createdAt": "2020-10-30T15:46:06Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/token/TokenGrantKYCTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package com.hedera.datagenerator.sdk.supplier.token;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import lombok.Builder;\n+import lombok.Value;\n+import org.apache.commons.lang3.StringUtils;\n+\n+import com.hedera.datagenerator.common.Utility;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplierException;\n+import com.hedera.hashgraph.sdk.account.AccountId;\n+import com.hedera.hashgraph.sdk.token.TokenGrantKycTransaction;\n+import com.hedera.hashgraph.sdk.token.TokenId;\n+\n+@Builder\n+@Value\n+public class TokenGrantKYCTransactionSupplier implements TransactionSupplier<TokenGrantKycTransaction> {", "originalCommit": "ff723c17ca13616cc7e318df25e5d4cc076a7193", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIzMjQxOA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515232418", "bodyText": "Renamed both.", "author": "ijungmann", "createdAt": "2020-10-30T16:44:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE5NjAyMQ=="}], "type": "inlineReview"}, {"oid": "1effd118bb0f405c02277c76fd7fb1fdeb0ded92", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/1effd118bb0f405c02277c76fd7fb1fdeb0ded92", "message": "Rename kyc suppliers\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-30T16:44:06Z", "type": "commit"}, {"oid": "778b2fa15d8018fda646a52455cb6a4198875937", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/778b2fa15d8018fda646a52455cb6a4198875937", "message": "Fix Utility class license\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-30T16:44:58Z", "type": "commit"}, {"oid": "6413cd42bf1f99b4cde5279cafedd6c6e41e7e1b", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6413cd42bf1f99b4cde5279cafedd6c6e41e7e1b", "message": "Fix message field on submit message supplier\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-30T16:46:13Z", "type": "commit"}, {"oid": "b3590c11c15a066e8f09d2bf3871a4d394701ed7", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b3590c11c15a066e8f09d2bf3871a4d394701ed7", "message": "Refactor how exception message is formatted\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-10-30T17:00:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI2MTUyNA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1199#discussion_r515261524", "bodyText": "nit: It will always be 8 bytes, as it's a long, I should have changed this in the performance side also.\nNo biggie, can change in future PR or if there's a next commit.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    int additionalBytes = messageSize <= timeRefBytes.length ? 0 : messageSize - timeRefBytes.length;\n          \n          \n            \n                    int additionalBytes = messageSize <= timeRefBytes.length ? 0 : messageSize - 8;\n          \n      \n    \n    \n  \n\nor\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    int additionalBytes = messageSize <= timeRefBytes.length ? 0 : messageSize - timeRefBytes.length;\n          \n          \n            \n                    int timeByteLength = 8; \n          \n          \n            \n                    int additionalBytes = messageSize <= timeRefBytes.length ? 0 : messageSize - timeByteLength;", "author": "Nana-EC", "createdAt": "2020-10-30T17:29:29Z", "path": "hedera-mirror-datagenerator/src/main/java/com/hedera/datagenerator/sdk/supplier/consensus/ConsensusSubmitMessageTransactionSupplier.java", "diffHunk": "@@ -0,0 +1,83 @@\n+package com.hedera.datagenerator.sdk.supplier.consensus;\n+\n+/*-\n+ * \u200c\n+ * Hedera Mirror Node\n+ * \u200b\n+ * Copyright (C) 2019 - 2020 Hedera Hashgraph, LLC\n+ * \u200b\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ * \u200d\n+ */\n+\n+import com.google.common.primitives.Longs;\n+import java.time.Instant;\n+import java.util.Arrays;\n+import java.util.List;\n+import lombok.Builder;\n+import lombok.Value;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.commons.lang3.StringUtils;\n+\n+import com.hedera.datagenerator.common.Utility;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplier;\n+import com.hedera.datagenerator.sdk.supplier.TransactionSupplierException;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusMessageSubmitTransaction;\n+import com.hedera.hashgraph.sdk.consensus.ConsensusTopicId;\n+\n+@Builder\n+@Value\n+public class ConsensusSubmitMessageTransactionSupplier implements TransactionSupplier<ConsensusMessageSubmitTransaction> {\n+\n+    private static final List<String> requiredFields = Arrays.asList(\"topicId\");\n+\n+    //Required\n+    private final String topicId;\n+\n+    //Optional\n+    @Builder.Default\n+    private final long maxTransactionFee = 1_000_000;\n+\n+    @Builder.Default\n+    private final String message = StringUtils.EMPTY;\n+\n+    @Builder.Default\n+    private final int messageSize = 256;\n+\n+    @Override\n+    public ConsensusMessageSubmitTransaction get() {\n+\n+        if (StringUtils.isBlank(topicId)) {\n+            throw new TransactionSupplierException(this, requiredFields);\n+        }\n+\n+        return new ConsensusMessageSubmitTransaction()\n+                .setMaxTransactionFee(maxTransactionFee)\n+                .setMessage(getMessage())\n+                .setTopicId(ConsensusTopicId.fromString(topicId))\n+                .setTransactionMemo(Utility.getMemo(\"Mirror node submitted test message\"));\n+    }\n+\n+    private String getMessage() {\n+        String encodedTimestamp = Utility.getEncodedTimestamp();\n+        //If a custom message is entered, append the timestamp to the front and leave the message unaltered\n+        if (StringUtils.isNotBlank(message)) {\n+            return encodedTimestamp + \"_\" + message;\n+        }\n+        //Generate a message from the timestamp and a random alphanumeric String\n+        byte[] timeRefBytes = Longs.toByteArray(Instant.now().toEpochMilli());\n+        int additionalBytes = messageSize <= timeRefBytes.length ? 0 : messageSize - timeRefBytes.length;", "originalCommit": "b3590c11c15a066e8f09d2bf3871a4d394701ed7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}