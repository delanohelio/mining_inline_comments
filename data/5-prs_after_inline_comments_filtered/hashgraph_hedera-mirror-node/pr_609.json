{"pr_number": 609, "pr_title": "Change balance downloader polling frequency from 500ms to 30s", "pr_createdAt": "2020-03-17T19:14:36Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/609", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2MjAzNA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/609#discussion_r393962034", "bodyText": "Need to keep a default here. Reason is Spel expressions don't know how to use the default from configuration properties POJO. So effectively right now you have no value for frequency and it will crash on startup with Could not resolve placeholder 'hedera.mirror.parser.record.frequency' unless you have the frequency defined in a local yaml.\nSame goes for other files.", "author": "steven-sheehy", "createdAt": "2020-03-17T20:51:06Z", "path": "hedera-mirror-importer/src/main/java/com/hedera/mirror/importer/downloader/balance/AccountBalancesDownloader.java", "diffHunk": "@@ -43,7 +43,7 @@ public AccountBalancesDownloader(\n     }\n \n     @Override\n-    @Scheduled(fixedRateString = \"${hedera.mirror.downloader.balance.frequency:500}\")\n+    @Scheduled(fixedRateString = \"${hedera.mirror.downloader.balance.frequency}\")", "originalCommit": "56506f5dc6a40d6f245c536d43779c39c452f970", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQwNzU2MA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/609#discussion_r394407560", "bodyText": "There should be a note for the above reasoning. Otherwise it's easy to not know and make the changes Appy is making", "author": "Nana-EC", "createdAt": "2020-03-18T14:53:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2MjAzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYxMzU0Mw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/609#discussion_r394613543", "bodyText": "I worked on enhancing Spring Boot for just such support in the past but couldn't find an elegant solution as it involves walking bean properties reflectively. That is I had working code, but never polished it enough for inclusion.", "author": "steven-sheehy", "createdAt": "2020-03-18T20:16:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2MjAzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM5MjMxMw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/609#discussion_r395392313", "bodyText": "In future, we can either:\n\nremove @scheduled and to it ourself (yuck)\nremove the fields in POJOs: The fields are anyways just wrong. If anyone updates their value expecting results, they'll be surprised since it won't work.\nTwo sources of truth is bad.\nTwo sources of truth when one is not even truth is evil :D\nIf people are okay with removing the fields and having frequencyMs in application.yml as only source of truth for default value, i can make that change as followup. I have a feeling someone might feel strongly about it so leaving it as suggestion here.", "author": "apeksharma", "createdAt": "2020-03-20T00:36:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2MjAzNA=="}], "type": "inlineReview"}, {"oid": "4d5f1362efe2a9c13723c9a588b451fcf45c2dcf", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/4d5f1362efe2a9c13723c9a588b451fcf45c2dcf", "message": "Change balance downloader polling frequency from 500ms to 30s\n\nSigned-off-by: Apekshit Sharma <apekshit.sharma@hedera.com>", "committedDate": "2020-03-20T00:27:11Z", "type": "commit"}, {"oid": "4d5f1362efe2a9c13723c9a588b451fcf45c2dcf", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/4d5f1362efe2a9c13723c9a588b451fcf45c2dcf", "message": "Change balance downloader polling frequency from 500ms to 30s\n\nSigned-off-by: Apekshit Sharma <apekshit.sharma@hedera.com>", "committedDate": "2020-03-20T00:27:11Z", "type": "forcePushed"}]}