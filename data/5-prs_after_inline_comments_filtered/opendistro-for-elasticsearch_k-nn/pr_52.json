{"pr_number": 52, "pr_title": "lazy load efSearch", "pr_createdAt": "2020-02-16T08:48:43Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/52", "timeline": [{"oid": "c5da1be926741a8bf330d0962517b8cc3d1a6071", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/c5da1be926741a8bf330d0962517b8cc3d1a6071", "message": "lazy load efSearch", "committedDate": "2020-02-16T08:45:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkxODI5NA==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/52#discussion_r379918294", "bodyText": "Could you explain more why there is only 1 query parameter being passed in? Why are M and efConstruction not gotten?", "author": "jmazanec15", "createdAt": "2020-02-16T17:13:35Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/KNNIndexCache.java", "diffHunk": "@@ -236,4 +236,8 @@ public void onFileDeleted(Path indexFilePath) {\n             getInstance().cache.invalidate(indexFilePath.toString());\n         }\n     };\n+\n+    private String[] getQueryParams(String indexName) {\n+        return new String[] {\"efSearch=\" + KNNSettings.getEfSearchParam(indexName)};", "originalCommit": "c5da1be926741a8bf330d0962517b8cc3d1a6071", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyMjM1MQ==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/52#discussion_r379922351", "bodyText": "efSearch is required only during searches.  Other algorithm params are needed for indexing.", "author": "vamshin", "createdAt": "2020-02-16T18:16:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkxODI5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkxODQ4MA==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/52#discussion_r379918480", "bodyText": "Why is this no longer needed?", "author": "jmazanec15", "createdAt": "2020-02-16T17:16:24Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/v1736/KNNIndex.java", "diffHunk": "@@ -87,12 +87,6 @@ public long getIndexSize() {\n     public void close() {\n         Lock writeLock = readWriteLock.writeLock();\n         writeLock.lock();\n-", "originalCommit": "c5da1be926741a8bf330d0962517b8cc3d1a6071", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyMjI2NQ==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/52#discussion_r379922265", "bodyText": "Good catch. Bad merge. Will add it back.", "author": "vamshin", "createdAt": "2020-02-16T18:14:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkxODQ4MA=="}], "type": "inlineReview"}, {"oid": "89b6aa1ef8428c1eb0278be3a64827c16fc4641b", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/89b6aa1ef8428c1eb0278be3a64827c16fc4641b", "message": "incoporated comments", "committedDate": "2020-02-16T19:05:11Z", "type": "commit"}, {"oid": "649ae6a015da2c81d07aa7b26db1fd566d3bb07e", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/649ae6a015da2c81d07aa7b26db1fd566d3bb07e", "message": "incoporated comments", "committedDate": "2020-02-16T19:06:57Z", "type": "commit"}]}