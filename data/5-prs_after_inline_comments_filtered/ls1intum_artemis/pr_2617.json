{"pr_number": 2617, "pr_title": "Fixed Flaky Test ", "pr_createdAt": "2020-12-30T22:46:43Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2617", "timeline": [{"oid": "220110c07d1a60d3514527f5564f36d1853fa7ad", "url": "https://github.com/ls1intum/Artemis/commit/220110c07d1a60d3514527f5564f36d1853fa7ad", "message": "Fixed Flaky Test", "committedDate": "2020-12-30T22:43:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1NDA1MA==", "url": "https://github.com/ls1intum/Artemis/pull/2617#discussion_r550354050", "bodyText": "please remove this again after it works properly", "author": "krusche", "createdAt": "2020-12-30T23:19:59Z", "path": "src/test/java/de/tum/in/www1/artemis/LearningGoalIntegrationTest.java", "diffHunk": "@@ -451,15 +452,22 @@ public void getLearningGoalCourseProgressTeamsTest_asInstructorOne() throws Exce\n \n         assertThat(courseLearningGoalProgress.totalPointsAchievableByStudentsInLearningGoal).isEqualTo(30.0);\n         assertThat(courseLearningGoalProgress.averagePointsAchievedByStudentInLearningGoal).isEqualTo(3.0);\n-        CourseLearningGoalProgress.CourseLectureUnitProgress progressInTeamExercise = courseLearningGoalProgress.progressInLectureUnits.stream()\n-                .filter(courseLectureUnitProgress -> courseLectureUnitProgress.lectureUnitId.equals(idOfExerciseUnitTeamTextOfLectureOne)).findFirst().get();\n-        assertThat(progressInTeamExercise.participationRate).isEqualTo(80.0);\n-        assertThat(progressInTeamExercise.noOfParticipants).isEqualTo(4);\n-        assertThat(progressInTeamExercise.averageScoreAchievedByStudentInLectureUnit).isEqualTo(30.0);\n+\n+        boolean foundProgressWithCorrectNumbers = false;\n+        for (CourseLearningGoalProgress.CourseLectureUnitProgress courseLectureUnitProgress : courseLearningGoalProgress.progressInLectureUnits) {\n+            if (courseLectureUnitProgress.participationRate.equals(80.0) && courseLectureUnitProgress.noOfParticipants.equals(4)\n+                    && courseLectureUnitProgress.averageScoreAchievedByStudentInLectureUnit.equals(30.0)) {\n+                foundProgressWithCorrectNumbers = true;\n+                break;\n+            }\n+        }\n+\n+        assertThat(foundProgressWithCorrectNumbers).isTrue();\n     }\n \n     @Test\n     @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n+    @RepeatedTest(100)", "originalCommit": "220110c07d1a60d3514527f5564f36d1853fa7ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1NDk4Mw==", "url": "https://github.com/ls1intum/Artemis/pull/2617#discussion_r550354983", "bodyText": "Done in fbc81e7", "author": "stefanwaldhauser", "createdAt": "2020-12-30T23:26:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1NDA1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1NDE0OA==", "url": "https://github.com/ls1intum/Artemis/pull/2617#discussion_r550354148", "bodyText": "This is quite some duplicated code with a similar section below.\nPlease refactor this into a method to avoid code duplication!", "author": "krusche", "createdAt": "2020-12-30T23:20:46Z", "path": "src/test/java/de/tum/in/www1/artemis/LearningGoalIntegrationTest.java", "diffHunk": "@@ -451,15 +452,22 @@ public void getLearningGoalCourseProgressTeamsTest_asInstructorOne() throws Exce\n \n         assertThat(courseLearningGoalProgress.totalPointsAchievableByStudentsInLearningGoal).isEqualTo(30.0);\n         assertThat(courseLearningGoalProgress.averagePointsAchievedByStudentInLearningGoal).isEqualTo(3.0);\n-        CourseLearningGoalProgress.CourseLectureUnitProgress progressInTeamExercise = courseLearningGoalProgress.progressInLectureUnits.stream()\n-                .filter(courseLectureUnitProgress -> courseLectureUnitProgress.lectureUnitId.equals(idOfExerciseUnitTeamTextOfLectureOne)).findFirst().get();\n-        assertThat(progressInTeamExercise.participationRate).isEqualTo(80.0);\n-        assertThat(progressInTeamExercise.noOfParticipants).isEqualTo(4);\n-        assertThat(progressInTeamExercise.averageScoreAchievedByStudentInLectureUnit).isEqualTo(30.0);\n+\n+        boolean foundProgressWithCorrectNumbers = false;\n+        for (CourseLearningGoalProgress.CourseLectureUnitProgress courseLectureUnitProgress : courseLearningGoalProgress.progressInLectureUnits) {", "originalCommit": "220110c07d1a60d3514527f5564f36d1853fa7ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1NTAxNA==", "url": "https://github.com/ls1intum/Artemis/pull/2617#discussion_r550355014", "bodyText": "Done in fbc81e7", "author": "stefanwaldhauser", "createdAt": "2020-12-30T23:26:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1NDE0OA=="}], "type": "inlineReview"}, {"oid": "fbc81e7baa16cd07ac9619377b780a39545b7614", "url": "https://github.com/ls1intum/Artemis/commit/fbc81e7baa16cd07ac9619377b780a39545b7614", "message": "Refactored according to change request", "committedDate": "2020-12-30T23:25:42Z", "type": "commit"}]}