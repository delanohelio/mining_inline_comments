{"pr_number": 2066, "pr_title": "[Feature] Instructor rating dashboard", "pr_createdAt": "2020-08-27T10:10:26Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2066", "timeline": [{"oid": "731d1c52bd0885721706e01277179718077f77f7", "url": "https://github.com/ls1intum/Artemis/commit/731d1c52bd0885721706e01277179718077f77f7", "message": "Add REST Endpoint for instructor rating dashboard", "committedDate": "2020-08-27T09:29:31Z", "type": "commit"}, {"oid": "75c4d3a15b774567abb0b0e94a6283b791c9064b", "url": "https://github.com/ls1intum/Artemis/commit/75c4d3a15b774567abb0b0e94a6283b791c9064b", "message": "Add rating-list component", "committedDate": "2020-08-27T09:33:18Z", "type": "commit"}, {"oid": "090cff0db0ca586d384bf13d60b3f9314d6fb203", "url": "https://github.com/ls1intum/Artemis/commit/090cff0db0ca586d384bf13d60b3f9314d6fb203", "message": "Add default client test file", "committedDate": "2020-08-27T09:33:52Z", "type": "commit"}, {"oid": "e35829498459c77e854b0c02381d8cf8ab8c831a", "url": "https://github.com/ls1intum/Artemis/commit/e35829498459c77e854b0c02381d8cf8ab8c831a", "message": "Wire up rating-list in instructor-course-dashboard", "committedDate": "2020-08-27T09:36:54Z", "type": "commit"}, {"oid": "e610460743723f2a69625bc87c6e5d5205386f3a", "url": "https://github.com/ls1intum/Artemis/commit/e610460743723f2a69625bc87c6e5d5205386f3a", "message": "Add integration test for rating list", "committedDate": "2020-08-27T10:03:46Z", "type": "commit"}, {"oid": "917ebb0469234100e71988b7ff4cc7c5606e14a7", "url": "https://github.com/ls1intum/Artemis/commit/917ebb0469234100e71988b7ff4cc7c5606e14a7", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-08-27T10:10:48Z", "type": "commit"}, {"oid": "bf19f8990fd5706a6946109fdd4c781b010d2d57", "url": "https://github.com/ls1intum/Artemis/commit/bf19f8990fd5706a6946109fdd4c781b010d2d57", "message": "Add client test for rating-list.component.ts", "committedDate": "2020-08-27T12:21:11Z", "type": "commit"}, {"oid": "ae8181589da3e1f54d7277da25a3f36385d5a4c2", "url": "https://github.com/ls1intum/Artemis/commit/ae8181589da3e1f54d7277da25a3f36385d5a4c2", "message": "Add test case for instructor of other course", "committedDate": "2020-08-27T14:55:23Z", "type": "commit"}, {"oid": "552ff6a17a1adc147780fde5949403bf213cc3ad", "url": "https://github.com/ls1intum/Artemis/commit/552ff6a17a1adc147780fde5949403bf213cc3ad", "message": "Add page title", "committedDate": "2020-08-27T16:31:29Z", "type": "commit"}, {"oid": "ac0797859fff1f686e385912d82d4519b65cc7d9", "url": "https://github.com/ls1intum/Artemis/commit/ac0797859fff1f686e385912d82d4519b65cc7d9", "message": "Add text if no ratings are available", "committedDate": "2020-08-27T16:33:56Z", "type": "commit"}, {"oid": "704be5cb68e6d6dc0a5e529d7c1afc9eb8ee9f69", "url": "https://github.com/ls1intum/Artemis/commit/704be5cb68e6d6dc0a5e529d7c1afc9eb8ee9f69", "message": "Adjust logic for showing ratings", "committedDate": "2020-08-27T16:35:23Z", "type": "commit"}, {"oid": "c70a3f46c35bedcfb1da3b2d4523e0326a910bd6", "url": "https://github.com/ls1intum/Artemis/commit/c70a3f46c35bedcfb1da3b2d4523e0326a910bd6", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-08-27T16:40:48Z", "type": "commit"}, {"oid": "b1320b450c9fb6fc1c2632b2b976a0c9685d74b1", "url": "https://github.com/ls1intum/Artemis/commit/b1320b450c9fb6fc1c2632b2b976a0c9685d74b1", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-01T07:53:43Z", "type": "commit"}, {"oid": "ca3a23012452f2a343ce90fb01950674aac1c727", "url": "https://github.com/ls1intum/Artemis/commit/ca3a23012452f2a343ce90fb01950674aac1c727", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-15T12:51:43Z", "type": "commit"}, {"oid": "5031dc73ec7e49db7f8058e0d7f52a80aa4b9602", "url": "https://github.com/ls1intum/Artemis/commit/5031dc73ec7e49db7f8058e0d7f52a80aa4b9602", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-19T08:07:02Z", "type": "commit"}, {"oid": "195b64f118e44d1eb11b0fa6067839f08116877a", "url": "https://github.com/ls1intum/Artemis/commit/195b64f118e44d1eb11b0fa6067839f08116877a", "message": "Fix formatting error", "committedDate": "2020-09-21T11:22:53Z", "type": "commit"}, {"oid": "b1b8f744b48f253ac57495c6a04c160f007b7970", "url": "https://github.com/ls1intum/Artemis/commit/b1b8f744b48f253ac57495c6a04c160f007b7970", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-21T11:24:05Z", "type": "commit"}, {"oid": "cc1ee3178a5010fb60456d9b5f46b60802d9570f", "url": "https://github.com/ls1intum/Artemis/commit/cc1ee3178a5010fb60456d9b5f46b60802d9570f", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-23T07:42:25Z", "type": "commit"}, {"oid": "c44a49c0270e164227d71d846351b117efa40808", "url": "https://github.com/ls1intum/Artemis/commit/c44a49c0270e164227d71d846351b117efa40808", "message": "Replace rating number with stars", "committedDate": "2020-09-23T19:33:48Z", "type": "commit"}, {"oid": "ccda7adaf38f5f879580a7de41bdcfb5a23c3307", "url": "https://github.com/ls1intum/Artemis/commit/ccda7adaf38f5f879580a7de41bdcfb5a23c3307", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-23T19:34:56Z", "type": "commit"}, {"oid": "e22aeb84f54b8d51dd2ff9fe936ffa50e1f4f08c", "url": "https://github.com/ls1intum/Artemis/commit/e22aeb84f54b8d51dd2ff9fe936ffa50e1f4f08c", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-24T10:07:44Z", "type": "commit"}, {"oid": "a0c38d88e3936ff49df72fddb84e03b6ce0513aa", "url": "https://github.com/ls1intum/Artemis/commit/a0c38d88e3936ff49df72fddb84e03b6ce0513aa", "message": "Fix client tests", "committedDate": "2020-09-24T11:51:04Z", "type": "commit"}, {"oid": "d0dfc71a6a5c7846cefca94eeac19e90b37c90e8", "url": "https://github.com/ls1intum/Artemis/commit/d0dfc71a6a5c7846cefca94eeac19e90b37c90e8", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-24T12:40:57Z", "type": "commit"}, {"oid": "12257773f82d669842e475b32b18535a05f1328c", "url": "https://github.com/ls1intum/Artemis/commit/12257773f82d669842e475b32b18535a05f1328c", "message": "Remove unused import", "committedDate": "2020-09-24T12:54:38Z", "type": "commit"}, {"oid": "0bd8fe10a49617eda412e3a286c3c4b7a3f26a4c", "url": "https://github.com/ls1intum/Artemis/commit/0bd8fe10a49617eda412e3a286c3c4b7a3f26a4c", "message": "Improve Instructor view on result", "committedDate": "2020-09-24T12:55:24Z", "type": "commit"}, {"oid": "29683b3b087ca4b572102af7d388d05946ca6d20", "url": "https://github.com/ls1intum/Artemis/commit/29683b3b087ca4b572102af7d388d05946ca6d20", "message": "Remove back button", "committedDate": "2020-09-29T07:56:29Z", "type": "commit"}, {"oid": "c847374c4d1534b892356f59841a9513daa49b75", "url": "https://github.com/ls1intum/Artemis/commit/c847374c4d1534b892356f59841a9513daa49b75", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-29T17:42:11Z", "type": "commit"}, {"oid": "3dce31f4fb693b59cefd5f0a1e3849f61ad9134a", "url": "https://github.com/ls1intum/Artemis/commit/3dce31f4fb693b59cefd5f0a1e3849f61ad9134a", "message": "Improve test coverage for rating-list.component.ts", "committedDate": "2020-09-30T14:20:04Z", "type": "commit"}, {"oid": "57dfebb589c7b098ec74553352c209e51370e6cc", "url": "https://github.com/ls1intum/Artemis/commit/57dfebb589c7b098ec74553352c209e51370e6cc", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-09-30T14:26:49Z", "type": "commit"}, {"oid": "3b209c10079adeaeff04fa63bb377f31c53b3109", "url": "https://github.com/ls1intum/Artemis/commit/3b209c10079adeaeff04fa63bb377f31c53b3109", "message": "Improve test coverage for text-editor.component.spec.ts", "committedDate": "2020-09-30T18:51:33Z", "type": "commit"}, {"oid": "b24cb7af2841f5cde23c9f2fcfae82162f640a20", "url": "https://github.com/ls1intum/Artemis/commit/b24cb7af2841f5cde23c9f2fcfae82162f640a20", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-10-01T11:25:14Z", "type": "commit"}, {"oid": "5b7ca8f6596c7615de8dabe6593670d7ef35e0a1", "url": "https://github.com/ls1intum/Artemis/commit/5b7ca8f6596c7615de8dabe6593670d7ef35e0a1", "message": "Add tests", "committedDate": "2020-10-02T08:39:34Z", "type": "commit"}, {"oid": "c6b55e95b2b0014aef28408982119ad61aa1d738", "url": "https://github.com/ls1intum/Artemis/commit/c6b55e95b2b0014aef28408982119ad61aa1d738", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-10-05T14:57:11Z", "type": "commit"}, {"oid": "6c08a39a35e6ead303e6fc6fcada725b54f31faf", "url": "https://github.com/ls1intum/Artemis/commit/6c08a39a35e6ead303e6fc6fcada725b54f31faf", "message": "Fix test case", "committedDate": "2020-10-05T15:06:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY5NzYwNg==", "url": "https://github.com/ls1intum/Artemis/pull/2066#discussion_r499697606", "bodyText": "Shouldn\u00b4t this be called findAllByCourse_Id?", "author": "balazs-czopf", "createdAt": "2020-10-05T15:46:20Z", "path": "src/main/java/de/tum/in/www1/artemis/repository/RatingRepository.java", "diffHunk": "@@ -26,4 +27,6 @@\n      * @param resultId the Id of the result where the rating should be deleted\n      */\n     void deleteByResult_Id(long resultId);\n+\n+    List<Rating> findAllByResult_Participation_Exercise_Course_Id(Long courseId);", "originalCommit": "6c08a39a35e6ead303e6fc6fcada725b54f31faf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1MTE3Ng==", "url": "https://github.com/ls1intum/Artemis/pull/2066#discussion_r499751176", "bodyText": "No, this is a native hibernate query.", "author": "JonasPetry", "createdAt": "2020-10-05T17:14:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY5NzYwNg=="}], "type": "inlineReview"}, {"oid": "7c10247c34182a5c3f5da38d2196244e4bd6507a", "url": "https://github.com/ls1intum/Artemis/commit/7c10247c34182a5c3f5da38d2196244e4bd6507a", "message": "Remove null from feedback.model.ts", "committedDate": "2020-10-05T17:24:40Z", "type": "commit"}, {"oid": "a511649ef710d6b0fc105f96a120f49a7fadec5c", "url": "https://github.com/ls1intum/Artemis/commit/a511649ef710d6b0fc105f96a120f49a7fadec5c", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-10-05T17:26:07Z", "type": "commit"}, {"oid": "acac1360a7ea5ffc0336f33d32bf6688236a5754", "url": "https://github.com/ls1intum/Artemis/commit/acac1360a7ea5ffc0336f33d32bf6688236a5754", "message": "Fix RatingResource.java", "committedDate": "2020-10-05T17:49:38Z", "type": "commit"}, {"oid": "577e0cb7bea459cb1d8183d633c43a8a6fb5ea2f", "url": "https://github.com/ls1intum/Artemis/commit/577e0cb7bea459cb1d8183d633c43a8a6fb5ea2f", "message": "Merge branch 'develop' into feature/rating-dashboard", "committedDate": "2020-10-06T09:53:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE1ODMxNQ==", "url": "https://github.com/ls1intum/Artemis/pull/2066#discussion_r500158315", "bodyText": "Codacy found an issue: The JUnit 5 test method name 'testGetRatingForInstructorDashboard_asTutor_FORBIDDEN' doesn't match '[a-z][a-zA-Z0-9]*'", "author": "artemis-bot", "createdAt": "2020-10-06T10:08:25Z", "path": "src/test/java/de/tum/in/www1/artemis/RatingResourceIntegrationTest.java", "diffHunk": "@@ -162,4 +170,32 @@ public void testUpdateRating_asTutor_FORBIDDEN() throws Exception {\n         Rating updatedRating = ratingService.findRatingByResultId(savedRating.getResult().getId()).get();\n         assertThat(updatedRating.getRating()).isNotEqualTo(5);\n     }\n+\n+    @Test\n+    @WithMockUser(value = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void testGetRatingForInstructorDashboard_asInstructor() throws Exception {\n+        Rating savedRating = ratingService.saveRating(result.getId(), rating.getRating());\n+        final var ratings = request.getList(\"/api/course/\" + course.getId() + \"/rating\", HttpStatus.OK, Rating.class);\n+\n+        assertThat(ratings.size()).isEqualTo(1);\n+        assertThat(ratings.get(0).getId()).isEqualTo(savedRating.getId());\n+    }\n+\n+    @Test\n+    @WithMockUser(value = \"tutor1\", roles = \"TA\")\n+    public void testGetRatingForInstructorDashboard_asTutor_FORBIDDEN() throws Exception {", "originalCommit": "577e0cb7bea459cb1d8183d633c43a8a6fb5ea2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE1ODMyNA==", "url": "https://github.com/ls1intum/Artemis/pull/2066#discussion_r500158324", "bodyText": "Codacy found an issue: The JUnit 5 test method name 'testGetRatingForInstructorDashboard_asInstructor_FORBIDDEN' doesn't match '[a-z][a-zA-Z0-9]*'", "author": "artemis-bot", "createdAt": "2020-10-06T10:08:26Z", "path": "src/test/java/de/tum/in/www1/artemis/RatingResourceIntegrationTest.java", "diffHunk": "@@ -162,4 +170,32 @@ public void testUpdateRating_asTutor_FORBIDDEN() throws Exception {\n         Rating updatedRating = ratingService.findRatingByResultId(savedRating.getResult().getId()).get();\n         assertThat(updatedRating.getRating()).isNotEqualTo(5);\n     }\n+\n+    @Test\n+    @WithMockUser(value = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void testGetRatingForInstructorDashboard_asInstructor() throws Exception {\n+        Rating savedRating = ratingService.saveRating(result.getId(), rating.getRating());\n+        final var ratings = request.getList(\"/api/course/\" + course.getId() + \"/rating\", HttpStatus.OK, Rating.class);\n+\n+        assertThat(ratings.size()).isEqualTo(1);\n+        assertThat(ratings.get(0).getId()).isEqualTo(savedRating.getId());\n+    }\n+\n+    @Test\n+    @WithMockUser(value = \"tutor1\", roles = \"TA\")\n+    public void testGetRatingForInstructorDashboard_asTutor_FORBIDDEN() throws Exception {\n+        request.getList(\"/api/course/\" + course.getId() + \"/rating\", HttpStatus.FORBIDDEN, Rating.class);\n+    }\n+\n+    @Test\n+    @WithMockUser(value = \"student1\", roles = \"USER\")\n+    public void testGetRatingForInstructorDashboard_asStudent_FORBIDDEN() throws Exception {\n+        request.getList(\"/api/course/\" + course.getId() + \"/rating\", HttpStatus.FORBIDDEN, Rating.class);\n+    }\n+\n+    @Test\n+    @WithMockUser(value = \"instructor2\", roles = \"INSTRUCTOR\")\n+    public void testGetRatingForInstructorDashboard_asInstructor_FORBIDDEN() throws Exception {", "originalCommit": "577e0cb7bea459cb1d8183d633c43a8a6fb5ea2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE1ODMzMw==", "url": "https://github.com/ls1intum/Artemis/pull/2066#discussion_r500158333", "bodyText": "Codacy found an issue: The JUnit 5 test method name 'testGetRatingForInstructorDashboard_asStudent_FORBIDDEN' doesn't match '[a-z][a-zA-Z0-9]*'", "author": "artemis-bot", "createdAt": "2020-10-06T10:08:27Z", "path": "src/test/java/de/tum/in/www1/artemis/RatingResourceIntegrationTest.java", "diffHunk": "@@ -162,4 +170,32 @@ public void testUpdateRating_asTutor_FORBIDDEN() throws Exception {\n         Rating updatedRating = ratingService.findRatingByResultId(savedRating.getResult().getId()).get();\n         assertThat(updatedRating.getRating()).isNotEqualTo(5);\n     }\n+\n+    @Test\n+    @WithMockUser(value = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void testGetRatingForInstructorDashboard_asInstructor() throws Exception {\n+        Rating savedRating = ratingService.saveRating(result.getId(), rating.getRating());\n+        final var ratings = request.getList(\"/api/course/\" + course.getId() + \"/rating\", HttpStatus.OK, Rating.class);\n+\n+        assertThat(ratings.size()).isEqualTo(1);\n+        assertThat(ratings.get(0).getId()).isEqualTo(savedRating.getId());\n+    }\n+\n+    @Test\n+    @WithMockUser(value = \"tutor1\", roles = \"TA\")\n+    public void testGetRatingForInstructorDashboard_asTutor_FORBIDDEN() throws Exception {\n+        request.getList(\"/api/course/\" + course.getId() + \"/rating\", HttpStatus.FORBIDDEN, Rating.class);\n+    }\n+\n+    @Test\n+    @WithMockUser(value = \"student1\", roles = \"USER\")\n+    public void testGetRatingForInstructorDashboard_asStudent_FORBIDDEN() throws Exception {", "originalCommit": "577e0cb7bea459cb1d8183d633c43a8a6fb5ea2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE1ODM0NQ==", "url": "https://github.com/ls1intum/Artemis/pull/2066#discussion_r500158345", "bodyText": "Codacy found an issue: The instance method name 'findAllByResult_Participation_Exercise_Course_Id' doesn't match '[a-z][a-zA-Z0-9]*'", "author": "artemis-bot", "createdAt": "2020-10-06T10:08:28Z", "path": "src/main/java/de/tum/in/www1/artemis/repository/RatingRepository.java", "diffHunk": "@@ -26,4 +27,6 @@\n      * @param resultId the Id of the result where the rating should be deleted\n      */\n     void deleteByResult_Id(long resultId);\n+\n+    List<Rating> findAllByResult_Participation_Exercise_Course_Id(Long courseId);", "originalCommit": "577e0cb7bea459cb1d8183d633c43a8a6fb5ea2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE1ODM1NQ==", "url": "https://github.com/ls1intum/Artemis/pull/2066#discussion_r500158355", "bodyText": "Codacy found an issue: The JUnit 5 test method name 'testGetRatingForInstructorDashboard_asInstructor' doesn't match '[a-z][a-zA-Z0-9]*'", "author": "artemis-bot", "createdAt": "2020-10-06T10:08:29Z", "path": "src/test/java/de/tum/in/www1/artemis/RatingResourceIntegrationTest.java", "diffHunk": "@@ -162,4 +170,32 @@ public void testUpdateRating_asTutor_FORBIDDEN() throws Exception {\n         Rating updatedRating = ratingService.findRatingByResultId(savedRating.getResult().getId()).get();\n         assertThat(updatedRating.getRating()).isNotEqualTo(5);\n     }\n+\n+    @Test\n+    @WithMockUser(value = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void testGetRatingForInstructorDashboard_asInstructor() throws Exception {", "originalCommit": "577e0cb7bea459cb1d8183d633c43a8a6fb5ea2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}