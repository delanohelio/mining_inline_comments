{"pr_number": 2109, "pr_title": "Sync feature toggle using Hazelcast map.", "pr_createdAt": "2020-09-19T18:24:01Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2109", "timeline": [{"oid": "cd70d5dfc1701eb28e38e60d88a1200dad12053c", "url": "https://github.com/ls1intum/Artemis/commit/cd70d5dfc1701eb28e38e60d88a1200dad12053c", "message": "Sync feature toggle using Hazelcast lists.", "committedDate": "2020-09-19T18:23:34Z", "type": "commit"}, {"oid": "cde47c3aca979bbd2d73ccbe96d4769c420bb68c", "url": "https://github.com/ls1intum/Artemis/commit/cde47c3aca979bbd2d73ccbe96d4769c420bb68c", "message": "Merge branch 'develop' into feature/sync-feature-toggle", "committedDate": "2020-09-23T15:53:48Z", "type": "commit"}, {"oid": "ee1e6170a23d929f468663982b2b6aeaccfecb9d", "url": "https://github.com/ls1intum/Artemis/commit/ee1e6170a23d929f468663982b2b6aeaccfecb9d", "message": "Rename FeatureToggleService back.", "committedDate": "2020-09-24T11:15:19Z", "type": "commit"}, {"oid": "7169e858041b403af18cd458c6c851c5e9df56f0", "url": "https://github.com/ls1intum/Artemis/commit/7169e858041b403af18cd458c6c851c5e9df56f0", "message": "Merge branch 'develop' into feature/sync-feature-toggle", "committedDate": "2020-09-29T09:03:49Z", "type": "commit"}, {"oid": "b96524bce3b7cf93652b8b0799fb4b27f4683469", "url": "https://github.com/ls1intum/Artemis/commit/b96524bce3b7cf93652b8b0799fb4b27f4683469", "message": "Add some comments.", "committedDate": "2020-09-29T09:19:01Z", "type": "commit"}, {"oid": "e741e2114e7d4758a2636b59a40080d5019cc536", "url": "https://github.com/ls1intum/Artemis/commit/e741e2114e7d4758a2636b59a40080d5019cc536", "message": "Add/Adjust test cases.", "committedDate": "2020-09-29T09:51:51Z", "type": "commit"}, {"oid": "6a47460bf58d0174481e887403f399510aaf1d2d", "url": "https://github.com/ls1intum/Artemis/commit/6a47460bf58d0174481e887403f399510aaf1d2d", "message": "Merge branch 'develop' into feature/sync-feature-toggle", "committedDate": "2020-09-29T09:52:11Z", "type": "commit"}, {"oid": "0b4054ab917736ca7c4f28b62574a3c14964f928", "url": "https://github.com/ls1intum/Artemis/commit/0b4054ab917736ca7c4f28b62574a3c14964f928", "message": "Merge branch 'develop' into feature/sync-feature-toggle", "committedDate": "2020-09-29T17:22:03Z", "type": "commit"}, {"oid": "c44a8441d82d7696bff45f913c7ede0858767af4", "url": "https://github.com/ls1intum/Artemis/commit/c44a8441d82d7696bff45f913c7ede0858767af4", "message": "Merge branch 'develop' into feature/sync-feature-toggle", "committedDate": "2020-09-29T19:05:58Z", "type": "commit"}, {"oid": "0c75976894549cef77af594c7d8995eefe106d66", "url": "https://github.com/ls1intum/Artemis/commit/0c75976894549cef77af594c7d8995eefe106d66", "message": "Reset feature state after tests.", "committedDate": "2020-09-30T08:19:59Z", "type": "commit"}, {"oid": "5d50669347af7cda4227d34f95c4e9e4dfa073a4", "url": "https://github.com/ls1intum/Artemis/commit/5d50669347af7cda4227d34f95c4e9e4dfa073a4", "message": "Merge remote-tracking branch 'origin/feature/sync-feature-toggle' into feature/sync-feature-toggle", "committedDate": "2020-09-30T08:20:12Z", "type": "commit"}, {"oid": "28ec2fe7c67279d18654e5e18b3350d04771e874", "url": "https://github.com/ls1intum/Artemis/commit/28ec2fe7c67279d18654e5e18b3350d04771e874", "message": "Merge branch 'develop' into feature/sync-feature-toggle", "committedDate": "2020-09-30T08:26:29Z", "type": "commit"}, {"oid": "edafe0844a13a639b75396f5aadbe6fab1028d6c", "url": "https://github.com/ls1intum/Artemis/commit/edafe0844a13a639b75396f5aadbe6fab1028d6c", "message": "Remove unneeded ZonedDateTime.", "committedDate": "2020-09-30T08:28:14Z", "type": "commit"}, {"oid": "c28d2672ddbcb75857fea48a058d9c2a4ce61758", "url": "https://github.com/ls1intum/Artemis/commit/c28d2672ddbcb75857fea48a058d9c2a4ce61758", "message": "Merge remote-tracking branch 'origin/feature/sync-feature-toggle' into feature/sync-feature-toggle", "committedDate": "2020-09-30T08:29:29Z", "type": "commit"}, {"oid": "e7eecdfed80101cc760a168cc0273e266d8a916a", "url": "https://github.com/ls1intum/Artemis/commit/e7eecdfed80101cc760a168cc0273e266d8a916a", "message": "Add sleep after disabling.", "committedDate": "2020-09-30T09:17:11Z", "type": "commit"}, {"oid": "c282089846ac81e77d00e9db75a755d49db9e9bc", "url": "https://github.com/ls1intum/Artemis/commit/c282089846ac81e77d00e9db75a755d49db9e9bc", "message": "Add more sleep.", "committedDate": "2020-09-30T11:40:38Z", "type": "commit"}, {"oid": "51fd3555cb1e09e41e7ad876ca942db61f5841c7", "url": "https://github.com/ls1intum/Artemis/commit/51fd3555cb1e09e41e7ad876ca942db61f5841c7", "message": "Merge branch 'develop' into feature/sync-feature-toggle", "committedDate": "2020-10-05T19:14:39Z", "type": "commit"}, {"oid": "fc8107c8548b0d2bb06c80e2a14a46ce30d493b0", "url": "https://github.com/ls1intum/Artemis/commit/fc8107c8548b0d2bb06c80e2a14a46ce30d493b0", "message": "Use Map instead of two lists.", "committedDate": "2020-10-05T21:06:57Z", "type": "commit"}, {"oid": "3935154fc3d318f1ec1a9ba57fbcbfbfa5041211", "url": "https://github.com/ls1intum/Artemis/commit/3935154fc3d318f1ec1a9ba57fbcbfbfa5041211", "message": "Merge remote-tracking branch 'origin/feature/sync-feature-toggle' into feature/sync-feature-toggle", "committedDate": "2020-10-05T21:09:10Z", "type": "commit"}, {"oid": "32ab3941489dd8457f1fc758dac7762860c2870d", "url": "https://github.com/ls1intum/Artemis/commit/32ab3941489dd8457f1fc758dac7762860c2870d", "message": "Merge branch 'develop' into feature/sync-feature-toggle", "committedDate": "2020-10-06T09:50:59Z", "type": "commit"}, {"oid": "965cdc1f7d6ce7d69f336818c7cc13c946b44e85", "url": "https://github.com/ls1intum/Artemis/commit/965cdc1f7d6ce7d69f336818c7cc13c946b44e85", "message": "Adjust comment.", "committedDate": "2020-10-06T10:03:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE2MDI1OQ==", "url": "https://github.com/ls1intum/Artemis/pull/2109#discussion_r500160259", "bodyText": "Codacy found an issue: Missing a Javadoc comment.", "author": "artemis-bot", "createdAt": "2020-10-06T10:11:55Z", "path": "src/test/java/de/tum/in/www1/artemis/service/FeatureToggleServiceTest.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import static org.junit.jupiter.api.Assertions.*;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.junit.jupiter.api.AfterEach;\n+import org.junit.jupiter.api.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+\n+import de.tum.in.www1.artemis.AbstractSpringIntegrationBambooBitbucketJiraTest;\n+import de.tum.in.www1.artemis.service.feature.Feature;\n+import de.tum.in.www1.artemis.service.feature.FeatureToggleService;\n+\n+public class FeatureToggleServiceTest extends AbstractSpringIntegrationBambooBitbucketJiraTest {\n+\n+    @Autowired\n+    FeatureToggleService featureToggleService;\n+\n+    @AfterEach\n+    public void checkReset() {\n+        // Verify that the test has resetted the state\n+        // Must be extended if additional features are added\n+        assertTrue(featureToggleService.isFeatureEnabled(Feature.PROGRAMMING_EXERCISES));\n+    }\n+\n+    @Test\n+    public void testSetFeaturesEnabled() {\n+        Map<Feature, Boolean> featureStates = new HashMap<>();\n+        featureStates.put(Feature.PROGRAMMING_EXERCISES, true);\n+        featureToggleService.updateFeatureToggles(featureStates);\n+        assertTrue(featureToggleService.isFeatureEnabled(Feature.PROGRAMMING_EXERCISES));\n+    }\n+\n+    @Test", "originalCommit": "965cdc1f7d6ce7d69f336818c7cc13c946b44e85", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE2MDI2Nw==", "url": "https://github.com/ls1intum/Artemis/pull/2109#discussion_r500160267", "bodyText": "Codacy found an issue: Useless parentheses.", "author": "artemis-bot", "createdAt": "2020-10-06T10:11:56Z", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ParticipationResource.java", "diffHunk": "@@ -127,7 +131,8 @@ public ParticipationResource(ParticipationService participationService, Programm\n         // Also don't allow participations if the feature is disabled\n         if (exercise instanceof ProgrammingExercise) {\n             var programmingExercise = (ProgrammingExercise) exercise;\n-            if (!Feature.PROGRAMMING_EXERCISES.isEnabled() || (programmingExercise.getDueDate() != null && ZonedDateTime.now().isAfter(programmingExercise.getDueDate())\n+            if (!featureToggleService.isFeatureEnabled(Feature.PROGRAMMING_EXERCISES) || (programmingExercise.getDueDate() != null", "originalCommit": "965cdc1f7d6ce7d69f336818c7cc13c946b44e85", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "da8b0f94c4d5a2ad6923c7639fee0548bf74cc9f", "url": "https://github.com/ls1intum/Artemis/commit/da8b0f94c4d5a2ad6923c7639fee0548bf74cc9f", "message": "Merge branch 'develop' into feature/sync-feature-toggle", "committedDate": "2020-10-06T19:03:30Z", "type": "commit"}, {"oid": "a3dc8eea82a279c01d51ed658ae346249475c1e7", "url": "https://github.com/ls1intum/Artemis/commit/a3dc8eea82a279c01d51ed658ae346249475c1e7", "message": "Remove sleep.", "committedDate": "2020-10-06T19:21:23Z", "type": "commit"}, {"oid": "e9c723e96689260dbe200b87db60bf454d30139c", "url": "https://github.com/ls1intum/Artemis/commit/e9c723e96689260dbe200b87db60bf454d30139c", "message": "Remove sleep.", "committedDate": "2020-10-06T19:25:10Z", "type": "commit"}]}