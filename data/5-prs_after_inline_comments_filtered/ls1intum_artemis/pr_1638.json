{"pr_number": 1638, "pr_title": "Feature: Add broker for websocket messages", "pr_createdAt": "2020-06-11T17:11:56Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1638", "timeline": [{"oid": "e975c91bcf4405612f9ca01be9fd96d885d05085", "url": "https://github.com/ls1intum/Artemis/commit/e975c91bcf4405612f9ca01be9fd96d885d05085", "message": "Add jhipster registry & hazelcast.", "committedDate": "2020-05-11T21:45:32Z", "type": "commit"}, {"oid": "44213412f165236be423f8672f1abca837198a2a", "url": "https://github.com/ls1intum/Artemis/commit/44213412f165236be423f8672f1abca837198a2a", "message": "Remove ehcache config.", "committedDate": "2020-05-12T07:36:27Z", "type": "commit"}, {"oid": "221acb104fda23a15ea6609bb2013d85eb9d9411", "url": "https://github.com/ls1intum/Artemis/commit/221acb104fda23a15ea6609bb2013d85eb9d9411", "message": "Disable spring cloud config for now.", "committedDate": "2020-05-12T08:22:50Z", "type": "commit"}, {"oid": "3a3c203d0ae0708f3988cfb4b449454ea1db9c88", "url": "https://github.com/ls1intum/Artemis/commit/3a3c203d0ae0708f3988cfb4b449454ea1db9c88", "message": "Add documentation for hazelcastInstance.", "committedDate": "2020-05-12T08:37:48Z", "type": "commit"}, {"oid": "b9c1a4cc81ae9fcf046867728d594be9c82a6f92", "url": "https://github.com/ls1intum/Artemis/commit/b9c1a4cc81ae9fcf046867728d594be9c82a6f92", "message": "Add hazelcast management center.", "committedDate": "2020-05-12T15:33:07Z", "type": "commit"}, {"oid": "bd586465c29a7f6b034a2e7ddeb437da21341cb4", "url": "https://github.com/ls1intum/Artemis/commit/bd586465c29a7f6b034a2e7ddeb437da21341cb4", "message": "Merge branch 'develop' into feature/jhipster-registry", "committedDate": "2020-05-13T11:30:16Z", "type": "commit"}, {"oid": "7b565abfe28ae542088cc3b4ebec4d976c906aba", "url": "https://github.com/ls1intum/Artemis/commit/7b565abfe28ae542088cc3b4ebec4d976c906aba", "message": "Use dev deployment for now in prod profile for Hazelcast.", "committedDate": "2020-05-14T16:29:14Z", "type": "commit"}, {"oid": "61c5aa4d2f52366e31c43e68e2d6172564ed32b5", "url": "https://github.com/ls1intum/Artemis/commit/61c5aa4d2f52366e31c43e68e2d6172564ed32b5", "message": "Merge branch 'develop' into feature/jhipster-registry", "committedDate": "2020-05-25T07:17:50Z", "type": "commit"}, {"oid": "a84c416adfd84c969de68fd01dcfa7c57c9f3927", "url": "https://github.com/ls1intum/Artemis/commit/a84c416adfd84c969de68fd01dcfa7c57c9f3927", "message": "Resolve merge conflict.", "committedDate": "2020-05-25T07:59:33Z", "type": "commit"}, {"oid": "225eaa7879494f8d826d8c443373cf311da34aab", "url": "https://github.com/ls1intum/Artemis/commit/225eaa7879494f8d826d8c443373cf311da34aab", "message": "Unify duplicated keys in config.", "committedDate": "2020-05-25T09:54:08Z", "type": "commit"}, {"oid": "0b8501cb6a3a385c20d366d6f3700bf25b74b541", "url": "https://github.com/ls1intum/Artemis/commit/0b8501cb6a3a385c20d366d6f3700bf25b74b541", "message": "Merge branch 'develop' into feature/jhipster-registry", "committedDate": "2020-05-26T21:01:52Z", "type": "commit"}, {"oid": "600026ed1818088e8f93cc8d1afcf22f4505b2c4", "url": "https://github.com/ls1intum/Artemis/commit/600026ed1818088e8f93cc8d1afcf22f4505b2c4", "message": "Change some log messages to INFO.", "committedDate": "2020-05-27T21:24:59Z", "type": "commit"}, {"oid": "0e658dd559b373fa9e8e0847ee411f88b5ffafba", "url": "https://github.com/ls1intum/Artemis/commit/0e658dd559b373fa9e8e0847ee411f88b5ffafba", "message": "Merge remote-tracking branch 'origin/feature/jhipster-registry' into feature/jhipster-registry", "committedDate": "2020-05-27T21:27:11Z", "type": "commit"}, {"oid": "614331ce93910fba8ddd668cc5a396f5a3f6f8ab", "url": "https://github.com/ls1intum/Artemis/commit/614331ce93910fba8ddd668cc5a396f5a3f6f8ab", "message": "Start adding registry for websocket messages.", "committedDate": "2020-06-02T16:18:57Z", "type": "commit"}, {"oid": "2dd49ff2ab3b0fd475ce36ef288f411ff2ddc13b", "url": "https://github.com/ls1intum/Artemis/commit/2dd49ff2ab3b0fd475ce36ef288f411ff2ddc13b", "message": "Merge branch 'develop' into feature/jhipster-registry", "committedDate": "2020-06-02T16:20:48Z", "type": "commit"}, {"oid": "46d84727e9cb358874eb0f1de986f68650fc0249", "url": "https://github.com/ls1intum/Artemis/commit/46d84727e9cb358874eb0f1de986f68650fc0249", "message": "Merge branch 'develop' into feature/jhipster-registry", "committedDate": "2020-06-04T18:21:01Z", "type": "commit"}, {"oid": "30a009d25a2d609981700c4267b145a9ba8dfd54", "url": "https://github.com/ls1intum/Artemis/commit/30a009d25a2d609981700c4267b145a9ba8dfd54", "message": "Set User Destination & Registry Broadcast, change team map to hazelcast.", "committedDate": "2020-06-04T23:11:43Z", "type": "commit"}, {"oid": "79cf06e7ab3f8421f142674f0b01031e3cf1fab3", "url": "https://github.com/ls1intum/Artemis/commit/79cf06e7ab3f8421f142674f0b01031e3cf1fab3", "message": "Merge branch 'develop' into feature/jhipster-registry", "committedDate": "2020-06-07T09:12:49Z", "type": "commit"}, {"oid": "f5144e833ef1c95068fd922d7800c0399d0179fe", "url": "https://github.com/ls1intum/Artemis/commit/f5144e833ef1c95068fd922d7800c0399d0179fe", "message": "Merge branch 'develop' into feature/websocket-broker", "committedDate": "2020-06-10T21:43:23Z", "type": "commit"}, {"oid": "c5eb2919f3d080906da64b6c83488f1487fcec15", "url": "https://github.com/ls1intum/Artemis/commit/c5eb2919f3d080906da64b6c83488f1487fcec15", "message": "Add multi host support.", "committedDate": "2020-06-10T22:47:33Z", "type": "commit"}, {"oid": "c6b7e4317622a3eccfeb777364381903a95d1195", "url": "https://github.com/ls1intum/Artemis/commit/c6b7e4317622a3eccfeb777364381903a95d1195", "message": "Use Activemq Artemis, add fallback handling to WS config.", "committedDate": "2020-06-11T15:21:35Z", "type": "commit"}, {"oid": "73417052505ea30c19fc81793a02ec89cdc2aa72", "url": "https://github.com/ls1intum/Artemis/commit/73417052505ea30c19fc81793a02ec89cdc2aa72", "message": "Adjust versions of dependencies.", "committedDate": "2020-06-11T21:00:43Z", "type": "commit"}, {"oid": "ffa09544b86b256fb7f1c88610c695b32cbff2b1", "url": "https://github.com/ls1intum/Artemis/commit/ffa09544b86b256fb7f1c88610c695b32cbff2b1", "message": "Update comments, adjust config.", "committedDate": "2020-06-11T21:10:44Z", "type": "commit"}, {"oid": "c0e44786c7b91309beeda12c3fb7728a6ef5f330", "url": "https://github.com/ls1intum/Artemis/commit/c0e44786c7b91309beeda12c3fb7728a6ef5f330", "message": "Add small comment.", "committedDate": "2020-06-11T21:12:43Z", "type": "commit"}, {"oid": "907b3b07e61f43fca6ea5483730dd02d68dc4128", "url": "https://github.com/ls1intum/Artemis/commit/907b3b07e61f43fca6ea5483730dd02d68dc4128", "message": "Add config options to test config.", "committedDate": "2020-06-11T21:48:56Z", "type": "commit"}, {"oid": "44b35ca2a616a8d1f5e3af79b6e0e70627e0f681", "url": "https://github.com/ls1intum/Artemis/commit/44b35ca2a616a8d1f5e3af79b6e0e70627e0f681", "message": "Add comments to broker relay config.", "committedDate": "2020-06-14T20:20:20Z", "type": "commit"}, {"oid": "aa5d79e5d817e735feab4ce736c719baae68405b", "url": "https://github.com/ls1intum/Artemis/commit/aa5d79e5d817e735feab4ce736c719baae68405b", "message": "Do not enable both relay and simp registry.", "committedDate": "2020-06-15T07:51:32Z", "type": "commit"}, {"oid": "058ff4eb358b3f18ee82359093dc7d39d987e454", "url": "https://github.com/ls1intum/Artemis/commit/058ff4eb358b3f18ee82359093dc7d39d987e454", "message": "Fix small issue with detecing personal/non-personal participation.", "committedDate": "2020-06-15T11:43:22Z", "type": "commit"}, {"oid": "9f5959b659590fd215f9d3b1a39314513ad4dc1c", "url": "https://github.com/ls1intum/Artemis/commit/9f5959b659590fd215f9d3b1a39314513ad4dc1c", "message": "Merge branch 'develop' into feature/websocket-broker", "committedDate": "2020-06-15T13:30:19Z", "type": "commit"}, {"oid": "78d306da591f2eb6901825ef93b62056cfd0eeb5", "url": "https://github.com/ls1intum/Artemis/commit/78d306da591f2eb6901825ef93b62056cfd0eeb5", "message": "Simplify expression.", "committedDate": "2020-06-15T13:36:29Z", "type": "commit"}, {"oid": "71f645decc3f23012c3d0f1c5bf7cd40fb5bfced", "url": "https://github.com/ls1intum/Artemis/commit/71f645decc3f23012c3d0f1c5bf7cd40fb5bfced", "message": "Prevent multiple subscriptions for same user.", "committedDate": "2020-06-16T10:12:30Z", "type": "commit"}, {"oid": "3a1622bbd1462b41c5111ba98833284fc77f4604", "url": "https://github.com/ls1intum/Artemis/commit/3a1622bbd1462b41c5111ba98833284fc77f4604", "message": "Merge remote-tracking branch 'origin/feature/websocket-broker' into feature/websocket-broker", "committedDate": "2020-06-16T10:28:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA1OTQ1NA==", "url": "https://github.com/ls1intum/Artemis/pull/1638#discussion_r441059454", "bodyText": "\"If tcpClient is null...\"?", "author": "kloessst", "createdAt": "2020-06-16T18:30:13Z", "path": "src/main/java/de/tum/in/www1/artemis/config/websocket/WebsocketConfiguration.java", "diffHunk": "@@ -118,9 +131,54 @@ public void init() {\n \n     @Override\n     public void configureMessageBroker(MessageBrokerRegistry config) {\n-        config.enableSimpleBroker(\"/topic\").setHeartbeatValue(new long[] { 10000, 20000 }).setTaskScheduler(messageBrokerTaskScheduler);\n-        // increase the limit of concurrent connections (default is 1024 which is much too low)\n-        // config.setCacheLimit(10000);\n+        // Try to create a TCP client that will connect to the message broker (or the message brokers if multiple exists).\n+        // If tcpClient, there is no valid address specified in the config. This could be due to a development setup or a mistake in the config.", "originalCommit": "3a1622bbd1462b41c5111ba98833284fc77f4604", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA4NTY3OA==", "url": "https://github.com/ls1intum/Artemis/pull/1638#discussion_r441085678", "bodyText": "Good catch!", "author": "sleiss", "createdAt": "2020-06-16T19:17:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA1OTQ1NA=="}], "type": "inlineReview"}, {"oid": "fe64f5b56e82c97889bc75f4f9f66de2e48b003e", "url": "https://github.com/ls1intum/Artemis/commit/fe64f5b56e82c97889bc75f4f9f66de2e48b003e", "message": "Merge branch 'develop' into feature/websocket-broker", "committedDate": "2020-06-16T19:14:37Z", "type": "commit"}, {"oid": "aab1776ce773a27f3352832abbfefc5beab23427", "url": "https://github.com/ls1intum/Artemis/commit/aab1776ce773a27f3352832abbfefc5beab23427", "message": "Fix mistake in documentation.", "committedDate": "2020-06-16T19:16:00Z", "type": "commit"}, {"oid": "1cb9016815a5a63996095801dd008154d5ec77ab", "url": "https://github.com/ls1intum/Artemis/commit/1cb9016815a5a63996095801dd008154d5ec77ab", "message": "Merge remote-tracking branch 'origin/feature/websocket-broker' into feature/websocket-broker", "committedDate": "2020-06-16T19:17:19Z", "type": "commit"}, {"oid": "7d607edcb5092e82e7556da58b7e73a3c3b1a3a3", "url": "https://github.com/ls1intum/Artemis/commit/7d607edcb5092e82e7556da58b7e73a3c3b1a3a3", "message": "update server dependencies", "committedDate": "2020-06-16T19:33:41Z", "type": "commit"}, {"oid": "7c6a469447aaafcceddef81a11f14869cd43fafb", "url": "https://github.com/ls1intum/Artemis/commit/7c6a469447aaafcceddef81a11f14869cd43fafb", "message": "small code improvements", "committedDate": "2020-06-16T21:22:13Z", "type": "commit"}, {"oid": "66d3ae31e882d0456d380a54e7417bb26e9a102f", "url": "https://github.com/ls1intum/Artemis/commit/66d3ae31e882d0456d380a54e7417bb26e9a102f", "message": "Merge branch 'develop' into feature/websocket-broker", "committedDate": "2020-06-16T22:12:08Z", "type": "commit"}, {"oid": "b4b4e209ae34acdacf065f0ef9363458b9b220cc", "url": "https://github.com/ls1intum/Artemis/commit/b4b4e209ae34acdacf065f0ef9363458b9b220cc", "message": "Make STOMP header extraction generic.", "committedDate": "2020-06-17T12:00:34Z", "type": "commit"}, {"oid": "3fb9da1886d794954ebd0721c59067c82a0af9bf", "url": "https://github.com/ls1intum/Artemis/commit/3fb9da1886d794954ebd0721c59067c82a0af9bf", "message": "Merge remote-tracking branch 'origin/feature/websocket-broker' into feature/websocket-broker", "committedDate": "2020-06-17T12:00:52Z", "type": "commit"}, {"oid": "c7354209d84b6942a65bebe1252f11541cd2a8e2", "url": "https://github.com/ls1intum/Artemis/commit/c7354209d84b6942a65bebe1252f11541cd2a8e2", "message": "Set WS heartbeats to 10000/10000.", "committedDate": "2020-06-17T12:05:06Z", "type": "commit"}, {"oid": "93ddeec80120dca8f9a0aded0240fbd123d50800", "url": "https://github.com/ls1intum/Artemis/commit/93ddeec80120dca8f9a0aded0240fbd123d50800", "message": "Set sub-id manually.", "committedDate": "2020-06-18T09:19:09Z", "type": "commit"}, {"oid": "7aba55ff8966e986d704aa66c846f6a3ee8dcc43", "url": "https://github.com/ls1intum/Artemis/commit/7aba55ff8966e986d704aa66c846f6a3ee8dcc43", "message": "Add more debug.", "committedDate": "2020-06-18T10:18:35Z", "type": "commit"}, {"oid": "b03e9fb9e103f0ffe148b416ba8b09452607ff29", "url": "https://github.com/ls1intum/Artemis/commit/b03e9fb9e103f0ffe148b416ba8b09452607ff29", "message": "Add more debug.", "committedDate": "2020-06-18T10:30:13Z", "type": "commit"}, {"oid": "0b593339703d3e0b34baeb077f7a6d83d3764be3", "url": "https://github.com/ls1intum/Artemis/commit/0b593339703d3e0b34baeb077f7a6d83d3764be3", "message": "Remove unneeded code as subscription ids are now unique.", "committedDate": "2020-06-18T11:33:02Z", "type": "commit"}, {"oid": "49b2268fb37cca23d8efeda7f3d81e1c0059eaab", "url": "https://github.com/ls1intum/Artemis/commit/49b2268fb37cca23d8efeda7f3d81e1c0059eaab", "message": "Use subscriptionCounter.", "committedDate": "2020-06-18T13:11:19Z", "type": "commit"}]}