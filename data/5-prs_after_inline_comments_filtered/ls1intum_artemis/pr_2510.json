{"pr_number": 2510, "pr_title": "[Feature] Learning Goals", "pr_createdAt": "2020-12-07T10:54:55Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2510", "timeline": [{"oid": "3c4d9747a79900126a4aafe9573a2f49ef983a34", "url": "https://github.com/ls1intum/Artemis/commit/3c4d9747a79900126a4aafe9573a2f49ef983a34", "message": "Fixed further merge conflict", "committedDate": "2020-12-12T17:12:04Z", "type": "commit"}, {"oid": "b100691dd427aeb5a565bef8595080df3dc2ac52", "url": "https://github.com/ls1intum/Artemis/commit/b100691dd427aeb5a565bef8595080df3dc2ac52", "message": "Fixed Rounding and null check", "committedDate": "2020-12-12T17:34:28Z", "type": "commit"}, {"oid": "296c819cef6cebf878857708bfc738091d3d32fa", "url": "https://github.com/ls1intum/Artemis/commit/296c819cef6cebf878857708bfc738091d3d32fa", "message": "Solving issues found by codacy", "committedDate": "2020-12-14T08:53:59Z", "type": "commit"}, {"oid": "e3718af4662982de283e2c54bd4f539b392d1def", "url": "https://github.com/ls1intum/Artemis/commit/e3718af4662982de283e2c54bd4f539b392d1def", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-14T08:54:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI1NjQ4MQ==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r542256481", "bodyText": "is this TODO for a later PR?", "author": "derLalla", "createdAt": "2020-12-14T10:01:16Z", "path": "src/main/java/de/tum/in/www1/artemis/domain/LearningGoal.java", "diffHunk": "@@ -25,16 +25,20 @@\n \n     @ManyToOne\n     @JoinColumn(name = \"course_id\")\n+    @JsonIgnoreProperties(\"learningGoals\")\n     private Course course;\n \n+    // ToDo remove this connection, only go through lecture units", "originalCommit": "e3718af4662982de283e2c54bd4f539b392d1def", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU5NTc2Ng==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r542595766", "bodyText": "Done in : c70aa0f", "author": "stefanwaldhauser", "createdAt": "2020-12-14T18:07:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI1NjQ4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI1ODczNQ==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r542258735", "bodyText": "it would be nice to have a consistent writing style: In other queries your are using SELECT in uppercase (which looks way more beautiful ;) )", "author": "derLalla", "createdAt": "2020-12-14T10:04:39Z", "path": "src/main/java/de/tum/in/www1/artemis/repository/StudentParticipationRepository.java", "diffHunk": "@@ -88,12 +88,25 @@\n     @Query(\"select distinct participation from StudentParticipation participation left join fetch participation.submissions where participation.exercise.id = :#{#exerciseId} and participation.student.id = :#{#studentId}\")\n     List<StudentParticipation> findByExerciseIdAndStudentIdWithEagerSubmissions(@Param(\"exerciseId\") Long exerciseId, @Param(\"studentId\") Long studentId);\n \n+    @Query(\"\"\"\n+            select distinct participation\n+            from StudentParticipation participation\n+            where participation.exercise.id = :#{#exerciseId} and participation.student.id = :#{#studentId}\"\"\")\n+    List<StudentParticipation> findByExerciseIdAndStudentId(@Param(\"exerciseId\") Long exerciseId, @Param(\"studentId\") Long studentId);\n+\n     @Query(\"select distinct participation from StudentParticipation participation left join fetch participation.results left join fetch participation.submissions where participation.exercise.id = :#{#exerciseId} and participation.student.id = :#{#studentId}\")\n     List<StudentParticipation> findByExerciseIdAndStudentIdWithEagerResultsAndSubmissions(@Param(\"exerciseId\") Long exerciseId, @Param(\"studentId\") Long studentId);\n \n     @Query(\"select distinct participation from StudentParticipation participation left join fetch participation.submissions where participation.exercise.id = :#{#exerciseId} and participation.team.id = :#{#teamId}\")\n     List<StudentParticipation> findByExerciseIdAndTeamIdWithEagerSubmissions(@Param(\"exerciseId\") Long exerciseId, @Param(\"teamId\") Long teamId);\n \n+    @Query(\"\"\"\n+            select distinct participation", "originalCommit": "e3718af4662982de283e2c54bd4f539b392d1def", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU5NTgzNQ==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r542595835", "bodyText": "c70aa0f", "author": "stefanwaldhauser", "createdAt": "2020-12-14T18:07:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI1ODczNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI2MDk5MQ==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r542260991", "bodyText": "here you could combine both filters into one:\n.filter(exerciseUnit -> exerciseUnit.getExercise() != null && exerciseUnit.getExercise().isAssessmentDueDateOver()).collect(...", "author": "derLalla", "createdAt": "2020-12-14T10:07:54Z", "path": "src/main/java/de/tum/in/www1/artemis/service/LearningGoalService.java", "diffHunk": "@@ -0,0 +1,160 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.math.BigDecimal;\n+import java.math.RoundingMode;\n+import java.util.*;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.lecture.ExerciseUnit;\n+import de.tum.in.www1.artemis.domain.lecture.LectureUnit;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.web.rest.dto.LearningGoalProgress;\n+\n+@Service\n+public class LearningGoalService {\n+\n+    private final ParticipationService participationService;\n+\n+    public LearningGoalService(ParticipationService participationService) {\n+        this.participationService = participationService;\n+    }\n+\n+    /**\n+     * Calculates the progress of the given user in the given exercise units\n+     *\n+     * Note: In the case of two exercise units referencing the same exercise, only the first exercise unit will be used.\n+     *\n+     * Note: Please note that we take always the last submission into account here. Even submissions after the due date. This means for example that a student can improve his/her\n+     * progress by re-trying a quiz as often as you like. It is therefore normal, that the points here might differ from the points officially achieved in an exercise.\n+     *\n+     * @param exerciseUnits exercise units to check\n+     * @param user user to check for\n+     * @return progress of the user in the exercise units\n+     */\n+    public Set<LearningGoalProgress.LectureUnitProgress> calculateExerciseUnitsProgress(Set<ExerciseUnit> exerciseUnits, User user) {\n+        // for each exercise unit, the exercise will be mapped to a freshly created lecture unit progress.\n+        Map<Exercise, LearningGoalProgress.LectureUnitProgress> exerciseToLectureUnitProgress = exerciseUnits.stream().filter(exerciseUnit -> exerciseUnit.getExercise() != null)\n+                .filter(exerciseUnit -> exerciseUnit.getExercise().isAssessmentDueDateOver()).collect(Collectors.toMap(ExerciseUnit::getExercise, exerciseUnit -> {", "originalCommit": "e3718af4662982de283e2c54bd4f539b392d1def", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU5NTg4Nw==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r542595887", "bodyText": "c70aa0f", "author": "stefanwaldhauser", "createdAt": "2020-12-14T18:07:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI2MDk5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI2Mjk0Mg==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r542262942", "bodyText": "Suggested change", "author": "derLalla", "createdAt": "2020-12-14T10:10:48Z", "path": "src/main/java/de/tum/in/www1/artemis/service/LearningGoalService.java", "diffHunk": "@@ -0,0 +1,160 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.math.BigDecimal;\n+import java.math.RoundingMode;\n+import java.util.*;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.lecture.ExerciseUnit;\n+import de.tum.in.www1.artemis.domain.lecture.LectureUnit;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.web.rest.dto.LearningGoalProgress;\n+\n+@Service\n+public class LearningGoalService {\n+\n+    private final ParticipationService participationService;\n+\n+    public LearningGoalService(ParticipationService participationService) {\n+        this.participationService = participationService;\n+    }\n+\n+    /**\n+     * Calculates the progress of the given user in the given exercise units\n+     *\n+     * Note: In the case of two exercise units referencing the same exercise, only the first exercise unit will be used.\n+     *\n+     * Note: Please note that we take always the last submission into account here. Even submissions after the due date. This means for example that a student can improve his/her\n+     * progress by re-trying a quiz as often as you like. It is therefore normal, that the points here might differ from the points officially achieved in an exercise.\n+     *\n+     * @param exerciseUnits exercise units to check\n+     * @param user user to check for\n+     * @return progress of the user in the exercise units\n+     */\n+    public Set<LearningGoalProgress.LectureUnitProgress> calculateExerciseUnitsProgress(Set<ExerciseUnit> exerciseUnits, User user) {\n+        // for each exercise unit, the exercise will be mapped to a freshly created lecture unit progress.\n+        Map<Exercise, LearningGoalProgress.LectureUnitProgress> exerciseToLectureUnitProgress = exerciseUnits.stream().filter(exerciseUnit -> exerciseUnit.getExercise() != null)\n+                .filter(exerciseUnit -> exerciseUnit.getExercise().isAssessmentDueDateOver()).collect(Collectors.toMap(ExerciseUnit::getExercise, exerciseUnit -> {\n+                    LearningGoalProgress.LectureUnitProgress lectureUnitProgress = new LearningGoalProgress.LectureUnitProgress();\n+                    lectureUnitProgress.lectureTitle = exerciseUnit.getLecture().getTitle();\n+                    lectureUnitProgress.lectureId = exerciseUnit.getLecture().getId();\n+                    lectureUnitProgress.lectureUnitId = exerciseUnit.getId();\n+                    lectureUnitProgress.lectureUnitTitle = exerciseUnit.getExercise().getTitle();\n+                    lectureUnitProgress.totalPointsAchievableByStudentsInLectureUnit = exerciseUnit.getExercise().getMaxScore();\n+                    return lectureUnitProgress;\n+                }, (progress1, progress2) -> progress1)); // in the case of two exercises referencing the same exercise, take the first one\n+\n+        List<Exercise> individualExercises = exerciseToLectureUnitProgress.keySet().stream().filter(exercise -> !exercise.isTeamMode()).collect(Collectors.toList());\n+        List<Exercise> teamExercises = exerciseToLectureUnitProgress.keySet().stream().filter(Exercise::isTeamMode).collect(Collectors.toList());\n+\n+        // for all relevant exercises the participations with submissions and results will be batch loaded\n+        List<StudentParticipation> participationsOfTheStudent = getStudentParticipationsWithSubmissionsAndResults(user, individualExercises, teamExercises);\n+\n+        // exercise -> participation -> submission -> result until possibly the latest result is found for the student\n+        for (Exercise exercise : exerciseToLectureUnitProgress.keySet()) {\n+            Optional<Result> optionalResult = findLastResultOfExerciseInListOfParticipatons(exercise, participationsOfTheStudent);\n+\n+            if (optionalResult.isEmpty()) {\n+                exerciseToLectureUnitProgress.get(exercise).pointsAchievedByStudentInLectureUnit = 0.0;\n+            }\n+            else {\n+                Result result = optionalResult.get();\n+                if (result.getScore() == null) {\n+                    exerciseToLectureUnitProgress.get(exercise).pointsAchievedByStudentInLectureUnit = 0.0;\n+                }\n+                else {\n+                    BigDecimal points = new BigDecimal((result.getScore() / 100.0) * exercise.getMaxScore());\n+                    points = points.setScale(2, RoundingMode.HALF_EVEN);\n+                    exerciseToLectureUnitProgress.get(exercise).pointsAchievedByStudentInLectureUnit = points.doubleValue();\n+                }\n+            }\n+\n+        }\n+\n+        return new HashSet<>(exerciseToLectureUnitProgress.values());\n+    }\n+\n+    /**\n+     * Finds the latest result for a given exercise in a list of relevant participations\n+     * @param exercise exercise to find the result for\n+     * @param participationsList participations with submissions and results that should be checked\n+     * @return optional containing the last result or else an empty optional\n+     */\n+    private Optional<Result> findLastResultOfExerciseInListOfParticipatons(Exercise exercise, List<StudentParticipation> participationsList) {\n+        StudentParticipation relevantParticipation = exercise.findRelevantParticipation(participationsList);\n+        if (relevantParticipation == null) {\n+            return Optional.empty();\n+        }\n+        else {\n+            Optional<Submission> latestSubmissionOptional = relevantParticipation.findLatestSubmission();\n+            if (latestSubmissionOptional.isEmpty()) {\n+                return Optional.empty();\n+            }\n+            else {\n+                Submission latestSubmission = latestSubmissionOptional.get();\n+                Result latestResult = latestSubmission.getLatestResult();\n+                if (latestResult == null) {\n+                    return Optional.empty();\n+                }\n+                else {\n+                    return Optional.of(latestResult);\n+                }\n+", "originalCommit": "e3718af4662982de283e2c54bd4f539b392d1def", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU5NTk0NA==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r542595944", "bodyText": "c70aa0f", "author": "stefanwaldhauser", "createdAt": "2020-12-14T18:07:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI2Mjk0Mg=="}], "type": "inlineReview"}, {"oid": "c70aa0f01060fd36a9f540c34c4b5f0e009a4410", "url": "https://github.com/ls1intum/Artemis/commit/c70aa0f01060fd36a9f540c34c4b5f0e009a4410", "message": "PR Feedback", "committedDate": "2020-12-14T18:06:29Z", "type": "commit"}, {"oid": "9ae2a68e1ca06f715532aa19d5b23b66999b2b57", "url": "https://github.com/ls1intum/Artemis/commit/9ae2a68e1ca06f715532aa19d5b23b66999b2b57", "message": "Added ignore for rule", "committedDate": "2020-12-14T20:03:24Z", "type": "commit"}, {"oid": "7bcfd034ae68b409346d299387e2ed7fd68ab776", "url": "https://github.com/ls1intum/Artemis/commit/7bcfd034ae68b409346d299387e2ed7fd68ab776", "message": "Fixed scss style hopefully", "committedDate": "2020-12-14T20:28:33Z", "type": "commit"}, {"oid": "b4f7d8e03c031645965b4067b2e2fac2a22c9c57", "url": "https://github.com/ls1intum/Artemis/commit/b4f7d8e03c031645965b4067b2e2fac2a22c9c57", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-14T20:33:46Z", "type": "commit"}, {"oid": "6ab820cfa9325b126b21d95473b1c44f59dfe38c", "url": "https://github.com/ls1intum/Artemis/commit/6ab820cfa9325b126b21d95473b1c44f59dfe38c", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-15T15:17:01Z", "type": "commit"}, {"oid": "0d172a2fd9c214e542b4a34a80e0a1153af6f012", "url": "https://github.com/ls1intum/Artemis/commit/0d172a2fd9c214e542b4a34a80e0a1153af6f012", "message": "Made circular progress bar secure against wrong inputs", "committedDate": "2020-12-16T07:54:16Z", "type": "commit"}, {"oid": "152aaf69a2fe499099e47abd2cf1f0b6a4392b53", "url": "https://github.com/ls1intum/Artemis/commit/152aaf69a2fe499099e47abd2cf1f0b6a4392b53", "message": "Updated Progress Calculation", "committedDate": "2020-12-16T07:54:35Z", "type": "commit"}, {"oid": "ed136261eda9fb7980b4427696dcd198fe37b8b6", "url": "https://github.com/ls1intum/Artemis/commit/ed136261eda9fb7980b4427696dcd198fe37b8b6", "message": "Updated Learning Goal Card UI", "committedDate": "2020-12-16T07:55:32Z", "type": "commit"}, {"oid": "833686f8e04bdfeeb1f9044674134a7e65223d9c", "url": "https://github.com/ls1intum/Artemis/commit/833686f8e04bdfeeb1f9044674134a7e65223d9c", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-16T07:56:01Z", "type": "commit"}, {"oid": "7401fdb967da5368f25c65a4826f7aade3225aee", "url": "https://github.com/ls1intum/Artemis/commit/7401fdb967da5368f25c65a4826f7aade3225aee", "message": "Handled the case in the ui that a course is not connected to any lectures", "committedDate": "2020-12-16T08:53:21Z", "type": "commit"}, {"oid": "8952b87b7dc3c6876413ab56ec1b2632f4fd46a9", "url": "https://github.com/ls1intum/Artemis/commit/8952b87b7dc3c6876413ab56ec1b2632f4fd46a9", "message": "Updated Domain Models", "committedDate": "2020-11-22T15:40:20Z", "type": "commit"}, {"oid": "4c521dcc4df2dde39f620e8a1712dc60f5faddc0", "url": "https://github.com/ls1intum/Artemis/commit/4c521dcc4df2dde39f620e8a1712dc60f5faddc0", "message": "Created learning goal edit and create form", "committedDate": "2020-11-22T17:13:07Z", "type": "commit"}, {"oid": "891f136d2c67e3d0aa387a3d774fe619ac62e68e", "url": "https://github.com/ls1intum/Artemis/commit/891f136d2c67e3d0aa387a3d774fe619ac62e68e", "message": "Basic Components Setup", "committedDate": "2020-11-23T16:29:25Z", "type": "commit"}, {"oid": "bd30805fa3d73e6d56258c4a66bcd9a82f96f37f", "url": "https://github.com/ls1intum/Artemis/commit/bd30805fa3d73e6d56258c4a66bcd9a82f96f37f", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-11-28T14:08:33Z", "type": "commit"}, {"oid": "ee79e8d6559689295974ff794bfc76304bba7fb7", "url": "https://github.com/ls1intum/Artemis/commit/ee79e8d6559689295974ff794bfc76304bba7fb7", "message": "Implemented Basic Learning Goal Functionality", "committedDate": "2020-12-03T16:08:07Z", "type": "commit"}, {"oid": "eff2a6f0b1cf0ef9edf41dcde8215b2d49053337", "url": "https://github.com/ls1intum/Artemis/commit/eff2a6f0b1cf0ef9edf41dcde8215b2d49053337", "message": "Merge remote-tracking branch 'origin/feature/learning-goals' into feature/learning-goals", "committedDate": "2020-12-03T16:08:36Z", "type": "commit"}, {"oid": "07241ec4a3c376b92fb4635fdcab35f617f96c3e", "url": "https://github.com/ls1intum/Artemis/commit/07241ec4a3c376b92fb4635fdcab35f617f96c3e", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-03T16:09:36Z", "type": "commit"}, {"oid": "15db66b1095a8ba0038f2315cf6acaa01463749a", "url": "https://github.com/ls1intum/Artemis/commit/15db66b1095a8ba0038f2315cf6acaa01463749a", "message": "Fixed CSS", "committedDate": "2020-12-03T16:23:21Z", "type": "commit"}, {"oid": "21f01da296b66681c38f3ad42fa36fdea56281e0", "url": "https://github.com/ls1intum/Artemis/commit/21f01da296b66681c38f3ad42fa36fdea56281e0", "message": "Fixed Course Deletion", "committedDate": "2020-12-03T19:33:25Z", "type": "commit"}, {"oid": "83a578998f134606b2716b3fc9ddc2b11f7a25b0", "url": "https://github.com/ls1intum/Artemis/commit/83a578998f134606b2716b3fc9ddc2b11f7a25b0", "message": "Fixed Lecture and LectureUnit Deletion", "committedDate": "2020-12-03T20:02:29Z", "type": "commit"}, {"oid": "3730e4a92c999ba35692d59b6923fa1c80ec23d3", "url": "https://github.com/ls1intum/Artemis/commit/3730e4a92c999ba35692d59b6923fa1c80ec23d3", "message": "Fixed Course Deletion", "committedDate": "2020-12-03T20:07:40Z", "type": "commit"}, {"oid": "41af583dab853fd9dab485cfe0da1553d130754a", "url": "https://github.com/ls1intum/Artemis/commit/41af583dab853fd9dab485cfe0da1553d130754a", "message": "Added title", "committedDate": "2020-12-03T20:09:42Z", "type": "commit"}, {"oid": "49b5ce7a0537c9a2e4b5750c08e91d8b78b91ad7", "url": "https://github.com/ls1intum/Artemis/commit/49b5ce7a0537c9a2e4b5750c08e91d8b78b91ad7", "message": "Wrote Test for Learning Goal Form", "committedDate": "2020-12-04T16:12:19Z", "type": "commit"}, {"oid": "ce9a60ecee4b5529ac30db63917e2da26535718b", "url": "https://github.com/ls1intum/Artemis/commit/ce9a60ecee4b5529ac30db63917e2da26535718b", "message": "Wrote test for create-learning-goal", "committedDate": "2020-12-04T16:33:43Z", "type": "commit"}, {"oid": "db435cfb6dab7eb0202bdeca37865339c6934235", "url": "https://github.com/ls1intum/Artemis/commit/db435cfb6dab7eb0202bdeca37865339c6934235", "message": "Wrote Test for Edit-Learning-Goal-Component", "committedDate": "2020-12-04T17:14:27Z", "type": "commit"}, {"oid": "bfa31f566fd852651fcc0d4017f8a309ce6bcf46", "url": "https://github.com/ls1intum/Artemis/commit/bfa31f566fd852651fcc0d4017f8a309ce6bcf46", "message": "Updated Learning Goal Progress Calculation :)", "committedDate": "2020-12-05T15:16:38Z", "type": "commit"}, {"oid": "301362557c3c57b0e4cc446de52e71fba3185986", "url": "https://github.com/ls1intum/Artemis/commit/301362557c3c57b0e4cc446de52e71fba3185986", "message": "Smooth color gradient for circular progress bar", "committedDate": "2020-12-05T15:45:48Z", "type": "commit"}, {"oid": "f9646e6f162bb41c2051b0649e018fd0c5302747", "url": "https://github.com/ls1intum/Artemis/commit/f9646e6f162bb41c2051b0649e018fd0c5302747", "message": "ADDED DOC", "committedDate": "2020-12-05T15:47:20Z", "type": "commit"}, {"oid": "172cd964ec358e84cbdf33e1dc8f321696caf926", "url": "https://github.com/ls1intum/Artemis/commit/172cd964ec358e84cbdf33e1dc8f321696caf926", "message": "Limited width of learning goal card", "committedDate": "2020-12-05T20:47:39Z", "type": "commit"}, {"oid": "a585c19cd8d5399034fb24c2ed7577253c9ec8d9", "url": "https://github.com/ls1intum/Artemis/commit/a585c19cd8d5399034fb24c2ed7577253c9ec8d9", "message": "Fixed the UI for the case where no learning goal progress exists", "committedDate": "2020-12-05T21:00:01Z", "type": "commit"}, {"oid": "cec1178eb7dbd72981f24ce43abbbd6823c04e69", "url": "https://github.com/ls1intum/Artemis/commit/cec1178eb7dbd72981f24ce43abbbd6823c04e69", "message": "Further CSS fixed", "committedDate": "2020-12-05T21:27:23Z", "type": "commit"}, {"oid": "01846656af79e77b5dca102f2e552ff711224f64", "url": "https://github.com/ls1intum/Artemis/commit/01846656af79e77b5dca102f2e552ff711224f64", "message": "Fixed Deletion Code", "committedDate": "2020-12-05T21:27:40Z", "type": "commit"}, {"oid": "254e1875bac49ca5f4dad613ff1f7ea2a4d4eb71", "url": "https://github.com/ls1intum/Artemis/commit/254e1875bac49ca5f4dad613ff1f7ea2a4d4eb71", "message": "Fixed Deletion Code", "committedDate": "2020-12-05T21:30:57Z", "type": "commit"}, {"oid": "6ea5dc2449d98932a9d7a4173f8d7646a1139370", "url": "https://github.com/ls1intum/Artemis/commit/6ea5dc2449d98932a9d7a4173f8d7646a1139370", "message": "Delete Code Fix", "committedDate": "2020-12-05T21:34:15Z", "type": "commit"}, {"oid": "076ab5801a0cdeb9e9d2fc770597f12e69394b36", "url": "https://github.com/ls1intum/Artemis/commit/076ab5801a0cdeb9e9d2fc770597f12e69394b36", "message": "Wrote test for learning-goal-detail-modal", "committedDate": "2020-12-05T22:17:01Z", "type": "commit"}, {"oid": "f40d5b27911cf2e195d093da6281278733eae234", "url": "https://github.com/ls1intum/Artemis/commit/f40d5b27911cf2e195d093da6281278733eae234", "message": "Wrote test for learning-goal-management-component", "committedDate": "2020-12-06T11:49:47Z", "type": "commit"}, {"oid": "de0893b9564fa5ff8d50188f4cbd37958a091f26", "url": "https://github.com/ls1intum/Artemis/commit/de0893b9564fa5ff8d50188f4cbd37958a091f26", "message": "Wrote test for learning-goal-popover-component", "committedDate": "2020-12-06T11:50:02Z", "type": "commit"}, {"oid": "9d919810d8868ba008586395857132fda6f68fa3", "url": "https://github.com/ls1intum/Artemis/commit/9d919810d8868ba008586395857132fda6f68fa3", "message": "Wrote test for course-learning-goals", "committedDate": "2020-12-06T12:11:17Z", "type": "commit"}, {"oid": "16d714d748f4838803604c27776adc4156b4b84d", "url": "https://github.com/ls1intum/Artemis/commit/16d714d748f4838803604c27776adc4156b4b84d", "message": "Wrote test for learning-goal-card", "committedDate": "2020-12-06T12:49:49Z", "type": "commit"}, {"oid": "ae646b16fe5f73f6bec7dc64c94fd9c69160ddd9", "url": "https://github.com/ls1intum/Artemis/commit/ae646b16fe5f73f6bec7dc64c94fd9c69160ddd9", "message": "Wrote test for circular progress bar", "committedDate": "2020-12-06T17:11:26Z", "type": "commit"}, {"oid": "19832ec7cf8534b97b3dea91ca2f518eec641b32", "url": "https://github.com/ls1intum/Artemis/commit/19832ec7cf8534b97b3dea91ca2f518eec641b32", "message": "wrote test for learning-goal.service.ts", "committedDate": "2020-12-06T17:26:06Z", "type": "commit"}, {"oid": "93a1f6c0277859192474a981d2b5bada36982ae0", "url": "https://github.com/ls1intum/Artemis/commit/93a1f6c0277859192474a981d2b5bada36982ae0", "message": "Wrote Server Test for Learning Goals", "committedDate": "2020-12-07T10:45:01Z", "type": "commit"}, {"oid": "eabbbed4652404a7711a10e89a4b4bd788bbcf4c", "url": "https://github.com/ls1intum/Artemis/commit/eabbbed4652404a7711a10e89a4b4bd788bbcf4c", "message": "Added german translation", "committedDate": "2020-12-07T10:54:25Z", "type": "commit"}, {"oid": "9858e25de1a2b6e0e816c930daff7f36bf6903fd", "url": "https://github.com/ls1intum/Artemis/commit/9858e25de1a2b6e0e816c930daff7f36bf6903fd", "message": "Fixed lecture-unit-management test", "committedDate": "2020-12-07T13:13:04Z", "type": "commit"}, {"oid": "720c72cea7c22a6dbb0fdd895d2cdf297b64fb95", "url": "https://github.com/ls1intum/Artemis/commit/720c72cea7c22a6dbb0fdd895d2cdf297b64fb95", "message": "Fixed lecture service test", "committedDate": "2020-12-07T13:16:50Z", "type": "commit"}, {"oid": "8e3f03a67ff9fdd1f7206e2e0c6698e668d322a6", "url": "https://github.com/ls1intum/Artemis/commit/8e3f03a67ff9fdd1f7206e2e0c6698e668d322a6", "message": "Fixed course statistics test", "committedDate": "2020-12-07T13:21:15Z", "type": "commit"}, {"oid": "521262aa40a9093a3919edc4dd9f8cc7f64d342d", "url": "https://github.com/ls1intum/Artemis/commit/521262aa40a9093a3919edc4dd9f8cc7f64d342d", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-07T13:21:44Z", "type": "commit"}, {"oid": "29feea0f1bac3e91758674d0875d95b1deed8041", "url": "https://github.com/ls1intum/Artemis/commit/29feea0f1bac3e91758674d0875d95b1deed8041", "message": "Wrote Delete Tests and fixed Delete Code", "committedDate": "2020-12-07T14:03:00Z", "type": "commit"}, {"oid": "8360f27a3ae9601c5c04dcfa6770d2190106cc36", "url": "https://github.com/ls1intum/Artemis/commit/8360f27a3ae9601c5c04dcfa6770d2190106cc36", "message": "Fixed small error with 0 being falsy", "committedDate": "2020-12-07T14:37:13Z", "type": "commit"}, {"oid": "d3b5a398cbdbe83dc3fd5543f9e05f8809d6ac62", "url": "https://github.com/ls1intum/Artemis/commit/d3b5a398cbdbe83dc3fd5543f9e05f8809d6ac62", "message": "Added Rounding", "committedDate": "2020-12-07T14:45:04Z", "type": "commit"}, {"oid": "d9a43fd84e67c20afb647d7b8c4d9274dc1ba862", "url": "https://github.com/ls1intum/Artemis/commit/d9a43fd84e67c20afb647d7b8c4d9274dc1ba862", "message": "Fixed scss", "committedDate": "2020-12-07T14:51:45Z", "type": "commit"}, {"oid": "cbd19d94d1a8654090b2dd5e67689d8f71635e9b", "url": "https://github.com/ls1intum/Artemis/commit/cbd19d94d1a8654090b2dd5e67689d8f71635e9b", "message": "Fixed scss", "committedDate": "2020-12-07T14:55:27Z", "type": "commit"}, {"oid": "e63099982d24ccb213c1ab5a7b67fe8269369c2c", "url": "https://github.com/ls1intum/Artemis/commit/e63099982d24ccb213c1ab5a7b67fe8269369c2c", "message": "Further scss fixes", "committedDate": "2020-12-07T14:57:32Z", "type": "commit"}, {"oid": "c6fec62ea7e55b3a66808b4377a3c55bd5bd831f", "url": "https://github.com/ls1intum/Artemis/commit/c6fec62ea7e55b3a66808b4377a3c55bd5bd831f", "message": "Hopefully final scss fix", "committedDate": "2020-12-07T15:01:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU3NTkxNw==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r537575917", "bodyText": "The indentation here looks off.", "author": "FrankeLukas", "createdAt": "2020-12-07T15:02:30Z", "path": "src/main/java/de/tum/in/www1/artemis/repository/LectureRepository.java", "diffHunk": "@@ -17,16 +17,31 @@\n @Repository\n public interface LectureRepository extends JpaRepository<Lecture, Long> {\n \n-    @Query(\"select lecture from Lecture lecture left join fetch lecture.attachments WHERE lecture.course.id = :#{#courseId}\")\n-    Set<Lecture> findAllByCourseId(@Param(\"courseId\") Long courseId);\n+    @Query(\"\"\"\n+            SELECT lecture\n+            FROM Lecture lecture\n+            LEFT JOIN FETCH lecture.attachments\n+            WHERE lecture.course.id = :#{#courseId}\n+            \"\"\")\n+    Set<Lecture> findAllByCourseIdWithAttachments(@Param(\"courseId\") Long courseId);\n+\n+    @Query(\"\"\"\n+                        SELECT lecture\n+                        FROM Lecture lecture\n+                        LEFT JOIN FETCH lecture.attachments\n+                        LEFT JOIN FETCH lecture.lectureUnits\n+                        WHERE lecture.course.id = :#{#courseId}", "originalCommit": "e63099982d24ccb213c1ab5a7b67fe8269369c2c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYzMTYyNg==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r537631626", "bodyText": "Good Catch! 09c53aa", "author": "stefanwaldhauser", "createdAt": "2020-12-07T16:12:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU3NTkxNw=="}], "type": "inlineReview"}, {"oid": "4f1d3097574eb0d550b45758427f47fce23b2d0d", "url": "https://github.com/ls1intum/Artemis/commit/4f1d3097574eb0d550b45758427f47fce23b2d0d", "message": "Removed color getter", "committedDate": "2020-12-07T16:09:43Z", "type": "commit"}, {"oid": "9ca89cdfced9af0b6b1f3e7cfd1a7b842ce9634a", "url": "https://github.com/ls1intum/Artemis/commit/9ca89cdfced9af0b6b1f3e7cfd1a7b842ce9634a", "message": "Added missing translation", "committedDate": "2020-12-07T16:11:15Z", "type": "commit"}, {"oid": "09c53aa3fe1d67dfc7e1c2a114156a8c71725b90", "url": "https://github.com/ls1intum/Artemis/commit/09c53aa3fe1d67dfc7e1c2a114156a8c71725b90", "message": "Fixed Indention", "committedDate": "2020-12-07T16:12:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODU0NDY2NA==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r538544664", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public LearningGoalProgress getLearningGoalPerformance(LearningGoal learningGoal, User user) {\n          \n          \n            \n                public LearningGoalProgress calculateLearningGoalProgress(LearningGoal learningGoal, User user) {", "author": "krusche", "createdAt": "2020-12-08T16:08:39Z", "path": "src/main/java/de/tum/in/www1/artemis/service/LearningGoalService.java", "diffHunk": "@@ -0,0 +1,115 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.Exercise;\n+import de.tum.in.www1.artemis.domain.LearningGoal;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.lecture.ExerciseUnit;\n+import de.tum.in.www1.artemis.domain.lecture.LectureUnit;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.repository.LearningGoalRepository;\n+import de.tum.in.www1.artemis.repository.ResultRepository;\n+import de.tum.in.www1.artemis.web.rest.dto.LearningGoalProgress;\n+\n+@Service\n+public class LearningGoalService {\n+\n+    private final LearningGoalRepository learningGoalRepository;\n+\n+    private final AuthorizationCheckService authorizationCheckService;\n+\n+    private final ResultRepository resultRepository;\n+\n+    private final ParticipationService participationService;\n+\n+    public LearningGoalService(LearningGoalRepository learningGoalRepository, AuthorizationCheckService authorizationCheckService, ParticipationService participationService,\n+            ResultRepository resultRepository) {\n+        this.learningGoalRepository = learningGoalRepository;\n+        this.authorizationCheckService = authorizationCheckService;\n+        this.participationService = participationService;\n+        this.resultRepository = resultRepository;\n+    }\n+\n+    /**\n+     * Calculate the progress in a learning goal for a specific user\n+     * @param learningGoal learning goal to get the progress for\n+     * @param user user to get the progress for\n+     * @return progress of the user in the learning goal\n+     */\n+    public LearningGoalProgress getLearningGoalPerformance(LearningGoal learningGoal, User user) {", "originalCommit": "09c53aa3fe1d67dfc7e1c2a114156a8c71725b90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDEzNTg3Mw==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r540135873", "bodyText": "Done in da86f2c", "author": "stefanwaldhauser", "createdAt": "2020-12-10T12:39:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODU0NDY2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODU0NTcxNg==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r538545716", "bodyText": "split this into 2 methods", "author": "krusche", "createdAt": "2020-12-08T16:09:30Z", "path": "src/main/java/de/tum/in/www1/artemis/service/LearningGoalService.java", "diffHunk": "@@ -0,0 +1,115 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.Exercise;\n+import de.tum.in.www1.artemis.domain.LearningGoal;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.lecture.ExerciseUnit;\n+import de.tum.in.www1.artemis.domain.lecture.LectureUnit;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.repository.LearningGoalRepository;\n+import de.tum.in.www1.artemis.repository.ResultRepository;\n+import de.tum.in.www1.artemis.web.rest.dto.LearningGoalProgress;\n+\n+@Service\n+public class LearningGoalService {\n+\n+    private final LearningGoalRepository learningGoalRepository;\n+\n+    private final AuthorizationCheckService authorizationCheckService;\n+\n+    private final ResultRepository resultRepository;\n+\n+    private final ParticipationService participationService;\n+\n+    public LearningGoalService(LearningGoalRepository learningGoalRepository, AuthorizationCheckService authorizationCheckService, ParticipationService participationService,\n+            ResultRepository resultRepository) {\n+        this.learningGoalRepository = learningGoalRepository;\n+        this.authorizationCheckService = authorizationCheckService;\n+        this.participationService = participationService;\n+        this.resultRepository = resultRepository;\n+    }\n+\n+    /**\n+     * Calculate the progress in a learning goal for a specific user\n+     * @param learningGoal learning goal to get the progress for\n+     * @param user user to get the progress for\n+     * @return progress of the user in the learning goal\n+     */\n+    public LearningGoalProgress getLearningGoalPerformance(LearningGoal learningGoal, User user) {\n+\n+        LearningGoalProgress learningGoalProgress = new LearningGoalProgress();\n+        learningGoalProgress.learningGoalId = learningGoal.getId();\n+        learningGoalProgress.learningGoalTitle = learningGoal.getTitle();\n+        learningGoalProgress.totalPointsAchievableByStudentsInLearningGoal = 0.0;\n+        learningGoalProgress.pointsAchievedByStudentInLearningGoal = 0.0;\n+\n+        // The progress will be calculated from a subset of the connected lecture units\n+        Set<LectureUnit> filteredLectureUnits = learningGoal.getLectureUnits().parallelStream().filter(LectureUnit::isVisibleToStudents).filter(lectureUnit -> {\n+            if (lectureUnit instanceof ExerciseUnit) {\n+                Exercise exercise = ((ExerciseUnit) lectureUnit).getExercise();\n+                return exercise.isAssessmentDueDateOver();\n+            }\n+            else {\n+                return true;\n+            }\n+        }).collect(Collectors.toSet());\n+\n+        // In the case that two or more connected exercise units reference the same exercise, only one of them should be used in the progress calculation\n+        Set<Exercise> exercisesAlreadyUsedInCalculation = new HashSet<>();\n+", "originalCommit": "09c53aa3fe1d67dfc7e1c2a114156a8c71725b90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDEzNTk2MA==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r540135960", "bodyText": "Done in da86f2c", "author": "stefanwaldhauser", "createdAt": "2020-12-10T12:39:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODU0NTcxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODU1MTYyMw==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r538551623", "bodyText": "please use Transactional here", "author": "krusche", "createdAt": "2020-12-08T16:14:28Z", "path": "src/main/java/de/tum/in/www1/artemis/service/LectureService.java", "diffHunk": "@@ -77,11 +98,40 @@ public Lecture filterActiveAttachments(Lecture lectureWithAttachments, User user\n \n     /**\n      * Deletes the given lecture.\n-     * Attachments are not explicitly deleted, as the delete operation is cascaded by the database.\n+     * Attachments and Lecture Units are not explicitly deleted, as the delete operation is cascaded by the database.\n      * @param lecture the lecture to be deleted\n      */\n     public void delete(Lecture lecture) {\n-        lectureRepository.delete(lecture);\n+        Optional<Lecture> lectureToDeleteOptional = lectureRepository.findByIdWithStudentQuestionsAndLectureUnitsAndLearningGoals(lecture.getId());", "originalCommit": "09c53aa3fe1d67dfc7e1c2a114156a8c71725b90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA4NTE2Mw==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r540085163", "bodyText": "Done in ae8bec5", "author": "stefanwaldhauser", "createdAt": "2020-12-10T11:16:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODU1MTYyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODU1MjI2MQ==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r538552261", "bodyText": "this code is not very performant. I suggest to use the following existing queries:\n// 1st: fetch participations, submissions and results for individual exercises\nList<StudentParticipation> individualParticipations = participationService.findByStudentIdAndIndividualExercisesWithEagerSubmissionsResult(user.getId(),\n        activeIndividualExercises);\n// 2nd: fetch participations, submissions and results for team exercises\nList<StudentParticipation> teamParticipations = participationService.findByStudentIdAndTeamExercisesWithEagerSubmissionsResult(user.getId(), activeTeamExercises);\n// 3rd: merge both into one list for further processing\nList<StudentParticipation> participations = Stream.concat(individualParticipations.stream(), teamParticipations.stream()).collect(Collectors.toList());", "author": "krusche", "createdAt": "2020-12-08T16:15:06Z", "path": "src/main/java/de/tum/in/www1/artemis/service/LearningGoalService.java", "diffHunk": "@@ -0,0 +1,115 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.Exercise;\n+import de.tum.in.www1.artemis.domain.LearningGoal;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.lecture.ExerciseUnit;\n+import de.tum.in.www1.artemis.domain.lecture.LectureUnit;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.repository.LearningGoalRepository;\n+import de.tum.in.www1.artemis.repository.ResultRepository;\n+import de.tum.in.www1.artemis.web.rest.dto.LearningGoalProgress;\n+\n+@Service\n+public class LearningGoalService {\n+\n+    private final LearningGoalRepository learningGoalRepository;\n+\n+    private final AuthorizationCheckService authorizationCheckService;\n+\n+    private final ResultRepository resultRepository;\n+\n+    private final ParticipationService participationService;\n+\n+    public LearningGoalService(LearningGoalRepository learningGoalRepository, AuthorizationCheckService authorizationCheckService, ParticipationService participationService,\n+            ResultRepository resultRepository) {\n+        this.learningGoalRepository = learningGoalRepository;\n+        this.authorizationCheckService = authorizationCheckService;\n+        this.participationService = participationService;\n+        this.resultRepository = resultRepository;\n+    }\n+\n+    /**\n+     * Calculate the progress in a learning goal for a specific user\n+     * @param learningGoal learning goal to get the progress for\n+     * @param user user to get the progress for\n+     * @return progress of the user in the learning goal\n+     */\n+    public LearningGoalProgress getLearningGoalPerformance(LearningGoal learningGoal, User user) {\n+\n+        LearningGoalProgress learningGoalProgress = new LearningGoalProgress();\n+        learningGoalProgress.learningGoalId = learningGoal.getId();\n+        learningGoalProgress.learningGoalTitle = learningGoal.getTitle();\n+        learningGoalProgress.totalPointsAchievableByStudentsInLearningGoal = 0.0;\n+        learningGoalProgress.pointsAchievedByStudentInLearningGoal = 0.0;\n+\n+        // The progress will be calculated from a subset of the connected lecture units\n+        Set<LectureUnit> filteredLectureUnits = learningGoal.getLectureUnits().parallelStream().filter(LectureUnit::isVisibleToStudents).filter(lectureUnit -> {\n+            if (lectureUnit instanceof ExerciseUnit) {\n+                Exercise exercise = ((ExerciseUnit) lectureUnit).getExercise();\n+                return exercise.isAssessmentDueDateOver();\n+            }\n+            else {\n+                return true;\n+            }\n+        }).collect(Collectors.toSet());\n+\n+        // In the case that two or more connected exercise units reference the same exercise, only one of them should be used in the progress calculation\n+        Set<Exercise> exercisesAlreadyUsedInCalculation = new HashSet<>();\n+\n+        for (LectureUnit lectureUnit : filteredLectureUnits) {\n+            LearningGoalProgress.LectureUnitProgress lectureUnitProgress = new LearningGoalProgress.LectureUnitProgress();\n+            lectureUnitProgress.lectureUnitId = lectureUnit.getId();\n+            // ToDo implement way to track progress for lecture units other than exercise units\n+            if (lectureUnit instanceof ExerciseUnit) {", "originalCommit": "09c53aa3fe1d67dfc7e1c2a114156a8c71725b90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDEzNjA0Mw==", "url": "https://github.com/ls1intum/Artemis/pull/2510#discussion_r540136043", "bodyText": "Done in da86f2c", "author": "stefanwaldhauser", "createdAt": "2020-12-10T12:39:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODU1MjI2MQ=="}], "type": "inlineReview"}, {"oid": "eda13701325aa86d8aab2e26c7e5d9e1de4cae53", "url": "https://github.com/ls1intum/Artemis/commit/eda13701325aa86d8aab2e26c7e5d9e1de4cae53", "message": "Resolve compilation warnings (unused OnInit)", "committedDate": "2020-12-09T15:42:43Z", "type": "commit"}, {"oid": "b614d9aed195c7a5a4b52a90f9adaf8f443dee0d", "url": "https://github.com/ls1intum/Artemis/commit/b614d9aed195c7a5a4b52a90f9adaf8f443dee0d", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-09T15:43:39Z", "type": "commit"}, {"oid": "d3ccb829410d053de5f770d4b487eed4c8799180", "url": "https://github.com/ls1intum/Artemis/commit/d3ccb829410d053de5f770d4b487eed4c8799180", "message": "Use child routes", "committedDate": "2020-12-09T15:51:37Z", "type": "commit"}, {"oid": "562dcb6f3e70163b3f0956a6018184cd9ed81840", "url": "https://github.com/ls1intum/Artemis/commit/562dcb6f3e70163b3f0956a6018184cd9ed81840", "message": "Move create and edit to children of goal-management", "committedDate": "2020-12-09T16:02:12Z", "type": "commit"}, {"oid": "03084af26ef0e34f174dba7ec1124514f9769381", "url": "https://github.com/ls1intum/Artemis/commit/03084af26ef0e34f174dba7ec1124514f9769381", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-10T11:13:43Z", "type": "commit"}, {"oid": "ae8bec507791f3f824dd5125a53b82621e651ead", "url": "https://github.com/ls1intum/Artemis/commit/ae8bec507791f3f824dd5125a53b82621e651ead", "message": "Added @Transactional", "committedDate": "2020-12-10T11:16:17Z", "type": "commit"}, {"oid": "75b7004560b94d1226d830f38992bc85d4bf4cff", "url": "https://github.com/ls1intum/Artemis/commit/75b7004560b94d1226d830f38992bc85d4bf4cff", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-10T11:48:53Z", "type": "commit"}, {"oid": "da86f2c21800028e9a9a960cd727cf04ede905c7", "url": "https://github.com/ls1intum/Artemis/commit/da86f2c21800028e9a9a960cd727cf04ede905c7", "message": "Refactored Progress Calculation Method", "committedDate": "2020-12-10T12:38:34Z", "type": "commit"}, {"oid": "11e474645f79ea88093a73810f79736a9fc8e853", "url": "https://github.com/ls1intum/Artemis/commit/11e474645f79ea88093a73810f79736a9fc8e853", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-10T16:00:28Z", "type": "commit"}, {"oid": "5407dd1da61ad79e75872e10dfc53c5a10ef9e68", "url": "https://github.com/ls1intum/Artemis/commit/5407dd1da61ad79e75872e10dfc53c5a10ef9e68", "message": "Made progress calculation clearer", "committedDate": "2020-12-10T16:20:46Z", "type": "commit"}, {"oid": "062a3ba91939d4919bc7c4e3952ad7c01b67afea", "url": "https://github.com/ls1intum/Artemis/commit/062a3ba91939d4919bc7c4e3952ad7c01b67afea", "message": "Added points difference explanation", "committedDate": "2020-12-10T16:32:05Z", "type": "commit"}, {"oid": "118959028301289b47e933e7d3e7666d4251a041", "url": "https://github.com/ls1intum/Artemis/commit/118959028301289b47e933e7d3e7666d4251a041", "message": "Small Fixed to satisfy codacy", "committedDate": "2020-12-10T16:42:39Z", "type": "commit"}, {"oid": "96e7e66fd46664fc627bc79629603172a690c239", "url": "https://github.com/ls1intum/Artemis/commit/96e7e66fd46664fc627bc79629603172a690c239", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-11T10:20:16Z", "type": "commit"}, {"oid": "8fb0a3fd2acd6c18d59ae30fe25332046aa8cb47", "url": "https://github.com/ls1intum/Artemis/commit/8fb0a3fd2acd6c18d59ae30fe25332046aa8cb47", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-11T10:44:07Z", "type": "commit"}, {"oid": "4d2c72285ca20e9db8ebfc93268728cddeaa2356", "url": "https://github.com/ls1intum/Artemis/commit/4d2c72285ca20e9db8ebfc93268728cddeaa2356", "message": "Merge routes into the course routes to avoid angular router bugs", "committedDate": "2020-12-11T11:27:28Z", "type": "commit"}, {"oid": "1ce0b11f7f6d1e372a731f6cae1249d1eccd97d5", "url": "https://github.com/ls1intum/Artemis/commit/1ce0b11f7f6d1e372a731f6cae1249d1eccd97d5", "message": "Adjust the tests to use the new route layout", "committedDate": "2020-12-11T11:49:53Z", "type": "commit"}, {"oid": "8150e4d82975b7e2903b476a69e55dd6b3ff31b6", "url": "https://github.com/ls1intum/Artemis/commit/8150e4d82975b7e2903b476a69e55dd6b3ff31b6", "message": "Merge remote-tracking branch 'origin/feature/learning-goals' into feature/learning-goals", "committedDate": "2020-12-11T12:21:23Z", "type": "commit"}, {"oid": "1f4279b39129fe7f104ccf4b920ef15f4ad9f8cf", "url": "https://github.com/ls1intum/Artemis/commit/1f4279b39129fe7f104ccf4b920ef15f4ad9f8cf", "message": "Moved Learning Goal Button to course details page", "committedDate": "2020-12-11T14:12:02Z", "type": "commit"}, {"oid": "ed537a1079aef95a6d63a64641627511391ae0e1", "url": "https://github.com/ls1intum/Artemis/commit/ed537a1079aef95a6d63a64641627511391ae0e1", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-11T14:14:19Z", "type": "commit"}, {"oid": "4fb8f1ee90f98ab9c697c272203d35b92c2a20c6", "url": "https://github.com/ls1intum/Artemis/commit/4fb8f1ee90f98ab9c697c272203d35b92c2a20c6", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-12T01:21:56Z", "type": "commit"}, {"oid": "20900d00532020c205b57df6cc1f2ff24c42bfcd", "url": "https://github.com/ls1intum/Artemis/commit/20900d00532020c205b57df6cc1f2ff24c42bfcd", "message": "Merge branch 'develop' into feature/learning-goals", "committedDate": "2020-12-12T11:42:49Z", "type": "commit"}, {"oid": "68254bb1b0f6db9b25143ae6e325242f29934da2", "url": "https://github.com/ls1intum/Artemis/commit/68254bb1b0f6db9b25143ae6e325242f29934da2", "message": "Fixed merge conflict", "committedDate": "2020-12-12T11:53:55Z", "type": "commit"}, {"oid": "0fa23d8d2d17906d4e6abe6b5ce27462ff39be3d", "url": "https://github.com/ls1intum/Artemis/commit/0fa23d8d2d17906d4e6abe6b5ce27462ff39be3d", "message": "Added null check if score is null", "committedDate": "2020-12-12T16:41:58Z", "type": "commit"}]}