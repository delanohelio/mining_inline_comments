{"pr_number": 2281, "pr_title": "Use JUnit 5 for the JVM Tests", "pr_createdAt": "2020-10-27T08:19:09Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2281", "timeline": [{"oid": "9ff4399926a0cb3648afc7db25cbe7d7c45619f4", "url": "https://github.com/ls1intum/Artemis/commit/9ff4399926a0cb3648afc7db25cbe7d7c45619f4", "message": "Use artemis-java-test-sandbox and surefire 3.0.0-M5 in pom.xml", "committedDate": "2020-10-26T14:08:28Z", "type": "commit"}, {"oid": "786060980490c02945aa72e15a32e75cab5dfd32", "url": "https://github.com/ls1intum/Artemis/commit/786060980490c02945aa72e15a32e75cab5dfd32", "message": "Use JUnit 5 for structural tests", "committedDate": "2020-10-27T08:03:53Z", "type": "commit"}, {"oid": "cb263b18c4b9e0e7479ed7cad7d5f3ebfd385a18", "url": "https://github.com/ls1intum/Artemis/commit/cb263b18c4b9e0e7479ed7cad7d5f3ebfd385a18", "message": "Fix imports", "committedDate": "2020-10-27T08:29:05Z", "type": "commit"}, {"oid": "78ae5704209eae46b1741967cad8d9d73f815684", "url": "https://github.com/ls1intum/Artemis/commit/78ae5704209eae46b1741967cad8d9d73f815684", "message": "Increment major version of affected template test files", "committedDate": "2020-10-27T08:34:25Z", "type": "commit"}, {"oid": "24041f8f00a6d9cee89f12e26b52c839ddcbed06", "url": "https://github.com/ls1intum/Artemis/commit/24041f8f00a6d9cee89f12e26b52c839ddcbed06", "message": "Fix template pom.xml indentation", "committedDate": "2020-10-27T09:38:55Z", "type": "commit"}, {"oid": "bd87182d86fd1df21474c0bc26439fe3c5fa96ae", "url": "https://github.com/ls1intum/Artemis/commit/bd87182d86fd1df21474c0bc26439fe3c5fa96ae", "message": "Fix JavaDoc content", "committedDate": "2020-10-27T12:51:29Z", "type": "commit"}, {"oid": "bcde82e1cda8c1a37e6ca3f44937de5916ecc238", "url": "https://github.com/ls1intum/Artemis/commit/bcde82e1cda8c1a37e6ca3f44937de5916ecc238", "message": "Use newer artemis-java-test-sandbox version", "committedDate": "2020-10-27T15:11:02Z", "type": "commit"}, {"oid": "70c13d2e30b83d32780051fe85100d9b61e7fc7b", "url": "https://github.com/ls1intum/Artemis/commit/70c13d2e30b83d32780051fe85100d9b61e7fc7b", "message": "Add timeout to behavior tests again", "committedDate": "2020-10-27T15:20:56Z", "type": "commit"}, {"oid": "d7b87105bcf44e462ef1db48bda87bf5d39f6c1d", "url": "https://github.com/ls1intum/Artemis/commit/d7b87105bcf44e462ef1db48bda87bf5d39f6c1d", "message": "Use new version for the Kotlin test template as well", "committedDate": "2020-10-27T15:38:46Z", "type": "commit"}, {"oid": "f62b4287dbf9b908bfa6f7d0d56d075c4107b0e7", "url": "https://github.com/ls1intum/Artemis/commit/f62b4287dbf9b908bfa6f7d0d56d075c4107b0e7", "message": "Merge branch 'develop' into enhancement/programming-exercise/junit5-test-template", "committedDate": "2020-10-27T15:39:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgzMzM3Nw==", "url": "https://github.com/ls1intum/Artemis/pull/2281#discussion_r512833377", "bodyText": "re-add kt", "author": "krusche", "createdAt": "2020-10-27T16:17:10Z", "path": "src/main/resources/templates/kotlin/test/testutils/ClassNameScanner.java", "diffHunk": "@@ -219,25 +224,25 @@ private ScanResult computeScanResult() {\n      * each type it finds e.g. filenames ending in .java to the passed JSON object.\n      * @param assignmentFolderName: The root folder where the method starts walking the project structure.\n      * @param node: The current node the method is visiting.\n-     * @param foundTypes: The JSON object where the type names and packages get appended.\n+     * @param types: The JSON object where the type names and packages get appended.\n      */\n     private void walkProjectFileStructure(String assignmentFolderName, File node, Map<String, List<String>> foundTypes) {\n         String fileName = node.getName();\n \n-        if(fileName.contains(\".java\") || fileName.contains(\".kt\")) {\n+        if(fileName.contains(\".java\")) {", "originalCommit": "f62b4287dbf9b908bfa6f7d0d56d075c4107b0e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgzMzQ4NQ==", "url": "https://github.com/ls1intum/Artemis/pull/2281#discussion_r512833485", "bodyText": "re-add kt", "author": "krusche", "createdAt": "2020-10-27T16:17:17Z", "path": "src/main/resources/templates/kotlin/test/testutils/ClassNameScanner.java", "diffHunk": "@@ -219,25 +224,25 @@ private ScanResult computeScanResult() {\n      * each type it finds e.g. filenames ending in .java to the passed JSON object.\n      * @param assignmentFolderName: The root folder where the method starts walking the project structure.\n      * @param node: The current node the method is visiting.\n-     * @param foundTypes: The JSON object where the type names and packages get appended.\n+     * @param types: The JSON object where the type names and packages get appended.\n      */\n     private void walkProjectFileStructure(String assignmentFolderName, File node, Map<String, List<String>> foundTypes) {\n         String fileName = node.getName();\n \n-        if(fileName.contains(\".java\") || fileName.contains(\".kt\")) {\n+        if(fileName.contains(\".java\")) {\n             String[] fileNameComponents = fileName.split(\"\\\\.\");\n \n             String className = fileNameComponents[fileNameComponents.length - 2];\n-            int until = node.getPath().indexOf(\".java\");\n-            if (until == -1) {\n-                until = node.getPath().indexOf(\".kt\");\n-            }\n-            String packageName = node.getPath().substring(0, until);\n+            String packageName = node.getPath().substring(0, node.getPath().indexOf(\".java\"));", "originalCommit": "f62b4287dbf9b908bfa6f7d0d56d075c4107b0e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgzNDc3Mg==", "url": "https://github.com/ls1intum/Artemis/pull/2281#discussion_r512834772", "bodyText": "can we add some timeout?", "author": "krusche", "createdAt": "2020-10-27T16:18:56Z", "path": "src/main/resources/templates/kotlin/test/testFiles/structural/ConstructorTest.java", "diffHunk": "@@ -1,42 +1,40 @@\n package ${packageName};\n \n-import org.json.JSONArray;\n-import org.json.JSONObject;\n-import org.junit.Test;\n-import org.junit.runner.RunWith;\n-import org.junit.runners.Parameterized;\n+import static org.junit.jupiter.api.Assertions.fail;\n+import static org.junit.jupiter.api.DynamicContainer.dynamicContainer;\n+import static org.junit.jupiter.api.DynamicTest.dynamicTest;\n \n import java.lang.annotation.Annotation;\n import java.lang.reflect.Constructor;\n import java.lang.reflect.Modifier;\n+import java.net.URI;\n+import java.net.URISyntaxException;\n import java.util.ArrayList;\n-import java.util.Collection;\n import java.util.List;\n \n-import static org.junit.Assert.fail;\n+import org.json.JSONArray;\n+import org.json.JSONObject;\n+import org.junit.jupiter.api.DynamicContainer;\n+import org.junit.jupiter.api.DynamicNode;\n+import org.junit.jupiter.api.TestFactory;\n \n /**\n  * @author Stephan Krusche (krusche@in.tum.de)\n- * @version 3.0 (25.09.2019)\n+ * @version 4.0 (27.10.2020)\n  * <br><br>\n  * This test evaluates if the specified constructors in the structure oracle are correctly implemented with the expected parameter types and annotations,\n  * based on its definition in the structure oracle (test.json).\n  */\n-@RunWith(Parameterized.class)\n public class ConstructorTest extends StructuralTest {\n \n-    public ConstructorTest(String expectedClassName, String expectedPackageName, JSONObject expectedClassJSON) {\n-        super(expectedClassName, expectedPackageName, expectedClassJSON);\n-    }\n-\n     /**\n      * This method collects the classes in the structure oracle file for which constructors are specified.\n-     * These classes are packed into a list, which represents the test data.\n-     * @return A list of arrays containing each class' name, package and the respective JSON object defined in the structure oracle.\n+     * These classes are then transformed into JUnit 5 dynamic tests.\n+     * @return A dynamic test container containing the test for each class which is then executed by JUnit.\n      */\n-    @Parameterized.Parameters(name = \"{0}\")\n-    public static Collection<Object[]> findClasses() {\n-        List<Object[]> testData = new ArrayList<Object[]>();\n+    @TestFactory", "originalCommit": "f62b4287dbf9b908bfa6f7d0d56d075c4107b0e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "64da25c19db83616bae0e8e8b433988c5b6a4643", "url": "https://github.com/ls1intum/Artemis/commit/64da25c19db83616bae0e8e8b433988c5b6a4643", "message": "Fix scanning of Kotlin files", "committedDate": "2020-10-27T16:38:52Z", "type": "commit"}, {"oid": "ec80267d61bab554dac61009b1c82bad0bd26a80", "url": "https://github.com/ls1intum/Artemis/commit/ec80267d61bab554dac61009b1c82bad0bd26a80", "message": "Add comment that artemis-java-test-sandbox comes with JUnit 5 and more", "committedDate": "2020-10-27T16:43:41Z", "type": "commit"}, {"oid": "b28360e670463f5e6b7406d4deb91de64b55b114", "url": "https://github.com/ls1intum/Artemis/commit/b28360e670463f5e6b7406d4deb91de64b55b114", "message": "Add timeouts to structural tests", "committedDate": "2020-10-27T16:53:54Z", "type": "commit"}, {"oid": "67e59c89a3a3fd3f3ff7d429c86d6bfe17fc7024", "url": "https://github.com/ls1intum/Artemis/commit/67e59c89a3a3fd3f3ff7d429c86d6bfe17fc7024", "message": "Fix another Kotlin issue", "committedDate": "2020-10-27T17:12:38Z", "type": "commit"}, {"oid": "d8cdaadb02688addf4eddd10f2c08229657832da", "url": "https://github.com/ls1intum/Artemis/commit/d8cdaadb02688addf4eddd10f2c08229657832da", "message": "Merge branch 'develop' into enhancement/programming-exercise/junit5-test-template", "committedDate": "2020-10-27T22:04:37Z", "type": "commit"}, {"oid": "3c95b9a0f8055e950923888d75454e0a6ca252ce", "url": "https://github.com/ls1intum/Artemis/commit/3c95b9a0f8055e950923888d75454e0a6ca252ce", "message": "Merge branch 'develop' into enhancement/programming-exercise/junit5-test-template", "committedDate": "2020-10-27T22:47:52Z", "type": "commit"}, {"oid": "8d67e0b6379a1f211a5ff32b6f6bfff099b341dc", "url": "https://github.com/ls1intum/Artemis/commit/8d67e0b6379a1f211a5ff32b6f6bfff099b341dc", "message": "Merge branch 'develop' into enhancement/programming-exercise/junit5-test-template", "committedDate": "2020-10-29T14:55:34Z", "type": "commit"}, {"oid": "8bb53c30d01d286701b73cf6d38809ac2a31a1ce", "url": "https://github.com/ls1intum/Artemis/commit/8bb53c30d01d286701b73cf6d38809ac2a31a1ce", "message": "Merge branch 'develop' into enhancement/programming-exercise/junit5-test-template", "committedDate": "2020-10-29T16:02:36Z", "type": "commit"}, {"oid": "66ba13d6af835fe09d62e06a60b13ec9dabbf7d3", "url": "https://github.com/ls1intum/Artemis/commit/66ba13d6af835fe09d62e06a60b13ec9dabbf7d3", "message": "Unify error message handling for Bamboo and Jenkins, remove stack traces", "committedDate": "2020-10-29T17:24:29Z", "type": "commit"}, {"oid": "57d8d6ffaec45e4934b9295ca20ebe0bfd300124", "url": "https://github.com/ls1intum/Artemis/commit/57d8d6ffaec45e4934b9295ca20ebe0bfd300124", "message": "Add FeedbackServiceTest of #2224 again including more test cases", "committedDate": "2020-10-29T17:25:57Z", "type": "commit"}, {"oid": "b9628e4f2e32798a829910f0387487babe3716c4", "url": "https://github.com/ls1intum/Artemis/commit/b9628e4f2e32798a829910f0387487babe3716c4", "message": "Update to the newest artemis-java-test-sandbox to support newlines", "committedDate": "2020-10-29T18:07:12Z", "type": "commit"}, {"oid": "7ebf61fd911933b32fd4c597d9e7534997c2812b", "url": "https://github.com/ls1intum/Artemis/commit/7ebf61fd911933b32fd4c597d9e7534997c2812b", "message": "Use artemis-java-test-sandbox for the maven test template as well", "committedDate": "2020-10-29T18:07:37Z", "type": "commit"}, {"oid": "e51b111d3914c0db75ddca97dfd759b587f0b919", "url": "https://github.com/ls1intum/Artemis/commit/e51b111d3914c0db75ddca97dfd759b587f0b919", "message": "Also remove UnexpectedExceptionErrors from artemis-java-test-sandbox", "committedDate": "2020-10-29T18:11:11Z", "type": "commit"}, {"oid": "443d425c15871ea3b8733a1b28bad77543f0f0c6", "url": "https://github.com/ls1intum/Artemis/commit/443d425c15871ea3b8733a1b28bad77543f0f0c6", "message": "Merge branch 'develop' into enhancement/programming-exercise/junit5-test-template", "committedDate": "2020-10-29T18:16:04Z", "type": "commit"}, {"oid": "8b475bf26a5dcb5841a5469e739ac8675a5b7144", "url": "https://github.com/ls1intum/Artemis/commit/8b475bf26a5dcb5841a5469e739ac8675a5b7144", "message": "fix client tests", "committedDate": "2020-10-29T20:55:11Z", "type": "commit"}, {"oid": "2d92d811552f535ca6834cc1750a9244fa80f060", "url": "https://github.com/ls1intum/Artemis/commit/2d92d811552f535ca6834cc1750a9244fa80f060", "message": "Merge branch 'enhancement/programming-exercise/junit5-test-template' of https://github.com/ls1intum/Artemis into enhancement/programming-exercise/junit5-test-template", "committedDate": "2020-10-29T20:55:34Z", "type": "commit"}, {"oid": "8a1ead274cdd8a809854492dfe59b4fca31f8ae0", "url": "https://github.com/ls1intum/Artemis/commit/8a1ead274cdd8a809854492dfe59b4fca31f8ae0", "message": "Only show SCA category name in feedback if the user is at least tutor", "committedDate": "2020-10-29T21:02:26Z", "type": "commit"}, {"oid": "f8bd6ff220199715d38389709eb5072b69be1de8", "url": "https://github.com/ls1intum/Artemis/commit/f8bd6ff220199715d38389709eb5072b69be1de8", "message": "Merge branch 'develop' into enhancement/programming-exercise/junit5-test-template", "committedDate": "2020-10-29T21:03:42Z", "type": "commit"}]}