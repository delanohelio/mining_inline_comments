{"pr_number": 1237, "pr_title": "Test coverage for UserJWTController", "pr_createdAt": "2020-02-10T17:25:27Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1237", "timeline": [{"oid": "9ff67f8c3129bb0ab9404b9616978c6e0b557dc0", "url": "https://github.com/ls1intum/Artemis/commit/9ff67f8c3129bb0ab9404b9616978c6e0b557dc0", "message": "UserJWTIntegrationTest (wip)", "committedDate": "2020-02-04T16:31:12Z", "type": "commit"}, {"oid": "6223ef81792bb7656f6fba4f6645d673f824f7d1", "url": "https://github.com/ls1intum/Artemis/commit/6223ef81792bb7656f6fba4f6645d673f824f7d1", "message": "Finish test", "committedDate": "2020-02-10T17:24:40Z", "type": "commit"}, {"oid": "cc658bf34c0df526630d02ca7ebdd0b5886d5fc0", "url": "https://github.com/ls1intum/Artemis/commit/cc658bf34c0df526630d02ca7ebdd0b5886d5fc0", "message": "Merge branch 'develop' into chore/test-coverage/user-jwt", "committedDate": "2020-02-10T17:27:39Z", "type": "commit"}, {"oid": "deda188de7be752b98e8a054403c6503a477edc1", "url": "https://github.com/ls1intum/Artemis/commit/deda188de7be752b98e8a054403c6503a477edc1", "message": "Use different base class", "committedDate": "2020-02-10T17:49:24Z", "type": "commit"}, {"oid": "74d15d0402697c748412bc0eb61145edd1a3d486", "url": "https://github.com/ls1intum/Artemis/commit/74d15d0402697c748412bc0eb61145edd1a3d486", "message": "Fix", "committedDate": "2020-02-10T18:10:33Z", "type": "commit"}, {"oid": "7911c38eddc089747b7608523b6aadde48033e89", "url": "https://github.com/ls1intum/Artemis/commit/7911c38eddc089747b7608523b6aadde48033e89", "message": "Merge branch 'develop' into chore/test-coverage/user-jwt", "committedDate": "2020-02-11T15:00:29Z", "type": "commit"}, {"oid": "1c2486f720ed380d63679586cc29df196d0b255c", "url": "https://github.com/ls1intum/Artemis/commit/1c2486f720ed380d63679586cc29df196d0b255c", "message": "Show debug output (tmp)", "committedDate": "2020-02-11T15:21:08Z", "type": "commit"}, {"oid": "0ec6f4803e9c971fcf679aa2c964e3ce99f06c14", "url": "https://github.com/ls1intum/Artemis/commit/0ec6f4803e9c971fcf679aa2c964e3ce99f06c14", "message": "Jira profile should not be active when testing internal authentication", "committedDate": "2020-02-11T15:38:08Z", "type": "commit"}, {"oid": "7b262710016fbd9223d8b8cccf8233e6c5b1c4e8", "url": "https://github.com/ls1intum/Artemis/commit/7b262710016fbd9223d8b8cccf8233e6c5b1c4e8", "message": "Do not use external authentication for this test", "committedDate": "2020-02-11T15:56:02Z", "type": "commit"}, {"oid": "f2ea67c6df841675fcdbaa72b3e704594f8b9671", "url": "https://github.com/ls1intum/Artemis/commit/f2ea67c6df841675fcdbaa72b3e704594f8b9671", "message": "Revert \"Show debug output (tmp)\"\n\nThis reverts commit 1c2486f7", "committedDate": "2020-02-11T16:11:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzkxNDQ4NQ==", "url": "https://github.com/ls1intum/Artemis/pull/1237#discussion_r377914485", "bodyText": "can you move this into InternalAuthenticationIntegrationTest so that a we do not have 2 tests with different profiles?\nThis can significantly slow down test execution", "author": "krusche", "createdAt": "2020-02-11T21:37:58Z", "path": "src/test/java/de/tum/in/www1/artemis/authentication/UserJWTIntegrationTest.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package de.tum.in.www1.artemis.authentication;\n+\n+import static de.tum.in.www1.artemis.util.ModelFactory.USER_PASSWORD;\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import org.junit.jupiter.api.AfterEach;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.http.HttpHeaders;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.security.test.context.support.WithAnonymousUser;\n+import org.springframework.test.context.ActiveProfiles;\n+import org.springframework.test.context.TestPropertySource;\n+\n+import de.tum.in.www1.artemis.AbstractSpringIntegrationTest;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.security.jwt.TokenProvider;\n+import de.tum.in.www1.artemis.service.UserService;\n+import de.tum.in.www1.artemis.util.DatabaseUtilService;\n+import de.tum.in.www1.artemis.util.ModelFactory;\n+import de.tum.in.www1.artemis.util.RequestUtilService;\n+import de.tum.in.www1.artemis.web.rest.UserJWTController;\n+import de.tum.in.www1.artemis.web.rest.vm.LoginVM;\n+\n+@ActiveProfiles(\"artemis\")\n+@TestPropertySource(properties = \"artemis.user-management.use-external=false\")\n+public class UserJWTIntegrationTest extends AbstractSpringIntegrationTest {", "originalCommit": "f2ea67c6df841675fcdbaa72b3e704594f8b9671", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkxNDU5MA==", "url": "https://github.com/ls1intum/Artemis/pull/1237#discussion_r379914590", "bodyText": "Good point, I moved it into InternalAuthenticationIntegrationTest.", "author": "madwau", "createdAt": "2020-02-16T16:15:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzkxNDQ4NQ=="}], "type": "inlineReview"}, {"oid": "cec74049dfa7ae99ee4520779b4a3922e609e7cf", "url": "https://github.com/ls1intum/Artemis/commit/cec74049dfa7ae99ee4520779b4a3922e609e7cf", "message": "Merge branch 'develop' into chore/test-coverage/user-jwt", "committedDate": "2020-02-16T16:07:57Z", "type": "commit"}, {"oid": "41295595d51de2e0fd95b2a00094ebe5a572c3da", "url": "https://github.com/ls1intum/Artemis/commit/41295595d51de2e0fd95b2a00094ebe5a572c3da", "message": "Move new test into existing InternalAuthenticationIntegrationTest", "committedDate": "2020-02-16T16:09:24Z", "type": "commit"}]}