{"pr_number": 3234, "pr_title": "monitor request latency", "pr_createdAt": "2020-09-18T11:17:22Z", "pr_url": "https://github.com/oracle/opengrok/pull/3234", "timeline": [{"oid": "f379975c0910ae382e5598152928e58da36317fe", "url": "https://github.com/oracle/opengrok/commit/f379975c0910ae382e5598152928e58da36317fe", "message": "monitor request latency", "committedDate": "2020-09-18T11:15:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk1MDUyOA==", "url": "https://github.com/oracle/opengrok/pull/3234#discussion_r490950528", "bodyText": "Why static?", "author": "ahornace", "createdAt": "2020-09-18T13:30:50Z", "path": "opengrok-web/src/main/java/org/opengrok/web/WebappListener.java", "diffHunk": "@@ -53,13 +57,19 @@\n \n     private static final Logger LOGGER = LoggerFactory.getLogger(WebappListener.class);\n \n+    private static final String TIMER_ATTR_NAME = \"request_start\";\n+    private static Timer requestTimer;", "originalCommit": "f379975c0910ae382e5598152928e58da36317fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk2MjU4MA==", "url": "https://github.com/oracle/opengrok/pull/3234#discussion_r490962580", "bodyText": "hmm, not necessary, will remove. I don't actually know how the listener-class is instantiated.", "author": "vladak", "createdAt": "2020-09-18T13:49:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk1MDUyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk1MjI1Mg==", "url": "https://github.com/oracle/opengrok/pull/3234#discussion_r490952252", "bodyText": "From the docs:\n\nAttribute names should follow the same conventions as package names. Names beginning with java., javax., and com.sun.*, are reserved for use by Sun Microsystems.\n\nJust a curiosity I found :D  I don't expect you to change it. I think it's fine like this.", "author": "ahornace", "createdAt": "2020-09-18T13:33:35Z", "path": "opengrok-web/src/main/java/org/opengrok/web/WebappListener.java", "diffHunk": "@@ -53,13 +57,19 @@\n \n     private static final Logger LOGGER = LoggerFactory.getLogger(WebappListener.class);\n \n+    private static final String TIMER_ATTR_NAME = \"request_start\";", "originalCommit": "f379975c0910ae382e5598152928e58da36317fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk2NjYyOQ==", "url": "https://github.com/oracle/opengrok/pull/3234#discussion_r490966629", "bodyText": "Sounds reasonable as it makes it easier to find where given attribute originated from. That said, this is largely not adhered to in the webapp. This is how it looks like usually in requestDestroyed():\n\"request_start\" -> {Instant@8437} \"2020-09-18T13:53:48.017268Z\"\n\"project_helper_groups\" -> {TreeSet@8439}  size = 0\n\"project_helper_ungrouped_repositories\" -> {TreeSet@8441}  size = 8\n\"project_helper_grouped_projects\" -> {TreeSet@8443}  size = 0\n\"plugin_framework_project_cache\" -> {TreeMap@8445}  size = 11\n\"project_helper\" -> {ProjectHelper@8447} \n\"project_helper_ungrouped_projects\" -> {TreeSet@8449}  size = 3\n\"project_helper_grouped_repositories\" -> {TreeSet@8451}  size = 0\n\"org.opengrok.indexer.web.PageConfig\" -> {PageConfig@8452}", "author": "vladak", "createdAt": "2020-09-18T13:55:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk1MjI1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk2ODUyMg==", "url": "https://github.com/oracle/opengrok/pull/3234#discussion_r490968522", "bodyText": "changed to follow the convention.", "author": "vladak", "createdAt": "2020-09-18T13:58:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk1MjI1Mg=="}], "type": "inlineReview"}, {"oid": "d1f51fe6f8a8aa4ab5f538cfc406395ad498158d", "url": "https://github.com/oracle/opengrok/commit/d1f51fe6f8a8aa4ab5f538cfc406395ad498158d", "message": "remove static per review comment", "committedDate": "2020-09-18T13:49:36Z", "type": "commit"}, {"oid": "6469d899190b9fab63dc5d12cb961c9bb85dbe27", "url": "https://github.com/oracle/opengrok/commit/6469d899190b9fab63dc5d12cb961c9bb85dbe27", "message": "name the attribute like package names (review comment)", "committedDate": "2020-09-18T13:56:49Z", "type": "commit"}]}