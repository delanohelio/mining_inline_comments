{"pr_number": 3399, "pr_title": "add Indexer option to set API token", "pr_createdAt": "2020-12-09T14:38:52Z", "pr_url": "https://github.com/oracle/opengrok/pull/3399", "timeline": [{"oid": "4bede68cb01bfc6e77f3176302006fa3b08e26ef", "url": "https://github.com/oracle/opengrok/commit/4bede68cb01bfc6e77f3176302006fa3b08e26ef", "message": "add indexer option to specify bearer token for API calls\n\nfixes #3398", "committedDate": "2020-12-09T14:35:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk5NzEwNQ==", "url": "https://github.com/oracle/opengrok/pull/3399#discussion_r545997105", "bodyText": "This is mis-ordered and should come after both -T and -t below", "author": "idodeclare", "createdAt": "2020-12-18T17:59:49Z", "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/index/Indexer.java", "diffHunk": "@@ -756,6 +756,23 @@ public static void main(String[] argv) {\n                     \"stylesheet. The factory-setting is: \\\"default\\\".\").execute(stylePath ->\n                     cfg.setWebappLAF((String) stylePath));\n \n+            parser.on(\"--token\", \"=string|@file_with_string\",", "originalCommit": "ab99f516f796587f10983db7a8d0f6e8ba3d6ec7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDMyNTE1NQ==", "url": "https://github.com/oracle/opengrok/pull/3399#discussion_r574325155", "bodyText": "fixed", "author": "vladak", "createdAt": "2021-02-11T08:41:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk5NzEwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk5ODc5OQ==", "url": "https://github.com/oracle/opengrok/pull/3399#discussion_r545998799", "bodyText": "Is this correct handling w.r.t. the @ sigil?", "author": "idodeclare", "createdAt": "2020-12-18T18:03:22Z", "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/index/Indexer.java", "diffHunk": "@@ -756,6 +756,23 @@ public static void main(String[] argv) {\n                     \"stylesheet. The factory-setting is: \\\"default\\\".\").execute(stylePath ->\n                     cfg.setWebappLAF((String) stylePath));\n \n+            parser.on(\"--token\", \"=string|@file_with_string\",\n+                    \"Authorization bearer API token to use when making API calls\",\n+                    \"to the web application\").\n+                    execute(optarg -> {\n+                        String value = ((String) optarg).trim();\n+                        if (value.startsWith(\"@\")) {\n+                            try {\n+                                String token = new String(Files.readAllBytes(Path.of(value))).trim();", "originalCommit": "ab99f516f796587f10983db7a8d0f6e8ba3d6ec7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDMyNzk1Mg==", "url": "https://github.com/oracle/opengrok/pull/3399#discussion_r574327952", "bodyText": "Maybe only single line from the file should be read ?", "author": "vladak", "createdAt": "2021-02-11T08:46:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk5ODc5OQ=="}], "type": "inlineReview"}, {"oid": "0d3a4546a597ec55cb72981775b59d68d55da2e5", "url": "https://github.com/oracle/opengrok/commit/0d3a4546a597ec55cb72981775b59d68d55da2e5", "message": "add indexer option to specify bearer token for API calls\n\nfixes #3398", "committedDate": "2021-02-11T08:40:01Z", "type": "commit"}, {"oid": "0524b38b1becf4d5af587f641d5bdec97f54aeca", "url": "https://github.com/oracle/opengrok/commit/0524b38b1becf4d5af587f641d5bdec97f54aeca", "message": "rename getHeaders()", "committedDate": "2021-02-11T08:40:01Z", "type": "commit"}, {"oid": "de39dfa18ed4ff4770153eb0677dbccc8255dd35", "url": "https://github.com/oracle/opengrok/commit/de39dfa18ed4ff4770153eb0677dbccc8255dd35", "message": "move --token below -T and -t", "committedDate": "2021-02-11T08:40:36Z", "type": "commit"}, {"oid": "de39dfa18ed4ff4770153eb0677dbccc8255dd35", "url": "https://github.com/oracle/opengrok/commit/de39dfa18ed4ff4770153eb0677dbccc8255dd35", "message": "move --token below -T and -t", "committedDate": "2021-02-11T08:40:36Z", "type": "forcePushed"}, {"oid": "a70d6110c23217667d02a46db0a429ad2709cfe2", "url": "https://github.com/oracle/opengrok/commit/a70d6110c23217667d02a46db0a429ad2709cfe2", "message": "read single line, fix the @ handling", "committedDate": "2021-02-11T10:12:41Z", "type": "commit"}, {"oid": "4505b1a150276948254ee19788d0d96b8a1a24f0", "url": "https://github.com/oracle/opengrok/commit/4505b1a150276948254ee19788d0d96b8a1a24f0", "message": "remove unused import", "committedDate": "2021-02-17T15:21:52Z", "type": "commit"}]}