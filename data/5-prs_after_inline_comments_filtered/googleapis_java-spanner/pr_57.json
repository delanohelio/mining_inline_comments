{"pr_number": 57, "pr_title": "fix: use resource type to identify type of error", "pr_createdAt": "2020-02-04T10:27:52Z", "pr_url": "https://github.com/googleapis/java-spanner/pull/57", "timeline": [{"oid": "5e7281fd462337254d52bc762401330b3bcf74cb", "url": "https://github.com/googleapis/java-spanner/commit/5e7281fd462337254d52bc762401330b3bcf74cb", "message": "fix: use resource type to identify type of error", "committedDate": "2020-02-04T10:26:19Z", "type": "commit"}, {"oid": "242526bd680c6ad5031d7389aeb50f202d8b4c83", "url": "https://github.com/googleapis/java-spanner/commit/242526bd680c6ad5031d7389aeb50f202d8b4c83", "message": "fix: add test for DatabaseNotFoundException", "committedDate": "2020-02-04T17:00:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5NTQ4NQ==", "url": "https://github.com/googleapis/java-spanner/pull/57#discussion_r374895485", "bodyText": "what about Instance Not Found ?", "author": "snehashah16", "createdAt": "2020-02-04T20:08:13Z", "path": "google-cloud-spanner/src/main/java/com/google/cloud/spanner/SpannerExceptionFactory.java", "diffHunk": "@@ -183,10 +193,13 @@ private static SpannerException newSpannerExceptionPreformatted(\n       case ABORTED:\n         return new AbortedException(token, message, cause);\n       case NOT_FOUND:\n-        if (message != null && message.contains(\"Session not found\")) {\n-          return new SessionNotFoundException(token, message, cause);\n-        } else if (message != null && DATABASE_NOT_FOUND_MSG_PATTERN.matcher(message).matches()) {\n-          return new DatabaseNotFoundException(token, message, cause);\n+        ResourceInfo resourceInfo = extractResourceInfo(cause);\n+        if (resourceInfo != null) {", "originalCommit": "242526bd680c6ad5031d7389aeb50f202d8b4c83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIxNzc3Mw==", "url": "https://github.com/googleapis/java-spanner/pull/57#discussion_r375217773", "bodyText": "The client library does not currently handle InstanceNotFound specifically, so it is currently not recognized as a separate error. I'll open a separate issue for it, as it could cause the same problems as DatabaseNotFound if someone deletes an instance while the client library has an active connection with a database on that instance.", "author": "olavloite", "createdAt": "2020-02-05T12:06:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5NTQ4NQ=="}], "type": "inlineReview"}]}