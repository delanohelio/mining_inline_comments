{"pr_number": 3895, "pr_title": "DB-9779 New hint on table limit for exhaustive search", "pr_createdAt": "2020-07-27T15:04:26Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/3895", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM1MDU3MQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3895#discussion_r463350571", "bodyText": "I would change it to <=0.", "author": "yxia92", "createdAt": "2020-07-31T00:57:34Z", "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/FromList.java", "diffHunk": "@@ -788,6 +790,15 @@ public void setProperties(Properties props) throws StandardException{\n                         throw StandardException.newException(SQLState.LANG_INVALID_STATISTICS_SPEC,value);\n                     }\n                     break;\n+                case \"tableLimitForExhaustiveSearch\":\n+                    try {\n+                        tableLimitForExhaustiveSearch = Integer.parseUnsignedInt(value);\n+                    } catch (NumberFormatException nfe) {\n+                        throw StandardException.newException(SQLState.LANG_INVALID_TABLE_LIMIT_FOR_EXHAUSTIVE_SEARCH, value);\n+                    }\n+                    if (tableLimitForExhaustiveSearch == 0)", "originalCommit": "81eca79343653689a53add69146ce64037f77e24", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzcxOTE0MA==", "url": "https://github.com/splicemachine/spliceengine/pull/3895#discussion_r463719140", "bodyText": "Fixed in the latest commit.", "author": "ascend1", "createdAt": "2020-07-31T16:48:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM1MDU3MQ=="}], "type": "inlineReview"}, {"oid": "15a14e524677878e3ea2234aa624cc265a9bac98", "url": "https://github.com/splicemachine/spliceengine/commit/15a14e524677878e3ea2234aa624cc265a9bac98", "message": "DB-9779 New hint on table limit for exhaustive search", "committedDate": "2020-08-05T16:04:56Z", "type": "commit"}, {"oid": "bb71af30c8f6c4a316a2a1053ecc962afb7e4655", "url": "https://github.com/splicemachine/spliceengine/commit/bb71af30c8f6c4a316a2a1053ecc962afb7e4655", "message": "DB-9779 New session/database property of table limit for exhaustive search", "committedDate": "2020-08-05T16:15:59Z", "type": "commit"}, {"oid": "bb71af30c8f6c4a316a2a1053ecc962afb7e4655", "url": "https://github.com/splicemachine/spliceengine/commit/bb71af30c8f6c4a316a2a1053ecc962afb7e4655", "message": "DB-9779 New session/database property of table limit for exhaustive search", "committedDate": "2020-08-05T16:15:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk5MjA5Ng==", "url": "https://github.com/splicemachine/spliceengine/pull/3895#discussion_r465992096", "bodyText": "Please use PropertyUtil.getCachedDatabaseProperty() instead to avoid a lookup into the Property conglomerate always.", "author": "yxia92", "createdAt": "2020-08-05T20:43:19Z", "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/conn/GenericLanguageConnectionContext.java", "diffHunk": "@@ -398,6 +401,15 @@ public GenericLanguageConnectionContext(\n         String logQueryPlanProperty=PropertyUtil.getCachedDatabaseProperty(this,\"derby.language.logQueryPlan\");\n         logQueryPlan=Boolean.valueOf(logQueryPlanProperty);\n \n+        try {\n+            String valueString = (String) getTransactionCompile().getProperty(\"derby.language.tableLimitForExhaustiveSearch\");", "originalCommit": "bb71af30c8f6c4a316a2a1053ecc962afb7e4655", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjI2ODEwNw==", "url": "https://github.com/splicemachine/spliceengine/pull/3895#discussion_r466268107", "bodyText": "Done.", "author": "ascend1", "createdAt": "2020-08-06T09:19:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk5MjA5Ng=="}], "type": "inlineReview"}, {"oid": "75a7859e6105c124a47931583de0662732104ea2", "url": "https://github.com/splicemachine/spliceengine/commit/75a7859e6105c124a47931583de0662732104ea2", "message": "DB-9779 Use database property cache", "committedDate": "2020-08-06T09:18:57Z", "type": "commit"}, {"oid": "14e0850b3ddbab31919fa334b94ffe8b4ad4a05d", "url": "https://github.com/splicemachine/spliceengine/commit/14e0850b3ddbab31919fa334b94ffe8b4ad4a05d", "message": "DB-9779 Improve test", "committedDate": "2020-08-07T09:26:36Z", "type": "commit"}]}