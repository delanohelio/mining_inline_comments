{"pr_number": 4131, "pr_title": "DB-10110 Fix retrieving aliases of user-defined tables (2.8)", "pr_createdAt": "2020-09-15T22:12:53Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/4131", "timeline": [{"oid": "1feab08862a7c19282f3b5f601377bea53f49eba", "url": "https://github.com/splicemachine/spliceengine/commit/1feab08862a7c19282f3b5f601377bea53f49eba", "message": "DB-10110 Fix retrieving aliases of user-defined tables.", "committedDate": "2020-09-15T22:12:01Z", "type": "commit"}, {"oid": "65b52fb9e793ee6dc56c9d8fa003097f6e9c7441", "url": "https://github.com/splicemachine/spliceengine/commit/65b52fb9e793ee6dc56c9d8fa003097f6e9c7441", "message": "DB-10110 upgrade script for setting JavaClassName column.", "committedDate": "2020-09-17T21:24:24Z", "type": "commit"}, {"oid": "af1f9eab32e1a060bbd8c3b11b2af277f6b5933c", "url": "https://github.com/splicemachine/spliceengine/commit/af1f9eab32e1a060bbd8c3b11b2af277f6b5933c", "message": "DB-10110 fix spotbugs issue.", "committedDate": "2020-09-17T21:24:42Z", "type": "commit"}, {"oid": "a5ac34962dd4ac2839d6d683e0c06e7e73849ba2", "url": "https://github.com/splicemachine/spliceengine/commit/a5ac34962dd4ac2839d6d683e0c06e7e73849ba2", "message": "Merge remote-tracking branch 'origin/branch-2.8' into DB-10110-2.8", "committedDate": "2020-09-17T21:24:50Z", "type": "commit"}, {"oid": "03b3452664254815ce712679674bd052ac3f1127", "url": "https://github.com/splicemachine/spliceengine/commit/03b3452664254815ce712679674bd052ac3f1127", "message": "Merge remote-tracking branch 'origin/branch-2.8' into DB-10110-2.8", "committedDate": "2020-10-05T10:53:49Z", "type": "commit"}, {"oid": "091a604c6e7a929350bcaac605ed99055388e02b", "url": "https://github.com/splicemachine/spliceengine/commit/091a604c6e7a929350bcaac605ed99055388e02b", "message": "DB-10110 Address comments.", "committedDate": "2020-10-05T11:00:28Z", "type": "forcePushed"}, {"oid": "defc21e14c4cc50ca8e8200fc8a4456686805cdb", "url": "https://github.com/splicemachine/spliceengine/commit/defc21e14c4cc50ca8e8200fc8a4456686805cdb", "message": "DB-10110 Address comments.", "committedDate": "2020-10-05T11:03:42Z", "type": "commit"}, {"oid": "defc21e14c4cc50ca8e8200fc8a4456686805cdb", "url": "https://github.com/splicemachine/spliceengine/commit/defc21e14c4cc50ca8e8200fc8a4456686805cdb", "message": "DB-10110 Address comments.", "committedDate": "2020-10-05T11:03:42Z", "type": "forcePushed"}, {"oid": "da2dbe913bfa651eb7a60455daaeb02a380e2b61", "url": "https://github.com/splicemachine/spliceengine/commit/da2dbe913bfa651eb7a60455daaeb02a380e2b61", "message": "Merge remote-tracking branch 'origin/branch-2.8' into DB-10110-2.8", "committedDate": "2020-10-09T15:24:48Z", "type": "commit"}, {"oid": "b9bacb162d4136a2bd012d747b61c917d2637992", "url": "https://github.com/splicemachine/spliceengine/commit/b9bacb162d4136a2bd012d747b61c917d2637992", "message": "Merge remote-tracking branch 'origin/branch-2.8' into DB-10110-2.8", "committedDate": "2020-10-13T08:20:56Z", "type": "commit"}, {"oid": "2583ca7a38471ed6ed03a4bdf3fea4f1a9dfef36", "url": "https://github.com/splicemachine/spliceengine/commit/2583ca7a38471ed6ed03a4bdf3fea4f1a9dfef36", "message": "DB-10110 update upgrade version to 1979", "committedDate": "2020-10-13T08:21:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTg5MDg5Mg==", "url": "https://github.com/splicemachine/spliceengine/pull/4131#discussion_r505890892", "bodyText": "i think you wanted to move this, but it got lost :-/\nsee DB-10110 on master\nhttps://github.com/splicemachine/spliceengine/pull/4129/files?diff=split&w=1#diff-20f0560c4e3b16f5e0923ce041346429fa9d9084ee732fb35e9d5afe28778dbdR122-R127", "author": "martinrupp", "createdAt": "2020-10-15T22:05:04Z", "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/catalog/SYSALIASESRowFactory.java", "diffHunk": "@@ -51,63 +51,68 @@\n  *\n  * Here are the directions for adding a new system supplied alias.\n  * Misc:\n- *  All system supplied aliases are class aliases at this point.\n- *\tAdditional arrays will need to be added if we supply system\n- *\taliases of other types.\n- *\tThe preloadAliasIDs array is an array of hard coded UUIDs\n- *\tfor the system supplied aliases.\n- *\tThe preloadAliases array is the array of aliases\n- *\tfor the system supplied aliases.  This array is in alphabetical\n- *\torder by package and class in Xena.  Each alias is the uppercase\n- *\tclass name of the alias.\n- *  The preloadJavaClassNames array is the array of full package.class\n- *  names for the system supplied aliases.  This array is in alphabetical\n- *\torder by package and class in Xena.  \n- *\tSYSALIASES_NUM_BOOT_ROWS is the number of boot rows in sys.sysaliases\n- *  in a new database.\n- *\n- *\n+ * All system supplied aliases are class aliases at this point.\n+ * Additional arrays will need to be added if we supply system\n+ * aliases of other types.\n+ * The preloadAliasIDs array is an array of hard coded UUIDs\n+ * for the system supplied aliases.\n+ * The preloadAliases array is the array of aliases\n+ * for the system supplied aliases.  This array is in alphabetical\n+ * order by package and class in Xena.  Each alias is the uppercase\n+ * class name of the alias.\n+ * The preloadJavaClassNames array is the array of full package.class\n+ * names for the system supplied aliases.  This array is in alphabetical\n+ * order by package and class in Xena.\n+ * SYSALIASES_NUM_BOOT_ROWS is the number of boot rows in sys.sysaliases\n+ * in a new database.\n  */\n \n-public class SYSALIASESRowFactory extends CatalogRowFactory\n-{\n-\n-\tprivate static final int\t\tSYSALIASES_COLUMN_COUNT = 9;\n-\tprivate static final int\t\tSYSALIASES_ALIASID = 1;\n-\tprivate static final int\t\tSYSALIASES_ALIAS = 2;\n-\tprivate static final int\t\tSYSALIASES_SCHEMAID = 3;\n-\tprivate static final int\t\tSYSALIASES_JAVACLASSNAME = 4;\n-\tprivate static final int\t\tSYSALIASES_ALIASTYPE = 5;\n-\tprivate static final int\t\tSYSALIASES_NAMESPACE = 6;\n-\tprivate static final int\t\tSYSALIASES_SYSTEMALIAS = 7;\n-\tpublic  static final int\t\tSYSALIASES_ALIASINFO = 8;\n-\tprivate static final int\t\tSYSALIASES_SPECIFIC_NAME = 9;\n-\n- \n-\tprotected static final int\t\tSYSALIASES_INDEX1_ID = 0;\n-\n-\tprotected static final int\t\tSYSALIASES_INDEX2_ID = 1;\n-\n-\tprotected static final int\t\tSYSALIASES_INDEX3_ID = 2;\n-\n-\t// null means all unique.\n-    private\tstatic\tfinal\tboolean[]\tuniqueness = null;\n-\n-\tprivate static int[][] indexColumnPositions =\n-\t{\n-\t\t{SYSALIASES_SCHEMAID, SYSALIASES_ALIAS, SYSALIASES_NAMESPACE},\n-\t\t{SYSALIASES_ALIASID},\n-\t\t{SYSALIASES_SCHEMAID, SYSALIASES_SPECIFIC_NAME},\n-\t};\n-", "originalCommit": "2583ca7a38471ed6ed03a4bdf3fea4f1a9dfef36", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE4OTQxOA==", "url": "https://github.com/splicemachine/spliceengine/pull/4131#discussion_r506189418", "bodyText": "That's right, sorry about that and thanks for spotting it.", "author": "hatyo", "createdAt": "2020-10-16T08:56:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTg5MDg5Mg=="}], "type": "inlineReview"}]}