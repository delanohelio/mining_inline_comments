{"pr_number": 3627, "pr_title": "DB-9572 add useOLAP=X as query and session config/hint", "pr_createdAt": "2020-06-02T10:01:37Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/3627", "timeline": [{"oid": "600ec69f3d4ae5d05d444507f7b9fe314e2e9cb8", "url": "https://github.com/splicemachine/spliceengine/commit/600ec69f3d4ae5d05d444507f7b9fe314e2e9cb8", "message": "DB-9572 add useOLAP=X as query and session config/hint", "committedDate": "2020-06-02T10:03:50Z", "type": "forcePushed"}, {"oid": "76a891c9eeb7ac04d8afab4080ad8c769a7dddfb", "url": "https://github.com/splicemachine/spliceengine/commit/76a891c9eeb7ac04d8afab4080ad8c769a7dddfb", "message": "DB-9572 add useOLAP=X as query and session config/hint", "committedDate": "2020-06-02T10:24:07Z", "type": "forcePushed"}, {"oid": "d4e730b8d9d25017f4eab17fa5dc9536d282c35f", "url": "https://github.com/splicemachine/spliceengine/commit/d4e730b8d9d25017f4eab17fa5dc9536d282c35f", "message": "DB-9572 add useOLAP=X as query and session config/hint", "committedDate": "2020-06-15T08:54:33Z", "type": "forcePushed"}, {"oid": "79ef3d40e489bb42d2e7606cfe6b21d6369913e8", "url": "https://github.com/splicemachine/spliceengine/commit/79ef3d40e489bb42d2e7606cfe6b21d6369913e8", "message": "DB-9572 add useOLAP=X as query and session config/hint", "committedDate": "2020-06-16T07:13:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMjc2OA==", "url": "https://github.com/splicemachine/spliceengine/pull/3627#discussion_r441222768", "bodyText": "@martinrupp useOLAP needs to be added to SessionPropertiesImpl.setProperty() also, otherwise, set session_property useOLAP=true does not have any effect. Also, is it better to use different id for useOLAP and useSpark?  Currently the output of values current session_property returns both properties, which is a bit confusing:\nsplice> values current session_property;\n1                                                                                                                                                                                                                                                               \n----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\nUSESPARK=true; USEOLAP=true;", "author": "yxia92", "createdAt": "2020-06-17T01:02:14Z", "path": "db-engine/src/main/java/com/splicemachine/db/iapi/sql/conn/SessionProperties.java", "diffHunk": "@@ -42,6 +42,7 @@\n public interface SessionProperties {\n     enum PROPERTYNAME{\n         USESPARK(0),\n+        USEOLAP(0), // alias for USESPARK", "originalCommit": "79ef3d40e489bb42d2e7606cfe6b21d6369913e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI5MzA5NQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3627#discussion_r441293095", "bodyText": "useOLAP needs to be added to SessionPropertiesImpl.setProperty()\n\nsince both USESPARK and USEOLAP are defined to 0, i think it would also work like this, but maybe would more consistent to add it to the switch in SessionPropertiesImpl.setProperty.\n\nAlso, is it better to use different id for useOLAP and useSpark?\n\nI thought that having both the same id is better, because USESPARK and USEOLAP are really the same thing, so giving them different ids we need more caution in implementing.\nI thought about this and actually think the way it's displayed in values current session_property now is good - given we're having now two values meaning the same. We could also remove one of the outputs USESPARK or USEOLAP, but as said, it's the same thing, which of those would we remove? If we had different values, people would assume different values mean different things, then  might start adding USESPARK=true and USEOLAP=true just to be sure to have it correctly.", "author": "martinrupp", "createdAt": "2020-06-17T05:43:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMjc2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA2NTg1NA==", "url": "https://github.com/splicemachine/spliceengine/pull/3627#discussion_r447065854", "bodyText": "There's other options for this as well:\n\nuseOLAP=useSpark like above, show both in session_property\nuseOLAP=useSpark like above, but only show USEOLAP=true; in session_property\nhave useOLAP a different config value than useSpark, results then in different outputs for session_property (when using useOlap, shows USEOLAP=true; in session_property, using useSpark, shows USESPARK=true; in session_property, when using both, shows both)\n\nThe reason i didn't choose 3) is that i think it might be users could be confused if useOlap is another thing as useSpark, resulting in people setting both useOLAP and useSPARK just to be sure (like it could be useSpark for OLAP, is there another OLAP executor?)\nReason i didn't choose 2) is that users might config useSpark and then it doesn't show up. Actually i think that is more preferable than 3).\nThere was a small discussion on Slack, and if i understand correctly, both @yxia92 and @dgomezferro would like to not have both be displayed and rather deprecate useSpark, that is: display useOLAP, but allow both useOLAP and still useSpark (option 2) ).", "author": "martinrupp", "createdAt": "2020-06-29T15:38:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMjc2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzEyNDgyNQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3627#discussion_r447124825", "bodyText": "@martinrupp yes, I prefer option 2 like you described(display useOLAP only, but allow both to support backward compatibility). Thanks!", "author": "yxia92", "createdAt": "2020-06-29T17:10:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMjc2OA=="}], "type": "inlineReview"}, {"oid": "ba2d346d622b07a3b0044a08ab42e879931ed4ab", "url": "https://github.com/splicemachine/spliceengine/commit/ba2d346d622b07a3b0044a08ab42e879931ed4ab", "message": "DB-9572 add useOLAP=X as query and session config/hint", "committedDate": "2020-06-29T15:56:36Z", "type": "commit"}, {"oid": "ba2d346d622b07a3b0044a08ab42e879931ed4ab", "url": "https://github.com/splicemachine/spliceengine/commit/ba2d346d622b07a3b0044a08ab42e879931ed4ab", "message": "DB-9572 add useOLAP=X as query and session config/hint", "committedDate": "2020-06-29T15:56:36Z", "type": "forcePushed"}]}