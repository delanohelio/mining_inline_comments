{"pr_number": 4433, "pr_title": "DB-10570 support currentSchema in jdbc connecting string", "pr_createdAt": "2020-11-02T19:34:51Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/4433", "timeline": [{"oid": "f7a1d7dc93cfcb6b5a7bd98045c9983600039c3b", "url": "https://github.com/splicemachine/spliceengine/commit/f7a1d7dc93cfcb6b5a7bd98045c9983600039c3b", "message": "DB-10570 support currentSchema in jdbc connecting string", "committedDate": "2020-11-02T18:18:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUzNzU2Nw==", "url": "https://github.com/splicemachine/spliceengine/pull/4433#discussion_r516537567", "bodyText": "It seems we support both schema and currentSchema, between which currentSchema has priority in a sense that if it's set, then schema is ignored. Is that intended?", "author": "ascend1", "createdAt": "2020-11-03T09:46:39Z", "path": "db-engine/src/main/java/com/splicemachine/db/impl/jdbc/TransactionResourceImpl.java", "diffHunk": "@@ -173,7 +172,9 @@\n         drdaID = info.getProperty(Attribute.DRDAID_ATTR, null);\n         rdbIntTkn = info.getProperty(Attribute.RDBINTTKN_ATTR, null);\n         ipAddress = info.getProperty(Property.IP_ADDRESS, null);\n-        defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);\n+        defaultSchema = info.getProperty(Property.CONNECTION_CURRENT_SCHEMA, null);\n+        if (defaultSchema == null)\n+            defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);", "originalCommit": "f7a1d7dc93cfcb6b5a7bd98045c9983600039c3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU0MDEwMw==", "url": "https://github.com/splicemachine/spliceengine/pull/4433#discussion_r516540103", "bodyText": "e.g. what's the expected behavior of schema=A;currentSchema=B.", "author": "hatyo", "createdAt": "2020-11-03T09:50:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUzNzU2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjgzOTkxMA==", "url": "https://github.com/splicemachine/spliceengine/pull/4433#discussion_r516839910", "bodyText": "Yes, @ascend1 and @hatyo , the code above is intended, so for the scenario @hatyo raised, we have a deterministic behavior. Basically, currentSchema will take precedence over schema.", "author": "yxia92", "createdAt": "2020-11-03T17:32:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUzNzU2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzIwODg3Ng==", "url": "https://github.com/splicemachine/spliceengine/pull/4433#discussion_r517208876", "bodyText": "Thanks!", "author": "hatyo", "createdAt": "2020-11-04T09:33:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUzNzU2Nw=="}], "type": "inlineReview"}]}