{"pr_number": 7560, "pr_title": "Fix entity properties not being sent to vanilla clients at all", "pr_createdAt": "2020-12-21T10:29:52Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/7560", "timeline": [{"oid": "13d577cc39cad4a33a8e5e198e8247ff1dcf4c2e", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/13d577cc39cad4a33a8e5e198e8247ff1dcf4c2e", "message": "Fix VanillaConnectionNetworkFilter sending out invalid entity properties packets without an entity ID", "committedDate": "2020-12-21T10:28:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTEyNzUzNA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7560#discussion_r549127534", "bodyText": "Won't using Collections.emptyList throw an UnsupportedOperationException when adding the snapshots further down the line? Shouldn't we use a new ArrayList?", "author": "ichttt", "createdAt": "2020-12-27T15:41:41Z", "path": "src/main/java/net/minecraftforge/network/VanillaConnectionNetworkFilter.java", "diffHunk": "@@ -84,7 +85,7 @@ public static void injectIfNecessary(NetworkManager manager)\n     @Nonnull\n     private static SEntityPropertiesPacket filterEntityProperties(SEntityPropertiesPacket msg)\n     {\n-        SEntityPropertiesPacket newPacket = new SEntityPropertiesPacket();\n+        SEntityPropertiesPacket newPacket = new SEntityPropertiesPacket(msg.getEntityId(), Collections.emptyList());", "originalCommit": "13d577cc39cad4a33a8e5e198e8247ff1dcf4c2e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTEyODYzNw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7560#discussion_r549128637", "bodyText": "SEntityPropertiesPacket always initializes its snapshot field as Lists.newArrayList. This constructor parameter is only used in a for loop to fill that snapshots list. However as we already have a list of snapshots here (and not a list of ModifiableAttributeInstance, I pass in an empty list so the constructor does not add anything to the snapshots list - we will do that later manually.", "author": "diesieben07", "createdAt": "2020-12-27T15:52:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTEyNzUzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTEyODcyMg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7560#discussion_r549128722", "bodyText": "You are right, for some reason I misread the code there.", "author": "ichttt", "createdAt": "2020-12-27T15:53:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTEyNzUzNA=="}], "type": "inlineReview"}]}