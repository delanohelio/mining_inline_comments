{"pr_number": 7207, "pr_title": "[1.16] Fix possible crash when using rendering regionCache", "pr_createdAt": "2020-08-03T10:01:12Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/7207", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU2NzQyMw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7207#discussion_r467567423", "bodyText": "This is a binary breaking change. Is there a reason you are not just adding a null check on the call-site?", "author": "diesieben07", "createdAt": "2020-08-09T10:44:55Z", "path": "src/main/java/net/minecraftforge/client/MinecraftForgeClient.java", "diffHunk": "@@ -122,10 +123,10 @@ public static void onRebuildChunk(World world, BlockPos position, ChunkRenderCac\n         if (cache == null)\n             regionCache.invalidate(Pair.of(world, position));\n         else\n-            regionCache.put(Pair.of(world, position), cache);\n+            regionCache.put(Pair.of(world, position), Optional.ofNullable(cache));\n     }\n \n-    public static ChunkRenderCache getRegionRenderCache(World world, BlockPos pos)\n+    public static Optional<ChunkRenderCache> getRegionRenderCache(World world, BlockPos pos)", "originalCommit": "d0a50ac22ab4091f95675a5a07ec1585edc66c14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3NTAyNQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7207#discussion_r467575025", "bodyText": "Guave Cache does not allow null values as mentioned in linked issue (#7197)", "author": "Nightenom", "createdAt": "2020-08-09T11:59:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU2NzQyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU3NTM2MQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7207#discussion_r467575361", "bodyText": "That doesn't mean this method needs to return an Optional.", "author": "diesieben07", "createdAt": "2020-08-09T12:03:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU2NzQyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5MTYyMQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7207#discussion_r467591621", "bodyText": "Surely I can rename this to getRegionRenderCacheOptional and make the old method link it", "author": "Nightenom", "createdAt": "2020-08-09T14:40:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU2NzQyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYwMTk0MQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7207#discussion_r467601941", "bodyText": "Or just not change the method at all.", "author": "diesieben07", "createdAt": "2020-08-09T16:19:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU2NzQyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI0OTU1MQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7207#discussion_r476249551", "bodyText": "Done", "author": "Nightenom", "createdAt": "2020-08-25T07:54:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU2NzQyMw=="}], "type": "inlineReview"}, {"oid": "1dbb8833cddad6e6e8cdcf46147d2adbba28937b", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1dbb8833cddad6e6e8cdcf46147d2adbba28937b", "message": "Fix #7197", "committedDate": "2020-09-11T07:17:41Z", "type": "commit"}, {"oid": "9f7d2c8e934f0faafb9a7867de70faba2a37993a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/9f7d2c8e934f0faafb9a7867de70faba2a37993a", "message": "Update MinecraftForgeClient.java", "committedDate": "2020-09-11T07:17:41Z", "type": "commit"}, {"oid": "63453d7cd9463f561b53a914aa8637b02cdcf6a4", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/63453d7cd9463f561b53a914aa8637b02cdcf6a4", "message": "Fix derp", "committedDate": "2020-09-11T07:17:41Z", "type": "commit"}, {"oid": "63453d7cd9463f561b53a914aa8637b02cdcf6a4", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/63453d7cd9463f561b53a914aa8637b02cdcf6a4", "message": "Fix derp", "committedDate": "2020-09-11T07:17:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQxNjg4OA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7207#discussion_r488416888", "bodyText": "You can use a simple Optional.of(...) here since cache can not be null.", "author": "OrionDevelopment", "createdAt": "2020-09-15T06:28:39Z", "path": "src/main/java/net/minecraftforge/client/MinecraftForgeClient.java", "diffHunk": "@@ -115,10 +116,15 @@ public static void onRebuildChunk(World world, BlockPos position, ChunkRenderCac\n         if (cache == null)\n             regionCache.invalidate(Pair.of(world, position));\n         else\n-            regionCache.put(Pair.of(world, position), cache);\n+            regionCache.put(Pair.of(world, position), Optional.ofNullable(cache));", "originalCommit": "63453d7cd9463f561b53a914aa8637b02cdcf6a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a4fa698ede03facf327007514ad5d29cd19b6732", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/a4fa698ede03facf327007514ad5d29cd19b6732", "message": "Update MinecraftForgeClient.java", "committedDate": "2020-09-15T07:43:31Z", "type": "commit"}, {"oid": "ce18e0b0349b8810d5830dcf15c790131f0c74d3", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/ce18e0b0349b8810d5830dcf15c790131f0c74d3", "message": "Add @Nullable", "committedDate": "2020-09-22T18:43:57Z", "type": "commit"}]}