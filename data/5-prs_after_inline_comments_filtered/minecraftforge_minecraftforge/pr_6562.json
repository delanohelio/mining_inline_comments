{"pr_number": 6562, "pr_title": "Add renderer to RenderNameplateEvent", "pr_createdAt": "2020-03-13T07:11:32Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/6562", "timeline": [{"oid": "fd82f9ef5a29be85b819847b3f627379f1217d17", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/fd82f9ef5a29be85b819847b3f627379f1217d17", "message": "Add renderer to RenderNameplateEvent\n\nAdds renderer access previously provided by RenderLivingEvent.Specials.Pre, and includes packedLight to the same end: for mods to cancel/deny the event and render their own nameplate.\r\n\r\n[forum thread](https://www.minecraftforge.net/forum/topic/81771-1152-rendernameplateevent-has-no-renderer/)", "committedDate": "2020-03-13T07:08:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA5MzUxNg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6562#discussion_r392093516", "bodyText": "This breaks binary compatibility.", "author": "diesieben07", "createdAt": "2020-03-13T08:42:00Z", "path": "src/main/java/net/minecraftforge/client/event/RenderNameplateEvent.java", "diffHunk": "@@ -32,33 +33,41 @@\n  * {@link #nameplateContent} contains the content being rendered on the name plate/tag. This can be changed by mods.<br>\n  * {@link #originalContent} contains the original content being rendered on the name plate/tag. This cannot be\n  * changed by mods.<br>\n+ * {@link #entityRenderer} contains the entity renderer instance that renders the name plate/tag. This cannot be\n+ * changed by mods.<br>\n  * {@link #matrixStack} contains the matrix stack instance involved in rendering the name plate/tag. This cannot\n  * be changed by mods.<br>\n  * {@link #renderTypeBuffer} contains the render type buffer instance involved in rendering the name plate/tag.\n  * This cannot be changed by mods.<br>\n+ * {@link #packedLight} contains the sky and block light values used in rendering the name plate/tag.<br>\n  * <br>\n  * This event has a result. {@link HasResult}. <br>\n  * ALLOW will force-render name plate/tag, DEFAULT will ignore the hook and continue using the vanilla check\n  * & DENY will prevent name plate/tag from rendering<br>\n  * <br>\n  * This event is fired on the {@link MinecraftForge#EVENT_BUS}.\n+ * @param <T> the entity type of the renderer\n  **/\n @Event.HasResult\n-public class RenderNameplateEvent extends EntityEvent\n+public class RenderNameplateEvent<T extends Entity> extends EntityEvent\n {\n \n     private String nameplateContent;\n     private final String originalContent;\n+    private final EntityRenderer<T> entityRenderer;\n     private final MatrixStack matrixStack;\n     private final IRenderTypeBuffer renderTypeBuffer;\n+    private final int packedLight;\n \n-    public RenderNameplateEvent(Entity entity, String content, MatrixStack matrixStack, IRenderTypeBuffer renderTypeBuffer)\n+    public RenderNameplateEvent(Entity entity, String content, EntityRenderer<T> entityRenderer, MatrixStack matrixStack, IRenderTypeBuffer renderTypeBuffer, int packedLight)", "originalCommit": "fd82f9ef5a29be85b819847b3f627379f1217d17", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA5NDIzOQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6562#discussion_r392094239", "bodyText": "Type parameters on events are meaningless, unless IGenericEvent is used, which provides very limited filtering and is not applicable here.", "author": "diesieben07", "createdAt": "2020-03-13T08:43:38Z", "path": "src/main/java/net/minecraftforge/client/event/RenderNameplateEvent.java", "diffHunk": "@@ -32,33 +33,41 @@\n  * {@link #nameplateContent} contains the content being rendered on the name plate/tag. This can be changed by mods.<br>\n  * {@link #originalContent} contains the original content being rendered on the name plate/tag. This cannot be\n  * changed by mods.<br>\n+ * {@link #entityRenderer} contains the entity renderer instance that renders the name plate/tag. This cannot be\n+ * changed by mods.<br>\n  * {@link #matrixStack} contains the matrix stack instance involved in rendering the name plate/tag. This cannot\n  * be changed by mods.<br>\n  * {@link #renderTypeBuffer} contains the render type buffer instance involved in rendering the name plate/tag.\n  * This cannot be changed by mods.<br>\n+ * {@link #packedLight} contains the sky and block light values used in rendering the name plate/tag.<br>\n  * <br>\n  * This event has a result. {@link HasResult}. <br>\n  * ALLOW will force-render name plate/tag, DEFAULT will ignore the hook and continue using the vanilla check\n  * & DENY will prevent name plate/tag from rendering<br>\n  * <br>\n  * This event is fired on the {@link MinecraftForge#EVENT_BUS}.\n+ * @param <T> the entity type of the renderer\n  **/\n @Event.HasResult\n-public class RenderNameplateEvent extends EntityEvent\n+public class RenderNameplateEvent<T extends Entity> extends EntityEvent", "originalCommit": "fd82f9ef5a29be85b819847b3f627379f1217d17", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "54b46538da7730fe4e459d5c4278a7ef184658a9", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/54b46538da7730fe4e459d5c4278a7ef184658a9", "message": "Removed type param, added constructor\n\nSupports old constructor to maintain compatibility", "committedDate": "2020-03-14T01:04:04Z", "type": "commit"}, {"oid": "c88f2ec1e1a95adfc887bf71caa085abee9dee70", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/c88f2ec1e1a95adfc887bf71caa085abee9dee70", "message": "Compacted overloaded constructor", "committedDate": "2020-03-16T22:39:22Z", "type": "commit"}, {"oid": "5e57de30d9aaee5ea3b0c20f7a256496bfac2b17", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/5e57de30d9aaee5ea3b0c20f7a256496bfac2b17", "message": "Discourage using old constructor", "committedDate": "2020-03-16T23:15:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5ODUxMQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6562#discussion_r396098511", "bodyText": "Use EntityRenderer<?> instead of raw EntityRenderer, don't just suppress the warning", "author": "ichttt", "createdAt": "2020-03-22T14:16:00Z", "path": "src/main/java/net/minecraftforge/client/event/RenderNameplateEvent.java", "diffHunk": "@@ -32,33 +35,47 @@\n  * {@link #nameplateContent} contains the content being rendered on the name plate/tag. This can be changed by mods.<br>\n  * {@link #originalContent} contains the original content being rendered on the name plate/tag. This cannot be\n  * changed by mods.<br>\n+ * {@link #entityRenderer} contains the entity renderer instance that renders the name plate/tag. This cannot be\n+ * changed by mods.<br>\n  * {@link #matrixStack} contains the matrix stack instance involved in rendering the name plate/tag. This cannot\n  * be changed by mods.<br>\n  * {@link #renderTypeBuffer} contains the render type buffer instance involved in rendering the name plate/tag.\n  * This cannot be changed by mods.<br>\n+ * {@link #packedLight} contains the sky and block light values used in rendering the name plate/tag.<br>\n  * <br>\n  * This event has a result. {@link HasResult}. <br>\n  * ALLOW will force-render name plate/tag, DEFAULT will ignore the hook and continue using the vanilla check\n  * & DENY will prevent name plate/tag from rendering<br>\n  * <br>\n  * This event is fired on the {@link MinecraftForge#EVENT_BUS}.\n  **/\n+@SuppressWarnings(\"rawtypes\")", "originalCommit": "5e57de30d9aaee5ea3b0c20f7a256496bfac2b17", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7fc8c8cefdbedd7cec3fcb51bb41c86e7453fdaa", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/7fc8c8cefdbedd7cec3fcb51bb41c86e7453fdaa", "message": "use wildcard type param", "committedDate": "2020-03-22T15:15:04Z", "type": "commit"}, {"oid": "19c68db015b14eb54c38ec1cbac12ee9d371319e", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/19c68db015b14eb54c38ec1cbac12ee9d371319e", "message": "a message to the future", "committedDate": "2020-03-23T07:03:41Z", "type": "commit"}]}