{"pr_number": 7181, "pr_title": "[1.16] ForgeEventFactory#canCreateFluidSource reintroduced", "pr_createdAt": "2020-07-27T16:25:22Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181", "timeline": [{"oid": "839b33e99b0ed2e2600f400e10a7686ab4dbbe11", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/839b33e99b0ed2e2600f400e10a7686ab4dbbe11", "message": "ForgeEventFactory#canCreateFluidSource reintroduced", "committedDate": "2020-07-27T16:19:59Z", "type": "commit"}, {"oid": "1c8eaeb2a1b56efc44d9f74b6e48c1efb6224dec", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1c8eaeb2a1b56efc44d9f74b6e48c1efb6224dec", "message": "Merge branch '1.16.x' into 1.16.x", "committedDate": "2020-07-28T06:50:40Z", "type": "commit"}, {"oid": "6cc79a2685ad7aff8176b17a5183cefc849e91dc", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/6cc79a2685ad7aff8176b17a5183cefc849e91dc", "message": "Update mod name", "committedDate": "2020-07-28T07:03:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ0NjAwMg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r461446002", "bodyText": "Should probably be disabled by default. Also, please keep you curly brackets style at least consistent within on class and move it to a new line.", "author": "ichttt", "createdAt": "2020-07-28T09:27:42Z", "path": "src/test/java/net/minecraftforge/debug/fluid/FiniteWaterTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2020.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.debug.fluid;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.fluid.FluidState;\n+import net.minecraft.fluid.Fluids;\n+import net.minecraftforge.event.world.BlockEvent;\n+import net.minecraftforge.eventbus.api.Event;\n+import net.minecraftforge.eventbus.api.SubscribeEvent;\n+import net.minecraftforge.fml.common.Mod;\n+\n+@Mod(\"finite_water_test\")\n+@Mod.EventBusSubscriber()\n+public class FiniteWaterTest {", "originalCommit": "6cc79a2685ad7aff8176b17a5183cefc849e91dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ0NjE0NA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r461446144", "bodyText": "spaces between if and bracket please", "author": "ichttt", "createdAt": "2020-07-28T09:27:54Z", "path": "src/test/java/net/minecraftforge/debug/fluid/FiniteWaterTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2020.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.debug.fluid;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.fluid.FluidState;\n+import net.minecraft.fluid.Fluids;\n+import net.minecraftforge.event.world.BlockEvent;\n+import net.minecraftforge.eventbus.api.Event;\n+import net.minecraftforge.eventbus.api.SubscribeEvent;\n+import net.minecraftforge.fml.common.Mod;\n+\n+@Mod(\"finite_water_test\")\n+@Mod.EventBusSubscriber()\n+public class FiniteWaterTest {\n+    @SubscribeEvent\n+    public static void handleFiniteWaterSource(BlockEvent.CreateFluidSourceEvent event)\n+    {\n+        BlockState state = event.getState();\n+        FluidState fluidState = state.getFluidState();\n+        if(fluidState.getFluid().isEquivalentTo(Fluids.WATER))", "originalCommit": "6cc79a2685ad7aff8176b17a5183cefc849e91dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a08c86c15ed833ee98ccae725efe745149330928", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/a08c86c15ed833ee98ccae725efe745149330928", "message": "Merge pull request #1 from MinecraftForge/1.16.x\n\nMake license toml entry optional during 1.16.1", "committedDate": "2020-07-28T10:13:09Z", "type": "commit"}, {"oid": "f418b802a49e26c2dd0486c32e291d766c0db3a4", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/f418b802a49e26c2dd0486c32e291d766c0db3a4", "message": "Adjusted based on recommendations", "committedDate": "2020-07-28T10:37:42Z", "type": "commit"}, {"oid": "69abf3e2e0a8b22492e9e25c38a5b100b4e98f23", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/69abf3e2e0a8b22492e9e25c38a5b100b4e98f23", "message": "Update FiniteWaterTest.java", "committedDate": "2020-07-28T10:41:15Z", "type": "commit"}, {"oid": "94bd3c6ed2c7265178ff362e26eacc914559e9f2", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/94bd3c6ed2c7265178ff362e26eacc914559e9f2", "message": "Now we can create infinite lava sources", "committedDate": "2020-07-28T17:49:36Z", "type": "commit"}, {"oid": "a776ba94b3b2c780df37af871d125d1395c5931e", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/a776ba94b3b2c780df37af871d125d1395c5931e", "message": "Merge branch '1.16.x' into 1.16.x", "committedDate": "2020-08-04T06:48:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzIzNw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467483237", "bodyText": "This is a binary-breaking change and won't be accepted for 1.16.", "author": "diesieben07", "createdAt": "2020-08-08T16:52:39Z", "path": "src/main/java/net/minecraftforge/event/ForgeEventFactory.java", "diffHunk": "@@ -661,7 +662,7 @@ public static LootTable loadLootTable(ResourceLocation name, LootTable table, Lo\n         return event.getTable();\n     }\n \n-    public static boolean canCreateFluidSource(World world, BlockPos pos, BlockState state, boolean def)\n+    public static boolean canCreateFluidSource(IWorldReader world, BlockPos pos, BlockState state, boolean def)", "originalCommit": "a776ba94b3b2c780df37af871d125d1395c5931e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzI1OQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467483259", "bodyText": "Binary breaking change", "author": "diesieben07", "createdAt": "2020-08-08T16:52:53Z", "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "diffHunk": "@@ -281,9 +282,9 @@ public boolean getForceRedstoneUpdate()\n     @HasResult\n     public static class CreateFluidSourceEvent extends BlockEvent\n     {\n-        public CreateFluidSourceEvent(World world, BlockPos pos, BlockState state)\n+        public CreateFluidSourceEvent(IWorldReader world, BlockPos pos, BlockState state)", "originalCommit": "a776ba94b3b2c780df37af871d125d1395c5931e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzI4NQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467483285", "bodyText": "You can't just blindly cast things.", "author": "diesieben07", "createdAt": "2020-08-08T16:53:17Z", "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "diffHunk": "@@ -281,9 +282,9 @@ public boolean getForceRedstoneUpdate()\n     @HasResult\n     public static class CreateFluidSourceEvent extends BlockEvent\n     {\n-        public CreateFluidSourceEvent(World world, BlockPos pos, BlockState state)\n+        public CreateFluidSourceEvent(IWorldReader world, BlockPos pos, BlockState state)\n         {\n-            super(world, pos, state);\n+            super((IWorld) world, pos, state);", "originalCommit": "a776ba94b3b2c780df37af871d125d1395c5931e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NzM4NQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467487385", "bodyText": "What do you think about it? super(world instanceof IWorld ? (IWorld) world : null, pos, state);", "author": "Edivad99", "createdAt": "2020-08-08T17:41:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzI4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzMyMQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467483321", "bodyText": "Formatting (braces on newlines).", "author": "diesieben07", "createdAt": "2020-08-08T16:53:49Z", "path": "src/test/java/net/minecraftforge/debug/fluid/FiniteWaterTest.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2020.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.debug.fluid;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.fluid.FluidState;\n+import net.minecraft.fluid.Fluids;\n+import net.minecraftforge.event.world.BlockEvent;\n+import net.minecraftforge.eventbus.api.Event;\n+import net.minecraftforge.eventbus.api.SubscribeEvent;\n+import net.minecraftforge.fml.common.Mod;\n+\n+@Mod(\"finite_water_test\")\n+@Mod.EventBusSubscriber()\n+public class FiniteWaterTest\n+{\n+    private static final boolean ENABLED = false;\n+\n+    @SubscribeEvent\n+    public static void handleFiniteWaterSource(BlockEvent.CreateFluidSourceEvent event)\n+    {\n+        if (ENABLED) {\n+            BlockState state = event.getState();\n+            FluidState fluidState = state.getFluidState();\n+            if (fluidState.getFluid().isEquivalentTo(Fluids.WATER)) {\n+                event.setResult(Event.Result.DENY);\n+            }\n+            else if (fluidState.getFluid().isEquivalentTo(Fluids.LAVA)) {\n+                event.setResult(Event.Result.ALLOW);\n+            }", "originalCommit": "a776ba94b3b2c780df37af871d125d1395c5931e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ebce4953b854bcd5e20ff464757215659db168fe", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/ebce4953b854bcd5e20ff464757215659db168fe", "message": "Applied the suggestions of diesieben07", "committedDate": "2020-08-08T17:38:14Z", "type": "commit"}, {"oid": "8a60775dbfe09856e40afaa34b4507c23ef2c98a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/8a60775dbfe09856e40afaa34b4507c23ef2c98a", "message": "Merge branch '1.16.x' of https://github.com/Edivad99/MinecraftForge into 1.16.x", "committedDate": "2020-08-08T17:38:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NzQ2NQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467487465", "bodyText": "So if it's not an IWorld you can't access it at all? That's not helpful...", "author": "diesieben07", "createdAt": "2020-08-08T17:41:59Z", "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "diffHunk": "@@ -282,9 +282,15 @@ public boolean getForceRedstoneUpdate()\n     @HasResult\n     public static class CreateFluidSourceEvent extends BlockEvent\n     {\n+        @Deprecated\n+        public CreateFluidSourceEvent(World world, BlockPos pos, BlockState state)\n+        {\n+            super(world, pos, state);\n+        }\n+\n         public CreateFluidSourceEvent(IWorldReader world, BlockPos pos, BlockState state)\n         {\n-            super((IWorld) world, pos, state);\n+            super(world instanceof IWorld ? (IWorld) world : null, pos, state);", "originalCommit": "8a60775dbfe09856e40afaa34b4507c23ef2c98a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1f81991bd5ad06f54e448679f6e3d7422546ca10", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1f81991bd5ad06f54e448679f6e3d7422546ca10", "message": "Changed the type of parameters in FlowingFluid.java from IWorldReader to IWorld", "committedDate": "2020-08-08T18:09:18Z", "type": "commit"}, {"oid": "5adb02c0b59c158eff8b2f2ad465b444e37c9d29", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/5adb02c0b59c158eff8b2f2ad465b444e37c9d29", "message": "Update FiniteWaterTest.java", "committedDate": "2020-08-08T18:10:54Z", "type": "commit"}, {"oid": "eb36d3872bb1ab454e53e7dbda76cf3443807ad1", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/eb36d3872bb1ab454e53e7dbda76cf3443807ad1", "message": "Update FiniteWaterTest.java", "committedDate": "2020-08-13T08:07:41Z", "type": "commit"}, {"oid": "2b20a941938e14e65cdbdc4ad10e5ab024ab199f", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/2b20a941938e14e65cdbdc4ad10e5ab024ab199f", "message": "Merge branch '1.16.x' of https://github.com/MinecraftForge/MinecraftForge into MinecraftForge-1.16.x", "committedDate": "2020-08-13T08:18:10Z", "type": "commit"}, {"oid": "f303cbba25e34a295f9f2ee5359eec66721d8a27", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/f303cbba25e34a295f9f2ee5359eec66721d8a27", "message": "Merge branch 'MinecraftForge-1.16.x' into 1.16.x", "committedDate": "2020-08-13T08:18:45Z", "type": "commit"}, {"oid": "5365f3147b8f48ac37b0359f3bace5c207b6fbf7", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/5365f3147b8f48ac37b0359f3bace5c207b6fbf7", "message": "Now it works for 1.16.2", "committedDate": "2020-08-13T08:48:34Z", "type": "commit"}, {"oid": "9d56f3d43d197dbd912a19ad5e160609a2795b7c", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/9d56f3d43d197dbd912a19ad5e160609a2795b7c", "message": "Update BlockEvent.java", "committedDate": "2020-08-13T11:18:17Z", "type": "commit"}, {"oid": "4f9cb9f5d8692310790e3b8f1f5c700348193a22", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/4f9cb9f5d8692310790e3b8f1f5c700348193a22", "message": "Update ForgeEventFactory.java", "committedDate": "2020-08-13T11:18:57Z", "type": "commit"}, {"oid": "0cfeaf4c952401c6baf4f130d7fc48a53f919f70", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/0cfeaf4c952401c6baf4f130d7fc48a53f919f70", "message": "CreateFluidSourceEvent inherits from Event\n\nbased on discord suggestions https://discord.com/channels/313125603924639766/725850371834118214/745547827693879298", "committedDate": "2020-08-19T08:59:38Z", "type": "commit"}]}