{"pr_number": 819, "pr_title": "DPC-333: Update the website to request snippets of encrypted data from users to validate public keys", "pr_createdAt": "2020-05-27T12:28:54Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/819", "timeline": [{"oid": "6cc4e85163a5aac9d179f3dc4b9b76d23d1bf30d", "url": "https://github.com/CMSgov/dpc-app/commit/6cc4e85163a5aac9d179f3dc4b9b76d23d1bf30d", "message": "Groundwork for snippet_signature to be passed to the API", "committedDate": "2020-05-19T17:39:48Z", "type": "commit"}, {"oid": "2c1c50d9d064dadd1356236b907e57e4760ff895", "url": "https://github.com/CMSgov/dpc-app/commit/2c1c50d9d064dadd1356236b907e57e4760ff895", "message": "Public key/signature verification in progress", "committedDate": "2020-05-19T20:41:11Z", "type": "commit"}, {"oid": "0ed99d348c52e66216e9cea0bfb036237197d998", "url": "https://github.com/CMSgov/dpc-app/commit/0ed99d348c52e66216e9cea0bfb036237197d998", "message": "Accept key and signature as JSON", "committedDate": "2020-05-21T15:53:23Z", "type": "commit"}, {"oid": "7199f8122c1d1c2624ec6f62053d725157bebef4", "url": "https://github.com/CMSgov/dpc-app/commit/7199f8122c1d1c2624ec6f62053d725157bebef4", "message": "Accept signature with CLI key creation; skip ECC tests temporarily", "committedDate": "2020-05-21T16:31:42Z", "type": "commit"}, {"oid": "068fb97817bea1fa987f8edb91e61715a6fec42a", "url": "https://github.com/CMSgov/dpc-app/commit/068fb97817bea1fa987f8edb91e61715a6fec42a", "message": "Change public key to json", "committedDate": "2020-05-21T17:39:25Z", "type": "commit"}, {"oid": "2cfab9b9bb839aa9557cff3c6160057d987a959a", "url": "https://github.com/CMSgov/dpc-app/commit/2cfab9b9bb839aa9557cff3c6160057d987a959a", "message": "Update public key to json format\n\npost_text_request now submits json public key that includes label, public key, and signature snippet.\n\nudpated tests.", "committedDate": "2020-05-22T14:42:31Z", "type": "commit"}, {"oid": "44029d0cbbfcae757b29224e23c0454aad57c15a", "url": "https://github.com/CMSgov/dpc-app/commit/44029d0cbbfcae757b29224e23c0454aad57c15a", "message": "save", "committedDate": "2020-05-22T16:45:19Z", "type": "commit"}, {"oid": "e4cd0c7e7b343b7bab1a4663f30feae9401d4d15", "url": "https://github.com/CMSgov/dpc-app/commit/e4cd0c7e7b343b7bab1a4663f30feae9401d4d15", "message": "CLI test fixes", "committedDate": "2020-05-22T20:51:18Z", "type": "commit"}, {"oid": "873ea4868cf9cf9918d4ff64198a682b9f9e3557", "url": "https://github.com/CMSgov/dpc-app/commit/873ea4868cf9cf9918d4ff64198a682b9f9e3557", "message": "Save progress", "committedDate": "2020-05-26T13:56:24Z", "type": "commit"}, {"oid": "599377637526d9f3b7b7f55f8a7ca0aeae3abc82", "url": "https://github.com/CMSgov/dpc-app/commit/599377637526d9f3b7b7f55f8a7ca0aeae3abc82", "message": "Merge branch 'master' into nzonnenberg/dpc-333-encrypted-pubkey-form", "committedDate": "2020-05-26T14:00:35Z", "type": "commit"}, {"oid": "6f2f4be305e705e9c8ca4be7b6587961beeb5f91", "url": "https://github.com/CMSgov/dpc-app/commit/6f2f4be305e705e9c8ca4be7b6587961beeb5f91", "message": "Merge branch 'emily/dpc-335-verify-signature' into nzonnenberg/dpc-333-encrypted-pubkey-form", "committedDate": "2020-05-26T15:06:50Z", "type": "commit"}, {"oid": "a7f3e6d2273bf4e96fad05b5251aafc7f4e4d55d", "url": "https://github.com/CMSgov/dpc-app/commit/a7f3e6d2273bf4e96fad05b5251aafc7f4e4d55d", "message": "remove files", "committedDate": "2020-05-26T15:21:10Z", "type": "commit"}, {"oid": "1e8da15907ea93e807be1daf4102cbc67a2d9d37", "url": "https://github.com/CMSgov/dpc-app/commit/1e8da15907ea93e807be1daf4102cbc67a2d9d37", "message": "Public key/signature verification in progress", "committedDate": "2020-05-26T17:44:38Z", "type": "commit"}, {"oid": "56a8525453c4e3a4a6166215b81c5f78c93585ad", "url": "https://github.com/CMSgov/dpc-app/commit/56a8525453c4e3a4a6166215b81c5f78c93585ad", "message": "Accept key and signature as JSON", "committedDate": "2020-05-26T17:44:38Z", "type": "commit"}, {"oid": "8befc4cc6218dec9f99f7b5a6a1adf5533cc3217", "url": "https://github.com/CMSgov/dpc-app/commit/8befc4cc6218dec9f99f7b5a6a1adf5533cc3217", "message": "Accept signature with CLI key creation; skip ECC tests temporarily", "committedDate": "2020-05-26T17:44:38Z", "type": "commit"}, {"oid": "d915e47875cf231d65d701215ffbbe29d8d74c4a", "url": "https://github.com/CMSgov/dpc-app/commit/d915e47875cf231d65d701215ffbbe29d8d74c4a", "message": "CLI test fixes", "committedDate": "2020-05-26T17:44:38Z", "type": "commit"}, {"oid": "b2b1137fd21b846a708e4e80fccfba43e1db0901", "url": "https://github.com/CMSgov/dpc-app/commit/b2b1137fd21b846a708e4e80fccfba43e1db0901", "message": "Address Code Climate exception message issue", "committedDate": "2020-05-26T17:44:38Z", "type": "commit"}, {"oid": "3ee0ca4312f0cbaaa8000815849af64805ad6f92", "url": "https://github.com/CMSgov/dpc-app/commit/3ee0ca4312f0cbaaa8000815849af64805ad6f92", "message": "Reject ECC keys (temporarily); testing cleanup", "committedDate": "2020-05-26T17:44:38Z", "type": "commit"}, {"oid": "9777db762fd6c7f660d9a2326e75273a364573a9", "url": "https://github.com/CMSgov/dpc-app/commit/9777db762fd6c7f660d9a2326e75273a364573a9", "message": "merge", "committedDate": "2020-05-26T18:51:58Z", "type": "commit"}, {"oid": "d7854286d9a3f9faf5d37d742ea7520db118e2f0", "url": "https://github.com/CMSgov/dpc-app/commit/d7854286d9a3f9faf5d37d742ea7520db118e2f0", "message": "save", "committedDate": "2020-05-26T20:02:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA5MDE5OA==", "url": "https://github.com/CMSgov/dpc-app/pull/819#discussion_r431090198", "bodyText": "Method uploadKey has 5 arguments (exceeds 4 allowed). Consider refactoring.", "author": "codeclimate", "createdAt": "2020-05-27T12:48:07Z", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyUpload.java", "diffHunk": "@@ -59,25 +70,31 @@ public void run(Bootstrap<?> bootstrap, Namespace namespace) throws Exception {\n         System.out.println(String.format(\"Connecting to API service at: %s\", apiService));\n \n         // Read the file and parse it\n-        final Path filePath = FileSystems.getDefault().getPath(namespace.getString(KEY_FILE));\n-        final String pemFile = Files.readString(filePath);\n+        final Path keyFilePath = FileSystems.getDefault().getPath(namespace.getString(KEY_FILE));\n+        final String publicKey = Files.readString(keyFilePath);\n+\n+        final Path signaturePath = FileSystems.getDefault().getPath(namespace.getString(SIGNATURE_FILE));\n+        final String signature = Files.readString(signaturePath);\n \n         final Optional<String> label = Optional.ofNullable(namespace.getString(\"key-label\"));\n-        uploadKey(apiService, orgID.getIdPart(), label, pemFile);\n+        uploadKey(apiService, orgID.getIdPart(), label, publicKey, signature);\n     }\n \n     @SuppressWarnings(\"OptionalUsedAsFieldOrParameterType\")\n-    private void uploadKey(String apiService, String orgID, Optional<String> label, String pem) throws IOException, URISyntaxException {\n+    private void uploadKey(String apiService, String orgID, Optional<String> label, String pem, String signature) throws IOException, URISyntaxException {", "originalCommit": "d7854286d9a3f9faf5d37d742ea7520db118e2f0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "892f4a88e97d399ac3f713ee07de91c345cfe9ab", "url": "https://github.com/CMSgov/dpc-app/commit/892f4a88e97d399ac3f713ee07de91c345cfe9ab", "message": "Public key/signature verification in progress", "committedDate": "2020-05-28T12:46:03Z", "type": "commit"}, {"oid": "26da4a0e20dd3c03607e4acbcce127e8593f6f18", "url": "https://github.com/CMSgov/dpc-app/commit/26da4a0e20dd3c03607e4acbcce127e8593f6f18", "message": "Accept key and signature as JSON", "committedDate": "2020-05-28T12:46:06Z", "type": "commit"}, {"oid": "9d5a033bcdef7e18a7ea8f5c6fed0eb73bb323b2", "url": "https://github.com/CMSgov/dpc-app/commit/9d5a033bcdef7e18a7ea8f5c6fed0eb73bb323b2", "message": "Accept signature with CLI key creation; skip ECC tests temporarily", "committedDate": "2020-05-28T12:46:06Z", "type": "commit"}, {"oid": "f3b9016b04448554c3edb2786b547193f05bd2ac", "url": "https://github.com/CMSgov/dpc-app/commit/f3b9016b04448554c3edb2786b547193f05bd2ac", "message": "CLI test fixes", "committedDate": "2020-05-28T12:46:06Z", "type": "commit"}, {"oid": "d7ac73fc59ddc9dca74a86c1c20885b0365a9ac8", "url": "https://github.com/CMSgov/dpc-app/commit/d7ac73fc59ddc9dca74a86c1c20885b0365a9ac8", "message": "Address Code Climate exception message issue", "committedDate": "2020-05-28T12:46:07Z", "type": "commit"}, {"oid": "fe2f4699a26feed6bad99bd213421d9a76614f5f", "url": "https://github.com/CMSgov/dpc-app/commit/fe2f4699a26feed6bad99bd213421d9a76614f5f", "message": "Reject ECC keys (temporarily); testing cleanup", "committedDate": "2020-05-28T12:46:07Z", "type": "commit"}, {"oid": "742e9a367a243c9aab1d80ddf20d967fbda66630", "url": "https://github.com/CMSgov/dpc-app/commit/742e9a367a243c9aab1d80ddf20d967fbda66630", "message": "Merge branch 'emily/dpc-335-verify-signature' of github.com:CMSgov/dpc-app into emily/dpc-335-verify-signature", "committedDate": "2020-05-28T14:57:32Z", "type": "commit"}, {"oid": "334b91e04d4c15ec69605f15015c106c95eb39c2", "url": "https://github.com/CMSgov/dpc-app/commit/334b91e04d4c15ec69605f15015c106c95eb39c2", "message": "Merge branch 'emily/dpc-335-verify-signature' into nzonnenberg/dpc-333-encrypted-pubkey-form", "committedDate": "2020-05-28T14:58:03Z", "type": "commit"}, {"oid": "e09e9a0f69f40a2200c7f1984af30e858d8b3124", "url": "https://github.com/CMSgov/dpc-app/commit/e09e9a0f69f40a2200c7f1984af30e858d8b3124", "message": "Code climate fixes", "committedDate": "2020-05-28T15:09:48Z", "type": "commit"}, {"oid": "38de5015e141068b31f1bf5987eb5af14da7ff15", "url": "https://github.com/CMSgov/dpc-app/commit/38de5015e141068b31f1bf5987eb5af14da7ff15", "message": "Adjustment for Code Climate", "committedDate": "2020-05-28T15:16:06Z", "type": "commit"}, {"oid": "f288e88e8e7962efee41bb4beb144ae71615357a", "url": "https://github.com/CMSgov/dpc-app/commit/f288e88e8e7962efee41bb4beb144ae71615357a", "message": "Rspec test fix", "committedDate": "2020-05-28T15:35:14Z", "type": "commit"}, {"oid": "930541c5d941bb8a34b0cbc537925db3a5f8b031", "url": "https://github.com/CMSgov/dpc-app/commit/930541c5d941bb8a34b0cbc537925db3a5f8b031", "message": "Change verifySignature() to throw an exception rather than returning false, to be consistent with other methods", "committedDate": "2020-05-28T21:32:43Z", "type": "commit"}, {"oid": "820763eeed612038965b5ff951dfce86d904f433", "url": "https://github.com/CMSgov/dpc-app/commit/820763eeed612038965b5ff951dfce86d904f433", "message": "Merge branch 'emily/dpc-335-verify-signature' of github.com:CMSgov/dpc-app into emily/dpc-335-verify-signature", "committedDate": "2020-05-29T12:39:07Z", "type": "commit"}, {"oid": "4a4df774abbf6b4be207795cd78be2db377d6128", "url": "https://github.com/CMSgov/dpc-app/commit/4a4df774abbf6b4be207795cd78be2db377d6128", "message": "Merge branch 'emily/dpc-335-verify-signature' into nzonnenberg/dpc-333-encrypted-pubkey-form", "committedDate": "2020-05-29T12:41:19Z", "type": "commit"}, {"oid": "3ff55536dfcf01bd1c0c954e96cd01dc2fc9355a", "url": "https://github.com/CMSgov/dpc-app/commit/3ff55536dfcf01bd1c0c954e96cd01dc2fc9355a", "message": "Update snippet field", "committedDate": "2020-05-29T16:31:39Z", "type": "commit"}, {"oid": "7ab3a422d80ad0608fdac667cc417cff7b916568", "url": "https://github.com/CMSgov/dpc-app/commit/7ab3a422d80ad0608fdac667cc417cff7b916568", "message": "code climate fix", "committedDate": "2020-05-29T18:39:04Z", "type": "commit"}, {"oid": "0806cd2a18639972c5beb05b75927ddfabc62785", "url": "https://github.com/CMSgov/dpc-app/commit/0806cd2a18639972c5beb05b75927ddfabc62785", "message": "Code climate fix 2", "committedDate": "2020-05-29T18:51:34Z", "type": "commit"}, {"oid": "cb1e83d579f4fa7e77db128c1e969fdc0f318573", "url": "https://github.com/CMSgov/dpc-app/commit/cb1e83d579f4fa7e77db128c1e969fdc0f318573", "message": "code climate 3", "committedDate": "2020-05-29T18:54:17Z", "type": "commit"}, {"oid": "ccff5027dd040a82fd247ad0cc24299b70cb1a09", "url": "https://github.com/CMSgov/dpc-app/commit/ccff5027dd040a82fd247ad0cc24299b70cb1a09", "message": "Merge branch 'master' into nzonnenberg/dpc-333-encrypted-pubkey-form", "committedDate": "2020-06-04T13:38:53Z", "type": "commit"}, {"oid": "7d0c721cec5cf4e937860d162e025bf6cfa7e57a", "url": "https://github.com/CMSgov/dpc-app/commit/7d0c721cec5cf4e937860d162e025bf6cfa7e57a", "message": "Language rough draft", "committedDate": "2020-06-04T14:54:54Z", "type": "commit"}, {"oid": "fce080ce4c9d28bdcc3330f2ec30ce0cba3bb5d9", "url": "https://github.com/CMSgov/dpc-app/commit/fce080ce4c9d28bdcc3330f2ec30ce0cba3bb5d9", "message": "Merge branch 'nzonnenberg/dpc-333-encrypted-pubkey-form' of github.com:CMSgov/dpc-app into nzonnenberg/dpc-333-encrypted-pubkey-form", "committedDate": "2020-06-04T14:55:10Z", "type": "commit"}, {"oid": "71057101aeb5f5c1c582ac34ce51e7dfc8d4dfd1", "url": "https://github.com/CMSgov/dpc-app/commit/71057101aeb5f5c1c582ac34ce51e7dfc8d4dfd1", "message": "Add snippet.txt file", "committedDate": "2020-06-08T13:11:23Z", "type": "commit"}, {"oid": "81cbc39da71df80bc855c79eee92179a70ffa83e", "url": "https://github.com/CMSgov/dpc-app/commit/81cbc39da71df80bc855c79eee92179a70ffa83e", "message": "Download snippet.txt", "committedDate": "2020-06-08T14:13:24Z", "type": "commit"}, {"oid": "3d9ab28bc3ade3eee90e2d9d5ba68a9960871fab", "url": "https://github.com/CMSgov/dpc-app/commit/3d9ab28bc3ade3eee90e2d9d5ba68a9960871fab", "message": "Styling progress save", "committedDate": "2020-06-08T18:10:13Z", "type": "commit"}, {"oid": "a16f1b7c5b80ecaccea3f1da9e53d6a5b8603cb7", "url": "https://github.com/CMSgov/dpc-app/commit/a16f1b7c5b80ecaccea3f1da9e53d6a5b8603cb7", "message": "Styling progress", "committedDate": "2020-06-08T18:47:26Z", "type": "commit"}, {"oid": "de8b22986e5eb877df2a095214cb6bc74af176ef", "url": "https://github.com/CMSgov/dpc-app/commit/de8b22986e5eb877df2a095214cb6bc74af176ef", "message": "Styling progress", "committedDate": "2020-06-08T19:46:01Z", "type": "commit"}, {"oid": "6a07147bab0cadcac9f77c8d750010ccf16eebe7", "url": "https://github.com/CMSgov/dpc-app/commit/6a07147bab0cadcac9f77c8d750010ccf16eebe7", "message": "Adding snippet download", "committedDate": "2020-06-08T20:21:21Z", "type": "commit"}, {"oid": "a325dbf0332e328b78f04aef5879e350f6529912", "url": "https://github.com/CMSgov/dpc-app/commit/a325dbf0332e328b78f04aef5879e350f6529912", "message": "Styling progress", "committedDate": "2020-06-08T20:45:18Z", "type": "commit"}, {"oid": "1bd9b3299a49956a3912ef1e652dc93d67ec7e48", "url": "https://github.com/CMSgov/dpc-app/commit/1bd9b3299a49956a3912ef1e652dc93d67ec7e48", "message": "Styling progress", "committedDate": "2020-06-09T11:31:53Z", "type": "commit"}, {"oid": "0d963ee5533890160fbe56e88c25744130ca98e8", "url": "https://github.com/CMSgov/dpc-app/commit/0d963ee5533890160fbe56e88c25744130ca98e8", "message": "Styling progress", "committedDate": "2020-06-09T11:56:45Z", "type": "commit"}, {"oid": "f763e21279b695664a32ec48c68f38c1e96830fa", "url": "https://github.com/CMSgov/dpc-app/commit/f763e21279b695664a32ec48c68f38c1e96830fa", "message": "Styling progress", "committedDate": "2020-06-09T12:11:28Z", "type": "commit"}, {"oid": "fd9f044ed9069a11cae049800b7044b9d27456aa", "url": "https://github.com/CMSgov/dpc-app/commit/fd9f044ed9069a11cae049800b7044b9d27456aa", "message": "download snippet fix", "committedDate": "2020-06-09T12:49:35Z", "type": "commit"}, {"oid": "d8305bb762d3eee3314a148b3e0cab1c21a494b6", "url": "https://github.com/CMSgov/dpc-app/commit/d8305bb762d3eee3314a148b3e0cab1c21a494b6", "message": "Styling progress", "committedDate": "2020-06-09T13:08:02Z", "type": "commit"}, {"oid": "e1a2e39dd36ba0eef182ffb39ea6453353a543c0", "url": "https://github.com/CMSgov/dpc-app/commit/e1a2e39dd36ba0eef182ffb39ea6453353a543c0", "message": "Styling progress", "committedDate": "2020-06-09T13:11:48Z", "type": "commit"}, {"oid": "7e3b41ff064b368effb3cdd3d2fb269996edf7d0", "url": "https://github.com/CMSgov/dpc-app/commit/7e3b41ff064b368effb3cdd3d2fb269996edf7d0", "message": "Deleted old public key page", "committedDate": "2020-06-09T13:30:43Z", "type": "commit"}, {"oid": "0fd145154e6af187821672de74be94032c9f1be9", "url": "https://github.com/CMSgov/dpc-app/commit/0fd145154e6af187821672de74be94032c9f1be9", "message": "Styling update", "committedDate": "2020-06-09T13:49:24Z", "type": "commit"}, {"oid": "7fcb9ca178fa8b452aa8deb3390071ee400817b7", "url": "https://github.com/CMSgov/dpc-app/commit/7fcb9ca178fa8b452aa8deb3390071ee400817b7", "message": "Merge branch 'master' into nzonnenberg/dpc-333-encrypted-pubkey-form", "committedDate": "2020-06-09T13:56:42Z", "type": "commit"}]}