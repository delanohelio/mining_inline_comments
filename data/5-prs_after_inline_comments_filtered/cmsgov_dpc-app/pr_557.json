{"pr_number": 557, "pr_title": "Rename MBI identifier to BENE_ID", "pr_createdAt": "2020-01-23T13:54:37Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/557", "timeline": [{"oid": "765c87098125ba5ed74488a8cb855d397df8e7aa", "url": "https://github.com/CMSgov/dpc-app/commit/765c87098125ba5ed74488a8cb855d397df8e7aa", "message": "Rename MBI identifier to BENE_ID.\n\nIn preparation for our migration to MBIs from BB bene_id, we need to rename the identifier enum to avoid conflicts in the future.\n\nThis is a simple IntelliJ refactoring.", "committedDate": "2020-01-23T13:53:01Z", "type": "commit"}, {"oid": "0a2e32607c51d4f46645aebf60ec2e86bbc12ed8", "url": "https://github.com/CMSgov/dpc-app/commit/0a2e32607c51d4f46645aebf60ec2e86bbc12ed8", "message": "Update identifier system\n\nUpdated the identifier system in the ConsentResourceTest parameterized values.\nWe'll need to switch this back when we move fully to MBIs.", "committedDate": "2020-01-23T16:21:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM2MzE4Nw==", "url": "https://github.com/CMSgov/dpc-app/pull/557#discussion_r370363187", "bodyText": "There's an error on this test. I'm thinking it's because the profile is expecting an MBI, but FHIRExtractors.getPatientMPI() is called, looking for bene_id. So we might need to set both temporarily?", "author": "em1", "createdAt": "2020-01-23T21:26:52Z", "path": "dpc-api/src/test/java/gov/cms/dpc/api/validations/ProfileTests.java", "diffHunk": "@@ -58,7 +57,7 @@ void testPatientProfile() throws IOException, URISyntaxException {\n \n         // Try for a valid patient\n         final Patient validPatient = invalidPatient.copy();\n-        validPatient.addIdentifier().setSystem(DPCIdentifierSystem.MBI.getSystem()).setValue(\"test-mbi\");\n+        validPatient.addIdentifier().setSystem(DPCIdentifierSystem.BENE_ID.getSystem()).setValue(\"test-mbi\");", "originalCommit": "0a2e32607c51d4f46645aebf60ec2e86bbc12ed8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY5Mjk1NQ==", "url": "https://github.com/CMSgov/dpc-app/pull/557#discussion_r370692955", "bodyText": "The issue was a bad commit, I pulled in the profile changes by mistake, those will come in a new commit, this is supposed to be just be creating space in the enum.", "author": "nickrobison-usds", "createdAt": "2020-01-24T15:29:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM2MzE4Nw=="}], "type": "inlineReview"}, {"oid": "134d572440bca9fe587a045366df4c9a2ad1e116", "url": "https://github.com/CMSgov/dpc-app/commit/134d572440bca9fe587a045366df4c9a2ad1e116", "message": "DPC-942: Update organization in API from web app (#555)\n\n* Update organization from web app to API\r\n\r\nUse FHIR client to update registered organizations in API\r\n\r\nAlso some cleanup from manual testing; remove delay in org creation\r\n\r\n* Add fhir endpoint updating\r\n\r\n* Add payloadType to endpoint update request\r\n\r\n* Add Endpoint.payloadType to Organization$submit\r\n\r\nThis field is required by FHIR but currently our API has a bug that\r\nskips validation of this field when creating an Endpoint. This commit\r\nadds the field and updates the test stubs.\r\n\r\nSee:\r\nhttps://hl7.org/fhir/STU3/endpoint-example.json.html\r\nhttps://dpc.cms.gov/ig/StructureDefinition-dpc-profile-endpoint-definitions.html\r\n\r\n* Cleanup\r\n\r\n* Refactor for smaller APIClient class\r\n\r\nPull out FHIR resource building into a separate class.\r\n\r\nOne other cleanup fix in attribute method in organization_registrar\r\n\r\nMore cleanup from codeclimate recs\r\n\r\n* Refactor APIClient to separate org and endpoint\r\n\r\nOrg and endpint update requests should be separate methods because\r\nthey are separate interactions with the API.", "committedDate": "2020-01-24T15:27:18Z", "type": "commit"}, {"oid": "e6127714b7462952502fdddc01e95e252d3024da", "url": "https://github.com/CMSgov/dpc-app/commit/e6127714b7462952502fdddc01e95e252d3024da", "message": "Cleanup ProfileTests\n\nRemoved some unused variables and added todo to update the MBI's, once we're ready for it.", "committedDate": "2020-01-24T15:27:18Z", "type": "commit"}, {"oid": "4983b2a75db67a58da40d8fcfdba26b8095fc8fb", "url": "https://github.com/CMSgov/dpc-app/commit/4983b2a75db67a58da40d8fcfdba26b8095fc8fb", "message": "Revert patient profile changes.\n\nThis should not have been committed yet. It will come in a later PR.", "committedDate": "2020-01-24T15:27:18Z", "type": "commit"}, {"oid": "1f55af88a29c25b3bbd92b42b85a00cff468e08f", "url": "https://github.com/CMSgov/dpc-app/commit/1f55af88a29c25b3bbd92b42b85a00cff468e08f", "message": "Merge branch 'master' into nickrobison/rename-dpc-identifier", "committedDate": "2020-01-24T15:36:37Z", "type": "commit"}, {"oid": "926f2b38bebe88e4c92580ca7851c30ced6a325c", "url": "https://github.com/CMSgov/dpc-app/commit/926f2b38bebe88e4c92580ca7851c30ced6a325c", "message": "Revert patient profile test.", "committedDate": "2020-01-24T17:30:38Z", "type": "commit"}, {"oid": "92db90751f445ffe77210e2c7539864d2d8ad1b1", "url": "https://github.com/CMSgov/dpc-app/commit/92db90751f445ffe77210e2c7539864d2d8ad1b1", "message": "Merge branch 'master' into nickrobison/rename-dpc-identifier", "committedDate": "2020-01-28T13:59:27Z", "type": "commit"}]}