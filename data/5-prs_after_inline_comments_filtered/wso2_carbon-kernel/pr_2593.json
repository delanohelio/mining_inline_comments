{"pr_number": 2593, "pr_title": "Handle internal roles", "pr_createdAt": "2020-02-11T08:24:41Z", "pr_url": "https://github.com/wso2/carbon-kernel/pull/2593", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU4NDg1OQ==", "url": "https://github.com/wso2/carbon-kernel/pull/2593#discussion_r377584859", "bodyText": "Shall we simplify this since both else statements have the same body", "author": "IsuraD", "createdAt": "2020-02-11T11:43:19Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/hybrid/HybridRoleManager.java", "diffHunk": "@@ -257,10 +259,38 @@ public boolean isExistingRole(String roleName) throws UserStoreException {\n             if (dbConnection.getTransactionIsolation() != Connection.TRANSACTION_READ_COMMITTED) {\n                 dbConnection.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);\n             }\n+\n+            String dbType = DatabaseCreator.getDatabaseType(dbConnection);\n+\n+            if (DB2.equalsIgnoreCase(dbType)) {\n+                if (filter.startsWith(UserCoreConstants.INTERNAL_DOMAIN)) {\n+                    sqlStmt = HybridJDBCConstants.GET_INTERNAL_ROLES_DB2;\n+                } else {\n+                    sqlStmt = HybridJDBCConstants.GET_ROLES;", "originalCommit": "fdc21a8755060f95719578d182ee22277440576f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c82fc089ffe0bf099e605f8919d3aa4f75de726e", "url": "https://github.com/wso2/carbon-kernel/commit/c82fc089ffe0bf099e605f8919d3aa4f75de726e", "message": "Handle internal roles", "committedDate": "2020-02-11T12:03:07Z", "type": "commit"}, {"oid": "c82fc089ffe0bf099e605f8919d3aa4f75de726e", "url": "https://github.com/wso2/carbon-kernel/commit/c82fc089ffe0bf099e605f8919d3aa4f75de726e", "message": "Handle internal roles", "committedDate": "2020-02-11T12:03:07Z", "type": "forcePushed"}]}