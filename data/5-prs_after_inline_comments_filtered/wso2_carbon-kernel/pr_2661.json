{"pr_number": 2661, "pr_title": "Allow HTTP accesslog to be configured with Log4J", "pr_createdAt": "2020-04-17T06:40:39Z", "pr_url": "https://github.com/wso2/carbon-kernel/pull/2661", "timeline": [{"oid": "6fd0a2567a766700d8384bd9944347d257027bf8", "url": "https://github.com/wso2/carbon-kernel/commit/6fd0a2567a766700d8384bd9944347d257027bf8", "message": "Allow HTTP accesslog to be configured with Log4J\nhttps://github.com/wso2/carbon-kernel/issues/2660", "committedDate": "2020-04-17T06:29:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg4OTkwNw==", "url": "https://github.com/wso2/carbon-kernel/pull/2661#discussion_r411889907", "bodyText": "Let's add Licence ..", "author": "hasinthaindrajee", "createdAt": "2020-04-21T05:54:37Z", "path": "core/org.wso2.carbon.tomcat.ext/src/main/java/org/wso2/carbon/tomcat/ext/valves/ConfigurableLoggerAccessLogValve.java", "diffHunk": "@@ -0,0 +1,89 @@\n+package org.wso2.carbon.tomcat.ext.valves;", "originalCommit": "6fd0a2567a766700d8384bd9944347d257027bf8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkyMzE2Mg==", "url": "https://github.com/wso2/carbon-kernel/pull/2661#discussion_r411923162", "bodyText": "+1\nDone", "author": "ruwanta", "createdAt": "2020-04-21T07:01:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg4OTkwNw=="}], "type": "inlineReview"}, {"oid": "91260661474c44837e8c1f93e8edd71b45e21416", "url": "https://github.com/wso2/carbon-kernel/commit/91260661474c44837e8c1f93e8edd71b45e21416", "message": "Added copyright", "committedDate": "2020-04-21T07:00:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkyNjI2NQ==", "url": "https://github.com/wso2/carbon-kernel/pull/2661#discussion_r411926265", "bodyText": "Basically with the change of this line, there is no behaviour change. It's the same thing you have done which was done in associateToThread private method. Either you can keep this as it was or remove the private method associateToThread which is no longer used :)", "author": "hasinthaindrajee", "createdAt": "2020-04-21T07:06:50Z", "path": "core/org.wso2.carbon.tomcat.ext/src/main/java/org/wso2/carbon/tomcat/ext/valves/RequestCorrelationIdValve.java", "diffHunk": "@@ -104,11 +106,16 @@ public void invoke(Request request, Response response) throws IOException, Servl\n             }\n \n             if (associateToThreadMap.size() == 0) {\n-                associateToThread(UUID.randomUUID().toString());", "originalCommit": "91260661474c44837e8c1f93e8edd71b45e21416", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkzMzMxNQ==", "url": "https://github.com/wso2/carbon-kernel/pull/2661#discussion_r411933315", "bodyText": "Also we can eliminate two if blocks with same condition  if (associateToThreadMap.size() == 0) {", "author": "hasinthaindrajee", "createdAt": "2020-04-21T07:18:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkyNjI2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkzNTg0MA==", "url": "https://github.com/wso2/carbon-kernel/pull/2661#discussion_r411935840", "bodyText": "+1", "author": "ruwanta", "createdAt": "2020-04-21T07:22:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkyNjI2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkzODQ4Mg==", "url": "https://github.com/wso2/carbon-kernel/pull/2661#discussion_r411938482", "bodyText": "Even there are two blocks Also we can element two if blocks with same condition if (associateToThreadMap.size() == 0) {\nthey evaluate to different result at different times.\nFirst one tries to read correlation ID from query params, if headers does not contain one.\nSecond one is the fall back when it does not find correlation ID from previous step.\nThat logic is intentional.", "author": "ruwanta", "createdAt": "2020-04-21T07:26:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkyNjI2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTk5Mjc0OA==", "url": "https://github.com/wso2/carbon-kernel/pull/2661#discussion_r411992748", "bodyText": "+1", "author": "hasinthaindrajee", "createdAt": "2020-04-21T08:43:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkyNjI2NQ=="}], "type": "inlineReview"}, {"oid": "5c4fe1f0f97b6ce4d2d42bd96a26f6266d4da604", "url": "https://github.com/wso2/carbon-kernel/commit/5c4fe1f0f97b6ce4d2d42bd96a26f6266d4da604", "message": "Removed unused private method", "committedDate": "2020-04-21T07:21:25Z", "type": "commit"}]}