{"pr_number": 2580, "pr_title": "Refactored group-id support feature interface methods.", "pr_createdAt": "2020-02-05T05:23:48Z", "pr_url": "https://github.com/wso2/carbon-kernel/pull/2580", "timeline": [{"oid": "e05936d00bcfc09c459598ff459e75dfb33c6798", "url": "https://github.com/wso2/carbon-kernel/commit/e05936d00bcfc09c459598ff459e75dfb33c6798", "message": "Improvements for group-id methods in the UniqueIdUserStoreManager interface", "committedDate": "2020-02-05T04:35:20Z", "type": "commit"}, {"oid": "9377b2d15b5067d065036f12ab9dc390ccc725ef", "url": "https://github.com/wso2/carbon-kernel/commit/9377b2d15b5067d065036f12ab9dc390ccc725ef", "message": "Revert \"Improvements for group-id methods in the UniqueIdUserStoreManager interface\"\n\nThis reverts commit e05936d00bcfc09c459598ff459e75dfb33c6798.", "committedDate": "2020-02-05T04:41:41Z", "type": "commit"}, {"oid": "afad31c4b783c2f8eed71bb269bfc0b8c68e41b4", "url": "https://github.com/wso2/carbon-kernel/commit/afad31c4b783c2f8eed71bb269bfc0b8c68e41b4", "message": "refeactored and grouped group-id implementation methods based on user centric and group centric", "committedDate": "2020-02-05T05:08:55Z", "type": "commit"}, {"oid": "09506afcbe7da45890b0fd622e4139dcc90328f6", "url": "https://github.com/wso2/carbon-kernel/commit/09506afcbe7da45890b0fd622e4139dcc90328f6", "message": "Improved object classes with requested changes", "committedDate": "2020-02-05T05:20:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3NTMzMA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375075330", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // Group centric new implementation methods .......................................................................\n          \n          \n            \n                // Group centric new implementation methods. .......................................................................", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:15:16Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/UniqueIDUserStoreManager.java", "diffHunk": "@@ -401,20 +401,7 @@ void updateUserListOfRoleWithID(String roleName, String[] deletedUserIDs, String\n      */\n     Map<String, List<String>> getRoleListOfUsersWithID(List<String> userIDs) throws UserStoreException;\n \n-    /**\n-     * Retrieves list of groups of a given user ID.\n-     *\n-     * @param userId    User ID.\n-     * @param limit     No of search results. If the given value is greater than the system configured max limit\n-     *                  it will be reset to the system configured max limit.\n-     * @param offset    Start index of the user search.\n-     * @param sortBy    Sorted by.\n-     * @param sortOrder Sorted order.\n-     * @return List of Group objects.\n-     * @throws UserStoreException thrown by the underlying UserStoreManager.\n-     */\n-    List<Group> getGroupListOfUser(String userId, int limit, int offset, String sortBy, String sortOrder)\n-            throws UserStoreException;\n+    // Group centric new implementation methods .......................................................................", "originalCommit": "09506afcbe7da45890b0fd622e4139dcc90328f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3NjEwMA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375076100", "bodyText": "Shall we omit the word new implementation here?", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:18:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3NTMzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3NjU4NA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375076584", "bodyText": "Are we not supporting shared groups with the new implementation?", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:20:34Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/UniqueIDUserStoreManager.java", "diffHunk": "@@ -466,35 +453,22 @@ void updateUserListOfRoleWithID(String roleName, String[] deletedUserIDs, String\n      * Add a group to the system.\n      *\n      * @param groupName     Group's display name.\n-     * @param userIDList    Array of User IDs belongs to the group.\n-     * @param permissions   Array of permissions of the group.\n-     * @param isSharedGroup Whether the added group is a shared or not.", "originalCommit": "09506afcbe7da45890b0fd622e4139dcc90328f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3OTk3Mg==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375079972", "bodyText": "we decided not to support for new APIs", "author": "GDRDABARERA", "createdAt": "2020-02-05T06:35:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3NjU4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3NzA3MQ==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375077071", "bodyText": "Shall we refactor this existing comment for the UserStoreException?", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:22:49Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/UniqueIDUserStoreManager.java", "diffHunk": "@@ -466,35 +453,22 @@ void updateUserListOfRoleWithID(String roleName, String[] deletedUserIDs, String\n      * Add a group to the system.\n      *\n      * @param groupName     Group's display name.\n-     * @param userIDList    Array of User IDs belongs to the group.\n-     * @param permissions   Array of permissions of the group.\n-     * @param isSharedGroup Whether the added group is a shared or not.\n-     * @throws UserStoreException thrown by the underlying UserStoreManager.\n+     * @param userIDList    List of User IDs belongs to the group.\n+     * @param permissions   List of permissions of the group.\n      * @return created Group object.\n+     * @throws UserStoreException thrown by the underlying UserStoreManager.", "originalCommit": "09506afcbe7da45890b0fd622e4139dcc90328f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4MTg5MA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375081890", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @throws UserStoreException thrown by the underlying UserStoreManager.\n          \n          \n            \n                 * @throws UserStoreException If an error occurs while adding the group.", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:43:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3NzA3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3ODY0MA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375078640", "bodyText": "Please consider the same comments in https://github.com/wso2/carbon-kernel/pull/2580/files#r375075330", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:29:42Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/UniqueIDUserStoreManager.java", "diffHunk": "@@ -543,17 +508,54 @@ void updateGroupListOfUser(String userID, String[] deletedGroupIDs, String[] new\n      */\n     Group renameGroup(String groupID, String newGroupName) throws UserStoreException;\n \n+    // User centric group related implementation methods ..............................................................", "originalCommit": "09506afcbe7da45890b0fd622e4139dcc90328f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4MjM2NQ==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375082365", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @param limit     No of search results. If the given value is greater than the system configured max limit\n          \n          \n            \n                 * @param limit     No of search results. If the given value is greater than the system configured max limit.", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:45:07Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/UniqueIDUserStoreManager.java", "diffHunk": "@@ -543,17 +508,54 @@ void updateGroupListOfUser(String userID, String[] deletedGroupIDs, String[] new\n      */\n     Group renameGroup(String groupID, String newGroupName) throws UserStoreException;\n \n+    // User centric group related implementation methods ..............................................................\n+\n     /**\n      * Add a user.\n      *\n      * @param userName    User Name.\n      * @param credential  Credentials.\n      * @param claims      Maps of user claim values.\n-     * @param groupIDs    Array of group IDs.\n+     * @param groupIDs    List of group IDs.\n      * @param profileName Profile name.\n      * @return User object.\n      * @throws UserStoreException thrown by the underlying UserStoreManager.\n      */\n-    User addUser(String userName, Object credential, Map<String, String> claims, String[] groupIDs,\n+    User addUser(String userName, Object credential, Map<String, String> claims, List<String> groupIDs,\n                  String profileName) throws UserStoreException;\n+\n+    /**\n+     * Retrieves list of groups of a given user ID.\n+     *\n+     * @param userId    User ID.\n+     * @param limit     No of search results. If the given value is greater than the system configured max limit", "originalCommit": "09506afcbe7da45890b0fd622e4139dcc90328f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4Njc5OA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375086798", "bodyText": "this comment has more in the next line, hence not put fullstop", "author": "GDRDABARERA", "createdAt": "2020-02-05T07:01:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4MjM2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4MzAyNA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375083024", "bodyText": "Public API change?", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:47:32Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/Entity.java", "diffHunk": "@@ -36,15 +38,43 @@ public Entity() {\n \n     }\n \n-    public Entity(String displayName, String tenantDomain,", "originalCommit": "09506afcbe7da45890b0fd622e4139dcc90328f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4NTk2Mg==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375085962", "bodyText": "This was introduced by my new API so nobody has used. hence no issue", "author": "GDRDABARERA", "createdAt": "2020-02-05T06:58:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4MzAyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4MzExOA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375083118", "bodyText": "Public API change?", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:47:56Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/Group.java", "diffHunk": "@@ -28,62 +28,49 @@\n public class Group extends Entity {\n \n     private static final long serialVersionUID = -6157030956831929121L;\n-    private String groupID;\n-    private String groupName;\n     private Permission[] permissions;\n \n     public Group() {\n \n        super();\n     }\n \n-    public Group(String groupID) {", "originalCommit": "09506afcbe7da45890b0fd622e4139dcc90328f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTEwMTkyMg==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375101922", "bodyText": "fixed", "author": "GDRDABARERA", "createdAt": "2020-02-05T07:51:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4MzExOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4MzMzOA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375083338", "bodyText": "Missing new line after the method.", "author": "tharindu-bandara", "createdAt": "2020-02-05T06:48:47Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/User.java", "diffHunk": "@@ -40,49 +38,46 @@ public User() {\n     }\n \n     public User(String userID) {\n-\n-        this.userID = userID;\n+        super.setId(userID);", "originalCommit": "09506afcbe7da45890b0fd622e4139dcc90328f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTEwMTk4Nw==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375101987", "bodyText": "added", "author": "GDRDABARERA", "createdAt": "2020-02-05T07:51:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4MzMzOA=="}], "type": "inlineReview"}, {"oid": "335d9ef9efb9829b4d74d3ef2d75be16171adf0e", "url": "https://github.com/wso2/carbon-kernel/commit/335d9ef9efb9829b4d74d3ef2d75be16171adf0e", "message": "Resolve PR comments", "committedDate": "2020-02-05T07:03:57Z", "type": "forcePushed"}, {"oid": "90b7e5a02775f9ea15212f679b77fdbca69baef2", "url": "https://github.com/wso2/carbon-kernel/commit/90b7e5a02775f9ea15212f679b77fdbca69baef2", "message": "Resolve PR comments", "committedDate": "2020-02-05T08:37:27Z", "type": "commit"}, {"oid": "90b7e5a02775f9ea15212f679b77fdbca69baef2", "url": "https://github.com/wso2/carbon-kernel/commit/90b7e5a02775f9ea15212f679b77fdbca69baef2", "message": "Resolve PR comments", "committedDate": "2020-02-05T08:37:27Z", "type": "forcePushed"}, {"oid": "ae935f580741c044d577c977155e4e49d99b7503", "url": "https://github.com/wso2/carbon-kernel/commit/ae935f580741c044d577c977155e4e49d99b7503", "message": "Added new improvements for group-id implementation", "committedDate": "2020-02-06T06:10:23Z", "type": "commit"}, {"oid": "ae935f580741c044d577c977155e4e49d99b7503", "url": "https://github.com/wso2/carbon-kernel/commit/ae935f580741c044d577c977155e4e49d99b7503", "message": "Added new improvements for group-id implementation", "committedDate": "2020-02-06T06:10:23Z", "type": "forcePushed"}, {"oid": "282c759d885968f4543f4b4985c82ba40cd88203", "url": "https://github.com/wso2/carbon-kernel/commit/282c759d885968f4543f4b4985c82ba40cd88203", "message": "Resolve PR comments", "committedDate": "2020-02-06T06:45:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcyMTU4Mg==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375721582", "bodyText": "make protected", "author": "IsuraD", "createdAt": "2020-02-06T09:25:40Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/Entity.java", "diffHunk": "@@ -36,15 +38,43 @@ public Entity() {\n \n     }\n \n-    public Entity(String displayName, String tenantDomain,\n+    public Entity(String id, String name) {\n+\n+        this.id = id;\n+        this.name = name;\n+    }\n+\n+    public Entity(String id, String name, String displayName, String tenantDomain,\n                   String userStoreDomain, Map<String, String> attributes) {\n \n+        this.id = id;\n+        this.name = name;\n         this.displayName = displayName;\n         this.tenantDomain = tenantDomain;\n         this.userStoreDomain = userStoreDomain;\n         this.attributes = attributes;\n     }\n \n+    public String getId() {", "originalCommit": "9cdf46fcec4464385c2ef60bd10ebcd1989a4f58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcyMTcxMw==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375721713", "bodyText": "public Abstract", "author": "IsuraD", "createdAt": "2020-02-06T09:25:54Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/Entity.java", "diffHunk": "@@ -36,15 +38,43 @@ public Entity() {\n \n     }\n \n-    public Entity(String displayName, String tenantDomain,\n+    public Entity(String id, String name) {", "originalCommit": "9cdf46fcec4464385c2ef60bd10ebcd1989a4f58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "66ea6739c504879c603078951ba57a4232c87c1b", "url": "https://github.com/wso2/carbon-kernel/commit/66ea6739c504879c603078951ba57a4232c87c1b", "message": "Resolve PR comments", "committedDate": "2020-02-06T09:35:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTczMjQ5NA==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375732494", "bodyText": "super(userID)", "author": "IsuraD", "createdAt": "2020-02-06T09:46:56Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/User.java", "diffHunk": "@@ -41,54 +39,52 @@ public User() {\n \n     public User(String userID) {\n \n-        this.userID = userID;\n+        super.setId(userID);", "originalCommit": "66ea6739c504879c603078951ba57a4232c87c1b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTczMjkyNg==", "url": "https://github.com/wso2/carbon-kernel/pull/2580#discussion_r375732926", "bodyText": "super(userId, username)", "author": "IsuraD", "createdAt": "2020-02-06T09:47:52Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/User.java", "diffHunk": "@@ -41,54 +39,52 @@ public User() {\n \n     public User(String userID) {\n \n-        this.userID = userID;\n+        super.setId(userID);\n     }\n \n     public User(String userID, String username, String preferredUsername) {\n \n-        this.userID = userID;", "originalCommit": "66ea6739c504879c603078951ba57a4232c87c1b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b717310b818f9696ea3f726ae330efb368e99bcf", "url": "https://github.com/wso2/carbon-kernel/commit/b717310b818f9696ea3f726ae330efb368e99bcf", "message": "Resolve PR comments", "committedDate": "2020-02-06T09:49:52Z", "type": "forcePushed"}, {"oid": "68b185ba4ff4d50b5e6b536afa0df8a6fdd96315", "url": "https://github.com/wso2/carbon-kernel/commit/68b185ba4ff4d50b5e6b536afa0df8a6fdd96315", "message": "Resolve PR comments", "committedDate": "2020-02-06T09:57:26Z", "type": "commit"}, {"oid": "68b185ba4ff4d50b5e6b536afa0df8a6fdd96315", "url": "https://github.com/wso2/carbon-kernel/commit/68b185ba4ff4d50b5e6b536afa0df8a6fdd96315", "message": "Resolve PR comments", "committedDate": "2020-02-06T09:57:26Z", "type": "forcePushed"}]}