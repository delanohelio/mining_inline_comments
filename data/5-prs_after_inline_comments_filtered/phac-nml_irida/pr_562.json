{"pr_number": 562, "pr_title": "Added tests", "pr_createdAt": "2020-01-07T21:47:42Z", "pr_url": "https://github.com/phac-nml/irida/pull/562", "timeline": [{"oid": "4dc292a17535eaa5771e90c902c669e27596700d", "url": "https://github.com/phac-nml/irida/commit/4dc292a17535eaa5771e90c902c669e27596700d", "message": "Added tests", "committedDate": "2020-01-07T19:52:05Z", "type": "commit"}, {"oid": "296fff4203ee7dc13a5027decdaacc9b7b190829", "url": "https://github.com/phac-nml/irida/commit/296fff4203ee7dc13a5027decdaacc9b7b190829", "message": "Updated tests", "committedDate": "2020-01-07T22:18:56Z", "type": "commit"}, {"oid": "ad7caf479ecf724bc41613a617e1b0ad21f14e53", "url": "https://github.com/phac-nml/irida/commit/ad7caf479ecf724bc41613a617e1b0ad21f14e53", "message": "Updated tests", "committedDate": "2020-01-08T16:54:25Z", "type": "commit"}, {"oid": "936a336007a3a17cebcf7336a3cae86f377d4e2d", "url": "https://github.com/phac-nml/irida/commit/936a336007a3a17cebcf7336a3cae86f377d4e2d", "message": "Merged base branch and fixed merge conflict", "committedDate": "2020-01-08T21:22:29Z", "type": "commit"}, {"oid": "79e020538270e7c421edaf238c20325cae87551a", "url": "https://github.com/phac-nml/irida/commit/79e020538270e7c421edaf238c20325cae87551a", "message": "Updated tests, added logic to jsx files, added classnames used by tests", "committedDate": "2020-01-09T21:18:20Z", "type": "commit"}, {"oid": "26e5c04a419b016512be76591378063d4a24c8a0", "url": "https://github.com/phac-nml/irida/commit/26e5c04a419b016512be76591378063d4a24c8a0", "message": "Updated tests", "committedDate": "2020-01-09T22:09:02Z", "type": "commit"}, {"oid": "9473c9199711abb65c68d1ae0b8df675f8f23c52", "url": "https://github.com/phac-nml/irida/commit/9473c9199711abb65c68d1ae0b8df675f8f23c52", "message": "Merge branch 'analysis/_base_results' into analysis/_tests", "committedDate": "2020-02-11T17:19:34Z", "type": "commit"}, {"oid": "9a3dd075fcb2dbdabd9f7ba75aad319d0ee5a24b", "url": "https://github.com/phac-nml/irida/commit/9a3dd075fcb2dbdabd9f7ba75aad319d0ee5a24b", "message": "Merge branch 'analysis/_base_results' into analysis/_tests", "committedDate": "2020-02-11T18:38:09Z", "type": "commit"}, {"oid": "7d95c88a550f1486e7c372d861bc39816e877478", "url": "https://github.com/phac-nml/irida/commit/7d95c88a550f1486e7c372d861bc39816e877478", "message": "Merged branch and fixed merge conflicts. Added missing methods", "committedDate": "2020-02-11T20:01:34Z", "type": "commit"}, {"oid": "a4f8eedf47442df382c1ea80e4db5f24a83c4f80", "url": "https://github.com/phac-nml/irida/commit/a4f8eedf47442df382c1ea80e4db5f24a83c4f80", "message": "Added missing import statements", "committedDate": "2020-02-11T20:07:24Z", "type": "commit"}, {"oid": "9050077595c220f9e22b52489fc98a627ce7c60f", "url": "https://github.com/phac-nml/irida/commit/9050077595c220f9e22b52489fc98a627ce7c60f", "message": "Reverted antd v4 update", "committedDate": "2020-02-11T22:11:36Z", "type": "commit"}, {"oid": "fe534213c47ff57b7e95fd4ba05d1b66e824702f", "url": "https://github.com/phac-nml/irida/commit/fe534213c47ff57b7e95fd4ba05d1b66e824702f", "message": "Added test for provenance.", "committedDate": "2020-02-14T17:27:47Z", "type": "commit"}, {"oid": "1e385cd1d7e00e3b8acc024345223f7ea62dab1d", "url": "https://github.com/phac-nml/irida/commit/1e385cd1d7e00e3b8acc024345223f7ea62dab1d", "message": "Updated tests", "committedDate": "2020-02-14T20:08:01Z", "type": "commit"}, {"oid": "9b4c3ec4d69b9e6991773d4140a8a78f25f2d3e0", "url": "https://github.com/phac-nml/irida/commit/9b4c3ec4d69b9e6991773d4140a8a78f25f2d3e0", "message": "Added test helper to get number of parameters for a tool. Removed ignore statement for analysisdetailspageit. Added temp comments to controller", "committedDate": "2020-02-17T17:04:56Z", "type": "commit"}, {"oid": "b6a144dd9cdd4310b149c018cda8b0affe3b005f", "url": "https://github.com/phac-nml/irida/commit/b6a144dd9cdd4310b149c018cda8b0affe3b005f", "message": "Added tests and helpers required by these tests. Added comments. Added another analysis submission to test db xml file. Add code to copy a file to the output directory within the tmp directory used by the tests as it doesn't work with a relative path", "committedDate": "2020-02-17T22:53:05Z", "type": "commit"}, {"oid": "3c0172f69dd3c3ea6b2087de9fd1f671ad060b6b", "url": "https://github.com/phac-nml/irida/commit/3c0172f69dd3c3ea6b2087de9fd1f671ad060b6b", "message": "Added tests and updated previous tests with more code. Refactored tests and helpers. Added file for bio hansel results and updated xml db file with new analyses.", "committedDate": "2020-02-18T21:34:20Z", "type": "commit"}, {"oid": "43c646a841a131b72abf3d5b4da21b29669ce6d8", "url": "https://github.com/phac-nml/irida/commit/43c646a841a131b72abf3d5b4da21b29669ce6d8", "message": "Merge branch 'analysis/_base_results' into analysis/_tests", "committedDate": "2020-02-18T21:45:41Z", "type": "commit"}, {"oid": "ee23af4ae5b1e4c26f64a399dc93edc69bfb85d2", "url": "https://github.com/phac-nml/irida/commit/ee23af4ae5b1e4c26f64a399dc93edc69bfb85d2", "message": "Added provenance test for controller. Removed extra white space. Removed console.log statement", "committedDate": "2020-02-18T22:07:50Z", "type": "commit"}, {"oid": "96fb0304a21e164d2803de5a6a18e7576791267a", "url": "https://github.com/phac-nml/irida/commit/96fb0304a21e164d2803de5a6a18e7576791267a", "message": "Merge branch 'analysis/_tests' of github.com:deepsidhu85/irida into analysis/_tests", "committedDate": "2020-02-19T14:20:13Z", "type": "commit"}, {"oid": "c5935d8c05a94a54e954d4ed254a7bbfebb520fd", "url": "https://github.com/phac-nml/irida/commit/c5935d8c05a94a54e954d4ed254a7bbfebb520fd", "message": "Merged analysis/_base into branch and fixed merge conflicts", "committedDate": "2020-02-19T14:24:41Z", "type": "commit"}, {"oid": "ad30db786844b41b8aa4b927d83453908e98b5ad", "url": "https://github.com/phac-nml/irida/commit/ad30db786844b41b8aa4b927d83453908e98b5ad", "message": "Updated testUnknownPipelineOutput to test for unknown pipeline view. Updated db xml file with analysis details for the unknown analysis type.", "committedDate": "2020-02-19T17:07:36Z", "type": "commit"}, {"oid": "5986214f06d910afb44d01a95ed8b4713746b6c9", "url": "https://github.com/phac-nml/irida/commit/5986214f06d910afb44d01a95ed8b4713746b6c9", "message": "Generalized function to check if expected analysis details are equivalent to the actual details displayed. Formatted code.", "committedDate": "2020-02-19T17:17:30Z", "type": "commit"}, {"oid": "8ac5fa6e310ec9bf9ce9d23682d9b0e5375bbc9c", "url": "https://github.com/phac-nml/irida/commit/8ac5fa6e310ec9bf9ce9d23682d9b0e5375bbc9c", "message": "Added missing @param statement for method", "committedDate": "2020-02-19T17:33:53Z", "type": "commit"}, {"oid": "1027279f5d6ce88e6c1aac338beebad9029d4ec5", "url": "https://github.com/phac-nml/irida/commit/1027279f5d6ce88e6c1aac338beebad9029d4ec5", "message": "Merged dev and fixed merge conflicts", "committedDate": "2020-02-19T21:23:22Z", "type": "commit"}, {"oid": "ec59ccd6bb03f18504295ed3c23b04898303d65c", "url": "https://github.com/phac-nml/irida/commit/ec59ccd6bb03f18504295ed3c23b04898303d65c", "message": "Set table search to an empty string", "committedDate": "2020-02-20T15:05:19Z", "type": "commit"}, {"oid": "128d353c8a42b42386862ace94501412192606cf", "url": "https://github.com/phac-nml/irida/commit/128d353c8a42b42386862ace94501412192606cf", "message": "Reverted setting table search to an empty string as it is being fixed in another branch", "committedDate": "2020-02-20T15:08:32Z", "type": "commit"}, {"oid": "56222fcb73ba40012fd29e719e48a7e5bb89fb08", "url": "https://github.com/phac-nml/irida/commit/56222fcb73ba40012fd29e719e48a7e5bb89fb08", "message": "Merge branch 'analysis/_base_results' into analysis/_tests", "committedDate": "2020-02-20T20:49:13Z", "type": "commit"}, {"oid": "ee62ea128b77aca1f07573d1daf73e461c577633", "url": "https://github.com/phac-nml/irida/commit/ee62ea128b77aca1f07573d1daf73e461c577633", "message": "Fixed tests", "committedDate": "2020-02-21T20:45:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMwNDE0Mw==", "url": "https://github.com/phac-nml/irida/pull/562#discussion_r383304143", "bodyText": "All the setting below seems really... obtuse. Would it not be easier to pass in the AnalysisOutputFile into the AnalysisOutputFileInfo constructor and have the constructor determine what it wants to do with it?", "author": "joshsadam", "createdAt": "2020-02-24T14:42:41Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/analysis/AnalysisAjaxController.java", "diffHunk": "@@ -375,35 +375,37 @@ private AnalysisOutputFileInfo getAnalysisOutputFileInfo(AnalysisSubmission subm\n \t\t// set of file extensions for indicating whether the first line of the file should be read\n \t\tfinal ImmutableSet<String> FILE_EXT_READ_FIRST_LINE = ImmutableSet.of(\"tsv\", \"txt\", \"tabular\", \"csv\", \"tab\", TREE_EXT);\n \t\tfinal AnalysisOutputFile aof = analysis.getAnalysisOutputFile(outputName);\n-\t\tfinal Long aofId = aof.getId();\n-\t\tfinal String aofFilename = aof.getFile()\n-\t\t\t\t.getFileName()\n-\t\t\t\t.toString();\n-\t\tfinal String fileExt = FileUtilities.getFileExt(aofFilename);\n-\t\tif (BLACKLIST_FILE_EXT.contains(fileExt))\n-\t\t{\n-\t\t\treturn null;\n-\t\t}\n-\t\tfinal ToolExecution tool = aof.getCreatedByTool();\n-\t\tfinal String toolName = tool.getToolName();\n-\t\tfinal String toolVersion = tool.getToolVersion();\n-\t\tfinal AnalysisOutputFileInfo info = new AnalysisOutputFileInfo();\n-\n-\t\tinfo.setId(aofId);\n-\t\tinfo.setAnalysisSubmissionId(submission.getId());\n-\t\tinfo.setAnalysisId(analysis.getId());\n-\t\tinfo.setOutputName(outputName);\n-\t\tinfo.setFilename(aofFilename);\n-\t\tinfo.setFileSizeBytes(aof.getFile()\n-\t\t\t\t.toFile()\n-\t\t\t\t.length());\n-\t\tinfo.setToolName(toolName);\n-\t\tinfo.setToolVersion(toolVersion);\n-\t\tinfo.setFileExt(fileExt);\n-\t\tif (FILE_EXT_READ_FIRST_LINE.contains(fileExt)) {\n-\t\t\taddFirstLine(info, aof);\n+\t\tif(aof != null) {", "originalCommit": "ee62ea128b77aca1f07573d1daf73e461c577633", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ5ODg0Ng==", "url": "https://github.com/phac-nml/irida/pull/562#discussion_r383498846", "bodyText": "Updated in b7f397f", "author": "deepsidhu85", "createdAt": "2020-02-24T20:33:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMwNDE0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMxMzMwOQ==", "url": "https://github.com/phac-nml/irida/pull/562#discussion_r383313309", "bodyText": "So I know I created this ResponseDetails class, but I think moving forward we should look at ResponseEntitys which is built into the Spring Framework.  See: Using Spring ResponseEntity to Manipulate the HTTP Response", "author": "joshsadam", "createdAt": "2020-02-24T14:57:31Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/analysis/AnalysisAjaxController.java", "diffHunk": "@@ -611,7 +613,7 @@ public int compare(SharedProjectResponse p1, SharedProjectResponse p2) {\n \t * @return Success message if successful\n \t */\n \t@RequestMapping(value = \"/{submissionId}/share\", method = RequestMethod.POST)\n-\tpublic Map<String, String> updateProjectShare(@PathVariable Long submissionId,\n+\tpublic ResponseDetails updateProjectShare(@PathVariable Long submissionId,", "originalCommit": "ee62ea128b77aca1f07573d1daf73e461c577633", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ5NTA1MQ==", "url": "https://github.com/phac-nml/irida/pull/562#discussion_r383495051", "bodyText": "Good idea", "author": "deepsidhu85", "createdAt": "2020-02-24T20:25:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMxMzMwOQ=="}], "type": "inlineReview"}, {"oid": "b7f397facd7f75e5f8d51ba00461f3f813291d2f", "url": "https://github.com/phac-nml/irida/commit/b7f397facd7f75e5f8d51ba00461f3f813291d2f", "message": "Updated tests to verify that the service layer calls are executed the expected number of times. Minor refactoring (removing classes, adding styles, removing unneessary space added to right of button)", "committedDate": "2020-02-24T20:30:51Z", "type": "commit"}, {"oid": "5379289187dd6ec13b0fd1eee9a8eadb13b68b0c", "url": "https://github.com/phac-nml/irida/commit/5379289187dd6ec13b0fd1eee9a8eadb13b68b0c", "message": "Updated webpack public path to use setbaseurl function", "committedDate": "2020-02-25T18:54:42Z", "type": "commit"}]}