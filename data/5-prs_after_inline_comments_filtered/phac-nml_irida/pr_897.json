{"pr_number": 897, "pr_title": "Email pipeline result error", "pr_createdAt": "2020-12-23T19:48:40Z", "pr_url": "https://github.com/phac-nml/irida/pull/897", "timeline": [{"oid": "243b1ab9036649c334fa9612be5beab42b8f0016", "url": "https://github.com/phac-nml/irida/commit/243b1ab9036649c334fa9612be5beab42b8f0016", "message": "Moved email upon completion/error into email upon completion and email upon error checkboxes when launching a pipeline or viewing a running analysis", "committedDate": "2020-12-22T23:11:32Z", "type": "commit"}, {"oid": "3793af47fca62c8234088b58ee532bc7d95895cb", "url": "https://github.com/phac-nml/irida/commit/3793af47fca62c8234088b58ee532bc7d95895cb", "message": "Updated translations", "committedDate": "2020-12-22T23:14:06Z", "type": "commit"}, {"oid": "cd2eceb45b12e519acab3d8d48ff65ee475324bc", "url": "https://github.com/phac-nml/irida/commit/cd2eceb45b12e519acab3d8d48ff65ee475324bc", "message": "Created component to store simple radio button group with yes/no buttons. Updated analysis details to use this component", "committedDate": "2020-12-23T16:50:54Z", "type": "commit"}, {"oid": "ae350be33c0f5546951cf37762d9a1796288bfb6", "url": "https://github.com/phac-nml/irida/commit/ae350be33c0f5546951cf37762d9a1796288bfb6", "message": "Updated images in docs, removed unused translations", "committedDate": "2020-12-23T19:46:33Z", "type": "commit"}, {"oid": "8eb56d69cae40c3585c940545647762499e8ec8b", "url": "https://github.com/phac-nml/irida/commit/8eb56d69cae40c3585c940545647762499e8ec8b", "message": "Updated CHANGELOG", "committedDate": "2020-12-23T19:50:12Z", "type": "commit"}, {"oid": "2a81db3fa7b992bfa49623b99c61782bf7a2cadf", "url": "https://github.com/phac-nml/irida/commit/2a81db3fa7b992bfa49623b99c61782bf7a2cadf", "message": "Removed unused imports. Updated db changeset to set the default value after altering table", "committedDate": "2020-12-23T20:27:30Z", "type": "commit"}, {"oid": "f25a4f3eaa8179b8f93337d86ed9d851346eb785", "url": "https://github.com/phac-nml/irida/commit/f25a4f3eaa8179b8f93337d86ed9d851346eb785", "message": "Fixed syntax error in sql within changeset. Updated UI test", "committedDate": "2020-12-23T22:07:49Z", "type": "commit"}, {"oid": "3de40af80325ce50a4280b96d2d4413bd2972ba9", "url": "https://github.com/phac-nml/irida/commit/3de40af80325ce50a4280b96d2d4413bd2972ba9", "message": "Merged dev and fixed merge conflict", "committedDate": "2020-12-23T22:09:17Z", "type": "commit"}, {"oid": "10e18629b5adbabbf0892e8a3ef29e1b0d313735", "url": "https://github.com/phac-nml/irida/commit/10e18629b5adbabbf0892e8a3ef29e1b0d313735", "message": "Updated logic to send email on error if the user has selected it if irida can't get job information from galaxy", "committedDate": "2020-12-24T15:19:36Z", "type": "commit"}, {"oid": "9e6a110b45ff8cb2373411b13da296d030426453", "url": "https://github.com/phac-nml/irida/commit/9e6a110b45ff8cb2373411b13da296d030426453", "message": "Merged dev and fixed merge conflict", "committedDate": "2020-12-24T20:34:12Z", "type": "commit"}, {"oid": "741ea9aed7fbdd9feb951ac92bc700b0eea52e04", "url": "https://github.com/phac-nml/irida/commit/741ea9aed7fbdd9feb951ac92bc700b0eea52e04", "message": "Updated pipeline launch page and analysis details page with select box for selecting if the user wants to receive a status email. Added translations. Updated db changeset to use renameColumn instead of custom sql for changing email_pipeline_result to email_pipeline_result_completed", "committedDate": "2021-01-05T21:37:24Z", "type": "commit"}, {"oid": "10a3240872263b286d40b803340812c9e6df31b6", "url": "https://github.com/phac-nml/irida/commit/10a3240872263b286d40b803340812c9e6df31b6", "message": "Merged dev and fixed merge conflicts", "committedDate": "2021-01-06T19:27:22Z", "type": "commit"}, {"oid": "4b11d19439555f266834a28704e5b10fc81e7783", "url": "https://github.com/phac-nml/irida/commit/4b11d19439555f266834a28704e5b10fc81e7783", "message": "Updated changeset to add not null constraint and default value after renaming column", "committedDate": "2021-01-06T22:24:41Z", "type": "commit"}, {"oid": "05084caee7123494b678658147f065e951a4443d", "url": "https://github.com/phac-nml/irida/commit/05084caee7123494b678658147f065e951a4443d", "message": "Updated tests", "committedDate": "2021-01-07T15:58:29Z", "type": "commit"}, {"oid": "eca9615ef910d6bc3fa5ebafdb860f0aa0ff9648", "url": "https://github.com/phac-nml/irida/commit/eca9615ef910d6bc3fa5ebafdb860f0aa0ff9648", "message": "Merged dev and fixed merge conflict", "committedDate": "2021-01-07T16:06:44Z", "type": "commit"}, {"oid": "e26dcc0758db6810781cafcc08005ac315da511b", "url": "https://github.com/phac-nml/irida/commit/e26dcc0758db6810781cafcc08005ac315da511b", "message": "Merged dev and fixed merge conflicts", "committedDate": "2021-01-12T19:14:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjgxMDI3NA==", "url": "https://github.com/phac-nml/irida/pull/897#discussion_r556810274", "bodyText": "Again kinda a weird logic thing here with the way this is named.  If you select the \"error\" dropdown, emailPipelineResultError is true.  If you select the \"completion (error or success)\" dropdown, emailPipelineResultCompleted is true.  The names of the variables would suggest though that with the 2nd dropdown \"completion (error or success)\" that both of these values would be true.\nIf you want to keep it that only 1 of these will be true, I think it would be better set as an enum or something on AnalysisSubmission rather than the 2 boolean to indicate the \"level\" of email that will be sent here None, Error, Completion or All or something.", "author": "tom114", "createdAt": "2021-01-13T20:31:55Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/pipelines/PipelineController.java", "diffHunk": "@@ -471,7 +471,8 @@ private String localizedParamOptionLabel(Locale locale, String workflowName, Str\n \n             String analysisDescription = parameters.getDescription();\n             Boolean writeResultsToSamples = parameters.getWriteResultsToSamples();\n-            Boolean emailPipelineResult = parameters.getEmailPipelineResult();\n+            Boolean emailPipelineResultCompleted = parameters.getEmailPipelineResultCompleted();\n+            Boolean emailPipelineResultError = parameters.getEmailPipelineResultError();", "originalCommit": "e26dcc0758db6810781cafcc08005ac315da511b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjkzMTU3NA==", "url": "https://github.com/phac-nml/irida/pull/897#discussion_r556931574", "bodyText": "Thanks for taking a look at that. I updated it so that both email_pipeline_result_completed and email_pipeline_result_error are set to true if the completion (error or success) option is selected. Also, updated the required-data.sql. I for some reason always forget about it. Updated in b3f3e8b", "author": "deepsidhu85", "createdAt": "2021-01-13T22:54:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjgxMDI3NA=="}], "type": "inlineReview"}, {"oid": "b3f3e8bf5be4b6ac25d3068a2b46b47f9672522d", "url": "https://github.com/phac-nml/irida/commit/b3f3e8bf5be4b6ac25d3068a2b46b47f9672522d", "message": "Updated required-data sql with new column. Updated logic so both email_pipeline_result_completed and email_pipeline_result_error are set to true if a user selects to receive email on completion (success or error)", "committedDate": "2021-01-13T22:41:15Z", "type": "commit"}, {"oid": "1af12330d2e2d9b19245e581e178d947aaa6ecb8", "url": "https://github.com/phac-nml/irida/commit/1af12330d2e2d9b19245e581e178d947aaa6ecb8", "message": "Updated images and text", "committedDate": "2021-01-14T23:18:14Z", "type": "commit"}]}