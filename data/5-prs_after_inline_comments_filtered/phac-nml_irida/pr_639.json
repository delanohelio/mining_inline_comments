{"pr_number": 639, "pr_title": "Configurable login page ", "pr_createdAt": "2020-03-27T18:30:55Z", "pr_url": "https://github.com/phac-nml/irida/pull/639", "timeline": [{"oid": "e729c7a75b9f5379669463b9358845b695ddb464", "url": "https://github.com/phac-nml/irida/commit/e729c7a75b9f5379669463b9358845b695ddb464", "message": "Allow UI templates to be loaded from file system\n\nThis will allow developers to override default IRIDA pages by putting the template into a file system directory of their choosing.", "committedDate": "2020-03-27T14:44:08Z", "type": "commit"}, {"oid": "3d07425ccead9d8e0344f4df98f2684ccfd537db", "url": "https://github.com/phac-nml/irida/commit/3d07425ccead9d8e0344f4df98f2684ccfd537db", "message": "Basic layout of login form", "committedDate": "2020-03-27T15:31:45Z", "type": "commit"}, {"oid": "a95df79c9225e223ee644fbf35ed336ac2069574", "url": "https://github.com/phac-nml/irida/commit/a95df79c9225e223ee644fbf35ed336ac2069574", "message": "Basic layout of login form", "committedDate": "2020-03-27T15:36:25Z", "type": "commit"}, {"oid": "c780e4b85fa60d6c0630f3179baaa56c703aaa62", "url": "https://github.com/phac-nml/irida/commit/c780e4b85fa60d6c0630f3179baaa56c703aaa62", "message": "Updated login page UI working with logos", "committedDate": "2020-03-27T16:31:34Z", "type": "commit"}, {"oid": "7a79dd4dfe3b52b881c8c8ae8a17776f394b9d5f", "url": "https://github.com/phac-nml/irida/commit/7a79dd4dfe3b52b881c8c8ae8a17776f394b9d5f", "message": "Updated testing", "committedDate": "2020-03-27T18:25:35Z", "type": "commit"}, {"oid": "106b78ed3e5edb8c7593c9fd0769e98f7cd7d9fb", "url": "https://github.com/phac-nml/irida/commit/106b78ed3e5edb8c7593c9fd0769e98f7cd7d9fb", "message": "Merge branch 'development' into ant-design-login", "committedDate": "2020-03-29T00:16:50Z", "type": "commit"}, {"oid": "cbbcfebe4321bf76e0ad74f1682f6c02abdf28f4", "url": "https://github.com/phac-nml/irida/commit/cbbcfebe4321bf76e0ad74f1682f6c02abdf28f4", "message": "Updated user documentation", "committedDate": "2020-03-31T18:34:49Z", "type": "commit"}, {"oid": "6f4449dca6fa9a0efc19dd6880ce9be9d8253ee0", "url": "https://github.com/phac-nml/irida/commit/6f4449dca6fa9a0efc19dd6880ce9be9d8253ee0", "message": "Code cleanup", "committedDate": "2020-04-01T03:18:07Z", "type": "commit"}, {"oid": "9f6c81a70c12f8a90ea2778565eda85574d9c5ad", "url": "https://github.com/phac-nml/irida/commit/9f6c81a70c12f8a90ea2778565eda85574d9c5ad", "message": "Documentation", "committedDate": "2020-04-01T13:10:40Z", "type": "commit"}, {"oid": "9f7d79b5293bcdc00e91fd134bde3ae819225e7f", "url": "https://github.com/phac-nml/irida/commit/9f7d79b5293bcdc00e91fd134bde3ae819225e7f", "message": "Trying to get template to load", "committedDate": "2020-04-01T13:16:31Z", "type": "commit"}, {"oid": "4b30e1e52206f1737c3e24ecef068a13f3c98e96", "url": "https://github.com/phac-nml/irida/commit/4b30e1e52206f1737c3e24ecef068a13f3c98e96", "message": "Make resolves default ITemplateResolvers", "committedDate": "2020-04-01T14:10:51Z", "type": "commit"}, {"oid": "d358b51ce19ba77d75564602424b8af40c748274", "url": "https://github.com/phac-nml/irida/commit/d358b51ce19ba77d75564602424b8af40c748274", "message": "Merge branch 'development' into ant-design-login", "committedDate": "2020-04-01T15:44:00Z", "type": "commit"}, {"oid": "58e65dd45b9ece101d7df904464495b8ab2b2a4f", "url": "https://github.com/phac-nml/irida/commit/58e65dd45b9ece101d7df904464495b8ab2b2a4f", "message": "Updated developer docs", "committedDate": "2020-04-01T19:20:15Z", "type": "commit"}, {"oid": "5cfa69a551d27bb0bdcc0d88fde56bc48a3d2bd6", "url": "https://github.com/phac-nml/irida/commit/5cfa69a551d27bb0bdcc0d88fde56bc48a3d2bd6", "message": "Merge branch 'development' into ant-design-login", "committedDate": "2020-04-01T19:20:36Z", "type": "commit"}, {"oid": "e8c23fe45756e5ab93967ee5336793d93de978ce", "url": "https://github.com/phac-nml/irida/commit/e8c23fe45756e5ab93967ee5336793d93de978ce", "message": "Merge branch 'development' into ant-design-login", "committedDate": "2020-04-02T02:25:50Z", "type": "commit"}, {"oid": "24e381330e4b1be216ecc238a37814bf1e662f25", "url": "https://github.com/phac-nml/irida/commit/24e381330e4b1be216ecc238a37814bf1e662f25", "message": "\ud83d\udcd6\ufe0f Updated CHANGELOG.md", "committedDate": "2020-04-02T02:26:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzNTEwNA==", "url": "https://github.com/phac-nml/irida/pull/639#discussion_r404135104", "bodyText": "Any reason they would want to have a different template location?  If not I'd prefer it's just hardcoded to /etc/irida/templates for now.  That's where all the rest of the irida config stuff resides.", "author": "tom114", "createdAt": "2020-04-06T14:27:57Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/config/web/IridaUIWebConfig.java", "diffHunk": "@@ -52,21 +53,20 @@\n @Import({ WebEmailConfig.class, IridaApiSecurityConfig.class })\n public class IridaUIWebConfig implements WebMvcConfigurer, ApplicationContextAware {\n \tprivate static final String SPRING_PROFILE_PRODUCTION = \"prod\";\n-\tprivate static final String TEMPLATE_LOCATION = \"/pages/\";\n-\tprivate static final String TEMPLATE_SUFFIX = \".html\";\n-\tprivate static final String LOCALE_CHANGE_PARAMETER = \"lang\";\n+\tprivate static final String INTERNAL_TEMPLATE_PREFIX = \"/pages/\";\n+\tprivate static final String HTML_TEMPLATE_SUFFIX = \".html\";\n \tprivate static final long TEMPLATE_CACHE_TTL_MS = 3600000L;\n \tprivate static final Logger logger = LoggerFactory.getLogger(IridaUIWebConfig.class);\n \tprivate final static String ANALYTICS_DIR = \"/etc/irida/analytics/\";\n \n \t@Value(\"${locales.default}\")\n \tprivate String defaultLocaleValue;\n \n-\t@Autowired\n-\tprivate Environment env;\n+\t@Value(\"${ui.templates}\")\n+\tprivate String extraUITemplates;", "originalCommit": "24e381330e4b1be216ecc238a37814bf1e662f25", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI1MzczNQ==", "url": "https://github.com/phac-nml/irida/pull/639#discussion_r404253735", "bodyText": "I have no problems making it hard coded, thought people might like having the option.", "author": "joshsadam", "createdAt": "2020-04-06T17:11:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzNTEwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI2NDAyMw==", "url": "https://github.com/phac-nml/irida/pull/639#discussion_r404264023", "bodyText": "Updated in d2288ee", "author": "joshsadam", "createdAt": "2020-04-06T17:27:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzNTEwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI5NjE5Mg==", "url": "https://github.com/phac-nml/irida/pull/639#discussion_r404296192", "bodyText": "Thanks.  Might want to make things configurable someday, but I think we'd want to make it all configurable rather than just the templates.", "author": "tom114", "createdAt": "2020-04-06T18:20:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEzNTEwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0ODYzMw==", "url": "https://github.com/phac-nml/irida/pull/639#discussion_r404148633", "bodyText": "Comment please", "author": "tom114", "createdAt": "2020-04-06T14:45:13Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/config/web/IridaUIWebConfig.java", "diffHunk": "@@ -145,29 +145,55 @@ public void addViewControllers(ViewControllerRegistry registry) {\n \t\t\t\t.setViewName(\"projects/templates/referenceFiles/delete\");\n \t}\n \n+\tprivate ITemplateResolver internalTemplateResolver(){", "originalCommit": "24e381330e4b1be216ecc238a37814bf1e662f25", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ5MzczMw==", "url": "https://github.com/phac-nml/irida/pull/639#discussion_r404493733", "bodyText": "Updated in 3fada17", "author": "joshsadam", "createdAt": "2020-04-07T02:04:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0ODYzMw=="}], "type": "inlineReview"}, {"oid": "d2288ee32d326671d2956fe093660b433d82c904", "url": "https://github.com/phac-nml/irida/commit/d2288ee32d326671d2956fe093660b433d82c904", "message": "\ud83d\udea7 Hard coded the path the the templates directory", "committedDate": "2020-04-06T17:27:27Z", "type": "commit"}, {"oid": "7f485c3e133e712be832a9989c58a27ad7275a11", "url": "https://github.com/phac-nml/irida/commit/7f485c3e133e712be832a9989c58a27ad7275a11", "message": "\ud83d\udcd6\ufe0f Update documentation wording", "committedDate": "2020-04-06T17:41:57Z", "type": "commit"}, {"oid": "b0810eebc4de3a0b2848ab82589398c738125ad4", "url": "https://github.com/phac-nml/irida/commit/b0810eebc4de3a0b2848ab82589398c738125ad4", "message": "\ud83d\udcd6\ufe0f Updated custom image and included code", "committedDate": "2020-04-06T19:12:50Z", "type": "commit"}, {"oid": "b0274552fad93d381478b81249a221fcf912b700", "url": "https://github.com/phac-nml/irida/commit/b0274552fad93d381478b81249a221fcf912b700", "message": "\ud83d\udcd6\ufe0f Added example custom login page.", "committedDate": "2020-04-06T23:58:37Z", "type": "commit"}, {"oid": "3fada17fae4b0295b9854d7c7c771838a68333a8", "url": "https://github.com/phac-nml/irida/commit/3fada17fae4b0295b9854d7c7c771838a68333a8", "message": "\ud83d\udea7 Updated JavaDoc", "committedDate": "2020-04-07T02:04:44Z", "type": "commit"}, {"oid": "66c29ec3ce6805dc3d74f53579ae6fdbaa3b15b4", "url": "https://github.com/phac-nml/irida/commit/66c29ec3ce6805dc3d74f53579ae6fdbaa3b15b4", "message": "Updated internationalizations", "committedDate": "2020-04-07T02:07:56Z", "type": "commit"}, {"oid": "f6b4ea1f4aa4d44528b49ecfbb56cd3c270213ae", "url": "https://github.com/phac-nml/irida/commit/f6b4ea1f4aa4d44528b49ecfbb56cd3c270213ae", "message": "\ud83d\udea7 Update code comments and added focus to username when mounted", "committedDate": "2020-04-07T02:54:35Z", "type": "commit"}, {"oid": "169dd1396a046e4bfd0079d5c6672be5088d722f", "url": "https://github.com/phac-nml/irida/commit/169dd1396a046e4bfd0079d5c6672be5088d722f", "message": "\ud83d\udcd6\ufe0f Updated description of a fully custom login form", "committedDate": "2020-04-07T10:02:47Z", "type": "commit"}, {"oid": "3a0eb660bc720bca96ec3c70e1f70e5c5da08c17", "url": "https://github.com/phac-nml/irida/commit/3a0eb660bc720bca96ec3c70e1f70e5c5da08c17", "message": "\ud83d\udcd6\ufe0f Added documentation on adding custom scripts and styles", "committedDate": "2020-04-07T10:06:58Z", "type": "commit"}, {"oid": "f80675d907bf6e1897b8e2f1889d2414bb9a9111", "url": "https://github.com/phac-nml/irida/commit/f80675d907bf6e1897b8e2f1889d2414bb9a9111", "message": "Merge branch 'development' into ant-design-login\n\n# Conflicts:\n#\tCHANGELOG.md", "committedDate": "2020-04-07T10:39:51Z", "type": "commit"}, {"oid": "96d9a366ebbc4d556799f94ba2831976f8da2e46", "url": "https://github.com/phac-nml/irida/commit/96d9a366ebbc4d556799f94ba2831976f8da2e46", "message": "Updated yarn.lock after merging dev", "committedDate": "2020-04-07T10:40:27Z", "type": "commit"}, {"oid": "90e6802735f3e6cc7784156a72b8ac2d9e9bfaa2", "url": "https://github.com/phac-nml/irida/commit/90e6802735f3e6cc7784156a72b8ac2d9e9bfaa2", "message": "added a /static endpoint where installations can add custom resources", "committedDate": "2020-04-07T13:26:13Z", "type": "commit"}, {"oid": "49a3e4152ae7a11c547604d06ff834567f544c5f", "url": "https://github.com/phac-nml/irida/commit/49a3e4152ae7a11c547604d06ff834567f544c5f", "message": "added more comments about static page", "committedDate": "2020-04-07T13:45:01Z", "type": "commit"}, {"oid": "1cfbb7ce2901abb27afcf71aee74f45db442077d", "url": "https://github.com/phac-nml/irida/commit/1cfbb7ce2901abb27afcf71aee74f45db442077d", "message": "Merge pull request #647 from tom114/login-static-resources\n\n/static endpoint for customizing brand", "committedDate": "2020-04-07T14:14:07Z", "type": "commit"}, {"oid": "7efc82f6cd89bcba035fb97511b9fc7cbcc7b93b", "url": "https://github.com/phac-nml/irida/commit/7efc82f6cd89bcba035fb97511b9fc7cbcc7b93b", "message": "\ud83d\udcd6\ufe0f Updated documentation on static resources.", "committedDate": "2020-04-07T14:49:56Z", "type": "commit"}, {"oid": "02a74bd3ca024697402d0bc8a36154b48f489fdb", "url": "https://github.com/phac-nml/irida/commit/02a74bd3ca024697402d0bc8a36154b48f489fdb", "message": "Fixed styles on password reset page.", "committedDate": "2020-04-07T15:14:01Z", "type": "commit"}, {"oid": "7a8e711a72be7eaa4dda707e1a604f9e0dbbb6fa", "url": "https://github.com/phac-nml/irida/commit/7a8e711a72be7eaa4dda707e1a604f9e0dbbb6fa", "message": "\ud83d\udcd6\ufe0f Update wording for adding custom resources.", "committedDate": "2020-04-07T15:53:30Z", "type": "commit"}, {"oid": "99930029eceec33d22775645e7f63356e8f40eed", "url": "https://github.com/phac-nml/irida/commit/99930029eceec33d22775645e7f63356e8f40eed", "message": "Added better description for images", "committedDate": "2020-04-07T15:58:02Z", "type": "commit"}, {"oid": "049eb1dd821c560e09e814621009f248c6d01c87", "url": "https://github.com/phac-nml/irida/commit/049eb1dd821c560e09e814621009f248c6d01c87", "message": "\ud83d\udcd6\ufe0f Fixed formatting of thymeleaf attributes", "committedDate": "2020-04-07T16:04:02Z", "type": "commit"}, {"oid": "28145ddfec4d4e70003a3976e89f3613fd40b44f", "url": "https://github.com/phac-nml/irida/commit/28145ddfec4d4e70003a3976e89f3613fd40b44f", "message": "Fixed displaying errors", "committedDate": "2020-04-07T18:41:14Z", "type": "commit"}, {"oid": "12e9af73d10fac7aa67b962efb07727e6ff959ac", "url": "https://github.com/phac-nml/irida/commit/12e9af73d10fac7aa67b962efb07727e6ff959ac", "message": "added basic example login pages", "committedDate": "2020-04-07T18:47:34Z", "type": "commit"}, {"oid": "8fb1f5e75bb1c5cf739bf29f73d063d6507fb3e7", "url": "https://github.com/phac-nml/irida/commit/8fb1f5e75bb1c5cf739bf29f73d063d6507fb3e7", "message": "removed hasError from the basic login", "committedDate": "2020-04-07T18:58:36Z", "type": "commit"}, {"oid": "5efed4521810acfbcef179aa31382dda4be2a9b8", "url": "https://github.com/phac-nml/irida/commit/5efed4521810acfbcef179aa31382dda4be2a9b8", "message": "\ud83d\udea7 Fixed login issue", "committedDate": "2020-04-07T20:02:48Z", "type": "commit"}, {"oid": "2e3f7d431d1a22f914e7ae1662308f7cac364ef6", "url": "https://github.com/phac-nml/irida/commit/2e3f7d431d1a22f914e7ae1662308f7cac364ef6", "message": "Merge pull request #648 from tom114/basic-custom-login\n\nBasic custom login", "committedDate": "2020-04-07T20:06:03Z", "type": "commit"}, {"oid": "3f946885e8d806bbe56b0aeb6d6eca6516edd76d", "url": "https://github.com/phac-nml/irida/commit/3f946885e8d806bbe56b0aeb6d6eca6516edd76d", "message": "Merge branch 'development' into ant-design-login", "committedDate": "2020-04-07T20:09:27Z", "type": "commit"}]}