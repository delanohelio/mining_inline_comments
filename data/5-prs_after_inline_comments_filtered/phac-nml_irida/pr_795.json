{"pr_number": 795, "pr_title": "Add password authentication for SMTP server", "pr_createdAt": "2020-09-08T22:04:41Z", "pr_url": "https://github.com/phac-nml/irida/pull/795", "timeline": [{"oid": "72d18fa7f1f27d2c849304a55b37c19ce894b4d7", "url": "https://github.com/phac-nml/irida/commit/72d18fa7f1f27d2c849304a55b37c19ce894b4d7", "message": "Add port configuration for SMTP server", "committedDate": "2020-12-02T23:59:37Z", "type": "forcePushed"}, {"oid": "dc5d48f2bd100af105d8ac56f1fd02c47f560592", "url": "https://github.com/phac-nml/irida/commit/dc5d48f2bd100af105d8ac56f1fd02c47f560592", "message": "Add password authentication for SMTP server", "committedDate": "2020-12-03T00:47:29Z", "type": "commit"}, {"oid": "0248a0ee73ccffc8e43f931d3e40a3ac6eaabd31", "url": "https://github.com/phac-nml/irida/commit/0248a0ee73ccffc8e43f931d3e40a3ac6eaabd31", "message": "Add port configuration for SMTP server", "committedDate": "2020-12-03T00:47:29Z", "type": "commit"}, {"oid": "bb5940aeec2181c7836aa6da0ffef1efee7d5e8d", "url": "https://github.com/phac-nml/irida/commit/bb5940aeec2181c7836aa6da0ffef1efee7d5e8d", "message": "Update CHANGELOG.md", "committedDate": "2020-12-03T00:50:02Z", "type": "commit"}, {"oid": "bb5940aeec2181c7836aa6da0ffef1efee7d5e8d", "url": "https://github.com/phac-nml/irida/commit/bb5940aeec2181c7836aa6da0ffef1efee7d5e8d", "message": "Update CHANGELOG.md", "committedDate": "2020-12-03T00:50:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0NTIyMA==", "url": "https://github.com/phac-nml/irida/pull/795#discussion_r535345220", "bodyText": "Can I ask for a small refactor here?  The UNCONFIGURED_PASSWORD_VALUE thing is a bit less than ideal.  I know that in the src/main/resources/configuration.properties file it has those values for the other entries too (username, host, protocol etc) and they're used in the isConfigured method below, but I feel like that could be a bit better managed.  It looks like it was code written about 7 years ago and I believe it was with the intention that people would change the values in this file rather than in their /etc/irida/*conf files.\nCan I ask you to change all of those default mail.server.X entries to blank in the src/main/resources/configuration.properties file and add checks for Strings.isNullOrEmpty for the optional entries before setting them above?  Optional would be port & password. That will make all those properties optional and more configurable for different mail server setups.", "author": "tom114", "createdAt": "2020-12-03T15:41:26Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/config/services/WebEmailConfig.java", "diffHunk": "@@ -50,9 +59,19 @@ public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderCon\n \t@Bean\n \tpublic ConfigurableJavaMailSender javaMailSender() {\n \t\tConfigurableJavaMailSenderImpl sender = new ConfigurableJavaMailSenderImpl();\n+\t\tProperties props = new Properties();\n+\n \t\tsender.setHost(host);\n+\t\tsender.setPort(port);\n \t\tsender.setProtocol(protocol);\n \t\tsender.setUsername(username);\n+\n+\t\tif (!(UNCONFIGURED_PASSWORD_VALUE.equals(password) || password.isBlank())) {", "originalCommit": "bb5940aeec2181c7836aa6da0ffef1efee7d5e8d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTY4MjQ5Mw==", "url": "https://github.com/phac-nml/irida/pull/795#discussion_r535682493", "bodyText": "port doesn't require a check as Java sets its default value", "author": "innovate-invent", "createdAt": "2020-12-03T22:14:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0NTIyMA=="}], "type": "inlineReview"}, {"oid": "184bfeacebc083f5b19c3c83aea7c5b055be4dc9", "url": "https://github.com/phac-nml/irida/commit/184bfeacebc083f5b19c3c83aea7c5b055be4dc9", "message": "Remove awkward \"unconfigured\" values", "committedDate": "2020-12-03T22:11:46Z", "type": "commit"}, {"oid": "b7f0f2642becaf9c2e9335010b41f6c550aa9eea", "url": "https://github.com/phac-nml/irida/commit/b7f0f2642becaf9c2e9335010b41f6c550aa9eea", "message": "Merge branch 'development' into smtp_pass", "committedDate": "2021-01-19T17:22:23Z", "type": "commit"}]}