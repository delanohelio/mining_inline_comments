{"pr_number": 582, "pr_title": "Admin Announcements remove datatables", "pr_createdAt": "2020-01-27T20:19:33Z", "pr_url": "https://github.com/phac-nml/irida/pull/582", "timeline": [{"oid": "45a1df1ac0301376d38d136cff4e06df3616671b", "url": "https://github.com/phac-nml/irida/commit/45a1df1ac0301376d38d136cff4e06df3616671b", "message": "Working announcements table.", "committedDate": "2020-01-20T21:18:55Z", "type": "commit"}, {"oid": "59098699215fd8b2afbe14ccdc2c321d4d98b9fa", "url": "https://github.com/phac-nml/irida/commit/59098699215fd8b2afbe14ccdc2c321d4d98b9fa", "message": "Working on debouncing the search method.", "committedDate": "2020-01-21T17:24:31Z", "type": "commit"}, {"oid": "f5373605bc5f20e7c06e3673c51cb6fb8ecbbdde", "url": "https://github.com/phac-nml/irida/commit/f5373605bc5f20e7c06e3673c51cb6fb8ecbbdde", "message": "Updated to debounce the search field to prevent flickering.", "committedDate": "2020-01-21T19:27:09Z", "type": "commit"}, {"oid": "48b20f94a850fe96e1919fe352759bfc3232efa9", "url": "https://github.com/phac-nml/irida/commit/48b20f94a850fe96e1919fe352759bfc3232efa9", "message": "Merge branch 'development' into announcements-admin-ant-design\n\n# Conflicts:\n#\tsrc/main/webapp/yarn.lock", "committedDate": "2020-01-22T14:44:56Z", "type": "commit"}, {"oid": "3ae8857c33d0c31c7c9190cae62255f0fc508cd7", "url": "https://github.com/phac-nml/irida/commit/3ae8857c33d0c31c7c9190cae62255f0fc508cd7", "message": "Fixed broken tests.", "committedDate": "2020-01-22T15:41:42Z", "type": "commit"}, {"oid": "2a6a83bf022ea0de72a6cf2b7f556c78230562c5", "url": "https://github.com/phac-nml/irida/commit/2a6a83bf022ea0de72a6cf2b7f556c78230562c5", "message": "Merge branch 'clients-ant-design' into announcements-admin-ant-design\n\n# Conflicts:\n#\tsrc/main/webapp/yarn.lock", "committedDate": "2020-01-24T14:52:50Z", "type": "commit"}, {"oid": "d8e444b2f9796f75a61b946f896f915b542f44ac", "url": "https://github.com/phac-nml/irida/commit/d8e444b2f9796f75a61b946f896f915b542f44ac", "message": "Updated create new button to match clients list.", "committedDate": "2020-01-24T15:04:41Z", "type": "commit"}, {"oid": "cf2e1e41d6acef7889efdec247f514b03e7eff66", "url": "https://github.com/phac-nml/irida/commit/cf2e1e41d6acef7889efdec247f514b03e7eff66", "message": "Update package.json\n\nAdded draft-js to offer WYSIWYG text entering for new announcements.", "committedDate": "2020-01-24T17:17:12Z", "type": "commit"}, {"oid": "c10dbae4486ece11cfc35406a0a9031e1508834d", "url": "https://github.com/phac-nml/irida/commit/c10dbae4486ece11cfc35406a0a9031e1508834d", "message": "Work on new markdown editor.", "committedDate": "2020-01-24T21:36:54Z", "type": "commit"}, {"oid": "9ef1bf82581855d5fdac8a266000fe3154bb3aca", "url": "https://github.com/phac-nml/irida/commit/9ef1bf82581855d5fdac8a266000fe3154bb3aca", "message": "Added table actions to delete and edit", "committedDate": "2020-01-27T17:11:39Z", "type": "commit"}, {"oid": "7b79c03c8a3a9bebe1953d0b797dfc515316e32d", "url": "https://github.com/phac-nml/irida/commit/7b79c03c8a3a9bebe1953d0b797dfc515316e32d", "message": "Complete table.  Needs commenting", "committedDate": "2020-01-27T20:18:34Z", "type": "commit"}, {"oid": "f3b4ce5b879db9641091c0dc695f9245895363c9", "url": "https://github.com/phac-nml/irida/commit/f3b4ce5b879db9641091c0dc695f9245895363c9", "message": "Merge branch 'clients-ant-design' into announcements-admin-create-edit\n\n# Conflicts:\n#\tsrc/main/webapp/yarn.lock", "committedDate": "2020-01-28T15:51:00Z", "type": "commit"}, {"oid": "2578bb8bf5fc6de07a4ddece9a767fbe3d00156e", "url": "https://github.com/phac-nml/irida/commit/2578bb8bf5fc6de07a4ddece9a767fbe3d00156e", "message": "Update JSDoc", "committedDate": "2020-01-29T14:08:02Z", "type": "commit"}, {"oid": "f33e63e1d74c7c57763117e34c0d0fa80b2562a6", "url": "https://github.com/phac-nml/irida/commit/f33e63e1d74c7c57763117e34c0d0fa80b2562a6", "message": "Updated JavaDoc", "committedDate": "2020-01-29T14:20:26Z", "type": "commit"}, {"oid": "fd4799206846030df39fabbfe4eb85ff97619004", "url": "https://github.com/phac-nml/irida/commit/fd4799206846030df39fabbfe4eb85ff97619004", "message": "Removed unused constant.", "committedDate": "2020-01-29T14:23:37Z", "type": "commit"}, {"oid": "0283bb60b54c27140d4446088221eec04dcb50a0", "url": "https://github.com/phac-nml/irida/commit/0283bb60b54c27140d4446088221eec04dcb50a0", "message": "This file should have been removed a while ago.", "committedDate": "2020-01-29T14:45:35Z", "type": "commit"}, {"oid": "8dd6b8a9aa77cf8b27a825625191e940aaecd84c", "url": "https://github.com/phac-nml/irida/commit/8dd6b8a9aa77cf8b27a825625191e940aaecd84c", "message": "Unused import", "committedDate": "2020-01-29T14:47:22Z", "type": "commit"}, {"oid": "b93f65a9b37b33ade8dc723a79f88b498774bea4", "url": "https://github.com/phac-nml/irida/commit/b93f65a9b37b33ade8dc723a79f88b498774bea4", "message": "Merge branch 'clients-ant-design' into announcements-admin-create-edit", "committedDate": "2020-01-29T19:16:03Z", "type": "commit"}, {"oid": "1e46f63d8c03f125eddf4cd39e25021958a0cf2e", "url": "https://github.com/phac-nml/irida/commit/1e46f63d8c03f125eddf4cd39e25021958a0cf2e", "message": "Updated JavaDoc", "committedDate": "2020-01-29T20:26:10Z", "type": "commit"}, {"oid": "1598a1719ba2a19e701d7021b62cd37fd1920d37", "url": "https://github.com/phac-nml/irida/commit/1598a1719ba2a19e701d7021b62cd37fd1920d37", "message": "Merge branch 'clients-ant-design' into announcements-admin-create-edit\n\n# Conflicts:\n#\tsrc/main/webapp/resources/js/pages/sequencing-runs/SequencingRunsList.jsx", "committedDate": "2020-02-03T18:49:52Z", "type": "commit"}, {"oid": "314b0a6ae3e8c86a04c0db9b0c18f006b5dd3c42", "url": "https://github.com/phac-nml/irida/commit/314b0a6ae3e8c86a04c0db9b0c18f006b5dd3c42", "message": "Updated to use new PagedTable component.", "committedDate": "2020-02-03T19:00:42Z", "type": "commit"}, {"oid": "5ca4458741fa7969c782c825960bc6461b5a2378", "url": "https://github.com/phac-nml/irida/commit/5ca4458741fa7969c782c825960bc6461b5a2378", "message": "Merge branch 'clients-ant-design' into announcements-admin-create-edit", "committedDate": "2020-02-04T19:11:53Z", "type": "commit"}, {"oid": "2d2b9c0be83ae1431923ff951c35a209956c913b", "url": "https://github.com/phac-nml/irida/commit/2d2b9c0be83ae1431923ff951c35a209956c913b", "message": "Updated with new paged table file layouts.", "committedDate": "2020-02-06T15:01:14Z", "type": "commit"}, {"oid": "a321824bc82910e204a1f250b300afe2078506b9", "url": "https://github.com/phac-nml/irida/commit/a321824bc82910e204a1f250b300afe2078506b9", "message": "Updated markdown viewer.", "committedDate": "2020-02-06T15:23:33Z", "type": "commit"}, {"oid": "f30a17cfce9e6967b0c95f85609c034121b85119", "url": "https://github.com/phac-nml/irida/commit/f30a17cfce9e6967b0c95f85609c034121b85119", "message": "Updated testing.", "committedDate": "2020-02-10T20:12:10Z", "type": "commit"}, {"oid": "2011471c840b3505e0f05f0fd27b820cbe622eaf", "url": "https://github.com/phac-nml/irida/commit/2011471c840b3505e0f05f0fd27b820cbe622eaf", "message": "Merge branch 'clients-ant-design' into announcements-admin-create-edit", "committedDate": "2020-02-10T20:55:12Z", "type": "commit"}, {"oid": "38bc370ab422e96d9a80d3ff5278a3f282d8667a", "url": "https://github.com/phac-nml/irida/commit/38bc370ab422e96d9a80d3ff5278a3f282d8667a", "message": "Updated CHANGELOG.md", "committedDate": "2020-02-10T20:56:12Z", "type": "commit"}, {"oid": "03aed21ef80ee8b042b7dae5ed853129bfa98cc0", "url": "https://github.com/phac-nml/irida/commit/03aed21ef80ee8b042b7dae5ed853129bfa98cc0", "message": "Merge branch 'clients-ant-design' into announcements-admin\n\n# Conflicts:\n#\tsrc/main/webapp/yarn.lock", "committedDate": "2020-02-18T14:38:32Z", "type": "commit"}, {"oid": "63f351419e6a0ace73986857dc566bf382309064", "url": "https://github.com/phac-nml/irida/commit/63f351419e6a0ace73986857dc566bf382309064", "message": "Removed `@ResponseBody` since part of `RestController`", "committedDate": "2020-02-18T14:50:54Z", "type": "commit"}, {"oid": "9ebc1b903347d3c752e97f5fca5d2294af5f26ca", "url": "https://github.com/phac-nml/irida/commit/9ebc1b903347d3c752e97f5fca5d2294af5f26ca", "message": "Merge branch 'development' into announcements-admin-create-edit", "committedDate": "2020-02-18T19:18:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyMDk1MQ==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r381520951", "bodyText": "Is it supposed to be clazz? Or was it just a misspelled variable name?", "author": "deepsidhu85", "createdAt": "2020-02-19T20:18:38Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/repositories/remote/resttemplate/SequenceFileMessageConverter.java", "diffHunk": "@@ -41,9 +37,8 @@ public SequenceFileMessageConverter(String fileName) {\n \t */\n \t@Override\n \tpublic boolean canRead(Class<?> clazz, MediaType mediaType) {\n-\t\tlogger.trace(\"Testing converter for class \" + clazz.getName() + \" and mediatype \" + mediaType);\n-\t\tif (mediaType != null && MEDIA_TYPE.includes(mediaType)\n-\t\t\t\t&& clazz.equals(Path.class)) {\n+\t\tlogger.trace(\"Testing markdownConverter for class \" + clazz.getName() + \" and mediatype \" + mediaType);", "originalCommit": "9ebc1b903347d3c752e97f5fca5d2294af5f26ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyMjE0Mg==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r381522142", "bodyText": "Nope not a misspelled variable, you cannot use class because it is a reserved keyword.", "author": "joshsadam", "createdAt": "2020-02-19T20:21:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyMDk1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyMjkzMA==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r381522930", "bodyText": "I see that the create and delete were removed from this controller and moved to the ajax controller. There remains however the update and delete methods. Are they used elsewhere or should they be removed as well?\nsubmitUpdatedAnnouncement\ndeleteAnnouncement", "author": "deepsidhu85", "createdAt": "2020-02-19T20:22:51Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/announcements/AnnouncementsController.java", "diffHunk": "@@ -135,41 +134,6 @@ public String getControlCentreAdminPage(final Model model) {\n         return ANNOUNCEMENT_ADMIN;\n     }\n ", "originalCommit": "9ebc1b903347d3c752e97f5fca5d2294af5f26ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjAzMTY4OQ==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r382031689", "bodyText": "There will be a follow up merge request that handles those.  There is a separate page if you click on the message in the table that takes you to some detailed information (like who has read it, editing, and other stuff). I have a branch done with that in it, but it uses ant v4.", "author": "joshsadam", "createdAt": "2020-02-20T14:26:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyMjkzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIxNDE5OA==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r382214198", "bodyText": "Sounds good!", "author": "deepsidhu85", "createdAt": "2020-02-20T19:35:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyMjkzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIxNDc0Ng==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r382214746", "bodyText": "Sounds good!", "author": "deepsidhu85", "createdAt": "2020-02-20T19:36:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyMjkzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyNDAyMg==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r381524022", "bodyText": "Update this comment as it is no longer using datatables", "author": "deepsidhu85", "createdAt": "2020-02-19T20:25:10Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/announcements/dto/AnnouncementTableModel.java", "diffHunk": "@@ -0,0 +1,35 @@\n+package ca.corefacility.bioinformatics.irida.ria.web.announcements.dto;\n+\n+import ca.corefacility.bioinformatics.irida.model.announcements.Announcement;\n+import ca.corefacility.bioinformatics.irida.model.user.User;\n+import ca.corefacility.bioinformatics.irida.ria.web.models.tables.TableModel;\n+\n+/**\n+ * User interface model for DataTables for administration of {@link Announcement}", "originalCommit": "9ebc1b903347d3c752e97f5fca5d2294af5f26ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjAzMjQ2Nw==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r382032467", "bodyText": "Updated in e78dce8", "author": "joshsadam", "createdAt": "2020-02-20T14:28:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyNDAyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUzMDc2NA==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r381530764", "bodyText": "Any specific reason of why this was just commented out?", "author": "deepsidhu85", "createdAt": "2020-02-19T20:39:04Z", "path": "src/test/java/ca/corefacility/bioinformatics/irida/web/controller/test/unit/AnnouncementsControllerTest.java", "diffHunk": "@@ -125,27 +117,22 @@ public void testGetControlCentreAdminPage() {\n         assertTrue(\"Unexpected page returned\", ANNOUNCEMENT_ADMIN.equals(page));\n     }\n \n-    @Test\n-    public void testGetCreateAnnouncementPage() {\n-        assertTrue(\"Unexpected page returned\", ANNOUNCEMENT_CREATE.equals(announcementsController.getCreateAnnouncementPage()));\n-    }\n-\n     @Test\n     public void testSubmitCreateAnnouncement() {\n-        Principal principal = () -> USER_NAME;\n-        ExtendedModelMap model = new ExtendedModelMap();\n-\n-        String message = \"The newest message\";\n-        Announcement a = new Announcement(message, user);\n-\n-        when(announcementService.create(any(Announcement.class))).thenReturn(a);\n-        when(userService.getUserByUsername(USER_NAME)).thenReturn(user);\n-\n-        announcementsController.submitCreateAnnouncement(message, model, principal);\n-\n-        assertTrue(\"Unexpected page returned\", ANNOUNCEMENT_CREATE.equals(announcementsController.getCreateAnnouncementPage()));\n-        verify(announcementService).create(any(Announcement.class));\n-        verify(userService, times(1)).getUserByUsername(USER_NAME);\n+//        Principal principal = () -> USER_NAME;", "originalCommit": "9ebc1b903347d3c752e97f5fca5d2294af5f26ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjEzOTUzNA==", "url": "https://github.com/phac-nml/irida/pull/582#discussion_r382139534", "bodyText": "Updated testing in 3659206", "author": "joshsadam", "createdAt": "2020-02-20T17:13:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUzMDc2NA=="}], "type": "inlineReview"}, {"oid": "e175cfeb816cb5155c43e7107a71ec70e3ad15f1", "url": "https://github.com/phac-nml/irida/commit/e175cfeb816cb5155c43e7107a71ec70e3ad15f1", "message": "Merge branch 'development' into announcements-admin-create-edit\n\n# Conflicts:\n#\tCHANGELOG.md", "committedDate": "2020-02-19T20:54:20Z", "type": "commit"}, {"oid": "d5647d249ffecdf880afb5b3c92fc57a9104837a", "url": "https://github.com/phac-nml/irida/commit/d5647d249ffecdf880afb5b3c92fc57a9104837a", "message": "Updated documentation on announcements api", "committedDate": "2020-02-19T20:58:06Z", "type": "commit"}, {"oid": "fc2f8d92ae7dea78312ab0745e5fa389884032d3", "url": "https://github.com/phac-nml/irida/commit/fc2f8d92ae7dea78312ab0745e5fa389884032d3", "message": "Updated comments on AddNewButton", "committedDate": "2020-02-19T21:01:02Z", "type": "commit"}, {"oid": "8fca2f81d35ac47478d198f5e9c34af606e13cd7", "url": "https://github.com/phac-nml/irida/commit/8fca2f81d35ac47478d198f5e9c34af606e13cd7", "message": "Updated comments on MarkdownEditor", "committedDate": "2020-02-19T21:05:38Z", "type": "commit"}, {"oid": "b1c0850383c7d4239018a91e3e3756fea9dfd655", "url": "https://github.com/phac-nml/irida/commit/b1c0850383c7d4239018a91e3e3756fea9dfd655", "message": "Updated comments on MarkdownViewer", "committedDate": "2020-02-19T21:07:43Z", "type": "commit"}, {"oid": "47fd10639a569e3c0cd58276ba7cbca22ec42c08", "url": "https://github.com/phac-nml/irida/commit/47fd10639a569e3c0cd58276ba7cbca22ec42c08", "message": "Added comments to AnnouncementAdminPage.jsx", "committedDate": "2020-02-20T14:24:36Z", "type": "commit"}, {"oid": "e78dce8f8120639b24b6d31d972e7659978471da", "url": "https://github.com/phac-nml/irida/commit/e78dce8f8120639b24b6d31d972e7659978471da", "message": "Removed reference to datatables in AnnouncementTableModel.java", "committedDate": "2020-02-20T14:27:55Z", "type": "commit"}, {"oid": "3611183a5b981a594baf068381c38cd40427d260", "url": "https://github.com/phac-nml/irida/commit/3611183a5b981a594baf068381c38cd40427d260", "message": "Added comments to AnnouncementsTable.jsx", "committedDate": "2020-02-20T14:36:57Z", "type": "commit"}, {"oid": "6a78da0940b3065c745f3e4d7579bc85e85187c8", "url": "https://github.com/phac-nml/irida/commit/6a78da0940b3065c745f3e4d7579bc85e85187c8", "message": "Added comments to EditAnnouncement.jsx", "committedDate": "2020-02-20T14:38:41Z", "type": "commit"}, {"oid": "a138363d1e6f63de7e8d0deff1146219a8904c38", "url": "https://github.com/phac-nml/irida/commit/a138363d1e6f63de7e8d0deff1146219a8904c38", "message": "MarkdownEditor messages are not actually used.", "committedDate": "2020-02-20T14:45:43Z", "type": "commit"}, {"oid": "3659206ab158c19274848ddf022ec21fe458d4ba", "url": "https://github.com/phac-nml/irida/commit/3659206ab158c19274848ddf022ec21fe458d4ba", "message": "Added testing for AnnouncementsAjaxController.", "committedDate": "2020-02-20T17:12:59Z", "type": "commit"}, {"oid": "acc6c0b54aa7bc0c4a3c1d77675db88f7e3bda4c", "url": "https://github.com/phac-nml/irida/commit/acc6c0b54aa7bc0c4a3c1d77675db88f7e3bda4c", "message": "Merge branch 'development' into announcements-admin-create-edit\n\n# Conflicts:\n#\tCHANGELOG.md", "committedDate": "2020-02-20T17:13:51Z", "type": "commit"}, {"oid": "f9daa119d28e41804f94c9da8c930db6bdd4f82d", "url": "https://github.com/phac-nml/irida/commit/f9daa119d28e41804f94c9da8c930db6bdd4f82d", "message": "Merge branch 'development' into announcements-admin-create-edit", "committedDate": "2020-02-20T20:22:54Z", "type": "commit"}, {"oid": "9358c17ece16ffd6d5560adf1143329d171d0cd0", "url": "https://github.com/phac-nml/irida/commit/9358c17ece16ffd6d5560adf1143329d171d0cd0", "message": "Fixed formatting.", "committedDate": "2020-02-20T20:23:16Z", "type": "commit"}]}