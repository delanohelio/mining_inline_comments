{"pr_number": 897, "pr_title": "Support 'petersburg' in genesis files (#800)", "pr_createdAt": "2020-05-11T17:02:32Z", "pr_url": "https://github.com/hyperledger/besu/pull/897", "timeline": [{"oid": "9cff2d89d3216eeea43bb7b0ab2121e0c8b7ad57", "url": "https://github.com/hyperledger/besu/commit/9cff2d89d3216eeea43bb7b0ab2121e0c8b7ad57", "message": "Support 'petersburg' in genesis files (#800)\n\nSigned-off-by: Alexandre PARIS-VERGNE <alexpv14@gmail.com>", "committedDate": "2020-05-11T16:58:52Z", "type": "commit"}, {"oid": "6a2c6e2f2ee27850d35bdfa95325557f847ef44a", "url": "https://github.com/hyperledger/besu/commit/6a2c6e2f2ee27850d35bdfa95325557f847ef44a", "message": "feat: allow either constantinoplefixblock or petersburgblock but not both\n\nSigned-off-by: Alexandre PARIS-VERGNE <alexpv14@gmail.com>", "committedDate": "2020-05-11T19:29:36Z", "type": "commit"}, {"oid": "1872a18b307161be6f3fdac9336ea821040fb4b5", "url": "https://github.com/hyperledger/besu/commit/1872a18b307161be6f3fdac9336ea821040fb4b5", "message": "Merge branch 'master' into feature/800-support-petersburg-in-genesis-files", "committedDate": "2020-05-11T19:34:31Z", "type": "commit"}, {"oid": "1780cfc39ef6e9318c2bedf078f679724d0053ae", "url": "https://github.com/hyperledger/besu/commit/1780cfc39ef6e9318c2bedf078f679724d0053ae", "message": "Merge branch 'master' into feature/800-support-petersburg-in-genesis-files", "committedDate": "2020-05-12T16:56:25Z", "type": "commit"}, {"oid": "3f44fe3c1d31c6970bca66e69564c392c6e3a7c5", "url": "https://github.com/hyperledger/besu/commit/3f44fe3c1d31c6970bca66e69564c392c6e3a7c5", "message": "fix: throw RuntimeException when both petersburg and constantinople are specified\n\nSigned-off-by: Alexandre PARIS-VERGNE <alexpv14@gmail.com>", "committedDate": "2020-05-12T17:30:26Z", "type": "commit"}, {"oid": "feb614367e5ccacc628127aaa026272c801cda45", "url": "https://github.com/hyperledger/besu/commit/feb614367e5ccacc628127aaa026272c801cda45", "message": "Merge branch 'master' into feature/800-support-petersburg-in-genesis-files", "committedDate": "2020-05-12T17:32:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA2Mjk2NA==", "url": "https://github.com/hyperledger/besu/pull/897#discussion_r424062964", "bodyText": "We are transitioning away from expected in annotation to assertThatExceptionOfType(...).isThrownBy(...).withMessage(...).  It reads better and makes it more clear where the exception will occur. Can you migrate to this format?", "author": "shemnon", "createdAt": "2020-05-12T22:10:03Z", "path": "config/src/test/java/org/hyperledger/besu/config/GenesisConfigFileTest.java", "diffHunk": "@@ -298,6 +298,20 @@ public void testNoOverride() {\n     assertThat(config.getConfigOptions().getEvmStackSize()).isNotPresent();\n   }\n \n+  @Test(expected = RuntimeException.class)", "originalCommit": "feb614367e5ccacc628127aaa026272c801cda45", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA2MzY0OQ==", "url": "https://github.com/hyperledger/besu/pull/897#discussion_r424063649", "bodyText": "as seen here - \n  \n    \n      besu/enclave/src/test/java/org/hyperledger/besu/enclave/EnclaveFactoryTest.java\n    \n    \n         Line 44\n      in\n      98ec577\n    \n    \n    \n    \n\n        \n          \n           assertThatExceptionOfType(InvalidConfigurationException.class)", "author": "shemnon", "createdAt": "2020-05-12T22:11:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA2Mjk2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA2MzI3OQ==", "url": "https://github.com/hyperledger/besu/pull/897#discussion_r424063279", "bodyText": "Same exception pattern change request as above.", "author": "shemnon", "createdAt": "2020-05-12T22:10:48Z", "path": "config/src/test/java/org/hyperledger/besu/config/GenesisConfigOptionsTest.java", "diffHunk": "@@ -129,6 +130,21 @@ public void shouldGetConstantinopleFixBlockNumber() {\n     assertThat(config.getConstantinopleFixBlockNumber()).hasValue(1000);\n   }\n \n+  @Test\n+  public void shouldGetPetersburgBlockNumber() {\n+    final GenesisConfigOptions config = fromConfigOptions(singletonMap(\"petersburgBlock\", 1000));\n+    assertThat(config.getConstantinopleFixBlockNumber()).hasValue(1000);\n+  }\n+\n+  @Test(expected = RuntimeException.class)", "originalCommit": "feb614367e5ccacc628127aaa026272c801cda45", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8a5cbf86bb40c9f7dfa716d0aef85997a96979b9", "url": "https://github.com/hyperledger/besu/commit/8a5cbf86bb40c9f7dfa716d0aef85997a96979b9", "message": "Merge branch 'master' into feature/800-support-petersburg-in-genesis-files", "committedDate": "2020-05-13T17:07:17Z", "type": "commit"}, {"oid": "160d622a96720235739330f5fc75a8be5ad445d5", "url": "https://github.com/hyperledger/besu/commit/160d622a96720235739330f5fc75a8be5ad445d5", "message": "style: improve assert on exception thrown\n\nSigned-off-by: Alexandre PARIS-VERGNE <alexpv14@gmail.com>", "committedDate": "2020-05-13T17:32:21Z", "type": "commit"}]}