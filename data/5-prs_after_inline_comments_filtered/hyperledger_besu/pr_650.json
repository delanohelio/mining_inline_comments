{"pr_number": 650, "pr_title": "Expand NodeKeys into Network Discovery", "pr_createdAt": "2020-04-04T04:20:42Z", "pr_url": "https://github.com/hyperledger/besu/pull/650", "timeline": [{"oid": "d2bc350daa746c5a0de4b7f6b9480e7c65648e4c", "url": "https://github.com/hyperledger/besu/commit/d2bc350daa746c5a0de4b7f6b9480e7c65648e4c", "message": "Move IBFT To using cryptoOps\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-03T02:10:04Z", "type": "commit"}, {"oid": "a4bb5f08a63ccbfb603a62e6d7969936a4f56275", "url": "https://github.com/hyperledger/besu/commit/a4bb5f08a63ccbfb603a62e6d7969936a4f56275", "message": "cleaning up the test code\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-03T02:32:02Z", "type": "commit"}, {"oid": "15cc340442ebf38cd877f9455e46a3f769a140f2", "url": "https://github.com/hyperledger/besu/commit/15cc340442ebf38cd877f9455e46a3f769a140f2", "message": "post review\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-03T03:15:57Z", "type": "commit"}, {"oid": "7a1bff23f69fba291574c2a749a4493660782233", "url": "https://github.com/hyperledger/besu/commit/7a1bff23f69fba291574c2a749a4493660782233", "message": "Reworked ibftquery testing\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-03T05:32:48Z", "type": "commit"}, {"oid": "27fa94e2d47ac8002fd2a2584b39fb8492457514", "url": "https://github.com/hyperledger/besu/commit/27fa94e2d47ac8002fd2a2584b39fb8492457514", "message": "fix spotless\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-03T05:41:14Z", "type": "commit"}, {"oid": "3476f5d9fc4e43875131a4b0c9234709043a0690", "url": "https://github.com/hyperledger/besu/commit/3476f5d9fc4e43875131a4b0c9234709043a0690", "message": "More renames\n\nAnd merge master\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-03T08:32:27Z", "type": "commit"}, {"oid": "e4d87571370cbb7191a2152203a7ec3756a1a13b", "url": "https://github.com/hyperledger/besu/commit/e4d87571370cbb7191a2152203a7ec3756a1a13b", "message": "Merge remote-tracking branch 'upstream/master' into crypto_ops\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-03T20:26:45Z", "type": "commit"}, {"oid": "9ad72c2fa0b726dedbf32afb856fb3c4c0907211", "url": "https://github.com/hyperledger/besu/commit/9ad72c2fa0b726dedbf32afb856fb3c4c0907211", "message": "fix spotless\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-03T20:29:14Z", "type": "commit"}, {"oid": "2a90c9ffd58adfacf1bf6e28192dbcd466b8de4a", "url": "https://github.com/hyperledger/besu/commit/2a90c9ffd58adfacf1bf6e28192dbcd466b8de4a", "message": "rename to getNodeKey\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-03T20:32:19Z", "type": "commit"}, {"oid": "8fe289314134b6deacb5940a24c7478477820435", "url": "https://github.com/hyperledger/besu/commit/8fe289314134b6deacb5940a24c7478477820435", "message": "Making Disovery not use KeyPair\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-04T04:14:41Z", "type": "commit"}, {"oid": "33a932a9cf5aabe3a7522029832013ed94093e56", "url": "https://github.com/hyperledger/besu/commit/33a932a9cf5aabe3a7522029832013ed94093e56", "message": "Merge branch 'master' into disco_crypto", "committedDate": "2020-04-07T03:29:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTQ5MQ==", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404515491", "bodyText": "nit: cryptoOps should be nodeKey in exception message.", "author": "usmansaleem", "createdAt": "2020-04-07T03:33:45Z", "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/PeerDiscoveryAgent.java", "diffHunk": "@@ -84,13 +84,13 @@\n   protected final Subscribers<PeerBondedObserver> peerBondedObservers = Subscribers.create();\n \n   public PeerDiscoveryAgent(\n-      final SECP256K1.KeyPair keyPair,\n+      final NodeKey nodeKey,\n       final DiscoveryConfiguration config,\n       final PeerPermissions peerPermissions,\n       final NatService natService,\n       final MetricsSystem metricsSystem) {\n     this.metricsSystem = metricsSystem;\n-    checkArgument(keyPair != null, \"keypair cannot be null\");\n+    checkArgument(nodeKey != null, \"cryptoOps cannot be null\");", "originalCommit": "33a932a9cf5aabe3a7522029832013ed94093e56", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyMTM1OA==", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404521358", "bodyText": "done", "author": "rain-on", "createdAt": "2020-04-07T04:00:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTQ5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTkwMA==", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404515900", "bodyText": "does the description meant to be NodeKey instead of KeyPair?", "author": "usmansaleem", "createdAt": "2020-04-07T03:35:23Z", "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/internal/PeerDiscoveryController.java", "diffHunk": "@@ -692,7 +691,7 @@ public PeerDiscoveryController build() {\n     }\n \n     private void validate() {\n-      validateRequiredDependency(keypair, \"KeyPair\");\n+      validateRequiredDependency(nodeKey, \"KeyPair\");", "originalCommit": "33a932a9cf5aabe3a7522029832013ed94093e56", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyMTQ0NQ==", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404521445", "bodyText": "nodeKey - oops.", "author": "rain-on", "createdAt": "2020-04-07T04:00:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUxNTkwMA=="}], "type": "inlineReview"}, {"oid": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a", "url": "https://github.com/hyperledger/besu/commit/47ad51d9b4a726fab9d41375922b9ebb8a254a1a", "message": "clean up from review\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-07T04:11:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyODAzNg==", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404528036", "bodyText": "nit: Think we mention that is the node key so \"The node key through...", "author": "jframe", "createdAt": "2020-04-07T04:28:52Z", "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/network/DefaultP2PNetwork.java", "diffHunk": "@@ -145,7 +146,7 @@\n    *\n    * @param localNode A representation of the local node\n    * @param peerDiscoveryAgent The agent responsible for discovering peers on the network.\n-   * @param keyPair This node's keypair.\n+   * @param nodeKey The key through which cryptographic operations can be performed", "originalCommit": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyODgwOQ==", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404528809", "bodyText": "rlpx changes are coming in another PR?", "author": "jframe", "createdAt": "2020-04-07T04:32:08Z", "path": "ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/network/DefaultP2PNetwork.java", "diffHunk": "@@ -442,7 +443,12 @@ private void validate() {\n     private PeerDiscoveryAgent createDiscoveryAgent() {\n \n       return new VertxPeerDiscoveryAgent(\n-          vertx, keyPair, config.getDiscovery(), peerPermissions, natService, metricsSystem);\n+          vertx,\n+          new BouncyCastleNodeKey(keyPair),", "originalCommit": "47ad51d9b4a726fab9d41375922b9ebb8a254a1a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUzMTY5Ng==", "url": "https://github.com/hyperledger/besu/pull/650#discussion_r404531696", "bodyText": "yes", "author": "rain-on", "createdAt": "2020-04-07T04:44:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyODgwOQ=="}], "type": "inlineReview"}, {"oid": "ffab8c9035a40addd4e11db6671fcb43aa368e5b", "url": "https://github.com/hyperledger/besu/commit/ffab8c9035a40addd4e11db6671fcb43aa368e5b", "message": "following jframe review\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-04-07T04:44:37Z", "type": "commit"}]}