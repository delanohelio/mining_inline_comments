{"pr_number": 1496, "pr_title": "Change IP to string field", "pr_createdAt": "2020-10-27T03:08:06Z", "pr_url": "https://github.com/hyperledger/besu/pull/1496", "timeline": [{"oid": "0ce820cbed4307cade0b1bd148bc3a18c8881315", "url": "https://github.com/hyperledger/besu/commit/0ce820cbed4307cade0b1bd148bc3a18c8881315", "message": "use Ip consistently\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-10-27T01:05:25Z", "type": "commit"}, {"oid": "5e465a43f09ed7c812f20a5fd9ac726951db8682", "url": "https://github.com/hyperledger/besu/commit/5e465a43f09ed7c812f20a5fd9ac726951db8682", "message": "changed ip field from bytes to string\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-10-27T02:51:30Z", "type": "commit"}, {"oid": "7fa1718b179c4343af68d1935fbb4f6c46a1bdff", "url": "https://github.com/hyperledger/besu/commit/7fa1718b179c4343af68d1935fbb4f6c46a1bdff", "message": "updated acceptance test and genesis\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-10-27T03:04:19Z", "type": "commit"}, {"oid": "71190183af1f40219840da4bc8e3457b4e675829", "url": "https://github.com/hyperledger/besu/commit/71190183af1f40219840da4bc8e3457b4e675829", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into ip-string", "committedDate": "2020-10-27T03:04:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM5NzY0MQ==", "url": "https://github.com/hyperledger/besu/pull/1496#discussion_r512397641", "bodyText": "I don't think this is what we want. The data will likely be stored as one of these:\n\nString representation of the ipv4 or ipv6\nDNS name\n\nTo make this call, we need to encode the string as solidity does. We can probably just get the string representation of the IP and let web3j do the work (like we do for the enode).", "author": "lucassaldanha", "createdAt": "2020-10-27T03:38:18Z", "path": "ethereum/permissioning/src/main/java/org/hyperledger/besu/ethereum/permissioning/NodeSmartContractV2PermissioningController.java", "diffHunk": "@@ -64,14 +64,14 @@ private boolean isPermitted(final EnodeURL enode) {\n   private Bytes createPayload(final EnodeURL enodeUrl) {\n     try {\n       final String hexNodeIdString = enodeUrl.getNodeId().toUnprefixedHexString();\n-      final byte[] ip = encodeIp(enodeUrl.getIp());\n+      final String hexIpString = encodeIp(enodeUrl.getIp());", "originalCommit": "71190183af1f40219840da4bc8e3457b4e675829", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgyMTI5Nw==", "url": "https://github.com/hyperledger/besu/pull/1496#discussion_r513821297", "bodyText": "yep changed to just the string of the host name. Now we don't need the encodeIp method at all", "author": "macfarla", "createdAt": "2020-10-28T23:28:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM5NzY0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2NjYzOA==", "url": "https://github.com/hyperledger/besu/pull/1496#discussion_r515666638", "bodyText": "Yep, it is probably better if we remove the encodeIp method and rename hexIpString variable to something like address.", "author": "lucassaldanha", "createdAt": "2020-11-01T20:15:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM5NzY0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTcxODY4MA==", "url": "https://github.com/hyperledger/besu/pull/1496#discussion_r515718680", "bodyText": "done", "author": "macfarla", "createdAt": "2020-11-02T03:01:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM5NzY0MQ=="}], "type": "inlineReview"}, {"oid": "0077eb8dec4e8d40cf909fdee2f76b0c4307e78f", "url": "https://github.com/hyperledger/besu/commit/0077eb8dec4e8d40cf909fdee2f76b0c4307e78f", "message": "use string to bytes to hexString for IP\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-10-28T00:22:27Z", "type": "commit"}, {"oid": "f7ea5e16fd6f6b8f0e57caf1a74791e710830fa5", "url": "https://github.com/hyperledger/besu/commit/f7ea5e16fd6f6b8f0e57caf1a74791e710830fa5", "message": "default charset\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-10-28T00:25:45Z", "type": "commit"}, {"oid": "c83e6396ac52bea3d211067ef9181f78ecd2f683", "url": "https://github.com/hyperledger/besu/commit/c83e6396ac52bea3d211067ef9181f78ecd2f683", "message": "changelog\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-10-28T01:08:21Z", "type": "commit"}, {"oid": "82152488441aa7af38bfefed68a13774313dc378", "url": "https://github.com/hyperledger/besu/commit/82152488441aa7af38bfefed68a13774313dc378", "message": "just use string\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-10-28T20:58:31Z", "type": "commit"}, {"oid": "4448f8cd0ee7de2db10980afd01d70a108cb750a", "url": "https://github.com/hyperledger/besu/commit/4448f8cd0ee7de2db10980afd01d70a108cb750a", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into ip-string", "committedDate": "2020-10-28T20:58:48Z", "type": "commit"}, {"oid": "eca9f8910bc84b6f50fe6fbcc0cd50ecd1b0ad88", "url": "https://github.com/hyperledger/besu/commit/eca9f8910bc84b6f50fe6fbcc0cd50ecd1b0ad88", "message": "Merge branch 'master' into ip-string", "committedDate": "2020-11-01T11:19:49Z", "type": "commit"}, {"oid": "9b04a6fb965df43e301087fffa38980b36d0a49e", "url": "https://github.com/hyperledger/besu/commit/9b04a6fb965df43e301087fffa38980b36d0a49e", "message": "removed encodeIP method\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-11-02T02:28:08Z", "type": "commit"}, {"oid": "925b3227550d50485507ebdcbd300c6166e3323c", "url": "https://github.com/hyperledger/besu/commit/925b3227550d50485507ebdcbd300c6166e3323c", "message": "Merge branch 'ip-string' of github.com:macfarla/besu into ip-string", "committedDate": "2020-11-02T02:28:50Z", "type": "commit"}]}