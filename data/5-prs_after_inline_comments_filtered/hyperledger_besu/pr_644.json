{"pr_number": 644, "pr_title": "Fix potential bug in Env default value provider", "pr_createdAt": "2020-04-03T04:22:02Z", "pr_url": "https://github.com/hyperledger/besu/pull/644", "timeline": [{"oid": "06bc01d453c9988c3443d4e3dbd1bf834aa48929", "url": "https://github.com/hyperledger/besu/commit/06bc01d453c9988c3443d4e3dbd1bf834aa48929", "message": "Fix potential bug in Env default value provider\n\n -- Bypass default value for positional parameter. In case of subcommands such as help this could have thrown class cast exception\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-04-03T04:21:00Z", "type": "commit"}, {"oid": "4285157f30eadfc565becc01dc095585afc94d41", "url": "https://github.com/hyperledger/besu/commit/4285157f30eadfc565becc01dc095585afc94d41", "message": "Adding unit test case\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-04-03T04:33:19Z", "type": "commit"}, {"oid": "c05598b92c2c0948413d09ff8fd19170e1db54b5", "url": "https://github.com/hyperledger/besu/commit/c05598b92c2c0948413d09ff8fd19170e1db54b5", "message": "errorprone suggestion\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-04-03T04:38:51Z", "type": "commit"}, {"oid": "5e86996327817a37a569d853fd38cfe5a18759af", "url": "https://github.com/hyperledger/besu/commit/5e86996327817a37a569d853fd38cfe5a18759af", "message": "spotless fix\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-04-03T04:41:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc0Njk3Mg==", "url": "https://github.com/hyperledger/besu/pull/644#discussion_r402746972", "bodyText": "What is the reasoning for using the negation of isOption() instead of simply using isPositional() to identify a positional param?", "author": "CjHare", "createdAt": "2020-04-03T05:39:16Z", "path": "besu/src/main/java/org/hyperledger/besu/cli/util/EnvironmentVariableDefaultProvider.java", "diffHunk": "@@ -36,6 +36,10 @@ public EnvironmentVariableDefaultProvider(final Map<String, String> environment)\n \n   @Override\n   public String defaultValue(final ArgSpec argSpec) {\n+    if (!argSpec.isOption()) {", "originalCommit": "5e86996327817a37a569d853fd38cfe5a18759af", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc0OTE4MA==", "url": "https://github.com/hyperledger/besu/pull/644#discussion_r402749180", "bodyText": "fair point ... I think I saw an example which was using isOption which stuck in my head, i didn't realised about isPositional. I'll change it to use isPositional. \ud83d\udc4d", "author": "usmansaleem", "createdAt": "2020-04-03T05:47:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc0Njk3Mg=="}], "type": "inlineReview"}, {"oid": "dc5ee81fb8f832622ac871d255643afda4948602", "url": "https://github.com/hyperledger/besu/commit/dc5ee81fb8f832622ac871d255643afda4948602", "message": "Use isPositional\n\nSigned-off-by: Usman Saleem <usman@usmans.info>", "committedDate": "2020-04-03T05:48:19Z", "type": "commit"}, {"oid": "db0a37b50547b2ea1b0c8c813407047b36fa80c3", "url": "https://github.com/hyperledger/besu/commit/db0a37b50547b2ea1b0c8c813407047b36fa80c3", "message": "Merge branch 'master' into env_provider_bug", "committedDate": "2020-04-03T07:35:57Z", "type": "commit"}, {"oid": "2f6399214be0a940a965642d79f8d0b8ce964c3c", "url": "https://github.com/hyperledger/besu/commit/2f6399214be0a940a965642d79f8d0b8ce964c3c", "message": "Merge branch 'master' into env_provider_bug", "committedDate": "2020-04-04T02:50:51Z", "type": "commit"}, {"oid": "f3c1771579a3d4c670617026d43157ccd3fba719", "url": "https://github.com/hyperledger/besu/commit/f3c1771579a3d4c670617026d43157ccd3fba719", "message": "Merge branch 'master' into env_provider_bug", "committedDate": "2020-04-07T01:05:50Z", "type": "commit"}, {"oid": "2d9133bd821fe1a64848c4ebd45d39a14a9414a5", "url": "https://github.com/hyperledger/besu/commit/2d9133bd821fe1a64848c4ebd45d39a14a9414a5", "message": "Merge branch 'master' into env_provider_bug", "committedDate": "2020-04-07T01:07:59Z", "type": "commit"}]}