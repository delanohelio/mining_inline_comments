{"pr_number": 1026, "pr_title": "FINALLLLYYYY COLOOOOR!", "pr_createdAt": "2020-06-02T22:10:27Z", "pr_url": "https://github.com/hyperledger/besu/pull/1026", "timeline": [{"oid": "00ab0f14293a40732f12b1796746e8644e689861", "url": "https://github.com/hyperledger/besu/commit/00ab0f14293a40732f12b1796746e8644e689861", "message": "smooth as butter\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-18T15:01:45Z", "type": "commit"}, {"oid": "5d4d5c2f82852cf996aaca7d06f946588daad01d", "url": "https://github.com/hyperledger/besu/commit/5d4d5c2f82852cf996aaca7d06f946588daad01d", "message": "String.format\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-18T16:25:10Z", "type": "commit"}, {"oid": "98a85903996f97f7f84a6526a22e2442f7dacb35", "url": "https://github.com/hyperledger/besu/commit/98a85903996f97f7f84a6526a22e2442f7dacb35", "message": "custom xml configuration factory\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-18T22:43:43Z", "type": "commit"}, {"oid": "35d52b7eb69575b9527fd8e4fc24fc764d1e6e67", "url": "https://github.com/hyperledger/besu/commit/35d52b7eb69575b9527fd8e4fc24fc764d1e6e67", "message": "cleanup\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-18T23:33:05Z", "type": "commit"}, {"oid": "256eb65c8f0e745b0caf87db2dd872001d980bbe", "url": "https://github.com/hyperledger/besu/commit/256eb65c8f0e745b0caf87db2dd872001d980bbe", "message": "add reconfigure\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-18T23:37:28Z", "type": "commit"}, {"oid": "cdf6c46e1ebf3a528baf14faeb61453c39e80287", "url": "https://github.com/hyperledger/besu/commit/cdf6c46e1ebf3a528baf14faeb61453c39e80287", "message": "option working\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-18T23:43:10Z", "type": "commit"}, {"oid": "bab7f88508b61352cc7e067211ec4caed85ddf01", "url": "https://github.com/hyperledger/besu/commit/bab7f88508b61352cc7e067211ec4caed85ddf01", "message": "extract exception handler\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-18T23:46:45Z", "type": "commit"}, {"oid": "00c218664d20a95582a7c54254f76f7794d24473", "url": "https://github.com/hyperledger/besu/commit/00c218664d20a95582a7c54254f76f7794d24473", "message": "add tests\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-18T23:55:02Z", "type": "commit"}, {"oid": "a7f96850e2f8ae31f0e2f477122727cb4a299184", "url": "https://github.com/hyperledger/besu/commit/a7f96850e2f8ae31f0e2f477122727cb4a299184", "message": "final param\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-18T23:58:56Z", "type": "commit"}, {"oid": "2c3d93b547d0dbd1b060b838a672d08c88daa1d5", "url": "https://github.com/hyperledger/besu/commit/2c3d93b547d0dbd1b060b838a672d08c88daa1d5", "message": "color change only\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:23:33Z", "type": "commit"}, {"oid": "79bc600784282d9d7eab02097ca2751f0e5da9c1", "url": "https://github.com/hyperledger/besu/commit/79bc600784282d9d7eab02097ca2751f0e5da9c1", "message": "remove param which reset log level\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:33:04Z", "type": "commit"}, {"oid": "87e49facb4865516d0ca31c5345319db28127b70", "url": "https://github.com/hyperledger/besu/commit/87e49facb4865516d0ca31c5345319db28127b70", "message": "spdx header\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:35:58Z", "type": "commit"}, {"oid": "f50255c6a429fadae542493970dbba6942dd7a86", "url": "https://github.com/hyperledger/besu/commit/f50255c6a429fadae542493970dbba6942dd7a86", "message": "switch back to null log level\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:43:09Z", "type": "commit"}, {"oid": "43b6333570c21cb5275836bd00c36efac980e201", "url": "https://github.com/hyperledger/besu/commit/43b6333570c21cb5275836bd00c36efac980e201", "message": "use static vars\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:43:21Z", "type": "commit"}, {"oid": "23c0283f736cb75bbb873f60ea38fa83ad6bae6a", "url": "https://github.com/hyperledger/besu/commit/23c0283f736cb75bbb873f60ea38fa83ad6bae6a", "message": "add color option to toml/\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:44:15Z", "type": "commit"}, {"oid": "a2e93018c59472ff7f4ec0540ebfd9d3c550a2c3", "url": "https://github.com/hyperledger/besu/commit/a2e93018c59472ff7f4ec0540ebfd9d3c550a2c3", "message": "test fix\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:49:15Z", "type": "commit"}, {"oid": "0818e76385b8781d62060511d06cc7bbd5b5c9a1", "url": "https://github.com/hyperledger/besu/commit/0818e76385b8781d62060511d06cc7bbd5b5c9a1", "message": "spotless\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:50:30Z", "type": "commit"}, {"oid": "0818e76385b8781d62060511d06cc7bbd5b5c9a1", "url": "https://github.com/hyperledger/besu/commit/0818e76385b8781d62060511d06cc7bbd5b5c9a1", "message": "spotless\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:50:30Z", "type": "forcePushed"}, {"oid": "24087fbbf5b4ae1e43d3d1b4ef0fe1baf6d2d593", "url": "https://github.com/hyperledger/besu/commit/24087fbbf5b4ae1e43d3d1b4ef0fe1baf6d2d593", "message": "remove commented out xml config\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T00:52:20Z", "type": "commit"}, {"oid": "0a2c43e5f71915b3ace900f64c3dcf119a0b849f", "url": "https://github.com/hyperledger/besu/commit/0a2c43e5f71915b3ace900f64c3dcf119a0b849f", "message": "String.join\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T03:01:54Z", "type": "commit"}, {"oid": "0ab1a6c25d3e0fcea989b6c7ee344e8fef2744cf", "url": "https://github.com/hyperledger/besu/commit/0ab1a6c25d3e0fcea989b6c7ee344e8fef2744cf", "message": "move level setting into lambda\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-19T03:16:13Z", "type": "commit"}, {"oid": "ae948dce9feda32d817577713a7fe11f9e663a44", "url": "https://github.com/hyperledger/besu/commit/ae948dce9feda32d817577713a7fe11f9e663a44", "message": "Merge branch 'master' into FINALLLLYYYY-COLOOOOR!", "committedDate": "2020-06-23T01:34:11Z", "type": "commit"}, {"oid": "53fb53e9a750863de8af2988cb68082697a1f72a", "url": "https://github.com/hyperledger/besu/commit/53fb53e9a750863de8af2988cb68082697a1f72a", "message": "Merge branch 'master' into FINALLLLYYYY-COLOOOOR!", "committedDate": "2020-06-23T13:44:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU0NTk3OQ==", "url": "https://github.com/hyperledger/besu/pull/1026#discussion_r444545979", "bodyText": "nit: Personally this feels like an overly complicated way of doing a simple if so I'd just use:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Optional.ofNullable(logLevel)\n          \n          \n            \n                    .filter(__ -> announce)\n          \n          \n            \n                    .ifPresent(\n          \n          \n            \n                        level -> {\n          \n          \n            \n                          System.out.printf(\"Setting logging level to %s%n\", level.name());\n          \n          \n            \n                          Configurator.setAllLevels(\"\", level);\n          \n          \n            \n                        });\n          \n          \n            \n                if (logLevel != null && announce) {\n          \n          \n            \n                    System.out.printf(\"Setting logging level to %s%n\", level.name());\n          \n          \n            \n                    Configurator.setAllLevels(\"\", level);\n          \n          \n            \n                }", "author": "ajsutton", "createdAt": "2020-06-23T22:36:27Z", "path": "besu/src/main/java/org/hyperledger/besu/cli/BesuCommand.java", "diffHunk": "@@ -1267,13 +1274,20 @@ private BesuCommand startPlugins() {\n   }\n \n   public void configureLogging(final boolean announce) {\n+    // To change the configuration if color was enabled/disabled\n+    Configurator.reconfigure();\n     // set log level per CLI flags\n-    if (logLevel != null) {\n-      if (announce) {\n-        System.out.println(\"Setting logging level to \" + logLevel.name());\n-      }\n-      Configurator.setAllLevels(\"\", logLevel);\n-    }\n+    Optional.ofNullable(logLevel)\n+        .filter(__ -> announce)\n+        .ifPresent(\n+            level -> {\n+              System.out.printf(\"Setting logging level to %s%n\", level.name());\n+              Configurator.setAllLevels(\"\", level);\n+            });", "originalCommit": "53fb53e9a750863de8af2988cb68082697a1f72a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6d6ed41cbbf04c81339f925fa50884d511697170", "url": "https://github.com/hyperledger/besu/commit/6d6ed41cbbf04c81339f925fa50884d511697170", "message": "don't create appender if a custom log4j configuration is given\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-24T00:50:55Z", "type": "commit"}, {"oid": "07af1c99e2147d1e57a9d5533affaca4591a62b2", "url": "https://github.com/hyperledger/besu/commit/07af1c99e2147d1e57a9d5533affaca4591a62b2", "message": "nullable -> if\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-06-24T00:57:55Z", "type": "commit"}, {"oid": "fefe0391f7dab67a3a0b4b14b4cbc463cf71a379", "url": "https://github.com/hyperledger/besu/commit/fefe0391f7dab67a3a0b4b14b4cbc463cf71a379", "message": "Merge remote-tracking branch 'upstream/master' into FINALLLLYYYY-COLOOOOR!", "committedDate": "2020-07-06T18:15:49Z", "type": "commit"}, {"oid": "98d9968ce58f4c1cf53a733f30ac41621f875861", "url": "https://github.com/hyperledger/besu/commit/98d9968ce58f4c1cf53a733f30ac41621f875861", "message": "remove test\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-07-06T19:19:12Z", "type": "commit"}, {"oid": "55b94ba33dda4df2198ebf5eddcc68dd3ee7162c", "url": "https://github.com/hyperledger/besu/commit/55b94ba33dda4df2198ebf5eddcc68dd3ee7162c", "message": "revert back to original announce logic\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-07-06T19:55:55Z", "type": "commit"}, {"oid": "c6c858d7238b0d28735b1ec5346de6c6aee54f64", "url": "https://github.com/hyperledger/besu/commit/c6c858d7238b0d28735b1ec5346de6c6aee54f64", "message": "fix color forcing\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-07-06T20:09:46Z", "type": "commit"}, {"oid": "14bec82b555825e7c1a42dfa4ce9ecf8519ec514", "url": "https://github.com/hyperledger/besu/commit/14bec82b555825e7c1a42dfa4ce9ecf8519ec514", "message": "fix tests\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-07-06T21:07:04Z", "type": "commit"}, {"oid": "414aa052cd05d9d8151b3400a096693175b3f54b", "url": "https://github.com/hyperledger/besu/commit/414aa052cd05d9d8151b3400a096693175b3f54b", "message": "add jansi\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-07-07T21:16:01Z", "type": "commit"}, {"oid": "42ea5d85b177d4fc9e12380b464e285ea5c46062", "url": "https://github.com/hyperledger/besu/commit/42ea5d85b177d4fc9e12380b464e285ea5c46062", "message": "Merge branch 'master' into FINALLLLYYYY-COLOOOOR!", "committedDate": "2020-07-07T22:28:28Z", "type": "commit"}, {"oid": "ecbdeee90131545b4129cccf22ea9ce358e66900", "url": "https://github.com/hyperledger/besu/commit/ecbdeee90131545b4129cccf22ea9ce358e66900", "message": "Merge branch 'FINALLLLYYYY-COLOOOOR!' of github.com:RatanRSur/besu into FINALLLLYYYY-COLOOOOR!", "committedDate": "2020-07-07T22:28:36Z", "type": "commit"}, {"oid": "2641de82f94a2d603466ef554ba491b63bf61115", "url": "https://github.com/hyperledger/besu/commit/2641de82f94a2d603466ef554ba491b63bf61115", "message": "Merge branch 'master' into FINALLLLYYYY-COLOOOOR!", "committedDate": "2020-07-13T14:33:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTU1MjUzMg==", "url": "https://github.com/hyperledger/besu/pull/1026#discussion_r455552532", "bodyText": "If there's been discussion about this elsewhere I'm happy to be overruled but personally I would have just called this --color-enabled.", "author": "ajsutton", "createdAt": "2020-07-16T07:00:17Z", "path": "besu/src/main/java/org/hyperledger/besu/cli/BesuCommand.java", "diffHunk": "@@ -720,6 +720,13 @@ void setBannedNodeIds(final List<String> values) {\n       description = \"Logging verbosity levels: OFF, FATAL, ERROR, WARN, INFO, DEBUG, TRACE, ALL\")\n   private final Level logLevel = null;\n \n+  @SuppressWarnings({\"FieldCanBeFinal\"})\n+  @Option(\n+      names = {\"--force-color-enabled\"},", "originalCommit": "2641de82f94a2d603466ef554ba491b63bf61115", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2a992ee50b7cd647c8c8776308afadf76d61bbc4", "url": "https://github.com/hyperledger/besu/commit/2a992ee50b7cd647c8c8776308afadf76d61bbc4", "message": "runtimeOnly jansi\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-07-16T18:09:04Z", "type": "commit"}, {"oid": "121152f343c6616d4252b6955cc805db4269cabb", "url": "https://github.com/hyperledger/besu/commit/121152f343c6616d4252b6955cc805db4269cabb", "message": "rename to color-enabled\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-07-16T18:09:15Z", "type": "commit"}, {"oid": "d49bbcd4948edeb9abb096dde96dffc8edd81315", "url": "https://github.com/hyperledger/besu/commit/d49bbcd4948edeb9abb096dde96dffc8edd81315", "message": "comment\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-07-16T18:10:02Z", "type": "commit"}, {"oid": "5349583dd2162ba7327424b2b66d4da1c2284d7e", "url": "https://github.com/hyperledger/besu/commit/5349583dd2162ba7327424b2b66d4da1c2284d7e", "message": "Merge remote-tracking branch 'upstream/master' into FINALLLLYYYY-COLOOOOR!", "committedDate": "2020-07-16T18:10:14Z", "type": "commit"}]}