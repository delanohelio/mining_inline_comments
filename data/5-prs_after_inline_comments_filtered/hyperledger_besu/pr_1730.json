{"pr_number": 1730, "pr_title": "Add revert reason to eth_estimateGas RPC call error", "pr_createdAt": "2020-12-17T22:00:47Z", "pr_url": "https://github.com/hyperledger/besu/pull/1730", "timeline": [{"oid": "c34d55a4ef279057656cbddb0d37530bce708a86", "url": "https://github.com/hyperledger/besu/commit/c34d55a4ef279057656cbddb0d37530bce708a86", "message": "Add revert reason to eth_estimateGas RPC call error\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>", "committedDate": "2020-12-17T22:01:43Z", "type": "forcePushed"}, {"oid": "6558049b0417e5a26f440cdb2358070282742053", "url": "https://github.com/hyperledger/besu/commit/6558049b0417e5a26f440cdb2358070282742053", "message": "Update CHANGELOG.md\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>", "committedDate": "2020-12-17T22:15:11Z", "type": "forcePushed"}, {"oid": "e061bf00c51750c0ed5c3639d3c7510419906f90", "url": "https://github.com/hyperledger/besu/commit/e061bf00c51750c0ed5c3639d3c7510419906f90", "message": "Update CHANGELOG.md\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>", "committedDate": "2020-12-18T00:22:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjQyOA==", "url": "https://github.com/hyperledger/besu/pull/1730#discussion_r545606428", "bodyText": "Revert reason may not be present.  Try something like\njsonRpcError.setData(resultTrx.getRevertReason().map(Bytes::toHexString()).orElse(null));", "author": "shemnon", "createdAt": "2020-12-18T06:50:59Z", "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/EthEstimateGas.java", "diffHunk": "@@ -151,6 +151,7 @@ private JsonRpcErrorResponse errorResponse(\n       final TransactionProcessingResult resultTrx = result.getResult();\n       if (resultTrx != null && resultTrx.getRevertReason().isPresent()) {\n         jsonRpcError = JsonRpcError.REVERT_ERROR;\n+        jsonRpcError.setData(resultTrx.getRevertReason().get().toHexString());", "originalCommit": "e061bf00c51750c0ed5c3639d3c7510419906f90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc3ODg1NQ==", "url": "https://github.com/hyperledger/besu/pull/1730#discussion_r545778855", "bodyText": "It's checked up there on the line 152 (resultTrx.getRevertReason().isPresent())", "author": "VladLupashevskyi", "createdAt": "2020-12-18T11:43:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjQyOA=="}], "type": "inlineReview"}, {"oid": "61d742808e9fa820665ed37e021d7c2fdc55eab6", "url": "https://github.com/hyperledger/besu/commit/61d742808e9fa820665ed37e021d7c2fdc55eab6", "message": "Add tests for eth_estimateGas revert\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>", "committedDate": "2020-12-18T18:52:25Z", "type": "forcePushed"}, {"oid": "21f65b4510cb2b6a5bc3423dba9c9a2331bae3b9", "url": "https://github.com/hyperledger/besu/commit/21f65b4510cb2b6a5bc3423dba9c9a2331bae3b9", "message": "Add revert reason to eth_estimateGas RPC call error\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>", "committedDate": "2020-12-18T18:54:21Z", "type": "commit"}, {"oid": "1ffdb7b86ed7a7a3866eb81ff932a086b7b956b3", "url": "https://github.com/hyperledger/besu/commit/1ffdb7b86ed7a7a3866eb81ff932a086b7b956b3", "message": "Update CHANGELOG.md\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>", "committedDate": "2020-12-18T18:54:41Z", "type": "commit"}, {"oid": "9eeacd97d202a96795c5cbd29ffe177d91c2717d", "url": "https://github.com/hyperledger/besu/commit/9eeacd97d202a96795c5cbd29ffe177d91c2717d", "message": "Add tests for eth_estimateGas revert\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>", "committedDate": "2020-12-18T18:54:42Z", "type": "commit"}, {"oid": "9eeacd97d202a96795c5cbd29ffe177d91c2717d", "url": "https://github.com/hyperledger/besu/commit/9eeacd97d202a96795c5cbd29ffe177d91c2717d", "message": "Add tests for eth_estimateGas revert\n\nSigned-off-by: Vladyslav Lupashevskyi <vlad@lupashevskyi.com>", "committedDate": "2020-12-18T18:54:42Z", "type": "forcePushed"}]}