{"pr_number": 1203, "pr_title": "Add missing sanity check for goals.", "pr_createdAt": "2020-05-21T22:26:58Z", "pr_url": "https://github.com/linkedin/cruise-control/pull/1203", "timeline": [{"oid": "20e0475df90f233fa94bacc8eaa22dd8cd107613", "url": "https://github.com/linkedin/cruise-control/commit/20e0475df90f233fa94bacc8eaa22dd8cd107613", "message": "Add missing sanity check for goals.", "committedDate": "2020-05-21T22:19:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4NTA2Ng==", "url": "https://github.com/linkedin/cruise-control/pull/1203#discussion_r428985066", "bodyText": "Shouldn't we check HARD_GOALS_CONFIG and SELF_HEALING_GOALS_CONFIG are subset of GOALS_CONFIG instead of DEFAULT_GOALS_CONFIG here?\nI though DEFAULT_GOALS_CONFIG is only used when there user run operation without provide goal list, GOALS_CONFIG is a set of all supported inter-broker goals.", "author": "kidkun", "createdAt": "2020-05-22T00:35:13Z", "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/config/KafkaCruiseControlConfig.java", "diffHunk": "@@ -106,19 +107,21 @@\n   /**\n    * Sanity check for\n    * <ul>\n-   *   <li>{@link AnalyzerConfig#GOALS_CONFIG} and {@link AnalyzerConfig#INTRA_BROKER_GOALS_CONFIG} are non-empty.</li>\n+   *   <li>{@link AnalyzerConfig#GOALS_CONFIG} and {@link AnalyzerConfig#INTRA_BROKER_GOALS_CONFIG} are non-empty and disjoint.</li>\n    *   <li>Case insensitive goal names.</li>\n    *   <li>{@link AnalyzerConfig#DEFAULT_GOALS_CONFIG} is non-empty.</li>\n-   *   <li>{@link AnomalyDetectorConfig#SELF_HEALING_GOALS_CONFIG} is a sublist of {@link AnalyzerConfig#GOALS_CONFIG}.</li>\n+   *   <li>{@link AnalyzerConfig#DEFAULT_GOALS_CONFIG} is a subset of {@link AnalyzerConfig#GOALS_CONFIG}.</li>\n+   *   <li>{@link AnalyzerConfig#HARD_GOALS_CONFIG} is a subset of {@link AnalyzerConfig#DEFAULT_GOALS_CONFIG}.</li>", "originalCommit": "20e0475df90f233fa94bacc8eaa22dd8cd107613", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MDQ2OQ==", "url": "https://github.com/linkedin/cruise-control/pull/1203#discussion_r428990469", "bodyText": "HARD_GOALS_CONFIG is a subset of DEFAULT_GOALS_CONFIG to ensure that\nhard goal violation checks are not skipped implicitly when a user calls the rebalance endpoint with no arguments -- i.e. please see the relevant sanity check.\nSELF_HEALING_GOALS_CONFIG is a subset of DEFAULT_GOALS_CONFIG to minimize the conflicts between proposals generated via manually triggered default rebalance action and self-healing.", "author": "efeg", "createdAt": "2020-05-22T00:57:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4NTA2Ng=="}], "type": "inlineReview"}]}