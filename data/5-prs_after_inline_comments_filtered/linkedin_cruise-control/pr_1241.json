{"pr_number": 1241, "pr_title": "Add support to retrieve capacity only via load endpoint.", "pr_createdAt": "2020-06-17T02:10:01Z", "pr_url": "https://github.com/linkedin/cruise-control/pull/1241", "timeline": [{"oid": "d525639c494fb6b028eab5598fb896ca5418ba80", "url": "https://github.com/linkedin/cruise-control/commit/d525639c494fb6b028eab5598fb896ca5418ba80", "message": "Add support to retrieve capacity only via load endpoint.", "committedDate": "2020-06-17T01:31:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI1OTUzNw==", "url": "https://github.com/linkedin/cruise-control/pull/1241#discussion_r441259537", "bodyText": "Why do we remove this method? I did a code search and I guess it is not related to this patch but because it is not used anywhere, right?", "author": "hzxa21", "createdAt": "2020-06-17T03:27:51Z", "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/model/ClusterModel.java", "diffHunk": "@@ -1242,23 +1238,6 @@ public BrokerStats brokerStats(KafkaCruiseControlConfig config) {\n     return brokerStats;\n   }\n \n-  /**\n-   * The variance of the derived resources.\n-   * @return A non-null array where the ith index is the variance of RawAndDerivedResource.ordinal().\n-   */\n-  public double[] variance() {\n-    RawAndDerivedResource[] resources = RawAndDerivedResource.values();\n-    double[][] utilization = utilizationMatrix();\n-\n-    double[] variance = new double[resources.length];\n-\n-    for (int resourceIndex = 0; resourceIndex < resources.length; resourceIndex++) {\n-      Variance varianceCalculator = new Variance();\n-      variance[resourceIndex] = varianceCalculator.evaluate(utilization[resourceIndex]);\n-    }\n-    return variance;\n-  }\n-", "originalCommit": "d525639c494fb6b028eab5598fb896ca5418ba80", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwNTYyOA==", "url": "https://github.com/linkedin/cruise-control/pull/1241#discussion_r441705628", "bodyText": "This refactoring is irrelevant to this patch. To keep this PR self-contained, I will revert this change, and create a new refactoring PR for the meta-changes.", "author": "efeg", "createdAt": "2020-06-17T17:21:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI1OTUzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MDA2Mw==", "url": "https://github.com/linkedin/cruise-control/pull/1241#discussion_r441260063", "bodyText": "Why do we remove this method? I did a code search and I guess it is not related to this patch but because it is not used anywhere, right?\nI noticed that writeTo method exists in Replica, Broker, Load, Rack, Disk and Host. Should we also keep it in ClusterModel?", "author": "hzxa21", "createdAt": "2020-06-17T03:30:13Z", "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/model/ClusterModel.java", "diffHunk": "@@ -1299,20 +1278,6 @@ public BrokerStats brokerStats(KafkaCruiseControlConfig config) {\n     return utilization;\n   }\n \n-  /**\n-   * Write to the given output stream.\n-   *\n-   * @param out Output stream.\n-   */\n-  public void writeTo(OutputStream out) throws IOException {\n-    String cluster = String.format(\"<Cluster maxPartitionReplicationFactor=\\\"%d\\\">%n\", _maxReplicationFactor);\n-    out.write(cluster.getBytes(StandardCharsets.UTF_8));\n-    for (Rack rack : _racksById.values()) {\n-      rack.writeTo(out);\n-    }\n-    out.write(\"</Cluster>\".getBytes(StandardCharsets.UTF_8));\n-  }\n-", "originalCommit": "d525639c494fb6b028eab5598fb896ca5418ba80", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwNTcyMQ==", "url": "https://github.com/linkedin/cruise-control/pull/1241#discussion_r441705721", "bodyText": "Ditto as above.", "author": "efeg", "createdAt": "2020-06-17T17:21:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MDA2Mw=="}], "type": "inlineReview"}, {"oid": "add520743751ecdec08ce983323bc0adb6fbafc1", "url": "https://github.com/linkedin/cruise-control/commit/add520743751ecdec08ce983323bc0adb6fbafc1", "message": "Address the feedback.", "committedDate": "2020-06-17T17:19:17Z", "type": "commit"}]}