{"pr_number": 2829, "pr_title": "Fix the infamous #1415 issue (Default Expressions)", "pr_createdAt": "2020-02-23T07:11:46Z", "pr_url": "https://github.com/SkriptLang/Skript/pull/2829", "timeline": [{"oid": "ee6da6d7dc2a6ee20e2b1ab8866d4607e9658ca8", "url": "https://github.com/SkriptLang/Skript/commit/ee6da6d7dc2a6ee20e2b1ab8866d4607e9658ca8", "message": "Fix #1415 and prevent future event-value conflicts", "committedDate": "2020-02-23T07:00:55Z", "type": "commit"}, {"oid": "9572730926e26679611d3048a7fed9ef6e34e07c", "url": "https://github.com/SkriptLang/Skript/commit/9572730926e26679611d3048a7fed9ef6e34e07c", "message": "Remove debug message", "committedDate": "2020-02-23T07:03:01Z", "type": "commit"}, {"oid": "e86af28919e09a44a40fe14b5ab1543172e40304", "url": "https://github.com/SkriptLang/Skript/commit/e86af28919e09a44a40fe14b5ab1543172e40304", "message": "Revert whatever Eclipse changed", "committedDate": "2020-02-24T22:58:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAyMzM5MQ==", "url": "https://github.com/SkriptLang/Skript/pull/2829#discussion_r386023391", "bodyText": "Don't just suppress heap pollution warnings. It would be better to manually verify that this occasion is safe and add @SafeVarargs to method.", "author": "bensku", "createdAt": "2020-02-29T12:00:03Z", "path": "src/main/java/ch/njol/skript/registrations/EventValues.java", "diffHunk": "@@ -101,22 +96,17 @@ public EventValueInfo(final Class<E> event, final Class<T> c, final Getter<T, E>\n \t * @param time\r\n \t * @param excludes Subclasses of the event for which this event value should not be registered for\r\n \t */\r\n-\tpublic static <T, E extends Event> void registerEventValue(final Class<E> e, final Class<T> c, final Getter<T, E> g, final int time, final @Nullable String excludeErrorMessage, final @Nullable Class<? extends E>... excludes) {\r\n+\tpublic static <T, E extends Event> void registerEventValue(Class<E> e, Class<T> c, Getter<T, E> g, int time, @Nullable String excludeErrorMessage, @SuppressWarnings(\"unchecked\") @Nullable Class<? extends E>... excludes) {\r", "originalCommit": "e86af28919e09a44a40fe14b5ab1543172e40304", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAyMzQ4Ng==", "url": "https://github.com/SkriptLang/Skript/pull/2829#discussion_r386023486", "bodyText": "When adding missing Javadoc, please follow code conventions with the formatting.", "author": "bensku", "createdAt": "2020-02-29T12:01:30Z", "path": "src/main/java/ch/njol/skript/registrations/EventValues.java", "diffHunk": "@@ -125,98 +115,123 @@ public EventValueInfo(final Class<E> event, final Class<T> c, final Getter<T, E>\n \t * It is recommended to use {@link EventValues#getEventValueGetter(Class, Class, int)} or {@link EventValueExpression#EventValueExpression(Class)} instead of invoking this\r\n \t * method repeatedly.\r\n \t * \r\n-\t * @param e\r\n-\t * @param c\r\n-\t * @param time\r\n+\t * @param e event\r", "originalCommit": "e86af28919e09a44a40fe14b5ab1543172e40304", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAyMzUyOA==", "url": "https://github.com/SkriptLang/Skript/pull/2829#discussion_r386023528", "bodyText": "Return type of getter?", "author": "bensku", "createdAt": "2020-02-29T12:02:16Z", "path": "src/main/java/ch/njol/skript/registrations/EventValues.java", "diffHunk": "@@ -125,98 +115,123 @@ public EventValueInfo(final Class<E> event, final Class<T> c, final Getter<T, E>\n \t * It is recommended to use {@link EventValues#getEventValueGetter(Class, Class, int)} or {@link EventValueExpression#EventValueExpression(Class)} instead of invoking this\r\n \t * method repeatedly.\r\n \t * \r\n-\t * @param e\r\n-\t * @param c\r\n-\t * @param time\r\n+\t * @param e event\r\n+\t * @param c type of getter\r", "originalCommit": "e86af28919e09a44a40fe14b5ab1543172e40304", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAyMzU5MQ==", "url": "https://github.com/SkriptLang/Skript/pull/2829#discussion_r386023591", "bodyText": "Unfortunately, this argument is int. You'll need to provide some hints about acceptable values, otherwise Javadoc is not very useful.", "author": "bensku", "createdAt": "2020-02-29T12:03:18Z", "path": "src/main/java/ch/njol/skript/registrations/EventValues.java", "diffHunk": "@@ -125,98 +115,123 @@ public EventValueInfo(final Class<E> event, final Class<T> c, final Getter<T, E>\n \t * It is recommended to use {@link EventValues#getEventValueGetter(Class, Class, int)} or {@link EventValueExpression#EventValueExpression(Class)} instead of invoking this\r\n \t * method repeatedly.\r\n \t * \r\n-\t * @param e\r\n-\t * @param c\r\n-\t * @param time\r\n+\t * @param e event\r\n+\t * @param c type of getter\r\n+\t * @param time the event-value's time\r", "originalCommit": "e86af28919e09a44a40fe14b5ab1543172e40304", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAyMzY2OQ==", "url": "https://github.com/SkriptLang/Skript/pull/2829#discussion_r386023669", "bodyText": "Might be grammatical error here, please check. If it is not, please elaborate a bit instead. I'm not sure what this means.", "author": "bensku", "createdAt": "2020-02-29T12:04:27Z", "path": "src/main/java/ch/njol/skript/registrations/EventValues.java", "diffHunk": "@@ -125,98 +115,123 @@ public EventValueInfo(final Class<E> event, final Class<T> c, final Getter<T, E>\n \t * It is recommended to use {@link EventValues#getEventValueGetter(Class, Class, int)} or {@link EventValueExpression#EventValueExpression(Class)} instead of invoking this\r\n \t * method repeatedly.\r\n \t * \r\n-\t * @param e\r\n-\t * @param c\r\n-\t * @param time\r\n+\t * @param e event\r\n+\t * @param c type of getter\r\n+\t * @param time the event-value's time\r\n \t * @return The event's value\r\n \t * @see #registerEventValue(Class, Class, Getter, int)\r\n \t */\r\n \t@Nullable\r\n-\tpublic static <T, E extends Event> T getEventValue(final E e, final Class<T> c, final int time) {\r\n-\t\t@SuppressWarnings({\"null\", \"unchecked\"})\r\n-\t\tfinal Getter<? extends T, ? super E> g = EventValues.getEventValueGetter((Class<E>) e.getClass(), c, time);\r\n-\t\tif (g == null)\r\n+\tpublic static <T, E extends Event> T getEventValue(E e, Class<T> c, int time) {\r\n+\t\t@SuppressWarnings(\"unchecked\")\r\n+\t\tGetter<? extends T, ? super E> getter = getEventValueGetter((Class<E>) e.getClass(), c, time);\r\n+\t\tif (getter == null)\r\n \t\t\treturn null;\r\n-\t\treturn g.get(e);\r\n+\t\treturn getter.get(e);\r\n \t}\r\n \t\r\n \t/**\r\n \t * Returns a getter to get a value from an event.\r\n \t * <p>\r\n \t * Can print an error if the event value is blocked for the given event.\r\n \t * \r\n-\t * @param e\r\n-\t * @param c\r\n-\t * @param time\r\n+\t * @param e event class runtime calling\r", "originalCommit": "e86af28919e09a44a40fe14b5ab1543172e40304", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "176ef56dc5e5de8da56c48af0a4c31c6ee8924a4", "url": "https://github.com/SkriptLang/Skript/commit/176ef56dc5e5de8da56c48af0a4c31c6ee8924a4", "message": "Remove eclipse stuff", "committedDate": "2020-06-29T03:36:39Z", "type": "commit"}, {"oid": "b905c704c1615557cb2d5a10017b2dba10e480df", "url": "https://github.com/SkriptLang/Skript/commit/b905c704c1615557cb2d5a10017b2dba10e480df", "message": "Fix Javadoc changes", "committedDate": "2020-06-29T03:47:54Z", "type": "commit"}, {"oid": "32864a9efea37ef8794f053bc633b68d81137e44", "url": "https://github.com/SkriptLang/Skript/commit/32864a9efea37ef8794f053bc633b68d81137e44", "message": "Fix Javadoc changes", "committedDate": "2020-06-29T03:50:09Z", "type": "commit"}, {"oid": "aa34f12bf8de479426d1647c8b8eafd92ba31062", "url": "https://github.com/SkriptLang/Skript/commit/aa34f12bf8de479426d1647c8b8eafd92ba31062", "message": "Remove eclipse stuff", "committedDate": "2020-06-29T07:09:04Z", "type": "commit"}, {"oid": "db4bc6c5bb4dba066e0b2dacb4564ef1b434a4bb", "url": "https://github.com/SkriptLang/Skript/commit/db4bc6c5bb4dba066e0b2dacb4564ef1b434a4bb", "message": "Merge branch 'master' into fix1415", "committedDate": "2020-06-29T08:05:11Z", "type": "commit"}, {"oid": "84e44d0debf8d866cc5a99a4fd0fca4074e8fab6", "url": "https://github.com/SkriptLang/Skript/commit/84e44d0debf8d866cc5a99a4fd0fca4074e8fab6", "message": "Merge branch 'master' into fix1415", "committedDate": "2020-07-15T20:59:39Z", "type": "commit"}]}