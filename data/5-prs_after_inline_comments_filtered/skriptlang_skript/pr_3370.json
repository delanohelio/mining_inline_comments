{"pr_number": 3370, "pr_title": "Updated CondStartsEndsWith to support multiple strings", "pr_createdAt": "2020-09-08T19:38:36Z", "pr_url": "https://github.com/SkriptLang/Skript/pull/3370", "timeline": [{"oid": "999bbbf0e37a78ed8a079b84cb556ec48f8ff684", "url": "https://github.com/SkriptLang/Skript/commit/999bbbf0e37a78ed8a079b84cb556ec48f8ff684", "message": "Updated CondStartsEndsWith to support multiple strings", "committedDate": "2020-09-08T19:37:39Z", "type": "commit"}, {"oid": "b793b490bbf5c248b4eb60859c6a68e5507f6463", "url": "https://github.com/SkriptLang/Skript/commit/b793b490bbf5c248b4eb60859c6a68e5507f6463", "message": "Added tests", "committedDate": "2020-09-08T19:41:45Z", "type": "commit"}, {"oid": "25eafcdf141a8875464d71a53d1160fec790f978", "url": "https://github.com/SkriptLang/Skript/commit/25eafcdf141a8875464d71a53d1160fec790f978", "message": "Made a small typo", "committedDate": "2020-09-08T19:48:51Z", "type": "commit"}, {"oid": "c7dc4c31e83a3c3c1e1c4c4c45e2fed759bc33cb", "url": "https://github.com/SkriptLang/Skript/commit/c7dc4c31e83a3c3c1e1c4c4c45e2fed759bc33cb", "message": "Updated @Since and @Examples", "committedDate": "2020-09-08T19:52:39Z", "type": "commit"}, {"oid": "31f22f6632d67f6e6e49aef59651a154532b8d5b", "url": "https://github.com/SkriptLang/Skript/commit/31f22f6632d67f6e6e49aef59651a154532b8d5b", "message": "Added 2 more tests", "committedDate": "2020-09-08T20:15:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3MTc5Mw==", "url": "https://github.com/SkriptLang/Skript/pull/3370#discussion_r495471793", "bodyText": "Can you replace the tab here with \\t? Since you're already editing this expression ;D", "author": "APickledWalrus", "createdAt": "2020-09-26T16:17:21Z", "path": "src/main/java/ch/njol/skript/conditions/CondStartsEndsWith.java", "diffHunk": "@@ -34,15 +34,15 @@\n \n @Name(\"Starts/Ends With\")\n @Description(\"Checks if a text starts or ends with another.\")\n-@Examples({\"if the argument starts with \\\"test\\\":\",\n-\t\t\"\tsend \\\"Stop!\\\"\"})\n-@Since(\"2.2-dev36\")\n+@Examples({\"if the argument starts with \\\"test\\\" or \\\"debug\\\":\",\n+\t\"\tsend \\\"Stop!\\\"\"})", "originalCommit": "31f22f6632d67f6e6e49aef59651a154532b8d5b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3MTg2NQ==", "url": "https://github.com/SkriptLang/Skript/pull/3370#discussion_r495471865", "bodyText": "Nitpick but I think\nreturn false;\nshould be on its own line.", "author": "APickledWalrus", "createdAt": "2020-09-26T16:18:08Z", "path": "src/main/java/ch/njol/skript/conditions/CondStartsEndsWith.java", "diffHunk": "@@ -63,15 +63,38 @@ public boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelaye\n \t\n \t@Override\n \tpublic boolean check(Event e) {\n-\t\tString affix = this.affix.getSingle(e);\n-\t\t\n-\t\tif (affix == null) {\n-\t\t\treturn false;\n-\t\t}\n-\t\t\n+\t\tString[] affixes = this.affix.getAll(e);\n+\t\tif (affixes.length < 1) return false;", "originalCommit": "31f22f6632d67f6e6e49aef59651a154532b8d5b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3MzE3Nw==", "url": "https://github.com/SkriptLang/Skript/pull/3370#discussion_r495473177", "bodyText": "I think this will improve readability, but it's open to discussion.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t} else if (this.affix.getAnd()) {\n          \n          \n            \n            \t\t\t\t\tfor (String str : affixes) {\n          \n          \n            \n            \t\t\t\t\t\tif (!string.startsWith(str))\n          \n          \n            \n            \t\t\t\t\t\t\treturn false;\n          \n          \n            \n            \t\t\t\t\t}\n          \n          \n            \n            \t\t\t\t\treturn true;\n          \n          \n            \n            \t\t\t\t} else {\n          \n          \n            \n            \t\t\t\t\tfor (String str : affixes) {\n          \n          \n            \n            \t\t\t\t\t\tif (string.startsWith((str)))\n          \n          \n            \n            \t\t\t\t\t\t\treturn true;\n          \n          \n            \n            \t\t\t\t\t}\n          \n          \n            \n            \t\t\t\t}\n          \n          \n            \n            \t\t\t\t} else { // Using 'starts with'\n          \n          \n            \n            \t\t\t\t\tif (this.affix.getAnd()) {\n          \n          \n            \n            \t\t\t\t\t\tfor (String str : affixes) {\n          \n          \n            \n            \t\t\t\t\t\t\tif (!string.startsWith(str))\n          \n          \n            \n            \t\t\t\t\t\t\t\treturn false;\n          \n          \n            \n            \t\t\t\t\t\t}\n          \n          \n            \n            \t\t\t\t\t\treturn true;\n          \n          \n            \n            \t\t\t\t\t} else {\n          \n          \n            \n            \t\t\t\t\t\tfor (String str : affixes) {\n          \n          \n            \n            \t\t\t\t\t\t\tif (string.startsWith((str)))\n          \n          \n            \n            \t\t\t\t\t\t\t\treturn true;\n          \n          \n            \n            \t\t\t\t\t\t}\n          \n          \n            \n            \t\t\t\t\t}\n          \n          \n            \n            \t\t\t\t}", "author": "APickledWalrus", "createdAt": "2020-09-26T16:32:53Z", "path": "src/main/java/ch/njol/skript/conditions/CondStartsEndsWith.java", "diffHunk": "@@ -63,15 +63,38 @@ public boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelaye\n \t\n \t@Override\n \tpublic boolean check(Event e) {\n-\t\tString affix = this.affix.getSingle(e);\n-\t\t\n-\t\tif (affix == null) {\n-\t\t\treturn false;\n-\t\t}\n-\t\t\n+\t\tString[] affixes = this.affix.getAll(e);\n+\t\tif (affixes.length < 1) return false;\n \t\treturn strings.check(e,\n-\t\t\t\tstring -> usingEnds ? string.endsWith(affix) : string.startsWith(affix),\n-\t\t\t\tisNegated());\n+\t\t\tstring -> {\n+\t\t\t\tif (usingEnds) {\n+\t\t\t\t\tif (this.affix.getAnd()) {\n+\t\t\t\t\t\tfor (String str : affixes) {\n+\t\t\t\t\t\t\tif (!string.endsWith(str))\n+\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\treturn true;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tfor (String str : affixes) {\n+\t\t\t\t\t\t\tif (string.endsWith((str)))\n+\t\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t} else if (this.affix.getAnd()) {\n+\t\t\t\t\tfor (String str : affixes) {\n+\t\t\t\t\t\tif (!string.startsWith(str))\n+\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t}\n+\t\t\t\t\treturn true;\n+\t\t\t\t} else {\n+\t\t\t\t\tfor (String str : affixes) {\n+\t\t\t\t\t\tif (string.startsWith((str)))\n+\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t}\n+\t\t\t\t}", "originalCommit": "31f22f6632d67f6e6e49aef59651a154532b8d5b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3Mzk2MQ==", "url": "https://github.com/SkriptLang/Skript/pull/3370#discussion_r495473961", "bodyText": "Yeah", "author": "DeltaRays", "createdAt": "2020-09-26T16:42:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3MzE3Nw=="}], "type": "inlineReview"}, {"oid": "c0d15edfc5948487817c5ab36b31b9d29b783ad6", "url": "https://github.com/SkriptLang/Skript/commit/c0d15edfc5948487817c5ab36b31b9d29b783ad6", "message": "Merge branch 'dev-2.5' into issue/startsWith", "committedDate": "2020-09-26T16:41:09Z", "type": "commit"}, {"oid": "86e65fe364dc3f3bd68c1f4b93ad2f17e16aadc9", "url": "https://github.com/SkriptLang/Skript/commit/86e65fe364dc3f3bd68c1f4b93ad2f17e16aadc9", "message": "Did everything APickledWalrus asked for", "committedDate": "2020-09-26T16:41:37Z", "type": "commit"}, {"oid": "3af17388dec0b673e0d0889127526672dae4d8cf", "url": "https://github.com/SkriptLang/Skript/commit/3af17388dec0b673e0d0889127526672dae4d8cf", "message": "Merge remote-tracking branch 'origin/issue/startsWith' into issue/startsWith", "committedDate": "2020-09-26T16:41:55Z", "type": "commit"}, {"oid": "534394866e4bc210299787b6ec66764a40b457f2", "url": "https://github.com/SkriptLang/Skript/commit/534394866e4bc210299787b6ec66764a40b457f2", "message": "Added comments and improved readability", "committedDate": "2020-09-26T16:43:19Z", "type": "commit"}, {"oid": "e1ca7cd491d824d557c37f68a90912c229191b3f", "url": "https://github.com/SkriptLang/Skript/commit/e1ca7cd491d824d557c37f68a90912c229191b3f", "message": "Merge branch 'dev-2.5' into issue/startsWith", "committedDate": "2020-10-05T08:19:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQyMjIxMQ==", "url": "https://github.com/SkriptLang/Skript/pull/3370#discussion_r499422211", "bodyText": "As stated in another PR, please revert this back to the default license header.\nLine changes which do not affect the PR shouldn't be part of the PR.\nyou can find a copy of the default header here:\nhttps://github.com/SkriptLang/Skript/blob/master/licenseheader.txt", "author": "ShaneBeee", "createdAt": "2020-10-05T08:21:29Z", "path": "src/main/java/ch/njol/skript/conditions/CondStartsEndsWith.java", "diffHunk": "@@ -1,18 +1,18 @@\n /**\n- *   This file is part of Skript.\n+ * This file is part of Skript.\n  *\n- *  Skript is free software: you can redistribute it and/or modify\n- *  it under the terms of the GNU General Public License as published by\n- *  the Free Software Foundation, either version 3 of the License, or\n- *  (at your option) any later version.\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n  *\n- *  Skript is distributed in the hope that it will be useful,\n- *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- *  GNU General Public License for more details.\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n  *\n- *  You should have received a copy of the GNU General Public License\n- *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.", "originalCommit": "e1ca7cd491d824d557c37f68a90912c229191b3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU1MzI1OQ==", "url": "https://github.com/SkriptLang/Skript/pull/3370#discussion_r499553259", "bodyText": "Thanks, I\u2019ll do it when I come home", "author": "DeltaRays", "createdAt": "2020-10-05T12:15:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQyMjIxMQ=="}], "type": "inlineReview"}, {"oid": "88b331d6a345a966fb70ab96dddfc0db3e6dddf7", "url": "https://github.com/SkriptLang/Skript/commit/88b331d6a345a966fb70ab96dddfc0db3e6dddf7", "message": "Merge branch 'dev-2.5' into issue/startsWith", "committedDate": "2020-10-05T12:14:54Z", "type": "commit"}, {"oid": "3243e968cc55f5294bed66d9d85aec51dc147be6", "url": "https://github.com/SkriptLang/Skript/commit/3243e968cc55f5294bed66d9d85aec51dc147be6", "message": "Updated license", "committedDate": "2020-10-05T15:01:52Z", "type": "commit"}, {"oid": "de52ab90d0f4f7eaef3f230659f1a089acf9b74c", "url": "https://github.com/SkriptLang/Skript/commit/de52ab90d0f4f7eaef3f230659f1a089acf9b74c", "message": "Update CondStartsEndsWith.java", "committedDate": "2020-10-05T15:07:43Z", "type": "commit"}]}