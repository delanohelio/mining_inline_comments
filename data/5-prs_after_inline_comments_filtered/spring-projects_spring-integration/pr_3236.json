{"pr_number": 3236, "pr_title": "GH-2736: Async Mode for TcpOutboundGateway", "pr_createdAt": "2020-04-01T19:02:41Z", "pr_url": "https://github.com/spring-projects/spring-integration/pull/3236", "timeline": [{"oid": "933b652b123c5c39ee22dc2118421afad4d470a0", "url": "https://github.com/spring-projects/spring-integration/commit/933b652b123c5c39ee22dc2118421afad4d470a0", "message": "GH-2736: Async Mode for TcpOutboundGateway\n\nResolves https://github.com/spring-projects/spring-integration/issues/2736\n\nSupport asynchronous request/reply.", "committedDate": "2020-04-01T19:01:14Z", "type": "commit"}, {"oid": "1c522f5af581197e679dc338193abe8b5c35686d", "url": "https://github.com/spring-projects/spring-integration/commit/1c522f5af581197e679dc338193abe8b5c35686d", "message": "- Add `async` to the schema\n- Fix tests1", "committedDate": "2020-04-01T20:18:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5ODk4Mw==", "url": "https://github.com/spring-projects/spring-integration/pull/3236#discussion_r401898983", "bodyText": "Can we obtain isAsync() as local variable only once in the begging of method?\nKinda to avoid a race condition when it could be changed in between at runtime...", "author": "artembilan", "createdAt": "2020-04-01T20:46:36Z", "path": "spring-integration-ip/src/main/java/org/springframework/integration/ip/tcp/TcpOutboundGateway.java", "diffHunk": "@@ -172,7 +196,9 @@ protected Object handleRequestMessage(Message<?> requestMessage) {\n \t\t\tthrow new MessageHandlingException(requestMessage, \"Interrupted in the [\" + this + ']', e);\n \t\t}\n \t\tfinally {\n-\t\t\tcleanUp(haveSemaphore, connection, connectionId);\n+\t\t\tif (!isAsync()) {", "originalCommit": "1c522f5af581197e679dc338193abe8b5c35686d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkwMDc1NA==", "url": "https://github.com/spring-projects/spring-integration/pull/3236#discussion_r401900754", "bodyText": "Can we make this test class as JUnit 5 since we are here already?", "author": "artembilan", "createdAt": "2020-04-01T20:49:55Z", "path": "spring-integration-ip/src/test/java/org/springframework/integration/ip/tcp/TcpOutboundGatewayTests.java", "diffHunk": "@@ -98,8 +105,8 @@\n \tpublic static LongRunningIntegrationTest longTests = new LongRunningIntegrationTest();\n \n \t@Rule\n-\tpublic Log4j2LevelAdjuster adjuster = Log4j2LevelAdjuster.trace();\n-\n+\tpublic Log4j2LevelAdjuster adjuster = Log4j2LevelAdjuster.trace()", "originalCommit": "1c522f5af581197e679dc338193abe8b5c35686d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "530cbc46521b67332ee7a00f34a53748052c0721", "url": "https://github.com/spring-projects/spring-integration/commit/530cbc46521b67332ee7a00f34a53748052c0721", "message": "- Capture `isAsync` in a variable\n- Fix typo\n- Convert test to JUnit5", "committedDate": "2020-04-01T21:10:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTkyNzU2Mw==", "url": "https://github.com/spring-projects/spring-integration/pull/3236#discussion_r401927563", "bodyText": "Just for info: IDEA doesn't mark such a public modifier as redundant.\nSo, we don't need to bother ourselves to remove them any more \ud83d\ude04\n(If it doesn't annoy you, of course)", "author": "artembilan", "createdAt": "2020-04-01T21:42:57Z", "path": "spring-integration-ip/src/test/java/org/springframework/integration/ip/tcp/TcpOutboundGatewayTests.java", "diffHunk": "@@ -1011,7 +1002,7 @@ public void postSend(Message<?> message, MessageChannel channel, boolean sent) {\n \t}\n \n \t@Test\n-\tpublic void testAsyncTimeout() throws Exception {", "originalCommit": "530cbc46521b67332ee7a00f34a53748052c0721", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}