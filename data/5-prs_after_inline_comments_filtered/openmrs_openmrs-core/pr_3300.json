{"pr_number": 3300, "pr_title": "    TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)", "pr_createdAt": "2020-07-07T08:07:16Z", "pr_url": "https://github.com/openmrs/openmrs-core/pull/3300", "timeline": [{"oid": "186177306e8ceb7f70afd59990a1a55e8d218a3f", "url": "https://github.com/openmrs/openmrs-core/commit/186177306e8ceb7f70afd59990a1a55e8d218a3f", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..3)", "committedDate": "2020-07-07T08:02:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMzIxNg==", "url": "https://github.com/openmrs/openmrs-core/pull/3300#discussion_r451033216", "bodyText": "Why did you remove this line?\nFrom reading it I feel like its supposed to show that the existingConceptNameTag.getId() did not change. Thats why I believe it should stay. Unless you convince me it should not :)", "author": "teleivo", "createdAt": "2020-07-07T17:37:01Z", "path": "api/src/test/java/org/openmrs/api/ConceptServiceTest.java", "diffHunk": "@@ -1251,13 +1246,12 @@ public void saveConceptNameTag_shouldNotSaveAConceptNameTagIfTagExists() {\n \t\tConceptNameTag secondNameTag = new ConceptNameTag();\n \t\tsecondNameTag.setTag(tag);\n \t\t\n-\t\tConceptNameTag existingConceptNameTag = conceptService.saveConceptNameTag(secondNameTag);\n-\t\t\n+\t\tassertThrows(Exception.class, () -> conceptService.saveConceptNameTag(secondNameTag));\n \t\tassertNull(secondNameTag.getId());\n-\t\tassertEquals(existingConceptNameTag.getId(), nameTag.getId());", "originalCommit": "186177306e8ceb7f70afd59990a1a55e8d218a3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA1OTU5NQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3300#discussion_r451059595", "bodyText": "the exception happen at with this method  :\n     ConceptNameTag existingConceptNameTag = conceptService.saveConceptNameTag(secondNameTag);\n\nif it has to stay , it will look like this\nassertThrows(Exception.class, () ->  assertEquals(conceptService.saveConceptNameTag(secondNameTag).getId(), nameTag.getId());", "author": "achilep", "createdAt": "2020-07-07T18:24:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMzIxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA2NjE5Mw==", "url": "https://github.com/openmrs/openmrs-core/pull/3300#discussion_r451066193", "bodyText": "Thats right but you already wrapped the conceptService.saveConceptNameTag(secondNameTag) in an assertThrows. The assertThrows allows to do assertions after it. That is the reason why for example assertNull(secondNameTag.getId()); is even possible. So it should also be possible to keep \t\tassertEquals(existingConceptNameTag.getId(), nameTag.getId()); in.\nthis is how I expect it to look like\n\tassertThrows(Exception.class, () -> conceptService.saveConceptNameTag(secondNameTag));\n\tassertNull(secondNameTag.getId());\n\tassertEquals(existingConceptNameTag.getId(), nameTag.getId());", "author": "teleivo", "createdAt": "2020-07-07T18:36:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMzIxNg=="}], "type": "inlineReview"}]}