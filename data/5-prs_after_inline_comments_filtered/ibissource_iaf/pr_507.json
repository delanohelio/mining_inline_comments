{"pr_number": 507, "pr_title": "Automatically load all configurations found in the configurations.directory", "pr_createdAt": "2020-03-16T16:33:41Z", "pr_url": "https://github.com/ibissource/iaf/pull/507", "timeline": [{"oid": "b8b989e576ce7d5dbf386c47bc97b086559c640f", "url": "https://github.com/ibissource/iaf/commit/b8b989e576ce7d5dbf386c47bc97b086559c640f", "message": "Automatically load all configurations in configurations.directory", "committedDate": "2020-03-16T16:31:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ4MzYwOA==", "url": "https://github.com/ibissource/iaf/pull/507#discussion_r393483608", "bodyText": "Waarom twee properties? Je kan toch gewoon kijken of \"configurations.directory\" niet leeg is, en dan gaan laden?", "author": "gvanbrakel", "createdAt": "2020-03-17T07:21:52Z", "path": "core/src/main/java/nl/nn/adapterframework/configuration/ConfigurationUtils.java", "diffHunk": "@@ -429,20 +431,37 @@ public static boolean autoReloadConfig(IbisContext ibisContext, String name, Str\n \n \t/**\n \t * \n-\t * @param ibisContext\n-\t * @return A map with all configurations to load (KEY = configName, VALUE = ClassLoader)\n+\t * @return A map with all configurations to load (KEY = ConfigurationName, VALUE = ClassLoaderType)\n \t */\n \tpublic static Map<String, String> retrieveAllConfigNames(IbisContext ibisContext) {\n-\t\t// For now only database configurations are returned, but also\n-\t\t// configuration from other resources (like file system directories) can\n-\t\t// be added\n \t\tMap<String, String> allConfigNameItems = new LinkedHashMap<String, String>();\n \n \t\tStringTokenizer tokenizer = new StringTokenizer(CONFIGURATIONS, \",\");\n \t\twhile (tokenizer.hasMoreTokens()) {\n \t\t\tallConfigNameItems.put(tokenizer.nextToken(), null);\n \t\t}\n \n+\t\tif (CONFIG_AUTO_FS_CLASSLOADER) {\n+\t\t\ttry {\n+\t\t\t\tString configDir = AppConstants.getInstance().getProperty(\"configurations.directory\");\n+\t\t\t\tif(StringUtils.isEmpty(configDir))\n+\t\t\t\t\tthrow new IOException(\"property [configurations.directory] not set\");", "originalCommit": "b8b989e576ce7d5dbf386c47bc97b086559c640f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b03051f84e3b4521fe1e2e80fbbe354ed9a61cdf", "url": "https://github.com/ibissource/iaf/commit/b03051f84e3b4521fe1e2e80fbbe354ed9a61cdf", "message": "Rename config autoload property", "committedDate": "2020-03-17T10:13:46Z", "type": "commit"}]}