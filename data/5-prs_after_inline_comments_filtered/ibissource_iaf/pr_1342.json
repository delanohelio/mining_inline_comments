{"pr_number": 1342, "pr_title": "FileSystem read using Message", "pr_createdAt": "2020-12-16T08:18:51Z", "pr_url": "https://github.com/ibissource/iaf/pull/1342", "timeline": [{"oid": "26bb6e9b5126370fb00d9d63be22910f8f630b4f", "url": "https://github.com/ibissource/iaf/commit/26bb6e9b5126370fb00d9d63be22910f8f630b4f", "message": "FileSystem read using Message", "committedDate": "2020-12-16T08:18:19Z", "type": "commit"}, {"oid": "f142d3ca46e5dfd46383c67bc9b3800d4bb4e3ae", "url": "https://github.com/ibissource/iaf/commit/f142d3ca46e5dfd46383c67bc9b3800d4bb4e3ae", "message": "Remove unused imports", "committedDate": "2020-12-16T08:30:28Z", "type": "commit"}, {"oid": "88776d11119ee6d1db6f9b949c444ba1f3f63729", "url": "https://github.com/ibissource/iaf/commit/88776d11119ee6d1db6f9b949c444ba1f3f63729", "message": "set CXF logging to warn", "committedDate": "2020-12-16T08:51:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE0NDA0OQ==", "url": "https://github.com/ibissource/iaf/pull/1342#discussion_r544144049", "bodyText": "Ik denk dat het mooier is als je of\n\nPath toevoegt aan Message\nPathvertaald naar eenFileen die meegeeft aanMessage`", "author": "nielsm5", "createdAt": "2020-12-16T09:30:32Z", "path": "core/src/main/java/nl/nn/adapterframework/filesystem/LocalFileSystem.java", "diffHunk": "@@ -114,8 +114,8 @@ public OutputStream appendFile(Path f) throws IOException {\n \t}\n \n \t@Override\n-\tpublic InputStream readFile(Path f) throws IOException {\n-\t\treturn Files.newInputStream(f);\n+\tpublic Message readFile(Path f) throws IOException {\n+\t\treturn new Message(Files.newInputStream(f));", "originalCommit": "88776d11119ee6d1db6f9b949c444ba1f3f63729", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "990880bb61eb5b1c305c0d7a4638453d897b858b", "url": "https://github.com/ibissource/iaf/commit/990880bb61eb5b1c305c0d7a4638453d897b858b", "message": "Add Path to Message", "committedDate": "2020-12-16T10:46:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwMzQxMg==", "url": "https://github.com/ibissource/iaf/pull/1342#discussion_r544203412", "bodyText": "Hier moet je dan eigenlijk asInputStream() gebruiken", "author": "nielsm5", "createdAt": "2020-12-16T10:57:52Z", "path": "core/src/main/java/nl/nn/adapterframework/stream/Message.java", "diffHunk": "@@ -175,6 +184,14 @@ public Reader asReader(String defaultCharset) throws IOException {\n \t\t\t\tthrow new IOException(\"Cannot open file [\"+((File)request).getPath()+\"]\");\n \t\t\t}\n \t\t}\n+\t\tif (request instanceof Path) {\n+\t\t\tlog.debug(\"returning Path as Reader\");\n+\t\t\ttry {\n+\t\t\t\treturn StreamUtil.getCharsetDetectingInputStreamReader(Files.newInputStream((Path)request), readerCharset);", "originalCommit": "990880bb61eb5b1c305c0d7a4638453d897b858b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwMzU5Mg==", "url": "https://github.com/ibissource/iaf/pull/1342#discussion_r544203592", "bodyText": "Geen , e?", "author": "nielsm5", "createdAt": "2020-12-16T10:58:12Z", "path": "core/src/main/java/nl/nn/adapterframework/stream/Message.java", "diffHunk": "@@ -175,6 +184,14 @@ public Reader asReader(String defaultCharset) throws IOException {\n \t\t\t\tthrow new IOException(\"Cannot open file [\"+((File)request).getPath()+\"]\");\n \t\t\t}\n \t\t}\n+\t\tif (request instanceof Path) {\n+\t\t\tlog.debug(\"returning Path as Reader\");\n+\t\t\ttry {\n+\t\t\t\treturn StreamUtil.getCharsetDetectingInputStreamReader(Files.newInputStream((Path)request), readerCharset);\n+\t\t\t} catch (IOException e) {\n+\t\t\t\tthrow new IOException(\"Cannot open file [\"+((Path)request).getFileName()+\"]\");", "originalCommit": "990880bb61eb5b1c305c0d7a4638453d897b858b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwMzcyNA==", "url": "https://github.com/ibissource/iaf/pull/1342#discussion_r544203724", "bodyText": "Geen , e?", "author": "nielsm5", "createdAt": "2020-12-16T10:58:23Z", "path": "core/src/main/java/nl/nn/adapterframework/stream/Message.java", "diffHunk": "@@ -213,6 +230,14 @@ public InputStream asInputStream(String defaultCharset) throws IOException {\n \t\t\t\tthrow new IOException(\"Cannot open file [\"+((File)request).getPath()+\"]\");\n \t\t\t}\n \t\t}\n+\t\tif (request instanceof Path) {\n+\t\t\tlog.debug(\"returning Path as InputStream\");\n+\t\t\ttry {\n+\t\t\t\treturn Files.newInputStream((Path)request);\n+\t\t\t} catch (IOException e) {\n+\t\t\t\tthrow new IOException(\"Cannot open file [\"+((Path)request).getFileName()+\"]\");", "originalCommit": "990880bb61eb5b1c305c0d7a4638453d897b858b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "777aa2fec9db133b12a01bfc4a9437eb6dcef0c4", "url": "https://github.com/ibissource/iaf/commit/777aa2fec9db133b12a01bfc4a9437eb6dcef0c4", "message": "Fix issues", "committedDate": "2020-12-16T12:04:36Z", "type": "commit"}, {"oid": "d19bcb7977bc78e632758338a589fbc64d91302c", "url": "https://github.com/ibissource/iaf/commit/d19bcb7977bc78e632758338a589fbc64d91302c", "message": "Add tests for Messages containing File and Path", "committedDate": "2020-12-16T12:22:14Z", "type": "commit"}]}