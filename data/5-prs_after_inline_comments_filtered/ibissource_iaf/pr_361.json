{"pr_number": 361, "pr_title": "Remove SimpleParameter class, update IbisDoc", "pr_createdAt": "2020-01-15T10:04:39Z", "pr_url": "https://github.com/ibissource/iaf/pull/361", "timeline": [{"oid": "71d491e70ade13e5be8657132e956d754441bdfb", "url": "https://github.com/ibissource/iaf/commit/71d491e70ade13e5be8657132e956d754441bdfb", "message": "Remove SimpleParameter class, update IbisDoc", "committedDate": "2020-01-15T10:04:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQzMzcwOQ==", "url": "https://github.com/ibissource/iaf/pull/361#discussion_r367433709", "bodyText": "Wat een rare naam, is isPoolingEnabled oid niet beter/duidelijker?", "author": "nielsm5", "createdAt": "2020-01-16T14:04:05Z", "path": "core/src/main/java/nl/nn/adapterframework/jdbc/JdbcFacade.java", "diffHunk": "@@ -348,6 +335,7 @@ public boolean isTransacted() {\n \t\treturn transacted;\n \t}\n \n+\t@IbisDoc({\"6\", \"informs the sender that the obtained connection is from a pool\", \"true\"})\n \tpublic boolean isConnectionsArePooled() {", "originalCommit": "71d491e70ade13e5be8657132e956d754441bdfb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQzNDkwMQ==", "url": "https://github.com/ibissource/iaf/pull/361#discussion_r367434901", "bodyText": "Zou hier ook wel een junit test voor willen zien...", "author": "nielsm5", "createdAt": "2020-01-16T14:06:16Z", "path": "core/src/main/java/nl/nn/adapterframework/util/JdbcUtil.java", "diffHunk": "@@ -1116,44 +1117,45 @@ public static Object executeQuery(Connection connection, String query, List<Simp\n \t\t\t\trs.close();\n \t\t\t}\n \t\t} catch (Exception e) {\n-\t\t\tthrow new JdbcException(\"could not obtain value using query [\" + query + \"]\" + displayParameters(simpleParameters), e);\n+\t\t\tthrow new JdbcException(\"could not obtain value using query [\" + query + \"]\" + displayParameters(parameterValues), e);\n \t\t} finally {\n \t\t\tif (stmt != null) {\n \t\t\t\ttry {\n \t\t\t\t\tstmt.close();\n \t\t\t\t} catch (Exception e) {\n-\t\t\t\t\tlog.warn(\"exception closing statement for query [\" + query + \"]\" + displayParameters(simpleParameters), e);\n+\t\t\t\t\tlog.warn(\"exception closing statement for query [\" + query + \"]\" + displayParameters(parameterValues), e);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n \t}\n \t\n-\tprivate static String displayParameters(List<SimpleParameter> simpleParameters) {\n-\t\tif (simpleParameters == null) {\n+\tprivate static String displayParameters(ParameterValueList parameterValues) {\n+\t\tif (parameterValues == null) {\n \t\t\treturn \"\";\n \t\t}\n \t\tStringBuilder sb = new StringBuilder();\n-\t\tint i = 0;\n-\t\tfor (SimpleParameter simpleParameter : simpleParameters) {\n-\t\t\ti++;\n+\t\tfor (int i=0; i<parameterValues.size(); i++) {\n \t\t\tsb.append(\"param\" + i + \" [\");\n-\t\t\tsb.append(simpleParameter.getValue() + \"]\");\n+\t\t\tsb.append(parameterValues.getParameterValue(i).getValue() + \"]\");\n \t\t}\n \t\treturn sb.toString();\n \t}\n \n-\tpublic static void applyParameters(PreparedStatement statement, List<SimpleParameter> simpleParameters) throws SQLException, JdbcException {\n-\t\tif (simpleParameters != null) {\n-\t\t\tint i = 0;\n-\t\t\tfor (SimpleParameter simpleParameter : simpleParameters) {\n-\t\t\t\tapplyParameter(statement, simpleParameter, ++i);\n+\tpublic static void applyParameters(PreparedStatement statement, ParameterValueList parameters) throws SQLException, JdbcException {", "originalCommit": "71d491e70ade13e5be8657132e956d754441bdfb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}