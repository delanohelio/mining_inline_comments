{"pr_number": 1909, "pr_title": "Addition: Bee Armor", "pr_createdAt": "2020-05-14T22:08:23Z", "pr_url": "https://github.com/Slimefun/Slimefun4/pull/1909", "timeline": [{"oid": "f0f134ea72bec2d74e3db9475660a1bc6f8c29c9", "url": "https://github.com/Slimefun/Slimefun4/commit/f0f134ea72bec2d74e3db9475660a1bc6f8c29c9", "message": "Added Bee Armor (and all the things to make it function)", "committedDate": "2020-05-14T20:50:15Z", "type": "commit"}, {"oid": "0d0a4aa578892417efeda3aa1e62597dee8763d8", "url": "https://github.com/Slimefun/Slimefun4/commit/0d0a4aa578892417efeda3aa1e62597dee8763d8", "message": "Fixed some Wildcards (Auto formater messed with it)", "committedDate": "2020-05-14T21:14:27Z", "type": "commit"}, {"oid": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "url": "https://github.com/Slimefun/Slimefun4/commit/865f97d1ba782fff427a6a5ac213210f7bf6f296", "message": "Added some documentation", "committedDate": "2020-05-14T21:35:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1ODk2NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425458965", "bodyText": "Using the PlayerMoveEvent is very risky as it can cause a ton of lag.", "author": "TheBusyBiscuit", "createdAt": "2020-05-14T22:09:15Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.Lists.SlimefunItems;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * When Nearing the ground.\n+ *\n+ * @author beSnow\n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {\n+        plugin.getServer().getPluginManager().registerEvents(this, plugin);\n+    }\n+\n+    @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n+    public void onApproachGround(PlayerMoveEvent e) {", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcwNTAwNg==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425705006", "bodyText": "Yeah, i should have been more concernded about the performance.\nI'm currently looking for an alternative to PlayerMoveEvent.", "author": "beSn0w", "createdAt": "2020-05-15T10:16:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1ODk2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1OTEwNA==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425459104", "bodyText": "Exclusion checks like these should be at the top for performance reasons.", "author": "TheBusyBiscuit", "createdAt": "2020-05-14T22:09:36Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.Lists.SlimefunItems;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * When Nearing the ground.\n+ *\n+ * @author beSnow\n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {\n+        plugin.getServer().getPluginManager().registerEvents(this, plugin);\n+    }\n+\n+    @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n+    public void onApproachGround(PlayerMoveEvent e) {\n+        Player player = e.getPlayer();\n+        ItemStack helmet = e.getPlayer().getInventory().getChestplate();\n+        if (!SlimefunUtils.isItemSimilar(helmet, SlimefunItems.BEE_WINGS, true) && !Slimefun.hasUnlocked(e.getPlayer(), helmet, true)) return;\n+        if (!player.isGliding()) return;\n+        if (getDistanceToGround(player) == 0) return; //More accurate than Entity#isOnGround()", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcwNTA1MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425705050", "bodyText": "A bit folish of me, will fix it.", "author": "beSn0w", "createdAt": "2020-05-15T10:16:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1OTEwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1OTUwMA==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425459500", "bodyText": "Bees/Honey blocks have only been introduced in 1.15. Slimefun however is for 1.13, 1.14 and 1.15. So you will need to do adequate checks to make these version-exclusive...", "author": "TheBusyBiscuit", "createdAt": "2020-05-14T22:10:33Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/ResearchSetup.java", "diffHunk": "@@ -257,6 +257,7 @@ public static void setupResearches() {\n         register(\"kelp_cookie\", 254, \"Tasty Kelp\", 4, SlimefunItems.KELP_COOKIE);\n         register(\"makeshift_smeltery\", 255, \"Improvised Smeltery\", 6, SlimefunItems.MAKESHIFT_SMELTERY);\n         register(\"tree_growth_accelerator\", 256, \"Faster Trees\", 18, SlimefunItems.TREE_GROWTH_ACCELERATOR);\n+        register(\"bee_armor\", 257, \"Bee Armor\", 24, SlimefunItems.BEE_HELMET, SlimefunItems.BEE_WINGS, SlimefunItems.BEE_LEGGINGS, SlimefunItems.BEE_BOOTS);", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1OTU4OQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425459589", "bodyText": "Bees/Honey blocks have only been introduced in 1.15. Slimefun however is for 1.13, 1.14 and 1.15. So you will need to do adequate checks to make these version-exclusive...", "author": "TheBusyBiscuit", "createdAt": "2020-05-14T22:10:46Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/SlimefunItemSetup.java", "diffHunk": "@@ -3352,6 +3352,23 @@ public int getSpeed() {\n \t\tnew WitherAssembler(categories.electricity, SlimefunItems.WITHER_ASSEMBLER, RecipeType.ENHANCED_CRAFTING_TABLE,\n \t\tnew ItemStack[] {SlimefunItems.BLISTERING_INGOT_3, new ItemStack(Material.NETHER_STAR), SlimefunItems.BLISTERING_INGOT_3, SlimefunItems.WITHER_PROOF_OBSIDIAN, SlimefunItems.ANDROID_MEMORY_CORE, SlimefunItems.WITHER_PROOF_OBSIDIAN, SlimefunItems.ELECTRIC_MOTOR, SlimefunItems.REINFORCED_ALLOY_INGOT, SlimefunItems.CARBONADO_EDGED_CAPACITOR})\n \t\t.register(plugin);\n+\n+        new SlimefunItem(categories.magicalArmor, SlimefunItems.BEE_HELMET, RecipeType.ARMOR_FORGE,\n+        new ItemStack[]{SlimefunItems.GOLD_8K, new ItemStack(Material.HONEY_BLOCK), SlimefunItems.GOLD_8K, new ItemStack(Material.HONEYCOMB_BLOCK), null, new ItemStack(Material.HONEYCOMB_BLOCK), null, null, null})\n+        .register(plugin);\n+\n+        new SlimefunItem(categories.magicalArmor, SlimefunItems.BEE_WINGS, RecipeType.ARMOR_FORGE,\n+        new ItemStack[]{SlimefunItems.GOLD_8K, null, SlimefunItems.GOLD_8K, new ItemStack(Material.HONEYCOMB_BLOCK), new ItemStack(Material.ELYTRA), new ItemStack(Material.HONEYCOMB_BLOCK), new ItemStack(Material.HONEY_BLOCK), SlimefunItems.GOLD_8K, new ItemStack(Material.HONEY_BLOCK)})\n+        .register(plugin);\n+\n+        new SlimefunItem(categories.magicalArmor, SlimefunItems.BEE_LEGGINGS, RecipeType.ARMOR_FORGE,\n+        new ItemStack[]{SlimefunItems.GOLD_8K, new ItemStack(Material.HONEY_BLOCK), SlimefunItems.GOLD_8K, new ItemStack(Material.HONEYCOMB_BLOCK), null, new ItemStack(Material.HONEYCOMB_BLOCK), new ItemStack(Material.HONEYCOMB_BLOCK), null, new ItemStack(Material.HONEYCOMB_BLOCK)})\n+        .register(plugin);\n+\n+        new SlimefunArmorPiece(categories.magicalArmor, SlimefunItems.BEE_BOOTS, RecipeType.ARMOR_FORGE,\n+        new ItemStack[]{null, null, null, SlimefunItems.GOLD_8K, null, SlimefunItems.GOLD_8K, new ItemStack(Material.HONEY_BLOCK), null, new ItemStack(Material.HONEY_BLOCK)},\n+        new PotionEffect[]{new PotionEffect(PotionEffectType.JUMP, 300, 2)})\n+        .register(plugin);", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcwNTQ0Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425705447", "bodyText": "Fixed and tested with my latest commit.", "author": "beSn0w", "createdAt": "2020-05-15T10:17:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1OTU4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1OTk2NA==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425459964", "bodyText": "Bees/Honey blocks have only been introduced in 1.15. Slimefun however is for 1.13, 1.14 and 1.15. So you will need to do adequate checks to make these version-exclusive...", "author": "TheBusyBiscuit", "createdAt": "2020-05-14T22:11:54Z", "path": "src/main/java/me/mrCookieSlime/Slimefun/SlimefunPlugin.java", "diffHunk": "@@ -237,6 +238,7 @@ else if (getServer().getPluginManager().isPluginEnabled(\"CS-CoreLib\")) {\n             new FireworksListener(this);\n             new WitherListener(this);\n             new IronGolemListener(this);\n+            new BeeWingListener(this);", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2MDE5Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425460192", "bodyText": "You added a new research but didnt update the language files...", "author": "TheBusyBiscuit", "createdAt": "2020-05-14T22:12:35Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/ResearchSetup.java", "diffHunk": "@@ -257,6 +257,7 @@ public static void setupResearches() {\n         register(\"kelp_cookie\", 254, \"Tasty Kelp\", 4, SlimefunItems.KELP_COOKIE);\n         register(\"makeshift_smeltery\", 255, \"Improvised Smeltery\", 6, SlimefunItems.MAKESHIFT_SMELTERY);\n         register(\"tree_growth_accelerator\", 256, \"Faster Trees\", 18, SlimefunItems.TREE_GROWTH_ACCELERATOR);\n+        register(\"bee_armor\", 257, \"Bee Armor\", 24, SlimefunItems.BEE_HELMET, SlimefunItems.BEE_WINGS, SlimefunItems.BEE_LEGGINGS, SlimefunItems.BEE_BOOTS);", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2MDA1MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425460051", "bodyText": "This is ran on every little movement, it can run hundreds or thousands of times a second. Doing an item lookup EACH time is gonna REALLY hurt performance. You should do a ton of checks before ANYTHING to make sure this is exactly what you want!", "author": "WalshyDev", "createdAt": "2020-05-14T22:12:08Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.Lists.SlimefunItems;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * When Nearing the ground.\n+ *\n+ * @author beSnow\n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {\n+        plugin.getServer().getPluginManager().registerEvents(this, plugin);\n+    }\n+\n+    @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n+    public void onApproachGround(PlayerMoveEvent e) {", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2MDYwOA==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425460608", "bodyText": "You should use the heightmaps (getHighestBlockAt, getHighestBlockYAt) which would be much more efficient.", "author": "WalshyDev", "createdAt": "2020-05-14T22:13:36Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.Lists.SlimefunItems;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * When Nearing the ground.\n+ *\n+ * @author beSnow\n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {\n+        plugin.getServer().getPluginManager().registerEvents(this, plugin);\n+    }\n+\n+    @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n+    public void onApproachGround(PlayerMoveEvent e) {\n+        Player player = e.getPlayer();\n+        ItemStack helmet = e.getPlayer().getInventory().getChestplate();\n+        if (!SlimefunUtils.isItemSimilar(helmet, SlimefunItems.BEE_WINGS, true) && !Slimefun.hasUnlocked(e.getPlayer(), helmet, true)) return;\n+        if (!player.isGliding()) return;\n+        if (getDistanceToGround(player) == 0) return; //More accurate than Entity#isOnGround()\n+\n+        if (getDistanceToGround(player) <= 6)\n+            player.addPotionEffect(new PotionEffect(PotionEffectType.SLOW_FALLING, 30, 0));\n+    }\n+\n+    private static int getDistanceToGround(Entity e) {", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcwODcyNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425708725", "bodyText": "Looking into it, good suggestion.", "author": "beSn0w", "createdAt": "2020-05-15T10:23:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2MDYwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2MTU2Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425461567", "bodyText": "Should probably just revert all this. It makes no real change but now imports are quite unorganised", "author": "WalshyDev", "createdAt": "2020-05-14T22:16:07Z", "path": "src/main/java/me/mrCookieSlime/Slimefun/SlimefunPlugin.java", "diffHunk": "@@ -9,6 +9,38 @@\n import java.util.logging.Level;\n import java.util.stream.Collectors;\n \n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.AncientAltarListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.BackpackListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.BlockListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.BlockPhysicsListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.CargoNodeListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.CoolerListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.DeathpointListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.DebugFishListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.DispenserListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.EnhancedFurnaceListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.ExplosionsListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.FireworksListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.GadgetsListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.GrapplingHookListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.IronGolemListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.ItemPickupListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.MobDropListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.MultiBlockListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.PlayerProfileListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.SeismicAxeListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.SlimefunBootsListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.SlimefunBowListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.SlimefunGuideListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.SlimefunItemConsumeListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.SlimefunItemListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.SoulboundListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.TalismanListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.VampireBladeListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.VanillaMachinesListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.WitherListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.WorldListener;\n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.BeeWingListener;", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcwOTM1MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425709351", "bodyText": "Fixed. I don't know why my auto formater even puts stuff in Wildcards, I'll have to see if i can turn that off.", "author": "beSn0w", "createdAt": "2020-05-15T10:24:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2MTU2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2MTc5Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425461797", "bodyText": "Also you shouldn't ignore cancelled. There's really no point.", "author": "WalshyDev", "createdAt": "2020-05-14T22:16:48Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.Lists.SlimefunItems;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * When Nearing the ground.\n+ *\n+ * @author beSnow\n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {\n+        plugin.getServer().getPluginManager().registerEvents(this, plugin);\n+    }\n+\n+    @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)", "originalCommit": "865f97d1ba782fff427a6a5ac213210f7bf6f296", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d88c81500525bf4f146a5d1723bd15b4fae3d28b", "url": "https://github.com/Slimefun/Slimefun4/commit/d88c81500525bf4f146a5d1723bd15b4fae3d28b", "message": "Fixed Mincraft Version Compatibility and some IDE weirdness", "committedDate": "2020-05-15T09:22:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5MTM4Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425791387", "bodyText": "These items actually don't use any 1.15 Materials, so there isn't really much of a point in initializing them conditionally here. It's fine for these items to exist on 1.13/1.14 since you already handle that in SlimefunItemSetup", "author": "TheBusyBiscuit", "createdAt": "2020-05-15T13:12:18Z", "path": "src/main/java/me/mrCookieSlime/Slimefun/Lists/SlimefunItems.java", "diffHunk": "@@ -267,6 +266,35 @@ private SlimefunItems() {}\n \n     public static final SlimefunItemStack BOOTS_OF_THE_STOMPER = new SlimefunItemStack(\"BOOTS_OF_THE_STOMPER\", Material.LEATHER_BOOTS, Color.AQUA, \"&bBoots of the Stomper\", \"\", \"&9All Fall Damage you receive\", \"&9will be applied to nearby Mobs/Players\", \"\", \"&9+ No Fall Damage\");\n \n+    public static final SlimefunItemStack BEE_HELMET;\n+    public static final SlimefunItemStack BEE_WINGS;\n+    public static final SlimefunItemStack BEE_LEGGINGS;\n+    public static final SlimefunItemStack BEE_BOOTS;\n+\n+static {\n+\n+    if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_15)) {", "originalCommit": "d88c81500525bf4f146a5d1723bd15b4fae3d28b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg5OTg4NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425899885", "bodyText": "Good point, I'll just go ahead and replace the recipe with something else for the versions below 1.15.X", "author": "beSn0w", "createdAt": "2020-05-15T16:03:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5MTM4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkwMjEyNw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425902127", "bodyText": "nononononononoononnoonoononono.\nThe way you handled it in SlimefunItemSetup was totally correct.\nIt's just redundant at this spot since you have already done it in SlimefunItemSetup.\nDo not introduce alternate recipes because that will just be a total mess and frankly, having bee armor prior to 1.15 doesn't really make much sense anyway.", "author": "TheBusyBiscuit", "createdAt": "2020-05-15T16:07:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5MTM4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkwNTYwNw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425905607", "bodyText": "Ah, I understand. Its indeed a bit wierd to have bee themed armor in a version without bees.", "author": "beSn0w", "createdAt": "2020-05-15T16:13:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5MTM4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5MTU4NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425791585", "bodyText": "Please do not use wildcard imports.", "author": "TheBusyBiscuit", "createdAt": "2020-05-15T13:12:35Z", "path": "src/main/java/me/mrCookieSlime/Slimefun/SlimefunPlugin.java", "diffHunk": "@@ -9,6 +9,7 @@\n import java.util.logging.Level;\n import java.util.stream.Collectors;\n \n+import io.github.thebusybiscuit.slimefun4.implementation.listeners.*;", "originalCommit": "d88c81500525bf4f146a5d1723bd15b4fae3d28b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg5OTQ0OQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r425899449", "bodyText": "I thought I fixed that, I must have accidentally used the auto formater.\nFixed in my latest Commit.", "author": "beSn0w", "createdAt": "2020-05-15T16:02:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5MTU4NQ=="}], "type": "inlineReview"}, {"oid": "f0dbe746c6caf476401f2b657f70789dc1dfb0b7", "url": "https://github.com/Slimefun/Slimefun4/commit/f0dbe746c6caf476401f2b657f70789dc1dfb0b7", "message": "Fixed the Wildcard", "committedDate": "2020-05-15T15:51:08Z", "type": "commit"}, {"oid": "ba886d275d9ff3ed964e1e2a3e0dcde197fba5dc", "url": "https://github.com/Slimefun/Slimefun4/commit/ba886d275d9ff3ed964e1e2a3e0dcde197fba5dc", "message": "Added the research text to the researches_en Language file", "committedDate": "2020-05-15T16:01:40Z", "type": "commit"}, {"oid": "6311f6ec2e4975d9583f8697db763ca819836020", "url": "https://github.com/Slimefun/Slimefun4/commit/6311f6ec2e4975d9583f8697db763ca819836020", "message": "Fixed some redundancies", "committedDate": "2020-05-15T16:18:07Z", "type": "commit"}, {"oid": "84bce963b9b8480d0657fd8e75fad93c0d3eedbc", "url": "https://github.com/Slimefun/Slimefun4/commit/84bce963b9b8480d0657fd8e75fad93c0d3eedbc", "message": "Added Bee Armor to researches_en.", "committedDate": "2020-05-15T21:49:59Z", "type": "commit"}, {"oid": "733599691a29c5dab8bbb6bfff582d8099c05fe4", "url": "https://github.com/Slimefun/Slimefun4/commit/733599691a29c5dab8bbb6bfff582d8099c05fe4", "message": "Changed some stuff in BeeWingListener, Should be more performance friendly now.", "committedDate": "2020-05-15T21:50:41Z", "type": "commit"}, {"oid": "12b32b085672838faec437a1551b3231140545bf", "url": "https://github.com/Slimefun/Slimefun4/commit/12b32b085672838faec437a1551b3231140545bf", "message": "Merge remote-tracking branch 'upstream/master' into pr/1909", "committedDate": "2020-09-12T10:27:24Z", "type": "commit"}, {"oid": "5112fd25fa2d2fcfade69178de9152573c5aadc1", "url": "https://github.com/Slimefun/Slimefun4/commit/5112fd25fa2d2fcfade69178de9152573c5aadc1", "message": "Fixed merge conflicts", "committedDate": "2020-09-12T11:02:12Z", "type": "commit"}, {"oid": "35e0d44b0b93b1d643c949bd2b42ab9cadeb12ca", "url": "https://github.com/Slimefun/Slimefun4/commit/35e0d44b0b93b1d643c949bd2b42ab9cadeb12ca", "message": "Some refactoring and added a material check.", "committedDate": "2020-09-12T14:21:03Z", "type": "commit"}, {"oid": "cff18a32df5aee7fccf42214ba335aa75b352d06", "url": "https://github.com/Slimefun/Slimefun4/commit/cff18a32df5aee7fccf42214ba335aa75b352d06", "message": "Fixed missing import.", "committedDate": "2020-09-12T14:34:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxMjgyMg==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r487512822", "bodyText": "} and else on seperate lines please.", "author": "TheBusyBiscuit", "createdAt": "2020-09-13T10:42:53Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/SlimefunPlugin.java", "diffHunk": "@@ -219,8 +220,7 @@ else if (getServer().getPluginManager().isPluginEnabled(\"CS-CoreLib\")) {\n             if (config.getBoolean(\"options.auto-update\")) {\n                 getLogger().log(Level.INFO, \"Starting Auto-Updater...\");\n                 updaterService.start();\n-            }\n-            else {\n+            } else {", "originalCommit": "cff18a32df5aee7fccf42214ba335aa75b352d06", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxMjkwMw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r487512903", "bodyText": "I was gonna point out the irresponsibly chosen name, should have rather been \"beeArmorEnchantments\".\nBut then I realized the above armorsets use the exact same pattern ._.", "author": "TheBusyBiscuit", "createdAt": "2020-09-13T10:43:46Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/SlimefunItems.java", "diffHunk": "@@ -350,6 +355,15 @@ private SlimefunItems() {}\n         SLIME_CHESTPLATE_STEEL.addUnsafeEnchantments(slime);\n         SLIME_LEGGINGS_STEEL.addUnsafeEnchantments(slime);\n         SLIME_BOOTS_STEEL.addUnsafeEnchantments(slime);\n+\n+        Map<Enchantment, Integer> bee = new HashMap<>();", "originalCommit": "cff18a32df5aee7fccf42214ba335aa75b352d06", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxMzA2NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r487513065", "bodyText": "This check is pretty redundant since the material check is one of the first lines in SlimefunUtils.isItemSimilar anyway. So this adds no real benefit to it, neither readability, efficiency nor performance.", "author": "TheBusyBiscuit", "createdAt": "2020-09-13T10:45:20Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import org.bukkit.HeightMap;\n+import org.bukkit.Location;\n+import org.bukkit.Material;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunItems;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * when nearing the ground while using the Bee Wings.\n+ *\n+ * @author beSnow\n+ * \n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {\n+        plugin.getServer().getPluginManager().registerEvents(this, plugin);\n+    }\n+\n+    @EventHandler(priority = EventPriority.LOWEST)\n+    public void onApproachGround(PlayerMoveEvent e) {\n+        Player player = e.getPlayer();\n+        \n+        if (!player.isGliding()) return;\n+        if (player.isOnGround()) return;\n+        \n+        ItemStack chestplate = player.getInventory().getChestplate();\n+        if (chestplate.getType() != Material.ELYTRA) return;", "originalCommit": "cff18a32df5aee7fccf42214ba335aa75b352d06", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxMzE4Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r487513187", "bodyText": "Wrong indentation", "author": "TheBusyBiscuit", "createdAt": "2020-09-13T10:46:12Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/SlimefunItemSetup.java", "diffHunk": "@@ -3047,19 +3047,38 @@ public int getSpeed() {\n         new WitherAssembler(categories.electricity, SlimefunItems.WITHER_ASSEMBLER, RecipeType.ENHANCED_CRAFTING_TABLE,\n         new ItemStack[] {SlimefunItems.BLISTERING_INGOT_3, new ItemStack(Material.NETHER_STAR), SlimefunItems.BLISTERING_INGOT_3, SlimefunItems.WITHER_PROOF_OBSIDIAN, SlimefunItems.ANDROID_MEMORY_CORE, SlimefunItems.WITHER_PROOF_OBSIDIAN, SlimefunItems.ELECTRIC_MOTOR, SlimefunItems.REINFORCED_ALLOY_INGOT, SlimefunItems.CARBONADO_EDGED_CAPACITOR})\n         .register(plugin);\n-        \n+\n         if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_14)) {\n             new TapeMeasure(categories.usefulItems, SlimefunItems.TAPE_MEASURE, RecipeType.ENHANCED_CRAFTING_TABLE,\n             new ItemStack[] {SlimefunItems.SILICON, new ItemStack(Material.YELLOW_DYE), SlimefunItems.SILICON, new ItemStack(Material.YELLOW_DYE), new ItemStack(Material.STRING), new ItemStack(Material.YELLOW_DYE), SlimefunItems.GILDED_IRON, new ItemStack(Material.YELLOW_DYE), SlimefunItems.SILICON})\n             .register(plugin);\n         }\n-      \n+\n+        if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_15)) {\n+    \t\t\t  new SlimefunItem(categories.magicalArmor, SlimefunItems.BEE_HELMET, RecipeType.ARMOR_FORGE,\n+    \t\t\t  new ItemStack[]{SlimefunItems.GOLD_8K, new ItemStack(Material.HONEY_BLOCK), SlimefunItems.GOLD_8K, new ItemStack(Material.HONEYCOMB_BLOCK), null, new ItemStack(Material.HONEYCOMB_BLOCK), null, null, null})\n+    \t\t\t  .register(plugin);\n+\n+    \t\t\t  new SlimefunItem(categories.magicalArmor, SlimefunItems.BEE_WINGS, RecipeType.ARMOR_FORGE,\n+    \t\t\t  new ItemStack[]{SlimefunItems.GOLD_8K, null, SlimefunItems.GOLD_8K, new ItemStack(Material.HONEYCOMB_BLOCK), new ItemStack(Material.ELYTRA), new ItemStack(Material.HONEYCOMB_BLOCK), new ItemStack(Material.HONEY_BLOCK), SlimefunItems.GOLD_8K, new ItemStack(Material.HONEY_BLOCK)})\n+    \t\t\t  .register(plugin);\n+\n+    \t\t\t  new SlimefunItem(categories.magicalArmor, SlimefunItems.BEE_LEGGINGS, RecipeType.ARMOR_FORGE,\n+    \t\t\t  new ItemStack[]{SlimefunItems.GOLD_8K, new ItemStack(Material.HONEY_BLOCK), SlimefunItems.GOLD_8K, new ItemStack(Material.HONEYCOMB_BLOCK), null, new ItemStack(Material.HONEYCOMB_BLOCK), new ItemStack(Material.HONEYCOMB_BLOCK), null, new ItemStack(Material.HONEYCOMB_BLOCK)})\n+    \t\t\t  .register(plugin);\n+\n+    \t\t\t  new SlimefunArmorPiece(categories.magicalArmor, SlimefunItems.BEE_BOOTS, RecipeType.ARMOR_FORGE,\n+    \t\t\t  new ItemStack[]{null, null, null, SlimefunItems.GOLD_8K, null, SlimefunItems.GOLD_8K, new ItemStack(Material.HONEY_BLOCK), null, new ItemStack(Material.HONEY_BLOCK)},\n+    \t\t\t  new PotionEffect[]{new PotionEffect(PotionEffectType.JUMP, 300, 2)})\n+    \t\t\t  .register(plugin);\n+    \t\t}", "originalCommit": "cff18a32df5aee7fccf42214ba335aa75b352d06", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8a91cdbfc2947c3b7a99977fe73326ca2ade59f8", "url": "https://github.com/Slimefun/Slimefun4/commit/8a91cdbfc2947c3b7a99977fe73326ca2ade59f8", "message": "Code formatting.", "committedDate": "2020-09-13T20:32:32Z", "type": "commit"}, {"oid": "4414b3f29b074e7ca4a039e0ccd1450a448e187a", "url": "https://github.com/Slimefun/Slimefun4/commit/4414b3f29b074e7ca4a039e0ccd1450a448e187a", "message": "Fixed indentation.", "committedDate": "2020-09-13T20:35:14Z", "type": "commit"}, {"oid": "2c0c298dfc0113c75e42daa8eebf88e3f95b52dd", "url": "https://github.com/Slimefun/Slimefun4/commit/2c0c298dfc0113c75e42daa8eebf88e3f95b52dd", "message": "Did a requested change.", "committedDate": "2020-09-13T20:36:20Z", "type": "commit"}, {"oid": "45da395418e7caa816dffdd468e03196ee6fa8ef", "url": "https://github.com/Slimefun/Slimefun4/commit/45da395418e7caa816dffdd468e03196ee6fa8ef", "message": "Did a requested change.", "committedDate": "2020-09-13T20:41:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg1OTQ1NA==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r488859454", "bodyText": "Also since we now enforce these: Nonnull please", "author": "TheBusyBiscuit", "createdAt": "2020-09-15T17:56:25Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import org.bukkit.HeightMap;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunItems;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * when nearing the ground while using the Bee Wings.\n+ *\n+ * @author beSnow\n+ * \n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {", "originalCommit": "45da395418e7caa816dffdd468e03196ee6fa8ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg1OTY2Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r488859667", "bodyText": "@LinoxGH You can pretty much add yourself as an author here below too at this point.", "author": "TheBusyBiscuit", "createdAt": "2020-09-15T17:56:47Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import org.bukkit.HeightMap;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunItems;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * when nearing the ground while using the Bee Wings.\n+ *\n+ * @author beSnow\n+ * ", "originalCommit": "45da395418e7caa816dffdd468e03196ee6fa8ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg1OTc5Mw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r488859793", "bodyText": "Nonnull and documentation please.", "author": "TheBusyBiscuit", "createdAt": "2020-09-15T17:57:00Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import org.bukkit.HeightMap;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunItems;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * when nearing the ground while using the Bee Wings.\n+ *\n+ * @author beSnow\n+ * \n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {\n+        plugin.getServer().getPluginManager().registerEvents(this, plugin);\n+    }\n+\n+    @EventHandler(priority = EventPriority.LOWEST)\n+    public void onApproachGround(PlayerMoveEvent e) {\n+        Player player = e.getPlayer();\n+        \n+        if (!player.isGliding()) return;\n+        if (player.isOnGround()) return;\n+        \n+        ItemStack chestplate = player.getInventory().getChestplate();\n+        if (!SlimefunUtils.isItemSimilar(chestplate, SlimefunItems.BEE_WINGS, true) && !Slimefun.hasUnlocked(player, chestplate, true)) {\n+            return;\n+        }\n+\n+        double playerDistanceToHighestBlock = (player.getLocation().getY() - player.getWorld().getHighestBlockYAt(player.getLocation(), HeightMap.WORLD_SURFACE));\n+\n+        // getDistanceToGround will only fire when playerDistanceToHighestBlock is negative (which happens when a player is flying under an existing structure)\n+        if (playerDistanceToHighestBlock < 0) {\n+            if (getDistanceToGround(player) > 6) return;\n+            player.addPotionEffect(new PotionEffect(PotionEffectType.SLOW_FALLING, 40, 0));\n+            return;\n+        }\n+\n+        if (playerDistanceToHighestBlock <= 6) {\n+            player.addPotionEffect(new PotionEffect(PotionEffectType.SLOW_FALLING, 40, 0));\n+        }\n+    }\n+\n+    private static int getDistanceToGround(Entity e) {", "originalCommit": "45da395418e7caa816dffdd468e03196ee6fa8ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2MDExNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r488860115", "bodyText": "This should rather be an int since you only decrement by whole numbers anyway", "author": "TheBusyBiscuit", "createdAt": "2020-09-15T17:57:39Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import org.bukkit.HeightMap;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunItems;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * when nearing the ground while using the Bee Wings.\n+ *\n+ * @author beSnow\n+ * \n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {\n+        plugin.getServer().getPluginManager().registerEvents(this, plugin);\n+    }\n+\n+    @EventHandler(priority = EventPriority.LOWEST)\n+    public void onApproachGround(PlayerMoveEvent e) {\n+        Player player = e.getPlayer();\n+        \n+        if (!player.isGliding()) return;\n+        if (player.isOnGround()) return;\n+        \n+        ItemStack chestplate = player.getInventory().getChestplate();\n+        if (!SlimefunUtils.isItemSimilar(chestplate, SlimefunItems.BEE_WINGS, true) && !Slimefun.hasUnlocked(player, chestplate, true)) {\n+            return;\n+        }\n+\n+        double playerDistanceToHighestBlock = (player.getLocation().getY() - player.getWorld().getHighestBlockYAt(player.getLocation(), HeightMap.WORLD_SURFACE));\n+\n+        // getDistanceToGround will only fire when playerDistanceToHighestBlock is negative (which happens when a player is flying under an existing structure)\n+        if (playerDistanceToHighestBlock < 0) {\n+            if (getDistanceToGround(player) > 6) return;\n+            player.addPotionEffect(new PotionEffect(PotionEffectType.SLOW_FALLING, 40, 0));\n+            return;\n+        }\n+\n+        if (playerDistanceToHighestBlock <= 6) {\n+            player.addPotionEffect(new PotionEffect(PotionEffectType.SLOW_FALLING, 40, 0));\n+        }\n+    }\n+\n+    private static int getDistanceToGround(Entity e) {\n+        Location loc = e.getLocation().clone();\n+        double y = loc.getBlockY();\n+        int distance = 0;\n+        for (double i = y; i >= 0; i--) {", "originalCommit": "45da395418e7caa816dffdd468e03196ee6fa8ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2MDQzNg==", "url": "https://github.com/Slimefun/Slimefun4/pull/1909#discussion_r488860436", "bodyText": "Not really any need for this distance variable here, it is a bit redundant. You can just return y - (the new loc y)", "author": "TheBusyBiscuit", "createdAt": "2020-09-15T17:58:13Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BeeWingListener.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.listeners;\n+\n+import org.bukkit.HeightMap;\n+import org.bukkit.Location;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.EventPriority;\n+import org.bukkit.event.Listener;\n+import org.bukkit.event.player.PlayerMoveEvent;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunItems;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import io.github.thebusybiscuit.slimefun4.utils.SlimefunUtils;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+\n+/**\n+ * This {@link Listener} is responsible for the slow falling effect given to the player\n+ * when nearing the ground while using the Bee Wings.\n+ *\n+ * @author beSnow\n+ * \n+ */\n+public class BeeWingListener implements Listener {\n+\n+    public BeeWingListener(SlimefunPlugin plugin) {\n+        plugin.getServer().getPluginManager().registerEvents(this, plugin);\n+    }\n+\n+    @EventHandler(priority = EventPriority.LOWEST)\n+    public void onApproachGround(PlayerMoveEvent e) {\n+        Player player = e.getPlayer();\n+        \n+        if (!player.isGliding()) return;\n+        if (player.isOnGround()) return;\n+        \n+        ItemStack chestplate = player.getInventory().getChestplate();\n+        if (!SlimefunUtils.isItemSimilar(chestplate, SlimefunItems.BEE_WINGS, true) && !Slimefun.hasUnlocked(player, chestplate, true)) {\n+            return;\n+        }\n+\n+        double playerDistanceToHighestBlock = (player.getLocation().getY() - player.getWorld().getHighestBlockYAt(player.getLocation(), HeightMap.WORLD_SURFACE));\n+\n+        // getDistanceToGround will only fire when playerDistanceToHighestBlock is negative (which happens when a player is flying under an existing structure)\n+        if (playerDistanceToHighestBlock < 0) {\n+            if (getDistanceToGround(player) > 6) return;\n+            player.addPotionEffect(new PotionEffect(PotionEffectType.SLOW_FALLING, 40, 0));\n+            return;\n+        }\n+\n+        if (playerDistanceToHighestBlock <= 6) {\n+            player.addPotionEffect(new PotionEffect(PotionEffectType.SLOW_FALLING, 40, 0));\n+        }\n+    }\n+\n+    private static int getDistanceToGround(Entity e) {\n+        Location loc = e.getLocation().clone();\n+        double y = loc.getBlockY();\n+        int distance = 0;\n+        for (double i = y; i >= 0; i--) {\n+            loc.setY(i);\n+            if (loc.getBlock().getType().isSolid()) break;\n+            distance++;\n+        }\n+        return distance;", "originalCommit": "45da395418e7caa816dffdd468e03196ee6fa8ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ad1bfc052ca06a247ef671272e1b963cd8782456", "url": "https://github.com/Slimefun/Slimefun4/commit/ad1bfc052ca06a247ef671272e1b963cd8782456", "message": "Refactoring, requested changes and lots of improvement.", "committedDate": "2020-09-16T18:16:47Z", "type": "commit"}, {"oid": "d40b6199e962e970c1f32d4413080f804b1ed5d6", "url": "https://github.com/Slimefun/Slimefun4/commit/d40b6199e962e970c1f32d4413080f804b1ed5d6", "message": "Shhh noone needs to know about this.", "committedDate": "2020-09-16T18:25:04Z", "type": "commit"}, {"oid": "2bad759178f9a2c189055657ac06dc7a1ba74654", "url": "https://github.com/Slimefun/Slimefun4/commit/2bad759178f9a2c189055657ac06dc7a1ba74654", "message": "Fixed a little issue.", "committedDate": "2020-09-16T18:54:23Z", "type": "commit"}, {"oid": "a63f3eb8863d30483747dd4887782f0fb9e8d04f", "url": "https://github.com/Slimefun/Slimefun4/commit/a63f3eb8863d30483747dd4887782f0fb9e8d04f", "message": "Some refactoring and optimizations.", "committedDate": "2020-09-17T12:16:24Z", "type": "commit"}, {"oid": "cf5a6e0cca1b264ede5f48989455b02c45dd8db5", "url": "https://github.com/Slimefun/Slimefun4/commit/cf5a6e0cca1b264ede5f48989455b02c45dd8db5", "message": "Oops forgot an import.", "committedDate": "2020-09-17T12:17:53Z", "type": "commit"}, {"oid": "d4c26f20f08d383f19d965099cb9a527e4491e97", "url": "https://github.com/Slimefun/Slimefun4/commit/d4c26f20f08d383f19d965099cb9a527e4491e97", "message": "Merge branch 'master' into beeArmor", "committedDate": "2020-09-21T13:59:56Z", "type": "commit"}, {"oid": "6347e2f6ca4168c34888cda743d454d8301d319a", "url": "https://github.com/Slimefun/Slimefun4/commit/6347e2f6ca4168c34888cda743d454d8301d319a", "message": "Merge branch 'master' into beeArmor", "committedDate": "2020-10-04T05:48:05Z", "type": "commit"}, {"oid": "08ed8b21c89fb8e05f5802dcd112947951b66e80", "url": "https://github.com/Slimefun/Slimefun4/commit/08ed8b21c89fb8e05f5802dcd112947951b66e80", "message": "Merge branch 'bee-armor' into beeArmor", "committedDate": "2020-10-07T20:14:39Z", "type": "commit"}]}