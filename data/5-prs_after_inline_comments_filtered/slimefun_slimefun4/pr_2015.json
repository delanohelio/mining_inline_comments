{"pr_number": 2015, "pr_title": "Added Magic Pills. The Edited Version", "pr_createdAt": "2020-06-23T18:23:56Z", "pr_url": "https://github.com/Slimefun/Slimefun4/pull/2015", "timeline": [{"oid": "9205b143ede29c2c0a958f26441ff91130802dd2", "url": "https://github.com/Slimefun/Slimefun4/commit/9205b143ede29c2c0a958f26441ff91130802dd2", "message": "Added Magic Pills.\n\nAdded Magic Pills which are used to cure zombie villagers.\nApproved suggestion #178", "committedDate": "2020-06-23T18:11:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNDY2MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444524661", "bodyText": "I think we should include the Entity rather than the Event as the parameter for simplicity.", "author": "TheBusyBiscuit", "createdAt": "2020-06-23T21:40:55Z", "path": "src/main/java/me/mrCookieSlime/Slimefun/Objects/handlers/EntityInteractHandler.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package me.mrCookieSlime.Slimefun.Objects.handlers;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.player.PlayerInteractAtEntityEvent;\n+import org.bukkit.inventory.ItemStack;\n+\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SimpleSlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+\n+/**\n+ * This is triggered when a {@link Player} interacts with an {@link Entity}.\n+ *\n+ * @author Linox\n+ *\n+ * @see ItemHandler\n+ * @see SimpleSlimefunItem\n+ *\n+ */\n+@FunctionalInterface\n+public interface EntityInteractHandler extends ItemHandler {\n+\n+    /**\n+     * This function is triggered when a {@link Player} right clicks with the assigned {@link SlimefunItem}\n+     * in his hand.\n+     *\n+     * @param e\n+     *            The {@link PlayerInteractAtEntityEvent} that was triggered\n+     */\n+    void onInteract(PlayerInteractAtEntityEvent e, ItemStack item);", "originalCommit": "9205b143ede29c2c0a958f26441ff91130802dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNDY3NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444524675", "bodyText": "Missing @param for the ItemStack", "author": "TheBusyBiscuit", "createdAt": "2020-06-23T21:40:58Z", "path": "src/main/java/me/mrCookieSlime/Slimefun/Objects/handlers/EntityInteractHandler.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package me.mrCookieSlime.Slimefun.Objects.handlers;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.player.PlayerInteractAtEntityEvent;\n+import org.bukkit.inventory.ItemStack;\n+\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SimpleSlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+\n+/**\n+ * This is triggered when a {@link Player} interacts with an {@link Entity}.\n+ *\n+ * @author Linox\n+ *\n+ * @see ItemHandler\n+ * @see SimpleSlimefunItem\n+ *\n+ */\n+@FunctionalInterface\n+public interface EntityInteractHandler extends ItemHandler {\n+\n+    /**\n+     * This function is triggered when a {@link Player} right clicks with the assigned {@link SlimefunItem}\n+     * in his hand.\n+     *\n+     * @param e\n+     *            The {@link PlayerInteractAtEntityEvent} that was triggered", "originalCommit": "9205b143ede29c2c0a958f26441ff91130802dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNDgzMA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444524830", "bodyText": "Should probably mention the PlayerInteractAtEntityEvent in the description too.", "author": "TheBusyBiscuit", "createdAt": "2020-06-23T21:41:23Z", "path": "src/main/java/me/mrCookieSlime/Slimefun/Objects/handlers/EntityInteractHandler.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package me.mrCookieSlime.Slimefun.Objects.handlers;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.player.PlayerInteractAtEntityEvent;\n+import org.bukkit.inventory.ItemStack;\n+\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SimpleSlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+\n+/**\n+ * This is triggered when a {@link Player} interacts with an {@link Entity}.", "originalCommit": "9205b143ede29c2c0a958f26441ff91130802dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNTI4Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444525282", "bodyText": "Why is this 1.14 only?", "author": "TheBusyBiscuit", "createdAt": "2020-06-23T21:42:20Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/SlimefunItemSetup.java", "diffHunk": "@@ -775,6 +779,17 @@ public static void setup(SlimefunPlugin plugin) {\n \t\t    .register(plugin);\n \t\t}\n \n+\t\tif (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_14)) {", "originalCommit": "9205b143ede29c2c0a958f26441ff91130802dd2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUzMzM0OA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444533348", "bodyText": "because the convert method for zombie villagers were added in 1.14", "author": "LinoxGH", "createdAt": "2020-06-23T22:01:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNTI4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNTY0Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444525642", "bodyText": "We got ItemUtils.consumeItem... for this", "author": "TheBusyBiscuit", "createdAt": "2020-06-23T21:43:09Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicPills.java", "diffHunk": "@@ -0,0 +1,59 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical;\n+\n+import org.bukkit.Sound;\n+import org.bukkit.entity.EntityType;\n+import org.bukkit.entity.Player;\n+import org.bukkit.entity.Villager;\n+import org.bukkit.entity.ZombieVillager;\n+import org.bukkit.inventory.EquipmentSlot;\n+import org.bukkit.inventory.ItemStack;\n+\n+import io.github.thebusybiscuit.slimefun4.api.MinecraftVersion;\n+import me.mrCookieSlime.Slimefun.Lists.RecipeType;\n+import me.mrCookieSlime.Slimefun.Objects.Category;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SimpleSlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.handlers.EntityInteractHandler;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+\n+/**\n+ * This {@link SlimefunItem} allows you to convert any {@link ZombieVillager} to\n+ * their {@link Villager} variant.\n+ *\n+ * @author Linox\n+ *\n+ * @see EntityInteractHandler\n+ *\n+ */\n+public class MagicPills extends SimpleSlimefunItem<EntityInteractHandler> {\n+\n+    public MagicPills(Category category, SlimefunItemStack item, RecipeType recipeType, ItemStack[] recipe, ItemStack recipeOutput) {\n+        super(category, item, recipeType, recipe, recipeOutput);\n+    }\n+\n+    @Override\n+    public EntityInteractHandler getItemHandler() {\n+        return (e, item) -> {\n+            if (e.getRightClicked().getType() == EntityType.ZOMBIE_VILLAGER) {\n+                Player p = e.getPlayer();\n+\n+                item.setAmount(item.getAmount() - 1);", "originalCommit": "9205b143ede29c2c0a958f26441ff91130802dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNjAzMw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444526033", "bodyText": "This needs to be added to the researches_en.yml translation file too!", "author": "TheBusyBiscuit", "createdAt": "2020-06-23T21:44:12Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/ResearchSetup.java", "diffHunk": "@@ -265,6 +265,7 @@ public static void setupResearches() {\n         register(\"tree_growth_accelerator\", 256, \"Faster Trees\", 18, SlimefunItems.TREE_GROWTH_ACCELERATOR);\n         register(\"industrial_miner\", 95, \"Industrial Mining\", 28, SlimefunItems.INDUSTRIAL_MINER);\n         register(\"advanced_industrial_miner\", 98, \"Better Mining\", 36, SlimefunItems.ADVANCED_INDUSTRIAL_MINER);\n+        register(\"magic_pills\", 257, \"De-Zombification\", 22, SlimefunItems.MAGIC_PILLS);", "originalCommit": "9205b143ede29c2c0a958f26441ff91130802dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "32784574417221684c4931777b7ed168e76dc236", "url": "https://github.com/Slimefun/Slimefun4/commit/32784574417221684c4931777b7ed168e76dc236", "message": "Did the requested changes.", "committedDate": "2020-06-23T22:06:48Z", "type": "commit"}, {"oid": "573068283a16077310aa7bc75d387d979bff0b9f", "url": "https://github.com/Slimefun/Slimefun4/commit/573068283a16077310aa7bc75d387d979bff0b9f", "message": "Added the support for 1.13", "committedDate": "2020-06-23T22:17:14Z", "type": "commit"}]}