{"pr_number": 2246, "pr_title": "Sf give drops excess items", "pr_createdAt": "2020-08-23T12:07:07Z", "pr_url": "https://github.com/Slimefun/Slimefun4/pull/2246", "timeline": [{"oid": "eb66f3e183062c88925ec47d5d5a90a25275a5fc", "url": "https://github.com/Slimefun/Slimefun4/commit/eb66f3e183062c88925ec47d5d5a90a25275a5fc", "message": "Added option to drop excess items on /sf give", "committedDate": "2020-08-23T11:54:51Z", "type": "commit"}, {"oid": "bdd2adc21e8beeafc5eed51613849b7b07b1e90f", "url": "https://github.com/Slimefun/Slimefun4/commit/bdd2adc21e8beeafc5eed51613849b7b07b1e90f", "message": "Cleared unused imports I forgot to delete", "committedDate": "2020-08-23T11:56:39Z", "type": "commit"}, {"oid": "e06d17f8e597a22e9e1dc7c8c38269cbea7245a9", "url": "https://github.com/Slimefun/Slimefun4/commit/e06d17f8e597a22e9e1dc7c8c38269cbea7245a9", "message": "Restored original plugin.yml as pulling hadn't", "committedDate": "2020-08-23T11:58:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTIxOTUwMw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2246#discussion_r475219503", "bodyText": "I wouldn't really use Naturally here, as it will give the item an offset to jump in a random direction.", "author": "TheBusyBiscuit", "createdAt": "2020-08-23T13:26:49Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/commands/subcommands/GiveCommand.java", "diffHunk": "@@ -65,7 +66,13 @@ private void giveItem(CommandSender sender, Player p, SlimefunItem sfItem, Strin\n \n             if (amount > 0) {\n                 SlimefunPlugin.getLocalization().sendMessage(p, \"messages.given-item\", true, msg -> msg.replace(PLACEHOLDER_ITEM, sfItem.getItemName()).replace(PLACEHOLDER_AMOUNT, String.valueOf(amount)));\n-                p.getInventory().addItem(new CustomItem(sfItem.getItem(), amount));\n+                HashMap<Integer,ItemStack> excess = p.getInventory().addItem(new CustomItem(sfItem.getItem(), amount));\n+                if (SlimefunPlugin.getCfg().getBoolean(\"options.drop-excess-sf-give-items\") && !excess.isEmpty()) {\n+                        for (ItemStack is : excess.values()) {\n+                            p.getWorld().dropItemNaturally(p.getLocation(), is);", "originalCommit": "e06d17f8e597a22e9e1dc7c8c38269cbea7245a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTIxOTU1MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2246#discussion_r475219550", "bodyText": "Also use the base type Map.", "author": "TheBusyBiscuit", "createdAt": "2020-08-23T13:27:13Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/commands/subcommands/GiveCommand.java", "diffHunk": "@@ -65,7 +66,13 @@ private void giveItem(CommandSender sender, Player p, SlimefunItem sfItem, Strin\n \n             if (amount > 0) {\n                 SlimefunPlugin.getLocalization().sendMessage(p, \"messages.given-item\", true, msg -> msg.replace(PLACEHOLDER_ITEM, sfItem.getItemName()).replace(PLACEHOLDER_AMOUNT, String.valueOf(amount)));\n-                p.getInventory().addItem(new CustomItem(sfItem.getItem(), amount));\n+                HashMap<Integer,ItemStack> excess = p.getInventory().addItem(new CustomItem(sfItem.getItem(), amount));", "originalCommit": "e06d17f8e597a22e9e1dc7c8c38269cbea7245a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "813200b29c329943c5e480638ded8de140b107c2", "url": "https://github.com/Slimefun/Slimefun4/commit/813200b29c329943c5e480638ded8de140b107c2", "message": "Made requested changes", "committedDate": "2020-08-23T13:36:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTIzNDIxMQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2246#discussion_r475234211", "bodyText": "The brackets are mis-aligned, could it be that you are using a different indentation?\nThe closing bracket does not lign up with the if.", "author": "TheBusyBiscuit", "createdAt": "2020-08-23T15:45:40Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/commands/subcommands/GiveCommand.java", "diffHunk": "@@ -65,7 +66,13 @@ private void giveItem(CommandSender sender, Player p, SlimefunItem sfItem, Strin\n \n             if (amount > 0) {\n                 SlimefunPlugin.getLocalization().sendMessage(p, \"messages.given-item\", true, msg -> msg.replace(PLACEHOLDER_ITEM, sfItem.getItemName()).replace(PLACEHOLDER_AMOUNT, String.valueOf(amount)));\n-                p.getInventory().addItem(new CustomItem(sfItem.getItem(), amount));\n+                Map<Integer,ItemStack> excess = p.getInventory().addItem(new CustomItem(sfItem.getItem(), amount));\n+                if (SlimefunPlugin.getCfg().getBoolean(\"options.drop-excess-sf-give-items\") && !excess.isEmpty()) {\n+                        for (ItemStack is : excess.values()) {\n+                            p.getWorld().dropItem(p.getLocation(), is);\n+                        }\n+                    }", "originalCommit": "813200b29c329943c5e480638ded8de140b107c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTIzNDM0Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2246#discussion_r475234342", "bodyText": "Forgot to ctrl+l :/", "author": "Sfiguz7", "createdAt": "2020-08-23T15:46:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTIzNDIxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTIzNDQ4OA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2246#discussion_r475234488", "bodyText": "Actually for the best as it splits all the IFs, I'll manually adjust it", "author": "Sfiguz7", "createdAt": "2020-08-23T15:48:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTIzNDIxMQ=="}], "type": "inlineReview"}, {"oid": "44451d6244df3adb69d0a1f559d8d1330eff0098", "url": "https://github.com/Slimefun/Slimefun4/commit/44451d6244df3adb69d0a1f559d8d1330eff0098", "message": "Fixed extra indentation", "committedDate": "2020-08-23T15:49:44Z", "type": "commit"}, {"oid": "89fdf45d28f840e690a7b87bf210db71f6d0ee86", "url": "https://github.com/Slimefun/Slimefun4/commit/89fdf45d28f840e690a7b87bf210db71f6d0ee86", "message": "I said, fixed extra indentation", "committedDate": "2020-08-23T15:50:31Z", "type": "commit"}]}