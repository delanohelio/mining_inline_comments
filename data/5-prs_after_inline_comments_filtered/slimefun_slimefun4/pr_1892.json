{"pr_number": 1892, "pr_title": "Added Unit Tests via MockBukkit", "pr_createdAt": "2020-05-09T16:32:31Z", "pr_url": "https://github.com/Slimefun/Slimefun4/pull/1892", "timeline": [{"oid": "3e2d1847ed38d05ae3c83dcd590416f66007608e", "url": "https://github.com/Slimefun/Slimefun4/commit/3e2d1847ed38d05ae3c83dcd590416f66007608e", "message": "Little performance improvement", "committedDate": "2020-05-03T16:36:29Z", "type": "commit"}, {"oid": "0e58c3fa352cc46b0b2ff929c7d68e972e6492fd", "url": "https://github.com/Slimefun/Slimefun4/commit/0e58c3fa352cc46b0b2ff929c7d68e972e6492fd", "message": "Added first Unit Tests", "committedDate": "2020-05-04T14:25:47Z", "type": "commit"}, {"oid": "b456da9ffc9e34041d261ac71822567b0af98643", "url": "https://github.com/Slimefun/Slimefun4/commit/b456da9ffc9e34041d261ac71822567b0af98643", "message": "First Unit Tests", "committedDate": "2020-05-06T20:08:15Z", "type": "commit"}, {"oid": "7e04566393d7de91252fe46fe5da3b2c02052927", "url": "https://github.com/Slimefun/Slimefun4/commit/7e04566393d7de91252fe46fe5da3b2c02052927", "message": "Further unit tests and jacoco coverage reports", "committedDate": "2020-05-07T12:28:54Z", "type": "commit"}, {"oid": "8577b9ef5028b5b85e45e61df6c310529bea054f", "url": "https://github.com/Slimefun/Slimefun4/commit/8577b9ef5028b5b85e45e61df6c310529bea054f", "message": "Added Unit Tests for ItemSetting<T>", "committedDate": "2020-05-07T15:12:31Z", "type": "commit"}, {"oid": "41b0356bbc5949157188b0a47bf3bb366df5fac1", "url": "https://github.com/Slimefun/Slimefun4/commit/41b0356bbc5949157188b0a47bf3bb366df5fac1", "message": "Refactoring", "committedDate": "2020-05-07T16:00:30Z", "type": "commit"}, {"oid": "0b416c3201b0b223fdbddca2a87db04728c930cc", "url": "https://github.com/Slimefun/Slimefun4/commit/0b416c3201b0b223fdbddca2a87db04728c930cc", "message": "More tests", "committedDate": "2020-05-07T16:00:44Z", "type": "commit"}, {"oid": "220d5ef41f35f6f5f6a48a1919968f89c9d6335a", "url": "https://github.com/Slimefun/Slimefun4/commit/220d5ef41f35f6f5f6a48a1919968f89c9d6335a", "message": "Merge branch 'master' of https://github.com/TheBusyBiscuit/Slimefun4\ninto tests\n\nConflicts:\n\tCHANGELOG.md", "committedDate": "2020-05-07T16:18:09Z", "type": "commit"}, {"oid": "9e63f1ce7976fbcebc251d14dc938f106ce821c5", "url": "https://github.com/Slimefun/Slimefun4/commit/9e63f1ce7976fbcebc251d14dc938f106ce821c5", "message": "Added Unit Tests for Categories", "committedDate": "2020-05-07T17:56:45Z", "type": "commit"}, {"oid": "2d3cfaee731612c03436c377603782a15e255a09", "url": "https://github.com/Slimefun/Slimefun4/commit/2d3cfaee731612c03436c377603782a15e255a09", "message": "Updated PerWorldSettings", "committedDate": "2020-05-07T18:32:37Z", "type": "commit"}, {"oid": "a3afe615b538060677bfdbe80e388ac3b4e1f7ab", "url": "https://github.com/Slimefun/Slimefun4/commit/a3afe615b538060677bfdbe80e388ac3b4e1f7ab", "message": "Merge branch 'master' of https://github.com/TheBusyBiscuit/Slimefun4 into tests", "committedDate": "2020-05-07T18:39:42Z", "type": "commit"}, {"oid": "a68f2503cb1c75d940d6daa135704d649414871a", "url": "https://github.com/Slimefun/Slimefun4/commit/a68f2503cb1c75d940d6daa135704d649414871a", "message": "Updated pom.xml", "committedDate": "2020-05-07T18:51:00Z", "type": "commit"}, {"oid": "66ac945b5f46b70678f89e90a9e317da4b4926ba", "url": "https://github.com/Slimefun/Slimefun4/commit/66ac945b5f46b70678f89e90a9e317da4b4926ba", "message": "No such thing as too many Unit Tests", "committedDate": "2020-05-08T13:44:12Z", "type": "commit"}, {"oid": "a2512ce03a970ed13e96aeabe2759e95c7293c6b", "url": "https://github.com/Slimefun/Slimefun4/commit/a2512ce03a970ed13e96aeabe2759e95c7293c6b", "message": "Merge branch 'master' of https://github.com/TheBusyBiscuit/Slimefun4 into tests", "committedDate": "2020-05-08T14:00:31Z", "type": "commit"}, {"oid": "aa897a5de7b9b9362d62e2b5e8bed033cf943e18", "url": "https://github.com/Slimefun/Slimefun4/commit/aa897a5de7b9b9362d62e2b5e8bed033cf943e18", "message": "More tests and relocated a class", "committedDate": "2020-05-08T15:13:16Z", "type": "commit"}, {"oid": "a4ebd663d5cd026e351bb03c92683acff77c4e59", "url": "https://github.com/Slimefun/Slimefun4/commit/a4ebd663d5cd026e351bb03c92683acff77c4e59", "message": "Refactoring and Research Unit tests", "committedDate": "2020-05-08T15:55:48Z", "type": "commit"}, {"oid": "643f992532c702826ddcd3d67cf8263aca37519e", "url": "https://github.com/Slimefun/Slimefun4/commit/643f992532c702826ddcd3d67cf8263aca37519e", "message": "Removed deprecated test", "committedDate": "2020-05-08T15:59:58Z", "type": "commit"}, {"oid": "dc137d04bf3f182e29d48cf3f79f8c654872438e", "url": "https://github.com/Slimefun/Slimefun4/commit/dc137d04bf3f182e29d48cf3f79f8c654872438e", "message": "Player Profiles are now truly asynchronous", "committedDate": "2020-05-08T16:47:25Z", "type": "commit"}, {"oid": "eb321e9ee55f7865204532b65a7f5a31ad34e347", "url": "https://github.com/Slimefun/Slimefun4/commit/eb321e9ee55f7865204532b65a7f5a31ad34e347", "message": "Lots more refactoring", "committedDate": "2020-05-08T16:59:51Z", "type": "commit"}, {"oid": "ebf6725d7e8e98c6e0c4e44670d5c7f4a65eb288", "url": "https://github.com/Slimefun/Slimefun4/commit/ebf6725d7e8e98c6e0c4e44670d5c7f4a65eb288", "message": "Prevent World Settings from saving inside tests", "committedDate": "2020-05-08T17:05:03Z", "type": "commit"}, {"oid": "a37fe6d62a91f2609ff319ac68a05679f567b348", "url": "https://github.com/Slimefun/Slimefun4/commit/a37fe6d62a91f2609ff319ac68a05679f567b348", "message": "disabledItems now also uses the Worlds UUID", "committedDate": "2020-05-08T17:07:06Z", "type": "commit"}, {"oid": "cc21fb8fe3adcaaa8b76ca308dcf4b898d56a7c6", "url": "https://github.com/Slimefun/Slimefun4/commit/cc21fb8fe3adcaaa8b76ca308dcf4b898d56a7c6", "message": "Removed temporary migration method", "committedDate": "2020-05-08T17:21:49Z", "type": "commit"}, {"oid": "974657fadc980b5b7a430115b5f2358b83d68ad1", "url": "https://github.com/Slimefun/Slimefun4/commit/974657fadc980b5b7a430115b5f2358b83d68ad1", "message": "Fixed some unit tests", "committedDate": "2020-05-08T19:26:18Z", "type": "commit"}, {"oid": "5360e4d085b23af76db7ef131afd75bb0ef00de9", "url": "https://github.com/Slimefun/Slimefun4/commit/5360e4d085b23af76db7ef131afd75bb0ef00de9", "message": "MOOORE Unit Tests", "committedDate": "2020-05-08T20:09:08Z", "type": "commit"}, {"oid": "b30190da5c678f32a51b5e24416d411f16a942a3", "url": "https://github.com/Slimefun/Slimefun4/commit/b30190da5c678f32a51b5e24416d411f16a942a3", "message": "Refactoring", "committedDate": "2020-05-08T21:05:29Z", "type": "commit"}, {"oid": "d8c06a22709f616ff92e40a2fce359e8351b259a", "url": "https://github.com/Slimefun/Slimefun4/commit/d8c06a22709f616ff92e40a2fce359e8351b259a", "message": "Updated repository names", "committedDate": "2020-05-09T08:17:04Z", "type": "commit"}, {"oid": "f5980898269a70339988bc6e909ff0b32d4abbdc", "url": "https://github.com/Slimefun/Slimefun4/commit/f5980898269a70339988bc6e909ff0b32d4abbdc", "message": "Fixed Multiblocks tests", "committedDate": "2020-05-09T08:24:19Z", "type": "commit"}, {"oid": "c4026966a2267c170c3419d1bcecc05427b71206", "url": "https://github.com/Slimefun/Slimefun4/commit/c4026966a2267c170c3419d1bcecc05427b71206", "message": "Removed api method", "committedDate": "2020-05-09T08:35:21Z", "type": "commit"}, {"oid": "922444c04696e442d199d61d315c61727143bd32", "url": "https://github.com/Slimefun/Slimefun4/commit/922444c04696e442d199d61d315c61727143bd32", "message": "Added new api method for researches", "committedDate": "2020-05-09T08:41:36Z", "type": "commit"}, {"oid": "0e6ce77fd85a177670334f8bf6a4aaa415da70bd", "url": "https://github.com/Slimefun/Slimefun4/commit/0e6ce77fd85a177670334f8bf6a4aaa415da70bd", "message": "Deprecated these methods again", "committedDate": "2020-05-09T08:51:55Z", "type": "commit"}, {"oid": "dd159184a404d93073f4f65fd0aa7384a9511f63", "url": "https://github.com/Slimefun/Slimefun4/commit/dd159184a404d93073f4f65fd0aa7384a9511f63", "message": "Refined pom.xml", "committedDate": "2020-05-09T09:20:47Z", "type": "commit"}, {"oid": "c93c6cfa68c091ab8e752bc49ece6dca98d115db", "url": "https://github.com/Slimefun/Slimefun4/commit/c93c6cfa68c091ab8e752bc49ece6dca98d115db", "message": "Small refactoring", "committedDate": "2020-05-09T16:00:10Z", "type": "commit"}, {"oid": "da95bb832d7e276f16626721bfe3ec962e321fe2", "url": "https://github.com/Slimefun/Slimefun4/commit/da95bb832d7e276f16626721bfe3ec962e321fe2", "message": "Fixes #1891 (actually fixed in a commit before the issue was posted)", "committedDate": "2020-05-09T16:10:04Z", "type": "commit"}, {"oid": "b908336cfc7f744c43b28c83fc09e7b0852c5316", "url": "https://github.com/Slimefun/Slimefun4/commit/b908336cfc7f744c43b28c83fc09e7b0852c5316", "message": "Updated pom.xml", "committedDate": "2020-05-09T16:22:50Z", "type": "commit"}, {"oid": "1646d7c82d93a19de9016ac292df6b71d96097ad", "url": "https://github.com/Slimefun/Slimefun4/commit/1646d7c82d93a19de9016ac292df6b71d96097ad", "message": "Merge branch 'master' of https://github.com/TheBusyBiscuit/Slimefun4\ninto tests\n\nConflicts:\n\tsrc/main/java/me/mrCookieSlime/Slimefun/api/Slimefun.java", "committedDate": "2020-05-09T16:24:11Z", "type": "commit"}, {"oid": "c019ac8289d54e6ea1bbcbc4c9969efaac80ae4c", "url": "https://github.com/Slimefun/Slimefun4/commit/c019ac8289d54e6ea1bbcbc4c9969efaac80ae4c", "message": "Testing to see if this works", "committedDate": "2020-05-09T16:42:58Z", "type": "commit"}, {"oid": "3661c05d2a4387ab262b81a04decd988c9b10bd0", "url": "https://github.com/Slimefun/Slimefun4/commit/3661c05d2a4387ab262b81a04decd988c9b10bd0", "message": "Trying this out", "committedDate": "2020-05-09T16:52:35Z", "type": "commit"}, {"oid": "ada8081440278175f535a9e2bb8a6a4c590c8e2b", "url": "https://github.com/Slimefun/Slimefun4/commit/ada8081440278175f535a9e2bb8a6a4c590c8e2b", "message": "Please work", "committedDate": "2020-05-09T17:25:29Z", "type": "commit"}, {"oid": "4f9ff597f3a1886abafe1d9b8eb82c728b30509a", "url": "https://github.com/Slimefun/Slimefun4/commit/4f9ff597f3a1886abafe1d9b8eb82c728b30509a", "message": "ecnayonna na fo lleh eno era uoy ,eriferuS nevaM", "committedDate": "2020-05-09T17:30:44Z", "type": "commit"}, {"oid": "f30b212e96a460ad8f72ed7adc9665df35cf901c", "url": "https://github.com/Slimefun/Slimefun4/commit/f30b212e96a460ad8f72ed7adc9665df35cf901c", "message": "Maven Surefire, I wanna talk to your manager (actually I don't)", "committedDate": "2020-05-09T17:43:47Z", "type": "commit"}, {"oid": "4df99b6fd8dadff527a0085da530d9f86aeac691", "url": "https://github.com/Slimefun/Slimefun4/commit/4df99b6fd8dadff527a0085da530d9f86aeac691", "message": "You better work :reeeee:", "committedDate": "2020-05-09T18:31:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzMjg1NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1892#discussion_r422532855", "bodyText": "Probably yeah", "author": "WalshyDev", "createdAt": "2020-05-09T18:56:46Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/categories/LockedCategory.java", "diffHunk": "@@ -0,0 +1,159 @@\n+package io.github.thebusybiscuit.slimefun4.core.categories;\n+\n+import java.util.ArrayList;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+import java.util.logging.Level;\n+\n+import org.apache.commons.lang.Validate;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.entity.Player;\n+import org.bukkit.inventory.ItemStack;\n+\n+import io.github.thebusybiscuit.slimefun4.api.player.PlayerProfile;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.Objects.Category;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+import me.mrCookieSlime.Slimefun.api.Slimefun;\n+\n+/**\n+ * Represents a {@link Category} that cannot be opened until the parent category/categories\n+ * are fully unlocked.\n+ * <p>\n+ * See {@link Category} for the complete documentation.\n+ * \n+ * @author TheBusyBiscuit\n+ * \n+ * @see Category\n+ * @see SeasonalCategory\n+ * \n+ */\n+public class LockedCategory extends Category {\n+\n+    private final NamespacedKey[] keys;\n+    private final Set<Category> parents = new HashSet<>();\n+\n+    /**\n+     * The basic constructor for a LockedCategory.\n+     * Like {@link Category}, the default tier is automatically set to 3.\n+     * \n+     * @param key\n+     *            A unique identifier for this category\n+     * @param item\n+     *            The display item for this category\n+     * @param parents\n+     *            The parent categories for this category\n+     * \n+     */\n+    public LockedCategory(NamespacedKey key, ItemStack item, NamespacedKey... parents) {\n+        this(key, item, 3, parents);\n+    }\n+\n+    /**\n+     * The constructor for a LockedCategory.\n+     * \n+     * @param key\n+     *            A unique identifier for this category\n+     * @param item\n+     *            The display item for this category\n+     * @param tier\n+     *            The tier of this category\n+     * @param parents\n+     *            The parent categories for this category\n+     * \n+     */\n+    public LockedCategory(NamespacedKey key, ItemStack item, int tier, NamespacedKey... parents) {\n+        super(key, item, tier);\n+        Validate.noNullElements(parents, \"A LockedCategory must not have any 'null' parents!\");\n+\n+        this.keys = parents;\n+    }\n+\n+    @Override\n+    public void register() {\n+        super.register();\n+\n+        List<NamespacedKey> namespacedKeys = new ArrayList<>();\n+\n+        for (NamespacedKey key : keys) {\n+            if (key != null) {\n+                namespacedKeys.add(key);\n+            }\n+        }\n+\n+        for (Category category : SlimefunPlugin.getRegistry().getCategories()) {\n+            if (namespacedKeys.remove(category.getKey())) {\n+                addParent(category);\n+            }\n+        }\n+\n+        for (NamespacedKey key : namespacedKeys) {\n+            Slimefun.getLogger().log(Level.INFO, \"Parent \\\"{0}\\\" for Category \\\"{1}\\\" was not found, probably just disabled.\", new Object[] { key, getKey() });\n+        }\n+    }\n+\n+    /**\n+     * Gets the list of parent categories for this {@link LockedCategory}.\n+     * \n+     * @return the list of parent categories\n+     * \n+     * @see #addParent(Category)\n+     * @see #removeParent(Category)\n+     */\n+    public Set<Category> getParents() {\n+        return parents;\n+    }\n+\n+    /**\n+     * Adds a parent {@link Category} to this {@link LockedCategory}.\n+     * \n+     * @param category\n+     *            The {@link Category} to add as a parent\n+     *\n+     * @see #getParents()\n+     * @see #removeParent(Category)\n+     */\n+    public void addParent(Category category) {\n+        if (category == this || category == null) {\n+            throw new IllegalArgumentException(\"Category '\" + item.getItemMeta().getDisplayName() + \"' cannot be a parent of itself or have a 'null' parent.\");\n+        }\n+\n+        parents.add(category);\n+    }\n+\n+    /**\n+     * Removes a {@link Category} from the parents of this {@link LockedCategory}.\n+     * \n+     * @param category\n+     *            The {@link Category} to remove from the parents of this {@link LockedCategory}\n+     * \n+     * @see #getParents()\n+     * @see #addParent(Category)\n+     */\n+    public void removeParent(Category category) {\n+        parents.remove(category);\n+    }\n+\n+    /**\n+     * Checks if the {@link Player} has fully unlocked all parent categories.\n+     * \n+     * @param p\n+     *            The {@link Player} to check\n+     * @param profile\n+     *            The {@link PlayerProfile} that belongs to the given {@link Player}\n+     * @return Whether the {@link Player} has fully completed all parent categories, otherwise false\n+     */\n+    public boolean hasUnlocked(Player p, PlayerProfile profile) {\n+        for (Category category : parents) {\n+            for (SlimefunItem item : category.getItems()) {\n+                // Should we replace this all with Slimefun.hasUnlocked() ?", "originalCommit": "4df99b6fd8dadff527a0085da530d9f86aeac691", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzNTc0Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/1892#discussion_r422535742", "bodyText": "That comment is from last year or so... It only shows as a diff because the class was relocated", "author": "TheBusyBiscuit", "createdAt": "2020-05-09T19:24:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzMjg1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzMzMxOQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1892#discussion_r422533319", "bodyText": "While this is being moved to a method, should add a persistent data tag for this rather than relying on the lore.", "author": "WalshyDev", "createdAt": "2020-05-09T19:00:59Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/SoulboundRune.java", "diffHunk": "@@ -104,6 +102,21 @@ public ItemDropHandler getItemHandler() {\n         };\n     }\n \n+    /**\n+     * This method applies the {@link Soulbound} effect onto a given {@link ItemStack}.\n+     * \n+     * @param item\n+     *            The {@link ItemStack} to apply this effect to\n+     */\n+    public void apply(ItemStack item) {", "originalCommit": "4df99b6fd8dadff527a0085da530d9f86aeac691", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzNTc4NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1892#discussion_r422535785", "bodyText": "Definitely agree with this, not my code, just refactored it.", "author": "TheBusyBiscuit", "createdAt": "2020-05-09T19:24:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzMzMxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzNDA5Mw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1892#discussion_r422534093", "bodyText": "You should also check size after this first one. You're checking the intended initial behaviour and then a checked behaviour (dupe)", "author": "WalshyDev", "createdAt": "2020-05-09T19:08:46Z", "path": "src/test/java/io/github/thebusybiscuit/slimefun4/tests/items/TestCategories.java", "diffHunk": "@@ -0,0 +1,187 @@\n+package io.github.thebusybiscuit.slimefun4.tests.items;\n+\n+import java.time.LocalDate;\n+import java.time.Month;\n+\n+import org.bukkit.Material;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.entity.Player;\n+import org.bukkit.inventory.ItemStack;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+import be.seeseemelk.mockbukkit.MockBukkit;\n+import be.seeseemelk.mockbukkit.ServerMock;\n+import io.github.thebusybiscuit.cscorelib2.item.CustomItem;\n+import io.github.thebusybiscuit.slimefun4.api.player.PlayerProfile;\n+import io.github.thebusybiscuit.slimefun4.core.categories.FlexCategory;\n+import io.github.thebusybiscuit.slimefun4.core.categories.LockedCategory;\n+import io.github.thebusybiscuit.slimefun4.core.categories.SeasonalCategory;\n+import io.github.thebusybiscuit.slimefun4.core.guide.SlimefunGuideLayout;\n+import io.github.thebusybiscuit.slimefun4.mocks.SlimefunMocks;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.Objects.Category;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+\n+public class TestCategories {\n+\n+    private static ServerMock server;\n+    private static SlimefunPlugin plugin;\n+\n+    @BeforeAll\n+    public static void load() {\n+        server = MockBukkit.mock();\n+        plugin = MockBukkit.load(SlimefunPlugin.class);\n+    }\n+\n+    @AfterAll\n+    public static void unload() {\n+        MockBukkit.unmock();\n+    }\n+\n+    @Test\n+    public void testCategoryGetters() {\n+        Category category = new Category(new NamespacedKey(plugin, \"getter_test\"), new CustomItem(Material.DIAMOND_AXE, \"&6Testing\"));\n+\n+        Assertions.assertEquals(3, category.getTier());\n+        Assertions.assertEquals(new NamespacedKey(SlimefunPlugin.instance, \"getter_test\"), category.getKey());\n+        Assertions.assertEquals(\"Testing\", category.getUnlocalizedName());\n+        Assertions.assertEquals(0, category.getItems().size());\n+    }\n+\n+    @Test\n+    public void testAddItem() {\n+        Category category = new Category(new NamespacedKey(plugin, \"items_test\"), new CustomItem(Material.DIAMOND_AXE, \"&6Testing\"));\n+        SlimefunItem item = SlimefunMocks.mockSlimefunItem(plugin, \"CATEGORY_ITEMS_TEST_ITEM\", new CustomItem(Material.BAMBOO, \"&6Test Bamboo\"));\n+        item.setCategory(category);\n+        item.register(plugin);\n+        item.load();\n+\n+        Assertions.assertEquals(1, category.getItems().size());\n+\n+        // Size must still be 1 since we disallow duplicates\n+        item.setCategory(category);", "originalCommit": "4df99b6fd8dadff527a0085da530d9f86aeac691", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzNTkwNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1892#discussion_r422535905", "bodyText": "I know I could, doing it twice was just an exaggeration", "author": "TheBusyBiscuit", "createdAt": "2020-05-09T19:25:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzNDA5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzNTAyMw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1892#discussion_r422535023", "bodyText": "Not the biggest fan of using reflection in unit tests. You should be able to access the things you're making sure to test.", "author": "WalshyDev", "createdAt": "2020-05-09T19:17:27Z", "path": "src/test/java/io/github/thebusybiscuit/slimefun4/tests/services/TextCustomTextureService.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package io.github.thebusybiscuit.slimefun4.tests.services;\n+\n+import java.util.Arrays;\n+\n+import org.bukkit.Material;\n+import org.bukkit.inventory.ItemStack;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+import be.seeseemelk.mockbukkit.MockBukkit;\n+import io.github.thebusybiscuit.cscorelib2.config.Config;\n+import io.github.thebusybiscuit.cscorelib2.reflection.ReflectionUtils;\n+import io.github.thebusybiscuit.slimefun4.core.services.CustomTextureService;\n+import io.github.thebusybiscuit.slimefun4.mocks.SlimefunMocks;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+\n+public class TextCustomTextureService {\n+\n+    private static SlimefunPlugin plugin;\n+\n+    @BeforeAll\n+    public static void load() {\n+        MockBukkit.mock();\n+        plugin = MockBukkit.load(SlimefunPlugin.class);\n+    }\n+\n+    @AfterAll\n+    public static void unload() {\n+        MockBukkit.unmock();\n+    }\n+\n+    @Test\n+    public void testInitialization() {\n+        CustomTextureService service = new CustomTextureService(plugin);\n+        Assertions.assertFalse(service.isActive());\n+        Assertions.assertNull(service.getVersion());\n+\n+        SlimefunItem item = SlimefunMocks.mockSlimefunItem(plugin, \"TEXTURE_TEST\", new ItemStack(Material.LANTERN));\n+        service.register(Arrays.asList(null, item, null), false);\n+\n+        Assertions.assertThrows(IllegalArgumentException.class, () -> service.register(null, false));\n+\n+        // These values should not have changed yet\n+        Assertions.assertFalse(service.isActive());\n+        Assertions.assertNull(service.getVersion());\n+\n+        Assertions.assertThrows(IllegalArgumentException.class, () -> service.getModelData(null));\n+    }\n+\n+    @Test\n+    public void testSetTexture() throws NoSuchFieldException, IllegalAccessException {\n+        CustomTextureService service = new CustomTextureService(plugin);\n+        SlimefunItem item = SlimefunMocks.mockSlimefunItem(plugin, \"TEXTURE_TEST\", new ItemStack(Material.LANTERN));\n+        String version = \"Unit Test v1.0\";\n+\n+        Config config = (Config) ReflectionUtils.getFieldValue(service, \"config\");", "originalCommit": "4df99b6fd8dadff527a0085da530d9f86aeac691", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzNjA1MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1892#discussion_r422536051", "bodyText": "Yeah me neither but we shouldn't expose that Config though, so Reflection is the best we can do to inject some values there", "author": "TheBusyBiscuit", "createdAt": "2020-05-09T19:27:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjUzNTAyMw=="}], "type": "inlineReview"}, {"oid": "6a0c45c788df9f5086b0ec3f6fe66336b518837e", "url": "https://github.com/Slimefun/Slimefun4/commit/6a0c45c788df9f5086b0ec3f6fe66336b518837e", "message": "Removed Reflection", "committedDate": "2020-05-09T19:39:59Z", "type": "commit"}, {"oid": "71d13869a1896270d45d76985e68ee26b4334e43", "url": "https://github.com/Slimefun/Slimefun4/commit/71d13869a1896270d45d76985e68ee26b4334e43", "message": "Added Unit Tests for Player Profile and related", "committedDate": "2020-05-10T00:22:38Z", "type": "commit"}, {"oid": "eacbd2c5c16cacdf5f085a44e4ca2fe87ba37d9c", "url": "https://github.com/Slimefun/Slimefun4/commit/eacbd2c5c16cacdf5f085a44e4ca2fe87ba37d9c", "message": "Refactored Talismans a bit", "committedDate": "2020-05-10T08:31:28Z", "type": "commit"}, {"oid": "d39906866dbd2152c19f5c9557ce9b691d3ec947", "url": "https://github.com/Slimefun/Slimefun4/commit/d39906866dbd2152c19f5c9557ce9b691d3ec947", "message": "Merge branch 'master' of https://github.com/TheBusyBiscuit/Slimefun4\ninto tests", "committedDate": "2020-05-10T08:32:55Z", "type": "commit"}, {"oid": "fe499a357ed801dfe6849d3172dd27225835c5b8", "url": "https://github.com/Slimefun/Slimefun4/commit/fe499a357ed801dfe6849d3172dd27225835c5b8", "message": "Added a few more tests", "committedDate": "2020-05-10T09:01:41Z", "type": "commit"}, {"oid": "990b717339ba6cc3fdf3d8ffa07dd15002db3290", "url": "https://github.com/Slimefun/Slimefun4/commit/990b717339ba6cc3fdf3d8ffa07dd15002db3290", "message": "Added ItemStackWrapper Unit Tests", "committedDate": "2020-05-10T13:34:04Z", "type": "commit"}, {"oid": "912eaa2383cfa3e884a9427f1f80ef11e5087149", "url": "https://github.com/Slimefun/Slimefun4/commit/912eaa2383cfa3e884a9427f1f80ef11e5087149", "message": "Updated README", "committedDate": "2020-05-10T14:46:43Z", "type": "commit"}, {"oid": "feadc9f231c4bd0772da95d0aa739a99371a6935", "url": "https://github.com/Slimefun/Slimefun4/commit/feadc9f231c4bd0772da95d0aa739a99371a6935", "message": "Some refactoring and documentation", "committedDate": "2020-05-10T14:54:33Z", "type": "commit"}, {"oid": "0eeef20b1f83b94fe2b45f1c92db923322f57476", "url": "https://github.com/Slimefun/Slimefun4/commit/0eeef20b1f83b94fe2b45f1c92db923322f57476", "message": "A little bit more Unit Tests", "committedDate": "2020-05-10T15:13:31Z", "type": "commit"}, {"oid": "f7f66193e4cac3f8f75555e430b5ab6e32d4c079", "url": "https://github.com/Slimefun/Slimefun4/commit/f7f66193e4cac3f8f75555e430b5ab6e32d4c079", "message": "Update README.md", "committedDate": "2020-05-10T15:18:11Z", "type": "commit"}, {"oid": "b207edc13c1b4822f8287fdef6f64d7f11c3c8fc", "url": "https://github.com/Slimefun/Slimefun4/commit/b207edc13c1b4822f8287fdef6f64d7f11c3c8fc", "message": "Update PULL_REQUEST_TEMPLATE.md", "committedDate": "2020-05-10T15:40:54Z", "type": "commit"}, {"oid": "8b9b11bf8bd90b34021065f3bd2dc156ed0f8697", "url": "https://github.com/Slimefun/Slimefun4/commit/8b9b11bf8bd90b34021065f3bd2dc156ed0f8697", "message": "Update PULL_REQUEST_TEMPLATE.md", "committedDate": "2020-05-10T15:41:03Z", "type": "commit"}, {"oid": "ea200b37aacbb3518d3009a7863c7884e944f079", "url": "https://github.com/Slimefun/Slimefun4/commit/ea200b37aacbb3518d3009a7863c7884e944f079", "message": "Added UpdaterService#isEnabled()", "committedDate": "2020-05-10T19:35:48Z", "type": "commit"}, {"oid": "a90351a18a0db3fffc260b33e6eb0311bc922ac0", "url": "https://github.com/Slimefun/Slimefun4/commit/a90351a18a0db3fffc260b33e6eb0311bc922ac0", "message": "Merge branch 'tests' of https://github.com/TheBusyBiscuit/Slimefun4 into tests", "committedDate": "2020-05-10T19:36:03Z", "type": "commit"}, {"oid": "ccad2982ab60daca0de574881af1a49dce4d7bc3", "url": "https://github.com/Slimefun/Slimefun4/commit/ccad2982ab60daca0de574881af1a49dce4d7bc3", "message": "Fixes #1897", "committedDate": "2020-05-10T19:37:24Z", "type": "commit"}, {"oid": "fcf28fdf7f662379946b7e0e3511b6d1e750f9d7", "url": "https://github.com/Slimefun/Slimefun4/commit/fcf28fdf7f662379946b7e0e3511b6d1e750f9d7", "message": "Added a command to retrieve lost backpacks", "committedDate": "2020-05-10T21:27:09Z", "type": "commit"}, {"oid": "0fc0a0be29b22d98129afbea4fe9a94b54f423ee", "url": "https://github.com/Slimefun/Slimefun4/commit/0fc0a0be29b22d98129afbea4fe9a94b54f423ee", "message": "I said, added a command!", "committedDate": "2020-05-10T21:28:30Z", "type": "commit"}, {"oid": "e021fb9ce35eb7ede4cf3ebf65991e9c24af3813", "url": "https://github.com/Slimefun/Slimefun4/commit/e021fb9ce35eb7ede4cf3ebf65991e9c24af3813", "message": "Tweaked, requested changes added", "committedDate": "2020-05-10T23:25:59Z", "type": "commit"}, {"oid": "cedd749edb4a740bba18a5bdd549c1b6a45fead7", "url": "https://github.com/Slimefun/Slimefun4/commit/cedd749edb4a740bba18a5bdd549c1b6a45fead7", "message": "Split a line for readability", "committedDate": "2020-05-10T23:46:12Z", "type": "commit"}, {"oid": "8795900ec6f4d76f330e1ee7572d40b149a24cba", "url": "https://github.com/Slimefun/Slimefun4/commit/8795900ec6f4d76f330e1ee7572d40b149a24cba", "message": "Quick soulbound key to speed this up", "committedDate": "2020-05-10T23:50:40Z", "type": "commit"}, {"oid": "bd02eb9570657851cd543cf2204b5503f139adcf", "url": "https://github.com/Slimefun/Slimefun4/commit/bd02eb9570657851cd543cf2204b5503f139adcf", "message": "Tested!", "committedDate": "2020-05-11T00:09:49Z", "type": "commit"}, {"oid": "b4f19e8548b02442f9941e0925d01397021cccd8", "url": "https://github.com/Slimefun/Slimefun4/commit/b4f19e8548b02442f9941e0925d01397021cccd8", "message": "Document", "committedDate": "2020-05-11T00:12:41Z", "type": "commit"}, {"oid": "21f21ed67160ea4ee3a81f8e08f67a1ef0f0d610", "url": "https://github.com/Slimefun/Slimefun4/commit/21f21ed67160ea4ee3a81f8e08f67a1ef0f0d610", "message": "Last fixes(?)", "committedDate": "2020-05-11T00:18:06Z", "type": "commit"}, {"oid": "cb8efb2d55b9cb9033a927495c6fa0cd38c12b3e", "url": "https://github.com/Slimefun/Slimefun4/commit/cb8efb2d55b9cb9033a927495c6fa0cd38c12b3e", "message": "Revert \"Last fixes(?)\"\n\nThis reverts commit 21f21ed67160ea4ee3a81f8e08f67a1ef0f0d610.", "committedDate": "2020-05-11T07:19:25Z", "type": "commit"}, {"oid": "da25ac9f80e0cedbd7381bba9e21a9e684fdb6e6", "url": "https://github.com/Slimefun/Slimefun4/commit/da25ac9f80e0cedbd7381bba9e21a9e684fdb6e6", "message": "Redone fixes without formatting", "committedDate": "2020-05-11T07:24:01Z", "type": "commit"}, {"oid": "bcb2add2a67e94cf9eff324cf547436b11f965ab", "url": "https://github.com/Slimefun/Slimefun4/commit/bcb2add2a67e94cf9eff324cf547436b11f965ab", "message": "Integrity! HiddenBackpack now accepts size, restored bp has 54", "committedDate": "2020-05-11T13:19:50Z", "type": "commit"}, {"oid": "23fdd45b3dedd898b711d1fd1db7b5b854d6329a", "url": "https://github.com/Slimefun/Slimefun4/commit/23fdd45b3dedd898b711d1fd1db7b5b854d6329a", "message": "Messages fixes, Refactored HiddenBackpack to be dedicated to restored bp", "committedDate": "2020-05-11T13:35:35Z", "type": "commit"}, {"oid": "b2856755d9b89e9dacbfba6e7cd0b6709fcb2f4f", "url": "https://github.com/Slimefun/Slimefun4/commit/b2856755d9b89e9dacbfba6e7cd0b6709fcb2f4f", "message": "Added Javadocs, removed unnecessary parameter", "committedDate": "2020-05-11T14:11:41Z", "type": "commit"}, {"oid": "8c0ff9acfb2149b9e8a5a1c2c7bf5e9cc9866b6f", "url": "https://github.com/Slimefun/Slimefun4/commit/8c0ff9acfb2149b9e8a5a1c2c7bf5e9cc9866b6f", "message": "Now cloning :/ Also fixed double key in messages", "committedDate": "2020-05-11T14:58:58Z", "type": "commit"}, {"oid": "3597fc0388332aafabfd9a01a69253dd698466d4", "url": "https://github.com/Slimefun/Slimefun4/commit/3597fc0388332aafabfd9a01a69253dd698466d4", "message": "Reduced technical debt", "committedDate": "2020-05-11T16:56:01Z", "type": "commit"}, {"oid": "8b09111b4a11b226114780cef966eeddd3957973", "url": "https://github.com/Slimefun/Slimefun4/commit/8b09111b4a11b226114780cef966eeddd3957973", "message": "Overridden description getter", "committedDate": "2020-05-11T20:19:33Z", "type": "commit"}, {"oid": "d01a7d2186b72e4373b4b11db3b9ba36d160df6f", "url": "https://github.com/Slimefun/Slimefun4/commit/d01a7d2186b72e4373b4b11db3b9ba36d160df6f", "message": "Added Unit Tests for NetworkManager and Network class", "committedDate": "2020-05-11T21:02:24Z", "type": "commit"}, {"oid": "736f7bc54217e8eb91dedcb53800855b0cb6acc0", "url": "https://github.com/Slimefun/Slimefun4/commit/736f7bc54217e8eb91dedcb53800855b0cb6acc0", "message": "Added an additional validation and unit test", "committedDate": "2020-05-11T21:20:40Z", "type": "commit"}, {"oid": "05e36bf839565000e14f758e6eb0155af3d227bd", "url": "https://github.com/Slimefun/Slimefun4/commit/05e36bf839565000e14f758e6eb0155af3d227bd", "message": "Merge pull request #1898 from Sfiguz7/tests\n\nBackpack command", "committedDate": "2020-05-11T22:08:42Z", "type": "commit"}, {"oid": "471a271518e15990871b4bd0c8f63477a4318350", "url": "https://github.com/Slimefun/Slimefun4/commit/471a271518e15990871b4bd0c8f63477a4318350", "message": "Another one bites the Unit Tests", "committedDate": "2020-05-11T22:50:01Z", "type": "commit"}, {"oid": "78dc3a116facf8ff55907f43201e7b11e5523daf", "url": "https://github.com/Slimefun/Slimefun4/commit/78dc3a116facf8ff55907f43201e7b11e5523daf", "message": "Update dependency com.github.thebusybiscuit:CS-CoreLib2 to v0.19", "committedDate": "2020-05-12T00:34:54Z", "type": "commit"}, {"oid": "0bd78104ccadeaf9e88dbc3eb9f4ebbc3414c1de", "url": "https://github.com/Slimefun/Slimefun4/commit/0bd78104ccadeaf9e88dbc3eb9f4ebbc3414c1de", "message": "Requested changes and performance improvements", "committedDate": "2020-05-12T17:43:34Z", "type": "commit"}, {"oid": "6634d44033609fbfbb0ca15fa685b563b031d9b0", "url": "https://github.com/Slimefun/Slimefun4/commit/6634d44033609fbfbb0ca15fa685b563b031d9b0", "message": "Merge branch 'tests' into feature/soulbound-key", "committedDate": "2020-05-12T19:15:47Z", "type": "commit"}, {"oid": "c0a530f53294561916e24912eb5e315ad7da0006", "url": "https://github.com/Slimefun/Slimefun4/commit/c0a530f53294561916e24912eb5e315ad7da0006", "message": "Fix conflict", "committedDate": "2020-05-12T19:17:34Z", "type": "commit"}, {"oid": "2508864d9f9a54be618cbbc0f90cbe0e2eff44ad", "url": "https://github.com/Slimefun/Slimefun4/commit/2508864d9f9a54be618cbbc0f90cbe0e2eff44ad", "message": "Merge pull request #1899 from WalshyDev/feature/soulbound-key\n\nSmall soulbound improvement", "committedDate": "2020-05-12T19:35:02Z", "type": "commit"}, {"oid": "67121760cd5de035523e7e459cb8d1ad38df4117", "url": "https://github.com/Slimefun/Slimefun4/commit/67121760cd5de035523e7e459cb8d1ad38df4117", "message": "Added Unit Tests for \"Soulboundness\"", "committedDate": "2020-05-12T20:12:42Z", "type": "commit"}, {"oid": "e79bf4e29b0ec1a3460ce791ca5616ba6b78c373", "url": "https://github.com/Slimefun/Slimefun4/commit/e79bf4e29b0ec1a3460ce791ca5616ba6b78c373", "message": "Merge branch 'tests' into renovate/com.github.thebusybiscuit-cs-corelib2-0.x", "committedDate": "2020-05-12T20:27:01Z", "type": "commit"}, {"oid": "56c86b33d4de18beef5486cd5b7fc7aba0d29628", "url": "https://github.com/Slimefun/Slimefun4/commit/56c86b33d4de18beef5486cd5b7fc7aba0d29628", "message": "Merge pull request #1889 from TheBusyBiscuit/renovate/com.github.thebusybiscuit-cs-corelib2-0.x\n\nUpdate dependency com.github.thebusybiscuit:CS-CoreLib2 to v0.19", "committedDate": "2020-05-12T20:27:13Z", "type": "commit"}, {"oid": "3adbc84d53bb9ae49ec3e41946ec3a06bb34a156", "url": "https://github.com/Slimefun/Slimefun4/commit/3adbc84d53bb9ae49ec3e41946ec3a06bb34a156", "message": "Removed some longtime deprecated methods", "committedDate": "2020-05-12T20:32:59Z", "type": "commit"}, {"oid": "8ee46d5fc039b76db28defcf18ead73a1a6bbe74", "url": "https://github.com/Slimefun/Slimefun4/commit/8ee46d5fc039b76db28defcf18ead73a1a6bbe74", "message": "Merge pull request #1900 from TheBusyBiscuit/master\n\nTEST", "committedDate": "2020-05-13T20:15:11Z", "type": "commit"}, {"oid": "cf329027306719ce3d7fd73ffea9fa8c52a2505a", "url": "https://github.com/Slimefun/Slimefun4/commit/cf329027306719ce3d7fd73ffea9fa8c52a2505a", "message": "Fixed DyedBackpacks", "committedDate": "2020-05-13T21:52:22Z", "type": "commit"}]}