{"pr_number": 2376, "pr_title": "Attempt to fix bug #2360", "pr_createdAt": "2020-10-01T16:34:46Z", "pr_url": "https://github.com/Slimefun/Slimefun4/pull/2376", "timeline": [{"oid": "cbc48584bcc14c6d8cd4d348c5e3f0461a0a0990", "url": "https://github.com/Slimefun/Slimefun4/commit/cbc48584bcc14c6d8cd4d348c5e3f0461a0a0990", "message": "Attempt to fix bug #2360", "committedDate": "2020-10-01T16:28:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM3OTg1Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498379852", "bodyText": "Please use BlockStorage#hasBlockInfo() instead. Also, formatting (put a space after if)", "author": "poma123", "createdAt": "2020-10-01T16:40:40Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockPhysicsListener.java", "diffHunk": "@@ -54,17 +55,23 @@ public void onBlockFall(EntityChangeBlockEvent e) {\n \n     @EventHandler\n     public void onPistonExtend(BlockPistonExtendEvent e) {\n-        for (Block b : e.getBlocks()) {\n-            if (BlockStorage.hasBlockInfo(b) || (b.getRelative(e.getDirection()).getType() == Material.AIR && BlockStorage.hasBlockInfo(b.getRelative(e.getDirection())))) {\n-                e.setCancelled(true);\n-                return;\n+        if(BlockStorage.check(e.getBlock()) != null) {", "originalCommit": "cbc48584bcc14c6d8cd4d348c5e3f0461a0a0990", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MDI4MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498380280", "bodyText": "Please use BlockStorage#hasBlockInfo() instead. Also, formatting (put a space after if)", "author": "poma123", "createdAt": "2020-10-01T16:41:25Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockPhysicsListener.java", "diffHunk": "@@ -54,17 +55,23 @@ public void onBlockFall(EntityChangeBlockEvent e) {\n \n     @EventHandler\n     public void onPistonExtend(BlockPistonExtendEvent e) {\n-        for (Block b : e.getBlocks()) {\n-            if (BlockStorage.hasBlockInfo(b) || (b.getRelative(e.getDirection()).getType() == Material.AIR && BlockStorage.hasBlockInfo(b.getRelative(e.getDirection())))) {\n-                e.setCancelled(true);\n-                return;\n+        if(BlockStorage.check(e.getBlock()) != null) {\n+            e.setCancelled(true);\n+        } else {\n+            for (Block b : e.getBlocks()) {\n+                if (BlockStorage.hasBlockInfo(b) || (b.getRelative(e.getDirection()).getType() == Material.AIR && BlockStorage.hasBlockInfo(b.getRelative(e.getDirection())))) {\n+                    e.setCancelled(true);\n+                    return;\n+                }\n             }\n         }\n     }\n \n     @EventHandler\n     public void onPistonRetract(BlockPistonRetractEvent e) {\n-        if (e.isSticky()) {\n+        if(BlockStorage.check(e.getBlock()) != null) {", "originalCommit": "cbc48584bcc14c6d8cd4d348c5e3f0461a0a0990", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MTQyOA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498381428", "bodyText": "Please put else { to a new line.", "author": "poma123", "createdAt": "2020-10-01T16:43:32Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockPhysicsListener.java", "diffHunk": "@@ -54,17 +55,23 @@ public void onBlockFall(EntityChangeBlockEvent e) {\n \n     @EventHandler\n     public void onPistonExtend(BlockPistonExtendEvent e) {\n-        for (Block b : e.getBlocks()) {\n-            if (BlockStorage.hasBlockInfo(b) || (b.getRelative(e.getDirection()).getType() == Material.AIR && BlockStorage.hasBlockInfo(b.getRelative(e.getDirection())))) {\n-                e.setCancelled(true);\n-                return;\n+        if(BlockStorage.check(e.getBlock()) != null) {\n+            e.setCancelled(true);\n+        } else {", "originalCommit": "cbc48584bcc14c6d8cd4d348c5e3f0461a0a0990", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MTkzMg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498381932", "bodyText": "This is redundant.", "author": "LinoxGH", "createdAt": "2020-10-01T16:44:29Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockPhysicsListener.java", "diffHunk": "@@ -54,17 +55,23 @@ public void onBlockFall(EntityChangeBlockEvent e) {\n \n     @EventHandler\n     public void onPistonExtend(BlockPistonExtendEvent e) {\n-        for (Block b : e.getBlocks()) {\n-            if (BlockStorage.hasBlockInfo(b) || (b.getRelative(e.getDirection()).getType() == Material.AIR && BlockStorage.hasBlockInfo(b.getRelative(e.getDirection())))) {\n-                e.setCancelled(true);\n-                return;\n+        if(BlockStorage.check(e.getBlock()) != null) {\n+            e.setCancelled(true);\n+        } else {\n+            for (Block b : e.getBlocks()) {\n+                if (BlockStorage.hasBlockInfo(b) || (b.getRelative(e.getDirection()).getType() == Material.AIR && BlockStorage.hasBlockInfo(b.getRelative(e.getDirection())))) {\n+                    e.setCancelled(true);\n+                    return;", "originalCommit": "cbc48584bcc14c6d8cd4d348c5e3f0461a0a0990", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQxMzQzMA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498413430", "bodyText": "I am kind of confused on when, if, and where the \"getBlock()\"/piston (the piston itself) occurs in getBlocks() (what objects the piston might push, possibly including the piston itself). That's why those lines of code were kept in.\nI'm kind of new to Minecraft/Spigot/Paper modding and plugins but I knew Scala beforehand.", "author": "Chlorophytus", "createdAt": "2020-10-01T17:42:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MTkzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQxNTMzMA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498415330", "bodyText": "Only return; is redundant here.", "author": "poma123", "createdAt": "2020-10-01T17:45:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MTkzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQxNzE2Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498417162", "bodyText": "There could be a break; instead.", "author": "poma123", "createdAt": "2020-10-01T17:49:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MTkzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MzAwMw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498383003", "bodyText": "Put else if to a new line please", "author": "poma123", "createdAt": "2020-10-01T16:46:30Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockPhysicsListener.java", "diffHunk": "@@ -54,17 +55,23 @@ public void onBlockFall(EntityChangeBlockEvent e) {\n \n     @EventHandler\n     public void onPistonExtend(BlockPistonExtendEvent e) {\n-        for (Block b : e.getBlocks()) {\n-            if (BlockStorage.hasBlockInfo(b) || (b.getRelative(e.getDirection()).getType() == Material.AIR && BlockStorage.hasBlockInfo(b.getRelative(e.getDirection())))) {\n-                e.setCancelled(true);\n-                return;\n+        if(BlockStorage.check(e.getBlock()) != null) {\n+            e.setCancelled(true);\n+        } else {\n+            for (Block b : e.getBlocks()) {\n+                if (BlockStorage.hasBlockInfo(b) || (b.getRelative(e.getDirection()).getType() == Material.AIR && BlockStorage.hasBlockInfo(b.getRelative(e.getDirection())))) {\n+                    e.setCancelled(true);\n+                    return;\n+                }\n             }\n         }\n     }\n \n     @EventHandler\n     public void onPistonRetract(BlockPistonRetractEvent e) {\n-        if (e.isSticky()) {\n+        if(BlockStorage.check(e.getBlock()) != null) {\n+            e.setCancelled(true);\n+        } else if (e.isSticky()) {", "originalCommit": "cbc48584bcc14c6d8cd4d348c5e3f0461a0a0990", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQwOTc3MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498409771", "bodyText": "Change(s) have been performed.", "author": "Chlorophytus", "createdAt": "2020-10-01T17:35:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MzAwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQxMDMzMA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2376#discussion_r498410330", "bodyText": "Thank you! You can mark them as resolved by pushing the \"Resolve conversation\" button!", "author": "poma123", "createdAt": "2020-10-01T17:36:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM4MzAwMw=="}], "type": "inlineReview"}, {"oid": "a074e7cc1767483c0c66c5f7b89b5782a3a74966", "url": "https://github.com/Slimefun/Slimefun4/commit/a074e7cc1767483c0c66c5f7b89b5782a3a74966", "message": "Fix formatting", "committedDate": "2020-10-01T17:32:17Z", "type": "commit"}, {"oid": "b327c55b5fec399260d69c955177eca2fb844ddc", "url": "https://github.com/Slimefun/Slimefun4/commit/b327c55b5fec399260d69c955177eca2fb844ddc", "message": "Remove redundant return statements", "committedDate": "2020-10-01T17:49:05Z", "type": "commit"}, {"oid": "bfc221a7a549d17b7cc22e39a9e09e565562fb11", "url": "https://github.com/Slimefun/Slimefun4/commit/bfc221a7a549d17b7cc22e39a9e09e565562fb11", "message": "Replace w/break instead", "committedDate": "2020-10-01T17:52:16Z", "type": "commit"}]}