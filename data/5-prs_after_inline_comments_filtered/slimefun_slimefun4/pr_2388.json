{"pr_number": 2388, "pr_title": "More talismans", "pr_createdAt": "2020-10-04T18:40:29Z", "pr_url": "https://github.com/Slimefun/Slimefun4/pull/2388", "timeline": [{"oid": "a7c48cec6428d33c727911b43f5ab1630991b213", "url": "https://github.com/Slimefun/Slimefun4/commit/a7c48cec6428d33c727911b43f5ab1630991b213", "message": "Create Talisman of the Wise", "committedDate": "2020-10-03T20:57:02Z", "type": "commit"}, {"oid": "aefb51cc278707f3c2dcd9547cd2bb02bb05b5d4", "url": "https://github.com/Slimefun/Slimefun4/commit/aefb51cc278707f3c2dcd9547cd2bb02bb05b5d4", "message": "Add text entries for wise_talisman", "committedDate": "2020-10-03T20:57:20Z", "type": "commit"}, {"oid": "8cd9a4e2f8cc3c205c7e2043522bb6ca1ea5d4d5", "url": "https://github.com/Slimefun/Slimefun4/commit/8cd9a4e2f8cc3c205c7e2043522bb6ca1ea5d4d5", "message": "Add ResearchSetup entry for wise_talisman", "committedDate": "2020-10-03T20:58:29Z", "type": "commit"}, {"oid": "682c89975470dc8b2fa6131e042ffbb2957a090b", "url": "https://github.com/Slimefun/Slimefun4/commit/682c89975470dc8b2fa6131e042ffbb2957a090b", "message": "Add Talisman of the Resurrected", "committedDate": "2020-10-03T21:10:27Z", "type": "commit"}, {"oid": "2b39865f426ddb7ff1c3ded1737b1b1a502b789f", "url": "https://github.com/Slimefun/Slimefun4/commit/2b39865f426ddb7ff1c3ded1737b1b1a502b789f", "message": "Add event logic for resurrection_talisman", "committedDate": "2020-10-03T21:26:25Z", "type": "commit"}, {"oid": "74107cf963449fa1111e87f40159c16de4901478", "url": "https://github.com/Slimefun/Slimefun4/commit/74107cf963449fa1111e87f40159c16de4901478", "message": "Add Talisman of the Resurrected", "committedDate": "2020-10-04T18:28:39Z", "type": "commit"}, {"oid": "ef12fc3d015f98ae0bc801b0231f7e85b876842a", "url": "https://github.com/Slimefun/Slimefun4/commit/ef12fc3d015f98ae0bc801b0231f7e85b876842a", "message": "Add text entries for resurrected_talisman", "committedDate": "2020-10-04T18:29:14Z", "type": "commit"}, {"oid": "f5e5484697699f107938233767e8658620b17851", "url": "https://github.com/Slimefun/Slimefun4/commit/f5e5484697699f107938233767e8658620b17851", "message": "Remove unnecessary import", "committedDate": "2020-10-04T18:33:42Z", "type": "commit"}, {"oid": "a1d5d474fcc86c57409b702f9b9761bcfa745b89", "url": "https://github.com/Slimefun/Slimefun4/commit/a1d5d474fcc86c57409b702f9b9761bcfa745b89", "message": "Remove unused scheduler var", "committedDate": "2020-10-04T18:35:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3Njc0OQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499276749", "bodyText": "Please no star imports.", "author": "LinoxGH", "createdAt": "2020-10-04T18:50:31Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -31,13 +32,14 @@\n import org.bukkit.event.entity.EntityDamageEvent;\n import org.bukkit.event.entity.EntityDamageEvent.DamageCause;\n import org.bukkit.event.entity.EntityDeathEvent;\n-import org.bukkit.event.player.PlayerItemBreakEvent;\n-import org.bukkit.event.player.PlayerToggleSprintEvent;\n+import org.bukkit.event.entity.PlayerDeathEvent;\n+import org.bukkit.event.player.*;", "originalCommit": "a1d5d474fcc86c57409b702f9b9761bcfa745b89", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3Njk2OA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499276968", "bodyText": "I think my IDE did that, Ill get rid of it", "author": "svr333", "createdAt": "2020-10-04T18:53:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3Njc0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3Njg4Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499276887", "bodyText": "fall into the void*", "author": "LinoxGH", "createdAt": "2020-10-04T18:52:09Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/SlimefunItems.java", "diffHunk": "@@ -547,6 +547,9 @@ private SlimefunItems() {}\n     public static final SlimefunItemStack TALISMAN_WHIRLWIND = new SlimefunItemStack(\"WHIRLWIND_TALISMAN\", Material.EMERALD, \"&aTalisman of the Whirlwind\", \"\", \"&fHaving this Talisman\", \"&fin your Inventory will reflect\", \"&f60% of any projectiles fired at you.\", \"&e&oOnly a thrown Trident can pierce\", \"&e&othrough this layer of protection\");\n     public static final SlimefunItemStack TALISMAN_WIZARD = new SlimefunItemStack(\"WIZARD_TALISMAN\", Material.EMERALD, \"&aTalisman of the Wizard\", \"\", \"&fWhile you have this Talisman\", \"&fin your Inventory it allows you to\", \"&fobtain Fortune Level 4/5 however\", \"&fit also has a chance to lower the\", \"&fLevel of some Enchantments on your Item\");\n     public static final SlimefunItemStack TALISMAN_CAVEMAN = new SlimefunItemStack(\"CAVEMAN_TALISMAN\", Material.EMERALD, \"&aTalisman of the Caveman\", \"\", \"&fWhile you have this Talisman\", \"&fin your inventory it gives\", \"&fyou a 50% chance for a decent\", \"&fHaste buff when you mine any ore\");\n+    public static final SlimefunItemStack TALISMAN_WISE = new SlimefunItemStack(\"WISE_TALISMAN\", Material.EMERALD, \"&aTalisman of the Wise\", \"\", \"&fWhile you have this Talisman\", \"&fin your inventory it gives\", \"&fyou a 20% chance of doubling\", \"&fall experience you obtain\");\n+    public static final SlimefunItemStack TALISMAN_RESURRECTED = new SlimefunItemStack(\"RESURRECTED_TALISMAN\", Material.EMERALD, \"&aTalisman of the Resurrected\", \"\", \"&fWhile you have this Talisman\", \"&fin your inventory it will\", \"&fteleport you back safely when\", \"&fyou fall in the void\");", "originalCommit": "a1d5d474fcc86c57409b702f9b9761bcfa745b89", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3Njk2Mw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499276963", "bodyText": "Mssing curvy brackets.", "author": "LinoxGH", "createdAt": "2020-10-04T18:53:10Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +294,33 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() <= 0 || !Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE))\n+            return;", "originalCommit": "a1d5d474fcc86c57409b702f9b9761bcfa745b89", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3NzAzNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499277035", "bodyText": "Missing curvy brackets.", "author": "LinoxGH", "createdAt": "2020-10-04T18:54:00Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +294,33 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() <= 0 || !Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE))\n+            return;\n+\n+        e.setAmount(e.getAmount() * 2);\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity().getPlayer();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause != DamageCause.VOID || !Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED))\n+           return;", "originalCommit": "a1d5d474fcc86c57409b702f9b9761bcfa745b89", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b5b62bc48cf8ac4582d28c13e2474624ad5f54d4", "url": "https://github.com/Slimefun/Slimefun4/commit/b5b62bc48cf8ac4582d28c13e2474624ad5f54d4", "message": "Fix imports", "committedDate": "2020-10-04T18:56:13Z", "type": "commit"}, {"oid": "207d69a09b3ca2262ce1d880a2475507958f4023", "url": "https://github.com/Slimefun/Slimefun4/commit/207d69a09b3ca2262ce1d880a2475507958f4023", "message": "Uppercase talisman", "committedDate": "2020-10-04T18:56:34Z", "type": "commit"}, {"oid": "49578b7b51dad9b8f64cbd2e9b5e82265b7b28a4", "url": "https://github.com/Slimefun/Slimefun4/commit/49578b7b51dad9b8f64cbd2e9b5e82265b7b28a4", "message": "Fix grammar", "committedDate": "2020-10-04T18:59:52Z", "type": "commit"}, {"oid": "d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "url": "https://github.com/Slimefun/Slimefun4/commit/d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "message": "Add missing brackets", "committedDate": "2020-10-04T19:00:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjIzMg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499292232", "bodyText": "getPlayer() is redundant here getEntity() already returns a Player and getPlayer() literally just does return this; for players.", "author": "TheBusyBiscuit", "createdAt": "2020-10-04T21:46:58Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/Talisman.java", "diffHunk": "@@ -219,7 +220,10 @@ private static void consumeItem(Inventory inv, Talisman talisman) {\n     }\n \n     private static Player getPlayerByEventType(Event e) {\n-        if (e instanceof EntityDeathEvent) {\n+        if (e instanceof PlayerDeathEvent) {\n+            return ((PlayerDeathEvent) e).getEntity().getPlayer();", "originalCommit": "d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjM1OQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499292359", "bodyText": "I think the return; here really serves no point other than double-negation.\nI reckon it would be more understandable if you just did\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (e.getAmount() <= 0 || !Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n          \n          \n            \n                        return;\n          \n          \n            \n                    }\n          \n          \n            \n            \n          \n          \n            \n                    e.setAmount(e.getAmount() * 2);\n          \n          \n            \n                    if (e.getAmount() > 0 && Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n          \n          \n            \n                        e.setAmount(e.getAmount() * 2);\n          \n          \n            \n                    }", "author": "TheBusyBiscuit", "createdAt": "2020-10-04T21:48:30Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +296,35 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() <= 0 || !Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            return;\n+        }\n+\n+        e.setAmount(e.getAmount() * 2);", "originalCommit": "d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4NzE3OA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499487178", "bodyText": "Im used to this kind of style (check if everything is correct, if not return - used to do this to avoid nesting a lot), so I did it out of habit", "author": "svr333", "createdAt": "2020-10-05T10:08:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4ODg2OQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499488869", "bodyText": "If used excessively this can get worse than nesting, especially since this would just be a one-level nesting.", "author": "TheBusyBiscuit", "createdAt": "2020-10-05T10:11:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjM1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjM4OQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499292389", "bodyText": "Again getPlayer() is redundant here.", "author": "TheBusyBiscuit", "createdAt": "2020-10-04T21:48:46Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +296,35 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() <= 0 || !Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            return;\n+        }\n+\n+        e.setAmount(e.getAmount() * 2);\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity().getPlayer();", "originalCommit": "d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjQ0Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499292442", "bodyText": "Please add brackets here or preferabbly even a method getSafeLocation() with docs and annotations.", "author": "TheBusyBiscuit", "createdAt": "2020-10-04T21:49:31Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +296,35 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() <= 0 || !Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            return;\n+        }\n+\n+        e.setAmount(e.getAmount() * 2);\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity().getPlayer();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause != DamageCause.VOID || !Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            return;\n+        }\n+\n+        Location loc = e.getEntity().getPlayer().getBedSpawnLocation();\n+        if (loc == null)", "originalCommit": "d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ5MzI4NA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499493284", "bodyText": "Regarding this method, @TheBusyBiscuit, do I just make it inside of TalismanListener? Or somewhere in the api?", "author": "svr333", "createdAt": "2020-10-05T10:20:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjQ0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ5NjQzNw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499496437", "bodyText": "I'd just put it in this file yeah.", "author": "TheBusyBiscuit", "createdAt": "2020-10-05T10:25:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjQ0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjQ2OQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499292469", "bodyText": "Just like above, this is rather confusing, just use a normal if-statement.", "author": "TheBusyBiscuit", "createdAt": "2020-10-04T21:49:54Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +296,35 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() <= 0 || !Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            return;\n+        }\n+\n+        e.setAmount(e.getAmount() * 2);\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity().getPlayer();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause != DamageCause.VOID || !Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            return;\n+        }", "originalCommit": "d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjUxMg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499292512", "bodyText": "If you make a method like said above, this line would become redundant too ;)", "author": "TheBusyBiscuit", "createdAt": "2020-10-04T21:50:13Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +296,35 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() <= 0 || !Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            return;\n+        }\n+\n+        e.setAmount(e.getAmount() * 2);\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity().getPlayer();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause != DamageCause.VOID || !Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            return;\n+        }\n+\n+        Location loc = e.getEntity().getPlayer().getBedSpawnLocation();\n+        if (loc == null)\n+            loc = player.getLocation().getWorld().getSpawnLocation();\n+\n+        final Location respawnLocation = loc;", "originalCommit": "d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjU1MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499292550", "bodyText": "Use SlimefunPlugin.runSync\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Bukkit.getScheduler().runTaskLater(SlimefunPlugin.instance(), () -> {\n          \n          \n            \n                        player.teleport(respawnLocation);\n          \n          \n            \n                    }, 2);\n          \n          \n            \n                    SlimefunPlugin.runSync(() -> {\n          \n          \n            \n                        player.teleport(respawnLocation);\n          \n          \n            \n                    }, 2);", "author": "TheBusyBiscuit", "createdAt": "2020-10-04T21:50:38Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +296,35 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() <= 0 || !Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            return;\n+        }\n+\n+        e.setAmount(e.getAmount() * 2);\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity().getPlayer();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause != DamageCause.VOID || !Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            return;\n+        }\n+\n+        Location loc = e.getEntity().getPlayer().getBedSpawnLocation();\n+        if (loc == null)\n+            loc = player.getLocation().getWorld().getSpawnLocation();\n+\n+        final Location respawnLocation = loc;\n+\n+        Bukkit.getScheduler().runTaskLater(SlimefunPlugin.instance(), () -> {\n+            player.teleport(respawnLocation);\n+        }, 2);", "originalCommit": "d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI5MjYyMg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499292622", "bodyText": "Don't use the tome of knowledge sharing here, many servers disable this item.\nyou could use the new magic glass here?", "author": "TheBusyBiscuit", "createdAt": "2020-10-04T21:51:35Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/SlimefunItemSetup.java", "diffHunk": "@@ -877,6 +877,16 @@ public static void setup(@Nonnull SlimefunPlugin plugin) {\n         false, false, \"caveman\", 50, new PotionEffect(PotionEffectType.FAST_DIGGING, 800, 2))\n         .register(plugin);\n \n+        new Talisman(SlimefunItems.TALISMAN_WISE,\n+        new ItemStack[] { SlimefunItems.MAGIC_LUMP_3, null, SlimefunItems.MAGIC_LUMP_3, SlimefunItems.TOME_OF_KNOWLEDGE_SHARING, SlimefunItems.TALISMAN_MAGICIAN, SlimefunItems.FILLED_FLASK_OF_KNOWLEDGE, SlimefunItems.MAGIC_LUMP_3, null, SlimefunItems.MAGIC_LUMP_3},", "originalCommit": "d5d7960a569fcb5b612dd714b2f9f0a7661078f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e08b4b1f17536414b5343370da0b70e2e1c4d735", "url": "https://github.com/Slimefun/Slimefun4/commit/e08b4b1f17536414b5343370da0b70e2e1c4d735", "message": "Refactor onExperienceReceive", "committedDate": "2020-10-05T10:05:53Z", "type": "commit"}, {"oid": "0e1dba507df4b86039cb2abcea40fd81094b276f", "url": "https://github.com/Slimefun/Slimefun4/commit/0e1dba507df4b86039cb2abcea40fd81094b276f", "message": "Remove redundant .getPlayer()'s", "committedDate": "2020-10-05T10:07:16Z", "type": "commit"}, {"oid": "133705e287b96dbd1c7c265e4f8f0ba32e2965b4", "url": "https://github.com/Slimefun/Slimefun4/commit/133705e287b96dbd1c7c265e4f8f0ba32e2965b4", "message": "Use SlimefunPlugin.runSync over scheduler\n\nCo-authored-by: TheBusyBiscuit <TheBusyBiscuit@users.noreply.github.com>", "committedDate": "2020-10-05T10:11:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ4OTIyNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499489225", "bodyText": "Also you should use PaperLib's teleportAsync here :)", "author": "TheBusyBiscuit", "createdAt": "2020-10-05T10:12:25Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +296,33 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() > 0 && Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            e.setAmount(e.getAmount() * 2);\n+        }\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause != DamageCause.VOID || !Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            return;\n+        }\n+\n+        Location loc = e.getEntity().getPlayer().getBedSpawnLocation();\n+        if (loc == null)\n+            loc = player.getLocation().getWorld().getSpawnLocation();\n+\n+        final Location respawnLocation = loc;\n+\n+        SlimefunPlugin.runSync(() -> {\n+            player.teleport(respawnLocation);", "originalCommit": "133705e287b96dbd1c7c265e4f8f0ba32e2965b4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "64e39abc625f5be6d39b36f07a01d281da9119ba", "url": "https://github.com/Slimefun/Slimefun4/commit/64e39abc625f5be6d39b36f07a01d281da9119ba", "message": "Update resurrected talisman message", "committedDate": "2020-10-05T10:13:46Z", "type": "commit"}, {"oid": "961f44273351b5a662fbf1fc964ffb06f8dc8e5f", "url": "https://github.com/Slimefun/Slimefun4/commit/961f44273351b5a662fbf1fc964ffb06f8dc8e5f", "message": "Update recipe for wise_talisman", "committedDate": "2020-10-05T10:18:42Z", "type": "commit"}, {"oid": "e240fa1b6442cfe331a55070c6a12135d528f657", "url": "https://github.com/Slimefun/Slimefun4/commit/e240fa1b6442cfe331a55070c6a12135d528f657", "message": "Refactor onPlayerDeath", "committedDate": "2020-10-05T10:31:55Z", "type": "commit"}, {"oid": "d64fe94b504523b866df35436d6001154b9706fc", "url": "https://github.com/Slimefun/Slimefun4/commit/d64fe94b504523b866df35436d6001154b9706fc", "message": "Merge branch 'master' of https://github.com/Slimefun/Slimefun4 into MoreTalismans", "committedDate": "2020-10-05T13:58:32Z", "type": "commit"}, {"oid": "51de09540403ed411c783567e9e8e6abcd250f1e", "url": "https://github.com/Slimefun/Slimefun4/commit/51de09540403ed411c783567e9e8e6abcd250f1e", "message": "Add ResurrectedTalisman class", "committedDate": "2020-10-05T17:55:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc4MjE1Ng==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499782156", "bodyText": "Redundant new line here.", "author": "LinoxGH", "createdAt": "2020-10-05T18:12:23Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/SlimefunItems.java", "diffHunk": "@@ -547,6 +547,9 @@ private SlimefunItems() {}\n     public static final SlimefunItemStack TALISMAN_WHIRLWIND = new SlimefunItemStack(\"WHIRLWIND_TALISMAN\", Material.EMERALD, \"&aTalisman of the Whirlwind\", \"\", \"&fHaving this Talisman\", \"&fin your Inventory will reflect\", \"&f60% of any projectiles fired at you.\", \"&e&oOnly a thrown Trident can pierce\", \"&e&othrough this layer of protection\");\n     public static final SlimefunItemStack TALISMAN_WIZARD = new SlimefunItemStack(\"WIZARD_TALISMAN\", Material.EMERALD, \"&aTalisman of the Wizard\", \"\", \"&fWhile you have this Talisman\", \"&fin your Inventory it allows you to\", \"&fobtain Fortune Level 4/5 however\", \"&fit also has a chance to lower the\", \"&fLevel of some Enchantments on your Item\");\n     public static final SlimefunItemStack TALISMAN_CAVEMAN = new SlimefunItemStack(\"CAVEMAN_TALISMAN\", Material.EMERALD, \"&aTalisman of the Caveman\", \"\", \"&fWhile you have this Talisman\", \"&fin your inventory it gives\", \"&fyou a 50% chance for a decent\", \"&fHaste buff when you mine any ore\");\n+    public static final SlimefunItemStack TALISMAN_WISE = new SlimefunItemStack(\"WISE_TALISMAN\", Material.EMERALD, \"&aTalisman of the Wise\", \"\", \"&fWhile you have this Talisman\", \"&fin your inventory it gives\", \"&fyou a 20% chance of doubling\", \"&fall experience you obtain\");\n+    public static final SlimefunItemStack TALISMAN_RESURRECTED = new SlimefunItemStack(\"RESURRECTED_TALISMAN\", Material.EMERALD, \"&aTalisman of the Resurrected\", \"\", \"&fWhile you have this Talisman\", \"&fin your inventory it will\", \"&fteleport you back safely when\", \"&fyou fall into the void\");\n+", "originalCommit": "d64fe94b504523b866df35436d6001154b9706fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3MTI0OQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r499871249", "bodyText": "taken care of, Im also implementing your suggested feature about the right click to set location, but thats gonna take a bit more", "author": "svr333", "createdAt": "2020-10-05T21:03:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc4MjE1Ng=="}], "type": "inlineReview"}, {"oid": "7eb680fa58c77f715f10aeb66253fc18a3671424", "url": "https://github.com/Slimefun/Slimefun4/commit/7eb680fa58c77f715f10aeb66253fc18a3671424", "message": "Remove redundant new line", "committedDate": "2020-10-05T18:15:11Z", "type": "commit"}, {"oid": "d5caaaa13e517639af36330725e9911bd083c2a6", "url": "https://github.com/Slimefun/Slimefun4/commit/d5caaaa13e517639af36330725e9911bd083c2a6", "message": "Add base for ResurrectedTalisman", "committedDate": "2020-10-05T20:46:53Z", "type": "commit"}, {"oid": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "url": "https://github.com/Slimefun/Slimefun4/commit/a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "message": "Try to implement requested feature for RessurectedTalisman", "committedDate": "2020-10-06T13:34:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MDkzMQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500490931", "bodyText": "Missing asterics *", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T17:58:11Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/*", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MTA2MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500491060", "bodyText": "No need for this many empty lines here", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T17:58:23Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/*\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ *\n+ * @author svr333\n+ *", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MTE1Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500491152", "bodyText": "Empty line before this please.", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T17:58:31Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/*\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ *\n+ * @author svr333\n+ *\n+ *\n+ */\n+public class ResurrectedTalisman extends Talisman {\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MTM4MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500491381", "bodyText": "This field is not necessary since the location is per-ItemStack not per-SlimefunItem.", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T17:58:55Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/*\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ *\n+ * @author svr333\n+ *\n+ *\n+ */\n+public class ResurrectedTalisman extends Talisman {\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+    private Location respawnLocation;", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MTgxMQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500491811", "bodyText": "Use e.getItem(), this is a fatal bug because item here refers to the ItemStack displayed in the guide.", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T17:59:36Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/*\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ *\n+ * @author svr333\n+ *\n+ *\n+ */\n+public class ResurrectedTalisman extends Talisman {\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+    private Location respawnLocation;\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+\n+            PersistentDataContainer pdc = item.getItemMeta().getPersistentDataContainer();", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MjMwMA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500492300", "bodyText": "world is nullable here, so you should do a check for this.", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T18:00:21Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/*\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ *\n+ * @author svr333\n+ *\n+ *\n+ */\n+public class ResurrectedTalisman extends Talisman {\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+    private Location respawnLocation;\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+\n+            PersistentDataContainer pdc = item.getItemMeta().getPersistentDataContainer();\n+            pdc.set(locationKey, PersistentDataType.STRING, json.toString());\n+\n+            //SlimefunPlugin.getLocalization().sendMessage(e.getPlayer(), \"\", true);\n+            e.getPlayer().sendMessage(\"Successfully saved current location. You will teleport here when you fall in the void.\");\n+        };\n+    }\n+\n+    @Nullable\n+    public Location getSavedLocation(boolean isEnderTalisman) {\n+        PersistentDataContainer pdc = item.getItemMeta().getPersistentDataContainer();\n+        String data = pdc.get(locationKey, PersistentDataType.STRING);\n+\n+        if (data != null) {\n+            return parseLocationFromJson(data);\n+        }\n+        else {\n+            return null;\n+        }\n+    }\n+\n+    private JsonObject createJsonFromLocation(@Nonnull Location loc) {\n+        JsonObject json = new JsonObject();\n+\n+        json.addProperty(\"world\", loc.getWorld().getUID().toString());\n+        json.addProperty(\"x\", loc.getX());\n+        json.addProperty(\"y\", loc.getY());\n+        json.addProperty(\"z\", loc.getZ());\n+\n+        return json;\n+    }\n+\n+    private Location parseLocationFromJson(@Nonnull String rawData) {\n+        JsonObject json = new JsonParser().parse(rawData).getAsJsonObject();\n+\n+        UUID uuid = UUID.fromString(json.get(\"world\").getAsString());\n+\n+        World world = Bukkit.getWorld(uuid);", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MjQwNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500492405", "bodyText": "Nonnull for this method please.", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T18:00:32Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/*\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ *\n+ * @author svr333\n+ *\n+ *\n+ */\n+public class ResurrectedTalisman extends Talisman {\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+    private Location respawnLocation;\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+\n+            PersistentDataContainer pdc = item.getItemMeta().getPersistentDataContainer();\n+            pdc.set(locationKey, PersistentDataType.STRING, json.toString());\n+\n+            //SlimefunPlugin.getLocalization().sendMessage(e.getPlayer(), \"\", true);\n+            e.getPlayer().sendMessage(\"Successfully saved current location. You will teleport here when you fall in the void.\");\n+        };\n+    }\n+\n+    @Nullable\n+    public Location getSavedLocation(boolean isEnderTalisman) {\n+        PersistentDataContainer pdc = item.getItemMeta().getPersistentDataContainer();\n+        String data = pdc.get(locationKey, PersistentDataType.STRING);\n+\n+        if (data != null) {\n+            return parseLocationFromJson(data);\n+        }\n+        else {\n+            return null;\n+        }\n+    }\n+\n+    private JsonObject createJsonFromLocation(@Nonnull Location loc) {", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MjY0NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500492645", "bodyText": "Again item here refers to the item in the Slimefun Guide.", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T18:00:56Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/*\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ *\n+ * @author svr333\n+ *\n+ *\n+ */\n+public class ResurrectedTalisman extends Talisman {\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+    private Location respawnLocation;\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+\n+            PersistentDataContainer pdc = item.getItemMeta().getPersistentDataContainer();\n+            pdc.set(locationKey, PersistentDataType.STRING, json.toString());\n+\n+            //SlimefunPlugin.getLocalization().sendMessage(e.getPlayer(), \"\", true);\n+            e.getPlayer().sendMessage(\"Successfully saved current location. You will teleport here when you fall in the void.\");\n+        };\n+    }\n+\n+    @Nullable\n+    public Location getSavedLocation(boolean isEnderTalisman) {\n+        PersistentDataContainer pdc = item.getItemMeta().getPersistentDataContainer();", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MjcyNg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500492726", "bodyText": "localization \ud83d\udc40", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T18:01:06Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,91 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/*\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ *\n+ * @author svr333\n+ *\n+ *\n+ */\n+public class ResurrectedTalisman extends Talisman {\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+    private Location respawnLocation;\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+\n+            PersistentDataContainer pdc = item.getItemMeta().getPersistentDataContainer();\n+            pdc.set(locationKey, PersistentDataType.STRING, json.toString());\n+\n+            //SlimefunPlugin.getLocalization().sendMessage(e.getPlayer(), \"\", true);\n+            e.getPlayer().sendMessage(\"Successfully saved current location. You will teleport here when you fall in the void.\");", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU0MjA1MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500542050", "bodyText": "Yeah I commented it out for a while so I could do do quick test with a preset messsage\nWill definitely change", "author": "svr333", "createdAt": "2020-10-06T19:24:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MjcyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MzA1MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500493051", "bodyText": "Why the delay here?", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T18:01:47Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +300,45 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() > 0 && Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            e.setAmount(e.getAmount() * 2);\n+        }\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity();\n+        Location respawnLocation = getSafeRespawnLocation(player);\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause == DamageCause.VOID && Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            SlimefunPlugin.runSync(() -> {\n+                PaperLib.teleportAsync(player, respawnLocation);\n+            }, 2);", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU0MTQ5NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500541495", "bodyText": "If the player is dead, teleporting will fail, so I need to do a little delay so the teleport happens after the death event is cancelled", "author": "svr333", "createdAt": "2020-10-06T19:23:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MzA1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU0MjY5Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500542692", "bodyText": "But why not put the Player's UUID into a Set and then set the spawn location on the PlayerRespawnEvent?", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T19:25:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MzA1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDYxOTUzNA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500619534", "bodyText": "Because the player never actually respawns, the DeathEvent is cancelled, so they need to be teleported", "author": "svr333", "createdAt": "2020-10-06T21:57:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MzA1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5MzQwMQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500493401", "bodyText": "Nullability annotation please", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T18:02:23Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +300,45 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() > 0 && Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            e.setAmount(e.getAmount() * 2);\n+        }\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity();\n+        Location respawnLocation = getSafeRespawnLocation(player);\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause == DamageCause.VOID && Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            SlimefunPlugin.runSync(() -> {\n+                PaperLib.teleportAsync(player, respawnLocation);\n+            }, 2);\n+        }\n+    }\n+", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ5NDE4NA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r500494184", "bodyText": "To obtain the itemstack you would need to create a method very similar to Talisman.checkFor.\nPerhaps you could even copy it exactly and return the ItemStack rather than a boolean.\nThen you could override the original Talisman.checkFor to just call your method and do a null check :)", "author": "TheBusyBiscuit", "createdAt": "2020-10-06T18:03:38Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +300,45 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() > 0 && Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            e.setAmount(e.getAmount() * 2);\n+        }\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity();\n+        Location respawnLocation = getSafeRespawnLocation(player);\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause == DamageCause.VOID && Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            SlimefunPlugin.runSync(() -> {\n+                PaperLib.teleportAsync(player, respawnLocation);\n+            }, 2);\n+        }\n+    }\n+\n+    private Location getSafeRespawnLocation(@Nonnull Player player) {\n+        Location savedLoc = null;\n+        /* Obtain Talisman here */\n+\n+        if (SlimefunUtils.containsSimilarItem(player.getInventory(), talisman.getItem(), true)) {\n+            savedLoc = talisman.getSavedLocation(false);\n+        }\n+        else if (SlimefunUtils.containsSimilarItem(player.getEnderChest(), talisman.getEnderVariant(), true)) {\n+            savedLoc = talisman.getSavedLocation(true);\n+        }", "originalCommit": "a9ce3c1f3e6049988326087d93dc1b1c92f4e67c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2eddaef88c2f5067c8809cca49e38a38adf6fc2b", "url": "https://github.com/Slimefun/Slimefun4/commit/2eddaef88c2f5067c8809cca49e38a38adf6fc2b", "message": "Fix comments", "committedDate": "2020-10-06T22:00:22Z", "type": "commit"}, {"oid": "db7e39ff10f01dda043b7fbcda45ac32439afc38", "url": "https://github.com/Slimefun/Slimefun4/commit/db7e39ff10f01dda043b7fbcda45ac32439afc38", "message": "Fix requested changes", "committedDate": "2020-10-06T22:06:32Z", "type": "commit"}, {"oid": "8ff3b31bf6296ca7dcf99b835ee1c4f834828ee7", "url": "https://github.com/Slimefun/Slimefun4/commit/8ff3b31bf6296ca7dcf99b835ee1c4f834828ee7", "message": "Create tryFind method", "committedDate": "2020-10-07T10:03:45Z", "type": "commit"}, {"oid": "a9b8f608ffe67353dd1e5de229852706269282eb", "url": "https://github.com/Slimefun/Slimefun4/commit/a9b8f608ffe67353dd1e5de229852706269282eb", "message": "Attempt to make it work", "committedDate": "2020-10-07T13:54:32Z", "type": "commit"}, {"oid": "3747ba4afafda121172974d5e1307ca202c5a502", "url": "https://github.com/Slimefun/Slimefun4/commit/3747ba4afafda121172974d5e1307ca202c5a502", "message": "Remove second consumeItem", "committedDate": "2020-10-07T13:59:33Z", "type": "commit"}, {"oid": "a5998773e3ac8b35236aaba41ae1c032b5263a69", "url": "https://github.com/Slimefun/Slimefun4/commit/a5998773e3ac8b35236aaba41ae1c032b5263a69", "message": "Fix build error", "committedDate": "2020-10-07T14:04:02Z", "type": "commit"}, {"oid": "085ad2cd6b1d66e179badb7f193c6fb4de08b509", "url": "https://github.com/Slimefun/Slimefun4/commit/085ad2cd6b1d66e179badb7f193c6fb4de08b509", "message": "Merge branch 'master' into MoreTalismans", "committedDate": "2020-10-07T14:06:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1NzI3OA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501057278", "bodyText": "Please add an empty line before this.\nAnd there is no point in making it static here.", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T14:26:41Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/**\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ * @author svr333\n+ *\n+ */\n+\n+public class ResurrectedTalisman extends Talisman {\n+    private static final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");", "originalCommit": "085ad2cd6b1d66e179badb7f193c6fb4de08b509", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1NzU5OA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501057598", "bodyText": "There is no need for this to be static (it probably shouldn't be anyway)", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T14:27:03Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/**\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ * @author svr333\n+ *\n+ */\n+\n+public class ResurrectedTalisman extends Talisman {\n+    private static final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+\n+            PersistentDataContainer pdc = e.getItem().getItemMeta().getPersistentDataContainer();\n+            pdc.set(locationKey, PersistentDataType.STRING, json.toString());\n+\n+            SlimefunPlugin.getLocalization().sendMessage(e.getPlayer(), \"messages.talisman.resurrected-location\", true);\n+        };\n+    }\n+\n+    @Nullable\n+    public static Location getSavedLocation(ItemStack item) {", "originalCommit": "085ad2cd6b1d66e179badb7f193c6fb4de08b509", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1NzgxNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501057815", "bodyText": "Also please add an annotation for the \"item\" parameter.", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T14:27:20Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/**\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ * @author svr333\n+ *\n+ */\n+\n+public class ResurrectedTalisman extends Talisman {\n+    private static final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+\n+            PersistentDataContainer pdc = e.getItem().getItemMeta().getPersistentDataContainer();\n+            pdc.set(locationKey, PersistentDataType.STRING, json.toString());\n+\n+            SlimefunPlugin.getLocalization().sendMessage(e.getPlayer(), \"messages.talisman.resurrected-location\", true);\n+        };\n+    }\n+\n+    @Nullable\n+    public static Location getSavedLocation(ItemStack item) {", "originalCommit": "085ad2cd6b1d66e179badb7f193c6fb4de08b509", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1OTE1MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501059150", "bodyText": ".getItemMeta() creates a copy of the original item meta, you will need to save the ItemMeta as a variable, modify it and then set the Itemmeta back to the ItemStack using setItemMeta, otherwise your changes won't be applied to the item.", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T14:28:59Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/**\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ * @author svr333\n+ *\n+ */\n+\n+public class ResurrectedTalisman extends Talisman {\n+    private static final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+\n+            PersistentDataContainer pdc = e.getItem().getItemMeta().getPersistentDataContainer();\n+            pdc.set(locationKey, PersistentDataType.STRING, json.toString());", "originalCommit": "085ad2cd6b1d66e179badb7f193c6fb4de08b509", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA3ODk1Mw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501078953", "bodyText": "I found the itemMeta part really complicated overall, but understand it better now.\nIs it okay if I add a new page to the developer guide on the wiki on how to do this?", "author": "svr333", "createdAt": "2020-10-07T14:53:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1OTE1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA3OTk1Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501079957", "bodyText": "I mean sure, although I am not quite sure on how to generalize this but feel free to!", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T14:54:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1OTE1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1OTgwMQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501059801", "bodyText": "Also there's PersistentJsonDataType.JSON_OBJECT in Slimefun too, no need to manually do the string serialization.", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T14:29:46Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/**\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ * @author svr333\n+ *\n+ */\n+\n+public class ResurrectedTalisman extends Talisman {\n+    private static final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+\n+            PersistentDataContainer pdc = e.getItem().getItemMeta().getPersistentDataContainer();\n+            pdc.set(locationKey, PersistentDataType.STRING, json.toString());", "originalCommit": "085ad2cd6b1d66e179badb7f193c6fb4de08b509", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2ODgwMQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501068801", "bodyText": "Oh this is handy, I missed that", "author": "svr333", "createdAt": "2020-10-07T14:41:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1OTgwMQ=="}], "type": "inlineReview"}, {"oid": "79d652bb705a587a8e111ec1a5e4ded079482ae9", "url": "https://github.com/Slimefun/Slimefun4/commit/79d652bb705a587a8e111ec1a5e4ded079482ae9", "message": "Add .factorypath and .vscode folder", "committedDate": "2020-10-07T14:42:53Z", "type": "commit"}, {"oid": "9be590459a8a8defb1d05b18d293042349805dd5", "url": "https://github.com/Slimefun/Slimefun4/commit/9be590459a8a8defb1d05b18d293042349805dd5", "message": "Merge branch 'MoreTalismans' of https://github.com/svr333/Slimefun4 into MoreTalismans", "committedDate": "2020-10-07T14:43:20Z", "type": "commit"}, {"oid": "5e39920e59fd682c6e9caccab5cea7ae88e11659", "url": "https://github.com/Slimefun/Slimefun4/commit/5e39920e59fd682c6e9caccab5cea7ae88e11659", "message": "Remove static's", "committedDate": "2020-10-07T14:45:34Z", "type": "commit"}, {"oid": "273d95ed9c82b6d5b8f8954e61048dbe6a519c68", "url": "https://github.com/Slimefun/Slimefun4/commit/273d95ed9c82b6d5b8f8954e61048dbe6a519c68", "message": "Delete settings.json", "committedDate": "2020-10-07T14:51:52Z", "type": "commit"}, {"oid": "a6a29509c7e6ebd7b7d853e47e03006bff46c0c6", "url": "https://github.com/Slimefun/Slimefun4/commit/a6a29509c7e6ebd7b7d853e47e03006bff46c0c6", "message": "Fix remaining issues", "committedDate": "2020-10-07T15:02:42Z", "type": "commit"}, {"oid": "d17d21b7ed4d23e7449699cdcb9a78ae27d3c9d7", "url": "https://github.com/Slimefun/Slimefun4/commit/d17d21b7ed4d23e7449699cdcb9a78ae27d3c9d7", "message": "Merge branch 'MoreTalismans' of https://github.com/svr333/Slimefun4 into MoreTalismans", "committedDate": "2020-10-07T15:04:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEwNjAwMQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501106001", "bodyText": "This basically does the same as checkFor other than having a different return type right?\nIf so, then one of these is redundant, you could also just rewrite checkFor to basically run this method and do an != null check on the returned ItemStack.", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T15:28:33Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/Talisman.java", "diffHunk": "@@ -179,6 +183,53 @@ public static boolean checkFor(Event e, SlimefunItem item) {\n         }\n     }\n \n+    @Nullable\n+    public static ItemStack checkForAndGet(@Nonnull SlimefunItemStack stack, @Nonnull Player player) {\n+        return checkForAndGet(stack.getItem(), player);\n+    }\n+\n+    @Nullable\n+    public static ItemStack checkForAndGet(@Nonnull SlimefunItem sfItem, @Nonnull Player player) {", "originalCommit": "d17d21b7ed4d23e7449699cdcb9a78ae27d3c9d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE1NTQ4Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501155487", "bodyText": "Its actually quite different, checkFor also consumes the item, adds potion effects and all that, checkForAndGet just checks for the talisman and returns it", "author": "svr333", "createdAt": "2020-10-07T16:38:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEwNjAwMQ=="}], "type": "inlineReview"}, {"oid": "b722dc2a002b202acfc8f159b645b8804482b421", "url": "https://github.com/Slimefun/Slimefun4/commit/b722dc2a002b202acfc8f159b645b8804482b421", "message": "Update lore", "committedDate": "2020-10-07T22:20:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NTE0OA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501355148", "bodyText": "I think replacing the two currently empty slots with magical glass and requiring two filled flasks in the middle would be a good improvement.\nWe don't wanna make it too cheap ;)", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T22:53:16Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/SlimefunItemSetup.java", "diffHunk": "@@ -878,6 +879,15 @@ public static void setup(@Nonnull SlimefunPlugin plugin) {\n         false, false, \"caveman\", 50, new PotionEffect(PotionEffectType.FAST_DIGGING, 800, 2))\n         .register(plugin);\n \n+        new Talisman(SlimefunItems.TALISMAN_WISE,\n+        new ItemStack[] { SlimefunItems.MAGIC_LUMP_3, null, SlimefunItems.MAGIC_LUMP_3, SlimefunItems.MAGICAL_GLASS, SlimefunItems.TALISMAN_MAGICIAN, SlimefunItems.FILLED_FLASK_OF_KNOWLEDGE, SlimefunItems.MAGIC_LUMP_3, null, SlimefunItems.MAGIC_LUMP_3},", "originalCommit": "b722dc2a002b202acfc8f159b645b8804482b421", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM3NTA3Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501375077", "bodyText": "Sure", "author": "svr333", "createdAt": "2020-10-07T23:56:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NTE0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NTMzMw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501355333", "bodyText": "One Essence of afterlife in the middle top and two elytra scales on the sides in the middle?", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T22:53:51Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/SlimefunItemSetup.java", "diffHunk": "@@ -878,6 +879,15 @@ public static void setup(@Nonnull SlimefunPlugin plugin) {\n         false, false, \"caveman\", 50, new PotionEffect(PotionEffectType.FAST_DIGGING, 800, 2))\n         .register(plugin);\n \n+        new Talisman(SlimefunItems.TALISMAN_WISE,\n+        new ItemStack[] { SlimefunItems.MAGIC_LUMP_3, null, SlimefunItems.MAGIC_LUMP_3, SlimefunItems.MAGICAL_GLASS, SlimefunItems.TALISMAN_MAGICIAN, SlimefunItems.FILLED_FLASK_OF_KNOWLEDGE, SlimefunItems.MAGIC_LUMP_3, null, SlimefunItems.MAGIC_LUMP_3},\n+        false, false, \"wise\", 20)\n+        .register(plugin);\n+\n+        new ResurrectedTalisman(SlimefunItems.TALISMAN_RESURRECTED,\n+        new ItemStack[] { SlimefunItems.MAGIC_LUMP_3, null, SlimefunItems.MAGIC_LUMP_3, SlimefunItems.ESSENCE_OF_AFTERLIFE, SlimefunItems.TALISMAN_ANGEL, SlimefunItems.ELYTRA_SCALE, SlimefunItems.MAGIC_LUMP_3, null, SlimefunItems.MAGIC_LUMP_3 })", "originalCommit": "b722dc2a002b202acfc8f159b645b8804482b421", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM3NTM1MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501375351", "bodyText": "Sure, the Essense of afterlife is the hardest peace to craft here so I dont think itll matter too much, but its a little exta effort they need to put in for this item", "author": "svr333", "createdAt": "2020-10-07T23:57:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NTMzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NTUzMw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501355533", "bodyText": "The last line of this lore has no color.", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T22:54:32Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/SlimefunItems.java", "diffHunk": "@@ -548,6 +548,8 @@ private SlimefunItems() {}\n     public static final SlimefunItemStack TALISMAN_WHIRLWIND = new SlimefunItemStack(\"WHIRLWIND_TALISMAN\", Material.EMERALD, \"&aTalisman of the Whirlwind\", \"\", \"&fHaving this Talisman\", \"&fin your Inventory will reflect\", \"&f60% of any projectiles fired at you.\", \"&e&oOnly a thrown Trident can pierce\", \"&e&othrough this layer of protection\");\n     public static final SlimefunItemStack TALISMAN_WIZARD = new SlimefunItemStack(\"WIZARD_TALISMAN\", Material.EMERALD, \"&aTalisman of the Wizard\", \"\", \"&fWhile you have this Talisman\", \"&fin your Inventory it allows you to\", \"&fobtain Fortune Level 4/5 however\", \"&fit also has a chance to lower the\", \"&fLevel of some Enchantments on your Item\");\n     public static final SlimefunItemStack TALISMAN_CAVEMAN = new SlimefunItemStack(\"CAVEMAN_TALISMAN\", Material.EMERALD, \"&aTalisman of the Caveman\", \"\", \"&fWhile you have this Talisman\", \"&fin your inventory it gives\", \"&fyou a 50% chance for a decent\", \"&fHaste buff when you mine any ore\");\n+    public static final SlimefunItemStack TALISMAN_WISE = new SlimefunItemStack(\"WISE_TALISMAN\", Material.EMERALD, \"&aTalisman of the Wise\", \"\", \"&fWhile you have this Talisman\", \"&fin your inventory it gives\", \"&fyou a 20% chance of doubling\", \"&fall experience you obtain\");\n+    public static final SlimefunItemStack TALISMAN_RESURRECTED = new SlimefunItemStack(\"RESURRECTED_TALISMAN\", Material.EMERALD, \"&aTalisman of the Resurrected\", \"\", \"&fWhile you have this Talisman\", \"&fin your inventory it will\", \"&fteleport you back safely when\", \"&fyou fall into the void\", \"&e&oRight click while holding this\", \"&e&otalisman to set a custom\", \"respawn location!\");", "originalCommit": "b722dc2a002b202acfc8f159b645b8804482b421", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NjE1Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501356152", "bodyText": "I still think PlayerRespawnEvent#setRespawnLocation(...) would be much much more reliable here.", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T22:56:14Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +303,46 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() > 0 && Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            e.setAmount(e.getAmount() * 2);\n+        }\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause == DamageCause.VOID && Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            SlimefunPlugin.runSync(() -> {\n+                PaperLib.teleportAsync(player, getSafeRespawnLocation(player));\n+            }, 2);", "originalCommit": "b722dc2a002b202acfc8f159b645b8804482b421", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM3NTUzNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501375535", "bodyText": "I cant use the respawnLocation, because they never actually die", "author": "svr333", "createdAt": "2020-10-07T23:57:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NjE1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgyNzgwNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501827805", "bodyText": "Where does that happen? In Talisman.checkFor?\nIf so then you should definitely add a lot of  comments in this method because that isn't apparent from a single look.", "author": "TheBusyBiscuit", "createdAt": "2020-10-08T15:49:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NjE1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk2ODM4Mw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501968383", "bodyText": "Where does what happen?\n@TheBusyBiscuit\nBasically how it flows right now is:\n\nPlayerDeathEvent gets fired (The player dies after all event handlers are done handling it)\nI do checks to see if the talisman is there and whatnot, potion effects get added, ...\nI teleport the user to a safe location\nThen the event is cancelled, causing the user not to die (see image)\n\nuser keeps doing its thing", "author": "svr333", "createdAt": "2020-10-08T19:39:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NjE1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1NjI1OA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501356258", "bodyText": "SlimefunItem.getByItem(...)", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T22:56:30Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +303,46 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() > 0 && Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            e.setAmount(e.getAmount() * 2);\n+        }\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause == DamageCause.VOID && Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            SlimefunPlugin.runSync(() -> {\n+                PaperLib.teleportAsync(player, getSafeRespawnLocation(player));\n+            }, 2);\n+        }\n+    }\n+\n+    @Nonnull\n+    private Location getSafeRespawnLocation(@Nonnull Player player) {\n+        ItemStack item = Talisman.checkForAndGet(SlimefunItems.TALISMAN_RESURRECTED, player);\n+        SlimefunItem sfItem = ResurrectedTalisman.getByItem(item);", "originalCommit": "b722dc2a002b202acfc8f159b645b8804482b421", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1Njc0NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501356745", "bodyText": "This null check should happen way earlier, before the SlimefunItem is assigned.", "author": "TheBusyBiscuit", "createdAt": "2020-10-07T22:58:00Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +303,46 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() > 0 && Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            e.setAmount(e.getAmount() * 2);\n+        }\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause == DamageCause.VOID && Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            SlimefunPlugin.runSync(() -> {\n+                PaperLib.teleportAsync(player, getSafeRespawnLocation(player));\n+            }, 2);\n+        }\n+    }\n+\n+    @Nonnull\n+    private Location getSafeRespawnLocation(@Nonnull Player player) {\n+        ItemStack item = Talisman.checkForAndGet(SlimefunItems.TALISMAN_RESURRECTED, player);\n+        SlimefunItem sfItem = ResurrectedTalisman.getByItem(item);\n+\n+        if (sfItem instanceof ResurrectedTalisman) {\n+            ResurrectedTalisman talisman = (ResurrectedTalisman) sfItem;\n+\n+            if (item != null) {", "originalCommit": "b722dc2a002b202acfc8f159b645b8804482b421", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "73cbbc3b546bbdb3697a670b60679f530fbd2aa6", "url": "https://github.com/Slimefun/Slimefun4/commit/73cbbc3b546bbdb3697a670b60679f530fbd2aa6", "message": "Improve recipes of new Talismans", "committedDate": "2020-10-08T13:29:46Z", "type": "commit"}, {"oid": "82716dd808d6607e698b01d68d058d49509d2f5c", "url": "https://github.com/Slimefun/Slimefun4/commit/82716dd808d6607e698b01d68d058d49509d2f5c", "message": "Fix resurrected_talisman lore", "committedDate": "2020-10-08T13:30:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgzODg5MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501838890", "bodyText": "I would definitely add a canBuild check here before the location is saved. (e.g. to prevent saving a location in other players' regions.)", "author": "poma123", "createdAt": "2020-10-08T16:05:55Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+\n+import io.github.thebusybiscuit.cscorelib2.data.PersistentJsonDataType;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.entity.Item;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.inventory.meta.ItemMeta;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import org.bukkit.potion.PotionEffectType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.UUID;\n+\n+/**\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ * @author svr333\n+ *\n+ */\n+\n+public class ResurrectedTalisman extends Talisman {\n+\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+            ItemMeta itemMeta = e.getItem().getItemMeta();\n+\n+            itemMeta.getPersistentDataContainer().set(locationKey, PersistentJsonDataType.JSON_OBJECT, json);\n+\n+            e.getItem().setItemMeta(itemMeta);\n+\n+            SlimefunPlugin.getLocalization().sendMessage(e.getPlayer(), \"messages.talisman.resurrected-location\", true);", "originalCommit": "82716dd808d6607e698b01d68d058d49509d2f5c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk2ODUzOQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501968539", "bodyText": "didnt know this was a thing, will definitely add that", "author": "svr333", "createdAt": "2020-10-08T19:40:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgzODg5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk3NDg0Ng==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501974846", "bodyText": "Hint: SlimefunPlugin.getProtectionManager().hasPermission(p, currentLoc, ProtectableAction.PLACE_BLOCK);", "author": "poma123", "createdAt": "2020-10-08T19:52:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgzODg5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg0MDAzMw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501840033", "bodyText": "Also, is this \"safe location\" really a safe location? I mean if someone fills that saved location with blocks, then the player will be teleported to that unsafe location anyway, right? If so, we should consider doing some checks before this teleport.", "author": "poma123", "createdAt": "2020-10-08T16:07:31Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -292,6 +303,46 @@ public void onBlockBreak(BlockBreakEvent e) {\n         }\n     }\n \n+    @EventHandler\n+    public void onExperienceReceive(PlayerExpChangeEvent e) {\n+        if (e.getAmount() > 0 && Talisman.checkFor(e, SlimefunItems.TALISMAN_WISE)) {\n+            e.setAmount(e.getAmount() * 2);\n+        }\n+    }\n+\n+    @EventHandler\n+    public void onPlayerDeath(PlayerDeathEvent e) {\n+        Player player = e.getEntity();\n+        DamageCause dmgCause = player.getLastDamageCause().getCause();\n+\n+        if (dmgCause == DamageCause.VOID && Talisman.checkFor(e, SlimefunItems.TALISMAN_RESURRECTED)) {\n+            SlimefunPlugin.runSync(() -> {\n+                PaperLib.teleportAsync(player, getSafeRespawnLocation(player));", "originalCommit": "82716dd808d6607e698b01d68d058d49509d2f5c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk2OTIxNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501969215", "bodyText": "Thats a good point, but the player can always choose not to set one, and hell then end up at his bedspawn.\nAnd he can always change the respawn point of his talisman. I dont think we should do extra checks to ensure a safe respawn location.", "author": "svr333", "createdAt": "2020-10-08T19:41:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg0MDAzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk3MjE0Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501972147", "bodyText": "And if you do think it's a necessity, it might be better to make this a public method somewhere so it can be reused for other teleport ocassions", "author": "svr333", "createdAt": "2020-10-08T19:47:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg0MDAzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk3NzA0MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r501977041", "bodyText": "Thats a good point, but the player can always choose not to set one, and hell then end up at his bedspawn.\nAnd he can always change the respawn point of his talisman. I dont think we should do extra checks to ensure a safe respawn location.\n\nFair enough though. This makes the talisman a little unsafe, but that's the cost I guess :lul:", "author": "poma123", "createdAt": "2020-10-08T19:57:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg0MDAzMw=="}], "type": "inlineReview"}, {"oid": "ddd8ccec6b139b2fb05e6112dfa721f09b9aa262", "url": "https://github.com/Slimefun/Slimefun4/commit/ddd8ccec6b139b2fb05e6112dfa721f09b9aa262", "message": "Imports go brrrrrr", "committedDate": "2020-10-08T16:12:34Z", "type": "commit"}, {"oid": "7c030c736f495c11ad1a96eebbf6ebc7e8ad7902", "url": "https://github.com/Slimefun/Slimefun4/commit/7c030c736f495c11ad1a96eebbf6ebc7e8ad7902", "message": "Refactor (still build errors)", "committedDate": "2020-10-08T16:21:00Z", "type": "commit"}, {"oid": "172dfc061095748b04337de6f762b8fae171dcf3", "url": "https://github.com/Slimefun/Slimefun4/commit/172dfc061095748b04337de6f762b8fae171dcf3", "message": "Merge branch 'master' of https://github.com/Slimefun/Slimefun4 into MoreTalismans", "committedDate": "2020-10-08T16:22:23Z", "type": "commit"}, {"oid": "dc21ec5752c26f7f13d0d727ddfcf78720306de7", "url": "https://github.com/Slimefun/Slimefun4/commit/dc21ec5752c26f7f13d0d727ddfcf78720306de7", "message": "Merge branch 'MoreTalismans' of https://github.com/svr333/Slimefun4 into MoreTalismans", "committedDate": "2020-10-08T16:23:15Z", "type": "commit"}, {"oid": "cdac03e411d4aea35496b8893d351a698ab6d663", "url": "https://github.com/Slimefun/Slimefun4/commit/cdac03e411d4aea35496b8893d351a698ab6d663", "message": "Update imports-fix.yml", "committedDate": "2020-10-08T16:25:57Z", "type": "commit"}, {"oid": "488f1c626bacc9fe7d4dfe4f034143f65be03b00", "url": "https://github.com/Slimefun/Slimefun4/commit/488f1c626bacc9fe7d4dfe4f034143f65be03b00", "message": "Update imports-fix.yml", "committedDate": "2020-10-08T16:26:45Z", "type": "commit"}, {"oid": "cfc55038ea683da86c1476eab5685a3a89a3879e", "url": "https://github.com/Slimefun/Slimefun4/commit/cfc55038ea683da86c1476eab5685a3a89a3879e", "message": "Maybe this?", "committedDate": "2020-10-08T16:29:24Z", "type": "commit"}, {"oid": "3bcc00b62f4968c15beebfe174df9a0ba0d7cbad", "url": "https://github.com/Slimefun/Slimefun4/commit/3bcc00b62f4968c15beebfe174df9a0ba0d7cbad", "message": "Perhaps we just need ticks", "committedDate": "2020-10-08T16:29:59Z", "type": "commit"}, {"oid": "b399d0c942673b436cd5a1d879a160cbffb6e419", "url": "https://github.com/Slimefun/Slimefun4/commit/b399d0c942673b436cd5a1d879a160cbffb6e419", "message": "Or maybe the ticks go here...", "committedDate": "2020-10-08T16:30:35Z", "type": "commit"}, {"oid": "1cfc8aec90866bd06f721f6b7e9a067cffc93bcd", "url": "https://github.com/Slimefun/Slimefun4/commit/1cfc8aec90866bd06f721f6b7e9a067cffc93bcd", "message": "Refactor (no build errors)", "committedDate": "2020-10-08T20:15:30Z", "type": "commit"}, {"oid": "9dcf895258ccee6373b5073ad431685b98dc829f", "url": "https://github.com/Slimefun/Slimefun4/commit/9dcf895258ccee6373b5073ad431685b98dc829f", "message": "Merge branch 'MoreTalismans' of https://github.com/svr333/Slimefun4 into MoreTalismans", "committedDate": "2020-10-08T20:15:53Z", "type": "commit"}, {"oid": "b042fbd3a4eb65af898b49225abfa1eba86325ba", "url": "https://github.com/Slimefun/Slimefun4/commit/b042fbd3a4eb65af898b49225abfa1eba86325ba", "message": "Add check for ProtectionManagers", "committedDate": "2020-10-08T20:34:18Z", "type": "commit"}, {"oid": "3bb974ce96770db9f3381204ac73c95b82b7b195", "url": "https://github.com/Slimefun/Slimefun4/commit/3bb974ce96770db9f3381204ac73c95b82b7b195", "message": "Delete imports-fix.yml", "committedDate": "2020-10-08T21:25:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM0NDYxNg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r502344616", "bodyText": "This variable should not be declared before it's relevant (inside the first if-block)", "author": "TheBusyBiscuit", "createdAt": "2020-10-09T10:47:02Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,102 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.cscorelib2.data.PersistentJsonDataType;\n+import io.github.thebusybiscuit.cscorelib2.protection.ProtectableAction;\n+\n+import org.bukkit.potion.PotionEffectType;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import javax.annotation.Nonnull;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.entity.*;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.inventory.meta.ItemMeta;\n+import javax.annotation.Nullable;\n+import java.lang.Runnable;\n+import java.util.UUID;\n+\n+/**\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ * @author svr333\n+ *\n+ */\n+\n+public class ResurrectedTalisman extends Talisman {\n+\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);", "originalCommit": "3bb974ce96770db9f3381204ac73c95b82b7b195", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM0NDgyMA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r502344820", "bodyText": "You should also move this into the if-block and do .hasItemMeta() before-hand.", "author": "TheBusyBiscuit", "createdAt": "2020-10-09T10:47:31Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/ResurrectedTalisman.java", "diffHunk": "@@ -0,0 +1,102 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical.talismans;\n+\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+import io.github.thebusybiscuit.cscorelib2.data.PersistentJsonDataType;\n+import io.github.thebusybiscuit.cscorelib2.protection.ProtectableAction;\n+\n+import org.bukkit.potion.PotionEffectType;\n+import io.github.thebusybiscuit.slimefun4.core.handlers.ItemUseHandler;\n+import org.bukkit.persistence.PersistentDataContainer;\n+import org.bukkit.persistence.PersistentDataType;\n+import org.bukkit.potion.PotionEffect;\n+import javax.annotation.Nonnull;\n+import io.github.thebusybiscuit.slimefun4.implementation.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+import org.bukkit.Bukkit;\n+import org.bukkit.Location;\n+import org.bukkit.entity.*;\n+import org.bukkit.NamespacedKey;\n+import org.bukkit.World;\n+import org.bukkit.inventory.ItemStack;\n+import org.bukkit.inventory.meta.ItemMeta;\n+import javax.annotation.Nullable;\n+import java.lang.Runnable;\n+import java.util.UUID;\n+\n+/**\n+ * This {@link SlimefunItem} is a special variant of the {@Link Talisman}. This specific {@Link Talisman} saves you\n+ * from a death caused by the void.\n+ *\n+ * @author svr333\n+ *\n+ */\n+\n+public class ResurrectedTalisman extends Talisman {\n+\n+    private final NamespacedKey locationKey = new NamespacedKey(SlimefunPlugin.instance(), \"resurrected_location\");\n+\n+    public ResurrectedTalisman(SlimefunItemStack item, ItemStack[] recipe) {\n+        super(item, recipe, true, true, \"resurrected\", new PotionEffect(PotionEffectType.GLOWING, 400, 0), new PotionEffect(PotionEffectType.ABSORPTION, 400, 4), new PotionEffect(PotionEffectType.DAMAGE_RESISTANCE, 200, 20));\n+\n+        addItemHandler(getItemHandler());\n+    }\n+\n+    public ItemUseHandler getItemHandler() {\n+        return e -> {\n+            Location currentLoc = e.getPlayer().getLocation();\n+            JsonObject json = createJsonFromLocation(currentLoc);\n+            ItemMeta itemMeta = e.getItem().getItemMeta();", "originalCommit": "3bb974ce96770db9f3381204ac73c95b82b7b195", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "64684d86c3bc5a3a11f94e13da3d9a820999d286", "url": "https://github.com/Slimefun/Slimefun4/commit/64684d86c3bc5a3a11f94e13da3d9a820999d286", "message": "Reduce to local scoop", "committedDate": "2020-10-09T14:49:06Z", "type": "commit"}, {"oid": "bbf5236bd6e0c46fa4c7eb17a791d3b1880a1499", "url": "https://github.com/Slimefun/Slimefun4/commit/bbf5236bd6e0c46fa4c7eb17a791d3b1880a1499", "message": "Merge branch 'MoreTalismans' of https://github.com/svr333/Slimefun4 into MoreTalismans", "committedDate": "2020-10-09T14:49:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk2NzcxNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r502967715", "bodyText": "First off, I would have still left the existing method. And I think these methods can use a bit renaming too.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static ItemStack checkFor(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n          \n          \n            \n                    return checkFor(e, stack.getItem());\n          \n          \n            \n                }\n          \n          \n            \n                public static boolean activate(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n          \n          \n            \n                    return activateAndGet(e, stack) != null;\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                public static ItemStack activateAndGet(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n          \n          \n            \n                    return activateAndGet(e, stack.getItem());\n          \n          \n            \n                }", "author": "TheBusyBiscuit", "createdAt": "2020-10-11T21:24:24Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/Talisman.java", "diffHunk": "@@ -130,48 +134,61 @@ private static boolean hasMessage(Talisman talisman) {\n         return talisman.getMessageSuffix() != null;\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItemStack stack) {\n+    public static ItemStack checkFor(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n         return checkFor(e, stack.getItem());\n     }", "originalCommit": "bbf5236bd6e0c46fa4c7eb17a791d3b1880a1499", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk3MjM4Mw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r502972383", "bodyText": "Im going to call the first one tryActivate since it returns a boolean and that makes more sense when reading", "author": "svr333", "createdAt": "2020-10-11T22:10:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk2NzcxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk2NzkyNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r502967925", "bodyText": "Doing containsSimilarItem() and then looping through the inventory again to get the item is quite resource intense.\nOnly use your retrieve method and then just return that.", "author": "TheBusyBiscuit", "createdAt": "2020-10-11T21:26:15Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/Talisman.java", "diffHunk": "@@ -130,48 +134,61 @@ private static boolean hasMessage(Talisman talisman) {\n         return talisman.getMessageSuffix() != null;\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItemStack stack) {\n+    public static ItemStack checkFor(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n         return checkFor(e, stack.getItem());\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItem item) {\n+    @Nullable\n+    public static ItemStack checkFor(@Nonnull Event e, @Nonnull SlimefunItem item) {\n         if (!(item instanceof Talisman)) {\n-            return false;\n+            return null;\n         }\n \n         Talisman talisman = (Talisman) item;\n         if (ThreadLocalRandom.current().nextInt(100) > talisman.getChance()) {\n-            return false;\n+            return null;\n         }\n \n         Player p = getPlayerByEventType(e);\n         if (p == null || !pass(p, talisman)) {\n-            return false;\n+            return null;\n         }\n \n         ItemStack talismanItem = talisman.getItem();\n+        ItemStack enderTalisman = talisman.getEnderVariant();\n+\n+        if (!Slimefun.hasUnlocked(p, talisman, true)) {\n+            return null;\n+        }\n \n         if (SlimefunUtils.containsSimilarItem(p.getInventory(), talismanItem, true)) {\n-            if (Slimefun.hasUnlocked(p, talisman, true)) {\n-                activateTalisman(e, p, p.getInventory(), talisman);\n-                return true;\n-            } else {\n-                return false;\n-            }\n-        } else {\n-            ItemStack enderTalisman = talisman.getEnderVariant();\n-\n-            if (SlimefunUtils.containsSimilarItem(p.getEnderChest(), enderTalisman, true)) {\n-                if (Slimefun.hasUnlocked(p, talisman, true)) {\n-                    activateTalisman(e, p, p.getEnderChest(), talisman);\n-                    return true;\n-                } else {\n-                    return false;\n-                }\n-            } else {\n-                return false;\n+            activateTalisman(e, p, p.getInventory(), talisman);\n+            return retrieveTalismanFromInventory(p.getInventory(), talisman);\n+        }\n+        else if (SlimefunUtils.containsSimilarItem(p.getEnderChest(), enderTalisman, true)) { \n+            activateTalisman(e, p, p.getEnderChest(), talisman);\n+            return retrieveTalismanFromInventory(p.getEnderChest(), talisman);\n+        }", "originalCommit": "bbf5236bd6e0c46fa4c7eb17a791d3b1880a1499", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk2Nzk3MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r502967971", "bodyText": "Also can just do this...\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (SlimefunUtils.isItemSimilar(item, talisman.getItem(), true, false)) {\n          \n          \n            \n                        if (talisman.isItem(item)) {", "author": "TheBusyBiscuit", "createdAt": "2020-10-11T21:26:45Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/Talisman.java", "diffHunk": "@@ -130,48 +134,61 @@ private static boolean hasMessage(Talisman talisman) {\n         return talisman.getMessageSuffix() != null;\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItemStack stack) {\n+    public static ItemStack checkFor(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n         return checkFor(e, stack.getItem());\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItem item) {\n+    @Nullable\n+    public static ItemStack checkFor(@Nonnull Event e, @Nonnull SlimefunItem item) {\n         if (!(item instanceof Talisman)) {\n-            return false;\n+            return null;\n         }\n \n         Talisman talisman = (Talisman) item;\n         if (ThreadLocalRandom.current().nextInt(100) > talisman.getChance()) {\n-            return false;\n+            return null;\n         }\n \n         Player p = getPlayerByEventType(e);\n         if (p == null || !pass(p, talisman)) {\n-            return false;\n+            return null;\n         }\n \n         ItemStack talismanItem = talisman.getItem();\n+        ItemStack enderTalisman = talisman.getEnderVariant();\n+\n+        if (!Slimefun.hasUnlocked(p, talisman, true)) {\n+            return null;\n+        }\n \n         if (SlimefunUtils.containsSimilarItem(p.getInventory(), talismanItem, true)) {\n-            if (Slimefun.hasUnlocked(p, talisman, true)) {\n-                activateTalisman(e, p, p.getInventory(), talisman);\n-                return true;\n-            } else {\n-                return false;\n-            }\n-        } else {\n-            ItemStack enderTalisman = talisman.getEnderVariant();\n-\n-            if (SlimefunUtils.containsSimilarItem(p.getEnderChest(), enderTalisman, true)) {\n-                if (Slimefun.hasUnlocked(p, talisman, true)) {\n-                    activateTalisman(e, p, p.getEnderChest(), talisman);\n-                    return true;\n-                } else {\n-                    return false;\n-                }\n-            } else {\n-                return false;\n+            activateTalisman(e, p, p.getInventory(), talisman);\n+            return retrieveTalismanFromInventory(p.getInventory(), talisman);\n+        }\n+        else if (SlimefunUtils.containsSimilarItem(p.getEnderChest(), enderTalisman, true)) { \n+            activateTalisman(e, p, p.getEnderChest(), talisman);\n+            return retrieveTalismanFromInventory(p.getEnderChest(), talisman);\n+        }\n+\n+        return null;\n+    }\n+\n+    @Nullable\n+    private static ItemStack retrieveTalismanFromInventory(@Nonnull Inventory inv, @Nonnull Talisman talisman) {\n+        ItemStack[] contents = inv.getContents();\n+        for (int i = 0; i < contents.length; i++) {\n+            ItemStack item = contents[i];\n+\n+            if (SlimefunUtils.isItemSimilar(item, talisman.getItem(), true, false)) {", "originalCommit": "bbf5236bd6e0c46fa4c7eb17a791d3b1880a1499", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "125239f173a5fa35d0d045b52770e899950bf7d6", "url": "https://github.com/Slimefun/Slimefun4/commit/125239f173a5fa35d0d045b52770e899950bf7d6", "message": "Refactor and rename methods", "committedDate": "2020-10-11T22:19:19Z", "type": "commit"}, {"oid": "b0b5c5a47f992474a87b878246a3ec685f474169", "url": "https://github.com/Slimefun/Slimefun4/commit/b0b5c5a47f992474a87b878246a3ec685f474169", "message": "Simplify to talisman.isItem()", "committedDate": "2020-10-11T22:20:39Z", "type": "commit"}, {"oid": "4d474de290ebb071f4e0f61e9fc0ca16c7c2a3f4", "url": "https://github.com/Slimefun/Slimefun4/commit/4d474de290ebb071f4e0f61e9fc0ca16c7c2a3f4", "message": "Merge branch 'master' into MoreTalismans", "committedDate": "2020-10-11T22:57:11Z", "type": "commit"}, {"oid": "db95cca3fbcc4eb3709ee74c0015522be0e987dd", "url": "https://github.com/Slimefun/Slimefun4/commit/db95cca3fbcc4eb3709ee74c0015522be0e987dd", "message": "Merge branch 'master' into MoreTalismans", "committedDate": "2020-10-12T17:59:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEzMDI5Mg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r509130292", "bodyText": "CAVEMAN = WISE?", "author": "TheBusyBiscuit", "createdAt": "2020-10-21T09:29:36Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/TalismanListener.java", "diffHunk": "@@ -289,10 +302,48 @@ public void onBlockDropItems(BlockDropItemEvent e) {\n     @EventHandler\n     public void onBlockBreak(BlockBreakEvent e) {\n         if (SlimefunTag.CAVEMAN_TALISMAN_TRIGGERS.isTagged(e.getBlock().getType())) {\n-            Talisman.checkFor(e, SlimefunItems.TALISMAN_CAVEMAN);\n+            Talisman.tryActivate(e, SlimefunItems.TALISMAN_WISE);", "originalCommit": "db95cca3fbcc4eb3709ee74c0015522be0e987dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY0MzkxNg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r509643916", "bodyText": "copy & paste error :)", "author": "svr333", "createdAt": "2020-10-21T20:08:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEzMDI5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEzMTM4MQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r509131381", "bodyText": "Redundant brackets\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return (tryActivateAndGet(e, stack.getItem()) != null);\n          \n          \n            \n                    return tryActivateAndGet(e, stack.getItem()) != null;", "author": "TheBusyBiscuit", "createdAt": "2020-10-21T09:31:12Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/Talisman.java", "diffHunk": "@@ -130,48 +134,71 @@ private static boolean hasMessage(Talisman talisman) {\n         return talisman.getMessageSuffix() != null;\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItemStack stack) {\n-        return checkFor(e, stack.getItem());\n+    public static boolean tryActivate(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n+        return (tryActivateAndGet(e, stack.getItem()) != null);", "originalCommit": "db95cca3fbcc4eb3709ee74c0015522be0e987dd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEzMTQ5OQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r509131499", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return (tryActivateAndGet(e, item) != null);\n          \n          \n            \n                    return tryActivateAndGet(e, item) != null;", "author": "TheBusyBiscuit", "createdAt": "2020-10-21T09:31:21Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/Talisman.java", "diffHunk": "@@ -130,48 +134,71 @@ private static boolean hasMessage(Talisman talisman) {\n         return talisman.getMessageSuffix() != null;\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItemStack stack) {\n-        return checkFor(e, stack.getItem());\n+    public static boolean tryActivate(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n+        return (tryActivateAndGet(e, stack.getItem()) != null);\n+    }\n+\n+    public static boolean tryActivate(@Nonnull Event e, @Nonnull SlimefunItem item) {\n+        return (tryActivateAndGet(e, item) != null);", "originalCommit": "db95cca3fbcc4eb3709ee74c0015522be0e987dd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEzMTk3Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r509131977", "bodyText": "This will send a message to the player, we don't want this if the Player isn't even carrying the talisman.", "author": "TheBusyBiscuit", "createdAt": "2020-10-21T09:32:07Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/Talisman.java", "diffHunk": "@@ -130,48 +134,71 @@ private static boolean hasMessage(Talisman talisman) {\n         return talisman.getMessageSuffix() != null;\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItemStack stack) {\n-        return checkFor(e, stack.getItem());\n+    public static boolean tryActivate(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n+        return (tryActivateAndGet(e, stack.getItem()) != null);\n+    }\n+\n+    public static boolean tryActivate(@Nonnull Event e, @Nonnull SlimefunItem item) {\n+        return (tryActivateAndGet(e, item) != null);\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItem item) {\n+    public static ItemStack tryActivateAndGet(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n+        return tryActivateAndGet(e, stack.getItem());\n+    }\n+\n+    @Nullable\n+    public static ItemStack tryActivateAndGet(@Nonnull Event e, @Nonnull SlimefunItem item) {\n         if (!(item instanceof Talisman)) {\n-            return false;\n+            return null;\n         }\n \n         Talisman talisman = (Talisman) item;\n         if (ThreadLocalRandom.current().nextInt(100) > talisman.getChance()) {\n-            return false;\n+            return null;\n         }\n \n         Player p = getPlayerByEventType(e);\n         if (p == null || !pass(p, talisman)) {\n-            return false;\n+            return null;\n+        }\n+\n+        if (!Slimefun.hasUnlocked(p, talisman, true)) {\n+            return null;\n         }", "originalCommit": "db95cca3fbcc4eb3709ee74c0015522be0e987dd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEzMjU4Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2388#discussion_r509132587", "bodyText": "This comment no longer applies", "author": "TheBusyBiscuit", "createdAt": "2020-10-21T09:33:08Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/talismans/Talisman.java", "diffHunk": "@@ -130,48 +134,71 @@ private static boolean hasMessage(Talisman talisman) {\n         return talisman.getMessageSuffix() != null;\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItemStack stack) {\n-        return checkFor(e, stack.getItem());\n+    public static boolean tryActivate(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n+        return (tryActivateAndGet(e, stack.getItem()) != null);\n+    }\n+\n+    public static boolean tryActivate(@Nonnull Event e, @Nonnull SlimefunItem item) {\n+        return (tryActivateAndGet(e, item) != null);\n     }\n \n-    public static boolean checkFor(Event e, SlimefunItem item) {\n+    public static ItemStack tryActivateAndGet(@Nonnull Event e, @Nonnull SlimefunItemStack stack) {\n+        return tryActivateAndGet(e, stack.getItem());\n+    }\n+\n+    @Nullable\n+    public static ItemStack tryActivateAndGet(@Nonnull Event e, @Nonnull SlimefunItem item) {\n         if (!(item instanceof Talisman)) {\n-            return false;\n+            return null;\n         }\n \n         Talisman talisman = (Talisman) item;\n         if (ThreadLocalRandom.current().nextInt(100) > talisman.getChance()) {\n-            return false;\n+            return null;\n         }\n \n         Player p = getPlayerByEventType(e);\n         if (p == null || !pass(p, talisman)) {\n-            return false;\n+            return null;\n+        }\n+\n+        if (!Slimefun.hasUnlocked(p, talisman, true)) {\n+            return null;\n         }\n \n-        ItemStack talismanItem = talisman.getItem();\n+        ItemStack possibleTalisman = retrieveTalismanFromInventory(p.getInventory(), talisman);\n \n-        if (SlimefunUtils.containsSimilarItem(p.getInventory(), talismanItem, true)) {\n-            if (Slimefun.hasUnlocked(p, talisman, true)) {\n-                activateTalisman(e, p, p.getInventory(), talisman);\n-                return true;\n-            } else {\n-                return false;\n-            }\n-        } else {\n-            ItemStack enderTalisman = talisman.getEnderVariant();\n-\n-            if (SlimefunUtils.containsSimilarItem(p.getEnderChest(), enderTalisman, true)) {\n-                if (Slimefun.hasUnlocked(p, talisman, true)) {\n-                    activateTalisman(e, p, p.getEnderChest(), talisman);\n-                    return true;\n-                } else {\n-                    return false;\n-                }\n-            } else {\n-                return false;\n+        if (possibleTalisman != null) {\n+            activateTalisman(e, p, p.getInventory(), talisman);\n+            return possibleTalisman;\n+        }\n+\n+        possibleTalisman = retrieveTalismanFromInventory(p.getEnderChest(), talisman);\n+\n+        if (possibleTalisman != null) {\n+            activateTalisman(e, p, p.getEnderChest(), talisman);\n+            return possibleTalisman;\n+        }\n+\n+        return possibleTalisman;\n+    }\n+\n+    @Nullable\n+    private static ItemStack retrieveTalismanFromInventory(@Nonnull Inventory inv, @Nonnull Talisman talisman) {\n+        ItemStack[] contents = inv.getContents();\n+        for (int i = 0; i < contents.length; i++) {\n+            ItemStack item = contents[i];\n+\n+            if (talisman.isItem(item)) {\n+                return item;\n             }\n         }\n+\n+        /* The point of this method is that it only gets called when youre sure there is \n+        *  a talisman in the inventory, so that it never returns null.\n+        *  However, this method will be nullable since there is an if statement and it needs\n+        *  to return something */", "originalCommit": "db95cca3fbcc4eb3709ee74c0015522be0e987dd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6a250d6d00993c2e7b64f4a3861c837a440f8aa3", "url": "https://github.com/Slimefun/Slimefun4/commit/6a250d6d00993c2e7b64f4a3861c837a440f8aa3", "message": "Fix requested changes", "committedDate": "2020-10-21T20:28:59Z", "type": "commit"}, {"oid": "03edaa53a34b4de4c49832e4f7d0e39ec24e4ba4", "url": "https://github.com/Slimefun/Slimefun4/commit/03edaa53a34b4de4c49832e4f7d0e39ec24e4ba4", "message": "Merge branch 'MoreTalismans' of https://github.com/svr333/Slimefun4 into MoreTalismans", "committedDate": "2020-10-21T20:29:18Z", "type": "commit"}, {"oid": "192258fb741ed2afe6fb05e533162c2be69cb103", "url": "https://github.com/Slimefun/Slimefun4/commit/192258fb741ed2afe6fb05e533162c2be69cb103", "message": "Merge branch 'master' into MoreTalismans", "committedDate": "2020-10-30T21:54:36Z", "type": "commit"}, {"oid": "21d6281ecdb5d99c2f2cabdc38eb646387e5cc0e", "url": "https://github.com/Slimefun/Slimefun4/commit/21d6281ecdb5d99c2f2cabdc38eb646387e5cc0e", "message": "Some formatting", "committedDate": "2020-10-30T21:57:27Z", "type": "commit"}, {"oid": "bae560bd5d295c5ec9af2546415b2baae928ddd1", "url": "https://github.com/Slimefun/Slimefun4/commit/bae560bd5d295c5ec9af2546415b2baae928ddd1", "message": "More formatting", "committedDate": "2020-10-30T21:58:57Z", "type": "commit"}, {"oid": "6f39ef5b4185ed622287b4c0ba55f70d7194d8d7", "url": "https://github.com/Slimefun/Slimefun4/commit/6f39ef5b4185ed622287b4c0ba55f70d7194d8d7", "message": "Fixed imports", "committedDate": "2020-10-30T22:01:06Z", "type": "commit"}, {"oid": "e953eb1c81658b3da172b470607e4ac6e9529366", "url": "https://github.com/Slimefun/Slimefun4/commit/e953eb1c81658b3da172b470607e4ac6e9529366", "message": "Refactored talisman grabbing method", "committedDate": "2020-10-30T22:03:44Z", "type": "commit"}, {"oid": "34719320505ff8137767428064db3c3fc57216da", "url": "https://github.com/Slimefun/Slimefun4/commit/34719320505ff8137767428064db3c3fc57216da", "message": "Update Talisman.java", "committedDate": "2020-10-30T22:05:55Z", "type": "commit"}, {"oid": "17e0d0ef1a235aed5eac17eba459487393c54829", "url": "https://github.com/Slimefun/Slimefun4/commit/17e0d0ef1a235aed5eac17eba459487393c54829", "message": "Update TalismanListener.java", "committedDate": "2020-10-30T22:10:07Z", "type": "commit"}, {"oid": "db673e0fb11f4031719351cfa1dd9ca240fb40e6", "url": "https://github.com/Slimefun/Slimefun4/commit/db673e0fb11f4031719351cfa1dd9ca240fb40e6", "message": "Forgotten a bracket :eyes:", "committedDate": "2020-10-30T22:12:41Z", "type": "commit"}, {"oid": "d69cf78331771ef47acdf4a800014d80a94b7251", "url": "https://github.com/Slimefun/Slimefun4/commit/d69cf78331771ef47acdf4a800014d80a94b7251", "message": "Merge branch 'master' into MoreTalismans", "committedDate": "2020-11-02T14:12:56Z", "type": "commit"}]}