{"pr_number": 1676, "pr_title": "HIVE-24389: Trailing zeros of constant decimal numbers are removed", "pr_createdAt": "2020-11-16T13:31:55Z", "pr_url": "https://github.com/apache/hive/pull/1676", "timeline": [{"oid": "9b3b9979f11dc9826d890cdd6246810b1bab7773", "url": "https://github.com/apache/hive/commit/9b3b9979f11dc9826d890cdd6246810b1bab7773", "message": "HIVE-24389: Trailing zeros of constant decimal numbers are removed", "committedDate": "2020-11-17T07:26:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzQyNjI5Mw==", "url": "https://github.com/apache/hive/pull/1676#discussion_r527426293", "bodyText": "Why does precision need to be overridden here (while scale does not)? Could we possibly remove this too?", "author": "jcamachor", "createdAt": "2020-11-20T05:46:25Z", "path": "serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantHiveDecimalObjectInspector.java", "diffHunk": "@@ -62,13 +62,4 @@ public int precision() {\n     }", "originalCommit": "9b3b9979f11dc9826d890cdd6246810b1bab7773", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzczNTI2Mg==", "url": "https://github.com/apache/hive/pull/1676#discussion_r527735262", "bodyText": "We can remove it and it can also be removed from WritableConstant[Byte|Int|Long|Short]ObjectInspector.\nBut it doesn't have such an effect like scale(). scale() also plays a role in converting to String but precision() is used only in functions GenericUDFBaseNumeric, GenericUDAFAverage, GenericUDAFSum to determine the result type.", "author": "kasakrisz", "createdAt": "2020-11-20T14:39:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzQyNjI5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTI0NDIxNA==", "url": "https://github.com/apache/hive/pull/1676#discussion_r529244214", "bodyText": "Seems that removing precision override has unwanted side effects. I reverted that part.", "author": "kasakrisz", "createdAt": "2020-11-24T07:06:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzQyNjI5Mw=="}], "type": "inlineReview"}, {"oid": "22c04850a19398cb1b3b1155f329bb83a3abdfdb", "url": "https://github.com/apache/hive/commit/22c04850a19398cb1b3b1155f329bb83a3abdfdb", "message": "HIVE-24389: Trailing zeros of constant decimal numbers are removed - remove override of precision()", "committedDate": "2020-11-20T14:56:25Z", "type": "forcePushed"}, {"oid": "804a1e0327a6bc95d708a8dabf8b7d2ab080c87b", "url": "https://github.com/apache/hive/commit/804a1e0327a6bc95d708a8dabf8b7d2ab080c87b", "message": "HIVE-24389: Trailing zeros of constant decimal numbers are removed - remove override of precision()", "committedDate": "2020-11-23T08:50:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0ODA2NQ==", "url": "https://github.com/apache/hive/pull/1676#discussion_r529048065", "bodyText": "I think this could lead to a change of behavior, e.g., all integers will have same precision by default, but constant integer would have the precision of the constant value?", "author": "jcamachor", "createdAt": "2020-11-23T22:53:12Z", "path": "serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/WritableConstantIntObjectInspector.java", "diffHunk": "@@ -46,12 +46,4 @@ public IntWritable getWritableConstantValue() {\n     return value;\n   }\n \n-  @Override\n-  public int precision() {", "originalCommit": "804a1e0327a6bc95d708a8dabf8b7d2ab080c87b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTI0NTE0Mw==", "url": "https://github.com/apache/hive/pull/1676#discussion_r529245143", "bodyText": "Yes, by overriding precision constant values has the precision of the value itself.", "author": "kasakrisz", "createdAt": "2020-11-24T07:08:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0ODA2NQ=="}], "type": "inlineReview"}, {"oid": "922a4a45710b978a34014419a2b498b3c8f5d9aa", "url": "https://github.com/apache/hive/commit/922a4a45710b978a34014419a2b498b3c8f5d9aa", "message": "HIVE-24389: Trailing zeros of constant decimal numbers are removed", "committedDate": "2020-11-24T05:39:25Z", "type": "commit"}, {"oid": "922a4a45710b978a34014419a2b498b3c8f5d9aa", "url": "https://github.com/apache/hive/commit/922a4a45710b978a34014419a2b498b3c8f5d9aa", "message": "HIVE-24389: Trailing zeros of constant decimal numbers are removed", "committedDate": "2020-11-24T05:39:25Z", "type": "forcePushed"}]}