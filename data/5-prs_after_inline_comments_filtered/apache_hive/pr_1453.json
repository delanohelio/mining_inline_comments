{"pr_number": 1453, "pr_title": "HIVE-24104: NPE due to null key columns in ReduceSink after deduplication", "pr_createdAt": "2020-09-01T16:05:20Z", "pr_url": "https://github.com/apache/hive/pull/1453", "timeline": [{"oid": "6cdcb100869ce0e7b740f927b3a1eb7baf48d241", "url": "https://github.com/apache/hive/commit/6cdcb100869ce0e7b740f927b3a1eb7baf48d241", "message": "HIVE-24104: NPE due to null key columns in ReduceSink after deduplication\n\n1. Remove double backtracking of columns inside\nReduceSinkDeDuplicationUtils#ggressiveDedup.\n\n2. Add unit test reproducing the problem (throwing NPE at runtime)", "committedDate": "2020-09-01T16:01:19Z", "type": "commit"}, {"oid": "4c1c58f78be4738ad2ac865a09b8ac4a6012e930", "url": "https://github.com/apache/hive/commit/4c1c58f78be4738ad2ac865a09b8ac4a6012e930", "message": "HIVE-24112: Disable flaky test dynamic_semijoin_reduction_on_aggcol.q", "committedDate": "2020-09-02T12:41:15Z", "type": "commit"}, {"oid": "1a89277fa9bb359e0fbf190fff36b9b6ebb76f90", "url": "https://github.com/apache/hive/commit/1a89277fa9bb359e0fbf190fff36b9b6ebb76f90", "message": "HIVE-24104: Add assertions to prevent null columns in ReduceSinkDesc", "committedDate": "2020-09-02T13:05:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc3MDQzOQ==", "url": "https://github.com/apache/hive/pull/1453#discussion_r482770439", "bodyText": "this seems to be a 3 year old typo; I wonder why it didn't surfaced earlier", "author": "kgyrtkirk", "createdAt": "2020-09-03T07:38:07Z", "path": "ql/src/java/org/apache/hadoop/hive/ql/optimizer/correlation/ReduceSinkDeDuplicationUtils.java", "diffHunk": "@@ -570,7 +570,7 @@ protected static boolean aggressiveDedup(ReduceSinkOperator cRS, ReduceSinkOpera\n         return false;\n       }\n     }\n-    cRS.getConf().setKeyCols(ExprNodeDescUtils.backtrack(cKeysInParentRS, cRS, pRS));\n+    cRS.getConf().setKeyCols(cKeysInParentRS);", "originalCommit": "1a89277fa9bb359e0fbf190fff36b9b6ebb76f90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}