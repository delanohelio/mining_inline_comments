{"pr_number": 2081, "pr_title": "[BAPL-1526] adding task variables and attributes to process search", "pr_createdAt": "2020-05-08T09:34:22Z", "pr_url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2081", "timeline": [{"oid": "ebfc0b413851278bb02846bbb7b54a86a8de1655", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/ebfc0b413851278bb02846bbb7b54a86a8de1655", "message": "[BAPL-1526] adding task variables and attributes to process search", "committedDate": "2020-05-08T09:35:00Z", "type": "forcePushed"}, {"oid": "d1a56da85a8cbde559a828a3cf79100291344736", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/d1a56da85a8cbde559a828a3cf79100291344736", "message": "[BAPL-1526] adding task variables and attributes to process search", "committedDate": "2020-05-12T07:39:34Z", "type": "forcePushed"}, {"oid": "e62014510d979150da85f9ef5b9b9bc2412a605a", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/e62014510d979150da85f9ef5b9b9bc2412a605a", "message": "[BPAL-1526] Search for tasks / process instances / cases by multiple constraints", "committedDate": "2020-05-13T09:23:26Z", "type": "forcePushed"}, {"oid": "47c76e5891529e99f6b5fb0642f775e86f4ec919", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/47c76e5891529e99f6b5fb0642f775e86f4ec919", "message": "[BPAL-1526] Search for tasks / process instances / cases by multiple constraints", "committedDate": "2020-05-14T09:12:39Z", "type": "forcePushed"}, {"oid": "6fdbebdf26f984e800702cc339af148be6eef449", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/6fdbebdf26f984e800702cc339af148be6eef449", "message": "[BPAL-1526] Search for tasks / process instances / cases by multiple constraints", "committedDate": "2020-05-14T15:06:11Z", "type": "commit"}, {"oid": "6fdbebdf26f984e800702cc339af148be6eef449", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/6fdbebdf26f984e800702cc339af148be6eef449", "message": "[BPAL-1526] Search for tasks / process instances / cases by multiple constraints", "committedDate": "2020-05-14T15:06:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ0NzA3Nw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2081#discussion_r425447077", "bodyText": "It would be helpful to add status also to toString method", "author": "gmunozfe", "createdAt": "2020-05-14T21:40:56Z", "path": "kie-server-parent/kie-server-api/src/main/java/org/kie/server/api/model/cases/CaseUserTaskWithVariables.java", "diffHunk": "@@ -150,11 +153,20 @@ public void setProcessInstanceId(Long processInstanceId) {\n         this.processInstanceId = processInstanceId;\n     }\n \n+    public String getStatus() {\n+        return status;\n+    }\n+\n+    public void setStatus(String status) {\n+        this.status = status;\n+    }\n+\n     @Override\n     public String toString() {", "originalCommit": "6fdbebdf26f984e800702cc339af148be6eef449", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ0NzE3MA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2081#discussion_r425447170", "bodyText": "Same here", "author": "gmunozfe", "createdAt": "2020-05-14T21:41:10Z", "path": "kie-server-parent/kie-server-api/src/main/java/org/kie/server/api/model/instance/ProcessInstanceUserTaskWithVariables.java", "diffHunk": "@@ -127,6 +130,14 @@ public void setProcessVariables(Map<String, Object> processVariables) {\n         this.processVariables = processVariables;\n     }\n \n+    public void setStatus(String status) {\n+        this.status = status;\n+    }\n+\n+    public String getStatus() {\n+        return status;\n+    }\n+\n     @Override\n     public String toString() {", "originalCommit": "6fdbebdf26f984e800702cc339af148be6eef449", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1MjA3NQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2081#discussion_r425452075", "bodyText": "Created and Suspended are considered as ActiveTasks?\nhttps://github.com/kiegroup/jbpm/blob/master/jbpm-services/jbpm-kie-services/src/main/java/org/jbpm/kie/services/impl/RuntimeDataServiceImpl.java#L486-L495", "author": "gmunozfe", "createdAt": "2020-05-14T21:52:29Z", "path": "kie-server-parent/kie-server-api/src/main/java/org/kie/server/api/util/QueryParamFactory.java", "diffHunk": "@@ -91,6 +95,21 @@ public static QueryParam not(QueryParam param) {\n         return new QueryParam(null, \"NOT\", Collections.singletonList(param));\n     }\n \n+    /** \n+     * only for search process / task by variables\n+     */\n+    public static QueryParam type(String column, Comparable<?> type) {\n+        return new QueryParam(column, \"TYPE\", Arrays.asList(type));\n+    }\n+\n+    public static QueryParam onlyActiveTasks() {\n+        return in(\"TASK_STATUS\", \"Created\", \"Ready\", \"Reserved\", \"InProgress\", \"Suspended\");", "originalCommit": "6fdbebdf26f984e800702cc339af148be6eef449", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU4OTk4NA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2081#discussion_r425589984", "bodyText": "it is a matter of definition. If a task is created means you reached the node of human task so it is active but not assigned. Suspended means the task is still on going but nobody is working on it.", "author": "elguardian", "createdAt": "2020-05-15T06:21:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1MjA3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1MzY2MA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2081#discussion_r425453660", "bodyText": "Same question here: from the rest of statuses Completed, Failed, Error, Exited, Obsolete, not sure if only should apply Completed.", "author": "gmunozfe", "createdAt": "2020-05-14T21:56:14Z", "path": "kie-server-parent/kie-server-api/src/main/java/org/kie/server/api/util/QueryParamFactory.java", "diffHunk": "@@ -91,6 +95,21 @@ public static QueryParam not(QueryParam param) {\n         return new QueryParam(null, \"NOT\", Collections.singletonList(param));\n     }\n \n+    /** \n+     * only for search process / task by variables\n+     */\n+    public static QueryParam type(String column, Comparable<?> type) {\n+        return new QueryParam(column, \"TYPE\", Arrays.asList(type));\n+    }\n+\n+    public static QueryParam onlyActiveTasks() {\n+        return in(\"TASK_STATUS\", \"Created\", \"Ready\", \"Reserved\", \"InProgress\", \"Suspended\");\n+    }\n+\n+    public static QueryParam onlyCompletedTasks() {\n+        return notIn(\"TASK_STATUS\", \"Created\", \"Ready\", \"Reserved\", \"InProgress\", \"Suspended\");", "originalCommit": "6fdbebdf26f984e800702cc339af148be6eef449", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU5MDY3Nw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2081#discussion_r425590677", "bodyText": "completed means that the control flow is outside the human task node.\nObsolete means that the node has been cancelled without being executed\nfailed means ht raised a problem\nerror means the ht raised an exception\nthe reset are self explainable.", "author": "elguardian", "createdAt": "2020-05-15T06:24:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1MzY2MA=="}], "type": "inlineReview"}]}