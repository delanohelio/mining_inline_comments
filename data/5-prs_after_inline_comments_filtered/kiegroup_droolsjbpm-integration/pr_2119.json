{"pr_number": 2119, "pr_title": "[JBPM-9178] Immutable SpringBoot Deployment", "pr_createdAt": "2020-06-04T05:53:49Z", "pr_url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119", "timeline": [{"oid": "cc31ed51ce85bb30aeb49ac84f047cf522a687bd", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/cc31ed51ce85bb30aeb49ac84f047cf522a687bd", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-06-09T06:35:32Z", "type": "forcePushed"}, {"oid": "071128e0146812b350f1f3f8b130294bfd5e7cb8", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/071128e0146812b350f1f3f8b130294bfd5e7cb8", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-06-11T10:01:50Z", "type": "forcePushed"}, {"oid": "43bbc6c0b6269a54fe00e76227747dfc46d76251", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/43bbc6c0b6269a54fe00e76227747dfc46d76251", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-06-11T13:30:10Z", "type": "forcePushed"}, {"oid": "bb6b1dec1dfa0f62ad8287bc6eb77f980bceea1d", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/bb6b1dec1dfa0f62ad8287bc6eb77f980bceea1d", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-06-16T10:18:59Z", "type": "forcePushed"}, {"oid": "18976f9d1152ec2bea94da1b83eb63631c34238b", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/18976f9d1152ec2bea94da1b83eb63631c34238b", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-06-16T13:37:38Z", "type": "forcePushed"}, {"oid": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "message": "[JBPM-9178] Plugin for copying dependencies in the right directory", "committedDate": "2020-06-18T14:40:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQxNjUxMw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443416513", "bodyText": "Copyright header is missing", "author": "afalhambra", "createdAt": "2020-06-22T09:02:41Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/ArtifactItem.java", "diffHunk": "@@ -0,0 +1,176 @@\n+package org.kie.maven.plugin;", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDExOTM0NA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444119344", "bodyText": "done", "author": "elguardian", "createdAt": "2020-06-23T10:20:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQxNjUxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQyOTY5Mw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443429693", "bodyText": "Do you really wanna keep it with default access modifier? shouldn't be private?", "author": "afalhambra", "createdAt": "2020-06-22T09:25:44Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageMojo.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.maven.plugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.google.common.io.Files;\n+import org.apache.maven.archiver.MavenArchiveConfiguration;\n+import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.handler.ArtifactHandler;\n+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\n+import org.apache.maven.artifact.repository.ArtifactRepository;\n+import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;\n+import org.apache.maven.artifact.repository.MavenArtifactRepository;\n+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n+import org.apache.maven.execution.MavenSession;\n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.plugins.annotations.Component;\n+import org.apache.maven.plugins.annotations.LifecyclePhase;\n+import org.apache.maven.plugins.annotations.Mojo;\n+import org.apache.maven.plugins.annotations.Parameter;\n+import org.apache.maven.plugins.annotations.ResolutionScope;\n+import org.apache.maven.project.DefaultProjectBuildingRequest;\n+import org.apache.maven.project.MavenProject;\n+import org.apache.maven.project.MavenProjectHelper;\n+import org.apache.maven.project.ProjectBuildingRequest;\n+import org.apache.maven.repository.RepositorySystem;\n+import org.apache.maven.settings.Settings;\n+import org.apache.maven.shared.artifact.ArtifactCoordinate;\n+import org.apache.maven.shared.artifact.DefaultArtifactCoordinate;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolver;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolverException;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResult;\n+import org.apache.maven.shared.dependencies.DefaultDependableCoordinate;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolver;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolverException;\n+import org.apache.maven.shared.utils.StringUtils;\n+import org.codehaus.plexus.archiver.manager.ArchiverManager;\n+\n+@Mojo(name = \"package-dependencies-kjar\",\n+      defaultPhase = LifecyclePhase.PREPARE_PACKAGE,\n+      threadSafe = true,\n+      requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME)\n+public class PackageMojo extends AbstractKieMojo {\n+\n+    private static final Pattern ALT_REPO_SYNTAX_PATTERN = Pattern.compile(\"(.+)::(.*)::(.+)\");\n+\n+    @Parameter(defaultValue = \"${project.build.outputDirectory}\", required = true)\n+    private String outputDirectory;\n+\n+    @Parameter(defaultValue = \"${project}\", readonly = true, required = true)\n+    private MavenProject project;\n+\n+    @Parameter\n+    private String classifier;\n+\n+    @Component\n+    private MavenProjectHelper projectHelper;\n+\n+    @Parameter(defaultValue = \"${session}\", readonly = true, required = true)\n+    private MavenSession session;\n+\n+    @Component(role = ArchiverManager.class)\n+    private ArchiverManager archiverManager;\n+\n+    @Parameter\n+    private MavenArchiveConfiguration archive = new MavenArchiveConfiguration();\n+\n+    @Component\n+    private ArtifactResolver artifactResolver;\n+\n+    @Component\n+    private DependencyResolver dependencyResolver;\n+\n+    @Parameter(defaultValue = \"${project.remoteArtifactRepositories}\", readonly = true, required = true)\n+    private List<ArtifactRepository> pomRemoteRepositories;\n+\n+    @Parameter(property = \"remoteRepositories\")\n+    private String remoteRepositories;\n+\n+    @Component\n+    private RepositorySystem repositorySystem;\n+\n+    @Component\n+    private ArtifactHandlerManager artifactHandlerManager;\n+\n+    @Component(role = ArtifactRepositoryLayout.class)\n+    private Map<String, ArtifactRepositoryLayout> repositoryLayouts;\n+\n+    @Parameter\n+    private List<ArtifactItem> artifactItems;\n+\n+    @Override\n+    public void execute() throws MojoExecutionException, MojoFailureException {\n+        try {\n+            if (artifactItems == null || artifactItems.isEmpty()) {\n+                getLog().info(\"Skipping plugin execution\");\n+                return;\n+            }\n+\n+            ArtifactRepositoryPolicy always =\n+                    new ArtifactRepositoryPolicy(true, ArtifactRepositoryPolicy.UPDATE_POLICY_ALWAYS,\n+                                                 ArtifactRepositoryPolicy.CHECKSUM_POLICY_WARN);\n+\n+            List<ArtifactRepository> repoList = new ArrayList<>();\n+\n+            if (pomRemoteRepositories != null) {\n+                repoList.addAll(pomRemoteRepositories);\n+            }\n+\n+            if (remoteRepositories != null) {\n+                // Use the same format as in the deploy plugin id::layout::url\n+                String[] repos = StringUtils.split(remoteRepositories, \",\");\n+                for (String repo : repos) {\n+                    repoList.add(parseRepository(repo, always));\n+                }\n+            }\n+\n+            File outputFolder = new File(outputDirectory + \"/KIE-INF/lib\");\n+            if (!outputFolder.exists()) {\n+                outputFolder.mkdirs();\n+            }\n+            getLog().info(\"Create directory: \" + outputFolder);\n+\n+            for (ArtifactItem artifactItem : artifactItems) {\n+                DefaultDependableCoordinate coordinate = new DefaultDependableCoordinate();\n+                coordinate.setArtifactId(artifactItem.getArtifactId());\n+                coordinate.setGroupId(artifactItem.getGroupId());\n+                coordinate.setVersion(artifactItem.getVersion());\n+                coordinate.setClassifier(artifactItem.getClassifier());\n+                coordinate.setType(artifactItem.getType());\n+\n+                getLog().info(\"Resolving \" + coordinate + \" with transitive dependencies\");\n+\n+                ProjectBuildingRequest buildingRequest = new DefaultProjectBuildingRequest(session.getProjectBuildingRequest());\n+                Settings settings = session.getSettings();\n+                repositorySystem.injectMirror(repoList, settings.getMirrors());\n+                repositorySystem.injectProxy(repoList, settings.getProxies());\n+                repositorySystem.injectAuthentication(repoList, settings.getServers());\n+                buildingRequest.setRemoteRepositories(repoList);\n+\n+                Iterable<ArtifactResult> results = dependencyResolver.resolveDependencies(buildingRequest, coordinate, null);\n+                for (ArtifactResult artifact : results) {\n+                    getLog().info(\"Copying dependencies: \" + artifact.getArtifact());\n+                    ArtifactResult artifactResolverResult = artifactResolver.resolveArtifact(buildingRequest, toArtifactCoordinate(artifact.getArtifact()));\n+                    Artifact artifactResolved = artifactResolverResult.getArtifact();\n+                    File local = artifactResolved.getFile();\n+                    Files.copy(local, new File(outputFolder, local.getName()));\n+                }\n+ \n+            }\n+        } catch (IOException | ArtifactResolverException | DependencyResolverException e) {\n+            throw new MojoExecutionException(\"Couldn't download artifact: \" + e.getMessage(), e);\n+        }\n+\n+    }\n+\n+    private ArtifactCoordinate toArtifactCoordinate(Artifact dependableCoordinate) {\n+        ArtifactHandler artifactHandler = artifactHandlerManager.getArtifactHandler(dependableCoordinate.getType());\n+        DefaultArtifactCoordinate artifactCoordinate = new DefaultArtifactCoordinate();\n+        artifactCoordinate.setGroupId(dependableCoordinate.getGroupId());\n+        artifactCoordinate.setArtifactId(dependableCoordinate.getArtifactId());\n+        artifactCoordinate.setVersion(dependableCoordinate.getVersion());\n+        artifactCoordinate.setClassifier(dependableCoordinate.getClassifier());\n+        artifactCoordinate.setExtension(artifactHandler.getExtension());\n+        return artifactCoordinate;\n+    }\n+\n+    ArtifactRepository parseRepository(String repo, ArtifactRepositoryPolicy policy) throws MojoFailureException {", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDExOTc3MQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444119771", "bodyText": "changed", "author": "elguardian", "createdAt": "2020-06-23T10:21:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQyOTY5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQzMDgxMQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443430811", "bodyText": "Wouldn't make more sense to rename this class to more specific name such as PackageKjarDependenciesMojo or PackageDependenciesMojo?", "author": "afalhambra", "createdAt": "2020-06-22T09:27:42Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageMojo.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.maven.plugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.google.common.io.Files;\n+import org.apache.maven.archiver.MavenArchiveConfiguration;\n+import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.handler.ArtifactHandler;\n+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\n+import org.apache.maven.artifact.repository.ArtifactRepository;\n+import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;\n+import org.apache.maven.artifact.repository.MavenArtifactRepository;\n+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n+import org.apache.maven.execution.MavenSession;\n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.plugins.annotations.Component;\n+import org.apache.maven.plugins.annotations.LifecyclePhase;\n+import org.apache.maven.plugins.annotations.Mojo;\n+import org.apache.maven.plugins.annotations.Parameter;\n+import org.apache.maven.plugins.annotations.ResolutionScope;\n+import org.apache.maven.project.DefaultProjectBuildingRequest;\n+import org.apache.maven.project.MavenProject;\n+import org.apache.maven.project.MavenProjectHelper;\n+import org.apache.maven.project.ProjectBuildingRequest;\n+import org.apache.maven.repository.RepositorySystem;\n+import org.apache.maven.settings.Settings;\n+import org.apache.maven.shared.artifact.ArtifactCoordinate;\n+import org.apache.maven.shared.artifact.DefaultArtifactCoordinate;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolver;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolverException;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResult;\n+import org.apache.maven.shared.dependencies.DefaultDependableCoordinate;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolver;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolverException;\n+import org.apache.maven.shared.utils.StringUtils;\n+import org.codehaus.plexus.archiver.manager.ArchiverManager;\n+\n+@Mojo(name = \"package-dependencies-kjar\",\n+      defaultPhase = LifecyclePhase.PREPARE_PACKAGE,\n+      threadSafe = true,\n+      requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME)\n+public class PackageMojo extends AbstractKieMojo {", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEyMDA5OQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444120099", "bodyText": "PackageKjarDependenciesMojo sounds good.", "author": "elguardian", "createdAt": "2020-06-23T10:22:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQzMDgxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUwNDI1Mg==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443504252", "bodyText": "Maybe default access modifier is more suitable here, instead of public as this method is only used within all classes in this package?", "author": "afalhambra", "createdAt": "2020-06-22T11:52:58Z", "path": "kie-server-parent/kie-server-services/kie-server-services-common/src/main/java/org/kie/server/services/impl/KieServerImpl.java", "diffHunk": "@@ -223,7 +224,7 @@ public void destroy() {\n         return this.context.getServerExtensions();\n     }\n \n-    protected KieServerInfo getInfoInternal() {\n+    public KieServerInfo getInfoInternal() {", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEyMDc0MA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444120740", "bodyText": "removed a set as protected", "author": "elguardian", "createdAt": "2020-06-23T10:23:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUwNDI1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUwNzgwMQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443507801", "bodyText": "Please remove metadata parameter as it's not used.", "author": "afalhambra", "createdAt": "2020-06-22T12:00:06Z", "path": "kie-server-parent/kie-server-services/kie-server-services-common/src/main/java/org/kie/server/services/impl/KieServerImpl.java", "diffHunk": "@@ -360,6 +362,14 @@ protected KieServerInfo getInfoInternal() {\n         }\n     }\n \n+    protected KieContainerInstanceImpl createContainerInstanceImpl(String containerId, ReleaseId releaseId) {\n+        return new KieContainerInstanceImpl(containerId, KieContainerStatus.CREATING, null, releaseId, this);\n+    }\n+\n+    protected InternalKieContainer createInternalKieContainer(String containerId, ReleaseId releaseId, KieModuleMetaData metadata) {", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEyMTMyNg==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444121326", "bodyText": "metadata is required for inmutable spring boot create Internal Kie Container.", "author": "elguardian", "createdAt": "2020-06-23T10:24:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUwNzgwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxMjY4NA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443512684", "bodyText": "Shouldn't we pass metadata to the getReleaseUpdateParameters call? Otherwise, metadata param won't be used and should be removed from here.", "author": "afalhambra", "createdAt": "2020-06-22T12:10:10Z", "path": "kie-server-parent/kie-server-services/kie-server-services-common/src/main/java/org/kie/server/services/impl/KieServerImpl.java", "diffHunk": "@@ -974,8 +989,8 @@ private Message updateKieContainerToVersion(KieContainerInstanceImpl kci, Releas\n         return response;\n     }\n \n-    private void prepareUpdateExtensions(KieContainerInstanceImpl kci, ReleaseId releaseId, List<Message> messages, boolean resetBeforeUpdate) {\n-        Map<String, Object> parameters = getReleaseUpdateParameters(releaseId, messages, resetBeforeUpdate);\n+    private void prepareUpdateExtensions(KieModuleMetaData metadata, KieContainerInstanceImpl kci, ReleaseId releaseId, List<Message> messages, boolean resetBeforeUpdate) {\n+        Map<String, Object> parameters = getReleaseUpdateParameters(null, releaseId, kci.getKieContainer(), messages, resetBeforeUpdate);", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk2ODA4Nw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444968087", "bodyText": "any update here?", "author": "afalhambra", "createdAt": "2020-06-24T15:10:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxMjY4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NzY0MA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446057640", "bodyText": "changed", "author": "elguardian", "createdAt": "2020-06-26T08:56:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxMjY4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxNDA4Nw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443514087", "bodyText": "It's only use within classes in the same package, so maybe it's better to use default access modifier instead.", "author": "afalhambra", "createdAt": "2020-06-22T12:13:04Z", "path": "kie-server-parent/kie-server-services/kie-server-services-common/src/main/java/org/kie/server/services/impl/KieServerImpl.java", "diffHunk": "@@ -1029,7 +1052,7 @@ private void updateExtensions(KieContainerInstanceImpl kci, ReleaseId releaseId,\n         return parameters;\n     }\n \n-    protected KieServerController getController() {\n+    public KieServerController getController() {", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk2OTA1MQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444969051", "bodyText": "any update here?", "author": "afalhambra", "createdAt": "2020-06-24T15:11:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxNDA4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxODYzNg==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443518636", "bodyText": "Can be replaced with method reference\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String str = containers.stream().map(e -> e.toString()).collect(Collectors.joining(\"\\n\\t\"));\n          \n          \n            \n                    String str = containers.stream().map(KieContainerResource::toString).collect(Collectors.joining(\"\\n\\t\"));", "author": "afalhambra", "createdAt": "2020-06-22T12:21:45Z", "path": "kie-server-parent/kie-server-services/kie-server-services-common/src/main/java/org/kie/server/services/impl/ContainerManager.java", "diffHunk": "@@ -34,11 +35,14 @@ public void installContainers(KieServerImpl kieServer, Set<KieContainerResource>\n     }\n \n     public void installContainersSync(KieServerImpl kieServer, Set<KieContainerResource> containers, KieServerState currentState, KieServerSetup kieServerSetup) {\n-        logger.info(\"About to install containers '{}' on kie server '{}'\", containers, kieServer);\n         if (containers == null) {\n             kieServer.markAsReady();\n             return;\n         }\n+\n+        String str = containers.stream().map(e -> e.toString()).collect(Collectors.joining(\"\\n\\t\"));", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk3NDUwMA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444974500", "bodyText": "any update on this?", "author": "afalhambra", "createdAt": "2020-06-24T15:19:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxODYzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NjIxOQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446056219", "bodyText": "ok", "author": "elguardian", "createdAt": "2020-06-26T08:53:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxODYzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU2OTU3MA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443569570", "bodyText": "installContainersSync and installContainers methods are doing the same, with same parameters. I know it's already doing this way in some other classes, but just out of curiosity - this is only in case we wanted to separate some logic methods for doing it async/sync way? such as:\nhttps://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-remote/kie-server-jms/src/main/java/org/kie/server/jms/ContainerManagerEJB.java#L38\n(though it will call the installContainersSync method at the end)", "author": "afalhambra", "createdAt": "2020-06-22T13:46:43Z", "path": "kie-server-parent/kie-server-services/kie-server-services-common/src/main/java/org/kie/server/services/impl/InmutableContainerStartupStrategy.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.server.services.impl;\n+\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicBoolean;\n+\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieContainerResource;\n+import org.kie.server.api.model.KieServerInfo;\n+import org.kie.server.controller.api.model.KieServerSetup;\n+import org.kie.server.services.api.StartupStrategy;\n+import org.kie.server.services.impl.storage.KieServerState;\n+\n+\n+public class InmutableContainerStartupStrategy implements StartupStrategy {\n+\n+    @Override\n+    public void startup(KieServerImpl kieServer, ContainerManager containerManager, KieServerState currentState, AtomicBoolean kieServerActive) {\n+        KieServerInfo kieServerInfo = kieServer.getInfoInternal();\n+        KieServerSetup kieServerSetup = kieServer.getController().connect(kieServerInfo);\n+\n+        Set<KieContainerResource> containers = kieServerSetup.getContainers();\n+\n+        kieServer.addServerStatusMessage(kieServerInfo);\n+        if (Boolean.parseBoolean(currentState.getConfiguration().getConfigItemValue(KieServerConstants.CFG_SYNC_DEPLOYMENT, \"false\"))) {\n+            containerManager.installContainersSync(kieServer, containers, currentState, kieServerSetup);\n+        } else {\n+            containerManager.installContainers(kieServer, containers, currentState, kieServerSetup);\n+        }", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NjY2OQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446056669", "bodyText": "mimic the rest of the startup strategy containers.", "author": "elguardian", "createdAt": "2020-06-26T08:54:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU2OTU3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU4ODAxNQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443588015", "bodyText": "Why skipping this?", "author": "afalhambra", "createdAt": "2020-06-22T14:13:15Z", "path": "kie-server-parent/kie-server-services/kie-server-services-drools/src/main/java/org/kie/server/services/drools/DroolsKieServerExtension.java", "diffHunk": "@@ -89,12 +89,16 @@ public void destroy(KieServerImpl kieServer, KieServerRegistry registry) {\n \n     @Override\n     public void createContainer(String id, KieContainerInstance kieContainerInstance, Map<String, Object> parameters) {\n+\n         // do any other bootstrapping rule service requires\n         Set<Class<?>> extraClasses = new HashSet<Class<?>>();\n \n         // create kbases so declared types can be created\n         Collection<String> kbases = kieContainerInstance.getKieContainer().getKieBaseNames();\n         for (String kbase : kbases) {\n+            if (kbase.startsWith(\"KiePMML\")) {\n+                continue;\n+            }", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk3NDI2Ng==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444974266", "bodyText": "any update on this?", "author": "afalhambra", "createdAt": "2020-06-24T15:19:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU4ODAxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYwOTI0MQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443609241", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (ksession != null) {\n          \n          \n            \n                        if (ksession != null && !ksession.isEmpty()) {", "author": "afalhambra", "createdAt": "2020-06-22T14:40:32Z", "path": "kie-server-parent/kie-server-services/kie-server-services-jbpm/src/main/java/org/kie/server/services/jbpm/JbpmKieServerExtension.java", "diffHunk": "@@ -420,9 +423,13 @@ public void createContainer(String id, KieContainerInstance kieContainerInstance\n                 unit.setMergeMode(MergeMode.valueOf(mergeMode));\n             }\n             String ksession = config.getConfigItemValue(KieServerConstants.PCFG_KIE_SESSION);\n-            unit.setKsessionName(ksession);\n+            if (ksession != null) {", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk3MDA4NA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444970084", "bodyText": "any update here?", "author": "afalhambra", "createdAt": "2020-06-24T15:13:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYwOTI0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1Nzg0Nw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446057847", "bodyText": "that should not be possible.", "author": "elguardian", "createdAt": "2020-06-26T08:56:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYwOTI0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYwOTcwMQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443609701", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (kbase != null) {\n          \n          \n            \n                        if (kbase != null && !kbase.isEmpty()) {", "author": "afalhambra", "createdAt": "2020-06-22T14:41:08Z", "path": "kie-server-parent/kie-server-services/kie-server-services-jbpm/src/main/java/org/kie/server/services/jbpm/JbpmKieServerExtension.java", "diffHunk": "@@ -420,9 +423,13 @@ public void createContainer(String id, KieContainerInstance kieContainerInstance\n                 unit.setMergeMode(MergeMode.valueOf(mergeMode));\n             }\n             String ksession = config.getConfigItemValue(KieServerConstants.PCFG_KIE_SESSION);\n-            unit.setKsessionName(ksession);\n+            if (ksession != null) {\n+                unit.setKsessionName(ksession);\n+            }\n             String kbase = config.getConfigItemValue(KieServerConstants.PCFG_KIE_BASE);\n-            unit.setKbaseName(kbase);\n+            if (kbase != null) {", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEyMTkwMw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444121903", "bodyText": "ok", "author": "elguardian", "createdAt": "2020-06-23T10:25:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYwOTcwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYzMzI2MA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443633260", "bodyText": "why false?", "author": "afalhambra", "createdAt": "2020-06-22T15:13:27Z", "path": "kie-spring-boot/kie-spring-boot-autoconfiguration/kie-server-spring-boot-autoconfiguration/src/main/java/org/kie/server/springboot/InmutableSpringBootKieContainerInstanceImpl.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.server.springboot;\n+\n+import org.drools.core.impl.InternalKieContainer;\n+import org.kie.server.api.model.KieContainerStatus;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.services.impl.KieContainerInstanceImpl;\n+import org.kie.server.services.impl.KieServerImpl;\n+\n+\n+public class InmutableSpringBootKieContainerInstanceImpl extends KieContainerInstanceImpl {\n+\n+    public InmutableSpringBootKieContainerInstanceImpl(String containerId, KieContainerStatus status, InternalKieContainer kieContainer, ReleaseId releaseId, KieServerImpl kieServer) {\n+        super(containerId, status, kieContainer, releaseId, kieServer);\n+    }\n+\n+    @Override\n+    protected boolean updateReleaseId() {\n+        return false;", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEyMTgxMg==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444121812", "bodyText": "class path container does not allow updates.", "author": "elguardian", "createdAt": "2020-06-23T10:25:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYzMzI2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYzNTcxNQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443635715", "bodyText": "Lambda can be replaced with:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        serverSetup.setContainers(containers.stream().collect(Collectors.toSet()));\n          \n          \n            \n                        serverSetup.setContainers(new HashSet<>(containers));", "author": "afalhambra", "createdAt": "2020-06-22T15:17:08Z", "path": "kie-spring-boot/kie-spring-boot-autoconfiguration/kie-server-spring-boot-autoconfiguration/src/main/java/org/kie/server/springboot/InmutableSpringBootKieServerImpl.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.server.springboot;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.drools.core.impl.InternalKieContainer;\n+import org.kie.internal.identity.IdentityProvider;\n+import org.kie.scanner.KieModuleMetaData;\n+import org.kie.server.api.model.KieContainerResource;\n+import org.kie.server.api.model.KieContainerStatus;\n+import org.kie.server.api.model.KieServerInfo;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.controller.api.KieServerController;\n+import org.kie.server.controller.api.model.KieServerSetup;\n+import org.kie.server.services.api.KieServerExtension;\n+import org.kie.server.services.impl.InmutableContainerStartupStrategy;\n+import org.kie.server.services.impl.KieContainerInstanceImpl;\n+import org.kie.server.services.impl.storage.memory.InMemoryKieServerStateRepository;\n+\n+public class InmutableSpringBootKieServerImpl extends SpringBootKieServerImpl {\n+\n+    private List<KieContainerResource> containers;\n+    \n+    public InmutableSpringBootKieServerImpl(List<KieServerExtension> extensions, IdentityProvider identityProvider) {\n+        this(extensions, identityProvider, Collections.emptyList());\n+    }\n+\n+    public InmutableSpringBootKieServerImpl(List<KieServerExtension> extensions, IdentityProvider identityProvider, List<KieContainerResource> containers) {\n+        super(extensions, identityProvider, new InMemoryKieServerStateRepository());\n+        this.containers = containers;\n+    }\n+\n+\n+    @Override\n+    protected InternalKieContainer createInternalKieContainer(String containerId, ReleaseId releaseId, KieModuleMetaData metaData) {\n+        return (InternalKieContainer) ks.newKieClasspathContainer(containerId, metaData.getClassLoader(), releaseId);\n+    }\n+\n+    @Override\n+    protected KieContainerInstanceImpl createContainerInstanceImpl(String containerId, ReleaseId releaseId) {\n+        return new InmutableSpringBootKieContainerInstanceImpl(containerId, KieContainerStatus.CREATING, null, releaseId, this);\n+    }\n+\n+    public class SpringBootKieServerController implements KieServerController {\n+\n+        @Override\n+        public void disconnect(KieServerInfo serverInfo) {}\n+\n+        @Override\n+        public KieServerSetup connect(KieServerInfo serverInfo) {\n+            KieServerSetup serverSetup = new KieServerSetup();\n+            serverSetup.setContainers(containers.stream().collect(Collectors.toSet()));", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEyMjM5MA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444122390", "bodyText": "ok", "author": "elguardian", "createdAt": "2020-06-23T10:26:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYzNTcxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYzODQ1NA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443638454", "bodyText": "Shouldn't we restrict access to this inner class? maybe private instead?", "author": "afalhambra", "createdAt": "2020-06-22T15:21:06Z", "path": "kie-spring-boot/kie-spring-boot-autoconfiguration/kie-server-spring-boot-autoconfiguration/src/main/java/org/kie/server/springboot/InmutableSpringBootKieServerImpl.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.server.springboot;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.drools.core.impl.InternalKieContainer;\n+import org.kie.internal.identity.IdentityProvider;\n+import org.kie.scanner.KieModuleMetaData;\n+import org.kie.server.api.model.KieContainerResource;\n+import org.kie.server.api.model.KieContainerStatus;\n+import org.kie.server.api.model.KieServerInfo;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.controller.api.KieServerController;\n+import org.kie.server.controller.api.model.KieServerSetup;\n+import org.kie.server.services.api.KieServerExtension;\n+import org.kie.server.services.impl.InmutableContainerStartupStrategy;\n+import org.kie.server.services.impl.KieContainerInstanceImpl;\n+import org.kie.server.services.impl.storage.memory.InMemoryKieServerStateRepository;\n+\n+public class InmutableSpringBootKieServerImpl extends SpringBootKieServerImpl {\n+\n+    private List<KieContainerResource> containers;\n+    \n+    public InmutableSpringBootKieServerImpl(List<KieServerExtension> extensions, IdentityProvider identityProvider) {\n+        this(extensions, identityProvider, Collections.emptyList());\n+    }\n+\n+    public InmutableSpringBootKieServerImpl(List<KieServerExtension> extensions, IdentityProvider identityProvider, List<KieContainerResource> containers) {\n+        super(extensions, identityProvider, new InMemoryKieServerStateRepository());\n+        this.containers = containers;\n+    }\n+\n+\n+    @Override\n+    protected InternalKieContainer createInternalKieContainer(String containerId, ReleaseId releaseId, KieModuleMetaData metaData) {\n+        return (InternalKieContainer) ks.newKieClasspathContainer(containerId, metaData.getClassLoader(), releaseId);\n+    }\n+\n+    @Override\n+    protected KieContainerInstanceImpl createContainerInstanceImpl(String containerId, ReleaseId releaseId) {\n+        return new InmutableSpringBootKieContainerInstanceImpl(containerId, KieContainerStatus.CREATING, null, releaseId, this);\n+    }\n+\n+    public class SpringBootKieServerController implements KieServerController {", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY0MTg0Nw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r443641847", "bodyText": "Just add a small comment stating why this method body is empty.", "author": "afalhambra", "createdAt": "2020-06-22T15:25:57Z", "path": "kie-spring-boot/kie-spring-boot-autoconfiguration/kie-server-spring-boot-autoconfiguration/src/main/java/org/kie/server/springboot/InmutableSpringBootKieServerImpl.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.server.springboot;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.drools.core.impl.InternalKieContainer;\n+import org.kie.internal.identity.IdentityProvider;\n+import org.kie.scanner.KieModuleMetaData;\n+import org.kie.server.api.model.KieContainerResource;\n+import org.kie.server.api.model.KieContainerStatus;\n+import org.kie.server.api.model.KieServerInfo;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.controller.api.KieServerController;\n+import org.kie.server.controller.api.model.KieServerSetup;\n+import org.kie.server.services.api.KieServerExtension;\n+import org.kie.server.services.impl.InmutableContainerStartupStrategy;\n+import org.kie.server.services.impl.KieContainerInstanceImpl;\n+import org.kie.server.services.impl.storage.memory.InMemoryKieServerStateRepository;\n+\n+public class InmutableSpringBootKieServerImpl extends SpringBootKieServerImpl {\n+\n+    private List<KieContainerResource> containers;\n+    \n+    public InmutableSpringBootKieServerImpl(List<KieServerExtension> extensions, IdentityProvider identityProvider) {\n+        this(extensions, identityProvider, Collections.emptyList());\n+    }\n+\n+    public InmutableSpringBootKieServerImpl(List<KieServerExtension> extensions, IdentityProvider identityProvider, List<KieContainerResource> containers) {\n+        super(extensions, identityProvider, new InMemoryKieServerStateRepository());\n+        this.containers = containers;\n+    }\n+\n+\n+    @Override\n+    protected InternalKieContainer createInternalKieContainer(String containerId, ReleaseId releaseId, KieModuleMetaData metaData) {\n+        return (InternalKieContainer) ks.newKieClasspathContainer(containerId, metaData.getClassLoader(), releaseId);\n+    }\n+\n+    @Override\n+    protected KieContainerInstanceImpl createContainerInstanceImpl(String containerId, ReleaseId releaseId) {\n+        return new InmutableSpringBootKieContainerInstanceImpl(containerId, KieContainerStatus.CREATING, null, releaseId, this);\n+    }\n+\n+    public class SpringBootKieServerController implements KieServerController {\n+\n+        @Override\n+        public void disconnect(KieServerInfo serverInfo) {}", "originalCommit": "8416d2db1f2b1768b4297a7d41b6a2c1f8bd5ac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEyMjYxMw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444122613", "bodyText": "ok", "author": "elguardian", "createdAt": "2020-06-23T10:26:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY0MTg0Nw=="}], "type": "inlineReview"}, {"oid": "968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-06-23T10:27:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0MzUwOQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444743509", "bodyText": "outputDirectory should be readonly otherwise, if this is modified, dependencies might not necessarily be packaged in the generated jar file afterwards in line:\n\n  \n    \n      droolsjbpm-integration/kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageKjarDependenciesMojo.java\n    \n    \n         Line 168\n      in\n      968e8d0\n    \n    \n    \n    \n\n        \n          \n           Files.copy(local, new File(outputFolder, local.getName()));", "author": "afalhambra", "createdAt": "2020-06-24T08:50:58Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageKjarDependenciesMojo.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.maven.plugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.google.common.io.Files;\n+import org.apache.maven.archiver.MavenArchiveConfiguration;\n+import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.handler.ArtifactHandler;\n+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\n+import org.apache.maven.artifact.repository.ArtifactRepository;\n+import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;\n+import org.apache.maven.artifact.repository.MavenArtifactRepository;\n+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n+import org.apache.maven.execution.MavenSession;\n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.plugins.annotations.Component;\n+import org.apache.maven.plugins.annotations.LifecyclePhase;\n+import org.apache.maven.plugins.annotations.Mojo;\n+import org.apache.maven.plugins.annotations.Parameter;\n+import org.apache.maven.plugins.annotations.ResolutionScope;\n+import org.apache.maven.project.DefaultProjectBuildingRequest;\n+import org.apache.maven.project.MavenProject;\n+import org.apache.maven.project.MavenProjectHelper;\n+import org.apache.maven.project.ProjectBuildingRequest;\n+import org.apache.maven.repository.RepositorySystem;\n+import org.apache.maven.settings.Settings;\n+import org.apache.maven.shared.artifact.ArtifactCoordinate;\n+import org.apache.maven.shared.artifact.DefaultArtifactCoordinate;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolver;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolverException;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResult;\n+import org.apache.maven.shared.dependencies.DefaultDependableCoordinate;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolver;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolverException;\n+import org.apache.maven.shared.utils.StringUtils;\n+import org.codehaus.plexus.archiver.manager.ArchiverManager;\n+\n+@Mojo(name = \"package-dependencies-kjar\",\n+      defaultPhase = LifecyclePhase.PREPARE_PACKAGE,\n+      threadSafe = true,\n+      requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME)\n+public class PackageKjarDependenciesMojo extends AbstractKieMojo {\n+\n+    private static final Pattern ALT_REPO_SYNTAX_PATTERN = Pattern.compile(\"(.+)::(.*)::(.+)\");\n+\n+    @Parameter(defaultValue = \"${project.build.outputDirectory}\", required = true)", "originalCommit": "968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAxMDA2NQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446010065", "bodyText": "sure", "author": "elguardian", "createdAt": "2020-06-26T07:17:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0MzUwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1NzU5NQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444757595", "bodyText": "maven build is packaging deps in BOOT-INF/classes/KIE-INF/lib/, having following folder structure inside the jar:\n\nBOO-INF\n- classes/KIE-INF/lib\nMETA-INF\n\nwould it make more sense to have a folder structure like instead:\n\nBOO-INF\nKIE-INF\nMETA-INF\n\nOr why not just moving deps to the BOOT-INF/lib folder instead of creating a new folder structure? any potential issue with the classloader?\nwdyt?", "author": "afalhambra", "createdAt": "2020-06-24T09:14:48Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageKjarDependenciesMojo.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.maven.plugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.google.common.io.Files;\n+import org.apache.maven.archiver.MavenArchiveConfiguration;\n+import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.handler.ArtifactHandler;\n+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\n+import org.apache.maven.artifact.repository.ArtifactRepository;\n+import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;\n+import org.apache.maven.artifact.repository.MavenArtifactRepository;\n+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n+import org.apache.maven.execution.MavenSession;\n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.plugins.annotations.Component;\n+import org.apache.maven.plugins.annotations.LifecyclePhase;\n+import org.apache.maven.plugins.annotations.Mojo;\n+import org.apache.maven.plugins.annotations.Parameter;\n+import org.apache.maven.plugins.annotations.ResolutionScope;\n+import org.apache.maven.project.DefaultProjectBuildingRequest;\n+import org.apache.maven.project.MavenProject;\n+import org.apache.maven.project.MavenProjectHelper;\n+import org.apache.maven.project.ProjectBuildingRequest;\n+import org.apache.maven.repository.RepositorySystem;\n+import org.apache.maven.settings.Settings;\n+import org.apache.maven.shared.artifact.ArtifactCoordinate;\n+import org.apache.maven.shared.artifact.DefaultArtifactCoordinate;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolver;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolverException;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResult;\n+import org.apache.maven.shared.dependencies.DefaultDependableCoordinate;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolver;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolverException;\n+import org.apache.maven.shared.utils.StringUtils;\n+import org.codehaus.plexus.archiver.manager.ArchiverManager;\n+\n+@Mojo(name = \"package-dependencies-kjar\",\n+      defaultPhase = LifecyclePhase.PREPARE_PACKAGE,\n+      threadSafe = true,\n+      requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME)\n+public class PackageKjarDependenciesMojo extends AbstractKieMojo {\n+\n+    private static final Pattern ALT_REPO_SYNTAX_PATTERN = Pattern.compile(\"(.+)::(.*)::(.+)\");\n+\n+    @Parameter(defaultValue = \"${project.build.outputDirectory}\", required = true)\n+    private String outputDirectory;\n+\n+    @Parameter(defaultValue = \"${project}\", readonly = true, required = true)\n+    private MavenProject project;\n+\n+    @Parameter\n+    private String classifier;\n+\n+    @Component\n+    private MavenProjectHelper projectHelper;\n+\n+    @Parameter(defaultValue = \"${session}\", readonly = true, required = true)\n+    private MavenSession session;\n+\n+    @Component(role = ArchiverManager.class)\n+    private ArchiverManager archiverManager;\n+\n+    @Parameter\n+    private MavenArchiveConfiguration archive = new MavenArchiveConfiguration();\n+\n+    @Component\n+    private ArtifactResolver artifactResolver;\n+\n+    @Component\n+    private DependencyResolver dependencyResolver;\n+\n+    @Parameter(defaultValue = \"${project.remoteArtifactRepositories}\", readonly = true, required = true)\n+    private List<ArtifactRepository> pomRemoteRepositories;\n+\n+    @Parameter(property = \"remoteRepositories\")\n+    private String remoteRepositories;\n+\n+    @Component\n+    private RepositorySystem repositorySystem;\n+\n+    @Component\n+    private ArtifactHandlerManager artifactHandlerManager;\n+\n+    @Component(role = ArtifactRepositoryLayout.class)\n+    private Map<String, ArtifactRepositoryLayout> repositoryLayouts;\n+\n+    @Parameter\n+    private List<ArtifactItem> artifactItems;\n+\n+    @Override\n+    public void execute() throws MojoExecutionException, MojoFailureException {\n+        try {\n+            if (artifactItems == null || artifactItems.isEmpty()) {\n+                getLog().info(\"Skipping plugin execution\");\n+                return;\n+            }\n+\n+            ArtifactRepositoryPolicy always =\n+                    new ArtifactRepositoryPolicy(true, ArtifactRepositoryPolicy.UPDATE_POLICY_ALWAYS,\n+                                                 ArtifactRepositoryPolicy.CHECKSUM_POLICY_WARN);\n+\n+            List<ArtifactRepository> repoList = new ArrayList<>();\n+\n+            if (pomRemoteRepositories != null) {\n+                repoList.addAll(pomRemoteRepositories);\n+            }\n+\n+            if (remoteRepositories != null) {\n+                // Use the same format as in the deploy plugin id::layout::url\n+                String[] repos = StringUtils.split(remoteRepositories, \",\");\n+                for (String repo : repos) {\n+                    repoList.add(parseRepository(repo, always));\n+                }\n+            }\n+\n+            File outputFolder = new File(outputDirectory + \"/KIE-INF/lib\");", "originalCommit": "968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQzMzU4NA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r445433584", "bodyText": "I will check if it is possible to workaround spring boot plugin. don't commit to anything", "author": "elguardian", "createdAt": "2020-06-25T09:37:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1NzU5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQzNjIzNQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r445436235", "bodyText": "sure, thanks", "author": "afalhambra", "createdAt": "2020-06-25T09:42:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1NzU5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAxMDE0Mw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446010143", "bodyText": "nope", "author": "elguardian", "createdAt": "2020-06-26T07:18:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1NzU5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyMzIzNw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444923237", "bodyText": "member not used in the code.", "author": "afalhambra", "createdAt": "2020-06-24T14:11:55Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageKjarDependenciesMojo.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.maven.plugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.google.common.io.Files;\n+import org.apache.maven.archiver.MavenArchiveConfiguration;\n+import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.handler.ArtifactHandler;\n+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\n+import org.apache.maven.artifact.repository.ArtifactRepository;\n+import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;\n+import org.apache.maven.artifact.repository.MavenArtifactRepository;\n+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n+import org.apache.maven.execution.MavenSession;\n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.plugins.annotations.Component;\n+import org.apache.maven.plugins.annotations.LifecyclePhase;\n+import org.apache.maven.plugins.annotations.Mojo;\n+import org.apache.maven.plugins.annotations.Parameter;\n+import org.apache.maven.plugins.annotations.ResolutionScope;\n+import org.apache.maven.project.DefaultProjectBuildingRequest;\n+import org.apache.maven.project.MavenProject;\n+import org.apache.maven.project.MavenProjectHelper;\n+import org.apache.maven.project.ProjectBuildingRequest;\n+import org.apache.maven.repository.RepositorySystem;\n+import org.apache.maven.settings.Settings;\n+import org.apache.maven.shared.artifact.ArtifactCoordinate;\n+import org.apache.maven.shared.artifact.DefaultArtifactCoordinate;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolver;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolverException;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResult;\n+import org.apache.maven.shared.dependencies.DefaultDependableCoordinate;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolver;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolverException;\n+import org.apache.maven.shared.utils.StringUtils;\n+import org.codehaus.plexus.archiver.manager.ArchiverManager;\n+\n+@Mojo(name = \"package-dependencies-kjar\",\n+      defaultPhase = LifecyclePhase.PREPARE_PACKAGE,\n+      threadSafe = true,\n+      requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME)\n+public class PackageKjarDependenciesMojo extends AbstractKieMojo {\n+\n+    private static final Pattern ALT_REPO_SYNTAX_PATTERN = Pattern.compile(\"(.+)::(.*)::(.+)\");\n+\n+    @Parameter(defaultValue = \"${project.build.outputDirectory}\", required = true)\n+    private String outputDirectory;\n+\n+    @Parameter(defaultValue = \"${project}\", readonly = true, required = true)\n+    private MavenProject project;", "originalCommit": "968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyMzUyNw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444923527", "bodyText": "member not used in the code.", "author": "afalhambra", "createdAt": "2020-06-24T14:12:21Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageKjarDependenciesMojo.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.maven.plugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.google.common.io.Files;\n+import org.apache.maven.archiver.MavenArchiveConfiguration;\n+import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.handler.ArtifactHandler;\n+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\n+import org.apache.maven.artifact.repository.ArtifactRepository;\n+import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;\n+import org.apache.maven.artifact.repository.MavenArtifactRepository;\n+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n+import org.apache.maven.execution.MavenSession;\n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.plugins.annotations.Component;\n+import org.apache.maven.plugins.annotations.LifecyclePhase;\n+import org.apache.maven.plugins.annotations.Mojo;\n+import org.apache.maven.plugins.annotations.Parameter;\n+import org.apache.maven.plugins.annotations.ResolutionScope;\n+import org.apache.maven.project.DefaultProjectBuildingRequest;\n+import org.apache.maven.project.MavenProject;\n+import org.apache.maven.project.MavenProjectHelper;\n+import org.apache.maven.project.ProjectBuildingRequest;\n+import org.apache.maven.repository.RepositorySystem;\n+import org.apache.maven.settings.Settings;\n+import org.apache.maven.shared.artifact.ArtifactCoordinate;\n+import org.apache.maven.shared.artifact.DefaultArtifactCoordinate;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolver;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolverException;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResult;\n+import org.apache.maven.shared.dependencies.DefaultDependableCoordinate;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolver;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolverException;\n+import org.apache.maven.shared.utils.StringUtils;\n+import org.codehaus.plexus.archiver.manager.ArchiverManager;\n+\n+@Mojo(name = \"package-dependencies-kjar\",\n+      defaultPhase = LifecyclePhase.PREPARE_PACKAGE,\n+      threadSafe = true,\n+      requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME)\n+public class PackageKjarDependenciesMojo extends AbstractKieMojo {\n+\n+    private static final Pattern ALT_REPO_SYNTAX_PATTERN = Pattern.compile(\"(.+)::(.*)::(.+)\");\n+\n+    @Parameter(defaultValue = \"${project.build.outputDirectory}\", required = true)\n+    private String outputDirectory;\n+\n+    @Parameter(defaultValue = \"${project}\", readonly = true, required = true)\n+    private MavenProject project;\n+\n+    @Parameter\n+    private String classifier;", "originalCommit": "968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyNDMyMA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444924320", "bodyText": "member not used in the code.", "author": "afalhambra", "createdAt": "2020-06-24T14:13:25Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageKjarDependenciesMojo.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.maven.plugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.google.common.io.Files;\n+import org.apache.maven.archiver.MavenArchiveConfiguration;\n+import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.handler.ArtifactHandler;\n+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\n+import org.apache.maven.artifact.repository.ArtifactRepository;\n+import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;\n+import org.apache.maven.artifact.repository.MavenArtifactRepository;\n+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n+import org.apache.maven.execution.MavenSession;\n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.plugins.annotations.Component;\n+import org.apache.maven.plugins.annotations.LifecyclePhase;\n+import org.apache.maven.plugins.annotations.Mojo;\n+import org.apache.maven.plugins.annotations.Parameter;\n+import org.apache.maven.plugins.annotations.ResolutionScope;\n+import org.apache.maven.project.DefaultProjectBuildingRequest;\n+import org.apache.maven.project.MavenProject;\n+import org.apache.maven.project.MavenProjectHelper;\n+import org.apache.maven.project.ProjectBuildingRequest;\n+import org.apache.maven.repository.RepositorySystem;\n+import org.apache.maven.settings.Settings;\n+import org.apache.maven.shared.artifact.ArtifactCoordinate;\n+import org.apache.maven.shared.artifact.DefaultArtifactCoordinate;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolver;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolverException;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResult;\n+import org.apache.maven.shared.dependencies.DefaultDependableCoordinate;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolver;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolverException;\n+import org.apache.maven.shared.utils.StringUtils;\n+import org.codehaus.plexus.archiver.manager.ArchiverManager;\n+\n+@Mojo(name = \"package-dependencies-kjar\",\n+      defaultPhase = LifecyclePhase.PREPARE_PACKAGE,\n+      threadSafe = true,\n+      requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME)\n+public class PackageKjarDependenciesMojo extends AbstractKieMojo {\n+\n+    private static final Pattern ALT_REPO_SYNTAX_PATTERN = Pattern.compile(\"(.+)::(.*)::(.+)\");\n+\n+    @Parameter(defaultValue = \"${project.build.outputDirectory}\", required = true)\n+    private String outputDirectory;\n+\n+    @Parameter(defaultValue = \"${project}\", readonly = true, required = true)\n+    private MavenProject project;\n+\n+    @Parameter\n+    private String classifier;\n+\n+    @Component\n+    private MavenProjectHelper projectHelper;", "originalCommit": "968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAxMDI5NQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446010295", "bodyText": "removed", "author": "elguardian", "createdAt": "2020-06-26T07:18:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyNDMyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyNDgzNA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444924834", "bodyText": "member not used in the code.", "author": "afalhambra", "createdAt": "2020-06-24T14:14:08Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageKjarDependenciesMojo.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.maven.plugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.google.common.io.Files;\n+import org.apache.maven.archiver.MavenArchiveConfiguration;\n+import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.handler.ArtifactHandler;\n+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\n+import org.apache.maven.artifact.repository.ArtifactRepository;\n+import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;\n+import org.apache.maven.artifact.repository.MavenArtifactRepository;\n+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n+import org.apache.maven.execution.MavenSession;\n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.plugins.annotations.Component;\n+import org.apache.maven.plugins.annotations.LifecyclePhase;\n+import org.apache.maven.plugins.annotations.Mojo;\n+import org.apache.maven.plugins.annotations.Parameter;\n+import org.apache.maven.plugins.annotations.ResolutionScope;\n+import org.apache.maven.project.DefaultProjectBuildingRequest;\n+import org.apache.maven.project.MavenProject;\n+import org.apache.maven.project.MavenProjectHelper;\n+import org.apache.maven.project.ProjectBuildingRequest;\n+import org.apache.maven.repository.RepositorySystem;\n+import org.apache.maven.settings.Settings;\n+import org.apache.maven.shared.artifact.ArtifactCoordinate;\n+import org.apache.maven.shared.artifact.DefaultArtifactCoordinate;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolver;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolverException;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResult;\n+import org.apache.maven.shared.dependencies.DefaultDependableCoordinate;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolver;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolverException;\n+import org.apache.maven.shared.utils.StringUtils;\n+import org.codehaus.plexus.archiver.manager.ArchiverManager;\n+\n+@Mojo(name = \"package-dependencies-kjar\",\n+      defaultPhase = LifecyclePhase.PREPARE_PACKAGE,\n+      threadSafe = true,\n+      requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME)\n+public class PackageKjarDependenciesMojo extends AbstractKieMojo {\n+\n+    private static final Pattern ALT_REPO_SYNTAX_PATTERN = Pattern.compile(\"(.+)::(.*)::(.+)\");\n+\n+    @Parameter(defaultValue = \"${project.build.outputDirectory}\", required = true)\n+    private String outputDirectory;\n+\n+    @Parameter(defaultValue = \"${project}\", readonly = true, required = true)\n+    private MavenProject project;\n+\n+    @Parameter\n+    private String classifier;\n+\n+    @Component\n+    private MavenProjectHelper projectHelper;\n+\n+    @Parameter(defaultValue = \"${session}\", readonly = true, required = true)\n+    private MavenSession session;\n+\n+    @Component(role = ArchiverManager.class)\n+    private ArchiverManager archiverManager;", "originalCommit": "968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAxMDM4Nw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446010387", "bodyText": "removed", "author": "elguardian", "createdAt": "2020-06-26T07:18:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyNDgzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyNjIyOQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444926229", "bodyText": "member not used in the code.\nIf removed, we should remove dep from pom.xml:\n\n  \n    \n      droolsjbpm-integration/kie-maven-plugin/pom.xml\n    \n    \n        Lines 35 to 38\n      in\n      968e8d0\n    \n    \n    \n    \n\n        \n          \n           <dependency> \n        \n\n        \n          \n             <groupId>org.apache.maven</groupId> \n        \n\n        \n          \n             <artifactId>maven-archiver</artifactId> \n        \n\n        \n          \n           </dependency> \n        \n    \n  \n\n\nand from pom.xml:\nhttps://github.com/kiegroup/droolsjbpm-build-bootstrap/blob/f3a7669517d9ae0f0b3b3ace5983662c87f9982e/pom.xml#L3200-L3204", "author": "afalhambra", "createdAt": "2020-06-24T14:16:01Z", "path": "kie-maven-plugin/src/main/java/org/kie/maven/plugin/PackageKjarDependenciesMojo.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.maven.plugin;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import com.google.common.io.Files;\n+import org.apache.maven.archiver.MavenArchiveConfiguration;\n+import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.handler.ArtifactHandler;\n+import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\n+import org.apache.maven.artifact.repository.ArtifactRepository;\n+import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;\n+import org.apache.maven.artifact.repository.MavenArtifactRepository;\n+import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\n+import org.apache.maven.execution.MavenSession;\n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.plugins.annotations.Component;\n+import org.apache.maven.plugins.annotations.LifecyclePhase;\n+import org.apache.maven.plugins.annotations.Mojo;\n+import org.apache.maven.plugins.annotations.Parameter;\n+import org.apache.maven.plugins.annotations.ResolutionScope;\n+import org.apache.maven.project.DefaultProjectBuildingRequest;\n+import org.apache.maven.project.MavenProject;\n+import org.apache.maven.project.MavenProjectHelper;\n+import org.apache.maven.project.ProjectBuildingRequest;\n+import org.apache.maven.repository.RepositorySystem;\n+import org.apache.maven.settings.Settings;\n+import org.apache.maven.shared.artifact.ArtifactCoordinate;\n+import org.apache.maven.shared.artifact.DefaultArtifactCoordinate;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolver;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResolverException;\n+import org.apache.maven.shared.artifact.resolve.ArtifactResult;\n+import org.apache.maven.shared.dependencies.DefaultDependableCoordinate;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolver;\n+import org.apache.maven.shared.dependencies.resolve.DependencyResolverException;\n+import org.apache.maven.shared.utils.StringUtils;\n+import org.codehaus.plexus.archiver.manager.ArchiverManager;\n+\n+@Mojo(name = \"package-dependencies-kjar\",\n+      defaultPhase = LifecyclePhase.PREPARE_PACKAGE,\n+      threadSafe = true,\n+      requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME)\n+public class PackageKjarDependenciesMojo extends AbstractKieMojo {\n+\n+    private static final Pattern ALT_REPO_SYNTAX_PATTERN = Pattern.compile(\"(.+)::(.*)::(.+)\");\n+\n+    @Parameter(defaultValue = \"${project.build.outputDirectory}\", required = true)\n+    private String outputDirectory;\n+\n+    @Parameter(defaultValue = \"${project}\", readonly = true, required = true)\n+    private MavenProject project;\n+\n+    @Parameter\n+    private String classifier;\n+\n+    @Component\n+    private MavenProjectHelper projectHelper;\n+\n+    @Parameter(defaultValue = \"${session}\", readonly = true, required = true)\n+    private MavenSession session;\n+\n+    @Component(role = ArchiverManager.class)\n+    private ArchiverManager archiverManager;\n+\n+    @Parameter\n+    private MavenArchiveConfiguration archive = new MavenArchiveConfiguration();", "originalCommit": "968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAxMDU5Mw==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446010593", "bodyText": "removed", "author": "elguardian", "createdAt": "2020-06-26T07:19:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyNjIyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk3NTgyNg==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r444975826", "bodyText": "Shouldn't we restrict access modifier? it's only used internally, so maybe it's better to declare as private?", "author": "afalhambra", "createdAt": "2020-06-24T15:21:25Z", "path": "kie-spring-boot/kie-spring-boot-autoconfiguration/kie-server-spring-boot-autoconfiguration/src/main/java/org/kie/server/springboot/ImmutableSpringBootKieServerImpl.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.server.springboot;\n+\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+\n+import org.drools.core.impl.InternalKieContainer;\n+import org.kie.internal.identity.IdentityProvider;\n+import org.kie.scanner.KieModuleMetaData;\n+import org.kie.server.api.model.KieContainerResource;\n+import org.kie.server.api.model.KieContainerStatus;\n+import org.kie.server.api.model.KieServerInfo;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.controller.api.KieServerController;\n+import org.kie.server.controller.api.model.KieServerSetup;\n+import org.kie.server.services.api.KieServerExtension;\n+import org.kie.server.services.impl.InmutableContainerStartupStrategy;\n+import org.kie.server.services.impl.KieContainerInstanceImpl;\n+import org.kie.server.services.impl.storage.memory.InMemoryKieServerStateRepository;\n+\n+public class ImmutableSpringBootKieServerImpl extends SpringBootKieServerImpl {\n+\n+    private List<KieContainerResource> containers;\n+    \n+    public ImmutableSpringBootKieServerImpl(List<KieServerExtension> extensions, IdentityProvider identityProvider) {\n+        this(extensions, identityProvider, Collections.emptyList());\n+    }\n+\n+    public ImmutableSpringBootKieServerImpl(List<KieServerExtension> extensions, IdentityProvider identityProvider, List<KieContainerResource> containers) {\n+        super(extensions, identityProvider, new InMemoryKieServerStateRepository());\n+        this.containers = containers;\n+    }\n+\n+\n+    @Override\n+    protected InternalKieContainer createInternalKieContainer(String containerId, ReleaseId releaseId, KieModuleMetaData metaData) {\n+        return (InternalKieContainer) ks.newKieClasspathContainer(containerId, metaData.getClassLoader(), releaseId);\n+    }\n+\n+    @Override\n+    protected KieContainerInstanceImpl createContainerInstanceImpl(String containerId, ReleaseId releaseId) {\n+        return new InmutableSpringBootKieContainerInstanceImpl(containerId, KieContainerStatus.CREATING, null, releaseId, this);\n+    }\n+\n+    public class SpringBootKieServerController implements KieServerController {", "originalCommit": "968e8d0e6183e2119d2ca5743c3ac942cd96e83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAxMTQ2MA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2119#discussion_r446011460", "bodyText": "sure", "author": "elguardian", "createdAt": "2020-06-26T07:21:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk3NTgyNg=="}], "type": "inlineReview"}, {"oid": "2c5bd259c0ea9891ba69e70c8a9cb12ba210dd41", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/2c5bd259c0ea9891ba69e70c8a9cb12ba210dd41", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-06-26T07:25:11Z", "type": "forcePushed"}, {"oid": "72c796df8a9a0b9fcfb61c5a20df6e8daa572429", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/72c796df8a9a0b9fcfb61c5a20df6e8daa572429", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-06-26T08:57:13Z", "type": "forcePushed"}, {"oid": "6b48c4b350365e0bde9e6835a14bfb7f9a5cd963", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/6b48c4b350365e0bde9e6835a14bfb7f9a5cd963", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-06-29T09:48:20Z", "type": "forcePushed"}, {"oid": "b2c99f10298241c8b90e433d2947ab9a6d040a8b", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/b2c99f10298241c8b90e433d2947ab9a6d040a8b", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-07-30T06:57:42Z", "type": "forcePushed"}, {"oid": "09d6b52f35dc2b1a75ed319ba03f5906307659d7", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/09d6b52f35dc2b1a75ed319ba03f5906307659d7", "message": "[JBPM-9178] added filter for PMML", "committedDate": "2020-08-06T10:52:05Z", "type": "forcePushed"}, {"oid": "5bdd9cb39341afd28e69fc39cb4e41815bd6ab4e", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/5bdd9cb39341afd28e69fc39cb4e41815bd6ab4e", "message": "[JBPM-9178] Immutable SpringBoot Deployment  / PMML filter", "committedDate": "2020-08-06T12:06:47Z", "type": "forcePushed"}, {"oid": "89b8bfb62ae4ff871c302de438d9613fd39eb4f1", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/89b8bfb62ae4ff871c302de438d9613fd39eb4f1", "message": "[JBPM-9178] Immutable SpringBoot Deployment", "committedDate": "2020-08-11T15:33:09Z", "type": "commit"}, {"oid": "c740c6f893ccc70ff475121fbfc82eef7551f3d9", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/c740c6f893ccc70ff475121fbfc82eef7551f3d9", "message": "[JBPM-9178] Immutable SpringBoot Deployment  / PMML filter", "committedDate": "2020-08-11T16:56:57Z", "type": "commit"}, {"oid": "c740c6f893ccc70ff475121fbfc82eef7551f3d9", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/c740c6f893ccc70ff475121fbfc82eef7551f3d9", "message": "[JBPM-9178] Immutable SpringBoot Deployment  / PMML filter", "committedDate": "2020-08-11T16:56:57Z", "type": "forcePushed"}]}