{"pr_number": 2317, "pr_title": " DROOLS-5793 kie-server marshaller simpleclass name clash with DMN symbol", "pr_createdAt": "2020-11-17T11:10:09Z", "pr_url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2317", "timeline": [{"oid": "d58fe2ccb9b69bed04a32e04476112dbedba326d", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/d58fe2ccb9b69bed04a32e04476112dbedba326d", "message": "DROOLS-5793 kie-server marshaller simpleclass name clash with DMN symbol", "committedDate": "2020-11-17T11:01:41Z", "type": "commit"}, {"oid": "88dbe427bd565538d10765ca28e4a6780bdba861", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/88dbe427bd565538d10765ca28e4a6780bdba861", "message": ".", "committedDate": "2020-11-17T11:02:53Z", "type": "commit"}, {"oid": "3e47fa377b3bc7e06f8cf6b94def2315ada5910d", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/3e47fa377b3bc7e06f8cf6b94def2315ada5910d", "message": ".", "committedDate": "2020-11-17T11:12:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE3MzYyNA==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2317#discussion_r525173624", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    ctx.set(\"Applicant\", applicant); // VERY IMPORTANT that the map key is \"Applicant\" with the capital-A.\n          \n          \n            \n                    ctx.set(\"Applicant\", applicant); // VERY IMPORTANT that the map key is \"Applicant\" with the capital-A to clash with Applicant simple name", "author": "danielezonca", "createdAt": "2020-11-17T13:57:25Z", "path": "kie-server-parent/kie-server-api/src/test/java/org/kie/server/api/model/dmn/JSONAPIRoundTripTest.java", "diffHunk": "@@ -0,0 +1,152 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.server.api.model.dmn;\n+\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import org.assertj.core.api.Assertions;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.kie.dmn.api.core.DMNContext;\n+import org.kie.dmn.api.core.DMNDecisionResult.DecisionEvaluationStatus;\n+import org.kie.dmn.core.impl.DMNContextImpl;\n+import org.kie.dmn.core.impl.DMNDecisionResultImpl;\n+import org.kie.dmn.core.impl.DMNResultImpl;\n+import org.kie.server.api.marshalling.Marshaller;\n+import org.kie.server.api.marshalling.MarshallerFactory;\n+import org.kie.server.api.marshalling.MarshallingFormat;\n+import org.kie.server.api.model.KieServiceResponse.ResponseType;\n+import org.kie.server.api.model.ServiceResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class JSONAPIRoundTripTest {\n+\n+    private static final Logger LOG = LoggerFactory.getLogger(JSONAPIRoundTripTest.class);\n+    private Marshaller marshaller;\n+\n+    @Before\n+    public void init() {\n+        Set<Class<?>> extraClasses = new HashSet<Class<?>>();\n+        extraClasses.add(Applicant.class);\n+        marshaller = MarshallerFactory.getMarshaller(extraClasses, MarshallingFormat.JSON, this.getClass().getClassLoader());\n+    }\n+\n+    @Test\n+    public void test() {\n+        Applicant applicant = new Applicant(\"John Doe\", 47);\n+        Applicant applicant2 = roundTrip(applicant);\n+        Assertions.assertThat(applicant2).isEqualTo(applicant);\n+\n+        DMNContext ctx = new DMNContextImpl();\n+        ctx.set(\"Applicant\", applicant); // VERY IMPORTANT that the map key is \"Applicant\" with the capital-A.", "originalCommit": "3e47fa377b3bc7e06f8cf6b94def2315ada5910d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE4NDA4MQ==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2317#discussion_r525184081", "bodyText": "License header?", "author": "danielezonca", "createdAt": "2020-11-17T14:11:58Z", "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-dmn/src/test/filtered-resources/kjars-sources/json-applicant/src/main/java/com/acme/Address.java", "diffHunk": "@@ -0,0 +1,31 @@\n+package com.acme;", "originalCommit": "3e47fa377b3bc7e06f8cf6b94def2315ada5910d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE4NDE4Ng==", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2317#discussion_r525184186", "bodyText": "License header?", "author": "danielezonca", "createdAt": "2020-11-17T14:12:07Z", "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-dmn/src/test/filtered-resources/kjars-sources/json-applicant/src/main/java/com/acme/Applicant.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package com.acme;", "originalCommit": "3e47fa377b3bc7e06f8cf6b94def2315ada5910d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ed083b81a77dd55a1a67d2cce9bfcd5d6ad6e789", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/ed083b81a77dd55a1a67d2cce9bfcd5d6ad6e789", "message": "implement code review feedback", "committedDate": "2020-11-17T14:59:19Z", "type": "commit"}, {"oid": "5e5cda891dbc8a34323ec2b77d8ab750c3899682", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/5e5cda891dbc8a34323ec2b77d8ab750c3899682", "message": ".", "committedDate": "2020-11-19T09:28:27Z", "type": "commit"}, {"oid": "26b74d2c3d4de21e2122a22ea257ed2310f9b78d", "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/26b74d2c3d4de21e2122a22ea257ed2310f9b78d", "message": "fix JSON comparison should ignore \"pretty formatting\"", "committedDate": "2020-11-19T09:34:42Z", "type": "commit"}]}