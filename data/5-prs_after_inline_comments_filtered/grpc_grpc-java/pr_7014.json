{"pr_number": 7014, "pr_title": "rls: allow test to provide default caching client builder", "pr_createdAt": "2020-05-06T18:36:57Z", "pr_url": "https://github.com/grpc/grpc-java/pull/7014", "timeline": [{"oid": "d5ae462a8e7dc787faa9cf36eebcb6f35e00e2b9", "url": "https://github.com/grpc/grpc-java/commit/d5ae462a8e7dc787faa9cf36eebcb6f35e00e2b9", "message": "rls: add internal api to provide default cachnig client builder for testing", "committedDate": "2020-05-06T18:40:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4MjUzMA==", "url": "https://github.com/grpc/grpc-java/pull/7014#discussion_r421082530", "bodyText": "Seems all you want is to inject throttle, ]why not just ThrottlerProvider?", "author": "dapengzhang0", "createdAt": "2020-05-06T20:48:43Z", "path": "rls/src/main/java/io/grpc/rls/RlsLoadBalancer.java", "diffHunk": "@@ -106,4 +111,21 @@ public void shutdown() {\n       routeLookupClient = null;\n     }\n   }\n+\n+  /**\n+   * Provides {@link CachingRlsLbClient.Builder} with default settings. This is useful for\n+   * testing.\n+   */\n+  interface CachingRlsLbClientBuilderProvider {", "originalCommit": "d5ae462a8e7dc787faa9cf36eebcb6f35e00e2b9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4NzQ5OQ==", "url": "https://github.com/grpc/grpc-java/pull/7014#discussion_r421087499", "bodyText": "yeah that was my initial thought. Sooner than later we may need more and more of those Providers. Providing default builder is more flexible without adding test specific codes/classes. e.g. I am thinking we may need to add timeProvider and evictionListener in near future.", "author": "creamsoup", "createdAt": "2020-05-06T20:57:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4MjUzMA=="}], "type": "inlineReview"}]}