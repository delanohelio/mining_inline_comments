{"pr_number": 7485, "pr_title": "grpclb: enhance grpclb logging", "pr_createdAt": "2020-10-05T20:46:44Z", "pr_url": "https://github.com/grpc/grpc-java/pull/7485", "timeline": [{"oid": "67c8b54eb2919caf79c849eff06673ed2970aeb1", "url": "https://github.com/grpc/grpc-java/commit/67c8b54eb2919caf79c849eff06673ed2970aeb1", "message": "grpclb: enhance grpclb logging", "committedDate": "2020-10-05T19:42:10Z", "type": "commit"}, {"oid": "b4d77ab3884ca43f485965aac15af356f4d9d16a", "url": "https://github.com/grpc/grpc-java/commit/b4d77ab3884ca43f485965aac15af356f4d9d16a", "message": "log resolved addresses", "committedDate": "2020-10-05T21:16:27Z", "type": "forcePushed"}, {"oid": "f69e1e7d03d3b2fab6c3df4bc1c9dff5664ea675", "url": "https://github.com/grpc/grpc-java/commit/f69e1e7d03d3b2fab6c3df4bc1c9dff5664ea675", "message": "log resolved addresses", "committedDate": "2020-10-05T21:26:36Z", "type": "commit"}, {"oid": "f69e1e7d03d3b2fab6c3df4bc1c9dff5664ea675", "url": "https://github.com/grpc/grpc-java/commit/f69e1e7d03d3b2fab6c3df4bc1c9dff5664ea675", "message": "log resolved addresses", "committedDate": "2020-10-05T21:26:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMyNDgzNw==", "url": "https://github.com/grpc/grpc-java/pull/7485#discussion_r501324837", "bodyText": "There is no test for this new log (which is INFO level)? I am assuming there are tests for logging because it is important in terms of debuggability?", "author": "sanjaypujare", "createdAt": "2020-10-07T21:37:48Z", "path": "grpclb/src/main/java/io/grpc/grpclb/GrpclbState.java", "diffHunk": "@@ -345,6 +361,7 @@ private void cancelLbRpcRetryTimer() {\n   }\n \n   void shutdown() {\n+    logger.log(ChannelLogLevel.INFO, \"[grpclb-<{0}>] Shutdown\", serviceName);", "originalCommit": "f69e1e7d03d3b2fab6c3df4bc1c9dff5664ea675", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMzMTcyMA==", "url": "https://github.com/grpc/grpc-java/pull/7485#discussion_r501331720", "bodyText": "I would not bother test this. It's not critical. Also there is no much value verifying what's written here in the unit test (unit test would just be copying whatever message wrote in the implementation).", "author": "voidzcy", "createdAt": "2020-10-07T21:53:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMyNDgzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMzMzQwMQ==", "url": "https://github.com/grpc/grpc-java/pull/7485#discussion_r501333401", "bodyText": "So unit tests were written for logging for a reason - to make sure a log is emitted when certain events happen even if verifying the exact message is not important (as you say). Just wanted to understand which is why I am asking for the issue link mentioned above.", "author": "sanjaypujare", "createdAt": "2020-10-07T21:57:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMyNDgzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM0ODAxOA==", "url": "https://github.com/grpc/grpc-java/pull/7485#discussion_r501348018", "bodyText": "I think log being emitted for certain events is not worth a unit test. Because reading log is a manual activity, we can always manually verify them and find if something need be added.", "author": "dapengzhang0", "createdAt": "2020-10-07T22:34:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMyNDgzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTM1ODc1NA==", "url": "https://github.com/grpc/grpc-java/pull/7485#discussion_r501358754", "bodyText": "SG. I thought there was an actual issue reported by a user so I asked.", "author": "sanjaypujare", "createdAt": "2020-10-07T23:04:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMyNDgzNw=="}], "type": "inlineReview"}]}