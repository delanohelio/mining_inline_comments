{"pr_number": 7353, "pr_title": "core: refactor to delete RetryPolicy.DEFAULT", "pr_createdAt": "2020-08-24T16:13:25Z", "pr_url": "https://github.com/grpc/grpc-java/pull/7353", "timeline": [{"oid": "bb2f3217752d148291ff364a06855c3638944a2e", "url": "https://github.com/grpc/grpc-java/commit/bb2f3217752d148291ff364a06855c3638944a2e", "message": "core: refactor to delete RetryPolicy.DEFAULT", "committedDate": "2020-08-23T01:32:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUwMzA5Ng==", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477503096", "bodyText": "Is there anything blocking this to be deleted? Otherwise, we can just get rid of this now.", "author": "voidzcy", "createdAt": "2020-08-26T18:29:37Z", "path": "core/src/main/java/io/grpc/internal/HedgingPolicy.java", "diffHunk": "@@ -75,6 +71,8 @@ public String toString() {\n         .toString();\n   }\n \n+  // TODO(zdapeng): delete this because HedgingPolicy will be always available prior to starting\n+  //  RetriableStream.", "originalCommit": "bb2f3217752d148291ff364a06855c3638944a2e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUyMDYyNA==", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477520624", "bodyText": "Some tests need change accordingly, so I decided to change it in next PR.", "author": "dapengzhang0", "createdAt": "2020-08-26T19:01:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUwMzA5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU0NTM0NQ==", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477545345", "bodyText": "Optional since I guess this whole block is marked for deletion, but \"Never returns null\" contradicts the new annotation.", "author": "ericgribkoff", "createdAt": "2020-08-26T19:41:30Z", "path": "core/src/main/java/io/grpc/internal/HedgingPolicy.java", "diffHunk": "@@ -83,6 +81,7 @@ public String toString() {\n     /**\n      * This method is used no more than once for each call. Never returns null.", "originalCommit": "bb2f3217752d148291ff364a06855c3638944a2e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU0ODM4Mw==", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477548383", "bodyText": "Same comment here about never returns null", "author": "ericgribkoff", "createdAt": "2020-08-26T19:47:14Z", "path": "core/src/main/java/io/grpc/internal/RetryPolicy.java", "diffHunk": "@@ -100,6 +97,7 @@ public String toString() {\n     /**\n      * This method is used no more than once for each call. Never returns null.", "originalCommit": "bb2f3217752d148291ff364a06855c3638944a2e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU1MDU3Mw==", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477550573", "bodyText": "It's not immediately clear to me why this block is no longer necessary.  retryPolicy was not accessed in this function after this conditional even before this PR - was it previously unnecessary, and this is just cleaning up? Or was the assignment of retryPolicy required before this change and not required now?", "author": "ericgribkoff", "createdAt": "2020-08-26T19:51:21Z", "path": "core/src/main/java/io/grpc/internal/RetriableStream.java", "diffHunk": "@@ -831,11 +830,6 @@ public void run() {\n         } else {\n           noMoreTransparentRetry.set(true);\n \n-          if (retryPolicy == null) {", "originalCommit": "bb2f3217752d148291ff364a06855c3638944a2e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU3Mjk3NA==", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477572974", "bodyText": "This block is moved to makeRetryDecision().", "author": "dapengzhang0", "createdAt": "2020-08-26T20:34:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU1MDU3Mw=="}], "type": "inlineReview"}, {"oid": "a2f407e2340f876e0ab88c03c1c890759c18ec6a", "url": "https://github.com/grpc/grpc-java/commit/a2f407e2340f876e0ab88c03c1c890759c18ec6a", "message": "fix javadoc", "committedDate": "2020-08-27T05:02:47Z", "type": "commit"}]}