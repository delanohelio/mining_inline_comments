{"pr_number": 724, "pr_title": "CORS headers provided by Southbound services are ignored", "pr_createdAt": "2020-06-24T07:45:36Z", "pr_url": "https://github.com/zowe/api-layer/pull/724", "timeline": [{"oid": "837a801b263705305d7aa3b2759ec434ff661f73", "url": "https://github.com/zowe/api-layer/commit/837a801b263705305d7aa3b2759ec434ff661f73", "message": "CORS headers provided by Southbound services are ignored\n\nzOSMF has custom handling of CORS. To make sure the CORS handling is properly delegated\nto the API ML filter the CORS related headers from the response of the southbound service.\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-06-24T07:32:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyNzI4OA==", "url": "https://github.com/zowe/api-layer/pull/724#discussion_r444727288", "bodyText": "isnt it better to split those strings manually?", "author": "achmelo", "createdAt": "2020-06-24T08:23:30Z", "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/security/config/SecurityConfiguration.java", "diffHunk": "@@ -180,6 +181,13 @@ CorsConfigurationSource corsConfigurationSource() {\n         return source;\n     }\n \n+    private void addCorsRelatedIgnoredHeaders() {\n+        zuulProperties.setIgnoredHeaders(new HashSet<>(\n+            Arrays.asList((\"Access-Control-Request-Method,Access-Control-Request-Headers,Access-Control-Allow-Origin,\" +\n+                \"Access-Control-Allow-Methods,Access-Control-Allow-Headers,Access-Control-Allow-Credentials\").split(\",\"))", "originalCommit": "837a801b263705305d7aa3b2759ec434ff661f73", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1NjQyOQ==", "url": "https://github.com/zowe/api-layer/pull/724#discussion_r444756429", "bodyText": "I am not sure, this way it is simpler for us to load them from configuration properties.", "author": "balhar-jakub", "createdAt": "2020-06-24T09:12:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyNzI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc1NjYzMg==", "url": "https://github.com/zowe/api-layer/pull/724#discussion_r444756632", "bodyText": "Which I expect we will need to do at some point.", "author": "balhar-jakub", "createdAt": "2020-06-24T09:13:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyNzI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2NjY1Mg==", "url": "https://github.com/zowe/api-layer/pull/724#discussion_r444766652", "bodyText": "ok then. is there reason to not put them in configuration now?", "author": "achmelo", "createdAt": "2020-06-24T09:30:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyNzI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDgyNjQxOQ==", "url": "https://github.com/zowe/api-layer/pull/724#discussion_r444826419", "bodyText": "Ultimately nope. I will add it later today.", "author": "balhar-jakub", "createdAt": "2020-06-24T11:27:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyNzI4OA=="}], "type": "inlineReview"}, {"oid": "256787fe61069a3968fc5ef558057fb899b143f5", "url": "https://github.com/zowe/api-layer/commit/256787fe61069a3968fc5ef558057fb899b143f5", "message": "Configure ignored CORS Headers in properties\n\nMove the configuration of the ignored CORS headers to the properties so that it is possible to add others in configuration.\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-06-24T11:40:42Z", "type": "commit"}, {"oid": "0aa93bfafaeb6cb01b143959ed2b8f62a549363c", "url": "https://github.com/zowe/api-layer/commit/0aa93bfafaeb6cb01b143959ed2b8f62a549363c", "message": "Merge branch 'master' into rip/GH384/filter_cors_related_from_southbound", "committedDate": "2020-06-25T05:19:34Z", "type": "commit"}]}