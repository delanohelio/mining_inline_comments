{"pr_number": 501, "pr_title": "CLDR-13750 Replace custom comparison logic with JDK comparators", "pr_createdAt": "2020-06-03T10:24:23Z", "pr_url": "https://github.com/unicode-org/cldr/pull/501", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2ODc3NA==", "url": "https://github.com/unicode-org/cldr/pull/501#discussion_r434468774", "bodyText": "This and the other \"nullsFirst()\" call can be removed without obviously breaking anything, and I'd prefer to do that, but you might know why that's not a good idea.", "author": "hagbard", "createdAt": "2020-06-03T10:30:33Z", "path": "tools/java/org/unicode/cldr/tool/WritePluralRules.java", "diffHunk": "@@ -13,15 +15,26 @@\n import org.unicode.cldr.util.SupplementalDataInfo.PluralType;\n \n import com.google.common.base.Joiner;\n-import com.ibm.icu.dev.util.CollectionUtilities;\n+import com.google.common.collect.Comparators;\n import com.ibm.icu.impl.Relation;\n import com.ibm.icu.text.PluralRules;\n \n public class WritePluralRules {\n+    // Ordering by size-of-set first, and then lexicographically, with a final tie-break on the\n+    // string representation.\n+    // Note: This code was refactored from a legacy utility method (which allowed null) but it's\n+    // not actually clear if nulls need to be allowed in this case.\n+    private static final Comparator<PluralRules> PLURAL_RULES_COMPARATOR =\n+        Comparator.<PluralRules, Integer>comparing(r -> r.getKeywords().size())\n+            .thenComparing(PluralRules::getKeywords,\n+                Comparators.lexicographical(Comparator.<String>nullsFirst(naturalOrder())))", "originalCommit": "83fd3caaaf4adc0be86a747f5fc17e9a9e4647a2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "40684b4f950ee347589f3f5d93fe7a3fab8df98b", "url": "https://github.com/unicode-org/cldr/commit/40684b4f950ee347589f3f5d93fe7a3fab8df98b", "message": "CLDR-13750 Replace custom comparison logic with JDK comparators", "committedDate": "2020-06-03T19:53:37Z", "type": "forcePushed"}, {"oid": "5bac39708ace1d47a42bde54bb5281aec3e3c11a", "url": "https://github.com/unicode-org/cldr/commit/5bac39708ace1d47a42bde54bb5281aec3e3c11a", "message": "CLDR-13750 Replace custom comparison logic with JDK comparators", "committedDate": "2020-06-03T20:11:30Z", "type": "commit"}, {"oid": "5bac39708ace1d47a42bde54bb5281aec3e3c11a", "url": "https://github.com/unicode-org/cldr/commit/5bac39708ace1d47a42bde54bb5281aec3e3c11a", "message": "CLDR-13750 Replace custom comparison logic with JDK comparators", "committedDate": "2020-06-03T20:11:30Z", "type": "forcePushed"}]}