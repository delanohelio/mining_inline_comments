{"pr_number": 757, "pr_title": "CLDR-12002 move sandbox from und to mul", "pr_createdAt": "2020-10-02T21:28:27Z", "pr_url": "https://github.com/unicode-org/cldr/pull/757", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA1ODc1Nw==", "url": "https://github.com/unicode-org/cldr/pull/757#discussion_r499058757", "bodyText": "we actually could have multiple sandbox locales\u2026\u00a0i.e. different scripts, etc\u2026\u00a0without needing to revisit this code.", "author": "srl295", "createdAt": "2020-10-02T21:30:00Z", "path": "tools/cldr-apps/src/main/java/org/unicode/cldr/web/UserRegistry.java", "diffHunk": "@@ -1793,8 +1794,8 @@ private static Object userCanAccessForumWhy(User u, CLDRLocale locale) {\n             return null; // Admin can modify all\n         if (userIsTC(u))\n             return null; // TC can modify all\n-        if (locale.getLanguage().equals(\"und\")) { // all user accounts can write\n-            // to und.\n+        if (SpecialLocales.getType(locale) == SpecialLocales.Type.scratch) {", "originalCommit": "78041ab9d7959f5f77de8e1f32c60b59fc6b0f21", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e37a5dd8b3cadbb1847c1665b1125783f27d1172", "url": "https://github.com/unicode-org/cldr/commit/e37a5dd8b3cadbb1847c1665b1125783f27d1172", "message": "CLDR-12002 move sandbox from und to mul\n\n- update UserRegistry to check SpecialLocales\n- cleanup some hard coded use of und\n- use 'root' as default from .js instead of und\n- add 'mul_ZZ' to some metadata\n- do not require 'und' to exist", "committedDate": "2020-10-02T22:16:27Z", "type": "forcePushed"}, {"oid": "128a5f0f86ee17a425236274ae8c63b17dcb9b80", "url": "https://github.com/unicode-org/cldr/commit/128a5f0f86ee17a425236274ae8c63b17dcb9b80", "message": "CLDR-12002 move sandbox from und to mul\n\n- update UserRegistry to check SpecialLocales\n- cleanup some hard coded use of und\n- use 'root' as default from .js instead of und\n- add 'mul_ZZ' to some metadata\n- do not require 'und' to exist", "committedDate": "2020-10-02T22:40:58Z", "type": "forcePushed"}, {"oid": "9545f5057bd83f67dffd9eeb33a156f1994a7dc4", "url": "https://github.com/unicode-org/cldr/commit/9545f5057bd83f67dffd9eeb33a156f1994a7dc4", "message": "CLDR-12002 move sandbox from und to mul\n\n- update UserRegistry to check SpecialLocales\n- cleanup some hard coded use of und\n- use 'root' as default from .js instead of und\n- add 'mul_ZZ' to some metadata\n- do not require 'und' to exist\n- move mul out of common AND seed to new 'sandbox' tree", "committedDate": "2020-10-05T17:59:23Z", "type": "forcePushed"}, {"oid": "09c1ca9952e693d131d51e002af66bacf855e1fb", "url": "https://github.com/unicode-org/cldr/commit/09c1ca9952e693d131d51e002af66bacf855e1fb", "message": "CLDR-12002 move sandbox from und to mul\n\nNote: you will not find mul*.xml files checked in anywhere, This is on purpose.\nthey are generated dynamically with no content (just identity and a comment).\n\n- update UserRegistry to check SpecialLocales\n- cleanup some hard coded use of und\n- use 'root' as default from .js instead of und\n- do not require 'und' to exist\n- move mul out of common AND seed to new 'sandbox' tree which is created automatically\n- update SpecialLocales to provide a 'lite' id list\n- remove some noise in tests\n- update tests to be lenient on 'mul' locale\n- add mul_AQ locale to sandbox also, since mul_ZZ is the default content.\n- use mul_AQ for inheritance tests\n- cleanup some SurveyMain code around locale ids", "committedDate": "2020-10-06T18:57:14Z", "type": "forcePushed"}, {"oid": "3a1a735c951f2ea0c575546cf116cfd9fe0e536f", "url": "https://github.com/unicode-org/cldr/commit/3a1a735c951f2ea0c575546cf116cfd9fe0e536f", "message": "CLDR-12002 move sandbox from und to mul\n\nNote: you will not find mul*.xml files checked in anywhere, This is on purpose.\nthey are generated dynamically with no content (just identity and a comment).\n\n- update UserRegistry to check SpecialLocales\n- cleanup some hard coded use of und\n- use 'root' as default from .js instead of und\n- do not require 'und' to exist\n- move mul out of common AND seed to new 'sandbox' tree which is created automatically\n- update SpecialLocales to provide a 'lite' id list\n- remove some noise in tests\n- update tests to be lenient on 'mul' locale\n- add mul_AQ locale to sandbox also, since mul_ZZ is the default content.\n- use mul_AQ for inheritance tests\n- cleanup some SurveyMain code around locale ids", "committedDate": "2020-10-12T16:11:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAwMDg5Nw==", "url": "https://github.com/unicode-org/cldr/pull/757#discussion_r504000897", "bodyText": "Could these be private?", "author": "btangmu", "createdAt": "2020-10-13T14:30:47Z", "path": "tools/cldr-apps/src/main/java/org/unicode/cldr/util/SandboxLocales.java", "diffHunk": "@@ -0,0 +1,166 @@\n+package org.unicode.cldr.util;\n+\n+import java.io.File;\n+import java.io.FileNotFoundException;\n+import java.io.FileOutputStream;\n+import java.io.IOException;\n+import java.io.OutputStreamWriter;\n+import java.io.PrintWriter;\n+import java.io.UnsupportedEncodingException;\n+import java.util.Iterator;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.TreeMap;\n+\n+import org.unicode.cldr.util.XPathParts.Comments;\n+\n+public class SandboxLocales {\n+    File base;", "originalCommit": "3a1a735c951f2ea0c575546cf116cfd9fe0e536f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTAyNjc1NQ==", "url": "https://github.com/unicode-org/cldr/pull/757#discussion_r505026755", "bodyText": "done", "author": "srl295", "createdAt": "2020-10-14T22:33:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAwMDg5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAxNDQ1OQ==", "url": "https://github.com/unicode-org/cldr/pull/757#discussion_r504014459", "bodyText": "Ideally there might be a constant for the string literal \"mul\", referring to tr35 \"The content contains more than one language or text that is simultaneously in multiple languages (such as brand names).\"", "author": "btangmu", "createdAt": "2020-10-13T14:47:41Z", "path": "tools/cldr-apps/src/main/java/org/unicode/cldr/web/UserRegistry.java", "diffHunk": "@@ -1176,7 +1177,7 @@ String setLocales(WebContext ctx, int theirId, String theirEmail, String newLoca\n \n         if (!intLocs) {\n             newLocales = normalizeLocaleList(newLocales);\n-            if (newLocales.isEmpty()) newLocales = \"und\";\n+            if (newLocales.isEmpty()) newLocales = \"mul\";", "originalCommit": "3a1a735c951f2ea0c575546cf116cfd9fe0e536f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI3MjM1MQ==", "url": "https://github.com/unicode-org/cldr/pull/757#discussion_r504272351", "bodyText": "@btangmu this particular line is only for the user update - it's not related to \"multiple languages\" per se. Should it instead be instead a constant DEFAULT_LOCALE or something?", "author": "srl295", "createdAt": "2020-10-13T21:35:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAxNDQ1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgwNzAwMA==", "url": "https://github.com/unicode-org/cldr/pull/757#discussion_r504807000", "bodyText": "Yes, maybe SpecialLocales.DEFAULT_LOCALE? Anything like that is an improvement for encapsulation", "author": "btangmu", "createdAt": "2020-10-14T16:17:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAxNDQ1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTAyNDI5NA==", "url": "https://github.com/unicode-org/cldr/pull/757#discussion_r505024294", "bodyText": "removed.", "author": "srl295", "createdAt": "2020-10-14T22:29:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAxNDQ1OQ=="}], "type": "inlineReview"}, {"oid": "fa5b944f1114396c6439cb33dced3fce64fab4c6", "url": "https://github.com/unicode-org/cldr/commit/fa5b944f1114396c6439cb33dced3fce64fab4c6", "message": "CLDR-12002 move sandbox from und to mul\n\nNote: you will not find mul*.xml files checked in anywhere, This is on purpose.\nthey are generated dynamically with no content (just identity and a comment).\n\n- update UserRegistry to check SpecialLocales\n- cleanup some hard coded use of und\n- use 'root' as default from .js instead of und\n- do not require 'und' to exist\n- move mul out of common AND seed to new 'sandbox' tree which is created automatically\n- update SpecialLocales to provide a 'lite' id list\n- remove some noise in tests\n- update tests to be lenient on 'mul' locale\n- cleanup some SurveyMain code around locale ids\n- update Survey UI to display status of special locales", "committedDate": "2020-10-14T22:32:23Z", "type": "forcePushed"}, {"oid": "c6c44050ffb94a224f987ba7e4da6a17a8cac674", "url": "https://github.com/unicode-org/cldr/commit/c6c44050ffb94a224f987ba7e4da6a17a8cac674", "message": "CLDR-12002 move sandbox from und to mul\n\nNote: you will not find mul*.xml files checked in anywhere, This is on purpose.\nthey are generated dynamically with no content (just identity and a comment).\n\n- update UserRegistry to check SpecialLocales\n- cleanup some hard coded use of und\n- use 'root' as default from .js instead of und\n- do not require 'und' to exist\n- move mul out of common AND seed to new 'sandbox' tree which is created automatically\n- update SpecialLocales to provide a 'lite' id list\n- remove some noise in tests\n- update tests to be lenient on 'mul' locale\n- cleanup some SurveyMain code around locale ids\n- update Survey UI to display status of special locales", "committedDate": "2020-10-19T16:56:39Z", "type": "commit"}, {"oid": "c6c44050ffb94a224f987ba7e4da6a17a8cac674", "url": "https://github.com/unicode-org/cldr/commit/c6c44050ffb94a224f987ba7e4da6a17a8cac674", "message": "CLDR-12002 move sandbox from und to mul\n\nNote: you will not find mul*.xml files checked in anywhere, This is on purpose.\nthey are generated dynamically with no content (just identity and a comment).\n\n- update UserRegistry to check SpecialLocales\n- cleanup some hard coded use of und\n- use 'root' as default from .js instead of und\n- do not require 'und' to exist\n- move mul out of common AND seed to new 'sandbox' tree which is created automatically\n- update SpecialLocales to provide a 'lite' id list\n- remove some noise in tests\n- update tests to be lenient on 'mul' locale\n- cleanup some SurveyMain code around locale ids\n- update Survey UI to display status of special locales", "committedDate": "2020-10-19T16:56:39Z", "type": "forcePushed"}]}