{"pr_number": 3552, "pr_title": "Use StringJoiner and join()", "pr_createdAt": "2020-08-03T21:11:06Z", "pr_url": "https://github.com/typetools/checker-framework/pull/3552", "timeline": [{"oid": "3372498339925f10c5c435b84aa4c91b3007c4a0", "url": "https://github.com/typetools/checker-framework/commit/3372498339925f10c5c435b84aa4c91b3007c4a0", "message": "Use StringJoiner", "committedDate": "2020-08-01T21:47:36Z", "type": "commit"}, {"oid": "cfb124aea61f3ce6b89072d59eeacecd74fde3da", "url": "https://github.com/typetools/checker-framework/commit/cfb124aea61f3ce6b89072d59eeacecd74fde3da", "message": "Use join()", "committedDate": "2020-08-02T01:06:03Z", "type": "commit"}, {"oid": "528b0b5b9b9c0e6bd95303e990299b4a29ab9310", "url": "https://github.com/typetools/checker-framework/commit/528b0b5b9b9c0e6bd95303e990299b4a29ab9310", "message": "Fix dataflow test classpath.", "committedDate": "2020-08-03T16:06:38Z", "type": "commit"}, {"oid": "00aebe468fe10ea80301560dfac7b7c42a19a95c", "url": "https://github.com/typetools/checker-framework/commit/00aebe468fe10ea80301560dfac7b7c42a19a95c", "message": "Merge remote-tracking branch 'origin/master' into use-stringjoiner", "committedDate": "2020-08-03T16:07:17Z", "type": "commit"}, {"oid": "604afcc225a0b420474d3eb87128a97c21659643", "url": "https://github.com/typetools/checker-framework/commit/604afcc225a0b420474d3eb87128a97c21659643", "message": "Merge branch 'dataflowTest' into use-stringjoiner", "committedDate": "2020-08-03T16:07:25Z", "type": "commit"}, {"oid": "fdb29218c88998dba9023ee6b20bb23f7a2a773a", "url": "https://github.com/typetools/checker-framework/commit/fdb29218c88998dba9023ee6b20bb23f7a2a773a", "message": "Fix type qualifier", "committedDate": "2020-08-03T18:30:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM4MzIzMA==", "url": "https://github.com/typetools/checker-framework/pull/3552#discussion_r465383230", "bodyText": "Why can this one not use SystemUtil.join? Should we add a corresponding overload, to have one place to look for such join methods, instead of looking for either SystemUtil or UtilPlume?", "author": "wmdietl", "createdAt": "2020-08-04T23:21:17Z", "path": "framework/src/main/java/org/checkerframework/framework/stub/StubGenerator.java", "diffHunk": "@@ -367,21 +368,14 @@ private void indent() {\n     }\n \n     /**\n-     * Return a string representation of the list in the form of {@code item1, item2, item3, ...}.\n+     * Return a string representation of the list in the form of {@code item1, item2, item3, ...},\n+     * without surrounding square brackets as the default representation has.\n      *\n-     * <p>instead of the default representation, {@code [item1, item2, item3, ...]}\n+     * @param lst a list to format\n+     * @return a string representation of the list, without surrounding square brackets\n      */\n     private String formatList(List<?> lst) {\n-        StringBuilder sb = new StringBuilder();\n-        boolean isFirst = true;\n-        for (Object o : lst) {\n-            if (!isFirst) {\n-                sb.append(\", \");\n-            }\n-            sb.append(o);\n-            isFirst = false;\n-        }\n-        return sb.toString();\n+        return UtilPlume.join(\", \", lst);", "originalCommit": "fdb29218c88998dba9023ee6b20bb23f7a2a773a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM5Mzc2OQ==", "url": "https://github.com/typetools/checker-framework/pull/3552#discussion_r465393769", "bodyText": "Yes, it can use SystemUtil.join, but SystemUtil.join delegates to UtilPlume and this avoids the extra step.  I feel that eventually it would be good to remove the duplication and have only one version of the method.", "author": "mernst", "createdAt": "2020-08-04T23:55:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM4MzIzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYwMzAxMw==", "url": "https://github.com/typetools/checker-framework/pull/3552#discussion_r466603013", "bodyText": "#3564 takes a step toward that.  I would like to reduce usage of plume-util in favor of Guava, in the future.", "author": "mernst", "createdAt": "2020-08-06T18:23:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM4MzIzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM4MzQ0MA==", "url": "https://github.com/typetools/checker-framework/pull/3552#discussion_r465383440", "bodyText": "Same question about UtilPlume.", "author": "wmdietl", "createdAt": "2020-08-04T23:21:52Z", "path": "javacutil/src/main/java/org/checkerframework/javacutil/AnnotationBuilder.java", "diffHunk": "@@ -31,6 +31,7 @@\n import org.checkerframework.checker.interning.qual.Interned;\n import org.checkerframework.checker.nullness.qual.Nullable;\n import org.checkerframework.dataflow.qual.SideEffectFree;\n+import org.plumelib.util.UtilPlume;", "originalCommit": "fdb29218c88998dba9023ee6b20bb23f7a2a773a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "330d7a705fa09d919b32487aefbc6482c414448b", "url": "https://github.com/typetools/checker-framework/commit/330d7a705fa09d919b32487aefbc6482c414448b", "message": "Merge remote-tracking branch 'origin/master' into use-stringjoiner", "committedDate": "2020-08-05T19:28:17Z", "type": "commit"}, {"oid": "38328329286631ee17701cb23d2d2af7bf64aecb", "url": "https://github.com/typetools/checker-framework/commit/38328329286631ee17701cb23d2d2af7bf64aecb", "message": "Don't permit arguments to join to be null", "committedDate": "2020-08-06T04:01:52Z", "type": "commit"}, {"oid": "e8ad0529a3ac51d49adcb4d9a62a6d5b1eb93859", "url": "https://github.com/typetools/checker-framework/commit/e8ad0529a3ac51d49adcb4d9a62a6d5b1eb93859", "message": "Javadoc fixes", "committedDate": "2020-08-06T05:02:51Z", "type": "commit"}, {"oid": "b4be0286e37795eaf3615652942c7aabe842c88c", "url": "https://github.com/typetools/checker-framework/commit/b4be0286e37795eaf3615652942c7aabe842c88c", "message": "Merge ../checker-framework-fork-mernst-branch-use-stringjoiner into systemutil-join-plus-use-stringjoiner", "committedDate": "2020-08-06T15:35:41Z", "type": "commit"}, {"oid": "45c80c04068ba1fea46c822149e2c4d6411019d7", "url": "https://github.com/typetools/checker-framework/commit/45c80c04068ba1fea46c822149e2c4d6411019d7", "message": "Don't use deprecated method", "committedDate": "2020-08-06T15:38:08Z", "type": "commit"}, {"oid": "e10d8f027234c12ef4c1857e0fdd53483f461ae8", "url": "https://github.com/typetools/checker-framework/commit/e10d8f027234c12ef4c1857e0fdd53483f461ae8", "message": "Merge remote-tracking branch 'origin/master' into use-stringjoiner", "committedDate": "2020-08-07T17:23:23Z", "type": "commit"}]}