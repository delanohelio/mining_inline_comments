{"pr_number": 3545, "pr_title": "More concise visualization of empty store", "pr_createdAt": "2020-08-02T02:49:11Z", "pr_url": "https://github.com/typetools/checker-framework/pull/3545", "timeline": [{"oid": "0152338d21e932b8a052f926bc998ad3ee890092", "url": "https://github.com/typetools/checker-framework/commit/0152338d21e932b8a052f926bc998ad3ee890092", "message": "More concise visualization of empty store", "committedDate": "2020-08-02T01:15:34Z", "type": "commit"}, {"oid": "8d2c9d7a07bf1538ed36e4b1d65dcba0fd3f03d6", "url": "https://github.com/typetools/checker-framework/commit/8d2c9d7a07bf1538ed36e4b1d65dcba0fd3f03d6", "message": "Remove whitespace that is not present in other methods", "committedDate": "2020-08-02T03:54:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM4MDgxMQ==", "url": "https://github.com/typetools/checker-framework/pull/3545#discussion_r465380811", "bodyText": "This is removing leading/trailing spaces, right? Would just calling trim on the result be easier? A comment might be useful to document the intent.", "author": "wmdietl", "createdAt": "2020-08-04T23:13:17Z", "path": "framework/src/main/java/org/checkerframework/framework/flow/CFAbstractStore.java", "diffHunk": "@@ -1024,11 +1024,14 @@ public String visualize(CFGVisualizer<?, S, ?> viz) {\n          * CFGVisualizer<Value, Store, TransferFunction> createCFGVisualizer() of GenericAnnotatedTypeFactory */\n         @SuppressWarnings(\"unchecked\")\n         CFGVisualizer<V, S, ?> castedViz = (CFGVisualizer<V, S, ?>) viz;\n-        StringBuilder sbVisualize = new StringBuilder();\n-        sbVisualize.append(castedViz.visualizeStoreHeader(this.getClass().getSimpleName()));\n-        sbVisualize.append(internalVisualize(castedViz));\n-        sbVisualize.append(castedViz.visualizeStoreFooter());\n-        return sbVisualize.toString();\n+        String header = castedViz.visualizeStoreHeader(this.getClass().getSimpleName());\n+        String internal = internalVisualize(castedViz);\n+        String footer = castedViz.visualizeStoreFooter();\n+        if (internal.trim().isEmpty()) {\n+            return header.replaceAll(\"\\\\s+$\", \"\") + footer.replaceAll(\"^\\\\s+\", \"\");", "originalCommit": "8d2c9d7a07bf1538ed36e4b1d65dcba0fd3f03d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM5NDcxNA==", "url": "https://github.com/typetools/checker-framework/pull/3545#discussion_r465394714", "bodyText": "It removes trailing spaces from header and leading spaces from footer.  That is different than trim().  I added a comment.", "author": "mernst", "createdAt": "2020-08-04T23:58:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM4MDgxMQ=="}], "type": "inlineReview"}, {"oid": "502e74699e65a2a5dfee48c14915021879327b83", "url": "https://github.com/typetools/checker-framework/commit/502e74699e65a2a5dfee48c14915021879327b83", "message": "Add comment to explain what replaceAll does.", "committedDate": "2020-08-04T23:59:00Z", "type": "commit"}]}