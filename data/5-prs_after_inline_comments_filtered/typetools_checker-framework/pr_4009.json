{"pr_number": 4009, "pr_title": "Define method TypesUtils.getClassFromType", "pr_createdAt": "2020-12-13T16:57:16Z", "pr_url": "https://github.com/typetools/checker-framework/pull/4009", "timeline": [{"oid": "f108cb3d894b36d7403d5ec85c4009edfc771b5a", "url": "https://github.com/typetools/checker-framework/commit/f108cb3d894b36d7403d5ec85c4009edfc771b5a", "message": "Define method TypesUtils.getClassFromType", "committedDate": "2020-12-13T00:14:01Z", "type": "commit"}, {"oid": "80b89b3c619acae4d54cdbe217694015a7ec2988", "url": "https://github.com/typetools/checker-framework/commit/80b89b3c619acae4d54cdbe217694015a7ec2988", "message": "Add Javadoc", "committedDate": "2020-12-13T03:01:23Z", "type": "commit"}, {"oid": "e278e585254ba3301327cb897c3482bc428f04c0", "url": "https://github.com/typetools/checker-framework/commit/e278e585254ba3301327cb897c3482bc428f04c0", "message": "Fix primitives vs wrappers", "committedDate": "2020-12-13T04:14:18Z", "type": "commit"}, {"oid": "d7089702f0d579be29999ef5d540663b5505cce0", "url": "https://github.com/typetools/checker-framework/commit/d7089702f0d579be29999ef5d540663b5505cce0", "message": "Reduce indentation", "committedDate": "2020-12-13T04:23:28Z", "type": "commit"}, {"oid": "4dc91839b50d48e269ef87d28bfc7eae7b75a811", "url": "https://github.com/typetools/checker-framework/commit/4dc91839b50d48e269ef87d28bfc7eae7b75a811", "message": "Simplify constructor calls", "committedDate": "2020-12-13T04:23:57Z", "type": "commit"}, {"oid": "9452aebbf46414549b69801dd41cf446364b9c87", "url": "https://github.com/typetools/checker-framework/commit/9452aebbf46414549b69801dd41cf446364b9c87", "message": "Merge ../checker-framework-fork-mernst-branch-asFormatCallCategoriesLowLevel-refactor into typemirrror-to-class", "committedDate": "2020-12-13T04:26:27Z", "type": "commit"}, {"oid": "360882c09f84c5947f0034221f5e20370fef3d03", "url": "https://github.com/typetools/checker-framework/commit/360882c09f84c5947f0034221f5e20370fef3d03", "message": "Fix Javadoc", "committedDate": "2020-12-13T04:28:29Z", "type": "commit"}, {"oid": "e2e5e66d0417b15bfe52301b3e2b37e0425bcdb9", "url": "https://github.com/typetools/checker-framework/commit/e2e5e66d0417b15bfe52301b3e2b37e0425bcdb9", "message": "Fix Javadoc", "committedDate": "2020-12-13T04:28:43Z", "type": "commit"}, {"oid": "aa3b4a765d59028f46961cd66d623b9af8259ddc", "url": "https://github.com/typetools/checker-framework/commit/aa3b4a765d59028f46961cd66d623b9af8259ddc", "message": "Merge ../checker-framework-fork-mernst-branch-ConversionCategory-refactor into typemirrror-to-class", "committedDate": "2020-12-13T04:31:01Z", "type": "commit"}, {"oid": "9a2c434db8c2a54064a70d8e3d6f0d4d8d96c1d2", "url": "https://github.com/typetools/checker-framework/commit/9a2c434db8c2a54064a70d8e3d6f0d4d8d96c1d2", "message": "Use == instead of .equals", "committedDate": "2020-12-13T04:36:37Z", "type": "commit"}, {"oid": "85f7eb13d559aa5738ca5609edcfe22e952e3fc3", "url": "https://github.com/typetools/checker-framework/commit/85f7eb13d559aa5738ca5609edcfe22e952e3fc3", "message": "Define isAssignableFrom", "committedDate": "2020-12-13T04:55:38Z", "type": "commit"}, {"oid": "05bcc144f99594cf100eadf1ce19082edcfb1b19", "url": "https://github.com/typetools/checker-framework/commit/05bcc144f99594cf100eadf1ce19082edcfb1b19", "message": "Javadoc fix", "committedDate": "2020-12-13T05:01:00Z", "type": "commit"}, {"oid": "23b20b632068451db39969e574a884aa0a689728", "url": "https://github.com/typetools/checker-framework/commit/23b20b632068451db39969e574a884aa0a689728", "message": "Merge ../checker-framework-fork-mernst-branch-ConversionCategory-refactor into typemirrror-to-class", "committedDate": "2020-12-13T05:02:42Z", "type": "commit"}, {"oid": "e2a29ecc8974e05367a0d837f6e6ced06c61f2b2", "url": "https://github.com/typetools/checker-framework/commit/e2a29ecc8974e05367a0d837f6e6ced06c61f2b2", "message": "Prevent NPE", "committedDate": "2020-12-13T05:55:37Z", "type": "commit"}, {"oid": "4e5c29fb49598c0250d1115ead94d08c5146dc7f", "url": "https://github.com/typetools/checker-framework/commit/4e5c29fb49598c0250d1115ead94d08c5146dc7f", "message": "Suppress false positive warnings", "committedDate": "2020-12-13T06:20:15Z", "type": "commit"}, {"oid": "7c8ede419e3bcc45ea116438c1e5d00b92a9b67f", "url": "https://github.com/typetools/checker-framework/commit/7c8ede419e3bcc45ea116438c1e5d00b92a9b67f", "message": "Merge ../checker-framework-branch-master into typemirrror-to-class", "committedDate": "2020-12-13T06:33:40Z", "type": "commit"}, {"oid": "c3ba9ecec2dbe97cbc474c9341988f6082b706f6", "url": "https://github.com/typetools/checker-framework/commit/c3ba9ecec2dbe97cbc474c9341988f6082b706f6", "message": "Merge ../checker-framework-branch-master into ConversionCategory-refactor", "committedDate": "2020-12-13T06:34:38Z", "type": "commit"}, {"oid": "7e35000f6ce2c473eb56605cc7ab5fee163db6a6", "url": "https://github.com/typetools/checker-framework/commit/7e35000f6ce2c473eb56605cc7ab5fee163db6a6", "message": "Merge ../checker-framework-fork-mernst-branch-ConversionCategory-refactor into typemirrror-to-class", "committedDate": "2020-12-13T06:36:20Z", "type": "commit"}, {"oid": "581a10701d5cb8a97d4013e728d3b56642a5e20f", "url": "https://github.com/typetools/checker-framework/commit/581a10701d5cb8a97d4013e728d3b56642a5e20f", "message": "Suppress Nullness Checker warning", "committedDate": "2020-12-13T15:42:06Z", "type": "commit"}, {"oid": "d5027d4f7ee38ea3859ae21c6ca6d842396ab9ff", "url": "https://github.com/typetools/checker-framework/commit/d5027d4f7ee38ea3859ae21c6ca6d842396ab9ff", "message": "Merge ../checker-framework-branch-master into typemirrror-to-class", "committedDate": "2020-12-13T15:42:36Z", "type": "commit"}, {"oid": "14eeaabdc2e0d06973a05ec0583e4d2181e8cb45", "url": "https://github.com/typetools/checker-framework/commit/14eeaabdc2e0d06973a05ec0583e4d2181e8cb45", "message": "Fix nullness error, remove warning suppression", "committedDate": "2020-12-14T14:59:55Z", "type": "commit"}, {"oid": "88ef763fd8aa5b96da7f53e278fbccaf7d0dd11d", "url": "https://github.com/typetools/checker-framework/commit/88ef763fd8aa5b96da7f53e278fbccaf7d0dd11d", "message": "Fix nullness error, remove warning suppression", "committedDate": "2020-12-14T15:00:25Z", "type": "commit"}, {"oid": "9765f89ac66918228561e6282d84574b8cedc12c", "url": "https://github.com/typetools/checker-framework/commit/9765f89ac66918228561e6282d84574b8cedc12c", "message": "Merge ../checker-framework-fork-mernst-branch-ConversionCategory-refactor into typemirrror-to-class", "committedDate": "2020-12-14T15:01:05Z", "type": "commit"}, {"oid": "ad35e37e56e1c5b2d1c18547a6c6d01663808090", "url": "https://github.com/typetools/checker-framework/commit/ad35e37e56e1c5b2d1c18547a6c6d01663808090", "message": "Merge ../checker-framework-branch-master into ConversionCategory-refactor", "committedDate": "2020-12-14T16:15:48Z", "type": "commit"}, {"oid": "b14433ef65ec3883a0fbee14d2e6461a4dbeb85e", "url": "https://github.com/typetools/checker-framework/commit/b14433ef65ec3883a0fbee14d2e6461a4dbeb85e", "message": "Merge ../checker-framework-fork-mernst-branch-ConversionCategory-refactor into typemirrror-to-class", "committedDate": "2020-12-14T16:16:07Z", "type": "commit"}, {"oid": "6be5d09db7de7bfe6338581a8d6ce4a76374fe2b", "url": "https://github.com/typetools/checker-framework/commit/6be5d09db7de7bfe6338581a8d6ce4a76374fe2b", "message": "Tweaks", "committedDate": "2020-12-14T16:28:46Z", "type": "commit"}, {"oid": "ba4db4f77fcec21a7b7265b7fe118292bfc00d60", "url": "https://github.com/typetools/checker-framework/commit/ba4db4f77fcec21a7b7265b7fe118292bfc00d60", "message": "Merge remote-tracking branch 'origin/master' into ConversionCategory-refactor", "committedDate": "2020-12-14T18:00:44Z", "type": "commit"}, {"oid": "8e3beddf3858a3bd49784053d43ed4a49783f978", "url": "https://github.com/typetools/checker-framework/commit/8e3beddf3858a3bd49784053d43ed4a49783f978", "message": "Merge remote-tracking branch 'remotes/origin/master' into ConversionCategory-refactor\n\n# Conflicts:\n#\tchecker/src/main/java/org/checkerframework/checker/formatter/qual/ConversionCategory.java", "committedDate": "2020-12-14T18:02:36Z", "type": "commit"}, {"oid": "13f4c6a9bb7f4156a8d8ec42b7fcfea5897d8f29", "url": "https://github.com/typetools/checker-framework/commit/13f4c6a9bb7f4156a8d8ec42b7fcfea5897d8f29", "message": "Merge ../checker-framework-branch-master into typemirrror-to-class", "committedDate": "2020-12-15T00:18:44Z", "type": "commit"}, {"oid": "0fa7436ff24bd87f98271538ab27794dab53326c", "url": "https://github.com/typetools/checker-framework/commit/0fa7436ff24bd87f98271538ab27794dab53326c", "message": "Merge ../checker-framework-branch-master into typemirrror-to-class", "committedDate": "2020-12-15T00:43:32Z", "type": "commit"}, {"oid": "6d12b1fd4a23499e4dc7c1e366790948cf71f68c", "url": "https://github.com/typetools/checker-framework/commit/6d12b1fd4a23499e4dc7c1e366790948cf71f68c", "message": "Merge ../checker-framework-fork-mernst-branch-ConversionCategory-refactor into typemirrror-to-class", "committedDate": "2020-12-15T00:46:02Z", "type": "commit"}, {"oid": "6af73b216bc8b7f1549b5c1a54f3dd0fd3a4cf39", "url": "https://github.com/typetools/checker-framework/commit/6af73b216bc8b7f1549b5c1a54f3dd0fd3a4cf39", "message": "Merge ../checker-framework-branch-master into typemirrror-to-class", "committedDate": "2020-12-15T00:51:51Z", "type": "commit"}, {"oid": "42e8cdff8acb6476d7735c7a4cea7bf9886c84d1", "url": "https://github.com/typetools/checker-framework/commit/42e8cdff8acb6476d7735c7a4cea7bf9886c84d1", "message": "Merge ../checker-framework-branch-master into typemirrror-to-class", "committedDate": "2020-12-15T03:43:08Z", "type": "commit"}, {"oid": "f55d2af942a653d3690b5181644aa29a5a65591c", "url": "https://github.com/typetools/checker-framework/commit/f55d2af942a653d3690b5181644aa29a5a65591c", "message": "Merge ../checker-framework-branch-master into typemirrror-to-class", "committedDate": "2020-12-15T04:36:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzYwMDUwNA==", "url": "https://github.com/typetools/checker-framework/pull/4009#discussion_r543600504", "bodyText": "I think you can delete this comments now?", "author": "smillst", "createdAt": "2020-12-15T18:52:04Z", "path": "checker/src/main/java/org/checkerframework/checker/formatter/qual/ConversionCategory.java", "diffHunk": "@@ -131,7 +134,57 @@\n      */\n     ConversionCategory(@Nullable String chars, Class<?> @Nullable ... types) {\n         this.chars = chars;\n-        this.types = types;\n+        if (types == null) {\n+            this.types = types;\n+        } else {\n+            List<Class<?>> typesWithPrimitives = new ArrayList<>();\n+            for (Class<?> type : types) {\n+                typesWithPrimitives.add(type);\n+                Class<?> unwrapped = unwrapPrimitive(type);\n+                if (unwrapped != null) {\n+                    typesWithPrimitives.add(unwrapped);\n+                }\n+            }\n+            this.types = typesWithPrimitives.toArray(new Class<?>[typesWithPrimitives.size()]);\n+        }\n+    }\n+\n+    /**\n+     * If the given class is a primitive wrapper, return the corresponding primitive class.\n+     * Otherwise return null.\n+     *\n+     * @param c a class\n+     * @return the unwrapped primitive, or null\n+     */\n+    // With this @SuppressWarnings annotation, `./gradlew :checker-qual:checkNullness` yields\n+    // nullness:unneeded.suppression.\n+    // @SuppressWarnings(\"nullness:return.type.incompatible\") // Checker Framework bug?", "originalCommit": "f55d2af942a653d3690b5181644aa29a5a65591c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c57adb4ee48e4f78593cfcd226ee37f5c9d02252", "url": "https://github.com/typetools/checker-framework/commit/c57adb4ee48e4f78593cfcd226ee37f5c9d02252", "message": "Remove obsolete comment", "committedDate": "2020-12-15T19:37:46Z", "type": "commit"}]}