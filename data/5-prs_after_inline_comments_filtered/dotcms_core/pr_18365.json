{"pr_number": 18365, "pr_title": "  apps resilience when a site is deleted", "pr_createdAt": "2020-04-27T14:55:04Z", "pr_url": "https://github.com/dotCMS/core/pull/18365", "timeline": [{"oid": "dfc2b46c0bb0963c93fdc7eb24742513458be2d8", "url": "https://github.com/dotCMS/core/commit/dfc2b46c0bb0963c93fdc7eb24742513458be2d8", "message": "  apps resilience when a site is deleted", "committedDate": "2020-04-26T05:02:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkwNTkzNQ==", "url": "https://github.com/dotCMS/core/pull/18365#discussion_r415905935", "bodyText": "I think appKeysByHost  methods do not need to be public. But in case it's necessary, they should have integration tests", "author": "nollymar", "createdAt": "2020-04-27T15:21:04Z", "path": "dotCMS/src/main/java/com/dotcms/security/apps/AppsAPIImpl.java", "diffHunk": "@@ -130,13 +135,24 @@ private boolean userDoesNotHaveAccess(final User user) throws DotDataException {\n     }\n \n     @Override\n-    public Map<String, Set<String>> appKeysByHost() {\n-        return secretsStore.listKeys().stream()\n+    public Map<String, Set<String>> appKeysByHost() throws DotSecurityException, DotDataException{", "originalCommit": "dfc2b46c0bb0963c93fdc7eb24742513458be2d8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjExNDU1NQ==", "url": "https://github.com/dotCMS/core/pull/18365#discussion_r416114555", "bodyText": "yeah agreed. It'll remind private", "author": "fabrizzio-dotCMS", "createdAt": "2020-04-27T20:10:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkwNTkzNQ=="}], "type": "inlineReview"}, {"oid": "d06a6dbbea84ab29116abcbea67c972821472dc7", "url": "https://github.com/dotCMS/core/commit/d06a6dbbea84ab29116abcbea67c972821472dc7", "message": "Merge branch 'apps-feature-branch' into apps-site-delete-resilience", "committedDate": "2020-04-27T15:57:42Z", "type": "commit"}, {"oid": "c201c8c6d27da0a1134139ac54bde33ae6fc0aae", "url": "https://github.com/dotCMS/core/commit/c201c8c6d27da0a1134139ac54bde33ae6fc0aae", "message": "# apps delete secrets for site", "committedDate": "2020-04-27T16:56:26Z", "type": "commit"}, {"oid": "b1e8c9ef9af33267af12d8ab1d26694eaf4c074e", "url": "https://github.com/dotCMS/core/commit/b1e8c9ef9af33267af12d8ab1d26694eaf4c074e", "message": " apps site delete resilience", "committedDate": "2020-04-27T18:56:28Z", "type": "commit"}, {"oid": "0e56b9666a9f049713ecd78ee423ce9d4801c393", "url": "https://github.com/dotCMS/core/commit/0e56b9666a9f049713ecd78ee423ce9d4801c393", "message": "# apps site delete resilience", "committedDate": "2020-04-27T19:00:32Z", "type": "commit"}, {"oid": "448a46b6c45096e2b4efc31d87706c51db5f44b3", "url": "https://github.com/dotCMS/core/commit/448a46b6c45096e2b4efc31d87706c51db5f44b3", "message": "#apps site resilience + merge", "committedDate": "2020-04-27T20:06:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE0Mjg4NQ==", "url": "https://github.com/dotCMS/core/pull/18365#discussion_r416142885", "bodyText": "Changing this file on this PR is not necessary as the remove orphan endpoint was deleted", "author": "nollymar", "createdAt": "2020-04-27T20:56:58Z", "path": "dotCMS/src/main/java/com/dotcms/rest/api/v1/apps/AppsResource.java", "diffHunk": "@@ -6,8 +6,8 @@\n import com.dotcms.rest.ResponseEntityView;\n import com.dotcms.rest.WebResource;\n import com.dotcms.rest.annotation.NoCache;\n-import com.dotcms.rest.api.v1.authentication.ResponseUtil;\n import com.dotcms.rest.api.v1.apps.view.AppView;\n+import com.dotcms.rest.api.v1.authentication.ResponseUtil;", "originalCommit": "448a46b6c45096e2b4efc31d87706c51db5f44b3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}