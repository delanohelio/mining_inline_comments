{"pr_number": 1102, "pr_title": "Add support to empty prefix value in XML messages", "pr_createdAt": "2020-11-07T05:22:01Z", "pr_url": "https://github.com/minio/minio-java/pull/1102", "timeline": [{"oid": "42e6707b7cc66d7abe5396a4f19feb1dd632a1a5", "url": "https://github.com/minio/minio-java/commit/42e6707b7cc66d7abe5396a4f19feb1dd632a1a5", "message": "Add support to empty prefix value in XML messages", "committedDate": "2020-11-07T05:17:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ4Mjg4NA==", "url": "https://github.com/minio/minio-java/pull/1102#discussion_r529482884", "bodyText": "Since the logic is not very specific to prefix as such and can be useful wherever such a functionality is required (de-serialize empty tag to empty string), maybe the name of this class can be something more generic? Say StringConverter ?", "author": "anjalshireesh", "createdAt": "2020-11-24T11:43:39Z", "path": "api/src/main/java/io/minio/messages/PrefixConverter.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * MinIO Java SDK for Amazon S3 Compatible Cloud Storage, (C) 2020 MinIO, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.minio.messages;\n+\n+import org.simpleframework.xml.convert.Converter;\n+import org.simpleframework.xml.stream.InputNode;\n+import org.simpleframework.xml.stream.OutputNode;\n+\n+/**\n+ * XML converter class for prefix due to SimpleXML limitation in converting empty tag\n+ * <Prefix></Prefix> to empty string.\n+ */\n+public class PrefixConverter implements Converter<String> {", "originalCommit": "42e6707b7cc66d7abe5396a4f19feb1dd632a1a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDA3OTY1OA==", "url": "https://github.com/minio/minio-java/pull/1102#discussion_r530079658", "bodyText": "Currently prefix is only supported empty. Surely change when I find another case.", "author": "balamurugana", "createdAt": "2020-11-25T03:10:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ4Mjg4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ4NjQzOQ==", "url": "https://github.com/minio/minio-java/pull/1102#discussion_r529486439", "bodyText": "Since the exact same code is being used at multiple places to create this lifecycle rule, maybe it can be defined as a method or a static final class level variable?", "author": "anjalshireesh", "createdAt": "2020-11-24T11:49:55Z", "path": "functional/FunctionalTest.java", "diffHunk": "@@ -2799,7 +2789,17 @@ public static void setBucketLifecycle() throws Exception {\n     try {\n       client.makeBucket(MakeBucketArgs.builder().bucket(bucketName).build());\n       try {\n-        testSetBucketLifecycle(bucketName);\n+        testSetBucketLifecycle(\n+            bucketName,\n+            new LifecycleRule(\n+                Status.ENABLED,\n+                null,\n+                new Expiration((ZonedDateTime) null, 365, null),\n+                new RuleFilter(\"logs/\"),\n+                \"rule2\",\n+                null,\n+                null,\n+                null));", "originalCommit": "42e6707b7cc66d7abe5396a4f19feb1dd632a1a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDA3OTgyOA==", "url": "https://github.com/minio/minio-java/pull/1102#discussion_r530079828", "bodyText": "Yep. I will take care in next refactoring functional tests.", "author": "balamurugana", "createdAt": "2020-11-25T03:10:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ4NjQzOQ=="}], "type": "inlineReview"}]}