{"pr_number": 2234, "pr_title": "Add a bash/zsh autocomplete script to distributions", "pr_createdAt": "2020-06-26T08:53:39Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2234", "timeline": [{"oid": "7941ba5b98a1b53ef2b9e977dcce92f34b405bb3", "url": "https://github.com/ConsenSys/teku/commit/7941ba5b98a1b53ef2b9e977dcce92f34b405bb3", "message": "Add a bash/zsh autocomplete script to distributions.", "committedDate": "2020-06-26T08:49:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA2Nzc0NQ==", "url": "https://github.com/ConsenSys/teku/pull/2234#discussion_r446067745", "bodyText": "I believe we are exiting after executing this command, however I would avoid closing System.out though", "author": "Nashatyrev", "createdAt": "2020-06-26T09:16:42Z", "path": "teku/src/main/java/tech/pegasys/teku/cli/subcommand/debug/DebugCommand.java", "diffHunk": "@@ -24,15 +33,54 @@\n     showDefaultValues = true,\n     abbreviateSynopsis = true,\n     mixinStandardHelpOptions = true,\n+    addMethodSubcommands = true,\n     versionProvider = PicoCliVersionProvider.class,\n     synopsisHeading = \"%n\",\n     descriptionHeading = \"%nDescription:%n%n\",\n     optionListHeading = \"%nOptions:%n\",\n     footerHeading = \"%n\",\n     footer = \"Teku is licensed under the Apache License 2.0\")\n public class DebugCommand implements Runnable {\n+  @Spec private CommandSpec commandSpec;\n+\n   @Override\n   public void run() {\n     CommandLine.usage(this, System.out);\n   }\n+\n+  @Command(\n+      name = \"generate-autocomplete\",\n+      description = \"Generate a bash/zsh autocomplete file\",\n+      subcommands = {DebugDbCommand.class},\n+      showDefaultValues = true,\n+      abbreviateSynopsis = true,\n+      mixinStandardHelpOptions = true,\n+      versionProvider = PicoCliVersionProvider.class,\n+      synopsisHeading = \"%n\",\n+      descriptionHeading = \"%nDescription:%n%n\",\n+      optionListHeading = \"%nOptions:%n\",\n+      footerHeading = \"%n\",\n+      footer = \"Teku is licensed under the Apache License 2.0\")\n+  public int autocomplete(\n+      @Option(\n+              names = {\"--output\", \"-o\"},\n+              description = \"File to output to, default is System.out\")\n+          final File output) {\n+    try (final PrintStream out = outputStream(output)) {", "originalCommit": "7941ba5b98a1b53ef2b9e977dcce92f34b405bb3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQyNjI3MQ==", "url": "https://github.com/ConsenSys/teku/pull/2234#discussion_r446426271", "bodyText": "Sorry, I missed this comment before merging.  I must learn not to use the mobile GitHub app...\nFixed in #2237", "author": "ajsutton", "createdAt": "2020-06-26T21:50:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA2Nzc0NQ=="}], "type": "inlineReview"}, {"oid": "a12878dd6a3a57bd96ae91c769e27c12ea897f3c", "url": "https://github.com/ConsenSys/teku/commit/a12878dd6a3a57bd96ae91c769e27c12ea897f3c", "message": "Merge branch 'master' into bash-autocomplete", "committedDate": "2020-06-26T21:13:00Z", "type": "commit"}]}