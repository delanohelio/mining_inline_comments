{"pr_number": 1681, "pr_title": "Inline CLI option names and defaults", "pr_createdAt": "2020-04-27T20:44:11Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1681", "timeline": [{"oid": "fd1f04584e483418097c58d56b92431af3e3cdcc", "url": "https://github.com/ConsenSys/teku/commit/fd1f04584e483418097c58d56b92431af3e3cdcc", "message": "Inline CLI option names and defaults.\n* Fixes intermittently failing unit test because some default values were mutable lists that were being modified\n* Easier to read\n* Tests are now separated from the production code so they can effectively test the default values and option names rather than automatically expecting whatever the production code does.", "committedDate": "2020-04-27T20:42:16Z", "type": "commit"}, {"oid": "fbf0e29e419aa279ccb41aece35cea2a6f484b4b", "url": "https://github.com/ConsenSys/teku/commit/fbf0e29e419aa279ccb41aece35cea2a6f484b4b", "message": "Must use a mutable list as the default because PicoCLI mutates it.", "committedDate": "2020-04-27T21:01:35Z", "type": "commit"}, {"oid": "bfb4cb867ff188cb45868404f473f755a9536665", "url": "https://github.com/ConsenSys/teku/commit/bfb4cb867ff188cb45868404f473f755a9536665", "message": "Spotless.", "committedDate": "2020-04-27T21:14:56Z", "type": "commit"}, {"oid": "0b2bad6021dd6d8d0dadcf5fb69a52d8ff0b0dd6", "url": "https://github.com/ConsenSys/teku/commit/0b2bad6021dd6d8d0dadcf5fb69a52d8ff0b0dd6", "message": "Use a log.", "committedDate": "2020-04-27T21:16:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjgwNDQ0NQ==", "url": "https://github.com/ConsenSys/teku/pull/1681#discussion_r416804445", "bodyText": "I thought it was kind of a nice feature to not have to track down these strings when we change a CLI option name", "author": "mbaxter", "createdAt": "2020-04-28T17:44:24Z", "path": "artemis/src/test/java/tech/pegasys/artemis/cli/BeaconNodeCommandTest.java", "diffHunk": "@@ -174,7 +165,7 @@ public void overrideDefaultValuesIfKeyIsPresentInConfigFile() throws IOException\n   @Test\n   public void interopEnabled_shouldNotRequireAValue() {\n     final ArtemisConfiguration artemisConfiguration =\n-        getArtemisConfigurationFromArguments(INTEROP_ENABLED_OPTION_NAME);\n+        getArtemisConfigurationFromArguments(\"--Xinterop-enabled\");", "originalCommit": "0b2bad6021dd6d8d0dadcf5fb69a52d8ff0b0dd6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjg3ODYzNA==", "url": "https://github.com/ConsenSys/teku/pull/1681#discussion_r416878634", "bodyText": "Yeah it does have some advantages, but changing CLI option names should be very rare and very deliberate as it breaks backwards compatibility for users.", "author": "ajsutton", "createdAt": "2020-04-28T19:48:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjgwNDQ0NQ=="}], "type": "inlineReview"}]}