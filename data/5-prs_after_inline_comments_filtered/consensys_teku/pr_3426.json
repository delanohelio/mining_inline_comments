{"pr_number": 3426, "pr_title": " Moving all SSZ containers to backing structures (part 2)", "pr_createdAt": "2020-12-29T17:12:35Z", "pr_url": "https://github.com/ConsenSys/teku/pull/3426", "timeline": [{"oid": "e9af28b49647ce25472f7452f023a02e18662651", "url": "https://github.com/ConsenSys/teku/commit/e9af28b49647ce25472f7452f023a02e18662651", "message": "Add a couple of JMH benchmarks, change mode to usec/op", "committedDate": "2021-01-28T18:06:34Z", "type": "commit"}, {"oid": "0b10dc6dd483db30077047a38a9a8d8be0d3574b", "url": "https://github.com/ConsenSys/teku/commit/0b10dc6dd483db30077047a38a9a8d8be0d3574b", "message": "Remove legacy code", "committedDate": "2021-01-28T18:42:42Z", "type": "commit"}, {"oid": "01cbc79071184da72b4895052412c4969f573acf", "url": "https://github.com/ConsenSys/teku/commit/01cbc79071184da72b4895052412c4969f573acf", "message": "Adjust the testcase to expect UnsupportedOperationException until following refactor", "committedDate": "2021-01-28T19:28:57Z", "type": "commit"}, {"oid": "0de4f64ddbbf77e02a712c090e82a0bb3f2278a9", "url": "https://github.com/ConsenSys/teku/commit/0de4f64ddbbf77e02a712c090e82a0bb3f2278a9", "message": "Instead of prohibiting ViewWrite.getBackingNode() (and inherently ViewWrite.hashTreeRoot()) just commitChanges() for temp ViewRead. Add a warning that this could be suboptimal", "committedDate": "2021-01-29T09:40:55Z", "type": "commit"}, {"oid": "1c1139a1eab297977a62f9df35db4141eede95c3", "url": "https://github.com/ConsenSys/teku/commit/1c1139a1eab297977a62f9df35db4141eede95c3", "message": "Add handy util methods to ssz view classes", "committedDate": "2021-01-29T09:41:56Z", "type": "commit"}, {"oid": "1a9400389da3c451ece99d200355276f74b7212a", "url": "https://github.com/ConsenSys/teku/commit/1a9400389da3c451ece99d200355276f74b7212a", "message": "Remove HashTreeUtil class", "committedDate": "2021-01-29T09:42:18Z", "type": "commit"}, {"oid": "94fb23c96b22d64583bf71fa1ea84af906fb5aae", "url": "https://github.com/ConsenSys/teku/commit/94fb23c96b22d64583bf71fa1ea84af906fb5aae", "message": "Fix regression in GenesisGenerator", "committedDate": "2021-01-29T09:57:25Z", "type": "commit"}, {"oid": "922a31a3c39b0dde24fd2705b8f64c2e97aefe21", "url": "https://github.com/ConsenSys/teku/commit/922a31a3c39b0dde24fd2705b8f64c2e97aefe21", "message": "Merge remote-tracking branch 'ConsenSys/master' into feature/remove-old-ssz\n\n# Conflicts:\n#\tethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/forkchoice/VoteTracker.java\n#\tethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/operations/AggregateAndProof.java\n#\tethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/operations/Attestation.java\n#\tethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/operations/IndexedAttestation.java\n#\tssz/src/main/java/tech/pegasys/teku/ssz/SSZTypes/Bitlist.java\n#\tssz/src/main/java/tech/pegasys/teku/ssz/backing/view/ViewUtils.java", "committedDate": "2021-01-29T10:52:36Z", "type": "commit"}, {"oid": "698ba57cd67bb2dce1da4077d7a8456cb3d90e0e", "url": "https://github.com/ConsenSys/teku/commit/698ba57cd67bb2dce1da4077d7a8456cb3d90e0e", "message": "Revert back accidentally committed debug changes", "committedDate": "2021-01-29T11:03:49Z", "type": "commit"}, {"oid": "0246e72b3c42156e57465b88bd24e838ddafb0df", "url": "https://github.com/ConsenSys/teku/commit/0246e72b3c42156e57465b88bd24e838ddafb0df", "message": "Minor cleanup", "committedDate": "2021-01-29T11:17:47Z", "type": "commit"}, {"oid": "88ce30982794ab1da4096788048346a41c24eb20", "url": "https://github.com/ConsenSys/teku/commit/88ce30982794ab1da4096788048346a41c24eb20", "message": "Some more minor clean up", "committedDate": "2021-01-29T12:00:39Z", "type": "commit"}, {"oid": "8e26a97f6a7ee14a339b1f3a3529945bde390b2b", "url": "https://github.com/ConsenSys/teku/commit/8e26a97f6a7ee14a339b1f3a3529945bde390b2b", "message": "Update tests: add compare structures by getters", "committedDate": "2021-01-29T12:01:46Z", "type": "commit"}, {"oid": "c86e7b8c90edcb1110227c8ca4f25457e9cb145c", "url": "https://github.com/ConsenSys/teku/commit/c86e7b8c90edcb1110227c8ca4f25457e9cb145c", "message": "Spotless", "committedDate": "2021-01-29T12:02:32Z", "type": "commit"}, {"oid": "f51c24a8ed73fb6f2ebd31720a43f1d20471f6dd", "url": "https://github.com/ConsenSys/teku/commit/f51c24a8ed73fb6f2ebd31720a43f1d20471f6dd", "message": "Make distinction: SszType [de]serializes backing tree, ViewType [de]serializes views", "committedDate": "2021-01-29T12:12:55Z", "type": "commit"}, {"oid": "a27f6dc22ed39bf819f6efc4287764b8d69161ef", "url": "https://github.com/ConsenSys/teku/commit/a27f6dc22ed39bf819f6efc4287764b8d69161ef", "message": "Too many caps: rename SSZType -> SszType", "committedDate": "2021-01-29T12:13:50Z", "type": "commit"}, {"oid": "08ea79971513ce9cc1232037d7c1b7868067f8f3", "url": "https://github.com/ConsenSys/teku/commit/08ea79971513ce9cc1232037d7c1b7868067f8f3", "message": "Deprecate SimpleOffsetSerializable", "committedDate": "2021-01-29T12:16:25Z", "type": "commit"}, {"oid": "e9ffeb60eada3bf4c76726c6c208c7c831760629", "url": "https://github.com/ConsenSys/teku/commit/e9ffeb60eada3bf4c76726c6c208c7c831760629", "message": "Add Container named types", "committedDate": "2021-01-29T14:35:19Z", "type": "commit"}, {"oid": "0ee8fc17e0c2d2e080dcda0fed165d2abc1d93fd", "url": "https://github.com/ConsenSys/teku/commit/0ee8fc17e0c2d2e080dcda0fed165d2abc1d93fd", "message": "Add ContainerView toString() based on name types", "committedDate": "2021-01-29T14:35:43Z", "type": "commit"}, {"oid": "a03aa18f64d18a41ed5779513eabd33809fba297", "url": "https://github.com/ConsenSys/teku/commit/a03aa18f64d18a41ed5779513eabd33809fba297", "message": "Add types toString()", "committedDate": "2021-01-29T14:35:46Z", "type": "commit"}, {"oid": "cfff007c0c3bb986c734e6c166860b840ba34c45", "url": "https://github.com/ConsenSys/teku/commit/cfff007c0c3bb986c734e6c166860b840ba34c45", "message": "Spotless", "committedDate": "2021-01-29T14:35:50Z", "type": "commit"}, {"oid": "2db1e2114a197c4f2be649b0f0f5f2c5c36bf6a8", "url": "https://github.com/ConsenSys/teku/commit/2db1e2114a197c4f2be649b0f0f5f2c5c36bf6a8", "message": "Generate ContainerTypeN constructors with NamedType's", "committedDate": "2021-01-29T14:35:53Z", "type": "commit"}, {"oid": "45d7c89512afd0d605df195639e556d92f62cc65", "url": "https://github.com/ConsenSys/teku/commit/45d7c89512afd0d605df195639e556d92f62cc65", "message": "Named types for some structures", "committedDate": "2021-01-29T14:35:57Z", "type": "commit"}, {"oid": "1d84f49ba38a30df757912d2f8e64762a8d9b0e6", "url": "https://github.com/ConsenSys/teku/commit/1d84f49ba38a30df757912d2f8e64762a8d9b0e6", "message": "Migrate some more containers to namedType", "committedDate": "2021-01-29T14:57:35Z", "type": "commit"}, {"oid": "2c181e02e66700a43220edd8074202a16c320b49", "url": "https://github.com/ConsenSys/teku/commit/2c181e02e66700a43220edd8074202a16c320b49", "message": "Migrate some more containers to namedType", "committedDate": "2021-01-29T15:15:05Z", "type": "commit"}, {"oid": "19d6ef0a6ae70709999af97b8caa6f514c5f0061", "url": "https://github.com/ConsenSys/teku/commit/19d6ef0a6ae70709999af97b8caa6f514c5f0061", "message": "Move BeaconBlockBodyLists to testFixtures", "committedDate": "2021-01-29T15:15:49Z", "type": "commit"}, {"oid": "1a5c679a2603964346fd4ecea6b760ec0f7715a0", "url": "https://github.com/ConsenSys/teku/commit/1a5c679a2603964346fd4ecea6b760ec0f7715a0", "message": "Migrate the rest of containers to namedType", "committedDate": "2021-02-01T12:11:19Z", "type": "commit"}, {"oid": "0aa17177b3159d481d4ff5ea6e870acdc4a37666", "url": "https://github.com/ConsenSys/teku/commit/0aa17177b3159d481d4ff5ea6e870acdc4a37666", "message": "Fix the container generator issue", "committedDate": "2021-02-01T12:20:24Z", "type": "commit"}, {"oid": "bc7759527206c4e059bb0d77ddd2ef37ab891aeb", "url": "https://github.com/ConsenSys/teku/commit/bc7759527206c4e059bb0d77ddd2ef37ab891aeb", "message": "Merge branch 'master' into feature/remove-old-ssz", "committedDate": "2021-02-01T12:38:07Z", "type": "commit"}, {"oid": "5df17b31e3ead5b3c7ef21b1f977ae00536f12be", "url": "https://github.com/ConsenSys/teku/commit/5df17b31e3ead5b3c7ef21b1f977ae00536f12be", "message": "Merge remote-tracking branch 'ConsenSys/master' into feature/remove-old-ssz", "committedDate": "2021-02-02T14:14:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEwOTMzMg==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569109332", "bodyText": "Am I right in thinking that we now get the toString automatically from one of the super types?", "author": "ajsutton", "createdAt": "2021-02-03T03:37:49Z", "path": "ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/blocks/BeaconBlock.java", "diffHunk": "@@ -177,34 +158,11 @@ public Bytes32 getRoot() {\n \n   @Override\n   public Bytes32 hash_tree_root() {\n-    return hashTreeRoot.get();\n+    return hashTreeRoot();\n   }\n \n   @Override\n   public Optional<BeaconBlock> getBeaconBlock() {\n     return Optional.of(this);\n   }\n-\n-  public Bytes32 calculateRoot() {\n-    return HashTreeUtil.merkleize(\n-        Arrays.asList(\n-            HashTreeUtil.hash_tree_root(SSZTypes.BASIC, SSZ.encodeUInt64(slot.longValue())),\n-            HashTreeUtil.hash_tree_root(\n-                SSZTypes.BASIC, SSZ.encodeUInt64(proposer_index.longValue())),\n-            HashTreeUtil.hash_tree_root(SSZTypes.VECTOR_OF_BASIC, parent_root),\n-            HashTreeUtil.hash_tree_root(SSZTypes.VECTOR_OF_BASIC, state_root),\n-            body.hash_tree_root()));\n-  }\n-\n-  @Override\n-  public String toString() {", "originalCommit": "5df17b31e3ead5b3c7ef21b1f977ae00536f12be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTI2NjE2OA==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569266168", "bodyText": "Yep, here: https://github.com/Nashatyrev/artemis/blob/cfff007c0c3bb986c734e6c166860b840ba34c45/ssz/src/main/java/tech/pegasys/teku/ssz/backing/view/ContainerViewReadImpl.java#L78-L86", "author": "Nashatyrev", "createdAt": "2021-02-03T09:40:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEwOTMzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTExMjcyMA==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569112720", "bodyText": "Would be good to add a comment explaining what should be used instead now that this is deprecated. I am a little confused why people would need to specify a SszType and not just use this constructor (happened in another class as well).", "author": "ajsutton", "createdAt": "2021-02-03T03:49:29Z", "path": "ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/blocks/SignedBeaconBlock.java", "diffHunk": "@@ -13,88 +13,102 @@\n \n package tech.pegasys.teku.datastructures.blocks;\n \n-import com.google.common.base.MoreObjects;\n-import com.google.common.base.Suppliers;\n-import java.util.ArrayList;\n-import java.util.List;\n-import java.util.Objects;\n import java.util.Optional;\n-import java.util.function.Supplier;\n-import jdk.jfr.Label;\n-import org.apache.tuweni.bytes.Bytes;\n import org.apache.tuweni.bytes.Bytes32;\n import tech.pegasys.teku.bls.BLSSignature;\n-import tech.pegasys.teku.datastructures.util.HashTreeUtil;\n-import tech.pegasys.teku.datastructures.util.HashTreeUtil.SSZTypes;\n import tech.pegasys.teku.datastructures.util.Merkleizable;\n-import tech.pegasys.teku.datastructures.util.SimpleOffsetSerializer;\n+import tech.pegasys.teku.datastructures.util.SpecDependent;\n import tech.pegasys.teku.infrastructure.unsigned.UInt64;\n import tech.pegasys.teku.ssz.SSZTypes.SSZContainer;\n+import tech.pegasys.teku.ssz.backing.VectorViewRead;\n+import tech.pegasys.teku.ssz.backing.containers.Container2;\n+import tech.pegasys.teku.ssz.backing.containers.ContainerType2;\n+import tech.pegasys.teku.ssz.backing.tree.TreeNode;\n+import tech.pegasys.teku.ssz.backing.type.ComplexViewTypes;\n+import tech.pegasys.teku.ssz.backing.view.BasicViews.ByteView;\n+import tech.pegasys.teku.ssz.backing.view.ViewUtils;\n import tech.pegasys.teku.ssz.sos.SimpleOffsetSerializable;\n+import tech.pegasys.teku.ssz.sos.SszTypeDescriptor;\n \n public class SignedBeaconBlock\n+    extends Container2<SignedBeaconBlock, BeaconBlock, VectorViewRead<ByteView>>\n     implements BeaconBlockSummary, Merkleizable, SimpleOffsetSerializable, SSZContainer {\n \n-  private final BeaconBlock message;\n-  private final BLSSignature signature;\n+  public static class SignedBeaconBlockType\n+      extends ContainerType2<SignedBeaconBlock, BeaconBlock, VectorViewRead<ByteView>> {\n \n-  @Label(\"sos-ignore\")\n-  private final Supplier<Bytes32> hashTreeRoot = Suppliers.memoize(this::calculateRoot);\n+    public SignedBeaconBlockType() {\n+      super(\n+          \"SignedBeaconBlock\",\n+          namedType(\"message\", BeaconBlock.TYPE.get()),\n+          namedType(\"signature\", ComplexViewTypes.BYTES_96_TYPE));\n+    }\n \n-  public SignedBeaconBlock(final BeaconBlock message, final BLSSignature signature) {\n-    this.message = message;\n-    this.signature = signature;\n+    @Override\n+    public SignedBeaconBlock createFromBackingNode(TreeNode node) {\n+      return new SignedBeaconBlock(this, node);\n+    }\n   }\n \n-  public BeaconBlock getMessage() {\n-    return message;\n+  @SszTypeDescriptor\n+  public static SignedBeaconBlockType getSszType() {\n+    return TYPE.get();\n   }\n \n-  public BLSSignature getSignature() {\n-    return signature;\n+  public static final SpecDependent<SignedBeaconBlockType> TYPE =\n+      SpecDependent.of(SignedBeaconBlockType::new);\n+\n+  private BLSSignature signatureCache;\n+\n+  private SignedBeaconBlock(SignedBeaconBlockType type, TreeNode backingNode) {\n+    super(type, backingNode);\n   }\n \n-  @Override\n-  public int getSSZFieldCount() {\n-    return message.getSSZFieldCount() + signature.getSSZFieldCount();\n+  @Deprecated", "originalCommit": "5df17b31e3ead5b3c7ef21b1f977ae00536f12be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQ3ODg0OQ==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569478849", "bodyText": "Yes, good question!\nFrom on side: SignedBeaconBlockType depends on BeaconBlockType which depends on BeaconBlockBodyType which in turn depends on Spec. SignedBeaconBlock instance should be bounded to its type on construction and we should basically derive SignedBeaconBlockType from the Spec and pass it to SignedBeaconBlock constructor. Else we are ending up using a static SignedBeaconBlockType instance which we are trying to eliminate.\nFrom the other side: we have a BeaconBlock and may get it's type and create SignedBeaconBlockType dynamically. However ViewType classes were originally designed to be more or less long living since they could be expensive in construction and memory heavy. So per-instance type construction could yield perf/memory issues.\nI didn't found any fast an elegant solution for this. One idea was to add a reference from ViewType to Spec (as soon as a type could be Spec-dependent). In that case we could derive the type. But I would suggest to address this in further Spec work", "author": "Nashatyrev", "createdAt": "2021-02-03T14:53:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTExMjcyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTgxOTkwMg==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569819902", "bodyText": "Ok makes sense.", "author": "ajsutton", "createdAt": "2021-02-03T23:17:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTExMjcyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEyNzU3Mg==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569127572", "bodyText": "Note that block by root requests aren't actually encoded as an SSZ list - they just concatenate the block roots. We have BeaconBlocksByRootRequestMessageEncoder to handle this and never actually SSZ encode or decode them.  They only implemented SSZContainer to make the type system happy originally (and it looks like that's not actually required anymore).", "author": "ajsutton", "createdAt": "2021-02-03T04:43:27Z", "path": "ethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/networking/libp2p/rpc/BeaconBlocksByRootRequestMessage.java", "diffHunk": "@@ -17,55 +17,66 @@\n \n import com.google.common.base.MoreObjects;\n import java.util.List;\n-import java.util.Objects;\n import org.apache.tuweni.bytes.Bytes32;\n import tech.pegasys.teku.ssz.SSZTypes.SSZContainer;\n-import tech.pegasys.teku.ssz.SSZTypes.SSZList;\n-import tech.pegasys.teku.ssz.SSZTypes.SSZMutableList;\n+import tech.pegasys.teku.ssz.backing.ListViewRead;\n+import tech.pegasys.teku.ssz.backing.containers.Container1;\n+import tech.pegasys.teku.ssz.backing.containers.ContainerType1;\n+import tech.pegasys.teku.ssz.backing.tree.TreeNode;\n+import tech.pegasys.teku.ssz.backing.type.BasicViewTypes;\n+import tech.pegasys.teku.ssz.backing.type.ListViewType;\n+import tech.pegasys.teku.ssz.backing.view.BasicViews.Bytes32View;\n+import tech.pegasys.teku.ssz.backing.view.ViewUtils;\n+import tech.pegasys.teku.ssz.sos.SszTypeDescriptor;\n \n-public class BeaconBlocksByRootRequestMessage implements RpcRequest, SSZContainer {\n+public class BeaconBlocksByRootRequestMessage\n+    extends Container1<BeaconBlocksByRootRequestMessage, ListViewRead<Bytes32View>>\n+    implements RpcRequest, SSZContainer {\n \n-  private final SSZMutableList<Bytes32> blockRoots =\n-      SSZList.createMutable(Bytes32.class, MAX_REQUEST_BLOCKS);\n+  public static class BeaconBlocksByRootRequestMessageType\n+      extends ContainerType1<BeaconBlocksByRootRequestMessage, ListViewRead<Bytes32View>> {\n \n-  public BeaconBlocksByRootRequestMessage(final List<Bytes32> blockRoots) {\n-    this.blockRoots.addAll(blockRoots);\n-  }\n+    public BeaconBlocksByRootRequestMessageType() {\n+      super(\n+          \"BeaconBlocksByRootRequestMessage\",\n+          namedType(\n+              \"blockRoots\", new ListViewType<>(BasicViewTypes.BYTES32_TYPE, MAX_REQUEST_BLOCKS)));\n+    }", "originalCommit": "5df17b31e3ead5b3c7ef21b1f977ae00536f12be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTI3MTYxMg==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569271612", "bodyText": "Yep, I also missed that case during refactoring, but it was caught here: LengthPrefixedEncodingTest.encodePayload_shouldEncodeBlocksByRootRequest() .\nFixed with this commit: 076c75c", "author": "Nashatyrev", "createdAt": "2021-02-03T09:48:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEyNzU3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTM1NzU1Nw==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569357557", "bodyText": "They only implemented SSZContainer to make the type system happy originally (and it looks like that's not actually required anymore).\n\nYeah, right. We may now do this in a bit more canonical manner: 20e6eb6", "author": "Nashatyrev", "createdAt": "2021-02-03T12:01:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEyNzU3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTQ0Njc0OA==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569446748", "bodyText": "That reminds me to check that on deserialization we are failing fast without reading the whole list when ssz is too long for that list.\nFixed some cases and added a test here: 3a298b8", "author": "Nashatyrev", "createdAt": "2021-02-03T14:16:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEyNzU3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEzMDM2NQ==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569130365", "bodyText": "I don't think this is right as it will wind up serialising as a list rather than a vector.  Could be missing something though.", "author": "ajsutton", "createdAt": "2021-02-03T04:53:06Z", "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/rpc/core/encodings/ssz/BeaconBlocksByRootRequestMessageEncoder.java", "diffHunk": "@@ -38,7 +37,7 @@\n \n   @Override\n   public Bytes encode(final BeaconBlocksByRootRequestMessage message) {\n-    return SSZ.encode(writer -> writer.writeFixedBytesVector(message.getBlockRoots().asList()));\n+    return message.getBlockRoots().sszSerialize();", "originalCommit": "5df17b31e3ead5b3c7ef21b1f977ae00536f12be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTI3NzY5MQ==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569277691", "bodyText": "List and Vector are serialized identically.\nBTW, if I'm not missing anything there was an old SSZ spec version when a List was prepended by its length in SSZ", "author": "Nashatyrev", "createdAt": "2021-02-03T09:56:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEzMDM2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTMzOTQ2MA==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569339460", "bodyText": "BTW spec defines it as List[Root, MAX_REQUEST_BLOCKS] so it's officially a List :)", "author": "Nashatyrev", "createdAt": "2021-02-03T11:30:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEzMDM2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTgyMjgzOQ==", "url": "https://github.com/ConsenSys/teku/pull/3426#discussion_r569822839", "bodyText": "hmm, wonder why I could never get it to work before then...  Anyway, confirmed it is producing a concatenated list of block roots like we need so all good.", "author": "ajsutton", "createdAt": "2021-02-03T23:24:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTEzMDM2NQ=="}], "type": "inlineReview"}, {"oid": "d351b78639a1213cd29d1831d8729bf9d0f10edd", "url": "https://github.com/ConsenSys/teku/commit/d351b78639a1213cd29d1831d8729bf9d0f10edd", "message": "Add List/VectorViewRead.toString()", "committedDate": "2021-02-03T11:49:25Z", "type": "commit"}, {"oid": "20e6eb639df0bee838f3fd9c53bcf60a9a5842de", "url": "https://github.com/ConsenSys/teku/commit/20e6eb639df0bee838f3fd9c53bcf60a9a5842de", "message": "Refactor BeaconBlocksByRootRequestMessage in a more canonical SSZ fashion: make it SSZ List as per spec instead of SSZ container", "committedDate": "2021-02-03T11:53:00Z", "type": "commit"}, {"oid": "a37f49e539fb8ce5233935b045b243ebc3a20364", "url": "https://github.com/ConsenSys/teku/commit/a37f49e539fb8ce5233935b045b243ebc3a20364", "message": "Fix warn", "committedDate": "2021-02-03T11:58:02Z", "type": "commit"}, {"oid": "3a298b8cfbdb12a9fc3bfad0ffab04d1778d48f8", "url": "https://github.com/ConsenSys/teku/commit/3a298b8cfbdb12a9fc3bfad0ffab04d1778d48f8", "message": "Fail fast if ssz exceeds maximum bounds for Lists and Vectors. Add test for this", "committedDate": "2021-02-03T14:01:02Z", "type": "commit"}, {"oid": "b1d8018e7811af58b8849fe2e16f8e5afccc3e73", "url": "https://github.com/ConsenSys/teku/commit/b1d8018e7811af58b8849fe2e16f8e5afccc3e73", "message": "Merge branch 'master' into feature/remove-old-ssz", "committedDate": "2021-02-04T08:29:14Z", "type": "commit"}, {"oid": "4f5f8193416b7d8a976e6d7a0968dfceb4f378c6", "url": "https://github.com/ConsenSys/teku/commit/4f5f8193416b7d8a976e6d7a0968dfceb4f378c6", "message": "Generify ViewType, draft", "committedDate": "2020-12-28T16:36:38Z", "type": "commit"}, {"oid": "01cae46a6d1b2599b2481bb32454a531c71cf108", "url": "https://github.com/ConsenSys/teku/commit/01cae46a6d1b2599b2481bb32454a531c71cf108", "message": "Avoid generify element ViewType in CollectionViewType", "committedDate": "2020-12-28T16:59:51Z", "type": "commit"}, {"oid": "3e765d620de7191e0c6ca08c9da1cf4c8b86a280", "url": "https://github.com/ConsenSys/teku/commit/3e765d620de7191e0c6ca08c9da1cf4c8b86a280", "message": "Fix ViewType raw usages (assembles)", "committedDate": "2020-12-29T10:14:50Z", "type": "commit"}, {"oid": "adcc503a13cc221792bf269ccdf4e7b97aa9007d", "url": "https://github.com/ConsenSys/teku/commit/adcc503a13cc221792bf269ccdf4e7b97aa9007d", "message": "Replace ContainerViewType constructor with factory method", "committedDate": "2020-12-29T10:26:33Z", "type": "commit"}, {"oid": "d1b4ad688ce1786972b8bd35d50a04e837469823", "url": "https://github.com/ConsenSys/teku/commit/d1b4ad688ce1786972b8bd35d50a04e837469823", "message": "Add type-safe container generated classes. Add generator", "committedDate": "2020-12-29T14:27:57Z", "type": "commit"}, {"oid": "0577ab5a657f9849f275a1e8d34aa95e88d6b74c", "url": "https://github.com/ConsenSys/teku/commit/0577ab5a657f9849f275a1e8d34aa95e88d6b74c", "message": "Migrate Checkpoint and AttestationData classes to type-safe containers", "committedDate": "2020-12-29T14:29:18Z", "type": "commit"}, {"oid": "a1522731cae9d9673623509fff59f39bc6875932", "url": "https://github.com/ConsenSys/teku/commit/a1522731cae9d9673623509fff59f39bc6875932", "message": "Return back the SSZContainer marker interface for now", "committedDate": "2020-12-29T15:00:31Z", "type": "commit"}, {"oid": "d99529a7ed9d7d78b1ef55313072dcf0e546e58f", "url": "https://github.com/ConsenSys/teku/commit/d99529a7ed9d7d78b1ef55313072dcf0e546e58f", "message": "Add ViewType.getLengthBounds() method", "committedDate": "2020-12-29T15:53:05Z", "type": "commit"}, {"oid": "d6ee091773052ddb86afe8f786c9e8a448653f8e", "url": "https://github.com/ConsenSys/teku/commit/d6ee091773052ddb86afe8f786c9e8a448653f8e", "message": "Make Fork class pure backing View based", "committedDate": "2020-12-29T16:19:37Z", "type": "commit"}, {"oid": "23628f32f1825aafa7d83f5a8b20d41367d51490", "url": "https://github.com/ConsenSys/teku/commit/23628f32f1825aafa7d83f5a8b20d41367d51490", "message": "Spotless", "committedDate": "2020-12-29T16:19:54Z", "type": "commit"}, {"oid": "79bb7227ca6c9d1f744185d953e3ad617f649358", "url": "https://github.com/ConsenSys/teku/commit/79bb7227ca6c9d1f744185d953e3ad617f649358", "message": "Fix compile error", "committedDate": "2020-12-29T16:27:55Z", "type": "commit"}, {"oid": "fef26456e3a0dd7ebea79cbf1f5e8c18bb807ecc", "url": "https://github.com/ConsenSys/teku/commit/fef26456e3a0dd7ebea79cbf1f5e8c18bb807ecc", "message": "Adopt Validator", "committedDate": "2020-12-29T16:28:29Z", "type": "commit"}, {"oid": "fd5d42ff21df228c2868b79e6d0d32aca39ae3a7", "url": "https://github.com/ConsenSys/teku/commit/fd5d42ff21df228c2868b79e6d0d32aca39ae3a7", "message": "Adopt Validator, PendingAttestation", "committedDate": "2020-12-29T16:50:21Z", "type": "commit"}, {"oid": "6711d4d57806ec191c82d8bacb6675f9f194179d", "url": "https://github.com/ConsenSys/teku/commit/6711d4d57806ec191c82d8bacb6675f9f194179d", "message": "Move ContainersGenerator to a separate module. Add a gradle task to generate containers", "committedDate": "2021-01-11T19:33:11Z", "type": "commit"}, {"oid": "f722775a00027f13160e1ee5233c59e2bec0b09b", "url": "https://github.com/ConsenSys/teku/commit/f722775a00027f13160e1ee5233c59e2bec0b09b", "message": "Remove obsolete comment", "committedDate": "2021-01-11T20:00:33Z", "type": "commit"}, {"oid": "257cd7754cad6b28a8a55169a156c21d2347c475", "url": "https://github.com/ConsenSys/teku/commit/257cd7754cad6b28a8a55169a156c21d2347c475", "message": "Add the test checking that generated source files were not manually modified", "committedDate": "2021-01-12T16:43:15Z", "type": "commit"}, {"oid": "9158cf3ebbbe28bc8c33dd26dac4a88768ccb155", "url": "https://github.com/ConsenSys/teku/commit/9158cf3ebbbe28bc8c33dd26dac4a88768ccb155", "message": "Merge remote-tracking branch 'ConsenSys/master' into feature/generify-viewtype-simpler-2", "committedDate": "2021-01-12T16:58:11Z", "type": "commit"}, {"oid": "b14f22de219529171dc890b2a6db30737e9bec25", "url": "https://github.com/ConsenSys/teku/commit/b14f22de219529171dc890b2a6db30737e9bec25", "message": "Merge branch 'feature/generify-viewtype-simpler-2' into feature/remove-old-ssz", "committedDate": "2021-01-18T13:56:38Z", "type": "commit"}, {"oid": "32e6ba4527b3149160c156772b18c481d68f0f3d", "url": "https://github.com/ConsenSys/teku/commit/32e6ba4527b3149160c156772b18c481d68f0f3d", "message": "Merge remote-tracking branch 'ConsenSys/master' into feature/remove-old-ssz\n\n# Conflicts:\n#\tethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/state/Fork.java\n#\tethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/state/PendingAttestation.java\n#\tethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/state/Validator.java\n#\tssz/src/test/java/tech/pegasys/teku/ssz/backing/CompositeListViewTest.java", "committedDate": "2021-01-18T13:58:52Z", "type": "commit"}, {"oid": "6943bfce9b356db47884319b1433023929324c81", "url": "https://github.com/ConsenSys/teku/commit/6943bfce9b356db47884319b1433023929324c81", "message": "Spotless", "committedDate": "2021-01-18T14:10:54Z", "type": "commit"}, {"oid": "a715630c4c5cce5eb449880e4be64f1578665a24", "url": "https://github.com/ConsenSys/teku/commit/a715630c4c5cce5eb449880e4be64f1578665a24", "message": "Add benchmark drafts", "committedDate": "2021-01-19T11:51:42Z", "type": "commit"}, {"oid": "c4bb1c53698bc37915d32e7f114f60fee04193e6", "url": "https://github.com/ConsenSys/teku/commit/c4bb1c53698bc37915d32e7f114f60fee04193e6", "message": "Some BeaconBlock members refactored (draft)", "committedDate": "2021-01-19T11:52:31Z", "type": "commit"}, {"oid": "b178b6ddbc46e66e973c23a1fea5c84cf31d2bb5", "url": "https://github.com/ConsenSys/teku/commit/b178b6ddbc46e66e973c23a1fea5c84cf31d2bb5", "message": "Make Bitlist immutable", "committedDate": "2021-01-19T14:36:01Z", "type": "commit"}, {"oid": "e9d318910b485fcd1375925adae59c0c1bbcea7c", "url": "https://github.com/ConsenSys/teku/commit/e9d318910b485fcd1375925adae59c0c1bbcea7c", "message": "Make Attestation and IndexedAttestation immutable", "committedDate": "2021-01-19T14:36:09Z", "type": "commit"}, {"oid": "a5eee27d752c9687ce0100fafdd4b6ad03d67a23", "url": "https://github.com/ConsenSys/teku/commit/a5eee27d752c9687ce0100fafdd4b6ad03d67a23", "message": "Fix Bitlist.or()", "committedDate": "2021-01-19T15:18:11Z", "type": "commit"}, {"oid": "3de89804d02635bc07cf76f872cff7d1b9d92658", "url": "https://github.com/ConsenSys/teku/commit/3de89804d02635bc07cf76f872cff7d1b9d92658", "message": "Fix error in DefaultPerformanceTracker. Use merge() instead of compute()", "committedDate": "2021-01-19T16:00:32Z", "type": "commit"}, {"oid": "4fcad0970eea3e5814a60ee93cc43279040b54e3", "url": "https://github.com/ConsenSys/teku/commit/4fcad0970eea3e5814a60ee93cc43279040b54e3", "message": "Make Bitvector immutable", "committedDate": "2021-01-19T16:14:04Z", "type": "commit"}, {"oid": "d61823c9048c0208a5066f7618f1d2bc0bf72fba", "url": "https://github.com/ConsenSys/teku/commit/d61823c9048c0208a5066f7618f1d2bc0bf72fba", "message": "Merge branch 'feature/immutable-bitlist-bitvector' into feature/remove-old-ssz\n\n# Conflicts:\n#\tethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/operations/Attestation.java\n#\tethereum/datastructures/src/main/java/tech/pegasys/teku/datastructures/operations/IndexedAttestation.java\n#\tssz/src/main/java/tech/pegasys/teku/ssz/backing/view/ViewUtils.java", "committedDate": "2021-01-20T09:59:52Z", "type": "commit"}, {"oid": "5805576512d431fe3c1fe06da9d4500a5f2cbcde", "url": "https://github.com/ConsenSys/teku/commit/5805576512d431fe3c1fe06da9d4500a5f2cbcde", "message": "Refactor BeaconBlockBody and all child containers", "committedDate": "2021-01-20T15:59:17Z", "type": "commit"}, {"oid": "927c15944901193aebc3ecacb840d00576528cf6", "url": "https://github.com/ConsenSys/teku/commit/927c15944901193aebc3ecacb840d00576528cf6", "message": "Spotless", "committedDate": "2021-01-20T16:03:03Z", "type": "commit"}, {"oid": "d0616ef394c290b5645ea9cdf285a738dec84e19", "url": "https://github.com/ConsenSys/teku/commit/d0616ef394c290b5645ea9cdf285a738dec84e19", "message": "Adopt more containers", "committedDate": "2021-01-20T17:29:58Z", "type": "commit"}, {"oid": "834115195cb248d7b7d2f579b3630f4e086e73f9", "url": "https://github.com/ConsenSys/teku/commit/834115195cb248d7b7d2f579b3630f4e086e73f9", "message": "Fix Attestation field getter", "committedDate": "2021-01-20T17:53:38Z", "type": "commit"}, {"oid": "671638cafaead788ca3c8a22cf684112bcb3dd50", "url": "https://github.com/ConsenSys/teku/commit/671638cafaead788ca3c8a22cf684112bcb3dd50", "message": "Fix error in SSZ size calculation", "committedDate": "2021-01-20T17:53:53Z", "type": "commit"}, {"oid": "6ef6d469c1a3fdaf0435d07371b4aef905b53cb0", "url": "https://github.com/ConsenSys/teku/commit/6ef6d469c1a3fdaf0435d07371b4aef905b53cb0", "message": "Add missed annotation", "committedDate": "2021-01-20T18:09:39Z", "type": "commit"}, {"oid": "9594742436fd10207c670b66d5b9cda30f7f92d8", "url": "https://github.com/ConsenSys/teku/commit/9594742436fd10207c670b66d5b9cda30f7f92d8", "message": "Fix the type", "committedDate": "2021-01-20T18:09:53Z", "type": "commit"}, {"oid": "ac199a904d76911ea9914798e87acdb700cb5f03", "url": "https://github.com/ConsenSys/teku/commit/ac199a904d76911ea9914798e87acdb700cb5f03", "message": "Fix the test", "committedDate": "2021-01-20T18:10:05Z", "type": "commit"}, {"oid": "c3c431b34e264466c06484d6b862d21d4403ebcc", "url": "https://github.com/ConsenSys/teku/commit/c3c431b34e264466c06484d6b862d21d4403ebcc", "message": "Temporarily tweak SimpleOffsetSerializer.getLengthBounds to refer to ViewType when available", "committedDate": "2021-01-21T15:15:50Z", "type": "commit"}, {"oid": "ffa2b75d3bea1f8547bf09caa3c88384e6ec17c9", "url": "https://github.com/ConsenSys/teku/commit/ffa2b75d3bea1f8547bf09caa3c88384e6ec17c9", "message": "Fix SszLengthBounds calculation", "committedDate": "2021-01-21T16:33:29Z", "type": "commit"}, {"oid": "fafd771da5c18d9aa90c49a4b6cf0bfa8289c8e7", "url": "https://github.com/ConsenSys/teku/commit/fafd771da5c18d9aa90c49a4b6cf0bfa8289c8e7", "message": "Adjust SszLengthBounds.toString", "committedDate": "2021-01-21T17:02:50Z", "type": "commit"}, {"oid": "7e9aba8b453f1c807dd97c8c633745c32eb1d035", "url": "https://github.com/ConsenSys/teku/commit/7e9aba8b453f1c807dd97c8c633745c32eb1d035", "message": "Add more type safety", "committedDate": "2021-01-21T17:09:25Z", "type": "commit"}, {"oid": "7b55f716c8b0118fabccbc499788c8fc725dafb0", "url": "https://github.com/ConsenSys/teku/commit/7b55f716c8b0118fabccbc499788c8fc725dafb0", "message": "Fix another SszLengthBounds calculation", "committedDate": "2021-01-21T17:41:26Z", "type": "commit"}, {"oid": "c9eb1e0ccf009a847ec1a5058e25bc3b34d80ec8", "url": "https://github.com/ConsenSys/teku/commit/c9eb1e0ccf009a847ec1a5058e25bc3b34d80ec8", "message": "Fix some refactored containers", "committedDate": "2021-01-21T18:04:17Z", "type": "commit"}, {"oid": "a0701f822947b2f9e78d02ebb332526adcbfb401", "url": "https://github.com/ConsenSys/teku/commit/a0701f822947b2f9e78d02ebb332526adcbfb401", "message": "Fix the tests checking container vector lengths", "committedDate": "2021-01-21T18:17:21Z", "type": "commit"}, {"oid": "d25a01dbdf5958076bd51b51a5f73fa6b591c18c", "url": "https://github.com/ConsenSys/teku/commit/d25a01dbdf5958076bd51b51a5f73fa6b591c18c", "message": "Adjust IsVariableTest", "committedDate": "2021-01-21T18:29:43Z", "type": "commit"}, {"oid": "1d7b394201b8eb61ea548bf7f94547c08c4d2f1e", "url": "https://github.com/ConsenSys/teku/commit/1d7b394201b8eb61ea548bf7f94547c08c4d2f1e", "message": "Spotless", "committedDate": "2021-01-21T18:31:44Z", "type": "commit"}, {"oid": "e476de3eb2474fe6e26faf52ea799ef7cd59eba6", "url": "https://github.com/ConsenSys/teku/commit/e476de3eb2474fe6e26faf52ea799ef7cd59eba6", "message": "Add a tweak to pass the test. Container TYPE is now created statically so it doesn't reflect subsequent Constants modifications", "committedDate": "2021-01-22T08:08:50Z", "type": "commit"}, {"oid": "3a52ca4bd62da9f291f7bdc2fde8a8502ce4821d", "url": "https://github.com/ConsenSys/teku/commit/3a52ca4bd62da9f291f7bdc2fde8a8502ce4821d", "message": "Remove legacy SSZ stuff from containers", "committedDate": "2021-01-22T08:27:29Z", "type": "commit"}, {"oid": "c75bebe099ae4918ac575eee8cbcd6b2da84b4a6", "url": "https://github.com/ConsenSys/teku/commit/c75bebe099ae4918ac575eee8cbcd6b2da84b4a6", "message": "Optimize ViewUtils.createVectorFromBytes/getAllBytes", "committedDate": "2021-01-22T10:02:51Z", "type": "commit"}, {"oid": "f1a32f2c686a7165280143db7c7d8b12d2d1d70d", "url": "https://github.com/ConsenSys/teku/commit/f1a32f2c686a7165280143db7c7d8b12d2d1d70d", "message": "Minor optimization for ContainerViewType. Make all fields final", "committedDate": "2021-01-22T10:50:51Z", "type": "commit"}, {"oid": "ac371c606284f971155e012a145a0830a2d3bfd2", "url": "https://github.com/ConsenSys/teku/commit/ac371c606284f971155e012a145a0830a2d3bfd2", "message": "Regular loops are still far better than streams for performance critical code", "committedDate": "2021-01-22T10:52:02Z", "type": "commit"}, {"oid": "fd99ce11a27b12d0a42d32799e3b9b91621a86ab", "url": "https://github.com/ConsenSys/teku/commit/fd99ce11a27b12d0a42d32799e3b9b91621a86ab", "message": "Remove unnecessary type arguments", "committedDate": "2021-01-22T11:48:50Z", "type": "commit"}, {"oid": "0b21f1d138077281a83af890d18090aa40eff156", "url": "https://github.com/ConsenSys/teku/commit/0b21f1d138077281a83af890d18090aa40eff156", "message": "Speedup Bitlist.fromSszBytes near 10x", "committedDate": "2021-01-22T12:54:24Z", "type": "commit"}, {"oid": "2f5a0cf3f7b636f6afd54d438a07e60d41d88147", "url": "https://github.com/ConsenSys/teku/commit/2f5a0cf3f7b636f6afd54d438a07e60d41d88147", "message": "Remove unnecessary type arguments", "committedDate": "2021-01-22T13:43:23Z", "type": "commit"}, {"oid": "b385ab909d6a85fe4e980987854c9d60e65c56bd", "url": "https://github.com/ConsenSys/teku/commit/b385ab909d6a85fe4e980987854c9d60e65c56bd", "message": "Avoid creating per-view type instances: internal list container type is now created once inside ListViewType", "committedDate": "2021-01-22T14:14:45Z", "type": "commit"}, {"oid": "60d10e1c5cd9c45e364ad35b87d2215e660e5fa0", "url": "https://github.com/ConsenSys/teku/commit/60d10e1c5cd9c45e364ad35b87d2215e660e5fa0", "message": "Add specialized caches to containers with Bitlist, PublicKey and Signature fields", "committedDate": "2021-01-22T14:35:47Z", "type": "commit"}, {"oid": "be27f8acd3c2723954356193bbe95cb56261bd80", "url": "https://github.com/ConsenSys/teku/commit/be27f8acd3c2723954356193bbe95cb56261bd80", "message": "Add SszWriter interface instead of Consumer<Bytes>. Add SszByteArrayWriter. Optimize Bilist serialization", "committedDate": "2021-01-25T12:30:14Z", "type": "commit"}, {"oid": "cf37ab419d3474935c69f55d15c9e43675b933f5", "url": "https://github.com/ConsenSys/teku/commit/cf37ab419d3474935c69f55d15c9e43675b933f5", "message": "Optimize Container deserialization", "committedDate": "2021-01-25T14:47:48Z", "type": "commit"}, {"oid": "032d4dab5095ec704d543a1396aa203e62c27715", "url": "https://github.com/ConsenSys/teku/commit/032d4dab5095ec704d543a1396aa203e62c27715", "message": "Minor optimization of BasicViewType.createFromBackingNode", "committedDate": "2021-01-25T15:40:36Z", "type": "commit"}, {"oid": "392dc9063f6ed1da0bf4428ea96e82195ac7d159", "url": "https://github.com/ConsenSys/teku/commit/392dc9063f6ed1da0bf4428ea96e82195ac7d159", "message": "Update benchmarks", "committedDate": "2021-01-25T15:40:55Z", "type": "commit"}, {"oid": "b9151a06c024f01950991ab67db013e2e2c87b49", "url": "https://github.com/ConsenSys/teku/commit/b9151a06c024f01950991ab67db013e2e2c87b49", "message": "Make the field final", "committedDate": "2021-01-25T15:48:54Z", "type": "commit"}, {"oid": "db77bf4bfe87464c1d48034370b83aa6c87428cc", "url": "https://github.com/ConsenSys/teku/commit/db77bf4bfe87464c1d48034370b83aa6c87428cc", "message": "Optimize Bitlist -> ListView creation", "committedDate": "2021-01-25T16:39:39Z", "type": "commit"}, {"oid": "a9954c82e3d6bd86d747b861e34aabbe35a39e2e", "url": "https://github.com/ConsenSys/teku/commit/a9954c82e3d6bd86d747b861e34aabbe35a39e2e", "message": "Fix missing local signature cache for SignedBeaconBlockHeader", "committedDate": "2021-01-25T16:44:54Z", "type": "commit"}, {"oid": "fc47257152df22bfeec04f4e9fd1d032a579ab02", "url": "https://github.com/ConsenSys/teku/commit/fc47257152df22bfeec04f4e9fd1d032a579ab02", "message": "Adjust jmh benchmarks", "committedDate": "2021-01-25T17:56:12Z", "type": "commit"}, {"oid": "25b57f469cb494ba807d86d0c92cf04e7d32b05e", "url": "https://github.com/ConsenSys/teku/commit/25b57f469cb494ba807d86d0c92cf04e7d32b05e", "message": "Fix compiler warn", "committedDate": "2021-01-25T17:59:06Z", "type": "commit"}, {"oid": "13bbb4d719f178151e1bd54209d5434b154243d4", "url": "https://github.com/ConsenSys/teku/commit/13bbb4d719f178151e1bd54209d5434b154243d4", "message": "Fix running JMH benchmarks from JAR file", "committedDate": "2021-01-25T17:59:47Z", "type": "commit"}, {"oid": "92ecfc17c77ead64dd3145216e074a6fd03d9c6b", "url": "https://github.com/ConsenSys/teku/commit/92ecfc17c77ead64dd3145216e074a6fd03d9c6b", "message": "Spotless", "committedDate": "2021-01-25T18:06:21Z", "type": "commit"}, {"oid": "e05d136a5603c836d79c22585888e37afc4119bc", "url": "https://github.com/ConsenSys/teku/commit/e05d136a5603c836d79c22585888e37afc4119bc", "message": "Migrate more containers to new SSZ", "committedDate": "2021-01-26T09:57:00Z", "type": "commit"}, {"oid": "64516a41db5df90550df5bc13f96cfd815ea195e", "url": "https://github.com/ConsenSys/teku/commit/64516a41db5df90550df5bc13f96cfd815ea195e", "message": "Migrate more messages to new SSZ", "committedDate": "2021-01-26T11:30:36Z", "type": "commit"}, {"oid": "b6e8eb655d3fe6431dea44e1ad0ca780b377caaa", "url": "https://github.com/ConsenSys/teku/commit/b6e8eb655d3fe6431dea44e1ad0ca780b377caaa", "message": "Migrate Fuzz containers", "committedDate": "2021-01-26T12:18:25Z", "type": "commit"}, {"oid": "b7d5e9122ca9ceee90b5a5c78b33154c35251de7", "url": "https://github.com/ConsenSys/teku/commit/b7d5e9122ca9ceee90b5a5c78b33154c35251de7", "message": "Make VoteTracker immutable", "committedDate": "2021-01-26T12:19:00Z", "type": "commit"}, {"oid": "3ffcaafb249d67d0b37f333589411ec493edb331", "url": "https://github.com/ConsenSys/teku/commit/3ffcaafb249d67d0b37f333589411ec493edb331", "message": "Migrate VoteTracker", "committedDate": "2021-01-26T12:21:18Z", "type": "commit"}, {"oid": "191b97f5141c6080027623a4a99c6a20b4f30280", "url": "https://github.com/ConsenSys/teku/commit/191b97f5141c6080027623a4a99c6a20b4f30280", "message": "Spotless", "committedDate": "2021-01-26T12:27:27Z", "type": "commit"}, {"oid": "8cbbf34fcf445d5bcfe27b2ceab2e52700025759", "url": "https://github.com/ConsenSys/teku/commit/8cbbf34fcf445d5bcfe27b2ceab2e52700025759", "message": "Make List/VectorViewRead more usable with extending Iterable and adding stream() method", "committedDate": "2021-01-26T13:01:22Z", "type": "commit"}, {"oid": "2c630fe1930a76e5897896f90f8553b82731d3c0", "url": "https://github.com/ConsenSys/teku/commit/2c630fe1930a76e5897896f90f8553b82731d3c0", "message": "Fix GoodbyeMessage", "committedDate": "2021-01-26T13:02:23Z", "type": "commit"}, {"oid": "eecf71f32380a3a3a9a4bba9f4fd833c669d3357", "url": "https://github.com/ConsenSys/teku/commit/eecf71f32380a3a3a9a4bba9f4fd833c669d3357", "message": "Migrate BeaconBlocksByRootRequestMessage", "committedDate": "2021-01-26T13:02:53Z", "type": "commit"}, {"oid": "d5d803f24097ba015fd972f7cb423202ed0b69f7", "url": "https://github.com/ConsenSys/teku/commit/d5d803f24097ba015fd972f7cb423202ed0b69f7", "message": "Fix MetadataMessage static fields order", "committedDate": "2021-01-26T13:11:06Z", "type": "commit"}, {"oid": "13c3d09eda1953c55a8bd85630c1afa9406c8155", "url": "https://github.com/ConsenSys/teku/commit/13c3d09eda1953c55a8bd85630c1afa9406c8155", "message": "Fix failing tests", "committedDate": "2021-01-26T13:11:17Z", "type": "commit"}, {"oid": "ed29fe50230c19b6ae78ff2fba52ff6864e0e47d", "url": "https://github.com/ConsenSys/teku/commit/ed29fe50230c19b6ae78ff2fba52ff6864e0e47d", "message": "Spotless", "committedDate": "2021-01-26T13:27:29Z", "type": "commit"}, {"oid": "c3756beee07cf833e8249c11a7e83d604550d44c", "url": "https://github.com/ConsenSys/teku/commit/c3756beee07cf833e8249c11a7e83d604550d44c", "message": "Refactor older containers to use type-safe ContainerN classes", "committedDate": "2021-01-27T12:22:34Z", "type": "commit"}, {"oid": "57e54bf96aebbe37f9d7a05dc6ebdaaf11640fbb", "url": "https://github.com/ConsenSys/teku/commit/57e54bf96aebbe37f9d7a05dc6ebdaaf11640fbb", "message": "Use dedicated Ssz type classes for containers instead of 'anonymous' types", "committedDate": "2021-01-27T12:23:21Z", "type": "commit"}, {"oid": "0ef4bd857f3a0f9fc811b0121dff1b7dd04544e9", "url": "https://github.com/ConsenSys/teku/commit/0ef4bd857f3a0f9fc811b0121dff1b7dd04544e9", "message": "Fix ViewUtils.toVectorView() bug", "committedDate": "2021-01-27T12:42:36Z", "type": "commit"}, {"oid": "fc062ebca6343ee3892398491d8bef40e3d640ce", "url": "https://github.com/ConsenSys/teku/commit/fc062ebca6343ee3892398491d8bef40e3d640ce", "message": "Spotless", "committedDate": "2021-01-27T13:07:31Z", "type": "commit"}, {"oid": "076c75cd26b1c02f8f7d51f48264cb709690c875", "url": "https://github.com/ConsenSys/teku/commit/076c75cd26b1c02f8f7d51f48264cb709690c875", "message": "Fix BeaconBlocksByRootRequestMessageEncoder.encode(): need to serialize the list only without wrapping container", "committedDate": "2021-01-27T13:29:06Z", "type": "commit"}, {"oid": "a7877353c66f910ee1e794c822a24245b2b962ee", "url": "https://github.com/ConsenSys/teku/commit/a7877353c66f910ee1e794c822a24245b2b962ee", "message": "Fix exception type thrown from DefaultRpcPayloadEncoder.decode()", "committedDate": "2021-01-27T13:48:09Z", "type": "commit"}, {"oid": "92c0b18d3811a869003691add737227d6c55ade6", "url": "https://github.com/ConsenSys/teku/commit/92c0b18d3811a869003691add737227d6c55ade6", "message": "Use dedicated Ssz type classes for containers instead of 'anonymous' types", "committedDate": "2021-01-27T15:01:31Z", "type": "commit"}, {"oid": "14fbee6fa266915dc6fdd989cbf7e0ef29040726", "url": "https://github.com/ConsenSys/teku/commit/14fbee6fa266915dc6fdd989cbf7e0ef29040726", "message": "Use more laconic predefined types for ByteVector48/96", "committedDate": "2021-01-27T15:10:30Z", "type": "commit"}, {"oid": "8c033c8c9b3d5a7748e63569c07fc57d1d653d50", "url": "https://github.com/ConsenSys/teku/commit/8c033c8c9b3d5a7748e63569c07fc57d1d653d50", "message": "Use more laconic predefined types for Byte/Bit Vector/List", "committedDate": "2021-01-27T15:48:27Z", "type": "commit"}, {"oid": "2cc120523ee0dc792e9887c6498e476a2d9a139c", "url": "https://github.com/ConsenSys/teku/commit/2cc120523ee0dc792e9887c6498e476a2d9a139c", "message": "Draft refactoring with using a Spec instance for ssz container types and instances creation", "committedDate": "2021-01-27T18:36:35Z", "type": "commit"}, {"oid": "3ea2ce56e097a3f0ade663659c6e160735d04c80", "url": "https://github.com/ConsenSys/teku/commit/3ea2ce56e097a3f0ade663659c6e160735d04c80", "message": "Generate child type getters for ContainerTypeN", "committedDate": "2021-01-28T12:13:39Z", "type": "commit"}, {"oid": "00441cf6919670441ac924a61850d74975d5b6c6", "url": "https://github.com/ConsenSys/teku/commit/00441cf6919670441ac924a61850d74975d5b6c6", "message": "Use Constants for now instead of the new Spec class", "committedDate": "2021-01-28T15:46:08Z", "type": "commit"}, {"oid": "910849b3a1a849c93d3f1ac686bc41027b505a4b", "url": "https://github.com/ConsenSys/teku/commit/910849b3a1a849c93d3f1ac686bc41027b505a4b", "message": "Spotless", "committedDate": "2021-01-28T15:47:27Z", "type": "commit"}, {"oid": "14de5e70b9bd1e570411610824e6eb4b6e830c37", "url": "https://github.com/ConsenSys/teku/commit/14de5e70b9bd1e570411610824e6eb4b6e830c37", "message": "Fix warn", "committedDate": "2021-01-28T15:49:51Z", "type": "commit"}, {"oid": "2128798c284212fc2a81020d48310ae784e2704b", "url": "https://github.com/ConsenSys/teku/commit/2128798c284212fc2a81020d48310ae784e2704b", "message": "Add the right equals() for List/VectorViewType to correctly handle their subclasses", "committedDate": "2021-01-28T16:07:01Z", "type": "commit"}, {"oid": "c277c25610e8a1b1bde9c4c181e4233bf4f8ce95", "url": "https://github.com/ConsenSys/teku/commit/c277c25610e8a1b1bde9c4c181e4233bf4f8ce95", "message": "Add Ssz type descriptor to HistoricalBatch", "committedDate": "2021-01-28T16:13:50Z", "type": "commit"}, {"oid": "43e3986efc3f0ed8b6d5f8bb1a530dc42353443c", "url": "https://github.com/ConsenSys/teku/commit/43e3986efc3f0ed8b6d5f8bb1a530dc42353443c", "message": "Remove obsolete code from Eth2ReferenceTestCase", "committedDate": "2021-01-28T16:20:15Z", "type": "commit"}, {"oid": "ed8f9b137e06b91241a5236bfbf8927fab5218be", "url": "https://github.com/ConsenSys/teku/commit/ed8f9b137e06b91241a5236bfbf8927fab5218be", "message": "Fix the test", "committedDate": "2021-01-28T16:23:35Z", "type": "commit"}, {"oid": "4e3899b128ca5731dd96fa01fbea8a29d8e137ed", "url": "https://github.com/ConsenSys/teku/commit/4e3899b128ca5731dd96fa01fbea8a29d8e137ed", "message": "Add Eth2 rpc messages tests", "committedDate": "2021-01-28T17:12:13Z", "type": "commit"}, {"oid": "ab69165710c689777cdf9f468bc56498184ba4b4", "url": "https://github.com/ConsenSys/teku/commit/ab69165710c689777cdf9f468bc56498184ba4b4", "message": "Fix the test", "committedDate": "2021-01-28T17:17:02Z", "type": "commit"}, {"oid": "df42fa77dc2a7eed0828a5f1b8fb743dbe435baa", "url": "https://github.com/ConsenSys/teku/commit/df42fa77dc2a7eed0828a5f1b8fb743dbe435baa", "message": "Fix deserialization of bitvector with multiple 8 length", "committedDate": "2021-01-28T17:17:56Z", "type": "commit"}, {"oid": "d838d70580b54f47525f7aac74f675e9f5b12e81", "url": "https://github.com/ConsenSys/teku/commit/d838d70580b54f47525f7aac74f675e9f5b12e81", "message": "Spotless", "committedDate": "2021-01-28T17:27:35Z", "type": "commit"}]}