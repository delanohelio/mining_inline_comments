{"pr_number": 1102, "pr_title": "Add exceptionallyCompose to SafeFuture", "pr_createdAt": "2020-01-21T20:39:44Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1102", "timeline": [{"oid": "9793e586504c7467825edad9410a0239629bfdf2", "url": "https://github.com/ConsenSys/teku/commit/9793e586504c7467825edad9410a0239629bfdf2", "message": "Add exceptionallyCompose to SafeFuture.", "committedDate": "2020-01-21T20:36:19Z", "type": "commit"}, {"oid": "1b90f3aa9cbc1929c7662cca8fb9a49cc0d68bfe", "url": "https://github.com/ConsenSys/teku/commit/1b90f3aa9cbc1929c7662cca8fb9a49cc0d68bfe", "message": "Test error handling of errors from error handler.", "committedDate": "2020-01-21T20:38:59Z", "type": "commit"}, {"oid": "79666fd4da5312633d7bfaac2c9ae60e8355026d", "url": "https://github.com/ConsenSys/teku/commit/79666fd4da5312633d7bfaac2c9ae60e8355026d", "message": "Fix spotless.", "committedDate": "2020-01-21T20:43:01Z", "type": "commit"}, {"oid": "a0aea188bd030eb9a18530d211c0b11d81f91c1d", "url": "https://github.com/ConsenSys/teku/commit/a0aea188bd030eb9a18530d211c0b11d81f91c1d", "message": "Suppress warnings.", "committedDate": "2020-01-21T20:50:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIzNzAwMA==", "url": "https://github.com/ConsenSys/teku/pull/1102#discussion_r369237000", "bodyText": "lol nope.", "author": "cemozerr", "createdAt": "2020-01-21T20:52:58Z", "path": "util/src/test/java/tech/pegasys/artemis/util/async/SafeFutureTest.java", "diffHunk": "@@ -261,6 +253,56 @@ public void reportExceptions_shouldLogUnhandledExceptions() {\n     assertThat(logCounter.getCount()).isEqualTo(1);\n   }\n \n+  @Test\n+  public void exceptionallyCompose_shouldComposeInErrorCase() {\n+    final AtomicReference<Throwable> receivedError = new AtomicReference<>();\n+    final SafeFuture<String> safeFuture = new SafeFuture<>();\n+    final SafeFuture<String> composedFuture = new SafeFuture<>();\n+    final SafeFuture<String> result = safeFuture.exceptionallyCompose(error -> {\n+      receivedError.set(error);\n+      return composedFuture;\n+    });\n+    final RuntimeException exception = new RuntimeException(\"Nope\");", "originalCommit": "1b90f3aa9cbc1929c7662cca8fb9a49cc0d68bfe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "81d511046e799ab23ab37ee95e80bbda1104a28e", "url": "https://github.com/ConsenSys/teku/commit/81d511046e799ab23ab37ee95e80bbda1104a28e", "message": "Merge branch 'master' into add-exceptionally-compose", "committedDate": "2020-01-21T20:55:31Z", "type": "commit"}]}