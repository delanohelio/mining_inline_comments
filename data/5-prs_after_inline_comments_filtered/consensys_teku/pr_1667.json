{"pr_number": 1667, "pr_title": "1642 network cli test cases", "pr_createdAt": "2020-04-24T10:39:30Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1667", "timeline": [{"oid": "df25630ebc8148270e38854fa0c253dbc388da82", "url": "https://github.com/ConsenSys/teku/commit/df25630ebc8148270e38854fa0c253dbc388da82", "message": "add an enumeration for Network types that could be referenced by NetworkOptions.\n\nAddresses #1642\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-04-24T02:18:27Z", "type": "commit"}, {"oid": "242e0edb566870304921c3f3636cf21abc573f27", "url": "https://github.com/ConsenSys/teku/commit/242e0edb566870304921c3f3636cf21abc573f27", "message": "network option also accepts other values, like URLs which is valid, reverted enumeration change, added test case.\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-04-24T10:29:10Z", "type": "commit"}, {"oid": "c16d1d6ae523b39150644a8bb9ba03bfb4673151", "url": "https://github.com/ConsenSys/teku/commit/c16d1d6ae523b39150644a8bb9ba03bfb4673151", "message": "cleanup\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-04-24T10:38:56Z", "type": "commit"}, {"oid": "c0012d292f3a6e41ebdec92991877d10f74ba620", "url": "https://github.com/ConsenSys/teku/commit/c0012d292f3a6e41ebdec92991877d10f74ba620", "message": "Merge remote-tracking branch 'upstream/master' into 1642-network-cli-enum", "committedDate": "2020-04-24T10:39:51Z", "type": "commit"}, {"oid": "e23c61e45abdd1234097680f51716213e031bbad", "url": "https://github.com/ConsenSys/teku/commit/e23c61e45abdd1234097680f51716213e031bbad", "message": "Fix tests - there was a block I had put into the complete config file by mistake.\n\nWhile I was diagnosing, broke out some more tests and added config files to read sections from.\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-04-26T22:59:05Z", "type": "commit"}, {"oid": "d6d3b81adbfc654befba905328465f5e0af63480", "url": "https://github.com/ConsenSys/teku/commit/d6d3b81adbfc654befba905328465f5e0af63480", "message": "Merge remote-tracking branch 'upstream/master' into 1642-network-cli-enum", "committedDate": "2020-04-26T23:02:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQzMjAwOA==", "url": "https://github.com/ConsenSys/teku/pull/1667#discussion_r415432008", "bodyText": "Could we inline these constants again?  mainnet network name and mainnet constants spec are different things (when MainNet actually exists it will have boot nodes, contract address etc).  We shouldn't use the same constant to refer to different things.  And generally this reads better and more succinctly with the inline string constants due to the improved locality of reference (ie you don't need to also look at the definition of the constant to work out what is actually being set).", "author": "ajsutton", "createdAt": "2020-04-26T23:56:36Z", "path": "util/src/main/java/tech/pegasys/artemis/util/config/NetworkDefinition.java", "diffHunk": "@@ -24,14 +24,18 @@\n \n public class NetworkDefinition {\n \n+  public static final String MINIMAL = \"minimal\";\n+  public static final String MAINNET = \"mainnet\";\n+  public static final String TOPAZ = \"topaz\";\n+\n   private static final ImmutableMap<String, NetworkDefinition> NETWORKS =\n       ImmutableMap.<String, NetworkDefinition>builder()\n-          .put(\"minimal\", builder().constants(\"minimal\").startupTargetPeerCount(0).build())\n-          .put(\"mainnet\", builder().constants(\"mainnet\").build())\n+          .put(MINIMAL, builder().constants(MINIMAL).startupTargetPeerCount(0).build())", "originalCommit": "d6d3b81adbfc654befba905328465f5e0af63480", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQzMzc3NA==", "url": "https://github.com/ConsenSys/teku/pull/1667#discussion_r415433774", "bodyText": "they're new constants on the NetworkOptions class, but i can remove them i guess. I'd really prefer not to use repeated literal strings in this way, it's asking for trouble.", "author": "rolfyone", "createdAt": "2020-04-27T00:05:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQzMjAwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQzNTU1Mg==", "url": "https://github.com/ConsenSys/teku/pull/1667#discussion_r415435552", "bodyText": "I'm really keen to avoid using the same constant for two different things.  Just because they are the same string, doesn't make them the same.", "author": "ajsutton", "createdAt": "2020-04-27T00:14:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQzMjAwOA=="}], "type": "inlineReview"}, {"oid": "e5d0fb55a1b5cf0c80bbf30580c301c337bf37d4", "url": "https://github.com/ConsenSys/teku/commit/e5d0fb55a1b5cf0c80bbf30580c301c337bf37d4", "message": "review comment changes\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-04-27T00:22:38Z", "type": "commit"}]}