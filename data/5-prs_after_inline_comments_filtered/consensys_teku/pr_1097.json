{"pr_number": 1097, "pr_title": "Update to 0.9.4 spec", "pr_createdAt": "2020-01-20T04:37:14Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1097", "timeline": [{"oid": "149d1a930c87dd4b278cdab70be17cce217f8cb7", "url": "https://github.com/ConsenSys/teku/commit/149d1a930c87dd4b278cdab70be17cce217f8cb7", "message": "Signed wrappers.", "committedDate": "2020-01-19T22:22:49Z", "type": "commit"}, {"oid": "1298939827995fd5215fe7fe63ce985071f6727c", "url": "https://github.com/ConsenSys/teku/commit/1298939827995fd5215fe7fe63ce985071f6727c", "message": "Make reference tests work.  Include actual name of reference test in JUnit test name.", "committedDate": "2020-01-20T01:42:49Z", "type": "commit"}, {"oid": "420981c1f896c755351ab425c36ddbe2ebb23362", "url": "https://github.com/ConsenSys/teku/commit/420981c1f896c755351ab425c36ddbe2ebb23362", "message": "Final updates to fork choice.\nNote change from unix time to store time in ForkChoiceUtil.", "committedDate": "2020-01-20T03:43:59Z", "type": "commit"}, {"oid": "859edde72e4e96821064121950dccab537096f95", "url": "https://github.com/ConsenSys/teku/commit/859edde72e4e96821064121950dccab537096f95", "message": "Restore the bug that allows attestations from the current slot to be processed until we support delaying them.", "committedDate": "2020-01-20T04:27:43Z", "type": "commit"}, {"oid": "02f1572eb2d557502b16a19e198740ffd1fa0ac9", "url": "https://github.com/ConsenSys/teku/commit/02f1572eb2d557502b16a19e198740ffd1fa0ac9", "message": "Default to verifying signatures and state.", "committedDate": "2020-01-20T04:31:32Z", "type": "commit"}, {"oid": "83318eb1161b6c6bd0581096917b7f75be0b71d5", "url": "https://github.com/ConsenSys/teku/commit/83318eb1161b6c6bd0581096917b7f75be0b71d5", "message": "Spotless.", "committedDate": "2020-01-20T05:15:14Z", "type": "commit"}, {"oid": "9503d6542b07862937c083fb3a1d75e2750b8e63", "url": "https://github.com/ConsenSys/teku/commit/9503d6542b07862937c083fb3a1d75e2750b8e63", "message": "Merge branch 'master' into 0.9.4", "committedDate": "2020-01-20T20:02:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODcxMjE1NQ==", "url": "https://github.com/ConsenSys/teku/pull/1097#discussion_r368712155", "bodyText": "I think the last Bytes.EMPTY here should be removed since I reckon that was for the signature", "author": "cemozerr", "createdAt": "2020-01-20T20:16:25Z", "path": "ethereum/datastructures/src/main/java/tech/pegasys/artemis/datastructures/blocks/BeaconBlock.java", "diffHunk": "@@ -45,72 +41,51 @@\n   // Body\n   private BeaconBlockBody body;\n \n-  // Signature\n-  private BLSSignature signature;\n-\n   public BeaconBlock(\n-      UnsignedLong slot,\n-      Bytes32 parent_root,\n-      Bytes32 state_root,\n-      BeaconBlockBody body,\n-      BLSSignature signature) {\n+      UnsignedLong slot, Bytes32 parent_root, Bytes32 state_root, BeaconBlockBody body) {\n     this.slot = slot;\n     this.parent_root = parent_root;\n     this.state_root = state_root;\n     this.body = body;\n-    this.signature = signature;\n   }\n \n   public BeaconBlock() {\n     this.slot = UnsignedLong.ZERO;\n     this.parent_root = Bytes32.ZERO;\n     this.state_root = Bytes32.ZERO;\n     this.body = new BeaconBlockBody();\n-    this.signature = BLSSignature.empty();\n   }\n \n   public BeaconBlock(Bytes32 state_root) {\n     this.slot = UnsignedLong.ZERO;\n     this.parent_root = Bytes32.ZERO;\n     this.state_root = state_root;\n     this.body = new BeaconBlockBody();\n-    this.signature = BLSSignature.empty();\n   }\n \n   @Override\n   public int getSSZFieldCount() {\n-    return SSZ_FIELD_COUNT + body.getSSZFieldCount() + signature.getSSZFieldCount();\n+    return SSZ_FIELD_COUNT + body.getSSZFieldCount();\n   }\n \n   @Override\n   public List<Bytes> get_fixed_parts() {\n-    List<Bytes> fixedPartsList = new ArrayList<>();\n-    fixedPartsList.addAll(\n-        List.of(\n-            SSZ.encodeUInt64(slot.longValue()),\n-            SSZ.encode(writer -> writer.writeFixedBytes(parent_root)),\n-            SSZ.encode(writer -> writer.writeFixedBytes(state_root)),\n-            Bytes.EMPTY));\n-    fixedPartsList.addAll(signature.get_fixed_parts());\n-    return fixedPartsList;\n+    return List.of(\n+        SSZ.encodeUInt64(slot.longValue()),\n+        SSZ.encode(writer -> writer.writeFixedBytes(parent_root)),\n+        SSZ.encode(writer -> writer.writeFixedBytes(state_root)),\n+        Bytes.EMPTY);\n   }\n \n   @Override\n   public List<Bytes> get_variable_parts() {\n-    List<Bytes> variablePartsList = new ArrayList<>();\n-    variablePartsList.addAll(\n-        List.of(\n-            Bytes.EMPTY,\n-            Bytes.EMPTY,\n-            Bytes.EMPTY,\n-            SimpleOffsetSerializer.serialize(body),\n-            Bytes.EMPTY));\n-    return variablePartsList;\n+    return List.of(", "originalCommit": "9503d6542b07862937c083fb3a1d75e2750b8e63", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc0Nzg5NA==", "url": "https://github.com/ConsenSys/teku/pull/1097#discussion_r368747894", "bodyText": "Wow, great spot.", "author": "ajsutton", "createdAt": "2020-01-20T22:41:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODcxMjE1NQ=="}], "type": "inlineReview"}, {"oid": "a16a03debb9d4f38ba015ddbaa53ff24544e47f2", "url": "https://github.com/ConsenSys/teku/commit/a16a03debb9d4f38ba015ddbaa53ff24544e47f2", "message": "Remove unnecessary Bytes.EMPTY.", "committedDate": "2020-01-20T20:36:55Z", "type": "commit"}, {"oid": "e36f81c63bed259f064e63f42c4d70f67e0273ee", "url": "https://github.com/ConsenSys/teku/commit/e36f81c63bed259f064e63f42c4d70f67e0273ee", "message": "Update benchmarks for SignedBeaconBlock.", "committedDate": "2020-01-20T22:39:55Z", "type": "commit"}]}