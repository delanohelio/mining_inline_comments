{"pr_number": 2392, "pr_title": "Don't mark peers as permanently unsuitable when they fail to respond to ping", "pr_createdAt": "2020-07-20T22:27:41Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2392", "timeline": [{"oid": "5f0eff8dd5e2b79ca75445f9bbb5cd6bba521d13", "url": "https://github.com/ConsenSys/teku/commit/5f0eff8dd5e2b79ca75445f9bbb5cd6bba521d13", "message": "Don't mark peers as permanently unsuitable when they fail to respond to pings.", "committedDate": "2020-07-20T22:23:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3MTk5NA==", "url": "https://github.com/ConsenSys/teku/pull/2392#discussion_r458171994", "bodyText": "This is outside the scope of this PR - but seems like this eth2-specific logic (GoodbyeMessage / PING behavior) should be in the eth2 package.", "author": "mbaxter", "createdAt": "2020-07-21T15:08:34Z", "path": "networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/peer/DisconnectReason.java", "diffHunk": "@@ -23,6 +23,7 @@\n   UNABLE_TO_VERIFY_NETWORK(GoodbyeMessage.REASON_UNABLE_TO_VERIFY_NETWORK, true),\n   TOO_MANY_PEERS(GoodbyeMessage.REASON_TOO_MANY_PEERS, false),\n   REMOTE_FAULT(GoodbyeMessage.REASON_FAULT_ERROR, false),\n+  NO_PING_RESPONSES(GoodbyeMessage.REASON_FAULT_ERROR, false),", "originalCommit": "5f0eff8dd5e2b79ca75445f9bbb5cd6bba521d13", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3NTcxMg==", "url": "https://github.com/ConsenSys/teku/pull/2392#discussion_r458175712", "bodyText": "Probably worth adding a test + some comments on the situation this fixes.", "author": "mbaxter", "createdAt": "2020-07-21T15:13:36Z", "path": "networking/p2p/src/main/java/tech/pegasys/teku/networking/p2p/connection/ReputationManager.java", "diffHunk": "@@ -71,6 +75,9 @@ private Reputation getOrCreateReputation(final PeerAddress peerAddress) {\n   }\n \n   private static class Reputation {\n+    private static final EnumSet<DisconnectReason> LOCAL_TEMPORARY_DISCONNECT_REASONS =", "originalCommit": "5f0eff8dd5e2b79ca75445f9bbb5cd6bba521d13", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ea2aadd50f573eef9e0800aca9f8c77b81d3d106", "url": "https://github.com/ConsenSys/teku/commit/ea2aadd50f573eef9e0800aca9f8c77b81d3d106", "message": "Add comments explaining why each reason is not permanent. Add test.", "committedDate": "2020-07-21T20:30:54Z", "type": "commit"}, {"oid": "0e9f19601ae83533221a1986bf3faaacb4863f02", "url": "https://github.com/ConsenSys/teku/commit/0e9f19601ae83533221a1986bf3faaacb4863f02", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into temporary-ban-for-no-ping", "committedDate": "2020-07-21T20:31:01Z", "type": "commit"}]}