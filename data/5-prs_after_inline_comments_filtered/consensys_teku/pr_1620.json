{"pr_number": 1620, "pr_title": "Use ArtemisMetricCategory as the source for valid metric categories.", "pr_createdAt": "2020-04-19T23:18:44Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1620", "timeline": [{"oid": "5f60bf6f6942955965bbdf649897aabe11fe7e65", "url": "https://github.com/ConsenSys/teku/commit/5f60bf6f6942955965bbdf649897aabe11fe7e65", "message": "Use ArtemisMetricCategory as the source for valid metric categories.\n\n - due to dependencies continue to export strings to the lower levels.\n\n - Update the default categories in the config.yaml to contain no invalid values.\n\n - set the default prometheus categories to at least include the beacon category.\n\n Addresses #1619\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-04-19T23:17:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTAyMzIzMQ==", "url": "https://github.com/ConsenSys/teku/pull/1620#discussion_r411023231", "bodyText": "I'd suggest defaulting to enabling all metrics. I hadn't noticed that we'd disabled them all by default.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public static final List<ArtemisMetricCategory> DEFAULT_METRICS_CATEGORIES = List.of(BEACON);\n          \n          \n            \n              public static final List<ArtemisMetricCategory> DEFAULT_METRICS_CATEGORIES = new ArrayList<>(EnumSet.allOf(ArtemisMetricCategory.class));", "author": "ajsutton", "createdAt": "2020-04-20T00:06:35Z", "path": "artemis/src/main/java/tech/pegasys/artemis/cli/options/MetricsOptions.java", "diffHunk": "@@ -26,7 +30,7 @@\n   public static final boolean DEFAULT_METRICS_ENABLED = false;\n   public static final int DEFAULT_METRICS_PORT = 8008;\n   public static final String DEFAULT_METRICS_INTERFACE = \"127.0.0.1\";\n-  public static final ArrayList<String> DEFAULT_METRICS_CATEGORIES = new ArrayList<>();\n+  public static final List<ArtemisMetricCategory> DEFAULT_METRICS_CATEGORIES = List.of(BEACON);", "originalCommit": "5f60bf6f6942955965bbdf649897aabe11fe7e65", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTAzMTkwOQ==", "url": "https://github.com/ConsenSys/teku/pull/1620#discussion_r411031909", "bodyText": "yep ok - we're just going to use as much of the besu code as we can and try to get it all right i think", "author": "rolfyone", "createdAt": "2020-04-20T00:54:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTAyMzIzMQ=="}], "type": "inlineReview"}, {"oid": "580f30657150414056fea23931281305a4900be0", "url": "https://github.com/ConsenSys/teku/commit/580f30657150414056fea23931281305a4900be0", "message": "Process and JVM can now be used as categories, and removing them disables them.\n\nAdded a default of all categories.\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-04-20T01:31:54Z", "type": "commit"}, {"oid": "ab8d2c4d47dd2032f8219ca01cfe360ecb227b01", "url": "https://github.com/ConsenSys/teku/commit/ab8d2c4d47dd2032f8219ca01cfe360ecb227b01", "message": "Merge remote-tracking branch 'upstream/master' into 1619-metrics-categories", "committedDate": "2020-04-20T01:32:52Z", "type": "commit"}]}