{"pr_number": 3390, "pr_title": "Start beacon chain service before validator keys load", "pr_createdAt": "2020-12-10T18:53:05Z", "pr_url": "https://github.com/ConsenSys/teku/pull/3390", "timeline": [{"oid": "2de0a928794550b4a8deff8001f2be8624fbab65", "url": "https://github.com/ConsenSys/teku/commit/2de0a928794550b4a8deff8001f2be8624fbab65", "message": "Create initializeValidators method that runs async", "committedDate": "2020-12-10T18:49:26Z", "type": "commit"}, {"oid": "a14004abacde62f8580d1ced53293fc0a5bf1d33", "url": "https://github.com/ConsenSys/teku/commit/a14004abacde62f8580d1ced53293fc0a5bf1d33", "message": "Run spotless", "committedDate": "2020-12-10T18:49:42Z", "type": "commit"}, {"oid": "4c4c82e8e8ed5d54cd55e79cc36093b1d2d5448c", "url": "https://github.com/ConsenSys/teku/commit/4c4c82e8e8ed5d54cd55e79cc36093b1d2d5448c", "message": "Fix future warning", "committedDate": "2020-12-10T19:07:42Z", "type": "commit"}, {"oid": "f6ea656db2fad677a99ce0ba0e16530b8dd49f8c", "url": "https://github.com/ConsenSys/teku/commit/f6ea656db2fad677a99ce0ba0e16530b8dd49f8c", "message": "Make async runner threads non-daemon", "committedDate": "2020-12-10T20:36:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ5MjE4Mw==", "url": "https://github.com/ConsenSys/teku/pull/3390#discussion_r540492183", "bodyText": "should log rather than println...", "author": "rolfyone", "createdAt": "2020-12-10T20:59:05Z", "path": "validator/client/src/main/java/tech/pegasys/teku/validator/client/ValidatorClientService.java", "diffHunk": "@@ -156,17 +160,21 @@ private static void addValidatorCountMetric(\n \n   @Override\n   protected SafeFuture<?> doStart() {\n-    forkProvider.start().reportExceptions();\n-    validatorIndexProvider.lookupValidators();\n-    eventChannels.subscribe(\n-        ValidatorTimingChannel.class,\n-        new ValidatorTimingActions(\n-            validatorStatusLogger,\n-            validatorIndexProvider,\n-            blockProductionTimingChannel,\n-            attestationTimingChannel));\n-    validatorStatusLogger.printInitialValidatorStatuses();\n-    return beaconNodeApi.subscribeToEvents();\n+    return initializationComplete.thenCompose(\n+        (__) -> {\n+          System.out.println(\"initialization complete\");", "originalCommit": "f6ea656db2fad677a99ce0ba0e16530b8dd49f8c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ5NzUzMA==", "url": "https://github.com/ConsenSys/teku/pull/3390#discussion_r540497530", "bodyText": "Done.", "author": "cemozerr", "createdAt": "2020-12-10T21:08:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ5MjE4Mw=="}], "type": "inlineReview"}, {"oid": "d022ab1cb642cb3689228f1e36dcafe70f156f27", "url": "https://github.com/ConsenSys/teku/commit/d022ab1cb642cb3689228f1e36dcafe70f156f27", "message": "Remove stray println", "committedDate": "2020-12-10T21:01:51Z", "type": "commit"}, {"oid": "f549d1ef06d9428ef739b132b37ab35276e57f0c", "url": "https://github.com/ConsenSys/teku/commit/f549d1ef06d9428ef739b132b37ab35276e57f0c", "message": "Merge branch 'master' into doNotWaitToInitializeValidatorKeys", "committedDate": "2020-12-11T00:28:04Z", "type": "commit"}, {"oid": "29b5cfb02ec70740aca783b93ab7a6c04625bca1", "url": "https://github.com/ConsenSys/teku/commit/29b5cfb02ec70740aca783b93ab7a6c04625bca1", "message": "Merge branch 'master' into doNotWaitToInitializeValidatorKeys", "committedDate": "2020-12-11T14:46:29Z", "type": "commit"}]}