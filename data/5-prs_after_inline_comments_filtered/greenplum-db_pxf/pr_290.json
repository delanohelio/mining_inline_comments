{"pr_number": 290, "pr_title": "Log ClientAbortException at debug level", "pr_createdAt": "2020-01-22T21:12:31Z", "pr_url": "https://github.com/greenplum-db/pxf/pull/290", "timeline": [{"oid": "419350b98fb05ee1b13717bc5ad8e54a026ba73d", "url": "https://github.com/greenplum-db/pxf/commit/419350b98fb05ee1b13717bc5ad8e54a026ba73d", "message": "Log ClientAbortException in debug level\n\nWhile running a large cluster and queries fail, ClientAbortExceptions\nbecome intrusive in the error log. To better debug queries while running\non large clusters (10s of segments per segment host), log the stacktrace\nat the debug level, and give hints how to surface the exception.", "committedDate": "2020-01-22T21:10:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgxNDM1NA==", "url": "https://github.com/greenplum-db/pxf/pull/290#discussion_r369814354", "bodyText": "good idea, but maybe log one message or another, depending on the log level. Having 2 log lines for DEBUG level will be messy when all threads are logging, it will be hard to cross-correlate", "author": "denalex", "createdAt": "2020-01-22T21:31:15Z", "path": "server/pxf-service/src/main/java/org/greenplum/pxf/service/rest/BridgeResource.java", "diffHunk": "@@ -142,7 +142,9 @@ public void write(final OutputStream out) throws IOException,\n                     LOG.debug(\"Finished streaming fragment {} of resource {}, {} records.\", fragment, dataDir, recordCount);\n                 } catch (ClientAbortException e) {\n                     // Occurs whenever client (GPDB) decides to end the connection\n-                    LOG.error(\"Remote connection closed by GPDB\", e);\n+                    LOG.error(\"Remote connection closed by GPDB (Enable debug for additional details)\");\n+                    // Stacktrace in debug\n+                    LOG.debug(\"Details: Remote connection closed by GPDB\", e);", "originalCommit": "419350b98fb05ee1b13717bc5ad8e54a026ba73d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgxNjA1OQ==", "url": "https://github.com/greenplum-db/pxf/pull/290#discussion_r369816059", "bodyText": "that's a good point, Alex.", "author": "oliverralbertini", "createdAt": "2020-01-22T21:35:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgxNDM1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTkxMzU0MA==", "url": "https://github.com/greenplum-db/pxf/pull/290#discussion_r369913540", "bodyText": "done", "author": "frankgh", "createdAt": "2020-01-23T03:04:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgxNDM1NA=="}], "type": "inlineReview"}, {"oid": "a2e4e18e55d047df67cbb8c24b7a9477197f0564", "url": "https://github.com/greenplum-db/pxf/commit/a2e4e18e55d047df67cbb8c24b7a9477197f0564", "message": "Address PR Feedback", "committedDate": "2020-01-23T03:03:10Z", "type": "commit"}]}