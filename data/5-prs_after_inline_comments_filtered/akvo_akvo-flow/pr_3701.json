{"pr_number": 3701, "pr_title": "[#3689] Fix different group dependencies are broken", "pr_createdAt": "2020-12-03T10:39:29Z", "pr_url": "https://github.com/akvo/akvo-flow/pull/3701", "timeline": [{"oid": "c773e8fffa0e1b44ddd2fe57e7150d7648783616", "url": "https://github.com/akvo/akvo-flow/commit/c773e8fffa0e1b44ddd2fe57e7150d7648783616", "message": "[#3689] Fix different group dependencies are broken\n\nWe were using a map to store copied groups so the group order was lost,\nusing a list now\nAdded a test\n\nCo-authored-by: Juan A. Ruz <juanantonioruz@gmail.com>", "committedDate": "2020-12-03T10:37:35Z", "type": "commit"}, {"oid": "f4987d94d2faefce7dfabdc86e7bb785b8a542ae", "url": "https://github.com/akvo/akvo-flow/commit/f4987d94d2faefce7dfabdc86e7bb785b8a542ae", "message": "[#3689] using another Pair object as the other one class is not found", "committedDate": "2020-12-03T10:53:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTEzOTc1Mw==", "url": "https://github.com/akvo/akvo-flow/pull/3701#discussion_r535139753", "bodyText": "Why there is a need to use a Pair from gwt?", "author": "iperdomo", "createdAt": "2020-12-03T11:34:59Z", "path": "GAE/src/com/gallatinsystems/survey/dao/SurveyUtils.java", "diffHunk": "@@ -16,11 +16,13 @@\n \n package com.gallatinsystems.survey.dao;\n \n+import com.google.gwt.dev.util.Pair;", "originalCommit": "f4987d94d2faefce7dfabdc86e7bb785b8a542ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE0NDgwMw==", "url": "https://github.com/akvo/akvo-flow/pull/3701#discussion_r535144803", "bodyText": "we were using javafx.util.Pair but that worked in my local environment but broke the build saying the class was not found, this was another option, I don't see what si the problem with this class, can you specify? I also though about creating my own object but why doing so if that class exists, unless there is a valid reason to not use it", "author": "valllllll2000", "createdAt": "2020-12-03T11:40:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTEzOTc1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE0MTIzMQ==", "url": "https://github.com/akvo/akvo-flow/pull/3701#discussion_r535141231", "bodyText": "this complex one can be done with new ArrayList(sourceToCopiedGroupMap.values()) ? not sure the value of stream to just get the values", "author": "iperdomo", "createdAt": "2020-12-03T11:36:33Z", "path": "GAE/src/com/gallatinsystems/survey/dao/SurveyUtils.java", "diffHunk": "@@ -111,14 +113,14 @@ public static void copySurvey(Long copiedSurveyId, Long originalSurveyId) {\n \n         log.log(Level.INFO, \"Copying \" + qgList.size() + \" `QuestionGroup`\");\n \n-        Map<Long, QuestionGroup> sourceToCopiedGroupMap = shallowCopyQuestionGroups(copiedSurveyId, qgList);\n+        List<Pair<Long, QuestionGroup>> sourceToCopiedGroupMap = shallowCopyQuestionGroups(copiedSurveyId, qgList);\n \n         // batch save question groups\n-        new QuestionGroupDao().save(sourceToCopiedGroupMap.values());\n+        new QuestionGroupDao().save(sourceToCopiedGroupMap.stream().map(pair -> pair.right).collect(Collectors.toList()));", "originalCommit": "f4987d94d2faefce7dfabdc86e7bb785b8a542ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE0ODA5Nw==", "url": "https://github.com/akvo/akvo-flow/pull/3701#discussion_r535148097", "bodyText": "yes because this is no longer a map, I renamed the var to reflect that", "author": "valllllll2000", "createdAt": "2020-12-03T11:43:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE0MTIzMQ=="}], "type": "inlineReview"}, {"oid": "9740e775c552db5fe382d4c799d6e38c8397897a", "url": "https://github.com/akvo/akvo-flow/commit/9740e775c552db5fe382d4c799d6e38c8397897a", "message": "[#3689] rename var which is no longer a map but a list of pairs", "committedDate": "2020-12-03T11:42:26Z", "type": "commit"}]}