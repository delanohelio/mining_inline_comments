{"pr_number": 968, "pr_title": "Build command fails on windows", "pr_createdAt": "2020-02-05T07:00:04Z", "pr_url": "https://github.com/wso2/product-microgateway/pull/968", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTE1MzI3Nw==", "url": "https://github.com/wso2/product-microgateway/pull/968#discussion_r375153277", "bodyText": "Why we need unixHomePath when using windows", "author": "Rajith90", "createdAt": "2020-02-05T09:48:45Z", "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/cmd/BuildCmd.java", "diffHunk": "@@ -274,7 +274,10 @@ private void updateProjectOrganizationName(String projectName) throws IOExceptio\n         String templateFile = CmdUtils.getMicroGWConfResourceLocation() + File.separator\n                 + CliConstants.BALLERINA_TOML_FILE;\n         String fileContent = CmdUtils.readFileAsString(templateFile, false);\n-        fileContent = fileContent.replace(CliConstants.MICROGW_HOME_PLACEHOLDER, CmdUtils.getCLIHome());\n+\n+        // Windows paths contains '\\' separator which causes issues when included in ballerina.toml\n+        String unixHomePath = CmdUtils.getCLIHome().replace('\\\\', '/');", "originalCommit": "ceba7de589dbbb7e53b17d2a44e185feb8bf8b4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTE1NTQ5NQ==", "url": "https://github.com/wso2/product-microgateway/pull/968#discussion_r375155495", "bodyText": "quoting from the issue,\n\nGenerated value in the Ballerina.toml file looks like below.\n\"wso2/gateway\" = { path = \"C:\\Users\\ADMINI~1\\toolkit\\bin\\../lib/gateway-balo/gateway-2019r3-java8-3.1.0.balo\"}\n\nReplacing the backslashes in the windows path with forward slashes fixed the issue. This should be corrected in below line\n\n  \n    \n      product-microgateway/components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/cmd/BuildCmd.java\n    \n    \n         Line 277\n      in\n      4aa807b\n    \n    \n    \n    \n\n        \n          \n           fileContent = fileContent.replace(CliConstants.MICROGW_HOME_PLACEHOLDER, CmdUtils.getCLIHome()); \n        \n    \n  \n\n\n\nBallerina get confused when windows style path is provided in ballerina.toml", "author": "praminda", "createdAt": "2020-02-05T09:52:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTE1MzI3Nw=="}], "type": "inlineReview"}, {"oid": "c4463658451d566cfd47719c9fdca149aa35511d", "url": "https://github.com/wso2/product-microgateway/commit/c4463658451d566cfd47719c9fdca149aa35511d", "message": "cli: Build command fails on windows\n\nFixes #930\n\nBallerina doesn't like it when ballerina.toml contains Windows\npath separator '\\' in library paths.", "committedDate": "2020-02-06T06:25:52Z", "type": "commit"}, {"oid": "c4463658451d566cfd47719c9fdca149aa35511d", "url": "https://github.com/wso2/product-microgateway/commit/c4463658451d566cfd47719c9fdca149aa35511d", "message": "cli: Build command fails on windows\n\nFixes #930\n\nBallerina doesn't like it when ballerina.toml contains Windows\npath separator '\\' in library paths.", "committedDate": "2020-02-06T06:25:52Z", "type": "forcePushed"}]}