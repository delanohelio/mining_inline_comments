{"pr_number": 1214, "pr_title": "Bug Fix : OpenAPI file generated for the proto file is not valid", "pr_createdAt": "2020-04-25T10:45:06Z", "pr_url": "https://github.com/wso2/product-microgateway/pull/1214", "timeline": [{"oid": "8ec98b2280257859ddd6ba1ba5f52cefb3097965", "url": "https://github.com/wso2/product-microgateway/commit/8ec98b2280257859ddd6ba1ba5f52cefb3097965", "message": "bug fix in protobuf-openAPI generation - add responses object to resources", "committedDate": "2020-04-24T16:31:25Z", "type": "commit"}, {"oid": "7b63a2a27efbfc6aab9e293cbedcb93ab605abce", "url": "https://github.com/wso2/product-microgateway/commit/7b63a2a27efbfc6aab9e293cbedcb93ab605abce", "message": "Merge branch 'master' into grpc-openapi-fix", "committedDate": "2020-04-24T16:32:46Z", "type": "commit"}, {"oid": "e8c1877c218814f7c0177ead2adb9e11c3912a12", "url": "https://github.com/wso2/product-microgateway/commit/e8c1877c218814f7c0177ead2adb9e11c3912a12", "message": "Merge branch 'master' into grpc-openapi-fix", "committedDate": "2020-04-27T18:48:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzEwMg==", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r424337102", "bodyText": "Lets use constants", "author": "Rajith90", "createdAt": "2020-05-13T10:31:48Z", "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/protobuf/ProtoOpenAPI.java", "diffHunk": "@@ -104,7 +106,14 @@ void addOpenAPIPath(String path, String[] scopes, String throttlingTier) {\n         if (openAPI.getPaths() == null) {\n             openAPI.setPaths(new Paths());\n         }\n-        openAPI.getPaths().addPathItem(path, pathItem);\n+        //as Responses object is mandatory\n+        ApiResponse apiResponse = new ApiResponse();\n+        apiResponse.setDescription(\"gRPC response\");", "originalCommit": "e8c1877c218814f7c0177ead2adb9e11c3912a12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM1NTM2MA==", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r432355360", "bodyText": "This is a description. So do we still need to have a constant?", "author": "VirajSalaka", "createdAt": "2020-05-29T09:08:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzEwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MjYyNA==", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r433042624", "bodyText": "updated via abc899d", "author": "VirajSalaka", "createdAt": "2020-06-01T05:04:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzEwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzI1NA==", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r424337254", "bodyText": "Lets use http constant status codes", "author": "Rajith90", "createdAt": "2020-05-13T10:32:06Z", "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/protobuf/ProtoOpenAPI.java", "diffHunk": "@@ -104,7 +106,14 @@ void addOpenAPIPath(String path, String[] scopes, String throttlingTier) {\n         if (openAPI.getPaths() == null) {\n             openAPI.setPaths(new Paths());\n         }\n-        openAPI.getPaths().addPathItem(path, pathItem);\n+        //as Responses object is mandatory\n+        ApiResponse apiResponse = new ApiResponse();\n+        apiResponse.setDescription(\"gRPC response\");\n+        ApiResponses apiResponses = new ApiResponses();\n+        apiResponses.addApiResponse(\"200\", apiResponse);", "originalCommit": "e8c1877c218814f7c0177ead2adb9e11c3912a12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MjU5Ng==", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r433042596", "bodyText": "updated via abc899d", "author": "VirajSalaka", "createdAt": "2020-06-01T05:04:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzI1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzMxOQ==", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r424337319", "bodyText": "Lets use constants", "author": "Rajith90", "createdAt": "2020-05-13T10:32:14Z", "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/protobuf/ProtoOpenAPI.java", "diffHunk": "@@ -104,7 +106,14 @@ void addOpenAPIPath(String path, String[] scopes, String throttlingTier) {\n         if (openAPI.getPaths() == null) {\n             openAPI.setPaths(new Paths());\n         }\n-        openAPI.getPaths().addPathItem(path, pathItem);\n+        //as Responses object is mandatory\n+        ApiResponse apiResponse = new ApiResponse();\n+        apiResponse.setDescription(\"gRPC response\");\n+        ApiResponses apiResponses = new ApiResponses();\n+        apiResponses.addApiResponse(\"200\", apiResponse);\n+        operation.setResponses(apiResponses);\n+        //append forward slash to preserve openAPI syntax\n+        openAPI.getPaths().addPathItem(\"/\" + path, pathItem);", "originalCommit": "e8c1877c218814f7c0177ead2adb9e11c3912a12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MjU2Nw==", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r433042567", "bodyText": "updated via abc899d", "author": "VirajSalaka", "createdAt": "2020-06-01T05:04:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNzMxOQ=="}], "type": "inlineReview"}, {"oid": "abc899d72f6c15dc0996fa057fe99cc26ffb10af", "url": "https://github.com/wso2/product-microgateway/commit/abc899d72f6c15dc0996fa057fe99cc26ffb10af", "message": "provide constants for the values required while converting proto to openAPI", "committedDate": "2020-05-29T19:40:14Z", "type": "commit"}, {"oid": "e70ab11581f6e9def683b945c29635c27c8769f1", "url": "https://github.com/wso2/product-microgateway/commit/e70ab11581f6e9def683b945c29635c27c8769f1", "message": "Merge branch 'master' into grpc-openapi-fix", "committedDate": "2020-05-29T19:42:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MDI2MQ==", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r433040261", "bodyText": "Wrong license year", "author": "Rajith90", "createdAt": "2020-06-01T04:51:55Z", "path": "components/micro-gateway-cli/src/main/java/org/wso2/apimgt/gateway/cli/constants/ProtoToOpenAPIConstants.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright (c) 2018, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "originalCommit": "e70ab11581f6e9def683b945c29635c27c8769f1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MjUxOQ==", "url": "https://github.com/wso2/product-microgateway/pull/1214#discussion_r433042519", "bodyText": "updated via 22f9e10", "author": "VirajSalaka", "createdAt": "2020-06-01T05:04:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MDI2MQ=="}], "type": "inlineReview"}, {"oid": "22f9e104d7bcd0e0652a2a82c725ff449820527f", "url": "https://github.com/wso2/product-microgateway/commit/22f9e104d7bcd0e0652a2a82c725ff449820527f", "message": "update license header", "committedDate": "2020-06-01T05:02:17Z", "type": "commit"}]}