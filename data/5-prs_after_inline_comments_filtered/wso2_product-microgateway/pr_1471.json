{"pr_number": 1471, "pr_title": "Improvements to jwt validation", "pr_createdAt": "2020-11-06T12:30:14Z", "pr_url": "https://github.com/wso2/product-microgateway/pull/1471", "timeline": [{"oid": "18ceaa37772e518ceb32f55fe88b786a7890d751", "url": "https://github.com/wso2/product-microgateway/commit/18ceaa37772e518ceb32f55fe88b786a7890d751", "message": "filter: config: Use singleton instance", "committedDate": "2020-11-05T11:23:03Z", "type": "commit"}, {"oid": "fcd4e98284cfa3eb5c0c9cf4665a27567644451a", "url": "https://github.com/wso2/product-microgateway/commit/fcd4e98284cfa3eb5c0c9cf4665a27567644451a", "message": "filter: Make trustore configurable", "committedDate": "2020-11-06T05:55:06Z", "type": "commit"}, {"oid": "cde3123c27b5f953321b59724fd5dbd90bfec449", "url": "https://github.com/wso2/product-microgateway/commit/cde3123c27b5f953321b59724fd5dbd90bfec449", "message": "filter: Remove unused code", "committedDate": "2020-11-06T09:48:44Z", "type": "commit"}, {"oid": "dcfde3635b5adb45c179b03cb85c3231367a8609", "url": "https://github.com/wso2/product-microgateway/commit/dcfde3635b5adb45c179b03cb85c3231367a8609", "message": "filter: conf: Make filter chain configurable\n\nFilter chain config file was build into the filter chain jar. It\nmakes it impossible to configure after building the container.\nMoved the config file to a configurable location under FILTER_HOME\nand enabled a docker file mount to get over this limitation", "committedDate": "2020-11-06T12:39:08Z", "type": "commit"}, {"oid": "a84a28c4f876efa85b6c9db93daeebf51493eea2", "url": "https://github.com/wso2/product-microgateway/commit/a84a28c4f876efa85b6c9db93daeebf51493eea2", "message": "filter: Add multiple keymanager support\n\nAPIM supports multiple key managers and keymapping events are\ncached per each keymanager. In mgw, keymanager is mapped to the\njwt issuer. name property is added to the jwt issuer config to\nhold the KM name. This should be equal to APIM's KM name", "committedDate": "2020-11-06T12:39:13Z", "type": "commit"}, {"oid": "51e84427af92394e2ea39b64e754d682eb8bf032", "url": "https://github.com/wso2/product-microgateway/commit/51e84427af92394e2ea39b64e754d682eb8bf032", "message": "build: Stop build on failure", "committedDate": "2020-11-06T12:39:13Z", "type": "commit"}, {"oid": "51e84427af92394e2ea39b64e754d682eb8bf032", "url": "https://github.com/wso2/product-microgateway/commit/51e84427af92394e2ea39b64e754d682eb8bf032", "message": "build: Stop build on failure", "committedDate": "2020-11-06T12:39:13Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODczNTAzMw==", "url": "https://github.com/wso2/product-microgateway/pull/1471#discussion_r518735033", "bodyText": "Is it better to have environmental variable or a system variable? In the ballerina gateway, we used system.GetProperty() method to assign this. But in the control plane implementation, the environmental variable is used as there is no such concept in golang.", "author": "VirajSalaka", "createdAt": "2020-11-06T12:58:55Z", "path": "filter-core/src/main/java/org/wso2/micro/gateway/filter/core/config/MGWConfiguration.java", "diffHunk": "@@ -76,9 +76,9 @@ public static MGWConfiguration getInstance() throws MGWException {\n      * Initialize the configuration provider class by reading the Mgw Configuration file.\n      */\n     private void init() throws KeyStoreException {\n-        InputStream configFile = MGWConfiguration.class.getClassLoader().getResourceAsStream(\"mgw-config.toml\");\n-        configToml = new Toml().read(configFile);\n-\n+        String home = System.getenv(\"FILTER_HOME\");", "originalCommit": "51e84427af92394e2ea39b64e754d682eb8bf032", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU0MzUyOA==", "url": "https://github.com/wso2/product-microgateway/pull/1471#discussion_r519543528", "bodyText": "overriding ENV is easier when working with containers and local filter chain bootup. thats why I made it a ENV", "author": "praminda", "createdAt": "2020-11-09T04:12:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODczNTAzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU0Njk1NA==", "url": "https://github.com/wso2/product-microgateway/pull/1471#discussion_r519546954", "bodyText": "Ack", "author": "VirajSalaka", "createdAt": "2020-11-09T04:30:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODczNTAzMw=="}], "type": "inlineReview"}]}