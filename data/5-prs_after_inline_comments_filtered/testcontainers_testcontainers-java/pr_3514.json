{"pr_number": 3514, "pr_title": "Always use toAbsolutePath() for MountableFile", "pr_createdAt": "2020-11-23T16:18:32Z", "pr_url": "https://github.com/testcontainers/testcontainers-java/pull/3514", "timeline": [{"oid": "c143fbef4aaf14b045b0b20e3cb49cdd665357df", "url": "https://github.com/testcontainers/testcontainers-java/commit/c143fbef4aaf14b045b0b20e3cb49cdd665357df", "message": "Always use toAbsolutePath() for MountableFile.\n\nFixes #3493", "committedDate": "2020-11-23T16:15:30Z", "type": "commit"}, {"oid": "4738e07baf046b246e767fc6b4b3e365aedeabb9", "url": "https://github.com/testcontainers/testcontainers-java/commit/4738e07baf046b246e767fc6b4b3e365aedeabb9", "message": "Enforce Unix style path in DockerComposeContainer and when adding bind mount.", "committedDate": "2020-11-23T17:29:45Z", "type": "commit"}, {"oid": "4738e07baf046b246e767fc6b4b3e365aedeabb9", "url": "https://github.com/testcontainers/testcontainers-java/commit/4738e07baf046b246e767fc6b4b3e365aedeabb9", "message": "Enforce Unix style path in DockerComposeContainer and when adding bind mount.", "committedDate": "2020-11-23T17:29:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU0OTkzOA==", "url": "https://github.com/testcontainers/testcontainers-java/pull/3514#discussion_r532549938", "bodyText": "I am not too sure we should do it here. Future versions of Docker for Windows may become strict about the path (C:\\foo\\bar is good, /mnt/c/foo/bar is bad)\nI would just ensure that we pass it as C:\\ and not C:/", "author": "bsideup", "createdAt": "2020-11-30T12:08:06Z", "path": "core/src/main/java/org/testcontainers/containers/GenericContainer.java", "diffHunk": "@@ -946,7 +946,7 @@ public void addEnv(String key, String value) {\n     public void addFileSystemBind(final String hostPath, final String containerPath, final BindMode mode, final SelinuxContext selinuxContext) {\n \n         final MountableFile mountableFile = MountableFile.forHostPath(hostPath);\n-        binds.add(new Bind(mountableFile.getResolvedPath(), new Volume(containerPath), mode.accessMode, selinuxContext.selContext));\n+        binds.add(new Bind(mountableFile.getUnixFilesystemPath(), new Volume(containerPath), mode.accessMode, selinuxContext.selContext));", "originalCommit": "4738e07baf046b246e767fc6b4b3e365aedeabb9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU5NTUyNQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/3514#discussion_r532595525", "bodyText": "It translates into /c/foo/bar btw.\n/mnt/c/foo/bar would be for cross mounting from within WSL2.", "author": "kiview", "createdAt": "2020-11-30T13:28:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU0OTkzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU5ODQzOA==", "url": "https://github.com/testcontainers/testcontainers-java/pull/3514#discussion_r532598438", "bodyText": "Ooops, sorry, my memory failed me :) But nevertheless, I would let Docker make the decision on how to translate C:\\foo\\bar into a valid bind", "author": "bsideup", "createdAt": "2020-11-30T13:32:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU0OTkzOA=="}], "type": "inlineReview"}, {"oid": "da5e427cf12e5ff76ac1140a5fa9e2faa7e02a81", "url": "https://github.com/testcontainers/testcontainers-java/commit/da5e427cf12e5ff76ac1140a5fa9e2faa7e02a81", "message": "Only translate Windows path to Unix path if it looks like a socket mount", "committedDate": "2020-11-30T16:38:27Z", "type": "commit"}, {"oid": "676c4096d60663ba1a7e47f54f4df2fbb6fe72a7", "url": "https://github.com/testcontainers/testcontainers-java/commit/676c4096d60663ba1a7e47f54f4df2fbb6fe72a7", "message": "Construct MountableFile conditionally on Windows", "committedDate": "2020-11-30T17:23:52Z", "type": "commit"}, {"oid": "3e4066a9d773e8f2bb54de9627ae042640213cd8", "url": "https://github.com/testcontainers/testcontainers-java/commit/3e4066a9d773e8f2bb54de9627ae042640213cd8", "message": "Remove comment", "committedDate": "2020-11-30T17:24:33Z", "type": "commit"}, {"oid": "ac925964d963a831e00c3a29bb898ffb9bc281ec", "url": "https://github.com/testcontainers/testcontainers-java/commit/ac925964d963a831e00c3a29bb898ffb9bc281ec", "message": "Don't use MountableFile on Windows when mounting Docker socket", "committedDate": "2020-11-30T18:32:30Z", "type": "commit"}, {"oid": "f0fc85e6a84bbe9b5413d80d6fb72152df0f468e", "url": "https://github.com/testcontainers/testcontainers-java/commit/f0fc85e6a84bbe9b5413d80d6fb72152df0f468e", "message": "Move unix path conversion into ContainerisedDockerCompose class", "committedDate": "2020-12-10T20:36:57Z", "type": "commit"}, {"oid": "4f97685b7ecbacf28281bc6a76863ed7c70ead1e", "url": "https://github.com/testcontainers/testcontainers-java/commit/4f97685b7ecbacf28281bc6a76863ed7c70ead1e", "message": "Merge branch 'master' into windows-bind-path", "committedDate": "2020-12-11T11:22:35Z", "type": "commit"}]}