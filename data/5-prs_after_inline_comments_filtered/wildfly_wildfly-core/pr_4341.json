{"pr_number": 4341, "pr_title": "[WFCORE-5095] Add the ability to make use of an automatically generated self-signed certificate with Elytron", "pr_createdAt": "2020-09-22T20:03:56Z", "pr_url": "https://github.com/wildfly/wildfly-core/pull/4341", "timeline": [{"oid": "284d538ca5867efc9fe6927a2d24651d8eaeb3dd", "url": "https://github.com/wildfly/wildfly-core/commit/284d538ca5867efc9fe6927a2d24651d8eaeb3dd", "message": "[WFCORE-5095] Add server-ssl-context configuration to the default config", "committedDate": "2020-09-23T16:05:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDQyNDEyMg==", "url": "https://github.com/wildfly/wildfly-core/pull/4341#discussion_r520424122", "bodyText": "Not a reason to delay the feature as this is private so exposure is limited but should a class such as this be a utility in the Elytron project?", "author": "darranl", "createdAt": "2020-11-10T09:44:22Z", "path": "elytron/src/main/java/org/wildfly/extension/elytron/SSLDefinitions.java", "diffHunk": "@@ -1017,6 +1027,110 @@ public String chooseEngineServerAlias(String keyType, Principal[] issuers, SSLEn\n         }\n     }\n \n+    private static class LazyDelegatingKeyManager extends DelegatingKeyManager {", "originalCommit": "061ec72025ed591821f82ee3c371c13ba590c365", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDQyNDU3NA==", "url": "https://github.com/wildfly/wildfly-core/pull/4341#discussion_r520424574", "bodyText": "Ah I see it is MSC aware.", "author": "darranl", "createdAt": "2020-11-10T09:45:01Z", "path": "elytron/src/main/java/org/wildfly/extension/elytron/SSLDefinitions.java", "diffHunk": "@@ -1017,6 +1027,110 @@ public String chooseEngineServerAlias(String keyType, Principal[] issuers, SSLEn\n         }\n     }\n \n+    private static class LazyDelegatingKeyManager extends DelegatingKeyManager {\n+        private ModifiableKeyStoreService keyStoreService;\n+        private char[] password;\n+        private KeyManagerFactory keyManagerFactory;\n+        private String generateSelfSignedCertificateHostName;\n+        private String aliasFilter;\n+        private volatile boolean init = false;\n+\n+        private LazyDelegatingKeyManager(ModifiableKeyStoreService keyStoreService, char[] password, KeyManagerFactory keyManagerFactory,\n+                                         String generateSelfSignedCertificateHostName, String aliasFilter) {\n+            this.keyStoreService = keyStoreService;\n+            this.password = password;\n+            this.keyManagerFactory = keyManagerFactory;\n+            this.generateSelfSignedCertificateHostName = generateSelfSignedCertificateHostName;\n+            this.aliasFilter = aliasFilter;\n+        }\n+\n+        private void doInit() {\n+            if(! init) {\n+                synchronized (this) {\n+                    if(! init) {\n+                        try {\n+                            ((KeyStoreService) keyStoreService).generateAndSaveSelfSignedCertificate(generateSelfSignedCertificateHostName, password);", "originalCommit": "061ec72025ed591821f82ee3c371c13ba590c365", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0f103c4310ffbf2e737338a046f122207e1f810e", "url": "https://github.com/wildfly/wildfly-core/commit/0f103c4310ffbf2e737338a046f122207e1f810e", "message": "[WFCORE-5095] Add the ability to make use of an automatically generated self-signed certificate with Elytron", "committedDate": "2020-11-10T20:53:03Z", "type": "commit"}, {"oid": "20123ab2fe7d0c676f63cb4b8bf1c855817a1a55", "url": "https://github.com/wildfly/wildfly-core/commit/20123ab2fe7d0c676f63cb4b8bf1c855817a1a55", "message": "[WFCORE-5095] Add server-ssl-context configuration to the default config", "committedDate": "2020-11-10T20:53:08Z", "type": "commit"}, {"oid": "20123ab2fe7d0c676f63cb4b8bf1c855817a1a55", "url": "https://github.com/wildfly/wildfly-core/commit/20123ab2fe7d0c676f63cb4b8bf1c855817a1a55", "message": "[WFCORE-5095] Add server-ssl-context configuration to the default config", "committedDate": "2020-11-10T20:53:08Z", "type": "forcePushed"}]}