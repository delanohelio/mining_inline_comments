{"pr_number": 140, "pr_title": "DEV-1153 Add HG 38 Support", "pr_createdAt": "2020-03-19T13:38:20Z", "pr_url": "https://github.com/hartwigmedical/pipeline5/pull/140", "timeline": [{"oid": "e2522f31fec9991d543768b1ef10b76765e25d99", "url": "https://github.com/hartwigmedical/pipeline5/commit/e2522f31fec9991d543768b1ef10b76765e25d99", "message": "Added enum for ref genome version (37 or 38)\nAdded ref genome specific resource classes\nAdded ref_genome_version to common pipeline arguments\nPass ref-genome resource class to Linx", "committedDate": "2020-02-27T00:57:41Z", "type": "commit"}, {"oid": "600faf5703793534a2b044f53e03a8a177d9d191", "url": "https://github.com/hartwigmedical/pipeline5/commit/600faf5703793534a2b044f53e03a8a177d9d191", "message": "Added other HG38 resource file names and interface methods", "committedDate": "2020-02-27T09:42:08Z", "type": "commit"}, {"oid": "7851dda35c26224d6ae2acb458a052f57f6273d6", "url": "https://github.com/hartwigmedical/pipeline5/commit/7851dda35c26224d6ae2acb458a052f57f6273d6", "message": "Merge branch 'master' of https://github.com/hartwigmedical/pipeline5 into DEV-1153", "committedDate": "2020-02-27T19:41:25Z", "type": "commit"}, {"oid": "9f8f51922d183a96f0f3e68ab789f9968ed3360d", "url": "https://github.com/hartwigmedical/pipeline5/commit/9f8f51922d183a96f0f3e68ab789f9968ed3360d", "message": "Set version-specific references, updated Amber", "committedDate": "2020-02-27T22:03:04Z", "type": "commit"}, {"oid": "d9efb3a4d07971eaa90cd4c3ee4d7bab6f23d8db", "url": "https://github.com/hartwigmedical/pipeline5/commit/d9efb3a4d07971eaa90cd4c3ee4d7bab6f23d8db", "message": "Updated cobalt to use ref-genome resource", "committedDate": "2020-02-27T22:06:07Z", "type": "commit"}, {"oid": "bb23ec66db90bb1866ac46a6b8838dc310235795", "url": "https://github.com/hartwigmedical/pipeline5/commit/bb23ec66db90bb1866ac46a6b8838dc310235795", "message": "Sage, GermlineCaller and SomaticCaller now use ref-genome resource", "committedDate": "2020-02-27T23:20:25Z", "type": "commit"}, {"oid": "ebcf49e8f711186e06d3aa8904b1ee9d17bdbdab", "url": "https://github.com/hartwigmedical/pipeline5/commit/ebcf49e8f711186e06d3aa8904b1ee9d17bdbdab", "message": "Converted VmAligner, SnpGenotype and Bachelor to use ref-genome resource files", "committedDate": "2020-02-27T23:36:35Z", "type": "commit"}, {"oid": "ceb6b71b74095a10448db24056ab254ae9b63395", "url": "https://github.com/hartwigmedical/pipeline5/commit/ceb6b71b74095a10448db24056ab254ae9b63395", "message": "Changed Resource to ResourceFiles to better represent its function", "committedDate": "2020-02-27T23:42:38Z", "type": "commit"}, {"oid": "4dac165ba1303e8b2648fc96b64dfa5d67eeb30f", "url": "https://github.com/hartwigmedical/pipeline5/commit/4dac165ba1303e8b2648fc96b64dfa5d67eeb30f", "message": "Converted all remaining refs to REFERENCE_GENOME_FASTA to the HG37 file", "committedDate": "2020-02-27T23:53:50Z", "type": "commit"}, {"oid": "20b67bb907c614bf578ecd5080cea61c5ef6f848", "url": "https://github.com/hartwigmedical/pipeline5/commit/20b67bb907c614bf578ecd5080cea61c5ef6f848", "message": "Removed DBSNP annotations", "committedDate": "2020-02-28T00:37:49Z", "type": "commit"}, {"oid": "38b402a7afce337bbbcac9274e75fab5ca4d02b9", "url": "https://github.com/hartwigmedical/pipeline5/commit/38b402a7afce337bbbcac9274e75fab5ca4d02b9", "message": "Merged and resolved conflict in ref genome import", "committedDate": "2020-03-03T18:53:58Z", "type": "commit"}, {"oid": "b482d5f15c14d718dd8e4218ac1158fe789e2b06", "url": "https://github.com/hartwigmedical/pipeline5/commit/b482d5f15c14d718dd8e4218ac1158fe789e2b06", "message": "Merge branch 'master' of https://github.com/hartwigmedical/pipeline5 into DEV-1153", "committedDate": "2020-03-05T10:32:08Z", "type": "commit"}, {"oid": "2a0a37a6e1252ba007a82f7331f70946ca5e750b", "url": "https://github.com/hartwigmedical/pipeline5/commit/2a0a37a6e1252ba007a82f7331f70946ca5e750b", "message": "Added ref genome version sub-directory to resource buckets", "committedDate": "2020-03-05T11:38:27Z", "type": "commit"}, {"oid": "870bba3f1bd372bfd55f8ea2924d5fede53a4ee5", "url": "https://github.com/hartwigmedical/pipeline5/commit/870bba3f1bd372bfd55f8ea2924d5fede53a4ee5", "message": "Merge branch 'master' of https://github.com/hartwigmedical/pipeline5 into DEV-1153", "committedDate": "2020-03-09T00:08:41Z", "type": "commit"}, {"oid": "6772da44b39c573b6015dcbc2fde9ce2d84fe680", "url": "https://github.com/hartwigmedical/pipeline5/commit/6772da44b39c573b6015dcbc2fde9ce2d84fe680", "message": "Parse ref genome version from command line", "committedDate": "2020-03-10T03:34:34Z", "type": "commit"}, {"oid": "de92d5cdd14d9fda6485679eca32ee28303b5251", "url": "https://github.com/hartwigmedical/pipeline5/commit/de92d5cdd14d9fda6485679eca32ee28303b5251", "message": "Merge branch 'master' of https://github.com/hartwigmedical/pipeline5 into DEV-1153", "committedDate": "2020-03-10T03:34:41Z", "type": "commit"}, {"oid": "4df43df7a2d26aca2542acd21ac09ec226c469fe", "url": "https://github.com/hartwigmedical/pipeline5/commit/4df43df7a2d26aca2542acd21ac09ec226c469fe", "message": "SnpEff database version now set in Resource Files for HG 37 & 38", "committedDate": "2020-03-10T23:46:33Z", "type": "commit"}, {"oid": "1a02a8affcc8fc7a59fc347fdfd02e020f7b3287", "url": "https://github.com/hartwigmedical/pipeline5/commit/1a02a8affcc8fc7a59fc347fdfd02e020f7b3287", "message": "Added gridss blacklist bed file to ref-genomic-specific list", "committedDate": "2020-03-12T00:12:14Z", "type": "commit"}, {"oid": "8c86f76c7aa15278c25157b7dbc9617f6b07e802", "url": "https://github.com/hartwigmedical/pipeline5/commit/8c86f76c7aa15278c25157b7dbc9617f6b07e802", "message": "Fixed HG38 version of SnpEff DB, added temporary ref-genome file rename for GRIDSS", "committedDate": "2020-03-13T03:29:55Z", "type": "commit"}, {"oid": "80f48bdb92ff4f0203489de1ed92957082a84611", "url": "https://github.com/hartwigmedical/pipeline5/commit/80f48bdb92ff4f0203489de1ed92957082a84611", "message": "Merged in lastest changes, resolved conflicts", "committedDate": "2020-03-19T09:46:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTAzMzY1OA==", "url": "https://github.com/hartwigmedical/pipeline5/pull/140#discussion_r395033658", "bodyText": "This necessary still? The resources in the image are static we should just be able to set this up exactly how we want it and remove the need for checking files and copying.", "author": "pauldwolfe", "createdAt": "2020-03-19T13:43:01Z", "path": "cluster/src/main/java/com/hartwig/pipeline/calling/structural/StructuralCaller.java", "diffHunk": "@@ -77,18 +81,27 @@ public String namespace() {\n         commands.add(new ExportVariableCommand(\"PATH\",\n                 format(\"${PATH}:%s\", dirname(new VersionedToolCommand(\"samtools\", \"samtools\", Versions.SAMTOOLS).asBash()))));\n \n+        // TEMP", "originalCommit": "80f48bdb92ff4f0203489de1ed92957082a84611", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a0c78bb5e9bf8194e506584f018abf5f4026fc11", "url": "https://github.com/hartwigmedical/pipeline5/commit/a0c78bb5e9bf8194e506584f018abf5f4026fc11", "message": "DEV-1153: Rename amber pon to loci to not be confused with other pons", "committedDate": "2020-03-19T23:50:14Z", "type": "commit"}, {"oid": "3ff5af231ebfa15795a894b1c94db95465154460", "url": "https://github.com/hartwigmedical/pipeline5/commit/3ff5af231ebfa15795a894b1c94db95465154460", "message": "DEV-1153: Added giabHighConfidenceBed to resource files", "committedDate": "2020-03-20T00:32:36Z", "type": "commit"}, {"oid": "eae436b6f49f3e4f5ec991caa26bc6c6466bc836", "url": "https://github.com/hartwigmedical/pipeline5/commit/eae436b6f49f3e4f5ec991caa26bc6c6466bc836", "message": "DEV-1153: Removed resource only used for old sage with no hg38 support", "committedDate": "2020-03-20T03:47:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQzMjExNw==", "url": "https://github.com/hartwigmedical/pipeline5/pull/140#discussion_r395432117", "bodyText": "Not sure why there is public static method. I think it makes more sense for the batch applications to access this via the ResourcesFilesFactory same as the normal pipeline.", "author": "jonbaber", "createdAt": "2020-03-20T04:11:34Z", "path": "cluster/src/main/java/com/hartwig/pipeline/resource/Hg37ResourceFiles.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package com.hartwig.pipeline.resource;\n+\n+import static com.hartwig.pipeline.resource.ResourceNames.AMBER_PON;\n+import static com.hartwig.pipeline.resource.ResourceNames.BEDS;\n+import static com.hartwig.pipeline.resource.ResourceNames.GC_PROFILE;\n+import static com.hartwig.pipeline.resource.ResourceNames.GRIDSS_REPEAT_MASKER_DB;\n+import static com.hartwig.pipeline.resource.ResourceNames.MAPPABILITY;\n+import static com.hartwig.pipeline.resource.ResourceNames.REFERENCE_GENOME;\n+import static com.hartwig.pipeline.resource.ResourceNames.SAGE;\n+import static com.hartwig.pipeline.resource.ResourceNames.SNPEFF;\n+\n+import com.hartwig.pipeline.execution.vm.VmDirectories;\n+\n+public class Hg37ResourceFiles implements ResourceFiles\n+{\n+    public static final String HG37_DIRECTORY = \"hg37\";\n+\n+    public RefGenomeVersion version() { return RefGenomeVersion.HG37; }\n+\n+    public String versionDirectory() { return HG37_DIRECTORY; }\n+\n+    private String formPath(String name, String file) {\n+        return String.format(\"%s/%s/%s/%s\", VmDirectories.RESOURCES, name, versionDirectory(), file);\n+    }\n+\n+    private static final String REF_GENOME_FASTA_HG37_FILE = \"Homo_sapiens.GRCh37.GATK.illumina.fasta\";\n+\n+    public static final String REFERENCE_GENOME_FASTA_HG37 =\n+            String.format(\"%s/%s/%s/%s\", VmDirectories.RESOURCES, REFERENCE_GENOME, HG37_DIRECTORY, REF_GENOME_FASTA_HG37_FILE);", "originalCommit": "eae436b6f49f3e4f5ec991caa26bc6c6466bc836", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI2ODIwNg==", "url": "https://github.com/hartwigmedical/pipeline5/pull/140#discussion_r405268206", "bodyText": "Removed this method", "author": "charlesshale", "createdAt": "2020-04-08T05:36:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQzMjExNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQzMjU2Nw==", "url": "https://github.com/hartwigmedical/pipeline5/pull/140#discussion_r395432567", "bodyText": "Start curly brace should be on previous line. Same for Hg38ResourceFiles.\nThe project root directory contains hmf_code_schema.xml if you want to have it done automatically for this project.", "author": "jonbaber", "createdAt": "2020-03-20T04:14:21Z", "path": "cluster/src/main/java/com/hartwig/pipeline/resource/Hg37ResourceFiles.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package com.hartwig.pipeline.resource;\n+\n+import static com.hartwig.pipeline.resource.ResourceNames.AMBER_PON;\n+import static com.hartwig.pipeline.resource.ResourceNames.BEDS;\n+import static com.hartwig.pipeline.resource.ResourceNames.GC_PROFILE;\n+import static com.hartwig.pipeline.resource.ResourceNames.GRIDSS_REPEAT_MASKER_DB;\n+import static com.hartwig.pipeline.resource.ResourceNames.MAPPABILITY;\n+import static com.hartwig.pipeline.resource.ResourceNames.REFERENCE_GENOME;\n+import static com.hartwig.pipeline.resource.ResourceNames.SAGE;\n+import static com.hartwig.pipeline.resource.ResourceNames.SNPEFF;\n+\n+import com.hartwig.pipeline.execution.vm.VmDirectories;\n+\n+public class Hg37ResourceFiles implements ResourceFiles\n+{", "originalCommit": "eae436b6f49f3e4f5ec991caa26bc6c6466bc836", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI2ODM1OA==", "url": "https://github.com/hartwigmedical/pipeline5/pull/140#discussion_r405268358", "bodyText": "Changed", "author": "charlesshale", "createdAt": "2020-04-08T05:36:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQzMjU2Nw=="}], "type": "inlineReview"}, {"oid": "dced2e3822fe5d676e17a5105a2bfdb661c6a96b", "url": "https://github.com/hartwigmedical/pipeline5/commit/dced2e3822fe5d676e17a5105a2bfdb661c6a96b", "message": "DEV-1153: Fix path", "committedDate": "2020-03-23T02:42:55Z", "type": "commit"}]}