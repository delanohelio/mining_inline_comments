{"pr_number": 207, "pr_title": "Enforce schema properties order in JsonBuilder so Pegasus schema and Avro schema properties would have deterministic order", "pr_createdAt": "2020-03-05T03:36:19Z", "pr_url": "https://github.com/linkedin/rest.li/pull/207", "timeline": [{"oid": "732bd43fe54787971d63c3871ed302fb762ca8eb", "url": "https://github.com/linkedin/rest.li/commit/732bd43fe54787971d63c3871ed302fb762ca8eb", "message": "enforce schema properties order in JsonBuilder so Pegasus schema and\nAvro schema properties would have deterministic order", "committedDate": "2020-03-05T03:03:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA5MTgyNA==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r388091824", "bodyText": "nit: import order", "author": "nickibi", "createdAt": "2020-03-05T05:58:55Z", "path": "data/src/main/java/com/linkedin/data/schema/JsonBuilder.java", "diffHunk": "@@ -23,12 +23,16 @@\n \n import java.io.IOException;\n import java.io.StringWriter;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.Comparator;\n import java.util.List;\n import java.util.Map;\n \n import com.fasterxml.jackson.core.JsonFactory;\n import com.fasterxml.jackson.core.JsonGenerator;\n import com.fasterxml.jackson.core.PrettyPrinter;\n+import java.util.stream.Collectors;", "originalCommit": "732bd43fe54787971d63c3871ed302fb762ca8eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA5MTkwNw==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r388091907", "bodyText": "nit: remove extra lines", "author": "nickibi", "createdAt": "2020-03-05T05:59:18Z", "path": "data/src/main/java/com/linkedin/data/codec/AbstractJacksonDataCodec.java", "diffHunk": "@@ -296,12 +296,20 @@ public void startMap(DataMap map) throws IOException\n       _generator.writeStartObject();\n     }\n \n+    @Override\n+    public Iterable<Map.Entry<String, Object>> orderMap(DataMap map)\n+    {\n+      return Data.orderMapEntries(map);\n+    }\n+\n     @Override\n     public void key(String key) throws IOException\n     {\n       _generator.writeFieldName(key);\n     }\n \n+\n+", "originalCommit": "732bd43fe54787971d63c3871ed302fb762ca8eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA5MzI4OQ==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r388093289", "bodyText": "I am curious about how this method is being called?", "author": "nickibi", "createdAt": "2020-03-05T06:05:09Z", "path": "data/src/main/java/com/linkedin/data/codec/AbstractJacksonDataCodec.java", "diffHunk": "@@ -296,12 +296,20 @@ public void startMap(DataMap map) throws IOException\n       _generator.writeStartObject();\n     }\n \n+    @Override\n+    public Iterable<Map.Entry<String, Object>> orderMap(DataMap map)", "originalCommit": "732bd43fe54787971d63c3871ed302fb762ca8eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a73e39d4e805a22d3528ac35d92591e3cc181ed5", "url": "https://github.com/linkedin/rest.li/commit/a73e39d4e805a22d3528ac35d92591e3cc181ed5", "message": "resolve ybi's comment", "committedDate": "2020-03-05T22:16:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEyNTM3NA==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389125374", "bodyText": "nit: I think you mean to say x_customAnnotation?", "author": "evanw555", "createdAt": "2020-03-06T20:22:28Z", "path": "data-avro/src/test/java/com/linkedin/data/avro/TestSchemaTranslator.java", "diffHunk": "@@ -1660,6 +1660,46 @@ public void testToAvroSchema_testTypeRefAnnotationPropagation(String schemaBefor\n               null,\n               null,\n               null\n+          },\n+          {\n+              \" { \" +\n+              \"   \\\"type\\\" : \\\"record\\\", \" +\n+              \"   \\\"name\\\" : \\\"Foo\\\", \" +\n+              \"   \\\"fields\\\" : [ { \" +\n+              \"     \\\"name\\\" : \\\"field1\\\", \" +\n+              \"     \\\"type\\\" : \\\"int\\\", \" +\n+              \"     \\\"b_customerAnnotation\\\" : \\\"f1\\\", \" +\n+              \"     \\\"c_customerAnnotation\\\" : \\\"f1\\\", \" +\n+              \"     \\\"a_customerAnnotation\\\" : \\\"f1\\\" \" +", "originalCommit": "a73e39d4e805a22d3528ac35d92591e3cc181ed5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ5NDE5Mw==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389494193", "bodyText": "yes sir.", "author": "junchuanwang", "createdAt": "2020-03-09T07:21:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEyNTM3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEyNjYzNw==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389126637", "bodyText": "The unit tests seems to imply this, however I'd like to confirm; this method is only for writing custom properties, right? Since this is a generic JsonBuilder, does it have any sense of what \"properties\" are? Or is this just for writing any generic subtree of the JSON object?", "author": "evanw555", "createdAt": "2020-03-06T20:25:28Z", "path": "data/src/main/java/com/linkedin/data/schema/JsonBuilder.java", "diffHunk": "@@ -282,7 +280,10 @@ public void writeProperties(Map<String, ?> value) throws IOException\n   {\n     if (value.isEmpty() == false)\n     {\n-      for (Map.Entry<String, ?> entry : value.entrySet())\n+      List<Map.Entry<String, ?>> orderedProperties =  value.entrySet().stream()", "originalCommit": "a73e39d4e805a22d3528ac35d92591e3cc181ed5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ5MTM3OA==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389491378", "bodyText": "this is just for \"writing  generic subtree of the JSON object\", any concerns?", "author": "junchuanwang", "createdAt": "2020-03-09T07:11:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEyNjYzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwMTQwMw==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389901403", "bodyText": "Would this affect the order in which all schema attributes are written, even non-custom properties? e.g. [namespace, name, type, fields] vs [type, fields, name, namespace]. Or are those written individually in the schema encoder? I'm concerned that this would affect the ordering of things that aren't custom properties", "author": "evanw555", "createdAt": "2020-03-09T19:07:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEyNjYzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwNzg2MQ==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389907861", "bodyText": "it shouldn't. non-customer properties are written using other code. This code only manage the properties, so all properties written as a trunk. shouldn't affect others", "author": "junchuanwang", "createdAt": "2020-03-09T19:20:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEyNjYzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ1NjM1NQ==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389456355", "bodyText": "This is not a good idea. The jackson codec is used for serializing data on the servers and making this change here will affect performance of services.", "author": "karthikbalasub", "createdAt": "2020-03-09T04:13:07Z", "path": "data/src/main/java/com/linkedin/data/codec/AbstractJacksonDataCodec.java", "diffHunk": "@@ -296,6 +296,12 @@ public void startMap(DataMap map) throws IOException\n       _generator.writeStartObject();\n     }\n \n+    @Override\n+    public Iterable<Map.Entry<String, Object>> orderMap(DataMap map)", "originalCommit": "a73e39d4e805a22d3528ac35d92591e3cc181ed5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgwODA1Mg==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389808052", "bodyText": "Update code ,can you please check? Now I limit the scope of the change so it only applies when writing properties.", "author": "junchuanwang", "createdAt": "2020-03-09T16:29:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ1NjM1NQ=="}], "type": "inlineReview"}, {"oid": "fe18d2616d1cfef8b80d1ea373153a44aec7f16c", "url": "https://github.com/linkedin/rest.li/commit/fe18d2616d1cfef8b80d1ea373153a44aec7f16c", "message": "Address Karthik comments. Now the AbstractJacksonDataCodec.java change only applies when \"writing properties\"", "committedDate": "2020-03-09T16:28:34Z", "type": "commit"}, {"oid": "3c27157aa9cf3d2afb021d5e1fda9944883aca8a", "url": "https://github.com/linkedin/rest.li/commit/3c27157aa9cf3d2afb021d5e1fda9944883aca8a", "message": "rename some of parameters", "committedDate": "2020-03-09T16:38:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgxNTMyNg==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389815326", "bodyText": "space before ?", "author": "karthikbalasub", "createdAt": "2020-03-09T16:41:08Z", "path": "data/src/main/java/com/linkedin/data/codec/AbstractJacksonDataCodec.java", "diffHunk": "@@ -133,7 +133,18 @@ protected void writeObject(Object object, JsonGenerator generator) throws IOExce\n \n   protected Data.TraverseCallback createTraverseCallback(JsonGenerator generator)\n   {\n-    return new JacksonTraverseCallback(generator);\n+    return createTraverseCallback(generator, false);\n+  }\n+\n+  /**\n+   * Create {@link JacksonTraverseCallback} instance for Data object traverse\n+   * @param generator JsonGenerator\n+   * @param traverseMapBySortedKeyOrder indicate whether want the callBack to traverse the data map within data object using the sorted map key order\n+   * @return\n+   */\n+  protected Data.TraverseCallback createTraverseCallback(JsonGenerator generator, boolean traverseMapBySortedKeyOrder)\n+  {\n+    return traverseMapBySortedKeyOrder? new JacksonTraverseCallbackMapKeyOrdered(generator): new JacksonTraverseCallback(generator);", "originalCommit": "3c27157aa9cf3d2afb021d5e1fda9944883aca8a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgxNTk3NQ==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389815975", "bodyText": "mapKeyOrdered -> orderMapsByKey", "author": "karthikbalasub", "createdAt": "2020-03-09T16:42:11Z", "path": "data/src/main/java/com/linkedin/data/codec/AbstractJacksonDataCodec.java", "diffHunk": "@@ -213,12 +224,35 @@ public DataList readList(InputStream in) throws IOException\n     return parse(_factory.createParser(in), mesg, locationMap);\n   }\n \n-  public void objectToJsonGenerator(Object object, JsonGenerator generator) throws IOException\n+  /**\n+   * Convert an object to Json format representation.\n+   * @param object the object that needs to be converted\n+   * @param generator the generator that could generate Json output based on the object\n+   * @param mapKeyOrdered if the object contains map element (which could be nested map), can set this flag to order the\n+   *                      map entries in the output according to sorted map key.\n+   * @throws IOException\n+   */\n+  public void objectToJsonGenerator(Object object, JsonGenerator generator, boolean mapKeyOrdered) throws IOException", "originalCommit": "3c27157aa9cf3d2afb021d5e1fda9944883aca8a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzMzM4MA==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389833380", "bodyText": "Do not change public APIs. Keep this one and add the second API", "author": "karthikbalasub", "createdAt": "2020-03-09T17:09:52Z", "path": "data/src/main/java/com/linkedin/data/codec/AbstractJacksonDataCodec.java", "diffHunk": "@@ -213,12 +224,35 @@ public DataList readList(InputStream in) throws IOException\n     return parse(_factory.createParser(in), mesg, locationMap);\n   }\n \n-  public void objectToJsonGenerator(Object object, JsonGenerator generator) throws IOException", "originalCommit": "3c27157aa9cf3d2afb021d5e1fda9944883aca8a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg0Mjc4Nw==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389842787", "bodyText": "Good catch. Fail to notice it was public", "author": "junchuanwang", "createdAt": "2020-03-09T17:24:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzMzM4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzNDQ2Mg==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389834462", "bodyText": "JacksonTraverseCallback -> Traverse.Callback\nAvoid implementation details in the java doc", "author": "karthikbalasub", "createdAt": "2020-03-09T17:11:37Z", "path": "data/src/main/java/com/linkedin/data/codec/AbstractJacksonDataCodec.java", "diffHunk": "@@ -133,7 +133,18 @@ protected void writeObject(Object object, JsonGenerator generator) throws IOExce\n \n   protected Data.TraverseCallback createTraverseCallback(JsonGenerator generator)\n   {\n-    return new JacksonTraverseCallback(generator);\n+    return createTraverseCallback(generator, false);\n+  }\n+\n+  /**\n+   * Create {@link JacksonTraverseCallback} instance for Data object traverse", "originalCommit": "3c27157aa9cf3d2afb021d5e1fda9944883aca8a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg0NTM4Nw==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389845387", "bodyText": "I wouldn't say I totally agree with you in this one. But I made the change according to your suggestion/\nThe reason is that this method take in \"generator\" as input parameter in order to return Data.TraverseCallback, this is already very implementation specific and very detailed implementation description. Something unavoidable.", "author": "junchuanwang", "createdAt": "2020-03-09T17:28:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzNDQ2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzNzA0NQ==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389837045", "bodyText": "If true, then map elements in the object (can be the object itself or its nested elements) will be sorted by Key in the generated Json.", "author": "karthikbalasub", "createdAt": "2020-03-09T17:15:39Z", "path": "data/src/main/java/com/linkedin/data/codec/AbstractJacksonDataCodec.java", "diffHunk": "@@ -213,12 +224,35 @@ public DataList readList(InputStream in) throws IOException\n     return parse(_factory.createParser(in), mesg, locationMap);\n   }\n \n-  public void objectToJsonGenerator(Object object, JsonGenerator generator) throws IOException\n+  /**\n+   * Convert an object to Json format representation.\n+   * @param object the object that needs to be converted\n+   * @param generator the generator that could generate Json output based on the object\n+   * @param mapKeyOrdered if the object contains map element (which could be nested map), can set this flag to order the", "originalCommit": "3c27157aa9cf3d2afb021d5e1fda9944883aca8a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzODI4Mw==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389838283", "bodyText": "Why do you need this class? Can't you add a flag in JacksonTraverseCallback and a second constructor to set it?", "author": "karthikbalasub", "createdAt": "2020-03-09T17:17:32Z", "path": "data/src/main/java/com/linkedin/data/codec/AbstractJacksonDataCodec.java", "diffHunk": "@@ -213,12 +224,35 @@ public DataList readList(InputStream in) throws IOException\n     return parse(_factory.createParser(in), mesg, locationMap);\n   }\n \n-  public void objectToJsonGenerator(Object object, JsonGenerator generator) throws IOException\n+  /**\n+   * Convert an object to Json format representation.\n+   * @param object the object that needs to be converted\n+   * @param generator the generator that could generate Json output based on the object\n+   * @param mapKeyOrdered if the object contains map element (which could be nested map), can set this flag to order the\n+   *                      map entries in the output according to sorted map key.\n+   * @throws IOException\n+   */\n+  public void objectToJsonGenerator(Object object, JsonGenerator generator, boolean mapKeyOrdered) throws IOException\n   {\n-    Data.TraverseCallback callback = createTraverseCallback(generator);\n+    Data.TraverseCallback callback = createTraverseCallback(generator, mapKeyOrdered);\n     Data.traverse(object, callback);\n   }\n \n+  public static class JacksonTraverseCallbackMapKeyOrdered extends JacksonTraverseCallback", "originalCommit": "3c27157aa9cf3d2afb021d5e1fda9944883aca8a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg1NTg5MA==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389855890", "bodyText": "Because I need to override the\norderMap method in the new class.\nI don't think I got you. How do I set the override method in the constructor?", "author": "junchuanwang", "createdAt": "2020-03-09T17:45:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzODI4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg5NDk4Nw==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389894987", "bodyText": "after off line discussion, adopted the suggestion", "author": "junchuanwang", "createdAt": "2020-03-09T18:55:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzODI4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzODgwOQ==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389838809", "bodyText": "document that this applies to object also.", "author": "karthikbalasub", "createdAt": "2020-03-09T17:18:23Z", "path": "data/src/main/java/com/linkedin/data/schema/JsonBuilder.java", "diffHunk": "@@ -269,11 +267,24 @@ public void writeMapField(String fieldName, Map<String, ?> value, boolean requir\n    */\n   public void writeData(Object object) throws IOException\n   {\n-    _jacksonDataCodec.objectToJsonGenerator(object, _jsonGenerator);\n+    _jacksonDataCodec.objectToJsonGenerator(object, _jsonGenerator, false);\n   }\n \n+  /**\n+   * Write Data object. But if the Data Object contains DataMap, the result would output the map entries using sorted key order.", "originalCommit": "3c27157aa9cf3d2afb021d5e1fda9944883aca8a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "521e8eafeac0b2c69408c56dcb19cfa52c90025b", "url": "https://github.com/linkedin/rest.li/commit/521e8eafeac0b2c69408c56dcb19cfa52c90025b", "message": "Address some of the Karthi's comment", "committedDate": "2020-03-09T17:46:47Z", "type": "commit"}, {"oid": "42e5902b04e33ad0837509cdcce15e67a0df1ba5", "url": "https://github.com/linkedin/rest.li/commit/42e5902b04e33ad0837509cdcce15e67a0df1ba5", "message": "Delete JacksonTraverseCallbackMapKeyOrdered class", "committedDate": "2020-03-09T18:09:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwNTU2Nw==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389905567", "bodyText": "You can revert this change now.", "author": "karthikbalasub", "createdAt": "2020-03-09T19:15:34Z", "path": "data/src/main/java/com/linkedin/data/template/JacksonDataTemplateCodec.java", "diffHunk": "@@ -87,7 +87,7 @@ protected void dataTemplateToJsonGenerator(Object data,\n     }\n     else\n     {\n-      objectToJsonGenerator(data, generator);\n+      objectToJsonGenerator(data, generator, false);", "originalCommit": "42e5902b04e33ad0837509cdcce15e67a0df1ba5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwOTEyOQ==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389909129", "bodyText": "No need for this change.", "author": "nickibi", "createdAt": "2020-03-09T19:22:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwNTU2Nw=="}], "type": "inlineReview"}, {"oid": "08bb10e52f387ee6ab68e2509aeba71b368f02b0", "url": "https://github.com/linkedin/rest.li/commit/08bb10e52f387ee6ab68e2509aeba71b368f02b0", "message": "revert JacksonDataTemplateCodec.java", "committedDate": "2020-03-09T19:22:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg5NDU3MQ==", "url": "https://github.com/linkedin/rest.li/pull/207#discussion_r389894571", "bodyText": "nit: space before true", "author": "nickibi", "createdAt": "2020-03-09T18:54:17Z", "path": "data/src/main/java/com/linkedin/data/schema/JsonBuilder.java", "diffHunk": "@@ -269,11 +267,25 @@ public void writeMapField(String fieldName, Map<String, ?> value, boolean requir\n    */\n   public void writeData(Object object) throws IOException\n   {\n-    _jacksonDataCodec.objectToJsonGenerator(object, _jsonGenerator);\n+    _jacksonDataCodec.objectToJsonGenerator(object, _jsonGenerator, false);\n   }\n \n+  /**\n+   * Write Data object. But if the Data Object contains DataMap or itself is a DataMap,\n+   * the result would output the map entries using sorted key order.\n+   *\n+   * @param object is the Data object to write.\n+   */\n+  public void writeDataWithMapEntriesSorted(Object object) throws IOException\n+  {\n+    _jacksonDataCodec.objectToJsonGenerator(object, _jsonGenerator,true);", "originalCommit": "42e5902b04e33ad0837509cdcce15e67a0df1ba5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "54e7242f2a75aa26e90f73fb7aa8942d7c7e1cae", "url": "https://github.com/linkedin/rest.li/commit/54e7242f2a75aa26e90f73fb7aa8942d7c7e1cae", "message": "Address yingjie's comment", "committedDate": "2020-03-09T19:24:24Z", "type": "commit"}, {"oid": "4a862f4f981188373cf9ca331e6cec7f5a1817ec", "url": "https://github.com/linkedin/rest.li/commit/4a862f4f981188373cf9ca331e6cec7f5a1817ec", "message": "Rvert one line", "committedDate": "2020-03-09T19:27:45Z", "type": "commit"}, {"oid": "f22a5d19dd263be19df6d8084b3d9532cd7b8003", "url": "https://github.com/linkedin/rest.li/commit/f22a5d19dd263be19df6d8084b3d9532cd7b8003", "message": "Merge branch 'master' into avro_schema_property_orders", "committedDate": "2020-03-10T02:09:45Z", "type": "commit"}]}