{"pr_number": 474, "pr_title": "Update generators to optionally generate files with lower case path.", "pr_createdAt": "2020-11-09T22:13:10Z", "pr_url": "https://github.com/linkedin/rest.li/pull/474", "timeline": [{"oid": "898d44e722b685ff63bde29af2887dead13a049c", "url": "https://github.com/linkedin/rest.li/commit/898d44e722b685ff63bde29af2887dead13a049c", "message": "Update generators to optionally generate files with lower case path.\n\nIssue:\nWas working on two different file systems and noticed that after a rync,\nI was getting a \"DuplicateClassException\" on my Linux system - there\nwere duplicate files in similar paths.\n\nTypically a Mac/Windows system will have a case insensitive file system,\nwhereas a Linux system will have a case sensitive file system. For a\ncase insensitive file system, \"~/com/astro\" and \"~/com/ASTRO\" point to\nthe same folder. For a case sensitive file system, \"~/com/astro\" and\n\"~/com/ASTRO\" will be different folders.\n\n Example:\n   File1: namespace = com.astro.file1\n   File2: namespace = com.aSTRo.file2\n\n   The following files would be generated with the path specified.\n   1) Case insensitive (if file1 is generated first):\n       com/astro/file1\n                /file2\n   2) Case insensitive (if file2 is generated first):\n       com/aSTRo/file1\n                /file2\n   3) Case sensitive:\n       com/astro/file1\n           aSTRo/file2\n\nResolution:\nAdd abililty for generators to generate paths with lower\ncase path. Updated the TempalteSpecGenerator,\nPegasusDataTemplateGenerator, RestRequestBuilderGenerator, and\nJavaRequestBuilderGenerator.\n\nThe Gradle Tasks of GenerateDataTemplateTask and\nGenerateRestClientTask have been modified to have an optional input property\nto generate teh lower case path.\n\nTesting:\nCreated unit tests to validate path's on both linux and mac systems\nwhere the file system were case sensitive and case insensitive\nrespectively.", "committedDate": "2020-11-09T22:22:45Z", "type": "forcePushed"}, {"oid": "77787498723ac4be751697cd49f01b1518a6fd32", "url": "https://github.com/linkedin/rest.li/commit/77787498723ac4be751697cd49f01b1518a6fd32", "message": "Update generators to optionally generate files with lower case path.\n\nIssue:\nWas working on two different file systems and noticed that after a rync,\nI was getting a \"DuplicateClassException\" on my Linux system - there\nwere duplicate files in similar paths.\n\nTypically a Mac/Windows system will have a case insensitive file system,\nwhereas a Linux system will have a case sensitive file system. For a\ncase insensitive file system, \"~/com/astro\" and \"~/com/ASTRO\" point to\nthe same folder. For a case sensitive file system, \"~/com/astro\" and\n\"~/com/ASTRO\" will be different folders.\n\n Example:\n   File1: namespace = com.astro.file1\n   File2: namespace = com.aSTRo.file2\n\n   The following files would be generated with the path specified.\n   1) Case insensitive (if file1 is generated first):\n       com/astro/file1\n                /file2\n   2) Case insensitive (if file2 is generated first):\n       com/aSTRo/file1\n                /file2\n   3) Case sensitive:\n       com/astro/file1\n           aSTRo/file2\n\nResolution:\nAdd abililty for generators to generate paths with lower\ncase path. Updated the TempalteSpecGenerator,\nPegasusDataTemplateGenerator, RestRequestBuilderGenerator, and\nJavaRequestBuilderGenerator.\n\nThe Gradle Tasks of GenerateDataTemplateTask and\nGenerateRestClientTask have been modified to have an optional input property\nto generate the lower case path. Default behavior is to create paths lower\ncase.\n\nTesting:\nCreated unit tests to validate path's on both linux and mac systems\nwhere the file system were case sensitive and case insensitive\nrespectively.", "committedDate": "2020-11-09T23:52:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY1NTEyMw==", "url": "https://github.com/linkedin/rest.li/pull/474#discussion_r520655123", "bodyText": "Can you also add a simple test to show that your change only affect \"package\" name, but not the root directory (because some user uses custom root directory instead of the sourceSet directory <module>/src/main", "author": "junchuanwang", "createdAt": "2020-11-10T15:33:12Z", "path": "restli-tools/src/test/java/com/linkedin/restli/tools/clientgen/TestRestRequestBuilderGenerator.java", "diffHunk": "@@ -121,6 +134,89 @@ public void testGeneration(RestliVersion version, String ABuildersName, String B\n     Assert.assertTrue(bBuilderFileContent.contains(\"Generated from \" + RESOURCES_DIR + FS + \"idls\" + FS + \"arrayDuplicateB.restspec.json\"));\n   }\n \n+  /**\n+   * Testing case sensitivity of generated files. Typically a Mac/Windows system will have a case insensitive file\n+   * system, whereas a Linux system will have a case sensitive file system. For a case insensitive file system,\n+   * \"~/com/astro\" and \"~/com/ASTRO\" point to the same folder. For a case sensitive file system, \"~/com/astro\" and \"~/com/ASTRO\"\n+   * will be different folders.\n+   *\n+   * Example:\n+   *   File1: namespace = com.astro.file1\n+   *   File2: namespace = com.aSTRo.file2\n+   *\n+   *   The following files would be generated with the path specified.\n+   *   1) Case insensitive (if file1 is generated first):\n+   *       com/astro/file1\n+   *                /file2\n+   *   2) Case insensitive (if file2 is generated first):\n+   *       com/aSTRo/file1\n+   *                /file2\n+   *   3) Case sensitive:\n+   *       com/astro/file1\n+   *           aSTRo/file2\n+   *\n+   * @param version RestLi version\n+   * @param restspec1 First restli spec to generate\n+   * @param restspec2 Second restli spec to generate\n+   * @param generateLowercasePath True, generate path lowercase; False, generate path as spec specifies.\n+   */\n+  @Test(dataProvider = \"arrayDuplicateDataProvider2\")\n+  public void testGenerationPathOrder(RestliVersion version, String restspec1, String restspec2, boolean generateLowercasePath) throws Exception", "originalCommit": "459092abe43d90d62138b309e1b05fb449d7ecee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5NDQ5OQ==", "url": "https://github.com/linkedin/rest.li/pull/474#discussion_r520894499", "bodyText": "Added new test.", "author": "Astro03", "createdAt": "2020-11-10T21:47:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY1NTEyMw=="}], "type": "inlineReview"}, {"oid": "f1f3756114aba2641e991c058bcb0a0a9799c4de", "url": "https://github.com/linkedin/rest.li/commit/f1f3756114aba2641e991c058bcb0a0a9799c4de", "message": "Fix style of brackets as per review comment", "committedDate": "2020-11-10T20:18:03Z", "type": "forcePushed"}, {"oid": "3b34d6e7175ba2798303d75a587aebe426a758e7", "url": "https://github.com/linkedin/rest.li/commit/3b34d6e7175ba2798303d75a587aebe426a758e7", "message": "Update generators to optionally generate files with lower case path.\n\nIssue:\nWas working on two different file systems and noticed that after a rync,\nI was getting a \"DuplicateClassException\" on my Linux system - there\nwere duplicate files in similar paths.\n\nTypically a Mac/Windows system will have a case insensitive file system,\nwhereas a Linux system will have a case sensitive file system. For a\ncase insensitive file system, \"~/com/astro\" and \"~/com/ASTRO\" point to\nthe same folder. For a case sensitive file system, \"~/com/astro\" and\n\"~/com/ASTRO\" will be different folders.\n\n Example:\n   File1: namespace = com.astro.file1\n   File2: namespace = com.aSTRo.file2\n\n   The following files would be generated with the path specified.\n   1) Case insensitive (if file1 is generated first):\n       com/astro/file1\n                /file2\n   2) Case insensitive (if file2 is generated first):\n       com/aSTRo/file1\n                /file2\n   3) Case sensitive:\n       com/astro/file1\n           aSTRo/file2\n\nResolution:\nAdd abililty for generators to generate paths with lower\ncase path. Updated the TempalteSpecGenerator,\nPegasusDataTemplateGenerator, RestRequestBuilderGenerator, and\nJavaRequestBuilderGenerator.\n\nThe Gradle Tasks of GenerateDataTemplateTask and\nGenerateRestClientTask have been modified to have an optional input property\nto generate the lower case path. Default behavior is to create paths lower\ncase.\n\nTesting:\nCreated unit tests to validate path's on both linux and mac systems\nwhere the file system were case sensitive and case insensitive\nrespectively.", "committedDate": "2020-11-10T20:19:04Z", "type": "commit"}, {"oid": "e6631874479c52fc62241784da00b65e89a56d2c", "url": "https://github.com/linkedin/rest.li/commit/e6631874479c52fc62241784da00b65e89a56d2c", "message": "Fix style of brackets as per review comment", "committedDate": "2020-11-10T20:19:04Z", "type": "commit"}, {"oid": "e6631874479c52fc62241784da00b65e89a56d2c", "url": "https://github.com/linkedin/rest.li/commit/e6631874479c52fc62241784da00b65e89a56d2c", "message": "Fix style of brackets as per review comment", "committedDate": "2020-11-10T20:19:04Z", "type": "forcePushed"}, {"oid": "e262bc8e57785f20f844709de5b253c1310bfeb9", "url": "https://github.com/linkedin/rest.li/commit/e262bc8e57785f20f844709de5b253c1310bfeb9", "message": "Update default for RestREquestbuilderGenerator (used by tests) to be lower case paths", "committedDate": "2020-11-10T20:22:14Z", "type": "commit"}, {"oid": "402dab3b393d83979ba094fd973b779eb6ee71eb", "url": "https://github.com/linkedin/rest.li/commit/402dab3b393d83979ba094fd973b779eb6ee71eb", "message": "Update changelog and version", "committedDate": "2020-11-10T20:37:04Z", "type": "commit"}, {"oid": "ea857283447c3ba3a46b40808ea5c3ddaec32b14", "url": "https://github.com/linkedin/rest.li/commit/ea857283447c3ba3a46b40808ea5c3ddaec32b14", "message": "Add test to validate root path is not effected by the lower case path generation", "committedDate": "2020-11-10T21:46:25Z", "type": "commit"}, {"oid": "ea857283447c3ba3a46b40808ea5c3ddaec32b14", "url": "https://github.com/linkedin/rest.li/commit/ea857283447c3ba3a46b40808ea5c3ddaec32b14", "message": "Add test to validate root path is not effected by the lower case path generation", "committedDate": "2020-11-10T21:46:25Z", "type": "forcePushed"}]}