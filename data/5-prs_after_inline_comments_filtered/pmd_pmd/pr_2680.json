{"pr_number": 2680, "pr_title": "[core] Deprecate report methods", "pr_createdAt": "2020-07-28T21:39:39Z", "pr_url": "https://github.com/pmd/pmd/pull/2680", "timeline": [{"oid": "f62a411a45ee94bb8ae629c5fc36b21c97e46b05", "url": "https://github.com/pmd/pmd/commit/f62a411a45ee94bb8ae629c5fc36b21c97e46b05", "message": "Deprecate some Report methods", "committedDate": "2020-07-28T12:48:02Z", "type": "commit"}, {"oid": "ce3257309073b683299fc3cfcc4233e6c19b5300", "url": "https://github.com/pmd/pmd/commit/ce3257309073b683299fc3cfcc4233e6c19b5300", "message": "Deprecate more methods", "committedDate": "2020-07-28T12:55:01Z", "type": "commit"}, {"oid": "772bc1346ca41585a9fa8f38f28a9f050fdff952", "url": "https://github.com/pmd/pmd/commit/772bc1346ca41585a9fa8f38f28a9f050fdff952", "message": "Deprecate more things", "committedDate": "2020-07-28T21:34:01Z", "type": "commit"}, {"oid": "34d961b79421e6c84728a133dc7b6e502a1764b9", "url": "https://github.com/pmd/pmd/commit/34d961b79421e6c84728a133dc7b6e502a1764b9", "message": "Deprecate ReadableDuration", "committedDate": "2020-07-29T15:45:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4MDA2OQ==", "url": "https://github.com/pmd/pmd/pull/2680#discussion_r464080069", "bodyText": "... Use {@link #getViolations()}.isEmpty() instead.", "author": "adangel", "createdAt": "2020-08-02T13:43:26Z", "path": "pmd-core/src/main/java/net/sourceforge/pmd/Report.java", "diffHunk": "@@ -445,27 +439,36 @@ public boolean isEmpty() {\n      *\n      * @return <code>true</code> if there were any processing errors,\n      *         <code>false</code> otherwise\n+     *\n+     * @deprecated Use {@link #getProcessingErrors()}.isEmpty()\n      */\n+    @Deprecated\n     public boolean hasErrors() {\n-        return errors != null && !errors.isEmpty();\n+        return !getProcessingErrors().isEmpty();\n     }\n \n     /**\n      * Checks whether any configuration errors have been reported.\n      *\n      * @return <code>true</code> if there were any configuration errors,\n      *         <code>false</code> otherwise\n+     *\n+     * @deprecated Use {@link #getConfigErrors()}.isEmpty()\n      */\n+    @Deprecated\n     public boolean hasConfigErrors() {\n-        return configErrors != null && !configErrors.isEmpty();\n+        return !getConfigErrors().isEmpty();\n     }\n \n     /**\n      * Checks whether no violations have been reported.\n      *\n      * @return <code>true</code> if no violations have been reported,\n      *         <code>false</code> otherwise\n+     *\n+     * @deprecated The {@link ReportTree} is deprecated", "originalCommit": "34d961b79421e6c84728a133dc7b6e502a1764b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4MDMxOA==", "url": "https://github.com/pmd/pmd/pull/2680#discussion_r464080318", "bodyText": "Let's spend a sentence to explain, what this method checks:\nChecks whether there are no violations and no processing errors. That means, that PMD analysis yielded nothing to worry about.", "author": "adangel", "createdAt": "2020-08-02T13:45:56Z", "path": "pmd-core/src/main/java/net/sourceforge/pmd/Report.java", "diffHunk": "@@ -436,6 +426,10 @@ public boolean hasMetrics() {\n         return metrics.iterator();\n     }\n \n+    /**", "originalCommit": "34d961b79421e6c84728a133dc7b6e502a1764b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4MDU4NA==", "url": "https://github.com/pmd/pmd/pull/2680#discussion_r464080584", "bodyText": "We seem to keep the violations sorted by RuleViolationComparator.INSTANCE. Maybe that's worth mentioning, that the list of violations is actually a sorted list?", "author": "adangel", "createdAt": "2020-08-02T13:48:46Z", "path": "pmd-core/src/main/java/net/sourceforge/pmd/Report.java", "diffHunk": "@@ -474,39 +477,89 @@ public boolean treeIsEmpty() {\n      * Returns an iteration over the reported violations.\n      *\n      * @return an iterator\n+     *\n+     * @deprecated The {@link ReportTree} is deprecated\n      */\n+    @Deprecated\n     public Iterator<RuleViolation> treeIterator() {\n         return violationTree.iterator();\n     }\n \n+    /**\n+     * @deprecated Use {@link #getViolations()}\n+     */\n+    @Deprecated\n     @Override\n     public Iterator<RuleViolation> iterator() {\n         return violations.iterator();\n     }\n \n+\n+    /**\n+     * Returns an unmodifiable list of violations that were suppressed.\n+     */\n+    public List<SuppressedViolation> getSuppressedRuleViolations() {\n+        return Collections.unmodifiableList(suppressedRuleViolations);\n+    }\n+\n+    /**\n+     * Returns an unmodifiable list of violations that have been\n+     * recorded until now. None of those violations were suppressed.\n+     */\n+    public List<RuleViolation> getViolations() {", "originalCommit": "34d961b79421e6c84728a133dc7b6e502a1764b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4MDk3NA==", "url": "https://github.com/pmd/pmd/pull/2680#discussion_r464080974", "bodyText": "I think we should name this without abbreviation, since this is the only one, where we use abbrev.\nI think, it should be called getConfigurationErrors().", "author": "adangel", "createdAt": "2020-08-02T13:53:17Z", "path": "pmd-core/src/main/java/net/sourceforge/pmd/Report.java", "diffHunk": "@@ -474,39 +477,89 @@ public boolean treeIsEmpty() {\n      * Returns an iteration over the reported violations.\n      *\n      * @return an iterator\n+     *\n+     * @deprecated The {@link ReportTree} is deprecated\n      */\n+    @Deprecated\n     public Iterator<RuleViolation> treeIterator() {\n         return violationTree.iterator();\n     }\n \n+    /**\n+     * @deprecated Use {@link #getViolations()}\n+     */\n+    @Deprecated\n     @Override\n     public Iterator<RuleViolation> iterator() {\n         return violations.iterator();\n     }\n \n+\n+    /**\n+     * Returns an unmodifiable list of violations that were suppressed.\n+     */\n+    public List<SuppressedViolation> getSuppressedRuleViolations() {\n+        return Collections.unmodifiableList(suppressedRuleViolations);\n+    }\n+\n+    /**\n+     * Returns an unmodifiable list of violations that have been\n+     * recorded until now. None of those violations were suppressed.\n+     */\n+    public List<RuleViolation> getViolations() {\n+        return Collections.unmodifiableList(violations);\n+    }\n+\n+\n+    /**\n+     * Returns an unmodifiable list of processing errors that have been\n+     * recorded until now.\n+     */\n+    public List<ProcessingError> getProcessingErrors() {\n+        return Collections.unmodifiableList(errors);\n+    }\n+\n+\n+    /**\n+     * Returns an unmodifiable list of configuration errors that have\n+     * been recorded until now.\n+     */\n+    public List<ConfigurationError> getConfigErrors() {", "originalCommit": "34d961b79421e6c84728a133dc7b6e502a1764b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4MTAyMw==", "url": "https://github.com/pmd/pmd/pull/2680#discussion_r464081023", "bodyText": "The getter for the violations is only called getViolations and not getRuleViolations. In that sense, I think, this method should be called getSuppressedViolations().\nIf you agree, we need to create the new method getSuppressedViolations() and deprecated the existing getSuppressedRuleViolations().", "author": "adangel", "createdAt": "2020-08-02T13:53:53Z", "path": "pmd-core/src/main/java/net/sourceforge/pmd/Report.java", "diffHunk": "@@ -474,39 +477,89 @@ public boolean treeIsEmpty() {\n      * Returns an iteration over the reported violations.\n      *\n      * @return an iterator\n+     *\n+     * @deprecated The {@link ReportTree} is deprecated\n      */\n+    @Deprecated\n     public Iterator<RuleViolation> treeIterator() {\n         return violationTree.iterator();\n     }\n \n+    /**\n+     * @deprecated Use {@link #getViolations()}\n+     */\n+    @Deprecated\n     @Override\n     public Iterator<RuleViolation> iterator() {\n         return violations.iterator();\n     }\n \n+\n+    /**\n+     * Returns an unmodifiable list of violations that were suppressed.\n+     */\n+    public List<SuppressedViolation> getSuppressedRuleViolations() {", "originalCommit": "34d961b79421e6c84728a133dc7b6e502a1764b9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM0NzI5MA==", "url": "https://github.com/pmd/pmd/pull/2680#discussion_r464347290", "bodyText": "All of this sounds good. Will do", "author": "oowekyala", "createdAt": "2020-08-03T11:11:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4MTAyMw=="}], "type": "inlineReview"}, {"oid": "66efc90cb3eb103caa8fdceef8ffbf127c49505c", "url": "https://github.com/pmd/pmd/commit/66efc90cb3eb103caa8fdceef8ffbf127c49505c", "message": "PR comments", "committedDate": "2020-08-03T11:20:51Z", "type": "commit"}, {"oid": "1080d123c63059d85c63353fadcca75ebce23a4c", "url": "https://github.com/pmd/pmd/commit/1080d123c63059d85c63353fadcca75ebce23a4c", "message": "Merge branch 'master' into deprecate-report-methods", "committedDate": "2020-08-03T11:23:17Z", "type": "commit"}, {"oid": "709ec484c6c43f8a0e96b5dad4d57fe3d4a47fbb", "url": "https://github.com/pmd/pmd/commit/709ec484c6c43f8a0e96b5dad4d57fe3d4a47fbb", "message": "Merge branch 'master' into deprecate-report-methods", "committedDate": "2020-08-03T11:26:49Z", "type": "commit"}]}