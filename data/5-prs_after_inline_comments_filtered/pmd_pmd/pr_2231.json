{"pr_number": 2231, "pr_title": "[java] Cyclomatic complexity is misreported (lack of clearing metrics\u2026", "pr_createdAt": "2020-01-17T10:36:16Z", "pr_url": "https://github.com/pmd/pmd/pull/2231", "timeline": [{"oid": "b71575fa3695e97552f64460f771c5a91f58f9b6", "url": "https://github.com/pmd/pmd/commit/b71575fa3695e97552f64460f771c5a91f58f9b6", "message": "[java] Cyclomatic complexity is misreported (lack of clearing metrics cache)\n\nFixes #1984", "committedDate": "2020-01-17T10:35:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzkzMjA2MA==", "url": "https://github.com/pmd/pmd/pull/2231#discussion_r367932060", "bodyText": "Maybe, a better solution wrt to visibility would be to move the LanguageMetricsProvider out of ApexHandler, and into this package. ApexMetrics will probably not change for 7.0 (apart from this method), while LanguageMetricsProvider is still experimental and we can remove the new API freely in 7.0", "author": "oowekyala", "createdAt": "2020-01-17T13:22:34Z", "path": "pmd-apex/src/main/java/net/sourceforge/pmd/lang/apex/metrics/ApexMetrics.java", "diffHunk": "@@ -37,8 +37,11 @@ public static ApexMetricsFacade getFacade() {\n     }\n \n \n-    /** Resets the entire data structure. Used for tests. */\n-    static void reset() {\n+    /**\n+     * Resets the entire data structure.\n+     * This needs to be done in case PMD is executed multiple times within one JVM run.\n+     */\n+    public static void reset() {", "originalCommit": "b71575fa3695e97552f64460f771c5a91f58f9b6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzkzMjI0Ng==", "url": "https://github.com/pmd/pmd/pull/2231#discussion_r367932246", "bodyText": "Same here", "author": "oowekyala", "createdAt": "2020-01-17T13:23:06Z", "path": "pmd-java/src/main/java/net/sourceforge/pmd/lang/java/metrics/JavaMetrics.java", "diffHunk": "@@ -38,8 +38,11 @@ static JavaMetricsFacade getFacade() {\n     }\n \n \n-    /** Resets the entire data structure. Used for tests. */\n-    static void reset() {\n+    /**\n+     * Resets the entire data structure.\n+     * This needs to be done in case PMD is executed multiple times within one JVM run.\n+     */\n+    public static void reset() {", "originalCommit": "b71575fa3695e97552f64460f771c5a91f58f9b6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0e2b9cf5b4d9d65c6a2f17510b945e672dce2218", "url": "https://github.com/pmd/pmd/commit/0e2b9cf5b4d9d65c6a2f17510b945e672dce2218", "message": "[java][apex] Move *MetricsProvider into own classes into metrics packages\n\nMake *Metrics.reset package private again", "committedDate": "2020-01-17T14:41:54Z", "type": "commit"}]}