{"pr_number": 6536, "pr_title": "PathSeq WDL overhaul", "pr_createdAt": "2020-04-03T18:50:37Z", "pr_url": "https://github.com/broadinstitute/gatk/pull/6536", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM2MzgwMw==", "url": "https://github.com/broadinstitute/gatk/pull/6536#discussion_r408363803", "bodyText": "Does this need a rebase?  I thought I just merged a PR with this change.", "author": "ldgauthier", "createdAt": "2020-04-14T18:56:32Z", "path": "src/main/java/org/broadinstitute/hellbender/tools/copynumber/DetermineGermlineContigPloidy.java", "diffHunk": "@@ -108,7 +108,7 @@\n  *     counts files, and all contigs appearing in the input counts files must have a corresponding entry in the priors\n  *     table. The order of contigs is immaterial in the priors table. The highest ploidy state is determined by the\n  *     prior table (3 in the above example). A ploidy state can be strictly forbidden by setting its prior probability\n- *     to 0. For example, the X contig in the above example can only assume 0 and 1 ploidy states.</p>\n+ *     to 0. For example, the Y contig in the above example can only assume 0 and 1 ploidy states.</p>", "originalCommit": "d0c8174e86870f21669206f4b6a6f4954794c8a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI0NTg2NA==", "url": "https://github.com/broadinstitute/gatk/pull/6536#discussion_r418245864", "bodyText": "Hm something strange happened here. I rebased but it's still showing up... maybe one of my commits changes it to X then another back to Y. The final result is correct though.", "author": "mwalker174", "createdAt": "2020-04-30T19:41:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM2MzgwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM2NzExNw==", "url": "https://github.com/broadinstitute/gatk/pull/6536#discussion_r408367117", "bodyText": "As in cram files are not supported?", "author": "ldgauthier", "createdAt": "2020-04-14T19:01:57Z", "path": "src/main/java/org/broadinstitute/hellbender/tools/spark/pathseq/PathSeqBwaSpark.java", "diffHunk": "@@ -214,6 +207,7 @@ protected void runTool(final JavaSparkContext ctx) {\n         if (!readArguments.getReadFiles().isEmpty()) {\n             throw new UserException.BadInput(\"Please use --paired-input or --unpaired-input instead of --input\");\n         }\n+        Utils.validateArg(outputPaired == null || (IOUtils.isBamFileName(outputPaired)) && (outputUnpaired == null || IOUtils.isBamFileName(outputUnpaired)), \"Only BAM output is supported\");", "originalCommit": "d0c8174e86870f21669206f4b6a6f4954794c8a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI0NzczMQ==", "url": "https://github.com/broadinstitute/gatk/pull/6536#discussion_r418247731", "bodyText": "CRAMs are not supported, because we truncate the header so that only sequences at least one alignment appear, otherwise the header is huge.", "author": "mwalker174", "createdAt": "2020-04-30T19:45:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM2NzExNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM2NzMzMw==", "url": "https://github.com/broadinstitute/gatk/pull/6536#discussion_r408367333", "bodyText": "Yay!", "author": "ldgauthier", "createdAt": "2020-04-14T19:02:17Z", "path": "src/main/java/org/broadinstitute/hellbender/tools/spark/pathseq/PathSeqPipelineSpark.java", "diffHunk": "@@ -136,11 +136,12 @@\n  *   --conf spark.executor.memoryOverhead=132000\n  * </pre>\n  *\n- * <p>Note that the host and microbe BWA images must be copied to the same paths on every worker node. The microbe FASTA,\n+ * <p>Note that the host and microbe BWA images must be copied to the same paths on every worker node. The microbe dictionary,\n  * host k-mer file, and taxonomy file may also be copied to a single path on every worker node or to HDFS.</p>\n  *\n  * <h3>References</h3>\n  * <ol>\n+ *     <li>Walker, M. A., Pedamallu, C. S. et al. (2018). GATK PathSeq: a customizable computational tool for the discovery and identification of microbial sequences in libraries from eukaryotic hosts. Bioinformatics. 34, 4287-4289.</li>", "originalCommit": "d0c8174e86870f21669206f4b6a6f4954794c8a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxODkzNA==", "url": "https://github.com/broadinstitute/gatk/pull/6536#discussion_r408418934", "bodyText": "Nice.", "author": "ldgauthier", "createdAt": "2020-04-14T20:35:47Z", "path": "src/main/java/org/broadinstitute/hellbender/tools/spark/pathseq/PathSeqBwaSpark.java", "diffHunk": "@@ -35,7 +36,7 @@\n  *     <li>Unaligned queryname-sorted BAM file containing only paired reads (paired-end reads with mates)</li>\n  *     <li>Unaligned BAM file containing only unpaired reads (paired-end reads without mates and/or single-end reads)</li>\n  *     <li>*Microbe reference BWA-MEM index image generated using BwaMemIndexImageCreator</li>\n- *     <li>*Indexed microbe reference FASTA file</li>\n+ *     <li>*Indexed microbe reference dictionary (fasta file NOT required)</li>", "originalCommit": "d0c8174e86870f21669206f4b6a6f4954794c8a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c73697795ab7c1efa279f698bca43029eeeeb777", "url": "https://github.com/broadinstitute/gatk/commit/c73697795ab7c1efa279f698bca43029eeeeb777", "message": "New pathseq wdl with downsampling; remove unneeded microbe reference fasta in alignment step", "committedDate": "2020-05-21T16:44:00Z", "type": "commit"}, {"oid": "33eccfdba988d02e38282fb8e5e9bc68194f46e4", "url": "https://github.com/broadinstitute/gatk/commit/33eccfdba988d02e38282fb8e5e9bc68194f46e4", "message": "Revert build_docker.sh", "committedDate": "2020-05-21T16:44:00Z", "type": "commit"}, {"oid": "9739a4b5bf7794e3c23dbdacd2057ad517c0d6b6", "url": "https://github.com/broadinstitute/gatk/commit/9739a4b5bf7794e3c23dbdacd2057ad517c0d6b6", "message": "Add ignored host contig input", "committedDate": "2020-05-21T16:44:00Z", "type": "commit"}, {"oid": "5db3987d798f8cb77dcbc389db22bf9f4205c9fc", "url": "https://github.com/broadinstitute/gatk/commit/5db3987d798f8cb77dcbc389db22bf9f4205c9fc", "message": "Fix parenthesis in PathSeqBwaSpark arg validation", "committedDate": "2020-05-21T16:44:00Z", "type": "commit"}, {"oid": "5db3987d798f8cb77dcbc389db22bf9f4205c9fc", "url": "https://github.com/broadinstitute/gatk/commit/5db3987d798f8cb77dcbc389db22bf9f4205c9fc", "message": "Fix parenthesis in PathSeqBwaSpark arg validation", "committedDate": "2020-05-21T16:44:00Z", "type": "forcePushed"}, {"oid": "3ea26906623750cbd006cdc8e754b2688add8902", "url": "https://github.com/broadinstitute/gatk/commit/3ea26906623750cbd006cdc8e754b2688add8902", "message": "Respond to reviewer comments", "committedDate": "2020-05-21T18:28:55Z", "type": "commit"}, {"oid": "37fc2d5476418b3376621e437dd1a13ab4ff5fae", "url": "https://github.com/broadinstitute/gatk/commit/37fc2d5476418b3376621e437dd1a13ab4ff5fae", "message": "Address final comments", "committedDate": "2020-05-28T19:01:47Z", "type": "commit"}]}