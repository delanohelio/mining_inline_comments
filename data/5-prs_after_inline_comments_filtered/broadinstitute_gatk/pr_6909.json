{"pr_number": 6909, "pr_title": "fixed an error where the read mate key in SplitNCigarReads was not sufficiently strict about readnames causing cigar errors", "pr_createdAt": "2020-10-23T20:15:27Z", "pr_url": "https://github.com/broadinstitute/gatk/pull/6909", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ5NDg5Ng==", "url": "https://github.com/broadinstitute/gatk/pull/6909#discussion_r514494896", "bodyText": "\ud83d\udc4d", "author": "lbergelson", "createdAt": "2020-10-29T18:57:07Z", "path": "src/main/java/org/broadinstitute/hellbender/tools/walkers/rnaseq/OverhangFixingManager.java", "diffHunk": "@@ -422,9 +422,11 @@ public void setMateChanged() {\n         }\n     }\n \n-    // Generates the string key to be used for\n-    private static String makeKey(String name, boolean firstOfPair, int mateStart) {\n-        return name + (firstOfPair ? 1 : 0) + mateStart;\n+    // Generates the string key to be used for storing mates that had their cigar strings changed between iterations over the input reads\n+    @VisibleForTesting\n+    static String makeKey(String name, boolean firstOfPair, int mateStart) {\n+        // NOTE: We use the '@' character here because it is explicitly forbidden for use in read names by the SAM Spec and we don't want to risk accidental matches across read pairs\n+        return name + \"@\" +  (firstOfPair ? 1 : 0) + \"@\" + mateStart;", "originalCommit": "091bafbe3134f402a9f6430af0a7933a5054ddaf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ5NTQ2OA==", "url": "https://github.com/broadinstitute/gatk/pull/6909#discussion_r514495468", "bodyText": "@jamesemery Have you tested what happens if you add a read with a @s in the name which could recreate the problem?", "author": "lbergelson", "createdAt": "2020-10-29T18:58:01Z", "path": "src/test/java/org/broadinstitute/hellbender/tools/walkers/rnaseq/OverhangFixingManagerUnitTest.java", "diffHunk": "@@ -201,6 +201,20 @@ public void testMappingReadMateRepair() {\n         Assert.assertEquals(read2.getMateStart(), 10003);\n     }\n \n+    @Test", "originalCommit": "091bafbe3134f402a9f6430af0a7933a5054ddaf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "be2f8705c9e1b25de6c03366e7f7031707778134", "url": "https://github.com/broadinstitute/gatk/commit/be2f8705c9e1b25de6c03366e7f7031707778134", "message": "and those other ones", "committedDate": "2020-10-29T19:30:49Z", "type": "forcePushed"}, {"oid": "fdb6f8e14c477e180d64819bd89ee6df2219a0fa", "url": "https://github.com/broadinstitute/gatk/commit/fdb6f8e14c477e180d64819bd89ee6df2219a0fa", "message": "and those other ones", "committedDate": "2020-11-09T17:51:32Z", "type": "forcePushed"}, {"oid": "d9bb6916fe06633f73cc9735bdc2a229e05cede1", "url": "https://github.com/broadinstitute/gatk/commit/d9bb6916fe06633f73cc9735bdc2a229e05cede1", "message": "fixed an error where the read mate key in SplitNCigarReads was not sufficiently strict about readnames causing cigar errors", "committedDate": "2020-11-13T21:09:09Z", "type": "commit"}, {"oid": "4e2af3b1bc2a660de3d1bf354faa8cee6e5fa6f3", "url": "https://github.com/broadinstitute/gatk/commit/4e2af3b1bc2a660de3d1bf354faa8cee6e5fa6f3", "message": "more poorly understood magic back to bite us", "committedDate": "2020-11-13T21:09:09Z", "type": "commit"}, {"oid": "a57b36c7836932c41138d7d1a2b1143f79153dcb", "url": "https://github.com/broadinstitute/gatk/commit/a57b36c7836932c41138d7d1a2b1143f79153dcb", "message": "more evil magic will keep sauron at bay", "committedDate": "2020-11-13T21:09:09Z", "type": "commit"}, {"oid": "3e31d07e34f837bf33392a212676acf474b7bda1", "url": "https://github.com/broadinstitute/gatk/commit/3e31d07e34f837bf33392a212676acf474b7bda1", "message": "removing sudos", "committedDate": "2020-11-13T21:09:09Z", "type": "commit"}, {"oid": "034e18e6c69bc241ec43f14e879568521a631009", "url": "https://github.com/broadinstitute/gatk/commit/034e18e6c69bc241ec43f14e879568521a631009", "message": "and those other ones", "committedDate": "2020-11-13T21:09:09Z", "type": "commit"}, {"oid": "034e18e6c69bc241ec43f14e879568521a631009", "url": "https://github.com/broadinstitute/gatk/commit/034e18e6c69bc241ec43f14e879568521a631009", "message": "and those other ones", "committedDate": "2020-11-13T21:09:09Z", "type": "forcePushed"}]}