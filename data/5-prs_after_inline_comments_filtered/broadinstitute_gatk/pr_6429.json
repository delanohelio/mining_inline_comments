{"pr_number": 6429, "pr_title": "improved checking for upstream deletions in GenotypingEngine", "pr_createdAt": "2020-01-31T02:13:54Z", "pr_url": "https://github.com/broadinstitute/gatk/pull/6429", "timeline": [{"oid": "8b00b59b392cacc400a5b3ffa336f8a65d05c70d", "url": "https://github.com/broadinstitute/gatk/commit/8b00b59b392cacc400a5b3ffa336f8a65d05c70d", "message": "made isCoveredByDeletion non-state-modifying", "committedDate": "2020-01-30T19:38:09Z", "type": "commit"}, {"oid": "4e4ac95405b2ceb2a9c8d8ca429a8fe4d859ef57", "url": "https://github.com/broadinstitute/gatk/commit/4e4ac95405b2ceb2a9c8d8ca429a8fe4d859ef57", "message": "record deletion after all places an allele could be dropped have passed", "committedDate": "2020-01-30T21:54:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDAzOTUwOQ==", "url": "https://github.com/broadinstitute/gatk/pull/6429#discussion_r384039509", "bodyText": "Can you note that this is the size for the normalized representation?  Otherwise it's not obvious why we need this information in addition to the VC.", "author": "ldgauthier", "createdAt": "2020-02-25T18:19:41Z", "path": "src/main/java/org/broadinstitute/hellbender/tools/walkers/genotyper/GenotypingEngine.java", "diffHunk": "@@ -264,13 +270,17 @@ void clearUpstreamDeletionsLoc() {\n     }\n \n     /**\n-     *  Record deletion to keep\n-     *  Add deletions to a list.\n+     *  Record emitted deletion in order to remove downstream spanning deletion alleles that are not covered by any emitted deletion.\n+     *  In addition to recording a new deletion, this method culls previously-recorded deletions that end before the current variant\n+     *  context.  This assumes that variants are traversed in order.\n      *\n      * @param deletionSize  size of deletion in bases", "originalCommit": "4e4ac95405b2ceb2a9c8d8ca429a8fe4d859ef57", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1MjMwNg==", "url": "https://github.com/broadinstitute/gatk/pull/6429#discussion_r384052306", "bodyText": "We really didn't need it.  I rewrote the method to take in the VC and the emitted alleles.", "author": "davidbenjamin", "createdAt": "2020-02-25T18:43:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDAzOTUwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDAzOTk4Mg==", "url": "https://github.com/broadinstitute/gatk/pull/6429#discussion_r384039982", "bodyText": "I would put \"variant context, potentially multi-allelic\", again, to clarify why we need two parameters.", "author": "ldgauthier", "createdAt": "2020-02-25T18:20:30Z", "path": "src/main/java/org/broadinstitute/hellbender/tools/walkers/genotyper/GenotypingEngine.java", "diffHunk": "@@ -264,13 +270,17 @@ void clearUpstreamDeletionsLoc() {\n     }\n \n     /**\n-     *  Record deletion to keep\n-     *  Add deletions to a list.\n+     *  Record emitted deletion in order to remove downstream spanning deletion alleles that are not covered by any emitted deletion.\n+     *  In addition to recording a new deletion, this method culls previously-recorded deletions that end before the current variant\n+     *  context.  This assumes that variants are traversed in order.\n      *\n      * @param deletionSize  size of deletion in bases\n      * @param vc            variant context", "originalCommit": "4e4ac95405b2ceb2a9c8d8ca429a8fe4d859ef57", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDYwMQ==", "url": "https://github.com/broadinstitute/gatk/pull/6429#discussion_r384054601", "bodyText": "done", "author": "davidbenjamin", "createdAt": "2020-02-25T18:47:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDAzOTk4Mg=="}], "type": "inlineReview"}, {"oid": "7ca2f3f03dfdd0d0b3ff43920a70ee0f0d8ad3ee", "url": "https://github.com/broadinstitute/gatk/commit/7ca2f3f03dfdd0d0b3ff43920a70ee0f0d8ad3ee", "message": "review", "committedDate": "2020-02-25T18:47:43Z", "type": "commit"}]}