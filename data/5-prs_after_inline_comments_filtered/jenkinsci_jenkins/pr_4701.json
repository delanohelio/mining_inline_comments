{"pr_number": 4701, "pr_title": "[JENKINS-62133] Adapt resource root URL form validation to new Jetty", "pr_createdAt": "2020-05-01T03:45:45Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4701", "timeline": [{"oid": "5f83800963c4eb084f582f9bbd7b7defee168251", "url": "https://github.com/jenkinsci/jenkins/commit/5f83800963c4eb084f582f9bbd7b7defee168251", "message": "[JENKINS-62133] Adapt resource root URL form validation to new Jetty", "committedDate": "2020-05-01T03:43:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQwNTc5Mw==", "url": "https://github.com/jenkinsci/jenkins/pull/4701#discussion_r418405793", "bodyText": "StandardCharsets.UTF_8 is probably wrong but unless it's likely to throw exceptions I doubt I care enough.", "author": "daniel-beck", "createdAt": "2020-05-01T03:55:20Z", "path": "core/src/main/java/jenkins/security/ResourceDomainConfiguration.java", "diffHunk": "@@ -168,8 +170,11 @@ private FormValidation checkUrl(String resourceRootUrlString, boolean allowOnlin\n                 }\n                 // response is error\n                 String responseMessage = httpURLConnection.getResponseMessage();\n-                if (responseCode == 404 && responseMessage.equals(ERROR_RESPONSE)) {\n-                    return FormValidation.ok(Messages.ResourceDomainConfiguration_ResourceResponse());\n+                if (responseCode == 404) {\n+                    String responseBody = String.join(\"\", IOUtils.readLines(httpURLConnection.getErrorStream(), StandardCharsets.UTF_8));", "originalCommit": "5f83800963c4eb084f582f9bbd7b7defee168251", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}