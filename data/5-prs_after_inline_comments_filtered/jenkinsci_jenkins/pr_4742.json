{"pr_number": 4742, "pr_title": "[JENKINS-62332] Show when a plugin version newer than offered exists", "pr_createdAt": "2020-05-25T20:40:40Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4742", "timeline": [{"oid": "c1f4f8dcc81b605f16776eec3d677e2e0b1347c4", "url": "https://github.com/jenkinsci/jenkins/commit/c1f4f8dcc81b605f16776eec3d677e2e0b1347c4", "message": "[JENKINS-62332] Show when a plugin version newer than offered exists", "committedDate": "2020-05-25T20:39:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI1NjgyMQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4742#discussion_r430256821", "bodyText": "Isn't this taken care of in the plugin.latest calculation?", "author": "varyvol", "createdAt": "2020-05-26T08:52:46Z", "path": "core/src/main/java/hudson/PluginManager.java", "diffHunk": "@@ -2266,6 +2266,14 @@ public boolean hasAdoptThisPluginLabel(UpdateSite.Plugin plugin) {\n         return Arrays.asList(categories).contains(\"adopt-this-plugin\");\n     }\n \n+    @Restricted(DoNotUse.class) // Used from table.jelly\n+    public boolean hasLatestVersionNewerThanOffered(UpdateSite.Plugin plugin) {\n+        if (plugin.latest == null) {\n+            return false;\n+        }\n+        return !plugin.latest.equalsIgnoreCase(plugin.version); // we can assume that any defined 'latest' will be newer than the actual offered version", "originalCommit": "c1f4f8dcc81b605f16776eec3d677e2e0b1347c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI3MTgxMg==", "url": "https://github.com/jenkinsci/jenkins/pull/4742#discussion_r430271812", "bodyText": "This code supports latest being added to JSON even if the latest release is being offered. While that's not the behavior of update-center2 in the linked PR, I wouldn't consider it wrong.", "author": "daniel-beck", "createdAt": "2020-05-26T09:17:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI1NjgyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM1MzE1OA==", "url": "https://github.com/jenkinsci/jenkins/pull/4742#discussion_r430353158", "bodyText": "Maybe it's not wrong, but isn't it more sensible to make both sides have the same behaviour? I believe it's easier to undertand.", "author": "varyvol", "createdAt": "2020-05-26T11:49:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI1NjgyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM3MjA3Mg==", "url": "https://github.com/jenkinsci/jenkins/pull/4742#discussion_r430372072", "bodyText": "https://en.wikipedia.org/wiki/Robustness_principle", "author": "daniel-beck", "createdAt": "2020-05-26T12:25:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI1NjgyMQ=="}], "type": "inlineReview"}, {"oid": "fc4b0c36d85a1a9d01bf1cda8ec5e6c6e53f0db8", "url": "https://github.com/jenkinsci/jenkins/commit/fc4b0c36d85a1a9d01bf1cda8ec5e6c6e53f0db8", "message": "Add more obvious label/tag to entries that cannot be installed\n\nAlso link to plugin documentation from the detail message", "committedDate": "2020-05-29T06:54:50Z", "type": "commit"}, {"oid": "65bd0f8e6443a437f1bddbc460e8af4ee29588ff", "url": "https://github.com/jenkinsci/jenkins/commit/65bd0f8e6443a437f1bddbc460e8af4ee29588ff", "message": "Also show the list if there are any unavailable updates", "committedDate": "2020-05-29T15:34:33Z", "type": "commit"}]}