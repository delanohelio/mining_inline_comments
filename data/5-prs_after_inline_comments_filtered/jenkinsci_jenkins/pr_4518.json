{"pr_number": 4518, "pr_title": "[JENKINS-61203] - Allow users with system read permission to view the Manage Plugins configuration", "pr_createdAt": "2020-02-23T08:49:24Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4518", "timeline": [{"oid": "9c21870ee829d364bf3d5cc3f424a0c993426870", "url": "https://github.com/jenkinsci/jenkins/commit/9c21870ee829d364bf3d5cc3f424a0c993426870", "message": "JEP-224 System reader - Plugin Manager", "committedDate": "2020-02-23T08:42:07Z", "type": "commit"}, {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc", "url": "https://github.com/jenkinsci/jenkins/commit/7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc", "message": "Merge branch 'master' into system-read-pluginManager", "committedDate": "2020-02-24T16:44:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUyNTY2OA==", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385525668", "bodyText": "Not sure about that. It is not a read-only operation", "author": "oleg-nenashev", "createdAt": "2020-02-28T06:24:56Z", "path": "core/src/main/java/hudson/PluginManager.java", "diffHunk": "@@ -1703,7 +1703,7 @@ public HttpResponse doUploadPlugin(StaplerRequest req) throws IOException, Servl\n \n     @Restricted(NoExternalUse.class)\n     @RequirePOST public HttpResponse doCheckUpdatesServer() throws IOException {\n-        Jenkins.get().checkPermission(Jenkins.ADMINISTER);\n+        Jenkins.get().checkPermission(Jenkins.SYSTEM_READ);", "originalCommit": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUzNjg5OQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385536899", "bodyText": "This was called out in the previous PR and dB was fine with it, it\u2019s updating a cache, not updating configuration or installing something", "author": "timja", "createdAt": "2020-02-28T07:04:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUyNTY2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczNzI5MA==", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385737290", "bodyText": "Pretty sure this is only used during the setup wizard, so doesn't need the permission check changed.", "author": "daniel-beck", "createdAt": "2020-02-28T14:51:46Z", "path": "core/src/main/java/hudson/PluginManager.java", "diffHunk": "@@ -1347,7 +1347,7 @@ public void stop() {\n      */\n     @Restricted(DoNotUse.class) // WebOnly\n     public HttpResponse doPlugins() {\n-        Jenkins.get().checkPermission(Jenkins.ADMINISTER);\n+        Jenkins.get().checkPermission(Jenkins.SYSTEM_READ);", "originalCommit": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczODc3NQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385738775", "bodyText": "I think so too\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Jenkins.get().checkPermission(Jenkins.SYSTEM_READ);\n          \n          \n            \n                    Jenkins.get().checkPermission(Jenkins.ADMINISTER);", "author": "timja", "createdAt": "2020-02-28T14:54:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczNzI5MA=="}], "type": "inlineReview"}, {"oid": "98fabe42c12a6a42a67e3d66ece17c5fa62a50fd", "url": "https://github.com/jenkinsci/jenkins/commit/98fabe42c12a6a42a67e3d66ece17c5fa62a50fd", "message": "Update core/src/main/java/hudson/PluginManager.java", "committedDate": "2020-02-28T14:54:39Z", "type": "commit"}, {"oid": "bf1a6de01847a92ce629d02672fad466184f2f73", "url": "https://github.com/jenkinsci/jenkins/commit/bf1a6de01847a92ce629d02672fad466184f2f73", "message": "Add required permissions to the docs", "committedDate": "2020-02-28T16:45:35Z", "type": "commit"}, {"oid": "83a7160d7636c821eb43199f7dbeb431d13db1d0", "url": "https://github.com/jenkinsci/jenkins/commit/83a7160d7636c821eb43199f7dbeb431d13db1d0", "message": "Apply suggestions from code review\n\nCo-Authored-By: Daniel Beck <1831569+daniel-beck@users.noreply.github.com>", "committedDate": "2020-02-28T18:23:36Z", "type": "commit"}, {"oid": "56cbe9765b3554092f29433baad90598312fea0b", "url": "https://github.com/jenkinsci/jenkins/commit/56cbe9765b3554092f29433baad90598312fea0b", "message": "Merge branch 'master' into system-read-pluginManager", "committedDate": "2020-03-11T08:17:24Z", "type": "commit"}, {"oid": "007a47cf718127b872447d180b9bc14036e2986c", "url": "https://github.com/jenkinsci/jenkins/commit/007a47cf718127b872447d180b9bc14036e2986c", "message": "Merge branch 'master' into system-read-pluginManager", "committedDate": "2020-03-14T11:13:25Z", "type": "commit"}, {"oid": "2c06f83100a36ed267121737b1389b15d8b9129b", "url": "https://github.com/jenkinsci/jenkins/commit/2c06f83100a36ed267121737b1389b15d8b9129b", "message": "Merge branch 'master' into system-read-pluginManager", "committedDate": "2020-03-15T09:15:23Z", "type": "commit"}, {"oid": "cdfd805b19cca9e3cf94488bf98447b835cd4cb0", "url": "https://github.com/jenkinsci/jenkins/commit/cdfd805b19cca9e3cf94488bf98447b835cd4cb0", "message": "Allow SYSTEM_READ access to update center", "committedDate": "2020-03-15T10:20:17Z", "type": "commit"}, {"oid": "dc7d2e00f2d298b108461a229a4305f2cd61296e", "url": "https://github.com/jenkinsci/jenkins/commit/dc7d2e00f2d298b108461a229a4305f2cd61296e", "message": "Merge branch 'master' into system-read-pluginManager", "committedDate": "2020-03-21T09:55:32Z", "type": "commit"}, {"oid": "0374e0b4a93c4c65a0b11789a4ed9b2a703ae152", "url": "https://github.com/jenkinsci/jenkins/commit/0374e0b4a93c4c65a0b11789a4ed9b2a703ae152", "message": "Merge branch 'master' into system-read-pluginManager", "committedDate": "2020-03-31T06:45:35Z", "type": "commit"}, {"oid": "37c84300017778ca6b52f176d62091ab8f81874e", "url": "https://github.com/jenkinsci/jenkins/commit/37c84300017778ca6b52f176d62091ab8f81874e", "message": "Add permission check", "committedDate": "2020-03-31T06:48:53Z", "type": "commit"}, {"oid": "ed347a7b188113b5bc7a054c58c9969082719d09", "url": "https://github.com/jenkinsci/jenkins/commit/ed347a7b188113b5bc7a054c58c9969082719d09", "message": "Merge branch 'master' into system-read-pluginManager", "committedDate": "2020-04-07T21:01:15Z", "type": "commit"}, {"oid": "d609a44b48b12f79fa96c3dbbfc7b1f4e35472fb", "url": "https://github.com/jenkinsci/jenkins/commit/d609a44b48b12f79fa96c3dbbfc7b1f4e35472fb", "message": "Fix non null annotation", "committedDate": "2020-04-07T21:01:59Z", "type": "commit"}, {"oid": "70be258725d5ee4a8b6db9b1b1ee4f4eba2ea2db", "url": "https://github.com/jenkinsci/jenkins/commit/70be258725d5ee4a8b6db9b1b1ee4f4eba2ea2db", "message": "Use correct annotation", "committedDate": "2020-04-08T07:34:41Z", "type": "commit"}]}