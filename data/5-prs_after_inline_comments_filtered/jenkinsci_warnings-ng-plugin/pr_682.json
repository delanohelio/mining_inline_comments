{"pr_number": 682, "pr_title": "[JENKINS-62944] Add exclude sections for task scanner", "pr_createdAt": "2020-11-05T22:03:17Z", "pr_url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/682", "timeline": [{"oid": "e9c7383fb73f15d549ac024722478307929befde", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/e9c7383fb73f15d549ac024722478307929befde", "message": "adds test case for ignoring parts in the processed lines", "committedDate": "2020-11-05T21:29:14Z", "type": "commit"}, {"oid": "95148aed2d80e463b473017dacfe73def5890280", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/95148aed2d80e463b473017dacfe73def5890280", "message": "add IgnoreSection handling; will ignore every line containing IGNORE_BEGIN and following, until a line contains IGNORE_END", "committedDate": "2020-11-05T21:56:37Z", "type": "commit"}, {"oid": "1a0b2864ba75fe62e993ab7601574ef06f3fa345", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/1a0b2864ba75fe62e993ab7601574ef06f3fa345", "message": "checkstyle: JavadocStyleCheck - end with period", "committedDate": "2020-11-06T11:04:30Z", "type": "commit"}, {"oid": "ca1e6707abbc22a069ff91d13f332be77dfd1401", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/ca1e6707abbc22a069ff91d13f332be77dfd1401", "message": "checkstyle: make IgnoreSection inner class to overcome \"OuterTypeFilenameCheck\"", "committedDate": "2020-11-06T11:09:12Z", "type": "commit"}, {"oid": "15e1e5848ddc33bbaf3790a6bc01bee80414efb4", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/15e1e5848ddc33bbaf3790a6bc01bee80414efb4", "message": "checkstyle: fix \"RightCurlyCheck\"", "committedDate": "2020-11-06T11:09:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTQzOTk2OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/682#discussion_r519439968", "bodyText": "A lot of warning will go away if you move the class to the bottom.", "author": "uhafner", "createdAt": "2020-11-08T15:42:30Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/warnings/tasks/TaskScanner.java", "diffHunk": "@@ -26,12 +26,37 @@\n \n import io.jenkins.plugins.analysis.core.util.LocalizedSeverity;\n \n+\n /**\n  * Scans a given input stream for open tasks.\n  *\n  * @author Ullrich Hafner\n  */\n class TaskScanner {\n+    class IgnoreSection {", "originalCommit": "15e1e5848ddc33bbaf3790a6bc01bee80414efb4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTQ0MDA1NQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/682#discussion_r519440055", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                class IgnoreSection {\n          \n          \n            \n                private static class IgnoreSection {", "author": "uhafner", "createdAt": "2020-11-08T15:42:52Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/warnings/tasks/TaskScanner.java", "diffHunk": "@@ -26,12 +26,37 @@\n \n import io.jenkins.plugins.analysis.core.util.LocalizedSeverity;\n \n+\n /**\n  * Scans a given input stream for open tasks.\n  *\n  * @author Ullrich Hafner\n  */\n class TaskScanner {\n+    class IgnoreSection {", "originalCommit": "15e1e5848ddc33bbaf3790a6bc01bee80414efb4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTQ0MDYzMA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/682#discussion_r519440630", "bodyText": "Can't this be a local variable in the parse method? Otherwise parallel scans will cause problems.", "author": "uhafner", "createdAt": "2020-11-08T15:44:54Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/warnings/tasks/TaskScanner.java", "diffHunk": "@@ -26,12 +26,37 @@\n \n import io.jenkins.plugins.analysis.core.util.LocalizedSeverity;\n \n+\n /**\n  * Scans a given input stream for open tasks.\n  *\n  * @author Ullrich Hafner\n  */\n class TaskScanner {\n+    class IgnoreSection {\n+        private static final String IGNORE_BEGIN = \" task-scanner-ignore-begin\";\n+        private static final String IGNORE_END = \" task-scanner-ignore-end\";\n+\n+        private boolean ignore = false;\n+\n+        public boolean matches(final String line) {\n+            if (line.contains(IGNORE_BEGIN)) {\n+                ignore = true;\n+            }\n+            else if (line.contains(IGNORE_END)) {\n+                ignore = false;\n+            }\n+\n+            return ignore;\n+        }\n+\n+        public void reset() {\n+            ignore = false;\n+        }\n+    }\n+\n+    private final IgnoreSection inIgnoreSection = new IgnoreSection();", "originalCommit": "15e1e5848ddc33bbaf3790a6bc01bee80414efb4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTY1NTAzMA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/682#discussion_r519655030", "bodyText": "Sure, of course. To be honest, I was not aware that one TaskScanner instance is used for all jobs. Will make it a local variable -and get rid of reset() as it is no longer required.", "author": "ssproessig", "createdAt": "2020-11-09T09:14:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTQ0MDYzMA=="}], "type": "inlineReview"}, {"oid": "72c445079bd703acfe32f8f4a7f8d48efb6abe32", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/72c445079bd703acfe32f8f4a7f8d48efb6abe32", "message": "review: made inner class \"private static\" as suggested", "committedDate": "2020-11-09T09:17:21Z", "type": "commit"}, {"oid": "d40e587a6524892f06abce4be7beed9d8cc55f10", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/d40e587a6524892f06abce4be7beed9d8cc55f10", "message": "review: create new IgnoreSection instance per scanTasks() run to support parallel checks\n\ngetting rid of no longer required reset()", "committedDate": "2020-11-09T09:18:40Z", "type": "commit"}, {"oid": "1092b546b6535bec67be54c6d5b517cdadcbd468", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/1092b546b6535bec67be54c6d5b517cdadcbd468", "message": "review: moving inner class to the bottom", "committedDate": "2020-11-09T09:19:41Z", "type": "commit"}]}