{"pr_number": 550, "pr_title": "[JENKINS-54072] Publish warnings in GitHub pull requests using Checks API", "pr_createdAt": "2020-07-10T15:38:11Z", "pr_url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550", "timeline": [{"oid": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/84bd84b6519a5f2fca0c506bfafcf0e895e14571", "message": "Published issues and statistics", "committedDate": "2020-07-10T15:34:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNTI3NQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r452925275", "bodyText": "the case should be consistent for each section\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    + \"- ### %d Outstanding Issues\\n\"\n          \n          \n            \n                                    + \"- ### %d outstanding Issues\\n\"", "author": "timja", "createdAt": "2020-07-10T15:46:27Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -243,4 +277,64 @@ private QualityGateEvaluationMode determineQualityGateEvaluationMode(final Repor\n         }\n         return qualityGateEvaluationMode;\n     }\n+\n+    private String extractChecksSummary(final IssuesStatistics statistics) {\n+        return String.format(\"## %d issues in total:\\n\"\n+                        + \"- ### %d new issues\\n\"\n+                        + \"- ### %d Outstanding Issues\\n\"", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNTczMw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r452925733", "bodyText": "I think presentation layer code should be extracted to a different class", "author": "timja", "createdAt": "2020-07-10T15:47:16Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -243,4 +277,64 @@ private QualityGateEvaluationMode determineQualityGateEvaluationMode(final Repor\n         }\n         return qualityGateEvaluationMode;\n     }\n+\n+    private String extractChecksSummary(final IssuesStatistics statistics) {", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r452926746", "bodyText": "hmm I see check annotations showing up on unchanged files do we want that?\nhttps://github.com/XiongKezhi/codingstyle/pull/1/files", "author": "timja", "createdAt": "2020-07-10T15:49:09Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -148,6 +159,29 @@ ResultAction attachAction(final TrendChartType trendChartType) {\n         return action;\n     }\n \n+    /**\n+     * Publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI.\n+     */\n+    public void publishChecks(final ResultAction action) {\n+        AnalysisResult result = action.getResult();\n+        IssuesStatistics totals = result.getTotals();\n+\n+        ChecksPublisher publisher = ChecksPublisherFactory.fromRun(run);\n+        publisher.publish(new ChecksDetailsBuilder()\n+                .withName(result.getId())\n+                .withStatus(ChecksStatus.COMPLETED)\n+                .withConclusion(extractChecksConclusion(result.getQualityGateStatus()))\n+                .withOutput(new ChecksOutputBuilder()\n+                        .withTitle(StringUtils.capitalize(result.getId()) + \" Warnings\")\n+                        .withSummary(extractChecksSummary(totals))\n+                        .withText(extractChecksText(totals))\n+                        .withAnnotations(extractChecksAnnotations(result.getIssues()))", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkzMjk0OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r452932948", "bodyText": "I'm not sure how we can recognize the changed files of a PR, maybe just report new or delta issues?", "author": "XiongKezhi", "createdAt": "2020-07-10T16:00:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkzOTAzNA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r452939034", "bodyText": "probably a separate change, should be doable though", "author": "timja", "createdAt": "2020-07-10T16:11:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA5OTI4MQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453099281", "bodyText": "I think it can happen that files will get a new (or old warning) that is in a file that is not part of the PR. Simple use case: add a new checkstyle rule to the configuration. Maybe it makes sense to add it as a configurable option later?\nI think in the beginning we should start with new warnings only:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    .withAnnotations(extractChecksAnnotations(result.getIssues()))\n          \n          \n            \n                                    .withAnnotations(extractChecksAnnotations(result.getNewIssues()))\n          \n      \n    \n    \n  \n\n(It would make sense to have this configurable for a job later)", "author": "uhafner", "createdAt": "2020-07-10T22:08:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwNjg1Nw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453106857", "bodyText": "On the other hand: in order to test everything it makes sense to use all warnings. Otherwise we need to change the sources to get some output...", "author": "uhafner", "createdAt": "2020-07-10T22:35:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE4OTE2Nw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453189167", "bodyText": "Probably use configuration later, so is the configuration a responsibility for consumers instead of the API itself?\nBTW, what kind of tests we need here? Unit test (test the ChecksDetails constructed) or integration as well?", "author": "XiongKezhi", "createdAt": "2020-07-11T12:14:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzMyODc1OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453328758", "bodyText": "Yes, it makes sense that consumers may offer configuration properties for the Checks API.", "author": "uhafner", "createdAt": "2020-07-12T15:12:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzMyODk1OQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453328959", "bodyText": "For the tests: I don't think that we need integration tests. It is already kind of hard to test the API with GitHub so using the warnings plugin in these tests will make it even harder. But I think the class can be easily tested using a unit test. (And if not we can see this as a proof that the API might be changed a little bit to support testing)", "author": "uhafner", "createdAt": "2020-07-12T15:14:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzMyOTQ2Mg==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453329462", "bodyText": "Agree on the unit-test.\nFor the configurations, I'm implementing the \"disable checks publishing\" feature as a start, I'll push it later, then we can discuss more other configurations.", "author": "XiongKezhi", "createdAt": "2020-07-12T15:18:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzMzMzQyMQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453333421", "bodyText": "consumers responsibility, I would go with new only for now, it's simple to introduce a spotbugs / checkstyle error for demonstration purposes", "author": "timja", "createdAt": "2020-07-12T15:55:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNjc0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyODU0MA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r452928540", "bodyText": "I don't think Neutral is the same as Warning\npossibly:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            return ChecksConclusion.NEUTRAL;\n          \n          \n            \n                            return ChecksConclusion.FAILURE;", "author": "timja", "createdAt": "2020-07-10T15:52:12Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -243,4 +277,64 @@ private QualityGateEvaluationMode determineQualityGateEvaluationMode(final Repor\n         }\n         return qualityGateEvaluationMode;\n     }\n+\n+    private String extractChecksSummary(final IssuesStatistics statistics) {\n+        return String.format(\"## %d issues in total:\\n\"\n+                        + \"- ### %d new issues\\n\"\n+                        + \"- ### %d Outstanding Issues\\n\"\n+                        + \"- ### %d delta issues\\n\"\n+                        + \"- ### %d fixed issues\",\n+                statistics.getTotalSize(), statistics.getNewSize(), statistics.getTotalSize() - statistics.getNewSize(),\n+                statistics.getDeltaSize(), statistics.getFixedSize());\n+    }\n+\n+    private String extractChecksText(final IssuesStatistics statistics) {\n+        return \"## Total Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getTotalLowSize(), statistics.getTotalNormalSize(),\n+                statistics.getTotalHighSize(), statistics.getTotalErrorSize())\n+                + \"## New Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getNewLowSize(), statistics.getNewNormalSize(),\n+                statistics.getNewHighSize(), statistics.getNewErrorSize())\n+                + \"## Delta Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getDeltaLowSize(), statistics.getDeltaNormalSize(),\n+                statistics.getDeltaHighSize(), statistics.getDeltaErrorSize());\n+    }\n+\n+    private String generateSeverityText(final int low, final int normal, final int high, final int error) {\n+        return \"* low: \" + low + \"\\n\"\n+                + \"* Normal: \" + normal + \"\\n\"\n+                + \"* High: \" + high + \"\\n\"\n+                + \"* Error: \" + error + \"\\n\";\n+    }\n+\n+    private ChecksConclusion extractChecksConclusion(final QualityGateStatus status) {\n+        switch (status) {\n+            case INACTIVE:\n+                return ChecksConclusion.SUCCESS;\n+            case FAILED:\n+                return ChecksConclusion.FAILURE;\n+            case WARNING:\n+                return ChecksConclusion.NEUTRAL;", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwNzUxMA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453107510", "bodyText": "WARNING vs. FAILED is a Jenkins specific concept that does not exist in Github", "author": "uhafner", "createdAt": "2020-07-10T22:38:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyODU0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkzMTU0Mw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r452931543", "bodyText": "I looked into how safe this is,\nIt seems like it in the current state it will only work if all builds are using a github app.\nIf the API and implementation was separated out to different plugins (which I think it needs to be so that warnings-ng doesn't have to depend on github-branch-source) then it would fall back to a NullChecksPublisher and it would be far safer. In that case it would only fail for users with the github-checks plugin installed when they don't have a github app configured.\nThoughts?", "author": "timja", "createdAt": "2020-07-10T15:57:38Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesRecorder.java", "diffHunk": "@@ -703,7 +702,8 @@ void publishResult(final Run<?, ?> run, final TaskListener listener, final Strin\n                 reportName, referenceJobName, referenceBuildId, ignoreQualityGate, ignoreFailedBuilds,\n                 getSourceCodeCharset(),\n                 new LogHandler(listener, loggerName, report.getReport()), statusHandler, failOnError);\n-        publisher.attachAction(trendChartType);\n+        ResultAction action = publisher.attachAction(trendChartType);\n+        publisher.publishChecks(action);", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1ODg3Mg==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r452958872", "bodyText": "Not all builds, but builds from a github-branch-source project, for other project builds, they will still get NullChecksPublisher which is safe to use.\nBut for the stable use of warnings-plugin (since it is going to be used for ci.jenkin.io), maybe it's better to split the plugin before releasing this feature for warnings-ng? @uhafner", "author": "XiongKezhi", "createdAt": "2020-07-10T16:50:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkzMTU0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzExMDM0MA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453110340", "bodyText": "We cannot release the changes in the warning plugin before we do an official release of the Checks API to the update center anyway.\nShouldn't the ChecksPublisherFactory return a NullPublisher if the GitHub App is not configured for the run?", "author": "uhafner", "createdAt": "2020-07-10T22:49:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkzMTU0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE3OTg5Ng==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453179896", "bodyText": "ah, currently not, but it can be easily done if it is safer.", "author": "XiongKezhi", "createdAt": "2020-07-11T10:10:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkzMTU0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE4MTYwNg==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453181606", "bodyText": "yes it should be done", "author": "timja", "createdAt": "2020-07-11T10:33:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkzMTU0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA5NTY3OQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453095679", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .withName(result.getId())\n          \n          \n            \n                            .withName(labelProvider.getName())", "author": "uhafner", "createdAt": "2020-07-10T21:59:32Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -148,6 +159,29 @@ ResultAction attachAction(final TrendChartType trendChartType) {\n         return action;\n     }\n \n+    /**\n+     * Publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI.\n+     */\n+    public void publishChecks(final ResultAction action) {\n+        AnalysisResult result = action.getResult();\n+        IssuesStatistics totals = result.getTotals();\n+\n+        ChecksPublisher publisher = ChecksPublisherFactory.fromRun(run);\n+        publisher.publish(new ChecksDetailsBuilder()\n+                .withName(result.getId())", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE5MTE0NA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453191144", "bodyText": "Prefer using labelProvider.getId() since the doc uses \"code-coverage\" as an example.", "author": "XiongKezhi", "createdAt": "2020-07-11T12:38:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA5NTY3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwNjIwNg==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453206206", "bodyText": "what doc? name is fine imo", "author": "timja", "createdAt": "2020-07-11T15:34:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA5NTY3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwNjQ0MQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453206441", "bodyText": "the GitHub doc for check run: https://docs.github.com/en/rest/reference/checks#check-runs.", "author": "XiongKezhi", "createdAt": "2020-07-11T15:36:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA5NTY3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwNzYzMQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453207631", "bodyText": "from what I've seen elsewhere including the checks on this PR everyone else is putting human readable names there.", "author": "timja", "createdAt": "2020-07-11T15:51:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA5NTY3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwODU5OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453208598", "bodyText": "I'll change it then", "author": "XiongKezhi", "createdAt": "2020-07-11T16:01:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA5NTY3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA5NjQ4OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453096488", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    .withTitle(StringUtils.capitalize(result.getId()) + \" Warnings\")\n          \n          \n            \n                                    .withTitle(labelProvider.getLinkName())", "author": "uhafner", "createdAt": "2020-07-10T22:01:18Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -148,6 +159,29 @@ ResultAction attachAction(final TrendChartType trendChartType) {\n         return action;\n     }\n \n+    /**\n+     * Publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI.\n+     */\n+    public void publishChecks(final ResultAction action) {\n+        AnalysisResult result = action.getResult();\n+        IssuesStatistics totals = result.getTotals();\n+\n+        ChecksPublisher publisher = ChecksPublisherFactory.fromRun(run);\n+        publisher.publish(new ChecksDetailsBuilder()\n+                .withName(result.getId())\n+                .withStatus(ChecksStatus.COMPLETED)\n+                .withConclusion(extractChecksConclusion(result.getQualityGateStatus()))\n+                .withOutput(new ChecksOutputBuilder()\n+                        .withTitle(StringUtils.capitalize(result.getId()) + \" Warnings\")", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwNDMzMQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453104331", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .withDetailsURL(result.getOwner().getParent().getAbsoluteUrl() + result.getOwner().getSearchUrl()\n          \n          \n            \n                                    + result.getId())\n          \n          \n            \n                            .withDetailsURL(action.getAbsoluteUrl())", "author": "uhafner", "createdAt": "2020-07-10T22:25:58Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -148,6 +159,29 @@ ResultAction attachAction(final TrendChartType trendChartType) {\n         return action;\n     }\n \n+    /**\n+     * Publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI.\n+     */\n+    public void publishChecks(final ResultAction action) {\n+        AnalysisResult result = action.getResult();\n+        IssuesStatistics totals = result.getTotals();\n+\n+        ChecksPublisher publisher = ChecksPublisherFactory.fromRun(run);\n+        publisher.publish(new ChecksDetailsBuilder()\n+                .withName(result.getId())\n+                .withStatus(ChecksStatus.COMPLETED)\n+                .withConclusion(extractChecksConclusion(result.getQualityGateStatus()))\n+                .withOutput(new ChecksOutputBuilder()\n+                        .withTitle(StringUtils.capitalize(result.getId()) + \" Warnings\")\n+                        .withSummary(extractChecksSummary(totals))\n+                        .withText(extractChecksText(totals))\n+                        .withAnnotations(extractChecksAnnotations(result.getIssues()))\n+                        .build())\n+                .withDetailsURL(result.getOwner().getParent().getAbsoluteUrl() + result.getOwner().getSearchUrl()\n+                        + result.getId())", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwNDYxMw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453104613", "bodyText": "Required later:\nLabelProvider labelProvider = action.getLabelProvider();", "author": "uhafner", "createdAt": "2020-07-10T22:27:03Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -148,6 +159,29 @@ ResultAction attachAction(final TrendChartType trendChartType) {\n         return action;\n     }\n \n+    /**\n+     * Publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI.\n+     */\n+    public void publishChecks(final ResultAction action) {\n+        AnalysisResult result = action.getResult();\n+        IssuesStatistics totals = result.getTotals();", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwNDgzMQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453104831", "bodyText": "This code would be better placed in a separate class", "author": "uhafner", "createdAt": "2020-07-10T22:27:55Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -148,6 +159,29 @@ ResultAction attachAction(final TrendChartType trendChartType) {\n         return action;\n     }\n \n+    /**", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwNzA4Mw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453107083", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return \"* low: \" + low + \"\\n\"\n          \n          \n            \n                    return \"* Low: \" + low + \"\\n\"", "author": "uhafner", "createdAt": "2020-07-10T22:36:25Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -243,4 +277,64 @@ private QualityGateEvaluationMode determineQualityGateEvaluationMode(final Repor\n         }\n         return qualityGateEvaluationMode;\n     }\n+\n+    private String extractChecksSummary(final IssuesStatistics statistics) {\n+        return String.format(\"## %d issues in total:\\n\"\n+                        + \"- ### %d new issues\\n\"\n+                        + \"- ### %d Outstanding Issues\\n\"\n+                        + \"- ### %d delta issues\\n\"\n+                        + \"- ### %d fixed issues\",\n+                statistics.getTotalSize(), statistics.getNewSize(), statistics.getTotalSize() - statistics.getNewSize(),\n+                statistics.getDeltaSize(), statistics.getFixedSize());\n+    }\n+\n+    private String extractChecksText(final IssuesStatistics statistics) {\n+        return \"## Total Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getTotalLowSize(), statistics.getTotalNormalSize(),\n+                statistics.getTotalHighSize(), statistics.getTotalErrorSize())\n+                + \"## New Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getNewLowSize(), statistics.getNewNormalSize(),\n+                statistics.getNewHighSize(), statistics.getNewErrorSize())\n+                + \"## Delta Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getDeltaLowSize(), statistics.getDeltaNormalSize(),\n+                statistics.getDeltaHighSize(), statistics.getDeltaErrorSize());\n+    }\n+\n+    private String generateSeverityText(final int low, final int normal, final int high, final int error) {\n+        return \"* low: \" + low + \"\\n\"", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwNzE3NA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453107174", "bodyText": "I think it would make more sense to sort the other way round (in the output)", "author": "uhafner", "createdAt": "2020-07-10T22:36:53Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -243,4 +277,64 @@ private QualityGateEvaluationMode determineQualityGateEvaluationMode(final Repor\n         }\n         return qualityGateEvaluationMode;\n     }\n+\n+    private String extractChecksSummary(final IssuesStatistics statistics) {\n+        return String.format(\"## %d issues in total:\\n\"\n+                        + \"- ### %d new issues\\n\"\n+                        + \"- ### %d Outstanding Issues\\n\"\n+                        + \"- ### %d delta issues\\n\"\n+                        + \"- ### %d fixed issues\",\n+                statistics.getTotalSize(), statistics.getNewSize(), statistics.getTotalSize() - statistics.getNewSize(),\n+                statistics.getDeltaSize(), statistics.getFixedSize());\n+    }\n+\n+    private String extractChecksText(final IssuesStatistics statistics) {\n+        return \"## Total Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getTotalLowSize(), statistics.getTotalNormalSize(),\n+                statistics.getTotalHighSize(), statistics.getTotalErrorSize())\n+                + \"## New Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getNewLowSize(), statistics.getNewNormalSize(),\n+                statistics.getNewHighSize(), statistics.getNewErrorSize())\n+                + \"## Delta Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getDeltaLowSize(), statistics.getDeltaNormalSize(),\n+                statistics.getDeltaHighSize(), statistics.getDeltaErrorSize());\n+    }\n+\n+    private String generateSeverityText(final int low, final int normal, final int high, final int error) {", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwODM1OQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453108359", "bodyText": "The warnings plugin uses the magic value of 0 to indicate a warning for the whole file. Maybe I should map that to real values in analysis-model. However, columns can be 0 if not used, is this a problem or do we need to suppress the call in such cases?", "author": "uhafner", "createdAt": "2020-07-10T22:41:42Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesPublisher.java", "diffHunk": "@@ -243,4 +277,64 @@ private QualityGateEvaluationMode determineQualityGateEvaluationMode(final Repor\n         }\n         return qualityGateEvaluationMode;\n     }\n+\n+    private String extractChecksSummary(final IssuesStatistics statistics) {\n+        return String.format(\"## %d issues in total:\\n\"\n+                        + \"- ### %d new issues\\n\"\n+                        + \"- ### %d Outstanding Issues\\n\"\n+                        + \"- ### %d delta issues\\n\"\n+                        + \"- ### %d fixed issues\",\n+                statistics.getTotalSize(), statistics.getNewSize(), statistics.getTotalSize() - statistics.getNewSize(),\n+                statistics.getDeltaSize(), statistics.getFixedSize());\n+    }\n+\n+    private String extractChecksText(final IssuesStatistics statistics) {\n+        return \"## Total Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getTotalLowSize(), statistics.getTotalNormalSize(),\n+                statistics.getTotalHighSize(), statistics.getTotalErrorSize())\n+                + \"## New Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getNewLowSize(), statistics.getNewNormalSize(),\n+                statistics.getNewHighSize(), statistics.getNewErrorSize())\n+                + \"## Delta Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getDeltaLowSize(), statistics.getDeltaNormalSize(),\n+                statistics.getDeltaHighSize(), statistics.getDeltaErrorSize());\n+    }\n+\n+    private String generateSeverityText(final int low, final int normal, final int high, final int error) {\n+        return \"* low: \" + low + \"\\n\"\n+                + \"* Normal: \" + normal + \"\\n\"\n+                + \"* High: \" + high + \"\\n\"\n+                + \"* Error: \" + error + \"\\n\";\n+    }\n+\n+    private ChecksConclusion extractChecksConclusion(final QualityGateStatus status) {\n+        switch (status) {\n+            case INACTIVE:\n+                return ChecksConclusion.SUCCESS;\n+            case FAILED:\n+                return ChecksConclusion.FAILURE;\n+            case WARNING:\n+                return ChecksConclusion.NEUTRAL;\n+            case PASSED:\n+                return ChecksConclusion.SUCCESS;\n+            default:\n+                throw new IllegalArgumentException(\"Unsupported quality gate status: \" + status);\n+        }\n+    }\n+\n+    private List<ChecksAnnotation> extractChecksAnnotations(final Report issues) {\n+        return issues.stream()\n+                .map(issue -> new ChecksAnnotationBuilder()\n+                        .withPath(issue.getFileName())\n+                        .withTitle(issue.getType())\n+                        .withAnnotationLevel(ChecksAnnotationLevel.WARNING)\n+                        .withMessage(issue.getSeverity() + \": \" + issue.getMessage())\n+                        .withStartLine(issue.getLineStart())", "originalCommit": "84bd84b6519a5f2fca0c506bfafcf0e895e14571", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE3OTEwNA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453179104", "bodyText": "GitHub accepts 0 for the line field, but when using 0, the annotation will not be shown on the file changes view, it will only show in the check run page, so maybe GitHub thinks the same way as you do.\nFor columns, I didn't see anything different with or without it, same for multiple lines annotation \ud83e\udd37", "author": "XiongKezhi", "createdAt": "2020-07-11T10:00:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwODM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwNzc4MA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453207780", "bodyText": "maybe use line 1?", "author": "timja", "createdAt": "2020-07-11T15:53:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwODM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzMxNDU2MA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453314560", "bodyText": "I have not met such warnings for the whole file, what kind of these warnings are? Shouldn't the biggest unit in a file for these static analysis tools is class instead of the whole file?", "author": "XiongKezhi", "createdAt": "2020-07-12T13:08:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwODM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzMyNzU4OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453327588", "bodyText": "A search for .hasLineStart(0) in my test suite returns 77 matches \ud83d\ude04 So there are a lot of them. I don't know if that is useful though...", "author": "uhafner", "createdAt": "2020-07-12T15:03:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzEwODM1OQ=="}], "type": "inlineReview"}, {"oid": "a237d0043011bb986f232e5838801b16d52fc2f9", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/a237d0043011bb986f232e5838801b16d52fc2f9", "message": "Add WarningChecksPublisher", "committedDate": "2020-07-11T14:09:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwODg2Mg==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453208862", "bodyText": "Anything else can we do here for INACTIVE quality gate?", "author": "XiongKezhi", "createdAt": "2020-07-11T16:04:19Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisher.java", "diffHunk": "@@ -0,0 +1,120 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import edu.hm.hafner.analysis.Report;\n+\n+import hudson.model.Result;\n+\n+import io.jenkins.plugins.analysis.core.model.AnalysisResult;\n+import io.jenkins.plugins.analysis.core.model.ResultAction;\n+import io.jenkins.plugins.analysis.core.model.StaticAnalysisLabelProvider;\n+import io.jenkins.plugins.analysis.core.util.IssuesStatistics;\n+import io.jenkins.plugins.analysis.core.util.QualityGateStatus;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksPublisher;\n+import io.jenkins.plugins.checks.api.ChecksPublisherFactory;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static hudson.model.Result.*;\n+\n+/**\n+ * Publishes warnings as checks to scm platforms.\n+ *\n+ * @author Kezhi Xiong\n+ */\n+class WarningChecksPublisher {\n+    private final ResultAction action;\n+\n+    WarningChecksPublisher(final ResultAction action) {\n+        this.action = action;\n+    }\n+\n+    /**\n+     * Actually publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI.\n+     */\n+    void publishChecks() {\n+        AnalysisResult result = action.getResult();\n+        IssuesStatistics totals = result.getTotals();\n+\n+        StaticAnalysisLabelProvider labelProvider = action.getLabelProvider();\n+\n+        ChecksPublisher publisher = ChecksPublisherFactory.fromRun(action.getOwner());\n+        publisher.publish(new ChecksDetailsBuilder()\n+                .withName(labelProvider.getId())\n+                .withStatus(ChecksStatus.COMPLETED)\n+                .withConclusion(extractChecksConclusion(result.getQualityGateStatus()))\n+                .withOutput(new ChecksOutputBuilder()\n+                        .withTitle(labelProvider.getLinkName())\n+                        .withSummary(extractChecksSummary(totals))\n+                        .withText(extractChecksText(totals))\n+                        .withAnnotations(extractChecksAnnotations(result.getNewIssues()))\n+                        .build())\n+                .withDetailsURL(action.getAbsoluteUrl())\n+                .build());\n+    }\n+\n+    private String extractChecksSummary(final IssuesStatistics statistics) {\n+        return String.format(\"## %d issues in total:\\n\"\n+                        + \"- ### %d new issues\\n\"\n+                        + \"- ### %d outstanding Issues\\n\"\n+                        + \"- ### %d delta issues\\n\"\n+                        + \"- ### %d fixed issues\",\n+                statistics.getTotalSize(), statistics.getNewSize(), statistics.getTotalSize() - statistics.getNewSize(),\n+                statistics.getDeltaSize(), statistics.getFixedSize());\n+    }\n+\n+    private String extractChecksText(final IssuesStatistics statistics) {\n+        return \"## Total Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getTotalLowSize(), statistics.getTotalNormalSize(),\n+                statistics.getTotalHighSize(), statistics.getTotalErrorSize())\n+                + \"## New Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getNewLowSize(), statistics.getNewNormalSize(),\n+                statistics.getNewHighSize(), statistics.getNewErrorSize())\n+                + \"## Delta Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getDeltaLowSize(), statistics.getDeltaNormalSize(),\n+                statistics.getDeltaHighSize(), statistics.getDeltaErrorSize());\n+    }\n+\n+    private String generateSeverityText(final int low, final int normal, final int high, final int error) {\n+        return \"* Error: \" + error + \"\\n\"\n+                + \"* High: \" + high + \"\\n\"\n+                + \"* Normal: \" + normal + \"\\n\"\n+                + \"* Low: \" + low + \"\\n\";\n+    }\n+\n+    private ChecksConclusion extractChecksConclusion(final QualityGateStatus status) {\n+        switch (status) {\n+            case INACTIVE: // TODO:  determine conclusion for it", "originalCommit": "a237d0043011bb986f232e5838801b16d52fc2f9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzMyODAyOQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453328029", "bodyText": "I don't think so for the moment. If users want to fail a GitHub check because of some warnings but do not want to configure a quality gate in Jenkins then they need to open a feature request in the warnings plugin.", "author": "uhafner", "createdAt": "2020-07-12T15:06:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwODg2Mg=="}], "type": "inlineReview"}, {"oid": "9e1e25913aab0f15f972cf8605ec7b610675f6c5", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/9e1e25913aab0f15f972cf8605ec7b610675f6c5", "message": "Use label name for check name", "committedDate": "2020-07-12T13:59:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzMzMzY1OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453333658", "bodyText": "how about\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Actually publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI.\n          \n          \n            \n                 * Publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI, e.g. GitHub checks.", "author": "timja", "createdAt": "2020-07-12T15:58:38Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisher.java", "diffHunk": "@@ -0,0 +1,120 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import edu.hm.hafner.analysis.Report;\n+\n+import hudson.model.Result;\n+\n+import io.jenkins.plugins.analysis.core.model.AnalysisResult;\n+import io.jenkins.plugins.analysis.core.model.ResultAction;\n+import io.jenkins.plugins.analysis.core.model.StaticAnalysisLabelProvider;\n+import io.jenkins.plugins.analysis.core.util.IssuesStatistics;\n+import io.jenkins.plugins.analysis.core.util.QualityGateStatus;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksPublisher;\n+import io.jenkins.plugins.checks.api.ChecksPublisherFactory;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static hudson.model.Result.*;\n+\n+/**\n+ * Publishes warnings as checks to scm platforms.\n+ *\n+ * @author Kezhi Xiong\n+ */\n+class WarningChecksPublisher {\n+    private final ResultAction action;\n+\n+    WarningChecksPublisher(final ResultAction action) {\n+        this.action = action;\n+    }\n+\n+    /**\n+     * Actually publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI.", "originalCommit": "a237d0043011bb986f232e5838801b16d52fc2f9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b98237755af8d1d1861f2bda6efeb6c637ea0761", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/b98237755af8d1d1861f2bda6efeb6c637ea0761", "message": "Add checks publishing disable configuration", "committedDate": "2020-07-12T16:52:28Z", "type": "commit"}, {"oid": "2f36d693948c4c3d45310d5cc677cc202c0efe4c", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/2f36d693948c4c3d45310d5cc677cc202c0efe4c", "message": "Improve WarningChecksPublisher doc", "committedDate": "2020-07-12T16:55:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM0NzIwNA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453347204", "bodyText": "Booleans should not include is at the start the getter will include that", "author": "timja", "createdAt": "2020-07-12T18:17:40Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/PublishIssuesStep.java", "diffHunk": "@@ -58,6 +58,7 @@\n     private String referenceJobName = StringUtils.EMPTY;\n     private String referenceBuildId = StringUtils.EMPTY;\n     private boolean failOnError = false; // by default, it should not fail on error\n+    private boolean isChecksPublishingDisabled = false; // by default, warnings should be published to SCM platforms", "originalCommit": "2f36d693948c4c3d45310d5cc677cc202c0efe4c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxMjQ4Mw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453412483", "bodyText": "Just follows the similar options: \n  \n    \n      warnings-ng-plugin/plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesRecorder.java\n    \n    \n         Line 104\n      in\n      b2b19b2\n    \n    \n    \n    \n\n        \n          \n           private boolean isBlameDisabled; \n        \n    \n  \n\n\nIs this style used because the optional is used for disabling a feature? @uhafner", "author": "XiongKezhi", "createdAt": "2020-07-13T03:11:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM0NzIwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM0NzI0NA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453347244", "bodyText": "Should be isChecksPublishingDisabled and the pmd disable removed", "author": "timja", "createdAt": "2020-07-12T18:18:10Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesRecorder.java", "diffHunk": "@@ -362,6 +363,21 @@ public void setForensicsDisabled(final boolean forensicsDisabled) {\n         isForensicsDisabled = forensicsDisabled;\n     }\n \n+    /**\n+     * Returns whether checks publishing should be disabled.\n+     *\n+     * @return {@code true} if checks publishing should be disabled\n+     */\n+    @SuppressWarnings(\"PMD.BooleanGetMethodName\")\n+    public boolean getChecksPublishingDisabled() {", "originalCommit": "2f36d693948c4c3d45310d5cc677cc202c0efe4c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM0ODUzOQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r453348539", "bodyText": "I would probably call it publishChecks.", "author": "timja", "createdAt": "2020-07-12T18:31:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM0NzI0NA=="}], "type": "inlineReview"}, {"oid": "02e3a70424737b979403d797e661826008de4f75", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/02e3a70424737b979403d797e661826008de4f75", "message": "Tweak checks configuration", "committedDate": "2020-07-14T05:16:00Z", "type": "commit"}, {"oid": "ff0cb0c740f3ade13b7d0b146225b377f6b76a46", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/ff0cb0c740f3ade13b7d0b146225b377f6b76a46", "message": "Add tests for WarningChecksPublisher", "committedDate": "2020-07-14T08:28:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE5OTk1OQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454199959", "bodyText": "Note that using a positive setting and true as default will only work for new freestyle jobs. Existing jobs will not publish the results and need to be manually reconfigured. (This is no big thing, I just want to make sure that you are aware of this issue.)", "author": "uhafner", "createdAt": "2020-07-14T08:43:50Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/IssuesRecorder.java", "diffHunk": "@@ -103,7 +103,7 @@\n     private boolean isBlameDisabled;\n     private boolean isForensicsDisabled;\n \n-    private boolean isChecksPublishingDisabled;\n+    private boolean publishChecks = true; // by default, checks will be published", "originalCommit": "02e3a70424737b979403d797e661826008de4f75", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIzODk0NQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454238945", "bodyText": "oh, I didn't aware that, maybe it's better to make it backward compatible.", "author": "XiongKezhi", "createdAt": "2020-07-14T09:51:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE5OTk1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI0NzkxOQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454247919", "bodyText": "Should be fine...", "author": "timja", "createdAt": "2020-07-14T10:07:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE5OTk1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMzNTQzNA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454335434", "bodyText": "This is not related to backward compatibility. The question is just if existing users (of Freestyle jobs!) should automatically use the GitHub checks or not. For me it is also ok that they need to manually enable.", "author": "uhafner", "createdAt": "2020-07-14T12:56:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE5OTk1OQ=="}], "type": "inlineReview"}, {"oid": "4230adf53d5dcd2d3710375d349969e90f6d427f", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/4230adf53d5dcd2d3710375d349969e90f6d427f", "message": "Add tests for WarningChecksPublisher", "committedDate": "2020-07-14T09:11:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4Njg1MA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454986850", "bodyText": "Remove // comments. These comments typically get out of sync soon.", "author": "uhafner", "createdAt": "2020-07-15T11:38:59Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,104 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import org.junit.Test;\n+\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_REPORT_FILE = \"checkstyle.xml\";\n+    private static final String NEW_REPORT_FILE = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_REPORT_FILE);\n+        enableCheckStyleWarnings(project);\n+\n+        // trigger a build using the report file with 4 issues", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4NzQwNQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454987405", "bodyText": "If you have 2 builds use a variable reference for the first one and run or build for the second one (to make it consistent to most of my other tests)", "author": "uhafner", "createdAt": "2020-07-15T11:40:06Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,104 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import org.junit.Test;\n+\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_REPORT_FILE = \"checkstyle.xml\";\n+    private static final String NEW_REPORT_FILE = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_REPORT_FILE);\n+        enableCheckStyleWarnings(project);\n+\n+        // trigger a build using the report file with 4 issues\n+        Run<?, ?> run = buildSuccessfully(project);", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4NzY1NQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454987655", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    + \"- ### %d outstanding Issues\\n\"\n          \n          \n            \n                                    + \"- ### %d outstanding issues\\n\"", "author": "uhafner", "createdAt": "2020-07-15T11:40:38Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisher.java", "diffHunk": "@@ -0,0 +1,124 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import edu.hm.hafner.analysis.Report;\n+import edu.hm.hafner.util.VisibleForTesting;\n+\n+import io.jenkins.plugins.analysis.core.model.AnalysisResult;\n+import io.jenkins.plugins.analysis.core.model.ResultAction;\n+import io.jenkins.plugins.analysis.core.model.StaticAnalysisLabelProvider;\n+import io.jenkins.plugins.analysis.core.util.IssuesStatistics;\n+import io.jenkins.plugins.analysis.core.util.QualityGateStatus;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksPublisher;\n+import io.jenkins.plugins.checks.api.ChecksPublisherFactory;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+/**\n+ * Publishes warnings as checks to scm platforms.\n+ *\n+ * @author Kezhi Xiong\n+ */\n+class WarningChecksPublisher {\n+    private final ResultAction action;\n+\n+    WarningChecksPublisher(final ResultAction action) {\n+        this.action = action;\n+    }\n+\n+    /**\n+     * Publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI,\n+     * e.g. GitHub checks.\n+     */\n+    void publishChecks() {\n+        ChecksPublisher publisher = ChecksPublisherFactory.fromRun(action.getOwner());\n+        publisher.publish(extractChecksDetails());\n+    }\n+\n+    @VisibleForTesting\n+    ChecksDetails extractChecksDetails() {\n+        AnalysisResult result = action.getResult();\n+        IssuesStatistics totals = result.getTotals();\n+\n+        StaticAnalysisLabelProvider labelProvider = action.getLabelProvider();\n+\n+        return new ChecksDetailsBuilder()\n+                .withName(labelProvider.getName())\n+                .withStatus(ChecksStatus.COMPLETED)\n+                .withConclusion(extractChecksConclusion(result.getQualityGateStatus()))\n+                .withOutput(new ChecksOutputBuilder()\n+                        .withTitle(labelProvider.getLinkName())\n+                        .withSummary(extractChecksSummary(totals))\n+                        .withText(extractChecksText(totals))\n+                        .withAnnotations(extractChecksAnnotations(result.getNewIssues()))\n+                        .build())\n+                .withDetailsURL(action.getAbsoluteUrl())\n+                .build();\n+    }\n+\n+    private String extractChecksSummary(final IssuesStatistics statistics) {\n+        return String.format(\"## %d issues in total:\\n\"\n+                        + \"- ### %d new issues\\n\"\n+                        + \"- ### %d outstanding Issues\\n\"", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NTY4MA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454995680", "bodyText": "inline variable", "author": "uhafner", "createdAt": "2020-07-15T11:56:18Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,104 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import org.junit.Test;\n+\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_REPORT_FILE = \"checkstyle.xml\";\n+    private static final String NEW_REPORT_FILE = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_REPORT_FILE);\n+        enableCheckStyleWarnings(project);\n+\n+        // trigger a build using the report file with 4 issues\n+        Run<?, ?> run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(4)\n+                .hasNewSize(0);\n+\n+        // trigger a build using the report file with 2 new issues\n+        copyMultipleFilesToWorkspaceWithSuffix(project, NEW_REPORT_FILE);\n+        run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(6)\n+                .hasNewSize(2);\n+\n+        // extract details from result\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(run));\n+        ChecksDetails details = publisher.extractChecksDetails();\n+\n+        // verify extracted details\n+        ChecksDetails expectedDetails = createChecksDetailsBasedOnReportFile();\n+        assertThat(details)", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NTcyOQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454995729", "bodyText": "inline", "author": "uhafner", "createdAt": "2020-07-15T11:56:25Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,104 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import org.junit.Test;\n+\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_REPORT_FILE = \"checkstyle.xml\";\n+    private static final String NEW_REPORT_FILE = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_REPORT_FILE);\n+        enableCheckStyleWarnings(project);\n+\n+        // trigger a build using the report file with 4 issues\n+        Run<?, ?> run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(4)\n+                .hasNewSize(0);\n+\n+        // trigger a build using the report file with 2 new issues\n+        copyMultipleFilesToWorkspaceWithSuffix(project, NEW_REPORT_FILE);\n+        run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(6)\n+                .hasNewSize(2);\n+\n+        // extract details from result\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(run));\n+        ChecksDetails details = publisher.extractChecksDetails();\n+\n+        // verify extracted details\n+        ChecksDetails expectedDetails = createChecksDetailsBasedOnReportFile();\n+        assertThat(details)\n+                .usingRecursiveComparison()\n+                .ignoringFields(\"detailsURL\")\n+                .isEqualTo(expectedDetails);", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NTkxNA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454995914", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private ChecksDetails createChecksDetailsBasedOnReportFile() {\n          \n          \n            \n                private ChecksDetails createExpectedDetails() {", "author": "uhafner", "createdAt": "2020-07-15T11:56:47Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,104 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import org.junit.Test;\n+\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_REPORT_FILE = \"checkstyle.xml\";\n+    private static final String NEW_REPORT_FILE = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_REPORT_FILE);\n+        enableCheckStyleWarnings(project);\n+\n+        // trigger a build using the report file with 4 issues\n+        Run<?, ?> run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(4)\n+                .hasNewSize(0);\n+\n+        // trigger a build using the report file with 2 new issues\n+        copyMultipleFilesToWorkspaceWithSuffix(project, NEW_REPORT_FILE);\n+        run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(6)\n+                .hasNewSize(2);\n+\n+        // extract details from result\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(run));\n+        ChecksDetails details = publisher.extractChecksDetails();\n+\n+        // verify extracted details\n+        ChecksDetails expectedDetails = createChecksDetailsBasedOnReportFile();\n+        assertThat(details)\n+                .usingRecursiveComparison()\n+                .ignoringFields(\"detailsURL\")\n+                .isEqualTo(expectedDetails);\n+    }\n+\n+    private ChecksDetails createChecksDetailsBasedOnReportFile() {", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NjI3NA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454996274", "bodyText": "Do you have an example output that shows how this is rendered?", "author": "uhafner", "createdAt": "2020-07-15T11:57:25Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,104 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import org.junit.Test;\n+\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_REPORT_FILE = \"checkstyle.xml\";\n+    private static final String NEW_REPORT_FILE = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_REPORT_FILE);\n+        enableCheckStyleWarnings(project);\n+\n+        // trigger a build using the report file with 4 issues\n+        Run<?, ?> run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(4)\n+                .hasNewSize(0);\n+\n+        // trigger a build using the report file with 2 new issues\n+        copyMultipleFilesToWorkspaceWithSuffix(project, NEW_REPORT_FILE);\n+        run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(6)\n+                .hasNewSize(2);\n+\n+        // extract details from result\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(run));\n+        ChecksDetails details = publisher.extractChecksDetails();\n+\n+        // verify extracted details\n+        ChecksDetails expectedDetails = createChecksDetailsBasedOnReportFile();\n+        assertThat(details)\n+                .usingRecursiveComparison()\n+                .ignoringFields(\"detailsURL\")\n+                .isEqualTo(expectedDetails);\n+    }\n+\n+    private ChecksDetails createChecksDetailsBasedOnReportFile() {\n+        ChecksDetailsBuilder builder = new ChecksDetailsBuilder()\n+                .withName(\"CheckStyle\")\n+                .withStatus(ChecksStatus.COMPLETED)\n+                .withConclusion(ChecksConclusion.SUCCESS)\n+                .withDetailsURL(\"http://localhost:39121/jenkins/job/test0/2/\");\n+\n+\n+        ChecksOutput output = new ChecksOutputBuilder()\n+                .withTitle(\"CheckStyle Warnings\")\n+                .withSummary(\"## 6 issues in total:\\n\"\n+                        + \"- ### 2 new issues\\n\"\n+                        + \"- ### 4 outstanding Issues\\n\"\n+                        + \"- ### 2 delta issues\\n\"\n+                        + \"- ### 0 fixed issues\")\n+                .withText(\"## Total Issue Statistics:\\n* Error: 6\\n* High: 0\\n* Normal: 0\\n* Low: 0\\n\"\n+                        + \"## New Issue Statistics:\\n* Error: 2\\n* High: 0\\n* Normal: 0\\n* Low: 0\\n\"\n+                        + \"## Delta Issue Statistics:\\n* Error: 2\\n* High: 0\\n* Normal: 0\\n* Low: 0\\n\")\n+                .addAnnotation(new ChecksAnnotationBuilder()", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAyOTgyNA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455029824", "bodyText": "No for this specific report :)\nI just copied the checkstyle.xml file from other test cases and constructed the annotation based on what the warnings publisher should do for it.", "author": "XiongKezhi", "createdAt": "2020-07-15T12:56:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NjI3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAzNTQ4NA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455035484", "bodyText": "Ok, then I have to wait until I see it in action on my machine. I just wondered if - ###  is valid in markdown since the hashes are used for headers.", "author": "uhafner", "createdAt": "2020-07-15T13:06:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NjI3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAzNjA3Mw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455036073", "bodyText": "Is there any specific reason that you sometimes use * and sometimes - for bullet points?", "author": "uhafner", "createdAt": "2020-07-15T13:07:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NjI3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA0MzU3MA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455043570", "bodyText": "No, I just googled - ### because I want the bullet points with smaller text than ##.\nThe markdown just don't have a unified standard, - ### is valid in GitHub but not valid in somewhere else (say the preview tool: https://markdownlivepreview.com/)\nTurns out * ### is supported by GitHub as well, just tried it. I'll make them consistent.", "author": "XiongKezhi", "createdAt": "2020-07-15T13:18:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NjI3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NzA2OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r454997068", "bodyText": "What are the requirements on GitHub side for the resolution of the filenames? Do they want relative paths starting from the repository root?", "author": "uhafner", "createdAt": "2020-07-15T11:58:58Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,104 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import org.junit.Test;\n+\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_REPORT_FILE = \"checkstyle.xml\";\n+    private static final String NEW_REPORT_FILE = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_REPORT_FILE);\n+        enableCheckStyleWarnings(project);\n+\n+        // trigger a build using the report file with 4 issues\n+        Run<?, ?> run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(4)\n+                .hasNewSize(0);\n+\n+        // trigger a build using the report file with 2 new issues\n+        copyMultipleFilesToWorkspaceWithSuffix(project, NEW_REPORT_FILE);\n+        run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(6)\n+                .hasNewSize(2);\n+\n+        // extract details from result\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(run));\n+        ChecksDetails details = publisher.extractChecksDetails();\n+\n+        // verify extracted details\n+        ChecksDetails expectedDetails = createChecksDetailsBasedOnReportFile();\n+        assertThat(details)\n+                .usingRecursiveComparison()\n+                .ignoringFields(\"detailsURL\")\n+                .isEqualTo(expectedDetails);\n+    }\n+\n+    private ChecksDetails createChecksDetailsBasedOnReportFile() {\n+        ChecksDetailsBuilder builder = new ChecksDetailsBuilder()\n+                .withName(\"CheckStyle\")\n+                .withStatus(ChecksStatus.COMPLETED)\n+                .withConclusion(ChecksConclusion.SUCCESS)\n+                .withDetailsURL(\"http://localhost:39121/jenkins/job/test0/2/\");\n+\n+\n+        ChecksOutput output = new ChecksOutputBuilder()\n+                .withTitle(\"CheckStyle Warnings\")\n+                .withSummary(\"## 6 issues in total:\\n\"\n+                        + \"- ### 2 new issues\\n\"\n+                        + \"- ### 4 outstanding Issues\\n\"\n+                        + \"- ### 2 delta issues\\n\"\n+                        + \"- ### 0 fixed issues\")\n+                .withText(\"## Total Issue Statistics:\\n* Error: 6\\n* High: 0\\n* Normal: 0\\n* Low: 0\\n\"\n+                        + \"## New Issue Statistics:\\n* Error: 2\\n* High: 0\\n* Normal: 0\\n* Low: 0\\n\"\n+                        + \"## Delta Issue Statistics:\\n* Error: 2\\n* High: 0\\n* Normal: 0\\n* Low: 0\\n\")\n+                .addAnnotation(new ChecksAnnotationBuilder()\n+                        .withPath(\"X:/Build/Results/jobs/Maven/workspace/tasks/src/main/java/hudson/plugins\"", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAzMTQyNA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455031424", "bodyText": "Not officially documented by GitHub, but from what I have done, it's relative paths from the repository root.", "author": "XiongKezhi", "createdAt": "2020-07-15T12:59:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NzA2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAzNDQ4Mg==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455034482", "bodyText": "Ok, then using getFileName should work. (This is not always so easy since people sometimes design jobs using a complex directory layout. Then it is already hard for my plugin to refer to the correct source code location)", "author": "uhafner", "createdAt": "2020-07-15T13:04:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NzA2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyODM1NQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455128355", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    .withAnnotations(extractChecksAnnotations(result.getNewIssues()))\n          \n          \n            \n                                    .withAnnotations(extractChecksAnnotations(result.getNewIssues(), labelProvider))", "author": "uhafner", "createdAt": "2020-07-15T15:10:50Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisher.java", "diffHunk": "@@ -0,0 +1,124 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import edu.hm.hafner.analysis.Report;\n+import edu.hm.hafner.util.VisibleForTesting;\n+\n+import io.jenkins.plugins.analysis.core.model.AnalysisResult;\n+import io.jenkins.plugins.analysis.core.model.ResultAction;\n+import io.jenkins.plugins.analysis.core.model.StaticAnalysisLabelProvider;\n+import io.jenkins.plugins.analysis.core.util.IssuesStatistics;\n+import io.jenkins.plugins.analysis.core.util.QualityGateStatus;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksPublisher;\n+import io.jenkins.plugins.checks.api.ChecksPublisherFactory;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+/**\n+ * Publishes warnings as checks to scm platforms.\n+ *\n+ * @author Kezhi Xiong\n+ */\n+class WarningChecksPublisher {\n+    private final ResultAction action;\n+\n+    WarningChecksPublisher(final ResultAction action) {\n+        this.action = action;\n+    }\n+\n+    /**\n+     * Publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI,\n+     * e.g. GitHub checks.\n+     */\n+    void publishChecks() {\n+        ChecksPublisher publisher = ChecksPublisherFactory.fromRun(action.getOwner());\n+        publisher.publish(extractChecksDetails());\n+    }\n+\n+    @VisibleForTesting\n+    ChecksDetails extractChecksDetails() {\n+        AnalysisResult result = action.getResult();\n+        IssuesStatistics totals = result.getTotals();\n+\n+        StaticAnalysisLabelProvider labelProvider = action.getLabelProvider();\n+\n+        return new ChecksDetailsBuilder()\n+                .withName(labelProvider.getName())\n+                .withStatus(ChecksStatus.COMPLETED)\n+                .withConclusion(extractChecksConclusion(result.getQualityGateStatus()))\n+                .withOutput(new ChecksOutputBuilder()\n+                        .withTitle(labelProvider.getLinkName())\n+                        .withSummary(extractChecksSummary(totals))\n+                        .withText(extractChecksText(totals))\n+                        .withAnnotations(extractChecksAnnotations(result.getNewIssues()))", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyOTE0Ng==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455129146", "bodyText": "Then you get for CheckStyle, SpotBugs a detailed description as well:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    .withRawDetails(issue.getDescription())\n          \n          \n            \n                                    .withRawDetails(labelProvider.getDescription(issue))\n          \n      \n    \n    \n  \n\nThis description will contain HTML tags...", "author": "uhafner", "createdAt": "2020-07-15T15:12:00Z", "path": "plugin/src/main/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisher.java", "diffHunk": "@@ -0,0 +1,124 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import edu.hm.hafner.analysis.Report;\n+import edu.hm.hafner.util.VisibleForTesting;\n+\n+import io.jenkins.plugins.analysis.core.model.AnalysisResult;\n+import io.jenkins.plugins.analysis.core.model.ResultAction;\n+import io.jenkins.plugins.analysis.core.model.StaticAnalysisLabelProvider;\n+import io.jenkins.plugins.analysis.core.util.IssuesStatistics;\n+import io.jenkins.plugins.analysis.core.util.QualityGateStatus;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksPublisher;\n+import io.jenkins.plugins.checks.api.ChecksPublisherFactory;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+/**\n+ * Publishes warnings as checks to scm platforms.\n+ *\n+ * @author Kezhi Xiong\n+ */\n+class WarningChecksPublisher {\n+    private final ResultAction action;\n+\n+    WarningChecksPublisher(final ResultAction action) {\n+        this.action = action;\n+    }\n+\n+    /**\n+     * Publishes checks to platforms. Afterwards, all warnings are available in corresponding platform's UI,\n+     * e.g. GitHub checks.\n+     */\n+    void publishChecks() {\n+        ChecksPublisher publisher = ChecksPublisherFactory.fromRun(action.getOwner());\n+        publisher.publish(extractChecksDetails());\n+    }\n+\n+    @VisibleForTesting\n+    ChecksDetails extractChecksDetails() {\n+        AnalysisResult result = action.getResult();\n+        IssuesStatistics totals = result.getTotals();\n+\n+        StaticAnalysisLabelProvider labelProvider = action.getLabelProvider();\n+\n+        return new ChecksDetailsBuilder()\n+                .withName(labelProvider.getName())\n+                .withStatus(ChecksStatus.COMPLETED)\n+                .withConclusion(extractChecksConclusion(result.getQualityGateStatus()))\n+                .withOutput(new ChecksOutputBuilder()\n+                        .withTitle(labelProvider.getLinkName())\n+                        .withSummary(extractChecksSummary(totals))\n+                        .withText(extractChecksText(totals))\n+                        .withAnnotations(extractChecksAnnotations(result.getNewIssues()))\n+                        .build())\n+                .withDetailsURL(action.getAbsoluteUrl())\n+                .build();\n+    }\n+\n+    private String extractChecksSummary(final IssuesStatistics statistics) {\n+        return String.format(\"## %d issues in total:\\n\"\n+                        + \"- ### %d new issues\\n\"\n+                        + \"- ### %d outstanding Issues\\n\"\n+                        + \"- ### %d delta issues\\n\"\n+                        + \"- ### %d fixed issues\",\n+                statistics.getTotalSize(), statistics.getNewSize(), statistics.getTotalSize() - statistics.getNewSize(),\n+                statistics.getDeltaSize(), statistics.getFixedSize());\n+    }\n+\n+    private String extractChecksText(final IssuesStatistics statistics) {\n+        return \"## Total Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getTotalLowSize(), statistics.getTotalNormalSize(),\n+                statistics.getTotalHighSize(), statistics.getTotalErrorSize())\n+                + \"## New Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getNewLowSize(), statistics.getNewNormalSize(),\n+                statistics.getNewHighSize(), statistics.getNewErrorSize())\n+                + \"## Delta Issue Statistics:\\n\"\n+                + generateSeverityText(statistics.getDeltaLowSize(), statistics.getDeltaNormalSize(),\n+                statistics.getDeltaHighSize(), statistics.getDeltaErrorSize());\n+    }\n+\n+    private String generateSeverityText(final int low, final int normal, final int high, final int error) {\n+        return \"* Error: \" + error + \"\\n\"\n+                + \"* High: \" + high + \"\\n\"\n+                + \"* Normal: \" + normal + \"\\n\"\n+                + \"* Low: \" + low + \"\\n\";\n+    }\n+\n+    private ChecksConclusion extractChecksConclusion(final QualityGateStatus status) {\n+        switch (status) {\n+            case INACTIVE:\n+            case PASSED:\n+                return ChecksConclusion.SUCCESS;\n+            case FAILED:\n+            case WARNING:\n+                return ChecksConclusion.FAILURE;\n+            default:\n+                throw new IllegalArgumentException(\"Unsupported quality gate status: \" + status);\n+        }\n+    }\n+\n+    private List<ChecksAnnotation> extractChecksAnnotations(final Report issues) {\n+        return issues.stream()\n+                .map(issue -> new ChecksAnnotationBuilder()\n+                        .withPath(issue.getFileName())\n+                        .withTitle(issue.getType())\n+                        .withAnnotationLevel(ChecksAnnotationLevel.WARNING)\n+                        .withMessage(issue.getSeverity() + \": \" + issue.getMessage())\n+                        .withStartLine(issue.getLineStart())\n+                        .withEndLine(issue.getLineEnd())\n+                        .withStartColumn(issue.getColumnStart())\n+                        .withEndColumn(issue.getColumnEnd())\n+                        .withRawDetails(issue.getDescription())", "originalCommit": "4230adf53d5dcd2d3710375d349969e90f6d427f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc0ODI1OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455748258", "bodyText": "the GitHub just supports markdown (or HTML tag) on the summary and description of the whole output, but not for these specific annotations.\nI'll find a way to extract the plain text as the description (message field) and left the HTML in the raw_details field.", "author": "XiongKezhi", "createdAt": "2020-07-16T12:28:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyOTE0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc1MjM1NQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455752355", "bodyText": "Is the getMessage method in Issue just extract the message from the HTML? Then we do not need any further changes.", "author": "XiongKezhi", "createdAt": "2020-07-16T12:35:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyOTE0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc4MTYzMA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r455781630", "bodyText": "The message in Issue returns the header of an issue. The description returns additional information for that issue (from the parsed content). And the description of the labelProvider does return a HTML description of the bug pattern for specific tools (CheckStyle, Spotbugs, PMD), from the tools website or jar file. This part is not in the parsed content. If that part is empty the labelProvider does return the description of the issue. So none of the methods removes the HTML.", "author": "uhafner", "createdAt": "2020-07-16T13:23:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyOTE0Ng=="}], "type": "inlineReview"}, {"oid": "31db276268701389a46434cbf266a858b4b2caca", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/31db276268701389a46434cbf266a858b4b2caca", "message": "Test quality gate in WarningChecksPublisher", "committedDate": "2020-07-16T13:55:30Z", "type": "commit"}, {"oid": "12726c3fafc429f0bda3ecc96c9469367367434f", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/12726c3fafc429f0bda3ecc96c9469367367434f", "message": "Merge pull request #3 from XiongKezhi/checks-publisher-tests\n\nTest quality gate in WarningChecksPublisher", "committedDate": "2020-07-16T15:39:19Z", "type": "commit"}, {"oid": "d8081ee558f1bab5578a0be8487ac239df741d9e", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/d8081ee558f1bab5578a0be8487ac239df741d9e", "message": "Parse html for checks annotation message", "committedDate": "2020-07-18T14:02:16Z", "type": "commit"}, {"oid": "2c4883a1a12aa17d9be8cd7b88101bb80032ae6d", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/2c4883a1a12aa17d9be8cd7b88101bb80032ae6d", "message": "Use checks description from label provider", "committedDate": "2020-07-18T16:49:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA2NjY4OQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r457066689", "bodyText": "It would make the test more readable if you would also check the value of the quality gate via getAnalysisResult(). From the test one does not see that there are only 6 warnings in the build.", "author": "uhafner", "createdAt": "2020-07-20T05:33:57Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,182 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import java.util.Optional;\n+import java.util.function.Consumer;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.junit.Test;\n+\n+import com.google.errorprone.annotations.CanIgnoreReturnValue;\n+\n+import hudson.model.AbstractProject;\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Result;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.analysis.core.util.QualityGate.QualityGateResult;\n+import io.jenkins.plugins.analysis.core.util.QualityGate.QualityGateType;\n+import io.jenkins.plugins.analysis.warnings.PVSStudio;\n+import io.jenkins.plugins.analysis.warnings.checkstyle.CheckStyle;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_CHECK_STYLE_REPORT = \"checkstyle.xml\";\n+    private static final String NEW_CHECK_STYLE_REPORT = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_CHECK_STYLE_REPORT);\n+        enableCheckStyleWarnings(project);\n+\n+        Run<?, ?> reference = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(reference))\n+                .hasTotalSize(4)\n+                .hasNewSize(0);\n+\n+        copyMultipleFilesToWorkspaceWithSuffix(project, NEW_CHECK_STYLE_REPORT);\n+        Run<?, ?> run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(6)\n+                .hasNewSize(2);\n+\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(run));\n+        assertThat(publisher.extractChecksDetails())\n+                .hasFieldOrPropertyWithValue(\"detailsURL\", Optional.of(getResultAction(run).getAbsoluteUrl()))\n+                .usingRecursiveComparison()\n+                .ignoringFields(\"detailsURL\")\n+                .isEqualTo(createExpectedCheckStyleDetails());\n+    }\n+\n+    @Test\n+    public void shouldConcludeChecksAsSuccessWhenQualityGateIsPassed() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(NEW_CHECK_STYLE_REPORT);\n+        enableAndConfigureCheckstyle(project,\n+                recorder -> recorder.addQualityGate(10, QualityGateType.TOTAL, QualityGateResult.UNSTABLE));\n+\n+        Run<?, ?> build = buildSuccessfully(project);", "originalCommit": "2c4883a1a12aa17d9be8cd7b88101bb80032ae6d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA2NzIyOQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r457067229", "bodyText": "Can you wrap that part in a method and call it with QualityGateResult.FAILURE and QualityGateResult.UNSTABLE. Then we can see that both types correctly map to ChecksConclusion.FAILURE", "author": "uhafner", "createdAt": "2020-07-20T05:35:10Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,182 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import java.util.Optional;\n+import java.util.function.Consumer;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.junit.Test;\n+\n+import com.google.errorprone.annotations.CanIgnoreReturnValue;\n+\n+import hudson.model.AbstractProject;\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Result;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.analysis.core.util.QualityGate.QualityGateResult;\n+import io.jenkins.plugins.analysis.core.util.QualityGate.QualityGateType;\n+import io.jenkins.plugins.analysis.warnings.PVSStudio;\n+import io.jenkins.plugins.analysis.warnings.checkstyle.CheckStyle;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_CHECK_STYLE_REPORT = \"checkstyle.xml\";\n+    private static final String NEW_CHECK_STYLE_REPORT = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_CHECK_STYLE_REPORT);\n+        enableCheckStyleWarnings(project);\n+\n+        Run<?, ?> reference = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(reference))\n+                .hasTotalSize(4)\n+                .hasNewSize(0);\n+\n+        copyMultipleFilesToWorkspaceWithSuffix(project, NEW_CHECK_STYLE_REPORT);\n+        Run<?, ?> run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(6)\n+                .hasNewSize(2);\n+\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(run));\n+        assertThat(publisher.extractChecksDetails())\n+                .hasFieldOrPropertyWithValue(\"detailsURL\", Optional.of(getResultAction(run).getAbsoluteUrl()))\n+                .usingRecursiveComparison()\n+                .ignoringFields(\"detailsURL\")\n+                .isEqualTo(createExpectedCheckStyleDetails());\n+    }\n+\n+    @Test\n+    public void shouldConcludeChecksAsSuccessWhenQualityGateIsPassed() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(NEW_CHECK_STYLE_REPORT);\n+        enableAndConfigureCheckstyle(project,\n+                recorder -> recorder.addQualityGate(10, QualityGateType.TOTAL, QualityGateResult.UNSTABLE));\n+\n+        Run<?, ?> build = buildSuccessfully(project);\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(build));\n+\n+        assertThat(publisher.extractChecksDetails().getConclusion())\n+                .isEqualTo(ChecksConclusion.SUCCESS);\n+    }\n+\n+    @Test\n+    public void shouldConcludeChecksAsFailureWhenQualityGateIsFailed() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(NEW_CHECK_STYLE_REPORT);\n+        enableAndConfigureCheckstyle(project,\n+                recorder -> recorder.addQualityGate(1, QualityGateType.TOTAL, QualityGateResult.FAILURE));\n+\n+        Run<?, ?> build = buildWithResult(project, Result.FAILURE);\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(build));\n+\n+        assertThat(publisher.extractChecksDetails().getConclusion())\n+                .isEqualTo(ChecksConclusion.FAILURE);", "originalCommit": "2c4883a1a12aa17d9be8cd7b88101bb80032ae6d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3OTg3MA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r457079870", "bodyText": "Is the idea here to replace a <a> with plain text? Or shouldn't this be [text](url)?", "author": "uhafner", "createdAt": "2020-07-20T06:01:16Z", "path": "plugin/src/test/java/io/jenkins/plugins/analysis/core/steps/WarningChecksPublisherITest.java", "diffHunk": "@@ -0,0 +1,182 @@\n+package io.jenkins.plugins.analysis.core.steps;\n+\n+import java.util.Optional;\n+import java.util.function.Consumer;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.junit.Test;\n+\n+import com.google.errorprone.annotations.CanIgnoreReturnValue;\n+\n+import hudson.model.AbstractProject;\n+import hudson.model.FreeStyleProject;\n+import hudson.model.Result;\n+import hudson.model.Run;\n+\n+import io.jenkins.plugins.analysis.core.testutil.IntegrationTestWithJenkinsPerTest;\n+import io.jenkins.plugins.analysis.core.util.QualityGate.QualityGateResult;\n+import io.jenkins.plugins.analysis.core.util.QualityGate.QualityGateType;\n+import io.jenkins.plugins.analysis.warnings.PVSStudio;\n+import io.jenkins.plugins.analysis.warnings.checkstyle.CheckStyle;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationBuilder;\n+import io.jenkins.plugins.checks.api.ChecksAnnotation.ChecksAnnotationLevel;\n+import io.jenkins.plugins.checks.api.ChecksConclusion;\n+import io.jenkins.plugins.checks.api.ChecksDetails;\n+import io.jenkins.plugins.checks.api.ChecksDetails.ChecksDetailsBuilder;\n+import io.jenkins.plugins.checks.api.ChecksOutput;\n+import io.jenkins.plugins.checks.api.ChecksOutput.ChecksOutputBuilder;\n+import io.jenkins.plugins.checks.api.ChecksStatus;\n+\n+import static io.jenkins.plugins.analysis.core.assertions.Assertions.*;\n+\n+public class WarningChecksPublisherITest extends IntegrationTestWithJenkinsPerTest {\n+    private static final String OLD_CHECK_STYLE_REPORT = \"checkstyle.xml\";\n+    private static final String NEW_CHECK_STYLE_REPORT = \"checkstyle1.xml\";\n+\n+    /**\n+     * Verifies that {@link WarningChecksPublisher} constructs the {@link ChecksDetails} correctly\n+     * with only new issues.\n+     */\n+    @Test\n+    public void shouldCreateChecksDetailsWithNewIssuesAsAnnotations() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(OLD_CHECK_STYLE_REPORT);\n+        enableCheckStyleWarnings(project);\n+\n+        Run<?, ?> reference = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(reference))\n+                .hasTotalSize(4)\n+                .hasNewSize(0);\n+\n+        copyMultipleFilesToWorkspaceWithSuffix(project, NEW_CHECK_STYLE_REPORT);\n+        Run<?, ?> run = buildSuccessfully(project);\n+        assertThat(getAnalysisResult(run))\n+                .hasTotalSize(6)\n+                .hasNewSize(2);\n+\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(run));\n+        assertThat(publisher.extractChecksDetails())\n+                .hasFieldOrPropertyWithValue(\"detailsURL\", Optional.of(getResultAction(run).getAbsoluteUrl()))\n+                .usingRecursiveComparison()\n+                .ignoringFields(\"detailsURL\")\n+                .isEqualTo(createExpectedCheckStyleDetails());\n+    }\n+\n+    @Test\n+    public void shouldConcludeChecksAsSuccessWhenQualityGateIsPassed() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(NEW_CHECK_STYLE_REPORT);\n+        enableAndConfigureCheckstyle(project,\n+                recorder -> recorder.addQualityGate(10, QualityGateType.TOTAL, QualityGateResult.UNSTABLE));\n+\n+        Run<?, ?> build = buildSuccessfully(project);\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(build));\n+\n+        assertThat(publisher.extractChecksDetails().getConclusion())\n+                .isEqualTo(ChecksConclusion.SUCCESS);\n+    }\n+\n+    @Test\n+    public void shouldConcludeChecksAsFailureWhenQualityGateIsFailed() {\n+        FreeStyleProject project = createFreeStyleProjectWithWorkspaceFiles(NEW_CHECK_STYLE_REPORT);\n+        enableAndConfigureCheckstyle(project,\n+                recorder -> recorder.addQualityGate(1, QualityGateType.TOTAL, QualityGateResult.FAILURE));\n+\n+        Run<?, ?> build = buildWithResult(project, Result.FAILURE);\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(build));\n+\n+        assertThat(publisher.extractChecksDetails().getConclusion())\n+                .isEqualTo(ChecksConclusion.FAILURE);\n+    }\n+\n+    @Test\n+    public void shouldParseHtmlMessage() {\n+        FreeStyleProject project = createFreeStyleProject();\n+        enableWarnings(project, new PVSStudio());\n+\n+        buildSuccessfully(project);\n+\n+        copySingleFileToWorkspace(project, \"PVSReport.xml\", \"PVSReport.plog\");\n+        Run<?, ?> run = buildSuccessfully(project);\n+\n+        WarningChecksPublisher publisher = new WarningChecksPublisher(getResultAction(run));\n+        ChecksDetails details = publisher.extractChecksDetails();\n+\n+        assertThat(details.getOutput().get().getChecksAnnotations())\n+                .usingElementComparatorOnFields(\"message\")\n+                .containsOnly(new ChecksAnnotationBuilder()\n+                        .withMessage(\"ERROR:\\n\"\n+                                + \"Some diagnostic messages may contain incorrect line number.\\n\"\n+                                + \"V002:https://www.viva64.com/en/w/v002/\")", "originalCommit": "2c4883a1a12aa17d9be8cd7b88101bb80032ae6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzM1NDAzNw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/550#discussion_r457354037", "bodyText": "The message field doesn't support markdown", "author": "XiongKezhi", "createdAt": "2020-07-20T12:51:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3OTg3MA=="}], "type": "inlineReview"}, {"oid": "108e9c8beed839d3136acb8b12d3cb7faf4f37d7", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/108e9c8beed839d3136acb8b12d3cb7faf4f37d7", "message": "Add unstable quality gate result test for checks publisher", "committedDate": "2020-07-20T14:15:24Z", "type": "commit"}, {"oid": "64335cd8c8384c2a535d9499bc8e51c8683048a4", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/64335cd8c8384c2a535d9499bc8e51c8683048a4", "message": "Improve checks title to contain issues statistics.", "committedDate": "2020-07-27T10:51:32Z", "type": "commit"}, {"oid": "8d8acf4851163ea9fac22cdb1aca5270c607c8cd", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/8d8acf4851163ea9fac22cdb1aca5270c607c8cd", "message": "Migrate github-checks to checks-api", "committedDate": "2020-07-27T12:38:04Z", "type": "commit"}, {"oid": "171778206d877605c26ff6ceeab862412e487a14", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/171778206d877605c26ff6ceeab862412e487a14", "message": "Change checks configuration to skipPublishingChecks", "committedDate": "2020-07-27T12:39:28Z", "type": "commit"}, {"oid": "52bf01bdaa523940c1c9ff456b4c3cbe2a1e4209", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/52bf01bdaa523940c1c9ff456b4c3cbe2a1e4209", "message": "Merge branch 'master' into publish-checks", "committedDate": "2020-07-27T12:50:13Z", "type": "commit"}, {"oid": "91975e787406b013eb2133b223b5c5db4c9819a3", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/91975e787406b013eb2133b223b5c5db4c9819a3", "message": "Bump checks api to 0.1.0", "committedDate": "2020-07-28T03:46:02Z", "type": "commit"}, {"oid": "cd46852b45cfd8e4b2b122d8b92d6968a696affc", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/cd46852b45cfd8e4b2b122d8b92d6968a696affc", "message": "Update serial version UID", "committedDate": "2020-07-28T04:26:44Z", "type": "commit"}, {"oid": "af01e607274011e50e53192a89593244984d5ca0", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/af01e607274011e50e53192a89593244984d5ca0", "message": "Update version to 9.0.0 due to incompatible change for publishing checks", "committedDate": "2020-07-28T05:13:27Z", "type": "commit"}, {"oid": "ff27c99551e681198ead36d8e8884e779dc63337", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/ff27c99551e681198ead36d8e8884e779dc63337", "message": "Tweak checks publishing.", "committedDate": "2020-07-28T22:38:53Z", "type": "commit"}, {"oid": "ff27c99551e681198ead36d8e8884e779dc63337", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/ff27c99551e681198ead36d8e8884e779dc63337", "message": "Tweak checks publishing.", "committedDate": "2020-07-28T22:38:53Z", "type": "forcePushed"}]}