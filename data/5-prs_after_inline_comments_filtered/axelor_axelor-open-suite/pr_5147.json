{"pr_number": 5147, "pr_title": "Anomaly #26572: Convert lead into partner", "pr_createdAt": "2020-03-18T13:09:19Z", "pr_url": "https://github.com/axelor/axelor-open-suite/pull/5147", "timeline": [{"oid": "0943e22f13a253d372b54f76a6d48d82b7b670aa", "url": "https://github.com/axelor/axelor-open-suite/commit/0943e22f13a253d372b54f76a6d48d82b7b670aa", "message": "Anomaly #26572: Convert lead into partner", "committedDate": "2020-03-20T13:14:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MDExNA==", "url": "https://github.com/axelor/axelor-open-suite/pull/5147#discussion_r396370114", "bodyText": "if using reference dummy field no need of setting name. directly set the object.", "author": "rch-axelor", "createdAt": "2020-03-23T11:05:35Z", "path": "axelor-crm/src/main/java/com/axelor/apps/crm/web/ConvertLeadWizardController.java", "diffHunk": "@@ -177,14 +177,14 @@ public void setDefaults(ActionRequest request, ActionResponse response) throws A\n \n     Lead lead = findLead(request);\n \n-    response.setAttr(\"$primaryAddress\", \"value\", lead.getPrimaryAddress());\n-    response.setAttr(\"$primaryCity\", \"value\", lead.getPrimaryCity());\n-    response.setAttr(\"$primaryState\", \"value\", lead.getPrimaryState());\n-    response.setAttr(\"$primaryPostalCode\", \"value\", lead.getPrimaryPostalCode());\n-    response.setAttr(\"$primaryCountry\", \"value\", lead.getPrimaryCountry());\n+    response.setAttr(\"$partner.$primaryAddress\", \"value\", lead.getPrimaryAddress());\n+    response.setAttr(\"$partner.$primaryCity\", \"value\", lead.getPrimaryCity().getName());\n+    response.setAttr(\"$partner.$primaryState\", \"value\", lead.getPrimaryState().getName());", "originalCommit": "0943e22f13a253d372b54f76a6d48d82b7b670aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MDE3OA==", "url": "https://github.com/axelor/axelor-open-suite/pull/5147#discussion_r396370178", "bodyText": "City and state are not required field in lead so NPE will be there if empty.", "author": "rch-axelor", "createdAt": "2020-03-23T11:05:41Z", "path": "axelor-crm/src/main/java/com/axelor/apps/crm/web/ConvertLeadWizardController.java", "diffHunk": "@@ -177,14 +177,14 @@ public void setDefaults(ActionRequest request, ActionResponse response) throws A\n \n     Lead lead = findLead(request);\n \n-    response.setAttr(\"$primaryAddress\", \"value\", lead.getPrimaryAddress());\n-    response.setAttr(\"$primaryCity\", \"value\", lead.getPrimaryCity());\n-    response.setAttr(\"$primaryState\", \"value\", lead.getPrimaryState());\n-    response.setAttr(\"$primaryPostalCode\", \"value\", lead.getPrimaryPostalCode());\n-    response.setAttr(\"$primaryCountry\", \"value\", lead.getPrimaryCountry());\n+    response.setAttr(\"$partner.$primaryAddress\", \"value\", lead.getPrimaryAddress());\n+    response.setAttr(\"$partner.$primaryCity\", \"value\", lead.getPrimaryCity().getName());\n+    response.setAttr(\"$partner.$primaryState\", \"value\", lead.getPrimaryState().getName());\n+    response.setAttr(\"$partner.$primaryPostalCode\", \"value\", lead.getPrimaryPostalCode());\n+    response.setAttr(\"$partner.$primaryCountry\", \"value\", lead.getPrimaryCountry());\n     response.setAttr(\"$contactAddress\", \"value\", lead.getPrimaryAddress());\n-    response.setAttr(\"$contactCity\", \"value\", lead.getPrimaryCity());\n-    response.setAttr(\"$contactState\", \"value\", lead.getPrimaryState());\n+    response.setAttr(\"$contactCity\", \"value\", lead.getPrimaryCity().getName());\n+    response.setAttr(\"$contactState\", \"value\", lead.getPrimaryState().getName());", "originalCommit": "0943e22f13a253d372b54f76a6d48d82b7b670aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "88b9d59fad500a3eaecb3df58c1f220535e0151a", "url": "https://github.com/axelor/axelor-open-suite/commit/88b9d59fad500a3eaecb3df58c1f220535e0151a", "message": "RM#26145\n\nIn supplychain-stock-details-by-product-form, company now autofill with user's active company when this view entry is from menu", "committedDate": "2020-03-02T16:56:36Z", "type": "forcePushed"}, {"oid": "6799a6973fc4af46366bdddd6dae0aeb00eb7425", "url": "https://github.com/axelor/axelor-open-suite/commit/6799a6973fc4af46366bdddd6dae0aeb00eb7425", "message": "Anomaly #26572: Convert lead into partner", "committedDate": "2020-03-24T10:43:58Z", "type": "commit"}, {"oid": "6799a6973fc4af46366bdddd6dae0aeb00eb7425", "url": "https://github.com/axelor/axelor-open-suite/commit/6799a6973fc4af46366bdddd6dae0aeb00eb7425", "message": "Anomaly #26572: Convert lead into partner", "committedDate": "2020-03-24T10:43:58Z", "type": "forcePushed"}]}