{"pr_number": 11383, "pr_title": "Make reserved space on directories only when required", "pr_createdAt": "2020-05-05T06:05:50Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11383", "timeline": [{"oid": "ef903c1c59c13487e3033fad32fa18aa7282ac01", "url": "https://github.com/Alluxio/alluxio/commit/ef903c1c59c13487e3033fad32fa18aa7282ac01", "message": "Reserve space on directories only when required", "committedDate": "2020-05-05T06:04:39Z", "type": "commit"}, {"oid": "797685f7b58eb5783a1adcdebb75f4060fe972e6", "url": "https://github.com/Alluxio/alluxio/commit/797685f7b58eb5783a1adcdebb75f4060fe972e6", "message": "Test changes", "committedDate": "2020-05-05T06:33:39Z", "type": "commit"}, {"oid": "797685f7b58eb5783a1adcdebb75f4060fe972e6", "url": "https://github.com/Alluxio/alluxio/commit/797685f7b58eb5783a1adcdebb75f4060fe972e6", "message": "Test changes", "committedDate": "2020-05-05T06:33:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE4NjE5MQ==", "url": "https://github.com/Alluxio/alluxio/pull/11383#discussion_r421186191", "bodyText": "Should we reserve the total tier reserve bytes in each directory in the tier?", "author": "calvinjia", "createdAt": "2020-05-07T01:28:19Z", "path": "core/server/worker/src/main/java/alluxio/worker/block/meta/StorageTier.java", "diffHunk": "@@ -99,7 +104,7 @@ private void initStorageTier()\n       int mediumTypeindex = i >= dirMedium.length ? dirMedium.length - 1 : i;\n       long capacity = FormatUtils.parseSpaceSize(dirQuotas[index]);\n       try {\n-        StorageDir dir = StorageDir.newStorageDir(this, i, capacity, reservedSpaceBytes,\n+        StorageDir dir = StorageDir.newStorageDir(this, i, capacity, reservedBytes,", "originalCommit": "797685f7b58eb5783a1adcdebb75f4060fe972e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE4NzU4MA==", "url": "https://github.com/Alluxio/alluxio/pull/11383#discussion_r421187580", "bodyText": "This is indeed per-dir reserved bytes.\nThere is no total reserved bytes defined since we want to be able to make progress on each directory.", "author": "ggezer", "createdAt": "2020-05-07T01:33:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE4NjE5MQ=="}], "type": "inlineReview"}]}