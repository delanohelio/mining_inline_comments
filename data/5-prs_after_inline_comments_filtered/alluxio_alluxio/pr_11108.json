{"pr_number": 11108, "pr_title": "Improve how tests handle restarting workers", "pr_createdAt": "2020-03-03T18:53:21Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11108", "timeline": [{"oid": "d94177cd38e31c563095c94904679de45580cc68", "url": "https://github.com/Alluxio/alluxio/commit/d94177cd38e31c563095c94904679de45580cc68", "message": "Improve how tests handle restarting workers", "committedDate": "2020-03-03T18:52:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIyNTk4NQ==", "url": "https://github.com/Alluxio/alluxio/pull/11108#discussion_r387225985", "bodyText": "Should we check if the master is started here/getMasterProcess() returns null?\nI didn't check the method signature but I think I vaguely remember that it could be possible", "author": "ZacBlanco", "createdAt": "2020-03-03T18:56:10Z", "path": "minicluster/src/main/java/alluxio/master/AbstractLocalAlluxioCluster.java", "diffHunk": "@@ -255,6 +257,11 @@ public void stopWorkers() throws Exception {\n       }\n     }\n     mWorkerThreads.clear();\n+\n+    // forget all the workers in the master\n+    DefaultBlockMaster bm = (DefaultBlockMaster) getLocalAlluxioMaster().getMasterProcess()\n+        .getMaster(BlockMaster.class);\n+    bm.forgetAllWorkers();", "originalCommit": "d94177cd38e31c563095c94904679de45580cc68", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIyNzY3OA==", "url": "https://github.com/Alluxio/alluxio/pull/11108#discussion_r387227678", "bodyText": "it checks for null now", "author": "gpang", "createdAt": "2020-03-03T18:59:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIyNTk4NQ=="}], "type": "inlineReview"}, {"oid": "9df771fdb6ed1ab0f97022440e76c703877714c0", "url": "https://github.com/Alluxio/alluxio/commit/9df771fdb6ed1ab0f97022440e76c703877714c0", "message": "Check for null master", "committedDate": "2020-03-03T18:58:38Z", "type": "commit"}]}