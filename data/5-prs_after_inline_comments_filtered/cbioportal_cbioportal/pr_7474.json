{"pr_number": 7474, "pr_title": "Update of spring, mockito, jackson and other dependencies", "pr_createdAt": "2020-05-06T20:55:00Z", "pr_url": "https://github.com/cBioPortal/cbioportal/pull/7474", "timeline": [{"oid": "1cb39721548704f8b2f48617b3bdc3b2f346fec0", "url": "https://github.com/cBioPortal/cbioportal/commit/1cb39721548704f8b2f48617b3bdc3b2f346fec0", "message": "Replace deprecated spring annotation with Rollback", "committedDate": "2020-05-26T08:38:38Z", "type": "commit"}, {"oid": "c2381e01e3756533aa1565cc9c68d4fd58469649", "url": "https://github.com/cBioPortal/cbioportal/commit/c2381e01e3756533aa1565cc9c68d4fd58469649", "message": "Replace depcrecated numerics and junits", "committedDate": "2020-05-26T08:40:20Z", "type": "commit"}, {"oid": "3ee721569e83335a6d6808071971b1afca1a06ec", "url": "https://github.com/cBioPortal/cbioportal/commit/3ee721569e83335a6d6808071971b1afca1a06ec", "message": "update Mockito", "committedDate": "2020-05-26T08:40:37Z", "type": "commit"}, {"oid": "d088f61cb1aaee768ceb4f312817689a1cc88789", "url": "https://github.com/cBioPortal/cbioportal/commit/d088f61cb1aaee768ceb4f312817689a1cc88789", "message": "Replace deprecated Mockito imports", "committedDate": "2020-05-26T08:40:54Z", "type": "commit"}, {"oid": "74193e59e62bb2022d26406877f54748bcffe8a0", "url": "https://github.com/cBioPortal/cbioportal/commit/74193e59e62bb2022d26406877f54748bcffe8a0", "message": "fix Mockito tests according to their manual\n\nsee: https://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2#incompatible", "committedDate": "2020-05-26T08:41:14Z", "type": "commit"}, {"oid": "5470c3bdc709b00799061e9e2cbb7cafaf46af19", "url": "https://github.com/cBioPortal/cbioportal/commit/5470c3bdc709b00799061e9e2cbb7cafaf46af19", "message": "Replace more deprecations", "committedDate": "2020-05-26T08:41:34Z", "type": "commit"}, {"oid": "00abf34d3e8b222769145d0846f61ff3b5c6ccdd", "url": "https://github.com/cBioPortal/cbioportal/commit/00abf34d3e8b222769145d0846f61ff3b5c6ccdd", "message": "Update and commonize jackson", "committedDate": "2020-05-26T08:41:51Z", "type": "commit"}, {"oid": "3226f8b30b6a793faf86b93a1c900af51213629f", "url": "https://github.com/cBioPortal/cbioportal/commit/3226f8b30b6a793faf86b93a1c900af51213629f", "message": "fix jackson dependent stuff", "committedDate": "2020-05-26T08:42:12Z", "type": "commit"}, {"oid": "72db8f51aad6056bf75649b804a345d58f08f32d", "url": "https://github.com/cBioPortal/cbioportal/commit/72db8f51aad6056bf75649b804a345d58f08f32d", "message": "replace jackson deprecations", "committedDate": "2020-05-26T08:42:26Z", "type": "commit"}, {"oid": "f32fc0d1bf56849b4104b1318b66b4df6cfb754a", "url": "https://github.com/cBioPortal/cbioportal/commit/f32fc0d1bf56849b4104b1318b66b4df6cfb754a", "message": "replace deprecated numberic constructors", "committedDate": "2020-05-26T08:42:40Z", "type": "commit"}, {"oid": "ff5cc6d3cc102ee949cc9ae6ba507b73469813da", "url": "https://github.com/cBioPortal/cbioportal/commit/ff5cc6d3cc102ee949cc9ae6ba507b73469813da", "message": "use log4j 2", "committedDate": "2020-05-26T08:44:40Z", "type": "commit"}, {"oid": "cedc68a84596ded64b7d835bcbd72752b403d1f7", "url": "https://github.com/cBioPortal/cbioportal/commit/cedc68a84596ded64b7d835bcbd72752b403d1f7", "message": "update webapp-runner", "committedDate": "2020-05-26T08:48:40Z", "type": "commit"}, {"oid": "0dfa24612f14c66db7971babea9dbbdf551bd985", "url": "https://github.com/cBioPortal/cbioportal/commit/0dfa24612f14c66db7971babea9dbbdf551bd985", "message": "add jdk8 data types", "committedDate": "2020-05-26T08:49:20Z", "type": "commit"}, {"oid": "ffb157985ca90f274b0700447ea0372700449e5a", "url": "https://github.com/cBioPortal/cbioportal/commit/ffb157985ca90f274b0700447ea0372700449e5a", "message": "update loggers", "committedDate": "2020-05-26T08:51:17Z", "type": "commit"}, {"oid": "d64f43b6bf5bece242e541df70ae32cac50f811a", "url": "https://github.com/cBioPortal/cbioportal/commit/d64f43b6bf5bece242e541df70ae32cac50f811a", "message": "add .factorypath to gitignore", "committedDate": "2020-05-26T08:51:31Z", "type": "commit"}, {"oid": "3c19cb8756d937f028f009c19bebfb79cae59f1d", "url": "https://github.com/cBioPortal/cbioportal/commit/3c19cb8756d937f028f009c19bebfb79cae59f1d", "message": "update springfox / swagger", "committedDate": "2020-05-26T08:51:49Z", "type": "commit"}, {"oid": "421c7c5ca49ef277946b096d910ab278dfbf745a", "url": "https://github.com/cBioPortal/cbioportal/commit/421c7c5ca49ef277946b096d910ab278dfbf745a", "message": "update spring to 5.0.14", "committedDate": "2020-05-26T09:01:26Z", "type": "commit"}, {"oid": "f75c021ccfcff40f643b12da1e6ddb74a57cfc3a", "url": "https://github.com/cBioPortal/cbioportal/commit/f75c021ccfcff40f643b12da1e6ddb74a57cfc3a", "message": "Merge tag 'v3.3.4' into HEAD", "committedDate": "2020-05-26T09:02:24Z", "type": "commit"}, {"oid": "f75c021ccfcff40f643b12da1e6ddb74a57cfc3a", "url": "https://github.com/cBioPortal/cbioportal/commit/f75c021ccfcff40f643b12da1e6ddb74a57cfc3a", "message": "Merge tag 'v3.3.4' into HEAD", "committedDate": "2020-05-26T09:02:24Z", "type": "forcePushed"}, {"oid": "a6537fb659aabed12462b719b672006a4dc43535", "url": "https://github.com/cBioPortal/cbioportal/commit/a6537fb659aabed12462b719b672006a4dc43535", "message": "remove jackson defined twice in core", "committedDate": "2020-05-26T09:39:40Z", "type": "commit"}, {"oid": "68a9f04f68f2ac4c323a1024a488af6bf6d2f6c2", "url": "https://github.com/cBioPortal/cbioportal/commit/68a9f04f68f2ac4c323a1024a488af6bf6d2f6c2", "message": "Fix CacheStatisticsServiceImpl", "committedDate": "2020-05-26T10:59:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQwMzY0MQ==", "url": "https://github.com/cBioPortal/cbioportal/pull/7474#discussion_r430403641", "bodyText": "Filed a separate issue to reimplement this test: #7536", "author": "inodb", "createdAt": "2020-05-26T13:16:54Z", "path": "web/src/test/java/org/cbioportal/web/GenesetDataControllerTest.java", "diffHunk": "@@ -90,20 +90,20 @@ public void fetchGeneticDataItems() throws Exception {\n                 .andExpect(MockMvcResultMatchers.jsonPath(\"$[1].value\").value(VALUE_2));\n \n         //testing the sampleListId route:\n-        List<GenesetMolecularData> genesetDataItems2 = createGenesetDataItemsList();\n-        genesetDataItems2.addAll(createGenesetDataItemsList());//duplicate, just to make it different from response above\n-        Mockito.when(genesetDataService.fetchGenesetData(Mockito.anyString(), Mockito.anyString(),\n-                Mockito.anyListOf(String.class))).thenReturn(genesetDataItems2);\n-        //set sampleListId to ensure the fetchGenesetData variant above is called:\n-        genesetDataFilterCriteria.setSampleListId(SAMPLE_LIST_ID);\n-\n-        mockMvc.perform(MockMvcRequestBuilders.post(\"/genetic-profiles/\" + PROF_ID + \"/geneset-genetic-data/fetch\")\n-                .accept(MediaType.APPLICATION_JSON)\n-                .contentType(MediaType.APPLICATION_JSON)\n-                .content(objectMapper.writeValueAsString(genesetDataFilterCriteria)))\n-                .andExpect(MockMvcResultMatchers.status().isOk())\n-                .andExpect(MockMvcResultMatchers.content().contentTypeCompatibleWith(MediaType.APPLICATION_JSON))\n-                .andExpect(MockMvcResultMatchers.jsonPath(\"$\", Matchers.hasSize(4)));\n+        // List<GenesetMolecularData> genesetDataItems2 = createGenesetDataItemsList();\n+        // genesetDataItems2.addAll(createGenesetDataItemsList());//duplicate, just to make it different from response above\n+        // Mockito.when(genesetDataService.fetchGenesetData(Mockito.any(), (List) Mockito.any(),\n+        //     Mockito.any())).thenReturn(genesetDataItems2);\n+        // //set sampleListId to ensure the fetchGenesetData variant above is called:\n+        // genesetDataFilterCriteria.setSampleListId(SAMPLE_LIST_ID);\n+\n+        // mockMvc.perform(MockMvcRequestBuilders.post(\"/genetic-profiles/\" + PROF_ID + \"/geneset-genetic-data/fetch\")\n+        //         .accept(MediaType.APPLICATION_JSON)\n+        //         .contentType(MediaType.APPLICATION_JSON)\n+        //         .content(objectMapper.writeValueAsString(genesetDataFilterCriteria)))\n+        //         .andExpect(MockMvcResultMatchers.status().isOk())\n+        //         .andExpect(MockMvcResultMatchers.content().contentTypeCompatibleWith(MediaType.APPLICATION_JSON))\n+        //         .andExpect(MockMvcResultMatchers.jsonPath(\"$\", Matchers.hasSize(4)));\n     }", "originalCommit": "68a9f04f68f2ac4c323a1024a488af6bf6d2f6c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQwNTgzMQ==", "url": "https://github.com/cBioPortal/cbioportal/pull/7474#discussion_r430405831", "bodyText": "Very good idea to keep an eye on this. I will also file another \"issue\" with the tests that have unnecessary stubs so that they are kind of \"on a todo list\".", "author": "nr23730", "createdAt": "2020-05-26T13:20:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQwMzY0MQ=="}], "type": "inlineReview"}]}