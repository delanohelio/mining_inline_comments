{"pr_number": 7856, "pr_title": "Fix generic meta endpoint error when fetching by stable ids only", "pr_createdAt": "2020-09-01T21:53:23Z", "pr_url": "https://github.com/cBioPortal/cbioportal/pull/7856", "timeline": [{"oid": "286bd86e7deff5098ea947ce6402055ab0d991d2", "url": "https://github.com/cBioPortal/cbioportal/commit/286bd86e7deff5098ea947ce6402055ab0d991d2", "message": "Fix generic meta endpoint error when fetching by stable ids only", "committedDate": "2020-09-01T21:48:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1ODc0OQ==", "url": "https://github.com/cBioPortal/cbioportal/pull/7856#discussion_r482358749", "bodyText": "Not important, you could use identity function here\n.collect(Collectors.toMap(Function.identity(), Function.identity()));", "author": "kalletlak", "createdAt": "2020-09-02T19:43:25Z", "path": "service/src/main/java/org/cbioportal/service/impl/GenericAssayServiceImpl.java", "diffHunk": "@@ -58,16 +58,22 @@\n                 List<String> stableIdsInMolecularProfiles = genericAssayRepository.getGenericAssayStableIdsByMolecularIds(distinctMolecularProfileIds);\n                 allStableIds.addAll(stableIdsInMolecularProfiles);\n             }\n-        } \n-        if (stableIds != null) {\n-\t\t\tMap<String, String> allStableIdMap = allStableIds\n-\t\t\t\t\t.stream()\n-\t\t\t\t\t.collect(Collectors.toMap(stableId -> stableId, stableId -> stableId));\n-\n-\t\t\tallStableIds = stableIds\n-\t\t\t\t\t.stream()\n-\t\t\t\t\t.filter(stableId -> allStableIdMap.containsKey(stableId))\n-\t\t\t\t\t.collect(Collectors.toSet());\n+            // if stableIds and molecularProfileIds both exist, find the common\n+            if (stableIds != null) {\n+                Map<String, String> allStableIdMap = allStableIds\n+                        .stream()\n+                        .collect(Collectors.toMap(stableId -> stableId, stableId -> stableId));", "originalCommit": "286bd86e7deff5098ea947ce6402055ab0d991d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}