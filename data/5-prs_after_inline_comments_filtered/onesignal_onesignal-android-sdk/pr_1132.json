{"pr_number": 1132, "pr_title": "Improvements", "pr_createdAt": "2020-09-02T23:49:00Z", "pr_url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1132", "timeline": [{"oid": "bfd0a84289b5a239f3a683d939256c2fe502b041", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/bfd0a84289b5a239f3a683d939256c2fe502b041", "message": "Improvements\n\n  * Refactor from runnable definition to lambda runnable\n  * Rename OneSignalPrefs to SharedPreferenceUtil\n  * Delay pauseInAppMessages due to need context for IAM Controller\n  * Remove empty file NotificationRestorer.java\n  * Add null check for getPermissionSubscriptionState inside demo app\n  * Rename OSNotificationOpenResult to OSNotificationOpenedResult", "committedDate": "2020-09-02T23:46:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwODU4Mg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1132#discussion_r482608582", "bodyText": "Do lamdas not have their own scope so we can keep this isSubscribed?", "author": "jkasten2", "createdAt": "2020-09-03T00:03:38Z", "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/model/MainActivityViewModel.java", "diffHunk": "@@ -468,123 +460,97 @@ public void setupSettingsLayout() {\n \n     private void setupSubscriptionSwitch() {\n         boolean isPermissionEnabled = OneSignal\n-                .getPermissionSubscriptionState()\n-                .getPermissionStatus()\n-                .getEnabled();\n+                .getPermissionSubscriptionState() != null &&\n+                OneSignal\n+                        .getPermissionSubscriptionState()\n+                        .getPermissionStatus()\n+                        .getEnabled();\n \n         final boolean isSubscribed = OneSignal\n-                .getPermissionSubscriptionState()\n-                .getSubscriptionStatus()\n-                .getSubscribed();\n+                .getPermissionSubscriptionState() != null &&\n+                OneSignal\n+                        .getPermissionSubscriptionState()\n+                        .getSubscriptionStatus()\n+                        .getSubscribed();\n \n         subscriptionSwitch.setEnabled(isPermissionEnabled);\n         subscriptionSwitch.setChecked(isSubscribed);\n \n         if (isPermissionEnabled) {\n-            subscriptionRelativeLayout.setOnClickListener(new View.OnClickListener() {\n-                @Override\n-                public void onClick(View v) {\n-                    boolean isSubscribed = subscriptionSwitch.isChecked();\n-                    subscriptionSwitch.setChecked(!isSubscribed);\n-                    OneSignal.setSubscription(!isSubscribed);\n-                }\n+            subscriptionRelativeLayout.setOnClickListener(v -> {\n+                boolean isSubscribed1 = subscriptionSwitch.isChecked();\n+                subscriptionSwitch.setChecked(!isSubscribed1);\n+                OneSignal.setSubscription(!isSubscribed1);\n             });\n         } else {\n-            subscriptionRelativeLayout.setOnClickListener(new View.OnClickListener() {\n-                @Override\n-                public void onClick(View v) {\n-                    intentTo.notificationPermissions();\n-                }\n-            });\n+            subscriptionRelativeLayout.setOnClickListener(v -> intentTo.notificationPermissions());\n         }\n \n-        subscriptionSwitch.setOnClickListener(new View.OnClickListener() {\n-            @Override\n-            public void onClick(View v) {\n-                boolean isSubscribed = subscriptionSwitch.isChecked();\n-                OneSignal.setSubscription(!isSubscribed);\n-            }\n+        subscriptionSwitch.setOnClickListener(v -> {\n+            boolean isSubscribed12 = subscriptionSwitch.isChecked();", "originalCommit": "bfd0a84289b5a239f3a683d939256c2fe502b041", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYxMTgyNw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1132#discussion_r482611827", "bodyText": "unfortunately, lambdas don't have custom scope :/", "author": "Jeasmine", "createdAt": "2020-09-03T00:14:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwODU4Mg=="}], "type": "inlineReview"}]}