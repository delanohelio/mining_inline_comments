{"pr_number": 962, "pr_title": "Add tags to IAM", "pr_createdAt": "2020-02-26T18:14:30Z", "pr_url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962", "timeline": [{"oid": "df06119c658bfe63d26f1b4d21e116e21439c207", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/df06119c658bfe63d26f1b4d21e116e21439c207", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-02-26T18:16:33Z", "type": "forcePushed"}, {"oid": "fa4165e737abad3056b2d7dbadb47bfbd70aac53", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/fa4165e737abad3056b2d7dbadb47bfbd70aac53", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-02-26T19:45:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3ODg3Mg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r384678872", "bodyText": "Any params like this coming from the payload of the IAM should be a little more complex. Maybe place a TODO here so we know to come back and make sure they match the keys we end of using to construct the payload from the dashboard.", "author": "mikechoch", "createdAt": "2020-02-26T18:25:12Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageAction.java", "diffHunk": "@@ -18,6 +18,7 @@\n     private static final String FIRST_CLICK = \"first_click\";\n     private static final String CLOSES_MESSAGE = \"closes_message\";\n     private static final String OUTCOME = \"outcome\";", "originalCommit": "df06119c658bfe63d26f1b4d21e116e21439c207", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3ODk0Nw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r384678947", "bodyText": "place a TODO here so we know to come back and make sure they match the keys", "author": "mikechoch", "createdAt": "2020-02-26T18:25:20Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageAction.java", "diffHunk": "@@ -18,6 +18,7 @@\n     private static final String FIRST_CLICK = \"first_click\";\n     private static final String CLOSES_MESSAGE = \"closes_message\";\n     private static final String OUTCOME = \"outcome\";\n+    private static final String TAGS = \"tags\";", "originalCommit": "df06119c658bfe63d26f1b4d21e116e21439c207", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3OTAxMA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r384679010", "bodyText": "place a TODO here so we know to come back and make sure they match the keys", "author": "mikechoch", "createdAt": "2020-02-26T18:25:27Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageTag.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.onesignal;\n+\n+import android.support.annotation.NonNull;\n+\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+\n+public class OSInAppMessageTag {\n+\n+    private static final String ADD_TAGS = \"add\";", "originalCommit": "df06119c658bfe63d26f1b4d21e116e21439c207", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQwNDAwNA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r387404004", "bodyText": "Change to adds", "author": "mikechoch", "createdAt": "2020-03-04T01:41:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3OTAxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3OTA1Mg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r384679052", "bodyText": "place a TODO here so we know to come back and make sure they match the keys", "author": "mikechoch", "createdAt": "2020-02-26T18:25:31Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageTag.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.onesignal;\n+\n+import android.support.annotation.NonNull;\n+\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+\n+public class OSInAppMessageTag {\n+\n+    private static final String ADD_TAGS = \"add\";\n+    private static final String REMOVE_TAGS = \"remove\";", "originalCommit": "df06119c658bfe63d26f1b4d21e116e21439c207", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQwNDAyMA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r387404020", "bodyText": "Change to removes", "author": "mikechoch", "createdAt": "2020-03-04T01:42:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3OTA1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3OTI3NA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r384679274", "bodyText": "Maybe name ittagsToAdd?", "author": "mikechoch", "createdAt": "2020-02-26T18:25:55Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageTag.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.onesignal;\n+\n+import android.support.annotation.NonNull;\n+\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+\n+public class OSInAppMessageTag {\n+\n+    private static final String ADD_TAGS = \"add\";\n+    private static final String REMOVE_TAGS = \"remove\";\n+\n+    private JSONObject addTags;", "originalCommit": "df06119c658bfe63d26f1b4d21e116e21439c207", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3OTI4NA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r384679284", "bodyText": "Maybe name ittagsToRemove?", "author": "mikechoch", "createdAt": "2020-02-26T18:25:55Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageTag.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.onesignal;\n+\n+import android.support.annotation.NonNull;\n+\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+\n+public class OSInAppMessageTag {\n+\n+    private static final String ADD_TAGS = \"add\";\n+    private static final String REMOVE_TAGS = \"remove\";\n+\n+    private JSONObject addTags;\n+    private JSONArray removeTags;", "originalCommit": "df06119c658bfe63d26f1b4d21e116e21439c207", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bf14056c65fb7ab2261a7d8a1ebb071fb15fb32a", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/bf14056c65fb7ab2261a7d8a1ebb071fb15fb32a", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-03-04T01:10:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQwMzg0Ng==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r387403846", "bodyText": "Lets change to action.tags", "author": "mikechoch", "createdAt": "2020-03-04T01:41:20Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -301,6 +302,17 @@ private void fireOutcomeForClick(@NonNull final OSInAppMessageAction action) {\n         }\n     }\n \n+    private void fireTagCallForClick(@NonNull final OSInAppMessageAction action) {\n+        if (action.tag != null) {", "originalCommit": "bf14056c65fb7ab2261a7d8a1ebb071fb15fb32a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQwNTQwNg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/962#discussion_r387405406", "bodyText": "HAHA THIS SUCKS", "author": "mikechoch", "createdAt": "2020-03-04T01:47:25Z", "path": "OneSignalSDK/unittest/src/test/java/com/onesignal/OneSignalPackagePrivateHelper.java", "diffHunk": "@@ -24,6 +24,7 @@\n import static org.robolectric.Shadows.shadowOf;\n \n public class OneSignalPackagePrivateHelper {\n+   public static final String IN_APP_MESSAGES_JSON_KEY = com.onesignal.OSInAppMessageController.IN_APP_MESSAGES_JSON_KEY;", "originalCommit": "bf14056c65fb7ab2261a7d8a1ebb071fb15fb32a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f47f3826549b9f434855f2b2662004eaecebced0", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/f47f3826549b9f434855f2b2662004eaecebced0", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-03-04T01:54:30Z", "type": "forcePushed"}, {"oid": "ec69f504a6a77f70e36efb06a920346cfbc333fb", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/ec69f504a6a77f70e36efb06a920346cfbc333fb", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-03-04T02:15:31Z", "type": "forcePushed"}, {"oid": "b084c6cb70f01e7dc2517c209d6207a730c9d31f", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/b084c6cb70f01e7dc2517c209d6207a730c9d31f", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-03-04T18:28:05Z", "type": "forcePushed"}, {"oid": "b923f35779e50747905cf06164baccf2ff1f3021", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/b923f35779e50747905cf06164baccf2ff1f3021", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-03-04T18:43:01Z", "type": "forcePushed"}, {"oid": "b8b1a00d96328fec67871482563f656d8854f384", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/b8b1a00d96328fec67871482563f656d8854f384", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-03-04T19:10:11Z", "type": "forcePushed"}, {"oid": "239b766d6679f6f6e926a6627cd2c19640e120b0", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/239b766d6679f6f6e926a6627cd2c19640e120b0", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-03-04T19:42:00Z", "type": "forcePushed"}, {"oid": "a4e094659bcdb700990702bcdb64ecdf3f2d237e", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/a4e094659bcdb700990702bcdb64ecdf3f2d237e", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-03-04T19:57:41Z", "type": "commit"}, {"oid": "a4e094659bcdb700990702bcdb64ecdf3f2d237e", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/a4e094659bcdb700990702bcdb64ecdf3f2d237e", "message": "Add tags to IAM\n\n  * Add OSInAppMessageTag class\n  * Add send Tags when available\n  * Add remove Tags when available\n  * Add test for new functionality", "committedDate": "2020-03-04T19:57:41Z", "type": "forcePushed"}]}