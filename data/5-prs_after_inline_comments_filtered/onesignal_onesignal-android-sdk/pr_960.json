{"pr_number": 960, "pr_title": "Adds new required params to FirebaseApp.init", "pr_createdAt": "2020-02-26T09:02:27Z", "pr_url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/960", "timeline": [{"oid": "40f5302e5326709550d323b3be83a117bbdbc681", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/40f5302e5326709550d323b3be83a117bbdbc681", "message": "Adds new required params to FirebaseApp.init\n\n* Added required values to setApplicationId, setApiKey, and setProjectId that is used with FirebaseOptions.Builder\n* Added static defaults, with the option to override later via remote params.", "committedDate": "2020-02-26T09:01:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU5NDU5MA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/960#discussion_r384594590", "bodyText": "Please note that these values have to align, i.e. belong together:\nThe API key has to authenticate the project, identified by the Project ID.\nThe Application ID has to identify an application that belongs to the same project.\nIf the remote parameters do not match like this, requests will fail in the background,.", "author": "andirayo", "createdAt": "2020-02-26T16:06:23Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/PushRegistratorFCM.java", "diffHunk": "@@ -92,9 +97,28 @@ private void initFirebaseApp(String senderId) {\n       FirebaseOptions firebaseOptions =\n          new FirebaseOptions.Builder()\n             .setGcmSenderId(senderId)\n-            .setApplicationId(\"OMIT_ID\")\n-            .setApiKey(\"OMIT_KEY\")\n+            .setApplicationId(getAppId())\n+            .setApiKey(getApiKey())\n+            .setProjectId(getProjectId())\n             .build();\n       firebaseApp = FirebaseApp.initializeApp(OneSignal.appContext, firebaseOptions, FCM_APP_NAME);\n    }\n+\n+   private static @NonNull String getAppId() {\n+      if (OneSignal.remoteParams.fcmParams.appId != null)\n+         return OneSignal.remoteParams.fcmParams.appId;\n+      return FCM_DEFAULT_APP_ID;\n+   }\n+\n+   private static @NonNull String getApiKey() {\n+      if (OneSignal.remoteParams.fcmParams.apiKey != null)\n+         return OneSignal.remoteParams.fcmParams.apiKey;\n+      return FCM_DEFAULT_API_KEY;\n+   }\n+\n+   private static @NonNull String getProjectId() {\n+      if (OneSignal.remoteParams.fcmParams.projectId != null)\n+         return OneSignal.remoteParams.fcmParams.projectId;\n+      return FCM_DEFAULT_PROJECT_ID;\n+   }", "originalCommit": "40f5302e5326709550d323b3be83a117bbdbc681", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU5NTk4Nw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/960#discussion_r384595987", "bodyText": "These are valid. I checked against Firebase servers and Google Cloud frontend.", "author": "andirayo", "createdAt": "2020-02-26T16:08:08Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/PushRegistratorFCM.java", "diffHunk": "@@ -43,6 +44,10 @@\n \n class PushRegistratorFCM extends PushRegistratorAbstractGoogle {\n \n+   private static final String FCM_DEFAULT_PROJECT_ID = \"onesignal-shared-public\"; // project_info.project_id\n+   private static final String FCM_DEFAULT_APP_ID = \"1:754795614042:android:c682b8144a8dd52bc1ad63\"; // client.client_info.mobilesdk_app_id\n+   private static final String FCM_DEFAULT_API_KEY = \"AIzaSyAnTLn5-_4Mc2a2P-dKUeE-aBtgyCrjlYU\"; // client.api_key.current_key\n+", "originalCommit": "40f5302e5326709550d323b3be83a117bbdbc681", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA1NjA1Ng==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/960#discussion_r457056056", "bodyText": "Are these hardcoded constant values of OneSignal default keys in Firebase panel?\n@jkasten2", "author": "Husseinhj", "createdAt": "2020-07-20T05:09:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU5NTk4Nw=="}], "type": "inlineReview"}]}