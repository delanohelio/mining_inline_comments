{"pr_number": 925, "pr_title": "Demo app with local and prod sdk usage", "pr_createdAt": "2020-01-17T18:56:34Z", "pr_url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925", "timeline": [{"oid": "81233145d8d190e4e47e773228cb96d48a72973f", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/81233145d8d190e4e47e773228cb96d48a72973f", "message": "Removed manifestPlaceholders from SDK\n* Usage from onesignal build.gradle and AndroidManifest.xml\n* Usage from app build.gradle", "committedDate": "2020-01-14T00:54:11Z", "type": "commit"}, {"oid": "3a631c9ba3fd3c3c75722f83acddb8f5c3150af2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/3a631c9ba3fd3c3c75722f83acddb8f5c3150af2", "message": "Replacing old example apps with new OneSignalDemo\n* `Examples` dir is now gone with all contents\n* Created new `examples` dir for any demo projects\n* `settings.gradle` needed to be modified to pull in OneSignalDemo app from the `examples` folder", "committedDate": "2020-01-17T18:46:38Z", "type": "commit"}, {"oid": "d13eda9ac1f10f60f768676cf1742025cc6430c2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/d13eda9ac1f10f60f768676cf1742025cc6430c2", "message": "example is wrong dir name, examples is correct", "committedDate": "2020-01-17T22:55:10Z", "type": "commit"}, {"oid": "a590d9efa77e71f981eea25df8c579b0c2cf5c0b", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/a590d9efa77e71f981eea25df8c579b0c2cf5c0b", "message": "Completely removed example now and using examples", "committedDate": "2020-01-18T00:31:11Z", "type": "commit"}, {"oid": "8bd9095002e42331c85d54a81fd8f5b1a2918b64", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/8bd9095002e42331c85d54a81fd8f5b1a2918b64", "message": "Minor changes in demo app", "committedDate": "2020-01-22T01:48:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc1ODA0MQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r369758041", "bodyText": "Can remove this file since we didn't create any tests for the example project.", "author": "jkasten2", "createdAt": "2020-01-22T19:28:07Z", "path": "Examples/OneSignalDemo/app/src/androidTest/java/com/onesignal/sdktest/ExampleInstrumentedTest.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package com.onesignal.sdktest;", "originalCommit": "627121ea5a074eb59de6ac1c49d257be70da56ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg1MDQ4Mg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370850482", "bodyText": "This is auto generated by Android Studio when making project, I can remove it", "author": "mikechoch", "createdAt": "2020-01-24T21:28:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc1ODA0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc1ODU5Ng==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r369758596", "bodyText": "Class has no internals, this used anywhere?", "author": "jkasten2", "createdAt": "2020-01-22T19:29:11Z", "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/constant/Key.java", "diffHunk": "@@ -0,0 +1,5 @@\n+package com.onesignal.sdktest.constant;\n+\n+public class Key {", "originalCommit": "627121ea5a074eb59de6ac1c49d257be70da56ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkwODUwNA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370908504", "bodyText": "Got it, deleting", "author": "mikechoch", "createdAt": "2020-01-25T02:34:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc1ODU5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc1ODkzMg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r369758932", "bodyText": "Remove commented out code", "author": "jkasten2", "createdAt": "2020-01-22T19:29:52Z", "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/model/MainActivityViewModel.java", "diffHunk": "@@ -0,0 +1,761 @@\n+package com.onesignal.sdktest.model;\n+\n+import android.app.Activity;\n+import android.content.Context;\n+import android.support.design.widget.AppBarLayout;\n+import android.support.v4.widget.NestedScrollView;\n+import android.support.v7.app.AppCompatActivity;\n+import android.support.v7.widget.GridLayoutManager;\n+import android.support.v7.widget.LinearLayoutManager;\n+import android.support.v7.widget.RecyclerView;\n+import android.support.v7.widget.Toolbar;\n+import android.util.Pair;\n+import android.view.View;\n+import android.view.ViewTreeObserver;\n+import android.widget.Button;\n+import android.widget.CompoundButton;\n+import android.widget.LinearLayout;\n+import android.widget.RelativeLayout;\n+import android.widget.Switch;\n+import android.widget.TextView;\n+\n+import com.onesignal.OSEmailSubscriptionStateChanges;\n+import com.onesignal.OSPermissionStateChanges;\n+import com.onesignal.OSSubscriptionStateChanges;\n+import com.onesignal.OneSignal;\n+import com.onesignal.sdktest.R;\n+import com.onesignal.sdktest.adapter.InAppMessageRecyclerViewAdapter;\n+import com.onesignal.sdktest.adapter.NotificationRecyclerViewAdapter;\n+import com.onesignal.sdktest.adapter.PairRecyclerViewAdapter;\n+import com.onesignal.sdktest.callback.AddPairAlertDialogCallback;\n+import com.onesignal.sdktest.callback.PairItemActionCallback;\n+import com.onesignal.sdktest.callback.UpdateAlertDialogCallback;\n+import com.onesignal.sdktest.constant.Text;\n+import com.onesignal.sdktest.type.InAppMessage;\n+import com.onesignal.sdktest.type.Notification;\n+import com.onesignal.sdktest.type.ToastType;\n+import com.onesignal.sdktest.ui.RecyclerViewBuilder;\n+import com.onesignal.sdktest.user.CurrentUser;\n+import com.onesignal.sdktest.util.Animate;\n+import com.onesignal.sdktest.util.Dialog;\n+import com.onesignal.sdktest.util.Font;\n+import com.onesignal.sdktest.util.IntentTo;\n+import com.onesignal.sdktest.util.OneSignalPrefs;\n+import com.onesignal.sdktest.util.ProfileUtil;\n+import com.onesignal.sdktest.util.Toaster;\n+\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.Map;\n+\n+public class MainActivityViewModel implements ActivityViewModel {\n+\n+    private Animate animate;\n+    private CurrentUser currentUser;\n+    private Dialog dialog;\n+    private Font font;\n+    private IntentTo intentTo;\n+    private RecyclerViewBuilder recyclerViewBuilder;\n+    private Toaster toaster;\n+\n+    private AppBarLayout appBarLayout;\n+    private Toolbar toolbar;\n+    private LinearLayout privacyConsentLinearLayout;\n+    private NestedScrollView nestedScrollView;\n+\n+    // Privacy Consent\n+    private TextView privacyConsentTitleTextView;\n+    private TextView privacyConsentDescriptionTextView;\n+    private Button privacyConsentAllowButton;\n+\n+    // App\n+    private TextView appTitleTextView;\n+    private RelativeLayout appIdRelativeLayout;\n+    private TextView appIdTitleTextView;\n+    private TextView appIdTextView;\n+    // Email\n+    private RelativeLayout emailRelativeLayout;\n+    private TextView emailTitleTextView;\n+    private TextView userEmailTextView;\n+    // External User Id\n+    private RelativeLayout externalUserIdRelativeLayout;\n+    private TextView externalUserIdTitleTextView;\n+    private TextView userExternalUserIdTextView;\n+\n+    // Tags\n+    private TextView tagsTitleTextView;\n+    private TextView noTagsTextView;\n+    private RecyclerView tagsRecyclerView;\n+    private PairRecyclerViewAdapter tagPairRecyclerViewAdapter;\n+    private Button addTagButton;\n+\n+    // Notification Demo\n+    private TextView pushNotificationTitleTextView;\n+    private RecyclerView pushNotificationRecyclerView;\n+    private NotificationRecyclerViewAdapter pushNotificationRecyclerViewAdapter;\n+\n+    // Outcomes\n+    private TextView outcomeTitleTextView;\n+//    private LinearLayout outcomeCurrentSessionLinearLayout;", "originalCommit": "627121ea5a074eb59de6ac1c49d257be70da56ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkwODQwMw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370908403", "bodyText": "Got it", "author": "mikechoch", "createdAt": "2020-01-25T02:33:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc1ODkzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc1OTA1Mw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r369759053", "bodyText": "Remove commented out code", "author": "jkasten2", "createdAt": "2020-01-22T19:30:06Z", "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/model/MainActivityViewModel.java", "diffHunk": "@@ -0,0 +1,761 @@\n+package com.onesignal.sdktest.model;\n+\n+import android.app.Activity;\n+import android.content.Context;\n+import android.support.design.widget.AppBarLayout;\n+import android.support.v4.widget.NestedScrollView;\n+import android.support.v7.app.AppCompatActivity;\n+import android.support.v7.widget.GridLayoutManager;\n+import android.support.v7.widget.LinearLayoutManager;\n+import android.support.v7.widget.RecyclerView;\n+import android.support.v7.widget.Toolbar;\n+import android.util.Pair;\n+import android.view.View;\n+import android.view.ViewTreeObserver;\n+import android.widget.Button;\n+import android.widget.CompoundButton;\n+import android.widget.LinearLayout;\n+import android.widget.RelativeLayout;\n+import android.widget.Switch;\n+import android.widget.TextView;\n+\n+import com.onesignal.OSEmailSubscriptionStateChanges;\n+import com.onesignal.OSPermissionStateChanges;\n+import com.onesignal.OSSubscriptionStateChanges;\n+import com.onesignal.OneSignal;\n+import com.onesignal.sdktest.R;\n+import com.onesignal.sdktest.adapter.InAppMessageRecyclerViewAdapter;\n+import com.onesignal.sdktest.adapter.NotificationRecyclerViewAdapter;\n+import com.onesignal.sdktest.adapter.PairRecyclerViewAdapter;\n+import com.onesignal.sdktest.callback.AddPairAlertDialogCallback;\n+import com.onesignal.sdktest.callback.PairItemActionCallback;\n+import com.onesignal.sdktest.callback.UpdateAlertDialogCallback;\n+import com.onesignal.sdktest.constant.Text;\n+import com.onesignal.sdktest.type.InAppMessage;\n+import com.onesignal.sdktest.type.Notification;\n+import com.onesignal.sdktest.type.ToastType;\n+import com.onesignal.sdktest.ui.RecyclerViewBuilder;\n+import com.onesignal.sdktest.user.CurrentUser;\n+import com.onesignal.sdktest.util.Animate;\n+import com.onesignal.sdktest.util.Dialog;\n+import com.onesignal.sdktest.util.Font;\n+import com.onesignal.sdktest.util.IntentTo;\n+import com.onesignal.sdktest.util.OneSignalPrefs;\n+import com.onesignal.sdktest.util.ProfileUtil;\n+import com.onesignal.sdktest.util.Toaster;\n+\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.Map;\n+\n+public class MainActivityViewModel implements ActivityViewModel {\n+\n+    private Animate animate;\n+    private CurrentUser currentUser;\n+    private Dialog dialog;\n+    private Font font;\n+    private IntentTo intentTo;\n+    private RecyclerViewBuilder recyclerViewBuilder;\n+    private Toaster toaster;\n+\n+    private AppBarLayout appBarLayout;\n+    private Toolbar toolbar;\n+    private LinearLayout privacyConsentLinearLayout;\n+    private NestedScrollView nestedScrollView;\n+\n+    // Privacy Consent\n+    private TextView privacyConsentTitleTextView;\n+    private TextView privacyConsentDescriptionTextView;\n+    private Button privacyConsentAllowButton;\n+\n+    // App\n+    private TextView appTitleTextView;\n+    private RelativeLayout appIdRelativeLayout;\n+    private TextView appIdTitleTextView;\n+    private TextView appIdTextView;\n+    // Email\n+    private RelativeLayout emailRelativeLayout;\n+    private TextView emailTitleTextView;\n+    private TextView userEmailTextView;\n+    // External User Id\n+    private RelativeLayout externalUserIdRelativeLayout;\n+    private TextView externalUserIdTitleTextView;\n+    private TextView userExternalUserIdTextView;\n+\n+    // Tags\n+    private TextView tagsTitleTextView;\n+    private TextView noTagsTextView;\n+    private RecyclerView tagsRecyclerView;\n+    private PairRecyclerViewAdapter tagPairRecyclerViewAdapter;\n+    private Button addTagButton;\n+\n+    // Notification Demo\n+    private TextView pushNotificationTitleTextView;\n+    private RecyclerView pushNotificationRecyclerView;\n+    private NotificationRecyclerViewAdapter pushNotificationRecyclerViewAdapter;\n+\n+    // Outcomes\n+    private TextView outcomeTitleTextView;\n+//    private LinearLayout outcomeCurrentSessionLinearLayout;\n+//    private TextView outcomeCurrentSessionTitleTextView;\n+//    private TextView outcomeCurrentSessionTextView;\n+//    private LinearLayout outcomeForegroundTimerLinearLayout;\n+//    private TextView outcomeForegroundTimerTitleTextView;\n+//    private TextView outcomeForegroundTimerTextView;\n+//    private LinearLayout outcomeBackgroundTimerLinearLayout;\n+//    private TextView outcomeBackgroundTimerTitleTextView;\n+//    private TextView outcomeBackgroundTimerTextView;\n+    private Button sendOutcomeButton;\n+\n+    // Triggers\n+    private TextView triggersTitleTextView;\n+    private TextView noTriggersTextView;\n+    private RecyclerView triggersRecyclerView;\n+    private PairRecyclerViewAdapter triggerPairRecyclerViewAdapter;\n+    private Button addTriggerButton;\n+\n+    // In App Messaging Demo\n+    private TextView inAppMessagingTitleTextView;\n+    private RecyclerView inAppMessagingRecyclerView;\n+    private InAppMessageRecyclerViewAdapter inAppMessagingRecyclerViewAdapter;\n+\n+    // Location\n+    private TextView locationTitleTextView;\n+    private RelativeLayout locationSharedRelativeLayout;\n+    private TextView locationSharedTextView;\n+    private TextView locationSharedDescriptionTextView;\n+    private Switch locationSharedSwitch;\n+    private Button promptLocationButton;\n+\n+\n+    // Settings\n+    private TextView settingTitleTextView;\n+    private RelativeLayout subscriptionRelativeLayout;\n+    private TextView subscriptionTextView;\n+    private TextView subscriptionDescriptionTextView;\n+    private Switch subscriptionSwitch;\n+    private RelativeLayout pauseInAppMessagesRelativeLayout;\n+    private TextView pauseInAppMessagesTextView;\n+    private TextView pauseInAppMessagesDescriptionTextView;\n+    private Switch pauseInAppMessagesSwitch;\n+    private Button revokeConsentButton;\n+\n+    private boolean shouldScrollTop = false;\n+\n+    private Context context;\n+\n+    private HashMap<String, Object> tagSet;\n+    private ArrayList<Map.Entry> tagArrayList;\n+\n+    private HashMap<String, Object> triggerSet;\n+    private ArrayList<Map.Entry> triggerArrayList;\n+\n+    @Override\n+    public Activity getActivity() {\n+        return (Activity) context;\n+    }\n+\n+    @Override\n+    public AppCompatActivity getAppCompatActivity() {\n+        return (AppCompatActivity) context;\n+    }\n+\n+    @Override\n+    public ActivityViewModel onActivityCreated(Context context) {\n+        this.context = context;\n+\n+        animate = new Animate();\n+        currentUser = CurrentUser.getInstance();\n+        dialog = new Dialog(context);\n+        font = new Font(context);\n+        intentTo = new IntentTo(context);\n+        recyclerViewBuilder = new RecyclerViewBuilder(context);\n+        toaster = new Toaster(context);\n+\n+        appBarLayout = getActivity().findViewById(R.id.main_activity_app_bar_layout);\n+        toolbar = getActivity().findViewById(R.id.main_activity_toolbar);\n+        privacyConsentLinearLayout = getActivity().findViewById(R.id.main_activity_privacy_consent_linear_layout);\n+        nestedScrollView = getActivity().findViewById(R.id.main_activity_nested_scroll_view);\n+\n+        privacyConsentTitleTextView = getActivity().findViewById(R.id.main_activity_privacy_consent_title_text_view);\n+        privacyConsentDescriptionTextView = getActivity().findViewById(R.id.main_activity_privacy_consent_description_text_view);\n+        privacyConsentAllowButton = getActivity().findViewById(R.id.main_activity_privacy_consent_allow_button);\n+\n+        appTitleTextView = getActivity().findViewById(R.id.main_activity_account_title_text_view);\n+        appIdRelativeLayout = getActivity().findViewById(R.id.main_activity_account_details_app_id_relative_layout);\n+        appIdTitleTextView = getActivity().findViewById(R.id.main_activity_account_details_app_id_title_text_view);\n+        appIdTextView = getActivity().findViewById(R.id.main_activity_account_details_app_id_text_view);\n+\n+        emailRelativeLayout = getActivity().findViewById(R.id.main_activity_account_details_email_relative_layout);\n+        emailTitleTextView = getActivity().findViewById(R.id.main_activity_account_details_email_text_view);\n+        userEmailTextView = getActivity().findViewById(R.id.main_activity_account_details_user_email_text_view);\n+\n+        externalUserIdRelativeLayout = getActivity().findViewById(R.id.main_activity_account_details_external_user_id_relative_layout);\n+        externalUserIdTitleTextView = getActivity().findViewById(R.id.main_activity_account_details_external_user_id_text_view);\n+        userExternalUserIdTextView = getActivity().findViewById(R.id.main_activity_account_details_user_external_user_id_text_view);\n+\n+        tagsTitleTextView = getActivity().findViewById(R.id.main_activity_tags_title_text_view);\n+        noTagsTextView = getActivity().findViewById(R.id.main_activity_tags_no_tags_text_view);\n+        tagsRecyclerView = getActivity().findViewById(R.id.main_activity_tags_recycler_view);\n+        addTagButton = getActivity().findViewById(R.id.main_activity_add_tags_button);\n+\n+        pushNotificationTitleTextView = getActivity().findViewById(R.id.main_activity_push_notification_title_text_view);\n+        pushNotificationRecyclerView = getActivity().findViewById(R.id.main_activity_push_notification_recycler_view);\n+\n+        outcomeTitleTextView = getActivity().findViewById(R.id.main_activity_outcomes_title_text_view);\n+//        outcomeCurrentSessionLinearLayout = getActivity().findViewById(R.id.main_activity_outcomes_current_session_relative_layout);", "originalCommit": "627121ea5a074eb59de6ac1c49d257be70da56ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkwODQwOA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370908408", "bodyText": "Got it", "author": "mikechoch", "createdAt": "2020-01-25T02:33:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc1OTA1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc2MDMxMQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r369760311", "bodyText": "Remove space after setOnDismissListener", "author": "jkasten2", "createdAt": "2020-01-22T19:32:27Z", "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/ui/CustomAlertDialogBuilder.java", "diffHunk": "@@ -0,0 +1,195 @@\n+package com.onesignal.sdktest.ui;\n+\n+import android.app.AlertDialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.view.KeyEvent;\n+import android.view.View;\n+import android.widget.Button;\n+\n+import com.onesignal.sdktest.R;\n+\n+public class CustomAlertDialogBuilder extends AlertDialog.Builder {\n+\n+    /*\n+     * Click listener\n+     */\n+    private DialogInterface.OnClickListener mPositiveButtonListener = null;\n+    private DialogInterface.OnClickListener mNegativeButtonListener = null;\n+    private DialogInterface.OnClickListener mNeutralButtonListener = null;\n+    private DialogInterface.OnDismissListener mOnDismissListener = null;\n+\n+    /*\n+     * Buttons text\n+     */\n+    private CharSequence mPositiveButtonText = null;\n+    private CharSequence mNegativeButtonText = null;\n+    private CharSequence mNeutralButtonText = null;\n+\n+\n+    /*\n+     * Buttons\n+     */\n+    private Button positiveButton;\n+    private Button negativeButton;\n+\n+    private View view;\n+    private Boolean mCancelOnTouchOutside = null;\n+    private boolean isCancelable = true;\n+\n+    public CustomAlertDialogBuilder(Context context, View view) {\n+        super(context);\n+        this.view = view;\n+    }\n+\n+    public CustomAlertDialogBuilder setOnDismissListener (DialogInterface.OnDismissListener listener) {", "originalCommit": "627121ea5a074eb59de6ac1c49d257be70da56ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkwNzkyNA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370907924", "bodyText": "Got it", "author": "mikechoch", "createdAt": "2020-01-25T02:24:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc2MDMxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc2MDY1Mw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r369760653", "bodyText": "\"needed for Android 1.6\"?", "author": "jkasten2", "createdAt": "2020-01-22T19:33:09Z", "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/ui/CustomAlertDialogBuilder.java", "diffHunk": "@@ -0,0 +1,195 @@\n+package com.onesignal.sdktest.ui;\n+\n+import android.app.AlertDialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.view.KeyEvent;\n+import android.view.View;\n+import android.widget.Button;\n+\n+import com.onesignal.sdktest.R;\n+\n+public class CustomAlertDialogBuilder extends AlertDialog.Builder {\n+\n+    /*\n+     * Click listener\n+     */\n+    private DialogInterface.OnClickListener mPositiveButtonListener = null;\n+    private DialogInterface.OnClickListener mNegativeButtonListener = null;\n+    private DialogInterface.OnClickListener mNeutralButtonListener = null;\n+    private DialogInterface.OnDismissListener mOnDismissListener = null;\n+\n+    /*\n+     * Buttons text\n+     */\n+    private CharSequence mPositiveButtonText = null;\n+    private CharSequence mNegativeButtonText = null;\n+    private CharSequence mNeutralButtonText = null;\n+\n+\n+    /*\n+     * Buttons\n+     */\n+    private Button positiveButton;\n+    private Button negativeButton;\n+\n+    private View view;\n+    private Boolean mCancelOnTouchOutside = null;\n+    private boolean isCancelable = true;\n+\n+    public CustomAlertDialogBuilder(Context context, View view) {\n+        super(context);\n+        this.view = view;\n+    }\n+\n+    public CustomAlertDialogBuilder setOnDismissListener (DialogInterface.OnDismissListener listener) {\n+        mOnDismissListener = listener;\n+        return this;\n+    }\n+\n+    @Override\n+    public CustomAlertDialogBuilder setNegativeButton(CharSequence text, DialogInterface.OnClickListener listener) {\n+        mNegativeButtonListener = listener;\n+        mNegativeButtonText = text;\n+        return this;\n+    }\n+\n+    @Override\n+    public CustomAlertDialogBuilder setNeutralButton(CharSequence text, DialogInterface.OnClickListener listener) {\n+        mNeutralButtonListener = listener;\n+        mNeutralButtonText = text;\n+        return this;\n+    }\n+\n+    @Override\n+    public CustomAlertDialogBuilder setPositiveButton(CharSequence text, DialogInterface.OnClickListener listener) {\n+        mPositiveButtonListener = listener;\n+        mPositiveButtonText = text;\n+        return this;\n+    }\n+\n+    @Override\n+    public CustomAlertDialogBuilder setNegativeButton(int textId, DialogInterface.OnClickListener listener) {\n+        setNegativeButton(getContext().getString(textId), listener);\n+        return this;\n+    }\n+\n+    @Override\n+    public CustomAlertDialogBuilder setNeutralButton(int textId, DialogInterface.OnClickListener listener) {\n+        setNeutralButton(getContext().getString(textId), listener);\n+        return this;\n+    }\n+\n+    @Override\n+    public CustomAlertDialogBuilder setPositiveButton(int textId, DialogInterface.OnClickListener listener) {\n+        setPositiveButton(getContext().getString(textId), listener);\n+        return this;\n+    }\n+\n+    public CustomAlertDialogBuilder setCanceledOnTouchOutside(boolean cancelOnTouchOutside) {\n+        mCancelOnTouchOutside = cancelOnTouchOutside;\n+        return this;\n+    }\n+\n+    @Override\n+    public AlertDialog create() {\n+        throw new UnsupportedOperationException(\"CustomAlertDialogBuilder.create(): use show() instead..\");\n+    }\n+\n+    public Button getPositiveButtonElement() {\n+        return positiveButton;\n+    }\n+\n+    public Button getNegativeButtonElement() {\n+        return negativeButton;\n+    }\n+\n+    public void setIsCancelable(boolean isCancelable) {\n+        this.isCancelable = isCancelable;\n+    }\n+\n+    @Override\n+    public AlertDialog show() {\n+        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(getContext(), R.style.WhiteThemeAlertDialog);\n+        alertDialogBuilder.setView(view);\n+        alertDialogBuilder.setOnKeyListener(new DialogInterface.OnKeyListener() {\n+            @Override\n+            public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {\n+                switch (keyCode) {\n+                    case KeyEvent.KEYCODE_BACK:\n+                        return !isCancelable;\n+                }\n+                return false;\n+            }\n+        });\n+        final AlertDialog alertDialog = alertDialogBuilder.create();\n+\n+        DialogInterface.OnClickListener emptyOnClickListener = new DialogInterface.OnClickListener() {\n+            @Override\n+            public void onClick(DialogInterface dialog, int which) { }\n+        };\n+\n+        // Enable buttons (needed for Android 1.6) - otherwise later getButton() returns null", "originalCommit": "627121ea5a074eb59de6ac1c49d257be70da56ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkwNzkxNw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370907917", "bodyText": "I stole this from a lib a while back and made it my own for easy AlertDialog customization and callbacks, I'd prefer to keep the comments and stuff that came along with it just in case", "author": "mikechoch", "createdAt": "2020-01-25T02:24:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc2MDY1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc2MDkyNw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r369760927", "bodyText": "Empty class, should remove if not used.", "author": "jkasten2", "createdAt": "2020-01-22T19:33:45Z", "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/util/BitmapUtil.java", "diffHunk": "@@ -0,0 +1,7 @@\n+package com.onesignal.sdktest.util;\n+\n+public class BitmapUtil {", "originalCommit": "627121ea5a074eb59de6ac1c49d257be70da56ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkwNzg1OQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370907859", "bodyText": "I commonly use this class in my apps, but we have no BitmapUtil work so I will remove until we need it", "author": "mikechoch", "createdAt": "2020-01-25T02:23:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc2MDkyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc2MTc2OQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r369761769", "bodyText": "OneSignal app id should be static called something like ONESIGNAL_EXAMPLE_APP_ID instead of a string here.", "author": "jkasten2", "createdAt": "2020-01-22T19:35:37Z", "path": "Examples/OneSignalDemo/app/src/main/java/com/onesignal/sdktest/util/OneSignalPrefs.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package com.onesignal.sdktest.util;\n+\n+import android.content.Context;\n+import android.content.SharedPreferences;\n+\n+import com.onesignal.sdktest.constant.Text;\n+\n+public class OneSignalPrefs {\n+\n+    private static final String APP_SHARED_PREFS = \"com.onesignal.sdktest\";\n+\n+    public static final  String OS_APP_ID_SHARED_PREF = \"OS_APP_ID_SHARED_PREF\";\n+    private static final String PRIVACY_CONSENT_SHARED_PREF = \"PRIVACY_CONSENT_SHARED_PREF\";\n+    public static final String USER_EMAIL_SHARED_PREF = \"USER_EMAIL_SHARED_PREF\";\n+    public static final String USER_EXTERNAL_USER_ID_SHARED_PREF = \"USER_EXTERNAL_USER_ID_SHARED_PREF\";\n+    private static final String LOCATION_SHARED_PREF = \"LOCATION_SHARED_PREF\";\n+\n+    private static SharedPreferences getSharedPreference(Context context) {\n+        return context.getSharedPreferences(APP_SHARED_PREFS, Context.MODE_PRIVATE);\n+    }\n+\n+    public static boolean exists(Context context, String key) {\n+        return getSharedPreference(context).contains(key);\n+    }\n+\n+    public static String getOneSignalAppId(Context context) {\n+        return getSharedPreference(context).getString(OS_APP_ID_SHARED_PREF, \"77e32082-ea27-42e3-a898-c72e141824ef\");", "originalCommit": "627121ea5a074eb59de6ac1c49d257be70da56ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkwNzgyMg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370907822", "bodyText": "Got it", "author": "mikechoch", "createdAt": "2020-01-25T02:23:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc2MTc2OQ=="}], "type": "inlineReview"}, {"oid": "7a92195efcbc294f5de2ad917ce7c3c700437d14", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/7a92195efcbc294f5de2ad917ce7c3c700437d14", "message": "Created new Location card and did some moving around\n* Added setLocationShared UI and promptLocation UI\n* Moved Location card and Setting card under App card and above Tags card\n* Using init with app_id string now instead of builder", "committedDate": "2020-01-24T21:59:22Z", "type": "commit"}, {"oid": "58b2927cc2b004ee51d766a16eead35482debc27", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/58b2927cc2b004ee51d766a16eead35482debc27", "message": "Created .gitignore file and added a few lines to it\n* New google-services.json\n* New app.iml\n* Tracking paused IAMs in demo app with shared prefs\n* Deleted test files", "committedDate": "2020-01-24T22:01:29Z", "type": "forcePushed"}, {"oid": "5cb8b44c6951810c670a83c014ff4b44237da230", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/5cb8b44c6951810c670a83c014ff4b44237da230", "message": "Created .gitignore file and added a few lines to it\n* New google-services.json\n* New app.iml\n* Tracking paused IAMs in demo app with shared prefs\n* Deleted test files", "committedDate": "2020-01-24T22:03:11Z", "type": "commit"}, {"oid": "5cb8b44c6951810c670a83c014ff4b44237da230", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/5cb8b44c6951810c670a83c014ff4b44237da230", "message": "Created .gitignore file and added a few lines to it\n* New google-services.json\n* New app.iml\n* Tracking paused IAMs in demo app with shared prefs\n* Deleted test files", "committedDate": "2020-01-24T22:03:11Z", "type": "forcePushed"}, {"oid": "8daf82f042bfbf7b9c96221eb972133596b02ece", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/8daf82f042bfbf7b9c96221eb972133596b02ece", "message": "2 tests fail because of removed manifest placeholders\n* shouldPreventOtherGCMReceiversWhenSettingEnabled\n* shouldAddDefaultButtonToAlertDialog", "committedDate": "2020-01-24T22:30:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg5MjA1Mg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370892052", "bodyText": "Remove after rebase on other branch and tests are confirmed passing.", "author": "jkasten2", "createdAt": "2020-01-25T00:03:49Z", "path": "OneSignalSDK/unittest/src/test/java/com/test/onesignal/GenerateNotificationRunner.java", "diffHunk": "@@ -1087,15 +1080,15 @@ public void shouldAddDefaultButtonToAlertDialog() throws Exception {\n       Button button = alert.getButton(AlertDialog.BUTTON_NEUTRAL);\n       assertEquals(button.getText(), \"Ok\");\n    }\n-   \n+\n+   // TODO: Fails because of no appId being set because manifest placeholders removed", "originalCommit": "8daf82f042bfbf7b9c96221eb972133596b02ece", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkwNzU0NA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/925#discussion_r370907544", "bodyText": "Got it", "author": "mikechoch", "createdAt": "2020-01-25T02:18:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg5MjA1Mg=="}], "type": "inlineReview"}, {"oid": "bce52db14b60b4cce3a52de044c3f806b4ffd92a", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/bce52db14b60b4cce3a52de044c3f806b4ffd92a", "message": "Fixing previous commit comments\n* Some minor clean up inside AndroidManifest, app build.gradle and onesignal build.gradle", "committedDate": "2020-01-25T02:22:18Z", "type": "commit"}, {"oid": "8297bb11136ea5d490b200e960ac35eb0b5a2ff2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/8297bb11136ea5d490b200e960ac35eb0b5a2ff2", "message": "Demo app clean up from comments", "committedDate": "2020-01-25T02:34:33Z", "type": "commit"}, {"oid": "794eecf076e5452c2d5f0f2f6344c2b96fc2054e", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/794eecf076e5452c2d5f0f2f6344c2b96fc2054e", "message": "Remove manifest placeholders from release AndroidManifest.xml", "committedDate": "2020-01-28T23:53:16Z", "type": "commit"}]}