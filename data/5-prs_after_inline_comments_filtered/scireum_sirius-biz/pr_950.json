{"pr_number": 950, "pr_title": "HotFix Backports", "pr_createdAt": "2020-12-21T21:02:25Z", "pr_url": "https://github.com/scireum/sirius-biz/pull/950", "timeline": [{"oid": "57a5b05995365ed068fb6b57596321a50a743a5e", "url": "https://github.com/scireum/sirius-biz/commit/57a5b05995365ed068fb6b57596321a50a743a5e", "message": "Provides file sizes for files in tmp root\n\n(cherry picked from commit 4a6a1140d2959cc6f8060bdb9285c9e00daa2e7e)", "committedDate": "2020-12-08T13:18:50Z", "type": "commit"}, {"oid": "cff007ed2024e1536a5213c6b0548ec031ef3c26", "url": "https://github.com/scireum/sirius-biz/commit/cff007ed2024e1536a5213c6b0548ec031ef3c26", "message": "Updates actually ALL and not just a single task to be executed within a batch.", "committedDate": "2020-12-21T19:08:53Z", "type": "commit"}, {"oid": "4804134ba752d24efceb3890ff002af3afd794fd", "url": "https://github.com/scireum/sirius-biz/commit/4804134ba752d24efceb3890ff002af3afd794fd", "message": "Merge pull request #948 from scireum/hotfix/dev-24.1.2\n\nFixes the batch processing within the mongo replication loop.", "committedDate": "2020-12-21T20:55:40Z", "type": "commit"}, {"oid": "4c3a9d8e9e2bff473c55094d9db8bed81133c67f", "url": "https://github.com/scireum/sirius-biz/commit/4c3a9d8e9e2bff473c55094d9db8bed81133c67f", "message": "Fixes the metrics collection for the replication framework.\n\nAs we already reset the counter using getAndClear we must\nnot also use differentialMetric.", "committedDate": "2020-12-22T09:12:19Z", "type": "commit"}, {"oid": "58b420ed5d838aa156ae6c8cffa0f573d065fe7e", "url": "https://github.com/scireum/sirius-biz/commit/58b420ed5d838aa156ae6c8cffa0f573d065fe7e", "message": "Uses the proper compare method to determine which tasks are executable.\n\n(cherry picked from commit e893edb6969c0ac21b1d4038ee3290eb009bccab)", "committedDate": "2020-12-22T09:15:48Z", "type": "commit"}, {"oid": "cbe5bf5daf96634f0bffc92089fe46b0cbfb7f3c", "url": "https://github.com/scireum/sirius-biz/commit/cbe5bf5daf96634f0bffc92089fe46b0cbfb7f3c", "message": "Improves the replication performance by fine-tuning the queue config.\n\nWe now do not wait until the queue runs completely empty before we attempt\nto refill it, but rather try to keep a certain base level of batches in the queue\n(as long as work is available).\n\nAdditionally we increased the batch size and the refill frequency to adjust the\nperformance for high load conditions.", "committedDate": "2020-12-22T09:24:02Z", "type": "commit"}, {"oid": "89350f33c763e883b9087852e6bf6b396f4a571a", "url": "https://github.com/scireum/sirius-biz/commit/89350f33c763e883b9087852e6bf6b396f4a571a", "message": "Merge pull request #951 from scireum/hotfix/dev-24.1.3\n\nImproves the performance ot the replication system.", "committedDate": "2020-12-22T10:29:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkyMDkyMw==", "url": "https://github.com/scireum/sirius-biz/pull/950#discussion_r547920923", "bodyText": "Da m\u00fcssen wir mit dem parallelen mongo update aufpassen", "author": "qw3ry", "createdAt": "2020-12-23T11:51:21Z", "path": "src/main/java/sirius/biz/storage/layer1/replication/mongo/MongoReplicationTaskStorage.java", "diffHunk": "@@ -131,7 +131,9 @@ public int emitBatches() {\n     private void markTasksAsScheduled(JSONObject batch) {\n         try {\n             mongo.update()\n+                 .many()", "originalCommit": "89350f33c763e883b9087852e6bf6b396f4a571a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}