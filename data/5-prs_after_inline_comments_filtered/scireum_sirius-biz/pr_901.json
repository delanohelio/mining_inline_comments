{"pr_number": 901, "pr_title": "Only handle upload as job file if it is not empty", "pr_createdAt": "2020-11-09T07:10:51Z", "pr_url": "https://github.com/scireum/sirius-biz/pull/901", "timeline": [{"oid": "e1416dd992ecd79ecb8b1a5fa63011ef10e9f8ae", "url": "https://github.com/scireum/sirius-biz/commit/e1416dd992ecd79ecb8b1a5fa63011ef10e9f8ae", "message": "Only handle upload as job file if it is not empty\n\n- due to sftp changes jobsroot get now also gets supplied with empty files\n- those get ignored\n- reusage of blobs not desired here, as jobsroot isn't a regular filesystem with regards to uniqueness of filenames\n\nFixes: SE-10139", "committedDate": "2020-11-09T07:10:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU5MDgwOA==", "url": "https://github.com/scireum/sirius-biz/pull/901#discussion_r519590808", "bodyText": "else { delete... } ?", "author": "andyHa", "createdAt": "2020-11-09T07:14:42Z", "path": "src/main/java/sirius/biz/jobs/JobsRoot.java", "diffHunk": "@@ -153,8 +152,10 @@ private OutputStream uploadAndTrigger(JobPreset preset, String filename) {\n             BlobStorageSpace temporaryStorageSpace = blobStorage.getSpace(TmpRoot.TMP_SPACE);\n             Blob buffer = temporaryStorageSpace.createTemporaryBlob(UserContext.getCurrentUser().getTenantId());\n             return buffer.createOutputStream(() -> {\n-                temporaryStorageSpace.markAsUsed(buffer);\n-                trigger(preset, buffer, filename);\n+                if (buffer.getSize() > 0) {\n+                    temporaryStorageSpace.markAsUsed(buffer);\n+                    trigger(preset, buffer, filename);\n+                }", "originalCommit": "e1416dd992ecd79ecb8b1a5fa63011ef10e9f8ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6c20b9f44252302bb813cecc9be9601a8de1312c", "url": "https://github.com/scireum/sirius-biz/commit/6c20b9f44252302bb813cecc9be9601a8de1312c", "message": "Directly delete unnecessary file at jobsroot sftp upload\n\nFixes: SE-10139", "committedDate": "2020-11-09T07:20:12Z", "type": "commit"}]}