{"pr_number": 725, "pr_title": "JENA-1881: RDF*", "pr_createdAt": "2020-04-14T18:05:09Z", "pr_url": "https://github.com/apache/jena/pull/725", "timeline": [{"oid": "36ead9fafb74efea1f480eb826024456517bb3bd", "url": "https://github.com/apache/jena/commit/36ead9fafb74efea1f480eb826024456517bb3bd", "message": "JENA-1881: RDF* Turtle*", "committedDate": "2020-04-13T13:18:12Z", "type": "commit"}, {"oid": "8e2036e05efedd3de3069b478b7fc66514320ceb", "url": "https://github.com/apache/jena/commit/8e2036e05efedd3de3069b478b7fc66514320ceb", "message": "JENA-1881: SPARQL* syntax and print", "committedDate": "2020-04-13T13:18:12Z", "type": "commit"}, {"oid": "e793481b96719be4c397d74f1ef024c44e0e2a4d", "url": "https://github.com/apache/jena/commit/e793481b96719be4c397d74f1ef024c44e0e2a4d", "message": "JENA-1880: ResultSetWriterJSON for RDF*", "committedDate": "2020-04-13T13:18:12Z", "type": "commit"}, {"oid": "8f4a94bda506492692ac079d32c7c31c5499cd0c", "url": "https://github.com/apache/jena/commit/8f4a94bda506492692ac079d32c7c31c5499cd0c", "message": "JENA-1881: SPARQL* evaluation", "committedDate": "2020-04-13T13:18:12Z", "type": "commit"}, {"oid": "65685f7ddf69ed49e39883dfbddfeb4081ef765b", "url": "https://github.com/apache/jena/commit/65685f7ddf69ed49e39883dfbddfeb4081ef765b", "message": "JENA-1881: RDF* testing", "committedDate": "2020-04-13T13:18:12Z", "type": "commit"}, {"oid": "f1a63bbf0c9a496aa1dd6e2fb48c2d3d5da99728", "url": "https://github.com/apache/jena/commit/f1a63bbf0c9a496aa1dd6e2fb48c2d3d5da99728", "message": "JENA-1881: SPARQL* Update", "committedDate": "2020-04-13T13:18:12Z", "type": "commit"}, {"oid": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467", "url": "https://github.com/apache/jena/commit/80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467", "message": "JENA-1881: NT*, NQ*, TriG*", "committedDate": "2020-04-14T17:03:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY5MzEyNA==", "url": "https://github.com/apache/jena/pull/725#discussion_r408693124", "bodyText": "New files are missing the newline at the end of the file (for git). But not super important.", "author": "kinow", "createdAt": "2020-04-15T09:07:23Z", "path": "jena-core/src/main/java/org/apache/jena/graph/JenaNodeException.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.jena.graph;\n+\n+import org.apache.jena.shared.JenaException;\n+\n+public class JenaNodeException extends JenaException {\n+    public JenaNodeException(String message) {\n+        super(message);\n+    }\n+}", "originalCommit": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc0MDAxOA==", "url": "https://github.com/apache/jena/pull/725#discussion_r408740018", "bodyText": "(not all, saw some new files that had the newline, but again, that's not really important)", "author": "kinow", "createdAt": "2020-04-15T10:27:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY5MzEyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg0NTQ2Ng==", "url": "https://github.com/apache/jena/pull/725#discussion_r408845466", "bodyText": "My Eclipse template for \"new java file\" didn't have a newline on the end. Fixed. And fixed new java files.", "author": "afs", "createdAt": "2020-04-15T13:34:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY5MzEyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczMTA0MA==", "url": "https://github.com/apache/jena/pull/725#discussion_r408731040", "bodyText": "Debug left-over?", "author": "kinow", "createdAt": "2020-04-15T10:10:56Z", "path": "jena-arq/src/main/java/org/apache/jena/sparql/function/library/triple/FunctionTripleTerm.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.jena.sparql.function.library.triple;\n+\n+import org.apache.jena.graph.Node;\n+import org.apache.jena.graph.Node_Triple;\n+import org.apache.jena.graph.Triple;\n+import org.apache.jena.sparql.expr.ExprEvalException;\n+import org.apache.jena.sparql.expr.NodeValue;\n+import org.apache.jena.sparql.function.FunctionBase1;\n+\n+/** Base class for one argument functions working on a triple term argument. */\n+public abstract class FunctionTripleTerm extends FunctionBase1 {\n+    public FunctionTripleTerm() { }\n+\n+    @Override\n+    public NodeValue exec(NodeValue nv) {\n+        System.out.println(nv);", "originalCommit": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODgzMjMxNA==", "url": "https://github.com/apache/jena/pull/725#discussion_r408832314", "bodyText": "Oops. It also shows there are no tests for this new functions.  I'll add some.", "author": "afs", "createdAt": "2020-04-15T13:16:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczMTA0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczMjA1OQ==", "url": "https://github.com/apache/jena/pull/725#discussion_r408732059", "bodyText": "Extra spaces", "author": "kinow", "createdAt": "2020-04-15T10:12:50Z", "path": "jena-arq/src/main/java/org/apache/jena/riot/writer/TurtleShell.java", "diffHunk": "@@ -335,25 +333,39 @@ private boolean isDefaultGraph(Node node) {\n         /** Find Bnodes that can written as []\n          * Subject position (top level) - only used for subject position anywhere in the dataset\n          * Object position (any level) - only used as object once anywhere in the dataset\n+         * Not used in triple terms.\n+         *   These must be written with _: syntax or [] no contents.\n+         *   We do not cover the latter case (and it is not legal in PG mode where the\n+         *   triple termmust refer to a triple in the graph so blank node used elsewhere.) \n          */\n         private void findBNodesSyntax1() {\n             Set<Node> rejects = new HashSet<>() ; // Nodes known not to meet the requirement.\n-\n+            \n+            // \n+            Set<Node> blankNodesInTripleTerms = new HashSet<>();\n+            // *** Look inside Triple terms\n             ExtendedIterator<Triple> iter = find(ANY, ANY, ANY) ;\n             try {\n                 for ( ; iter.hasNext() ; ) {\n                     Triple t = iter.next() ;\n                     Node subj = t.getSubject() ;\n                     Node obj = t.getObject() ;\n-\n+                    ", "originalCommit": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg0NTQwMw==", "url": "https://github.com/apache/jena/pull/725#discussion_r408845403", "bodyText": "Gone!", "author": "afs", "createdAt": "2020-04-15T13:34:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczMjA1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczMzI0Nw==", "url": "https://github.com/apache/jena/pull/725#discussion_r408733247", "bodyText": "s/avriables/variables", "author": "kinow", "createdAt": "2020-04-15T10:14:53Z", "path": "jena-arq/src/main/java/org/apache/jena/sparql/engine/iterator/QueryIterAddTripleTerm.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.jena.sparql.engine.iterator;\n+\n+import org.apache.jena.atlas.io.IndentedWriter;\n+import org.apache.jena.graph.Node;\n+import org.apache.jena.graph.NodeFactory;\n+import org.apache.jena.graph.Triple;\n+import org.apache.jena.sparql.core.Substitute;\n+import org.apache.jena.sparql.core.Var;\n+import org.apache.jena.sparql.engine.ExecutionContext;\n+import org.apache.jena.sparql.engine.QueryIterator;\n+import org.apache.jena.sparql.engine.binding.Binding;\n+import org.apache.jena.sparql.engine.binding.BindingFactory;\n+import org.apache.jena.sparql.serializer.SerializationContext;\n+\n+/**\n+ * Add {@code (var, matchTriple)} to a {@link QueryIterator}.\n+ * <p>\n+ * The supplied triple is a triple pattern which is grounded by replacing avriables", "originalCommit": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODgzMzYxNg==", "url": "https://github.com/apache/jena/pull/725#discussion_r408833616", "bodyText": "Done", "author": "afs", "createdAt": "2020-04-15T13:18:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczMzI0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODczNjk2NA==", "url": "https://github.com/apache/jena/pull/725#discussion_r408736964", "bodyText": "Though a typo, that sounds like a cool name for some project, or sci-fi weapon \ud83d\ude80", "author": "kinow", "createdAt": "2020-04-15T10:21:38Z", "path": "jena-arq/src/main/java/org/apache/jena/query/ARQ.java", "diffHunk": "@@ -460,7 +460,7 @@ public static void enableOptimizer(Context context, boolean state)\n     public static final Symbol optMergeBGPs = SystemARQ.allocSymbol(\"optMergeBGPs\");\n \n     /**\n-     * Context key controlling whether the standard optimizater applies the optimization", "originalCommit": "80c4e7e07d3bf6f1ebef77ebb41ab644f55ce467", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c8af178861d04c3a3b2497ea2e3e49c5df06ca5a", "url": "https://github.com/apache/jena/commit/c8af178861d04c3a3b2497ea2e3e49c5df06ca5a", "message": "JENA-1881: Fixes from review", "committedDate": "2020-04-15T18:20:12Z", "type": "commit"}]}