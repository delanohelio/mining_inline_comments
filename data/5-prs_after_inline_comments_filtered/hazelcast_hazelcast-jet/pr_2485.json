{"pr_number": 2485, "pr_title": "Use real-time WMs with ingestion timestamps", "pr_createdAt": "2020-09-02T15:49:40Z", "pr_url": "https://github.com/hazelcast/hazelcast-jet/pull/2485", "timeline": [{"oid": "1e4f8458db23c17b645908deb51cc31940d5eccc", "url": "https://github.com/hazelcast/hazelcast-jet/commit/1e4f8458db23c17b645908deb51cc31940d5eccc", "message": "Use real-time WMs with ingestion timestamps\n\nWill not have the sparse-event issue.", "committedDate": "2020-09-02T15:46:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4MjYwOA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#discussion_r482182608", "bodyText": "missing @since", "author": "cangencer", "createdAt": "2020-09-02T15:56:05Z", "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/core/WatermarkPolicy.java", "diffHunk": "@@ -98,4 +90,27 @@ public long getCurrentWatermark() {\n             }\n         };\n     }\n+\n+    /**\n+     * Maintains a watermark that lags behind the real time by the given\n+     * amount. Doesn't consider the event timestamp at all.\n+     *\n+     * @param lag the desired difference between the top observed timestamp\n+     *            and the watermark\n+     */\n+    @Nonnull", "originalCommit": "1e4f8458db23c17b645908deb51cc31940d5eccc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc2Mjc2Ng==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#discussion_r482762766", "bodyText": "It's core API, do we care? It can also be gone...\nI added it nevertheless, it doesn't hurt.", "author": "viliam-durina", "createdAt": "2020-09-03T07:24:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4MjYwOA=="}], "type": "inlineReview"}, {"oid": "f27cf95e03279c84fc25f113b2550fa8368f9a82", "url": "https://github.com/hazelcast/hazelcast-jet/commit/f27cf95e03279c84fc25f113b2550fa8368f9a82", "message": "Add @since tag", "committedDate": "2020-09-03T08:02:43Z", "type": "commit"}, {"oid": "99772271222b39259e306d084d88d1b7d6aab262", "url": "https://github.com/hazelcast/hazelcast-jet/commit/99772271222b39259e306d084d88d1b7d6aab262", "message": "Fix test failures", "committedDate": "2020-09-03T12:13:42Z", "type": "commit"}, {"oid": "d065d36be562dc4b8f453cf94fa716fefa662182", "url": "https://github.com/hazelcast/hazelcast-jet/commit/d065d36be562dc4b8f453cf94fa716fefa662182", "message": "Add documentation", "committedDate": "2020-09-03T12:46:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjk2MDY1OA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#discussion_r482960658", "bodyText": "\"If the timestamp is extracted from the event and there are no more event\" sounds a bit confusing since it sounds like it's referring to this method. I think it would be better to link to the other methods, i.e. if nativeTimestamps or withTimestamps method is used..", "author": "cangencer", "createdAt": "2020-09-03T13:03:40Z", "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/pipeline/StreamSourceStage.java", "diffHunk": "@@ -49,6 +49,11 @@\n      * it observes an event from the data source and assign it as the event\n      * timestamp.\n      * <p>\n+     * With this mode the event time advances even in the absence of events. If\n+     * the timestamp is extracted from the event and there are no more events,", "originalCommit": "d065d36be562dc4b8f453cf94fa716fefa662182", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5f9150a53a2a3551181cc9f03b158015957b14da", "url": "https://github.com/hazelcast/hazelcast-jet/commit/5f9150a53a2a3551181cc9f03b158015957b14da", "message": "Improve documentation", "committedDate": "2020-09-04T06:45:11Z", "type": "commit"}, {"oid": "951011f6131a3c333f6cae08bca5ec28a989dfd5", "url": "https://github.com/hazelcast/hazelcast-jet/commit/951011f6131a3c333f6cae08bca5ec28a989dfd5", "message": "Fix WM should not exceed the last reported event timestamp", "committedDate": "2020-09-04T11:45:42Z", "type": "commit"}, {"oid": "a4000d9d9fd516c8e8d18f952b2e1343748208b1", "url": "https://github.com/hazelcast/hazelcast-jet/commit/a4000d9d9fd516c8e8d18f952b2e1343748208b1", "message": "Fix projection to null in StreamJmsP", "committedDate": "2020-09-04T12:00:09Z", "type": "commit"}, {"oid": "77c8cf793616cf2eb79d3f22b0a03535668ee7f4", "url": "https://github.com/hazelcast/hazelcast-jet/commit/77c8cf793616cf2eb79d3f22b0a03535668ee7f4", "message": "Merge branch 'master' into real-time-wms", "committedDate": "2020-09-04T12:28:06Z", "type": "commit"}, {"oid": "6a910fcde4aa257458c48266bcfcf5c3d1443ae0", "url": "https://github.com/hazelcast/hazelcast-jet/commit/6a910fcde4aa257458c48266bcfcf5c3d1443ae0", "message": "Touch up Javadoc", "committedDate": "2020-09-07T08:06:01Z", "type": "commit"}, {"oid": "bb5291623d6121f95cd1e2092aeeb651d1e9b17d", "url": "https://github.com/hazelcast/hazelcast-jet/commit/bb5291623d6121f95cd1e2092aeeb651d1e9b17d", "message": "Touch up comment in EventTimeMapper", "committedDate": "2020-09-07T09:23:52Z", "type": "commit"}]}