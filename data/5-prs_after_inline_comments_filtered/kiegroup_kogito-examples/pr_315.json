{"pr_number": 315, "pr_title": "KOGITO-2952 Tracing addon example", "pr_createdAt": "2020-08-04T14:03:03Z", "pr_url": "https://github.com/kiegroup/kogito-examples/pull/315", "timeline": [{"oid": "ef72690f3c09cc1854f18ca8b21c1e75f627006e", "url": "https://github.com/kiegroup/kogito-examples/commit/ef72690f3c09cc1854f18ca8b21c1e75f627006e", "message": "fix readme, optimize import and code, fix licence", "committedDate": "2020-06-25T12:21:58Z", "type": "commit"}, {"oid": "73dd6de9d97211071c32a9c4918428dbe25917a1", "url": "https://github.com/kiegroup/kogito-examples/commit/73dd6de9d97211071c32a9c4918428dbe25917a1", "message": "fix licence headers", "committedDate": "2020-06-25T12:25:08Z", "type": "commit"}, {"oid": "fd4ab7e23d4fed8c1db75360de71338a60d95a77", "url": "https://github.com/kiegroup/kogito-examples/commit/fd4ab7e23d4fed8c1db75360de71338a60d95a77", "message": "Update MyInterceptor.java", "committedDate": "2020-06-25T14:09:03Z", "type": "commit"}, {"oid": "846f4dfd515ab7531a81c04292cdb6df7f36e5d0", "url": "https://github.com/kiegroup/kogito-examples/commit/846f4dfd515ab7531a81c04292cdb6df7f36e5d0", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-26T12:18:50Z", "type": "commit"}, {"oid": "cc4237de86b2a0e15b9bd19930965b596d6406c8", "url": "https://github.com/kiegroup/kogito-examples/commit/cc4237de86b2a0e15b9bd19930965b596d6406c8", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-29T08:02:27Z", "type": "commit"}, {"oid": "b0bcf8a8d1a785c5e820c69bbfb19d8ea77710c2", "url": "https://github.com/kiegroup/kogito-examples/commit/b0bcf8a8d1a785c5e820c69bbfb19d8ea77710c2", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-30T08:57:02Z", "type": "commit"}, {"oid": "a1e82adf0959eec41fcf667d8d689b27edc667a6", "url": "https://github.com/kiegroup/kogito-examples/commit/a1e82adf0959eec41fcf667d8d689b27edc667a6", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-13T08:32:54Z", "type": "commit"}, {"oid": "4a19d0c4fcf43b001cd4dabf4c26473e868d3104", "url": "https://github.com/kiegroup/kogito-examples/commit/4a19d0c4fcf43b001cd4dabf4c26473e868d3104", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-21T14:46:58Z", "type": "commit"}, {"oid": "fd2e77344871770387eb39d371580d18ce27aac5", "url": "https://github.com/kiegroup/kogito-examples/commit/fd2e77344871770387eb39d371580d18ce27aac5", "message": "add tracing example", "committedDate": "2020-08-04T13:54:39Z", "type": "commit"}, {"oid": "7b24d63d1a3d2201a5790d7b751dff1a207fbfac", "url": "https://github.com/kiegroup/kogito-examples/commit/7b24d63d1a3d2201a5790d7b751dff1a207fbfac", "message": "update README", "committedDate": "2020-08-04T13:59:17Z", "type": "commit"}, {"oid": "fe9924c6b983c0df29e601f35311b3c2d6e7ddd8", "url": "https://github.com/kiegroup/kogito-examples/commit/fe9924c6b983c0df29e601f35311b3c2d6e7ddd8", "message": "Merge remote-tracking branch 'upstream/master' into KOGITO-2952-tracing-example", "committedDate": "2020-08-04T14:57:01Z", "type": "commit"}, {"oid": "9a6eb06b75dfa834f6e20c32fc8b6736a805b3c4", "url": "https://github.com/kiegroup/kogito-examples/commit/9a6eb06b75dfa834f6e20c32fc8b6736a805b3c4", "message": "rebase", "committedDate": "2020-08-04T14:57:30Z", "type": "commit"}, {"oid": "e062728800143aa4df93164e65578570c996b102", "url": "https://github.com/kiegroup/kogito-examples/commit/e062728800143aa4df93164e65578570c996b102", "message": "remove json files", "committedDate": "2020-08-04T14:59:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU0ODE1MA==", "url": "https://github.com/kiegroup/kogito-examples/pull/315#discussion_r465548150", "bodyText": "minor nitpick if you want to investigate. You may be able to inject here a smallrye reactive channel which I believe is what users should/would write", "author": "evacchi", "createdAt": "2020-08-05T08:05:39Z", "path": "dmn-tracing-quarkus/src/test/java/org/kie/dmn/kogito/quarkus/tracing/LoanEligibilityTest.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/**\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package org.kie.dmn.kogito.quarkus.tracing;\n+\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.inject.Inject;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import io.quarkus.test.common.QuarkusTestResource;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.restassured.http.ContentType;\n+import org.eclipse.microprofile.config.inject.ConfigProperty;\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.kafka.KafkaClient;\n+import org.kie.kogito.testcontainers.quarkus.KafkaQuarkusTestResource;\n+import org.kie.kogito.tracing.decision.event.trace.TraceEvent;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.hamcrest.Matchers.is;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+\n+@QuarkusTest\n+@QuarkusTestResource(KafkaQuarkusTestResource.class)\n+public class LoanEligibilityTest {\n+\n+    private static Logger LOGGER = LoggerFactory.getLogger(LoanEligibilityTest.class);\n+\n+    public static final String TOPIC_CONSUMER = \"kogito-tracing-decision\";\n+\n+    @Inject\n+    private ObjectMapper objectMapper;\n+\n+    public KafkaClient kafkaClient;\n+\n+    @ConfigProperty(name = KafkaQuarkusTestResource.KOGITO_KAFKA_PROPERTY)\n+    private String kafkaBootstrapServers;\n+\n+    @Test\n+    public void testEvaluateTrafficViolation() throws InterruptedException {", "originalCommit": "e062728800143aa4df93164e65578570c996b102", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTYwNTkxMA==", "url": "https://github.com/kiegroup/kogito-examples/pull/315#discussion_r465605910", "bodyText": "Hi @evacchi , what do you mean? Not sure I get the point :D Not sure how do I test that an event is properly consumed if I inject here the channel", "author": "r00ta", "createdAt": "2020-08-05T09:46:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU0ODE1MA=="}], "type": "inlineReview"}, {"oid": "0976b44d068ec25cc341077c09eab09f293f630e", "url": "https://github.com/kiegroup/kogito-examples/commit/0976b44d068ec25cc341077c09eab09f293f630e", "message": "Update dmn-quarkus-example.yaml", "committedDate": "2020-08-05T20:26:22Z", "type": "commit"}, {"oid": "e062e63472a739dc7539e084612b4cbc0712eb93", "url": "https://github.com/kiegroup/kogito-examples/commit/e062e63472a739dc7539e084612b4cbc0712eb93", "message": "add trusty integration example", "committedDate": "2020-08-06T20:46:18Z", "type": "commit"}]}