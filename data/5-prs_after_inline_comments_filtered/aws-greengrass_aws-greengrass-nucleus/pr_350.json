{"pr_number": 350, "pr_title": "Add loader script, kernel recipe for kernel launch and update", "pr_createdAt": "2020-08-04T23:52:42Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/350", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwMzQyNg==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/350#discussion_r465903426", "bodyText": "Thanks. I'll update in my PR", "author": "hui-yang", "createdAt": "2020-08-05T17:55:23Z", "path": "src/main/java/com/aws/iot/evergreen/kernel/KernelAlternatives.java", "diffHunk": "@@ -97,6 +97,7 @@ public void activationSucceeds() throws IOException {\n      */\n     public void prepareRollback() throws IOException {\n         if (newDir.toFile().exists()) {\n+            // TODO: newDir is not needed.", "originalCommit": "e784a2ae9021175fdd38eb072c6c1fae05a236f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMDM5OQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/350#discussion_r465910399", "bodyText": "Just a note here. I'm going to move System.exit to shutdown in a later PR", "author": "hui-yang", "createdAt": "2020-08-05T18:08:18Z", "path": "src/main/java/com/aws/iot/evergreen/deployment/activator/KernelUpdateActivator.java", "diffHunk": "@@ -66,15 +69,14 @@ public void activate(Map<Object, Object> newConfig, DeploymentDocument deploymen\n         try {\n             int exitCode = bootstrapManager.executeAllBootstrapTasksSequentially();\n             if (!bootstrapManager.hasNext()) {\n-                // TODO: flip symlinks, new to current\n                 logger.atInfo().log(\"Completed all bootstrap tasks. Continue to activate deployment changes\");\n             }\n             // If exitCode is 0, which happens when all bootstrap tasks are completed, restart in new launch\n             // directories and verify handover is complete. As a result, exit code 0 is treated as 100 here.\n             logger.atInfo().log((exitCode == 101 ? \"device reboot\" : \"kernel restart\")\n                     + \" requested to complete bootstrap task\");\n-            // TODO: Kernel shutdown supports exit code\n-            // System.exit(exitCode == 101 ? 101 : 100);\n+            // TODO: Kernel shutdown properly with exit code. Will be implemented in separate PR\n+            System.exit(exitCode == 101 ? 101 : 100);", "originalCommit": "e784a2ae9021175fdd38eb072c6c1fae05a236f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYzNjk4Nw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/350#discussion_r466636987", "bodyText": "ok", "author": "ShirleyZheng92", "createdAt": "2020-08-06T19:27:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMDM5OQ=="}], "type": "inlineReview"}, {"oid": "8e1bf29d425a05163419a97c25d09d3ceec64a2d", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/8e1bf29d425a05163419a97c25d09d3ceec64a2d", "message": "Add loader script, kernel recipe for kernel launch and update\n\nInit commit for loader script and kernel recipe.\nAdd maven package step to package EvergreenKernel zip", "committedDate": "2020-08-07T17:44:05Z", "type": "commit"}, {"oid": "83809cf754ed8503858020b1f92353a7c9ce6754", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/83809cf754ed8503858020b1f92353a7c9ce6754", "message": "Address comments", "committedDate": "2020-08-07T22:11:28Z", "type": "commit"}, {"oid": "83809cf754ed8503858020b1f92353a7c9ce6754", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/83809cf754ed8503858020b1f92353a7c9ce6754", "message": "Address comments", "committedDate": "2020-08-07T22:11:28Z", "type": "forcePushed"}, {"oid": "6ac9a606fb969f8a215e458f4f90f5226c48f101", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/6ac9a606fb969f8a215e458f4f90f5226c48f101", "message": "Merge branch 'master' into loaderScript", "committedDate": "2020-08-10T17:21:11Z", "type": "commit"}, {"oid": "16a60ab902a6a0ecb360d7c770fd9f55a509935f", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/16a60ab902a6a0ecb360d7c770fd9f55a509935f", "message": "Address comments", "committedDate": "2020-08-10T22:24:44Z", "type": "commit"}, {"oid": "120b5f28147a4a23c7392147ac0876e81b8f3a52", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/120b5f28147a4a23c7392147ac0876e81b8f3a52", "message": "Merge branch 'master' into loaderScript", "committedDate": "2020-08-11T02:18:17Z", "type": "commit"}, {"oid": "b835d2faf0727dc472741b8e75b1bb6b12b726e8", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b835d2faf0727dc472741b8e75b1bb6b12b726e8", "message": "Merge branch 'master' into loaderScript", "committedDate": "2020-08-11T16:43:38Z", "type": "commit"}, {"oid": "098c371629838c035c489e8be186f8a1dbd65eef", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/098c371629838c035c489e8be186f8a1dbd65eef", "message": "change test coverage limit to make windows build pass", "committedDate": "2020-08-11T17:17:25Z", "type": "commit"}, {"oid": "498c936e3b87950573eeb497e12195e2be6a99a3", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/498c936e3b87950573eeb497e12195e2be6a99a3", "message": "Merge branch 'master' into loaderScript", "committedDate": "2020-08-11T18:36:44Z", "type": "commit"}]}