{"pr_number": 424, "pr_title": "Set AWS_REGION and AWS_DEFAULT_REGION envvars", "pr_createdAt": "2020-09-10T02:48:15Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424", "timeline": [{"oid": "0d3e0cf0e83d30b47aa52fa10cdae36aeab1aa43", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/0d3e0cf0e83d30b47aa52fa10cdae36aeab1aa43", "message": "Set AWS_REGION and AWS_DEFAULT_REGION envvars", "committedDate": "2020-09-10T02:47:38Z", "type": "commit"}, {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/bd99a42a3b803b5f75add4aefaf78762ddc7466a", "message": "Create Thread uncaught exception handler", "committedDate": "2020-09-10T03:41:48Z", "type": "commit"}, {"oid": "bd99a42a3b803b5f75add4aefaf78762ddc7466a", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/bd99a42a3b803b5f75add4aefaf78762ddc7466a", "message": "Create Thread uncaught exception handler", "committedDate": "2020-09-10T03:41:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486078368", "bodyText": "You want to log a warning when proc exits successfully, when status is 0?", "author": "prateek-y", "createdAt": "2020-09-10T05:43:01Z", "path": "src/main/java/com/aws/iot/evergreen/util/platforms/UnixPlatform.java", "diffHunk": "@@ -40,13 +40,13 @@ public void killProcessAndChildren(Process process, boolean force) throws IOExce\n         String[] cmd = {\"pkill\", \"-\" + (force ? SIGKILL : SIGINT), \"-P\", Integer.toString(pp.getPid())};\n         Process proc = Runtime.getRuntime().exec(cmd);\n         proc.waitFor();\n-        if (proc.exitValue() != 0) {\n+        if (proc.exitValue() != 1) {", "originalCommit": "bd99a42a3b803b5f75add4aefaf78762ddc7466a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODYxOA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486078618", "bodyText": "0 isn't success", "author": "MikeDombo", "createdAt": "2020-09-10T05:43:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODgzMw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486078833", "bodyText": "https://linux.die.net/man/1/pkill\nThe current behavior is that it always logs, which is obviously wrong", "author": "MikeDombo", "createdAt": "2020-09-10T05:44:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA4MTQzMw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486081433", "bodyText": "nvm, did not realize this is exit code for pkill. Then the log .kv(\"exit-code\", proc.exitValue() is misleading, seems like it is trying to log the exit code for exited process which is not possible i think.", "author": "prateek-y", "createdAt": "2020-09-10T05:52:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ2MjU4NQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486462585", "bodyText": "should we modify the exit-code log to specify its pkill status?", "author": "prateek-y", "createdAt": "2020-09-10T16:06:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ2Mzg0NA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486463844", "bodyText": "Is the log \"pkill exited\" not clear enough?", "author": "MikeDombo", "createdAt": "2020-09-10T16:08:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ2OTc4Nw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486469787", "bodyText": "its confusing to log it with process pid which is not pkill pid.", "author": "prateek-y", "createdAt": "2020-09-10T16:17:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA3ODM2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5MTcwOA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/424#discussion_r486491708", "bodyText": "Nice!", "author": "leaf94", "createdAt": "2020-09-10T16:52:10Z", "path": "src/main/java/com/aws/iot/evergreen/kernel/KernelExceptionHandler.java", "diffHunk": "@@ -0,0 +1,18 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.aws.iot.evergreen.kernel;\n+\n+import com.aws.iot.evergreen.logging.api.Logger;\n+import com.aws.iot.evergreen.logging.impl.LogManager;\n+\n+public class KernelExceptionHandler implements Thread.UncaughtExceptionHandler {", "originalCommit": "bd99a42a3b803b5f75add4aefaf78762ddc7466a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a5d61dbb2e74b0f122c30cdab00c2012a9d63a92", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a5d61dbb2e74b0f122c30cdab00c2012a9d63a92", "message": "Merge branch 'master' into region", "committedDate": "2020-09-10T17:43:30Z", "type": "commit"}, {"oid": "437acbee5915fd9a2f034ec1225a2d37e89799c4", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/437acbee5915fd9a2f034ec1225a2d37e89799c4", "message": "Merge branch 'master' into region", "committedDate": "2020-09-11T00:04:13Z", "type": "commit"}, {"oid": "342b3846109d08950081477660d80416ebaa4f23", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/342b3846109d08950081477660d80416ebaa4f23", "message": "Merge branch 'master' into region", "committedDate": "2020-09-11T05:12:08Z", "type": "commit"}, {"oid": "481f89034dee844cf2af679cb45a2982e3f028eb", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/481f89034dee844cf2af679cb45a2982e3f028eb", "message": "Merge branch 'master' into region", "committedDate": "2020-09-11T17:21:02Z", "type": "commit"}, {"oid": "1e37095e0a5c8a3da105321a24d440c1f62330ff", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/1e37095e0a5c8a3da105321a24d440c1f62330ff", "message": "Merge branch 'master' into region", "committedDate": "2020-09-11T17:45:46Z", "type": "commit"}]}