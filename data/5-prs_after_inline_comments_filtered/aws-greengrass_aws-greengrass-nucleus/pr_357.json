{"pr_number": 357, "pr_title": "Fix tlog to handle periods in namespace", "pr_createdAt": "2020-08-07T00:49:37Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/357", "timeline": [{"oid": "a2e2b8733c6eb59d2274299cd3c9340f25dce61a", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a2e2b8733c6eb59d2274299cd3c9340f25dce61a", "message": "Fix tlog to handle periods in namespace", "committedDate": "2020-08-07T00:58:57Z", "type": "commit"}, {"oid": "a2e2b8733c6eb59d2274299cd3c9340f25dce61a", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a2e2b8733c6eb59d2274299cd3c9340f25dce61a", "message": "Fix tlog to handle periods in namespace", "committedDate": "2020-08-07T00:58:57Z", "type": "forcePushed"}, {"oid": "cc87bf528e00b9fab568ecdb9cf470bbbb9382af", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/cc87bf528e00b9fab568ecdb9cf470bbbb9382af", "message": "Merge branch 'master' into tlog", "committedDate": "2020-08-07T18:43:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI0ODAxMQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/357#discussion_r467248011", "bodyText": "maybe use getter and mark it as private since we already has it?", "author": "leaf94", "createdAt": "2020-08-07T20:13:20Z", "path": "src/main/java/com/aws/iot/evergreen/config/ConfigurationReader.java", "diffHunk": "@@ -28,28 +27,25 @@ private ConfigurationReader() {\n      * @param reader         reader of the transaction log to read from\n      * @param forceTimestamp should ignore if the proposed timestamp is older than current\n      * @param mergeCondition Predicate that returns true if the provided Topic should be merged and false if not\n-     *\n      * @throws IOException if reading fails\n      */\n-    public static void mergeTLogInto(Configuration config,\n-                                     Reader reader,\n-                                     boolean forceTimestamp,\n+    public static void mergeTLogInto(Configuration config, Reader reader, boolean forceTimestamp,\n                                      Predicate<Node> mergeCondition) throws IOException {\n-        try (BufferedReader in = reader instanceof BufferedReader\n-                ? (BufferedReader) reader : new BufferedReader(reader)) {\n+        try (BufferedReader in = reader instanceof BufferedReader ? (BufferedReader) reader\n+                : new BufferedReader(reader)) {\n             String l;\n \n             for (l = in.readLine(); l != null; l = in.readLine()) {\n                 try {\n                     Tlogline tlogline = Tlogline.fromStringInput(l);\n                     if (WhatHappened.changed.equals(tlogline.action)) {\n-                        Topic targetTopic = config.lookup(seperator.split(tlogline.topicString));\n+                        Topic targetTopic = config.lookup(tlogline.topicPath);", "originalCommit": "cc87bf528e00b9fab568ecdb9cf470bbbb9382af", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI1MDExMg==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/357#discussion_r467250112", "bodyText": "Since we already have it? Not sure what you mean.", "author": "MikeDombo", "createdAt": "2020-08-07T20:18:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI0ODAxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI1NzE0NA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/357#discussion_r467257144", "bodyText": "I meant the TlogLine class already have @getter", "author": "leaf94", "createdAt": "2020-08-07T20:36:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI0ODAxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI0OTQxMg==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/357#discussion_r467249412", "bodyText": "yeah let's remember if we can switch this with jackson...", "author": "leaf94", "createdAt": "2020-08-07T20:16:54Z", "path": "src/main/java/com/aws/iot/evergreen/util/Coerce.java", "diffHunk": "@@ -287,6 +287,17 @@ public static void appendParseableString(Object o, Appendable out) throws IOExce\n             out.append(\"null\");\n         } else if (o instanceof Boolean || o instanceof Number || o instanceof List) {\n             out.append(o.toString());\n+        } else if (o.getClass().isArray()) {\n+            out.append('[');\n+            Object[] objects = (Object[]) o;\n+            for (int j = 0; j < objects.length; j++) {\n+                Object i = objects[j];\n+                out.append(toString(i));\n+                if (j != objects.length - 1) {\n+                    out.append(',');\n+                }\n+            }\n+            out.append(']');", "originalCommit": "cc87bf528e00b9fab568ecdb9cf470bbbb9382af", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}