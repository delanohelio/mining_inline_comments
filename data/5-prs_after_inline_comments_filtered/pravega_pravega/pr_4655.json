{"pr_number": 4655, "pr_title": "Issue 4653: Control rate of parallel Segment Container recoveries", "pr_createdAt": "2020-03-30T18:41:36Z", "pr_url": "https://github.com/pravega/pravega/pull/4655", "timeline": [{"oid": "c3f3cd92b6f6db7436db8d507bfa375819d465dd", "url": "https://github.com/pravega/pravega/commit/c3f3cd92b6f6db7436db8d507bfa375819d465dd", "message": "Make Segment Containers to start and recover sequentially.\n\nSigned-off-by: Ra\u00fal Gracia <raul.gracia@emc.com>", "committedDate": "2020-04-01T10:05:39Z", "type": "commit"}, {"oid": "174993a8c5a1b6327ec353c63f589c023b7b0121", "url": "https://github.com/pravega/pravega/commit/174993a8c5a1b6327ec353c63f589c023b7b0121", "message": "Issue 4653: Remove unused import.\n\nSigned-off-by: Ra\u00fal Gracia <raul.gracia@emc.com>", "committedDate": "2020-04-01T10:05:39Z", "type": "commit"}, {"oid": "1966b2529adac382877c29eb307b47b4ca764776", "url": "https://github.com/pravega/pravega/commit/1966b2529adac382877c29eb307b47b4ca764776", "message": "Issue 4653: Added option to the behavior of OrderedItemProcessor to enable it tolerating exceptions from processed items and continue processing without closing.\n\nSigned-off-by: Ra\u00fal Gracia <raul.gracia@emc.com>", "committedDate": "2020-04-01T10:05:40Z", "type": "commit"}, {"oid": "4efb70fe5d5c8a69a92b857b1f9d0bd01293ba64", "url": "https://github.com/pravega/pravega/commit/4efb70fe5d5c8a69a92b857b1f9d0bd01293ba64", "message": "Issue 4653: Minor comments in test.\n\nSigned-off-by: Ra\u00fal Gracia <raul.gracia@emc.com>", "committedDate": "2020-04-01T10:05:40Z", "type": "commit"}, {"oid": "fba8dea7022eb5ded7b7428245f15d42a15bea39", "url": "https://github.com/pravega/pravega/commit/fba8dea7022eb5ded7b7428245f15d42a15bea39", "message": "Issue 4653: Added comment on constructor.\n\nSigned-off-by: Ra\u00fal Gracia <raul.gracia@emc.com>", "committedDate": "2020-04-01T10:05:40Z", "type": "commit"}, {"oid": "fba8dea7022eb5ded7b7428245f15d42a15bea39", "url": "https://github.com/pravega/pravega/commit/fba8dea7022eb5ded7b7428245f15d42a15bea39", "message": "Issue 4653: Added comment on constructor.\n\nSigned-off-by: Ra\u00fal Gracia <raul.gracia@emc.com>", "committedDate": "2020-04-01T10:05:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc2NjU0Mg==", "url": "https://github.com/pravega/pravega/pull/4655#discussion_r401766542", "bodyText": "I would feel much better if we made this number configurable. Let's try to do that.", "author": "andreipaduroiu", "createdAt": "2020-04-01T16:57:06Z", "path": "segmentstore/server/host/src/main/java/io/pravega/segmentstore/server/host/ZKSegmentContainerMonitor.java", "diffHunk": "@@ -98,6 +102,9 @@\n         this.hostContainerMapNode = new NodeCache(zkClient, clusterPath);\n         this.assigmentTask = new AtomicReference<>();\n         this.lastReportTime = new AtomicLong(CURRENT_TIME_MILLIS.get());\n+        // Allow OrderedItemProcessor to throw exceptions, as they may happen while starting containers. But we want to\n+        // continue processing subsequent container starts irrespective of such failures.\n+        this.startContainerOrderedProcessor = new OrderedItemProcessor<>(1, this::startContainer, false, this.executor);", "originalCommit": "fba8dea7022eb5ded7b7428245f15d42a15bea39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMyMjM0Nw==", "url": "https://github.com/pravega/pravega/pull/4655#discussion_r402322347", "bodyText": "I added the possibility of configuring it.", "author": "RaulGracia", "createdAt": "2020-04-02T13:42:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc2NjU0Mg=="}], "type": "inlineReview"}, {"oid": "6b3b13941a19613d32322e0722b9ed0b36f6d91b", "url": "https://github.com/pravega/pravega/commit/6b3b13941a19613d32322e0722b9ed0b36f6d91b", "message": "Issue 4653: Make number parallel container starts configurable.\n\nSigned-off-by: Ra\u00fal Gracia <raul.gracia@emc.com>", "committedDate": "2020-04-02T10:47:41Z", "type": "commit"}, {"oid": "7812b923498619a1d1c5c236343ae22b2d99791b", "url": "https://github.com/pravega/pravega/commit/7812b923498619a1d1c5c236343ae22b2d99791b", "message": "Issue 4653: Fixed tests.\n\nSigned-off-by: Ra\u00fal Gracia <raul.gracia@emc.com>", "committedDate": "2020-04-02T11:21:02Z", "type": "commit"}, {"oid": "25c74427b527e7a00a2ec767b45f88e7ed883901", "url": "https://github.com/pravega/pravega/commit/25c74427b527e7a00a2ec767b45f88e7ed883901", "message": "Merge branch 'master' into issue-4653-sequential-container-recovery", "committedDate": "2020-04-03T07:34:55Z", "type": "commit"}]}