{"pr_number": 5339, "pr_title": "Issue 5257 and 5118: Improve organization of security code for reuse in related projects like Schema Registry", "pr_createdAt": "2020-11-17T07:02:01Z", "pr_url": "https://github.com/pravega/pravega/pull/5339", "timeline": [{"oid": "4cafb7edf4337ff62faa5efb08f6ebecad83c73b", "url": "https://github.com/pravega/pravega/commit/4cafb7edf4337ff62faa5efb08f6ebecad83c73b", "message": "Initial changes for moving authplugin into its own separate module\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-16T07:09:11Z", "type": "commit"}, {"oid": "4670c8d330df92d7f4fb1dd3ceecf36bfe962de6", "url": "https://github.com/pravega/pravega/commit/4670c8d330df92d7f4fb1dd3ceecf36bfe962de6", "message": "Provide config to auth handler properties\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-17T02:04:43Z", "type": "commit"}, {"oid": "454a41ce73ea2a16f806137e966fe0236d8d9310", "url": "https://github.com/pravega/pravega/commit/454a41ce73ea2a16f806137e966fe0236d8d9310", "message": "Moce `Credentials` interface to `:shared:security` and `StrongPasswordProcessor` to appropriate package.\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-17T06:02:09Z", "type": "commit"}, {"oid": "bd38e7bc886382c8bbc876374618a40c894c1346", "url": "https://github.com/pravega/pravega/commit/bd38e7bc886382c8bbc876374618a40c894c1346", "message": "Merge branch 'master' into issue-5257", "committedDate": "2020-11-17T07:05:01Z", "type": "commit"}, {"oid": "b26cb74ec70fcfb3454000c811d6258a279e82dc", "url": "https://github.com/pravega/pravega/commit/b26cb74ec70fcfb3454000c811d6258a279e82dc", "message": "Move authorization resource to `:shared:security` module.\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-17T07:56:21Z", "type": "commit"}, {"oid": "1588f8275858695b70b9c2f65c3b6063f1ed1267", "url": "https://github.com/pravega/pravega/commit/1588f8275858695b70b9c2f65c3b6063f1ed1267", "message": "Extract auth handler properties into a constants file and add tests.\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-18T05:47:33Z", "type": "commit"}, {"oid": "7db6b99e79cabace917486e5a89e603aa14e04d2", "url": "https://github.com/pravega/pravega/commit/7db6b99e79cabace917486e5a89e603aa14e04d2", "message": "Merge branch 'master' into issue-5257", "committedDate": "2020-11-19T07:19:36Z", "type": "commit"}, {"oid": "d64a9f63d43622c74c77908e2ab46f331c8b2882", "url": "https://github.com/pravega/pravega/commit/d64a9f63d43622c74c77908e2ab46f331c8b2882", "message": "Remove leftover lines added by IDE\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-19T07:39:24Z", "type": "commit"}, {"oid": "ebcacdd0e8ab74cf14fb09a97b8380909662cf40", "url": "https://github.com/pravega/pravega/commit/ebcacdd0e8ab74cf14fb09a97b8380909662cf40", "message": "Merge remote-tracking branch 'origin/issue-5257' into issue-5257", "committedDate": "2020-11-19T07:39:38Z", "type": "commit"}, {"oid": "b67e781bade5de613b48e445a4261a31ed70b76f", "url": "https://github.com/pravega/pravega/commit/b67e781bade5de613b48e445a4261a31ed70b76f", "message": "Merge branch 'master' into issue-5257", "committedDate": "2020-11-19T10:58:28Z", "type": "commit"}, {"oid": "1c9b527b55c8ca85e8d239c34c9cb1d77656b176", "url": "https://github.com/pravega/pravega/commit/1c9b527b55c8ca85e8d239c34c9cb1d77656b176", "message": "Merge branch 'master' into issue-5257", "committedDate": "2020-11-20T03:28:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM5ODA4OA==", "url": "https://github.com/pravega/pravega/pull/5339#discussion_r527398088", "bodyText": "as discussed, we should keep the interface for auth handler unchanged so that dependents do not have to update.\nwe can add a new method in the serverconfig to get properties.", "author": "shiveshr", "createdAt": "2020-11-20T04:59:01Z", "path": "controller/src/main/java/io/pravega/controller/server/security/auth/handler/AuthHandlerManager.java", "diffHunk": "@@ -157,7 +157,7 @@ public void registerInterceptors(ServerBuilder<?> builder) {\n                 ServiceLoader<AuthHandler> loader = ServiceLoader.load(AuthHandler.class);\n                 for (AuthHandler handler : loader) {\n                     try {\n-                        handler.initialize(serverConfig);\n+                        handler.initialize(serverConfig.toAuthHandlerProperties());", "originalCommit": "1c9b527b55c8ca85e8d239c34c9cb1d77656b176", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY0NzQzMw==", "url": "https://github.com/pravega/pravega/pull/5339#discussion_r527647433", "bodyText": "Sure, I've now modified the implementation, as suggested, to avoid the change in the interface here - handler.initialize() continues to take ServerConfig as input.", "author": "ravisharda", "createdAt": "2020-11-20T12:04:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM5ODA4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM5ODM4OA==", "url": "https://github.com/pravega/pravega/pull/5339#discussion_r527398388", "bodyText": "lets keep the interface signature same. lets change ServerConfig to add a new API for getting properties.", "author": "shiveshr", "createdAt": "2020-11-20T05:00:09Z", "path": "shared/authplugin/src/main/java/io/pravega/auth/AuthHandler.java", "diffHunk": "@@ -69,7 +70,9 @@\n     /**\n      * Sets the configuration. If the auth handler needs to access the server configuration, it can be accessed though this var.\n      *\n-     * @param serverConfig The server configuration.\n+     * @param properties The auth handler configuration.\n      */\n-    void initialize(ServerConfig serverConfig);\n+    default void initialize(Properties properties) {", "originalCommit": "1c9b527b55c8ca85e8d239c34c9cb1d77656b176", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY0NzYyMA==", "url": "https://github.com/pravega/pravega/pull/5339#discussion_r527647620", "bodyText": "Sure, I've now modified the implementation, as suggested, to avoid the change in the interface here - handler.initialize() continues to take ServerConfig as input.", "author": "ravisharda", "createdAt": "2020-11-20T12:04:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM5ODM4OA=="}], "type": "inlineReview"}, {"oid": "f58f8821e9686cfd4695cce9d478c74c99d695c8", "url": "https://github.com/pravega/pravega/commit/f58f8821e9686cfd4695cce9d478c74c99d695c8", "message": "Merge branch 'master' into issue-5257", "committedDate": "2020-11-20T05:02:13Z", "type": "commit"}, {"oid": "4aeed21127cd650084e3329831b9343db13f1fad", "url": "https://github.com/pravega/pravega/commit/4aeed21127cd650084e3329831b9343db13f1fad", "message": "Modify the changes avoid change in Auth Handler interface\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-20T12:02:09Z", "type": "commit"}, {"oid": "183426c0707bedc1cd31991fcaf441ee51d1d272", "url": "https://github.com/pravega/pravega/commit/183426c0707bedc1cd31991fcaf441ee51d1d272", "message": "Merge branch 'master' into issue-5257", "committedDate": "2020-11-21T01:46:22Z", "type": "commit"}, {"oid": "1018aab39f94beda6c3e7593cf883e70212d85bf", "url": "https://github.com/pravega/pravega/commit/1018aab39f94beda6c3e7593cf883e70212d85bf", "message": "Add tests\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-22T05:40:49Z", "type": "commit"}, {"oid": "8600ae70124d694811c01a8841ecad373a107609", "url": "https://github.com/pravega/pravega/commit/8600ae70124d694811c01a8841ecad373a107609", "message": "Merge remote-tracking branch 'origin/issue-5257' into issue-5257", "committedDate": "2020-11-22T05:41:21Z", "type": "commit"}, {"oid": "838aa67894ea8b6191e604c7466c53d1b0a99fe6", "url": "https://github.com/pravega/pravega/commit/838aa67894ea8b6191e604c7466c53d1b0a99fe6", "message": "Add tests and relocate a test utility\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-23T04:23:22Z", "type": "commit"}, {"oid": "b65f79b7421a8a1ae383dffef1379ab7129c3478", "url": "https://github.com/pravega/pravega/commit/b65f79b7421a8a1ae383dffef1379ab7129c3478", "message": "Merge branch 'master' into issue-5257", "committedDate": "2020-11-23T04:23:38Z", "type": "commit"}, {"oid": "0a3a81013abebb9f41eff5e3c1670a31fe1dc7d0", "url": "https://github.com/pravega/pravega/commit/0a3a81013abebb9f41eff5e3c1670a31fe1dc7d0", "message": "Add tests\n\nSigned-off-by: rsharda <ravi.sharda@emc.com>", "committedDate": "2020-11-23T08:11:08Z", "type": "commit"}, {"oid": "600d0022aa2b273f46632a627bcfe6176c6216db", "url": "https://github.com/pravega/pravega/commit/600d0022aa2b273f46632a627bcfe6176c6216db", "message": "Merge remote-tracking branch 'origin/issue-5257' into issue-5257", "committedDate": "2020-11-23T08:11:17Z", "type": "commit"}]}