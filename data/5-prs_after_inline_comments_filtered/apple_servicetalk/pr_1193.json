{"pr_number": 1193, "pr_title": "Option to configure capacity of the datagram packet buffer for DNS SD", "pr_createdAt": "2020-10-22T17:44:38Z", "pr_url": "https://github.com/apple/servicetalk/pull/1193", "timeline": [{"oid": "5c1c5fdb49c3a6bea06df90eee444b6dd427b8dc", "url": "https://github.com/apple/servicetalk/commit/5c1c5fdb49c3a6bea06df90eee444b6dd427b8dc", "message": "Option to configure capacity of the datagram packet buffer for DNS SD\n\nMotivation:\n\nUDP packet may be truncated if it exceeds the maximum payload size of 4096\nbytes. In this case, DNS ServiceDiscoverer will retry with TCP. However,\nusers should be able to configure higher capacity of the datagram packet\nbuffer.\n\nModifications:\n\n- Add `DefaultDnsServiceDiscovererBuilder#datagramBufferCapacity` method;\n- Fix `IllegalArgumentException` message for `minTTL` option;\n\nResult:\n\nUsers can control the capacity of the datagram packet buffer.", "committedDate": "2020-10-22T17:43:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyNDIxOA==", "url": "https://github.com/apple/servicetalk/pull/1193#discussion_r512124218", "bodyText": "datagramBufferCapacity -> maxUdpPayloadSize?\nalso consider clarifying in the comments (e.g. if DNS response exceeds this amount the UDP request will)", "author": "Scottmitch", "createdAt": "2020-10-26T17:02:52Z", "path": "servicetalk-dns-discovery-netty/src/main/java/io/servicetalk/dns/discovery/netty/DefaultDnsServiceDiscovererBuilder.java", "diffHunk": "@@ -92,6 +94,20 @@ public DefaultDnsServiceDiscovererBuilder optResourceEnabled(final boolean optRe\n         return this;\n     }\n \n+    /**\n+     * Set the capacity of the datagram packet buffer (in bytes).\n+     *\n+     * @param datagramBufferCapacity the capacity of the datagram packet buffer\n+     * @return {@code this}.\n+     */\n+    public DefaultDnsServiceDiscovererBuilder datagramBufferCapacity(final int datagramBufferCapacity) {", "originalCommit": "5c1c5fdb49c3a6bea06df90eee444b6dd427b8dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "322b2e4c78172be072ae64477cd5b2ffb54c4f1c", "url": "https://github.com/apple/servicetalk/commit/322b2e4c78172be072ae64477cd5b2ffb54c4f1c", "message": "Update property name", "committedDate": "2020-10-26T23:25:47Z", "type": "commit"}]}