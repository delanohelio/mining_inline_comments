{"pr_number": 1646, "pr_title": "#1645-add-faction-icon-replay-detail", "pr_createdAt": "2020-03-29T19:04:33Z", "pr_url": "https://github.com/FAForever/downlords-faf-client/pull/1646", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgzOTk0OQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399839949", "bodyText": "You have this same line in every case. How about moving it after the switch.", "author": "Askaholic", "createdAt": "2020-03-29T19:11:20Z", "path": "src/main/java/com/faforever/client/game/PlayerCardTooltipController.java", "diffHunk": "@@ -48,9 +53,44 @@ public Node getRoot() {\n \n   @Override\n   public void initialize() {\n+    factionImage.managedProperty().bind(factionImage.visibleProperty());\n+    factionIcon.managedProperty().bind(factionIcon.visibleProperty());\n     foeIconText.managedProperty().bind(foeIconText.visibleProperty());\n     foeIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.foe\")));\n     friendIconText.managedProperty().bind(friendIconText.visibleProperty());\n     friendIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.friend\")));\n   }\n+\n+  private void setFactionIcon(Faction faction) {\n+    if (faction == null) {\n+      return;\n+    }\n+\n+    switch (faction) {\n+      case AEON:\n+        factionIcon.setVisible(true);", "originalCommit": "0d0890a135cf9cf505825ac433ecf7011cbce1d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MTU4NQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399841585", "bodyText": "Alex asked me about this earlier. I think in normal FAF having faction 5 means random, but I'm not sure about nomads. I would recommend you fire up a nomads game and see what the faction numbers for random and nomads are. It could be that in nomads 5 is nomads and 6 is random.", "author": "Askaholic", "createdAt": "2020-03-29T19:26:23Z", "path": "src/main/java/com/faforever/client/game/PlayerCardTooltipController.java", "diffHunk": "@@ -48,9 +53,44 @@ public Node getRoot() {\n \n   @Override\n   public void initialize() {\n+    factionImage.managedProperty().bind(factionImage.visibleProperty());\n+    factionIcon.managedProperty().bind(factionIcon.visibleProperty());\n     foeIconText.managedProperty().bind(foeIconText.visibleProperty());\n     foeIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.foe\")));\n     friendIconText.managedProperty().bind(friendIconText.visibleProperty());\n     friendIconText.setTooltip(new Tooltip(i18n.get(\"userInfo.friend\")));\n   }\n+\n+  private void setFactionIcon(Faction faction) {\n+    if (faction == null) {\n+      return;\n+    }\n+\n+    switch (faction) {\n+      case AEON:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE900\");\n+        factionIcon.getStyleClass().add(\"aeon\");\n+        break;\n+      case CYBRAN:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE902\");\n+        factionIcon.getStyleClass().add(\"cybran\");\n+        break;\n+      case SERAPHIM:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE903\");\n+        factionIcon.getStyleClass().add(\"seraphim\");\n+        break;\n+      case UEF:\n+        factionIcon.setVisible(true);\n+        factionIcon.setText(\"\\uE904\");\n+        factionIcon.getStyleClass().add(\"uef\");\n+        break;\n+      default:\n+        factionImage.setVisible(true);\n+        factionImage.setImage(randomImage);\n+        break;", "originalCommit": "0d0890a135cf9cf505825ac433ecf7011cbce1d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MzY1Nw==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399843657", "bodyText": "Well i think what he does making every unknow display as random seems ok to me", "author": "1-alex98", "createdAt": "2020-03-29T19:43:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MTU4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MjA2Ng==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399842066", "bodyText": "Yea, not sure about this test.", "author": "Askaholic", "createdAt": "2020-03-29T19:30:07Z", "path": "src/test/java/com/faforever/client/game/PlayerCardTooltipControllerTest.java", "diffHunk": "@@ -66,8 +73,11 @@ public void testSetOther() {\n         .defaultValues()\n         .socialStatus(SocialStatus.OTHER);\n     Player player = playerBuilder.get();\n-    instance.setPlayer(player, 1000);\n+    instance.setPlayer(player, 1000, Faction.NOMAD);", "originalCommit": "0d0890a135cf9cf505825ac433ecf7011cbce1d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MzcyMw==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399843723", "bodyText": "Well yes but let's not blame him I think it is ok. this whole faction number thing is fucked", "author": "1-alex98", "createdAt": "2020-03-29T19:44:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MjA2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0ODMxNA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399848314", "bodyText": "I'm just saying maybe don't make a test that asserts wrong behavior.", "author": "Askaholic", "createdAt": "2020-03-29T20:20:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MjA2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1MDIzNg==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1646#discussion_r399850236", "bodyText": "I changed the enum name to RANDOM instead of NOMAD. It's not used anywhere else, so shouldn't be a problem.", "author": "FemtoZetta", "createdAt": "2020-03-29T20:35:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MjA2Ng=="}], "type": "inlineReview"}, {"oid": "deccd38bb2e3679f79ce3add07fc7c9d46df4986", "url": "https://github.com/FAForever/downlords-faf-client/commit/deccd38bb2e3679f79ce3add07fc7c9d46df4986", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names", "committedDate": "2020-03-29T19:41:21Z", "type": "forcePushed"}, {"oid": "ee8c7e0ff900947f4fb776d6284eb72d7e692a2c", "url": "https://github.com/FAForever/downlords-faf-client/commit/ee8c7e0ff900947f4fb776d6284eb72d7e692a2c", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names", "committedDate": "2020-03-29T19:43:59Z", "type": "forcePushed"}, {"oid": "66e939a1cfc82131d10a24a401ad4ec6811fe9df", "url": "https://github.com/FAForever/downlords-faf-client/commit/66e939a1cfc82131d10a24a401ad4ec6811fe9df", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names", "committedDate": "2020-03-29T19:46:19Z", "type": "forcePushed"}, {"oid": "a5cf346a4c571c4d46a33134df03935c9fe3979a", "url": "https://github.com/FAForever/downlords-faf-client/commit/a5cf346a4c571c4d46a33134df03935c9fe3979a", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names", "committedDate": "2020-03-29T20:30:10Z", "type": "commit"}, {"oid": "a5cf346a4c571c4d46a33134df03935c9fe3979a", "url": "https://github.com/FAForever/downlords-faf-client/commit/a5cf346a4c571c4d46a33134df03935c9fe3979a", "message": "#1645-add-faction-icon-replay-detail\n\nfixes #1645\n-added coloured icons next to the name in the replay detail overview\n-also fixed long names getting cut off and not being able to see the rating\n-also fixed rating change being shown as \"...\" when there were long names", "committedDate": "2020-03-29T20:30:10Z", "type": "forcePushed"}]}