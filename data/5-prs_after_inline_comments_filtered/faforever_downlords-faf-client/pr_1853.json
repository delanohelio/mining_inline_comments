{"pr_number": 1853, "pr_title": "Integrate new matchmaker ui", "pr_createdAt": "2020-08-11T11:39:25Z", "pr_url": "https://github.com/FAForever/downlords-faf-client/pull/1853", "timeline": [{"oid": "fdba3592ec773cb221790054300840178393434e", "url": "https://github.com/FAForever/downlords-faf-client/commit/fdba3592ec773cb221790054300840178393434e", "message": "Integrate new matchmaker ui", "committedDate": "2020-08-11T11:26:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYzNTUzOQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r468635539", "bodyText": "With more than 2-4 queues this is gonna go wrong.", "author": "Geosearchef", "createdAt": "2020-08-11T14:42:25Z", "path": "src/main/java/com/faforever/client/teammatchmaking/TeamMatchmakingController.java", "diffHunk": "@@ -43,25 +58,68 @@\n   @FXML\n   public StackPane teamMatchmakingRoot;\n   @FXML\n-  public JFXListView<PartyMember> playerListView;\n-  @FXML\n   public JFXButton leavePartyButton;\n   @FXML\n   public JFXButton readyButton;\n   @FXML\n   public Label refreshingLabel;\n-\n+  public ToggleButton uefButton;\n+  public ToggleButton cybranButton;\n+  public ToggleButton aeonButton;\n+  public ToggleButton seraphimButton;\n+  @FXML\n+  public ImageView avatarImageView;\n+  @FXML\n+  public ImageView countryImageView;\n   @FXML\n-  public JFXListView<MatchmakingQueue> queueListView;\n+  public Label clanLabel;\n+  @FXML\n+  public Label usernameLabel;\n+  @FXML\n+  public Label teamRatingLabel;\n+  @FXML\n+  public Label gameCountLabel;\n+  public Label ladderRatingLabel;\n+  public HBox queueBox;", "originalCommit": "fdba3592ec773cb221790054300840178393434e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgzNTk3Mg==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r468835972", "bodyText": "There is space for six. Or do you mean something else?", "author": "BlackYps", "createdAt": "2020-08-11T20:10:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYzNTUzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc4NjA1MA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r469786050", "bodyText": "Is there space for six queues also on a width of 768?", "author": "Geosearchef", "createdAt": "2020-08-13T08:32:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYzNTUzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYzNTc4MA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r468635780", "bodyText": "what controller?", "author": "Geosearchef", "createdAt": "2020-08-11T14:42:48Z", "path": "src/main/java/com/faforever/client/teammatchmaking/TeamMatchmakingController.java", "diffHunk": "@@ -43,25 +58,68 @@\n   @FXML\n   public StackPane teamMatchmakingRoot;\n   @FXML\n-  public JFXListView<PartyMember> playerListView;\n-  @FXML\n   public JFXButton leavePartyButton;\n   @FXML\n   public JFXButton readyButton;\n   @FXML\n   public Label refreshingLabel;\n-\n+  public ToggleButton uefButton;\n+  public ToggleButton cybranButton;\n+  public ToggleButton aeonButton;\n+  public ToggleButton seraphimButton;\n+  @FXML\n+  public ImageView avatarImageView;\n+  @FXML\n+  public ImageView countryImageView;\n   @FXML\n-  public JFXListView<MatchmakingQueue> queueListView;\n+  public Label clanLabel;\n+  @FXML\n+  public Label usernameLabel;\n+  @FXML\n+  public Label teamRatingLabel;\n+  @FXML\n+  public Label gameCountLabel;\n+  public Label ladderRatingLabel;\n+  public HBox queueBox;\n+  public PartyMemberItemController controller;", "originalCommit": "fdba3592ec773cb221790054300840178393434e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg0NTA1Mg==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r468845052", "bodyText": "Just realized this line is never used. Must be slipped in by mistake.", "author": "BlackYps", "createdAt": "2020-08-11T20:27:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYzNTc4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYzNjYwMg==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r468636602", "bodyText": "countryFlagService.loadCountryFlag(StringUtils.isEmpty() ? ... : ...)", "author": "Geosearchef", "createdAt": "2020-08-11T14:43:52Z", "path": "src/main/java/com/faforever/client/teammatchmaking/TeamMatchmakingController.java", "diffHunk": "@@ -43,25 +58,68 @@\n   @FXML\n   public StackPane teamMatchmakingRoot;\n   @FXML\n-  public JFXListView<PartyMember> playerListView;\n-  @FXML\n   public JFXButton leavePartyButton;\n   @FXML\n   public JFXButton readyButton;\n   @FXML\n   public Label refreshingLabel;\n-\n+  public ToggleButton uefButton;\n+  public ToggleButton cybranButton;\n+  public ToggleButton aeonButton;\n+  public ToggleButton seraphimButton;\n+  @FXML\n+  public ImageView avatarImageView;\n+  @FXML\n+  public ImageView countryImageView;\n   @FXML\n-  public JFXListView<MatchmakingQueue> queueListView;\n+  public Label clanLabel;\n+  @FXML\n+  public Label usernameLabel;\n+  @FXML\n+  public Label teamRatingLabel;\n+  @FXML\n+  public Label gameCountLabel;\n+  public Label ladderRatingLabel;\n+  public HBox queueBox;\n+  public PartyMemberItemController controller;\n+  public FlowPane partyMemberPane;\n+  private Player player;\n \n   @Override\n   public void initialize() {\n \n-    playerListView.setCellFactory(listView -> new PartyMemberItemListCell(uiService));\n-    playerListView.setItems(teamMatchmakingService.getParty().getMembers());\n+    player = playerService.getCurrentPlayer().get();\n+    countryImageView.imageProperty().bind(createObjectBinding(() -> StringUtils.isEmpty(player.getCountry()) ?\n+        countryFlagService.loadCountryFlag(\"\").orElse(null) // loads earth flag\n+        : countryFlagService.loadCountryFlag(player.getCountry()).orElse(null), player.countryProperty()));", "originalCommit": "fdba3592ec773cb221790054300840178393434e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg0MzYxOA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r468843618", "bodyText": "Sorry, I don't get it", "author": "BlackYps", "createdAt": "2020-08-11T20:25:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYzNjYwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc4NjU1OQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r469786559", "bodyText": "This is very hard to read as you have duplicated code. You don't need to list countryFlagService.loadCountryFlag() twice. Just do the teneray operator on the country string.", "author": "Geosearchef", "createdAt": "2020-08-13T08:32:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYzNjYwMg=="}], "type": "inlineReview"}, {"oid": "4c960de0fe4306d51341352b30caec9b497f0ad8", "url": "https://github.com/FAForever/downlords-faf-client/commit/4c960de0fe4306d51341352b30caec9b497f0ad8", "message": "Use i18n instead of hardcoded text", "committedDate": "2020-08-11T21:01:56Z", "type": "commit"}, {"oid": "515fb3db9c76635fc77c8f9490252c59695f67fd", "url": "https://github.com/FAForever/downlords-faf-client/commit/515fb3db9c76635fc77c8f9490252c59695f67fd", "message": "Filter player out of party", "committedDate": "2020-08-11T21:30:57Z", "type": "commit"}, {"oid": "f269f7f7b622580b1980d71f5c5a5cd61557f0ce", "url": "https://github.com/FAForever/downlords-faf-client/commit/f269f7f7b622580b1980d71f5c5a5cd61557f0ce", "message": "Refactor country flag loading", "committedDate": "2020-08-20T07:51:08Z", "type": "commit"}, {"oid": "2b568e3639873e84a3d088fc7ea458e22422af40", "url": "https://github.com/FAForever/downlords-faf-client/commit/2b568e3639873e84a3d088fc7ea458e22422af40", "message": "Change ready button to play button", "committedDate": "2020-08-20T19:38:17Z", "type": "commit"}, {"oid": "aa2ef7991287a5ea8bc3af6f4c008ad106a47877", "url": "https://github.com/FAForever/downlords-faf-client/commit/aa2ef7991287a5ea8bc3af6f4c008ad106a47877", "message": "Uppercase now controlled by styleclass to enable override by themes", "committedDate": "2020-09-14T20:52:05Z", "type": "commit"}, {"oid": "025c079e23af590c6cc5bc2efa861ce1d9bed5e6", "url": "https://github.com/FAForever/downlords-faf-client/commit/025c079e23af590c6cc5bc2efa861ce1d9bed5e6", "message": "Delete obsolete play button", "committedDate": "2020-09-14T21:09:49Z", "type": "commit"}, {"oid": "5bafdd3ad1297c83496c7ca0abf75517aa8e8858", "url": "https://github.com/FAForever/downlords-faf-client/commit/5bafdd3ad1297c83496c7ca0abf75517aa8e8858", "message": "Enable resizing of the UI", "committedDate": "2020-09-14T21:27:10Z", "type": "commit"}, {"oid": "9095afa78644b12a7d4b6944d9cbeed51dc142a3", "url": "https://github.com/FAForever/downlords-faf-client/commit/9095afa78644b12a7d4b6944d9cbeed51dc142a3", "message": "Add new heading for queue area", "committedDate": "2020-09-14T21:37:13Z", "type": "commit"}, {"oid": "16f097866d6212844750291dbd0ce8bd62e9aa7d", "url": "https://github.com/FAForever/downlords-faf-client/commit/16f097866d6212844750291dbd0ce8bd62e9aa7d", "message": "Fix some bugs", "committedDate": "2020-09-15T08:41:13Z", "type": "commit"}, {"oid": "d46a7d81f8186b86bdc8c441b1df95b39def2be4", "url": "https://github.com/FAForever/downlords-faf-client/commit/d46a7d81f8186b86bdc8c441b1df95b39def2be4", "message": "Restyle queue cards", "committedDate": "2020-09-16T11:41:42Z", "type": "commit"}, {"oid": "b3358fc5f331eac0f611754a97985e3d4cd9300b", "url": "https://github.com/FAForever/downlords-faf-client/commit/b3358fc5f331eac0f611754a97985e3d4cd9300b", "message": "Implement queue name lookup and shortening", "committedDate": "2020-09-16T19:33:55Z", "type": "commit"}, {"oid": "bdcda34f4138e621619798380583f670d4b6c977", "url": "https://github.com/FAForever/downlords-faf-client/commit/bdcda34f4138e621619798380583f670d4b6c977", "message": "Replace rating labels with league icon + label", "committedDate": "2020-09-22T11:11:58Z", "type": "commit"}, {"oid": "6c86a3515238234eeee8a925122692310336ff8f", "url": "https://github.com/FAForever/downlords-faf-client/commit/6c86a3515238234eeee8a925122692310336ff8f", "message": "Layout changes and playercard grows properly", "committedDate": "2020-10-01T17:28:09Z", "type": "commit"}, {"oid": "202c6e6bbb2d65f844bab8d76b71bf6a368763c8", "url": "https://github.com/FAForever/downlords-faf-client/commit/202c6e6bbb2d65f844bab8d76b71bf6a368763c8", "message": "Use proper string formatting", "committedDate": "2020-10-01T22:20:03Z", "type": "commit"}, {"oid": "b79ddae4528000a3bc2940be5c78cc2481b3010b", "url": "https://github.com/FAForever/downlords-faf-client/commit/b79ddae4528000a3bc2940be5c78cc2481b3010b", "message": "Add matching status labels", "committedDate": "2020-10-01T22:38:27Z", "type": "commit"}, {"oid": "157b65757c99f782f8258e3abbded272e2731c3e", "url": "https://github.com/FAForever/downlords-faf-client/commit/157b65757c99f782f8258e3abbded272e2731c3e", "message": "Merge branch 'feature/team-matchmaking' into feature/new-tmm-ui\n\n# Conflicts:\n#\tsrc/main/java/com/faforever/client/teammatchmaking/MatchmakingQueueItemController.java\n#\tsrc/main/java/com/faforever/client/teammatchmaking/PartyMemberItemController.java\n#\tsrc/main/resources/i18n/messages.properties\n#\tsrc/main/resources/theme/play/team_matchmaking.fxml\n#\tsrc/main/resources/theme/play/teammatchmaking/matchmaking_member_card.fxml\n#\tsrc/main/resources/theme/play/teammatchmaking/matchmaking_queue_card.fxml", "committedDate": "2020-10-01T23:20:57Z", "type": "commit"}, {"oid": "65b6b81e6e648bc55c083eb158e5d0dd4720f72e", "url": "https://github.com/FAForever/downlords-faf-client/commit/65b6b81e6e648bc55c083eb158e5d0dd4720f72e", "message": "Fix merge errors", "committedDate": "2020-10-02T15:02:06Z", "type": "commit"}, {"oid": "cffc66e6cba2f2b8a89c7a0773451a5d88d432f0", "url": "https://github.com/FAForever/downlords-faf-client/commit/cffc66e6cba2f2b8a89c7a0773451a5d88d432f0", "message": "tmm: parse factions as string, fix status indicators for own faction selection", "committedDate": "2020-10-04T11:31:07Z", "type": "commit"}, {"oid": "c99d1e32ac5b0913dc1741de7813b357de8030f5", "url": "https://github.com/FAForever/downlords-faf-client/commit/c99d1e32ac5b0913dc1741de7813b357de8030f5", "message": "fix queue join race condition, set queue joined button state based on server state", "committedDate": "2020-10-04T11:52:43Z", "type": "commit"}, {"oid": "9ea96bb8e2b33731f7bd73bcf2fa439017665911", "url": "https://github.com/FAForever/downlords-faf-client/commit/9ea96bb8e2b33731f7bd73bcf2fa439017665911", "message": "fix faction parsing for game launch message", "committedDate": "2020-10-04T12:19:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI1MDkyOQ==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r499250929", "bodyText": "U know you can do List just be parsed correctly. If not you need to make some annotation", "author": "1-alex98", "createdAt": "2020-10-04T14:11:49Z", "path": "src/main/java/com/faforever/client/remote/domain/PartyInfoMessage.java", "diffHunk": "@@ -20,11 +20,11 @@ public PartyInfoMessage() {\n   public static class PartyMember {\n     private Integer player;\n     private Boolean ready;\n-    private List<Integer> factions;\n+    private List<String> factions;", "originalCommit": "9ea96bb8e2b33731f7bd73bcf2fa439017665911", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI1MDk3Ng==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r499250976", "bodyText": "Same here", "author": "1-alex98", "createdAt": "2020-10-04T14:12:07Z", "path": "src/main/java/com/faforever/client/remote/domain/SetPartyFactionsMessage.java", "diffHunk": "@@ -7,18 +7,18 @@\n \n public class SetPartyFactionsMessage extends ClientMessage {\n \n-  private List<Integer> factions;\n+  private List<String> factions;", "originalCommit": "9ea96bb8e2b33731f7bd73bcf2fa439017665911", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI1MTE5OA==", "url": "https://github.com/FAForever/downlords-faf-client/pull/1853#discussion_r499251198", "bodyText": "@FXML would be needed if the properties were private", "author": "1-alex98", "createdAt": "2020-10-04T14:14:30Z", "path": "src/main/java/com/faforever/client/teammatchmaking/TeamMatchmakingController.java", "diffHunk": "@@ -43,25 +62,70 @@\n   @FXML\n   public StackPane teamMatchmakingRoot;\n   @FXML\n-  public JFXListView<PartyMember> playerListView;\n-  @FXML\n   public JFXButton leavePartyButton;\n   @FXML\n-  public JFXButton readyButton;\n-  @FXML\n   public Label refreshingLabel;\n-\n+  public ToggleButton uefButton;\n+  public ToggleButton cybranButton;\n+  public ToggleButton aeonButton;\n+  public ToggleButton seraphimButton;\n+  @FXML\n+  public ImageView avatarImageView;\n   @FXML\n-  public JFXListView<MatchmakingQueue> queueListView;\n+  public ImageView countryImageView;\n+  @FXML\n+  public Label clanLabel;\n+  @FXML\n+  public Label usernameLabel;\n+  @FXML", "originalCommit": "9ea96bb8e2b33731f7bd73bcf2fa439017665911", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}