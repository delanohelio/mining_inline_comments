{"pr_number": 3, "pr_title": "Location resource implementation", "pr_createdAt": "2020-01-07T13:45:39Z", "pr_url": "https://github.com/openmrs/openmrs-module-fhir2/pull/3", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc1NjMwNQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/3#discussion_r363756305", "bodyText": "There seems to be unnecessary spacing before every line in this file", "author": "ibacher", "createdAt": "2020-01-07T13:52:11Z", "path": "api/src/main/java/org/openmrs/module/fhir2/api/dao/impl/FhirLocationDaoImpl.java", "diffHunk": "@@ -0,0 +1,33 @@\n+\t/*", "originalCommit": "6f503d19a25ebefd1450320e27ab2a610afb1103", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc1NjY5OQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/3#discussion_r363756699", "bodyText": "I'd prefer it if we had blank newlines at the end of files. It prevents some issues that can arise in git.", "author": "ibacher", "createdAt": "2020-01-07T13:53:03Z", "path": "api/src/main/java/org/openmrs/module/fhir2/api/FhirLocationService.java", "diffHunk": "@@ -0,0 +1,19 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api;\n+\n+import org.hl7.fhir.r4.model.Location;\n+\n+import javax.validation.constraints.NotNull;\n+\n+public interface FhirLocationService {\n+\n+    Location getLocationByUuid(@NotNull String uuid);\n+} ", "originalCommit": "6f503d19a25ebefd1450320e27ab2a610afb1103", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc1NzAxMQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/3#discussion_r363757011", "bodyText": "This method should be called getLocationByUuid", "author": "ibacher", "createdAt": "2020-01-07T13:53:46Z", "path": "api/src/main/java/org/openmrs/module/fhir2/api/dao/FhirLocationDao.java", "diffHunk": "@@ -0,0 +1,20 @@\n+\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.dao;\n+\n+import org.openmrs.Location;\n+\n+import javax.validation.constraints.NotNull;\n+\n+public interface FhirLocationDao {\n+\n+    Location getLocationByuuid(@NotNull String uuid);", "originalCommit": "6f503d19a25ebefd1450320e27ab2a610afb1103", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc1ODQyNg==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/3#discussion_r363758426", "bodyText": "Could you add some tests for the corresponding toOpenmrsType() method since that appears to also be implemented in this PR.", "author": "ibacher", "createdAt": "2020-01-07T13:57:08Z", "path": "api/src/test/java/org/openmrs/module/fhir2/api/translators/impl/LocationTranslatorImplTest.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.translators.impl;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.runners.MockitoJUnitRunner;\n+import org.openmrs.Location;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class LocationTranslatorImplTest {\n+\n+    private static final String LOCATION_UUID = \"c0938432-1691-11df-97a5-7038c432aaba\";\n+\n+    private static final String LOCATION_NAME = \"Test location 1\";\n+\n+    private static final String LOCATION_DESCRIPTION = \"Test description\";\n+\n+    private LocationTranslatorImpl locationTranslator;\n+\n+    private Location omrsLocation;\n+\n+    @Before\n+    public void setup() {\n+        locationTranslator = new LocationTranslatorImpl();\n+        omrsLocation = new Location();\n+    }\n+\n+    @Test\n+    public void shouldTranslateOpenmrsLocationToFhirLocation() {\n+        org.hl7.fhir.r4.model.Location fhirLocation = locationTranslator.toFhirResource(omrsLocation);\n+        assertNotNull(omrsLocation);\n+        assertNotNull(fhirLocation);\n+        assertEquals(omrsLocation.getName(), fhirLocation.getName());\n+    }\n+\n+    @Test\n+    public void shouldTranslateLocationUuidToFhiIdType() {\n+        omrsLocation.setUuid(LOCATION_UUID);\n+        org.hl7.fhir.r4.model.Location fhirLocation = locationTranslator.toFhirResource(omrsLocation);\n+        assertNotNull(fhirLocation);\n+        assertNotNull(fhirLocation.getId());\n+        assertEquals(fhirLocation.getId(), LOCATION_UUID);\n+    }\n+\n+    @Test\n+    public void shouldTranslateLocationNameToFhirNameType() {\n+        omrsLocation.setName(LOCATION_NAME);\n+        org.hl7.fhir.r4.model.Location fhirLocation = locationTranslator.toFhirResource(omrsLocation);\n+        assertNotNull(fhirLocation);\n+        assertNotNull(fhirLocation.getName());\n+        assertEquals(fhirLocation.getName(), LOCATION_NAME);\n+    }\n+\n+    @Test\n+    public void shouldTranslateLocationDescriptionToFhirDescriptionType() {\n+        omrsLocation.setDescription(LOCATION_DESCRIPTION);\n+        org.hl7.fhir.r4.model.Location fhirLocation = locationTranslator.toFhirResource(omrsLocation);\n+        assertNotNull(fhirLocation);\n+        assertNotNull(fhirLocation.getDescription());\n+        assertEquals(fhirLocation.getDescription(), LOCATION_DESCRIPTION);\n+    }\n+", "originalCommit": "6f503d19a25ebefd1450320e27ab2a610afb1103", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6f118da0840a17c27274110d0f433550c1f4ba2b", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/6f118da0840a17c27274110d0f433550c1f4ba2b", "message": "Location resource implementation", "committedDate": "2020-01-07T14:08:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzgwMDg4NQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/3#discussion_r363800885", "bodyText": "Add another assertion to check if returns location with correct uuid", "author": "corneliouzbett", "createdAt": "2020-01-07T15:24:34Z", "path": "api/src/test/java/org/openmrs/module/fhir2/api/impl/FhirLocationServiceImplTest.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.impl;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.runners.MockitoJUnitRunner;\n+import org.openmrs.Location;\n+import org.openmrs.module.fhir2.api.dao.FhirLocationDao;\n+import org.openmrs.module.fhir2.api.translators.LocationTranslator;\n+import static org.junit.Assert.assertNotNull;\n+\n+import java.util.Date;\n+\n+import static org.mockito.Mockito.when;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class FhirLocationServiceImplTest {\n+\n+    private static final String LOCATION_UUID = \"c0938432-1691-11df-97a5-7038c432aaba\";\n+\n+    private static final String LOCATION_NAME = \"Test location 1\";\n+\n+    private static final String LOCATION_DESCRIPTION = \"Test description\";\n+\n+    @Mock\n+    FhirLocationDao locationDao;\n+\n+    @Mock\n+    LocationTranslator locationTranslator;\n+\n+    private FhirLocationServiceImpl fhirLocationService;\n+\n+    @Before\n+    public void setUp() {\n+        fhirLocationService = new FhirLocationServiceImpl();\n+        fhirLocationService.setLocationDao(locationDao);\n+        fhirLocationService.setLocationTranslator(locationTranslator);\n+    }\n+\n+    @Test\n+    public void shouldGetLocationByUuid() {\n+        Location location = new Location();\n+        location.setUuid(LOCATION_UUID);\n+        location.setName(LOCATION_NAME);\n+        location.setDescription(LOCATION_DESCRIPTION);\n+        location.setDateCreated(new Date());\n+        location.setRetired(false);\n+\n+        when(locationDao.getLocationByuuid(LOCATION_UUID)).thenReturn(location);\n+\n+        org.hl7.fhir.r4.model.Location result = fhirLocationService.getLocationByUuid(LOCATION_UUID);\n+        assertNotNull(location);", "originalCommit": "6f118da0840a17c27274110d0f433550c1f4ba2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "191f2edf64d64639328450ef43ef4079caebfa4d", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/191f2edf64d64639328450ef43ef4079caebfa4d", "message": "Location resource implementation", "committedDate": "2020-01-07T16:08:16Z", "type": "forcePushed"}, {"oid": "7471131adde30ff9240f68c0014bcc51af306dd3", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/7471131adde30ff9240f68c0014bcc51af306dd3", "message": "Location resource implementation", "committedDate": "2020-01-07T16:13:55Z", "type": "forcePushed"}, {"oid": "7471131adde30ff9240f68c0014bcc51af306dd3", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/7471131adde30ff9240f68c0014bcc51af306dd3", "message": "Location resource implementation", "committedDate": "2020-01-07T16:13:55Z", "type": "forcePushed"}, {"oid": "8296c823bc491d5dce7c72400dd92a6f00b04175", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/8296c823bc491d5dce7c72400dd92a6f00b04175", "message": "Location resource implementation", "committedDate": "2020-01-07T16:32:17Z", "type": "commit"}, {"oid": "8296c823bc491d5dce7c72400dd92a6f00b04175", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/8296c823bc491d5dce7c72400dd92a6f00b04175", "message": "Location resource implementation", "committedDate": "2020-01-07T16:32:17Z", "type": "forcePushed"}]}