{"pr_number": 102, "pr_title": "FM2-100: Return an empty list when searching by an invalid gender code", "pr_createdAt": "2020-03-03T17:17:28Z", "pr_url": "https://github.com/openmrs/openmrs-module-fhir2/pull/102", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE3Mjk1Ng==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/102#discussion_r387172956", "bodyText": "We should probably extract this out into a constant", "author": "ibacher", "createdAt": "2020-03-03T17:19:08Z", "path": "api/src/test/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImplTest.java", "diffHunk": "@@ -271,7 +271,7 @@ public void searchForPatients_shouldReturnPatientsByGender() {\n \t@Test\n \tpublic void searchForPatients_shouldReturnEmptyCollectionWhenGenderNotMatched() {\n \t\tCollection<Patient> results = dao.searchForPatients(null, null, null, null,\n-\t\t    new TokenOrListParam().add(new TokenParam(\"other\")), null, null, null, null, null, null, null, null);\n+\t\t    new TokenOrListParam().add(new TokenParam(\"wrong-gender\")), null, null, null, null, null, null, null, null);", "originalCommit": "5094b51e0d71e22f4dcf2cf357db15a9cea27f55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "de5913c1febb9b91fa5d037157d620e7f41f0bed", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/de5913c1febb9b91fa5d037157d620e7f41f0bed", "message": "FM2-100: Return an empty list when searching by an invalid gender code", "committedDate": "2020-03-03T17:19:04Z", "type": "forcePushed"}, {"oid": "a88c74e4dd67ac001d6db81b6d59500b8609074e", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/a88c74e4dd67ac001d6db81b6d59500b8609074e", "message": "FM2-100: Return an empty list when searching by an invalid gender code", "committedDate": "2020-03-03T17:27:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE3ODAzMQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/102#discussion_r387178031", "bodyText": "We should also address the Optional.empty() above this line.", "author": "ibacher", "createdAt": "2020-03-03T17:28:04Z", "path": "api/src/main/java/org/openmrs/module/fhir2/api/dao/impl/BaseDaoImpl.java", "diffHunk": "@@ -440,7 +440,7 @@ protected boolean containsAlias(Iterator<CriteriaImpl.Subcriteria> subcriteriaIt\n \t\t\t}", "originalCommit": "a88c74e4dd67ac001d6db81b6d59500b8609074e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE4ODkzNg==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/102#discussion_r387188936", "bodyText": "I have a couple of questions here,\n\n\nThe code OTHER has a mapping to 'O', as shown in the GenderTranslatorImplTest. Keeping that in mind, should we change the Criterion to match 'O' specifically? Because the code UNKNOWN too has a mapping to 'U'.\n\n\nShould NULL match any resource or those which have gender set to empty or null (if that's even possible)?", "author": "CaptainDaVinci", "createdAt": "2020-03-03T17:48:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE3ODAzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxODc1OQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/102#discussion_r387218759", "bodyText": "So remember what we're mapping to here: we're querying the OpenMRS database for people matching whatever gender. In OpenMRS, there are really just three possible gender codes M, F and null.  Maybe a better way to support this is to map all of OTHER, UNKNOWN, and NULL to gender is null. We should probably fix the gender translator to reflect this as well. I suppose it should just return M for \"male\", F for \"female\" and null for \"unknown\".", "author": "ibacher", "createdAt": "2020-03-03T18:43:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE3ODAzMQ=="}], "type": "inlineReview"}, {"oid": "7aaf1cc779e7d2cf525b1f8b5f913a10d05d5129", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/7aaf1cc779e7d2cf525b1f8b5f913a10d05d5129", "message": "FM2-100: Return an empty list when searching by an invalid gender code", "committedDate": "2020-03-04T03:17:28Z", "type": "forcePushed"}, {"oid": "3622c12bc9ab085fe02d9f2217ac3cfd92ce503a", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/3622c12bc9ab085fe02d9f2217ac3cfd92ce503a", "message": "FM2-100: Return an empty list when searching by an invalid gender code", "committedDate": "2020-03-04T15:50:31Z", "type": "forcePushed"}, {"oid": "f27f35925aaab1da3a098e2a07b81150c4afdffb", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/f27f35925aaab1da3a098e2a07b81150c4afdffb", "message": "Add tests for gender match", "committedDate": "2020-03-05T03:59:11Z", "type": "forcePushed"}, {"oid": "23a0c616bdce014ad97c84eb597bbf7f14caf246", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/23a0c616bdce014ad97c84eb597bbf7f14caf246", "message": "FM2-100: Return an empty list when searching by an invalid gender code", "committedDate": "2020-03-09T03:34:39Z", "type": "commit"}, {"oid": "56608c6cd3725ee45ee66cc3173f6aa01285d016", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/56608c6cd3725ee45ee66cc3173f6aa01285d016", "message": "Add tests for gender match", "committedDate": "2020-03-09T03:34:39Z", "type": "commit"}, {"oid": "56608c6cd3725ee45ee66cc3173f6aa01285d016", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/56608c6cd3725ee45ee66cc3173f6aa01285d016", "message": "Add tests for gender match", "committedDate": "2020-03-09T03:34:39Z", "type": "forcePushed"}, {"oid": "6ba27770496aea63b26666becf97b3bec5c7b287", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/6ba27770496aea63b26666becf97b3bec5c7b287", "message": "Merge branch 'master' into FM2-100", "committedDate": "2020-03-10T07:29:58Z", "type": "commit"}, {"oid": "91f3ee575a40c4070eeb298f6b8dd65e3dfde91c", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/91f3ee575a40c4070eeb298f6b8dd65e3dfde91c", "message": "Merge branch 'master' into FM2-100", "committedDate": "2020-03-10T11:19:26Z", "type": "commit"}]}