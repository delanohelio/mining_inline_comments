{"pr_number": 207, "pr_title": "FM2-207: Create default narratives for Encounter, Observation and Location", "pr_createdAt": "2020-06-13T07:18:36Z", "pr_url": "https://github.com/openmrs/openmrs-module-fhir2/pull/207", "timeline": [{"oid": "053237b0e4f76afa5bbbd2f9c9af9c1c103f9f40", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/053237b0e4f76afa5bbbd2f9c9af9c1c103f9f40", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)", "committedDate": "2020-06-15T15:48:54Z", "type": "forcePushed"}, {"oid": "96d9494e96551a27b55bf54341afa6fde90aea98", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/96d9494e96551a27b55bf54341afa6fde90aea98", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)", "committedDate": "2020-06-15T16:24:33Z", "type": "forcePushed"}, {"oid": "c1c297c4d7f2fde7aa155bd5382d93d0144d906e", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c1c297c4d7f2fde7aa155bd5382d93d0144d906e", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)", "committedDate": "2020-06-15T17:23:59Z", "type": "forcePushed"}, {"oid": "85dea48aca9b3e3f130d0e7af33ee249a6262c95", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/85dea48aca9b3e3f130d0e7af33ee249a6262c95", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)", "committedDate": "2020-06-15T17:48:17Z", "type": "forcePushed"}, {"oid": "a8860cc3bf3b5824311cf9d6ad941e74bbae6f4e", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/a8860cc3bf3b5824311cf9d6ad941e74bbae6f4e", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)", "committedDate": "2020-06-16T06:27:10Z", "type": "forcePushed"}, {"oid": "fc18ef38123f0c07e715ce27df280973e49c0409", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/fc18ef38123f0c07e715ce27df280973e49c0409", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)", "committedDate": "2020-06-19T03:41:51Z", "type": "forcePushed"}, {"oid": "5989f3397a44c7d6d5216ea4d4872a50238d3a37", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/5989f3397a44c7d6d5216ea4d4872a50238d3a37", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)", "committedDate": "2020-06-23T05:10:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk2NjIwMQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/207#discussion_r443966201", "bodyText": "I guess this file got changed due to autoformat.", "author": "ShivanshRakesh", "createdAt": "2020-06-23T05:16:07Z", "path": "api/src/main/java/org/openmrs/module/fhir2/api/dao/impl/FhirRelatedPersonDaoImpl.java", "diffHunk": "@@ -90,18 +90,15 @@\n \t\t\tcriteria.add(and(eq(\"pn.voided\", false), or(\n \t\t\t    and(eq(\"pn.preferred\", true),\n \t\t\t        Subqueries.propertyEq(\"pn.personNameId\",\n-\t\t\t            DetachedCriteria.forClass(PersonName.class, \"pn1\")\n-\t\t\t\t\t            .add(eq(\"pn1.preferred\", true))\n+\t\t\t            DetachedCriteria.forClass(PersonName.class, \"pn1\").add(eq(\"pn1.preferred\", true))\n \t\t\t                    .add(sqlRestriction(String.format(\"pn1_.person_id = %s.person_a\", \"this_\")))\n \t\t\t                    .setProjection(Projections.min(\"pn1.personNameId\")))),\n-\t\t\t    and(Subqueries.notExists(DetachedCriteria.forClass(PersonName.class, \"pn2\")\n-\t\t\t\t\t\t\t    .add(eq(\"pn2.preferred\", true))\n+\t\t\t    and(Subqueries.notExists(DetachedCriteria.forClass(PersonName.class, \"pn2\").add(eq(\"pn2.preferred\", true))\n \t\t\t            // WARNING this is fragile\n \t\t\t            .add(sqlRestriction(String.format(\"pn2_.person_id = %s.person_a\", \"this_\")))\n \t\t\t            .setProjection(Projections.id())),\n \t\t\t        Subqueries.propertyEq(\"pn.personNameId\",\n-\t\t\t            DetachedCriteria.forClass(PersonName.class, \"pn3\")\n-\t\t\t\t\t            .add(eq(\"pn3.preferred\", false))\n+\t\t\t            DetachedCriteria.forClass(PersonName.class, \"pn3\").add(eq(\"pn3.preferred\", false))\n \t\t\t                    // WARNING this is fragile", "originalCommit": "5989f3397a44c7d6d5216ea4d4872a50238d3a37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "070b5b1163ab0f85f9bd30cfa407a6ed3aacf5a5", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/070b5b1163ab0f85f9bd30cfa407a6ed3aacf5a5", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)", "committedDate": "2020-06-25T13:45:35Z", "type": "commit"}, {"oid": "070b5b1163ab0f85f9bd30cfa407a6ed3aacf5a5", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/070b5b1163ab0f85f9bd30cfa407a6ed3aacf5a5", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)", "committedDate": "2020-06-25T13:45:35Z", "type": "forcePushed"}]}