{"pr_number": 174, "pr_title": "FM2-174: Improve search for DiagnosticReport resource", "pr_createdAt": "2020-05-17T12:46:24Z", "pr_url": "https://github.com/openmrs/openmrs-module-fhir2/pull/174", "timeline": [{"oid": "020e6bb23e337d2e4e122081c231dd97c3e8c2d7", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/020e6bb23e337d2e4e122081c231dd97c3e8c2d7", "message": "FM2-174: Improve search for DiagnosticReport resource", "committedDate": "2020-05-18T18:16:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgzMDg0Mg==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/174#discussion_r426830842", "bodyText": "Let's not try to map an effectiveDate. We don't really have anything for which that's semantically meaningful.", "author": "ibacher", "createdAt": "2020-05-18T18:56:05Z", "path": "omod/src/main/java/org/openmrs/module/fhir2/providers/DiagnosticReportFhirResourceProvider.java", "diffHunk": "@@ -69,4 +79,18 @@ public MethodOutcome updateDiagnosticReport(@IdParam IdType id, @ResourceParam D\n \t\t\n \t\treturn FhirServerUtils.buildUpdate(service.update(idPart, diagnosticReport));\n \t}\n+\t\n+\t@Search\n+\tpublic Bundle searchForDiagnosticReports(\n+\t        @OptionalParam(name = DiagnosticReport.SP_ENCOUNTER, chainWhitelist = {\n+\t                \"\" }, targetTypes = Encounter.class) ReferenceAndListParam encounterReference,\n+\t        @OptionalParam(name = DiagnosticReport.SP_PATIENT, chainWhitelist = { \"\", Patient.SP_IDENTIFIER,\n+\t                Patient.SP_GIVEN, Patient.SP_FAMILY,\n+\t                Patient.SP_NAME }, targetTypes = Patient.class) ReferenceAndListParam patientReference,\n+\t        @OptionalParam(name = DiagnosticReport.SP_ISSUED) DateRangeParam issueDate,\n+\t        @OptionalParam(name = DiagnosticReport.SP_DATE) DateRangeParam effectiveDate,", "originalCommit": "8db29509ab613302d958ef803317d1d21246c578", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgzMjI5MA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/174#discussion_r426832290", "bodyText": "But we are doing that for observation as well.", "author": "varung-31", "createdAt": "2020-05-18T18:58:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgzMDg0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgzMzM1NQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/174#discussion_r426833355", "bodyText": "The meaning is a bit different for a DiagnosticReport versus a standard observation. One of the reasons I want to get them off of this weird obs group formatting.", "author": "ibacher", "createdAt": "2020-05-18T19:00:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgzMDg0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgzNDgzMQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/174#discussion_r426834831", "bodyText": "Okay, i'll do that.", "author": "varung-31", "createdAt": "2020-05-18T19:03:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgzMDg0Mg=="}], "type": "inlineReview"}, {"oid": "9272399b3ec921176b41d9c99af306eec5fa6f7a", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/9272399b3ec921176b41d9c99af306eec5fa6f7a", "message": "FM2-174: Improve search for DiagnosticReport resource", "committedDate": "2020-05-18T19:24:50Z", "type": "forcePushed"}, {"oid": "d12b34bd14c2953318df84287591e2bf24c3e81a", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/d12b34bd14c2953318df84287591e2bf24c3e81a", "message": "FM2-174: Improve search for DiagnosticReport resource", "committedDate": "2020-05-19T15:59:11Z", "type": "commit"}, {"oid": "d12b34bd14c2953318df84287591e2bf24c3e81a", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/d12b34bd14c2953318df84287591e2bf24c3e81a", "message": "FM2-174: Improve search for DiagnosticReport resource", "committedDate": "2020-05-19T15:59:11Z", "type": "forcePushed"}]}