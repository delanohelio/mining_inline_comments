{"pr_number": 7292, "pr_title": "Refactor DALStatement to MySQL, PostgreSQL DALStatement", "pr_createdAt": "2020-09-07T10:45:57Z", "pr_url": "https://github.com/apache/shardingsphere/pull/7292", "timeline": [{"oid": "dbd4ebc2a3411601078187cacd8d1e63dc18803f", "url": "https://github.com/apache/shardingsphere/commit/dbd4ebc2a3411601078187cacd8d1e63dc18803f", "message": "Refactor DALStatement to MySQL, PostgreSQL DALStatement", "committedDate": "2020-09-07T10:21:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDYyMDM0Mg==", "url": "https://github.com/apache/shardingsphere/pull/7292#discussion_r484620342", "bodyText": "Hi @strongduanmu Here ChecksumTableStatement is an abstract class. Does that mean we will have MySQL ChecksumTableStatement, or OracleChecksumTableStatement? But I only saw the definition of MySQL ChecksumTableStatement. Therefore, do you think the abstract class ChecksumTableStatement is required? Or maybe it is more suitable just to have a class named MySQL ChecksumTableStatement?\nOther abstract classes have such an issue as well, so I would like to listen to what you think.", "author": "tristaZero", "createdAt": "2020-09-08T02:43:52Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/common/statement/dal/ChecksumTableStatement.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.sql.parser.sql.common.statement.dal;\n+\n+import org.apache.shardingsphere.sql.parser.sql.common.statement.AbstractSQLStatement;\n+\n+/**\n+ * Checksum table statement.\n+ */\n+public abstract class ChecksumTableStatement extends AbstractSQLStatement {", "originalCommit": "dbd4ebc2a3411601078187cacd8d1e63dc18803f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY1MDA4NQ==", "url": "https://github.com/apache/shardingsphere/pull/7292#discussion_r484650085", "bodyText": "@tristaZero This way is to ensure the consistency of the processing logic. Whether there is one subclass or multiple subclasses, it can be processed towards the parent class. Only when there is a special SQL dialect, the subclass will be used. \ud83d\ude02\nOf course, when the SQL statement has only one dialect, this may cause users to misunderstand that it is a general statement.", "author": "strongduanmu", "createdAt": "2020-09-08T04:58:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDYyMDM0Mg=="}], "type": "inlineReview"}, {"oid": "4be513b89183e872d3177b1b39d2febf824c8a06", "url": "https://github.com/apache/shardingsphere/commit/4be513b89183e872d3177b1b39d2febf824c8a06", "message": "Delete the abstract parent class of a single SQL dialect", "committedDate": "2020-09-08T14:01:41Z", "type": "commit"}, {"oid": "e2cd1eb6cfeacc31ccb326293e63debc3cc82614", "url": "https://github.com/apache/shardingsphere/commit/e2cd1eb6cfeacc31ccb326293e63debc3cc82614", "message": "fix checkstyle", "committedDate": "2020-09-08T14:22:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMwMzg2NA==", "url": "https://github.com/apache/shardingsphere/pull/7292#discussion_r485303864", "bodyText": "Hi @strongduanmu\nWhere is MySQLAnalyzeTableStatement used?", "author": "tristaZero", "createdAt": "2020-09-09T02:42:16Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/dialect/statement/mysql/dal/MySQLAnalyzeTableStatement.java", "diffHunk": "@@ -17,12 +17,12 @@\n \n package org.apache.shardingsphere.sql.parser.sql.dialect.statement.mysql.dal;\n \n-import org.apache.shardingsphere.sql.parser.sql.common.statement.AbstractSQLStatement;\n+import org.apache.shardingsphere.sql.parser.sql.common.statement.dal.AnalyzeTableStatement;\n import org.apache.shardingsphere.sql.parser.sql.common.statement.dal.DALStatement;\n import org.apache.shardingsphere.sql.parser.sql.dialect.statement.mysql.MySQLStatement;\n \n /**\n- * Analyze table statement.\n+ * MySQL analyze table statement.\n  */\n-public final class MySQLAnalyzeTableStatement extends AbstractSQLStatement implements DALStatement, MySQLStatement {\n+public final class MySQLAnalyzeTableStatement extends AnalyzeTableStatement implements DALStatement, MySQLStatement {", "originalCommit": "e2cd1eb6cfeacc31ccb326293e63debc3cc82614", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMwODUwNw==", "url": "https://github.com/apache/shardingsphere/pull/7292#discussion_r485308507", "bodyText": "Hi @strongduanmu\nWhere is MySQLAnalyzeTableStatement used?\n\n@tristaZero Now, MySQLAnalyzeTableStatement is only used in the MySQLDALVisitor class for parsing. The execution of anlyze table statement is not yet supported.", "author": "strongduanmu", "createdAt": "2020-09-09T03:00:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMwMzg2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMxMTIwMw==", "url": "https://github.com/apache/shardingsphere/pull/7292#discussion_r485311203", "bodyText": "Thanks for your explanation. Merged.", "author": "tristaZero", "createdAt": "2020-09-09T03:11:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMwMzg2NA=="}], "type": "inlineReview"}]}