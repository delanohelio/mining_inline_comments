{"pr_number": 5616, "pr_title": "Issue 5428 for SchemaChangedListenerTest.java", "pr_createdAt": "2020-05-15T03:04:49Z", "pr_url": "https://github.com/apache/shardingsphere/pull/5616", "timeline": [{"oid": "16c7f7a415714ec1ca6942f221dde9f041f32026", "url": "https://github.com/apache/shardingsphere/commit/16c7f7a415714ec1ca6942f221dde9f041f32026", "message": "Merge pull request #1 from apache/master\n\nPull from Main", "committedDate": "2020-05-15T01:19:18Z", "type": "commit"}, {"oid": "338d2feb036d0e421047280dcdb6441c569fc001", "url": "https://github.com/apache/shardingsphere/commit/338d2feb036d0e421047280dcdb6441c569fc001", "message": "add yaml file to replace inline string", "committedDate": "2020-05-15T01:41:51Z", "type": "commit"}, {"oid": "09c6332b10e446f0dbe9a064d7b458c46013148d", "url": "https://github.com/apache/shardingsphere/commit/09c6332b10e446f0dbe9a064d7b458c46013148d", "message": "read yaml into string", "committedDate": "2020-05-15T02:58:37Z", "type": "commit"}, {"oid": "01e3f54627c982e6c65b7fbd0132f2d7293c38a1", "url": "https://github.com/apache/shardingsphere/commit/01e3f54627c982e6c65b7fbd0132f2d7293c38a1", "message": "modify yaml file to dynamic rules", "committedDate": "2020-05-15T02:59:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU0NjMxOQ==", "url": "https://github.com/apache/shardingsphere/pull/5616#discussion_r425546319", "bodyText": "Why need to skip comment here? Can snake yaml process the comment?", "author": "terrymanu", "createdAt": "2020-05-15T03:29:10Z", "path": "sharding-orchestration/sharding-orchestration-core/sharding-orchestration-core-configcenter/src/test/java/org/apache/shardingsphere/orchestration/core/configcenter/listener/SchemaChangedListenerTest.java", "diffHunk": "@@ -120,16 +83,33 @@ public void assertCreateIgnoredEvent() {\n     }\n     \n     @Test\n-    public void assertCreateDataSourceChangedEventForExistedSchema() {\n-        DataChangedEvent dataChangedEvent = new DataChangedEvent(\"/test/config/schema/sharding_db/datasource\", DATA_SOURCE_YAML, ChangedType.UPDATED);\n+    public void assertCreateDataSourceChangedEventForExistedSchema() throws IOException {\n+        String dataSource = readYamlIntoString(DATA_SOURCE_YAML);\n+        DataChangedEvent dataChangedEvent = new DataChangedEvent(\"/test/config/schema/sharding_db/datasource\", dataSource, ChangedType.UPDATED);\n         ShardingOrchestrationEvent actual = schemaChangedListener.createShardingOrchestrationEvent(dataChangedEvent);\n         assertThat(actual, instanceOf(DataSourceChangedEvent.class));\n         assertThat(((DataSourceChangedEvent) actual).getShardingSchemaName(), is(\"sharding_db\"));\n     }\n+\n+    private String readYamlIntoString(final String yamlFile) throws IOException {\n+        File file = new File(Preconditions.checkNotNull(getClass().getClassLoader().getResource(yamlFile), \"file resource `%s` must not be null.\", yamlFile).getFile());\n+        StringBuilder yamlContent = new StringBuilder();\n+        FileReader fileReader = new FileReader(file);\n+        BufferedReader reader = new BufferedReader(fileReader);\n+        String line;\n+        while (null != (line = reader.readLine())) {", "originalCommit": "01e3f54627c982e6c65b7fbd0132f2d7293c38a1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1MTI1OA==", "url": "https://github.com/apache/shardingsphere/pull/5616#discussion_r425551258", "bodyText": "OK, I will try snake yaml", "author": "hitnewbee", "createdAt": "2020-05-15T03:50:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU0NjMxOQ=="}], "type": "inlineReview"}, {"oid": "48fced5754b080d41ca53ebbd8b235003e0591d3", "url": "https://github.com/apache/shardingsphere/commit/48fced5754b080d41ca53ebbd8b235003e0591d3", "message": "add a new line at the end of file", "committedDate": "2020-05-15T06:49:04Z", "type": "commit"}, {"oid": "f865027594cf7ffe37d10847c7b2d2fbfa514fa7", "url": "https://github.com/apache/shardingsphere/commit/f865027594cf7ffe37d10847c7b2d2fbfa514fa7", "message": "use snake yaml instead of File", "committedDate": "2020-05-15T06:56:24Z", "type": "commit"}, {"oid": "e162ce159a4e220312f60d07de36959817cf3a7a", "url": "https://github.com/apache/shardingsphere/commit/e162ce159a4e220312f60d07de36959817cf3a7a", "message": "Merge branch 'master' into issue-5428", "committedDate": "2020-05-15T07:01:55Z", "type": "commit"}, {"oid": "1a6736b969d0cd7edc7df8ff2697cbf9902258aa", "url": "https://github.com/apache/shardingsphere/commit/1a6736b969d0cd7edc7df8ff2697cbf9902258aa", "message": "resolve confilct", "committedDate": "2020-05-15T07:04:58Z", "type": "commit"}, {"oid": "16e5dc5d33f9c47af3a429771b600e1321c1b835", "url": "https://github.com/apache/shardingsphere/commit/16e5dc5d33f9c47af3a429771b600e1321c1b835", "message": "remove unuse throw & checkstyle fix", "committedDate": "2020-05-15T07:54:07Z", "type": "commit"}]}