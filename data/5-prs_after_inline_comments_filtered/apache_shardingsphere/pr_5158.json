{"pr_number": 5158, "pr_title": "delete predicateSegment from JoinSpecificationSegment", "pr_createdAt": "2020-04-13T03:44:22Z", "pr_url": "https://github.com/apache/shardingsphere/pull/5158", "timeline": [{"oid": "866254a13d7d0be6da84153d1f7b956cf5bad807", "url": "https://github.com/apache/shardingsphere/commit/866254a13d7d0be6da84153d1f7b956cf5bad807", "message": "delete predicateSegment from JoinSpecificationSegment", "committedDate": "2020-04-13T03:39:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyNjA1MA==", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407326050", "bodyText": "Maybe you need a set to remove duplicated ones? Or do you have anyother solution?", "author": "tristaZero", "createdAt": "2020-04-13T05:33:50Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,19 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tmp = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n+        for (SimpleTableSegment each: result) {", "originalCommit": "866254a13d7d0be6da84153d1f7b956cf5bad807", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyOTAyMw==", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407329023", "bodyText": "Not to remove duplicate elements, but to remove elements that just is alias. @tristaZero", "author": "jingshanglu", "createdAt": "2020-04-13T05:47:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyNjA1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQxNzA0Mw==", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407417043", "bodyText": "Got, if you want to keep those codes, please\nRename tmp\nAdd blank space and rename each1 in for (SimpleTableSegment each1:result) \nOr Copy the deleted codes here since they have the same logic.\nprivate Collection<SimpleTableSegment> getTableSegments(final Collection<SimpleTableSegment> tableSegments, final JoinedTableContext joinedTable) {\n          Collection<SimpleTableSegment> result = new LinkedList<>();\n          for (SimpleTableSegment tableSegment : ((CollectionValue<SimpleTableSegment>) visit(joinedTable)).getValue()) {\n              if (isTable(tableSegment, tableSegments)) {\n                  result.add(tableSegment);\n              }\n          }\n          return result;\n      }\n \n      private boolean isTable(final SimpleTableSegment owner, final Collection<SimpleTableSegment> tableSegments) {\n          for (SimpleTableSegment each : tableSegments) {\n              if (owner.getTableName().getIdentifier().getValue().equals(each.getAlias().orElse(null))) {\n                  return false;\n             }\n         }\n         return true;\n     }", "author": "tristaZero", "createdAt": "2020-04-13T10:24:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyNjA1MA=="}], "type": "inlineReview"}, {"oid": "1b50e0fa9625a6282681ccebca812b418bd6b2e8", "url": "https://github.com/apache/shardingsphere/commit/1b50e0fa9625a6282681ccebca812b418bd6b2e8", "message": "fix", "committedDate": "2020-04-13T11:05:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ0NDI1NQ==", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407444255", "bodyText": "TableReferenceSegment each : tableReferences", "author": "tristaZero", "createdAt": "2020-04-13T11:55:15Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,25 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tables = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {", "originalCommit": "1b50e0fa9625a6282681ccebca812b418bd6b2e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ0NDMzNQ==", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407444335", "bodyText": "TableReferenceSegment each : tableReferences", "author": "tristaZero", "createdAt": "2020-04-13T11:55:31Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,25 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tables = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n-        return result;\n+        for (SimpleTableSegment each: result) {", "originalCommit": "1b50e0fa9625a6282681ccebca812b418bd6b2e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ1ODI5MA==", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407458290", "bodyText": "ok. @tristaZero", "author": "jingshanglu", "createdAt": "2020-04-13T12:38:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ0NDMzNQ=="}], "type": "inlineReview"}, {"oid": "26fe902a635c668f8e32850be41603b55151cc13", "url": "https://github.com/apache/shardingsphere/commit/26fe902a635c668f8e32850be41603b55151cc13", "message": "fix", "committedDate": "2020-04-13T12:13:24Z", "type": "commit"}]}