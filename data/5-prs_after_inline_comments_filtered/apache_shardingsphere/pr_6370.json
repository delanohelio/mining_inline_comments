{"pr_number": 6370, "pr_title": "fix sql test ", "pr_createdAt": "2020-07-17T04:04:31Z", "pr_url": "https://github.com/apache/shardingsphere/pull/6370", "timeline": [{"oid": "eca96034340056678b718b2c683d0460c2b6f764", "url": "https://github.com/apache/shardingsphere/commit/eca96034340056678b718b2c683d0460c2b6f764", "message": "fix sql test for select_with_expression and select_pagination_with_offset_fetch", "committedDate": "2020-07-17T04:01:25Z", "type": "commit"}, {"oid": "d10d8641a713e8a8a79ee035e256c355f95187fb", "url": "https://github.com/apache/shardingsphere/commit/d10d8641a713e8a8a79ee035e256c355f95187fb", "message": "fix", "committedDate": "2020-07-17T06:09:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3NTk0OQ==", "url": "https://github.com/apache/shardingsphere/pull/6370#discussion_r456775949", "bodyText": "Do you think it is better to overwrite getStopIndex() of ExpressionProjectionSegment  with the stopIndex of itsaliasSegment,", "author": "tristaZero", "createdAt": "2020-07-18T10:31:24Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/mysql/visitor/impl/MySQLDMLVisitor.java", "diffHunk": "@@ -470,7 +470,8 @@ private ASTNode createProjection(final ProjectionContext ctx, final AliasSegment\n         }\n         if (projection instanceof CommonExpressionSegment) {\n             CommonExpressionSegment segment = (CommonExpressionSegment) projection;\n-            ExpressionProjectionSegment result = new ExpressionProjectionSegment(segment.getStartIndex(), segment.getStopIndex(), segment.getText());\n+            ExpressionProjectionSegment result = null == alias ? new ExpressionProjectionSegment(segment.getStartIndex(), segment.getStopIndex(), segment.getText())\n+                    : new ExpressionProjectionSegment(segment.getStartIndex(), alias.getStopIndex(), segment.getText());", "originalCommit": "d10d8641a713e8a8a79ee035e256c355f95187fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bd533d6fc9ce484568a64cd0e843788eb8344f3f", "url": "https://github.com/apache/shardingsphere/commit/bd533d6fc9ce484568a64cd0e843788eb8344f3f", "message": "fix", "committedDate": "2020-07-22T02:24:42Z", "type": "commit"}, {"oid": "fb34099c4700bc477a76f53a5df0684f5d812514", "url": "https://github.com/apache/shardingsphere/commit/fb34099c4700bc477a76f53a5df0684f5d812514", "message": "merge from upstream/master", "committedDate": "2020-07-22T07:53:18Z", "type": "commit"}, {"oid": "1ef2799710b8dbb67075e2e49c8878c937803b0f", "url": "https://github.com/apache/shardingsphere/commit/1ef2799710b8dbb67075e2e49c8878c937803b0f", "message": "fix", "committedDate": "2020-07-22T08:17:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY1NDYyMw==", "url": "https://github.com/apache/shardingsphere/pull/6370#discussion_r458654623", "bodyText": "Do you think these codes can be removed?", "author": "tristaZero", "createdAt": "2020-07-22T09:18:29Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/postgresql/visitor/PostgreSQLVisitor.java", "diffHunk": "@@ -262,14 +262,15 @@ private PredicateSegment createInSegment(final AExprContext ctx) {\n     \n     private Collection<ExpressionSegment> getExpressionSegments(final AExprContext ctx) {\n         Collection<ExpressionSegment> result = new LinkedList<>();\n-//        if (null != ctx.cExpr() && null != ctx.cExpr().select_with_parens()) {\n-//            Select_with_parensContext subquery = ctx.cExpr().select_with_parens();\n+//        TODO deal with sqlExpressions in PredicateInRightValue\n+//        if (null != ctx.cExpr() && null != ctx.cExpr().selectWithParens()) {\n+//            PostgreSQLStatementParser.SelectWithParensContext subquery = ctx.cExpr().selectWithParens();\n //            result.add(new SubqueryExpressionSegment(new SubquerySegment(subquery.getStart().getStartIndex(), subquery.getStop().getStopIndex(),\n-//                    (SelectStatement) visit(ctx.cExpr().select_with_parens()))));", "originalCommit": "1ef2799710b8dbb67075e2e49c8878c937803b0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c98529fbc7cabcbfc0227b61fcf938101d9a5c90", "url": "https://github.com/apache/shardingsphere/commit/c98529fbc7cabcbfc0227b61fcf938101d9a5c90", "message": "simplify code", "committedDate": "2020-07-22T10:19:33Z", "type": "commit"}]}