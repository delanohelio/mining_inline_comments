{"pr_number": 2572, "pr_title": "Display sources loaded from String and find their MIME type.", "pr_createdAt": "2020-11-30T16:43:29Z", "pr_url": "https://github.com/apache/netbeans/pull/2572", "timeline": [{"oid": "5870c7e78f2b679400c062d7b824c63eb28a9e76", "url": "https://github.com/apache/netbeans/commit/5870c7e78f2b679400c062d7b824c63eb28a9e76", "message": "Display sources loaded from String and find their MIME type.", "committedDate": "2020-11-30T18:20:25Z", "type": "commit"}, {"oid": "5a7fcfacaea1262b7d03dc034d80633d31d61105", "url": "https://github.com/apache/netbeans/commit/5a7fcfacaea1262b7d03dc034d80633d31d61105", "message": "Use the default MIME type, when not set on the Source.", "committedDate": "2020-11-30T18:20:27Z", "type": "commit"}, {"oid": "5a7fcfacaea1262b7d03dc034d80633d31d61105", "url": "https://github.com/apache/netbeans/commit/5a7fcfacaea1262b7d03dc034d80633d31d61105", "message": "Use the default MIME type, when not set on the Source.", "committedDate": "2020-11-30T18:20:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU3NTMxMg==", "url": "https://github.com/apache/netbeans/pull/2572#discussion_r533575312", "bodyText": "A test for this path would be nice. Maybe extend ServerTest?", "author": "JaroslavTulach", "createdAt": "2020-12-01T17:04:13Z", "path": "java/java.lsp.server/src/org/netbeans/modules/java/lsp/server/debugging/NbProtocolServer.java", "diffHunk": "@@ -286,11 +290,33 @@ public NbProtocolServer(DebugAdapterContext context) {\n                     stackFrame.setId(frameId);\n                     stackFrame.setName(frame.getName());\n                     URI sourceURI = frame.getSourceURI();\n-                    if (sourceURI != null && sourceURI.getPath() != null) {\n+                    if (sourceURI != null) {\n                         Source source = new Source();\n-                        source.setName(Paths.get(sourceURI).getFileName().toString());\n-                        source.setPath(sourceURI.getPath());\n-                        source.setSourceReference(0);\n+                        String scheme = sourceURI.getScheme();\n+                        if (null == scheme || scheme.isEmpty() || \"file\".equalsIgnoreCase(scheme)) {\n+                            source.setName(Paths.get(sourceURI).getFileName().toString());\n+                            source.setPath(sourceURI.getPath());\n+                            source.setSourceReference(0);\n+                        } else {", "originalCommit": "5a7fcfacaea1262b7d03dc034d80633d31d61105", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDAzMzMyNg==", "url": "https://github.com/apache/netbeans/pull/2572#discussion_r534033326", "bodyText": "Right. I've created https://issues.apache.org/jira/browse/NETBEANS-5084", "author": "entlicher", "createdAt": "2020-12-02T09:52:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU3NTMxMg=="}], "type": "inlineReview"}]}