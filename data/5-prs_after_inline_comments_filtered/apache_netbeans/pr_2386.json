{"pr_number": 2386, "pr_title": "Cleanup of not just dependencies", "pr_createdAt": "2020-09-21T11:36:52Z", "pr_url": "https://github.com/apache/netbeans/pull/2386", "timeline": [{"oid": "c5216b7d30053057a6605353c76495b562209819", "url": "https://github.com/apache/netbeans/commit/c5216b7d30053057a6605353c76495b562209819", "message": "Removing useless import", "committedDate": "2020-09-21T11:19:10Z", "type": "commit"}, {"oid": "aedfcce28cedcf1eb07865af4b7966ca9ee6ee5d", "url": "https://github.com/apache/netbeans/commit/aedfcce28cedcf1eb07865af4b7966ca9ee6ee5d", "message": "Branding API to disable loading of previously opened projects on start", "committedDate": "2020-09-21T11:23:36Z", "type": "commit"}, {"oid": "78fbf67a2791cf66df872a94521aeff9e326a183", "url": "https://github.com/apache/netbeans/commit/78fbf67a2791cf66df872a94521aeff9e326a183", "message": "Search for FileObject if no DataObject found", "committedDate": "2020-09-21T11:24:27Z", "type": "commit"}, {"oid": "b43cff3c371ce2d3fee8857435b7e12ed907a290", "url": "https://github.com/apache/netbeans/commit/b43cff3c371ce2d3fee8857435b7e12ed907a290", "message": "Recognize, but ignore, new catalog element", "committedDate": "2020-09-21T11:27:39Z", "type": "commit"}, {"oid": "4f6979274c8b4474eda7d100fde1ca7adacf6d6c", "url": "https://github.com/apache/netbeans/commit/4f6979274c8b4474eda7d100fde1ca7adacf6d6c", "message": "Read fully and stop on broken SIGPIPE", "committedDate": "2020-09-21T11:29:05Z", "type": "commit"}, {"oid": "4b50155ac1e72da9263e5328b7a4cc0f161f884d", "url": "https://github.com/apache/netbeans/commit/4b50155ac1e72da9263e5328b7a4cc0f161f884d", "message": "Print warnings just once per VM run: Not listening on module system", "committedDate": "2020-09-21T11:30:45Z", "type": "commit"}, {"oid": "4198e62ca213e0b09f71a9bd6c8478839c96d73f", "url": "https://github.com/apache/netbeans/commit/4198e62ca213e0b09f71a9bd6c8478839c96d73f", "message": "Run without core.windows module being present", "committedDate": "2020-09-21T11:31:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk3NTM2Nw==", "url": "https://github.com/apache/netbeans/pull/2386#discussion_r491975367", "bodyText": "The AutoUpdate task was very verbose with modern catalogs. Assuming this field got in with one of @matthiasblaesing  fixes, I've added it to the set of recognized, but not processed fields.", "author": "JaroslavTulach", "createdAt": "2020-09-21T11:42:10Z", "path": "nbbuild/antsrc/org/netbeans/nbbuild/AutoUpdateCatalogParser.java", "diffHunk": "@@ -240,6 +241,8 @@ public void endElement (String uri, String localName, String qName) throws SAXEx\n                 break;\n             case manifest :\n                 break;\n+            case message_digest:", "originalCommit": "b43cff3c371ce2d3fee8857435b7e12ed907a290", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk3NTkwMA==", "url": "https://github.com/apache/netbeans/pull/2386#discussion_r491975900", "bodyText": "This message was printed out  everytime new instance of OverObjects was created in a unit test. Quite annoying. Enough to emit the warning once per test.", "author": "JaroslavTulach", "createdAt": "2020-09-21T11:43:20Z", "path": "platform/settings/src/org/netbeans/modules/settings/RecognizeInstanceObjects.java", "diffHunk": "@@ -93,24 +94,49 @@ protected Lookup lookupFor(Object obj) {\n         return null;\n     }\n     \n-    private static final class OverObjects extends ProxyLookup \n-    implements PropertyChangeListener, FileChangeListener {\n-        private final String path;\n-        \n-        public OverObjects(String path) {\n-            super(delegates(null, path));\n-            this.path = path;\n+    private static final class MSL implements PropertyChangeListener {\n+        private final PropertyChangeSupport pcs = new PropertyChangeSupport(this);\n+        public static final MSL DEFAULT = new MSL();\n+        static {\n             try {\n                 ModuleSystem ms = Main.getModuleSystem(false);\n                 if (ms != null) {\n                     ModuleManager man = ms.getManager();\n-                    man.addPropertyChangeListener(WeakListeners.propertyChange(this, man));\n+                    man.addPropertyChangeListener(WeakListeners.propertyChange(DEFAULT, man));\n                 } else {\n                     LOG.log(Level.WARNING, \"Not listening on module system\");", "originalCommit": "4b50155ac1e72da9263e5328b7a4cc0f161f884d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk3NjQyNw==", "url": "https://github.com/apache/netbeans/pull/2386#discussion_r491976427", "bodyText": "Ant projects honor FileObject as a selection in the Lookup, but Maven projects didn't. After this change they will use FileObject (if no DataObject is found) as the indentification of main file to execute.", "author": "JaroslavTulach", "createdAt": "2020-09-21T11:44:29Z", "path": "java/maven/src/org/netbeans/modules/maven/spi/actions/AbstractMavenActionsProvider.java", "diffHunk": "@@ -88,6 +88,10 @@ public AbstractMavenActionsProvider() {\n             files.add(method.getFile());\n         }\n \n+        if (files.isEmpty()) {", "originalCommit": "78fbf67a2791cf66df872a94521aeff9e326a183", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU2NjE3Mg==", "url": "https://github.com/apache/netbeans/pull/2386#discussion_r492566172", "bodyText": "Also fixed in Gradle.", "author": "JaroslavTulach", "createdAt": "2020-09-22T08:39:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk3NjQyNw=="}], "type": "inlineReview"}, {"oid": "034a600c13290bc63581c87450b4a51050a98536", "url": "https://github.com/apache/netbeans/commit/034a600c13290bc63581c87450b4a51050a98536", "message": "Search for FileObject if no DataObject found", "committedDate": "2020-09-22T08:37:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU2NTgwMw==", "url": "https://github.com/apache/netbeans/pull/2386#discussion_r492565803", "bodyText": "This is the same fix as in Maven", "author": "JaroslavTulach", "createdAt": "2020-09-22T08:39:00Z", "path": "extide/gradle/src/org/netbeans/modules/gradle/api/execute/RunUtils.java", "diffHunk": "@@ -100,6 +100,9 @@ public static FileObject extractFileObjectfromLookup(Lookup lookup) {\n             SingleMethod method = methods.iterator().next();\n             files.add(method.getFile());\n         }\n+        if (files.isEmpty()) {\n+            files.addAll(lookup.lookupAll(FileObject.class));\n+        }", "originalCommit": "034a600c13290bc63581c87450b4a51050a98536", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cbecea396a77fb70c722bf3bc6fe0e7c2750a770", "url": "https://github.com/apache/netbeans/commit/cbecea396a77fb70c722bf3bc6fe0e7c2750a770", "message": "Avoiding UI operations in headless mode", "committedDate": "2020-09-22T09:05:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg5NDc0Mg==", "url": "https://github.com/apache/netbeans/pull/2386#discussion_r492894742", "bodyText": "It's an interesting usage of resource bundle. :-)\nBut I think it's rather a hack to use module resource bundle for configuration.\nDo we already use such a pattern somewhere?\nIf not I would prefer a method.", "author": "tzezula", "createdAt": "2020-09-22T17:01:13Z", "path": "ide/projectui/src/org/netbeans/modules/project/ui/OpenProjectList.java", "diffHunk": "@@ -441,12 +441,18 @@ boolean closeBeforeOpen(final Project[] arr) {\n                 }\n             });\n         }\n-            \n+\n+        @NbBundle.Messages({\n+            \"LOAD_PROJECTS_ON_START=true\"\n+        })\n         private void loadOnBackground() {\n-            lazilyOpenedProjects = new ArrayList<Project>();\n-            List<URL> URLs = OpenProjectListSettings.getInstance().getOpenProjectsURLs();\n-            final List<Project> initial = new ArrayList<Project>();\n-            final LinkedList<Project> projects = URLs2Projects(URLs);\n+            lazilyOpenedProjects = new ArrayList<>();\n+            final boolean loadProjectsOnStart = \"true\".equals(Bundle.LOAD_PROJECTS_ON_START());", "originalCommit": "cbecea396a77fb70c722bf3bc6fe0e7c2750a770", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE1OTk1Mg==", "url": "https://github.com/apache/netbeans/pull/2386#discussion_r493159952", "bodyText": "Yes, it is used at many places, controlling behavior of splash screen, controlling behavior of window system. We even have <api group='branding'..../> for that case - here is the current list of branding APIs.\nUsing branding API is useful if the change in behavior is made per NetBeans application - e.g. different behavior for NetBeans IDE, different for JDeveloper, different for VSCode, etc.", "author": "JaroslavTulach", "createdAt": "2020-09-23T02:27:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg5NDc0Mg=="}], "type": "inlineReview"}, {"oid": "2847f6eb849f445bc7d25b08b74fa7fdb3da67a4", "url": "https://github.com/apache/netbeans/commit/2847f6eb849f445bc7d25b08b74fa7fdb3da67a4", "message": "Removing unrelated change in friend module list", "committedDate": "2020-09-23T02:41:24Z", "type": "commit"}]}