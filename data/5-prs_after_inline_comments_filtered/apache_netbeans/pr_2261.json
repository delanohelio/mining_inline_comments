{"pr_number": 2261, "pr_title": "Improve GraalVM script engines interoperability.", "pr_createdAt": "2020-07-17T10:54:58Z", "pr_url": "https://github.com/apache/netbeans/pull/2261", "timeline": [{"oid": "6c752c942e4287e362a2bed965816f1126c7240b", "url": "https://github.com/apache/netbeans/commit/6c752c942e4287e362a2bed965816f1126c7240b", "message": "Exception handling and ScriptContext compatibility improvements.", "committedDate": "2020-07-16T16:24:57Z", "type": "commit"}, {"oid": "4c2fae3cf84c6611c813cff329c5b152a423af4e", "url": "https://github.com/apache/netbeans/commit/4c2fae3cf84c6611c813cff329c5b152a423af4e", "message": "Fixed tests not to fail on GraalVM JDK 20.1", "committedDate": "2020-07-17T10:50:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM4NjkyMQ==", "url": "https://github.com/apache/netbeans/pull/2261#discussion_r456386921", "bodyText": "OK.", "author": "JaroslavTulach", "createdAt": "2020-07-17T11:35:10Z", "path": "ide/libs.graalsdk/src/org/netbeans/libs/graalsdk/impl/GraalEngine.java", "diffHunk": "@@ -55,20 +57,32 @@ public Object eval(String src, ScriptContext arg1) throws ScriptException {\n         Value result = evalImpl(arg1, src);\n         return unbox(result);\n     }\n-\n-    private Value evalImpl(ScriptContext arg1, String src) throws ScriptException {\n-\n+    \n+    private static interface ScriptAction {\n+        public Value run();\n+    }\n+    \n+    private Value handleException(ScriptAction r) throws ScriptException {\n         try {\n-            return ((GraalContext) arg1).ctx().eval(id(), src);\n+            return r.run();\n         } catch (PolyglotException e) {\n+            if (e.isHostException()) {\n+                e.initCause(e.asHostException());", "originalCommit": "4c2fae3cf84c6611c813cff329c5b152a423af4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cc4341472b9d7f70c64c188f514231647a6f76c1", "url": "https://github.com/apache/netbeans/commit/cc4341472b9d7f70c64c188f514231647a6f76c1", "message": "Updated NbModuleSuite to load hamcrest.", "committedDate": "2020-07-17T19:46:49Z", "type": "commit"}, {"oid": "e4b125162f7f6649516c823a88847a528cd3d8fa", "url": "https://github.com/apache/netbeans/commit/e4b125162f7f6649516c823a88847a528cd3d8fa", "message": "Published hamcrest packages.", "committedDate": "2020-07-17T19:47:24Z", "type": "commit"}]}