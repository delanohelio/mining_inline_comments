{"pr_number": 2265, "pr_title": "[NETBEANS-4443] PHP 8.0 Support: Non-capturing catches part ", "pr_createdAt": "2020-07-19T11:34:07Z", "pr_url": "https://github.com/apache/netbeans/pull/2265", "timeline": [{"oid": "57c451082922c60efa2885a9e222eac11ff18386", "url": "https://github.com/apache/netbeans/commit/57c451082922c60efa2885a9e222eac11ff18386", "message": "[NETBEANS-4443] PHP 8.0 Support: Non-capturing catches part\n\n- https://wiki.php.net/rfc/non-capturing_catches\n- Fix the ASTPHP5Parser.cup\n- Add the `PHP80UnhandledError` class\n- Add unit tests for the parser, GotoDeclaration, MarkOccurrences, Formatter, and Code Completion features", "committedDate": "2020-07-19T11:46:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5OTg4NQ==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r456899885", "bodyText": "This is the scheduled date: https://wiki.php.net/todo/php80", "author": "junichi11", "createdAt": "2020-07-19T11:58:57Z", "path": "php/php.api.phpmodule/src/org/netbeans/modules/php/api/PhpVersion.java", "diffHunk": "@@ -218,6 +224,7 @@ public String toString() {\n         PHP_72(LocalDate.of(2017, 11, 30), LocalDate.of(2019, 11, 30), LocalDate.of(2020, 11, 30)),\n         PHP_73(LocalDate.of(2018, 12, 6), LocalDate.of(2020, 12, 6), LocalDate.of(2021, 12, 6)),\n         PHP_74(LocalDate.of(2019, 11, 28), LocalDate.of(2021, 11, 28), LocalDate.of(2022, 11, 28)),\n+        PHP_80(LocalDate.of(2020, 11, 26), LocalDate.of(2022, 11, 26), LocalDate.of(2023, 11, 26)),", "originalCommit": "57c451082922c60efa2885a9e222eac11ff18386", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7a04b467812c7832cb93f3cf828a9768782dcc79", "url": "https://github.com/apache/netbeans/commit/7a04b467812c7832cb93f3cf828a9768782dcc79", "message": "[NETBEANS-4443] PHP 8.0 Support: Non-capturing catches part\n\n- https://wiki.php.net/rfc/non-capturing_catches\n- Fix the ASTPHP5Parser.cup\n- Add the `PHP80UnhandledError` class\n- Add unit tests for the parser, GotoDeclaration, MarkOccurrences, Formatter, and Code Completion features", "committedDate": "2020-07-19T12:23:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwMjYxMA==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r456902610", "bodyText": "I didn't increment the spec version because I would like to avoid conflicting. Probably, the version is 2.74(2.72 + 2) when the merge window is opened. So, I fixed only @since.\ncurrent spec version:\n\n  \n    \n      netbeans/php/php.api.phpmodule/manifest.mf\n    \n    \n         Line 4\n      in\n      eb15c28\n    \n    \n    \n    \n\n        \n          \n           OpenIDE-Module-Specification-Version: 2.72", "author": "junichi11", "createdAt": "2020-07-19T12:26:08Z", "path": "php/php.api.phpmodule/src/org/netbeans/modules/php/api/PhpVersion.java", "diffHunk": "@@ -84,7 +85,12 @@\n      * PHP 7.4.\n      * @since 2.65\n      */\n-    PHP_74(Bundle.PhpVersion_PHP_74());\n+    PHP_74(Bundle.PhpVersion_PHP_74()),\n+    /**\n+     * PHP 8.0.\n+     * @since 2.74\n+     */\n+    PHP_80(Bundle.PhpVersion_PHP_80());", "originalCommit": "7a04b467812c7832cb93f3cf828a9768782dcc79", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcwMzY1Mw==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r457703653", "bodyText": "Fixed @since to 2.73.", "author": "junichi11", "createdAt": "2020-07-20T21:31:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwMjYxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwNjc5Nw==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458706797", "bodyText": "I see. Maybe some TODO file could be added with remaining tasks before merging into master (like increasing spec versions). Up to you to decide, of course.", "author": "tmysik", "createdAt": "2020-07-22T10:53:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwMjYxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcxODQ5MQ==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458718491", "bodyText": "In that case, shouldn't we add @since at the moment? or fix again when we increase the spec version?", "author": "junichi11", "createdAt": "2020-07-22T11:17:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwMjYxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODczMDQ1NQ==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458730455", "bodyText": "I'll keep this as it is. Let's fix it before merging into the master if there is a problem.", "author": "junichi11", "createdAt": "2020-07-22T11:42:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkwMjYxMA=="}], "type": "inlineReview"}, {"oid": "63a46a1b8bc87584f63a0d719b73013e8a583887", "url": "https://github.com/apache/netbeans/commit/63a46a1b8bc87584f63a0d719b73013e8a583887", "message": "[NETBEANS-4443] PHP 8.0 Support: Non-capturing catches part\n\n- https://wiki.php.net/rfc/non-capturing_catches\n- Fix the ASTPHP5Parser.cup\n- Add the `PHP80UnhandledError` class\n- Add unit tests for the parser, GotoDeclaration, MarkOccurrences, Formatter, and Code Completion features", "committedDate": "2020-07-20T21:29:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwNzM5Mg==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458707392", "bodyText": "Cannot the trailing comma be added? That would make the diffs much cleaner (next time).", "author": "tmysik", "createdAt": "2020-07-22T10:54:59Z", "path": "php/php.api.phpmodule/src/org/netbeans/modules/php/api/PhpVersion.java", "diffHunk": "@@ -35,7 +35,8 @@\n     \"PhpVersion.PHP_71=PHP 7.1\",\n     \"PhpVersion.PHP_72=PHP 7.2\",\n     \"PhpVersion.PHP_73=PHP 7.3\",\n-    \"PhpVersion.PHP_74=PHP 7.4\"\n+    \"PhpVersion.PHP_74=PHP 7.4\",\n+    \"PhpVersion.PHP_80=PHP 8.0\"", "originalCommit": "63a46a1b8bc87584f63a0d719b73013e8a583887", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcxODY4Ng==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458718686", "bodyText": "I'll fix. Thanks!", "author": "junichi11", "createdAt": "2020-07-22T11:18:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwNzM5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODczMzU0Nw==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458733547", "bodyText": "Fixed: https://github.com/apache/netbeans/compare/63a46a1b8bc87584f63a0d719b73013e8a583887..31c86e7ab8e9dc3a904b71df620023a7f86ac790", "author": "junichi11", "createdAt": "2020-07-22T11:48:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwNzM5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwODAxMA==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458708010", "bodyText": "Not needed, null is not instanceof, ever.", "author": "tmysik", "createdAt": "2020-07-22T10:56:12Z", "path": "php/php.editor/src/org/netbeans/modules/php/editor/model/impl/ModelVisitor.java", "diffHunk": "@@ -1117,7 +1117,7 @@ public void visit(CatchClause node) {\n         Variable variable = node.getVariable();\n         Scope scope = modelBuilder.getCurrentScope();\n         List<Expression> classNames = node.getClassNames();\n-        if (scope instanceof VariableNameFactory) {\n+        if (variable != null && scope instanceof VariableNameFactory) {", "originalCommit": "63a46a1b8bc87584f63a0d719b73013e8a583887", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcyMDQ2OQ==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458720469", "bodyText": "Probably, in this case, needed because variables(variable and scope) are different?", "author": "junichi11", "createdAt": "2020-07-22T11:22:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwODAxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcyNDcxNQ==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458724715", "bodyText": "Sorry, those are 2 different variables... :)", "author": "tmysik", "createdAt": "2020-07-22T11:31:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwODAxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcyOTM2MA==", "url": "https://github.com/apache/netbeans/pull/2265#discussion_r458729360", "bodyText": "No problem :)", "author": "junichi11", "createdAt": "2020-07-22T11:40:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwODAxMA=="}], "type": "inlineReview"}, {"oid": "646a308549dc056d9c1788b3ae9b506a8d962cee", "url": "https://github.com/apache/netbeans/commit/646a308549dc056d9c1788b3ae9b506a8d962cee", "message": "Add PHP 8.0 to the `PhpVersion`", "committedDate": "2020-07-22T11:45:48Z", "type": "commit"}, {"oid": "31c86e7ab8e9dc3a904b71df620023a7f86ac790", "url": "https://github.com/apache/netbeans/commit/31c86e7ab8e9dc3a904b71df620023a7f86ac790", "message": "[NETBEANS-4443] PHP 8.0 Support: Non-capturing catches part\n\n- https://wiki.php.net/rfc/non-capturing_catches\n- Fix the ASTPHP5Parser.cup\n- Add the `PHP80UnhandledError` class\n- Add unit tests for the parser, GotoDeclaration, MarkOccurrences, Formatter, and Code Completion features", "committedDate": "2020-07-22T11:46:02Z", "type": "commit"}, {"oid": "31c86e7ab8e9dc3a904b71df620023a7f86ac790", "url": "https://github.com/apache/netbeans/commit/31c86e7ab8e9dc3a904b71df620023a7f86ac790", "message": "[NETBEANS-4443] PHP 8.0 Support: Non-capturing catches part\n\n- https://wiki.php.net/rfc/non-capturing_catches\n- Fix the ASTPHP5Parser.cup\n- Add the `PHP80UnhandledError` class\n- Add unit tests for the parser, GotoDeclaration, MarkOccurrences, Formatter, and Code Completion features", "committedDate": "2020-07-22T11:46:02Z", "type": "forcePushed"}]}