{"pr_number": 4685, "pr_title": "feat: basic auth for new API server", "pr_createdAt": "2020-03-03T06:45:31Z", "pr_url": "https://github.com/confluentinc/ksql/pull/4685", "timeline": [{"oid": "e92901924aa5502eb9bee21cd45bb7cd35bc60a2", "url": "https://github.com/confluentinc/ksql/commit/e92901924aa5502eb9bee21cd45bb7cd35bc60a2", "message": "feat: basic auth shell", "committedDate": "2020-02-27T22:22:19Z", "type": "commit"}, {"oid": "2eed42ea6f159f5154d81c80d3535247a7b7b91e", "url": "https://github.com/confluentinc/ksql/commit/2eed42ea6f159f5154d81c80d3535247a7b7b91e", "message": "chore: switch to dummy auth provider", "committedDate": "2020-02-27T22:23:01Z", "type": "commit"}, {"oid": "f4cea51f37d3f01a368161ef00d4166918f04879", "url": "https://github.com/confluentinc/ksql/commit/f4cea51f37d3f01a368161ef00d4166918f04879", "message": "chore: fix property names, and other fixes", "committedDate": "2020-02-27T22:23:03Z", "type": "commit"}, {"oid": "654922be491bfc61b210abe7495090bea60d06e0", "url": "https://github.com/confluentinc/ksql/commit/654922be491bfc61b210abe7495090bea60d06e0", "message": "feat: jaas auth provider", "committedDate": "2020-02-28T01:02:41Z", "type": "commit"}, {"oid": "ed9ec95381789dff577e5b3da2d659f2b00f4855", "url": "https://github.com/confluentinc/ksql/commit/ed9ec95381789dff577e5b3da2d659f2b00f4855", "message": "fix: attempt to make login async", "committedDate": "2020-02-28T01:03:25Z", "type": "commit"}, {"oid": "a5922e243895d81a7dec992e4dd22bc74b6a8f98", "url": "https://github.com/confluentinc/ksql/commit/a5922e243895d81a7dec992e4dd22bc74b6a8f98", "message": "Revert \"fix: attempt to make login async\"\n\nThis reverts commit ed9ec95381789dff577e5b3da2d659f2b00f4855.", "committedDate": "2020-02-28T03:08:17Z", "type": "commit"}, {"oid": "b50d1f6ba76973f15b087b1c99b4a9cb5edfee0f", "url": "https://github.com/confluentinc/ksql/commit/b50d1f6ba76973f15b087b1c99b4a9cb5edfee0f", "message": "feat: add roles support", "committedDate": "2020-02-28T21:46:21Z", "type": "commit"}, {"oid": "b483f5758a852ee0b15e4e69e409544afe62298d", "url": "https://github.com/confluentinc/ksql/commit/b483f5758a852ee0b15e4e69e409544afe62298d", "message": "test: unit tests", "committedDate": "2020-03-02T19:00:04Z", "type": "commit"}, {"oid": "fad31be8e9c3e900a69384de3b6a741dc0191924", "url": "https://github.com/confluentinc/ksql/commit/fad31be8e9c3e900a69384de3b6a741dc0191924", "message": "test: functional tests", "committedDate": "2020-03-03T06:16:54Z", "type": "commit"}, {"oid": "8e9ecd30643add505dd9b821b290b715c37f0f7d", "url": "https://github.com/confluentinc/ksql/commit/8e9ecd30643add505dd9b821b290b715c37f0f7d", "message": "chore: backout manual test files", "committedDate": "2020-03-03T06:38:35Z", "type": "commit"}, {"oid": "d2ff914b1eb04bb5d43eeefd55f59ae48e96646d", "url": "https://github.com/confluentinc/ksql/commit/d2ff914b1eb04bb5d43eeefd55f59ae48e96646d", "message": "chore: checkstyle", "committedDate": "2020-03-03T18:47:08Z", "type": "commit"}, {"oid": "77b6f44280f38a449c26dcaa91a28d72565d4ed5", "url": "https://github.com/confluentinc/ksql/commit/77b6f44280f38a449c26dcaa91a28d72565d4ed5", "message": "fix: make log in async (again)", "committedDate": "2020-03-04T18:58:49Z", "type": "commit"}, {"oid": "371842aea7c5f6732d25ba6a40aa33e9c2a0a5fb", "url": "https://github.com/confluentinc/ksql/commit/371842aea7c5f6732d25ba6a40aa33e9c2a0a5fb", "message": "fix: default to no access if auth roles unspecified", "committedDate": "2020-03-04T19:00:12Z", "type": "commit"}, {"oid": "394041a4591341eb13204137541e3eb4e628e596", "url": "https://github.com/confluentinc/ksql/commit/394041a4591341eb13204137541e3eb4e628e596", "message": "docs: update docs for auth roles config", "committedDate": "2020-03-04T21:16:32Z", "type": "commit"}, {"oid": "cfaa196022717271a03aaa9d9f5a225a7644cbbc", "url": "https://github.com/confluentinc/ksql/commit/cfaa196022717271a03aaa9d9f5a225a7644cbbc", "message": "docs: update docs for auth roles config (again)", "committedDate": "2020-03-04T21:17:45Z", "type": "commit"}, {"oid": "449db1bb11033f1fe8b9d5f5be2741a1de595fdc", "url": "https://github.com/confluentinc/ksql/commit/449db1bb11033f1fe8b9d5f5be2741a1de595fdc", "message": "chore: minor fixes", "committedDate": "2020-03-04T21:20:38Z", "type": "commit"}, {"oid": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "url": "https://github.com/confluentinc/ksql/commit/b9a8bae9df46689f8d01f7bd769880cdbf476c53", "message": "Merge branch 'master' into api-basic-auth", "committedDate": "2020-03-04T21:24:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk4ODcwNQ==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r387988705", "bodyText": "AFAIC, Current JAAS login modules only send NameCallback, ObjectCallback, and PasswordCallback, so this section isn't strictly needed, but having it also doesn't hurt. Happy to remove if we'd like to keep the code cleaner.", "author": "vcrfxia", "createdAt": "2020-03-04T23:08:23Z", "path": "ksql-rest-app/src/main/java/io/confluent/ksql/api/auth/BasicCallbackHandler.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.api.auth;\n+\n+import java.io.IOException;\n+import java.util.Objects;\n+import javax.security.auth.callback.Callback;\n+import javax.security.auth.callback.CallbackHandler;\n+import javax.security.auth.callback.NameCallback;\n+import javax.security.auth.callback.PasswordCallback;\n+import javax.security.auth.callback.TextOutputCallback;\n+import javax.security.auth.callback.UnsupportedCallbackException;\n+import org.eclipse.jetty.jaas.callback.ObjectCallback;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+class BasicCallbackHandler implements CallbackHandler {\n+\n+  private static final Logger log = LoggerFactory.getLogger(BasicCallbackHandler.class);\n+\n+  private final String username;\n+  private final String password;\n+\n+  BasicCallbackHandler(final String username, final String password) {\n+    this.username = Objects.requireNonNull(username, \"username\");\n+    this.password = Objects.requireNonNull(password, \"password\");\n+  }\n+\n+  @Override\n+  public void handle(final Callback[] callbacks)\n+      throws IOException, UnsupportedCallbackException {\n+    for (final Callback callback : callbacks) {\n+      if (callback instanceof NameCallback) {\n+        final NameCallback nc = (NameCallback)callback;\n+        nc.setName(username);\n+      } else if (callback instanceof ObjectCallback) {\n+        final ObjectCallback oc = (ObjectCallback)callback;\n+        oc.setObject(password);\n+      } else if (callback instanceof PasswordCallback) {\n+        final PasswordCallback pc = (PasswordCallback)callback;\n+        pc.setPassword(password.toCharArray());\n+      } else if (callback instanceof TextOutputCallback) {", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2NzEyMA==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388167120", "bodyText": "I think no harm in leaving it for now.", "author": "purplefox", "createdAt": "2020-03-05T09:22:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk4ODcwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk4OTUwOA==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r387989508", "bodyText": "The AbstractUser interface is deprecated in vert.x 3.8.5 along with most methods of the User interface, but their replacements (discussed in https://groups.google.com/d/msg/vertx/Nq20qhvUFzo/j5UAE2QCAwAJ) are not available in 3.8.5 so it's not clear to me what should be implemented instead. Thus this suppression.", "author": "vcrfxia", "createdAt": "2020-03-04T23:10:37Z", "path": "ksql-rest-app/src/main/java/io/confluent/ksql/api/auth/JaasAuthProvider.java", "diffHunk": "@@ -0,0 +1,189 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.api.auth;\n+\n+import com.google.common.annotations.VisibleForTesting;\n+import io.confluent.ksql.api.server.ApiServerConfig;\n+import io.confluent.ksql.api.server.Server;\n+import io.vertx.core.AsyncResult;\n+import io.vertx.core.Future;\n+import io.vertx.core.Handler;\n+import io.vertx.core.Promise;\n+import io.vertx.core.json.JsonObject;\n+import io.vertx.ext.auth.AuthProvider;\n+import io.vertx.ext.auth.User;\n+import java.security.Principal;\n+import java.util.List;\n+import java.util.Objects;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+import javax.security.auth.callback.CallbackHandler;\n+import javax.security.auth.login.LoginContext;\n+import javax.security.auth.login.LoginException;\n+import org.apache.commons.collections4.CollectionUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * Authentication provider that checks credentials specified in the JAAS config.\n+ */\n+public class JaasAuthProvider implements AuthProvider {\n+\n+  private static final Logger log = LoggerFactory.getLogger(JaasAuthProvider.class);\n+\n+  private final Server server;\n+  private final ApiServerConfig config;\n+  private final LoginContextSupplier loginContextSupplier;\n+\n+  public JaasAuthProvider(final Server server, final ApiServerConfig config) {\n+    this(server, config, LoginContext::new);\n+  }\n+\n+  @VisibleForTesting\n+  JaasAuthProvider(\n+      final Server server,\n+      final ApiServerConfig config,\n+      final LoginContextSupplier loginContextSupplier\n+  ) {\n+    this.server = Objects.requireNonNull(server, \"server\");\n+    this.config = Objects.requireNonNull(config, \"config\");\n+    this.loginContextSupplier =\n+        Objects.requireNonNull(loginContextSupplier, \"loginContextSupplier\");\n+  }\n+\n+  @VisibleForTesting\n+  @FunctionalInterface\n+  interface LoginContextSupplier {\n+    LoginContext get(String name, CallbackHandler callbackHandler) throws LoginException;\n+  }\n+\n+  @Override\n+  public void authenticate(\n+      final JsonObject authInfo,\n+      final Handler<AsyncResult<User>> resultHandler\n+  ) {\n+    final String username = authInfo.getString(\"username\");\n+    if (username == null) {\n+      resultHandler.handle(Future.failedFuture(\"authInfo missing 'username' field\"));\n+      return;\n+    }\n+    final String password = authInfo.getString(\"password\");\n+    if (password == null) {\n+      resultHandler.handle(Future.failedFuture(\"authInfo missing 'password' field\"));\n+      return;\n+    }\n+\n+    final String contextName = config.getString(ApiServerConfig.AUTHENTICATION_REALM_CONFIG);\n+    final List<String> allowedRoles = config.getList(ApiServerConfig.AUTHENTICATION_ROLES_CONFIG);\n+\n+    server.getWorkerExecutor().executeBlocking(\n+        p -> getUser(contextName, username, password, allowedRoles, p),\n+        resultHandler\n+    );\n+  }\n+\n+  private void getUser(\n+      final String contextName,\n+      final String username,\n+      final String password,\n+      final List<String> allowedRoles,\n+      final Promise<User> promise\n+  ) {\n+    final LoginContext lc;\n+    try {\n+      lc = loginContextSupplier.get(contextName, new BasicCallbackHandler(username, password));\n+    } catch (LoginException | SecurityException e) {\n+      log.error(\"Failed to create LoginContext. \" + e.getMessage());\n+      promise.fail(\"Failed to create LoginContext.\");\n+      return;\n+    }\n+\n+    try {\n+      lc.login();\n+    } catch (LoginException le) {\n+      log.error(\"Failed to log in. \" + le.getMessage());\n+      promise.fail(\"Failed to log in: Invalid username/password.\");\n+      return;\n+    }\n+\n+    if (!validateRoles(lc, allowedRoles)) {\n+      log.error(\"Failed to log in: Invalid roles.\");\n+      promise.fail(\"Failed to log in: Invalid roles.\");\n+      return;\n+    }\n+\n+    promise.complete(new JaasUser(username, this));\n+  }\n+\n+  private void checkUserPermission(\n+      final String username,\n+      final Handler<AsyncResult<Boolean>> resultHandler\n+  ) {\n+    // no authorization yet (besides JAAS role check during login)\n+    // consequently, authenticated users have all permissions\n+    resultHandler.handle(Future.succeededFuture(true));\n+  }\n+\n+  private static boolean validateRoles(final LoginContext lc, final List<String> allowedRoles) {\n+    if (allowedRoles.contains(\"*\")) {\n+      // all users allowed\n+      return true;\n+    }\n+\n+    final Set<String> userRoles = lc.getSubject().getPrincipals().stream()\n+        .map(Principal::getName)\n+        .collect(Collectors.toSet());\n+    return !CollectionUtils.intersection(userRoles, allowedRoles).isEmpty();\n+  }\n+\n+  @SuppressWarnings(\"deprecation\")", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3NDk2Nw==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388174967", "bodyText": "Does AbstractUser need to be fully qualified?", "author": "purplefox", "createdAt": "2020-03-05T09:35:53Z", "path": "ksql-rest-app/src/main/java/io/confluent/ksql/api/auth/JaasAuthProvider.java", "diffHunk": "@@ -0,0 +1,189 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.api.auth;\n+\n+import com.google.common.annotations.VisibleForTesting;\n+import io.confluent.ksql.api.server.ApiServerConfig;\n+import io.confluent.ksql.api.server.Server;\n+import io.vertx.core.AsyncResult;\n+import io.vertx.core.Future;\n+import io.vertx.core.Handler;\n+import io.vertx.core.Promise;\n+import io.vertx.core.json.JsonObject;\n+import io.vertx.ext.auth.AuthProvider;\n+import io.vertx.ext.auth.User;\n+import java.security.Principal;\n+import java.util.List;\n+import java.util.Objects;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+import javax.security.auth.callback.CallbackHandler;\n+import javax.security.auth.login.LoginContext;\n+import javax.security.auth.login.LoginException;\n+import org.apache.commons.collections4.CollectionUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * Authentication provider that checks credentials specified in the JAAS config.\n+ */\n+public class JaasAuthProvider implements AuthProvider {\n+\n+  private static final Logger log = LoggerFactory.getLogger(JaasAuthProvider.class);\n+\n+  private final Server server;\n+  private final ApiServerConfig config;\n+  private final LoginContextSupplier loginContextSupplier;\n+\n+  public JaasAuthProvider(final Server server, final ApiServerConfig config) {\n+    this(server, config, LoginContext::new);\n+  }\n+\n+  @VisibleForTesting\n+  JaasAuthProvider(\n+      final Server server,\n+      final ApiServerConfig config,\n+      final LoginContextSupplier loginContextSupplier\n+  ) {\n+    this.server = Objects.requireNonNull(server, \"server\");\n+    this.config = Objects.requireNonNull(config, \"config\");\n+    this.loginContextSupplier =\n+        Objects.requireNonNull(loginContextSupplier, \"loginContextSupplier\");\n+  }\n+\n+  @VisibleForTesting\n+  @FunctionalInterface\n+  interface LoginContextSupplier {\n+    LoginContext get(String name, CallbackHandler callbackHandler) throws LoginException;\n+  }\n+\n+  @Override\n+  public void authenticate(\n+      final JsonObject authInfo,\n+      final Handler<AsyncResult<User>> resultHandler\n+  ) {\n+    final String username = authInfo.getString(\"username\");\n+    if (username == null) {\n+      resultHandler.handle(Future.failedFuture(\"authInfo missing 'username' field\"));\n+      return;\n+    }\n+    final String password = authInfo.getString(\"password\");\n+    if (password == null) {\n+      resultHandler.handle(Future.failedFuture(\"authInfo missing 'password' field\"));\n+      return;\n+    }\n+\n+    final String contextName = config.getString(ApiServerConfig.AUTHENTICATION_REALM_CONFIG);\n+    final List<String> allowedRoles = config.getList(ApiServerConfig.AUTHENTICATION_ROLES_CONFIG);\n+\n+    server.getWorkerExecutor().executeBlocking(\n+        p -> getUser(contextName, username, password, allowedRoles, p),\n+        resultHandler\n+    );\n+  }\n+\n+  private void getUser(\n+      final String contextName,\n+      final String username,\n+      final String password,\n+      final List<String> allowedRoles,\n+      final Promise<User> promise\n+  ) {\n+    final LoginContext lc;\n+    try {\n+      lc = loginContextSupplier.get(contextName, new BasicCallbackHandler(username, password));\n+    } catch (LoginException | SecurityException e) {\n+      log.error(\"Failed to create LoginContext. \" + e.getMessage());\n+      promise.fail(\"Failed to create LoginContext.\");\n+      return;\n+    }\n+\n+    try {\n+      lc.login();\n+    } catch (LoginException le) {\n+      log.error(\"Failed to log in. \" + le.getMessage());\n+      promise.fail(\"Failed to log in: Invalid username/password.\");\n+      return;\n+    }\n+\n+    if (!validateRoles(lc, allowedRoles)) {\n+      log.error(\"Failed to log in: Invalid roles.\");\n+      promise.fail(\"Failed to log in: Invalid roles.\");\n+      return;\n+    }\n+\n+    promise.complete(new JaasUser(username, this));\n+  }\n+\n+  private void checkUserPermission(\n+      final String username,\n+      final Handler<AsyncResult<Boolean>> resultHandler\n+  ) {\n+    // no authorization yet (besides JAAS role check during login)\n+    // consequently, authenticated users have all permissions\n+    resultHandler.handle(Future.succeededFuture(true));\n+  }\n+\n+  private static boolean validateRoles(final LoginContext lc, final List<String> allowedRoles) {\n+    if (allowedRoles.contains(\"*\")) {\n+      // all users allowed\n+      return true;\n+    }\n+\n+    final Set<String> userRoles = lc.getSubject().getPrincipals().stream()\n+        .map(Principal::getName)\n+        .collect(Collectors.toSet());\n+    return !CollectionUtils.intersection(userRoles, allowedRoles).isEmpty();\n+  }\n+\n+  @SuppressWarnings(\"deprecation\")\n+  static class JaasUser extends io.vertx.ext.auth.AbstractUser {", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ4MDUzMw==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388480533", "bodyText": "The entire interface is deprecated and there's no way to suppress a deprecation warning on an import statement, so this was the workaround I found.", "author": "vcrfxia", "createdAt": "2020-03-05T18:29:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3NDk2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE4MTMzOA==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388181338", "bodyText": "I think it would be best to always add a pause handler then the auth handler as the first handlers in all routes. If the auth handler added after the body handler then a bad user with bad credentials could DoS the server by sending a request with a huge body, before auth occurs.", "author": "purplefox", "createdAt": "2020-03-05T09:47:06Z", "path": "ksql-rest-app/src/main/java/io/confluent/ksql/api/server/ServerVerticle.java", "diffHunk": "@@ -74,18 +80,45 @@ public void stop(final Promise<Void> stopPromise) {\n \n   private Router setupRouter() {\n     final Router router = Router.router(vertx);\n-    router.route(HttpMethod.POST, \"/query-stream\")\n-        .produces(\"application/vnd.ksqlapi.delimited.v1\")\n-        .produces(\"application/json\")\n-        .handler(BodyHandler.create())\n-        .handler(new QueryStreamHandler(endpoints, connectionQueryManager, context,\n-            server));\n-    router.route(HttpMethod.POST, \"/inserts-stream\")\n-        .produces(\"application/vnd.ksqlapi.delimited.v1\")\n-        .produces(\"application/json\")\n-        .handler(new InsertsStreamHandler(context, endpoints, server.getWorkerExecutor()));\n-    router.route(HttpMethod.POST, \"/close-query\").handler(BodyHandler.create())\n-        .handler(new CloseQueryHandler(server));\n+\n+    final List<Pair<Route, Handler<RoutingContext>>> routes = new ArrayList<>();\n+    routes.add(Pair.of(\n+        router.route(HttpMethod.POST, \"/query-stream\")\n+            .produces(\"application/vnd.ksqlapi.delimited.v1\")\n+            .produces(\"application/json\")\n+            .handler(BodyHandler.create()),", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE4Nzc5Ng==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388187796", "bodyText": "If they're always added at the beginning you don't need to a loop to add them, you can just define them once at the  beginning without a path and they will apply to all routes.\nI'd also recommend creating methods void pauseHandler(RoutingContext rc) and void resumeHandler(RoutingContext rc)`, then you can avoid the looping logic and do something like:\n    // This applies to all routes\n    router.route()\n        .handler(this::pauseHandler)\n        .handler(this::authHandler)\n        .handler(this::resumeHandler);\n\n    router.route(HttpMethod.POST, \"/query-stream\")\n        .produces(\"application/vnd.ksqlapi.delimited.v1\")\n        .produces(\"application/json\")\n        .handler(BodyHandler.create())\n        .handler(new QueryStreamHandler(endpoints, connectionQueryManager, context, server));\n\n    router.route(HttpMethod.POST, \"/inserts-stream\")\n        .produces(\"application/vnd.ksqlapi.delimited.v1\")\n        .produces(\"application/json\")\n        .handler(new InsertsStreamHandler(context, endpoints, server.getWorkerExecutor()));", "author": "purplefox", "createdAt": "2020-03-05T09:58:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE4MTMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ4MDk1NA==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388480954", "bodyText": "Much cleaner! Will do. Thanks for the tip.", "author": "vcrfxia", "createdAt": "2020-03-05T18:30:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE4MTMzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE4OTk2Nw==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388189967", "bodyText": "What's the thinking behind the new annotation?", "author": "purplefox", "createdAt": "2020-03-05T10:01:46Z", "path": "ksql-rest-app/src/test/java/io/confluent/ksql/api/ApiTest.java", "diffHunk": "@@ -54,9 +52,12 @@\n \n public class ApiTest extends BaseApiTest {\n \n-  private static final Logger log = LoggerFactory.getLogger(ApiTest.class);\n+  protected static final Logger log = LoggerFactory.getLogger(ApiTest.class);\n+\n+  protected static final List<JsonObject> DEFAULT_INSERT_ROWS = generateInsertRows();\n \n   @Test\n+  @CoreApiTest", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ4MjM2Nw==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388482367", "bodyText": "I didn't think we needed to run all the tests in ApiTest with basic auth (some of the negative tests also won't work since the expected error code changes with auth). Between duplicating code for the tests I did want to run with basic auth and adding an annotation to filter tests on, I went with the annotation approach. This way it's re-usable in that if we add other auth mechanisms, or other non-auth client/server mechanisms we want to run ApiTests against, the annotation allows for these future use cases as well.", "author": "vcrfxia", "createdAt": "2020-03-05T18:32:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE4OTk2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5MzE1Mw==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388193153", "bodyText": "Maybe just call it sendRequest()? As it can be used for sending arbitrary requests.", "author": "purplefox", "createdAt": "2020-03-05T10:07:54Z", "path": "ksql-rest-app/src/test/java/io/confluent/ksql/api/ApiTest.java", "diffHunk": "@@ -296,16 +298,19 @@ public void shouldRejectWhenInternalErrorInProcessingPullQuery() throws Exceptio\n   }\n \n   @Test\n+  @CoreApiTest\n   public void shouldCloseQuery() throws Exception {\n \n     // Create a write stream to capture the incomplete response\n     ReceiveStream writeStream = new ReceiveStream(vertx);\n \n     VertxCompletableFuture<HttpResponse<Void>> responseFuture = new VertxCompletableFuture<>();\n     // Make the request to stream a query\n-    client.post(\"/query-stream\")\n-        .as(BodyCodec.pipe(writeStream))\n-        .sendJsonObject(DEFAULT_PUSH_QUERY_REQUEST_BODY, responseFuture);\n+    streamRequest(\"/query-stream\", (request) ->", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU2MzIwNA==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388563204", "bodyText": "Ah interesting, I had named it streamRequest() not in reference to the endpoint (the same helper method is also used for the /inserts-stream endpoint in one of the tests) but because of how the request sender opens a write stream to stream back the response. As you've pointed out, though, the name is a bit confusing and the request sender could be more generic so I've renamed this to sendRequest() as you've suggested.\nMy original concern with this was that overloading sendRequest() could be confusing but I think it's fine for now.", "author": "vcrfxia", "createdAt": "2020-03-05T21:01:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5MzE1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5NTI2Ng==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388195266", "bodyText": "We probably don't need different tests for pull and push queries as they're handled on the same endpoint.", "author": "purplefox", "createdAt": "2020-03-05T10:11:46Z", "path": "ksql-rest-app/src/test/java/io/confluent/ksql/api/BasicAuthTest.java", "diffHunk": "@@ -0,0 +1,230 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.api;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+\n+import io.confluent.ksql.api.server.ApiServerConfig;\n+import io.confluent.ksql.test.util.TestBasicJaasConfig;\n+import io.confluent.ksql.util.VertxCompletableFuture;\n+import io.vertx.core.buffer.Buffer;\n+import io.vertx.core.json.JsonObject;\n+import io.vertx.ext.web.client.HttpRequest;\n+import io.vertx.ext.web.client.HttpResponse;\n+import io.vertx.ext.web.client.WebClient;\n+import java.util.Map;\n+import java.util.function.Consumer;\n+import org.junit.ClassRule;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+@RunWith(CoreApiTestRunner.class)\n+public class BasicAuthTest extends ApiTest {\n+\n+  protected static final Logger log = LoggerFactory.getLogger(BasicAuthTest.class);\n+\n+  private static final String PROPS_JAAS_REALM = \"KsqlServer-Props\";\n+  private static final String KSQL_RESOURCE = \"ksql-user\";\n+  private static final String OTHER_RESOURCE = \"not-ksql\";\n+  private static final String USER_WITH_ACCESS = \"harry\";\n+  private static final String USER_WITH_ACCESS_PWD = \"changeme\";\n+  private static final String USER_WITHOUT_ACCESS = \"john\";\n+  private static final String USER_WITHOUT_ACCESS_PWD = \"bad\";\n+  private static final String USER_WITH_INCORRECT_ROLE = \"maud\";\n+  private static final String USER_WITH_INCORRECT_ROLE_PWD = \"1234\";\n+\n+  @ClassRule\n+  public static final TestBasicJaasConfig JAAS_CONFIG = TestBasicJaasConfig\n+      .builder(PROPS_JAAS_REALM)\n+      .addUser(USER_WITH_ACCESS, USER_WITH_ACCESS_PWD, KSQL_RESOURCE)\n+      .addUser(USER_WITH_INCORRECT_ROLE, USER_WITH_INCORRECT_ROLE_PWD, OTHER_RESOURCE)\n+      .build();\n+\n+  @Override\n+  protected ApiServerConfig createServerConfig() {\n+    ApiServerConfig config = super.createServerConfig();\n+    Map<String, Object> origs = config.originals();\n+    origs.put(\n+        ApiServerConfig.AUTHENTICATION_METHOD_CONFIG,\n+        ApiServerConfig.AUTHENTICATION_METHOD_BASIC);\n+    origs.put(\n+        ApiServerConfig.AUTHENTICATION_REALM_CONFIG,\n+        PROPS_JAAS_REALM\n+    );\n+    origs.put(\n+        ApiServerConfig.AUTHENTICATION_ROLES_CONFIG,\n+        KSQL_RESOURCE\n+    );\n+    return new ApiServerConfig(origs);\n+  }\n+\n+  @Override\n+  protected HttpResponse<Buffer> sendRequest(final WebClient client, final String uri,\n+      final Buffer requestBody)\n+      throws Exception {\n+    return sendRequestWithCreds(client, uri, requestBody, USER_WITH_ACCESS, USER_WITH_ACCESS_PWD);\n+  }\n+\n+  @Override\n+  protected void streamRequest(\n+      final WebClient client,\n+      final String uri,\n+      final Consumer<HttpRequest<Buffer>> requestSender) {\n+    requestSender.accept(\n+        client.post(uri)\n+            .basicAuthentication(USER_WITH_ACCESS, USER_WITH_ACCESS_PWD)\n+    );\n+  }\n+\n+  @Test\n+  public void shouldFailPullQueryWithBadCredentials() throws Exception {\n+    shouldFailPullQuery(USER_WITHOUT_ACCESS, USER_WITHOUT_ACCESS_PWD);\n+  }\n+\n+  @Test\n+  public void shouldFailPushQueryWithBadCredentials() throws Exception {\n+    shouldFailPushQuery(USER_WITHOUT_ACCESS, USER_WITHOUT_ACCESS_PWD);\n+  }\n+\n+  @Test\n+  public void shouldFailCloseQueryWithBadCredentials() throws Exception {\n+    shouldFailCloseQuery(USER_WITHOUT_ACCESS, USER_WITHOUT_ACCESS_PWD);\n+  }\n+\n+  @Test\n+  public void shouldFailInsertRequestWithBadCredentials() throws Exception {\n+    shouldFailInsertRequest(USER_WITHOUT_ACCESS, USER_WITHOUT_ACCESS_PWD);\n+  }\n+\n+  @Test\n+  public void shouldFailPullQueryWithIncorrectRole() throws Exception {\n+    shouldFailPullQuery(USER_WITH_INCORRECT_ROLE, USER_WITH_INCORRECT_ROLE_PWD);\n+  }\n+\n+  @Test\n+  public void shouldFailPushQueryWithIncorrectRole() throws Exception {\n+    shouldFailPushQuery(USER_WITH_INCORRECT_ROLE, USER_WITH_INCORRECT_ROLE_PWD);\n+  }\n+\n+  @Test\n+  public void shouldFailCloseQueryWithIncorrectRole() throws Exception {\n+    shouldFailCloseQuery(USER_WITH_INCORRECT_ROLE, USER_WITH_INCORRECT_ROLE_PWD);\n+  }\n+\n+  @Test\n+  public void shouldFailInsertRequestWithIncorrectRole() throws Exception {\n+    shouldFailInsertRequest(USER_WITH_INCORRECT_ROLE, USER_WITH_INCORRECT_ROLE_PWD);\n+  }\n+\n+  private void shouldFailPullQuery(final String username, final String password) throws Exception {\n+    // Given\n+    JsonObject requestBody = new JsonObject().put(\"sql\", DEFAULT_PULL_QUERY);\n+    JsonObject properties = new JsonObject().put(\"prop1\", \"val1\").put(\"prop2\", 23);\n+    requestBody.put(\"properties\", properties);\n+\n+    // When\n+    HttpResponse<Buffer> response = sendRequestWithCreds(\n+        \"/query-stream\",\n+        requestBody.toBuffer(),\n+        username,\n+        password\n+    );\n+\n+    // Then\n+    assertThat(response.statusCode(), is(401));\n+    assertThat(response.statusMessage(), is(\"Unauthorized\"));\n+  }\n+\n+  private void shouldFailPushQuery(final String username, final String password) throws Exception {", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU2MTkyNA==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388561924", "bodyText": "Done.", "author": "vcrfxia", "createdAt": "2020-03-05T20:58:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5NTI2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5NTgzNw==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388195837", "bodyText": "I think it would also be good to add a test that checks request is rejected if no creds are provided (not bad creds)", "author": "purplefox", "createdAt": "2020-03-05T10:12:50Z", "path": "ksql-rest-app/src/test/java/io/confluent/ksql/api/BasicAuthTest.java", "diffHunk": "@@ -0,0 +1,230 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.api;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+\n+import io.confluent.ksql.api.server.ApiServerConfig;\n+import io.confluent.ksql.test.util.TestBasicJaasConfig;\n+import io.confluent.ksql.util.VertxCompletableFuture;\n+import io.vertx.core.buffer.Buffer;\n+import io.vertx.core.json.JsonObject;\n+import io.vertx.ext.web.client.HttpRequest;\n+import io.vertx.ext.web.client.HttpResponse;\n+import io.vertx.ext.web.client.WebClient;\n+import java.util.Map;\n+import java.util.function.Consumer;\n+import org.junit.ClassRule;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+@RunWith(CoreApiTestRunner.class)\n+public class BasicAuthTest extends ApiTest {\n+\n+  protected static final Logger log = LoggerFactory.getLogger(BasicAuthTest.class);\n+\n+  private static final String PROPS_JAAS_REALM = \"KsqlServer-Props\";\n+  private static final String KSQL_RESOURCE = \"ksql-user\";\n+  private static final String OTHER_RESOURCE = \"not-ksql\";\n+  private static final String USER_WITH_ACCESS = \"harry\";\n+  private static final String USER_WITH_ACCESS_PWD = \"changeme\";\n+  private static final String USER_WITHOUT_ACCESS = \"john\";\n+  private static final String USER_WITHOUT_ACCESS_PWD = \"bad\";\n+  private static final String USER_WITH_INCORRECT_ROLE = \"maud\";\n+  private static final String USER_WITH_INCORRECT_ROLE_PWD = \"1234\";\n+\n+  @ClassRule\n+  public static final TestBasicJaasConfig JAAS_CONFIG = TestBasicJaasConfig\n+      .builder(PROPS_JAAS_REALM)\n+      .addUser(USER_WITH_ACCESS, USER_WITH_ACCESS_PWD, KSQL_RESOURCE)\n+      .addUser(USER_WITH_INCORRECT_ROLE, USER_WITH_INCORRECT_ROLE_PWD, OTHER_RESOURCE)\n+      .build();\n+\n+  @Override\n+  protected ApiServerConfig createServerConfig() {\n+    ApiServerConfig config = super.createServerConfig();\n+    Map<String, Object> origs = config.originals();\n+    origs.put(\n+        ApiServerConfig.AUTHENTICATION_METHOD_CONFIG,\n+        ApiServerConfig.AUTHENTICATION_METHOD_BASIC);\n+    origs.put(\n+        ApiServerConfig.AUTHENTICATION_REALM_CONFIG,\n+        PROPS_JAAS_REALM\n+    );\n+    origs.put(\n+        ApiServerConfig.AUTHENTICATION_ROLES_CONFIG,\n+        KSQL_RESOURCE\n+    );\n+    return new ApiServerConfig(origs);\n+  }\n+\n+  @Override\n+  protected HttpResponse<Buffer> sendRequest(final WebClient client, final String uri,\n+      final Buffer requestBody)\n+      throws Exception {\n+    return sendRequestWithCreds(client, uri, requestBody, USER_WITH_ACCESS, USER_WITH_ACCESS_PWD);\n+  }\n+\n+  @Override\n+  protected void streamRequest(\n+      final WebClient client,\n+      final String uri,\n+      final Consumer<HttpRequest<Buffer>> requestSender) {\n+    requestSender.accept(\n+        client.post(uri)\n+            .basicAuthentication(USER_WITH_ACCESS, USER_WITH_ACCESS_PWD)\n+    );\n+  }\n+", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU2MTg5OQ==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388561899", "bodyText": "Done.", "author": "vcrfxia", "createdAt": "2020-03-05T20:58:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5NTgzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5NzMyNw==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388197327", "bodyText": "Personally I am not a big fan of these kinds of fine grained unit tests for simple classes. I don't think they tell you much, plus they're a fair amount of work to write ;)", "author": "purplefox", "createdAt": "2020-03-05T10:15:41Z", "path": "ksql-rest-app/src/test/java/io/confluent/ksql/api/auth/BasicCallbackHandlerTest.java", "diffHunk": "@@ -0,0 +1,77 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.api.auth;", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU2NDI3Ng==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388564276", "bodyText": "That's fair. The value I see in simple tests like these is that I often find it easier to understand what a class is meant to do by scanning the unit tests rather than reading the code directly, but perhaps it was overkill this time. I'll leave them in since I've already written them, but if they become problematic later (if we, e.g., evolve the class in a way that requires updating the tests) I'm fine with removing them.", "author": "vcrfxia", "createdAt": "2020-03-05T21:03:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5NzMyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5ODIyOA==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388198228", "bodyText": "Not related to your PR.. but is PullQueryFunctionalTest the only integration test which tests with actual Jaas config? That worries me slightly!", "author": "purplefox", "createdAt": "2020-03-05T10:17:09Z", "path": "ksql-rest-app/src/test/java/io/confluent/ksql/rest/integration/PullQueryFunctionalTest.java", "diffHunk": "@@ -91,7 +91,7 @@\n   private static final Format VALUE_FORMAT = FormatFactory.JSON;\n   private static final int HEADER = 1;\n \n-  private static final TestBasicJaasConfig JASS_CONFIG = TestBasicJaasConfig\n+  private static final TestBasicJaasConfig JAAS_CONFIG = TestBasicJaasConfig", "originalCommit": "b9a8bae9df46689f8d01f7bd769880cdbf476c53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU2NDI5Nw==", "url": "https://github.com/confluentinc/ksql/pull/4685#discussion_r388564297", "bodyText": "Nope, there's also https://github.com/confluentinc/ksql/blob/master/ksql-cli/src/test/java/io/confluent/ksql/cli/BasicAuthFunctionalTest.java. Not sure why creation of the JAAS config isn't standardized among integration tests. Probably worth cleaning up at some point.", "author": "vcrfxia", "createdAt": "2020-03-05T21:03:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE5ODIyOA=="}], "type": "inlineReview"}, {"oid": "26e3d65d8c905a45592c56f2cb4bea15a0f4ff68", "url": "https://github.com/confluentinc/ksql/commit/26e3d65d8c905a45592c56f2cb4bea15a0f4ff68", "message": "refactor: wrap auth handler in pause and resume handler", "committedDate": "2020-03-05T19:05:32Z", "type": "commit"}, {"oid": "a34bea8dc73ac37923bb62ace9b5c49d2e9a42b7", "url": "https://github.com/confluentinc/ksql/commit/a34bea8dc73ac37923bb62ace9b5c49d2e9a42b7", "message": "test: add tests with no credentials", "committedDate": "2020-03-05T19:14:43Z", "type": "commit"}, {"oid": "455333214a59d087b8d91361c868106bf8cfe95d", "url": "https://github.com/confluentinc/ksql/commit/455333214a59d087b8d91361c868106bf8cfe95d", "message": "style: rename streamRequest to sendRequest", "committedDate": "2020-03-05T19:17:54Z", "type": "commit"}, {"oid": "e744492916074615a93cd1bcffece048cb33877c", "url": "https://github.com/confluentinc/ksql/commit/e744492916074615a93cd1bcffece048cb33877c", "message": "Merge branch 'master' into api-basic-auth", "committedDate": "2020-03-05T19:21:58Z", "type": "commit"}]}