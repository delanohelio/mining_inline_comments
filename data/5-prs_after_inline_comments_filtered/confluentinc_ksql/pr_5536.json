{"pr_number": 5536, "pr_title": "feat: new UDFs for working with Maps", "pr_createdAt": "2020-06-03T08:18:31Z", "pr_url": "https://github.com/confluentinc/ksql/pull/5536", "timeline": [{"oid": "80b1a8f0b51630d34235d5704a7cf357ef251699", "url": "https://github.com/confluentinc/ksql/commit/80b1a8f0b51630d34235d5704a7cf357ef251699", "message": "initial version 3 new map udfs", "committedDate": "2020-06-03T08:08:38Z", "type": "commit"}, {"oid": "7512103c40851c9394c07238f3ab4f5bdd42a734", "url": "https://github.com/confluentinc/ksql/commit/7512103c40851c9394c07238f3ab4f5bdd42a734", "message": "make a couple of fields final", "committedDate": "2020-06-03T14:33:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcxMzQ4NA==", "url": "https://github.com/confluentinc/ksql/pull/5536#discussion_r434713484", "bodyText": "What if the maps have the same key with different values? Currently, the latter will be in the result. Maybe point this out in the description", "author": "vpapavas", "createdAt": "2020-06-03T16:50:32Z", "path": "ksqldb-engine/src/main/java/io/confluent/ksql/function/udf/map/MapUnion.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"; you may not use this file except\n+ * in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License\n+ * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and limitations under the\n+ * License.\n+ */\n+\n+package io.confluent.ksql.function.udf.map;\n+\n+import io.confluent.ksql.function.udf.Udf;\n+import io.confluent.ksql.function.udf.UdfDescription;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+@UdfDescription(\n+    name = \"map_union\",\n+    description = \"Returns a new map containing the union of all entries from both input maps. \"", "originalCommit": "7512103c40851c9394c07238f3ab4f5bdd42a734", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc1Mzc2OA==", "url": "https://github.com/confluentinc/ksql/pull/5536#discussion_r434753768", "bodyText": "yeah - this is described in the docs file but not here, will add something to call it out here also", "author": "blueedgenick", "createdAt": "2020-06-03T17:59:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcxMzQ4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcxNDU0OA==", "url": "https://github.com/confluentinc/ksql/pull/5536#discussion_r434714548", "bodyText": "Add @UdfParameter just so that it can compile without the -parameters in the pom file?", "author": "vpapavas", "createdAt": "2020-06-03T16:52:20Z", "path": "ksqldb-engine/src/main/java/io/confluent/ksql/function/udf/map/MapUnion.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"; you may not use this file except\n+ * in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License\n+ * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and limitations under the\n+ * License.\n+ */\n+\n+package io.confluent.ksql.function.udf.map;\n+\n+import io.confluent.ksql.function.udf.Udf;\n+import io.confluent.ksql.function.udf.UdfDescription;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+@UdfDescription(\n+    name = \"map_union\",\n+    description = \"Returns a new map containing the union of all entries from both input maps. \"\n+        + \"Returns NULL if all of the input maps are NULL.\")\n+public class MapUnion {\n+\n+  @Udf\n+  public <T> Map<String, T> union(final Map<String, T> input1, final Map<String, T> input2) {", "originalCommit": "7512103c40851c9394c07238f3ab4f5bdd42a734", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc1Mzk1OQ==", "url": "https://github.com/confluentinc/ksql/pull/5536#discussion_r434753959", "bodyText": "makes sense", "author": "blueedgenick", "createdAt": "2020-06-03T17:59:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcxNDU0OA=="}], "type": "inlineReview"}, {"oid": "0a22986c221289d883554c1e452d711f0e597c26", "url": "https://github.com/confluentinc/ksql/commit/0a22986c221289d883554c1e452d711f0e597c26", "message": "review feedback", "committedDate": "2020-06-03T18:09:05Z", "type": "commit"}, {"oid": "f2b02abbf5aa8406aa2cd22ec51925ac9a088edd", "url": "https://github.com/confluentinc/ksql/commit/f2b02abbf5aa8406aa2cd22ec51925ac9a088edd", "message": "Update docs/developer-guide/ksqldb-reference/scalar-functions.md\r\n\r\nJim's doc feedback\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-03T22:01:35Z", "type": "commit"}, {"oid": "29076ea9872a44f0d5079073cbd9d121aa9863ac", "url": "https://github.com/confluentinc/ksql/commit/29076ea9872a44f0d5079073cbd9d121aa9863ac", "message": "Update docs/developer-guide/ksqldb-reference/scalar-functions.md\r\n\r\nJim's doc feedback\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-03T22:01:48Z", "type": "commit"}, {"oid": "93de7b509e5e0e00ebce885205922c537cb89adf", "url": "https://github.com/confluentinc/ksql/commit/93de7b509e5e0e00ebce885205922c537cb89adf", "message": "Update docs/developer-guide/ksqldb-reference/scalar-functions.md\r\n\r\nJim's doc feedback\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-03T22:02:18Z", "type": "commit"}, {"oid": "9dbbb94a149e1288be9757acc494c05cad5f1df6", "url": "https://github.com/confluentinc/ksql/commit/9dbbb94a149e1288be9757acc494c05cad5f1df6", "message": "Merge branch 'master' into map_keys_values_union", "committedDate": "2020-06-03T23:29:27Z", "type": "commit"}]}