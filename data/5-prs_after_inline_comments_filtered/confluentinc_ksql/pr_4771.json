{"pr_number": 4771, "pr_title": "feat: add internal request to KsqlRequestConfig and SessionProperties", "pr_createdAt": "2020-03-13T17:10:55Z", "pr_url": "https://github.com/confluentinc/ksql/pull/4771", "timeline": [{"oid": "20dd5f28acb17661ea3491e56e5e378c15cea834", "url": "https://github.com/confluentinc/ksql/commit/20dd5f28acb17661ea3491e56e5e378c15cea834", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest", "committedDate": "2020-03-13T17:29:33Z", "type": "forcePushed"}, {"oid": "140b6b6ab108fe19e16a42034ee0862860acf553", "url": "https://github.com/confluentinc/ksql/commit/140b6b6ab108fe19e16a42034ee0862860acf553", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest", "committedDate": "2020-03-13T17:46:41Z", "type": "forcePushed"}, {"oid": "c5e21891122e0c326212489dd7af95ce0848b657", "url": "https://github.com/confluentinc/ksql/commit/c5e21891122e0c326212489dd7af95ce0848b657", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest", "committedDate": "2020-03-13T18:59:16Z", "type": "forcePushed"}, {"oid": "b03dca34448b6666deec03507474b9421fd41e8a", "url": "https://github.com/confluentinc/ksql/commit/b03dca34448b6666deec03507474b9421fd41e8a", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest", "committedDate": "2020-03-13T23:29:45Z", "type": "forcePushed"}, {"oid": "4d44ecc2cf1f21f41e021c1857c8bc1b6d2d688c", "url": "https://github.com/confluentinc/ksql/commit/4d44ecc2cf1f21f41e021c1857c8bc1b6d2d688c", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest", "committedDate": "2020-03-14T20:04:26Z", "type": "forcePushed"}, {"oid": "e6d6ed50df8d977298ae41e3e8f426ad6ff5f958", "url": "https://github.com/confluentinc/ksql/commit/e6d6ed50df8d977298ae41e3e8f426ad6ff5f958", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest", "committedDate": "2020-03-16T18:46:55Z", "type": "forcePushed"}, {"oid": "eca0d372767a4b3a9b97bcf5ea59b1ba18284196", "url": "https://github.com/confluentinc/ksql/commit/eca0d372767a4b3a9b97bcf5ea59b1ba18284196", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest", "committedDate": "2020-03-16T18:53:38Z", "type": "forcePushed"}, {"oid": "9fbbcc17b29c8e529e55d58fb8be940265cd38a1", "url": "https://github.com/confluentinc/ksql/commit/9fbbcc17b29c8e529e55d58fb8be940265cd38a1", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest", "committedDate": "2020-03-18T21:55:21Z", "type": "forcePushed"}, {"oid": "9fe61e571a44845eb112c990079705bec248b2cc", "url": "https://github.com/confluentinc/ksql/commit/9fe61e571a44845eb112c990079705bec248b2cc", "message": "feat: add internal request to KsqlRequestConfig and SessionProperties", "committedDate": "2020-03-18T22:01:00Z", "type": "commit"}, {"oid": "9fe61e571a44845eb112c990079705bec248b2cc", "url": "https://github.com/confluentinc/ksql/commit/9fe61e571a44845eb112c990079705bec248b2cc", "message": "feat: add internal request to KsqlRequestConfig and SessionProperties", "committedDate": "2020-03-18T22:01:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczODI2NQ==", "url": "https://github.com/confluentinc/ksql/pull/4771#discussion_r394738265", "bodyText": "I am not sure about initializing the config with every request. The config has the default value, you should not override it. Instead, you can check if there is the property specified in the request and use that value, else use the default value.\nif (request.getRequestProperties().containsKey(key)) {\n        return (Boolean) request.getRequestProperties().get(key);\n}\nelse {\n    return KsqlRequestConfig. KSQL_REQUEST_INTERNAL_REQUEST_DEFAULT;\n}", "author": "vpapavas", "createdAt": "2020-03-19T01:28:04Z", "path": "ksqldb-rest-app/src/main/java/io/confluent/ksql/rest/server/resources/KsqlResource.java", "diffHunk": "@@ -245,14 +247,17 @@ public Response handleKsqlStatements(\n           request,\n           distributedCmdResponseTimeout);\n \n+      final KsqlRequestConfig requestConfig =", "originalCommit": "9fe61e571a44845eb112c990079705bec248b2cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIwMjc1Mg==", "url": "https://github.com/confluentinc/ksql/pull/4771#discussion_r395202752", "bodyText": "@vpapavas I'm not overriding the default, if the config isn't present and you create a new KsqlRequestConfig, it should automatically set to what the default value is. I wrote a new test file to illustrate the behavior. https://github.com/confluentinc/ksql/blob/b66866b7a3f76547b217579935bc00240854d530/ksqldb-common/src/test/java/io/confluent/ksql/util/KsqlRestConfigTest.java", "author": "stevenpyzhang", "createdAt": "2020-03-19T17:34:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczODI2NQ=="}], "type": "inlineReview"}, {"oid": "164d5fe7fc36a56da25617c0d114b4b27a2aba86", "url": "https://github.com/confluentinc/ksql/commit/164d5fe7fc36a56da25617c0d114b4b27a2aba86", "message": "add test for KsqlRequestConfig", "committedDate": "2020-03-19T17:34:04Z", "type": "commit"}, {"oid": "164d5fe7fc36a56da25617c0d114b4b27a2aba86", "url": "https://github.com/confluentinc/ksql/commit/164d5fe7fc36a56da25617c0d114b4b27a2aba86", "message": "add test for KsqlRequestConfig", "committedDate": "2020-03-19T17:34:04Z", "type": "forcePushed"}]}