{"pr_number": 1541, "pr_title": "Remove deprecated method of 'ConfigOptionProvider'", "pr_createdAt": "2020-07-09T10:30:05Z", "pr_url": "https://github.com/openhab/openhab-core/pull/1541", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEyMTk4OA==", "url": "https://github.com/openhab/openhab-core/pull/1541#discussion_r452121988", "bodyText": "This method needs a little attention. If we remove it now it will break the openHAB 3 Add-ons build.", "author": "cweitkamp", "createdAt": "2020-07-09T10:31:23Z", "path": "bundles/org.openhab.core.config.core/src/main/java/org/openhab/core/config/core/ConfigOptionProvider.java", "diffHunk": "@@ -29,19 +29,11 @@\n @NonNullByDefault\n public interface ConfigOptionProvider {\n \n-    /**\n-     * Provides a collection of {@link ParameterOptions}s.\n-     *\n-     * @deprecated Use {@link getParameterOptions} with context instead.\n-     *\n-     * @param uri the uri of the config description\n-     * @param param the parameter name for which the requested options shall be returned\n-     * @param locale the locale in which the result is expected\n-     * @return the configuration options provided by this provider if any or {@code null} otherwise\n-     */\n-    @Deprecated\n-    @Nullable\n-    Collection<ParameterOption> getParameterOptions(URI uri, String param, @Nullable Locale locale);\n+    // @Deprecated\n+    // @Nullable\n+    // default Collection<ParameterOption> getParameterOptions(URI uri, String param, @Nullable Locale locale) {", "originalCommit": "a7575cef08878e22a724b27e4b899ecd772066e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA5Mjc2OA==", "url": "https://github.com/openhab/openhab-core/pull/1541#discussion_r453092768", "bodyText": "So if I get it right, your plan now is to keep it as a deprecated \"default\" method in place and remove it later?\nWhich add-ons will break?", "author": "kaikreuzer", "createdAt": "2020-07-10T21:50:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEyMTk4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE4NjM4OQ==", "url": "https://github.com/openhab/openhab-core/pull/1541#discussion_r453186389", "bodyText": "Yes, that was the initial idea. We are talking about three bindings:\n\nAmazon Dash Button\nGPSTracker\nSmartMeter\n\nThere are two other options:\n\nWe could exclude them from openHAB 3 Add-ons build.\n\nor\n\nWe could move them to \"master\"-branch and migrate them right now.", "author": "cweitkamp", "createdAt": "2020-07-11T11:38:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEyMTk4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE5MzM5Nw==", "url": "https://github.com/openhab/openhab-core/pull/1541#discussion_r453193397", "bodyText": "We are talking about three bindings\n\nShouldn't it be fairly easy to adapt them?", "author": "kaikreuzer", "createdAt": "2020-07-11T13:07:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEyMTk4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIyMTU3OQ==", "url": "https://github.com/openhab/openhab-core/pull/1541#discussion_r453221579", "bodyText": "Shouldn't it be fairly easy to adapt them?\n\nYes, it is. But we cannot use the same code to compile against OHC 2.5 and OHC 3 (after this PR got merged). If we remove the deprecated method in the bindings it will fail on OH 2.5.x Add-ons build and if we remove the deprecated method here it will fail on OH 3 Add-ons build.", "author": "cweitkamp", "createdAt": "2020-07-11T18:27:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEyMTk4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTY2MA==", "url": "https://github.com/openhab/openhab-core/pull/1541#discussion_r453241660", "bodyText": "Ok, I see. I had missed the fact that it is a \"provider\" interface and not a \"consumer\" interface.\nSo yeah, I think your approach is just fine - let's leave it in as a default method and remove it once we move all add-ons to master. Do you keep track of those open changes somewhere?", "author": "kaikreuzer", "createdAt": "2020-07-11T22:32:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEyMTk4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI4MjE0NA==", "url": "https://github.com/openhab/openhab-core/pull/1541#discussion_r453282144", "bodyText": "We keep track of it in #1408. I added a note.", "author": "cweitkamp", "createdAt": "2020-07-12T07:47:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEyMTk4OA=="}], "type": "inlineReview"}, {"oid": "ccba6210cae110c296b3684005c61b72d6e463cb", "url": "https://github.com/openhab/openhab-core/commit/ccba6210cae110c296b3684005c61b72d6e463cb", "message": "Remove deprecated method in 'ConfigOptionProvider'\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>", "committedDate": "2020-07-10T08:48:44Z", "type": "commit"}, {"oid": "9b96b6c31445852ed06c1b026b3d2dc6faa9af5b", "url": "https://github.com/openhab/openhab-core/commit/9b96b6c31445852ed06c1b026b3d2dc6faa9af5b", "message": "Remove deprecated method in 'ConfigOptionProvider'\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>", "committedDate": "2020-07-10T10:04:57Z", "type": "commit"}, {"oid": "9b96b6c31445852ed06c1b026b3d2dc6faa9af5b", "url": "https://github.com/openhab/openhab-core/commit/9b96b6c31445852ed06c1b026b3d2dc6faa9af5b", "message": "Remove deprecated method in 'ConfigOptionProvider'\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>", "committedDate": "2020-07-10T10:04:57Z", "type": "forcePushed"}]}