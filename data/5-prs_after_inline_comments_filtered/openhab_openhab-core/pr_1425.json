{"pr_number": 1425, "pr_title": "Remove deprecated TrustManagerProvider", "pr_createdAt": "2020-04-14T21:54:38Z", "pr_url": "https://github.com/openhab/openhab-core/pull/1425", "timeline": [{"oid": "d85017e167b9369b5a3c2b87b1273c0ea3fbeb54", "url": "https://github.com/openhab/openhab-core/commit/d85017e167b9369b5a3c2b87b1273c0ea3fbeb54", "message": "Remove deprecated TrustManagerProvider\n\nIt was deprecated since the introduction of the ExtensibleTrustManager (https://github.com/eclipse/smarthome/pull/6281).\n\nRelated to #1408\n\nSigned-off-by: Wouter Born <github@maindrain.net>", "committedDate": "2020-04-14T21:53:51Z", "type": "commit"}, {"oid": "29acaabdf2a16b535edf05a0039b4415dbeff13e", "url": "https://github.com/openhab/openhab-core/commit/29acaabdf2a16b535edf05a0039b4415dbeff13e", "message": "Fix build by removing more deprecated methods\n\nSigned-off-by: Wouter Born <github@maindrain.net>", "committedDate": "2020-04-14T22:32:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYwNjEwOQ==", "url": "https://github.com/openhab/openhab-core/pull/1425#discussion_r408606109", "bodyText": "Even if we are talking about three lines of code. They are duplicate. Should we merge this method with createSslContextFactoryFromExtensibleTrustManager() and initialize the SSLContext only if endpoint == null?\nOr why have we to distinguish here at all.", "author": "cweitkamp", "createdAt": "2020-04-15T06:22:26Z", "path": "bundles/org.openhab.core.io.net/src/main/java/org/openhab/core/io/net/http/internal/WebClientFactoryImpl.java", "diffHunk": "@@ -373,7 +350,9 @@ private SslContextFactory createSslContextFactory(@Nullable String endpoint) {\n         if (endpoint == null) {\n             return createSslContextFactoryFromExtensibleTrustManager();\n         } else {\n-            return createSslContextFactoryFromTrustManagerProvider(endpoint);\n+            SslContextFactory sslContextFactory = new SslContextFactory();", "originalCommit": "29acaabdf2a16b535edf05a0039b4415dbeff13e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYzMzI3OA==", "url": "https://github.com/openhab/openhab-core/pull/1425#discussion_r408633278", "bodyText": "That change makes sense. I'm not that familiar with all this code though.\nFrom what I understand, because of the deprecation, there wouldn't be any instance of a TrustManagerProvider anymore. So all code guarded by trustmanagerProvider != null, would effectively be dead code.\nMaybe @martinvw can also comment on if these deprecated methods are cleaned up the right way?\nEven if we don't fully understand how this works... now is the time to clean it up because OH3 will go through some rigorous testing.", "author": "wborn", "createdAt": "2020-04-15T07:24:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYwNjEwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY0MjkwOQ==", "url": "https://github.com/openhab/openhab-core/pull/1425#discussion_r408642909", "bodyText": "If the endpoint parameter is only used to differentiate between the deprecated  TrustManagerProvider and ExtensibleTrustManager we might just want to remove the parameter and always use the ExtensibleTrustManager?", "author": "wborn", "createdAt": "2020-04-15T07:42:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYwNjEwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY0ODQxNQ==", "url": "https://github.com/openhab/openhab-core/pull/1425#discussion_r408648415", "bodyText": "Looks like because of the removal of the other methods, the endpoint would now always be null.", "author": "wborn", "createdAt": "2020-04-15T07:52:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYwNjEwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MjM5MA==", "url": "https://github.com/openhab/openhab-core/pull/1425#discussion_r408662390", "bodyText": "The latest change looks nice. And it should cause no problems because everything was internal.", "author": "cweitkamp", "createdAt": "2020-04-15T08:16:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYwNjEwOQ=="}], "type": "inlineReview"}, {"oid": "25a6778de12ae7d7054b682c790997add5368d7b", "url": "https://github.com/openhab/openhab-core/commit/25a6778de12ae7d7054b682c790997add5368d7b", "message": "More cleansing\n\nSigned-off-by: Wouter Born <github@maindrain.net>", "committedDate": "2020-04-15T07:49:16Z", "type": "commit"}]}