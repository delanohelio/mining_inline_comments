{"pr_number": 313, "pr_title": "New security model based on Android Keystore", "pr_createdAt": "2020-01-27T15:48:35Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/313", "timeline": [{"oid": "460c9a01a45338dfb5006106f1e4ddc8f6afaf3e", "url": "https://github.com/dashevo/dash-wallet/commit/460c9a01a45338dfb5006106f1e4ddc8f6afaf3e", "message": "Base classes for new security model.\nInstead of using a short 4-digit pin to encrypt the wallet we will use\na complex random string that will be encrypted by AndroidKeystore and\nsaved in SharedPreferences.\nThe same method will be used to save the pin, which we will be using\nonly form UI-level authentication.", "committedDate": "2020-01-23T16:20:56Z", "type": "commit"}, {"oid": "953fc719e8aa77626425440b721f33845d472938", "url": "https://github.com/dashevo/dash-wallet/commit/953fc719e8aa77626425440b721f33845d472938", "message": "Minor code refactoring", "committedDate": "2020-01-23T17:06:32Z", "type": "commit"}, {"oid": "4287cb1551fb4d4907bf8925e1c4e1d13f0950af", "url": "https://github.com/dashevo/dash-wallet/commit/4287cb1551fb4d4907bf8925e1c4e1d13f0950af", "message": "Applied the new security model to basic operations (encrypt wallet, check pin, change pin)", "committedDate": "2020-01-24T06:17:47Z", "type": "commit"}, {"oid": "d68bc31cf64738dbe39ee8d59053565c9cee17f9", "url": "https://github.com/dashevo/dash-wallet/commit/d68bc31cf64738dbe39ee8d59053565c9cee17f9", "message": "Merge branch 'redesign' into redisign-keystore-introduction", "committedDate": "2020-01-24T06:38:10Z", "type": "commit"}, {"oid": "8c8c3fdb00312f523a27cd2bd6a147a9b57ff842", "url": "https://github.com/dashevo/dash-wallet/commit/8c8c3fdb00312f523a27cd2bd6a147a9b57ff842", "message": "Displaying the seed with new security model", "committedDate": "2020-01-24T09:38:02Z", "type": "commit"}, {"oid": "b151ba2bdf197bd6ed63799bb14db4cfb1b703a4", "url": "https://github.com/dashevo/dash-wallet/commit/b151ba2bdf197bd6ed63799bb14db4cfb1b703a4", "message": "Handling the app update from the version using old security model\n(works also when updating from master version but only if it was secured with 4-digits pin).", "committedDate": "2020-01-24T10:43:55Z", "type": "commit"}, {"oid": "5cb298f6b58773bb5d4d05d9c11439195d8aae95", "url": "https://github.com/dashevo/dash-wallet/commit/5cb298f6b58773bb5d4d05d9c11439195d8aae95", "message": "Removing security keys when wiping the wallet", "committedDate": "2020-01-27T09:38:05Z", "type": "commit"}, {"oid": "ce0657244a4eeac380744899e15d8ff8bc1f4bbb", "url": "https://github.com/dashevo/dash-wallet/commit/ce0657244a4eeac380744899e15d8ff8bc1f4bbb", "message": "Sending transactions with the new security model.\nShow No Lock Screen if Auto Logout = OFF.\nFixed send payment flows for with and without the authentication.", "committedDate": "2020-01-27T15:40:34Z", "type": "commit"}, {"oid": "7b16df3471d4c686d1c80549d3481677555599f7", "url": "https://github.com/dashevo/dash-wallet/commit/7b16df3471d4c686d1c80549d3481677555599f7", "message": "Fixed the crash when displaying QR code scanner from LockScreen on Android 10\nCrash description: \"cameraThread Only the original thread that created a view hierarchy can touch its views\"", "committedDate": "2020-01-29T19:34:25Z", "type": "commit"}, {"oid": "c377e9bd921ab84eca04afc79b241f46acc0ca25", "url": "https://github.com/dashevo/dash-wallet/commit/c377e9bd921ab84eca04afc79b241f46acc0ca25", "message": "Fixed the crash when verifying OLD pin after restoring wallet from file", "committedDate": "2020-01-30T10:11:26Z", "type": "commit"}, {"oid": "81fa5c862398def2edb001f0225c955b6f5ae373", "url": "https://github.com/dashevo/dash-wallet/commit/81fa5c862398def2edb001f0225c955b6f5ae373", "message": "Merge branch 'android-10-camera-crash' into redisign-keystore-introduction\n\n# Conflicts:\n#\twallet/res/values/strings-extra.xml", "committedDate": "2020-01-31T07:49:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA1OTUyNg==", "url": "https://github.com/dashevo/dash-wallet/pull/313#discussion_r375059526", "bodyText": "I would advise creating an interface so we don't tie this fragment to the SendCoinsActivity as this can cause some problems eventually.", "author": "sambarboza", "createdAt": "2020-02-05T04:58:55Z", "path": "wallet/src/de/schildbach/wallet/ui/send/SendCoinsFragment.java", "diffHunk": "@@ -158,7 +161,7 @@ public void onClick(final DialogInterface dialog, final int which) {\n     public void onAttach(final Context context) {\n         super.onAttach(context);\n \n-        this.activity = (AbstractBindServiceActivity) context;\n+        this.activity = (SendCoinsActivity) context;", "originalCommit": "81fa5c862398def2edb001f0225c955b6f5ae373", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI1MDkxOQ==", "url": "https://github.com/dashevo/dash-wallet/pull/313#discussion_r375250919", "bodyText": "Good point, however, in this case, I don't want to add additional complexity to already complex changeset. Let's leave it as it is for now.", "author": "tomasz-ludek", "createdAt": "2020-02-05T13:23:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA1OTUyNg=="}], "type": "inlineReview"}, {"oid": "b9ace74d4902f854f37bd6cc634aeb6e4b56b63f", "url": "https://github.com/dashevo/dash-wallet/commit/b9ace74d4902f854f37bd6cc634aeb6e4b56b63f", "message": "Merge branch 'redesign' into redisign-keystore-introduction\n\n# Conflicts:\n#\twallet/src/de/schildbach/wallet/ui/LockScreenActivity.kt\n#\twallet/src/de/schildbach/wallet/ui/SetPinActivity.kt\n#\twallet/src/de/schildbach/wallet/ui/VerifySeedActivity.kt\n#\twallet/src/de/schildbach/wallet/ui/WalletActivity.java", "committedDate": "2020-02-05T11:28:40Z", "type": "commit"}, {"oid": "2cbb160c5f16f70044f77d81fe238c84ba9c7b55", "url": "https://github.com/dashevo/dash-wallet/commit/2cbb160c5f16f70044f77d81fe238c84ba9c7b55", "message": "Minor code refactoring", "committedDate": "2020-02-05T13:17:21Z", "type": "commit"}]}