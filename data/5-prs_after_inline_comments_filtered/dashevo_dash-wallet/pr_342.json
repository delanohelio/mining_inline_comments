{"pr_number": 342, "pr_title": "NMA-301 Shortcut Button | Create Username", "pr_createdAt": "2020-02-28T11:21:17Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/342", "timeline": [{"oid": "85a277b84bf541d9488bf0901275c9484726f64d", "url": "https://github.com/dashevo/dash-wallet/commit/85a277b84bf541d9488bf0901275c9484726f64d", "message": "Added 'Join DashPay' quick action (always visible)", "committedDate": "2020-02-27T16:03:37Z", "type": "commit"}, {"oid": "03b3a05abeddbc014647c0c3a19291f841cc020c", "url": "https://github.com/dashevo/dash-wallet/commit/03b3a05abeddbc014647c0c3a19291f841cc020c", "message": "Added mock implementation of FundNewAccountActivity", "committedDate": "2020-02-28T08:17:17Z", "type": "commit"}, {"oid": "d71f24a9e34b3c147fa29119b20e27675eb64ece", "url": "https://github.com/dashevo/dash-wallet/commit/d71f24a9e34b3c147fa29119b20e27675eb64ece", "message": "Hiding 'Join DashPay' action when sync not completed and when balance is bellow minimum DashPay user creation fee", "committedDate": "2020-02-28T10:46:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMxNTQ4NQ==", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r387315485", "bodyText": "The sporkManager.addEventlistener and related code was removed because this line in particular was causing crashes in some cases when the app was installed and run on new devices through the Google Firebase or the Prelaunch Report mechanism.\nSince sporks were not used for anything in the app, I removed this code on the master branch at e237a37 (#334)", "author": "HashEngineering", "createdAt": "2020-03-03T21:51:26Z", "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "diffHunk": "@@ -763,6 +764,8 @@ public void onCreate() {\n         application.getWallet().addCoinsSentEventListener(Threading.SAME_THREAD, walletEventListener);\n         application.getWallet().addChangeEventListener(Threading.SAME_THREAD, walletEventListener);\n \n+        application.getWallet().getContext().sporkManager.addEventListener(sporkUpdatedEventListener, Threading.SAME_THREAD);\n+", "originalCommit": "d71f24a9e34b3c147fa29119b20e27675eb64ece", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMxNTczOA==", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r387315738", "bodyText": "Since sporks were not used for anything in the app, I removed this code on the master branch at e237a37 (#334)", "author": "HashEngineering", "createdAt": "2020-03-03T21:51:54Z", "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "diffHunk": "@@ -851,6 +854,8 @@ public void onDestroy() {\n         application.getWallet().removeCoinsSentEventListener(walletEventListener);\n         application.getWallet().removeCoinsReceivedEventListener(walletEventListener);\n \n+        application.getWallet().getContext().sporkManager.removeEventListener(sporkUpdatedEventListener);\n+", "originalCommit": "d71f24a9e34b3c147fa29119b20e27675eb64ece", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMxNTgzNw==", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r387315837", "bodyText": "Since sporks were not used for anything in the app, I removed this code on the master branch at e237a37 (#334)", "author": "HashEngineering", "createdAt": "2020-03-03T21:52:05Z", "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "diffHunk": "@@ -1037,4 +1042,14 @@ private int percentageSync() {\n     private void updateAppWidget() {\n         WalletBalanceWidgetProvider.updateWidgets(BlockchainServiceImpl.this, application.getWallet());\n     }\n+\n+    private SporkUpdatedEventListener sporkUpdatedEventListener = new SporkUpdatedEventListener() {\n+\n+        @Override\n+        public void onSporkUpdated(final SporkMessage sporkMessage) {\n+//            if (sporkMessage.getSporkID() == SporkManager.SPORK_22_PLATFORM_ENABLED) {\n+//                config.setShowJoinDashPay(true);\n+//            }\n+        }\n+    };", "originalCommit": "d71f24a9e34b3c147fa29119b20e27675eb64ece", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "245b2876940f34a886d2b035facd564767f77f9f", "url": "https://github.com/dashevo/dash-wallet/commit/245b2876940f34a886d2b035facd564767f77f9f", "message": "Removed obsolete SporkUpdatedEventListener", "committedDate": "2020-03-04T12:05:19Z", "type": "commit"}, {"oid": "aa90a5b8696472218d5468c40ac7d4dae28c160f", "url": "https://github.com/dashevo/dash-wallet/commit/aa90a5b8696472218d5468c40ac7d4dae28c160f", "message": "Support Android 4.4 (#350)\n\n* Made the app to work on KitKat (API level 19)\r\n\r\n* Switched OkHttp to the same version as in DashJ (3.12.3)\r\n\r\n* Fix crash when starting the app for first time on KitKat", "committedDate": "2020-03-06T16:59:19Z", "type": "commit"}, {"oid": "0ea5ebee2703d201f84d918f6c8c5cec9a658eab", "url": "https://github.com/dashevo/dash-wallet/commit/0ea5ebee2703d201f84d918f6c8c5cec9a658eab", "message": "Fix various UI issues (#349)\n\n* Replace 1 day with 24 hours \r\n\r\n* Change Set/Change Spending PIN to Set/Change PIN\r\n\r\n* Quick Action Buttons: Use simple break strategy and add ellipsize @ end\r\n\r\n* Lock Screen: Center \"Use your fingerprint\" text\r\n\r\n* Don't show trailing zeros on Dash amounts\r\n\r\nUse a default format for getFormat() in configuration that will be used\r\non the Home Screen and the Transaction Details screen.\r\n\r\n* Payments/Send Screen: Make entire row clickable\r\n\r\n* TransactionAdapter: Remove duplicate selectable_round_corner.xml\r\n\r\n* Payments/Sent Screen: Make selection darker and larger", "committedDate": "2020-03-06T22:50:36Z", "type": "commit"}, {"oid": "035e7ad5916cd2b72660a49c0789267db70b28fb", "url": "https://github.com/dashevo/dash-wallet/commit/035e7ad5916cd2b72660a49c0789267db70b28fb", "message": "Fix crash when displaying tx details on Android 4.4 (#351)\n\n* Fixed the crash when displaying transaction details on KitKat.\r\n\r\n* Made the transaction details dialog background translucent also on KitKat.", "committedDate": "2020-03-10T14:00:34Z", "type": "commit"}, {"oid": "10f34a67a47de59c7e0d69a33fb8b2858aa3c07f", "url": "https://github.com/dashevo/dash-wallet/commit/10f34a67a47de59c7e0d69a33fb8b2858aa3c07f", "message": "Prevent sending while syncing (#339)\n\n* Use Repository to store/update BlockchainState\r\n\r\n* Prevent progress rewind\r\n\r\n* Save BlockchainState into Room.\r\n\r\n- Listening to Room changes to update state in several screens.\r\n\r\n* Prevent sending from \"Amount\" screen.\r\n\r\n* Handle blockchain reset and restore as the same", "committedDate": "2020-03-10T22:19:25Z", "type": "commit"}, {"oid": "490922c8082076418639ca654085cdf0c6e49f55", "url": "https://github.com/dashevo/dash-wallet/commit/490922c8082076418639ca654085cdf0c6e49f55", "message": "Avoid app bar resizing when hiding/showing wallet balance (#354)\n\nCo-authored-by: Tomasz Ludek <tomasz@dash.org>", "committedDate": "2020-03-10T22:33:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQxMTIyOA==", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r391411228", "bodyText": "Can we remove this line?", "author": "sambarboza", "createdAt": "2020-03-12T05:41:34Z", "path": "wallet/src/de/schildbach/wallet/ui/WalletActivity.java", "diffHunk": "@@ -1036,11 +1064,14 @@ public void onEvent(SyncProgressEvent event) {\n             TextView syncPercentageView = findViewById(R.id.sync_status_percentage);\n \n             syncPercentageView.setText(percentage + \"%\");\n-            if (percentage == 100) {\n+            syncComplete = (percentage == 100);\n+            if (syncComplete) {\n                 syncPercentageView.setTextColor(getResources().getColor(R.color.success_green));\n                 syncStatusTitle.setText(R.string.sync_status_sync_title);\n                 syncStatusMessage.setText(R.string.sync_status_sync_completed);\n                 showSyncPane(R.id.sync_status_pane, false);\n+                syncComplete = true;", "originalCommit": "245b2876940f34a886d2b035facd564767f77f9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQzMjkxMA==", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r391432910", "bodyText": "Yeah, it doesn't make sense ;P\nStrange that Lint didn't warn me.\nRemoved, thanks!", "author": "tomasz-ludek", "createdAt": "2020-03-12T07:04:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQxMTIyOA=="}], "type": "inlineReview"}, {"oid": "f07ec4ab0070f5e0ce9f980cf32d1fdeb6b08ff7", "url": "https://github.com/dashevo/dash-wallet/commit/f07ec4ab0070f5e0ce9f980cf32d1fdeb6b08ff7", "message": "Minor code refactoring", "committedDate": "2020-03-12T07:03:37Z", "type": "commit"}, {"oid": "5f6002c2cabdf5945059fb767789b084b301e3fb", "url": "https://github.com/dashevo/dash-wallet/commit/5f6002c2cabdf5945059fb767789b084b301e3fb", "message": "Merge branch 'master' into join-dashpay-quick-action\n\n# Conflicts:\n#\twallet/src/de/schildbach/wallet/ui/WalletActivity.java", "committedDate": "2020-03-12T07:35:52Z", "type": "commit"}, {"oid": "9a840daff3069ed11be09ffa0ad3d78292339f60", "url": "https://github.com/dashevo/dash-wallet/commit/9a840daff3069ed11be09ffa0ad3d78292339f60", "message": "Minor optimisation to avoid complex condition checking when synchronization isn't complete", "committedDate": "2020-03-12T13:03:45Z", "type": "commit"}, {"oid": "0681354080cbafd808e583935787cbce257210ab", "url": "https://github.com/dashevo/dash-wallet/commit/0681354080cbafd808e583935787cbce257210ab", "message": "Minor improvement", "committedDate": "2020-03-12T13:37:47Z", "type": "commit"}]}