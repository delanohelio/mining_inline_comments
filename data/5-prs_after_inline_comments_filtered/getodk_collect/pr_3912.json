{"pr_number": 3912, "pr_title": "Fixed back button behavior in FormHierarchyActivity", "pr_createdAt": "2020-06-08T12:59:21Z", "pr_url": "https://github.com/getodk/collect/pull/3912", "timeline": [{"oid": "ecca59d049a6f5898fcfefeece52857f9a9ec2ff", "url": "https://github.com/getodk/collect/commit/ecca59d049a6f5898fcfefeece52857f9a9ec2ff", "message": "Fixed back button behavior", "committedDate": "2020-06-08T11:15:50Z", "type": "commit"}, {"oid": "6957f577f798fae6fb0bb0877affe3d9666c3cd3", "url": "https://github.com/getodk/collect/commit/6957f577f798fae6fb0bb0877affe3d9666c3cd3", "message": "Added tests", "committedDate": "2020-06-08T12:48:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAyODY3Mw==", "url": "https://github.com/getodk/collect/pull/3912#discussion_r437028673", "bodyText": "I don't love while(true), but the other option here would be a do-while and I like that even less so I agree with your choice.", "author": "lognaturel", "createdAt": "2020-06-08T22:08:45Z", "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormHierarchyActivity.java", "diffHunk": "@@ -746,6 +747,29 @@ protected void onBackPressedWithoutLogger() {\n         super.onBackPressed();\n     }\n \n+    private void navigateToTheLastRelevantIndex(FormController formController) {\n+        FormEntryController fec = new FormEntryController(new FormEntryModel(formController.getFormDef()));\n+        formController.jumpToIndex(startIndex);\n+\n+        // startIndex might no longer exist if it was a part of repeat group that has been removed\n+        while (true) {", "originalCommit": "6957f577f798fae6fb0bb0877affe3d9666c3cd3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzMTEzOA==", "url": "https://github.com/getodk/collect/pull/3912#discussion_r437031138", "bodyText": "I think this is a candidate for moving to JavaRosa's FormEntryController. It could become something like jumpToIndexOrFirstPriorAvailable. If you agree, please file an issue there. The two advantages are that it reduces complexity in Collect and that we would be able to use really fast unit tests for testing it.", "author": "lognaturel", "createdAt": "2020-06-08T22:15:13Z", "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormHierarchyActivity.java", "diffHunk": "@@ -746,6 +747,29 @@ protected void onBackPressedWithoutLogger() {\n         super.onBackPressed();\n     }\n \n+    private void navigateToTheLastRelevantIndex(FormController formController) {", "originalCommit": "6957f577f798fae6fb0bb0877affe3d9666c3cd3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ4NjczMQ==", "url": "https://github.com/getodk/collect/pull/3912#discussion_r437486731", "bodyText": "That seems fine I'll file an issue.", "author": "grzesiek2010", "createdAt": "2020-06-09T14:53:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzMTEzOA=="}], "type": "inlineReview"}, {"oid": "a6556f47ebb96a0f15d916414757cb69735070d2", "url": "https://github.com/getodk/collect/commit/a6556f47ebb96a0f15d916414757cb69735070d2", "message": "Fixed doubled dialog", "committedDate": "2020-06-15T18:36:18Z", "type": "commit"}]}