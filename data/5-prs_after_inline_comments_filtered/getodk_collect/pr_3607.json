{"pr_number": 3607, "pr_title": "Move `CollectServerClient` and `DownloadFormListTask` tests to Robolectric", "pr_createdAt": "2020-01-24T17:02:16Z", "pr_url": "https://github.com/getodk/collect/pull/3607", "timeline": [{"oid": "4125528dda07281be333fe30123f2228b38157f9", "url": "https://github.com/getodk/collect/commit/4125528dda07281be333fe30123f2228b38157f9", "message": "Move DownloadFormListTaskTest to Robolectric from instrumentation", "committedDate": "2020-01-22T16:36:55Z", "type": "commit"}, {"oid": "f01af225000adaf51191ae49d72e98baa05caa3d", "url": "https://github.com/getodk/collect/commit/f01af225000adaf51191ae49d72e98baa05caa3d", "message": "Use MockWebServerRule in DownloadFormListTaskTest", "committedDate": "2020-01-23T15:00:59Z", "type": "commit"}, {"oid": "ae9a62de850e06fa75d8b1afd61cfa68d5a3ca12", "url": "https://github.com/getodk/collect/commit/ae9a62de850e06fa75d8b1afd61cfa68d5a3ca12", "message": "Test FormListDownloader instead of task", "committedDate": "2020-01-23T15:27:43Z", "type": "commit"}, {"oid": "83f35e0e4a27ea7ad00b2a73495fcc03747ea874", "url": "https://github.com/getodk/collect/commit/83f35e0e4a27ea7ad00b2a73495fcc03747ea874", "message": "Remove CollectServerClientTest in instrumentation", "committedDate": "2020-01-24T14:53:15Z", "type": "commit"}, {"oid": "6894ccc6e52d4ba51ddff99e27a722f2e905fb49", "url": "https://github.com/getodk/collect/commit/6894ccc6e52d4ba51ddff99e27a722f2e905fb49", "message": "Rework CollectServerClientTest", "committedDate": "2020-01-24T15:17:47Z", "type": "commit"}, {"oid": "88c4ce8ee164438918088696655b22d2ff830a05", "url": "https://github.com/getodk/collect/commit/88c4ce8ee164438918088696655b22d2ff830a05", "message": "Rename CollectServerClient to point to it abstractign the OpenRosa API", "committedDate": "2020-01-24T15:42:02Z", "type": "commit"}, {"oid": "525ce1d8066426bdfeddfce2293753fe97f96351", "url": "https://github.com/getodk/collect/commit/525ce1d8066426bdfeddfce2293753fe97f96351", "message": "Reorganize http/openrosa package", "committedDate": "2020-01-24T15:48:33Z", "type": "commit"}, {"oid": "c4da31a4845ae3daf60ecc2c42b45bf7a1bb5fea", "url": "https://github.com/getodk/collect/commit/c4da31a4845ae3daf60ecc2c42b45bf7a1bb5fea", "message": "Remove SNI test\n\nThis looks like it had been designed to drive out a fix in the old\nODK Apache HTTP client. We could add a test to our OpenRosaHttpInterface\nbut it feels like overkill as SNI is supported by Java's own HttpURLConnection.\nI'd be very surprised if any http clients we use in the future have do not\ninclude SNI support given that's the case.", "committedDate": "2020-01-24T15:57:13Z", "type": "commit"}, {"oid": "52d102c6e62d57f2bd3ace113f09a38c8fd72b7e", "url": "https://github.com/getodk/collect/commit/52d102c6e62d57f2bd3ace113f09a38c8fd72b7e", "message": "Add note to state of the union about OpenRosaAPIClient", "committedDate": "2020-01-24T17:08:32Z", "type": "commit"}, {"oid": "52d102c6e62d57f2bd3ace113f09a38c8fd72b7e", "url": "https://github.com/getodk/collect/commit/52d102c6e62d57f2bd3ace113f09a38c8fd72b7e", "message": "Add note to state of the union about OpenRosaAPIClient", "committedDate": "2020-01-24T17:08:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjUzMTQxNA==", "url": "https://github.com/getodk/collect/pull/3607#discussion_r372531414", "bodyText": "Good cleanup. This test wouldn't work anyway because this domain no longer exists. As you say, it's not something that really needs to be tested anymore so I don't think any such services are around.", "author": "lognaturel", "createdAt": "2020-01-29T17:41:49Z", "path": "collect_app/src/androidTest/java/org/odk/collect/android/ServerNameIndicationTest.java", "diffHunk": "@@ -1,74 +0,0 @@\n-package org.odk.collect.android;\n-\n-import androidx.test.filters.Suppress;\n-import androidx.test.runner.AndroidJUnit4;\n-\n-import org.junit.Test;\n-import org.junit.runner.RunWith;\n-import org.odk.collect.android.openrosa.OpenRosaAPIClient;\n-import org.odk.collect.android.openrosa.HttpGetResult;\n-import org.odk.collect.android.openrosa.OpenRosaHttpInterface;\n-import org.odk.collect.android.utilities.WebCredentialsUtils;\n-\n-import java.io.BufferedReader;\n-import java.io.IOException;\n-import java.io.InputStream;\n-import java.io.InputStreamReader;\n-import java.net.URL;\n-\n-import javax.net.ssl.HttpsURLConnection;\n-\n-import static junit.framework.Assert.assertEquals;\n-import static junit.framework.Assert.fail;\n-import static org.odk.collect.android.support.CollectHelpers.getAppDependencyComponent;\n-\n-/**\n- * An on-device test for TLS server name indication support.\n- *\n- * @see <a href=\"https://github.com/opendatakit/collect/issues/199\">COLLECT-199</a>\n- */\n-@Suppress\n-@RunWith(AndroidJUnit4.class)\n-public class ServerNameIndicationTest {\n-\n-    private static final String SNI_URI = \"https://sni.velox.ch/\";", "originalCommit": "c4da31a4845ae3daf60ecc2c42b45bf7a1bb5fea", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}