{"pr_number": 4290, "pr_title": "Audio analytics", "pr_createdAt": "2020-12-10T12:52:26Z", "pr_url": "https://github.com/getodk/collect/pull/4290", "timeline": [{"oid": "65ec989f3619f9f2868b0eff30e47b6f7188f619", "url": "https://github.com/getodk/collect/commit/65ec989f3619f9f2868b0eff30e47b6f7188f619", "message": "Remove repeat analytics", "committedDate": "2020-12-09T15:38:06Z", "type": "commit"}, {"oid": "1311e54f6d2f99b70426c8ed297743cee4f598d4", "url": "https://github.com/getodk/collect/commit/1311e54f6d2f99b70426c8ed297743cee4f598d4", "message": "Send analytics event when audio player seek used", "committedDate": "2020-12-09T15:57:57Z", "type": "commit"}, {"oid": "7976a9b08bfada69ffb5dc85b8c627bf02ce61e5", "url": "https://github.com/getodk/collect/commit/7976a9b08bfada69ffb5dc85b8c627bf02ce61e5", "message": "Move URL question analytics out of WidgetFactory", "committedDate": "2020-12-09T16:09:45Z", "type": "commit"}, {"oid": "1674c3546cfbcf1d2df8b417d4838eda4e649b2c", "url": "https://github.com/getodk/collect/commit/1674c3546cfbcf1d2df8b417d4838eda4e649b2c", "message": "Add analytics event when audio question is shown", "committedDate": "2020-12-09T16:11:59Z", "type": "commit"}, {"oid": "158208b6d83f264a9f17ab541af9d06441fe7543", "url": "https://github.com/getodk/collect/commit/158208b6d83f264a9f17ab541af9d06441fe7543", "message": "Add event when audio recording is paused", "committedDate": "2020-12-09T16:21:54Z", "type": "commit"}, {"oid": "f9af66c90313948723536c33320771e42dbcc544", "url": "https://github.com/getodk/collect/commit/f9af66c90313948723536c33320771e42dbcc544", "message": "Add logging method to view model to make it simpler to log form events", "committedDate": "2020-12-09T16:34:46Z", "type": "commit"}, {"oid": "4a474d3e5a5c06ca9754d2581ca263188b67c943", "url": "https://github.com/getodk/collect/commit/4a474d3e5a5c06ca9754d2581ca263188b67c943", "message": "Use viewmodel for event", "committedDate": "2020-12-09T16:46:29Z", "type": "commit"}, {"oid": "9a7ce13ed172cd5258804dc4e05d345413d0a2ee", "url": "https://github.com/getodk/collect/commit/9a7ce13ed172cd5258804dc4e05d345413d0a2ee", "message": "Log analytics events when recording or choosing audio", "committedDate": "2020-12-09T18:37:45Z", "type": "commit"}, {"oid": "333c78ee2dd3303701a1b29a16124e6655ffe32a", "url": "https://github.com/getodk/collect/commit/333c78ee2dd3303701a1b29a16124e6655ffe32a", "message": "Log analytics event when question answered during recording", "committedDate": "2020-12-10T11:41:51Z", "type": "commit"}, {"oid": "fb098383b171467c277bac80de7c9676d8ca66c1", "url": "https://github.com/getodk/collect/commit/fb098383b171467c277bac80de7c9676d8ca66c1", "message": "Add analytics event for when user opts in to using internal recording", "committedDate": "2020-12-10T11:57:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDIyMzQ3OA==", "url": "https://github.com/getodk/collect/pull/4290#discussion_r540223478", "bodyText": "We initially talked abut an event for when an audio question (using internal) recording appeared in a field-list. I realized it was actually easier to just track the underlying behaviour we were interested in here.", "author": "seadowg", "createdAt": "2020-12-10T14:42:53Z", "path": "collect_app/src/main/java/org/odk/collect/android/analytics/AnalyticsEvents.java", "diffHunk": "@@ -153,4 +147,37 @@ private AnalyticsEvents() {\n      * Track usage of legacy Aggregate < 1 form list API code paths.\n      */\n     public static final String LEGACY_FORM_LIST = \"LegacyFormList\";\n+\n+    /**\n+     * Tracks how often the audio player seek bar is used.\n+     */\n+    public static final String AUDIO_PLAYER_SEEK = \"AudioPlayerSeek\";\n+\n+    /**\n+     * Tracks how many forms include an audio question.\n+     */\n+    public static final String AUDIO_QUESTION = \"AudioQuestion\";\n+\n+    /**\n+     * Tracks how often pause action is used while recording audio\n+     */\n+    public static final String AUDIO_RECORDING_PAUSE = \"AudioRecordingPause\";\n+\n+    /**\n+     * Tracks usage or internal recording vs external recording vs choosing files for\n+     * audio question\n+     */\n+    public static final String AUDIO_RECORDING_INTERNAL = \"AudioRecordingInternal\";\n+    public static final String AUDIO_RECORDING_EXTERNAL = \"AudioRecordingExternal\";\n+    public static final String AUDIO_RECORDING_CHOOSE = \"AudioRecordingChoose\";\n+\n+    /**\n+     * Tracks how often questions are answered while an audio recording is being made\n+     */\n+    public static final String ANSWER_WHILE_RECORDING = \"AnswerWhileRecording\";", "originalCommit": "fb098383b171467c277bac80de7c9676d8ca66c1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDIyNTE4NA==", "url": "https://github.com/getodk/collect/pull/4290#discussion_r540225184", "bodyText": "Rather than having to pass the (or grab statically) form identifier hash around it seemed nice to just encapsulate the logging on the view model here. I think we'd want a FormEventLogger interface if we were logging inside a widget (or anywhere it doesn't make sense to have a ViewModel) but I didn't run into that.", "author": "seadowg", "createdAt": "2020-12-10T14:45:01Z", "path": "collect_app/src/main/java/org/odk/collect/android/formentry/FormEntryViewModel.java", "diffHunk": "@@ -164,19 +156,34 @@ public void openHierarchy() {\n         formController.getAuditEventLogger().logEvent(AuditEvent.AuditEventType.HIERARCHY, true, clock.getCurrentTime());\n     }\n \n+    public void logFormEvent(String event) {", "originalCommit": "fb098383b171467c277bac80de7c9676d8ca66c1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "71f6782c1ace906c438f70119e6be81b430ca051", "url": "https://github.com/getodk/collect/commit/71f6782c1ace906c438f70119e6be81b430ca051", "message": "Remove Audio question event and use new style for URL question event", "committedDate": "2020-12-10T16:27:50Z", "type": "commit"}]}