{"pr_number": 1063, "pr_title": "Merge master to dev post 3.0.4", "pr_createdAt": "2020-09-29T01:26:57Z", "pr_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1063", "timeline": [{"oid": "c9f3b6ec55c50bb8b2222c7f0c59d2d32ba26b0a", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/c9f3b6ec55c50bb8b2222c7f0c59d2d32ba26b0a", "message": "Update changelog for 3.0.4", "committedDate": "2020-09-28T17:00:56Z", "type": "commit"}, {"oid": "b093c6ed7e283526e79e8afa44464e881b421af2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b093c6ed7e283526e79e8afa44464e881b421af2", "message": "Become less dependent on the execution map\n\nIt is possible that the command objects are being mutated\nunderneath our execution.  If that is happening, it will\ncause three issues:\n * Null pointer exceptions when map.remove is run.\n * Command futures will never complete.\n * The execution map will fill unboundedly.\n\nIn order to fix this, insure that the resultFuture is\ncompleted in every case.  In addition, save the identity\nof the command that initiated the call, and if removal fails,\nindicating that the command has been mutated and its hash has\naltered, scan the map for a command with the same identity\nand remove it.", "committedDate": "2020-09-28T17:11:32Z", "type": "commit"}, {"oid": "7e79ae1e288b4fd4241dc684089446367b5db5fe", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7e79ae1e288b4fd4241dc684089446367b5db5fe", "message": "Stubbing out instrumented test", "committedDate": "2020-09-28T17:11:53Z", "type": "commit"}, {"oid": "ee040f37a02c56a4c47ba263a9860f7fef46fabc", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ee040f37a02c56a4c47ba263a9860f7fef46fabc", "message": "Parameterize the test command", "committedDate": "2020-09-28T17:12:06Z", "type": "commit"}, {"oid": "0f5aa13a995e4dbbb6525f8745a4583cb76bfae0", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0f5aa13a995e4dbbb6525f8745a4583cb76bfae0", "message": "Adding test stubs", "committedDate": "2020-09-28T17:12:17Z", "type": "commit"}, {"oid": "440752caa40360b2e31d7d5715696e9672fd2fc5", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/440752caa40360b2e31d7d5715696e9672fd2fc5", "message": "One fix that I recall, some test descriptions.", "committedDate": "2020-09-28T17:12:28Z", "type": "commit"}, {"oid": "a90a3bbdc5bcb7d3bc9426db16331f1cbafe17f8", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a90a3bbdc5bcb7d3bc9426db16331f1cbafe17f8", "message": "Add a value to testcommand.", "committedDate": "2020-09-28T17:12:51Z", "type": "commit"}, {"oid": "7cd2edf596231b1cb4cdefca537986b3ee31598a", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7cd2edf596231b1cb4cdefca537986b3ee31598a", "message": "Latched command for stalling execution.", "committedDate": "2020-09-28T17:13:01Z", "type": "commit"}, {"oid": "b395a2e0c5f244cdf6acbe83e5408055e13f32ec", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b395a2e0c5f244cdf6acbe83e5408055e13f32ec", "message": "Minor formatting", "committedDate": "2020-09-28T17:13:11Z", "type": "commit"}, {"oid": "0d1d6aa193ae7395503fb9bd4a339166f7cd8317", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0d1d6aa193ae7395503fb9bd4a339166f7cd8317", "message": "Fix the code for unstable keys.", "committedDate": "2020-09-28T17:14:47Z", "type": "commit"}, {"oid": "fbfad2f18c72a98730b02d820e7fdfcf51149deb", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/fbfad2f18c72a98730b02d820e7fdfcf51149deb", "message": "Change to foreach loop style.", "committedDate": "2020-09-28T17:15:02Z", "type": "commit"}, {"oid": "215557de097ce203967afe7ca613eeaa022373a4", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/215557de097ce203967afe7ca613eeaa022373a4", "message": "Add a better comment explaining cleanMap..", "committedDate": "2020-09-28T17:15:13Z", "type": "commit"}, {"oid": "d170fd854cce56cb346662a7b3dccfc932e0f1df", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/d170fd854cce56cb346662a7b3dccfc932e0f1df", "message": "Add TODO with link to work item.", "committedDate": "2020-09-28T17:15:23Z", "type": "commit"}, {"oid": "2091892a1aa560e2893b59b7e55b8a4f5339cd7a", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/2091892a1aa560e2893b59b7e55b8a4f5339cd7a", "message": "Access the map size for the test method under the map lock.", "committedDate": "2020-09-28T17:15:33Z", "type": "commit"}, {"oid": "a15b9e0b6837a64e99ef335d0f1fe51552ab7220", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a15b9e0b6837a64e99ef335d0f1fe51552ab7220", "message": "Add a new type of future to indicate whether a task has been compltely retired.", "committedDate": "2020-09-28T17:17:55Z", "type": "commit"}, {"oid": "a55b869082f50abd923b1c4b8d08ee101e3d4bd8", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a55b869082f50abd923b1c4b8d08ee101e3d4bd8", "message": "Add the FinalizableResultFuture class.", "committedDate": "2020-09-28T17:18:08Z", "type": "commit"}, {"oid": "5eed69a85d78b912acf9fee529e5f699363955e2", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5eed69a85d78b912acf9fee529e5f699363955e2", "message": "Fix deadlock due to careless synchronization.", "committedDate": "2020-09-28T17:18:19Z", "type": "commit"}, {"oid": "0991253eceb1aa01abb37426c3f7f531e4768768", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0991253eceb1aa01abb37426c3f7f531e4768768", "message": "Update common/src/main/java/com/microsoft/identity/common/internal/result/ResultFuture.java\r\n\r\nDelete blank line.", "committedDate": "2020-09-28T17:18:28Z", "type": "commit"}, {"oid": "96ad614b366917dc4632bab7db8ae32c89125648", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/96ad614b366917dc4632bab7db8ae32c89125648", "message": "Remove suppresswarnings annotations (not present on this branch, but in\nthe cherry-picked commits)", "committedDate": "2020-09-28T17:21:06Z", "type": "commit"}, {"oid": "a0beb2314fbb70070530e88a4884a2190a9c35f3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a0beb2314fbb70070530e88a4884a2190a9c35f3", "message": "Update common/src/main/java/com/microsoft/identity/common/internal/controllers/CommandDispatcher.java\n\nCo-authored-by: AdamBJohnsonx <63813613+AdamBJohnsonx@users.noreply.github.com>", "committedDate": "2020-09-28T17:39:29Z", "type": "commit"}, {"oid": "71e77f6daa1ecec3a84bc2ad9baedf5fde953ccc", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/71e77f6daa1ecec3a84bc2ad9baedf5fde953ccc", "message": "Merge pull request #1060 from AzureAD/iambmelt/apply-1055-3.0.4\n\nApply Fixes from #1055", "committedDate": "2020-09-28T18:04:58Z", "type": "commit"}, {"oid": "9be909dbe2017e99bafeddb20c1411e9fe84caa6", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9be909dbe2017e99bafeddb20c1411e9fe84caa6", "message": "Update version prop for 3.0.4", "committedDate": "2020-09-28T18:13:23Z", "type": "commit"}, {"oid": "abfee829a41441d73eab573bdd7f3058ea3c1913", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/abfee829a41441d73eab573bdd7f3058ea3c1913", "message": "Update to RC1", "committedDate": "2020-09-28T18:17:12Z", "type": "commit"}, {"oid": "2c9b78a64de454fa580a927312f02099b7fb9eb8", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/2c9b78a64de454fa580a927312f02099b7fb9eb8", "message": "Update Device.java to 2.0.2-RC1 for MSAL", "committedDate": "2020-09-28T18:17:59Z", "type": "commit"}, {"oid": "b72619d8fd77efb5af998c06663dca8e00331812", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/b72619d8fd77efb5af998c06663dca8e00331812", "message": "Merge pull request #1061 from AzureAD/iambmelt/update-vers-3.0.4\n\nUpdate version numbers for 3.0.4 release", "committedDate": "2020-09-28T18:21:19Z", "type": "commit"}, {"oid": "6d390d3b1eb71a9b71ad3f2214d768bc8bf2c618", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/6d390d3b1eb71a9b71ad3f2214d768bc8bf2c618", "message": "Merge pull request #1062 from AzureAD/iambmelt/merge-master-to-release-3.0.4\n\nMerging commits from master to release/3.0.4", "committedDate": "2020-09-28T18:26:46Z", "type": "commit"}, {"oid": "2a1c746de9a036abf03c9e013ff725e7df3f69ba", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/2a1c746de9a036abf03c9e013ff725e7df3f69ba", "message": "Remove RCs after automation PASS", "committedDate": "2020-09-28T20:57:32Z", "type": "commit"}, {"oid": "0d092b33fe3dc454a272859851909cbf583aebc3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0d092b33fe3dc454a272859851909cbf583aebc3", "message": "Merge pull request #1059 from AzureAD/release/3.0.4\n\nRelease 3.0.4", "committedDate": "2020-09-28T21:28:27Z", "type": "commit"}, {"oid": "a161d29de67c08d10f066cbe554539615e2bc51d", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a161d29de67c08d10f066cbe554539615e2bc51d", "message": "Merge branch 'dev' into iambmelt/merge-master-to-dev-post-3.0.4", "committedDate": "2020-09-29T01:25:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMyNDIyOA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1063#discussion_r496324228", "bodyText": "The string Adam added in the other pr is gone.", "author": "rpdome", "createdAt": "2020-09-29T01:34:21Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/controllers/CommandDispatcher.java", "diffHunk": "@@ -89,6 +89,7 @@\n      * Remove all keys that are the command reference from the executing command map.  Since if they key has\n      * been changed, remove will not work, construct a new map and add all keys that are not identically\n      * that key into the new map.", "originalCommit": "a161d29de67c08d10f066cbe554539615e2bc51d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMyNzM5Ng==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1063#discussion_r496327396", "bodyText": "I'll cherry-pick that in, thanks @rpdome", "author": "iambmelt", "createdAt": "2020-09-29T01:46:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMyNDIyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMyNzg4Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1063#discussion_r496327887", "bodyText": "e8f3223", "author": "iambmelt", "createdAt": "2020-09-29T01:48:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMyNDIyOA=="}], "type": "inlineReview"}, {"oid": "e8f3223dd14c48c78fa198d570948c0aebbd20c9", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/e8f3223dd14c48c78fa198d570948c0aebbd20c9", "message": "Update common/src/main/java/com/microsoft/identity/common/internal/controllers/CommandDispatcher.java\n\nCo-authored-by: AdamBJohnsonx <63813613+AdamBJohnsonx@users.noreply.github.com>", "committedDate": "2020-09-29T01:47:50Z", "type": "commit"}]}