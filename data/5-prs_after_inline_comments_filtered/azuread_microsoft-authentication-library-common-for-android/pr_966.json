{"pr_number": 966, "pr_title": "DCF API-Side PR", "pr_createdAt": "2020-07-20T16:46:01Z", "pr_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966", "timeline": [{"oid": "a720f101ca85ec31976603071efb8de1bd2a9cf3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a720f101ca85ec31976603071efb8de1bd2a9cf3", "message": "Preparing API side of DCF protocol, added some skeleton classes", "committedDate": "2020-07-15T02:39:20Z", "type": "commit"}, {"oid": "0c26214a1601bfbdd685c892556e86815997ce91", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/0c26214a1601bfbdd685c892556e86815997ce91", "message": "Merge branch 'dev' of https://github.com/AzureAD/microsoft-authentication-library-common-for-android into t-fadura/dcf-main", "committedDate": "2020-07-20T12:59:01Z", "type": "commit"}, {"oid": "a5323a4193bdd225c61dc9993d8289cb7c5c94da", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/a5323a4193bdd225c61dc9993d8289cb7c5c94da", "message": "DCF Testing constant added, enables testing in MSAL for DCF", "committedDate": "2020-07-20T15:03:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU1NDExMg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r457554112", "bodyText": "Do we need this class? Doesn't seem to have anything", "author": "shahzaibj", "createdAt": "2020-07-20T16:52:08Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/DeviceCodeFlowCommandParameters.java", "diffHunk": "@@ -0,0 +1,33 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands.parameters;\n+\n+import lombok.EqualsAndHashCode;\n+import lombok.Getter;\n+import lombok.experimental.SuperBuilder;\n+\n+@Getter\n+@EqualsAndHashCode(callSuper = true)\n+@SuperBuilder(toBuilder = true)\n+public class DeviceCodeFlowCommandParameters extends TokenCommandParameters {", "originalCommit": "a5323a4193bdd225c61dc9993d8289cb7c5c94da", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU3OTA3Mg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r457579072", "bodyText": "I decided to do it this way for two reasons:\n\n\ngetAuthorizationRequest() in BaseController takes in a TokenCommandParameters object as parameter, so I can't create a command parameters class for DCF that only extends CommandParameters and add the needed fields.\n\n\nI looked through the code and it seemed like there weren't any commands that received a TokenCommandParameters object from PublicClientApplication, so I figured it would make more sense to create a new class that specifically maps to DCF. It also allows future developers to add DCF-specific parameters here if they want to implement any extra functionality.", "author": "t-fadura", "createdAt": "2020-07-20T17:35:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU1NDExMg=="}], "type": "inlineReview"}, {"oid": "4bf26bdb76805a73f34dad1bed8217e085a2a953", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4bf26bdb76805a73f34dad1bed8217e085a2a953", "message": "Merge branch 'dev' into t-fadura/dcf-main", "committedDate": "2020-07-21T12:22:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwMTY5Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458201697", "bodyText": "I'd probably just spell out the name here for clarity.  If not, casing for acronyms is the same as words.  https://source.android.com/setup/contribute/code-style.  I'd also add some javadoc here which also helps with clarity.  You spell it out below ;-)", "author": "shoatman", "createdAt": "2020-07-21T15:47:45Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DCFCommandCallback.java", "diffHunk": "@@ -0,0 +1,29 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands;\n+\n+import androidx.annotation.NonNull;\n+\n+public interface DCFCommandCallback<T, U> extends CommandCallback<T, U> {", "originalCommit": "4bf26bdb76805a73f34dad1bed8217e085a2a953", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwNTgyMA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458205820", "bodyText": "Fair point, I missed that", "author": "t-fadura", "createdAt": "2020-07-21T15:53:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwMTY5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwMjEwMA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458202100", "bodyText": "nit: javdoc", "author": "shoatman", "createdAt": "2020-07-21T15:48:19Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java", "diffHunk": "@@ -0,0 +1,64 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands;\n+\n+import android.content.Intent;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.common.internal.commands.parameters.DeviceCodeFlowCommandParameters;\n+import com.microsoft.identity.common.internal.controllers.BaseController;\n+import com.microsoft.identity.common.internal.result.AcquireTokenResult;\n+\n+public class DeviceCodeFlowCommand extends TokenCommand {", "originalCommit": "4bf26bdb76805a73f34dad1bed8217e085a2a953", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwMjk4Ng==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458202986", "bodyText": "take a look at field naming conventions: https://source.android.com/setup/contribute/code-style#follow-field-naming-conventions.  I'd also consider spelling the variable name out as well.", "author": "shoatman", "createdAt": "2020-07-21T15:49:32Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java", "diffHunk": "@@ -0,0 +1,64 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands;\n+\n+import android.content.Intent;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.common.internal.commands.parameters.DeviceCodeFlowCommandParameters;\n+import com.microsoft.identity.common.internal.controllers.BaseController;\n+import com.microsoft.identity.common.internal.result.AcquireTokenResult;\n+\n+public class DeviceCodeFlowCommand extends TokenCommand {\n+    /**\n+     * Relevant error codes and messages go here\n+     */\n+\n+    public static DCFCommandCallback dcfCallback;", "originalCommit": "4bf26bdb76805a73f34dad1bed8217e085a2a953", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3NjM1Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458276357", "bodyText": "nit: rename to userCode", "author": "shahzaibj", "createdAt": "2020-07-21T17:42:50Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DCFCommandCallback.java", "diffHunk": "@@ -0,0 +1,29 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands;\n+\n+import androidx.annotation.NonNull;\n+\n+public interface DCFCommandCallback<T, U> extends CommandCallback<T, U> {\n+    void getUserCode(@NonNull String vUri, @NonNull String user_code, @NonNull String message);", "originalCommit": "4bf26bdb76805a73f34dad1bed8217e085a2a953", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5MjU0Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458292547", "bodyText": "I've taken into account the suggestions you made in the design doc PR (including this one). These will be reflected in a commit i'll be pushing soon.", "author": "t-fadura", "createdAt": "2020-07-21T18:09:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3NjM1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3ODczMw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458278733", "bodyText": "Why is this static? More importantly we probably don't even need this field. Why is it here?", "author": "shahzaibj", "createdAt": "2020-07-21T17:46:35Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java", "diffHunk": "@@ -0,0 +1,64 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands;\n+\n+import android.content.Intent;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.common.internal.commands.parameters.DeviceCodeFlowCommandParameters;\n+import com.microsoft.identity.common.internal.controllers.BaseController;\n+import com.microsoft.identity.common.internal.result.AcquireTokenResult;\n+\n+public class DeviceCodeFlowCommand extends TokenCommand {\n+    /**\n+     * Relevant error codes and messages go here\n+     */\n+\n+    public static DCFCommandCallback dcfCallback;", "originalCommit": "4bf26bdb76805a73f34dad1bed8217e085a2a953", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5MjAyMg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458292022", "bodyText": "I added this field for testing with a shadow class. Making it public made it possible for me to fetch the callback object outside of the command class. I essentially wanted to be able to call the callback from within my shadow class.", "author": "t-fadura", "createdAt": "2020-07-21T18:08:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3ODczMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQxMDEyNg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458410126", "bodyText": "Ended up deleting the static field.", "author": "t-fadura", "createdAt": "2020-07-21T21:52:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3ODczMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTIyOA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458279228", "bodyText": "This should be DcfCommandCallback", "author": "shahzaibj", "createdAt": "2020-07-21T17:47:19Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java", "diffHunk": "@@ -0,0 +1,64 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands;\n+\n+import android.content.Intent;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.common.internal.commands.parameters.DeviceCodeFlowCommandParameters;\n+import com.microsoft.identity.common.internal.controllers.BaseController;\n+import com.microsoft.identity.common.internal.result.AcquireTokenResult;\n+\n+public class DeviceCodeFlowCommand extends TokenCommand {\n+    /**\n+     * Relevant error codes and messages go here\n+     */\n+\n+    public static DCFCommandCallback dcfCallback;\n+\n+    public DeviceCodeFlowCommand(@NonNull DeviceCodeFlowCommandParameters parameters,\n+                                 @NonNull BaseController controller,\n+                                 @NonNull CommandCallback callback,", "originalCommit": "4bf26bdb76805a73f34dad1bed8217e085a2a953", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTQyNQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458279425", "bodyText": "This should be taken care of by the parent", "author": "shahzaibj", "createdAt": "2020-07-21T17:47:34Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java", "diffHunk": "@@ -0,0 +1,64 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands;\n+\n+import android.content.Intent;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.common.internal.commands.parameters.DeviceCodeFlowCommandParameters;\n+import com.microsoft.identity.common.internal.controllers.BaseController;\n+import com.microsoft.identity.common.internal.result.AcquireTokenResult;\n+\n+public class DeviceCodeFlowCommand extends TokenCommand {\n+    /**\n+     * Relevant error codes and messages go here\n+     */\n+\n+    public static DCFCommandCallback dcfCallback;\n+\n+    public DeviceCodeFlowCommand(@NonNull DeviceCodeFlowCommandParameters parameters,\n+                                 @NonNull BaseController controller,\n+                                 @NonNull CommandCallback callback,\n+                                 @NonNull String publicApiId) {\n+        super(parameters, controller, callback, publicApiId);\n+\n+        dcfCallback = (DCFCommandCallback) callback;", "originalCommit": "4bf26bdb76805a73f34dad1bed8217e085a2a953", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5OTE3Mg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458299172", "bodyText": "I'm not sure what the better way to do this is. If I change the type of the parameter to DeviceCodeFlowCommandCallback, would that be enough?", "author": "t-fadura", "createdAt": "2020-07-21T18:20:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTQyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTgyNQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458279825", "bodyText": "We'll need to double check if we can use this number.....I'll check that and let you know", "author": "shahzaibj", "createdAt": "2020-07-21T17:48:15Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/eststelemetry/PublicApiId.java", "diffHunk": "@@ -30,6 +30,7 @@\n     //==============================================================================================\n     public static final String PCA_ACQUIRE_TOKEN_SILENT_WITH_PARAMETERS = \"21\";\n     public static final String PCA_ACQUIRE_TOKEN_SILENT_ASYNC_WITH_PARAMETERS = \"22\";\n+    public static final String DEVICE_CODE_FLOW_CALLBACK = \"30\";", "originalCommit": "4bf26bdb76805a73f34dad1bed8217e085a2a953", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI4NDI3Mw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458284273", "bodyText": "We can't use this....it is already used by iOS and this range is actually for silent flows. The range for Device Code Flow public API is 600-699. The following are already in use:\n\n\n\nJava\nAcquireToken(DeviceCodeParameters)\n620\n\n\n\n\nPython\nacquire_token_by_device_flow\n622\n\n\n.net\nAcquireTokenByDeviceCode\n1008\n\n\nNode\nmsal-node/acquireTokenByDeviceCode\n671\n\n\n\nNot quite sure why .net is using a number outside the range, but I'm thinking we can pick anything between 600-699. May be 650? I'll let you decide what you want \ud83d\ude01\nWe have a doc (Excel sheet) with all of these public API ids across platforms. If you don't have that and/or would like to see it, DM me and I will send that over to you via Teams.", "author": "shahzaibj", "createdAt": "2020-07-21T17:55:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTgyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5NjU3Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458296577", "bodyText": "Ok! I'll change it to 650. I'll ping you on teams, too.", "author": "t-fadura", "createdAt": "2020-07-21T18:16:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI3OTgyNQ=="}], "type": "inlineReview"}, {"oid": "99c848ecfd73dd4bef695e482b740eead2639e49", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/99c848ecfd73dd4bef695e482b740eead2639e49", "message": "Suggestions from team", "committedDate": "2020-07-21T18:22:09Z", "type": "commit"}, {"oid": "77ad510114f602388c1e65021a0af9d1496a925b", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/77ad510114f602388c1e65021a0af9d1496a925b", "message": "Merge branch 't-fadura/dcf-main' of https://github.com/AzureAD/microsoft-authentication-library-common-for-android into t-fadura/dcf-main", "committedDate": "2020-07-21T18:24:01Z", "type": "commit"}, {"oid": "6ec1c0c0d89f928c755400460f7c0e182511f0ce", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/6ec1c0c0d89f928c755400460f7c0e182511f0ce", "message": "removed static field in DeviceCodeFlowCommand", "committedDate": "2020-07-21T21:50:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQxNDIyMQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458414221", "bodyText": "I believe this is not needed", "author": "shahzaibj", "createdAt": "2020-07-21T22:01:17Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java", "diffHunk": "@@ -0,0 +1,67 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands;\n+\n+import android.content.Intent;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.common.internal.commands.parameters.DeviceCodeFlowCommandParameters;\n+import com.microsoft.identity.common.internal.controllers.BaseController;\n+import com.microsoft.identity.common.internal.result.AcquireTokenResult;\n+\n+/**\n+ * This command is used to execute the device code flow protocol.\n+ * Takes in a parameters object containing the  desired access scopes along and returns\n+ * a token result.\n+ * Class also includes some pre-defined error codes and messages to be used in\n+ * exception handling.\n+ */\n+public class DeviceCodeFlowCommand extends TokenCommand {\n+    /**\n+     * Relevant error codes and messages go here\n+     */", "originalCommit": "6ec1c0c0d89f928c755400460f7c0e182511f0ce", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQxNDQwOA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458414408", "bodyText": "can add more details as to when this TODO will resolve", "author": "shahzaibj", "createdAt": "2020-07-21T22:01:43Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java", "diffHunk": "@@ -0,0 +1,67 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands;\n+\n+import android.content.Intent;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.microsoft.identity.common.internal.commands.parameters.DeviceCodeFlowCommandParameters;\n+import com.microsoft.identity.common.internal.controllers.BaseController;\n+import com.microsoft.identity.common.internal.result.AcquireTokenResult;\n+\n+/**\n+ * This command is used to execute the device code flow protocol.\n+ * Takes in a parameters object containing the  desired access scopes along and returns\n+ * a token result.\n+ * Class also includes some pre-defined error codes and messages to be used in\n+ * exception handling.\n+ */\n+public class DeviceCodeFlowCommand extends TokenCommand {\n+    /**\n+     * Relevant error codes and messages go here\n+     */\n+\n+    public DeviceCodeFlowCommand(@NonNull DeviceCodeFlowCommandParameters parameters,\n+                                 @NonNull BaseController controller,\n+                                 @NonNull DeviceCodeFlowCommandCallback callback,\n+                                 @NonNull String publicApiId) {\n+        super(parameters, controller, callback, publicApiId);\n+    }\n+\n+    @Override\n+    public AcquireTokenResult execute() throws Exception {\n+        // TODO", "originalCommit": "6ec1c0c0d89f928c755400460f7c0e182511f0ce", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQxNDk4Mg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/966#discussion_r458414982", "bodyText": "nit: rename to DEVICE_CODE_FLOW_WITH_CALLBACK to follow the same pattern as other consants", "author": "shahzaibj", "createdAt": "2020-07-21T22:03:07Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/eststelemetry/PublicApiId.java", "diffHunk": "@@ -105,4 +105,12 @@\n     public static final String MULTIPLE_ACCOUNT_PCA_REMOVE_ACCOUNT_WITH_ACCOUNT_CALLBACK = \"930\";\n \n     //endregion\n+\n+    // region Device Code Flow\n+\n+    // PublicClientApplication\n+    //==============================================================================================\n+    public static final String DEVICE_CODE_FLOW_CALLBACK = \"650\";", "originalCommit": "6ec1c0c0d89f928c755400460f7c0e182511f0ce", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "83208bd67f2957effd50b3d22ee823fd0800d3ca", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/83208bd67f2957effd50b3d22ee823fd0800d3ca", "message": "More fixes from suggestions", "committedDate": "2020-07-21T22:13:12Z", "type": "commit"}]}