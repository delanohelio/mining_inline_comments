{"pr_number": 5658, "pr_title": "6014: Update central repository database creation to make personas ta\u2026", "pr_createdAt": "2020-02-24T18:41:34Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5658", "timeline": [{"oid": "7de33d4b35ae2c9c1c307ad293707cdf8447a73e", "url": "https://github.com/sleuthkit/autopsy/commit/7de33d4b35ae2c9c1c307ad293707cdf8447a73e", "message": "6014: Update central repository database creation to make personas tables.", "committedDate": "2020-02-24T18:40:09Z", "type": "commit"}, {"oid": "29c3cb6c25720abe750f3a323587a0316953116b", "url": "https://github.com/sleuthkit/autopsy/commit/29c3cb6c25720abe750f3a323587a0316953116b", "message": "Addressed Codacy comment.", "committedDate": "2020-02-24T19:16:37Z", "type": "commit"}, {"oid": "b78aa977c2672d9c492d144a22d6c4923ba3fb58", "url": "https://github.com/sleuthkit/autopsy/commit/b78aa977c2672d9c492d144a22d6c4923ba3fb58", "message": "6014: Create accounts & persona tables\n\n - Added an account_id column to X_instances tables.", "committedDate": "2020-02-25T19:46:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU1NjI4Mw==", "url": "https://github.com/sleuthkit/autopsy/pull/5658#discussion_r383556283", "bodyText": "I'm not comfortable with this method as a public method. Originally, I thought we might give it package access. I'm tempted to make it a private method in RdbmsCentralRepoFactory, except that I think we will need the loop for the accounts in a separate upgrade class.", "author": "rcordovano", "createdAt": "2020-02-24T22:37:03Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/CorrelationAttributeInstance.java", "diffHunk": "@@ -238,18 +242,30 @@ public Long getFileObjectId() {\n         \"CorrelationType.IMSI.displayName=IMSI Number\",\n         \"CorrelationType.ICCID.displayName=ICCID Number\"})\n     public static List<CorrelationAttributeInstance.Type> getDefaultCorrelationTypes() throws CentralRepoException {\n-        List<CorrelationAttributeInstance.Type> DEFAULT_CORRELATION_TYPES = new ArrayList<>();\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(FILES_TYPE_ID, Bundle.CorrelationType_FILES_displayName(), \"file\", true, true)); // NON-NLS\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(DOMAIN_TYPE_ID, Bundle.CorrelationType_DOMAIN_displayName(), \"domain\", true, true)); // NON-NLS\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(EMAIL_TYPE_ID, Bundle.CorrelationType_EMAIL_displayName(), \"email_address\", true, true)); // NON-NLS\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(PHONE_TYPE_ID, Bundle.CorrelationType_PHONE_displayName(), \"phone_number\", true, true)); // NON-NLS\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(USBID_TYPE_ID, Bundle.CorrelationType_USBID_displayName(), \"usb_devices\", true, true)); // NON-NLS\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(SSID_TYPE_ID, Bundle.CorrelationType_SSID_displayName(), \"wireless_networks\", true, true)); // NON-NLS\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(MAC_TYPE_ID, Bundle.CorrelationType_MAC_displayName(), \"mac_address\", true, true)); //NON-NLS\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(IMEI_TYPE_ID, Bundle.CorrelationType_IMEI_displayName(), \"imei_number\", true, true)); //NON-NLS\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(IMSI_TYPE_ID, Bundle.CorrelationType_IMSI_displayName(), \"imsi_number\", true, true)); //NON-NLS\n-        DEFAULT_CORRELATION_TYPES.add(new CorrelationAttributeInstance.Type(ICCID_TYPE_ID, Bundle.CorrelationType_ICCID_displayName(), \"iccid_number\", true, true)); //NON-NLS\n-        return DEFAULT_CORRELATION_TYPES;\n+        List<CorrelationAttributeInstance.Type> defaultCorrelationTypes = new ArrayList<>();", "originalCommit": "29c3cb6c25720abe750f3a323587a0316953116b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDIyMTg5MA==", "url": "https://github.com/sleuthkit/autopsy/pull/5658#discussion_r384221890", "bodyText": "When do we use unknown confidence?", "author": "rcordovano", "createdAt": "2020-02-26T01:07:56Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Central Repository\n+ *\n+ * Copyright 2020 Basis Technology Corp.\n+ * Contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.centralrepository.datamodel;\n+\n+/**\n+ * This class abstracts a persona.\n+ *\n+ * An examiner may create a persona from an account.\n+ *\n+ */\n+class Persona {\n+\n+    /**\n+     * Defines level of confidence in assigning a persona to an account.\n+     */\n+    public enum Confidence {\n+        UNKNOWN(1, \"Unknown\"),", "originalCommit": "b78aa977c2672d9c492d144a22d6c4923ba3fb58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDIyMTk1MA==", "url": "https://github.com/sleuthkit/autopsy/pull/5658#discussion_r384221950", "bodyText": "When do we use unknown status?", "author": "rcordovano", "createdAt": "2020-02-26T01:08:07Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Central Repository\n+ *\n+ * Copyright 2020 Basis Technology Corp.\n+ * Contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.centralrepository.datamodel;\n+\n+/**\n+ * This class abstracts a persona.\n+ *\n+ * An examiner may create a persona from an account.\n+ *\n+ */\n+class Persona {\n+\n+    /**\n+     * Defines level of confidence in assigning a persona to an account.\n+     */\n+    public enum Confidence {\n+        UNKNOWN(1, \"Unknown\"),\n+        LOW(2, \"Low confidence\"),\n+        MEDIUM(3, \"Medium confidence\"),\n+        HIGH(4, \"High confidence\"),\n+        DERIVED(5, \"Derived directly\");\n+\n+        private final String name;\n+        private final int level_id;\n+\n+        Confidence(int level, String name) {\n+            this.name = name;\n+            this.level_id = level;\n+\n+        }\n+\n+        @Override\n+        public String toString() {\n+            return name;\n+        }\n+\n+        public int getLevel() {\n+            return this.level_id;\n+        }\n+    }\n+\n+    /**\n+     * Defines status of a persona.\n+     */\n+    public enum PersonaStatus {\n+\n+        UNKNOWN(1, \"Unknown\"),", "originalCommit": "b78aa977c2672d9c492d144a22d6c4923ba3fb58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDIyMzM3NA==", "url": "https://github.com/sleuthkit/autopsy/pull/5658#discussion_r384223374", "bodyText": "Can we do try-with-resources here to make this cleaner?", "author": "rcordovano", "createdAt": "2020-02-26T01:10:45Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/RdbmsCentralRepo.java", "diffHunk": "@@ -3142,6 +3185,37 @@ public void updateCorrelationType(CorrelationAttributeInstance.Type aType) throw\n         }\n     }\n \n+    /**\n+     * Reads the correlation types from the database and loads them up in the cache.\n+     * \n+     * @throws CentralRepoException If there is an error.\n+     */\n+    private void getCorrelationTypesFromCr() throws CentralRepoException {\n+        \n+        // clear out the cache\n+        typeCache.invalidateAll();\n+\n+        Connection conn = connect();\n+        PreparedStatement preparedStatement = null;\n+        ResultSet resultSet = null;", "originalCommit": "b78aa977c2672d9c492d144a22d6c4923ba3fb58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "088cfaae6a79d7c9e381877d46cc91ba1a348bce", "url": "https://github.com/sleuthkit/autopsy/commit/088cfaae6a79d7c9e381877d46cc91ba1a348bce", "message": "Addressed review comments and Codacy comments.", "committedDate": "2020-02-26T18:02:23Z", "type": "commit"}]}