{"pr_number": 5926, "pr_title": "6355 geolocation npe", "pr_createdAt": "2020-06-01T12:08:52Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5926", "timeline": [{"oid": "8364dc83ac0439fd7732426be637e2cfb8d77781", "url": "https://github.com/sleuthkit/autopsy/commit/8364dc83ac0439fd7732426be637e2cfb8d77781", "message": "fix so that getPointsList throws exception on null", "committedDate": "2020-05-12T19:52:53Z", "type": "commit"}, {"oid": "d2bb1f8ef4aaadae8c2e3d7a22601213266a6be5", "url": "https://github.com/sleuthkit/autopsy/commit/d2bb1f8ef4aaadae8c2e3d7a22601213266a6be5", "message": "working through bubbling exceptions", "committedDate": "2020-05-13T14:07:33Z", "type": "commit"}, {"oid": "bfea649c48de72e205c301a753e390cef8fe3c23", "url": "https://github.com/sleuthkit/autopsy/commit/bfea649c48de72e205c301a753e390cef8fe3c23", "message": "working through bubbling exceptions", "committedDate": "2020-05-13T14:07:54Z", "type": "commit"}, {"oid": "ae739966c3b76fc041905ea1b32eb3c818aca05f", "url": "https://github.com/sleuthkit/autopsy/commit/ae739966c3b76fc041905ea1b32eb3c818aca05f", "message": "provided context in parse result for error messages; error messages need to be handled in GeolocationTopComponent and KMLReport now", "committedDate": "2020-05-13T16:26:53Z", "type": "commit"}, {"oid": "5d9b65b2c5cd32d19355d0adc46a904a7a8d3e11", "url": "https://github.com/sleuthkit/autopsy/commit/5d9b65b2c5cd32d19355d0adc46a904a7a8d3e11", "message": "Merge branch 'develop' into 6355-handleBubblingGeoException", "committedDate": "2020-05-27T19:03:36Z", "type": "commit"}, {"oid": "339e3e26d8a60ad734a568904e69d8c447a56590", "url": "https://github.com/sleuthkit/autopsy/commit/339e3e26d8a60ad734a568904e69d8c447a56590", "message": "Merge branch 'develop' into 6355-geolocationNPE", "committedDate": "2020-05-27T19:04:10Z", "type": "commit"}, {"oid": "22a8b8bcdf07f4b5d4c4c8eac101a8fc28374150", "url": "https://github.com/sleuthkit/autopsy/commit/22a8b8bcdf07f4b5d4c4c8eac101a8fc28374150", "message": "updates to handle errors", "committedDate": "2020-05-27T19:31:47Z", "type": "commit"}, {"oid": "d76e89413fdb82138842801c3c3644d58418c40f", "url": "https://github.com/sleuthkit/autopsy/commit/d76e89413fdb82138842801c3c3644d58418c40f", "message": "adding logging", "committedDate": "2020-05-27T19:38:04Z", "type": "commit"}, {"oid": "5de3b7d1f3f1f7e20a41691cc2aac1d64d0ef761", "url": "https://github.com/sleuthkit/autopsy/commit/5de3b7d1f3f1f7e20a41691cc2aac1d64d0ef761", "message": "Merge branch '6355-handleBubblingGeoException' into 6355-geolocationNPE", "committedDate": "2020-05-27T19:44:41Z", "type": "commit"}, {"oid": "f6eee251677094eecc016474b7d2849bbe250621", "url": "https://github.com/sleuthkit/autopsy/commit/f6eee251677094eecc016474b7d2849bbe250621", "message": "kml error report message", "committedDate": "2020-05-28T14:39:29Z", "type": "commit"}, {"oid": "5b3503f5601a73d0ddbc3180957c9d2529997e12", "url": "https://github.com/sleuthkit/autopsy/commit/5b3503f5601a73d0ddbc3180957c9d2529997e12", "message": "fix to prevent exceptions from bubbling up from gpx parser", "committedDate": "2020-05-28T15:30:29Z", "type": "commit"}, {"oid": "a81e714d56eeb3bc746f0dea6a62c729927a4299", "url": "https://github.com/sleuthkit/autopsy/commit/a81e714d56eeb3bc746f0dea6a62c729927a4299", "message": "Merge branch 'develop' of github.com:sleuthkit/autopsy into 6355-geolocationNPE", "committedDate": "2020-06-01T11:31:36Z", "type": "commit"}, {"oid": "8bac7f3179bdf8acdbba2ea4e16aea17fe504af8", "url": "https://github.com/sleuthkit/autopsy/commit/8bac7f3179bdf8acdbba2ea4e16aea17fe504af8", "message": "fix for gpx parser and add bundle", "committedDate": "2020-06-01T12:05:15Z", "type": "commit"}, {"oid": "b830a197a4cc895dd01321d456e6b00b05310a44", "url": "https://github.com/sleuthkit/autopsy/commit/b830a197a4cc895dd01321d456e6b00b05310a44", "message": "address codacy remarks", "committedDate": "2020-06-01T12:15:03Z", "type": "commit"}, {"oid": "22c8cb8bf60a13b65eb4a3a837108978548d9999", "url": "https://github.com/sleuthkit/autopsy/commit/22c8cb8bf60a13b65eb4a3a837108978548d9999", "message": "merge from master", "committedDate": "2020-06-01T18:12:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNjM5Mw==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433606393", "bodyText": "Why not throw an illegal argument here? By wrapping it into this checked exception it becomes impossible to differentiate between programming error vs unrecoverable error.", "author": "dannysmyda", "createdAt": "2020-06-02T03:57:00Z", "path": "Core/src/org/sleuthkit/autopsy/geolocation/datamodel/GeoLocationParseResult.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Autopsy Forensic Browser\n+ *\n+ * Copyright 2020 Basis Technology Corp.\n+ * contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.geolocation.datamodel;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.apache.commons.collections4.ListUtils;\n+import org.sleuthkit.datamodel.BlackboardArtifact;\n+\n+/**\n+ * The result of attempting to parse a GeoLocation object.\n+ */\n+public class GeoLocationParseResult<T> {\n+\n+    private final boolean successfullyParsed;\n+    private final GeoLocationDataException exception;\n+    private final BlackboardArtifact artifact;\n+    private final T geoObject;\n+\n+    GeoLocationParseResult(BlackboardArtifact artifact,\n+            boolean successfullyParsed, GeoLocationDataException exception, T geoObject) {\n+\n+        this.successfullyParsed = successfullyParsed;\n+        this.exception = exception;\n+        this.artifact = artifact;\n+        this.geoObject = geoObject;\n+    }\n+\n+    /**\n+     * Creates a GeoLocationParseResult as the result of a successful parse.\n+     * @param <T>           The type of object to parse.\n+     * @param artifact      The artifact that was parsed or failed in parsing\n+     *                      (could be null).\n+     * @param geoObject     The GeoLocation object to include in result.\n+     *\n+     * @return The generated WaypointParseResult.\n+     */\n+    public static <T> GeoLocationParseResult<T> create(BlackboardArtifact artifact, T geoObject) {\n+        if (geoObject == null) {", "originalCommit": "22c8cb8bf60a13b65eb4a3a837108978548d9999", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwODYxOA==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433608618", "bodyText": "What is the need for separating the failed vs the parsed? From what I can tell, you just use the returned lists to answer boolean queries (not null, is empty, etc).", "author": "dannysmyda", "createdAt": "2020-06-02T04:07:10Z", "path": "Core/src/org/sleuthkit/autopsy/geolocation/datamodel/GeoLocationParseResult.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Autopsy Forensic Browser\n+ *\n+ * Copyright 2020 Basis Technology Corp.\n+ * contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.geolocation.datamodel;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.apache.commons.collections4.ListUtils;\n+import org.sleuthkit.datamodel.BlackboardArtifact;\n+\n+/**\n+ * The result of attempting to parse a GeoLocation object.\n+ */\n+public class GeoLocationParseResult<T> {\n+\n+    private final boolean successfullyParsed;\n+    private final GeoLocationDataException exception;\n+    private final BlackboardArtifact artifact;\n+    private final T geoObject;\n+\n+    GeoLocationParseResult(BlackboardArtifact artifact,\n+            boolean successfullyParsed, GeoLocationDataException exception, T geoObject) {\n+\n+        this.successfullyParsed = successfullyParsed;\n+        this.exception = exception;\n+        this.artifact = artifact;\n+        this.geoObject = geoObject;\n+    }\n+\n+    /**\n+     * Creates a GeoLocationParseResult as the result of a successful parse.\n+     * @param <T>           The type of object to parse.\n+     * @param artifact      The artifact that was parsed or failed in parsing\n+     *                      (could be null).\n+     * @param geoObject     The GeoLocation object to include in result.\n+     *\n+     * @return The generated WaypointParseResult.\n+     */\n+    public static <T> GeoLocationParseResult<T> create(BlackboardArtifact artifact, T geoObject) {\n+        if (geoObject == null) {\n+            return new GeoLocationParseResult(artifact, false, new GeoLocationDataException(\"GeoLocation object provided was null\"), null);\n+        }\n+\n+        return new GeoLocationParseResult(artifact, true, null, geoObject);\n+    }\n+\n+    /**\n+     * Creates a GeoLocationParseResult indicating a failed parsing.\n+     *\n+     * @param <T>           The type of GeoLocation object that was supposed to\n+     *                      be parsed.\n+     * @param artifact      The artifact that was parsed or failed in parsing\n+     *                      (could be null).\n+     * @param exception     The exception generated.\n+     *\n+     * @return The GeoLocationParseResult indicating an error.\n+     */\n+    public static <T> GeoLocationParseResult<T> error(BlackboardArtifact artifact, GeoLocationDataException exception) {\n+        return new GeoLocationParseResult(artifact, false, exception, null);\n+    }\n+\n+    /**\n+     * The result of splitting an iterable of GeoLocationParseResults into a\n+     * list of successfully parsed items and a list of failures.\n+     *\n+     * @param <T> The parsed item type.\n+     */\n+    public static class SeparationResult<T> {", "originalCommit": "22c8cb8bf60a13b65eb4a3a837108978548d9999", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc5OTM2NA==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433799364", "bodyText": "I initially created this because of a misunderstanding I had that I would need to report the track items that failed to parse to the user along with returning the items that successfully parsed.  Since the error that is reported to the user is generalized, this could potentially be simplified, but methods like GeoPath.getTracks and WaypointBuilder.getWaypointForArtifact will need to have something that returns an object containing the list of successfully parsed items for display and some indication that there was an error.", "author": "gdicristofaro", "createdAt": "2020-06-02T11:15:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwODYxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYxMTU1MQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433611551", "bodyText": "This is very confusing. Could you instead go for an API like parseWaypoint(artifact, EXIFWaypoint.class)?", "author": "dannysmyda", "createdAt": "2020-06-02T04:20:33Z", "path": "Core/src/org/sleuthkit/autopsy/geolocation/datamodel/WaypointBuilder.java", "diffHunk": "@@ -619,44 +622,88 @@ static private String getWaypointListQuery(List<DataSource> dataSources) {\n                 dataSourceList);\n     }\n \n+    /**\n+     * A parser that could throw a GeoLocationDataException when there is a\n+     * parse issue.\n+     *\n+     * @param <T> The return type.\n+     */\n+    private interface ParserWithError<T> {\n+\n+        T parse(BlackboardArtifact artifact) throws GeoLocationDataException;\n+    }\n+\n+    /**\n+     * Parses one waypoint.\n+     *\n+     * @param parser The parser to use.\n+     * @param artifact The artifact to be parsed.\n+     *\n+     * @return Returns a parse result that is either successful with a parsed\n+     *         waypoint or unsuccessful with an exception.\n+     */\n+    private static GeoLocationParseResult<Waypoint> parseWaypoint(ParserWithError<Waypoint> parser, BlackboardArtifact artifact) {\n+        try {\n+            return GeoLocationParseResult.create(artifact, parser.parse(artifact));\n+        } catch (GeoLocationDataException ex) {\n+            return GeoLocationParseResult.error(artifact, ex);\n+        }\n+    }\n+\n+    /**\n+     * Parses a list of waypoints.\n+     *\n+     * @param parser The parser to use.\n+     * @param artifact The artifact to be parsed.\n+     *\n+     * @return Returns a list of parse results with the successfully parsed\n+     *         items or a list with one item indicating the failure.\n+     */\n+    private static List<GeoLocationParseResult<Waypoint>> parseWaypoints(ParserWithError<List<Waypoint>> parser, BlackboardArtifact artifact) {\n+        try {\n+            return parser.parse(artifact).stream()\n+                    .map((result) -> GeoLocationParseResult.create(artifact, result))\n+                    .collect(Collectors.toList());\n+\n+        } catch (GeoLocationDataException ex) {\n+            return Arrays.asList(GeoLocationParseResult.error(artifact, ex));\n+        }\n+    }\n+\n     /**\n      * Create a Waypoint object for the given Blackboard artifact.\n      *\n      * @param artifact The artifact to create the waypoint from\n      * @param type     The type of artifact\n      *\n      * @return A new waypoint object\n-     *\n-     * @throws GeoLocationDataException\n      */\n-    static private List<Waypoint> getWaypointForArtifact(BlackboardArtifact artifact, ARTIFACT_TYPE type) throws GeoLocationDataException {\n-        List<Waypoint> waypoints = new ArrayList<>();\n+    private static List<GeoLocationParseResult<Waypoint>> getWaypointForArtifact(BlackboardArtifact artifact, ARTIFACT_TYPE type) {\n+        List<GeoLocationParseResult<Waypoint>> waypoints = new ArrayList<>();\n         switch (type) {\n             case TSK_METADATA_EXIF:\n-                waypoints.add(new EXIFWaypoint(artifact));\n+                waypoints.add(parseWaypoint((a) -> new EXIFWaypoint(a), artifact));", "originalCommit": "22c8cb8bf60a13b65eb4a3a837108978548d9999", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzgwMTk4MA==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433801980", "bodyText": "How about something like waypoints.add(parseWaypoint(EXIFWaypoint::new, artifact));?", "author": "gdicristofaro", "createdAt": "2020-06-02T11:20:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYxMTU1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYxNDI2OQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433614269", "bodyText": "Can this become an illegal argument? And preferably out in the constructor of Track? I'm worried that GeoLocationDataException is becoming a 'god' exception.", "author": "dannysmyda", "createdAt": "2020-06-02T04:32:11Z", "path": "Core/src/org/sleuthkit/autopsy/geolocation/datamodel/Track.java", "diffHunk": "@@ -130,14 +133,17 @@ private void buildPath(GeoTrackPoints points, BlackboardArtifact artifact) throw\n      */\n     private GeoTrackPoints getPointsList(Map<BlackboardAttribute.ATTRIBUTE_TYPE, BlackboardAttribute> attributeMap) throws GeoLocationDataException {\n         BlackboardAttribute attribute = attributeMap.get(BlackboardAttribute.ATTRIBUTE_TYPE.TSK_GEO_TRACKPOINTS);\n-        if (attribute != null) {\n-            try {\n-                return BlackboardJsonAttrUtil.fromAttribute(attribute, GeoTrackPoints.class);\n-            } catch (InvalidJsonException ex) {\n-                throw new GeoLocationDataException(\"Unable to parse track points in TSK_GEO_TRACKPOINTS attribute\", ex);\n-            }\n+        if (attribute == null) {", "originalCommit": "22c8cb8bf60a13b65eb4a3a837108978548d9999", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzgwMzc4Ng==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433803786", "bodyText": "I had a conversation where I think we decided on a GeoLocationDataException, because, similar to json parsing, the artifact attributes being passed were in a malformed state if they did not contain track information.", "author": "gdicristofaro", "createdAt": "2020-06-02T11:24:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYxNDI2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYxNTE3Mw==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433615173", "bodyText": "Is getException() or getArtifact() used?", "author": "dannysmyda", "createdAt": "2020-06-02T04:35:58Z", "path": "Core/src/org/sleuthkit/autopsy/geolocation/datamodel/GeoLocationParseResult.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Autopsy Forensic Browser\n+ *\n+ * Copyright 2020 Basis Technology Corp.\n+ * contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.geolocation.datamodel;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.apache.commons.collections4.ListUtils;\n+import org.sleuthkit.datamodel.BlackboardArtifact;\n+\n+/**\n+ * The result of attempting to parse a GeoLocation object.\n+ */\n+public class GeoLocationParseResult<T> {\n+\n+    private final boolean successfullyParsed;\n+    private final GeoLocationDataException exception;\n+    private final BlackboardArtifact artifact;\n+    private final T geoObject;\n+\n+    GeoLocationParseResult(BlackboardArtifact artifact,\n+            boolean successfullyParsed, GeoLocationDataException exception, T geoObject) {\n+\n+        this.successfullyParsed = successfullyParsed;\n+        this.exception = exception;\n+        this.artifact = artifact;\n+        this.geoObject = geoObject;\n+    }\n+\n+    /**\n+     * Creates a GeoLocationParseResult as the result of a successful parse.\n+     * @param <T>           The type of object to parse.\n+     * @param artifact      The artifact that was parsed or failed in parsing\n+     *                      (could be null).\n+     * @param geoObject     The GeoLocation object to include in result.\n+     *\n+     * @return The generated WaypointParseResult.\n+     */\n+    public static <T> GeoLocationParseResult<T> create(BlackboardArtifact artifact, T geoObject) {\n+        if (geoObject == null) {\n+            return new GeoLocationParseResult(artifact, false, new GeoLocationDataException(\"GeoLocation object provided was null\"), null);\n+        }\n+\n+        return new GeoLocationParseResult(artifact, true, null, geoObject);\n+    }\n+\n+    /**\n+     * Creates a GeoLocationParseResult indicating a failed parsing.\n+     *\n+     * @param <T>           The type of GeoLocation object that was supposed to\n+     *                      be parsed.\n+     * @param artifact      The artifact that was parsed or failed in parsing\n+     *                      (could be null).\n+     * @param exception     The exception generated.\n+     *\n+     * @return The GeoLocationParseResult indicating an error.\n+     */\n+    public static <T> GeoLocationParseResult<T> error(BlackboardArtifact artifact, GeoLocationDataException exception) {\n+        return new GeoLocationParseResult(artifact, false, exception, null);\n+    }\n+\n+    /**\n+     * The result of splitting an iterable of GeoLocationParseResults into a\n+     * list of successfully parsed items and a list of failures.\n+     *\n+     * @param <T> The parsed item type.\n+     */\n+    public static class SeparationResult<T> {\n+\n+        private final List<GeoLocationParseResult<T>> failedItems;\n+        private final List<T> parsedItems;\n+\n+        SeparationResult(List<GeoLocationParseResult<T>> failedItems, List<T> parsedItems) {\n+            this.failedItems = failedItems;\n+            this.parsedItems = parsedItems;\n+        }\n+\n+        /**\n+         * @return The items that failed to parse properly.\n+         */\n+        public List<GeoLocationParseResult<T>> getFailedItems() {\n+            return failedItems;\n+        }\n+\n+        /**\n+         * @return The underlying items that were successfully parsed.\n+         */\n+        public List<T> getParsedItems() {\n+            return parsedItems;\n+        }\n+    }\n+\n+    /**\n+     * Separates an iterable of GeoLocationParseResult objects into failed items\n+     * and successfully parsed items.\n+     *\n+     * @param <T>   The underlying type that was parsed.\n+     * @param items The items to separate.\n+     *\n+     * @return The SeparationResult with successfully parsed and failed items.\n+     */\n+    public static <T> SeparationResult<T> separate(Iterable<? extends GeoLocationParseResult<T>> items) {\n+        List<GeoLocationParseResult<T>> failedItems = new ArrayList<>();\n+        List<T> parsedItems = new ArrayList<>();\n+        for (GeoLocationParseResult<T> item : items) {\n+            if (item.isSuccessfullyParsed()) {\n+                parsedItems.add(item.getGeoLocationObject());\n+            } else {\n+                failedItems.add(item);\n+            }\n+        }\n+\n+        return new SeparationResult<T>(ListUtils.unmodifiableList(failedItems), ListUtils.unmodifiableList(parsedItems));\n+    }\n+\n+    /**\n+     * Whether or not the GeoLocation object has been successfully parsed. If\n+     * true, there should be a non-null GeoLocation object present. Otherwise,\n+     * there should be a non-null exception.\n+     *\n+     * @return Whether or not the GeoLocation object has been successfully\n+     *         parsed.\n+     */\n+    public boolean isSuccessfullyParsed() {\n+        return successfullyParsed;\n+    }\n+\n+    /**\n+     * @return The exception caused in attempting to parse the GeoLocation\n+     *         object if there was an exception.\n+     */\n+    public GeoLocationDataException getException() {", "originalCommit": "22c8cb8bf60a13b65eb4a3a837108978548d9999", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYxNjAzMQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433616031", "bodyText": "Since these are aggregated everywhere and then partition and managed in code outside of this class, what if the granularity of this class was not on a single ParseResult, but multiple? I think that might simplify things, what do you think?", "author": "dannysmyda", "createdAt": "2020-06-02T04:40:01Z", "path": "Core/src/org/sleuthkit/autopsy/geolocation/datamodel/GeoLocationParseResult.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Autopsy Forensic Browser\n+ *\n+ * Copyright 2020 Basis Technology Corp.\n+ * contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.geolocation.datamodel;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.apache.commons.collections4.ListUtils;\n+import org.sleuthkit.datamodel.BlackboardArtifact;\n+\n+/**\n+ * The result of attempting to parse a GeoLocation object.\n+ */\n+public class GeoLocationParseResult<T> {", "originalCommit": "22c8cb8bf60a13b65eb4a3a837108978548d9999", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzgwMjc5OA==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433802798", "bodyText": "Sure.", "author": "gdicristofaro", "createdAt": "2020-06-02T11:22:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYxNjAzMQ=="}], "type": "inlineReview"}, {"oid": "1ade5a4f344741007b1c72cb5247b8c04a5cbaf6", "url": "https://github.com/sleuthkit/autopsy/commit/1ade5a4f344741007b1c72cb5247b8c04a5cbaf6", "message": "updates based on comments", "committedDate": "2020-06-02T12:39:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk0MjUyNw==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433942527", "bodyText": "I believed Codacy flagged this. I think this could be replaced with this.successfullyParsed &&= toAdd.isSuccessfullyParsed().", "author": "dannysmyda", "createdAt": "2020-06-02T14:58:06Z", "path": "Core/src/org/sleuthkit/autopsy/geolocation/datamodel/GeoLocationParseResult.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Autopsy Forensic Browser\n+ *\n+ * Copyright 2020 Basis Technology Corp.\n+ * contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.geolocation.datamodel;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.python.google.common.collect.ImmutableList;\n+\n+/**\n+ * The result of attempting to parse a GeoLocation object.\n+ */\n+public class GeoLocationParseResult<T> {\n+\n+    private boolean successfullyParsed;\n+    private List<T> items = new ArrayList<>();\n+\n+    /**\n+     * Returns a GeoLocationParseResult with no items and declared successfully\n+     * parsed.\n+     */\n+    public GeoLocationParseResult() {\n+        successfullyParsed = true;\n+    }\n+\n+    /**\n+     * Returns a new GeoLocationParseResult.\n+     *\n+     * @param items              The items to copy to this result (can be null).\n+     * @param successfullyParsed Whether or not the operation was entirely\n+     *                           successful.\n+     */\n+    public GeoLocationParseResult(List<T> items, boolean successfullyParsed) {\n+        this.successfullyParsed = successfullyParsed;\n+\n+        if (items != null) {\n+            this.items.addAll(items);\n+        }\n+    }\n+\n+    /**\n+     * Adds the content of the GeoLocationParseResult parameter to this. Items\n+     * will be concatenated and this object's successfullyParsed status will be\n+     * true if it is already true and the object is true as well.\n+     *\n+     * @param toAdd The GeoLocationParseResult to add.\n+     */\n+    public void add(GeoLocationParseResult<T> toAdd) {\n+        this.successfullyParsed = (this.successfullyParsed == false)", "originalCommit": "1ade5a4f344741007b1c72cb5247b8c04a5cbaf6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk0MzA0MQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5926#discussion_r433943041", "bodyText": "Could you update this header while you're in here?", "author": "dannysmyda", "createdAt": "2020-06-02T14:58:47Z", "path": "Core/src/org/sleuthkit/autopsy/geolocation/datamodel/GeoLocationParseResult.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Autopsy Forensic Browser\n+ *\n+ * Copyright 2020 Basis Technology Corp.\n+ * contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.geolocation.datamodel;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.python.google.common.collect.ImmutableList;\n+\n+/**\n+ * The result of attempting to parse a GeoLocation object.", "originalCommit": "1ade5a4f344741007b1c72cb5247b8c04a5cbaf6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fc01fcd48d095c7bd71d50be34d10ff8e042e63d", "url": "https://github.com/sleuthkit/autopsy/commit/fc01fcd48d095c7bd71d50be34d10ff8e042e63d", "message": "fix for codacy and commenting issues", "committedDate": "2020-06-02T15:58:35Z", "type": "commit"}]}