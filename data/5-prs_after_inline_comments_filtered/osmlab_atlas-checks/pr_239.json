{"pr_number": 239, "pr_title": "Storing project id and challenge id of MapRoulette to a file.", "pr_createdAt": "2020-01-09T19:03:01Z", "pr_url": "https://github.com/osmlab/atlas-checks/pull/239", "timeline": [{"oid": "7c4cbf92519a44c3062fef1e65844dadd047b88c", "url": "https://github.com/osmlab/atlas-checks/commit/7c4cbf92519a44c3062fef1e65844dadd047b88c", "message": "Sonar-fixes, commit 3, replacing throwable with IOException.", "committedDate": "2019-11-26T20:47:04Z", "type": "commit"}, {"oid": "7d613ceee582762e9cb364fc627fbfb2a8c7ba3e", "url": "https://github.com/osmlab/atlas-checks/commit/7d613ceee582762e9cb364fc627fbfb2a8c7ba3e", "message": "MapRoulette-challenge-ids, functionality for storing challenge ids to a file.", "committedDate": "2020-01-08T18:49:57Z", "type": "commit"}, {"oid": "33aaa67594108d2346181478b51cf8bd97146773", "url": "https://github.com/osmlab/atlas-checks/commit/33aaa67594108d2346181478b51cf8bd97146773", "message": "MapRoulette-challenge-ids, fixing checkstyle issues plus adding java doc.", "committedDate": "2020-01-08T19:03:16Z", "type": "commit"}, {"oid": "9bc49dc440f82097c0620a73d683ae40223d99bb", "url": "https://github.com/osmlab/atlas-checks/commit/9bc49dc440f82097c0620a73d683ae40223d99bb", "message": "MapRoulette-challenge_ids, formatting issues fix.", "committedDate": "2020-01-09T17:21:57Z", "type": "commit"}, {"oid": "c3c69f9df53941f7df939fb8ca169569ce86ae2b", "url": "https://github.com/osmlab/atlas-checks/commit/c3c69f9df53941f7df939fb8ca169569ce86ae2b", "message": "Merge branch 'dev' of https://github.com/osmlab/atlas-checks into maproulette-challenge-ids", "committedDate": "2020-01-09T17:33:03Z", "type": "commit"}, {"oid": "b75bbc6d747314ca211dfa4c9bf1a448e0b6fa16", "url": "https://github.com/osmlab/atlas-checks/commit/b75bbc6d747314ca211dfa4c9bf1a448e0b6fa16", "message": "MapRoulette-challenge-ids, refactoring code.", "committedDate": "2020-01-09T18:58:28Z", "type": "commit"}, {"oid": "43bee046140c38e8609a7dbd7ed248bf62f4b46a", "url": "https://github.com/osmlab/atlas-checks/commit/43bee046140c38e8609a7dbd7ed248bf62f4b46a", "message": "MapRoulette-challenge-ids, reverting to old code which is not changed  for this task.", "committedDate": "2020-01-09T19:13:36Z", "type": "commit"}, {"oid": "46d6050cace9417596bb539caa70f59fdedbdc66", "url": "https://github.com/osmlab/atlas-checks/commit/46d6050cace9417596bb539caa70f59fdedbdc66", "message": "MapRoulette-challenge-ids, adding unit test to test ids storage to a file.", "committedDate": "2020-01-09T20:16:48Z", "type": "commit"}, {"oid": "bae03dbdd9779b6abab70559ec707e0043c08c10", "url": "https://github.com/osmlab/atlas-checks/commit/bae03dbdd9779b6abab70559ec707e0043c08c10", "message": "MapRoulette-challenge-ids, fixing sonar issue.", "committedDate": "2020-01-09T20:19:52Z", "type": "commit"}, {"oid": "d9b9c7d864aed5aa33f9a859e5d893468ebece28", "url": "https://github.com/osmlab/atlas-checks/commit/d9b9c7d864aed5aa33f9a859e5d893468ebece28", "message": "MR-challenge-ids, fixing formatting.", "committedDate": "2020-01-09T20:20:28Z", "type": "commit"}, {"oid": "ec4c2e2c8e3e30cbca40650f1e593d8736e3a7e3", "url": "https://github.com/osmlab/atlas-checks/commit/ec4c2e2c8e3e30cbca40650f1e593d8736e3a7e3", "message": "MR challenge-ids, fixing checkstyle issues.", "committedDate": "2020-01-09T20:27:16Z", "type": "commit"}, {"oid": "bf142b03a16cc8e20940117b3095ffaf8a89ceb5", "url": "https://github.com/osmlab/atlas-checks/commit/bf142b03a16cc8e20940117b3095ffaf8a89ceb5", "message": "Merge branch 'dev' into maproulette-challenge-ids", "committedDate": "2020-01-09T21:59:04Z", "type": "commit"}, {"oid": "ceda582538f83c1fd08029fdc489a38058075e58", "url": "https://github.com/osmlab/atlas-checks/commit/ceda582538f83c1fd08029fdc489a38058075e58", "message": "MR-ids-storing, storing project id and challenge id to a txt file.", "committedDate": "2020-01-10T17:12:47Z", "type": "commit"}, {"oid": "556a1b2c9e28c91600b5a1329a876bd09a7fd9fb", "url": "https://github.com/osmlab/atlas-checks/commit/556a1b2c9e28c91600b5a1329a876bd09a7fd9fb", "message": "MR-ids-storing, checkstyle fixes.", "committedDate": "2020-01-10T17:17:37Z", "type": "commit"}, {"oid": "784755b61b560561c21642227015851320dcf2bc", "url": "https://github.com/osmlab/atlas-checks/commit/784755b61b560561c21642227015851320dcf2bc", "message": "Merge remote-tracking branch 'smaheshwaram/maproulette-challenge-ids' into maproulette-challenge-ids", "committedDate": "2020-01-10T17:17:43Z", "type": "commit"}, {"oid": "8758fd28041d7187d245f7699fafe3c5a93aa972", "url": "https://github.com/osmlab/atlas-checks/commit/8758fd28041d7187d245f7699fafe3c5a93aa972", "message": "MR-ids-storing, modified \",\" to \";\".", "committedDate": "2020-01-10T17:21:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM0ODk1Ng==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365348956", "bodyText": "To making parsing this file easier, do you mind removing the whitespace between project: and the id", "author": "danielduhh", "createdAt": "2020-01-10T17:35:30Z", "path": "src/main/java/org/openstreetmap/atlas/checks/maproulette/MapRouletteClient.java", "diffHunk": "@@ -66,6 +70,47 @@ public static MapRouletteClient instance(final MapRouletteConfiguration configur\n         return null;\n     }\n \n+    /**\n+     * This method writes challenge ids to a file.\n+     *\n+     * @param challengeId\n+     *            challenge id of the newly created MapRoulette challenge.\n+     * @param projectId\n+     *            project id of the MapRoulette challenge.\n+     */\n+    public static void writeChallengeIdsToFile(final long challengeId, final long projectId)\n+    {\n+        outputPath.ifPresent(fileName ->\n+        {\n+            try\n+            {\n+                final BufferedWriter fileWriter = new BufferedWriter(\n+                        new FileWriter(fileName, true));\n+                fileWriter\n+                        .append(String.format(\"project: %d;challenge: %d\", projectId, challengeId));", "originalCommit": "8758fd28041d7187d245f7699fafe3c5a93aa972", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2OTU3NQ==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365369575", "bodyText": "Done", "author": "smaheshwaram", "createdAt": "2020-01-10T18:28:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM0ODk1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1NTEzNw==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365355137", "bodyText": "Should we enforce the filename for consistency sake? That way, the user will only need to specify the output path, and we'll be in charge of setting the filename: challenges.txt.", "author": "danielduhh", "createdAt": "2020-01-10T17:51:39Z", "path": "src/main/java/org/openstreetmap/atlas/checks/maproulette/MapRouletteClient.java", "diffHunk": "@@ -66,6 +70,47 @@ public static MapRouletteClient instance(final MapRouletteConfiguration configur\n         return null;\n     }\n \n+    /**\n+     * This method writes challenge ids to a file.\n+     *\n+     * @param challengeId\n+     *            challenge id of the newly created MapRoulette challenge.\n+     * @param projectId\n+     *            project id of the MapRoulette challenge.\n+     */\n+    public static void writeChallengeIdsToFile(final long challengeId, final long projectId)\n+    {\n+        outputPath.ifPresent(fileName ->", "originalCommit": "8758fd28041d7187d245f7699fafe3c5a93aa972", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1NTM0NA==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365355344", "bodyText": "Do you mind adding a note on the format of the file?", "author": "danielduhh", "createdAt": "2020-01-10T17:52:08Z", "path": "src/main/java/org/openstreetmap/atlas/checks/maproulette/MapRouletteClient.java", "diffHunk": "@@ -66,6 +70,47 @@ public static MapRouletteClient instance(final MapRouletteConfiguration configur\n         return null;\n     }\n \n+    /**\n+     * This method writes challenge ids to a file.", "originalCommit": "8758fd28041d7187d245f7699fafe3c5a93aa972", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2OTkxMw==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365369913", "bodyText": "Done", "author": "smaheshwaram", "createdAt": "2020-01-10T18:29:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1NTM0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1NjYwMw==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365356603", "bodyText": "You could also create a temp file directory with File.tempdirectory", "author": "danielduhh", "createdAt": "2020-01-10T17:55:28Z", "path": "src/test/java/org/openstreetmap/atlas/checks/maproulette/MapRouletteClientTest.java", "diffHunk": "@@ -107,4 +109,16 @@ public void testProjectConfiguration()\n         Assert.assertFalse(uploadedProject.isEnabled());\n         Assert.assertEquals(1, this.mockConnection.tasksForChallenge(TEST_CHALLENGE).size());\n     }\n+\n+    @Test\n+    public void testWriteChallengeIdsToFile()\n+    {\n+        final String fileName = String.format(\"%s/src/test/resources/challenges/challengeIds\",", "originalCommit": "8758fd28041d7187d245f7699fafe3c5a93aa972", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1NjkwNQ==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365356905", "bodyText": "I think we should also verify that file file is created, and the contents in the file are what we expect", "author": "danielduhh", "createdAt": "2020-01-10T17:56:15Z", "path": "src/test/java/org/openstreetmap/atlas/checks/maproulette/MapRouletteClientTest.java", "diffHunk": "@@ -107,4 +109,16 @@ public void testProjectConfiguration()\n         Assert.assertFalse(uploadedProject.isEnabled());\n         Assert.assertEquals(1, this.mockConnection.tasksForChallenge(TEST_CHALLENGE).size());\n     }\n+\n+    @Test\n+    public void testWriteChallengeIdsToFile()\n+    {\n+        final String fileName = String.format(\"%s/src/test/resources/challenges/challengeIds\",\n+                System.getProperty(\"user.dir\"));\n+        final Optional<String> fileNameOptional = Optional.of(fileName);\n+        assertTrue(fileNameOptional.isPresent());\n+        MapRouletteClient.setOutputPath(fileNameOptional);\n+        MapRouletteClient.writeChallengeIdsToFile(1, 24);\n+        MapRouletteClient.writeChallengeIdsToFile(1, 25);", "originalCommit": "8758fd28041d7187d245f7699fafe3c5a93aa972", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3MDA0NQ==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365370045", "bodyText": "For sure.", "author": "smaheshwaram", "createdAt": "2020-01-10T18:29:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1NjkwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2NzQ3OA==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365367478", "bodyText": "nit: we could print the stack trace or some detail about the exception for clarity", "author": "seancoulter", "createdAt": "2020-01-10T18:23:37Z", "path": "src/main/java/org/openstreetmap/atlas/checks/maproulette/MapRouletteClient.java", "diffHunk": "@@ -66,6 +70,47 @@ public static MapRouletteClient instance(final MapRouletteConfiguration configur\n         return null;\n     }\n \n+    /**\n+     * This method writes challenge ids to a file.\n+     *\n+     * @param challengeId\n+     *            challenge id of the newly created MapRoulette challenge.\n+     * @param projectId\n+     *            project id of the MapRoulette challenge.\n+     */\n+    public static void writeChallengeIdsToFile(final long challengeId, final long projectId)\n+    {\n+        outputPath.ifPresent(fileName ->\n+        {\n+            try\n+            {\n+                final BufferedWriter fileWriter = new BufferedWriter(\n+                        new FileWriter(fileName, true));\n+                fileWriter\n+                        .append(String.format(\"project: %d;challenge: %d\", projectId, challengeId));\n+                fileWriter.newLine();\n+                fileWriter.close();\n+            }\n+            catch (final IOException ioException)\n+            {\n+                logger.warn(\n+                        \"IOException occurred while writing project id {}, challenge id {} to the file {}\",", "originalCommit": "8758fd28041d7187d245f7699fafe3c5a93aa972", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3MDczMg==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365370732", "bodyText": "Sure.", "author": "smaheshwaram", "createdAt": "2020-01-10T18:31:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2NzQ3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2MzgyMg==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365863822", "bodyText": "Sonar doesn't like printstacktrace. However, i was logging the error in catch block.", "author": "smaheshwaram", "createdAt": "2020-01-13T15:25:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2NzQ3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2OTQ0NQ==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365369445", "bodyText": "\"challenge + project ids\"", "author": "seancoulter", "createdAt": "2020-01-10T18:28:31Z", "path": "src/main/java/org/openstreetmap/atlas/checks/maproulette/MapRouletteCommand.java", "diffHunk": "@@ -32,6 +33,10 @@\n     private static final Switch<String> PROJECT_DISPLAY_NAME = new Switch<>(\"projectDisplayName\",\n             \"Display name of the project under which all of the challenges will be submitted\",\n             StringConverter.IDENTITY);\n+    protected static final Switch<String> OUTPUT_PATH = new Switch<>(\"outputPath\",\n+            \"Full path to file where challenge ids are stored after creation in MapRoulette.\",", "originalCommit": "8758fd28041d7187d245f7699fafe3c5a93aa972", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3MDI3MQ==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365370271", "bodyText": "Changed it. Have to push the latest code.", "author": "smaheshwaram", "createdAt": "2020-01-10T18:30:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2OTQ0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3MTEwNA==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365371104", "bodyText": "Should this be static? What if we wanted different MapRouletteClients to post output in different places?", "author": "seancoulter", "createdAt": "2020-01-10T18:32:23Z", "path": "src/main/java/org/openstreetmap/atlas/checks/maproulette/MapRouletteClient.java", "diffHunk": "@@ -38,6 +41,7 @@\n     // Map containing all the challenges per project\n     private final Map<String, Project> projects;\n     private final Map<Long, Map<String, Challenge>> challenges;\n+    private static Optional<String> outputPath = Optional.empty();", "originalCommit": "8758fd28041d7187d245f7699fafe3c5a93aa972", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkzNzE1MA==", "url": "https://github.com/osmlab/atlas-checks/pull/239#discussion_r365937150", "bodyText": "Initially made this as a static variable so that I test the method I created easily. I modified it now and its not static anymore.", "author": "smaheshwaram", "createdAt": "2020-01-13T17:43:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3MTEwNA=="}], "type": "inlineReview"}, {"oid": "4c329c67ddbfb8988586a4c24bf1d4a5698623cd", "url": "https://github.com/osmlab/atlas-checks/commit/4c329c67ddbfb8988586a4c24bf1d4a5698623cd", "message": "MR-ids-storing, PR review comments.", "committedDate": "2020-01-10T23:56:00Z", "type": "commit"}, {"oid": "542b2f237adc513be5d421a4cb61687f4737decf", "url": "https://github.com/osmlab/atlas-checks/commit/542b2f237adc513be5d421a4cb61687f4737decf", "message": "MR-ids-storing, build fixes.", "committedDate": "2020-01-11T00:00:29Z", "type": "commit"}, {"oid": "36cea2af6b36e8805089f81b492daac5442d319b", "url": "https://github.com/osmlab/atlas-checks/commit/36cea2af6b36e8805089f81b492daac5442d319b", "message": "MR-ids-storing, build fixes.", "committedDate": "2020-01-11T00:04:15Z", "type": "commit"}, {"oid": "07238d3121aeb36c03d0ee85633c9e9ebd9db800", "url": "https://github.com/osmlab/atlas-checks/commit/07238d3121aeb36c03d0ee85633c9e9ebd9db800", "message": "MR-ids-storing, fixing sonar issues.", "committedDate": "2020-01-13T15:30:30Z", "type": "commit"}]}