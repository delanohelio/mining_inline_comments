{"pr_number": 373, "pr_title": "[567246] Add a warning message in the DeleteCapellaElement dialog box", "pr_createdAt": "2020-09-23T07:52:09Z", "pr_url": "https://github.com/eclipse/capella/pull/373", "timeline": [{"oid": "6d9c516e581efd258a85add2cd91628fbe85c8f5", "url": "https://github.com/eclipse/capella/commit/6d9c516e581efd258a85add2cd91628fbe85c8f5", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>", "committedDate": "2020-09-28T08:57:47Z", "type": "forcePushed"}, {"oid": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f", "url": "https://github.com/eclipse/capella/commit/7ef3d2df573957be4a5e48f9755bad2fbe44d93f", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>", "committedDate": "2020-10-02T16:00:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEwOTE1Mw==", "url": "https://github.com/eclipse/capella/pull/373#discussion_r500109153", "bodyText": "can you rename to \"prechecks\" or something like that", "author": "pdulth", "createdAt": "2020-10-06T08:47:36Z", "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.actions/src/org/polarsys/capella/core/platform/sirius/ui/commands/CapellaDeleteCommand.java", "diffHunk": "@@ -145,11 +151,38 @@ protected IStatus preDeleteChecks() {\n       if (!CapellaDeleteAction.canDelete(elementsToDelete)) {\n         protectedElements = new Status(Status.ERROR, CapellaActionsActivator.PLUGIN_ID,\n             Messages.CapellaDeleteCommand_ProtectedElementsError);\n+      } else {\n+        long nbRepresentations = elementsToDelete.stream().filter(DRepresentationDescriptor.class::isInstance).count();\n+        long nbSemanticElements = elementsToDelete.size() - nbRepresentations;\n+        int status = Status.INFO;\n+        String messageNbSemanticElement = \"\";\n+        String messageNbRepresentation = \"\";\n+\n+        if (nbSemanticElements == 1) {\n+          messageNbSemanticElement = Messages.CapellaDeleteCommand_ConfirmDeletionWithOneSemanticElement;\n+        } else {\n+          messageNbSemanticElement = MessageFormat\n+              .format(Messages.CapellaDeleteCommand_ConfirmDeletionWithManySemanticElement, nbSemanticElements);\n+        }\n+        if (nbRepresentations > 0) {\n+          if (nbRepresentations == 1) {\n+            messageNbRepresentation = Messages.CapellaDeleteCommand_ConfirmDeletionWithOneRepresentation;\n+          } else {\n+            messageNbRepresentation = MessageFormat\n+                .format(Messages.CapellaDeleteCommand_ConfirmDeletionWithManyRepresentations, nbRepresentations);\n+          }\n+          status = Status.WARNING;\n+        }\n+        String message = MessageFormat.format(Messages.CapellaDeleteCommand_ConfirmDeletionQuestion,\n+            messageNbSemanticElement, messageNbRepresentation);\n+        protectedElements = new Status(status, CapellaActionsActivator.PLUGIN_ID, message);", "originalCommit": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEwOTIzOA==", "url": "https://github.com/eclipse/capella/pull/373#discussion_r500109238", "bodyText": "Can you move else outside the first IF", "author": "pdulth", "createdAt": "2020-10-06T08:47:42Z", "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.actions/src/org/polarsys/capella/core/platform/sirius/ui/commands/CapellaDeleteCommand.java", "diffHunk": "@@ -145,11 +151,38 @@ protected IStatus preDeleteChecks() {\n       if (!CapellaDeleteAction.canDelete(elementsToDelete)) {\n         protectedElements = new Status(Status.ERROR, CapellaActionsActivator.PLUGIN_ID,\n             Messages.CapellaDeleteCommand_ProtectedElementsError);\n+      } else {", "originalCommit": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "38452a40e970882d6c6a1c594d0b2729b0af2474", "url": "https://github.com/eclipse/capella/commit/38452a40e970882d6c6a1c594d0b2729b0af2474", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>", "committedDate": "2020-10-06T16:26:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM0Mzc2Mw==", "url": "https://github.com/eclipse/capella/pull/373#discussion_r503343763", "bodyText": "I think this shall occurs only on ERROR status.\n(if you have a warning, does the OK shall be disabled?)", "author": "pdulth", "createdAt": "2020-10-12T14:42:27Z", "path": "core/plugins/org.polarsys.capella.core.ui.toolkit/src/org/polarsys/capella/core/ui/toolkit/dialogs/ConfirmDeleteCapellaElementDialog.java", "diffHunk": "@@ -284,12 +285,22 @@ protected Control createContents(Composite parent) {\n   private void updateMessageAndButtons() {\n     IStatus status = getStatus();\n     if (!status.isOK()) {", "originalCommit": "38452a40e970882d6c6a1c594d0b2729b0af2474", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "29983489717750dadd6636fec949bae401abbbeb", "url": "https://github.com/eclipse/capella/commit/29983489717750dadd6636fec949bae401abbbeb", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>", "committedDate": "2020-10-14T13:26:08Z", "type": "commit"}, {"oid": "dada43a07419bd3a313229fe6bfdf1e359e625ff", "url": "https://github.com/eclipse/capella/commit/dada43a07419bd3a313229fe6bfdf1e359e625ff", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nChange-Id: I6627941dabc59334304d364bfdbc4b96d25230d9\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>", "committedDate": "2020-10-14T13:27:07Z", "type": "commit"}, {"oid": "dada43a07419bd3a313229fe6bfdf1e359e625ff", "url": "https://github.com/eclipse/capella/commit/dada43a07419bd3a313229fe6bfdf1e359e625ff", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nChange-Id: I6627941dabc59334304d364bfdbc4b96d25230d9\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>", "committedDate": "2020-10-14T13:27:07Z", "type": "forcePushed"}]}