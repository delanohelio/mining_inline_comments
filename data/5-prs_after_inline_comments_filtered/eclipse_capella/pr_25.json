{"pr_number": 25, "pr_title": "[559416] Robustify and improve user feedback for Capella project migration", "pr_createdAt": "2020-01-22T14:56:16Z", "pr_url": "https://github.com/eclipse/capella/pull/25", "timeline": [{"oid": "f7df0ef1a03fc41f6c145dedfff2cc6a6c1bb0b3", "url": "https://github.com/eclipse/capella/commit/f7df0ef1a03fc41f6c145dedfff2cc6a6c1bb0b3", "message": "[559416] Robustify and improve user feedback for Capella project\nmigration\n\nBug: 559416\nChange-Id: I5c32a5f63f9744984bf79b4b63687bd1f05d673b\nSigned-off-by: Jeremy Aubry <jaubry@obeo.fr>", "committedDate": "2020-01-22T14:54:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTk4NzIzNA==", "url": "https://github.com/eclipse/capella/pull/25#discussion_r369987234", "bodyText": "CapellaResourceHelper.CAPELLA_MODEL_FILE_EXTENSION", "author": "pdulth", "createdAt": "2020-01-23T08:39:11Z", "path": "core/plugins/org.polarsys.capella.core.data.migration/src/org/polarsys/capella/core/data/migration/handlers/ProjectMigrationHandler.java", "diffHunk": "@@ -55,9 +56,33 @@ public Object execute(ExecutionEvent event) throws ExecutionException {\n   }\r\n \r\n   @Override\r\n-  protected boolean isValidSelection(List<Object> selection) {\r\n+  public boolean isValidSelection(List<Object> selection) {\r\n+    // The selection is valid only if each element is an open project with a melodymodeller file inside.\r\n     for (Object select : selection) {\r\n-      if (!(select instanceof IProject)) {\r\n+      if (select instanceof IProject) {\r\n+        IProject project = (IProject) select;\r\n+        if (!project.isOpen()) {\r\n+          // One element is a closed project.\r\n+          return false;\r\n+        }\r\n+          try {\r\n+            boolean hasMelodymodellerFile = false;\r\n+            for (IResource content : project.members()) {\r\n+              if (\"melodymodeller\".equals(content.getFileExtension())) {\r", "originalCommit": "f7df0ef1a03fc41f6c145dedfff2cc6a6c1bb0b3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "710f3248023e29f156aef77f07aa14cbeb778314", "url": "https://github.com/eclipse/capella/commit/710f3248023e29f156aef77f07aa14cbeb778314", "message": "[559416] Robustify and improve user feedback for Capella project\nmigration\n\nBug: 559416\nChange-Id: I0f65ad23e1dec5e0f832438fa4f425d13cdc1107\nSigned-off-by: Jeremy Aubry <jaubry@obeo.fr>", "committedDate": "2020-01-23T09:13:45Z", "type": "commit"}]}