{"pr_number": 127, "pr_title": "Bugzilla/558032/title block", "pr_createdAt": "2020-03-10T12:01:08Z", "pr_url": "https://github.com/eclipse/capella/pull/127", "timeline": [{"oid": "b3597bf9c6809153dde1671c1c3730449626ed0c", "url": "https://github.com/eclipse/capella/commit/b3597bf9c6809153dde1671c1c3730449626ed0c", "message": "[558032] Title Block Preferences Page\n\nChange-Id: Ifc48c328ab4bd6e8c211bfcfa53a64c23336563b\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-10T11:43:05Z", "type": "commit"}, {"oid": "8cbf181149acec35b9bed85e11fa15ac8e787e98", "url": "https://github.com/eclipse/capella/commit/8cbf181149acec35b9bed85e11fa15ac8e787e98", "message": "Title Block Preferences Page\n- Add validation\n- Save table items to preference store\n\nChange-Id: I5cb35eff127ab356ccd61fa218e6017bcfbdbe8b\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-10T11:43:09Z", "type": "commit"}, {"oid": "db3518af5bd2f28947c4d1cbd34ba6dc5809ac0d", "url": "https://github.com/eclipse/capella/commit/db3518af5bd2f28947c4d1cbd34ba6dc5809ac0d", "message": "[Draft] Edit cells Title Block Preferences\n\nChange-Id: Ie558b256712823440ea2116f3b9999acedd66c0c\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-10T11:43:13Z", "type": "commit"}, {"oid": "b17082d11eca58fee9940ae3930a64754c95cad4", "url": "https://github.com/eclipse/capella/commit/b17082d11eca58fee9940ae3930a64754c95cad4", "message": "[draft] title block preferences - table\n\nChange-Id: Ib1ca945074aa3dfe27212f2e6ebfe9100b05e0e5\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-10T11:43:19Z", "type": "commit"}, {"oid": "6749eaa061cb1c3884a487185e02858a644ae0e7", "url": "https://github.com/eclipse/capella/commit/6749eaa061cb1c3884a487185e02858a644ae0e7", "message": "[Draft] edit cell\n\nChange-Id: I44fe9938e2905bdc9964561974cf78f107363b1d\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-10T11:43:23Z", "type": "commit"}, {"oid": "38909c961b939c0f4c528d7f900bfde8dc8a6501", "url": "https://github.com/eclipse/capella/commit/38909c961b939c0f4c528d7f900bfde8dc8a6501", "message": "[Draft] resize columns, edit cell, add by default Diagram TitleBlock\n\nChange-Id: If9a15461ce4407c254dcc0280dd4a40de4529338\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-10T11:43:27Z", "type": "commit"}, {"oid": "8a151f7433b3596ef5bc36fdc0042b5292af746a", "url": "https://github.com/eclipse/capella/commit/8a151f7433b3596ef5bc36fdc0042b5292af746a", "message": "[Draft] Move Title Block Preference Page under Diagrams, change Diagrams\nto Diagram and add Process/Chain/Path Display Page.\n\nChange-Id: If29f3418ed9b4ac5767beda6514961623d8e5691\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-10T11:44:27Z", "type": "commit"}, {"oid": "59d5ba622e9327812c7c8bded8c8d7f48de6117d", "url": "https://github.com/eclipse/capella/commit/59d5ba622e9327812c7c8bded8c8d7f48de6117d", "message": "Title Block Preferences Page - resolve comments + functionalities for\nadding column or row at selected index.\n\nChange-Id: I88fb6187ceb1c9e0a32a9586143e925bb5bd50eb\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-10T11:47:57Z", "type": "commit"}, {"oid": "a076398f85c49fee265329b24e3da716492c164d", "url": "https://github.com/eclipse/capella/commit/a076398f85c49fee265329b24e3da716492c164d", "message": "Title Block Preferences Page - add min width for cells, display cell\ncontent and usage info.\n\nChange-Id: I3e1a1e85aa84b26ba875136f8b82ec0c68aeefc7\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-10T11:51:44Z", "type": "commit"}, {"oid": "bd1901407f5956f11b69b9dc86e30a196d1c6a7e", "url": "https://github.com/eclipse/capella/commit/bd1901407f5956f11b69b9dc86e30a196d1c6a7e", "message": "Updates on TB Preferences Page ( add -> insert; row -> line)\n\nChange-Id: Ib32ca2579eb6dbbfd3f0f3ee27d2a96bfdbfb391\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-11T11:41:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0MzI0Ng==", "url": "https://github.com/eclipse/capella/pull/127#discussion_r390943246", "bodyText": "can put linesNumber += 1 in insertNewEmptyLine.", "author": "georgiana-ecobici", "createdAt": "2020-03-11T12:43:18Z", "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "diffHunk": "@@ -208,40 +247,34 @@ private void refreshTableRemoveColumn(int index) {\n     v.setInput(removeSelectedColumn(index));\r\n   }\r\n \r\n-  private void refreshTableAddRows(int index) {\r\n-    rowsNumber += 1;\r\n-    v.setInput(addNewEmptyRow(index));\r\n+  private void refreshTableInsertLines(int index) {\r\n+    linesNumber += 1;\r\n+    v.setInput(insertNewEmptyLine(index));\r", "originalCommit": "bd1901407f5956f11b69b9dc86e30a196d1c6a7e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0MzQxOA==", "url": "https://github.com/eclipse/capella/pull/127#discussion_r390943418", "bodyText": "Can be removed.", "author": "georgiana-ecobici", "createdAt": "2020-03-11T12:43:34Z", "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "diffHunk": "@@ -154,38 +177,54 @@ private void createTable(Composite top) {\n     v.getTable().setLayoutData(gridData);\r\n     addMenu(v);\r\n \r\n-    Listener treeListener = new Listener() {\r\n+    Listener tableListener = new Listener() {\r\n       @Override\r\n       public void handleEvent(Event event) {\r\n         switch (event.type) {\r\n-        case SWT.MouseDoubleClick: {\r\n+        case SWT.MouseDown: {\r\n           Point coords = new Point(event.x, event.y);\r\n           ViewerCell cell = v.getCell(coords);\r\n-          int index = cell.getColumnIndex();\r\n-          List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n-          String name = list.get(index).name;\r\n-          String content = list.get(index).content;\r\n-          TitleBlockDialog dialog = new TitleBlockDialog(getShell());\r\n-          if (content.equals(CONTENT_LOWERCASE)) {\r\n-            dialog.setCurrentName(EMPTY_STRING);\r\n-            dialog.setCurrentContent(EMPTY_STRING);\r\n-          } else {\r\n-            dialog.setCurrentName(name);\r\n-            dialog.setCurrentContent(content);\r\n+          if (cell != null) {\r\n+            int index = cell.getColumnIndex();\r\n+            List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n+            String content = list.get(index).content;\r\n+            contentText.setSize(content.length() * 10, contentText.getLineHeight());\r\n+            contentText.setText(content);\r\n           }\r\n-          dialog.create();\r\n-          if (dialog.open() == Window.OK) {\r\n-            list.get(index).name = dialog.getName();\r\n-            list.get(index).content = dialog.getContent();\r\n-            cell.setText(dialog.getName());\r\n \r\n+          break;\r\n+        }\r\n+        case SWT.MouseDoubleClick: {\r\n+          Point coords = new Point(event.x, event.y);\r\n+          ViewerCell cell = v.getCell(coords);\r\n+          if (cell != null) {\r\n+            int index = cell.getColumnIndex();\r\n+            List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n+            String name = list.get(index).name;\r\n+            String content = list.get(index).content;\r\n+            TitleBlockDialog dialog = new TitleBlockDialog(getShell());\r\n+            if (content.equals(CONTENT_LOWERCASE)) {\r\n+              dialog.setCurrentName(EMPTY_STRING);\r\n+              dialog.setCurrentContent(EMPTY_STRING);\r\n+            } else {\r", "originalCommit": "bd1901407f5956f11b69b9dc86e30a196d1c6a7e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0MzY0OA==", "url": "https://github.com/eclipse/capella/pull/127#discussion_r390943648", "bodyText": "use directely list.get(index).name/content.", "author": "georgiana-ecobici", "createdAt": "2020-03-11T12:44:02Z", "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "diffHunk": "@@ -154,38 +177,54 @@ private void createTable(Composite top) {\n     v.getTable().setLayoutData(gridData);\r\n     addMenu(v);\r\n \r\n-    Listener treeListener = new Listener() {\r\n+    Listener tableListener = new Listener() {\r\n       @Override\r\n       public void handleEvent(Event event) {\r\n         switch (event.type) {\r\n-        case SWT.MouseDoubleClick: {\r\n+        case SWT.MouseDown: {\r\n           Point coords = new Point(event.x, event.y);\r\n           ViewerCell cell = v.getCell(coords);\r\n-          int index = cell.getColumnIndex();\r\n-          List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n-          String name = list.get(index).name;\r\n-          String content = list.get(index).content;\r\n-          TitleBlockDialog dialog = new TitleBlockDialog(getShell());\r\n-          if (content.equals(CONTENT_LOWERCASE)) {\r\n-            dialog.setCurrentName(EMPTY_STRING);\r\n-            dialog.setCurrentContent(EMPTY_STRING);\r\n-          } else {\r\n-            dialog.setCurrentName(name);\r\n-            dialog.setCurrentContent(content);\r\n+          if (cell != null) {\r\n+            int index = cell.getColumnIndex();\r\n+            List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n+            String content = list.get(index).content;\r\n+            contentText.setSize(content.length() * 10, contentText.getLineHeight());\r\n+            contentText.setText(content);\r\n           }\r\n-          dialog.create();\r\n-          if (dialog.open() == Window.OK) {\r\n-            list.get(index).name = dialog.getName();\r\n-            list.get(index).content = dialog.getContent();\r\n-            cell.setText(dialog.getName());\r\n \r\n+          break;\r\n+        }\r\n+        case SWT.MouseDoubleClick: {\r\n+          Point coords = new Point(event.x, event.y);\r\n+          ViewerCell cell = v.getCell(coords);\r\n+          if (cell != null) {\r\n+            int index = cell.getColumnIndex();\r\n+            List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n+            String name = list.get(index).name;\r\n+            String content = list.get(index).content;\r\n+            TitleBlockDialog dialog = new TitleBlockDialog(getShell());\r\n+            if (content.equals(CONTENT_LOWERCASE)) {\r\n+              dialog.setCurrentName(EMPTY_STRING);\r\n+              dialog.setCurrentContent(EMPTY_STRING);\r\n+            } else {\r\n+              dialog.setCurrentName(name);\r\n+              dialog.setCurrentContent(content);\r", "originalCommit": "bd1901407f5956f11b69b9dc86e30a196d1c6a7e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0NTU1MA==", "url": "https://github.com/eclipse/capella/pull/127#discussion_r390945550", "bodyText": "can rename it to refreshTableInsertColumns and add columnsNumber += 1 in it.", "author": "georgiana-ecobici", "createdAt": "2020-03-11T12:47:48Z", "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "diffHunk": "@@ -414,71 +451,92 @@ private TableViewerColumn createTableViewerColumn(final TableViewer viewer, fina\n   private void addMenu(final TableViewer v) {\r\n     final MenuManager mgr = new MenuManager();\r\n \r\n-    final Action addRow = new Action(ADD_ROW) {\r\n+    final Action insertLine = new Action(INSERT_LINE) {\r\n       @Override\r\n       public void run() {\r\n-        int rowToAdd = v.getTable().getSelectionIndex() + 1;\r\n-        refreshTableAddRows(rowToAdd);\r\n+        int lineToInsert = v.getTable().getSelectionIndex() + 1;\r\n+        if (lineToInsert != 0) {\r\n+          refreshTableInsertLines(lineToInsert);\r\n+        }\r\n       }\r\n     };\r\n \r\n-    final Action addColumn = new Action(ADD_COLUMN) {\r\n+    final Action insertColumn = new Action(INSERT_COLUMN) {\r\n       @Override\r\n       public void run() {\r\n-        createColumn(v, EMPTY_STRING, v.getTable().getColumnCount());\r\n-        columnsNumber += 1;\r\n-        int columnToAdd = v.getColumnViewerEditor().getFocusCell().getColumnIndex() + 1;\r\n-        refreshTableColumns(columnToAdd);\r\n+        if (v.getColumnViewerEditor().getFocusCell() != null) {\r\n+          createColumn(v, EMPTY_STRING, v.getTable().getColumnCount());\r\n+          columnsNumber += 1;\r\n+          int columnToInsert = v.getColumnViewerEditor().getFocusCell().getColumnIndex() + 1;\r\n+          refreshTableColumns(columnToInsert);\r\n+        }\r", "originalCommit": "bd1901407f5956f11b69b9dc86e30a196d1c6a7e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "933b4b53988f5adcb389625e679101853c799d77", "url": "https://github.com/eclipse/capella/commit/933b4b53988f5adcb389625e679101853c799d77", "message": "Title Block Preferences Page - change default values of table\n\nChange-Id: I60995537e03fc2f7ee8605e992fb130fa9f365f8\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-12T08:22:17Z", "type": "commit"}, {"oid": "706372bd2ac28e847e8118707d1be89cd010b73f", "url": "https://github.com/eclipse/capella/commit/706372bd2ac28e847e8118707d1be89cd010b73f", "message": "Title Block Preferences Page - remove NAME, CONTENT, CONTENT_LOWERCASE\nvariables + refactor\n\nChange-Id: I2b422ade4d4ccba77fa7f483e43d33fa0dececc8\nSigned-off-by: Malina STOICANESCU <malina.stoicanescu@thalesgroup.com>", "committedDate": "2020-03-12T08:42:09Z", "type": "commit"}]}