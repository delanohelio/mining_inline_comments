{"pr_number": 419, "pr_title": "567909", "pr_createdAt": "2020-10-27T15:23:15Z", "pr_url": "https://github.com/eclipse/capella/pull/419", "timeline": [{"oid": "1e29b37eb40594b319cde226f5732bc24c9b1af7", "url": "https://github.com/eclipse/capella/commit/1e29b37eb40594b319cde226f5732bc24c9b1af7", "message": "[567541] Make \"refresh all sub representation\" more reliable\n\n- close all editors before refreshing all representation otherwise the\nopened editors won't be refreshed.\n- report properly when the refresh of a representation failed. That may\nhappen if an exception is raised either in OpeningDiagramJob or\nindirectly in the refresh done on the UI thread.\n- add log info in \"Information\" view\n- log only a summary in error log view\n\nChange-Id: I348c80164a2fcea38d644459de523faab10fd4fe\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>", "committedDate": "2020-10-29T12:46:13Z", "type": "commit"}, {"oid": "5dda4e97ae148b114ec5a1904a6150b32b297157", "url": "https://github.com/eclipse/capella/commit/5dda4e97ae148b114ec5a1904a6150b32b297157", "message": "[567909] Improve analysis selector to be more user friendly\n\nThere as been some improvement on the analysis selector to be more user\nfriendly. As the one provided in Capella was better that the one in\nSirius, it was made as a class (instead of a nested class) so it could\nbe reused properly.\nFurthermore, the move representation actions have been modified. Instead\nof having an action for each available aird file, there is now only one\naction that displays the analysis selector.\n\nBug:567909\nChange-Id: I8398171709a09548a863fd8edd1d163addc2b3a6\nSigned-off-by: Steve Monnier <steve.monnier@obeo.fr>\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>", "committedDate": "2020-10-29T12:46:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIzNDk4MQ==", "url": "https://github.com/eclipse/capella/pull/419#discussion_r514234981", "bodyText": "descriptors shall also be from the same session, otherwise the run doesn't seems to work unlike MoveRepresentationMenuManager", "author": "pdulth", "createdAt": "2020-10-29T12:54:07Z", "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/actions/MoveRepresentationsAction.java", "diffHunk": "@@ -0,0 +1,102 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * \n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ * \n+ * SPDX-License-Identifier: EPL-2.0\n+ * \n+ * Contributors:\n+ *    Obeo - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.sirius.ui.actions;\n+\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.eclipse.core.runtime.OperationCanceledException;\n+import org.eclipse.emf.ecore.EObject;\n+import org.eclipse.jface.viewers.IStructuredSelection;\n+import org.eclipse.sirius.business.api.dialect.command.MoveRepresentationCommand;\n+import org.eclipse.sirius.business.api.session.Session;\n+import org.eclipse.sirius.business.api.session.SessionManager;\n+import org.eclipse.sirius.business.api.session.danalysis.DAnalysisSelector;\n+import org.eclipse.sirius.business.api.session.danalysis.DAnalysisSelectorService;\n+import org.eclipse.sirius.business.api.session.danalysis.DAnalysisSession;\n+import org.eclipse.sirius.diagram.business.api.query.EObjectQuery;\n+import org.eclipse.sirius.ext.base.Option;\n+import org.eclipse.sirius.viewpoint.DAnalysis;\n+import org.eclipse.sirius.viewpoint.DRepresentationDescriptor;\n+import org.eclipse.sirius.viewpoint.ViewpointPackage;\n+import org.eclipse.ui.actions.BaseSelectionListenerAction;\n+import org.polarsys.capella.core.model.handler.helpers.RepresentationHelper;\n+import org.polarsys.capella.core.sirius.ui.Messages;\n+\n+/**\n+ * The action allowing to move representations to a different {@link DAnalysis}.\n+ * \n+ * @author <a href=\"mailto:steve.monnier@obeo.fr\">Steve Monnier</a>\n+ */\n+public class MoveRepresentationsAction extends BaseSelectionListenerAction {\n+\n+  /**\n+   * Constructs the action allowing to open representations.\n+   */\n+  public MoveRepresentationsAction() {\n+    super(Messages.MoveRepresentationsAction_move);\n+  }\n+\n+  @Override\n+  protected boolean updateSelection(IStructuredSelection selection) {\n+    List<DRepresentationDescriptor> validRepresentationDescriptors = getValidRepresentationDescriptors(selection);", "originalCommit": "5dda4e97ae148b114ec5a1904a6150b32b297157", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIzNTA2Mw==", "url": "https://github.com/eclipse/capella/pull/419#discussion_r514235063", "bodyText": "this class was also used in org.polarsys.capella.core.explorer.activity.ui\\src\\org\\polarsys\\capella\\core\\explorer\\activity\\ui\\viewer\\CapellaDiagramViewer\ncan you use your new class in it too.", "author": "pdulth", "createdAt": "2020-10-29T12:54:13Z", "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.navigator/src/org/polarsys/capella/core/platform/sirius/ui/navigator/actions/providers/RepresentationActionProvider.java", "diffHunk": "@@ -26,11 +27,12 @@\n import org.eclipse.ui.navigator.ICommonMenuConstants;\n import org.eclipse.ui.navigator.ICommonViewerSite;\n import org.eclipse.ui.navigator.ICommonViewerWorkbenchSite;\n+import org.eclipse.ui.plugin.AbstractUIPlugin;\n import org.polarsys.capella.core.platform.sirius.ui.navigator.actions.CloneAction;\n import org.polarsys.capella.core.platform.sirius.ui.navigator.actions.SelectionHelper;\n-import org.polarsys.capella.core.platform.sirius.ui.navigator.actions.move.representation.MoveRepresentationMenuManager;", "originalCommit": "5dda4e97ae148b114ec5a1904a6150b32b297157", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8c59c6dfed0dfe62d7876acfb6fe0cd661e21ae5", "url": "https://github.com/eclipse/capella/commit/8c59c6dfed0dfe62d7876acfb6fe0cd661e21ae5", "message": "[567909] Improve analysis selector to be more user friendly\n\nThere as been some improvement on the analysis selector to be more user\nfriendly. As the one provided in Capella was better that the one in\nSirius, it was made as a class (instead of a nested class) so it could\nbe reused properly.\nFurthermore, the move representation actions have been modified. Instead\nof having an action for each available aird file, there is now only one\naction that displays the analysis selector.\n\nBug:567909\nChange-Id: I8398171709a09548a863fd8edd1d163addc2b3a6\nSigned-off-by: Steve Monnier <steve.monnier@obeo.fr>\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>", "committedDate": "2020-10-29T13:33:46Z", "type": "forcePushed"}, {"oid": "7aa060bc9a9ae60ecde7612988a9f9877b65ebc4", "url": "https://github.com/eclipse/capella/commit/7aa060bc9a9ae60ecde7612988a9f9877b65ebc4", "message": "[567909] Improve analysis selector to be more user friendly\n\nThere as been some improvement on the analysis selector to be more user\nfriendly. As the one provided in Capella was better that the one in\nSirius, it was made as a class (instead of a nested class) so it could\nbe reused properly.\nFurthermore, the move representation actions have been modified. Instead\nof having an action for each available aird file, there is now only one\naction that displays the analysis selector.\n\nBug: 567909\nChange-Id: I8398171709a09548a863fd8edd1d163addc2b3a6\nSigned-off-by: Steve Monnier <steve.monnier@obeo.fr>\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>", "committedDate": "2020-10-29T13:55:55Z", "type": "commit"}, {"oid": "7aa060bc9a9ae60ecde7612988a9f9877b65ebc4", "url": "https://github.com/eclipse/capella/commit/7aa060bc9a9ae60ecde7612988a9f9877b65ebc4", "message": "[567909] Improve analysis selector to be more user friendly\n\nThere as been some improvement on the analysis selector to be more user\nfriendly. As the one provided in Capella was better that the one in\nSirius, it was made as a class (instead of a nested class) so it could\nbe reused properly.\nFurthermore, the move representation actions have been modified. Instead\nof having an action for each available aird file, there is now only one\naction that displays the analysis selector.\n\nBug: 567909\nChange-Id: I8398171709a09548a863fd8edd1d163addc2b3a6\nSigned-off-by: Steve Monnier <steve.monnier@obeo.fr>\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>", "committedDate": "2020-10-29T13:55:55Z", "type": "forcePushed"}]}