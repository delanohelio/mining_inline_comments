{"pr_number": 4529, "pr_title": "DHFPROD-5338: Bookmark redirect", "pr_createdAt": "2020-09-04T06:33:45Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4529", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUwNDg4Ng==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4529#discussion_r484504886", "bodyText": "noticed a lot of redirect requests for /websocket when running e2e. Filtering /websocket alongwith /api gets rid of the issue. Will probably push the changes after running some more e2e tests", "author": "bsrikan", "createdAt": "2020-09-07T15:57:56Z", "path": "marklogic-data-hub-central/src/main/java/com/marklogic/hub/central/auth/WebSecurityConfiguration.java", "diffHunk": "@@ -55,7 +59,13 @@ protected void configure(HttpSecurity http) throws Exception {\n             .addFilterAfter(new AuthenticationFilter(hubCentral, hubClientProvider), LogoutFilter.class)\n             .csrf().disable()\n             // Need to setStatus, sendError causes issues. see https://stackoverflow.com/a/34911131\n-            .exceptionHandling().authenticationEntryPoint(((request, response, authException) -> response.setStatus(HttpServletResponse.SC_UNAUTHORIZED)))\n+            .exceptionHandling().authenticationEntryPoint(((request, response, authException) -> {\n+                if (request.getRequestURI().startsWith(\"/api/\")) {", "originalCommit": "5899c981dac988aba90cd95521388b57047124a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU3NjYzOQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4529#discussion_r484576639", "bodyText": "This is fixed now.", "author": "bsrikan", "createdAt": "2020-09-07T22:17:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUwNDg4Ng=="}], "type": "inlineReview"}, {"oid": "c513445113b7487884e5d5a1078653c220482084", "url": "https://github.com/marklogic/marklogic-data-hub/commit/c513445113b7487884e5d5a1078653c220482084", "message": "DHFPROD-5338: e2e test and minor redirect fixes", "committedDate": "2020-09-07T20:39:23Z", "type": "forcePushed"}, {"oid": "1d1096b27c398a43533dfa7ff95003f7ee19edfa", "url": "https://github.com/marklogic/marklogic-data-hub/commit/1d1096b27c398a43533dfa7ff95003f7ee19edfa", "message": "DHFPROD-5338: Handle internal bookmarks when unauthorized\n1. Redirect user to login\n2. Include route as URL param for redirection\n\nDHFPROD-5338: e2e test and minor redirect fixes\n\nDHFPROD-5338: When Detail URI is undefined, redirect to Explore\n\nDHFPROD-5338: add unit test, updated e2e for login", "committedDate": "2020-09-09T21:06:14Z", "type": "commit"}, {"oid": "1d1096b27c398a43533dfa7ff95003f7ee19edfa", "url": "https://github.com/marklogic/marklogic-data-hub/commit/1d1096b27c398a43533dfa7ff95003f7ee19edfa", "message": "DHFPROD-5338: Handle internal bookmarks when unauthorized\n1. Redirect user to login\n2. Include route as URL param for redirection\n\nDHFPROD-5338: e2e test and minor redirect fixes\n\nDHFPROD-5338: When Detail URI is undefined, redirect to Explore\n\nDHFPROD-5338: add unit test, updated e2e for login", "committedDate": "2020-09-09T21:06:14Z", "type": "forcePushed"}]}