{"pr_number": 4057, "pr_title": "DHFPROD-4670: Add hub-central-flow-writer role", "pr_createdAt": "2020-06-05T21:02:49Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4057", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIwMDYwNA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4057#discussion_r436200604", "bodyText": "Is this change intentional. Srinath fixed it so test will pass in 9.0-12.", "author": "bsrikan", "createdAt": "2020-06-05T23:04:30Z", "path": "marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/FlowMvcTest.java", "diffHunk": "@@ -25,12 +25,7 @@\n     @Test\n     void runIngestionStep() throws Exception {\n         installReferenceModelProject();\n-        if(isVersionCompatibleWith520Roles()) {\n-            loginAsTestUserWithRoles(\"hub-central-step-runner\");\n-        }\n-        else {\n-            loginAsTestUserWithRoles(\"hub-central-step-runner\", \"flow-operator-role\");\n-        }\n+        loginAsTestUserWithRoles(\"hub-central-step-runner\");", "originalCommit": "67a97c24dfbc6b1fa4d5a974a1547f51a09fcb90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIwMTM3NQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4057#discussion_r436201375", "bodyText": "Yes. I adjusted hub-central-step-runner to work with both 9.0-12 and 10.0-*", "author": "ryanjdew", "createdAt": "2020-06-05T23:08:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIwMDYwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIwMzU1Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4057#discussion_r436203557", "bodyText": "Thanks Ryan. I deleted the other comment after seeing the existing flow was asserted and it seems to have deleted your comment as well. Sorry about that.", "author": "bsrikan", "createdAt": "2020-06-05T23:19:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIwMDYwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQxOTQ2Mg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4057#discussion_r436419462", "bodyText": "I think this needs to be writeFlow. I had asked Shannon to change step-writer to flow-writer because the role allows for modifying flows, not steps. We have separate roles - one per step type - that control who can write a step.", "author": "rjrudin", "createdAt": "2020-06-08T00:58:28Z", "path": "marklogic-data-hub-central/src/main/java/com/marklogic/hub/central/controllers/FlowController.java", "diffHunk": "@@ -54,32 +54,37 @@\n     @RequestMapping(method = RequestMethod.POST)\n     @ResponseBody\n     @ApiOperation(value = \"Create a flow\", response = FlowInfo.class)\n+    @Secured(\"ROLE_writeStep\")", "originalCommit": "67a97c24dfbc6b1fa4d5a974a1547f51a09fcb90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjgwMjg3Ng==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4057#discussion_r436802876", "bodyText": "Refactored these to be readFlow/writeFlow", "author": "ryanjdew", "createdAt": "2020-06-08T15:38:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQxOTQ2Mg=="}], "type": "inlineReview"}, {"oid": "ecd0ccd0a15f380499a0d80a6fa561b847c3e634", "url": "https://github.com/marklogic/marklogic-data-hub/commit/ecd0ccd0a15f380499a0d80a6fa561b847c3e634", "message": "DHFPROD-4670: Add hub-central-flow-writer role", "committedDate": "2020-06-08T05:53:14Z", "type": "forcePushed"}, {"oid": "9d314bba281b78a0386d1e9deda8f824dd6aa976", "url": "https://github.com/marklogic/marklogic-data-hub/commit/9d314bba281b78a0386d1e9deda8f824dd6aa976", "message": "DHFPROD-4670: Add hub-central-flow-writer role", "committedDate": "2020-06-08T17:12:29Z", "type": "forcePushed"}, {"oid": "0897f9b6a2eefcb0c022b85ee1a8758f4095de7b", "url": "https://github.com/marklogic/marklogic-data-hub/commit/0897f9b6a2eefcb0c022b85ee1a8758f4095de7b", "message": "DHFPROD-4670: Add hub-central-flow-writer role", "committedDate": "2020-06-08T20:27:08Z", "type": "forcePushed"}, {"oid": "990e3ea628d8ffe6b556b54f85e2f28a9ac61ccf", "url": "https://github.com/marklogic/marklogic-data-hub/commit/990e3ea628d8ffe6b556b54f85e2f28a9ac61ccf", "message": "DHFPROD-4670: Add hub-central-flow-writer role", "committedDate": "2020-06-08T23:55:21Z", "type": "commit"}, {"oid": "990e3ea628d8ffe6b556b54f85e2f28a9ac61ccf", "url": "https://github.com/marklogic/marklogic-data-hub/commit/990e3ea628d8ffe6b556b54f85e2f28a9ac61ccf", "message": "DHFPROD-4670: Add hub-central-flow-writer role", "committedDate": "2020-06-08T23:55:21Z", "type": "forcePushed"}]}