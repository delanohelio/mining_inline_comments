{"pr_number": 4732, "pr_title": "Fix OIDC logout", "pr_createdAt": "2020-02-21T12:48:46Z", "pr_url": "https://github.com/apereo/cas/pull/4732", "timeline": [{"oid": "05a9ee1d98af38623e1f277fe39bd30c9aeb2745", "url": "https://github.com/apereo/cas/commit/05a9ee1d98af38623e1f277fe39bd30c9aeb2745", "message": "Fix OIDC logout", "committedDate": "2020-02-21T12:39:14Z", "type": "commit"}, {"oid": "53ad7a3178a0edaa7170c926f85fbc76319dd88c", "url": "https://github.com/apereo/cas/commit/53ad7a3178a0edaa7170c926f85fbc76319dd88c", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-21T12:57:23Z", "type": "commit"}, {"oid": "ad3eaa318419f6a3695fa2ab5f6236f86526543f", "url": "https://github.com/apereo/cas/commit/ad3eaa318419f6a3695fa2ab5f6236f86526543f", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-21T14:27:24Z", "type": "commit"}, {"oid": "4c768903c2d31df98b2bdcdf2c4c67f635f1c53b", "url": "https://github.com/apereo/cas/commit/4c768903c2d31df98b2bdcdf2c4c67f635f1c53b", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-21T15:57:24Z", "type": "commit"}, {"oid": "3ce1ac7d26d4f53efd065a0e2ac9807bc90f371b", "url": "https://github.com/apereo/cas/commit/3ce1ac7d26d4f53efd065a0e2ac9807bc90f371b", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-21T17:27:22Z", "type": "commit"}, {"oid": "13292cd1fb27b373c262b8e7219edf4acfa8649a", "url": "https://github.com/apereo/cas/commit/13292cd1fb27b373c262b8e7219edf4acfa8649a", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-21T18:57:23Z", "type": "commit"}, {"oid": "0de207f2dbd06fc246690ad3c5a543141508faa8", "url": "https://github.com/apereo/cas/commit/0de207f2dbd06fc246690ad3c5a543141508faa8", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-21T20:27:23Z", "type": "commit"}, {"oid": "50752572ac61ca19469261e890892db8ffdec594", "url": "https://github.com/apereo/cas/commit/50752572ac61ca19469261e890892db8ffdec594", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-21T21:57:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2OTcyOA==", "url": "https://github.com/apereo/cas/pull/4732#discussion_r384969728", "bodyText": "Please revert this change; it's preferable to not depend on CasProtocolConstants if possible.", "author": "mmoayyed", "createdAt": "2020-02-27T08:15:55Z", "path": "api/cas-server-core-api-configuration-model/src/main/java/org/apereo/cas/configuration/model/core/logout/LogoutProperties.java", "diffHunk": "@@ -25,7 +26,7 @@\n      * is indicated and extracted by a parameter name of your choosing here. If none specified,\n      * the default will be used as {@code service}.\n      */\n-    private String redirectParameter;\n+    private String redirectParameter = CasProtocolConstants.PARAMETER_SERVICE;", "originalCommit": "50752572ac61ca19469261e890892db8ffdec594", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk4NDI4NQ==", "url": "https://github.com/apereo/cas/pull/4732#discussion_r384984285", "bodyText": "Hi,\nSo, should I just default it like this ?\nprivate String redirectParameter = \"service\"\n\nIf it is not defined, the second bug described in this PR will occurs. Or should I default it in the OidcLogoutEndpointController.java file ?\nRegards,\nJulien", "author": "julienhuon", "createdAt": "2020-02-27T08:49:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2OTcyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk4NDgzNA==", "url": "https://github.com/apereo/cas/pull/4732#discussion_r384984834", "bodyText": "The second option, where you default it much like the LogoutAction, as:\nStringUtils.defaultIfEmpty(logoutProperties.getRedirectParameter(), CasProtocolConstants.PARAMETER_SERVICE);", "author": "mmoayyed", "createdAt": "2020-02-27T08:50:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2OTcyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk4NTIyMw==", "url": "https://github.com/apereo/cas/pull/4732#discussion_r384985223", "bodyText": "On second thought using \"service\" as the default is perfectly fine too :)", "author": "mmoayyed", "createdAt": "2020-02-27T08:51:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2OTcyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk4NzQ3Ng==", "url": "https://github.com/apereo/cas/pull/4732#discussion_r384987476", "bodyText": "Ok.\nWill do it in a few hours. :)", "author": "julienhuon", "createdAt": "2020-02-27T08:56:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2OTcyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI1ODEzOQ==", "url": "https://github.com/apereo/cas/pull/4732#discussion_r385258139", "bodyText": "Done.", "author": "julienhuon", "createdAt": "2020-02-27T17:26:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2OTcyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2OTg1NQ==", "url": "https://github.com/apereo/cas/pull/4732#discussion_r384969855", "bodyText": "Please revert this; See above.", "author": "mmoayyed", "createdAt": "2020-02-27T08:16:13Z", "path": "support/cas-server-support-actions/src/main/java/org/apereo/cas/web/flow/logout/LogoutAction.java", "diffHunk": "@@ -52,7 +51,7 @@ protected Event doInternalExecute(final HttpServletRequest request, final HttpSe\n             () -> Boolean.FALSE)\n             .get();\n \n-        val paramName = StringUtils.defaultIfEmpty(logoutProperties.getRedirectParameter(), CasProtocolConstants.PARAMETER_SERVICE);", "originalCommit": "50752572ac61ca19469261e890892db8ffdec594", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6335cc374e38abf73599179cfdf8b7491a7b859e", "url": "https://github.com/apereo/cas/commit/6335cc374e38abf73599179cfdf8b7491a7b859e", "message": "RedirectParameter defaulted to \"service\".", "committedDate": "2020-02-27T17:25:05Z", "type": "commit"}, {"oid": "75a04755350112a45c1837229e3adf98a026d272", "url": "https://github.com/apereo/cas/commit/75a04755350112a45c1837229e3adf98a026d272", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-27T23:44:09Z", "type": "commit"}, {"oid": "02252e9f951762bf4be2cd18b2e1ae73274491d0", "url": "https://github.com/apereo/cas/commit/02252e9f951762bf4be2cd18b2e1ae73274491d0", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-28T04:14:11Z", "type": "commit"}, {"oid": "ce77b9fcff2b6542d27e668d173ab4a4c59cb7d5", "url": "https://github.com/apereo/cas/commit/ce77b9fcff2b6542d27e668d173ab4a4c59cb7d5", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-28T07:14:06Z", "type": "commit"}, {"oid": "f46bf82cc62c12c397309236b904f7f78b5b5534", "url": "https://github.com/apereo/cas/commit/f46bf82cc62c12c397309236b904f7f78b5b5534", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-28T13:14:10Z", "type": "commit"}, {"oid": "32f1fc6d60664a3c13a92c03117b2dbc16f17882", "url": "https://github.com/apereo/cas/commit/32f1fc6d60664a3c13a92c03117b2dbc16f17882", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-28T17:44:06Z", "type": "commit"}, {"oid": "a1291b3c34e0754e7c7d38723efd48aeb36713f4", "url": "https://github.com/apereo/cas/commit/a1291b3c34e0754e7c7d38723efd48aeb36713f4", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-28T22:17:27Z", "type": "commit"}, {"oid": "f1ad6e493b221990460a4222aef598d338cf0eeb", "url": "https://github.com/apereo/cas/commit/f1ad6e493b221990460a4222aef598d338cf0eeb", "message": "Merge branch 'master' into oidclogoutmaster", "committedDate": "2020-02-29T07:17:31Z", "type": "commit"}]}