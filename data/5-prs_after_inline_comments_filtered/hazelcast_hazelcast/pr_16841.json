{"pr_number": 16841, "pr_title": "Don't retry member based invocations if TargetNotMember", "pr_createdAt": "2020-04-02T09:07:07Z", "pr_url": "https://github.com/hazelcast/hazelcast/pull/16841", "timeline": [{"oid": "e3aea383eefab6cee4f674451d97af9bedd0e5d4", "url": "https://github.com/hazelcast/hazelcast/commit/e3aea383eefab6cee4f674451d97af9bedd0e5d4", "message": "Don't retry member based invocations if TargetNotMember\n\nregression caused by changes in #16603\n\nWe were not retrying an invocation if it is send to a specific member\nand exception is TargetNotMemberException .\nWe have removed this check since we are not throwing\nTargetNotMemberException on the client side anymore. In this failure\nexception comes from the server. It seems this check is still needed.\nThis pr puts it back.\n\nfixes https://github.com/hazelcast/hazelcast/issues/16836\n\n(cherry picked from commit d3b20d7f35458167afc6cbd922b6eae654965c10)", "committedDate": "2020-04-02T09:03:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE3MDYyNA==", "url": "https://github.com/hazelcast/hazelcast/pull/16841#discussion_r402170624", "bodyText": "typo if target is not longer a member --> if target is no longer a member", "author": "ihsandemir", "createdAt": "2020-04-02T09:19:45Z", "path": "hazelcast/src/main/java/com/hazelcast/client/impl/spi/impl/ClientInvocation.java", "diffHunk": "@@ -347,6 +346,13 @@ private boolean shouldRetry(Throwable t) {\n             return false;\n         }\n \n+        if (uuid != null && t instanceof TargetNotMemberException) {\n+            //when invocation send to a specific member\n+            //if target is not longer a member, we should not retry", "originalCommit": "e3aea383eefab6cee4f674451d97af9bedd0e5d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4c1b5b36e7e5874566da8ff212dcdda9ae53dba8", "url": "https://github.com/hazelcast/hazelcast/commit/4c1b5b36e7e5874566da8ff212dcdda9ae53dba8", "message": "typo fix", "committedDate": "2020-04-02T09:26:21Z", "type": "commit"}]}