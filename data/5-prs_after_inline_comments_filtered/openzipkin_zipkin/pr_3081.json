{"pr_number": 3081, "pr_title": "Friendly advice about trim", "pr_createdAt": "2020-05-15T02:29:26Z", "pr_url": "https://github.com/openzipkin/zipkin/pull/3081", "timeline": [{"oid": "ed7d974cf57a7eb5a0d4c1850050bab63a312ea1", "url": "https://github.com/openzipkin/zipkin/commit/ed7d974cf57a7eb5a0d4c1850050bab63a312ea1", "message": "Friendly advice about  trim()\n\nFriendly advice\r\nwhen use \"@get(\"/api/v2/trace/{traceId}\")\"\r\nhere is the code traceId = Span.normalizeTraceId(traceId);\r\nif trace with space , it will doesnt work.\r\n\r\n[ in ZipkinQueryApiV2, we add this \u201c traceId = traceId != null ? traceId.trim() :null; \u201d ]\r\n\r\nI think it's okay to add trim when querying, this performance is not affected at all.\r\nMaybe this is not the best way to deal with it, you can also improve it according to the friendliness I mentioned in the follow-up, and you do n\u2019t have to use mine completely.\r\nI also mentioned that adding a common to SPAN may cause low performance problems, so set the trim here", "committedDate": "2020-05-15T02:26:45Z", "type": "commit"}, {"oid": "59d53d590cf26211fdc30ee2171eb092fcee3ae5", "url": "https://github.com/openzipkin/zipkin/commit/59d53d590cf26211fdc30ee2171eb092fcee3ae5", "message": "Merge pull request #1 from uckyk/uckyk-patch-2\n\nFriendly advice about  trim()", "committedDate": "2020-05-15T02:27:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUzNDcwNw==", "url": "https://github.com/openzipkin/zipkin/pull/3081#discussion_r425534707", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                traceId = traceId != null ? traceId.trim() :null;\n          \n          \n            \n                traceId = traceId != null ? traceId.trim() : null;", "author": "codefromthecrypt", "createdAt": "2020-05-15T02:40:47Z", "path": "zipkin-server/src/main/java/zipkin2/server/internal/ZipkinQueryApiV2.java", "diffHunk": "@@ -151,6 +151,7 @@ public AggregatedHttpResponse getTraces(\n   @Get(\"/api/v2/trace/{traceId}\")\n   @Blocking\n   public AggregatedHttpResponse getTrace(@Param(\"traceId\") String traceId) throws IOException {\n+    traceId = traceId != null ? traceId.trim() :null;", "originalCommit": "59d53d590cf26211fdc30ee2171eb092fcee3ae5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "68b8743223f824ab83316c18547cd53f651640d9", "url": "https://github.com/openzipkin/zipkin/commit/68b8743223f824ab83316c18547cd53f651640d9", "message": "format", "committedDate": "2020-05-15T02:40:55Z", "type": "commit"}, {"oid": "5c75bd9501b146bce58f8e3c3c2cc8b02d8d6b21", "url": "https://github.com/openzipkin/zipkin/commit/5c75bd9501b146bce58f8e3c3c2cc8b02d8d6b21", "message": "add test\n\nadd trim test", "committedDate": "2020-05-15T02:56:59Z", "type": "commit"}]}