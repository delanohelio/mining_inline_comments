{"pr_number": 8511, "pr_title": "BAEL-3583: JAAS", "pr_createdAt": "2020-01-12T09:49:19Z", "pr_url": "https://github.com/eugenp/tutorials/pull/8511", "timeline": [{"oid": "849d4ea36c8e586a0ed6e4847ef0399d9d890733", "url": "https://github.com/eugenp/tutorials/commit/849d4ea36c8e586a0ed6e4847ef0399d9d890733", "message": "security jaas", "committedDate": "2020-01-12T09:48:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODgxNDAxMg==", "url": "https://github.com/eugenp/tutorials/pull/8511#discussion_r368814012", "bodyText": "Follow our standard multi-line continuation rules here", "author": "eric-martin", "createdAt": "2020-01-21T05:11:44Z", "path": "security-jaas/jaas-login-module/src/main/java/com/baeldung/security/jaas/authentication/InMemoryLoginModule.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package com.baeldung.security.jaas.authentication;\n+\n+import com.sun.security.auth.UserPrincipal;\n+\n+import javax.security.auth.Subject;\n+import javax.security.auth.callback.*;\n+import javax.security.auth.login.LoginException;\n+import javax.security.auth.spi.LoginModule;\n+import java.io.IOException;\n+import java.security.Principal;\n+import java.util.Map;\n+\n+public class InMemoryLoginModule implements LoginModule {\n+\n+    private static final String USERNAME = \"testuser\";\n+    private static final String PASSWORD = \"testpassword\";\n+\n+    private Subject subject;\n+    private CallbackHandler callbackHandler;\n+    private Map<String, ?> sharedState;\n+    private Map<String, ?> options;\n+\n+    private String username;\n+    private boolean loginSucceeded = false;\n+    private Principal userPrincipal;\n+\n+    @Override\n+    public void initialize(Subject subject,\n+                           CallbackHandler callbackHandler,\n+                           Map<String, ?> sharedState,\n+                           Map<String, ?> options) {", "originalCommit": "849d4ea36c8e586a0ed6e4847ef0399d9d890733", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODgxNTA5MA==", "url": "https://github.com/eugenp/tutorials/pull/8511#discussion_r368815090", "bodyText": "Is it safe to save state in the module with private variables? Does each login get a new instance of the Module?", "author": "eric-martin", "createdAt": "2020-01-21T05:18:14Z", "path": "security-jaas/jaas-login-module/src/main/java/com/baeldung/security/jaas/authentication/InMemoryLoginModule.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package com.baeldung.security.jaas.authentication;\n+\n+import com.sun.security.auth.UserPrincipal;\n+\n+import javax.security.auth.Subject;\n+import javax.security.auth.callback.*;\n+import javax.security.auth.login.LoginException;\n+import javax.security.auth.spi.LoginModule;\n+import java.io.IOException;\n+import java.security.Principal;\n+import java.util.Map;\n+\n+public class InMemoryLoginModule implements LoginModule {\n+\n+    private static final String USERNAME = \"testuser\";\n+    private static final String PASSWORD = \"testpassword\";\n+\n+    private Subject subject;\n+    private CallbackHandler callbackHandler;\n+    private Map<String, ?> sharedState;\n+    private Map<String, ?> options;\n+\n+    private String username;\n+    private boolean loginSucceeded = false;\n+    private Principal userPrincipal;", "originalCommit": "849d4ea36c8e586a0ed6e4847ef0399d9d890733", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0NjMxMw==", "url": "https://github.com/eugenp/tutorials/pull/8511#discussion_r372046313", "bodyText": "Yes each LoginContext#Login() ==> Call of all LoginModule#login() in a first pass and call of LoginModule#commit() in a second pass.\nHere is the LoginContext#login() method:\npublic void login() throws LoginException {\n    loginSucceeded = false;\n\n    if (subject == null) {\n        subject = new Subject();\n    }\n\n    try {\n        // module invoked in doPrivileged\n        invokePriv(LOGIN_METHOD);\n        invokePriv(COMMIT_METHOD);\n        loginSucceeded = true;\n    } catch (LoginException le) {", "author": "eelhazati", "createdAt": "2020-01-28T20:46:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODgxNTA5MA=="}], "type": "inlineReview"}, {"oid": "6099a6236cd7ec4478b4776d8953f0ace2677578", "url": "https://github.com/eugenp/tutorials/commit/6099a6236cd7ec4478b4776d8953f0ace2677578", "message": "security jaas: tabs", "committedDate": "2020-01-28T20:30:00Z", "type": "commit"}, {"oid": "9d6e991c90db63649142c3b9dce04a523b1becc2", "url": "https://github.com/eugenp/tutorials/commit/9d6e991c90db63649142c3b9dce04a523b1becc2", "message": "security jaas: tabs", "committedDate": "2020-01-28T20:38:07Z", "type": "commit"}, {"oid": "d6ac0c4aa1cebcf99bb45baef73737f91f62b2f3", "url": "https://github.com/eugenp/tutorials/commit/d6ac0c4aa1cebcf99bb45baef73737f91f62b2f3", "message": "Update InMemoryLoginModule.java", "committedDate": "2020-02-03T20:17:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzAxNzA4MA==", "url": "https://github.com/eugenp/tutorials/pull/8511#discussion_r383017080", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    System.out.println(subject.getPrincipals().iterator().next() + \" sucessfully logeed in\");\n          \n          \n            \n                    System.out.println(subject.getPrincipals().iterator().next() + \" sucessfully logged in\");", "author": "KevinGilmore", "createdAt": "2020-02-23T16:08:34Z", "path": "security-jaas/jaas-app/src/main/java/com/baeldung/security/jaas/app/JaasAuthentication.java", "diffHunk": "@@ -0,0 +1,13 @@\n+package com.baeldung.security.jaas.app;\n+\n+import javax.security.auth.Subject;\n+import javax.security.auth.login.LoginException;\n+\n+public class JaasAuthentication {\n+\n+    public static void main(String[] args) throws LoginException {\n+        LoginService loginService = new LoginService();\n+        Subject subject = loginService.login();\n+        System.out.println(subject.getPrincipals().iterator().next() + \" sucessfully logeed in\");", "originalCommit": "d6ac0c4aa1cebcf99bb45baef73737f91f62b2f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "88808cacd72b3b5d60d9752b1ff116ba925d7a79", "url": "https://github.com/eugenp/tutorials/commit/88808cacd72b3b5d60d9752b1ff116ba925d7a79", "message": "move jaas to core security module.", "committedDate": "2020-02-29T15:46:05Z", "type": "commit"}, {"oid": "28e7040cba54f144d853cf3d88dede3109d18d87", "url": "https://github.com/eugenp/tutorials/commit/28e7040cba54f144d853cf3d88dede3109d18d87", "message": "revert", "committedDate": "2020-03-06T14:19:36Z", "type": "commit"}, {"oid": "3bbf8e30310ded38e20146fb011e408a6f19801d", "url": "https://github.com/eugenp/tutorials/commit/3bbf8e30310ded38e20146fb011e408a6f19801d", "message": "move code to core-java-security-2", "committedDate": "2020-03-08T21:28:17Z", "type": "commit"}, {"oid": "a3b011434c0a6f0ad0e69adeb30749200b3571f1", "url": "https://github.com/eugenp/tutorials/commit/a3b011434c0a6f0ad0e69adeb30749200b3571f1", "message": "Remove tabs", "committedDate": "2020-03-12T18:34:24Z", "type": "commit"}, {"oid": "339fe359a69fa55c5308dd856ae9bc7d5d8b9edc", "url": "https://github.com/eugenp/tutorials/commit/339fe359a69fa55c5308dd856ae9bc7d5d8b9edc", "message": "Merge branch 'master' into master", "committedDate": "2020-03-14T03:25:15Z", "type": "commit"}, {"oid": "0ef09dc0c7c1201f8bc396288d713faba7d1ec11", "url": "https://github.com/eugenp/tutorials/commit/0ef09dc0c7c1201f8bc396288d713faba7d1ec11", "message": "Update pom.xml", "committedDate": "2020-03-14T03:29:04Z", "type": "commit"}]}