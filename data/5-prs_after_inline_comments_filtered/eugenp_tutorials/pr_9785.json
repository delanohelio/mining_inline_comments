{"pr_number": 9785, "pr_title": "[BAEL-4381] Introduction to ArchUnit", "pr_createdAt": "2020-07-28T13:33:17Z", "pr_url": "https://github.com/eugenp/tutorials/pull/9785", "timeline": [{"oid": "f1359b620f96277921b1b1572b40ed6eefe09605", "url": "https://github.com/eugenp/tutorials/commit/f1359b620f96277921b1b1572b40ed6eefe09605", "message": "[BAEL-4381] Intro to ArchUnit", "committedDate": "2020-07-28T13:26:00Z", "type": "commit"}, {"oid": "12fe9f3c71c39657118c3e28d78f6c78b1a4881d", "url": "https://github.com/eugenp/tutorials/commit/12fe9f3c71c39657118c3e28d78f6c78b1a4881d", "message": "[BAEL-4381] Intro to ArchUnit\n\nCode formatting", "committedDate": "2020-07-28T13:30:33Z", "type": "commit"}, {"oid": "0e0fb4fa6ee67f4669d1e23b3a911b2c37233e1c", "url": "https://github.com/eugenp/tutorials/commit/0e0fb4fa6ee67f4669d1e23b3a911b2c37233e1c", "message": "[BAEL-4381] Intro to ArchUnit\n\nCode formatting", "committedDate": "2020-07-28T13:31:18Z", "type": "commit"}, {"oid": "92c0f251dc56acc7608cd55056988234517d42a0", "url": "https://github.com/eugenp/tutorials/commit/92c0f251dc56acc7608cd55056988234517d42a0", "message": "[BAEL-4381] Intro to ArchUnit\n\nPackage typo", "committedDate": "2020-07-28T13:44:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5NzQ4OQ==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470297489", "bodyText": "There shouldn't be Javadoc comments.", "author": "bfontana", "createdAt": "2020-08-13T23:10:10Z", "path": "libraries-testing/src/main/java/com/baeldung/archunit/smurfs/persistence/SmurfsRepository.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/**\n+ * \n+ */\n+package com.baeldung.archunit.smurfs.persistence;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.TreeMap;\n+\n+import com.baeldung.archunit.smurfs.persistence.domain.Smurf;\n+\n+import static java.util.stream.Collectors.toList;\n+\n+/**", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5NzY2Mg==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470297662", "bodyText": "Same here. Delete javadoc.", "author": "bfontana", "createdAt": "2020-08-13T23:10:43Z", "path": "libraries-testing/src/main/java/com/baeldung/archunit/smurfs/persistence/domain/Smurf.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/**", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5NzcwOQ==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470297709", "bodyText": "Same here", "author": "bfontana", "createdAt": "2020-08-13T23:10:56Z", "path": "libraries-testing/src/main/java/com/baeldung/archunit/smurfs/persistence/domain/Smurf.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/**\n+ * \n+ */\n+package com.baeldung.archunit.smurfs.persistence.domain;\n+\n+/**", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5Nzc5Ng==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470297796", "bodyText": "Please remove all javadoc comments.", "author": "bfontana", "createdAt": "2020-08-13T23:11:17Z", "path": "libraries-testing/src/main/java/com/baeldung/archunit/smurfs/persistence/domain/Smurf.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/**\n+ * \n+ */\n+package com.baeldung.archunit.smurfs.persistence.domain;\n+\n+/**\n+ * @author Philippe\n+ *\n+ */\n+public class Smurf {\n+    private String name;\n+    private boolean comic;\n+    private boolean cartoon;\n+\n+    public Smurf() {}\n+\n+    public Smurf(String name, boolean comic, boolean cartoon) {\n+        this.name = name;\n+        this.comic = comic;\n+        this.cartoon = cartoon;\n+    }\n+\n+    /**", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTA0NTE1Ng==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r471045156", "bodyText": "Removed", "author": "psevestre", "createdAt": "2020-08-15T23:48:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5Nzc5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5Nzg3Mg==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470297872", "bodyText": "Remove javadoc", "author": "bfontana", "createdAt": "2020-08-13T23:11:32Z", "path": "libraries-testing/src/main/java/com/baeldung/archunit/smurfs/service/SmurfsService.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/**", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5NzkyMA==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470297920", "bodyText": "Please remove all javadocs.", "author": "bfontana", "createdAt": "2020-08-13T23:11:43Z", "path": "libraries-testing/src/main/java/com/baeldung/archunit/smurfs/service/SmurfsService.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/**\n+ * \n+ */\n+package com.baeldung.archunit.smurfs.service;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import org.springframework.stereotype.Component;\n+\n+import com.baeldung.archunit.smurfs.persistence.SmurfsRepository;\n+import com.baeldung.archunit.smurfs.persistence.domain.Smurf;\n+import com.baeldung.archunit.smurfs.service.dto.SmurfDTO;\n+\n+/**", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5ODYyNA==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470298624", "bodyText": "An empty constructor isn't necessary.", "author": "bfontana", "createdAt": "2020-08-13T23:14:15Z", "path": "libraries-testing/src/main/java/com/baeldung/archunit/smurfs/persistence/SmurfsRepository.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/**\n+ * \n+ */\n+package com.baeldung.archunit.smurfs.persistence;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.TreeMap;\n+\n+import com.baeldung.archunit.smurfs.persistence.domain.Smurf;\n+\n+import static java.util.stream.Collectors.toList;\n+\n+/**\n+ * @author Philippe\n+ *\n+ */\n+public class SmurfsRepository {\n+    \n+    private static Map<String,Smurf> smurfs = Collections.synchronizedMap(new TreeMap<>());\n+    \n+    static {\n+        // Just a few here. A full list can be found \n+        // at https://smurfs.fandom.com/wiki/List_of_Smurf_characters\n+        smurfs.put(\"Papa\", new Smurf(\"Papa\", true, true));\n+        smurfs.put(\"Actor\", new Smurf(\"Actor\", true, true));\n+        smurfs.put(\"Alchemist\", new Smurf(\"Alchemist\", true, true));\n+        smurfs.put(\"Archeologist\", new Smurf(\"Archeologist\", true, true));\n+        smurfs.put(\"Architect\", new Smurf(\"Architect\", true, true));\n+        smurfs.put(\"Baby\", new Smurf(\"Baby\", true, true));\n+        smurfs.put(\"Baker\", new Smurf(\"Baker\", true, true));\n+        smurfs.put(\"Baker\", new Smurf(\"Baker\", true, true));\n+    }\n+    \n+    public SmurfsRepository() {", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5OTk2MA==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470299960", "bodyText": "There are some issues with Fluent API formatting. The formatted recommended in the Author's documentation should help. Sometimes even after using the formatter, may still be some issues you have to tweak manually.", "author": "bfontana", "createdAt": "2020-08-13T23:18:29Z", "path": "libraries-testing/src/test/java/com/baeldung/archunit/smurfs/SmurfsArchUnitTest.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/**\n+ * \n+ */\n+package com.baeldung.archunit.smurfs;\n+\n+\n+import com.tngtech.archunit.core.domain.JavaClasses;\n+import com.tngtech.archunit.core.importer.ClassFileImporter;\n+import com.tngtech.archunit.lang.ArchRule;\n+import com.tngtech.archunit.library.Architectures.LayeredArchitecture;\n+\n+import static com.tngtech.archunit.lang.syntax.ArchRuleDefinition.classes;\n+import static com.tngtech.archunit.lang.syntax.ArchRuleDefinition.noClasses;\n+import static com.tngtech.archunit.library.Architectures.layeredArchitecture;\n+\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n+\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * @author Philippe\n+ *\n+ */\n+public class SmurfsArchUnitTest {\n+    \n+    @Test\n+    public void givenPresentationLayerClasses_thenWrongCheckFails() {        \n+        JavaClasses jc = new ClassFileImporter().importPackages(\"com.baeldung.archunit.smurfs\");\n+        \n+        ArchRule r1 = classes()", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDMwMDAzOA==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470300038", "bodyText": "Same here", "author": "bfontana", "createdAt": "2020-08-13T23:18:48Z", "path": "libraries-testing/src/test/java/com/baeldung/archunit/smurfs/SmurfsArchUnitTest.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/**\n+ * \n+ */\n+package com.baeldung.archunit.smurfs;\n+\n+\n+import com.tngtech.archunit.core.domain.JavaClasses;\n+import com.tngtech.archunit.core.importer.ClassFileImporter;\n+import com.tngtech.archunit.lang.ArchRule;\n+import com.tngtech.archunit.library.Architectures.LayeredArchitecture;\n+\n+import static com.tngtech.archunit.lang.syntax.ArchRuleDefinition.classes;\n+import static com.tngtech.archunit.lang.syntax.ArchRuleDefinition.noClasses;\n+import static com.tngtech.archunit.library.Architectures.layeredArchitecture;\n+\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n+\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * @author Philippe\n+ *\n+ */\n+public class SmurfsArchUnitTest {\n+    \n+    @Test\n+    public void givenPresentationLayerClasses_thenWrongCheckFails() {        \n+        JavaClasses jc = new ClassFileImporter().importPackages(\"com.baeldung.archunit.smurfs\");\n+        \n+        ArchRule r1 = classes()\n+          .that()\n+            .resideInAPackage(\"..presentation..\")\n+          .should()\n+            .onlyDependOnClassesThat()\n+              .resideInAPackage(\"..service..\");\n+    \n+        assertThrows(AssertionError.class, ()-> r1.check(jc)) ;\n+    }\n+    \n+\n+    @Test\n+    public void givenPresentationLayerClasses_thenCheckWithFrameworkDependenciesSuccess() {        \n+        JavaClasses jc = new ClassFileImporter().importPackages(\"com.baeldung.archunit.smurfs\");\n+        \n+        ArchRule r1 = classes()\n+          .that()", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDMwMDA3OQ==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470300079", "bodyText": "And here", "author": "bfontana", "createdAt": "2020-08-13T23:18:57Z", "path": "libraries-testing/src/test/java/com/baeldung/archunit/smurfs/SmurfsArchUnitTest.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/**\n+ * \n+ */\n+package com.baeldung.archunit.smurfs;\n+\n+\n+import com.tngtech.archunit.core.domain.JavaClasses;\n+import com.tngtech.archunit.core.importer.ClassFileImporter;\n+import com.tngtech.archunit.lang.ArchRule;\n+import com.tngtech.archunit.library.Architectures.LayeredArchitecture;\n+\n+import static com.tngtech.archunit.lang.syntax.ArchRuleDefinition.classes;\n+import static com.tngtech.archunit.lang.syntax.ArchRuleDefinition.noClasses;\n+import static com.tngtech.archunit.library.Architectures.layeredArchitecture;\n+\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n+\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * @author Philippe\n+ *\n+ */\n+public class SmurfsArchUnitTest {\n+    \n+    @Test\n+    public void givenPresentationLayerClasses_thenWrongCheckFails() {        \n+        JavaClasses jc = new ClassFileImporter().importPackages(\"com.baeldung.archunit.smurfs\");\n+        \n+        ArchRule r1 = classes()\n+          .that()\n+            .resideInAPackage(\"..presentation..\")\n+          .should()\n+            .onlyDependOnClassesThat()\n+              .resideInAPackage(\"..service..\");\n+    \n+        assertThrows(AssertionError.class, ()-> r1.check(jc)) ;\n+    }\n+    \n+\n+    @Test\n+    public void givenPresentationLayerClasses_thenCheckWithFrameworkDependenciesSuccess() {        \n+        JavaClasses jc = new ClassFileImporter().importPackages(\"com.baeldung.archunit.smurfs\");\n+        \n+        ArchRule r1 = classes()\n+          .that()\n+            .resideInAPackage(\"..presentation..\")\n+          .should()\n+            .onlyDependOnClassesThat()\n+              .resideInAnyPackage(\"..service..\", \"java..\", \"javax..\", \"org.springframework..\");\n+\n+        r1.check(jc);\n+    }\n+\n+    @Test\n+    public void givenPresentationLayerClasses_thenNoPersistenceLayerAccess() {        \n+        JavaClasses jc = new ClassFileImporter().importPackages(\"com.baeldung.archunit.smurfs\");\n+        \n+        ArchRule r1 = noClasses()\n+          .that()", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDMwMDE5OQ==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r470300199", "bodyText": "Remove javadoc comments", "author": "bfontana", "createdAt": "2020-08-13T23:19:21Z", "path": "libraries-testing/src/main/java/com/baeldung/archunit/smurfs/service/dto/SmurfDTO.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/**", "originalCommit": "92c0f251dc56acc7608cd55056988234517d42a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTA0NTEyNA==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r471045124", "bodyText": "Removed", "author": "psevestre", "createdAt": "2020-08-15T23:48:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDMwMDE5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTA0NTEyNQ==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r471045125", "bodyText": "Removed", "author": "psevestre", "createdAt": "2020-08-15T23:48:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDMwMDE5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTA0NTEzMQ==", "url": "https://github.com/eugenp/tutorials/pull/9785#discussion_r471045131", "bodyText": "Removed", "author": "psevestre", "createdAt": "2020-08-15T23:48:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDMwMDE5OQ=="}], "type": "inlineReview"}, {"oid": "f25f99673b1b64c6613241afcb129be049467432", "url": "https://github.com/eugenp/tutorials/commit/f25f99673b1b64c6613241afcb129be049467432", "message": "Merge branch 'master' of https://github.com/eugenp/tutorials", "committedDate": "2020-08-14T12:24:37Z", "type": "commit"}, {"oid": "b2ce6f2836ef23d70788be9ad47d7840d4cfdf71", "url": "https://github.com/eugenp/tutorials/commit/b2ce6f2836ef23d70788be9ad47d7840d4cfdf71", "message": "[BAEL-4381] Fix formatting", "committedDate": "2020-08-14T12:29:27Z", "type": "commit"}, {"oid": "8b7c80c376055484023224b64dcbd0eca6a559b7", "url": "https://github.com/eugenp/tutorials/commit/8b7c80c376055484023224b64dcbd0eca6a559b7", "message": "[BAEL-4381] Fix formatting", "committedDate": "2020-08-14T14:41:36Z", "type": "commit"}, {"oid": "de268d18d5c2de791186d153111f6441422634d4", "url": "https://github.com/eugenp/tutorials/commit/de268d18d5c2de791186d153111f6441422634d4", "message": "[BAEL-4381] Fix formatting", "committedDate": "2020-08-15T01:58:58Z", "type": "commit"}, {"oid": "3aecde22dd12f40891a57a147c5009f81608d408", "url": "https://github.com/eugenp/tutorials/commit/3aecde22dd12f40891a57a147c5009f81608d408", "message": "[BAEL-4381] Fix formatting", "committedDate": "2020-08-17T14:58:25Z", "type": "commit"}, {"oid": "de79bd2919ea26cb83f190dfa6a715ec5bf34540", "url": "https://github.com/eugenp/tutorials/commit/de79bd2919ea26cb83f190dfa6a715ec5bf34540", "message": "Update SmurfsArchUnitTest.java", "committedDate": "2020-08-18T00:49:49Z", "type": "commit"}]}