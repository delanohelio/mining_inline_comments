{"pr_number": 2881, "pr_title": "[NCL-5030] Possible to create invalid repository configurations", "pr_createdAt": "2020-02-25T10:57:32Z", "pr_url": "https://github.com/project-ncl/pnc/pull/2881", "timeline": [{"oid": "54c60d90f55a7e2e7ed47b942e6784db37fbfa45", "url": "https://github.com/project-ncl/pnc/commit/54c60d90f55a7e2e7ed47b942e6784db37fbfa45", "message": "[NCL-5030] Possible to create invalid repository configurations", "committedDate": "2020-02-26T09:03:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ0NzQ2NA==", "url": "https://github.com/project-ncl/pnc/pull/2881#discussion_r384447464", "bodyText": "move to validateInternalRepository", "author": "janinko", "createdAt": "2020-02-26T11:57:42Z", "path": "facade/src/main/java/org/jboss/pnc/facade/providers/SCMRepositoryProviderImpl.java", "diffHunk": "@@ -154,6 +154,8 @@ public RepositoryCreationResponse createSCMRepository(String scmUrl, Boolean pre\n         log.trace(\"Received request to start RC creation with url autodetect: \" + scmUrl + \" (sync enabled? \" + preBuildSyncEnabled + \")\");\n         if(StringUtils.isEmpty(scmUrl)) throw new InvalidEntityException(\"You must specify the SCM URL.\");\n \n+        if(scmUrl.contains(config.getInternalScmAuthority()) && scmUrl.contains(\"/gerrit/\")) throw new InvalidEntityException(\"Incorrect format of internal repository.\");", "originalCommit": "54c60d90f55a7e2e7ed47b942e6784db37fbfa45", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b61ba53d0bca8f4d6fa26cd4dbb6df76313c1188", "url": "https://github.com/project-ncl/pnc/commit/b61ba53d0bca8f4d6fa26cd4dbb6df76313c1188", "message": "[NCL-5030] Possible to create invalid repository configurations", "committedDate": "2020-02-26T12:12:10Z", "type": "commit"}, {"oid": "b61ba53d0bca8f4d6fa26cd4dbb6df76313c1188", "url": "https://github.com/project-ncl/pnc/commit/b61ba53d0bca8f4d6fa26cd4dbb6df76313c1188", "message": "[NCL-5030] Possible to create invalid repository configurations", "committedDate": "2020-02-26T12:12:10Z", "type": "forcePushed"}]}