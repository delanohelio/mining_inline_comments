{"pr_number": 2023, "pr_title": "Use profiles in web UI / graphhopper maps", "pr_createdAt": "2020-04-29T21:44:34Z", "pr_url": "https://github.com/graphhopper/graphhopper/pull/2023", "timeline": [{"oid": "7c91c4e8f2560cb13b3e1f29b53556185052c03f", "url": "https://github.com/graphhopper/graphhopper/commit/7c91c4e8f2560cb13b3e1f29b53556185052c03f", "message": "Use profiles in web ui", "committedDate": "2020-04-29T16:05:14Z", "type": "commit"}, {"oid": "a581c6614babaf9110c568f5f90494ccb4f3713d", "url": "https://github.com/graphhopper/graphhopper/commit/a581c6614babaf9110c568f5f90494ccb4f3713d", "message": "Fix integration for pt", "committedDate": "2020-04-29T21:01:39Z", "type": "commit"}, {"oid": "88c6589b097fbc5afb78d69b58bacd87115205a3", "url": "https://github.com/graphhopper/graphhopper/commit/88c6589b097fbc5afb78d69b58bacd87115205a3", "message": "Merge branch 'master' into profile_ui", "committedDate": "2020-04-29T21:17:38Z", "type": "commit"}, {"oid": "9c646c44a0c54df5532080e4bc66399a9de7e06b", "url": "https://github.com/graphhopper/graphhopper/commit/9c646c44a0c54df5532080e4bc66399a9de7e06b", "message": "Fix profile name display/translation", "committedDate": "2020-04-29T21:34:13Z", "type": "commit"}, {"oid": "ee0767982b8ebd9be4502e9d0829743becc45d0a", "url": "https://github.com/graphhopper/graphhopper/commit/ee0767982b8ebd9be4502e9d0829743becc45d0a", "message": "Extract createRouteCallBack as in master", "committedDate": "2020-04-30T09:22:36Z", "type": "commit"}, {"oid": "5020b7e2e89d9fb4f3b2af7630bbdaf0cb168819", "url": "https://github.com/graphhopper/graphhopper/commit/5020b7e2e89d9fb4f3b2af7630bbdaf0cb168819", "message": "Merge branch 'master' into profile_ui\n\n# Conflicts:\n#\tweb/src/main/resources/assets/js/main-template.js", "committedDate": "2020-04-30T09:24:16Z", "type": "commit"}, {"oid": "2d7853ae75804155d64c5a189c499be280bc9fcc", "url": "https://github.com/graphhopper/graphhopper/commit/2d7853ae75804155d64c5a189c499be280bc9fcc", "message": "merged master", "committedDate": "2020-05-02T19:45:49Z", "type": "commit"}, {"oid": "74b8c396ab6f32decbf6e7debc5fdaefeaf66440", "url": "https://github.com/graphhopper/graphhopper/commit/74b8c396ab6f32decbf6e7debc5fdaefeaf66440", "message": "pick profile from api_params, no need to put it into the text box", "committedDate": "2020-05-02T19:56:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5NzMzMw==", "url": "https://github.com/graphhopper/graphhopper/pull/2023#discussion_r418997333", "bodyText": "this could be a bit shorter ;)\nreturn \"pt\".equals(maybeProfile)\nAnd should we also remove the profile param in the filter method above? (replaceQueryParam(\"profile\"))", "author": "karussell", "createdAt": "2020-05-02T19:23:19Z", "path": "web-bundle/src/main/java/com/graphhopper/http/PtRedirectFilter.java", "diffHunk": "@@ -40,6 +40,13 @@ public void filter(ContainerRequestContext requestContext) {\n \n     private boolean shouldRedirect(ContainerRequestContext requestContext) {\n         String maybeVehicle = requestContext.getUriInfo().getQueryParameters().getFirst(\"vehicle\");\n-        return maybeVehicle != null && maybeVehicle.equals(\"pt\");\n+        if (maybeVehicle != null && maybeVehicle.equals(\"pt\")) {\n+            return true;\n+        }\n+        String maybeProfile = requestContext.getUriInfo().getQueryParameters().getFirst(\"profile\");\n+        if (maybeProfile != null && maybeProfile.equals(\"pt\")) {\n+            return true;\n+        }\n+        return false;", "originalCommit": "5020b7e2e89d9fb4f3b2af7630bbdaf0cb168819", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI4MDI1Ng==", "url": "https://github.com/graphhopper/graphhopper/pull/2023#discussion_r419280256", "bodyText": "this could be a bit shorter ;) return \"pt\".equals(maybeProfile)\n\nAh yes I was trying to keep the symmetry :)\n\nAnd should we also remove the profile param in the filter method above?\n\nGood idea, yes, I think so.", "author": "easbar", "createdAt": "2020-05-04T08:24:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5NzMzMw=="}], "type": "inlineReview"}, {"oid": "860f2d2f767f5fe6b430e7083eb5926872aaeb5b", "url": "https://github.com/graphhopper/graphhopper/commit/860f2d2f767f5fe6b430e7083eb5926872aaeb5b", "message": "Remove profile after redirecting PT requests", "committedDate": "2020-05-04T08:31:33Z", "type": "commit"}, {"oid": "7ff09783a8ad6e98e5faa453f5219acd41382215", "url": "https://github.com/graphhopper/graphhopper/commit/7ff09783a8ad6e98e5faa453f5219acd41382215", "message": "Display profile name *or* translated name", "committedDate": "2020-05-04T09:02:45Z", "type": "commit"}, {"oid": "3744e786032424554b0f5b243a8c757ea3e83eeb", "url": "https://github.com/graphhopper/graphhopper/commit/3744e786032424554b0f5b243a8c757ea3e83eeb", "message": "Add (hard-coded) client version for now", "committedDate": "2020-05-04T09:02:57Z", "type": "commit"}, {"oid": "a79f40bb77e4ce3da63ebec322c6743ffdf89eb0", "url": "https://github.com/graphhopper/graphhopper/commit/a79f40bb77e4ce3da63ebec322c6743ffdf89eb0", "message": "Remove todos", "committedDate": "2020-05-05T13:03:05Z", "type": "commit"}, {"oid": "e85e9557da44c619128685fdf39d3b7292f09156", "url": "https://github.com/graphhopper/graphhopper/commit/e85e9557da44c619128685fdf39d3b7292f09156", "message": "Merge branch 'master' into profile_ui", "committedDate": "2020-05-05T13:03:15Z", "type": "commit"}]}