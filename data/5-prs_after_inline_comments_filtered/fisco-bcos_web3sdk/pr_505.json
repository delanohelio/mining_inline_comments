{"pr_number": 505, "pr_title": "Release 2.3.0 solc j", "pr_createdAt": "2020-02-14T02:31:12Z", "pr_url": "https://github.com/FISCO-BCOS/web3sdk/pull/505", "timeline": [{"oid": "8f045604b39b1539cb8ffef859571d6a9b46dd5a", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/8f045604b39b1539cb8ffef859571d6a9b46dd5a", "message": "add sm binary parame for wrapper generator", "committedDate": "2020-02-13T15:15:38Z", "type": "commit"}, {"oid": "20b6b5fd4afdb8cdcc50e3a5b19edef1c41f8c97", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/20b6b5fd4afdb8cdcc50e3a5b19edef1c41f8c97", "message": "fix java wrapper code generator bug", "committedDate": "2020-02-13T15:45:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTIyNDMwOA==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/505#discussion_r379224308", "bodyText": "[PMD] Found non-transient, non-static member. Please mark as transient or provide accessors. (see on Sider)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nBeanMembersShouldSerialize\nError Prone\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_errorprone.html#beanmembersshouldserialize", "author": "sider", "createdAt": "2020-02-14T02:32:50Z", "path": "src/main/java/org/fisco/bcos/web3j/codegen/SolidityFunctionWrapperGenerator.java", "diffHunk": "@@ -138,6 +140,14 @@ public static void main(String[] args) {\n                 required = false)\n         private File binFile;\n \n+        @Option(\n+                names = {\"-s\", \"--smBinFile\"},\n+                description =\n+                        \"sm bin file with contract compiled code \"\n+                                + \"in order to generate deploy methods.\",\n+                required = false)\n+        private File smBinFile;", "originalCommit": "20b6b5fd4afdb8cdcc50e3a5b19edef1c41f8c97", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "99d14052aee389d94cbbe7ec84664b67ecdf9d06", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/99d14052aee389d94cbbe7ec84664b67ecdf9d06", "message": "add private key type check when", "committedDate": "2020-03-08T08:03:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NTY2MQ==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/505#discussion_r389345661", "bodyText": "[PMD] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can mark this issue as closed if you should not tackle it. (see our document about issues)", "author": "sider", "createdAt": "2020-03-08T08:05:30Z", "path": "src/main/java/org/fisco/bcos/web3j/crypto/EncryptType.java", "diffHunk": "@@ -25,11 +35,33 @@ public EncryptType(int encryptType) {\n         Hash.setHashInterface(hashInterface);\n     }\n \n+    public static void checkAccountPrivateKey(ECParameterSpec ecParameterSpec, int encryptType) {\n+        try {\n+            String name = ((ECNamedCurveSpec) ecParameterSpec).getName();\n+            boolean privateKeyMatch =\n+                    ((EncryptType.ECDSA_TYPE != EncryptType.encryptType) && name.contains(\"sm2\"))", "originalCommit": "99d14052aee389d94cbbe7ec84664b67ecdf9d06", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NTY2NA==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/505#discussion_r389345664", "bodyText": "[PMD] Potential violation of Law of Demeter (object not created locally) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can mark this issue as closed if you should not tackle it. (see our document about issues)", "author": "sider", "createdAt": "2020-03-08T08:05:31Z", "path": "src/main/java/org/fisco/bcos/web3j/crypto/EncryptType.java", "diffHunk": "@@ -25,11 +35,33 @@ public EncryptType(int encryptType) {\n         Hash.setHashInterface(hashInterface);\n     }\n \n+    public static void checkAccountPrivateKey(ECParameterSpec ecParameterSpec, int encryptType) {\n+        try {\n+            String name = ((ECNamedCurveSpec) ecParameterSpec).getName();\n+            boolean privateKeyMatch =\n+                    ((EncryptType.ECDSA_TYPE != EncryptType.encryptType) && name.contains(\"sm2\"))\n+                            || ((EncryptType.ECDSA_TYPE == EncryptType.encryptType)\n+                                    && name.contains(\"secp256k1\"));", "originalCommit": "99d14052aee389d94cbbe7ec84664b67ecdf9d06", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NTY2Ng==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/505#discussion_r389345666", "bodyText": "[PMD] Potential violation of Law of Demeter (method chain calls) (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nLawOfDemeter\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_design.html#lawofdemeter\n\nYou can mark this issue as closed if you should not tackle it. (see our document about issues)", "author": "sider", "createdAt": "2020-03-08T08:05:32Z", "path": "src/main/java/org/fisco/bcos/web3j/crypto/EncryptType.java", "diffHunk": "@@ -25,11 +35,33 @@ public EncryptType(int encryptType) {\n         Hash.setHashInterface(hashInterface);\n     }\n \n+    public static void checkAccountPrivateKey(ECParameterSpec ecParameterSpec, int encryptType) {\n+        try {\n+            String name = ((ECNamedCurveSpec) ecParameterSpec).getName();", "originalCommit": "99d14052aee389d94cbbe7ec84664b67ecdf9d06", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NTY2OQ==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/505#discussion_r389345669", "bodyText": "[PMD] Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nAvoidCatchingGenericException\nDesign\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.21.0/pmd_rules_java_design.html#avoidcatchinggenericexception\n\nYou can mark this issue as closed if you should not tackle it. (see our document about issues)", "author": "sider", "createdAt": "2020-03-08T08:05:33Z", "path": "src/main/java/org/fisco/bcos/web3j/crypto/EncryptType.java", "diffHunk": "@@ -25,11 +35,33 @@ public EncryptType(int encryptType) {\n         Hash.setHashInterface(hashInterface);\n     }\n \n+    public static void checkAccountPrivateKey(ECParameterSpec ecParameterSpec, int encryptType) {\n+        try {\n+            String name = ((ECNamedCurveSpec) ecParameterSpec).getName();\n+            boolean privateKeyMatch =\n+                    ((EncryptType.ECDSA_TYPE != EncryptType.encryptType) && name.contains(\"sm2\"))\n+                            || ((EncryptType.ECDSA_TYPE == EncryptType.encryptType)\n+                                    && name.contains(\"secp256k1\"));\n+\n+            // logger.trace(\" name: {}, encrypt: {}\", name, encryptType);\n+\n+            if (!privateKeyMatch) {\n+                throw new IllegalArgumentException(\n+                        \" Not matched private key type, type name: \"\n+                                + name\n+                                + \", encryptType: \"\n+                                + EncryptType.encryptType);\n+            }\n+        } catch (Exception e) {", "originalCommit": "99d14052aee389d94cbbe7ec84664b67ecdf9d06", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3ba7e31564e952a2cb099d246e13fb05ef0b28d0", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/3ba7e31564e952a2cb099d246e13fb05ef0b28d0", "message": "update gradle shell", "committedDate": "2020-03-08T08:47:24Z", "type": "forcePushed"}, {"oid": "154b3ed4f147dff9f7e15cdeaa9ee2e2d7e932ee", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/154b3ed4f147dff9f7e15cdeaa9ee2e2d7e932ee", "message": "update gradle shell", "committedDate": "2020-03-08T08:53:28Z", "type": "forcePushed"}, {"oid": "4c80842b0cc9be55082a2b7c2a96dd1da1d68a7c", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/4c80842b0cc9be55082a2b7c2a96dd1da1d68a7c", "message": "update gradle shell", "committedDate": "2020-03-08T09:15:43Z", "type": "forcePushed"}, {"oid": "9ee2a925f5b682db68b6fcf856e862b8f013e8ff", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9ee2a925f5b682db68b6fcf856e862b8f013e8ff", "message": "update gradle shell", "committedDate": "2020-03-08T14:28:52Z", "type": "commit"}, {"oid": "9ee2a925f5b682db68b6fcf856e862b8f013e8ff", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9ee2a925f5b682db68b6fcf856e862b8f013e8ff", "message": "update gradle shell", "committedDate": "2020-03-08T14:28:52Z", "type": "forcePushed"}]}