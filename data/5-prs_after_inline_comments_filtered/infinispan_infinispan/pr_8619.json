{"pr_number": 8619, "pr_title": "ISPN-12220: expression defaults not working correctly", "pr_createdAt": "2020-08-12T09:05:22Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8619", "timeline": [{"oid": "54d5e3ce9bf2479908f18419c308a99ef83fd149", "url": "https://github.com/infinispan/infinispan/commit/54d5e3ce9bf2479908f18419c308a99ef83fd149", "message": "ISPN-12220: expression defaults not working correctly\nDefaults for infinispan.cluster.name and infinispan.cluster.stack are set hardcoded, the defaults within the expression ${:XXX} are not working.", "committedDate": "2020-10-21T09:57:13Z", "type": "commit"}, {"oid": "54d5e3ce9bf2479908f18419c308a99ef83fd149", "url": "https://github.com/infinispan/infinispan/commit/54d5e3ce9bf2479908f18419c308a99ef83fd149", "message": "ISPN-12220: expression defaults not working correctly\nDefaults for infinispan.cluster.name and infinispan.cluster.stack are set hardcoded, the defaults within the expression ${:XXX} are not working.", "committedDate": "2020-10-21T09:57:13Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIwNTQxOA==", "url": "https://github.com/infinispan/infinispan/pull/8619#discussion_r510205418", "bodyText": "I disagree with this change. If you remove the expression, it will default to cluster.", "author": "tristantarrant", "createdAt": "2020-10-22T14:25:15Z", "path": "server/runtime/src/main/java/org/infinispan/server/logging/Messages.java", "diffHunk": "@@ -54,11 +54,11 @@\n    @Message(\"Specifies a logging configuration file. Defaults to `%s`.\")\n    String serverHelpLoggingConfig(String defaultConfiguration);\n \n-   @Message(\"Sets the name of the cluster. Defaults to `%s`.\")\n-   String serverHelpClusterName(String defaultClusterName);\n+   @Message(\"Sets the name of the cluster. Default set by configuration expression\")\n+   String serverHelpClusterName();", "originalCommit": "54d5e3ce9bf2479908f18419c308a99ef83fd149", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIxNDg3Ng==", "url": "https://github.com/infinispan/infinispan/pull/8619#discussion_r510214876", "bodyText": "Actually, ignore me: after looking at #8782 I think we should rely exclusively on the property substitution without pushing defaults into the sysprops for both cluster and stack", "author": "tristantarrant", "createdAt": "2020-10-22T14:36:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIwNTQxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIwNTYwNw==", "url": "https://github.com/infinispan/infinispan/pull/8619#discussion_r510205607", "bodyText": "I disagree with this change. If you remove the expression, it will default to tcp.", "author": "tristantarrant", "createdAt": "2020-10-22T14:25:30Z", "path": "server/runtime/src/main/java/org/infinispan/server/logging/Messages.java", "diffHunk": "@@ -54,11 +54,11 @@\n    @Message(\"Specifies a logging configuration file. Defaults to `%s`.\")\n    String serverHelpLoggingConfig(String defaultConfiguration);\n \n-   @Message(\"Sets the name of the cluster. Defaults to `%s`.\")\n-   String serverHelpClusterName(String defaultClusterName);\n+   @Message(\"Sets the name of the cluster. Default set by configuration expression\")\n+   String serverHelpClusterName();\n \n-   @Message(\"Specifies the JGroups stack for clustering. Defaults to `%s`.\")\n-   String serverHelpClusterStack(String defaultStack);\n+   @Message(\"Specifies the JGroups stack for clustering. Default set by configuration expression\")\n+   String serverHelpClusterStack();", "originalCommit": "54d5e3ce9bf2479908f18419c308a99ef83fd149", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}