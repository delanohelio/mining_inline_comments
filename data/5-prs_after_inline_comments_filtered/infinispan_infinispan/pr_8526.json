{"pr_number": 8526, "pr_title": "ISPN-12077 Serializer unable to serialize scattered caches", "pr_createdAt": "2020-07-02T11:17:09Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8526", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQxMTQ0OQ==", "url": "https://github.com/infinispan/infinispan/pull/8526#discussion_r450411449", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  writer.writeAttribute(INVALIDATION_BATCH_SIZE, Integer.toString(configuration.clustering().invalidationBatchSize()));\n          \n          \n            \n                  configuration.clustering().attributes().write(writer, ClusteringConfiguration.INVALIDATION_BATCH_SIZE, INVALIDATION_BATCH_SIZE);\n          \n      \n    \n    \n  \n\nit only serializes if the attribute changes.\nHow about the other attributes? BIAS_ACQUISITION and BIAS_LIFESPAN are configurable programmatically but they aren't parser...", "author": "pruivo", "createdAt": "2020-07-06T18:41:17Z", "path": "core/src/main/java/org/infinispan/configuration/serializing/Serializer.java", "diffHunk": "@@ -383,6 +386,15 @@ private void writeInvalidationCache(XMLExtendedStreamWriter writer, String name,\n       writer.writeEndElement();\n    }\n \n+   private void writeScatteredCache(XMLExtendedStreamWriter writer, String name, Configuration configuration) throws XMLStreamException {\n+      writer.writeStartElement(Element.SCATTERED_CACHE);\n+      writer.writeAttribute(INVALIDATION_BATCH_SIZE, Integer.toString(configuration.clustering().invalidationBatchSize()));", "originalCommit": "5fa088c745446f6f5f789d91982868b0b27eeb18", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDcwNTUzNg==", "url": "https://github.com/infinispan/infinispan/pull/8526#discussion_r450705536", "bodyText": "I just copied what was in the Parser. I can add these as well", "author": "ryanemerson", "createdAt": "2020-07-07T08:45:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQxMTQ0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDcxMjc2Nw==", "url": "https://github.com/infinispan/infinispan/pull/8526#discussion_r450712767", "bodyText": "if you don't mind :) I hope it doesn't break anything xD", "author": "pruivo", "createdAt": "2020-07-07T08:57:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQxMTQ0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDc3NDc4Mw==", "url": "https://github.com/infinispan/infinispan/pull/8526#discussion_r450774783", "bodyText": "I've added the missing attributes to the parser, serializer and the .xsd", "author": "ryanemerson", "createdAt": "2020-07-07T10:47:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQxMTQ0OQ=="}], "type": "inlineReview"}, {"oid": "6a87cd2cca2beb6b2c787261ef2180c6bd0c855a", "url": "https://github.com/infinispan/infinispan/commit/6a87cd2cca2beb6b2c787261ef2180c6bd0c855a", "message": "ISPN-12077 Serializer unable to serialize scattered caches\n\n- Missing BIAS_ACQUISITION and BIAS_LIFESPAN attributes added to the parser", "committedDate": "2020-07-07T10:45:03Z", "type": "commit"}, {"oid": "6a87cd2cca2beb6b2c787261ef2180c6bd0c855a", "url": "https://github.com/infinispan/infinispan/commit/6a87cd2cca2beb6b2c787261ef2180c6bd0c855a", "message": "ISPN-12077 Serializer unable to serialize scattered caches\n\n- Missing BIAS_ACQUISITION and BIAS_LIFESPAN attributes added to the parser", "committedDate": "2020-07-07T10:45:03Z", "type": "forcePushed"}]}