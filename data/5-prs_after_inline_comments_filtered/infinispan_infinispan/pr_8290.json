{"pr_number": 8290, "pr_title": "ISPN-11706 Use XidImpl internally", "pr_createdAt": "2020-05-07T09:38:20Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8290", "timeline": [{"oid": "3a570d95d3557f552aa2ebde5f1154e34ae51592", "url": "https://github.com/infinispan/infinispan/commit/3a570d95d3557f552aa2ebde5f1154e34ae51592", "message": "ISPN-11706 Use XidImpl internally\n\n* Use externalizer in InDoubtTxInfo and XidImpl", "committedDate": "2020-05-07T09:35:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAyNjkyNg==", "url": "https://github.com/infinispan/infinispan/pull/8290#discussion_r423026926", "bodyText": "Looks like we can revert these two.", "author": "wburns", "createdAt": "2020-05-11T13:10:18Z", "path": "commons/all/src/main/java/org/infinispan/commons/marshall/Ids.java", "diffHunk": "@@ -50,7 +50,7 @@\n    int XID_DEADLOCK_DETECTING_GLOBAL_TRANSACTION = 33;\n    int XID_GLOBAL_TRANSACTION = 34;\n \n-   //int IN_DOUBT_TX_INFO = 35;\n+   int IN_DOUBT_TX_INFO = 35;", "originalCommit": "3a570d95d3557f552aa2ebde5f1154e34ae51592", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0ODkwOQ==", "url": "https://github.com/infinispan/infinispan/pull/8290#discussion_r423048909", "bodyText": "InDoubtTxInfo and XidImpl must use the Externalizer and not Protostream.\nThat's why I'm reverting the previous changes.", "author": "pruivo", "createdAt": "2020-05-11T13:43:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAyNjkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1MDE5Mw==", "url": "https://github.com/infinispan/infinispan/pull/8290#discussion_r423050193", "bodyText": "Oh sorry I read the changes in inverse :)", "author": "wburns", "createdAt": "2020-05-11T13:45:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAyNjkyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NTI5Ng==", "url": "https://github.com/infinispan/infinispan/pull/8290#discussion_r423045296", "bodyText": "@ryanemerson can we remove these? It looks like this was on added in 11.0.0.Dev4, but that was because the file was moved. I wasn't quite sure what the rules were on this yet.", "author": "wburns", "createdAt": "2020-05-11T13:38:11Z", "path": "commons/all/src/main/java/org/infinispan/commons/marshall/ProtoStreamTypeIds.java", "diffHunk": "@@ -54,8 +54,6 @@\n    int META_PARAMS_INTERNAL_METADATA = CORE_LOWER_BOUND + 3;\n    int REMOTE_METADATA = CORE_LOWER_BOUND + 4;\n    int UUID = CORE_LOWER_BOUND + 5;\n-   int XID_IMPL = UUID + 1;", "originalCommit": "3a570d95d3557f552aa2ebde5f1154e34ae51592", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0OTMwMw==", "url": "https://github.com/infinispan/infinispan/pull/8290#discussion_r423049303", "bodyText": "@wburns no. This was added after Dev05 build. There is not release with XidImpl using Protostream.", "author": "pruivo", "createdAt": "2020-05-11T13:43:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NTI5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1MTU1OQ==", "url": "https://github.com/infinispan/infinispan/pull/8290#discussion_r423051559", "bodyText": "Ah yes I see 7070374#diff-2fbbcec0d882bc1f9ce78c23b927b16e now", "author": "wburns", "createdAt": "2020-05-11T13:47:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NTI5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1OTkwNQ==", "url": "https://github.com/infinispan/infinispan/pull/8290#discussion_r423059905", "bodyText": "Compatibility only really matters between .Final releases as well. We don't want to restrict ourselves to much in development.", "author": "ryanemerson", "createdAt": "2020-05-11T13:59:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NTI5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA2MDU0OA==", "url": "https://github.com/infinispan/infinispan/pull/8290#discussion_r423060548", "bodyText": "Okay that is what I figured, just wanted to make sure.", "author": "wburns", "createdAt": "2020-05-11T14:00:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NTI5Ng=="}], "type": "inlineReview"}]}