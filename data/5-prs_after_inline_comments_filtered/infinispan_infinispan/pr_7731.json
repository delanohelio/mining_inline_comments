{"pr_number": 7731, "pr_title": "ISPN-11148 + ISPN-11149 + ISPN-11150 CLI hang fix / CLI logging", "pr_createdAt": "2020-01-13T16:34:36Z", "pr_url": "https://github.com/infinispan/infinispan/pull/7731", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg2NjYwMQ==", "url": "https://github.com/infinispan/infinispan/pull/7731#discussion_r366866601", "bodyText": "Should we use Util.close(connection) maybe?", "author": "danberindei", "createdAt": "2020-01-15T13:11:21Z", "path": "cli/cli-client/src/main/java/org/infinispan/cli/impl/ContextImpl.java", "diffHunk": "@@ -80,6 +81,7 @@ public Connection connect(Shell shell, String connectionString) {\n          connection.connect();\n       } catch (AccessDeniedException accessDenied) {\n          try {\n+            connection.close();", "originalCommit": "5443a4e9aa765e671d5369d0090b3b00ae02caf2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njk2MzY2MA==", "url": "https://github.com/infinispan/infinispan/pull/7731#discussion_r366963660", "bodyText": "Sure", "author": "tristantarrant", "createdAt": "2020-01-15T16:08:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg2NjYwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyNjAzMg==", "url": "https://github.com/infinispan/infinispan/pull/7731#discussion_r366926032", "bodyText": "Do we have a server name we could add to the log?", "author": "danberindei", "createdAt": "2020-01-15T15:06:31Z", "path": "server/runtime/src/main/java/org/infinispan/server/logging/Log.java", "diffHunk": "@@ -132,4 +132,8 @@\n \n    @Message(value = \"Cannot find a network address which matches the supplied configuration\", id = 80033)\n    CacheConfigurationException invalidNetworkConfiguration();\n+\n+   @LogMessage(level = Logger.Level.INFO)\n+   @Message(value = \"Server listening on %s://%s:%d\", id = 80034)", "originalCommit": "5443a4e9aa765e671d5369d0090b3b00ae02caf2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njk2MjY4NQ==", "url": "https://github.com/infinispan/infinispan/pull/7731#discussion_r366962685", "bodyText": "We could use the node name. Is that what you mean ?\nServer 'fluffy' listening on https://localhost:11222", "author": "tristantarrant", "createdAt": "2020-01-15T16:06:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyNjAzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI3MDcyMw==", "url": "https://github.com/infinispan/infinispan/pull/7731#discussion_r367270723", "bodyText": "Done", "author": "tristantarrant", "createdAt": "2020-01-16T07:45:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyNjAzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2NDI0Mg==", "url": "https://github.com/infinispan/infinispan/pull/7731#discussion_r367364242", "bodyText": "Yeah, looks good!", "author": "danberindei", "createdAt": "2020-01-16T11:21:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyNjAzMg=="}], "type": "inlineReview"}, {"oid": "226280c006c571da6b65597c77b42a9d3761f97c", "url": "https://github.com/infinispan/infinispan/commit/226280c006c571da6b65597c77b42a9d3761f97c", "message": "ISPN-11154 Use log4j's BasicContextSelector in the server", "committedDate": "2020-01-16T07:44:49Z", "type": "forcePushed"}, {"oid": "c9c7689009239e63621161e521ff225daf02d3b1", "url": "https://github.com/infinispan/infinispan/commit/c9c7689009239e63621161e521ff225daf02d3b1", "message": "ISPN-11148 CLI: close all connections to the server to prevent hang", "committedDate": "2020-01-16T07:45:06Z", "type": "commit"}, {"oid": "c020d37b33c90dd383bdcbc8a788cf3d1582aa9e", "url": "https://github.com/infinispan/infinispan/commit/c020d37b33c90dd383bdcbc8a788cf3d1582aa9e", "message": "ISPN-11149 CLI logging file", "committedDate": "2020-01-16T07:45:06Z", "type": "commit"}, {"oid": "ad7a0258e6e4e9193b1b378fd0bfbe1ec8521fff", "url": "https://github.com/infinispan/infinispan/commit/ad7a0258e6e4e9193b1b378fd0bfbe1ec8521fff", "message": "ISPN-11150 Show server URL on boot", "committedDate": "2020-01-16T07:45:06Z", "type": "commit"}, {"oid": "fab7c651d9a5d571b209b373bc26ddbdbcef21f7", "url": "https://github.com/infinispan/infinispan/commit/fab7c651d9a5d571b209b373bc26ddbdbcef21f7", "message": "ISPN-11154 Use log4j's BasicContextSelector in the server", "committedDate": "2020-01-16T07:45:06Z", "type": "commit"}, {"oid": "fab7c651d9a5d571b209b373bc26ddbdbcef21f7", "url": "https://github.com/infinispan/infinispan/commit/fab7c651d9a5d571b209b373bc26ddbdbcef21f7", "message": "ISPN-11154 Use log4j's BasicContextSelector in the server", "committedDate": "2020-01-16T07:45:06Z", "type": "forcePushed"}]}