{"pr_number": 8475, "pr_title": "ISPN-11998 Keep new and legacy memory attributes in sync", "pr_createdAt": "2020-06-15T15:04:24Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8475", "timeline": [{"oid": "014bd79195ec7753dda4005f05450922734a6cad", "url": "https://github.com/infinispan/infinispan/commit/014bd79195ec7753dda4005f05450922734a6cad", "message": "ISPN-11998 Keep new and legacy memory attributes in sync\n\n* Change default storage to HEAP everywhere\n* Document deprecated storage attribute values\n  in the XSD\n* Synchronize new and old eviction attributes\n  both in the buider and in the runtime configuration\n* Synchronize when copying configurations\n* Synchronize when reading JSON\n* Add new configuration and defaults tests\n* Make attributes that cannot change at runtime immutable\n* Eviction new and legacy attributes should stay in sync\n* Fix tests that set the storage to null\n* Update tests for new default storage type", "committedDate": "2020-06-15T15:04:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY3MjA0NQ==", "url": "https://github.com/infinispan/infinispan/pull/8475#discussion_r440672045", "bodyText": "This is a breaking change, as in 10/11, the deprecated method storageType() would not return HEAP enum constant. Is it OK to change this for 12?", "author": "gustavonalle", "createdAt": "2020-06-16T08:20:52Z", "path": "core/src/test/java/org/infinispan/configuration/EvictionConfigurationTest.java", "diffHunk": "@@ -49,7 +50,7 @@ public void testReuseLegacyBuilder() {\n \n       assertEquals(configuration.memory().maxSizeBytes(), -1);\n       assertEquals(configuration.memory().maxCount(), 200);\n-      assertEquals(configuration.memory().storageType(), OBJECT);\n+      assertEquals(configuration.memory().storageType(), HEAP);", "originalCommit": "014bd79195ec7753dda4005f05450922734a6cad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc4NjU1OA==", "url": "https://github.com/infinispan/infinispan/pull/8475#discussion_r440786558", "bodyText": "Maybe we could re-evaluate keeping the old stuff around and clean everything up for sake of maintainability", "author": "gustavonalle", "createdAt": "2020-06-16T11:43:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY3MjA0NQ=="}], "type": "inlineReview"}]}