{"pr_number": 8847, "pr_title": "ISPN-12492 Server option to load property file", "pr_createdAt": "2020-11-12T13:41:54Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8847", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTAyNzA5Mg==", "url": "https://github.com/infinispan/infinispan/pull/8847#discussion_r525027092", "bodyText": "-1\nthis will overwrite everything defined with -D<key>=<value> (and can overwrite other arguments as well like -p, -o)", "author": "pruivo", "createdAt": "2020-11-17T09:59:10Z", "path": "server/runtime/src/main/java/org/infinispan/server/Bootstrap.java", "diffHunk": "@@ -101,8 +104,17 @@ protected void handleArgumentCommand(String command, String parameter, Iterator<\n          case \"--port-offset\":\n             properties.setProperty(Server.INFINISPAN_PORT_OFFSET, parameter);\n             break;\n+         case \"-P\":\n+            parameter = args.next();\n+         case \"--properties\":\n+            try(Reader r = Files.newBufferedReader(Paths.get(parameter))) {\n+               properties.load(r);", "originalCommit": "59aeaa6f711476b4114e883537019efeb614d129", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTAyODE2NQ==", "url": "https://github.com/infinispan/infinispan/pull/8847#discussion_r525028165", "bodyText": "Order matters.", "author": "tristantarrant", "createdAt": "2020-11-17T10:00:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTAyNzA5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTAzNzkwOA==", "url": "https://github.com/infinispan/infinispan/pull/8847#discussion_r525037908", "bodyText": "order doesn't matter. -D properties are always parser before the Bootstrap.handleArgumentCommand()\n$ cat keys.properties \ninfinispan.socket.binding.port-offset=100\n$ /bin/server.sh -P keys.properties -Dinfinispan.socket.binding.port-offset=200\n...\n10:09:34,212 INFO  (main) [org.infinispan.SERVER] ISPN080004: Connector SINGLE_PORT (default) listening on 127.0.0.1:11322", "author": "pruivo", "createdAt": "2020-11-17T10:15:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTAyNzA5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTAzODgxMA==", "url": "https://github.com/infinispan/infinispan/pull/8847#discussion_r525038810", "bodyText": "Right. I'll do a merge instead of a load.", "author": "tristantarrant", "createdAt": "2020-11-17T10:17:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTAyNzA5Mg=="}], "type": "inlineReview"}, {"oid": "d9272d27f61d1c28b40f644b06daa5edb89fecf5", "url": "https://github.com/infinispan/infinispan/commit/d9272d27f61d1c28b40f644b06daa5edb89fecf5", "message": "ISPN-12492 Server option to load property file", "committedDate": "2020-11-17T10:26:36Z", "type": "commit"}, {"oid": "d9272d27f61d1c28b40f644b06daa5edb89fecf5", "url": "https://github.com/infinispan/infinispan/commit/d9272d27f61d1c28b40f644b06daa5edb89fecf5", "message": "ISPN-12492 Server option to load property file", "committedDate": "2020-11-17T10:26:36Z", "type": "forcePushed"}]}