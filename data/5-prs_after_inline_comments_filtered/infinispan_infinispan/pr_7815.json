{"pr_number": 7815, "pr_title": "ISPN-11262 Remove deprecated eviction configuration values", "pr_createdAt": "2020-01-31T19:15:05Z", "pr_url": "https://github.com/infinispan/infinispan/pull/7815", "timeline": [{"oid": "53498a9905ca6fb348a8ddb372334939ee8a8c78", "url": "https://github.com/infinispan/infinispan/commit/53498a9905ca6fb348a8ddb372334939ee8a8c78", "message": "ISPN-11262 Remove deprecated eviction configuration values\n\n* EvictionStrategy removed\n* Off heap address count removed\n* Remove Eviction Thread Policy", "committedDate": "2020-01-31T19:28:51Z", "type": "forcePushed"}, {"oid": "9f576c59b63b72e7f4c104ed2f35c4e67f588c91", "url": "https://github.com/infinispan/infinispan/commit/9f576c59b63b72e7f4c104ed2f35c4e67f588c91", "message": "review changes", "committedDate": "2020-02-03T14:56:59Z", "type": "forcePushed"}, {"oid": "4e43e6498853a55239c3f1b3e13a5867adf0974c", "url": "https://github.com/infinispan/infinispan/commit/4e43e6498853a55239c3f1b3e13a5867adf0974c", "message": "fix some xml files", "committedDate": "2020-02-10T17:53:18Z", "type": "forcePushed"}, {"oid": "ff25391be1eb2de87e1067088d8ed488e74c88b4", "url": "https://github.com/infinispan/infinispan/commit/ff25391be1eb2de87e1067088d8ed488e74c88b4", "message": "ISPN-11262 Remove deprecated eviction configuration values\n\n* EvictionStrategy removed\n* Off heap address count removed\n* Remove Eviction Thread Policy", "committedDate": "2020-02-12T17:34:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzMDk3OQ==", "url": "https://github.com/infinispan/infinispan/pull/7815#discussion_r378830979", "bodyText": "We should throw an Exception here if the parser is 11 or higher and the strategy is not recognised.", "author": "ryanemerson", "createdAt": "2020-02-13T12:30:58Z", "path": "wildfly/infinispan/src/main/java/org/jboss/as/clustering/infinispan/subsystem/InfinispanSubsystemXMLReader.java", "diffHunk": "@@ -1619,7 +1621,12 @@ private void parseEviction(XMLExtendedStreamReader reader, ModelNode cache, Map<\n             Attribute attribute = Attribute.forName(reader.getAttributeLocalName(i));\n             switch (attribute) {\n                 case STRATEGY: {\n-                    enabled = EvictionStrategy.valueOf(value).isEnabled();\n+                    try {\n+                        enabled = EvictionStrategy.valueOf(value).isEnabled();\n+                    } catch (IllegalArgumentException e) {\n+                        // Unable to parse eviction strategy - assuming it is enabled\n+                        enabled = true;", "originalCommit": "ff25391be1eb2de87e1067088d8ed488e74c88b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTUwOTQ4Mw==", "url": "https://github.com/infinispan/infinispan/pull/7815#discussion_r379509483", "bodyText": "Sure", "author": "wburns", "createdAt": "2020-02-14T15:59:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzMDk3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzMTMxNg==", "url": "https://github.com/infinispan/infinispan/pull/7815#discussion_r378831316", "bodyText": "We should warn that the attribute has been ignored via ignoreAttribute.", "author": "ryanemerson", "createdAt": "2020-02-13T12:31:45Z", "path": "wildfly/infinispan/src/main/java/org/jboss/as/clustering/infinispan/subsystem/InfinispanSubsystemXMLReader.java", "diffHunk": "@@ -1592,7 +1592,9 @@ private void parseMemoryOffHeap(XMLExtendedStreamReader reader, ModelNode cache,\n                     break;\n                 }\n                 case ADDRESS_COUNT: {\n-                    MemoryOffHeapConfigurationResource.ADDRESS_COUNT.parseAndSetParameter(value, offHeap, reader);\n+                    if (namespace.since(11, 0)) {\n+                        throw ParseUtils.unexpectedElement(reader);\n+                    }", "originalCommit": "ff25391be1eb2de87e1067088d8ed488e74c88b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTUwOTUyMQ==", "url": "https://github.com/infinispan/infinispan/pull/7815#discussion_r379509521", "bodyText": "Sure", "author": "wburns", "createdAt": "2020-02-14T15:59:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzMTMxNg=="}], "type": "inlineReview"}, {"oid": "d00f84a24c41f4f8c27ee4f30bb7946623562bac", "url": "https://github.com/infinispan/infinispan/commit/d00f84a24c41f4f8c27ee4f30bb7946623562bac", "message": "Review comments", "committedDate": "2020-02-14T17:27:59Z", "type": "forcePushed"}, {"oid": "94a6856fede8cb62b585c652477baa7f930ee6fb", "url": "https://github.com/infinispan/infinispan/commit/94a6856fede8cb62b585c652477baa7f930ee6fb", "message": "ISPN-11262 Remove deprecated eviction configuration values\n\n* EvictionStrategy removed\n* Off heap address count removed\n* Remove Eviction Thread Policy", "committedDate": "2020-02-14T18:29:29Z", "type": "commit"}, {"oid": "94a6856fede8cb62b585c652477baa7f930ee6fb", "url": "https://github.com/infinispan/infinispan/commit/94a6856fede8cb62b585c652477baa7f930ee6fb", "message": "ISPN-11262 Remove deprecated eviction configuration values\n\n* EvictionStrategy removed\n* Off heap address count removed\n* Remove Eviction Thread Policy", "committedDate": "2020-02-14T18:29:29Z", "type": "forcePushed"}]}