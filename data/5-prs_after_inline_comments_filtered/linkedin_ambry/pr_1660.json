{"pr_number": 1660, "pr_title": "[BlobStoreCompaction] Always enable target index duplicate checking to ignore duplicate PUTs", "pr_createdAt": "2020-10-14T23:52:36Z", "pr_url": "https://github.com/linkedin/ambry/pull/1660", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NDY3Mg==", "url": "https://github.com/linkedin/ambry/pull/1660#discussion_r507984672", "bodyText": "Can we simplify this if-else as follows?\nstate.properties.put(StoreConfig.storeAlwaysEnableTargetIndexDuplicateCheckingName, Boolean.toString(alwaysEnableTargetIndexDuplicateChecking));", "author": "jsjtzyy", "createdAt": "2020-10-19T18:46:59Z", "path": "ambry-store/src/test/java/com/github/ambry/store/BlobStoreCompactorTest.java", "diffHunk": "@@ -2393,6 +2445,11 @@ private BlobStoreCompactor getCompactor(Log log, DiskIOScheduler ioScheduler) th\n     if (withUndelete) {\n       state.properties.put(\"store.compaction.filter\", \"IndexSegmentValidEntryWithUndelete\");\n     }\n+    if (alwaysEnableTargetIndexDuplicateChecking) {\n+      state.properties.put(StoreConfig.storeAlwaysEnableTargetIndexDuplicateCheckingName, \"true\");\n+    } else {\n+      state.properties.put(StoreConfig.storeAlwaysEnableTargetIndexDuplicateCheckingName, \"false\");\n+    }", "originalCommit": "37e8c41a762b260cc74e862ff114a9170a08d396", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8d18d23c592f50d1aa7b387dc84403f28e658150", "url": "https://github.com/linkedin/ambry/commit/8d18d23c592f50d1aa7b387dc84403f28e658150", "message": "[BlobStoreCompaction] Always enable target index duplicate checking to ignore duplicate PUTs", "committedDate": "2020-10-22T19:14:17Z", "type": "commit"}, {"oid": "274fdbb01378201daf545a24a447e6a8d2f32e53", "url": "https://github.com/linkedin/ambry/commit/274fdbb01378201daf545a24a447e6a8d2f32e53", "message": "Add more tests", "committedDate": "2020-10-22T19:14:17Z", "type": "commit"}, {"oid": "5db668d48cc538d2f17cb215bb03df87db40a881", "url": "https://github.com/linkedin/ambry/commit/5db668d48cc538d2f17cb215bb03df87db40a881", "message": "Address comments", "committedDate": "2020-10-22T19:18:16Z", "type": "forcePushed"}, {"oid": "fbfd8d025eaf8a7b3f77880dc85b4e1f01cb6971", "url": "https://github.com/linkedin/ambry/commit/fbfd8d025eaf8a7b3f77880dc85b4e1f01cb6971", "message": "Address comments", "committedDate": "2020-10-22T19:23:21Z", "type": "commit"}, {"oid": "fbfd8d025eaf8a7b3f77880dc85b4e1f01cb6971", "url": "https://github.com/linkedin/ambry/commit/fbfd8d025eaf8a7b3f77880dc85b4e1f01cb6971", "message": "Address comments", "committedDate": "2020-10-22T19:23:21Z", "type": "forcePushed"}]}