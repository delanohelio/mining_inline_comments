{"pr_number": 11595, "pr_title": "[FEATURE] Cosmos | Wire up ConnectionPolicy, DirectConnectionConfig, and RntbdTransportClient.Options", "pr_createdAt": "2020-05-29T21:14:41Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/11595", "timeline": [{"oid": "84a37ab329525ae52d7c1adc6e7ba3c33625c5c7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/84a37ab329525ae52d7c1adc6e7ba3c33625c5c7", "message": "Port from v4", "committedDate": "2019-11-07T04:36:56Z", "type": "commit"}, {"oid": "d218925e1dff21266697a27e4271d34dfcc3b6a7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d218925e1dff21266697a27e4271d34dfcc3b6a7", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2019-11-08T01:46:09Z", "type": "commit"}, {"oid": "11cbbf37bf63bf50e94f67fe30300ac39c72ed4f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/11cbbf37bf63bf50e94f67fe30300ac39c72ed4f", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java", "committedDate": "2019-11-08T03:20:35Z", "type": "commit"}, {"oid": "05c7e0551ffb6fd1ed80c15d1068cb32e734007e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/05c7e0551ffb6fd1ed80c15d1068cb32e734007e", "message": "Corrected package misspelling in log4j.properties and removed System.exit from Main.java", "committedDate": "2019-11-09T00:07:30Z", "type": "commit"}, {"oid": "8dfa3dbf03ae2addeddcb34ffc67c362670a164c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8dfa3dbf03ae2addeddcb34ffc67c362670a164c", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java", "committedDate": "2019-11-09T00:07:47Z", "type": "commit"}, {"oid": "e6e71f5e6b292cac17b6a9687d04ad858f02a8a1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e6e71f5e6b292cac17b6a9687d04ad858f02a8a1", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2019-11-09T18:42:20Z", "type": "commit"}, {"oid": "e082d817a13d64ed57e5243cbc1da5b4ef0ab58e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e082d817a13d64ed57e5243cbc1da5b4ef0ab58e", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java", "committedDate": "2019-11-17T00:51:11Z", "type": "commit"}, {"oid": "069c822e997087f384cf1a1864e7efec331e69f8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/069c822e997087f384cf1a1864e7efec331e69f8", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java", "committedDate": "2019-11-23T22:36:47Z", "type": "commit"}, {"oid": "3ead1cca230e56b61e5376e73bd1481f7a7b81e6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3ead1cca230e56b61e5376e73bd1481f7a7b81e6", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2019-12-03T18:58:37Z", "type": "commit"}, {"oid": "669ba8b28ed6ae321fda445e0e167ff027cc6481", "url": "https://github.com/Azure/azure-sdk-for-java/commit/669ba8b28ed6ae321fda445e0e167ff027cc6481", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2019-12-04T19:34:26Z", "type": "commit"}, {"oid": "735f57269d45a3497a66d47d594b7efac88179ff", "url": "https://github.com/Azure/azure-sdk-for-java/commit/735f57269d45a3497a66d47d594b7efac88179ff", "message": "Responded to code review comments", "committedDate": "2019-12-04T19:36:31Z", "type": "commit"}, {"oid": "6db330d843c4cdbb80b90c6f734f69a59afb9183", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6db330d843c4cdbb80b90c6f734f69a59afb9183", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-01-04T00:31:23Z", "type": "commit"}, {"oid": "48855b55564f6f216ee6a156f7a64ff5991ee2e6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/48855b55564f6f216ee6a156f7a64ff5991ee2e6", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-01-04T02:07:38Z", "type": "commit"}, {"oid": "2367f50dd69e8f4d1ba123c3b42ad4388caeaa66", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2367f50dd69e8f4d1ba123c3b42ad4388caeaa66", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-01-17T20:51:14Z", "type": "commit"}, {"oid": "fb9cac0c12e21f09e3c45580bf324bef7733b8c1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb9cac0c12e21f09e3c45580bf324bef7733b8c1", "message": "Updated sdk/cosmos/README.md with info on using system properties to modify default Direct TCP options", "committedDate": "2020-01-23T01:18:46Z", "type": "commit"}, {"oid": "1dd708ef9e753607040a6bb1f2b69c863dda8a0a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1dd708ef9e753607040a6bb1f2b69c863dda8a0a", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-01-23T01:21:11Z", "type": "commit"}, {"oid": "203507a249705593b04dec3e36566537d15da4e2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/203507a249705593b04dec3e36566537d15da4e2", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-03-16T00:12:48Z", "type": "commit"}, {"oid": "368b10f9893cdf49e95545e8ae4ec5ff03450f60", "url": "https://github.com/Azure/azure-sdk-for-java/commit/368b10f9893cdf49e95545e8ae4ec5ff03450f60", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-03-16T17:10:04Z", "type": "commit"}, {"oid": "f7544aa31e210fe20d9939c26b17c9dbb4d7d72f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f7544aa31e210fe20d9939c26b17c9dbb4d7d72f", "message": "Ported memory leak from v2.6.X and bumped version number.", "committedDate": "2020-03-17T01:24:39Z", "type": "commit"}, {"oid": "4cd3a139255f258d20b3c56ce9d00462add02b2b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4cd3a139255f258d20b3c56ce9d00462add02b2b", "message": "Removed a file that was mistakenly committed", "committedDate": "2020-03-18T01:32:58Z", "type": "commit"}, {"oid": "8f58a9c7b813cc0f1d39071c8dd64e667681e2ec", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8f58a9c7b813cc0f1d39071c8dd64e667681e2ec", "message": "Space adjustments for readability", "committedDate": "2020-03-18T05:41:03Z", "type": "commit"}, {"oid": "49baa6abd3e5ee01571b05c776ef43ff6efe7620", "url": "https://github.com/Azure/azure-sdk-for-java/commit/49baa6abd3e5ee01571b05c776ef43ff6efe7620", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/memory-leak", "committedDate": "2020-03-19T00:30:26Z", "type": "commit"}, {"oid": "f70e844575c77ef9906cc109a44c06e1366a3ad5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f70e844575c77ef9906cc109a44c06e1366a3ad5", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak", "committedDate": "2020-03-24T00:46:33Z", "type": "commit"}, {"oid": "163c66d1a858ade5c179488ee9b7fb9798147e03", "url": "https://github.com/Azure/azure-sdk-for-java/commit/163c66d1a858ade5c179488ee9b7fb9798147e03", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak", "committedDate": "2020-03-26T02:47:43Z", "type": "commit"}, {"oid": "01a3661f189abc1cf6f582083bbba44126aa8719", "url": "https://github.com/Azure/azure-sdk-for-java/commit/01a3661f189abc1cf6f582083bbba44126aa8719", "message": "DCDocumentCrudTest passes. Performance, reliability, and scalability tuning/testing work remains.", "committedDate": "2020-04-05T01:57:34Z", "type": "commit"}, {"oid": "be7b3d88e28d214ed79d686bcd4349f00d0b3c7a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/be7b3d88e28d214ed79d686bcd4349f00d0b3c7a", "message": "Enabled channel acquisition timeout interval default: 100 ms\n\nVerified: direct tests pass modulo a mockito issue that breaks a number of direct tests. Root cause analysis on the mockito break is TBD.", "committedDate": "2020-04-07T04:54:30Z", "type": "commit"}, {"oid": "7446c7aa03a788401d61900188ebfb357c0fea00", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7446c7aa03a788401d61900188ebfb357c0fea00", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak", "committedDate": "2020-04-08T00:34:05Z", "type": "commit"}, {"oid": "5f263570653c07bc9f077cae2307061ad0d286ac", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5f263570653c07bc9f077cae2307061ad0d286ac", "message": "Removed some newlines", "committedDate": "2020-04-08T22:37:00Z", "type": "commit"}, {"oid": "dfb2ba4826880e5152658bab479b34f5f490a5bd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dfb2ba4826880e5152658bab479b34f5f490a5bd", "message": "Added a newline at the end of file", "committedDate": "2020-04-08T22:37:31Z", "type": "commit"}, {"oid": "34baf33d1a8a05c4f04091b8ef963209f1ed949f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/34baf33d1a8a05c4f04091b8ef963209f1ed949f", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak", "committedDate": "2020-04-08T22:37:58Z", "type": "commit"}, {"oid": "5d7bf22c9ec045ec56683dc94f5879de003fdf40", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5d7bf22c9ec045ec56683dc94f5879de003fdf40", "message": "Ensured that RntbdClientChannelPool.release never throws and never releases a channel prematurely. This change addresses occassional point read failures (~0.0015% of the time in local testing) when slamming a partition with read requests. This change also ensures that unhandled exceptions during release do not cause thread deaths.", "committedDate": "2020-04-11T20:56:20Z", "type": "commit"}, {"oid": "c5a8e7b75b7ff126eac016d28738f937951aa4a1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c5a8e7b75b7ff126eac016d28738f937951aa4a1", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak", "committedDate": "2020-04-15T16:20:21Z", "type": "commit"}, {"oid": "05f141039211010d76a20a070dc864df979759b6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/05f141039211010d76a20a070dc864df979759b6", "message": "Revised channel acquisition algorithm such that no timer acquisition task timeout is used by default and we allow maxRequestsPerChannel to go above limit when maxChannels are allocated", "committedDate": "2020-04-16T00:26:34Z", "type": "commit"}, {"oid": "e767404f56822dab79896d35ff73e584b3e018f1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e767404f56822dab79896d35ff73e584b3e018f1", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak", "committedDate": "2020-04-18T20:26:30Z", "type": "commit"}, {"oid": "3425d0b8e13d32afcb8684f0d9d344509cd90007", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3425d0b8e13d32afcb8684f0d9d344509cd90007", "message": "Attempt to resolve scalability issue that causes performance degradation about about 500 concurrent requests", "committedDate": "2020-04-18T20:58:40Z", "type": "commit"}, {"oid": "f7a6cdad8597ff80a6209ecc37b093f4934eb2b2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f7a6cdad8597ff80a6209ecc37b093f4934eb2b2", "message": "Code/documentation tweaks", "committedDate": "2020-04-19T19:56:19Z", "type": "commit"}, {"oid": "0a04ad8bc10d8ad3a809ff52e7aac120147620a9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0a04ad8bc10d8ad3a809ff52e7aac120147620a9", "message": "Idle endpoint timeout task now detects idleEndpointTimeout and\u2014unless the endpoint is found to be idle\u2014runs tasks in the pendingAcquisitionQueue.", "committedDate": "2020-04-20T04:03:27Z", "type": "commit"}, {"oid": "fb81f3e7458759d7fadb237c71c2db4b0ae7f19d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb81f3e7458759d7fadb237c71c2db4b0ae7f19d", "message": "Updated a comment", "committedDate": "2020-04-20T04:09:56Z", "type": "commit"}, {"oid": "7f23efd6299bf6989eecc5dcbc1b9b14276e83ca", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7f23efd6299bf6989eecc5dcbc1b9b14276e83ca", "message": "Code tweak", "committedDate": "2020-04-20T05:57:42Z", "type": "commit"}, {"oid": "78f0e55d2001b90ba72450b6854c83ac3baba8e6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/78f0e55d2001b90ba72450b6854c83ac3baba8e6", "message": "Switch to HashedWheelTimer implementation for RntbdClientChannelPool.acquisitionAndIdleEndpointDetectionTimeout and revised RntbdClientChannelPool.acquireChannel. Local testing indicates that this significatnly reduces P95-P99.9 latencies", "committedDate": "2020-04-21T04:27:48Z", "type": "commit"}, {"oid": "12b5981b89ec39d52b45117e29835401358a5ba5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/12b5981b89ec39d52b45117e29835401358a5ba5", "message": "Tweaked log message", "committedDate": "2020-04-22T18:04:19Z", "type": "commit"}, {"oid": "e5ff54c36b6cc35e63cecaccc287abff95b202e0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e5ff54c36b6cc35e63cecaccc287abff95b202e0", "message": "Addressed a number of threading-related issues in RntbdClientChannelPool; tweaked the RntbdReporter; and added a CsvReporter feature to the benchmark tool. They latter may be a temporary addition", "committedDate": "2020-04-24T00:22:21Z", "type": "commit"}, {"oid": "fc7637be1cebb5f6a8b4df3395600996c9b50ca4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc7637be1cebb5f6a8b4df3395600996c9b50ca4", "message": "Streamlined RntbdServiceEndpoint.write for performance/readability. In local testing this change resulted in a significant performance gain in these configurations:\n* concurrency=2048.documentCount=000001.operation=ReadLatency.operation-count=1000000\n* concurrency=2048.documentCount=100000.operation=ReadLatency.operation-count=1000000\nSpecificallly, the P99 values moved to P99.9 and throughput increased by at least 11% as measured by (lowest[with-change] - highest[sans-change]) / highest[sans-change])", "committedDate": "2020-04-25T20:23:13Z", "type": "commit"}, {"oid": "488291ed705a9cc6552b2326c794268e1785442f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/488291ed705a9cc6552b2326c794268e1785442f", "message": "Tweaks tested extensively--full test suite plus point read benchmarks (1 and 10,0000 documents with 2,048 concurrent requests) locally in prep for PR", "committedDate": "2020-04-28T15:11:38Z", "type": "commit"}, {"oid": "02293fc5c0952a9615a29a1992e08d87b461567a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/02293fc5c0952a9615a29a1992e08d87b461567a", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak", "committedDate": "2020-04-28T15:15:58Z", "type": "commit"}, {"oid": "2375baab4d6b8dc533a38405294ed21fa247f648", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2375baab4d6b8dc533a38405294ed21fa247f648", "message": "Tweaked AsyncBenchmark for verifying the direct tcp \u201cconnection timeout\u201d issue raised by T-Mobile.", "committedDate": "2020-04-28T21:53:39Z", "type": "commit"}, {"oid": "46f5dd1bd9ebfac572044b3f2a104c6b37267103", "url": "https://github.com/Azure/azure-sdk-for-java/commit/46f5dd1bd9ebfac572044b3f2a104c6b37267103", "message": "Moved a misplaced statement in AsyncBenchmark that produced a lot of logger noise.", "committedDate": "2020-04-29T20:59:51Z", "type": "commit"}, {"oid": "3d0c00772d1c79f4b3ba82add514132660d5ae31", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3d0c00772d1c79f4b3ba82add514132660d5ae31", "message": "Updated version numbers in an attempt to get past CI version checks", "committedDate": "2020-04-30T03:52:52Z", "type": "commit"}, {"oid": "fb7273bd375723f5a065eb0a511c8df935201245", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb7273bd375723f5a065eb0a511c8df935201245", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak", "committedDate": "2020-04-30T03:54:21Z", "type": "commit"}, {"oid": "02d7ed00304e953d15119c35358bc2497e162a0a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/02d7ed00304e953d15119c35358bc2497e162a0a", "message": "Tweaked RntbdRequestTimer.close for readability", "committedDate": "2020-04-30T04:06:27Z", "type": "commit"}, {"oid": "44c7ea7ded34c1141e28fc8866326c296639d2b7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/44c7ea7ded34c1141e28fc8866326c296639d2b7", "message": "Removed README.md which seems to have been removed from master after being edited by me", "committedDate": "2020-04-30T05:32:22Z", "type": "commit"}, {"oid": "350db568ea82a310993c3d9f4860d7897ad50afc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/350db568ea82a310993c3d9f4860d7897ad50afc", "message": "Fixed a build issue that CI complains about.", "committedDate": "2020-04-30T06:09:49Z", "type": "commit"}, {"oid": "cf9e4d2b49a5adc63665888e6231470fbc1c04e4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cf9e4d2b49a5adc63665888e6231470fbc1c04e4", "message": "Reverting version bump for benchmark and examples as these are in the process of being removed as libraries", "committedDate": "2020-05-04T22:17:10Z", "type": "commit"}, {"oid": "2a747ce328164ae53f261958300d23f3f7eea42b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2a747ce328164ae53f261958300d23f3f7eea42b", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak", "committedDate": "2020-05-14T00:11:00Z", "type": "commit"}, {"oid": "27a01073878092f79a512f95da17f2a1cc6833e0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/27a01073878092f79a512f95da17f2a1cc6833e0", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/direct-tcp/direct-connection-config", "committedDate": "2020-05-18T17:01:59Z", "type": "commit"}, {"oid": "6b986717d57de4f3a378b2d1c9344aa6fd8a6af4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6b986717d57de4f3a378b2d1c9344aa6fd8a6af4", "message": "Removed dead code and changed an error message in AsyncBenchmark.java", "committedDate": "2020-05-18T17:05:57Z", "type": "commit"}, {"oid": "145d853297a0bff9993918b81db2a2fff5a454d0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/145d853297a0bff9993918b81db2a2fff5a454d0", "message": "Removed merge orig files", "committedDate": "2020-05-18T19:51:07Z", "type": "commit"}, {"oid": "9f55e5a97f2021c496fc7e803487b5fa308e9381", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9f55e5a97f2021c496fc7e803487b5fa308e9381", "message": "Wired up DirectConnectionConfig to RntbdTransportClient by way of ConnectionPolicy. Also: addressed a bug in AsyncBenchmark and replaced a deprecated method call in RntbdObjectMapper.", "committedDate": "2020-05-20T03:29:15Z", "type": "commit"}, {"oid": "bf836da7718484645a9dbd9be1828357d2edb9d8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bf836da7718484645a9dbd9be1828357d2edb9d8", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/direct-tcp/direct-connection-config", "committedDate": "2020-05-26T18:23:53Z", "type": "commit"}, {"oid": "139637f5ce58a32837902b1be356b1fa1d615b33", "url": "https://github.com/Azure/azure-sdk-for-java/commit/139637f5ce58a32837902b1be356b1fa1d615b33", "message": "Wired up ConnectionPolicy, DirectConnectionConfig, and RntbdTransportClient.Options", "committedDate": "2020-05-29T18:25:19Z", "type": "commit"}, {"oid": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/direct-tcp/direct-connection-config", "committedDate": "2020-05-29T21:05:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM1NzQ4OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433357488", "bodyText": "Please add this new field to toString() API.", "author": "kushagraThapar", "createdAt": "2020-06-01T16:46:15Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/DirectConnectionConfig.java", "diffHunk": "@@ -17,24 +17,27 @@\n     //  Constants\n     private static final Duration DEFAULT_IDLE_ENDPOINT_TIMEOUT = Duration.ofSeconds(70L);\n     private static final Duration DEFAULT_CONNECTION_TIMEOUT = Duration.ofSeconds(60L);\n+    private static final Duration DEFAULT_REQUEST_TIMEOUT = Duration.ofSeconds(60L);\n     private static final int DEFAULT_MAX_CONNECTIONS_PER_ENDPOINT = 30;\n     private static final int DEFAULT_MAX_REQUESTS_PER_CONNECTION = 10;\n \n     private Duration connectionTimeout;\n     private Duration idleConnectionTimeout;\n     private Duration idleEndpointTimeout;\n+    private Duration requestTimeout;", "originalCommit": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2NzA3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433367075", "bodyText": "good catch, thanks. change made on my branch. to be committed with this PR.", "author": "David-Noble-at-work", "createdAt": "2020-06-01T17:04:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM1NzQ4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MDQ0NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433360444", "bodyText": "We should also rename the string wordings -> maxChannelsPerEndpoint -> maxConnectionsPerEndpoint\nand maxRequestsPerChannel -> maxRequestsPerConnection", "author": "kushagraThapar", "createdAt": "2020-06-01T16:51:49Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/ConnectionPolicy.java", "diffHunk": "@@ -476,10 +458,9 @@ public String toString() {\n             \", inetSocketProxyAddress=\" + inetSocketProxyAddress +\n             \", readRequestsFallbackEnabled=\" + readRequestsFallbackEnabled +\n             \", connectionTimeout=\" + connectionTimeout +\n-            \", idleChannelTimeout=\" + idleChannelTimeout +\n             \", idleEndpointTimeout=\" + idleEndpointTimeout +\n-            \", maxChannelsPerEndpoint=\" + maxChannelsPerEndpoint +\n-            \", maxRequestsPerChannel=\" + maxRequestsPerChannel +\n+            \", maxChannelsPerEndpoint=\" + maxConnectionsPerEndpoint +\n+            \", maxRequestsPerChannel=\" + maxRequestsPerConnection +", "originalCommit": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM3NTEwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433375105", "bodyText": "another good catch. change made on my branch. to be committed with this PR.", "author": "David-Noble-at-work", "createdAt": "2020-06-01T17:19:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MDQ0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MjgyOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433362828", "bodyText": "Is this the end to end (including the consistency stack) timeout?", "author": "moderakh", "createdAt": "2020-06-01T16:56:19Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/DirectConnectionConfig.java", "diffHunk": "@@ -190,6 +193,32 @@ public DirectConnectionConfig setMaxRequestsPerConnection(int maxRequestsPerConn\n         return this;\n     }\n \n+    /**\n+     * Gets the request timeout interval\n+     * This represents the timeout interval for requests\n+     *\n+     * Default value is 60 seconds\n+     *\n+     * @return the request timeout interval\n+     */\n+    public Duration getRequestTimeout() {", "originalCommit": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2Njg5MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433366890", "bodyText": "yes.", "author": "David-Noble-at-work", "createdAt": "2020-06-01T17:03:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MjgyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQxOTcyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433419729", "bodyText": "@kirankumarkolli\nboth GWConnectionConfig and DirectConnectionConfig have requestTimeout.\nand DirectConnectionConfig#requestTimeout represents the end to end latency (including consistency stack).\nI wonder if we should keep these at the ConnectionConfig level or if we should move it up to the CosmosClientBuilder. How .Net is doing this?", "author": "moderakh", "createdAt": "2020-06-01T18:43:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MjgyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5MTM4Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433491383", "bodyText": "@moderakh and @David-Noble-at-work  - Let's merge this PR as it is, and we will have a follow up PR which will handle these changes - #11531", "author": "kushagraThapar", "createdAt": "2020-06-01T21:08:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MjgyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5MzQ4Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433493483", "bodyText": "agreed. closing this as resolved.", "author": "moderakh", "createdAt": "2020-06-01T21:13:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MjgyOA=="}], "type": "inlineReview"}, {"oid": "4eb5db9a647f766da826783db14fdffbaef26b48", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4eb5db9a647f766da826783db14fdffbaef26b48", "message": "Corrected two toString methods", "committedDate": "2020-06-01T17:16:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5MjYwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433492606", "bodyText": "good catch. thank you", "author": "moderakh", "createdAt": "2020-06-01T21:11:07Z", "path": "sdk/cosmos/azure-cosmos-benchmark/src/main/java/com/azure/cosmos/benchmark/AsyncBenchmark.java", "diffHunk": "@@ -131,7 +131,7 @@\n         if (configuration.getOperationType() != Configuration.Operation.WriteLatency\n                 && configuration.getOperationType() != Configuration.Operation.WriteThroughput\n                 && configuration.getOperationType() != Configuration.Operation.ReadMyWrites) {\n-            logger.info(\"PRE-populating {} documents ....\", cfg.getNumberOfOperations());\n+            logger.info(\"PRE-populating {} documents ....\", cfg.getNumberOfPreCreatedDocuments());", "originalCommit": "4eb5db9a647f766da826783db14fdffbaef26b48", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3672ed89e163818772cf02a93a8dc6665bf21d96", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3672ed89e163818772cf02a93a8dc6665bf21d96", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/direct-tcp/direct-connection-config", "committedDate": "2020-06-02T16:09:02Z", "type": "commit"}]}