{"pr_number": 12282, "pr_title": "Fix Schema Registry 4xx handling and add tests for negative scenarios", "pr_createdAt": "2020-06-17T07:15:07Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/12282", "timeline": [{"oid": "629ac6fe80c6e23c265703260d2d95b8c56d0146", "url": "https://github.com/Azure/azure-sdk-for-java/commit/629ac6fe80c6e23c265703260d2d95b8c56d0146", "message": "fix 4xx handling and add tests for negative scenarios", "committedDate": "2020-06-17T07:13:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQwNjI4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12282#discussion_r442406280", "bodyText": "If we want to include a timeout, it must be configurable by the user?", "author": "srnagar", "createdAt": "2020-06-18T18:00:16Z", "path": "sdk/schemaregistry/azure-data-schemaregistry/src/main/java/com/azure/data/schemaregistry/client/CachedSchemaRegistryClient.java", "diffHunk": "@@ -118,13 +122,26 @@ public SchemaRegistryObject register(\n             \"Registering schema. Group: '{}', name: '{}', serialization type: '{}', payload: '{}'\",\n                 schemaGroup, schemaName, schemaType, schemaString);\n \n-        SchemaId schemaId;\n+        CreateSchemaResponse response;\n         try {\n-            schemaId = this.restService.createSchema(schemaGroup, schemaName, schemaType, schemaString);\n+            response = this.restService.createSchemaWithResponseAsync(schemaGroup, schemaName, schemaType, schemaString)\n+                .block(HTTP_REQUEST_TIMEOUT);", "originalCommit": "629ac6fe80c6e23c265703260d2d95b8c56d0146", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU0NTUzNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12282#discussion_r442545535", "bodyText": "#12341", "author": "arerlend", "createdAt": "2020-06-18T23:00:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQwNjI4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQwNzUyOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12282#discussion_r442407528", "bodyText": "Same here, timeout should be an optional method param. You can still have a default in case it's not set.", "author": "srnagar", "createdAt": "2020-06-18T18:02:41Z", "path": "sdk/schemaregistry/azure-data-schemaregistry/src/main/java/com/azure/data/schemaregistry/client/CachedSchemaRegistryClient.java", "diffHunk": "@@ -171,23 +194,35 @@ public SchemaRegistryObject getSchemaByGuid(String schemaId) {\n     }\n \n     @Override\n-    public String getSchemaId(\n-        String schemaGroup, String schemaName, String schemaString, String schemaType) {\n+    public String getSchemaId(String schemaGroup, String schemaName, String schemaString, String schemaType) {\n         if (schemaStringCache.containsKey(schemaString)) {\n             logger.verbose(\"Cache hit schema string. Group: '{}', name: '{}'\", schemaGroup, schemaName);\n             return schemaStringCache.get(schemaString).getSchemaId();\n         }\n \n-        SchemaId schemaId;\n+        GetIdBySchemaContentResponse response;\n         try {\n-            schemaId = this.restService.getIdBySchemaContent(schemaGroup, schemaName, schemaType, schemaString);\n+            response = this.restService\n+                .getIdBySchemaContentWithResponseAsync(schemaGroup, schemaName, schemaType, schemaString)\n+                .block(HTTP_REQUEST_TIMEOUT);", "originalCommit": "629ac6fe80c6e23c265703260d2d95b8c56d0146", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}