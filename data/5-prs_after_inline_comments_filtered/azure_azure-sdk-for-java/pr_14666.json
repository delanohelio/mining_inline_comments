{"pr_number": 14666, "pr_title": "Add implementation and API design for ADT component APIs", "pr_createdAt": "2020-08-31T21:17:26Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14666", "timeline": [{"oid": "ef5226559855b42c918ede7f6e58e6ee61421ed0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ef5226559855b42c918ede7f6e58e6ee61421ed0", "message": "Add implementation and API design for component APIs", "committedDate": "2020-08-31T23:35:15Z", "type": "forcePushed"}, {"oid": "5699d2e296a2b1a3c34f1f1272ea49eb105b5d10", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5699d2e296a2b1a3c34f1f1272ea49eb105b5d10", "message": "Add implementation and API design for component APIs", "committedDate": "2020-09-01T17:56:39Z", "type": "forcePushed"}, {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "message": "Add implementation and API design for component APIs", "committedDate": "2020-09-01T17:58:21Z", "type": "commit"}, {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "message": "Add implementation and API design for component APIs", "committedDate": "2020-09-01T17:58:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMTkzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481331931", "bodyText": "can be a map instead", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:01:40Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +717,118 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));", "originalCommit": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMjEyNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481332124", "bodyText": ".map(DigitalTwinsResponse::getValue);", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:02:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMTkzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMjgxMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481332811", "bodyText": "So are these two basically the same then?\n.map(response -> response.getValue());\n.flatMap(response -> Mono.justOrEmpty(response.getValue()));", "author": "timtay-microsoft", "createdAt": "2020-09-01T18:03:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMTkzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzNjA5Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481336093", "bodyText": "Yes, they are the same.\nThe first one will take the response emitted by the previous Mono, transform it to .getValue() and emit the result.\nThe second one will take the response emitted by the previous Mono, transform it into .getValue(), put it into a Mono, flatten it and emit the result.", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:09:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMTkzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzNjU4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481336586", "bodyText": "So the end result from both of these transformed APIs will be the .getValue() items directly.", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:10:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMTkzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMjc3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481332771", "bodyText": "We should add a log statement here, before returning the error.", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:03:17Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +717,118 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return A {@link DigitalTwinsResponse} containing the application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath) {\n+        return withContext(context -> getComponentWithResponse(digitalTwinId, componentPath, context));\n+    }\n+\n+    Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath, Context context) {\n+        return protocolLayer.getDigitalTwins().getComponentWithResponseAsync(digitalTwinId, componentPath, context)\n+            .flatMap(response -> {\n+                try {\n+                    String jsonResponse = mapper.writeValueAsString(response.getValue());\n+                    DigitalTwinsResponseHeaders twinHeaders = mapper.convertValue(response.getDeserializedHeaders(), DigitalTwinsResponseHeaders.class);\n+                    return Mono.just(new DigitalTwinsResponse<>(response.getRequest(), response.getStatusCode(), response.getHeaders(), jsonResponse, twinHeaders));\n+                } catch (JsonProcessingException e) {\n+                    return Mono.error(e);", "originalCommit": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMzA4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481333087", "bodyText": "this can also be .map", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:03:53Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +717,118 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return A {@link DigitalTwinsResponse} containing the application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath) {\n+        return withContext(context -> getComponentWithResponse(digitalTwinId, componentPath, context));\n+    }\n+\n+    Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath, Context context) {\n+        return protocolLayer.getDigitalTwins().getComponentWithResponseAsync(digitalTwinId, componentPath, context)\n+            .flatMap(response -> {\n+                try {\n+                    String jsonResponse = mapper.writeValueAsString(response.getValue());\n+                    DigitalTwinsResponseHeaders twinHeaders = mapper.convertValue(response.getDeserializedHeaders(), DigitalTwinsResponseHeaders.class);\n+                    return Mono.just(new DigitalTwinsResponse<>(response.getRequest(), response.getStatusCode(), response.getHeaders(), jsonResponse, twinHeaders));\n+                } catch (JsonProcessingException e) {\n+                    return Mono.error(e);\n+                }\n+            });\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @param clazz The class to deserialize the application/json component into.\n+     * @param <T> The generic type to deserialize the component to.\n+     * @return The deserialized application/json object representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public <T> Mono<T> getComponent(String digitalTwinId, String componentPath, Class<T> clazz) {\n+        return getComponentWithResponse(digitalTwinId, componentPath, clazz)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));", "originalCommit": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzNDMwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481334303", "bodyText": "Good point, I believe I've missed this check in the update relationship API, would you mind adding this there as well?", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:06:02Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +717,118 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return A {@link DigitalTwinsResponse} containing the application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath) {\n+        return withContext(context -> getComponentWithResponse(digitalTwinId, componentPath, context));\n+    }\n+\n+    Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath, Context context) {\n+        return protocolLayer.getDigitalTwins().getComponentWithResponseAsync(digitalTwinId, componentPath, context)\n+            .flatMap(response -> {\n+                try {\n+                    String jsonResponse = mapper.writeValueAsString(response.getValue());\n+                    DigitalTwinsResponseHeaders twinHeaders = mapper.convertValue(response.getDeserializedHeaders(), DigitalTwinsResponseHeaders.class);\n+                    return Mono.just(new DigitalTwinsResponse<>(response.getRequest(), response.getStatusCode(), response.getHeaders(), jsonResponse, twinHeaders));\n+                } catch (JsonProcessingException e) {\n+                    return Mono.error(e);\n+                }\n+            });\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @param clazz The class to deserialize the application/json component into.\n+     * @param <T> The generic type to deserialize the component to.\n+     * @return The deserialized application/json object representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public <T> Mono<T> getComponent(String digitalTwinId, String componentPath, Class<T> clazz) {\n+        return getComponentWithResponse(digitalTwinId, componentPath, clazz)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @param clazz The class to deserialize the application/json component into.\n+     * @param <T> The generic type to deserialize the component to.\n+     * @return A {@link DigitalTwinsResponse} containing the deserialized application/json object representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public <T> Mono<DigitalTwinsResponse<T>> getComponentWithResponse(String digitalTwinId, String componentPath, Class<T> clazz) {\n+        return withContext(context -> getComponentWithResponse(digitalTwinId, componentPath, clazz, context));\n+    }\n+\n+    <T> Mono<DigitalTwinsResponse<T>> getComponentWithResponse(String digitalTwinId, String componentPath, Class<T> clazz, Context context) {\n+        return protocolLayer.getDigitalTwins().getComponentWithResponseAsync(digitalTwinId, componentPath, context)\n+            .flatMap(response -> {\n+                T genericResponse = mapper.convertValue(response.getValue(), clazz);\n+                DigitalTwinsResponseHeaders twinHeaders = mapper.convertValue(response.getDeserializedHeaders(), DigitalTwinsResponseHeaders.class);\n+                return Mono.just(new DigitalTwinsResponse<T>(response.getRequest(), response.getStatusCode(), response.getHeaders(), genericResponse, twinHeaders));\n+            });\n+    }\n+\n+    /**\n+     * Patch a component on a digital twin.\n+     * @param digitalTwinId The Id of the digital twin that has the component to patch.\n+     * @param componentPath The path of the component on the digital twin.\n+     * @param componentUpdateOperations The application json patch to apply to the component. See {@link com.azure.digitaltwins.core.util.UpdateOperationUtility} for building\n+     *                                  this argument.\n+     * @return An empty Mono.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Void> updateComponent(String digitalTwinId, String componentPath, List<Object> componentUpdateOperations) {\n+        return updateComponentWithResponse(digitalTwinId, componentPath, componentUpdateOperations, new UpdateComponentRequestOptions())\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Patch a component on a digital twin.\n+     * @param digitalTwinId The Id of the digital twin that has the component to patch.\n+     * @param componentPath The path of the component on the digital twin.\n+     * @param componentUpdateOperations The application json patch to apply to the component. See {@link com.azure.digitaltwins.core.util.UpdateOperationUtility} for building\n+     *                                  this argument.\n+     * @param requestOptions The optional parameters for this request.\n+     * @return A {@link DigitalTwinsResponse} containing an empty Mono.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<DigitalTwinsResponse<Void>> updateComponentWithResponse(String digitalTwinId, String componentPath, List<Object> componentUpdateOperations, UpdateComponentRequestOptions requestOptions) {\n+        return withContext(context -> updateComponentWithResponse(digitalTwinId, componentPath, componentUpdateOperations, requestOptions, context));\n+    }\n+\n+    Mono<DigitalTwinsResponse<Void>> updateComponentWithResponse(String digitalTwinId, String componentPath, List<Object> componentUpdateOperations, UpdateComponentRequestOptions requestOptions, Context context) {\n+        String ifMatch = requestOptions != null ? requestOptions.getIfMatch() : null;", "originalCommit": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzNDczMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481334732", "bodyText": "Sure thing", "author": "timtay-microsoft", "createdAt": "2020-09-01T18:06:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzNDMwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzNTE1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481335155", "bodyText": "I'll do the same for the deleteRelationship API as well, since it is missing there, too", "author": "timtay-microsoft", "createdAt": "2020-09-01T18:07:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzNDMwMw=="}], "type": "inlineReview"}, {"oid": "c30ec743ff8983ce9043a0493af7ba18ce88c421", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c30ec743ff8983ce9043a0493af7ba18ce88c421", "message": "cr comments", "committedDate": "2020-09-01T18:09:52Z", "type": "commit"}, {"oid": "ef022bb338b5e3660e310d2905691c357920ed67", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ef022bb338b5e3660e310d2905691c357920ed67", "message": "cr comments", "committedDate": "2020-09-01T18:12:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzOTU4Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481339583", "bodyText": "We've been following the format where the async APIs call the async overloads, and the max overload API calls the PL.\nSimilarly, the sync APIs call the sync overloads, and the max overload sync API calls  the async API.", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:16:00Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsClient.java", "diffHunk": "@@ -381,4 +381,85 @@ public void decommissionModel(String modelId) {\n     public Response<Void> decommissionModelWithResponse(String modelId, Context context) {\n         return digitalTwinsAsyncClient.decommissionModelWithResponse(modelId, context).block();\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public String getComponent(String digitalTwinId, String componentPath) {\n+        return digitalTwinsAsyncClient.getComponent(digitalTwinId, componentPath).block();", "originalCommit": "c30ec743ff8983ce9043a0493af7ba18ce88c421", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MDk5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481340991", "bodyText": "Gotcha, I can chain it that way instead", "author": "timtay-microsoft", "createdAt": "2020-09-01T18:18:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzOTU4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MjIzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481342231", "bodyText": "Fiyi - for default context you can use Context.NONE.", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:20:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzOTU4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MDE3MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481340170", "bodyText": "nit: this can be replaced by a method reference .map(DigitalTwinsResponse::getValue).", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:17:03Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +721,119 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .map(response -> response.getValue());", "originalCommit": "c30ec743ff8983ce9043a0493af7ba18ce88c421", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MDU4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481340587", "bodyText": "Ha, too slow. I just figured this out while looking at another PR", "author": "timtay-microsoft", "createdAt": "2020-09-01T18:17:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MDE3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MDcyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481340722", "bodyText": "So I made this change already", "author": "timtay-microsoft", "createdAt": "2020-09-01T18:18:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MDE3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MTYzNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481341637", "bodyText": "Would you mind adding a similar class for the update relationship request options as well, and changing the API signature to take in the new inherited type?", "author": "abhipsaMisra", "createdAt": "2020-09-01T18:19:35Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/UpdateComponentRequestOptions.java", "diffHunk": "@@ -0,0 +1,16 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.digitaltwins.core;\n+\n+\n+import java.util.List;\n+\n+/**\n+ * Optional settings that are specific to calls to {@link DigitalTwinsClient#updateComponent(String, String, List)} and its overloads.\n+ */\n+public class UpdateComponentRequestOptions extends RequestOptions {", "originalCommit": "ef022bb338b5e3660e310d2905691c357920ed67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MTg0NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481341844", "bodyText": "Sure thing", "author": "timtay-microsoft", "createdAt": "2020-09-01T18:19:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MTYzNw=="}], "type": "inlineReview"}, {"oid": "fa61af8b84482863e25414219adeacd8a128de8c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fa61af8b84482863e25414219adeacd8a128de8c", "message": "cr comments", "committedDate": "2020-09-01T18:25:47Z", "type": "commit"}, {"oid": "e14195ef7a5d458ac1289080a0b5313d790b1dab", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e14195ef7a5d458ac1289080a0b5313d790b1dab", "message": "fix", "committedDate": "2020-09-01T18:44:36Z", "type": "commit"}, {"oid": "45c8cf948a8321130e384c6c827820698404ecb6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/45c8cf948a8321130e384c6c827820698404ecb6", "message": "fix", "committedDate": "2020-09-01T18:57:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM3MTk5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481371997", "bodyText": "Ah, is this because of the need for fluent getters and setters?", "author": "abhipsaMisra", "createdAt": "2020-09-01T19:11:04Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DeleteRelationshipRequestOptions.java", "diffHunk": "@@ -0,0 +1,21 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.digitaltwins.core;\n+\n+\n+import java.util.List;\n+\n+/**\n+ * Optional settings that are specific to calls to {@link DigitalTwinsClient#updateComponent(String, String, List)} and its overloads.\n+ */\n+public class DeleteRelationshipRequestOptions extends RequestOptions {\n+    // This class exists to be added to later if the deleteRelationship APIs get a new optional parameter in later service\n+    // API versions and so that we don't have to expose that new optional parameter for other APIs like deleteDigitalTwin\n+\n+    @Override\n+    public DeleteRelationshipRequestOptions setIfMatch(String ifMatch) {", "originalCommit": "45c8cf948a8321130e384c6c827820698404ecb6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM3MjU1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481372555", "bodyText": "Yeah, without the override, the fluent return value will be of type RequestOption, not the inheriting class", "author": "timtay-microsoft", "createdAt": "2020-09-01T19:12:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM3MTk5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM3Mjg0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481372843", "bodyText": "It's a bit of code duplication, but at least the javadocs are inherited correctly", "author": "timtay-microsoft", "createdAt": "2020-09-01T19:12:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM3MTk5Nw=="}], "type": "inlineReview"}]}