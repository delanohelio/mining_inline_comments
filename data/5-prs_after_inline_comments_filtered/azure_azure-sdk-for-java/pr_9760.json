{"pr_number": 9760, "pr_title": "Track 1 Event Hubs: fix null handling in application properties when sending", "pr_createdAt": "2020-04-01T23:31:48Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/9760", "timeline": [{"oid": "daabbd5883bc987939808b28a9e54ff91e90587e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/daabbd5883bc987939808b28a9e54ff91e90587e", "message": "Handle nulls in application properties", "committedDate": "2020-04-01T23:25:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk4ODQxNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9760#discussion_r401988414", "bodyText": "For null value scenario, is the sizeof API returning illegal argument error without your change?", "author": "sjkwak", "createdAt": "2020-04-02T00:35:43Z", "path": "sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/AmqpUtil.java", "diffHunk": "@@ -90,6 +95,11 @@ public static int getDataSerializedSize(Message amqpMessage) {\n     }\n \n     private static int sizeof(Object obj) {\n+        if (obj == null) {\n+            // In AMQP, null is a special type which has no data beyond the encoding byte.\n+            return 0;\n+        }\n+", "originalCommit": "daabbd5883bc987939808b28a9e54ff91e90587e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk5MDIxMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9760#discussion_r401990211", "bodyText": "Yes, that's where the NPE was throwing from: the first instanceof was trying to reference the object and throwing.", "author": "JamesBirdsall", "createdAt": "2020-04-02T00:42:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk4ODQxNA=="}], "type": "inlineReview"}]}