{"pr_number": 15473, "pr_title": "mgmt add azure-resourcemanager-perf", "pr_createdAt": "2020-09-22T07:11:25Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/15473", "timeline": [{"oid": "55fa0e23d5a124604de5a8c3b5e796d8e6552e47", "url": "https://github.com/Azure/azure-sdk-for-java/commit/55fa0e23d5a124604de5a8c3b5e796d8e6552e47", "message": "mgmt add azure-resourcemanager-perf", "committedDate": "2020-09-22T07:00:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU1MjE5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15473#discussion_r492552198", "bodyText": "How does data-plane prepare their test env?", "author": "weidongxu-microsoft", "createdAt": "2020-09-22T08:16:42Z", "path": "sdk/resourcemanager/azure-resourcemanager-perf/src/main/java/com/azure/resourcemanager/perf/core/AzureResourceManagerTest.java", "diffHunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.resourcemanager.perf.core;\n+\n+import com.azure.core.management.AzureEnvironment;\n+import com.azure.core.management.profile.AzureProfile;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.perf.test.core.PerfStressOptions;\n+import com.azure.perf.test.core.PerfStressTest;\n+import com.azure.resourcemanager.AzureResourceManager;\n+import com.azure.resourcemanager.test.utils.AuthFile;\n+\n+import java.io.File;\n+import java.io.IOException;\n+\n+public abstract class AzureResourceManagerTest<TOptions extends PerfStressOptions> extends PerfStressTest<TOptions> {\n+    protected final AzureResourceManager azureResourceManager;\n+    public AzureResourceManagerTest(TOptions options) throws IOException {\n+        super(options);\n+\n+        String authFilePath = System.getenv(\"AZURE_AUTH_LOCATION\");\n+        if (CoreUtils.isNullOrEmpty(authFilePath)) {\n+            System.out.println(\"Environment variable AZURE_AUTH_LOCATION must be set.\");\n+            System.exit(1);\n+        }\n+\n+        AuthFile authFile = AuthFile.parse(new File(authFilePath));\n+        AzureProfile profile = new AzureProfile(authFile.getTenantId(), authFile.getSubscriptionId(), AzureEnvironment.AZURE);\n+        azureResourceManager = AzureResourceManager.authenticate(authFile.getCredential(), profile).withDefaultSubscription();", "originalCommit": "55fa0e23d5a124604de5a8c3b5e796d8e6552e47", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU1NTUwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15473#discussion_r492555505", "bodyText": "String connectionString = System.getenv(\"STORAGE_CONNECTION_STRING\");\nThey use the connection string.", "author": "xseeseesee", "createdAt": "2020-09-22T08:22:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU1MjE5OA=="}], "type": "inlineReview"}, {"oid": "9c778cc8b5b8b1c2cd2d4c09734d2f05d92f8fb7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9c778cc8b5b8b1c2cd2d4c09734d2f05d92f8fb7", "message": "Merge branch 'master' into add-mgmt-perf-test", "committedDate": "2020-10-20T05:47:58Z", "type": "commit"}, {"oid": "d49061a65b1239a69041ce95d09f633d47b45595", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d49061a65b1239a69041ce95d09f633d47b45595", "message": "update with latest azure resourcemanager", "committedDate": "2020-10-20T09:22:52Z", "type": "commit"}, {"oid": "a3e326551ff28ff00418d65d220249a43e15777d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a3e326551ff28ff00418d65d220249a43e15777d", "message": "Merge branch 'master' into add-mgmt-perf-test", "committedDate": "2020-10-20T09:40:44Z", "type": "commit"}, {"oid": "9552b7a8c99901c1dadc46269ec9db967b7370f2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9552b7a8c99901c1dadc46269ec9db967b7370f2", "message": "update pom", "committedDate": "2020-10-20T09:42:44Z", "type": "commit"}]}