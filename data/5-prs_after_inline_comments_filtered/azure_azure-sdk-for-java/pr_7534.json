{"pr_number": 7534, "pr_title": "Clears closed/errored sessions and links", "pr_createdAt": "2020-01-17T10:46:59Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/7534", "timeline": [{"oid": "15961b4fd463c107da32a7855c6dfa6bb76139e2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/15961b4fd463c107da32a7855c6dfa6bb76139e2", "message": "Update Reactor to schedule pending tasks before completing.", "committedDate": "2020-01-16T23:47:18Z", "type": "commit"}, {"oid": "3e9f2f77280447bb7b0103a02857fd4178476223", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3e9f2f77280447bb7b0103a02857fd4178476223", "message": "Fix bug where clean up task was not scheduled immediately", "committedDate": "2020-01-16T23:52:22Z", "type": "commit"}, {"oid": "3ba7ccda4efca850cac5e7d785287ccb208276bf", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3ba7ccda4efca850cac5e7d785287ccb208276bf", "message": "Dispose of session when closed in Connection.", "committedDate": "2020-01-17T00:11:22Z", "type": "commit"}, {"oid": "92378c64fbc85a40f9adbbabe46b13da809f2c43", "url": "https://github.com/Azure/azure-sdk-for-java/commit/92378c64fbc85a40f9adbbabe46b13da809f2c43", "message": "Cleaning up sessions when they die.", "committedDate": "2020-01-17T00:18:28Z", "type": "commit"}, {"oid": "f0f9c7613b054e78298722931733300cca75a160", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f0f9c7613b054e78298722931733300cca75a160", "message": "Use single map to keep track of sessions.", "committedDate": "2020-01-17T00:28:51Z", "type": "commit"}, {"oid": "47a0ba2a67a85c1e2ffc97cf3a0fee63a1f5a2a2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/47a0ba2a67a85c1e2ffc97cf3a0fee63a1f5a2a2", "message": "AmqpConnection does not keep track of open links.", "committedDate": "2020-01-17T08:25:01Z", "type": "commit"}, {"oid": "ad1006d8f34a19aa40593419f0f9a8fd0c53d038", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ad1006d8f34a19aa40593419f0f9a8fd0c53d038", "message": "Use the same link name for creating producers.", "committedDate": "2020-01-17T08:25:33Z", "type": "commit"}, {"oid": "26b15ec305af3285f1758a4700c50e4019de1151", "url": "https://github.com/Azure/azure-sdk-for-java/commit/26b15ec305af3285f1758a4700c50e4019de1151", "message": "Update log messages in TokenManager.", "committedDate": "2020-01-17T08:26:28Z", "type": "commit"}, {"oid": "de25760807cd49227b01f5757dcfb013b9950a67", "url": "https://github.com/Azure/azure-sdk-for-java/commit/de25760807cd49227b01f5757dcfb013b9950a67", "message": "Use retry in entire getLinkSize operation.", "committedDate": "2020-01-17T08:27:46Z", "type": "commit"}, {"oid": "982924312f81e1b898c8cc6a32af3ae91dd54d10", "url": "https://github.com/Azure/azure-sdk-for-java/commit/982924312f81e1b898c8cc6a32af3ae91dd54d10", "message": "Defer creation of send work item", "committedDate": "2020-01-17T08:29:11Z", "type": "commit"}, {"oid": "1e3959536bfe2cfc36329f9851b76a3e32d4ea94", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1e3959536bfe2cfc36329f9851b76a3e32d4ea94", "message": "Manage send and receive links in ReactorSession.", "committedDate": "2020-01-17T08:29:36Z", "type": "commit"}, {"oid": "cae2509870a3b9270394f74a277da6d94de9f54a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cae2509870a3b9270394f74a277da6d94de9f54a", "message": "Fix spotbug issues.", "committedDate": "2020-01-17T08:51:56Z", "type": "commit"}, {"oid": "31415e041e80719b03d2eea30cdac2d0aa3c32a9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/31415e041e80719b03d2eea30cdac2d0aa3c32a9", "message": "Fixing test.", "committedDate": "2020-01-17T08:59:57Z", "type": "commit"}, {"oid": "3d2850c97a52a40d0afa9f54fe557c6d11f404e9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3d2850c97a52a40d0afa9f54fe557c6d11f404e9", "message": "Change warning to information.", "committedDate": "2020-01-17T09:02:48Z", "type": "commit"}, {"oid": "4a96089d9d9376a35abf0e7cc0a8703bbddcf95c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4a96089d9d9376a35abf0e7cc0a8703bbddcf95c", "message": "Fixing test failures.", "committedDate": "2020-01-17T09:04:09Z", "type": "commit"}, {"oid": "7d99bd8e306666998e3c907280f788bbdd1f2c28", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7d99bd8e306666998e3c907280f788bbdd1f2c28", "message": "Change send link to verbose.", "committedDate": "2020-01-17T09:36:18Z", "type": "commit"}, {"oid": "d0df15cc29d2b239ad460246f4637ca4613e4ee3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d0df15cc29d2b239ad460246f4637ca4613e4ee3", "message": "Add another long running integration test.", "committedDate": "2020-01-17T09:44:21Z", "type": "commit"}, {"oid": "4ad89defc5a36b109a9a87914389ae1df47d8cd2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4ad89defc5a36b109a9a87914389ae1df47d8cd2", "message": "Update logging.", "committedDate": "2020-01-17T10:19:05Z", "type": "commit"}, {"oid": "4c041a0011c516773166cbaf0375c33d8114b288", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4c041a0011c516773166cbaf0375c33d8114b288", "message": "Updating loggging messages.", "committedDate": "2020-01-17T10:42:25Z", "type": "commit"}, {"oid": "88625cd17249a00e96fa809dae519889b21679ac", "url": "https://github.com/Azure/azure-sdk-for-java/commit/88625cd17249a00e96fa809dae519889b21679ac", "message": "Update logging for messages.", "committedDate": "2020-01-17T10:45:00Z", "type": "commit"}, {"oid": "3a3e3bdcf725575b9a4ba15fe4ff6359697a592a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3a3e3bdcf725575b9a4ba15fe4ff6359697a592a", "message": "Fix checkstyle issues.", "committedDate": "2020-01-17T11:22:00Z", "type": "commit"}, {"oid": "583cb2f54650fa4299413a916d0dc969adc625b1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/583cb2f54650fa4299413a916d0dc969adc625b1", "message": "Add class for long running, disabled, tests.", "committedDate": "2020-01-17T12:13:14Z", "type": "commit"}, {"oid": "8d67a33d690fa50c69c7999a6475fb4e3b8bd3cd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8d67a33d690fa50c69c7999a6475fb4e3b8bd3cd", "message": "Fix log messages. Do not return management node if there is an exception.", "committedDate": "2020-01-17T12:29:22Z", "type": "commit"}, {"oid": "4ec5272f3bccb8ac8eb5d3ed2a7a573eee97d4b0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4ec5272f3bccb8ac8eb5d3ed2a7a573eee97d4b0", "message": "Update RequestResponseChannel to listen to endpoint states.", "committedDate": "2020-01-17T12:48:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA3ODQxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7534#discussion_r368078413", "bodyText": "Would this be better suited in our stress test client since this is disabled and wouldn't run in any of our live tests?", "author": "srnagar", "createdAt": "2020-01-17T18:36:59Z", "path": "sdk/eventhubs/azure-messaging-eventhubs/src/test/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClientIntegrationTest.java", "diffHunk": "@@ -247,4 +252,41 @@ void worksAfterReconnection() throws InterruptedException {\n         TimeUnit.MINUTES.sleep(30);\n         System.out.println(\"Complete.\");\n     }\n+\n+    @Disabled(\"Testing idle/long running operations.\")", "originalCommit": "3a3e3bdcf725575b9a4ba15fe4ff6359697a592a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODEyNjIzMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7534#discussion_r368126230", "bodyText": "Yes, it would for our new stress infrastructure. But I didn't want to manually have to fire up their giant infrastructure when I wanted to test a change. :( I'll create an issue to move these tests.", "author": "conniey", "createdAt": "2020-01-17T20:37:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA3ODQxMw=="}], "type": "inlineReview"}, {"oid": "dfc09fbb9f834fe8e25fdd61c4cdb1e634cc9a0f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dfc09fbb9f834fe8e25fdd61c4cdb1e634cc9a0f", "message": "Updating tests.", "committedDate": "2020-01-17T19:23:15Z", "type": "commit"}, {"oid": "837d76d9d4148766ad0d48d0d2adb40f47b380d4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/837d76d9d4148766ad0d48d0d2adb40f47b380d4", "message": "Adding support for management channel to fetch new instance if it is idled or closed.", "committedDate": "2020-01-17T19:45:19Z", "type": "commit"}, {"oid": "80c83eb05c82d23628c7c6c5b568f5f83a2f2a4c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/80c83eb05c82d23628c7c6c5b568f5f83a2f2a4c", "message": "Adding tests.", "committedDate": "2020-01-17T19:46:18Z", "type": "commit"}, {"oid": "c9d36d67edb620a2f5a12c648805323a82572a96", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c9d36d67edb620a2f5a12c648805323a82572a96", "message": "Fix build issue.", "committedDate": "2020-01-17T19:48:53Z", "type": "commit"}, {"oid": "75cc6fcfed7f44e13a93cad847357ae45e5d7e4b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/75cc6fcfed7f44e13a93cad847357ae45e5d7e4b", "message": "Update logging.", "committedDate": "2020-01-17T19:59:23Z", "type": "commit"}, {"oid": "7eaa4a29d5c8c676a213861edd05377b38f8bdd0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7eaa4a29d5c8c676a213861edd05377b38f8bdd0", "message": "ConnectionProcessor uses AmqpCHannelProcessor.", "committedDate": "2020-01-17T20:03:37Z", "type": "commit"}, {"oid": "ddb9200db5bcae3524836ceb1ecf2cd30b84074d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ddb9200db5bcae3524836ceb1ecf2cd30b84074d", "message": "Remove unused method.", "committedDate": "2020-01-17T20:03:53Z", "type": "commit"}, {"oid": "7950b9e2bce76813cadb620e4d320c0bdbed44dc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7950b9e2bce76813cadb620e4d320c0bdbed44dc", "message": "Fix test hang.", "committedDate": "2020-01-17T20:29:20Z", "type": "commit"}, {"oid": "c870c987ddd786e60cfbd3d1010a062f7b79dab4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c870c987ddd786e60cfbd3d1010a062f7b79dab4", "message": "Update EHCProcessorTest.", "committedDate": "2020-01-17T20:30:48Z", "type": "commit"}, {"oid": "5814c027e794fefd380846e19a95579687b6200b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5814c027e794fefd380846e19a95579687b6200b", "message": "Fix spotbugs issue.", "committedDate": "2020-01-17T20:53:18Z", "type": "commit"}, {"oid": "4c028c21ef54b2b3678239a931344f0611adf2a2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4c028c21ef54b2b3678239a931344f0611adf2a2", "message": "Fix indentation.", "committedDate": "2020-01-17T21:34:48Z", "type": "commit"}, {"oid": "ed8c2571cbb5f55d778afa765873c8bf8f8f9da4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ed8c2571cbb5f55d778afa765873c8bf8f8f9da4", "message": "Fixing log message.", "committedDate": "2020-01-17T22:05:34Z", "type": "commit"}, {"oid": "2f04384069f754d7895d296e088be9b98c80ca7e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2f04384069f754d7895d296e088be9b98c80ca7e", "message": "Fix error that occurs when multiple consumers are used.", "committedDate": "2020-01-18T01:21:35Z", "type": "commit"}, {"oid": "9fe809559e869e7f175f437d53eb1b15caae2a13", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9fe809559e869e7f175f437d53eb1b15caae2a13", "message": "update test parameters.", "committedDate": "2020-01-18T01:27:51Z", "type": "commit"}, {"oid": "5955ecc4598e6acb20cd211d8819408f64b9f07b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5955ecc4598e6acb20cd211d8819408f64b9f07b", "message": "revert to using session name.", "committedDate": "2020-01-18T01:40:28Z", "type": "commit"}, {"oid": "bed42169045b68765d3204631f552f7e6bf91ce6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bed42169045b68765d3204631f552f7e6bf91ce6", "message": "Fix test.", "committedDate": "2020-01-18T01:40:53Z", "type": "commit"}, {"oid": "43e4415442dee42c0b80d0984015e59ebd84552d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/43e4415442dee42c0b80d0984015e59ebd84552d", "message": "Revert changes.", "committedDate": "2020-01-18T05:02:58Z", "type": "commit"}, {"oid": "a0b9b3f09916e6ff557e364d4f5af831b94819cd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a0b9b3f09916e6ff557e364d4f5af831b94819cd", "message": "Fix checkstyle issue.", "committedDate": "2020-01-18T06:21:18Z", "type": "commit"}]}