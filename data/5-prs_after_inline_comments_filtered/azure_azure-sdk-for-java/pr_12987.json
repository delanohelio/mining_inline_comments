{"pr_number": 12987, "pr_title": "Refactor Formrecognizer samples", "pr_createdAt": "2020-07-09T23:43:20Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/12987", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk5Nzg1OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r452997858", "bodyText": "using == instead of .equals()?", "author": "mssfang", "createdAt": "2020-07-10T18:12:12Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -430,64 +426,65 @@ public void beginRecognizeReceipts() throws IOException {\n         File receipt = new File(\"{file_source_url}\");\n         Flux<ByteBuffer> buffer = toFluxByteBuffer(new ByteArrayInputStream(Files.readAllBytes(receipt.toPath())));\n         formRecognizerAsyncClient.beginRecognizeReceipts(buffer, receipt.length())\n-            .subscribe(recognizePollingOperation ->\n+            .flatMap(recognizePollingOperation ->\n                 // if training polling operation completed, retrieve the final result.\n-                recognizePollingOperation.getFinalResult().subscribe(recognizedReceipts -> {\n-                    for (int i = 0; i < recognizedReceipts.size(); i++) {\n-                        RecognizedForm recognizedForm = recognizedReceipts.get(i);\n-                        Map<String, FormField<?>> recognizedFields = recognizedForm.getFields();\n-                        System.out.printf(\"----------- Recognized Receipt page %d -----------%n\", i);\n-                        FormField<?> merchantNameField = recognizedFields.get(\"MerchantName\");\n-                        if (merchantNameField != null) {\n-                            if (FieldValueType.STRING.equals(merchantNameField.getValueType())) {\n-                                String merchantName = FieldValueType.STRING.cast(merchantNameField);\n-                                System.out.printf(\"Merchant Name: %s, confidence: %.2f%n\",\n-                                    merchantName, merchantNameField.getConfidence());\n+                recognizePollingOperation.getFinalResult())\n+                    .subscribe(recognizedReceipts -> {\n+                        for (int i = 0; i < recognizedReceipts.size(); i++) {\n+                            RecognizedForm recognizedForm = recognizedReceipts.get(i);\n+                            Map<String, FormField<?>> recognizedFields = recognizedForm.getFields();\n+                            System.out.printf(\"----------- Recognized Receipt page %d -----------%n\", i);\n+                            FormField<?> merchantNameField = recognizedFields.get(\"MerchantName\");\n+                            if (merchantNameField != null) {\n+                                if (FieldValueType.STRING.equals(merchantNameField.getValueType())) {\n+                                    String merchantName = FieldValueType.STRING.cast(merchantNameField);\n+                                    System.out.printf(\"Merchant Name: %s, confidence: %.2f%n\",\n+                                        merchantName, merchantNameField.getConfidence());\n+                                }\n                             }\n-                        }\n \n-                        FormField<?> merchantPhoneNumberField = recognizedFields.get(\"MerchantPhoneNumber\");\n-                        if (merchantPhoneNumberField != null) {\n-                            if (FieldValueType.PHONE_NUMBER.equals(merchantNameField.getValueType())) {\n-                                String merchantAddress = FieldValueType.PHONE_NUMBER.cast(merchantPhoneNumberField);\n-                                System.out.printf(\"Merchant Phone number: %s, confidence: %.2f%n\",\n-                                    merchantAddress, merchantPhoneNumberField.getConfidence());\n+                            FormField<?> merchantPhoneNumberField = recognizedFields.get(\"MerchantPhoneNumber\");\n+                            if (merchantPhoneNumberField != null) {\n+                                if (FieldValueType.PHONE_NUMBER.equals(merchantNameField.getValueType())) {\n+                                    String merchantAddress = FieldValueType.PHONE_NUMBER.cast(merchantPhoneNumberField);\n+                                    System.out.printf(\"Merchant Phone number: %s, confidence: %.2f%n\",\n+                                        merchantAddress, merchantPhoneNumberField.getConfidence());\n+                                }\n                             }\n-                        }\n \n-                        FormField<?> transactionDateField = recognizedFields.get(\"TransactionDate\");\n-                        if (transactionDateField != null) {\n-                            if (FieldValueType.DATE.equals(transactionDateField.getValueType())) {\n-                                LocalDate transactionDate = FieldValueType.DATE.cast(transactionDateField);\n-                                System.out.printf(\"Transaction Date: %s, confidence: %.2f%n\",\n-                                    transactionDate, transactionDateField.getConfidence());\n+                            FormField<?> transactionDateField = recognizedFields.get(\"TransactionDate\");\n+                            if (transactionDateField != null) {\n+                                if (FieldValueType.DATE.equals(transactionDateField.getValueType())) {\n+                                    LocalDate transactionDate = FieldValueType.DATE.cast(transactionDateField);\n+                                    System.out.printf(\"Transaction Date: %s, confidence: %.2f%n\",\n+                                        transactionDate, transactionDateField.getConfidence());\n+                                }\n                             }\n-                        }\n \n-                        FormField<?> receiptItemsField = recognizedFields.get(\"Items\");\n-                        if (receiptItemsField != null) {\n-                            System.out.printf(\"Receipt Items: %n\");\n-                            if (FieldValueType.LIST.equals(receiptItemsField.getValueType())) {\n-                                List<FormField<?>> receiptItems = FieldValueType.LIST.cast(receiptItemsField);\n-                                receiptItems.forEach(receiptItem -> {\n-                                    if (FieldValueType.MAP.equals(receiptItem.getValueType())) {\n-\n-                                        Map<String, FormField<?>> formFieldMap = FieldValueType.MAP.cast(receiptItem);\n-                                        formFieldMap.forEach((key, formField) -> {\n-                                            if (\"Quantity\".equals(key)) {\n-                                                if (FieldValueType.DOUBLE.equals(formField.getValueType())) {\n-                                                    Float quantity = FieldValueType.DOUBLE.cast(formField);\n-                                                    System.out.printf(\"Quantity: %f, confidence: %.2f%n\",\n-                                                        quantity, formField.getConfidence());\n+                            FormField<?> receiptItemsField = recognizedFields.get(\"Items\");\n+                            if (receiptItemsField != null) {\n+                                System.out.printf(\"Receipt Items: %n\");\n+                                if (FieldValueType.LIST.equals(receiptItemsField.getValueType())) {", "originalCommit": "41bc8b212239f187f79ffe971fcec742a0926005", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk5ODE5OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r452998199", "bodyText": "same to rest of files. Might be need to revisit CodeSnippets files again", "author": "mssfang", "createdAt": "2020-07-10T18:12:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk5Nzg1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwNTIwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r453005201", "bodyText": "perfect place to use stream() method here. Great.", "author": "mssfang", "createdAt": "2020-07-10T18:28:04Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerClientJavaDocCodeSnippets.java", "diffHunk": "@@ -443,62 +443,57 @@ public void beginRecognizeReceiptsWithOptions() throws IOException {\n         boolean includeFieldElements = true;\n         byte[] fileContent = Files.readAllBytes(receipt.toPath());\n         InputStream targetStream = new ByteArrayInputStream(fileContent);\n-        formRecognizerClient.beginRecognizeReceipts(targetStream, receipt.length(),\n+        for (RecognizedForm recognizedForm : formRecognizerClient.beginRecognizeReceipts(targetStream, receipt.length(),\n             new RecognizeOptions()\n                 .setContentType(FormContentType.IMAGE_JPEG)\n                 .setIncludeFieldElements(includeFieldElements)\n                 .setPollInterval(Duration.ofSeconds(5)))\n-            .getFinalResult().forEach(recognizedReceipt -> {\n-                Map<String, FormField<?>> recognizedFields = recognizedReceipt.getFields();\n-                FormField<?> merchantNameField = recognizedFields.get(\"MerchantName\");\n-                if (merchantNameField != null) {\n-                    if (FieldValueType.STRING.equals(merchantNameField.getValueType())) {\n-                        String merchantName = FieldValueType.STRING.cast(merchantNameField);\n-                        System.out.printf(\"Merchant Name: %s, confidence: %.2f%n\",\n-                            merchantName, merchantNameField.getConfidence());\n-                    }\n+            .getFinalResult()) {\n+            Map<String, FormField<?>> recognizedFields = recognizedForm.getFields();\n+            FormField<?> merchantNameField = recognizedFields.get(\"MerchantName\");\n+            if (merchantNameField != null) {\n+                if (FieldValueType.STRING == merchantNameField.getValueType()) {\n+                    String merchantName = FieldValueType.STRING.cast(merchantNameField);\n+                    System.out.printf(\"Merchant Name: %s, confidence: %.2f%n\",\n+                        merchantName, merchantNameField.getConfidence());\n                 }\n-\n-                FormField<?> merchantPhoneNumberField = recognizedFields.get(\"MerchantPhoneNumber\");\n-                if (merchantPhoneNumberField != null) {\n-                    if (FieldValueType.PHONE_NUMBER.equals(merchantNameField.getValueType())) {\n-                        String merchantAddress = FieldValueType.PHONE_NUMBER.cast(merchantPhoneNumberField);\n-                        System.out.printf(\"Merchant Phone number: %s, confidence: %.2f%n\",\n-                            merchantAddress, merchantPhoneNumberField.getConfidence());\n-                    }\n+            }\n+            FormField<?> merchantPhoneNumberField = recognizedFields.get(\"MerchantPhoneNumber\");\n+            if (merchantPhoneNumberField != null) {\n+                if (FieldValueType.PHONE_NUMBER == merchantNameField.getValueType()) {\n+                    String merchantAddress = FieldValueType.PHONE_NUMBER.cast(merchantPhoneNumberField);\n+                    System.out.printf(\"Merchant Phone number: %s, confidence: %.2f%n\",\n+                        merchantAddress, merchantPhoneNumberField.getConfidence());\n                 }\n-\n-                FormField<?> transactionDateField = recognizedFields.get(\"TransactionDate\");\n-                if (transactionDateField != null) {\n-                    if (FieldValueType.DATE.equals(transactionDateField.getValueType())) {\n-                        LocalDate transactionDate = FieldValueType.DATE.cast(transactionDateField);\n-                        System.out.printf(\"Transaction Date: %s, confidence: %.2f%n\",\n-                            transactionDate, transactionDateField.getConfidence());\n-                    }\n+            }\n+            FormField<?> transactionDateField = recognizedFields.get(\"TransactionDate\");\n+            if (transactionDateField != null) {\n+                if (FieldValueType.DATE == transactionDateField.getValueType()) {\n+                    LocalDate transactionDate = FieldValueType.DATE.cast(transactionDateField);\n+                    System.out.printf(\"Transaction Date: %s, confidence: %.2f%n\",\n+                        transactionDate, transactionDateField.getConfidence());\n                 }\n-\n-                FormField<?> receiptItemsField = recognizedFields.get(\"Items\");\n-                if (receiptItemsField != null) {\n-                    System.out.printf(\"Receipt Items: %n\");\n-                    if (FieldValueType.LIST.equals(receiptItemsField.getValueType())) {\n-                        List<FormField<?>> receiptItems = FieldValueType.LIST.cast(receiptItemsField);\n-                        receiptItems.forEach(receiptItem -> {\n-                            if (FieldValueType.MAP.equals(receiptItem.getValueType())) {\n-                                Map<String, FormField<?>> formFieldMap = FieldValueType.MAP.cast(receiptItem);\n-                                formFieldMap.forEach((key, formField) -> {\n-                                    if (\"Quantity\".equals(key)) {\n-                                        if (FieldValueType.DOUBLE.equals(formField.getValueType())) {\n-                                            Float quantity = FieldValueType.DOUBLE.cast(formField);\n-                                            System.out.printf(\"Quantity: %d, confidence: %.2f%n\",\n-                                                quantity, formField.getConfidence());\n-                                        }\n-                                    }\n-                                });\n+            }\n+            FormField<?> receiptItemsField = recognizedFields.get(\"Items\");\n+            if (receiptItemsField != null) {\n+                System.out.printf(\"Receipt Items: %n\");\n+                if (FieldValueType.LIST == receiptItemsField.getValueType()) {\n+                    List<FormField<?>> receiptItems = FieldValueType.LIST.cast(receiptItemsField);\n+                    receiptItems.stream()\n+                        .filter(receiptItem -> FieldValueType.MAP == receiptItem.getValueType())", "originalCommit": "41bc8b212239f187f79ffe971fcec742a0926005", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwNTYzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r453005631", "bodyText": "is possible to use stream again and filter here?", "author": "mssfang", "createdAt": "2020-07-10T18:29:02Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerClientJavaDocCodeSnippets.java", "diffHunk": "@@ -443,62 +443,57 @@ public void beginRecognizeReceiptsWithOptions() throws IOException {\n         boolean includeFieldElements = true;\n         byte[] fileContent = Files.readAllBytes(receipt.toPath());\n         InputStream targetStream = new ByteArrayInputStream(fileContent);\n-        formRecognizerClient.beginRecognizeReceipts(targetStream, receipt.length(),\n+        for (RecognizedForm recognizedForm : formRecognizerClient.beginRecognizeReceipts(targetStream, receipt.length(),\n             new RecognizeOptions()\n                 .setContentType(FormContentType.IMAGE_JPEG)\n                 .setIncludeFieldElements(includeFieldElements)\n                 .setPollInterval(Duration.ofSeconds(5)))\n-            .getFinalResult().forEach(recognizedReceipt -> {\n-                Map<String, FormField<?>> recognizedFields = recognizedReceipt.getFields();\n-                FormField<?> merchantNameField = recognizedFields.get(\"MerchantName\");\n-                if (merchantNameField != null) {\n-                    if (FieldValueType.STRING.equals(merchantNameField.getValueType())) {\n-                        String merchantName = FieldValueType.STRING.cast(merchantNameField);\n-                        System.out.printf(\"Merchant Name: %s, confidence: %.2f%n\",\n-                            merchantName, merchantNameField.getConfidence());\n-                    }\n+            .getFinalResult()) {\n+            Map<String, FormField<?>> recognizedFields = recognizedForm.getFields();\n+            FormField<?> merchantNameField = recognizedFields.get(\"MerchantName\");\n+            if (merchantNameField != null) {\n+                if (FieldValueType.STRING == merchantNameField.getValueType()) {\n+                    String merchantName = FieldValueType.STRING.cast(merchantNameField);\n+                    System.out.printf(\"Merchant Name: %s, confidence: %.2f%n\",\n+                        merchantName, merchantNameField.getConfidence());\n                 }\n-\n-                FormField<?> merchantPhoneNumberField = recognizedFields.get(\"MerchantPhoneNumber\");\n-                if (merchantPhoneNumberField != null) {\n-                    if (FieldValueType.PHONE_NUMBER.equals(merchantNameField.getValueType())) {\n-                        String merchantAddress = FieldValueType.PHONE_NUMBER.cast(merchantPhoneNumberField);\n-                        System.out.printf(\"Merchant Phone number: %s, confidence: %.2f%n\",\n-                            merchantAddress, merchantPhoneNumberField.getConfidence());\n-                    }\n+            }\n+            FormField<?> merchantPhoneNumberField = recognizedFields.get(\"MerchantPhoneNumber\");\n+            if (merchantPhoneNumberField != null) {\n+                if (FieldValueType.PHONE_NUMBER == merchantNameField.getValueType()) {\n+                    String merchantAddress = FieldValueType.PHONE_NUMBER.cast(merchantPhoneNumberField);\n+                    System.out.printf(\"Merchant Phone number: %s, confidence: %.2f%n\",\n+                        merchantAddress, merchantPhoneNumberField.getConfidence());\n                 }\n-\n-                FormField<?> transactionDateField = recognizedFields.get(\"TransactionDate\");\n-                if (transactionDateField != null) {\n-                    if (FieldValueType.DATE.equals(transactionDateField.getValueType())) {\n-                        LocalDate transactionDate = FieldValueType.DATE.cast(transactionDateField);\n-                        System.out.printf(\"Transaction Date: %s, confidence: %.2f%n\",\n-                            transactionDate, transactionDateField.getConfidence());\n-                    }\n+            }\n+            FormField<?> transactionDateField = recognizedFields.get(\"TransactionDate\");\n+            if (transactionDateField != null) {\n+                if (FieldValueType.DATE == transactionDateField.getValueType()) {\n+                    LocalDate transactionDate = FieldValueType.DATE.cast(transactionDateField);\n+                    System.out.printf(\"Transaction Date: %s, confidence: %.2f%n\",\n+                        transactionDate, transactionDateField.getConfidence());\n                 }\n-\n-                FormField<?> receiptItemsField = recognizedFields.get(\"Items\");\n-                if (receiptItemsField != null) {\n-                    System.out.printf(\"Receipt Items: %n\");\n-                    if (FieldValueType.LIST.equals(receiptItemsField.getValueType())) {\n-                        List<FormField<?>> receiptItems = FieldValueType.LIST.cast(receiptItemsField);\n-                        receiptItems.forEach(receiptItem -> {\n-                            if (FieldValueType.MAP.equals(receiptItem.getValueType())) {\n-                                Map<String, FormField<?>> formFieldMap = FieldValueType.MAP.cast(receiptItem);\n-                                formFieldMap.forEach((key, formField) -> {\n-                                    if (\"Quantity\".equals(key)) {\n-                                        if (FieldValueType.DOUBLE.equals(formField.getValueType())) {\n-                                            Float quantity = FieldValueType.DOUBLE.cast(formField);\n-                                            System.out.printf(\"Quantity: %d, confidence: %.2f%n\",\n-                                                quantity, formField.getConfidence());\n-                                        }\n-                                    }\n-                                });\n+            }\n+            FormField<?> receiptItemsField = recognizedFields.get(\"Items\");\n+            if (receiptItemsField != null) {\n+                System.out.printf(\"Receipt Items: %n\");\n+                if (FieldValueType.LIST == receiptItemsField.getValueType()) {\n+                    List<FormField<?>> receiptItems = FieldValueType.LIST.cast(receiptItemsField);\n+                    receiptItems.stream()\n+                        .filter(receiptItem -> FieldValueType.MAP == receiptItem.getValueType())\n+                        .<Map<String, FormField<?>>>map(FieldValueType.MAP::cast)\n+                        .forEach(formFieldMap -> formFieldMap.forEach((key, formField) -> {\n+                            if (\"Quantity\".equals(key)) {", "originalCommit": "41bc8b212239f187f79ffe971fcec742a0926005", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzNTY1OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r453035658", "bodyText": "I guess I can. Just wanted to keep a method showing the non-stream way but thought that would be inconsistent. So kept all the sample files using forEach.\nI don't have a strong preference, what do you think, update all of them?", "author": "samvaity", "createdAt": "2020-07-10T19:21:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwNTYzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc4NTU0MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r453785541", "bodyText": "Personally I like to using stream() if possible.", "author": "mssfang", "createdAt": "2020-07-13T16:44:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwNTYzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg4MzI5Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r453883296", "bodyText": "good catch", "author": "mssfang", "createdAt": "2020-07-13T19:32:18Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -304,7 +302,7 @@ public void beginRecognizeReceiptsFromUrl() {\n \n                     FormField<?> merchantPhoneNumberField = recognizedFields.get(\"MerchantPhoneNumber\");\n                     if (merchantPhoneNumberField != null) {\n-                        if (FieldValueType.PHONE_NUMBER.equals(merchantNameField.getValueType())) {\n+                        if (FieldValueType.PHONE_NUMBER == merchantPhoneNumberField.getValueType()) {", "originalCommit": "352b5593fffdbb3d00964affc9b685077c457e9a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxMDUxNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454010514", "bodyText": "NIT:  you are using two space here, but should be one.", "author": "mssfang", "createdAt": "2020-07-13T23:40:42Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/AdvancedDiffLabeledUnlabeledData.java", "diffHunk": "@@ -109,15 +111,14 @@ public static void main(String[] args) throws IOException {\n                     String.format(\"[%.2f, %.2f]\", point.getX(), point.getY())).forEach(boundingBoxStr::append);\n             }\n \n-            final StringBuilder boundingBoxLabelStr = new StringBuilder();\n             if (formField.getLabelData() != null && formField.getLabelData().getBoundingBox() != null) {\n                 formField.getLabelData().getBoundingBox().getPoints().stream().map(point ->\n                     String.format(\"[%.2f, %.2f]\", point.getX(), point.getY())).forEach(boundingBoxStr::append);\n-            }\n-            System.out.printf(\"Field %s has label %s  within bounding box %s with a confidence score \"\n-                    + \"of %.2f.%n\",\n-                label, formField.getLabelData().getText(), boundingBoxLabelStr, formField.getConfidence());\n \n+                System.out.printf(\"Field %s has label %s  within bounding box %s with a confidence score \"", "originalCommit": "352b5593fffdbb3d00964affc9b685077c457e9a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxMTMxNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454011317", "bodyText": "nit: same here. extra space", "author": "mssfang", "createdAt": "2020-07-13T23:42:08Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/AdvancedDiffLabeledUnlabeledDataAsync.java", "diffHunk": "@@ -146,14 +146,14 @@ public static void main(String[] args) throws IOException {\n                         String.format(\"[%.2f, %.2f]\", point.getX(), point.getY())).forEach(boundingBoxStr::append);\n                 }\n \n-                final StringBuilder boundingBoxLabelStr = new StringBuilder();\n                 if (formField.getLabelData() != null && formField.getLabelData().getBoundingBox() != null) {\n                     formField.getLabelData().getBoundingBox().getPoints().stream().map(point ->\n                         String.format(\"[%.2f, %.2f]\", point.getX(), point.getY())).forEach(boundingBoxStr::append);\n+\n+                    System.out.printf(\"Field %s has label %s  within bounding box %s with a confidence score \"", "originalCommit": "352b5593fffdbb3d00964affc9b685077c457e9a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNDE5Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454014193", "bodyText": "like other change, change to flatMap()?", "author": "mssfang", "createdAt": "2020-07-13T23:51:33Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -54,16 +55,17 @@ public void beginTraining() {\n         // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.beginTraining#string-boolean\n         String trainingFilesUrl = \"{SAS-URL-of-your-container-in-blob-storage}\";\n         boolean useTrainingLabels = true;\n-        formTrainingAsyncClient.beginTraining(trainingFilesUrl, useTrainingLabels).subscribe(\n-            trainingPollingOperation -> {\n+        formTrainingAsyncClient.beginTraining(trainingFilesUrl, useTrainingLabels)\n+            .subscribe(trainingPollingOperation -> {", "originalCommit": "352b5593fffdbb3d00964affc9b685077c457e9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNDg3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454014875", "bodyText": "We din't want two subscribes nested so changed for others.", "author": "samvaity", "createdAt": "2020-07-13T23:53:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNDE5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNTcwOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454015708", "bodyText": "what is the purpose of using try() but without catch()?", "author": "mssfang", "createdAt": "2020-07-13T23:56:38Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/RecognizeCustomFormsAsync.java", "diffHunk": "@@ -43,21 +43,23 @@ public static void main(String[] args) throws IOException {\n         File sourceFile = new File(\"../formrecognizer/azure-ai-formrecognizer/src/samples/java/sample-forms/\"\n             + \"forms/Invoice_6.pdf\");\n         byte[] fileContent = Files.readAllBytes(sourceFile.toPath());\n-        InputStream targetStream = new ByteArrayInputStream(fileContent);\n-        String modelId = \"{modelId}\";\n+        PollerFlux<OperationResult, List<RecognizedForm>> recognizeFormPoller;\n+        try (InputStream targetStream = new ByteArrayInputStream(fileContent)) {", "originalCommit": "352b5593fffdbb3d00964affc9b685077c457e9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxODEwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454018103", "bodyText": "This is an auto closeable try block. This will make sure the stream is closed out of the block.", "author": "samvaity", "createdAt": "2020-07-14T00:04:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNTcwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNzQzNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454017434", "bodyText": "NIT: merge to one sentence:\nnew RecognizeOption().setIncludeFieldElements(true));", "author": "mssfang", "createdAt": "2020-07-14T00:02:08Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/GetBoundingBoxesAsync.java", "diffHunk": "@@ -37,35 +37,34 @@ public static void main(String[] args) {\n         String modelId = \"{model_Id}\";\n         String formUrl = \"{form_url}\";\n         PollerFlux<OperationResult, List<RecognizedForm>> recognizeFormPoller =\n-            client.beginRecognizeCustomFormsFromUrl(formUrl, modelId, new RecognizeOptions()\n-                .setIncludeFieldElements(true));\n+            client.beginRecognizeCustomFormsFromUrl(formUrl, modelId,\n+                new RecognizeOptions()\n+                    .setIncludeFieldElements(true));", "originalCommit": "352b5593fffdbb3d00964affc9b685077c457e9a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNzUzNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454017534", "bodyText": "checkstyle issue? line too long?", "author": "mssfang", "createdAt": "2020-07-14T00:02:32Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/GetBoundingBoxes.java", "diffHunk": "@@ -77,10 +77,8 @@ public static void main(String[] args) {\n                                 FormWord formWordElement = (FormWord) (formContent);\n                                 StringBuilder boundingBoxStr = new StringBuilder();\n                                 if (formWordElement.getBoundingBox() != null) {\n-                                    formWordElement.getBoundingBox().getPoints().forEach(point -> {\n-                                        boundingBoxStr.append(String.format(\"[%.2f, %.2f]\", point.getX(),\n-                                            point.getY()));\n-                                    });\n+                                    formWordElement.getBoundingBox().getPoints().forEach(point -> boundingBoxStr.append(String.format(\"[%.2f, %.2f]\", point.getX(),", "originalCommit": "352b5593fffdbb3d00964affc9b685077c457e9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNzY3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454017672", "bodyText": "it is in sample, should be fine", "author": "mssfang", "createdAt": "2020-07-14T00:02:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNzUzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxODI3Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12987#discussion_r454018277", "bodyText": "I think we skip checkstyles on samples.", "author": "samvaity", "createdAt": "2020-07-14T00:05:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAxNzUzNA=="}], "type": "inlineReview"}, {"oid": "8f32feaf471ca82c2c936d4ab478b598994c0a56", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8f32feaf471ca82c2c936d4ab478b598994c0a56", "message": "update samples", "committedDate": "2020-07-14T07:44:52Z", "type": "commit"}, {"oid": "3a5029108d12147488920707206502aadea890d4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3a5029108d12147488920707206502aadea890d4", "message": "enum equals update", "committedDate": "2020-07-14T07:44:54Z", "type": "commit"}, {"oid": "aaeafb793d62557bff635e04cbf6e2fe38a4b204", "url": "https://github.com/Azure/azure-sdk-for-java/commit/aaeafb793d62557bff635e04cbf6e2fe38a4b204", "message": "update streams usage", "committedDate": "2020-07-14T07:44:57Z", "type": "commit"}, {"oid": "8a0fda50702dd4f4f25ebaf4a15b6dce39f5729a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8a0fda50702dd4f4f25ebaf4a15b6dce39f5729a", "message": "rename sample files", "committedDate": "2020-07-14T07:44:59Z", "type": "commit"}, {"oid": "8a0fda50702dd4f4f25ebaf4a15b6dce39f5729a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8a0fda50702dd4f4f25ebaf4a15b6dce39f5729a", "message": "rename sample files", "committedDate": "2020-07-14T07:44:59Z", "type": "forcePushed"}]}