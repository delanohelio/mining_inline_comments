{"pr_number": 17764, "pr_title": "Added support for client options in blobs", "pr_createdAt": "2020-11-23T21:46:53Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/17764", "timeline": [{"oid": "8e9bade6afcaff033edce6445e2ba838f5d2ed60", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8e9bade6afcaff033edce6445e2ba838f5d2ed60", "message": "Added support for client options in blobs", "committedDate": "2020-11-23T21:46:11Z", "type": "commit"}, {"oid": "ced733c59325cbb69c2a603c133ff43ead86c8de", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ced733c59325cbb69c2a603c133ff43ead86c8de", "message": "Added client options to blob cryptography", "committedDate": "2020-11-23T21:58:55Z", "type": "commit"}, {"oid": "05ea98a9f17fbb2355d3deeb6a494d2b148b0d30", "url": "https://github.com/Azure/azure-sdk-for-java/commit/05ea98a9f17fbb2355d3deeb6a494d2b148b0d30", "message": "Added to datalake and share", "committedDate": "2020-11-24T00:27:30Z", "type": "commit"}, {"oid": "009234966fddb6de3732e78b484f95729a9cb095", "url": "https://github.com/Azure/azure-sdk-for-java/commit/009234966fddb6de3732e78b484f95729a9cb095", "message": "Added to queue", "committedDate": "2020-11-24T00:39:43Z", "type": "commit"}, {"oid": "111e614d243d85a0fee96d9779d151fef2eb9dc4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/111e614d243d85a0fee96d9779d151fef2eb9dc4", "message": "Analyze step", "committedDate": "2020-11-24T17:56:49Z", "type": "commit"}, {"oid": "dc338be4c1407c4a3b9cdd77befcf6e6783600da", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dc338be4c1407c4a3b9cdd77befcf6e6783600da", "message": "Fixed analyze", "committedDate": "2020-11-24T19:39:31Z", "type": "commit"}, {"oid": "e9f7a3d201969c95ff6394b4762924c6e2c5f567", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e9f7a3d201969c95ff6394b4762924c6e2c5f567", "message": "Added changelog", "committedDate": "2020-11-24T19:41:10Z", "type": "commit"}, {"oid": "f7bb02d6e4170251f4e22b03cfb5029866708423", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f7bb02d6e4170251f4e22b03cfb5029866708423", "message": "Merge branch 'master' into storage/applicationId", "committedDate": "2020-11-24T21:33:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYzMTcwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17764#discussion_r530631700", "bodyText": "In other SDKs I've gone with allowing ClientOptions to be null with having a static default instance when null is passed.", "author": "alzimmermsft", "createdAt": "2020-11-25T20:39:09Z", "path": "sdk/storage/azure-storage-blob-cryptography/src/main/java/com/azure/storage/blob/specialized/cryptography/EncryptedBlobClientBuilder.java", "diffHunk": "@@ -536,6 +549,18 @@ public EncryptedBlobClientBuilder pipeline(HttpPipeline httpPipeline) {\n         return this;\n     }\n \n+    /**\n+     * Sets the client options for all the requests made through the client.\n+     *\n+     * @param clientOptions {@link ClientOptions}.\n+     * @return the updated EncryptedBlobClientBuilder object\n+     * @throws NullPointerException If {@code clientOptions} is {@code null}.\n+     */\n+    public EncryptedBlobClientBuilder clientOptions(ClientOptions clientOptions) {\n+        this.clientOptions = Objects.requireNonNull(clientOptions, \"'clientOptions' cannot be null.\");", "originalCommit": "f7bb02d6e4170251f4e22b03cfb5029866708423", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg1MjU5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17764#discussion_r532852594", "bodyText": "I think the other options on the storage builders enforce non null just like this even though we have a default instance. Should we try to be consistent within storage or with the rest of the libraries?", "author": "gapra-msft", "createdAt": "2020-11-30T19:41:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYzMTcwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM0NDk4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17764#discussion_r534344986", "bodyText": "@alzimmermsft Any thoughts?", "author": "gapra-msft", "createdAt": "2020-12-02T17:21:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYzMTcwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM0NzE2Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17764#discussion_r534347162", "bodyText": "I would go consistency within Storage over consistency across other SDKs in this case.", "author": "alzimmermsft", "createdAt": "2020-12-02T17:24:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYzMTcwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYzMjIyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17764#discussion_r530632229", "bodyText": "I would agree with this assessment, it would be possible to add x-ms-* or other headers involved in the string to sign.", "author": "alzimmermsft", "createdAt": "2020-11-25T20:40:22Z", "path": "sdk/storage/azure-storage-blob-cryptography/src/main/java/com/azure/storage/blob/specialized/cryptography/EncryptedBlobClientBuilder.java", "diffHunk": "@@ -202,6 +207,14 @@ private HttpPipeline getHttpPipeline() {\n \n         policies.add(new AddDatePolicy());\n \n+        // We need to place this policy right before the credential policy since headers may affect the string to sign", "originalCommit": "f7bb02d6e4170251f4e22b03cfb5029866708423", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f80f90c0b4de486b405e377925c99cf1223b86cf", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f80f90c0b4de486b405e377925c99cf1223b86cf", "message": "Merge branch 'master' into storage/applicationId", "committedDate": "2020-11-30T19:41:57Z", "type": "commit"}, {"oid": "2a21352da5ee74b071ac17dd54c94cb66219cff0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2a21352da5ee74b071ac17dd54c94cb66219cff0", "message": "Version for analyze step", "committedDate": "2020-12-01T22:47:16Z", "type": "commit"}]}