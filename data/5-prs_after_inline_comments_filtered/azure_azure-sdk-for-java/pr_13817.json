{"pr_number": 13817, "pr_title": "Fixed test recording for SecretClientTestBase", "pr_createdAt": "2020-08-05T21:58:27Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13817", "timeline": [{"oid": "c762934fdca2ecf780d227ef030179302a9eba9a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c762934fdca2ecf780d227ef030179302a9eba9a", "message": "Modified when the RecordPolicy is obtained from InterceptorManager for recording tests in KeyEncryptionKeyClientTestBase and SecretClientTestBase.", "committedDate": "2020-08-05T21:54:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAyOTc4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13817#discussion_r466029780", "bodyText": "We only use record policy in RECORD mode. Should exclude LIVE test mode here as well. Same as below", "author": "sima-zhu", "createdAt": "2020-08-05T22:02:59Z", "path": "sdk/keyvault/azure-security-keyvault-keys/src/test/java/com/azure/security/keyvault/keys/cryptography/KeyEncryptionKeyClientTestBase.java", "diffHunk": "@@ -71,7 +71,10 @@ HttpPipeline getHttpPipeline(HttpClient httpClient, CryptographyServiceVersion s\n         }\n         HttpPolicyProviders.addAfterRetryPolicies(policies);\n         policies.add(new HttpLoggingPolicy(new HttpLogOptions().setLogLevel(HttpLogDetailLevel.BODY_AND_HEADERS)));\n-        policies.add(interceptorManager.getRecordPolicy());\n+\n+        if (!interceptorManager.isPlaybackMode()) {", "originalCommit": "c762934fdca2ecf780d227ef030179302a9eba9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzMTkxMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13817#discussion_r466031911", "bodyText": "@sima-zhu We probably should modify the other TestBase classes in our repository if that's the case. They currently use a record policy when not in playback mode.", "author": "vcolin7", "createdAt": "2020-08-05T22:08:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAyOTc4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzNTM1Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13817#discussion_r466035357", "bodyText": "Could you point out the place mentioned use RecordPolicy when not playback.\nWe introduce LIVE mode slightly later than the other modes, so it might not up-to-date.", "author": "sima-zhu", "createdAt": "2020-08-05T22:18:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAyOTc4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3ODg1Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13817#discussion_r466078852", "bodyText": "Besides the two classes included in this PR, in KeyVault you can find this in the following classes:\n\nCertificateClientTestBase\nCryptographyClientTestBase\nKeyClientTestBase", "author": "vcolin7", "createdAt": "2020-08-06T00:36:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAyOTc4MA=="}], "type": "inlineReview"}, {"oid": "0e7e0228a8878fc11bc9fabcd67cf128dbe081e4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0e7e0228a8878fc11bc9fabcd67cf128dbe081e4", "message": "Made sure to only add a record policy when in RECORD test mode for KeyVault tests.", "committedDate": "2020-08-05T22:34:07Z", "type": "commit"}, {"oid": "b79f8e889bef5bd9ddbd21b117f9c25e377788ab", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b79f8e889bef5bd9ddbd21b117f9c25e377788ab", "message": "Made sure we only add a recording policy when in RECORD TestMode.", "committedDate": "2020-08-07T17:45:19Z", "type": "commit"}, {"oid": "3f14f11664be0f17e990040d632a69eb86c93159", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3f14f11664be0f17e990040d632a69eb86c93159", "message": "Merge remote-tracking branch 'upstream/master' into users/vicolina/fixes-for-test-recording-in-keyvault", "committedDate": "2020-08-08T00:51:44Z", "type": "commit"}, {"oid": "ef325bc629534fdb0a24d0a9afd9912681dfbbc9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ef325bc629534fdb0a24d0a9afd9912681dfbbc9", "message": "Merge branch 'master' into users/vicolina/fixes-for-test-recording-in-keyvault", "committedDate": "2020-08-10T23:22:38Z", "type": "commit"}]}