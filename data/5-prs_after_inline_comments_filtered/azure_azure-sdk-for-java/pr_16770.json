{"pr_number": 16770, "pr_title": "Add a Service Bus Connection String Parser", "pr_createdAt": "2020-10-23T20:40:45Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/16770", "timeline": [{"oid": "68b0b3763de4dffbdc82ca259e98283095544d16", "url": "https://github.com/Azure/azure-sdk-for-java/commit/68b0b3763de4dffbdc82ca259e98283095544d16", "message": "Add ServiceBusConnectionStringProperties", "committedDate": "2020-10-23T20:27:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1MDY0NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16770#discussion_r511150644", "bodyText": "Can you add more documentation on how to use this and what is the expected format?", "author": "srnagar", "createdAt": "2020-10-23T20:53:57Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusConnectionStringProperties.java", "diffHunk": "@@ -0,0 +1,87 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.implementation.ConnectionStringProperties;\n+\n+import java.net.URI;\n+\n+/**\n+ * A utility class that parses a connection string into sections.", "originalCommit": "68b0b3763de4dffbdc82ca259e98283095544d16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE5ODkzNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16770#discussion_r511198934", "bodyText": "Added more docs", "author": "YijunXieMS", "createdAt": "2020-10-23T23:43:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1MDY0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5OTkwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16770#discussion_r512199905", "bodyText": "Looks great, thanks for adding a very detailed javadoc!", "author": "srnagar", "createdAt": "2020-10-26T19:02:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1MDY0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1MDk5OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16770#discussion_r511150999", "bodyText": "Update javadoc to include the exceptions thrown if the connection string is invalid.", "author": "srnagar", "createdAt": "2020-10-23T20:54:51Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusConnectionStringProperties.java", "diffHunk": "@@ -0,0 +1,87 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.implementation.ConnectionStringProperties;\n+\n+import java.net.URI;\n+\n+/**\n+ * A utility class that parses a connection string into sections.\n+ */\n+public final class ServiceBusConnectionStringProperties {\n+    private final URI endpoint;\n+    private final String entityPath;\n+    private final String sharedAccessKeyName;\n+    private final String sharedAccessKey;\n+    private final String sharedAccessSignature;\n+\n+    private ServiceBusConnectionStringProperties(ConnectionStringProperties properties) {\n+        this.endpoint = properties.getEndpoint();\n+        this.entityPath = properties.getEntityPath();\n+        this.sharedAccessKeyName = properties.getSharedAccessKeyName();\n+        this.sharedAccessKey = properties.getSharedAccessKey();\n+        this.sharedAccessSignature = properties.getSharedAccessSignature();\n+    }\n+\n+    /**\n+     * Parse a ServiceBus connection string into an instance of this class.\n+     * @param connectionString The connection string to be parsed.\n+     * @return An instance of this class.\n+     */\n+    public static ServiceBusConnectionStringProperties parse(String connectionString) {\n+        return new ServiceBusConnectionStringProperties(new ConnectionStringProperties(connectionString));", "originalCommit": "68b0b3763de4dffbdc82ca259e98283095544d16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE5OTMzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16770#discussion_r511199338", "bodyText": "Added", "author": "YijunXieMS", "createdAt": "2020-10-23T23:45:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1MDk5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1MTcwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16770#discussion_r511151706", "bodyText": "Add unit tests.", "author": "srnagar", "createdAt": "2020-10-23T20:56:42Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusConnectionStringProperties.java", "diffHunk": "@@ -0,0 +1,87 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.implementation.ConnectionStringProperties;\n+\n+import java.net.URI;\n+\n+/**\n+ * A utility class that parses a connection string into sections.\n+ */\n+public final class ServiceBusConnectionStringProperties {", "originalCommit": "68b0b3763de4dffbdc82ca259e98283095544d16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE5OTIxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16770#discussion_r511199216", "bodyText": "This class is basically a wrapper for amqp-core's ConnectionStringProperties.java, so I copied the test cases from there and adapted them.", "author": "YijunXieMS", "createdAt": "2020-10-23T23:44:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE1MTcwNg=="}], "type": "inlineReview"}, {"oid": "84df9fd7af149b9e1617b2a65a2b23b0046966e3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/84df9fd7af149b9e1617b2a65a2b23b0046966e3", "message": "Add tests and more javadoc for ServiceBusConnectionStringProperties", "committedDate": "2020-10-23T23:43:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5OTk5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16770#discussion_r512199997", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * A connection may have the following sections:\n          \n          \n            \n             * A connection string may have the following sections:", "author": "srnagar", "createdAt": "2020-10-26T19:02:14Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusConnectionStringProperties.java", "diffHunk": "@@ -0,0 +1,106 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.implementation.ConnectionStringProperties;\n+import com.azure.core.credential.TokenCredential;\n+\n+import java.net.URI;\n+\n+/**\n+ * A utility class that parses a connection string into sections.\n+ * A Service Bus connection string is a set of key value pairs separated by semi-colon. A typical example is\n+ * \"Endpoint=sb://sbnamespace.servicebus.windows.net/;SharedAccessKeyName=someKeyName;SharedAccessKey=someKeyValue\".\n+ *\n+ * A connection may have the following sections:", "originalCommit": "84df9fd7af149b9e1617b2a65a2b23b0046966e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIwMTgyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16770#discussion_r512201822", "bodyText": "Maybe adding a link to this article will be good:\nhttps://docs.microsoft.com/azure/service-bus-messaging/service-bus-quickstart-portal#get-the-connection-string", "author": "srnagar", "createdAt": "2020-10-26T19:05:28Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusConnectionStringProperties.java", "diffHunk": "@@ -0,0 +1,106 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.implementation.ConnectionStringProperties;\n+import com.azure.core.credential.TokenCredential;\n+\n+import java.net.URI;\n+\n+/**\n+ * A utility class that parses a connection string into sections.\n+ * A Service Bus connection string is a set of key value pairs separated by semi-colon. A typical example is\n+ * \"Endpoint=sb://sbnamespace.servicebus.windows.net/;SharedAccessKeyName=someKeyName;SharedAccessKey=someKeyValue\".", "originalCommit": "84df9fd7af149b9e1617b2a65a2b23b0046966e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}