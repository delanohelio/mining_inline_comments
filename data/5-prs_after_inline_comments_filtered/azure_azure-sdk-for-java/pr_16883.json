{"pr_number": 16883, "pr_title": "Consume JsonPatchDocument from azure.core and remove UpdateOperationUtility", "pr_createdAt": "2020-10-27T16:55:56Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/16883", "timeline": [{"oid": "5bbf2c89fcd4aa00ffa66419a5bd0d5d81532294", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5bbf2c89fcd4aa00ffa66419a5bd0d5d81532294", "message": "JsonPatch", "committedDate": "2020-10-27T16:55:25Z", "type": "commit"}, {"oid": "7082d31dad0f2741a10c3ab3d67ebbca5e3d3ad6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7082d31dad0f2741a10c3ab3d67ebbca5e3d3ad6", "message": "Add azure core json jackson package to our dependencies", "committedDate": "2020-10-27T17:28:17Z", "type": "commit"}, {"oid": "6957c6f27ef8a15ae11727e68cde58c40eda0676", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6957c6f27ef8a15ae11727e68cde58c40eda0676", "message": "Fixed issue in digital twins sample in deserializing into offsetDateTime\n\nOffsetDateTime wasn't be deserialized into correctly because the mapper saw the property as a string. It isn't ideal, but defining the type in our DigitalTwinPropertyMetadata as a String instead of an OffsetDateTime at least lets our sample run as expected.\n\nAlso make the BasicDigitalTwinMetadata's property metadata map contain DigitalTwinPropertyMetadata values instead of object values", "committedDate": "2020-10-28T22:30:48Z", "type": "commit"}, {"oid": "2ac4a8184c64667bf8d7b34bf6cada844886403a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2ac4a8184c64667bf8d7b34bf6cada844886403a", "message": "Merge branch 'master' into feature/adt/azabbasi/JsonPatch", "committedDate": "2020-10-28T23:16:05Z", "type": "commit"}, {"oid": "010e4b14164161008c199a8b1fc43e15833347a5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/010e4b14164161008c199a8b1fc43e15833347a5", "message": "fix build issues", "committedDate": "2020-10-28T23:24:19Z", "type": "commit"}, {"oid": "97a538dd83aaa4b3d9f633a03a00757d6077b185", "url": "https://github.com/Azure/azure-sdk-for-java/commit/97a538dd83aaa4b3d9f633a03a00757d6077b185", "message": "Merge remote-tracking branch 'origin/feature/adt/timtay/propertyMetadat' into feature/adt/azabbasi/JsonPatch", "committedDate": "2020-10-28T23:24:24Z", "type": "commit"}, {"oid": "6f7afa3983a018101cea89d66abaa84af635c560", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6f7afa3983a018101cea89d66abaa84af635c560", "message": "Update pom to released azure-core with JsonPatchDocument", "committedDate": "2020-10-30T03:07:08Z", "type": "commit"}, {"oid": "24bfe93c142fdfd5c05262a2f00d5c1be158348c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/24bfe93c142fdfd5c05262a2f00d5c1be158348c", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/adt/azabbasi/JsonPatch", "committedDate": "2020-10-30T03:09:37Z", "type": "commit"}, {"oid": "abcc016f75fd4a5bb4068abb8b26f7912c9ef5ed", "url": "https://github.com/Azure/azure-sdk-for-java/commit/abcc016f75fd4a5bb4068abb8b26f7912c9ef5ed", "message": "fix merge issues", "committedDate": "2020-10-30T03:11:37Z", "type": "commit"}, {"oid": "4b87eeaf979b1e28a58ef711285d80c962723468", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4b87eeaf979b1e28a58ef711285d80c962723468", "message": "re-add module-info file", "committedDate": "2020-10-30T03:21:45Z", "type": "commit"}, {"oid": "0ab7d2e01c31d6982a05ac0b5b5656539abfe56b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0ab7d2e01c31d6982a05ac0b5b5656539abfe56b", "message": "fixup", "committedDate": "2020-10-30T03:23:03Z", "type": "commit"}, {"oid": "d281bc8777c31aa05fa1845628dfebecb38a9a3e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d281bc8777c31aa05fa1845628dfebecb38a9a3e", "message": "fix javadocs", "committedDate": "2020-10-30T16:14:56Z", "type": "commit"}, {"oid": "f905488162eda0138662b5c37906a5a116bc51d9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f905488162eda0138662b5c37906a5a116bc51d9", "message": "revert Tim's changes", "committedDate": "2020-10-30T16:24:14Z", "type": "commit"}, {"oid": "0382487ffd94e74e82d15be1e9c0dcbf079a86ed", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0382487ffd94e74e82d15be1e9c0dcbf079a86ed", "message": "Merge branch 'feature/adt/azabbasi/JsonPatch' of https://github.com/Azure/azure-sdk-for-java into feature/adt/azabbasi/JsonPatch", "committedDate": "2020-10-30T16:25:21Z", "type": "commit"}, {"oid": "5fe288fd54f23fadffe485cdee55a63c62ee3efc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5fe288fd54f23fadffe485cdee55a63c62ee3efc", "message": "Merge branch 'master' into feature/adt/azabbasi/JsonPatch", "committedDate": "2020-10-30T16:25:46Z", "type": "commit"}, {"oid": "212e32a618e1bae746438b498f9fe5a80d336720", "url": "https://github.com/Azure/azure-sdk-for-java/commit/212e32a618e1bae746438b498f9fe5a80d336720", "message": "Update autorest.md", "committedDate": "2020-10-30T16:33:50Z", "type": "commit"}, {"oid": "54a266c98c20eb6606453bea760fb07cd7a9a2c1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/54a266c98c20eb6606453bea760fb07cd7a9a2c1", "message": "update session records", "committedDate": "2020-10-30T16:37:09Z", "type": "commit"}, {"oid": "102a87eba655017daf8b34979f18ff44c481a49e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/102a87eba655017daf8b34979f18ff44c481a49e", "message": "Revert changes to basic digitaltwin metadata", "committedDate": "2020-10-30T16:44:10Z", "type": "commit"}, {"oid": "75afcc368164ef15daaeaa8ecfaa85650c9b5130", "url": "https://github.com/Azure/azure-sdk-for-java/commit/75afcc368164ef15daaeaa8ecfaa85650c9b5130", "message": "Update pom.xml", "committedDate": "2020-10-30T16:46:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0MDIyMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16883#discussion_r515240223", "bodyText": "Question - (I know that I am late on these changes) what changed in the swagger file to enable AutoRest to define JsonPatchDocument as an acceptable input type?", "author": "abhipsaMisra", "createdAt": "2020-10-30T16:56:24Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/implementation/DigitalTwinModelsImpl.java", "diffHunk": "@@ -109,7 +110,7 @@\n                 @HeaderParam(\"tracestate\") String tracestate,\n                 @PathParam(\"id\") String id,\n                 @QueryParam(\"api-version\") String apiVersion,\n-                @BodyParam(\"application/json-patch+json\") List<Object> updateModel,\n+                @BodyParam(\"application/json-patch+json\") JsonPatchDocument updateModel,", "originalCommit": "75afcc368164ef15daaeaa8ecfaa85650c9b5130", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0MDg3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16883#discussion_r515240871", "bodyText": "It should just be due to using a newer version of autorest, right?", "author": "timtay-microsoft", "createdAt": "2020-10-30T16:57:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0MDIyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0MjQzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16883#discussion_r515242438", "bodyText": "that is an excellent question. code was generated using the latest branch of autorest since these changes were not published to npm yet. There will be a release on autorest and we will bump the autorest version when it is available.", "author": "azabbasi", "createdAt": "2020-10-30T16:59:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0MDIyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI4NjA1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16883#discussion_r515286051", "bodyText": "Got it!\nSo this in swagger was automatically mapped to JsonPatchDocument?\n{\n\tname: \"updateModel\",\n\tdescription: \"An update specification described by JSON Patch. Only the decommissioned property can be replaced.\",\n\tin: \"body\",\n\trequired: true,\n\tschema: {\n\t\ttype: \"array\",\n\t\titems: {\n\t\t\ttype: \"object\"\n\t\t}\n\t}\n}\nHow would the schema indicate that this should have been an array of objects vs a JsonPatchDocument?", "author": "abhipsaMisra", "createdAt": "2020-10-30T18:00:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0MDIyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI4OTY2Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16883#discussion_r515289662", "bodyText": "I imagine autorest looks for the consumes field instead:\n        \"consumes\": [\n          \"application/json-patch+json\"\n        ],", "author": "timtay-microsoft", "createdAt": "2020-10-30T18:07:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0MDIyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI5MzQxNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16883#discussion_r515293414", "bodyText": "Correct", "author": "azabbasi", "createdAt": "2020-10-30T18:15:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0MDIyMw=="}], "type": "inlineReview"}, {"oid": "a9912a60ea516c8807f1ff2ac99eb0f1072053c8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a9912a60ea516c8807f1ff2ac99eb0f1072053c8", "message": "update core jackson serializer package version", "committedDate": "2020-10-30T17:01:11Z", "type": "commit"}]}