{"pr_number": 13697, "pr_title": "SB Track2 : Adding application Id to be set in UserAgent.", "pr_createdAt": "2020-07-31T22:48:07Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13697", "timeline": [{"oid": "cf6d3a1db3806ba3150146c70265cbdb9e7a05e6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cf6d3a1db3806ba3150146c70265cbdb9e7a05e6", "message": "SB Track2 : Adding application Id to be set in UserAgent.", "committedDate": "2020-07-31T22:46:00Z", "type": "commit"}, {"oid": "797cb9710aa5da6f114d8ded46b53ef96bac5aa4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/797cb9710aa5da6f114d8ded46b53ef96bac5aa4", "message": "User Agent :application Id API", "committedDate": "2020-08-03T18:50:33Z", "type": "commit"}, {"oid": "f3cba4273febbd76a2a9a76edad4ae1ea185081f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f3cba4273febbd76a2a9a76edad4ae1ea185081f", "message": "Merge branch 'master' into sb-track2-useragent-applicationid-13330", "committedDate": "2020-08-18T23:31:49Z", "type": "commit"}, {"oid": "dc4ddfa2b70ac9bfc61afe0965df52c1fd29428e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dc4ddfa2b70ac9bfc61afe0965df52c1fd29428e", "message": "continue to design", "committedDate": "2020-08-19T05:49:37Z", "type": "commit"}, {"oid": "b130732d1a1116b984037df7bf9962e6bb3c0544", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b130732d1a1116b984037df7bf9962e6bb3c0544", "message": "Merge branch 'master' into sb-track2-useragent-applicationid-13330", "committedDate": "2020-08-19T07:43:32Z", "type": "commit"}, {"oid": "90f7335c82ed9289a9aa39ed44e1a8b8fb1e7874", "url": "https://github.com/Azure/azure-sdk-for-java/commit/90f7335c82ed9289a9aa39ed44e1a8b8fb1e7874", "message": "Continue Design", "committedDate": "2020-08-19T16:51:01Z", "type": "commit"}, {"oid": "135306ce998423ae4b93beaad5aaa44c83bcd753", "url": "https://github.com/Azure/azure-sdk-for-java/commit/135306ce998423ae4b93beaad5aaa44c83bcd753", "message": "Continue design", "committedDate": "2020-08-20T18:37:04Z", "type": "commit"}, {"oid": "e7ed42df18c995abcb3e2bd6c4d5cf0a0504ed11", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e7ed42df18c995abcb3e2bd6c4d5cf0a0504ed11", "message": "First draft implementation", "committedDate": "2020-08-21T20:38:23Z", "type": "commit"}, {"oid": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "url": "https://github.com/Azure/azure-sdk-for-java/commit/09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "message": "Merge master into branch", "committedDate": "2020-08-21T20:49:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc3NzE0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r475777143", "bodyText": "What about for web sockets? We still want the applicationId to apply.", "author": "conniey", "createdAt": "2020-08-24T17:24:45Z", "path": "sdk/core/azure-core-amqp/src/main/java/com/azure/core/amqp/implementation/ReactorHandlerProvider.java", "diffHunk": "@@ -43,13 +43,15 @@ public ReactorHandlerProvider(ReactorProvider provider) {\n      * @param proxyOptions The options to use for proxy.\n      * @param product The name of the product this connection handler is created for.\n      * @param clientVersion The version of the client library creating the connection handler.\n+     * @param applicationId applicationId to be used in user agent while making connection.\n      * @return A new {@link ConnectionHandler}.\n      */\n     public ConnectionHandler createConnectionHandler(String connectionId, String hostname,\n-            AmqpTransportType transportType, ProxyOptions proxyOptions, String product, String clientVersion) {\n+            AmqpTransportType transportType, ProxyOptions proxyOptions, String product, String clientVersion,\n+            String applicationId) {\n         switch (transportType) {\n             case AMQP:\n-                return new ConnectionHandler(connectionId, hostname, product, clientVersion);\n+                return new ConnectionHandler(connectionId, hostname, product, clientVersion, applicationId);\n             case AMQP_WEB_SOCKETS:", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc3NzMyNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r475777327", "bodyText": "We still want the applicationId to apply.", "author": "conniey", "createdAt": "2020-08-24T17:25:03Z", "path": "sdk/core/azure-core-amqp/src/main/java/com/azure/core/amqp/implementation/handler/WebSocketsConnectionHandler.java", "diffHunk": "@@ -32,7 +32,7 @@\n      */\n     public WebSocketsConnectionHandler(final String connectionId, final String hostname, final String product,\n         final String clientVersion) {\n-        super(connectionId, hostname, product, clientVersion);\n+        super(connectionId, hostname, product, clientVersion, null);", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0NzcyNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476047726", "bodyText": "This should not be in root package. Consider moving this to com.azure.core.utils where we have Context and Configuration types.", "author": "srnagar", "createdAt": "2020-08-25T01:42:03Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/ClientOptions.java", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0NzgxOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476047819", "bodyText": "Make this final.", "author": "srnagar", "createdAt": "2020-08-25T01:42:11Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/ClientOptions.java", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId, contentType. Most of these properties are\n+ * applied on request being send to Azure Service but some could be used for other purpose also for example\n+ * applicationId is also used for telemetry.\n+ */\n+public class ClientOptions {", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0ODAwNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476048007", "bodyText": "Add more details to the javadoc.", "author": "srnagar", "createdAt": "2020-08-25T01:42:30Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/ClientOptions.java", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId, contentType. Most of these properties are\n+ * applied on request being send to Azure Service but some could be used for other purpose also for example\n+ * applicationId is also used for telemetry.\n+ */\n+public class ClientOptions {\n+    private String applicationId;\n+    private String contentType;\n+\n+    /**\n+     * applicationId", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0ODI5Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476048296", "bodyText": "Add @fluent annotation.", "author": "srnagar", "createdAt": "2020-08-25T01:42:56Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/ClientOptions.java", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId, contentType. Most of these properties are\n+ * applied on request being send to Azure Service but some could be used for other purpose also for example\n+ * applicationId is also used for telemetry.\n+ */\n+public class ClientOptions {", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0ODQzNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476048434", "bodyText": "Fix javadoc.", "author": "srnagar", "createdAt": "2020-08-25T01:43:07Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/ClientOptions.java", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId, contentType. Most of these properties are\n+ * applied on request being send to Azure Service but some could be used for other purpose also for example\n+ * applicationId is also used for telemetry.\n+ */\n+public class ClientOptions {\n+    private String applicationId;\n+    private String contentType;\n+\n+    /**\n+     * applicationId\n+     * @return applicationId\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * sets id\n+     * @param applicationId id\n+     * @return updated options\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+        this.applicationId = applicationId;\n+        return this;\n+    }\n+\n+    /**\n+     * applicationId\n+     * @return applicationId\n+     */", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0ODkwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476048906", "bodyText": "This is missing implementation. headers is not used.", "author": "srnagar", "createdAt": "2020-08-25T01:43:48Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/ClientOptions.java", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId, contentType. Most of these properties are\n+ * applied on request being send to Azure Service but some could be used for other purpose also for example\n+ * applicationId is also used for telemetry.\n+ */\n+public class ClientOptions {\n+    private String applicationId;\n+    private String contentType;\n+\n+    /**\n+     * applicationId\n+     * @return applicationId\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * sets id\n+     * @param applicationId id\n+     * @return updated options\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+        this.applicationId = applicationId;\n+        return this;\n+    }\n+\n+    /**\n+     * applicationId\n+     * @return applicationId\n+     */\n+    public String getContentType() {\n+        return contentType;\n+    }\n+\n+    /**\n+     * sets id\n+     * @param contentType id\n+     * @return updated options\n+     */\n+    public ClientOptions setContentType(String contentType) {\n+        this.contentType = contentType;\n+        return this;\n+    }\n+\n+    /**\n+     * sets headers\n+     * @param headers headers\n+     * @return updated options\n+     */\n+    public ClientOptions headers(Headers headers) {\n+        return this;", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0OTA3Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476049077", "bodyText": "Same here - name and value are not used.", "author": "srnagar", "createdAt": "2020-08-25T01:44:04Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/ClientOptions.java", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId, contentType. Most of these properties are\n+ * applied on request being send to Azure Service but some could be used for other purpose also for example\n+ * applicationId is also used for telemetry.\n+ */\n+public class ClientOptions {\n+    private String applicationId;\n+    private String contentType;\n+\n+    /**\n+     * applicationId\n+     * @return applicationId\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * sets id\n+     * @param applicationId id\n+     * @return updated options\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+        this.applicationId = applicationId;\n+        return this;\n+    }\n+\n+    /**\n+     * applicationId\n+     * @return applicationId\n+     */\n+    public String getContentType() {\n+        return contentType;\n+    }\n+\n+    /**\n+     * sets id\n+     * @param contentType id\n+     * @return updated options\n+     */\n+    public ClientOptions setContentType(String contentType) {\n+        this.contentType = contentType;\n+        return this;\n+    }\n+\n+    /**\n+     * sets headers\n+     * @param headers headers\n+     * @return updated options\n+     */\n+    public ClientOptions headers(Headers headers) {\n+        return this;\n+    }\n+\n+    /**\n+     * sets headers\n+     * @param name name of the header\n+     * @param value value for this header\n+     * @return updated options\n+     */\n+    public ClientOptions header(String name, String value) {\n+        return this;", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1MDY4OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476050688", "bodyText": "Fix javadoc - HttpHeader should be just Header.", "author": "srnagar", "createdAt": "2020-08-25T01:46:25Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/Header.java", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;\n+\n+/**\n+ * A single header within for a request.\n+ *\n+ * If multiple header values are added to a request or response with\n+ * the same name (case-insensitive), then the values will be appended\n+ * to the end of the same Header with commas separating them.\n+ */\n+public class Header {\n+    private final String name;\n+    private String value;\n+\n+    /**\n+     * Create a HttpHeader instance using the provided name and value.", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1MzA2NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476053064", "bodyText": "Do we need this type? We can simply have Iterable<Header> in ClientOptions.", "author": "srnagar", "createdAt": "2020-08-25T01:49:46Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/Headers.java", "diffHunk": "@@ -0,0 +1,160 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;\n+\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+/**\n+ * {@link Iterable} map representation for {@link Header}.\n+ */\n+public class Headers implements Iterable<Header> {", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1MzUzNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476053535", "bodyText": "This should not be in root package.", "author": "srnagar", "createdAt": "2020-08-25T01:50:31Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/Header.java", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1NTY1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476055654", "bodyText": "Consider renaming this to getApplicationId(). Why does this method take RuntimeException as param?", "author": "srnagar", "createdAt": "2020-08-25T01:53:44Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/CoreUtils.java", "diffHunk": "@@ -249,4 +251,46 @@ public static String bomAwareToString(byte[] bytes, String contentType) {\n             }\n         }\n     }\n+\n+    /**\n+     * Validate applicationId and return it based on following rule.\n+     *\n+     * 1.If {@code runtimeException} is not {@code null} and {@code  applicationId} has different value in\n+     * {@link HttpLogOptions} and {@link ClientOptions}, It will log and throw this exception.\n+     * 2. Prioritize {@code applicationId} set in ClientOptions over {@link HttpLogOptions}.\n+     *\n+     * @param logOptions provided {@link HttpLogOptions}.\n+     * @param clientOptions provided {@link ClientOptions}.\n+     * @param runtimeException if this function need to throw. The {@code null} value represent: It will not throw if\n+     * {@code applicationId} is different in {@link HttpLogOptions} and {@link ClientOptions}.\n+     * @return applicationId based on rule explained above.\n+     *\n+     * @throws RuntimeException If {@code runtimeException} is not {@code null} and {@code  applicationId} is different\n+     * in {@link HttpLogOptions} and {@link ClientOptions}\n+     */\n+    public static String validateApplicationId(HttpLogOptions logOptions, ClientOptions clientOptions,", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjgwMTAzMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476801030", "bodyText": "@srnagar : This function could be used in various situation and in some cases caller may want to throw different kind of exception.\n\nIn builder caller can call this to validate and throw IllegalStateException or IllegalArguementException or some other.\nIn other place, caller may want to just get right applicationId value and do not want to throw any Exception, they can pass null in RuntimeException.\n\nThus I have used \"validate\" verb and RuntimeException. I can change \"validate\" -> \"get\" if preferred.", "author": "hemanttanwar", "createdAt": "2020-08-25T22:29:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1NTY1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njg4Mjc5Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476882793", "bodyText": "I think this can be improved, based on my other comment in this review.", "author": "JonathanGiles", "createdAt": "2020-08-25T23:53:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1NTY1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1NjU5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476056591", "bodyText": "We should not have any of the types related to client options in root package. So, this export can be removed.", "author": "srnagar", "createdAt": "2020-08-25T01:55:11Z", "path": "sdk/core/azure-core/src/main/java/module-info.java", "diffHunk": "@@ -14,6 +14,7 @@\n     requires transitive com.fasterxml.jackson.datatype.jsr310;\n \n     // public API surface area\n+    exports com.azure.core;", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1Nzc1OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476057758", "bodyText": "A static client logger should be used for a helper class that only has static methods.", "author": "srnagar", "createdAt": "2020-08-25T01:56:53Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/CoreUtils.java", "diffHunk": "@@ -249,4 +251,46 @@ public static String bomAwareToString(byte[] bytes, String contentType) {\n             }\n         }\n     }\n+\n+    /**\n+     * Validate applicationId and return it based on following rule.\n+     *\n+     * 1.If {@code runtimeException} is not {@code null} and {@code  applicationId} has different value in\n+     * {@link HttpLogOptions} and {@link ClientOptions}, It will log and throw this exception.\n+     * 2. Prioritize {@code applicationId} set in ClientOptions over {@link HttpLogOptions}.\n+     *\n+     * @param logOptions provided {@link HttpLogOptions}.\n+     * @param clientOptions provided {@link ClientOptions}.\n+     * @param runtimeException if this function need to throw. The {@code null} value represent: It will not throw if\n+     * {@code applicationId} is different in {@link HttpLogOptions} and {@link ClientOptions}.\n+     * @return applicationId based on rule explained above.\n+     *\n+     * @throws RuntimeException If {@code runtimeException} is not {@code null} and {@code  applicationId} is different\n+     * in {@link HttpLogOptions} and {@link ClientOptions}\n+     */\n+    public static String validateApplicationId(HttpLogOptions logOptions, ClientOptions clientOptions,\n+        RuntimeException runtimeException) {\n+\n+        String applicationId;\n+        String logApplicationId = null;\n+        String clientApplicationId = null;\n+\n+        if (logOptions != null) {\n+            logApplicationId = logOptions.getApplicationId();\n+        }\n+        if (clientOptions != null) {\n+            clientApplicationId = clientOptions.getApplicationId();\n+        }\n+\n+        // Check applicationId in both location , if present, should be same.\n+        if (runtimeException != null && logApplicationId != null && clientApplicationId != null\n+            && !clientApplicationId.equalsIgnoreCase(logApplicationId)) {\n+            ClientLogger logger = new ClientLogger(CoreUtils.class);", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1OTM2MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476059360", "bodyText": "Why do we need content type in client options? Do we have a usecase where customers would want to set this?", "author": "srnagar", "createdAt": "2020-08-25T01:59:12Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/ClientOptions.java", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId, contentType. Most of these properties are\n+ * applied on request being send to Azure Service but some could be used for other purpose also for example\n+ * applicationId is also used for telemetry.\n+ */\n+public class ClientOptions {\n+    private String applicationId;\n+    private String contentType;\n+\n+    /**\n+     * applicationId\n+     * @return applicationId\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * sets id\n+     * @param applicationId id\n+     * @return updated options\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+        this.applicationId = applicationId;\n+        return this;\n+    }\n+\n+    /**\n+     * applicationId\n+     * @return applicationId\n+     */\n+    public String getContentType() {\n+        return contentType;\n+    }\n+\n+    /**\n+     * sets id\n+     * @param contentType id\n+     * @return updated options\n+     */\n+    public ClientOptions setContentType(String contentType) {", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU4NDMzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476584331", "bodyText": "Removed", "author": "hemanttanwar", "createdAt": "2020-08-25T16:35:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA1OTM2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA2MzI3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476063272", "bodyText": "The return type should be ServiceBusAdministrationClientBuilder", "author": "srnagar", "createdAt": "2020-08-25T02:05:22Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/administration/ServiceBusAdministrationClientBuilder.java", "diffHunk": "@@ -255,6 +258,19 @@ public ServiceBusAdministrationClientBuilder httpLogOptions(HttpLogOptions logOp\n         return this;\n     }\n \n+    /**\n+     * Sets various options on the client. For example application-id which will be used in user-agent while creating\n+     * connection with Azure Service Bus.\n+     *\n+     * @param clientOptions to be set on the client.\n+     *\n+     * @return The updated {@link ServiceBusManagementClientBuilder} object.\n+     */\n+    public ServiceBusManagementClientBuilder clientOptions(ClientOptions clientOptions) {", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA2NDU3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476064571", "bodyText": "This can be removed once all types are moved from root package.", "author": "srnagar", "createdAt": "2020-08-25T02:07:29Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/package-info.java", "diffHunk": "@@ -0,0 +1,7 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+/**\n+ * Package containing core utility classes.\n+ */\n+package com.azure.core;", "originalCommit": "09aff0dfbb4222bd34eea63f761bc30c8e39f3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "00a6a9bbcf2f902e33d7590453c2d4fa07be5a59", "url": "https://github.com/Azure/azure-sdk-for-java/commit/00a6a9bbcf2f902e33d7590453c2d4fa07be5a59", "message": "Incorporating review comments", "committedDate": "2020-08-25T23:16:14Z", "type": "commit"}, {"oid": "1b56cf9c8304cc71dc86a8b2f1f54e35cc63281d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1b56cf9c8304cc71dc86a8b2f1f54e35cc63281d", "message": "Fixing pom and some compile time errors", "committedDate": "2020-08-25T23:34:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njg3MTgwNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476871804", "bodyText": "Why can't it be null? It is by default null so it seems reasonable for a user to null it out if they don't want it set any longer?", "author": "JonathanGiles", "createdAt": "2020-08-25T23:43:11Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,127 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private final Map<String, Header> headers = new ConcurrentHashMap<>();\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     *\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided.\n+     *\n+     * @param applicationId to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     * @throws NullPointerException if {@code applicationId} is null.", "originalCommit": "1b56cf9c8304cc71dc86a8b2f1f54e35cc63281d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njg3NTg1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476875854", "bodyText": "This is not consistent with the behavior of Header itself, where the value gets appended to the header.", "author": "JonathanGiles", "createdAt": "2020-08-25T23:47:01Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,127 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private final Map<String, Header> headers = new ConcurrentHashMap<>();\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     *\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided.\n+     *\n+     * @param applicationId to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     * @throws NullPointerException if {@code applicationId} is null.\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+        this.applicationId = Objects.requireNonNull(applicationId, \"'applicationId' cannot be null.\");\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the provided headers.\n+     *\n+     * @param headers headers to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     * @throws NullPointerException if {@code headers} is null.\n+     */\n+    public ClientOptions headers(Iterable<Header> headers) {\n+        Objects.requireNonNull(headers, \"'headers' cannot be null.\");\n+\n+        for (final Header header : headers) {\n+            this.headers.put(formatKey(header.getName()), header);\n+        }\n+        return this;\n+    }\n+\n+    /**\n+     * Sets a {@link Header header} with the given name and value.\n+     *\n+     * <p>If header with same name already exists then the value will be overwritten.</p>", "originalCommit": "1b56cf9c8304cc71dc86a8b2f1f54e35cc63281d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njg4MDQ5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476880491", "bodyText": "Don't talk about implementation details in API documentation.", "author": "JonathanGiles", "createdAt": "2020-08-25T23:51:22Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -93,6 +95,19 @@\n     public ServiceBusClientBuilder() {\n     }\n \n+    /**\n+     * Sets various options on the client. For example application-id which will be used in user-agent while creating\n+     * connection with Azure Service Bus.", "originalCommit": "1b56cf9c8304cc71dc86a8b2f1f54e35cc63281d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njg4MTk2Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476881963", "bodyText": "I don't think we need to do this. We should deprecate the HttpLogOptions one, and have it take lower precedence to the clientOptions one (so we only use it when the clientOptions one is not set).", "author": "JonathanGiles", "createdAt": "2020-08-25T23:52:49Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/administration/ServiceBusAdministrationClientBuilder.java", "diffHunk": "@@ -321,7 +338,10 @@ private HttpPipeline createPipeline() {\n         final String clientName = properties.getOrDefault(\"name\", \"UnknownName\");\n         final String clientVersion = properties.getOrDefault(\"version\", \"UnknownVersion\");\n \n-        httpPolicies.add(new UserAgentPolicy(httpLogOptions.getApplicationId(), clientName, clientVersion,\n+        final String applicationId = CoreUtils.validateApplicationId(httpLogOptions, clientOptions,\n+            new IllegalStateException(\"applicationId should be same in httpLogOptions and clientOptions.\"));", "originalCommit": "1b56cf9c8304cc71dc86a8b2f1f54e35cc63281d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "10020b68f2a5463710f9dee94fcadf0ec35306ec", "url": "https://github.com/Azure/azure-sdk-for-java/commit/10020b68f2a5463710f9dee94fcadf0ec35306ec", "message": "Incorporate Review comments", "committedDate": "2020-08-26T01:26:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njk1NjAxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r476956013", "bodyText": "Have you reproduced this logic for application ID length, spaces, etc in the new location?", "author": "JonathanGiles", "createdAt": "2020-08-26T01:35:09Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/http/policy/HttpLogOptions.java", "diffHunk": "@@ -168,7 +171,9 @@ public String getApplicationId() {\n      *\n      * @param applicationId The user specified application id.\n      * @return The updated HttpLogOptions object.\n+     * @deprecated deprecated in favor of {@link ClientOptions#setApplicationId(String)}\n      */\n+    @Deprecated\n     public HttpLogOptions setApplicationId(final String applicationId) {", "originalCommit": "10020b68f2a5463710f9dee94fcadf0ec35306ec", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA2MjQ4NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477062485", "bodyText": "Missed it, I added it back. Thanks.", "author": "hemanttanwar", "createdAt": "2020-08-26T06:27:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njk1NjAxMw=="}], "type": "inlineReview"}, {"oid": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "message": "Added logic for applicationId length.", "committedDate": "2020-08-26T06:25:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzEwMDU2Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477100562", "bodyText": "It's better to pass the whole ClientOptions here since we might need the headers and other options that will be added there. It's easier to plumb this in once and not keep adding new params to this constructor.", "author": "srnagar", "createdAt": "2020-08-26T07:45:57Z", "path": "sdk/core/azure-core-amqp/src/main/java/com/azure/core/amqp/implementation/ConnectionOptions.java", "diffHunk": "@@ -24,10 +24,11 @@\n     private final Scheduler scheduler;\n     private final String fullyQualifiedNamespace;\n     private final CbsAuthorizationType authorizationType;\n+    private final String applicationId;\n \n     public ConnectionOptions(String fullyQualifiedNamespace, TokenCredential tokenCredential,\n             CbsAuthorizationType authorizationType, AmqpTransportType transport, AmqpRetryOptions retryOptions,\n-            ProxyOptions proxyOptions, Scheduler scheduler) {\n+            ProxyOptions proxyOptions, Scheduler scheduler, String applicationId) {", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzEwMTMyNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477101325", "bodyText": "nit: move all constants to the top of the class.", "author": "srnagar", "createdAt": "2020-08-26T07:47:21Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,168 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private final Map<String, Header> headers = new ConcurrentHashMap<>();\n+\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzEwMzkwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477103909", "bodyText": "I don't think we need any of these methods on the ClientOptions class. We should just have getter method for returning the header collection.", "author": "srnagar", "createdAt": "2020-08-26T07:51:45Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,168 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private final Map<String, Header> headers = new ConcurrentHashMap<>();\n+\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     *\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided.\n+     *\n+     * @param applicationId to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+        if (!CoreUtils.isNullOrEmpty(applicationId)) {\n+            if (applicationId.length() > MAX_APPLICATION_ID_LENGTH) {\n+                throw logger\n+                    .logExceptionAsError(new IllegalArgumentException(\"'applicationId' length cannot be greater than \"\n+                        + MAX_APPLICATION_ID_LENGTH));\n+            } else if (applicationId.contains(\" \")) {\n+                throw logger\n+                    .logExceptionAsError(new IllegalArgumentException(\"'applicationId' must not contain a space.\"));\n+            } else {\n+                this.applicationId = applicationId;\n+            }\n+        }\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the provided headers.\n+     *\n+     * @param headers headers to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     * @throws NullPointerException if {@code headers} is null.\n+     */\n+    public ClientOptions headers(Iterable<Header> headers) {\n+        Objects.requireNonNull(headers, \"'headers' cannot be null.\");\n+\n+        for (final Header header : headers) {\n+            this.headers.put(formatKey(header.getName()), header);\n+        }\n+        return this;\n+    }\n+\n+    /**\n+     * Sets a {@link Header header} with the given name and value or append the {@code value} separated by {@code comma}\n+     * if the {@link Header} exists for given {@code name}.\n+     *\n+     * @param name the name\n+     * @param value the value\n+     * @return The updated ClientOptions object\n+     *\n+     * @throws NullPointerException if {@code name} or {@code value} is null.\n+     */\n+    public ClientOptions addHeader(String name, String value) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+        Objects.requireNonNull(value, \"'value' cannot be null.\");\n+\n+        Header existing = get(name);\n+        if (existing == null) {\n+            this.headers.put(formatKey(name), new Header(name, value));\n+        } else {\n+            existing.addValue(value);\n+        }\n+        return this;\n+    }\n+\n+    /**\n+     * Gets the {@link Header header} for the provided header name. {@code Null} is returned if the header isn't\n+     * found.\n+     *\n+     * @param name the name of the header to find.\n+     * @return the header if found, null otherwise.\n+     *\n+     * @throws NullPointerException if {@code name} is null.\n+     */\n+    public Header get(String name) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+\n+        return headers.get(formatKey(name));\n+    }\n+\n+    /**\n+     * Removes the {@link Header header} with the provided header name. {@code Null} is returned if the header\n+     * isn't found.\n+     *\n+     * @param name the name of the header to remove.\n+     * @return the header if removed, null otherwise.\n+     *\n+     * @throws NullPointerException if {@code name} is null.\n+     */\n+    public Header remove(String name) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+\n+        return headers.remove(formatKey(name));\n+    }\n+\n+    /**\n+     * Get the value for the provided header name. {@code Null} is returned if the header name isn't found.\n+     *\n+     * @param name the name of the header whose value is being retrieved.\n+     * @return the value of the header, or null if the header isn't found\n+     *\n+     * @throws NullPointerException if {@code name} is null.\n+     */\n+    public String getValue(String name) {\n+        final Header header = get(name);\n+        return header == null ? null : header.getValue();\n+    }\n+\n+    /**\n+     * Get the values for the provided header name. {@code Null} is returned if the header name isn't found.\n+     *\n+     * <p>This returns {@link #getValue(String) getValue} split by {@code comma}.</p>\n+     *\n+     * @param name the name of the header whose value is being retrieved.\n+     * @return the values of the header, or null if the header isn't found\n+     */\n+    public String[] getValues(String name) {\n+        final Header header = get(name);\n+        return header == null ? null : header.getValues();\n+    }\n+\n+    /**\n+     * Gets a {@link Map} representation of the {@link Header} collection. The keys are {@link Header#getName()} in the\n+     * given {@link Header}.\n+     *\n+     * @return the headers as map\n+     */\n+    public Map<String, Header> toMap() {\n+        return headers;", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzEwNDY0Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477104642", "bodyText": "This line should be removed.", "author": "srnagar", "createdAt": "2020-08-26T07:52:56Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/CoreUtils.java", "diffHunk": "@@ -249,4 +251,32 @@ public static String bomAwareToString(byte[] bytes, String contentType) {\n             }\n         }\n     }\n+\n+    /**\n+     * Prioritize {@code applicationId} set in ClientOptions over {@link HttpLogOptions}.\n+     *\n+     * @param logOptions provided {@link HttpLogOptions}.\n+     * @param clientOptions provided {@link ClientOptions}.\n+     * {@code applicationId} is different in {@link HttpLogOptions} and {@link ClientOptions}.", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzEwNTUwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477105500", "bodyText": "Why is this hardcoded to empty string?", "author": "srnagar", "createdAt": "2020-08-26T07:54:24Z", "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubClientBuilder.java", "diffHunk": "@@ -623,7 +623,7 @@ private ConnectionOptions getConnectionOptions() {\n             : CbsAuthorizationType.JSON_WEB_TOKEN;\n \n         return new ConnectionOptions(fullyQualifiedNamespace, credentials, authorizationType, transport, retryOptions,\n-            proxyOptions, scheduler);\n+            proxyOptions, scheduler, \"\");", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ5MjYwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477492601", "bodyText": "I told Hemant to save the EventHubs implementation one to another PR. I was trying to scope this PR. There is another open issue for Event Hubs.", "author": "conniey", "createdAt": "2020-08-26T18:10:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzEwNTUwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ4NzM0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477487349", "bodyText": "Do you have any tests for applicationId? I see you just passing NULL everywhere.", "author": "conniey", "createdAt": "2020-08-26T18:01:14Z", "path": "sdk/core/azure-core-amqp/src/test/java/com/azure/core/amqp/implementation/ReactorConnectionTest.java", "diffHunk": "@@ -98,7 +98,7 @@ static void afterAll() {\n     @BeforeEach", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzY3MzkwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477673909", "bodyText": "Added test in ConnectionHandlerTest to check for applicationId everywhere else it is pass through.", "author": "hemanttanwar", "createdAt": "2020-08-26T23:29:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ4NzM0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ4ODEzOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477488139", "bodyText": "Does this need to be a concurrent hash map.", "author": "conniey", "createdAt": "2020-08-26T18:02:37Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,168 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private final Map<String, Header> headers = new ConcurrentHashMap<>();", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUxNzY1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477517655", "bodyText": "The map doesn't need to exist at all. We just have setters and getters for headers and a property of type Iterable<Header>. Don't see the need to use the map here.", "author": "srnagar", "createdAt": "2020-08-26T18:55:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ4ODEzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ4ODY4Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477488682", "bodyText": "nit: I'm not a fan of multiple nested if statements because it makes things harder to read if it's not necessary. Can we bounce early?\nif (CoreUtils.isNullorEmpty(applicationId)) { \n    return this;\n}\n... \n// other stuff.", "author": "conniey", "createdAt": "2020-08-26T18:03:39Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,168 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private final Map<String, Header> headers = new ConcurrentHashMap<>();\n+\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     *\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided.\n+     *\n+     * @param applicationId to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+        if (!CoreUtils.isNullOrEmpty(applicationId)) {", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ4OTg3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477489875", "bodyText": "If you do need the concurrent hash map, you are not leveraging it by splitting the operations in two.", "author": "conniey", "createdAt": "2020-08-26T18:05:38Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,168 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private final Map<String, Header> headers = new ConcurrentHashMap<>();\n+\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     *\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided.\n+     *\n+     * @param applicationId to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+        if (!CoreUtils.isNullOrEmpty(applicationId)) {\n+            if (applicationId.length() > MAX_APPLICATION_ID_LENGTH) {\n+                throw logger\n+                    .logExceptionAsError(new IllegalArgumentException(\"'applicationId' length cannot be greater than \"\n+                        + MAX_APPLICATION_ID_LENGTH));\n+            } else if (applicationId.contains(\" \")) {\n+                throw logger\n+                    .logExceptionAsError(new IllegalArgumentException(\"'applicationId' must not contain a space.\"));\n+            } else {\n+                this.applicationId = applicationId;\n+            }\n+        }\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the provided headers.\n+     *\n+     * @param headers headers to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     * @throws NullPointerException if {@code headers} is null.\n+     */\n+    public ClientOptions headers(Iterable<Header> headers) {\n+        Objects.requireNonNull(headers, \"'headers' cannot be null.\");\n+\n+        for (final Header header : headers) {\n+            this.headers.put(formatKey(header.getName()), header);\n+        }\n+        return this;\n+    }\n+\n+    /**\n+     * Sets a {@link Header header} with the given name and value or append the {@code value} separated by {@code comma}\n+     * if the {@link Header} exists for given {@code name}.\n+     *\n+     * @param name the name\n+     * @param value the value\n+     * @return The updated ClientOptions object\n+     *\n+     * @throws NullPointerException if {@code name} or {@code value} is null.\n+     */\n+    public ClientOptions addHeader(String name, String value) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+        Objects.requireNonNull(value, \"'value' cannot be null.\");\n+\n+        Header existing = get(name);\n+        if (existing == null) {\n+            this.headers.put(formatKey(name), new Header(name, value));", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzY2NDY5MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477664690", "bodyText": "removed", "author": "hemanttanwar", "createdAt": "2020-08-26T23:22:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ4OTg3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ5MDI3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477490274", "bodyText": "this can be a private static method because it doesn't rely on any state in the class.", "author": "conniey", "createdAt": "2020-08-26T18:06:24Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,168 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private final Map<String, Header> headers = new ConcurrentHashMap<>();\n+\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     *\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided.\n+     *\n+     * @param applicationId to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+        if (!CoreUtils.isNullOrEmpty(applicationId)) {\n+            if (applicationId.length() > MAX_APPLICATION_ID_LENGTH) {\n+                throw logger\n+                    .logExceptionAsError(new IllegalArgumentException(\"'applicationId' length cannot be greater than \"\n+                        + MAX_APPLICATION_ID_LENGTH));\n+            } else if (applicationId.contains(\" \")) {\n+                throw logger\n+                    .logExceptionAsError(new IllegalArgumentException(\"'applicationId' must not contain a space.\"));\n+            } else {\n+                this.applicationId = applicationId;\n+            }\n+        }\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the provided headers.\n+     *\n+     * @param headers headers to be set.\n+     * @return updated {@link ClientOptions}.\n+     *\n+     * @throws NullPointerException if {@code headers} is null.\n+     */\n+    public ClientOptions headers(Iterable<Header> headers) {\n+        Objects.requireNonNull(headers, \"'headers' cannot be null.\");\n+\n+        for (final Header header : headers) {\n+            this.headers.put(formatKey(header.getName()), header);\n+        }\n+        return this;\n+    }\n+\n+    /**\n+     * Sets a {@link Header header} with the given name and value or append the {@code value} separated by {@code comma}\n+     * if the {@link Header} exists for given {@code name}.\n+     *\n+     * @param name the name\n+     * @param value the value\n+     * @return The updated ClientOptions object\n+     *\n+     * @throws NullPointerException if {@code name} or {@code value} is null.\n+     */\n+    public ClientOptions addHeader(String name, String value) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+        Objects.requireNonNull(value, \"'value' cannot be null.\");\n+\n+        Header existing = get(name);\n+        if (existing == null) {\n+            this.headers.put(formatKey(name), new Header(name, value));\n+        } else {\n+            existing.addValue(value);\n+        }\n+        return this;\n+    }\n+\n+    /**\n+     * Gets the {@link Header header} for the provided header name. {@code Null} is returned if the header isn't\n+     * found.\n+     *\n+     * @param name the name of the header to find.\n+     * @return the header if found, null otherwise.\n+     *\n+     * @throws NullPointerException if {@code name} is null.\n+     */\n+    public Header get(String name) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+\n+        return headers.get(formatKey(name));\n+    }\n+\n+    /**\n+     * Removes the {@link Header header} with the provided header name. {@code Null} is returned if the header\n+     * isn't found.\n+     *\n+     * @param name the name of the header to remove.\n+     * @return the header if removed, null otherwise.\n+     *\n+     * @throws NullPointerException if {@code name} is null.\n+     */\n+    public Header remove(String name) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+\n+        return headers.remove(formatKey(name));\n+    }\n+\n+    /**\n+     * Get the value for the provided header name. {@code Null} is returned if the header name isn't found.\n+     *\n+     * @param name the name of the header whose value is being retrieved.\n+     * @return the value of the header, or null if the header isn't found\n+     *\n+     * @throws NullPointerException if {@code name} is null.\n+     */\n+    public String getValue(String name) {\n+        final Header header = get(name);\n+        return header == null ? null : header.getValue();\n+    }\n+\n+    /**\n+     * Get the values for the provided header name. {@code Null} is returned if the header name isn't found.\n+     *\n+     * <p>This returns {@link #getValue(String) getValue} split by {@code comma}.</p>\n+     *\n+     * @param name the name of the header whose value is being retrieved.\n+     * @return the values of the header, or null if the header isn't found\n+     */\n+    public String[] getValues(String name) {\n+        final Header header = get(name);\n+        return header == null ? null : header.getValues();\n+    }\n+\n+    /**\n+     * Gets a {@link Map} representation of the {@link Header} collection. The keys are {@link Header#getName()} in the\n+     * given {@link Header}.\n+     *\n+     * @return the headers as map\n+     */\n+    public Map<String, Header> toMap() {\n+        return headers;\n+    }\n+\n+    private String formatKey(final String key) {", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ5MTAzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477491031", "bodyText": "You can use ternary operators to make these more readable. I was trying to understand the assignments.", "author": "conniey", "createdAt": "2020-08-26T18:07:44Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/CoreUtils.java", "diffHunk": "@@ -249,4 +251,32 @@ public static String bomAwareToString(byte[] bytes, String contentType) {\n             }\n         }\n     }\n+\n+    /**\n+     * Prioritize {@code applicationId} set in ClientOptions over {@link HttpLogOptions}.\n+     *\n+     * @param logOptions provided {@link HttpLogOptions}.\n+     * @param clientOptions provided {@link ClientOptions}.\n+     * {@code applicationId} is different in {@link HttpLogOptions} and {@link ClientOptions}.\n+     * @return applicationId based on rule explained above.\n+     *\n+     */\n+    public static String getApplicationId(HttpLogOptions logOptions, ClientOptions clientOptions) {\n+\n+        String applicationId;\n+        String logApplicationId = null;", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ5MTIwMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477491202", "bodyText": "this can just be returned from the ternary operator.", "author": "conniey", "createdAt": "2020-08-26T18:07:58Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/CoreUtils.java", "diffHunk": "@@ -249,4 +251,32 @@ public static String bomAwareToString(byte[] bytes, String contentType) {\n             }\n         }\n     }\n+\n+    /**\n+     * Prioritize {@code applicationId} set in ClientOptions over {@link HttpLogOptions}.\n+     *\n+     * @param logOptions provided {@link HttpLogOptions}.\n+     * @param clientOptions provided {@link ClientOptions}.\n+     * {@code applicationId} is different in {@link HttpLogOptions} and {@link ClientOptions}.\n+     * @return applicationId based on rule explained above.\n+     *\n+     */\n+    public static String getApplicationId(HttpLogOptions logOptions, ClientOptions clientOptions) {\n+\n+        String applicationId;\n+        String logApplicationId = null;\n+        String clientApplicationId = null;\n+\n+        if (logOptions != null) {\n+            logApplicationId = logOptions.getApplicationId();\n+        }\n+        if (clientOptions != null) {\n+            clientApplicationId = clientOptions.getApplicationId();\n+        }\n+\n+        // We prioritize application id sent in ClientOptions.\n+        applicationId = clientApplicationId != null ? clientApplicationId : logApplicationId;", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ5MTM4Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477491382", "bodyText": "final?Or can this be changed.", "author": "conniey", "createdAt": "2020-08-26T18:08:17Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+/**\n+ * A single header within for a request.\n+ *\n+ * If multiple header values are added to a request or response with\n+ * the same name (case-insensitive), then the values will be appended\n+ * to the end of the same Header with commas separating them.\n+ */\n+public class Header {\n+    private final String name;\n+    private String value;", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU0NTY5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477545694", "bodyText": "can be changed in addValue", "author": "hemanttanwar", "createdAt": "2020-08-26T19:42:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ5MTM4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ5MTUxOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477491519", "bodyText": "Can header name and value be null?", "author": "conniey", "createdAt": "2020-08-26T18:08:29Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+/**\n+ * A single header within for a request.\n+ *\n+ * If multiple header values are added to a request or response with\n+ * the same name (case-insensitive), then the values will be appended\n+ * to the end of the same Header with commas separating them.\n+ */\n+public class Header {\n+    private final String name;\n+    private String value;\n+\n+    /**\n+     * Create a Header instance using the provided name and value.\n+     *\n+     * @param name the name\n+     * @param value the value\n+     */\n+    public Header(String name, String value) {\n+        this.name = name;", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU0NTI3Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477545277", "bodyText": "Should not be null. But HttpHeaderTest have a  unit test test where null value is allowed.\nSo I am allowing null value. But adding check for name can not be null.", "author": "hemanttanwar", "createdAt": "2020-08-26T19:41:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ5MTUxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ5MjExOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r477492119", "bodyText": "If you name \"validateApplicationId\" parameter the same as the test method name, you don't need to specify it. The framework can infer what the arguments are. And you can use @methodSource", "author": "conniey", "createdAt": "2020-08-26T18:09:39Z", "path": "sdk/core/azure-core/src/test/java/com/azure/core/util/CoreUtilsTests.java", "diffHunk": "@@ -75,6 +76,20 @@ public void bomAwareToString(byte[] bytes, String contentType, String expected)\n         assertEquals(expected, CoreUtils.bomAwareToString(bytes, contentType));\n     }\n \n+    @ParameterizedTest\n+    @MethodSource(\"validApplicationId\")", "originalCommit": "e8eba360cf7f9a50317846eed57eef6fcc48b1e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "afe08e24d7b21be208dc76d00ad22eaf9d449aca", "url": "https://github.com/Azure/azure-sdk-for-java/commit/afe08e24d7b21be208dc76d00ad22eaf9d449aca", "message": "Review Comments", "committedDate": "2020-08-26T19:51:38Z", "type": "commit"}, {"oid": "c40b069cf66e539871e3f8ede0e9e698d00924a2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c40b069cf66e539871e3f8ede0e9e698d00924a2", "message": "Review comments", "committedDate": "2020-08-26T21:17:46Z", "type": "commit"}, {"oid": "c4dae8d7dac5ef523a120c4c67fbc7085724fb7b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c4dae8d7dac5ef523a120c4c67fbc7085724fb7b", "message": "Review comments", "committedDate": "2020-08-26T21:22:55Z", "type": "commit"}, {"oid": "bc1e4140f135de72bbae2c1c3880da555bfe9384", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bc1e4140f135de72bbae2c1c3880da555bfe9384", "message": "Review comment", "committedDate": "2020-08-26T23:15:25Z", "type": "commit"}, {"oid": "973b37cfc614c24b51d65c33282e814e6dd8bcee", "url": "https://github.com/Azure/azure-sdk-for-java/commit/973b37cfc614c24b51d65c33282e814e6dd8bcee", "message": "Review comment", "committedDate": "2020-08-26T23:17:02Z", "type": "commit"}, {"oid": "db6e398c52d914747256febf1709c3f5a72f11db", "url": "https://github.com/Azure/azure-sdk-for-java/commit/db6e398c52d914747256febf1709c3f5a72f11db", "message": "Review comment", "committedDate": "2020-08-26T23:26:06Z", "type": "commit"}, {"oid": "fbbce6a5d40f76f301a9fbd278d5ea2c1fc548d6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fbbce6a5d40f76f301a9fbd278d5ea2c1fc548d6", "message": "Added unit test", "committedDate": "2020-08-26T23:41:45Z", "type": "commit"}, {"oid": "bbf304c48a9db9a07ae88ee3e8314162b3500910", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bbf304c48a9db9a07ae88ee3e8314162b3500910", "message": "Added more unit test", "committedDate": "2020-08-26T23:58:52Z", "type": "commit"}, {"oid": "04e74fe1f1453f5ea816b81f5827ad45b7621780", "url": "https://github.com/Azure/azure-sdk-for-java/commit/04e74fe1f1453f5ea816b81f5827ad45b7621780", "message": "Updating unit test", "committedDate": "2020-08-27T00:20:47Z", "type": "commit"}, {"oid": "ea2429ce2f346184d7b7c896b7549ef3ebdd8d85", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ea2429ce2f346184d7b7c896b7549ef3ebdd8d85", "message": "Interface changes in eventhubs", "committedDate": "2020-08-27T00:56:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI4NTIzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r480285238", "bodyText": "This will throw NPE if logOptions is null.", "author": "srnagar", "createdAt": "2020-08-31T17:42:07Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/CoreUtils.java", "diffHunk": "@@ -249,4 +251,24 @@ public static String bomAwareToString(byte[] bytes, String contentType) {\n             }\n         }\n     }\n+\n+    /**\n+     * Prioritize {@code applicationId} set in ClientOptions over {@link HttpLogOptions}.\n+     *\n+     * @param logOptions provided {@link HttpLogOptions}.\n+     * @param clientOptions provided {@link ClientOptions}.\n+     * @return applicationId based on rule explained above.\n+     *\n+     */\n+    public static String getApplicationId(HttpLogOptions logOptions, ClientOptions clientOptions) {\n+\n+        String clientApplicationId = null;\n+\n+        if (clientOptions != null) {\n+            clientApplicationId = clientOptions.getApplicationId();\n+        }\n+\n+        // We prioritize application id sent in ClientOptions.\n+        return clientApplicationId != null ? clientApplicationId : logOptions.getApplicationId();", "originalCommit": "ea2429ce2f346184d7b7c896b7549ef3ebdd8d85", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwNTM1Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r482605357", "bodyText": "What is using this logger? I see it is a newly added property but no new code uses it.", "author": "alzimmermsft", "createdAt": "2020-09-02T23:52:39Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/CoreUtils.java", "diffHunk": "@@ -29,6 +30,7 @@\n  * This class contains utility methods useful for building client libraries.\n  */\n public final class CoreUtils {\n+    private static final ClientLogger LOGGER = new ClientLogger(CoreUtils.class);", "originalCommit": "ea2429ce2f346184d7b7c896b7549ef3ebdd8d85", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwNTU4NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r482605584", "bodyText": "If value is null does this return name: or name:null?", "author": "alzimmermsft", "createdAt": "2020-09-02T23:53:32Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import java.util.Objects;\n+\n+/**\n+ * A single header within for a request.\n+ *\n+ * If multiple header values are added to a request or response with\n+ * the same name (case-insensitive), then the values will be appended\n+ * to the end of the same Header with commas separating them.\n+ */\n+public class Header {\n+    private final String name;\n+    private String value;\n+\n+    /**\n+     * Create a Header instance using the provided name and value.\n+     *\n+     * @param name the name\n+     * @param value the value\n+     * @throws NullPointerException if {@code name} or {@code value} is null.\n+     */\n+    public Header(String name, String value) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+        this.name = name;\n+        this.value = value;\n+    }\n+\n+    /**\n+     * Get the header name.\n+     *\n+     * @return the name of this Header\n+     */\n+    public String getName() {\n+        return name;\n+    }\n+\n+    /**\n+     * Get the header value.\n+     *\n+     * @return the value of this Header\n+     */\n+    public String getValue() {\n+        return value;\n+    }\n+\n+    /**\n+     * Get the comma separated value as an array.\n+     *\n+     * @return the values of this Header that are separated by a comma\n+     */\n+    public String[] getValues() {\n+        return value == null ? null : value.split(\",\");\n+    }\n+\n+    /**\n+     * Add a new value to the end of the Header.\n+     *\n+     * @param value the value to add\n+     * @throws NullPointerException if {@code value} is null.\n+     */\n+    public void addValue(String value) {\n+        Objects.requireNonNull(value, \"'value' cannot be null.\");\n+        this.value += \",\" + value;\n+    }\n+\n+    /**\n+     * Get the String representation of the header.\n+     *\n+     * @return the String representation of this Header.\n+     */\n+    @Override\n+    public String toString() {\n+        return name + \":\" + value;", "originalCommit": "ea2429ce2f346184d7b7c896b7549ef3ebdd8d85", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc4MTY5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r482781691", "bodyText": "It should show name:null, Same way how HttpHeader shows.", "author": "hemanttanwar", "createdAt": "2020-09-03T07:56:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwNTU4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwNjM0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r482606349", "bodyText": "Mind giving an example on how this class would be used? Is it expected to be passed during the construction of an SDK client or for each service call made?\nRight now, UserAgentPolicy has an immutable User-Agent string, so it feels like this would be passed during client construction only?", "author": "alzimmermsft", "createdAt": "2020-09-02T23:56:07Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry.\n+ */\n+@Fluent\n+public final class ClientOptions {", "originalCommit": "ea2429ce2f346184d7b7c896b7549ef3ebdd8d85", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYzNDA0Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r482634047", "bodyText": "This would be set  in Builder and client creation time.", "author": "hemanttanwar", "createdAt": "2020-09-03T01:10:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwNjM0OQ=="}], "type": "inlineReview"}, {"oid": "f0acee537a9a527a543641b04763a40f51cd60a1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f0acee537a9a527a543641b04763a40f51cd60a1", "message": "Incorporate review comments", "committedDate": "2020-09-03T08:07:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzMxNjkwOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r483316908", "bodyText": "I'm not fond of having this in our public API", "author": "JonathanGiles", "createdAt": "2020-09-04T00:10:57Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/CoreUtils.java", "diffHunk": "@@ -249,4 +250,28 @@ public static String bomAwareToString(byte[] bytes, String contentType) {\n             }\n         }\n     }\n+\n+    /**\n+     * Prioritize {@code applicationId} set in ClientOptions over {@link HttpLogOptions}.\n+     *\n+     * @param logOptions provided {@link HttpLogOptions}.\n+     * @param clientOptions provided {@link ClientOptions}.\n+     * @return applicationId based on rule explained above.\n+     *\n+     */\n+    public static String getApplicationId(HttpLogOptions logOptions, ClientOptions clientOptions) {", "originalCommit": "f0acee537a9a527a543641b04763a40f51cd60a1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzMwNjU3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r487306574", "bodyText": "removed this public API.", "author": "hemanttanwar", "createdAt": "2020-09-11T21:51:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzMxNjkwOA=="}], "type": "inlineReview"}, {"oid": "8de0fa15b5b3fc2a0ffc45d03b3d562614125f25", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8de0fa15b5b3fc2a0ffc45d03b3d562614125f25", "message": "Incorporated Revie wCommentrs", "committedDate": "2020-09-11T21:52:03Z", "type": "commit"}, {"oid": "9221f72c33200a16d230fcc5c117ebd5e9ccfe88", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9221f72c33200a16d230fcc5c117ebd5e9ccfe88", "message": "pom file change", "committedDate": "2020-09-11T22:07:03Z", "type": "commit"}, {"oid": "6af1cd931af4541862e49b153741662dedf8f6ed", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6af1cd931af4541862e49b153741662dedf8f6ed", "message": "Review comments", "committedDate": "2020-09-11T22:33:39Z", "type": "commit"}, {"oid": "f0f1d0066609cf50f27217f9630bfe5701cd8e5a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f0f1d0066609cf50f27217f9630bfe5701cd8e5a", "message": "merge master into branch", "committedDate": "2020-09-13T05:17:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxMjU0OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r487612548", "bodyText": "This javadoc could be improved.", "author": "JonathanGiles", "createdAt": "2020-09-14T01:52:02Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry. This class is used by user to set these properties at the time of building the client.", "originalCommit": "f0f1d0066609cf50f27217f9630bfe5701cd8e5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxMjczMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r487612732", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Sets the provided headers.\n          \n          \n            \n                 * Sets the provided headers, overwriting all previously-set headers in the process.", "author": "JonathanGiles", "createdAt": "2020-09-14T01:53:07Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry. This class is used by user to set these properties at the time of building the client.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private Iterable<Header> headers = new ArrayList<>();\n+\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided.\n+     * @param applicationId to be set.\n+     *\n+     * @return updated {@link ClientOptions}.\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+\n+        if (CoreUtils.isNullOrEmpty(applicationId)) {\n+            return this;\n+        }\n+\n+        if (applicationId.length() > MAX_APPLICATION_ID_LENGTH) {\n+            throw logger\n+                .logExceptionAsError(new IllegalArgumentException(\"'applicationId' length cannot be greater than \"\n+                    + MAX_APPLICATION_ID_LENGTH));\n+        } else if (applicationId.contains(\" \")) {\n+            throw logger\n+                .logExceptionAsError(new IllegalArgumentException(\"'applicationId' must not contain a space.\"));\n+        } else {\n+            this.applicationId = applicationId;\n+        }\n+\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the provided headers.", "originalCommit": "f0f1d0066609cf50f27217f9630bfe5701cd8e5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxMjgwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r487612809", "bodyText": "You might want to consider making this lazily instantiated", "author": "JonathanGiles", "createdAt": "2020-09-14T01:53:37Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry. This class is used by user to set these properties at the time of building the client.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private Iterable<Header> headers = new ArrayList<>();", "originalCommit": "f0f1d0066609cf50f27217f9630bfe5701cd8e5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxMjk3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r487612973", "bodyText": "Once the applicationId is set, this seems to prevent it ever being reset? If that is desirable (which I don't think it is), then it is not documented.", "author": "JonathanGiles", "createdAt": "2020-09-14T01:54:29Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * Client Options for setting common properties for example applicationId. Most of these properties are applied on\n+ * request being send to Azure Service but some could be used for other purpose also for example applicationId could be\n+ * used for telemetry. This class is used by user to set these properties at the time of building the client.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private Iterable<Header> headers = new ArrayList<>();\n+\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided.\n+     * @param applicationId to be set.\n+     *\n+     * @return updated {@link ClientOptions}.\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+\n+        if (CoreUtils.isNullOrEmpty(applicationId)) {\n+            return this;\n+        }", "originalCommit": "f0f1d0066609cf50f27217f9630bfe5701cd8e5a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAxMzM3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488013374", "bodyText": "Changed it , so that user can reset applicationId.", "author": "hemanttanwar", "createdAt": "2020-09-14T15:15:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxMjk3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxMzI0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r487613249", "bodyText": "Please be sure to review all JavaDoc to ensure it is readable.", "author": "JonathanGiles", "createdAt": "2020-09-14T01:55:56Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import java.util.Objects;\n+\n+/**\n+ * A single header within for a request.", "originalCommit": "f0f1d0066609cf50f27217f9630bfe5701cd8e5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxMzY0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r487613643", "bodyText": "This says there is a NPE for a null value, but the code doesn't check for that.", "author": "JonathanGiles", "createdAt": "2020-09-14T01:57:53Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import java.util.Objects;\n+\n+/**\n+ * A single header within for a request.\n+ *\n+ * If multiple header values are added to a request or response with\n+ * the same name (case-insensitive), then the values will be appended\n+ * to the end of the same Header with commas separating them.\n+ */\n+public class Header {\n+    private final String name;\n+    private String value;\n+\n+    /**\n+     * Create a Header instance using the provided name and value.\n+     *\n+     * @param name the name\n+     * @param value the value\n+     * @throws NullPointerException if {@code name} or {@code value} is null.", "originalCommit": "f0f1d0066609cf50f27217f9630bfe5701cd8e5a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAzMzMyMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488033320", "bodyText": "Removing {@code value} from javadoc. We have one year old test which allow null value. So I am not changing that behavior.", "author": "hemanttanwar", "createdAt": "2020-09-14T15:40:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxMzY0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxNDQ4OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r487614489", "bodyText": "Another JavaDoc to flesh out, especially before it gets replicated across all libraries.", "author": "JonathanGiles", "createdAt": "2020-09-14T02:01:36Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -95,6 +97,18 @@\n     public ServiceBusClientBuilder() {\n     }\n \n+    /**\n+     * Sets various options on the client for example applicationId.", "originalCommit": "f0f1d0066609cf50f27217f9630bfe5701cd8e5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a8ed969a30407d8a55caa933d6cfd43c7b139cbc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a8ed969a30407d8a55caa933d6cfd43c7b139cbc", "message": "Incorporated review comments", "committedDate": "2020-09-14T15:49:27Z", "type": "commit"}, {"oid": "da8df3e59c56126c0483dbef4037ab76c20e1fb6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/da8df3e59c56126c0483dbef4037ab76c20e1fb6", "message": "Adding test, updating javadoc etc", "committedDate": "2020-09-14T17:53:03Z", "type": "commit"}, {"oid": "43e26450610dce0c39a66c5a9e200d107edc5214", "url": "https://github.com/Azure/azure-sdk-for-java/commit/43e26450610dce0c39a66c5a9e200d107edc5214", "message": "updating javadoc etc", "committedDate": "2020-09-14T17:57:09Z", "type": "commit"}, {"oid": "04460176a3e11411412b6cb2319a1cfd4e3b2bf3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/04460176a3e11411412b6cb2319a1cfd4e3b2bf3", "message": "updating javadoc", "committedDate": "2020-09-14T18:06:27Z", "type": "commit"}, {"oid": "6f8b7a4647ffb070ef33362a9077a32dc1242001", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6f8b7a4647ffb070ef33362a9077a32dc1242001", "message": "more updating javadoc", "committedDate": "2020-09-14T18:12:16Z", "type": "commit"}, {"oid": "facef0f3769f26a4fd159a38361c295e3f30ea22", "url": "https://github.com/Azure/azure-sdk-for-java/commit/facef0f3769f26a4fd159a38361c295e3f30ea22", "message": "Updating unit test case", "committedDate": "2020-09-14T19:04:47Z", "type": "commit"}, {"oid": "7826049a0b279d97cba5eed2df095b3138b56f67", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7826049a0b279d97cba5eed2df095b3138b56f67", "message": "merge master into branch", "committedDate": "2020-09-14T22:18:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI2MTY5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488261694", "bodyText": "Rather than return a new arraylist - just return an empty iterable, e.g. return Collections.emptyList();", "author": "JonathanGiles", "createdAt": "2020-09-14T22:21:40Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -73,6 +74,9 @@ public ClientOptions setHeaders(Iterable<Header> headers) {\n      * @return the headers.\n      */\n     public Iterable<Header> getHeaders() {\n+        if (headers == null) {\n+            headers = new ArrayList<>();", "originalCommit": "a8ed969a30407d8a55caa933d6cfd43c7b139cbc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NDQ4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488284486", "bodyText": "Yeah, this creates a new instance of ArrayList each time. Instead, using Collections.emptyList() will return a static singleton list instance.", "author": "srnagar", "createdAt": "2020-09-14T23:00:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI2MTY5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4Mzg4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488283886", "bodyText": "I would be more direct:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated deprecated in favor of {@link ClientOptions#getApplicationId()}\n          \n          \n            \n                 * @deprecated Use {@link ClientOptions} to configured {@code applicationId}.", "author": "alzimmermsft", "createdAt": "2020-09-14T22:58:44Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/http/policy/HttpLogOptions.java", "diffHunk": "@@ -158,7 +159,9 @@ public HttpLogOptions addAllowedQueryParamName(final String allowedQueryParamNam\n      * Gets the application specific id.\n      *\n      * @return The application specific id.\n+     * @deprecated deprecated in favor of {@link ClientOptions#getApplicationId()}", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NDAxMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488284011", "bodyText": "Same comment\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated deprecated in favor of {@link ClientOptions#setApplicationId(String)}\n          \n          \n            \n                 * @deprecated Use {@link ClientOptions} to configured {@code applicationId}.", "author": "alzimmermsft", "createdAt": "2020-09-14T22:59:04Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/http/policy/HttpLogOptions.java", "diffHunk": "@@ -168,7 +171,9 @@ public String getApplicationId() {\n      *\n      * @param applicationId The user specified application id.\n      * @return The updated HttpLogOptions object.\n+     * @deprecated deprecated in favor of {@link ClientOptions#setApplicationId(String)}", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NDM4NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488284385", "bodyText": "I think we should leave the second sentence out if we ever want to use this in different ways. It also doesn't add much explanation about the usage of this class.", "author": "alzimmermsft", "createdAt": "2020-09-14T23:00:05Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,89 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * This class represents various options to be set on the client. It is set on the builder at the time of building the\n+ * client.", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NTE4Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488285182", "bodyText": "Any reason to require the user to set the entire Iterable rather than offering a setHeaders(Header...), or setHeaders(Iterable<Header>), and addHeader(Header) operators? I feel this will lead to a lot of situations where the user will need to use Collections.singletonList().", "author": "alzimmermsft", "createdAt": "2020-09-14T23:02:38Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,89 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * This class represents various options to be set on the client. It is set on the builder at the time of building the\n+ * client.\n+ * <p>\n+ * The {@link Header} could be set using {@link ClientOptions#setHeaders(Iterable) setHeaders}. The {@link Header} will\n+ * be applied on the request being sent to Azure Service.\n+ * <p>\n+ * The {@code applicationId} could be set using {@link ClientOptions#setApplicationId(String) setApplicationId} which\n+ * is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private Iterable<Header> headers;", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODMxNjE2MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488316160", "bodyText": "I had this specific discussion with @srnagar .  Earlier in the PR I did had addHeader(name, value), remove(name), getValue(name) API but the argument against this was 1. This class is not equivalent of HttpHeaders  2. This is not primary way to add the Headers . We do not want every time user create a client, they have to set a Header here.  It is kind of hidden, user use them in special cases.  So need to add these additional API is not so strong. But in future if we see usage pattern like this, we can add additional API.", "author": "hemanttanwar", "createdAt": "2020-09-15T00:47:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NTE4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NTM4Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488285382", "bodyText": "Need to add a @throws Javadoc.", "author": "alzimmermsft", "createdAt": "2020-09-14T23:03:14Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,89 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * This class represents various options to be set on the client. It is set on the builder at the time of building the\n+ * client.\n+ * <p>\n+ * The {@link Header} could be set using {@link ClientOptions#setHeaders(Iterable) setHeaders}. The {@link Header} will\n+ * be applied on the request being sent to Azure Service.\n+ * <p>\n+ * The {@code applicationId} could be set using {@link ClientOptions#setApplicationId(String) setApplicationId} which\n+ * is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private Iterable<Header> headers;\n+\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided. It is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+     * @param applicationId to be set.\n+     *\n+     * @return updated {@link ClientOptions}.", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NTc0NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488285744", "bodyText": "Why do we prevent null here when the getter will return an empty list on null?", "author": "alzimmermsft", "createdAt": "2020-09-14T23:04:30Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,89 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * This class represents various options to be set on the client. It is set on the builder at the time of building the\n+ * client.\n+ * <p>\n+ * The {@link Header} could be set using {@link ClientOptions#setHeaders(Iterable) setHeaders}. The {@link Header} will\n+ * be applied on the request being sent to Azure Service.\n+ * <p>\n+ * The {@code applicationId} could be set using {@link ClientOptions#setApplicationId(String) setApplicationId} which\n+ * is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private Iterable<Header> headers;\n+\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided. It is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+     * @param applicationId to be set.\n+     *\n+     * @return updated {@link ClientOptions}.\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+\n+        if (CoreUtils.isNullOrEmpty(applicationId)) {\n+            this.applicationId = applicationId;\n+            return this;\n+        }\n+\n+        if (applicationId.length() > MAX_APPLICATION_ID_LENGTH) {\n+            throw logger\n+                .logExceptionAsError(new IllegalArgumentException(\"'applicationId' length cannot be greater than \"\n+                    + MAX_APPLICATION_ID_LENGTH));\n+        } else if (applicationId.contains(\" \")) {\n+            throw logger\n+                .logExceptionAsError(new IllegalArgumentException(\"'applicationId' must not contain a space.\"));\n+        } else {\n+            this.applicationId = applicationId;\n+        }\n+\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the provided headers, overwriting all previously-set headers in the process. It will be applied on the\n+     * request being sent to Azure Service.\n+     * @param headers headers to be set.\n+     *\n+     * @return updated {@link ClientOptions}.\n+     * @throws NullPointerException if {@code headers} is null.\n+     */\n+    public ClientOptions setHeaders(Iterable<Header> headers) {\n+        this.headers = Objects.requireNonNull(headers, \"'headers' cannot be null.\");", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM3NjAwNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488376004", "bodyText": "make sense, I will remove this check.", "author": "hemanttanwar", "createdAt": "2020-09-15T04:29:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NTc0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NTk5Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488285993", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Sets the provided headers, overwriting all previously-set headers in the process. It will be applied on the\n          \n          \n            \n                 * Sets the headers, overwriting all previously set headers in the process. It will be applied on the", "author": "alzimmermsft", "createdAt": "2020-09-14T23:05:12Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,89 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * This class represents various options to be set on the client. It is set on the builder at the time of building the\n+ * client.\n+ * <p>\n+ * The {@link Header} could be set using {@link ClientOptions#setHeaders(Iterable) setHeaders}. The {@link Header} will\n+ * be applied on the request being sent to Azure Service.\n+ * <p>\n+ * The {@code applicationId} could be set using {@link ClientOptions#setApplicationId(String) setApplicationId} which\n+ * is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private Iterable<Header> headers;\n+\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided. It is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+     * @param applicationId to be set.\n+     *\n+     * @return updated {@link ClientOptions}.\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+\n+        if (CoreUtils.isNullOrEmpty(applicationId)) {\n+            this.applicationId = applicationId;\n+            return this;\n+        }\n+\n+        if (applicationId.length() > MAX_APPLICATION_ID_LENGTH) {\n+            throw logger\n+                .logExceptionAsError(new IllegalArgumentException(\"'applicationId' length cannot be greater than \"\n+                    + MAX_APPLICATION_ID_LENGTH));\n+        } else if (applicationId.contains(\" \")) {\n+            throw logger\n+                .logExceptionAsError(new IllegalArgumentException(\"'applicationId' must not contain a space.\"));\n+        } else {\n+            this.applicationId = applicationId;\n+        }\n+\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the provided headers, overwriting all previously-set headers in the process. It will be applied on the", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NjIxNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488286214", "bodyText": "I think the second sentence should be made into another paragraph as it is details on how the values passed to the setter will be used.", "author": "alzimmermsft", "createdAt": "2020-09-14T23:05:56Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,89 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+\n+import java.util.ArrayList;\n+import java.util.Objects;\n+\n+/**\n+ * This class represents various options to be set on the client. It is set on the builder at the time of building the\n+ * client.\n+ * <p>\n+ * The {@link Header} could be set using {@link ClientOptions#setHeaders(Iterable) setHeaders}. The {@link Header} will\n+ * be applied on the request being sent to Azure Service.\n+ * <p>\n+ * The {@code applicationId} could be set using {@link ClientOptions#setApplicationId(String) setApplicationId} which\n+ * is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+ */\n+@Fluent\n+public final class ClientOptions {\n+    private static final int MAX_APPLICATION_ID_LENGTH = 24;\n+    private final ClientLogger logger = new ClientLogger(ClientOptions.class);\n+    private Iterable<Header> headers;\n+\n+    private String applicationId;\n+\n+    /**\n+     * Gets the applicationId.\n+     * @return The applicationId.\n+     */\n+    public String getApplicationId() {\n+        return applicationId;\n+    }\n+\n+    /**\n+     * Sets the applicationId provided. It is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+     * @param applicationId to be set.\n+     *\n+     * @return updated {@link ClientOptions}.\n+     */\n+    public ClientOptions setApplicationId(String applicationId) {\n+\n+        if (CoreUtils.isNullOrEmpty(applicationId)) {\n+            this.applicationId = applicationId;\n+            return this;\n+        }\n+\n+        if (applicationId.length() > MAX_APPLICATION_ID_LENGTH) {\n+            throw logger\n+                .logExceptionAsError(new IllegalArgumentException(\"'applicationId' length cannot be greater than \"\n+                    + MAX_APPLICATION_ID_LENGTH));\n+        } else if (applicationId.contains(\" \")) {\n+            throw logger\n+                .logExceptionAsError(new IllegalArgumentException(\"'applicationId' must not contain a space.\"));\n+        } else {\n+            this.applicationId = applicationId;\n+        }\n+\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the provided headers, overwriting all previously-set headers in the process. It will be applied on the", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NjY4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488286686", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * It represents a single header for a request being sent to Azure Service.\n          \n          \n            \n             * Represents a single header for a request.\n          \n      \n    \n    \n  \n\nCan drop the Azure bit as it isn't explicitly required for our SDKs to talk to Azure services.", "author": "alzimmermsft", "createdAt": "2020-09-14T23:07:22Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import java.util.Objects;\n+\n+/**\n+ * It represents a single header for a request being sent to Azure Service.", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4Njc2NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488286764", "bodyText": "Missing <p> tag.", "author": "alzimmermsft", "createdAt": "2020-09-14T23:07:38Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import java.util.Objects;\n+\n+/**\n+ * It represents a single header for a request being sent to Azure Service.\n+ *", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NzE0OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488287148", "bodyText": "We should see if it is cheaper to store the values as a String[], List<String>, or String. Not required for this PR.", "author": "alzimmermsft", "createdAt": "2020-09-14T23:08:55Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import java.util.Objects;\n+\n+/**\n+ * It represents a single header for a request being sent to Azure Service.\n+ *\n+ * If multiple header values are added to a request or response with the same name (case-insensitive), then the values\n+ * will be appended at the end of the same {@link Header} with commas separating them.\n+ */\n+public class Header {\n+    private final String name;\n+    private String value;\n+\n+    /**\n+     * Create a Header instance using the provided name and value.\n+     *\n+     * @param name the name\n+     * @param value the value\n+     * @throws NullPointerException if {@code name} is null.\n+     */\n+    public Header(String name, String value) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+        this.name = name;\n+        this.value = value;\n+    }\n+\n+    /**\n+     * Gets the header name.\n+     *\n+     * @return the name of this Header\n+     */\n+    public String getName() {\n+        return name;\n+    }\n+\n+    /**\n+     * Gets the header value.\n+     *\n+     * @return the value of this Header\n+     */\n+    public String getValue() {\n+        return value;\n+    }\n+\n+    /**\n+     * Gets the comma separated value as an array.\n+     *\n+     * @return the values of this Header that are separated by a comma\n+     */\n+    public String[] getValues() {\n+        return value == null ? null : value.split(\",\");", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc5OTM5Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488799392", "bodyText": "This will be moved to a follow-up issue.", "author": "alzimmermsft", "createdAt": "2020-09-15T16:24:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NzE0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgwMzk2OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488803969", "bodyText": "#15219", "author": "alzimmermsft", "createdAt": "2020-09-15T16:31:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NzE0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4Mjk2MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488282961", "bodyText": "Can this be made final?", "author": "srnagar", "createdAt": "2020-09-14T22:55:54Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/http/HttpHeader.java", "diffHunk": "@@ -3,16 +3,16 @@\n \n package com.azure.core.http;\n \n+import com.azure.core.util.Header;\n+\n /**\n  * A single header within a HTTP request or response.\n  *\n  * If multiple header values are added to a HTTP request or response with\n  * the same name (case-insensitive), then the values will be appended\n  * to the end of the same Header with commas separating them.\n  */\n-public class HttpHeader {\n-    private final String name;\n-    private String value;\n+public class HttpHeader extends Header {", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODMxMjk4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488312987", "bodyText": "Spoke to Jonathan, This is API change and we can not do it now.", "author": "hemanttanwar", "createdAt": "2020-09-15T00:36:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4Mjk2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4NjM1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488286351", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        //                 logOptions, clientOptions, expected\n          \n          \n            \n                        // logOptions, clientOptions, expected", "author": "srnagar", "createdAt": "2020-09-14T23:06:24Z", "path": "sdk/core/azure-core/src/test/java/com/azure/core/util/CoreUtilsTests.java", "diffHunk": "@@ -91,6 +91,16 @@ public void bomAwareToString(byte[] bytes, String contentType, String expected)\n         );\n     }\n \n+    private static Stream<Arguments> testValidApplicationId() {\n+        return Stream.of(\n+            //                 logOptions, clientOptions, expected", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5MDkxOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488290918", "bodyText": "It seems like the ctor does not check for null value but addValue does. We should either consistently do the null check.", "author": "srnagar", "createdAt": "2020-09-14T23:21:21Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import java.util.Objects;\n+\n+/**\n+ * It represents a single header for a request being sent to Azure Service.\n+ *\n+ * If multiple header values are added to a request or response with the same name (case-insensitive), then the values\n+ * will be appended at the end of the same {@link Header} with commas separating them.\n+ */\n+public class Header {\n+    private final String name;\n+    private String value;\n+\n+    /**\n+     * Create a Header instance using the provided name and value.\n+     *\n+     * @param name the name\n+     * @param value the value\n+     * @throws NullPointerException if {@code name} is null.\n+     */\n+    public Header(String name, String value) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+        this.name = name;\n+        this.value = value;\n+    }\n+\n+    /**\n+     * Gets the header name.\n+     *\n+     * @return the name of this Header\n+     */\n+    public String getName() {\n+        return name;\n+    }\n+\n+    /**\n+     * Gets the header value.\n+     *\n+     * @return the value of this Header\n+     */\n+    public String getValue() {\n+        return value;\n+    }\n+\n+    /**\n+     * Gets the comma separated value as an array.\n+     *\n+     * @return the values of this Header that are separated by a comma\n+     */\n+    public String[] getValues() {\n+        return value == null ? null : value.split(\",\");\n+    }\n+\n+    /**\n+     * Add a new value to the end of the Header.\n+     *\n+     * @param value the value to add\n+     * @throws NullPointerException if {@code value} is null.\n+     */\n+    public void addValue(String value) {\n+        Objects.requireNonNull(value, \"'value' cannot be null.\");", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM3OTQ5Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488379492", "bodyText": "allowing null value", "author": "hemanttanwar", "createdAt": "2020-09-15T04:42:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5MDkxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5MTI0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488291243", "bodyText": "This can throw NPE if the ctor set the value to null and then trying to concat to the null value.", "author": "srnagar", "createdAt": "2020-09-14T23:22:26Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Header.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import java.util.Objects;\n+\n+/**\n+ * It represents a single header for a request being sent to Azure Service.\n+ *\n+ * If multiple header values are added to a request or response with the same name (case-insensitive), then the values\n+ * will be appended at the end of the same {@link Header} with commas separating them.\n+ */\n+public class Header {\n+    private final String name;\n+    private String value;\n+\n+    /**\n+     * Create a Header instance using the provided name and value.\n+     *\n+     * @param name the name\n+     * @param value the value\n+     * @throws NullPointerException if {@code name} is null.\n+     */\n+    public Header(String name, String value) {\n+        Objects.requireNonNull(name, \"'name' cannot be null.\");\n+        this.name = name;\n+        this.value = value;\n+    }\n+\n+    /**\n+     * Gets the header name.\n+     *\n+     * @return the name of this Header\n+     */\n+    public String getName() {\n+        return name;\n+    }\n+\n+    /**\n+     * Gets the header value.\n+     *\n+     * @return the value of this Header\n+     */\n+    public String getValue() {\n+        return value;\n+    }\n+\n+    /**\n+     * Gets the comma separated value as an array.\n+     *\n+     * @return the values of this Header that are separated by a comma\n+     */\n+    public String[] getValues() {\n+        return value == null ? null : value.split(\",\");\n+    }\n+\n+    /**\n+     * Add a new value to the end of the Header.\n+     *\n+     * @param value the value to add\n+     * @throws NullPointerException if {@code value} is null.\n+     */\n+    public void addValue(String value) {\n+        Objects.requireNonNull(value, \"'value' cannot be null.\");\n+        this.value += \",\" + value;", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM3OTQyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488379421", "bodyText": "removing this null check", "author": "hemanttanwar", "createdAt": "2020-09-15T04:42:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5MTI0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5MjIzMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488292232", "bodyText": "I don't think this is necessary. If we find the app id in ClientOptions, there's no need to check HttpLogOptions at all. App id in ClientOptions will always have higher priority.", "author": "srnagar", "createdAt": "2020-09-14T23:25:34Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/administration/ServiceBusAdministrationClientBuilder.java", "diffHunk": "@@ -321,7 +337,26 @@ private HttpPipeline createPipeline() {\n         final String clientName = properties.getOrDefault(\"name\", \"UnknownName\");\n         final String clientVersion = properties.getOrDefault(\"version\", \"UnknownVersion\");\n \n-        httpPolicies.add(new UserAgentPolicy(httpLogOptions.getApplicationId(), clientName, clientVersion,\n+        // Find applicationId to use\n+        String logApplicationId = null;\n+        if (httpLogOptions != null) {\n+            logApplicationId = httpLogOptions.getApplicationId();\n+        }\n+\n+        String clientApplicationId = null;\n+        if (clientOptions != null && clientOptions.getApplicationId() != null) {\n+            clientApplicationId = clientOptions.getApplicationId();\n+        }\n+\n+        if (logApplicationId != null && clientApplicationId != null\n+            && !logApplicationId.equalsIgnoreCase(clientApplicationId)) {\n+            throw logger.logExceptionAsError(new IllegalStateException(\n+                \"'httpLogOptions.getApplicationId() and clientOptions.getApplicationId()' cannot be different.\"));\n+        }", "originalCommit": "7826049a0b279d97cba5eed2df095b3138b56f67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM3ODc3Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r488378776", "bodyText": "I think we would like to inform client if client has set two separate value in clientOptions.getApplicationId()  and  httpLogOptions.getApplicationId(). This is probably a configuration mistake by user.", "author": "hemanttanwar", "createdAt": "2020-09-15T04:40:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5MjIzMg=="}], "type": "inlineReview"}, {"oid": "5ee60c462f05904df365976641fb3bfe9b23bd51", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5ee60c462f05904df365976641fb3bfe9b23bd51", "message": "Review comments", "committedDate": "2020-09-15T04:44:01Z", "type": "commit"}, {"oid": "d8750de4699aa92f7bc3f59b400eb55399dcaf60", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d8750de4699aa92f7bc3f59b400eb55399dcaf60", "message": "Fix test", "committedDate": "2020-09-15T05:11:51Z", "type": "commit"}, {"oid": "784318e7b130eb60d64e015e6477028546d530c6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/784318e7b130eb60d64e015e6477028546d530c6", "message": "Update test", "committedDate": "2020-09-15T05:28:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA3ODE3MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r489078170", "bodyText": "Typo on 'configured' here and elsewhere.", "author": "JonathanGiles", "createdAt": "2020-09-15T23:42:46Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/http/policy/HttpLogOptions.java", "diffHunk": "@@ -159,7 +159,7 @@ public HttpLogOptions addAllowedQueryParamName(final String allowedQueryParamNam\n      * Gets the application specific id.\n      *\n      * @return The application specific id.\n-     * @deprecated deprecated in favor of {@link ClientOptions#getApplicationId()}\n+     * @deprecated Use {@link ClientOptions} to configured {@code applicationId}.", "originalCommit": "5ee60c462f05904df365976641fb3bfe9b23bd51", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA3ODQyMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r489078420", "bodyText": "There is no need for a new paragraph for the second sentence.", "author": "JonathanGiles", "createdAt": "2020-09-15T23:43:38Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -64,15 +64,15 @@ public ClientOptions setApplicationId(String applicationId) {\n     }\n \n     /**\n-     * Sets the provided headers, overwriting all previously-set headers in the process. It will be applied on the\n-     * request being sent to Azure Service.\n+     * Sets the headers, overwriting all previously set headers in the process.\n+     * <p>\n+     * It will be applied on the request being sent to Azure Service.", "originalCommit": "5ee60c462f05904df365976641fb3bfe9b23bd51", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA4MDkzNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r489080935", "bodyText": "I'd really like another pass on this JavaDoc, because it is not as descriptive as it would ideally be. It doesn't explain what it means to set various options on the client (and why that is different from other builder parameters), it doesn't explain where users can use this API. It doesn't explain very clearly what a Header is, and how an http or other header might be created and passed in. It doesn't explain what exactly an application ID is and why it might be useful to set it.\nIn other words, put yourself in the seat of someone new to this API and be sure you're explaining to them everything they need to know. Same goes for the clientOptions API on builders, especially as the rest of the team will copy / paste that content.", "author": "JonathanGiles", "createdAt": "2020-09-15T23:52:06Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/ClientOptions.java", "diffHunk": "@@ -0,0 +1,89 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+\n+import java.util.Collections;\n+\n+/**\n+ * This class represents various options to be set on the client.\n+ * <p>\n+ * The {@link Header} could be set using {@link ClientOptions#setHeaders(Iterable) setHeaders}. The {@link Header} will\n+ * be applied on the request being sent to Azure Service.\n+ * <p>\n+ * The {@code applicationId} could be set using {@link ClientOptions#setApplicationId(String) setApplicationId} which\n+ * is used for setting {@code applicationId} in the {@link UserAgentPolicy}.\n+ */", "originalCommit": "784318e7b130eb60d64e015e6477028546d530c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8d8c059a8c8bc918c73add457bc9b3774f028d63", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8d8c059a8c8bc918c73add457bc9b3774f028d63", "message": "Adding java doc.", "committedDate": "2020-09-16T22:47:10Z", "type": "commit"}, {"oid": "c2eeba98df7aaa9bc4e9f68a62d8c5890923b07f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c2eeba98df7aaa9bc4e9f68a62d8c5890923b07f", "message": "Adding java doc.", "committedDate": "2020-09-16T23:03:12Z", "type": "commit"}, {"oid": "dbd7da13e35e3e146bf0383e19f3a5fc21169db7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dbd7da13e35e3e146bf0383e19f3a5fc21169db7", "message": "Adding java doc.", "committedDate": "2020-09-16T23:06:56Z", "type": "commit"}, {"oid": "f248f7f3f84317798c9d2451d8a56c4b8943cbb4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f248f7f3f84317798c9d2451d8a56c4b8943cbb4", "message": "Adding java doc.", "committedDate": "2020-09-16T23:14:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgyMTE1Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13697#discussion_r489821156", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /**\n          \n          \n            \n                 * Sets the {@link ClientOptions} which enables various options to be set on the client. For example setting\n          \n          \n            \n                 * {@code applicationId} using {@link ClientOptions#setApplicationId(String)} to configure {@link UserAgentPolicy}\n          \n          \n            \n                 * for telemetry/monitoring purpose.\n          \n          \n            \n                 * <p>\n          \n          \n            \n                 * More About <a href=\"https://azure.github.io/azure-sdk/general_azurecore.html#telemetry-policy\">Azure Core: Telemetry policy</a>\n          \n          \n            \n                 *\n          \n          \n            \n                 * @param clientOptions to be set on the client.\n          \n          \n            \n                 *\n          \n          \n            \n                 * @return The updated {@link ServiceBusClientBuilder} object.\n          \n          \n            \n                 * @see ClientOptions\n          \n          \n            \n                 */\n          \n          \n            \n                /**\n          \n          \n            \n                 * Sets the {@link ClientOptions} to be sent from the client built from this builder, enabling customization of\n          \n          \n            \n                 * certain properties, as well as support the addition of custom header information. Refer to the \n          \n          \n            \n                 * {@link ClientOptions} documentation for more information.\n          \n          \n            \n                 *\n          \n          \n            \n                 * @param clientOptions to be set on the client.\n          \n          \n            \n                 * @return The updated {@link ServiceBusClientBuilder} object.\n          \n          \n            \n                 */", "author": "JonathanGiles", "createdAt": "2020-09-17T00:12:35Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -95,6 +98,23 @@\n     public ServiceBusClientBuilder() {\n     }\n \n+    /**\n+     * Sets the {@link ClientOptions} which enables various options to be set on the client. For example setting\n+     * {@code applicationId} using {@link ClientOptions#setApplicationId(String)} to configure {@link UserAgentPolicy}\n+     * for telemetry/monitoring purpose.\n+     * <p>\n+     * More About <a href=\"https://azure.github.io/azure-sdk/general_azurecore.html#telemetry-policy\">Azure Core: Telemetry policy</a>\n+     *\n+     * @param clientOptions to be set on the client.\n+     *\n+     * @return The updated {@link ServiceBusClientBuilder} object.\n+     * @see ClientOptions\n+     */", "originalCommit": "f248f7f3f84317798c9d2451d8a56c4b8943cbb4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "146106fe542fd87289303be83df7eee36bba1b60", "url": "https://github.com/Azure/azure-sdk-for-java/commit/146106fe542fd87289303be83df7eee36bba1b60", "message": "Update sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java\n\nCo-authored-by: Jonathan Giles <jonathan@jonathangiles.net>", "committedDate": "2020-09-17T03:34:41Z", "type": "commit"}, {"oid": "e84a5ce1b8fe27f723980bd7a25d0ebb0deaaa6c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e84a5ce1b8fe27f723980bd7a25d0ebb0deaaa6c", "message": "Remove unwanted import.", "committedDate": "2020-09-17T04:48:55Z", "type": "commit"}]}