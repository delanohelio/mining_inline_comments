{"pr_number": 7589, "pr_title": "Implemented Storage 71 features ", "pr_createdAt": "2020-01-21T20:49:11Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/7589", "timeline": [{"oid": "dee41f4abff72dd428a0d33367d3a820927703fe", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dee41f4abff72dd428a0d33367d3a820927703fe", "message": "Regenerated off swagger and added extra parameters to necessary methods", "committedDate": "2019-12-04T20:52:34Z", "type": "commit"}, {"oid": "878ae8fd552e60dcee71c6e7afc94edfb2e9422f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/878ae8fd552e60dcee71c6e7afc94edfb2e9422f", "message": "Merge branch 'master' into storage/features/stg71-base", "committedDate": "2019-12-04T22:25:55Z", "type": "commit"}, {"oid": "422b8abdb13024b9ea1b77b79857336790e77a74", "url": "https://github.com/Azure/azure-sdk-for-java/commit/422b8abdb13024b9ea1b77b79857336790e77a74", "message": "Added test recordings for STG71", "committedDate": "2019-12-04T23:54:17Z", "type": "commit"}, {"oid": "68b79abd922a75938e5f1741c903237066dd5c00", "url": "https://github.com/Azure/azure-sdk-for-java/commit/68b79abd922a75938e5f1741c903237066dd5c00", "message": "Updated version in swagger readme and supress ShareErrorCode", "committedDate": "2019-12-05T18:16:45Z", "type": "commit"}, {"oid": "257499192506470930544b7206f824ea438c16be", "url": "https://github.com/Azure/azure-sdk-for-java/commit/257499192506470930544b7206f824ea438c16be", "message": "Updated blob and dependent libraries to new version (#6845)", "committedDate": "2019-12-13T18:53:13Z", "type": "commit"}, {"oid": "0b7121b8394750f3ed2e8ba428df4ee941e5003c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0b7121b8394750f3ed2e8ba428df4ee941e5003c", "message": "Added support for CPK-N (#6878)", "committedDate": "2019-12-20T18:59:45Z", "type": "commit"}, {"oid": "b13b6acc0b59aaf52a9435aa50bd67fb7dc97c7a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b13b6acc0b59aaf52a9435aa50bd67fb7dc97c7a", "message": "Added support for managed disk diff (#6934)", "committedDate": "2019-12-20T19:00:12Z", "type": "commit"}, {"oid": "8d2ab6ff019bfc08ebc4c7de08d9f1b66707221c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8d2ab6ff019bfc08ebc4c7de08d9f1b66707221c", "message": "Updated versions in feature branch (#6981)", "committedDate": "2019-12-20T20:08:44Z", "type": "commit"}, {"oid": "cd0412cd64fc1ecde150219121df33047d7cd25b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cd0412cd64fc1ecde150219121df33047d7cd25b", "message": "File lease (#6855)", "committedDate": "2019-12-23T17:19:09Z", "type": "commit"}, {"oid": "f82d9bef8704e80bf211888a618c9765f3710000", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f82d9bef8704e80bf211888a618c9765f3710000", "message": "Added support for failed closed handles (#6659)", "committedDate": "2019-12-23T17:44:42Z", "type": "commit"}, {"oid": "0a69d962f835ba717c07555247f6ada4652b5e23", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0a69d962f835ba717c07555247f6ada4652b5e23", "message": "Added support for premium file properties (#6663)", "committedDate": "2019-12-23T17:59:40Z", "type": "commit"}, {"oid": "54d90c527da923273f74cb139c74c6436024a010", "url": "https://github.com/Azure/azure-sdk-for-java/commit/54d90c527da923273f74cb139c74c6436024a010", "message": "Added support for additional start copy parameters (#6673)", "committedDate": "2019-12-23T19:26:51Z", "type": "commit"}, {"oid": "22c154dd6b23fb82b00afa5d98f71ce58280d708", "url": "https://github.com/Azure/azure-sdk-for-java/commit/22c154dd6b23fb82b00afa5d98f71ce58280d708", "message": "Updated file lease doc (#7021)", "committedDate": "2019-12-23T20:43:10Z", "type": "commit"}, {"oid": "b03044fe25bdf457bc90f08c1d7c49b0c01f3ad3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b03044fe25bdf457bc90f08c1d7c49b0c01f3ad3", "message": "Merging master into storage feature branch (#7025)\n\n* Update Tracing README versions (#6642)\r\n\r\n* Changed Datalake to beta instead of preview (#6644)\r\n\r\n* Add maven profile to verify readme (#6625)\r\n\r\n* Add maven profile to verify readme\r\n\r\n* Revert changes to readme to pass the CI pipeline\r\n\r\n* Separate profiles for Windows\r\n\r\n* Workaround template behavior change. (#6652)\r\n\r\nThis commit should only impact live tests which are currently broken. Checking this in as an emergency work around. Might become permanent if this behavior change sticks.\r\n\r\n* Profile activation for verify readme (#6650)\r\n\r\n* Add maven profile to verify readme\r\n\r\n* Revert changes to readme to pass the CI pipeline\r\n\r\n* Separate profiles for Windows\r\n\r\n* Profile activation for verify readme\r\n\r\n* Revert test changes\r\n\r\n* Track 1 data plane dev packages (#6655)\r\n\r\n* Add dev package generation to data plane.\r\n\r\n* Add test skip condition.\r\n\r\n* Cosmos Issue #6240: Port read-my-writes fix from V4 (#6242)\r\n\r\n* Port from v4\r\n\r\n* Corrected package misspelling in log4j.properties and removed System.exit from Main.java\r\n\r\n* Responded to code review comments\r\n\r\n* Cosmos Issue #6253: Port RntbdRequestTimer memory leak fix from V4 (#6254)\r\n\r\n* Port from v4\r\n\r\n* Corrected package misspelling in log4j.properties and removed System.exit from Main.java\r\n\r\n* Port from V4\r\n\r\n* Responded to code review comments\r\n\r\n* Reverting tests.yml file back to master\r\n\r\n* Prevent HttpLoggingPolicy Consuming Body (#6638)\r\n\r\n* Prevent HttpLoggingPolicy from consuming request and response bodies\r\n\r\n* Updated tests to use named ClientLogger and updated tests to use a string converted to bytes\r\n\r\n* Fixing linting issues\r\n\r\n* Remove hard-coded version and name from clients (#6557)\r\n\r\n* Remove hard-coded version and name from clients\r\n\r\n* Excluding beanutils library from commons validator because of security vulnerability (#6649)\r\n\r\n* Exposed default time to live API on CosmosContainerProperties (#6651)\r\n\r\n* Kv keys updates (#6657)\r\n\r\nKv Keys update\r\n\r\n* Kv keys version updates (#6682)\r\n\r\n* API updates\r\n\r\n* samples update\r\n\r\n* API changes\r\n\r\n* sample updates + checkstyle fixes\r\n\r\n* feedback updates\r\n\r\n* compile fix\r\n\r\n* feedback update + sans update + checkstyle fixes\r\n\r\n* api updates\r\n\r\n* feedback updates\r\n\r\n* feedback updates\r\n\r\n* javadoc update\r\n\r\n* checkstyle fix\r\n\r\n* compile error fix\r\n\r\n* code updates\r\n\r\n* remove package-info file\r\n\r\n* feedback + tests update\r\n\r\n* feedback updates\r\n\r\n* remove unwanted jacoco file\r\n\r\n* secret version update\r\n\r\n* version file update\r\n\r\n* pom version updates\r\n\r\n* add tests\r\n\r\n* tests update\r\n\r\n* drop codecs dependency\r\n\r\n* update base 64 usage\r\n\r\n* spotbugs fix\r\n\r\n* feedback update\r\n\r\n* code updates\r\n\r\n* build ifx\r\n\r\n* changelog + tests update\r\n\r\n* keys version updates\r\n\r\n* feedback updates\r\n\r\n* Update package index links in README.md (#6672)\r\n\r\nPackage index is now controlled centrally in the azure-sdk repo\r\nhttps://github.com/Azure/azure-sdk/blob/master/_data/releases/latest/java-packages.csv\r\n\r\n* Revert \"Remove hard-coded version and name from clients (#6557)\" (#6684)\r\n\r\nThis reverts commit 5e37d79a78848e5c50462cf72535c69ad9ae55ef.\r\n\r\n* Update versions of released libraries (#6685)\r\n\r\n* Fixed issue where account SAS does not work on clients (#6601)\r\n\r\n* Introducing Revapi into build system (#6381)\r\n\r\n* Introducing Revapi into build system. Currently it is configured to not fail the build (because it is comparing the 1.0.0-preview.N releases rather than 1.0.0). Once this versioning issue is fixed, we should flip this to fail the build.\r\n\r\n* Add revapi versions to external-dependencies.txt\r\n\r\n* Ignore packages that are under implementation.\r\n\r\n* Fail build if there are API inconsistencies.\r\n\r\n* Add versionFormat string to compare.\r\n\r\n* Skip revapi in azure-core-test\r\n\r\n* Use resource file in sdk-build-tools instead of having to resolve relative path based on pom.\r\n\r\n* Revapi not needed for aggregate report.\r\n\r\n* Storage: regenerate package-2019-06 (#6597)\r\n\r\n* CosmosDB: regenerate package-2019-08-preview (#6628)\r\n\r\n* CosmosDB: regenerate package-2019-08-preview\r\n\r\n* CosmosDB: regenerate package-2019-08-preview\r\n\r\n* Post ga version updates dec2019 (#6706)\r\n\r\n* Update com.azure:azure-security-keyvault-keys version post release\r\n\r\n* Update file versions through the update script\r\n\r\n* Blob Sas (#6409)\r\n\r\n* Add Custom Header - In AddHeaderPolicy and RequestIDPolicy  (#6602)\r\n\r\nNew AddHeadersFromContextPolicy to add multiple headers and values for those headers.\r\nAllowing override header name in RequestIdPolicy.\r\n\r\n* Add Live TestMode and Skip Recording Concepts (#6671)\r\n\r\n* Added TestMode Live, DoNotRecord annotation, and TestContextManager\r\n\r\n* Fix linting issue\r\n\r\n* Updated new constructors to take TestContextManager instead of splayed parameters\r\n\r\n* Updated unit tests based on code changes\r\n\r\n* Add missing dependency comment\r\n\r\n* Fixing linting issues\r\n\r\n* Remove Queue Cryptography Module (#6715)\r\n\r\n* Removed Queue Cryptography references since the module is unused\r\n\r\n* Delete Queue Cryptography POM file\r\n\r\n* Queue, File and Datalake Sas (#6709)\r\n\r\n* Fixed bug where eTag would not deserialize in listPaths (#6723)\r\n\r\n* Fixed parsing of consistency level string value from property bag (#6708)\r\n\r\n* README for samples in Event Hubs (#6710)\r\n\r\n* README for samples in Event Hubs\r\n\r\n* Add impressions\r\n\r\n* Add missing readme sections\r\n\r\n* Update root readme with reference to sample readme\r\n\r\n* init CI pipeline (#6731)\r\n\r\n* init CI pipeline\r\n\r\n* correct module and artifact name\r\n\r\n* Update ci.yml\r\n\r\n* HDInsight: regenerate package-2018-06-preview (#6705)\r\n\r\n* Add missing HTTP request methods to HttpMethod enum (#6729)\r\n\r\n* Add OPTIONS to HttpMethod enum\r\n\r\n* Add all missing HTTP methods\r\n\r\n* Clients fetches module name and version from property file (#6734)\r\n\r\n* Added null value holder change (#6737)\r\n\r\n* [ServiceBus] Minor change to teardown in tests so teatdown doesn't throw exception if setup fails for any reason (#6732)\r\n\r\nMinor change to teardown in tests so teatdown doesn't throw exception if setup fails for any reason\r\n\r\n* Changing dependencies with current version of core, since we added new functionality in core for AddHeadersFromContextPolicy (#6745)\r\n\r\n* Enhance Blob Test Reliability (#6566)\r\n\r\n* Updating tests to enhance reliability\r\n\r\n* Cosmos ChangeFeedProcessor fixes (#6744)\r\n\r\n- fix to terminate the current processing threads when the lease renewal worker thread has failed.\r\n- fix to out of bounds exception when the leases load balancer thread is trying to aquire a lease.\r\n\r\n* Update root readme for December releases (#6749)\r\n\r\n* AutoRest: update autorest.java cmd (#6735)\r\n\r\n* AutoRest: update autorest.java cmd\r\n\r\n* AutoRest: update by review comments\r\n\r\n* AutoRest: restrict version number validation\r\n\r\n* Run live tests on all operating systems (#6668)\r\n\r\n* live tests for all OS\r\n\r\n* Use values from global for Maven options\r\n\r\n* Changes for Cosmos\r\n\r\n* Correctly set the DisplayName\r\n\r\n* set DisplayName part 2\r\n\r\n* adjust spacing in yml\r\n\r\n* set display name\r\n\r\n* Remove the setting of display name to empty\r\n\r\n* Added compiler args to suppress unused warnings in samples and test classes when compiling with Groovy (#6724)\r\n\r\n* Added some tests for making up the test coverage (#6754)\r\n\r\n* Added some tests for make up the logging and FluxUtils coverage\r\n\r\n* Update version tags on tracing readme (#6766)\r\n\r\n* update samples and package versions\r\n\r\n* Revert \"update samples and package versions\"\r\n\r\nThis reverts commit 9e9951bc406cc0152e6b8ed0c46664b42b144c55.\r\n\r\n* update tracing readme\r\n\r\n* update to include md files in version update:\r\n\r\n* Added support for exists method on PathClient (#6767)\r\n\r\n* Ignore null headers and allow full url paths (#6760)\r\n\r\n* Add changelog to artifacts if it exists (#6746)\r\n\r\n* AzConfig: User provided Customized Headers Policy  (#6544)\r\n\r\nAdded support for user-provided customized headers\r\n\r\n* Publish test results even if build is canceled (#6780)\r\n\r\n- If build is cancelled due to agent timeout, some tests results may have already been generated and should still be published\r\n\r\n* More tests on fluxUtil and Base64Util (#6770)\r\n\r\n* Added response decoder configuration to fix max header size issue (#6690)\r\n\r\n* Add eventhub properties to processing spans (#6768)\r\n\r\n* Add \"eng\" folder to core path triggers (#6803)\r\n\r\n- Aligns Java with other languages\r\n\r\n* Added support for ADLS Error Mapping (#6753)\r\n\r\n* Added changeLog for azure-core (#6805)\r\n\r\n* Added changeLog for azure-core\r\n\r\n* Added overloads that do not overwrite by default (#6774)\r\n\r\n* Add connection string null or empty message error (#6811)\r\n\r\n* 'connectionString' cannot be null or empty.\r\n\r\n* Setting selector filter  (#6693)\r\n\r\nAllowed user to define KeyFilter and LabelFilter\r\n\r\n* Fixes wrong property file name with unknown name and unknown version (#6813)\r\n\r\n* fixes wrong property file name and update headers for all json files\r\n\r\n* Shorten tracing span names (#6810)\r\n\r\n* This will snapshot the repo state for analysis if the build fails. (#6826)\r\n\r\n* Capture repo state during build. (#6828)\r\n\r\n* Remove repo capture logic (#6836)\r\n\r\n* Removes the repo capture logic since it is relatively expensive.\r\n\r\n* Move to condition for repo capture so we can do it easily in the future.\r\n\r\n* update service mapper for missing dirs (#6847)\r\n\r\n* Fixed storage flaky live tests (#6677)\r\n\r\n* Change live tests to live mode\r\n\r\n* Fixed the queue and file sas tests\r\n\r\n* Updated release versions to 3.5.0 (#6852)\r\n\r\n* Add managed identity live tests in new e2e module (#6833)\r\n\r\n* Add e2e module\r\n\r\n* Add managed identity e2e test\r\n\r\n* Add e2e module to pom.client.xml\r\n\r\n* Try to fix assume\r\n\r\n* Work around global configuration issue\r\n\r\n* Remove pfx\r\n\r\n* Fix configuration usage\r\n\r\n* Fix dependency version tag\r\n\r\n* Fix dependency version script\r\n\r\n* Fix again\r\n\r\n* Skip key vault tests when env var is missing\r\n\r\n* Check key vault everywhere\r\n\r\n* Fix Event Hubs READMEs (#6849)\r\n\r\n* Move old README into correct directory.\r\n\r\n* Update READMEs for current released versions.\r\n\r\n* Fix readme for track 1\r\n\r\n* Update qpid-proton-j-extensions dependency (#6743)\r\n\r\n* Update to qpid-proton-j-extensions 1.2.2\r\n\r\n* Update module info.\r\n\r\n* Add links on batch send operation in eventhubs (#6773)\r\n\r\n* Add Migration Guide for Event Hubs (#6854)\r\n\r\n* Adding .vscode and .factorypath to gitignore.\r\n\r\n*  Fixing typo in Azure storage migration guide.\r\n\r\n* Adding exception handling and event processor client sample.\r\n\r\n* Adding link to additional samples.\r\n\r\n* Fixed storage flaky live tests Part 2 (#6850)\r\n\r\n* Remove surefire failed test reruns (#6883)\r\n\r\n* Doc index updates (#6871)\r\n\r\n* Set core dep version to 1.1.0 (#6928)\r\n\r\n* Set core dep version to 1.1.0\r\n\r\n* More libs needing unreleased dep core version\r\n\r\n* Prepare Repo for DocWarden Updates  (#6662)\r\n\r\n* Update, docsettings.yml, packages.md, update readme and changelog case.\r\n\r\n* Update docsettings\r\n\r\n* Fix azure-data-appconfigurationchangelog (#6932)\r\n\r\n* KeyVault Certificate client API review consistency update (#6823)\r\n\r\n* Update Certificates library version in README  (#6939)\r\n\r\n* Add readme exclusion for path (#6940)\r\n\r\n* Add exclusion fir missing changelog (#6941)\r\n\r\n* Updated versions to next beta version (#6926)\r\n\r\n* Test against all built (#6927)\r\n\r\n* Test run with everything built from source\r\n\r\n* add missing paren\r\n\r\n* use python not python3 for from source\r\n\r\n* Set return code from pwsh\r\n\r\n* Verify succeeded before running tests\r\n\r\n* Rev up azure-core-test beta after release (#6938)\r\n\r\n* Rev up azure-core-test beta after release\r\n* Release  new  azure-core-test beta\r\n* storage  depend on unreleased version of  azure core test temporarily. will change it back today\r\n\r\n* Update certs version post preview release (#6948)\r\n\r\n* Fix changelog (#6951)\r\n\r\n* Updated storage versions post release (#6953)\r\n\r\n* Fix Java Links in the root README (#6925)\r\n\r\n* Fix Java Links in the root README\r\n\r\n* Update core readme.md link\r\n\r\n* run rel link replace before creating doc index\r\n\r\n* Update for python args quotes problem\r\n\r\n* Update storage-blob changelog (#6974)\r\n\r\n* Configure single shot upload (#6950)\r\n\r\n* Added maximumSingleUploadSize option to ParallelTransferOptions. Started tests\r\n\r\n* Changelog\r\n\r\n* Added tests\r\n\r\n* Changelog update\r\n\r\n* More Robust BlobBatch Implementation (#6882)\r\n\r\n* Added unit tests for single operation failing and submitting batch multiple times\r\n\r\n* More robust Blob Batch implementation\r\n\r\n* Additional comments and change to use monoError instead of Mono.error\r\n\r\n* Text analytics Preview 1  (#6161)\r\n\r\nHave a preview version of Text Analytics\r\n\r\n* Policy: generate package-2019-09 (#6630)\r\n\r\n* Policy: generate package-2019-09\r\n\r\n* Policy: add new module for pom.mgmt.xml\r\n\r\n* increase and verify version functions (#6980)\r\n\r\n* increase and verify version functions\r\n\r\n* Update for feedback\r\n\r\n* actually remove the unnamed anchored regex this time\r\n\r\n* Updates Event Hubs samples (#6986)\r\n\r\n* Update ConsumeEvents sample.\r\n\r\n* Add producer samples for web sockets and proxy.\r\n\r\n* Add sample for publishing streams of events.\r\n\r\n* Rename EventProcessor -> EventProcessorClient.\r\n\r\n* Adding EPH sample.\r\n\r\n* Update READMEs. Remove dead links.\r\n\r\n* Update error handling logic and add tests for EPC (#6978)\r\n\r\n* Update error handling logic and add tests for EPC\r\n\r\n* Fix unit tests\r\n\r\n* Add message to exceptions and make initial position exclusive\r\n\r\n* Revert changes to make event position exclusive\r\n\r\n* Correct documentation of `EventPosition.FromOffset` (#6990)\r\n\r\nIn #6986 we changed the semantics of `EventPosition.FromOffset` to\r\nreturn an exclusive instead of inclusive offset. However, we missed\r\nupdating the documentation for the method to match the new semantics.\r\n\r\nThis corrects that issue.\r\n\r\n* Remove isInclusive testcase for offset (#6991)\r\n\r\n* Changes for unreleased dependencies (#6989)\r\n\r\n* Changes for unreleased dependencies\r\n\r\n* Forward slashes in the use case commands in set_version\r\n\r\n* [Event Hubs] Use code snippets from .java files in README (#6993)\r\n\r\n* Use code snippets from .java files in README\r\n\r\n* fix path\r\n\r\n* Fix checkstyle\r\n\r\n* Removed master line from versions\r\n\r\n* Added overloads for protected methods\r\n\r\n* Added blob SAS test recordings\r\n\r\n* Added file share SAS recordings\r\n\r\n* Added queue SAS test recordings\r\n\r\n* Added datalake SAS tests\r\n\r\n* Fixed account sas file share test\r\n\r\n* Added tests with user delegation\r\n\r\nCo-authored-by: Alan Zimmer <48699787+alzimmermsft@users.noreply.github.com>\r\nCo-authored-by: Srikanta <51379715+srnagar@users.noreply.github.com>\r\nCo-authored-by: Mitch Denny <mitch@mitchdenny.com>\r\nCo-authored-by: David Noble <David.Noble@microsoft.com>\r\nCo-authored-by: Sima Zhu <48036328+sima-zhu@users.noreply.github.com>\r\nCo-authored-by: Kushagra Thapar <kushuthapar@gmail.com>\r\nCo-authored-by: Vinay Gera <vigera@microsoft.com>\r\nCo-authored-by: Wes Haggard <weshaggard@users.noreply.github.com>\r\nCo-authored-by: Jonathan Giles <jonathan@jonathangiles.net>\r\nCo-authored-by: Chuang <54572251+xccc-msft@users.noreply.github.com>\r\nCo-authored-by: James Suplizio <jasupliz@microsoft.com>\r\nCo-authored-by: Hemant Tanwar <hemant_tanwar@hotmail.com>\r\nCo-authored-by: Shawn Fang <45607042+mssfang@users.noreply.github.com>\r\nCo-authored-by: Vijaya Gopal Yarramneni <ygopal@gmail.com>\r\nCo-authored-by: Milis <adrianmi@microsoft.com>\r\nCo-authored-by: Sameeksha Vaity <sameeksha.v91@gmail.com>\r\nCo-authored-by: Jianghao Lu <jianghaolu@users.noreply.github.com>\r\nCo-authored-by: Mike Harder <mharder@microsoft.com>\r\nCo-authored-by: Connie Yau <conniey@microsoft.com>\r\nCo-authored-by: Chidozie Ononiwu <31145988+chidozieononiwu@users.noreply.github.com>\r\nCo-authored-by: Rick Ley <frley@microsoft.com>\r\nCo-authored-by: Matt Ellis <matt.ellis@microsoft.com>", "committedDate": "2019-12-27T00:08:56Z", "type": "commit"}, {"oid": "303bb3a5a620215e974301454129ac54602cef33", "url": "https://github.com/Azure/azure-sdk-for-java/commit/303bb3a5a620215e974301454129ac54602cef33", "message": "Storage/feature branch merge with master (#7276)\n\n* Update Tracing README versions (#6642)\r\n\r\n* Changed Datalake to beta instead of preview (#6644)\r\n\r\n* Add maven profile to verify readme (#6625)\r\n\r\n* Add maven profile to verify readme\r\n\r\n* Revert changes to readme to pass the CI pipeline\r\n\r\n* Separate profiles for Windows\r\n\r\n* Workaround template behavior change. (#6652)\r\n\r\nThis commit should only impact live tests which are currently broken. Checking this in as an emergency work around. Might become permanent if this behavior change sticks.\r\n\r\n* Profile activation for verify readme (#6650)\r\n\r\n* Add maven profile to verify readme\r\n\r\n* Revert changes to readme to pass the CI pipeline\r\n\r\n* Separate profiles for Windows\r\n\r\n* Profile activation for verify readme\r\n\r\n* Revert test changes\r\n\r\n* Track 1 data plane dev packages (#6655)\r\n\r\n* Add dev package generation to data plane.\r\n\r\n* Add test skip condition.\r\n\r\n* Cosmos Issue #6240: Port read-my-writes fix from V4 (#6242)\r\n\r\n* Port from v4\r\n\r\n* Corrected package misspelling in log4j.properties and removed System.exit from Main.java\r\n\r\n* Responded to code review comments\r\n\r\n* Cosmos Issue #6253: Port RntbdRequestTimer memory leak fix from V4 (#6254)\r\n\r\n* Port from v4\r\n\r\n* Corrected package misspelling in log4j.properties and removed System.exit from Main.java\r\n\r\n* Port from V4\r\n\r\n* Responded to code review comments\r\n\r\n* Reverting tests.yml file back to master\r\n\r\n* Prevent HttpLoggingPolicy Consuming Body (#6638)\r\n\r\n* Prevent HttpLoggingPolicy from consuming request and response bodies\r\n\r\n* Updated tests to use named ClientLogger and updated tests to use a string converted to bytes\r\n\r\n* Fixing linting issues\r\n\r\n* Remove hard-coded version and name from clients (#6557)\r\n\r\n* Remove hard-coded version and name from clients\r\n\r\n* Excluding beanutils library from commons validator because of security vulnerability (#6649)\r\n\r\n* Exposed default time to live API on CosmosContainerProperties (#6651)\r\n\r\n* Kv keys updates (#6657)\r\n\r\nKv Keys update\r\n\r\n* Kv keys version updates (#6682)\r\n\r\n* API updates\r\n\r\n* samples update\r\n\r\n* API changes\r\n\r\n* sample updates + checkstyle fixes\r\n\r\n* feedback updates\r\n\r\n* compile fix\r\n\r\n* feedback update + sans update + checkstyle fixes\r\n\r\n* api updates\r\n\r\n* feedback updates\r\n\r\n* feedback updates\r\n\r\n* javadoc update\r\n\r\n* checkstyle fix\r\n\r\n* compile error fix\r\n\r\n* code updates\r\n\r\n* remove package-info file\r\n\r\n* feedback + tests update\r\n\r\n* feedback updates\r\n\r\n* remove unwanted jacoco file\r\n\r\n* secret version update\r\n\r\n* version file update\r\n\r\n* pom version updates\r\n\r\n* add tests\r\n\r\n* tests update\r\n\r\n* drop codecs dependency\r\n\r\n* update base 64 usage\r\n\r\n* spotbugs fix\r\n\r\n* feedback update\r\n\r\n* code updates\r\n\r\n* build ifx\r\n\r\n* changelog + tests update\r\n\r\n* keys version updates\r\n\r\n* feedback updates\r\n\r\n* Update package index links in README.md (#6672)\r\n\r\nPackage index is now controlled centrally in the azure-sdk repo\r\nhttps://github.com/Azure/azure-sdk/blob/master/_data/releases/latest/java-packages.csv\r\n\r\n* Revert \"Remove hard-coded version and name from clients (#6557)\" (#6684)\r\n\r\nThis reverts commit 5e37d79a78848e5c50462cf72535c69ad9ae55ef.\r\n\r\n* Update versions of released libraries (#6685)\r\n\r\n* Fixed issue where account SAS does not work on clients (#6601)\r\n\r\n* Introducing Revapi into build system (#6381)\r\n\r\n* Introducing Revapi into build system. Currently it is configured to not fail the build (because it is comparing the 1.0.0-preview.N releases rather than 1.0.0). Once this versioning issue is fixed, we should flip this to fail the build.\r\n\r\n* Add revapi versions to external-dependencies.txt\r\n\r\n* Ignore packages that are under implementation.\r\n\r\n* Fail build if there are API inconsistencies.\r\n\r\n* Add versionFormat string to compare.\r\n\r\n* Skip revapi in azure-core-test\r\n\r\n* Use resource file in sdk-build-tools instead of having to resolve relative path based on pom.\r\n\r\n* Revapi not needed for aggregate report.\r\n\r\n* Storage: regenerate package-2019-06 (#6597)\r\n\r\n* CosmosDB: regenerate package-2019-08-preview (#6628)\r\n\r\n* CosmosDB: regenerate package-2019-08-preview\r\n\r\n* CosmosDB: regenerate package-2019-08-preview\r\n\r\n* Post ga version updates dec2019 (#6706)\r\n\r\n* Update com.azure:azure-security-keyvault-keys version post release\r\n\r\n* Update file versions through the update script\r\n\r\n* Blob Sas (#6409)\r\n\r\n* Add Custom Header - In AddHeaderPolicy and RequestIDPolicy  (#6602)\r\n\r\nNew AddHeadersFromContextPolicy to add multiple headers and values for those headers.\r\nAllowing override header name in RequestIdPolicy.\r\n\r\n* Add Live TestMode and Skip Recording Concepts (#6671)\r\n\r\n* Added TestMode Live, DoNotRecord annotation, and TestContextManager\r\n\r\n* Fix linting issue\r\n\r\n* Updated new constructors to take TestContextManager instead of splayed parameters\r\n\r\n* Updated unit tests based on code changes\r\n\r\n* Add missing dependency comment\r\n\r\n* Fixing linting issues\r\n\r\n* Remove Queue Cryptography Module (#6715)\r\n\r\n* Removed Queue Cryptography references since the module is unused\r\n\r\n* Delete Queue Cryptography POM file\r\n\r\n* Queue, File and Datalake Sas (#6709)\r\n\r\n* Fixed bug where eTag would not deserialize in listPaths (#6723)\r\n\r\n* Fixed parsing of consistency level string value from property bag (#6708)\r\n\r\n* README for samples in Event Hubs (#6710)\r\n\r\n* README for samples in Event Hubs\r\n\r\n* Add impressions\r\n\r\n* Add missing readme sections\r\n\r\n* Update root readme with reference to sample readme\r\n\r\n* init CI pipeline (#6731)\r\n\r\n* init CI pipeline\r\n\r\n* correct module and artifact name\r\n\r\n* Update ci.yml\r\n\r\n* HDInsight: regenerate package-2018-06-preview (#6705)\r\n\r\n* Add missing HTTP request methods to HttpMethod enum (#6729)\r\n\r\n* Add OPTIONS to HttpMethod enum\r\n\r\n* Add all missing HTTP methods\r\n\r\n* Clients fetches module name and version from property file (#6734)\r\n\r\n* Added null value holder change (#6737)\r\n\r\n* [ServiceBus] Minor change to teardown in tests so teatdown doesn't throw exception if setup fails for any reason (#6732)\r\n\r\nMinor change to teardown in tests so teatdown doesn't throw exception if setup fails for any reason\r\n\r\n* Changing dependencies with current version of core, since we added new functionality in core for AddHeadersFromContextPolicy (#6745)\r\n\r\n* Enhance Blob Test Reliability (#6566)\r\n\r\n* Updating tests to enhance reliability\r\n\r\n* Cosmos ChangeFeedProcessor fixes (#6744)\r\n\r\n- fix to terminate the current processing threads when the lease renewal worker thread has failed.\r\n- fix to out of bounds exception when the leases load balancer thread is trying to aquire a lease.\r\n\r\n* Update root readme for December releases (#6749)\r\n\r\n* AutoRest: update autorest.java cmd (#6735)\r\n\r\n* AutoRest: update autorest.java cmd\r\n\r\n* AutoRest: update by review comments\r\n\r\n* AutoRest: restrict version number validation\r\n\r\n* Run live tests on all operating systems (#6668)\r\n\r\n* live tests for all OS\r\n\r\n* Use values from global for Maven options\r\n\r\n* Changes for Cosmos\r\n\r\n* Correctly set the DisplayName\r\n\r\n* set DisplayName part 2\r\n\r\n* adjust spacing in yml\r\n\r\n* set display name\r\n\r\n* Remove the setting of display name to empty\r\n\r\n* Added compiler args to suppress unused warnings in samples and test classes when compiling with Groovy (#6724)\r\n\r\n* Added some tests for making up the test coverage (#6754)\r\n\r\n* Added some tests for make up the logging and FluxUtils coverage\r\n\r\n* Update version tags on tracing readme (#6766)\r\n\r\n* update samples and package versions\r\n\r\n* Revert \"update samples and package versions\"\r\n\r\nThis reverts commit 9e9951bc406cc0152e6b8ed0c46664b42b144c55.\r\n\r\n* update tracing readme\r\n\r\n* update to include md files in version update:\r\n\r\n* Added support for exists method on PathClient (#6767)\r\n\r\n* Ignore null headers and allow full url paths (#6760)\r\n\r\n* Add changelog to artifacts if it exists (#6746)\r\n\r\n* AzConfig: User provided Customized Headers Policy  (#6544)\r\n\r\nAdded support for user-provided customized headers\r\n\r\n* Publish test results even if build is canceled (#6780)\r\n\r\n- If build is cancelled due to agent timeout, some tests results may have already been generated and should still be published\r\n\r\n* More tests on fluxUtil and Base64Util (#6770)\r\n\r\n* Added response decoder configuration to fix max header size issue (#6690)\r\n\r\n* Add eventhub properties to processing spans (#6768)\r\n\r\n* Add \"eng\" folder to core path triggers (#6803)\r\n\r\n- Aligns Java with other languages\r\n\r\n* Added support for ADLS Error Mapping (#6753)\r\n\r\n* Added changeLog for azure-core (#6805)\r\n\r\n* Added changeLog for azure-core\r\n\r\n* Added overloads that do not overwrite by default (#6774)\r\n\r\n* Add connection string null or empty message error (#6811)\r\n\r\n* 'connectionString' cannot be null or empty.\r\n\r\n* Setting selector filter  (#6693)\r\n\r\nAllowed user to define KeyFilter and LabelFilter\r\n\r\n* Fixes wrong property file name with unknown name and unknown version (#6813)\r\n\r\n* fixes wrong property file name and update headers for all json files\r\n\r\n* Shorten tracing span names (#6810)\r\n\r\n* This will snapshot the repo state for analysis if the build fails. (#6826)\r\n\r\n* Capture repo state during build. (#6828)\r\n\r\n* Remove repo capture logic (#6836)\r\n\r\n* Removes the repo capture logic since it is relatively expensive.\r\n\r\n* Move to condition for repo capture so we can do it easily in the future.\r\n\r\n* update service mapper for missing dirs (#6847)\r\n\r\n* Fixed storage flaky live tests (#6677)\r\n\r\n* Change live tests to live mode\r\n\r\n* Fixed the queue and file sas tests\r\n\r\n* Updated release versions to 3.5.0 (#6852)\r\n\r\n* Add managed identity live tests in new e2e module (#6833)\r\n\r\n* Add e2e module\r\n\r\n* Add managed identity e2e test\r\n\r\n* Add e2e module to pom.client.xml\r\n\r\n* Try to fix assume\r\n\r\n* Work around global configuration issue\r\n\r\n* Remove pfx\r\n\r\n* Fix configuration usage\r\n\r\n* Fix dependency version tag\r\n\r\n* Fix dependency version script\r\n\r\n* Fix again\r\n\r\n* Skip key vault tests when env var is missing\r\n\r\n* Check key vault everywhere\r\n\r\n* Fix Event Hubs READMEs (#6849)\r\n\r\n* Move old README into correct directory.\r\n\r\n* Update READMEs for current released versions.\r\n\r\n* Fix readme for track 1\r\n\r\n* Update qpid-proton-j-extensions dependency (#6743)\r\n\r\n* Update to qpid-proton-j-extensions 1.2.2\r\n\r\n* Update module info.\r\n\r\n* Add links on batch send operation in eventhubs (#6773)\r\n\r\n* Add Migration Guide for Event Hubs (#6854)\r\n\r\n* Adding .vscode and .factorypath to gitignore.\r\n\r\n*  Fixing typo in Azure storage migration guide.\r\n\r\n* Adding exception handling and event processor client sample.\r\n\r\n* Adding link to additional samples.\r\n\r\n* Fixed storage flaky live tests Part 2 (#6850)\r\n\r\n* Remove surefire failed test reruns (#6883)\r\n\r\n* Doc index updates (#6871)\r\n\r\n* Set core dep version to 1.1.0 (#6928)\r\n\r\n* Set core dep version to 1.1.0\r\n\r\n* More libs needing unreleased dep core version\r\n\r\n* Prepare Repo for DocWarden Updates  (#6662)\r\n\r\n* Update, docsettings.yml, packages.md, update readme and changelog case.\r\n\r\n* Update docsettings\r\n\r\n* Fix azure-data-appconfigurationchangelog (#6932)\r\n\r\n* KeyVault Certificate client API review consistency update (#6823)\r\n\r\n* Update Certificates library version in README  (#6939)\r\n\r\n* Add readme exclusion for path (#6940)\r\n\r\n* Add exclusion fir missing changelog (#6941)\r\n\r\n* Updated versions to next beta version (#6926)\r\n\r\n* Test against all built (#6927)\r\n\r\n* Test run with everything built from source\r\n\r\n* add missing paren\r\n\r\n* use python not python3 for from source\r\n\r\n* Set return code from pwsh\r\n\r\n* Verify succeeded before running tests\r\n\r\n* Rev up azure-core-test beta after release (#6938)\r\n\r\n* Rev up azure-core-test beta after release\r\n* Release  new  azure-core-test beta\r\n* storage  depend on unreleased version of  azure core test temporarily. will change it back today\r\n\r\n* Update certs version post preview release (#6948)\r\n\r\n* Fix changelog (#6951)\r\n\r\n* Updated storage versions post release (#6953)\r\n\r\n* Fix Java Links in the root README (#6925)\r\n\r\n* Fix Java Links in the root README\r\n\r\n* Update core readme.md link\r\n\r\n* run rel link replace before creating doc index\r\n\r\n* Update for python args quotes problem\r\n\r\n* Update storage-blob changelog (#6974)\r\n\r\n* Configure single shot upload (#6950)\r\n\r\n* Added maximumSingleUploadSize option to ParallelTransferOptions. Started tests\r\n\r\n* Changelog\r\n\r\n* Added tests\r\n\r\n* Changelog update\r\n\r\n* More Robust BlobBatch Implementation (#6882)\r\n\r\n* Added unit tests for single operation failing and submitting batch multiple times\r\n\r\n* More robust Blob Batch implementation\r\n\r\n* Additional comments and change to use monoError instead of Mono.error\r\n\r\n* Text analytics Preview 1  (#6161)\r\n\r\nHave a preview version of Text Analytics\r\n\r\n* Policy: generate package-2019-09 (#6630)\r\n\r\n* Policy: generate package-2019-09\r\n\r\n* Policy: add new module for pom.mgmt.xml\r\n\r\n* increase and verify version functions (#6980)\r\n\r\n* increase and verify version functions\r\n\r\n* Update for feedback\r\n\r\n* actually remove the unnamed anchored regex this time\r\n\r\n* Updates Event Hubs samples (#6986)\r\n\r\n* Update ConsumeEvents sample.\r\n\r\n* Add producer samples for web sockets and proxy.\r\n\r\n* Add sample for publishing streams of events.\r\n\r\n* Rename EventProcessor -> EventProcessorClient.\r\n\r\n* Adding EPH sample.\r\n\r\n* Update READMEs. Remove dead links.\r\n\r\n* Update error handling logic and add tests for EPC (#6978)\r\n\r\n* Update error handling logic and add tests for EPC\r\n\r\n* Fix unit tests\r\n\r\n* Add message to exceptions and make initial position exclusive\r\n\r\n* Revert changes to make event position exclusive\r\n\r\n* Correct documentation of `EventPosition.FromOffset` (#6990)\r\n\r\nIn #6986 we changed the semantics of `EventPosition.FromOffset` to\r\nreturn an exclusive instead of inclusive offset. However, we missed\r\nupdating the documentation for the method to match the new semantics.\r\n\r\nThis corrects that issue.\r\n\r\n* Remove isInclusive testcase for offset (#6991)\r\n\r\n* Changes for unreleased dependencies (#6989)\r\n\r\n* Changes for unreleased dependencies\r\n\r\n* Forward slashes in the use case commands in set_version\r\n\r\n* [Event Hubs] Use code snippets from .java files in README (#6993)\r\n\r\n* Use code snippets from .java files in README\r\n\r\n* fix path\r\n\r\n* Fix checkstyle\r\n\r\n* Media Services: generate 2018 07 01 (#7053)\r\n\r\n* Media Services: generate 2018 07 01\r\n\r\n* feat: change version\r\n\r\n* remove duplicate version (#7055)\r\n\r\n* Add JUnit engine dependency to run unit tests for Text Analytics (#7052)\r\n\r\n* Update for Disabled tests in Text Analytics (#7061)\r\n\r\n* readme updates (#7019)\r\n\r\n* readme uodates\r\n\r\n* update correct link for API doc\r\n\r\n* key concept\r\n\r\n* update sample links\r\n\r\n* sample fixes\r\n\r\n* Added ability to overwrite for download to file (#6994)\r\n\r\n* Changing the version of azure client authentication library dependency (#6987)\r\n\r\n* Changing the version of azure client authentication library dependency. Need this to solve a compile warning.\r\n\r\n* Correcting version change in external dependencies.\r\n\r\n* Split Text Analytics to function based package private clients (#7050)\r\n\r\n* ChangeLog updates for core modules (#7066)\r\n\r\n* Net App: generate 2019 10 01 (#7088)\r\n\r\n* Net App: generate 2019 10 01\r\n\r\n* fix: add module in pom.mgmt.xml\r\n\r\n* Unit tests for user error handler (#7048)\r\n\r\n* User error tests\r\n\r\n* Update unit tes\r\n\r\n* Use jdk 8 methods\r\n\r\n* Add unit tests\r\n\r\n* Move version and product name from amqp to event hubs library (#7092)\r\n\r\n* Move version and product name from amqp to event hubs library\r\n\r\n* Update AMQP library pass user agent info from client library\r\n\r\n* Fix checkstyle\r\n\r\n* January release versions for azure-core - getting ready (#7040)\r\n\r\n* January release versions update for azure-core only. Also have README, CHANGELOG updates.\r\n\r\n* draft to update contributing for updated versioning (#7093)\r\n\r\n* draft to update contributing for updated versioning\r\n\r\n* update a couple of missed write calls to output errors in red\r\n\r\n* Update for feedback\r\n\r\n* Update for feedback, part 2\r\n\r\n* Added async samples and refactored sync samples (#7073)\r\n\r\n* add async samples and refactor sync samples\r\n\r\n* Initial update for January 2020 release (#7098)\r\n\r\nUpdate old November and December references to January.\r\n\r\nA second PR will be needed to update all links to the latest README.md Tags next week\r\n\r\n* AAD sample and README revised, and correct indentation (#7074)\r\n\r\n* revised aad sample and readme\r\n\r\n* indentation\r\n\r\n* add ReadmeSamples and update readme automatically\r\n\r\n* fixes spotbugs\r\n\r\n* try catch final revised\r\n\r\n* Doc Index Generation Clean up (#7102)\r\n\r\n* BlobOutputStream using BufferedUpload (#7067)\r\n\r\n* core interdependencies should be using current (#7110)\r\n\r\n* Added a package for Java nio implementation (#7105)\r\n\r\n* Added a package for Java nio implementation\r\n\r\n* Corrected version number\r\n\r\n* cleanup\r\n\r\n* PR feedback\r\n\r\n* docsettings and empty class for compiling\r\n\r\n* Javadocs\r\n\r\n* Port from v2.6 | Default Direct TCP Options feature to v3 (#7123)\r\n\r\n* Reactor netty connection pooling (#7130)\r\n\r\n* Added some logging around open connections\r\n\r\n* Removed extra logging\r\n\r\n* Removed dispose calls to re-use connection\r\n\r\n* Removed empty close method\r\n\r\n* fix parent tag validation (#7141)\r\n\r\n* KV-Keys code update (#7075)\r\n\r\nKV keys code update.\r\n\r\n* changing previously missed readme (#7114)\r\n\r\n* connectionString() method should throw IllegalArgurmentException (#7121)\r\n\r\n* added throw IllegalArgException\r\n\r\n* add release info for 2020 January (#7116)\r\n\r\n* add release info for 2020 January\r\n\r\n* connection string\r\n\r\n* connection string changelog\r\n\r\n* Use standard scheduler and dispose of Integration test one (#7127)\r\n\r\n* Use standard scheduler and dispose of it.\r\n\r\n* Using elastic scheduler.\r\n\r\n* Update Event Hubs and azure-core-amqp current versions and CHANGELOG to GA (#7100)\r\n\r\n* Remove version_client_java_files.\r\n\r\n* Update current-version to GA for Event Hubs.\r\n\r\n* Update README files with versions.\r\n\r\n* Updating azure-core-amqp CHANGELOG\r\n\r\n* Update Event Hubs changelog.\r\n\r\n* Fix error in update_version script since files.txt is removed.\r\n\r\n* Fix dependency versions for azure-core-amqp.\r\n\r\n* Update azure-messaging-eventhubs to use correct pom.\r\n\r\n* Print out test name before running test (#7109)\r\n\r\n* Cosmosdb release 3.6.0-beta.1 (#7146)\r\n\r\n* Updated release versions to 3.6.0-SNAPSHOT\r\n\r\n* Updated snapshot to beta.1 suggested by azure core team\r\n\r\n* Updated versions to correct dependency and current version. Added helpful comments in version_data.txt file\r\n\r\n* Added canLogAtLevel API in logging. (#6886)\r\n\r\n* Added canLogAtLevel API in logging.\r\n\r\n* Inject codesnippets for readme, update changelog Text Analytics (#7118)\r\n\r\n* Update AzConfig release version to 1.0.1 (#7151)\r\n\r\n* update release version\r\n\r\n* Code Owners for Text Analytics (#7160)\r\n\r\n* Code owners for Text Analytics\r\n\r\n* Fix spacing\r\n\r\n* Additional spacing fixes\r\n\r\n* Last of the spacing fixes\r\n\r\n* release update and minor fix (#7161)\r\n\r\n* [eventhubs] Add a note about Roles for AAD Auth (#7157)\r\n\r\nAdd a small note to the `README.md` which notes that when using AAD that\r\nyou need to assign a specific role to your principal in order to access\r\nEvent Hubs.\r\n\r\n* Updated changelog and versions post release (#7164)\r\n\r\n* Updated changelog and versions post release\r\n\r\n* Updated comment in version_data.txt file\r\n\r\n* Added basic CI file for spring boot. (#7196)\r\n\r\n* Policy Insights: generate 2019 10 01 (#6793)\r\n\r\n* policyinsights: generate 2019 10 01\r\n\r\n* fix: stage name error\r\n\r\n* fix: add module in pom.mgmt.xml\r\n\r\n* IoT Central: generate 2018 09 01 (#6792)\r\n\r\n* IoT Central: generate 2018 09 01\r\n\r\n* change version in pom to match release\r\n\r\n* feat: change version to 1.0.0 according to service team\r\n\r\n* Storage Release Version Update (#7155)\r\n\r\n* Version up after azure core release.  (#7163)\r\n\r\n* Version up after azure core release. Validate via pom_file_version_scanner.ps1\r\n\r\n* reming version up in README,  since they are not released yet.\r\n\r\n* up core test ver\r\n\r\n* review comments\r\n\r\n* update_versions.py fix for update-type all (#7231)\r\n\r\n* update_versions.py fix for update-type all\r\n* fix spacing in .yml file\r\n\r\n* update release date to current date (#7235)\r\n\r\n* KV version updates Jan 2020 (#7144)\r\n\r\nUpdate KV versions.\r\n\r\n* Improve logging and update consumer close logic (#7175)\r\n\r\n* Improve logging and update consumer close logic\r\n\r\n* Update localization text message\r\n\r\n* Fix unit test\r\n\r\n* Fix checkpointstore tests\r\n\r\n* Update identity for 1.0.2 (#7104)\r\n\r\n* Update identity change log for 1.0.2\r\n\r\n* Update identity pom version to 1.0.2\r\n\r\n* Recreating connections on transient failures (#7090)\r\n\r\n* Adding EventHubConnectionProcessor.\r\n\r\n* Add tests for fetching new connection.\r\n\r\n* Add tests to ensure on error conditions.\r\n\r\n* Remove circuar dependency on EventHubConnection from EventHubConnectionProcessor\r\n\r\n* Update AmqpConnection interface to create send and receive links.\r\n\r\n* Fixing errors in ConnectionProcessor and update ReactorAmqpConnection to keep track of send links.\r\n\r\n* Removing EventHubConnection.\r\n\r\n* Update clients to use ConnectionProcessor.\r\n\r\n* Fixing EHubClientBuilder to repeat the mono, so we have a potentially infinite stream of connections.\r\n\r\n* Add test to verify that on non-transient errors, the connection is not revived.\r\n\r\n* Delay retrying EventHubConnection creation on a transient error.\r\n\r\n* Consolidate request from upstream for new connection.\r\n\r\n* Not requesting new connection unless needed.\r\n\r\n* No, really fix the script this time (#7239)\r\n\r\n* README Fixes : Fixing links to sdk libraries  (#7236)\r\n\r\n* Fixing links to sdk libraries, moving them to githubio release page\r\n\r\n* Update identity to 1.0.2 everywhere (#7244)\r\n\r\n* KV changelog updates (#7176)\r\n\r\nKV changelog updates.\r\n\r\n* Fixes NullReferenceException when using long running producer (#7166)\r\n\r\n* Fixing potential NPE when token managers are created multiple times.\r\n\r\n* Fix test assertions.\r\n\r\n* Add test for provider.\r\n\r\nCo-authored-by: Alan Zimmer <48699787+alzimmermsft@users.noreply.github.com>\r\nCo-authored-by: Srikanta <51379715+srnagar@users.noreply.github.com>\r\nCo-authored-by: Mitch Denny <mitch@mitchdenny.com>\r\nCo-authored-by: David Noble <David.Noble@microsoft.com>\r\nCo-authored-by: Sima Zhu <48036328+sima-zhu@users.noreply.github.com>\r\nCo-authored-by: Kushagra Thapar <kushuthapar@gmail.com>\r\nCo-authored-by: Vinay Gera <vigera@microsoft.com>\r\nCo-authored-by: Wes Haggard <weshaggard@users.noreply.github.com>\r\nCo-authored-by: Jonathan Giles <jonathan@jonathangiles.net>\r\nCo-authored-by: Chuang <54572251+xccc-msft@users.noreply.github.com>\r\nCo-authored-by: James Suplizio <jasupliz@microsoft.com>\r\nCo-authored-by: Hemant Tanwar <hemant_tanwar@hotmail.com>\r\nCo-authored-by: Shawn Fang <45607042+mssfang@users.noreply.github.com>\r\nCo-authored-by: Vijaya Gopal Yarramneni <ygopal@gmail.com>\r\nCo-authored-by: Milis <adrianmi@microsoft.com>\r\nCo-authored-by: Sameeksha Vaity <sameeksha.v91@gmail.com>\r\nCo-authored-by: Jianghao Lu <jianghaolu@users.noreply.github.com>\r\nCo-authored-by: Mike Harder <mharder@microsoft.com>\r\nCo-authored-by: Connie Yau <conniey@microsoft.com>\r\nCo-authored-by: Chidozie Ononiwu <31145988+chidozieononiwu@users.noreply.github.com>\r\nCo-authored-by: Rick Ley <frley@microsoft.com>\r\nCo-authored-by: Matt Ellis <matt.ellis@microsoft.com>\r\nCo-authored-by: Tanyi Chen <chentanyi@gmail.com>\r\nCo-authored-by: Josh Free <joshfree@users.noreply.github.com>", "committedDate": "2020-01-08T20:08:01Z", "type": "commit"}, {"oid": "aa88f88f98d88677a8d081efc05eb07471d45fe4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/aa88f88f98d88677a8d081efc05eb07471d45fe4", "message": "Added version checking for new blob and file APIs (#7312)", "committedDate": "2020-01-14T20:49:24Z", "type": "commit"}, {"oid": "0c3f49a567675617a050353d1e997bdb998d7107", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0c3f49a567675617a050353d1e997bdb998d7107", "message": "Merge branch 'master' into storage/mergeWithMaster", "committedDate": "2020-01-21T20:11:46Z", "type": "commit"}, {"oid": "32d1eec4f43e4098da69139759085c70d3fb4963", "url": "https://github.com/Azure/azure-sdk-for-java/commit/32d1eec4f43e4098da69139759085c70d3fb4963", "message": "Updated checkstyle suppressions", "committedDate": "2020-01-21T21:47:26Z", "type": "commit"}, {"oid": "d8d812c19c1c0a9c4f8c5683d3ec2948d44649f7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d8d812c19c1c0a9c4f8c5683d3ec2948d44649f7", "message": "Fixed some code snippets", "committedDate": "2020-01-21T22:26:24Z", "type": "commit"}, {"oid": "05f7463edd79de11eeb5cd043235b3843c700aee", "url": "https://github.com/Azure/azure-sdk-for-java/commit/05f7463edd79de11eeb5cd043235b3843c700aee", "message": "Add opens specialized", "committedDate": "2020-01-21T22:53:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1NDE0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371454146", "bodyText": "@alzimmermsft It might be worth considering a convenience method in azure-core that does this in a more readable and less error-prone fashion.", "author": "JonathanGiles", "createdAt": "2020-01-27T20:03:22Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobServiceVersionPolicy.java", "diffHunk": "@@ -0,0 +1,61 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.storage.blob;\n+\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipelineCallContext;\n+import com.azure.core.http.HttpPipelineNextPolicy;\n+import com.azure.core.http.HttpResponse;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.storage.common.implementation.Constants;\n+import reactor.core.publisher.Mono;\n+\n+import static com.azure.storage.common.implementation.StorageImplUtils.throwIfContainsHeader;\n+\n+/**\n+ * This policy prevents headers and query parameters introduced in new service versions are not accidentally sent when\n+ * the intended service version is older.\n+ */\n+public class BlobServiceVersionPolicy implements HttpPipelinePolicy {\n+\n+    private static final String ANY_BLOB_API = \"any blob API\";\n+    private static final String CREATE_CONTAINER = \"create container\";\n+\n+    @Override\n+    public Mono<HttpResponse> process(HttpPipelineCallContext context, HttpPipelineNextPolicy next) {\n+        HttpHeaders requestHeaders = context.getHttpRequest().getHeaders();\n+        BlobServiceVersion serviceVersion = toServiceVersion(\n+            requestHeaders.getValue(Constants.HeaderConstants.SERVICE_VERSION));\n+\n+        if (serviceVersion.ordinal() == BlobServiceVersion.getLatest().ordinal()) {\n+            return next.process();\n+        }\n+\n+        // 2019_07_07 check\n+        if (serviceVersion.ordinal() < BlobServiceVersion.V2019_07_07.ordinal()) {", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzM5MTc0OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r377391748", "bodyText": "this has been removed", "author": "gapra-msft", "createdAt": "2020-02-11T00:13:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1NDE0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1ODU1MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371458550", "bodyText": "This change doesn't make sense to me - you're no longer calling this, so you're creating an HttpPipeline but not using it?", "author": "JonathanGiles", "createdAt": "2020-01-27T20:13:03Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/implementation/AzureBlobStorageImpl.java", "diffHunk": "@@ -203,12 +203,7 @@ public BlockBlobsImpl blockBlobs() {\n      * Initializes an instance of AzureBlobStorage client.\n      */\n     public AzureBlobStorageImpl() {\n-        this(new HttpPipelineBuilder()\n-                 .policies(\n-                     new UserAgentPolicy(),\n-                     new RetryPolicy(),\n-                     new CookiePolicy())\n-                 .build());", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUzMTcxMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371531711", "bodyText": "Good point. I'll try autogenerating again and see if it fixes itself.", "author": "gapra-msft", "createdAt": "2020-01-27T23:03:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1ODU1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA3NDUzOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372074539", "bodyText": "I tried regenerating and the issue still exists. In Intellij it looks like this constructor isnt actually used anywhere, so I don't think it affects the functionality. @jianghaolu, @alzimmermsft would it be possible to make the auto-generator not make this constructor?", "author": "gapra-msft", "createdAt": "2020-01-28T21:43:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1ODU1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxNjY2NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r377416665", "bodyText": "Yeah it's a bug in the generator.", "author": "jianghaolu", "createdAt": "2020-02-11T01:56:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1ODU1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4OTExNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r378589115", "bodyText": "Fixed in 3.0.2", "author": "jianghaolu", "createdAt": "2020-02-13T00:26:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1ODU1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTk4OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371459989", "bodyText": "Because the argument into this method for encryptionScope is not final, I would rather see that being reused rather than create a new encryptionScope1, which feels like it could be potentially error-prone. Could something like this work: encryptionScope = encryptionScope == null ? null : encryptionScope.getEncryptionScope()", "author": "JonathanGiles", "createdAt": "2020-01-27T20:16:20Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/implementation/BlockBlobsImpl.java", "diffHunk": "@@ -196,11 +199,15 @@ public BlockBlobsImpl(AzureBlobStorageImpl client) {\n         if (cpkInfo != null) {\n             encryptionAlgorithm = cpkInfo.getEncryptionAlgorithm();\n         }\n+        String encryptionScope1 = null;\n+        if (encryptionScope != null) {\n+            encryptionScope1 = encryptionScope.getEncryptionScope();\n+        }", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ2MDQxMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371460412", "bodyText": "Same comment applies in other cases below. I won't repeat myself.", "author": "JonathanGiles", "createdAt": "2020-01-27T20:17:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTk4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA3Nzk4OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372077988", "bodyText": "@JonathanGiles, this code was generated with the latest version of the Java generator.  It might be best to bring these issues up with @jianghaolu.  I think issues with generated code are outside the scope of this PR.", "author": "seanmcc-msft", "createdAt": "2020-01-28T21:50:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTk4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA4MDczMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372080730", "bodyText": "Got it - I'll redirect this comment to @jianghaolu then. Thanks.", "author": "JonathanGiles", "createdAt": "2020-01-28T21:55:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTk4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ2NDczNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371464735", "bodyText": "I understand this is auto-generated, but it is hard to read. Can it be improved at all?", "author": "JonathanGiles", "createdAt": "2020-01-27T20:27:00Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/models/BlobContainerEncryptionScope.java", "diffHunk": "@@ -0,0 +1,80 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+// Code generated by Microsoft (R) AutoRest Code Generator.\n+\n+package com.azure.storage.blob.models;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\n+\n+/**\n+ * Additional parameters for create operation.\n+ */\n+@JacksonXmlRootElement(localName = \"blob-container-encryption-scope\")\n+@Fluent\n+public final class BlobContainerEncryptionScope {\n+    /*\n+     * Optional.  Version 2019-02-02 and later.  Specifies the default\n+     * encryption scope to set on the container and use for all future writes.\n+     */\n+    @JsonProperty(value = \"defaultEncryptionScope\")\n+    private String defaultEncryptionScope;\n+\n+    /*\n+     * Optional.  Version 2019-02-02 and newer.  If true, prevents any request\n+     * from specifying a different encryption scope than the scope set on the\n+     * container.\n+     */\n+    @JsonProperty(value = \"denyEncryptionScopeOverride\")\n+    private boolean denyEncryptionScopeOverride;\n+\n+    /**\n+     * Get the defaultEncryptionScope property: Optional.  Version 2019-02-02\n+     * and later.  Specifies the default encryption scope to set on the\n+     * container and use for all future writes.\n+     *\n+     * @return the defaultEncryptionScope value.\n+     */\n+    public String getDefaultEncryptionScope() {\n+        return this.defaultEncryptionScope;\n+    }\n+\n+    /**\n+     * Set the defaultEncryptionScope property: Optional.  Version 2019-02-02\n+     * and later.  Specifies the default encryption scope to set on the\n+     * container and use for all future writes.\n+     *\n+     * @param defaultEncryptionScope the defaultEncryptionScope value to set.\n+     * @return the BlobContainerEncryptionScope object itself.\n+     */\n+    public BlobContainerEncryptionScope setDefaultEncryptionScope(String defaultEncryptionScope) {\n+        this.defaultEncryptionScope = defaultEncryptionScope;\n+        return this;\n+    }\n+\n+    /**\n+     * Get the denyEncryptionScopeOverride property: Optional.  Version\n+     * 2019-02-02 and newer.  If true, prevents any request from specifying a\n+     * different encryption scope than the scope set on the container.\n+     *\n+     * @return the denyEncryptionScopeOverride value.\n+     */\n+    public boolean isDenyEncryptionScopeOverride() {", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyMDkxMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371520910", "bodyText": "I think the plan is to rename this preventEncryptionScopeOverride", "author": "gapra-msft", "createdAt": "2020-01-27T22:34:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ2NDczNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjExNDM4OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372114389", "bodyText": "#7793", "author": "gapra-msft", "createdAt": "2020-01-28T23:22:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ2NDczNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3ODQ1MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371478450", "bodyText": "Elsewhere this method is called isDenyEncryptionScopeOverride. I commented elsewhere that I didn't much like that name, but at the least we should be consistent if possible.", "author": "JonathanGiles", "createdAt": "2020-01-27T20:58:10Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/models/BlobContainerProperties.java", "diffHunk": "@@ -114,4 +141,18 @@ public boolean hasImmutabilityPolicy() {\n     public boolean hasLegalHold() {\n         return hasLegalHold;\n     }\n+\n+    /**\n+     * @return the default encryption scope for the container\n+     */\n+    public String getDefaultEncryptionScope() {\n+        return defaultEncryptionScope;\n+    }\n+\n+    /**\n+     * @return Whether or not a container's default encryption scope can be overriden\n+     */\n+    public Boolean hasDenyEncryptionScopeOverride() {", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjExNDM3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372114371", "bodyText": "#7793", "author": "gapra-msft", "createdAt": "2020-01-28T23:22:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3ODQ1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4MDQ3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371480473", "bodyText": "Is this class used anywhere?", "author": "JonathanGiles", "createdAt": "2020-01-27T21:02:32Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/implementation/models/ContainerCpkScopeInfo.java", "diffHunk": "@@ -0,0 +1,80 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+// Code generated by Microsoft (R) AutoRest Code Generator.\n+\n+package com.azure.storage.blob.implementation.models;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\n+\n+/**\n+ * Additional parameters for create operation.\n+ */\n+@JacksonXmlRootElement(localName = \"container-cpk-scope-info\")\n+@Fluent\n+public final class ContainerCpkScopeInfo {", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA4MDI5MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372080290", "bodyText": "This is just an artifact of swagger README changes I was making. This should be deleted.", "author": "gapra-msft", "createdAt": "2020-01-28T21:55:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4MDQ3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjExNDM1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372114354", "bodyText": "#7793", "author": "gapra-msft", "createdAt": "2020-01-28T23:22:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4MDQ3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4MDY1Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371480657", "bodyText": "Is this class used anywhere?", "author": "JonathanGiles", "createdAt": "2020-01-27T21:02:56Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/models/CpkScopeInfo.java", "diffHunk": "@@ -0,0 +1,54 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+// Code generated by Microsoft (R) AutoRest Code Generator.\n+\n+package com.azure.storage.blob.models;\n+\n+import com.azure.core.annotation.Fluent;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\n+\n+/**\n+ * Additional parameters for a set of operations.\n+ */\n+@JacksonXmlRootElement(localName = \"cpk-scope-info\")\n+@Fluent\n+public final class CpkScopeInfo {", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA4MDc3OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372080778", "bodyText": "Same as above. Will delete it", "author": "gapra-msft", "createdAt": "2020-01-28T21:55:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4MDY1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjExNDMzOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372114339", "bodyText": "#7793", "author": "gapra-msft", "createdAt": "2020-01-28T23:22:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4MDY1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4NzA1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371487051", "bodyText": "I'm unclear what determines if the API in this PR works with encryption scope as a String or as a EncryptionScope type. Can you clarify why these are used in a seemingly interchangeable way?", "author": "JonathanGiles", "createdAt": "2020-01-27T21:17:33Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/models/PageBlobItem.java", "diffHunk": "@@ -32,11 +33,29 @@\n      */\n     public PageBlobItem(final String eTag, final OffsetDateTime lastModified, final byte[] contentMd5,\n         final Boolean isServerEncrypted, final String encryptionKeySha256, final Long blobSequenceNumber) {\n+        this(eTag, lastModified, contentMd5, isServerEncrypted, encryptionKeySha256, null, blobSequenceNumber);\n+    }\n+\n+    /**\n+     * Constructs a {@link PageBlobItem}.\n+     *\n+     * @param eTag ETag of the page blob.\n+     * @param lastModified Last modified time of the page blob.\n+     * @param contentMd5 Content MD5 of the page blob.\n+     * @param isServerEncrypted Flag indicating if the page blob is encrypted on the server.\n+     * @param encryptionKeySha256 The encryption key used to encrypt the page blob.\n+     * @param encryptionScope The encryption scope used to encrypt the page blob.\n+     * @param blobSequenceNumber The current sequence number for the page blob.\n+     */\n+    public PageBlobItem(final String eTag, final OffsetDateTime lastModified, final byte[] contentMd5,\n+        final Boolean isServerEncrypted, final String encryptionKeySha256, final String encryptionScope,", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUzMDY4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371530680", "bodyText": "You're right, I'll change this to be the EncryptionScope type", "author": "gapra-msft", "createdAt": "2020-01-27T23:00:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4NzA1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU3ODI2OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372578269", "bodyText": "Actually, looking at this again, the reason we return a String is because it matches the way CustomerProvidedKey is given back to the user", "author": "gapra-msft", "createdAt": "2020-01-29T19:14:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4NzA1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUxMjI4NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371512285", "bodyText": "This is not package-private, the constructor is protected.", "author": "JonathanGiles", "createdAt": "2020-01-27T22:13:18Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/specialized/BlobAsyncClientBase.java", "diffHunk": "@@ -118,6 +120,27 @@\n      */\n     protected BlobAsyncClientBase(HttpPipeline pipeline, String url, BlobServiceVersion serviceVersion,\n         String accountName, String containerName, String blobName, String snapshot, CpkInfo customerProvidedKey) {\n+        this(pipeline, url, serviceVersion, accountName, containerName, blobName, snapshot, customerProvidedKey, null);\n+    }\n+\n+    /**\n+     * Package-private constructor for use by {@link SpecializedBlobClientBuilder}.", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUxNDE4OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r371514188", "bodyText": "I'd prefer to see a more descriptive first sentence for some of these new JavaDocs. The first sentence gets extra prominence in the generated JavaDoc, so it is important to give a useful first sentence.", "author": "JonathanGiles", "createdAt": "2020-01-27T22:17:34Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/specialized/PageBlobAsyncClient.java", "diffHunk": "@@ -595,23 +602,88 @@ private static String pageRangeToString(PageRange pageRange) {\n         BlobRequestConditions requestConditions) {\n         try {\n             return withContext(context ->\n-                getPageRangesDiffWithResponse(blobRange, prevSnapshot, requestConditions, context));\n+                getPageRangesDiffWithResponse(blobRange, prevSnapshot, null, requestConditions, context));\n+        } catch (RuntimeException ex) {\n+            return monoError(logger, ex);\n+        }\n+    }\n+\n+    /**\n+     * This API only works for managed disk accounts.\n+     * <p>Gets the collection of page ranges that differ between a specified snapshot and this page blob. For more\n+     * information, see the <a href=\"https://docs.microsoft.com/rest/api/storageservices/get-page-ranges\">Azure\n+     * Docs</a>.</p>\n+     *\n+     * <p><strong>Code Samples</strong></p>\n+     *\n+     * {@codesnippet com.azure.storage.blob.specialized.PageBlobAsyncClient.getManagedDiskRangesDiff#BlobRange-String}\n+     *\n+     * @param blobRange {@link BlobRange}\n+     * @param prevSnapshotUrl Specifies the URL of a previous snapshot of the target blob. Specifies that the\n+     * response will contain only pages that were changed between target blob and previous snapshot. Changed pages\n+     * include both updated and cleared pages. The target blob may be a snapshot, as long as the snapshot specified by\n+     * prevsnapshot is the older of the two.\n+     *\n+     * @return A reactive response emitting all the different page ranges.\n+     */\n+    public Mono<PageList> getManagedDiskRangesDiff(BlobRange blobRange, String prevSnapshotUrl) {\n+        try {\n+            return getManagedDiskRangesDiffWithResponse(blobRange, prevSnapshotUrl, null).flatMap(FluxUtil::toMono);\n+        } catch (RuntimeException ex) {\n+            return monoError(logger, ex);\n+        }\n+    }\n+\n+    /**\n+     * This API only works for managed disk accounts.", "originalCommit": "05f7463edd79de11eeb5cd043235b3843c700aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU3OTk0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r372579943", "bodyText": "This is by design.  We want the fact that this API only works with managed disk accounts to be prominently featured in the generated JavaDoc.  The vast majority of users shouldn't attempt to use this method.", "author": "seanmcc-msft", "createdAt": "2020-01-29T19:17:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUxNDE4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxMjc5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7589#discussion_r377412798", "bodyText": "Even still, when you're only given the first-sentence description at the top of JavaDoc, I don't want to see one or potentially many methods with a description that only says this. I would rather it say something like \"This API, which only works for managed disk accounts, allows the user to ....\".", "author": "JonathanGiles", "createdAt": "2020-02-11T01:36:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUxNDE4OA=="}], "type": "inlineReview"}, {"oid": "439f500f52aaf27c7137369c9d175b5e3008c01e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/439f500f52aaf27c7137369c9d175b5e3008c01e", "message": "Merge branch 'master' into feature/storage/stg71-base", "committedDate": "2020-01-28T20:30:49Z", "type": "commit"}, {"oid": "03e69e197b4510a0b80ed08878fae269b88c7079", "url": "https://github.com/Azure/azure-sdk-for-java/commit/03e69e197b4510a0b80ed08878fae269b88c7079", "message": "Renamed deny encryption scope override to prevent encryption scope ov\u2026 (#7793)", "committedDate": "2020-01-29T18:31:31Z", "type": "commit"}, {"oid": "71df1762ba3c3b99230b4b611e199f443b8b91a0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/71df1762ba3c3b99230b4b611e199f443b8b91a0", "message": "Updated managed disk API according to comments (#7809)", "committedDate": "2020-01-30T17:40:11Z", "type": "commit"}, {"oid": "cfb139c6eca94aee15e887ec05e9099669a20261", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cfb139c6eca94aee15e887ec05e9099669a20261", "message": "Merge branch 'master' into feature/storage/stg71-base", "committedDate": "2020-01-30T18:12:58Z", "type": "commit"}, {"oid": "f8ab51a4d6625b2ab1c72a4ec18a54ae6130748c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f8ab51a4d6625b2ab1c72a4ec18a54ae6130748c", "message": "Reverted service version checker (#7972)", "committedDate": "2020-02-05T17:03:46Z", "type": "commit"}, {"oid": "c0aa546d4482df5aba12701316f0cc088c3d43dd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c0aa546d4482df5aba12701316f0cc088c3d43dd", "message": "Updated name of encryption scope  (#7964)", "committedDate": "2020-02-05T22:39:30Z", "type": "commit"}, {"oid": "caca44647851691b8393c71d2bf6db56c345b4cc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/caca44647851691b8393c71d2bf6db56c345b4cc", "message": "Moved encryption scope to implementation package (#8009)", "committedDate": "2020-02-06T23:50:20Z", "type": "commit"}, {"oid": "7c3e709d26b4a8b44bd66d9edc295e1d700b4a7d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7c3e709d26b4a8b44bd66d9edc295e1d700b4a7d", "message": "Flattened encryption scope on blob container properties (#8038)", "committedDate": "2020-02-07T21:25:07Z", "type": "commit"}, {"oid": "e21613243dd69559187316e79ed14eb72437d3cb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e21613243dd69559187316e79ed14eb72437d3cb", "message": "Updated tests in 71 branch (#8088)", "committedDate": "2020-02-10T21:43:59Z", "type": "commit"}, {"oid": "e1ffed249512d08254df7fabd2b9822eab7ec246", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e1ffed249512d08254df7fabd2b9822eab7ec246", "message": "Added version conversion to datalake (#8091)", "committedDate": "2020-02-10T23:41:17Z", "type": "commit"}, {"oid": "b855dfbb7dfd6df5f9e8a97f70de27a0235aea38", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b855dfbb7dfd6df5f9e8a97f70de27a0235aea38", "message": "Bumped Queue version up and re-recorded tests (#8095)", "committedDate": "2020-02-11T17:42:26Z", "type": "commit"}, {"oid": "7b4cea88d515dfdd2cc187b538d9088c22bf8847", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7b4cea88d515dfdd2cc187b538d9088c22bf8847", "message": "Merge branch 'master' into feature/storage/stg71-base", "committedDate": "2020-02-11T17:54:43Z", "type": "commit"}]}