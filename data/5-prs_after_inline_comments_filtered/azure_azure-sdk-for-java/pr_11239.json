{"pr_number": 11239, "pr_title": "Form Recognizer builder clients", "pr_createdAt": "2020-05-18T07:33:41Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/11239", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDE2NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11239#discussion_r427500164", "bodyText": "Fix javadoc\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * @see FormRecognizerClientBuilder\n          \n          \n            \n             * @see FormTrainingClientBuilder", "author": "srnagar", "createdAt": "2020-05-19T18:07:50Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingAsyncClient.java", "diffHunk": "@@ -58,7 +59,7 @@\n  * @see FormRecognizerClientBuilder", "originalCommit": "659c5f2e39570336bc3dfe41d1bf06ca17b030ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDcwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11239#discussion_r427500700", "bodyText": "Same here - fix the javadoc.", "author": "srnagar", "createdAt": "2020-05-19T18:08:45Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java", "diffHunk": "@@ -33,7 +33,7 @@\n  * @see FormRecognizerClientBuilder", "originalCommit": "659c5f2e39570336bc3dfe41d1bf06ca17b030ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMTY0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11239#discussion_r427501643", "bodyText": "Make both sync and async clients final.", "author": "srnagar", "createdAt": "2020-05-19T18:10:17Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingAsyncClient.java", "diffHunk": "@@ -58,7 +59,7 @@\n  * @see FormRecognizerClientBuilder\n  * @see FormRecognizerAsyncClient\n  */\n-@ServiceClient(builder = FormRecognizerClientBuilder.class, isAsync = true)\n+@ServiceClient(builder = FormTrainingClientBuilder.class, isAsync = true)\n public class FormTrainingAsyncClient {", "originalCommit": "659c5f2e39570336bc3dfe41d1bf06ca17b030ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwNDMxOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11239#discussion_r427504318", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * This class provides a fluent builder API to help instantiation of {@link FormTrainingClient FormRecognizerClients}\n          \n          \n            \n             * This class provides a fluent builder API to help instantiation of {@link FormTrainingClient FormTrainingClients}", "author": "srnagar", "createdAt": "2020-05-19T18:14:35Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClientBuilder.java", "diffHunk": "@@ -0,0 +1,345 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer.training;\n+\n+import com.azure.ai.formrecognizer.FormRecognizerServiceVersion;\n+import com.azure.ai.formrecognizer.implementation.FormRecognizerClientImpl;\n+import com.azure.ai.formrecognizer.implementation.FormRecognizerClientImplBuilder;\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.ContentType;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogDetailLevel;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.time.temporal.ChronoUnit;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help instantiation of {@link FormTrainingClient FormRecognizerClients}", "originalCommit": "659c5f2e39570336bc3dfe41d1bf06ca17b030ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwNDY2MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11239#discussion_r427504661", "bodyText": "Add codesnippets to javadoc.", "author": "srnagar", "createdAt": "2020-05-19T18:15:08Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClientBuilder.java", "diffHunk": "@@ -0,0 +1,345 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer.training;\n+\n+import com.azure.ai.formrecognizer.FormRecognizerServiceVersion;\n+import com.azure.ai.formrecognizer.implementation.FormRecognizerClientImpl;\n+import com.azure.ai.formrecognizer.implementation.FormRecognizerClientImplBuilder;\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.ContentType;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogDetailLevel;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.time.temporal.ChronoUnit;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help instantiation of {@link FormTrainingClient FormRecognizerClients}\n+ * and {@link FormTrainingAsyncClient FormTrainingAsyncClients}, call {@link #buildClient()} buildClient} and\n+ * {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of the desired client.\n+ *\n+ * <p>\n+ * The client needs the service endpoint of the Azure Form Recognizer to access the resource service.\n+ * {@link #credential(AzureKeyCredential)} gives\n+ * the builder access credential.\n+ * </p>\n+ *\n+ * <p>\n+ * Another way to construct the client is using a {@link HttpPipeline}. The pipeline gives the client an\n+ * authenticated way to communicate with the service. Set the pipeline with {@link #pipeline(HttpPipeline) this} and\n+ * set the service endpoint with {@link #endpoint(String) this}. Using a\n+ * pipeline requires additional setup but allows for finer control on how the {@link FormTrainingClient} and\n+ * {@link FormTrainingAsyncClient} is built.\n+ * </p>\n+ *", "originalCommit": "659c5f2e39570336bc3dfe41d1bf06ca17b030ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwNjUxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11239#discussion_r427506513", "bodyText": "Is this API necessary? The user can just build using the FormRecognizerClientBuilder directly.", "author": "srnagar", "createdAt": "2020-05-19T18:18:11Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java", "diffHunk": "@@ -44,11 +44,21 @@\n      *\n      * @param formTrainingAsyncClient The {@link FormRecognizerAsyncClient} that the client routes its request through.\n      */\n-    // TODO (savaity): Still deciding the best approach here, to be redone in #10909\n-    public FormTrainingClient(FormTrainingAsyncClient formTrainingAsyncClient) {\n+    FormTrainingClient(FormTrainingAsyncClient formTrainingAsyncClient) {\n         this.client = formTrainingAsyncClient;\n     }\n \n+    /**\n+     * Creates a new {@link FormRecognizerClient} object. The new {@code FormTrainingClient}\n+     * uses the same request policy pipeline as the {@code FormTrainingClient}.\n+     *\n+     * @return A new {@code FormRecognizerClient} object.\n+     */\n+    public FormRecognizerClient getFormRecognizerClient() {", "originalCommit": "659c5f2e39570336bc3dfe41d1bf06ca17b030ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUzODAyNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11239#discussion_r427538026", "bodyText": "Yeah, we are trying to see the discoverability/usability of the FormRecognizer client via the training client. Moreso, don't want users to use another builder but just the get the FormRecognizerClient using the current builder configurations.", "author": "samvaity", "createdAt": "2020-05-19T19:11:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwNjUxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwOTA1OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11239#discussion_r427509059", "bodyText": "Fix this in all the methods of the builder.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return The updated FormRecognizerClientBuilder object.\n          \n          \n            \n                 * @return The updated FormTrainingClientBuilder object.", "author": "srnagar", "createdAt": "2020-05-19T18:22:21Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClientBuilder.java", "diffHunk": "@@ -0,0 +1,345 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer.training;\n+\n+import com.azure.ai.formrecognizer.FormRecognizerServiceVersion;\n+import com.azure.ai.formrecognizer.implementation.FormRecognizerClientImpl;\n+import com.azure.ai.formrecognizer.implementation.FormRecognizerClientImplBuilder;\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.ContentType;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogDetailLevel;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.time.temporal.ChronoUnit;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help instantiation of {@link FormTrainingClient FormRecognizerClients}\n+ * and {@link FormTrainingAsyncClient FormTrainingAsyncClients}, call {@link #buildClient()} buildClient} and\n+ * {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of the desired client.\n+ *\n+ * <p>\n+ * The client needs the service endpoint of the Azure Form Recognizer to access the resource service.\n+ * {@link #credential(AzureKeyCredential)} gives\n+ * the builder access credential.\n+ * </p>\n+ *\n+ * <p>\n+ * Another way to construct the client is using a {@link HttpPipeline}. The pipeline gives the client an\n+ * authenticated way to communicate with the service. Set the pipeline with {@link #pipeline(HttpPipeline) this} and\n+ * set the service endpoint with {@link #endpoint(String) this}. Using a\n+ * pipeline requires additional setup but allows for finer control on how the {@link FormTrainingClient} and\n+ * {@link FormTrainingAsyncClient} is built.\n+ * </p>\n+ *\n+ * @see FormTrainingAsyncClient\n+ * @see FormTrainingClient\n+ */\n+@ServiceClientBuilder(serviceClients = {FormTrainingAsyncClient.class, FormTrainingClient.class})\n+public final class FormTrainingClientBuilder {\n+\n+    private static final String ECHO_REQUEST_ID_HEADER = \"x-ms-return-client-request-id\";\n+    private static final String CONTENT_TYPE_HEADER_VALUE = ContentType.APPLICATION_JSON;\n+    private static final String ACCEPT_HEADER = \"Accept\";\n+    private static final String FORM_RECOGNIZER_PROPERTIES = \"azure-ai-formrecognizer.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+    private static final RetryPolicy DEFAULT_RETRY_POLICY = new RetryPolicy(\"retry-after-ms\", ChronoUnit.MILLIS);\n+\n+    private final ClientLogger logger = new ClientLogger(FormTrainingClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies;\n+    private final HttpHeaders headers;\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private String endpoint;\n+    private AzureKeyCredential credential;\n+    private HttpClient httpClient;\n+    private HttpLogOptions httpLogOptions;\n+    private HttpPipeline httpPipeline;\n+    private Configuration configuration;\n+    private RetryPolicy retryPolicy;\n+    private FormRecognizerServiceVersion version;\n+\n+    static final String OCP_APIM_SUBSCRIPTION_KEY = \"Ocp-Apim-Subscription-Key\";\n+    /**\n+     * The constructor with defaults.\n+     */\n+    public FormTrainingClientBuilder() {\n+        policies = new ArrayList<>();\n+        httpLogOptions = new HttpLogOptions();\n+\n+        Map<String, String> properties = CoreUtils.getProperties(FORM_RECOGNIZER_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+\n+        headers = new HttpHeaders()\n+            .put(ECHO_REQUEST_ID_HEADER, \"true\")\n+            .put(ACCEPT_HEADER, CONTENT_TYPE_HEADER_VALUE);\n+    }\n+\n+    /**\n+     * Creates a {@link FormTrainingClient} based on options set in the builder. Every time\n+     * {@code buildClient()} is called a new instance of {@link FormTrainingClient} is created.\n+     *\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then the {@code pipeline} and\n+     * {@link #endpoint(String) endpoint} are used to create the {@link FormTrainingClient client}. All other builder\n+     * settings are ignored\n+     * </p>\n+     *\n+     * @return A FormTrainingClient with the options set from the builder.\n+     * @throws NullPointerException if {@link #endpoint(String) endpoint} or\n+     * {@link #credential(AzureKeyCredential)} has not been set.\n+     * @throws IllegalArgumentException if {@link #endpoint(String) endpoint} cannot be parsed into a valid URL.\n+     */\n+    public FormTrainingClient buildClient() {\n+        return new FormTrainingClient(buildAsyncClient());\n+    }\n+\n+    /**\n+     * Creates a {@link FormTrainingAsyncClient} based on options set in the builder. Every time\n+     * {@code buildAsyncClient()} is called a new instance of {@link FormTrainingAsyncClient} is created.\n+     *\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then the {@code pipeline} and\n+     * {@link #endpoint(String) endpoint} are used to create the {@link FormTrainingClient client}. All other builder\n+     * settings are ignored.\n+     * </p>\n+     *\n+     * @return A FormTrainingAsyncClient with the options set from the builder.\n+     * @throws NullPointerException if {@link #endpoint(String) endpoint} or {@link #credential(AzureKeyCredential)}\n+     * has not been set.\n+     * @throws IllegalArgumentException if {@link #endpoint(String) endpoint} cannot be parsed into a valid URL.\n+     */\n+    public FormTrainingAsyncClient buildAsyncClient() {\n+        // Endpoint cannot be null, which is required in request authentication\n+        Objects.requireNonNull(endpoint, \"'Endpoint' is required and can not be null.\");\n+\n+        // Service Version\n+        final FormRecognizerServiceVersion serviceVersion =\n+            version != null ? version : FormRecognizerServiceVersion.getLatest();\n+\n+        HttpPipeline pipeline = httpPipeline;\n+        // Create a default Pipeline if it is not given\n+        if (pipeline == null) {\n+            pipeline = getDefaultHttpPipeline();\n+        }\n+        final FormRecognizerClientImpl formRecognizerAPI = new FormRecognizerClientImplBuilder()\n+            .endpoint(endpoint)\n+            .pipeline(pipeline)\n+            .build();\n+\n+        return new FormTrainingAsyncClient(formRecognizerAPI, serviceVersion);\n+\n+    }\n+\n+    private HttpPipeline getDefaultHttpPipeline() {\n+        // Global Env configuration store\n+        final Configuration buildConfiguration = (configuration == null)\n+            ? Configuration.getGlobalConfiguration().clone() : configuration;\n+\n+        // Closest to API goes first, closest to wire goes last.\n+        final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+\n+        policies.add(new UserAgentPolicy(httpLogOptions.getApplicationId(), clientName, clientVersion,\n+            buildConfiguration));\n+        policies.add(new RequestIdPolicy());\n+        policies.add(new AddHeadersPolicy(headers));\n+\n+        HttpPolicyProviders.addBeforeRetryPolicies(policies);\n+        policies.add(retryPolicy == null ? DEFAULT_RETRY_POLICY : retryPolicy);\n+        policies.add(new AddDatePolicy());\n+        // Authentications\n+        if (credential != null) {\n+            policies.add(new AzureKeyCredentialPolicy(OCP_APIM_SUBSCRIPTION_KEY, credential));\n+        } else {\n+            // Throw exception that credential and tokenCredential cannot be null\n+            throw logger.logExceptionAsError(\n+                new IllegalArgumentException(\"Missing credential information while building a client.\"));\n+        }\n+        policies.addAll(this.policies);\n+        HttpPolicyProviders.addAfterRetryPolicies(policies);\n+\n+        policies.add(new HttpLoggingPolicy(httpLogOptions));\n+\n+        return new HttpPipelineBuilder()\n+            .policies(policies.toArray(new HttpPipelinePolicy[0]))\n+            .httpClient(httpClient)\n+            .build();\n+    }\n+\n+    /**\n+     * Sets the service endpoint for the Azure Form Recognizer instance.\n+     *\n+     * @param endpoint The URL of the Azure Form Recognizer instance service requests to and receive responses from.\n+     *\n+     * @return The updated FormRecognizerClientBuilder object.\n+     * @throws NullPointerException if {@code endpoint} is null\n+     * @throws IllegalArgumentException if {@code endpoint} cannot be parsed into a valid URL.\n+     */\n+    public FormTrainingClientBuilder endpoint(String endpoint) {\n+        Objects.requireNonNull(endpoint, \"'endpoint' cannot be null.\");\n+\n+        try {\n+            new URL(endpoint);\n+        } catch (MalformedURLException ex) {\n+            throw logger.logExceptionAsWarning(new IllegalArgumentException(\"'endpoint' must be a valid URL.\", ex));\n+        }\n+\n+        if (endpoint.endsWith(\"/\")) {\n+            this.endpoint = endpoint.substring(0, endpoint.length() - 1);\n+        } else {\n+            this.endpoint = endpoint;\n+        }\n+\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the {@link AzureKeyCredential} to use when authenticating HTTP requests for this\n+     * FormRecognizerClientBuilder.\n+     *\n+     * @param apiKeyCredential {@link AzureKeyCredential} API key credential\n+     *\n+     * @return The updated FormRecognizerClientBuilder object.\n+     * @throws NullPointerException If {@code apiKeyCredential} is {@code null}\n+     */\n+    public FormTrainingClientBuilder credential(AzureKeyCredential apiKeyCredential) {\n+        this.credential = Objects.requireNonNull(apiKeyCredential, \"'apiKeyCredential' cannot be null.\");\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the logging configuration for HTTP requests and responses.\n+     *\n+     * <p>If {@code logOptions} isn't provided, the default options will use {@link HttpLogDetailLevel#NONE}\n+     * which will prevent logging.</p>\n+     *\n+     * @param logOptions The logging configuration to use when sending and receiving HTTP requests/responses.\n+     *\n+     * @return The updated FormRecognizerClientBuilder object.\n+     */\n+    public FormTrainingClientBuilder httpLogOptions(HttpLogOptions logOptions) {\n+        this.httpLogOptions = logOptions;\n+        return this;\n+    }\n+\n+    /**\n+     * Adds a policy to the set of existing policies that are executed after required policies.\n+     *\n+     * @param policy The retry policy for service requests.\n+     *\n+     * @return The updated FormRecognizerClientBuilder object.\n+     * @throws NullPointerException If {@code policy} is {@code null}.\n+     */\n+    public FormTrainingClientBuilder addPolicy(HttpPipelinePolicy policy) {\n+        policies.add(Objects.requireNonNull(policy, \"'policy' cannot be null.\"));\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the HTTP client to use for sending and receiving requests to and from the service.\n+     *\n+     * @param client The HTTP client to use for requests.\n+     *\n+     * @return The updated FormRecognizerClientBuilder object.\n+     */\n+    public FormTrainingClientBuilder httpClient(HttpClient client) {\n+        if (this.httpClient != null && client == null) {\n+            logger.info(\"HttpClient is being set to 'null' when it was previously configured.\");\n+        }\n+\n+        this.httpClient = client;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the HTTP pipeline to use for the service client.\n+     * <p>\n+     * If {@code pipeline} is set, all other settings are ignored, aside from\n+     * {@link FormTrainingClientBuilder#endpoint(String) endpoint} to build {@link FormTrainingAsyncClient} or\n+     * {@link FormTrainingClient}.\n+     *\n+     * @param httpPipeline The HTTP pipeline to use for sending service requests and receiving responses.\n+     *\n+     * @return The updated FormRecognizerClientBuilder object.\n+     */\n+    public FormTrainingClientBuilder pipeline(HttpPipeline httpPipeline) {\n+        if (this.httpPipeline != null && httpPipeline == null) {\n+            logger.info(\"HttpPipeline is being set to 'null' when it was previously configured.\");\n+        }\n+\n+        this.httpPipeline = httpPipeline;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the configuration store that is used during construction of the service client.\n+     * <p>\n+     * The default configuration store is a clone of the {@link Configuration#getGlobalConfiguration() global\n+     * configuration store}, use {@link Configuration#NONE} to bypass using configuration settings during construction.\n+     *\n+     * @param configuration The configuration store used to\n+     *\n+     * @return The updated FormRecognizerClientBuilder object.\n+     */\n+    public FormTrainingClientBuilder configuration(Configuration configuration) {\n+        this.configuration = configuration;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the {@link RetryPolicy#RetryPolicy()} that is used when each request is sent.\n+     * <p>\n+     * The default retry policy will be used if not provided {@link FormTrainingClientBuilder#buildAsyncClient()}\n+     * to build {@link FormTrainingAsyncClient} or {@link FormTrainingClient}.\n+     *\n+     * @param retryPolicy user's retry policy applied to each request.\n+     *\n+     * @return The updated FormRecognizerClientBuilder object.\n+     */\n+    public FormTrainingClientBuilder retryPolicy(RetryPolicy retryPolicy) {\n+        this.retryPolicy = retryPolicy;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the {@link FormRecognizerServiceVersion} that is used when making API requests.\n+     * <p>\n+     * If a service version is not provided, the service version that will be used will be the latest known service\n+     * version based on the version of the client library being used. If no service version is specified, updating to a\n+     * newer version the client library will have the result of potentially moving to a newer service version.\n+     *\n+     * @param version {@link FormRecognizerServiceVersion} of the service to be used when making requests.\n+     *\n+     * @return The updated FormRecognizerClientBuilder object.", "originalCommit": "659c5f2e39570336bc3dfe41d1bf06ca17b030ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8d65d73a922facbc957e86de74137bb75705807a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8d65d73a922facbc957e86de74137bb75705807a", "message": "update builders", "committedDate": "2020-05-19T23:55:23Z", "type": "commit"}, {"oid": "0a03612778cb0bd05e21482cbccc13955d48c871", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0a03612778cb0bd05e21482cbccc13955d48c871", "message": "update form recognizer builder tests", "committedDate": "2020-05-19T23:56:29Z", "type": "commit"}, {"oid": "2adfd0b993916527781584c1fe7cc46cd17ecc22", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2adfd0b993916527781584c1fe7cc46cd17ecc22", "message": "update readme and changeLog", "committedDate": "2020-05-19T23:57:43Z", "type": "commit"}, {"oid": "2b365f15ed6f0b737fa17456e49296095b7b4a6c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2b365f15ed6f0b737fa17456e49296095b7b4a6c", "message": "update javadocs", "committedDate": "2020-05-19T23:58:24Z", "type": "commit"}, {"oid": "561d392ef8e752878874979203376509607a53ef", "url": "https://github.com/Azure/azure-sdk-for-java/commit/561d392ef8e752878874979203376509607a53ef", "message": "rebase changes", "committedDate": "2020-05-20T00:25:48Z", "type": "forcePushed"}, {"oid": "cb9bca5e5e7efcffb0114c9de13b2d96ae6a44a3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cb9bca5e5e7efcffb0114c9de13b2d96ae6a44a3", "message": "rebase changes", "committedDate": "2020-05-20T00:32:55Z", "type": "forcePushed"}, {"oid": "3b42a673266179c4be57b480d4f3ec610a7a435c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3b42a673266179c4be57b480d4f3ec610a7a435c", "message": "rebase changes", "committedDate": "2020-05-20T01:43:28Z", "type": "commit"}, {"oid": "3b42a673266179c4be57b480d4f3ec610a7a435c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3b42a673266179c4be57b480d4f3ec610a7a435c", "message": "rebase changes", "committedDate": "2020-05-20T01:43:28Z", "type": "forcePushed"}]}