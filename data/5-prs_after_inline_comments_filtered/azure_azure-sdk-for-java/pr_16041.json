{"pr_number": 16041, "pr_title": "Removed the return check of the listReadReceipts response for Live/Record tests. Removed .sleep statements", "pr_createdAt": "2020-10-07T19:58:29Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/16041", "timeline": [{"oid": "e20a252b61d7e4df2bc9c258d58bc07da8f8860f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e20a252b61d7e4df2bc9c258d58bc07da8f8860f", "message": "Removed the item return check on listReadReceipts for Live/Record tests. Removed .sleep statements", "committedDate": "2020-10-07T19:37:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwNDc0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16041#discussion_r501304749", "bodyText": "Do we also need to include lines 302-309 in the if playbackmode clause? I think the response was returning with 404 from the delay: https://dev.azure.com/azure-sdk/internal/_build/results?buildId=565232&view=logs&j=351a4efb-edfe-5bb4-cda1-1ace5fc54b68&t=332ee861-0df2-58fa-cf63-28af96dd70e8", "author": "minnieliu", "createdAt": "2020-10-07T20:56:05Z", "path": "sdk/communication/azure-communication-chat/src/test/java/com/azure/communication/chat/ChatThreadAsyncClientTest.java", "diffHunk": "@@ -299,8 +299,6 @@ public void canSendThenListReadReceiptsWithResponse() throws InterruptedExceptio\n \n         chatThreadClient.sendReadReceiptWithResponse(response.getId()).block();\n \n-        Thread.sleep(500);\n-\n         PagedIterable<ReadReceipt> readReceiptsResponse = new PagedIterable<ReadReceipt>(chatThreadClient.listReadReceipts());\n \n         // process the iterableByPage", "originalCommit": "e20a252b61d7e4df2bc9c258d58bc07da8f8860f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwODIwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16041#discussion_r501308205", "bodyText": "I believe the 404 was happening sporadically when the message was sent, and we then send a readreceipt\n\nchatThreadClient.sendReadReceiptWithResponse(response.getId())\nAt least that was the line that failed 1 time in the .NET sdk. We could leave this one as is for now, but if we see that happening I agree with @minnieliu .\nIn the .NET version, I took the entire sendmessage/sendreadreceipt, getreadreceipts out of the live workflow into the Playback mode to avoid flakiness", "author": "juancamilor", "createdAt": "2020-10-07T21:02:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwNDc0OQ=="}], "type": "inlineReview"}, {"oid": "31984cdabed31a19f5ddf6e846d90fdd4798e215", "url": "https://github.com/Azure/azure-sdk-for-java/commit/31984cdabed31a19f5ddf6e846d90fdd4798e215", "message": "Added FixedDelay retry strategy to Live tests to avoid flakiness. Updated the pipeline to run in 'Live' mode instead of 'Record'", "committedDate": "2020-10-07T23:08:11Z", "type": "commit"}]}