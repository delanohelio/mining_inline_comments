{"pr_number": 14343, "pr_title": "Update tables public API", "pr_createdAt": "2020-08-21T20:03:36Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14343", "timeline": [{"oid": "32b42a7ee41030a14a09047fcf4756f920f7d1fe", "url": "https://github.com/Azure/azure-sdk-for-java/commit/32b42a7ee41030a14a09047fcf4756f920f7d1fe", "message": "Remove old / duplicate classes", "committedDate": "2020-08-13T22:35:40Z", "type": "commit"}, {"oid": "69f1d6a66a980d702b9c1207b71610988ba8ffae", "url": "https://github.com/Azure/azure-sdk-for-java/commit/69f1d6a66a980d702b9c1207b71610988ba8ffae", "message": "Standardize names of Models types\n\nAlso remove TSC.getTable and TC.create, they are no longer part of the\npublic API", "committedDate": "2020-08-13T23:58:21Z", "type": "commit"}, {"oid": "81628974841a2a85062ec3873a0c4ddc2862616a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/81628974841a2a85062ec3873a0c4ddc2862616a", "message": "Update snippets", "committedDate": "2020-08-14T00:04:19Z", "type": "commit"}, {"oid": "48066f086b18f46925ae08c2ea19d97f276bfaba", "url": "https://github.com/Azure/azure-sdk-for-java/commit/48066f086b18f46925ae08c2ea19d97f276bfaba", "message": "Fix tests", "committedDate": "2020-08-14T00:17:56Z", "type": "commit"}, {"oid": "10c42e051216d3b6dbc8b092c5dd5e0e76ce9380", "url": "https://github.com/Azure/azure-sdk-for-java/commit/10c42e051216d3b6dbc8b092c5dd5e0e76ce9380", "message": "Do not return the created object from create* APIs\n\nOther upsert / merge / update APIs do not have this feature, so it's\ninconsistent to return the created object when the other APIs return\nvoid. And since we no longer need it, request that the create* APIs\nreturn no content to reduce the payload size.", "committedDate": "2020-08-20T22:25:32Z", "type": "commit"}, {"oid": "7e265af6dadb0ebae968b8f81a018c763fb0c781", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7e265af6dadb0ebae968b8f81a018c763fb0c781", "message": "Update test recordings to account for the create* API changes", "committedDate": "2020-08-20T22:25:57Z", "type": "commit"}, {"oid": "333aa0b2ae49860d3331134254e8d1f7a2d28600", "url": "https://github.com/Azure/azure-sdk-for-java/commit/333aa0b2ae49860d3331134254e8d1f7a2d28600", "message": "Final API changes", "committedDate": "2020-08-21T21:18:41Z", "type": "commit"}, {"oid": "333aa0b2ae49860d3331134254e8d1f7a2d28600", "url": "https://github.com/Azure/azure-sdk-for-java/commit/333aa0b2ae49860d3331134254e8d1f7a2d28600", "message": "Final API changes", "committedDate": "2020-08-21T21:18:41Z", "type": "forcePushed"}, {"oid": "b7d945d1f6327fbc0309b71372bc8f76e6625994", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b7d945d1f6327fbc0309b71372bc8f76e6625994", "message": "Add missing ServiceMethod annotations", "committedDate": "2020-08-24T18:26:44Z", "type": "commit"}, {"oid": "7fc1c5b4b3248e73658a266c3c0f189673e29429", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7fc1c5b4b3248e73658a266c3c0f189673e29429", "message": "Fix verify failures", "committedDate": "2020-08-24T19:27:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTg3NzAxMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14343#discussion_r475877010", "bodyText": "I'm usually not a fan of aligning parameters, because we have some seriously long method/class names and the parameters get mushed against the right margin.", "author": "conniey", "createdAt": "2020-08-24T20:33:08Z", "path": "sdk/tables/azure-data-tables/src/main/java/com/azure/data/tables/TableClient.java", "diffHunk": "@@ -244,89 +241,123 @@ public void updateEntity(Entity entity, boolean ifUnchanged, UpdateMode updateMo\n      * @return a response\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public Response<Void> updateEntityWithResponse(Entity entity, boolean ifUnchanged, UpdateMode updateMode,\n-        Duration timeout, Context context) {\n+    public Response<Void> updateEntityWithResponse(TableEntity entity, boolean ifUnchanged, UpdateMode updateMode,\n+                                                   Duration timeout, Context context) {", "originalCommit": "7fc1c5b4b3248e73658a266c3c0f189673e29429", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkwMzI1Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14343#discussion_r475903253", "bodyText": "Fair enough, I don't have a strong opinion, so I just went with whatever IntelliJ did by default. If we decide to care more about this we can probably encode it in an editorconfig (or more likely an intellij settings file, since this might be IDE-specific).", "author": "bsiegel", "createdAt": "2020-08-24T21:25:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTg3NzAxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTg4MDExNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14343#discussion_r475880117", "bodyText": "I'd consider making new ListTablesOptions() a member variable so we don't have to allocate a new object to it for every call.", "author": "conniey", "createdAt": "2020-08-24T20:38:57Z", "path": "sdk/tables/azure-data-tables/src/main/java/com/azure/data/tables/TableServiceClient.java", "diffHunk": "@@ -88,16 +77,26 @@ public void deleteTable(String tableName) {\n         return client.deleteTableWithResponse(tableName, context).block();\n     }\n \n+    /**\n+     * query all the tables under the storage account\n+     *\n+     * @return a list of tables that meet the query\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public PagedIterable<TableItem> listTables() {\n+        return new PagedIterable<>(client.listTables(new ListTablesOptions()));", "originalCommit": "7fc1c5b4b3248e73658a266c3c0f189673e29429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a1da6ef7b5b24a574061d13abbb342856e388a36", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a1da6ef7b5b24a574061d13abbb342856e388a36", "message": "Code review suggestions", "committedDate": "2020-08-24T21:28:58Z", "type": "commit"}]}