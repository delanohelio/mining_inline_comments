{"pr_number": 10182, "pr_title": "Added isHidden API and make retrievable API private", "pr_createdAt": "2020-04-14T17:00:20Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/10182", "timeline": [{"oid": "c45a51aeeeb1cef2ced717a6d7fae961100849eb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c45a51aeeeb1cef2ced717a6d7fae961100849eb", "message": "Make changes to isHidden", "committedDate": "2020-04-14T17:15:23Z", "type": "commit"}, {"oid": "c45a51aeeeb1cef2ced717a6d7fae961100849eb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c45a51aeeeb1cef2ced717a6d7fae961100849eb", "message": "Make changes to isHidden", "committedDate": "2020-04-14T17:15:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMyMjY4Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408322683", "bodyText": "Do we want to have both? What do the other languages have for this?", "author": "alzimmermsft", "createdAt": "2020-04-14T17:47:47Z", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchServiceVersion.java", "diffHunk": "@@ -9,7 +9,8 @@\n  * The versions of Azure Search supported by this client library.\n  */\n public enum SearchServiceVersion implements ServiceVersion {\n-    V2019_05_06(\"2019-05-06\");\n+    V2019_05_06(\"2019-05-06\"),", "originalCommit": "c45a51aeeeb1cef2ced717a6d7fae961100849eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQwOTkyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408409922", "bodyText": "They all have one service version. Will double check", "author": "sima-zhu", "createdAt": "2020-04-14T20:19:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMyMjY4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMyMjkzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408322931", "bodyText": "Should latest be using the preview version?", "author": "alzimmermsft", "createdAt": "2020-04-14T17:48:08Z", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchServiceVersion.java", "diffHunk": "@@ -9,7 +9,8 @@\n  * The versions of Azure Search supported by this client library.\n  */\n public enum SearchServiceVersion implements ServiceVersion {\n-    V2019_05_06(\"2019-05-06\");\n+    V2019_05_06(\"2019-05-06\"),\n+    V2019_05_06_Preview(\"2019-05-06-preview\");", "originalCommit": "c45a51aeeeb1cef2ced717a6d7fae961100849eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxMDA0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408410046", "bodyText": "Yes. Good catch", "author": "sima-zhu", "createdAt": "2020-04-14T20:19:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMyMjkzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM0ODM3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408348374", "bodyText": "This may cause issues if the deserializer on the service side doesn't ignore unknown properties. Is there a way this change could be done which doesn't include adding a new property to the model?", "author": "alzimmermsft", "createdAt": "2020-04-14T18:30:09Z", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/models/Field.java", "diffHunk": "@@ -224,6 +224,17 @@\n     @JsonProperty(value = \"fields\")\n     private List<Field> fields;\n \n+    /*\n+     * A value indicating whether the field will be returned in a search\n+     * result. This property must be true for key fields, and must be null for\n+     * complex fields. You can hide a field from search results if you want to\n+     * use it only as a filter, for sorting, or for scoring. This property can\n+     * also be changed on existing fields and enabling it does not cause an\n+     * increase in index storage requirements.\n+     */\n+    @JsonProperty(value = \"hidden\")", "originalCommit": "c45a51aeeeb1cef2ced717a6d7fae961100849eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxMDE4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408410180", "bodyText": "Can use @JsonIgnore", "author": "sima-zhu", "createdAt": "2020-04-14T20:19:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM0ODM3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1MDMwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408350303", "bodyText": "You'll want to fix the documentation to be negated, I have a feeling the key field shouldn't be hidden.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * returned in a search result. This property must be true for key fields,\n          \n          \n            \n                 * returned in a search result. This property must be false for key fields,", "author": "alzimmermsft", "createdAt": "2020-04-14T18:33:22Z", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/models/Field.java", "diffHunk": "@@ -759,4 +770,35 @@ public Field setFields(List<Field> fields) {\n         this.fields = fields;\n         return this;\n     }\n+\n+    /**\n+     * Get the hidden property: A value indicating whether the field will be\n+     * returned in a search result. This property must be true for key fields,", "originalCommit": "c45a51aeeeb1cef2ced717a6d7fae961100849eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxMTkwNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408411907", "bodyText": "Most of the javadoc is the same as .net. Will double check", "author": "sima-zhu", "createdAt": "2020-04-14T20:22:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1MDMwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1MDcwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408350706", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * and must be null for complex fields. You can hide a field from search\n          \n          \n            \n                 * and must be true for complex fields. You can hide a field from search", "author": "alzimmermsft", "createdAt": "2020-04-14T18:33:59Z", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/models/Field.java", "diffHunk": "@@ -759,4 +770,35 @@ public Field setFields(List<Field> fields) {\n         this.fields = fields;\n         return this;\n     }\n+\n+    /**\n+     * Get the hidden property: A value indicating whether the field will be\n+     * returned in a search result. This property must be true for key fields,\n+     * and must be null for complex fields. You can hide a field from search", "originalCommit": "c45a51aeeeb1cef2ced717a6d7fae961100849eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODUwMDYzOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408500639", "bodyText": "This one keep the same as retrievable comments.\n\nThis property must be true for key fields, and it must be null for complex fields.", "author": "sima-zhu", "createdAt": "2020-04-14T23:50:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1MDcwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk4MDE3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408980174", "bodyText": "Shouldn't keep the Javadocs the same between hidden and retrievable since they are inverses of each other. So, if the key field needs to be retrievable = true it must be hidden = false/null and the same applies for complex fields.", "author": "alzimmermsft", "createdAt": "2020-04-15T16:37:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1MDcwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk4MTc1Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408981757", "bodyText": "Scratch this comment, missed the logic where hidden == null means retrievable == null.", "author": "alzimmermsft", "createdAt": "2020-04-15T16:39:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1MDcwNg=="}], "type": "inlineReview"}, {"oid": "6cf6c2196441b338fe7f3a85ebe724292c063b10", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6cf6c2196441b338fe7f3a85ebe724292c063b10", "message": "Update sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/models/Field.java\n\nCo-Authored-By: Alan Zimmer <48699787+alzimmermsft@users.noreply.github.com>", "committedDate": "2020-04-14T23:48:49Z", "type": "commit"}, {"oid": "71460fb72b76fe1d179448ecc425cea761046de7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/71460fb72b76fe1d179448ecc425cea761046de7", "message": "Address comments", "committedDate": "2020-04-14T23:50:58Z", "type": "commit"}, {"oid": "5643fad712fad1ced5300a5942ec8e021abb4736", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5643fad712fad1ced5300a5942ec8e021abb4736", "message": "Merge branch 'isHidden' of https://github.com/sima-zhu/azure-sdk-for-java into isHidden", "committedDate": "2020-04-14T23:51:21Z", "type": "commit"}, {"oid": "f8e5c3ff1244985be51565a1a1104bdd5a6abe8e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f8e5c3ff1244985be51565a1a1104bdd5a6abe8e", "message": "revert the service version change", "committedDate": "2020-04-15T02:31:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk4MjEwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r408982103", "bodyText": "Need to update this spot as well \ud83d\ude04\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * returned in a search result. This property must be true for key fields,\n          \n          \n            \n                 * returned in a search result. This property must be false for key fields,", "author": "alzimmermsft", "createdAt": "2020-04-15T16:40:06Z", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/models/Field.java", "diffHunk": "@@ -759,4 +771,35 @@ public Field setFields(List<Field> fields) {\n         this.fields = fields;\n         return this;\n     }\n+\n+    /**\n+     * Get the hidden property: A value indicating whether the field will be\n+     * returned in a search result. This property must be false for key fields,\n+     * and must be null for complex fields. You can hide a field from search\n+     * results if you want to use it only as a filter, for sorting, or for\n+     * scoring. This property can also be changed on existing fields and\n+     * enabling it does not cause an increase in index storage requirements.\n+     *\n+     * @return the hidden value.\n+     */\n+    public Boolean isHidden() {\n+        return retrievable == null ? null : !retrievable;\n+    }\n+\n+    /**\n+     * Set the hidden property: A value indicating whether the field will be\n+     * returned in a search result. This property must be true for key fields,", "originalCommit": "f8e5c3ff1244985be51565a1a1104bdd5a6abe8e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "75eea8f032a3953aec1f74770adea612fe49cb1e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/75eea8f032a3953aec1f74770adea612fe49cb1e", "message": "Change description in transform", "committedDate": "2020-04-15T16:49:46Z", "type": "commit"}, {"oid": "721651bb013c49e82150bf47ca09b429ddf697e5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/721651bb013c49e82150bf47ca09b429ddf697e5", "message": "regen the code", "committedDate": "2020-04-15T17:05:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwMTQzMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r409001433", "bodyText": "Do we need these private getters and setters at all? We can just set the member variable.", "author": "conniey", "createdAt": "2020-04-15T17:10:49Z", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/models/Field.java", "diffHunk": "@@ -314,7 +326,7 @@ public Field setKey(Boolean key) {\n      *\n      * @return the retrievable value.\n      */\n-    public Boolean isRetrievable() {\n+    private Boolean isRetrievable() {", "originalCommit": "721651bb013c49e82150bf47ca09b429ddf697e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwNDczNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r409004734", "bodyText": "Oh. I see. This is generated", "author": "conniey", "createdAt": "2020-04-15T17:16:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwMTQzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwNzk2MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r409007960", "bodyText": "This is auto-gen code. I hope there is an easy way to remove getter and setter. Unfortunately, we have to write tons of codes in transformation. It is not a huge burden to leave it here. Try to balance the maintenance of transformation file and model structure here.", "author": "sima-zhu", "createdAt": "2020-04-15T17:21:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwMTQzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwMjcwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r409002709", "bodyText": "This would be easier to understand if you do:\nif (this.hidden != null) {\n    this.retrievable = !this.hidden;\n}\nShouldn't the retrievable logic be done after setting the member variable? not before?", "author": "conniey", "createdAt": "2020-04-15T17:12:55Z", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/models/Field.java", "diffHunk": "@@ -759,4 +771,35 @@ public Field setFields(List<Field> fields) {\n         this.fields = fields;\n         return this;\n     }\n+\n+    /**\n+     * Get the hidden property: A value indicating whether the field will be\n+     * returned in a search result. This property must be false for key fields,\n+     * and must be null for complex fields. You can hide a field from search\n+     * results if you want to use it only as a filter, for sorting, or for\n+     * scoring. This property can also be changed on existing fields and\n+     * enabling it does not cause an increase in index storage requirements.\n+     *\n+     * @return the hidden value.\n+     */\n+    public Boolean isHidden() {\n+        return retrievable == null ? null : !retrievable;\n+    }\n+\n+    /**\n+     * Set the hidden property: A value indicating whether the field will be\n+     * returned in a search result. This property must be false for key fields,\n+     * and must be null for complex fields. You can hide a field from search\n+     * results if you want to use it only as a filter, for sorting, or for\n+     * scoring. This property can also be changed on existing fields and\n+     * enabling it does not cause an increase in index storage requirements.\n+     *\n+     * @param hidden the hidden value to set.\n+     * @return the Field object itself.\n+     */\n+    public Field setHidden(Boolean hidden) {\n+        retrievable = this.hidden == null ? null : !this.hidden;", "originalCommit": "721651bb013c49e82150bf47ca09b429ddf697e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwNTA4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r409005087", "bodyText": "setHidden is the only entry to set retrievable field.\nThe logic needs to change to\nif (hidden != null) {\n    this.retrievable = !hidden;\n}\nthis.hidden = hidden;\n\nGood catch", "author": "sima-zhu", "createdAt": "2020-04-15T17:16:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwMjcwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwOTcwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10182#discussion_r409009706", "bodyText": "One line change is easy to do in transformer. :)\nI would like to switch to\nthis.hidden = hidden;\nretrievable = this.hidden == null ? null : !this.hidden;", "author": "sima-zhu", "createdAt": "2020-04-15T17:24:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwMjcwOQ=="}], "type": "inlineReview"}, {"oid": "c990c234a18e9070d8476d6f1a4571afd016eb7d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c990c234a18e9070d8476d6f1a4571afd016eb7d", "message": "Address feedback", "committedDate": "2020-04-15T17:32:42Z", "type": "commit"}]}