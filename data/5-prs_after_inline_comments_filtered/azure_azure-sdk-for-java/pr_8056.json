{"pr_number": 8056, "pr_title": "improves logic to avoid deserializing PartitionKeyInternal from json header in AddressResolver", "pr_createdAt": "2020-02-09T08:55:52Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/8056", "timeline": [{"oid": "772c3c817a4f6971b1f66b3faff1178bd83e5299", "url": "https://github.com/Azure/azure-sdk-for-java/commit/772c3c817a4f6971b1f66b3faff1178bd83e5299", "message": "improves logic to avoid deserializing parition-key-internal after serialization", "committedDate": "2020-02-09T08:52:48Z", "type": "commit"}, {"oid": "9b35494f589220af75faee12a0c4a5ab3284dc1c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9b35494f589220af75faee12a0c4a5ab3284dc1c", "message": "fixed test", "committedDate": "2020-02-09T09:07:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc3NDg5MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8056#discussion_r376774890", "bodyText": "What \"foot\" represents ?", "author": "kushagraThapar", "createdAt": "2020-02-09T11:15:56Z", "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/directconnectivity/AddressResolverTest.java", "diffHunk": "@@ -211,7 +213,9 @@ private void TestCacheRefreshWhileRouteByPartitionKey(\n \n         request.forceNameCacheRefresh = forceNameCacheRefresh;\n         request.forcePartitionKeyRangeRefresh = forceRoutingMapRefresh;\n-        request.getHeaders().put(HttpConstants.HttpHeaders.PARTITION_KEY, new PartitionKey(\"foo\").toString());\n+        PartitionKey pk = new PartitionKey(\"foot\");", "originalCommit": "9b35494f589220af75faee12a0c4a5ab3284dc1c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc5NzExOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8056#discussion_r376797119", "bodyText": "that's pk value name. changed back to foo.", "author": "moderakh", "createdAt": "2020-02-09T16:35:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc3NDg5MA=="}], "type": "inlineReview"}, {"oid": "be17b2f567829ef31c4970be88eaf6256d8662d4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/be17b2f567829ef31c4970be88eaf6256d8662d4", "message": "test pk value chnage", "committedDate": "2020-02-09T16:34:52Z", "type": "commit"}, {"oid": "baad861cf899dc91f68545a0ed6477fa7a073cd7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/baad861cf899dc91f68545a0ed6477fa7a073cd7", "message": "set PartitionKeyInternal in DSR everywhere\n\n* set partitionKeyInternal in all places PartitionKey Header is set in DSR\n* added a safe guard in AddressResolver to deserialize PartitionKeyHeader if PartitionKeyInternal\n  is not present in DSR", "committedDate": "2020-02-10T00:06:21Z", "type": "commit"}, {"oid": "15882252cdac3b253e99f0afc8c8d53acf2de25e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/15882252cdac3b253e99f0afc8c8d53acf2de25e", "message": "minor safe guard for optimization", "committedDate": "2020-02-10T00:09:51Z", "type": "commit"}]}