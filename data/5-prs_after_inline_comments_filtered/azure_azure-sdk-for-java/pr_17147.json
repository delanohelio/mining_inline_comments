{"pr_number": 17147, "pr_title": "[Storage] Upload Blob From Url.", "pr_createdAt": "2020-11-03T23:31:56Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/17147", "timeline": [{"oid": "eb6c4da06e61396afe67fd0cdb6d26d0ab9a0fbf", "url": "https://github.com/Azure/azure-sdk-for-java/commit/eb6c4da06e61396afe67fd0cdb6d26d0ab9a0fbf", "message": "generate code for put blob from url.", "committedDate": "2020-11-03T23:31:03Z", "type": "commit"}, {"oid": "395ff1057a85a35ea4bba1f751d756442f0abb7a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/395ff1057a85a35ea4bba1f751d756442f0abb7a", "message": "that too.", "committedDate": "2020-11-04T05:23:06Z", "type": "commit"}, {"oid": "a1a6f3cc1898f37baf66120b96f48c5286d5fe46", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a1a6f3cc1898f37baf66120b96f48c5286d5fe46", "message": "draft block blob api.", "committedDate": "2020-11-04T06:08:31Z", "type": "commit"}, {"oid": "f4adbf0d7ddecbc92a7666fa9ccdd83276387991", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f4adbf0d7ddecbc92a7666fa9ccdd83276387991", "message": "draft blobclient.", "committedDate": "2020-11-04T06:17:47Z", "type": "commit"}, {"oid": "27b2f2bc86b3f398b79ab32b282a2533962f9918", "url": "https://github.com/Azure/azure-sdk-for-java/commit/27b2f2bc86b3f398b79ab32b282a2533962f9918", "message": "this works.", "committedDate": "2020-11-04T19:20:40Z", "type": "commit"}, {"oid": "c4576157c5ddfc6db4c47593591954f8ebfa0aaf", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c4576157c5ddfc6db4c47593591954f8ebfa0aaf", "message": "no star imports.", "committedDate": "2020-11-04T19:23:45Z", "type": "commit"}, {"oid": "fdb3f0fd87680780a399abc68f117a3213397728", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fdb3f0fd87680780a399abc68f117a3213397728", "message": "more tests.", "committedDate": "2020-11-04T20:25:30Z", "type": "commit"}, {"oid": "edddc76a0db1c44bdd4e45a9cee7ef2ad07ab10d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/edddc76a0db1c44bdd4e45a9cee7ef2ad07ab10d", "message": "more tests.", "committedDate": "2020-11-04T21:05:12Z", "type": "commit"}, {"oid": "1dc2ff2df0ff4f9f49654856e8354d9669166011", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1dc2ff2df0ff4f9f49654856e8354d9669166011", "message": "fix test.", "committedDate": "2020-11-04T21:25:02Z", "type": "commit"}, {"oid": "6a20f8565db683d8c5f781a83d599c5a82972301", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6a20f8565db683d8c5f781a83d599c5a82972301", "message": "re-record ?", "committedDate": "2020-11-04T21:38:40Z", "type": "commit"}, {"oid": "6caaacefbf5896677f1a10ddea32635415436ca1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6caaacefbf5896677f1a10ddea32635415436ca1", "message": "that was bad idea.", "committedDate": "2020-11-04T21:54:59Z", "type": "commit"}, {"oid": "182ec4f7204545bf1ce308690b8fd2884ddcf5a8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/182ec4f7204545bf1ce308690b8fd2884ddcf5a8", "message": "revert blob client changes.", "committedDate": "2020-11-04T23:21:15Z", "type": "commit"}, {"oid": "c83c25ebb7f0c9d4c512349cf00d485cf108e814", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c83c25ebb7f0c9d4c512349cf00d485cf108e814", "message": "docs + checkstyle.", "committedDate": "2020-11-05T04:40:28Z", "type": "commit"}, {"oid": "f33b9e3cc8f016d8c5ea9c21fc3a4674cee6cfdb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f33b9e3cc8f016d8c5ea9c21fc3a4674cee6cfdb", "message": "samples.", "committedDate": "2020-11-05T04:56:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODIxMjU3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17147#discussion_r518212579", "bodyText": "BlobUploadFromUrlOptions", "author": "rickle-msft", "createdAt": "2020-11-05T17:05:47Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/options/BlobUploadFromUrlOptions.java", "diffHunk": "@@ -0,0 +1,179 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.storage.blob.options;\n+\n+import com.azure.core.util.CoreUtils;\n+import com.azure.storage.blob.models.AccessTier;\n+import com.azure.storage.blob.models.BlobHttpHeaders;\n+import com.azure.storage.blob.models.BlobRequestConditions;\n+import com.azure.storage.common.implementation.StorageImplUtils;\n+\n+import java.util.Map;\n+\n+/**\n+ * Extended options that may be passed when uploading a Block Blob from URL.\n+ */\n+public class BlobUploadFromUrlOptions {\n+    private final String sourceUrl;\n+    private BlobHttpHeaders headers;\n+    private Map<String, String> metadata;\n+    private Map<String, String> tags;\n+    private AccessTier tier;\n+    private byte[] contentMd5;\n+    private BlobRequestConditions destinationRequestConditions;\n+    private BlobRequestConditions sourceRequestConditions;\n+    private Boolean copySourceBlobProperties;\n+\n+    /**\n+     * @param sourceUrl The source URL to upload from.\n+     */\n+    public BlobUploadFromUrlOptions(String sourceUrl) {\n+        StorageImplUtils.assertNotNull(\"copySource\", sourceUrl);\n+        this.sourceUrl = sourceUrl;\n+    }\n+\n+    /**\n+     * @return The source URL to upload from.\n+     */\n+    public String getSourceUrl() {\n+        return this.sourceUrl;\n+    }\n+\n+    /**\n+     * @return {@link BlobHttpHeaders}\n+     */\n+    public BlobHttpHeaders getHeaders() {\n+        return headers;\n+    }\n+\n+    /**\n+     * @param headers {@link BlobHttpHeaders}\n+     * @return The updated {@code AppendBlobCreateOptions}", "originalCommit": "f33b9e3cc8f016d8c5ea9c21fc3a4674cee6cfdb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODIxMzc1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17147#discussion_r518213751", "bodyText": "Or just options.", "author": "rickle-msft", "createdAt": "2020-11-05T17:07:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODIxMjU3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI0NjM2Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17147#discussion_r518246366", "bodyText": "If this API is on block blob, should the options be BlockBlobUploadFromUrlOptions?", "author": "gapra-msft", "createdAt": "2020-11-05T17:51:42Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/options/BlobUploadFromUrlOptions.java", "diffHunk": "@@ -0,0 +1,179 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.storage.blob.options;\n+\n+import com.azure.core.util.CoreUtils;\n+import com.azure.storage.blob.models.AccessTier;\n+import com.azure.storage.blob.models.BlobHttpHeaders;\n+import com.azure.storage.blob.models.BlobRequestConditions;\n+import com.azure.storage.common.implementation.StorageImplUtils;\n+\n+import java.util.Map;\n+\n+/**\n+ * Extended options that may be passed when uploading a Block Blob from URL.\n+ */\n+public class BlobUploadFromUrlOptions {", "originalCommit": "f33b9e3cc8f016d8c5ea9c21fc3a4674cee6cfdb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI0Nzk3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17147#discussion_r518247971", "bodyText": "@gapra-msft The short term decision is to put this on Block Blob only to let it mature, but long term goal is to put this on BlobClient as well and advertise as first choice over copy.", "author": "kasobol-msft", "createdAt": "2020-11-05T17:54:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI0NjM2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI1MDE5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17147#discussion_r518250198", "bodyText": "Cool. Sounds good to me then", "author": "gapra-msft", "createdAt": "2020-11-05T17:57:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI0NjM2Ng=="}], "type": "inlineReview"}, {"oid": "437a142d132afbf306ccc299e58736018f9eb6eb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/437a142d132afbf306ccc299e58736018f9eb6eb", "message": "Revert \"that was bad idea.\"\n\nThis reverts commit 6caaacefbf5896677f1a10ddea32635415436ca1.", "committedDate": "2020-11-05T17:59:27Z", "type": "commit"}, {"oid": "cce4d185840e88ff6830df5ad0d730866d89f562", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cce4d185840e88ff6830df5ad0d730866d89f562", "message": "bring back conditions tests.", "committedDate": "2020-11-05T18:11:10Z", "type": "commit"}, {"oid": "72ed7e7810046e35aef5497db19b5382b571dc47", "url": "https://github.com/Azure/azure-sdk-for-java/commit/72ed7e7810046e35aef5497db19b5382b571dc47", "message": "fix javadoc.", "committedDate": "2020-11-05T18:15:57Z", "type": "commit"}]}