{"pr_number": 13085, "pr_title": "mgmt, update user-agent", "pr_createdAt": "2020-07-13T09:11:48Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13085", "timeline": [{"oid": "76f0bf3a98e5ed190d748ae79bec3b2b0bdbdfea", "url": "https://github.com/Azure/azure-sdk-for-java/commit/76f0bf3a98e5ed190d748ae79bec3b2b0bdbdfea", "message": "update user-agent", "committedDate": "2020-07-13T09:09:42Z", "type": "commit"}, {"oid": "05db46a2ac981638aa320ae92bc2be458512b7f2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/05db46a2ac981638aa320ae92bc2be458512b7f2", "message": "fix for toReactorContext issue", "committedDate": "2020-07-14T05:24:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEyMjg4NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13085#discussion_r454122884", "bodyText": "why sdk version hardcoded?", "author": "yungezz", "createdAt": "2020-07-14T06:06:53Z", "path": "sdk/resources/mgmt/src/main/java/com/azure/resourcemanager/resources/fluentcore/AzureServiceClient.java", "diffHunk": "@@ -83,24 +70,11 @@ public SerializerAdapter getSerializerAdapter() {\n      * @return the default client context.\n      */\n     public Context getContext() {\n-        Context context = new Context(\"java.version\", JAVA_VERSION);\n-        if (!CoreUtils.isNullOrEmpty(OS_NAME)) {\n-            context = context.addData(\"os.name\", OS_NAME);\n-        }\n-        if (!CoreUtils.isNullOrEmpty(OS_VERSION)) {\n-            context = context.addData(\"os.version\", OS_VERSION);\n-        }\n         if (sdkName == null) {\n-            String packageName = this.getClass().getPackage().getName();\n-            if (packageName.endsWith(\".models\")) {\n-                sdkName = packageName.substring(0, packageName.length() - \".models\".length());\n-            } else {\n-                sdkName = packageName;\n-            }\n+            sdkName = this.getClass().getPackage().getName();\n         }\n-        context = context.addData(\"Sdk-Name\", sdkName);\n-        context = context.addData(\"Sdk-Version\", SDK_VERSION);\n-        return context;\n+        return new Context(\"Sdk-Name\", sdkName)\n+            .addData(\"Sdk-Version\", SDK_VERSION);", "originalCommit": "05db46a2ac981638aa320ae92bc2be458512b7f2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEyNTYzMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13085#discussion_r454125630", "bodyText": "there might be other approach. not investigated yet.", "author": "weidongxu-microsoft", "createdAt": "2020-07-14T06:14:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEyMjg4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgzNjAyNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13085#discussion_r454836024", "bodyText": "got it. let's fix it before GA.", "author": "yungezz", "createdAt": "2020-07-15T07:04:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEyMjg4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg0NDI4Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13085#discussion_r454844283", "bodyText": "already fixed in this PR.\nnow the flow is:\n\nmaven package the project, one step it would populate azure.properties with its current project.version.\njar now has this azure.properties packaged and released with the jar\nruntime, code read version from azure.properties", "author": "weidongxu-microsoft", "createdAt": "2020-07-15T07:21:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEyMjg4NA=="}], "type": "inlineReview"}, {"oid": "2e33ff8f2ff4630fd54caafc9cb01a8e451b42ec", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2e33ff8f2ff4630fd54caafc9cb01a8e451b42ec", "message": "copy UserAgentUtil until keyvault data", "committedDate": "2020-07-14T06:13:15Z", "type": "commit"}, {"oid": "0fd94a5426981ea5a61dbb3e8fb4b106c3ffa210", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0fd94a5426981ea5a61dbb3e8fb4b106c3ffa210", "message": "read version from properties prepared by maven", "committedDate": "2020-07-14T06:42:33Z", "type": "commit"}, {"oid": "912f1f7841774b034e95e3cb4d4e6be4d883e028", "url": "https://github.com/Azure/azure-sdk-for-java/commit/912f1f7841774b034e95e3cb4d4e6be4d883e028", "message": "nit", "committedDate": "2020-07-14T07:02:48Z", "type": "commit"}, {"oid": "48effddd758fb6447f36758648ad8101d4a505ad", "url": "https://github.com/Azure/azure-sdk-for-java/commit/48effddd758fb6447f36758648ad8101d4a505ad", "message": "fix checkstyle", "committedDate": "2020-07-14T07:07:24Z", "type": "commit"}, {"oid": "74dc2c201359f6be7802bf98d854bbd1ee03681e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/74dc2c201359f6be7802bf98d854bbd1ee03681e", "message": "nit", "committedDate": "2020-07-14T09:24:46Z", "type": "commit"}]}