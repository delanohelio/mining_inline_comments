{"pr_number": 16233, "pr_title": "Mgmt: Fix live test error", "pr_createdAt": "2020-10-13T07:04:10Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/16233", "timeline": [{"oid": "6b4d69b5518cdda087a758313074b257e454e732", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6b4d69b5518cdda087a758313074b257e454e732", "message": "fix sample test", "committedDate": "2020-10-13T06:10:15Z", "type": "commit"}, {"oid": "b551d7f3d4fe7495ea5f055767d598453d813f98", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b551d7f3d4fe7495ea5f055767d598453d813f98", "message": "fix sample", "committedDate": "2020-10-13T07:02:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcxMjY5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16233#discussion_r503712691", "bodyText": "would need to change authenticate(httpPipeline, profile) in #16144", "author": "ChenTanyi", "createdAt": "2020-10-13T07:05:17Z", "path": "sdk/resourcemanager/azure-resourcemanager-samples/src/test/java/com/azure/resourcemanager/samples/AppServiceSampleLiveOnlyTests.java", "diffHunk": "@@ -136,8 +142,11 @@ public void testManageFunctionAppLogs() throws IOException {\n         if (skipInPlayback()) {\n             return;\n         }\n-        // require a longer read timeout in HttpClient\n-        // e.g., new NettyAsyncHttpClientBuilder().readTimeout(Duration.ofMinutes(10))\n+        azureResourceManager = AzureResourceManager.authenticate(\n+            setReadTimeout(azureResourceManager.storageAccounts().manager().httpPipeline(), Duration.ofMinutes(10)),\n+            new AzureProfile(azureResourceManager.tenantId(), azureResourceManager.subscriptionId(), AzureEnvironment.AZURE)\n+        )\n+            .withDefaultSubscription();", "originalCommit": "b551d7f3d4fe7495ea5f055767d598453d813f98", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcxMzU3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16233#discussion_r503713572", "bodyText": "Why vm size changes here?", "author": "xseeseesee", "createdAt": "2020-10-13T07:07:23Z", "path": "sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/kubernetescluster/samples/DeployImageFromContainerRegistryToKubernetes.java", "diffHunk": "@@ -144,8 +145,9 @@ public static boolean runSample(AzureResourceManager azureResourceManager, Strin\n                 .withServicePrincipalClientId(servicePrincipalClientId)\n                 .withServicePrincipalSecret(servicePrincipalSecret)\n                 .defineAgentPool(\"agentpool\")\n-                    .withVirtualMachineSize(ContainerServiceVMSizeTypes.STANDARD_D1_V2)\n+                    .withVirtualMachineSize(ContainerServiceVMSizeTypes.STANDARD_D2_V2)", "originalCommit": "b551d7f3d4fe7495ea5f055767d598453d813f98", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcxNjAzMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16233#discussion_r503716030", "bodyText": "The SYSTEM agent pool doesn't support 1 cpu VM", "author": "ChenTanyi", "createdAt": "2020-10-13T07:12:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcxMzU3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcxNTE3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16233#discussion_r503715172", "bodyText": "Long term, we might probably try fix this docker file (or rather, use JAR deployment directly).", "author": "weidongxu-microsoft", "createdAt": "2020-10-13T07:10:34Z", "path": "sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/appservice/samples/ManageLinuxWebAppCosmosDbByMsi.java", "diffHunk": "@@ -167,13 +167,18 @@ public static boolean runSample(AzureResourceManager azure, String clientId) thr\n             DockerClient dockerClient = DockerUtils.createDockerClient(azure, rgName, region,\n                     azureRegistry.loginServerUrl(), acrCredentials.username(), acrCredentials.accessKeys().get(AccessKeyType.PRIMARY));\n \n+            String imageName = \"tomcat:7.0-slim\";\n             String privateRepoUrl = azureRegistry.loginServerUrl() + \"/todoapp\";\n-            dockerClient.buildImageCmd(new File(ManageLinuxWebAppCosmosDbByMsi.class.getResource(\"/todoapp-cosmosdb/Dockerfile\").getFile()))", "originalCommit": "b551d7f3d4fe7495ea5f055767d598453d813f98", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcxNjYwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16233#discussion_r503716606", "bodyText": "I think maybe JAR is better, corresponding to windows version.", "author": "ChenTanyi", "createdAt": "2020-10-13T07:13:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzcxNTE3Mg=="}], "type": "inlineReview"}]}