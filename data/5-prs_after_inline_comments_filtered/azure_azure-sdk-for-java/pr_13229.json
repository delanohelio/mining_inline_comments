{"pr_number": 13229, "pr_title": "Update spring data cosmos to track2 cosmos SDK v4 dependency", "pr_createdAt": "2020-07-16T05:38:36Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13229", "timeline": [{"oid": "918038eb278009c44884254693870c90e85bef9f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/918038eb278009c44884254693870c90e85bef9f", "message": "Updated spring-data-cosmos to cosmos V4 dependency", "committedDate": "2020-07-16T05:15:34Z", "type": "commit"}, {"oid": "e7bc7063e7e69c413c72985956caf13994d94f58", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e7bc7063e7e69c413c72985956caf13994d94f58", "message": "Updated CosmosDbUtils name", "committedDate": "2020-07-16T05:20:10Z", "type": "commit"}, {"oid": "89abdd8f405e90c7e662a22771ff9976eef96044", "url": "https://github.com/Azure/azure-sdk-for-java/commit/89abdd8f405e90c7e662a22771ff9976eef96044", "message": "Merged latest master and resolved conflicts", "committedDate": "2020-07-16T05:37:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkwMDE3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13229#discussion_r455900179", "bodyText": "I noticed that one or two files were moved and that in the remove their names were changed from CosmosDB* to CosmosDb*. I am wondering if it makes sense to change the name of the next two files from CosmosDB* to Cosmos*.", "author": "David-Noble-at-work", "createdAt": "2020-07-16T16:05:10Z", "path": "sdk/cosmos/azure-spring-data-cosmos/src/main/java/com/azure/spring/data/cosmos/exception/CosmosDBAccessException.java", "diffHunk": "@@ -2,7 +2,7 @@\n // Licensed under the MIT License.", "originalCommit": "89abdd8f405e90c7e662a22771ff9976eef96044", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkwOTY1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13229#discussion_r455909655", "bodyText": "Yeah, good thought. I am trying to find consistency here - would like to change them to Cosmos* because of our new branding.", "author": "kushagraThapar", "createdAt": "2020-07-16T16:18:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkwMDE3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkwMTU0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13229#discussion_r455901546", "bodyText": "thank you for using UnsupportedOperationException rather than NotImplementedException as this reproduces our dependency on commons.", "author": "David-Noble-at-work", "createdAt": "2020-07-16T16:07:10Z", "path": "sdk/cosmos/azure-spring-data-cosmos/src/main/java/com/azure/spring/data/cosmos/repository/query/PartTreeReactiveCosmosQuery.java", "diffHunk": "@@ -41,7 +40,7 @@ protected DocumentQuery createQuery(ReactiveCosmosParameterAccessor accessor) {\n         final DocumentQuery query = creator.createQuery();\n \n         if (tree.isLimiting()) {", "originalCommit": "89abdd8f405e90c7e662a22771ff9976eef96044", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkwODkzNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13229#discussion_r455908937", "bodyText": "Yes, that was my exact intention behind this change. :)", "author": "kushagraThapar", "createdAt": "2020-07-16T16:17:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkwMTU0Ng=="}], "type": "inlineReview"}, {"oid": "b96615d9b78b463f22b5a3267f964063ef005f6f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b96615d9b78b463f22b5a3267f964063ef005f6f", "message": "Merge branch 'master' into spring_cosmos_track2_cosmos_v4_dependency", "committedDate": "2020-07-16T16:32:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkyMjY1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13229#discussion_r455922654", "bodyText": "I think the brand name is Cosmos not CosmosDB.", "author": "moderakh", "createdAt": "2020-07-16T16:39:50Z", "path": "sdk/cosmos/azure-spring-data-cosmos/src/main/java/com/azure/spring/data/cosmos/Constants.java", "diffHunk": "@@ -2,29 +2,29 @@\n // Licensed under the MIT License.\n package com.azure.spring.data.cosmos;\n \n-import com.azure.data.cosmos.IndexingMode;\n+import com.azure.cosmos.models.IndexingMode;\n \n /**\n  * Constants class of CosmosDB properties\n  */\n public final class Constants {\n \n-    public static final String DEFAULT_COLLECTION_NAME = \"\";\n-    public static final boolean DEFAULT_INDEXINGPOLICY_AUTOMATIC = true;\n-    public static final IndexingMode DEFAULT_INDEXINGPOLICY_MODE = IndexingMode.CONSISTENT;\n+    public static final String DEFAULT_CONTAINER_NAME = \"\";\n+    public static final boolean DEFAULT_INDEXING_POLICY_AUTOMATIC = true;\n+    public static final IndexingMode DEFAULT_INDEXING_POLICY_MODE = IndexingMode.CONSISTENT;\n     public static final String DEFAULT_REPOSITORY_IMPLEMENT_POSTFIX = \"Impl\";\n     public static final int DEFAULT_TIME_TO_LIVE = -1; // Indicates never expire\n     public static final boolean DEFAULT_AUTO_CREATE_CONTAINER = true;\n \n     public static final String ID_PROPERTY_NAME = \"id\";\n \n-    public static final String COSMOSDB_MODULE_NAME = \"cosmosdb\";\n-    public static final String COSMOSDB_MODULE_PREFIX = \"cosmosdb\";\n+    public static final String COSMOS_MODULE_NAME = \"cosmosDb\";", "originalCommit": "89abdd8f405e90c7e662a22771ff9976eef96044", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzNzcwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13229#discussion_r455937709", "bodyText": "Yes, I am pushing an update for these. thanks.", "author": "kushagraThapar", "createdAt": "2020-07-16T17:04:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkyMjY1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkyNTgxNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13229#discussion_r455925814", "bodyText": "is this a public class? I wonder if it should be CosmosDBFactory or CosmosFactory. the same comment applies to all other public surface area, should we go with CosmosDB or Cosmos on the public surface.\nour brand name is Cosmos", "author": "moderakh", "createdAt": "2020-07-16T16:45:01Z", "path": "sdk/cosmos/azure-spring-data-cosmos/src/main/java/com/azure/spring/data/cosmos/CosmosDBFactory.java", "diffHunk": "@@ -0,0 +1,123 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.spring.data.cosmos;\n+\n+import com.azure.cosmos.CosmosAsyncClient;\n+import com.azure.cosmos.CosmosClient;\n+import com.azure.cosmos.CosmosClientBuilder;\n+import com.azure.spring.data.cosmos.common.MacAddress;\n+import com.azure.spring.data.cosmos.common.PropertyLoader;\n+import com.azure.spring.data.cosmos.common.TelemetrySender;\n+import com.azure.spring.data.cosmos.config.CosmosDBConfig;\n+import org.apache.commons.lang3.reflect.FieldUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.lang.NonNull;\n+import org.springframework.util.Assert;\n+\n+import javax.annotation.PostConstruct;\n+import java.lang.reflect.Field;\n+\n+/**\n+ * Factory class for CosmosDb to create client\n+ */\n+public class CosmosDBFactory {", "originalCommit": "89abdd8f405e90c7e662a22771ff9976eef96044", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzNzkwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13229#discussion_r455937901", "bodyText": "Yes, changing all CosmosDB to Cosmos in next commit on this PR.", "author": "kushagraThapar", "createdAt": "2020-07-16T17:04:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkyNTgxNA=="}], "type": "inlineReview"}, {"oid": "f660fb009fe4a91616e6c9b5bb58c36e13692de5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f660fb009fe4a91616e6c9b5bb58c36e13692de5", "message": "Updated CosmosDB* CosmosDb* to Cosmos* class names for rebranding", "committedDate": "2020-07-16T18:30:43Z", "type": "commit"}, {"oid": "a68586a4e8fad1b8be88932c8aad06b7132319c1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a68586a4e8fad1b8be88932c8aad06b7132319c1", "message": "Fixed readme and code snippets", "committedDate": "2020-07-16T20:31:13Z", "type": "commit"}, {"oid": "2a95f0d80a618068d4c577aefed7eb34cdb8d3e1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2a95f0d80a618068d4c577aefed7eb34cdb8d3e1", "message": "Removed unused imports", "committedDate": "2020-07-16T20:55:25Z", "type": "commit"}, {"oid": "80a72036f8b419278e80f25cc357093de60971ef", "url": "https://github.com/Azure/azure-sdk-for-java/commit/80a72036f8b419278e80f25cc357093de60971ef", "message": "Fixed code snippets because of unused removed import:", "committedDate": "2020-07-16T21:37:01Z", "type": "commit"}]}