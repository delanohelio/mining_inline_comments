{"pr_number": 14785, "pr_title": "Add commanline options to the samples code.", "pr_createdAt": "2020-09-03T18:16:44Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14785", "timeline": [{"oid": "b79cb5aa6c17d5d79277ed2afa4617af6b21dc2d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b79cb5aa6c17d5d79277ed2afa4617af6b21dc2d", "message": "Add parser functionality", "committedDate": "2020-09-03T18:09:02Z", "type": "commit"}, {"oid": "0f770a7e2f27ee6d52505dd66e596ef97901d4dc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0f770a7e2f27ee6d52505dd66e596ef97901d4dc", "message": "Make minor adjustments.", "committedDate": "2020-09-03T18:15:10Z", "type": "commit"}, {"oid": "40daa2da10de1c6586625eaa64158b9d71857624", "url": "https://github.com/Azure/azure-sdk-for-java/commit/40daa2da10de1c6586625eaa64158b9d71857624", "message": "Update constants", "committedDate": "2020-09-03T18:19:58Z", "type": "commit"}, {"oid": "981af45f40ebd9f6657ebc0d84838b170b2843e3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/981af45f40ebd9f6657ebc0d84838b170b2843e3", "message": "cleanup", "committedDate": "2020-09-03T18:28:48Z", "type": "commit"}, {"oid": "9ce6cc5cbcb2edc36a8c48dcaab0d2ba98edd688", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9ce6cc5cbcb2edc36a8c48dcaab0d2ba98edd688", "message": "options have no arguments", "committedDate": "2020-09-03T18:30:39Z", "type": "commit"}, {"oid": "8ae96716f59b121801a4693fb510fc239ec9a947", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8ae96716f59b121801a4693fb510fc239ec9a947", "message": "Update SamplesArguments.java", "committedDate": "2020-09-03T18:36:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE4NzIzMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14785#discussion_r483187232", "bodyText": "nit: we could get the log level from command line as well", "author": "abhipsaMisra", "createdAt": "2020-09-03T18:50:34Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/samples/java/com/azure/digitaltwins/core/DigitalTwinsLifecycleAsyncSample.java", "diffHunk": "@@ -68,23 +64,26 @@\n         TwinsPath = Paths.get(DtDlDirectoryPath.toString(), \"DigitalTwins\");\n         ModelsPath = Paths.get(DtDlDirectoryPath.toString(), \"Models\");\n         RelationshipsPath = Paths.get(DtDlDirectoryPath.toString(), \"Relationships\");\n+    }\n+\n+    public static void main(String[] args) throws IOException, InterruptedException {\n+\n+        SamplesArguments parsedArguments = new SamplesArguments(args);\n \n         client = new DigitalTwinsClientBuilder()\n             .tokenCredential(\n                 new ClientSecretCredentialBuilder()\n-                    .tenantId(tenantId)\n-                    .clientId(clientId)\n-                    .clientSecret(clientSecret)\n+                    .tenantId(parsedArguments.getTenantId())\n+                    .clientId(parsedArguments.getClientId())\n+                    .clientSecret(parsedArguments.getClientSecret())\n                     .build()\n             )\n-            .endpoint(endpoint)\n+            .endpoint(parsedArguments.getDigitalTwinUrl())\n             .httpLogOptions(\n                 new HttpLogOptions()\n                     .setLogLevel(HttpLogDetailLevel.NONE))", "originalCommit": "8ae96716f59b121801a4693fb510fc239ec9a947", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE4ODgwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14785#discussion_r483188805", "bodyText": "Ah, is there no way to set it inline during initialization? Or some annotation perhaps?", "author": "abhipsaMisra", "createdAt": "2020-09-03T18:53:23Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/samples/java/com/azure/digitaltwins/core/SamplesArguments.java", "diffHunk": "@@ -0,0 +1,69 @@\n+package com.azure.digitaltwins.core;\n+\n+import org.apache.commons.cli.*;\n+\n+public class SamplesArguments {\n+\n+    private final String DIGITALTWINS_URL = \"DigitalTwinsEndpoint\";\n+    private final String TENANT_ID = \"tenantId\";\n+    private final String CLIENT_ID = \"clientId\";\n+    private final String CLIENT_SECRET = \"clientSecret\";\n+\n+    private String digitalTwinUrl;\n+    private String tenantId;\n+    private String clientId;\n+    private String clientSecret;\n+\n+    public SamplesArguments(String[] args) {\n+        Options options = new Options();\n+        Option input = new Option(\"d\", DIGITALTWINS_URL, false, \"DigitalTwins endpoint URL\");\n+        Option tenantId = new Option(\"t\", TENANT_ID, false, \"AAD Tenant Id\");\n+        Option clientId = new Option(\"c\", CLIENT_ID, false, \"AAD Client Id\");\n+        Option clientSecret = new Option(\"s\", CLIENT_SECRET, false, \"AAD Client Secret\");\n+\n+        input.setRequired(true);", "originalCommit": "8ae96716f59b121801a4693fb510fc239ec9a947", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE5MDIxOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14785#discussion_r483190219", "bodyText": "unfortunately not :(", "author": "azabbasi", "createdAt": "2020-09-03T18:56:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE4ODgwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE5MDM2Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14785#discussion_r483190366", "bodyText": "nit: Can we do an inline addition to options? Just trying to reduce the lines of code here!", "author": "abhipsaMisra", "createdAt": "2020-09-03T18:56:21Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/samples/java/com/azure/digitaltwins/core/SamplesArguments.java", "diffHunk": "@@ -0,0 +1,69 @@\n+package com.azure.digitaltwins.core;\n+\n+import org.apache.commons.cli.*;\n+\n+public class SamplesArguments {\n+\n+    private final String DIGITALTWINS_URL = \"DigitalTwinsEndpoint\";\n+    private final String TENANT_ID = \"tenantId\";\n+    private final String CLIENT_ID = \"clientId\";\n+    private final String CLIENT_SECRET = \"clientSecret\";\n+\n+    private String digitalTwinUrl;\n+    private String tenantId;\n+    private String clientId;\n+    private String clientSecret;\n+\n+    public SamplesArguments(String[] args) {\n+        Options options = new Options();\n+        Option input = new Option(\"d\", DIGITALTWINS_URL, false, \"DigitalTwins endpoint URL\");\n+        Option tenantId = new Option(\"t\", TENANT_ID, false, \"AAD Tenant Id\");\n+        Option clientId = new Option(\"c\", CLIENT_ID, false, \"AAD Client Id\");\n+        Option clientSecret = new Option(\"s\", CLIENT_SECRET, false, \"AAD Client Secret\");\n+\n+        input.setRequired(true);\n+        tenantId.setRequired(true);\n+        clientId.setRequired(true);\n+        clientSecret.setRequired(true);\n+\n+        options.addOption(input);", "originalCommit": "8ae96716f59b121801a4693fb510fc239ec9a947", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE5MTA3Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14785#discussion_r483191077", "bodyText": "sure, but won't save that much space :))", "author": "azabbasi", "createdAt": "2020-09-03T18:57:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE5MDM2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE5MTE0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14785#discussion_r483191146", "bodyText": "Options options = new Options()\n            .addOption(input)\n            .addOption(tenantId)\n            .addOption(clientId)\n            .addOption(clientSecret);", "author": "azabbasi", "createdAt": "2020-09-03T18:57:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE5MDM2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE5OTQzMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14785#discussion_r483199432", "bodyText": "How about:\nOptions options = new Options()\n    .addOption(new Option(\"d\", DIGITALTWINS_URL, false, \"DigitalTwins endpoint URL\"))\n    .addOption(new Option(\"t\", TENANT_ID, false, \"AAD Tenant Id\"))\n    .addOption(new Option(\"c\", CLIENT_ID, false, \"AAD Client Id\"))\n    .addOption(new Option(\"s\", CLIENT_SECRET, false, \"AAD Client Secret\"));\nThere also seems to be a builder options:\nnew Options()\n\t.addOption(Option.builder(\"d\")\n\t\t\t.required()\n\t\t\t.hasArg(true)\n\t\t\t.argName(DIGITALTWINS_URL)\n\t\t\t.desc(\"DigitalTwins endpoint URL\")\n\t\t\t.build())\n\t(...)\n\t.addOption(Option.builder(\"t\")\n\t\t\t.required()\n\t\t\t.hasArg(true)\n\t\t\t.argName(TENANT_ID)\n\t\t\t.desc(\"AAD Tenant Id\")\n\t\t\t.build());\nHowever, I am not too particular about it, just giving you options :)", "author": "abhipsaMisra", "createdAt": "2020-09-03T19:14:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE5MDM2Ng=="}], "type": "inlineReview"}, {"oid": "248bec4d36dfbabf9baadbf78297a0db3cc8e085", "url": "https://github.com/Azure/azure-sdk-for-java/commit/248bec4d36dfbabf9baadbf78297a0db3cc8e085", "message": "Address comments", "committedDate": "2020-09-03T19:58:01Z", "type": "commit"}, {"oid": "95fe89465be8044dd41222c650bcc788154e4e3e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/95fe89465be8044dd41222c650bcc788154e4e3e", "message": "Update DigitalTwinsLifecycleAsyncSample.java", "committedDate": "2020-09-03T19:58:28Z", "type": "commit"}, {"oid": "26e67f2343ccd952b3a6270a0c4b4c40a6d55abe", "url": "https://github.com/Azure/azure-sdk-for-java/commit/26e67f2343ccd952b3a6270a0c4b4c40a6d55abe", "message": "Update external_dependencies.txt", "committedDate": "2020-09-03T20:45:21Z", "type": "commit"}, {"oid": "df49d2fe6e822ac003c51b22d4e9716bcc9be587", "url": "https://github.com/Azure/azure-sdk-for-java/commit/df49d2fe6e822ac003c51b22d4e9716bcc9be587", "message": "Update external_dependencies.txt", "committedDate": "2020-09-03T20:58:09Z", "type": "commit"}, {"oid": "c0d80ad4741eac36ad51538b9d1a395860ed5d2a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c0d80ad4741eac36ad51538b9d1a395860ed5d2a", "message": "Update external_dependencies.txt", "committedDate": "2020-09-03T20:58:36Z", "type": "commit"}, {"oid": "0e576f05f60a685036622fff89454e23332c54e3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0e576f05f60a685036622fff89454e23332c54e3", "message": "Update external_dependencies.txt", "committedDate": "2020-09-03T21:16:42Z", "type": "commit"}]}