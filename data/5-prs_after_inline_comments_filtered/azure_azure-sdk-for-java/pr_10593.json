{"pr_number": 10593, "pr_title": "[TA] Changes based on V3.0 swagger, etc", "pr_createdAt": "2020-04-29T06:21:14Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/10593", "timeline": [{"oid": "09bd42a42cbd87f7a9c3c50b9d280ea878470fae", "url": "https://github.com/Azure/azure-sdk-for-java/commit/09bd42a42cbd87f7a9c3c50b9d280ea878470fae", "message": "regenerated code using swagger", "committedDate": "2020-04-23T22:02:04Z", "type": "commit"}, {"oid": "da927543f329c1797ea8c075c36849bb4f1d341f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/da927543f329c1797ea8c075c36849bb4f1d341f", "message": "only detected language is not working", "committedDate": "2020-04-27T04:33:48Z", "type": "commit"}, {"oid": "49f05a4fda347dd190e4dfa2d9fbf6cdba537176", "url": "https://github.com/Azure/azure-sdk-for-java/commit/49f05a4fda347dd190e4dfa2d9fbf6cdba537176", "message": "everything works beside exception thrown has not been take care", "committedDate": "2020-04-29T06:14:47Z", "type": "commit"}, {"oid": "4bbf324ab605006c9b097a7b02b6c08a309a9385", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4bbf324ab605006c9b097a7b02b6c08a309a9385", "message": "throw HttpResponseException and added tests corresponding to it", "committedDate": "2020-04-30T05:00:00Z", "type": "commit"}, {"oid": "41748cbb5344a0b20c976b9e61f47cb335710293", "url": "https://github.com/Azure/azure-sdk-for-java/commit/41748cbb5344a0b20c976b9e61f47cb335710293", "message": "update readme with embededme", "committedDate": "2020-04-30T05:26:38Z", "type": "commit"}, {"oid": "8de596aa5068fefdd9f8fdade2e11f18281d54e8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8de596aa5068fefdd9f8fdade2e11f18281d54e8", "message": "subCategory, sub-category to subcategory", "committedDate": "2020-04-30T17:48:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI4MTI5MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418281290", "bodyText": "Not so sure, but I see that AnalyzeSentimentResultImpl isn't a generated class but we still have it under implementation.models package?", "author": "samvaity", "createdAt": "2020-04-30T20:51:01Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -119,7 +123,7 @@\n             analyzeSentimentResults.add(convertToAnalyzeSentimentResult(documentSentiment));\n         }\n         for (DocumentError documentError : sentimentResponse.getErrors()) {\n-            analyzeSentimentResults.add(new AnalyzeSentimentResult(documentError.getId(), null,\n+            analyzeSentimentResults.add(new AnalyzeSentimentResultImpl(documentError.getId(), null,", "originalCommit": "8de596aa5068fefdd9f8fdade2e11f18281d54e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI4MjE2OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418282168", "bodyText": "Is that the new design change so that we avoid having public constructors in our model?", "author": "samvaity", "createdAt": "2020-04-30T20:52:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI4MTI5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQxOTA3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418419075", "bodyText": "Yes. It is. We explore AnalyzeSentimentResult interface to user but hide the implementation of it in implementation folder.", "author": "mssfang", "createdAt": "2020-05-01T05:08:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI4MTI5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTk3NDQ2Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421974467", "bodyText": "interface approach is no longer a option. keep as original design, adding overload constructor and deprecate constructor as needed.", "author": "mssfang", "createdAt": "2020-05-08T06:51:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI4MTI5MA=="}], "type": "inlineReview"}, {"oid": "8e1def838b46e56a87cd855e70486af5ea909452", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8e1def838b46e56a87cd855e70486af5ea909452", "message": "not throw exception but return it for async apis and added tests", "committedDate": "2020-05-01T05:04:57Z", "type": "commit"}, {"oid": "a291299dd226cb77c73674963582984ab5580411", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a291299dd226cb77c73674963582984ab5580411", "message": "add text to sentenceSentiment and add warning support", "committedDate": "2020-05-01T07:52:25Z", "type": "commit"}, {"oid": "35656e916f51de922508097123cab21513543620", "url": "https://github.com/Azure/azure-sdk-for-java/commit/35656e916f51de922508097123cab21513543620", "message": "checkstyle", "committedDate": "2020-05-01T07:57:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4NjkxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418586916", "bodyText": "Just to confirm I'm understanding this: For single document calls, you're now throwing on errors?", "author": "iscai-msft", "createdAt": "2020-05-01T15:17:01Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/RecognizeLinkedEntityAsyncClient.java", "diffHunk": "@@ -194,15 +202,22 @@\n      */\n     private Mono<TextAnalyticsPagedResponse<RecognizeLinkedEntitiesResult>> getRecognizedLinkedEntitiesResponseInPage(\n         Iterable<TextDocumentInput> documents, TextAnalyticsRequestOptions options, Context context) {\n-        return service.entitiesLinkingWithRestResponseAsync(\n+        return service.entitiesLinkingWithResponseAsync(\n             new MultiLanguageBatchInput().setDocuments(Transforms.toMultiLanguageInput(documents)),\n+            context.addData(AZ_TRACING_NAMESPACE_KEY, COGNITIVE_TRACING_NAMESPACE_VALUE),\n             options == null ? null : options.getModelVersion(),\n-            options == null ? null : options.isIncludeStatistics(),\n-            context.addData(AZ_TRACING_NAMESPACE_KEY, COGNITIVE_TRACING_NAMESPACE_VALUE))\n+            options == null ? null : options.isIncludeStatistics())\n             .doOnSubscribe(ignoredValue -> logger.info(\"A batch of documents - {}\", documents.toString()))\n             .doOnSuccess(response -> logger.info(\"Recognized linked entities for a batch of documents - {}\",\n                 response.getValue()))\n             .doOnError(error -> logger.warning(\"Failed to recognize linked entities - {}\", error))\n-            .map(this::toTextAnalyticsPagedResponse);\n+            .map(this::toTextAnalyticsPagedResponse)", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYyNDgyNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418624827", "bodyText": "Currently, with new swagger changes, the service returns TextAnalyticsErrrorException, Which will not explore to user. We want to explore HttpResponseException to user for the exception return from service side. In async APIs, we never throw exception but return Mono/Flux errors.\nFor your question: \" For single document calls, you're now throwing on errors?\"\nIf you are talking about, \"if there is partial success in a batch operation, throwing an error\", the answer is noop.\n.onErrorMap() will only be triggeed when the service restful call entitiesLinkingWithResponseAsync has failed, which is the request call failure.", "author": "mssfang", "createdAt": "2020-05-01T16:41:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4NjkxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc1NjEyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421756122", "bodyText": "If the error happen that early, can you map the error in early phase before mapping page result?", "author": "sima-zhu", "createdAt": "2020-05-07T19:54:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4NjkxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgzOTI2MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421839260", "bodyText": "this is the earliest stage. service.entitiesLinkingWithResponseAsync() is the restful API, when it throws exceptions. we map the exception directily.", "author": "mssfang", "createdAt": "2020-05-07T22:52:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4NjkxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4NzE2Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418587163", "bodyText": "Are you trying to fit this todo in your pr?", "author": "iscai-msft", "createdAt": "2020-05-01T15:17:36Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsAsyncClient.java", "diffHunk": "@@ -162,15 +163,19 @@ public TextAnalyticsServiceVersion getServiceVersion() {\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n     public Mono<DetectedLanguage> detectLanguage(String document, String countryHint) {\n-        Objects.requireNonNull(document, \"'document' cannot be null.\");\n-        return detectLanguageBatch(Collections.singletonList(document), countryHint, null)\n-            .map(detectLanguageResult -> {\n-                if (detectLanguageResult.isError()) {\n-                    throw logger.logExceptionAsError(\n-                        Transforms.toTextAnalyticsException(detectLanguageResult.getError()));\n-                }\n-                return detectLanguageResult.getPrimaryLanguage();\n-            }).last();\n+        try {\n+            Objects.requireNonNull(document, \"'document' cannot be null.\");\n+            return detectLanguageBatch(Collections.singletonList(document), countryHint, null)\n+                .map(detectLanguageResult -> {\n+                    if (detectLanguageResult.isError()) {\n+                        // TODO: throw HttpResponseException instead", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYyODE1Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418628157", "bodyText": "I think it is doable. #10664", "author": "mssfang", "createdAt": "2020-05-01T16:48:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4NzE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTExODg0MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421118840", "bodyText": "It will no longer an issue now. It will throw TextAnalyticsException but not HttpResponseException. Because HttpResponseException can only be raised when network call failed. In this case,  it is not.", "author": "mssfang", "createdAt": "2020-05-06T22:03:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4NzE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTEzMzQ1Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421133452", "bodyText": "@iscai-msft Wouldn't that apply to Python as well? It not being a service failure i.e not an HttpResponseException?", "author": "samvaity", "createdAt": "2020-05-06T22:40:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4NzE2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4ODc0MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418588741", "bodyText": "It appears you've removed the check for null documents and haven't added in a call to your inputDocumentsValidation utility function (also seeing other instances of this)", "author": "iscai-msft", "createdAt": "2020-05-01T15:21:03Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsAsyncClient.java", "diffHunk": "@@ -512,7 +516,6 @@ public TextAnalyticsServiceVersion getServiceVersion() {\n      */\n     @ServiceMethod(returns = ReturnType.COLLECTION)\n     public TextAnalyticsPagedFlux<LinkedEntity> recognizeLinkedEntities(String document, String language) {\n-        Objects.requireNonNull(document, \"'document' cannot be null.\");", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYyODY0OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418628648", "bodyText": "Async API will never throw an exception but return the error. It is handled in https://github.com/Azure/azure-sdk-for-java/pull/10593/files/35656e916f51de922508097123cab21513543620#diff-b7e39c6a437cc9256cc5cf809bf8531dR855", "author": "mssfang", "createdAt": "2020-05-01T16:49:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4ODc0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4OTIyNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418589226", "bodyText": "Wouldn't it be better to make a call to inputDocumentsValidation here instead of calling Objects.requireNonNull? You can either make your inputDpcumentsValidation function take in strings as well as iterable of strings with an overload, or pass in the document in an array of 1", "author": "iscai-msft", "createdAt": "2020-05-01T15:22:05Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsAsyncClient.java", "diffHunk": "@@ -853,15 +851,19 @@ public TextAnalyticsServiceVersion getServiceVersion() {\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n     public Mono<DocumentSentiment> analyzeSentiment(String document, String language) {\n-        Objects.requireNonNull(document, \"'document' cannot be null.\");\n-        return analyzeSentimentBatch(Collections.singletonList(document), language, null)\n-            .map(sentimentResult -> {\n-                if (sentimentResult.isError()) {\n-                    throw logger.logExceptionAsError(Transforms.toTextAnalyticsException(sentimentResult.getError()));\n-                }\n-\n-                return sentimentResult.getDocumentSentiment();\n-            }).last();\n+        try {\n+            Objects.requireNonNull(document, \"'document' cannot be null.\");", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTIzNTYwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421235601", "bodyText": "'InputDocumentValidation' is a helper method for a list of documents, documents. It checks 'documents' is not null and not empty. But here, the input is a single document, 'document', so it won't apply here.", "author": "mssfang", "createdAt": "2020-05-07T04:43:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU4OTIyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5MDY4OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418590689", "bodyText": "Seems like this random whitespace change has made it's way into the PR, can you remove these?", "author": "iscai-msft", "createdAt": "2020-05-01T15:25:19Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/TextAnalyticsClientImpl.java", "diffHunk": "@@ -48,7 +49,7 @@\n \n     /**\n      * Gets Supported Cognitive Services endpoints (protocol and hostname, for example: https://westus.api.cognitive.microsoft.com).\n-     *\n+     * ", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NDU5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418654597", "bodyText": "Will keep as it is since it is auto-generated code.", "author": "mssfang", "createdAt": "2020-05-01T17:46:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5MDY4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NTU1Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418655552", "bodyText": "You can skip review all files that with this license comment at the top of file\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n// Code generated by Microsoft (R) AutoRest Code Generator.", "author": "mssfang", "createdAt": "2020-05-01T17:48:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5MDY4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5MTQ5NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418591495", "bodyText": "What is this context change?", "author": "iscai-msft", "createdAt": "2020-05-01T15:27:03Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/TextAnalyticsClientImpl.java", "diffHunk": "@@ -100,229 +102,197 @@ public TextAnalyticsClientImpl(HttpPipeline httpPipeline) {\n      * The interface defining all the services for TextAnalyticsClient to be\n      * used by the proxy service to perform REST calls.\n      */\n-    @Host(\"{Endpoint}/text/analytics/v3.0-preview.1\")\n+    @Host(\"{Endpoint}/text/analytics/v3.0\")\n     @ServiceInterface(name = \"TextAnalyticsClient\")\n     private interface TextAnalyticsClientService {\n-        @Post(\"entities/recognition/general\")\n+        @Post(\"/entities/recognition/general\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneral(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneral(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") MultiLanguageBatchInput input, Context context);\n \n-        @Post(\"entities/recognition/pii\")\n+        @Post(\"/entities/linking\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionPii(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<EntityLinkingResult>> entitiesLinking(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") MultiLanguageBatchInput input, Context context);\n \n-        @Post(\"entities/linking\")\n+        @Post(\"/keyPhrases\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<EntityLinkingResult>> entitiesLinking(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<KeyPhraseResult>> keyPhrases(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") MultiLanguageBatchInput input, Context context);\n \n-        @Post(\"keyPhrases\")\n+        @Post(\"/languages\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<KeyPhraseResult>> keyPhrases(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<LanguageResult>> languages(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") LanguageBatchInput input, Context context);\n \n-        @Post(\"languages\")\n+        @Post(\"/sentiment\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<LanguageResult>> languages(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") LanguageBatchInput input, Context context);\n-\n-        @Post(\"sentiment\")\n-        @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<SentimentResponse>> sentiment(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<SentimentResponse>> sentiment(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") MultiLanguageBatchInput input, Context context);\n     }\n \n     /**\n-     * Named Entity Recognition\n      * The API returns a list of general named entities in a given document. For the list of supported entity types, check &lt;a href=\"https://aka.ms/taner\"&gt;Supported Entity Types in Text Analytics API&lt;/a&gt;. See the &lt;a href=\"https://aka.ms/talangs\"&gt;Supported languages in Text Analytics API&lt;/a&gt; for the list of enabled languages.\n-     *\n-     * @param input Collection of documents to analyze.\n-     * @param context The context to associate with this operation.\n+     * \n+     * @param input Contains a set of input documents to be analyzed by the service.\n+     * @param modelVersion (Optional) This value indicates which model will be used for scoring. If a model-version is not specified, the API should default to the latest, non-preview version.\n+     * @param showStats (Optional) if set to true, response will contain input and document level statistics.\n      * @throws IllegalArgumentException thrown if parameters fail the validation.\n-     * @return a Mono which performs the network request upon subscription.\n+     * @throws TextAnalyticsErrorException thrown if the request is rejected by server.\n+     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.\n+     * @return the response.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneralWithRestResponseAsync(MultiLanguageBatchInput input, Context context) {\n-        final String modelVersion = null;\n-        final Boolean showStats = null;\n-        return service.entitiesRecognitionGeneral(this.getEndpoint(), modelVersion, showStats, input, context);\n+    public Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneralWithResponseAsync(MultiLanguageBatchInput input, String modelVersion, Boolean showStats) {\n+        return FluxUtil.withContext(context -> service.entitiesRecognitionGeneral(this.getEndpoint(), modelVersion, showStats, input, context));\n     }\n \n     /**\n-     * Named Entity Recognition\n      * The API returns a list of general named entities in a given document. For the list of supported entity types, check &lt;a href=\"https://aka.ms/taner\"&gt;Supported Entity Types in Text Analytics API&lt;/a&gt;. See the &lt;a href=\"https://aka.ms/talangs\"&gt;Supported languages in Text Analytics API&lt;/a&gt; for the list of enabled languages.\n-     *\n-     * @param input Collection of documents to analyze.\n+     * \n+     * @param input Contains a set of input documents to be analyzed by the service.\n+     * @param context The context to associate with this operation.", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NDM0Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418654342", "bodyText": "This is the generated code, regenerated with using autorest with new swagger.\nThere will be no manual update on this file.", "author": "mssfang", "createdAt": "2020-05-01T17:45:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5MTQ5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5MTk0NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418591944", "bodyText": "Why is Java diverging in naming here, for python we have it as RecognizeLinkedEntitiesResult", "author": "iscai-msft", "createdAt": "2020-05-01T15:28:11Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/TextAnalyticsClientImpl.java", "diffHunk": "@@ -100,229 +102,197 @@ public TextAnalyticsClientImpl(HttpPipeline httpPipeline) {\n      * The interface defining all the services for TextAnalyticsClient to be\n      * used by the proxy service to perform REST calls.\n      */\n-    @Host(\"{Endpoint}/text/analytics/v3.0-preview.1\")\n+    @Host(\"{Endpoint}/text/analytics/v3.0\")\n     @ServiceInterface(name = \"TextAnalyticsClient\")\n     private interface TextAnalyticsClientService {\n-        @Post(\"entities/recognition/general\")\n+        @Post(\"/entities/recognition/general\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneral(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneral(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") MultiLanguageBatchInput input, Context context);\n \n-        @Post(\"entities/recognition/pii\")\n+        @Post(\"/entities/linking\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionPii(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<EntityLinkingResult>> entitiesLinking(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") MultiLanguageBatchInput input, Context context);\n \n-        @Post(\"entities/linking\")\n+        @Post(\"/keyPhrases\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<EntityLinkingResult>> entitiesLinking(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<KeyPhraseResult>> keyPhrases(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") MultiLanguageBatchInput input, Context context);\n \n-        @Post(\"keyPhrases\")\n+        @Post(\"/languages\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<KeyPhraseResult>> keyPhrases(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<LanguageResult>> languages(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") LanguageBatchInput input, Context context);\n \n-        @Post(\"languages\")\n+        @Post(\"/sentiment\")\n         @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<LanguageResult>> languages(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") LanguageBatchInput input, Context context);\n-\n-        @Post(\"sentiment\")\n-        @ExpectedResponses({200})\n-        @UnexpectedResponseExceptionType(HttpResponseException.class)\n-        Mono<SimpleResponse<SentimentResponse>> sentiment(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json; charset=utf-8\") MultiLanguageBatchInput input, Context context);\n+        @UnexpectedResponseExceptionType(TextAnalyticsErrorException.class)\n+        Mono<SimpleResponse<SentimentResponse>> sentiment(@HostParam(\"Endpoint\") String endpoint, @QueryParam(\"model-version\") String modelVersion, @QueryParam(\"showStats\") Boolean showStats, @BodyParam(\"application/json\") MultiLanguageBatchInput input, Context context);\n     }\n \n     /**\n-     * Named Entity Recognition\n      * The API returns a list of general named entities in a given document. For the list of supported entity types, check &lt;a href=\"https://aka.ms/taner\"&gt;Supported Entity Types in Text Analytics API&lt;/a&gt;. See the &lt;a href=\"https://aka.ms/talangs\"&gt;Supported languages in Text Analytics API&lt;/a&gt; for the list of enabled languages.\n-     *\n-     * @param input Collection of documents to analyze.\n-     * @param context The context to associate with this operation.\n+     * \n+     * @param input Contains a set of input documents to be analyzed by the service.\n+     * @param modelVersion (Optional) This value indicates which model will be used for scoring. If a model-version is not specified, the API should default to the latest, non-preview version.\n+     * @param showStats (Optional) if set to true, response will contain input and document level statistics.\n      * @throws IllegalArgumentException thrown if parameters fail the validation.\n-     * @return a Mono which performs the network request upon subscription.\n+     * @throws TextAnalyticsErrorException thrown if the request is rejected by server.\n+     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.\n+     * @return the response.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneralWithRestResponseAsync(MultiLanguageBatchInput input, Context context) {\n-        final String modelVersion = null;\n-        final Boolean showStats = null;\n-        return service.entitiesRecognitionGeneral(this.getEndpoint(), modelVersion, showStats, input, context);\n+    public Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneralWithResponseAsync(MultiLanguageBatchInput input, String modelVersion, Boolean showStats) {\n+        return FluxUtil.withContext(context -> service.entitiesRecognitionGeneral(this.getEndpoint(), modelVersion, showStats, input, context));\n     }\n \n     /**\n-     * Named Entity Recognition\n      * The API returns a list of general named entities in a given document. For the list of supported entity types, check &lt;a href=\"https://aka.ms/taner\"&gt;Supported Entity Types in Text Analytics API&lt;/a&gt;. See the &lt;a href=\"https://aka.ms/talangs\"&gt;Supported languages in Text Analytics API&lt;/a&gt; for the list of enabled languages.\n-     *\n-     * @param input Collection of documents to analyze.\n+     * \n+     * @param input Contains a set of input documents to be analyzed by the service.\n+     * @param context The context to associate with this operation.\n      * @param modelVersion (Optional) This value indicates which model will be used for scoring. If a model-version is not specified, the API should default to the latest, non-preview version.\n      * @param showStats (Optional) if set to true, response will contain input and document level statistics.\n-     * @param context The context to associate with this operation.\n      * @throws IllegalArgumentException thrown if parameters fail the validation.\n-     * @return a Mono which performs the network request upon subscription.\n+     * @throws TextAnalyticsErrorException thrown if the request is rejected by server.\n+     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.\n+     * @return the response.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneralWithRestResponseAsync(MultiLanguageBatchInput input, String modelVersion, Boolean showStats, Context context) {\n+    public Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionGeneralWithResponseAsync(MultiLanguageBatchInput input, Context context, String modelVersion, Boolean showStats) {\n         return service.entitiesRecognitionGeneral(this.getEndpoint(), modelVersion, showStats, input, context);\n     }\n \n     /**\n-     * Entities containing personal information\n-     * The API returns a list of entities with personal information (\\\"SSN\\\", \\\"Bank Account\\\" etc) in the document. For the list of supported entity types, check &lt;a href=\"https://aka.ms/tanerpii\"&gt;Supported Entity Types in Text Analytics API&lt;/a&gt;. See the &lt;a href=\"https://aka.ms/talangs\"&gt;Supported languages in Text Analytics API&lt;/a&gt; for the list of enabled languages.\n-     *\n-     * @param input Collection of documents to analyze.\n-     * @param context The context to associate with this operation.\n-     * @throws IllegalArgumentException thrown if parameters fail the validation.\n-     * @return a Mono which performs the network request upon subscription.\n-     */\n-    @ServiceMethod(returns = ReturnType.SINGLE)\n-    public Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionPiiWithRestResponseAsync(MultiLanguageBatchInput input, Context context) {\n-        final String modelVersion = null;\n-        final Boolean showStats = null;\n-        return service.entitiesRecognitionPii(this.getEndpoint(), modelVersion, showStats, input, context);\n-    }\n-\n-    /**\n-     * Entities containing personal information\n-     * The API returns a list of entities with personal information (\\\"SSN\\\", \\\"Bank Account\\\" etc) in the document. For the list of supported entity types, check &lt;a href=\"https://aka.ms/tanerpii\"&gt;Supported Entity Types in Text Analytics API&lt;/a&gt;. See the &lt;a href=\"https://aka.ms/talangs\"&gt;Supported languages in Text Analytics API&lt;/a&gt; for the list of enabled languages.\n-     *\n-     * @param input Collection of documents to analyze.\n+     * The API returns a list of recognized entities with links to a well-known knowledge base. See the &lt;a href=\"https://aka.ms/talangs\"&gt;Supported languages in Text Analytics API&lt;/a&gt; for the list of enabled languages.\n+     * \n+     * @param input Contains a set of input documents to be analyzed by the service.\n      * @param modelVersion (Optional) This value indicates which model will be used for scoring. If a model-version is not specified, the API should default to the latest, non-preview version.\n      * @param showStats (Optional) if set to true, response will contain input and document level statistics.\n-     * @param context The context to associate with this operation.\n      * @throws IllegalArgumentException thrown if parameters fail the validation.\n-     * @return a Mono which performs the network request upon subscription.\n+     * @throws TextAnalyticsErrorException thrown if the request is rejected by server.\n+     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.\n+     * @return the response.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public Mono<SimpleResponse<EntitiesResult>> entitiesRecognitionPiiWithRestResponseAsync(MultiLanguageBatchInput input, String modelVersion, Boolean showStats, Context context) {\n-        return service.entitiesRecognitionPii(this.getEndpoint(), modelVersion, showStats, input, context);\n+    public Mono<SimpleResponse<EntityLinkingResult>> entitiesLinkingWithResponseAsync(MultiLanguageBatchInput input, String modelVersion, Boolean showStats) {", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NTAwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418655009", "bodyText": "autogenerated type. We do internal mapping.", "author": "mssfang", "createdAt": "2020-05-01T17:47:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5MTk0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5MzgxNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418593817", "bodyText": "Should the input parameter score be changed to confidenceScore as well?", "author": "iscai-msft", "createdAt": "2020-05-01T15:32:10Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/models/DetectedLanguageImpl.java", "diffHunk": "@@ -0,0 +1,74 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.implementation.models;\n+\n+import com.azure.ai.textanalytics.models.DetectedLanguage;\n+import com.azure.core.annotation.Immutable;\n+\n+/**\n+ * The {@link DetectedLanguage} model.\n+ */\n+@Immutable\n+public final class DetectedLanguageImpl implements DetectedLanguage {\n+    /*\n+     * Long name of a detected language (e.g. English, French).\n+     */\n+    private final String name;\n+\n+    /*\n+     * A two letter representation of the detected language according to the\n+     * ISO 639-1 standard (e.g. en, fr).\n+     */\n+    private final String iso6391Name;\n+\n+    /*\n+     * A confidence score between 0 and 1. Scores close to 1 indicate 100%\n+     * certainty that the identified language is true.\n+     */\n+    private final double confidenceScore;\n+\n+    /**\n+     * Creates a {@link DetectedLanguage} model that describes detected language content.\n+     *\n+     * @param name The name of a detected language.\n+     * @param iso6391Name A two letter representation of the detected language according to the ISO 639-1 standard.\n+     * @param score A confidence score between 0 and 1.\n+     */\n+    public DetectedLanguageImpl(String name, String iso6391Name, double score) {", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NjMyOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418656328", "bodyText": "I will make this change.\nFYI. this class is not explore to user. It is under implementation package. Any class in this pacakge will be internal user only.", "author": "mssfang", "createdAt": "2020-05-01T17:49:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5MzgxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5NTYwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418595609", "bodyText": "nitpick: Since you're changing the getters and setters of InnerError to have the casing Innererror, it might be worth it to change this property", "author": "iscai-msft", "createdAt": "2020-05-01T15:36:11Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/models/InnerError.java", "diffHunk": "@@ -43,27 +40,21 @@\n     /*\n      * Inner error contains more specific information.\n      */\n-    @JsonProperty(value = \"innerError\")\n-    private InnerError innerError;\n+    @JsonProperty(value = \"innererror\")\n+    private InnerError innererror;", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg0NjIyMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421846223", "bodyText": "offline discussed. This is swagger changes.", "author": "mssfang", "createdAt": "2020-05-07T23:13:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5NTYwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5ODUwMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418598502", "bodyText": "in python we call this property matches, just want to make sure it's ok that Java diverges", "author": "iscai-msft", "createdAt": "2020-05-01T15:42:02Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/models/LinkedEntityImpl.java", "diffHunk": "@@ -0,0 +1,119 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.implementation.models;\n+\n+import com.azure.ai.textanalytics.models.LinkedEntity;\n+import com.azure.ai.textanalytics.models.LinkedEntityMatch;\n+import com.azure.core.annotation.Immutable;\n+import com.azure.core.util.IterableStream;\n+\n+/**\n+ * The {@link LinkedEntityImpl} model.\n+ */\n+@Immutable\n+public final class LinkedEntityImpl implements LinkedEntity {\n+    /*\n+     * Entity Linking formal name.\n+     */\n+    private final String name;\n+\n+    /*\n+     * List of instances this entity appears in the text.\n+     */\n+    private final IterableStream<LinkedEntityMatch> linkedEntityMatches;\n+\n+    /*\n+     * Language used in the data source.\n+     */\n+    private final String language;\n+\n+    /*\n+     * Unique identifier of the recognized entity from the data source.\n+     */\n+    private final String dataSourceEntityId;\n+\n+    /*\n+     * URL for the entity's page from the data source.\n+     */\n+    private final String url;\n+\n+    /*\n+     * Data source used to extract entity linking, such as Wiki/Bing etc.\n+     */\n+    private final String dataSource;\n+\n+    /**\n+     * Creates a {@link LinkedEntityImpl} model that describes linked entity.\n+     *\n+     * @param name The entity Linking formal name.\n+     * @param linkedEntityMatches A list of instances this entity appears in the text.\n+     * @param language The language used in the data source.\n+     * @param dataSourceEntityId Unique identifier of the recognized entity from the data source.\n+     * @param url URL for the entity's page from the data source.\n+     * @param dataSource The data source used to extract entity linking, such as Wiki/Bing etc.\n+     */\n+    public LinkedEntityImpl(String name, IterableStream<LinkedEntityMatch> linkedEntityMatches, String language,\n+                            String dataSourceEntityId, String url, String dataSource) {\n+        this.name = name;\n+        this.linkedEntityMatches = linkedEntityMatches;\n+        this.language = language;\n+        this.dataSourceEntityId = dataSourceEntityId;\n+        this.url = url;\n+        this.dataSource = dataSource;\n+    }\n+\n+    /**\n+     * Get the name property: Entity Linking formal name.\n+     *\n+     * @return The name value.\n+     */\n+    public String getName() {\n+        return this.name;\n+    }\n+\n+    /**\n+     * Get the linkedEntityMatches property: List of instances this entity appears in the text.\n+     *\n+     * @return The linkedEntityMatches value.\n+     */\n+    public IterableStream<LinkedEntityMatch> getLinkedEntityMatches() {\n+        return this.linkedEntityMatches;", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2MTU2Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418761566", "bodyText": "good catch. I will update it.", "author": "mssfang", "createdAt": "2020-05-01T22:19:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU5ODUwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYwMjYzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r418602638", "bodyText": "Can you add a test for warnings? We're only able to add it for extract key phrases, but this is the python test: https://github.com/Azure/azure-sdk-for-python/blob/9da31763f9809305c4e04ac41b7a6a995dcdeb9e/sdk/textanalytics/azure-ai-textanalytics/tests/test_extract_key_phrases.py#L411", "author": "iscai-msft", "createdAt": "2020-05-01T15:51:10Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/DocumentInputTest.java", "diffHunk": "@@ -42,29 +42,29 @@ protected static void afterTest() {\n \n     // Detect language\n     /**\n-     * Verifies that a null pointer exception is thrown when null document is given for\n+     * Verifies that a {@link NullPointerException} is thrown when null document is given for\n      * {@link TextAnalyticsClient#detectLanguage(String)}\n      */\n     @Test\n-    public void detectLanguagesNullInput() {\n+    public void detectLanguageNullInput() {\n         Exception exception = assertThrows(NullPointerException.class, () ->\n             client.detectLanguage(null));\n         assertTrue(INVALID_DOCUMENT_NPE_MESSAGE.equals(exception.getMessage()));\n     }\n \n     /**\n-     * Verifies that a null pointer exception is thrown when null document is given for\n+     * Verifies that a {@link NullPointerException} is thrown when null document is given for", "originalCommit": "35656e916f51de922508097123cab21513543620", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "967f64930667b3a2d13e216d9f1311b3124eb8c7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/967f64930667b3a2d13e216d9f1311b3124eb8c7", "message": "renaming DocumentResult to TAResult. Add new entity, address to entity enum", "committedDate": "2020-05-01T16:59:38Z", "type": "commit"}, {"oid": "a870de624e91b62c16580b049a2ab95322dbc6d5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a870de624e91b62c16580b049a2ab95322dbc6d5", "message": "remove graphe_ properties and rename graphe_ct to characterCount", "committedDate": "2020-05-04T09:51:27Z", "type": "commit"}, {"oid": "02af7a5c0e9356b5217b0614117d7159f33c8ab9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/02af7a5c0e9356b5217b0614117d7159f33c8ab9", "message": "update readme", "committedDate": "2020-05-04T09:52:07Z", "type": "commit"}, {"oid": "bee8c7d8926cd5cdfd9598b5ce2edf74dd9ed9c9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bee8c7d8926cd5cdfd9598b5ce2edf74dd9ed9c9", "message": "not explore interface but class for models and warning feature", "committedDate": "2020-05-06T16:55:44Z", "type": "commit"}, {"oid": "d5421653bc38cff8f86978cea39759998da25820", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d5421653bc38cff8f86978cea39759998da25820", "message": "checkstyle and readme", "committedDate": "2020-05-06T17:01:17Z", "type": "commit"}, {"oid": "083182b996fc4bff5c43a6c372a33c297edc4df5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/083182b996fc4bff5c43a6c372a33c297edc4df5", "message": "api review feedbacks", "committedDate": "2020-05-07T02:53:51Z", "type": "commit"}, {"oid": "a7c00fb37d96722230df2d1e010a2c5a0be7851e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a7c00fb37d96722230df2d1e010a2c5a0be7851e", "message": "checkstyles", "committedDate": "2020-05-07T02:57:22Z", "type": "commit"}, {"oid": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0c0ce10c3467c79dc62a10181401c0aa33736e42", "message": "rename getCode() to getErrorCode for Error type, getWarningCode() for Warning type", "committedDate": "2020-05-07T04:55:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU3NjUwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421576509", "bodyText": "you should add to the docstring that it also contains warnings", "author": "iscai-msft", "createdAt": "2020-05-07T15:03:49Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsClient.java", "diffHunk": "@@ -255,14 +249,14 @@ public DetectedLanguage detectLanguage(String document, String countryHint) {\n      * For text length limits, maximum batch size, and supported text encoding, see\n      * <a href=\"https://docs.microsoft.com/azure/cognitive-services/text-analytics/overview#data-limits\">data limits</a>.\n      *\n-     * @return A {@link TextAnalyticsPagedIterable} contains a list of\n+     * @return A {@link CategorizedEntityCollection} contains a list of", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4MTM3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421581375", "bodyText": "Should subcategory also be of type enum? (I'm just not sure where the team landed, so could definitely be wrong here)", "author": "iscai-msft", "createdAt": "2020-05-07T15:10:33Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/CategorizedEntity.java", "diffHunk": "@@ -3,49 +3,81 @@\n \n package com.azure.ai.textanalytics.models;\n \n+import com.azure.core.annotation.Immutable;\n+\n /**\n  * The {@link CategorizedEntity} model.\n  */\n-public interface CategorizedEntity {\n-    /**\n-     * Get the text property: Categorized entity text as appears in the request.\n-     *\n-     * @return The text value.\n+@Immutable\n+public final class CategorizedEntity {\n+    /*\n+     * CategorizedEntity text as appears in the request.\n+     */\n+    private final String text;\n+\n+    /*\n+     * CategorizedEntity category, such as Person/Location/Org/SSN etc\n+     */\n+    private final EntityCategory category;\n+\n+    /*\n+     * CategorizedEntity sub category, such as Age/Year/TimeRange etc\n+     */\n+    private final String subcategory;", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgyNTg0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421825849", "bodyText": "we have decided to only maintain an enum class for category but not subcategory. Subcategory has way more enum values than category.", "author": "mssfang", "createdAt": "2020-05-07T22:15:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4MTM3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4MzA2MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421583060", "bodyText": "Should linkedEntityMatches also be changed to matches here (not sure if this is exposed to users, but would still be nice to keep it consistent)", "author": "iscai-msft", "createdAt": "2020-05-07T15:12:50Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/LinkedEntity.java", "diffHunk": "@@ -3,50 +3,115 @@\n \n package com.azure.ai.textanalytics.models;\n \n+import com.azure.core.annotation.Immutable;\n import com.azure.core.util.IterableStream;\n \n /**\n  * The {@link LinkedEntity} model.\n  */\n-public interface LinkedEntity {\n+@Immutable\n+public final class LinkedEntity {\n+    /*\n+     * Entity Linking formal name.\n+     */\n+    private final String name;\n+\n+    /*\n+     * List of instances this entity appears in the text.\n+     */\n+    private final IterableStream<LinkedEntityMatch> linkedEntityMatches;\n+\n+    /*\n+     * Language used in the data source.\n+     */\n+    private final String language;\n+\n+    /*\n+     * Unique identifier of the recognized entity from the data source.\n+     */\n+    private final String dataSourceEntityId;\n+\n+    /*\n+     * URL for the entity's page from the data source.\n+     */\n+    private final String url;\n+\n+    /*\n+     * Data source used to extract entity linking, such as Wiki/Bing etc.\n+     */\n+    private final String dataSource;\n+\n+    /**\n+     * Creates a {@link LinkedEntity} model that describes linked entity.\n+     *\n+     * @param name The entity Linking formal name.\n+     * @param linkedEntityMatches A list of instances this entity appears in the text.\n+     * @param language The language used in the data source.\n+     * @param dataSourceEntityId Unique identifier of the recognized entity from the data source.\n+     * @param url URL for the entity's page from the data source.\n+     * @param dataSource The data source used to extract entity linking, such as Wiki/Bing etc.\n+     */\n+    public LinkedEntity(String name, IterableStream<LinkedEntityMatch> linkedEntityMatches, String language,", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4NzE2MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421587161", "bodyText": "nitpick: Get the sentence text", "author": "iscai-msft", "createdAt": "2020-05-07T15:18:38Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/SentenceSentiment.java", "diffHunk": "@@ -3,43 +3,57 @@\n \n package com.azure.ai.textanalytics.models;\n \n+import com.azure.core.annotation.Immutable;\n+\n /**\n- * The {@link SentenceSentiment} model that contains a sentiment label of a sentence, confidence score of the sentiment\n- * label, length of the sentence and offset of the sentence within a document.\n+ * The {@link SentenceSentiment} model that contains a sentiment label of a sentence, confidence score of the\n+ * sentiment label, length of the sentence and offset of the sentence within a document.\n  */\n-public interface SentenceSentiment {\n-    /**\n-     * Get the text property: The sentence text.\n-     *\n-     * @return the text value.\n-     */\n-    String getText();\n+@Immutable\n+public final class SentenceSentiment {\n+    private final String text;\n+    private final SentimentConfidenceScores confidenceScores;\n+    private final TextSentiment sentiment;\n \n     /**\n-     * Get the grapheme length of the sentence.\n+     * Creates a {@link SentenceSentiment} model that describes the sentiment analysis of sentence.\n      *\n-     * @return The grapheme length of the sentence.\n+     * @param text The sentence text\n+     * @param sentiment The sentiment label of the sentence.\n+     * @param confidenceScores The sentiment confidence score (Softmax score) between 0 and 1, for each sentiment label.\n+     *   Higher values signify higher confidence.\n      */\n-    int getGraphemeLength();\n+    public SentenceSentiment(String text, TextSentiment sentiment, SentimentConfidenceScores confidenceScores) {\n+        this.text = text;\n+        this.sentiment = sentiment;\n+        this.confidenceScores = confidenceScores;\n+    }\n \n     /**\n-     * Get the grapheme offset property: start position for the sentence sentiment.\n+     * Get the text property: The sentence text.", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4ODQ5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421588498", "bodyText": "why is the language just set to english? it seems that no matter what you pass in for language, your language is just going to be english", "author": "iscai-msft", "createdAt": "2020-05-07T15:20:27Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextDocumentInput.java", "diffHunk": "@@ -37,20 +34,9 @@\n      * @param text The document to process.\n      */\n     public TextDocumentInput(String id, String text) {\n-        this(id, text, null);\n-    }\n-\n-    /**\n-     * Creates a {@link TextDocumentInput} model that describes the documents.\n-     *\n-     * @param id A unique, non-empty document identifier.\n-     * @param text The document to process.\n-     * @param language Optional. This is the 2 letter ISO 639-1 representation of a language.\n-     */\n-    public TextDocumentInput(String id, String text, String language) {\n         this.id = id;\n         this.text = text;\n-        this.language = language;\n+        this.language = \"en\";", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4MzAyNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421683025", "bodyText": "Do we know instances when it won't be a TextAnalyticsErrorException?", "author": "samvaity", "createdAt": "2020-05-07T17:46:49Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/DetectLanguageAsyncClient.java", "diffHunk": "@@ -161,15 +158,22 @@\n      */\n     private Mono<TextAnalyticsPagedResponse<DetectLanguageResult>> getDetectedLanguageResponseInPage(\n         Iterable<DetectLanguageInput> documents, TextAnalyticsRequestOptions options, Context context) {\n-        return service.languagesWithRestResponseAsync(\n-            new LanguageBatchInput().setDocuments(toLanguageInput(documents)),\n-            options == null ? null : options.getModelVersion(),\n-            options == null ? null : options.isIncludeStatistics(),\n-            context.addData(AZ_TRACING_NAMESPACE_KEY, COGNITIVE_TRACING_NAMESPACE_VALUE))\n-            .doOnSubscribe(ignoredValue -> logger.info(\"A batch of documents - {}\", documents.toString()))\n-            .doOnSuccess(response -> logger.info(\"Detected languages for a batch of documents - {}\",\n-                response.getValue()))\n-            .doOnError(error -> logger.warning(\"Failed to detect language - {}\", error))\n-            .map(this::toTextAnalyticsPagedResponse);\n+        return service.languagesWithResponseAsync(\n+                new LanguageBatchInput().setDocuments(toLanguageInput(documents)),\n+                context.addData(AZ_TRACING_NAMESPACE_KEY, COGNITIVE_TRACING_NAMESPACE_VALUE),\n+                options == null ? null : options.getModelVersion(),\n+                options == null ? null : options.isIncludeStatistics())\n+                .doOnSubscribe(ignoredValue -> logger.info(\"A batch of documents - {}\", documents.toString()))\n+                .doOnSuccess(response -> logger.info(\"Detected languages for a batch of documents - {}\",\n+                    response.getValue()))\n+                .doOnError(error -> logger.warning(\"Failed to detect language - {}\", error))\n+                .map(this::toTextAnalyticsPagedResponse)\n+                .onErrorMap(throwable -> {\n+                    if (throwable instanceof TextAnalyticsErrorException) {", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTczOTI0OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421739248", "bodyText": "Helper method in common place. It seems show up so many times.", "author": "sima-zhu", "createdAt": "2020-05-07T19:24:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4MzAyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4MzQzMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421683433", "bodyText": "can be replaced with inputDocumentsValidation?", "author": "samvaity", "createdAt": "2020-05-07T17:47:33Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/ExtractKeyPhraseAsyncClient.java", "diffHunk": "@@ -53,38 +61,29 @@\n     }\n \n     /**\n-     * Helper function for calling service with max overloaded parameters that a returns {@link TextAnalyticsPagedFlux}\n-     * which is a paged flux that contains extracted key phrases.\n+     * Helper function for calling service with max overloaded parameters that a returns {@link KeyPhrasesCollection}.\n      *\n      * @param document A document.\n      * @param language The language code.\n      *\n-     * @return The {@link TextAnalyticsPagedFlux} of extracted key phrases strings.\n+     * @return The {@link Mono} of {@link KeyPhrasesCollection} extracted key phrases strings.\n      */\n-    TextAnalyticsPagedFlux<String> extractKeyPhrasesSingleText(String document, String language) {\n-        Objects.requireNonNull(document, \"'document' cannot be null.\");\n-        return new TextAnalyticsPagedFlux<>(() ->\n-            (continuationToken, pageSize) -> extractKeyPhrases(\n-                Collections.singletonList(new TextDocumentInput(\"0\", document, language)), null).byPage()\n-                .map(resOfResult -> {\n-                    Iterator<ExtractKeyPhraseResult> iterator = resOfResult.getValue().iterator();\n-                    // Collection will never empty\n-                    if (!iterator.hasNext()) {\n-                        throw logger.logExceptionAsError(new IllegalStateException(\n-                            \"An empty collection returned which is an unexpected error.\"));\n-                    }\n-\n-                    final ExtractKeyPhraseResult keyPhraseResult = iterator.next();\n-                    if (keyPhraseResult.isError()) {\n-                        throw logger.logExceptionAsError(\n-                            Transforms.toTextAnalyticsException(keyPhraseResult.getError()));\n-                    }\n-\n-                    return new TextAnalyticsPagedResponse<>(\n-                        resOfResult.getRequest(), resOfResult.getStatusCode(), resOfResult.getHeaders(),\n-                        keyPhraseResult.getKeyPhrases().stream().collect(Collectors.toList()),\n-                        null, resOfResult.getModelVersion(), resOfResult.getStatistics());\n-                }));\n+    Mono<KeyPhrasesCollection> extractKeyPhrasesSingleText(String document, String language) {\n+        try {\n+            Objects.requireNonNull(document, \"'document' cannot be null.\");", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgyNjc5NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421826795", "bodyText": "it is a single document validation not multiple documents validation.", "author": "mssfang", "createdAt": "2020-05-07T22:17:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4MzQzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4NDAxNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421684015", "bodyText": "can this too be replaced with inputDocumentsValidation?", "author": "samvaity", "createdAt": "2020-05-07T17:48:32Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/RecognizeEntityAsyncClient.java", "diffHunk": "@@ -53,146 +60,142 @@\n     }\n \n     /**\n-     * Helper function for calling service with max overloaded parameters that a returns {@link TextAnalyticsPagedFlux}\n-     * which is a paged flux that contains {@link CategorizedEntity}.\n+     * Helper function for calling service with max overloaded parameters that a returns {@link Mono}\n+     * which is a paged flux that contains {@link CategorizedEntityCollection}.\n      *\n      * @param document A single document.\n      * @param language The language code.\n      *\n-     * @return The {@link TextAnalyticsPagedFlux} of {@link CategorizedEntity}.\n+     * @return The {@link Mono} of {@link CategorizedEntityCollection}.\n      */\n-    TextAnalyticsPagedFlux<CategorizedEntity> recognizeEntities(String document, String language) {\n-        Objects.requireNonNull(document, \"'document' cannot be null.\");\n-        return new TextAnalyticsPagedFlux<>(() ->\n-            (continuationToken, pageSize) -> recognizeEntitiesBatch(\n-                Collections.singletonList(new TextDocumentInput(\"0\", document, language)), null)\n-                .byPage()\n-                .map(resOfResult -> {\n-                    Iterator<RecognizeCategorizedEntitiesResult> iterator = resOfResult.getValue().iterator();\n-                    // Collection will never empty\n-                    if (!iterator.hasNext()) {\n-                        throw logger.logExceptionAsError(new IllegalStateException(\n-                            \"An empty collection returned which is an unexpected error.\"));\n-                    }\n-\n-                    final RecognizeCategorizedEntitiesResult entitiesResult = iterator.next();\n-                    if (entitiesResult.isError()) {\n-                        throw logger.logExceptionAsError(\n-                            Transforms.toTextAnalyticsException(entitiesResult.getError()));\n-                    }\n-\n-                    return new TextAnalyticsPagedResponse<>(\n-                        resOfResult.getRequest(), resOfResult.getStatusCode(), resOfResult.getHeaders(),\n-                        entitiesResult.getEntities().stream().collect(Collectors.toList()), null,\n-                        resOfResult.getModelVersion(), resOfResult.getStatistics());\n-                }));\n+    Mono<CategorizedEntityCollection> recognizeEntities(String document, String language) {\n+        try {\n+            Objects.requireNonNull(document, \"'document' cannot be null.\");", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgyNjk1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421826955", "bodyText": "single document not multiple documents", "author": "mssfang", "createdAt": "2020-05-07T22:18:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4NDAxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4NTE3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421685173", "bodyText": "@maririos  and @iscai-msft Could you confirm the exception being thrown here in python and .NET?", "author": "samvaity", "createdAt": "2020-05-07T17:50:22Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/RecognizeEntityAsyncClient.java", "diffHunk": "@@ -53,146 +60,142 @@\n     }\n \n     /**\n-     * Helper function for calling service with max overloaded parameters that a returns {@link TextAnalyticsPagedFlux}\n-     * which is a paged flux that contains {@link CategorizedEntity}.\n+     * Helper function for calling service with max overloaded parameters that a returns {@link Mono}\n+     * which is a paged flux that contains {@link CategorizedEntityCollection}.\n      *\n      * @param document A single document.\n      * @param language The language code.\n      *\n-     * @return The {@link TextAnalyticsPagedFlux} of {@link CategorizedEntity}.\n+     * @return The {@link Mono} of {@link CategorizedEntityCollection}.\n      */\n-    TextAnalyticsPagedFlux<CategorizedEntity> recognizeEntities(String document, String language) {\n-        Objects.requireNonNull(document, \"'document' cannot be null.\");\n-        return new TextAnalyticsPagedFlux<>(() ->\n-            (continuationToken, pageSize) -> recognizeEntitiesBatch(\n-                Collections.singletonList(new TextDocumentInput(\"0\", document, language)), null)\n-                .byPage()\n-                .map(resOfResult -> {\n-                    Iterator<RecognizeCategorizedEntitiesResult> iterator = resOfResult.getValue().iterator();\n-                    // Collection will never empty\n-                    if (!iterator.hasNext()) {\n-                        throw logger.logExceptionAsError(new IllegalStateException(\n-                            \"An empty collection returned which is an unexpected error.\"));\n-                    }\n-\n-                    final RecognizeCategorizedEntitiesResult entitiesResult = iterator.next();\n-                    if (entitiesResult.isError()) {\n-                        throw logger.logExceptionAsError(\n-                            Transforms.toTextAnalyticsException(entitiesResult.getError()));\n-                    }\n-\n-                    return new TextAnalyticsPagedResponse<>(\n-                        resOfResult.getRequest(), resOfResult.getStatusCode(), resOfResult.getHeaders(),\n-                        entitiesResult.getEntities().stream().collect(Collectors.toList()), null,\n-                        resOfResult.getModelVersion(), resOfResult.getStatistics());\n-                }));\n+    Mono<CategorizedEntityCollection> recognizeEntities(String document, String language) {\n+        try {\n+            Objects.requireNonNull(document, \"'document' cannot be null.\");\n+            final TextDocumentInput textDocumentInput = new TextDocumentInput(\"0\", document);\n+            textDocumentInput.setLanguage(language);\n+            return recognizeEntitiesBatch(Collections.singletonList(textDocumentInput), null)\n+                    .map(entitiesResult -> {\n+                        if (entitiesResult.isError()) {\n+                            throw logger.logExceptionAsError(toTextAnalyticsException(entitiesResult.getError()));\n+                        }", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyNzQ3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421727473", "bodyText": "we throw a RequestFailedException which is a .net core exception. https://github.com/Azure/azure-sdk-for-net/blob/master/sdk/textanalytics/Azure.AI.TextAnalytics/src/TextAnalyticsClient.cs#L442", "author": "maririos", "createdAt": "2020-05-07T19:02:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4NTE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyODcwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421728706", "bodyText": "not sure I understand what a TextAnalyticsException is. Do we always make a distinction between what is a service, library, and other (like http) exception?", "author": "maririos", "createdAt": "2020-05-07T19:04:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4NTE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0MzU1Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421743553", "bodyText": "Python doesn't throw an error here, but that is consistent with the differences between languages (java and .net throw for single document calls, python just returns it as a DocumentError in this case)", "author": "iscai-msft", "createdAt": "2020-05-07T19:32:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4NTE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc5MDg1Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421790856", "bodyText": "@maririos There are two reasons why I think we are throwing a TextAnalyticsException:\n\n\nIt isn't a service call failure and so should not be misrepresented to the user saying that request has failed when actually the request was successful but the response wasn't as expected. In Java basically, we use HttpResponseException to indicate anything except for 200 status code (in most cases).\n\n\nThe TextAnalyticsException class holds the ErrorCode and target value which doesn't seem to fit to be returned with any of the existing Core exceptions that we have in Java.\n\n\n@srnagar thoughts?", "author": "samvaity", "createdAt": "2020-05-07T21:00:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4NTE3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4OTAxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421689016", "bodyText": "It seems odd that\n\npublic TextAnalyticsPagedIterable recognizeEntitiesBatch(Iterable documents)\n\nreturns RecognizeEntitiesResult\nwhereas,\n\npublic CategorizedEntityCollection recognizeEntities(String document, String language)\n\nreturns a CategorizedEntityCollection?\n@maririos , @iscai-msft Is this similarly followed in other languages?", "author": "samvaity", "createdAt": "2020-05-07T17:56:50Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsClient.java", "diffHunk": "@@ -273,15 +275,16 @@ public DetectedLanguage detectLanguage(String document, String countryHint) {\n      * <a href=\"https://docs.microsoft.com/azure/cognitive-services/text-analytics/overview#data-limits\">data limits</a>.\n      * @param language The 2 letter ISO 639-1 representation of language. If not set, uses \"en\" for English as default.\n      *\n-     * @return The {@link TextAnalyticsPagedIterable} contains a list of\n+     * @return The {@link CategorizedEntityCollection} contains a list of\n      * {@link CategorizedEntity recognized categorized entities}.\n      *\n      * @throws NullPointerException if {@code document} is {@code null}.\n      * @throws TextAnalyticsException if the response returned with an {@link TextAnalyticsError error}.\n      */\n-    @ServiceMethod(returns = ReturnType.COLLECTION)\n-    public TextAnalyticsPagedIterable<CategorizedEntity> recognizeEntities(String document, String language) {\n-        return new TextAnalyticsPagedIterable<>(client.recognizeEntities(document, language));\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public CategorizedEntityCollection recognizeEntities(String document, String language) {", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0MjYxOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421742618", "bodyText": "Python isn't returning a CategorizedEntityCollection, only Java and .Net are, so @maririos\nknows better here. We just have the categorized entities on RecognizeEntitiesResult", "author": "iscai-msft", "createdAt": "2020-05-07T19:30:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4OTAxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc2MzM1Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421763353", "bodyText": "we follow this patter in .NET.\nIn .NET, when a property ends with Collection it means it extends from Collection, which in our case is true.\nNot sure if Java has something similar where with the name, the user will now that it inherits from IterableStream", "author": "maririos", "createdAt": "2020-05-07T20:07:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4OTAxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgyODM2OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421828368", "bodyText": "It is a single-input API. Only .NET and Java has it.\nFYI: https://gist.github.com/mssfang/5d7097c3d859c2087b34e544c4f7ee3f#proporsal-1-which-aligned-with-net-design", "author": "mssfang", "createdAt": "2020-05-07T22:21:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4OTAxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4OTc4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421689780", "bodyText": "Should this method never get called if documents is null?", "author": "samvaity", "createdAt": "2020-05-07T17:58:07Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/Transforms.java", "diffHunk": "@@ -40,7 +36,10 @@ private Transforms() {\n      * @return The list holding all the generic items combined.\n      */\n     static <T> List<T> mapByIndex(Iterable<String> documents, BiFunction<String, String, T> mappingFunction) {\n-        Objects.requireNonNull(documents, \"'documents' cannot be null.\");\n+        // don't do anything if given input 'documents' is null, return null", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg0NTcwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421845703", "bodyText": "the documents is given by user. so it could be null. I will revert this check\nObjects.requireNonNull(documents, \"'documents' cannot be null.\");\n\nin this method. And adding try-catch in API surface.", "author": "mssfang", "createdAt": "2020-05-07T23:12:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4OTc4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY5MTQ5OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421691499", "bodyText": "throw logger.logExceptionAsWarning(...)\nAlso, add a section for throws javadoc for the respective methods where this is called.", "author": "samvaity", "createdAt": "2020-05-07T18:00:51Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/Utility.java", "diffHunk": "@@ -0,0 +1,28 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.implementation;\n+\n+import java.util.Iterator;\n+import java.util.Objects;\n+\n+/**\n+ * Utility method class.\n+ */\n+public final class Utility {\n+    private Utility() {\n+    }\n+\n+    /**\n+     * Verify that list of documents are not null or empty. Otherwise, throw exception.\n+     *\n+     * @param documents A list of documents.\n+     */\n+    public static void inputDocumentsValidation(Iterable<?> documents) {\n+        Objects.requireNonNull(documents, \"'documents' cannot be null.\");\n+        final Iterator<?> iterator = documents.iterator();\n+        if (!iterator.hasNext()) {\n+            throw new IllegalArgumentException(\"'documents' cannot be empty.\");", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMTE0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422221145", "bodyText": "This is still not updated.", "author": "samvaity", "createdAt": "2020-05-08T15:50:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY5MTQ5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY5NTExNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421695115", "bodyText": "nit: *An", "author": "samvaity", "createdAt": "2020-05-07T18:06:53Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DetectedLanguage.java", "diffHunk": "@@ -4,46 +4,57 @@\n package com.azure.ai.textanalytics.models;\n \n import com.azure.core.annotation.Immutable;\n+import com.azure.core.util.IterableStream;\n \n /**\n  * The {@link DetectedLanguage} model.\n  */\n @Immutable\n public final class DetectedLanguage {\n-    /*\n+    /**\n+     *\n      * Long name of a detected language (e.g. English, French).\n      */\n     private final String name;\n \n-    /*\n+    /**\n      * A two letter representation of the detected language according to the\n      * ISO 639-1 standard (e.g. en, fr).\n      */\n     private final String iso6391Name;\n \n-    /*\n+    /**\n      * A confidence score between 0 and 1. Scores close to 1 indicate 100%\n      * certainty that the identified language is true.\n      */\n-    private final double score;\n+    private final double confidenceScore;\n+\n+    /**\n+     * A {@link IterableStream} of {@link TextAnalyticsWarning Text Analytics warnings}.\n+     */\n+    private final IterableStream<TextAnalyticsWarning> warnings;\n \n     /**\n      * Creates a {@link DetectedLanguage} model that describes detected language content.\n      *\n      * @param name The name of a detected language.\n      * @param iso6391Name A two letter representation of the detected language according to the ISO 639-1 standard.\n-     * @param score A confidence score between 0 and 1.\n+     * @param confidenceScore A confidence score between 0 and 1.\n+     * @param warnings A {@link IterableStream} of {@link TextAnalyticsWarning warnings}.", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY5NzU3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421697571", "bodyText": "Warning code", "author": "samvaity", "createdAt": "2020-05-07T18:10:58Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsWarning.java", "diffHunk": "@@ -0,0 +1,51 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.annotation.Immutable;\n+\n+/**\n+ * The {@link TextAnalyticsWarning} model.\n+ */\n+@Immutable\n+public final class TextAnalyticsWarning {\n+    /*\n+     * Error code.", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY5Nzg3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421697872", "bodyText": "Could the docs be updated to understand what a warning code would mean?", "author": "samvaity", "createdAt": "2020-05-07T18:11:30Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsWarning.java", "diffHunk": "@@ -0,0 +1,51 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.annotation.Immutable;\n+\n+/**\n+ * The {@link TextAnalyticsWarning} model.\n+ */\n+@Immutable\n+public final class TextAnalyticsWarning {\n+    /*\n+     * Error code.\n+     */\n+    private final WarningCode code;\n+\n+    /*\n+     * Warning message.\n+     */\n+    private final String message;\n+\n+    /**\n+     * Creates a {@link TextAnalyticsWarning} model that describes text analytics warning.\n+     *\n+     * @param code The warning code value\n+     * @param message The warning message.\n+     */\n+    public TextAnalyticsWarning(WarningCode code, String message) {\n+        this.code = code;\n+        this.message = message;\n+    }\n+\n+    /**\n+     * Get the code property: Error code.", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwMTQxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421701416", "bodyText": "Should follow Fluent pattern.", "author": "samvaity", "createdAt": "2020-05-07T18:17:41Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextDocumentInput.java", "diffHunk": "@@ -82,6 +68,17 @@ public String getLanguage() {\n         return this.language;\n     }\n \n+    /**\n+     * Set the language property: (Optional) This is the 2 letter ISO 639-1\n+     * representation of a language. For example, use \"en\" for English; \"es\"\n+     * for Spanish etc. If not set, use \"en\" for English as default.\n+     *\n+     * @param language Optional. This is the 2 letter ISO 639-1 representation of a language.\n+     */\n+    public void setLanguage(String language) {", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgzMDcwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421830700", "bodyText": "not sure why fluent pattern. ID and text are required.", "author": "mssfang", "createdAt": "2020-05-07T22:28:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwMTQxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwMTU3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421701572", "bodyText": "@Fluent", "author": "samvaity", "createdAt": "2020-05-07T18:17:58Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextDocumentInput.java", "diffHunk": "@@ -3,14 +3,11 @@\n \n package com.azure.ai.textanalytics.models;\n \n-import com.azure.core.annotation.Immutable;\n-\n import java.util.Locale;\n \n /**\n  * Contains an input document to be analyzed by the service.\n  */\n-@Immutable\n public final class TextDocumentInput {", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyMzIyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421723221", "bodyText": "warnings should be in DetectedLanguage to be consistent with keyphrases. no?", "author": "maririos", "createdAt": "2020-05-07T18:55:01Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DetectLanguageResult.java", "diffHunk": "@@ -18,9 +19,10 @@\n      * @param textDocumentStatistics The text document statistics.\n      * @param error The document error.\n      * @param primaryLanguage The detected primary language.\n+     * @param warnings A {@link IterableStream} of {@link TextAnalyticsWarning}.", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgzMTQ4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421831486", "bodyText": "yes. Missed to revert this one back.", "author": "mssfang", "createdAt": "2020-05-07T22:30:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyMzIyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyNTUyNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421725525", "bodyText": "It will be good to connect this type with CategorizedEntityCollection which also includes warnings in there.\nAny reason why this is different than .net here?", "author": "maririos", "createdAt": "2020-05-07T18:59:04Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/RecognizeEntitiesResult.java", "diffHunk": "@@ -0,0 +1,44 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.annotation.Immutable;\n+import com.azure.core.util.IterableStream;\n+\n+import java.util.ArrayList;\n+\n+/**\n+ * The {@link RecognizeEntitiesResult} model.\n+ */\n+@Immutable\n+public final class RecognizeEntitiesResult extends TextAnalyticsResult {\n+    private final CategorizedEntityCollection entities;\n+\n+    /**\n+     * Creates a {@link RecognizeEntitiesResult} model that describes recognized entities result.\n+     *\n+     * @param id Unique, non-empty document identifier.\n+     * @param textDocumentStatistics The text document statistics.\n+     * @param error The document error.\n+     * @param entities An {@link IterableStream} of {@link CategorizedEntity}.\n+     * @param warnings A {@link IterableStream} of {@link TextAnalyticsWarning}.", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgzNjUwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421836503", "bodyText": "good catch. I will change to use categorized entity collection instead of two inputs.", "author": "mssfang", "createdAt": "2020-05-07T22:44:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyNTUyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTczNDM2OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421734368", "bodyText": "Better to have a mapping helper method as it continues to grow. Make the top API impl as simple as possible.", "author": "sima-zhu", "createdAt": "2020-05-07T19:15:04Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -184,7 +183,13 @@ private AnalyzeSentimentResult convertToAnalyzeSentimentResult(DocumentSentiment\n                     confidenceScorePerLabel.getNegative(),\n                     confidenceScorePerLabel.getNeutral(),\n                     confidenceScorePerLabel.getPositive()),\n-                new IterableStream<>(sentenceSentiments)));\n+                new IterableStream<>(sentenceSentiments),", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTk1NDgzNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421954836", "bodyText": "Can you give an example?\nFYI, This class is not public to user.", "author": "mssfang", "createdAt": "2020-05-08T05:58:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTczNDM2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0MDQ4MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421740481", "bodyText": "What's the expect behavior here?\n\nStop doing other maps if one event gets throwable\nKeep doing other maps if one event gets throwable", "author": "sima-zhu", "createdAt": "2020-05-07T19:26:25Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/ExtractKeyPhraseAsyncClient.java", "diffHunk": "@@ -53,38 +61,29 @@\n     }\n \n     /**\n-     * Helper function for calling service with max overloaded parameters that a returns {@link TextAnalyticsPagedFlux}\n-     * which is a paged flux that contains extracted key phrases.\n+     * Helper function for calling service with max overloaded parameters that a returns {@link KeyPhrasesCollection}.\n      *\n      * @param document A document.\n      * @param language The language code.\n      *\n-     * @return The {@link TextAnalyticsPagedFlux} of extracted key phrases strings.\n+     * @return The {@link Mono} of {@link KeyPhrasesCollection} extracted key phrases strings.\n      */\n-    TextAnalyticsPagedFlux<String> extractKeyPhrasesSingleText(String document, String language) {\n-        Objects.requireNonNull(document, \"'document' cannot be null.\");\n-        return new TextAnalyticsPagedFlux<>(() ->\n-            (continuationToken, pageSize) -> extractKeyPhrases(\n-                Collections.singletonList(new TextDocumentInput(\"0\", document, language)), null).byPage()\n-                .map(resOfResult -> {\n-                    Iterator<ExtractKeyPhraseResult> iterator = resOfResult.getValue().iterator();\n-                    // Collection will never empty\n-                    if (!iterator.hasNext()) {\n-                        throw logger.logExceptionAsError(new IllegalStateException(\n-                            \"An empty collection returned which is an unexpected error.\"));\n-                    }\n-\n-                    final ExtractKeyPhraseResult keyPhraseResult = iterator.next();\n-                    if (keyPhraseResult.isError()) {\n-                        throw logger.logExceptionAsError(\n-                            Transforms.toTextAnalyticsException(keyPhraseResult.getError()));\n-                    }\n-\n-                    return new TextAnalyticsPagedResponse<>(\n-                        resOfResult.getRequest(), resOfResult.getStatusCode(), resOfResult.getHeaders(),\n-                        keyPhraseResult.getKeyPhrases().stream().collect(Collectors.toList()),\n-                        null, resOfResult.getModelVersion(), resOfResult.getStatistics());\n-                }));\n+    Mono<KeyPhrasesCollection> extractKeyPhrasesSingleText(String document, String language) {\n+        try {\n+            Objects.requireNonNull(document, \"'document' cannot be null.\");\n+            final TextDocumentInput textDocumentInput = new TextDocumentInput(\"0\", document);\n+            textDocumentInput.setLanguage(language);\n+            return extractKeyPhrases(Collections.singletonList(textDocumentInput), null)\n+                    .map(keyPhraseResult -> {\n+                        if (keyPhraseResult.isError()) {", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg0OTk3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421849973", "bodyText": "Stop doing other maps if one event gets throwable", "author": "mssfang", "createdAt": "2020-05-07T23:25:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0MDQ4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg1MDUyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421850529", "bodyText": "in this case, since it is single-input API, which take one input document. But internally, we call the batch API. Which could have the result is error document. If the result is error, for single-input API, we throw the TextAnalyticsException but not return error.", "author": "mssfang", "createdAt": "2020-05-07T23:27:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0MDQ4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM5MTkwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422391901", "bodyText": "talked offline, no longer an issue.", "author": "mssfang", "createdAt": "2020-05-08T21:48:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0MDQ4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc3OTQzNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421779436", "bodyText": "Could u help me understand why before we didn't need to do a foreach with entity, but now we do have to do a foreach on entityCollection?", "author": "maririos", "createdAt": "2020-05-07T20:39:06Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/RecognizeEntitiesAsync.java", "diffHunk": "@@ -27,11 +27,12 @@ public static void main(String[] args) {\n         String document = \"Satya Nadella is the CEO of Microsoft\";\n \n         client.recognizeEntities(document).subscribe(\n-            entity -> System.out.printf(\n-                \"Recognized categorized entity: %s, entity category: %s, entity sub-category: %s, score: %f.%n\",\n-                entity.getText(), entity.getCategory(), entity.getSubCategory(), entity.getConfidenceScore()),\n+            entityCollection -> entityCollection.forEach(entity -> System.out.printf(", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgzODUxOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421838519", "bodyText": "Previewly, we returned TextAnalyticsPagedFlux which can directly getting the CategorizedEntity. With Current design, Mono,  we are getting CategorizedEntityCollection object first, but not CategorizedEntity", "author": "mssfang", "createdAt": "2020-05-07T22:50:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc3OTQzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxMjY3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421812674", "bodyText": "Not sure I understand why we are hiding the language here. It is true that en is the default, but the purpose of this batch sample is to show the user that they can set the language (otherwise they'll use the convenience method/sample).\nIt will be more obvious if we have text in different languages.", "author": "maririos", "createdAt": "2020-05-07T21:44:41Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/batch/AnalyzeSentimentBatchDocuments.java", "diffHunk": "@@ -37,9 +37,9 @@ public static void main(String[] args) {\n \n         // The texts that need be analyzed.\n         List<TextDocumentInput> documents = Arrays.asList(\n-            new TextDocumentInput(\"A\", \"The hotel was dark and unclean. I wouldn't recommend staying there.\", \"en\"),\n-            new TextDocumentInput(\"B\", \"The restaurant had amazing gnocchi! The waiters were excellent.\", \"en\"),\n-            new TextDocumentInput(\"C\", \"The hotel was dark and unclean. The restaurant had amazing gnocchi!\", \"en\")\n+            new TextDocumentInput(\"A\", \"The hotel was dark and unclean. I wouldn't recommend staying there.\"),", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg1MjcwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421852706", "bodyText": "Since the language is not required. TextAnalyticsInput currently made it as settable. So user can set the language after the object been initialized.\nIt is like\nTextDocumentInput input1 = new TextDocumentInput(\"id\", \"text\");\ninput1.setLanguage(\"en\");\nTextDocumentInput input2 = new TextDocumentInput(\"id2\", \"text2\");\ninput2.setLanguage(\"en\");\n\n...", "author": "mssfang", "createdAt": "2020-05-07T23:33:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxMjY3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyNzQ5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422227497", "bodyText": "I agree with @maririos.\nSince the batch samples show advanced behavior, we should consider showing the users how they can set language on each document.", "author": "samvaity", "createdAt": "2020-05-08T16:03:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxMjY3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NTg2NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422255864", "bodyText": "@samvaity is there a better way to set the language other than\nTextDocumentInput input1 = new TextDocumentInput(\"id\", \"text\");\ninput1.setLanguage(\"en\");\nTextDocumentInput input2 = new TextDocumentInput(\"id2\", \"text2\");\ninput2.setLanguage(\"en\");\n...", "author": "mssfang", "createdAt": "2020-05-08T16:58:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxMjY3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxMzY5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421813694", "bodyText": "same comment here about language", "author": "maririos", "createdAt": "2020-05-07T21:46:32Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/batch/AnalyzeSentimentBatchDocumentsAsync.java", "diffHunk": "@@ -36,9 +36,9 @@ public static void main(String[] args) {\n \n         // The texts that need be analyzed.\n         List<TextDocumentInput> documents = Arrays.asList(\n-            new TextDocumentInput(\"A\", \"The hotel was dark and unclean. I wouldn't recommend staying there.\", \"en\"),\n-            new TextDocumentInput(\"B\", \"The restaurant had amazing gnocchi! The waiters were excellent.\", \"en\"),\n-            new TextDocumentInput(\"C\", \"The hotel was dark and unclean. The restaurant had amazing gnocchi!\", \"en\")\n+            new TextDocumentInput(\"A\", \"The hotel was dark and unclean. I wouldn't recommend staying there.\"),", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxNDM5Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421814392", "bodyText": "language", "author": "maririos", "createdAt": "2020-05-07T21:47:59Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/batch/ExtractKeyPhrasesBatchDocuments.java", "diffHunk": "@@ -35,8 +35,8 @@ public static void main(String[] args) {\n \n         // The texts that need be analyzed.\n         List<TextDocumentInput> documents = Arrays.asList(\n-            new TextDocumentInput(\"A\", \"The food was delicious and there were wonderful staff.\", \"en\"),\n-            new TextDocumentInput(\"B\", \"The pitot tube is used to measure airspeed.\", \"en\")\n+            new TextDocumentInput(\"A\", \"The food was delicious and there were wonderful staff.\"),\n+            new TextDocumentInput(\"B\", \"The pitot tube is used to measure airspeed.\")", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxNDU2Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421814563", "bodyText": "ok. everywhere else", "author": "maririos", "createdAt": "2020-05-07T21:48:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgxNDM5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg3NjE2Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r421876166", "bodyText": "update it to match", "author": "mssfang", "createdAt": "2020-05-08T00:54:25Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/LinkedEntity.java", "diffHunk": "@@ -75,7 +75,7 @@ public String getName() {\n      *\n      * @return The linkedEntityMatches value.", "originalCommit": "0c0ce10c3467c79dc62a10181401c0aa33736e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2ac3668c6dc080a58a0248ccced1c7abab7e1483", "message": "address feedbacks and add too many document exception handler", "committedDate": "2020-05-08T06:45:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIxNTM0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422215345", "bodyText": "Is it expected to only return the status code in the response?", "author": "samvaity", "createdAt": "2020-05-08T15:39:58Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/Utility.java", "diffHunk": "@@ -0,0 +1,98 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.implementation;\n+\n+import com.azure.ai.textanalytics.implementation.models.TextAnalyticsErrorException;\n+import com.azure.core.exception.HttpResponseException;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpResponse;\n+import com.azure.core.http.rest.SimpleResponse;\n+import reactor.core.publisher.Flux;\n+import reactor.core.publisher.Mono;\n+\n+import java.nio.ByteBuffer;\n+import java.nio.charset.Charset;\n+import java.util.Iterator;\n+import java.util.Objects;\n+\n+/**\n+ * Utility method class.\n+ */\n+public final class Utility {\n+    private Utility() {\n+    }\n+\n+    /**\n+     * Verify that list of documents are not null or empty. Otherwise, throw exception.\n+     *\n+     * @param documents A list of documents.\n+     */\n+    public static void inputDocumentsValidation(Iterable<?> documents) {\n+        Objects.requireNonNull(documents, \"'documents' cannot be null.\");\n+        final Iterator<?> iterator = documents.iterator();\n+        if (!iterator.hasNext()) {\n+            throw new IllegalArgumentException(\"'documents' cannot be empty.\");\n+        }\n+    }\n+\n+    /**\n+     * Get a mock {@link HttpResponse} that only return status code 400.\n+     *\n+     * @param response A {@link SimpleResponse} with any type\n+     * @return A mock {@link HttpResponse} that only return status code 400.\n+     */\n+    public static HttpResponse getMockHttpResponse(SimpleResponse<?> response) {\n+        return new HttpResponse(response.getRequest()) {\n+            @Override\n+            public int getStatusCode() {", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI0NDY3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422244674", "bodyText": "The exception the user will get should be the same as if the service returns a status = 400 and all the information with it.\nFor .net, for example, we have status, error code, and error message and we throw a RequestFailedException", "author": "maririos", "createdAt": "2020-05-08T16:37:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIxNTM0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM3ODg1OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422378858", "bodyText": "This is HttpResponse implementation class. Unless we know what is the expected header values and etc. We can make it up. But the for error message, it exist in the HttpResponseException level.", "author": "mssfang", "createdAt": "2020-05-08T21:15:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIxNTM0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIxNjQyMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422216420", "bodyText": "Could we have a tracking issue for this?\nWhen does the service team plan to update this?", "author": "samvaity", "createdAt": "2020-05-08T15:42:01Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -119,6 +116,14 @@\n             analyzeSentimentResults.add(convertToAnalyzeSentimentResult(documentSentiment));\n         }\n         for (DocumentError documentError : sentimentResponse.getErrors()) {\n+            /*\n+             *  TODO: Remove this after service update to throw exception.", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzNjMwNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422236304", "bodyText": "This will happen around July, so we will GA with this.\nGood idea about a tracking issue. I will add one for .net too", "author": "maririos", "createdAt": "2020-05-08T16:20:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIxNjQyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI3MDQxNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422270414", "bodyText": "#10962", "author": "mssfang", "createdAt": "2020-05-08T17:27:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIxNjQyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMjIyMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422222223", "bodyText": "nit extra line", "author": "samvaity", "createdAt": "2020-05-08T15:53:05Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DetectedLanguage.java", "diffHunk": "@@ -4,46 +4,57 @@\n package com.azure.ai.textanalytics.models;\n \n import com.azure.core.annotation.Immutable;\n+import com.azure.core.util.IterableStream;\n \n /**\n  * The {@link DetectedLanguage} model.\n  */\n @Immutable\n public final class DetectedLanguage {\n-    /*\n+    /**\n+     *", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMjQ5Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422222492", "bodyText": "nit: an", "author": "samvaity", "createdAt": "2020-05-08T15:53:36Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DocumentSentiment.java", "diffHunk": "@@ -7,28 +7,31 @@\n import com.azure.core.util.IterableStream;\n \n /**\n- * The {@link DocumentSentiment} model that contains sentiment label of a document, confidence score of the sentiment\n- * label, and a list of {@link SentenceSentiment}.\n+ * The {@link DocumentSentiment} model that contains sentiment label of a document, confidence score of the\n+ * sentiment label, and a list of {@link SentenceSentiment}.\n  */\n @Immutable\n public final class DocumentSentiment {\n     private final TextSentiment sentiment;\n     private final SentimentConfidenceScores confidenceScores;\n-    private final IterableStream<SentenceSentiment> sentences;\n+    private final IterableStream<com.azure.ai.textanalytics.models.SentenceSentiment> sentences;\n+    private final IterableStream<TextAnalyticsWarning> warnings;\n \n     /**\n      * Creates a {@link DocumentSentiment} model that describes the sentiment of the document.\n      *\n      * @param sentiment the sentiment label of the document.\n      * @param confidenceScores the sentiment confidence score (Softmax score) between 0 and 1, for each sentiment label.\n      *   Higher values signify higher confidence.\n-     * @param sentences a list of sentence sentiments.\n+     * @param sentences a {@link IterableStream} of sentence sentiments.\n+     * @param warnings a {@link IterableStream} of {@link TextAnalyticsWarning}.", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMzMyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422223322", "bodyText": "Should the class name still be LinkedEntityMatch or Match?\ncc: @iscai-msft", "author": "samvaity", "createdAt": "2020-05-08T15:55:06Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/LinkedEntityMatch.java", "diffHunk": "@@ -21,30 +21,16 @@\n      */\n     private final String text;\n \n-    /*\n-     * Grapheme start position for the entity match text.\n-     */\n-    private final int graphemeOffset;\n-\n-    /*\n-     * Grapheme length for the entity match text.\n-     */\n-    private final int graphemeLength;\n-\n     /**\n      * Creates a {@link LinkedEntityMatch} model that describes linked entity match.\n      *\n      * @param text The entity text as appears in the request.\n      * @param confidenceScore If a well-known item is recognized, a decimal number denoting the\n      * confidence level between 0 and 1 will be returned.\n-     * @param graphemeOffset Grapheme start position for the entity match text.\n-     * @param graphemeLength Grapheme length for the entity match text.\n      */\n-    public LinkedEntityMatch(String text, double confidenceScore, int graphemeOffset, int graphemeLength) {\n+    public LinkedEntityMatch(String text, double confidenceScore) {", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI2NzE4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422267186", "bodyText": "https://github.com/Azure/azure-sdk-for-python/blob/master/sdk/textanalytics/azure-ai-textanalytics/azure/ai/textanalytics/_models.py#L493", "author": "mssfang", "createdAt": "2020-05-08T17:21:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMzMyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMzYyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422223621", "bodyText": "containing", "author": "samvaity", "createdAt": "2020-05-08T15:55:37Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/RecognizeLinkedEntitiesResult.java", "diffHunk": "@@ -6,35 +6,33 @@\n import com.azure.core.annotation.Immutable;\n import com.azure.core.util.IterableStream;\n \n-import java.util.ArrayList;\n-\n /**\n  * The {@link RecognizeLinkedEntitiesResult} model.\n  */\n @Immutable\n-public final class RecognizeLinkedEntitiesResult extends DocumentResult {\n-    private final IterableStream<LinkedEntity> entities;\n+public final class RecognizeLinkedEntitiesResult extends TextAnalyticsResult {\n+    private final LinkedEntityCollection entities;\n \n     /**\n      * Creates a {@link RecognizeLinkedEntitiesResult} model that describes recognized linked entities result.\n      *\n      * @param id Unique, non-empty document identifier.\n      * @param textDocumentStatistics The text document statistics.\n      * @param error The document error.\n-     * @param entities An {@link IterableStream} of {@link LinkedEntity}.\n+     * @param entities A {@link LinkedEntityCollection} contains entities and warnings.", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyNDYwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422224605", "bodyText": "Where are we setting this default?", "author": "samvaity", "createdAt": "2020-05-08T15:57:26Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextDocumentInput.java", "diffHunk": "@@ -28,7 +25,7 @@\n      * For example, use \"en\" for English; \"es\" for Spanish etc. If not set, use\n      * \"en\" for English as default.", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NzkyNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422257927", "bodyText": "if don't pass language to service, service will use \"en\" for English as default.", "author": "mssfang", "createdAt": "2020-05-08T17:02:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyNDYwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyNjU5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422226597", "bodyText": "COuld consider adding a setLanguage here ?", "author": "samvaity", "createdAt": "2020-05-08T16:01:22Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/TextAnalyticsClientJavaDocCodeSnippets.java", "diffHunk": "@@ -455,8 +464,8 @@ public void recognizeLinkedEntitiesStringListWithOptions() {\n     public void recognizeLinkedEntitiesBatchMaxOverload() {\n         // BEGIN: com.azure.ai.textanalytics.TextAnalyticsClient.recognizeLinkedEntitiesBatch#Iterable-TextAnalyticsRequestOptions-Context\n         List<TextDocumentInput> textDocumentInputs = Arrays.asList(\n-            new TextDocumentInput(\"1\", \"Old Faithful is a geyser at Yellowstone Park.\", \"en\"),\n-            new TextDocumentInput(\"2\", \"Mount Shasta has lenticular clouds.\", \"en\")\n+            new TextDocumentInput(\"1\", \"Old Faithful is a geyser at Yellowstone Park.\"),", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMDE4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422230186", "bodyText": "Would it help to assert the warning and confirm result has the expected result + warnings?", "author": "samvaity", "createdAt": "2020-05-08T16:08:26Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/TextAnalyticsAsyncClientTest.java", "diffHunk": "@@ -200,10 +205,17 @@ public void recognizeEntitiesForEmptyText() {\n     @Test\n     public void recognizeEntitiesForFaultyText() {\n         StepVerifier.create(client.recognizeEntities(\"!@#%%\"))\n-            .expectNextCount(0)\n+            .assertNext(result -> assertFalse(result.getWarnings().iterator().hasNext()))", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMTI0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422231249", "bodyText": "Any particular reason we changed this from AAD to AzureKeyCredential?", "author": "samvaity", "createdAt": "2020-05-08T16:10:24Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/TextAnalyticsClientTestBase.java", "diffHunk": "@@ -59,33 +59,38 @@\n import static com.azure.ai.textanalytics.TestUtils.KEY_PHRASE_INPUTS;\n import static com.azure.ai.textanalytics.TestUtils.LINKED_ENTITY_INPUTS;\n import static com.azure.ai.textanalytics.TestUtils.SENTIMENT_INPUTS;\n+import static com.azure.ai.textanalytics.TestUtils.TOO_LONG_INPUT;\n+import static com.azure.ai.textanalytics.TestUtils.getDuplicateTextDocumentInputs;\n+import static com.azure.ai.textanalytics.TestUtils.getWarningsTextDocumentInputs;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n import static org.junit.jupiter.api.Assertions.assertNotNull;\n import static org.junit.jupiter.api.Assertions.assertNull;\n-import static org.junit.jupiter.api.Assertions.assertTrue;\n \n public abstract class TextAnalyticsClientTestBase extends TestBase {\n-    private static final String DEFAULT_SCOPE = \"https://cognitiveservices.azure.com/.default\";\n     private static final String NAME = \"name\";\n     private static final String TEXT_ANALYTICS_PROPERTIES = \"azure-ai-textanalytics.properties\";\n+    private static final String OCP_APIM_SUBSCRIPTION_KEY = \"Ocp-Apim-Subscription-Key\";\n     private static final String VERSION = \"version\";\n+    private static final String AZURE_TEXT_ANALYTICS_API_KEY = \"AZURE_TEXT_ANALYTICS_API_KEY\";\n \n     private final HttpLogOptions httpLogOptions = new HttpLogOptions();\n     private final Map<String, String> properties = CoreUtils.getProperties(TEXT_ANALYTICS_PROPERTIES);\n     private final String clientName = properties.getOrDefault(NAME, \"UnknownName\");\n     private final String clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n-    static final String BATCH_ERROR_EXCEPTION_MESSAGE = \"Error in accessing the property on document id: 2, when RecognizeCategorizedEntitiesResult returned with an error: Document text is empty. ErrorCodeValue: {invalidDocument}\";\n+    static final String BATCH_ERROR_EXCEPTION_MESSAGE = \"Error in accessing the property on document id: 2, when RecognizeEntitiesResult returned with an error: Document text is empty. ErrorCodeValue: {invalidDocument}\";\n     static final String INVALID_COUNTRY_HINT_EXPECTED_EXCEPTION_MESSAGE = \"Country hint is not valid. Please specify an ISO 3166-1 alpha-2 two letter country code. ErrorCodeValue: {invalidCountryHint}\";\n     static final String INVALID_DOCUMENT_BATCH_NPE_MESSAGE = \"'documents' cannot be null.\";\n     static final String INVALID_DOCUMENT_EMPTY_LIST_EXCEPTION_MESSAGE = \"'documents' cannot be empty.\";\n     static final String INVALID_DOCUMENT_EXPECTED_EXCEPTION_MESSAGE = \"Document text is empty. ErrorCodeValue: {invalidDocument}\";\n     static final String INVALID_DOCUMENT_NPE_MESSAGE = \"'document' cannot be null.\";\n+    static final String WARNING_TOO_LONG_DOCUMENT_INPUT_MESSAGE = \"The document contains very long words (longer than 64 characters). These words will be truncated and may result in unreliable model predictions.\";\n \n     <T> T clientSetup(Function<HttpPipeline, T> clientBuilder) {\n-        TokenCredential credential = null;\n+        AzureKeyCredential credential = null;", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1MDQ0MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422250441", "bodyText": "the new endpoint, is only support Key Credential, it is owned by the service team. We are just using it temporately.", "author": "mssfang", "createdAt": "2020-05-08T16:48:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMTI0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI0NDk0OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422244948", "bodyText": "consider changing to a name that indicates that this method is only intended to use when error.id=\"\"", "author": "maririos", "createdAt": "2020-05-08T16:37:42Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/Utility.java", "diffHunk": "@@ -25,4 +35,64 @@ public static void inputDocumentsValidation(Iterable<?> documents) {\n             throw new IllegalArgumentException(\"'documents' cannot be empty.\");\n         }\n     }\n+\n+    /**\n+     * Get a mock {@link HttpResponse} that only return status code 400.\n+     *\n+     * @param response A {@link SimpleResponse} with any type\n+     * @return A mock {@link HttpResponse} that only return status code 400.\n+     */\n+    public static HttpResponse getMockHttpResponse(SimpleResponse<?> response) {", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1MDc4NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422250785", "bodyText": "although this will be supported in all endpoints, it has only been deployed to linked entities one.", "author": "maririos", "createdAt": "2020-05-08T16:49:00Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/TextAnalyticsAsyncClientTest.java", "diffHunk": "@@ -264,6 +264,14 @@ public void recognizeEntitiesForListWithOptions() {\n                 .verifyComplete());\n     }\n \n+    @Test\n+    public void recognizeEntitiesTooManyDocuments() {", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1MTQ0Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422251447", "bodyText": "ohh wait, does it works now in the entities endpoint too?", "author": "maririos", "createdAt": "2020-05-08T16:50:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1MDc4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM4Mzg0Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422383842", "bodyText": "only recognizedEntltiy and recognizedLinkedEntity works as i tested out.", "author": "mssfang", "createdAt": "2020-05-08T21:27:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1MDc4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1MTA3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422251075", "bodyText": "it will be good to check the status code and error code?", "author": "maririos", "createdAt": "2020-05-08T16:49:33Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/TextAnalyticsAsyncClientTest.java", "diffHunk": "@@ -264,6 +264,14 @@ public void recognizeEntitiesForListWithOptions() {\n                 .verifyComplete());\n     }\n \n+    @Test\n+    public void recognizeEntitiesTooManyDocuments() {\n+        recognizeEntitiesTooManyDocumentsRunner(inputs -> {\n+            StepVerifier.create(client.recognizeEntitiesBatch(inputs))\n+                .verifyErrorSatisfies(ex -> assertEquals(HttpResponseException.class, ex.getClass()));", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI3OTQ3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422279473", "bodyText": "Oh sorry, what I meant was this should be just \"Get the sentence text property\". It's still a nitpick though, so not a big deal if you don't want to change it again", "author": "iscai-msft", "createdAt": "2020-05-08T17:46:10Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/SentenceSentiment.java", "diffHunk": "@@ -30,7 +30,7 @@ public SentenceSentiment(String text, TextSentiment sentiment, SentimentConfiden\n     }\n \n     /**\n-     * Get the text property: The sentence text.\n+     * Get the sentence text property: The sentence text.", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI4MTYwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422281601", "bodyText": "Sorry I was wrong when I suggested this, I didn't realize that this TextDocumentInput constructor didn't take language. I'm confused though: it looks like in master you had two constructors: one that took language, one that did not.\nI think you should still have two constructors here like in master. For the one that doesn't take language as a parameter, it should set this.language = \"en\", since that is the default. Otherwise, this.language = language", "author": "iscai-msft", "createdAt": "2020-05-08T17:50:27Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextDocumentInput.java", "diffHunk": "@@ -36,7 +36,6 @@\n     public TextDocumentInput(String id, String text) {\n         this.id = id;\n         this.text = text;\n-        this.language = \"en\";", "originalCommit": "2ac3668c6dc080a58a0248ccced1c7abab7e1483", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQyNDkxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422424913", "bodyText": "if in the future, the default lanauge is change to 'es. we need to update it to es`. Since service team take default value in service side, we should not add what they are maintaining here. So keep no-assigned in SDK should be an better idea.", "author": "mssfang", "createdAt": "2020-05-09T00:03:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI4MTYwMQ=="}], "type": "inlineReview"}, {"oid": "07718eb148f40fc09ec3f01ca40a806ba7b4aa4c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/07718eb148f40fc09ec3f01ca40a806ba7b4aa4c", "message": "wording and setter", "committedDate": "2020-05-08T22:52:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQxMjk0Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422412942", "bodyText": "i'm not sure i understand the context on just making setLanguage a setter and not adding it to a separate constructor like you used to have it. Is there a reason why you can't add this constructor back like it is in master: \n  \n    \n      azure-sdk-for-java/sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextDocumentInput.java\n    \n    \n         Line 50\n      in\n      fcdaff1\n    \n    \n    \n    \n\n        \n          \n           public TextDocumentInput(String id, String text, String language) { \n        \n    \n  \n\n\nI really don't think it's a good idea to force users to call TextDocumentInput.setLanguage(\"en\") for the most basic version of TextDocumentInput (you're doing this in your tests). What I think you should do is have two constructors exactly how it is in master. Is there a reason why you're changing this code?", "author": "iscai-msft", "createdAt": "2020-05-08T23:03:44Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextDocumentInput.java", "diffHunk": "@@ -73,9 +73,12 @@ public String getLanguage() {\n      * for Spanish etc. If not set, use \"en\" for English as default.\n      *\n      * @param language Optional. This is the 2 letter ISO 639-1 representation of a language.\n+     *\n+     * @return The object {@link TextDocumentInput} itself.\n      */\n-    public void setLanguage(String language) {\n+    public TextDocumentInput setLanguage(String language) {", "originalCommit": "07718eb148f40fc09ec3f01ca40a806ba7b4aa4c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQyMzY2NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10593#discussion_r422423665", "bodyText": "the only time constructor needed is when the parameter is required. But since language is optional. it should not go to constructor. Let's say maybe in the future, more parameter will be added to this class, we will not add another constructor if the value is not required.", "author": "mssfang", "createdAt": "2020-05-08T23:56:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQxMjk0Mg=="}], "type": "inlineReview"}, {"oid": "7dcf149196d48bb0f1a73488c5e24a085142d45d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7dcf149196d48bb0f1a73488c5e24a085142d45d", "message": "throw HttpException with errorcode, and message", "committedDate": "2020-05-08T23:54:00Z", "type": "commit"}, {"oid": "c9dd6c36eab954f67de1724071cf9bca6ebaf1a5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c9dd6c36eab954f67de1724071cf9bca6ebaf1a5", "message": "update changelog and readme", "committedDate": "2020-05-09T01:00:55Z", "type": "commit"}]}