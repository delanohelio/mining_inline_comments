{"pr_number": 17452, "pr_title": "[Communication] - Chat - Replaced ChatUserCredentialPolicy with BearerTokenAuthenticationPolicy", "pr_createdAt": "2020-11-10T20:24:54Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/17452", "timeline": [{"oid": "7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9", "message": "Replaced ChatUserCredentialPolicy with BearerTokenAuthenticationPolicy", "committedDate": "2020-11-10T20:27:28Z", "type": "commit"}, {"oid": "7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9", "message": "Replaced ChatUserCredentialPolicy with BearerTokenAuthenticationPolicy", "committedDate": "2020-11-10T20:27:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMzM4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#discussion_r520913387", "bodyText": "Looks like you should also remove the ChatUserCredentialPolicy file as it is not used anymore", "author": "ankitarorabit", "createdAt": "2020-11-10T22:25:35Z", "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatClientBuilder.java", "diffHunk": "@@ -166,9 +168,10 @@ public ChatAsyncClient buildAsyncClient() {\n         } else {\n             Objects.requireNonNull(communicationUserCredential);\n             Objects.requireNonNull(httpClient);\n+            CommunicationTokenCredential tokenCredential = new CommunicationTokenCredential(communicationUserCredential);\n \n             pipeline = createHttpPipeline(httpClient,\n-                new ChatUserCredentialPolicy(communicationUserCredential),", "originalCommit": "7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMzY4Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#discussion_r520913683", "bodyText": "Just removed it!", "author": "jbeauregardb", "createdAt": "2020-11-10T22:26:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMzM4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMzc0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#discussion_r520913749", "bodyText": "I see you already took care of it", "author": "ankitarorabit", "createdAt": "2020-11-10T22:26:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMzM4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxNDU4Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#discussion_r520914583", "bodyText": "nit: space between \"a CommunicationUserCredential\"", "author": "ankitarorabit", "createdAt": "2020-11-10T22:28:16Z", "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/CommunicationTokenCredential.java", "diffHunk": "@@ -0,0 +1,41 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.communication.common;\n+\n+import java.util.concurrent.ExecutionException;\n+\n+import com.azure.core.credential.AccessToken;\n+import com.azure.core.credential.TokenCredential;\n+import com.azure.core.credential.TokenRequestContext;\n+\n+import reactor.core.publisher.Mono;\n+\n+/**\n+ * This class serves as aCommunicationUserCredential wrapper that ", "originalCommit": "e03d97b5ff4d2ff381f758d14596478d14e2b007", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b665cabddec4250042d3fd22ffe4d3bb2afc0075", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b665cabddec4250042d3fd22ffe4d3bb2afc0075", "message": "Removed ChatUserCredentialPolicy", "committedDate": "2020-11-10T22:41:54Z", "type": "commit"}, {"oid": "b665cabddec4250042d3fd22ffe4d3bb2afc0075", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b665cabddec4250042d3fd22ffe4d3bb2afc0075", "message": "Removed ChatUserCredentialPolicy", "committedDate": "2020-11-10T22:41:54Z", "type": "forcePushed"}, {"oid": "77e3250c5494d9a03f2fb21db4b36576a5328da6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/77e3250c5494d9a03f2fb21db4b36576a5328da6", "message": "Added tests for CommunicationTokenCredential", "committedDate": "2020-11-11T19:51:03Z", "type": "commit"}, {"oid": "77e3250c5494d9a03f2fb21db4b36576a5328da6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/77e3250c5494d9a03f2fb21db4b36576a5328da6", "message": "Added tests for CommunicationTokenCredential", "committedDate": "2020-11-11T19:51:03Z", "type": "forcePushed"}]}