{"pr_number": 14660, "pr_title": "Initial test framework", "pr_createdAt": "2020-08-31T20:00:30Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14660", "timeline": [{"oid": "b2e5a2ab53adb944c8485b5e865ef39bf0503a75", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b2e5a2ab53adb944c8485b5e865ef39bf0503a75", "message": "Initial test framework", "committedDate": "2020-08-31T19:58:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3MDExOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14660#discussion_r480370118", "bodyText": "space between () and {?", "author": "drwill-ms", "createdAt": "2020-08-31T20:06:52Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/test/java/com/azure/digitaltwins/core/DigitalTwinsTestBase.java", "diffHunk": "@@ -0,0 +1,90 @@\n+package com.azure.digitaltwins.core;\n+\n+import com.azure.core.http.policy.HttpLogDetailLevel;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.test.TestBase;\n+import com.azure.core.test.TestMode;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.identity.ClientSecretCredentialBuilder;\n+\n+import java.util.Locale;\n+\n+public class DigitalTwinsTestBase extends TestBase\n+{\n+    protected static final String TENANT_ID = Configuration.getGlobalConfiguration()\n+        .get(\"TENANT_ID\", \"tenantId\");\n+\n+    protected static final String CLIENT_SECRET = Configuration.getGlobalConfiguration()\n+        .get(\"CLIENT_SECRET\", \"clientSecret\");\n+\n+    protected static final String CLIENT_ID = Configuration.getGlobalConfiguration()\n+        .get(\"CLIENT_ID\", \"clientId\");\n+\n+    protected static final String DIGITALTWINS_URL = Configuration.getGlobalConfiguration()\n+        .get(\"DIGITALTWINS_URL\", \"https://playback.api.wus2.digitaltwins.azure.net\");\n+\n+    protected DigitalTwinsClientBuilder getDigitalTwinsClientBuilder(){", "originalCommit": "b2e5a2ab53adb944c8485b5e865ef39bf0503a75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3MDMxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14660#discussion_r480370316", "bodyText": "space between if and (?", "author": "drwill-ms", "createdAt": "2020-08-31T20:07:17Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/test/java/com/azure/digitaltwins/core/DigitalTwinsTestBase.java", "diffHunk": "@@ -0,0 +1,90 @@\n+package com.azure.digitaltwins.core;\n+\n+import com.azure.core.http.policy.HttpLogDetailLevel;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.test.TestBase;\n+import com.azure.core.test.TestMode;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.identity.ClientSecretCredentialBuilder;\n+\n+import java.util.Locale;\n+\n+public class DigitalTwinsTestBase extends TestBase\n+{\n+    protected static final String TENANT_ID = Configuration.getGlobalConfiguration()\n+        .get(\"TENANT_ID\", \"tenantId\");\n+\n+    protected static final String CLIENT_SECRET = Configuration.getGlobalConfiguration()\n+        .get(\"CLIENT_SECRET\", \"clientSecret\");\n+\n+    protected static final String CLIENT_ID = Configuration.getGlobalConfiguration()\n+        .get(\"CLIENT_ID\", \"clientId\");\n+\n+    protected static final String DIGITALTWINS_URL = Configuration.getGlobalConfiguration()\n+        .get(\"DIGITALTWINS_URL\", \"https://playback.api.wus2.digitaltwins.azure.net\");\n+\n+    protected DigitalTwinsClientBuilder getDigitalTwinsClientBuilder(){\n+        DigitalTwinsClientBuilder builder = new DigitalTwinsClientBuilder()\n+            .endpoint(DIGITALTWINS_URL)\n+            .tokenCredential(new ClientSecretCredentialBuilder()\n+                .tenantId(TENANT_ID)\n+                .clientId(CLIENT_ID)\n+                .clientSecret(CLIENT_SECRET)\n+                .build());\n+\n+        if(interceptorManager.isPlaybackMode()){", "originalCommit": "b2e5a2ab53adb944c8485b5e865ef39bf0503a75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3MDU1OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14660#discussion_r480370559", "bodyText": "nice!", "author": "abhipsaMisra", "createdAt": "2020-08-31T20:07:46Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/src/test/java/com/azure/digitaltwins/core/DigitalTwinsTestBase.java", "diffHunk": "@@ -0,0 +1,90 @@\n+package com.azure.digitaltwins.core;\n+\n+import com.azure.core.http.policy.HttpLogDetailLevel;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.test.TestBase;\n+import com.azure.core.test.TestMode;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.identity.ClientSecretCredentialBuilder;\n+\n+import java.util.Locale;\n+\n+public class DigitalTwinsTestBase extends TestBase\n+{\n+    protected static final String TENANT_ID = Configuration.getGlobalConfiguration()\n+        .get(\"TENANT_ID\", \"tenantId\");\n+\n+    protected static final String CLIENT_SECRET = Configuration.getGlobalConfiguration()\n+        .get(\"CLIENT_SECRET\", \"clientSecret\");\n+\n+    protected static final String CLIENT_ID = Configuration.getGlobalConfiguration()\n+        .get(\"CLIENT_ID\", \"clientId\");\n+\n+    protected static final String DIGITALTWINS_URL = Configuration.getGlobalConfiguration()\n+        .get(\"DIGITALTWINS_URL\", \"https://playback.api.wus2.digitaltwins.azure.net\");\n+\n+    protected DigitalTwinsClientBuilder getDigitalTwinsClientBuilder(){\n+        DigitalTwinsClientBuilder builder = new DigitalTwinsClientBuilder()\n+            .endpoint(DIGITALTWINS_URL)\n+            .tokenCredential(new ClientSecretCredentialBuilder()\n+                .tenantId(TENANT_ID)\n+                .clientId(CLIENT_ID)\n+                .clientSecret(CLIENT_SECRET)\n+                .build());\n+\n+        if(interceptorManager.isPlaybackMode()){\n+            builder.httpClient(interceptorManager.getPlaybackClient());\n+            return builder;\n+        }\n+\n+        // TODO: investigate whether or not we need to add a retry policy.\n+\n+        // If it is record mode, we add record mode policies to the builder.\n+        // There is no isRecordMode method on interceptorManger.\n+        if(!interceptorManager.isLiveMode()){\n+            builder.addPolicy(interceptorManager.getRecordPolicy());\n+        }\n+\n+        return builder;\n+    }\n+\n+    protected DigitalTwinsClientBuilder getDigitalTwinsClientBuilder(HttpPipelinePolicy... policies){", "originalCommit": "b2e5a2ab53adb944c8485b5e865ef39bf0503a75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "36a7af93e0e92dde02ea995b8adef9c10c1a68bb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/36a7af93e0e92dde02ea995b8adef9c10c1a68bb", "message": "move test prerequisites to resoruces.", "committedDate": "2020-08-31T20:08:58Z", "type": "commit"}, {"oid": "75670a936a48054d746097e8cbd37132bb0dd389", "url": "https://github.com/Azure/azure-sdk-for-java/commit/75670a936a48054d746097e8cbd37132bb0dd389", "message": "Update DigitalTwinsTestBase.java", "committedDate": "2020-08-31T20:12:31Z", "type": "commit"}, {"oid": "dceb128707abc31b4045c5598537516906f88371", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dceb128707abc31b4045c5598537516906f88371", "message": "Add session recordings", "committedDate": "2020-08-31T20:33:12Z", "type": "commit"}, {"oid": "b0cd1b7f51180929a2f2f6a2e4e849c09cc5cdde", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b0cd1b7f51180929a2f2f6a2e4e849c09cc5cdde", "message": "Update DigitalTwinsTestBase.java", "committedDate": "2020-08-31T21:59:26Z", "type": "commit"}, {"oid": "599ca590ebdb9a48f4413cef89908e4ac05d0056", "url": "https://github.com/Azure/azure-sdk-for-java/commit/599ca590ebdb9a48f4413cef89908e4ac05d0056", "message": "lower the code coverage", "committedDate": "2020-08-31T22:20:28Z", "type": "commit"}, {"oid": "bceb38dd109b1fc321930ef0b4ad8e1336f71641", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bceb38dd109b1fc321930ef0b4ad8e1336f71641", "message": "remove manifest file as we now use arm templates to deploy resources and manage permissions.", "committedDate": "2020-08-31T22:56:38Z", "type": "commit"}]}