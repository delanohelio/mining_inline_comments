{"pr_number": 486, "pr_title": "XRDDEV-59 Using ISO-8601", "pr_createdAt": "2020-04-30T13:22:05Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/486", "timeline": [{"oid": "4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe", "url": "https://github.com/nordic-institute/X-Road/commit/4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe", "message": "XRDDEV-59 Using ISO-8601", "committedDate": "2020-04-30T13:14:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEyOTc4Mw==", "url": "https://github.com/nordic-institute/X-Road/pull/486#discussion_r420129783", "bodyText": "This could be simplified, converting the instant is not necessary when UTC is used ( https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#toString-- )", "author": "jhyoty", "createdAt": "2020-05-05T13:57:33Z", "path": "src/common-verifier/src/main/java/ee/ria/xroad/common/ocsp/OcspVerifier.java", "diffHunk": "@@ -172,10 +174,12 @@ private void verifyValidityAt(Date atDate, SingleResp singleResp) {\n             log.debug(\"Verify OCSP nextUpdate, atDate: {} nextUpdate: {}\", atDate, singleResp.getNextUpdate());\n             if (singleResp.getNextUpdate() != null\n                     && singleResp.getNextUpdate().before(atDate)) {\n-                SimpleDateFormat fmt = new SimpleDateFormat(\"dd-MM-yyyy HH:mm:ss\");\n                 throw new CodedException(X_INCORRECT_VALIDATION_INFO,\n-                        String.format(\"OCSP nextUpdate is too old, atDate: %s nextUpdate: %s\", fmt.format(atDate),\n-                                fmt.format(singleResp.getNextUpdate())));\n+                        String.format(\"OCSP nextUpdate is too old, atDate: %s nextUpdate: %s\",\n+                                ZonedDateTime.ofInstant(atDate.toInstant(),\n+                                        ZoneId.of(\"UTC\")).format(DateTimeFormatter.ISO_INSTANT),\n+                                ZonedDateTime.ofInstant(singleResp.getNextUpdate().toInstant(),\n+                                        ZoneId.of(\"UTC\")).format(DateTimeFormatter.ISO_INSTANT)));", "originalCommit": "4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEzMTIzNA==", "url": "https://github.com/nordic-institute/X-Road/pull/486#discussion_r420131234", "bodyText": "Could be simplified to anchor.getGeneratedAt().toInstant()", "author": "jhyoty", "createdAt": "2020-05-05T13:59:24Z", "path": "src/configuration-proxy/src/main/java/ee/ria/xroad/confproxy/commandline/ConfProxyUtilViewConf.java", "diffHunk": "@@ -124,11 +125,9 @@ private void displayInfo(final String instance,\n         if (anchorError == null) {\n             System.out.println(\"Instance identifier: \"\n                     + anchor.getInstanceIdentifier());\n-            SimpleDateFormat sdf =\n-                    new SimpleDateFormat(\"z yyyy-MMM-d hh:mm:ss\");\n-            sdf.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n             System.out.println(\"Generated at:        \"\n-                    + sdf.format(anchor.getGeneratedAt()));\n+                    + ZonedDateTime.ofInstant(anchor.getGeneratedAt().toInstant(),\n+                    ZoneId.of(\"UTC\")).format(DateTimeFormatter.ISO_INSTANT));", "originalCommit": "4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "accccb417a183d1460d3e45e495419f745825385", "url": "https://github.com/nordic-institute/X-Road/commit/accccb417a183d1460d3e45e495419f745825385", "message": "XRDDEV-59 Use ISO 8601", "committedDate": "2020-05-06T15:41:17Z", "type": "commit"}, {"oid": "16974b76240762c86122716b190b4ee88e61daff", "url": "https://github.com/nordic-institute/X-Road/commit/16974b76240762c86122716b190b4ee88e61daff", "message": "Merge branch 'develop' into XRDDEV-59-date-format", "committedDate": "2020-05-06T15:41:54Z", "type": "commit"}, {"oid": "984270046f5f2761eccb1d68a4aacb1c42b7404a", "url": "https://github.com/nordic-institute/X-Road/commit/984270046f5f2761eccb1d68a4aacb1c42b7404a", "message": "XRDDEV-59 Refactoring", "committedDate": "2020-05-11T05:49:41Z", "type": "commit"}]}