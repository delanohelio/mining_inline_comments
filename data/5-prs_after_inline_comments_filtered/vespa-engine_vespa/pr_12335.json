{"pr_number": 12335, "pr_title": "Keep Athenz user domains lookup for 1min, per identity", "pr_createdAt": "2020-02-25T13:43:32Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12335", "timeline": [{"oid": "948b2067b93fc3634583cc5545daec4c4fd3b0b4", "url": "https://github.com/vespa-engine/vespa/commit/948b2067b93fc3634583cc5545daec4c4fd3b0b4", "message": "Keep Athenz user domains lookup for 1min, per identity", "committedDate": "2020-02-25T13:41:01Z", "type": "commit"}, {"oid": "a0e14da8a3439ab1d96ecfc11a5c544555cef15c", "url": "https://github.com/vespa-engine/vespa/commit/a0e14da8a3439ab1d96ecfc11a5c544555cef15c", "message": "Cache ZMS has-access lookups as well", "committedDate": "2020-02-25T14:59:11Z", "type": "commit"}, {"oid": "9440ecd2f5dd358ce24e3f1e31c2907a87649a2d", "url": "https://github.com/vespa-engine/vespa/commit/9440ecd2f5dd358ce24e3f1e31c2907a87649a2d", "message": "Parallellise lookups to ZMS during access control evaluation", "committedDate": "2020-02-25T15:25:50Z", "type": "forcePushed"}, {"oid": "d44c49fbc6ad1f4901cd5a1b6c9ec4d43580f13c", "url": "https://github.com/vespa-engine/vespa/commit/d44c49fbc6ad1f4901cd5a1b6c9ec4d43580f13c", "message": "Parallellise lookups to ZMS during access control evaluation", "committedDate": "2020-02-25T15:27:57Z", "type": "commit"}, {"oid": "d44c49fbc6ad1f4901cd5a1b6c9ec4d43580f13c", "url": "https://github.com/vespa-engine/vespa/commit/d44c49fbc6ad1f4901cd5a1b6c9ec4d43580f13c", "message": "Parallellise lookups to ZMS during access control evaluation", "committedDate": "2020-02-25T15:27:57Z", "type": "forcePushed"}, {"oid": "dd530f2c269442230f3285649fec166c7ca4b1fa", "url": "https://github.com/vespa-engine/vespa/commit/dd530f2c269442230f3285649fec166c7ca4b1fa", "message": "Rename variable with silly name", "committedDate": "2020-02-25T15:32:00Z", "type": "commit"}, {"oid": "29c74cfb8d63216a7bf310826398b79c3945f8ca", "url": "https://github.com/vespa-engine/vespa/commit/29c74cfb8d63216a7bf310826398b79c3945f8ca", "message": "Merge branch 'master' into jvenstad/cache-Athenz-user-domains", "committedDate": "2020-02-26T07:57:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU3MTUxMA==", "url": "https://github.com/vespa-engine/vespa/pull/12335#discussion_r384571510", "bodyText": "Should probably be shut down on deconstruction? (Not 100% on whether this applies to filters)", "author": "mpolden", "createdAt": "2020-02-26T15:34:12Z", "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/restapi/filter/AthenzRoleFilter.java", "diffHunk": "@@ -46,11 +50,13 @@\n \n     private final AthenzFacade athenz;\n     private final TenantController tenants;\n+    private final ExecutorService executor;", "originalCommit": "29c74cfb8d63216a7bf310826398b79c3945f8ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk4MzE3OA==", "url": "https://github.com/vespa-engine/vespa/pull/12335#discussion_r384983178", "bodyText": "That is correct. The filter should inherit AbstractComponent and do executor shutdown in deconstruct().", "author": "bjorncs", "createdAt": "2020-02-27T08:47:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU3MTUxMA=="}], "type": "inlineReview"}, {"oid": "2955bfcc05234ccc3c7a61a6bb10c7caddeb7989", "url": "https://github.com/vespa-engine/vespa/commit/2955bfcc05234ccc3c7a61a6bb10c7caddeb7989", "message": "Close executor on deconstruction", "committedDate": "2020-02-27T09:23:26Z", "type": "commit"}]}