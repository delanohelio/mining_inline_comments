{"pr_number": 13079, "pr_title": "Create policies for billing API resources", "pr_createdAt": "2020-04-27T10:07:30Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/13079", "timeline": [{"oid": "a8467b2d5dd932512219d8eeee9fd73e8a2b267b", "url": "https://github.com/vespa-engine/vespa/commit/a8467b2d5dd932512219d8eeee9fd73e8a2b267b", "message": "Create policies for billing API resources", "committedDate": "2020-04-27T10:06:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY4NjU2OQ==", "url": "https://github.com/vespa-engine/vespa/pull/13079#discussion_r415686569", "bodyText": "What's the benefit of having these as three separate policies?", "author": "olaaun", "createdAt": "2020-04-27T10:13:28Z", "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/Policy.java", "diffHunk": "@@ -142,7 +142,32 @@\n     /** Access to /payment/notification */\n     paymentProcessor(Privilege.grant(Action.create)\n                                 .on(PathGroup.paymentProcessor)\n-                                .in(SystemName.PublicCd));\n+                                .in(SystemName.PublicCd)),\n+\n+    /** Read your own instrument information */\n+    paymentInstrumentRead(Privilege.grant(Action.read)\n+                                   .on(PathGroup.billingInstrument)\n+                                   .in(SystemName.PublicCd)),\n+\n+    /** Ability to update tenant payment instrument */\n+    paymentInstrumentUpdate(Privilege.grant(Action.update)\n+                                     .on(PathGroup.billingInstrument)\n+                                     .in(SystemName.PublicCd)),\n+\n+    /** Ability to remove your own payment instrument */\n+    paymentInstrumentDelete(Privilege.grant(Action.delete)\n+                                     .on(PathGroup.billingInstrument)\n+                                     .in(SystemName.PublicCd)),", "originalCommit": "a8467b2d5dd932512219d8eeee9fd73e8a2b267b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY4NzgyNw==", "url": "https://github.com/vespa-engine/vespa/pull/13079#discussion_r415687827", "bodyText": "They are assigned differently in roles? I guess delete and read could be merged as they are used the same in roles, but that feels wrong.", "author": "oyving", "createdAt": "2020-04-27T10:15:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY4NjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTcyMTk3Mg==", "url": "https://github.com/vespa-engine/vespa/pull/13079#discussion_r415721972", "bodyText": "Alright", "author": "olaaun", "createdAt": "2020-04-27T11:10:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY4NjU2OQ=="}], "type": "inlineReview"}, {"oid": "dfc3ea8a384311135580fc856fde3808640ffeae", "url": "https://github.com/vespa-engine/vespa/commit/dfc3ea8a384311135580fc856fde3808640ffeae", "message": "Fix conflict in path specs", "committedDate": "2020-04-27T12:26:36Z", "type": "commit"}]}