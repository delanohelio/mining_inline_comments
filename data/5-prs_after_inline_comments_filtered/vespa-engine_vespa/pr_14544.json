{"pr_number": 14544, "pr_title": "Jonmv/more doc api parameters", "pr_createdAt": "2020-09-24T19:44:24Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14544", "timeline": [{"oid": "bea49fe5bd3f4d02b003617dc8a7b4091ec3a632", "url": "https://github.com/vespa-engine/vespa/commit/bea49fe5bd3f4d02b003617dc8a7b4091ec3a632", "message": "Add DocumentOperationParameters to document session API", "committedDate": "2020-09-24T19:36:31Z", "type": "commit"}, {"oid": "ba878c027385ac2db61dd849d39705c704786f62", "url": "https://github.com/vespa-engine/vespa/commit/ba878c027385ac2db61dd849d39705c704786f62", "message": "Use trace level from parameters, and pass on to Response", "committedDate": "2020-09-24T19:36:38Z", "type": "commit"}, {"oid": "7d280adf22a83d5446153820a42258d352418269", "url": "https://github.com/vespa-engine/vespa/commit/7d280adf22a83d5446153820a42258d352418269", "message": "Use NOT_FOUND in DocumentResponse as well \u2014 as success", "committedDate": "2020-09-24T19:38:03Z", "type": "commit"}, {"oid": "0001e35d02bd576355507d78a44e08514dcc7f0c", "url": "https://github.com/vespa-engine/vespa/commit/0001e35d02bd576355507d78a44e08514dcc7f0c", "message": "Remove _probably_ irrelevant case handling", "committedDate": "2020-09-24T19:38:11Z", "type": "commit"}, {"oid": "08bca580ba37998cc826629e0a11532c51e35131", "url": "https://github.com/vespa-engine/vespa/commit/08bca580ba37998cc826629e0a11532c51e35131", "message": "Update abi spec", "committedDate": "2020-09-24T19:38:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDc5MDA3OA==", "url": "https://github.com/vespa-engine/vespa/pull/14544#discussion_r494790078", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * call will cause one or more {@link DocumentIdResponse} objects to apprear within the timeout time of this session.\n          \n          \n            \n                 * call will cause one or more {@link DocumentIdResponse} objects to appear within the timeout time of this session.", "author": "bratseth", "createdAt": "2020-09-25T07:07:54Z", "path": "documentapi/src/main/java/com/yahoo/documentapi/AsyncSession.java", "diffHunk": "@@ -158,6 +194,23 @@ default Result get(DocumentId id, DocumentProtocol.Priority priority) {\n      * @throws UnsupportedOperationException if this access implementation does not support removal\n      */\n     default Result remove(DocumentId id, DocumentProtocol.Priority priority) {\n+        return remove(id, parameters().withPriority(priority));\n+    }\n+\n+    /**\n+     * <p>Removes a document if it is present. This method returns immediately.</p>\n+     *\n+     * <p>If this result is a success, this\n+     * call will cause one or more {@link DocumentIdResponse} objects to apprear within the timeout time of this session.", "originalCommit": "bea49fe5bd3f4d02b003617dc8a7b4091ec3a632", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDc5MDUyNg==", "url": "https://github.com/vespa-engine/vespa/pull/14544#discussion_r494790526", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            /** Optional parameters for a document operation. Immutable class. */\n          \n          \n            \n            /** \n          \n          \n            \n             * Optional parameters for a document operation. Immutable class.\n          \n          \n            \n             *\n          \n          \n            \n             * @author jonmv \n          \n          \n            \n             */", "author": "bratseth", "createdAt": "2020-09-25T07:09:02Z", "path": "documentapi/src/main/java/com/yahoo/documentapi/DocumentOperationParameters.java", "diffHunk": "@@ -0,0 +1,66 @@\n+package com.yahoo.documentapi;\n+\n+import com.yahoo.document.fieldset.FieldSet;\n+import com.yahoo.document.fieldset.FieldSetRepo;\n+import com.yahoo.documentapi.messagebus.protocol.DocumentProtocol;\n+\n+import java.util.Optional;\n+import java.util.OptionalInt;\n+\n+import static java.util.Objects.requireNonNull;\n+\n+/** Optional parameters for a document operation. Immutable class. */", "originalCommit": "bea49fe5bd3f4d02b003617dc8a7b4091ec3a632", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDc5MDgwNQ==", "url": "https://github.com/vespa-engine/vespa/pull/14544#discussion_r494790805", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            package com.yahoo.documentapi;\n          \n          \n            \n            // Copyright Verizon Media. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n          \n          \n            \n            package com.yahoo.documentapi;", "author": "bratseth", "createdAt": "2020-09-25T07:09:39Z", "path": "documentapi/src/main/java/com/yahoo/documentapi/DocumentOperationParameters.java", "diffHunk": "@@ -0,0 +1,66 @@\n+package com.yahoo.documentapi;", "originalCommit": "bea49fe5bd3f4d02b003617dc8a7b4091ec3a632", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f52458bedbbd2856eb6170aecebe008f097b7b5b", "url": "https://github.com/vespa-engine/vespa/commit/f52458bedbbd2856eb6170aecebe008f097b7b5b", "message": "Fix javadoc typo\n\nCo-authored-by: Jon Bratseth <bratseth@oath.com>", "committedDate": "2020-09-25T07:22:02Z", "type": "commit"}, {"oid": "db2797a271390eb12be83910402cbc7c540f78f0", "url": "https://github.com/vespa-engine/vespa/commit/db2797a271390eb12be83910402cbc7c540f78f0", "message": "Fix javadoc header\n\nCo-authored-by: Jon Bratseth <bratseth@oath.com>", "committedDate": "2020-09-25T07:22:12Z", "type": "commit"}, {"oid": "5c4cfe18a62db70f25e66b00459e11f573b05b16", "url": "https://github.com/vespa-engine/vespa/commit/5c4cfe18a62db70f25e66b00459e11f573b05b16", "message": "Add copyright header\n\nCo-authored-by: Jon Bratseth <bratseth@oath.com>", "committedDate": "2020-09-25T07:22:22Z", "type": "commit"}]}