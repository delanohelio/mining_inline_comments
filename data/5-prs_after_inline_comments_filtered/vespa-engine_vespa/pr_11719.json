{"pr_number": 11719, "pr_title": "Accept, store and display optional sourceUrl and commit", "pr_createdAt": "2020-01-09T12:33:00Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/11719", "timeline": [{"oid": "7dadf68de87b6cbabffd248f306df521e90c125b", "url": "https://github.com/vespa-engine/vespa/commit/7dadf68de87b6cbabffd248f306df521e90c125b", "message": "Accept, store and display optional sourceUrl and commit", "committedDate": "2020-01-09T12:32:30Z", "type": "commit"}, {"oid": "0353b17e52678ca85979e6fe2308afbef5ac8263", "url": "https://github.com/vespa-engine/vespa/commit/0353b17e52678ca85979e6fe2308afbef5ac8263", "message": "Set commit and sourceUrl fields when present, in submit mojo", "committedDate": "2020-01-09T12:41:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDcyMzQzMw==", "url": "https://github.com/vespa-engine/vespa/pull/11719#discussion_r364723433", "bodyText": "Name? Isn't this the commit hash?", "author": "mpolden", "createdAt": "2020-01-09T12:56:31Z", "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/integration/deployment/ApplicationVersion.java", "diffHunk": "@@ -104,6 +123,21 @@ public String id() {\n     /** Returns the time this package was built, if known. */\n     public Optional<Instant> buildTime() { return buildTime; }\n \n+    /** Returns the source URL for this application version. */\n+    public Optional<String> sourceUrl() {\n+        return sourceUrl.or(() -> source.map(source -> {\n+            String repository = source.repository();\n+            if (repository.startsWith(\"git@\"))\n+                repository = \"https://\" + repository.substring(4).replace(':', '/');\n+            if (repository.endsWith(\".git\"))\n+                repository = repository.substring(0, repository.length() - 4);\n+            return repository + \"/tree/\" + source.commit();\n+        }));\n+    }\n+\n+    /** Returns the commit name of this application version. */", "originalCommit": "7dadf68de87b6cbabffd248f306df521e90c125b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDczNDczOA==", "url": "https://github.com/vespa-engine/vespa/pull/11719#discussion_r364734738", "bodyText": "It is the commit has right now, but it could be anything. \"Best version FINAL 2.3\", for example :p", "author": "jonmv", "createdAt": "2020-01-09T13:23:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDcyMzQzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDczNDgyOA==", "url": "https://github.com/vespa-engine/vespa/pull/11719#discussion_r364734828", "bodyText": "It is used specified.", "author": "jonmv", "createdAt": "2020-01-09T13:23:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDcyMzQzMw=="}], "type": "inlineReview"}]}