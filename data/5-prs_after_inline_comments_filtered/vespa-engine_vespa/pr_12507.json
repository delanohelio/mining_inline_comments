{"pr_number": 12507, "pr_title": "add feature flag for net.ipv4.tcp_abort_on_overflow", "pr_createdAt": "2020-03-09T10:32:56Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12507", "timeline": [{"oid": "06aa6552284ea7fbcb95c363b95bcb7e9907ae8d", "url": "https://github.com/vespa-engine/vespa/commit/06aa6552284ea7fbcb95c363b95bcb7e9907ae8d", "message": "add feature flag for net.ipv4.tcp_abort_on_overflow", "committedDate": "2020-03-09T10:32:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU4ODczMQ==", "url": "https://github.com/vespa-engine/vespa/pull/12507#discussion_r389588731", "bodyText": "Typically this would be host-admin and a feature flag task, meaning it takes effect when the flag is flipped.", "author": "hakonhall", "createdAt": "2020-03-09T10:56:50Z", "path": "flags/src/main/java/com/yahoo/vespa/flags/Flags.java", "diffHunk": "@@ -169,6 +169,12 @@\n             \"Takes effect on next tick or on host-admin restart (may vary where used).\",\n             HOSTNAME);\n \n+    public static final UnboundBooleanFlag TCP_ABORT_ON_OVERFLOW = defineFeatureFlag(\n+            \"tcp-abort-on-overflow\", false,\n+            \"Whether to set /proc/sys/net/ipv4/tcp_abort_on_overflow to 0 (false) or 1 (true)\",\n+            \"Takes effect on next tick or on host-admin restart (may vary where used).\",", "originalCommit": "06aa6552284ea7fbcb95c363b95bcb7e9907ae8d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYwNjE1Ng==", "url": "https://github.com/vespa-engine/vespa/pull/12507#discussion_r389606156", "bodyText": "ah, the SysctlTask does not use that. And I seem to remember vaguely why that was: Something changes the sysctl settings without us really finding the cause of it, possibly cm3, so we set these at every tick.\nIn any case, the flag is read on every tick.", "author": "hakonhall", "createdAt": "2020-03-09T11:37:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU4ODczMQ=="}], "type": "inlineReview"}, {"oid": "2d3149c78d85901b7330f320ea0af80e0fc76333", "url": "https://github.com/vespa-engine/vespa/commit/2d3149c78d85901b7330f320ea0af80e0fc76333", "message": "fix effect description", "committedDate": "2020-03-09T11:21:29Z", "type": "commit"}]}