{"pr_number": 12199, "pr_title": "Added Telegraf component", "pr_createdAt": "2020-02-14T14:39:57Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12199", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTUzODU1Mw==", "url": "https://github.com/vespa-engine/vespa/pull/12199#discussion_r379538553", "bodyText": "We probably need to consider these file paths, especially where to read the template path from.", "author": "gjoranv", "createdAt": "2020-02-14T16:54:06Z", "path": "metrics-proxy/src/main/java/ai/vespa/metricsproxy/telegraf/Telegraf.java", "diffHunk": "@@ -0,0 +1,77 @@\n+// Copyright 2020 Oath Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+package ai.vespa.metricsproxy.telegraf;\n+\n+import com.google.inject.Inject;\n+import com.yahoo.component.AbstractComponent;\n+import com.yahoo.system.execution.ProcessExecutor;\n+import org.apache.velocity.Template;\n+import org.apache.velocity.VelocityContext;\n+import org.apache.velocity.app.VelocityEngine;\n+\n+import java.io.FileWriter;\n+\n+import static com.yahoo.yolean.Exceptions.uncheck;\n+\n+/**\n+ * @author olaa\n+ */\n+public class Telegraf extends AbstractComponent {\n+\n+    private static final String TELEGRAF_CONFIG_PATH = \"/etc/telegraf/telegraf.conf\";\n+    private static final String TELEGRAF_CONFIG_TEMPLATE_PATH = \"src/main/resources/templates/cloudwatch_plugin.vm\";", "originalCommit": "01f6bc47ffa13fff4b4255a7ab9d3e3c12c794c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "83c0f76f3aa0de1d76bd3cca661cfbb15899ebcb", "url": "https://github.com/vespa-engine/vespa/commit/83c0f76f3aa0de1d76bd3cca661cfbb15899ebcb", "message": "Added test", "committedDate": "2020-02-17T13:45:29Z", "type": "forcePushed"}, {"oid": "6f119796b599173a8c92930575c87924d81f05e2", "url": "https://github.com/vespa-engine/vespa/commit/6f119796b599173a8c92930575c87924d81f05e2", "message": "Added Telegraf component", "committedDate": "2020-02-20T10:09:59Z", "type": "commit"}, {"oid": "ee4be19769784b0e27efb77012f14e38a8ca986b", "url": "https://github.com/vespa-engine/vespa/commit/ee4be19769784b0e27efb77012f14e38a8ca986b", "message": "Consider if cloudwatch profile is set. Removed compile specification in pom.", "committedDate": "2020-02-20T10:09:59Z", "type": "commit"}, {"oid": "f37fde7714ca78c80f3eb584936065d07ab8ec75", "url": "https://github.com/vespa-engine/vespa/commit/f37fde7714ca78c80f3eb584936065d07ab8ec75", "message": "Exclude velocity artifact in config-model/pom.xml", "committedDate": "2020-02-20T10:09:59Z", "type": "commit"}, {"oid": "2fd8303e31d6d3cc5c6c474a4449d77733998f6b", "url": "https://github.com/vespa-engine/vespa/commit/2fd8303e31d6d3cc5c6c474a4449d77733998f6b", "message": "Support configuring an arbitrary number of Cloudwatch plugins", "committedDate": "2020-02-20T10:09:59Z", "type": "commit"}, {"oid": "20e49ef934d2043b816f7a7547de017ef096ca74", "url": "https://github.com/vespa-engine/vespa/commit/20e49ef934d2043b816f7a7547de017ef096ca74", "message": "Added test", "committedDate": "2020-02-20T10:09:59Z", "type": "commit"}, {"oid": "53e7bf587a974dd538b47fd87d0d578bcb18346b", "url": "https://github.com/vespa-engine/vespa/commit/53e7bf587a974dd538b47fd87d0d578bcb18346b", "message": "Load template using ClasspathResourceLoader. Renamed template", "committedDate": "2020-02-20T10:09:59Z", "type": "commit"}, {"oid": "919450ac3928cbc8b2d8aa0be8f0ed85c7bf9b68", "url": "https://github.com/vespa-engine/vespa/commit/919450ac3928cbc8b2d8aa0be8f0ed85c7bf9b68", "message": "Map input plugins to appropriate output plugin", "committedDate": "2020-02-20T10:09:59Z", "type": "commit"}, {"oid": "8123ab32e26c732302e3909757e0339d579576cb", "url": "https://github.com/vespa-engine/vespa/commit/8123ab32e26c732302e3909757e0339d579576cb", "message": "Evaluate template directly in Velocity engine. Read template using InputStreamReader", "committedDate": "2020-02-20T10:09:59Z", "type": "commit"}, {"oid": "8123ab32e26c732302e3909757e0339d579576cb", "url": "https://github.com/vespa-engine/vespa/commit/8123ab32e26c732302e3909757e0339d579576cb", "message": "Evaluate template directly in Velocity engine. Read template using InputStreamReader", "committedDate": "2020-02-20T10:09:59Z", "type": "forcePushed"}]}