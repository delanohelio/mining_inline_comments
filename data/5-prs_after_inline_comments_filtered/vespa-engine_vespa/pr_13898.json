{"pr_number": 13898, "pr_title": "Load platform bundles separately", "pr_createdAt": "2020-07-15T15:12:06Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/13898", "timeline": [{"oid": "169216aec8a594e1e58e8502e622ac9d5337fad0", "url": "https://github.com/vespa-engine/vespa/commit/169216aec8a594e1e58e8502e622ac9d5337fad0", "message": "Simplify BundleManager so that it only handles app bundles.\n\n- Fail if an app bundle tries to pre-install other bundles.", "committedDate": "2020-07-14T18:50:24Z", "type": "commit"}, {"oid": "dfef0283d7293cdc6a206e7e56def1d8a60d194f", "url": "https://github.com/vespa-engine/vespa/commit/dfef0283d7293cdc6a206e7e56def1d8a60d194f", "message": "Remove the now unused getInitialBundles method.", "committedDate": "2020-07-14T18:50:24Z", "type": "commit"}, {"oid": "f832e4330d5452e228659d7d2b55cf992e6550d0", "url": "https://github.com/vespa-engine/vespa/commit/f832e4330d5452e228659d7d2b55cf992e6550d0", "message": "Split bundles.def into platform-bundles and application-bundles\n\n- The new configs are only generated, but not used.", "committedDate": "2020-07-14T18:50:24Z", "type": "commit"}, {"oid": "72eb7a8938f60b6c3c7a562673514414bcb1b106", "url": "https://github.com/vespa-engine/vespa/commit/72eb7a8938f60b6c3c7a562673514414bcb1b106", "message": "Separate installation for platform and application bundles.", "committedDate": "2020-07-15T10:51:54Z", "type": "commit"}, {"oid": "1da1e3b3a9189e4fdff2ecd1b96210818896f3cc", "url": "https://github.com/vespa-engine/vespa/commit/1da1e3b3a9189e4fdff2ecd1b96210818896f3cc", "message": "Don't throw when using a test osgi framework\n\n- ClassloaderOsgiFramework returns all installed bundles upon\n  each call to install().", "committedDate": "2020-07-15T10:52:19Z", "type": "commit"}, {"oid": "ec07ab582af461c92fbc5abd127d1e7cc15e37d5", "url": "https://github.com/vespa-engine/vespa/commit/ec07ab582af461c92fbc5abd127d1e7cc15e37d5", "message": "Rename useBundles -> useApplicationBundles", "committedDate": "2020-07-15T14:05:16Z", "type": "commit"}, {"oid": "d6240973ff085f3f954d62989d2cabf3f61537fe", "url": "https://github.com/vespa-engine/vespa/commit/d6240973ff085f3f954d62989d2cabf3f61537fe", "message": "Remove unused PredicateSplit class", "committedDate": "2020-07-15T15:02:31Z", "type": "commit"}, {"oid": "ad6940f52cf0c575e7c540653197170dd6d7591c", "url": "https://github.com/vespa-engine/vespa/commit/ad6940f52cf0c575e7c540653197170dd6d7591c", "message": "Add author, no functional changes", "committedDate": "2020-07-15T15:02:31Z", "type": "commit"}, {"oid": "893dda577f52157274357da58f93e9e8580f417f", "url": "https://github.com/vespa-engine/vespa/commit/893dda577f52157274357da58f93e9e8580f417f", "message": "Remove all usage of BundleConfig and bundles.cfg test files.\n\n- The latter were not even used by the tests.\n- The bundles.def file itself will be removed when the last\n  model using it has rolled out of hosted Vespa.", "committedDate": "2020-07-15T15:02:31Z", "type": "commit"}, {"oid": "94119fc8757bc5b8bf45be79bc9dde7b81b8d73a", "url": "https://github.com/vespa-engine/vespa/commit/94119fc8757bc5b8bf45be79bc9dde7b81b8d73a", "message": "Rename bundle loader classes and fields for consistency.\n\n* BundleManager -> ApplicationBundleLoader\n* PlatformBundleInstaller -> PlatformBundleLoader", "committedDate": "2020-07-15T15:05:02Z", "type": "commit"}, {"oid": "afa5a29be7d8416b8186d1f2045b379dd592f5ad", "url": "https://github.com/vespa-engine/vespa/commit/afa5a29be7d8416b8186d1f2045b379dd592f5ad", "message": "Add comment about platform bundles.", "committedDate": "2020-07-15T15:08:02Z", "type": "commit"}, {"oid": "94119fc8757bc5b8bf45be79bc9dde7b81b8d73a", "url": "https://github.com/vespa-engine/vespa/commit/94119fc8757bc5b8bf45be79bc9dde7b81b8d73a", "message": "Rename bundle loader classes and fields for consistency.\n\n* BundleManager -> ApplicationBundleLoader\n* PlatformBundleInstaller -> PlatformBundleLoader", "committedDate": "2020-07-15T15:05:02Z", "type": "forcePushed"}, {"oid": "a6d6fef475fe86b3357926d8c5f9d39721d72689", "url": "https://github.com/vespa-engine/vespa/commit/a6d6fef475fe86b3357926d8c5f9d39721d72689", "message": "Rename use -> useBundles", "committedDate": "2020-07-15T16:23:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4OTk5MA==", "url": "https://github.com/vespa-engine/vespa/pull/13898#discussion_r455189990", "bodyText": "The interface also behaves as a mock implementation of itself? Never seen that before.", "author": "bjorncs", "createdAt": "2020-07-15T16:48:33Z", "path": "container-di/src/main/java/com/yahoo/container/di/Osgi.java", "diffHunk": "@@ -25,6 +25,10 @@ default BundleClasses getBundleClasses(ComponentSpecification bundle, Set<String\n         return new BundleClasses(new MockBundle(), Collections.emptySet());\n     }\n \n+    default void installPlatformBundles(Collection<FileReference> bundles) {", "originalCommit": "72eb7a8938f60b6c3c7a562673514414bcb1b106", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIwMTI2NA==", "url": "https://github.com/vespa-engine/vespa/pull/13898#discussion_r455201264", "bodyText": "Perhaps it made sense in Scala :)", "author": "gjoranv", "createdAt": "2020-07-15T17:07:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4OTk5MA=="}], "type": "inlineReview"}, {"oid": "3585a616776552e3defbbf517c84dc590b4cdd5f", "url": "https://github.com/vespa-engine/vespa/commit/3585a616776552e3defbbf517c84dc590b4cdd5f", "message": "Throw exception if platform bundles change.\n\n+ extract method for duplicate string creation", "committedDate": "2020-07-15T17:03:20Z", "type": "commit"}, {"oid": "bc043db9094d62a15cf7d3190797569161848dfc", "url": "https://github.com/vespa-engine/vespa/commit/bc043db9094d62a15cf7d3190797569161848dfc", "message": "Rename installBundles -> installApplicationBundles", "committedDate": "2020-07-15T17:05:49Z", "type": "commit"}, {"oid": "3585a616776552e3defbbf517c84dc590b4cdd5f", "url": "https://github.com/vespa-engine/vespa/commit/3585a616776552e3defbbf517c84dc590b4cdd5f", "message": "Throw exception if platform bundles change.\n\n+ extract method for duplicate string creation", "committedDate": "2020-07-15T17:03:20Z", "type": "forcePushed"}]}