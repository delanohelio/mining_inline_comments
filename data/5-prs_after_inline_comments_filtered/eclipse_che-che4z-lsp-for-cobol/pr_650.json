{"pr_number": 650, "pr_title": "Support for Locally Present Subroutines", "pr_createdAt": "2020-11-13T13:52:32Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk5OTY3Ng==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650#discussion_r522999676", "bodyText": "Semantically it would make more sense to pass the subroutine list before the mode because the mode in most cases will be the same.", "author": "temanbrcom", "createdAt": "2020-11-13T14:52:29Z", "path": "server/src/test/java/com/broadcom/lsp/cobol/service/delegates/validations/UseCaseUtils.java", "diffHunk": "@@ -188,7 +182,7 @@ public static void waitForDiagnostics(TestLanguageClient client) {\n    * @return the entire analysis result\n    */\n   public static AnalysisResult analyze(String fileName, String text, List<CobolText> copybooks) {\n-    return analyze(fileName, text, copybooks, CopybookProcessingMode.ENABLED);\n+    return analyze(fileName, text, copybooks, CopybookProcessingMode.ENABLED, List.of());", "originalCommit": "eafebbb92b6641dfe6c4d439809ae9b0cfe0b94b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg0MTgyNQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650#discussion_r526841825", "bodyText": "Yes, you are right.", "author": "grianbrcom", "createdAt": "2020-11-19T12:34:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk5OTY3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzA3NTM5MA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650#discussion_r523075390", "bodyText": "I see you miss a test for it. Not a big deal though, but we miss coverage here.", "author": "temanbrcom", "createdAt": "2020-11-13T16:49:57Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/service/delegates/references/SubroutineLocations.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.service.delegates.references;\n+\n+import com.broadcom.lsp.cobol.service.CobolDocumentModel;\n+import lombok.NonNull;\n+import org.eclipse.lsp4j.Location;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+/** This class is a provider for locations of subroutine defined/used in the document */\n+public class SubroutineLocations implements SemanticLocations {", "originalCommit": "eafebbb92b6641dfe6c4d439809ae9b0cfe0b94b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjgzNjU2OQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650#discussion_r526836569", "bodyText": "Done", "author": "grianbrcom", "createdAt": "2020-11-19T12:29:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzA3NTM5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDA1MTAwOQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650#discussion_r524051009", "bodyText": "Subroutine errors are expected to point only to the name, so it would be enough to pass only one Locality and do not apply the interval calculation", "author": "temanbrcom", "createdAt": "2020-11-16T09:54:55Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -594,6 +622,17 @@ private void reportVariableNotDefined(String dataName, Locality start, Locality\n     errors.add(error);\n   }\n \n+  private void reportSubroutineNotDefined(String name, Locality start, Locality stop) {", "originalCommit": "eafebbb92b6641dfe6c4d439809ae9b0cfe0b94b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjgzNjE2OQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650#discussion_r526836169", "bodyText": "Good point. Fixed.", "author": "grianbrcom", "createdAt": "2020-11-19T12:28:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDA1MTAwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDEzNTMyNA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650#discussion_r524135324", "bodyText": "Should assert also the subroutine definitions", "author": "temanbrcom", "createdAt": "2020-11-16T11:10:56Z", "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/engine/UseCaseEngine.java", "diffHunk": "@@ -216,6 +245,8 @@ private static void assertResultEquals(AnalysisResult actual, TestData expected)\n     assertResult(\n         \"Section definition:\", expected.getSectionDefinitions(), actual.getSectionDefinitions());\n     assertResult(\"Section usages:\", expected.getSectionUsages(), actual.getSectionUsages());\n+\n+    assertResult(\"Subroutine usage:\", expected.getSubroutineUsages(), actual.getSubroutineUsages());", "originalCommit": "eafebbb92b6641dfe6c4d439809ae9b0cfe0b94b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjk1ODM0OQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650#discussion_r526958349", "bodyText": "Done", "author": "grianbrcom", "createdAt": "2020-11-19T15:05:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDEzNTMyNA=="}], "type": "inlineReview"}, {"oid": "f221cc4c86ab409be5a200598e746b11895c6245", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f221cc4c86ab409be5a200598e746b11895c6245", "message": "feat: Support for Locally Present Subroutines\n\nCloses #582\n\nSigned-off-by: Anton Grigorev <anton.grigorev@broadcom.com>", "committedDate": "2020-11-19T15:31:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzAwOTcwNQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/650#discussion_r527009705", "bodyText": "Missing javadoc", "author": "temanbrcom", "createdAt": "2020-11-19T16:09:52Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/service/delegates/completions/SubroutineCompletion.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.service.delegates.completions;\n+\n+import com.broadcom.lsp.cobol.service.CobolDocumentModel;\n+import com.broadcom.lsp.cobol.service.SubroutineService;\n+import com.google.inject.Inject;\n+import com.google.inject.Singleton;\n+import lombok.NonNull;\n+import org.eclipse.lsp4j.CompletionItemKind;\n+\n+import java.util.Collection;\n+\n+import static com.broadcom.lsp.cobol.service.delegates.completions.CompletionOrder.SUBROUTINES;\n+\n+@Singleton\n+public class SubroutineCompletion implements Completion {", "originalCommit": "f221cc4c86ab409be5a200598e746b11895c6245", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "559a00c222db83703a2c7cd31e1617d41c70b24e", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/559a00c222db83703a2c7cd31e1617d41c70b24e", "message": "feat: Support for Locally Present Subroutines\n\nCloses #582\n\nSigned-off-by: Anton Grigorev <anton.grigorev@broadcom.com>", "committedDate": "2020-11-20T13:15:20Z", "type": "forcePushed"}, {"oid": "5d2a1fc6f28b7d9888c7d6e1c908f0915ef2bf7b", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/5d2a1fc6f28b7d9888c7d6e1c908f0915ef2bf7b", "message": "feat: Support for Locally Present Subroutines\n\nCloses #582\n\nSigned-off-by: Anton Grigorev <anton.grigorev@broadcom.com>", "committedDate": "2020-11-20T13:26:02Z", "type": "forcePushed"}, {"oid": "b30e9b2b8e8d7e0c993855302a2023f9740e5bf1", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b30e9b2b8e8d7e0c993855302a2023f9740e5bf1", "message": "feat: Support for Locally Present Subroutines\n\nCloses #582\n\nSigned-off-by: Anton Grigorev <anton.grigorev@broadcom.com>", "committedDate": "2020-11-20T16:40:25Z", "type": "forcePushed"}, {"oid": "cea8e705926b7d3427d041eb0ad404238bb04440", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/cea8e705926b7d3427d041eb0ad404238bb04440", "message": "feat: Support for Locally Present Subroutines\n\nCloses #582\n\nSigned-off-by: Anton Grigorev <anton.grigorev@broadcom.com>", "committedDate": "2020-11-20T16:43:47Z", "type": "commit"}, {"oid": "cea8e705926b7d3427d041eb0ad404238bb04440", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/cea8e705926b7d3427d041eb0ad404238bb04440", "message": "feat: Support for Locally Present Subroutines\n\nCloses #582\n\nSigned-off-by: Anton Grigorev <anton.grigorev@broadcom.com>", "committedDate": "2020-11-20T16:43:47Z", "type": "forcePushed"}]}