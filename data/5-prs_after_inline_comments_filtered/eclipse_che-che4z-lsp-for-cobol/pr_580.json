{"pr_number": 580, "pr_title": "Set log level run time", "pr_createdAt": "2020-10-27T08:11:53Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/580", "timeline": [{"oid": "f33c2faa4e4e3471524f65749a5f74c843cff9db", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f33c2faa4e4e3471524f65749a5f74c843cff9db", "message": "Merge pull request #4 from eclipse/development\n\nMerge changes from remote branch to my forked branch", "committedDate": "2020-10-26T11:56:00Z", "type": "commit"}, {"oid": "2c35700d3754643cfb2b1187cd6bbe20ed00b95d", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2c35700d3754643cfb2b1187cd6bbe20ed00b95d", "message": "Merge branch 'development' of github.com:ap891843/che-che4z-lsp-for-cobol into enhancement/Externalize_Error_Messages_properties", "committedDate": "2020-10-26T11:58:39Z", "type": "commit"}, {"oid": "8f1142d171b1a60235192e655441c243aa685fc7", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/8f1142d171b1a60235192e655441c243aa685fc7", "message": "Merge pull request #5 from eclipse/development\n\nPull changes from remote to my forked branch", "committedDate": "2020-10-26T12:29:35Z", "type": "commit"}, {"oid": "4fa08052b8c951e388f3b25ac829190ffed1f2d1", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/4fa08052b8c951e388f3b25ac829190ffed1f2d1", "message": "Merge branch 'development' of github.com:ap891843/che-che4z-lsp-for-cobol into interruptAnalysisOnClosingReq", "committedDate": "2020-10-26T12:30:08Z", "type": "commit"}, {"oid": "d1898448f81fa08925b088ea21664c3d9a2470a5", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/d1898448f81fa08925b088ea21664c3d9a2470a5", "message": "Merge pull request #6 from eclipse/development\n\nPull latest changes from remote to forked branch", "committedDate": "2020-10-26T23:48:42Z", "type": "commit"}, {"oid": "645b14695541f1c7d25898ad0066c55b01dd4b8f", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/645b14695541f1c7d25898ad0066c55b01dd4b8f", "message": "Merge branch 'development' of github.com:ap891843/che-che4z-lsp-for-cobol into setLogLevelRunTime", "committedDate": "2020-10-26T23:50:06Z", "type": "commit"}, {"oid": "5cc77c937b6f6b2899a8d30b9333ecbe621527e6", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/5cc77c937b6f6b2899a8d30b9333ecbe621527e6", "message": "Initial commit - change log level at runtime.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-26T23:53:10Z", "type": "commit"}, {"oid": "e0197b93dbcce36d33976a6f793eccb921719dc5", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/e0197b93dbcce36d33976a6f793eccb921719dc5", "message": "Initial commit Test case - change log level at runtime.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T00:02:36Z", "type": "commit"}, {"oid": "920d4bc85d78861b810c5cadb8f76d4b0286e88b", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/920d4bc85d78861b810c5cadb8f76d4b0286e88b", "message": "Initial commit license Header - change log level at runtime.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T00:03:52Z", "type": "commit"}, {"oid": "a94abb6be8978cf132491d1e80082a8a9b57a222", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/a94abb6be8978cf132491d1e80082a8a9b57a222", "message": "Initial commit java doc updated - change log level at runtime.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T00:07:15Z", "type": "commit"}, {"oid": "79f5ce552c99e8bf5cc7d1e43ce988ef53217f6b", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/79f5ce552c99e8bf5cc7d1e43ce988ef53217f6b", "message": "mock log level\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T08:33:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5NjgwNA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/580#discussion_r512496804", "bodyText": "else if", "author": "asatklichov", "createdAt": "2020-10-27T08:28:53Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LogLevel.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.experimental.UtilityClass;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.Objects;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Update the log level for the application.\n+ *\n+ * <p>IMPORTANT: This class relies on the concrete implementations by logback. SLF4J don't expose\n+ * any contract to update the log level on runtime.\n+ *\n+ * <p>In case of wrong input, log level defaults to {@link ch.qos.logback.classic.Level#ERROR}\n+ */\n+@UtilityClass\n+public class LogLevel {\n+\n+  private static final ch.qos.logback.classic.Logger rootLogger =\n+      (ch.qos.logback.classic.Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\n+\n+  /**\n+   * Update loglevel for the entire application.\n+   *\n+   * @return Consumer#List#Object , currently supports List#String and List#JsonPrimitive\n+   */\n+  public static Consumer<List<Object>> updateLogLevel() {\n+    return loglevel -> {\n+      if (Objects.nonNull(loglevel)) {\n+        Object localeNode = Iterables.getFirst(loglevel, \"\");\n+        if (localeNode instanceof JsonPrimitive) {\n+          updateLogLevel((JsonPrimitive) localeNode);\n+        }", "originalCommit": "a94abb6be8978cf132491d1e80082a8a9b57a222", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5ODM5OQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/580#discussion_r512498399", "bodyText": "LogLevelUtils or LogLevelService", "author": "asatklichov", "createdAt": "2020-10-27T08:31:33Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LogLevel.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.experimental.UtilityClass;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.Objects;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Update the log level for the application.\n+ *\n+ * <p>IMPORTANT: This class relies on the concrete implementations by logback. SLF4J don't expose\n+ * any contract to update the log level on runtime.\n+ *\n+ * <p>In case of wrong input, log level defaults to {@link ch.qos.logback.classic.Level#ERROR}\n+ */\n+@UtilityClass\n+public class LogLevel {", "originalCommit": "a94abb6be8978cf132491d1e80082a8a9b57a222", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5OTc3NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/580#discussion_r512499774", "bodyText": "Below you provide: logLevelNode.getAsString() which returns String, then why you need to check for \"instanceof JsonPrimitive\"", "author": "asatklichov", "createdAt": "2020-10-27T08:33:52Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LogLevel.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.experimental.UtilityClass;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.Objects;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Update the log level for the application.\n+ *\n+ * <p>IMPORTANT: This class relies on the concrete implementations by logback. SLF4J don't expose\n+ * any contract to update the log level on runtime.\n+ *\n+ * <p>In case of wrong input, log level defaults to {@link ch.qos.logback.classic.Level#ERROR}\n+ */\n+@UtilityClass\n+public class LogLevel {\n+\n+  private static final ch.qos.logback.classic.Logger rootLogger =\n+      (ch.qos.logback.classic.Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\n+\n+  /**\n+   * Update loglevel for the entire application.\n+   *\n+   * @return Consumer#List#Object , currently supports List#String and List#JsonPrimitive\n+   */\n+  public static Consumer<List<Object>> updateLogLevel() {\n+    return loglevel -> {\n+      if (Objects.nonNull(loglevel)) {\n+        Object localeNode = Iterables.getFirst(loglevel, \"\");\n+        if (localeNode instanceof JsonPrimitive) {", "originalCommit": "a94abb6be8978cf132491d1e80082a8a9b57a222", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUwNjQzOA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/580#discussion_r512506438", "bodyText": "getAsString() is a method on JsonPrimitive, that's why casting it to JsonPrimitive upon instanceof check.\nprivate static void updateLogLevel(JsonPrimitive logLevelNode)\naccepts JsonPrimitive", "author": "ap891843", "createdAt": "2020-10-27T08:44:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5OTc3NA=="}], "type": "inlineReview"}, {"oid": "2ecbb126aac4e51f0e890564c9238ab059f93388", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2ecbb126aac4e51f0e890564c9238ab059f93388", "message": "Make changes as per PR comments.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T09:13:03Z", "type": "commit"}, {"oid": "ce264b4c6162ada8d01c6e6ace8fc35280cd8d05", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ce264b4c6162ada8d01c6e6ace8fc35280cd8d05", "message": "Modify existing test cases.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T09:23:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4MzM4Mw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/580#discussion_r512583383", "bodyText": "logNode?", "author": "temanbrcom", "createdAt": "2020-10-27T10:43:23Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LogLevelUtils.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.experimental.UtilityClass;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.Objects;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Update the log level for the application.\n+ *\n+ * <p>IMPORTANT: This class relies on the concrete implementations by logback. SLF4J don't expose\n+ * any contract to update the log level on runtime.\n+ *\n+ * <p>In case of wrong input, log level defaults to {@link ch.qos.logback.classic.Level#ERROR}\n+ */\n+@UtilityClass\n+public class LogLevelUtils {\n+\n+  private static final ch.qos.logback.classic.Logger rootLogger =\n+      (ch.qos.logback.classic.Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\n+  private static final String NOT_SUPPORTED_MSG = \" : not supported for log level update\";\n+\n+  /**\n+   * Update loglevel for the entire application.\n+   *\n+   * @return Consumer#List#Object , currently supports List#String and List#JsonPrimitive\n+   * @throws IllegalArgumentException currently supports only List#String and List#JsonPrimitive\n+   */\n+  public static Consumer<List<Object>> updateLogLevel() {\n+    return loglevel -> {\n+      if (Objects.nonNull(loglevel)) {\n+        Object localeNode = Iterables.getFirst(loglevel, \"\");", "originalCommit": "ce264b4c6162ada8d01c6e6ace8fc35280cd8d05", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4NjM4Mw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/580#discussion_r512586383", "bodyText": "Missing javadoc", "author": "temanbrcom", "createdAt": "2020-10-27T10:48:14Z", "path": "server/src/test/java/com/broadcom/lsp/cobol/core/messages/LogLevelUtilsTest.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import ch.qos.logback.classic.Level;\n+import com.google.gson.JsonPrimitive;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Test;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+class LogLevelUtilsTest {", "originalCommit": "ce264b4c6162ada8d01c6e6ace8fc35280cd8d05", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "153486c2427f7f731e7e63db3e29de9b4e8ba007", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/153486c2427f7f731e7e63db3e29de9b4e8ba007", "message": "exposed Log level and locale setting to the settings UI.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nRename variable to make more sense.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nAdd javaDoc for test class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nModify existing test cases.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nMake changes as per PR comments.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nmock log level\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nInitial commit java doc updated - change log level at runtime.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nInitial commit license Header - change log level at runtime.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nInitial commit Test case - change log level at runtime.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nInitial commit - change log level at runtime.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T12:01:32Z", "type": "commit"}, {"oid": "2abaa65591313b20abd699c6a718266550f7fe67", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2abaa65591313b20abd699c6a718266550f7fe67", "message": "Merge remote-tracking branch 'origin/setLogLevelRunTime' into setLogLevelRunTime\n\n# Conflicts:\n#\tserver/src/main/java/com/broadcom/lsp/cobol/core/messages/LogLevelUtils.java\n#\tserver/src/test/java/com/broadcom/lsp/cobol/core/messages/LogLevelUtilsTest.java", "committedDate": "2020-10-27T12:03:32Z", "type": "commit"}, {"oid": "eb0b7ec8f3ae58ec51700a27d82f3db6e0de2c6c", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/eb0b7ec8f3ae58ec51700a27d82f3db6e0de2c6c", "message": "Merge pull request #7 from eclipse/development\n\nPull changes from remote to my forked branch", "committedDate": "2020-10-27T12:05:24Z", "type": "commit"}, {"oid": "db4552df75a279ef278598b47c380efea01ac190", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/db4552df75a279ef278598b47c380efea01ac190", "message": "Merge branch 'development' of github.com:ap891843/che-che4z-lsp-for-cobol into setLogLevelRunTime", "committedDate": "2020-10-27T12:06:05Z", "type": "commit"}, {"oid": "bfd800646ae481acf1021d255815bce0b32a8287", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/bfd800646ae481acf1021d255815bce0b32a8287", "message": "remove locale config, until multiple locale is supported.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T13:09:32Z", "type": "commit"}, {"oid": "a39d76bdf62c28e221a8bfe39bcfe5d25835b401", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/a39d76bdf62c28e221a8bfe39bcfe5d25835b401", "message": "Update clients/cobol-lsp-vscode-extension/package.json\n\nCo-authored-by: Andrei Temnikov <andrei.temnikov@broadcom.com>", "committedDate": "2020-10-27T13:20:15Z", "type": "commit"}, {"oid": "e053c7e9d152880319a2e9660468554bf15ae604", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/e053c7e9d152880319a2e9660468554bf15ae604", "message": "top-down order for logging level as suggested in code review.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>\n\nremove locale config, until multiple locale is supported.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T13:26:25Z", "type": "commit"}, {"oid": "44535fc9d19419ddb06481bb5ed4913c4cad01da", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/44535fc9d19419ddb06481bb5ed4913c4cad01da", "message": "Merge remote-tracking branch 'origin/setLogLevelRunTime' into feat/setLogLevelRunTime\n\n# Conflicts:\n#\tclients/cobol-lsp-vscode-extension/package.json", "committedDate": "2020-10-27T13:27:49Z", "type": "commit"}, {"oid": "23cd137ad3b06d08b6daf2fd3eaff43a859a24f1", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/23cd137ad3b06d08b6daf2fd3eaff43a859a24f1", "message": "Revert \"Update clients/cobol-lsp-vscode-extension/package.json\"\n\nThis reverts commit a39d76bd\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T13:34:37Z", "type": "commit"}, {"oid": "26880843e8a26b4fe71d2d42c20bad72f39988bc", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/26880843e8a26b4fe71d2d42c20bad72f39988bc", "message": "Revert \"Revert \"Update clients/cobol-lsp-vscode-extension/package.json\"\"\n\nThis reverts commit 23cd137a\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-27T13:35:14Z", "type": "commit"}]}