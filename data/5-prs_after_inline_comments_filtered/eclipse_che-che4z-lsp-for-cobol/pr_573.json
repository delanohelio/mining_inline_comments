{"pr_number": 573, "pr_title": "Enhancement/externalize error messages properties", "pr_createdAt": "2020-10-22T10:49:18Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573", "timeline": [{"oid": "b1615955dfffb7e7d491698a9fa6aeb4fa8d9987", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b1615955dfffb7e7d491698a9fa6aeb4fa8d9987", "message": "Initial commit to externalize logging messages.\n\nThis is just a framework for externalizing, if approved/accepted, a follow up PR would come with actual code refactoring. This is to avoid large number of files in PR.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-15T14:50:29Z", "type": "commit"}, {"oid": "9c424e7c5523378d915e9783c8a43d233057e925", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/9c424e7c5523378d915e9783c8a43d233057e925", "message": "Add Broadcom copyright header.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-15T15:11:17Z", "type": "commit"}, {"oid": "9207d3ae1540c7192b5bcedac4ccea51247e5fa2", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/9207d3ae1540c7192b5bcedac4ccea51247e5fa2", "message": "1. Move message service related code to a new package 'server/src/main/java/com/broadcom/lsp/cobol/core/messages'\n2. Reformat code based on google-java-formatter plugin\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T08:05:41Z", "type": "commit"}, {"oid": "d60aa1fc5cdd728d7d12e7417c328f9831e18312", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/d60aa1fc5cdd728d7d12e7417c328f9831e18312", "message": "avoid using final for local variables.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T08:08:39Z", "type": "commit"}, {"oid": "7dad2a2dea9ea83df235609c7d4f82a0bef4b8d2", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7dad2a2dea9ea83df235609c7d4f82a0bef4b8d2", "message": "Refactor test classes to their specific package.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T08:13:37Z", "type": "commit"}, {"oid": "2b725f2d6697a00c5f8a7b5f71b46a2b4dfac412", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2b725f2d6697a00c5f8a7b5f71b46a2b4dfac412", "message": "Use proper lombok annotation (@Value).\nAllArgsConstructor is part of Value.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T08:15:29Z", "type": "commit"}, {"oid": "cd33aa484b79948b054476c5c292b2c28ae8f6c7", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/cd33aa484b79948b054476c5c292b2c28ae8f6c7", "message": "Add java doc for public methods and class\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T08:58:02Z", "type": "commit"}, {"oid": "50225336cf9e72ac11cbb75fee808a660cefc138", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/50225336cf9e72ac11cbb75fee808a660cefc138", "message": "Implement localization for externalized messages.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T14:30:08Z", "type": "commit"}, {"oid": "c7d3430ba11470baaa40b85225f5968073bb4375", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/c7d3430ba11470baaa40b85225f5968073bb4375", "message": "Add broadcom copyright.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T14:59:28Z", "type": "commit"}, {"oid": "74531f70b19efa77ab63e81c0c3274468b1adf90", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/74531f70b19efa77ab63e81c0c3274468b1adf90", "message": "Add Java Docs to class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T15:08:04Z", "type": "commit"}, {"oid": "bcb81fe09bf8cc78543f69e2961f0187e82c3f38", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/bcb81fe09bf8cc78543f69e2961f0187e82c3f38", "message": "Resolve PR comments:\n1. Avoid Optional in method agrs.\n2. Don't change the state of a class field in tests to avoid the order determination.\n3.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T15:28:22Z", "type": "commit"}, {"oid": "29ddaa47e474e2cdca615087e2fa03ffe643fc08", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/29ddaa47e474e2cdca615087e2fa03ffe643fc08", "message": "Inline variables in test class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-16T15:30:48Z", "type": "commit"}, {"oid": "6e91d5d2a40a3096c1578db6313d568e6034ef21", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/6e91d5d2a40a3096c1578db6313d568e6034ef21", "message": "Maintain a dictionary rather than an array in Message files.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-19T09:59:29Z", "type": "commit"}, {"oid": "60eef2987559f872f44621fe37af5edfe65113b7", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/60eef2987559f872f44621fe37af5edfe65113b7", "message": "Remove support to load multiple files in a single service.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-19T10:47:04Z", "type": "commit"}, {"oid": "e66914b4d6767ab273e74fbc8288d25072e2ea50", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/e66914b4d6767ab273e74fbc8288d25072e2ea50", "message": "Remove unused class and add Broadcom copyright header.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-19T10:50:07Z", "type": "commit"}, {"oid": "be449e01ab04e5d16eff99cf4b3daa5e706e6f37", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/be449e01ab04e5d16eff99cf4b3daa5e706e6f37", "message": "code formatting\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-19T10:53:43Z", "type": "commit"}, {"oid": "d780ff03a5b5a894d68bd67f4ca5e65824945b67", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/d780ff03a5b5a894d68bd67f4ca5e65824945b67", "message": "Change tests as per the refactored code.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-19T11:03:28Z", "type": "commit"}, {"oid": "be283a0a65fd0306ff72c7a5bdc52a3e3daed37b", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/be283a0a65fd0306ff72c7a5bdc52a3e3daed37b", "message": "Make changes as per PR comments.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-20T18:51:06Z", "type": "commit"}, {"oid": "6f1edb5ae0649765e7f5400efe2e096e99dd6f9f", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/6f1edb5ae0649765e7f5400efe2e096e99dd6f9f", "message": "Add following support:\n1. Dynamic update of locale from client side.\n2. Show error notification in case locale is not supported.\n3. Single point of contact for all locale related queries.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-21T09:21:32Z", "type": "commit"}, {"oid": "ec89b47ae897d32a74a983c7aa7589daaa9a8893", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ec89b47ae897d32a74a983c7aa7589daaa9a8893", "message": "Merge pull request #1 from eclipse/development\n\nmerge from the original repo to update my forked repo.", "committedDate": "2020-10-21T09:32:38Z", "type": "commit"}, {"oid": "ab3377bdc0e8ef47855f10a05d5800b32eacd45e", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ab3377bdc0e8ef47855f10a05d5800b32eacd45e", "message": "Merge changes with the remote branch.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-21T09:54:10Z", "type": "commit"}, {"oid": "7d4adb7e6043cf89c7558b03283263782ff9561e", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7d4adb7e6043cf89c7558b03283263782ff9561e", "message": "Merge changes with the remote branch.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-21T10:00:19Z", "type": "commit"}, {"oid": "bfffbfdbd825a3a47f665025406c343c766f71ec", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/bfffbfdbd825a3a47f665025406c343c766f71ec", "message": "Adopt locale changes in the Jnit test cases.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-21T11:19:20Z", "type": "commit"}, {"oid": "b52586fdd90e41e2b2e030c7ea02642f7ee84f0a", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b52586fdd90e41e2b2e030c7ea02642f7ee84f0a", "message": "Adopt locale changes in the Jnit test cases.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-21T11:43:46Z", "type": "commit"}, {"oid": "8fd60c33a9859e1c74827ed77d9104532dee1d8b", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/8fd60c33a9859e1c74827ed77d9104532dee1d8b", "message": "Remove un necessary attribute from MessageTemplate class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-21T12:57:21Z", "type": "commit"}, {"oid": "88b39981343abf9e6884c3e7a30d19808c9c2ba6", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/88b39981343abf9e6884c3e7a30d19808c9c2ba6", "message": "Make changes as per PR comments.\n1. Annotate the message service file name properly.\n2. Make message Servie Singleton managed by guice.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-21T14:34:02Z", "type": "commit"}, {"oid": "4857657fc1d4757f86d8f3ef10ec55fbe3db08b7", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/4857657fc1d4757f86d8f3ef10ec55fbe3db08b7", "message": "Move externalized messages to its own folder.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-21T23:47:46Z", "type": "commit"}, {"oid": "25fd3fa35ce935f249d6095b33205194c9277500", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/25fd3fa35ce935f249d6095b33205194c9277500", "message": "Refactor code to support message externalization.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-22T09:33:51Z", "type": "commit"}, {"oid": "814e95fd22464063f2ed0e031f252f6c646d3eb5", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/814e95fd22464063f2ed0e031f252f6c646d3eb5", "message": "Suport externalization and localization for the application through properties file.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-22T10:42:57Z", "type": "commit"}, {"oid": "b99a3f46ec473efd42003603b72babed2a6496af", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b99a3f46ec473efd42003603b72babed2a6496af", "message": "Suport externalization and localization for the application through properties file.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-22T10:45:00Z", "type": "commit"}, {"oid": "df43f54bbf17ba497659a855c75572b8c3caa198", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/df43f54bbf17ba497659a855c75572b8c3caa198", "message": "Partial fix to the test cases, more to come.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-22T13:03:41Z", "type": "commit"}, {"oid": "d02a2003bc21a9d2d776faad3fb7f2a146ef4865", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/d02a2003bc21a9d2d776faad3fb7f2a146ef4865", "message": "Merge pull request #2 from eclipse/development\n\nMerge from original repo to update my forked repo", "committedDate": "2020-10-22T13:11:17Z", "type": "commit"}, {"oid": "f53c69901d57267bdd8d65ffa7d0ca82514cf114", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f53c69901d57267bdd8d65ffa7d0ca82514cf114", "message": "Pull changes from master.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-22T13:21:02Z", "type": "commit"}, {"oid": "cd06ec3316a9d318c6db1277243c6831d9b80da2", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/cd06ec3316a9d318c6db1277243c6831d9b80da2", "message": "Make sure all the existing testcase passes.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-22T15:08:42Z", "type": "commit"}, {"oid": "ba322793844f48d4b0388f2ad4b686d1de7bcef3", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ba322793844f48d4b0388f2ad4b686d1de7bcef3", "message": "Make sure all the existing testcase passes. Make changes to the mock object.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-22T15:52:29Z", "type": "commit"}, {"oid": "9a61a45bb49d2a90e3a0e64e2385af3388264d5a", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/9a61a45bb49d2a90e3a0e64e2385af3388264d5a", "message": "Remove unused files.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T07:53:35Z", "type": "commit"}, {"oid": "5ed294eb5bca1852f11ca0b6aabeb774444cea98", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/5ed294eb5bca1852f11ca0b6aabeb774444cea98", "message": "Localization supported for english only.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T08:32:04Z", "type": "commit"}, {"oid": "6e23f870b813763d6e51c1809cf5ea18c63add97", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/6e23f870b813763d6e51c1809cf5ea18c63add97", "message": "Localization supported for english only.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T08:58:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcyMDQ2MA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510720460", "bodyText": "I see some of those binding override the service ones. It would be better not to duplicate them", "author": "temanbrcom", "createdAt": "2020-10-23T08:28:09Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/domain/modules/EngineModule.java", "diffHunk": "@@ -53,6 +61,12 @@ protected void configure() {\n     bind(CobolLineReaderDelegate.class).to(CompilerDirectivesTransformation.class);\n     bind(CobolLineWriter.class).to(CobolLineWriterImpl.class);\n     bind(CobolLinesTransformation.class).to(ContinuationLineTransformation.class);\n+    bind(DefaultErrorStrategy.class).to(CobolErrorStrategy.class);\n+    bind(MessageService.class).to(PropertiesMessageService.class);\n+    bind(LocaleStore.class).to(LocaleStoreImpl.class);\n+    bind(Communications.class).to(ServerCommunications.class);\n+    bind(String.class).annotatedWith(named(\"resourceFileLocation\")).toInstance(\"message/messages\");", "originalCommit": "9a61a45bb49d2a90e3a0e64e2385af3388264d5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcyMTg5OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510721898", "bodyText": "Google Guice docs recommend not to make the injectable fields final", "author": "temanbrcom", "createdAt": "2020-10-23T08:30:35Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/service/delegates/communications/ServerCommunications.java", "diffHunk": "@@ -44,21 +45,18 @@\n @Slf4j\n public class ServerCommunications implements Communications {\n \n-  static final String CANNOT_FIND_LANGUAGE_ENGINE = \"Cannot find a language engine for the given language ID: \";\n-  static final String SYNTAX_ANALYSIS_IN_PROGRESS = \": Syntax analysis in progress\";\n-  static final String NO_SYNTAX_ERRORS = \"No syntax errors detected in \";\n-  static final String EXTENSION_UNSUPPORTED = \"The given document extension is unsupported: \";\n-\n-  private Provider<LanguageClient> provider;\n-  private FileSystemService files;\n-\n   private final ScheduledExecutorService executor = Executors.newScheduledThreadPool(5);\n   private final Set<String> uriInProgress = new HashSet<>();\n+  private final MessageService messageService;", "originalCommit": "9a61a45bb49d2a90e3a0e64e2385af3388264d5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcyNDMwMA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510724300", "bodyText": "Asterisks in the middle of the comment after formatting", "author": "temanbrcom", "createdAt": "2020-10-23T08:34:39Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LocaleStoreImpl.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.broadcom.lsp.cobol.service.delegates.communications.Communications;\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.extern.slf4j.Slf4j;\n+import org.eclipse.lsp4j.MessageType;\n+\n+import javax.inject.Inject;\n+import javax.inject.Singleton;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Objects;\n+import java.util.concurrent.locks.Lock;\n+import java.util.concurrent.locks.ReadWriteLock;\n+import java.util.concurrent.locks.ReentrantReadWriteLock;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Concrete implementation for {@link LocaleStore}\n+ *\n+ * <p>* Stores the locale for entire application and is single point of contact for all locale\n+ * related * issues. This class update application locale, notify subscriber in case of locale\n+ * update and * returns currently set locale.", "originalCommit": "9a61a45bb49d2a90e3a0e64e2385af3388264d5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcyNDcwMg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510724702", "bodyText": "Should be @Singleton", "author": "temanbrcom", "createdAt": "2020-10-23T08:35:16Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/strategy/CobolErrorStrategy.java", "diffHunk": "@@ -14,32 +14,54 @@\n  */\n package com.broadcom.lsp.cobol.core.strategy;\n \n+import com.broadcom.lsp.cobol.core.messages.MessageService;\n+import com.google.inject.Inject;\n import lombok.extern.slf4j.Slf4j;\n import org.antlr.v4.runtime.*;\n import org.antlr.v4.runtime.misc.IntervalSet;\n \n+import java.util.MissingResourceException;\n+\n @Slf4j\n public class CobolErrorStrategy extends DefaultErrorStrategy {", "originalCommit": "9a61a45bb49d2a90e3a0e64e2385af3388264d5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcyNjQ2MA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510726460", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  LocaleEnum localeEnum = Enum.valueOf(LocaleEnum.class, locale.toUpperCase());\n          \n          \n            \n                  LocaleEnum localeEnum = LocaleEnum.valueOf(locale.toUpperCase());", "author": "temanbrcom", "createdAt": "2020-10-23T08:38:22Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LocaleStoreImpl.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.broadcom.lsp.cobol.service.delegates.communications.Communications;\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.extern.slf4j.Slf4j;\n+import org.eclipse.lsp4j.MessageType;\n+\n+import javax.inject.Inject;\n+import javax.inject.Singleton;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Objects;\n+import java.util.concurrent.locks.Lock;\n+import java.util.concurrent.locks.ReadWriteLock;\n+import java.util.concurrent.locks.ReentrantReadWriteLock;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Concrete implementation for {@link LocaleStore}\n+ *\n+ * <p>* Stores the locale for entire application and is single point of contact for all locale\n+ * related * issues. This class update application locale, notify subscriber in case of locale\n+ * update and * returns currently set locale.\n+ */\n+@Slf4j\n+@Singleton\n+public final class LocaleStoreImpl implements LocaleStore {\n+  private final ReadWriteLock readWriteLock = new ReentrantReadWriteLock();\n+  private final Lock readLock = readWriteLock.readLock();\n+  private final Lock writeLock = readWriteLock.writeLock();\n+  private final Locale defaultLocale = new Locale(\"en\", \"en\");\n+  private Communications communication;\n+  private LocaleEnum supportedLocale;\n+  private List<Consumer<Locale>> notifyList = new ArrayList<>();\n+\n+  @Inject\n+  public LocaleStoreImpl(Communications communications) {\n+    this.communication = communications;\n+  }\n+\n+  /**\n+   * Return the application current locale.\n+   *\n+   * @return {@link LocaleEnum}\n+   */\n+  @Override\n+  public LocaleEnum getSupportedLocale() {\n+    readLock.lock();\n+    try {\n+      if (Objects.isNull(supportedLocale))\n+        return Enum.valueOf(LocaleEnum.class, defaultLocale.getCountry().toUpperCase());\n+      return supportedLocale;\n+    } finally {\n+      readLock.unlock();\n+    }\n+  }\n+\n+  private void setSupportedLocale(LocaleEnum supportedLocale) {\n+    writeLock.lock();\n+    try {\n+      this.supportedLocale = supportedLocale;\n+    } finally {\n+      writeLock.unlock();\n+    }\n+  }\n+\n+  /**\n+   * Update the locale for an application.\n+   *\n+   * @param locale to be updated.\n+   */\n+  @Override\n+  public void updateLocale(String locale) {\n+    try {\n+      LocaleEnum localeEnum = Enum.valueOf(LocaleEnum.class, locale.toUpperCase());", "originalCommit": "5ed294eb5bca1852f11ca0b6aabeb774444cea98", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcyNzg2Ng==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510727866", "bodyText": "Injectable fields should not be final", "author": "temanbrcom", "createdAt": "2020-10-23T08:40:40Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/PropertiesMessageService.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.google.inject.Inject;\n+import com.google.inject.Singleton;\n+import com.google.inject.name.Named;\n+\n+import java.util.Locale;\n+import java.util.ResourceBundle;\n+\n+/**\n+ * This class is an properties file implementation of {@link MessageService} . It loads messages\n+ * from a properties file into memory to be used latter on for logging or messaging.\n+ */\n+@Singleton\n+public class PropertiesMessageService implements MessageService {\n+\n+  private final String baseName;\n+  private final LocaleStore localeStore;", "originalCommit": "5ed294eb5bca1852f11ca0b6aabeb774444cea98", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ed711dd0623820dca0d4bc56142285846187880b", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ed711dd0623820dca0d4bc56142285846187880b", "message": "Resolve PR comments -\n1. make sure injectable fields are not final as suggested by guice doc.\n2. Correct the java docs.\n3. Remove the bindings scattered in service and engine module.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T09:27:00Z", "type": "commit"}, {"oid": "d2a59521b5c613b61f9e72adc23eb20eb19c27f9", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/d2a59521b5c613b61f9e72adc23eb20eb19c27f9", "message": "Resolve PR comments -\n1. remove externalization of logs.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T09:35:32Z", "type": "commit"}, {"oid": "71a2f781c14e51451f71b38618d1592cbf7ae155", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/71a2f781c14e51451f71b38618d1592cbf7ae155", "message": "Resolve PR comments -\n1. correct java doc\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T09:45:36Z", "type": "commit"}, {"oid": "962ee6ea617d5a5449cf3772bef8890c5a986c9a", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/962ee6ea617d5a5449cf3772bef8890c5a986c9a", "message": "Resolve PR comments -\n1. remove unused imports.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T09:47:44Z", "type": "commit"}, {"oid": "f3f8eef20c18684e38c30817d93e50ba3160fac2", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f3f8eef20c18684e38c30817d93e50ba3160fac2", "message": "Merge pull request #3 from eclipse/development\n\nMerge changes from remote branch to my forked branch", "committedDate": "2020-10-23T09:52:04Z", "type": "commit"}, {"oid": "414d7ab5e61490852e541299e109b18783a91afb", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/414d7ab5e61490852e541299e109b18783a91afb", "message": "Pull changes from remote\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T10:00:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MjA2Mg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510792062", "bodyText": "This one is also for logs and doesn't need to localize", "author": "temanbrcom", "createdAt": "2020-10-23T10:33:19Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/service/CobolTextDocumentService.java", "diffHunk": "@@ -66,12 +66,12 @@\n     implements TextDocumentService, EventObserver<RunAnalysisEvent> {\n   private static final List<String> COBOL_IDS = Arrays.asList(\"cobol\", \"cbl\", \"cob\");\n   private static final String GIT_FS_URI = \"gitfs:/\";\n-  private static final String GITFS_URI_NOT_SUPPORTED = \"GITFS URI not supported\";\n+  public static final String DESC_ERROR_MSG = \"CobolTextDocumentService.descErrorMsg\";", "originalCommit": "414d7ab5e61490852e541299e109b18783a91afb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MzI1Mw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510793253", "bodyText": "Where do you call this method?", "author": "temanbrcom", "createdAt": "2020-10-23T10:35:45Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/service/delegates/communications/ServerCommunications.java", "diffHunk": "@@ -115,7 +118,21 @@ public void notifyThatDocumentAnalysed(String uri) {\n    */\n   @Override\n   public void notifyThatExtensionIsUnsupported(String extension) {\n-    runAsync(() -> logMessage(Error, EXTENSION_UNSUPPORTED + extension));\n+    runAsync(\n+        () ->\n+            logMessage(\n+                Error, messageService.getMessage(\"Communications.extUnsupported\", extension)));\n+  }\n+\n+  /**\n+   * show a supplied message to the client with the supplied {@link MessageType}\n+   *\n+   * @param messageType {@link MessageType}\n+   * @param message to be displayed at client end.\n+   */\n+  @Override\n+  public void notifyGeneralMessage(MessageType messageType, String message) {\n+    runAsync(() -> showMessage(messageType, message));\n   }", "originalCommit": "414d7ab5e61490852e541299e109b18783a91afb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5NTgyOA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510795828", "bodyText": "https://github.com/ap891843/che-che4z-lsp-for-cobol/blob/dd2e6e91b467b1321b59399fa98cc98f4dc05587/server/src/main/java/com/broadcom/lsp/cobol/core/messages/LocaleStoreImpl.java#L118\nfrom the localeStore, when the user selects a locale not supported yet.", "author": "ap891843", "createdAt": "2020-10-23T10:41:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MzI1Mw=="}], "type": "inlineReview"}, {"oid": "dd2e6e91b467b1321b59399fa98cc98f4dc05587", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/dd2e6e91b467b1321b59399fa98cc98f4dc05587", "message": "Correct the test case where an return is expected of mock object.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T10:38:32Z", "type": "commit"}, {"oid": "e0187830773fc89488cae802185c548e68cef79e", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/e0187830773fc89488cae802185c548e68cef79e", "message": "Don't externalize logger stmts.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T10:56:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc4ODE0Nw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510788147", "bodyText": "communications", "author": "asatklichov", "createdAt": "2020-10-23T10:25:47Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LocaleStoreImpl.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.broadcom.lsp.cobol.service.delegates.communications.Communications;\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.extern.slf4j.Slf4j;\n+import org.eclipse.lsp4j.MessageType;\n+\n+import javax.inject.Inject;\n+import javax.inject.Singleton;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Objects;\n+import java.util.concurrent.locks.Lock;\n+import java.util.concurrent.locks.ReadWriteLock;\n+import java.util.concurrent.locks.ReentrantReadWriteLock;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Concrete implementation for {@link LocaleStore}\n+ *\n+ * <p>Stores the locale for entire application and is single point of contact for all locale related\n+ * issues. This class update application locale, notify subscriber in case of locale update and\n+ * returns currently set locale.\n+ */\n+@Slf4j\n+@Singleton\n+public final class LocaleStoreImpl implements LocaleStore {\n+  private final ReadWriteLock readWriteLock = new ReentrantReadWriteLock();\n+  private final Lock readLock = readWriteLock.readLock();\n+  private final Lock writeLock = readWriteLock.writeLock();\n+  private final Locale defaultLocale = new Locale(\"en\", \"en\");\n+  private Communications communication;", "originalCommit": "414d7ab5e61490852e541299e109b18783a91afb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MDg1OQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510790859", "bodyText": "This \"return\" should be moved to end of method. Regarding to finally would be more readable", "author": "asatklichov", "createdAt": "2020-10-23T10:30:50Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LocaleStoreImpl.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.broadcom.lsp.cobol.service.delegates.communications.Communications;\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.extern.slf4j.Slf4j;\n+import org.eclipse.lsp4j.MessageType;\n+\n+import javax.inject.Inject;\n+import javax.inject.Singleton;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Objects;\n+import java.util.concurrent.locks.Lock;\n+import java.util.concurrent.locks.ReadWriteLock;\n+import java.util.concurrent.locks.ReentrantReadWriteLock;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Concrete implementation for {@link LocaleStore}\n+ *\n+ * <p>Stores the locale for entire application and is single point of contact for all locale related\n+ * issues. This class update application locale, notify subscriber in case of locale update and\n+ * returns currently set locale.\n+ */\n+@Slf4j\n+@Singleton\n+public final class LocaleStoreImpl implements LocaleStore {\n+  private final ReadWriteLock readWriteLock = new ReentrantReadWriteLock();\n+  private final Lock readLock = readWriteLock.readLock();\n+  private final Lock writeLock = readWriteLock.writeLock();\n+  private final Locale defaultLocale = new Locale(\"en\", \"en\");\n+  private Communications communication;\n+  private LocaleEnum supportedLocale;\n+  private List<Consumer<Locale>> notifyList = new ArrayList<>();\n+\n+  @Inject\n+  public LocaleStoreImpl(Communications communications) {\n+    this.communication = communications;\n+  }\n+\n+  /**\n+   * Return the application current locale.\n+   *\n+   * @return {@link LocaleEnum}\n+   */\n+  @Override\n+  public LocaleEnum getSupportedLocale() {\n+    readLock.lock();\n+    try {\n+      if (Objects.isNull(supportedLocale))\n+        return Enum.valueOf(LocaleEnum.class, defaultLocale.getCountry().toUpperCase());\n+      return supportedLocale;", "originalCommit": "414d7ab5e61490852e541299e109b18783a91afb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgzMTg2Mw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510831863", "bodyText": "moving return to the last stmt in the method. return in finally might give a sonar issue of - \"Jump statements should not occur in \"finally\" blocks\"", "author": "ap891843", "createdAt": "2020-10-23T11:56:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MDg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgzNzIwOA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510837208", "bodyText": "Of course I wrote, end-of-method.", "author": "asatklichov", "createdAt": "2020-10-23T12:07:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MDg1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MTUxMQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510791511", "bodyText": "Why you catch unchecked (runtime) exception?", "author": "asatklichov", "createdAt": "2020-10-23T10:32:09Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LocaleStoreImpl.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.broadcom.lsp.cobol.service.delegates.communications.Communications;\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.extern.slf4j.Slf4j;\n+import org.eclipse.lsp4j.MessageType;\n+\n+import javax.inject.Inject;\n+import javax.inject.Singleton;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Objects;\n+import java.util.concurrent.locks.Lock;\n+import java.util.concurrent.locks.ReadWriteLock;\n+import java.util.concurrent.locks.ReentrantReadWriteLock;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Concrete implementation for {@link LocaleStore}\n+ *\n+ * <p>Stores the locale for entire application and is single point of contact for all locale related\n+ * issues. This class update application locale, notify subscriber in case of locale update and\n+ * returns currently set locale.\n+ */\n+@Slf4j\n+@Singleton\n+public final class LocaleStoreImpl implements LocaleStore {\n+  private final ReadWriteLock readWriteLock = new ReentrantReadWriteLock();\n+  private final Lock readLock = readWriteLock.readLock();\n+  private final Lock writeLock = readWriteLock.writeLock();\n+  private final Locale defaultLocale = new Locale(\"en\", \"en\");\n+  private Communications communication;\n+  private LocaleEnum supportedLocale;\n+  private List<Consumer<Locale>> notifyList = new ArrayList<>();\n+\n+  @Inject\n+  public LocaleStoreImpl(Communications communications) {\n+    this.communication = communications;\n+  }\n+\n+  /**\n+   * Return the application current locale.\n+   *\n+   * @return {@link LocaleEnum}\n+   */\n+  @Override\n+  public LocaleEnum getSupportedLocale() {\n+    readLock.lock();\n+    try {\n+      if (Objects.isNull(supportedLocale))\n+        return Enum.valueOf(LocaleEnum.class, defaultLocale.getCountry().toUpperCase());\n+      return supportedLocale;\n+    } finally {\n+      readLock.unlock();\n+    }\n+  }\n+\n+  private void setSupportedLocale(LocaleEnum supportedLocale) {\n+    writeLock.lock();\n+    try {\n+      this.supportedLocale = supportedLocale;\n+    } finally {\n+      writeLock.unlock();\n+    }\n+  }\n+\n+  /**\n+   * Update the locale for an application.\n+   *\n+   * @param locale to be updated.\n+   */\n+  @Override\n+  public void updateLocale(String locale) {\n+    try {\n+      LocaleEnum localeEnum = LocaleEnum.valueOf(locale.toUpperCase());\n+      setSupportedLocale(localeEnum);\n+      Locale updatedLocale = new Locale(locale);\n+      notifyList.forEach(consumer -> consumer.accept(updatedLocale));\n+    } catch (IllegalArgumentException e) {", "originalCommit": "414d7ab5e61490852e541299e109b18783a91afb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgwODY5NQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510808695", "bodyText": "To catch a scenario of invalid locale ( not supported locale).", "author": "ap891843", "createdAt": "2020-10-23T11:07:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MTUxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MTg3NQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510791875", "bodyText": "same", "author": "asatklichov", "createdAt": "2020-10-23T10:32:55Z", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/messages/LocaleStoreImpl.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import com.broadcom.lsp.cobol.service.delegates.communications.Communications;\n+import com.google.common.collect.Iterables;\n+import com.google.gson.JsonPrimitive;\n+import lombok.extern.slf4j.Slf4j;\n+import org.eclipse.lsp4j.MessageType;\n+\n+import javax.inject.Inject;\n+import javax.inject.Singleton;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Objects;\n+import java.util.concurrent.locks.Lock;\n+import java.util.concurrent.locks.ReadWriteLock;\n+import java.util.concurrent.locks.ReentrantReadWriteLock;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Concrete implementation for {@link LocaleStore}\n+ *\n+ * <p>Stores the locale for entire application and is single point of contact for all locale related\n+ * issues. This class update application locale, notify subscriber in case of locale update and\n+ * returns currently set locale.\n+ */\n+@Slf4j\n+@Singleton\n+public final class LocaleStoreImpl implements LocaleStore {\n+  private final ReadWriteLock readWriteLock = new ReentrantReadWriteLock();\n+  private final Lock readLock = readWriteLock.readLock();\n+  private final Lock writeLock = readWriteLock.writeLock();\n+  private final Locale defaultLocale = new Locale(\"en\", \"en\");\n+  private Communications communication;\n+  private LocaleEnum supportedLocale;\n+  private List<Consumer<Locale>> notifyList = new ArrayList<>();\n+\n+  @Inject\n+  public LocaleStoreImpl(Communications communications) {\n+    this.communication = communications;\n+  }\n+\n+  /**\n+   * Return the application current locale.\n+   *\n+   * @return {@link LocaleEnum}\n+   */\n+  @Override\n+  public LocaleEnum getSupportedLocale() {\n+    readLock.lock();\n+    try {\n+      if (Objects.isNull(supportedLocale))\n+        return Enum.valueOf(LocaleEnum.class, defaultLocale.getCountry().toUpperCase());\n+      return supportedLocale;\n+    } finally {\n+      readLock.unlock();\n+    }\n+  }\n+\n+  private void setSupportedLocale(LocaleEnum supportedLocale) {\n+    writeLock.lock();\n+    try {\n+      this.supportedLocale = supportedLocale;\n+    } finally {\n+      writeLock.unlock();\n+    }\n+  }\n+\n+  /**\n+   * Update the locale for an application.\n+   *\n+   * @param locale to be updated.\n+   */\n+  @Override\n+  public void updateLocale(String locale) {\n+    try {\n+      LocaleEnum localeEnum = LocaleEnum.valueOf(locale.toUpperCase());\n+      setSupportedLocale(localeEnum);\n+      Locale updatedLocale = new Locale(locale);\n+      notifyList.forEach(consumer -> consumer.accept(updatedLocale));\n+    } catch (IllegalArgumentException e) {\n+      handleUnSupportedLocale(locale);\n+    }\n+  }\n+\n+  /**\n+   * Update the locale for an application.\n+   *\n+   * @param locale to be updated.\n+   */\n+  @Override\n+  public void updateLocale(LocaleEnum locale) {\n+    try {\n+      setSupportedLocale(locale);\n+    } catch (IllegalArgumentException e) {", "originalCommit": "414d7ab5e61490852e541299e109b18783a91afb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgwODkwMQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510808901", "bodyText": "same case", "author": "ap891843", "createdAt": "2020-10-23T11:08:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5MTg3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5ODMxMA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510798310", "bodyText": "\"message/messages\" folders ?\nIn our case they are not messages (JMS, Kafka, or AMQP, ... ), just raw-text, better would be: resourceBundles  or properties", "author": "asatklichov", "createdAt": "2020-10-23T10:46:20Z", "path": "server/src/test/java/com/broadcom/lsp/cobol/TestModule.java", "diffHunk": "@@ -60,6 +61,9 @@ protected void configure() {\n     bind(String.class)\n         .annotatedWith(named(PATH_TO_TEST_RESOURCES))\n         .toProvider(() -> ofNullable(getProperty(PATH_TO_TEST_RESOURCES)).orElse(\"\"));\n+    bind(LocaleStore.class).to(LocaleStoreImpl.class);\n+    bind(MessageService.class).to(PropertiesMessageService.class);\n+    bind(String.class).annotatedWith(named(\"resourceFileLocation\")).toInstance(\"message/messages\");", "originalCommit": "414d7ab5e61490852e541299e109b18783a91afb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDc5OTM5Nw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510799397", "bodyText": "LocaleEnum.EN", "author": "asatklichov", "createdAt": "2020-10-23T10:48:44Z", "path": "server/src/test/java/com/broadcom/lsp/cobol/core/messages/PropertiesMessageServiceTest.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+package com.broadcom.lsp.cobol.core.messages;\n+\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.Locale;\n+import java.util.MissingResourceException;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+\n+class PropertiesMessageServiceTest {\n+\n+  private static MessageService messageService;\n+  private LocaleStore localeMock;\n+\n+  @BeforeEach\n+  public void beforeAll() {\n+    localeMock = mock(LocaleStore.class);\n+    when(localeMock.getApplicationLocale()).thenReturn(new Locale(\"en\"));", "originalCommit": "414d7ab5e61490852e541299e109b18783a91afb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgwMjk2Nw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510802967", "bodyText": "cameCased: rulereport -> ruleReport", "author": "asatklichov", "createdAt": "2020-10-23T10:55:57Z", "path": "server/src/test/java/com/broadcom/lsp/cobol/core/strategy/CobolErrorStrategyTest.java", "diffHunk": "@@ -36,7 +39,9 @@ void noViableAltExceptionTest() {\n \n     NoViableAltException error =\n         new NoViableAltException(recognizer, stream, token, token, null, null);\n-    CobolErrorStrategy strategy = new CobolErrorStrategy();\n+    CobolErrorStrategy strategy = new CobolErrorStrategy(messageService);\n+    when(messageService.getMessage(matches(\"ErrorStrategy.rulereportNoViableAlternative\"), anyString()))", "originalCommit": "dd2e6e91b467b1321b59399fa98cc98f4dc05587", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgxMjkwOA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/573#discussion_r510812908", "bodyText": "nice catch, its actually a usecase", "author": "ap891843", "createdAt": "2020-10-23T11:17:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgwMjk2Nw=="}], "type": "inlineReview"}, {"oid": "21f4ab7318f49de2320ca27018ac83a6eb28fb50", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/21f4ab7318f49de2320ca27018ac83a6eb28fb50", "message": "Update as per PR comments\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T11:13:53Z", "type": "commit"}, {"oid": "4db62dbf3734a6e1ad3c5c574b78eb3dfa7a3a42", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/4db62dbf3734a6e1ad3c5c574b78eb3dfa7a3a42", "message": "Update as per PR comments\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T11:16:28Z", "type": "commit"}, {"oid": "5dad266a6292cee9222686e64898a45160c3298c", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/5dad266a6292cee9222686e64898a45160c3298c", "message": "Fix return stmt.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T11:54:14Z", "type": "commit"}, {"oid": "b29cc4d5316e7d938ddb198c158cbb303c99d905", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b29cc4d5316e7d938ddb198c158cbb303c99d905", "message": "Fix return stmt.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-10-23T11:55:41Z", "type": "commit"}]}