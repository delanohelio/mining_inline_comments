{"pr_number": 959, "pr_title": "Verify lineage for TreeFlatteningRebuildingVisitor", "pr_createdAt": "2020-10-20T21:14:30Z", "pr_url": "https://github.com/NationalSecurityAgency/datawave/pull/959", "timeline": [{"oid": "c5e353bee60facceece36bca9c4cb1919b1ceaad", "url": "https://github.com/NationalSecurityAgency/datawave/commit/c5e353bee60facceece36bca9c4cb1919b1ceaad", "message": "Verify lineage for TreeFlatteningRebuildingVisitor\n\nAdd an assert to tests for TreeFlatteningRebuildingVisitor to verify\nthat it returns a query with valid lineage.\n\nPart of #880.", "committedDate": "2020-10-20T21:13:23Z", "type": "commit"}, {"oid": "794dc19d194202f850bb6efb853f70fabfb0c3e7", "url": "https://github.com/NationalSecurityAgency/datawave/commit/794dc19d194202f850bb6efb853f70fabfb0c3e7", "message": "Merge branch 'master' into 880-TreeFlatteningRebuildingVisitor", "committedDate": "2020-10-30T00:17:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTExMTA1Mg==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/959#discussion_r515111052", "bodyText": "If we're going to remove the return for the method, then we should probably rename it as it no longer returns a copied tree.  When I originally wrote this I thought it would be useful to have an iterative method for copying a Jexl tree.  So, that's why it returns the copied tree even though we don't actually use it anywhere - yet!  I could see an iterative copy method being useful in the future though, so my thought would be to leave this method as-is and return the copied tree.  Just my 2 cents.", "author": "jwomeara", "createdAt": "2020-10-30T13:50:36Z", "path": "warehouse/query-core/src/main/java/datawave/query/jexl/visitors/TreeFlatteningRebuilder.java", "diffHunk": "@@ -150,9 +148,8 @@ else if (hasChildren && node == parentStack.peek()) {\n      *            the node to be copied\n      * @param postOrderDeque\n      *            the post order traversal of the copied tree\n-     * @return the copied tree\n      */\n-    private JexlNode copyTree(JexlNode node, Deque<JexlNode> postOrderDeque) {\n+    private void copyTree(JexlNode node, Deque<JexlNode> postOrderDeque) {", "originalCommit": "794dc19d194202f850bb6efb853f70fabfb0c3e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ0MzM0Nw==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/959#discussion_r515443347", "bodyText": "@jwomeara thanks for clarifying. I've restored the return value for this method.", "author": "lbschanno", "createdAt": "2020-10-31T02:09:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTExMTA1Mg=="}], "type": "inlineReview"}, {"oid": "c167967b190577ac8fcd5b37023e9aba45b615fc", "url": "https://github.com/NationalSecurityAgency/datawave/commit/c167967b190577ac8fcd5b37023e9aba45b615fc", "message": "Restore return value for copyTree method", "committedDate": "2020-10-31T02:08:55Z", "type": "commit"}, {"oid": "4cd1eb30eab88a78fc3fc2553f939105f6c6c556", "url": "https://github.com/NationalSecurityAgency/datawave/commit/4cd1eb30eab88a78fc3fc2553f939105f6c6c556", "message": "Merge branch 'master' into 880-TreeFlatteningRebuildingVisitor", "committedDate": "2020-11-02T23:42:42Z", "type": "commit"}]}