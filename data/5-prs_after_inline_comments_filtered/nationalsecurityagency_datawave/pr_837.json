{"pr_number": 837, "pr_title": "fixes #836: Simplify regex expressions", "pr_createdAt": "2020-06-19T13:47:38Z", "pr_url": "https://github.com/NationalSecurityAgency/datawave/pull/837", "timeline": [{"oid": "f1abf2c65c7ef5bea28a90962516c0fae99d6f9b", "url": "https://github.com/NationalSecurityAgency/datawave/commit/f1abf2c65c7ef5bea28a90962516c0fae99d6f9b", "message": "fixes #836: Simplify regex expressions\n  * Created a NodeTransform to simplify regex expressions for performance reasons", "committedDate": "2020-06-19T13:45:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1OTU1NA==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/837#discussion_r442859554", "bodyText": "shouldn't this be simplified to BLA == '.*?x'?", "author": "FineAndDandy", "createdAt": "2020-06-19T14:03:50Z", "path": "warehouse/query-core/src/test/java/datawave/query/planner/rules/NodeTransformVisitorTest.java", "diffHunk": "@@ -112,7 +117,24 @@ public void regexPushdownAnyfieldTransformRuleTest() throws Exception {\n             // ok\n         }\n     }\n-    \n+\n+    @Test\n+    public void regexSimplifierTransformRuleTest() throws Exception {\n+        // @formatter:off\n+        String query = \"BLA == '.*?.*?x' && \" +\n+                \"BLA =~ 'ab.*.*' && \" +\n+                \"BLA =~ 'a.*.*.*.*?.*?' && \" +\n+                \"BLA =~ '.*?.*?.*bla.*?.*?blabla' && \" +\n+                \"_ANYFIELD_ =~ '.*.*?.*?<bla>'\";\n+        String expected = \"BLA == '.*?.*?x' && \" +", "originalCommit": "f1abf2c65c7ef5bea28a90962516c0fae99d6f9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg5NDI5MA==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/837#discussion_r442894290", "bodyText": "That is an equals node, not a regex node.", "author": "ivakegg", "createdAt": "2020-06-19T15:07:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1OTU1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg5NDYyNA==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/837#discussion_r442894624", "bodyText": "That is an equals node, not a regex node.", "author": "ivakegg", "createdAt": "2020-06-19T15:07:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1OTU1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg5NzA0OA==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/837#discussion_r442897048", "bodyText": "ha, right. You got me", "author": "FineAndDandy", "createdAt": "2020-06-19T15:12:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1OTU1NA=="}], "type": "inlineReview"}, {"oid": "793634f2f63207c99eb875fd0f7a9de8a0ef0bce", "url": "https://github.com/NationalSecurityAgency/datawave/commit/793634f2f63207c99eb875fd0f7a9de8a0ef0bce", "message": "formatting", "committedDate": "2020-06-19T16:59:35Z", "type": "commit"}]}