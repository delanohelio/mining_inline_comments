{"pr_number": 1529, "pr_title": "add unit test for sentinel-cluster-server ", "pr_createdAt": "2020-06-08T03:47:32Z", "pr_url": "https://github.com/alibaba/Sentinel/pull/1529", "timeline": [{"oid": "6a43133d0e7e17f4ffd21d5d2e30486ac89ee258", "url": "https://github.com/alibaba/Sentinel/commit/6a43133d0e7e17f4ffd21d5d2e30486ac89ee258", "message": "add test for cluster metric\n\nSigned-off-by: yunfeiyanggzq <yunfeiyang@buaa.edu.cn>", "committedDate": "2020-06-08T04:00:27Z", "type": "forcePushed"}, {"oid": "8cdc66e2ea1f5d655faf8b2155f1174a54785f00", "url": "https://github.com/alibaba/Sentinel/commit/8cdc66e2ea1f5d655faf8b2155f1174a54785f00", "message": "add test for cluster metric\n\nSigned-off-by: yunfeiyanggzq <yunfeiyang@buaa.edu.cn>", "committedDate": "2020-06-08T04:19:01Z", "type": "forcePushed"}, {"oid": "39b3cb408f2afb3622826999f5e573231ac2aecd", "url": "https://github.com/alibaba/Sentinel/commit/39b3cb408f2afb3622826999f5e573231ac2aecd", "message": "add test for cluster metric\n\nSigned-off-by: yunfeiyanggzq <yunfeiyang@buaa.edu.cn>", "committedDate": "2020-06-08T04:40:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ2NzY0OA==", "url": "https://github.com/alibaba/Sentinel/pull/1529#discussion_r436467648", "bodyText": "Could you please reformat your code?", "author": "sczyh30", "createdAt": "2020-06-08T05:44:57Z", "path": "sentinel-cluster/sentinel-cluster-server-default/src/main/java/com/alibaba/csp/sentinel/cluster/flow/statistic/metric/ClusterParamMetric.java", "diffHunk": "@@ -89,6 +89,7 @@ public double getAvg(Object value) {\n     }\n \n     public Map<Object, Double> getTopValues(int number) {\n+        AssertUtil.isTrue(number>0,\"number must be positive\");", "originalCommit": "39b3cb408f2afb3622826999f5e573231ac2aecd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ5NDU2NA==", "url": "https://github.com/alibaba/Sentinel/pull/1529#discussion_r436494564", "bodyText": "done", "author": "yunfeiyanggzq", "createdAt": "2020-06-08T07:07:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ2NzY0OA=="}], "type": "inlineReview"}, {"oid": "c0722157f26d52a8e4b07226ab443a01baf0fdd8", "url": "https://github.com/alibaba/Sentinel/commit/c0722157f26d52a8e4b07226ab443a01baf0fdd8", "message": "add test for cluster metric\n\nSigned-off-by: yunfeiyanggzq <yunfeiyang@buaa.edu.cn>", "committedDate": "2020-06-08T07:06:15Z", "type": "forcePushed"}, {"oid": "e933da30599e6dc8cd986c6fe5bf5337fb335709", "url": "https://github.com/alibaba/Sentinel/commit/e933da30599e6dc8cd986c6fe5bf5337fb335709", "message": "add test for cluster metric\n\nSigned-off-by: yunfeiyanggzq <yunfeiyang@buaa.edu.cn>", "committedDate": "2020-06-08T07:13:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU5MDcwMg==", "url": "https://github.com/alibaba/Sentinel/pull/1529#discussion_r438590702", "bodyText": "You may leverage AbstractTimeBasedTest to freeze the time in case of flaky tests.", "author": "sczyh30", "createdAt": "2020-06-11T07:20:46Z", "path": "sentinel-cluster/sentinel-cluster-server-default/src/test/java/com/alibaba/csp/sentinel/cluster/flow/statistic/metric/ClusterParamMetricTest.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.alibaba.csp.sentinel.cluster.flow.statistic.metric;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+public class ClusterParamMetricTest {", "originalCommit": "e933da30599e6dc8cd986c6fe5bf5337fb335709", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1NTM0MQ==", "url": "https://github.com/alibaba/Sentinel/pull/1529#discussion_r439155341", "bodyText": "done", "author": "yunfeiyanggzq", "createdAt": "2020-06-12T01:09:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU5MDcwMg=="}], "type": "inlineReview"}, {"oid": "dca7d38fd388f2b3fd4402b52adb15bfb5819640", "url": "https://github.com/alibaba/Sentinel/commit/dca7d38fd388f2b3fd4402b52adb15bfb5819640", "message": "add test for cluster metric\n\nSigned-off-by: yunfeiyanggzq <yunfeiyang@buaa.edu.cn>", "committedDate": "2020-06-12T00:59:24Z", "type": "forcePushed"}, {"oid": "14977168e7720e1a592c8da01b7b04d2259cc99a", "url": "https://github.com/alibaba/Sentinel/commit/14977168e7720e1a592c8da01b7b04d2259cc99a", "message": "add test for cluster metric\n\nSigned-off-by: yunfeiyanggzq <yunfeiyang@buaa.edu.cn>", "committedDate": "2020-06-12T01:14:07Z", "type": "forcePushed"}, {"oid": "646f568d33fa090f966f247154b262247627e8b3", "url": "https://github.com/alibaba/Sentinel/commit/646f568d33fa090f966f247154b262247627e8b3", "message": "add test for cluster metric\n\nSigned-off-by: yunfeiyanggzq <yunfeiyang@buaa.edu.cn>", "committedDate": "2020-06-12T01:25:46Z", "type": "commit"}, {"oid": "646f568d33fa090f966f247154b262247627e8b3", "url": "https://github.com/alibaba/Sentinel/commit/646f568d33fa090f966f247154b262247627e8b3", "message": "add test for cluster metric\n\nSigned-off-by: yunfeiyanggzq <yunfeiyang@buaa.edu.cn>", "committedDate": "2020-06-12T01:25:46Z", "type": "forcePushed"}]}