{"pr_number": 1377, "pr_title": "Force  api to fail if an incompitible fastjson found", "pr_createdAt": "2020-04-02T15:30:32Z", "pr_url": "https://github.com/alibaba/Sentinel/pull/1377", "timeline": [{"oid": "857759f8aa0675ffd90c881cd95213d15b851a3e", "url": "https://github.com/alibaba/Sentinel/commit/857759f8aa0675ffd90c881cd95213d15b851a3e", "message": "Force  api to fail if an incompitible fastjson found", "committedDate": "2020-04-02T15:25:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQzNjIyMQ==", "url": "https://github.com/alibaba/Sentinel/pull/1377#discussion_r402436221", "bodyText": "I found that fastjson has versions like 1.2.60.sec09\nhttps://mvnrepository.com/artifact/com.alibaba/fastjson\nDo we need to handle with that...", "author": "cdfive", "createdAt": "2020-04-02T16:12:40Z", "path": "sentinel-core/src/test/java/com/alibaba/csp/sentinel/util/VersionUtilTest.java", "diffHunk": "@@ -27,4 +29,19 @@ public void testGetDefaultVersion() {\n         // Manifest cannot be load before package.\n         Assert.assertEquals(defaultVersion, version);\n     }\n+    \n+    @Test\n+    public void testFromVersionString() {\n+        assertEquals(0x01020300, VersionUtil.fromVersionString(\"1.2.3\"));\n+        assertEquals(0x01020304, VersionUtil.fromVersionString(\"1.2.3.4\"));\n+        assertEquals(0x0102ff04, VersionUtil.fromVersionString(\"1.2.255.4\"));\n+        assertEquals(0xffffffff, VersionUtil.fromVersionString(\"255.255.255.255\"));\n+        assertEquals(0, VersionUtil.fromVersionString(\"1.255.256.0\"));\n+        assertEquals(0, VersionUtil.fromVersionString(\"1.2.\"));\n+        assertEquals(0x01000000, VersionUtil.fromVersionString(\"1\"));\n+        assertEquals(0x01020000, VersionUtil.fromVersionString(\"1.2\"));\n+        assertEquals(0, VersionUtil.fromVersionString(\"test\"));\n+        assertEquals(0, VersionUtil.fromVersionString(\"1.2.3-\"));\n+        assertEquals(0, VersionUtil.fromVersionString(\"1.2.3b\"));\n+    }", "originalCommit": "857759f8aa0675ffd90c881cd95213d15b851a3e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "00a4178ad2aad0dcdad71f72029036895f034992", "url": "https://github.com/alibaba/Sentinel/commit/00a4178ad2aad0dcdad71f72029036895f034992", "message": "compatible for custom version number", "committedDate": "2020-04-02T17:01:06Z", "type": "commit"}, {"oid": "1efacb2c566a79c446c64be97e41e7683c73719d", "url": "https://github.com/alibaba/Sentinel/commit/1efacb2c566a79c446c64be97e41e7683c73719d", "message": "fix the minimal version", "committedDate": "2020-04-02T17:06:25Z", "type": "commit"}]}