{"pr_number": 853, "pr_title": "Credstore integration", "pr_createdAt": "2020-05-12T06:20:35Z", "pr_url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853", "timeline": [{"oid": "37eaadfb85787a6e4fdc07c66ab643605acc6b80", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/37eaadfb85787a6e4fdc07c66ab643605acc6b80", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729", "committedDate": "2020-05-12T06:20:43Z", "type": "forcePushed"}, {"oid": "06c11cddc9d846cdaefc38026307c89130c32d95", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/06c11cddc9d846cdaefc38026307c89130c32d95", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729", "committedDate": "2020-05-12T10:42:58Z", "type": "forcePushed"}, {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/edad4023777cfeeec4243f7d69b82201730a59ba", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729", "committedDate": "2020-05-20T12:29:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMDI4OA==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440010288", "bodyText": "All new methods except for deleteAll aren't used anywhere (at least as far as I can see). Can we remove them from the PR?", "author": "nictas", "createdAt": "2020-06-15T08:26:25Z", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationEntryQuery.java", "diffHunk": "@@ -19,11 +20,23 @@\n     ConfigurationEntryQuery requiredProperties(Map<String, Object> requiredProperties);\n \n     ConfigurationEntryQuery spaceId(String spaceId);\n+    \n+    ConfigurationEntryQuery spaceIdNotNull();", "originalCommit": "edad4023777cfeeec4243f7d69b82201730a59ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjczNTE4Ng==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442735186", "bodyText": "Done", "author": "boyan-velinov", "createdAt": "2020-06-19T09:33:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMDI4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMjYxNw==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440012617", "bodyText": "All new methods except for deleteAll aren't used anywhere (at least as far as I can see). Can we remove them from the PR?", "author": "nictas", "createdAt": "2020-06-15T08:30:25Z", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationSubscriptionQuery.java", "diffHunk": "@@ -19,4 +20,12 @@\n \n     ConfigurationSubscriptionQuery onSelectMatching(List<ConfigurationEntry> entries);\n \n+    ConfigurationSubscriptionQuery moduleIdNull();", "originalCommit": "edad4023777cfeeec4243f7d69b82201730a59ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjczNzMzNw==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442737337", "bodyText": "Done, sorry for the dev leftovers", "author": "boyan-velinov", "createdAt": "2020-06-19T09:38:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMjYxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNjUyOQ==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440016529", "bodyText": "Can we avoid the complexity of having this object be built with Spring bean factories by keeping the @Named and @Inject annotations and add a @Primary annotation to the CredstoreConfigurationEntryMapper class from the internal project? @Profile annotations might also be an option if the first doesn't work.", "author": "nictas", "createdAt": "2020-06-15T08:37:21Z", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/service/ConfigurationEntryService.java", "diffHunk": "@@ -22,15 +20,13 @@\n import com.sap.cloud.lm.sl.common.util.JsonUtil;\n import com.sap.cloud.lm.sl.mta.model.Version;\n \n-@Named\n public class ConfigurationEntryService extends PersistenceService<ConfigurationEntry, ConfigurationEntryDto, Long> {\n \n-    @Inject\n     protected ConfigurationEntryMapper entryMapper;\n \n-    @Inject\n-    public ConfigurationEntryService(EntityManagerFactory entityManagerFactory) {\n+    public ConfigurationEntryService(EntityManagerFactory entityManagerFactory, ConfigurationEntryMapper entryMapper) {", "originalCommit": "edad4023777cfeeec4243f7d69b82201730a59ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDI3Mg==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440024272", "bodyText": "Why do we need this change?", "author": "nictas", "createdAt": "2020-06-15T08:50:36Z", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/service/PersistenceService.java", "diffHunk": "@@ -39,10 +39,11 @@ public T add(T object) {\n         return null;\n     }\n \n-    public T update(P primaryKey, T newObject) {\n+    public T update(T oldObject, T newObject) {", "originalCommit": "edad4023777cfeeec4243f7d69b82201730a59ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjczODEwNA==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442738104", "bodyText": "Because we have to inherit it in the internal SAP project", "author": "boyan-velinov", "createdAt": "2020-06-19T09:39:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDI3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDc2Ng==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440024766", "bodyText": "This is not used anywhere. Can we remove it from the PR?", "author": "nictas", "createdAt": "2020-06-15T08:51:23Z", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/util/ConfigurationEntriesUtil.java", "diffHunk": "@@ -23,6 +23,7 @@ private ConfigurationEntriesUtil() {\n \r\n     private static final Logger LOGGER = LoggerFactory.getLogger(ConfigurationEntriesUtil.class);\r\n \r\n+    public static final String EMPTY_CONTENT = \"{}\";\r", "originalCommit": "edad4023777cfeeec4243f7d69b82201730a59ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjczODkyMA==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442738920", "bodyText": "Done - dev leftover", "author": "boyan-velinov", "createdAt": "2020-06-19T09:41:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDc2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjI4OA==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440026288", "bodyText": "Fix this TODO.", "author": "nictas", "createdAt": "2020-06-15T08:53:54Z", "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/persistence/service/ConfigurationSubscriptionServiceTest.java", "diffHunk": "@@ -172,12 +173,14 @@ private void assertConfigurationSubscriptionExists(Long id) {\n     private static ConfigurationSubscription createConfigurationSubscription(long id, String mtaId, String spaceId, String appName,\n                                                                              ConfigurationFilter filter, ModuleDto moduleDto,\n                                                                              ResourceDto resourceDto) {\n-        return new ConfigurationSubscription(id, mtaId, spaceId, appName, filter, moduleDto, resourceDto);\n+        //TODO check moduleid and resourceid", "originalCommit": "edad4023777cfeeec4243f7d69b82201730a59ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc1MTMxNg==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442751316", "bodyText": "Done - the values should be null", "author": "boyan-velinov", "createdAt": "2020-06-19T10:05:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjI4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjM1NA==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440026354", "bodyText": "Fix this TODO.", "author": "nictas", "createdAt": "2020-06-15T08:54:01Z", "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/security/data/termination/DataTerminationServiceTest.java", "diffHunk": "@@ -154,7 +154,9 @@ private void prepareServices(List<String> deletedSpaces, boolean isExistSubscrip\n                                                                new CloudTarget(),\n                                                                \"\",\n                                                                Collections.emptyList(),\n-                                                               \"\"))\n+                                                               \"\",\n+                                                               //TODO check what should be instead of null", "originalCommit": "edad4023777cfeeec4243f7d69b82201730a59ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc1NjA2MA==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442756060", "bodyText": "Done - should be null", "author": "boyan-velinov", "createdAt": "2020-06-19T10:15:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjM1NA=="}], "type": "inlineReview"}, {"oid": "fabc495e2ffc94cc4a7e64d944096d7de0a10034", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/fabc495e2ffc94cc4a7e64d944096d7de0a10034", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729", "committedDate": "2020-06-24T12:23:32Z", "type": "forcePushed"}, {"oid": "5d05c525d78d594640cb5c738ebb7f6b37c54577", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/5d05c525d78d594640cb5c738ebb7f6b37c54577", "message": "Fix sonar issues", "committedDate": "2020-06-25T14:11:27Z", "type": "forcePushed"}, {"oid": "9c01bf2b95fdca46a7508b49d9be39a98269c892", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/9c01bf2b95fdca46a7508b49d9be39a98269c892", "message": "Prepare for secure storing configuration entities\n\nJira: LMCROSSITXSADEPLOY-729", "committedDate": "2020-07-06T15:28:09Z", "type": "forcePushed"}, {"oid": "931a51163235584049dd617227a7dbea47a17c06", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/931a51163235584049dd617227a7dbea47a17c06", "message": "Prepare for secure storing configuration entities\n\nJira: LMCROSSITXSADEPLOY-729", "committedDate": "2020-07-06T15:55:19Z", "type": "commit"}, {"oid": "931a51163235584049dd617227a7dbea47a17c06", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/931a51163235584049dd617227a7dbea47a17c06", "message": "Prepare for secure storing configuration entities\n\nJira: LMCROSSITXSADEPLOY-729", "committedDate": "2020-07-06T15:55:19Z", "type": "forcePushed"}]}