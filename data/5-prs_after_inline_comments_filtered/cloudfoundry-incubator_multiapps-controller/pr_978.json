{"pr_number": 978, "pr_title": "Adopt cf-java-client 1.31.2", "pr_createdAt": "2020-10-11T09:41:48Z", "pr_url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978", "timeline": [{"oid": "3183cb8f01437d153d6384269fbea1c5fe583835", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/3183cb8f01437d153d6384269fbea1c5fe583835", "message": "Adopt cf-java-client 1.31.2", "committedDate": "2020-10-12T16:38:43Z", "type": "forcePushed"}, {"oid": "b39dcc21c91d4b12864c01d69554d30642b2b27e", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/b39dcc21c91d4b12864c01d69554d30642b2b27e", "message": "Adopt cf-java-client 1.31.2", "committedDate": "2020-10-12T16:41:13Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NDU3MA==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978#discussion_r503744570", "bodyText": "Revert this back to what it was. existingService.getCredentials() will always be empty anyway, since the controller doesn't return the actual credentials (host, username, password, etc.) when calling /v2/service_instances/:guid (at least as far as I know). Even if it does you're comparing apples to oranges here, as service.getCredentials() are basically the service instance parameters, whereas existingService.getCredentials() are the actual credentials returned by the broker. Yes, there's a lot of complexity in this line and what I've written is just half of it. :D", "author": "nictas", "createdAt": "2020-10-13T07:59:28Z", "path": "multiapps-controller-process/src/main/java/org/cloudfoundry/multiapps/controller/process/steps/DetermineServiceCreateUpdateServiceActionsStep.java", "diffHunk": "@@ -273,10 +268,9 @@ private boolean shouldUpdateCredentials(CloudServiceInstanceExtended service, Cl\n             getStepLogger().debug(\"Existing service parameters: \" + SecureSerialization.toJson(serviceParameters));\n             return !Objects.equals(service.getCredentials(), serviceParameters);\n         } catch (CloudOperationException e) {\n-            if (HttpStatus.NOT_IMPLEMENTED == e.getStatusCode() || HttpStatus.BAD_REQUEST == e.getStatusCode()) {\n+            if (e.getStatusCode() == HttpStatus.BAD_REQUEST) {\n                 getStepLogger().warnWithoutProgressMessage(Messages.CANNOT_RETRIEVE_SERVICE_INSTANCE_PARAMETERS, service.getName());\n-                // TODO: Optimization (Hack) that should be deprecated at some point. So here is a todo for that.", "originalCommit": "b39dcc21c91d4b12864c01d69554d30642b2b27e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NjIwNA==", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978#discussion_r503746204", "bodyText": "I feel a bit iffy about this change, but let's see how it works out. :D", "author": "nictas", "createdAt": "2020-10-13T08:02:17Z", "path": "multiapps-controller-process/src/main/java/org/cloudfoundry/multiapps/controller/process/steps/DetermineServiceCreateUpdateServiceActionsStep.java", "diffHunk": "@@ -273,10 +268,9 @@ private boolean shouldUpdateCredentials(CloudServiceInstanceExtended service, Cl\n             getStepLogger().debug(\"Existing service parameters: \" + SecureSerialization.toJson(serviceParameters));\n             return !Objects.equals(service.getCredentials(), serviceParameters);\n         } catch (CloudOperationException e) {\n-            if (HttpStatus.NOT_IMPLEMENTED == e.getStatusCode() || HttpStatus.BAD_REQUEST == e.getStatusCode()) {", "originalCommit": "b39dcc21c91d4b12864c01d69554d30642b2b27e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "aedd069a6a4f6cb1e824aa6f6838b5d9c5df7754", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/aedd069a6a4f6cb1e824aa6f6838b5d9c5df7754", "message": "Reduce methods parameters in DetermineServiceCreateUpdateServiceActionsStep", "committedDate": "2020-10-13T11:37:30Z", "type": "commit"}, {"oid": "62782f26f40a3d8c26d5ebc4374088872ce24d5d", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/62782f26f40a3d8c26d5ebc4374088872ce24d5d", "message": "Adopt cf-java-client 1.31.2", "committedDate": "2020-10-13T11:37:30Z", "type": "commit"}, {"oid": "62782f26f40a3d8c26d5ebc4374088872ce24d5d", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/62782f26f40a3d8c26d5ebc4374088872ce24d5d", "message": "Adopt cf-java-client 1.31.2", "committedDate": "2020-10-13T11:37:30Z", "type": "forcePushed"}]}