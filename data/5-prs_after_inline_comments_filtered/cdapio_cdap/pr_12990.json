{"pr_number": 12990, "pr_title": "Fixing Capability management flaky test", "pr_createdAt": "2020-12-23T21:50:35Z", "pr_url": "https://github.com/cdapio/cdap/pull/12990", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI3MjAwNA==", "url": "https://github.com/cdapio/cdap/pull/12990#discussion_r548272004", "bodyText": "Here I don't think we need to wait state to get stopped, we need to use other method to check for RUNNING since the program might not exist, at this time, the program should exist", "author": "yaojiefeng", "createdAt": "2020-12-23T21:53:58Z", "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/capability/CapabilityManagementServiceTest.java", "diffHunk": "@@ -207,6 +210,7 @@ public void testCapabilityRefresh() throws Exception {\n     CapabilityConfig disabledConfig = changeConfigStatus(config, CapabilityStatus.DISABLED);\n     writeConfigAsFile(externalConfigPath, disabledConfig.getCapability(), disabledConfig);\n     capabilityManagementService.runTask();\n+    waitState(programId, \"STOPPED\");", "originalCommit": "16a90bf27dda8f7b4ac454853a6498e1792974f9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI3MjE0NQ==", "url": "https://github.com/cdapio/cdap/pull/12990#discussion_r548272145", "bodyText": "Same here", "author": "yaojiefeng", "createdAt": "2020-12-23T21:54:05Z", "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/capability/CapabilityManagementServiceTest.java", "diffHunk": "@@ -341,6 +346,7 @@ public void testProgramStart() throws Exception {\n                                                            Collections.emptyList());\n     writeConfigAsFile(externalConfigPath, capability, disabledConfig);\n     capabilityManagementService.runTask();\n+    waitState(programId, \"STOPPED\");", "originalCommit": "16a90bf27dda8f7b4ac454853a6498e1792974f9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b57312f79c7bd19c42b81fa2e48ba4107057732a", "url": "https://github.com/cdapio/cdap/commit/b57312f79c7bd19c42b81fa2e48ba4107057732a", "message": "Fixing flaky test", "committedDate": "2020-12-23T21:57:34Z", "type": "forcePushed"}, {"oid": "d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1", "url": "https://github.com/cdapio/cdap/commit/d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1", "message": "Fixing flaky test", "committedDate": "2020-12-23T22:01:49Z", "type": "commit"}, {"oid": "d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1", "url": "https://github.com/cdapio/cdap/commit/d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1", "message": "Fixing flaky test", "committedDate": "2020-12-23T22:01:49Z", "type": "forcePushed"}]}