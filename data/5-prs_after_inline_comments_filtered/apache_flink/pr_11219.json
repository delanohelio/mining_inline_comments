{"pr_number": 11219, "pr_title": "[FLINK-16257][network] Remove useless ResultPartitionID from AddCredit message", "pr_createdAt": "2020-02-26T05:48:50Z", "pr_url": "https://github.com/apache/flink/pull/11219", "timeline": [{"oid": "a8cf019da26aec8e3a1816ef82b85c8caa43041c", "url": "https://github.com/apache/flink/commit/a8cf019da26aec8e3a1816ef82b85c8caa43041c", "message": "[FLINK-16257][network] Remove useless ResultPartitionID from AddCredit message\n\nThe ResultPartitionID in AddCredit message is never used on upstream side, so we can remove it to cleanup the codes.\nThere would have another two benefits to do so:\n\n1. Reduce the total message size from previous 52 bytes to 20 bytes.\n2. Decouple the dependency with InputChannel#getPartitionId.", "committedDate": "2020-02-26T05:09:37Z", "type": "commit"}, {"oid": "75bddc5732f99c88a183b683660a85202ac8c5cb", "url": "https://github.com/apache/flink/commit/75bddc5732f99c88a183b683660a85202ac8c5cb", "message": "[hotfix][network] Cleanup the unused method from SingleInputGate\n\nThe method SingleInputGate#getConsumedResultId is never used, so remove it to cleanup the codes.", "committedDate": "2020-02-26T05:42:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwMTExNA==", "url": "https://github.com/apache/flink/pull/11219#discussion_r385101114", "bodyText": "nit: replace numbers with constants Integer.BYTES and Long.BYTES?", "author": "rkhachatryan", "createdAt": "2020-02-27T12:40:48Z", "path": "flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java", "diffHunk": "@@ -666,10 +663,7 @@ ByteBuf write(ByteBufAllocator allocator) throws IOException {\n \t\t\tByteBuf result = null;\n \n \t\t\ttry {\n-\t\t\t\tresult = allocateBuffer(allocator, ID, 16 + 16 + 4 + 16);\n-\n-\t\t\t\tpartitionId.getPartitionId().writeTo(result);\n-\t\t\t\tpartitionId.getProducerId().writeTo(result);\n+\t\t\t\tresult = allocateBuffer(allocator, ID, 4 + 16);", "originalCommit": "75bddc5732f99c88a183b683660a85202ac8c5cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2NjA3NA==", "url": "https://github.com/apache/flink/pull/11219#discussion_r385166074", "bodyText": "Yes, it seems more readable for this change, but not quite relevant with this PR purpose.\nAfter double checking the codes, there are many other places to take the current way in this class. So I might consider this change as a separate issue for unification future.", "author": "zhijiangW", "createdAt": "2020-02-27T14:47:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwMTExNA=="}], "type": "inlineReview"}]}