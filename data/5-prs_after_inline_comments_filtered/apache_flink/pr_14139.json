{"pr_number": 14139, "pr_title": "[FLINK-20247][config] Hide unused unaligned checkpoint configuration options", "pr_createdAt": "2020-11-19T13:11:11Z", "pr_url": "https://github.com/apache/flink/pull/14139", "timeline": [{"oid": "9a5af51c0f5cf8d8269a02545bc1383fe6c41213", "url": "https://github.com/apache/flink/commit/9a5af51c0f5cf8d8269a02545bc1383fe6c41213", "message": "[FLINK-20247][config] Disable unaligned timeout for 1.12.", "committedDate": "2020-11-19T13:09:05Z", "type": "commit"}, {"oid": "e7f30f23c854949e8af6b0465631ee214839597a", "url": "https://github.com/apache/flink/commit/e7f30f23c854949e8af6b0465631ee214839597a", "message": "[FLINK-20247][config] Disable forcing of unaligned checkpoints for 1.12.", "committedDate": "2020-11-19T15:08:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA3NDAxMg==", "url": "https://github.com/apache/flink/pull/14139#discussion_r527074012", "bodyText": "Why is this change needed?", "author": "rkhachatryan", "createdAt": "2020-11-19T17:37:03Z", "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/ExecutionCheckpointingOptions.java", "diffHunk": "@@ -162,10 +162,11 @@\n \t\t\t\t\t\"will timeout and checkpoint barrier will start working as unaligned checkpoint.\")\n \t\t\t\t.build());\n \n+\t@Documentation.ExcludeFromDocumentation(\"Do not advertise this option until rescaling of unaligned checkpoint is completed.\")\n \tpublic static final ConfigOption<Boolean> FORCE_UNALIGNED =\n \t\tConfigOptions.key(\"execution.checkpointing.unaligned.forced\")\n \t\t\t.booleanType()\n-\t\t\t.defaultValue(false)\n+\t\t\t.defaultValue(true)", "originalCommit": "e7f30f23c854949e8af6b0465631ee214839597a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzQ4NTA4OA==", "url": "https://github.com/apache/flink/pull/14139#discussion_r527485088", "bodyText": "Without this change UC wouldn't work with iterations. Now that there is no EndOfChannelStateEvent and with it no blocking, we can also support iterations for the time being.\nAlternatively, we could keep the force option and discourage using UC in iterations already in 1.12.", "author": "AHeise", "createdAt": "2020-11-20T07:18:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA3NDAxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzQ5NzE0NA==", "url": "https://github.com/apache/flink/pull/14139#discussion_r527497144", "bodyText": "I see, thanks.", "author": "rkhachatryan", "createdAt": "2020-11-20T07:49:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA3NDAxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA3NTE1MQ==", "url": "https://github.com/apache/flink/pull/14139#discussion_r527075151", "bodyText": "nit: add todo and mention the reason?", "author": "rkhachatryan", "createdAt": "2020-11-19T17:38:51Z", "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/runtime/tasks/StreamTask.java", "diffHunk": "@@ -501,7 +501,7 @@ protected void beforeInvoke() throws Exception {\n \t\tactionExecutor.runThrowing(() -> {\n \n \t\t\tSequentialChannelStateReader reader = getEnvironment().getTaskStateManager().getSequentialChannelStateReader();\n-\t\t\treader.readOutputData(getEnvironment().getAllWriters(), !configuration.isGraphContainingLoops());\n+\t\t\treader.readOutputData(getEnvironment().getAllWriters(), false);", "originalCommit": "e7f30f23c854949e8af6b0465631ee214839597a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a693a0a58d3d2fd48b5c5eef180555574b1c66f0", "url": "https://github.com/apache/flink/commit/a693a0a58d3d2fd48b5c5eef180555574b1c66f0", "message": "[FLINK-20247][config] Disable forcing of unaligned checkpoints for 1.12.", "committedDate": "2020-11-20T07:20:56Z", "type": "commit"}, {"oid": "a693a0a58d3d2fd48b5c5eef180555574b1c66f0", "url": "https://github.com/apache/flink/commit/a693a0a58d3d2fd48b5c5eef180555574b1c66f0", "message": "[FLINK-20247][config] Disable forcing of unaligned checkpoints for 1.12.", "committedDate": "2020-11-20T07:20:56Z", "type": "forcePushed"}]}