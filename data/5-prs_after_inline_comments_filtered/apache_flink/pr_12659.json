{"pr_number": 12659, "pr_title": "[FLINK-18304][metrics] Document default reporter interval", "pr_createdAt": "2020-06-15T13:25:58Z", "pr_url": "https://github.com/apache/flink/pull/12659", "timeline": [{"oid": "e510e251e90283480acb3a041c03cf38de94fe9a", "url": "https://github.com/apache/flink/commit/e510e251e90283480acb3a041c03cf38de94fe9a", "message": "[FLINK-18304][metrics] Document default reporter interval", "committedDate": "2020-06-15T13:16:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIwOTk1Mw==", "url": "https://github.com/apache/flink/pull/12659#discussion_r440209953", "bodyText": "looks like a breaking API change", "author": "azagrebin", "createdAt": "2020-06-15T14:19:01Z", "path": "flink-core/src/main/java/org/apache/flink/configuration/MetricOptions.java", "diffHunk": "@@ -58,9 +61,10 @@\n \t\t\t.noDefaultValue()\n \t\t\t.withDescription(\"The reporter class to use for the reporter named <name>.\");\n \n-\tpublic static final ConfigOption<String> REPORTER_INTERVAL =\n+\tpublic static final ConfigOption<Duration> REPORTER_INTERVAL =", "originalCommit": "e510e251e90283480acb3a041c03cf38de94fe9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIzMDMyNA==", "url": "https://github.com/apache/flink/pull/12659#discussion_r440230324", "bodyText": "irrelevant in this case since the option cannot be really used as other config options anyway.", "author": "zentol", "createdAt": "2020-06-15T14:47:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIwOTk1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MTI0OQ==", "url": "https://github.com/apache/flink/pull/12659#discussion_r440371249", "bodyText": "it will be actually backwards compatible as we use TimeUtils#parseDuration for parsing.", "author": "azagrebin", "createdAt": "2020-06-15T18:38:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIwOTk1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDA5Mw==", "url": "https://github.com/apache/flink/pull/12659#discussion_r440210093", "bodyText": "maybe milliseconds are more secure to use?", "author": "azagrebin", "createdAt": "2020-06-15T14:19:13Z", "path": "flink-runtime/src/main/java/org/apache/flink/runtime/metrics/MetricRegistryImpl.java", "diffHunk": "@@ -119,7 +120,7 @@ public MetricRegistryImpl(MetricRegistryConfiguration config, Collection<Reporte\n \t\t\t\ttry {\n \t\t\t\t\tOptional<String> configuredPeriod = reporterSetup.getIntervalSettings();\n \t\t\t\t\tTimeUnit timeunit = TimeUnit.SECONDS;\n-\t\t\t\t\tlong period = 10;\n+\t\t\t\t\tlong period = MetricOptions.REPORTER_INTERVAL.defaultValue().getSeconds();", "originalCommit": "e510e251e90283480acb3a041c03cf38de94fe9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIzMDg0NQ==", "url": "https://github.com/apache/flink/pull/12659#discussion_r440230845", "bodyText": "unlikely; and sub-second interval will just overload whatever external system you have.", "author": "zentol", "createdAt": "2020-06-15T14:47:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM0NDg1OA==", "url": "https://github.com/apache/flink/pull/12659#discussion_r440344858", "bodyText": "What would be more secure about it?", "author": "zentol", "createdAt": "2020-06-15T17:49:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM0OTQ3MA==", "url": "https://github.com/apache/flink/pull/12659#discussion_r440349470", "bodyText": "Are you referring to https://issues.apache.org/jira/browse/FLINK-18310?", "author": "zentol", "createdAt": "2020-06-15T17:57:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2MTY5Mg==", "url": "https://github.com/apache/flink/pull/12659#discussion_r440361692", "bodyText": "generally, milliseconds have more precision and should not hurt to use", "author": "azagrebin", "createdAt": "2020-06-15T18:20:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDA5Mw=="}], "type": "inlineReview"}, {"oid": "59e68233819674a208b4f27a65ea36263d9036a8", "url": "https://github.com/apache/flink/commit/59e68233819674a208b4f27a65ea36263d9036a8", "message": "Update MetricOptions.java", "committedDate": "2020-06-15T18:35:05Z", "type": "commit"}]}