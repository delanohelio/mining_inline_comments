{"pr_number": 13029, "pr_title": "[FLINK-18763][python] Support basic TypeInformation for Python DataSt\u2026", "pr_createdAt": "2020-07-30T12:07:23Z", "pr_url": "https://github.com/apache/flink/pull/13029", "timeline": [{"oid": "2cb0d813bfc779b913096c3cd6e646ac2d4f64e1", "url": "https://github.com/apache/flink/commit/2cb0d813bfc779b913096c3cd6e646ac2d4f64e1", "message": "[FLINK-18763][python] Support basic TypeInformation for Python DataStream API.", "committedDate": "2020-07-30T11:46:22Z", "type": "commit"}, {"oid": "fd04ce4ce52a282193a91cc109598ff7df1a0117", "url": "https://github.com/apache/flink/commit/fd04ce4ce52a282193a91cc109598ff7df1a0117", "message": "- remove BasicTypeInfo.VOID and BasicTypeInfo.DATE.", "committedDate": "2020-07-31T02:07:07Z", "type": "commit"}, {"oid": "3d89fc037c6cf7b1dfe19514ff831af4a4d33b50", "url": "https://github.com/apache/flink/commit/3d89fc037c6cf7b1dfe19514ff831af4a4d33b50", "message": "- resolve checkstyle error.", "committedDate": "2020-07-31T02:32:36Z", "type": "commit"}, {"oid": "39f5be60dc81c30f0cbbfb4e219722cbdd52ea21", "url": "https://github.com/apache/flink/commit/39f5be60dc81c30f0cbbfb4e219722cbdd52ea21", "message": "- remove BigDecimalTypeInfo, use BasicTypeInfo.BIG_DEC instead.", "committedDate": "2020-07-31T06:24:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0NzUyMA==", "url": "https://github.com/apache/flink/pull/13029#discussion_r463447520", "bodyText": "Make it a Singleton, similar to BasicTypeInfo in which provides a static final instance.", "author": "hequn8128", "createdAt": "2020-07-31T07:23:04Z", "path": "flink-python/src/main/java/org/apache/flink/datastream/typeinfo/python/PickledByteArrayTypeInfo.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.datastream.typeinfo.python;\n+\n+import org.apache.flink.api.common.ExecutionConfig;\n+import org.apache.flink.api.common.typeinfo.TypeInformation;\n+import org.apache.flink.api.common.typeutils.TypeSerializer;\n+import org.apache.flink.api.common.typeutils.base.array.BytePrimitiveArraySerializer;\n+\n+/**\n+ * A PickledByteArrayTypeInfo indicates that the data of this type is a generated primitive byte\n+ * array by pickle.\n+ */\n+public class PickledByteArrayTypeInfo extends TypeInformation<byte[]> {", "originalCommit": "39f5be60dc81c30f0cbbfb4e219722cbdd52ea21", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ1ODQ4OA==", "url": "https://github.com/apache/flink/pull/13029#discussion_r463458488", "bodyText": "Ok, making it singleton is better.", "author": "shuiqiangchen", "createdAt": "2020-07-31T07:49:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0NzUyMA=="}], "type": "inlineReview"}, {"oid": "1a3c5b93a697dea00a2e8237deb03b5848ffb1a9", "url": "https://github.com/apache/flink/commit/1a3c5b93a697dea00a2e8237deb03b5848ffb1a9", "message": "- remove LocalDateTimeTypeInfo.", "committedDate": "2020-07-31T07:25:20Z", "type": "commit"}, {"oid": "c58371821a9b25bf5fb86a8eed25404d3b812fa7", "url": "https://github.com/apache/flink/commit/c58371821a9b25bf5fb86a8eed25404d3b812fa7", "message": "- revise wrong words in comments, add type hints for methods, remove unnecessary types.", "committedDate": "2020-07-31T07:58:18Z", "type": "commit"}, {"oid": "9e004f9f8ebc001e7a8d63e39eb89f6b2b5cc431", "url": "https://github.com/apache/flink/commit/9e004f9f8ebc001e7a8d63e39eb89f6b2b5cc431", "message": "- remove INSTANT typeinfo and correct comments.", "committedDate": "2020-07-31T08:04:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ3NzEyNQ==", "url": "https://github.com/apache/flink/pull/13029#discussion_r463477125", "bodyText": "Remove the blank line.", "author": "hequn8128", "createdAt": "2020-07-31T08:29:59Z", "path": "flink-python/src/main/java/org/apache/flink/datastream/typeinfo/python/PickledByteArrayTypeInfo.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.datastream.typeinfo.python;\n+\n+import org.apache.flink.api.common.ExecutionConfig;\n+import org.apache.flink.api.common.typeinfo.TypeInformation;\n+import org.apache.flink.api.common.typeutils.TypeSerializer;\n+import org.apache.flink.api.common.typeutils.base.array.BytePrimitiveArraySerializer;\n+\n+/**\n+ * A PickledByteArrayTypeInfo indicates that the data of this type is a generated primitive byte\n+ * array by pickle.\n+ */\n+public class PickledByteArrayTypeInfo extends TypeInformation<byte[]> {\n+\n+\tpublic static final PickledByteArrayTypeInfo PICKLED_BYTE_ARRAY_TYPE_INFO = new PickledByteArrayTypeInfo();\n+\n+\t@Override\n+\tpublic boolean isBasicType() {\n+\t\treturn false;\n+\t}\n+\n+\t@Override\n+\tpublic boolean isTupleType() {\n+\t\treturn false;\n+\t}\n+\n+\t@Override\n+\tpublic int getArity() {\n+\t\treturn 1;\n+\t}\n+\n+\t@Override\n+\tpublic int getTotalFields() {\n+\t\treturn 1;\n+\t}\n+\n+\t@Override\n+\tpublic Class<byte[]> getTypeClass() {\n+\t\treturn byte[].class;\n+\t}\n+\n+\t@Override\n+\tpublic boolean isKeyType() {\n+\t\treturn false;\n+\t}\n+\n+\t@Override\n+\tpublic TypeSerializer<byte[]> createSerializer(ExecutionConfig config) {\n+", "originalCommit": "9e004f9f8ebc001e7a8d63e39eb89f6b2b5cc431", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ3Nzg1MQ==", "url": "https://github.com/apache/flink/pull/13029#discussion_r463477851", "bodyText": "Make the constructor protected.", "author": "hequn8128", "createdAt": "2020-07-31T08:31:24Z", "path": "flink-python/src/main/java/org/apache/flink/datastream/typeinfo/python/PickledByteArrayTypeInfo.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.flink.datastream.typeinfo.python;\n+\n+import org.apache.flink.api.common.ExecutionConfig;\n+import org.apache.flink.api.common.typeinfo.TypeInformation;\n+import org.apache.flink.api.common.typeutils.TypeSerializer;\n+import org.apache.flink.api.common.typeutils.base.array.BytePrimitiveArraySerializer;\n+\n+/**\n+ * A PickledByteArrayTypeInfo indicates that the data of this type is a generated primitive byte\n+ * array by pickle.\n+ */\n+public class PickledByteArrayTypeInfo extends TypeInformation<byte[]> {", "originalCommit": "9e004f9f8ebc001e7a8d63e39eb89f6b2b5cc431", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2d8d302ef214afc070f00d730d6c25c9509e3529", "url": "https://github.com/apache/flink/commit/2d8d302ef214afc070f00d730d6c25c9509e3529", "message": "- add type hint for methods, add more tests for typeinfos.", "committedDate": "2020-08-02T08:03:41Z", "type": "commit"}, {"oid": "6f2353ad0637284ced027c46b35e3117f34f3941", "url": "https://github.com/apache/flink/commit/6f2353ad0637284ced027c46b35e3117f34f3941", "message": "- refactor code style.", "committedDate": "2020-08-03T02:22:14Z", "type": "commit"}, {"oid": "dc01ebcdb7d9e911b0c3f145867ad1bc90288b30", "url": "https://github.com/apache/flink/commit/dc01ebcdb7d9e911b0c3f145867ad1bc90288b30", "message": "- refactor __str()__ for type infos, optimize test cases.", "committedDate": "2020-08-03T02:31:12Z", "type": "commit"}, {"oid": "be7e94a339fb20d1cee374495d8d8c1ac0af3c7b", "url": "https://github.com/apache/flink/commit/be7e94a339fb20d1cee374495d8d8c1ac0af3c7b", "message": "- print field name when calling RowTypeInfo.__str()__.", "committedDate": "2020-08-03T03:53:28Z", "type": "commit"}, {"oid": "943ff7e98177dec676272e44eae6e8fb1a1fcd2a", "url": "https://github.com/apache/flink/commit/943ff7e98177dec676272e44eae6e8fb1a1fcd2a", "message": " - remove unnecessary methods in TypeInformation.", "committedDate": "2020-08-04T09:29:55Z", "type": "commit"}, {"oid": "2c7ff6ceffd4f6be815e98befb669a07d98dc768", "url": "https://github.com/apache/flink/commit/2c7ff6ceffd4f6be815e98befb669a07d98dc768", "message": " - remove is_basic_type_test.", "committedDate": "2020-08-04T12:04:48Z", "type": "commit"}]}