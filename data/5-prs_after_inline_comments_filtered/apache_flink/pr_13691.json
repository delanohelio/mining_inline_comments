{"pr_number": 13691, "pr_title": "[FLINK-19458] Fix ZK-related CI instabilities", "pr_createdAt": "2020-10-19T17:17:48Z", "pr_url": "https://github.com/apache/flink/pull/13691", "timeline": [{"oid": "4312bb06c5db6171508223cae056d5e29b258f8e", "url": "https://github.com/apache/flink/commit/4312bb06c5db6171508223cae056d5e29b258f8e", "message": "[FLINK-19458] Fix ZK-related CI instabilities\n\nWe used to have an increased session and connection timeout configured for TravisCI.\nOn Azure, the environment variable we used for checking if we are in an CI environment doesn't exist anymore.\nThis change enables the increased timeout on Azure as well.", "committedDate": "2020-10-19T17:16:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM2Njg5OA==", "url": "https://github.com/apache/flink/pull/13691#discussion_r508366898", "bodyText": "Do we have more checks like this? (if so, then maybe add a common utility for it?)", "author": "zentol", "createdAt": "2020-10-20T09:54:44Z", "path": "flink-runtime/src/test/java/org/apache/flink/runtime/testutils/ZooKeeperTestUtils.java", "diffHunk": "@@ -68,8 +73,9 @@ public static Configuration configureZooKeeperHA(\n \t\tconfig.setString(HighAvailabilityOptions.HA_ZOOKEEPER_QUORUM, zooKeeperQuorum);\n \n \t\tint connTimeout = 5000;\n-\t\tif (System.getenv().containsKey(\"CI\")) {\n+\t\tif (System.getenv().containsKey(\"CI\") || System.getenv().containsKey(\"TF_BUILD\")) {", "originalCommit": "4312bb06c5db6171508223cae056d5e29b258f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM3MzMxOA==", "url": "https://github.com/apache/flink/pull/13691#discussion_r508373318", "bodyText": "A git grep \"\\\"CI\\\"\" didn't reveal any other code locations.", "author": "rmetzger", "createdAt": "2020-10-20T10:04:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM2Njg5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ2MjI3OQ==", "url": "https://github.com/apache/flink/pull/13691#discussion_r508462279", "bodyText": "maybe introduce runsOnCIInfrastructure() to give this expression a more expressive name.", "author": "tillrohrmann", "createdAt": "2020-10-20T12:34:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM2Njg5OA=="}], "type": "inlineReview"}]}