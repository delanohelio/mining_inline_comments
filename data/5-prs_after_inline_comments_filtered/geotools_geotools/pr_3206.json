{"pr_number": 3206, "pr_title": "[GEOT-6732] GroupCandidateSelection RT throws NPE if operation attribute return null", "pr_createdAt": "2020-11-12T11:23:07Z", "pr_url": "https://github.com/geotools/geotools/pull/3206", "timeline": [{"oid": "496014f0e7f5bc0f6a3b3e5aca356a954bf9f29b", "url": "https://github.com/geotools/geotools/commit/496014f0e7f5bc0f6a3b3e5aca356a954bf9f29b", "message": "[GEOT-6732] GroupCandidateSelection RT throws NPE if operation attribute return null", "committedDate": "2020-11-12T13:35:41Z", "type": "commit"}, {"oid": "496014f0e7f5bc0f6a3b3e5aca356a954bf9f29b", "url": "https://github.com/geotools/geotools/commit/496014f0e7f5bc0f6a3b3e5aca356a954bf9f29b", "message": "[GEOT-6732] GroupCandidateSelection RT throws NPE if operation attribute return null", "committedDate": "2020-11-12T13:35:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk1NjM5NA==", "url": "https://github.com/geotools/geotools/pull/3206#discussion_r522956394", "bodyText": "if (bestFeature == null && operationValue != null) ?", "author": "aaime", "createdAt": "2020-11-13T13:41:32Z", "path": "modules/unsupported/process-feature/src/main/java/org/geotools/process/vector/GroupCandidateSelectionProcess.java", "diffHunk": "@@ -298,15 +297,21 @@ public boolean hasNext() {\n             Feature bestFeature = null;\n             while (super.hasNext()) {\n                 Feature f = super.next();\n+                Comparable operationValue = getComparableFromEvaluation(f);\n                 if (bestFeature == null) {\n-                    // no features in the list this is the first of the group\n-                    // takes the values to check the following features if belong to the same group\n-                    groupingValues = getGroupingValues(groupingValues, f);\n-                    bestFeature = f;\n+                    // if null skipping\n+                    if (operationValue != null) {", "originalCommit": "496014f0e7f5bc0f6a3b3e5aca356a954bf9f29b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk5NzE1OA==", "url": "https://github.com/geotools/geotools/pull/3206#discussion_r522997158", "bodyText": "The condition is splitted to avoid entering the else, when operationValue is Null and bestFeature too, since the current feature in that case should be just skipped. Anyway I've modified the code for better readability.", "author": "taba90", "createdAt": "2020-11-13T14:48:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk1NjM5NA=="}], "type": "inlineReview"}, {"oid": "05de27d28a3db92fd7fbef321be410740c82638e", "url": "https://github.com/geotools/geotools/commit/05de27d28a3db92fd7fbef321be410740c82638e", "message": "reviewer's feedback", "committedDate": "2020-11-13T14:46:32Z", "type": "commit"}]}