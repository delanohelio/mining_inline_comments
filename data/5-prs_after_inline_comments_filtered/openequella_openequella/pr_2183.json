{"pr_number": 2183, "pr_title": "Add the support of whether to search attachments to Search2 API", "pr_createdAt": "2020-08-14T06:21:46Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/2183", "timeline": [{"oid": "7af4bd8081f4c6c168f7faf1050d9b56dd47250b", "url": "https://github.com/openequella/openEQUELLA/commit/7af4bd8081f4c6c168f7faf1050d9b56dd47250b", "message": "Add the support of whether to search attachments to Search2 API\n\nIn the old Search page, whether to search attachments is dependent on user\npreference. This is not compatible with the new Search page. So add new\nmethods which accept a boolean to include or exclude attachments in searches.", "committedDate": "2020-08-14T06:12:20Z", "type": "commit"}, {"oid": "cade0b77c92f90291dfba759563830e9762e4664", "url": "https://github.com/openequella/openEQUELLA/commit/cade0b77c92f90291dfba759563830e9762e4664", "message": "Let the default value of searchAttachments be true.", "committedDate": "2020-08-17T00:00:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE3NzU2MQ==", "url": "https://github.com/openequella/openEQUELLA/pull/2183#discussion_r471177561", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * @param searchReq An search request\n          \n          \n            \n               * @param searchReq A search request", "author": "edalex-ian", "createdAt": "2020-08-17T00:07:37Z", "path": "Source/Plugins/Core/com.equella.core/src/com/tle/core/freetext/service/FreeTextService.java", "diffHunk": "@@ -43,6 +43,18 @@\n   <T extends FreetextResult> FreetextSearchResults<T> search(\n       Search searchreq, int nStart, int nCount);\n \n+  /**\n+   * Another search method which allows users to specify if they want to search attachments.\n+   *\n+   * @param searchReq An search request", "originalCommit": "cade0b77c92f90291dfba759563830e9762e4664", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE3ODkzMA==", "url": "https://github.com/openequella/openEQUELLA/pull/2183#discussion_r471178930", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * @param count The number of records of a search result\n          \n          \n            \n               * @param count The maximum number of results requested, or -1 for all.\n          \n      \n    \n    \n  \n\nActually, should this param be called max or length or maxCount/maxLength? Ooooh, perhaps not, this is meant to be an overloaded method). In that case these should probably be nStart and nCount to match the method you're overloading. (Mind you, if you wanted too you could update the other method too so as to improve the names.)", "author": "edalex-ian", "createdAt": "2020-08-17T00:18:37Z", "path": "Source/Plugins/Core/com.equella.core/src/com/tle/core/freetext/service/FreeTextService.java", "diffHunk": "@@ -43,6 +43,18 @@\n   <T extends FreetextResult> FreetextSearchResults<T> search(\n       Search searchreq, int nStart, int nCount);\n \n+  /**\n+   * Another search method which allows users to specify if they want to search attachments.\n+   *\n+   * @param searchReq An search request\n+   * @param start The first record of a search result\n+   * @param count The number of records of a search result", "originalCommit": "cade0b77c92f90291dfba759563830e9762e4664", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE3OTE4Mw==", "url": "https://github.com/openequella/openEQUELLA/pull/2183#discussion_r471179183", "bodyText": "The method signature already tells us this, so how about:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * @return An instance of SearchResults\n          \n          \n            \n               * @return Search results matching the specified criteria, with a maximum length of count.", "author": "edalex-ian", "createdAt": "2020-08-17T00:20:31Z", "path": "Source/Plugins/Core/com.equella.core/src/com/tle/core/freetext/service/FreeTextService.java", "diffHunk": "@@ -43,6 +43,18 @@\n   <T extends FreetextResult> FreetextSearchResults<T> search(\n       Search searchreq, int nStart, int nCount);\n \n+  /**\n+   * Another search method which allows users to specify if they want to search attachments.\n+   *\n+   * @param searchReq An search request\n+   * @param start The first record of a search result\n+   * @param count The number of records of a search result\n+   * @param searchAttachments Whether to search attachments\n+   * @return An instance of SearchResults", "originalCommit": "cade0b77c92f90291dfba759563830e9762e4664", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE3OTY1Nw==", "url": "https://github.com/openequella/openEQUELLA/pull/2183#discussion_r471179657", "bodyText": "Is the f in fTextResults for free? If so, let's just use the whole word. But then again, we do have the type here, so why not just results?", "author": "edalex-ian", "createdAt": "2020-08-17T00:23:34Z", "path": "Source/Plugins/Core/com.equella.core/src/com/tle/core/freetext/service/impl/FreeTextServiceImpl.java", "diffHunk": "@@ -263,6 +263,13 @@ public void indexAll() {\n     return new StdFreetextResults<T>(itemService, fTextResults, searchreq);\n   }\n \n+  @Override\n+  public <T extends FreetextResult> FreetextSearchResults<T> search(\n+      Search searchReq, int start, int count, boolean searchAttachments) {\n+    SearchResults<T> fTextResults = indexer.search(searchReq, start, count, searchAttachments);", "originalCommit": "cade0b77c92f90291dfba759563830e9762e4664", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2a846e111bc130c2572805942e2789a4e217d0d5", "url": "https://github.com/openequella/openEQUELLA/commit/2a846e111bc130c2572805942e2789a4e217d0d5", "message": "Doco and param name tidy ups for whether to searching attachment.", "committedDate": "2020-08-17T04:48:40Z", "type": "commit"}]}