{"pr_number": 459, "pr_title": "add unit tests", "pr_createdAt": "2020-08-04T07:46:34Z", "pr_url": "https://github.com/opensrp/opensrp-client-native-form/pull/459", "timeline": [{"oid": "1c5fff0fddcce026441c57ad7231cd51e06e4205", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/1c5fff0fddcce026441c57ad7231cd51e06e4205", "message": "Remove spy on SUT", "committedDate": "2020-08-04T07:46:00Z", "type": "commit"}, {"oid": "cfffa5588921e4dce969c1af1166876e14398345", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/cfffa5588921e4dce969c1af1166876e14398345", "message": "Add more initialization assertions", "committedDate": "2020-08-04T08:07:55Z", "type": "commit"}, {"oid": "1f8a5d653023dcf04d3ea8462db1aed3257a3139", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/1f8a5d653023dcf04d3ea8462db1aed3257a3139", "message": "Assert rdt capture activity is launched", "committedDate": "2020-08-04T08:30:12Z", "type": "forcePushed"}, {"oid": "1c481135c40f95875afb567265ef908df0b0054a", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/1c481135c40f95875afb567265ef908df0b0054a", "message": "Assert rdt capture activity is launched", "committedDate": "2020-08-04T08:32:27Z", "type": "commit"}, {"oid": "1c481135c40f95875afb567265ef908df0b0054a", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/1c481135c40f95875afb567265ef908df0b0054a", "message": "Assert rdt capture activity is launched", "committedDate": "2020-08-04T08:32:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg0MDczNA==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/459#discussion_r466840734", "bodyText": "Any reason you called this here?", "author": "bennsimon", "createdAt": "2020-08-07T06:11:17Z", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/BasicRDTCaptureFactoryTest.java", "diffHunk": "@@ -1,62 +1,120 @@\n package com.vijay.jsonwizard.widgets;\n \n+import android.content.Intent;\n+import android.content.pm.PackageManager;\n import android.view.View;\n \n import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.R;\n import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.constants.JsonFormConstants;\n+import com.vijay.jsonwizard.domain.WidgetArgs;\n import com.vijay.jsonwizard.fragments.JsonFormFragment;\n import com.vijay.jsonwizard.interfaces.CommonListener;\n+import com.vijay.jsonwizard.interfaces.OnActivityResultListener;\n+import com.vijay.jsonwizard.shadow.ShadowContextCompat;\n \n+import org.json.JSONException;\n import org.json.JSONObject;\n-import org.junit.Assert;\n import org.junit.Before;\n import org.junit.Test;\n import org.mockito.Mock;\n-import org.mockito.Mockito;\n import org.mockito.MockitoAnnotations;\n+import org.robolectric.Robolectric;\n+import org.robolectric.annotation.Config;\n+import org.robolectric.util.ReflectionHelpers;\n \n+import java.util.HashMap;\n import java.util.List;\n import java.util.Set;\n \n+import edu.washington.cs.ubicomplab.rdt_reader.activity.RDTCaptureActivity;\n+\n+import static com.vijay.jsonwizard.constants.JsonFormConstants.RDT_CAPTURE_CODE;\n+import static com.vijay.jsonwizard.constants.JsonFormConstants.STEP1;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.robolectric.Shadows.shadowOf;\n+\n+@Config(shadows = {ShadowContextCompat.class})\n public class BasicRDTCaptureFactoryTest extends BaseTest {\n-    private BasicRDTCaptureFactory factory;\n-    @Mock\n-    private JsonFormActivity context;\n+\n+    private BasicRDTCaptureFactory basicRDTCaptureFactory;\n+    private JsonFormActivity jsonFormActivity;\n+\n     @Mock\n     private JsonFormFragment formFragment;\n     @Mock\n     private CommonListener listener;\n-    @Mock\n-    private View rootLayout;\n \n     @Before\n-    public void setUp() {\n+    public void setUp() throws JSONException {\n         MockitoAnnotations.initMocks(this);\n-        factory = new BasicRDTCaptureFactory();\n+        basicRDTCaptureFactory = new BasicRDTCaptureFactory();\n+        getJsonFormActivityIntent();", "originalCommit": "1c481135c40f95875afb567265ef908df0b0054a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyMTM3NA==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/459#discussion_r466921374", "bodyText": "Removed", "author": "vincent-karuri", "createdAt": "2020-08-07T09:12:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg0MDczNA=="}], "type": "inlineReview"}, {"oid": "e285541d6d2f517b092e4fb0968d22103979757d", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/e285541d6d2f517b092e4fb0968d22103979757d", "message": "Remove redundant test method call", "committedDate": "2020-08-07T09:12:24Z", "type": "commit"}]}