{"pr_number": 6003, "pr_title": "DDF-5996 Simplifies the Web Context Policy Manager's authentication type configuration", "pr_createdAt": "2020-04-17T07:22:28Z", "pr_url": "https://github.com/codice/ddf/pull/6003", "timeline": [{"oid": "9882afb010aae25f2878309fa063a02fa8bf9fca", "url": "https://github.com/codice/ddf/commit/9882afb010aae25f2878309fa063a02fa8bf9fca", "message": "DDF-5996 Simplifies the Web Context Policy Manager's authentication type configuration", "committedDate": "2020-04-17T07:23:19Z", "type": "forcePushed"}, {"oid": "9d6c4286d43cd160440dfc995a505c4d26c40437", "url": "https://github.com/codice/ddf/commit/9d6c4286d43cd160440dfc995a505c4d26c40437", "message": "DDF-5996 Simplifies the Web Context Policy Manager's authentication type configuration", "committedDate": "2020-04-22T19:24:45Z", "type": "forcePushed"}, {"oid": "f375ca6baa8cfb7e952ba3ac0f1ef11d09d14ec6", "url": "https://github.com/codice/ddf/commit/f375ca6baa8cfb7e952ba3ac0f1ef11d09d14ec6", "message": "DDF-5996 Simplifies the Web Context Policy Manager's authentication type configuration", "committedDate": "2020-05-04T23:09:35Z", "type": "commit"}, {"oid": "f375ca6baa8cfb7e952ba3ac0f1ef11d09d14ec6", "url": "https://github.com/codice/ddf/commit/f375ca6baa8cfb7e952ba3ac0f1ef11d09d14ec6", "message": "DDF-5996 Simplifies the Web Context Policy Manager's authentication type configuration", "committedDate": "2020-05-04T23:09:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM0MjE0OA==", "url": "https://github.com/codice/ddf/pull/6003#discussion_r420342148", "bodyText": "\u270f\ufe0f Maybe leave a comment on what \\\\s+then\\\\s+ is doing. Cause I ain't regex literate\n\u2753 Looks like we now have two authentication type formats:\nPKI|SAML\n\nand\nPKI then SAML\n\nShould we decide on one form and use that throughout the system?", "author": "bakejeyner", "createdAt": "2020-05-05T19:07:45Z", "path": "platform/security/policy/security-policy-context/src/main/java/org/codice/ddf/security/policy/context/impl/PolicyManager.java", "diffHunk": "@@ -457,6 +468,40 @@ public boolean getSessionAccess() {\n     return sessionAccess;\n   }\n \n+  public void setPolicyFilePath(String policyFilePath) {\n+    Map<String, String> properties =\n+        PropertiesLoader.getInstance()\n+            .toMap(PropertiesLoader.getInstance().loadProperties(policyFilePath));\n+\n+    if (properties.isEmpty()) {\n+      LOGGER.debug(\"File-based authentication type configuration not found.\");\n+      return;\n+    }\n+\n+    LOGGER.info(\"Proceeding with file-based authentication type configuration ...\");\n+\n+    Map<String, List<String>> contextToAuthTypes = new HashMap<>();\n+\n+    for (Map.Entry<String, String> authTypes : properties.entrySet()) {\n+      List<String> finalAuthTypes = new ArrayList<>();\n+      String[] auths = authTypes.getValue().trim().split(\"\\\\s+then\\\\s+\");", "originalCommit": "f375ca6baa8cfb7e952ba3ac0f1ef11d09d14ec6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3NDc2Mw==", "url": "https://github.com/codice/ddf/pull/6003#discussion_r420374763", "bodyText": "The file-based config can be more verbose and explicit. I don't think there is an issue with having | or then in different configs. Like I mentioned we're hoping no one uses the file-based config and we can get rid of it.", "author": "blen-desta", "createdAt": "2020-05-05T20:07:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM0MjE0OA=="}], "type": "inlineReview"}, {"oid": "1ceb02b4b0632b7cf4c9a8e7ed50e6e64a883db5", "url": "https://github.com/codice/ddf/commit/1ceb02b4b0632b7cf4c9a8e7ed50e6e64a883db5", "message": "Addressed doc change PR comments", "committedDate": "2020-05-06T16:48:04Z", "type": "commit"}]}