{"pr_number": 6096, "pr_title": "[2.20.x-perf] DDF-6097 Update PreFederatedQueryPlugin logic to maintain context", "pr_createdAt": "2020-05-22T21:06:47Z", "pr_url": "https://github.com/codice/ddf/pull/6096", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ1NDg1MA==", "url": "https://github.com/codice/ddf/pull/6096#discussion_r429454850", "bodyText": "This does lead to a bit of log pollution, at least for the source I was using (CSW Specification Profile Federated Source). As the query fails (which it should if the source is unavailable), the logs show Caused by: javax.xml.bind.UnmarshalException on each failed query.", "author": "Bdthomson", "createdAt": "2020-05-22T21:18:15Z", "path": "catalog/core/catalog-core-standardframework/src/main/java/ddf/catalog/impl/operations/QueryOperations.java", "diffHunk": "@@ -828,7 +828,7 @@ QuerySources initializeSources(\n               if (!canAccessSource) {\n                 notPermittedSources.add(source.getId());\n               }\n-              if (source.isAvailable() && canAccessSource) {", "originalCommit": "b19884e64702c69671d257c02faf15fb26eeb951", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU4MjY4Nw==", "url": "https://github.com/codice/ddf/pull/6096#discussion_r430582687", "bodyText": "Probably means we just shouldn't log whatevers being logged at info/error in that csw source", "author": "rzwiefel", "createdAt": "2020-05-26T17:25:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ1NDg1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ1NTA5NA==", "url": "https://github.com/codice/ddf/pull/6096#discussion_r429455094", "bodyText": "Is this a potential security risk? Depending on what is placed on ProcessingDetails?", "author": "Bdthomson", "createdAt": "2020-05-22T21:19:03Z", "path": "catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/query/cql/Status.java", "diffHunk": "@@ -29,13 +32,16 @@\n \n   private final boolean successful;\n \n+  private List<String> warnings = new ArrayList<>();\n+\n   public Status(QueryResponse response, String source, long elapsedTime) {\n     elapsed = elapsedTime;\n     id = source;\n \n     count = response.getResults().size();\n     hits = response.getHits();\n     successful = isSuccessful(response.getProcessingDetails());\n+    warnings = getWarnings(response.getProcessingDetails());", "originalCommit": "b19884e64702c69671d257c02faf15fb26eeb951", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bbde3e1c138b22dd0a341171a5dd4f895f30954f", "url": "https://github.com/codice/ddf/commit/bbde3e1c138b22dd0a341171a5dd4f895f30954f", "message": "Update unit test", "committedDate": "2020-05-27T20:13:35Z", "type": "forcePushed"}, {"oid": "3190a4650d68f1b85a1090359a56799e35ad0008", "url": "https://github.com/codice/ddf/commit/3190a4650d68f1b85a1090359a56799e35ad0008", "message": "Calculate startindex from statusBySource", "committedDate": "2020-05-27T21:40:02Z", "type": "commit"}, {"oid": "4e5d8852e0468c9b5c2b30d93000dc9f2c77fb32", "url": "https://github.com/codice/ddf/commit/4e5d8852e0468c9b5c2b30d93000dc9f2c77fb32", "message": "Allow PostFederatedQueryPlugins to return query responses\n\n- Allow PostFederatedQueryPlugins to be ran on sources that are \"unavailable\"\nFix issues with post federated\n\n\na\n\n\na", "committedDate": "2020-05-27T21:40:02Z", "type": "commit"}, {"oid": "e84c66073be9852e369450431956b981e2b9cfce", "url": "https://github.com/codice/ddf/commit/e84c66073be9852e369450431956b981e2b9cfce", "message": "Fix spacing on source list", "committedDate": "2020-05-27T21:40:02Z", "type": "commit"}, {"oid": "36abaf29cf1bc5db4b8cff4d8c2594b1eb3061ca", "url": "https://github.com/codice/ddf/commit/36abaf29cf1bc5db4b8cff4d8c2594b1eb3061ca", "message": "Remove console log", "committedDate": "2020-05-27T21:40:02Z", "type": "commit"}, {"oid": "b48d7ce07afa6ecbb22ca2184d1f98a5db1b8446", "url": "https://github.com/codice/ddf/commit/b48d7ce07afa6ecbb22ca2184d1f98a5db1b8446", "message": "Update unit test", "committedDate": "2020-05-27T21:40:02Z", "type": "commit"}, {"oid": "868ae93186f858033b53ced13a56a36bc08f1727", "url": "https://github.com/codice/ddf/commit/868ae93186f858033b53ced13a56a36bc08f1727", "message": "Update another test", "committedDate": "2020-05-27T21:40:02Z", "type": "commit"}, {"oid": "1c2286f027fc17f3fa3402646afc8bea6184e31b", "url": "https://github.com/codice/ddf/commit/1c2286f027fc17f3fa3402646afc8bea6184e31b", "message": "Fix unit tests and core logic", "committedDate": "2020-05-27T21:40:02Z", "type": "commit"}, {"oid": "1c2286f027fc17f3fa3402646afc8bea6184e31b", "url": "https://github.com/codice/ddf/commit/1c2286f027fc17f3fa3402646afc8bea6184e31b", "message": "Fix unit tests and core logic", "committedDate": "2020-05-27T21:40:02Z", "type": "forcePushed"}]}