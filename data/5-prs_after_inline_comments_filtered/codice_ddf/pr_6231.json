{"pr_number": 6231, "pr_title": "[2.19.x] DDF-6232 decrypt password parameter in SmtpClientImpl", "pr_createdAt": "2020-08-06T22:19:16Z", "pr_url": "https://github.com/codice/ddf/pull/6231", "timeline": [{"oid": "a4174979aa993f75148184daa9cdfc96b18669e2", "url": "https://github.com/codice/ddf/commit/a4174979aa993f75148184daa9cdfc96b18669e2", "message": "always decrypt password parameter in SmtpClientImpl\n\nif a config file is provided a bug occurs where the password parameter is supplied still encrypted to the smtp server", "committedDate": "2020-08-06T22:17:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA==", "url": "https://github.com/codice/ddf/pull/6231#discussion_r468168060", "bodyText": "\u2753 Do we want to keep the password encrypted in-memory and only decrypt on use?", "author": "Lambeaux", "createdAt": "2020-08-10T20:30:09Z", "path": "platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java", "diffHunk": "@@ -92,7 +99,7 @@ public void setUserName(@Nullable String userName) {\n    * @param password the password for the email server\n    */\n   public void setPassword(@Nullable String password) {\n-    this.password = password;\n+    this.password = encryptionService.decryptValue(password);", "originalCommit": "a4174979aa993f75148184daa9cdfc96b18669e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ4NDQyNQ==", "url": "https://github.com/codice/ddf/pull/6231#discussion_r469484425", "bodyText": "seems like overkill", "author": "rymach", "createdAt": "2020-08-12T19:17:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUzMTE4NQ==", "url": "https://github.com/codice/ddf/pull/6231#discussion_r469531185", "bodyText": "why? isn't that actually a safer approach?", "author": "bdeining", "createdAt": "2020-08-12T20:38:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU0MDI1NQ==", "url": "https://github.com/codice/ddf/pull/6231#discussion_r469540255", "bodyText": "where does the decryption key live", "author": "rymach", "createdAt": "2020-08-12T20:53:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU5OTk2NA==", "url": "https://github.com/codice/ddf/pull/6231#discussion_r469599964", "bodyText": "Someone from the @codice/security team could probably help. Is it only accessible here? https://github.com/codice/ddf/blob/2.19.x/platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java#L162\nIf so then possible could decrypt it there so it isn't in memory. Not sure if that is better.", "author": "shaundmorris", "createdAt": "2020-08-12T23:20:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NzcxNg==", "url": "https://github.com/codice/ddf/pull/6231#discussion_r470047716", "bodyText": "The decryption key lives in etc/ketsets which is protected by the security policy.\nhttps://github.com/codice/ddf/blob/master/distribution/ddf-common/src/main/resources/security/default.policy#L234-L235", "author": "pklinef", "createdAt": "2020-08-13T15:43:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}], "type": "inlineReview"}, {"oid": "c335a013933162ff48fd0dad2f06c896033c8a85", "url": "https://github.com/codice/ddf/commit/c335a013933162ff48fd0dad2f06c896033c8a85", "message": "wish me luck w/ ci", "committedDate": "2020-08-14T20:57:17Z", "type": "commit"}, {"oid": "d17c50cc17b5618fc5c9a47a218e6d9e06720c54", "url": "https://github.com/codice/ddf/commit/d17c50cc17b5618fc5c9a47a218e6d9e06720c54", "message": "wish me luck w/ ci", "committedDate": "2020-08-14T21:26:55Z", "type": "commit"}]}