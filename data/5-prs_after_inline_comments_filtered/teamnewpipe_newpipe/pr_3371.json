{"pr_number": 3371, "pr_title": "Add ability to hide played items in a feed", "pr_createdAt": "2020-04-05T14:16:23Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/3371", "timeline": [{"oid": "e79ca8a32c32388e8952d209787b3c87e96219bd", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e79ca8a32c32388e8952d209787b3c87e96219bd", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list.", "committedDate": "2020-04-09T16:27:15Z", "type": "forcePushed"}, {"oid": "e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e1ef59f763d8e5b5c391ee36f2ab0950edd3e7a7", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list.", "committedDate": "2020-06-27T13:09:27Z", "type": "forcePushed"}, {"oid": "9e4030928b443e5e42c81cfefa393aece9c7c77b", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9e4030928b443e5e42c81cfefa393aece9c7c77b", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list.", "committedDate": "2021-03-17T15:05:44Z", "type": "forcePushed"}, {"oid": "b8794f7967b9e67ed70f14c2e5f0ce4cf7e5ceb1", "url": "https://github.com/TeamNewPipe/NewPipe/commit/b8794f7967b9e67ed70f14c2e5f0ce4cf7e5ceb1", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list.", "committedDate": "2021-03-18T08:23:00Z", "type": "forcePushed"}, {"oid": "f515686e996f6665613b9e25233bbe1f3882678c", "url": "https://github.com/TeamNewPipe/NewPipe/commit/f515686e996f6665613b9e25233bbe1f3882678c", "message": "Remove IN HISTORY label on stream info items", "committedDate": "2021-03-26T10:35:54Z", "type": "forcePushed"}, {"oid": "cc9402dceb239fdd391ae1d626af1143e76b311e", "url": "https://github.com/TeamNewPipe/NewPipe/commit/cc9402dceb239fdd391ae1d626af1143e76b311e", "message": "Remove IN HISTORY label on stream info items", "committedDate": "2021-06-07T06:27:46Z", "type": "forcePushed"}, {"oid": "06be78bd63743edb783414b3391ccade1148f1dd", "url": "https://github.com/TeamNewPipe/NewPipe/commit/06be78bd63743edb783414b3391ccade1148f1dd", "message": "Consider stream state valid also if >1/4 of video was watched", "committedDate": "2021-06-07T07:48:00Z", "type": "forcePushed"}, {"oid": "22a9cd31b29d8c3a8e2fe57b1b34f690e5a7ee9f", "url": "https://github.com/TeamNewPipe/NewPipe/commit/22a9cd31b29d8c3a8e2fe57b1b34f690e5a7ee9f", "message": "Consider stream state valid also if >1/4 of video was watched", "committedDate": "2021-06-07T07:56:52Z", "type": "forcePushed"}, {"oid": "e846f69e38c6f66bdbbab05200ca56d39f4edb94", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e846f69e38c6f66bdbbab05200ca56d39f4edb94", "message": "Add ability to hide played items in a feed\n\n- Use components from the new Groupie list library for displaying the\nfeed list.", "committedDate": "2021-06-09T13:53:51Z", "type": "commit"}, {"oid": "360f5ac6f79cf07955364a163f16cea06d1ce183", "url": "https://github.com/TeamNewPipe/NewPipe/commit/360f5ac6f79cf07955364a163f16cea06d1ce183", "message": "Save playback state even if stream is finished and add isFinished()", "committedDate": "2021-06-09T13:53:51Z", "type": "commit"}, {"oid": "e58feadba9e38b54f871568f2fa7f3e3dd3eaca7", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e58feadba9e38b54f871568f2fa7f3e3dd3eaca7", "message": "Remove IN HISTORY label on stream info items", "committedDate": "2021-06-09T13:53:51Z", "type": "commit"}, {"oid": "0113ad5e1490c483622dc7f4870ec2e18f9b8077", "url": "https://github.com/TeamNewPipe/NewPipe/commit/0113ad5e1490c483622dc7f4870ec2e18f9b8077", "message": "Correctly save stream progress at the end of a video", "committedDate": "2021-06-09T13:53:51Z", "type": "commit"}, {"oid": "60e44f39cd51c5d3fa3c73aaedcf294571e2cccf", "url": "https://github.com/TeamNewPipe/NewPipe/commit/60e44f39cd51c5d3fa3c73aaedcf294571e2cccf", "message": "Consider stream state valid also if >1/4 of video was watched", "committedDate": "2021-06-09T13:53:51Z", "type": "forcePushed"}, {"oid": "faa93ca4841b8e523499ace4e025ec44d768c811", "url": "https://github.com/TeamNewPipe/NewPipe/commit/faa93ca4841b8e523499ace4e025ec44d768c811", "message": "Fix long press menu in feed", "committedDate": "2021-06-09T14:21:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTQ5NTc0NQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r649495745", "bodyText": "That inline comments can be moved into the JDoc", "author": "TobiGr", "createdAt": "2021-06-10T20:12:59Z", "path": "app/src/main/java/org/schabi/newpipe/database/stream/model/StreamStateEntity.java", "diffHunk": "@@ -25,26 +23,28 @@\n     // This additional field is required for the SQL query because 'stream_id' is used\n     // for some other joins already\n     public static final String JOIN_STREAM_ID_ALIAS = \"stream_id_alias\";\n-    public static final String STREAM_PROGRESS_TIME = \"progress_time\";\n+    public static final String STREAM_PROGRESS_MILLIS = \"progress_time\";\n \n     /**\n      * Playback state will not be saved, if playback time is less than this threshold.\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_START_SECONDS = 5;\n+    private static final long PLAYBACK_SAVE_THRESHOLD_START_MILLISECONDS = 5000; // 5000ms = 5s\n+\n     /**\n-     * Playback state will not be saved, if time left is less than this threshold.\n+     * @see #isFinished(long)\n+     * @see org.schabi.newpipe.database.feed.dao.FeedDAO#getLiveOrNotPlayedStreams()\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_END_SECONDS = 10;\n+    public static final long PLAYBACK_FINISHED_END_MILLISECONDS = 60000; // 60000ms = 60s", "originalCommit": "faa93ca4841b8e523499ace4e025ec44d768c811", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTUwNjUyMQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r649506521", "bodyText": "Does this change require a Migration?", "author": "TobiGr", "createdAt": "2021-06-10T20:29:55Z", "path": "app/src/main/java/org/schabi/newpipe/database/stream/model/StreamStateEntity.java", "diffHunk": "@@ -25,26 +23,28 @@\n     // This additional field is required for the SQL query because 'stream_id' is used\n     // for some other joins already\n     public static final String JOIN_STREAM_ID_ALIAS = \"stream_id_alias\";\n-    public static final String STREAM_PROGRESS_TIME = \"progress_time\";\n+    public static final String STREAM_PROGRESS_MILLIS = \"progress_time\";\n \n     /**\n      * Playback state will not be saved, if playback time is less than this threshold.\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_START_SECONDS = 5;\n+    private static final long PLAYBACK_SAVE_THRESHOLD_START_MILLISECONDS = 5000; // 5000ms = 5s\n+\n     /**\n-     * Playback state will not be saved, if time left is less than this threshold.\n+     * @see #isFinished(long)\n+     * @see org.schabi.newpipe.database.feed.dao.FeedDAO#getLiveOrNotPlayedStreams()\n      */\n-    private static final int PLAYBACK_SAVE_THRESHOLD_END_SECONDS = 10;\n+    public static final long PLAYBACK_FINISHED_END_MILLISECONDS = 60000; // 60000ms = 60s\n \n     @ColumnInfo(name = JOIN_STREAM_ID)\n     private long streamUid;\n \n-    @ColumnInfo(name = STREAM_PROGRESS_TIME)", "originalCommit": "faa93ca4841b8e523499ace4e025ec44d768c811", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTkxMTY0OA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3371#discussion_r649911648", "bodyText": "No, I just changed the name of the variable, not its content", "author": "Stypox", "createdAt": "2021-06-11T11:43:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0OTUwNjUyMQ=="}], "type": "inlineReview"}, {"oid": "2142f05a88f2848586debcf1501cb71dd4abc522", "url": "https://github.com/TeamNewPipe/NewPipe/commit/2142f05a88f2848586debcf1501cb71dd4abc522", "message": "Fix hiding finished streams in groups; new stream state validity condition\n\nConsider stream state valid also if >1/4 of video was watched", "committedDate": "2021-06-14T17:01:01Z", "type": "commit"}, {"oid": "4698d07323c2dc0e1c2b4cbbafafa4783548f07f", "url": "https://github.com/TeamNewPipe/NewPipe/commit/4698d07323c2dc0e1c2b4cbbafafa4783548f07f", "message": "Do not hide feed buttons (show/hide & help) behind three-dots menu", "committedDate": "2021-06-14T17:02:57Z", "type": "commit"}, {"oid": "7145b117cccbf286de8006b4559e4fdd5dd1599b", "url": "https://github.com/TeamNewPipe/NewPipe/commit/7145b117cccbf286de8006b4559e4fdd5dd1599b", "message": "Fix long press menu in feed", "committedDate": "2021-06-14T17:02:57Z", "type": "commit"}, {"oid": "fdb6679d2d8eada1a28cb2ab5c6547b15e39538a", "url": "https://github.com/TeamNewPipe/NewPipe/commit/fdb6679d2d8eada1a28cb2ab5c6547b15e39538a", "message": "Make list stream item ConstraintLayouts and use chain", "committedDate": "2021-06-15T12:17:40Z", "type": "commit"}, {"oid": "32df4d39a4b37603d891936817dd6ea0d0df61c5", "url": "https://github.com/TeamNewPipe/NewPipe/commit/32df4d39a4b37603d891936817dd6ea0d0df61c5", "message": "Reshow feed if grid/list view mode changed", "committedDate": "2021-06-15T16:40:25Z", "type": "commit"}, {"oid": "32df4d39a4b37603d891936817dd6ea0d0df61c5", "url": "https://github.com/TeamNewPipe/NewPipe/commit/32df4d39a4b37603d891936817dd6ea0d0df61c5", "message": "Reshow feed if grid/list view mode changed", "committedDate": "2021-06-15T16:40:25Z", "type": "forcePushed"}]}