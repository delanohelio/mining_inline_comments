{"pr_number": 3430, "pr_title": "Display parent channel details", "pr_createdAt": "2020-04-13T21:53:34Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/3430", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk5ODc1OA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r407998758", "bodyText": "Extract this string to strings.xml", "author": "B0pol", "createdAt": "2020-04-14T09:33:31Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1249,6 +1282,28 @@ private void hideAgeRestrictedContent() {\n         viewPager.setVisibility(View.GONE);\n         tabLayout.setVisibility(View.GONE);\n     }\n+    private void displayUploaderAsParentChannel(final StreamInfo info) {\n+        parentChannelTextView.setText(info.getUploaderName());\n+        parentChannelTextView.setVisibility(View.VISIBLE);\n+        parentChannelTextView.setSelected(true);\n+        parentChannelThumb.setVisibility(View.GONE);\n+        uploaderTextView.setVisibility(View.GONE);\n+    }\n+\n+    private void displayBothUploaderAndParentChannel(final StreamInfo info) {\n+        parentChannelTextView.setText(info.getParentChannelName());\n+        parentChannelTextView.setVisibility(View.VISIBLE);\n+        parentChannelTextView.setSelected(true);\n+\n+        if (!TextUtils.isEmpty(info.getUploaderName())) {\n+            uploaderTextView.setText(\"By \" + info.getUploaderName());", "originalCommit": "e8f77ff41ec16a387a5c911f52f1ad258904fd1e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk5OTA3Mw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r407999073", "bodyText": "Extract this string to strings.xml", "author": "B0pol", "createdAt": "2020-04-14T09:34:02Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/list/channel/ChannelFragment.java", "diffHunk": "@@ -425,6 +472,15 @@ public void handleResult(@NonNull final ChannelInfo result) {\n             headerSubscribersTextView.setText(R.string.subscribers_count_not_available);\n         }\n \n+        if (!TextUtils.isEmpty(currentInfo.getParentChannelName())) {\n+            headerParentChannelTitleView.setText(\n+                    \"Created by \" + currentInfo.getParentChannelName());", "originalCommit": "e8f77ff41ec16a387a5c911f52f1ad258904fd1e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA1ODkwMA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r408058900", "bodyText": "Why does this have an extra space before it?", "author": "wb9688", "createdAt": "2020-04-14T11:18:18Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/list/channel/ChannelFragment.java", "diffHunk": "@@ -394,6 +408,36 @@ private void updateSubscribeButton(final boolean isSubscribed) {\n         return ExtractorHelper.getChannelInfo(serviceId, url, forceLoad);\n     }\n \n+     /*//////////////////////////////////////////////////////////////////////////", "originalCommit": "e8f77ff41ec16a387a5c911f52f1ad258904fd1e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA1ODk1Mw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r408058953", "bodyText": "Why does this have an extra space before it?", "author": "wb9688", "createdAt": "2020-04-14T11:18:24Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/list/channel/ChannelFragment.java", "diffHunk": "@@ -394,6 +408,36 @@ private void updateSubscribeButton(final boolean isSubscribed) {\n         return ExtractorHelper.getChannelInfo(serviceId, url, forceLoad);\n     }\n \n+     /*//////////////////////////////////////////////////////////////////////////\n+    // OnClick\n+    //////////////////////////////////////////////////////////////////////////*/\n+\n+     @Override", "originalCommit": "e8f77ff41ec16a387a5c911f52f1ad258904fd1e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cd1196c0978d2759a7ef66e5d6d749b2f4363dc6", "url": "https://github.com/TeamNewPipe/NewPipe/commit/cd1196c0978d2759a7ef66e5d6d749b2f4363dc6", "message": "Fix PR review\n\nMake all of the uploader section on stream page navigate to the channel page\nExtract hard coded strings\nRemove redundant spaces\nFix open streams from a channel\nRename \"ParentChannel\" to \"SubChannel\"\nConfig royosef:NewPipeExtractor in app/build.gradle", "committedDate": "2020-04-16T15:40:00Z", "type": "forcePushed"}, {"oid": "5581eb926788de22bacd9c234f4d592b8b1b4642", "url": "https://github.com/TeamNewPipe/NewPipe/commit/5581eb926788de22bacd9c234f4d592b8b1b4642", "message": "Fix PR review\n\nMake all of the uploader section on stream page navigate to the channel page\nExtract hard coded strings\nRemove redundant spaces\nFix open streams from a channel\nRename \"ParentChannel\" to \"SubChannel\"\nConfig royosef:NewPipeExtractor in app/build.gradle", "committedDate": "2020-04-17T08:12:50Z", "type": "forcePushed"}, {"oid": "1429774487f32b5cba578d89a89d3ecf14f09162", "url": "https://github.com/TeamNewPipe/NewPipe/commit/1429774487f32b5cba578d89a89d3ecf14f09162", "message": "Add sub-channel details to video detail fragment", "committedDate": "2020-05-07T18:39:32Z", "type": "commit"}, {"oid": "2d0bc0548849da36e9ad0c4a5d70025aca89a737", "url": "https://github.com/TeamNewPipe/NewPipe/commit/2d0bc0548849da36e9ad0c4a5d70025aca89a737", "message": "Add sub-channel details to channel fragment", "committedDate": "2020-05-07T18:39:32Z", "type": "commit"}, {"oid": "cc8874b68746f6488307239301e6cc64343ba83a", "url": "https://github.com/TeamNewPipe/NewPipe/commit/cc8874b68746f6488307239301e6cc64343ba83a", "message": "Fix PR review\n\nMake all of the uploader section on stream page navigate to the channel page\nExtract hard coded strings\nRemove redundant spaces\nFix open streams from a channel\nRename \"ParentChannel\" to \"SubChannel\"\nConfig royosef:NewPipeExtractor in app/build.gradle", "committedDate": "2020-05-07T18:40:17Z", "type": "commit"}, {"oid": "b7d4a4f604772c722634d85c516657d014e89e30", "url": "https://github.com/TeamNewPipe/NewPipe/commit/b7d4a4f604772c722634d85c516657d014e89e30", "message": "Navigate to parent(uploader) channel from the uploader section on long click", "committedDate": "2020-05-07T18:40:17Z", "type": "commit"}, {"oid": "a43fa651529ad53f51c04b8b02a91eabff81d328", "url": "https://github.com/TeamNewPipe/NewPipe/commit/a43fa651529ad53f51c04b8b02a91eabff81d328", "message": "Don't show sub-channel thumbnail by default", "committedDate": "2020-05-07T18:51:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjEzODM0OA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422138348", "bodyText": "Why is this checking whether a subchannel exists, but then the parent uploader url is used?", "author": "Stypox", "createdAt": "2020-05-08T13:20:18Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -463,6 +474,15 @@ public boolean onLongClick(final View v) {\n             case R.id.detail_controls_download:\n                 NavigationHelper.openDownloads(getActivity());\n                 break;\n+\n+            case R.id.detail_uploader_root_layout:\n+                if (TextUtils.isEmpty(currentInfo.getSubChannelUrl())) {", "originalCommit": "d00ca185e0f57a0d97b757dc6d6da125f472f697", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE0OTEyMg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422149122", "bodyText": "We open the sub-channel when it exists on click. On long-click we want to open the parent channel, but only if it has a sub-channel, as you could just click when it doesn't have a sub-channel to open the parent channel.", "author": "wb9688", "createdAt": "2020-05-08T13:40:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjEzODM0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE1MjQ3MA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422152470", "bodyText": "Oh, I see, sorry", "author": "Stypox", "createdAt": "2020-05-08T13:47:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjEzODM0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE0MjQ1NA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422142454", "bodyText": "Shouldn't you also hide subChannelThumb? just to be sure that it is gone, because I think it could happen (i.e. when restoring instance) that handleResult is called twice and with different results, thus possibly resulting in wrongly showing the thumbnail left behind from the previous call. Not sure though if this is really an issue, but this is already the implemented behaviour with uploaderThumb", "author": "Stypox", "createdAt": "2020-05-08T13:28:10Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1127,13 +1155,17 @@ public void handleResult(@NonNull final StreamInfo info) {\n         animateView(thumbnailPlayButton, true, 200);\n         videoTitleTextView.setText(name);\n \n-        if (!TextUtils.isEmpty(info.getUploaderName())) {\n-            uploaderTextView.setText(info.getUploaderName());\n-            uploaderTextView.setVisibility(View.VISIBLE);\n-            uploaderTextView.setSelected(true);\n+        if (!TextUtils.isEmpty(info.getSubChannelName())) {\n+            displayBothUploaderAndSubChannel(info);\n+            subChannelThumb.setVisibility(View.VISIBLE);\n+        } else if (!TextUtils.isEmpty(info.getUploaderName())) {\n+            displayUploaderAsSubChannel(info);\n         } else {\n             uploaderTextView.setVisibility(View.GONE);\n+            uploaderThumb.setVisibility(View.GONE);", "originalCommit": "d00ca185e0f57a0d97b757dc6d6da125f472f697", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE0OTU3Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422149572", "bodyText": "I didn't do that, as it's gone by default in the .xml, so I thought that's not needed.", "author": "wb9688", "createdAt": "2020-05-08T13:41:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE0MjQ1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE1Mzg5OQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422153899", "bodyText": "Mmmh ok, it not the best to have hardcoded default values for things that could possibly be used multiple times, but maybe we can ignore it since if we were to make videodetailfragment reusable it would mean changing many things, so I guess this is just not important", "author": "Stypox", "createdAt": "2020-05-08T13:49:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE0MjQ1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE0NTA5Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422145092", "bodyText": "Also hide headerSubChannelAvatarView", "author": "Stypox", "createdAt": "2020-05-08T13:33:03Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/list/channel/ChannelFragment.java", "diffHunk": "@@ -425,6 +474,17 @@ public void handleResult(@NonNull final ChannelInfo result) {\n             headerSubscribersTextView.setText(R.string.subscribers_count_not_available);\n         }\n \n+        if (!TextUtils.isEmpty(currentInfo.getSubChannelName())) {\n+            headerSubChannelTitleView.setText(String.format(\n+                            getString(R.string.channel_created_by),\n+                            currentInfo.getSubChannelName())\n+            );\n+            headerSubChannelTitleView.setVisibility(View.VISIBLE);\n+            headerSubChannelAvatarView.setVisibility(View.VISIBLE);\n+        } else {\n+            headerSubChannelTitleView.setVisibility(View.GONE);", "originalCommit": "d00ca185e0f57a0d97b757dc6d6da125f472f697", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE0ODIyMQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422148221", "bodyText": "I didn't do that, as it's gone by default in the .xml, so I thought that's not needed.", "author": "wb9688", "createdAt": "2020-05-08T13:39:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE0NTA5Mg=="}], "type": "inlineReview"}, {"oid": "235394d96cbe167be17be32b072226ae45e055ea", "url": "https://github.com/TeamNewPipe/NewPipe/commit/235394d96cbe167be17be32b072226ae45e055ea", "message": "Don't show sub-channel thumbnail by default", "committedDate": "2020-05-08T13:51:21Z", "type": "commit"}, {"oid": "1096ec1c099a4b8999616d07b8a174d27ed3c9af", "url": "https://github.com/TeamNewPipe/NewPipe/commit/1096ec1c099a4b8999616d07b8a174d27ed3c9af", "message": "Adjust sub-channel thumbnail size", "committedDate": "2020-05-08T13:51:21Z", "type": "commit"}, {"oid": "1096ec1c099a4b8999616d07b8a174d27ed3c9af", "url": "https://github.com/TeamNewPipe/NewPipe/commit/1096ec1c099a4b8999616d07b8a174d27ed3c9af", "message": "Adjust sub-channel thumbnail size", "committedDate": "2020-05-08T13:51:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIxOTk4OQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422219989", "bodyText": "why is this a warning? Apart from that, this info should only be put in the log in debug apks", "author": "TobiGr", "createdAt": "2020-05-08T15:48:58Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -463,6 +474,15 @@ public boolean onLongClick(final View v) {\n             case R.id.detail_controls_download:\n                 NavigationHelper.openDownloads(getActivity());\n                 break;\n+\n+            case R.id.detail_uploader_root_layout:\n+                if (TextUtils.isEmpty(currentInfo.getSubChannelUrl())) {\n+                    Log.w(TAG,", "originalCommit": "1096ec1c099a4b8999616d07b8a174d27ed3c9af", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMDY4Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3430#discussion_r422220682", "bodyText": "same here", "author": "TobiGr", "createdAt": "2020-05-08T15:50:12Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/list/channel/ChannelFragment.java", "diffHunk": "@@ -394,6 +410,36 @@ private void updateSubscribeButton(final boolean isSubscribed) {\n         return ExtractorHelper.getChannelInfo(serviceId, url, forceLoad);\n     }\n \n+    /*//////////////////////////////////////////////////////////////////////////\n+    // OnClick\n+    //////////////////////////////////////////////////////////////////////////*/\n+\n+    @Override\n+    public void onClick(final View v) {\n+        if (isLoading.get() || currentInfo == null) {\n+            return;\n+        }\n+\n+        switch (v.getId()) {\n+            case R.id.sub_channel_avatar_view:\n+            case R.id.sub_channel_title_view:\n+                if (TextUtils.isEmpty(currentInfo.getSubChannelUrl())) {\n+                    Log.w(TAG, \"Can't open sub-channel because we got no channel URL\");", "originalCommit": "1096ec1c099a4b8999616d07b8a174d27ed3c9af", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ae437b1510e7b83b2d40df8704192c4e3e57a200", "url": "https://github.com/TeamNewPipe/NewPipe/commit/ae437b1510e7b83b2d40df8704192c4e3e57a200", "message": "Bump NewPipeExtractor", "committedDate": "2020-05-08T16:07:52Z", "type": "commit"}, {"oid": "ae437b1510e7b83b2d40df8704192c4e3e57a200", "url": "https://github.com/TeamNewPipe/NewPipe/commit/ae437b1510e7b83b2d40df8704192c4e3e57a200", "message": "Bump NewPipeExtractor", "committedDate": "2020-05-08T16:07:52Z", "type": "forcePushed"}]}