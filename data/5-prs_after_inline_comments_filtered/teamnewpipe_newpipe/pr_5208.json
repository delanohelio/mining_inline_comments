{"pr_number": 5208, "pr_title": "Remove pbj=1 parameter from YouYube urls in recaptcha activity", "pr_createdAt": "2020-12-17T15:37:32Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/5208", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDAxNw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545250017", "bodyText": "The method should be renamed.\nFor me a getter should only get a value and not modify it in between. If you only read the line above final String url = getUrlFromIntent(); and not the implementation itself, it could cause confusion down the line", "author": "XiangRongLin", "createdAt": "2020-12-17T17:01:45Z", "path": "app/src/main/java/org/schabi/newpipe/ReCaptchaActivity.java", "diffHunk": "@@ -155,6 +150,16 @@ public boolean onOptionsItemSelected(final MenuItem item) {\n         }\n     }\n \n+    private String getUrlFromIntent() {", "originalCommit": "fb1eb3176de1d9504a4b4a7897f5b1a71fbb21d5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI4MTg1MA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545281850", "bodyText": "Ok, I will change the signature and add a test for it", "author": "Stypox", "createdAt": "2020-12-17T17:46:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDAxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MDI1Nw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545360257", "bodyText": "Something like resolveUrlFromIntent would be ok or any other verb that fits", "author": "XiangRongLin", "createdAt": "2020-12-17T19:50:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDAxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDIyOA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545250228", "bodyText": "This looks like it would break urls like www.host.com/?pbj=1&otherparam=2 by turning it to www.host.com/otherparam=2", "author": "XiangRongLin", "createdAt": "2020-12-17T17:02:02Z", "path": "app/src/main/java/org/schabi/newpipe/ReCaptchaActivity.java", "diffHunk": "@@ -155,6 +150,16 @@ public boolean onOptionsItemSelected(final MenuItem item) {\n         }\n     }\n \n+    private String getUrlFromIntent() {\n+        final String url = getIntent().getStringExtra(RECAPTCHA_URL_EXTRA);\n+        if (url == null || url.isEmpty()) {\n+            return YT_URL; // YouTube is the most likely service to have thrown a recaptcha\n+        } else {\n+            // remove \"pbj=1\" parameter from YouYube urls, as it makes the page JSON and not HTML\n+            return url.replace(\"&pbj=1\", \"\").replace(\"?pbj=1&\", \"\").replace(\"?pbj=1\", \"\");", "originalCommit": "fb1eb3176de1d9504a4b4a7897f5b1a71fbb21d5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI4MTA5Nw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5208#discussion_r545281097", "bodyText": "Oh, I accidentally left an additional ? in there", "author": "Stypox", "createdAt": "2020-12-17T17:46:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI1MDIyOA=="}], "type": "inlineReview"}, {"oid": "10f79e13070b6e858b92a0bcfd55b32240e13197", "url": "https://github.com/TeamNewPipe/NewPipe/commit/10f79e13070b6e858b92a0bcfd55b32240e13197", "message": "Remove pbj=1 parameter from YouYube urls in recaptcha activity", "committedDate": "2020-12-17T20:02:13Z", "type": "commit"}, {"oid": "10f79e13070b6e858b92a0bcfd55b32240e13197", "url": "https://github.com/TeamNewPipe/NewPipe/commit/10f79e13070b6e858b92a0bcfd55b32240e13197", "message": "Remove pbj=1 parameter from YouYube urls in recaptcha activity", "committedDate": "2020-12-17T20:02:13Z", "type": "forcePushed"}]}