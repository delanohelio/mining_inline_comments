{"pr_number": 3271, "pr_title": "Use vector drawables instead of PNGs for material icons", "pr_createdAt": "2020-03-25T15:26:20Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/3271", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAxMDA4MA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3271#discussion_r398010080", "bodyText": "I wasn't aware of ThemeHelper.resolveResourceIdFromAttr (and it seems like the one who first put the button, and the reviewers too),\nyou should rebase, because it was changed two days ago, now both muted and unmuted use theme.", "author": "B0pol", "createdAt": "2020-03-25T16:50:19Z", "path": "app/src/main/java/org/schabi/newpipe/player/ServicePlayerActivity.java", "diffHunk": "@@ -700,11 +699,9 @@ private void onMaybeMuteChanged() {\n             item.setTitle(player.isMuted() ? R.string.unmute : R.string.mute);\n \n             //2) Icon change accordingly to current App Theme\n-            TypedArray a = getTheme().obtainStyledAttributes(R.style.Theme_AppCompat, new int[]{R.attr.volume_off});\n-            int attributeResourceId = a.getResourceId(0, 0);\n-            Drawable drawableMuted = getResources().getDrawable(attributeResourceId);\n-            Drawable drawableUnmuted = getResources().getDrawable(R.drawable.ic_volume_off_gray_24dp);\n-            item.setIcon(player.isMuted() ? drawableMuted : drawableUnmuted);\n+            item.setIcon(player.isMuted()\n+                    ? getResources().getDrawable(ThemeHelper.resolveResourceIdFromAttr(getApplicationContext(), R.attr.ic_volume_off))", "originalCommit": "35f6dff09a33c33d0c6ab0901a6f2bc8facd86ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODExODEyNQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3271#discussion_r398118125", "bodyText": "Done, is it ok now?", "author": "Stypox", "createdAt": "2020-03-25T19:34:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAxMDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEyNTc3Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3271#discussion_r398125772", "bodyText": "I haven't tested yet but the code seems ok", "author": "B0pol", "createdAt": "2020-03-25T19:48:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAxMDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE4Nzg0MQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3271#discussion_r398187841", "bodyText": "I tested and it worked as expected. Though for now do not test this PR as it is not ready ;-)", "author": "Stypox", "createdAt": "2020-03-25T21:41:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAxMDA4MA=="}], "type": "inlineReview"}, {"oid": "e12f4b378c13afbfa7a4d7d4edf6b18282cde0c9", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e12f4b378c13afbfa7a4d7d4edf6b18282cde0c9", "message": "Use vector drawables instead of PNGs for material icons\n\nFor all manually-created images PNG have been kept.\n- rename all icon attrs to have a `ic_` prefix\n- always use `_24dp` icons, because there is no real difference, since they are vector drawables\n- always use the original name found on material.io for icon drawables, as to not create confusion and possibly duplicates. Icon names can still be different from real drawable names, though I have made some of them compliant to this or maybe more meaningul.\n- remove duplicate `getIconByAttr()` in ThemeHelper (use `resolveResourceIdFromAttr()`\n- use standard icons for `expand_more` and `expand_less` instead of triangles\n- use `play_button_outline` instead of custom PNG as play button in VideoDetailFragment (questionable, as there is no shadow anymore)", "committedDate": "2020-03-25T19:33:43Z", "type": "forcePushed"}, {"oid": "63e3cd206fa6231d746e1bc001b561f4978bddf6", "url": "https://github.com/TeamNewPipe/NewPipe/commit/63e3cd206fa6231d746e1bc001b561f4978bddf6", "message": "Use AppCompatImageView in popup player", "committedDate": "2020-03-31T10:48:01Z", "type": "forcePushed"}, {"oid": "27e059dd3c329748415dc0821a7b8c81ee6dc542", "url": "https://github.com/TeamNewPipe/NewPipe/commit/27e059dd3c329748415dc0821a7b8c81ee6dc542", "message": "Fix choice dialogs on API 19 by manually getting drawable", "committedDate": "2020-04-01T13:15:38Z", "type": "forcePushed"}, {"oid": "47ae2e46cef2c6159e505b4bb6218615374897a6", "url": "https://github.com/TeamNewPipe/NewPipe/commit/47ae2e46cef2c6159e505b4bb6218615374897a6", "message": "Use app:srcCompat and derivatives intead of android: ones\n\nTo fix crashes on API 19", "committedDate": "2020-04-01T13:50:04Z", "type": "forcePushed"}, {"oid": "1363fc96e3358d6e59c40fcecd7b010a32a59ba3", "url": "https://github.com/TeamNewPipe/NewPipe/commit/1363fc96e3358d6e59c40fcecd7b010a32a59ba3", "message": "Use app:srcCompat and derivatives intead of android: ones\n\nTo fix crashes on API 19", "committedDate": "2020-04-01T17:03:51Z", "type": "forcePushed"}, {"oid": "7b91ba165ffedd0fa74a2d7fdd431b8b91bde704", "url": "https://github.com/TeamNewPipe/NewPipe/commit/7b91ba165ffedd0fa74a2d7fdd431b8b91bde704", "message": "Fix pause used instead of play in paused popup player when seeking\n\nAlso use `setBackgroundResource` to automatically obtain PNG drawables (from exoplayer)", "committedDate": "2020-04-01T20:34:22Z", "type": "forcePushed"}, {"oid": "4bd8822bc8731b9e9ac53c5e8e72584f42f107f4", "url": "https://github.com/TeamNewPipe/NewPipe/commit/4bd8822bc8731b9e9ac53c5e8e72584f42f107f4", "message": "Fix checkstyle issues and a rebase oversight", "committedDate": "2020-04-06T19:07:16Z", "type": "forcePushed"}, {"oid": "1c037416353fc268818f3e006aaad4bc9b6423ee", "url": "https://github.com/TeamNewPipe/NewPipe/commit/1c037416353fc268818f3e006aaad4bc9b6423ee", "message": "Fix checkstyle issues and a rebase oversight", "committedDate": "2020-04-10T20:38:01Z", "type": "forcePushed"}, {"oid": "ad4cfc9ac9ae799fa6f83983cc0744227c9d18a0", "url": "https://github.com/TeamNewPipe/NewPipe/commit/ad4cfc9ac9ae799fa6f83983cc0744227c9d18a0", "message": "Fix checkstyle issues and a rebase oversight", "committedDate": "2020-05-06T19:13:50Z", "type": "forcePushed"}, {"oid": "1aef2f7ae038c02f3744aee9871bbd911ac65da9", "url": "https://github.com/TeamNewPipe/NewPipe/commit/1aef2f7ae038c02f3744aee9871bbd911ac65da9", "message": "Fix checkstyle issues and a rebase oversight", "committedDate": "2020-05-09T14:13:58Z", "type": "forcePushed"}, {"oid": "9d338d01030636dd767185a9d8eee3e87552d066", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9d338d01030636dd767185a9d8eee3e87552d066", "message": "Fix checkstyle issues and a rebase oversight", "committedDate": "2020-05-09T14:19:28Z", "type": "forcePushed"}, {"oid": "86f3e0ee258898604eb1301f44bfb7a6f0b7d98b", "url": "https://github.com/TeamNewPipe/NewPipe/commit/86f3e0ee258898604eb1301f44bfb7a6f0b7d98b", "message": "Fix checkstyle issues", "committedDate": "2020-05-09T19:13:17Z", "type": "forcePushed"}, {"oid": "58b20b884a18626331ec9c19a8506c284f024a4a", "url": "https://github.com/TeamNewPipe/NewPipe/commit/58b20b884a18626331ec9c19a8506c284f024a4a", "message": "Fix checkstyle issues", "committedDate": "2020-05-11T08:25:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MzI1OA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3271#discussion_r426183258", "bodyText": "that var is unused now.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    boolean isLight = ThemeHelper.isLightThemeSelected(getActivity());", "author": "TobiGr", "createdAt": "2020-05-16T19:26:01Z", "path": "app/src/main/java/org/schabi/newpipe/download/DownloadDialog.java", "diffHunk": "@@ -399,8 +399,8 @@ private void initToolbar(final Toolbar toolbar) {\n         boolean isLight = ThemeHelper.isLightThemeSelected(getActivity());", "originalCommit": "edf9240b5ebd0ca9c6310d1d5dc5e2b6d0c80dd8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "360c3212b90faf173554ab273ce5eaf2e26d242d", "url": "https://github.com/TeamNewPipe/NewPipe/commit/360c3212b90faf173554ab273ce5eaf2e26d242d", "message": "Add shadow behind play icon in video detail fragment", "committedDate": "2020-05-17T11:58:49Z", "type": "forcePushed"}, {"oid": "5032f9e270a084917e682b578c6ab84cfc37e756", "url": "https://github.com/TeamNewPipe/NewPipe/commit/5032f9e270a084917e682b578c6ab84cfc37e756", "message": "Add shadow behind play icon in video detail fragment", "committedDate": "2020-05-17T13:13:57Z", "type": "forcePushed"}, {"oid": "644c556897d69f1aec3a505576f87e1c548691b4", "url": "https://github.com/TeamNewPipe/NewPipe/commit/644c556897d69f1aec3a505576f87e1c548691b4", "message": "Add shadow behind play icon in video detail fragment", "committedDate": "2020-05-20T18:45:06Z", "type": "forcePushed"}, {"oid": "ea43b28f740d99c326e8a94315b8e64a7368af1f", "url": "https://github.com/TeamNewPipe/NewPipe/commit/ea43b28f740d99c326e8a94315b8e64a7368af1f", "message": "Use vector drawables instead of PNGs for material icons\n\nFor all manually-created images PNG have been kept.\n- rename all icon attrs to have a `ic_` prefix\n- always use `_24dp` icons, because there is no real difference, since they are vector drawables\n- always use the original name found on material.io for icon drawables, as to not create confusion and possibly duplicates. Icon names can still be different from real drawable names, though I have made some of them compliant to this or maybe more meaningul.\n- remove duplicate `getIconByAttr()` in ThemeHelper (use `resolveResourceIdFromAttr()`\n- use standard icons for `expand_more` and `expand_less` instead of triangles\n- use `play_button_outline` instead of custom PNG as play button in VideoDetailFragment (questionable, as there is no shadow anymore)", "committedDate": "2020-05-21T13:39:35Z", "type": "commit"}, {"oid": "3dcd2468a24606be13e0104eede6dcbe1bc7e3c6", "url": "https://github.com/TeamNewPipe/NewPipe/commit/3dcd2468a24606be13e0104eede6dcbe1bc7e3c6", "message": "Use app:srcCompat and derivatives intead of android: ones\n\nTo fix crashes on API 19", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "c27a26c0aa8278df93bfed0d1c8dda55b97da2b8", "url": "https://github.com/TeamNewPipe/NewPipe/commit/c27a26c0aa8278df93bfed0d1c8dda55b97da2b8", "message": "Rename ic_hot in ic_kiosk_hot and improve getKioskIcon()", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "e0e4f6db2bc5e1be199920cb29ec7aa38afe572d", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e0e4f6db2bc5e1be199920cb29ec7aa38afe572d", "message": "Fix MainFragment tab icons did not follow theme color", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "d7f610113e7c03c3fb1697531df02757a9bc14e5", "url": "https://github.com/TeamNewPipe/NewPipe/commit/d7f610113e7c03c3fb1697531df02757a9bc14e5", "message": "Fix background player queue crashing on opening", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "631dfee763ccef458acd0ffc3165522fb6e07492", "url": "https://github.com/TeamNewPipe/NewPipe/commit/631dfee763ccef458acd0ffc3165522fb6e07492", "message": "Readd ic_close and ic_replay PNGs: needed in notifications\n\nThe other icons used in notifications are taken from exoplayer's ones: `@drawable/exo_controls_*`", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "b5c60d2be24cdf752c736eb7a3bddb4c1b5b4f25", "url": "https://github.com/TeamNewPipe/NewPipe/commit/b5c60d2be24cdf752c736eb7a3bddb4c1b5b4f25", "message": "Update AndroidX to fix icon crashes in preferences on API 19\n\nAlso remove legacy libraries\nUse `androidx.preference:preference` instead of `androidx.legacy:legacy-preference-v14` and remove `androidx.legacy:legacy-support-v4", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "b575046c05c9a47ceb856a626c79aa45933aae6e", "url": "https://github.com/TeamNewPipe/NewPipe/commit/b575046c05c9a47ceb856a626c79aa45933aae6e", "message": "Fix choice dialogs on API 19 by manually getting drawable", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "899f69d120f1a9b5b2cf1d161511618fdbadf3a4", "url": "https://github.com/TeamNewPipe/NewPipe/commit/899f69d120f1a9b5b2cf1d161511618fdbadf3a4", "message": "Fix additional empty title on tab selection fragments in API 19", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "158727e2f2d0e12688f9bc948ce7c7550fb94f07", "url": "https://github.com/TeamNewPipe/NewPipe/commit/158727e2f2d0e12688f9bc948ce7c7550fb94f07", "message": "Replace hardcoded white drawable with themed one", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "883bcc735d34f70ecb496b9d86731daf473dd9c5", "url": "https://github.com/TeamNewPipe/NewPipe/commit/883bcc735d34f70ecb496b9d86731daf473dd9c5", "message": "Fix pause used instead of play in paused popup player when seeking\n\nAlso use `setBackgroundResource` to automatically obtain PNG drawables (from exoplayer)", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "e3e202815323350bfb700016707ad18433667cf6", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e3e202815323350bfb700016707ad18433667cf6", "message": "Use AppCompatResources instead of ContextCompat", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "05ab54c30dc975b3d80830d08d19b6f4e6b62640", "url": "https://github.com/TeamNewPipe/NewPipe/commit/05ab54c30dc975b3d80830d08d19b6f4e6b62640", "message": "Fix invisible fullscreen button in popup player on API 19", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "9e57195e14cf84567e46fee7445332c36b450972", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9e57195e14cf84567e46fee7445332c36b450972", "message": "Fix checkstyle issues\n\nAlso replace all tabs with 4 spaces", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "bbd0df08d3043c2241a99d4f9ec262d4e6b9344a", "url": "https://github.com/TeamNewPipe/NewPipe/commit/bbd0df08d3043c2241a99d4f9ec262d4e6b9344a", "message": "Add shadow behind play icon in video detail fragment", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "927a1d58e290bce6fd50b3840439490ebc40aece", "url": "https://github.com/TeamNewPipe/NewPipe/commit/927a1d58e290bce6fd50b3840439490ebc40aece", "message": "Use drop down/up instead of expand icons in drawer\n\nAs per the material guidelines", "committedDate": "2020-05-21T13:39:36Z", "type": "commit"}, {"oid": "927a1d58e290bce6fd50b3840439490ebc40aece", "url": "https://github.com/TeamNewPipe/NewPipe/commit/927a1d58e290bce6fd50b3840439490ebc40aece", "message": "Use drop down/up instead of expand icons in drawer\n\nAs per the material guidelines", "committedDate": "2020-05-21T13:39:36Z", "type": "forcePushed"}]}