{"pr_number": 416, "pr_title": "Fix khttp instrumentation in case of absent or read-only headers map", "pr_createdAt": "2020-05-19T12:06:04Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/416", "timeline": [{"oid": "3b7aab38d40afaa2e82979c870b938cd3ddb24d7", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/3b7aab38d40afaa2e82979c870b938cd3ddb24d7", "message": "Fix khttp instrumentation in case of absent or read-only headers map", "committedDate": "2020-05-19T12:05:30Z", "type": "commit"}, {"oid": "60067328616f5dec1d84245301bdff9e8212afdf", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/60067328616f5dec1d84245301bdff9e8212afdf", "message": "Merge branch 'master' into khttp-fix", "committedDate": "2020-05-19T22:27:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY0MjEwMg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/416#discussion_r427642102", "bodyText": "I don't think typing = Typing.DYNAMIC is needed since the parameter type Map is the same as the type in the matcher takesArgument(2, named(\"java.util.Map\"))", "author": "trask", "createdAt": "2020-05-19T22:44:43Z", "path": "instrumentation/khttp-0.1/src/main/java/io/opentelemetry/auto/instrumentation/khttp/KHttpAdvice.java", "diffHunk": "@@ -32,14 +32,16 @@\n import khttp.KHttp;\n import khttp.responses.Response;\n import net.bytebuddy.asm.Advice;\n+import net.bytebuddy.implementation.bytecode.assign.Assigner.Typing;\n \n public class KHttpAdvice {\n \n   @Advice.OnMethodEnter(suppress = Throwable.class)\n   public static SpanWithScope methodEnter(\n       @Advice.Argument(value = 0) String method,\n       @Advice.Argument(value = 1) String uri,\n-      @Advice.Argument(value = 2) Map<String, String> headers) {\n+      @Advice.Argument(value = 2, typing = Typing.DYNAMIC, readOnly = false)\n+          Map<String, String> headers) {", "originalCommit": "60067328616f5dec1d84245301bdff9e8212afdf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "58b4c359a37648b6bf462c65ab94f6a9d9b25b75", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/58b4c359a37648b6bf462c65ab94f6a9d9b25b75", "message": "Unnecessary conf removed", "committedDate": "2020-05-20T09:35:54Z", "type": "commit"}, {"oid": "5aa302a861fff75ae51442fcf62e6feacbbe2bf3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5aa302a861fff75ae51442fcf62e6feacbbe2bf3", "message": "Merge branch 'master' into khttp-fix", "committedDate": "2020-05-20T16:46:29Z", "type": "commit"}, {"oid": "6cfe48537b4d9ffa8ef78b9cad019d883775434c", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6cfe48537b4d9ffa8ef78b9cad019d883775434c", "message": "Merge branch 'master' into khttp-fix", "committedDate": "2020-05-20T20:24:28Z", "type": "commit"}]}