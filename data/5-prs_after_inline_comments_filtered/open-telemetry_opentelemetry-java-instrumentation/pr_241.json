{"pr_number": 241, "pr_title": "Better span names for kafka", "pr_createdAt": "2020-03-18T20:36:38Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241", "timeline": [{"oid": "0ba6feb218e51b65225a8f9007d8082ca02adc17", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/0ba6feb218e51b65225a8f9007d8082ca02adc17", "message": "Better span names for kafka", "committedDate": "2020-03-18T20:33:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2MjUyOA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#discussion_r394662528", "bodyText": "this else is redundant, since the if has a return in it.", "author": "jkwatson", "createdAt": "2020-03-18T21:56:38Z", "path": "instrumentation/kafka-clients-0.11/src/main/java/io/opentelemetry/auto/instrumentation/kafka_clients/KafkaDecorator.java", "diffHunk": "@@ -54,24 +53,35 @@ protected String getComponentName() {\n     return \"java-kafka\";\n   }\n \n-  public void onConsume(final Span span, final ConsumerRecord record) {\n+  public String spanNameOnConsume(final ConsumerRecord record) {\n+    final String topic = record.topic();\n+    if (topic != null) {\n+      return topic;\n+    } else {", "originalCommit": "0ba6feb218e51b65225a8f9007d8082ca02adc17", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NDI1MA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#discussion_r394664250", "bodyText": "I actually like this flow personally. Do we have a style guide that we can refer to for these kinds of style decisions?", "author": "trask", "createdAt": "2020-03-18T22:00:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2MjUyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NjI4Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#discussion_r394666283", "bodyText": "It doesn't look like the google style guide has anything to say on the subject. Up to you, I guess.", "author": "jkwatson", "createdAt": "2020-03-18T22:05:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2MjUyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgwNjA1Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#discussion_r394806052", "bodyText": "Could also replace with a ternary operator.", "author": "tylerbenson", "createdAt": "2020-03-19T05:59:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2MjUyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NzAzMg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#discussion_r394667032", "bodyText": "just curious (not trying to be critical), but why wouldn't you put the else block in this case, but you would below?", "author": "jkwatson", "createdAt": "2020-03-18T22:07:25Z", "path": "instrumentation/kafka-streams-0.11/src/main/java/io/opentelemetry/auto/instrumentation/kafka_streams/KafkaStreamsDecorator.java", "diffHunk": "@@ -44,10 +43,20 @@ protected String getSpanType() {\n     return SpanTypes.MESSAGE_CONSUMER;\n   }\n \n+  public String spanNameForConsume(final StampedRecord record) {\n+    if (record == null) {\n+      return null;\n+    }\n+    final String topic = record.topic();", "originalCommit": "0ba6feb218e51b65225a8f9007d8082ca02adc17", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2OTE1OA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#discussion_r394669158", "bodyText": "My logic \ud83d\ude04 is that at the top of a method, you are short-circuiting execution.\nAt the bottom of the method you are returning a value.", "author": "trask", "createdAt": "2020-03-18T22:12:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NzAzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY3MDY3OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/241#discussion_r394670679", "bodyText": "ok! I vaguely see the distinction, but don't like sliding down that slope.  ;)", "author": "jkwatson", "createdAt": "2020-03-18T22:16:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NzAzMg=="}], "type": "inlineReview"}, {"oid": "e004e6cbfd94d27eeaf52d07312059b373a5a4c7", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e004e6cbfd94d27eeaf52d07312059b373a5a4c7", "message": "Merge branch 'master' into better-span-names-kafka", "committedDate": "2020-03-18T22:18:09Z", "type": "commit"}]}