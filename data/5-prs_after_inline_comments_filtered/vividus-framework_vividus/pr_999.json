{"pr_number": 999, "pr_title": "Add ability to use composite steps in known-issues", "pr_createdAt": "2020-10-07T14:05:13Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/999", "timeline": [{"oid": "869cfd45a509b3c937cf0a941ec1107916152dd6", "url": "https://github.com/vividus-framework/vividus/commit/869cfd45a509b3c937cf0a941ec1107916152dd6", "message": "FIX", "committedDate": "2020-10-13T11:15:18Z", "type": "forcePushed"}, {"oid": "69f1da184076f6362f10597240204d209f0b7fe0", "url": "https://github.com/vividus-framework/vividus/commit/69f1da184076f6362f10597240204d209f0b7fe0", "message": "FIX", "committedDate": "2020-10-14T12:25:19Z", "type": "forcePushed"}, {"oid": "05713fd0541ac7adf79218182f31a7c80017c347", "url": "https://github.com/vividus-framework/vividus/commit/05713fd0541ac7adf79218182f31a7c80017c347", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-15T10:46:27Z", "type": "forcePushed"}, {"oid": "3629d5920eea40b302b6d235ba566eb748e47055", "url": "https://github.com/vividus-framework/vividus/commit/3629d5920eea40b302b6d235ba566eb748e47055", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-15T11:05:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NTEyNg==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r505475126", "bodyText": "I propose to use Deque", "author": "valfirst", "createdAt": "2020-10-15T11:43:59Z", "path": "vividus-soft-assert/src/main/java/org/vividus/softassert/issue/TestInfo.java", "diffHunk": "@@ -16,11 +16,13 @@\n \n package org.vividus.softassert.issue;\n \n+import java.util.List;\n+\n public class TestInfo\n {\n     private String testSuite;\n     private String testCase;\n-    private String testStep;\n+    private List<String> testSteps;", "originalCommit": "3629d5920eea40b302b6d235ba566eb748e47055", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NjIxNw==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r505476217", "bodyText": "when can testInfo.getTestSteps() be null?", "author": "valfirst", "createdAt": "2020-10-15T11:45:58Z", "path": "vividus-soft-assert/src/main/java/org/vividus/softassert/issue/KnownIssueChecker.java", "diffHunk": "@@ -142,8 +142,10 @@ boolean isPotentiallyKnown(KnownIssueIdentifier knownIssueIdentifier)\n             return testInfo != null && (\n                     isPotentiallyKnown(testInfo.getTestSuite(), knownIssueIdentifier.getTestSuiteCompiledPattern())\n                             || isPotentiallyKnown(testInfo.getTestCase(),\n-                            knownIssueIdentifier.getTestCaseCompiledPattern()) || isPotentiallyKnown(\n-                            testInfo.getTestStep(), knownIssueIdentifier.getTestStepCompiledPattern()));\n+                            knownIssueIdentifier.getTestCaseCompiledPattern())\n+                            || (testInfo.getTestSteps() != null && !testInfo.getTestSteps().stream()", "originalCommit": "3629d5920eea40b302b6d235ba566eb748e47055", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE3MDA4NA==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r506170084", "bodyText": "I think no, changed (in tests also)", "author": "abudevich", "createdAt": "2020-10-16T08:31:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NjIxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NjYxOA==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r505476618", "bodyText": "I propose to use Deque", "author": "valfirst", "createdAt": "2020-10-15T11:46:45Z", "path": "vividus/src/main/java/org/vividus/bdd/CompositeStepReporter.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd;\n+\n+import java.util.Stack;\n+\n+import org.vividus.bdd.context.IBddRunContext;\n+\n+public class CompositeStepReporter extends ChainedStoryReporter\n+{\n+    private IBddRunContext bddRunContext;\n+\n+    private Stack<String> steps = new Stack<>();", "originalCommit": "3629d5920eea40b302b6d235ba566eb748e47055", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NzIzMA==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r505477230", "bodyText": "Also I think this logic should be moved to BddRunContext", "author": "valfirst", "createdAt": "2020-10-15T11:47:54Z", "path": "vividus/src/main/java/org/vividus/bdd/CompositeStepReporter.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd;\n+\n+import java.util.Stack;\n+\n+import org.vividus.bdd.context.IBddRunContext;\n+\n+public class CompositeStepReporter extends ChainedStoryReporter\n+{\n+    private IBddRunContext bddRunContext;\n+\n+    private Stack<String> steps = new Stack<>();", "originalCommit": "3629d5920eea40b302b6d235ba566eb748e47055", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a019131169c68e1e55c9c7978f6f77dc93a07eac", "url": "https://github.com/vividus-framework/vividus/commit/a019131169c68e1e55c9c7978f6f77dc93a07eac", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-16T07:57:45Z", "type": "forcePushed"}, {"oid": "c7c00dd77c0e794471bd1e817e230e2a8a3b4e49", "url": "https://github.com/vividus-framework/vividus/commit/c7c00dd77c0e794471bd1e817e230e2a8a3b4e49", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-16T08:24:57Z", "type": "forcePushed"}, {"oid": "bab502f15ff85e3a378c1b7f22df5a398b8581ba", "url": "https://github.com/vividus-framework/vividus/commit/bab502f15ff85e3a378c1b7f22df5a398b8581ba", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-16T10:53:05Z", "type": "forcePushed"}, {"oid": "958d13612abc878a18916b29e79676acf526607a", "url": "https://github.com/vividus-framework/vividus/commit/958d13612abc878a18916b29e79676acf526607a", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-16T12:16:00Z", "type": "forcePushed"}, {"oid": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "url": "https://github.com/vividus-framework/vividus/commit/8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-16T12:18:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUxNzE5Ng==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r506517196", "bodyText": "it's not thread-safe, this field should be a part of RunningStory class and it should replace String runningStep field: private Deque<String> runningSteps = new LinkedList<>();", "author": "valfirst", "createdAt": "2020-10-16T14:59:49Z", "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/context/BddRunContext.java", "diffHunk": "@@ -31,6 +31,7 @@\n \n     // must be initialized for jbehave-junit-runner\n     private Optional<String> runningBatchKey = Optional.of(\"batch-1\");\n+    private Deque<String> steps = new LinkedList<>();", "originalCommit": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUxODA4MQ==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r506518081", "bodyText": "the formatting could be improved a bit for better readability", "author": "valfirst", "createdAt": "2020-10-16T15:00:30Z", "path": "vividus-soft-assert/src/main/java/org/vividus/softassert/issue/KnownIssueChecker.java", "diffHunk": "@@ -142,8 +142,10 @@ boolean isPotentiallyKnown(KnownIssueIdentifier knownIssueIdentifier)\n             return testInfo != null && (\n                     isPotentiallyKnown(testInfo.getTestSuite(), knownIssueIdentifier.getTestSuiteCompiledPattern())\n                             || isPotentiallyKnown(testInfo.getTestCase(),\n-                            knownIssueIdentifier.getTestCaseCompiledPattern()) || isPotentiallyKnown(\n-                            testInfo.getTestStep(), knownIssueIdentifier.getTestStepCompiledPattern()));\n+                            knownIssueIdentifier.getTestCaseCompiledPattern())\n+                            || !testInfo.getTestSteps().stream()\n+                                .anyMatch(s -> !isPotentiallyKnown(s,\n+                                        knownIssueIdentifier.getTestStepCompiledPattern())));", "originalCommit": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUyMzUwNg==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r506523506", "bodyText": "the logic of this class should be fully merged into org.vividus.bdd.RunContextStoryReporter", "author": "valfirst", "createdAt": "2020-10-16T15:05:03Z", "path": "vividus/src/main/java/org/vividus/bdd/CompositeStepReporter.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd;\n+\n+import javax.inject.Inject;\n+\n+import org.vividus.bdd.context.BddRunContext;\n+\n+public class CompositeStepReporter extends ChainedStoryReporter", "originalCommit": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUyNDkyNA==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r506524924", "bodyText": "use constructor to inject the field", "author": "valfirst", "createdAt": "2020-10-16T15:06:15Z", "path": "vividus/src/main/java/org/vividus/bdd/issue/TestInfoProvider.java", "diffHunk": "@@ -18,16 +18,19 @@\n \n import java.util.Optional;\n \n+import javax.inject.Inject;\n+\n import org.jbehave.core.model.Scenario;\n-import org.vividus.bdd.context.IBddRunContext;\n+import org.vividus.bdd.context.BddRunContext;\n import org.vividus.bdd.model.RunningScenario;\n import org.vividus.bdd.model.RunningStory;\n import org.vividus.softassert.issue.ITestInfoProvider;\n import org.vividus.softassert.issue.TestInfo;\n \n public class TestInfoProvider implements ITestInfoProvider\n {\n-    private IBddRunContext bddRunContext;\n+    @Inject\n+    private BddRunContext bddRunContext;", "originalCommit": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bbaa5d7cb05843839cde4efc70756268369667d7", "url": "https://github.com/vividus-framework/vividus/commit/bbaa5d7cb05843839cde4efc70756268369667d7", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-19T08:49:37Z", "type": "forcePushed"}, {"oid": "65ab8f5b8482700346227dd2addf4095b0d359ae", "url": "https://github.com/vividus-framework/vividus/commit/65ab8f5b8482700346227dd2addf4095b0d359ae", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-19T09:19:30Z", "type": "forcePushed"}, {"oid": "0e146c4fbc8d127a0daa0f6c87294c8b16f0a7d8", "url": "https://github.com/vividus-framework/vividus/commit/0e146c4fbc8d127a0daa0f6c87294c8b16f0a7d8", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-19T09:25:53Z", "type": "forcePushed"}, {"oid": "2cda218ba836acd9bc1d8e106a47d161dd2e80f9", "url": "https://github.com/vividus-framework/vividus/commit/2cda218ba836acd9bc1d8e106a47d161dd2e80f9", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-19T10:38:22Z", "type": "forcePushed"}, {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2", "url": "https://github.com/vividus-framework/vividus/commit/5858b412e39a4b71e1923c63a90f3247563b49d2", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-19T10:45:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcwMjUwNg==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507702506", "bodyText": "why are these methods removed? each method indicates completion of the step", "author": "valfirst", "createdAt": "2020-10-19T12:23:32Z", "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/RunContextStoryReporter.java", "diffHunk": "@@ -67,51 +67,22 @@ public void afterScenario()\n     @Override\n     public void beforeStep(String step)\n     {\n-        bddRunContext.getRunningStory().setRunningStep(step);\n+        bddRunContext.getRunningStory().addRunningStep(step);\n         super.beforeStep(step);\n     }\n \n     @Override\n     public void successful(String step)\n     {\n+        bddRunContext.getRunningStory().removeRunningStep();\n         super.successful(step);\n-        finishStep();\n     }\n \n     @Override\n     public void failed(String step, Throwable cause)\n     {\n         super.failed(step, cause);\n         bddRunContext.getRunningStory().fail();\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void ignorable(String step)\n-    {\n-        super.ignorable(step);\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void comment(String step)\n-    {\n-        super.comment(step);\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void pending(String step)\n-    {\n-        super.pending(step);\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void notPerformed(String step)\n-    {\n-        super.notPerformed(step);\n-        finishStep();", "originalCommit": "5858b412e39a4b71e1923c63a90f3247563b49d2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1MTQ0OA==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507851448", "bodyText": "I'm not sure, that still needed override these methods and use finishStep() inside. Every step go through beforeStep() -> successful() -> execution -> KnownIssueChecker methods, and at the moment, when step appears in one of methods higher, it's already not running step.", "author": "abudevich", "createdAt": "2020-10-19T15:36:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcwMjUwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg2MTQ0Mg==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507861442", "bodyText": "Agree about:\n\nignorable\ncomment\npending\nnotPerformed\n\nbut as for failed I believe we need to removeRunningStep, what do you think?", "author": "valfirst", "createdAt": "2020-10-19T15:48:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcwMjUwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg3ODgxMg==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507878812", "bodyText": "Maybe no, because when we go to failed() method runningSteps deque is empty", "author": "abudevich", "createdAt": "2020-10-19T16:12:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcwMjUwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM1NjUzMA==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r508356530", "bodyText": "Yes, it will be for case with broken step", "author": "abudevich", "createdAt": "2020-10-20T09:39:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcwMjUwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0MDEzOQ==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507740139", "bodyText": "addRunningStep -> putRunningStep", "author": "valfirst", "createdAt": "2020-10-19T13:21:08Z", "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.removeLast();\n     }\n \n-    public void setRunningStep(String runningStep)\n+    public void addRunningStep(String runningStep)", "originalCommit": "5858b412e39a4b71e1923c63a90f3247563b49d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0MDMxMQ==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507740311", "bodyText": "pop()", "author": "valfirst", "createdAt": "2020-10-19T13:21:15Z", "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.removeLast();", "originalCommit": "5858b412e39a4b71e1923c63a90f3247563b49d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0MDc2NQ==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507740765", "bodyText": "push(runningStep)", "author": "valfirst", "createdAt": "2020-10-19T13:21:44Z", "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.removeLast();\n     }\n \n-    public void setRunningStep(String runningStep)\n+    public void addRunningStep(String runningStep)\n     {\n-        this.runningStep = runningStep;\n+        runningSteps.addLast(runningStep);", "originalCommit": "5858b412e39a4b71e1923c63a90f3247563b49d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0MjEzNg==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507742136", "bodyText": "it should go after super.successful(step);", "author": "valfirst", "createdAt": "2020-10-19T13:23:41Z", "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/RunContextStoryReporter.java", "diffHunk": "@@ -67,51 +67,22 @@ public void afterScenario()\n     @Override\n     public void beforeStep(String step)\n     {\n-        bddRunContext.getRunningStory().setRunningStep(step);\n+        bddRunContext.getRunningStory().addRunningStep(step);\n         super.beforeStep(step);\n     }\n \n     @Override\n     public void successful(String step)\n     {\n+        bddRunContext.getRunningStory().removeRunningStep();", "originalCommit": "5858b412e39a4b71e1923c63a90f3247563b49d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "335641d7c6d8975f038b368f3862fdbe86ce8b49", "url": "https://github.com/vividus-framework/vividus/commit/335641d7c6d8975f038b368f3862fdbe86ce8b49", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-19T14:31:00Z", "type": "forcePushed"}, {"oid": "4741fbbf3ac342f9ef31f6af45c4450fea283db8", "url": "https://github.com/vividus-framework/vividus/commit/4741fbbf3ac342f9ef31f6af45c4450fea283db8", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-19T15:09:23Z", "type": "forcePushed"}, {"oid": "6ef3d2a713735a2786a860a277e85fe1688fcfb2", "url": "https://github.com/vividus-framework/vividus/commit/6ef3d2a713735a2786a860a277e85fe1688fcfb2", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-20T09:38:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM2MDM5Mw==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r508360393", "bodyText": "return a defensive copy:\nnew LinkedList<>(runningSteps);", "author": "valfirst", "createdAt": "2020-10-20T09:44:55Z", "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.pollLast();\n     }\n \n-    public void setRunningStep(String runningStep)\n+    public void putRunningStep(String runningStep)\n     {\n-        this.runningStep = runningStep;\n+        runningSteps.push(runningStep);\n     }\n \n     public int calculateNextVariableIndex()\n     {\n         return nextVariableIndex.incrementAndGet();\n     }\n+\n+    public Deque<String> getRunningSteps()\n+    {\n+        return runningSteps;", "originalCommit": "6ef3d2a713735a2786a860a277e85fe1688fcfb2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa", "url": "https://github.com/vividus-framework/vividus/commit/8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-20T09:50:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg0OTMwNw==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r508849307", "bodyText": "why not pop()?", "author": "valfirst", "createdAt": "2020-10-20T21:25:24Z", "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.pollLast();", "originalCommit": "8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTAyOTIyNQ==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r509029225", "bodyText": "Because pop() throws NoSuchElementException if runningSteps is empty, pollLast() returns null in this case", "author": "abudevich", "createdAt": "2020-10-21T06:50:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg0OTMwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTE1NTE3OQ==", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r509155179", "bodyText": "Changed on pollFirst()", "author": "abudevich", "createdAt": "2020-10-21T10:08:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg0OTMwNw=="}], "type": "inlineReview"}, {"oid": "5b5947c59e42873561e027a2e91c1c27f33bcfdc", "url": "https://github.com/vividus-framework/vividus/commit/5b5947c59e42873561e027a2e91c1c27f33bcfdc", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-21T10:07:40Z", "type": "commit"}, {"oid": "5b5947c59e42873561e027a2e91c1c27f33bcfdc", "url": "https://github.com/vividus-framework/vividus/commit/5b5947c59e42873561e027a2e91c1c27f33bcfdc", "message": "Add ability to use composite steps in known-issues", "committedDate": "2020-10-21T10:07:40Z", "type": "forcePushed"}]}