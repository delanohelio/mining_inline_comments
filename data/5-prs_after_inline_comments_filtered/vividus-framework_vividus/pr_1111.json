{"pr_number": 1111, "pr_title": "[plugin-mobile-app] Add configuration of appium session settings", "pr_createdAt": "2020-11-09T10:49:47Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/1111", "timeline": [{"oid": "a6b37a2576538b16fae1d253cc09defdcad66f2e", "url": "https://github.com/vividus-framework/vividus/commit/a6b37a2576538b16fae1d253cc09defdcad66f2e", "message": "[plugin-mobile-app] Add configuration of appium session settings", "committedDate": "2020-11-09T10:58:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcyMDgwNg==", "url": "https://github.com/vividus-framework/vividus/pull/1111#discussion_r519720806", "bodyText": "NamedEntry ?", "author": "valfirst", "createdAt": "2020-11-09T10:57:21Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/Entry.java", "diffHunk": "@@ -19,7 +19,7 @@\n import org.jbehave.core.annotations.AsParameters;\n \n @AsParameters\n-public class DesiredCapability\n+public class Entry", "originalCommit": "50bc87ec29b4befd5183b39801c6b478b82ef0e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcyMjM5MA==", "url": "https://github.com/vividus-framework/vividus/pull/1111#discussion_r519722390", "bodyText": "there is no much sense to create a new class, I believe a new step can be put to ApplicationSteps", "author": "valfirst", "createdAt": "2020-11-09T11:00:06Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/SessionSteps.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import static io.appium.java_client.CommandExecutionHelper.execute;\n+import static io.appium.java_client.MobileCommand.prepareArguments;\n+import static org.vividus.selenium.type.CapabilitiesValueTypeAdjuster.adjustType;\n+\n+import java.util.AbstractMap;\n+import java.util.List;\n+\n+import org.apache.commons.lang3.math.NumberUtils;\n+import org.jbehave.core.annotations.When;\n+import org.vividus.bdd.mobileapp.model.Entry;\n+import org.vividus.selenium.IWebDriverProvider;\n+\n+import io.appium.java_client.ExecutesMethod;\n+\n+public class SessionSteps", "originalCommit": "a6b37a2576538b16fae1d253cc09defdcad66f2e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcyMjczOA==", "url": "https://github.com/vividus-framework/vividus/pull/1111#discussion_r519722738", "bodyText": "java.util.Map#entry", "author": "valfirst", "createdAt": "2020-11-09T11:00:42Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/SessionSteps.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import static io.appium.java_client.CommandExecutionHelper.execute;\n+import static io.appium.java_client.MobileCommand.prepareArguments;\n+import static org.vividus.selenium.type.CapabilitiesValueTypeAdjuster.adjustType;\n+\n+import java.util.AbstractMap;\n+import java.util.List;\n+\n+import org.apache.commons.lang3.math.NumberUtils;\n+import org.jbehave.core.annotations.When;\n+import org.vividus.bdd.mobileapp.model.Entry;\n+import org.vividus.selenium.IWebDriverProvider;\n+\n+import io.appium.java_client.ExecutesMethod;\n+\n+public class SessionSteps\n+{\n+    private final IWebDriverProvider webDriverProvider;\n+\n+    public SessionSteps(IWebDriverProvider webDriverProvider)\n+    {\n+        this.webDriverProvider = webDriverProvider;\n+    }\n+\n+    /**\n+     * Change the behavior of the Appium session\n+     * @param settings Appium session settings\n+     * <br><a href=\"https://appium.io/docs/en/advanced-concepts/settings/#settings\">Settings</a> example:\n+     * <code>\n+     * <br>|name                  |value|\n+     * <br>|ignoreUnimportantViews|true |\n+     * <br>|snapshotMaxDepth      |100  |\n+     * </code>\n+     */\n+    @When(\"I change Appium session settings:$settings\")\n+    public void changeAppiumSettings(List<Entry> settings)\n+    {\n+        ExecutesMethod executesMethod = webDriverProvider.getUnwrapped(ExecutesMethod.class);\n+        settings.forEach(setting ->\n+        {\n+            String settingValue = setting.getValue();\n+            Object value = NumberUtils.isDigits(settingValue) ? Long.valueOf(settingValue) : adjustType(settingValue);\n+            execute(executesMethod, new AbstractMap.SimpleEntry<>(\"setSettings\",", "originalCommit": "a6b37a2576538b16fae1d253cc09defdcad66f2e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTc2MTczMw==", "url": "https://github.com/vividus-framework/vividus/pull/1111#discussion_r519761733", "bodyText": "is there a possibility for a bulk settings update?", "author": "ikalinin1", "createdAt": "2020-11-09T12:11:20Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/SessionSteps.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import static io.appium.java_client.CommandExecutionHelper.execute;\n+import static io.appium.java_client.MobileCommand.prepareArguments;\n+import static org.vividus.selenium.type.CapabilitiesValueTypeAdjuster.adjustType;\n+\n+import java.util.AbstractMap;\n+import java.util.List;\n+\n+import org.apache.commons.lang3.math.NumberUtils;\n+import org.jbehave.core.annotations.When;\n+import org.vividus.bdd.mobileapp.model.Entry;\n+import org.vividus.selenium.IWebDriverProvider;\n+\n+import io.appium.java_client.ExecutesMethod;\n+\n+public class SessionSteps\n+{\n+    private final IWebDriverProvider webDriverProvider;\n+\n+    public SessionSteps(IWebDriverProvider webDriverProvider)\n+    {\n+        this.webDriverProvider = webDriverProvider;\n+    }\n+\n+    /**\n+     * Change the behavior of the Appium session\n+     * @param settings Appium session settings\n+     * <br><a href=\"https://appium.io/docs/en/advanced-concepts/settings/#settings\">Settings</a> example:\n+     * <code>\n+     * <br>|name                  |value|\n+     * <br>|ignoreUnimportantViews|true |\n+     * <br>|snapshotMaxDepth      |100  |\n+     * </code>\n+     */\n+    @When(\"I change Appium session settings:$settings\")\n+    public void changeAppiumSettings(List<Entry> settings)\n+    {\n+        ExecutesMethod executesMethod = webDriverProvider.getUnwrapped(ExecutesMethod.class);\n+        settings.forEach(setting ->", "originalCommit": "a6b37a2576538b16fae1d253cc09defdcad66f2e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTc2ODY3NQ==", "url": "https://github.com/vividus-framework/vividus/pull/1111#discussion_r519768675", "bodyText": "it's possible, but as per appium java client each setting update is a separate operation https://github.com/appium/java-client/blob/v7.3.0/src/main/java/io/appium/java_client/HasSettings.java", "author": "uarlouski", "createdAt": "2020-11-09T12:24:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTc2MTczMw=="}], "type": "inlineReview"}, {"oid": "28e6e4b598e42772314b8b7c34e9516dcb56a0dd", "url": "https://github.com/vividus-framework/vividus/commit/28e6e4b598e42772314b8b7c34e9516dcb56a0dd", "message": "[plugin-mobile-app] Add configuration of appium session settings", "committedDate": "2020-11-09T12:21:37Z", "type": "forcePushed"}, {"oid": "f8a3c8a6c1484a30502dc3570d1330ab7fe3325f", "url": "https://github.com/vividus-framework/vividus/commit/f8a3c8a6c1484a30502dc3570d1330ab7fe3325f", "message": "[plugin-mobile-app] Add configuration of appium session settings", "committedDate": "2020-11-09T13:11:39Z", "type": "commit"}, {"oid": "f8a3c8a6c1484a30502dc3570d1330ab7fe3325f", "url": "https://github.com/vividus-framework/vividus/commit/f8a3c8a6c1484a30502dc3570d1330ab7fe3325f", "message": "[plugin-mobile-app] Add configuration of appium session settings", "committedDate": "2020-11-09T13:11:39Z", "type": "forcePushed"}]}