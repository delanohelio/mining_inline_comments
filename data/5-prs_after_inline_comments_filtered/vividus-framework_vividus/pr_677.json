{"pr_number": 677, "pr_title": "[plugin-rest-api] Add step to change cookie value", "pr_createdAt": "2020-06-16T08:57:10Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/677", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcxNzkwNw==", "url": "https://github.com/vividus-framework/vividus/pull/677#discussion_r440717907", "bodyText": "If several cookies with the same name exist in cookie store, the value will be changed for all of them", "author": "valfirst", "createdAt": "2020-06-16T09:34:24Z", "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpCookieSteps.java", "diffHunk": "@@ -89,4 +92,40 @@ public void saveHttpCookieIntoVariable(String cookieName, Set<VariableScope> sco\n             }\n         }\n     }\n+\n+    /**\n+     * Change cookie value.\n+     * If present several cookies with the same name will be changed value for all of them,", "originalCommit": "2fd0f4116811850568b8562ac6545d968f3b932b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcyMjMyNA==", "url": "https://github.com/vividus-framework/vividus/pull/677#discussion_r440722324", "bodyText": "move the assertion to a new method, that's going to be a method with single line of code, but it will improve overall code readability", "author": "valfirst", "createdAt": "2020-06-16T09:41:39Z", "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpCookieSteps.java", "diffHunk": "@@ -89,4 +92,40 @@ public void saveHttpCookieIntoVariable(String cookieName, Set<VariableScope> sco\n             }\n         }\n     }\n+\n+    /**\n+     * Change cookie value.\n+     * If present several cookies with the same name will be changed value for all of them,\n+     *\n+     * @param cookieName     name of cookie\n+     * @param newCookieValue value to set\n+     */\n+    @When(\"I change value of all HTTP cookies with name `$cookieName` to `$newCookieValue`\")\n+    public void changeHttpCookieValue(String cookieName, String newCookieValue)\n+    {\n+        List<Cookie> cookies = findCookiesBy(FILTER_BY_NAME, cookieName);\n+        if (softAssert.assertThat(String.format(NUMBER_OF_COOKIES_WITH_NAME, cookieName), cookies.size(),\n+                greaterThan(0)))", "originalCommit": "2fd0f4116811850568b8562ac6545d968f3b932b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA4MTA1OQ==", "url": "https://github.com/vividus-framework/vividus/pull/677#discussion_r442081059", "bodyText": "it can be inlined now", "author": "valfirst", "createdAt": "2020-06-18T09:06:55Z", "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpCookieSteps.java", "diffHunk": "@@ -34,6 +36,10 @@\n public class HttpCookieSteps\n {\n     private static final Logger LOGGER = LoggerFactory.getLogger(HttpCookieSteps.class);\n+    private static final BiPredicate<Cookie, String> FILTER_BY_NAME = (cookie, cookieName) -> cookie.getName()\n+            .equals(cookieName);\n+    private static final String NUMBER_OF_COOKIES_WITH_NAME = \"Number of cookies with name '%s'\";", "originalCommit": "6d1109dc24ca88549cae5c78c099cda4104aea99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "aba9974408b323594bfc0681e25d1a2b806f1a95", "url": "https://github.com/vividus-framework/vividus/commit/aba9974408b323594bfc0681e25d1a2b806f1a95", "message": "[plugin-rest-api] Add step to change cookie value", "committedDate": "2020-06-18T13:45:49Z", "type": "commit"}]}