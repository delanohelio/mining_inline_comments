{"pr_number": 911, "pr_title": "[plugin-mobile-app] Add tap step", "pr_createdAt": "2020-09-09T07:07:53Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/911", "timeline": [{"oid": "f8ae8ec7aa9abdc4fbffec5c5cc14c70e8479491", "url": "https://github.com/vividus-framework/vividus/commit/f8ae8ec7aa9abdc4fbffec5c5cc14c70e8479491", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-09T07:45:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQzMTI5Ng==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r485431296", "bodyText": "MobileAppElementSteps -> ActionSteps ?", "author": "valfirst", "createdAt": "2020-09-09T08:27:37Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/MobileAppElementSteps.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.WebElement;\n+import org.vividus.bdd.mobileapp.action.TapActions;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class MobileAppElementSteps", "originalCommit": "f8ae8ec7aa9abdc4fbffec5c5cc14c70e8479491", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQzMTQ1MQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r485431451", "bodyText": "logically actions should go first", "author": "valfirst", "createdAt": "2020-09-09T08:27:51Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/MobileAppElementSteps.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.WebElement;\n+import org.vividus.bdd.mobileapp.action.TapActions;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class MobileAppElementSteps\n+{\n+    private final IBaseValidations baseValidations;\n+    private final TapActions tapActions;\n+\n+    public MobileAppElementSteps(IBaseValidations baseValidations, TapActions tapActions)", "originalCommit": "f8ae8ec7aa9abdc4fbffec5c5cc14c70e8479491", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQzMTcwNg==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r485431706", "bodyText": "to locate element -> to find an element", "author": "valfirst", "createdAt": "2020-09-09T08:28:13Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/MobileAppElementSteps.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.WebElement;\n+import org.vividus.bdd.mobileapp.action.TapActions;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class MobileAppElementSteps\n+{\n+    private final IBaseValidations baseValidations;\n+    private final TapActions tapActions;\n+\n+    public MobileAppElementSteps(IBaseValidations baseValidations, TapActions tapActions)\n+    {\n+        this.baseValidations = baseValidations;\n+        this.tapActions = tapActions;\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b> with specified <b>duration</b>\n+     * @param locator locator to locate element", "originalCommit": "f8ae8ec7aa9abdc4fbffec5c5cc14c70e8479491", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQzMjA3Mw==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r485432073", "bodyText": "rework to avoid duplication", "author": "valfirst", "createdAt": "2020-09-09T08:28:44Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/MobileAppElementSteps.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.WebElement;\n+import org.vividus.bdd.mobileapp.action.TapActions;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class MobileAppElementSteps\n+{\n+    private final IBaseValidations baseValidations;\n+    private final TapActions tapActions;\n+\n+    public MobileAppElementSteps(IBaseValidations baseValidations, TapActions tapActions)\n+    {\n+        this.baseValidations = baseValidations;\n+        this.tapActions = tapActions;\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b> with specified <b>duration</b>\n+     * @param locator locator to locate element\n+     * @param duration in format <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">Duration Format</a>", "originalCommit": "f8ae8ec7aa9abdc4fbffec5c5cc14c70e8479491", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQzMjY0Nw==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r485432647", "bodyText": "use validation API which doesn't rely on descriptive soft assert", "author": "valfirst", "createdAt": "2020-09-09T08:29:38Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/MobileAppElementSteps.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.WebElement;\n+import org.vividus.bdd.mobileapp.action.TapActions;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class MobileAppElementSteps\n+{\n+    private final IBaseValidations baseValidations;\n+    private final TapActions tapActions;\n+\n+    public MobileAppElementSteps(IBaseValidations baseValidations, TapActions tapActions)\n+    {\n+        this.baseValidations = baseValidations;\n+        this.tapActions = tapActions;\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b> with specified <b>duration</b>\n+     * @param locator locator to locate element\n+     * @param duration in format <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">Duration Format</a>\n+     */\n+    @When(\"I tap on element located by `$locator` with duration `$duration`\")\n+    public void tapByLocator(Locator locator, Duration duration)\n+    {\n+        WebElement element = baseValidations.assertIfElementExists(\"Element to tap\", locator);", "originalCommit": "f8ae8ec7aa9abdc4fbffec5c5cc14c70e8479491", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQzMzA2NQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r485433065", "bodyText": "it should go as a separate commit/PR", "author": "valfirst", "createdAt": "2020-09-09T08:30:13Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/search/AppiumHow.java", "diffHunk": "@@ -28,6 +30,14 @@ public By buildBy(String value)\n         {\n             return How.XPATH.buildBy(value);\n         }\n+    },\n+    ACCESSIBILITY_ID", "originalCommit": "f8ae8ec7aa9abdc4fbffec5c5cc14c70e8479491", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQzMzU1OQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r485433559", "bodyText": "org.vividus.mobileapp.action.TapActions", "author": "valfirst", "createdAt": "2020-09-09T08:31:02Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/action/TapActions.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.action;", "originalCommit": "f8ae8ec7aa9abdc4fbffec5c5cc14c70e8479491", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "49476b565a4aebe26bb1ee3d5553898938fe1f83", "url": "https://github.com/vividus-framework/vividus/commit/49476b565a4aebe26bb1ee3d5553898938fe1f83", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T08:03:32Z", "type": "forcePushed"}, {"oid": "151c1589c82d0b536cff552581ebe0603df56671", "url": "https://github.com/vividus-framework/vividus/commit/151c1589c82d0b536cff552581ebe0603df56671", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T08:08:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2NTI2NA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486165264", "bodyText": "businessDescription -> description", "author": "valfirst", "createdAt": "2020-09-10T08:37:50Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/BaseValidations.java", "diffHunk": "@@ -90,6 +90,19 @@ else if (softAssert.assertThat(businessDescription, systemDescription, elements,\n         return null;\n     }\n \n+    private WebElement assertElementExists(String businessDescription, List<WebElement> elements)", "originalCommit": "151c1589c82d0b536cff552581ebe0603df56671", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2NTYyOQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486165629", "bodyText": "how does the failed assertion look like?", "author": "valfirst", "createdAt": "2020-09-10T08:38:16Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/BaseValidations.java", "diffHunk": "@@ -90,6 +90,19 @@ else if (softAssert.assertThat(businessDescription, systemDescription, elements,\n         return null;\n     }\n \n+    private WebElement assertElementExists(String businessDescription, List<WebElement> elements)\n+    {\n+        if (elements.size() > 1)\n+        {\n+            assertElementNumber(businessDescription, elements, elementNumber(Matchers.comparesEqualTo(1)));", "originalCommit": "151c1589c82d0b536cff552581ebe0603df56671", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIwNTYyMg==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486205622", "bodyText": "Fail: Element to tap [Expected: number of elements is a value equal to <1> Actual: <21>]", "author": "uarlouski", "createdAt": "2020-09-10T09:42:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2NTYyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2NTg0NA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486165844", "bodyText": "how does the failed assertion look like?", "author": "valfirst", "createdAt": "2020-09-10T08:38:34Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/BaseValidations.java", "diffHunk": "@@ -90,6 +90,19 @@ else if (softAssert.assertThat(businessDescription, systemDescription, elements,\n         return null;\n     }\n \n+    private WebElement assertElementExists(String businessDescription, List<WebElement> elements)\n+    {\n+        if (elements.size() > 1)\n+        {\n+            assertElementNumber(businessDescription, elements, elementNumber(Matchers.comparesEqualTo(1)));\n+        }\n+        else if (softAssert.assertThat(businessDescription, elements, ExistsMatcher.exists()))", "originalCommit": "151c1589c82d0b536cff552581ebe0603df56671", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIwMjU3MQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486202571", "bodyText": "Fail: Element to tap [Expected: exists Actual: does not exist]", "author": "uarlouski", "createdAt": "2020-09-10T09:37:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2NTg0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2NjA0Ng==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486166046", "bodyText": "what about using Optional?", "author": "valfirst", "createdAt": "2020-09-10T08:38:54Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/BaseValidations.java", "diffHunk": "@@ -90,6 +90,19 @@ else if (softAssert.assertThat(businessDescription, systemDescription, elements,\n         return null;\n     }\n \n+    private WebElement assertElementExists(String businessDescription, List<WebElement> elements)\n+    {\n+        if (elements.size() > 1)\n+        {\n+            assertElementNumber(businessDescription, elements, elementNumber(Matchers.comparesEqualTo(1)));\n+        }\n+        else if (softAssert.assertThat(businessDescription, elements, ExistsMatcher.exists()))\n+        {\n+            return elements.get(0);\n+        }\n+        return null;", "originalCommit": "151c1589c82d0b536cff552581ebe0603df56671", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2NjMxMg==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486166312", "bodyText": "businessDescription -> description", "author": "valfirst", "createdAt": "2020-09-10T08:39:21Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/BaseValidations.java", "diffHunk": "@@ -113,6 +126,13 @@ private boolean assertElementNumber(String businessDescription, String systemDes\n             () -> softAssert.assertThat(businessDescription, systemDescription, elements, matcher));\n     }\n \n+    private boolean assertElementNumber(String businessDescription, List<WebElement> elements,", "originalCommit": "151c1589c82d0b536cff552581ebe0603df56671", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2NzE3OQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486167179", "bodyText": "please mark it as @Deprecated, also do not forget to add javadoc", "author": "valfirst", "createdAt": "2020-09-10T08:40:39Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/IBaseValidations.java", "diffHunk": "@@ -50,6 +50,8 @@ boolean assertLeastElementNumber(String businessDescription, String systemDescri\n \n     WebElement assertIfElementExists(String businessDescription, Locator locator);", "originalCommit": "151c1589c82d0b536cff552581ebe0603df56671", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIwNDg1NQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486204855", "bodyText": "The element to tap?", "author": "valfirst", "createdAt": "2020-09-10T09:40:47Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/ActionSteps.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.WebElement;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.mobileapp.action.TapActions;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class ActionSteps\n+{\n+    private final TapActions tapActions;\n+    private final IBaseValidations baseValidations;\n+\n+    public ActionSteps(TapActions tapActions, IBaseValidations baseValidations)\n+    {\n+        this.tapActions = tapActions;\n+        this.baseValidations = baseValidations;\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b> with specified <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration between an element is pressed and released in\n+     * <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO_8601</a> format\n+     */\n+    @When(\"I tap on element located by `$locator` with duration `$duration`\")\n+    public void tapByLocator(Locator locator, Duration duration)\n+    {\n+        WebElement element = baseValidations.assertElementExists(\"Element to tap\", locator);", "originalCommit": "151c1589c82d0b536cff552581ebe0603df56671", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5c1324664c5e9c46ada1228498b08a717c14a088", "url": "https://github.com/vividus-framework/vividus/commit/5c1324664c5e9c46ada1228498b08a717c14a088", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T09:53:47Z", "type": "forcePushed"}, {"oid": "f682d484d31784ac16ea626fea60be800610a2cb", "url": "https://github.com/vividus-framework/vividus/commit/f682d484d31784ac16ea626fea60be800610a2cb", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T09:57:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyNjE2NA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486226164", "bodyText": "Won't it be confusing: having the tap step with duration only?", "author": "ikalinin1", "createdAt": "2020-09-10T10:17:11Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/ActionSteps.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.mobileapp.action.TapActions;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class ActionSteps\n+{\n+    private final TapActions tapActions;\n+    private final IBaseValidations baseValidations;\n+\n+    public ActionSteps(TapActions tapActions, IBaseValidations baseValidations)\n+    {\n+        this.tapActions = tapActions;\n+        this.baseValidations = baseValidations;\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b> with specified <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration between an element is pressed and released in\n+     * <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO_8601</a> format\n+     */\n+    @When(\"I tap on element located by `$locator` with duration `$duration`\")", "originalCommit": "f682d484d31784ac16ea626fea60be800610a2cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyNzY1MQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486227651", "bodyText": "The questions I got are:\n\nwhat duration will fit my app?\nIs it 0?\nis it something else?\nHow to choose?\nIf it 0 why I should even care?", "author": "ikalinin1", "createdAt": "2020-09-10T10:19:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyNjE2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIzNTQ0OQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486235449", "bodyText": "In this case I would prefer to gather some statistic which duration suits most apps by default, but currently there is not such statistic, I mean that any default value is not proven to be suitable", "author": "uarlouski", "createdAt": "2020-09-10T10:33:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyNjE2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIzNjg5OA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486236898", "bodyText": "I could add composite with duration 1s but I would prefer to not add integration tests for such composites since the underlying component is already covered", "author": "uarlouski", "createdAt": "2020-09-10T10:36:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyNjE2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM0ODQ3Mw==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486348473", "bodyText": "I propose to add one more step and use TouchAction.tap", "author": "ikalinin1", "createdAt": "2020-09-10T13:42:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyNjE2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ2MzY5Mg==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486463692", "bodyText": "one more step is added", "author": "uarlouski", "createdAt": "2020-09-10T16:07:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyNjE2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyODQ5OQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486228499", "bodyText": "Since the tap will be called only if the element exists why the tap performs a nullability check?", "author": "ikalinin1", "createdAt": "2020-09-10T10:21:11Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/ActionSteps.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.mobileapp.action.TapActions;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class ActionSteps\n+{\n+    private final TapActions tapActions;\n+    private final IBaseValidations baseValidations;\n+\n+    public ActionSteps(TapActions tapActions, IBaseValidations baseValidations)\n+    {\n+        this.tapActions = tapActions;\n+        this.baseValidations = baseValidations;\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b> with specified <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration between an element is pressed and released in\n+     * <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO_8601</a> format\n+     */\n+    @When(\"I tap on element located by `$locator` with duration `$duration`\")\n+    public void tapByLocator(Locator locator, Duration duration)\n+    {\n+        baseValidations.assertElementExists(\"The element to tap\", locator).ifPresent(e -> tapActions.tap(e, duration));", "originalCommit": "f682d484d31784ac16ea626fea60be800610a2cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIzMjc3OQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486232779", "bodyText": "it's not really nullability check, it's just optional api which let us to inline tap invocation", "author": "uarlouski", "createdAt": "2020-09-10T10:28:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyODQ5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMzMjQ1OA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486332458", "bodyText": "You're checking element in TapActions", "author": "ikalinin1", "createdAt": "2020-09-10T13:24:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyODQ5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMzMjYwNw==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486332607", "bodyText": "lin 43", "author": "ikalinin1", "createdAt": "2020-09-10T13:24:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyODQ5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzMTUxNA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486431514", "bodyText": "In my understanding we have two layers of API, the first one - are steps for users, and the second one - for internal use, that's why I put null check into TapActions because it can be used in other places", "author": "uarlouski", "createdAt": "2020-09-10T15:23:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyODQ5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzMjQ5MA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486432490", "bodyText": "Yep, and since API you're using provides null-safety no reason to use an optional?", "author": "ikalinin1", "createdAt": "2020-09-10T15:24:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyODQ5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNDM2MQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486434361", "bodyText": "base validation - is not the only way to get elements", "author": "uarlouski", "createdAt": "2020-09-10T15:27:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyODQ5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ0MDY4OQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486440689", "bodyText": "if is not the only way to check null :)", "author": "ikalinin1", "createdAt": "2020-09-10T15:36:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIyODQ5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIzMDM1MQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486230351", "bodyText": "located by -> located", "author": "ikalinin1", "createdAt": "2020-09-10T10:24:42Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/ActionSteps.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.mobileapp.action.TapActions;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class ActionSteps\n+{\n+    private final TapActions tapActions;\n+    private final IBaseValidations baseValidations;\n+\n+    public ActionSteps(TapActions tapActions, IBaseValidations baseValidations)\n+    {\n+        this.tapActions = tapActions;\n+        this.baseValidations = baseValidations;\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b> with specified <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration between an element is pressed and released in\n+     * <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO_8601</a> format\n+     */\n+    @When(\"I tap on element located by `$locator` with duration `$duration`\")", "originalCommit": "f682d484d31784ac16ea626fea60be800610a2cb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ccf48e917a852885f0986ef61a36afdecae6fcf7", "url": "https://github.com/vividus-framework/vividus/commit/ccf48e917a852885f0986ef61a36afdecae6fcf7", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T11:40:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM5NDE0Ng==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486394146", "bodyText": "I think now this abstraction doesn't make sense", "author": "valfirst", "createdAt": "2020-09-10T14:34:44Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/BaseValidations.java", "diffHunk": "@@ -126,6 +121,42 @@ public WebElement assertIfElementExists(String businessDescription, Locator loca\n         return assertIfElementExists(businessDescription, uiContext.getSearchContext(), locator);\n     }\n \n+    @Override\n+    public Optional<WebElement> assertElementExists(String description, Locator locator)\n+    {\n+        List<WebElement> elements = searchActions.findElements(uiContext.getSearchContext(), locator);\n+        WebElement element = assertElementExists(elements, () ->\n+        {\n+            String assertionFormat = \"The number of elements found by the locator %s is %d, but expected 1\";\n+            softAssert.recordFailedAssertion(String.format(assertionFormat, locator, elements.size()));\n+        }, () -> doesElementExist(description, locator, elements));\n+        return Optional.ofNullable(element);\n+    }\n+\n+    private boolean doesElementExist(String description, Locator locator, List<WebElement> elements)\n+    {\n+        String assertionFormat = \"%s %s found by the locator %s\";\n+        boolean passed = elements.size() == 1;\n+        String condition = passed ? \"is\" : \"is not\";\n+        String assertionMessage = String.format(assertionFormat, description, condition, locator);\n+        return passed ? softAssert.recordPassedAssertion(assertionMessage)\n+                : softAssert.recordFailedAssertion(assertionMessage);\n+    }\n+\n+    public WebElement assertElementExists(List<WebElement> elements, Runnable onMoreThanOneElement,", "originalCommit": "ccf48e917a852885f0986ef61a36afdecae6fcf7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3c64bfea8db529d7d98dccb0c4822195d1bd1db5", "url": "https://github.com/vividus-framework/vividus/commit/3c64bfea8db529d7d98dccb0c4822195d1bd1db5", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T15:24:32Z", "type": "forcePushed"}, {"oid": "a93d303a8f3aef7a104cf4cd9779f6fb88a56e54", "url": "https://github.com/vividus-framework/vividus/commit/a93d303a8f3aef7a104cf4cd9779f6fb88a56e54", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T15:30:53Z", "type": "forcePushed"}, {"oid": "7a08386a3ab7ae6b7aa2f0f0ccca1523166c835c", "url": "https://github.com/vividus-framework/vividus/commit/7a08386a3ab7ae6b7aa2f0f0ccca1523166c835c", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T15:35:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ0MTMzOQ==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486441339", "bodyText": "in this implementation DURATION.ZERO used as a flag.\nCan we use .tap(element(WebDriverUtil.unwrap(element, RemoteWebElement.class))); instead?", "author": "ikalinin1", "createdAt": "2020-09-10T15:37:10Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/ActionSteps.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+\n+import org.jbehave.core.annotations.When;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.mobileapp.action.TapActions;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class ActionSteps\n+{\n+    private final TapActions tapActions;\n+    private final IBaseValidations baseValidations;\n+\n+    public ActionSteps(TapActions tapActions, IBaseValidations baseValidations)\n+    {\n+        this.tapActions = tapActions;\n+        this.baseValidations = baseValidations;\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b> with specified <b>duration</b>\n+     * The tap involves the following actions: press => wait => release\n+     * @param locator locator to find an element\n+     * @param duration between an element is pressed and released in\n+     * <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO_8601</a> format\n+     */\n+    @When(\"I tap on element located `$locator` with duration `$duration`\")\n+    public void tapByLocatorWithDuration(Locator locator, Duration duration)\n+    {\n+        baseValidations.assertElementExists(\"The element to tap\", locator).ifPresent(e -> tapActions.tap(e, duration));\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b>\n+     * The tap involves the following actions: press => release\n+     * @param locator locator to find an element\n+     */\n+    @When(\"I tap on element located `$locator`\")\n+    public void tapByLocator(Locator locator)\n+    {\n+        tapByLocatorWithDuration(locator, Duration.ZERO);", "originalCommit": "7a08386a3ab7ae6b7aa2f0f0ccca1523166c835c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ0NDQ5Mg==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486444492", "bodyText": "What is advantage? We don't really know how tap works under the hood, it may potentially add tap duration on the appium side", "author": "uarlouski", "createdAt": "2020-09-10T15:41:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ0MTMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ3ODczOA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486478738", "bodyText": "if some users want to tap with zero duration (I have no idea why, but taking into account appium it could be anything), then we shouldn't modify the action", "author": "valfirst", "createdAt": "2020-09-10T16:30:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ0MTMzOQ=="}], "type": "inlineReview"}, {"oid": "1fb04a46faa9d7d947380803a5f0572a897b232d", "url": "https://github.com/vividus-framework/vividus/commit/1fb04a46faa9d7d947380803a5f0572a897b232d", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T15:47:05Z", "type": "forcePushed"}, {"oid": "10ba5ee24fa362a7e437689901d1220fedb90958", "url": "https://github.com/vividus-framework/vividus/commit/10ba5ee24fa362a7e437689901d1220fedb90958", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T15:57:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ3NTc2Mg==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486475762", "bodyText": "doesOnlyOneElementExist", "author": "valfirst", "createdAt": "2020-09-10T16:26:17Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/BaseValidations.java", "diffHunk": "@@ -126,6 +126,32 @@ public WebElement assertIfElementExists(String businessDescription, Locator loca\n         return assertIfElementExists(businessDescription, uiContext.getSearchContext(), locator);\n     }\n \n+    @Override\n+    public Optional<WebElement> assertElementExists(String description, Locator locator)\n+    {\n+        List<WebElement> elements = searchActions.findElements(uiContext.getSearchContext(), locator);\n+        if (elements.size() > 1)\n+        {\n+            String assertionFormat = \"The number of elements found by the locator %s is %d, but expected 1\";\n+            softAssert.recordFailedAssertion(String.format(assertionFormat, locator, elements.size()));\n+        }\n+        else if (doesElementExist(description, locator, elements))\n+        {\n+            return Optional.of(elements.get(0));\n+        }\n+        return Optional.empty();\n+    }\n+\n+    private boolean doesElementExist(String description, Locator locator, List<WebElement> elements)", "originalCommit": "10ba5ee24fa362a7e437689901d1220fedb90958", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ3NzM5Mw==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486477393", "bodyText": "I recommend to use StringBuilder", "author": "valfirst", "createdAt": "2020-09-10T16:28:50Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/BaseValidations.java", "diffHunk": "@@ -126,6 +126,32 @@ public WebElement assertIfElementExists(String businessDescription, Locator loca\n         return assertIfElementExists(businessDescription, uiContext.getSearchContext(), locator);\n     }\n \n+    @Override\n+    public Optional<WebElement> assertElementExists(String description, Locator locator)\n+    {\n+        List<WebElement> elements = searchActions.findElements(uiContext.getSearchContext(), locator);\n+        if (elements.size() > 1)\n+        {\n+            String assertionFormat = \"The number of elements found by the locator %s is %d, but expected 1\";\n+            softAssert.recordFailedAssertion(String.format(assertionFormat, locator, elements.size()));\n+        }\n+        else if (doesElementExist(description, locator, elements))\n+        {\n+            return Optional.of(elements.get(0));\n+        }\n+        return Optional.empty();\n+    }\n+\n+    private boolean doesElementExist(String description, Locator locator, List<WebElement> elements)\n+    {\n+        String assertionFormat = \"%s %s found by the locator %s\";\n+        boolean passed = elements.size() == 1;\n+        String condition = passed ? \"is\" : \"is not\";\n+        String assertionMessage = String.format(assertionFormat, description, condition, locator);", "originalCommit": "10ba5ee24fa362a7e437689901d1220fedb90958", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "812678920537e229f14839bfce4174ce238a9845", "url": "https://github.com/vividus-framework/vividus/commit/812678920537e229f14839bfce4174ce238a9845", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T18:42:48Z", "type": "forcePushed"}, {"oid": "e4937bcf90142634003f437821354286321c9d69", "url": "https://github.com/vividus-framework/vividus/commit/e4937bcf90142634003f437821354286321c9d69", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T18:46:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU4MTY0MA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486581640", "bodyText": "boolean passed = elements.size() == 1;\nStringBuilder assertionMessageBuilder = new StringBuilder(description).append(\" is \");\nif (!passed)\n{\n    assertionMessageBuilder.append(\"not \");\n}\nassertionMessageBuilder.append(\"found by the locator \").append(locator);\nString assertionMessage = assertionMessageBuilder.toString();\nreturn passed ? softAssert.recordPassedAssertion(assertionMessage)\n        : softAssert.recordFailedAssertion(assertionMessage);", "author": "valfirst", "createdAt": "2020-09-10T19:23:38Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/validation/BaseValidations.java", "diffHunk": "@@ -126,6 +126,31 @@ public WebElement assertIfElementExists(String businessDescription, Locator loca\n         return assertIfElementExists(businessDescription, uiContext.getSearchContext(), locator);\n     }\n \n+    @Override\n+    public Optional<WebElement> assertElementExists(String description, Locator locator)\n+    {\n+        List<WebElement> elements = searchActions.findElements(uiContext.getSearchContext(), locator);\n+        if (elements.size() > 1)\n+        {\n+            String assertionFormat = \"The number of elements found by the locator %s is %d, but expected 1\";\n+            softAssert.recordFailedAssertion(String.format(assertionFormat, locator, elements.size()));\n+        }\n+        else if (doesOnlyOneElementExist(description, locator, elements))\n+        {\n+            return Optional.of(elements.get(0));\n+        }\n+        return Optional.empty();\n+    }\n+\n+    private boolean doesOnlyOneElementExist(String description, Locator locator, List<WebElement> elements)\n+    {\n+        boolean passed = elements.size() == 1;\n+        String condition = passed ? \" is\" : \" is not\";\n+        String assertionMessage = description + condition + \" found by the locator \" + locator;\n+        return passed ? softAssert.recordPassedAssertion(assertionMessage)\n+                : softAssert.recordFailedAssertion(assertionMessage);", "originalCommit": "e4937bcf90142634003f437821354286321c9d69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU4NDc2OA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486584768", "bodyText": "hmm what is the advantage of this code snippet? btw some time ago we decided to gradually get rid of string builders due to jep 280", "author": "uarlouski", "createdAt": "2020-09-10T19:29:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU4MTY0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYxNTMyNA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486615324", "bodyText": "hmm what is the advantage of this code snippet?\n\nno more duplicated is\n\nbtw some time ago we decided to gradually get rid of string builders due to jep 280\n\nthat was about old rule that each string concatenation should be done using StringBuilder, but in this case StringBuilder is used to build a string, you can try to re-write using +, but it won't improve readability", "author": "valfirst", "createdAt": "2020-09-10T20:30:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU4MTY0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYyMTA4NA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486621084", "bodyText": "imho concise code is prevalent over duplication of some small part of text", "author": "uarlouski", "createdAt": "2020-09-10T20:41:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU4MTY0MA=="}], "type": "inlineReview"}, {"oid": "2f0eb730f5a36c0770f20d11524efc988dd7000b", "url": "https://github.com/vividus-framework/vividus/commit/2f0eb730f5a36c0770f20d11524efc988dd7000b", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-10T20:39:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjgxNDUxMA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486814510", "bodyText": "findElementToTap", "author": "valfirst", "createdAt": "2020-09-11T07:01:44Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/ActionSteps.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import java.time.Duration;\n+import java.util.Optional;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.WebElement;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.mobileapp.action.TapActions;\n+import org.vividus.ui.action.search.Locator;\n+\n+public class ActionSteps\n+{\n+    private final TapActions tapActions;\n+    private final IBaseValidations baseValidations;\n+\n+    public ActionSteps(TapActions tapActions, IBaseValidations baseValidations)\n+    {\n+        this.tapActions = tapActions;\n+        this.baseValidations = baseValidations;\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b> with specified <b>duration</b>\n+     * <br>\n+     * The atomic actions performed are:\n+     * <ol>\n+     * <li>press on the element</li>\n+     * <li>wait for the duration</li>\n+     * <li>release</li>\n+     * </ol>\n+     * @param locator locator to find an element\n+     * @param duration between an element is pressed and released in\n+     * <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO_8601</a> format\n+     */\n+    @When(\"I tap on element located `$locator` with duration `$duration`\")\n+    public void tapByLocatorWithDuration(Locator locator, Duration duration)\n+    {\n+        findElement(locator).ifPresent(e -> tapActions.tap(e, duration));\n+    }\n+\n+    /**\n+     * Taps on <b>element</b> located by <b>locator</b>\n+     * <br>\n+     * The atomic actions performed are:\n+     * <ol>\n+     * <li>press on the element</li>\n+     * <li>release</li>\n+     * </ol>\n+     * @param locator locator to find an element\n+     */\n+    @When(\"I tap on element located `$locator`\")\n+    public void tapByLocator(Locator locator)\n+    {\n+        findElement(locator).ifPresent(tapActions::tap);\n+    }\n+\n+    private Optional<WebElement> findElement(Locator locator)", "originalCommit": "2f0eb730f5a36c0770f20d11524efc988dd7000b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjgxOTc1MA==", "url": "https://github.com/vividus-framework/vividus/pull/911#discussion_r486819750", "bodyText": "fixed", "author": "uarlouski", "createdAt": "2020-09-11T07:13:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjgxNDUxMA=="}], "type": "inlineReview"}, {"oid": "9b8d87651847eebabb2d07c05f67975f503eb272", "url": "https://github.com/vividus-framework/vividus/commit/9b8d87651847eebabb2d07c05f67975f503eb272", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-11T07:13:17Z", "type": "forcePushed"}, {"oid": "767ea887bd1ebf72dc12b2e4039d2d2089d4df91", "url": "https://github.com/vividus-framework/vividus/commit/767ea887bd1ebf72dc12b2e4039d2d2089d4df91", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-11T08:14:58Z", "type": "commit"}, {"oid": "767ea887bd1ebf72dc12b2e4039d2d2089d4df91", "url": "https://github.com/vividus-framework/vividus/commit/767ea887bd1ebf72dc12b2e4039d2d2089d4df91", "message": "[plugin-mobile-app] Add tap step", "committedDate": "2020-09-11T08:14:58Z", "type": "forcePushed"}]}