{"pr_number": 1113, "pr_title": "[plugin-mobile-app] Add date picker selection", "pr_createdAt": "2020-11-10T14:37:05Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/1113", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDYzMzc5MA==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520633790", "bodyText": "it doesn't look like touch step (no gestures), what about ElementSteps?", "author": "valfirst", "createdAt": "2020-11-10T15:06:28Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "diffHunk": "@@ -142,6 +160,36 @@ public void swipeToElement(SwipeDirection direction, Locator locator, Duration d\n                 ComparisonRule.EQUAL_TO, 1);\n     }\n \n+    /**\n+     * Select a next or previous picker wheel value in date picker\n+     * @param direction direction of next value, either <b>NEXT</b> or <b>PREVIOUS</b>\n+     * @param locator locator to find a <i>XCUIElementTypePickerWheel</i> element\n+     */\n+    @When(\"I select $direction value in picker wheel located `$locator`\")", "originalCommit": "e2f2857ce5c6824316ee87105031144f5e2253cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY0MTA3Mw==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520641073", "bodyText": "from end-user pov and from underlying mechanics we tap on picker wheel to choose particular value", "author": "uarlouski", "createdAt": "2020-11-10T15:15:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDYzMzc5MA=="}], "type": "inlineReview"}, {"oid": "8d9f48b10acca0a7eb35057fe2fc8956338f65aa", "url": "https://github.com/vividus-framework/vividus/commit/8d9f48b10acca0a7eb35057fe2fc8956338f65aa", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-10T15:55:54Z", "type": "forcePushed"}, {"oid": "a7a8c478fc91062f69b4fe013c0ef33f80c2ecb0", "url": "https://github.com/vividus-framework/vividus/commit/a7a8c478fc91062f69b4fe013c0ef33f80c2ecb0", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-10T15:58:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1MzEwNA==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520753104", "bodyText": "I believe it can be static nested class", "author": "valfirst", "createdAt": "2020-11-10T17:46:42Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/PickerWheelDirection.java", "diffHunk": "@@ -0,0 +1,22 @@\n+/*\n+ * Copyright 2019-2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.model;\n+\n+public enum PickerWheelDirection", "originalCommit": "a7a8c478fc91062f69b4fe013c0ef33f80c2ecb0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1MzU5Mw==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520753593", "bodyText": "baseValidations should go last in the list of fields and in the constructor parameters", "author": "valfirst", "createdAt": "2020-11-10T17:47:24Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/ElementSteps.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import static org.apache.commons.lang3.Validate.isTrue;\n+\n+import java.util.Map;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.JavascriptExecutor;\n+import org.openqa.selenium.remote.RemoteWebElement;\n+import org.vividus.bdd.mobileapp.model.PickerWheelDirection;\n+import org.vividus.bdd.monitor.TakeScreenshotOnFailure;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.selenium.IWebDriverProvider;\n+import org.vividus.selenium.WebDriverUtil;\n+import org.vividus.selenium.manager.IGenericWebDriverManager;\n+import org.vividus.ui.action.search.Locator;\n+\n+@TakeScreenshotOnFailure\n+public class ElementSteps\n+{\n+    private final IBaseValidations baseValidations;", "originalCommit": "a7a8c478fc91062f69b4fe013c0ef33f80c2ecb0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc4NTI5OQ==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520785299", "bodyText": "hmm what is our code convention regarding to constructor param sequence?", "author": "uarlouski", "createdAt": "2020-11-10T18:40:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1MzU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgwOTM4MQ==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520809381", "bodyText": "we don't have, but you can improve it :) obviously validations field is used after webDriverProvider so  validations should go after webDriverProvider and etc.", "author": "valfirst", "createdAt": "2020-11-10T19:09:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1MzU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxNDEwNw==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520814107", "bodyText": "following the usage sequence it will be hard to track the sequence of class dependencies and their usage once we have a normal class with more than one method and few dependencies. I think we can for example put dependencies in alphabet order", "author": "uarlouski", "createdAt": "2020-11-10T19:17:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1MzU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg2MjM5Nw==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520862397", "bodyText": "put into alpha order", "author": "uarlouski", "createdAt": "2020-11-10T20:44:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1MzU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE1Nzk3Mg==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r521157972", "bodyText": "alphabetical order doesn't make sense in such cases, for example: would you put password before username in some class storing credentials?", "author": "valfirst", "createdAt": "2020-11-11T07:07:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1MzU5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1NDgwMQ==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520754801", "bodyText": "mid - do not use shortenings in the docs", "author": "valfirst", "createdAt": "2020-11-10T17:49:17Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/ElementSteps.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import static org.apache.commons.lang3.Validate.isTrue;\n+\n+import java.util.Map;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.JavascriptExecutor;\n+import org.openqa.selenium.remote.RemoteWebElement;\n+import org.vividus.bdd.mobileapp.model.PickerWheelDirection;\n+import org.vividus.bdd.monitor.TakeScreenshotOnFailure;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.selenium.IWebDriverProvider;\n+import org.vividus.selenium.WebDriverUtil;\n+import org.vividus.selenium.manager.IGenericWebDriverManager;\n+import org.vividus.ui.action.search.Locator;\n+\n+@TakeScreenshotOnFailure\n+public class ElementSteps\n+{\n+    private final IBaseValidations baseValidations;\n+    private final IWebDriverProvider webDriverProvider;\n+    private final IGenericWebDriverManager genericWebDriverManager;\n+\n+    public ElementSteps(IBaseValidations baseValidations, IWebDriverProvider webDriverProvider,\n+            IGenericWebDriverManager genericWebDriverManager)\n+    {\n+        this.baseValidations = baseValidations;\n+        this.webDriverProvider = webDriverProvider;\n+        this.genericWebDriverManager = genericWebDriverManager;\n+    }\n+\n+    /**\n+     * Select a next or previous picker wheel value in date picker\n+     * @param direction direction of next value, either <b>NEXT</b> or <b>PREVIOUS</b>\n+     * @param offset offset from wheel mid to pick the value", "originalCommit": "a7a8c478fc91062f69b4fe013c0ef33f80c2ecb0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1NzMzOA==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r520757338", "bodyText": "I believe you should reuse a part of JavascriptActions from the web plugin", "author": "valfirst", "createdAt": "2020-11-10T17:53:10Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/ElementSteps.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.steps;\n+\n+import static org.apache.commons.lang3.Validate.isTrue;\n+\n+import java.util.Map;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.JavascriptExecutor;\n+import org.openqa.selenium.remote.RemoteWebElement;\n+import org.vividus.bdd.mobileapp.model.PickerWheelDirection;\n+import org.vividus.bdd.monitor.TakeScreenshotOnFailure;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.selenium.IWebDriverProvider;\n+import org.vividus.selenium.WebDriverUtil;\n+import org.vividus.selenium.manager.IGenericWebDriverManager;\n+import org.vividus.ui.action.search.Locator;\n+\n+@TakeScreenshotOnFailure\n+public class ElementSteps\n+{\n+    private final IBaseValidations baseValidations;\n+    private final IWebDriverProvider webDriverProvider;\n+    private final IGenericWebDriverManager genericWebDriverManager;\n+\n+    public ElementSteps(IBaseValidations baseValidations, IWebDriverProvider webDriverProvider,\n+            IGenericWebDriverManager genericWebDriverManager)\n+    {\n+        this.baseValidations = baseValidations;\n+        this.webDriverProvider = webDriverProvider;\n+        this.genericWebDriverManager = genericWebDriverManager;\n+    }\n+\n+    /**\n+     * Select a next or previous picker wheel value in date picker\n+     * @param direction direction of next value, either <b>NEXT</b> or <b>PREVIOUS</b>\n+     * @param offset offset from wheel mid to pick the value\n+     * @param locator locator to find a <i>XCUIElementTypePickerWheel</i> element\n+     */\n+    @When(\"I select $direction value with `$offset` offset in picker wheel located `$locator`\")\n+    public void selectPickerWheelValue(PickerWheelDirection direction, double offset, Locator locator)\n+    {\n+        isTrue(genericWebDriverManager.isIOSNativeApp(), \"Picker wheel selection is supported only for iOS platform\");\n+        baseValidations.assertElementExists(\"Picker wheel\", locator)\n+                       .filter(element ->\n+                       {\n+                           String pickerTag = \"XCUIElementTypePickerWheel\";\n+                           String tag = element.getTagName();\n+                           isTrue(pickerTag.equals(tag), \"Located element must have %s type, but got %s\", pickerTag,\n+                               tag);\n+                           return true;\n+                       })\n+                       .map(element -> WebDriverUtil.unwrap(element, RemoteWebElement.class))\n+                       .ifPresent(element ->\n+                       {\n+                           JavascriptExecutor executor = webDriverProvider.getUnwrapped(JavascriptExecutor.class);", "originalCommit": "a7a8c478fc91062f69b4fe013c0ef33f80c2ecb0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bbefb0d9b556449ecd54549a07f42c49ab5bd534", "url": "https://github.com/vividus-framework/vividus/commit/bbefb0d9b556449ecd54549a07f42c49ab5bd534", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-10T20:42:51Z", "type": "forcePushed"}, {"oid": "742bddd66e75afa9ba9a29ff2a2558c44fa7254c", "url": "https://github.com/vividus-framework/vividus/commit/742bddd66e75afa9ba9a29ff2a2558c44fa7254c", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-10T20:46:36Z", "type": "forcePushed"}, {"oid": "8a3a08b6335db46173e950b92500a88ca6a5440e", "url": "https://github.com/vividus-framework/vividus/commit/8a3a08b6335db46173e950b92500a88ca6a5440e", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-10T20:56:30Z", "type": "forcePushed"}, {"oid": "9e323946102a17b5868df99a62c98f3ef504e950", "url": "https://github.com/vividus-framework/vividus/commit/9e323946102a17b5868df99a62c98f3ef504e950", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-10T21:01:19Z", "type": "forcePushed"}, {"oid": "767a5fe58f766e2b397c14c253ac8d082d81951b", "url": "https://github.com/vividus-framework/vividus/commit/767a5fe58f766e2b397c14c253ac8d082d81951b", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-10T21:17:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE2MTU1Mg==", "url": "https://github.com/vividus-framework/vividus/pull/1113#discussion_r521161552", "bodyText": "it seems it can be removed now", "author": "valfirst", "createdAt": "2020-11-11T07:17:08Z", "path": "vividus-plugin-web-app/src/main/java/org/vividus/ui/web/action/IJavascriptActions.java", "diffHunk": "@@ -20,11 +20,10 @@\n \n import org.openqa.selenium.Dimension;\n import org.openqa.selenium.WebElement;\n+import org.vividus.ui.action.JavascriptActions;\n \n-public interface IJavascriptActions\n+public interface IJavascriptActions extends JavascriptActions", "originalCommit": "767a5fe58f766e2b397c14c253ac8d082d81951b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cb7b355b12cf4a594375245b49caf5caaffa1349", "url": "https://github.com/vividus-framework/vividus/commit/cb7b355b12cf4a594375245b49caf5caaffa1349", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-11T08:23:58Z", "type": "forcePushed"}, {"oid": "bdcd50f5c785a074fc744e0208e67c059902935d", "url": "https://github.com/vividus-framework/vividus/commit/bdcd50f5c785a074fc744e0208e67c059902935d", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-11T08:50:59Z", "type": "forcePushed"}, {"oid": "7a2c8bc5ce35efd6c19de30bd833a3e8a10352a8", "url": "https://github.com/vividus-framework/vividus/commit/7a2c8bc5ce35efd6c19de30bd833a3e8a10352a8", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-11T08:56:03Z", "type": "commit"}, {"oid": "7a2c8bc5ce35efd6c19de30bd833a3e8a10352a8", "url": "https://github.com/vividus-framework/vividus/commit/7a2c8bc5ce35efd6c19de30bd833a3e8a10352a8", "message": "[plugin-mobile-app] Add date picker selection", "committedDate": "2020-11-11T08:56:03Z", "type": "forcePushed"}]}