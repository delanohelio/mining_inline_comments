{"pr_number": 425, "pr_title": "Add upload locator step", "pr_createdAt": "2020-03-24T12:40:24Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/425", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzNTQ1MA==", "url": "https://github.com/vividus-framework/vividus/pull/425#discussion_r397135450", "bodyText": "does it make sense to refactor the existing one into composite?", "author": "ikalinin1", "createdAt": "2020-03-24T13:04:43Z", "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/ElementSteps.java", "diffHunk": "@@ -68,21 +68,39 @@\n     private ResourceLoader resourceLoader;\n \n     /**\n-     * This steps is uploading the file with the given relative path\n-     * <p>A <b>relative path</b> - starts from some given working directory,\n+     * This step uploads a file with the given relative path\n+     * <p>A <b>relative path</b> starts from some given working directory,\n      * avoiding the need to provide the full absolute path\n      * (i.e. <i>'about.jpeg'</i> is in the root directory\n      * or <i>'/story/uploadfiles/about.png'</i>)</p>\n-     * @param attributeType A type of the element's attribute\n-     * @param attributeValue A value of the element's attribute\n-\n+     * @param attributeType The type of the element's attribute\n+     * @param attributeValue The value of the element's attribute\n      * @param filePath relative path to the file to be uploaded\n      * @see <a href=\"https://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths\"> <i>Absolute and\n      * relative paths</i></a>\n      * @throws IOException If an input or output exception occurred\n      */\n     @When(\"I select an element with the '$attributeType'='$attributeValue' and upload the file '$filePath'\")\n     public void uploadFile(String attributeType, String attributeValue, String filePath) throws IOException\n+    {\n+        uploadFile(new SearchAttributes(ActionAttributeType.XPATH,\n+                LocatorUtil.getXPathByAttribute(attributeType, attributeValue)), filePath);\n+    }\n+\n+    /**\n+     * This step uploads a file with the given relative path\n+     * <p>A <b>relative path</b> starts from some given working directory,\n+     * avoiding the need to provide the full absolute path\n+     * (i.e. <i>'about.jpeg'</i> is in the root directory\n+     * or <i>'/story/uploadfiles/about.png'</i>)</p>\n+     * @param locator The locator for the upload element\n+     * @param filePath relative path to the file to be uploaded\n+     * @see <a href=\"https://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths\"> <i>Absolute and\n+     * relative paths</i></a>\n+     * @throws IOException If an input or output exception occurred\n+     */\n+    @When(\"I select an element '$locator' and upload the file '$filePath'\")\n+    public void uploadFile(SearchAttributes locator, String filePath) throws IOException", "originalCommit": "9b5da35534d8d9334b14ae24571667bf44345696", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzNTg2Nw==", "url": "https://github.com/vividus-framework/vividus/pull/425#discussion_r397135867", "bodyText": "Add integration tests?", "author": "ikalinin1", "createdAt": "2020-03-24T13:05:23Z", "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/ElementSteps.java", "diffHunk": "@@ -68,21 +68,39 @@\n     private ResourceLoader resourceLoader;\n \n     /**\n-     * This steps is uploading the file with the given relative path\n-     * <p>A <b>relative path</b> - starts from some given working directory,\n+     * This step uploads a file with the given relative path\n+     * <p>A <b>relative path</b> starts from some given working directory,\n      * avoiding the need to provide the full absolute path\n      * (i.e. <i>'about.jpeg'</i> is in the root directory\n      * or <i>'/story/uploadfiles/about.png'</i>)</p>\n-     * @param attributeType A type of the element's attribute\n-     * @param attributeValue A value of the element's attribute\n-\n+     * @param attributeType The type of the element's attribute\n+     * @param attributeValue The value of the element's attribute\n      * @param filePath relative path to the file to be uploaded\n      * @see <a href=\"https://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths\"> <i>Absolute and\n      * relative paths</i></a>\n      * @throws IOException If an input or output exception occurred\n      */\n     @When(\"I select an element with the '$attributeType'='$attributeValue' and upload the file '$filePath'\")\n     public void uploadFile(String attributeType, String attributeValue, String filePath) throws IOException\n+    {\n+        uploadFile(new SearchAttributes(ActionAttributeType.XPATH,\n+                LocatorUtil.getXPathByAttribute(attributeType, attributeValue)), filePath);\n+    }\n+\n+    /**\n+     * This step uploads a file with the given relative path\n+     * <p>A <b>relative path</b> starts from some given working directory,\n+     * avoiding the need to provide the full absolute path\n+     * (i.e. <i>'about.jpeg'</i> is in the root directory\n+     * or <i>'/story/uploadfiles/about.png'</i>)</p>\n+     * @param locator The locator for the upload element\n+     * @param filePath relative path to the file to be uploaded\n+     * @see <a href=\"https://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths\"> <i>Absolute and\n+     * relative paths</i></a>\n+     * @throws IOException If an input or output exception occurred\n+     */\n+    @When(\"I select an element '$locator' and upload the file '$filePath'\")", "originalCommit": "9b5da35534d8d9334b14ae24571667bf44345696", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c1bf74b63f6efcab46c1f216790cb9353f43c52f", "url": "https://github.com/vividus-framework/vividus/commit/c1bf74b63f6efcab46c1f216790cb9353f43c52f", "message": "[plugin-web-app] Tidy up javadoc", "committedDate": "2020-03-24T14:47:35Z", "type": "forcePushed"}, {"oid": "61ad56313284975ad75e4d225fa98304a4b44198", "url": "https://github.com/vividus-framework/vividus/commit/61ad56313284975ad75e4d225fa98304a4b44198", "message": "[plugin-web-app] Move upload by attribute step to composites", "committedDate": "2020-03-30T09:36:15Z", "type": "forcePushed"}, {"oid": "eee26d1bc203b6011d300375a2d2a612f6101c37", "url": "https://github.com/vividus-framework/vividus/commit/eee26d1bc203b6011d300375a2d2a612f6101c37", "message": "[plugin-web-app] Add step for uploading by locator", "committedDate": "2020-03-30T09:38:00Z", "type": "forcePushed"}, {"oid": "31c67e2bf6bc0c97bc85ab177dbf08414f7583d0", "url": "https://github.com/vividus-framework/vividus/commit/31c67e2bf6bc0c97bc85ab177dbf08414f7583d0", "message": "[plugin-web-app] Add step for uploading by locator", "committedDate": "2020-03-30T10:16:02Z", "type": "forcePushed"}, {"oid": "8afe9efcdc9a754caac7a26688793f631c6f92e4", "url": "https://github.com/vividus-framework/vividus/commit/8afe9efcdc9a754caac7a26688793f631c6f92e4", "message": "[plugin-web-app] Add step for uploading by locator", "committedDate": "2020-03-30T11:58:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE4ODQ0Nw==", "url": "https://github.com/vividus-framework/vividus/pull/425#discussion_r400188447", "bodyText": "@When(\"I select element located `$locator` and upload file `$filePath`\")", "author": "valfirst", "createdAt": "2020-03-30T13:25:57Z", "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/ElementSteps.java", "diffHunk": "@@ -68,21 +68,19 @@\n     private ResourceLoader resourceLoader;\n \n     /**\n-     * This steps is uploading the file with the given relative path\n-     * <p>A <b>relative path</b> - starts from some given working directory,\n+     * This step uploads a file with the given relative path\n+     * <p>A <b>relative path</b> starts from some given working directory,\n      * avoiding the need to provide the full absolute path\n      * (i.e. <i>'about.jpeg'</i> is in the root directory\n      * or <i>'/story/uploadfiles/about.png'</i>)</p>\n-     * @param attributeType A type of the element's attribute\n-     * @param attributeValue A value of the element's attribute\n-\n+     * @param locator The locator for the upload element\n      * @param filePath relative path to the file to be uploaded\n      * @see <a href=\"https://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths\"> <i>Absolute and\n      * relative paths</i></a>\n      * @throws IOException If an input or output exception occurred\n      */\n-    @When(\"I select an element with the '$attributeType'='$attributeValue' and upload the file '$filePath'\")\n-    public void uploadFile(String attributeType, String attributeValue, String filePath) throws IOException\n+    @When(\"I select an element '$locator' and upload the file '$filePath'\")", "originalCommit": "8afe9efcdc9a754caac7a26688793f631c6f92e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1fc66d264b6ce0ed72badf6af87430fe2a9b6027", "url": "https://github.com/vividus-framework/vividus/commit/1fc66d264b6ce0ed72badf6af87430fe2a9b6027", "message": "[plugin-web-app] Add step for uploading by locator", "committedDate": "2020-03-31T08:03:38Z", "type": "forcePushed"}, {"oid": "7441cc0dccb6c164146582aaff510ea8a3d15612", "url": "https://github.com/vividus-framework/vividus/commit/7441cc0dccb6c164146582aaff510ea8a3d15612", "message": "[plugin-web-app] Add step for uploading by locator", "committedDate": "2020-03-31T09:42:57Z", "type": "commit"}, {"oid": "7441cc0dccb6c164146582aaff510ea8a3d15612", "url": "https://github.com/vividus-framework/vividus/commit/7441cc0dccb6c164146582aaff510ea8a3d15612", "message": "[plugin-web-app] Add step for uploading by locator", "committedDate": "2020-03-31T09:42:57Z", "type": "forcePushed"}]}