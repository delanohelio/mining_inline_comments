{"pr_number": 1923, "pr_title": "HBASE-24578 [WAL] Add a parameter to config RingBufferEventHandler's SyncFuture count", "pr_createdAt": "2020-06-18T12:10:15Z", "pr_url": "https://github.com/apache/hbase/pull/1923", "timeline": [{"oid": "a88888d11b5cece7494f8be77a901ff702002844", "url": "https://github.com/apache/hbase/commit/a88888d11b5cece7494f8be77a901ff702002844", "message": "HBASE-24578", "committedDate": "2020-06-18T12:09:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE5NDYyOA==", "url": "https://github.com/apache/hbase/pull/1923#discussion_r442194628", "bodyText": "I think your patch get wrong to my idea. The inching point is maxHandlersCount not hbase.regionserver.hlog.syncer.count", "author": "Reidddddd", "createdAt": "2020-06-18T12:39:48Z", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "diffHunk": "@@ -230,7 +243,7 @@ public FSHLog(final FileSystem fs, final Path rootDir, final String logDir,\n     this.disruptor.getRingBuffer().next();\n     int maxHandlersCount = conf.getInt(HConstants.REGION_SERVER_HANDLER_COUNT, 200);\n     this.ringBufferEventHandler = new RingBufferEventHandler(\n-        conf.getInt(\"hbase.regionserver.hlog.syncer.count\", 5), maxHandlersCount);\n+        conf.getInt(\"hbase.regionserver.hlog.syncer.count\", defaultSyncerCount), maxHandlersCount);", "originalCommit": "a88888d11b5cece7494f8be77a901ff702002844", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f927d2a109784bdc6707cdc02dff75b8ea7dd22f", "url": "https://github.com/apache/hbase/commit/f927d2a109784bdc6707cdc02dff75b8ea7dd22f", "message": "fix", "committedDate": "2020-06-19T09:03:02Z", "type": "commit"}, {"oid": "7ba12acc0b63a419165533ecee29348a64f18a40", "url": "https://github.com/apache/hbase/commit/7ba12acc0b63a419165533ecee29348a64f18a40", "message": "fix", "committedDate": "2020-06-19T09:20:18Z", "type": "commit"}, {"oid": "3c38a741eabbc30eb21c1934710e846d7afd459a", "url": "https://github.com/apache/hbase/commit/3c38a741eabbc30eb21c1934710e846d7afd459a", "message": "fix", "committedDate": "2020-06-19T09:27:30Z", "type": "commit"}, {"oid": "9fc46959eeb3a117babe636d425eb28625b9a448", "url": "https://github.com/apache/hbase/commit/9fc46959eeb3a117babe636d425eb28625b9a448", "message": "fix", "committedDate": "2020-06-22T05:13:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0MzQ5NQ==", "url": "https://github.com/apache/hbase/pull/1923#discussion_r444743495", "bodyText": "this name is not good, it is confusing. batch of what? or what batch?", "author": "Reidddddd", "createdAt": "2020-06-24T08:50:57Z", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "diffHunk": "@@ -105,6 +105,16 @@\n   // We use ring buffer sequence as txid of FSWALEntry and SyncFuture.\n   private static final Logger LOG = LoggerFactory.getLogger(FSHLog.class);\n \n+  private static final String TOLERABLE_LOW_REPLICATION = \"hbase.regionserver.hlog.tolerable.lowreplication\";\n+  private static final String LOW_REPLICATION_ROLL_LIMIT = \"hbase.regionserver.hlog.lowreplication.rolllimit\";\n+  private static final int DEFAULT_LOW_REPLICATION_ROLL_LIMIT = 5;\n+  private static final String ROLL_ERRORS_TOLERATED = \"hbase.regionserver.logroll.errors.tolerated\";\n+  private static final int DEFAULT_ROLL_ERRORS_TOLERATED = 2;\n+  private static final String SYNCER_COUNT = \"hbase.regionserver.hlog.syncer.count\";\n+  private static final int DEFAULT_SYNCER_COUNT = 5;\n+  private static final String MAX_BATCH_COUNT = \"hbase.regionserver.hlog.max.batch.count\";", "originalCommit": "9fc46959eeb3a117babe636d425eb28625b9a448", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAyNTg1NA==", "url": "https://github.com/apache/hbase/pull/1923#discussion_r446025854", "bodyText": "After second thought, the new name should use wal instead of hlog which was the name in old version.\nAnd from the context in codes, hbase.regionserver.wal.sync.batch.count sounds good to me", "author": "Reidddddd", "createdAt": "2020-06-26T07:52:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0MzQ5NQ=="}], "type": "inlineReview"}, {"oid": "478916ec4c4f57637ac8263e6a3390d05df09e55", "url": "https://github.com/apache/hbase/commit/478916ec4c4f57637ac8263e6a3390d05df09e55", "message": "fix", "committedDate": "2020-06-28T02:24:26Z", "type": "commit"}]}