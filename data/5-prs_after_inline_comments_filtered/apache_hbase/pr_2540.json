{"pr_number": 2540, "pr_title": "HBASE-24628 Region normalizer now respects a rate limit (HMaster chore shutdown NPE ADDENDUM)", "pr_createdAt": "2020-10-13T22:33:59Z", "pr_url": "https://github.com/apache/hbase/pull/2540", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMzMjU1NA==", "url": "https://github.com/apache/hbase/pull/2540#discussion_r504332554", "bodyText": "Why not just use a null check?", "author": "Apache9", "createdAt": "2020-10-14T00:29:37Z", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java", "diffHunk": "@@ -1638,7 +1638,9 @@ private void stopChores() {\n       choreService.cancelChore(this.mobFileCleanerChore);\n       choreService.cancelChore(this.mobFileCompactionChore);\n       choreService.cancelChore(this.balancerChore);\n-      choreService.cancelChore(getRegionNormalizerManager().getRegionNormalizerChore());\n+      Optional.ofNullable(this.regionNormalizerManager)", "originalCommit": "e4075b76887c8e4b1cacf47daa6a19c5415dbd8c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQxNjYwNw==", "url": "https://github.com/apache/hbase/pull/2540#discussion_r504416607", "bodyText": "Optional.ofNullable() is invoked twice, one here and another within mapper:\n    public<U> Optional<U> map(Function<? super T, ? extends U> mapper) {\n        Objects.requireNonNull(mapper);\n        if (!isPresent())\n            return empty();\n        else {\n            return Optional.ofNullable(mapper.apply(value));\n        }\n    }\n\nAnd ofNullable() itself is going to check if value is null, and accordingly going to create new Optional object.\nWhen we have direct Function to deal with, this approach would come with minimal complexity. I am not saying here it is too complex, but compared to one simple null check, yes it is bit complex :)", "author": "virajjasani", "createdAt": "2020-10-14T05:48:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMzMjU1NA=="}], "type": "inlineReview"}, {"oid": "685ebb30deee3b5a473d7787b63c84483b100ac5", "url": "https://github.com/apache/hbase/commit/685ebb30deee3b5a473d7787b63c84483b100ac5", "message": "HBASE-24628 Region normalizer now respects a rate limit (HMaster chore shutdown NPE ADDENDUM)", "committedDate": "2020-10-14T16:33:33Z", "type": "commit"}, {"oid": "685ebb30deee3b5a473d7787b63c84483b100ac5", "url": "https://github.com/apache/hbase/commit/685ebb30deee3b5a473d7787b63c84483b100ac5", "message": "HBASE-24628 Region normalizer now respects a rate limit (HMaster chore shutdown NPE ADDENDUM)", "committedDate": "2020-10-14T16:33:33Z", "type": "forcePushed"}]}