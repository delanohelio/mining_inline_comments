{"pr_number": 2412, "pr_title": "HBASE-25054 Do not add non shaded protobuf as dependency in TableMapR\u2026", "pr_createdAt": "2020-09-17T01:52:12Z", "pr_url": "https://github.com/apache/hbase/pull/2412", "timeline": [{"oid": "3aec1989ebe05884645be052b9217967da500f70", "url": "https://github.com/apache/hbase/commit/3aec1989ebe05884645be052b9217967da500f70", "message": "HBASE-25054 Do not add non shaded protobuf as dependency in TableMapReduceUtil for master", "committedDate": "2020-09-17T01:51:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk4NDI0NQ==", "url": "https://github.com/apache/hbase/pull/2412#discussion_r489984245", "bodyText": "Why this removed? This affect what?", "author": "infraio", "createdAt": "2020-09-17T05:45:08Z", "path": "hbase-mapreduce/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java", "diffHunk": "@@ -819,7 +819,6 @@ public static void addHBaseDependencyJars(Configuration conf) throws IOException\n       org.apache.hbase.thirdparty.com.google.protobuf.UnsafeByteOperations.class, // hb-sh-protobuf\n       org.apache.hbase.thirdparty.io.netty.channel.Channel.class,    // hbase-shaded-netty\n       org.apache.zookeeper.ZooKeeper.class,                          // zookeeper\n-      com.google.protobuf.Message.class,                             // protobuf", "originalCommit": "3aec1989ebe05884645be052b9217967da500f70", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAwMTkwNg==", "url": "https://github.com/apache/hbase/pull/2412#discussion_r490001906", "bodyText": "You can see the comment on jira. The maven shade plugin will also relocate this line and then cause class not found error. I tried to not relocated protobuf, but then it leads to other problems when building hbase-shaded-client. So I suppose there are still other problems. But anyway, for master, we do not depend on protobuf any more, in hbase we all use our thirdparty protobuf, so here we could just remove it. And removing it can fix the class not found problem.", "author": "Apache9", "createdAt": "2020-09-17T06:32:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk4NDI0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAwNTc3Mw==", "url": "https://github.com/apache/hbase/pull/2412#discussion_r490005773", "bodyText": "https://issues.apache.org/jira/browse/HBASE-25049", "author": "Apache9", "createdAt": "2020-09-17T06:41:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTk4NDI0NQ=="}], "type": "inlineReview"}]}