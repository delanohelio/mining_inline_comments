{"pr_number": 2093, "pr_title": "HBASE-21721 reduce write#syncs() times", "pr_createdAt": "2020-07-18T08:39:03Z", "pr_url": "https://github.com/apache/hbase/pull/2093", "timeline": [{"oid": "afccd721519849f26edaeab5176c582949dcd485", "url": "https://github.com/apache/hbase/commit/afccd721519849f26edaeab5176c582949dcd485", "message": "HBASE-21721 reduce write#syncs() times", "committedDate": "2020-07-18T08:12:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA2MTAzNA==", "url": "https://github.com/apache/hbase/pull/2093#discussion_r457061034", "bodyText": "I think this makes sense. @cuibo01 is this change running in production ? By the time we actually perform the sync if an append has happened it should have got synced.", "author": "ramkrish86", "createdAt": "2020-07-20T05:20:55Z", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java", "diffHunk": "@@ -584,8 +584,12 @@ public void run() {\n           Throwable lastException = null;\n           try {\n             TraceUtil.addTimelineAnnotation(\"syncing writer\");\n+            long unSyncedFlushSeq = highestUnsyncedTxid;\n             writer.sync(takeSyncFuture.isForceSync());\n             TraceUtil.addTimelineAnnotation(\"writer synced\");\n+            if (unSyncedFlushSeq > currentSequence) {\n+              currentSequence = unSyncedFlushSeq;", "originalCommit": "afccd721519849f26edaeab5176c582949dcd485", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}