{"pr_number": 6138, "pr_title": "Exception in Find in Files dialog", "pr_createdAt": "2020-02-03T19:20:34Z", "pr_url": "https://github.com/rstudio/rstudio/pull/6138", "timeline": [{"oid": "1b397a62560e288e4cda7aa5b4fdb325c1d9dc78", "url": "https://github.com/rstudio/rstudio/commit/1b397a62560e288e4cda7aa5b4fdb325c1d9dc78", "message": "fix bug where resultsCount was being cleared before being initialized", "committedDate": "2020-01-27T18:21:57Z", "type": "commit"}, {"oid": "33b845043faedd6bef45aad45ed0040a95e9e721", "url": "https://github.com/rstudio/rstudio/commit/33b845043faedd6bef45aad45ed0040a95e9e721", "message": "Merge branch 'master' of https://github.com/rstudio/rstudio into bugfix/find-in-files-exception", "committedDate": "2020-01-28T00:32:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMzMTUyNw==", "url": "https://github.com/rstudio/rstudio/pull/6138#discussion_r374331527", "bodyText": "The exception was happening when this is null, so it would still happen here. I think we need to either (a) check dialogState_ for null upstream, or (b) check this itself here.", "author": "jmcphers", "createdAt": "2020-02-03T20:46:40Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/output/find/FindInFilesDialog.java", "diffHunk": "@@ -126,7 +126,8 @@ public native final int getResultsCount() /*-{\n       }-*/;\n \n       public native final void clearResultsCount() /*-{\n-         this.resultsCount = 0;\n+         if (this.resultsCount !== null)", "originalCommit": "213053573ab7282db621a4ffa6da6c5dea544b53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQyNzQ4Ng==", "url": "https://github.com/rstudio/rstudio/pull/6138#discussion_r374427486", "bodyText": "Ok, that makes sense. I added an upstream check to the only place it makes sense for dialogState_ to be null.", "author": "melissa-barca", "createdAt": "2020-02-04T01:07:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMzMTUyNw=="}], "type": "inlineReview"}, {"oid": "9a23c4f28563d77e6c5670c76581636e688fbddd", "url": "https://github.com/rstudio/rstudio/commit/9a23c4f28563d77e6c5670c76581636e688fbddd", "message": "prevent resultsCount from being set when Find In Files state is null", "committedDate": "2020-02-04T01:04:57Z", "type": "commit"}, {"oid": "9a23c4f28563d77e6c5670c76581636e688fbddd", "url": "https://github.com/rstudio/rstudio/commit/9a23c4f28563d77e6c5670c76581636e688fbddd", "message": "prevent resultsCount from being set when Find In Files state is null", "committedDate": "2020-02-04T01:04:57Z", "type": "forcePushed"}]}