{"pr_number": 7052, "pr_title": "move console-related preferences to their own pane", "pr_createdAt": "2020-06-05T23:53:28Z", "pr_url": "https://github.com/rstudio/rstudio/pull/7052", "timeline": [{"oid": "ba90d54fa5f9ff1d01037f7072b30d3e2d33d0cb", "url": "https://github.com/rstudio/rstudio/commit/ba90d54fa5f9ff1d01037f7072b30d3e2d33d0cb", "message": "move console-related preferences to their own pane\n\n- Fixes #7047\n- Included the sources for the new icons in GIMP format (GNU Image Manipulation Program)\n- Put back spacing in Code / Display panel previously removed due to crowding", "committedDate": "2020-06-05T23:49:41Z", "type": "commit"}, {"oid": "941aba7beee8a016d236c569b6c1437bdc980d0d", "url": "https://github.com/rstudio/rstudio/commit/941aba7beee8a016d236c569b6c1437bdc980d0d", "message": "update NEWS", "committedDate": "2020-06-05T23:55:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIxMTQ1MQ==", "url": "https://github.com/rstudio/rstudio/pull/7052#discussion_r436211451", "bodyText": "Since you're touching this code anyway, you can get rid of this check (and as much of the underlying machinery as you feel like). We no longer support any R versions that don't have source references.", "author": "jmcphers", "createdAt": "2020-06-06T00:02:45Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/prefs/views/ConsolePreferencesPane.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/*\n+ * ConsolePreferencesPane.java\n+ *\n+ * Copyright (C) 2020 by RStudio, PBC\n+ *\n+ * Unless you have received this program directly from RStudio pursuant\n+ * to the terms of a commercial license agreement with RStudio, then\n+ * this program is licensed to you under the terms of version 3 of the\n+ * GNU Affero General Public License. This program is distributed WITHOUT\n+ * ANY EXPRESS OR IMPLIED WARRANTY, INCLUDING THOSE OF NON-INFRINGEMENT,\n+ * MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Please refer to the\n+ * AGPL (http://www.gnu.org/licenses/agpl-3.0.txt) for more details.\n+ *\n+ */\n+package org.rstudio.studio.client.workbench.prefs.views;\n+\n+import com.google.gwt.resources.client.ImageResource;\n+import com.google.gwt.user.client.ui.Label;\n+import com.google.inject.Inject;\n+import org.rstudio.core.client.prefs.RestartRequirement;\n+import org.rstudio.core.client.resources.ImageResource2x;\n+import org.rstudio.core.client.widget.NumericValueWidget;\n+import org.rstudio.core.client.widget.SelectWidget;\n+import org.rstudio.studio.client.application.Desktop;\n+import org.rstudio.studio.client.workbench.model.Session;\n+import org.rstudio.studio.client.workbench.prefs.model.UserPrefs;\n+\n+\n+public class ConsolePreferencesPane extends PreferencesPane\n+{\n+   @Inject\n+   public ConsolePreferencesPane(UserPrefs prefs,\n+                                 Session session,\n+                                 PreferencesDialogResources res)\n+   {\n+      prefs_ = prefs;\n+      res_ = res;\n+\n+      add(headerLabel(\"Display\"));\n+      add(checkboxPref(\"Show syntax highlighting in console input\", prefs_.syntaxColorConsole()));\n+      add(checkboxPref(\"Different color for error or message output (requires restart)\", prefs_.highlightConsoleErrors()));\n+      NumericValueWidget limitLengthPref =\n+         numericPref(\"Limit length of lines to:\", prefs_.consoleLineLengthLimit());\n+      add(nudgeRightPlus(limitLengthPref));\n+\n+      consoleColorMode_ = new SelectWidget(\n+         \"ANSI Escape Codes:\",\n+         new String[] {\n+            \"Show ANSI colors\",\n+            \"Remove ANSI codes\",\n+            \"Ignore ANSI codes (1.0 behavior)\"\n+         },\n+         new String[] {\n+            UserPrefs.ANSI_CONSOLE_MODE_ON,\n+            UserPrefs.ANSI_CONSOLE_MODE_STRIP,\n+            UserPrefs.ANSI_CONSOLE_MODE_OFF\n+         },\n+         false,\n+         true,\n+         false);\n+      add(consoleColorMode_);\n+\n+      // The error handler features require source references; if this R\n+      // version doesn't support them, don't show these options. \n+      if (session.getSessionInfo().getHaveSrcrefAttribute())", "originalCommit": "941aba7beee8a016d236c569b6c1437bdc980d0d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "996e8e1cc95223b5e785b80f77171d9a7a5e302e", "url": "https://github.com/rstudio/rstudio/commit/996e8e1cc95223b5e785b80f77171d9a7a5e302e", "message": "eliminate handling of R versions without source references", "committedDate": "2020-06-06T17:10:09Z", "type": "commit"}]}