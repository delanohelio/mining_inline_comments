{"pr_number": 7341, "pr_title": "Pop out navigated URL if known", "pr_createdAt": "2020-07-14T00:02:59Z", "pr_url": "https://github.com/rstudio/rstudio/pull/7341", "timeline": [{"oid": "4695ea78ab5d0a0bda478c5cf73a1c46c5c434cd", "url": "https://github.com/rstudio/rstudio/commit/4695ea78ab5d0a0bda478c5cf73a1c46c5c434cd", "message": "pop out navigated URL if known", "committedDate": "2020-07-14T00:00:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUwNjMwMQ==", "url": "https://github.com/rstudio/rstudio/pull/7341#discussion_r454506301", "bodyText": "Wouldn't this imply an attempt to open a null URL if we couldn't get the IFrame URL (e.g. because of DOM restrictions)?", "author": "kevinushey", "createdAt": "2020-07-14T17:02:07Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/viewer/ViewerPane.java", "diffHunk": "@@ -232,6 +232,15 @@ public void popout()\n       {\n          globalDisplay_.showHtmlFile(rmdPreviewParams_.getOutputFile());\n       }\n+      else if (frame_ != null &&\n+          !StringUtil.equals(frame_.getIFrame().getCurrentUrl(), getUrl()))\n+      {\n+         // Typically we navigate to the unmodified URL (i.e. without the\n+         // viewer_pane=1 query params, etc.) However, if the URL currently\n+         // loaded in the frame is different, the user probably navigated away\n+         // from original URL, so load that URL as-is.\n+         globalDisplay_.openWindow(frame_.getIFrame().getCurrentUrl());", "originalCommit": "4695ea78ab5d0a0bda478c5cf73a1c46c5c434cd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU5Mjc5Nw==", "url": "https://github.com/rstudio/rstudio/pull/7341#discussion_r454592797", "bodyText": "Hmm, you're right (I had this test in at some point but lost it when refactoring). Updated!", "author": "jmcphers", "createdAt": "2020-07-14T19:29:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUwNjMwMQ=="}], "type": "inlineReview"}, {"oid": "cc20fdf48237a9abfbaf50d0dc40d3b2ecfa7abf", "url": "https://github.com/rstudio/rstudio/commit/cc20fdf48237a9abfbaf50d0dc40d3b2ecfa7abf", "message": "add null check for current URL", "committedDate": "2020-07-14T19:26:42Z", "type": "commit"}, {"oid": "1f185f0d59c0902c2a95fc02d0ccef778d903933", "url": "https://github.com/rstudio/rstudio/commit/1f185f0d59c0902c2a95fc02d0ccef778d903933", "message": "update NEWS", "committedDate": "2020-07-14T19:28:27Z", "type": "commit"}]}