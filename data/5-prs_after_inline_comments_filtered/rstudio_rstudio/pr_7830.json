{"pr_number": 7830, "pr_title": "Add build pane clear button, Fix build pane working with virtual scroller", "pr_createdAt": "2020-09-18T03:54:36Z", "pr_url": "https://github.com/rstudio/rstudio/pull/7830", "timeline": [{"oid": "54344abe3148923033c59cef7e053c56a5bfeaf8", "url": "https://github.com/rstudio/rstudio/commit/54344abe3148923033c59cef7e053c56a5bfeaf8", "message": "add build pane clear button, fix build pane working with virtual scroller, various virtual scroller bugs", "committedDate": "2020-09-18T03:45:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA2ODcxNg==", "url": "https://github.com/rstudio/rstudio/pull/7830#discussion_r491068716", "bodyText": "Do you need a custom class for this? The terminal pane has a clear button, and it just does it with a straight ToolbarButton like this:\n      clearButton_ = commands_.clearTerminalScrollbackBuffer().createToolbarButton();\n      clearButton_.addStyleName(ThemeStyles.INSTANCE.terminalClearButton());\n      toolbar.addRightWidget(clearButton_);", "author": "gtritchie", "createdAt": "2020-09-18T16:42:09Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/buildtools/BuildClearButton.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/*\n+ * ConsoleClearButton.java\n+ *\n+ * Copyright (C) 2020 by RStudio, PBC\n+ *\n+ * Unless you have received this program directly from RStudio pursuant\n+ * to the terms of a commercial license agreement with RStudio, then\n+ * this program is licensed to you under the terms of version 3 of the\n+ * GNU Affero General Public License. This program is distributed WITHOUT\n+ * ANY EXPRESS OR IMPLIED WARRANTY, INCLUDING THOSE OF NON-INFRINGEMENT,\n+ * MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Please refer to the\n+ * AGPL (http://www.gnu.org/licenses/agpl-3.0.txt) for more details.\n+ *\n+ */\n+package org.rstudio.studio.client.workbench.views.buildtools;\n+\n+import com.google.gwt.dom.client.Style.Position;\n+import com.google.gwt.resources.client.ImageResource;\n+import com.google.gwt.user.client.ui.Composite;\n+import com.google.gwt.user.client.ui.SimplePanel;\n+import com.google.inject.Inject;\n+import org.rstudio.core.client.command.AppCommand;\n+import org.rstudio.core.client.theme.res.ThemeStyles;\n+import org.rstudio.core.client.widget.ToolbarButton;\n+import org.rstudio.studio.client.workbench.commands.Commands;\n+\n+public class BuildClearButton extends Composite", "originalCommit": "54344abe3148923033c59cef7e053c56a5bfeaf8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA3MTg3OA==", "url": "https://github.com/rstudio/rstudio/pull/7830#discussion_r491071878", "bodyText": "Due to the way the \"mouse down\" action happens I believe that is why the custom class was created for the ConsoleClear button as well. Not getting a TON of value out of having its own class but it's following the precedent set with that icon elsewhere.", "author": "adamconroy", "createdAt": "2020-09-18T16:48:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA2ODcxNg=="}], "type": "inlineReview"}, {"oid": "aab799ada1519c34e4631d3637752cd13ee85b0f", "url": "https://github.com/rstudio/rstudio/commit/aab799ada1519c34e4631d3637752cd13ee85b0f", "message": "remove superfluous menuLabel", "committedDate": "2020-09-18T16:50:59Z", "type": "commit"}, {"oid": "fbc5addfe98a780f8efc5bf423cdeaf6e77bef8b", "url": "https://github.com/rstudio/rstudio/commit/fbc5addfe98a780f8efc5bf423cdeaf6e77bef8b", "message": "use the simpler toolbar.addWidget(command) for build clear button instead of a whole new widget", "committedDate": "2020-09-21T20:54:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjM2MzMxNg==", "url": "https://github.com/rstudio/rstudio/pull/7830#discussion_r492363316", "bodyText": "Should hide this command when Build pane is not available. Do this in BuildCommands.java in setBuildCommandState() in same branch that hides activateBuild.", "author": "gtritchie", "createdAt": "2020-09-21T21:43:55Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/commands/Commands.java", "diffHunk": "@@ -535,6 +535,7 @@\n    public abstract AppCommand loadServerHome();\n \n    // Build\n+   public abstract AppCommand clearBuild();", "originalCommit": "fbc5addfe98a780f8efc5bf423cdeaf6e77bef8b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8934a36dff722bed6ac3077f49466d856d49adb2", "url": "https://github.com/rstudio/rstudio/commit/8934a36dff722bed6ac3077f49466d856d49adb2", "message": "clarified build clear commands", "committedDate": "2020-09-21T22:05:25Z", "type": "commit"}]}