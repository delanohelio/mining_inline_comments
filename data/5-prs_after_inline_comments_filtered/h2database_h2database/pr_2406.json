{"pr_number": 2406, "pr_title": "Implement cardinality check for a nested ARRAY", "pr_createdAt": "2020-01-20T07:37:46Z", "pr_url": "https://github.com/h2database/h2database/pull/2406", "timeline": [{"oid": "e0fc7933a15098f0f804a1df6931c026415e92f4", "url": "https://github.com/h2database/h2database/commit/e0fc7933a15098f0f804a1df6931c026415e92f4", "message": "Pass CastDataProvider to Value.convertScale()", "committedDate": "2020-01-17T05:23:24Z", "type": "commit"}, {"oid": "00a9e4a106fca2195bf6923dcc7e808b89b62b74", "url": "https://github.com/h2database/h2database/commit/00a9e4a106fca2195bf6923dcc7e808b89b62b74", "message": "Move cast method from TypeInfo to Value", "committedDate": "2020-01-17T07:50:37Z", "type": "commit"}, {"oid": "629276fcdab2de7b0852ed4a3dd561584d8a78d4", "url": "https://github.com/h2database/h2database/commit/629276fcdab2de7b0852ed4a3dd561584d8a78d4", "message": "Remove dataType parameter from AggregateData.getValue()", "committedDate": "2020-01-17T09:07:59Z", "type": "commit"}, {"oid": "841bc3c37cb03a6ded26dec1c10ad4fb1dda7db0", "url": "https://github.com/h2database/h2database/commit/841bc3c37cb03a6ded26dec1c10ad4fb1dda7db0", "message": "Call some Value.convertTo*() methods directly", "committedDate": "2020-01-18T06:51:59Z", "type": "commit"}, {"oid": "983c6577b0e50d4bfc6332ecf530ed70e804f2a2", "url": "https://github.com/h2database/h2database/commit/983c6577b0e50d4bfc6332ecf530ed70e804f2a2", "message": "Remove some no-op data type conversions", "committedDate": "2020-01-18T07:01:12Z", "type": "commit"}, {"oid": "e699c593af743876f65439aa0b46502f39d4f43a", "url": "https://github.com/h2database/h2database/commit/e699c593af743876f65439aa0b46502f39d4f43a", "message": "Pass TypeInfo and conversion mode to Value.convertTo()", "committedDate": "2020-01-19T07:07:41Z", "type": "commit"}, {"oid": "8f12561cc109ca3792932665419f7539add60a06", "url": "https://github.com/h2database/h2database/commit/8f12561cc109ca3792932665419f7539add60a06", "message": "Don't call Value.convertScale() from other packages", "committedDate": "2020-01-19T10:20:27Z", "type": "commit"}, {"oid": "28e0e2db684899b6b04033007ed77d5d9175352a", "url": "https://github.com/h2database/h2database/commit/28e0e2db684899b6b04033007ed77d5d9175352a", "message": "Merge convertScale() methods into main convertTo*() methods", "committedDate": "2020-01-19T10:31:20Z", "type": "commit"}, {"oid": "ffe1d9c86c0bbff25b49df2e5ce96e0395c194de", "url": "https://github.com/h2database/h2database/commit/ffe1d9c86c0bbff25b49df2e5ce96e0395c194de", "message": "Remove incorrect precision conversion from NUMERIC data type", "committedDate": "2020-01-20T05:56:05Z", "type": "commit"}, {"oid": "c392b2c0184fbc8eb3bba455bd2546032570a1d9", "url": "https://github.com/h2database/h2database/commit/c392b2c0184fbc8eb3bba455bd2546032570a1d9", "message": "Merge convertPrecision() methods into main convertTo*() methods", "committedDate": "2020-01-20T06:50:53Z", "type": "commit"}, {"oid": "62e93768ac9c8b0dee045732471476cad56b8846", "url": "https://github.com/h2database/h2database/commit/62e93768ac9c8b0dee045732471476cad56b8846", "message": "Merge checkPrecision() methods into main convertTo*() methods", "committedDate": "2020-01-20T06:51:16Z", "type": "commit"}, {"oid": "514ce3e0a35e3f7583d2eac7401579f9b4075184", "url": "https://github.com/h2database/h2database/commit/514ce3e0a35e3f7583d2eac7401579f9b4075184", "message": "Merge ExtTypeInfo.cast() methods into main Value.convertTo*() methods", "committedDate": "2020-01-20T07:11:04Z", "type": "commit"}, {"oid": "b1faa714c93faefc07327a4590bc5f04d9360c25", "url": "https://github.com/h2database/h2database/commit/b1faa714c93faefc07327a4590bc5f04d9360c25", "message": "Implement cardinality check for a nested ARRAY", "committedDate": "2020-01-20T07:26:47Z", "type": "commit"}, {"oid": "707ec05ef26846200a4b003cc892826fb0650ff6", "url": "https://github.com/h2database/h2database/commit/707ec05ef26846200a4b003cc892826fb0650ff6", "message": "Update changelog", "committedDate": "2020-01-20T07:26:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NTgxNA==", "url": "https://github.com/h2database/h2database/pull/2406#discussion_r370945814", "bodyText": "for to -> to", "author": "grandinj", "createdAt": "2020-01-25T17:39:12Z", "path": "h2/src/main/org/h2/value/Value.java", "diffHunk": "@@ -702,17 +702,73 @@ public final Value convertTo(int targetType, CastDataProvider provider) {\n     }\n \n     /**\n-     * Convert a value to the specified type.\n+     * Convert a value to the specified type without taking scale and precision\n+     * into account.\n      *\n-     * @param targetType the type of the returned value\n-     * @param provider the cast information provider\n-     * @param column the column (if any), used for to improve the error message if conversion fails\n+     * @param targetType\n+     *            the type of the returned value\n+     * @param provider\n+     *            the cast information provider\n+     * @return the converted value\n+     */\n+    public final Value convertTo(TypeInfo targetType, CastDataProvider provider) {\n+        return convertTo(targetType.getValueType(), targetType.getExtTypeInfo(), provider, null);\n+    }\n+\n+    /**\n+     * Convert a value to the specified type without taking scale and precision\n+     * into account.\n+     *\n+     * @param targetType\n+     *            the type of the returned value\n+     * @param provider\n+     *            the cast information provider\n+     * @param column\n+     *            the column, used for to improve the error message if", "originalCommit": "00a9e4a106fca2195bf6923dcc7e808b89b62b74", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk3MjMyNA==", "url": "https://github.com/h2database/h2database/pull/2406#discussion_r370972324", "bodyText": "4e615c5", "author": "katzyn", "createdAt": "2020-01-26T04:13:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NTgxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NTgyMg==", "url": "https://github.com/h2database/h2database/pull/2406#discussion_r370945822", "bodyText": "to a -> to the", "author": "grandinj", "createdAt": "2020-01-25T17:39:28Z", "path": "h2/src/main/org/h2/value/Value.java", "diffHunk": "@@ -702,17 +702,73 @@ public final Value convertTo(int targetType, CastDataProvider provider) {\n     }\n \n     /**\n-     * Convert a value to the specified type.\n+     * Convert a value to the specified type without taking scale and precision\n+     * into account.\n      *\n-     * @param targetType the type of the returned value\n-     * @param provider the cast information provider\n-     * @param column the column (if any), used for to improve the error message if conversion fails\n+     * @param targetType\n+     *            the type of the returned value\n+     * @param provider\n+     *            the cast information provider\n+     * @return the converted value\n+     */\n+    public final Value convertTo(TypeInfo targetType, CastDataProvider provider) {\n+        return convertTo(targetType.getValueType(), targetType.getExtTypeInfo(), provider, null);\n+    }\n+\n+    /**\n+     * Convert a value to the specified type without taking scale and precision\n+     * into account.\n+     *\n+     * @param targetType\n+     *            the type of the returned value\n+     * @param provider\n+     *            the cast information provider\n+     * @param column\n+     *            the column, used for to improve the error message if\n+     *            conversion fails\n      * @return the converted value\n      */\n     public final Value convertTo(TypeInfo targetType, CastDataProvider provider, Object column) {\n         return convertTo(targetType.getValueType(), targetType.getExtTypeInfo(), provider, column);\n     }\n \n+    /**\n+     * Cast a value to the specified type. The scale is set if applicable. The\n+     * value is truncated to a required precision.", "originalCommit": "00a9e4a106fca2195bf6923dcc7e808b89b62b74", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk3MjMzMw==", "url": "https://github.com/h2database/h2database/pull/2406#discussion_r370972333", "bodyText": "4e615c5", "author": "katzyn", "createdAt": "2020-01-26T04:13:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NTgyMg=="}], "type": "inlineReview"}]}