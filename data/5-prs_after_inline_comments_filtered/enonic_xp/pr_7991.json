{"pr_number": 7991, "pr_title": "Application fails to update properly under load #7978", "pr_createdAt": "2020-04-01T12:43:36Z", "pr_url": "https://github.com/enonic/xp/pull/7991", "timeline": [{"oid": "472dbeee664d36fc1dfb2176610c06580683af09", "url": "https://github.com/enonic/xp/commit/472dbeee664d36fc1dfb2176610c06580683af09", "message": "Application fails to update properly under load #7978", "committedDate": "2020-04-01T12:42:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY4Mzk2Mg==", "url": "https://github.com/enonic/xp/pull/7991#discussion_r401683962", "bodyText": "Config happens after invalidation. Super-fast frontend request may grab old config for ScriptExecutor", "author": "rymsha", "createdAt": "2020-04-01T15:00:53Z", "path": "modules/core/core-app/src/main/java/com/enonic/xp/core/impl/app/ApplicationRegistry.java", "diffHunk": "@@ -96,8 +97,7 @@ public void setConfiguration( final ApplicationKey key, final Configuration conf\n                     callInvalidators( k, ApplicationInvalidationLevel.CACHE );\n                 }\n                 LOG.debug( \"Configure and unlatch app {}\", key );\n-                v.application.setConfig( configuration );\n-                v.unlatch();\n+                v.setConfig( configuration );", "originalCommit": "472dbeee664d36fc1dfb2176610c06580683af09", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcwMTc3NQ==", "url": "https://github.com/enonic/xp/pull/7991#discussion_r401701775", "bodyText": "It is less critical. And it used to be like this before. Submitted new issue #7994", "author": "rymsha", "createdAt": "2020-04-01T15:24:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY4Mzk2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjA5Njk5MA==", "url": "https://github.com/enonic/xp/pull/7991#discussion_r402096990", "bodyText": "Why this log is used twice?", "author": "anatol-sialitski", "createdAt": "2020-04-02T07:11:35Z", "path": "modules/core/core-app/src/main/java/com/enonic/xp/core/impl/app/ApplicationServiceImpl.java", "diffHunk": "@@ -579,7 +582,9 @@ private void uninstallBundle( final ApplicationKey applicationKey )\n \n             if ( bundle != null )\n             {\n+                LOG.debug( \"Uninstalling application {} bundle {}\", applicationKey, bundle.getBundleId() );", "originalCommit": "472dbeee664d36fc1dfb2176610c06580683af09", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}