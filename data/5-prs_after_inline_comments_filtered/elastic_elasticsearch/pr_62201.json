{"pr_number": 62201, "pr_title": "Enable searchable snapshots in release builds", "pr_createdAt": "2020-09-10T07:37:36Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/62201", "timeline": [{"oid": "a6f21bfcd56638ca6daad0882007945e984a932b", "url": "https://github.com/elastic/elasticsearch/commit/a6f21bfcd56638ca6daad0882007945e984a932b", "message": "Enable searchable snapshots in release builds", "committedDate": "2020-09-10T07:36:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2MjI0Mw==", "url": "https://github.com/elastic/elasticsearch/pull/62201#discussion_r486162243", "bodyText": "nit: use Map.of()", "author": "tlrx", "createdAt": "2020-09-10T08:33:03Z", "path": "x-pack/plugin/searchable-snapshots/src/main/java/org/elasticsearch/xpack/searchablesnapshots/SearchableSnapshots.java", "diffHunk": "@@ -304,25 +280,17 @@ public void onIndexModule(IndexModule indexModule) {\n         IndexNameExpressionResolver indexNameExpressionResolver,\n         Supplier<DiscoveryNodes> nodesInCluster\n     ) {\n-        if (SEARCHABLE_SNAPSHOTS_FEATURE_ENABLED) {\n-            return List.of(\n-                new RestSearchableSnapshotsStatsAction(),\n-                new RestClearSearchableSnapshotsCacheAction(),\n-                new RestMountSearchableSnapshotAction(),\n-                new RestRepositoryStatsAction()\n-            );\n-        } else {\n-            return List.of();\n-        }\n+        return List.of(\n+            new RestSearchableSnapshotsStatsAction(),\n+            new RestClearSearchableSnapshotsCacheAction(),\n+            new RestMountSearchableSnapshotAction(),\n+            new RestRepositoryStatsAction()\n+        );\n     }\n \n     @Override\n     public Map<String, ExistingShardsAllocator> getExistingShardsAllocators() {\n-        if (SEARCHABLE_SNAPSHOTS_FEATURE_ENABLED) {\n-            return Collections.singletonMap(SearchableSnapshotAllocator.ALLOCATOR_NAME, new SearchableSnapshotAllocator());\n-        } else {\n-            return Collections.emptyMap();\n-        }\n+        return Collections.singletonMap(SearchableSnapshotAllocator.ALLOCATOR_NAME, new SearchableSnapshotAllocator());", "originalCommit": "a6f21bfcd56638ca6daad0882007945e984a932b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE4MzE5Ng==", "url": "https://github.com/elastic/elasticsearch/pull/62201#discussion_r486183196", "bodyText": "Have changed it, but don't think it's a great use of my time using these features if I have to change everything back on  backport.", "author": "ywelsch", "createdAt": "2020-09-10T09:06:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2MjI0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE4NDMyNA==", "url": "https://github.com/elastic/elasticsearch/pull/62201#discussion_r486184324", "bodyText": "That was more for the sake of coherency - either use one or the other but avoid mixing them", "author": "tlrx", "createdAt": "2020-09-10T09:07:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE2MjI0Mw=="}], "type": "inlineReview"}, {"oid": "d6e5338e72318f984454fbc6e5ac27969f9a5cc0", "url": "https://github.com/elastic/elasticsearch/commit/d6e5338e72318f984454fbc6e5ac27969f9a5cc0", "message": "bla", "committedDate": "2020-09-10T09:05:26Z", "type": "commit"}]}