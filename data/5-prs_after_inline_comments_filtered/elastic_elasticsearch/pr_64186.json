{"pr_number": 64186, "pr_title": "Introduce functional tests for new REST test plugins", "pr_createdAt": "2020-10-26T22:25:31Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/64186", "timeline": [{"oid": "a4915e4c8a7a30968015e744c2285485832de58d", "url": "https://github.com/elastic/elasticsearch/commit/a4915e4c8a7a30968015e744c2285485832de58d", "message": "introduce functional test for yamlRestTest", "committedDate": "2020-10-26T19:30:49Z", "type": "commit"}, {"oid": "58805877c71ed79175befb8bf2be6394859e16d5", "url": "https://github.com/elastic/elasticsearch/commit/58805877c71ed79175befb8bf2be6394859e16d5", "message": "cleanup", "committedDate": "2020-10-26T19:40:21Z", "type": "commit"}, {"oid": "645136c68fd1387bb6943b339c37310bcef570f8", "url": "https://github.com/elastic/elasticsearch/commit/645136c68fd1387bb6943b339c37310bcef570f8", "message": "add test for yamlRestCompatTest", "committedDate": "2020-10-26T22:21:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjMwODA0Mg==", "url": "https://github.com/elastic/elasticsearch/pull/64186#discussion_r512308042", "bodyText": "Wasn't a fan of doing this...but for reasons I have hard time following, this requires the :distribution:archives:linux-tar (my workstation is a linux box) project to exist. I assume that OS specific resolution, and did not want to have to mirror all of the variants from distribution:archive as dummy projects.\nAlternatively, I think i could only run this test specifically for a given OS, but avoided doing that since there is some file copying going on and wanted to get coverage across OS's. The distribution in use is not an important detail of the test.", "author": "jakelandis", "createdAt": "2020-10-26T22:30:45Z", "path": "buildSrc/src/main/java/org/elasticsearch/gradle/test/rest/YamlRestCompatTestPlugin.java", "diffHunk": "@@ -73,9 +73,11 @@ public void apply(Project project) {\n         SourceSet yamlTestSourceSet = sourceSets.getByName(YamlRestTestPlugin.SOURCE_SET_NAME);\n         GradleUtils.extendSourceSet(project, YamlRestTestPlugin.SOURCE_SET_NAME, SOURCE_SET_NAME);\n \n-        // create the test cluster container, and always use the default distribution\n+        // create the test cluster container, and use the default distribution. System property is only used to help test this plugin.", "originalCommit": "645136c68fd1387bb6943b339c37310bcef570f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUyNDIyMg==", "url": "https://github.com/elastic/elasticsearch/pull/64186#discussion_r512524222", "bodyText": "As I mentioned in another comment, you should be able to just configure the distribution explicitly in the tests so this sys property in the production code should not be required. IMO its fine to not test all OS specific resolutions as this is mostly logic done in the distribution-download-plugin and the test cluster plugin which we test separately", "author": "breskeby", "createdAt": "2020-10-27T09:12:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjMwODA0Mg=="}], "type": "inlineReview"}, {"oid": "249f64f05d572de4c0480ab87fae858ee7902442", "url": "https://github.com/elastic/elasticsearch/commit/249f64f05d572de4c0480ab87fae858ee7902442", "message": "review comments", "committedDate": "2020-10-27T17:30:36Z", "type": "commit"}, {"oid": "f92eade1aa00451a664ab679523cd763aedbcff7", "url": "https://github.com/elastic/elasticsearch/commit/f92eade1aa00451a664ab679523cd763aedbcff7", "message": "Merge branch 'master' into yaml_rest_test_tests", "committedDate": "2020-10-27T18:26:41Z", "type": "commit"}, {"oid": "856c2d3992d0b429e73207f25cd46319ce87674c", "url": "https://github.com/elastic/elasticsearch/commit/856c2d3992d0b429e73207f25cd46319ce87674c", "message": "Merge branch 'master' into yaml_rest_test_tests", "committedDate": "2021-01-13T14:25:27Z", "type": "commit"}, {"oid": "baf2aefbc5112b43eec046852932f98e7312033c", "url": "https://github.com/elastic/elasticsearch/commit/baf2aefbc5112b43eec046852932f98e7312033c", "message": "Merge branch 'master' of github.com:elastic/elasticsearch into yaml_rest_test_tests", "committedDate": "2021-01-13T14:38:52Z", "type": "commit"}, {"oid": "19e1b9cfa22a8fb005a08f5ca2a6ffd51d0aaa90", "url": "https://github.com/elastic/elasticsearch/commit/19e1b9cfa22a8fb005a08f5ca2a6ffd51d0aaa90", "message": "wip: add rest resource plugin test (broke others)", "committedDate": "2021-01-15T22:34:57Z", "type": "commit"}, {"oid": "c7c947825f71a4c468e6c222d4bd89898caa6bae", "url": "https://github.com/elastic/elasticsearch/commit/c7c947825f71a4c468e6c222d4bd89898caa6bae", "message": "fix other tests", "committedDate": "2021-01-18T20:51:43Z", "type": "commit"}, {"oid": "a951ae55d777dd8e765894858813d5e7dbc1054d", "url": "https://github.com/elastic/elasticsearch/commit/a951ae55d777dd8e765894858813d5e7dbc1054d", "message": "minor review change", "committedDate": "2021-01-19T14:32:12Z", "type": "commit"}, {"oid": "5021379eabe4a2362a763df91d342e8bbc3af495", "url": "https://github.com/elastic/elasticsearch/commit/5021379eabe4a2362a763df91d342e8bbc3af495", "message": "introduce AbstractGradleFuncTest", "committedDate": "2021-01-20T16:34:29Z", "type": "commit"}, {"oid": "e02be1a384dbb1e25596fbfd5c5f48b0af36d1d0", "url": "https://github.com/elastic/elasticsearch/commit/e02be1a384dbb1e25596fbfd5c5f48b0af36d1d0", "message": "prefer file(..) over new File()", "committedDate": "2021-01-20T16:55:26Z", "type": "commit"}]}