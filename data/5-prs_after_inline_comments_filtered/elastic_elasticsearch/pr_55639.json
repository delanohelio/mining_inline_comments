{"pr_number": 55639, "pr_title": "Add a simple 'fetch fields' phase.", "pr_createdAt": "2020-04-23T03:28:15Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55639", "timeline": [{"oid": "358ade3ebab12dd8899d6d156a780a2801ddd43c", "url": "https://github.com/elastic/elasticsearch/commit/358ade3ebab12dd8899d6d156a780a2801ddd43c", "message": "Resolve field names only one time for all hits.", "committedDate": "2020-04-23T03:29:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ4OTk0OA==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413489948", "bodyText": "I tried hard to write proper unit tests (in the style of FetchSourcePhaseTests), but it's currently challenging to stub out the required pieces like source lookup. I think some broader refactors are necessary before it's possible to unit test these classes.", "author": "jtibshirani", "createdAt": "2020-04-23T03:55:50Z", "path": "server/src/test/java/org/elasticsearch/search/fetch/subphase/FetchFieldsPhaseTests.java", "diffHunk": "@@ -0,0 +1,175 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.search.fetch.subphase;\n+\n+import org.elasticsearch.action.search.SearchPhaseExecutionException;\n+import org.elasticsearch.action.search.SearchRequestBuilder;\n+import org.elasticsearch.action.search.SearchResponse;\n+import org.elasticsearch.action.support.WriteRequest;\n+import org.elasticsearch.common.document.DocumentField;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+import org.elasticsearch.common.xcontent.XContentFactory;\n+import org.elasticsearch.search.SearchHit;\n+import org.elasticsearch.test.ESSingleNodeTestCase;\n+import org.junit.Before;\n+\n+import java.io.IOException;\n+import java.util.Map;\n+\n+import static org.hamcrest.Matchers.containsString;\n+import static org.hamcrest.Matchers.equalTo;\n+import static org.hamcrest.Matchers.hasItems;\n+\n+public class FetchFieldsPhaseTests extends ESSingleNodeTestCase {", "originalCommit": "358ade3ebab12dd8899d6d156a780a2801ddd43c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk2NTQyMw==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413965423", "bodyText": "What if you made something like:\npublic void hitsExecute(Function<SearchHit, Map<String, Object>> sourceLookup, SearchHit[] hits)\n\nand unit tested that? Then and the only thing missing a unit test would be the map from search context to \"simple\" classes?", "author": "nik9000", "createdAt": "2020-04-23T16:57:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ4OTk0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEzNjQ5MQ==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r414136491", "bodyText": "I had been hesitant to do this, because I thought it would make FetchFieldsPhase harder to read... but I actually think it turned out pretty cleanly. I don't think I followed your suggestion exactly though, curious to hear what you think.", "author": "jtibshirani", "createdAt": "2020-04-23T21:28:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ4OTk0OA=="}], "type": "inlineReview"}, {"oid": "88d42d8aaf2643d75f8fc716d0a13251690253df", "url": "https://github.com/elastic/elasticsearch/commit/88d42d8aaf2643d75f8fc716d0a13251690253df", "message": "Add a simple 'fetch fields' phase.\n\nCurrently the phase just looks up each field name in the _source and returns its\nvalues in the 'fields' section of the response. There are several aspects that\nneed improvement -- this PR just lays out the initial class structure and tests.", "committedDate": "2020-04-23T04:04:10Z", "type": "commit"}, {"oid": "9583e1a94326787f35ea24f573bf0ef4c31d2304", "url": "https://github.com/elastic/elasticsearch/commit/9583e1a94326787f35ea24f573bf0ef4c31d2304", "message": "Test that DocumentField can handle maps and lists.", "committedDate": "2020-04-23T04:24:33Z", "type": "commit"}, {"oid": "e6c86a781ceed507c4dbca4b6f18efde5b90f085", "url": "https://github.com/elastic/elasticsearch/commit/e6c86a781ceed507c4dbca4b6f18efde5b90f085", "message": "Ensure we don't return values for object fields.", "committedDate": "2020-04-23T04:24:35Z", "type": "commit"}, {"oid": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "url": "https://github.com/elastic/elasticsearch/commit/facc1ccf9c9d4dee761d54427d04ca41ad669193", "message": "Resolve field names only one time for all hits.", "committedDate": "2020-04-23T04:26:25Z", "type": "commit"}, {"oid": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "url": "https://github.com/elastic/elasticsearch/commit/facc1ccf9c9d4dee761d54427d04ca41ad669193", "message": "Resolve field names only one time for all hits.", "committedDate": "2020-04-23T04:26:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MjYyNQ==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413952625", "bodyText": "Ah! Except it won't be for stuff like geo_points, right?", "author": "nik9000", "createdAt": "2020-04-23T16:39:52Z", "path": "server/src/main/java/org/elasticsearch/common/document/DocumentField.java", "diffHunk": "@@ -113,10 +113,9 @@ public void writeTo(StreamOutput out) throws IOException {\n     public XContentBuilder toXContent(XContentBuilder builder, Params params) throws IOException {\n         builder.startArray(name);\n         for (Object value : values) {\n-            // this call doesn't really need to support writing any kind of object.\n-            // Stored fields values are converted using MappedFieldType#valueForDisplay.\n-            // As a result they can either be Strings, Numbers, or Booleans, that's\n-            // all.\n+            // This call doesn't really need to support writing any kind of object, since the values\n+            // here are always serializable to xContent. Each value could be a leaf types like a string,\n+            // number, or boolean, a list of such values, or a map of such values with string keys.", "originalCommit": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MzEyNg==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413953126", "bodyText": "I do wonder if it'd be nicer to have the \"type\" of the field available so we don't need all the nasty reflection in value.", "author": "nik9000", "createdAt": "2020-04-23T16:40:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MjYyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MzIzMQ==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413953231", "bodyText": "But that is a problem for another time, I think.", "author": "nik9000", "createdAt": "2020-04-23T16:40:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MjYyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDAxMTE3Ng==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r414011176", "bodyText": "I agree, this is a really unfortunate part of the current PR. It's on the top of my mind in terms of what needs figuring out for a follow-up.", "author": "jtibshirani", "createdAt": "2020-04-23T18:04:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MjYyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MzUwNw==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413953507", "bodyText": "readOptionalStringList?", "author": "nik9000", "createdAt": "2020-04-23T16:41:01Z", "path": "server/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java", "diffHunk": "@@ -244,6 +247,12 @@ public SearchSourceBuilder(StreamInput in) throws IOException {\n         sliceBuilder = in.readOptionalWriteable(SliceBuilder::new);\n         collapse = in.readOptionalWriteable(CollapseBuilder::new);\n         trackTotalHitsUpTo = in.readOptionalInt();\n+\n+        if (in.getVersion().onOrAfter(Version.V_8_0_0)) {\n+            if (in.readBoolean()) {", "originalCommit": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MzY1MQ==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413953651", "bodyText": "writeOptionalStringCollection?", "author": "nik9000", "createdAt": "2020-04-23T16:41:12Z", "path": "server/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java", "diffHunk": "@@ -298,6 +307,13 @@ public void writeTo(StreamOutput out) throws IOException {\n         out.writeOptionalWriteable(sliceBuilder);\n         out.writeOptionalWriteable(collapse);\n         out.writeOptionalInt(trackTotalHitsUpTo);\n+\n+        if (out.getVersion().onOrAfter(Version.V_8_0_0)) {\n+            out.writeBoolean(fetchFields != null);", "originalCommit": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1NzM2MQ==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413957361", "bodyText": "I wonder when it'll be time to convert this to ObjectParser.....", "author": "nik9000", "createdAt": "2020-04-23T16:46:31Z", "path": "server/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java", "diffHunk": "@@ -1120,6 +1154,11 @@ public void parseXContent(XContentParser parser, boolean checkTrailingTokens) th\n                     while ((token = parser.nextToken()) != XContentParser.Token.END_ARRAY) {\n                         docValueFields.add(FieldAndFormat.fromXContent(parser));\n                     }\n+                } else if (FETCH_FIELDS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {", "originalCommit": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1ODc4OA==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413958788", "bodyText": "Do you see this ever being more than List<FieldConfig> or something like that?", "author": "nik9000", "createdAt": "2020-04-23T16:48:35Z", "path": "server/src/main/java/org/elasticsearch/search/fetch/subphase/FetchFieldsContext.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.elasticsearch.search.fetch.subphase;\n+\n+import java.util.List;\n+\n+/**\n+ * The context needed to retrieve fields.\n+ */\n+public class FetchFieldsContext {", "originalCommit": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1OTA1Ng==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413959056", "bodyText": "I'm wondering if it makes sense to have this class at all if it'll never end up holding more than a single list.", "author": "nik9000", "createdAt": "2020-04-23T16:48:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1ODc4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDAyMDc1MQ==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r414020751", "bodyText": "I don't have immediate plans to add more information to the context. But I think it's worth having a dedicated context class for consistency with FetchDocValuesContext and ScriptFieldsContext.", "author": "jtibshirani", "createdAt": "2020-04-23T18:19:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1ODc4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDYwMjU4Mg==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r414602582", "bodyText": "Fair enough!", "author": "nik9000", "createdAt": "2020-04-24T14:05:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1ODc4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1OTk0NQ==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413959945", "bodyText": "I could see wanting to switch this to something a little less instanceof soon. But this'll get the job done for now!", "author": "nik9000", "createdAt": "2020-04-23T16:50:20Z", "path": "server/src/main/java/org/elasticsearch/search/fetch/subphase/FetchFieldsPhase.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.search.fetch.subphase;\n+\n+import org.apache.lucene.index.LeafReaderContext;\n+import org.apache.lucene.index.ReaderUtil;\n+import org.elasticsearch.common.document.DocumentField;\n+import org.elasticsearch.index.mapper.DocumentMapper;\n+import org.elasticsearch.search.SearchHit;\n+import org.elasticsearch.search.fetch.FetchSubPhase;\n+import org.elasticsearch.search.internal.SearchContext;\n+import org.elasticsearch.search.lookup.SourceLookup;\n+\n+import java.util.Collection;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+/**\n+ * A fetch sub-phase for high-level field retrieval. Given a list of fields, it\n+ * retrieves the field values from _source and returns them as document fields.\n+ */\n+public final class FetchFieldsPhase implements FetchSubPhase {\n+\n+    @Override\n+    @SuppressWarnings(\"unchecked\")\n+    public void hitsExecute(SearchContext context, SearchHit[] hits) {\n+        FetchFieldsContext fetchFieldsContext = context.fetchFieldsContext();\n+        if (fetchFieldsContext == null || fetchFieldsContext.fields().isEmpty()) {\n+            return;\n+        }\n+\n+        DocumentMapper documentMapper = context.mapperService().documentMapper();\n+        if (documentMapper.sourceMapper().enabled() == false) {\n+            throw new IllegalArgumentException(\"Unable to retrieve the requested [fields] since _source is \" +\n+                \"disabled in the mappings for index [\" + context.indexShard().shardId().getIndexName() + \"]\");\n+        }\n+\n+        Set<String> fields = new HashSet<>();\n+        for (String fieldPattern : context.fetchFieldsContext().fields()) {\n+            if (documentMapper.objectMappers().containsKey(fieldPattern)) {\n+                continue;\n+            }\n+            Collection<String> concreteFields = context.mapperService().simpleMatchToFullName(fieldPattern);\n+            fields.addAll(concreteFields);\n+        }\n+\n+        SourceLookup sourceLookup = context.lookup().source();\n+\n+        for (SearchHit hit : hits) {\n+            int readerIndex = ReaderUtil.subIndex(hit.docId(), context.searcher().getIndexReader().leaves());\n+            LeafReaderContext readerContext = context.searcher().getIndexReader().leaves().get(readerIndex);\n+            sourceLookup.setSegmentAndDocument(readerContext, hit.docId());\n+\n+            Map<String, Object> valuesByField = sourceLookup.extractValues(fields);\n+\n+            for (Map.Entry<String, Object> entry : valuesByField.entrySet()) {\n+                String field = entry.getKey();\n+                Object value = entry.getValue();\n+                List<Object> values = value instanceof List\n+                    ? (List<Object>) value\n+                    : List.of(value);", "originalCommit": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk2MDMyMA==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413960320", "bodyText": "I think we should have javadoc for this.", "author": "nik9000", "createdAt": "2020-04-23T16:50:53Z", "path": "server/src/main/java/org/elasticsearch/search/internal/SearchContext.java", "diffHunk": "@@ -201,6 +202,10 @@ public InnerHitsContext innerHits() {\n \n     public abstract SearchContext docValuesContext(FetchDocValuesContext docValuesContext);\n \n+    public abstract FetchFieldsContext fetchFieldsContext();", "originalCommit": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk2MjYzMw==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413962633", "bodyText": "I wonder if this'd be better kept in the new fetch phase, especially if we're going to migrate away from it.\nI wonder if a better interface for collecting the values is Map<String, Consumer<?>> or something shaped like that. I feel like it'd let you build flexible casting and formatting pretty naturally. But that can wait too.", "author": "nik9000", "createdAt": "2020-04-23T16:54:05Z", "path": "server/src/main/java/org/elasticsearch/search/lookup/SourceLookup.java", "diffHunk": "@@ -128,6 +129,22 @@ public BytesReference internalSourceRef() {\n         return XContentMapValues.extractRawValues(path, loadSourceIfNeeded());\n     }\n \n+    /**\n+     * For each of the provided paths, return its value in the source. Note that\n+     */\n+    public Map<String, Object> extractValues(Collection<String> paths) {", "originalCommit": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDAwODE0OA==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r414008148", "bodyText": "+1, I'll move this up into FetchFieldsPhase. I'll wait to refine the interface until I have a better handle on the approach to value formatting.", "author": "jtibshirani", "createdAt": "2020-04-23T17:59:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk2MjYzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk2MzI2NQ==", "url": "https://github.com/elastic/elasticsearch/pull/55639#discussion_r413963265", "bodyText": "\ud83d\udc4d\nThis on looks like it took a while to find!", "author": "nik9000", "createdAt": "2020-04-23T16:54:58Z", "path": "server/src/test/java/org/elasticsearch/search/SearchHitTests.java", "diffHunk": "@@ -188,7 +188,7 @@ public void testFromXContentLenientParsing() throws IOException {\n         XContentType xContentType = randomFrom(XContentType.values());\n         SearchHit searchHit = createTestItem(xContentType, true, true);\n         BytesReference originalBytes = toXContent(searchHit, xContentType, true);\n-        Predicate<String> pathsToExclude = path -> (path.endsWith(\"highlight\") || path.endsWith(\"fields\") || path.contains(\"_source\")\n+        Predicate<String> pathsToExclude = path -> (path.endsWith(\"highlight\") || path.contains(\"fields\") || path.contains(\"_source\")", "originalCommit": "facc1ccf9c9d4dee761d54427d04ca41ad669193", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "63653944d324d395a1a6f99534b99a05588094e8", "url": "https://github.com/elastic/elasticsearch/commit/63653944d324d395a1a6f99534b99a05588094e8", "message": "Use correct stream serialization methods.", "committedDate": "2020-04-23T18:08:31Z", "type": "commit"}, {"oid": "f1f179ae0270329b74eab52c9b475ee27fd7d155", "url": "https://github.com/elastic/elasticsearch/commit/f1f179ae0270329b74eab52c9b475ee27fd7d155", "message": "Pull extractValues up into FetchFieldsPhase.", "committedDate": "2020-04-23T20:57:25Z", "type": "commit"}, {"oid": "cb9c6e07e00f1c971a97d33409a9b22f970be751", "url": "https://github.com/elastic/elasticsearch/commit/cb9c6e07e00f1c971a97d33409a9b22f970be751", "message": "Add javadoc.", "committedDate": "2020-04-23T20:57:27Z", "type": "commit"}, {"oid": "8f71d7b750515cdfd8aa3aa22bc6daa672ebbdd3", "url": "https://github.com/elastic/elasticsearch/commit/8f71d7b750515cdfd8aa3aa22bc6daa672ebbdd3", "message": "Bring FetchFieldsPhaseTests closer to a real unit test.", "committedDate": "2020-04-23T21:16:53Z", "type": "commit"}, {"oid": "f64415e452fd6183d343b146c9950934ff690ce0", "url": "https://github.com/elastic/elasticsearch/commit/f64415e452fd6183d343b146c9950934ff690ce0", "message": "Fix javadoc.", "committedDate": "2020-04-23T21:39:21Z", "type": "commit"}]}