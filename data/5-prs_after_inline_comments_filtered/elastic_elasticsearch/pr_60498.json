{"pr_number": 60498, "pr_title": "Fix get-license test failure by ensure cluster is ready", "pr_createdAt": "2020-07-31T06:58:39Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/60498", "timeline": [{"oid": "d2bf3b50ad01e8352e07bcecbda7f52db3f4494c", "url": "https://github.com/elastic/elasticsearch/commit/d2bf3b50ad01e8352e07bcecbda7f52db3f4494c", "message": "Fix get-license test failure", "committedDate": "2020-07-31T06:54:34Z", "type": "commit"}, {"oid": "46d7917ecd334c406927e6016d2579af3eb05086", "url": "https://github.com/elastic/elasticsearch/commit/46d7917ecd334c406927e6016d2579af3eb05086", "message": "Use existing helper method to ensure license for doc tests\n\nAdd assertBusy to more places where license checking can fail.", "committedDate": "2020-08-03T01:10:06Z", "type": "commit"}, {"oid": "5ba9deda10e72bc207c343f1b156f16f13797ad1", "url": "https://github.com/elastic/elasticsearch/commit/5ba9deda10e72bc207c343f1b156f16f13797ad1", "message": "Merge remote-tracking branch 'origin/master' into es-59157-get-license-test-failure", "committedDate": "2020-08-03T01:11:55Z", "type": "commit"}, {"oid": "e5c303ae20a7679fbe44c808f370112c46940c25", "url": "https://github.com/elastic/elasticsearch/commit/e5c303ae20a7679fbe44c808f370112c46940c25", "message": "Revert unnecessary change", "committedDate": "2020-08-03T01:13:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE4Njk1Mw==", "url": "https://github.com/elastic/elasticsearch/pull/60498#discussion_r464186953", "bodyText": "Why does this need to support \\\\ but ccr doesn't?", "author": "tvernum", "createdAt": "2020-08-03T04:21:46Z", "path": "docs/src/test/java/org/elasticsearch/smoketest/DocsClientYamlTestSuiteIT.java", "diffHunk": "@@ -175,6 +175,11 @@ protected boolean isCcrTest() {\n         return testName != null && testName.contains(\"/ccr/\");\n     }\n \n+    protected boolean isGetLicenseTest() {\n+        String testName = getTestName();\n+        return testName != null && (testName.contains(\"/get-license/\") || testName.contains(\"\\\\get-license\\\\\"));", "originalCommit": "e5c303ae20a7679fbe44c808f370112c46940c25", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE5MzI2OQ==", "url": "https://github.com/elastic/elasticsearch/pull/60498#discussion_r464193269", "bodyText": "My guess is that ccr tests do not run on Windows? There are other similar methods in this file, e.g. isMachineLearningTest, isTransformTest and they all check for the backslash'd variant. The CI does have machine learning specific jobs so I think they are justified.\nFor license check, I decided to add it because we do have multijob-windows-compatibility jobs. I am not completely sure that these jobs run the license check. But it's easy to add so I just did it.", "author": "ywangd", "createdAt": "2020-08-03T04:53:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE4Njk1Mw=="}], "type": "inlineReview"}]}