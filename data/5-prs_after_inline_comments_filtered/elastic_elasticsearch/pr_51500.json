{"pr_number": 51500, "pr_title": "[ML] add GET _cat/ml/datafeeds", "pr_createdAt": "2020-01-27T19:34:25Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/51500", "timeline": [{"oid": "d1cc94fca4cf862d66054c77588881a00320a5d3", "url": "https://github.com/elastic/elasticsearch/commit/d1cc94fca4cf862d66054c77588881a00320a5d3", "message": "[ML] add GET _cat/ml/datafeeds", "committedDate": "2020-01-27T19:32:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMxMTI2MQ==", "url": "https://github.com/elastic/elasticsearch/pull/51500#discussion_r372311261", "bodyText": "I thought this was GetDatafeeds not stats but stats makes a lot more sense \ud83d\udc4d. I suppose naming the endpoint _cat/ml/datafeeds_stats isn't great. All good here.", "author": "davidkyle", "createdAt": "2020-01-29T10:48:01Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatDatafeedsAction.java", "diffHunk": "@@ -0,0 +1,148 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+package org.elasticsearch.xpack.ml.rest.cat;\n+\n+import org.elasticsearch.client.node.NodeClient;\n+import org.elasticsearch.cluster.node.DiscoveryNode;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.Table;\n+import org.elasticsearch.common.unit.TimeValue;\n+import org.elasticsearch.rest.RestController;\n+import org.elasticsearch.rest.RestRequest;\n+import org.elasticsearch.rest.RestResponse;\n+import org.elasticsearch.rest.action.RestResponseListener;\n+import org.elasticsearch.rest.action.cat.AbstractCatAction;\n+import org.elasticsearch.rest.action.cat.RestTable;\n+import org.elasticsearch.xpack.core.ml.action.GetDatafeedsStatsAction;\n+import org.elasticsearch.xpack.core.ml.datafeed.DatafeedConfig;\n+import org.elasticsearch.xpack.core.ml.datafeed.DatafeedTimingStats;\n+\n+import static org.elasticsearch.rest.RestRequest.Method.GET;\n+\n+public class RestCatDatafeedsAction extends AbstractCatAction {\n+\n+    public RestCatDatafeedsAction(RestController controller) {\n+        controller.registerHandler(GET, \"_cat/ml/datafeeds/{\" + DatafeedConfig.ID.getPreferredName() + \"}\", this);\n+        controller.registerHandler(GET, \"_cat/ml/datafeeds\", this);\n+    }\n+\n+    @Override\n+    public String getName() {\n+        return \"cat_ml_get_datafeeds_action\";\n+    }\n+\n+    @Override\n+    protected RestChannelConsumer doCatRequest(RestRequest restRequest, NodeClient client) {\n+        String datafeedId = restRequest.param(DatafeedConfig.ID.getPreferredName());\n+        if (Strings.isNullOrEmpty(datafeedId)) {\n+            datafeedId = GetDatafeedsStatsAction.ALL;\n+        }\n+        GetDatafeedsStatsAction.Request request = new GetDatafeedsStatsAction.Request(datafeedId);", "originalCommit": "d1cc94fca4cf862d66054c77588881a00320a5d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9706fb0a7047328221e4291650fdcdbe41adb0a7", "url": "https://github.com/elastic/elasticsearch/commit/9706fb0a7047328221e4291650fdcdbe41adb0a7", "message": "removing unused `bytes` param", "committedDate": "2020-02-03T19:51:05Z", "type": "commit"}, {"oid": "529253753fd72529791640023cc166567fcd95eb", "url": "https://github.com/elastic/elasticsearch/commit/529253753fd72529791640023cc166567fcd95eb", "message": "Merge branch 'master' into feature/ml-_cat-datafeeds-api", "committedDate": "2020-02-03T20:06:11Z", "type": "commit"}]}