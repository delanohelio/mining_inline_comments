{"pr_number": 50649, "pr_title": "Import replicated closed dangling indices", "pr_createdAt": "2020-01-06T10:43:55Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/50649", "timeline": [{"oid": "29bcb0929415bd9ad7e907409fba85c50c622d52", "url": "https://github.com/elastic/elasticsearch/commit/29bcb0929415bd9ad7e907409fba85c50c622d52", "message": "Import replicated closed dangling indices", "committedDate": "2020-01-06T10:26:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzgwNDI1Mw==", "url": "https://github.com/elastic/elasticsearch/pull/50649#discussion_r363804253", "bodyText": "I think we can remove this check here. We have the same check inside method addAsFromDangling.", "author": "dnhatn", "createdAt": "2020-01-07T15:31:01Z", "path": "server/src/main/java/org/elasticsearch/gateway/LocalAllocateDangledIndices.java", "diffHunk": "@@ -149,7 +151,7 @@ public ClusterState execute(ClusterState currentState) {\n                         }\n                         metaData.put(upgradedIndexMetaData, false);\n                         blocks.addBlocks(upgradedIndexMetaData);\n-                        if (upgradedIndexMetaData.getState() == IndexMetaData.State.OPEN) {\n+                        if (upgradedIndexMetaData.getState() == IndexMetaData.State.OPEN || isIndexVerifiedBeforeClosed(indexMetaData)) {", "originalCommit": "29bcb0929415bd9ad7e907409fba85c50c622d52", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDE2NDY3NQ==", "url": "https://github.com/elastic/elasticsearch/pull/50649#discussion_r364164675", "bodyText": "In order to keep things aligned with other usages, I prefer to keep this as is for now.", "author": "ywelsch", "createdAt": "2020-01-08T10:35:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzgwNDI1Mw=="}], "type": "inlineReview"}]}