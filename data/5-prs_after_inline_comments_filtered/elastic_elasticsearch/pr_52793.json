{"pr_number": 52793, "pr_title": "[ML] Add indices_options to datafeed config and update", "pr_createdAt": "2020-02-25T19:42:50Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/52793", "timeline": [{"oid": "f6db6dc17142da59a0124b8bcf2af9906417c04b", "url": "https://github.com/elastic/elasticsearch/commit/f6db6dc17142da59a0124b8bcf2af9906417c04b", "message": "[ML] Add indices_options to datafeed config", "committedDate": "2020-02-25T19:42:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM2MzM4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/52793#discussion_r384363385", "bodyText": "Could we avoid checking if restRequest has those params? I think it'd work to do IndicesOptions indicesOptions = IndicesOptions.fromRequest(restRequest, SearchRequest.DEFAULT_INDICES_OPTIONS)", "author": "dimitris-athanasiou", "createdAt": "2020-02-26T09:18:50Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestPutDatafeedAction.java", "diffHunk": "@@ -44,8 +46,15 @@ public String getName() {\n     @Override\n     protected RestChannelConsumer prepareRequest(RestRequest restRequest, NodeClient client) throws IOException {\n         String datafeedId = restRequest.param(DatafeedConfig.ID.getPreferredName());\n+        IndicesOptions indicesOptions = null;\n+        if (restRequest.hasParam(\"expand_wildcards\")", "originalCommit": "f6db6dc17142da59a0124b8bcf2af9906417c04b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ4MzY4OA==", "url": "https://github.com/elastic/elasticsearch/pull/52793#discussion_r384483688", "bodyText": "Makes sense. DatafeedConfig can make the options non-null and default to SearchRequestt.DEFAULT_INDICES_OPTIONS", "author": "benwtrent", "createdAt": "2020-02-26T13:15:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM2MzM4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM2NDI0Ng==", "url": "https://github.com/elastic/elasticsearch/pull/52793#discussion_r384364246", "bodyText": "ditto", "author": "dimitris-athanasiou", "createdAt": "2020-02-26T09:20:33Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestUpdateDatafeedAction.java", "diffHunk": "@@ -44,8 +46,15 @@ public String getName() {\n     @Override\n     protected RestChannelConsumer prepareRequest(RestRequest restRequest, NodeClient client) throws IOException {\n         String datafeedId = restRequest.param(DatafeedConfig.ID.getPreferredName());\n+        IndicesOptions indicesOptions = null;\n+        if (restRequest.hasParam(\"expand_wildcards\")", "originalCommit": "f6db6dc17142da59a0124b8bcf2af9906417c04b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ4MzQwMw==", "url": "https://github.com/elastic/elasticsearch/pull/52793#discussion_r384483403", "bodyText": "I don't agree. If none are provided, then that means the user doesn't want to update them.", "author": "benwtrent", "createdAt": "2020-02-26T13:14:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM2NDI0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ4NTY2NA==", "url": "https://github.com/elastic/elasticsearch/pull/52793#discussion_r384485664", "bodyText": "Ah, yes. That's the update. My bad!", "author": "dimitris-athanasiou", "createdAt": "2020-02-26T13:18:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM2NDI0Ng=="}], "type": "inlineReview"}, {"oid": "2070eb87213af8185dc2300e84eb1338d6b81085", "url": "https://github.com/elastic/elasticsearch/commit/2070eb87213af8185dc2300e84eb1338d6b81085", "message": "addressing PR comments", "committedDate": "2020-02-26T15:34:27Z", "type": "commit"}, {"oid": "70caa0d60089458217a5da84048f8417f16b944c", "url": "https://github.com/elastic/elasticsearch/commit/70caa0d60089458217a5da84048f8417f16b944c", "message": "addressing PR comments", "committedDate": "2020-02-26T19:13:43Z", "type": "commit"}, {"oid": "9f0ef5a7033f32119dc4fa1203796424984d0beb", "url": "https://github.com/elastic/elasticsearch/commit/9f0ef5a7033f32119dc4fa1203796424984d0beb", "message": "Merge remote-tracking branch 'upstream/master' into feature/ml-datafeed-add-indices_options", "committedDate": "2020-02-26T19:14:49Z", "type": "commit"}, {"oid": "1c9cd9519592bf91256d41be96e4d51da422c7d7", "url": "https://github.com/elastic/elasticsearch/commit/1c9cd9519592bf91256d41be96e4d51da422c7d7", "message": "reverting bad assertion", "committedDate": "2020-02-26T19:22:22Z", "type": "commit"}, {"oid": "e21eae70a07010911470e566a2709bc2d36415be", "url": "https://github.com/elastic/elasticsearch/commit/e21eae70a07010911470e566a2709bc2d36415be", "message": "mute for bwc", "committedDate": "2020-02-27T13:03:20Z", "type": "commit"}]}