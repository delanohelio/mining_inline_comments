{"pr_number": 54601, "pr_title": "Add delete autoscaling policy API", "pr_createdAt": "2020-04-01T17:58:50Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54601", "timeline": [{"oid": "ad8a7b2e271022c92dcd7f8cbed56ca1330254d1", "url": "https://github.com/elastic/elasticsearch/commit/ad8a7b2e271022c92dcd7f8cbed56ca1330254d1", "message": "Add delete autoscaling policy API\n\nThis commit adds an API for deleting autoscaling policies.", "committedDate": "2020-04-01T17:57:36Z", "type": "commit"}, {"oid": "875ad29daf63b4ceefeb5dd676476a9a6e090c8f", "url": "https://github.com/elastic/elasticsearch/commit/875ad29daf63b4ceefeb5dd676476a9a6e090c8f", "message": "Merge branch 'master' into delete-autoscaling-policy", "committedDate": "2020-04-01T18:09:01Z", "type": "commit"}, {"oid": "14521b9bc3e5c6fc5083aecc5337121340217bb2", "url": "https://github.com/elastic/elasticsearch/commit/14521b9bc3e5c6fc5083aecc5337121340217bb2", "message": "Merge branch 'master' into delete-autoscaling-policy", "committedDate": "2020-04-01T19:43:36Z", "type": "commit"}, {"oid": "a8a6d33d7916920067f588767fcf80e9924b5afd", "url": "https://github.com/elastic/elasticsearch/commit/a8a6d33d7916920067f588767fcf80e9924b5afd", "message": "Merge branch 'master' into delete-autoscaling-policy", "committedDate": "2020-04-01T20:32:24Z", "type": "commit"}, {"oid": "dd136607a4ea61e3c0f258faa38e53dd434b9f3c", "url": "https://github.com/elastic/elasticsearch/commit/dd136607a4ea61e3c0f258faa38e53dd434b9f3c", "message": "Merge branch 'master' into delete-autoscaling-policy", "committedDate": "2020-04-01T20:37:06Z", "type": "commit"}, {"oid": "40e0c1295b0e3f912af20c78b0e617299bbbd852", "url": "https://github.com/elastic/elasticsearch/commit/40e0c1295b0e3f912af20c78b0e617299bbbd852", "message": "Fix name of delete autoscaling policy cluster state task", "committedDate": "2020-04-01T20:42:11Z", "type": "commit"}, {"oid": "d32195dbc46b8bb559b60b732b4bed4496119fdb", "url": "https://github.com/elastic/elasticsearch/commit/d32195dbc46b8bb559b60b732b4bed4496119fdb", "message": "Fix action name", "committedDate": "2020-04-01T20:59:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjA2NzMyMw==", "url": "https://github.com/elastic/elasticsearch/pull/54601#discussion_r402067323", "bodyText": "I think the norm for Request toXContent is to not include fields that are not part of the REST body. For Instance, PutAutoscalingPolicyAction.Request.toXContent does not include the policy name. I tend to think this toXContent should generate an empty object or maybe the request should not implement toXContentObject?", "author": "henningandersen", "createdAt": "2020-04-02T05:55:46Z", "path": "x-pack/plugin/autoscaling/src/main/java/org/elasticsearch/xpack/autoscaling/action/DeleteAutoscalingPolicyAction.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+package org.elasticsearch.xpack.autoscaling.action;\n+\n+import org.elasticsearch.action.ActionRequestValidationException;\n+import org.elasticsearch.action.ActionType;\n+import org.elasticsearch.action.support.master.AcknowledgedRequest;\n+import org.elasticsearch.action.support.master.AcknowledgedResponse;\n+import org.elasticsearch.common.io.stream.StreamInput;\n+import org.elasticsearch.common.io.stream.StreamOutput;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+import java.util.Objects;\n+\n+public class DeleteAutoscalingPolicyAction extends ActionType<AcknowledgedResponse> {\n+\n+    public static final DeleteAutoscalingPolicyAction INSTANCE = new DeleteAutoscalingPolicyAction();\n+    public static final String NAME = \"cluster:admin/autoscaling/delete_autoscaling_policy\";\n+\n+    private DeleteAutoscalingPolicyAction() {\n+        super(NAME, AcknowledgedResponse::new);\n+    }\n+\n+    public static class Request extends AcknowledgedRequest<DeleteAutoscalingPolicyAction.Request> implements ToXContentObject {\n+\n+        private final String name;\n+\n+        public String name() {\n+            return name;\n+        }\n+\n+        public Request(final String name) {\n+            this.name = Objects.requireNonNull(name);\n+        }\n+\n+        public Request(final StreamInput in) throws IOException {\n+            super(in);\n+            name = in.readString();\n+        }\n+\n+        @Override\n+        public void writeTo(final StreamOutput out) throws IOException {\n+            super.writeTo(out);\n+            out.writeString(name);\n+        }\n+\n+        @Override\n+        public ActionRequestValidationException validate() {\n+            return null;\n+        }\n+\n+        @Override\n+        public XContentBuilder toXContent(final XContentBuilder builder, final Params params) throws IOException {\n+            builder.startObject();\n+            {\n+                builder.field(\"name\", name);", "originalCommit": "d32195dbc46b8bb559b60b732b4bed4496119fdb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMwNDQ5MA==", "url": "https://github.com/elastic/elasticsearch/pull/54601#discussion_r402304490", "bodyText": "I opened #54643.", "author": "jasontedor", "createdAt": "2020-04-02T13:17:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjA2NzMyMw=="}], "type": "inlineReview"}, {"oid": "7e263476c1e0c17c9d324a843d0532a947f2052b", "url": "https://github.com/elastic/elasticsearch/commit/7e263476c1e0c17c9d324a843d0532a947f2052b", "message": "Fix delete autoscaling policy request toXContent", "committedDate": "2020-04-02T12:10:22Z", "type": "commit"}]}