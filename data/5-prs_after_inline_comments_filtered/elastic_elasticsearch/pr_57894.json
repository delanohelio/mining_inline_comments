{"pr_number": 57894, "pr_title": "Rollover avoid heavy lifting in dry-run/validation", "pr_createdAt": "2020-06-09T18:03:26Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57894", "timeline": [{"oid": "588dab6d66bf1d71ebc5836c2c2ddf745a4c1eba", "url": "https://github.com/elastic/elasticsearch/commit/588dab6d66bf1d71ebc5836c2c2ddf745a4c1eba", "message": "Rollover avoid heavy lifting in dry-run/validation\n\nFixed two newly introduced issues with rollover:\n1. Using auto-expand replicas, rollover could result in unexpected log\nmessages on future indexes.\n2. It did a reroute and other heavy work on the network thread.\n\nCloses #57706\nSupersedes #57865\nRelates #53965", "committedDate": "2020-06-09T18:00:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY2ODc2OA==", "url": "https://github.com/elastic/elasticsearch/pull/57894#discussion_r437668768", "bodyText": "This is currently only invoked with true, true or false, false. Is the reason for this that you want to reuse it later as true, false for autoscaling?", "author": "ywelsch", "createdAt": "2020-06-09T19:31:56Z", "path": "server/src/main/java/org/elasticsearch/action/admin/indices/rollover/MetadataRolloverService.java", "diffHunk": "@@ -88,16 +88,16 @@ private RolloverResult(String rolloverIndexName, String sourceIndexName, Cluster\n \n     public RolloverResult rolloverClusterState(ClusterState currentState, String rolloverTarget, String newIndexName,\n                                                CreateIndexRequest createIndexRequest, List<Condition<?>> metConditions,\n-                                               boolean silent) throws Exception {\n+                                               boolean silent, boolean onlyValidate) throws Exception {", "originalCommit": "588dab6d66bf1d71ebc5836c2c2ddf745a4c1eba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY3OTM4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/57894#discussion_r437679385", "bodyText": "Yes, that is the intention though there is follow-up work to ensure that the allocation-service logging does not occur for autoscaling.", "author": "henningandersen", "createdAt": "2020-06-09T19:51:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY2ODc2OA=="}], "type": "inlineReview"}]}