{"pr_number": 53448, "pr_title": "migrate tests from MissingIT to MissingAggregatorTests", "pr_createdAt": "2020-03-12T02:37:10Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/53448", "timeline": [{"oid": "476c87e5dfb3f3bea3484f6e0bfc16bec8669741", "url": "https://github.com/elastic/elasticsearch/commit/476c87e5dfb3f3bea3484f6e0bfc16bec8669741", "message": "migrate missing agg tests\n\nMove the remaining tests for the missing aggregation into its\nAggregatorTestCase out of its integration test and remove the IT\n\nFor #42893", "committedDate": "2020-03-12T02:31:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTkzNTYyMA==", "url": "https://github.com/elastic/elasticsearch/pull/53448#discussion_r391935620", "bodyText": "I'm not sure about this, but could you write (InternalMissing internalMissing) -> { instead of the cast?", "author": "nik9000", "createdAt": "2020-03-12T22:17:23Z", "path": "server/src/test/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregatorTests.java", "diffHunk": "@@ -91,7 +104,7 @@ public void testMatchNoDocs() throws IOException {\n                     writer.addDocument(singleton(new SortedNumericDocValuesField(fieldType.name(), randomLong())));\n                 }\n             },\n-            internalMissing -> {\n+            (Consumer<InternalMissing>) internalMissing -> {", "originalCommit": "476c87e5dfb3f3bea3484f6e0bfc16bec8669741", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk1NTk4Mw==", "url": "https://github.com/elastic/elasticsearch/pull/53448#discussion_r391955983", "bodyText": "That is much better, thanks", "author": "andyb-elastic", "createdAt": "2020-03-12T23:23:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTkzNTYyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk0Nzk3OA==", "url": "https://github.com/elastic/elasticsearch/pull/53448#discussion_r391947978", "bodyText": "Maybe call it result instead of missing because it isn't always InternalMissing.", "author": "nik9000", "createdAt": "2020-03-12T22:55:49Z", "path": "server/src/test/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregatorTests.java", "diffHunk": "@@ -427,7 +572,7 @@ private void testCaseWithReduce(Query query,\n             try (IndexReader indexReader = DirectoryReader.open(directory)) {\n                 final IndexSearcher indexSearcher = newSearcher(indexReader, true, true);\n                 final MappedFieldType[] fieldTypesArray = fieldTypes.toArray(new MappedFieldType[0]);\n-                final InternalMissing missing;\n+                final I missing;", "originalCommit": "476c87e5dfb3f3bea3484f6e0bfc16bec8669741", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk1NjAyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/53448#discussion_r391956029", "bodyText": "Good catch", "author": "andyb-elastic", "createdAt": "2020-03-12T23:23:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk0Nzk3OA=="}], "type": "inlineReview"}, {"oid": "0a62ba0b8a200040170b7b9d5939331fb5e47e9d", "url": "https://github.com/elastic/elasticsearch/commit/0a62ba0b8a200040170b7b9d5939331fb5e47e9d", "message": "cleaner style for consumers", "committedDate": "2020-03-12T23:33:28Z", "type": "commit"}, {"oid": "fd8f478df5a88983a579c635d285132b483a7900", "url": "https://github.com/elastic/elasticsearch/commit/fd8f478df5a88983a579c635d285132b483a7900", "message": "better variable name", "committedDate": "2020-03-12T23:34:24Z", "type": "commit"}, {"oid": "7a79e7067598db68ed857a5c3cf78f32e0cea7d5", "url": "https://github.com/elastic/elasticsearch/commit/7a79e7067598db68ed857a5c3cf78f32e0cea7d5", "message": "Merge branch 'master' into feature-migrate-missing-it", "committedDate": "2020-03-13T18:02:57Z", "type": "commit"}]}