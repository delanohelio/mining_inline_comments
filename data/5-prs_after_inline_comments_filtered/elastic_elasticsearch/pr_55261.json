{"pr_number": 55261, "pr_title": "Make Windows JAVA_HOME handling consistent with Linux", "pr_createdAt": "2020-04-15T19:12:16Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55261", "timeline": [{"oid": "e9f25d88591a64ce978672eafd3a12b944cd4b94", "url": "https://github.com/elastic/elasticsearch/commit/e9f25d88591a64ce978672eafd3a12b944cd4b94", "message": "Make windows JAVA_HOME handling consistent with linux\n\nIn bash, checking for whether an env variable exists uses the -z test,\nagainst a stringified env var, so that the test is actually whether the\nenv var is empty, but not necessarily undefined. We use this to test\nwhether JAVA_HOME is set, to determine whether the bundled jdk should be\nused. In windows, this test is an actual \"undefined\" check. This commit\nbrings the behavior on two systems in sync, opting to allow for an empty\nJAVA_HOME in windows to indicate the bundled jdk should be used.\n\ncloses #55134", "committedDate": "2020-04-15T18:51:13Z", "type": "commit"}, {"oid": "d8ef77e24a5cf4756bf41671f16632f7c94e6abb", "url": "https://github.com/elastic/elasticsearch/commit/d8ef77e24a5cf4756bf41671f16632f7c94e6abb", "message": "only run test with bundled jdk", "committedDate": "2020-04-15T19:50:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA5NjA0Nw==", "url": "https://github.com/elastic/elasticsearch/pull/55261#discussion_r409096047", "bodyText": "This does not spark joy.", "author": "pugnascotia", "createdAt": "2020-04-15T19:54:25Z", "path": "qa/os/src/test/java/org/elasticsearch/packaging/test/ArchiveTests.java", "diffHunk": "@@ -236,6 +236,18 @@ public void test53JavaHomeWithSpecialCharacters() throws Exception {\n         });\n     }\n \n+    public void test54ForceBundledJdkEmptyJavaHome() throws Exception {\n+        assumeThat(distribution().hasJdk, is(true));\n+        // cleanup from previous test", "originalCommit": "d8ef77e24a5cf4756bf41671f16632f7c94e6abb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8ff3c9725994c066fac8505d287c6e137d1070d8", "url": "https://github.com/elastic/elasticsearch/commit/8ff3c9725994c066fac8505d287c6e137d1070d8", "message": "Merge branch 'master' into windows_nojava", "committedDate": "2020-04-16T21:33:17Z", "type": "commit"}]}