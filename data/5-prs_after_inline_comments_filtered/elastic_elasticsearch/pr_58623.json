{"pr_number": 58623, "pr_title": "Respect null_value parameter in the fields retrieval API.", "pr_createdAt": "2020-06-26T21:16:39Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/58623", "timeline": [{"oid": "eeeb7cfba107caa604f2066bfbf82ca86d5641f9", "url": "https://github.com/elastic/elasticsearch/commit/eeeb7cfba107caa604f2066bfbf82ca86d5641f9", "message": "Return null_value when the source contains a 'null' for the field.", "committedDate": "2020-06-30T01:31:53Z", "type": "forcePushed"}, {"oid": "73d4e6b972c3529ff73bd5fff29d62109ca722a5", "url": "https://github.com/elastic/elasticsearch/commit/73d4e6b972c3529ff73bd5fff29d62109ca722a5", "message": "Return null_value when the source contains a 'null' for the field.", "committedDate": "2020-06-30T01:35:22Z", "type": "commit"}, {"oid": "73d4e6b972c3529ff73bd5fff29d62109ca722a5", "url": "https://github.com/elastic/elasticsearch/commit/73d4e6b972c3529ff73bd5fff29d62109ca722a5", "message": "Return null_value when the source contains a 'null' for the field.", "committedDate": "2020-06-30T01:35:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkyODM1MQ==", "url": "https://github.com/elastic/elasticsearch/pull/58623#discussion_r447928351", "bodyText": "\ud83d\udc4d", "author": "nik9000", "createdAt": "2020-06-30T19:29:01Z", "path": "server/src/main/java/org/elasticsearch/common/xcontent/support/XContentMapValues.java", "diffHunk": "@@ -105,19 +115,51 @@ public static Object extractValue(Map<?, ?> map, String... pathElements) {\n         if (pathElements.length == 0) {\n             return null;\n         }\n-        return extractValue(pathElements, 0, map);\n+        return XContentMapValues.extractValue(pathElements, 0, map, null);\n     }\n \n-    @SuppressWarnings({\"unchecked\"})", "originalCommit": "73d4e6b972c3529ff73bd5fff29d62109ca722a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkyODc1OQ==", "url": "https://github.com/elastic/elasticsearch/pull/58623#discussion_r447928759", "bodyText": "How bad would it be to make this abstract so implemeneters need to think about it?", "author": "nik9000", "createdAt": "2020-06-30T19:29:45Z", "path": "server/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java", "diffHunk": "@@ -223,6 +223,13 @@ public CopyTo copyTo() {\n         return copyTo;\n     }\n \n+    /**\n+     * A value to use in place of a {@code null} value in the document source.\n+     */\n+    protected Object nullValue() {", "originalCommit": "73d4e6b972c3529ff73bd5fff29d62109ca722a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk2MTg4OA==", "url": "https://github.com/elastic/elasticsearch/pull/58623#discussion_r447961888", "bodyText": "To me, null_value isn't a cross-cutting feature: only 9 out of ~40 field mappers implement it. In many cases it doesn't make that much sense (or could be harmful?), like setting a null_value for a geopoint. So I'm inclined to avoid making it abstract and encouraging mappers to implement it.", "author": "jtibshirani", "createdAt": "2020-06-30T20:33:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkyODc1OQ=="}], "type": "inlineReview"}]}