{"pr_number": 56826, "pr_title": "Track upload requests on S3 repositories", "pr_createdAt": "2020-05-15T14:49:19Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/56826", "timeline": [{"oid": "fc513d168214b891eeead307e1c85dd8d571b72b", "url": "https://github.com/elastic/elasticsearch/commit/fc513d168214b891eeead307e1c85dd8d571b72b", "message": "Track upload requests on S3 repositories\n\nAdd tracking for regular and multipart uploads.\nRegular uploads are categorized as PUT.\nMulti part uploads are categorized as POST.\nThe number of documents created for the test #testRequestStats\nhave been increased so all upload methods are exercised.", "committedDate": "2020-05-15T14:45:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk0Nzg2Mg==", "url": "https://github.com/elastic/elasticsearch/pull/56826#discussion_r425947862", "bodyText": "Remove this :)", "author": "original-brownbear", "createdAt": "2020-05-15T17:31:59Z", "path": "plugins/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3BlobStoreRepositoryTests.java", "diffHunk": "@@ -284,7 +289,18 @@ public void maybeTrack(final String request) {\n                 trackRequest(\"LIST\");\n             } else if (Regex.simpleMatch(\"GET /*/*\", request)) {\n                 trackRequest(\"GET\");\n+            } else if (isMultiPartUpload(request)) {\n+                trackRequest(\"POST\");\n+            } else if (Regex.simpleMatch(\"PUT /*/*\", request)) {\n+                trackRequest(\"PUT\");\n             }\n         }\n+\n+        //", "originalCommit": "fc513d168214b891eeead307e1c85dd8d571b72b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "734165561459c582f4820c384d642820adb03793", "url": "https://github.com/elastic/elasticsearch/commit/734165561459c582f4820c384d642820adb03793", "message": "Remove dangling comment", "committedDate": "2020-05-18T08:08:29Z", "type": "commit"}, {"oid": "449b2196a0090110aba40b9d611e0ca3945f4ce1", "url": "https://github.com/elastic/elasticsearch/commit/449b2196a0090110aba40b9d611e0ca3945f4ce1", "message": "Merge remote-tracking branch 'origin/master' into s3-put-post-api-tracking", "committedDate": "2020-05-18T10:04:24Z", "type": "commit"}]}