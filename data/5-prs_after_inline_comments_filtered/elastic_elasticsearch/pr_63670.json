{"pr_number": 63670, "pr_title": "Add logging to AllocationRoutedStepTests", "pr_createdAt": "2020-10-14T13:16:39Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/63670", "timeline": [{"oid": "72e9d9ee6c1374980a2570094bcbe9d90fda9835", "url": "https://github.com/elastic/elasticsearch/commit/72e9d9ee6c1374980a2570094bcbe9d90fda9835", "message": "Tests: Remove unused expected settings", "committedDate": "2020-10-14T13:08:58Z", "type": "commit"}, {"oid": "60116cfade9ace418a9d6216fcf7ce8dbe32b511", "url": "https://github.com/elastic/elasticsearch/commit/60116cfade9ace418a9d6216fcf7ce8dbe32b511", "message": "Tests: log generated allocation rules used by test", "committedDate": "2020-10-14T13:09:56Z", "type": "commit"}, {"oid": "f1fae6f56ed3b684b595df3099bf389d52d8f5fd", "url": "https://github.com/elastic/elasticsearch/commit/f1fae6f56ed3b684b595df3099bf389d52d8f5fd", "message": "Merge branch 'master' into test-allocation-routed-step", "committedDate": "2020-10-14T14:00:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcwODQ3MQ==", "url": "https://github.com/elastic/elasticsearch/pull/63670#discussion_r505708471", "bodyText": "We shouldn't need this function, Map.toString() already returns things in a format like {key=value, food=eggplant}", "author": "dakrone", "createdAt": "2020-10-15T17:14:55Z", "path": "x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/ilm/AllocationRoutedStepTests.java", "diffHunk": "@@ -267,11 +258,20 @@ public void testExecuteAllocateNotCompleteOnlyOneCopyAllocated() throws Exceptio\n                 .addShard(TestShardRouting.newShardRouting(new ShardId(index, 0), \"node2\", primaryOnNode1 == false,\n                         ShardRoutingState.STARTED));\n \n+\n         AllocationRoutedStep step = new AllocationRoutedStep(randomStepKey(), randomStepKey());\n+        logger.info(\"running test with routing configurations:\\n\\t includes: [{}]\\n\\t excludes: [{}]\\n\\t requires: [{}]\",\n+            mapToString(includes), mapToString(excludes), mapToString(requires));\n         assertAllocateStatus(index, 2, 0, step, existingSettings, node1Settings, node2Settings, indexRoutingTable,\n                 new ClusterStateWaitStep.Result(false, allShardsActiveAllocationInfo(0, 1)));\n     }\n \n+    private static String mapToString(Map<String, String> map) {", "originalCommit": "f1fae6f56ed3b684b595df3099bf389d52d8f5fd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIzMDY0NQ==", "url": "https://github.com/elastic/elasticsearch/pull/63670#discussion_r506230645", "bodyText": "This would be the poster for \"software developer over-engineers task, and feels good about it too\" :) Thanks for spotting it", "author": "andreidan", "createdAt": "2020-10-16T09:44:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcwODQ3MQ=="}], "type": "inlineReview"}, {"oid": "ee69032417371d0a36396d7d65d3e70162f5e56b", "url": "https://github.com/elastic/elasticsearch/commit/ee69032417371d0a36396d7d65d3e70162f5e56b", "message": "Drop `mapToString`", "committedDate": "2020-10-16T09:46:56Z", "type": "commit"}, {"oid": "3ea44b503dd13ccf35baf141c2b089efbc97b420", "url": "https://github.com/elastic/elasticsearch/commit/3ea44b503dd13ccf35baf141c2b089efbc97b420", "message": "Merge branch 'master' into test-allocation-routed-step", "committedDate": "2020-10-26T15:15:09Z", "type": "commit"}, {"oid": "e6f66ebcc15f3aebf3521efcbca73fa7c3b1b28b", "url": "https://github.com/elastic/elasticsearch/commit/e6f66ebcc15f3aebf3521efcbca73fa7c3b1b28b", "message": "Merge branch 'master' into test-allocation-routed-step", "committedDate": "2020-10-26T15:57:07Z", "type": "commit"}, {"oid": "4c4af4eee009c6e2f9ceee231754b83fbe8fbd68", "url": "https://github.com/elastic/elasticsearch/commit/4c4af4eee009c6e2f9ceee231754b83fbe8fbd68", "message": "Merge branch 'master' into test-allocation-routed-step", "committedDate": "2020-10-26T17:06:32Z", "type": "commit"}]}