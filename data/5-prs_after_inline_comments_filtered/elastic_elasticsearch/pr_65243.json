{"pr_number": 65243, "pr_title": "Move security manager codebases files to plugin-metadata", "pr_createdAt": "2020-11-18T23:44:30Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/65243", "timeline": [{"oid": "027a8ee37fe3d317b2c4aa0555f2cdd7f16cc981", "url": "https://github.com/elastic/elasticsearch/commit/027a8ee37fe3d317b2c4aa0555f2cdd7f16cc981", "message": "Move security manager codebases files to plugin-metadata\n\nThe codebases files are hints that allow the test framework to map\ncodebase names required by plugin security policy files to urls that may\nexist as classes directories on disk. These files end up in the same\ntest resources directory in gradle, but in eclipse they exist in\ndifferent directories. This commit reorganizes the files so they exist\nwithin the same plugin-metadata source, thereby existing in the same\noutput directory used by tests. Finally, the codebases files are\nfiltered out of the final jar within the plugin build.", "committedDate": "2020-11-18T23:43:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUxNTU0OA==", "url": "https://github.com/elastic/elasticsearch/pull/65243#discussion_r526515548", "bodyText": "Is this intellij policy actaully specific to intellij or should we rename to \"ide\" or similar?", "author": "mark-vieira", "createdAt": "2020-11-19T00:38:20Z", "path": "test/framework/src/main/java/org/elasticsearch/bootstrap/BootstrapForTesting.java", "diffHunk": "@@ -146,10 +146,8 @@\n                 final Policy runnerPolicy;\n                 if (System.getProperty(\"tests.gradle\") != null) {\n                     runnerPolicy = PolicyUtil.readPolicy(Bootstrap.class.getResource(\"gradle.policy\"), codebases);\n-                } else if (codebases.containsKey(\"junit-rt.jar\")) {\n-                    runnerPolicy = PolicyUtil.readPolicy(Bootstrap.class.getResource(\"intellij.policy\"), codebases);\n                 } else {\n-                    runnerPolicy = PolicyUtil.readPolicy(Bootstrap.class.getResource(\"eclipse.policy\"), codebases);\n+                    runnerPolicy = PolicyUtil.readPolicy(Bootstrap.class.getResource(\"intellij.policy\"), codebases);", "originalCommit": "027a8ee37fe3d317b2c4aa0555f2cdd7f16cc981", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUxNzk1Mw==", "url": "https://github.com/elastic/elasticsearch/pull/65243#discussion_r526517953", "bodyText": "Oops, this was completely unintentional.", "author": "rjernst", "createdAt": "2020-11-19T00:45:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUxNTU0OA=="}], "type": "inlineReview"}, {"oid": "550ce05f801a42bd33170f053a80937682c3b9bb", "url": "https://github.com/elastic/elasticsearch/commit/550ce05f801a42bd33170f053a80937682c3b9bb", "message": "restore", "committedDate": "2020-11-19T00:47:24Z", "type": "commit"}, {"oid": "7d648cd0ab9e4540e3a4cff12609d7ccf80574c5", "url": "https://github.com/elastic/elasticsearch/commit/7d648cd0ab9e4540e3a4cff12609d7ccf80574c5", "message": "Flip to exclusion of the codebases file", "committedDate": "2020-11-19T01:09:57Z", "type": "commit"}]}