{"pr_number": 58220, "pr_title": "Add deprecated accept_enterprise param to /_xpack", "pr_createdAt": "2020-06-17T06:40:33Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/58220", "timeline": [{"oid": "aee53fd4d140d188923263f20684278ddd89471c", "url": "https://github.com/elastic/elasticsearch/commit/aee53fd4d140d188923263f20684278ddd89471c", "message": "Add deprecated accept_enterprise param to /_xpack\n\nThis change introduces support for the \"accept_enterprise\" parameter\nto the /_xpack endpoint, to match the parameter on the /_license\nendpoint.\n\nThis parameter is deprecated, it does nothing, and may not be set to\nany value other than true. It exists solely to support upgrades from\n7.x versions where the parameter does have meaning.\n\nRelates: #58217", "committedDate": "2020-06-17T06:29:16Z", "type": "commit"}, {"oid": "79bd010cd59979d2edf04a0a4a564590dfb886b9", "url": "https://github.com/elastic/elasticsearch/commit/79bd010cd59979d2edf04a0a4a564590dfb886b9", "message": "Fix import", "committedDate": "2020-06-17T07:44:32Z", "type": "commit"}, {"oid": "dac0634421ce2cf06730d9d8593c78f5cdd20c92", "url": "https://github.com/elastic/elasticsearch/commit/dac0634421ce2cf06730d9d8593c78f5cdd20c92", "message": "Merge branch 'master' into xpack-accept-enterprise-no-op", "committedDate": "2020-06-17T08:15:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3ODA5OQ==", "url": "https://github.com/elastic/elasticsearch/pull/58220#discussion_r441478099", "bodyText": "It is non-ideal that all the code changes in this class have to stay because of BWC. But I cannot think of a better way to avoid them.", "author": "ywangd", "createdAt": "2020-06-17T11:34:12Z", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/protocol/xpack/XPackInfoRequest.java", "diffHunk": "@@ -70,6 +77,14 @@ public void setCategories(EnumSet<Category> categories) {\n         return categories;\n     }\n \n+    public int getLicenseVersion() {\n+        return licenseVersion;\n+    }\n+\n+    public void setLicenseVersion(int licenseVersion) {\n+        this.licenseVersion = licenseVersion;\n+    }", "originalCommit": "dac0634421ce2cf06730d9d8593c78f5cdd20c92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk1NzYyMA==", "url": "https://github.com/elastic/elasticsearch/pull/58220#discussion_r441957620", "bodyText": "We don't have to keep it like this. We could drop the field, ignore it on deserialization, and always write the CURRENT_VERSION on serialization, but that's probably not a net-saving.", "author": "tvernum", "createdAt": "2020-06-18T04:10:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3ODA5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1OTI3MQ==", "url": "https://github.com/elastic/elasticsearch/pull/58220#discussion_r446759271", "bodyText": "@ywangd I changed this to just be an ignored read + a CURRENT write. I think it ends up being neater, and it also means I could switch the version control to only do the BWC for [7.8.1, 8.0.0).\nCan you re-review?", "author": "tvernum", "createdAt": "2020-06-29T04:00:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3ODA5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc2Mzk3Mg==", "url": "https://github.com/elastic/elasticsearch/pull/58220#discussion_r446763972", "bodyText": "Great this change means we will be able to remove the bwc in v9.0.0 instead of carrying it over indefinitely.", "author": "ywangd", "createdAt": "2020-06-29T04:21:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3ODA5OQ=="}], "type": "inlineReview"}, {"oid": "f2d6009b861ad8f2952d776816b91990cd5ed2ed", "url": "https://github.com/elastic/elasticsearch/commit/f2d6009b861ad8f2952d776816b91990cd5ed2ed", "message": "Merge branch 'master' into xpack-accept-enterprise-no-op", "committedDate": "2020-06-18T04:52:09Z", "type": "commit"}, {"oid": "40ddf9015c4605520166f26d35e2ab31de135973", "url": "https://github.com/elastic/elasticsearch/commit/40ddf9015c4605520166f26d35e2ab31de135973", "message": "Merge branch 'master' into xpack-accept-enterprise-no-op", "committedDate": "2020-06-29T02:46:23Z", "type": "commit"}, {"oid": "c6751fe3b480c593f25adb1993e99812346e77be", "url": "https://github.com/elastic/elasticsearch/commit/c6751fe3b480c593f25adb1993e99812346e77be", "message": "Change BWC serialization code", "committedDate": "2020-06-29T03:58:36Z", "type": "commit"}, {"oid": "5d4c0de309551c5eae4ead34e0619942557c11e7", "url": "https://github.com/elastic/elasticsearch/commit/5d4c0de309551c5eae4ead34e0619942557c11e7", "message": "Merge branch 'master' into xpack-accept-enterprise-no-op", "committedDate": "2020-06-30T08:34:58Z", "type": "commit"}, {"oid": "578bacb9fc2fab370af0c86e946b6dc040554ddd", "url": "https://github.com/elastic/elasticsearch/commit/578bacb9fc2fab370af0c86e946b6dc040554ddd", "message": "Merge branch 'master' into xpack-accept-enterprise-no-op", "committedDate": "2020-06-30T08:35:22Z", "type": "commit"}, {"oid": "c9f8c7255d41e25e26588dd4778950f9e5101faa", "url": "https://github.com/elastic/elasticsearch/commit/c9f8c7255d41e25e26588dd4778950f9e5101faa", "message": "Re-enable CcrRollingUpgradeIT\n\nThis reverts commit 5a57a3b0705432667f61471e8a3e7feb70e698f9.", "committedDate": "2020-06-30T08:35:26Z", "type": "commit"}, {"oid": "96e824d7f55d4d594959f8570aee16bc9e932253", "url": "https://github.com/elastic/elasticsearch/commit/96e824d7f55d4d594959f8570aee16bc9e932253", "message": "Adapt code to new deprecation logger setup", "committedDate": "2020-06-30T15:19:12Z", "type": "commit"}, {"oid": "637279cf95e6c43611939069fb9cec3e1dcf5998", "url": "https://github.com/elastic/elasticsearch/commit/637279cf95e6c43611939069fb9cec3e1dcf5998", "message": "Merge branch 'master' into xpack-accept-enterprise-no-op", "committedDate": "2020-06-30T16:18:11Z", "type": "commit"}]}