{"pr_number": 53179, "pr_title": "[ML] Improve DF analytics audits and logging", "pr_createdAt": "2020-03-05T17:14:43Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/53179", "timeline": [{"oid": "e15a782205f943791be6794c34b79b48b5cf9ebd", "url": "https://github.com/elastic/elasticsearch/commit/e15a782205f943791be6794c34b79b48b5cf9ebd", "message": "[ML] Improve DF analytics audits and logging\n\nAdds audits for when the job starts reindexing, loading data,\nanalyzing, writing results. Also adds some info logging.", "committedDate": "2020-03-05T17:13:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ1MDEwMw==", "url": "https://github.com/elastic/elasticsearch/pull/53179#discussion_r388450103", "bodyText": "Is this needed taking into account that fetchAllAuditMessages also issues refresh request?", "author": "przemekwitek", "createdAt": "2020-03-05T17:33:23Z", "path": "x-pack/plugin/ml/qa/native-multi-node-tests/src/test/java/org/elasticsearch/xpack/ml/integration/MlNativeDataFrameAnalyticsIntegTestCase.java", "diffHunk": "@@ -233,6 +233,8 @@ protected static void assertThatAuditMessagesMatch(String configId, String... ex\n         // Since calls to write the AbstractAuditor are sent and forgot (async) we could have returned from the start,\n         // finished the job (as this is a very short analytics job), all without the audit being fully written.\n         assertBusy(() -> assertTrue(indexExists(NotificationsIndex.NOTIFICATIONS_INDEX)));\n+        client().admin().indices().prepareRefresh(\".ml-notifications*\").get();", "originalCommit": "e15a782205f943791be6794c34b79b48b5cf9ebd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc2NTg5MQ==", "url": "https://github.com/elastic/elasticsearch/pull/53179#discussion_r388765891", "bodyText": "Ah, good point. That comment got me confused. I'll remove.", "author": "dimitris-athanasiou", "createdAt": "2020-03-06T08:20:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ1MDEwMw=="}], "type": "inlineReview"}, {"oid": "b4957f03d4ff7afd5f596628da4d696849d62e80", "url": "https://github.com/elastic/elasticsearch/commit/b4957f03d4ff7afd5f596628da4d696849d62e80", "message": "Remove unnecessary refresh", "committedDate": "2020-03-06T08:36:37Z", "type": "commit"}]}