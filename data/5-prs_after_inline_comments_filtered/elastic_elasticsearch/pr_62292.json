{"pr_number": 62292, "pr_title": "Some small cleanups in TermVectorsService", "pr_createdAt": "2020-09-14T08:58:05Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/62292", "timeline": [{"oid": "214c89eaa92f34a809ab3502d52b61370d7b908c", "url": "https://github.com/elastic/elasticsearch/commit/214c89eaa92f34a809ab3502d52b61370d7b908c", "message": "Some small cleanups in TermVectorsService", "committedDate": "2020-09-14T08:42:05Z", "type": "commit"}, {"oid": "89287c68e5cbb7cab7c837b8070bb845342f5bef", "url": "https://github.com/elastic/elasticsearch/commit/89287c68e5cbb7cab7c837b8070bb845342f5bef", "message": "Merge branch 'master' into termvectors/cleanup", "committedDate": "2020-09-14T09:18:10Z", "type": "commit"}, {"oid": "b0dedef315e80ba3074fd229cea42ed732095d70", "url": "https://github.com/elastic/elasticsearch/commit/b0dedef315e80ba3074fd229cea42ed732095d70", "message": "top-level enum", "committedDate": "2020-09-14T13:57:33Z", "type": "commit"}, {"oid": "86b04cdfab2799ade262ddcc87340127a2a0a386", "url": "https://github.com/elastic/elasticsearch/commit/86b04cdfab2799ade262ddcc87340127a2a0a386", "message": "Merge remote-tracking branch 'romseygeek/termvectors/cleanup' into termvectors/cleanup", "committedDate": "2020-09-14T14:05:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAzMTU0Mg==", "url": "https://github.com/elastic/elasticsearch/pull/62292#discussion_r488031542", "bodyText": "I cannot find a relation to the dfs removal for this removed block, probably unrelated, but would you briefly explain to me why this can be removed?", "author": "cbuescher", "createdAt": "2020-09-14T15:38:04Z", "path": "server/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java", "diffHunk": "@@ -102,10 +100,6 @@ static TermVectorsResponse getTermVectors(IndexShard indexShard, TermVectorsRequ\n             /* from an artificial document */\n             if (request.doc() != null) {\n                 termVectorsByField = generateTermVectorsFromDoc(indexShard, request);\n-                // if no document indexed in shard, take the queried document itself for stats\n-                if (topLevelFields == null) {\n-                    topLevelFields = termVectorsByField;\n-                }", "originalCommit": "86b04cdfab2799ade262ddcc87340127a2a0a386", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAzNjUxMg==", "url": "https://github.com/elastic/elasticsearch/pull/62292#discussion_r488036512", "bodyText": "topLevelFields is never null, so this is a no-op, according to IntelliJ.", "author": "romseygeek", "createdAt": "2020-09-14T15:45:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAzMTU0Mg=="}], "type": "inlineReview"}]}