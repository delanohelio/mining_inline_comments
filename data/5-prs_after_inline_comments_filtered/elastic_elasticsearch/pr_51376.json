{"pr_number": 51376, "pr_title": "[ML][Inference] Adds validations for model PUT", "pr_createdAt": "2020-01-23T21:04:45Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/51376", "timeline": [{"oid": "ef7926399ab113e7562ea54918f8fcaea64601e6", "url": "https://github.com/elastic/elasticsearch/commit/ef7926399ab113e7562ea54918f8fcaea64601e6", "message": "[ML][Inference] Adds validations for model PUT", "committedDate": "2020-01-23T21:01:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU3MTgxMg==", "url": "https://github.com/elastic/elasticsearch/pull/51376#discussion_r370571812", "bodyText": "Would it make sense to use TRAINED_MODELS.getPreferredName() here rather than literal?", "author": "przemekwitek", "createdAt": "2020-01-24T10:42:48Z", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/trainedmodel/ensemble/Ensemble.java", "diffHunk": "@@ -250,6 +250,10 @@ public int hashCode() {\n \n     @Override\n     public void validate() {\n+        if (this.models.isEmpty()) {\n+            throw ExceptionsHelper.badRequestException(\"[trained_models] must not be empty\");", "originalCommit": "ef7926399ab113e7562ea54918f8fcaea64601e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU3MTk4MA==", "url": "https://github.com/elastic/elasticsearch/pull/51376#discussion_r370571980", "bodyText": "Would it make sense to use FEATURE_NAMES.getPreferredName() here rather than literal?", "author": "przemekwitek", "createdAt": "2020-01-24T10:43:10Z", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/trainedmodel/tree/Tree.java", "diffHunk": "@@ -253,6 +253,9 @@ public static Builder builder() {\n \n     @Override\n     public void validate() {\n+        if (featureNames.isEmpty()) {\n+            throw ExceptionsHelper.badRequestException(\"[feature_names] must not be empty for tree model\");", "originalCommit": "ef7926399ab113e7562ea54918f8fcaea64601e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2bdc5f49b1d3f9f7953c5cf3b4416db9fe78d257", "url": "https://github.com/elastic/elasticsearch/commit/2bdc5f49b1d3f9f7953c5cf3b4416db9fe78d257", "message": "fixing tests", "committedDate": "2020-01-24T12:08:08Z", "type": "commit"}]}