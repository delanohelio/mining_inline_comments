{"pr_number": 65490, "pr_title": "Introduce licensed plugins", "pr_createdAt": "2020-11-25T11:34:03Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/65490", "timeline": [{"oid": "c50b309aa7f26c16f5f9caaf406b1150ba2fbf8e", "url": "https://github.com/elastic/elasticsearch/commit/c50b309aa7f26c16f5f9caaf406b1150ba2fbf8e", "message": "Introduce licensed plugins (#65409)\n\nBackport of #64850.\n\nThis PR introduces the concept of \"licensed\" plugins. Such plugins\nmay only be installed on installations of the default distribution,\nand this is enforced by the plugin installer. This PR also moves\nthe `quote-aware-fs` plugin to the `x-pack` directory, and marks\nit as licensed.\n\nNote that I didn't move the plugin source under `x-pack/plugin`\nbecause all the existing x-pack plugins are actually bundles as\nmodules into the default distribution, whereas the `quota-aware-fs`\nplugin needs to remain a standalone plugin.", "committedDate": "2020-11-25T10:53:35Z", "type": "commit"}, {"oid": "dcec6dcfbf3a7eff2ea088f789ea0cebec2cfcc0", "url": "https://github.com/elastic/elasticsearch/commit/dcec6dcfbf3a7eff2ea088f789ea0cebec2cfcc0", "message": "Compilation fixes", "committedDate": "2020-11-30T11:33:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzY4MDg0Mw==", "url": "https://github.com/elastic/elasticsearch/pull/65490#discussion_r533680843", "bodyText": "Nit: I just noticed this now, but it applies to the other PRs as well. This comment seems no longer applicable since there is no longer an extra acceptance prompt.", "author": "rjernst", "createdAt": "2020-12-01T19:53:14Z", "path": "server/src/main/java/org/elasticsearch/plugins/PluginInfo.java", "diffHunk": "@@ -315,6 +322,15 @@ public boolean hasNativeController() {\n         return hasNativeController;\n     }\n \n+    /**\n+     * Whether a license must be accepted before this plugin can be installed.", "originalCommit": "dcec6dcfbf3a7eff2ea088f789ea0cebec2cfcc0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEyMzU3Ng==", "url": "https://github.com/elastic/elasticsearch/pull/65490#discussion_r534123576", "bodyText": "Ah yes, I've updated the text and I'll update the other branches once this PR is merged.", "author": "pugnascotia", "createdAt": "2020-12-02T12:18:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzY4MDg0Mw=="}], "type": "inlineReview"}, {"oid": "c830df4f0918b25dbfdd7f73bf1836ffdb5941ae", "url": "https://github.com/elastic/elasticsearch/commit/c830df4f0918b25dbfdd7f73bf1836ffdb5941ae", "message": "Serialise isLicensed in PluginInfo", "committedDate": "2020-12-02T12:17:01Z", "type": "commit"}, {"oid": "612ab2c24e1777489533193410d29385c09cbafb", "url": "https://github.com/elastic/elasticsearch/commit/612ab2c24e1777489533193410d29385c09cbafb", "message": "Merge remote-tracking branch 'upstream/6.8' into move-quota-aware-fs-plugin-to-xpack-6-8", "committedDate": "2020-12-02T12:17:32Z", "type": "commit"}, {"oid": "672692fcc3b97f3bbfe66b255066c03da54b2557", "url": "https://github.com/elastic/elasticsearch/commit/672692fcc3b97f3bbfe66b255066c03da54b2557", "message": "Fix tests", "committedDate": "2020-12-03T14:51:46Z", "type": "commit"}]}