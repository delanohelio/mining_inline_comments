{"pr_number": 58681, "pr_title": "Add Assertions on CS Application in Snapshot Logic", "pr_createdAt": "2020-06-29T15:32:39Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/58681", "timeline": [{"oid": "338c194e48ad63ef05965e67c81b17f586182755", "url": "https://github.com/elastic/elasticsearch/commit/338c194e48ad63ef05965e67c81b17f586182755", "message": "Add Assertions on CS Application in Snapshot Logic\n\nRelates to #58680. Bugs like that should not only show up in logs\nbut ideally also get caught in tests. We expect to never see exceptions\nin these two spots.", "committedDate": "2020-06-29T15:30:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA3ODU5OQ==", "url": "https://github.com/elastic/elasticsearch/pull/58681#discussion_r447078599", "bodyText": "We do the same kind of assert up-stream in org.elasticsearch.cluster.service.ClusterApplierService#runTask but given #58680 I don't feel comfortable just yet to remove the try-catch-log` here.", "author": "original-brownbear", "createdAt": "2020-06-29T15:56:56Z", "path": "server/src/main/java/org/elasticsearch/repositories/RepositoriesService.java", "diffHunk": "@@ -355,6 +355,7 @@ public void applyClusterState(ClusterChangedEvent event) {\n             }\n             repositories = Collections.unmodifiableMap(builder);\n         } catch (Exception ex) {\n+            assert false : new AssertionError(ex);", "originalCommit": "338c194e48ad63ef05965e67c81b17f586182755", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}