{"pr_number": 62470, "pr_title": "Remove ShardClusterSnapshotRestoreIT and fold test in DataStreamsSnapshotsIT", "pr_createdAt": "2020-09-16T15:03:13Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/62470", "timeline": [{"oid": "9c92fadf8e99c26c8d09cff682c49968f5358ea2", "url": "https://github.com/elastic/elasticsearch/commit/9c92fadf8e99c26c8d09cff682c49968f5358ea2", "message": "Remove ShardClusterSnapshotRestoreIT and fold test in DataStreamsSnapshotsIT", "committedDate": "2020-09-16T15:00:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUwOTg5OA==", "url": "https://github.com/elastic/elasticsearch/pull/62470#discussion_r489509898", "bodyText": "This is the only bits that I introduced, the rest of the method is just a copy paste.", "author": "tlrx", "createdAt": "2020-09-16T15:04:06Z", "path": "x-pack/plugin/data-streams/src/internalClusterTest/java/org/elasticsearch/datastreams/DataStreamsSnapshotsIT.java", "diffHunk": "@@ -405,4 +413,67 @@ public void testDataStreamNotIncludedInLimitedSnapshot() throws ExecutionExcepti\n         assertThat(restoreSnapshotResponse.getRestoreInfo().indices(), empty());\n     }\n \n+    public void testDeleteDataStreamDuringSnapshot() throws Exception {\n+        Client client = client();\n+\n+        // this test uses a MockRepository\n+        assertAcked(client().admin().cluster().prepareDeleteRepository(REPO));\n+\n+        final String repositoryName = \"test-repo\";", "originalCommit": "9c92fadf8e99c26c8d09cff682c49968f5358ea2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}