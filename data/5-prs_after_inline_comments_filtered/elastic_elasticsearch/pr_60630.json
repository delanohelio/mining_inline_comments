{"pr_number": 60630, "pr_title": "Convert first 1/2 x-pack plugins from integTest to [yaml | java]RestTest or internalClusterTest", "pr_createdAt": "2020-08-03T22:03:08Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/60630", "timeline": [{"oid": "92809d6fd2d2e47124736e56d670870551b13d4f", "url": "https://github.com/elastic/elasticsearch/commit/92809d6fd2d2e47124736e56d670870551b13d4f", "message": "async-search", "committedDate": "2020-08-03T19:41:19Z", "type": "commit"}, {"oid": "0dc6caa1fb47c542eab621499ebd9d0fd544437a", "url": "https://github.com/elastic/elasticsearch/commit/0dc6caa1fb47c542eab621499ebd9d0fd544437a", "message": "address java rest tests", "committedDate": "2020-08-03T20:00:32Z", "type": "commit"}, {"oid": "2b6ff9f51e3623eb79ee53efa9fec8a9e900c1f6", "url": "https://github.com/elastic/elasticsearch/commit/2b6ff9f51e3623eb79ee53efa9fec8a9e900c1f6", "message": "autoscaling", "committedDate": "2020-08-03T20:25:13Z", "type": "commit"}, {"oid": "54446e22a76b5c08558debdaf6042f68d74bfd77", "url": "https://github.com/elastic/elasticsearch/commit/54446e22a76b5c08558debdaf6042f68d74bfd77", "message": "ccr:rest", "committedDate": "2020-08-03T20:31:57Z", "type": "commit"}, {"oid": "537fe051e8986cd244308ac739b499e4d46aa3a0", "url": "https://github.com/elastic/elasticsearch/commit/537fe051e8986cd244308ac739b499e4d46aa3a0", "message": "enrich", "committedDate": "2020-08-03T21:11:58Z", "type": "commit"}, {"oid": "06dcaf33351da499b750e525a9445de86a91b1b4", "url": "https://github.com/elastic/elasticsearch/commit/06dcaf33351da499b750e525a9445de86a91b1b4", "message": "eql", "committedDate": "2020-08-03T21:29:55Z", "type": "commit"}, {"oid": "4b823b6bb59b69c98de22d3687de41bc5b9b7d5c", "url": "https://github.com/elastic/elasticsearch/commit/4b823b6bb59b69c98de22d3687de41bc5b9b7d5c", "message": "enrich fixes", "committedDate": "2020-08-03T21:32:56Z", "type": "commit"}, {"oid": "7f1dff166d2ed4f19b081747cdc1265c657263f2", "url": "https://github.com/elastic/elasticsearch/commit/7f1dff166d2ed4f19b081747cdc1265c657263f2", "message": "data stream fixes", "committedDate": "2020-08-03T21:36:08Z", "type": "commit"}, {"oid": "9e8b72ece46d46a508d11e3e5eaf533955474f02", "url": "https://github.com/elastic/elasticsearch/commit/9e8b72ece46d46a508d11e3e5eaf533955474f02", "message": "ccr:rest fixes", "committedDate": "2020-08-03T21:40:06Z", "type": "commit"}, {"oid": "3ff33167102cea4df3c570b74ede65358c751122", "url": "https://github.com/elastic/elasticsearch/commit/3ff33167102cea4df3c570b74ede65358c751122", "message": "autoscale fix", "committedDate": "2020-08-03T21:41:43Z", "type": "commit"}, {"oid": "13c817667db32a203ed66541e68158ce15f1742a", "url": "https://github.com/elastic/elasticsearch/commit/13c817667db32a203ed66541e68158ce15f1742a", "message": "frozen-indices", "committedDate": "2020-08-03T21:46:10Z", "type": "commit"}, {"oid": "27f34cef2e82a679e017852812ef77c4b91a0a5d", "url": "https://github.com/elastic/elasticsearch/commit/27f34cef2e82a679e017852812ef77c4b91a0a5d", "message": "graph", "committedDate": "2020-08-03T21:55:25Z", "type": "commit"}, {"oid": "d5509df96acb5e7f7dfbd02f497b792398f13c56", "url": "https://github.com/elastic/elasticsearch/commit/d5509df96acb5e7f7dfbd02f497b792398f13c56", "message": "fix autoscaling testing conventions", "committedDate": "2020-08-05T15:14:19Z", "type": "commit"}, {"oid": "0caf4b3c29514e40e1cc82628e460dd83f4b6f16", "url": "https://github.com/elastic/elasticsearch/commit/0caf4b3c29514e40e1cc82628e460dd83f4b6f16", "message": "identity-provider", "committedDate": "2020-08-05T16:54:36Z", "type": "commit"}, {"oid": "48163d54d7453205b34e9ced050520b779553e7d", "url": "https://github.com/elastic/elasticsearch/commit/48163d54d7453205b34e9ced050520b779553e7d", "message": "ilm", "committedDate": "2020-08-05T17:29:54Z", "type": "commit"}, {"oid": "3f43102fd98b11514df7e30901584751839a2a0f", "url": "https://github.com/elastic/elasticsearch/commit/3f43102fd98b11514df7e30901584751839a2a0f", "message": "mapper-constant-keyword", "committedDate": "2020-08-05T17:34:03Z", "type": "commit"}, {"oid": "78ae27d99333cf7ba8a15e3fdf0e4d0f4bb5c7ab", "url": "https://github.com/elastic/elasticsearch/commit/78ae27d99333cf7ba8a15e3fdf0e4d0f4bb5c7ab", "message": "mapper-flattened", "committedDate": "2020-08-05T17:49:57Z", "type": "commit"}, {"oid": "61abbd28ce5ec950407633cbba2828123d3185ae", "url": "https://github.com/elastic/elasticsearch/commit/61abbd28ce5ec950407633cbba2828123d3185ae", "message": "ml - part 1 (not all working)", "committedDate": "2020-08-05T20:04:30Z", "type": "commit"}, {"oid": "9cfb7cc971514747080daa4416fb483d1e80eb38", "url": "https://github.com/elastic/elasticsearch/commit/9cfb7cc971514747080daa4416fb483d1e80eb38", "message": "ml - part 2", "committedDate": "2020-08-05T20:46:50Z", "type": "commit"}, {"oid": "ed0186f3b1cdd8824a994188a9248c7f9999fa26", "url": "https://github.com/elastic/elasticsearch/commit/ed0186f3b1cdd8824a994188a9248c7f9999fa26", "message": "ml part 3", "committedDate": "2020-08-05T20:51:18Z", "type": "commit"}, {"oid": "bceb48c89d88601c7ed41cd3c0bb0e35d178a1e3", "url": "https://github.com/elastic/elasticsearch/commit/bceb48c89d88601c7ed41cd3c0bb0e35d178a1e3", "message": "fix ILM tests", "committedDate": "2020-08-05T21:16:08Z", "type": "commit"}, {"oid": "a19c8122cb1c06b27f1506d9985fae1d721741cb", "url": "https://github.com/elastic/elasticsearch/commit/a19c8122cb1c06b27f1506d9985fae1d721741cb", "message": "Merge remote-tracking branch 'upstream/master' into yamlRestTest_xpack_plugins", "committedDate": "2020-08-05T21:27:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzNzY2OA==", "url": "https://github.com/elastic/elasticsearch/pull/60630#discussion_r466037668", "bodyText": "moved this to utility class (in the the test sourceset) so it can be shared easier.", "author": "jakelandis", "createdAt": "2020-08-05T22:24:19Z", "path": "x-pack/plugin/identity-provider/src/internalClusterTest/java/org/elasticsearch/xpack/idp/saml/sp/SamlServiceProviderIndexTests.java", "diffHunk": "@@ -242,59 +240,6 @@ private void refresh() {\n         future.actionGet();\n     }\n \n-    public static SamlServiceProviderDocument randomDocument() {", "originalCommit": "a19c8122cb1c06b27f1506d9985fae1d721741cb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzNzkwMg==", "url": "https://github.com/elastic/elasticsearch/pull/60630#discussion_r466037902", "bodyText": "no functional changes here ... just copy pasta to allow re-use across source sets.", "author": "jakelandis", "createdAt": "2020-08-05T22:24:58Z", "path": "x-pack/plugin/identity-provider/src/test/java/org/elasticsearch/xpack/idp/saml/sp/SamlServiceProviderTestUtils.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+\n+package org.elasticsearch.xpack.idp.saml.sp;\n+\n+import org.elasticsearch.common.unit.TimeValue;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import static org.elasticsearch.test.ESTestCase.randomAlphaOfLengthBetween;\n+import static org.elasticsearch.test.ESTestCase.randomBoolean;\n+import static org.elasticsearch.test.ESTestCase.randomFrom;\n+import static org.elasticsearch.test.ESTestCase.randomIntBetween;\n+import static org.elasticsearch.test.ESTestCase.randomLong;\n+import static org.hamcrest.Matchers.nullValue;\n+import static org.junit.Assert.assertThat;\n+import static org.opensaml.saml.saml2.core.NameIDType.TRANSIENT;\n+\n+public class SamlServiceProviderTestUtils {\n+\n+    private SamlServiceProviderTestUtils(){} //utility class\n+\n+    public static SamlServiceProviderDocument randomDocument() {", "originalCommit": "a19c8122cb1c06b27f1506d9985fae1d721741cb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzODczOA==", "url": "https://github.com/elastic/elasticsearch/pull/60630#discussion_r466038738", "bodyText": "Quite a few of the ML REST tests had a dependency on the ML main code for ONLY this base path reference in the tests.  Adding to each test like here is a bit redundant, but allows us to break that class path dependency and the REST path for ml is unlikely to change.", "author": "jakelandis", "createdAt": "2020-08-05T22:27:22Z", "path": "x-pack/plugin/ml/qa/basic-multi-node/src/javaRestTest/java/org/elasticsearch/xpack/ml/integration/MlBasicMultiNodeIT.java", "diffHunk": "@@ -29,6 +28,8 @@\n \n public class MlBasicMultiNodeIT extends ESRestTestCase {\n \n+    private static final String BASE_PATH = \"/_ml/\";", "originalCommit": "a19c8122cb1c06b27f1506d9985fae1d721741cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY3OTEwOQ==", "url": "https://github.com/elastic/elasticsearch/pull/60630#discussion_r466679109", "bodyText": "Good call. And if it does, that's a breaking change anyhow.", "author": "mark-vieira", "createdAt": "2020-08-06T20:51:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzODczOA=="}], "type": "inlineReview"}, {"oid": "f8038428ba51c43b3ae6cecc4764cac3c620c6ab", "url": "https://github.com/elastic/elasticsearch/commit/f8038428ba51c43b3ae6cecc4764cac3c620c6ab", "message": "Merge remote-tracking branch 'upstream/master' into yamlRestTest_xpack_plugins", "committedDate": "2020-08-24T16:29:53Z", "type": "commit"}, {"oid": "29bb22fdf3587214833b1c3486297179e473a933", "url": "https://github.com/elastic/elasticsearch/commit/29bb22fdf3587214833b1c3486297179e473a933", "message": "preserve main source set", "committedDate": "2020-08-24T19:02:36Z", "type": "commit"}, {"oid": "43cbc3ef05e042a33f6a1ee90c8c380c803d38d9", "url": "https://github.com/elastic/elasticsearch/commit/43cbc3ef05e042a33f6a1ee90c8c380c803d38d9", "message": "Merge branch 'master' into yamlRestTest_xpack_plugins", "committedDate": "2020-09-01T15:58:28Z", "type": "commit"}, {"oid": "9ec969b4079e91d0b85cbbdb602c5fa017d32165", "url": "https://github.com/elastic/elasticsearch/commit/9ec969b4079e91d0b85cbbdb602c5fa017d32165", "message": "fix merge", "committedDate": "2020-09-01T17:09:20Z", "type": "commit"}, {"oid": "9f15419764e6079b62c15ff95d0ea19d228f1caf", "url": "https://github.com/elastic/elasticsearch/commit/9f15419764e6079b62c15ff95d0ea19d228f1caf", "message": "fix available processors", "committedDate": "2020-09-01T17:31:46Z", "type": "commit"}, {"oid": "666ae84d7d741b2948bd5d79ac17fdfbfe268ccf", "url": "https://github.com/elastic/elasticsearch/commit/666ae84d7d741b2948bd5d79ac17fdfbfe268ccf", "message": "fix the merge fix", "committedDate": "2020-09-01T19:19:01Z", "type": "commit"}]}