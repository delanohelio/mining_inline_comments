{"pr_number": 7214, "pr_title": "5050 Parse all dc identifier elements and allow identifiers that don'\u2026", "pr_createdAt": "2020-08-21T12:20:16Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7214", "timeline": [{"oid": "a018055f2ed981b634175a135f676f0d3ec5cc0e", "url": "https://github.com/IQSS/dataverse/commit/a018055f2ed981b634175a135f676f0d3ec5cc0e", "message": "cleanup - add explicit type", "committedDate": "2020-04-11T19:02:19Z", "type": "commit"}, {"oid": "d31443171b37d72976a1dcf2b7263c319aca1815", "url": "https://github.com/IQSS/dataverse/commit/d31443171b37d72976a1dcf2b7263c319aca1815", "message": "add multipart upload api calls and add to S3StorageIO class\n\nalso refactor S3StorageIO to re-use single client per store, use more\nstatic methods", "committedDate": "2020-04-11T19:03:47Z", "type": "commit"}, {"oid": "dbbd56984c613db967b837936766dae15a811a17", "url": "https://github.com/IQSS/dataverse/commit/dbbd56984c613db967b837936766dae15a811a17", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763", "committedDate": "2020-04-17T15:58:24Z", "type": "commit"}, {"oid": "61448a8d6a04a3a017a67fa19d2861c9b0d394fa", "url": "https://github.com/IQSS/dataverse/commit/61448a8d6a04a3a017a67fa19d2861c9b0d394fa", "message": "update error msgs", "committedDate": "2020-04-17T16:04:16Z", "type": "commit"}, {"oid": "cd7e34544cfbaeb1204ca65d5f01a34ecb85517c", "url": "https://github.com/IQSS/dataverse/commit/cd7e34544cfbaeb1204ca65d5f01a34ecb85517c", "message": "try test update", "committedDate": "2020-04-17T20:52:47Z", "type": "commit"}, {"oid": "8b88b393bdedfc24f81e0925895f5fa36a01e33d", "url": "https://github.com/IQSS/dataverse/commit/8b88b393bdedfc24f81e0925895f5fa36a01e33d", "message": "Restore driverId check in getMainKey to pass tests\n\nNominally useful if code ever changes the storageIdentifier of the\ndvObject after the S3AccessIO instance is created, but real code\nshouldn't do that :-)", "committedDate": "2020-04-17T22:10:54Z", "type": "commit"}, {"oid": "7b91c07c692f8ced2fd99320edb8b0ff16a9519c", "url": "https://github.com/IQSS/dataverse/commit/7b91c07c692f8ced2fd99320edb8b0ff16a9519c", "message": "remove unused imports", "committedDate": "2020-04-24T15:46:49Z", "type": "commit"}, {"oid": "6b0388490bc7b265c00b0243e19c0d80bf10afe6", "url": "https://github.com/IQSS/dataverse/commit/6b0388490bc7b265c00b0243e19c0d80bf10afe6", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763", "committedDate": "2020-04-24T15:46:55Z", "type": "commit"}, {"oid": "e707519a1362707c6337de8c8f0859f41f4a1c0b", "url": "https://github.com/IQSS/dataverse/commit/e707519a1362707c6337de8c8f0859f41f4a1c0b", "message": "report the exception message when can't access bucket", "committedDate": "2020-04-24T18:47:09Z", "type": "commit"}, {"oid": "dab4af6a255699171de67628ba95b91115426971", "url": "https://github.com/IQSS/dataverse/commit/dab4af6a255699171de67628ba95b91115426971", "message": "typo on comparison", "committedDate": "2020-04-24T19:40:34Z", "type": "commit"}, {"oid": "d322809485777d92dd3fbbbab0e284bfe97bf996", "url": "https://github.com/IQSS/dataverse/commit/d322809485777d92dd3fbbbab0e284bfe97bf996", "message": "IQSS/6829 - account for file failures", "committedDate": "2020-04-24T21:22:20Z", "type": "commit"}, {"oid": "6ca407ceffd6ba3e2829515b79d6a6d812975ca4", "url": "https://github.com/IQSS/dataverse/commit/6ca407ceffd6ba3e2829515b79d6a6d812975ca4", "message": "remove ~duplicate code", "committedDate": "2020-04-24T21:42:35Z", "type": "commit"}, {"oid": "b0557aa374c2ec20fc68c521c6641f821685811a", "url": "https://github.com/IQSS/dataverse/commit/b0557aa374c2ec20fc68c521c6641f821685811a", "message": "IQSS-6829 - avoid race with 2+ files uploading\n\nand the dataset pid being set multiple times.", "committedDate": "2020-04-27T14:18:10Z", "type": "commit"}, {"oid": "beb419ee143bc974ba2008c013e55b859c2d4535", "url": "https://github.com/IQSS/dataverse/commit/beb419ee143bc974ba2008c013e55b859c2d4535", "message": "IQSS/6829 - create mode uses DatasetPage - initialize identifier there\n\nfor directUpload case", "committedDate": "2020-04-27T15:47:38Z", "type": "commit"}, {"oid": "8400c2071ab9f4f6f2a273d037b0c90752483ea8", "url": "https://github.com/IQSS/dataverse/commit/8400c2071ab9f4f6f2a273d037b0c90752483ea8", "message": "move directUploadEnabled to systemconfig\n\nused in DatasetPage and editFilesFragment.xhtml", "committedDate": "2020-04-27T16:21:13Z", "type": "commit"}, {"oid": "6f9baede0017b15ce5dd3d0ae153b8d69c6b3722", "url": "https://github.com/IQSS/dataverse/commit/6f9baede0017b15ce5dd3d0ae153b8d69c6b3722", "message": "typo/fix method calls", "committedDate": "2020-04-27T17:02:34Z", "type": "commit"}, {"oid": "f841d592cdcf8ee7e6593c117ac7266c51615772", "url": "https://github.com/IQSS/dataverse/commit/f841d592cdcf8ee7e6593c117ac7266c51615772", "message": "set minimum part size", "committedDate": "2020-04-27T19:31:17Z", "type": "commit"}, {"oid": "f844914884da53c4aeeebcae0611a8a4c47e2b2f", "url": "https://github.com/IQSS/dataverse/commit/f844914884da53c4aeeebcae0611a8a4c47e2b2f", "message": "add convenience urls", "committedDate": "2020-04-27T19:49:46Z", "type": "commit"}, {"oid": "db00c6f0371b5f2abd7cadb54f2c64380e2be786", "url": "https://github.com/IQSS/dataverse/commit/db00c6f0371b5f2abd7cadb54f2c64380e2be786", "message": "add dv_status=temp tag in multipart uploads", "committedDate": "2020-04-29T19:22:58Z", "type": "commit"}, {"oid": "f473fabc0653faab89688df0bccad8aa87761d3f", "url": "https://github.com/IQSS/dataverse/commit/f473fabc0653faab89688df0bccad8aa87761d3f", "message": "return no content for delete call", "committedDate": "2020-04-30T21:23:53Z", "type": "commit"}, {"oid": "088efb0b022d21cf347c38fe6529426121995226", "url": "https://github.com/IQSS/dataverse/commit/088efb0b022d21cf347c38fe6529426121995226", "message": "add request for upload in parts method", "committedDate": "2020-04-30T21:24:53Z", "type": "commit"}, {"oid": "be27169948b1738e76f8ba436eb2130f862eb59d", "url": "https://github.com/IQSS/dataverse/commit/be27169948b1738e76f8ba436eb2130f862eb59d", "message": "handle net:ERR_NETWORK_CHANGED errors w/o 'undefined' error", "committedDate": "2020-05-01T18:43:06Z", "type": "commit"}, {"oid": "ef6ef134b2d93ab6d25e1bf9d67da4fe40d3b100", "url": "https://github.com/IQSS/dataverse/commit/ef6ef134b2d93ab6d25e1bf9d67da4fe40d3b100", "message": "remove draft code from other branch", "committedDate": "2020-05-01T18:43:24Z", "type": "commit"}, {"oid": "a666a7b98af3961a299249c306fb5bb565a2b574", "url": "https://github.com/IQSS/dataverse/commit/a666a7b98af3961a299249c306fb5bb565a2b574", "message": "handle dataverse change - keep GlobalId in direct upload case", "committedDate": "2020-05-01T18:43:30Z", "type": "commit"}, {"oid": "4bb1b660141f28353994146342b636b496b3e53f", "url": "https://github.com/IQSS/dataverse/commit/4bb1b660141f28353994146342b636b496b3e53f", "message": "IQSS/6881 delete temp files when cancelling dataset create", "committedDate": "2020-05-01T21:09:25Z", "type": "commit"}, {"oid": "45245b3ba7ed918a0d252266337136e55c3ece08", "url": "https://github.com/IQSS/dataverse/commit/45245b3ba7ed918a0d252266337136e55c3ece08", "message": "IQSS 6881 cleanup temp files on cancel when creating dataset", "committedDate": "2020-05-04T15:28:00Z", "type": "commit"}, {"oid": "e2d7207919d1ff48c5e671c400cd635e47c3ac62", "url": "https://github.com/IQSS/dataverse/commit/e2d7207919d1ff48c5e671c400cd635e47c3ac62", "message": "get/set for uploadInProgress", "committedDate": "2020-05-04T21:21:29Z", "type": "commit"}, {"oid": "56bd6a7f391d2b798f3452e15024299625403b13", "url": "https://github.com/IQSS/dataverse/commit/56bd6a7f391d2b798f3452e15024299625403b13", "message": "actually initialize uploadInProgress", "committedDate": "2020-05-04T21:33:34Z", "type": "commit"}, {"oid": "40f2cd123fdbc557da08b51eb66584dbad496355", "url": "https://github.com/IQSS/dataverse/commit/40f2cd123fdbc557da08b51eb66584dbad496355", "message": "limit processing on cancelCreate", "committedDate": "2020-05-05T20:50:58Z", "type": "commit"}, {"oid": "dc3f13072bf89790d8194a186d886294c131c104", "url": "https://github.com/IQSS/dataverse/commit/dc3f13072bf89790d8194a186d886294c131c104", "message": "catch all files in direct upload cancel + debug statements", "committedDate": "2020-05-06T19:13:04Z", "type": "commit"}, {"oid": "7d515116e2c4084a1fe9b88f2312ab1895736ca9", "url": "https://github.com/IQSS/dataverse/commit/7d515116e2c4084a1fe9b88f2312ab1895736ca9", "message": "split cancel into two parts, allow stopping reports in edit mode", "committedDate": "2020-05-06T20:46:47Z", "type": "commit"}, {"oid": "0ee39a958d0b186f72692bcfb95361b14c9fbcbf", "url": "https://github.com/IQSS/dataverse/commit/0ee39a958d0b186f72692bcfb95361b14c9fbcbf", "message": "use redirect", "committedDate": "2020-05-06T21:25:37Z", "type": "commit"}, {"oid": "7ccd4b920bd7ea7dd85d923f1bf2752ef065b234", "url": "https://github.com/IQSS/dataverse/commit/7ccd4b920bd7ea7dd85d923f1bf2752ef065b234", "message": "fix remotecommand and disable buttons if waiting", "committedDate": "2020-05-06T22:16:07Z", "type": "commit"}, {"oid": "4974cdfe51fbbd6ad1eb6ca8a7b2787dcdb3b31c", "url": "https://github.com/IQSS/dataverse/commit/4974cdfe51fbbd6ad1eb6ca8a7b2787dcdb3b31c", "message": "don't bubble click by returning false\n\notherwise page refreshes before the remoteCommand finishes and returns\nto the dataverse page", "committedDate": "2020-05-11T18:41:49Z", "type": "commit"}, {"oid": "2737f43def4459d6762c52aeba7521df1b0bb0bb", "url": "https://github.com/IQSS/dataverse/commit/2737f43def4459d6762c52aeba7521df1b0bb0bb", "message": "one handleExternalUpload call at a time", "committedDate": "2020-05-11T18:42:17Z", "type": "commit"}, {"oid": "a2b47ec53deaf9f536249c718ca8e2976f2ddb59", "url": "https://github.com/IQSS/dataverse/commit/a2b47ec53deaf9f536249c718ca8e2976f2ddb59", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763\n\nConflicts:\n\tsrc/main/webapp/resources/js/fileupload.js", "committedDate": "2020-05-11T18:55:53Z", "type": "commit"}, {"oid": "1963f09f7e8a7924fc58b6d76cc2d0c0761aa741", "url": "https://github.com/IQSS/dataverse/commit/1963f09f7e8a7924fc58b6d76cc2d0c0761aa741", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763\n\nConflicts:\n\tsrc/main/java/edu/harvard/iq/dataverse/DatasetPage.java\n\tsrc/main/webapp/resources/js/fileupload.js", "committedDate": "2020-05-22T19:57:55Z", "type": "commit"}, {"oid": "dbecab9e3713258461a30ae4d0641515c21189b7", "url": "https://github.com/IQSS/dataverse/commit/dbecab9e3713258461a30ae4d0641515c21189b7", "message": "add a delay for tiny files", "committedDate": "2020-05-22T22:20:13Z", "type": "commit"}, {"oid": "e1993b288bd83ea140aa3c7d3abdc10e1f2394ab", "url": "https://github.com/IQSS/dataverse/commit/e1993b288bd83ea140aa3c7d3abdc10e1f2394ab", "message": "more changes to fix concurrency issues", "committedDate": "2020-06-05T16:17:07Z", "type": "commit"}, {"oid": "a1c2c92cf7c316caad311b079d99a6bc28d28aa0", "url": "https://github.com/IQSS/dataverse/commit/a1c2c92cf7c316caad311b079d99a6bc28d28aa0", "message": "bug - requests for URL weren't queued after initial 4", "committedDate": "2020-06-05T17:41:14Z", "type": "commit"}, {"oid": "a3b775b84dd11b7632921ba9ca9958bb3bce5a13", "url": "https://github.com/IQSS/dataverse/commit/a3b775b84dd11b7632921ba9ca9958bb3bce5a13", "message": "update version console entry", "committedDate": "2020-06-05T19:17:40Z", "type": "commit"}, {"oid": "b4f71783bc81a2d83e1b012bf502a33a742be80e", "url": "https://github.com/IQSS/dataverse/commit/b4f71783bc81a2d83e1b012bf502a33a742be80e", "message": "make it easier to adjust delay", "committedDate": "2020-06-05T20:01:47Z", "type": "commit"}, {"oid": "0a546d9471f54420393936126d91a5cc5e45864a", "url": "https://github.com/IQSS/dataverse/commit/0a546d9471f54420393936126d91a5cc5e45864a", "message": "decrease to 100 ms delay\n\nkeeping the cancel delay at 1 second - any queued uploads need to\nfinish.", "committedDate": "2020-06-05T20:49:34Z", "type": "commit"}, {"oid": "c438219df0c7b679d42ecfb05069c150783c0374", "url": "https://github.com/IQSS/dataverse/commit/c438219df0c7b679d42ecfb05069c150783c0374", "message": "correct save button selector for disbale during cancel", "committedDate": "2020-06-05T20:49:40Z", "type": "commit"}, {"oid": "6bae2645f5f78436ab9140a44e28db3db966ede0", "url": "https://github.com/IQSS/dataverse/commit/6bae2645f5f78436ab9140a44e28db3db966ede0", "message": "fix selector", "committedDate": "2020-06-05T20:49:59Z", "type": "commit"}, {"oid": "37ab57a9b8e5a6055d2d9724ba4731849d9f03c0", "url": "https://github.com/IQSS/dataverse/commit/37ab57a9b8e5a6055d2d9724ba4731849d9f03c0", "message": "update console version info", "committedDate": "2020-06-05T20:50:53Z", "type": "commit"}, {"oid": "6d6d2b04a041836064c961e8a54357f9661a43ca", "url": "https://github.com/IQSS/dataverse/commit/6d6d2b04a041836064c961e8a54357f9661a43ca", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763\n\nConflicts:\n\tsrc/main/java/edu/harvard/iq/dataverse/api/Datasets.java", "committedDate": "2020-06-15T20:50:17Z", "type": "commit"}, {"oid": "d4ae32254979ffab2ae6f7ffd657cca1a872219c", "url": "https://github.com/IQSS/dataverse/commit/d4ae32254979ffab2ae6f7ffd657cca1a872219c", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763", "committedDate": "2020-06-17T19:17:59Z", "type": "commit"}, {"oid": "050b59d677d4b1da6a77f0989f5cf48104b0ce9c", "url": "https://github.com/IQSS/dataverse/commit/050b59d677d4b1da6a77f0989f5cf48104b0ce9c", "message": "removing whitespace changes", "committedDate": "2020-06-17T19:20:07Z", "type": "commit"}, {"oid": "66d84c12537fc207cdc3cd7bacabc519bdb53933", "url": "https://github.com/IQSS/dataverse/commit/66d84c12537fc207cdc3cd7bacabc519bdb53933", "message": "removing mp-upload-specific changes", "committedDate": "2020-06-17T19:45:56Z", "type": "commit"}, {"oid": "a792363b75982543e6d80a8fabc949f2d4277230", "url": "https://github.com/IQSS/dataverse/commit/a792363b75982543e6d80a8fabc949f2d4277230", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6993", "committedDate": "2020-08-10T18:46:56Z", "type": "commit"}, {"oid": "319b3940b4da0026e0d6f4b55437b7582491365f", "url": "https://github.com/IQSS/dataverse/commit/319b3940b4da0026e0d6f4b55437b7582491365f", "message": "fix for #7184 spaces changed in s3 direct download", "committedDate": "2020-08-11T21:52:17Z", "type": "commit"}, {"oid": "76c0b3c00e211e83f7c0e2d035fc1eb52066c4c3", "url": "https://github.com/IQSS/dataverse/commit/76c0b3c00e211e83f7c0e2d035fc1eb52066c4c3", "message": "The version pf hibernate-validator that we were using, 5.0.3.Final was reported to allow an attacker to escalate permissions and access private values and create invalid instances - see CVE-2017-7536. It is reported to be fixed in versions 5.2.5.Final and greater.\n\nThe upgraded library had changes to the api for constructing ConstaintValidatorContextImpl, used in URLValidatorTest.java. In investigating the changes, it was found that there were further changes to the api in recent versions and it was decided to adapt the code to the latest changes and use the latest available stable hibernate-validator library - 6.1.5.Final.\n\nIt was also necessary to add a dependency to javax.el due to changes in the library starting with version 5.3.1.Final and later.", "committedDate": "2020-08-20T16:48:16Z", "type": "commit"}, {"oid": "438a7d0b4a317abae32d0116beed5d377c8b1b6d", "url": "https://github.com/IQSS/dataverse/commit/438a7d0b4a317abae32d0116beed5d377c8b1b6d", "message": "code cleanup", "committedDate": "2020-08-20T17:49:41Z", "type": "commit"}, {"oid": "ab33496e6bc3b62c0de83e94a011dbd6a48142c1", "url": "https://github.com/IQSS/dataverse/commit/ab33496e6bc3b62c0de83e94a011dbd6a48142c1", "message": "sorry, one more line of commented code removed", "committedDate": "2020-08-20T17:53:40Z", "type": "commit"}, {"oid": "0caf09ef7a970547cfc826209f755936ef5411c9", "url": "https://github.com/IQSS/dataverse/commit/0caf09ef7a970547cfc826209f755936ef5411c9", "message": "+ note", "committedDate": "2020-08-20T17:56:20Z", "type": "commit"}, {"oid": "e7638c19cab491216227f667fca3a872fdf54af5", "url": "https://github.com/IQSS/dataverse/commit/e7638c19cab491216227f667fca3a872fdf54af5", "message": "adding character", "committedDate": "2020-08-20T17:56:44Z", "type": "commit"}, {"oid": "10c2fb7c23442bd4ad368602f3e13ff3dedc6186", "url": "https://github.com/IQSS/dataverse/commit/10c2fb7c23442bd4ad368602f3e13ff3dedc6186", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6993", "committedDate": "2020-08-20T19:12:42Z", "type": "commit"}, {"oid": "df442c5c4ccd84a02169adda11f0ebda52833833", "url": "https://github.com/IQSS/dataverse/commit/df442c5c4ccd84a02169adda11f0ebda52833833", "message": "Change ek dependency to jakarta.el provided by Payara", "committedDate": "2020-08-20T20:31:45Z", "type": "commit"}, {"oid": "a7fcdfa9a1891fb73c58467c5aaa6d09a369dd24", "url": "https://github.com/IQSS/dataverse/commit/a7fcdfa9a1891fb73c58467c5aaa6d09a369dd24", "message": "Use hibernate-validator provided with Payara (still a 6.1.x -6.1.2 specifically at this point)", "committedDate": "2020-08-20T21:50:13Z", "type": "commit"}, {"oid": "2caf3021d0cacd22e495df56acdef510ca420512", "url": "https://github.com/IQSS/dataverse/commit/2caf3021d0cacd22e495df56acdef510ca420512", "message": "5050 Parse all dc identifier elements and allow identifiers that don't have \"doi\" or \"hdl\" in them.", "committedDate": "2020-08-21T12:14:12Z", "type": "commit"}, {"oid": "5a547a690bdb1f3cd2ea6beee56778d482aeae89", "url": "https://github.com/IQSS/dataverse/commit/5a547a690bdb1f3cd2ea6beee56778d482aeae89", "message": "#7215 correct dataciterestapiurlstrings, add mdcbaseurlstring deletion example", "committedDate": "2020-08-21T15:05:53Z", "type": "commit"}, {"oid": "cdbb7f2343296197f5609623586cebbdaa918f72", "url": "https://github.com/IQSS/dataverse/commit/cdbb7f2343296197f5609623586cebbdaa918f72", "message": "Merge pull request #6994 from GlobalDataverseCommunityConsortium/IQSS/6993\n\nIQSS/6993-use-single-AWS-client-per-store", "committedDate": "2020-08-24T18:39:46Z", "type": "commit"}, {"oid": "37433c8a31aa712b82d68de53801d4f959ce4d92", "url": "https://github.com/IQSS/dataverse/commit/37433c8a31aa712b82d68de53801d4f959ce4d92", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/7184-encode_space_in_filename-correctly", "committedDate": "2020-08-24T19:20:40Z", "type": "commit"}, {"oid": "fb38e66b0d8dda921b7f79b3e0446a373be6f3d3", "url": "https://github.com/IQSS/dataverse/commit/fb38e66b0d8dda921b7f79b3e0446a373be6f3d3", "message": "Merge remote-tracking branch 'origin/IQSS/7184-encode_space_in_filename-correctly' into IQSS/7184-encode_space_in_filename-correctly", "committedDate": "2020-08-24T19:24:21Z", "type": "commit"}, {"oid": "6e1fe74bf273e736be8c6b0650d2b95acbca1f2d", "url": "https://github.com/IQSS/dataverse/commit/6e1fe74bf273e736be8c6b0650d2b95acbca1f2d", "message": "Merge pull request #7186 from QualitativeDataRepository/IQSS/7184-encode_space_in_filename-correctly\n\nfix for #7184 spaces changed in s3 direct download", "committedDate": "2020-08-24T20:13:35Z", "type": "commit"}, {"oid": "1d1388081f57f7fafa67ac50eef8b3ba1088e9db", "url": "https://github.com/IQSS/dataverse/commit/1d1388081f57f7fafa67ac50eef8b3ba1088e9db", "message": "Merge pull request #7216 from OdumInstitute/develop\n\ncorrect dataciterestapiurlstrings, add mdcbaseurlstring deletion example", "committedDate": "2020-08-25T13:32:48Z", "type": "commit"}, {"oid": "1dd243115af5e04eba4d3a4751fa42d20bcc7064", "url": "https://github.com/IQSS/dataverse/commit/1dd243115af5e04eba4d3a4751fa42d20bcc7064", "message": "changed hibernat-validator scope from provided to compile, because we were getting NoClassDefFoundError: org/hibernate/validator/internal/util/CollectionHelper at runtime while creating an account", "committedDate": "2020-08-25T21:52:16Z", "type": "commit"}, {"oid": "7f3051a93715a1780ea9c7a2e0a6ffcf3381ae6b", "url": "https://github.com/IQSS/dataverse/commit/7f3051a93715a1780ea9c7a2e0a6ffcf3381ae6b", "message": "Remove compile scope as unneccessary because it is the default scope", "committedDate": "2020-08-26T13:44:35Z", "type": "commit"}, {"oid": "5e3b6acb5b13ce7a11d863125eb6228f0f2c99e6", "url": "https://github.com/IQSS/dataverse/commit/5e3b6acb5b13ce7a11d863125eb6228f0f2c99e6", "message": "Last commit included experimental removal of jakarta.el, which does not work", "committedDate": "2020-08-26T14:01:04Z", "type": "commit"}, {"oid": "796e612577f9cfeb05f6a6aeab03346b6b788394", "url": "https://github.com/IQSS/dataverse/commit/796e612577f9cfeb05f6a6aeab03346b6b788394", "message": "Merge pull request #7222 from IQSS/security18-hibernate-validator-vulnerability\n\nSecurity18 hibernate validator vulnerability", "committedDate": "2020-08-26T14:18:20Z", "type": "commit"}, {"oid": "89cb145d90aba6509a11686d99fed6ef1b8bee83", "url": "https://github.com/IQSS/dataverse/commit/89cb145d90aba6509a11686d99fed6ef1b8bee83", "message": "Use handle library to resolve handle.", "committedDate": "2020-08-26T21:14:47Z", "type": "commit"}, {"oid": "c84ca49543fec04ca8e7958b6d4eb2f63aef071e", "url": "https://github.com/IQSS/dataverse/commit/c84ca49543fec04ca8e7958b6d4eb2f63aef071e", "message": "5050 Parse all dc identifier elements and allow identifiers that don't have \"doi\" or \"hdl\" in them.", "committedDate": "2020-08-30T14:15:27Z", "type": "commit"}, {"oid": "ab1375b5e7e943480f51abe4e53937786d0f546d", "url": "https://github.com/IQSS/dataverse/commit/ab1375b5e7e943480f51abe4e53937786d0f546d", "message": "Use handle library to resolve handle.", "committedDate": "2020-08-30T14:15:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIwMjU5Mw==", "url": "https://github.com/IQSS/dataverse/pull/7214#discussion_r496202593", "bodyText": "Should this be if (otherId.startsWith(GlobalId.DOI_PROTOCOL) ... instead?\nOr maybe even if (otherId.toLowerCase().startsWith(GlobalId.DOI_PROTOCOL) ...?", "author": "landreev", "createdAt": "2020-09-28T20:07:34Z", "path": "src/main/java/edu/harvard/iq/dataverse/api/imports/ImportGenericServiceBean.java", "diffHunk": "@@ -366,27 +368,42 @@ private FieldDTO makeDTO(DatasetFieldType dataverseFieldType, FieldDTO value, St\n     }\n     \n     private String getOtherIdFromDTO(DatasetVersionDTO datasetVersionDTO) {\n+        List<String> otherIds = new ArrayList<>();\n         for (Map.Entry<String, MetadataBlockDTO> entry : datasetVersionDTO.getMetadataBlocks().entrySet()) {\n             String key = entry.getKey();\n             MetadataBlockDTO value = entry.getValue();\n             if (\"citation\".equals(key)) {\n                 for (FieldDTO fieldDTO : value.getFields()) {\n                     if (DatasetFieldConstant.otherId.equals(fieldDTO.getTypeName())) {\n-                        String otherId = \"\";\n                         for (HashSet<FieldDTO> foo : fieldDTO.getMultipleCompound()) {\n                             for (FieldDTO next : foo) {\n                                 if (DatasetFieldConstant.otherIdValue.equals(next.getTypeName())) {\n-                                    otherId =  next.getSinglePrimitive();\n+                                    otherIds.add(next.getSinglePrimitive());\n                                 }\n                             }\n-                            if (!otherId.isEmpty()){\n-                                return otherId;\n-                            }\n                         }\n                     }\n                 }\n             }\n         }\n+        if (!otherIds.isEmpty()) {\n+            // We prefer doi or hdl identifiers like \"doi:10.7910/DVN/1HE30F\"\n+            for (String otherId : otherIds) {\n+                if (otherId.contains(GlobalId.DOI_PROTOCOL) || otherId.contains(GlobalId.HDL_PROTOCOL)) {", "originalCommit": "89cb145d90aba6509a11686d99fed6ef1b8bee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIyMDI1OQ==", "url": "https://github.com/IQSS/dataverse/pull/7214#discussion_r496220259", "bodyText": "@landreev The identifier could also be \"https://doi.org/10.7910/DVN/1HE30F\". I made the identifier into lowercase just in case.", "author": "JingMa87", "createdAt": "2020-09-28T20:42:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIwMjU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI2Mzg0MA==", "url": "https://github.com/IQSS/dataverse/pull/7214#discussion_r496263840", "bodyText": "@JingMa87\nLooking at your last commits, it's still looking like your code is doing \"if ... contains()\"... I still think it should be \"if ... startsWith()\" instead. Or it will just assume that any identifier that happens to contain the characters \"hdl\" is a handle, no?\nAnd yes, it's a good idea to check for the \"https://doi.org/10.7910/DVN/1HE30F\" form as well. Please note that we also have GlobalId.DOI_RESOLVER_URL and GlobalId.HDL_RESOLVER_URL defined. So maybe add .startsWith() for these too?", "author": "landreev", "createdAt": "2020-09-28T22:09:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIwMjU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMwNTI2MQ==", "url": "https://github.com/IQSS/dataverse/pull/7214#discussion_r496305261", "bodyText": "Agreed, I pushed the changes.", "author": "JingMa87", "createdAt": "2020-09-29T00:20:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIwMjU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg2NDE3MA==", "url": "https://github.com/IQSS/dataverse/pull/7214#discussion_r496864170", "bodyText": "I'm really sorry to be difficult, I know you have other things to work on - but do we really want to permanently convert to lower case?\nI only suggested it for the test... to be able to catch both \"hdl:...\" and \"HDL:...\" - but I'm not sure even that is necessary...\nI don't think we want to save \"doi:10.7910/DVN/1HE30F\" as \"doi:10.7910/dvn/1he30f\" - ?\nLet's just remove the otherId = otherId.toLowerCase(); line.\nThank you!", "author": "landreev", "createdAt": "2020-09-29T16:15:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIwMjU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjkwNDU2MQ==", "url": "https://github.com/IQSS/dataverse/pull/7214#discussion_r496904561", "bodyText": "No worries! I made the changes.", "author": "JingMa87", "createdAt": "2020-09-29T17:11:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIwMjU5Mw=="}], "type": "inlineReview"}, {"oid": "06554b0e3cfcdddc3d7f7f151cd4f6ab32335174", "url": "https://github.com/IQSS/dataverse/commit/06554b0e3cfcdddc3d7f7f151cd4f6ab32335174", "message": "Make identifier lower case.", "committedDate": "2020-09-28T20:37:00Z", "type": "commit"}, {"oid": "6d5fd096248ba550fcfccf20bdc796a9cfef3874", "url": "https://github.com/IQSS/dataverse/commit/6d5fd096248ba550fcfccf20bdc796a9cfef3874", "message": "Make identifier lower case.", "committedDate": "2020-09-28T20:41:43Z", "type": "commit"}, {"oid": "3d0524bac4f7fb44f0cc41c84b1fa3990e4ac331", "url": "https://github.com/IQSS/dataverse/commit/3d0524bac4f7fb44f0cc41c84b1fa3990e4ac331", "message": "Remove unused variable.", "committedDate": "2020-09-28T20:44:27Z", "type": "commit"}, {"oid": "20a1a08dc4259c20685fc952d76601754290ab3f", "url": "https://github.com/IQSS/dataverse/commit/20a1a08dc4259c20685fc952d76601754290ab3f", "message": "Change to startsWith() and check for doi and hdl URLs.", "committedDate": "2020-09-29T00:19:51Z", "type": "commit"}, {"oid": "23a02521685d1575fd7291030e84e86ee88fd8be", "url": "https://github.com/IQSS/dataverse/commit/23a02521685d1575fd7291030e84e86ee88fd8be", "message": "Remove toLowerCase().", "committedDate": "2020-09-29T17:10:57Z", "type": "commit"}]}