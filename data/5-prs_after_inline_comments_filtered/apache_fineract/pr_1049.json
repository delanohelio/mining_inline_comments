{"pr_number": 1049, "pr_title": "FINERACT-857: Fixing scheduler integration tests and migrating to executeAndAwaitJob", "pr_createdAt": "2020-06-13T03:58:11Z", "pr_url": "https://github.com/apache/fineract/pull/1049", "timeline": [{"oid": "18c83a07efb15315cd3e32072de31fc4dea77c9a", "url": "https://github.com/apache/fineract/commit/18c83a07efb15315cd3e32072de31fc4dea77c9a", "message": "FINERACT-857: Fixing scheduler integration tests and migrating to executeAndAwaitJob", "committedDate": "2020-06-13T05:09:25Z", "type": "forcePushed"}, {"oid": "1d3afeec00d3197144f4597218a1a6cc20db0fc2", "url": "https://github.com/apache/fineract/commit/1d3afeec00d3197144f4597218a1a6cc20db0fc2", "message": "FINERACT-857: Fixing scheduler integration tests and migrating to executeAndAwaitJob", "committedDate": "2020-06-13T05:25:08Z", "type": "forcePushed"}, {"oid": "ddef698b60bff27b7d2abbd2232b2ff262797815", "url": "https://github.com/apache/fineract/commit/ddef698b60bff27b7d2abbd2232b2ff262797815", "message": "FINERACT-857: Fixing scheduler integration tests and migrating to executeAndAwaitJob", "committedDate": "2020-06-13T06:18:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMDgxMw==", "url": "https://github.com/apache/fineract/pull/1049#discussion_r439720813", "bodyText": "LOG.error(..., e) instead of e.getMessage() will log full cause. Or was this intentional?", "author": "vorburger", "createdAt": "2020-06-13T08:22:00Z", "path": "fineract-provider/src/main/java/org/apache/fineract/scheduledjobs/service/ScheduledJobRunnerServiceImpl.java", "diffHunk": "@@ -229,7 +229,7 @@ public void applyAnnualFeeForSavings() {\n                     LOG.error(\"Apply annual fee failed for account: {} with message {}\", savingsAccountReference.getAccountNo(), error);\n                 }\n             } catch (final Exception ex) {\n-                // need to handle this scenario\n+                LOG.error(\"Apply annual fee failed for account: {} with message: {}\", savingsAccountReference.getAccountNo(), ex.getMessage());\n             }", "originalCommit": "ddef698b60bff27b7d2abbd2232b2ff262797815", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2Mzc4MA==", "url": "https://github.com/apache/fineract/pull/1049#discussion_r439763780", "bodyText": "I was thinking that if we have scheduled jobs processing large quantities of accounts, we may not want to have the full stack trace for every account - one line per account with the account number and error message would be enough. But will change this to print the full cause...", "author": "ptuomola", "createdAt": "2020-06-13T19:38:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMDgxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgxOTg5OA==", "url": "https://github.com/apache/fineract/pull/1049#discussion_r439819898", "bodyText": "I see what you mean, but didn't get it initially. For \"consistency\", let's keep it like you have fixed it, and deal with it if we have overflowing logs, only.", "author": "vorburger", "createdAt": "2020-06-14T11:30:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMDgxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMDgyMw==", "url": "https://github.com/apache/fineract/pull/1049#discussion_r439720823", "bodyText": "as above", "author": "vorburger", "createdAt": "2020-06-13T08:22:11Z", "path": "fineract-provider/src/main/java/org/apache/fineract/scheduledjobs/service/ScheduledJobRunnerServiceImpl.java", "diffHunk": "@@ -307,7 +307,7 @@ public void updateMaturityDetailsOfDepositAccounts() {\n                     LOG.error(\"Update maturity details failed for account: {} with message {}\", depositAccount.accountNo(), error.getDeveloperMessage());\n                 }\n             } catch (final Exception ex) {\n-                // need to handle this scenario\n+                LOG.error(\"Update maturity details failed for account: {} with message: {}\", depositAccount.accountNo(), ex.getMessage());", "originalCommit": "ddef698b60bff27b7d2abbd2232b2ff262797815", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMDk0OA==", "url": "https://github.com/apache/fineract/pull/1049#discussion_r439720948", "bodyText": "Is this left over, or for the lazy loading? I fear future automated code clean up may try to remove this as NOOP... maybe put an inline comment to explain it forces lazy loading, if that's what it is? Or even fake store it in a variable used in a useless expression to prevent NOOP clean up? Or remove if this is just a left over and not actually required.", "author": "vorburger", "createdAt": "2020-06-13T08:24:51Z", "path": "fineract-provider/src/main/java/org/apache/fineract/portfolio/savings/domain/SavingsAccount.java", "diffHunk": "@@ -2928,6 +2928,7 @@ public void loadLazyCollections() {\n         transactions.size();\n         charges.size();\n         savingsOfficerHistory.size();\n+        if(group != null) { group.getOffice(); }", "originalCommit": "ddef698b60bff27b7d2abbd2232b2ff262797815", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2Mzk1NA==", "url": "https://github.com/apache/fineract/pull/1049#discussion_r439763954", "bodyText": "This is for lazy loading. And yes, I agree it makes sense to make this explicit with comment and variable assignment (even though hopefully people will work out what's going on from the function name as well). Will update the PR.", "author": "ptuomola", "createdAt": "2020-06-13T19:41:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyMDk0OA=="}], "type": "inlineReview"}, {"oid": "6b921e3866952291484a69450cc056fdaff1f8ba", "url": "https://github.com/apache/fineract/commit/6b921e3866952291484a69450cc056fdaff1f8ba", "message": "FINERACT-857: Fixing scheduler integration tests and migrating to executeAndAwaitJob", "committedDate": "2020-06-13T19:53:22Z", "type": "commit"}, {"oid": "6b921e3866952291484a69450cc056fdaff1f8ba", "url": "https://github.com/apache/fineract/commit/6b921e3866952291484a69450cc056fdaff1f8ba", "message": "FINERACT-857: Fixing scheduler integration tests and migrating to executeAndAwaitJob", "committedDate": "2020-06-13T19:53:22Z", "type": "forcePushed"}, {"oid": "fe5c9dcfc960805e5e0cb25749bc072a1ce6bd31", "url": "https://github.com/apache/fineract/commit/fe5c9dcfc960805e5e0cb25749bc072a1ce6bd31", "message": "Merge branch 'develop' into FINERACT-857", "committedDate": "2020-06-14T11:47:39Z", "type": "commit"}]}