{"pr_number": 1147, "pr_title": "Migrate: Container registry to V2", "pr_createdAt": "2020-03-26T06:56:25Z", "pr_url": "https://github.com/Azure/azure-libraries-for-java/pull/1147", "timeline": [{"oid": "366d705cf1299d6c05a78ed872b27d29d64217a5", "url": "https://github.com/Azure/azure-libraries-for-java/commit/366d705cf1299d6c05a78ed872b27d29d64217a5", "message": "Copy ACR from track 1", "committedDate": "2020-03-23T06:57:52Z", "type": "commit"}, {"oid": "819f8d0d04a0e1629ce93a666862bfdab47cdd2d", "url": "https://github.com/Azure/azure-libraries-for-java/commit/819f8d0d04a0e1629ce93a666862bfdab47cdd2d", "message": "feat: change generation param", "committedDate": "2020-03-23T06:58:42Z", "type": "commit"}, {"oid": "18a375518edf358626683a0da1e87a426f6ff8c6", "url": "https://github.com/Azure/azure-libraries-for-java/commit/18a375518edf358626683a0da1e87a426f6ff8c6", "message": "Generate container registry v2", "committedDate": "2020-03-23T08:40:11Z", "type": "commit"}, {"oid": "47fce54789a4ad7d2b36d66302ed65aa5eea2624", "url": "https://github.com/Azure/azure-libraries-for-java/commit/47fce54789a4ad7d2b36d66302ed65aa5eea2624", "message": "update pom", "committedDate": "2020-03-24T03:10:36Z", "type": "commit"}, {"oid": "f44bb56bfd150d54fd4ee98960df11857b41dd0d", "url": "https://github.com/Azure/azure-libraries-for-java/commit/f44bb56bfd150d54fd4ee98960df11857b41dd0d", "message": "remove LangDefinition and Beta", "committedDate": "2020-03-24T03:19:31Z", "type": "commit"}, {"oid": "2a148a5f5352f81cae757b152cae3e54a746f164", "url": "https://github.com/Azure/azure-libraries-for-java/commit/2a148a5f5352f81cae757b152cae3e54a746f164", "message": "fix: compile error", "committedDate": "2020-03-24T06:33:09Z", "type": "commit"}, {"oid": "2669e5f5d9c7838bab6833489a0af4a8b17e3422", "url": "https://github.com/Azure/azure-libraries-for-java/commit/2669e5f5d9c7838bab6833489a0af4a8b17e3422", "message": "rename DockerBuildStep -> DockerTaskStep", "committedDate": "2020-03-24T07:35:03Z", "type": "commit"}, {"oid": "4d2395af98e7d3e854bc8a80d1cb3124772a3f6c", "url": "https://github.com/Azure/azure-libraries-for-java/commit/4d2395af98e7d3e854bc8a80d1cb3124772a3f6c", "message": "feat: update pom with test", "committedDate": "2020-03-24T07:43:32Z", "type": "commit"}, {"oid": "66185129b99f08438d9ac31b46d102cf4937c038", "url": "https://github.com/Azure/azure-libraries-for-java/commit/66185129b99f08438d9ac31b46d102cf4937c038", "message": "fix: test compile error", "committedDate": "2020-03-24T07:52:47Z", "type": "commit"}, {"oid": "a23d1a858db25bfd0016027eb9d774c78a093384", "url": "https://github.com/Azure/azure-libraries-for-java/commit/a23d1a858db25bfd0016027eb9d774c78a093384", "message": "feat: add clean up for test", "committedDate": "2020-03-24T08:12:30Z", "type": "commit"}, {"oid": "f739b8e60567f66751a8b2858823bb0a29850e86", "url": "https://github.com/Azure/azure-libraries-for-java/commit/f739b8e60567f66751a8b2858823bb0a29850e86", "message": "regenerate container registry with docker task step directive", "committedDate": "2020-03-25T08:09:57Z", "type": "commit"}, {"oid": "5b33c5fd5fb48a0e1cee4ec81262dbc4087dbd89", "url": "https://github.com/Azure/azure-libraries-for-java/commit/5b33c5fd5fb48a0e1cee4ec81262dbc4087dbd89", "message": "regenerate acr", "committedDate": "2020-03-26T04:55:55Z", "type": "commit"}, {"oid": "6d6bf00d0c0667929618d143d90ca9ec392e697b", "url": "https://github.com/Azure/azure-libraries-for-java/commit/6d6bf00d0c0667929618d143d90ca9ec392e697b", "message": "fix: run request", "committedDate": "2020-03-26T04:56:03Z", "type": "commit"}, {"oid": "f4705af7940685992d54ddbcfbbe0054d7b85108", "url": "https://github.com/Azure/azure-libraries-for-java/commit/f4705af7940685992d54ddbcfbbe0054d7b85108", "message": "feat: update acr test for non personal information", "committedDate": "2020-03-26T06:41:59Z", "type": "commit"}, {"oid": "31459c066d1405ef30ecd1a8b074d3257bdced73", "url": "https://github.com/Azure/azure-libraries-for-java/commit/31459c066d1405ef30ecd1a8b074d3257bdced73", "message": "feat: update session record", "committedDate": "2020-03-26T06:42:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1MjY0OA==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398352648", "bodyText": "why this one commented out?", "author": "yungezz", "createdAt": "2020-03-26T07:01:15Z", "path": "azure-mgmt-containerregistry/src/main/java/com/azure/management/containerregistry/QueuedBuildOperations.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/**\n+ * Copyright (c) Microsoft Corporation. All rights reserved.\n+ * Licensed under the MIT License. See License.txt in the project root for\n+ * license information.\n+ */\n+package com.azure.management.containerregistry;\n+//\n+//import com.microsoft.azure.PagedList;\n+//import com.microsoft.azure.management.apigeneration.Beta;\n+//import com.microsoft.azure.management.apigeneration.Fluent;\n+//import rx.Completable;\n+//import rx.Observable;\n+//\n+/**\n+ * Grouping of container registry queued build actions.\n+ */\n+public interface QueuedBuildOperations {", "originalCommit": "31459c066d1405ef30ecd1a8b074d3257bdced73", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NTU0NA==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398355544", "bodyText": "I'm not sure about it. As I check in commit, it is moved from track1 and the track1 is already commented out, more than 1 year before. https://github.com/Azure/azure-libraries-for-java/blob/dea6587/azure-mgmt-containerregistry/src/main/java/com/microsoft/azure/management/containerregistry/QueuedBuildOperations.java", "author": "ChenTanyi", "createdAt": "2020-03-26T07:09:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1MjY0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NTg2Mw==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398355863", "bodyText": "I think it is due to the queue task was removed from swagger.", "author": "ChenTanyi", "createdAt": "2020-03-26T07:10:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1MjY0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NjQwNw==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398356407", "bodyText": "should we remove this interface then?", "author": "yungezz", "createdAt": "2020-03-26T07:11:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1MjY0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1OTQ4OQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398359489", "bodyText": "It could be removed. I'll remove all commented out code in track1.", "author": "ChenTanyi", "createdAt": "2020-03-26T07:19:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1MjY0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM2Mjg4OQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398362889", "bodyText": "done", "author": "ChenTanyi", "createdAt": "2020-03-26T07:28:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1MjY0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NTM2MQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398355361", "bodyText": "Is it same functionality before/after?", "author": "weidongxu-microsoft", "createdAt": "2020-03-26T07:09:01Z", "path": "azure-mgmt-containerregistry/src/main/java/com/azure/management/containerregistry/implementation/RegistryEncodedTaskStepImpl.java", "diffHunk": "@@ -76,7 +75,7 @@ public RegistryEncodedTaskStepImpl withBase64EncodedTaskContent(String encodedTa\n     @Override\n     public RegistryEncodedTaskStepImpl withBase64EncodedValueContent(String encodedValueContent) {\n         if (isInCreateMode()) {\n-            this.inner.withBase64EncodedValuesContent(encodedValueContent);\n+            this.inner.withEncodedValuesContent(encodedValueContent);", "originalCommit": "2a148a5f5352f81cae757b152cae3e54a746f164", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NzAxMw==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398357013", "bodyText": "Yes, the encoded values is always base64 encode. This difference is due to generation.", "author": "ChenTanyi", "createdAt": "2020-03-26T07:13:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NTM2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NTUxMg==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398355512", "bodyText": "Is this sync or async?", "author": "weidongxu-microsoft", "createdAt": "2020-03-26T07:09:27Z", "path": "azure-mgmt-containerregistry/src/main/java/com/azure/management/containerregistry/implementation/RegistryImpl.java", "diffHunk": "@@ -94,9 +92,9 @@ public RegistryImpl update() {\n     }\n \n     @Override\n-    public Completable afterPostRunAsync(boolean isGroupFaulted) {\n+    public Mono<Void> afterPostRunAsync(boolean isGroupFaulted) {\n         this.webhooks.clear();", "originalCommit": "2a148a5f5352f81cae757b152cae3e54a746f164", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1ODkyMQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398358921", "bodyText": "After my check, it is a collections clear. Only clear the local map.", "author": "ChenTanyi", "createdAt": "2020-03-26T07:18:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NTUxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NzcwOA==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398357708", "bodyText": "Is this already commented in track 1?", "author": "xseeseesee", "createdAt": "2020-03-26T07:15:12Z", "path": "azure-mgmt-containerregistry/src/main/java/com/azure/management/containerregistry/implementation/BuildArgumentImpl.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/**\n+ * Copyright (c) Microsoft Corporation. All rights reserved.\n+ * Licensed under the MIT License. See License.txt in the project root for\n+ * license information.\n+ */\n+package com.azure.management.containerregistry.implementation;\n+//\n+//import com.microsoft.azure.management.apigeneration.LangDefinition;\n+//import com.microsoft.azure.management.containerregistry.Build;\n+//\n+//import java.util.ArrayList;\n+//\n+/**\n+ * Implementation for container group's volume definition stages interface.\n+ */\n+public class BuildArgumentImpl {\n+\n+}\n+//@LangDefinition", "originalCommit": "31459c066d1405ef30ecd1a8b074d3257bdced73", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1ODA3OQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398358079", "bodyText": "You can see the commit, all track1 is from the first commit.", "author": "ChenTanyi", "createdAt": "2020-03-26T07:16:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NzcwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1ODQyNg==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398358426", "bodyText": "Yes, after I check for the commit. The BuildArgumentImpl is commented from track 1.", "author": "ChenTanyi", "createdAt": "2020-03-26T07:17:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NzcwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM2MDk5OQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398360999", "bodyText": "It looks not required to have final here. You can just use return this.containerRegistryManager.inner().webhooks().....", "author": "xseeseesee", "createdAt": "2020-03-26T07:23:51Z", "path": "azure-mgmt-containerregistry/src/main/java/com/azure/management/containerregistry/implementation/WebhooksClientImpl.java", "diffHunk": "@@ -0,0 +1,77 @@\n+/**\n+ * Copyright (c) Microsoft Corporation. All rights reserved.\n+ * Licensed under the MIT License. See License.txt in the project root for\n+ * license information.\n+ */\n+package com.azure.management.containerregistry.implementation;\n+\n+import com.azure.core.http.rest.PagedFlux;\n+import com.azure.core.http.rest.PagedIterable;\n+import com.azure.management.containerregistry.Registries;\n+import com.azure.management.containerregistry.Webhook;\n+import com.azure.management.containerregistry.models.WebhooksInner;\n+import com.azure.management.resources.fluentcore.utils.PagedConverter;\n+import reactor.core.publisher.Mono;\n+\n+/**\n+ * Represents a webhook collection associated with a container registry.\n+ */\n+public class WebhooksClientImpl implements Registries.WebhooksClient {\n+    private final ContainerRegistryManager containerRegistryManager;\n+    private final RegistryImpl containerRegistry;\n+\n+    WebhooksClientImpl(ContainerRegistryManager containerRegistryManager, RegistryImpl containerRegistry) {\n+        this.containerRegistryManager = containerRegistryManager;\n+        this.containerRegistry = containerRegistry;\n+    }\n+\n+    @Override\n+    public Webhook get(final String resourceGroupName, final String registryName, final String webhookName) {\n+        return this.getAsync(resourceGroupName, registryName, webhookName).block();\n+    }\n+\n+    @Override\n+    public Mono<Webhook> getAsync(final String resourceGroupName, final String registryName, final String webhookName) {\n+        final WebhooksClientImpl self = this;\n+        final WebhooksInner webhooksInner = this.containerRegistryManager.inner().webhooks();", "originalCommit": "31459c066d1405ef30ecd1a8b074d3257bdced73", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM2MzY1NQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398363655", "bodyText": "This is not a compile issue, so I haven't changed such minor issue.", "author": "ChenTanyi", "createdAt": "2020-03-26T07:30:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM2MDk5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM2NDQ3NQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398364475", "bodyText": "Meanwhile, I think both are OK. No one is better than the other.", "author": "ChenTanyi", "createdAt": "2020-03-26T07:32:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM2MDk5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM4NzIzOQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398387239", "bodyText": "Yes, it's just minor one. My suggestion is to keep consistent coding style as other methods. You don't have to make changes here.", "author": "xseeseesee", "createdAt": "2020-03-26T08:20:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM2MDk5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM5MTAxOQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1147#discussion_r398391019", "bodyText": "Oh, yes, it is better for same style. Maybe will change it in refactor", "author": "ChenTanyi", "createdAt": "2020-03-26T08:27:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM2MDk5OQ=="}], "type": "inlineReview"}, {"oid": "045118a083a76db79f931831af06e69c30bf95c3", "url": "https://github.com/Azure/azure-libraries-for-java/commit/045118a083a76db79f931831af06e69c30bf95c3", "message": "feat: remove empty class in v1", "committedDate": "2020-03-26T07:28:10Z", "type": "commit"}]}