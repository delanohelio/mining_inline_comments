{"pr_number": 1088, "pr_title": "Issue 1053 - execute all fhir-server-test tests by default", "pr_createdAt": "2020-05-13T20:36:49Z", "pr_url": "https://github.com/IBM/FHIR/pull/1088", "timeline": [{"oid": "2789ca86f34fb1fc2227ff5107f5e6f7c7ccc425", "url": "https://github.com/IBM/FHIR/commit/2789ca86f34fb1fc2227ff5107f5e6f7c7ccc425", "message": "Update fhir-server-test #1053\n\n- Remove unused LOINC.java\n- Refactor the testng.xml (package,classes) usage\n- Fix $apply operation issue where detail was not set\n- Move tests with special considerations to their own packages\n\t- bulkdata, db2, kafka\n\t- introduced controls in test.properties to disable or enable tests\n- Enabled all Tests\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-05-13T20:06:16Z", "type": "commit"}, {"oid": "c8d6ab693b68499ead5704613c94b7e94be4ca24", "url": "https://github.com/IBM/FHIR/commit/c8d6ab693b68499ead5704613c94b7e94be4ca24", "message": "Update fhir-server-test #1053\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-05-13T20:13:26Z", "type": "commit"}, {"oid": "9cd60d3842a085c5dd5f13e3ac76e8b1e83bf1f8", "url": "https://github.com/IBM/FHIR/commit/9cd60d3842a085c5dd5f13e3ac76e8b1e83bf1f8", "message": "Update fhir-server-test #1053\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-05-13T20:52:10Z", "type": "commit"}, {"oid": "19b30c4d98f25b6e9a4910a04763fc5424413834", "url": "https://github.com/IBM/FHIR/commit/19b30c4d98f25b6e9a4910a04763fc5424413834", "message": "Update fhir-server-test #1053\n\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-05-13T20:58:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgxOTY1MA==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r424819650", "bodyText": "what are we missing by skipping this step by default?", "author": "lmsurpre", "createdAt": "2020-05-14T01:24:32Z", "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/BundleTest.java", "diffHunk": "@@ -156,7 +156,9 @@ public Bundle getEntityWithExtraWork(Response response, String method) throws Ex\n     public void commonWork(Bundle responseBundle, String method) throws Exception{\n         assertNotNull(responseBundle);\n         printBundle(method, \"response\", responseBundle);\n-        checkForIssuesWithValidation(responseBundle, true, false);\n+        if(DEBUG) {\n+            checkForIssuesWithValidation(responseBundle, true, false);\n+        }", "originalCommit": "19b30c4d98f25b6e9a4910a04763fc5424413834", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTA4MjM1NQ==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r425082355", "bodyText": "in this case, it's just outputing the bundle report and was driving a lot of logging.\nMainly missing narrative statements.", "author": "prb112", "createdAt": "2020-05-14T12:01:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgxOTY1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTA4ODc0NQ==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r425088745", "bodyText": "Clarified (added a comment)", "author": "prb112", "createdAt": "2020-05-14T12:13:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgxOTY1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTA5MTUxNg==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r425091516", "bodyText": "refactored slightly... pushed the debugging to checkForIssuesWithValidation (I pass DEBUG down to it, so we can see/not see non-fatal/warning errors. )", "author": "prb112", "createdAt": "2020-05-14T12:18:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgxOTY1MA=="}], "type": "inlineReview"}, {"oid": "30425525f086342fe9431d361993c51f28d6bc44", "url": "https://github.com/IBM/FHIR/commit/30425525f086342fe9431d361993c51f28d6bc44", "message": "Update fhir-server-test #1053\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-05-14T12:21:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUxOTQzNw==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r425519437", "bodyText": "Just a minor style comment, but I'd prefer to see this line indented one more level so that its clear that its a continuation of the method declaration and make it stand out from the first line in the method impl.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    MultivaluedMap<String, String> queryParameters, Parameters parameters) throws FHIROperationException {\n          \n          \n            \n                        MultivaluedMap<String, String> queryParameters, Parameters parameters)\n          \n          \n            \n                        throws FHIROperationException {", "author": "lmsurpre", "createdAt": "2020-05-15T01:39:22Z", "path": "fhir-operation-apply/src/main/java/com/ibm/fhir/operation/apply/ApplyOperation.java", "diffHunk": "@@ -138,8 +136,7 @@ protected Parameters doInvoke(FHIROperationContext operationContext,\n \n     // Process the Parameters bodies for the contents\n     private CodeableConcept checkAndProcessSettingContext(FHIROperationContext operationContext,\n-        MultivaluedMap<String, String> queryParameters, Parameters parameters)\n-        throws FHIROperationException {\n+        MultivaluedMap<String, String> queryParameters, Parameters parameters) throws FHIROperationException {", "originalCommit": "30425525f086342fe9431d361993c51f28d6bc44", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUyMDU4NQ==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r425520585", "bodyText": "style-only comment\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        CodeableConcept cc =\n          \n          \n            \n                                CodeableConcept.builder().text(string(\"userTaskContext\")).coding(Coding.builder().code(Code.of(userTaskContext)).build()).build();\n          \n          \n            \n                        CodeableConcept cc = CodeableConcept.builder()\n          \n          \n            \n                                .text(string(\"userTaskContext\"))\n          \n          \n            \n                                .coding(Coding.builder().code(Code.of(userTaskContext)).build())\n          \n          \n            \n                                .build();", "author": "lmsurpre", "createdAt": "2020-05-15T01:43:47Z", "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/PlanDefinitionApplyOperationTest.java", "diffHunk": "@@ -295,7 +299,8 @@ public Parameters generateParameters(String planDefinition, List<String> subject\n             parameters.add(Parameter.builder().name(string(\"userLanguage\")).value(cc).build());\n         }\n         if (userTaskContext != null) {\n-            CodeableConcept cc = CodeableConcept.builder().text(string(\"userTaskContext\")).coding(Coding.builder().code(Code.of(userTaskContext)).build()).build();\n+            CodeableConcept cc =\n+                    CodeableConcept.builder().text(string(\"userTaskContext\")).coding(Coding.builder().code(Code.of(userTaskContext)).build()).build();", "originalCommit": "30425525f086342fe9431d361993c51f28d6bc44", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUyMDgwNA==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r425520804", "bodyText": "style-only comment\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        CodeableConcept cc =\n          \n          \n            \n                                CodeableConcept.builder().text(string(\"settingContext\")).coding(Coding.builder().code(Code.of(settingContext)).build()).build();\n          \n          \n            \n                        CodeableConcept cc = CodeableConcept.builder()\n          \n          \n            \n                                .text(string(\"settingContext\"))\n          \n          \n            \n                                .coding(Coding.builder().code(Code.of(settingContext)).build())\n          \n          \n            \n                                .build();", "author": "lmsurpre", "createdAt": "2020-05-15T01:44:46Z", "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/PlanDefinitionApplyOperationTest.java", "diffHunk": "@@ -305,7 +310,8 @@ public Parameters generateParameters(String planDefinition, List<String> subject\n         }\n \n         if (settingContext != null) {\n-            CodeableConcept cc = CodeableConcept.builder().text(string(\"settingContext\")).coding(Coding.builder().code(Code.of(settingContext)).build()).build();\n+            CodeableConcept cc =\n+                    CodeableConcept.builder().text(string(\"settingContext\")).coding(Coding.builder().code(Code.of(settingContext)).build()).build();", "originalCommit": "30425525f086342fe9431d361993c51f28d6bc44", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUyMTAyNg==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r425521026", "bodyText": "same as earlier comment\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public List<ApplyOperationResult> runValidTest(String planDefinition, List<String> subject, String encounter, String practitioner, String organization,\n          \n          \n            \n                    String userType, String userLanguage, String userTaskContext, String setting, String settingContext) {\n          \n          \n            \n                public List<ApplyOperationResult> runValidTest(String planDefinition, List<String> subject, String encounter, String practitioner, String organization,\n          \n          \n            \n                        String userType, String userLanguage, String userTaskContext, String setting, String settingContext) {", "author": "lmsurpre", "createdAt": "2020-05-15T01:45:31Z", "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/PlanDefinitionApplyOperationTest.java", "diffHunk": "@@ -330,10 +336,8 @@ public Parameters generateParameters(String planDefinition, List<String> subject\n      * @param settingContext\n      * @return\n      */\n-    public List<ApplyOperationResult> runValidTest(String planDefinition, List<String> subject,\n-        String encounter, String practitioner,\n-        String organization, String userType, String userLanguage, String userTaskContext,\n-        String setting, String settingContext) {\n+    public List<ApplyOperationResult> runValidTest(String planDefinition, List<String> subject, String encounter, String practitioner, String organization,\n+        String userType, String userLanguage, String userTaskContext, String setting, String settingContext) {", "originalCommit": "30425525f086342fe9431d361993c51f28d6bc44", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUyMTEzMw==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r425521133", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public List<ApplyOperationResult> runInvalidTest(String planDefinition, List<String> subject, String encounter, String practitioner, String organization,\n          \n          \n            \n                    String userType, String userLanguage, String userTaskContext, String setting, String settingContext) {\n          \n          \n            \n                public List<ApplyOperationResult> runInvalidTest(String planDefinition, List<String> subject, String encounter, String practitioner, String organization,\n          \n          \n            \n                        String userType, String userLanguage, String userTaskContext, String setting, String settingContext) {", "author": "lmsurpre", "createdAt": "2020-05-15T01:45:54Z", "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/PlanDefinitionApplyOperationTest.java", "diffHunk": "@@ -368,9 +372,8 @@ public Parameters generateParameters(String planDefinition, List<String> subject\n      * @param settingContext\n      * @return\n      */\n-    public List<ApplyOperationResult> runInvalidTest(String planDefinition, List<String> subject,\n-        String encounter, String practitioner, String organization, String userType,\n-        String userLanguage, String userTaskContext, String setting, String settingContext) {\n+    public List<ApplyOperationResult> runInvalidTest(String planDefinition, List<String> subject, String encounter, String practitioner, String organization,\n+        String userType, String userLanguage, String userTaskContext, String setting, String settingContext) {", "originalCommit": "30425525f086342fe9431d361993c51f28d6bc44", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUyMTIyMg==", "url": "https://github.com/IBM/FHIR/pull/1088#discussion_r425521222", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public ApplyOperationResult runIndividualPlanDefinition(String mimeType, boolean root, boolean invalid, String planDefinition, List<String> subject,\n          \n          \n            \n                    String encounter, String practitioner, String organization, String userType, String userLanguage, String userTaskContext, String setting,\n          \n          \n            \n                    String settingContext) {\n          \n          \n            \n                public ApplyOperationResult runIndividualPlanDefinition(String mimeType, boolean root, boolean invalid, String planDefinition, List<String> subject,\n          \n          \n            \n                        String encounter, String practitioner, String organization, String userType, String userLanguage, String userTaskContext, String setting,\n          \n          \n            \n                        String settingContext) {", "author": "lmsurpre", "createdAt": "2020-05-15T01:46:17Z", "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/PlanDefinitionApplyOperationTest.java", "diffHunk": "@@ -404,10 +407,9 @@ public Parameters generateParameters(String planDefinition, List<String> subject\n      * @param settingContext\n      * @return\n      */\n-    public ApplyOperationResult runIndividualPlanDefinition(String mimeType, boolean root,\n-        boolean invalid, String planDefinition, List<String> subject, String encounter,\n-        String practitioner, String organization, String userType, String userLanguage,\n-        String userTaskContext, String setting, String settingContext) {\n+    public ApplyOperationResult runIndividualPlanDefinition(String mimeType, boolean root, boolean invalid, String planDefinition, List<String> subject,\n+        String encounter, String practitioner, String organization, String userType, String userLanguage, String userTaskContext, String setting,\n+        String settingContext) {", "originalCommit": "30425525f086342fe9431d361993c51f28d6bc44", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3bcb505d31615d82e66080581bb4c736a694a7f2", "url": "https://github.com/IBM/FHIR/commit/3bcb505d31615d82e66080581bb4c736a694a7f2", "message": "Apply suggestions from code review\r\n\r\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>\n\nCo-authored-by: Lee Surprenant <lmsurpre@us.ibm.com>", "committedDate": "2020-05-15T10:36:06Z", "type": "commit"}]}