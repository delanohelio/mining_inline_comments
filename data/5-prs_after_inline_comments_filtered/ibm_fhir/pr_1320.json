{"pr_number": 1320, "pr_title": "Issue #1319 - conditional update where new resource has no id", "pr_createdAt": "2020-07-07T21:16:46Z", "pr_url": "https://github.com/IBM/FHIR/pull/1320", "timeline": [{"oid": "e637be2a925010572ed355af952283e0fc4f00f5", "url": "https://github.com/IBM/FHIR/commit/e637be2a925010572ed355af952283e0fc4f00f5", "message": "Issue #1319 - conditional update where new resource has no id\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-07-07T21:16:23Z", "type": "commit"}, {"oid": "c7ddcd692bf150b5fac51bdadbc88e0916319d7d", "url": "https://github.com/IBM/FHIR/commit/c7ddcd692bf150b5fac51bdadbc88e0916319d7d", "message": "Issue #1319 - add \"currentSchema\" property to config templates\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-07-07T21:32:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1NzkyMw==", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451157923", "bodyText": "do we consistently ignore case when working with id values?", "author": "punktilious", "createdAt": "2020-07-07T21:36:32Z", "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -338,11 +338,11 @@ private FHIRRestOperationResponse doPatchOrUpdate(String type, String id, FHIRPa\n \n                     // If the id of the input resource is different from the id of the search result,\n                     // then throw exception.\n-                    if (newResource.getId() != null && newResource.getId() != null\n-                            && !newResource.getId().equalsIgnoreCase(id)) {\n+                    if (newResource.getId() != null && id != null && !newResource.getId().equalsIgnoreCase(id)) {", "originalCommit": "c7ddcd692bf150b5fac51bdadbc88e0916319d7d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1ODM2OA==", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451158368", "bodyText": "In this particular case, I left it the way it was because I assume it was put there for good reason. We can certainly verify that equalsIgnoreCase is the right behavior there.", "author": "JohnTimm", "createdAt": "2020-07-07T21:37:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1NzkyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1OTg3OQ==", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451159879", "bodyText": "From here:\nhttp://hl7.org/fhir/http.html#general\nNote: All URLs (and ids that form part of the URL) defined by this specification are case sensitive.", "author": "JohnTimm", "createdAt": "2020-07-07T21:41:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1NzkyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1OTk2Nw==", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451159967", "bodyText": "I will update the PR.", "author": "JohnTimm", "createdAt": "2020-07-07T21:41:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1NzkyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1ODUzMA==", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451158530", "bodyText": "Did you intend to leave this commented out? Should probably remove it.", "author": "punktilious", "createdAt": "2020-07-07T21:38:02Z", "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -1324,11 +1324,13 @@ private void methodValidation(HTTPVerb method, Resource resource) throws FHIRPer\n                         \"Bundle.Entry.resource is required for BundleEntry with PUT method.\";\n                 throw buildRestException(msg, IssueType.INVALID);\n             }\n+            /*", "originalCommit": "c7ddcd692bf150b5fac51bdadbc88e0916319d7d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE2MTM3Nw==", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451161377", "bodyText": "Removed commented out code.", "author": "JohnTimm", "createdAt": "2020-07-07T21:44:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1ODUzMA=="}], "type": "inlineReview"}, {"oid": "59e5ce5e46b8f1c7fdca28c1da5a9fd4aefbb1dc", "url": "https://github.com/IBM/FHIR/commit/59e5ce5e46b8f1c7fdca28c1da5a9fd4aefbb1dc", "message": "Issue #1319 - made id comparison case sensitive\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-07-07T21:42:11Z", "type": "commit"}, {"oid": "55a61efe3a20aef7e17d2817e90e6686f8188ac3", "url": "https://github.com/IBM/FHIR/commit/55a61efe3a20aef7e17d2817e90e6686f8188ac3", "message": "Issue #1319 - removed commented out code\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-07-07T21:43:55Z", "type": "commit"}]}