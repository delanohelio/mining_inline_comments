{"pr_number": 1513, "pr_title": "Issue #1506 - enable parsing dateTime fractional seconds up to 9 digits", "pr_createdAt": "2020-09-18T12:27:30Z", "pr_url": "https://github.com/IBM/FHIR/pull/1513", "timeline": [{"oid": "5818294aa83de2768efd4b76ffc996d06b0e9f90", "url": "https://github.com/IBM/FHIR/commit/5818294aa83de2768efd4b76ffc996d06b0e9f90", "message": "Issue #1506 - enable parsing dateTime fractional seconds up to 9 digits\n\nSigned-off-by: Mike Schroeder <mschroed@us.ibm.com>", "committedDate": "2020-09-18T12:26:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyMTQ3MA==", "url": "https://github.com/IBM/FHIR/pull/1513#discussion_r490921470", "bodyText": "Is this automatically appending microseconds?", "author": "prb112", "createdAt": "2020-09-18T12:41:49Z", "path": "fhir-path/src/main/java/com/ibm/fhir/path/FHIRPathTimeValue.java", "diffHunk": "@@ -74,7 +76,7 @@ public LocalTime time() {\n      *     a new FHIRPathTimeValue instance\n      */\n     public static FHIRPathTimeValue timeValue(String text) {\n-        LocalTime time = LocalTime.parse(text, PARSER_FORMATTER);\n+        LocalTime time = ModelSupport.truncateTime(LocalTime.parse(text, PARSER_FORMATTER), ChronoUnit.MICROS);", "originalCommit": "5818294aa83de2768efd4b76ffc996d06b0e9f90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkzMzcxOA==", "url": "https://github.com/IBM/FHIR/pull/1513#discussion_r490933718", "bodyText": "Well, if a LocalTime instance is created without specifying any fractional seconds, the fields within that instance representing the fractional seconds will just be set to 0 (MILLI_OF_SECOND, MICRO_OF_SECOND, NANO_OF_SECOND), so in that sense, every TemporalAccessor always has a value for microseconds. The ModelSupport.truncateTime() method is calling the LocalTime.truncatedTo() method, which simply sets the fields within the LocalTime instance that are smaller than the specified unit to zero. So in this case, it will set the NANO_OF_SECOND field to 0, effectively truncating any precision greater than microseconds.", "author": "michaelwschroeder", "createdAt": "2020-09-18T13:03:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyMTQ3MA=="}], "type": "inlineReview"}]}