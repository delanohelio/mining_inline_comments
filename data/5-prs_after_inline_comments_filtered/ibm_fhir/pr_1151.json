{"pr_number": 1151, "pr_title": "Issue #1148 - introduced class to represent match result for translate", "pr_createdAt": "2020-05-26T15:37:52Z", "pr_url": "https://github.com/IBM/FHIR/pull/1151", "timeline": [{"oid": "65769e46fecb69e1df123e54573a0204d204a718", "url": "https://github.com/IBM/FHIR/commit/65769e46fecb69e1df123e54573a0204d204a718", "message": "Issue #1148 - introduced class to represent match result for translate\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-05-26T15:37:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDUxMzE4NA==", "url": "https://github.com/IBM/FHIR/pull/1151#discussion_r430513184", "bodyText": "just noticing this now... any reason to combine 34,35", "author": "prb112", "createdAt": "2020-05-26T15:41:10Z", "path": "fhir-term/src/main/java/com/ibm/fhir/term/util/ConceptMapSupport.java", "diffHunk": "@@ -11,30 +11,68 @@\n import java.util.stream.Collectors;\n \n import com.ibm.fhir.model.resource.ConceptMap;\n-import com.ibm.fhir.model.resource.ConceptMap.Group.Element.Target;\n+import com.ibm.fhir.model.resource.ConceptMap.Group;\n+import com.ibm.fhir.model.resource.ConceptMap.Group.Element;\n import com.ibm.fhir.model.type.Coding;\n+import com.ibm.fhir.model.type.String;\n+import com.ibm.fhir.model.type.Uri;\n import com.ibm.fhir.registry.FHIRRegistry;\n+import com.ibm.fhir.term.spi.Match;\n \n public final class ConceptMapSupport {\n     private ConceptMapSupport() { }\n \n-    public static List<Target> translate(ConceptMap conceptMap, Coding coding) {\n+    public static List<Match> translate(ConceptMap conceptMap, Coding coding) {\n         return conceptMap.getGroup().stream()\n                 .filter(group -> group.getSource() != null)\n                 .filter(group -> group.getSource().equals(coding.getSystem()))\n                 .filter(group -> group.getSourceVersion() == null ||\n                     coding.getVersion() == null ||\n                     group.getSourceVersion().equals(coding.getVersion()))\n-                .map(group -> group.getElement())\n-                .flatMap(List::stream)\n-                .filter(element -> element.getCode() != null)\n-                .filter(element -> element.getCode().equals(coding.getCode()))\n-                .map(element -> element.getTarget())\n+                .map(group -> group.toBuilder()\n+                    .element(group.getElement().stream()\n+                        .filter(element -> element.getCode() != null)\n+                        .filter(element -> element.getCode().equals(coding.getCode()))", "originalCommit": "65769e46fecb69e1df123e54573a0204d204a718", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDUxMzkzMw==", "url": "https://github.com/IBM/FHIR/pull/1151#discussion_r430513933", "bodyText": "I keep them separate for readability", "author": "JohnTimm", "createdAt": "2020-05-26T15:42:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDUxMzE4NA=="}], "type": "inlineReview"}]}