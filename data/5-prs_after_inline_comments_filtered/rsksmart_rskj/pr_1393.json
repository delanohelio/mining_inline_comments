{"pr_number": 1393, "pr_title": "Fix on how BTC addresses are instantiated on Bridge", "pr_createdAt": "2020-12-16T18:00:03Z", "pr_url": "https://github.com/rsksmart/rskj/pull/1393", "timeline": [{"oid": "1b4aa9a06b6fb5abcb206084ad8fdb26763349df", "url": "https://github.com/rsksmart/rskj/commit/1b4aa9a06b6fb5abcb206084ad8fdb26763349df", "message": "Fix on how BTC addresses are instantiated on Bridge. Now uses version and has160 to build them", "committedDate": "2020-12-16T18:04:41Z", "type": "forcePushed"}, {"oid": "57336fcac0b9ac37c393067cd2ba3aa57487df16", "url": "https://github.com/rsksmart/rskj/commit/57336fcac0b9ac37c393067cd2ba3aa57487df16", "message": "Fix on how BTC addresses are instantiated on Bridge. Now uses version and has160 to build them", "committedDate": "2020-12-16T18:06:29Z", "type": "forcePushed"}, {"oid": "28af98ebf991477e1a9b4cd7548a6d513421bea0", "url": "https://github.com/rsksmart/rskj/commit/28af98ebf991477e1a9b4cd7548a6d513421bea0", "message": "Fix on how BTC addresses are instantiated on Bridge. Now uses version and has160 to build them", "committedDate": "2020-12-16T18:08:31Z", "type": "forcePushed"}, {"oid": "08a4d1afd26fd0c52e161da637ea83b0c8bb7c16", "url": "https://github.com/rsksmart/rskj/commit/08a4d1afd26fd0c52e161da637ea83b0c8bb7c16", "message": "Fix on how BTC addresses are instantiated on Bridge. Now uses version and has160 to build them", "committedDate": "2020-12-16T18:09:12Z", "type": "forcePushed"}, {"oid": "7358c3800230528f96fdd94d1d7a8a928fdd5ee8", "url": "https://github.com/rsksmart/rskj/commit/7358c3800230528f96fdd94d1d7a8a928fdd5ee8", "message": "Fix on how BTC addresses are instantiated on Bridge. Now uses version and has160 to build them through methods created on BridgeUtils.", "committedDate": "2020-12-23T14:25:12Z", "type": "commit"}, {"oid": "7358c3800230528f96fdd94d1d7a8a928fdd5ee8", "url": "https://github.com/rsksmart/rskj/commit/7358c3800230528f96fdd94d1d7a8a928fdd5ee8", "message": "Fix on how BTC addresses are instantiated on Bridge. Now uses version and has160 to build them through methods created on BridgeUtils.", "committedDate": "2020-12-23T14:25:12Z", "type": "forcePushed"}, {"oid": "8db84061e317c053d006af2c1ab52e78aa8ecfca", "url": "https://github.com/rsksmart/rskj/commit/8db84061e317c053d006af2c1ab52e78aa8ecfca", "message": "Create method getBytesFromBtcAddress for BTC address on getFastBridgeDerivationHash", "committedDate": "2020-12-23T14:28:56Z", "type": "commit"}, {"oid": "8db84061e317c053d006af2c1ab52e78aa8ecfca", "url": "https://github.com/rsksmart/rskj/commit/8db84061e317c053d006af2c1ab52e78aa8ecfca", "message": "Create method getBytesFromBtcAddress for BTC address on getFastBridgeDerivationHash", "committedDate": "2020-12-23T14:28:56Z", "type": "forcePushed"}, {"oid": "dc4e5a6fa7e2639cea4be202db5fcc8796be5faa", "url": "https://github.com/rsksmart/rskj/commit/dc4e5a6fa7e2639cea4be202db5fcc8796be5faa", "message": "Fix BTC address version parsing", "committedDate": "2020-12-29T13:59:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTczNDg1MQ==", "url": "https://github.com/rsksmart/rskj/pull/1393#discussion_r549734851", "bodyText": "Review code format plase.", "author": "pamgonzalez", "createdAt": "2020-12-29T14:57:18Z", "path": "rskj-core/src/main/java/co/rsk/peg/BridgeSupport.java", "diffHunk": "@@ -2112,23 +2110,23 @@ public long registerFastBridgeBtcTransaction(\n         );\n \n         if (provider.isFastBridgeFederationDerivationHashUsed(btcTxHash, fastBridgeDerivationHash)) {\n+            logger.debug(\"[registerFastBridgeBtcTransaction] Transaction and derivation hash already used\");\n             return FAST_BRIDGE_UNPROCESSABLE_TX_ALREADY_PROCESSED_ERROR_CODE;\n         }\n \n         if (!validationsForRegisterBtcTransaction(btcTxHash, height, pmtSerialized, btcTxSerialized)) {\n-            String errorMessage = String.format(\n-                \"[registerFastBridgeBtcTransaction] [rskTx:%s] error during validationsForRegisterBtcTransaction\",\n-                ByteUtil.toHexString(btcTxHash.getBytes())\n-            );\n-            logger.debug(errorMessage);\n+            logger.debug(\"[registerFastBridgeBtcTransaction] (btcTx:{}) error during validationsForRegisterBtcTransaction\",", "originalCommit": "dc4e5a6fa7e2639cea4be202db5fcc8796be5faa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f288ea72b9909abcb54c17b3ef2878516318500b", "url": "https://github.com/rsksmart/rskj/commit/f288ea72b9909abcb54c17b3ef2878516318500b", "message": "Fix BTC address version parsing", "committedDate": "2020-12-29T15:21:47Z", "type": "commit"}, {"oid": "f288ea72b9909abcb54c17b3ef2878516318500b", "url": "https://github.com/rsksmart/rskj/commit/f288ea72b9909abcb54c17b3ef2878516318500b", "message": "Fix BTC address version parsing", "committedDate": "2020-12-29T15:21:47Z", "type": "forcePushed"}]}