{"pr_number": 1277, "pr_title": "Check if an account exists before add it.", "pr_createdAt": "2020-07-20T18:58:54Z", "pr_url": "https://github.com/rsksmart/rskj/pull/1277", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY0NTk0NQ==", "url": "https://github.com/rsksmart/rskj/pull/1277#discussion_r457645945", "bodyText": "this seems unnecessary, why don't just put the value on the same address? wouldn't it always be the same deriving from the same priv?", "author": "fedejinich", "createdAt": "2020-07-20T19:37:20Z", "path": "rskj-core/src/main/java/co/rsk/core/Wallet.java", "diffHunk": "@@ -193,7 +195,9 @@ public RskAddress addAccountWithPrivateKey(byte[] privateKeyBytes, String passph\n \n     private void saveAccount(Account account) {\n         synchronized (accessLock) {\n-            accounts.put(account.getAddress(), account.getEcKey().getPrivKeyBytes());\n+            if (!accounts.containsKey(account.getAddress())) {", "originalCommit": "285cbeb8ae40df2673cdea25cbc10e7ea86b2e31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY1MjU3Mw==", "url": "https://github.com/rsksmart/rskj/pull/1277#discussion_r457652573", "bodyText": "@ajlopez I just tried removing this if and seems fine", "author": "fedejinich", "createdAt": "2020-07-20T19:49:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY0NTk0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2MDY4OA==", "url": "https://github.com/rsksmart/rskj/pull/1277#discussion_r457660688", "bodyText": "It is possible to avoid this validation and just have the other. I don not know so far the code so I prefer to wait until @ajlopez comments about this.", "author": "jonathansmirnoff", "createdAt": "2020-07-20T20:05:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY0NTk0NQ=="}], "type": "inlineReview"}, {"oid": "bf0da20d5f0b89df6b22452677d55a2171b13df3", "url": "https://github.com/rsksmart/rskj/commit/bf0da20d5f0b89df6b22452677d55a2171b13df3", "message": "Added logic to check if an account exists before add it to the Wallet", "committedDate": "2020-07-21T14:54:58Z", "type": "forcePushed"}, {"oid": "ab2a9ea09a435544488901045fedb590d255765f", "url": "https://github.com/rsksmart/rskj/commit/ab2a9ea09a435544488901045fedb590d255765f", "message": "Added logic to check if an account exists before add it to the Wallet", "committedDate": "2020-07-21T15:18:56Z", "type": "forcePushed"}, {"oid": "e7b4d121a95758ede33e31c3ab76a6dfd6925b94", "url": "https://github.com/rsksmart/rskj/commit/e7b4d121a95758ede33e31c3ab76a6dfd6925b94", "message": "Added logic to check if an account exists before add it to the Wallet", "committedDate": "2020-07-29T18:15:42Z", "type": "commit"}, {"oid": "e7b4d121a95758ede33e31c3ab76a6dfd6925b94", "url": "https://github.com/rsksmart/rskj/commit/e7b4d121a95758ede33e31c3ab76a6dfd6925b94", "message": "Added logic to check if an account exists before add it to the Wallet", "committedDate": "2020-07-29T18:15:42Z", "type": "forcePushed"}]}