{"pr_number": 1360, "pr_title": "Make BtcBlockStore cache configurable", "pr_createdAt": "2020-11-11T14:08:30Z", "pr_url": "https://github.com/rsksmart/rskj/pull/1360", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ3NTIyNQ==", "url": "https://github.com/rsksmart/rskj/pull/1360#discussion_r521475225", "bodyText": "There are two things that you can check here (or in the caller)\n\n\nThat depth <= size\n\n\nThat depth >= 4000 or some other constant. You can add a warning log in case that it fails, there's no reason to fail. But a lower value sounds problematic", "author": "donequis", "createdAt": "2020-11-11T16:22:24Z", "path": "rskj-core/src/main/java/co/rsk/config/RskSystemProperties.java", "diffHunk": "@@ -338,6 +338,14 @@ public int getReceiptsCacheSize() {\n         return configFromFiles.getInt(\"cache.receipts.max-elements\");\n     }\n \n+    public int getBtcBlockStoreCacheSize() {\n+        return configFromFiles.getInt(\"cache.btcBlockStore.size\");\n+    }\n+\n+    public int getBtcBlockStoreCacheDepth() {\n+        return configFromFiles.getInt(\"cache.btcBlockStore.depth\");", "originalCommit": "d52494c6646aa7c18db3320ef4ae574025179638", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM4NzM5OA==", "url": "https://github.com/rsksmart/rskj/pull/1360#discussion_r522387398", "bodyText": "Ok, I will add some warning.", "author": "patogallaiovlabs", "createdAt": "2020-11-12T20:03:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ3NTIyNQ=="}], "type": "inlineReview"}, {"oid": "847324eb215001e25c802b077a376063d6e82ef0", "url": "https://github.com/rsksmart/rskj/commit/847324eb215001e25c802b077a376063d6e82ef0", "message": "Add config warnings", "committedDate": "2020-11-12T20:17:58Z", "type": "forcePushed"}, {"oid": "c5f59b249f47575eaa63b89272cbbd6dddc2fc85", "url": "https://github.com/rsksmart/rskj/commit/c5f59b249f47575eaa63b89272cbbd6dddc2fc85", "message": "Add config warnings", "committedDate": "2020-11-16T14:24:54Z", "type": "forcePushed"}, {"oid": "a1396b82849d2ff17e3721364ef9392fd27f0f97", "url": "https://github.com/rsksmart/rskj/commit/a1396b82849d2ff17e3721364ef9392fd27f0f97", "message": "Comment suggested config for Full Sync", "committedDate": "2021-01-19T19:07:31Z", "type": "forcePushed"}, {"oid": "1f77d2f0c03f3c6a9963f9145bc561a76522ed67", "url": "https://github.com/rsksmart/rskj/commit/1f77d2f0c03f3c6a9963f9145bc561a76522ed67", "message": "Comment suggested config for Full Sync", "committedDate": "2021-01-21T13:14:46Z", "type": "forcePushed"}, {"oid": "c6358847d2da41fc36771781349c8f66f8c4a5e6", "url": "https://github.com/rsksmart/rskj/commit/c6358847d2da41fc36771781349c8f66f8c4a5e6", "message": "Increase Bridge Cache (BTC Bck Store) / Add logs to block execution and save", "committedDate": "2021-01-21T14:09:58Z", "type": "commit"}, {"oid": "35d364abf6ec1953e042915d2d7a22fad88f1327", "url": "https://github.com/rsksmart/rskj/commit/35d364abf6ec1953e042915d2d7a22fad88f1327", "message": "make BTCBlockStore Cache Size/Depth configurable", "committedDate": "2021-01-21T14:09:58Z", "type": "commit"}, {"oid": "9ad6982f414b5278fd3dee7f6c81e7fb5a5bf6dc", "url": "https://github.com/rsksmart/rskj/commit/9ad6982f414b5278fd3dee7f6c81e7fb5a5bf6dc", "message": "Add config warnings", "committedDate": "2021-01-21T14:09:58Z", "type": "commit"}, {"oid": "bf33169bda19ea9c85806afe49c3fa8d4372c788", "url": "https://github.com/rsksmart/rskj/commit/bf33169bda19ea9c85806afe49c3fa8d4372c788", "message": "finding the correct value", "committedDate": "2021-01-21T14:09:58Z", "type": "commit"}, {"oid": "29dbff073a2df552e8e74b5f37eb3e33b17c4975", "url": "https://github.com/rsksmart/rskj/commit/29dbff073a2df552e8e74b5f37eb3e33b17c4975", "message": "Comment suggested config for Full Sync", "committedDate": "2021-01-21T14:09:58Z", "type": "commit"}, {"oid": "29dbff073a2df552e8e74b5f37eb3e33b17c4975", "url": "https://github.com/rsksmart/rskj/commit/29dbff073a2df552e8e74b5f37eb3e33b17c4975", "message": "Comment suggested config for Full Sync", "committedDate": "2021-01-21T14:09:58Z", "type": "forcePushed"}]}