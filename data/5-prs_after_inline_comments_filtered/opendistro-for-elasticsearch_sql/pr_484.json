{"pr_number": 484, "pr_title": "[PPL] Add ES rest client to support standalone mode", "pr_createdAt": "2020-05-22T22:10:18Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/sql/pull/484", "timeline": [{"oid": "0c36d590bcb93fd01da6bfcd4462c71f7cee7d9a", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/0c36d590bcb93fd01da6bfcd4462c71f7cee7d9a", "message": "Add standalone IT and rest client impl", "committedDate": "2020-05-22T21:43:54Z", "type": "commit"}, {"oid": "dc9353330c0024d6668af8bb79152379464a15ea", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/dc9353330c0024d6668af8bb79152379464a15ea", "message": "Add standalone IT and rest client impl", "committedDate": "2020-05-22T21:43:54Z", "type": "commit"}, {"oid": "013b96cc36dcca90f5e129fdcf5aecc361e773ca", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/013b96cc36dcca90f5e129fdcf5aecc361e773ca", "message": "Add rest client UT", "committedDate": "2020-05-22T21:43:54Z", "type": "commit"}, {"oid": "5aae697198d52ff40a24034d57a4e9a22d7d1399", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5aae697198d52ff40a24034d57a4e9a22d7d1399", "message": "Add more UT", "committedDate": "2020-05-22T21:43:54Z", "type": "commit"}, {"oid": "5dd37a56c715a0a90c09ad01329d1ce4a6bbc754", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5dd37a56c715a0a90c09ad01329d1ce4a6bbc754", "message": "Add cleanup method", "committedDate": "2020-05-22T21:43:54Z", "type": "commit"}, {"oid": "ae35d01289e91f95aa8a9ee460cba175e2cf8832", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ae35d01289e91f95aa8a9ee460cba175e2cf8832", "message": "Add assertion for cleanup method", "committedDate": "2020-05-22T21:43:55Z", "type": "commit"}, {"oid": "93d15efc7d8cb90eb69dc839abe8d1771c58cd9f", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/93d15efc7d8cb90eb69dc839abe8d1771c58cd9f", "message": "Avoid cleanup multiple times", "committedDate": "2020-05-22T21:43:55Z", "type": "commit"}, {"oid": "91591bed5494d4f43334aee56e9eefa370ee6a98", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/91591bed5494d4f43334aee56e9eefa370ee6a98", "message": "Don't cleanup at last page automatically", "committedDate": "2020-05-22T21:58:09Z", "type": "commit"}, {"oid": "fa2bffb18ee80aa637067c8ec537fc29a9367c4d", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fa2bffb18ee80aa637067c8ec537fc29a9367c4d", "message": "Merge branch 'feature/ppl' into add-es-rest-client-merge", "committedDate": "2020-05-22T22:00:41Z", "type": "commit"}, {"oid": "d6d8deacc1085a7b86e49fd94f0113e87cf22232", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d6d8deacc1085a7b86e49fd94f0113e87cf22232", "message": "More comments", "committedDate": "2020-05-22T22:06:29Z", "type": "commit"}, {"oid": "e1a2ce6aa9a358ce322f7ba926c3d9f73e64c518", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/e1a2ce6aa9a358ce322f7ba926c3d9f73e64c518", "message": "UT covers all branches", "committedDate": "2020-05-22T23:22:26Z", "type": "commit"}, {"oid": "dd58ffef478dda0302c5cb403461de0ba2ce8e33", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/dd58ffef478dda0302c5cb403461de0ba2ce8e33", "message": "Merge branch 'feature/ppl' into add-es-rest-client-merge", "committedDate": "2020-05-26T17:29:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0NTYzNQ==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/484#discussion_r430645635", "bodyText": "Not a problem of this pr, but sometimes the result of method getSourceAsMap() is not what we expected, e.g. the source would be all fields when the designated field(s) is an evaluation function (like abs(balance)). Here is a similar issue: #461. Are we likely running into the same problem here?", "author": "chloe-zh", "createdAt": "2020-05-26T19:12:49Z", "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/storage/ElasticsearchIndexScan.java", "diffHunk": "@@ -83,4 +85,11 @@ public ExprValue next() {\n         return ExprValueUtils.fromObjectValue(hits.next().getSourceAsMap());", "originalCommit": "dd58ffef478dda0302c5cb403461de0ba2ce8e33", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY4MDY4OA==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/484#discussion_r430680688", "bodyText": "Yeah, you're right, this is only for the time being. Need to handle different cases in future.", "author": "dai-chen", "createdAt": "2020-05-26T20:13:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0NTYzNQ=="}], "type": "inlineReview"}]}