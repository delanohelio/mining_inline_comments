{"pr_number": 415, "pr_title": "[PPL] add basic parser support", "pr_createdAt": "2020-04-08T18:04:23Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/sql/pull/415", "timeline": [{"oid": "30ad6db8693fbe870cf80a64e24ff4931e929b9c", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/30ad6db8693fbe870cf80a64e24ff4931e929b9c", "message": "[PPL] add basic parser support", "committedDate": "2020-04-08T17:51:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTgxMDExNQ==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/415#discussion_r405810115", "bodyText": "Just curious, is this privilege call required for all classes annotated by Spring annotation?", "author": "dai-chen", "createdAt": "2020-04-08T20:57:02Z", "path": "plugin/src/main/java/com/amazon/opendistroforelasticsearch/sql/plugin/rest/RestPPLQueryAction.java", "diffHunk": "@@ -44,17 +48,23 @@ public String getName() {\n \n     @Override\n     protected RestChannelConsumer prepareRequest(RestRequest request, NodeClient client) throws IOException {\n-        PPLService pplService = new PPLService();\n-        return channel -> pplService.execute(new PPLQueryRequest(), new ResponseListener<PPLQueryResponse>() {\n-            @Override\n-            public void onResponse(PPLQueryResponse pplQueryResponse) {\n-                channel.sendResponse(new BytesRestResponse(OK, \"application/json; charset=UTF-8\", \"ok\"));\n-            }\n-\n-            @Override\n-            public void onFailure(Exception e) {\n-                channel.sendResponse(new BytesRestResponse(OK, \"application/json; charset=UTF-8\", \"error\"));\n-            }\n-        });\n+        AnnotationConfigApplicationContext context = SecurityAccess.doPrivileged(\n+                () -> new AnnotationConfigApplicationContext(\n+                        PPLServiceConfig.class));", "originalCommit": "30ad6db8693fbe870cf80a64e24ff4931e929b9c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg1NTM5MQ==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/415#discussion_r405855391", "bodyText": "If we use Spring IoC, it should be fine. But for other features, I am not sure now.", "author": "penghuo", "createdAt": "2020-04-08T22:40:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTgxMDExNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg1NjMyMA==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/415#discussion_r405856320", "bodyText": "I see. Thanks!", "author": "dai-chen", "createdAt": "2020-04-08T22:42:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTgxMDExNQ=="}], "type": "inlineReview"}, {"oid": "fd88459dac6bddbfc11023329539638b8c18bc66", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fd88459dac6bddbfc11023329539638b8c18bc66", "message": "Reduce the permission by removing java.security.AllPermission", "committedDate": "2020-04-08T22:27:29Z", "type": "commit"}]}