{"pr_number": 4882, "pr_title": "Issue #4873 - fix timeout on ExecutorThreadPool.join()", "pr_createdAt": "2020-05-18T03:14:45Z", "pr_url": "https://github.com/eclipse/jetty.project/pull/4882", "timeline": [{"oid": "590b1a6ab17680b2793e4a1181e6226929cf732a", "url": "https://github.com/eclipse/jetty.project/commit/590b1a6ab17680b2793e4a1181e6226929cf732a", "message": "Issue #4873 - fix timeout on ExecutorThreadPool.join()\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-05-18T01:49:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU5MDYzMA==", "url": "https://github.com/eclipse/jetty.project/pull/4882#discussion_r426590630", "bodyText": "Why are we even doing awaitTermination()?\nIsn't there a better choice?", "author": "joakime", "createdAt": "2020-05-18T12:32:38Z", "path": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/ExecutorThreadPool.java", "diffHunk": "@@ -302,7 +302,7 @@ protected void doStop() throws Exception\n     @Override\n     public void join() throws InterruptedException\n     {\n-        _executor.awaitTermination(getStopTimeout(), TimeUnit.MILLISECONDS);\n+        _executor.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS);", "originalCommit": "590b1a6ab17680b2793e4a1181e6226929cf732a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU5NTQyMQ==", "url": "https://github.com/eclipse/jetty.project/pull/4882#discussion_r426595421", "bodyText": "I guess a 292 million year wait isn't going to cause anybody any concerns.", "author": "joakime", "createdAt": "2020-05-18T12:40:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU5MDYzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MDI3NQ==", "url": "https://github.com/eclipse/jetty.project/pull/4882#discussion_r426960275", "bodyText": "Doesn't look like there is any better way to do it other than awaitTermination().\nIt doesn't look like waiting only stopTimeout caused many concerns either, it has been like that for over 2 years and only one issue filed against it. I guess it just wasn't used much.", "author": "lachlan-roberts", "createdAt": "2020-05-19T00:18:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU5MDYzMA=="}], "type": "inlineReview"}, {"oid": "ae0b70fbfcca858eb554e3660896ed325c5b7b2a", "url": "https://github.com/eclipse/jetty.project/commit/ae0b70fbfcca858eb554e3660896ed325c5b7b2a", "message": "Issue #4873 - add test to reproduce the ExecutorThreadPool.join() issue\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-05-19T14:45:05Z", "type": "commit"}, {"oid": "74f9b464a6a7c3ddbb026988a0e490607f171870", "url": "https://github.com/eclipse/jetty.project/commit/74f9b464a6a7c3ddbb026988a0e490607f171870", "message": "Issue #4873 - generalize test for all ThreadPools\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-05-22T00:49:42Z", "type": "commit"}]}