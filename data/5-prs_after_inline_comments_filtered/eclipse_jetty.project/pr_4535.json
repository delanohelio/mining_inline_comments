{"pr_number": 4535, "pr_title": "Issue #4462 - do not throw IOException on Javax websocket close", "pr_createdAt": "2020-01-31T00:10:54Z", "pr_url": "https://github.com/eclipse/jetty.project/pull/4535", "timeline": [{"oid": "bdaa06e8dd782395bd2027088090bc35ba5fbb78", "url": "https://github.com/eclipse/jetty.project/commit/bdaa06e8dd782395bd2027088090bc35ba5fbb78", "message": "Issue #4462 - do not throw IOException on Javax websocket close\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-01-31T00:09:30Z", "type": "commit"}, {"oid": "fde1ab3e5bccb79deeb5296e08c8688109fb5bc6", "url": "https://github.com/eclipse/jetty.project/commit/fde1ab3e5bccb79deeb5296e08c8688109fb5bc6", "message": "Issue #4462 - fix incorrect test expectations\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-01-31T05:31:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgzNzc0OQ==", "url": "https://github.com/eclipse/jetty.project/pull/4535#discussion_r373837749", "bodyText": "getBlockingTimeout() is only used from close() so perhaps should be renamed to getCloseTimeout()?", "author": "sbordet", "createdAt": "2020-02-02T11:20:22Z", "path": "jetty-websocket/websocket-javax-common/src/main/java/org/eclipse/jetty/websocket/javax/common/JavaxWebSocketSession.java", "diffHunk": "@@ -189,11 +189,18 @@ public void close() throws IOException\n      * @since JSR356 v1.0\n      */\n     @Override\n-    public void close(CloseReason closeReason) throws IOException\n+    public void close(CloseReason closeReason)\n     {\n-        FutureCallback b = new FutureCallback();\n-        coreSession.close(closeReason.getCloseCode().getCode(), closeReason.getReasonPhrase(), b);\n-        b.block(getBlockingTimeout(), TimeUnit.MILLISECONDS);\n+        try\n+        {\n+            FutureCallback b = new FutureCallback();\n+            coreSession.close(closeReason.getCloseCode().getCode(), closeReason.getReasonPhrase(), b);\n+            b.block(getBlockingTimeout(), TimeUnit.MILLISECONDS);", "originalCommit": "fde1ab3e5bccb79deeb5296e08c8688109fb5bc6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}