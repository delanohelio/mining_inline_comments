{"pr_number": 5038, "pr_title": "Issue #5029 Relative Redirection", "pr_createdAt": "2020-07-09T12:36:43Z", "pr_url": "https://github.com/eclipse/jetty.project/pull/5038", "timeline": [{"oid": "c8b8d7493e18399ba4abac153b0f8f22ce93ded4", "url": "https://github.com/eclipse/jetty.project/commit/c8b8d7493e18399ba4abac153b0f8f22ce93ded4", "message": "Issue #5029 Relative Redirection\n\nProvide option to allow relative redirection", "committedDate": "2020-07-09T12:35:41Z", "type": "commit"}, {"oid": "2b599b21c237a5f72b98c3a687ca358571cfe42d", "url": "https://github.com/eclipse/jetty.project/commit/2b599b21c237a5f72b98c3a687ca358571cfe42d", "message": "Issue #5029 Relative Redirection\n\nFixed checkstyle", "committedDate": "2020-07-09T19:20:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgzNjI3Mg==", "url": "https://github.com/eclipse/jetty.project/pull/5038#discussion_r452836272", "bodyText": "Is the Servlet specification mandating absolute redirects? Just to be sure that we actually can.", "author": "sbordet", "createdAt": "2020-07-10T13:16:43Z", "path": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "diffHunk": "@@ -506,7 +506,9 @@ public void sendRedirect(int code, String location) throws IOException\n \n         if (!URIUtil.hasScheme(location))\n         {\n-            StringBuilder buf = _channel.getRequest().getRootURL();\n+            StringBuilder buf = _channel.getHttpConfiguration().isRelativeRedirectionAllowed()\n+                ? new StringBuilder()\n+                : _channel.getRequest().getRootURL();", "originalCommit": "2b599b21c237a5f72b98c3a687ca358571cfe42d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg5OTIwOQ==", "url": "https://github.com/eclipse/jetty.project/pull/5038#discussion_r454899209", "bodyText": "probably, but it was written before RFC7230 and we do absolute by default.  Happy to bend the rules if users configure it to do so.", "author": "gregw", "createdAt": "2020-07-15T08:57:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgzNjI3Mg=="}], "type": "inlineReview"}, {"oid": "4a91f2853c27726aa5d7998db670bd23e0168f77", "url": "https://github.com/eclipse/jetty.project/commit/4a91f2853c27726aa5d7998db670bd23e0168f77", "message": "rename from review", "committedDate": "2020-07-15T08:51:44Z", "type": "commit"}]}