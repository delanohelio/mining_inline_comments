{"pr_number": 811, "pr_title": "Improve health check reporting for application's failure", "pr_createdAt": "2020-10-15T06:08:08Z", "pr_url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/811", "timeline": [{"oid": "421fdec69cd7b59676b337b39a12ac555b8dc2c4", "url": "https://github.com/smallrye/smallrye-reactive-messaging/commit/421fdec69cd7b59676b337b39a12ac555b8dc2c4", "message": "Improve health check reporting when the failure comes from the application code.\nAlso close the Kafka consumer if the failure is _fatal_.", "committedDate": "2020-10-15T08:18:28Z", "type": "commit"}, {"oid": "421fdec69cd7b59676b337b39a12ac555b8dc2c4", "url": "https://github.com/smallrye/smallrye-reactive-messaging/commit/421fdec69cd7b59676b337b39a12ac555b8dc2c4", "message": "Improve health check reporting when the failure comes from the application code.\nAlso close the Kafka consumer if the failure is _fatal_.", "committedDate": "2020-10-15T08:18:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ5NTQ4MA==", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/811#discussion_r505495480", "bodyText": "Does \"application\" as a prefix make sense given it's combined with the method name? Is that going to be confusing?", "author": "kenfinnigan", "createdAt": "2020-10-15T12:20:32Z", "path": "smallrye-reactive-messaging-provider/src/main/java/io/smallrye/reactive/messaging/extension/HealthCenter.java", "diffHunk": "@@ -41,6 +41,10 @@ public void report(String source, Throwable cause) {\n         failures.add(new ReportedFailure(source, cause));\n     }\n \n+    public void reportApplicationFailure(String method, Throwable cause) {\n+        failures.add(new ReportedFailure(\"application-\" + method, cause));", "originalCommit": "421fdec69cd7b59676b337b39a12ac555b8dc2c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU3MzE2OQ==", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/811#discussion_r505573169", "bodyText": "Yes and no, I tried with the method name only and found it even more confusing. The application prefix indicates it's a code issue.", "author": "cescoffier", "createdAt": "2020-10-15T14:08:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ5NTQ4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU3MzQyOA==", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/811#discussion_r505573428", "bodyText": "Anyway, let's see and we can revisit it later. The important part is that it's reported.", "author": "cescoffier", "createdAt": "2020-10-15T14:08:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ5NTQ4MA=="}], "type": "inlineReview"}]}