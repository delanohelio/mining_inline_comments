{"pr_number": 817, "pr_title": "Issue #803: Support for metrics-only state", "pr_createdAt": "2020-01-24T05:37:40Z", "pr_url": "https://github.com/resilience4j/resilience4j/pull/817", "timeline": [{"oid": "811abac907175621e9558532e6e113789de97530", "url": "https://github.com/resilience4j/resilience4j/commit/811abac907175621e9558532e6e113789de97530", "message": "Issue #803: Support for metrics-only mode", "committedDate": "2020-01-24T05:35:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ5NjY3NA==", "url": "https://github.com/resilience4j/resilience4j/pull/817#discussion_r370496674", "bodyText": "Must be metrics.getSlowCallRate()", "author": "RobWin", "createdAt": "2020-01-24T07:07:14Z", "path": "resilience4j-circuitbreaker/src/main/java/io/github/resilience4j/circuitbreaker/internal/CircuitBreakerStateMachine.java", "diffHunk": "@@ -387,6 +390,27 @@ private void publishCircuitIgnoredErrorEvent(String name, long duration, TimeUni\n         publishEventIfPossible(event);\n     }\n \n+    private void publishCircuitFailureRateExceededEvent(String name, float failureRate) {\n+        final CircuitBreakerOnFailureRateExceededEvent event = new CircuitBreakerOnFailureRateExceededEvent(name,\n+            failureRate);\n+        publishEventIfPossible(event);\n+    }\n+\n+    private void publishCircuitSlowCallRateExceededEvent(String name, float slowCallRate) {\n+        final CircuitBreakerOnSlowCallRateExceededEvent event = new CircuitBreakerOnSlowCallRateExceededEvent(name,\n+            slowCallRate);\n+        publishEventIfPossible(event);\n+    }\n+\n+    private void publishCircuitThresholdsExceededEvent(Result result, CircuitBreakerMetrics metrics) {\n+        if (Result.hasFailureRateExceededThreshold(result)) {\n+            publishCircuitFailureRateExceededEvent(getName(), metrics.getFailureRate());\n+        }\n+        if (Result.hasSlowCallRateExceededThreshold(result)) {\n+            publishCircuitSlowCallRateExceededEvent(getName(), metrics.getFailureRate());", "originalCommit": "811abac907175621e9558532e6e113789de97530", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDYxNDgyMw==", "url": "https://github.com/resilience4j/resilience4j/pull/817#discussion_r370614823", "bodyText": "Fixed the typo", "author": "laksnv", "createdAt": "2020-01-24T12:43:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ5NjY3NA=="}], "type": "inlineReview"}, {"oid": "280e6377c3f74c8c79a1dd684d5049dc933bfba8", "url": "https://github.com/resilience4j/resilience4j/commit/280e6377c3f74c8c79a1dd684d5049dc933bfba8", "message": "Issue #803: Fix typo", "committedDate": "2020-01-24T12:41:47Z", "type": "commit"}]}