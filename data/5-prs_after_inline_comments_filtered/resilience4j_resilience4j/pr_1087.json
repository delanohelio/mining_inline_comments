{"pr_number": 1087, "pr_title": "Enriched SSE event with hystrix like event data  - Ratpack", "pr_createdAt": "2020-07-20T17:35:49Z", "pr_url": "https://github.com/resilience4j/resilience4j/pull/1087", "timeline": [{"oid": "6d9d6b95ff0e4328aee454e58f63bf3dfcd4573a", "url": "https://github.com/resilience4j/resilience4j/commit/6d9d6b95ff0e4328aee454e58f63bf3dfcd4573a", "message": " Adding hystrix like stream", "committedDate": "2020-07-20T16:57:46Z", "type": "commit"}, {"oid": "7091683bd0b9d9958030dcbe16164f6a52824450", "url": "https://github.com/resilience4j/resilience4j/commit/7091683bd0b9d9958030dcbe16164f6a52824450", "message": " Adding hystrix like stream", "committedDate": "2020-07-20T17:29:02Z", "type": "commit"}, {"oid": "808731c089e23393eed08e4a1654cdb01d64619b", "url": "https://github.com/resilience4j/resilience4j/commit/808731c089e23393eed08e4a1654cdb01d64619b", "message": " Formatting and rename", "committedDate": "2020-07-20T17:32:33Z", "type": "commit"}, {"oid": "f650eb833c1e7586d41a99a4f405ae12c3497df4", "url": "https://github.com/resilience4j/resilience4j/commit/f650eb833c1e7586d41a99a4f405ae12c3497df4", "message": " Added failure and slow thresold similar to springboot2 CB details", "committedDate": "2020-07-20T20:57:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5MjQ4Mg==", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r457692482", "bodyText": "Added similar to springboot2 health details.\n\n  \n    \n      resilience4j/resilience4j-spring-boot2/src/main/java/io/github/resilience4j/circuitbreaker/monitoring/health/CircuitBreakersHealthIndicator.java\n    \n    \n         Line 59\n      in\n      b4f5249\n    \n    \n    \n    \n\n        \n          \n           private static Health.Builder addDetails(Health.Builder builder,", "author": "vijaycse", "createdAt": "2020-07-20T21:07:49Z", "path": "resilience4j-ratpack/src/main/java/io/github/resilience4j/ratpack/circuitbreaker/monitoring/endpoint/events/CircuitBreakerStreamEventsDTO.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * Copyright 2020 Vijay Ram\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.github.resilience4j.ratpack.circuitbreaker.monitoring.endpoint.events;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import io.github.resilience4j.circuitbreaker.CircuitBreaker;\n+import io.github.resilience4j.circuitbreaker.CircuitBreakerConfig;\n+import io.github.resilience4j.circuitbreaker.event.CircuitBreakerEvent;\n+\n+\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+public class CircuitBreakerStreamEventsDTO {\n+\n+    private CircuitBreakerEvent circuitBreakerRecentEvent;\n+    private CircuitBreaker.Metrics metrics;\n+    private CircuitBreaker.State currentState;\n+    private float failureRateThreshold;\n+    private float slowCallRateThreshold;\n+\n+    public CircuitBreakerStreamEventsDTO(CircuitBreakerEvent circuitBreakerEvent,\n+                                         CircuitBreaker.State state,\n+                                         CircuitBreaker.Metrics metrics,\n+                                         CircuitBreakerConfig circuitBreakerConfig) {\n+        this.circuitBreakerRecentEvent = circuitBreakerEvent;\n+        this.metrics = metrics;\n+        this.currentState = state;\n+        this.failureRateThreshold = circuitBreakerConfig.getFailureRateThreshold();\n+        this.slowCallRateThreshold = circuitBreakerConfig.getSlowCallRateThreshold();", "originalCommit": "f650eb833c1e7586d41a99a4f405ae12c3497df4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dfdc9dbd6b9c7a838052e665be1a78ebed4a1186", "url": "https://github.com/resilience4j/resilience4j/commit/dfdc9dbd6b9c7a838052e665be1a78ebed4a1186", "message": " Moved the hystris stream event DTO to resilence4j common module", "committedDate": "2020-07-23T15:56:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU2MTM2Mg==", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r459561362", "bodyText": "@vijaycse please update the description to not mention eco :D", "author": "drmaas", "createdAt": "2020-07-23T16:04:29Z", "path": "resilience4j-framework-common/src/main/java/io/github/resilience4j/common/circuitbreaker/monitoring/endpoint/CircuitBreakerHystrixStreamEventsDTO.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package io.github.resilience4j.common.circuitbreaker.monitoring.endpoint;\n+\n+import io.github.resilience4j.circuitbreaker.CircuitBreaker;\n+import io.github.resilience4j.circuitbreaker.CircuitBreakerConfig;\n+import io.github.resilience4j.circuitbreaker.event.CircuitBreakerEvent;\n+\n+/**\n+ * @author vijayram\n+ */\n+\n+/**\n+ * This class is used to emit available data as SSE so that resilence4j SSE can be bridged\n+ * to suppose legacy hystrix eco tools such as hystrix dashboard , turbine and vizceral.", "originalCommit": "dfdc9dbd6b9c7a838052e665be1a78ebed4a1186", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU3MDgzOQ==", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r459570839", "bodyText": "I meant hystrix ecosystem of tools such as turbine. will update the docs @drmaas", "author": "vijaycse", "createdAt": "2020-07-23T16:19:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU2MTM2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU3ODkzMg==", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r459578932", "bodyText": "Updated the document from eco to ecosystem", "author": "vijaycse", "createdAt": "2020-07-23T16:32:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU2MTM2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU2Mzg1Mg==", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r459563852", "bodyText": "@RobWin do we want to name things hystrix - or name things turbine or a more generic name? The use case for all of this is that the streams are aggregated by turbine, which is polled by vizceral to provide real-time visualization of network traffic across all application instances.\nHystrix provided a streaming endpoint like this one - and Vijay is porting it forward for clients using resilience4j.", "author": "drmaas", "createdAt": "2020-07-23T16:08:29Z", "path": "resilience4j-ratpack/src/main/java/io/github/resilience4j/ratpack/circuitbreaker/monitoring/endpoint/CircuitBreakerChain.java", "diffHunk": "@@ -111,6 +112,26 @@ public void execute(Chain chain) throws Exception {\n                             .event(c -> c.getEventType().name()).data(data));\n                 ctx.render(events);\n             });\n+            chain1.get(\"hystrixStream/events\", ctx -> {", "originalCommit": "dfdc9dbd6b9c7a838052e665be1a78ebed4a1186", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQyMzE5MA==", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r464423190", "bodyText": "@RobWin  Can you answer this? Otherwise I believe I will update with more documentation as pointed out by @drmaas  and this PR is good to merge.", "author": "vijaycse", "createdAt": "2020-08-03T13:45:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU2Mzg1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0OTY0OA==", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r467549648", "bodyText": "The streaming data format is turbine/hystrix specific, or?", "author": "RobWin", "createdAt": "2020-08-09T07:42:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU2Mzg1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYzMjA1OA==", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r467632058", "bodyText": "yes. They are intend for hystrix/turbine but can be used for any purpose. just enriching SSE with more data.. thats all @RobWin", "author": "vijaycse", "createdAt": "2020-08-09T21:42:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU2Mzg1Mg=="}], "type": "inlineReview"}, {"oid": "f2bb718bd6fade3df65ea91976e73fba4dc35208", "url": "https://github.com/resilience4j/resilience4j/commit/f2bb718bd6fade3df65ea91976e73fba4dc35208", "message": " Code review comments addressed", "committedDate": "2020-07-23T16:30:24Z", "type": "commit"}, {"oid": "11f202a759e69c2c01421a3e315b00566eac0447", "url": "https://github.com/resilience4j/resilience4j/commit/11f202a759e69c2c01421a3e315b00566eac0447", "message": "Adding Docs as suggested in Code review", "committedDate": "2020-08-07T21:23:37Z", "type": "commit"}]}