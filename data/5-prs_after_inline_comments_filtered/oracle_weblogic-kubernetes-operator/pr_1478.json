{"pr_number": 1478, "pr_title": "Model in image support", "pr_createdAt": "2020-03-17T19:29:22Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478", "timeline": [{"oid": "62c56ef60b39e04a56307f4ecdc3b3756bdbec7d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/62c56ef60b39e04a56307f4ecdc3b3756bdbec7d", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-25T16:29:49Z", "type": "commit"}, {"oid": "ea9dc9e2db65db8254da52355f83b6f2846a1efd", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ea9dc9e2db65db8254da52355f83b6f2846a1efd", "message": "doc update", "committedDate": "2020-03-25T16:46:38Z", "type": "commit"}, {"oid": "052184b0304ccd38cbce2ee30853df310456e698", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/052184b0304ccd38cbce2ee30853df310456e698", "message": "doc update", "committedDate": "2020-03-25T16:53:59Z", "type": "commit"}, {"oid": "5a9e06aa840d5a65c26d91380586b547d566c876", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5a9e06aa840d5a65c26d91380586b547d566c876", "message": "add usage and friendlier syntax error reporting to MII sample create_secret.sh + create_configmap.sh, correct the usage text in opss_wallet_util.sh", "committedDate": "2020-03-25T17:37:11Z", "type": "commit"}, {"oid": "04e242c66ffb7a2f94128ed709e6a1458553e02e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/04e242c66ffb7a2f94128ed709e6a1458553e02e", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T17:37:23Z", "type": "commit"}, {"oid": "4530c8b7388ffc3eb88c08e74382503e743d89a4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4530c8b7388ffc3eb88c08e74382503e743d89a4", "message": "doc update", "committedDate": "2020-03-25T17:52:12Z", "type": "commit"}, {"oid": "4d391f06a731ab2b47409a4764044b0b3bb7893d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4d391f06a731ab2b47409a4764044b0b3bb7893d", "message": "doc update", "committedDate": "2020-03-25T17:55:50Z", "type": "commit"}, {"oid": "effa05a219d187168288e72d9c5475f18d115efe", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/effa05a219d187168288e72d9c5475f18d115efe", "message": "fix to handle image names with '/' in them in create_domain.sh sample script", "committedDate": "2020-03-25T18:50:36Z", "type": "commit"}, {"oid": "e15eefd1a0a24919416d0e8950fa1785a628d040", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e15eefd1a0a24919416d0e8950fa1785a628d040", "message": "remove mention of unused var from build_image_model.sh sample script", "committedDate": "2020-03-25T19:25:39Z", "type": "commit"}, {"oid": "87a0f1f29796898d9c6ecd6a39f0fba28fe8f5a8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/87a0f1f29796898d9c6ecd6a39f0fba28fe8f5a8", "message": "Fix help text in create_configmap.sh helper script.", "committedDate": "2020-03-25T20:22:00Z", "type": "commit"}, {"oid": "2a38367da0a7460ca107c3d376c6a1c51ed9f826", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2a38367da0a7460ca107c3d376c6a1c51ed9f826", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-25T20:50:42Z", "type": "commit"}, {"oid": "1a673eb04eda35524c4edc146ae9608d71837909", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1a673eb04eda35524c4edc146ae9608d71837909", "message": "Put the domain name back if present", "committedDate": "2020-03-25T20:54:24Z", "type": "commit"}, {"oid": "493ccafaf8069be6bd3a13cad35f0521c9d4d0da", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/493ccafaf8069be6bd3a13cad35f0521c9d4d0da", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T20:55:09Z", "type": "commit"}, {"oid": "8e6769eb6d5297b711f54c4edfb3a22c82ba4348", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8e6769eb6d5297b711f54c4edfb3a22c82ba4348", "message": "remove printing the model", "committedDate": "2020-03-25T20:55:52Z", "type": "commit"}, {"oid": "92dc7bd2cb10529455e6c79c0c56ce2c3bc75b33", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/92dc7bd2cb10529455e6c79c0c56ce2c3bc75b33", "message": "Correct configmap data is not inserted into the flow after it's read.", "committedDate": "2020-03-26T17:06:08Z", "type": "commit"}, {"oid": "397a65de0a3ae8b8a380003dda866a7bbee80796", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/397a65de0a3ae8b8a380003dda866a7bbee80796", "message": "Minor change to Operator.properties\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-26T17:58:39Z", "type": "commit"}, {"oid": "1f22f97c2ed7ad25f34b38a75d0ca1912317bb53", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1f22f97c2ed7ad25f34b38a75d0ca1912317bb53", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-26T19:38:39Z", "type": "commit"}, {"oid": "a6266991c26ea38adbc777dfa98b69fac6743ce8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a6266991c26ea38adbc777dfa98b69fac6743ce8", "message": "remove debug code", "committedDate": "2020-03-26T19:47:42Z", "type": "commit"}, {"oid": "192939b3b39521734257dc61f98289b864c5a71b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/192939b3b39521734257dc61f98289b864c5a71b", "message": "minor help text correction for create_configmap.sh sample script", "committedDate": "2020-03-27T00:21:10Z", "type": "commit"}, {"oid": "2bcd9cefb852057d0ecb6291b30fef40b0c97849", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2bcd9cefb852057d0ecb6291b30fef40b0c97849", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-27T00:21:27Z", "type": "commit"}, {"oid": "98353983987192325498f6a3ffdc8a786f65490c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/98353983987192325498f6a3ffdc8a786f65490c", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-27T21:45:26Z", "type": "commit"}, {"oid": "cd90f050704c251bf41e239a99a484dc09bb2365", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cd90f050704c251bf41e239a99a484dc09bb2365", "message": "doc update (#1509)\n\n* doc update\r\n\r\n* doc update\r\n\r\n* doc update", "committedDate": "2020-03-27T21:49:17Z", "type": "commit"}, {"oid": "90a8c4e3dd0f8f382bf88bdf9a6e6fdc7102a668", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/90a8c4e3dd0f8f382bf88bdf9a6e6fdc7102a668", "message": "MII: avoid deploying/referencing JRF secrets for non-JRF domain types, it's too confusing (#1507)", "committedDate": "2020-03-27T21:50:10Z", "type": "commit"}, {"oid": "cf5ffc4a58b6c3df685f752ab5791cc912233eca", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cf5ffc4a58b6c3df685f752ab5791cc912233eca", "message": "doc update (#1510)\n\n* doc update\r\n\r\n* doc update\r\n\r\n* doc update", "committedDate": "2020-03-27T21:51:15Z", "type": "commit"}, {"oid": "06a91867b90c54a2e5844dce43892bad067bf14c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/06a91867b90c54a2e5844dce43892bad067bf14c", "message": "update ci/cd doc for mii (#1502)\n\n* update ci/cd doc for mii\r\n\r\n* first pass edits\r\n\r\n* doc update\r\n\r\n* doc update\r\n\r\nCo-authored-by: Rosemary Marano <rosemary.marano@oracle.com>", "committedDate": "2020-03-27T21:52:28Z", "type": "commit"}, {"oid": "3b23e490cdf956acdcafa59f0288d573ffc9cd5c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3b23e490cdf956acdcafa59f0288d573ffc9cd5c", "message": "cherry pick 1517 from develop", "committedDate": "2020-03-31T00:50:08Z", "type": "commit"}, {"oid": "867c5287ac0eabf6cf78319ad39b804e172b28ac", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/867c5287ac0eabf6cf78319ad39b804e172b28ac", "message": "two automated test case for Wdt Config Update w single Model File jenkins-ignore (#1495)\n\n* The first test case for OWLS-80444 Automate Wdt Config Override with single Model File jenkins-ignore\r\n\r\n* Modified TestUtils.java jenkins-ignore\r\n\r\n* Added python file to verify JDBC DS prop in server pod jenkins-ignore\r\n\r\n* Changes b ased on the comments jenkins-ignore\r\n\r\n* Added the 2nd test case jenkins-ignore\r\n\r\n* Used patch domain to restart domain jenkins-ignore\r\n\r\n* Changed test case names jenkins-ignore", "committedDate": "2020-03-31T19:13:44Z", "type": "commit"}, {"oid": "cdd5cd60d6b5349895630c10c5f840b3634bcf56", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cdd5cd60d6b5349895630c10c5f840b3634bcf56", "message": "adding config delete and app delete tests using mode file (#1521)\n\n* adding config update tests\r\n\r\n* add config and app delete tests", "committedDate": "2020-04-01T13:17:44Z", "type": "commit"}, {"oid": "193c4f30fa7eaa6a474b42414e1cb49c609b8c5f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/193c4f30fa7eaa6a474b42414e1cb49c609b8c5f", "message": "Model in image namefixes (#1515)\n\n* Fix for PR1478\r\n\r\n* add more traces and minor update\r\n\r\nCo-authored-by: Johnny Shum <cbdream99@gmail.com>", "committedDate": "2020-04-03T13:51:56Z", "type": "commit"}, {"oid": "2723ab2208945cdf4cb8275c34d6996843bf1250", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2723ab2208945cdf4cb8275c34d6996843bf1250", "message": "Missing secret dir fix (#1525)\n\n* Add temporary work around for WDT return non-zero rc if secret directory doesn't exist.\r\n\r\n* Change per WDT fix for no more default for custom secrets mount\r\n\r\nCo-authored-by: Johnny Shum <cbdream99@gmail.com>", "committedDate": "2020-04-03T13:52:12Z", "type": "commit"}, {"oid": "8f9225247231add8fca45faf2ed746a03daa4586", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8f9225247231add8fca45faf2ed746a03daa4586", "message": "Merge remote-tracking branch 'origin/develop' into develop-mii-merge", "committedDate": "2020-04-03T16:24:16Z", "type": "commit"}, {"oid": "7bcd53d66efab573f0302382fe5a44248bb1bf66", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7bcd53d66efab573f0302382fe5a44248bb1bf66", "message": "Update rest_domainqualtrue.yml", "committedDate": "2020-04-03T18:57:29Z", "type": "commit"}, {"oid": "1fba26b44cac5faa1670ea2f4cb3341031de8765", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1fba26b44cac5faa1670ea2f4cb3341031de8765", "message": "Update OperatorUtils.java", "committedDate": "2020-04-03T18:58:54Z", "type": "commit"}, {"oid": "47b3a69883f9c734dde8558040b362830c2ca87b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/47b3a69883f9c734dde8558040b362830c2ca87b", "message": "Update OperatorUtils.java", "committedDate": "2020-04-03T19:00:13Z", "type": "commit"}, {"oid": "099ec582c55dbede5d11d8ed329b433a5d735d41", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/099ec582c55dbede5d11d8ed329b433a5d735d41", "message": "removing commented/incomplete test code (#1533)", "committedDate": "2020-04-03T21:17:54Z", "type": "commit"}, {"oid": "7d85da51c9f15d3b5e25cf4637e87f925f0b70af", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7d85da51c9f15d3b5e25cf4637e87f925f0b70af", "message": "Merge from develop to model-in-image with conflict resolution (#1531)\n\n* OWLS-80522 Domain status ordering, OWLS-80144 Ordered rolling upgrade (#1503)\r\n\r\n* Domain.getServers() should return servers in order\r\n\r\n* ordered rolling upgrade\r\n\r\n* minor test fix\r\n\r\n* new RollingHelperTest\r\n\r\n* update getSortingString to handle up to 20 digits\r\n\r\n* rolling upgrade clusters sorted by cluster names\r\n\r\n* add isAdminServer to ServerStatus\r\n\r\n* ServerStatus isAdminServer excluded from json schema\r\n\r\n* ClusterStatus sorted by sorting name\r\n\r\n* getClusters returning sorted clusters\r\n\r\n* add unit tests\r\n\r\n* handle null map\r\n\r\n* Enhance Helm chart deletion Logic in cleanup.sh Script   (#1517)\r\n\r\n* Enhance the clean up Script to support Helm 2/3\r\n\r\n* Addressed the review comment\r\n\r\nCo-authored-by: ANTARYAMI.PANIGRAHI@ORACLE.COM <anpanigr@anpanigr-1.subnet1ad2phx.devweblogicphx.oraclevcn.com>\r\n\r\n* Added test for domainQualifier=true, added cleanup for intermittent failures (#1513)\r\n\r\n* added support for helm 3.0\r\n\r\n* added check for repo\r\n\r\n* moved from monitoring ns\r\n\r\n* added the test\r\n\r\n* fixed style\r\n\r\n* added missed file\r\n\r\n* added condition for ver\r\n\r\n* rework to avoid interm failures\r\n\r\n* fixed docs\r\n\r\n* updated version of MonExp\r\n\r\n* Stub the ApiClient in tests that get connections but where this was not already done. (#1519)\r\n\r\n* Enhance the cleanup script to include deletion of few namesapce(s) created by Integration Tests (#1523)\r\n\r\nCo-authored-by: ANTARYAMI.PANIGRAHI@ORACLE.COM <anpanigr@anpanigr-1.subnet1ad2phx.devweblogicphx.oraclevcn.com>\r\n\r\n* overall doc edits (#1518)\r\n\r\n* overall doc edits\r\n\r\n* fix a mistake I created\r\n\r\n* update Kubernetes prereqs\r\n\r\n* incorporate edits from Ryan and Mark\r\n\r\n* fix typo\r\n\r\n* fix my mistake\r\n\r\n* minor fixes\r\n\r\n* Disable preserveUnknownFields\r\n\r\n* Update rest_domainqualtrue.yml\r\n\r\n* Update OperatorUtils.java\r\n\r\n* Update OperatorUtils.java\r\n\r\nCo-authored-by: Anthony Lai <anthony.lai@oracle.com>\r\nCo-authored-by: Antaryami Panigrahi <31135902+anpanigr@users.noreply.github.com>\r\nCo-authored-by: ANTARYAMI.PANIGRAHI@ORACLE.COM <anpanigr@anpanigr-1.subnet1ad2phx.devweblogicphx.oraclevcn.com>\r\nCo-authored-by: Marina Kogan <marina.kogan@oracle.com>\r\nCo-authored-by: Rosemary Marano <rosemary.marano@oracle.com>", "committedDate": "2020-04-03T22:09:08Z", "type": "commit"}, {"oid": "53e1fc3154785e97feed965076f03c3319b2be77", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/53e1fc3154785e97feed965076f03c3319b2be77", "message": "Merge remote-tracking branch 'origin/develop-mii-merge' into model-in-image", "committedDate": "2020-04-03T22:11:06Z", "type": "commit"}, {"oid": "754c924a17b69ccc8fa8357f78d4a09a0ea1373b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/754c924a17b69ccc8fa8357f78d4a09a0ea1373b", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-04-03T22:11:31Z", "type": "commit"}, {"oid": "9f2886948f25cda604186f3bd73bda120fc3e30b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9f2886948f25cda604186f3bd73bda120fc3e30b", "message": "Fix javadoc", "committedDate": "2020-04-03T22:18:00Z", "type": "commit"}, {"oid": "9c5fb5ae3b29686cb2ee3278a8f455963e1c1053", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9c5fb5ae3b29686cb2ee3278a8f455963e1c1053", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-04-04T19:16:13Z", "type": "commit"}, {"oid": "617bf2ba9544174d7b6b5500a7501c5cb15b4654", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/617bf2ba9544174d7b6b5500a7501c5cb15b4654", "message": "fix broken anchor links (#1540)", "committedDate": "2020-04-06T14:46:58Z", "type": "commit"}, {"oid": "c43d74fd57f7eed4e46fb9e678194b26ae136e18", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c43d74fd57f7eed4e46fb9e678194b26ae136e18", "message": "Updated model files to user @@SECRET macro; added sparce jms/wldf mod\u2026 (#1529)\n\n* Updated model files to user @@SECRET macro; added sparce jms/wldf model files\r\n\r\n* Added Copyright Statements\r\n\r\n* Missing CopyRight\r\n\r\n* Resync the branch and removed work-around\r\n\r\n* Addressed review comment\r\n\r\nCo-authored-by: ANTARYAMI.PANIGRAHI@ORACLE.COM <anpanigr@anpanigr-1.subnet1ad2phx.devweblogicphx.oraclevcn.com>", "committedDate": "2020-04-06T18:53:07Z", "type": "commit"}, {"oid": "00062d88fb18318622d13f29a0a02e8df19f089d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/00062d88fb18318622d13f29a0a02e8df19f089d", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-04-06T21:57:44Z", "type": "commit"}, {"oid": "a1b8fded1b8cfa38d019c524e79947eb88c1e416", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a1b8fded1b8cfa38d019c524e79947eb88c1e416", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-04-07T21:21:52Z", "type": "commit"}, {"oid": "9d51cdd4aadda47d45f614d08748d0ea6f010a65", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9d51cdd4aadda47d45f614d08748d0ea6f010a65", "message": "Correct merge of cleanup.sh", "committedDate": "2020-04-08T17:09:03Z", "type": "commit"}, {"oid": "e07c5d45d42208df3058f5e07565e8b1f35687ea", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e07c5d45d42208df3058f5e07565e8b1f35687ea", "message": "entire site doc edits (#1551)\n\n* entire site doc edits\r\n\r\n* sentence perfection", "committedDate": "2020-04-10T13:38:34Z", "type": "commit"}, {"oid": "6465266ecd02c89330ef3bb1dbd19d1e55a639ad", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6465266ecd02c89330ef3bb1dbd19d1e55a639ad", "message": "Added two more tests to cover config update by creating an image w a new tag  (#1528)\n\n* Added two more tests to cover config update by creating an image with a new tag jenkins-ignore\r\n\r\n* Changes for the comments jenkins-ignore\r\n\r\n* Changed logs jenkins-ignore", "committedDate": "2020-04-10T14:00:08Z", "type": "commit"}, {"oid": "d6e6a7655b26576a88bd6aa3320b788b1aa48b5d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d6e6a7655b26576a88bd6aa3320b788b1aa48b5d", "message": "Mii introspect test (#1530)\n\n* for mii\r\n\r\n* MII updates\r\n\r\n* add wdt configmap mount\r\n\r\n* remove image and wdt configmap first\r\n\r\n* correct script error\r\n\r\n* update model values\r\n\r\n* update properties value\r\n\r\n* template the mii mount and make it optional\r\n\r\n* Making override cm optional\r\n\r\n* revert\r\n\r\n* update the models\r\n\r\n* remove introspectMIITest.sh\r\n\r\n* update secret key\r\n\r\n* clean up\r\n\r\n* clean up workdir\r\n\r\n* Fix missing secret and cleanup\r\n\r\n* Incorporate Tom's changes\r\n\r\n* refresh from model-in-image\r\n\r\n* various changes for the PR\r\n\r\n* fix zip output\r\n\r\n* fix script error\r\n\r\n* correct archive location\r\n\r\n* push no-effect change\r\n\r\n* move WDT_DOMAIN_TYPE to yamlt\r\n\r\n* update for PR\r\n\r\n* fix test for MII\r\n\r\n* Remove custom overrides and adjust overrides test.\r\n\r\n* Update script and readme\r\n\r\n* minor fixes\r\n\r\n* hide k8s output\r\n\r\n* Fix copyright\r\n\r\n* Fix copyright\r\n\r\n* Fix copyright\r\n\r\n* Fix copyright\r\n\r\n* updated copyrights\r\n\r\n* Add copyrights\r\n\r\n* update from model-in-image\r\n\r\nCo-authored-by: Johnny Shum <cbdream99@gmail.com>\r\nCo-authored-by: Ryan Eberhard <ryan.eberhard@oracle.com>", "committedDate": "2020-04-10T14:27:34Z", "type": "commit"}, {"oid": "55ba070a8f13b5cde15c4fca9ef5273522f4b84c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/55ba070a8f13b5cde15c4fca9ef5273522f4b84c", "message": "fix log format (#1553)", "committedDate": "2020-04-10T15:05:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzM4MTg2NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397381865", "bodyText": "Okay, this is the wrong spot for this.  Reminder to myself to relocate as a property.", "author": "rjeberhard", "createdAt": "2020-03-24T18:43:20Z", "path": "operator/src/main/java/oracle/kubernetes/operator/work/Packet.java", "diffHunk": "@@ -15,6 +15,7 @@\n   private final ConcurrentMap<String, Component> components =\n       new ConcurrentHashMap<String, Component>();\n   private final ConcurrentMap<String, Object> delegate = new ConcurrentHashMap<String, Object>();\n+  private boolean isDynamicUpdate = false;", "originalCommit": "03cfb0b64df7a60893e19bb0a11fc80286351290", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQxNDEyNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397414124", "bodyText": "We can actually remove this for v1", "author": "jshum2479", "createdAt": "2020-03-24T19:40:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzM4MTg2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQxNzcyMQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397417721", "bodyText": "This is not require for v1", "author": "jshum2479", "createdAt": "2020-03-24T19:47:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzM4MTg2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQyMjQxMQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397422411", "bodyText": "Okay, I'll take care of it unless you tell me you've already done it", "author": "rjeberhard", "createdAt": "2020-03-24T19:55:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzM4MTg2NQ=="}], "type": "inlineReview"}, {"oid": "c9432fba0794d460069fe8a92d7fd57d9d207b57", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c9432fba0794d460069fe8a92d7fd57d9d207b57", "message": "doc update", "committedDate": "2020-03-24T19:42:06Z", "type": "commit"}, {"oid": "ceffd5d5373bb40ceb5cafd70dbdaa7b7b4adf7b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ceffd5d5373bb40ceb5cafd70dbdaa7b7b4adf7b", "message": "clean up sample descriptor", "committedDate": "2020-03-24T19:45:02Z", "type": "commit"}, {"oid": "a1d82b208e369ad5fa6d6b7c4c3e437141567cb4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a1d82b208e369ad5fa6d6b7c4c3e437141567cb4", "message": "Update Operator.properties", "committedDate": "2020-03-24T19:47:35Z", "type": "commit"}, {"oid": "0010e11e4d00918e9b22d2725ca7341e6da5a051", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0010e11e4d00918e9b22d2725ca7341e6da5a051", "message": "doc update", "committedDate": "2020-03-24T20:00:56Z", "type": "commit"}, {"oid": "1aeb3d5f08198fbae7f97381795e8abd80fcb25d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1aeb3d5f08198fbae7f97381795e8abd80fcb25d", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-24T20:01:06Z", "type": "commit"}, {"oid": "59e829314113917c3c9ba8d95422c8ea8f095355", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/59e829314113917c3c9ba8d95422c8ea8f095355", "message": "Removed unused field", "committedDate": "2020-03-24T20:01:26Z", "type": "commit"}, {"oid": "ed4ac9415084fda37ac6f6a3e547ae9aa7d4f3d3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ed4ac9415084fda37ac6f6a3e547ae9aa7d4f3d3", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-24T20:01:35Z", "type": "commit"}, {"oid": "5d986b3e00490d255b9e7b741c9c2128b5b71d6b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5d986b3e00490d255b9e7b741c9c2128b5b71d6b", "message": "edit new choose a model doc", "committedDate": "2020-03-24T20:09:26Z", "type": "commit"}, {"oid": "d1f8dbbe58aef46fb4fd330f1d6eca1f34ed930e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d1f8dbbe58aef46fb4fd330f1d6eca1f34ed930e", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-24T20:09:50Z", "type": "commit"}, {"oid": "bb5f89eda50a85f5d6797c0fce0bbb572344399c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bb5f89eda50a85f5d6797c0fce0bbb572344399c", "message": "Minor doc fix - address review comment\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-24T20:47:22Z", "type": "commit"}, {"oid": "1221bf5084a9305f341625e33f748e97a300b5f9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1221bf5084a9305f341625e33f748e97a300b5f9", "message": "Fix copyrights", "committedDate": "2020-03-24T20:49:02Z", "type": "commit"}, {"oid": "336d597545f5fb98aef48a856778050938888ff8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/336d597545f5fb98aef48a856778050938888ff8", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-24T20:49:12Z", "type": "commit"}, {"oid": "d6b0193d0a04eb86861339561c10ed23a4c2b80c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d6b0193d0a04eb86861339561c10ed23a4c2b80c", "message": "Add support for defaulting the MII sample's WORKDIR. Default is '/tmp/tbarnes/model-in-image-sample-work-dir'.", "committedDate": "2020-03-24T21:42:00Z", "type": "commit"}, {"oid": "ec1b69864973ac45d245b70c84cd6e03c42f4958", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ec1b69864973ac45d245b70c84cd6e03c42f4958", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-24T21:42:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ4MjQyMw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397482423", "bodyText": "@vanajamukkara @tbarnes-us @jshum2479 @mriccell @ddsharpe @markxnelson Obviously, we've all been reviewing doc, code, and scripts, but I'm thinking that the tests need a lot more attention.  There are only two tests here (since one is commented out).  I don't think we can release without substantially more tests.  I knew that we were going to rely on some amount of manual testing -- in hindsight, that may be an incorrect choice, since there needs to be more here.", "author": "rjeberhard", "createdAt": "2020-03-24T21:48:54Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/ItModelInImage.java", "diffHunk": "@@ -0,0 +1,227 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.", "originalCommit": "336d597545f5fb98aef48a856778050938888ff8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQzMDkyMg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r399430922", "bodyText": "Resolving.  Being addressed.", "author": "tbarnes-us", "createdAt": "2020-03-27T17:34:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ4MjQyMw=="}], "type": "inlineReview"}, {"oid": "57d73bf8e73f68a0456c3b9276612a10b5f4eeac", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/57d73bf8e73f68a0456c3b9276612a10b5f4eeac", "message": "doc update", "committedDate": "2020-03-24T22:22:16Z", "type": "commit"}, {"oid": "c6061ede98790cc8840ae8df78838db67cd2a027", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c6061ede98790cc8840ae8df78838db67cd2a027", "message": "sample update", "committedDate": "2020-03-24T22:45:26Z", "type": "commit"}, {"oid": "9d4477d1cc26b7250c0a0a5896980bc4d7ce8910", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9d4477d1cc26b7250c0a0a5896980bc4d7ce8910", "message": "doc update", "committedDate": "2020-03-24T22:59:48Z", "type": "commit"}, {"oid": "58c7fc3a1f4162deaa6eaee61088ffc0da343aab", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/58c7fc3a1f4162deaa6eaee61088ffc0da343aab", "message": "doc update", "committedDate": "2020-03-24T23:05:09Z", "type": "commit"}, {"oid": "118777b9d469e2fef8c236ea8758afa6b02acdec", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/118777b9d469e2fef8c236ea8758afa6b02acdec", "message": "fix for MII sample script opss_wallet_util.sh", "committedDate": "2020-03-24T23:10:22Z", "type": "commit"}, {"oid": "e8545d44c6f9f72c593185be785016cf9a23c9c4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e8545d44c6f9f72c593185be785016cf9a23c9c4", "message": "remove mention of helm 2.x syntax from MII sample", "committedDate": "2020-03-24T23:17:16Z", "type": "commit"}, {"oid": "23820baeef6d6e27baa6bfbb5cf63c99ec89eb0f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/23820baeef6d6e27baa6bfbb5cf63c99ec89eb0f", "message": "doc update", "committedDate": "2020-03-24T23:21:05Z", "type": "commit"}, {"oid": "3b90b11f5ae67cb0e5903df4120ed6a783f3a167", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3b90b11f5ae67cb0e5903df4120ed6a783f3a167", "message": "doc update", "committedDate": "2020-03-24T23:31:34Z", "type": "commit"}, {"oid": "70e95ea5023a69212536acdc08858d364801079d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/70e95ea5023a69212536acdc08858d364801079d", "message": "doc update", "committedDate": "2020-03-24T23:36:59Z", "type": "commit"}, {"oid": "99d7439ac29de1b07a1c0f6ba95eec359ce2355a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/99d7439ac29de1b07a1c0f6ba95eec359ce2355a", "message": "doc update", "committedDate": "2020-03-24T23:58:36Z", "type": "commit"}, {"oid": "e5649f2519cdc49c2e216ea8c4109f7ed40724dc", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e5649f2519cdc49c2e216ea8c4109f7ed40724dc", "message": "doc update", "committedDate": "2020-03-25T00:04:25Z", "type": "commit"}, {"oid": "b2a9763ed28d550f39dcce02dfb256796b1db58e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b2a9763ed28d550f39dcce02dfb256796b1db58e", "message": "doc update", "committedDate": "2020-03-25T00:06:26Z", "type": "commit"}, {"oid": "99f2f8a58a98b61787718bfe9f3960e88139acbe", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/99f2f8a58a98b61787718bfe9f3960e88139acbe", "message": "Update the wallet in the primordial domain if the rcu schema password changed", "committedDate": "2020-03-25T03:16:45Z", "type": "commit"}, {"oid": "b2b41665e85c37e19e8c09319cfb791210d477c1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b2b41665e85c37e19e8c09319cfb791210d477c1", "message": "doc update", "committedDate": "2020-03-25T04:10:51Z", "type": "commit"}, {"oid": "9cd848bfd5e26220b7e1fb87a7fba8a1f5b19262", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9cd848bfd5e26220b7e1fb87a7fba8a1f5b19262", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T04:10:59Z", "type": "commit"}, {"oid": "0fe5255d547855735b38e7cca8cf29e3ceb2086c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0fe5255d547855735b38e7cca8cf29e3ceb2086c", "message": "doc update", "committedDate": "2020-03-25T04:26:56Z", "type": "commit"}, {"oid": "6c2ac7f5b44fda06793181c2b7dbb692af7960bd", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6c2ac7f5b44fda06793181c2b7dbb692af7960bd", "message": "add error checking", "committedDate": "2020-03-25T05:01:11Z", "type": "commit"}, {"oid": "2537871e2c934f026528a2e28072f792d2c1dfc5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2537871e2c934f026528a2e28072f792d2c1dfc5", "message": "doc update", "committedDate": "2020-03-25T05:57:20Z", "type": "commit"}, {"oid": "ab17543b0b6748e49b0c4ff4b4a80505ada12e0d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ab17543b0b6748e49b0c4ff4b4a80505ada12e0d", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T05:57:39Z", "type": "commit"}, {"oid": "0e54bd8ee74d94e324fb9d3fc5f25b0d57047b12", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0e54bd8ee74d94e324fb9d3fc5f25b0d57047b12", "message": "doc update", "committedDate": "2020-03-25T06:44:00Z", "type": "commit"}, {"oid": "babb50a8da98a0cb6bed089db00fdda9f49e4516", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/babb50a8da98a0cb6bed089db00fdda9f49e4516", "message": "doc update", "committedDate": "2020-03-25T07:15:45Z", "type": "commit"}, {"oid": "932021a42bfc0fa72ba18f6c62e54f8f29feee2e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/932021a42bfc0fa72ba18f6c62e54f8f29feee2e", "message": "Checkstyle", "committedDate": "2020-03-25T11:41:05Z", "type": "commit"}, {"oid": "568041d718b6fcd25ca6440535bbbb367507829c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/568041d718b6fcd25ca6440535bbbb367507829c", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T11:41:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc5MjM3Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397792377", "bodyText": "Return value of replaceAll is ignored.", "author": "rjeberhard", "createdAt": "2020-03-25T11:44:29Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/MiiBaseTest.java", "diffHunk": "@@ -0,0 +1,119 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.kubernetes.operator;\n+\n+import java.nio.charset.Charset;\n+import java.nio.charset.StandardCharsets;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.logging.Level;\n+\n+import oracle.kubernetes.operator.utils.Domain;\n+import oracle.kubernetes.operator.utils.DomainCrd;\n+import oracle.kubernetes.operator.utils.ExecResult;\n+import oracle.kubernetes.operator.utils.LoggerHelper;\n+import oracle.kubernetes.operator.utils.TestUtils;\n+\n+public class MiiBaseTest extends BaseTest {\n+  /**\n+   * Creates a map with customized domain input attributes using suffixCount and prefix\n+   * to make the namespaces and ports unique for model in image.\n+   *\n+   * @param suffixCount unique numeric value\n+   * @param prefix      prefix for the artifact names\n+   * @return map with domain input attributes\n+   */\n+  public Map<String, Object> createModelInImageMap(\n+      int suffixCount, String prefix) {\n+    Map<String, Object> domainMap = createDomainMap(suffixCount, prefix);\n+    domainMap.put(\"domainHomeSourceType\", \"FromModel\");\n+    domainMap.put(\"domainHomeImageBase\",\n+        getWeblogicImageName() + \":\" + getWeblogicImageTag());\n+    domainMap.put(\"logHomeOnPV\", \"true\");\n+    //domainMap.put(\"wdtDomainType\", \"WLS\");\n+\n+    if (prefix != null && !prefix.trim().equals(\"\")) {\n+      domainMap.put(\"image\", prefix.toLowerCase() + \"-modelinimage-\" + suffixCount + \":latest\");\n+    } else {\n+      domainMap.put(\"image\", \"modelinimage-\" + suffixCount + \":latest\");\n+    }\n+    return domainMap;\n+  }\n+\n+  /**\n+   * Create domain using model in image.\n+   * @param domainUidPrefix domain UID prefix\n+   * @param domainNS domain namespace\n+   * @param wdtModelFile file should be under test/resouces/model-in-image dir,\n+   *                     value can be ./model.wls.yaml\n+   * @param wdtModelPropertiesFile file should be under test/resouces/model-in-image dir,\n+   *                               value can be ./model.empty.properties\n+   * @param cmFile creates configmap from this file or dir\n+   */\n+  public Domain createMiiDomainWithConfigMap(String domainUidPrefix,\n+                                             String domainNS, String wdtModelFile, String wdtModelPropertiesFile,\n+                                             String cmFile, String wdtDomainType) throws Exception {\n+    Map<String, Object> domainMap =\n+        createModelInImageMap(getNewSuffixCount(), domainUidPrefix);\n+    // config map before deploying domain crd\n+    String cmName = domainMap.get(\"domainUID\") + \"-mii-config-map\";\n+\n+    domainMap.put(\"namespace\", domainNS);\n+    domainMap.put(\"wdtModelFile\", wdtModelFile);\n+    domainMap.put(\"wdtModelPropertiesFile\", wdtModelPropertiesFile);\n+    domainMap.put(\"wdtDomainType\", wdtDomainType);\n+\n+    domainMap.put(\"miiConfigMap\", cmName);\n+    domainMap.put(\"miiConfigMapFileOrDir\", cmFile);\n+\n+    Domain domain = TestUtils.createDomain(domainMap);\n+    // domain = new Domain(domainMap, true, false);\n+    domain.verifyDomainCreated();\n+    return domain;\n+  }\n+\n+  /**\n+   * Modify the domain yaml to add reference to config map and change domain-level restart version.\n+   * @param cmName Config map name\n+   * @param domain the domain\n+   * @throws Exception on failure\n+   */\n+  public void modifyDomainYamlWithNewConfigMapAndDomainRestartVersion(\n+      String cmName, Domain domain)\n+      throws Exception {\n+    String originalYaml =\n+        getUserProjectsDir()\n+            + \"/weblogic-domains/\"\n+            + domain.getDomainUid()\n+            + \"/domain.yaml\";\n+\n+    // Modify the original domain yaml to include restartVersion in admin server node\n+    DomainCrd crd = new DomainCrd(originalYaml);\n+    Map<String, String> objectNode = new HashMap<>();\n+    objectNode.put(\"restartVersion\", \"v1.1\");\n+    crd.addObjectNodeToDomain(objectNode);\n+    String modYaml = crd.getYamlTree();\n+    LoggerHelper.getLocal().log(Level.INFO, modYaml);\n+\n+    //change config map name to new config map\n+    modYaml.replaceAll((String)domain.getDomainMap().get(\"miiConfigMap\"), cmName);", "originalCommit": "568041d718b6fcd25ca6440535bbbb367507829c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQzMjI3MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r399432270", "bodyText": "@jshum2479 ?", "author": "tbarnes-us", "createdAt": "2020-03-27T17:36:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc5MjM3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM5ODM0Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r402398346", "bodyText": "@vanajamukkara  It should replace the modYaml", "author": "jshum2479", "createdAt": "2020-04-02T15:20:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc5MjM3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUyNDg0Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r402524843", "bodyText": "It's not doing that presently since Java Strings are immutable.  The return value has the modified String", "author": "rjeberhard", "createdAt": "2020-04-02T18:29:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc5MjM3Nw=="}], "type": "inlineReview"}, {"oid": "d2c5250c4901dd2b4c892cb9a29714a0a3dfc4f3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d2c5250c4901dd2b4c892cb9a29714a0a3dfc4f3", "message": "Update restarting.md", "committedDate": "2020-03-25T11:50:50Z", "type": "commit"}, {"oid": "9190d5ed90dfddfb6d2576d5c6ca0628e28d409e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9190d5ed90dfddfb6d2576d5c6ca0628e28d409e", "message": "Update usage.md", "committedDate": "2020-03-25T11:54:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgwNzg1Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397807852", "bodyText": "What about other data that is input to the domain home generation?  @jshum2479, remind me how this will be used.", "author": "rjeberhard", "createdAt": "2020-03-25T12:14:04Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/ConfigMapHelper.java", "diffHunk": "@@ -137,6 +144,17 @@ static String extractFilename(String line) {\n     return fname;\n   }\n \n+  /**\n+   * getModelInImageSpecHash returns the hash for the fields that should be compared for changes.\n+   *\n+   * @return int hash value of the fields\n+   */\n+  public static int getModelInImageSpecHash(String imageName) {\n+    return new HashCodeBuilder(17, 37)\n+        .append(imageName)", "originalCommit": "9190d5ed90dfddfb6d2576d5c6ca0628e28d409e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgzMDk2Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397830962", "bodyText": "The restartVersion and introspectVersion has it own label in the pod, so the operator is already taking care of that.", "author": "jshum2479", "createdAt": "2020-03-25T12:55:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgwNzg1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgwODMxOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397808318", "bodyText": "Odd... duplicated code lines", "author": "rjeberhard", "createdAt": "2020-03-25T12:14:54Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/ConfigMapHelper.java", "diffHunk": "@@ -380,6 +400,27 @@ public NextAction apply(Packet packet) {\n         ScanCache.INSTANCE.registerScan(\n             info.getNamespace(), info.getDomainUid(), new Scan(wlsDomainConfig, new DateTime()));\n         packet.put(ProcessingConstants.DOMAIN_TOPOLOGY, wlsDomainConfig);\n+        if (miiDomainZipHash != null) {\n+          packet.put(ProcessingConstants.DOMAIN_HASH, miiDomainZipHash);\n+        }\n+        if (miiModelSecretsHash != null) {\n+          packet.put(ProcessingConstants.SECRETS_HASH, miiModelSecretsHash);\n+        }\n+        String domainRestartVersion = info.getDomain().getRestartVersion();\n+        String domainIntrospectVersion = info.getDomain().getIntrospectVersion();\n+        int modelInImageSpecHash =  ConfigMapHelper.getModelInImageSpecHash(info.getDomain().getSpec().getImage());\n+        if (domainRestartVersion != null) {\n+          packet.put(ProcessingConstants.DOMAIN_RESTART_VERSION, domainRestartVersion);\n+          data.put(ProcessingConstants.DOMAIN_RESTART_VERSION, domainRestartVersion);", "originalCommit": "9190d5ed90dfddfb6d2576d5c6ca0628e28d409e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgwODQ1NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397808455", "bodyText": "Same... very odd.  Duplicated line.", "author": "rjeberhard", "createdAt": "2020-03-25T12:15:08Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/ConfigMapHelper.java", "diffHunk": "@@ -380,6 +400,27 @@ public NextAction apply(Packet packet) {\n         ScanCache.INSTANCE.registerScan(\n             info.getNamespace(), info.getDomainUid(), new Scan(wlsDomainConfig, new DateTime()));\n         packet.put(ProcessingConstants.DOMAIN_TOPOLOGY, wlsDomainConfig);\n+        if (miiDomainZipHash != null) {\n+          packet.put(ProcessingConstants.DOMAIN_HASH, miiDomainZipHash);\n+        }\n+        if (miiModelSecretsHash != null) {\n+          packet.put(ProcessingConstants.SECRETS_HASH, miiModelSecretsHash);\n+        }\n+        String domainRestartVersion = info.getDomain().getRestartVersion();\n+        String domainIntrospectVersion = info.getDomain().getIntrospectVersion();\n+        int modelInImageSpecHash =  ConfigMapHelper.getModelInImageSpecHash(info.getDomain().getSpec().getImage());\n+        if (domainRestartVersion != null) {\n+          packet.put(ProcessingConstants.DOMAIN_RESTART_VERSION, domainRestartVersion);\n+          data.put(ProcessingConstants.DOMAIN_RESTART_VERSION, domainRestartVersion);\n+        }\n+        if (domainIntrospectVersion != null) {\n+          packet.put(ProcessingConstants.DOMAIN_INTROSPECT_VERSION, domainIntrospectVersion);\n+          data.put(ProcessingConstants.DOMAIN_INTROSPECT_VERSION, domainIntrospectVersion);", "originalCommit": "9190d5ed90dfddfb6d2576d5c6ca0628e28d409e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgwODc2OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397808769", "bodyText": "less chance for NPE if you reverse the equals check and start with the constant.", "author": "rjeberhard", "createdAt": "2020-03-25T12:15:45Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/ConfigMapHelper.java", "diffHunk": "@@ -380,6 +400,27 @@ public NextAction apply(Packet packet) {\n         ScanCache.INSTANCE.registerScan(\n             info.getNamespace(), info.getDomainUid(), new Scan(wlsDomainConfig, new DateTime()));\n         packet.put(ProcessingConstants.DOMAIN_TOPOLOGY, wlsDomainConfig);\n+        if (miiDomainZipHash != null) {\n+          packet.put(ProcessingConstants.DOMAIN_HASH, miiDomainZipHash);\n+        }\n+        if (miiModelSecretsHash != null) {\n+          packet.put(ProcessingConstants.SECRETS_HASH, miiModelSecretsHash);\n+        }\n+        String domainRestartVersion = info.getDomain().getRestartVersion();\n+        String domainIntrospectVersion = info.getDomain().getIntrospectVersion();\n+        int modelInImageSpecHash =  ConfigMapHelper.getModelInImageSpecHash(info.getDomain().getSpec().getImage());\n+        if (domainRestartVersion != null) {\n+          packet.put(ProcessingConstants.DOMAIN_RESTART_VERSION, domainRestartVersion);\n+          data.put(ProcessingConstants.DOMAIN_RESTART_VERSION, domainRestartVersion);\n+        }\n+        if (domainIntrospectVersion != null) {\n+          packet.put(ProcessingConstants.DOMAIN_INTROSPECT_VERSION, domainIntrospectVersion);\n+          data.put(ProcessingConstants.DOMAIN_INTROSPECT_VERSION, domainIntrospectVersion);\n+        }\n+        if (info.getDomain().getDomainHomeSourceType().equals(\"FromModel\")) {", "originalCommit": "9190d5ed90dfddfb6d2576d5c6ca0628e28d409e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgwODkyOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397808928", "bodyText": "I wonder if this is some sort of merge problem?", "author": "rjeberhard", "createdAt": "2020-03-25T12:16:02Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/ConfigMapHelper.java", "diffHunk": "@@ -380,6 +400,27 @@ public NextAction apply(Packet packet) {\n         ScanCache.INSTANCE.registerScan(\n             info.getNamespace(), info.getDomainUid(), new Scan(wlsDomainConfig, new DateTime()));\n         packet.put(ProcessingConstants.DOMAIN_TOPOLOGY, wlsDomainConfig);\n+        if (miiDomainZipHash != null) {\n+          packet.put(ProcessingConstants.DOMAIN_HASH, miiDomainZipHash);\n+        }\n+        if (miiModelSecretsHash != null) {\n+          packet.put(ProcessingConstants.SECRETS_HASH, miiModelSecretsHash);\n+        }\n+        String domainRestartVersion = info.getDomain().getRestartVersion();\n+        String domainIntrospectVersion = info.getDomain().getIntrospectVersion();\n+        int modelInImageSpecHash =  ConfigMapHelper.getModelInImageSpecHash(info.getDomain().getSpec().getImage());\n+        if (domainRestartVersion != null) {\n+          packet.put(ProcessingConstants.DOMAIN_RESTART_VERSION, domainRestartVersion);\n+          data.put(ProcessingConstants.DOMAIN_RESTART_VERSION, domainRestartVersion);\n+        }\n+        if (domainIntrospectVersion != null) {\n+          packet.put(ProcessingConstants.DOMAIN_INTROSPECT_VERSION, domainIntrospectVersion);\n+          data.put(ProcessingConstants.DOMAIN_INTROSPECT_VERSION, domainIntrospectVersion);\n+        }\n+        if (info.getDomain().getDomainHomeSourceType().equals(\"FromModel\")) {\n+          packet.put(ProcessingConstants.DOMAIN_INPUTS_HASH, String.valueOf(modelInImageSpecHash));\n+          data.put(ProcessingConstants.DOMAIN_INPUTS_HASH, String.valueOf(modelInImageSpecHash));", "originalCommit": "9190d5ed90dfddfb6d2576d5c6ca0628e28d409e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8d569874b6d6dbcdfc52f0e7729f2b2d8c810e0e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8d569874b6d6dbcdfc52f0e7729f2b2d8c810e0e", "message": "Code review", "committedDate": "2020-03-25T12:25:05Z", "type": "commit"}, {"oid": "ef274f02858327b733f9c1b91bd0bbb9dea57ed0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ef274f02858327b733f9c1b91bd0bbb9dea57ed0", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T12:26:05Z", "type": "commit"}, {"oid": "11e9b3fd00e2913ac9e68a80695bd4c44e16831d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/11e9b3fd00e2913ac9e68a80695bd4c44e16831d", "message": "remove unnecessary comment", "committedDate": "2020-03-25T12:58:14Z", "type": "commit"}, {"oid": "6399abe246ba77a04812a2904f8491d72e7e5a31", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6399abe246ba77a04812a2904f8491d72e7e5a31", "message": "minor edit", "committedDate": "2020-03-25T13:13:17Z", "type": "commit"}, {"oid": "5d355613cda9674ce06a0cf9724342ea6905398b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5d355613cda9674ce06a0cf9724342ea6905398b", "message": "minor edit", "committedDate": "2020-03-25T13:14:40Z", "type": "commit"}, {"oid": "3747945367d8af0743083b3c7193ff454b004c20", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3747945367d8af0743083b3c7193ff454b004c20", "message": "Minor doc changes\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-25T13:43:15Z", "type": "commit"}, {"oid": "13a015a6ef0ca43b3197b3f9591423e47371cfde", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/13a015a6ef0ca43b3197b3f9591423e47371cfde", "message": "Revert one doc change\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-25T13:46:07Z", "type": "commit"}, {"oid": "d705d039bb6d9dc20b378d87d0c26ada93b90d40", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d705d039bb6d9dc20b378d87d0c26ada93b90d40", "message": "Javadoc", "committedDate": "2020-03-25T14:00:37Z", "type": "commit"}, {"oid": "cb9639063de38b4455da62833c82b8b8bb07a094", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cb9639063de38b4455da62833c82b8b8bb07a094", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T14:00:43Z", "type": "commit"}, {"oid": "b45bfbf2ef6d7f1808106b6e065a480d634a3fb6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b45bfbf2ef6d7f1808106b6e065a480d634a3fb6", "message": "Adding weblogic credentials change test (#1493)\n\n* Adding testCredentialsChange\r\n\r\n* fix import\r\n\r\n* Add utility method to replace runtimeEncryptionSecret\r\n\r\n* modify the secret\r\n\r\n* fix formatting\r\n\r\n* fix formatting\r\n\r\n* remove unwanted code\r\n\r\n* cleanup\r\n\r\n* cleanup\r\n\r\n* cleanup\r\n\r\n* fix indendation", "committedDate": "2020-03-25T14:21:46Z", "type": "commit"}, {"oid": "8de8af31194f5ac690c7c28e77357acfd7632491", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8de8af31194f5ac690c7c28e77357acfd7632491", "message": "doc updates", "committedDate": "2020-03-25T15:06:16Z", "type": "commit"}, {"oid": "7057f19954bd59eff7aa7b04a498f41d72ad9618", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7057f19954bd59eff7aa7b04a498f41d72ad9618", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T15:06:27Z", "type": "commit"}, {"oid": "e86d407e248d39af2757f7f77ca6280830ec5bd2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e86d407e248d39af2757f7f77ca6280830ec5bd2", "message": "doc update", "committedDate": "2020-03-25T15:20:36Z", "type": "commit"}, {"oid": "341facd920a2ca32e678c1ea3681586becce33d0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/341facd920a2ca32e678c1ea3681586becce33d0", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T15:20:45Z", "type": "commit"}, {"oid": "99d9dc72b0bf631e0659b532036af45069958ad1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/99d9dc72b0bf631e0659b532036af45069958ad1", "message": "doc update", "committedDate": "2020-03-25T15:46:08Z", "type": "commit"}, {"oid": "ceb783b877b98aaa50d9a5946860dbeef9468a68", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ceb783b877b98aaa50d9a5946860dbeef9468a68", "message": "Minor doc fix\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-25T15:54:09Z", "type": "commit"}, {"oid": "5aed198290f7fbda117af521d1a5d712be660fd4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5aed198290f7fbda117af521d1a5d712be660fd4", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-25T15:55:06Z", "type": "commit"}, {"oid": "0f2f0c8bef89c7a1b0ab438d0699098b74f61725", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0f2f0c8bef89c7a1b0ab438d0699098b74f61725", "message": "add real blank lines between appending variable files", "committedDate": "2020-03-20T00:14:55Z", "type": "commit"}, {"oid": "8c6345720d6cbc7473049a36d178782ad5c6409f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8c6345720d6cbc7473049a36d178782ad5c6409f", "message": "change wdt secret key to password", "committedDate": "2020-03-20T04:00:57Z", "type": "commit"}, {"oid": "4a653acd9b75e15444ff7896b720d52427bd35ed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4a653acd9b75e15444ff7896b720d52427bd35ed", "message": "Model in image main hugo doc - first check-in.", "committedDate": "2020-03-20T05:58:15Z", "type": "commit"}, {"oid": "dc785d88a3a645d6f161033897c8598c068d071c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dc785d88a3a645d6f161033897c8598c068d071c", "message": "Remove rcu_admin_password - not required at this point", "committedDate": "2020-03-20T16:18:28Z", "type": "commit"}, {"oid": "c9b2199b179f4b07e4234c7fb0293e03450860d8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c9b2199b179f4b07e4234c7fb0293e03450860d8", "message": "MII sample updates", "committedDate": "2020-03-20T17:13:30Z", "type": "commit"}, {"oid": "53668f2f8c4d4f45c2b3e528d5d9bce9a9603f1b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/53668f2f8c4d4f45c2b3e528d5d9bce9a9603f1b", "message": "MII sample updates", "committedDate": "2020-03-20T17:15:22Z", "type": "commit"}, {"oid": "d35a88641d150f9a58391b060826ed158972a7fe", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d35a88641d150f9a58391b060826ed158972a7fe", "message": "Update copyright\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-20T17:25:23Z", "type": "commit"}, {"oid": "bf9d03a39564c020304b6776b218ad8490b1a4b7", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bf9d03a39564c020304b6776b218ad8490b1a4b7", "message": "Add introspectorJobActiveDeadlineSeconds in toString(), hashCode() and equals() calculation\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-20T17:26:49Z", "type": "commit"}, {"oid": "9e3850fe4c9fdd1ed296c878d460ce61405194b8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9e3850fe4c9fdd1ed296c878d460ce61405194b8", "message": "MII Sample README update.", "committedDate": "2020-03-20T17:27:08Z", "type": "commit"}, {"oid": "c33c404569e7bedceda28609b98efc0de4dcee84", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c33c404569e7bedceda28609b98efc0de4dcee84", "message": "MII Sample - remove mention of rcu admin password in sample doc.", "committedDate": "2020-03-20T17:34:22Z", "type": "commit"}, {"oid": "d091a973b87019cb62db6e69edb28afaa276bfd7", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d091a973b87019cb62db6e69edb28afaa276bfd7", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>\n\nConflicts:\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/build.sh\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/build_download.sh\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/build_image_base.sh\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/build_image_model.sh\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/build_model.sh\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/create_configmap.sh\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/create_domain.sh\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/create_secret.sh\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/run_domain.sh", "committedDate": "2020-03-20T17:36:30Z", "type": "commit"}, {"oid": "81623b1d513bbbfa1f2ca588a8d757daf2e38202", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/81623b1d513bbbfa1f2ca588a8d757daf2e38202", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-20T17:37:15Z", "type": "commit"}, {"oid": "a14f1a4621ff9576c1aa03437dbd84dcd0e466db", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a14f1a4621ff9576c1aa03437dbd84dcd0e466db", "message": "first pass edits", "committedDate": "2020-03-20T18:45:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg1MDE2Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r395850163", "bodyText": "In the old code, if logHomeEnabled is not set, and the domain is on PV, the logHomeEnabled will be set to true. This is missing in the new code. Is this intentional.  The doc seems to indicate that the old logic remains; so the doc and the code does not match.", "author": "doxiao", "createdAt": "2020-03-20T19:32:34Z", "path": "operator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainSpec.java", "diffHunk": "@@ -401,8 +437,8 @@ private String validatePath(String s) {\n    * @since 2.0\n    * @return log home enabled\n    */\n-  boolean isLogHomeEnabled() {\n-    return Optional.ofNullable(logHomeEnabled).orElse(!isDomainHomeInImage());", "originalCommit": "81623b1d513bbbfa1f2ca588a8d757daf2e38202", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcwMDAxNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396700015", "bodyText": "@jshum2479 Please follow up.  Make sure LogHomeEnabled defaults to true for PV, and false for FromModel and Image.", "author": "tbarnes-us", "createdAt": "2020-03-23T19:23:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg1MDE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc0NTI1OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396745258", "bodyText": "The logic is in Domain.java isLogHomeEnabled", "author": "jshum2479", "createdAt": "2020-03-23T20:44:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg1MDE2Mw=="}], "type": "inlineReview"}, {"oid": "923c3709b8cb29f88c114e749917bddaae827ff7", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/923c3709b8cb29f88c114e749917bddaae827ff7", "message": "Remove wdtEncryptionSecret from the schema and code", "committedDate": "2020-03-20T19:34:41Z", "type": "commit"}, {"oid": "8d859f89b9a45ef9ff086fae9497948acae75879", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8d859f89b9a45ef9ff086fae9497948acae75879", "message": "fix two broken links", "committedDate": "2020-03-20T20:08:32Z", "type": "commit"}, {"oid": "8e50ab70fb2de1b488b7c28bf3dc6652fe392447", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8e50ab70fb2de1b488b7c28bf3dc6652fe392447", "message": "Merge pull request #1483 from oracle/rmarano\n\nuser guide edits", "committedDate": "2020-03-20T20:20:05Z", "type": "commit"}, {"oid": "a8bc12b12102add4c7bf908d569ea6958a169d2f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a8bc12b12102add4c7bf908d569ea6958a169d2f", "message": "Clean up after WDT encryption secret related code is removed\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-20T21:14:59Z", "type": "commit"}, {"oid": "732cd7e018e3169ab65449ffbbcc49fb56d549cc", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/732cd7e018e3169ab65449ffbbcc49fb56d549cc", "message": "Fix doc\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-20T22:07:38Z", "type": "commit"}, {"oid": "7b33c660bbf6c903063c94f308a0d5d695613964", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7b33c660bbf6c903063c94f308a0d5d695613964", "message": "Fix doc links\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-20T22:17:28Z", "type": "commit"}, {"oid": "9f3fec42ac32ffcb4e124c7c035a6c036c8f0cec", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9f3fec42ac32ffcb4e124c7c035a6c036c8f0cec", "message": "remove wdt encryption passphrase logic from introspector job scripts since it no longer supported in the schema", "committedDate": "2020-03-20T22:50:18Z", "type": "commit"}, {"oid": "033420a40ef6839eb917300a8a5649cecbe8d0ef", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/033420a40ef6839eb917300a8a5649cecbe8d0ef", "message": "update MII doc to mention wdt encryption isn't supported", "committedDate": "2020-03-20T22:50:47Z", "type": "commit"}, {"oid": "faf27ab7657f36ca0b64d10f2a9f36b8ab8236d9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/faf27ab7657f36ca0b64d10f2a9f36b8ab8236d9", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-20T22:51:01Z", "type": "commit"}, {"oid": "1d1cb525a3b0f433b396bc85e7375c2a9216ad84", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1d1cb525a3b0f433b396bc85e7375c2a9216ad84", "message": "update error message in modelInImage.sh", "committedDate": "2020-03-20T23:15:20Z", "type": "commit"}, {"oid": "f7a1c52c69582021aa843a9dd5fd64090be18f46", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f7a1c52c69582021aa843a9dd5fd64090be18f46", "message": "Enable updateRCUSchemaPassword and add special env variables for macro expansion in modelInImage.sh script", "committedDate": "2020-03-21T00:49:03Z", "type": "commit"}, {"oid": "7f767a29ea18e90d32a4567d95a4544ab90a85b5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7f767a29ea18e90d32a4567d95a4544ab90a85b5", "message": "Add @@SECRET and @@ENV support to MII sample/doc.", "committedDate": "2020-03-22T02:50:45Z", "type": "commit"}, {"oid": "e61ac20f625272af1a6d44dbd593b1ba2ac932e9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e61ac20f625272af1a6d44dbd593b1ba2ac932e9", "message": "Add utility methods for model in image tests (#1481)\n\n* adding mii utility methods\r\n\r\n* adding mii utility methods\r\n\r\n* adding wdtDomainType and use of properties for weblogic base image", "committedDate": "2020-03-22T23:44:52Z", "type": "commit"}, {"oid": "486fe1fd4d891b187606d5fb3b5bc10a735091fc", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/486fe1fd4d891b187606d5fb3b5bc10a735091fc", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-23T12:14:07Z", "type": "commit"}, {"oid": "9e90fa01b816193532fbe25d54d75378892afa22", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9e90fa01b816193532fbe25d54d75378892afa22", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-23T13:30:58Z", "type": "commit"}, {"oid": "c2394548fa2ecd3ba6fb497f5f838a7296df1df5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c2394548fa2ecd3ba6fb497f5f838a7296df1df5", "message": "minor doc update", "committedDate": "2020-03-23T16:16:37Z", "type": "commit"}, {"oid": "3abf4b6ce7ae5a15cbdee9926c6644032c75f1af", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3abf4b6ce7ae5a15cbdee9926c6644032c75f1af", "message": "doc update", "committedDate": "2020-03-23T16:52:43Z", "type": "commit"}, {"oid": "9f15c10d5bf9e631d8abcd9f1689d8d70476bae4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9f15c10d5bf9e631d8abcd9f1689d8d70476bae4", "message": "doc update", "committedDate": "2020-03-23T16:58:10Z", "type": "commit"}, {"oid": "c37dd7d18852b339cdff65934d21ae883540b925", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c37dd7d18852b339cdff65934d21ae883540b925", "message": "doc update", "committedDate": "2020-03-23T17:05:10Z", "type": "commit"}, {"oid": "24abe59d2fab3b421b07fe3bd38181514ec2b12c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/24abe59d2fab3b421b07fe3bd38181514ec2b12c", "message": "doc update", "committedDate": "2020-03-23T17:31:42Z", "type": "commit"}, {"oid": "3f46823be21e32c4b54a101d5590aeb40dbcdb15", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3f46823be21e32c4b54a101d5590aeb40dbcdb15", "message": "doc update", "committedDate": "2020-03-23T17:41:55Z", "type": "commit"}, {"oid": "8e2cd577c5946a45fad51e663e41f9e5f0bd9905", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8e2cd577c5946a45fad51e663e41f9e5f0bd9905", "message": "add script comment", "committedDate": "2020-03-23T19:17:45Z", "type": "commit"}, {"oid": "8b42d4a5a8538feebae7f9446eb324995d3c49a3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8b42d4a5a8538feebae7f9446eb324995d3c49a3", "message": "Add introspectorJobActiveDeadlinSeconds to the samples\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-23T19:57:30Z", "type": "commit"}, {"oid": "2b01c3744a72e136023f270c573a225024a3a128", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2b01c3744a72e136023f270c573a225024a3a128", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-23T20:02:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcyODQwMg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396728402", "bodyText": "Do we have PV directories for model-in-image tests?", "author": "rjeberhard", "createdAt": "2020-03-23T20:12:31Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/ItModelInImage.java", "diffHunk": "@@ -0,0 +1,227 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.kubernetes.operator;\n+\n+import java.util.ArrayList;\n+import java.util.Map;\n+import java.util.logging.Level;\n+\n+import oracle.kubernetes.operator.utils.Domain;\n+import oracle.kubernetes.operator.utils.LoggerHelper;\n+import oracle.kubernetes.operator.utils.Operator;\n+import oracle.kubernetes.operator.utils.Operator.RestCertType;\n+import oracle.kubernetes.operator.utils.TestUtils;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Assumptions;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Simple JUnit test file used for testing Model in Image.\n+ *\n+ * <p>This test is used for creating domain using model in image.\n+ */\n+\n+public class ItModelInImage extends MiiBaseTest {\n+  private static Operator operator;\n+  private static String domainNS;\n+  private static String testClassName;\n+  private static StringBuffer namespaceList;\n+\n+  /**\n+   * This method gets called only once before any of the test methods are executed. It does the\n+   * initialization of the integration test properties defined in OperatorIT.properties and setting\n+   * the resultRoot, pvRoot and projectRoot attributes.\n+   *\n+   * @throws Exception exception\n+   */\n+  @BeforeAll\n+  public static void staticPrepare() throws Exception {\n+    namespaceList = new StringBuffer();\n+    testClassName = new Object() {\n+    }.getClass().getEnclosingClass().getSimpleName();\n+    // initialize test properties and create the directories\n+    initialize(APP_PROPS_FILE, testClassName);\n+  }\n+\n+  /**\n+   * This method gets called before every test. It creates the result/pv root directories\n+   * for the test. Creates the operator and domain if its not running.\n+   *\n+   * @throws Exception exception if result/pv/operator/domain creation fails\n+   */\n+  @BeforeEach\n+  public void prepare() throws Exception {\n+\n+    createResultAndPvDirs(testClassName);", "originalCommit": "2b01c3744a72e136023f270c573a225024a3a128", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM1NzY3MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r402357670", "bodyText": "@anpanigr @vanajamukkara This question is for the QA team.", "author": "tbarnes-us", "createdAt": "2020-04-02T14:29:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcyODQwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM4OTgzNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r402389837", "bodyText": "logs are written on PV", "author": "vanajamukkara", "createdAt": "2020-04-02T15:09:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcyODQwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjczMzE4NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396733184", "bodyText": "Why is @Test commented out?", "author": "rjeberhard", "createdAt": "2020-03-23T20:22:12Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/ItModelInImage.java", "diffHunk": "@@ -0,0 +1,227 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.kubernetes.operator;\n+\n+import java.util.ArrayList;\n+import java.util.Map;\n+import java.util.logging.Level;\n+\n+import oracle.kubernetes.operator.utils.Domain;\n+import oracle.kubernetes.operator.utils.LoggerHelper;\n+import oracle.kubernetes.operator.utils.Operator;\n+import oracle.kubernetes.operator.utils.Operator.RestCertType;\n+import oracle.kubernetes.operator.utils.TestUtils;\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Assumptions;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+\n+/**\n+ * Simple JUnit test file used for testing Model in Image.\n+ *\n+ * <p>This test is used for creating domain using model in image.\n+ */\n+\n+public class ItModelInImage extends MiiBaseTest {\n+  private static Operator operator;\n+  private static String domainNS;\n+  private static String testClassName;\n+  private static StringBuffer namespaceList;\n+\n+  /**\n+   * This method gets called only once before any of the test methods are executed. It does the\n+   * initialization of the integration test properties defined in OperatorIT.properties and setting\n+   * the resultRoot, pvRoot and projectRoot attributes.\n+   *\n+   * @throws Exception exception\n+   */\n+  @BeforeAll\n+  public static void staticPrepare() throws Exception {\n+    namespaceList = new StringBuffer();\n+    testClassName = new Object() {\n+    }.getClass().getEnclosingClass().getSimpleName();\n+    // initialize test properties and create the directories\n+    initialize(APP_PROPS_FILE, testClassName);\n+  }\n+\n+  /**\n+   * This method gets called before every test. It creates the result/pv root directories\n+   * for the test. Creates the operator and domain if its not running.\n+   *\n+   * @throws Exception exception if result/pv/operator/domain creation fails\n+   */\n+  @BeforeEach\n+  public void prepare() throws Exception {\n+\n+    createResultAndPvDirs(testClassName);\n+\n+    // create operator1\n+    if (operator == null) {\n+      Map<String, Object> operatorMap = createOperatorMap(getNewSuffixCount(),\n+          true, testClassName);\n+      operator = TestUtils.createOperator(operatorMap, RestCertType.SELF_SIGNED);\n+      Assertions.assertNotNull(operator);\n+      domainNS = ((ArrayList<String>) operatorMap.get(\"domainNamespaces\")).get(0);\n+      namespaceList.append((String)operatorMap.get(\"namespace\"));\n+      namespaceList.append(\" \").append(domainNS);\n+    }\n+  }\n+\n+  /**\n+   * Releases k8s cluster lease, archives result, pv directories.\n+   *\n+   * @throws Exception exception\n+   */\n+  @AfterAll\n+  public static void staticUnPrepare() throws Exception {\n+    tearDown(new Object() {\n+    }.getClass().getEnclosingClass().getSimpleName(), namespaceList.toString());\n+\n+    LoggerHelper.getLocal().info(\"SUCCESS\");\n+  }\n+\n+  /**\n+   * Create a domain using model in image with model yaml and model properties\n+   * file in the image. Deploy the domain, verify the running domain has\n+   * the correct configuration as given in the image.\n+   *\n+   * @throws Exception exception\n+   */\n+  @Test\n+  public void testMiiWithNoConfigMap() throws Exception {\n+    Assumptions.assumeTrue(QUICKTEST);\n+    String testMethodName = new Object() {\n+    }.getClass().getEnclosingMethod().getName();\n+    logTestBegin(testMethodName);\n+    LoggerHelper.getLocal().log(Level.INFO,\n+        \"Creating Domain & waiting for the script to complete execution\");\n+    Domain domain = null;\n+    boolean testCompletedSuccessfully = false;\n+    try {\n+      Map<String, Object> domainMap =\n+          createModelInImageMap(getNewSuffixCount(), testClassName);\n+      domainMap.put(\"namespace\", domainNS);\n+      domainMap.put(\"wdtModelFile\", \"./model.wls.yaml\");\n+      domainMap.put(\"wdtModelPropertiesFile\", \"./model.properties\");\n+\n+      domain = TestUtils.createDomain(domainMap);\n+      // domain = new Domain(domainMap, true, false);\n+      domain.verifyDomainCreated();\n+      testCompletedSuccessfully = true;\n+    } finally {\n+      if (domain != null && (JENKINS || testCompletedSuccessfully)) {\n+        TestUtils.deleteWeblogicDomainResources(domain.getDomainUid());\n+      }\n+    }\n+\n+    LoggerHelper.getLocal().log(Level.INFO, \"SUCCESS - \" + testMethodName);\n+  }\n+\n+  /**\n+   * Create a domain using model in image and having configmap in the domain.yaml\n+   * before deploying the domain. After deploying the domain crd, create a new\n+   * config map and update the domain crd to new config map and change domain\n+   * restartVersion to reload the model, generate new config and initiate a\n+   * rolling restart.\n+   * @throws Exception exception\n+   */\n+  @Test\n+  public void testMiiWithConfigMapBothBeforeAndAfterDeployingDomain() throws Exception {\n+    Assumptions.assumeTrue(QUICKTEST);\n+    String testMethodName = new Object() {\n+    }.getClass().getEnclosingMethod().getName();\n+    logTestBegin(testMethodName);\n+    LoggerHelper.getLocal().log(Level.INFO,\n+        \"Creating Domain & waiting for the script to complete execution\");\n+    Domain domain = null;\n+    boolean testCompletedSuccessfully = false;\n+    try {\n+\n+      domain = createMIIDomainWithConfigMap(testClassName, domainNS, \"./model.wls.yaml\",\n+          \"./model.empty.properties\", \"./model.properties\", \"WLS\");\n+      Map<String, Object> domainMap = domain.getDomainMap();\n+      //ToDo: access MS using port given in the configmap props\n+\n+      // config map after deploying domain crd\n+      String cmName = domainMap.get(\"domainUID\") + \"-mii-config-map2\";\n+      String cmFile = getResultDir() + \"/samples/model-in-image/model.cm.properties\";\n+      TestUtils.createConfigMap(cmName, cmFile, domainNS,\n+          \" weblogic.domainUID=\" + domainMap.get(\"domainUID\"));\n+\n+      // update domain yaml with new config map, restartVersion and\n+      // apply the domain yaml, verify domain restarted\n+      modifyDomainYamlWithNewConfigMapAndDomainRestartVersion(\n+          cmName, domain);\n+      LoggerHelper.getLocal().log(Level.INFO, \"Verifying if the domain is restarted\");\n+      domain.verifyDomainRestarted();\n+      //ToDo: access MS using port given in the new configmap props\n+      testCompletedSuccessfully = true;\n+    } finally {\n+      if (domain != null && (JENKINS || testCompletedSuccessfully)) {\n+        TestUtils.deleteWeblogicDomainResources(domain.getDomainUid());\n+      }\n+    }\n+\n+    LoggerHelper.getLocal().log(Level.INFO, \"SUCCESS - \" + testMethodName);\n+  }\n+\n+  /**\n+   * Negative test. overridesConfigMap should fail with model in image domain.\n+   * Create a domain using model in image and deploy the domain.\n+   * After deploying the domain, update domain crd with overrides configmap and\n+   * apply the crd.\n+   * Verify that the domain deployment fails with proper error in the operator log.\n+   *\n+   * @throws Exception exception\n+   */\n+  //@Test", "originalCommit": "2b01c3744a72e136023f270c573a225024a3a128", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyNjYzNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r399426635", "bodyText": "@vanajamukkara This one is for you.", "author": "tbarnes-us", "createdAt": "2020-03-27T17:27:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjczMzE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM5NDY5NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r402394695", "bodyText": "The test was not fully developed and tested.", "author": "vanajamukkara", "createdAt": "2020-04-02T15:15:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjczMzE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUyNjA1Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r402526053", "bodyText": "Let's remove it then", "author": "rjeberhard", "createdAt": "2020-04-02T18:31:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjczMzE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNTY1Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r402535653", "bodyText": "ok", "author": "vanajamukkara", "createdAt": "2020-04-02T18:47:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjczMzE4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjczNjYwMw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396736603", "bodyText": "What will be the content of this config map?", "author": "rjeberhard", "createdAt": "2020-03-23T20:28:49Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/TestUtils.java", "diffHunk": "@@ -1980,4 +1980,28 @@ public static ExecResult kubectlpatch(String domainUid, String domainNS, String\n     return exec(cmd, true);\n   }\n \n+  /**\n+   * create configmap in the given namespace. Also creates label.\n+   * @param cmName\n+   * @param fileOrDirPath\n+   * @param namespace\n+   * @throws Exception\n+   */\n+  public static void createConfigMap(String cmName, String fileOrDirPath,", "originalCommit": "2b01c3744a72e136023f270c573a225024a3a128", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM1ODU2NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r402358565", "bodyText": "@vanajamukkara ?", "author": "tbarnes-us", "createdAt": "2020-04-02T14:30:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjczNjYwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM5MDg5MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r402390890", "bodyText": "creates config map from the file or files given as input", "author": "vanajamukkara", "createdAt": "2020-04-02T15:10:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjczNjYwMw=="}], "type": "inlineReview"}, {"oid": "2fba221ce914a4203a00686a377dd8e9ba04b2ee", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2fba221ce914a4203a00686a377dd8e9ba04b2ee", "message": "first draft update of 'choosing a model' doc", "committedDate": "2020-03-23T20:48:12Z", "type": "commit"}, {"oid": "fb00e30046ed7f08cd6847a6810ebe7cae7e3086", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fb00e30046ed7f08cd6847a6810ebe7cae7e3086", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-23T20:48:32Z", "type": "commit"}, {"oid": "89880074649148f0d832e0b96163913ef9baf5f9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/89880074649148f0d832e0b96163913ef9baf5f9", "message": "first draft update of 'choosing a model' doc", "committedDate": "2020-03-23T20:52:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NzQ1Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396757456", "bodyText": "Don't use getAdminServerSpec().  This could be info.getDomain().getSpec().getRestartVersion();", "author": "rjeberhard", "createdAt": "2020-03-23T21:07:54Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/ConfigMapHelper.java", "diffHunk": "@@ -380,6 +401,27 @@ public NextAction apply(Packet packet) {\n         ScanCache.INSTANCE.registerScan(\n             info.getNamespace(), info.getDomainUid(), new Scan(wlsDomainConfig, new DateTime()));\n         packet.put(ProcessingConstants.DOMAIN_TOPOLOGY, wlsDomainConfig);\n+        if (miiDomainZipHash != null) {\n+          packet.put(ProcessingConstants.DOMAIN_HASH, miiDomainZipHash);\n+        }\n+        if (miiModelSecretsHash != null) {\n+          packet.put(ProcessingConstants.SECRETS_HASH, miiModelSecretsHash);\n+        }\n+        String domainRestartVersion = info.getDomain().getAdminServerSpec().getDomainRestartVersion();", "originalCommit": "89880074649148f0d832e0b96163913ef9baf5f9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc2ODkzNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396768934", "bodyText": "There is no getRestartVersion in the spec.The restartVersion is in the server spec.", "author": "jshum2479", "createdAt": "2020-03-23T21:30:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc3NTIyNg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396775226", "bodyText": "I checked... you are incorrect ;).  It's in the base class.", "author": "rjeberhard", "createdAt": "2020-03-23T21:44:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI1NjYzMg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397256632", "bodyText": "Okay, I figured out what I'd missed before.  The field restartVersion is on base config because you can have different values at the domain level, cluster, or on a specific server.  But introspectVersion is only at top-level.  I have a fix for what I'm thinking.", "author": "rjeberhard", "createdAt": "2020-03-24T15:45:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQxNDkwNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r397414907", "bodyText": "Thanks", "author": "jshum2479", "createdAt": "2020-03-24T19:41:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQzMDIzNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r399430237", "bodyText": "@rjeberhard Please resolve this comment if/when the fix is in place.", "author": "tbarnes-us", "createdAt": "2020-03-27T17:33:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NzQ1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1ODE2Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396758167", "bodyText": "I don't understand this logic.", "author": "rjeberhard", "createdAt": "2020-03-23T21:09:18Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/ConfigMapHelper.java", "diffHunk": "@@ -388,9 +430,29 @@ public NextAction apply(Packet packet) {\n             new SitConfigMapContext(\n                 this, info.getDomainUid(), getOperatorNamespace(), info.getNamespace(), data);\n \n+        // Cannot short circuit here\n+        //\n+        if (updateDomainResult != null) {\n+          LOGGER.fine(\"ConfigMapHelper:updateDomainResult \" + updateDomainResult);\n+          if (updateDomainResult.equals(\"0\")) {\n+            LOGGER.fine(\"ConfigMapHelper apply: short circuit finished online update\");\n+            packet.setDynamicUpdate(true);", "originalCommit": "89880074649148f0d832e0b96163913ef9baf5f9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc2ODA1MQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r396768051", "bodyText": "Removed the code, they are for online update", "author": "jshum2479", "createdAt": "2020-03-23T21:29:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1ODE2Nw=="}], "type": "inlineReview"}, {"oid": "7967bdeabeb5e6379e3b3b14603944f0cd5adacb", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7967bdeabeb5e6379e3b3b14603944f0cd5adacb", "message": "Remove updateDomainResult - dynamic update code", "committedDate": "2020-03-23T21:33:09Z", "type": "commit"}, {"oid": "fcad13b588791c61f93fbce6f9fada5f22dab504", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fcad13b588791c61f93fbce6f9fada5f22dab504", "message": "doc updated", "committedDate": "2020-03-23T21:54:32Z", "type": "commit"}, {"oid": "90de5ca4e8776724d76f719279e18af952281e3a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/90de5ca4e8776724d76f719279e18af952281e3a", "message": "Doc update.", "committedDate": "2020-03-23T22:31:57Z", "type": "commit"}, {"oid": "d59250308b0c502ac901eae564e357db349aeaa9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d59250308b0c502ac901eae564e357db349aeaa9", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-24T14:06:12Z", "type": "commit"}, {"oid": "9b9f67cbe454cc7e40b96eace6eb778b9314384a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9b9f67cbe454cc7e40b96eace6eb778b9314384a", "message": "doc edits from Ryan", "committedDate": "2020-03-24T15:11:29Z", "type": "commit"}, {"oid": "2e5b2dcb5e9f465838d2517a6d6d0227ff4db9fb", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2e5b2dcb5e9f465838d2517a6d6d0227ff4db9fb", "message": "clean up sample descriptor", "committedDate": "2020-03-24T15:12:23Z", "type": "commit"}, {"oid": "79d85e037ba57344e1f53e6038c66bf8b99a59c3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/79d85e037ba57344e1f53e6038c66bf8b99a59c3", "message": "Remove mii section from samples domain-template.yaml (#1491)\n\n* undo changes in domain-template.yaml\r\n\r\n* adding mii config file\r\n\r\n* resolve comment merge", "committedDate": "2020-03-24T15:21:22Z", "type": "commit"}, {"oid": "88a5e69e8ae21f94232ea3bd12592ea17c36f7f0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/88a5e69e8ae21f94232ea3bd12592ea17c36f7f0", "message": "Move introspectVersion to spec level only", "committedDate": "2020-03-24T15:51:19Z", "type": "commit"}, {"oid": "07a63758aae716d0ce2868676ddb7dc6ffe18c76", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/07a63758aae716d0ce2868676ddb7dc6ffe18c76", "message": "Update _index.md", "committedDate": "2020-03-24T16:24:50Z", "type": "commit"}, {"oid": "cd8bad94b5633d925fb66a46537ce977be1187a6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cd8bad94b5633d925fb66a46537ce977be1187a6", "message": "Fix inadvertent change", "committedDate": "2020-03-24T16:25:52Z", "type": "commit"}, {"oid": "6086c18bbe83dde3aa5723952e42c8f7bb3ff8ae", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6086c18bbe83dde3aa5723952e42c8f7bb3ff8ae", "message": "Update sample doc for introspectorJobActiveDeadlineSeconds and runtimeEncryptionSecret\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-24T17:04:20Z", "type": "commit"}, {"oid": "03cfb0b64df7a60893e19bb0a11fc80286351290", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/03cfb0b64df7a60893e19bb0a11fc80286351290", "message": "More sample doc update\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-24T17:24:27Z", "type": "commit"}, {"oid": "eae6a8f7792fa5a7709c8aa17f96347b395fde63", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/eae6a8f7792fa5a7709c8aa17f96347b395fde63", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-10T15:09:11Z", "type": "commit"}, {"oid": "7bca3faa35908174b6ecd1b44c4490ae4558bc86", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7bca3faa35908174b6ecd1b44c4490ae4558bc86", "message": "Merge remote-tracking branch 'origin' into model-in-image-security", "committedDate": "2020-03-10T15:16:31Z", "type": "commit"}, {"oid": "94e50d5034a5652740da7d8dcacd13fd15b37dda", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/94e50d5034a5652740da7d8dcacd13fd15b37dda", "message": "minor README update", "committedDate": "2020-03-10T16:16:42Z", "type": "commit"}, {"oid": "3d96e2c9d85739b2b903fd65bccc4deeb60705f8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3d96e2c9d85739b2b903fd65bccc4deeb60705f8", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-10T16:16:50Z", "type": "commit"}, {"oid": "f20bb4358ac6a6ccb184736494efe0776faac74a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f20bb4358ac6a6ccb184736494efe0776faac74a", "message": "hugo FAQ link fix", "committedDate": "2020-03-10T16:46:42Z", "type": "commit"}, {"oid": "868e59f7cac44d0e8044b0ca9fdd560ecc0564a0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/868e59f7cac44d0e8044b0ca9fdd560ecc0564a0", "message": "refactor save wallet script 1.", "committedDate": "2020-03-10T17:29:09Z", "type": "commit"}, {"oid": "80c723f617c027038c30c386143809724819e65b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/80c723f617c027038c30c386143809724819e65b", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-10T17:33:53Z", "type": "commit"}, {"oid": "efb2e52edf199097c796454700cf1a0168ff1d26", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/efb2e52edf199097c796454700cf1a0168ff1d26", "message": "Merge remote-tracking branch 'origin' into model-in-image-security", "committedDate": "2020-03-10T18:52:14Z", "type": "commit"}, {"oid": "5cb3d3e60925ac57a19e261d94fe840640efeab7", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5cb3d3e60925ac57a19e261d94fe840640efeab7", "message": "Model in image scripts fixes to work on MacOS (#1465)\n\n* Make scripts run on MacOS\r\n\r\n* Remove unnintentional adds", "committedDate": "2020-03-11T16:12:05Z", "type": "commit"}, {"oid": "bd634702758455c61a0d270db8c180046f67263d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bd634702758455c61a0d270db8c180046f67263d", "message": "rename key for secrets", "committedDate": "2020-03-11T16:52:03Z", "type": "commit"}, {"oid": "7eb8af52e3a7b51c93e9e18188085636466cd1c6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7eb8af52e3a7b51c93e9e18188085636466cd1c6", "message": "MII Sample: remove vestigal nginx", "committedDate": "2020-03-11T17:08:10Z", "type": "commit"}, {"oid": "9334288370df68780bd1e0badfd7644f6b9155d5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9334288370df68780bd1e0badfd7644f6b9155d5", "message": "Fix template and script error", "committedDate": "2020-03-11T17:32:28Z", "type": "commit"}, {"oid": "1bf56886250800a1cc848a7090d0d349200f3baf", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1bf56886250800a1cc848a7090d0d349200f3baf", "message": "Edit due to key changes", "committedDate": "2020-03-11T17:54:58Z", "type": "commit"}, {"oid": "b4699fe637afec679c5f5ed965cc1fc18eaaab9d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b4699fe637afec679c5f5ed965cc1fc18eaaab9d", "message": "placeholders for MII", "committedDate": "2020-03-11T18:07:06Z", "type": "commit"}, {"oid": "f39edaed58303086cee85b3162406b35b9ff74f5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f39edaed58303086cee85b3162406b35b9ff74f5", "message": "Merge branch 'model-in-image' of\nhttps://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-11T18:08:07Z", "type": "commit"}, {"oid": "25d2b6148d1c46fd3b133c0e6e89f40efc1c96bb", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/25d2b6148d1c46fd3b133c0e6e89f40efc1c96bb", "message": "sample fodder for rosemary", "committedDate": "2020-03-11T18:24:11Z", "type": "commit"}, {"oid": "bdfcd300beb0273a7da46f25300d9bbd0d013bc3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bdfcd300beb0273a7da46f25300d9bbd0d013bc3", "message": "Add for debugging merged model", "committedDate": "2020-03-11T19:32:27Z", "type": "commit"}, {"oid": "6c5ab17ffa3e2e53546703aa169980d445bbb6ed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6c5ab17ffa3e2e53546703aa169980d445bbb6ed", "message": "first pass on MII sample content", "committedDate": "2020-03-11T20:42:08Z", "type": "commit"}, {"oid": "ad81cc3e2d33dbeb6466e36c0b07b44568e43155", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ad81cc3e2d33dbeb6466e36c0b07b44568e43155", "message": "name reconciliation", "committedDate": "2020-03-11T20:59:14Z", "type": "commit"}, {"oid": "ce6e505202959bab1e078472e3e5f80fc6359b0d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ce6e505202959bab1e078472e3e5f80fc6359b0d", "message": "update from model-in-image", "committedDate": "2020-03-11T23:00:39Z", "type": "commit"}, {"oid": "12de24541d951e47f7bd57f777f7d32f0f983064", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/12de24541d951e47f7bd57f777f7d32f0f983064", "message": "revert accidental changes", "committedDate": "2020-03-11T23:04:28Z", "type": "commit"}, {"oid": "fc37556398e7da1a5aa1943992d474fa74397e14", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fc37556398e7da1a5aa1943992d474fa74397e14", "message": "mii sample doc edits", "committedDate": "2020-03-11T23:22:06Z", "type": "commit"}, {"oid": "3a0e3e3b9a2029c9af64c02cd47b0abcef05759e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3a0e3e3b9a2029c9af64c02cd47b0abcef05759e", "message": "second round edits", "committedDate": "2020-03-12T11:59:58Z", "type": "commit"}, {"oid": "e4a355279f145d0a520807c4ec5095937efcf68c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e4a355279f145d0a520807c4ec5095937efcf68c", "message": "Update script", "committedDate": "2020-03-12T13:05:14Z", "type": "commit"}, {"oid": "fba4e2731774002650dd936dec9986c787106eda", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fba4e2731774002650dd936dec9986c787106eda", "message": "Add validation, volume and volume mount for runtime encryption secret\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-12T19:03:09Z", "type": "commit"}, {"oid": "0c2bfa85bc72fae074d5ad71bb4ca1c72bd0b8d9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0c2bfa85bc72fae074d5ad71bb4ca1c72bd0b8d9", "message": "Merge branch 'model-in-image-security' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image-security", "committedDate": "2020-03-12T19:04:16Z", "type": "commit"}, {"oid": "d775cc40b97ae95033fd45aacbec0dc5358ad7e4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d775cc40b97ae95033fd45aacbec0dc5358ad7e4", "message": "Merge remote-tracking branch 'origin' into owls-80253-secret-validation", "committedDate": "2020-03-12T19:05:58Z", "type": "commit"}, {"oid": "96890a18f70945c25bb3609366ce2a5bd3b21c5f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/96890a18f70945c25bb3609366ce2a5bd3b21c5f", "message": "Merge branch 'model-in-image-security' into owls-80253-secret-validation\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>\n\nConflicts:\n\tkubernetes/crd/domain-crd.yaml\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/README.md\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/k8s-domain.yaml.template\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/model1.10.properties\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/run_domain.sh\n\toperator/src/main/java/oracle/kubernetes/operator/helpers/JobStepContext.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/model/Domain.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/model/Model.java\n\toperator/src/main/resources/scripts/startServer.sh", "committedDate": "2020-03-12T21:15:07Z", "type": "commit"}, {"oid": "33a6ec97cce2fbcb7ce5abf295dee72e4abbb75e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/33a6ec97cce2fbcb7ce5abf295dee72e4abbb75e", "message": "Fix an issue after merge with model-in-image-security\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-12T22:17:13Z", "type": "commit"}, {"oid": "a40edee4201a17de9c8114bac7c3bee37ab66b3c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a40edee4201a17de9c8114bac7c3bee37ab66b3c", "message": "Add part of the changes for runtime secret validation and mount\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-12T23:54:08Z", "type": "commit"}, {"oid": "7143974f715c01e8c343a0cdaf9b0d33afbfd5bf", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7143974f715c01e8c343a0cdaf9b0d33afbfd5bf", "message": "Second part of the change\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-13T00:29:31Z", "type": "commit"}, {"oid": "8842d00ccf3f636d780d03780c9073380cbd1af3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8842d00ccf3f636d780d03780c9073380cbd1af3", "message": "Change the sample\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-13T00:37:22Z", "type": "commit"}, {"oid": "c743072c3d513dffa6505bc11334c7179ec39f38", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c743072c3d513dffa6505bc11334c7179ec39f38", "message": "Modify the sample to use the right secret\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-13T00:52:38Z", "type": "commit"}, {"oid": "a9cc1ca8ed9829ada33b3c3eadde7385a2125217", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a9cc1ca8ed9829ada33b3c3eadde7385a2125217", "message": "Fix a typo\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-13T01:07:11Z", "type": "commit"}, {"oid": "3ef8312068a86fe1372cfc2678de86401061290a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3ef8312068a86fe1372cfc2678de86401061290a", "message": "Minor fix\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-13T01:21:50Z", "type": "commit"}, {"oid": "6dc738329a8d1db51e6fd2acd3d3710ffcbbdaff", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6dc738329a8d1db51e6fd2acd3d3710ffcbbdaff", "message": "Fix generated files\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-13T01:25:49Z", "type": "commit"}, {"oid": "f950f052fffe8b1c5b12ae2f40957f042221f248", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f950f052fffe8b1c5b12ae2f40957f042221f248", "message": "pickup changes from model-in-image-security", "committedDate": "2020-03-13T19:19:27Z", "type": "commit"}, {"oid": "8e717d81b9411a230232482e9f5c8513180f62aa", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8e717d81b9411a230232482e9f5c8513180f62aa", "message": "Fixing error message", "committedDate": "2020-03-13T19:23:48Z", "type": "commit"}, {"oid": "362936223cdc0cab435cf98f87996ea7cea320b6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/362936223cdc0cab435cf98f87996ea7cea320b6", "message": "Fix TBD", "committedDate": "2020-03-13T19:39:08Z", "type": "commit"}, {"oid": "d08be4160e1d4ca3c6493b44c1f9ee71ff3905f2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d08be4160e1d4ca3c6493b44c1f9ee71ff3905f2", "message": "remove comments", "committedDate": "2020-03-13T19:46:49Z", "type": "commit"}, {"oid": "0cf6e43a0fa6b6aac30e1228a2b1fc49376e9a7a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0cf6e43a0fa6b6aac30e1228a2b1fc49376e9a7a", "message": "mark README.md as outdated (will remove later)", "committedDate": "2020-03-13T19:50:02Z", "type": "commit"}, {"oid": "dc81bc984bf7cb24fb6f9c3df0451dd2639c3016", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dc81bc984bf7cb24fb6f9c3df0451dd2639c3016", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-13T19:50:17Z", "type": "commit"}, {"oid": "a1cfb7017a659a1f68c96fc857ef91b6d3620be5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a1cfb7017a659a1f68c96fc857ef91b6d3620be5", "message": "final round edits on sample doc", "committedDate": "2020-03-13T20:05:25Z", "type": "commit"}, {"oid": "8f2ecc4778e4049a86e2e2ab97a4b15bcdb1cb66", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8f2ecc4778e4049a86e2e2ab97a4b15bcdb1cb66", "message": "Add validation checks for OPSS secret\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-13T20:09:06Z", "type": "commit"}, {"oid": "7bcd010604d578a0f5745dd463b9891dc633493c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7bcd010604d578a0f5745dd463b9891dc633493c", "message": "Merge remote-tracking branch 'origin/model-in-image' into owls-80253-secret-valid-mount\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>\n\nConflicts:\n\tkubernetes/crd/domain-crd.yaml\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/README.md\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/k8s-domain.yaml.template\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/model1.10.properties\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/run_domain.sh\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/save_ewallet.sh\n\toperator/src/main/java/oracle/kubernetes/operator/helpers/JobStepContext.java\n\toperator/src/main/java/oracle/kubernetes/operator/helpers/StepContextConstants.java\n\toperator/src/main/java/oracle/kubernetes/operator/logging/MessageKeys.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/DomainConfigurator.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/model/Domain.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainCommonConfigurator.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/model/Model.java\n\toperator/src/main/resources/Operator.properties\n\toperator/src/main/resources/scripts/introspectDomain.sh\n\toperator/src/main/resources/scripts/modelInImage.sh\n\toperator/src/main/resources/scripts/startServer.sh\n\toperator/src/test/java/oracle/kubernetes/weblogic/domain/model/DomainValidationTest.java", "committedDate": "2020-03-13T22:18:22Z", "type": "commit"}, {"oid": "d511984a04d171d0e1fa608b43d217e9c00bf660", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d511984a04d171d0e1fa608b43d217e9c00bf660", "message": "Minor javadoc fix\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-15T20:40:29Z", "type": "commit"}, {"oid": "a684fb89742b0847e1140bf29fd1a2334e06c65f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a684fb89742b0847e1140bf29fd1a2334e06c65f", "message": "refacto startServer.sh", "committedDate": "2020-03-16T13:36:43Z", "type": "commit"}, {"oid": "158aee8ad6c6bd85780e6506cb0d0ab79796fe89", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/158aee8ad6c6bd85780e6506cb0d0ab79796fe89", "message": "update script and doc", "committedDate": "2020-03-16T14:21:11Z", "type": "commit"}, {"oid": "3da91c47e7c050f3bb603fec49f976cd96c0e542", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3da91c47e7c050f3bb603fec49f976cd96c0e542", "message": "More javadoc changes\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-16T15:40:22Z", "type": "commit"}, {"oid": "a87ecb3a36cef20234c5919af2cbccfb7117c35c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a87ecb3a36cef20234c5919af2cbccfb7117c35c", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-16T15:42:19Z", "type": "commit"}, {"oid": "0a8f4312160f1fc4224c40ee06a57b8eb23ddd00", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0a8f4312160f1fc4224c40ee06a57b8eb23ddd00", "message": "MII sample doc update", "committedDate": "2020-03-16T15:52:00Z", "type": "commit"}, {"oid": "01413620bb1645cd0e6a2ecae06bb54da6684c5c", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/01413620bb1645cd0e6a2ecae06bb54da6684c5c", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-16T15:52:18Z", "type": "commit"}, {"oid": "9f08f23931eb2197ea641af11f9d2d81d06e2e75", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9f08f23931eb2197ea641af11f9d2d81d06e2e75", "message": "Fix a merge issue that caused duplicate configuration\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-16T16:44:31Z", "type": "commit"}, {"oid": "90a22c316db347c01feef74220f7a4c7eef42d8d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/90a22c316db347c01feef74220f7a4c7eef42d8d", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-16T16:46:31Z", "type": "commit"}, {"oid": "5521af7dac2b19f7b57f5ffd7a815f9944732d18", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5521af7dac2b19f7b57f5ffd7a815f9944732d18", "message": "MII sample script update", "committedDate": "2020-03-16T17:23:09Z", "type": "commit"}, {"oid": "663273f47103576537d3897f48654ed9fbdd4976", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/663273f47103576537d3897f48654ed9fbdd4976", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-16T17:23:20Z", "type": "commit"}, {"oid": "be9bfd06356a29a54eec419a518b4227a5ef6c25", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/be9bfd06356a29a54eec419a518b4227a5ef6c25", "message": "MII sample script update", "committedDate": "2020-03-16T18:04:57Z", "type": "commit"}, {"oid": "b614f510b69abedae394ea3d798b5eff49678260", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b614f510b69abedae394ea3d798b5eff49678260", "message": "update doc for saving wallet and remote docker registry instructions", "committedDate": "2020-03-16T18:14:14Z", "type": "commit"}, {"oid": "afc8237619c260379570cd0f13ba1aeacb39c08f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/afc8237619c260379570cd0f13ba1aeacb39c08f", "message": "update doc for script name changes", "committedDate": "2020-03-16T19:09:34Z", "type": "commit"}, {"oid": "ccd0e8265d27685a4811fc43c852921c9d7bc232", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ccd0e8265d27685a4811fc43c852921c9d7bc232", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-16T20:17:05Z", "type": "commit"}, {"oid": "7723a2bc9657b642359eb430b454a5f7add06146", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7723a2bc9657b642359eb430b454a5f7add06146", "message": "Add unit test cases\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-16T20:36:26Z", "type": "commit"}, {"oid": "dba57283287cc0a3d6223c3aa83ab0cc7dc1c42f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dba57283287cc0a3d6223c3aa83ab0cc7dc1c42f", "message": "Shorten suffix names", "committedDate": "2020-03-16T21:13:14Z", "type": "commit"}, {"oid": "accdc77f5798cb7910d0f630fa6dfb3d46cced83", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/accdc77f5798cb7910d0f630fa6dfb3d46cced83", "message": "Merge remote-tracking branch 'origin/model-in-image' into owls-80353-opss-secret-valid\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>\n\nConflicts:\n\tdocs/domains/Domain.json\n\tdocs/domains/Domain.md\n\tdocs/domains/index.html\n\tkubernetes/crd/domain-crd.yaml\n\tkubernetes/samples/scripts/create-weblogic-domain/model-in-image/run_domain.sh\n\toperator/src/main/java/oracle/kubernetes/operator/helpers/JobStepContext.java\n\toperator/src/main/java/oracle/kubernetes/operator/helpers/SecretType.java\n\toperator/src/main/java/oracle/kubernetes/operator/logging/MessageKeys.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/DomainConfigurator.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/model/Domain.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainCommonConfigurator.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainValidationMessages.java\n\toperator/src/main/java/oracle/kubernetes/weblogic/domain/model/Model.java\n\toperator/src/main/resources/Operator.properties\n\toperator/src/main/resources/scripts/startServer.sh\n\toperator/src/test/java/oracle/kubernetes/weblogic/domain/model/DomainValidationTest.java", "committedDate": "2020-03-16T21:18:09Z", "type": "commit"}, {"oid": "c416e143779352a2f833e694bb4429d781e9ed77", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c416e143779352a2f833e694bb4429d781e9ed77", "message": "Fix merge issues\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-16T21:30:04Z", "type": "commit"}, {"oid": "105f114f91f56119e91d8239ac62a3bdd1940db9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/105f114f91f56119e91d8239ac62a3bdd1940db9", "message": "Fix duplicate lines\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-16T21:38:55Z", "type": "commit"}, {"oid": "fd660e80d41615a2d29568284ba1873de2a28759", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fd660e80d41615a2d29568284ba1873de2a28759", "message": "Fix generated files\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-16T21:40:50Z", "type": "commit"}, {"oid": "d7f78aa70622797ffc2b6f936c8af3b4583c1cc3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d7f78aa70622797ffc2b6f936c8af3b4583c1cc3", "message": "Merge remote-tracking branch 'origin/model-in-image' into owls-80353-opss-secret-valid", "committedDate": "2020-03-16T21:46:40Z", "type": "commit"}, {"oid": "aa32b4fbefb5cb8573460a58480037e5ab7bd02d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/aa32b4fbefb5cb8573460a58480037e5ab7bd02d", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-16T22:55:23Z", "type": "commit"}, {"oid": "9f84626bb34a870cd98eafbc0c2d5b98ed3339a2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9f84626bb34a870cd98eafbc0c2d5b98ed3339a2", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-16T22:55:32Z", "type": "commit"}, {"oid": "e85adceadcaab4a7b9c776ebdf93c134a8aff788", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e85adceadcaab4a7b9c776ebdf93c134a8aff788", "message": "refactor and remove prepending the domain name to configmap/secrets volumes", "committedDate": "2020-03-16T23:47:45Z", "type": "commit"}, {"oid": "9fa73acf8f56c9cbef43cb24b82e89744b1ee71b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9fa73acf8f56c9cbef43cb24b82e89744b1ee71b", "message": "Merge remote-tracking branch 'origin/model-in-image' into owls-80353-opss-secret-valid", "committedDate": "2020-03-17T00:39:34Z", "type": "commit"}, {"oid": "04f7a877083a67979b120a7f200d074d39dc4f54", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/04f7a877083a67979b120a7f200d074d39dc4f54", "message": "add back the mounting for existing introspect configmap source for life-cycle update", "committedDate": "2020-03-17T04:26:16Z", "type": "commit"}, {"oid": "fac7ea60344ac6b5ded8512e51e0615570aa9296", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fac7ea60344ac6b5ded8512e51e0615570aa9296", "message": "minor edit", "committedDate": "2020-03-17T13:08:35Z", "type": "commit"}, {"oid": "22e41079723f4ed53bcf29b02ea9031173ad69f9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/22e41079723f4ed53bcf29b02ea9031173ad69f9", "message": "Merge remote-tracking branch 'origin/model-in-image' into owls-80353-opss-secret-valid", "committedDate": "2020-03-17T13:46:17Z", "type": "commit"}, {"oid": "5a8080c80cee1aa80f63a4e99d1fcb9ebf12e002", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5a8080c80cee1aa80f63a4e99d1fcb9ebf12e002", "message": "additional edits", "committedDate": "2020-03-17T15:41:04Z", "type": "commit"}, {"oid": "f8170bb5a868d7beaacf7c75002810004b7200a8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f8170bb5a868d7beaacf7c75002810004b7200a8", "message": "add traefix instructions for console", "committedDate": "2020-03-17T16:54:03Z", "type": "commit"}, {"oid": "9d1ee013a027fcc0b1bd0f82f0cb46688b451395", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9d1ee013a027fcc0b1bd0f82f0cb46688b451395", "message": "Update doc for introspectorJobActiveDeadlineSeconds\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-17T19:16:17Z", "type": "commit"}, {"oid": "d623aeb1477ef91f41bdcd47a52fa47f6460105d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d623aeb1477ef91f41bdcd47a52fa47f6460105d", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-17T19:28:30Z", "type": "commit"}, {"oid": "edb7f68c724fe3ef0f440d9dc3579c59b2db4602", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/edb7f68c724fe3ef0f440d9dc3579c59b2db4602", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-17T19:33:52Z", "type": "commit"}, {"oid": "65111e65854c485135132c4c06a5578ca1d4a579", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/65111e65854c485135132c4c06a5578ca1d4a579", "message": "update doc", "committedDate": "2020-03-17T21:19:02Z", "type": "commit"}, {"oid": "81c860658b3b7db64fa3b1e8eeca311588060956", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/81c860658b3b7db64fa3b1e8eeca311588060956", "message": "QA infra change to support new secret (#1474)\n\nCo-authored-by: ANTARYAMI.PANIGRAHI@ORACLE.COM <anpanigr@anpanigr-1.subnet1ad2phx.devweblogicphx.oraclevcn.com>", "committedDate": "2020-03-17T21:29:33Z", "type": "commit"}, {"oid": "a809d0cf3ea50e32786988e4c974f62ca5cb0c01", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a809d0cf3ea50e32786988e4c974f62ca5cb0c01", "message": "update doc", "committedDate": "2020-03-17T21:57:52Z", "type": "commit"}, {"oid": "c0c74a0784d280eb221cb586df8a9c55e0029fd4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c0c74a0784d280eb221cb586df8a9c55e0029fd4", "message": "Fix a typo\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-18T13:25:46Z", "type": "commit"}, {"oid": "656371faf0ed6c121979a3f1c8844edd4562f892", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/656371faf0ed6c121979a3f1c8844edd4562f892", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-18T13:27:30Z", "type": "commit"}, {"oid": "0a4458c82bc89eee061a986dade32c7f828cb3e0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0a4458c82bc89eee061a986dade32c7f828cb3e0", "message": "Use 12.2.1.4 everywhere possible (#1475)\n\n* Use 12.2.1.4 everywhere possible\r\n\r\n* Back to soasuite:12.2.1.3\r\n\r\n* Correct some 12.2.1.3 vs. 12.2.1.4 confusion\r\n\r\n* Correct word choice", "committedDate": "2020-03-18T16:33:51Z", "type": "commit"}, {"oid": "46d956270c8c7947f04f654ede7e0aa8b082a2e8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/46d956270c8c7947f04f654ede7e0aa8b082a2e8", "message": "Merge remote-tracking branch 'origin/develop' into model-in-image", "committedDate": "2020-03-18T18:16:05Z", "type": "commit"}, {"oid": "fe8550a34d987e4cb976118113dc7bf5705a2bf9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fe8550a34d987e4cb976118113dc7bf5705a2bf9", "message": "fix to use different separator, '.' is a valid key name", "committedDate": "2020-03-18T18:37:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYwMjMwNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r394602307", "bodyText": "I may have missed something, but this comparison looks wrong to me.\n\nThe configMapDomainName is the string value of the hashcode of the image name in the domain spec. See line #83 in this class, line#400 and #410 in ConfigMapHelper, and the getModelInImageSpecHash() method in DomainPresenceInfo. But we are comparing it with the current image name itself.\nPotentially we may add more domain spec attributes into getModelInImageSpecHash() calculation. Once we do that, comparing a hashCode of a set of attributes with one attribute (or its hashcode) alone may not be correct.\n\nMaybe we want to use the hashcode of the current spec, instead the image name, to do the comparison(?).", "author": "doxiao", "createdAt": "2020-03-18T19:54:09Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/JobHelper.java", "diffHunk": "@@ -66,13 +66,58 @@ private static boolean runIntrospector(Packet packet, DomainPresenceInfo info) {\n     LOGGER.fine(\"runIntrospector topology: \" + topology);\n     LOGGER.fine(\"runningServersCount: \" + runningServersCount(info));\n     LOGGER.fine(\"creatingServers: \" + creatingServers(info));\n-    return topology == null || isBringingUpNewDomain(info);\n+    return topology == null || isBringingUpNewDomain(info) || isModelInImageUpdate(packet, info);\n   }\n \n   private static boolean isBringingUpNewDomain(DomainPresenceInfo info) {\n     return runningServersCount(info) == 0 && creatingServers(info);\n   }\n \n+  private static boolean isModelInImageUpdate(Packet packet, DomainPresenceInfo info) {\n+    if (info.getDomain().getDomainHomeSourceType().equals(\"FromModel\")) {\n+\n+      String currentPodRestartVersion = info.getDomain().getAdminServerSpec().getDomainRestartVersion();\n+      String currentPodIntrospectVersion = info.getDomain().getAdminServerSpec().getDomainIntrospectVersion();\n+      String configMapRestartVersion = (String)packet.get(ProcessingConstants.DOMAIN_RESTART_VERSION);\n+      String configMapIntrospectVersion = (String)packet.get(ProcessingConstants.DOMAIN_INTROSPECT_VERSION);\n+      String configMapDomainName = (String)packet.get(ProcessingConstants.DOMAIN_INPUTS_HASH);\n+      String currentImageName = info.getDomain().getSpec().getImage();\n+\n+      LOGGER.finest(\"JobHelper.isModelInImageUpdate currentPodRestartVersion \" + currentPodRestartVersion);\n+      LOGGER.finest(\"JobHelper.isModelInImageUpdate currentPodIntrospectVersion \" + currentPodIntrospectVersion);\n+      LOGGER.finest(\"JobHelper.isModelInImageUpdate configMapRestartVersion \" + configMapRestartVersion);\n+      LOGGER.finest(\"JobHelper.isModelInImageUpdate configMapIntrospectVersion \" + configMapIntrospectVersion);\n+\n+      // If either one is set, check for differences and decide to run intropsect job\n+\n+      if (currentPodIntrospectVersion != null\n+            && !currentPodIntrospectVersion.equals(configMapIntrospectVersion)) {\n+        return true;\n+      }\n+\n+      if (currentPodRestartVersion != null\n+            && !currentPodRestartVersion.equals(configMapRestartVersion)) {\n+        return true;\n+      }\n+\n+      if (configMapRestartVersion != null\n+          && !configMapRestartVersion.equals(currentPodRestartVersion)) {\n+        return true;\n+      }\n+\n+      if (configMapIntrospectVersion != null\n+          && !configMapIntrospectVersion.equals(currentPodIntrospectVersion)) {\n+        return true;\n+      }\n+\n+      if (!currentImageName.equals(configMapDomainName)) {", "originalCommit": "46d956270c8c7947f04f654ede7e0aa8b082a2e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYwODQyOQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r394608429", "bodyText": "Yes, it should be the hash of the image name\nBut model in image, we don't want to use the hashcode for the entire spec ,  some attributes should not trigger the introspect job", "author": "jshum2479", "createdAt": "2020-03-18T20:06:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYwMjMwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY1MzI3MQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r394653271", "bodyText": "Sorry, I did not mean the hashcode of the whole spec. I meant to call the result of the same getModelInImageHash method for the new and current spec.", "author": "doxiao", "createdAt": "2020-03-18T21:35:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYwMjMwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY2NjY1MQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r394666651", "bodyText": "I refactored the code and created the static method in ConfigMapHelper\npublic static int getModelInImageSpecHash(String imageName) and also corrected the naming and logic.", "author": "jshum2479", "createdAt": "2020-03-18T22:06:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYwMjMwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc0MDg3MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1478#discussion_r395740870", "bodyText": "IS this fixed? If so, please close the comment.", "author": "tbarnes-us", "createdAt": "2020-03-20T16:09:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYwMjMwNw=="}], "type": "inlineReview"}, {"oid": "94d603a74812889e160c54de7a2c319c0fd77316", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/94d603a74812889e160c54de7a2c319c0fd77316", "message": "Refactor getModelInImageSpecHash and fix logic; correct minor script error in encryption_util", "committedDate": "2020-03-18T21:43:29Z", "type": "commit"}, {"oid": "b09d2f2a3e8d586a104d22af9dea11e5b3dee239", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b09d2f2a3e8d586a104d22af9dea11e5b3dee239", "message": "check in for now waiting for WDT", "committedDate": "2020-03-18T21:50:33Z", "type": "commit"}, {"oid": "8c4f9ce869248d37ac32766f6f7fb828dcae1d77", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8c4f9ce869248d37ac32766f6f7fb828dcae1d77", "message": "Make the runtime encryption secret volume source \"optional\"\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-18T21:50:49Z", "type": "commit"}, {"oid": "c489a66d68e1a760da358ae37797be87bb66b451", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c489a66d68e1a760da358ae37797be87bb66b451", "message": "Merge branch 'model-in-image' of https://github.com/oracle/weblogic-kubernetes-operator into model-in-image", "committedDate": "2020-03-18T21:52:08Z", "type": "commit"}, {"oid": "a87ee762d639570e75e225ff41023fecafc935a9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a87ee762d639570e75e225ff41023fecafc935a9", "message": "Minor doc changes for introspectorJobActiveDeadlineSeconds\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>", "committedDate": "2020-03-19T18:06:24Z", "type": "commit"}, {"oid": "5fed14ab2742d0c35d5028ffdb64a93cfbcd9c87", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5fed14ab2742d0c35d5028ffdb64a93cfbcd9c87", "message": "Add extra line between merging properties file", "committedDate": "2020-03-19T19:06:50Z", "type": "commit"}]}