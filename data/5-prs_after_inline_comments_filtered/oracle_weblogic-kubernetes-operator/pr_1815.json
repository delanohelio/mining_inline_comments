{"pr_number": 1815, "pr_title": "Fixes necessary for 2.6.0 to 3.0.0 upgrade", "pr_createdAt": "2020-07-16T17:57:12Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1815", "timeline": [{"oid": "b3f48782a9c61f41052910f3587b66c7b1d4c8d0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b3f48782a9c61f41052910f3587b66c7b1d4c8d0", "message": "Show failure status on 500 and other errors", "committedDate": "2020-07-16T14:38:42Z", "type": "commit"}, {"oid": "e9ce0712c7f96b7352c21bef10e07312dfdb5fae", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e9ce0712c7f96b7352c21bef10e07312dfdb5fae", "message": "Report errors in CRD replace and create", "committedDate": "2020-07-16T15:11:16Z", "type": "commit"}, {"oid": "1d0b595d901a61c36c36cbae0ebdb8ae7c819666", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1d0b595d901a61c36c36cbae0ebdb8ae7c819666", "message": "Several updates to CRD and CRD generation", "committedDate": "2020-07-16T17:34:31Z", "type": "commit"}, {"oid": "ca01dd4ba503c473ed24f0c6a0a2b98eb83542a4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ca01dd4ba503c473ed24f0c6a0a2b98eb83542a4", "message": "Ignore null status following replace", "committedDate": "2020-07-16T22:52:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEyNjAwMw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1815#discussion_r456126003", "bodyText": "For 2.6 to 3.0 upgrade, I do expect the domain to be restarted.", "author": "rjeberhard", "createdAt": "2020-07-16T23:04:50Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/ItOperatorUpgrade.java", "diffHunk": "@@ -157,6 +189,31 @@ private void upgradeOperator() throws Exception {\n     testClusterScaling(operator, domain, false);\n   }\n \n+  /**\n+   * Upgrades operator to develop branch by uninstalling old release operator\n+   * and installing latest operator.\n+   * @throws Exception when upgrade fails or basic usecase testing or scaling fails.\n+   */\n+  private void upgradeOperatorFrom2_6_0() throws Exception {\n+    operator.destroy();\n+    // Thread.sleep(30 * 1000);\n+    Map<String, Object> operatorMap = createOperatorMap(getNewSuffixCount(), true, \"\");\n+    operatorMap.put(\"namespace\", OP_NS);\n+    operatorMap.put(\"releaseName\", OP_DEP_NAME);\n+    operatorMap.put(\"serviceAccount\", OP_SA);\n+    operatorMap.put(\"externalRestEnabled\", true);\n+    operatorMap.put(\"javaLoggingLevel\", \"FINE\");\n+    List<String> domNs = new ArrayList<String>();\n+    domNs.add(DOM_NS);\n+    operatorMap.put(\"domainNamespaces\", domNs);\n+    operator = TestUtils.createOperator(operatorMap, Operator.RestCertType.LEGACY);\n+\n+    checkCrdVersion();\n+    checkDomainNotRestarted();", "originalCommit": "c61d2f2c25a5df522577d5732f02aded146f875a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NjM2Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1815#discussion_r456196367", "bodyText": "Yes, domain is getting restarted. Removed the check.", "author": "vanajamukkara", "createdAt": "2020-07-17T03:21:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEyNjAwMw=="}], "type": "inlineReview"}, {"oid": "10a31c574746978ff78118a38a35e5423815f08f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/10a31c574746978ff78118a38a35e5423815f08f", "message": "adding operator upgrade test for 2.6.0 to develop", "committedDate": "2020-07-17T02:54:06Z", "type": "commit"}, {"oid": "93de4c6096e35f6490123e1d6146297953517623", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/93de4c6096e35f6490123e1d6146297953517623", "message": "delete crd at the beginning of the test", "committedDate": "2020-07-17T04:04:32Z", "type": "commit"}, {"oid": "8d5427785a1196b96a353b0bb30bf7a296335b6a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8d5427785a1196b96a353b0bb30bf7a296335b6a", "message": "fix checkstyle", "committedDate": "2020-07-17T04:10:12Z", "type": "commit"}, {"oid": "c61d2f2c25a5df522577d5732f02aded146f875a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c61d2f2c25a5df522577d5732f02aded146f875a", "message": "Merge branch 'upgrade-300' of https://github.com/oracle/weblogic-kubernetes-operator into upgrade-300", "committedDate": "2020-07-16T22:52:37Z", "type": "commit"}, {"oid": "f13a4f39fd72d85bc2a50c94a0e2181b34ba5698", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f13a4f39fd72d85bc2a50c94a0e2181b34ba5698", "message": "remove domain not restarted check and changes for 2.5.0 upgrade test", "committedDate": "2020-07-17T10:17:39Z", "type": "commit"}]}