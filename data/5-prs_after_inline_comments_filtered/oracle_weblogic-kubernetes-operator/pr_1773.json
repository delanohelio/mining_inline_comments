{"pr_number": 1773, "pr_title": "Log introspector job info on failure", "pr_createdAt": "2020-06-29T19:25:53Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1773", "timeline": [{"oid": "bb733c1db158ab86992ac59d44d3af5e7e33f879", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bb733c1db158ab86992ac59d44d3af5e7e33f879", "message": "Initial change", "committedDate": "2020-06-25T16:07:20Z", "type": "commit"}, {"oid": "b40fe6dd68e75ebb3425150424ca8f1f332ce669", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b40fe6dd68e75ebb3425150424ca8f1f332ce669", "message": "Complete the first unit test case", "committedDate": "2020-06-25T19:54:43Z", "type": "commit"}, {"oid": "0ebf37b908913379683c6ffeb3d9fdba60e852d2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0ebf37b908913379683c6ffeb3d9fdba60e852d2", "message": "work in progress", "committedDate": "2020-06-25T21:15:51Z", "type": "commit"}, {"oid": "9dbaccdc7bf568e23178262d66f5b6e5c9a33a6a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9dbaccdc7bf568e23178262d66f5b6e5c9a33a6a", "message": "Work in progress", "committedDate": "2020-06-26T13:10:33Z", "type": "commit"}, {"oid": "8d612d5ed54a3b20d8e6d64770a36fd669745173", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8d612d5ed54a3b20d8e6d64770a36fd669745173", "message": "Work in progress", "committedDate": "2020-06-29T01:17:45Z", "type": "commit"}, {"oid": "5f647261a224adef6e7e35b7a942bb7404bb79fa", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5f647261a224adef6e7e35b7a942bb7404bb79fa", "message": "Minor changes", "committedDate": "2020-06-29T16:13:24Z", "type": "commit"}, {"oid": "0d3d77706ce8b732af16c24af32238e18c8f3668", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0d3d77706ce8b732af16c24af32238e18c8f3668", "message": "Merge remote-tracking branch 'origin/develop' into log-job-info-on-failure\n\nConflicts:\n\toperator/src/main/java/oracle/kubernetes/operator/ProcessingConstants.java\n\toperator/src/main/java/oracle/kubernetes/operator/logging/MessageKeys.java\n\toperator/src/main/resources/Operator.properties", "committedDate": "2020-06-29T18:22:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIzMTI2MQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1773#discussion_r447231261", "bodyText": "could you give an example of what is being logged in this message? Thanks", "author": "alai8", "createdAt": "2020-06-29T20:23:26Z", "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/JobHelper.java", "diffHunk": "@@ -533,6 +547,23 @@ private String onSeparateLines(List<String> lines) {\n     }\n   }\n \n+  private static void logIntrospectorFailure(Packet packet, V1Job domainIntrospectorJob) {\n+    Boolean logged = (Boolean) packet.get(ProcessingConstants.INTROSPECTOR_JOB_FAILURE_LOGGED);\n+    String jobPodName = (String) packet.get(ProcessingConstants.JOB_POD_NAME);\n+    if (logged == null || !logged.booleanValue()) {\n+      packet.put(ProcessingConstants.INTROSPECTOR_JOB_FAILURE_LOGGED, Boolean.valueOf(true));\n+      LOGGER.info(INTROSPECTOR_JOB_FAILED,\n+          domainIntrospectorJob.getMetadata().getNamespace(),\n+          domainIntrospectorJob.getMetadata().getName(),\n+          jobPodName,\n+          domainIntrospectorJob.getStatus());\n+      LOGGER.fine(INTROSPECTOR_JOB_FAILED_DETAIL,", "originalCommit": "0d3d77706ce8b732af16c24af32238e18c8f3668", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI3NzIwNg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1773#discussion_r447277206", "bodyText": "It is in the regular operator log message format with the message body be V1Job.toString().", "author": "doxiao", "createdAt": "2020-06-29T21:56:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIzMTI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI4NTcyNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1773#discussion_r447285725", "bodyText": "I tried to put an example here but the format got messed up by the tooling. I'll send you via slack.", "author": "doxiao", "createdAt": "2020-06-29T22:14:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIzMTI2MQ=="}], "type": "inlineReview"}, {"oid": "4e0f862f37275da9bb5bd25ebef45087ee250dd9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4e0f862f37275da9bb5bd25ebef45087ee250dd9", "message": "Fine tune log message", "committedDate": "2020-06-30T01:23:07Z", "type": "commit"}, {"oid": "e96fbdb3a2ac26f228c7d492ca0abb567be70935", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e96fbdb3a2ac26f228c7d492ca0abb567be70935", "message": "Fine tune the info message", "committedDate": "2020-06-30T16:08:18Z", "type": "commit"}]}