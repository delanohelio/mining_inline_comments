{"pr_number": 1637, "pr_title": "retry for app deployment and other fixes", "pr_createdAt": "2020-05-08T21:36:54Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1637", "timeline": [{"oid": "3bd81d334ff08bdfeefc379e7653880ac362b854", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3bd81d334ff08bdfeefc379e7653880ac362b854", "message": "adding check to resolve service name from admin pod, fixing tests to verify the servers/services are created", "committedDate": "2020-05-01T23:46:10Z", "type": "commit"}, {"oid": "3b59f2d38cf4a57b6caf8b7b196e022f4d0c73f6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3b59f2d38cf4a57b6caf8b7b196e022f4d0c73f6", "message": "try with precreate service", "committedDate": "2020-05-03T23:38:57Z", "type": "commit"}, {"oid": "052fb85c04d994708b7fced6d277790b3b3555b5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/052fb85c04d994708b7fced6d277790b3b3555b5", "message": "increasing timeout", "committedDate": "2020-05-04T09:15:40Z", "type": "commit"}, {"oid": "0ecab18fbe2c4c9eaf99e9ab1ae901239f637448", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0ecab18fbe2c4c9eaf99e9ab1ae901239f637448", "message": "fix cluster size properties based on model yaml", "committedDate": "2020-05-04T10:16:03Z", "type": "commit"}, {"oid": "086cd4988b5e1ecca743186fd99237fe307d1db9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/086cd4988b5e1ecca743186fd99237fe307d1db9", "message": "adding retry for app deployment", "committedDate": "2020-05-06T03:16:17Z", "type": "commit"}, {"oid": "e31f84935d505cdbfac3c1583e1f11d819916895", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e31f84935d505cdbfac3c1583e1f11d819916895", "message": "get events for ns", "committedDate": "2020-05-06T23:24:01Z", "type": "commit"}, {"oid": "7f7bb6a8cefa643698cd4046b08d7056a8e0a77d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7f7bb6a8cefa643698cd4046b08d7056a8e0a77d", "message": "fix events", "committedDate": "2020-05-07T02:27:25Z", "type": "commit"}, {"oid": "cb0e3f6e35c1a7e06b21374f3cf5bb69392baeb8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cb0e3f6e35c1a7e06b21374f3cf5bb69392baeb8", "message": "add break to loop if app depolyed", "committedDate": "2020-05-07T05:12:49Z", "type": "commit"}, {"oid": "52aec8bebbcc57596570d34864fa4cd089901575", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/52aec8bebbcc57596570d34864fa4cd089901575", "message": "fix multi cluster test", "committedDate": "2020-05-07T06:10:27Z", "type": "commit"}, {"oid": "e7234d86322d727d9c6ba47a378c8e94c704c7db", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e7234d86322d727d9c6ba47a378c8e94c704c7db", "message": "adding retry parameter", "committedDate": "2020-05-09T00:49:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3ODc1OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1637#discussion_r423978759", "bodyText": "Resole -> Resolve", "author": "rjeberhard", "createdAt": "2020-05-12T19:25:59Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/TestUtils.java", "diffHunk": "@@ -228,6 +228,51 @@ public static void checkServiceCreated(String serviceName, String domainNS, int\n     }\n   }\n \n+  /**\n+   * Resole a servive name inside a pod.", "originalCommit": "e7234d86322d727d9c6ba47a378c8e94c704c7db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE2NDU5MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1637#discussion_r425164590", "bodyText": "done", "author": "vanajamukkara", "createdAt": "2020-05-14T14:07:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3ODc1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAxNTQzNg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1637#discussion_r424015436", "bodyText": "Surprisingly, this will break on k8s 1.16.  The kubectl exec command has always optionally taken a \"--\" as the separator between the kubectl arguments and the command that you want to run, but in 1.16 the parsing changes so that if you have this value it is taken as the beginning of the command.  We could fix this by always adding a \"--\" before the command on the kubectl exec command line.", "author": "rjeberhard", "createdAt": "2020-05-12T20:32:08Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/TestUtils.java", "diffHunk": "@@ -228,6 +228,51 @@ public static void checkServiceCreated(String serviceName, String domainNS, int\n     }\n   }\n \n+  /**\n+   * Resole a servive name inside a pod.\n+   * @param serviceName service name to resolve\n+   * @param podName name of the pod\n+   * @param namespace namespace of the pod\n+   * @throws Exception if a service name can not be resolved\n+   */\n+  public static void resolveServiceName(\n+      String serviceName, String podName, String namespace, int numberOfRetries)\n+      throws Exception {\n+\n+    String appLocationInPod = BaseTest.getAppLocationInPod();\n+    String scriptLocationInPod = appLocationInPod + \"/resolveServiceName.py\";\n+\n+    // copy py script to check if managed service name can be resolved in admin pod\n+    TestUtils.kubectlexec(podName, namespace,\" -- mkdir -p \" + appLocationInPod);", "originalCommit": "e7234d86322d727d9c6ba47a378c8e94c704c7db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0MzE3MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1637#discussion_r424543170", "bodyText": "@rjeberhard currently the command looks like this\nkubectl -n usab-domainns-4 exec -it usab-domain-4-admin-server  -- mkdir -p /u01/oracle/apps\n\nwhat will be the command based on your suggestion?", "author": "vanajamukkara", "createdAt": "2020-05-13T15:47:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAxNTQzNg=="}], "type": "inlineReview"}, {"oid": "a2eb659a169170470773f026021c87fc38f6f5ae", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a2eb659a169170470773f026021c87fc38f6f5ae", "message": "fix typo", "committedDate": "2020-05-14T20:50:02Z", "type": "commit"}]}