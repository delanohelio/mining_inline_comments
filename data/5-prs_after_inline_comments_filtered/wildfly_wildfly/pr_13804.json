{"pr_number": 13804, "pr_title": "WFLY-14132 jboss-ejb3.xml is ignored for exploded deployments", "pr_createdAt": "2020-12-08T17:30:21Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13804", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0NTQ0NA==", "url": "https://github.com/wildfly/wildfly/pull/13804#discussion_r538645444", "bodyText": "Is dropping the case sensitivity bit ok? I don't recall us doing anything to control what case is used for any runtime-name the user provides via the management API.", "author": "bstansberry", "createdAt": "2020-12-08T17:38:37Z", "path": "ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJarParsingDeploymentUnitProcessor.java", "diffHunk": "@@ -191,14 +189,15 @@ public void undeploy(DeploymentUnit unit) {\n \n     }\n \n-    private static VirtualFile getDescriptor(final VirtualFile deploymentRoot, final String descriptorName) {\n+    private static VirtualFile getDescriptor(final DeploymentUnit deploymentUnit, final VirtualFile deploymentRoot, final String descriptorName) {\n+        final String deploymentUnitName = deploymentUnit.getName();\n         // Locate the descriptor\n         final VirtualFile descriptor;\n         // EJB 3.1 FR 20.4 Enterprise Beans Packaged in a .war\n-        if (isWar(deploymentRoot)) {\n+        if (deploymentUnitName.endsWith(WAR_FILE_EXTENSION)) {", "originalCommit": "0999a4b5d2f9b4b4072e58c0152f08dd5563b227", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY2MDU0OA==", "url": "https://github.com/wildfly/wildfly/pull/13804#discussion_r538660548", "bodyText": "I believe in the EE spec, these file extensions (.war, .jar, .ear) are case-sensitive. So if WildFly follows this rule and convention (some parts are outside the spec but WildFly still follows this convention), I think make the case sensitive will be cleaner. Not sure how common is case-insensitive runtime-name.", "author": "chengfang", "createdAt": "2020-12-08T17:52:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0NTQ0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODczNjgxNg==", "url": "https://github.com/wildfly/wildfly/pull/13804#discussion_r538736816", "bodyText": "I changed to compare the extensions case-insensitive, trying to be consistent with existing behavior.", "author": "chengfang", "createdAt": "2020-12-08T19:14:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY0NTQ0NA=="}], "type": "inlineReview"}, {"oid": "0132184d9a332025643b8b57ccfe3bafe11bc0a1", "url": "https://github.com/wildfly/wildfly/commit/0132184d9a332025643b8b57ccfe3bafe11bc0a1", "message": "WFLY-14132 jboss-ejb3.xml is ignored for exploded deployments", "committedDate": "2020-12-08T19:10:02Z", "type": "commit"}, {"oid": "0132184d9a332025643b8b57ccfe3bafe11bc0a1", "url": "https://github.com/wildfly/wildfly/commit/0132184d9a332025643b8b57ccfe3bafe11bc0a1", "message": "WFLY-14132 jboss-ejb3.xml is ignored for exploded deployments", "committedDate": "2020-12-08T19:10:02Z", "type": "forcePushed"}]}