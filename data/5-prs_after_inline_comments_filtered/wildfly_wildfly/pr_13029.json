{"pr_number": 13029, "pr_title": "[WFLY-13142]: Can't create a Connection Factory using Jgroups discovery", "pr_createdAt": "2020-02-20T08:58:42Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13029", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2MjQzMg==", "url": "https://github.com/wildfly/wildfly/pull/13029#discussion_r383862432", "bodyText": "Formatting: we use 4 spaces.", "author": "rhusar", "createdAt": "2020-02-25T12:59:08Z", "path": "messaging-activemq/src/main/java/org/wildfly/extension/messaging/activemq/jms/ExternalConnectionFactoryAdd.java", "diffHunk": "@@ -91,8 +90,12 @@ protected void performRuntime(OperationContext context, ModelNode operation, Mod\n             Map<String, Supplier<CommandDispatcherFactory>> commandDispatcherFactories = new HashMap<>();\n             final String dgname = discoveryGroupName.asString();\n             final String key = \"discovery\" + dgname;\n-            PathAddress dgAddress = context.getCurrentAddress().getParent().append(DISCOVERY_GROUP, dgname);\n-            ModelNode discoveryGroupModel = context.readResourceFromRoot(dgAddress).getModel();\n+            ModelNode discoveryGroupModel;\n+            try {\n+               discoveryGroupModel = context.readResourceFromRoot(context.getCurrentAddress().getParent().append(JGROUPS_DISCOVERY_GROUP, dgname)).getModel();", "originalCommit": "172be946f52edc521cd6521439306aabc6f695e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg2MjU2OQ==", "url": "https://github.com/wildfly/wildfly/pull/13029#discussion_r383862569", "bodyText": "Formatting: we use 4 spaces.", "author": "rhusar", "createdAt": "2020-02-25T12:59:24Z", "path": "messaging-activemq/src/main/java/org/wildfly/extension/messaging/activemq/jms/PooledConnectionFactoryAdd.java", "diffHunk": "@@ -99,8 +99,12 @@ protected void performRuntime(OperationContext context, ModelNode operation, Res\n         String jgroupClusterName = null;\n         final PathAddress serverAddress = MessagingServices.getActiveMQServerPathAddress(address);\n         if (discoveryGroupName != null) {\n-            PathAddress dgAddress = serverAddress.append(CommonAttributes.DISCOVERY_GROUP, discoveryGroupName);\n-            Resource dgResource = context.readResourceFromRoot(dgAddress, false);\n+            Resource dgResource;\n+            try {\n+               dgResource = context.readResourceFromRoot(serverAddress.append(CommonAttributes.SOCKET_DISCOVERY_GROUP, discoveryGroupName), false);", "originalCommit": "172be946f52edc521cd6521439306aabc6f695e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f2251f11e3a7f5b007419a9b583478fbfdabbb18", "url": "https://github.com/wildfly/wildfly/commit/f2251f11e3a7f5b007419a9b583478fbfdabbb18", "message": "[WFLY-13142]: Can't create a Connection Factory using Jgroups discovery\n\n* Fixing the way we read discovery-group resources that are now at a\n  'new' address.\n\nJira: https://issues.redhat.com/browse/WFLY-13142\n\nSigned-off-by: Emmanuel Hugonnet <ehugonne@redhat.com>", "committedDate": "2020-02-26T09:32:54Z", "type": "commit"}, {"oid": "f2251f11e3a7f5b007419a9b583478fbfdabbb18", "url": "https://github.com/wildfly/wildfly/commit/f2251f11e3a7f5b007419a9b583478fbfdabbb18", "message": "[WFLY-13142]: Can't create a Connection Factory using Jgroups discovery\n\n* Fixing the way we read discovery-group resources that are now at a\n  'new' address.\n\nJira: https://issues.redhat.com/browse/WFLY-13142\n\nSigned-off-by: Emmanuel Hugonnet <ehugonne@redhat.com>", "committedDate": "2020-02-26T09:32:54Z", "type": "forcePushed"}]}