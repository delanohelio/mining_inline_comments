{"pr_number": 1311, "pr_title": "[IOTDB-695] Accelerate the count timeseries query", "pr_createdAt": "2020-06-04T03:51:30Z", "pr_url": "https://github.com/apache/iotdb/pull/1311", "timeline": [{"oid": "35ce8bf6f18d90b33b66b8f42c42be11b914cf4d", "url": "https://github.com/apache/iotdb/commit/35ce8bf6f18d90b33b66b8f42c42be11b914cf4d", "message": "Accelerate count timeseires", "committedDate": "2020-06-04T03:44:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODk5NQ==", "url": "https://github.com/apache/iotdb/pull/1311#discussion_r435018995", "bodyText": "no need", "author": "qiaojialin", "createdAt": "2020-06-04T06:26:59Z", "path": "server/src/main/java/org/apache/iotdb/db/metadata/MManager.java", "diffHunk": "@@ -692,6 +692,20 @@ public String getStorageGroupName(String path) throws MetadataException {\n     }\n   }\n \n+  /**\n+   * To calculate the count of timeseries for given prefix path.\n+   */\n+  public int getAllTimeseriesCount(String prefixPath) throws MetadataException {\n+    lock.readLock().lock();\n+    try {\n+      return mtree.getAllTimeseriesCount(prefixPath);\n+    } catch (MetadataException e) {\n+      throw new MetadataException(e);", "originalCommit": "35ce8bf6f18d90b33b66b8f42c42be11b914cf4d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA1MzY1OA==", "url": "https://github.com/apache/iotdb/pull/1311#discussion_r435053658", "bodyText": "Fixed.", "author": "Alima777", "createdAt": "2020-06-04T07:40:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODk5NQ=="}], "type": "inlineReview"}, {"oid": "756e290617832d8738893da258c3a76d99dce1d6", "url": "https://github.com/apache/iotdb/commit/756e290617832d8738893da258c3a76d99dce1d6", "message": "Add ut", "committedDate": "2020-06-04T07:37:59Z", "type": "commit"}, {"oid": "808840847ee63a176f48e6da16a34d6b59101a2c", "url": "https://github.com/apache/iotdb/commit/808840847ee63a176f48e6da16a34d6b59101a2c", "message": "Modify typo", "committedDate": "2020-06-04T07:40:13Z", "type": "commit"}, {"oid": "f2ad194fa2cdbaed1f2827ffb931e4e581dd4357", "url": "https://github.com/apache/iotdb/commit/f2ad194fa2cdbaed1f2827ffb931e4e581dd4357", "message": "Modify code style", "committedDate": "2020-06-04T07:51:21Z", "type": "commit"}, {"oid": "52d557fca8d9c515724592bf68c66030b2cb5fc4", "url": "https://github.com/apache/iotdb/commit/52d557fca8d9c515724592bf68c66030b2cb5fc4", "message": "Modify method name", "committedDate": "2020-06-04T08:07:37Z", "type": "commit"}, {"oid": "abee91d5342ee77c34b73a948d549d55254e398a", "url": "https://github.com/apache/iotdb/commit/abee91d5342ee77c34b73a948d549d55254e398a", "message": "Modify typo", "committedDate": "2020-06-04T08:10:59Z", "type": "commit"}, {"oid": "39f32413f6b7590007128fb96fe1ae2aa13581cf", "url": "https://github.com/apache/iotdb/commit/39f32413f6b7590007128fb96fe1ae2aa13581cf", "message": "Add comment", "committedDate": "2020-06-04T09:13:25Z", "type": "commit"}]}