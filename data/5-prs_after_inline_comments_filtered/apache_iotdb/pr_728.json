{"pr_number": 728, "pr_title": "[IOTDB-414] fix the client display and add COMPRESSION keyword.", "pr_createdAt": "2020-01-11T05:42:17Z", "pr_url": "https://github.com/apache/iotdb/pull/728", "timeline": [{"oid": "2c671e4f0da52237720d40974f19b6d6f19d01ef", "url": "https://github.com/apache/iotdb/commit/2c671e4f0da52237720d40974f19b6d6f19d01ef", "message": "fix client display.", "committedDate": "2020-01-11T05:31:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MTEwNw==", "url": "https://github.com/apache/iotdb/pull/728#discussion_r365551107", "bodyText": "Why not merge this if(printTimestamp) into next?", "author": "JackieTien97", "createdAt": "2020-01-12T01:17:54Z", "path": "client/src/main/java/org/apache/iotdb/client/AbstractClient.java", "diffHunk": "@@ -478,15 +478,17 @@ private static void printBlockLine(boolean printTimestamp, int colCount,\n     } else {\n       blockLine.append(\"+\");\n     }\n-    if (resultSetMetaData.getColumnName(2).equals(GROUPBY_DEVICE_COLUMN_NAME)) {\n-      maxValueLength = measurementColumnLength;\n-    } else {\n-      int tmp = Integer.MIN_VALUE;\n-      for (int i = 1; i <= colCount; i++) {\n-        int len = resultSetMetaData.getColumnLabel(i).length();\n-        tmp = Math.max(tmp, len);\n+    if(printTimestamp) {\n+      if (resultSetMetaData.getColumnName(2).equals(GROUPBY_DEVICE_COLUMN_NAME)) {\n+        maxValueLength = measurementColumnLength;\n+      } else {\n+        int tmp = Integer.MIN_VALUE;\n+        for (int i = 1; i <= colCount; i++) {\n+          int len = resultSetMetaData.getColumnLabel(i).length();\n+          tmp = Math.max(tmp, len);\n+        }\n+        maxValueLength = tmp;\n       }\n-      maxValueLength = tmp;\n     }\n     if(printTimestamp) {", "originalCommit": "2c671e4f0da52237720d40974f19b6d6f19d01ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MjIyNg==", "url": "https://github.com/apache/iotdb/pull/728#discussion_r365552226", "bodyText": "And I try your version, it seems that you didn't fix the \"show storage group\" problem. It still show the error message.", "author": "JackieTien97", "createdAt": "2020-01-12T01:51:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MTEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1Mjg4MQ==", "url": "https://github.com/apache/iotdb/pull/728#discussion_r365552881", "bodyText": "And I try your version, it seems that you didn't fix the \"show storage group\" problem. It still show the error message.\n\nThe problem has been fixed. Perhaps you need to recompile the project.", "author": "SolomonAnn", "createdAt": "2020-01-12T02:14:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MTEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MzExMA==", "url": "https://github.com/apache/iotdb/pull/728#discussion_r365553110", "bodyText": "Sorry for that, I try it again and it really works.\nAnd you can split the printBlockLine function into two functions.\nBecause, the logic in that function is completely split by the printTimestamp.", "author": "JackieTien97", "createdAt": "2020-01-12T02:21:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MTEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MzEyNQ==", "url": "https://github.com/apache/iotdb/pull/728#discussion_r365553125", "bodyText": "The \"create timeseries\" statement with the \"compression\" argument can't still print successfully.", "author": "SolomonAnn", "createdAt": "2020-01-12T02:22:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MTEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MzIxOQ==", "url": "https://github.com/apache/iotdb/pull/728#discussion_r365553219", "bodyText": "it can create successfully, but it does the wrong thing, I think we should choose one bewteen syntax compression and compressor.", "author": "JackieTien97", "createdAt": "2020-01-12T02:25:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MTEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1NTQzNQ==", "url": "https://github.com/apache/iotdb/pull/728#discussion_r365555435", "bodyText": "Compression is a wrong syntax, the wrong syntax doesn't mean it gives an error message. Instead, It is identified as a normal property instead of \"compression\" and doesn't influence anything. So if you use create timeseries root.sg1.d2.s1 with datatype=INT64, encoding=RLE, compression=SNAPPY;, root.sg1.d2.s1 will use UNCOMPRESSED.", "author": "Genius-pig", "createdAt": "2020-01-12T03:36:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MTEwNw=="}], "type": "inlineReview"}, {"oid": "c971a93ddbb3ce87e997f99bd28ac8b77751d08e", "url": "https://github.com/apache/iotdb/commit/c971a93ddbb3ce87e997f99bd28ac8b77751d08e", "message": "omit redundant if", "committedDate": "2020-01-12T03:38:26Z", "type": "commit"}, {"oid": "bc779bb303fad02656e9fe6328432d7a5b3ed483", "url": "https://github.com/apache/iotdb/commit/bc779bb303fad02656e9fe6328432d7a5b3ed483", "message": "support compression.", "committedDate": "2020-01-12T04:30:43Z", "type": "commit"}]}