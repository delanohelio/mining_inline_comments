{"pr_number": 710, "pr_title": "[IOTDB-406] refactor environmentutils and IoTDBConfig", "pr_createdAt": "2020-01-07T13:21:54Z", "pr_url": "https://github.com/apache/iotdb/pull/710", "timeline": [{"oid": "5a4e22555ed1418c099b6a83219c9f5f346144cb", "url": "https://github.com/apache/iotdb/commit/5a4e22555ed1418c099b6a83219c9f5f346144cb", "message": "fix a bug when recover the last crashed file", "committedDate": "2020-01-06T09:02:49Z", "type": "commit"}, {"oid": "ec64d27af2b0735f5d8588f709834bdfbc720897", "url": "https://github.com/apache/iotdb/commit/ec64d27af2b0735f5d8588f709834bdfbc720897", "message": "add exception for something gets wrong", "committedDate": "2020-01-06T09:22:59Z", "type": "commit"}, {"oid": "68296fc4de495b85829ddb6e511ad3b875727f38", "url": "https://github.com/apache/iotdb/commit/68296fc4de495b85829ddb6e511ad3b875727f38", "message": "fix test errors", "committedDate": "2020-01-06T12:36:13Z", "type": "commit"}, {"oid": "ba57aaba1803fef32309073e134c881c58f4c5ab", "url": "https://github.com/apache/iotdb/commit/ba57aaba1803fef32309073e134c881c58f4c5ab", "message": "change the comment", "committedDate": "2020-01-07T08:28:43Z", "type": "commit"}, {"oid": "07fc93f13d9fe283d4e39a95d33aa3fa10505dbf", "url": "https://github.com/apache/iotdb/commit/07fc93f13d9fe283d4e39a95d33aa3fa10505dbf", "message": "fix concurrent error of cache in QueryContext", "committedDate": "2020-01-07T12:08:02Z", "type": "commit"}, {"oid": "7f93f819aa6e3ae2da02508507f9e16835478d7a", "url": "https://github.com/apache/iotdb/commit/7f93f819aa6e3ae2da02508507f9e16835478d7a", "message": "move IoTDB daemon to EnvironmentUtils; allow iotdb-engine.properties providing incomplete parameters for hdfs", "committedDate": "2020-01-07T13:15:56Z", "type": "commit"}, {"oid": "c570bdc9e39065a1b5afeaf6a827abe7c107dc92", "url": "https://github.com/apache/iotdb/commit/c570bdc9e39065a1b5afeaf6a827abe7c107dc92", "message": "delete unused codes", "committedDate": "2020-01-07T13:22:43Z", "type": "commit"}, {"oid": "5c284e9ed058082390e6e8fa6c355b31406e8e0a", "url": "https://github.com/apache/iotdb/commit/5c284e9ed058082390e6e8fa6c355b31406e8e0a", "message": "fix unit test (actually they are ITs) and session Test (now there is a duplicate EnvironmentUtils)", "committedDate": "2020-01-07T15:37:48Z", "type": "commit"}, {"oid": "70253ac5d39e768b1ac600e624ca3fab1411f2ff", "url": "https://github.com/apache/iotdb/commit/70253ac5d39e768b1ac600e624ca3fab1411f2ff", "message": "fix code smell and Vulnerability", "committedDate": "2020-01-07T15:41:16Z", "type": "commit"}, {"oid": "6773d6c0752576b2a310cde4b308952946d01fe5", "url": "https://github.com/apache/iotdb/commit/6773d6c0752576b2a310cde4b308952946d01fe5", "message": "try to close  MetricService timely in Tests", "committedDate": "2020-01-07T16:42:19Z", "type": "commit"}, {"oid": "5f3f7bc8424452c8724aa310af4640112e2b6f97", "url": "https://github.com/apache/iotdb/commit/5f3f7bc8424452c8724aa310af4640112e2b6f97", "message": "fix code smell for thrift and metric stop timeout", "committedDate": "2020-01-07T17:05:37Z", "type": "commit"}, {"oid": "49a4adc30ab741b3c3956974ee53cf48855c9a2a", "url": "https://github.com/apache/iotdb/commit/49a4adc30ab741b3c3956974ee53cf48855c9a2a", "message": "set stopTime of MetricService in Tests as 1 (can not be 0)", "committedDate": "2020-01-08T01:01:24Z", "type": "commit"}, {"oid": "124efa62f032ae9863c7a11ac0d2bb29a18a69fe", "url": "https://github.com/apache/iotdb/commit/124efa62f032ae9863c7a11ac0d2bb29a18a69fe", "message": "stop iot daemon first and then delete files; remove duplicated EnvironmentUtils", "committedDate": "2020-01-08T01:15:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAzNTU5MQ==", "url": "https://github.com/apache/iotdb/pull/710#discussion_r364035591", "bodyText": "Use a logger.", "author": "jt2594838", "createdAt": "2020-01-08T02:00:17Z", "path": "server/src/test/java/org/apache/iotdb/db/utils/EnvironmentUtils.java", "diffHunk": "@@ -188,6 +181,12 @@ private static void createAllDir() {\n     for (String dataDir : config.getDataDirs()) {\n       createDir(dataDir);\n     }\n+    //create user and roles folder\n+    try {\n+      LocalFileAuthorizer.getInstance().reset();\n+    } catch (AuthException e) {\n+      e.printStackTrace();", "originalCommit": "124efa62f032ae9863c7a11ac0d2bb29a18a69fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3c0584440270453a0345f73bb97ab59c9842d2cc", "url": "https://github.com/apache/iotdb/commit/3c0584440270453a0345f73bb97ab59c9842d2cc", "message": "sync files before delete sg files", "committedDate": "2020-01-08T02:24:20Z", "type": "commit"}, {"oid": "65fe0080061d7dabe366bd9b37ef1bfb43aec324", "url": "https://github.com/apache/iotdb/commit/65fe0080061d7dabe366bd9b37ef1bfb43aec324", "message": "revert to give more time for closing MetricService", "committedDate": "2020-01-08T02:59:29Z", "type": "commit"}, {"oid": "454f38cf72ef5e141804b8c65781126093277aae", "url": "https://github.com/apache/iotdb/commit/454f38cf72ef5e141804b8c65781126093277aae", "message": "generate test-jar for session test", "committedDate": "2020-01-08T04:36:47Z", "type": "commit"}, {"oid": "5d5942a20ff1b039b963619dbf0b07fe6e916047", "url": "https://github.com/apache/iotdb/commit/5d5942a20ff1b039b963619dbf0b07fe6e916047", "message": "change start order of IServices; and stop IoTDB Daemon first", "committedDate": "2020-01-08T08:32:09Z", "type": "commit"}, {"oid": "995ecbc68b6e9d683d860367905ffeaf194d25b0", "url": "https://github.com/apache/iotdb/commit/995ecbc68b6e9d683d860367905ffeaf194d25b0", "message": "catch MetricService start failed exception; try to fix some ModificationFile not closed issue", "committedDate": "2020-01-08T17:55:35Z", "type": "commit"}, {"oid": "b0574dbc31a70a3e428d66a6eeb3d9f7e2ad5973", "url": "https://github.com/apache/iotdb/commit/b0574dbc31a70a3e428d66a6eeb3d9f7e2ad5973", "message": "close mod files when stop StorageEngine", "committedDate": "2020-01-08T18:18:58Z", "type": "commit"}, {"oid": "0233b469eb637a0a2efb78c17273620a40ba9881", "url": "https://github.com/apache/iotdb/commit/0233b469eb637a0a2efb78c17273620a40ba9881", "message": "avoid create a mod file if there is no modifications", "committedDate": "2020-01-08T18:35:45Z", "type": "commit"}, {"oid": "cb40bc74f50c0cda7af2cb2083177d6d3f35bf14", "url": "https://github.com/apache/iotdb/commit/cb40bc74f50c0cda7af2cb2083177d6d3f35bf14", "message": "close MergingModifications for a test trace", "committedDate": "2020-01-08T18:43:07Z", "type": "commit"}, {"oid": "0edb7ee00676f825640fe116fc1ba949bd0d14ef", "url": "https://github.com/apache/iotdb/commit/0edb7ee00676f825640fe116fc1ba949bd0d14ef", "message": "fix cmode smell reported by sonar", "committedDate": "2020-01-08T18:58:34Z", "type": "commit"}, {"oid": "8c913525381f565dd1234c0c74fda8bf64088cb6", "url": "https://github.com/apache/iotdb/commit/8c913525381f565dd1234c0c74fda8bf64088cb6", "message": "Terminate flush task when interrupted", "committedDate": "2020-01-09T02:51:37Z", "type": "commit"}, {"oid": "f59f2bb9a77d3ff8182f259e55fd5ec930eac06f", "url": "https://github.com/apache/iotdb/commit/f59f2bb9a77d3ff8182f259e55fd5ec930eac06f", "message": "ignore some sonar warning", "committedDate": "2020-01-09T10:48:31Z", "type": "commit"}, {"oid": "e23b6210c2178c616c5124f5a6bd4c7ce4961fcd", "url": "https://github.com/apache/iotdb/commit/e23b6210c2178c616c5124f5a6bd4c7ce4961fcd", "message": "skip PerformanceTests; merge with master", "committedDate": "2020-01-09T12:52:44Z", "type": "commit"}]}