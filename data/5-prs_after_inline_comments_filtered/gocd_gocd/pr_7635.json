{"pr_number": 7635, "pr_title": "Enable Elastic Agent Status Report button for users with view permission for elastic profile (#7549)", "pr_createdAt": "2020-01-20T05:13:38Z", "pr_url": "https://github.com/gocd/gocd/pull/7635", "timeline": [{"oid": "eb924e6c978a988318c41a2f54b31cf3d43415fe", "url": "https://github.com/gocd/gocd/commit/eb924e6c978a988318c41a2f54b31cf3d43415fe", "message": "Enable Elastic Agent Status Report button for users with view permission for elastic profile (#7549)", "committedDate": "2020-01-20T05:50:58Z", "type": "commit"}, {"oid": "eb924e6c978a988318c41a2f54b31cf3d43415fe", "url": "https://github.com/gocd/gocd/commit/eb924e6c978a988318c41a2f54b31cf3d43415fe", "message": "Enable Elastic Agent Status Report button for users with view permission for elastic profile (#7549)", "committedDate": "2020-01-20T05:50:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODM3OTMyNg==", "url": "https://github.com/gocd/gocd/pull/7635#discussion_r368379326", "bodyText": "This method needs to be removed.\nInstead, use AbstractAuthenticationHelper.doesUserHasPermissions\nAs of today, JobController can not autowire ApiAuthenticationHelper component, as it is a circular dependency (Requires dependency on module 'com.thoughtworks.go.api-base.main').\nTo refactor this,\nWe will need to move the Authorization related to methods from AbstractAuthenticationHelper to SecurityService.", "author": "GaneshSPatil", "createdAt": "2020-01-20T05:56:09Z", "path": "server/src/main/java/com/thoughtworks/go/server/service/SecurityService.java", "diffHunk": "@@ -207,6 +209,30 @@ public boolean isAuthorizedToViewTemplates(Username username) {\n         return goConfigService.cruiseConfig().isAuthorizedToViewTemplates(username.getUsername());\n     }\n \n+    //todo: needs refactoring use AbstractAuthenticationHelper.doesUserHasPermissions\n+    //a specific method to check whether a user has permission to access agent status report has been added\n+    public boolean doesUserHasPermissionsToViewAgentStatusReport(Username username, String elasticAgentProfileId) {", "originalCommit": "eb924e6c978a988318c41a2f54b31cf3d43415fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}