{"pr_number": 7669, "pr_title": "Remove all x509 related code", "pr_createdAt": "2020-01-28T11:54:47Z", "pr_url": "https://github.com/gocd/gocd/pull/7669", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc1OTQwMA==", "url": "https://github.com/gocd/gocd/pull/7669#discussion_r371759400", "bodyText": "@arvindsv and @maheshp is this OK for an implementation? Basically don't configure ssl on fresh installs.", "author": "ketan", "createdAt": "2020-01-28T11:56:46Z", "path": "jetty9/src/main/java/com/thoughtworks/go/server/Jetty9Server.java", "diffHunk": "@@ -76,7 +76,10 @@ public Jetty9Server(SystemEnvironment systemEnvironment, String password) {\n     public void configure() throws Exception {\n         server.addEventListener(mbeans());\n         server.addConnector(plainConnector());\n-        server.addConnector(sslConnector());\n+        Connector connector = sslConnector();\n+        if (connector != null) {\n+            server.addConnector(connector);\n+        }", "originalCommit": "dde744335cca33bf8df0a2602a46f17d27d03a14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc2OTM5Nw==", "url": "https://github.com/gocd/gocd/pull/7669#discussion_r371769397", "bodyText": "@ketan My opinion: I'm happy to replace these kinds of things with these pieces of documentation / help:\n\n\nUpon an upgrade, what do I need to do to keep everything the way it was? [Probably nothing in this case?]\n\n\nWhat do I need to do and in what order to get a new installation to use TLS termination between the agents and server, if I want.\n\n\nOptional: Warning users that it is not secure to run in an untrusted/open network, without doing what point 2 says.\n\n\nAs long as that is clear, I think it's fine.", "author": "arvindsv", "createdAt": "2020-01-28T12:20:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc1OTQwMA=="}], "type": "inlineReview"}, {"oid": "8670fbe7b8bd3fe96d86aaeb333840e2f3a4aa54", "url": "https://github.com/gocd/gocd/commit/8670fbe7b8bd3fe96d86aaeb333840e2f3a4aa54", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-01-29T13:00:15Z", "type": "forcePushed"}, {"oid": "c735eeccace3f7e5082f61a2f108750c6383eb23", "url": "https://github.com/gocd/gocd/commit/c735eeccace3f7e5082f61a2f108750c6383eb23", "message": "foo", "committedDate": "2020-02-05T11:03:13Z", "type": "forcePushed"}, {"oid": "77be9c070987bcfa77ed363165c16b8552b576b6", "url": "https://github.com/gocd/gocd/commit/77be9c070987bcfa77ed363165c16b8552b576b6", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-14T06:23:19Z", "type": "forcePushed"}, {"oid": "f4378b0bb6930bb8f3c98fbe3efbdc69067dfe9e", "url": "https://github.com/gocd/gocd/commit/f4378b0bb6930bb8f3c98fbe3efbdc69067dfe9e", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-17T08:11:45Z", "type": "forcePushed"}, {"oid": "8e40311cdc137c1e45519e91be0ff9f08c01f238", "url": "https://github.com/gocd/gocd/commit/8e40311cdc137c1e45519e91be0ff9f08c01f238", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-17T08:54:47Z", "type": "forcePushed"}, {"oid": "c4013621cbe4c5b9c9e0f173502c3700e6858157", "url": "https://github.com/gocd/gocd/commit/c4013621cbe4c5b9c9e0f173502c3700e6858157", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-17T11:47:08Z", "type": "forcePushed"}, {"oid": "1980770658e1c605f19b3f9293788a60bc2ef935", "url": "https://github.com/gocd/gocd/commit/1980770658e1c605f19b3f9293788a60bc2ef935", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-18T05:28:10Z", "type": "forcePushed"}, {"oid": "1f14e802f459a154c28694d25b82957188808759", "url": "https://github.com/gocd/gocd/commit/1f14e802f459a154c28694d25b82957188808759", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-18T05:38:59Z", "type": "forcePushed"}, {"oid": "6e16dcac4fc6a26848eb7b3ec6d819610f2a4b55", "url": "https://github.com/gocd/gocd/commit/6e16dcac4fc6a26848eb7b3ec6d819610f2a4b55", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-18T09:40:56Z", "type": "forcePushed"}, {"oid": "93f6937f5954d74c6ffd74de9c5009a82716ba6e", "url": "https://github.com/gocd/gocd/commit/93f6937f5954d74c6ffd74de9c5009a82716ba6e", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-18T09:48:30Z", "type": "forcePushed"}, {"oid": "f562cec492fd7754fcb460ef18a1ae88223400b4", "url": "https://github.com/gocd/gocd/commit/f562cec492fd7754fcb460ef18a1ae88223400b4", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-18T10:37:42Z", "type": "forcePushed"}, {"oid": "badaf44d86406fcac02e20ad8eaf9b7c918de8b8", "url": "https://github.com/gocd/gocd/commit/badaf44d86406fcac02e20ad8eaf9b7c918de8b8", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-18T11:10:53Z", "type": "commit"}, {"oid": "badaf44d86406fcac02e20ad8eaf9b7c918de8b8", "url": "https://github.com/gocd/gocd/commit/badaf44d86406fcac02e20ad8eaf9b7c918de8b8", "message": "Remove all x509 related code\n\n- The server will no longer generate any self signed SSL certificates.\n  It will however initialize the jetty SSL connector if the keystore is\n  available.\n- Agents, for quite some time have not been using mutual TLS, this\n  removes all code that generates the agent certs/private keys and\n  transmits the keys/certs and stores it in various\n  keystores/truststores", "committedDate": "2020-02-18T11:10:53Z", "type": "forcePushed"}]}