{"pr_number": 7646, "pr_title": "Add support for multiple databases ", "pr_createdAt": "2020-01-20T09:48:00Z", "pr_url": "https://github.com/gocd/gocd/pull/7646", "timeline": [{"oid": "1f569ac54a29598d3b7bfb68446b971362dcd9d2", "url": "https://github.com/gocd/gocd/commit/1f569ac54a29598d3b7bfb68446b971362dcd9d2", "message": "Add support for multiple database", "committedDate": "2020-01-21T11:17:48Z", "type": "forcePushed"}, {"oid": "d3da673852d29248d81d0efca269f2a130ab6707", "url": "https://github.com/gocd/gocd/commit/d3da673852d29248d81d0efca269f2a130ab6707", "message": "Perform migration before returning a datasource.", "committedDate": "2020-02-19T10:08:00Z", "type": "forcePushed"}, {"oid": "7016bf1025c7220cee571e61299881acdcdfb002", "url": "https://github.com/gocd/gocd/commit/7016bf1025c7220cee571e61299881acdcdfb002", "message": "Fix trigger\n\nThere are no gurantees that the \"cached\" statement works. It is best to\ncreate a new statement on every trigger invocation.", "committedDate": "2020-03-03T05:27:00Z", "type": "forcePushed"}, {"oid": "37c27da609c922371c8aa5b9d7f55ec1aaf4132a", "url": "https://github.com/gocd/gocd/commit/37c27da609c922371c8aa5b9d7f55ec1aaf4132a", "message": "Remove mariadb references.\n\nThis is a bit more work than I had anticipated.", "committedDate": "2020-03-04T07:45:38Z", "type": "forcePushed"}, {"oid": "b175e1b4e4cc7491539d138a8de0027e9795ec25", "url": "https://github.com/gocd/gocd/commit/b175e1b4e4cc7491539d138a8de0027e9795ec25", "message": "Remove mariadb references.\n\nThis is a bit more work than I had anticipated.", "committedDate": "2020-03-04T08:01:17Z", "type": "forcePushed"}, {"oid": "47eec18af6619c2792ef7aae637ca3a8fb3ddcca", "url": "https://github.com/gocd/gocd/commit/47eec18af6619c2792ef7aae637ca3a8fb3ddcca", "message": "Disable jacoco", "committedDate": "2020-03-04T10:38:51Z", "type": "forcePushed"}, {"oid": "c2bfc823194d84ed1bf83863b3961ec13ca540b9", "url": "https://github.com/gocd/gocd/commit/c2bfc823194d84ed1bf83863b3961ec13ca540b9", "message": "Disable jacoco", "committedDate": "2020-03-04T11:41:30Z", "type": "forcePushed"}, {"oid": "beca5388845d2a0b13a85f4b69e1a64c9969844f", "url": "https://github.com/gocd/gocd/commit/beca5388845d2a0b13a85f4b69e1a64c9969844f", "message": "Disable jacoco", "committedDate": "2020-03-05T07:16:20Z", "type": "forcePushed"}, {"oid": "c29b89d8615ba4830deac32aca9f1bdc43fcb0d5", "url": "https://github.com/gocd/gocd/commit/c29b89d8615ba4830deac32aca9f1bdc43fcb0d5", "message": "Remove useless system service.", "committedDate": "2020-03-05T12:33:57Z", "type": "forcePushed"}, {"oid": "3114e13dbdb50b9a9748bf2d88e6835b796e5849", "url": "https://github.com/gocd/gocd/commit/3114e13dbdb50b9a9748bf2d88e6835b796e5849", "message": "Remove useless system service.", "committedDate": "2020-03-05T13:12:22Z", "type": "forcePushed"}, {"oid": "772f1dc4e941a877775439758a85378151311181", "url": "https://github.com/gocd/gocd/commit/772f1dc4e941a877775439758a85378151311181", "message": "Disable jacoco", "committedDate": "2020-03-05T13:57:10Z", "type": "forcePushed"}, {"oid": "0e897348b7432c1166e6cdfa181b70c5d78255ab", "url": "https://github.com/gocd/gocd/commit/0e897348b7432c1166e6cdfa181b70c5d78255ab", "message": "Do not boot up if dbdeploy's `changelog` table is present.", "committedDate": "2020-03-11T06:44:59Z", "type": "forcePushed"}, {"oid": "27b2a9f4d3e93131cdff800460d437cf63b91dec", "url": "https://github.com/gocd/gocd/commit/27b2a9f4d3e93131cdff800460d437cf63b91dec", "message": "Do not boot up if dbdeploy's `changelog` table is present.", "committedDate": "2020-05-07T07:51:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ3MDI0Mw==", "url": "https://github.com/gocd/gocd/pull/7646#discussion_r428470243", "bodyText": "Fix test!", "author": "GaneshSPatil", "createdAt": "2020-05-21T06:30:39Z", "path": "db-support/db-support-base/src/test/java/com/thoughtworks/go/db/ConnectionManagerTest.java", "diffHunk": "@@ -13,8 +13,14 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n-package com.thoughtworks.go.server.database;\n \n-public interface Migration {\n-    void migrate();\n+package com.thoughtworks.go.db;\n+\n+import org.junit.jupiter.api.Test;\n+\n+class ConnectionManagerTest {\n+    @Test\n+    void foo() {\n+\n+    }", "originalCommit": "27b2a9f4d3e93131cdff800460d437cf63b91dec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODUyMzM1OQ==", "url": "https://github.com/gocd/gocd/pull/7646#discussion_r428523359", "bodyText": "rename UpdateLastTransitionedTim to UpdateLastTransitionedTime", "author": "GaneshSPatil", "createdAt": "2020-05-21T08:41:56Z", "path": "db-support/db-support-h2/src/main/java/com/thoughtworks/go/server/database/h2/UpdateLastTransitionedTim.java", "diffHunk": "@@ -22,28 +23,24 @@\n import java.sql.SQLException;\n import java.sql.Timestamp;\n \n-/**\n- * @understands\n- */\n-public class Migration_230007 implements Trigger {\n+public class UpdateLastTransitionedTim implements Trigger {", "originalCommit": "27b2a9f4d3e93131cdff800460d437cf63b91dec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d1616b98690a0077c071815f357a0567192685f5", "url": "https://github.com/gocd/gocd/commit/d1616b98690a0077c071815f357a0567192685f5", "message": "Fail starting up server when postgresqldb.properties exists", "committedDate": "2020-05-21T09:41:44Z", "type": "forcePushed"}, {"oid": "2f45ad614d2e69dc6230cefdf9aa2639f7afdb34", "url": "https://github.com/gocd/gocd/commit/2f45ad614d2e69dc6230cefdf9aa2639f7afdb34", "message": "Add missing indexes", "committedDate": "2020-06-05T03:58:04Z", "type": "forcePushed"}, {"oid": "a064a0887dab24bf67de610c46159234cd013f39", "url": "https://github.com/gocd/gocd/commit/a064a0887dab24bf67de610c46159234cd013f39", "message": "Add support for multiple databases\n\n* Remove h2 deltas and H2 dependency on server module.\n* Package all DB driver modules into the server war.\n* Lazily discover and load backup and query extensions depending on the\n  DB type.", "committedDate": "2020-06-12T03:38:30Z", "type": "commit"}, {"oid": "fc603d31733e33579df9e655bf98bdbc176c2027", "url": "https://github.com/gocd/gocd/commit/fc603d31733e33579df9e655bf98bdbc176c2027", "message": "Disable jacoco", "committedDate": "2020-06-12T03:38:30Z", "type": "commit"}, {"oid": "6cb5748170bdb160ce6ee547b7cdbd721f82dfa1", "url": "https://github.com/gocd/gocd/commit/6cb5748170bdb160ce6ee547b7cdbd721f82dfa1", "message": "Do not boot up if dbdeploy's `changelog` table is present.", "committedDate": "2020-06-12T03:38:30Z", "type": "commit"}, {"oid": "2e7c14e679ef188ad620eebd1fad1c6982e75844", "url": "https://github.com/gocd/gocd/commit/2e7c14e679ef188ad620eebd1fad1c6982e75844", "message": "Remove unused test file", "committedDate": "2020-06-12T03:38:30Z", "type": "commit"}, {"oid": "c41cc09870550e3faea43f226089ab8824895429", "url": "https://github.com/gocd/gocd/commit/c41cc09870550e3faea43f226089ab8824895429", "message": "Rename UpdateLastTransitionedTim to UpdateLastTransitionedTime", "committedDate": "2020-06-12T03:38:30Z", "type": "commit"}, {"oid": "ad8cf8221cdcfdab40cd739a1e53a47cb9d52834", "url": "https://github.com/gocd/gocd/commit/ad8cf8221cdcfdab40cd739a1e53a47cb9d52834", "message": "Fail starting up server when postgresqldb.properties exists", "committedDate": "2020-06-12T03:38:30Z", "type": "commit"}, {"oid": "5fad89c55cf9c70ef14c4c57fb4c97a43bd0e64d", "url": "https://github.com/gocd/gocd/commit/5fad89c55cf9c70ef14c4c57fb4c97a43bd0e64d", "message": "Add missing indexes", "committedDate": "2020-06-12T03:38:31Z", "type": "commit"}, {"oid": "35a07e8e74c59ccc49f7eec9a8e42681eb43e12f", "url": "https://github.com/gocd/gocd/commit/35a07e8e74c59ccc49f7eec9a8e42681eb43e12f", "message": "Postgres does not support the combination of IN and ANY.\n - so updated the postgres query to use = instead of IN. also refactored a bit so that there is only one if case", "committedDate": "2020-06-12T03:38:31Z", "type": "commit"}, {"oid": "c7e1150932e46bac886c68dc7562262a4ec3e16f", "url": "https://github.com/gocd/gocd/commit/c7e1150932e46bac886c68dc7562262a4ec3e16f", "message": "correct the version of jar expected to be present", "committedDate": "2020-06-12T03:38:31Z", "type": "commit"}, {"oid": "c7e1150932e46bac886c68dc7562262a4ec3e16f", "url": "https://github.com/gocd/gocd/commit/c7e1150932e46bac886c68dc7562262a4ec3e16f", "message": "correct the version of jar expected to be present", "committedDate": "2020-06-12T03:38:31Z", "type": "forcePushed"}]}