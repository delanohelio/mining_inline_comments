{"pr_number": 24499, "pr_title": "Add project api to compiler context", "pr_createdAt": "2020-06-30T01:27:04Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/24499", "timeline": [{"oid": "a8f4934ebd2a2ee4de1d4af1322187f06dd203ed", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a8f4934ebd2a2ee4de1d4af1322187f06dd203ed", "message": "Add project api to compiler context", "committedDate": "2020-06-30T01:21:17Z", "type": "commit"}, {"oid": "ca70a429321db0190c6d8cd6f9676722d3edaa23", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ca70a429321db0190c6d8cd6f9676722d3edaa23", "message": "Remove commented code", "committedDate": "2020-06-30T01:30:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM5NTc1Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24499#discussion_r447395757", "bodyText": "\"Return true is module exists in the project.\" has to be changed as \"Returns true if the module exists in the project.\"", "author": "miyurud", "createdAt": "2020-06-30T04:04:56Z", "path": "compiler/ballerina-lang/src/main/java/org/ballerinalang/project/Project.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package org.ballerinalang.project;\n+\n+import org.ballerinalang.compiler.JarResolver;\n+import org.ballerinalang.model.elements.PackageID;\n+import org.wso2.ballerinalang.compiler.util.CompilerContext;\n+\n+import java.nio.file.Path;\n+\n+/**\n+ * Defines functionality of the Project.\n+ *\n+ * @since 2.0.0\n+ */\n+public interface Project {\n+\n+    CompilerContext.Key<Project> PROJECT_KEY = new CompilerContext.Key<>();\n+\n+    /**\n+     * Return true is module exists in the project.", "originalCommit": "ca70a429321db0190c6d8cd6f9676722d3edaa23", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQyNTQzNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24499#discussion_r447425436", "bodyText": "getManifest() logic can be improved to load manifest only once.", "author": "hasithaa", "createdAt": "2020-06-30T05:51:16Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/SourceDirectoryManager.java", "diffHunk": "@@ -62,10 +68,15 @@ public static SourceDirectoryManager getInstance(CompilerContext context) {\n \n     private SourceDirectoryManager(CompilerContext context) {\n         context.put(PROJECT_DIR_KEY, this);\n+        // We will add the source directory manager as the project API to the context\n+        // This has to be further refactored with ProjectAPI Implementation\n+        context.put(PROJECT_KEY, this);\n \n         this.names = Names.getInstance(context);\n         this.options = CompilerOptions.getInstance(context);\n         this.sourceDirectory = initializeAndGetSourceDirectory(context);\n+        // load manifest only once\n+        this.manifest = getManifest();", "originalCommit": "ca70a429321db0190c6d8cd6f9676722d3edaa23", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc3NDcxMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24499#discussion_r447774713", "bodyText": "Created #24516 to track the issue.\nI will be merging this PR without this refactor since that change will touch many places. Will address it with the new Project API", "author": "hevayo", "createdAt": "2020-06-30T15:28:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQyNTQzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzYxOTI0Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24499#discussion_r447619243", "bodyText": "It seems even though \"org.ballerinalang.compiler.JarResolver\" is imported within this class its never used.", "author": "miyurud", "createdAt": "2020-06-30T11:44:38Z", "path": "compiler/ballerina-lang/src/main/java/org/ballerinalang/project/Project.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package org.ballerinalang.project;\n+\n+import org.ballerinalang.compiler.JarResolver;", "originalCommit": "ca70a429321db0190c6d8cd6f9676722d3edaa23", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ad4cf49436256b5f664a5e1647e104fd658f9205", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ad4cf49436256b5f664a5e1647e104fd658f9205", "message": "Fix check style issues", "committedDate": "2020-06-30T13:49:24Z", "type": "commit"}]}