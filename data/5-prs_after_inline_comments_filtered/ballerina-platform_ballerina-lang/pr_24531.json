{"pr_number": 24531, "pr_title": "Fix interop for intersection types", "pr_createdAt": "2020-07-01T18:02:22Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/24531", "timeline": [{"oid": "9b9861acf55b8ed3ceb5e8faaede54ff45a5dcce", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9b9861acf55b8ed3ceb5e8faaede54ff45a5dcce", "message": "Fix interop for intersection types", "committedDate": "2020-07-01T17:18:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzUxMDMxNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24531#discussion_r453510314", "bodyText": "Can't we avoid creating this array type each time this is called?", "author": "pubudu91", "createdAt": "2020-07-13T09:16:52Z", "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/nativeimpl/jvm/tests/StaticMethods.java", "diffHunk": "@@ -392,4 +395,36 @@ public static BFuture getFutureOnly(BFuture future) {\n     public static BTypedesc getTypeDescOnly(BTypedesc typeDesc) {\n         return typeDesc;\n     }\n+\n+    public static ArrayValue getValues(MapValue<BString, Long> intMap, MapValue<BString, BString> stringMap) {\n+        int length = intMap.size() + stringMap.size();\n+        ListInitialValueEntry[] entries = new ListInitialValueEntry[length];\n+\n+        int index = 0;\n+\n+        for (Map.Entry<BString, Long> intEntry : intMap.entrySet()) {\n+            entries[index++] = new ListInitialValueEntry.ExpressionEntry(intEntry.getValue());\n+        }\n+\n+        for (Map.Entry<BString, BString> stringEntry : stringMap.entrySet()) {\n+            entries[index++] = new ListInitialValueEntry.ExpressionEntry(stringEntry.getValue());\n+        }\n+\n+        return new ArrayValueImpl(new BArrayType(new BUnionType(new ArrayList(2) {{", "originalCommit": "9b9861acf55b8ed3ceb5e8faaede54ff45a5dcce", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDYyMjU2OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24531#discussion_r454622568", "bodyText": "The size which is passed to the BArrayType constructor depends on the actual map value arguments, so we can't create the array type just once. We could maybe extract out the union type, but this method is just called twice via a single test, so I'm not sure if there's much to gain by doing so. WDYT?", "author": "MaryamZi", "createdAt": "2020-07-14T20:25:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzUxMDMxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAzNTY0Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24531#discussion_r455035647", "bodyText": "Ah just now I noticed that this is a test file. No need then", "author": "pubudu91", "createdAt": "2020-07-15T13:06:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzUxMDMxNA=="}], "type": "inlineReview"}, {"oid": "1b752f55bd2a3c86ea0878f5089324418109d623", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1b752f55bd2a3c86ea0878f5089324418109d623", "message": "Merge branch 'master' of https://github.com/ballerina-lang/ballerina into fix-intersecn-interop", "committedDate": "2020-07-14T19:30:18Z", "type": "commit"}]}