{"pr_number": 23900, "pr_title": "Migrate stdlib modules to new table syntax", "pr_createdAt": "2020-06-10T19:40:22Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/23900", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODYxMTg1MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23900#discussion_r438611850", "bodyText": "Why TODO? Can we remove it", "author": "daneshk", "createdAt": "2020-06-11T08:02:56Z", "path": "stdlib/http/src/test/java/org/ballerinalang/stdlib/services/nativeimpl/cookie/CookieNativeFunctionNegativeTest.java", "diffHunk": "@@ -157,6 +157,7 @@ public void testAddPersistentCookieWithoutPersistentStore() {\n                           \"Cookie objects are in the Return Values\");\n     }\n \n+    //TODO Table remove - Fix", "originalCommit": "e73e3a10a2a163be74dca8873643214010549606", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODczOTIwMA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23900#discussion_r438739200", "bodyText": "Updated in 9a986a0", "author": "MadhukaHarith92", "createdAt": "2020-06-11T12:15:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODYxMTg1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1NDIwOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23900#discussion_r439154209", "bodyText": "Do we need to log this error here? As we are returning the error, anyway user will have to handle that.", "author": "Bhashinee", "createdAt": "2020-06-12T01:04:55Z", "path": "stdlib/io/src/main/java/org/ballerinalang/stdlib/io/nativeimpl/GetTable.java", "diffHunk": "@@ -35,69 +58,107 @@\n     private GetTable() {\n     }\n \n-    //TODO Table remove - Fix\n+    public static Object getTable(ObjectValue csvChannel, TypedescValue typedescValue, ArrayValue key) {\n+        try {\n+            final ObjectValue delimitedObj =\n+                    (ObjectValue) csvChannel.get(StringUtils.fromString(CSV_CHANNEL_DELIMITED_STRUCT_FIELD));\n+            DelimitedRecordChannel delimitedChannel = (DelimitedRecordChannel) delimitedObj\n+                    .getNativeData(IOConstants.TXT_RECORD_CHANNEL_NAME);\n+            if (delimitedChannel.hasReachedEnd()) {\n+                return IOUtils.createEoFError();\n+            }\n+            List<String[]> records = new ArrayList<>();\n+            while (delimitedChannel.hasNext()) {\n+                records.add(delimitedChannel.read());\n+            }\n+            return getTable(typedescValue, key, records);\n+        } catch (BallerinaIOException | BallerinaException e) {\n+            String msg = \"failed to process the delimited file: \" + e.getMessage();\n+            log.error(msg, e);", "originalCommit": "2f22aa2b56171e77d8490d6366e9f14276d4dfb9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE5MDAwNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23900#discussion_r439190004", "bodyText": "Updated in 4312c4f", "author": "MadhukaHarith92", "createdAt": "2020-06-12T03:40:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1NDIwOQ=="}], "type": "inlineReview"}, {"oid": "cc22d67d16aaa7d24f842266bfc56bc93f711255", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cc22d67d16aaa7d24f842266bfc56bc93f711255", "message": "Update io:csv with new table syntax", "committedDate": "2020-06-12T16:06:09Z", "type": "commit"}, {"oid": "809783c423d2ef71606849761db7879be58e565b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/809783c423d2ef71606849761db7879be58e565b", "message": "Update http:cookie with new table syntax", "committedDate": "2020-06-12T16:06:09Z", "type": "commit"}, {"oid": "9eb0f52b13170a97356c4ac8d6871896d8084e72", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9eb0f52b13170a97356c4ac8d6871896d8084e72", "message": "Enable io:csv test cases", "committedDate": "2020-06-12T16:06:09Z", "type": "commit"}, {"oid": "fedd4302446d6bc8051ac052527cad471902215b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fedd4302446d6bc8051ac052527cad471902215b", "message": "Fix review changes", "committedDate": "2020-06-12T16:06:10Z", "type": "commit"}]}