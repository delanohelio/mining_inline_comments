{"pr_number": 25746, "pr_title": "Improve BIR spec testing with distinct type id tests", "pr_createdAt": "2020-09-11T12:54:35Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/25746", "timeline": [{"oid": "a16b8a4e9a73c332607a19700e030ff8a9acfebd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a16b8a4e9a73c332607a19700e030ff8a9acfebd", "message": "Fix NPE in codeanalyzer's action invoke method", "committedDate": "2020-09-11T09:27:58Z", "type": "commit"}, {"oid": "0701b5895d2afb66a4c7ab5e56adef2f04247aa1", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0701b5895d2afb66a4c7ab5e56adef2f04247aa1", "message": "Add distinct type id tests to BIR spec tests", "committedDate": "2020-09-11T13:53:11Z", "type": "commit"}, {"oid": "0701b5895d2afb66a4c7ab5e56adef2f04247aa1", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0701b5895d2afb66a4c7ab5e56adef2f04247aa1", "message": "Add distinct type id tests to BIR spec tests", "committedDate": "2020-09-11T13:53:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEyMDk1NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25746#discussion_r487120954", "bodyText": "do we have to set the symbol to notFound explicitly here?", "author": "Kishanthan", "createdAt": "2020-09-11T15:26:57Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/TypeChecker.java", "diffHunk": "@@ -5102,6 +5102,7 @@ private void checkActionInvocation(BLangInvocation.BLangActionInvocation aInv, B\n         if (((varRef.symbol.tag & SymTag.ENDPOINT) != SymTag.ENDPOINT) && !aInv.async) {\n             dlog.error(aInv.pos, DiagnosticCode.INVALID_ACTION_INVOCATION, varRef.type);\n             this.resultType = symTable.semanticError;\n+            aInv.symbol = symTable.notFoundSymbol;", "originalCommit": "0701b5895d2afb66a4c7ab5e56adef2f04247aa1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEyOTM1MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25746#discussion_r487129351", "bodyText": "This is to prevent the NPE here \n  \n    \n      ballerina-lang/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/CodeAnalyzer.java\n    \n    \n         Line 2196\n      in\n      5ac9715\n    \n    \n    \n    \n\n        \n          \n           Symbols.isFlagOn(actionInvocation.symbol.flags, Flags.TRANSACTIONAL)) {", "author": "rdhananjaya", "createdAt": "2020-09-11T15:40:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEyMDk1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEzMTAyMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25746#discussion_r487131023", "bodyText": "can there be a situation where aInv already had the symbol and this change overrode that symbol ?", "author": "Kishanthan", "createdAt": "2020-09-11T15:43:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEyMDk1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEzNTkxNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25746#discussion_r487135916", "bodyText": "For non error cases the symbol is set here, (bottom of the function) \n  \n    \n      ballerina-lang/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/TypeChecker.java\n    \n    \n         Line 5130\n      in\n      a16b8a4\n    \n    \n    \n    \n\n        \n          \n           aInv.symbol = remoteFuncSymbol;", "author": "rdhananjaya", "createdAt": "2020-09-11T15:51:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEyMDk1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzIxODExMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25746#discussion_r487218111", "bodyText": "ack", "author": "Kishanthan", "createdAt": "2020-09-11T18:29:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEyMDk1NA=="}], "type": "inlineReview"}]}