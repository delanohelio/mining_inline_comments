{"pr_number": 24278, "pr_title": "Add jBallerina debugger integration tests", "pr_createdAt": "2020-06-17T17:38:34Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/24278", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc2ODk3NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24278#discussion_r441768975", "bodyText": "terminateProcess(Process process, String[] cmdArgs) method can be further simplified using its overloaded method as follows.\nprivate void terminateProcess(Process process, String[] cmdArgs) {\n        // Extracts the debug port from the command arguments.\n        String port = \"\";\n        for (int i = 0; i < cmdArgs.length; i++) {\n            if (cmdArgs[i].equals(\"--debug\")) {\n                port = cmdArgs[i + 1];\n                terminateProcess(process, port);\n                break;\n            }\n        }\n    }", "author": "NipunaRanasinghe", "createdAt": "2020-06-17T19:01:22Z", "path": "tests/ballerina-test-utils/src/main/java/org/ballerinalang/test/context/BMainInstance.java", "diffHunk": "@@ -413,12 +441,7 @@ private boolean isLeechingDone(ServerLogReader infoReader, ServerLogReader error\n      * @param cmdArgs ballerina command args.\n      */\n     private void terminateProcess(Process process, String[] cmdArgs) {", "originalCommit": "6575b8101cde5c933350879f052a653fa2e997d8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE2Mzg2Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24278#discussion_r442163862", "bodyText": "Fixed", "author": "praveennadarajah", "createdAt": "2020-06-18T11:41:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc2ODk3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3MjgxMA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24278#discussion_r441772810", "bodyText": "AFAIR, we have already covered this test scenario the the remote debug tests suite. Shall we remove this?", "author": "NipunaRanasinghe", "createdAt": "2020-06-17T19:08:38Z", "path": "tests/jballerina-debugger-integration-test/src/test/java/org/ballerinalang/debugger/test/adapter/build/MultiModuleBuildDebugTest.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.debugger.test.adapter.build;\n+\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.ballerinalang.debugger.test.DebugAdapterBaseTestCase;\n+import org.ballerinalang.debugger.test.utils.BallerinaTestDebugPoint;\n+import org.ballerinalang.test.context.BMainInstance;\n+import org.ballerinalang.test.context.BallerinaTestException;\n+import org.ballerinalang.test.context.LogLeecher;\n+import org.eclipse.lsp4j.debug.StoppedEventArguments;\n+import org.testng.Assert;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import java.io.File;\n+import java.nio.file.Paths;\n+\n+import static org.ballerinalang.debugger.test.utils.DebugUtils.findFreePort;\n+\n+/**\n+ * Test class for multi module related debug scenarios for build command.\n+ */\n+public class MultiModuleBuildDebugTest extends DebugAdapterBaseTestCase {\n+\n+    private BMainInstance balClient;\n+    private String projectPath;\n+    private int port;\n+    private Process process;\n+\n+    @BeforeClass\n+    public void setup() throws BallerinaTestException {\n+        balClient = new BMainInstance(balServer);\n+        testProjectName = \"breakpoint-tests\";\n+        testModuleName = \"foo\";\n+        projectPath = testProjectBaseDir + File.separator + testProjectName;\n+\n+        testModuleFileName = \"tests\" + File.separator + \"main_test.bal\";\n+        testProjectPath = testProjectBaseDir.toString() + File.separator + testProjectName;\n+        testEntryFilePath = Paths.get(testProjectPath, \"src\", testModuleName, testModuleFileName).toString();\n+    }\n+\n+    @Test\n+    public void testSuspendOnBallerinaModuleBuild() throws BallerinaTestException {\n+        port = findFreePort();\n+        String msg = \"Listening for transport dt_socket at address: \" + port;\n+        LogLeecher clientLeecher = new LogLeecher(msg);\n+        process = balClient.debugMain(\"build\", new String[]{\"--debug\", String.valueOf(port), testModuleName},\n+                null, new String[]{}, new LogLeecher[]{clientLeecher}, projectPath, 20,\n+                true);\n+        clientLeecher.waitForText(20000);\n+    }", "originalCommit": "6575b8101cde5c933350879f052a653fa2e997d8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE2NDAwNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24278#discussion_r442164004", "bodyText": "Fixed", "author": "praveennadarajah", "createdAt": "2020-06-18T11:42:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3MjgxMA=="}], "type": "inlineReview"}, {"oid": "840ae69126d44a0dda7c2a5e16a1e6c294a57314", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/840ae69126d44a0dda7c2a5e16a1e6c294a57314", "message": "Add jBallerina debugger integration tests", "committedDate": "2020-06-19T07:56:24Z", "type": "commit"}, {"oid": "f73c7381b658c437c70e69aa7cc86386d8482d90", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f73c7381b658c437c70e69aa7cc86386d8482d90", "message": "Add debugger test for build command", "committedDate": "2020-06-19T07:56:24Z", "type": "commit"}, {"oid": "328e24e54e8f1b131dea200805e4e5df0ab64e65", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/328e24e54e8f1b131dea200805e4e5df0ab64e65", "message": "Add review changes and minor fixes", "committedDate": "2020-06-19T07:56:24Z", "type": "commit"}, {"oid": "0b223f7cdfb80e13c65416262781b0e2127b3b38", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0b223f7cdfb80e13c65416262781b0e2127b3b38", "message": "Possible Fix for travis failure", "committedDate": "2020-06-19T07:56:24Z", "type": "commit"}, {"oid": "0b223f7cdfb80e13c65416262781b0e2127b3b38", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0b223f7cdfb80e13c65416262781b0e2127b3b38", "message": "Possible Fix for travis failure", "committedDate": "2020-06-19T07:56:24Z", "type": "forcePushed"}, {"oid": "8eb71e53b94b17c5dce9f0c3ae1bfcc403ac1fb9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8eb71e53b94b17c5dce9f0c3ae1bfcc403ac1fb9", "message": "Fix travis failure issue", "committedDate": "2020-06-19T10:03:05Z", "type": "commit"}]}