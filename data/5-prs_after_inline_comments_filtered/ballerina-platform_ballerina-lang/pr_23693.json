{"pr_number": 23693, "pr_title": "Add transformer for XMLNamespaceDeclarationNode", "pr_createdAt": "2020-06-03T10:07:09Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MTM5OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#discussion_r434461398", "bodyText": "Can't use single param createIdentifier method?", "author": "SupunS", "createdAt": "2020-06-03T10:16:43Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -1247,11 +1256,22 @@ public BLangNode transform(BinaryExpressionNode binaryExprNode) {\n \n     @Override\n     public BLangNode transform(FieldAccessExpressionNode fieldAccessExprNode) {\n-        BLangFieldBasedAccess bLFieldBasedAccess = (BLangFieldBasedAccess) TreeBuilder.createFieldBasedAccessNode();\n+        BLangFieldBasedAccess bLFieldBasedAccess;\n         Node fieldName = fieldAccessExprNode.fieldName();\n+        if (fieldName.kind() == SyntaxKind.QUALIFIED_NAME_REFERENCE) {\n+            QualifiedNameReferenceNode qualifiedFieldName = (QualifiedNameReferenceNode)fieldName;\n+            BLangFieldBasedAccess.BLangNSPrefixedFieldBasedAccess accessWithPrefixNode =\n+                    (BLangFieldBasedAccess.BLangNSPrefixedFieldBasedAccess)\n+                            TreeBuilder.createFieldBasedAccessWithPrefixNode();\n+            accessWithPrefixNode.nsPrefix = createIdentifier(qualifiedFieldName.modulePrefix());\n+            accessWithPrefixNode.field = createIdentifier(qualifiedFieldName.identifier());\n+            bLFieldBasedAccess = accessWithPrefixNode;\n+        } else {\n+            bLFieldBasedAccess = (BLangFieldBasedAccess) TreeBuilder.createFieldBasedAccessNode();\n+            bLFieldBasedAccess.field =\n+                    createIdentifier(getPosition(fieldName), ((SimpleNameReferenceNode) fieldName).name());", "originalCommit": "dc9e13e2bd2a717194b64171b2a77ef658a07e6a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ5NzA4OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#discussion_r434497089", "bodyText": "changed", "author": "KavinduZoysa", "createdAt": "2020-06-03T11:28:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MTM5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MjQwNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#discussion_r434462405", "bodyText": "Can't use single param createIdentifier method?", "author": "SupunS", "createdAt": "2020-06-03T10:18:30Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -2015,6 +2057,55 @@ public BLangNode transform(XMLTextNode xmlTextNode) {\n         return xmlTextLiteral;\n     }\n \n+    @Override\n+    public BLangNode transform(XMLNamespaceDeclarationNode xmlnsDeclNode) {\n+        BLangXMLNS xmlns = (BLangXMLNS) TreeBuilder.createXMLNSNode();\n+        BLangIdentifier prefixIdentifier = createIdentifier(getPosition(xmlnsDeclNode.namespacePrefix()),\n+                xmlnsDeclNode.namespacePrefix().text());", "originalCommit": "dc9e13e2bd2a717194b64171b2a77ef658a07e6a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ5OTU2MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#discussion_r434499561", "bodyText": "Changed", "author": "KavinduZoysa", "createdAt": "2020-06-03T11:33:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MjQwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MjY3Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#discussion_r434462673", "bodyText": "Can't use single param createIdentifier method?", "author": "SupunS", "createdAt": "2020-06-03T10:19:00Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -2015,6 +2057,55 @@ public BLangNode transform(XMLTextNode xmlTextNode) {\n         return xmlTextLiteral;\n     }\n \n+    @Override\n+    public BLangNode transform(XMLNamespaceDeclarationNode xmlnsDeclNode) {\n+        BLangXMLNS xmlns = (BLangXMLNS) TreeBuilder.createXMLNSNode();\n+        BLangIdentifier prefixIdentifier = createIdentifier(getPosition(xmlnsDeclNode.namespacePrefix()),\n+                xmlnsDeclNode.namespacePrefix().text());\n+\n+        xmlns.namespaceURI = createSimpleLiteral(xmlnsDeclNode.namespaceuri());\n+        xmlns.prefix = prefixIdentifier;\n+        xmlns.pos = getPosition(xmlnsDeclNode);\n+\n+        BLangXMLNSStatement xmlnsStmt = (BLangXMLNSStatement) TreeBuilder.createXMLNSDeclrStatementNode();\n+        xmlnsStmt.xmlnsDecl = xmlns;\n+        xmlnsStmt.pos = getPosition(xmlnsDeclNode);\n+        return xmlnsStmt;\n+    }\n+\n+    @Override\n+    public BLangNode transform(ModuleXMLNamespaceDeclarationNode xmlnsDeclNode) {\n+        BLangXMLNS xmlns = (BLangXMLNS) TreeBuilder.createXMLNSNode();\n+        BLangIdentifier prefixIdentifier = createIdentifier(getPosition(xmlnsDeclNode.namespacePrefix()),\n+                xmlnsDeclNode.namespacePrefix().text());", "originalCommit": "dc9e13e2bd2a717194b64171b2a77ef658a07e6a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ5OTY5NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#discussion_r434499695", "bodyText": "Changed", "author": "KavinduZoysa", "createdAt": "2020-06-03T11:33:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MjY3Mw=="}], "type": "inlineReview"}, {"oid": "4b4df89ae14cdaa4cfbf3a959cedfd3761fce741", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4b4df89ae14cdaa4cfbf3a959cedfd3761fce741", "message": "Transform XMLNamespaceDeclarationNode", "committedDate": "2020-06-04T19:13:23Z", "type": "commit"}, {"oid": "3e407239579ea90b69f8c5153826fadfad40ec3d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3e407239579ea90b69f8c5153826fadfad40ec3d", "message": "Add module level xml ns declaration node", "committedDate": "2020-06-04T19:13:23Z", "type": "commit"}, {"oid": "ec5d2534a1f6ef2bea38881c3290684a8e38a474", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ec5d2534a1f6ef2bea38881c3290684a8e38a474", "message": "Add the parser logic for xml ns delc", "committedDate": "2020-06-04T19:13:23Z", "type": "commit"}, {"oid": "e4a3e1a153b7473f1b388271022e2fd57d07148c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e4a3e1a153b7473f1b388271022e2fd57d07148c", "message": "Transform the module level xml ns decl", "committedDate": "2020-06-04T19:17:47Z", "type": "commit"}, {"oid": "4f3a71c5ad1db5d01188fbf505622cbeb3905c3f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4f3a71c5ad1db5d01188fbf505622cbeb3905c3f", "message": "Fix the failure parser tests", "committedDate": "2020-06-04T19:17:47Z", "type": "commit"}, {"oid": "7b70d6e60f68258309ab45188d8ca5bb151576e7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7b70d6e60f68258309ab45188d8ca5bb151576e7", "message": "Fix suggetions", "committedDate": "2020-06-04T19:17:47Z", "type": "commit"}, {"oid": "7b70d6e60f68258309ab45188d8ca5bb151576e7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7b70d6e60f68258309ab45188d8ca5bb151576e7", "message": "Fix suggetions", "committedDate": "2020-06-04T19:17:47Z", "type": "forcePushed"}]}