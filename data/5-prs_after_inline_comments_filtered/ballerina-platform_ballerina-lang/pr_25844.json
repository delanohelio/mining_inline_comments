{"pr_number": 25844, "pr_title": "Fix isolation analysis for object construction and object field initializers", "pr_createdAt": "2020-09-16T10:41:23Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/25844", "timeline": [{"oid": "268cba6fd8a744d8914e5caae1cc165eb485711f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/268cba6fd8a744d8914e5caae1cc165eb485711f", "message": "Fix isolation analysis for object construction and field initializers", "committedDate": "2020-09-16T10:33:36Z", "type": "commit"}, {"oid": "0bfc83e09fe0e59d7b2fea90ec9c47ea16a7bcbd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0bfc83e09fe0e59d7b2fea90ec9c47ea16a7bcbd", "message": "Fix tests", "committedDate": "2020-09-16T13:45:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQ4NTQ0Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25844#discussion_r489485446", "bodyText": "Better to create a git issue for this. Otherwise we might forget these with time.", "author": "SupunS", "createdAt": "2020-09-16T14:32:47Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/IsolationAnalyzer.java", "diffHunk": "@@ -831,6 +841,20 @@ public void visit(BLangInvocation.BLangActionInvocation actionInvocationExpr) {\n \n     @Override\n     public void visit(BLangTypeInit typeInitExpr) {\n+        BSymbol initInvocationSymbol = typeInitExpr.initInvocation.symbol;\n+        if (initInvocationSymbol != null && !isIsolated(initInvocationSymbol)) {\n+            inferredIsolated = false;\n+\n+            if (isInIsolatedFunction(env.enclInvokable)) {\n+                dlog.error(typeInitExpr.pos, DiagnosticCode.INVALID_NON_ISOLATED_INIT_EXPRESSION_IN_ISOLATED_FUNCTION);\n+            } else if (isRecordFieldDefaultValue(env.enclType)) {\n+                // TODO: 9/16/20 make this error once stdlibs are migrated", "originalCommit": "0bfc83e09fe0e59d7b2fea90ec9c47ea16a7bcbd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQ5MTYxMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25844#discussion_r489491612", "bodyText": "Created #25850. Thanks!", "author": "MaryamZi", "createdAt": "2020-09-16T14:40:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQ4NTQ0Ng=="}], "type": "inlineReview"}]}