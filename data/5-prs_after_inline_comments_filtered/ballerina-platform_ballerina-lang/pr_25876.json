{"pr_number": 25876, "pr_title": "Replace compiler-front-end diagnostics with the new diagnostic model", "pr_createdAt": "2020-09-17T10:05:12Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/25876", "timeline": [{"oid": "778df645208fd0d0ec4e9415c21e6e4257ca53ec", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/778df645208fd0d0ec4e9415c21e6e4257ca53ec", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang", "committedDate": "2020-09-02T04:45:47Z", "type": "commit"}, {"oid": "1edb301c824f546c394b5bac25dc2a0bceadb364", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1edb301c824f546c394b5bac25dc2a0bceadb364", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang", "committedDate": "2020-09-09T08:24:16Z", "type": "commit"}, {"oid": "17791db54b7117046ed3263ccf992125353ab4d4", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/17791db54b7117046ed3263ccf992125353ab4d4", "message": "Implement diagnostic API", "committedDate": "2020-09-09T09:20:52Z", "type": "commit"}, {"oid": "3ce3d9934d02395327af1ce44e95b067412b6e55", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3ce3d9934d02395327af1ce44e95b067412b6e55", "message": "Merge pull request #25684 from dulajdilshan/new-diagnostic\n\nImplement diagnostic API", "committedDate": "2020-09-09T10:19:11Z", "type": "commit"}, {"oid": "07d3483f43c7566199d37c1b71aa11fa597aa236", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/07d3483f43c7566199d37c1b71aa11fa597aa236", "message": "Clean up new diagnostic classes", "committedDate": "2020-09-09T11:31:19Z", "type": "commit"}, {"oid": "35e46b5d2bffc53f265c114aa872c4dd22c18242", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/35e46b5d2bffc53f265c114aa872c4dd22c18242", "message": "Merge pull request #25691 from SupunS/diagnostic-change\n\nClean up new diagnostic classes", "committedDate": "2020-09-09T11:49:33Z", "type": "commit"}, {"oid": "5735d73ee819753f153a6ff248cc4b2aa450d87f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5735d73ee819753f153a6ff248cc4b2aa450d87f", "message": "Remove packageID info from diagnostics", "committedDate": "2020-09-09T13:06:25Z", "type": "commit"}, {"oid": "82d312e1ab5f7149067d181d03aa4a38f2ddf660", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/82d312e1ab5f7149067d181d03aa4a38f2ddf660", "message": "Merge pull request #25692 from SupunS/diagnostic-change\n\nRemove packageID info from diagnostics", "committedDate": "2020-09-09T13:07:43Z", "type": "commit"}, {"oid": "a761c5eda397d5de51ba6081f1471eb0f755b696", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a761c5eda397d5de51ba6081f1471eb0f755b696", "message": "Implement diagnostic storing and logging functionalities", "committedDate": "2020-09-11T08:57:18Z", "type": "commit"}, {"oid": "5b8123c7960c96a35046051d9970e2814f586b64", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5b8123c7960c96a35046051d9970e2814f586b64", "message": "Update compiler with new diagnostic logger", "committedDate": "2020-09-11T08:57:18Z", "type": "commit"}, {"oid": "fdd344b92f051bc781f8a74fe70d7bfdc8494632", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fdd344b92f051bc781f8a74fe70d7bfdc8494632", "message": "Merge pull request #25737 from dulajdilshan/new-diagnostic\n\nNew diagnostic logger", "committedDate": "2020-09-11T09:34:11Z", "type": "commit"}, {"oid": "7c1b7c5ad63a6fc662ae4f0ef00781a94472cd33", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7c1b7c5ad63a6fc662ae4f0ef00781a94472cd33", "message": "Remove old diagnostic dependencies from LS side", "committedDate": "2020-09-11T13:24:16Z", "type": "commit"}, {"oid": "86205c06d5392d692ecf475cc451ca944b04568c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/86205c06d5392d692ecf475cc451ca944b04568c", "message": "Remove old diagnostic loggers and listeners", "committedDate": "2020-09-11T14:06:12Z", "type": "commit"}, {"oid": "4fcab91459e7b0b0eb4894d29081339661cb5100", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4fcab91459e7b0b0eb4894d29081339661cb5100", "message": "Remove DiagnosticCollector class", "committedDate": "2020-09-11T14:18:35Z", "type": "commit"}, {"oid": "b842fbba69be73862c0a70e1da0f6d9d868e91ec", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b842fbba69be73862c0a70e1da0f6d9d868e91ec", "message": "Merge pull request #25747 from SupunS/diagnostic-change\n\nRemove old diagnostic related classes", "committedDate": "2020-09-11T14:43:59Z", "type": "commit"}, {"oid": "8e28c9679fa4915e48e1c7cc962a0743c1900731", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8e28c9679fa4915e48e1c7cc962a0743c1900731", "message": "fix diagnostics issues in language server for new diagnostic API", "committedDate": "2020-09-12T03:38:27Z", "type": "commit"}, {"oid": "7d709409ba2acfc7b5b07da55e54a35e47cecc0a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7d709409ba2acfc7b5b07da55e54a35e47cecc0a", "message": "Merge pull request #25750 from nadeeshaan/diagnostic-change-local\n\nFix diagnostics issues in language server for new diagnostic API", "committedDate": "2020-09-12T04:02:48Z", "type": "commit"}, {"oid": "dd84f7f71139b82ac0bcd6bf44d092c0d730fe3a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dd84f7f71139b82ac0bcd6bf44d092c0d730fe3a", "message": "Remove severity field from BallerinaDiagnostic", "committedDate": "2020-09-12T04:35:49Z", "type": "commit"}, {"oid": "db2a6d4c5e3284aa4deb3f751b610b0a5bb46ac0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/db2a6d4c5e3284aa4deb3f751b610b0a5bb46ac0", "message": "Merge pull request #25751 from SupunS/diagnostic-change\n\nRemove severity field from BallerinaDiagnostic", "committedDate": "2020-09-12T04:37:32Z", "type": "commit"}, {"oid": "46f9248c8f73c5b28becec911448aa9da2a78612", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/46f9248c8f73c5b28becec911448aa9da2a78612", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change", "committedDate": "2020-09-12T04:44:38Z", "type": "commit"}, {"oid": "534e7a007fd7af183fb99338be7b32907cf408a0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/534e7a007fd7af183fb99338be7b32907cf408a0", "message": "Merge pull request #25752 from SupunS/diagnostic-change\n\nSync with master", "committedDate": "2020-09-12T04:46:41Z", "type": "commit"}, {"oid": "08aa3e97fb94ba0ab0a2e2f05b9c57ff50a34fc8", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/08aa3e97fb94ba0ab0a2e2f05b9c57ff50a34fc8", "message": "Remove diagnostic console print", "committedDate": "2020-09-14T09:06:05Z", "type": "commit"}, {"oid": "d8ecf2fbaffc036759fbb992d0ea3ade723a8dd7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d8ecf2fbaffc036759fbb992d0ea3ade723a8dd7", "message": "Remove `CompileResultDiagnosticListener` and update the `CompileResult` to get the diagnostics from the `BLangPackage`", "committedDate": "2020-09-14T09:10:19Z", "type": "commit"}, {"oid": "46c72cbd65f96d612b746b0ff5a7c20f03652992", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/46c72cbd65f96d612b746b0ff5a7c20f03652992", "message": "Update ballerina-test-utils/build.gradle with `ballerina-tools-api`", "committedDate": "2020-09-14T09:10:20Z", "type": "commit"}, {"oid": "aaecbd7c273ded617fbefeddf0d0933ebbd2478a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aaecbd7c273ded617fbefeddf0d0933ebbd2478a", "message": "Update tests with new diagnostic api", "committedDate": "2020-09-14T09:10:20Z", "type": "commit"}, {"oid": "0b68488c50760ef29db4e1100f7c17febe36a1a3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0b68488c50760ef29db4e1100f7c17febe36a1a3", "message": "Remove checkstyle issues and refactor some tests", "committedDate": "2020-09-15T03:39:57Z", "type": "commit"}, {"oid": "02f52bfb2c89cefdf08b4107c3dde234924c4f94", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/02f52bfb2c89cefdf08b4107c3dde234924c4f94", "message": "Merge pull request #25755 from dulajdilshan/new-diagnostic\n\nRemove `CompileResultDiagnosticListener` and update the tests to compatible with new diagnostic api", "committedDate": "2020-09-15T05:53:02Z", "type": "commit"}, {"oid": "b89b5ae859fda7e2fcd92f1b514ca43c35f8cf0e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b89b5ae859fda7e2fcd92f1b514ca43c35f8cf0e", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change", "committedDate": "2020-09-15T05:53:53Z", "type": "commit"}, {"oid": "7ec937d9815618b2e362f9f78fc0fa7c02887263", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7ec937d9815618b2e362f9f78fc0fa7c02887263", "message": "Merge pull request #25798 from SupunS/diagnostic-change\n\nSync with master", "committedDate": "2020-09-15T05:55:39Z", "type": "commit"}, {"oid": "3ec941cb10d1f31a7732ee185fb5b956b5fdb4e3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3ec941cb10d1f31a7732ee185fb5b956b5fdb4e3", "message": "Fix data mapper test utils", "committedDate": "2020-09-15T10:13:09Z", "type": "commit"}, {"oid": "038b74e3433d292da1fa8c8844df8f709d5ee956", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/038b74e3433d292da1fa8c8844df8f709d5ee956", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change", "committedDate": "2020-09-16T09:26:38Z", "type": "commit"}, {"oid": "fdc94aac0b781fa72543233e49ef598a9cdba37a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fdc94aac0b781fa72543233e49ef598a9cdba37a", "message": "Cleanup syntax diagnostic reporting", "committedDate": "2020-09-16T12:28:40Z", "type": "commit"}, {"oid": "6d92253335147d1e4ad4fd568d5da50058b4322b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6d92253335147d1e4ad4fd568d5da50058b4322b", "message": "Add ordered-list for diagnostics to BLangPackage", "committedDate": "2020-09-17T03:31:31Z", "type": "commit"}, {"oid": "4e26e13c218ea1673afd9f117387b64a6ecd6a09", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4e26e13c218ea1673afd9f117387b64a6ecd6a09", "message": "Change diagnostic-location constructor", "committedDate": "2020-09-17T03:31:32Z", "type": "commit"}, {"oid": "bb0ba6c71a45d23dc7135bbd9825dc70e24c8a93", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bb0ba6c71a45d23dc7135bbd9825dc70e24c8a93", "message": "Improve ordering diagnostics", "committedDate": "2020-09-17T03:37:56Z", "type": "commit"}, {"oid": "6bd7f022bffc52fc042f8262545957faee3d4707", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6bd7f022bffc52fc042f8262545957faee3d4707", "message": "Merge pull request #25838 from dulajdilshan/new-diagnostic\n\nAdd ordered-list for diagnostics to BLangPackage", "committedDate": "2020-09-17T03:52:05Z", "type": "commit"}, {"oid": "655bb4045b712a668d84721d560593acb0938967", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/655bb4045b712a668d84721d560593acb0938967", "message": "Add a comparator for sorting diagnostics", "committedDate": "2020-09-17T04:15:47Z", "type": "commit"}, {"oid": "bbd72a517737db0807a5f84bc4cee2b09e214abf", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bbd72a517737db0807a5f84bc4cee2b09e214abf", "message": "Add a comparator for sorting diagnostics", "committedDate": "2020-09-17T04:56:10Z", "type": "commit"}, {"oid": "b35abc67b014a48f76b0dcbddda20068d7ae7358", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b35abc67b014a48f76b0dcbddda20068d7ae7358", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change\n\n\u0001 Conflicts:\n\u0001\tcompiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/tree/BLangPackage.java", "committedDate": "2020-09-17T05:08:48Z", "type": "commit"}, {"oid": "c03b7a28f71b709ea1b0efda7fa86babbf5205a5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c03b7a28f71b709ea1b0efda7fa86babbf5205a5", "message": "Fix error logging in type checker", "committedDate": "2020-09-17T05:52:47Z", "type": "commit"}, {"oid": "2fc680d574df429ca8b667a3dc287e7242aeb6f8", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2fc680d574df429ca8b667a3dc287e7242aeb6f8", "message": "Fix diagnostic locations for syntax errors", "committedDate": "2020-09-17T07:13:23Z", "type": "commit"}, {"oid": "03748ff5adae5d3f26b69ba4888eda3d20c519dc", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/03748ff5adae5d3f26b69ba4888eda3d20c519dc", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change", "committedDate": "2020-09-17T07:29:27Z", "type": "commit"}, {"oid": "012655b057b84b1789233541025cd8318ade4662", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/012655b057b84b1789233541025cd8318ade4662", "message": "Fix obtaining diagnostics for unit tests", "committedDate": "2020-09-17T08:46:17Z", "type": "commit"}, {"oid": "bd89cf09e6428fe9397090af071acb5ef0b1fa74", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bd89cf09e6428fe9397090af071acb5ef0b1fa74", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change", "committedDate": "2020-09-17T08:51:24Z", "type": "commit"}, {"oid": "79b8ed16938fa7091e6fb8833dd7c4c51e2a11de", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/79b8ed16938fa7091e6fb8833dd7c4c51e2a11de", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change\n\n\u0001 Conflicts:\n\u0001\tcompiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/tree/BLangPackage.java", "committedDate": "2020-09-17T09:02:35Z", "type": "commit"}, {"oid": "03c5a417b0f1e7be5f4c2e83752d6b4507fbf12e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/03c5a417b0f1e7be5f4c2e83752d6b4507fbf12e", "message": "Fix checkstyle issues", "committedDate": "2020-09-17T09:21:11Z", "type": "commit"}, {"oid": "34ae4b404f71b8f8d81b2cbe590f0d49cfa43a84", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/34ae4b404f71b8f8d81b2cbe590f0d49cfa43a84", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change", "committedDate": "2020-09-17T09:32:26Z", "type": "commit"}, {"oid": "b5b96fbddd36be342f29b35235bb89bfa0ab5809", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b5b96fbddd36be342f29b35235bb89bfa0ab5809", "message": "Disable failing tests", "committedDate": "2020-09-17T10:09:03Z", "type": "commit"}, {"oid": "16f6a3b2a48f4fd16dd7bc270d264f487016a812", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/16f6a3b2a48f4fd16dd7bc270d264f487016a812", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change", "committedDate": "2020-09-17T11:57:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE3NzY1NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25876#discussion_r490177654", "bodyText": "Let's rename all the BallerinaDiagnostic** classes to BLangDiagnostic**, to be consistent with the other naming patterns.", "author": "SupunS", "createdAt": "2020-09-17T11:43:19Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/diagnostic/BallerinaDiagnostic.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package org.wso2.ballerinalang.compiler.diagnostic;\n+\n+import io.ballerina.tools.diagnostics.Diagnostic;\n+import io.ballerina.tools.diagnostics.DiagnosticInfo;\n+import io.ballerina.tools.diagnostics.Location;\n+\n+/**\n+ * Represent a diagnostic in the ballerina compiler front-end. A diagnostic can be a semantic\n+ * error, a warning or a info.\n+ *\n+ * @since 2.0.0\n+ */\n+public class BallerinaDiagnostic extends Diagnostic {", "originalCommit": "b5b96fbddd36be342f29b35235bb89bfa0ab5809", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE3ODE1OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25876#discussion_r490178158", "bodyText": "Shall we create an issue to track this", "author": "SupunS", "createdAt": "2020-09-17T11:44:21Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/diagnostic/BallerinaDiagnosticLog.java", "diffHunk": "@@ -0,0 +1,207 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package org.wso2.ballerinalang.compiler.diagnostic;\n+\n+import io.ballerina.tools.diagnostics.Diagnostic;\n+import io.ballerina.tools.diagnostics.DiagnosticInfo;\n+import io.ballerina.tools.diagnostics.DiagnosticSeverity;\n+import org.ballerinalang.model.elements.PackageID;\n+import org.ballerinalang.util.diagnostic.Diagnostic.DiagnosticPosition;\n+import org.ballerinalang.util.diagnostic.Diagnostic.Kind;\n+import org.ballerinalang.util.diagnostic.DiagnosticCode;\n+import org.ballerinalang.util.diagnostic.DiagnosticLog;\n+import org.wso2.ballerinalang.compiler.PackageCache;\n+import org.wso2.ballerinalang.compiler.tree.BLangPackage;\n+import org.wso2.ballerinalang.compiler.util.CompilerContext;\n+import org.wso2.ballerinalang.compiler.util.diagnotic.DiagnosticPos;\n+\n+import java.text.MessageFormat;\n+import java.util.Locale;\n+import java.util.ResourceBundle;\n+\n+/**\n+ * Logger class for logging various compiler diagnostics.\n+ * \n+ * @since 2.0.0\n+ */\n+public class BallerinaDiagnosticLog implements DiagnosticLog {\n+\n+    private static final CompilerContext.Key<BallerinaDiagnosticLog> DIAGNOSTIC_LOG_KEY = new CompilerContext.Key<>();\n+    private static final String ERROR_PREFIX = \"error\";\n+    private static final String WARNING_PREFIX = \"warning\";\n+    private static final String NOTE_PREFIX = \"note\";\n+    private static final ResourceBundle MESSAGES = ResourceBundle.getBundle(\"compiler\", Locale.getDefault());\n+\n+    private int errorCount = 0;\n+    private PackageCache packageCache;\n+    private boolean isMute = false;\n+\n+    private BallerinaDiagnosticLog(CompilerContext context) {\n+        context.put(DIAGNOSTIC_LOG_KEY, this);\n+        this.packageCache = PackageCache.getInstance(context);\n+    }\n+\n+    public static BallerinaDiagnosticLog getInstance(CompilerContext context) {\n+        BallerinaDiagnosticLog dLogger = context.get(DIAGNOSTIC_LOG_KEY);\n+        if (dLogger == null) {\n+            dLogger = new BallerinaDiagnosticLog(context);\n+        }\n+\n+        return dLogger;\n+    }\n+\n+    /**\n+     * Log an error.\n+     * \n+     * @param pos Position of the error in the source code.\n+     * @param code Error code\n+     * @param args Parameters associated with the error\n+     */\n+    public void error(DiagnosticPos pos, DiagnosticCode code, Object... args) {\n+        String msg = formatMessage(ERROR_PREFIX, code, args);\n+        reportDiagnostic(pos, msg, DiagnosticSeverity.ERROR);\n+    }\n+\n+    /**\n+     * Log a warning.\n+     * \n+     * @param pos Position of the warning in the source code.\n+     * @param code Error code\n+     * @param args Parameters associated with the error\n+     */\n+    public void warning(DiagnosticPos pos, DiagnosticCode code, Object... args) {\n+        String msg = formatMessage(WARNING_PREFIX, code, args);\n+        reportDiagnostic(pos, msg, DiagnosticSeverity.WARNING);\n+    }\n+\n+    /**\n+     * Log an info.\n+     * \n+     * @param pos Position of the info in the source code.\n+     * @param code Error code\n+     * @param args Parameters associated with the info\n+     */\n+    public void note(DiagnosticPos pos, DiagnosticCode code, Object... args) {\n+        String msg = formatMessage(NOTE_PREFIX, code, args);\n+        reportDiagnostic(pos, msg, DiagnosticSeverity.INFO);\n+    }\n+\n+    /**\n+     * Get the number of error logged in this logger.\n+     *\n+     * @return Number of errors logged.\n+     */\n+    public int errorCount() {\n+        return this.errorCount;\n+    }\n+\n+    /**\n+     * Set the error count.\n+     * \n+     * @param errorCount Error count\n+     */\n+    public void setErrorCount(int errorCount) {\n+        this.errorCount = errorCount;\n+    }\n+\n+    /**\n+     * Reset error count.\n+     */\n+    public void resetErrorCount() {\n+        this.errorCount = 0;\n+    }\n+\n+    /**\n+     * Mute the logger. This will stop reporting the diagnostic.\n+     * However it will continue to keep track of the number of errors.\n+     */\n+    public void mute() {\n+        this.isMute = true;\n+    }\n+\n+    /**\n+     * Unmute the logger. This will start reporting the diagnostic.\n+     */\n+    public void unmute() {\n+        this.isMute = false;\n+    }\n+\n+    @Override\n+    public void logDiagnostic(Kind kind, DiagnosticPosition pos, CharSequence message) {\n+        DiagnosticSeverity severity;\n+        switch (kind) {\n+            case ERROR:\n+                severity = DiagnosticSeverity.ERROR;\n+                break;\n+            case WARNING:\n+                severity = DiagnosticSeverity.WARNING;\n+                break;\n+            case NOTE:\n+            default:\n+                severity = DiagnosticSeverity.INFO;\n+                break;\n+        }\n+\n+        reportDiagnostic((DiagnosticPos) pos, message.toString(), severity);\n+    }\n+\n+    /**\n+     * Report a diagnostic for a given package.\n+     * \n+     * @param pkgId Package ID of the diagnostic associated with\n+     * @param diagnostic\n+     */\n+    public void logDiagnostic(PackageID pkgId, Diagnostic diagnostic) {\n+        if (diagnostic.diagnosticInfo().severity() == DiagnosticSeverity.ERROR) {\n+            this.errorCount++;\n+        }\n+\n+        storeDiagnosticInPackage(pkgId, diagnostic);\n+    }\n+\n+    // private helper methods\n+\n+    private String formatMessage(String prefix, DiagnosticCode code, Object[] args) {\n+        String msgKey = MESSAGES.getString(prefix + \".\" + code.getValue());\n+        return MessageFormat.format(msgKey, args);\n+    }\n+\n+    private void reportDiagnostic(DiagnosticPos pos, String msg, DiagnosticSeverity severity) {\n+        if (severity == DiagnosticSeverity.ERROR) {\n+            this.errorCount++;\n+        }\n+\n+        if (this.isMute) {\n+            return;\n+        }\n+\n+        // TODO: Add 'code' and 'messageTemplate' to the DiagnosticInfo", "originalCommit": "b5b96fbddd36be342f29b35235bb89bfa0ab5809", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM4NzM5Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25876#discussion_r490387396", "bodyText": "Created #25901", "author": "dulajdilshan", "createdAt": "2020-09-17T16:20:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE3ODE1OA=="}], "type": "inlineReview"}, {"oid": "4d3f51a29652c7b622e6240720ecc5fefe98ae6c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4d3f51a29652c7b622e6240720ecc5fefe98ae6c", "message": "Log compile errors to console", "committedDate": "2020-09-17T15:00:29Z", "type": "commit"}, {"oid": "5dbc6b178717d3c4388f515947e98c1bc1193cf3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5dbc6b178717d3c4388f515947e98c1bc1193cf3", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change", "committedDate": "2020-09-17T15:09:51Z", "type": "commit"}, {"oid": "4e095cc3c9350c65f1898942bd742c1d84520df7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4e095cc3c9350c65f1898942bd742c1d84520df7", "message": "Disable ballerina-data-mapper-test", "committedDate": "2020-09-17T15:22:50Z", "type": "commit"}, {"oid": "2d23ac58a8d9b11fa7add784e42aa8e2694ad702", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2d23ac58a8d9b11fa7add784e42aa8e2694ad702", "message": "Enable and correct record-field-access-negative-test", "committedDate": "2020-09-17T15:30:46Z", "type": "commit"}, {"oid": "d3876d60ba90088ca5ba0b1721b946409ce28b0d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d3876d60ba90088ca5ba0b1721b946409ce28b0d", "message": "Rename BallerinaDiagnostic** to BLangDiagnostic**", "committedDate": "2020-09-17T15:54:28Z", "type": "commit"}]}