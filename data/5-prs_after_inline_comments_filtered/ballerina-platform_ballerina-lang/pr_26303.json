{"pr_number": 26303, "pr_title": "Resolve Testerina Runtime dependencies", "pr_createdAt": "2020-10-12T05:49:30Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/26303", "timeline": [{"oid": "03c3770d2144ea375d6ee41d9b1cf722fce0d900", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/03c3770d2144ea375d6ee41d9b1cf722fce0d900", "message": "Add Runtime dependencies to RunTestsTask", "committedDate": "2020-10-12T05:14:24Z", "type": "commit"}, {"oid": "96d8794572bad92ff2fda9a25ee2e80ef6a96ec9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/96d8794572bad92ff2fda9a25ee2e80ef6a96ec9", "message": "Add Testerina runtime jars to Lib folder", "committedDate": "2020-10-12T05:41:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA1NzE0OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26303#discussion_r503057149", "bodyText": "Shall we move this set of dependency loading to a separate function?", "author": "Dilhasha", "createdAt": "2020-10-12T06:08:03Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/task/RunTestsTask.java", "diffHunk": "@@ -349,6 +349,18 @@ private int runTestSuit(Path jsonPath, BuildContext buildContext, HashSet<Path>\n \n         String jacocoAgentJarPath = Paths.get(System.getProperty(BALLERINA_HOME)).resolve(BALLERINA_HOME_BRE)\n                 .resolve(BALLERINA_HOME_LIB).resolve(TesterinaConstants.AGENT_FILE_NAME).toString();\n+\n+        Path jacocoCoreJarPath =  Paths.get(System.getProperty(BALLERINA_HOME)).resolve(BALLERINA_HOME_BRE)", "originalCommit": "96d8794572bad92ff2fda9a25ee2e80ef6a96ec9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA2NjM4OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26303#discussion_r503066389", "bodyText": "Moved to separate function", "author": "Ibaqu", "createdAt": "2020-10-12T06:34:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA1NzE0OQ=="}], "type": "inlineReview"}, {"oid": "5ff4d262e8aa269e59a37510d02b7d4898810098", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5ff4d262e8aa269e59a37510d02b7d4898810098", "message": "Address PR comments", "committedDate": "2020-10-12T06:31:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4MDEwOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26303#discussion_r503080109", "bodyText": "Can't we package into the testerina-runtime jar since its the only usage?", "author": "azinneera", "createdAt": "2020-10-12T07:07:10Z", "path": "misc/testerina/modules/testerina-runtime/src/main/java/org/ballerinalang/test/runtime/util/TesterinaConstants.java", "diffHunk": "@@ -54,4 +54,12 @@\n     public static final String REPORT_ZIP_NAME = REPORT_DIR_NAME + \".zip\";\n     public static final String REPORT_DATA_PLACEHOLDER = \"__data__\";\n     public static final String FILE_PROTOCOL = \"file://\";\n+\n+    //Coverage dependencies\n+    public static final String JACOCO_CORE_JAR = \"org.jacoco.core-0.8.5.jar\";", "originalCommit": "5ff4d262e8aa269e59a37510d02b7d4898810098", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4NjIzMA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26303#discussion_r503086230", "bodyText": "When I try to package it into the testerina-runtime.jar, it breaks the module dependency that testerina-core has on testerina-runtime.\nOriginally, the jar files were packed into testerina-runtime.jar using dist in the build.gradle file :dist 'org.jacoco:org.jacoco.core:0.8.5'. When reverting to this and building the distribution, the 'testerina-core' module fails to pick up 'testerina-runtime' module as a dependency and fails to compile.", "author": "Ibaqu", "createdAt": "2020-10-12T07:20:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4MDEwOQ=="}], "type": "inlineReview"}, {"oid": "205791d770d5332df64faff1562bf5143561bd56", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/205791d770d5332df64faff1562bf5143561bd56", "message": "Update asm-tree jar and remove redundant jar", "committedDate": "2020-10-12T10:12:41Z", "type": "commit"}]}