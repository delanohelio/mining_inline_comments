{"pr_number": 27326, "pr_title": "Align observability test-utils with new service type changes.", "pr_createdAt": "2020-12-03T11:56:16Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/27326", "timeline": [{"oid": "650438bf26262e8fe5272368a1bcd9ee29ab943b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/650438bf26262e8fe5272368a1bcd9ee29ab943b", "message": "Align observability test-utils with new service typing changes.", "committedDate": "2020-12-03T12:01:00Z", "type": "forcePushed"}, {"oid": "919b24b37c8f9927fb98d7577ca1d89d21451141", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/919b24b37c8f9927fb98d7577ca1d89d21451141", "message": "Add support to use service base path in mock listener", "committedDate": "2020-12-03T12:23:27Z", "type": "forcePushed"}, {"oid": "19357e1526b6a877e13913e23b7aaf61a76a4e1b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/19357e1526b6a877e13913e23b7aaf61a76a4e1b", "message": "Add support for different HTTP methods for mock listener", "committedDate": "2020-12-03T12:46:44Z", "type": "forcePushed"}, {"oid": "4376e83a815180bd25a5431d203eaa2a089d0897", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4376e83a815180bd25a5431d203eaa2a089d0897", "message": "Add support for different HTTP methods for mock listener", "committedDate": "2020-12-03T12:49:02Z", "type": "forcePushed"}, {"oid": "96ca32fa5e1a5041fef099f8abc2fd89d4116887", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/96ca32fa5e1a5041fef099f8abc2fd89d4116887", "message": "Add support for different HTTP methods for mock listener", "committedDate": "2020-12-03T12:52:38Z", "type": "forcePushed"}, {"oid": "4e70dfb92ae3f775c129598da5540570937ee89d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4e70dfb92ae3f775c129598da5540570937ee89d", "message": "Add support for different HTTP methods for mock listener", "committedDate": "2020-12-03T13:11:45Z", "type": "forcePushed"}, {"oid": "a8e3b455f69991c244259070bb88e4068938310e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a8e3b455f69991c244259070bb88e4068938310e", "message": "Add support to remove service from listener dynamically", "committedDate": "2020-12-03T13:54:01Z", "type": "forcePushed"}, {"oid": "50543c7dd1a2a6a8c576cf2407259702915fc2cc", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/50543c7dd1a2a6a8c576cf2407259702915fc2cc", "message": "Add support to remove service from listener dynamically", "committedDate": "2020-12-06T17:32:31Z", "type": "forcePushed"}, {"oid": "6418df871fe3bd5c10ca8a5ce3b5b8ba4829e654", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6418df871fe3bd5c10ca8a5ce3b5b8ba4829e654", "message": "Align observability test-utils with new service typing changes.", "committedDate": "2020-12-07T05:18:22Z", "type": "commit"}, {"oid": "4fc6a74783325bf8b3c3e5f9f68085552b8ec545", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4fc6a74783325bf8b3c3e5f9f68085552b8ec545", "message": "Add support to use service base path in mock listener", "committedDate": "2020-12-07T05:19:27Z", "type": "commit"}, {"oid": "8a378b75d8efe839af118687adde495c106ac185", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8a378b75d8efe839af118687adde495c106ac185", "message": "Add support for different HTTP methods for mock listener", "committedDate": "2020-12-07T05:19:28Z", "type": "commit"}, {"oid": "8238bdb92052e8928c6f5da0cd2358af7d8f4a70", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8238bdb92052e8928c6f5da0cd2358af7d8f4a70", "message": "Add support to remove service from listener dynamically", "committedDate": "2020-12-07T05:19:28Z", "type": "commit"}, {"oid": "8238bdb92052e8928c6f5da0cd2358af7d8f4a70", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8238bdb92052e8928c6f5da0cd2358af7d8f4a70", "message": "Add support to remove service from listener dynamically", "committedDate": "2020-12-07T05:19:28Z", "type": "forcePushed"}, {"oid": "186a70af7d0fda7be5cb86dc7f69329ad95007ca", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/186a70af7d0fda7be5cb86dc7f69329ad95007ca", "message": "Simplify test ballerina service in listener endpoint test", "committedDate": "2020-12-07T13:15:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA3NzQ5Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27326#discussion_r538077497", "bodyText": "What does this validation do? Is this specific to the test case?", "author": "rdhananjaya", "createdAt": "2020-12-08T06:51:40Z", "path": "tests/observability-test-utils/src/main/java/org/ballerina/testobserve/listenerendpoint/Resource.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.ballerina.testobserve.listenerendpoint;\n+\n+import io.ballerina.runtime.api.types.ResourceFunctionType;\n+import io.ballerina.runtime.api.types.Type;\n+import io.ballerina.runtime.api.values.BObject;\n+\n+import java.util.Objects;\n+\n+import static io.ballerina.runtime.api.constants.TypeConstants.STRING_TNAME;\n+import static org.ballerina.testobserve.listenerendpoint.Constants.CALLER_TYPE_NAME;\n+import static org.ballerina.testobserve.listenerendpoint.Constants.TEST_OBSERVE_PACKAGE;\n+\n+/**\n+ * Holds information related to a Ballerina service resource.\n+ */\n+public class Resource {\n+    private final BObject serviceObject;\n+    private final ResourceFunctionType resourceFunctionType;\n+    private final String basePath;\n+\n+    public Resource(BObject serviceObject, ResourceFunctionType resourceFunctionType, String basePath) {\n+        this.serviceObject = serviceObject;\n+        this.resourceFunctionType = resourceFunctionType;\n+        this.basePath = basePath;\n+\n+        // Validate resource\n+        int paramCount = this.getParamTypes().length;\n+        String resourcePath = this.getResourcePath();\n+        if (paramCount > 2) {", "originalCommit": "186a70af7d0fda7be5cb86dc7f69329ad95007ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM2NTI2OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27326#discussion_r538365268", "bodyText": "This is a validation for the mock listener. The listener at the moment, only supports resource functions and only accepts two arguments.\nThe validation is there as a way to throw an error if a developer doesn't adhere to the expected format. This is not something used by the end users.", "author": "nadundesilva", "createdAt": "2020-12-08T13:25:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA3NzQ5Nw=="}], "type": "inlineReview"}]}