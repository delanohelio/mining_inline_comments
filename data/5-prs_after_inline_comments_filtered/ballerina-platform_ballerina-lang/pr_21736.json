{"pr_number": 21736, "pr_title": "fix xml attribute access not returning error", "pr_createdAt": "2020-03-13T03:20:12Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/21736", "timeline": [{"oid": "295337c49f43e709e8cdd20fa7c93d621a4688f6", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/295337c49f43e709e8cdd20fa7c93d621a4688f6", "message": "Return an error if attribute is not found", "committedDate": "2020-03-13T03:16:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyMzc1OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21736#discussion_r392023759", "bodyText": "As discussed offline, we would have to consider optional access here right?\nShall we also add some tests?", "author": "MaryamZi", "createdAt": "2020-03-13T04:20:46Z", "path": "langlib/lang.__internal/src/main/java/org/ballerinalang/langlib/internal/GetAttribute.java", "diffHunk": "@@ -54,6 +54,10 @@ public static Object getAttribute(Strand strand, XMLValue xmlVal, String attrNam\n                     \"Invalid xml attribute access on xml \" + xmlVal.getNodeType().value());\n         }\n         XMLQName qname = new XMLQName(attrName);\n-        return xmlVal.getAttribute(qname.getLocalName(), qname.getUri());\n+        String attrVal = xmlVal.getAttribute(qname.getLocalName(), qname.getUri());\n+        if (attrVal == null) {\n+            return createError(XML_OPERATION_ERROR, \"attribute '\" + attrName + \"' not found\");", "originalCommit": "295337c49f43e709e8cdd20fa7c93d621a4688f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyNDI4NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21736#discussion_r392024284", "bodyText": "+1", "author": "rdhananjaya", "createdAt": "2020-03-13T04:23:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyMzc1OQ=="}], "type": "inlineReview"}, {"oid": "726949356b79539698681b27095327b46c63c11b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/726949356b79539698681b27095327b46c63c11b", "message": "Improve xml attribute access lax behavior\n\nAnd refactor xml internal functions", "committedDate": "2020-03-13T06:44:08Z", "type": "commit"}, {"oid": "14d25afcbb23478cad1a20ae07bc157002fc5181", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/14d25afcbb23478cad1a20ae07bc157002fc5181", "message": "Fix checkstyle failure", "committedDate": "2020-03-13T08:25:28Z", "type": "commit"}, {"oid": "14d25afcbb23478cad1a20ae07bc157002fc5181", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/14d25afcbb23478cad1a20ae07bc157002fc5181", "message": "Fix checkstyle failure", "committedDate": "2020-03-13T08:25:28Z", "type": "forcePushed"}, {"oid": "1cb475669fb56e17a1021d3631515d8282777aca", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1cb475669fb56e17a1021d3631515d8282777aca", "message": "Improve type checking of xml step expression", "committedDate": "2020-03-14T10:03:19Z", "type": "commit"}, {"oid": "bb7174033d7dfc233d029e2b3cf25cab94850efb", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bb7174033d7dfc233d029e2b3cf25cab94850efb", "message": "Improve xml serialization", "committedDate": "2020-03-16T03:31:43Z", "type": "commit"}, {"oid": "5a44cf7e3e4a992d7e2ae5fc68e74c85894457f3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5a44cf7e3e4a992d7e2ae5fc68e74c85894457f3", "message": "Stop re-declaring xmln prefix to stax writer", "committedDate": "2020-03-16T05:08:57Z", "type": "commit"}, {"oid": "5a44cf7e3e4a992d7e2ae5fc68e74c85894457f3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5a44cf7e3e4a992d7e2ae5fc68e74c85894457f3", "message": "Stop re-declaring xmln prefix to stax writer", "committedDate": "2020-03-16T05:08:57Z", "type": "forcePushed"}, {"oid": "8bcd1d82b65a70578cf5619c39db468ee1e419c8", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8bcd1d82b65a70578cf5619c39db468ee1e419c8", "message": "Fix failing test due to namespace changes", "committedDate": "2020-03-16T11:52:32Z", "type": "commit"}]}