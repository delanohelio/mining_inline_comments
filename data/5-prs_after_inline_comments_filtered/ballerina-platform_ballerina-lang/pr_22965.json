{"pr_number": 22965, "pr_title": "Add support for `T & readonly`", "pr_createdAt": "2020-04-29T10:34:02Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965", "timeline": [{"oid": "a306608368c98c5bdce0f9efb996675ead248147", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a306608368c98c5bdce0f9efb996675ead248147", "message": "Intro grammar changes for intersection types", "committedDate": "2020-04-22T06:39:30Z", "type": "commit"}, {"oid": "971e67838a3a79d654eb7f137fcfb5fcad8d4d7d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/971e67838a3a79d654eb7f137fcfb5fcad8d4d7d", "message": "Merge master", "committedDate": "2020-04-22T06:49:30Z", "type": "commit"}, {"oid": "c420999402ad1bcfa90e74afce355a470e89b17e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c420999402ad1bcfa90e74afce355a470e89b17e", "message": "Intro initial changes for IntersectionTypeNode", "committedDate": "2020-04-23T07:41:57Z", "type": "commit"}, {"oid": "e1fee6e5ab3badefcb7f9346224597eb0f631b93", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e1fee6e5ab3badefcb7f9346224597eb0f631b93", "message": "Fix tests", "committedDate": "2020-04-23T14:33:15Z", "type": "commit"}, {"oid": "4c059a6a96fe8bef15eb8dabc70623598d72a69e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4c059a6a96fe8bef15eb8dabc70623598d72a69e", "message": "Introduce readonly flags for immutable types at compile-time - Take 1", "committedDate": "2020-04-24T15:10:07Z", "type": "commit"}, {"oid": "a5b78e81089954333ea46278ae41ae49d2d8c9bc", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a5b78e81089954333ea46278ae41ae49d2d8c9bc", "message": "Resolve conflicts and merge master", "committedDate": "2020-04-24T16:30:17Z", "type": "commit"}, {"oid": "bd2ce027337c0839ce3ae5299e3ca5b53248951e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bd2ce027337c0839ce3ae5299e3ca5b53248951e", "message": "Regenerate BallerinaParser", "committedDate": "2020-04-24T16:56:08Z", "type": "commit"}, {"oid": "3a31f675a20b5530397afd1615d03064ba453b1f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3a31f675a20b5530397afd1615d03064ba453b1f", "message": "Fix noType not being set for immutable record with no rest field", "committedDate": "2020-04-25T06:45:21Z", "type": "commit"}, {"oid": "036751be6c1a6bee212c2f38f8cde7728521a767", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/036751be6c1a6bee212c2f38f8cde7728521a767", "message": "Impl. compile-time type-checking for selectively immutable values", "committedDate": "2020-04-26T17:06:39Z", "type": "commit"}, {"oid": "51df3920585009f81e537a077d63b256abb3285c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/51df3920585009f81e537a077d63b256abb3285c", "message": "Use generic type and flag to represent immutable types", "committedDate": "2020-04-27T09:52:33Z", "type": "commit"}, {"oid": "048c93764bc69f4c520dec951b6c9f4768b9ed63", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/048c93764bc69f4c520dec951b6c9f4768b9ed63", "message": "Add a readonly flag to runtime types", "committedDate": "2020-04-27T15:24:00Z", "type": "commit"}, {"oid": "b72919052fad45861daa36e577158a7589e9de26", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b72919052fad45861daa36e577158a7589e9de26", "message": "Mark finite types as readonly and fix minor issues", "committedDate": "2020-04-28T01:43:50Z", "type": "commit"}, {"oid": "b443921fda6929c34fb52f8c6f4b82a1bf3a0227", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b443921fda6929c34fb52f8c6f4b82a1bf3a0227", "message": "Fix runtime toString for types", "committedDate": "2020-04-28T06:50:31Z", "type": "commit"}, {"oid": "4f62ed2601f3fe6e1b62741412cc2fcee89131a9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4f62ed2601f3fe6e1b62741412cc2fcee89131a9", "message": "Merge master", "committedDate": "2020-04-28T07:59:47Z", "type": "commit"}, {"oid": "23a8c652bce49293d96d1d9d0a826708891bb11d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/23a8c652bce49293d96d1d9d0a826708891bb11d", "message": "Add readonly flags for XML subtypes", "committedDate": "2020-04-28T10:07:11Z", "type": "commit"}, {"oid": "de110318035dbb96940bf60fe7812cfcfa5a3f62", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/de110318035dbb96940bf60fe7812cfcfa5a3f62", "message": "Initial commit replacing freezing values with readonly types", "committedDate": "2020-04-28T15:32:58Z", "type": "commit"}, {"oid": "6fef73eaa0cf9c5a735315af973aa81d61bff7d6", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6fef73eaa0cf9c5a735315af973aa81d61bff7d6", "message": "Remove special casing setting members for JSON arrays", "committedDate": "2020-04-29T05:30:45Z", "type": "commit"}, {"oid": "fb9d673a32eafbb0de0a9dd52b399d41a6578c8f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fb9d673a32eafbb0de0a9dd52b399d41a6578c8f", "message": "Introduce an immutableType field for runtime types", "committedDate": "2020-04-29T06:52:15Z", "type": "commit"}, {"oid": "0409e3e350ae9da63dc7c4db18a6ba920abe9d35", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0409e3e350ae9da63dc7c4db18a6ba920abe9d35", "message": "Merge master", "committedDate": "2020-04-29T07:17:46Z", "type": "commit"}, {"oid": "f4b3279f6731fb18828a43acc486d85704729674", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f4b3279f6731fb18828a43acc486d85704729674", "message": "Remove outdated methods from TypedescValueImpl", "committedDate": "2020-04-29T07:44:02Z", "type": "commit"}, {"oid": "1c1415ba4d057b469be3aaf64bf66911e5006b49", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1c1415ba4d057b469be3aaf64bf66911e5006b49", "message": "Intro a method to add values to a map on init disregarding mutability", "committedDate": "2020-04-29T10:10:29Z", "type": "commit"}, {"oid": "c2dfae6e89d2d4be2db13db8ccfc2fe451ad89cb", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c2dfae6e89d2d4be2db13db8ccfc2fe451ad89cb", "message": "Fix type set for readonly broad type as CET for list/mapping", "committedDate": "2020-04-29T18:00:31Z", "type": "commit"}, {"oid": "84e80c868d3c7919688b1521f29efe57442558b7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/84e80c868d3c7919688b1521f29efe57442558b7", "message": "Fix cast error on readonly intersection with LHS union", "committedDate": "2020-04-29T19:22:01Z", "type": "commit"}, {"oid": "bec68356196ea3063bcc1151a8d690c8e9c1c316", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bec68356196ea3063bcc1151a8d690c8e9c1c316", "message": "Fix issues in union and xml sub-type intersection with readonly", "committedDate": "2020-04-30T05:43:24Z", "type": "commit"}, {"oid": "654050fb17632c6303cd2fe2ff422d8cb5b64b41", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/654050fb17632c6303cd2fe2ff422d8cb5b64b41", "message": "Fix types set for XML items", "committedDate": "2020-04-30T13:43:57Z", "type": "commit"}, {"oid": "5e495eaf0dff8cb6dd148a098bd8e9f925c31f74", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5e495eaf0dff8cb6dd148a098bd8e9f925c31f74", "message": "Add tests for selectively immutable XML", "committedDate": "2020-04-30T13:46:46Z", "type": "commit"}, {"oid": "f8531296a3856d24e399579ee276a3deb8ec4d3f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f8531296a3856d24e399579ee276a3deb8ec4d3f", "message": "Resolve conflicts and merge master", "committedDate": "2020-04-30T16:11:40Z", "type": "commit"}, {"oid": "80b3b24c4517e15c124180296e54830ee13681f5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/80b3b24c4517e15c124180296e54830ee13681f5", "message": "Regenerate BallerinaParser", "committedDate": "2020-04-30T16:17:17Z", "type": "commit"}, {"oid": "1a2d3be1a560b6041d14a2015f5e3e08be7d0239", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1a2d3be1a560b6041d14a2015f5e3e08be7d0239", "message": "Intro initial changes to support readonly intersection with table types", "committedDate": "2020-04-30T18:18:01Z", "type": "commit"}, {"oid": "fc80f1407afe8bf5bbff962b799634d8d3c2e8cf", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fc80f1407afe8bf5bbff962b799634d8d3c2e8cf", "message": "Fix setting initial values of immutable arrays", "committedDate": "2020-05-01T05:28:05Z", "type": "commit"}, {"oid": "ae7879762c91190f7e34b825902855ea84231ba7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ae7879762c91190f7e34b825902855ea84231ba7", "message": "Resolve conflicts and merge master", "committedDate": "2020-05-01T07:01:11Z", "type": "commit"}, {"oid": "44540313aca5bb00de7757da3c31b90db3d9c138", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/44540313aca5bb00de7757da3c31b90db3d9c138", "message": "Accept initial values when creating a mapping value", "committedDate": "2020-05-03T01:54:02Z", "type": "commit"}, {"oid": "5e051eea0b1f2a23de818565174ab57ef7c115aa", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5e051eea0b1f2a23de818565174ab57ef7c115aa", "message": "Refactor populateInitialValues in MapValueImpl", "committedDate": "2020-05-04T10:19:46Z", "type": "commit"}, {"oid": "2e480b90c208e97e730061b99cb217cd462dbdcf", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2e480b90c208e97e730061b99cb217cd462dbdcf", "message": "Intro changes to populate initial values on record creation", "committedDate": "2020-05-04T13:59:56Z", "type": "commit"}, {"oid": "c0cf9b83635b8d8a829bb95804367e3fbd3ad4f9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c0cf9b83635b8d8a829bb95804367e3fbd3ad4f9", "message": "Fix issues in record initial value population", "committedDate": "2020-05-04T18:21:16Z", "type": "commit"}, {"oid": "ba70e01a8c3fdd7c37452fea3b0b48a7ce5ffee2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ba70e01a8c3fdd7c37452fea3b0b48a7ce5ffee2", "message": "Fix desugar for transactions and fix tests", "committedDate": "2020-05-05T03:36:36Z", "type": "commit"}, {"oid": "7857763a979335041a38cfac3febd109bfcbcf49", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7857763a979335041a38cfac3febd109bfcbcf49", "message": "Change map values to only accept mapping initial values", "committedDate": "2020-05-05T04:13:18Z", "type": "commit"}, {"oid": "50bc4c4fe792b85562d8ef3dd74f870f38239047", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/50bc4c4fe792b85562d8ef3dd74f870f38239047", "message": "Accept initial values when creating lists", "committedDate": "2020-05-05T06:25:09Z", "type": "commit"}, {"oid": "2a7ebfc3d395439781d372b55a1f65d7ac5bdecd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2a7ebfc3d395439781d372b55a1f65d7ac5bdecd", "message": "Resolve conflicts and merge master", "committedDate": "2020-05-05T06:39:19Z", "type": "commit"}, {"oid": "ce0ff960e89184d567a503ffb210d19909ddabd7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ce0ff960e89184d567a503ffb210d19909ddabd7", "message": "Resolve conflicts and merge master", "committedDate": "2020-05-05T08:29:01Z", "type": "commit"}, {"oid": "b80013947e193013e5d9105778ab9e6a09071777", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b80013947e193013e5d9105778ab9e6a09071777", "message": "Fix bString failure for map store", "committedDate": "2020-05-05T10:49:47Z", "type": "commit"}, {"oid": "97251e450ad8135b6834f63de0ecbdb5c1a7f21e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/97251e450ad8135b6834f63de0ecbdb5c1a7f21e", "message": "Disallow field/member updates to immutable values at compile-time", "committedDate": "2020-05-05T17:36:24Z", "type": "commit"}, {"oid": "15f68b47680781c70d429e1f03c4c39068ae64a9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/15f68b47680781c70d429e1f03c4c39068ae64a9", "message": "Fix immutable type for tuple with no rest-desc and add tests", "committedDate": "2020-05-06T05:26:59Z", "type": "commit"}, {"oid": "a96a0fcf3c5b95527e650969f4df916b6ae480c9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a96a0fcf3c5b95527e650969f4df916b6ae480c9", "message": "Fix immutable record rest field type and add tests", "committedDate": "2020-05-06T11:15:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcyNTUwNw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r420725507", "bodyText": "I am in the process of removing createRecordInitWrapper method, can we please move (or duplicate) this in createInstantiateMethod", "author": "manuranga", "createdAt": "2020-05-06T11:41:27Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmValueGen.java", "diffHunk": "@@ -680,8 +688,12 @@ private void createRecordInitWrapper(ClassWriter cw, String className, BIRNode.B\n                 String refTypeClassName = getTypeValueClassName(typeRef.tsymbol.pkgID,\n                         toNameString(typeRef));\n                 mv.visitInsn(DUP2);\n+\n+                mv.visitInsn(ICONST_0);\n+                mv.visitTypeInsn(ANEWARRAY, MAPPING_INITIAL_VALUE_ENTRY);\n+\n                 mv.visitMethodInsn(INVOKESTATIC, refTypeClassName, \"$init\",\n-                        String.format(\"(L%s;L%s;)V\", STRAND, MAP_VALUE), false);\n+                        String.format(\"(L%s;L%s;[L%s;)V\", STRAND, MAP_VALUE, BINITIAL_VALUE_ENTRY), false);", "originalCommit": "a96a0fcf3c5b95527e650969f4df916b6ae480c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk1MDgwNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r420950804", "bodyText": "We don't need initial values for referenced record types, so having the initial value population logic in \"instantiate\" should be enough. Moved to createInstantiateMethod in 6f89a47.", "author": "MaryamZi", "createdAt": "2020-05-06T17:06:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcyNTUwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc2MjE5Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r420762192", "bodyText": "looks like there is an alignment issue here. probably due to merge conflicts with jvm codegen package classes.", "author": "Kishanthan", "createdAt": "2020-05-06T12:47:34Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmInstructionGen.java", "diffHunk": "@@ -1336,33 +1390,27 @@ void generateArrayStoreIns(BIRNonTerminator.FieldAccess inst) {\n         this.loadVar(inst.keyOp.variableDcl);\n         this.loadVar(inst.rhsOp.variableDcl);\n \n-        BType valueType = inst.rhsOp.variableDcl.type;\n-        BType varRefType = inst.lhsOp.variableDcl.type;\n-        if (varRefType.tag == TypeTags.JSON ||\n-                (varRefType.tag == TypeTags.ARRAY && ((BArrayType) varRefType).eType instanceof BJSONType)) {\n-            addBoxInsn(this.mv, valueType);\n-            this.mv.visitMethodInsn(INVOKESTATIC, JSON_UTILS, \"setArrayElement\",\n-                    String.format(\"(L%s;JL%s;)V\", OBJECT, OBJECT), false);\n-            return;\n-        }\n-\n-        if (TypeTags.isIntegerTypeTag(valueType.tag)) {\n-            this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, \"add\", \"(JJ)V\", true);\n-        } else if (valueType.tag == TypeTags.FLOAT) {\n-            this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, \"add\", \"(JD)V\", true);\n-        } else if (TypeTags.isStringTypeTag(valueType.tag)) {\n-            this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, \"add\",\n-                    String.format(\"(JL%s;)V\", JvmPackageGen.IS_BSTRING ? JvmConstants.B_STRING_VALUE :\n-                            STRING_VALUE), true);\n-        } else if (valueType.tag == TypeTags.BOOLEAN) {\n-            this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, \"add\", \"(JZ)V\", true);\n-        } else if (valueType.tag == TypeTags.BYTE) {\n-            this.mv.visitInsn(I2B);\n-            this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, \"add\", \"(JB)V\", true);\n-        } else {\n-            this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, \"add\", String.format(\"(JL%s;)V\", OBJECT), true);\n+            BType valueType = inst.rhsOp.variableDcl.type;\n+\n+            String method = \"add\";\n+\n+            if (TypeTags.isIntegerTypeTag(valueType.tag)) {\n+                this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, method, \"(JJ)V\", true);\n+            } else if (valueType.tag == TypeTags.FLOAT) {\n+                this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, method, \"(JD)V\", true);\n+            } else if (TypeTags.isStringTypeTag(valueType.tag)) {\n+                this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, method,\n+                                        String.format(\"(JL%s;)V\", JvmPackageGen.IS_BSTRING ?\n+                                                JvmConstants.B_STRING_VALUE : STRING_VALUE), true);\n+            } else if (valueType.tag == TypeTags.BOOLEAN) {\n+                this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, method, \"(JZ)V\", true);\n+            } else if (valueType.tag == TypeTags.BYTE) {\n+                this.mv.visitInsn(I2B);\n+                this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, method, \"(JB)V\", true);\n+            } else {\n+                this.mv.visitMethodInsn(INVOKEINTERFACE, ARRAY_VALUE, method, String.format(\"(JL%s;)V\", OBJECT), true);\n+            }", "originalCommit": "a96a0fcf3c5b95527e650969f4df916b6ae480c9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc2MjI5NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r420762294", "bodyText": "looks like there is an alignment issue here. probably due to merge conflicts with jvm codegen package classes.", "author": "Kishanthan", "createdAt": "2020-05-06T12:47:46Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmInstructionGen.java", "diffHunk": "@@ -1583,14 +1631,17 @@ void generateFPLoadIns(BIRNonTerminator.FPLoad inst, LambdaMetadata lambdaMetada\n \n     void generateNewXMLElementIns(BIRNonTerminator.NewXMLElement newXMLElement) {\n \n-        this.loadVar(newXMLElement.startTagOp.variableDcl);\n-        this.mv.visitTypeInsn(CHECKCAST, XML_QNAME);\n-        this.loadVar(newXMLElement.defaultNsURIOp.variableDcl);\n-        this.mv.visitMethodInsn(INVOKESTATIC, XML_FACTORY, \"createXMLElement\",\n-                String.format(\"(L%s;L%s;)L%s;\", XML_QNAME,\n-                        JvmPackageGen.IS_BSTRING ? JvmConstants.B_STRING_VALUE : STRING_VALUE, XML_VALUE), false);\n-        this.storeToVar(newXMLElement.lhsOp.variableDcl);\n-    }\n+            this.loadVar(newXMLElement.startTagOp.variableDcl);\n+            this.mv.visitTypeInsn(CHECKCAST, XML_QNAME);\n+            this.loadVar(newXMLElement.defaultNsURIOp.variableDcl);\n+            loadType(this.mv, newXMLElement.type);\n+\n+            this.mv.visitMethodInsn(INVOKESTATIC, XML_FACTORY, \"createXMLElement\",\n+                                    String.format(\"(L%s;L%s;L%s;)L%s;\", XML_QNAME,\n+                                                  JvmPackageGen.IS_BSTRING ? JvmConstants.B_STRING_VALUE :\n+                                                          STRING_VALUE, BTYPE, XML_VALUE), false);\n+            this.storeToVar(newXMLElement.lhsOp.variableDcl);\n+        }", "originalCommit": "a96a0fcf3c5b95527e650969f4df916b6ae480c9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc2MjM4MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r420762380", "bodyText": "looks like there is an alignment issue here. probably due to merge conflicts with jvm codegen package classes.", "author": "Kishanthan", "createdAt": "2020-05-06T12:47:56Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmInstructionGen.java", "diffHunk": "@@ -1627,23 +1678,28 @@ void generateNewXMLTextIns(BIRNonTerminator.NewXMLText newXMLText) {\n \n     void generateNewXMLCommentIns(BIRNonTerminator.NewXMLComment newXMLComment) {\n \n-        this.loadVar(newXMLComment.textOp.variableDcl);\n-        this.mv.visitMethodInsn(INVOKESTATIC, XML_FACTORY, \"createXMLComment\",\n-                String.format(\"(L%s;)L%s;\", JvmPackageGen.IS_BSTRING ? JvmConstants.B_STRING_VALUE :\n-                        STRING_VALUE, XML_VALUE),\n-                false);\n-        this.storeToVar(newXMLComment.lhsOp.variableDcl);\n-    }\n+            this.loadVar(newXMLComment.textOp.variableDcl);\n+\n+            loadType(this.mv, newXMLComment.type);\n+\n+            this.mv.visitMethodInsn(INVOKESTATIC, XML_FACTORY, \"createXMLComment\",\n+                                    String.format(\"(L%s;L%s;)L%s;\", JvmPackageGen.IS_BSTRING ?\n+                                                          JvmConstants.B_STRING_VALUE : STRING_VALUE, BTYPE, XML_VALUE),\n+                                    false);\n+            this.storeToVar(newXMLComment.lhsOp.variableDcl);\n+        }\n \n     void generateNewXMLProcIns(BIRNonTerminator.NewXMLProcIns newXMLPI) {\n \n-        this.loadVar(newXMLPI.targetOp.variableDcl);\n-        this.loadVar(newXMLPI.dataOp.variableDcl);\n-        String consVal = JvmPackageGen.IS_BSTRING ? JvmConstants.B_STRING_VALUE : STRING_VALUE;\n-        this.mv.visitMethodInsn(INVOKESTATIC, XML_FACTORY, \"createXMLProcessingInstruction\",\n-                String.format(\"(L%s;L%s;)L%s;\", consVal, consVal, XML_VALUE), false);\n-        this.storeToVar(newXMLPI.lhsOp.variableDcl);\n-    }\n+            this.loadVar(newXMLPI.targetOp.variableDcl);\n+            this.loadVar(newXMLPI.dataOp.variableDcl);\n+            loadType(this.mv, newXMLPI.type);\n+\n+            String consVal = JvmPackageGen.IS_BSTRING ? JvmConstants.B_STRING_VALUE : STRING_VALUE;\n+            this.mv.visitMethodInsn(INVOKESTATIC, XML_FACTORY, \"createXMLProcessingInstruction\",\n+                                    String.format(\"(L%s;L%s;L%s;)L%s;\", consVal, consVal, BTYPE, XML_VALUE), false);\n+            this.storeToVar(newXMLPI.lhsOp.variableDcl);\n+        }", "originalCommit": "a96a0fcf3c5b95527e650969f4df916b6ae480c9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c9189c764485ee726e398e579c6e6cb1348b4b0d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c9189c764485ee726e398e579c6e6cb1348b4b0d", "message": "Resolve conflicts and merge master", "committedDate": "2020-05-06T13:48:46Z", "type": "commit"}, {"oid": "6f89a4724b47b28bdfff4be4520f02ce1f4c6fed", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6f89a4724b47b28bdfff4be4520f02ce1f4c6fed", "message": "Move record initial value populn to createInstantiateMethod", "committedDate": "2020-05-06T16:23:09Z", "type": "commit"}, {"oid": "68d544ef5d17fb2075752cf630bd1c58e6720f78", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/68d544ef5d17fb2075752cf630bd1c58e6720f78", "message": "Fix integration tests", "committedDate": "2020-05-06T18:13:15Z", "type": "commit"}, {"oid": "1c099b87758dfec2c99b7538a2bf54bb69ad37a7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1c099b87758dfec2c99b7538a2bf54bb69ad37a7", "message": "Fix issue in readonly field of readonly intersection type and add tests", "committedDate": "2020-05-07T18:14:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3NzQzMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r419977433", "bodyText": "We can change this to.\n if (!unresolvedTypes.add(type)) {\n    return true;\n}\nThis should prevent double hash calculation to search in unresolvedTypes", "author": "KRVPerera", "createdAt": "2020-05-05T09:28:33Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/TypeChecker.java", "diffHunk": "@@ -1154,6 +1166,87 @@ private static boolean isReadonlyType(BType sourceType) {\n         return false;\n     }\n \n+    boolean isSelectivelyImmutableType(BType type) {\n+        return isSelectivelyImmutableType(type, new HashSet<>());\n+    }\n+\n+    public static boolean isSelectivelyImmutableType(BType type, Set<BType> unresolvedTypes) {\n+        if (isInherentlyImmutableType(type)) {\n+            // Always immutable.\n+            return false;\n+        }\n+\n+        if (unresolvedTypes.contains(type)) {\n+            return true;\n+        }\n+        unresolvedTypes.add(type);", "originalCommit": "ce0ff960e89184d567a503ffb210d19909ddabd7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk4NTY0Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r419985642", "bodyText": "IMO according to spec below types are always selectively immutable types.\n\nxml\nlist\nmapping\ntable\n\nI think this method is searching whether read-only bit is on for selectively immutable type. It may be better to change the function name.", "author": "KRVPerera", "createdAt": "2020-05-05T09:42:54Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/TypeChecker.java", "diffHunk": "@@ -1154,6 +1166,87 @@ private static boolean isReadonlyType(BType sourceType) {\n         return false;\n     }\n \n+    boolean isSelectivelyImmutableType(BType type) {\n+        return isSelectivelyImmutableType(type, new HashSet<>());\n+    }\n+\n+    public static boolean isSelectivelyImmutableType(BType type, Set<BType> unresolvedTypes) {", "originalCommit": "ce0ff960e89184d567a503ffb210d19909ddabd7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg3MzcxMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r421873713", "bodyText": "No, this does not check for the read-only bit.\nEven though mappings in general are selectively immutable, some mappings can never be immutable. e.g., map<future>. This method checks if the specified type can be immutable.\nIf it's still unclear maybe we can call this something like isPossiblyImmutableSelectivelyImmutableType, but given that the logic is quite obvious I'm not sure we need it.", "author": "MaryamZi", "createdAt": "2020-05-08T00:45:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk4NTY0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjAxNjk5Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r422016992", "bodyText": "Okay. I was thinking if someone wanted to write a method in future to check the read-only bit; then we may need to change the name at that time.", "author": "KRVPerera", "createdAt": "2020-05-08T08:29:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk4NTY0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk4NzYyNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r419987624", "bodyText": "This logic is not needed right. If this is added to return early? Don't see how this can improve performance for this small function. And inside this very method,  we have called both functions in the same place. Therefore I believe this is a double calculation.", "author": "KRVPerera", "createdAt": "2020-05-05T09:46:30Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/TypeChecker.java", "diffHunk": "@@ -1154,6 +1166,87 @@ private static boolean isReadonlyType(BType sourceType) {\n         return false;\n     }\n \n+    boolean isSelectivelyImmutableType(BType type) {\n+        return isSelectivelyImmutableType(type, new HashSet<>());\n+    }\n+\n+    public static boolean isSelectivelyImmutableType(BType type, Set<BType> unresolvedTypes) {\n+        if (isInherentlyImmutableType(type)) {", "originalCommit": "ce0ff960e89184d567a503ffb210d19909ddabd7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcyMzEwMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r421723102", "bodyText": "It is better to move this check outside of the loop (caching)\n!Symbols.isFlagOn(type.flags, Flags.READONLY)", "author": "KRVPerera", "createdAt": "2020-05-07T18:54:49Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/TypeChecker.java", "diffHunk": "@@ -1495,7 +1495,13 @@ private boolean validateRequiredAndReadonlyFields(BRecordType type,\n                         types.isAssignable(typePosPair.type, symTable.readonlyType)) {\n                     continue;\n                 }\n-                dlog.error(typePosPair.pos, DiagnosticCode.INVALID_FIELD_FOR_READONLY_RECORD_FIELD, fieldName);\n+\n+                if (!Symbols.isFlagOn(type.flags, Flags.READONLY) &&", "originalCommit": "1c099b87758dfec2c99b7538a2bf54bb69ad37a7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTczNDI1OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r421734258", "bodyText": "Why do we call checkType here?", "author": "KRVPerera", "createdAt": "2020-05-07T19:14:51Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/TypeChecker.java", "diffHunk": "@@ -2106,6 +2112,9 @@ public void visit(BLangFieldBasedAccess fieldAccessExpr) {\n                     if (isAllReadonlyTypes(varRefType)) {\n                         dlog.error(fieldAccessExpr.pos, DiagnosticCode.CANNOT_UPDATE_READONLY_VALUE_OF_TYPE,\n                                    varRefType);\n+                        types.checkType(fieldAccessExpr, actualType, this.expType);", "originalCommit": "1c099b87758dfec2c99b7538a2bf54bb69ad37a7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTczNTQwOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r421735408", "bodyText": "Is this a performance improvement? I think this is unnecessary.", "author": "KRVPerera", "createdAt": "2020-05-07T19:17:05Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/SymbolEnter.java", "diffHunk": "@@ -1334,7 +1334,8 @@ private void defineErrorDetails(List<BLangTypeDefinition> typeDefNodes, SymbolEn\n     }\n \n     private void defineFields(List<BLangTypeDefinition> typeDefNodes, SymbolEnv pkgEnv) {\n-        for (BLangTypeDefinition typeDef : typeDefNodes) {\n+        for (int i = 0; i < typeDefNodes.size(); i++) {", "originalCommit": "1c099b87758dfec2c99b7538a2bf54bb69ad37a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg3NjkyMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r421876921", "bodyText": "This is to avoid potential concurrent modification errors since we may have to define new record type defs while iterating through the current list.", "author": "MaryamZi", "createdAt": "2020-05-08T00:57:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTczNTQwOA=="}], "type": "inlineReview"}, {"oid": "fded5b89e96decd3b4b204def157fe1389a49068", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fded5b89e96decd3b4b204def157fe1389a49068", "message": "Address review suggestions", "committedDate": "2020-05-08T17:09:39Z", "type": "commit"}, {"oid": "1a5006032f2f74bcc3a2bc815ec79acbf7dac763", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1a5006032f2f74bcc3a2bc815ec79acbf7dac763", "message": "Fix equals method for runtime types", "committedDate": "2020-05-10T17:54:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjkzMTc5Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r422931793", "bodyText": "Check for optional fields.", "author": "MaryamZi", "createdAt": "2020-05-11T10:09:39Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/TypeChecker.java", "diffHunk": "@@ -2168,14 +2208,19 @@ public void visit(BLangIndexBasedAccess indexBasedAccessExpr) {\n \n         BType exprType = indexBasedAccessExpr.expr.type;\n         BLangExpression indexExpr = indexBasedAccessExpr.indexExpr;\n+\n         if (actualType != symTable.semanticError &&\n-                types.isSubTypeOfBaseType(exprType, TypeTags.RECORD) &&\n-                (indexBasedAccessExpr.lhsVar || indexBasedAccessExpr.compoundAssignmentLhsVar) &&\n-                (indexExpr.getKind() == NodeKind.LITERAL || isConst(indexExpr))) {\n-            String name = getConstFieldName(indexExpr);\n-            if (allRecordsHaveRequiredReadonlyField(exprType, name)) {\n+                (indexBasedAccessExpr.lhsVar || indexBasedAccessExpr.compoundAssignmentLhsVar)) {\n+            if (isAllReadonlyTypes(exprType)) {", "originalCommit": "1a5006032f2f74bcc3a2bc815ec79acbf7dac763", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE4NzI1Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r423187252", "bodyText": "This is not required since what we are checking here is something like\n(Foo & readonly)|(Bar & readonly) x = {};\nx[\"val\"] = 1;\n\nThis is always invalid since the value itself is immutable and cannot be updated.", "author": "MaryamZi", "createdAt": "2020-05-11T17:04:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjkzMTc5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1MTcyOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r422951728", "bodyText": "Accept a flag instead and set relevant type internally.", "author": "MaryamZi", "createdAt": "2020-05-11T10:46:32Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/XMLFactory.java", "diffHunk": "@@ -345,6 +386,31 @@ public static XMLValue createXMLProcessingInstruction(BString tartget, BString d\n         return createXMLProcessingInstruction(tartget.getValue(), data.getValue());\n     }\n \n+    /**\n+     * Create a processing instruction type XMLValue, specifying the type which will indicate mutability.\n+     *\n+     * @param target    PI target\n+     * @param data      PI data\n+     * @param type      The type for the PI\n+     * @return XMLValue Processing instruction type XMLValue\n+     */\n+    @Deprecated\n+    public static XMLValue createXMLProcessingInstruction(String target, String data, BType type) {\n+        return new XMLPi(data, target, type);\n+    }\n+\n+    /**\n+     * Create a processing instruction type XMLValue, specifying the type which will indicate mutability.\n+     *\n+     * @param target    PI target\n+     * @param data      PI data\n+     * @param type      The type for the PI\n+     * @return XMLValue Processing instruction type XMLValue\n+     */\n+    public static XMLValue createXMLProcessingInstruction(BString target, BString data, BType type) {", "originalCommit": "1a5006032f2f74bcc3a2bc815ec79acbf7dac763", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1MTgwOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r422951808", "bodyText": "The !Symbols.isFlagOn(field.type.flags, Flags.READONLY) check is not relevant here right? IIUC, this checks if there's a readonly field in a mutable record type? Plus, isn't it the same check as in the if block above? Is the field being readonly and the field's type being readonly two different things?", "author": "pubudu91", "createdAt": "2020-05-11T10:46:42Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/TypeChecker.java", "diffHunk": "@@ -1481,7 +1497,12 @@ private boolean validateRequiredAndReadonlyFields(BRecordType type,\n                         types.isAssignable(typePosPair.type, symTable.readonlyType)) {\n                     continue;\n                 }\n-                dlog.error(typePosPair.pos, DiagnosticCode.INVALID_FIELD_FOR_READONLY_RECORD_FIELD, fieldName);\n+\n+                if (mutableRecordType && !Symbols.isFlagOn(field.type.flags, Flags.READONLY)) {", "originalCommit": "1a5006032f2f74bcc3a2bc815ec79acbf7dac763", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE5NjUzOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22965#discussion_r423196539", "bodyText": "Yeah they're different.\nSo there are three possible scenarios.\n\nThe expected type is T & readonly where T is the record type. Meaning, the value itself will be immutable and whatever fields that are specified should also be immutable. This is what is checked with mutableRecordType.\n\nFoo & readonly f = {};\n\nA field's type is T & readonly. This means that whatever value set for that field will have to be immutable. That's the second check.\n\ntype Foo record {|\n    Bar & readonly b;\n|};\nAnd you can also update the b field in a Foo value after creating  the record value, but the Bar value must always be immutable.\n\nThen there's readonly fields where in addition to 2) there's also the constraint that the value cannot be updated once it is set.\n\ntype Foo record {|\n    readonly Bar b;\n|};\nWe only want to log an error here for 3.", "author": "MaryamZi", "createdAt": "2020-05-11T17:20:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1MTgwOA=="}], "type": "inlineReview"}, {"oid": "7876ba06f633a85fdd2bf2c3d6a4e7d0c7c11db7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7876ba06f633a85fdd2bf2c3d6a4e7d0c7c11db7", "message": "Table type descriptor support.", "committedDate": "2020-05-11T13:49:24Z", "type": "commit"}, {"oid": "f595f7d74e5f54dc941816de311f7b97f93c84b6", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f595f7d74e5f54dc941816de311f7b97f93c84b6", "message": "Undo unwanted file change", "committedDate": "2020-05-11T13:50:43Z", "type": "commit"}, {"oid": "0c6f43252a8b1fa220d51798fd08f67599ee19ef", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0c6f43252a8b1fa220d51798fd08f67599ee19ef", "message": "Recovery logic for table type descriptor.", "committedDate": "2020-05-11T17:58:12Z", "type": "commit"}, {"oid": "31e2116077fa4869f66608811649a9269a1817c8", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/31e2116077fa4869f66608811649a9269a1817c8", "message": "Changed the parsing logic of table type descriptor.", "committedDate": "2020-05-12T04:06:28Z", "type": "commit"}, {"oid": "1645c4937023954e5380256180b94f8d245f4ab8", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1645c4937023954e5380256180b94f8d245f4ab8", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into table-type", "committedDate": "2020-05-12T08:30:24Z", "type": "commit"}, {"oid": "fe35bfa7b8bfd556858dd50fcb4be9bf6af55f9f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fe35bfa7b8bfd556858dd50fcb4be9bf6af55f9f", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into table-type", "committedDate": "2020-05-12T08:30:52Z", "type": "commit"}, {"oid": "c54716720d2ef23919e1cbb25e4ad31965fe7f73", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c54716720d2ef23919e1cbb25e4ad31965fe7f73", "message": "Fix immutable-typed record fields not being set", "committedDate": "2020-05-12T08:37:09Z", "type": "commit"}, {"oid": "72a548b7eb3cdcf19e6ed7c679248ca2ce7e1e12", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/72a548b7eb3cdcf19e6ed7c679248ca2ce7e1e12", "message": "Test cases for table type desc", "committedDate": "2020-05-12T11:44:55Z", "type": "commit"}, {"oid": "5e3f312223917fd99072e30d592ec22e25607dda", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5e3f312223917fd99072e30d592ec22e25607dda", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into table-type", "committedDate": "2020-05-12T11:48:48Z", "type": "commit"}, {"oid": "46dd727efff25710fd64d0588c3b48b9ff2cb3ee", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/46dd727efff25710fd64d0588c3b48b9ff2cb3ee", "message": "Refactor intersection resultant type logic", "committedDate": "2020-05-12T11:53:54Z", "type": "commit"}, {"oid": "aef50d0881855cb08bc79156f1df51a09632fdd5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aef50d0881855cb08bc79156f1df51a09632fdd5", "message": "Add new lines to EOF", "committedDate": "2020-05-12T11:55:55Z", "type": "commit"}, {"oid": "699bb0c5d04ce7da8cb1a0d82a79d7e07b79dbca", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/699bb0c5d04ce7da8cb1a0d82a79d7e07b79dbca", "message": "Undo unwanted file changed", "committedDate": "2020-05-12T11:57:03Z", "type": "commit"}, {"oid": "5d416e32a769fa0c5219ca36cc0bf25b31d3f042", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5d416e32a769fa0c5219ca36cc0bf25b31d3f042", "message": "Use readonly flag instead of type for XML items", "committedDate": "2020-05-12T12:44:44Z", "type": "commit"}, {"oid": "81db81aded08bac4c7a3468e6e651df68e0cc98d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/81db81aded08bac4c7a3468e6e651df68e0cc98d", "message": "Resolve conflicts and merge master", "committedDate": "2020-05-12T17:31:45Z", "type": "commit"}, {"oid": "dabba66ff63a92288ad84035da235b21e710fd10", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dabba66ff63a92288ad84035da235b21e710fd10", "message": "Fix line length", "committedDate": "2020-05-12T18:45:21Z", "type": "commit"}, {"oid": "7dfdf3cb3fc0c17ef3bd29a12391b4f9c613a37e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7dfdf3cb3fc0c17ef3bd29a12391b4f9c613a37e", "message": "Changed recovery logic of table type desc.", "committedDate": "2020-05-13T07:57:14Z", "type": "commit"}, {"oid": "dfbd6ded06b789d50e6ed0755ad82dba9db26cd0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dfbd6ded06b789d50e6ed0755ad82dba9db26cd0", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into table-type", "committedDate": "2020-05-13T08:08:27Z", "type": "commit"}, {"oid": "2c5bd9ae4fce168f743cdce37792cdd13565fa35", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2c5bd9ae4fce168f743cdce37792cdd13565fa35", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into table-type", "committedDate": "2020-05-13T10:44:02Z", "type": "commit"}, {"oid": "8726eed7e159f2818ea66b584491504471d377bf", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8726eed7e159f2818ea66b584491504471d377bf", "message": "resolved conflicts", "committedDate": "2020-05-13T11:04:01Z", "type": "commit"}, {"oid": "8773e788e8362ab7c63dd8a4bf79de6ab8041fd5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8773e788e8362ab7c63dd8a4bf79de6ab8041fd5", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into table-type", "committedDate": "2020-05-13T12:22:22Z", "type": "commit"}, {"oid": "3dc36b685400efce90c1a52cb6348bcb74a095d3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3dc36b685400efce90c1a52cb6348bcb74a095d3", "message": "Merge pull request #23180 from rdulmina/table-type\n\nAdd table type support to the new parser.", "committedDate": "2020-05-13T14:35:15Z", "type": "commit"}, {"oid": "0c1a333e329b8045911eaf1e1cb8c7654e568a7d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0c1a333e329b8045911eaf1e1cb8c7654e568a7d", "message": "Resolve conflicts and merge master", "committedDate": "2020-05-13T15:43:08Z", "type": "commit"}, {"oid": "f9a6838dd62434976f110f4cb39774e6ea45a711", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f9a6838dd62434976f110f4cb39774e6ea45a711", "message": "Resolve conflicts and merge lang-preview1-M2", "committedDate": "2020-05-13T16:01:36Z", "type": "commit"}, {"oid": "d687c135d73cb8b4c31f13fcfc4e88b05c09c6e9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d687c135d73cb8b4c31f13fcfc4e88b05c09c6e9", "message": "Regenerate parser and fix generated-from comments", "committedDate": "2020-05-13T16:08:56Z", "type": "commit"}]}