{"pr_number": 27488, "pr_title": "Update BallerinaProjectService", "pr_createdAt": "2020-12-14T16:30:53Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/27488", "timeline": [{"oid": "eea8d7fdd2769b26acba18cb2841c443dcc83c1c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eea8d7fdd2769b26acba18cb2841c443dcc83c1c", "message": "Update BallerinaProjectService\n\nUpdate BallerinaProjectService with new project APIs.\nRelated issue: https://github.com/ballerina-platform/plugin-vscode/issues/99", "committedDate": "2020-12-14T16:49:08Z", "type": "commit"}, {"oid": "eea8d7fdd2769b26acba18cb2841c443dcc83c1c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eea8d7fdd2769b26acba18cb2841c443dcc83c1c", "message": "Update BallerinaProjectService\n\nUpdate BallerinaProjectService with new project APIs.\nRelated issue: https://github.com/ballerina-platform/plugin-vscode/issues/99", "committedDate": "2020-12-14T16:49:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU1MjM0OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27488#discussion_r542552349", "bodyText": "Shall we use the PROJ_MODULES(\"ballerinaProject/modules\")? Because even in the new project structure, modules are the components we need to show in the project view.", "author": "nadeeshaan", "createdAt": "2020-12-14T17:07:00Z", "path": "language-server/modules/langserver-core/src/main/java/org/ballerinalang/langserver/LSContextOperation.java", "diffHunk": "@@ -41,7 +41,7 @@\n     TXT_FOLDING_RANGE(\"text/foldingRange\"),\n     WS_SYMBOL(\"workspace/symbol\"),\n     WS_EXEC_CMD(\"workspace/executeCommand\"),\n-    PROJ_MODULES(\"ballerinaProject/modules\"),", "originalCommit": "eea8d7fdd2769b26acba18cb2841c443dcc83c1c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU1MzAyMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27488#discussion_r542553021", "bodyText": "Let's keep using ModulesRequest", "author": "nadeeshaan", "createdAt": "2020-12-14T17:07:52Z", "path": "language-server/modules/langserver-core/src/main/java/org/ballerinalang/langserver/extensions/ballerina/project/BallerinaProjectService.java", "diffHunk": "@@ -28,5 +28,5 @@\n @JsonSegment(\"ballerinaProject\")\n public interface BallerinaProjectService {\n     @JsonRequest\n-    CompletableFuture<ModulesResponse> modules(ModulesRequest request);\n+    CompletableFuture<PackagesResponse> packages(PackagesRequest request);", "originalCommit": "eea8d7fdd2769b26acba18cb2841c443dcc83c1c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU1ODU2Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27488#discussion_r542558567", "bodyText": "Instead of using the visitor to capture the symbols, what's the possibility of using https://github.com/ballerina-platform/ballerina-lang/blob/master/compiler/ballerina-lang/src/main/java/io/ballerina/compiler/api/SemanticModel.java#L60 API?", "author": "nadeeshaan", "createdAt": "2020-12-14T17:15:09Z", "path": "language-server/modules/langserver-core/src/main/java/org/ballerinalang/langserver/extensions/ballerina/project/ModuleVisitor.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://wso2.com) All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.ballerinalang.langserver.extensions.ballerina.project;\n+\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import io.ballerina.compiler.syntax.tree.FunctionDefinitionNode;\n+import io.ballerina.compiler.syntax.tree.Node;\n+import io.ballerina.compiler.syntax.tree.NodeVisitor;\n+import io.ballerina.compiler.syntax.tree.ServiceDeclarationNode;\n+import io.ballerina.compiler.syntax.tree.SyntaxKind;\n+import io.ballerina.compiler.syntax.tree.TypeDescriptorNode;\n+import io.ballerina.tools.text.LinePosition;\n+\n+import java.util.Optional;\n+\n+/**\n+ * Visitor class for module visitor.\n+ */\n+public class ModuleVisitor extends NodeVisitor {", "originalCommit": "eea8d7fdd2769b26acba18cb2841c443dcc83c1c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA5NzQxNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27488#discussion_r543097414", "bodyText": "Reported current limitations in #27493", "author": "prabushi", "createdAt": "2020-12-15T07:08:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU1ODU2Nw=="}], "type": "inlineReview"}]}