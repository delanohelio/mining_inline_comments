{"pr_number": 27619, "pr_title": "Fix function mocking runtime warning", "pr_createdAt": "2020-12-22T07:28:23Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/27619", "timeline": [{"oid": "8c07a156fc148453a7de55f86cd2b193b0134f4c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8c07a156fc148453a7de55f86cd2b193b0134f4c", "message": "Fix function mocking runtime warning", "committedDate": "2020-12-22T07:22:16Z", "type": "commit"}, {"oid": "c33eda5c7147ccbc0c1db0cd757344d7037f6fdd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c33eda5c7147ccbc0c1db0cd757344d7037f6fdd", "message": "Fix mocking for functions with the name test", "committedDate": "2020-12-22T14:22:09Z", "type": "commit"}, {"oid": "c33eda5c7147ccbc0c1db0cd757344d7037f6fdd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c33eda5c7147ccbc0c1db0cd757344d7037f6fdd", "message": "Fix mocking for functions with the name test", "committedDate": "2020-12-22T14:22:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg4ODA0OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27619#discussion_r547888049", "bodyText": "What if we collect the class list to a List object instead of a string and construct the string before assigning it? WDYT?", "author": "Dilhasha", "createdAt": "2020-12-23T10:27:31Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -317,6 +318,23 @@ private BLangFunctionBody generateBody() {\n                 generateFieldBasedAccess(\"functionToMockPackage\"),\n                 generateRHSExpr(functionToMockPackageVal));\n \n+        BLangTestablePackage bLangTestablePackage = this.bLangPackage.getTestablePkg();\n+        List<BLangCompilationUnit> compUnitList = bLangTestablePackage.getCompilationUnits();\n+\n+        String mockFunctionClassList = \"\";", "originalCommit": "c33eda5c7147ccbc0c1db0cd757344d7037f6fdd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg5MDQxMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27619#discussion_r547890411", "bodyText": "Yes. Initially, the idea I had was to include it in a list because it is a more straightforward and cleaner approach.\nHowever, I ran into problems creating the equivalent desugar code to include the various source files into the list. I also tried arrays but was running into compilation problems.\nThis is why I resorted to passing a simple string and handling it at the FunctionMock class. Im looking into improving this.", "author": "Ibaqu", "createdAt": "2020-12-23T10:33:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg4ODA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTczNDIyNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27619#discussion_r551734224", "bodyText": "As discussed, I have passed an array instead of a string. This is cleaner than the previous approach", "author": "Ibaqu", "createdAt": "2021-01-05T06:07:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg4ODA0OQ=="}], "type": "inlineReview"}, {"oid": "7a8860cbfef044fc917be40d382fd3aa6513314b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7a8860cbfef044fc917be40d382fd3aa6513314b", "message": "Refactor function mocking runtime fix", "committedDate": "2021-01-05T06:04:55Z", "type": "commit"}]}