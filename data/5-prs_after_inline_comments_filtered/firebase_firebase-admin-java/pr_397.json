{"pr_number": 397, "pr_title": "Add OIDC Auth provider config class", "pr_createdAt": "2020-04-24T19:21:35Z", "pr_url": "https://github.com/firebase/firebase-admin-java/pull/397", "timeline": [{"oid": "c5f391724b500caa717ea4c88f9e83c0fb3676df", "url": "https://github.com/firebase/firebase-admin-java/commit/c5f391724b500caa717ea4c88f9e83c0fb3676df", "message": "Add OIDC provider config class and base class.", "committedDate": "2020-04-24T19:07:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4ODI3NQ==", "url": "https://github.com/firebase/firebase-admin-java/pull/397#discussion_r414888275", "bodyText": "Also check for malformed URL.", "author": "hiranya911", "createdAt": "2020-04-24T22:02:30Z", "path": "src/main/java/com/google/firebase/auth/OidcProviderConfig.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.firebase.auth;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+\n+import com.google.api.client.util.Key;\n+import com.google.common.base.Strings;\n+import com.google.common.collect.ImmutableMap;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * Contains metadata associated with an OIDC Auth provider.\n+ *\n+ * <p>Instances of this class are immutable and thread safe.\n+ */\n+public final class OidcProviderConfig extends AuthProviderConfig {\n+\n+  @Key(\"clientId\")\n+  private String clientId;\n+\n+  @Key(\"issuer\")\n+  private String issuer;\n+\n+  public String getClientId() {\n+    return clientId;\n+  }\n+\n+  public String getIssuer() {\n+    return issuer;\n+  }\n+\n+  /**\n+   * A specification class for creating a new OIDC Auth provider.\n+   *\n+   * <p>Set the initial attributes of the new provider by calling various setter methods available\n+   * in this class.\n+   */\n+  public static final class CreateRequest extends AuthProviderConfig.CreateRequest {\n+\n+    /**\n+     * Creates a new {@link CreateRequest}, which can be used to create a new OIDC Auth provider.\n+     *\n+     * <p>The returned object should be passed to\n+     * {@link TenantAwareFirebaseAuth#createProviderConfig(CreateRequest)} to register the provider\n+     * information persistently.\n+     */\n+    public CreateRequest() { }\n+\n+    /**\n+     * Sets the client ID for the new provider.\n+     *\n+     * @param clientId a non-null, non-empty client ID string.\n+     */\n+    public CreateRequest setClientId(String clientId) {\n+      checkArgument(!Strings.isNullOrEmpty(clientId), \"client ID must not be null or empty\");\n+      properties.put(\"clientId\", clientId);\n+      return this;\n+    }\n+\n+    /**\n+     * Sets the issuer for the new provider.\n+     *\n+     * @param issuer a non-null, non-empty issuer string.\n+     */\n+    public CreateRequest setIssuer(String issuer) {\n+      checkArgument(!Strings.isNullOrEmpty(issuer), \"issuer must not be null or empty\");", "originalCommit": "c5f391724b500caa717ea4c88f9e83c0fb3676df", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTE1Njk1Mg==", "url": "https://github.com/firebase/firebase-admin-java/pull/397#discussion_r415156952", "bodyText": "Alright, I've added validation for this based off of the check I saw in ActionCodeSettings.java. I also added a quick unit test for this.", "author": "micahstairs", "createdAt": "2020-04-25T22:23:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4ODI3NQ=="}], "type": "inlineReview"}, {"oid": "1af6a9b2c46d6b1c1fa2e7147f08ddbb20290685", "url": "https://github.com/firebase/firebase-admin-java/commit/1af6a9b2c46d6b1c1fa2e7147f08ddbb20290685", "message": "Add validation for issuer URL", "committedDate": "2020-04-25T22:20:57Z", "type": "commit"}]}