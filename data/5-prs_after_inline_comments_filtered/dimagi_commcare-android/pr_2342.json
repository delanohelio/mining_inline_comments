{"pr_number": 2342, "pr_title": "Migrate to App Compat", "pr_createdAt": "2020-09-15T10:27:47Z", "pr_url": "https://github.com/dimagi/commcare-android/pull/2342", "timeline": [{"oid": "65fafd4fbd3d01e77d26f6c70588f8f0af4a7474", "url": "https://github.com/dimagi/commcare-android/commit/65fafd4fbd3d01e77d26f6c70588f8f0af4a7474", "message": "Moves Activity references to AppCompatActivity for non list activities", "committedDate": "2017-11-20T07:22:29Z", "type": "commit"}, {"oid": "8e5743284c0036eb371e7ffbcee91d1fa2248fc1", "url": "https://github.com/dimagi/commcare-android/commit/8e5743284c0036eb371e7ffbcee91d1fa2248fc1", "message": "Merge branch 'master' into appCompat", "committedDate": "2018-03-22T10:08:31Z", "type": "commit"}, {"oid": "4aa60412343d45f87fbe8ef949c59942b595faa3", "url": "https://github.com/dimagi/commcare-android/commit/4aa60412343d45f87fbe8ef949c59942b595faa3", "message": "Creates ListActivity impl based on AppCompatActivity", "committedDate": "2018-03-22T19:27:42Z", "type": "commit"}, {"oid": "e4c96253fcd5bca0da9dde14a472cbb6447c035d", "url": "https://github.com/dimagi/commcare-android/commit/e4c96253fcd5bca0da9dde14a472cbb6447c035d", "message": "getActionBar() -> getSupportActionBar(), getFragmentManager() -> getSupportFragmentManager()", "committedDate": "2018-03-23T10:58:56Z", "type": "commit"}, {"oid": "46a286a453135078b6566de7b1200ef4de9f7da2", "url": "https://github.com/dimagi/commcare-android/commit/46a286a453135078b6566de7b1200ef4de9f7da2", "message": "More import changes", "committedDate": "2018-03-26T09:18:39Z", "type": "commit"}, {"oid": "d65b0948e07aef5b38204136926fb13a996bc7de", "url": "https://github.com/dimagi/commcare-android/commit/d65b0948e07aef5b38204136926fb13a996bc7de", "message": "Merge branch 'master' into appCompat", "committedDate": "2018-04-09T10:59:44Z", "type": "commit"}, {"oid": "9c1a10ddadacbec437241cac9135dddb9014b797", "url": "https://github.com/dimagi/commcare-android/commit/9c1a10ddadacbec437241cac9135dddb9014b797", "message": "Styling for Progress Bar, Buttons", "committedDate": "2018-04-10T07:06:16Z", "type": "commit"}, {"oid": "a229e8eb69eab6a88281c71203e5ed500766e027", "url": "https://github.com/dimagi/commcare-android/commit/a229e8eb69eab6a88281c71203e5ed500766e027", "message": "Style changes", "committedDate": "2018-04-11T06:25:10Z", "type": "commit"}, {"oid": "3d4f7e71fae3999d92de9fe974942e34ce7e1878", "url": "https://github.com/dimagi/commcare-android/commit/3d4f7e71fae3999d92de9fe974942e34ce7e1878", "message": "Merge branch 'master' into appCompat", "committedDate": "2018-04-23T12:10:18Z", "type": "commit"}, {"oid": "d370e1bd183410e7180fdaae3855808b7c746acb", "url": "https://github.com/dimagi/commcare-android/commit/d370e1bd183410e7180fdaae3855808b7c746acb", "message": "Merge branch 'master' into appCompat", "committedDate": "2018-04-24T11:43:56Z", "type": "commit"}, {"oid": "66629ad4af8e20530ca053ec6533041b6858f011", "url": "https://github.com/dimagi/commcare-android/commit/66629ad4af8e20530ca053ec6533041b6858f011", "message": "Entity List, Preference Styling", "committedDate": "2018-04-25T08:16:22Z", "type": "commit"}, {"oid": "69260de15d299206e763100cbd29a2dc1fbc6477", "url": "https://github.com/dimagi/commcare-android/commit/69260de15d299206e763100cbd29a2dc1fbc6477", "message": "Merge branch 'master' into appCompat", "committedDate": "2018-05-02T12:27:39Z", "type": "commit"}, {"oid": "70414b2c508178b911584665b5ff7147fa4cabe5", "url": "https://github.com/dimagi/commcare-android/commit/70414b2c508178b911584665b5ff7147fa4cabe5", "message": "Dialogs Styling", "committedDate": "2018-05-04T10:19:41Z", "type": "commit"}, {"oid": "fa4a03534aeb18ba51c4e84735e06f6393bfd1a5", "url": "https://github.com/dimagi/commcare-android/commit/fa4a03534aeb18ba51c4e84735e06f6393bfd1a5", "message": "Uses spinner mode for Date and Time Widgets", "committedDate": "2018-05-07T11:12:53Z", "type": "commit"}, {"oid": "55b2420c8a3c024fab85856b0d50250a2a33ef55", "url": "https://github.com/dimagi/commcare-android/commit/55b2420c8a3c024fab85856b0d50250a2a33ef55", "message": "Fixes buttons text appearance", "committedDate": "2018-05-07T13:16:52Z", "type": "commit"}, {"oid": "cf31cee4a92d5398afae1662201dfec4af2a4607", "url": "https://github.com/dimagi/commcare-android/commit/cf31cee4a92d5398afae1662201dfec4af2a4607", "message": "Merge branch 'master' into appCompat", "committedDate": "2020-08-24T13:02:41Z", "type": "commit"}, {"oid": "ced208088a02f67c0c7548d1ab68402a6d84cf7c", "url": "https://github.com/dimagi/commcare-android/commit/ced208088a02f67c0c7548d1ab68402a6d84cf7c", "message": "Android x imports", "committedDate": "2020-09-05T09:52:30Z", "type": "commit"}, {"oid": "c51448bd24ca6e57d883b8b519787542768cc9e2", "url": "https://github.com/dimagi/commcare-android/commit/c51448bd24ca6e57d883b8b519787542768cc9e2", "message": "removed override as we don't have any 4.3 devices and onMenuItemSelected is final in AppCompat", "committedDate": "2020-09-05T09:57:53Z", "type": "commit"}, {"oid": "5d35f90b2d728df6ea3d453ca730a067be43bdc6", "url": "https://github.com/dimagi/commcare-android/commit/5d35f90b2d728df6ea3d453ca730a067be43bdc6", "message": "AS - Migrate to AppCompat", "committedDate": "2020-09-05T10:08:27Z", "type": "commit"}, {"oid": "6559e397e26b4e6561afe7bc6c4d1bbebb305a72", "url": "https://github.com/dimagi/commcare-android/commit/6559e397e26b4e6561afe7bc6c4d1bbebb305a72", "message": "move to androidx.preference.ListPreference", "committedDate": "2020-09-05T13:19:46Z", "type": "commit"}, {"oid": "9ad2971aacaaf4e0ad112455959e24a72040e425", "url": "https://github.com/dimagi/commcare-android/commit/9ad2971aacaaf4e0ad112455959e24a72040e425", "message": "Removes divider from menu listview", "committedDate": "2020-09-05T14:01:04Z", "type": "commit"}, {"oid": "f212fb1430d5a37c13bbf2e1886c55d286ca2961", "url": "https://github.com/dimagi/commcare-android/commit/f212fb1430d5a37c13bbf2e1886c55d286ca2961", "message": "colors", "committedDate": "2020-09-07T10:37:04Z", "type": "commit"}, {"oid": "aa699fe942c02453c2adbb316c6fb2dfd57d39ec", "url": "https://github.com/dimagi/commcare-android/commit/aa699fe942c02453c2adbb316c6fb2dfd57d39ec", "message": "corrects app install list styling", "committedDate": "2020-09-07T10:37:27Z", "type": "commit"}, {"oid": "f0346b5dd3fa9fb26c8f6b469276851a733eb9a9", "url": "https://github.com/dimagi/commcare-android/commit/f0346b5dd3fa9fb26c8f6b469276851a733eb9a9", "message": "Sets divider in spinner", "committedDate": "2020-09-07T11:06:38Z", "type": "commit"}, {"oid": "2cf3201368b4979278767dd1d46efc56d9496c94", "url": "https://github.com/dimagi/commcare-android/commit/2cf3201368b4979278767dd1d46efc56d9496c94", "message": "Fix group label style", "committedDate": "2020-09-07T12:15:49Z", "type": "commit"}, {"oid": "adbf56bb45afef911505e92e9eb58afcd8b14612", "url": "https://github.com/dimagi/commcare-android/commit/adbf56bb45afef911505e92e9eb58afcd8b14612", "message": "background -> android:background", "committedDate": "2020-09-07T12:38:00Z", "type": "commit"}, {"oid": "44e00b7fd26804acc9cddf9b8059b4490d2881dc", "url": "https://github.com/dimagi/commcare-android/commit/44e00b7fd26804acc9cddf9b8059b4490d2881dc", "message": "Modify switch button to have text out of the switch itself as the switch button in app compat does not seem to support inline texts well", "committedDate": "2020-09-09T10:37:06Z", "type": "commit"}, {"oid": "15c78bad41be497cebc537cddf45973af1d6436e", "url": "https://github.com/dimagi/commcare-android/commit/15c78bad41be497cebc537cddf45973af1d6436e", "message": "Search view fixes plus removes some pre honeycomb related code", "committedDate": "2020-09-09T11:46:01Z", "type": "commit"}, {"oid": "4788ab122c8839439d0a5d0398042231cf3091b4", "url": "https://github.com/dimagi/commcare-android/commit/4788ab122c8839439d0a5d0398042231cf3091b4", "message": "Set edittext styling to material design default", "committedDate": "2020-09-09T19:19:06Z", "type": "commit"}, {"oid": "648a2a99ec4eb2df50f90c5bb29d8ac4487d79f4", "url": "https://github.com/dimagi/commcare-android/commit/648a2a99ec4eb2df50f90c5bb29d8ac4487d79f4", "message": "Merge branch 'master' into appCompat", "committedDate": "2020-09-10T13:10:36Z", "type": "commit"}, {"oid": "1ecb02376e26335ae8b76e00ed675f35f908ce47", "url": "https://github.com/dimagi/commcare-android/commit/1ecb02376e26335ae8b76e00ed675f35f908ce47", "message": "merge and migrate", "committedDate": "2020-09-10T13:18:18Z", "type": "commit"}, {"oid": "feb64401b5829b7a29f61d6c1848bbb60edeea53", "url": "https://github.com/dimagi/commcare-android/commit/feb64401b5829b7a29f61d6c1848bbb60edeea53", "message": "handle activities with no action bar", "committedDate": "2020-09-10T13:52:24Z", "type": "commit"}, {"oid": "b8a58c018008c766fdde7a483f95d429e66e07c8", "url": "https://github.com/dimagi/commcare-android/commit/b8a58c018008c766fdde7a483f95d429e66e07c8", "message": "Merge branch 'master' into appCompat", "committedDate": "2020-09-14T12:39:47Z", "type": "commit"}, {"oid": "83de63158169acef5476e9019223512b4e671abd", "url": "https://github.com/dimagi/commcare-android/commit/83de63158169acef5476e9019223512b4e671abd", "message": "turn on vecotr drawables support through support libs", "committedDate": "2020-09-14T13:39:19Z", "type": "commit"}, {"oid": "4009b3d5969a29377b19f49995cab9d9da1a70d3", "url": "https://github.com/dimagi/commcare-android/commit/4009b3d5969a29377b19f49995cab9d9da1a70d3", "message": "buttons styling fixes", "committedDate": "2020-09-14T19:14:45Z", "type": "commit"}, {"oid": "74ece7ed0685ff2667a5eb421216624c50d0ea75", "url": "https://github.com/dimagi/commcare-android/commit/74ece7ed0685ff2667a5eb421216624c50d0ea75", "message": "Date time widget styling, show calendar true in date time", "committedDate": "2020-09-15T09:38:38Z", "type": "commit"}, {"oid": "4ab2cfdcd7c1a650a6bb38e31b04692827fe583b", "url": "https://github.com/dimagi/commcare-android/commit/4ab2cfdcd7c1a650a6bb38e31b04692827fe583b", "message": "Clean up redundant themes", "committedDate": "2020-09-15T10:26:37Z", "type": "commit"}, {"oid": "66b1d61e87d8d8efb1c294ecb23981665f313ed8", "url": "https://github.com/dimagi/commcare-android/commit/66b1d61e87d8d8efb1c294ecb23981665f313ed8", "message": "remove use of vector drawables on pre-21 devices as it doesn't not seem to support some edge cases like inflating in a custom view", "committedDate": "2020-09-15T12:00:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc5OTAxNg==", "url": "https://github.com/dimagi/commcare-android/pull/2342#discussion_r488799016", "bodyText": "removed since text color is set as desired by itself.", "author": "shubham1g5", "createdAt": "2020-09-15T16:23:56Z", "path": "app/src/org/commcare/activities/CommCareActivity.java", "diffHunk": "@@ -685,34 +692,23 @@ public boolean aTaskInProgress() {\n      * @param menu         Menu passed through onCreateOptionsMenu\r\n      * @param instantiator Optional ActionBarInstantiator for additional setup code.\r\n      */\r\n-    protected void tryToAddSearchActionToAppBar(Activity activity, Menu menu,\r\n+    protected void tryToAddSearchActionToAppBar(AppCompatActivity activity, Menu menu,\r\n                                                 ActionBarInstantiator instantiator) {\r\n-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {\r\n-            MenuInflater inflater = activity.getMenuInflater();\r\n-            inflater.inflate(org.commcare.dalvik.R.menu.action_bar_search_view, menu);\r\n-\r\n-            MenuItem searchMenuItem = menu.findItem(org.commcare.dalvik.R.id.search_action_bar);\r\n-            SearchView searchView =\r\n-                    (SearchView)searchMenuItem.getActionView();\r\n-            MenuItem barcodeItem = menu.findItem(org.commcare.dalvik.R.id.barcode_scan_action_bar);\r\n-            if (searchView != null) {\r\n-                int[] searchViewStyle =\r\n-                        AndroidUtil.getThemeColorIDs(this,\r\n-                                new int[]{org.commcare.dalvik.R.attr.searchbox_action_bar_color});\r\n-                int id = searchView.getContext()\r\n-                        .getResources()\r\n-                        .getIdentifier(\"android:id/search_src_text\", null, null);\r\n-                TextView textView = searchView.findViewById(id);\r\n-                textView.setTextColor(searchViewStyle[0]);\r", "originalCommit": "66b1d61e87d8d8efb1c294ecb23981665f313ed8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ca66753d985d3e56099ea643c4def65b63a795b6", "url": "https://github.com/dimagi/commcare-android/commit/ca66753d985d3e56099ea643c4def65b63a795b6", "message": "Cleanup and some reverts", "committedDate": "2020-09-15T17:07:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgzOTExMQ==", "url": "https://github.com/dimagi/commcare-android/pull/2342#discussion_r488839111", "bodyText": "titles are enabled by default with AppCompat, disabling them here for HorizontalPaneledChoiceDialog to keep them same as earlier.", "author": "shubham1g5", "createdAt": "2020-09-15T17:27:17Z", "path": "app/src/org/commcare/views/dialogs/HorizontalPaneledChoiceDialog.java", "diffHunk": "@@ -15,6 +16,7 @@\n \n     public HorizontalPaneledChoiceDialog(Context context, String title) {\n         super(context, title);\n+        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);", "originalCommit": "66b1d61e87d8d8efb1c294ecb23981665f313ed8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgzOTk3MQ==", "url": "https://github.com/dimagi/commcare-android/pull/2342#discussion_r488839971", "bodyText": "set in layout", "author": "shubham1g5", "createdAt": "2020-09-15T17:28:54Z", "path": "app/src/org/commcare/views/widgets/DateWidget.java", "diffHunk": "@@ -48,12 +49,9 @@ public DateWidget(Context context, FormEntryPrompt prompt) {\n     }\n \n     private DatePicker buildDatePicker(boolean isQuestionWriteable) {\n-        DatePicker datePicker = new DatePicker(getContext());\n+        DatePicker datePicker = (DatePicker)LayoutInflater.from(getContext()).inflate(R.layout.date_widget, this, false);\n         datePicker.setFocusable(isQuestionWriteable);\n         datePicker.setEnabled(isQuestionWriteable);\n-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {\n-            datePicker.setCalendarViewShown(false);", "originalCommit": "66b1d61e87d8d8efb1c294ecb23981665f313ed8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1865476c1003a299a6dbdb13e9041b1fa04f1f5c", "url": "https://github.com/dimagi/commcare-android/commit/1865476c1003a299a6dbdb13e9041b1fa04f1f5c", "message": "Activity -> AppCompatActivity", "committedDate": "2020-09-15T17:47:23Z", "type": "commit"}, {"oid": "c77ee525669c436492b7b4cad408038476c7f505", "url": "https://github.com/dimagi/commcare-android/commit/c77ee525669c436492b7b4cad408038476c7f505", "message": "corrects list view reference", "committedDate": "2020-09-15T17:47:38Z", "type": "commit"}, {"oid": "c10a1575611b851418ab31da3e7f3872ee3f0efe", "url": "https://github.com/dimagi/commcare-android/commit/c10a1575611b851418ab31da3e7f3872ee3f0efe", "message": "Corrects switch reference", "committedDate": "2020-09-15T18:19:36Z", "type": "commit"}, {"oid": "a82844019a9ed3c30c20826ac35fe57c9c06ec5d", "url": "https://github.com/dimagi/commcare-android/commit/a82844019a9ed3c30c20826ac35fe57c9c06ec5d", "message": "Makes uninstall button consistent with others", "committedDate": "2020-09-17T18:02:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE1NTI0OQ==", "url": "https://github.com/dimagi/commcare-android/pull/2342#discussion_r494155249", "bodyText": "nit: Would be great to have some docs here.", "author": "ShivamPokhriyal", "createdAt": "2020-09-24T09:02:38Z", "path": "app/src/org/commcare/activities/CommcareListActivity.java", "diffHunk": "@@ -0,0 +1,69 @@\n+package org.commcare.activities;\n+\n+import androidx.appcompat.app.AppCompatActivity;\n+import android.os.Bundle;\n+import android.view.View;\n+import android.widget.AdapterView;\n+import android.widget.ListAdapter;\n+import android.widget.ListView;\n+\n+import org.commcare.dalvik.R;\n+\n+public class CommcareListActivity extends AppCompatActivity {", "originalCommit": "a82844019a9ed3c30c20826ac35fe57c9c06ec5d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE1NzIwMg==", "url": "https://github.com/dimagi/commcare-android/pull/2342#discussion_r494157202", "bodyText": "nit: Would be good to replace the variable names: v -> view and l -> parent?", "author": "ShivamPokhriyal", "createdAt": "2020-09-24T09:05:52Z", "path": "app/src/org/commcare/activities/CommcareListActivity.java", "diffHunk": "@@ -0,0 +1,69 @@\n+package org.commcare.activities;\n+\n+import androidx.appcompat.app.AppCompatActivity;\n+import android.os.Bundle;\n+import android.view.View;\n+import android.widget.AdapterView;\n+import android.widget.ListAdapter;\n+import android.widget.ListView;\n+\n+import org.commcare.dalvik.R;\n+\n+public class CommcareListActivity extends AppCompatActivity {\n+\n+    protected ListAdapter mAdapter;\n+    protected ListView mListView;\n+\n+    @Override\n+    protected void onCreate(Bundle savedInstanceState) {\n+        super.onCreate(savedInstanceState);\n+        setContentView(getLayoutResource());\n+        mListView = findViewById(R.id.list_view);\n+        if (mListView == null) {\n+            throw new RuntimeException(\n+                    \"Your content must have a ListView whose id attribute is \" +\n+                            \"'android.R.id.list'\");\n+        }\n+\n+        View emptyView = findViewById(R.id.empty);\n+        if (emptyView != null) {\n+            mListView.setEmptyView(emptyView);\n+        }\n+        mListView.setOnItemClickListener(mOnClickListener);\n+    }\n+\n+    public int getLayoutResource() {\n+        return R.layout.activity_commcare_list;\n+    }\n+\n+    public void setListAdapter(ListAdapter adapter) {\n+        synchronized (this) {\n+            mAdapter = adapter;\n+            mListView.setAdapter(adapter);\n+        }\n+    }\n+\n+    public ListAdapter getListAdapter() {\n+        return mAdapter;\n+    }\n+\n+    public ListView getListView() {\n+        return mListView;\n+    }\n+\n+    private AdapterView.OnItemClickListener mOnClickListener = (parent, v, position, id) -> onListItemClick((ListView)parent, v, position, id);\n+\n+    /**\n+     * This method will be called when an item in the list is selected.\n+     * Subclasses should override. Subclasses can call\n+     * getListView().getItemAtPosition(position) if they need to access the\n+     * data associated with the selected item.\n+     *\n+     * @param l The ListView where the click happened\n+     * @param v The view that was clicked within the ListView\n+     * @param position The position of the view in the list\n+     * @param id The row id of the item that was clicked\n+     */\n+    protected void onListItemClick(ListView l, View v, int position, long id) {", "originalCommit": "a82844019a9ed3c30c20826ac35fe57c9c06ec5d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE5NTgzNg==", "url": "https://github.com/dimagi/commcare-android/pull/2342#discussion_r494195836", "bodyText": "not changing this to be consistent with ListActivity.java", "author": "shubham1g5", "createdAt": "2020-09-24T10:09:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE1NzIwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE1ODkwMg==", "url": "https://github.com/dimagi/commcare-android/pull/2342#discussion_r494158902", "bodyText": "Ohh strange. Is this not needed anymore?", "author": "ShivamPokhriyal", "createdAt": "2020-09-24T09:08:44Z", "path": "app/src/org/commcare/activities/FormEntryActivity.java", "diffHunk": "@@ -212,22 +209,6 @@ public void onCreateSessionSafe(Bundle savedInstanceState) {\n         }\n     }\n \n-    @Override", "originalCommit": "a82844019a9ed3c30c20826ac35fe57c9c06ec5d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDIwMzUwNA==", "url": "https://github.com/dimagi/commcare-android/pull/2342#discussion_r494203504", "bodyText": "Two reasons why I removed this -\n\nonMenuItemSelected is final in AppCompatActivity demanding a change here\nThis will only be applicable for api v17 devices and quick look through analytics suggest that we don't have any users on api-17 devices.", "author": "shubham1g5", "createdAt": "2020-09-24T10:22:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE1ODkwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDgwMzMyMg==", "url": "https://github.com/dimagi/commcare-android/pull/2342#discussion_r494803322", "bodyText": "This will only be applicable for api v17 devices and quick look through analytics suggest that we don't have any users on api-17 devices.\n\nThis doesn't seem true anymore. Suddently there is an influx of devices on v17. Unfortunately BS doesn't have any devices less than 4.4 for me to test any new implementations of this method. Therefore committed an alternative change to this which removes setting spannable to the Context menu. This was redundant there as we don't have any formatting anyway in that context menu and just plain strings. So there is no use of using Spannnables there.  Also love how useful the links to tickets in PRs are. I was able to track this down to http://manage.dimagi.com/default.asp?174626", "author": "shubham1g5", "createdAt": "2020-09-25T07:36:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE1ODkwMg=="}], "type": "inlineReview"}, {"oid": "d79b736f865fd4db5e813412b9be241bcdb339b4", "url": "https://github.com/dimagi/commcare-android/commit/d79b736f865fd4db5e813412b9be241bcdb339b4", "message": "styling related PR feedback", "committedDate": "2020-09-24T10:24:02Z", "type": "commit"}, {"oid": "2d05d5199162c45d7c8f307f5f2e8cb288579ada", "url": "https://github.com/dimagi/commcare-android/commit/2d05d5199162c45d7c8f307f5f2e8cb288579ada", "message": "Removes spanned styling from context menu to avoid crash on < v18 devices, google issue #47831, #174626", "committedDate": "2020-09-25T07:33:52Z", "type": "commit"}, {"oid": "bfef7f2ac6e57d7a06d48ccd1fbfea15b79adb25", "url": "https://github.com/dimagi/commcare-android/commit/bfef7f2ac6e57d7a06d48ccd1fbfea15b79adb25", "message": "Merge branch 'master' into appCompat", "committedDate": "2020-10-12T13:34:37Z", "type": "commit"}, {"oid": "6f3add3a6af2f87ed5247b935d6bab7fb0d24d6d", "url": "https://github.com/dimagi/commcare-android/commit/6f3add3a6af2f87ed5247b935d6bab7fb0d24d6d", "message": "android:src -> app:srcCompat for Imageview", "committedDate": "2020-10-12T13:51:25Z", "type": "commit"}, {"oid": "bd65044a90c89fa80afbfd7690d478995c92e9a6", "url": "https://github.com/dimagi/commcare-android/commit/bd65044a90c89fa80afbfd7690d478995c92e9a6", "message": "Merge branch 'master' into appCompat", "committedDate": "2020-10-13T06:27:17Z", "type": "commit"}, {"oid": "c9d5d1290e931951a13e60936d1abb453f418962", "url": "https://github.com/dimagi/commcare-android/commit/c9d5d1290e931951a13e60936d1abb453f418962", "message": "Merge branch 'master' into appCompat", "committedDate": "2020-10-13T17:17:48Z", "type": "commit"}, {"oid": "7c3c489d2cccd54f883df3ca4fe4d56fb402af45", "url": "https://github.com/dimagi/commcare-android/commit/7c3c489d2cccd54f883df3ca4fe4d56fb402af45", "message": "Merge branch 'master' into appCompat", "committedDate": "2020-10-19T07:25:28Z", "type": "commit"}, {"oid": "23392d7a6fbcc647b116ee49fb6b24716cf20ae0", "url": "https://github.com/dimagi/commcare-android/commit/23392d7a6fbcc647b116ee49fb6b24716cf20ae0", "message": "Merge branch 'master' into appCompat", "committedDate": "2020-10-19T18:42:35Z", "type": "commit"}, {"oid": "0b30effb017f66f8566309aa7540685c61215b2f", "url": "https://github.com/dimagi/commcare-android/commit/0b30effb017f66f8566309aa7540685c61215b2f", "message": "removes dependency on internal android action bar view name", "committedDate": "2020-10-20T07:35:59Z", "type": "commit"}]}