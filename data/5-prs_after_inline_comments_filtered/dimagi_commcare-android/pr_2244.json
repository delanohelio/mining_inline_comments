{"pr_number": 2244, "pr_title": "[Hotfix] Update resets", "pr_createdAt": "2020-05-24T10:54:49Z", "pr_url": "https://github.com/dimagi/commcare-android/pull/2244", "timeline": [{"oid": "cd1c40c044a349c7fb81d5991b322e301143499f", "url": "https://github.com/dimagi/commcare-android/commit/cd1c40c044a349c7fb81d5991b322e301143499f", "message": "distnguish network failures during update", "committedDate": "2020-05-24T08:54:45Z", "type": "commit"}, {"oid": "fbeec72ff9425d15cd4d96450386c37844f1975e", "url": "https://github.com/dimagi/commcare-android/commit/fbeec72ff9425d15cd4d96450386c37844f1975e", "message": "Distinguish rate limited errors during update", "committedDate": "2020-05-24T09:32:23Z", "type": "commit"}, {"oid": "2f9b2c98d8a420ccf22c6a01226f8712314022a8", "url": "https://github.com/dimagi/commcare-android/commit/2f9b2c98d8a420ccf22c6a01226f8712314022a8", "message": "Segregrate update result to selectively increment update reset counter", "committedDate": "2020-05-24T10:47:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTk0ODQzMw==", "url": "https://github.com/dimagi/commcare-android/pull/2244#discussion_r429948433", "bodyText": "What's the logic behind splitting both of these out rather than just changing what hits restartCount?", "author": "ctsims", "createdAt": "2020-05-25T13:56:27Z", "path": "app/src/org/commcare/logging/analytics/UpdateStats.java", "diffHunk": "@@ -62,6 +64,7 @@ public void resetStats(CommCareApp app) {\n         startInstallTime = new Date().getTime();\n         resourceInstallStats.clear();\n         restartCount = 0;\n+        resetCounter = 0;", "originalCommit": "2f9b2c98d8a420ccf22c6a01226f8712314022a8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAwOTgxNQ==", "url": "https://github.com/dimagi/commcare-android/pull/2244#discussion_r430009815", "bodyText": "the restart counter gets used in determining the retry back off time, this code has been removed in master since the retry time is managed by the WorkManager and hence I will just maintain one counter when I port it in master", "author": "shubham1g5", "createdAt": "2020-05-25T16:24:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTk0ODQzMw=="}], "type": "inlineReview"}]}