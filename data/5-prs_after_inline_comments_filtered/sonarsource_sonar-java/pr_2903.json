{"pr_number": 2903, "pr_title": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks", "pr_createdAt": "2020-04-06T15:17:28Z", "pr_url": "https://github.com/SonarSource/sonar-java/pull/2903", "timeline": [{"oid": "a99e60d29af14f4dab8adddad0446c982a71beb8", "url": "https://github.com/SonarSource/sonar-java/commit/a99e60d29af14f4dab8adddad0446c982a71beb8", "message": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks", "committedDate": "2020-04-06T15:27:23Z", "type": "forcePushed"}, {"oid": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "url": "https://github.com/SonarSource/sonar-java/commit/df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "message": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks", "committedDate": "2020-04-06T16:21:40Z", "type": "commit"}, {"oid": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "url": "https://github.com/SonarSource/sonar-java/commit/df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "message": "SONARJAVA-3340 [JSP] Add plugin jar to classpath for JSP checks", "committedDate": "2020-04-06T16:21:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDU0OTkwMw==", "url": "https://github.com/SonarSource/sonar-java/pull/2903#discussion_r404549903", "bodyText": "I think that here a comment is in order to explain why we add plugin jar to jsp classpath. It is far from obvious from the context why it is done so.", "author": "benzonico", "createdAt": "2020-04-07T05:48:25Z", "path": "java-frontend/src/main/java/org/sonar/java/SonarComponents.java", "diffHunk": "@@ -152,6 +153,22 @@ public NewHighlighting highlightableFor(InputFile inputFile) {\n     return javaTestClasspath.getElements();\n   }\n \n+  public List<File> getJspClasspath() {\n+    List<File> jspClasspath = new ArrayList<>();\n+    jspClasspath.add(findPluginJar());", "originalCommit": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDU1MjE4NA==", "url": "https://github.com/SonarSource/sonar-java/pull/2903#discussion_r404552184", "bodyText": "I think this method deserves either a renaming or a javadoc to explain we are looking up for the sonar-java plugin", "author": "benzonico", "createdAt": "2020-04-07T05:55:22Z", "path": "java-frontend/src/main/java/org/sonar/java/SonarComponents.java", "diffHunk": "@@ -152,6 +153,22 @@ public NewHighlighting highlightableFor(InputFile inputFile) {\n     return javaTestClasspath.getElements();\n   }\n \n+  public List<File> getJspClasspath() {\n+    List<File> jspClasspath = new ArrayList<>();\n+    jspClasspath.add(findPluginJar());\n+    jspClasspath.addAll(javaClasspath.getElements());\n+    return jspClasspath;\n+  }\n+\n+  private static File findPluginJar() {", "originalCommit": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDU1NjM0Ng==", "url": "https://github.com/SonarSource/sonar-java/pull/2903#discussion_r404556346", "bodyText": "this would probably be more robust to call for getJavaClasspath rather than relying on order of callers for javaclasspath to be initialized.", "author": "benzonico", "createdAt": "2020-04-07T06:07:08Z", "path": "java-frontend/src/main/java/org/sonar/java/SonarComponents.java", "diffHunk": "@@ -152,6 +153,22 @@ public NewHighlighting highlightableFor(InputFile inputFile) {\n     return javaTestClasspath.getElements();\n   }\n \n+  public List<File> getJspClasspath() {\n+    List<File> jspClasspath = new ArrayList<>();\n+    jspClasspath.add(findPluginJar());\n+    jspClasspath.addAll(javaClasspath.getElements());", "originalCommit": "df5a6fe7936f6a934ebebdb8838b97b5cca2638d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a320ac311e9045501f8e7d992f5ebee4b67c6377", "url": "https://github.com/SonarSource/sonar-java/commit/a320ac311e9045501f8e7d992f5ebee4b67c6377", "message": "review feedback", "committedDate": "2020-04-07T07:43:26Z", "type": "commit"}]}