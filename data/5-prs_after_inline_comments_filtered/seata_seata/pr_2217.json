{"pr_number": 2217, "pr_title": "bugfix:correct wrong property names in seata-spring-boot-starter.", "pr_createdAt": "2020-01-22T05:02:44Z", "pr_url": "https://github.com/seata/seata/pull/2217", "timeline": [{"oid": "f0ac8abf877927adb7329d013e491e114b949d74", "url": "https://github.com/seata/seata/commit/f0ac8abf877927adb7329d013e491e114b949d74", "message": "correct wrong property names.", "committedDate": "2020-01-22T04:43:23Z", "type": "commit"}, {"oid": "6e6e6362482b4e524a259ad9802cd1bcfd0e7c97", "url": "https://github.com/seata/seata/commit/6e6e6362482b4e524a259ad9802cd1bcfd0e7c97", "message": "divide ClientProperties into TmProperties and RmProperties,", "committedDate": "2020-01-22T05:10:56Z", "type": "commit"}, {"oid": "54a6518f3f713c59bdcbab087333de9f7670f338", "url": "https://github.com/seata/seata/commit/54a6518f3f713c59bdcbab087333de9f7670f338", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-01-22T13:10:31Z", "type": "commit"}, {"oid": "684f1d9db2919fc4a1b01167a1750b7a77a79d62", "url": "https://github.com/seata/seata/commit/684f1d9db2919fc4a1b01167a1750b7a77a79d62", "message": "fix reviews.", "committedDate": "2020-01-23T00:46:54Z", "type": "commit"}, {"oid": "da43eacbf6ba08a2c2045cdfb61821d5a64668e8", "url": "https://github.com/seata/seata/commit/da43eacbf6ba08a2c2045cdfb61821d5a64668e8", "message": "add UT.", "committedDate": "2020-01-23T01:04:29Z", "type": "commit"}, {"oid": "38307a4d1180f1ae656a7312bf7077e107bc2b56", "url": "https://github.com/seata/seata/commit/38307a4d1180f1ae656a7312bf7077e107bc2b56", "message": "update UT.", "committedDate": "2020-01-23T02:05:52Z", "type": "commit"}, {"oid": "2ecce00d02ac086e813db4c21222165947fab7c3", "url": "https://github.com/seata/seata/commit/2ecce00d02ac086e813db4c21222165947fab7c3", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-01-23T02:49:11Z", "type": "commit"}, {"oid": "48db92b6bd162f9d931db82f3681a0142995e264", "url": "https://github.com/seata/seata/commit/48db92b6bd162f9d931db82f3681a0142995e264", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-01-23T05:43:08Z", "type": "commit"}, {"oid": "988632487bb98b066bcf4a26c0d8d30ec6d9e8aa", "url": "https://github.com/seata/seata/commit/988632487bb98b066bcf4a26c0d8d30ec6d9e8aa", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-01-23T08:27:46Z", "type": "commit"}, {"oid": "5f549510d3679a87cdd9e6d481637c03a7c5ea19", "url": "https://github.com/seata/seata/commit/5f549510d3679a87cdd9e6d481637c03a7c5ea19", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-01-24T02:22:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxMzA5NA==", "url": "https://github.com/seata/seata/pull/2217#discussion_r373013094", "bodyText": "minusToCamel?", "author": "slievrly", "createdAt": "2020-01-30T15:21:43Z", "path": "seata-spring-boot-starter/src/main/java/io/seata/spring/boot/autoconfigure/provider/SpringBootConfigurationProvider.java", "diffHunk": "@@ -114,42 +125,46 @@ private Object get(String dataId) throws IllegalAccessException {\n      */\n     private String convertDataId(String rawDataId) {\n         if (rawDataId.startsWith(SPECIAL_KEY_VGROUP_MAPPING)) {\n-            return StarterConstants.SERVICE_PREFIX + \".\" + NORMALIZED_KEY_VGROUP_MAPPING;\n+            return SERVICE_PREFIX + DOT + NORMALIZED_KEY_VGROUP_MAPPING;\n         }\n         if (rawDataId.endsWith(SPECIAL_KEY_GROUPLIST)) {\n-            return StarterConstants.SERVICE_PREFIX + \".\" + NORMALIZED_KEY_GROUPLIST;\n+            return SERVICE_PREFIX + DOT + NORMALIZED_KEY_GROUPLIST;\n         }\n         if (rawDataId.startsWith(SPECIAL_KEY_UNDO)) {\n             String suffix = StringUtils.removeStart(rawDataId, SPECIAL_KEY_UNDO);\n-            return StarterConstants.UNDO_PREFIX + \".\" + StringFormatUtils.dotToCamel(suffix);\n+            return UNDO_PREFIX + DOT + StringFormatUtils.dotToCamel(suffix);\n         }\n         if (rawDataId.startsWith(SPECIAL_KEY_CLIENT_LOCK)) {\n             String suffix = StringUtils.removeStart(rawDataId, SPECIAL_KEY_CLIENT_LOCK);\n-            return StarterConstants.LOCK_PREFIX + \".\" + StringFormatUtils.minusToCamel(\n+            return LOCK_PREFIX + DOT + StringFormatUtils.minusToCamel(\n                 StringFormatUtils.dotToCamel(suffix));\n         }\n-        if (rawDataId.startsWith(SPECIAL_KEY_CLIENT)) {\n-            String suffix = StringUtils.removeStart(rawDataId, SPECIAL_KEY_CLIENT);\n-            return StarterConstants.CLIENT_PREFIX + \".\" + StringFormatUtils.dotToCamel(suffix);\n+        if (rawDataId.startsWith(SPECIAL_KEY_CLIENT_RM)) {\n+            String suffix = StringUtils.removeStart(rawDataId, SPECIAL_KEY_CLIENT_RM);\n+            return CLIENT_RM_PREFIX + DOT + StringFormatUtils.dotToCamel(suffix);", "originalCommit": "5f549510d3679a87cdd9e6d481637c03a7c5ea19", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzMwNTgzOA==", "url": "https://github.com/seata/seata/pull/2217#discussion_r373305838", "bodyText": "Not required.", "author": "xingfudeshi", "createdAt": "2020-01-31T03:49:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxMzA5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc4Nzc0Mw==", "url": "https://github.com/seata/seata/pull/2217#discussion_r373787743", "bodyText": "Will the hyphen code style change to camel?", "author": "slievrly", "createdAt": "2020-02-01T16:14:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxMzA5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgxNzIzOQ==", "url": "https://github.com/seata/seata/pull/2217#discussion_r373817239", "bodyText": "When read item from yml/properties files spring-boot will do the conversion automatically.", "author": "xingfudeshi", "createdAt": "2020-02-02T03:54:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxMzA5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgxNzQ0Ng==", "url": "https://github.com/seata/seata/pull/2217#discussion_r373817446", "bodyText": "minusToCamel is used to convert the items read from original configuration.", "author": "xingfudeshi", "createdAt": "2020-02-02T04:00:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxMzA5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk1MTAzNw==", "url": "https://github.com/seata/seata/pull/2217#discussion_r373951037", "bodyText": "In the code is actually read the dot between configuration items, I wrong thought is a hyphen interval.", "author": "slievrly", "createdAt": "2020-02-03T07:23:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxMzA5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxMzIwMg==", "url": "https://github.com/seata/seata/pull/2217#discussion_r373013202", "bodyText": "minusToCamel?", "author": "slievrly", "createdAt": "2020-01-30T15:21:52Z", "path": "seata-spring-boot-starter/src/main/java/io/seata/spring/boot/autoconfigure/provider/SpringBootConfigurationProvider.java", "diffHunk": "@@ -114,42 +125,46 @@ private Object get(String dataId) throws IllegalAccessException {\n      */\n     private String convertDataId(String rawDataId) {\n         if (rawDataId.startsWith(SPECIAL_KEY_VGROUP_MAPPING)) {\n-            return StarterConstants.SERVICE_PREFIX + \".\" + NORMALIZED_KEY_VGROUP_MAPPING;\n+            return SERVICE_PREFIX + DOT + NORMALIZED_KEY_VGROUP_MAPPING;\n         }\n         if (rawDataId.endsWith(SPECIAL_KEY_GROUPLIST)) {\n-            return StarterConstants.SERVICE_PREFIX + \".\" + NORMALIZED_KEY_GROUPLIST;\n+            return SERVICE_PREFIX + DOT + NORMALIZED_KEY_GROUPLIST;\n         }\n         if (rawDataId.startsWith(SPECIAL_KEY_UNDO)) {\n             String suffix = StringUtils.removeStart(rawDataId, SPECIAL_KEY_UNDO);\n-            return StarterConstants.UNDO_PREFIX + \".\" + StringFormatUtils.dotToCamel(suffix);\n+            return UNDO_PREFIX + DOT + StringFormatUtils.dotToCamel(suffix);\n         }\n         if (rawDataId.startsWith(SPECIAL_KEY_CLIENT_LOCK)) {\n             String suffix = StringUtils.removeStart(rawDataId, SPECIAL_KEY_CLIENT_LOCK);\n-            return StarterConstants.LOCK_PREFIX + \".\" + StringFormatUtils.minusToCamel(\n+            return LOCK_PREFIX + DOT + StringFormatUtils.minusToCamel(\n                 StringFormatUtils.dotToCamel(suffix));\n         }\n-        if (rawDataId.startsWith(SPECIAL_KEY_CLIENT)) {\n-            String suffix = StringUtils.removeStart(rawDataId, SPECIAL_KEY_CLIENT);\n-            return StarterConstants.CLIENT_PREFIX + \".\" + StringFormatUtils.dotToCamel(suffix);\n+        if (rawDataId.startsWith(SPECIAL_KEY_CLIENT_RM)) {\n+            String suffix = StringUtils.removeStart(rawDataId, SPECIAL_KEY_CLIENT_RM);\n+            return CLIENT_RM_PREFIX + DOT + StringFormatUtils.dotToCamel(suffix);\n+        }\n+        if (rawDataId.startsWith(SPECIAL_KEY_CLIENT_TM)) {\n+            String suffix = StringUtils.removeStart(rawDataId, SPECIAL_KEY_CLIENT_TM);\n+            return CLIENT_TM_PREFIX + DOT + StringFormatUtils.dotToCamel(suffix);", "originalCommit": "5f549510d3679a87cdd9e6d481637c03a7c5ea19", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzMwNjAzMw==", "url": "https://github.com/seata/seata/pull/2217#discussion_r373306033", "bodyText": "Not required.\ntm {\ncommit.retry.count = 5\nrollback.retry.count = 5\n}", "author": "xingfudeshi", "createdAt": "2020-01-31T03:50:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxMzIwMg=="}], "type": "inlineReview"}, {"oid": "f81e2812c5e3f33a9e41846245db29d70711ef03", "url": "https://github.com/seata/seata/commit/f81e2812c5e3f33a9e41846245db29d70711ef03", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-02-03T07:23:55Z", "type": "commit"}, {"oid": "ffbfc1dd950c9dfc926280ec26c1a4519d04eab7", "url": "https://github.com/seata/seata/commit/ffbfc1dd950c9dfc926280ec26c1a4519d04eab7", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-02-03T12:09:53Z", "type": "commit"}, {"oid": "01509eb219cd5cd8405970a889d3b82005e67ff5", "url": "https://github.com/seata/seata/commit/01509eb219cd5cd8405970a889d3b82005e67ff5", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-02-04T03:23:10Z", "type": "commit"}, {"oid": "4ace87e67a4bf8d144b225c6587536da9db4e541", "url": "https://github.com/seata/seata/commit/4ace87e67a4bf8d144b225c6587536da9db4e541", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-02-04T14:04:24Z", "type": "commit"}, {"oid": "79b41db9cb27d1db9d091f5e7fd36eff3864c359", "url": "https://github.com/seata/seata/commit/79b41db9cb27d1db9d091f5e7fd36eff3864c359", "message": "Merge branch 'develop' into fix2114", "committedDate": "2020-02-05T05:21:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2NjkzNA==", "url": "https://github.com/seata/seata/pull/2217#discussion_r375066934", "bodyText": "please check the import", "author": "l81893521", "createdAt": "2020-02-05T05:36:00Z", "path": "seata-spring-boot-starter/src/main/java/io/seata/spring/boot/autoconfigure/provider/SpringBootConfigurationProvider.java", "diffHunk": "@@ -23,26 +23,37 @@\n \n import io.seata.config.Configuration;\n import io.seata.config.ExtConfigurationProvider;\n-import io.seata.spring.boot.autoconfigure.StarterConstants;\n import io.seata.spring.boot.autoconfigure.util.SpringUtils;\n import io.seata.spring.boot.autoconfigure.util.StringFormatUtils;\n import org.apache.commons.lang.StringUtils;\n import org.springframework.cglib.proxy.Enhancer;\n import org.springframework.cglib.proxy.MethodInterceptor;\n import org.springframework.cglib.proxy.MethodProxy;\n \n+import static com.alipay.lookout.common.LookoutConstants.DOT;", "originalCommit": "79b41db9cb27d1db9d091f5e7fd36eff3864c359", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2NzY2NA==", "url": "https://github.com/seata/seata/pull/2217#discussion_r375067664", "bodyText": "fixed", "author": "xingfudeshi", "createdAt": "2020-02-05T05:39:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2NjkzNA=="}], "type": "inlineReview"}, {"oid": "150e46abac7d5152c189f23abc1e4b6cb782b370", "url": "https://github.com/seata/seata/commit/150e46abac7d5152c189f23abc1e4b6cb782b370", "message": "fix review.", "committedDate": "2020-02-05T05:39:43Z", "type": "commit"}, {"oid": "e550ab11b26dd6cc44eff8515be0b082f4158464", "url": "https://github.com/seata/seata/commit/e550ab11b26dd6cc44eff8515be0b082f4158464", "message": "fix item name.", "committedDate": "2020-02-05T05:46:32Z", "type": "commit"}]}