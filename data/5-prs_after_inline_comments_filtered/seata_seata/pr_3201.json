{"pr_number": 3201, "pr_title": "optimize: no longer substring the message in rpc transmission", "pr_createdAt": "2020-10-16T03:53:20Z", "pr_url": "https://github.com/seata/seata/pull/3201", "timeline": [{"oid": "77f7ba797f80392b66c1b1a117f384489ac037e5", "url": "https://github.com/seata/seata/commit/77f7ba797f80392b66c1b1a117f384489ac037e5", "message": "optimize substring message", "committedDate": "2020-10-16T02:30:49Z", "type": "commit"}, {"oid": "a383046404217f434cc95e1b3727763f85c97208", "url": "https://github.com/seata/seata/commit/a383046404217f434cc95e1b3727763f85c97208", "message": "Merge branch 'develop' into optimize_substring_msg", "committedDate": "2020-10-16T02:32:34Z", "type": "commit"}, {"oid": "1b475d95f07566dfdbd448c39e2177fa9a9e6751", "url": "https://github.com/seata/seata/commit/1b475d95f07566dfdbd448c39e2177fa9a9e6751", "message": "optimize substring message", "committedDate": "2020-10-16T03:47:11Z", "type": "commit"}, {"oid": "801195055df6d8ffa37e758cb69d35b482bddfdc", "url": "https://github.com/seata/seata/commit/801195055df6d8ffa37e758cb69d35b482bddfdc", "message": "Merge remote-tracking branch 'me/optimize_substring_msg' into optimize_substring_msg", "committedDate": "2020-10-16T03:47:38Z", "type": "commit"}, {"oid": "eb9e0be8003f622d8eb66307f3f642e916710a2d", "url": "https://github.com/seata/seata/commit/eb9e0be8003f622d8eb66307f3f642e916710a2d", "message": "Merge remote-tracking branch 'origin/develop' into optimize_substring_msg\n\n# Conflicts:\n#\tserializer/seata-serializer-seata/src/main/java/io/seata/serializer/seata/protocol/AbstractResultMessageCodec.java", "committedDate": "2020-10-16T03:54:01Z", "type": "commit"}, {"oid": "c6cc5e70e78699fe0a2de7bd28986bf5027c2b12", "url": "https://github.com/seata/seata/commit/c6cc5e70e78699fe0a2de7bd28986bf5027c2b12", "message": "optimize substring message", "committedDate": "2020-10-16T03:58:22Z", "type": "commit"}, {"oid": "543e0f3fb01bbeeecf56eb85747339b4a42ba382", "url": "https://github.com/seata/seata/commit/543e0f3fb01bbeeecf56eb85747339b4a42ba382", "message": "Merge branch 'develop' into optimize_substring_msg", "committedDate": "2020-10-16T09:20:47Z", "type": "commit"}, {"oid": "2149c42e049bea2f97065fc898bcb75bafab97dc", "url": "https://github.com/seata/seata/commit/2149c42e049bea2f97065fc898bcb75bafab97dc", "message": "Merge branch 'develop' into optimize_substring_msg", "committedDate": "2020-10-17T11:15:09Z", "type": "commit"}, {"oid": "2d6f1928f04a5835344225693b7f6d2450f12963", "url": "https://github.com/seata/seata/commit/2d6f1928f04a5835344225693b7f6d2450f12963", "message": "Merge branch 'develop' into optimize_substring_msg", "committedDate": "2020-10-19T01:26:54Z", "type": "commit"}, {"oid": "73b0b941073effbe390854753ddc1cd8f51e5fcd", "url": "https://github.com/seata/seata/commit/73b0b941073effbe390854753ddc1cd8f51e5fcd", "message": "Merge branch 'develop' into optimize_substring_msg", "committedDate": "2020-10-21T03:38:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA1MjUzNA==", "url": "https://github.com/seata/seata/pull/3201#discussion_r509052534", "bodyText": "short  should need to be less  2^15-1", "author": "slievrly", "createdAt": "2020-10-21T07:34:20Z", "path": "serializer/seata-serializer-seata/src/main/java/io/seata/serializer/seata/protocol/AbstractResultMessageCodec.java", "diffHunk": "@@ -45,13 +43,7 @@\n         out.writeByte(resultCode.ordinal());\n         if (resultCode == ResultCode.Failed) {\n             if (StringUtils.isNotEmpty(resultMsg)) {\n-                String msg;\n-                if (resultMsg.length() > MAX_ERR_MSG_LEN) {\n-                    msg = resultMsg.substring(0, MAX_ERR_MSG_LEN) + \"...\";\n-                } else {\n-                    msg = resultMsg;\n-                }\n-                byte[] bs = msg.getBytes(UTF8);\n+                byte[] bs = resultMsg.getBytes(UTF8);\n                 out.writeShort((short)bs.length);", "originalCommit": "73b0b941073effbe390854753ddc1cd8f51e5fcd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTIzMzk1OA==", "url": "https://github.com/seata/seata/pull/3201#discussion_r509233958", "bodyText": "fixed.", "author": "l81893521", "createdAt": "2020-10-21T12:25:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA1MjUzNA=="}], "type": "inlineReview"}, {"oid": "d38c14cddd019dfc0c2229347e92be85cce92e88", "url": "https://github.com/seata/seata/commit/d38c14cddd019dfc0c2229347e92be85cce92e88", "message": "Merge branch 'develop' into optimize_substring_msg", "committedDate": "2020-10-21T07:36:24Z", "type": "commit"}, {"oid": "46d361477a1fa8cea65a98f127a60c223442c006", "url": "https://github.com/seata/seata/commit/46d361477a1fa8cea65a98f127a60c223442c006", "message": "optimize substring message", "committedDate": "2020-10-21T12:19:46Z", "type": "commit"}, {"oid": "5cbf222670f4e72705d96ff46fdc6a7e705dde1f", "url": "https://github.com/seata/seata/commit/5cbf222670f4e72705d96ff46fdc6a7e705dde1f", "message": "Merge remote-tracking branch 'me/optimize_substring_msg' into optimize_substring_msg", "committedDate": "2020-10-21T12:20:15Z", "type": "commit"}, {"oid": "030804fee9a9ac85cec5fe933b87059ceaa7a6a6", "url": "https://github.com/seata/seata/commit/030804fee9a9ac85cec5fe933b87059ceaa7a6a6", "message": "Merge branch 'develop' into optimize_substring_msg", "committedDate": "2020-10-22T05:45:20Z", "type": "commit"}]}