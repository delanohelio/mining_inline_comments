{"pr_number": 2897, "pr_title": "bugfix: fix jedis unlock fail", "pr_createdAt": "2020-07-16T08:54:39Z", "pr_url": "https://github.com/seata/seata/pull/2897", "timeline": [{"oid": "62bcd650a249d76947219fa76c9549afd97e51a7", "url": "https://github.com/seata/seata/commit/62bcd650a249d76947219fa76c9549afd97e51a7", "message": "modify code style", "committedDate": "2020-07-16T08:54:18Z", "type": "forcePushed"}, {"oid": "6f5e3d8e6592d1e493d427fdb6fb4b0dda781b01", "url": "https://github.com/seata/seata/commit/6f5e3d8e6592d1e493d427fdb6fb4b0dda781b01", "message": "fix jedis unlock fail", "committedDate": "2020-07-16T08:57:01Z", "type": "commit"}, {"oid": "6f5e3d8e6592d1e493d427fdb6fb4b0dda781b01", "url": "https://github.com/seata/seata/commit/6f5e3d8e6592d1e493d427fdb6fb4b0dda781b01", "message": "fix jedis unlock fail", "committedDate": "2020-07-16T08:57:01Z", "type": "forcePushed"}, {"oid": "ef4cab62d60bcebc9ae27c03774371c0428e58b6", "url": "https://github.com/seata/seata/commit/ef4cab62d60bcebc9ae27c03774371c0428e58b6", "message": "Merge branch 'develop' into 0716", "committedDate": "2020-07-16T09:54:25Z", "type": "commit"}, {"oid": "bf99e8f1015f4f79f8c886a465dbe831d1d97683", "url": "https://github.com/seata/seata/commit/bf99e8f1015f4f79f8c886a465dbe831d1d97683", "message": "optimize code", "committedDate": "2020-07-16T10:12:13Z", "type": "commit"}, {"oid": "ef96e24f1ce8d080aeb03fc9fde9cee20675a2bb", "url": "https://github.com/seata/seata/commit/ef96e24f1ce8d080aeb03fc9fde9cee20675a2bb", "message": "Merge branch '0716' of https://github.com/a364176773/seata into 0716", "committedDate": "2020-07-16T10:12:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk5ODgwMQ==", "url": "https://github.com/seata/seata/pull/2897#discussion_r456998801", "bodyText": "It can be changed to mget", "author": "ph3636", "createdAt": "2020-07-20T02:39:14Z", "path": "server/src/main/java/io/seata/server/storage/redis/lock/RedisLocker.java", "diffHunk": "@@ -144,6 +144,7 @@ public boolean releaseLock(String xid, List<Long> branchIds) {\n             if (CollectionUtils.isNotEmpty(keys)) {\n                 Pipeline pipeline = null;\n                 Iterator<String> it = keys.iterator();\n+                List<String> delKeys = new ArrayList<>();\n                 while (it.hasNext()) {\n                     String key = it.next();\n                     LockDO lock = JSON.parseObject(jedis.get(key), LockDO.class);", "originalCommit": "ef96e24f1ce8d080aeb03fc9fde9cee20675a2bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI1NTc0Nw==", "url": "https://github.com/seata/seata/pull/2897#discussion_r457255747", "bodyText": "ok", "author": "a364176773", "createdAt": "2020-07-20T10:21:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk5ODgwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk5OTIzMg==", "url": "https://github.com/seata/seata/pull/2897#discussion_r456999232", "bodyText": "It can be deleted and the following with delKeys judgment", "author": "ph3636", "createdAt": "2020-07-20T02:41:05Z", "path": "server/src/main/java/io/seata/server/storage/redis/lock/RedisLocker.java", "diffHunk": "@@ -152,13 +153,15 @@ public boolean releaseLock(String xid, List<Long> branchIds) {\n                             if (pipeline == null) {\n                                 pipeline = jedis.pipelined();\n                             }", "originalCommit": "ef96e24f1ce8d080aeb03fc9fde9cee20675a2bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI1Nzk1Mw==", "url": "https://github.com/seata/seata/pull/2897#discussion_r457257953", "bodyText": "ok", "author": "a364176773", "createdAt": "2020-07-20T10:24:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk5OTIzMg=="}], "type": "inlineReview"}, {"oid": "82ac3a79877b9cac3a2d6e8d4f61cb7e8540ccb3", "url": "https://github.com/seata/seata/commit/82ac3a79877b9cac3a2d6e8d4f61cb7e8540ccb3", "message": "optimize code", "committedDate": "2020-07-20T13:25:44Z", "type": "commit"}, {"oid": "daafdc3ab5bfe20e86092e9493fd3e1801fd1f1e", "url": "https://github.com/seata/seata/commit/daafdc3ab5bfe20e86092e9493fd3e1801fd1f1e", "message": "Merge branch 'develop' into 0716", "committedDate": "2020-07-23T02:17:43Z", "type": "commit"}, {"oid": "1ce920e44ab658f754c3b59d8d9c5dbb1e728ceb", "url": "https://github.com/seata/seata/commit/1ce920e44ab658f754c3b59d8d9c5dbb1e728ceb", "message": "Merge branch 'develop' into 0716", "committedDate": "2020-07-24T06:56:34Z", "type": "commit"}, {"oid": "b64ffb7a02a5af95935b89a7c2b337367303eacc", "url": "https://github.com/seata/seata/commit/b64ffb7a02a5af95935b89a7c2b337367303eacc", "message": "fix bug", "committedDate": "2020-07-24T09:38:43Z", "type": "commit"}, {"oid": "b64ffb7a02a5af95935b89a7c2b337367303eacc", "url": "https://github.com/seata/seata/commit/b64ffb7a02a5af95935b89a7c2b337367303eacc", "message": "fix bug", "committedDate": "2020-07-24T09:38:43Z", "type": "forcePushed"}, {"oid": "5e9c9305e04092d07fa83a7fc43eb68c57ad1ebc", "url": "https://github.com/seata/seata/commit/5e9c9305e04092d07fa83a7fc43eb68c57ad1ebc", "message": "fix code style", "committedDate": "2020-07-24T10:01:10Z", "type": "commit"}, {"oid": "163140c451a12f5e9e25d60c8f47a98ac9bfd490", "url": "https://github.com/seata/seata/commit/163140c451a12f5e9e25d60c8f47a98ac9bfd490", "message": "Merge branch 'develop' into 0716", "committedDate": "2020-07-28T03:28:01Z", "type": "commit"}]}