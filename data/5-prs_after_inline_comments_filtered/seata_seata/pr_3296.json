{"pr_number": 3296, "pr_title": "bugfix: when mixed use of AT and TCC, AT branchs is not deleted", "pr_createdAt": "2020-11-23T02:47:05Z", "pr_url": "https://github.com/seata/seata/pull/3296", "timeline": [{"oid": "d1713d2f2ec5aaee5f06dcbbdd20a7329270dc2b", "url": "https://github.com/seata/seata/commit/d1713d2f2ec5aaee5f06dcbbdd20a7329270dc2b", "message": "bugfix: when AT and TCC are mixed, AT branchs is not deleted", "committedDate": "2020-11-23T02:43:06Z", "type": "commit"}, {"oid": "5d59b6cd98a5d99f11b6571b9d2e7b8f0451ba38", "url": "https://github.com/seata/seata/commit/5d59b6cd98a5d99f11b6571b9d2e7b8f0451ba38", "message": "Merge branch 'develop' into bugfix-TC-async-commit", "committedDate": "2020-11-23T02:48:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQ1MzY1Mw==", "url": "https://github.com/seata/seata/pull/3296#discussion_r528453653", "bodyText": "\u8fd9\u91cc\u7528 globalSession.canBeCommittedAsync \u4f1a\u4e0d\u4f1a\u597d\u70b9\uff1f", "author": "caohdgege", "createdAt": "2020-11-23T03:13:27Z", "path": "server/src/main/java/io/seata/server/coordinator/DefaultCore.java", "diffHunk": "@@ -235,11 +238,12 @@ public boolean doGlobalCommit(GlobalSession globalSession, boolean retrying) thr\n                     }\n                 }\n             }\n-            if (globalSession.hasBranch()) {\n+            if (hasNoBranchsCanBeCommittedAsync && globalSession.hasBranch()) {", "originalCommit": "5d59b6cd98a5d99f11b6571b9d2e7b8f0451ba38", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQ1NjE2NA==", "url": "https://github.com/seata/seata/pull/3296#discussion_r528456164", "bodyText": "done", "author": "wangliang181230", "createdAt": "2020-11-23T03:27:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQ1MzY1Mw=="}], "type": "inlineReview"}, {"oid": "34cb6d452eeb62019400e71ccc40d802954e58df", "url": "https://github.com/seata/seata/commit/34cb6d452eeb62019400e71ccc40d802954e58df", "message": "optimize code", "committedDate": "2020-11-23T03:26:55Z", "type": "commit"}, {"oid": "6fe31fde95ecd4004f4efae61ad862f4010360a2", "url": "https://github.com/seata/seata/commit/6fe31fde95ecd4004f4efae61ad862f4010360a2", "message": "optimize comment", "committedDate": "2020-11-24T02:26:04Z", "type": "commit"}, {"oid": "8e05e5e4271b6171e0ec6e71655285830be2df7c", "url": "https://github.com/seata/seata/commit/8e05e5e4271b6171e0ec6e71655285830be2df7c", "message": "optimize config", "committedDate": "2020-11-24T04:23:57Z", "type": "commit"}, {"oid": "8fcd659023b58b656874f67d77993cb905bd0a80", "url": "https://github.com/seata/seata/commit/8fcd659023b58b656874f67d77993cb905bd0a80", "message": "optimize config", "committedDate": "2020-11-24T04:24:38Z", "type": "commit"}]}