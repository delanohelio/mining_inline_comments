{"pr_number": 1269, "pr_title": "Parser for Linkage Checker exclusion file", "pr_createdAt": "2020-03-03T20:14:58Z", "pr_url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269", "timeline": [{"oid": "27835f3c6c9fedd3dcb84c9096eb87ba9d038357", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/27835f3c6c9fedd3dcb84c9096eb87ba9d038357", "message": "Test that fails", "committedDate": "2020-03-02T19:14:40Z", "type": "commit"}, {"oid": "a3f603b1dd5e89cf143704f80e08f587ef028c1d", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/a3f603b1dd5e89cf143704f80e08f587ef028c1d", "message": "Test that passes", "committedDate": "2020-03-02T19:56:32Z", "type": "commit"}, {"oid": "141aa88f7a3e4fed97499b075884d9519c7fcfae", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/141aa88f7a3e4fed97499b075884d9519c7fcfae", "message": "Exclusion file parser", "committedDate": "2020-03-03T20:09:11Z", "type": "commit"}, {"oid": "b3ff95d8a320bc1822d2e74e42346a6e0b4c8e5b", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/b3ff95d8a320bc1822d2e74e42346a6e0b4c8e5b", "message": "Merge remote-tracking branch 'origin/master' into exclusion_xml", "committedDate": "2020-03-03T20:10:03Z", "type": "commit"}, {"oid": "e834331debecd1ba9492158bf553c52cc69fc82c", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/e834331debecd1ba9492158bf553c52cc69fc82c", "message": "Added package matcher test", "committedDate": "2020-03-03T20:14:09Z", "type": "commit"}, {"oid": "776d0718892e7ad7c5d8ef01489c152e58e5706e", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/776d0718892e7ad7c5d8ef01489c152e58e5706e", "message": "Reverting unintended change", "committedDate": "2020-03-03T20:15:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMxMDU3MA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387310570", "bodyText": "This part does not work with Windows.", "author": "suztomo", "createdAt": "2020-03-03T21:41:54Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileParser.java", "diffHunk": "@@ -0,0 +1,150 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.ArrayDeque;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.XMLReader;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/** Parser for Linkage Checker exclusion files. */\n+class ExclusionFileParser {\n+\n+  static ImmutableList<LinkageErrorMatcher> parse(Path exclusionFile)\n+      throws ParserConfigurationException, SAXException, IOException {\n+    SAXParserFactory spf = SAXParserFactory.newInstance();\n+    spf.setNamespaceAware(true);\n+    SAXParser saxParser = spf.newSAXParser();\n+\n+    XMLReader xmlReader = saxParser.getXMLReader();\n+    LinkageErrorMatcherHandler handler = new LinkageErrorMatcherHandler();\n+    xmlReader.setContentHandler(handler);\n+    xmlReader.parse(\"file://\" + exclusionFile);", "originalCommit": "776d0718892e7ad7c5d8ef01489c152e58e5706e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9e4dbb3d2ab3a75bd30ca4b530b7d98ead7542b7", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/9e4dbb3d2ab3a75bd30ca4b530b7d98ead7542b7", "message": "Avoid javax.xml", "committedDate": "2020-03-03T23:05:27Z", "type": "commit"}, {"oid": "c7d8e6b072674fa41cc511f31f8af071bca7100a", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/c7d8e6b072674fa41cc511f31f8af071bca7100a", "message": "Added javadoc in the parser", "committedDate": "2020-03-03T23:21:27Z", "type": "commit"}, {"oid": "97b285eccb78473bb3a77001e83f97c056b3e476", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/97b285eccb78473bb3a77001e83f97c056b3e476", "message": "Removed unused variables", "committedDate": "2020-03-03T23:49:00Z", "type": "commit"}, {"oid": "27f9d378ac7501043d8b987db3ded8cf06ae5e9f", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/27f9d378ac7501043d8b987db3ded8cf06ae5e9f", "message": "Merge remote-tracking branch 'origin/master' into exclusion_xml", "committedDate": "2020-03-04T15:25:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4MTMwOA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387781308", "bodyText": "Optional, and maybe not in this PR: writing an XSD, RELAX NG schema, or DTD can be an effective way to document this and si sometimes helpful in runtime validation.", "author": "elharo", "createdAt": "2020-03-04T16:25:41Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileParser.java", "diffHunk": "@@ -0,0 +1,177 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.InputSource;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.XMLReader;\n+import org.xml.sax.helpers.DefaultHandler;\n+import org.xml.sax.helpers.XMLReaderFactory;\n+\n+/**\n+ * Parser for Linkage Checker exclusion files.\n+ *\n+ * <p>The exclusion file for Linkage Checker is an XML file. Its top-level element is\n+ * LinkageCheckerFilter. The XML file contains the following structure:\n+ *\n+ * <ul>", "originalCommit": "27f9d378ac7501043d8b987db3ded8cf06ae5e9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzgxMzU0NA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387813544", "bodyText": "Nice idea. Created #1277", "author": "suztomo", "createdAt": "2020-03-04T17:17:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4MTMwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4MjMyMA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387782320", "bodyText": "Outer classes are easier to follow and reason about.", "author": "elharo", "createdAt": "2020-03-04T16:27:12Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileParser.java", "diffHunk": "@@ -0,0 +1,177 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.InputSource;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.XMLReader;\n+import org.xml.sax.helpers.DefaultHandler;\n+import org.xml.sax.helpers.XMLReaderFactory;\n+\n+/**\n+ * Parser for Linkage Checker exclusion files.\n+ *\n+ * <p>The exclusion file for Linkage Checker is an XML file. Its top-level element is\n+ * LinkageCheckerFilter. The XML file contains the following structure:\n+ *\n+ * <ul>\n+ *   <li>A LinkageCheckerFilter element has zero or more LinkageError elements.\n+ *   <li>A LinkageError element has at least one of Target element and Source element.\n+ *   <li>A Target element has Package, Class, Method, and Field elements. A Source element has\n+ *       Artifact, Package, and Class elements.\n+ *   <li>Method and Field elements have \u201cclassName\u201d attribute.\n+ * </ul>\n+ *\n+ * <p>Each type of the element works as a corresponding matcher, such as LinkageErrorMatcher for a\n+ * LinkageError element and SourceMatcher for Source element. Given a linkage error, they work as\n+ * below:\n+ *\n+ * <ul>\n+ *   <li>A LinkageErrorMatcher matches when all of its child elements match the linkage error.\n+ *   <li>A SourceMatcher matches a linkage error when the source class of the error matches one of\n+ *       its child elements.\n+ *   <li>A TargetMatcher matches a linkage error when the target symbol (class, method, or field) of\n+ *       the error matches one of its child elements.\n+ *   <li>A PackageMatcher matches the classes that have Java package specified by its name field.\n+ *       Prefix to specify child packages.\n+ *   <li>A ClassMatcher matches the class specified by its name attribute. ArtifactMatcher,\n+ *       PackageMatcher, and ClassMatcher also match methods and fields on their matching classes.\n+ *   <li>A MethodMatcher matches method symbol specified by className and name attribute.\n+ *   <li>A FieldMatcher matches field symbol specified by className and name attribute.\n+ * </ul>\n+ */\n+class ExclusionFileParser {\n+\n+  static ImmutableList<LinkageErrorMatcher> parse(Path exclusionFile)\n+      throws SAXException, IOException {\n+\n+    XMLReader xmlReader = XMLReaderFactory.createXMLReader();\n+    LinkageErrorMatcherHandler handler = new LinkageErrorMatcherHandler();\n+    xmlReader.setContentHandler(handler);\n+\n+    InputSource inputSource = new InputSource(new FileInputStream(exclusionFile.toFile()));\n+    xmlReader.parse(inputSource);\n+    return handler.getMatchers();\n+  }\n+\n+  private static class LinkageErrorMatcherHandler extends DefaultHandler {", "originalCommit": "27f9d378ac7501043d8b987db3ded8cf06ae5e9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzgxMzY1MQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387813651", "bodyText": "Moved this to an independent class.", "author": "suztomo", "createdAt": "2020-03-04T17:17:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4MjMyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4MzMxOA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387783318", "bodyText": "you can check that the namespace is empty before the switch statement and error or ignore if it isn't", "author": "elharo", "createdAt": "2020-03-04T16:28:41Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileParser.java", "diffHunk": "@@ -0,0 +1,177 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.InputSource;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.XMLReader;\n+import org.xml.sax.helpers.DefaultHandler;\n+import org.xml.sax.helpers.XMLReaderFactory;\n+\n+/**\n+ * Parser for Linkage Checker exclusion files.\n+ *\n+ * <p>The exclusion file for Linkage Checker is an XML file. Its top-level element is\n+ * LinkageCheckerFilter. The XML file contains the following structure:\n+ *\n+ * <ul>\n+ *   <li>A LinkageCheckerFilter element has zero or more LinkageError elements.\n+ *   <li>A LinkageError element has at least one of Target element and Source element.\n+ *   <li>A Target element has Package, Class, Method, and Field elements. A Source element has\n+ *       Artifact, Package, and Class elements.\n+ *   <li>Method and Field elements have \u201cclassName\u201d attribute.\n+ * </ul>\n+ *\n+ * <p>Each type of the element works as a corresponding matcher, such as LinkageErrorMatcher for a\n+ * LinkageError element and SourceMatcher for Source element. Given a linkage error, they work as\n+ * below:\n+ *\n+ * <ul>\n+ *   <li>A LinkageErrorMatcher matches when all of its child elements match the linkage error.\n+ *   <li>A SourceMatcher matches a linkage error when the source class of the error matches one of\n+ *       its child elements.\n+ *   <li>A TargetMatcher matches a linkage error when the target symbol (class, method, or field) of\n+ *       the error matches one of its child elements.\n+ *   <li>A PackageMatcher matches the classes that have Java package specified by its name field.\n+ *       Prefix to specify child packages.\n+ *   <li>A ClassMatcher matches the class specified by its name attribute. ArtifactMatcher,\n+ *       PackageMatcher, and ClassMatcher also match methods and fields on their matching classes.\n+ *   <li>A MethodMatcher matches method symbol specified by className and name attribute.\n+ *   <li>A FieldMatcher matches field symbol specified by className and name attribute.\n+ * </ul>\n+ */\n+class ExclusionFileParser {\n+\n+  static ImmutableList<LinkageErrorMatcher> parse(Path exclusionFile)\n+      throws SAXException, IOException {\n+\n+    XMLReader xmlReader = XMLReaderFactory.createXMLReader();\n+    LinkageErrorMatcherHandler handler = new LinkageErrorMatcherHandler();\n+    xmlReader.setContentHandler(handler);\n+\n+    InputSource inputSource = new InputSource(new FileInputStream(exclusionFile.toFile()));\n+    xmlReader.parse(inputSource);\n+    return handler.getMatchers();\n+  }\n+\n+  private static class LinkageErrorMatcherHandler extends DefaultHandler {\n+\n+    private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+    private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+    ImmutableList<LinkageErrorMatcher> getMatchers() {\n+      return matchers.build();\n+    }\n+\n+    @Override\n+    public void startDocument() {\n+      matchers = ImmutableList.builder();\n+    }\n+\n+    private void addMatcherToTop(Object child) throws SAXException {\n+      SymbolProblemMatcher parent = stack.peek();\n+      if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {\n+        ((SourceMatcher) parent).addMatcher((SymbolProblemSourceMatcher) child);\n+      } else if (parent instanceof TargetMatcher && child instanceof SymbolProblemTargetMatcher) {\n+        ((TargetMatcher) parent).addMatcher((SymbolProblemTargetMatcher) child);\n+      } else {\n+        throw new SAXException(\n+            \"Unexpected parent-child relationship. Parent:\" + parent + \", child:\" + child);\n+      }\n+    }\n+\n+    @Override\n+    public void startElement(\n+        String namespaceURI, String localName, String qName, Attributes attributes)\n+        throws SAXException {\n+      switch (localName) {", "originalCommit": "27f9d378ac7501043d8b987db3ded8cf06ae5e9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzgyMTA4NQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387821085", "bodyText": "Added that check to throw an error if namespaceURI is not empty.", "author": "suztomo", "createdAt": "2020-03-04T17:30:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4MzMxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4NDA3MQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387784071", "bodyText": "watch for namespaces", "author": "elharo", "createdAt": "2020-03-04T16:29:40Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileParser.java", "diffHunk": "@@ -0,0 +1,177 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.InputSource;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.XMLReader;\n+import org.xml.sax.helpers.DefaultHandler;\n+import org.xml.sax.helpers.XMLReaderFactory;\n+\n+/**\n+ * Parser for Linkage Checker exclusion files.\n+ *\n+ * <p>The exclusion file for Linkage Checker is an XML file. Its top-level element is\n+ * LinkageCheckerFilter. The XML file contains the following structure:\n+ *\n+ * <ul>\n+ *   <li>A LinkageCheckerFilter element has zero or more LinkageError elements.\n+ *   <li>A LinkageError element has at least one of Target element and Source element.\n+ *   <li>A Target element has Package, Class, Method, and Field elements. A Source element has\n+ *       Artifact, Package, and Class elements.\n+ *   <li>Method and Field elements have \u201cclassName\u201d attribute.\n+ * </ul>\n+ *\n+ * <p>Each type of the element works as a corresponding matcher, such as LinkageErrorMatcher for a\n+ * LinkageError element and SourceMatcher for Source element. Given a linkage error, they work as\n+ * below:\n+ *\n+ * <ul>\n+ *   <li>A LinkageErrorMatcher matches when all of its child elements match the linkage error.\n+ *   <li>A SourceMatcher matches a linkage error when the source class of the error matches one of\n+ *       its child elements.\n+ *   <li>A TargetMatcher matches a linkage error when the target symbol (class, method, or field) of\n+ *       the error matches one of its child elements.\n+ *   <li>A PackageMatcher matches the classes that have Java package specified by its name field.\n+ *       Prefix to specify child packages.\n+ *   <li>A ClassMatcher matches the class specified by its name attribute. ArtifactMatcher,\n+ *       PackageMatcher, and ClassMatcher also match methods and fields on their matching classes.\n+ *   <li>A MethodMatcher matches method symbol specified by className and name attribute.\n+ *   <li>A FieldMatcher matches field symbol specified by className and name attribute.\n+ * </ul>\n+ */\n+class ExclusionFileParser {\n+\n+  static ImmutableList<LinkageErrorMatcher> parse(Path exclusionFile)\n+      throws SAXException, IOException {\n+\n+    XMLReader xmlReader = XMLReaderFactory.createXMLReader();\n+    LinkageErrorMatcherHandler handler = new LinkageErrorMatcherHandler();\n+    xmlReader.setContentHandler(handler);\n+\n+    InputSource inputSource = new InputSource(new FileInputStream(exclusionFile.toFile()));\n+    xmlReader.parse(inputSource);\n+    return handler.getMatchers();\n+  }\n+\n+  private static class LinkageErrorMatcherHandler extends DefaultHandler {\n+\n+    private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+    private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+    ImmutableList<LinkageErrorMatcher> getMatchers() {\n+      return matchers.build();\n+    }\n+\n+    @Override\n+    public void startDocument() {\n+      matchers = ImmutableList.builder();\n+    }\n+\n+    private void addMatcherToTop(Object child) throws SAXException {\n+      SymbolProblemMatcher parent = stack.peek();\n+      if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {\n+        ((SourceMatcher) parent).addMatcher((SymbolProblemSourceMatcher) child);\n+      } else if (parent instanceof TargetMatcher && child instanceof SymbolProblemTargetMatcher) {\n+        ((TargetMatcher) parent).addMatcher((SymbolProblemTargetMatcher) child);\n+      } else {\n+        throw new SAXException(\n+            \"Unexpected parent-child relationship. Parent:\" + parent + \", child:\" + child);\n+      }\n+    }\n+\n+    @Override\n+    public void startElement(\n+        String namespaceURI, String localName, String qName, Attributes attributes)\n+        throws SAXException {\n+      switch (localName) {\n+        case \"LinkageCheckerFilter\":\n+          break;\n+        case \"LinkageError\":\n+          stack.push(new LinkageErrorMatcher());\n+          break;\n+        case \"Source\":\n+          SourceMatcher sourceMatcher = new SourceMatcher();\n+          ((LinkageErrorMatcher) stack.peek()).setSourceMatcher(sourceMatcher);\n+          stack.push(sourceMatcher);\n+          break;\n+        case \"Target\":\n+          TargetMatcher targetMatcher = new TargetMatcher();\n+          ((LinkageErrorMatcher) stack.peek()).setTargetMatcher(targetMatcher);\n+          stack.push(targetMatcher);\n+          break;\n+        case \"Package\":\n+          PackageMatcher packageMatcher = new PackageMatcher(attributes.getValue(\"name\"));\n+          addMatcherToTop(packageMatcher);\n+          break;\n+        case \"Class\":\n+          String classNameOnClass = attributes.getValue(\"name\");\n+          ClassMatcher classMatcher = new ClassMatcher(classNameOnClass);\n+          addMatcherToTop(classMatcher);\n+          break;\n+        case \"Method\":\n+          String classNameOnMethod = attributes.getValue(\"className\");\n+          MethodMatcher methodMatcher =\n+              new MethodMatcher(classNameOnMethod, attributes.getValue(\"name\"));\n+          addMatcherToTop(methodMatcher);\n+          break;\n+        case \"Field\":\n+          String classNameOnField = attributes.getValue(\"className\");\n+          FieldMatcher fieldMatcher =\n+              new FieldMatcher(classNameOnField, attributes.getValue(\"name\"));\n+          addMatcherToTop(fieldMatcher);\n+          break;\n+        default:\n+          throw new SAXException(\"Unknown tag \" + localName);\n+      }\n+    }\n+\n+    @Override\n+    public void endElement(String uri, String localName, String qName) throws SAXException {\n+      SymbolProblemMatcher poppedMatcher;\n+      switch (localName) {", "originalCommit": "27f9d378ac7501043d8b987db3ded8cf06ae5e9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzgyMTc3NA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387821774", "bodyText": "Added that check.", "author": "suztomo", "createdAt": "2020-03-04T17:31:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4NDA3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4NTI0Nw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387785247", "bodyText": "Does startsWith work here or do we need a period or forward slash at the end to avoid accidental matches?", "author": "elharo", "createdAt": "2020-03-04T16:31:14Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/PackageMatcher.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+/**\n+ * Matcher on the classes of a package and its subpackages.\n+ *\n+ * <p>For example, {@code PackageMatcher(\"com.google\")} matches {@code com.google.Foo} class as well\n+ * as {@code com.google.cloud.Bar}.\n+ */\n+class PackageMatcher implements SymbolProblemTargetMatcher, SymbolProblemSourceMatcher {\n+\n+  private final String packageName;\n+\n+  PackageMatcher(String packageName) {\n+    this.packageName = checkNotNull(packageName);\n+  }\n+\n+  @Override\n+  public boolean match(Symbol problem) {\n+    return problem.getClassBinaryName().startsWith(packageName);", "originalCommit": "27f9d378ac7501043d8b987db3ded8cf06ae5e9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzgyNDQ4Mw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r387824483", "bodyText": "Updated the logic. \"com.ab\" should not match \"com.abcd\" here. Added test testParse_targetPackage_unmatch.", "author": "suztomo", "createdAt": "2020-03-04T17:36:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc4NTI0Nw=="}], "type": "inlineReview"}, {"oid": "5a6c70b4c184c7bef996559307902377778b4853", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/5a6c70b4c184c7bef996559307902377778b4853", "message": "Independent XmlParserHandler", "committedDate": "2020-03-04T17:17:54Z", "type": "commit"}, {"oid": "979d0808ceaa91711d7cb6d8c1ff2c7d7329e426", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/979d0808ceaa91711d7cb6d8c1ff2c7d7329e426", "message": "Error if namespace is not empty", "committedDate": "2020-03-04T17:35:48Z", "type": "commit"}, {"oid": "27689a4e2501161b3e32eb6bb457cd7054a7742d", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/27689a4e2501161b3e32eb6bb457cd7054a7742d", "message": "Added test for namespace", "committedDate": "2020-03-04T17:51:40Z", "type": "commit"}, {"oid": "636219425a1d12772dbd839b592b922c3466fcfa", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/636219425a1d12772dbd839b592b922c3466fcfa", "message": "Merge remote-tracking branch 'origin/master' into exclusion_xml", "committedDate": "2020-03-05T19:07:47Z", "type": "commit"}, {"oid": "7523845b98ddd587355dd2dce3b1773b1693b709", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/7523845b98ddd587355dd2dce3b1773b1693b709", "message": "Merge branch 'master' into exclusion_xml", "committedDate": "2020-03-06T13:53:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk0NjQ1Nw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r388946457", "bodyText": "It is unclear what this stack does or how it works. Some comments would be helpful.\nIt might be that stack is not the best data structure here. A custom class might work better.", "author": "elharo", "createdAt": "2020-03-06T14:51:38Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();", "originalCommit": "7523845b98ddd587355dd2dce3b1773b1693b709", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA5ODQ5OQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389098499", "bodyText": "Added javadoc to the stack. (Let me know if you think a custom class can express this better than stack.)", "author": "suztomo", "createdAt": "2020-03-06T19:30:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk0NjQ1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk0Nzg0MQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r388947841", "bodyText": "It looks like the fields are half reusable and half not. Do you intend a single handler to be used to parse more than one document or not? Either way and make sure to document this and either:\nThrow an IllegalStateException the second time startDocument is called\nor\nreset all fields in startDocument", "author": "elharo", "createdAt": "2020-03-06T14:53:45Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    matchers = ImmutableList.builder();", "originalCommit": "7523845b98ddd587355dd2dce3b1773b1693b709", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA5NjYyNw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389096627", "bodyText": "Added IllegalStateException and Javadoc.", "author": "suztomo", "createdAt": "2020-03-06T19:26:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk0Nzg0MQ=="}], "type": "inlineReview"}, {"oid": "9a2dc6eeed9cf9f053c40f6a0609afccab1f9d76", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/9a2dc6eeed9cf9f053c40f6a0609afccab1f9d76", "message": "Target and Source to have only one child", "committedDate": "2020-03-06T19:37:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEwNDUzMA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389104530", "bodyText": "More validation in XML structure is to be done at #1277", "author": "suztomo", "createdAt": "2020-03-06T19:40:35Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    if (matchers != null) {\n+      throw new IllegalStateException(\"This handler started reading document already\");\n+    }\n+    matchers = ImmutableList.builder();\n+  }\n+\n+  private void addMatcherToTop(Object child) throws SAXException {\n+    SymbolProblemMatcher parent = stack.peek();\n+    if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {\n+      ((SourceMatcher) parent).setMatcher((SymbolProblemSourceMatcher) child);\n+    } else if (parent instanceof TargetMatcher && child instanceof SymbolProblemTargetMatcher) {\n+      ((TargetMatcher) parent).setMatcher((SymbolProblemTargetMatcher) child);\n+    } else {\n+      throw new SAXException(\n+          \"Unexpected parent-child relationship. Parent:\" + parent + \", child:\" + child);\n+    }\n+  }\n+\n+  @Override\n+  public void startElement(\n+      String namespaceURI, String localName, String qName, Attributes attributes)\n+      throws SAXException {\n+    if (!namespaceURI.isEmpty()) {\n+      throw new SAXException(\"The exclusion rule does not support XML namespace\");\n+    }\n+    switch (localName) {", "originalCommit": "9a2dc6eeed9cf9f053c40f6a0609afccab1f9d76", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNDUyOA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389624528", "bodyText": "I'd suggest that as documentation, not as part of the processing chain.", "author": "elharo", "createdAt": "2020-03-09T12:19:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEwNDUzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTcyNTkyNQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389725925", "bodyText": "Started writing https://github.com/GoogleCloudPlatform/cloud-opensource-java/wiki/Linkage-Checker-Exclusion-File", "author": "suztomo", "createdAt": "2020-03-09T14:29:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEwNDUzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyMjYwMQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389622601", "bodyText": "Is the order of the matchers significant?", "author": "elharo", "createdAt": "2020-03-09T12:15:14Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {", "originalCommit": "9a2dc6eeed9cf9f053c40f6a0609afccab1f9d76", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTcxMTE1Mg==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389711152", "bodyText": "The order matters to detect unused exclusion rules.\n#1275", "author": "suztomo", "createdAt": "2020-03-09T14:10:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyMjYwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyMzYxOA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389623618", "bodyText": "Why is the argument type Object? It seems this could be more specific.", "author": "elharo", "createdAt": "2020-03-09T12:17:34Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    if (matchers != null) {\n+      throw new IllegalStateException(\"This handler started reading document already\");\n+    }\n+    matchers = ImmutableList.builder();\n+  }\n+\n+  private void addMatcherToTop(Object child) throws SAXException {", "originalCommit": "9a2dc6eeed9cf9f053c40f6a0609afccab1f9d76", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTcxNTY1NA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389715654", "bodyText": "Good catch. It's SymbolProblemTargetMatcher interface. Updated.", "author": "suztomo", "createdAt": "2020-03-09T14:14:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyMzYxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNDE4MA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389624180", "bodyText": "Suggest changing message to \"unrecognized element: \" + qName + \" in namespace \" + namespaceURI", "author": "elharo", "createdAt": "2020-03-09T12:18:44Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    if (matchers != null) {\n+      throw new IllegalStateException(\"This handler started reading document already\");\n+    }\n+    matchers = ImmutableList.builder();\n+  }\n+\n+  private void addMatcherToTop(Object child) throws SAXException {\n+    SymbolProblemMatcher parent = stack.peek();\n+    if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {\n+      ((SourceMatcher) parent).setMatcher((SymbolProblemSourceMatcher) child);\n+    } else if (parent instanceof TargetMatcher && child instanceof SymbolProblemTargetMatcher) {\n+      ((TargetMatcher) parent).setMatcher((SymbolProblemTargetMatcher) child);\n+    } else {\n+      throw new SAXException(\n+          \"Unexpected parent-child relationship. Parent:\" + parent + \", child:\" + child);\n+    }\n+  }\n+\n+  @Override\n+  public void startElement(\n+      String namespaceURI, String localName, String qName, Attributes attributes)\n+      throws SAXException {\n+    if (!namespaceURI.isEmpty()) {\n+      throw new SAXException(\"The exclusion rule does not support XML namespace\");", "originalCommit": "9a2dc6eeed9cf9f053c40f6a0609afccab1f9d76", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTcxODY1NQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389718655", "bodyText": "Nice. Updated.", "author": "suztomo", "createdAt": "2020-03-09T14:19:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNDE4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNDI5Mw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389624293", "bodyText": "namespaceUri\nqualifiedName", "author": "elharo", "createdAt": "2020-03-09T12:19:02Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    if (matchers != null) {\n+      throw new IllegalStateException(\"This handler started reading document already\");\n+    }\n+    matchers = ImmutableList.builder();\n+  }\n+\n+  private void addMatcherToTop(Object child) throws SAXException {\n+    SymbolProblemMatcher parent = stack.peek();\n+    if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {\n+      ((SourceMatcher) parent).setMatcher((SymbolProblemSourceMatcher) child);\n+    } else if (parent instanceof TargetMatcher && child instanceof SymbolProblemTargetMatcher) {\n+      ((TargetMatcher) parent).setMatcher((SymbolProblemTargetMatcher) child);\n+    } else {\n+      throw new SAXException(\n+          \"Unexpected parent-child relationship. Parent:\" + parent + \", child:\" + child);\n+    }\n+  }\n+\n+  @Override\n+  public void startElement(\n+      String namespaceURI, String localName, String qName, Attributes attributes)", "originalCommit": "9a2dc6eeed9cf9f053c40f6a0609afccab1f9d76", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTcxNzY2OQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389717669", "bodyText": "Fixed.", "author": "suztomo", "createdAt": "2020-03-09T14:17:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNDI5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNTExOQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389625119", "bodyText": "It's OK and arguably better to simply ignore unrecongized elements.", "author": "elharo", "createdAt": "2020-03-09T12:20:53Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    if (matchers != null) {\n+      throw new IllegalStateException(\"This handler started reading document already\");\n+    }\n+    matchers = ImmutableList.builder();\n+  }\n+\n+  private void addMatcherToTop(Object child) throws SAXException {\n+    SymbolProblemMatcher parent = stack.peek();\n+    if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {\n+      ((SourceMatcher) parent).setMatcher((SymbolProblemSourceMatcher) child);\n+    } else if (parent instanceof TargetMatcher && child instanceof SymbolProblemTargetMatcher) {\n+      ((TargetMatcher) parent).setMatcher((SymbolProblemTargetMatcher) child);\n+    } else {\n+      throw new SAXException(\n+          \"Unexpected parent-child relationship. Parent:\" + parent + \", child:\" + child);\n+    }\n+  }\n+\n+  @Override\n+  public void startElement(\n+      String namespaceURI, String localName, String qName, Attributes attributes)\n+      throws SAXException {\n+    if (!namespaceURI.isEmpty()) {\n+      throw new SAXException(\"The exclusion rule does not support XML namespace\");\n+    }\n+    switch (localName) {\n+      case \"LinkageCheckerFilter\":\n+        break;\n+      case \"LinkageError\":\n+        stack.push(new LinkageErrorMatcher());\n+        break;\n+      case \"Source\":\n+        SourceMatcher sourceMatcher = new SourceMatcher();\n+        ((LinkageErrorMatcher) stack.peek()).setSourceMatcher(sourceMatcher);\n+        stack.push(sourceMatcher);\n+        break;\n+      case \"Target\":\n+        TargetMatcher targetMatcher = new TargetMatcher();\n+        ((LinkageErrorMatcher) stack.peek()).setTargetMatcher(targetMatcher);\n+        stack.push(targetMatcher);\n+        break;\n+      case \"Package\":\n+        PackageMatcher packageMatcher = new PackageMatcher(attributes.getValue(\"name\"));\n+        addMatcherToTop(packageMatcher);\n+        break;\n+      case \"Class\":\n+        String classNameOnClass = attributes.getValue(\"name\");\n+        ClassMatcher classMatcher = new ClassMatcher(classNameOnClass);\n+        addMatcherToTop(classMatcher);\n+        break;\n+      case \"Method\":\n+        String classNameOnMethod = attributes.getValue(\"className\");\n+        MethodMatcher methodMatcher =\n+            new MethodMatcher(classNameOnMethod, attributes.getValue(\"name\"));\n+        addMatcherToTop(methodMatcher);\n+        break;\n+      case \"Field\":\n+        String classNameOnField = attributes.getValue(\"className\");\n+        FieldMatcher fieldMatcher = new FieldMatcher(classNameOnField, attributes.getValue(\"name\"));\n+        addMatcherToTop(fieldMatcher);\n+        break;\n+      default:\n+        throw new SAXException(\"Unknown tag \" + localName);", "originalCommit": "9a2dc6eeed9cf9f053c40f6a0609afccab1f9d76", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTcyNjkwNA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389726904", "bodyText": "I prefer to show errors for unrecognized elements. The errors help to detect typos.\nMore validation will be done in #1277", "author": "suztomo", "createdAt": "2020-03-09T14:30:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNTExOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNTYxMw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389625613", "bodyText": "final", "author": "elharo", "createdAt": "2020-03-09T12:22:01Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/MethodMatcher.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+/** Matcher on method symbols. */\n+class MethodMatcher implements SymbolProblemTargetMatcher {\n+\n+  private String className;", "originalCommit": "9a2dc6eeed9cf9f053c40f6a0609afccab1f9d76", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTcyODg1MA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389728850", "bodyText": "Updated.", "author": "suztomo", "createdAt": "2020-03-09T14:33:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyNTYxMw=="}], "type": "inlineReview"}, {"oid": "5b8bf5dec65b26353f03ca80d766fc12ddb73a82", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/5b8bf5dec65b26353f03ca80d766fc12ddb73a82", "message": "addMatcherToTop", "committedDate": "2020-03-09T14:15:01Z", "type": "commit"}, {"oid": "6709912e6978a89fb71d87c06fb809a7ee4f58dd", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/6709912e6978a89fb71d87c06fb809a7ee4f58dd", "message": "javadoc to addMatcherToParent", "committedDate": "2020-03-09T14:16:55Z", "type": "commit"}, {"oid": "205c4dabafda1cc1ff2b8cf02fbd5466411ae456", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/205c4dabafda1cc1ff2b8cf02fbd5466411ae456", "message": "final members", "committedDate": "2020-03-09T14:33:26Z", "type": "commit"}, {"oid": "96bbefde37e1a0e164aba00ccc7041f8f3ba0bda", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/96bbefde37e1a0e164aba00ccc7041f8f3ba0bda", "message": "Merge remote-tracking branch 'origin/master' into exclusion_xml", "committedDate": "2020-03-09T14:35:33Z", "type": "commit"}, {"oid": "63f571cfc890d7b0096bbb91833f025e7dd4786f", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/63f571cfc890d7b0096bbb91833f025e7dd4786f", "message": "Fixed test", "committedDate": "2020-03-09T14:38:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0MTM0Nw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389741347", "bodyText": "This is an awful lot of casting and instanceof, and it makes me wonder if we're not taking advantage of polymorphism where we could, or perhaps we don't have quite the right class hierarchy.\nIs there perhaps some way SymbolProblemMatcher.setMatcher could simply work when it's passed any instance of SymbolProblemTargetMatcher?", "author": "elharo", "createdAt": "2020-03-09T14:52:09Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,146 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    if (matchers != null) {\n+      throw new IllegalStateException(\"This handler started reading document already\");\n+    }\n+    matchers = ImmutableList.builder();\n+  }\n+\n+  /** Adds {@code child} to the parent matcher that is at the top of the {@link #stack}. */\n+  private void addMatcherToParent(SymbolProblemTargetMatcher child) throws SAXException {\n+    SymbolProblemMatcher parent = stack.peek();\n+    if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {", "originalCommit": "63f571cfc890d7b0096bbb91833f025e7dd4786f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0OTg4Ng==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389749886", "bodyText": "SymbolProblemMatcher.setMatcher could simply work when it's passed any instance of SymbolProblemTargetMatcher?\n\nNo, SourceMatcher cannot take FieldMatcher. I replaced the stack and this function with the two variables linkageErrorMatcher and symbolProblemMatcher. Now the logic is much simpler. Does this look good now?", "author": "suztomo", "createdAt": "2020-03-09T15:04:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0MTM0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc3Nzk0OQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389777949", "bodyText": "SymbolProblemMatcher's addChild now may be the one you mentioned above:\n  default void addChild(SymbolProblemTargetMatcher child) {\n    throw new IllegalStateException(\"This element is not supposed to take child element\");\n  }", "author": "suztomo", "createdAt": "2020-03-09T15:44:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0MTM0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0MjY3Mw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389742673", "bodyText": "I don't think this case can happen, given that this case would have been detected already unless the document is malformed, in which case you'll also have errored out before this is called.", "author": "elharo", "createdAt": "2020-03-09T14:53:56Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,146 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    if (matchers != null) {\n+      throw new IllegalStateException(\"This handler started reading document already\");\n+    }\n+    matchers = ImmutableList.builder();\n+  }\n+\n+  /** Adds {@code child} to the parent matcher that is at the top of the {@link #stack}. */\n+  private void addMatcherToParent(SymbolProblemTargetMatcher child) throws SAXException {\n+    SymbolProblemMatcher parent = stack.peek();\n+    if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {\n+      ((SourceMatcher) parent).setMatcher((SymbolProblemSourceMatcher) child);\n+    } else if (parent instanceof TargetMatcher) {\n+      ((TargetMatcher) parent).setMatcher(child);\n+    } else {\n+      throw new SAXException(\n+          \"Unexpected parent-child relationship. Parent:\" + parent + \", child:\" + child);\n+    }\n+  }\n+\n+  @Override\n+  public void startElement(\n+      String namespaceUri, String localName, String qualifiedName, Attributes attributes)\n+      throws SAXException {\n+    if (!namespaceUri.isEmpty()) {\n+      throw new SAXException(\n+          \"unrecognized element: \" + qualifiedName + \" in namespace \" + namespaceUri);\n+    }\n+    switch (localName) {\n+      case \"LinkageCheckerFilter\":\n+        break;\n+      case \"LinkageError\":\n+        stack.push(new LinkageErrorMatcher());\n+        break;\n+      case \"Source\":\n+        SourceMatcher sourceMatcher = new SourceMatcher();\n+        ((LinkageErrorMatcher) stack.peek()).setSourceMatcher(sourceMatcher);\n+        stack.push(sourceMatcher);\n+        break;\n+      case \"Target\":\n+        TargetMatcher targetMatcher = new TargetMatcher();\n+        ((LinkageErrorMatcher) stack.peek()).setTargetMatcher(targetMatcher);\n+        stack.push(targetMatcher);\n+        break;\n+      case \"Package\":\n+        PackageMatcher packageMatcher = new PackageMatcher(attributes.getValue(\"name\"));\n+        addMatcherToParent(packageMatcher);\n+        break;\n+      case \"Class\":\n+        String classNameOnClass = attributes.getValue(\"name\");\n+        ClassMatcher classMatcher = new ClassMatcher(classNameOnClass);\n+        addMatcherToParent(classMatcher);\n+        break;\n+      case \"Method\":\n+        String classNameOnMethod = attributes.getValue(\"className\");\n+        MethodMatcher methodMatcher =\n+            new MethodMatcher(classNameOnMethod, attributes.getValue(\"name\"));\n+        addMatcherToParent(methodMatcher);\n+        break;\n+      case \"Field\":\n+        String classNameOnField = attributes.getValue(\"className\");\n+        FieldMatcher fieldMatcher = new FieldMatcher(classNameOnField, attributes.getValue(\"name\"));\n+        addMatcherToParent(fieldMatcher);\n+        break;\n+      default:\n+        throw new SAXException(\"Unknown tag \" + localName);\n+    }\n+  }\n+\n+  @Override\n+  public void endElement(String namespaceUri, String localName, String qualifiedName)\n+      throws SAXException {\n+    SymbolProblemMatcher poppedMatcher;\n+    if (!namespaceUri.isEmpty()) {", "originalCommit": "63f571cfc890d7b0096bbb91833f025e7dd4786f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc1MDYxOQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389750619", "bodyText": "Removed this check in endElement.", "author": "suztomo", "createdAt": "2020-03-09T15:05:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0MjY3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0MzA4MA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389743080", "bodyText": "I'm not sure this case is reachable either", "author": "elharo", "createdAt": "2020-03-09T14:54:30Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,146 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    if (matchers != null) {\n+      throw new IllegalStateException(\"This handler started reading document already\");\n+    }\n+    matchers = ImmutableList.builder();\n+  }\n+\n+  /** Adds {@code child} to the parent matcher that is at the top of the {@link #stack}. */\n+  private void addMatcherToParent(SymbolProblemTargetMatcher child) throws SAXException {\n+    SymbolProblemMatcher parent = stack.peek();\n+    if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {\n+      ((SourceMatcher) parent).setMatcher((SymbolProblemSourceMatcher) child);\n+    } else if (parent instanceof TargetMatcher) {\n+      ((TargetMatcher) parent).setMatcher(child);\n+    } else {\n+      throw new SAXException(\n+          \"Unexpected parent-child relationship. Parent:\" + parent + \", child:\" + child);\n+    }\n+  }\n+\n+  @Override\n+  public void startElement(\n+      String namespaceUri, String localName, String qualifiedName, Attributes attributes)\n+      throws SAXException {\n+    if (!namespaceUri.isEmpty()) {\n+      throw new SAXException(\n+          \"unrecognized element: \" + qualifiedName + \" in namespace \" + namespaceUri);\n+    }\n+    switch (localName) {\n+      case \"LinkageCheckerFilter\":\n+        break;\n+      case \"LinkageError\":\n+        stack.push(new LinkageErrorMatcher());\n+        break;\n+      case \"Source\":\n+        SourceMatcher sourceMatcher = new SourceMatcher();\n+        ((LinkageErrorMatcher) stack.peek()).setSourceMatcher(sourceMatcher);\n+        stack.push(sourceMatcher);\n+        break;\n+      case \"Target\":\n+        TargetMatcher targetMatcher = new TargetMatcher();\n+        ((LinkageErrorMatcher) stack.peek()).setTargetMatcher(targetMatcher);\n+        stack.push(targetMatcher);\n+        break;\n+      case \"Package\":\n+        PackageMatcher packageMatcher = new PackageMatcher(attributes.getValue(\"name\"));\n+        addMatcherToParent(packageMatcher);\n+        break;\n+      case \"Class\":\n+        String classNameOnClass = attributes.getValue(\"name\");\n+        ClassMatcher classMatcher = new ClassMatcher(classNameOnClass);\n+        addMatcherToParent(classMatcher);\n+        break;\n+      case \"Method\":\n+        String classNameOnMethod = attributes.getValue(\"className\");\n+        MethodMatcher methodMatcher =\n+            new MethodMatcher(classNameOnMethod, attributes.getValue(\"name\"));\n+        addMatcherToParent(methodMatcher);\n+        break;\n+      case \"Field\":\n+        String classNameOnField = attributes.getValue(\"className\");\n+        FieldMatcher fieldMatcher = new FieldMatcher(classNameOnField, attributes.getValue(\"name\"));\n+        addMatcherToParent(fieldMatcher);\n+        break;\n+      default:\n+        throw new SAXException(\"Unknown tag \" + localName);\n+    }\n+  }\n+\n+  @Override\n+  public void endElement(String namespaceUri, String localName, String qualifiedName)\n+      throws SAXException {\n+    SymbolProblemMatcher poppedMatcher;\n+    if (!namespaceUri.isEmpty()) {\n+      throw new SAXException(\n+          \"unrecognized element: \" + qualifiedName + \" in namespace \" + namespaceUri);\n+    }\n+    switch (localName) {\n+      case \"Source\":\n+      case \"Target\":\n+        poppedMatcher = stack.pop();\n+        if (!(poppedMatcher instanceof TargetMatcher)", "originalCommit": "63f571cfc890d7b0096bbb91833f025e7dd4786f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc1MTI2Mw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389751263", "bodyText": "Removed endElement altogether.", "author": "suztomo", "createdAt": "2020-03-09T15:05:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0MzA4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0Mzk2MQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389743961", "bodyText": "!stack.isEmpty()", "author": "elharo", "createdAt": "2020-03-09T14:55:43Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/ExclusionFileHandler.java", "diffHunk": "@@ -0,0 +1,146 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+import com.google.common.collect.ImmutableList;\n+import java.util.ArrayDeque;\n+import org.xml.sax.Attributes;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.helpers.DefaultHandler;\n+\n+/**\n+ * Handler for Linkage Checker exclusion XML files.\n+ *\n+ * <p>An instance of this class can process one document and cannot be reused for other documents.\n+ */\n+class ExclusionFileHandler extends DefaultHandler {\n+\n+  /**\n+   * Stack to hold the ancestors of the XML element in {@link #startElement(String, String, String,\n+   * Attributes)}.\n+   */\n+  private ArrayDeque<SymbolProblemMatcher> stack = new ArrayDeque<>();\n+\n+  private ImmutableList.Builder<LinkageErrorMatcher> matchers;\n+\n+  ImmutableList<LinkageErrorMatcher> getMatchers() {\n+    return matchers.build();\n+  }\n+\n+  @Override\n+  public void startDocument() {\n+    if (matchers != null) {\n+      throw new IllegalStateException(\"This handler started reading document already\");\n+    }\n+    matchers = ImmutableList.builder();\n+  }\n+\n+  /** Adds {@code child} to the parent matcher that is at the top of the {@link #stack}. */\n+  private void addMatcherToParent(SymbolProblemTargetMatcher child) throws SAXException {\n+    SymbolProblemMatcher parent = stack.peek();\n+    if (parent instanceof SourceMatcher && child instanceof SymbolProblemSourceMatcher) {\n+      ((SourceMatcher) parent).setMatcher((SymbolProblemSourceMatcher) child);\n+    } else if (parent instanceof TargetMatcher) {\n+      ((TargetMatcher) parent).setMatcher(child);\n+    } else {\n+      throw new SAXException(\n+          \"Unexpected parent-child relationship. Parent:\" + parent + \", child:\" + child);\n+    }\n+  }\n+\n+  @Override\n+  public void startElement(\n+      String namespaceUri, String localName, String qualifiedName, Attributes attributes)\n+      throws SAXException {\n+    if (!namespaceUri.isEmpty()) {\n+      throw new SAXException(\n+          \"unrecognized element: \" + qualifiedName + \" in namespace \" + namespaceUri);\n+    }\n+    switch (localName) {\n+      case \"LinkageCheckerFilter\":\n+        break;\n+      case \"LinkageError\":\n+        stack.push(new LinkageErrorMatcher());\n+        break;\n+      case \"Source\":\n+        SourceMatcher sourceMatcher = new SourceMatcher();\n+        ((LinkageErrorMatcher) stack.peek()).setSourceMatcher(sourceMatcher);\n+        stack.push(sourceMatcher);\n+        break;\n+      case \"Target\":\n+        TargetMatcher targetMatcher = new TargetMatcher();\n+        ((LinkageErrorMatcher) stack.peek()).setTargetMatcher(targetMatcher);\n+        stack.push(targetMatcher);\n+        break;\n+      case \"Package\":\n+        PackageMatcher packageMatcher = new PackageMatcher(attributes.getValue(\"name\"));\n+        addMatcherToParent(packageMatcher);\n+        break;\n+      case \"Class\":\n+        String classNameOnClass = attributes.getValue(\"name\");\n+        ClassMatcher classMatcher = new ClassMatcher(classNameOnClass);\n+        addMatcherToParent(classMatcher);\n+        break;\n+      case \"Method\":\n+        String classNameOnMethod = attributes.getValue(\"className\");\n+        MethodMatcher methodMatcher =\n+            new MethodMatcher(classNameOnMethod, attributes.getValue(\"name\"));\n+        addMatcherToParent(methodMatcher);\n+        break;\n+      case \"Field\":\n+        String classNameOnField = attributes.getValue(\"className\");\n+        FieldMatcher fieldMatcher = new FieldMatcher(classNameOnField, attributes.getValue(\"name\"));\n+        addMatcherToParent(fieldMatcher);\n+        break;\n+      default:\n+        throw new SAXException(\"Unknown tag \" + localName);\n+    }\n+  }\n+\n+  @Override\n+  public void endElement(String namespaceUri, String localName, String qualifiedName)\n+      throws SAXException {\n+    SymbolProblemMatcher poppedMatcher;\n+    if (!namespaceUri.isEmpty()) {\n+      throw new SAXException(\n+          \"unrecognized element: \" + qualifiedName + \" in namespace \" + namespaceUri);\n+    }\n+    switch (localName) {\n+      case \"Source\":\n+      case \"Target\":\n+        poppedMatcher = stack.pop();\n+        if (!(poppedMatcher instanceof TargetMatcher)\n+            && !(poppedMatcher instanceof SourceMatcher)) {\n+          throw new SAXException(\"Unexpected matcher in stack\");\n+        }\n+        break;\n+      case \"LinkageError\":\n+        poppedMatcher = stack.pop();\n+        if (!(poppedMatcher instanceof LinkageErrorMatcher)) {\n+          throw new SAXException(\"Unexpected stack status after reading LinkageError element\");\n+        }\n+        matchers.add((LinkageErrorMatcher) poppedMatcher);\n+    }\n+  }\n+\n+  @Override\n+  public void endDocument() throws SAXException {\n+    if (stack.size() != 0) {", "originalCommit": "63f571cfc890d7b0096bbb91833f025e7dd4786f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc1MTkyMA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389751920", "bodyText": "Good catch. But endDocument is no longer needed.", "author": "suztomo", "createdAt": "2020-03-09T15:06:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0Mzk2MQ=="}], "type": "inlineReview"}, {"oid": "00328fff29ecbef293c930998b14077f9cba0a0c", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/00328fff29ecbef293c930998b14077f9cba0a0c", "message": "Removed stack", "committedDate": "2020-03-09T15:24:12Z", "type": "commit"}, {"oid": "9cde15fd667bc1837a022829c27bca502f4d541c", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/9cde15fd667bc1837a022829c27bca502f4d541c", "message": "Removed stack", "committedDate": "2020-03-09T15:33:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc5MDE5Mg==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389790192", "bodyText": "all of --> all\nCan there be null matchers?", "author": "elharo", "createdAt": "2020-03-09T16:02:40Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageErrorMatcher.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.opensource.classpath;\n+\n+/** Matcher for linkage errors. A linkage error has a target symbol and a source class file. */\n+class LinkageErrorMatcher implements SymbolProblemMatcher {\n+\n+  /** Matcher for the source class of the linkage error */\n+  private SourceMatcher sourceMatcher;\n+\n+  /** Matcher for the target symbol of the linkage error */\n+  private TargetMatcher targetMatcher;\n+\n+  void setSourceMatcher(SourceMatcher sourceMatcher) {\n+    this.sourceMatcher = sourceMatcher;\n+  }\n+\n+  void setTargetMatcher(TargetMatcher targetMatcher) {\n+    this.targetMatcher = targetMatcher;\n+  }\n+\n+  /**\n+   * Returns true if all of non-null matchers of {@link #sourceMatcher} and {@link #targetMatcher}", "originalCommit": "9cde15fd667bc1837a022829c27bca502f4d541c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzMzUzOA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389833538", "bodyText": "No NullMatcher but sourceMatcher or targetMatcher field can be null.", "author": "suztomo", "createdAt": "2020-03-09T17:10:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc5MDE5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgzMzgyNg==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389833826", "bodyText": "Removed \"of\" in \"all of\"", "author": "suztomo", "createdAt": "2020-03-09T17:10:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc5MDE5Mg=="}], "type": "inlineReview"}, {"oid": "ec964d6962500db1be1c5df3c49b4c9286802d91", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/ec964d6962500db1be1c5df3c49b4c9286802d91", "message": "all non-null matchers", "committedDate": "2020-03-09T17:09:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwNTAwNg==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389905006", "bodyText": "There can be multiple source matchers and multiple target matchers? Or at most one of each?", "author": "elharo", "createdAt": "2020-03-09T19:14:21Z", "path": "dependencies/src/main/java/com/google/cloud/tools/opensource/classpath/LinkageErrorMatcher.java", "diffHunk": "@@ -16,26 +16,31 @@\n \n package com.google.cloud.tools.opensource.classpath;\n \n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n+import javax.annotation.Nullable;\n+\n /** Matcher for linkage errors. A linkage error has a target symbol and a source class file. */\n class LinkageErrorMatcher implements SymbolProblemMatcher {\n \n-  /** Matcher for the source class of the linkage error */\n+  /** Matcher for the source class of the linkage error. Null if no Source element. */\n+  @Nullable\n   private SourceMatcher sourceMatcher;\n \n-  /** Matcher for the target symbol of the linkage error */\n+  /** Matcher for the target symbol of the linkage error. Null if no Target element. */\n+  @Nullable\n   private TargetMatcher targetMatcher;\n \n   void setSourceMatcher(SourceMatcher sourceMatcher) {\n-    this.sourceMatcher = sourceMatcher;\n+    this.sourceMatcher = checkNotNull(sourceMatcher);\n   }\n \n   void setTargetMatcher(TargetMatcher targetMatcher) {\n-    this.targetMatcher = targetMatcher;\n+    this.targetMatcher = checkNotNull(targetMatcher);\n   }\n \n   /**\n-   * Returns true if all of non-null matchers of {@link #sourceMatcher} and {@link #targetMatcher}\n-   * match.\n+   * Returns true if all non-null {@link #sourceMatcher} and {@link #targetMatcher} match.", "originalCommit": "ec964d6962500db1be1c5df3c49b4c9286802d91", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxNjk4Ng==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389916986", "bodyText": "At most one of each.", "author": "suztomo", "createdAt": "2020-03-09T19:38:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwNTAwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxOTI0NQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389919245", "bodyText": "That's not quite clear from the test. Perhaps something like \"\n\nReturns true if sourceMatcher matches \"if present and the target matcher matches if present.\"", "author": "elharo", "createdAt": "2020-03-09T19:42:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwNTAwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkzODY5MQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1269#discussion_r389938691", "bodyText": "Updated. The validation for XML structure is to be done in #1277", "author": "suztomo", "createdAt": "2020-03-09T20:20:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkwNTAwNg=="}], "type": "inlineReview"}, {"oid": "0e183037cea822f0c86f9a2caf1b31aba3d16e76", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/0e183037cea822f0c86f9a2caf1b31aba3d16e76", "message": "javadoc for LinkageErrorMatcher.match", "committedDate": "2020-03-09T20:19:51Z", "type": "commit"}]}