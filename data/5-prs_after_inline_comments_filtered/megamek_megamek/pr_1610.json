{"pr_number": 1610, "pr_title": "VSTOL Equipment Now Saves Properly and is shown on Unit Summary and TRO", "pr_createdAt": "2020-01-21T20:42:47Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1610", "timeline": [{"oid": "d34c6d5a332ae5deeff80d515e5db6eb09bcd536", "url": "https://github.com/MegaMek/megamek/commit/d34c6d5a332ae5deeff80d515e5db6eb09bcd536", "message": "Adding .idea to .gitignore for Idea IDE users", "committedDate": "2020-01-21T16:24:38Z", "type": "commit"}, {"oid": "973bba738e53279cbc28dd58900f2fafa2175652", "url": "https://github.com/MegaMek/megamek/commit/973bba738e53279cbc28dd58900f2fafa2175652", "message": "Initial refactoring in BLKFile.java", "committedDate": "2020-01-21T16:25:01Z", "type": "commit"}, {"oid": "89891e29fde518f48d013f8a45c445f3c6e38455", "url": "https://github.com/MegaMek/megamek/commit/89891e29fde518f48d013f8a45c445f3c6e38455", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_VSTOL", "committedDate": "2020-01-21T16:26:55Z", "type": "commit"}, {"oid": "495b583679fa3e2816e933c46e1f37c7d5eeb7d1", "url": "https://github.com/MegaMek/megamek/commit/495b583679fa3e2816e933c46e1f37c7d5eeb7d1", "message": "Finished refactoring in BLKFile", "committedDate": "2020-01-21T16:41:38Z", "type": "commit"}, {"oid": "326208abc7909578b6809eebb0cc900a3c66f958", "url": "https://github.com/MegaMek/megamek/commit/326208abc7909578b6809eebb0cc900a3c66f958", "message": "Refactoring, and initial changes for implementing VSTOL note on aerospace TRO and unit summary", "committedDate": "2020-01-21T18:02:20Z", "type": "commit"}, {"oid": "ba8a49072cd3899c3b5df9ec29c16059a91acfda", "url": "https://github.com/MegaMek/megamek/commit/ba8a49072cd3899c3b5df9ec29c16059a91acfda", "message": "Further refactoring while figuring out how to add VSTOL notes to TRO and Unit Summary", "committedDate": "2020-01-21T18:36:15Z", "type": "commit"}, {"oid": "a3baeedd3eb0c1e27c2b4e866cd1d7d27404657a", "url": "https://github.com/MegaMek/megamek/commit/a3baeedd3eb0c1e27c2b4e866cd1d7d27404657a", "message": "Reverting change to testing mechfile", "committedDate": "2020-01-21T18:40:22Z", "type": "commit"}, {"oid": "fdc8c747a15da2954913c78e6c9524dfd5a77c18", "url": "https://github.com/MegaMek/megamek/commit/fdc8c747a15da2954913c78e6c9524dfd5a77c18", "message": "Adding VSTOL to MechSummary for Conventional fighters with VSTOL", "committedDate": "2020-01-21T19:00:18Z", "type": "commit"}, {"oid": "9593b58835b155eef9be06a95e61301e64d812ca", "url": "https://github.com/MegaMek/megamek/commit/9593b58835b155eef9be06a95e61301e64d812ca", "message": "Reverting erraneous fix", "committedDate": "2020-01-21T19:52:03Z", "type": "commit"}, {"oid": "c9ca1a76f5eb62a02789b9fb760a61fc79864700", "url": "https://github.com/MegaMek/megamek/commit/c9ca1a76f5eb62a02789b9fb760a61fc79864700", "message": "Adding space to method calls", "committedDate": "2020-01-21T19:54:13Z", "type": "commit"}, {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002", "url": "https://github.com/MegaMek/megamek/commit/9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002", "message": "Added VSTOL Equipment to TRO views", "committedDate": "2020-01-21T20:30:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1OTYyOA==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369259628", "bodyText": "Why are you changing the order? The habit of putting the constant first is deliberate.", "author": "neoancient", "createdAt": "2020-01-21T21:45:24Z", "path": "megamek/src/megamek/client/ui/swing/MechViewPanel.java", "diffHunk": "@@ -137,7 +137,7 @@ public void setMech(Entity entity, TROView troView){\n         txtMek.setCaretPosition(0);\n         Image image = FluffImageHelper.getFluffImage(entity);\n         icon = null;\n-        if(null != image) {\n+        if(image != null) {", "originalCommit": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI2NTAwMA==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369265000", "bodyText": "Readability of code. Having the constant first protects against bad coding habits and typos, but significantly increases the difficulty of reading the code.\nThis way is the preferred styling for Java, as shown in most standard coding guides.", "author": "Windchild292", "createdAt": "2020-01-21T21:57:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1OTYyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTMyMTA3NQ==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369321075", "bodyText": "We generally avoid stylistic changes outside the immediate area being changed, if only to decrease the cognitive burden reviewing changes.\nThat said, as a long time C/C++ programmer, I probably introduced a lot of those.", "author": "sixlettervariables", "createdAt": "2020-01-22T00:48:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1OTYyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTMzMjQyMg==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369332422", "bodyText": "It only affects the readability of the code if you haven't gotten used to it yet. Having the constant second is more typical, but it is not best practice.", "author": "neoancient", "createdAt": "2020-01-22T01:36:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1OTYyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM0NTMzNw==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r370345337", "bodyText": "Modern best practice is to make it readable, and code review to catch any issues with assignment versus a comparison.\nAlso, constant first is normally only used for ==, not != comparisons, as issues are more likely to occur there.", "author": "Windchild292", "createdAt": "2020-01-23T20:46:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1OTYyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4MjUwMg==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369782502", "bodyText": "As indicated by the comment above, if an exception is thrown while loading the unit, mechView will still not be initialized. The exception is already caught and logged, but removing this null check will cause another exception to be thrown which may cause the ui to stop responding.", "author": "neoancient", "createdAt": "2020-01-22T20:20:28Z", "path": "megamek/src/megamek/client/ui/swing/UnitSelectorDialog.java", "diffHunk": "@@ -706,17 +703,16 @@ void refreshUnitView() {\n             // error unit didn't load right. this is bad news.\n             populateTextFields = false;\n         }\n-        if (populateTextFields && (mechView != null)) {\n+        if (populateTextFields) {", "originalCommit": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgzMjY3Mw==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369832673", "bodyText": "If you look under that comment, it sets populateTextFields to false. That will also trigger this IF statement as false, so the mechview != null check is not required.", "author": "Windchild292", "createdAt": "2020-01-22T22:12:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4MjUwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDE5OTY4NQ==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r370199685", "bodyText": "Sure enough", "author": "neoancient", "createdAt": "2020-01-23T15:49:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4MjUwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NDE1NQ==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369784155", "bodyText": "This duplicates code already present in TestAero. Where possible, calculations related to construction rules, when not required to load the unit or required during gameplay, should be placed the megamek.common.verifier package rather than the Entity. This will also report an incorrect value for FixedWingSupport, which adds VSTOL capability through a chassis modification.", "author": "neoancient", "createdAt": "2020-01-22T20:24:02Z", "path": "megamek/src/megamek/common/Aero.java", "diffHunk": "@@ -3375,6 +3373,14 @@ public void setVSTOL(boolean b) {\n         vstol = b;\n     }\n \n+    public double getVSTOLGearTonnage(){", "originalCommit": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI1MDQ2NA==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r370250464", "bodyText": "Good to know, and fixed.", "author": "Windchild292", "createdAt": "2020-01-23T17:19:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NDE1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NTM4Mw==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369785383", "bodyText": "Strings that are displayed to the user should go in the i18n resource file.", "author": "neoancient", "createdAt": "2020-01-22T20:27:05Z", "path": "megamek/src/megamek/common/MechView.java", "diffHunk": "@@ -296,7 +295,14 @@ public MechView(Entity entity, boolean showDetail, boolean useAlternateCost, boo\n                         .append(warningEnd());\n                 }\n             }\n-            sBasic.add(new LabeledElement(Messages.getString(\"MechView.Movement\"), moveString.toString())); //$NON-NLS-1$\n+\n+            // TODO : Add STOL message as part of the movement line\n+            if (isConvFighter && ((Aero) entity).isVSTOL()) {\n+                sBasic.add(new LabeledElement(Messages.getString(\"MechView.Movement\"),\n+                        moveString.toString().concat(\" (VSTOL)\"))); //$NON-NLS-1$", "originalCommit": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgzODM1MA==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369838350", "bodyText": "How do you handle untranslated string for German or Russian? Should I do VSTOL_de, de_VSTOL, leave it out?", "author": "Windchild292", "createdAt": "2020-01-22T22:24:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NTM4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIwMDQ5Mw==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r370200493", "bodyText": "Don't worry about the translations. Just put it in the default locale so if or when someone volunteers to update the translations it will be there for them.", "author": "neoancient", "createdAt": "2020-01-23T15:51:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NTM4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NjE2OA==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369786168", "bodyText": "This is better, but I would suggest String#isEmpty", "author": "neoancient", "createdAt": "2020-01-22T20:28:57Z", "path": "megamek/src/megamek/common/MechView.java", "diffHunk": "@@ -453,19 +459,19 @@ public MechView(Entity entity, boolean showDetail, boolean useAlternateCost, boo\n             sFluff.add(list);\n         }\n         \n-        if (entity.getFluff().getOverview() != \"\") {\n+        if (!entity.getFluff().getOverview().equals(\"\")) {\n             sFluff.add(new LabeledElement(\"Overview\", entity.getFluff().getOverview()));\n         }\n         \n-        if (entity.getFluff().getCapabilities() != \"\") {\n+        if (!entity.getFluff().getCapabilities().equals(\"\")) {\n             sFluff.add(new LabeledElement(\"Capabilities\", entity.getFluff().getCapabilities()));\n         }\n         \n-        if (entity.getFluff().getDeployment() != \"\") {\n+        if (!entity.getFluff().getDeployment().equals(\"\")) {\n             sFluff.add(new LabeledElement(\"Deployment\", entity.getFluff().getDeployment()));\n         }\n         \n-        if (entity.getFluff().getHistory() != \"\") {\n+        if (!entity.getFluff().getHistory().equals(\"\")) {", "originalCommit": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgzOTY3Mw==", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369839673", "bodyText": "I agree, changed them all to isEmpty calls instead.", "author": "Windchild292", "createdAt": "2020-01-22T22:27:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NjE2OA=="}], "type": "inlineReview"}, {"oid": "ba761bdd23d6d65ca57828fbeaf4e69543da3c16", "url": "https://github.com/MegaMek/megamek/commit/ba761bdd23d6d65ca57828fbeaf4e69543da3c16", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_VSTOL", "committedDate": "2020-01-22T22:05:56Z", "type": "commit"}, {"oid": "93dec699c3ebb1138b2a6f8111b09f7342a5666e", "url": "https://github.com/MegaMek/megamek/commit/93dec699c3ebb1138b2a6f8111b09f7342a5666e", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_VSTOL", "committedDate": "2020-01-23T17:12:07Z", "type": "commit"}, {"oid": "f895c343842ca323f746f7fc4e95262c730cbe0e", "url": "https://github.com/MegaMek/megamek/commit/f895c343842ca323f746f7fc4e95262c730cbe0e", "message": "VSTOL Fixing Issues Found During Review", "committedDate": "2020-01-23T17:20:32Z", "type": "commit"}]}