{"pr_number": 2458, "pr_title": "Combo box to select player names when loading saved game", "pr_createdAt": "2020-12-01T02:37:58Z", "pr_url": "https://github.com/MegaMek/megamek/pull/2458", "timeline": [{"oid": "c41b2270f0881cc0389f86215b7aa923a594382b", "url": "https://github.com/MegaMek/megamek/commit/c41b2270f0881cc0389f86215b7aa923a594382b", "message": "Conditionally use combo box for host dialog\n\nwhen loading a saved game.  The combo box is populated by names of the\nplayers present in the saved game.", "committedDate": "2020-12-01T01:26:05Z", "type": "commit"}, {"oid": "be020103fdae4639e9f13b9da45859ab82bc633b", "url": "https://github.com/MegaMek/megamek/commit/be020103fdae4639e9f13b9da45859ab82bc633b", "message": "Fix Enter behavior for JComboBox\n\nWith a JTextField, users can type into the field and hit enter and that\nwill update the dialog.  For a JComboBox, an event is fired anytime\ntyping is finished or enter is pressed.  I can't distinguish between\nthose two events without something like is added in this commit.", "committedDate": "2020-12-01T02:28:11Z", "type": "commit"}, {"oid": "f2f5c7672084b4ed47aa3dcb3ad7e99c6333d425", "url": "https://github.com/MegaMek/megamek/commit/f2f5c7672084b4ed47aa3dcb3ad7e99c6333d425", "message": "Remove exceptions for JComboBox events\n\nAfter the last commit, we don't have to add the JComboBox to the action\nlistener, so its events never fire and don't need to be ignored.", "committedDate": "2020-12-01T02:29:11Z", "type": "commit"}, {"oid": "d0796abd6371863f5963b720c82b4600cabce296", "url": "https://github.com/MegaMek/megamek/commit/d0796abd6371863f5963b720c82b4600cabce296", "message": "Match player name JCombo to width of JTextField", "committedDate": "2020-12-01T02:45:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzExNDcxNw==", "url": "https://github.com/MegaMek/megamek/pull/2458#discussion_r533114717", "bodyText": "Currently when a game doesn't load, it continues to the host dialog (and notices later, that it cant load). Maybe add\nJOptionPane.showMessageDialog(frame, Messages.getString(\"MegaMek.LoadGameAlert.message\"),\nMessages.getString(\"MegaMek.LoadGameAlert.title\"), JOptionPane.ERROR_MESSAGE);\nreturn;\nto the catch block?", "author": "SJuliez", "createdAt": "2020-12-01T07:10:24Z", "path": "megamek/src/megamek/client/ui/swing/MegaMekGUI.java", "diffHunk": "@@ -536,7 +543,24 @@ public String getDescription() {\n             // I want a file, y'know!\n             return;\n         }\n-        HostDialog hd = new HostDialog(frame);\n+\n+        IGame newGame = null;\n+        try (InputStream is = new FileInputStream(fc.getSelectedFile()); InputStream gzi = new GZIPInputStream(is)) {\n+            XStream xstream = SerializationHelper.getXStream();\n+            newGame = (IGame) xstream.fromXML(gzi);\n+        } catch (Exception e) {\n+            MegaMek.getLogger().error(\"Unable to load file: \" + fc.getSelectedFile(), e);\n+        }", "originalCommit": "d0796abd6371863f5963b720c82b4600cabce296", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUwMjkyMA==", "url": "https://github.com/MegaMek/megamek/pull/2458#discussion_r533502920", "bodyText": "Yeah, that's a fair point.  This briefly crossed my mind.  I chose to not deal with it because I figured the old path would be fine (and it was easier to do nothing about it).  But it does make sense to handle things earlier, before the players enter additional information.  I had assumed that this loading isn't likely to fail, but I guess it is if you load saved games across versions.", "author": "arlith", "createdAt": "2020-12-01T15:30:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzExNDcxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUwNDk0NA==", "url": "https://github.com/MegaMek/megamek/pull/2458#discussion_r533504944", "bodyText": "I don't think we have any expectation of support for megamek games being loaded across versions. That being said, some error handling won't go amiss.", "author": "NickAragua", "createdAt": "2020-12-01T15:32:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzExNDcxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzgxOTU2OA==", "url": "https://github.com/MegaMek/megamek/pull/2458#discussion_r533819568", "bodyText": "That's exactly what I meant: we don't have any expectation of supporting games across versions and those are the most likely case of loading errors.", "author": "arlith", "createdAt": "2020-12-02T00:46:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzExNDcxNw=="}], "type": "inlineReview"}, {"oid": "e11b664c2c24e1b8ce245cae5fed0982b8569768", "url": "https://github.com/MegaMek/megamek/commit/e11b664c2c24e1b8ce245cae5fed0982b8569768", "message": "Display error dialog on first saved game load", "committedDate": "2020-12-01T22:52:35Z", "type": "commit"}, {"oid": "8b0cbc0402867953a895d8b268a0e92588e22396", "url": "https://github.com/MegaMek/megamek/commit/8b0cbc0402867953a895d8b268a0e92588e22396", "message": "Merge branch 'master' into savedGamePlayerComboBox", "committedDate": "2020-12-04T17:39:36Z", "type": "commit"}, {"oid": "d60c18b8de15863e94968757dcd5ec0e8a1e8902", "url": "https://github.com/MegaMek/megamek/commit/d60c18b8de15863e94968757dcd5ec0e8a1e8902", "message": "Implementing HostDialog changes for MekHQ", "committedDate": "2020-12-04T18:03:11Z", "type": "commit"}]}