{"pr_number": 1799, "pr_title": "Fix unit file equipment entry modifier order", "pr_createdAt": "2020-03-28T20:41:19Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1799", "timeline": [{"oid": "701d7ef5908b347e142a37bd4ac912b32e71a853", "url": "https://github.com/MegaMek/megamek/commit/701d7ef5908b347e142a37bd4ac912b32e71a853", "message": "Write crit entry modifiers to mtf in reverse order that they are read.", "committedDate": "2020-03-28T20:32:22Z", "type": "commit"}, {"oid": "7c354473eef5ff08921f32217c8e874b1ca71f37", "url": "https://github.com/MegaMek/megamek/commit/7c354473eef5ff08921f32217c8e874b1ca71f37", "message": "Check for pod-mounted before sponson/pintle turret.", "committedDate": "2020-03-28T20:33:10Z", "type": "commit"}, {"oid": "810672a25f06b6fe74372ec1e77262f675c03244", "url": "https://github.com/MegaMek/megamek/commit/810672a25f06b6fe74372ec1e77262f675c03244", "message": "Switch (T) and (R) in mtf back to original order.", "committedDate": "2020-03-28T20:36:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNzI3Ng==", "url": "https://github.com/MegaMek/megamek/pull/1799#discussion_r399707276", "bodyText": "Why aren't these else if statements?", "author": "Windchild292", "createdAt": "2020-03-28T20:42:35Z", "path": "megamek/src/megamek/common/loaders/BLKFile.java", "diffHunk": "@@ -81,18 +81,21 @@ protected void loadEquipment(Entity t, String sName, int nLoc)\n         if (saEquip[0] != null) {\n             for (String s : saEquip) {\n                 String equipName = s.trim();\n+                boolean isOmniMounted = false;\n                 boolean isTurreted = false;\n                 boolean isPintleTurreted = false;\n-                if (equipName.toUpperCase().endsWith(\"(ST)\")) {\n-                    isTurreted = true;\n-                    equipName = equipName.substring(0, equipName.length() - 4).trim();\n+                if (equipName.toUpperCase().endsWith(\":OMNI\")) {\n+                    isOmniMounted = true;\n+                    equipName = equipName.substring(0, equipName.length() - 5).trim();\n                 }\n                 if (equipName.toUpperCase().endsWith(\"(PT)\")) {\n                     isPintleTurreted = true;\n                     equipName = equipName.substring(0, equipName.length() - 4).trim();\n                 }\n-                boolean isOmniMounted = equipName.toUpperCase().endsWith(\":OMNI\");\n-                equipName = equipName.replace(\":OMNI\", \"\");\n+                if (equipName.toUpperCase().endsWith(\"(ST)\")) {\n+                    isTurreted = true;\n+                    equipName = equipName.substring(0, equipName.length() - 4).trim();\n+                }", "originalCommit": "810672a25f06b6fe74372ec1e77262f675c03244", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwOTA1Nw==", "url": "https://github.com/MegaMek/megamek/pull/1799#discussion_r399709057", "bodyText": "Because the whole point of this is that more than one can apply.", "author": "neoancient", "createdAt": "2020-03-28T21:01:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNzI3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwOTQzNA==", "url": "https://github.com/MegaMek/megamek/pull/1799#discussion_r399709434", "bodyText": "Wouldn't the endsWith prevent that?", "author": "Windchild292", "createdAt": "2020-03-28T21:04:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNzI3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcxMDUwNQ==", "url": "https://github.com/MegaMek/megamek/pull/1799#discussion_r399710505", "bodyText": "No, because the string is modified before the next check.", "author": "neoancient", "createdAt": "2020-03-28T21:16:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNzI3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNzMzOA==", "url": "https://github.com/MegaMek/megamek/pull/1799#discussion_r399707338", "bodyText": "Is this ever used or just assigned?", "author": "Windchild292", "createdAt": "2020-03-28T20:43:21Z", "path": "megamek/src/megamek/common/loaders/BLKFile.java", "diffHunk": "@@ -81,18 +81,21 @@ protected void loadEquipment(Entity t, String sName, int nLoc)\n         if (saEquip[0] != null) {\n             for (String s : saEquip) {\n                 String equipName = s.trim();\n+                boolean isOmniMounted = false;", "originalCommit": "810672a25f06b6fe74372ec1e77262f675c03244", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwOTUzNg==", "url": "https://github.com/MegaMek/megamek/pull/1799#discussion_r399709536", "bodyText": "Did you actually look at the rest of the code?", "author": "neoancient", "createdAt": "2020-03-28T21:06:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNzMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwOTY5NA==", "url": "https://github.com/MegaMek/megamek/pull/1799#discussion_r399709694", "bodyText": "I did, and saw it assigned and not used.\nI did miss that it was a previously existing variable, hence the question.", "author": "Windchild292", "createdAt": "2020-03-28T21:07:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNzMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcxMDU4Nw==", "url": "https://github.com/MegaMek/megamek/pull/1799#discussion_r399710587", "bodyText": "It's used in a part of the code that wasn't modified for this PR. Hence my question about actually looking at the rest of the code.", "author": "neoancient", "createdAt": "2020-03-28T21:17:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNzMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcxMDY5Mw==", "url": "https://github.com/MegaMek/megamek/pull/1799#discussion_r399710693", "bodyText": "I scan read, so I can miss stuff because of it.\nHowever, I always take a look at the rest of the code when reviewing, to try to avoid dumb mistakes like this. My apologies on this one", "author": "Windchild292", "createdAt": "2020-03-28T21:18:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNzMzOA=="}], "type": "inlineReview"}]}