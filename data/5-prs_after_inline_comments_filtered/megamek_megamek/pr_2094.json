{"pr_number": 2094, "pr_title": "PPC Capacitors also add 5 heat in the first charge turn", "pr_createdAt": "2020-07-29T14:11:41Z", "pr_url": "https://github.com/MegaMek/megamek/pull/2094", "timeline": [{"oid": "b31749923b744f533438a516f0648e0c6ebe143f", "url": "https://github.com/MegaMek/megamek/commit/b31749923b744f533438a516f0648e0c6ebe143f", "message": "Fix for #2065 PPC Capacitors also add 5 heat in the first charge turn", "committedDate": "2020-07-29T14:08:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzMDgwNA==", "url": "https://github.com/MegaMek/megamek/pull/2094#discussion_r462330804", "bodyText": "Can we take these magic numbers and make them into constants?", "author": "NickAragua", "createdAt": "2020-07-29T14:13:00Z", "path": "megamek/src/megamek/common/Mounted.java", "diffHunk": "@@ -979,35 +978,60 @@ public void setHotLoad(boolean hotload) {\n         }\n \n     }\n+    \n+    /** Returns true when m is a PPC Capacitor and not destroyed. */\n+    private boolean isWorkingCapacitor(Mounted m) {\n+        return !m.isDestroyed()\n+        && m.getType() instanceof MiscType\n+        && ((MiscType) m.getType()).hasFlag(MiscType.F_PPC_CAPACITOR);\n+    }\n \n-    /**\n-     * does this <code>Mounted</code> have a linked and charged PPC Capacitor?\n+    /** \n+     * Returns 1 or 2 if this Mounted has a linked\n+     * and charged (= set to charge in an earlier turn) \n+     * PPC Capacitor.\n      */\n-\n     public int hasChargedCapacitor() {\n+        if (getCrossLinkedBy() != null\n+                && isWorkingCapacitor(getCrossLinkedBy())\n+                && getCrossLinkedBy().curMode().equals(\"Charge\")) {\n+            return 2;", "originalCommit": "b31749923b744f533438a516f0648e0c6ebe143f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzMTAwMw==", "url": "https://github.com/MegaMek/megamek/pull/2094#discussion_r462331003", "bodyText": "Or, even better, an enum?", "author": "NickAragua", "createdAt": "2020-07-29T14:13:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzMDgwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM2NTU1OQ==", "url": "https://github.com/MegaMek/megamek/pull/2094#discussion_r462365559", "bodyText": "That is a problem of the original code. I only wanted to correct the error.", "author": "SJuliez", "createdAt": "2020-07-29T14:57:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzMDgwNA=="}], "type": "inlineReview"}]}