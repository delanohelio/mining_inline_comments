{"pr_number": 2353, "pr_title": "AbstractIcon: Standardizing GUI and Initial Implementations", "pr_createdAt": "2020-10-22T19:58:36Z", "pr_url": "https://github.com/MegaMek/megamek/pull/2353", "timeline": [{"oid": "4388d144fc09a9cf1f71705f69854217f57fd5a0", "url": "https://github.com/MegaMek/megamek/commit/4388d144fc09a9cf1f71705f69854217f57fd5a0", "message": "Implementing visual code swapover", "committedDate": "2020-10-18T17:36:32Z", "type": "commit"}, {"oid": "e76a8efd6a4e6c944231c4e1a41d3f399f1d1e72", "url": "https://github.com/MegaMek/megamek/commit/e76a8efd6a4e6c944231c4e1a41d3f399f1d1e72", "message": "Implementing base swapovers", "committedDate": "2020-10-18T17:53:39Z", "type": "commit"}, {"oid": "d960641cc6ea7c8e5ebf156d50dd765efa4a4220", "url": "https://github.com/MegaMek/megamek/commit/d960641cc6ea7c8e5ebf156d50dd765efa4a4220", "message": "Swapping to using AbstractIcon image and image icon getters.", "committedDate": "2020-10-18T19:27:39Z", "type": "commit"}, {"oid": "1b3f92ad443479126fb35fd4e36d5c1cec4d96c7", "url": "https://github.com/MegaMek/megamek/commit/1b3f92ad443479126fb35fd4e36d5c1cec4d96c7", "message": "Fixing Camouflage category for colour camos", "committedDate": "2020-10-18T19:47:27Z", "type": "commit"}, {"oid": "de3faabbfc21953da1eea3697b2e3e1c85517e5e", "url": "https://github.com/MegaMek/megamek/commit/de3faabbfc21953da1eea3697b2e3e1c85517e5e", "message": "Reworking portrait chooser to select based on a provided Portrait icon", "committedDate": "2020-10-18T20:02:44Z", "type": "commit"}, {"oid": "4f1d292a10a7de4d58a0c7c1770ab163d1d3c0b7", "url": "https://github.com/MegaMek/megamek/commit/4f1d292a10a7de4d58a0c7c1770ab163d1d3c0b7", "message": "Minor personal review changes", "committedDate": "2020-10-18T20:11:59Z", "type": "commit"}, {"oid": "f472167fd21df549061b04ed8654b07be47f2429", "url": "https://github.com/MegaMek/megamek/commit/f472167fd21df549061b04ed8654b07be47f2429", "message": "Bugfixing", "committedDate": "2020-10-18T20:49:18Z", "type": "commit"}, {"oid": "b75edde8f562747af4fa805b4efe44432987a082", "url": "https://github.com/MegaMek/megamek/commit/b75edde8f562747af4fa805b4efe44432987a082", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_DirectoryItem", "committedDate": "2020-10-22T15:53:38Z", "type": "commit"}, {"oid": "5461f8cd1fe79162c2666138f44606bac94e793d", "url": "https://github.com/MegaMek/megamek/commit/5461f8cd1fe79162c2666138f44606bac94e793d", "message": "Reordering and further icon chooser abstraction", "committedDate": "2020-10-22T16:14:33Z", "type": "commit"}, {"oid": "c8facdd9ef2edcf108018183e98bf04174b6c17e", "url": "https://github.com/MegaMek/megamek/commit/c8facdd9ef2edcf108018183e98bf04174b6c17e", "message": "Removing unused imports", "committedDate": "2020-10-22T16:15:33Z", "type": "commit"}, {"oid": "869dce6a716a54ffb3dab1d4f49a7ae5529aed60", "url": "https://github.com/MegaMek/megamek/commit/869dce6a716a54ffb3dab1d4f49a7ae5529aed60", "message": "Adding portrait search", "committedDate": "2020-10-22T16:21:52Z", "type": "commit"}, {"oid": "da434db6a2f1f22b0076efe09b6d5b3bd320732c", "url": "https://github.com/MegaMek/megamek/commit/da434db6a2f1f22b0076efe09b6d5b3bd320732c", "message": "Cleaning up search code", "committedDate": "2020-10-22T16:39:08Z", "type": "commit"}, {"oid": "910af76629e1d642df7990bea0e2b95447f30d32", "url": "https://github.com/MegaMek/megamek/commit/910af76629e1d642df7990bea0e2b95447f30d32", "message": "Merge branch 'dev_Windchild_IconConstants' into dev_Windchild_DirectoryItem", "committedDate": "2020-10-22T17:11:25Z", "type": "commit"}, {"oid": "fb0b54ed2aef8366bb9735577ecce74efe95b2a6", "url": "https://github.com/MegaMek/megamek/commit/fb0b54ed2aef8366bb9735577ecce74efe95b2a6", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_DirectoryItem", "committedDate": "2020-10-22T19:18:10Z", "type": "commit"}, {"oid": "ca59a63d362a57b90c338435fb83ac038455c007", "url": "https://github.com/MegaMek/megamek/commit/ca59a63d362a57b90c338435fb83ac038455c007", "message": "Applying initial changes from personal review", "committedDate": "2020-10-22T19:43:07Z", "type": "commit"}, {"oid": "de29c89d7c0fe1a7be9eeb3596dc27b8c4438ad3", "url": "https://github.com/MegaMek/megamek/commit/de29c89d7c0fe1a7be9eeb3596dc27b8c4438ad3", "message": "Applying changes from personal review", "committedDate": "2020-10-22T19:54:30Z", "type": "commit"}, {"oid": "1971c3f58e02d62c899442df14d9c4ae82bc46fc", "url": "https://github.com/MegaMek/megamek/commit/1971c3f58e02d62c899442df14d9c4ae82bc46fc", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_DirectoryItem", "committedDate": "2020-10-23T00:32:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgxNjkyOQ==", "url": "https://github.com/MegaMek/megamek/pull/2353#discussion_r510816929", "bodyText": "Those are oddly specific values. Should they be named?", "author": "sixlettervariables", "createdAt": "2020-10-23T11:25:36Z", "path": "megamek/src/megamek/client/ui/swing/ChatLounge.java", "diffHunk": "@@ -3483,7 +3483,7 @@ public Component getTableCellRendererComponent(JTable table, Object value, boole\n                         if (compact) {\n                             clearImage();\n                         } else {\n-                            setPortrait(entity.getCrew());\n+                            setImage(entity.getCrew().getPortrait(0).getImage(50));", "originalCommit": "1971c3f58e02d62c899442df14d9c4ae82bc46fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3MTI2NQ==", "url": "https://github.com/MegaMek/megamek/pull/2353#discussion_r510971265", "bodyText": "We don't name sizes currently, so I would say not", "author": "Windchild292", "createdAt": "2020-10-23T15:37:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgxNjkyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk4Nzc5NQ==", "url": "https://github.com/MegaMek/megamek/pull/2353#discussion_r510987795", "bodyText": "Wasn't obvious that was the square size, makes sense now.", "author": "sixlettervariables", "createdAt": "2020-10-23T16:04:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgxNjkyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgxOTg1Nw==", "url": "https://github.com/MegaMek/megamek/pull/2353#discussion_r510819857", "bodyText": "I'm sure this was inherited, but this doesn't remove a file extension.", "author": "sixlettervariables", "createdAt": "2020-10-23T11:31:39Z", "path": "megamek/src/megamek/client/ui/swing/dialog/imageChooser/AbstractIconRenderer.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright (c) 2020 - The MegaMek Team. All Rights Reserved.\n+ *\n+ * This file is part of MegaMek.\n+ *\n+ * MegaMek is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * MegaMek is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with MegaMek. If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package megamek.client.ui.swing.dialog.imageChooser;\n+\n+import megamek.common.icons.AbstractIcon;\n+\n+import javax.swing.*;\n+import javax.swing.border.EmptyBorder;\n+import java.awt.*;\n+\n+public class AbstractIconRenderer extends JPanel implements ListCellRenderer<AbstractIcon> {\n+    /** Image file extensions, .jpg .jpeg .png .gif */\n+    protected static final String[] EXTENSIONS = {\".png\", \".jpg\", \".jpeg\", \".gif\"};\n+\n+    /** This JLabel displays the selectable image */\n+    protected JLabel lblImage = new JLabel();\n+\n+    /** This JLabel displays the name of the selectable image */\n+    protected JLabel lblText = new JLabel();\n+\n+    /** The tooltip to be displayed */\n+    protected String tip = \"\";\n+\n+    public AbstractIconRenderer() {\n+        setBorder(new EmptyBorder(10, 10, 10, 10));\n+        setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));\n+        add(lblImage);\n+        add(lblText);\n+    }\n+\n+    /**\n+     * Sets the image based on the passed category and name from\n+     * the DirectoryItems that the list currently displays.\n+     */\n+    private void setImage(AbstractIcon icon) {\n+        lblImage.setIcon(icon.getImageIcon());\n+        tip = \"<HTML><BODY>\" + icon.getCategory() + \"<BR>\" + icon.getFilename();\n+    }\n+\n+    @Override\n+    public String getToolTipText() {\n+        return tip;\n+    }\n+\n+    /** Sets the label text of the image, removing the file extension. */\n+    private void setText(String text) {\n+        // Remove the file extension\n+        for (String ext: EXTENSIONS) {", "originalCommit": "1971c3f58e02d62c899442df14d9c4ae82bc46fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAwNTY1MA==", "url": "https://github.com/MegaMek/megamek/pull/2353#discussion_r511005650", "bodyText": "From testing it does, however I'd say the extension is required because it is entirely valid to have Male_1.gif and Male_1.jpg as two distinct files in our setup. I've pushed a commit to handle this.", "author": "Windchild292", "createdAt": "2020-10-23T16:36:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgxOTg1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAwOTk5MQ==", "url": "https://github.com/MegaMek/megamek/pull/2353#discussion_r511009991", "bodyText": "More I meant it just rips out any text match rather than the actual file extension.", "author": "sixlettervariables", "createdAt": "2020-10-23T16:44:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgxOTg1Nw=="}], "type": "inlineReview"}, {"oid": "8410f9e96a451c09b2336170682d7d997e37a431", "url": "https://github.com/MegaMek/megamek/commit/8410f9e96a451c09b2336170682d7d997e37a431", "message": "Adding file extension to the display", "committedDate": "2020-10-23T16:36:07Z", "type": "commit"}]}