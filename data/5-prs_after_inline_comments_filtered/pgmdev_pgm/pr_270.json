{"pr_number": 270, "pr_title": "Fix tab list for players on 1.7.10, resolves #16", "pr_createdAt": "2020-01-27T19:06:25Z", "pr_url": "https://github.com/PGMDev/PGM/pull/270", "timeline": [{"oid": "f80e9d67cc70ef18a23b8235bf304c79b9ba78e3", "url": "https://github.com/PGMDev/PGM/commit/f80e9d67cc70ef18a23b8235bf304c79b9ba78e3", "message": "Minor refactoring to be more abstract\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>", "committedDate": "2020-01-27T18:09:10Z", "type": "commit"}, {"oid": "9202ceb83305db3ef156d19faf1588d00126e9d6", "url": "https://github.com/PGMDev/PGM/commit/9202ceb83305db3ef156d19faf1588d00126e9d6", "message": "Do not send fake players or custom tab list to 1.7.10 players\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>", "committedDate": "2020-01-27T18:58:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1ODg3Ng==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371458876", "bodyText": "Create a util for protocol versions, 47 means nothing but Protocol.VERSION_1_7 (or something along those lines) is easy to read", "author": "Pablete1234", "createdAt": "2020-01-27T20:13:47Z", "path": "src/main/java/tc/oc/pgm/listeners/LongRangeTNTListener.java", "diffHunk": "@@ -271,7 +272,9 @@ private void removeTNT(Entity entity, boolean explode) {\n \n   @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n   public void onPlayerJoin(final PlayerJoinEvent event) {\n-    this.viewsByPlayer.put(event.getPlayer(), new View(event.getPlayer()));\n+    if (ViaUtils.getProtocolVersion(event.getPlayer()) >= 47) {", "originalCommit": "9202ceb83305db3ef156d19faf1588d00126e9d6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTYzMQ==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371459631", "bodyText": "This is a complete and absolute hack. Don't change the current tab view to avoid sending packets to 1.7 players, give them a new no-op view", "author": "Pablete1234", "createdAt": "2020-01-27T20:15:32Z", "path": "src/main/java/tc/oc/tablist/TabRender.java", "diffHunk": "@@ -53,6 +54,9 @@ private BaseComponent getContent(TabEntry entry, int index) {\n   }\n \n   private void appendAddition(TabEntry entry, int index) {\n+    if (ViaUtils.getProtocolVersion(this.view.getViewer()) < 47) {", "originalCommit": "9202ceb83305db3ef156d19faf1588d00126e9d6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTczNg==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371459736", "bodyText": "See previous comment", "author": "Pablete1234", "createdAt": "2020-01-27T20:15:45Z", "path": "src/main/java/tc/oc/tablist/TabRender.java", "diffHunk": "@@ -154,6 +158,9 @@ public void setHeaderFooter(TabEntry header, TabEntry footer) {\n   }\n \n   public void updateFakeEntity(TabEntry entry, boolean create) {\n+    if (ViaUtils.getProtocolVersion(this.view.getViewer()) < 47) {", "originalCommit": "9202ceb83305db3ef156d19faf1588d00126e9d6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ2MDA2MA==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371460060", "bodyText": "I don't get why this was changed (and the subsequent changes) if you aren't even changing the MatchTabManager for 1.7/1.8+ players.", "author": "Pablete1234", "createdAt": "2020-01-27T20:16:31Z", "path": "src/main/java/tc/oc/pgm/PGMImpl.java", "diffHunk": "@@ -143,12 +160,13 @@\n import tc.oc.pgm.tracker.TrackerMatchModule;\n import tc.oc.pgm.wool.WoolModule;\n import tc.oc.pgm.worldborder.WorldBorderModule;\n+import tc.oc.tablist.TabManager;\n import tc.oc.util.SemanticVersion;\n \n public final class PGMImpl extends JavaPlugin implements PGM {\n \n   private MatchManager matchManager;\n-  private MatchTabManager matchTabManager;\n+  private TabManager tabManager;", "originalCommit": "9202ceb83305db3ef156d19faf1588d00126e9d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4MzY5Mg==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371483692", "bodyText": "Sorry, I had meant to do something different than what I ended up doing and forgot to undo this.", "author": "Meeples10", "createdAt": "2020-01-27T21:09:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ2MDA2MA=="}], "type": "inlineReview"}, {"oid": "6dc4d0289d52fe761607bab80c688aeee0d512a0", "url": "https://github.com/PGMDev/PGM/commit/6dc4d0289d52fe761607bab80c688aeee0d512a0", "message": "Revert \"Minor refactoring to be more abstract\"\n\nThis reverts commit f80e9d67cc70ef18a23b8235bf304c79b9ba78e3.\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>", "committedDate": "2020-01-27T21:18:46Z", "type": "commit"}, {"oid": "d684dee5c1c24ebfcca282c08622564a03de4cc8", "url": "https://github.com/PGMDev/PGM/commit/d684dee5c1c24ebfcca282c08622564a03de4cc8", "message": "Add static variables for 1.7.10 and 1.8.x protocol numbers\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>", "committedDate": "2020-01-27T21:28:34Z", "type": "commit"}, {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a", "url": "https://github.com/PGMDev/PGM/commit/a5f607bb719c1ff034d36a10b548fa27cd90267a", "message": "Proper fix for the 1.7.10 tab list\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>", "committedDate": "2020-01-28T03:54:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg4NjMwNA==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371886304", "bodyText": "This check shouldn't be here, instead, this renderer shouldn't be called for 1.7 clients", "author": "Pablete1234", "createdAt": "2020-01-28T15:48:11Z", "path": "src/main/java/tc/oc/tablist/TabRender.java", "diffHunk": "@@ -53,6 +54,9 @@ private BaseComponent getContent(TabEntry entry, int index) {\n   }\n \n   private void appendAddition(TabEntry entry, int index) {\n+    if (ViaUtils.getProtocolVersion(this.view.getViewer()) < ViaUtils.VERSION_1_8) {\n+      return;\n+    }", "originalCommit": "a5f607bb719c1ff034d36a10b548fa27cd90267a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5MjMyMw==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371892323", "bodyText": "Same here", "author": "Pablete1234", "createdAt": "2020-01-28T15:57:09Z", "path": "src/main/java/tc/oc/tablist/TabRender.java", "diffHunk": "@@ -154,6 +158,9 @@ public void setHeaderFooter(TabEntry header, TabEntry footer) {\n   }\n \n   public void updateFakeEntity(TabEntry entry, boolean create) {\n+    if (ViaUtils.getProtocolVersion(this.view.getViewer()) < ViaUtils.VERSION_1_8) {\n+      return;\n+    }", "originalCommit": "a5f607bb719c1ff034d36a10b548fa27cd90267a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5OTA1MA==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371899050", "bodyText": "May i ask why this is now necessary?", "author": "Pablete1234", "createdAt": "2020-01-28T16:07:30Z", "path": "src/main/java/tc/oc/tablist/TabView.java", "diffHunk": "@@ -365,4 +367,10 @@ protected void onRespawn(PlayerRespawnEvent event) {\n   protected void onWorldChange(PlayerChangedWorldEvent event) {\n     if (this.viewer == event.getPlayer()) this.respawnFakeEntities();\n   }\n+\n+  public void onViewerJoinMatch(PlayerJoinMatchEvent event) {", "originalCommit": "a5f607bb719c1ff034d36a10b548fa27cd90267a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5OTUxNg==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371899516", "bodyText": "I do not think this is nor should be a listener", "author": "Pablete1234", "createdAt": "2020-01-28T16:08:15Z", "path": "src/main/java/tc/oc/tablist/TabView.java", "diffHunk": "@@ -16,7 +18,7 @@\n  * bottom and cannot be seen. The fake team names all start with a '\\u0001' character, so they will\n  * always come before any real teams.\n  */\n-public class TabView {\n+public class TabView implements Listener {", "originalCommit": "a5f607bb719c1ff034d36a10b548fa27cd90267a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ae2bb20f339e79ab71c0e7934d70aa33c9869d82", "url": "https://github.com/PGMDev/PGM/commit/ae2bb20f339e79ab71c0e7934d70aa33c9869d82", "message": "Revert unneeded changes\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>", "committedDate": "2020-01-28T16:49:23Z", "type": "commit"}, {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "url": "https://github.com/PGMDev/PGM/commit/652d4e6b3cd8cfa1e83e44e672a08e117886777f", "message": "Remove unneeded logic from LegacyMatchTabView\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>", "committedDate": "2020-01-28T18:49:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5MTE5MA==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371991190", "bodyText": "Add a comment explaining this is a no-op tab list intended for legacy players", "author": "Pablete1234", "createdAt": "2020-01-28T18:51:51Z", "path": "src/main/java/tc/oc/pgm/tablist/LegacyMatchTabView.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package tc.oc.pgm.tablist;\n+\n+import org.bukkit.entity.Player;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.tablist.LegacyTabView;\n+import tc.oc.util.collection.DefaultProvider;\n+", "originalCommit": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5MTgxNg==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371991816", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (view != null && !(view instanceof LegacyMatchTabView)) {\n          \n          \n            \n                if (view != null && !(view instanceof Listener)) {\n          \n      \n    \n    \n  \n\nWould be more future-proof and need a less specific cast", "author": "Pablete1234", "createdAt": "2020-01-28T18:53:04Z", "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -86,15 +87,15 @@ public void run() {\n   }\n \n   @Override\n-  public @Nullable MatchTabView getViewOrNull(Player viewer) {\n-    return (MatchTabView) super.getViewOrNull(viewer);\n+  public @Nullable TabView getViewOrNull(Player viewer) {\n+    return (TabView) super.getViewOrNull(viewer);\n   }\n \n   @Override\n-  public @Nullable MatchTabView getView(Player viewer) {\n-    MatchTabView view = (MatchTabView) super.getView(viewer);\n-    if (view != null) {\n-      this.registerEvents(view);\n+  public @Nullable TabView getView(Player viewer) {\n+    TabView view = super.getView(viewer);\n+    if (view != null && !(view instanceof LegacyMatchTabView)) {", "originalCommit": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5MTkwMQ==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371991901", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  this.registerEvents((MatchTabView) view);\n          \n          \n            \n                  this.registerEvents((Listener) view);", "author": "Pablete1234", "createdAt": "2020-01-28T18:53:13Z", "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -86,15 +87,15 @@ public void run() {\n   }\n \n   @Override\n-  public @Nullable MatchTabView getViewOrNull(Player viewer) {\n-    return (MatchTabView) super.getViewOrNull(viewer);\n+  public @Nullable TabView getViewOrNull(Player viewer) {\n+    return (TabView) super.getViewOrNull(viewer);\n   }\n \n   @Override\n-  public @Nullable MatchTabView getView(Player viewer) {\n-    MatchTabView view = (MatchTabView) super.getView(viewer);\n-    if (view != null) {\n-      this.registerEvents(view);\n+  public @Nullable TabView getView(Player viewer) {\n+    TabView view = super.getView(viewer);\n+    if (view != null && !(view instanceof LegacyMatchTabView)) {\n+      this.registerEvents((MatchTabView) view);", "originalCommit": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5MzU5OA==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371993598", "bodyText": "If it's not a LegacyMatchTabView, it must be MatchTabView? Bad assumption to make.\nConsider adding a generic ListeningTabView interface or something along those lines that both legacy and match can implement, since the onViewerJoinMatch method is actually present on both.", "author": "Pablete1234", "createdAt": "2020-01-28T18:56:39Z", "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -149,8 +150,10 @@ public void onMatchUnload(MatchUnloadEvent event) {\n   /** Delegated events */\n   @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n   public void onJoinMatch(PlayerJoinMatchEvent event) {\n-    MatchTabView view = this.getView(event.getPlayer().getBukkit());\n-    if (view != null) view.onViewerJoinMatch(event);\n+    TabView view = this.getView(event.getPlayer().getBukkit());\n+    if (view != null && !(view instanceof LegacyMatchTabView)) {\n+      ((MatchTabView) view).onViewerJoinMatch(event);\n+    }", "originalCommit": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5Mzc1MQ==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371993751", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return 0;\n          \n          \n            \n                return 3;", "author": "Pablete1234", "createdAt": "2020-01-28T18:56:56Z", "path": "src/main/java/tc/oc/tablist/LegacyTabView.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package tc.oc.tablist;\n+\n+import javax.annotation.Nullable;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.Listener;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.util.collection.DefaultProvider;\n+\n+/**\n+ * The pre-1.8 tab list is severely limited. This is essentially a no-op {@link TabView} for pre-1.8\n+ * clients.\n+ */\n+public class LegacyTabView extends TabView implements Listener {\n+\n+  public static class Factory implements DefaultProvider<Player, LegacyTabView> {\n+    @Override\n+    public LegacyTabView get(Player key) {\n+      return new LegacyTabView(key);\n+    }\n+  }\n+\n+  // The single player seeing this view\n+  private final Player viewer;\n+\n+  protected @Nullable TabManager manager;\n+\n+  public LegacyTabView(Player viewer) {\n+    super(viewer);\n+    this.viewer = viewer;\n+  }\n+\n+  private void assertEnabled() {\n+    if (manager == null)\n+      throw new IllegalStateException(getClass().getSimpleName() + \" is not enabled\");\n+  }\n+\n+  public Player getViewer() {\n+    return viewer;\n+  }\n+\n+  public int getWidth() {\n+    return 0;", "originalCommit": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5Mzk0Nw==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371993947", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return 0;\n          \n          \n            \n                return 20;\n          \n      \n    \n    \n  \n\nNot sure on this one, may be 30?", "author": "Pablete1234", "createdAt": "2020-01-28T18:57:17Z", "path": "src/main/java/tc/oc/tablist/LegacyTabView.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package tc.oc.tablist;\n+\n+import javax.annotation.Nullable;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.Listener;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.util.collection.DefaultProvider;\n+\n+/**\n+ * The pre-1.8 tab list is severely limited. This is essentially a no-op {@link TabView} for pre-1.8\n+ * clients.\n+ */\n+public class LegacyTabView extends TabView implements Listener {\n+\n+  public static class Factory implements DefaultProvider<Player, LegacyTabView> {\n+    @Override\n+    public LegacyTabView get(Player key) {\n+      return new LegacyTabView(key);\n+    }\n+  }\n+\n+  // The single player seeing this view\n+  private final Player viewer;\n+\n+  protected @Nullable TabManager manager;\n+\n+  public LegacyTabView(Player viewer) {\n+    super(viewer);\n+    this.viewer = viewer;\n+  }\n+\n+  private void assertEnabled() {\n+    if (manager == null)\n+      throw new IllegalStateException(getClass().getSimpleName() + \" is not enabled\");\n+  }\n+\n+  public Player getViewer() {\n+    return viewer;\n+  }\n+\n+  public int getWidth() {\n+    return 0;\n+  }\n+\n+  public int getHeight() {\n+    return 0;", "originalCommit": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5NDAyNA==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371994024", "bodyText": "width * height", "author": "Pablete1234", "createdAt": "2020-01-28T18:57:24Z", "path": "src/main/java/tc/oc/tablist/LegacyTabView.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package tc.oc.tablist;\n+\n+import javax.annotation.Nullable;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.Listener;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.util.collection.DefaultProvider;\n+\n+/**\n+ * The pre-1.8 tab list is severely limited. This is essentially a no-op {@link TabView} for pre-1.8\n+ * clients.\n+ */\n+public class LegacyTabView extends TabView implements Listener {\n+\n+  public static class Factory implements DefaultProvider<Player, LegacyTabView> {\n+    @Override\n+    public LegacyTabView get(Player key) {\n+      return new LegacyTabView(key);\n+    }\n+  }\n+\n+  // The single player seeing this view\n+  private final Player viewer;\n+\n+  protected @Nullable TabManager manager;\n+\n+  public LegacyTabView(Player viewer) {\n+    super(viewer);\n+    this.viewer = viewer;\n+  }\n+\n+  private void assertEnabled() {\n+    if (manager == null)\n+      throw new IllegalStateException(getClass().getSimpleName() + \" is not enabled\");\n+  }\n+\n+  public Player getViewer() {\n+    return viewer;\n+  }\n+\n+  public int getWidth() {\n+    return 0;\n+  }\n+\n+  public int getHeight() {\n+    return 0;\n+  }\n+\n+  public int getSize() {\n+    return 0;", "originalCommit": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5NTg2MQ==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371995861", "bodyText": "I think you only need to override the render() method to no-op here, everything else either isn't even used nor overriding (like onViewerJoinMatch) or you shouldn't be overriding anyways", "author": "Pablete1234", "createdAt": "2020-01-28T19:00:49Z", "path": "src/main/java/tc/oc/tablist/LegacyTabView.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package tc.oc.tablist;\n+\n+import javax.annotation.Nullable;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.Listener;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.util.collection.DefaultProvider;\n+\n+/**\n+ * The pre-1.8 tab list is severely limited. This is essentially a no-op {@link TabView} for pre-1.8\n+ * clients.\n+ */\n+public class LegacyTabView extends TabView implements Listener {\n+\n+  public static class Factory implements DefaultProvider<Player, LegacyTabView> {\n+    @Override\n+    public LegacyTabView get(Player key) {\n+      return new LegacyTabView(key);\n+    }\n+  }\n+\n+  // The single player seeing this view\n+  private final Player viewer;\n+\n+  protected @Nullable TabManager manager;\n+\n+  public LegacyTabView(Player viewer) {\n+    super(viewer);\n+    this.viewer = viewer;\n+  }\n+\n+  private void assertEnabled() {\n+    if (manager == null)\n+      throw new IllegalStateException(getClass().getSimpleName() + \" is not enabled\");\n+  }\n+\n+  public Player getViewer() {\n+    return viewer;\n+  }\n+\n+  public int getWidth() {\n+    return 0;\n+  }\n+\n+  public int getHeight() {\n+    return 0;\n+  }\n+\n+  public int getSize() {\n+    return 0;\n+  }\n+\n+  /** Take control of the viewer's player list */\n+  public void enable(TabManager manager) {\n+    if (this.manager != null) disable();\n+    this.manager = manager;\n+    this.assertEnabled();\n+  }\n+\n+  /** Tear down the display and return control the the viewer's player list to settings */\n+  public void disable() {\n+    if (this.manager != null) {\n+      this.manager.removeView(this);\n+      this.manager = null;\n+    }\n+  }\n+\n+  public void setSlot(int x, int y, @Nullable TabEntry entry) {}\n+\n+  public void setHeader(@Nullable TabEntry entry) {}\n+\n+  public void setFooter(@Nullable TabEntry entry) {}\n+\n+  public void render() {}\n+\n+  public void renderLayout(TabRender render) {}\n+\n+  public void renderContent(TabRender render) {}\n+\n+  public void markSlotsClean() {}\n+\n+  public void renderHeaderFooter(TabRender render, boolean force) {}\n+\n+  public void onViewerJoinMatch(PlayerJoinMatchEvent event) {}", "originalCommit": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6de1d2bc0bff0cbc6673c3b6a4691390fbb64998", "url": "https://github.com/PGMDev/PGM/commit/6de1d2bc0bff0cbc6673c3b6a4691390fbb64998", "message": "Make changes suggested by Pablo\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>", "committedDate": "2020-01-28T20:27:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjEyODQ3Ng==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r372128476", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (view instanceof ListeningTabView) {\n          \n          \n            \n                if (view != null && view instanceof ListeningTabView) {", "author": "Pablete1234", "createdAt": "2020-01-29T00:09:12Z", "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -94,8 +95,8 @@ public void run() {\n   @Override\n   public @Nullable TabView getView(Player viewer) {\n     TabView view = super.getView(viewer);\n-    if (view != null && !(view instanceof LegacyMatchTabView)) {\n-      this.registerEvents((MatchTabView) view);\n+    if (view instanceof ListeningTabView) {", "originalCommit": "6de1d2bc0bff0cbc6673c3b6a4691390fbb64998", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjEyOTIyNQ==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r372129225", "bodyText": "Is a null check really needed if there is an instanceof check? instanceof will return false if the object is null.", "author": "Meeples10", "createdAt": "2020-01-29T00:12:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjEyODQ3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjEzOTQxMw==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r372139413", "bodyText": "true, why did it have it before?", "author": "Pablete1234", "createdAt": "2020-01-29T00:52:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjEyODQ3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE0MTA5Mg==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r372141092", "bodyText": "I forgot to remove it when I added the instanceof check.", "author": "Meeples10", "createdAt": "2020-01-29T00:58:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjEyODQ3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjEyODU1NQ==", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r372128555", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (view instanceof ListeningTabView) {\n          \n          \n            \n                if (view != null && view instanceof ListeningTabView) {", "author": "Pablete1234", "createdAt": "2020-01-29T00:09:34Z", "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -151,8 +152,8 @@ public void onMatchUnload(MatchUnloadEvent event) {\n   @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n   public void onJoinMatch(PlayerJoinMatchEvent event) {\n     TabView view = this.getView(event.getPlayer().getBukkit());\n-    if (view != null && !(view instanceof LegacyMatchTabView)) {\n-      ((MatchTabView) view).onViewerJoinMatch(event);\n+    if (view instanceof ListeningTabView) {", "originalCommit": "6de1d2bc0bff0cbc6673c3b6a4691390fbb64998", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9e35be5814b1d5047127ee727f332cca1972b3b3", "url": "https://github.com/PGMDev/PGM/commit/9e35be5814b1d5047127ee727f332cca1972b3b3", "message": "Merge branch 'master' into fix-tab-list", "committedDate": "2020-01-29T01:23:12Z", "type": "commit"}, {"oid": "00f3ab243524310a5915d145fbe4d0a98143cec5", "url": "https://github.com/PGMDev/PGM/commit/00f3ab243524310a5915d145fbe4d0a98143cec5", "message": "Merge branch 'master' into fix-tab-list", "committedDate": "2020-01-29T17:36:08Z", "type": "commit"}]}