{"pr_number": 399, "pr_title": "Implement JSON Schema compatibility rule. Fixes #373", "pr_createdAt": "2020-04-28T11:10:02Z", "pr_url": "https://github.com/Apicurio/apicurio-registry/pull/399", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE3MjI3Mg==", "url": "https://github.com/Apicurio/apicurio-registry/pull/399#discussion_r417172272", "bodyText": "Perhaps move MAPPER init also to this static block.", "author": "alesj", "createdAt": "2020-04-29T09:09:29Z", "path": "app/src/main/java/io/apicurio/registry/rules/compatibility/jsonschema/JsonSchemaDiffLibrary.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * Copyright 2019 Red Hat\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.apicurio.registry.rules.compatibility.jsonschema;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.datatype.jsonorg.JsonOrgModule;\n+import io.apicurio.registry.rules.compatibility.jsonschema.diff.DiffContext;\n+import io.apicurio.registry.rules.compatibility.jsonschema.diff.SchemaDiffVisitor;\n+import org.everit.json.schema.Schema;\n+import org.everit.json.schema.loader.SchemaLoader;\n+import org.json.JSONObject;\n+\n+import static io.apicurio.registry.rules.compatibility.jsonschema.wrapper.WrapUtil.wrap;\n+\n+/**\n+ * @author Jakub Senko <jsenko@redhat.com>\n+ */\n+public class JsonSchemaDiffLibrary {\n+\n+    public static final ObjectMapper MAPPER = new ObjectMapper();\n+\n+    static {\n+        MAPPER.registerModule(new JsonOrgModule());", "originalCommit": "ee526f99aa6d614e7212f607b13de602c003f926", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b60d008916451f2ccd5cc79d24443c37793169eb", "url": "https://github.com/Apicurio/apicurio-registry/commit/b60d008916451f2ccd5cc79d24443c37793169eb", "message": "Implement JSON Schema compatibility rule. Fixes #373", "committedDate": "2020-05-06T17:38:10Z", "type": "commit"}, {"oid": "152ccffbda8ca1a17e7bf2b43bd7d990c74537c4", "url": "https://github.com/Apicurio/apicurio-registry/commit/152ccffbda8ca1a17e7bf2b43bd7d990c74537c4", "message": "Detailed tests and bug fixes", "committedDate": "2020-05-06T17:38:10Z", "type": "commit"}, {"oid": "850a562a4a8529deae4426fade3eef2a88720ea8", "url": "https://github.com/Apicurio/apicurio-registry/commit/850a562a4a8529deae4426fade3eef2a88720ea8", "message": "Move constant initialization into static block.", "committedDate": "2020-05-06T17:38:10Z", "type": "commit"}, {"oid": "850a562a4a8529deae4426fade3eef2a88720ea8", "url": "https://github.com/Apicurio/apicurio-registry/commit/850a562a4a8529deae4426fade3eef2a88720ea8", "message": "Move constant initialization into static block.", "committedDate": "2020-05-06T17:38:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTUwMjY3OA==", "url": "https://github.com/Apicurio/apicurio-registry/pull/399#discussion_r421502678", "bodyText": "Note: Check may be missing here", "author": "jsenko", "createdAt": "2020-05-07T13:27:44Z", "path": "app/src/main/java/io/apicurio/registry/rules/compatibility/jsonschema/diff/BooleanSchemaDiffVisitor.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2019 Red Hat\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.apicurio.registry.rules.compatibility.jsonschema.diff;\n+\n+import io.apicurio.registry.rules.compatibility.jsonschema.JsonSchemaWrapperVisitor;\n+import io.apicurio.registry.rules.compatibility.jsonschema.wrapper.BooleanSchemaWrapper;\n+import org.everit.json.schema.BooleanSchema;\n+\n+/**\n+ * @author Jakub Senko <jsenko@redhat.com>\n+ */\n+public class BooleanSchemaDiffVisitor extends JsonSchemaWrapperVisitor {\n+\n+\n+    private final DiffContext ctx;\n+    private final BooleanSchema original;\n+\n+    public BooleanSchemaDiffVisitor(DiffContext ctx, BooleanSchema original) {\n+        this.ctx = ctx;\n+        this.original = original;\n+    }\n+\n+    @Override\n+    public void visitBooleanSchema(BooleanSchemaWrapper schema) {\n+        super.visitBooleanSchema(schema);", "originalCommit": "850a562a4a8529deae4426fade3eef2a88720ea8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ba2bdab9cf1c303eb687d25e99d1683fa6f09df6", "url": "https://github.com/Apicurio/apicurio-registry/commit/ba2bdab9cf1c303eb687d25e99d1683fa6f09df6", "message": "Fixed formatting/indentation in pom.xml file", "committedDate": "2020-05-08T13:11:04Z", "type": "commit"}, {"oid": "1c2a13c032e7e98426153f76634aff087a7f5f1c", "url": "https://github.com/Apicurio/apicurio-registry/commit/1c2a13c032e7e98426153f76634aff087a7f5f1c", "message": "Merge branch 'master' into compat-json-schema", "committedDate": "2020-05-08T13:11:26Z", "type": "commit"}]}