{"pr_number": 7207, "pr_title": "Mixed datatypes - support primitive types", "pr_createdAt": "2020-11-17T14:05:22Z", "pr_url": "https://github.com/realm/realm-java/pull/7207", "timeline": [{"oid": "72d9bf7d813147bdfbb639cf344cc797e449820e", "url": "https://github.com/realm/realm-java/commit/72d9bf7d813147bdfbb639cf344cc797e449820e", "message": "Initial work on Mixed datatype", "committedDate": "2020-11-17T14:04:16Z", "type": "commit"}, {"oid": "0def0df770643f384f3f77c7ba52ccbe7927a99d", "url": "https://github.com/realm/realm-java/commit/0def0df770643f384f3f77c7ba52ccbe7927a99d", "message": "Annotations processor for non-managed mixed data type", "committedDate": "2020-11-23T07:41:09Z", "type": "commit"}, {"oid": "9af3ae2427d2031d3a29a7276707308c9b83d691", "url": "https://github.com/realm/realm-java/commit/9af3ae2427d2031d3a29a7276707308c9b83d691", "message": "Remove mixed lists and rollback to managed mixed types", "committedDate": "2020-11-26T18:31:19Z", "type": "commit"}, {"oid": "230b72bbfac2e1755e8c2039b0917e6137211778", "url": "https://github.com/realm/realm-java/commit/230b72bbfac2e1755e8c2039b0917e6137211778", "message": "Polish support for primitive realm values", "committedDate": "2020-11-27T11:21:40Z", "type": "commit"}, {"oid": "aba922799ddaf51b6c763807820afaf5e8b17e2c", "url": "https://github.com/realm/realm-java/commit/aba922799ddaf51b6c763807820afaf5e8b17e2c", "message": "Merge branch 'support-new-datatypes' into ct/support-mixed-type\n\n# Conflicts:\n#\trealm/realm-library/src/main/cpp/java_object_accessor.hpp", "committedDate": "2020-11-27T16:46:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzM0MTAxMg==", "url": "https://github.com/realm/realm-java/pull/7207#discussion_r537341012", "bodyText": "I'd write a FIXME here, just for visibility", "author": "edualonso", "createdAt": "2020-12-07T09:10:00Z", "path": "realm/realm-annotations-processor/src/test/resources/io/realm/some_test_AllTypesRealmProxy.java", "diffHunk": "@@ -1379,6 +1407,7 @@ public static String getSimpleClassName() {\n                 } else {\n                     objProxy.realmSet$columnDate(JsonUtils.stringToDate(reader.nextString()));\n                 }\n+            } else if (name.equals(\"columnMixed\")) {\n             } else if (name.equals(\"columnBinary\")) {", "originalCommit": "aba922799ddaf51b6c763807820afaf5e8b17e2c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYzNjcwNw==", "url": "https://github.com/realm/realm-java/pull/7207#discussion_r537636707", "bodyText": "Oh, this is the test class for the generated code. Never mind then.", "author": "edualonso", "createdAt": "2020-12-07T16:19:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzM0MTAxMg=="}], "type": "inlineReview"}, {"oid": "f71f32f38a3681abe318d12d2634044410c00015", "url": "https://github.com/realm/realm-java/commit/f71f32f38a3681abe318d12d2634044410c00015", "message": "EL PR change requests", "committedDate": "2020-12-07T19:36:05Z", "type": "commit"}, {"oid": "133a9c27075728e67773eeac2c2c223b754ed06d", "url": "https://github.com/realm/realm-java/commit/133a9c27075728e67773eeac2c2c223b754ed06d", "message": "Add missing imports", "committedDate": "2020-12-07T19:40:04Z", "type": "commit"}, {"oid": "c47b73b27ed2a371b606e64696a2a8913c89235a", "url": "https://github.com/realm/realm-java/commit/c47b73b27ed2a371b606e64696a2a8913c89235a", "message": "Add tests for checking for managed, validity and frozen.\nRename Mixed type NO_TYPE to NULL", "committedDate": "2020-12-15T17:59:59Z", "type": "commit"}, {"oid": "eebddfd4e62abc12b9ce2b2934eba1152111054f", "url": "https://github.com/realm/realm-java/commit/eebddfd4e62abc12b9ce2b2934eba1152111054f", "message": "Merge branch 'support-new-datatypes' into ct/support-mixed-type\n\n# Conflicts:\n#\trealm/realm-annotations-processor/src/main/java/io/realm/processor/ClassMetaData.kt\n#\trealm/realm-annotations-processor/src/main/java/io/realm/processor/Constants.kt\n#\trealm/realm-annotations-processor/src/main/java/io/realm/processor/OsObjectBuilderTypeHelper.kt\n#\trealm/realm-annotations-processor/src/main/java/io/realm/processor/RealmProxyClassGenerator.kt\n#\trealm/realm-annotations-processor/src/main/java/io/realm/processor/TypeMirrors.kt\n#\trealm/realm-annotations-processor/src/test/resources/io/realm/some_test_AllTypesRealmProxy.java\n#\trealm/realm-library/src/androidTest/java/io/realm/RealmQueryTests.java\n#\trealm/realm-library/src/main/java/io/realm/RealmFieldType.java\n#\trealm/realm-library/src/main/java/io/realm/internal/InvalidRow.java\n#\trealm/realm-library/src/main/java/io/realm/internal/Property.java\n#\trealm/realm-library/src/main/java/io/realm/internal/Row.java\n#\trealm/realm-library/src/main/java/io/realm/internal/Table.java\n#\trealm/realm-library/src/main/java/io/realm/internal/objectstore/OsObjectBuilder.java", "committedDate": "2020-12-15T18:34:56Z", "type": "commit"}, {"oid": "796f40f6e6333446b0d18634cca0e0713fdb13bd", "url": "https://github.com/realm/realm-java/commit/796f40f6e6333446b0d18634cca0e0713fdb13bd", "message": "Disable indexed Mixed class", "committedDate": "2020-12-15T18:40:00Z", "type": "commit"}, {"oid": "785adb2f56538eddab7a1f19361358e41ceb9b5f", "url": "https://github.com/realm/realm-java/commit/785adb2f56538eddab7a1f19361358e41ceb9b5f", "message": "Fix bunch test cases\nAdd unmanaged constructors for byte and integer", "committedDate": "2020-12-16T09:24:31Z", "type": "commit"}, {"oid": "1989f8fc71867f75cd0861fc956fbdd634016b73", "url": "https://github.com/realm/realm-java/commit/1989f8fc71867f75cd0861fc956fbdd634016b73", "message": "Fix style", "committedDate": "2020-12-16T09:27:07Z", "type": "commit"}, {"oid": "58f81bcdace393a198828b33de70ce3dcf3b7d21", "url": "https://github.com/realm/realm-java/commit/58f81bcdace393a198828b33de70ce3dcf3b7d21", "message": "Use actual realm reference", "committedDate": "2020-12-16T09:42:49Z", "type": "commit"}, {"oid": "7e5efef73a0cd6c20ed2050a76db3e2de35d8457", "url": "https://github.com/realm/realm-java/commit/7e5efef73a0cd6c20ed2050a76db3e2de35d8457", "message": "Add object schema tests for ObjectId and UUID", "committedDate": "2020-12-16T10:53:06Z", "type": "commit"}, {"oid": "a925acaf582e16adbbd819472b3b3ee858f11ec6", "url": "https://github.com/realm/realm-java/commit/a925acaf582e16adbbd819472b3b3ee858f11ec6", "message": "Add support for primitives byte, short, and ints", "committedDate": "2020-12-16T14:29:06Z", "type": "commit"}, {"oid": "9d5b6fda0a2634446b3b8900281a08b9a4e4c918", "url": "https://github.com/realm/realm-java/commit/9d5b6fda0a2634446b3b8900281a08b9a4e4c918", "message": "Add support for UUD realm primitive type", "committedDate": "2020-12-17T08:58:33Z", "type": "commit"}, {"oid": "beb4737dde50fff1d546630cf6e175aca4841ee3", "url": "https://github.com/realm/realm-java/commit/beb4737dde50fff1d546630cf6e175aca4841ee3", "message": "Add tests for mixed managed short, byte, int and long", "committedDate": "2020-12-17T09:25:58Z", "type": "commit"}, {"oid": "1bafe4253105165020a046d09156ef70fc7ca34f", "url": "https://github.com/realm/realm-java/commit/1bafe4253105165020a046d09156ef70fc7ca34f", "message": "Add table set UUID functions", "committedDate": "2020-12-17T14:55:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDMwNjUyMg==", "url": "https://github.com/realm/realm-java/pull/7207#discussion_r544306522", "bodyText": "Are this block and the next not the same?", "author": "edualonso", "createdAt": "2020-12-16T13:41:38Z", "path": "realm/realm-library/src/androidTest/java/io/realm/RealmJsonNullPrimaryKeyTests.java", "diffHunk": "@@ -95,6 +97,15 @@ public void createObjectFromJson_primaryKey_isNull_fromJsonObject() throws JSONE\n             assertEquals(1, results.size());\n             assertEquals(Long.valueOf(secondaryFieldValue).longValue(), results.first().getId());\n             assertNull(results.first().getName());\n+\n+            // PrimaryKeyAsObjectId\n+        } else if (clazz.equals(PrimaryKeyAsUUID.class)) {", "originalCommit": "1989f8fc71867f75cd0861fc956fbdd634016b73", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDMwNjc0OQ==", "url": "https://github.com/realm/realm-java/pull/7207#discussion_r544306749", "bodyText": "Also this one.", "author": "edualonso", "createdAt": "2020-12-16T13:41:57Z", "path": "realm/realm-library/src/androidTest/java/io/realm/RealmJsonNullPrimaryKeyTests.java", "diffHunk": "@@ -140,6 +160,15 @@ public void createOrUpdateObjectFromJson_primaryKey_isNull_updateFromJsonObject(\n             assertEquals(1, results.size());\n             assertEquals(Long.valueOf(secondaryFieldValue).longValue(), results.first().getId());\n             assertEquals(null, results.first().getName());\n+\n+            // PrimaryKeyAsObjectId\n+        } else if (clazz.equals(PrimaryKeyAsUUID.class)) {", "originalCommit": "1989f8fc71867f75cd0861fc956fbdd634016b73", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDMxMTI1Nw==", "url": "https://github.com/realm/realm-java/pull/7207#discussion_r544311257", "bodyText": "Wrong naming? Is this supposed to be a Mixed field for UUID instead?", "author": "edualonso", "createdAt": "2020-12-16T13:48:04Z", "path": "realm/realm-library/src/androidTest/java/io/realm/entities/AllJavaTypes.java", "diffHunk": "@@ -100,6 +105,8 @@\n     private byte[] fieldBinary;\n     private Decimal128 fieldDecimal128;\n     private ObjectId fieldObjectId;\n+    private UUID fieldUUID;\n+    private UUID fieldMixed;", "originalCommit": "1989f8fc71867f75cd0861fc956fbdd634016b73", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "60c58eae0e97b9cf6604d213f3261e123a9284d4", "url": "https://github.com/realm/realm-java/commit/60c58eae0e97b9cf6604d213f3261e123a9284d4", "message": "PR review changes", "committedDate": "2021-01-05T15:25:40Z", "type": "commit"}]}