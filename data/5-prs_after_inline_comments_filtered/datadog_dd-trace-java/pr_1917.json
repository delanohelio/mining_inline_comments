{"pr_number": 1917, "pr_title": "change log levels in various places", "pr_createdAt": "2020-09-28T10:02:55Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1917", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyODI3NA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495828274", "bodyText": "If a JDK7 user has paid for profiling we really should warn them as opposed to inform them...", "author": "richardstartin", "createdAt": "2020-09-28T10:05:22Z", "path": "dd-java-agent/agent-bootstrap/src/main/java/datadog/trace/bootstrap/Agent.java", "diffHunk": "@@ -332,7 +332,7 @@ private static synchronized void startProfilingAgent(\n       Profiling is compiled for Java8. Loading it on Java7 results in ClassFormatError\n       (more specifically UnsupportedClassVersionError). Just ignore and continue when this happens.\n       */\n-      log.info(\"Profiling requires OpenJDK 8 or above - skipping\");\n+      log.warn(\"Profiling requires OpenJDK 8 or above - skipping\");", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA4NjU0Mg==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r496086542", "bodyText": "The issue with putting this at warn is that this runs regardless if profiling is enabled or disabled", "author": "randomanderson", "createdAt": "2020-09-28T16:37:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyODI3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA4OTE5Mg==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r496089192", "bodyText": "I'd move it to debug then, my point about \"having paid for profiling\" probably doesn't apply.", "author": "richardstartin", "createdAt": "2020-09-28T16:42:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyODI3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA4OTQ4NA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r496089484", "bodyText": "or wrap it with a check to see if profiling is actually enabled", "author": "richardstartin", "createdAt": "2020-09-28T16:42:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyODI3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyOTA1Mg==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495829052", "bodyText": "We shouldn't log the state of the user's configuration at INFO level", "author": "richardstartin", "createdAt": "2020-09-28T10:06:41Z", "path": "dd-java-agent/agent-jmxfetch/src/main/java/datadog/trace/agent/jmxfetch/JMXFetch.java", "diffHunk": "@@ -36,7 +36,7 @@ public static void run() {\n   // This is used by tests\n   private static void run(final Config config) {\n     if (!config.isJmxFetchEnabled()) {\n-      log.info(\"JMXFetch is disabled\");\n+      log.debug(\"JMXFetch is disabled\");", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyOTQxNw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495829417", "bodyText": "Profiling is an opt in feature, you need to enable it. I'd hope if I enabled and arranged API keys that it that it would start.", "author": "richardstartin", "createdAt": "2020-09-28T10:07:25Z", "path": "dd-java-agent/agent-profiling/profiling-controller/src/main/java/com/datadog/profiling/controller/ProfilingSystem.java", "diffHunk": "@@ -109,7 +109,7 @@ public ProfilingSystem(\n \n   public final void start() {\n     if (log.isInfoEnabled()) {\n-      log.info(\n+      log.debug(", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYxOTQ4MQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r496619481", "bodyText": "Also the check isInfoEnabled() should be changed to isDebugEnabled() or completely omitted.", "author": "jbachorik", "createdAt": "2020-09-29T10:45:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyOTQxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyOTcwOA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495829708", "bodyText": "Better not to log things derived from configuration information at INFO level", "author": "richardstartin", "createdAt": "2020-09-28T10:08:01Z", "path": "dd-java-agent/agent-profiling/src/main/java/com/datadog/profiling/agent/ProfilingAgent.java", "diffHunk": "@@ -36,11 +36,11 @@ public static synchronized void run(final boolean isStartingFirst)\n         return;\n       }\n       if (!config.isProfilingEnabled()) {\n-        log.info(\"Profiling: disabled\");\n+        log.debug(\"Profiling: disabled\");", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyOTgwOQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495829809", "bodyText": "Seems pretty serious to me.", "author": "richardstartin", "createdAt": "2020-09-28T10:08:13Z", "path": "dd-java-agent/agent-profiling/src/main/java/com/datadog/profiling/agent/ProfilingAgent.java", "diffHunk": "@@ -36,11 +36,11 @@ public static synchronized void run(final boolean isStartingFirst)\n         return;\n       }\n       if (!config.isProfilingEnabled()) {\n-        log.info(\"Profiling: disabled\");\n+        log.debug(\"Profiling: disabled\");\n         return;\n       }\n       if (config.getApiKey() != null && !API_KEY_REGEX.test(config.getApiKey())) {\n-        log.info(\n+        log.warn(", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYyMDIwMA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r496620200", "bodyText": "Yeah, this might be questionable - while I agree that this could be serious I remember having some customers spooked by logged WARN and ERROR messages :/ So, it's a tough call on this one :(", "author": "jbachorik", "createdAt": "2020-09-29T10:47:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyOTgwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjY4MjQ1OQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r496682459", "bodyText": "I prefer it this way - the API key has been configured, but it's not going to work, profiles don't show up, rather than have a weird support issue they get a WARNing.", "author": "richardstartin", "createdAt": "2020-09-29T12:39:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyOTgwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjY4NDc3OQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r496684779", "bodyText": "That said, I don't have to support the profiler, so I'll change it back if you want.", "author": "richardstartin", "createdAt": "2020-09-29T12:42:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyOTgwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMDA5MQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495830091", "bodyText": "The user has enabled it, they've got the API key right, they probably hope it just works.", "author": "richardstartin", "createdAt": "2020-09-28T10:08:48Z", "path": "dd-java-agent/agent-profiling/src/main/java/com/datadog/profiling/agent/ProfilingAgent.java", "diffHunk": "@@ -66,7 +66,7 @@ public static synchronized void run(final boolean isStartingFirst)\n                 uploadPeriod,\n                 config.isProfilingStartForceFirst());\n         profiler.start();\n-        log.info(\"Profiling has started\");\n+        log.debug(\"Profiling has started\");", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMDM2NA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495830364", "bodyText": "I'd certainly hope so", "author": "richardstartin", "createdAt": "2020-09-28T10:09:20Z", "path": "dd-java-agent/agent-tooling/src/main/java/datadog/trace/agent/tooling/TracerInstaller.java", "diffHunk": "@@ -28,6 +28,6 @@ public static void installGlobalTracer(final CoreTracer tracer) {\n     } catch (final RuntimeException re) {\n       log.warn(\"Failed to register tracer: {}\", tracer, re);\n     }\n-    log.info(\"Global tracer installed\");\n+    log.debug(\"Global tracer installed\");", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMDU1Nw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495830557", "bodyText": "This is too much of an implementation detail to log at info", "author": "richardstartin", "createdAt": "2020-09-28T10:09:41Z", "path": "dd-java-agent/instrumentation/java-concurrent/src/main/java/datadog/trace/instrumentation/java/concurrent/AbstractExecutorInstrumentation.java", "diffHunk": "@@ -40,7 +40,7 @@ public AbstractExecutorInstrumentation(final String... additionalNames) {\n     super(EXEC_NAME, additionalNames);\n \n     if (TRACE_ALL_EXECUTORS) {\n-      log.info(\"Tracing all executors enabled.\");\n+      log.debug(\"Tracing all executors enabled.\");", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk1OTU1MA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495959550", "bodyText": "TRACE_ALL_EXECUTORS isn't enabled by default and not expected to be left on, so I have a mild preference to this being kept at info.", "author": "tylerbenson", "createdAt": "2020-09-28T13:57:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMDU1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMDY2Nw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495830667", "bodyText": "we log this elsewhere", "author": "richardstartin", "createdAt": "2020-09-28T10:09:52Z", "path": "dd-trace-api/src/main/java/datadog/trace/api/DDTraceApiInfo.java", "diffHunk": "@@ -23,7 +23,7 @@\n       v = \"unknown\";\n     }\n     VERSION = v;\n-    log.info(\"dd-trace-api - version: {}\", v);\n+    log.debug(\"dd-trace-api - version: {}\", v);", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMTE2Nw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495831167", "bodyText": "This will have been explicitly configured, let's keep it at debug level for those curious whether their config settings are honoured or not", "author": "richardstartin", "createdAt": "2020-09-28T10:10:48Z", "path": "dd-trace-core/src/main/java/datadog/trace/common/sampling/Sampler.java", "diffHunk": "@@ -45,10 +45,10 @@ public static Sampler forConfig(final Config config) {\n           }\n         } else if (config.isPrioritySamplingEnabled()) {\n           if (KEEP.equalsIgnoreCase(config.getPrioritySamplingForce())) {\n-            log.info(\"Force Sampling Priority to: SAMPLER_KEEP.\");\n+            log.debug(\"Force Sampling Priority to: SAMPLER_KEEP.\");", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMTM3Mw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495831373", "bodyText": "It should definitely exit", "author": "richardstartin", "createdAt": "2020-09-28T10:11:09Z", "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/ddagent/TraceProcessingWorker.java", "diffHunk": "@@ -185,7 +185,7 @@ public void run() {\n       } catch (InterruptedException e) {\n         Thread.currentThread().interrupt();\n       }\n-      log.info(\"datadog trace processor exited\");\n+      log.debug(\"datadog trace processor exited\");", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMTU4Mg==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495831582", "bodyText": "I wonder if this should be warn or debug, but don't think it should be info", "author": "richardstartin", "createdAt": "2020-09-28T10:11:34Z", "path": "dd-trace-core/src/main/java/datadog/trace/core/propagation/HttpCodec.java", "diffHunk": "@@ -110,7 +110,7 @@ static String encode(final String value) {\n     try {\n       encoded = URLEncoder.encode(value, \"UTF-8\");\n     } catch (final UnsupportedEncodingException e) {\n-      log.info(\"Failed to encode value - {}\", value);\n+      log.debug(\"Failed to encode value - {}\", value);", "originalCommit": "c5cadff0d2dc10a6431743b515464bbf1d56a72c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk2MTA0MQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495961041", "bodyText": "Under what scenario would this ever throw?  Isn't UTF-8 always available?", "author": "tylerbenson", "createdAt": "2020-09-28T13:59:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMTU4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk2MzY0NA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495963644", "bodyText": "You tell me! I didn't write the log message!", "author": "richardstartin", "createdAt": "2020-09-28T14:02:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMTU4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk2OTQ1Nw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1917#discussion_r495969457", "bodyText": "haha... no idea.", "author": "tylerbenson", "createdAt": "2020-09-28T14:10:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgzMTU4Mg=="}], "type": "inlineReview"}, {"oid": "9ef5d583e5b868c0d1f9c43e39e53e6be9f5b5e0", "url": "https://github.com/DataDog/dd-trace-java/commit/9ef5d583e5b868c0d1f9c43e39e53e6be9f5b5e0", "message": "change log levels in various places", "committedDate": "2020-09-28T18:58:08Z", "type": "forcePushed"}, {"oid": "14dfef20857b4dc299f933ce0349183c09474e53", "url": "https://github.com/DataDog/dd-trace-java/commit/14dfef20857b4dc299f933ce0349183c09474e53", "message": "change log levels in various places", "committedDate": "2020-09-29T12:48:00Z", "type": "commit"}, {"oid": "9da30e55f5c4002a98ce0154c2ec570b042149bf", "url": "https://github.com/DataDog/dd-trace-java/commit/9da30e55f5c4002a98ce0154c2ec570b042149bf", "message": "move version to status logger JSON", "committedDate": "2020-09-29T12:48:00Z", "type": "commit"}, {"oid": "9da30e55f5c4002a98ce0154c2ec570b042149bf", "url": "https://github.com/DataDog/dd-trace-java/commit/9da30e55f5c4002a98ce0154c2ec570b042149bf", "message": "move version to status logger JSON", "committedDate": "2020-09-29T12:48:00Z", "type": "forcePushed"}]}