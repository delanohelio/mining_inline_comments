{"pr_number": 603, "pr_title": " New Basemaps: Hydrography, Image layers and KML Categories", "pr_createdAt": "2020-12-04T14:44:33Z", "pr_url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603", "timeline": [{"oid": "7ffe8d15a89ec9ea4077ee1acc97c14c4dcc1b25", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/7ffe8d15a89ec9ea4077ee1acc97c14c4dcc1b25", "message": "Hydrography - add enc exchange set", "committedDate": "2020-11-26T17:06:05Z", "type": "commit"}, {"oid": "64303c28876560ff5cba8cc772b43ab8d44dccd2", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/64303c28876560ff5cba8cc772b43ab8d44dccd2", "message": "Change sublayer renderer", "committedDate": "2020-11-27T09:50:13Z", "type": "commit"}, {"oid": "8558ce66176e5e43adda482c77caa707db92018c", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/8558ce66176e5e43adda482c77caa707db92018c", "message": "Map image sublayer visibility", "committedDate": "2020-11-27T10:18:44Z", "type": "commit"}, {"oid": "78b9fd36726fb0baaf12251e946a2f3c1d569dad", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/78b9fd36726fb0baaf12251e946a2f3c1d569dad", "message": "Map image layer tables", "committedDate": "2020-11-27T10:54:43Z", "type": "commit"}, {"oid": "53ef87d4abefb12424fa2a701fe45cd9bc3dec95", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/53ef87d4abefb12424fa2a701fe45cd9bc3dec95", "message": "Query map image sublayer", "committedDate": "2020-11-27T11:26:12Z", "type": "commit"}, {"oid": "27f825493ebdcc94948e81feab02a47b8e85b831", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/27f825493ebdcc94948e81feab02a47b8e85b831", "message": "Create and save kml file", "committedDate": "2020-11-27T11:29:57Z", "type": "commit"}, {"oid": "dcd0653b840610d6c2463cca746772edd92beafe", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/dcd0653b840610d6c2463cca746772edd92beafe", "message": "Display kml", "committedDate": "2020-11-27T11:34:48Z", "type": "commit"}, {"oid": "34ae133538e69e10380e4961e2a01721484122af", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/34ae133538e69e10380e4961e2a01721484122af", "message": "Identify kml features", "committedDate": "2020-11-27T11:41:09Z", "type": "commit"}, {"oid": "d4d32a3bc5cb9f0285f1cdf7aafc55982a2debc9", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/d4d32a3bc5cb9f0285f1cdf7aafc55982a2debc9", "message": "Change sublayer renderer - set viewpoint on mapview", "committedDate": "2020-12-04T14:38:32Z", "type": "commit"}, {"oid": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/0ac39a8e808db9ed298e85e0011bc7302e2c46f6", "message": "Map image subayer visibility - set viewpoint on mapview", "committedDate": "2020-12-04T14:42:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzNjE5Ng==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538236196", "bodyText": "Should we take the time here and make this pattern consistent with the rest of the samples? I.e. put the part where we add the MapView to the StackPane at the very end of the start method?", "author": "JonLavi", "createdAt": "2020-12-08T10:49:28Z", "path": "hydrography/add-enc-exchange-set/src/main/java/com/esri/samples/add_enc_exchange_set/AddEncExchangeSetSample.java", "diffHunk": "@@ -63,6 +64,10 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n       // create a map view and add it to the stack pane\n       mapView = new MapView();\n       stackPane.getChildren().add(mapView);", "originalCommit": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzNjY5OQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538236699", "bodyText": "If you decide to move the stackPane interaction I mentioned above, then we could move the creation of the map view down to here, so it looks the same as with the other samples`", "author": "JonLavi", "createdAt": "2020-12-08T10:50:11Z", "path": "hydrography/add-enc-exchange-set/src/main/java/com/esri/samples/add_enc_exchange_set/AddEncExchangeSetSample.java", "diffHunk": "@@ -83,8 +88,8 @@ public void start(Stage stage) {\n         }\n       });\n \n-      // create a map with the Oceans basemap and set it on the map view\n-      ArcGISMap map = new ArcGISMap(Basemap.createOceans());\n+      // create a map with the oceans basemap style and set it on the map view\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_OCEANS);\n       mapView.setMap(map);", "originalCommit": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI5NjI4Mg==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538296282", "bodyText": "Thanks I've tidied this ordering up", "author": "jenmerritt", "createdAt": "2020-12-08T12:10:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzNjY5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzODcwMw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538238703", "bodyText": "I know you haven't touched this code, but might be worth updating this?\nI think it makes more sense to set the SR on the map, rather than on an individual point, and then not specify a SR when creating points/viewpoints and adding them to our map.\nThen we ould also get rid of the initialLocation and create the Viewpoint directly with the coordinates.", "author": "JonLavi", "createdAt": "2020-12-08T10:53:06Z", "path": "image_layers/query-map-image-sublayer/src/main/java/com/esri/samples/query_map_image_sublayer/QueryMapImageSublayerSample.java", "diffHunk": "@@ -72,8 +73,12 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n-      // create a map with a basemap and set its initial viewpoint\n-      ArcGISMap map = new ArcGISMap(Basemap.createStreetsVector());\n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n+      // create a map with a basemap style and set its initial viewpoint\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_STREETS);\n       Point initialLocation = new Point(-12716000.00, 4170400.00, SpatialReferences.getWebMercator());\n       Viewpoint viewpoint = new Viewpoint(initialLocation, 6000000);", "originalCommit": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODMwOTcxMQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538309711", "bodyText": "Thanks Jon your comments have helped me untangle that. Have done some tweaks and tested.", "author": "jenmerritt", "createdAt": "2020-12-08T12:27:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzODcwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODMzNDUxMg==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538334512", "bodyText": "Nice work, it looks so much nicer \ud83d\ude80", "author": "JonLavi", "createdAt": "2020-12-08T12:54:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzODcwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzOTk1Nw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538239957", "bodyText": "Maybe we should split this up (like in most samples), or rephrase the comment so that it's more accurate about what the code does?\n// create a map and add it to a new map view would make more sense, beause the map view doesn't exist until we create it in this block", "author": "JonLavi", "createdAt": "2020-12-08T10:54:53Z", "path": "kml/display-kml/src/main/java/com/esri/samples/display_kml/DisplayKMLSample.java", "diffHunk": "@@ -58,12 +59,16 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n       // create a progress indicator\n       ProgressIndicator progressIndicator = new ProgressIndicator();\n       progressIndicator.setVisible(false);\n \n       // create a map and add it to the map view\n-      ArcGISMap map = new ArcGISMap(Basemap.createDarkGrayCanvasVector());\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_DARK_GRAY);\n       mapView = new MapView();\n       mapView.setMap(map);", "originalCommit": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cf1ee47770c383e86d1a1a8821242fb56c507b03", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/cf1ee47770c383e86d1a1a8821242fb56c507b03", "message": "Add ENC exchange set - adjust mapview setup", "committedDate": "2020-12-08T12:10:37Z", "type": "commit"}, {"oid": "24c68bc3c24c46e988d09916568d1ed792b69755", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/24c68bc3c24c46e988d09916568d1ed792b69755", "message": "Query map image sublayer - tidy up viewpoint setting", "committedDate": "2020-12-08T12:27:48Z", "type": "commit"}, {"oid": "e9d36bf25065247d11bb4c15db3c49fc38018f79", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/e9d36bf25065247d11bb4c15db3c49fc38018f79", "message": "Display KML - tidy comments", "committedDate": "2020-12-08T12:29:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc2NTczMQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538765731", "bodyText": "another query about the conversion of level of detail 2 to scale 40000 here (see original comment here https://github.com/Esri/arcgis-runtime-samples-java/pull/602/files#r538755384)", "author": "Rachael-E", "createdAt": "2020-12-08T19:59:27Z", "path": "image_layers/change-sublayer-renderer/src/main/java/com/esri/samples/change_sublayer_renderer/ChangeSublayerRendererSample.java", "diffHunk": "@@ -63,11 +65,20 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n-      // create a map and set it to the map view\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 48.354406, -99.998267, 2);\n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n+      // create a map with a basemap style\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_STREETS);\n+\n+      // create a map view and set its map\n       mapView = new MapView();\n       mapView.setMap(map);\n \n+      // set a viewpoint on the map view\n+      mapView.setViewpoint(new Viewpoint(48.354406, -99.998267, 40000));", "originalCommit": "e9d36bf25065247d11bb4c15db3c49fc38018f79", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc2NjAxNQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538766015", "bodyText": "as above: different scale, let's try and be consistent if possible", "author": "Rachael-E", "createdAt": "2020-12-08T19:59:54Z", "path": "image_layers/map-image-layer-sublayer-visibility/src/main/java/com/esri/samples/map_image_layer_sublayer_visibility/MapImageLayerSublayerVisibilitySample.java", "diffHunk": "@@ -73,13 +79,16 @@ public void start(Stage stage) {\n       controlsVBox.getChildren().addAll(citiesBox, continentsBox, worldBox);\n       controlsVBox.getChildren().forEach(c -> ((CheckBox) c).setSelected(true));\n \n-      // create a map view\n-      mapView = new MapView();\n+      // create a map with a basemap style\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_TOPOGRAPHIC);\n \n-      // create an ArcGISMap with the topographic basemap and set it to the map view\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.TOPOGRAPHIC, 48.354406, -99.998267, 2);\n+      // create a map view and set its map\n+      mapView = new MapView();\n       mapView.setMap(map);\n \n+      // set a viewpoint on the map view\n+      mapView.setViewpoint(new Viewpoint(48.354406, -99.998267, 150000000));", "originalCommit": "e9d36bf25065247d11bb4c15db3c49fc38018f79", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc4MjA2OQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538782069", "bodyText": "was there a reason this scale changed to 9000000 when the original scale was set to 6000000?", "author": "Rachael-E", "createdAt": "2020-12-08T20:26:09Z", "path": "image_layers/query-map-image-sublayer/src/main/java/com/esri/samples/query_map_image_sublayer/QueryMapImageSublayerSample.java", "diffHunk": "@@ -72,20 +71,24 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n-      // create a map with a basemap and set its initial viewpoint\n-      ArcGISMap map = new ArcGISMap(Basemap.createStreetsVector());\n-      Point initialLocation = new Point(-12716000.00, 4170400.00, SpatialReferences.getWebMercator());\n-      Viewpoint viewpoint = new Viewpoint(initialLocation, 6000000);\n-      map.setInitialViewpoint(viewpoint);\n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n+      // create a map with a basemap style\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_STREETS);\n \n       // create and add a map image layer to the map\n       ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer\");\n       map.getOperationalLayers().add(imageLayer);\n \n-      // create a map view and set the map to it\n+      // create a map view and set its map\n       mapView = new MapView();\n       mapView.setMap(map);\n \n+      // set a viewpoint on the map view\n+      mapView.setViewpoint(new Viewpoint(36.75056, -115.44154, 9000000));", "originalCommit": "e9d36bf25065247d11bb4c15db3c49fc38018f79", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA3MjIzMg==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r540072232", "bodyText": "No.. corrected", "author": "jenmerritt", "createdAt": "2020-12-10T10:56:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc4MjA2OQ=="}], "type": "inlineReview"}, {"oid": "d79282f078be7e585bc9d0f35461bd677c1a5d32", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/d79282f078be7e585bc9d0f35461bd677c1a5d32", "message": "Merge branch 'dev' into jen/basemaps-hydrography-imagelayers-kml", "committedDate": "2020-12-10T10:45:00Z", "type": "commit"}, {"oid": "61fbbddbe3663ffb2738b222b90ff914c34340e7", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/61fbbddbe3663ffb2738b222b90ff914c34340e7", "message": "Update build.gradle - verisons", "committedDate": "2020-12-10T11:36:11Z", "type": "commit"}, {"oid": "dd6199ac1e446324f7636ee25400c585ad90ffc4", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/dd6199ac1e446324f7636ee25400c585ad90ffc4", "message": "Tidy up comment and scale consistencies", "committedDate": "2020-12-10T11:36:33Z", "type": "commit"}]}