{"pr_number": 581, "pr_title": "Add Exclusive Mode to Group Layers Sample", "pr_createdAt": "2020-10-30T11:57:55Z", "pr_url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581", "timeline": [{"oid": "72b980bad3bff658e2c28959b89b1c54a3650eeb", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/72b980bad3bff658e2c28959b89b1c54a3650eeb", "message": "add additional group layer", "committedDate": "2020-10-27T14:19:09Z", "type": "commit"}, {"oid": "996ad62498279adc777db5943ec9dc955f505f3f", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/996ad62498279adc777db5943ec9dc955f505f3f", "message": "add radio buttons to layer tree", "committedDate": "2020-10-28T14:40:47Z", "type": "commit"}, {"oid": "77b791066f285daefcf7d3bf1dc1d88cfff8a935", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/77b791066f285daefcf7d3bf1dc1d88cfff8a935", "message": "format the layer names in the ui", "committedDate": "2020-10-28T15:23:25Z", "type": "commit"}, {"oid": "90fd908ce7944eba7e3657b07c2bede1be72e92e", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/90fd908ce7944eba7e3657b07c2bede1be72e92e", "message": "update image", "committedDate": "2020-10-30T11:18:45Z", "type": "commit"}, {"oid": "6b781c5771085e76669e7ab27a0cab88ab44f704", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/6b781c5771085e76669e7ab27a0cab88ab44f704", "message": "update readme", "committedDate": "2020-10-30T11:19:28Z", "type": "commit"}, {"oid": "b4b265be195a82c1391823490c69acea4f335131", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/b4b265be195a82c1391823490c69acea4f335131", "message": "add alerts and tidy up comments", "committedDate": "2020-10-30T11:20:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzMzYyMw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r515833623", "bodyText": "Maybe it's worth considering (two?) method(s) here?\nprivate void FeatureLayer(url URL)\nprivate void addArcGISSceneLayer(url URL)\nI'll let you and @Rachael-E discuss whether that's applicable here.", "author": "JonLavi", "createdAt": "2020-11-02T09:18:26Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,59 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers\n+      projectAreaGroupLayer = new GroupLayer();\n+      projectAreaGroupLayer.setName(\"Project area group\");\n+      projectAreaGroupLayer.setVisibilityMode(GroupVisibilityMode.INDEPENDENT);\n+      projectAreaGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"))),\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"))),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\"))\n+      ));\n+\n+      buildingsGroupLayer = new GroupLayer();\n+      buildingsGroupLayer.setName(\"Buildings group\");\n+      buildingsGroupLayer.setVisibilityMode(GroupVisibilityMode.EXCLUSIVE);\n+      buildingsGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\")),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\"))\n+      ));", "originalCommit": "b4b265be195a82c1391823490c69acea4f335131", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY4NzYzNw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r518687637", "bodyText": "I followed what we did in another sample adding this way, so will leave as is to be checked/discussed if needed \ud83d\udc4d", "author": "jenmerritt", "createdAt": "2020-11-06T11:18:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzMzYyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY5MTE3OA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520691178", "bodyText": "happy with this as is, although the urls are going way over our line limit (around 110 chars) recommendation. adding a line break before the string part of each code line should get over that more or less.", "author": "Rachael-E", "createdAt": "2020-11-10T16:19:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzMzYyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzNDgzMw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r515834833", "bodyText": "Perhaps adding a .loadAsync above this line (and below when iterating over buildingsGroupLayer) would help with the wait happening when switching between the different group layers", "author": "JonLavi", "createdAt": "2020-11-02T09:20:27Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,59 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers\n+      projectAreaGroupLayer = new GroupLayer();\n+      projectAreaGroupLayer.setName(\"Project area group\");\n+      projectAreaGroupLayer.setVisibilityMode(GroupVisibilityMode.INDEPENDENT);\n+      projectAreaGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"))),\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"))),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\"))\n+      ));\n+\n+      buildingsGroupLayer = new GroupLayer();\n+      buildingsGroupLayer.setName(\"Buildings group\");\n+      buildingsGroupLayer.setVisibilityMode(GroupVisibilityMode.EXCLUSIVE);\n+      buildingsGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\")),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\"))\n+      ));\n+\n+      // Display an alert if the child layers in the group layers fail to load\n+      projectAreaGroupLayer.getLayers().forEach(layer ->\n+        layer.addDoneLoadingListener(() -> {", "originalCommit": "b4b265be195a82c1391823490c69acea4f335131", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY5MDYzMw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r518690633", "bodyText": "@JonLavi The last few days I've tested a load of strategies in terms of how the layers are loaded and also added to the UI (which is currently in the order at which the layers are loaded, rather than the order they are on the map) to see if/what improvements can be made.  @TADraeseke and I ran through it and compared with Android too. Conclusion has been that I've moved the loading out of this method (though the switch speed still seems to just be the layers themselves). I've also left the ordering pattern as it is for the UI.\nI've saved the testing on a branch so if you or @Rachael-E  wanted me to share/discuss those just let me know.", "author": "jenmerritt", "createdAt": "2020-11-06T11:24:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzNDgzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzNjY2Mw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r515836663", "bodyText": "There might be a possibility to use property binding here, but no need to spend too much time trying to optimise it if you find it's getting out of hand a bit.", "author": "JonLavi", "createdAt": "2020-11-02T09:23:38Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/LayerTreeCell.java", "diffHunk": "@@ -1,32 +1,71 @@\n package com.esri.samples.group_layers;\n \n import javafx.scene.control.CheckBox;\n+import javafx.scene.control.RadioButton;\n import javafx.scene.control.TreeCell;\n \n import com.esri.arcgisruntime.layers.Layer;\n \n /**\n- * A custom tree cell for displaying a layer in a tree view. Includes a check box for toggling the layer's visibility.\n+ * A custom tree cell for displaying a layer in a tree view. Includes a check box or radio button\n+ * for toggling the layer's visibility.\n  */\n public class LayerTreeCell extends TreeCell<Layer> {\n \n   @Override\n   public void updateItem(Layer layer, boolean empty) {\n     super.updateItem(layer, empty);\n     if (!empty) {\n-      // use the layer's name for the text\n-      setText(layer.getName());\n \n-      // add a check box to allow the user to change the visibility of the layer\n-      CheckBox checkBox = new CheckBox();\n-      setGraphic(checkBox);\n+      // set the label to the layer's name\n+      setText(formatName(layer.getName()));\n \n-      // toggle the layer's visibility when the check box is toggled\n-      checkBox.setSelected(layer.isVisible());\n-      checkBox.selectedProperty().addListener(e -> layer.setVisible(checkBox.isSelected()));\n+      if (layer.getName().equals(\"DevA_BuildingShells\") || layer.getName().equals(\"DevB_BuildingShells\")) {\n+\n+        // if the layer is a building shell create a radio button and assign to the toggle group\n+        RadioButton radioButton = new RadioButton();\n+        setGraphic(radioButton);\n+        radioButton.setToggleGroup(GroupLayersSample.buildingsToggleGroup);\n+\n+        // toggle the layer's visibility when the radio button is selected\n+        radioButton.setSelected(layer.isVisible());\n+        radioButton.selectedProperty().addListener(e -> layer.setVisible(radioButton.isSelected()));", "originalCommit": "b4b265be195a82c1391823490c69acea4f335131", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcwMTA2Mg==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r518701062", "bodyText": "I had a look at this but couldn't figure out how I would do that. Could look at this together, or leave it if it's ok with the listeners.", "author": "jenmerritt", "createdAt": "2020-11-06T11:47:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzNjY2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTYzMTk5Ng==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r519631996", "bodyText": "Listeners might be the way forward actually, because it doesn't look like we can bind layer.isVisible", "author": "JonLavi", "createdAt": "2020-11-09T08:35:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgzNjY2Mw=="}], "type": "inlineReview"}, {"oid": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "message": "move loading out of buildlayersview method", "committedDate": "2020-11-06T11:16:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY3MDc4Mw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520670783", "bodyText": "I've re-reviewed this from the garbage collection perspective and we don't actually need these up here (I missed this the first time round!)\nWe don't need to worry about garbage collection since we add them to the scene's operational layers, and since the scene is attached to the sceneview, the sceneview can't be garbage collected.", "author": "Rachael-E", "createdAt": "2020-11-10T15:53:16Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -43,10 +46,11 @@\n \n public class GroupLayersSample extends Application {\n \n+  private GroupLayer buildingsGroupLayer; // keep loadable in scope to avoid garbage collection\n+  private GroupLayer projectAreaGroupLayer; // keep loadable in scope to avoid garbage collection\n+", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY4NjUwOQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520686509", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create two group layers, set the visibility modes and add layers\n          \n          \n            \n                  // create a group layer for project areas, set the visibility mode and add layers to it", "author": "Rachael-E", "createdAt": "2020-11-10T16:13:14Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,63 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY4NzA1OA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520687058", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n              // create a group layer for buildings, set the visibility mode and add layers to it", "author": "Rachael-E", "createdAt": "2020-11-10T16:13:54Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,63 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers\n+      projectAreaGroupLayer = new GroupLayer();\n+      projectAreaGroupLayer.setName(\"Project area group\");\n+      projectAreaGroupLayer.setVisibilityMode(GroupVisibilityMode.INDEPENDENT);\n+      projectAreaGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"))),\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"))),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\"))\n+      ));\n+", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY5Mzk3OA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520693978", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // Display an alert if the child layers in the group layers fail to load\n          \n          \n            \n                  // display an alert if the child layers in the group layers fail to load", "author": "Rachael-E", "createdAt": "2020-11-10T16:23:14Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,63 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers\n+      projectAreaGroupLayer = new GroupLayer();\n+      projectAreaGroupLayer.setName(\"Project area group\");\n+      projectAreaGroupLayer.setVisibilityMode(GroupVisibilityMode.INDEPENDENT);\n+      projectAreaGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"))),\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"))),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\"))\n+      ));\n+\n+      buildingsGroupLayer = new GroupLayer();\n+      buildingsGroupLayer.setName(\"Buildings group\");\n+      buildingsGroupLayer.setVisibilityMode(GroupVisibilityMode.EXCLUSIVE);\n+      buildingsGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\")),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\"))\n+      ));\n+\n+      // load the group layers\n+      projectAreaGroupLayer.loadAsync();\n+      buildingsGroupLayer.loadAsync();\n+\n+      // Display an alert if the child layers in the group layers fail to load", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxMDc5Mw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520810793", "bodyText": "the pattern for group layers is that they are \"loaded\" by default when they are brought into the map, so they don't need this additional load call.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // load the group layers\n          \n          \n            \n                  projectAreaGroupLayer.loadAsync();\n          \n          \n            \n                  buildingsGroupLayer.loadAsync();", "author": "Rachael-E", "createdAt": "2020-11-10T19:12:02Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,63 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers\n+      projectAreaGroupLayer = new GroupLayer();\n+      projectAreaGroupLayer.setName(\"Project area group\");\n+      projectAreaGroupLayer.setVisibilityMode(GroupVisibilityMode.INDEPENDENT);\n+      projectAreaGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"))),\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"))),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\"))\n+      ));\n+\n+      buildingsGroupLayer = new GroupLayer();\n+      buildingsGroupLayer.setName(\"Buildings group\");\n+      buildingsGroupLayer.setVisibilityMode(GroupVisibilityMode.EXCLUSIVE);\n+      buildingsGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\")),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\"))\n+      ));\n+\n+      // load the group layers\n+      projectAreaGroupLayer.loadAsync();\n+      buildingsGroupLayer.loadAsync();", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxMzM3NA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520813374", "bodyText": "I think it's more readable to name each layer childLayer as we had before:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  projectAreaGroupLayer.getLayers().forEach(layer ->\n          \n          \n            \n                  projectAreaGroupLayer.getLayers().forEach(childLayer ->", "author": "Rachael-E", "createdAt": "2020-11-10T19:16:25Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,63 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers\n+      projectAreaGroupLayer = new GroupLayer();\n+      projectAreaGroupLayer.setName(\"Project area group\");\n+      projectAreaGroupLayer.setVisibilityMode(GroupVisibilityMode.INDEPENDENT);\n+      projectAreaGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"))),\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"))),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\"))\n+      ));\n+\n+      buildingsGroupLayer = new GroupLayer();\n+      buildingsGroupLayer.setName(\"Buildings group\");\n+      buildingsGroupLayer.setVisibilityMode(GroupVisibilityMode.EXCLUSIVE);\n+      buildingsGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\")),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\"))\n+      ));\n+\n+      // load the group layers\n+      projectAreaGroupLayer.loadAsync();\n+      buildingsGroupLayer.loadAsync();\n+\n+      // Display an alert if the child layers in the group layers fail to load\n+      projectAreaGroupLayer.getLayers().forEach(layer ->", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxNDMwNg==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520814306", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // add the group layers to the scene operational layers\n          \n          \n            \n                  // add the group layers to the scene as operational layers", "author": "Rachael-E", "createdAt": "2020-11-10T19:18:03Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,63 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers\n+      projectAreaGroupLayer = new GroupLayer();\n+      projectAreaGroupLayer.setName(\"Project area group\");\n+      projectAreaGroupLayer.setVisibilityMode(GroupVisibilityMode.INDEPENDENT);\n+      projectAreaGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"))),\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"))),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\"))\n+      ));\n+\n+      buildingsGroupLayer = new GroupLayer();\n+      buildingsGroupLayer.setName(\"Buildings group\");\n+      buildingsGroupLayer.setVisibilityMode(GroupVisibilityMode.EXCLUSIVE);\n+      buildingsGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\")),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\"))\n+      ));\n+\n+      // load the group layers\n+      projectAreaGroupLayer.loadAsync();\n+      buildingsGroupLayer.loadAsync();\n+\n+      // Display an alert if the child layers in the group layers fail to load\n+      projectAreaGroupLayer.getLayers().forEach(layer ->\n+        layer.addDoneLoadingListener(() -> {\n+          if (layer.getLoadStatus() == LoadStatus.LOADED) {\n+            // zoom to the extent of the project area group layer when the child layers are loaded\n+            sceneView.setViewpointCamera(new Camera(projectAreaGroupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+          } else new Alert(Alert.AlertType.ERROR, \"Layer failed to load:\\n\" + layer.getLoadError().getCause().getMessage()).show();\n+        })\n+      );\n+\n+      buildingsGroupLayer.getLayers().forEach(layer ->\n+        layer.addDoneLoadingListener(() -> {\n+          if (layer.getLoadStatus() != LoadStatus.LOADED) {\n+            new Alert(Alert.AlertType.ERROR, \"Layer failed to load:\\n\" + layer.getLoadError().getCause().getMessage()).show();\n           }\n         })\n       );\n \n+      // add the group layers to the scene operational layers", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxNDk0MA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520814940", "bodyText": "from a workflow order perspective, let's move this up after the buildingsGroupsLayer set up, and before the layer is done loading to set the viewpoint camera.", "author": "Rachael-E", "createdAt": "2020-11-10T19:19:07Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,63 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers\n+      projectAreaGroupLayer = new GroupLayer();\n+      projectAreaGroupLayer.setName(\"Project area group\");\n+      projectAreaGroupLayer.setVisibilityMode(GroupVisibilityMode.INDEPENDENT);\n+      projectAreaGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"))),\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"))),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\"))\n+      ));\n+\n+      buildingsGroupLayer = new GroupLayer();\n+      buildingsGroupLayer.setName(\"Buildings group\");\n+      buildingsGroupLayer.setVisibilityMode(GroupVisibilityMode.EXCLUSIVE);\n+      buildingsGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\")),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\"))\n+      ));\n+\n+      // load the group layers\n+      projectAreaGroupLayer.loadAsync();\n+      buildingsGroupLayer.loadAsync();\n+\n+      // Display an alert if the child layers in the group layers fail to load\n+      projectAreaGroupLayer.getLayers().forEach(layer ->\n+        layer.addDoneLoadingListener(() -> {\n+          if (layer.getLoadStatus() == LoadStatus.LOADED) {\n+            // zoom to the extent of the project area group layer when the child layers are loaded\n+            sceneView.setViewpointCamera(new Camera(projectAreaGroupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+          } else new Alert(Alert.AlertType.ERROR, \"Layer failed to load:\\n\" + layer.getLoadError().getCause().getMessage()).show();\n+        })\n+      );\n+\n+      buildingsGroupLayer.getLayers().forEach(layer ->\n+        layer.addDoneLoadingListener(() -> {\n+          if (layer.getLoadStatus() != LoadStatus.LOADED) {\n+            new Alert(Alert.AlertType.ERROR, \"Layer failed to load:\\n\" + layer.getLoadError().getCause().getMessage()).show();\n           }\n         })\n       );\n \n+      // add the group layers to the scene operational layers\n+      scene.getOperationalLayers().addAll(Arrays.asList(projectAreaGroupLayer, buildingsGroupLayer));\n+", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxNTkyMw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r520815923", "bodyText": "I think we can add the alert into buildLayersView where it's already looping through all the layers in the sample anyway and saves us repeating some code. If that doesn't work out, perhaps an additional method to save repeating the code?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      if (layer.getLoadStatus() == LoadStatus.LOADED) {\n          \n          \n            \n                        // zoom to the extent of the project area group layer when the child layers are loaded\n          \n          \n            \n                        sceneView.setViewpointCamera(new Camera(projectAreaGroupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n          \n          \n            \n                      } else new Alert(Alert.AlertType.ERROR, \"Layer failed to load:\\n\" + layer.getLoadError().getCause().getMessage()).show();\n          \n          \n            \n                    })\n          \n          \n            \n                  );\n          \n          \n            \n            \n          \n          \n            \n                  buildingsGroupLayer.getLayers().forEach(layer ->\n          \n          \n            \n                    layer.addDoneLoadingListener(() -> {\n          \n          \n            \n                      if (layer.getLoadStatus() != LoadStatus.LOADED) {\n          \n          \n            \n                        new Alert(Alert.AlertType.ERROR, \"Layer failed to load:\\n\" + layer.getLoadError().getCause().getMessage()).show();\n          \n          \n            \n                      }\n          \n          \n            \n                    })\n          \n          \n            \n                  );\n          \n          \n            \n                  // zoom to the extent of the group layer when the child layers are loaded\n          \n          \n            \n                  projectAreaGroupLayer.getLayers().forEach(childLayer ->\n          \n          \n            \n                    childLayer.addDoneLoadingListener(() -> {\n          \n          \n            \n                      if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n          \n          \n            \n                        // zoom to the extent of the project area group layer when the child layers are loaded\n          \n          \n            \n                        sceneView.setViewpointCamera(new Camera(projectAreaGroupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n          \n          \n            \n                      }\n          \n          \n            \n                    })\n          \n          \n            \n                  );", "author": "Rachael-E", "createdAt": "2020-11-10T19:20:44Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -78,40 +82,63 @@ public void start(Stage stage) {\n       surface.getElevationSources().add(new ArcGISTiledElevationSource(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"));\n       scene.setBaseSurface(surface);\n \n-      // create different types of layers\n-      ArcGISSceneLayer devABuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devBBuildings = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\");\n-      ArcGISSceneLayer devATrees = new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\");\n-      FeatureLayer devAPathways = new FeatureLayer(new ServiceFeatureTable(\" https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"));\n-      FeatureLayer devProjectArea = new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"));\n-\n-      // create a group layer from scratch by adding the layers as children\n-      groupLayer = new GroupLayer();\n-      groupLayer.setName(\"Group: Dev A\");\n-      groupLayer.getLayers().addAll(Arrays.asList(devATrees, devAPathways, devABuildings));\n-\n-      // add the group layer and other layers to the scene as operational layers\n-      scene.getOperationalLayers().addAll(Arrays.asList(groupLayer, devBBuildings, devProjectArea));\n-\n-      // zoom to the extent of the group layer when the child layers are loaded\n-      groupLayer.getLayers().forEach(childLayer ->\n-        childLayer.addDoneLoadingListener(() -> {\n-          if (childLayer.getLoadStatus() == LoadStatus.LOADED) {\n-            sceneView.setViewpointCamera(new Camera(groupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+      // create two group layers, set the visibility modes and add layers\n+      projectAreaGroupLayer = new GroupLayer();\n+      projectAreaGroupLayer.setName(\"Project area group\");\n+      projectAreaGroupLayer.setVisibilityMode(GroupVisibilityMode.INDEPENDENT);\n+      projectAreaGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevelopmentProjectArea/FeatureServer/0\"))),\n+        (new FeatureLayer(new ServiceFeatureTable(\"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Pathways/FeatureServer/1\"))),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_Trees/SceneServer\"))\n+      ));\n+\n+      buildingsGroupLayer = new GroupLayer();\n+      buildingsGroupLayer.setName(\"Buildings group\");\n+      buildingsGroupLayer.setVisibilityMode(GroupVisibilityMode.EXCLUSIVE);\n+      buildingsGroupLayer.getLayers().addAll(Arrays.asList(\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevA_BuildingShells/SceneServer\")),\n+        (new ArcGISSceneLayer(\"https://tiles.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/DevB_BuildingShells/SceneServer\"))\n+      ));\n+\n+      // load the group layers\n+      projectAreaGroupLayer.loadAsync();\n+      buildingsGroupLayer.loadAsync();\n+\n+      // Display an alert if the child layers in the group layers fail to load\n+      projectAreaGroupLayer.getLayers().forEach(layer ->\n+        layer.addDoneLoadingListener(() -> {\n+          if (layer.getLoadStatus() == LoadStatus.LOADED) {\n+            // zoom to the extent of the project area group layer when the child layers are loaded\n+            sceneView.setViewpointCamera(new Camera(projectAreaGroupLayer.getFullExtent().getCenter(), 700, 0, 60, 0));\n+          } else new Alert(Alert.AlertType.ERROR, \"Layer failed to load:\\n\" + layer.getLoadError().getCause().getMessage()).show();\n+        })\n+      );\n+\n+      buildingsGroupLayer.getLayers().forEach(layer ->\n+        layer.addDoneLoadingListener(() -> {\n+          if (layer.getLoadStatus() != LoadStatus.LOADED) {\n+            new Alert(Alert.AlertType.ERROR, \"Layer failed to load:\\n\" + layer.getLoadError().getCause().getMessage()).show();\n           }\n         })\n       );", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzAxMzMyMQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r523013321", "bodyText": "Added this and tested and it works well \ud83d\udc4d", "author": "jenmerritt", "createdAt": "2020-11-13T15:13:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxNTkyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjkzNDQyNA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/581#discussion_r522934424", "bodyText": "reinstate the loadAsync after this line: as discussed with Gunther, for the current sample workflow this is required although it isn't best practice. We can update the design later.", "author": "Rachael-E", "createdAt": "2020-11-13T12:59:10Z", "path": "group_layers/group-layers/src/main/java/com/esri/samples/group_layers/GroupLayersSample.java", "diffHunk": "@@ -132,17 +159,18 @@ public void start(Stage stage) {\n    */\n   private void buildLayersView(TreeItem<Layer> parentItem, List<Layer> operationalLayers) {\n     for (Layer layer : operationalLayers) {\n-      // load each layer before adding to ensure all metadata is ready for display\n-      layer.loadAsync();\n+      // check the layer has loaded before creating UI", "originalCommit": "7df627b8f92bdbf2bffb9dfcc007a932d2495b02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "09393d3c19008ca4ecce1f432988d3976546fddf", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/09393d3c19008ca4ecce1f432988d3976546fddf", "message": "code review amendments", "committedDate": "2020-11-13T15:13:31Z", "type": "commit"}, {"oid": "40d3930baa9294ddadca3cb7bb24e31a30ded1c6", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/40d3930baa9294ddadca3cb7bb24e31a30ded1c6", "message": "update readme and metadata", "committedDate": "2020-11-13T15:17:26Z", "type": "commit"}, {"oid": "b3fffce8fe40132b61b3d38597812657ab27cc29", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/b3fffce8fe40132b61b3d38597812657ab27cc29", "message": "add copyright to cell class", "committedDate": "2020-11-16T09:26:47Z", "type": "commit"}]}