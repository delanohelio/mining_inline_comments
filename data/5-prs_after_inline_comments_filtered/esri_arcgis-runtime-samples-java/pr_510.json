{"pr_number": 510, "pr_title": "Multiple samples - Add done loading listeners to avoid silent failure", "pr_createdAt": "2020-05-05T14:16:44Z", "pr_url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510", "timeline": [{"oid": "56b189fa58c14ffcf9947ddf7a12b2f666c8c8c0", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/56b189fa58c14ffcf9947ddf7a12b2f666c8c8c0", "message": "add done loading listeners to avoid silent failure", "committedDate": "2020-05-05T13:56:17Z", "type": "commit"}, {"oid": "ee470aa80e50776fd9f3b1e556d0a90fac71bf57", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/ee470aa80e50776fd9f3b1e556d0a90fac71bf57", "message": "update comments and remove .loadAsync()", "committedDate": "2020-05-06T08:47:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU5Mzc5Mw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r423593793", "bodyText": "just a heads up from https://github.com/Esri/arcgis-runtime-samples-java/pull/511/files which is still to be approved: when putting loadables as member variables to protect against garbage collection, I was adding the following comment to make it clear why we did this. This comment may or may not be agreed on but wanted to doc it here if it's approved so we can add the same comment here for the loadables.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private FeatureLayer riverFeatureLayer;\n          \n          \n            \n            // keeps loadables in scope to avoid garbage collection\n          \n          \n            \n                private FeatureLayer riverFeatureLayer;", "author": "Rachael-E", "createdAt": "2020-05-12T09:27:59Z", "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -18,19 +18,23 @@\n \n import javafx.application.Application;\n import javafx.scene.Scene;\n+import javafx.scene.control.Alert;\n import javafx.scene.layout.StackPane;\n import javafx.stage.Stage;\n \n import com.esri.arcgisruntime.data.ServiceFeatureTable;\n import com.esri.arcgisruntime.layers.AnnotationLayer;\n import com.esri.arcgisruntime.layers.FeatureLayer;\n+import com.esri.arcgisruntime.loadable.LoadStatus;\n import com.esri.arcgisruntime.mapping.ArcGISMap;\n import com.esri.arcgisruntime.mapping.Basemap;\n import com.esri.arcgisruntime.mapping.view.MapView;\n \n public class DisplayAnnotationSample extends Application {\n \n     private MapView mapView;\n+    private FeatureLayer riverFeatureLayer;", "originalCommit": "ee470aa80e50776fd9f3b1e556d0a90fac71bf57", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI5OTUwOA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r424299508", "bodyText": "Definitely need to add the same comment in these samples! \ud83d\udc4d", "author": "JonLavi", "createdAt": "2020-05-13T09:26:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU5Mzc5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY0MDI5MQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r423640291", "bodyText": "I'm thinking a slight rewording of the comments here and throughout the PR, what do you think?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // check that the feature layer has loaded\n          \n          \n            \n                        // this event gets triggered asynchronously when the feature layer that has been added to the map is loaded\n          \n          \n            \n                        // check that the feature layer has loaded by adding a done loading listener (triggered asynchronously)\n          \n          \n            \n                        // check for the load status of the layer and if it hasn't loaded, report an error", "author": "Rachael-E", "createdAt": "2020-05-12T10:49:32Z", "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -54,19 +58,35 @@ public void start(Stage stage) {\n             mapView.setMap(map);\n \n             // create a feature layer from a feature service\n-            FeatureLayer riverFeatureLayer = new FeatureLayer(new ServiceFeatureTable(\"https://services1.arcgis.com/6677msI40mnLuuLr/arcgis/rest/services/East_Lothian_Rivers/FeatureServer/0\"));\n+            riverFeatureLayer = new FeatureLayer(new ServiceFeatureTable(\"https://services1.arcgis.com/6677msI40mnLuuLr/arcgis/rest/services/East_Lothian_Rivers/FeatureServer/0\"));\n \n             // add the feature layer to the map\n             map.getOperationalLayers().add(riverFeatureLayer);\n \n             // create an annotation layer from a feature service\n-            AnnotationLayer annotationLayer = new AnnotationLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/RiversAnnotation/FeatureServer/0\");\n+            annotationLayer = new AnnotationLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/RiversAnnotation/FeatureServer/0\");\n \n             // add the annotation layer to the map\n             map.getOperationalLayers().add(annotationLayer);\n \n+            // check that the feature layer has loaded\n+            // this event gets triggered asynchronously when the feature layer that has been added to the map is loaded", "originalCommit": "ee470aa80e50776fd9f3b1e556d0a90fac71bf57", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMwMjA3Mg==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r424302072", "bodyText": "I'm having some problems with this wording, because to me it reads as if the action of adding the listener is what's triggered asynchronously. Also the repetition of 'check' in the beginning bugs me a bit. How about:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // check that the feature layer has loaded\n          \n          \n            \n                        // this event gets triggered asynchronously when the feature layer that has been added to the map is loaded\n          \n          \n            \n                        // add a done loading listener, with a runnable that is triggered asynchronously when the feature layer has loaded\n          \n          \n            \n                        // check for the load status of the layer and if it hasn't loaded, report an error\n          \n      \n    \n    \n  \n\nA bit wordy, but hopefully clearer?", "author": "JonLavi", "createdAt": "2020-05-13T09:30:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY0MDI5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAwMTE3Ng==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r425001176", "bodyText": "@JonLavi yeh I like this wording! Minor change I'd make would be to replace \"gets\" with \"is\", just reads a little better I find.", "author": "Rachael-E", "createdAt": "2020-05-14T09:32:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY0MDI5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY0OTA1OQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r423649059", "bodyText": "we can \"plain english\" this comment a little more\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create a ArcGISMap with the a BasemapType Topographic and set it to the map view\n          \n          \n            \n                  // create an ArcGISMap with the topographic basemap and set it to the map view", "author": "Rachael-E", "createdAt": "2020-05-12T11:06:30Z", "path": "image_layers/map-image-layer-sublayer-visibility/src/main/java/com/esri/samples/map_image_layer_sublayer_visibility/MapImageLayerSublayerVisibilitySample.java", "diffHunk": "@@ -75,27 +74,38 @@ public void start(Stage stage) {\n       controlsVBox.getChildren().addAll(citiesBox, continentsBox, worldBox);\n       controlsVBox.getChildren().forEach(c -> ((CheckBox) c).setSelected(true));\n \n-      // create a ArcGISMap with the a BasemapType Topographic\n+      // create a map view\n+      mapView = new MapView();\n+\n+      // create a ArcGISMap with the a BasemapType Topographic and set it to the map view", "originalCommit": "ee470aa80e50776fd9f3b1e556d0a90fac71bf57", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f2e1d22ebe29fb421af74e2d8875e517cb46656f", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/f2e1d22ebe29fb421af74e2d8875e517cb46656f", "message": "Apply suggestions from code review\n\nCo-authored-by: Rachael Ellen <36415565+Rachael-E@users.noreply.github.com>", "committedDate": "2020-05-13T09:26:43Z", "type": "commit"}, {"oid": "bb8fe808bf5c85267dd6f28f2dfb4c92bfaeb93d", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/bb8fe808bf5c85267dd6f28f2dfb4c92bfaeb93d", "message": "Update ShowLabelsOnLayerSample.java", "committedDate": "2020-05-13T09:31:36Z", "type": "commit"}, {"oid": "7b124c9122bb44f5e78e67e12f2c8b47f6b211b1", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/7b124c9122bb44f5e78e67e12f2c8b47f6b211b1", "message": "Update EditFeatureAttachmentsSample.java", "committedDate": "2020-05-13T09:33:20Z", "type": "commit"}, {"oid": "169b0574549c526eca094f671a2b11cdf1f1f2bd", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/169b0574549c526eca094f671a2b11cdf1f1f2bd", "message": "Update UpdateAttributesSample.java", "committedDate": "2020-05-13T09:35:29Z", "type": "commit"}, {"oid": "0e02cad59a8a9de645216c492514bcf672a9d086", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/0e02cad59a8a9de645216c492514bcf672a9d086", "message": "Update UpdateAttributesSample.java", "committedDate": "2020-05-13T09:36:30Z", "type": "commit"}, {"oid": "a099f765ecf1813820c2447f07aea01f7b13d800", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/a099f765ecf1813820c2447f07aea01f7b13d800", "message": "Update BufferListSample.java", "committedDate": "2020-05-13T09:36:53Z", "type": "commit"}, {"oid": "6ede32eb6b6796b5762190c1ecbc1a3e222ad3c9", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/6ede32eb6b6796b5762190c1ecbc1a3e222ad3c9", "message": "Update MapImageLayerSublayerVisibilitySample.java", "committedDate": "2020-05-13T09:37:44Z", "type": "commit"}, {"oid": "5fcfb59515b093cfdb7fa59eb80d40989b55a1c9", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/5fcfb59515b093cfdb7fa59eb80d40989b55a1c9", "message": "operational layers to local vars", "committedDate": "2020-05-13T09:51:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAwMjU2Mw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r425002563", "bodyText": "with your comment from my garbage collection PR in mind, should we change this to selectedFeature?", "author": "Rachael-E", "createdAt": "2020-05-14T09:35:26Z", "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -53,11 +53,10 @@\n \n public class UpdateAttributesSample extends Application {\n \n+  private ArcGISFeature selected;", "originalCommit": "5fcfb59515b093cfdb7fa59eb80d40989b55a1c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY1MjM1MQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r425652351", "bodyText": "Definitely! Thanks for pointing that out!", "author": "JonLavi", "createdAt": "2020-05-15T08:39:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAwMjU2Mw=="}], "type": "inlineReview"}, {"oid": "32f2b8f651879dc04699169c52ad7a4f2a0889f0", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/32f2b8f651879dc04699169c52ad7a4f2a0889f0", "message": "Apply suggestions from code review", "committedDate": "2020-05-15T08:40:03Z", "type": "commit"}, {"oid": "a6a91af049e785186586774fa92f1e18b6175642", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/a6a91af049e785186586774fa92f1e18b6175642", "message": "update var naming", "committedDate": "2020-05-15T08:43:05Z", "type": "commit"}, {"oid": "029577cdca65d9a83399b9e0620b2bda9449e307", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/029577cdca65d9a83399b9e0620b2bda9449e307", "message": "Update DisplayAnnotationSample.java", "committedDate": "2020-05-15T08:53:51Z", "type": "commit"}, {"oid": "8a36421f40220c06cea04a765df14c422853e2c9", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/8a36421f40220c06cea04a765df14c422853e2c9", "message": "Update ShowLabelsOnLayerSample.java", "committedDate": "2020-05-15T08:54:35Z", "type": "commit"}, {"oid": "069b76a755bc71c048fffd12f62dbdbd270952e2", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/069b76a755bc71c048fffd12f62dbdbd270952e2", "message": "Update EditFeatureAttachmentsSample.java", "committedDate": "2020-05-15T08:55:20Z", "type": "commit"}, {"oid": "6a61d638cf2cb9aa73e7af8f4d57db46b7c68685", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/6a61d638cf2cb9aa73e7af8f4d57db46b7c68685", "message": "Update UpdateAttributesSample.java", "committedDate": "2020-05-15T08:55:53Z", "type": "commit"}, {"oid": "3bcccdc39a418cebbb20bf6f816973c9c6204c6f", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/3bcccdc39a418cebbb20bf6f816973c9c6204c6f", "message": "Update BufferListSample.java", "committedDate": "2020-05-15T08:56:27Z", "type": "commit"}, {"oid": "2f8c12dda1efae2e1b452eca99143b42fbdfeeaf", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/2f8c12dda1efae2e1b452eca99143b42fbdfeeaf", "message": "Update MapImageLayerSublayerVisibilitySample.java", "committedDate": "2020-05-15T08:57:31Z", "type": "commit"}, {"oid": "b11f3632705b495b4308b93d93342761eb4d5c27", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/b11f3632705b495b4308b93d93342761eb4d5c27", "message": "Update RasterRenderingRuleSample.java", "committedDate": "2020-05-15T08:58:50Z", "type": "commit"}, {"oid": "3c7d377ecb4a9b51e95b1959104792195208b533", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/3c7d377ecb4a9b51e95b1959104792195208b533", "message": "member variables", "committedDate": "2020-05-15T10:01:25Z", "type": "commit"}, {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "message": "Merge branch 'done_loading_listeners' of github.com:Esri/arcgis-runtime-samples-java into done_loading_listeners", "committedDate": "2020-05-15T10:01:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NjU0OA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426366548", "bodyText": "too verbose\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n          \n          \n            \n                        // check for the load status of the layer and if it hasn't loaded, report an error\n          \n          \n            \n                        // show alert if layer fails to load", "author": "tschie", "createdAt": "2020-05-18T04:42:39Z", "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -65,8 +67,25 @@ public void start(Stage stage) {\n             // add the annotation layer to the map\n             map.getOperationalLayers().add(annotationLayer);\n \n+            // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+            // check for the load status of the layer and if it hasn't loaded, report an error", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2Njg2OA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426366868", "bodyText": "This is okay, but seems a little overkill for a simple sample. We've had discussions before about omitting some best practices for the sake of brevity/focus. Should get approval from Lucas/Mike before making more of these changes.", "author": "tschie", "createdAt": "2020-05-18T04:44:07Z", "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -65,8 +67,25 @@ public void start(Stage stage) {\n             // add the annotation layer to the map\n             map.getOperationalLayers().add(annotationLayer);\n \n+            // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+            // check for the load status of the layer and if it hasn't loaded, report an error\n+            riverFeatureLayer.addDoneLoadingListener(() -> {\n+                if (riverFeatureLayer.getLoadStatus() != LoadStatus.LOADED) {", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NjkzMA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426366930", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        annotationLayer.addDoneLoadingListener(()->{\n          \n          \n            \n                        annotationLayer.addDoneLoadingListener(() -> {", "author": "tschie", "createdAt": "2020-05-18T04:44:25Z", "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -65,8 +67,25 @@ public void start(Stage stage) {\n             // add the annotation layer to the map\n             map.getOperationalLayers().add(annotationLayer);\n \n+            // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+            // check for the load status of the layer and if it hasn't loaded, report an error\n+            riverFeatureLayer.addDoneLoadingListener(() -> {\n+                if (riverFeatureLayer.getLoadStatus() != LoadStatus.LOADED) {\n+                    new Alert(Alert.AlertType.ERROR, \"Error loading Feature Layer.\").show();\n+                }\n+            });\n+\n+            // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+            // check for the load status of the layer and if it hasn't loaded, report an error\n+            annotationLayer.addDoneLoadingListener(()->{", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NzcwMQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426367701", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create a feature layer from service feature table\n          \n          \n            \n                  // create a feature layer with the feature table", "author": "tschie", "createdAt": "2020-05-18T04:47:22Z", "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -118,21 +114,30 @@ public void start(Stage stage) {\n       // add damage type label and comboBox to the control panel\n       controlsVBox.getChildren().addAll(typeDamageLabel, comboBox);\n \n-      // create a map with streets basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n-\n-      // create view for this ArcGISMap\n+      // create a map view\n       mapView = new MapView();\n \n+      // create a map with streets basemap and set it to the map view\n+      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n+      mapView.setMap(map);\n+\n       // create service feature table from URL\n-      featureTable = new ServiceFeatureTable(FEATURE_LAYER_URL);\n+      featureTable = new ServiceFeatureTable(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/DamageAssessment/FeatureServer/0\");\n \n-      // create a feature layer from table\n-      featureLayer = new FeatureLayer(featureTable);\n+      // create a feature layer from service feature table", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NzczOQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426367739", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // add the feature layer to the ArcGISMap\n          \n          \n            \n                  // add the feature layer to the map", "author": "tschie", "createdAt": "2020-05-18T04:47:34Z", "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -118,21 +114,30 @@ public void start(Stage stage) {\n       // add damage type label and comboBox to the control panel\n       controlsVBox.getChildren().addAll(typeDamageLabel, comboBox);\n \n-      // create a map with streets basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n-\n-      // create view for this ArcGISMap\n+      // create a map view\n       mapView = new MapView();\n \n+      // create a map with streets basemap and set it to the map view\n+      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n+      mapView.setMap(map);\n+\n       // create service feature table from URL\n-      featureTable = new ServiceFeatureTable(FEATURE_LAYER_URL);\n+      featureTable = new ServiceFeatureTable(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/DamageAssessment/FeatureServer/0\");\n \n-      // create a feature layer from table\n-      featureLayer = new FeatureLayer(featureTable);\n+      // create a feature layer from service feature table\n+      FeatureLayer featureLayer = new FeatureLayer(featureTable);\n \n-      // add the layer to the ArcGISMap\n+      // add the feature layer to the ArcGISMap", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NzgwMQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426367801", "bodyText": "too verbose", "author": "tschie", "createdAt": "2020-05-18T04:47:44Z", "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -118,21 +114,30 @@ public void start(Stage stage) {\n       // add damage type label and comboBox to the control panel\n       controlsVBox.getChildren().addAll(typeDamageLabel, comboBox);\n \n-      // create a map with streets basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n-\n-      // create view for this ArcGISMap\n+      // create a map view\n       mapView = new MapView();\n \n+      // create a map with streets basemap and set it to the map view\n+      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n+      mapView.setMap(map);\n+\n       // create service feature table from URL\n-      featureTable = new ServiceFeatureTable(FEATURE_LAYER_URL);\n+      featureTable = new ServiceFeatureTable(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/DamageAssessment/FeatureServer/0\");\n \n-      // create a feature layer from table\n-      featureLayer = new FeatureLayer(featureTable);\n+      // create a feature layer from service feature table\n+      FeatureLayer featureLayer = new FeatureLayer(featureTable);\n \n-      // add the layer to the ArcGISMap\n+      // add the feature layer to the ArcGISMap\n       map.getOperationalLayers().add(featureLayer);\n \n+      // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2ODAwMA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426368000", "bodyText": "Perhaps identifiedFeature would be a better name? Looks odd to select the selected feature.", "author": "tschie", "createdAt": "2020-05-18T04:48:43Z", "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -153,12 +158,12 @@ public void start(Stage stage) {\n                 GeoElement element = identified.get(0);\n                 // get selected feature\n                 if (element instanceof ArcGISFeature) {\n-                  selected = (ArcGISFeature) element;\n-                  featureLayer.selectFeature(selected);\n-                  selected.loadAsync();\n-                  selected.addDoneLoadingListener(() -> {\n-                    if (selected.getLoadStatus() == LoadStatus.LOADED) {\n-                      comboBox.getSelectionModel().select((String) selected.getAttributes().get(\"typdamage\"));\n+                  selectedFeature = (ArcGISFeature) element;\n+                  featureLayer.selectFeature(selectedFeature);", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2ODI4NA==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426368284", "bodyText": "I realize there wasn't a comment before, but we should really have one for why we changed the opacity", "author": "tschie", "createdAt": "2020-05-18T04:50:00Z", "path": "image_layers/map-image-layer-sublayer-visibility/src/main/java/com/esri/samples/map_image_layer_sublayer_visibility/MapImageLayerSublayerVisibilitySample.java", "diffHunk": "@@ -75,27 +73,39 @@ public void start(Stage stage) {\n       controlsVBox.getChildren().addAll(citiesBox, continentsBox, worldBox);\n       controlsVBox.getChildren().forEach(c -> ((CheckBox) c).setSelected(true));\n \n-      // create a ArcGISMap with the a BasemapType Topographic\n+      // create a map view\n+      mapView = new MapView();\n+\n+      // create an ArcGISMap with the topographic basemap and set it to the map view\n       ArcGISMap map = new ArcGISMap(Basemap.Type.TOPOGRAPHIC, 48.354406, -99.998267, 2);\n+      mapView.setMap(map);\n \n       // create a Image Layer with dynamically generated ArcGISMap images\n-      ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(WORLD_CITIES_SERVICE);\n-      imageLayer.setOpacity(0.7f);\n+      ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/SampleWorldCities/MapServer\");\n \n       // add world cities layers as ArcGISMap operational layer\n       map.getOperationalLayers().add(imageLayer);\n \n-      // set the ArcGISMap to be displayed in this view\n-      mapView = new MapView();\n-      mapView.setMap(map);\n+      // set the image layer's opacity", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2ODU1NQ==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426368555", "bodyText": "if only we had a visible property to bind to.... @mbcoder \ud83d\ude1c", "author": "tschie", "createdAt": "2020-05-18T04:51:08Z", "path": "image_layers/map-image-layer-sublayer-visibility/src/main/java/com/esri/samples/map_image_layer_sublayer_visibility/MapImageLayerSublayerVisibilitySample.java", "diffHunk": "@@ -75,27 +73,39 @@ public void start(Stage stage) {\n       controlsVBox.getChildren().addAll(citiesBox, continentsBox, worldBox);\n       controlsVBox.getChildren().forEach(c -> ((CheckBox) c).setSelected(true));\n \n-      // create a ArcGISMap with the a BasemapType Topographic\n+      // create a map view\n+      mapView = new MapView();\n+\n+      // create an ArcGISMap with the topographic basemap and set it to the map view\n       ArcGISMap map = new ArcGISMap(Basemap.Type.TOPOGRAPHIC, 48.354406, -99.998267, 2);\n+      mapView.setMap(map);\n \n       // create a Image Layer with dynamically generated ArcGISMap images\n-      ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(WORLD_CITIES_SERVICE);\n-      imageLayer.setOpacity(0.7f);\n+      ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/SampleWorldCities/MapServer\");\n \n       // add world cities layers as ArcGISMap operational layer\n       map.getOperationalLayers().add(imageLayer);\n \n-      // set the ArcGISMap to be displayed in this view\n-      mapView = new MapView();\n-      mapView.setMap(map);\n+      // set the image layer's opacity\n+      imageLayer.setOpacity(0.7f);\n+\n+      // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+      // check for the load status of the layer and proceed to get its sublayers. If it hasn't loaded, report an error\n+      imageLayer.addDoneLoadingListener(() -> {\n+        if (imageLayer.getLoadStatus() == LoadStatus.LOADED) {\n+\n+          // get the layers from the ArcGISMap image layer\n+          SublayerList layers = imageLayer.getSublayers();\n \n-      // get the layers from the ArcGISMap image layer\n-      SublayerList layers = imageLayer.getSublayers();\n+          // handle sub layer selection\n+          citiesBox.selectedProperty().addListener(e -> layers.get(0).setVisible(citiesBox.isSelected()));", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2ODYzNw==", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426368637", "bodyText": "too verbose", "author": "tschie", "createdAt": "2020-05-18T04:51:31Z", "path": "raster/raster-rendering-rule/src/main/java/com/esri/samples/raster_rendering_rule/RasterRenderingRuleSample.java", "diffHunk": "@@ -107,11 +107,12 @@ public RenderingRuleInfo fromString(String string) {\n \n       // create an Image Service Raster as a raster layer and add to map\n       final String ImageServiceRasterUri = \"https://sampleserver6.arcgisonline.com/arcgis/rest/services/CharlotteLAS/ImageServer\";\n-      final ImageServiceRaster imageServiceRaster = new ImageServiceRaster(ImageServiceRasterUri);\n-      final RasterLayer imageRasterLayer = new RasterLayer(imageServiceRaster);\n+      ImageServiceRaster imageServiceRaster = new ImageServiceRaster(ImageServiceRasterUri);\n+      RasterLayer imageRasterLayer = new RasterLayer(imageServiceRaster);\n       map.getOperationalLayers().add(imageRasterLayer);\n \n-      // add event listener to loading of Image Service Raster and wait until loaded\n+      // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded", "originalCommit": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "866ccb31d9f5741d12ed802f12577f3e6546b461", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/866ccb31d9f5741d12ed802f12577f3e6546b461", "message": "Update ShowLabelsOnLayerSample.java", "committedDate": "2020-05-25T09:32:42Z", "type": "commit"}, {"oid": "a76e21d7b25dc1eb74b95196ce50682de061cf70", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/a76e21d7b25dc1eb74b95196ce50682de061cf70", "message": "Update EditFeatureAttachmentsSample.java", "committedDate": "2020-05-25T09:33:17Z", "type": "commit"}, {"oid": "a37d89d8fbf4fc6b3e81bdc07dfc6959be9d5d78", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/a37d89d8fbf4fc6b3e81bdc07dfc6959be9d5d78", "message": "Update RasterRenderingRuleSample.java", "committedDate": "2020-05-25T09:34:03Z", "type": "commit"}, {"oid": "e60f26f617885bb57101d5b873711bf4792b9984", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/e60f26f617885bb57101d5b873711bf4792b9984", "message": "Update MapImageLayerSublayerVisibilitySample.java", "committedDate": "2020-05-25T09:34:52Z", "type": "commit"}, {"oid": "55892140dcfd2ad4fd446cc67e3092d244ba43ca", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/55892140dcfd2ad4fd446cc67e3092d244ba43ca", "message": "Update BufferListSample.java", "committedDate": "2020-05-25T09:35:31Z", "type": "commit"}, {"oid": "8e1b890adbf2a460858dc7921a96eeaea746cf4d", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/8e1b890adbf2a460858dc7921a96eeaea746cf4d", "message": "Update UpdateAttributesSample.java", "committedDate": "2020-05-25T09:36:12Z", "type": "commit"}, {"oid": "e1e3c9e224dc4cf6ac5e367d52f6402a78d207ec", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/e1e3c9e224dc4cf6ac5e367d52f6402a78d207ec", "message": "Apply suggestions from code review\n\nCo-authored-by: Tyler Schiewe <tyler.schiewe@gmail.com>", "committedDate": "2020-05-25T09:37:11Z", "type": "commit"}, {"oid": "db58e0459bd18e77130ccbb3e6d4ff07526f7ab3", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/db58e0459bd18e77130ccbb3e6d4ff07526f7ab3", "message": "var naming", "committedDate": "2020-05-25T09:38:38Z", "type": "commit"}, {"oid": "0011f27564f2c302a35b60a557a0fb86526edc0a", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/0011f27564f2c302a35b60a557a0fb86526edc0a", "message": "Merge branch 'done_loading_listeners' of github.com:Esri/arcgis-runtime-samples-java into done_loading_listeners", "committedDate": "2020-05-25T09:39:18Z", "type": "commit"}, {"oid": "cd9c1248e3d7363884580d451f558951b18d4002", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/cd9c1248e3d7363884580d451f558951b18d4002", "message": "comments", "committedDate": "2020-05-25T09:41:22Z", "type": "commit"}, {"oid": "c1c3f73ef5719be292e91e1f7c97d64241fb0c9b", "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/c1c3f73ef5719be292e91e1f7c97d64241fb0c9b", "message": "Merge remote-tracking branch 'origin/master' into done_loading_listeners", "committedDate": "2020-05-25T09:43:17Z", "type": "commit"}]}