{"pr_number": 12822, "pr_title": "Add oidc-wiremock to CI Security2 category", "pr_createdAt": "2020-10-20T10:47:04Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/12822", "timeline": [{"oid": "12970062f8898634ce19e569ba7cb4943c9963a4", "url": "https://github.com/quarkusio/quarkus/commit/12970062f8898634ce19e569ba7cb4943c9963a4", "message": "Add oidc-wiremock to CI Security2 category", "committedDate": "2020-10-20T12:30:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ3MjI4MA==", "url": "https://github.com/quarkusio/quarkus/pull/12822#discussion_r508472280", "bodyText": "Another option would be to use server.getOptions().portNumber()", "author": "gastaldi", "createdAt": "2020-10-20T12:49:53Z", "path": "integration-tests/oidc-wiremock/src/test/java/io/quarkus/it/keycloak/KeycloakTestResource.java", "diffHunk": "@@ -22,24 +21,23 @@\n     @Override\n     public Map<String, String> start() {\n \n-        server = new WireMockServer(options().port(8180));\n+        server = new WireMockServer();\n         server.start();\n \n-        WireMock.configureFor(8180);\n         WireMock.stubFor(\n                 get(urlEqualTo(\"/auth/realms/quarkus/.well-known/openid-configuration\"))\n                         .willReturn(aResponse()\n                                 .withHeader(\"Content-Type\", MediaType.APPLICATION_JSON)\n                                 .withBody(\"{\\n\" +\n-                                        \"    \\\"authorization_endpoint\\\": \\\"http://localhost:8180/authenticate\\\",\\n\" +\n-                                        \"    \\\"end_session_endpoint\\\": \\\"http://localhost:8180/logout\\\",\\n\" +\n+                                        \"    \\\"authorization_endpoint\\\": \\\"http://localhost:8080/authenticate\\\",\\n\" +", "originalCommit": "12970062f8898634ce19e569ba7cb4943c9963a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUwNzk3Ng==", "url": "https://github.com/quarkusio/quarkus/pull/12822#discussion_r508507976", "bodyText": "@gastaldi @machi1990 it also has server.baseUrl() so I've used it and also removed the redundant discovery values which are not needed for the mock testing; it should be very easy for the users to mock the bearer token authentication; code flow would have something more similar to the original, CC @cemnura", "author": "sberyozkin", "createdAt": "2020-10-20T13:35:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ3MjI4MA=="}], "type": "inlineReview"}, {"oid": "3f1fa17ca9f6d9ad8d55b1454226721adf081f8a", "url": "https://github.com/quarkusio/quarkus/commit/3f1fa17ca9f6d9ad8d55b1454226721adf081f8a", "message": "Add oidc-wiremock to CI Security2 category", "committedDate": "2020-10-20T13:33:25Z", "type": "forcePushed"}, {"oid": "4b7d6c80de88c1402b02d8e9ea9debfa2e2f6457", "url": "https://github.com/quarkusio/quarkus/commit/4b7d6c80de88c1402b02d8e9ea9debfa2e2f6457", "message": "Add oidc-wiremock to CI Security2 category", "committedDate": "2020-10-20T13:44:23Z", "type": "commit"}, {"oid": "4b7d6c80de88c1402b02d8e9ea9debfa2e2f6457", "url": "https://github.com/quarkusio/quarkus/commit/4b7d6c80de88c1402b02d8e9ea9debfa2e2f6457", "message": "Add oidc-wiremock to CI Security2 category", "committedDate": "2020-10-20T13:44:23Z", "type": "forcePushed"}]}