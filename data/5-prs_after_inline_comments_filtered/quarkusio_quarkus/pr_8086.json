{"pr_number": 8086, "pr_title": "ArC - fix post construct invocation for hierarchical cases with beans from different packages", "pr_createdAt": "2020-03-23T15:32:17Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/8086", "timeline": [{"oid": "e5cd3b615d819ffc9abc3c496d5e61a12f620d6e", "url": "https://github.com/quarkusio/quarkus/commit/e5cd3b615d819ffc9abc3c496d5e61a12f620d6e", "message": "ArC - fix post construct invocation for hierarchical cases with beans from different packages.", "committedDate": "2020-03-23T15:17:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU0MjQwNQ==", "url": "https://github.com/quarkusio/quarkus/pull/8086#discussion_r396542405", "bodyText": "This only logs private members in the code. Do we want some logging for the pack-private plus package split case too? Because effectively both scenarios force us into reflection which is something we want to avoid, right?", "author": "manovotn", "createdAt": "2020-03-23T15:34:24Z", "path": "independent-projects/arc/processor/src/main/java/io/quarkus/arc/processor/BeanGenerator.java", "diffHunk": "@@ -1431,10 +1431,12 @@ void implementCreateForClassBean(ClassOutput classOutput, ClassCreator beanCreat\n                     DotNames.POST_CONSTRUCT,\n                     bean.getDeployment().getIndex());\n             for (MethodInfo callback : postConstructCallbacks) {\n-                if (Modifier.isPrivate(callback.flags())) {\n-                    privateMembers.add(isApplicationClass,\n-                            String.format(\"@PostConstruct callback %s#%s()\", callback.declaringClass().name(),\n-                                    callback.name()));\n+                if (isReflectionFallbackNeeded(callback, targetPackage)) {\n+                    if (Modifier.isPrivate(callback.flags())) {\n+                        privateMembers.add(isApplicationClass,", "originalCommit": "e5cd3b615d819ffc9abc3c496d5e61a12f620d6e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU2MDc0Ng==", "url": "https://github.com/quarkusio/quarkus/pull/8086#discussion_r396560746", "bodyText": "I'm not sure. We could log something but the message would have to be quite \"elaborate\".", "author": "mkouba", "createdAt": "2020-03-23T15:57:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU0MjQwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc5MDQ3MQ==", "url": "https://github.com/quarkusio/quarkus/pull/8086#discussion_r396790471", "bodyText": "Yeah and the detection too (since this can happen on multiple places), not sure it's worth it.", "author": "manovotn", "createdAt": "2020-03-23T22:17:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU0MjQwNQ=="}], "type": "inlineReview"}]}