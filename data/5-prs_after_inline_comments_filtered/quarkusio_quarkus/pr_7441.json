{"pr_number": 7441, "pr_title": "Gradle: prefer local deps as JARs when building runnable JARs", "pr_createdAt": "2020-02-26T14:28:54Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/7441", "timeline": [{"oid": "ff351a1551a0c230ebcc287d764140732aff9af2", "url": "https://github.com/quarkusio/quarkus/commit/ff351a1551a0c230ebcc287d764140732aff9af2", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.", "committedDate": "2020-02-28T14:57:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc1OTI5Nw==", "url": "https://github.com/quarkusio/quarkus/pull/7441#discussion_r385759297", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertThat(Files.exists(commonLibs)).isEqualTo(true);\n          \n          \n            \n                    assertThat(commonLibs).exists();", "author": "gastaldi", "createdAt": "2020-02-28T15:29:31Z", "path": "devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java", "diffHunk": "@@ -0,0 +1,48 @@\n+package io.quarkus.gradle;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileNotFoundException;\n+import java.io.FileOutputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Properties;\n+\n+import org.gradle.testkit.runner.BuildResult;\n+import org.gradle.testkit.runner.GradleRunner;\n+import org.gradle.testkit.runner.TaskOutcome;\n+\n+import org.junit.jupiter.api.Test;\n+\n+\n+public class BasicMultiModuleTest extends QuarkusGradleTestBase {\n+\n+    @Test\n+    public void testBasicMultiModuleBuild() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"basic-multi-module-project\");\n+        \n+        BuildResult build = GradleRunner.create()\n+                .forwardOutput()\n+                .withPluginClasspath()\n+                .withArguments(arguments(\":application:quarkusBuild\"))\n+                .withProjectDir(projectDir)\n+                .build();\n+        \n+        final Path commonLibs = projectDir.toPath().resolve(\"common\").resolve(\"build\").resolve(\"libs\");\n+        assertThat(Files.exists(commonLibs)).isEqualTo(true);", "originalCommit": "ff351a1551a0c230ebcc287d764140732aff9af2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc3MTcwNw==", "url": "https://github.com/quarkusio/quarkus/pull/7441#discussion_r385771707", "bodyText": "Same as above", "author": "gastaldi", "createdAt": "2020-02-28T15:49:40Z", "path": "devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java", "diffHunk": "@@ -0,0 +1,48 @@\n+package io.quarkus.gradle;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileNotFoundException;\n+import java.io.FileOutputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Properties;\n+\n+import org.gradle.testkit.runner.BuildResult;\n+import org.gradle.testkit.runner.GradleRunner;\n+import org.gradle.testkit.runner.TaskOutcome;\n+\n+import org.junit.jupiter.api.Test;\n+\n+\n+public class BasicMultiModuleTest extends QuarkusGradleTestBase {\n+\n+    @Test\n+    public void testBasicMultiModuleBuild() throws Exception {\n+\n+        final File projectDir = getProjectDir(\"basic-multi-module-project\");\n+        \n+        BuildResult build = GradleRunner.create()\n+                .forwardOutput()\n+                .withPluginClasspath()\n+                .withArguments(arguments(\":application:quarkusBuild\"))\n+                .withProjectDir(projectDir)\n+                .build();\n+        \n+        final Path commonLibs = projectDir.toPath().resolve(\"common\").resolve(\"build\").resolve(\"libs\");\n+        assertThat(commonLibs).exists();\n+        assertThat(Files.exists(commonLibs.resolve(\"common.jar\"))).isEqualTo(true);", "originalCommit": "7fa012fb4c55c0eb0dd1ee715732c1bc1a9c2587", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c03b2758b807b6769b6952126280ecc825888fda", "url": "https://github.com/quarkusio/quarkus/commit/c03b2758b807b6769b6952126280ecc825888fda", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>", "committedDate": "2020-02-28T16:41:46Z", "type": "forcePushed"}, {"oid": "2917cbf1f251f501361f356ca45ce415e929c2ee", "url": "https://github.com/quarkusio/quarkus/commit/2917cbf1f251f501361f356ca45ce415e929c2ee", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>", "committedDate": "2020-02-28T16:43:04Z", "type": "forcePushed"}, {"oid": "94aa20e64e84cd3d2f20115e9e1a4d673a9c7206", "url": "https://github.com/quarkusio/quarkus/commit/94aa20e64e84cd3d2f20115e9e1a4d673a9c7206", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>", "committedDate": "2020-02-28T17:00:49Z", "type": "commit"}, {"oid": "94aa20e64e84cd3d2f20115e9e1a4d673a9c7206", "url": "https://github.com/quarkusio/quarkus/commit/94aa20e64e84cd3d2f20115e9e1a4d673a9c7206", "message": "When building runnable JARs using Gradle, dependencies from the same project/workspace should be consumed as JARs, not as directories of classes.\n\nUpdate devtools/gradle/src/functionalTest/java/io/quarkus/gradle/BasicMultiModuleTest.java\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>", "committedDate": "2020-02-28T17:00:49Z", "type": "forcePushed"}]}