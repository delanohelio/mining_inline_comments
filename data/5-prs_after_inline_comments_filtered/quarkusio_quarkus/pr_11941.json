{"pr_number": 11941, "pr_title": "Various multiple persistence units adjustments", "pr_createdAt": "2020-09-07T13:34:03Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11941", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcyNzY0Mg==", "url": "https://github.com/quarkusio/quarkus/pull/11941#discussion_r484727642", "bodyText": "Is this needed? If so, then we probably want to mention it in the example in the docs as well", "author": "geoand", "createdAt": "2020-09-08T08:03:48Z", "path": "integration-tests/hibernate-tenancy/src/main/java/io/quarkus/it/hibernate/multitenancy/inventory/InventoryTenantResolver.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package io.quarkus.it.hibernate.multitenancy.inventory;\n+\n+import javax.enterprise.context.RequestScoped;\n+import javax.inject.Inject;\n+\n+import org.jboss.logging.Logger;\n+\n+import io.quarkus.arc.Unremovable;\n+import io.quarkus.hibernate.orm.PersistenceUnit;\n+import io.quarkus.hibernate.orm.runtime.tenant.TenantResolver;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@RequestScoped\n+@Unremovable", "originalCommit": "94657d6b2aea7bba33da0aefc49f811dc1cb891f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg0NzU2MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11941#discussion_r484847561", "bodyText": "So, it used to be like that and I didn't change it. I added a commit to make the beans automatically unremovable. Could you have a look at this commit?", "author": "gsmet", "createdAt": "2020-09-08T11:33:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcyNzY0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg0ODczMQ==", "url": "https://github.com/quarkusio/quarkus/pull/11941#discussion_r484848731", "bodyText": "Seems perfectly reasonable!", "author": "geoand", "createdAt": "2020-09-08T11:36:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcyNzY0Mg=="}], "type": "inlineReview"}, {"oid": "3587bd827cdaea4d1885aca7c4619dd5ae867acc", "url": "https://github.com/quarkusio/quarkus/commit/3587bd827cdaea4d1885aca7c4619dd5ae867acc", "message": "Documentation adjustments for multiple persistence units support", "committedDate": "2020-09-08T11:15:01Z", "type": "commit"}, {"oid": "a4ab19155a1a2c32440c6cbc92836984c46f4a49", "url": "https://github.com/quarkusio/quarkus/commit/a4ab19155a1a2c32440c6cbc92836984c46f4a49", "message": "Make the multitenancy beans unremovable\n\nAnd drop it from the documentation.", "committedDate": "2020-09-08T11:30:07Z", "type": "forcePushed"}, {"oid": "681a29e7ae744011e4c38aca6e70802c00a0d326", "url": "https://github.com/quarkusio/quarkus/commit/681a29e7ae744011e4c38aca6e70802c00a0d326", "message": "Fix a few loose ends in the multitenancy + multi PUs code path\n\nAlso add a proper test. That's something I wanted to do during the CR\nphase anyway.", "committedDate": "2020-09-08T11:32:46Z", "type": "commit"}, {"oid": "2dbe5fa1885cb00e7b067bd7f6f02faee8308370", "url": "https://github.com/quarkusio/quarkus/commit/2dbe5fa1885cb00e7b067bd7f6f02faee8308370", "message": "Throw an error if @PersistenceUnit is put on model classes\n\nWe only support them at package-level for now.\nAlso tweak some error messages and avoid an error in a perfectly valid\ncase.", "committedDate": "2020-09-08T11:32:46Z", "type": "commit"}, {"oid": "03805e40705d4266079a16d0757e4114beb84029", "url": "https://github.com/quarkusio/quarkus/commit/03805e40705d4266079a16d0757e4114beb84029", "message": "Make the multitenancy beans unremovable\n\nAnd drop it from the documentation.", "committedDate": "2020-09-08T11:32:46Z", "type": "commit"}, {"oid": "03805e40705d4266079a16d0757e4114beb84029", "url": "https://github.com/quarkusio/quarkus/commit/03805e40705d4266079a16d0757e4114beb84029", "message": "Make the multitenancy beans unremovable\n\nAnd drop it from the documentation.", "committedDate": "2020-09-08T11:32:46Z", "type": "forcePushed"}]}