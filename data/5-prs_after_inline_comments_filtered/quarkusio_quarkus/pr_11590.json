{"pr_number": 11590, "pr_title": "Add ability to export ports in Jib", "pr_createdAt": "2020-08-25T02:28:26Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11590", "timeline": [{"oid": "290e49f7a9964965c45b74b4c9f5aeb69c42f15c", "url": "https://github.com/quarkusio/quarkus/commit/290e49f7a9964965c45b74b4c9f5aeb69c42f15c", "message": "Add ability to export ports in Jib", "committedDate": "2020-08-25T04:01:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwNTc3Mw==", "url": "https://github.com/quarkusio/quarkus/pull/11590#discussion_r476205773", "bodyText": "How about we make it Optional<List<Integer>> ports in order and drop the default value in to keep the same default behavior as before?", "author": "geoand", "createdAt": "2020-08-25T06:27:07Z", "path": "extensions/container-image/container-image-jib/deployment/src/main/java/io/quarkus/container/image/jib/deployment/JibConfig.java", "diffHunk": "@@ -98,4 +98,10 @@\n      */\n     @ConfigItem\n     public Optional<String> baseRegistryPassword;\n+\n+    /**\n+     * The ports to expose\n+     */\n+    @ConfigItem(defaultValue = \"8080\")\n+    public List<Integer> ports;", "originalCommit": "290e49f7a9964965c45b74b4c9f5aeb69c42f15c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQxODI4Mw==", "url": "https://github.com/quarkusio/quarkus/pull/11590#discussion_r476418283", "bodyText": "What is the current behaviour? The dockerfiles by default expose 8080 but it does not look like jib exposes anything?", "author": "stuartwdouglas", "createdAt": "2020-08-25T12:43:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwNTc3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQxOTE0NA==", "url": "https://github.com/quarkusio/quarkus/pull/11590#discussion_r476419144", "bodyText": "Yes exactly, currently jib doesn't export anything.", "author": "geoand", "createdAt": "2020-08-25T12:45:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwNTc3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQyMzQ4OQ==", "url": "https://github.com/quarkusio/quarkus/pull/11590#discussion_r476423489", "bodyText": "So can you actually use it for a HTTP based app?", "author": "stuartwdouglas", "createdAt": "2020-08-25T12:52:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwNTc3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQyNDE5MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11590#discussion_r476424191", "bodyText": "Yeah, because at runtime you can do -p 8080:8080 (personally I always do this anyway)", "author": "geoand", "createdAt": "2020-08-25T12:53:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwNTc3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMDY5Mw==", "url": "https://github.com/quarkusio/quarkus/pull/11590#discussion_r476430693", "bodyText": "Ah, I also always do this as well. I assumed you needed both. What about kube? The vague complaint I got was that the lack of a port was causing problems.\nEither way even though it is not 100% backwards compatible I think that making the docker and jib builds equivalent is probably worth the minor compat concern.", "author": "stuartwdouglas", "createdAt": "2020-08-25T13:02:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwNTc3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMjAyMg==", "url": "https://github.com/quarkusio/quarkus/pull/11590#discussion_r476432022", "bodyText": "It should be perfectly fine in Kube (I've run it multiple times).\nBut I guess it's better to have docker and jib be equivalent than keep backward compatibility.", "author": "geoand", "createdAt": "2020-08-25T13:04:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwNTc3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQzMjY1Mg==", "url": "https://github.com/quarkusio/quarkus/pull/11590#discussion_r476432652", "bodyText": "We can probably expose this port automatically (without requiring a user to specify it), but let's leave that for later if anyone ask for it", "author": "geoand", "createdAt": "2020-08-25T13:05:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwNTc3Mw=="}], "type": "inlineReview"}, {"oid": "02c8fc865bc1367e2d238910842f23994ec5e632", "url": "https://github.com/quarkusio/quarkus/commit/02c8fc865bc1367e2d238910842f23994ec5e632", "message": "Add ability to export ports in Jib", "committedDate": "2020-09-18T22:12:50Z", "type": "commit"}, {"oid": "02c8fc865bc1367e2d238910842f23994ec5e632", "url": "https://github.com/quarkusio/quarkus/commit/02c8fc865bc1367e2d238910842f23994ec5e632", "message": "Add ability to export ports in Jib", "committedDate": "2020-09-18T22:12:50Z", "type": "forcePushed"}]}