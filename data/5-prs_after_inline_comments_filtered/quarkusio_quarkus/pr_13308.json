{"pr_number": 13308, "pr_title": "Support specifying TLS keys from classpath for gRPC clients", "pr_createdAt": "2020-11-16T10:22:42Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13308", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDIyNDI0NA==", "url": "https://github.com/quarkusio/quarkus/pull/13308#discussion_r524224244", "bodyText": "Wondering if you can't use UncheckedIOException here?", "author": "cescoffier", "createdAt": "2020-11-16T12:33:51Z", "path": "extensions/grpc/runtime/src/main/java/io/quarkus/grpc/runtime/supports/Channels.java", "diffHunk": "@@ -54,11 +57,20 @@ public static Channel createChannel(String name) throws SSLException {\n             Path keyPath = config.ssl.key.orElse(null);\n             SslContextBuilder sslContextBuilder = GrpcSslContexts.forClient();\n             if (trustStorePath != null) {\n-                sslContextBuilder.trustManager(trustStorePath.toFile());\n+                try (InputStream stream = streamFor(trustStorePath, \"trust store\")) {\n+                    sslContextBuilder.trustManager(stream);\n+                } catch (IOException e) {\n+                    throw new IllegalStateException(\"Configuring gRPC client trust store failed\", e);", "originalCommit": "a83f208628854e061b90a199ceae19db7d72a0ea", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDIyODM1MA==", "url": "https://github.com/quarkusio/quarkus/pull/13308#discussion_r524228350", "bodyText": "\ud83d\udc4d it says more than IllegalStateException", "author": "michalszynkiewicz", "createdAt": "2020-11-16T12:37:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDIyNDI0NA=="}], "type": "inlineReview"}, {"oid": "05ed7396d4253c0383282fcff912fa3832318553", "url": "https://github.com/quarkusio/quarkus/commit/05ed7396d4253c0383282fcff912fa3832318553", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-16T20:03:26Z", "type": "forcePushed"}, {"oid": "a88d0820855b89aa0716a836fdd800c954d575c7", "url": "https://github.com/quarkusio/quarkus/commit/a88d0820855b89aa0716a836fdd800c954d575c7", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-17T08:05:47Z", "type": "forcePushed"}, {"oid": "6c66bfff876fddb21ba4d815da7dbf3d1de1ef95", "url": "https://github.com/quarkusio/quarkus/commit/6c66bfff876fddb21ba4d815da7dbf3d1de1ef95", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-17T09:35:37Z", "type": "forcePushed"}, {"oid": "971b8bd3cb494ea787ca8bd7616f24bad141222e", "url": "https://github.com/quarkusio/quarkus/commit/971b8bd3cb494ea787ca8bd7616f24bad141222e", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-17T09:43:28Z", "type": "forcePushed"}, {"oid": "09c09a6feb5518e74ef7de6f99c30d0f0632143f", "url": "https://github.com/quarkusio/quarkus/commit/09c09a6feb5518e74ef7de6f99c30d0f0632143f", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-18T07:56:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjA3MDkzNA==", "url": "https://github.com/quarkusio/quarkus/pull/13308#discussion_r526070934", "bodyText": "Wondering if this should be part of quarkus \"core\".\n@stuartwdouglas @gsmet WDYT? This is not gRPC specific.", "author": "cescoffier", "createdAt": "2020-11-18T13:06:30Z", "path": "extensions/grpc/deployment/src/main/java/io/quarkus/grpc/deployment/ResourceRegistrationUtils.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package io.quarkus.grpc.deployment;\n+\n+import java.util.regex.Pattern;\n+\n+import org.eclipse.microprofile.config.Config;\n+\n+import io.quarkus.deployment.annotations.BuildProducer;\n+import io.quarkus.deployment.builditem.nativeimage.NativeImageResourceBuildItem;\n+\n+class ResourceRegistrationUtils {", "originalCommit": "09c09a6feb5518e74ef7de6f99c30d0f0632143f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ4NTMyOQ==", "url": "https://github.com/quarkusio/quarkus/pull/13308#discussion_r529485329", "bodyText": "I'm not sure tbh.\nregisterResourcesForProperties looks quite weird and I wouldn't want to make it a common pattern.\nregisterResourceForProperty I'm a bit unsure of what it does exactly. I fail to see why we would do this check here and not at an higher level (and probably throw an error because the file is not available?).", "author": "gsmet", "createdAt": "2020-11-24T11:48:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjA3MDkzNA=="}], "type": "inlineReview"}, {"oid": "3e368517a33fefcd21b0ff7416ad17f5c13b5bef", "url": "https://github.com/quarkusio/quarkus/commit/3e368517a33fefcd21b0ff7416ad17f5c13b5bef", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-20T07:56:31Z", "type": "forcePushed"}, {"oid": "60b7ec6a637f36188e70a2c3b4f06afecb5dd0d4", "url": "https://github.com/quarkusio/quarkus/commit/60b7ec6a637f36188e70a2c3b4f06afecb5dd0d4", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-23T10:12:02Z", "type": "forcePushed"}, {"oid": "0223b5f927d145799a5b7f8d112761b09ca4de42", "url": "https://github.com/quarkusio/quarkus/commit/0223b5f927d145799a5b7f8d112761b09ca4de42", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-25T14:29:17Z", "type": "forcePushed"}, {"oid": "e97460ced3c19a3026d7492310df51c0d133b05b", "url": "https://github.com/quarkusio/quarkus/commit/e97460ced3c19a3026d7492310df51c0d133b05b", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-30T22:02:08Z", "type": "commit"}, {"oid": "e97460ced3c19a3026d7492310df51c0d133b05b", "url": "https://github.com/quarkusio/quarkus/commit/e97460ced3c19a3026d7492310df51c0d133b05b", "message": "Support specifying TLS keys from classpath for gRPC clients\n\nfixes #13305", "committedDate": "2020-11-30T22:02:08Z", "type": "forcePushed"}]}