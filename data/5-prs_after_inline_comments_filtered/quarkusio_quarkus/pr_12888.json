{"pr_number": 12888, "pr_title": "Run OIDC Challenge in the blocking mode if needed", "pr_createdAt": "2020-10-22T18:26:53Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/12888", "timeline": [{"oid": "d186e98b65ffe500ffce21d20cce85ca0b8b83d0", "url": "https://github.com/quarkusio/quarkus/commit/d186e98b65ffe500ffce21d20cce85ca0b8b83d0", "message": "Run OIDC Challenge in the blocking mode if needed", "committedDate": "2020-10-22T18:30:43Z", "type": "forcePushed"}, {"oid": "5d6219c97cf6d3c5b0e01d6631d58dc6cd986abf", "url": "https://github.com/quarkusio/quarkus/commit/5d6219c97cf6d3c5b0e01d6631d58dc6cd986abf", "message": "Run OIDC Challenge in the blocking mode if needed", "committedDate": "2020-10-23T08:43:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjYwNjI5OQ==", "url": "https://github.com/quarkusio/quarkus/pull/12888#discussion_r512606299", "bodyText": "Why have you done this? You don't need a special interface and implementation for this, just run the code directly inside getChallenge", "author": "stuartwdouglas", "createdAt": "2020-10-27T11:16:22Z", "path": "extensions/oidc/runtime/src/main/java/io/quarkus/oidc/runtime/CodeAuthenticationMechanism.java", "diffHunk": "@@ -600,4 +621,45 @@ static String getCookieSuffix(String tenantId) {\n         return !\"Default\".equals(tenantId) ? \"_\" + tenantId : \"\";\n     }\n \n+    interface AuthenticationChallegeContext {\n+\n+        Uni<ChallengeData> runBlocking(Supplier<ChallengeData> function);\n+\n+    }\n+\n+    private final AuthenticationChallegeContext blockingChallengeContext = new AuthenticationChallegeContext() {\n+        @Override\n+        public Uni<ChallengeData> runBlocking(Supplier<ChallengeData> function) {\n+            return Uni.createFrom().deferred(new Supplier<Uni<? extends ChallengeData>>() {\n+                @Override\n+                public Uni<ChallengeData> get() {\n+                    if (BlockingOperationControl.isBlockingAllowed()) {", "originalCommit": "5d6219c97cf6d3c5b0e01d6631d58dc6cd986abf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjYxMzU2NA==", "url": "https://github.com/quarkusio/quarkus/pull/12888#discussion_r512613564", "bodyText": "@stuartwdouglas Yeah, I just copied and kept it like that in case an idea of passing that interface as getChallenge parameter, similarly to how it is done for the identity provider, will be considered, but indeed, for now it is redundant so I'll simplify", "author": "sberyozkin", "createdAt": "2020-10-27T11:29:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjYwNjI5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjY2OTM4NA==", "url": "https://github.com/quarkusio/quarkus/pull/12888#discussion_r512669384", "bodyText": "@stuartwdouglas it should be better now, have a look please", "author": "sberyozkin", "createdAt": "2020-10-27T12:58:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjYwNjI5OQ=="}], "type": "inlineReview"}, {"oid": "61b22f945f74fa7d415b28dedaf430f0e246ee54", "url": "https://github.com/quarkusio/quarkus/commit/61b22f945f74fa7d415b28dedaf430f0e246ee54", "message": "Run OIDC Challenge in the blocking mode if needed", "committedDate": "2020-10-27T12:56:32Z", "type": "forcePushed"}, {"oid": "1424d565bde31c3df2857d55dcba242dcfab6748", "url": "https://github.com/quarkusio/quarkus/commit/1424d565bde31c3df2857d55dcba242dcfab6748", "message": "Run OIDC Challenge in the blocking mode if needed", "committedDate": "2020-10-27T16:53:49Z", "type": "forcePushed"}, {"oid": "6f74eb8f8c27134c7986100cb2201f1915716c3a", "url": "https://github.com/quarkusio/quarkus/commit/6f74eb8f8c27134c7986100cb2201f1915716c3a", "message": "Run OIDC Challenge in the blocking mode if needed", "committedDate": "2020-10-27T21:11:21Z", "type": "forcePushed"}, {"oid": "75120b46dd1f95c7aacc9c4083dbce822df3b71c", "url": "https://github.com/quarkusio/quarkus/commit/75120b46dd1f95c7aacc9c4083dbce822df3b71c", "message": "Run OIDC Challenge in the blocking mode if needed", "committedDate": "2020-10-28T11:12:13Z", "type": "forcePushed"}, {"oid": "7c957d7984bb3eb1a128992dfa17f65ae5e23b18", "url": "https://github.com/quarkusio/quarkus/commit/7c957d7984bb3eb1a128992dfa17f65ae5e23b18", "message": "Run OIDC Challenge in the blocking mode if needed", "committedDate": "2020-10-28T11:26:45Z", "type": "forcePushed"}, {"oid": "dd321fe6bd2197075423f262fa7b69da5b2147de", "url": "https://github.com/quarkusio/quarkus/commit/dd321fe6bd2197075423f262fa7b69da5b2147de", "message": "Run OIDC Challenge in the blocking mode if needed", "committedDate": "2020-10-28T13:39:59Z", "type": "commit"}, {"oid": "dd321fe6bd2197075423f262fa7b69da5b2147de", "url": "https://github.com/quarkusio/quarkus/commit/dd321fe6bd2197075423f262fa7b69da5b2147de", "message": "Run OIDC Challenge in the blocking mode if needed", "committedDate": "2020-10-28T13:39:59Z", "type": "forcePushed"}]}