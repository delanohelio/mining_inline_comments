{"pr_number": 10692, "pr_title": "Support Spring Data JPA's isPersistable", "pr_createdAt": "2020-07-13T15:59:31Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/10692", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc3MjYzNA==", "url": "https://github.com/quarkusio/quarkus/pull/10692#discussion_r453772634", "bodyText": "Iteration is more efficient than recursion \ud83d\ude09", "author": "gastaldi", "createdAt": "2020-07-13T16:23:58Z", "path": "extensions/spring-data-jpa/deployment/src/main/java/io/quarkus/spring/data/deployment/generate/StockMethodsAdder.java", "diffHunk": "@@ -187,6 +199,24 @@ private void generateSave(ClassCreator classCreator, FieldDescriptor entityClass\n         }\n     }\n \n+    private boolean isPersistable(DotName entityDotName) {\n+        ClassInfo classInfo = index.getClassByName(entityDotName);\n+        if (classInfo == null) {\n+            throw new IllegalStateException(\"Entity \" + entityDotName + \" was not part of the Quarkus index\");\n+        }\n+\n+        if (classInfo.interfaceNames().contains(DotNames.SPRING_DATA_PERSISTABLE)) {\n+            return true;\n+        }\n+\n+        DotName superDotName = classInfo.superName();\n+        if (superDotName.equals(DotNames.OBJECT)) {\n+            return false;\n+        }\n+\n+        return isPersistable(superDotName);", "originalCommit": "4b9d487382b793d8fae85b60a7aa95306439c84c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc5OTE1Mw==", "url": "https://github.com/quarkusio/quarkus/pull/10692#discussion_r453799153", "bodyText": "No doubt \ud83d\udc4d", "author": "geoand", "createdAt": "2020-07-13T17:07:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc3MjYzNA=="}], "type": "inlineReview"}, {"oid": "9cb7675393bc532d04bb93b3d5dd785c8e9b3579", "url": "https://github.com/quarkusio/quarkus/commit/9cb7675393bc532d04bb93b3d5dd785c8e9b3579", "message": "Support Spring Data JPA's isPersistable\n\nFixes: #10231", "committedDate": "2020-07-13T20:38:20Z", "type": "forcePushed"}, {"oid": "5f1c53b40ff8123e7dcf15aaa44e4bfac5c49f1a", "url": "https://github.com/quarkusio/quarkus/commit/5f1c53b40ff8123e7dcf15aaa44e4bfac5c49f1a", "message": "Support Spring Data JPA's isPersistable\n\nFixes: #10231", "committedDate": "2020-07-13T21:10:10Z", "type": "forcePushed"}, {"oid": "6059d011bf105efbfc23bfa19bf5203036808f64", "url": "https://github.com/quarkusio/quarkus/commit/6059d011bf105efbfc23bfa19bf5203036808f64", "message": "Support Spring Data JPA's isPersistable\n\nFixes: #10231", "committedDate": "2020-07-14T06:27:12Z", "type": "commit"}, {"oid": "6059d011bf105efbfc23bfa19bf5203036808f64", "url": "https://github.com/quarkusio/quarkus/commit/6059d011bf105efbfc23bfa19bf5203036808f64", "message": "Support Spring Data JPA's isPersistable\n\nFixes: #10231", "committedDate": "2020-07-14T06:27:12Z", "type": "forcePushed"}]}