{"pr_number": 8001, "pr_title": "Replace ApplicationIndexBuildItem with CombinedIndexBuildItem where it makes sense", "pr_createdAt": "2020-03-19T21:35:56Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/8001", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU1NjkxOA==", "url": "https://github.com/quarkusio/quarkus/pull/8001#discussion_r395556918", "bodyText": "@geoand do you remember the reason why class-based @ConfigProperties requied the ApplicationIndexBuildItem? I think it's safe to use the CombinedIndexBuildItem here...", "author": "mkouba", "createdAt": "2020-03-20T10:44:54Z", "path": "extensions/arc/deployment/src/main/java/io/quarkus/arc/deployment/configproperties/ConfigPropertiesBuildStep.java", "diffHunk": "@@ -89,7 +87,7 @@ void setup(CombinedIndexBuildItem combinedIndex,\n                 boolean needsValidation = ClassConfigPropertiesUtil.addProducerMethodForClassConfigProperties(\n                         deploymentClassLoader.getClassLoader(), classInfo, producerClassCreator,\n                         configPropertiesMetadata.getPrefix(), configPropertiesMetadata.getNamingStrategy(),\n-                        applicationIndex.getIndex(), configProperties);", "originalCommit": "c889a720e14f4343234b314ed9ef2f30ede54733", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU1ODE1OA==", "url": "https://github.com/quarkusio/quarkus/pull/8001#discussion_r395558158", "bodyText": "Yeah, it's probably just an oversight on my part", "author": "geoand", "createdAt": "2020-03-20T10:47:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU1NjkxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU2MDQ2Mw==", "url": "https://github.com/quarkusio/quarkus/pull/8001#discussion_r395560463", "bodyText": "@FroMage modelClasses are built from the CombinedIndexBuildItem so it should be safe to use it here as well, or?", "author": "mkouba", "createdAt": "2020-03-20T10:52:29Z", "path": "extensions/panache/hibernate-orm-panache/deployment/src/main/java/io/quarkus/hibernate/orm/panache/deployment/PanacheResourceProcessor.java", "diffHunk": "@@ -109,7 +107,7 @@ void build(CombinedIndexBuildItem index,\n         MetamodelInfo<EntityModel<EntityField>> modelInfo = modelEnhancer.getModelInfo();\n         if (modelInfo.hasEntities()) {\n             PanacheFieldAccessEnhancer panacheFieldAccessEnhancer = new PanacheFieldAccessEnhancer(modelInfo);\n-            for (ClassInfo classInfo : applicationIndex.getIndex().getKnownClasses()) {\n+            for (ClassInfo classInfo : index.getIndex().getKnownClasses()) {", "originalCommit": "c889a720e14f4343234b314ed9ef2f30ede54733", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM2MDk4NQ==", "url": "https://github.com/quarkusio/quarkus/pull/8001#discussion_r396360985", "bodyText": "That would probably solve the bug where people access entities outside the root application, but might be costly since we still don't have any way to index users of specific classes.", "author": "FroMage", "createdAt": "2020-03-23T10:49:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU2MDQ2Mw=="}], "type": "inlineReview"}, {"oid": "d60adec0454990de4ab3e18397cfc48f87e570d6", "url": "https://github.com/quarkusio/quarkus/commit/d60adec0454990de4ab3e18397cfc48f87e570d6", "message": "Replace ApplicationIndexBuildItem with CombinedIndexBuildItem and search for resources in all the application archives instead of only in the root where it makes sense", "committedDate": "2020-03-24T10:37:15Z", "type": "forcePushed"}, {"oid": "403bf6c960eb9e4fc2fb84a93f735dd95f950c21", "url": "https://github.com/quarkusio/quarkus/commit/403bf6c960eb9e4fc2fb84a93f735dd95f950c21", "message": "Replace ApplicationIndexBuildItem with CombinedIndexBuildItem and search for resources in all the application archives instead of only in the root where it makes sense", "committedDate": "2020-03-24T12:52:16Z", "type": "commit"}, {"oid": "403bf6c960eb9e4fc2fb84a93f735dd95f950c21", "url": "https://github.com/quarkusio/quarkus/commit/403bf6c960eb9e4fc2fb84a93f735dd95f950c21", "message": "Replace ApplicationIndexBuildItem with CombinedIndexBuildItem and search for resources in all the application archives instead of only in the root where it makes sense", "committedDate": "2020-03-24T12:52:16Z", "type": "forcePushed"}]}