{"pr_number": 9120, "pr_title": "Move the gRPC support to the main Quarkus repository", "pr_createdAt": "2020-05-06T13:08:57Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/9120", "timeline": [{"oid": "4c92e8416fffd56878f3737deb1d45a249e83e60", "url": "https://github.com/quarkusio/quarkus/commit/4c92e8416fffd56878f3737deb1d45a249e83e60", "message": "Add the gRPC support documentation\n\nCo-authored-by: Michal Szynkiewicz <michal.l.szynkiewicz@gmail.com>", "committedDate": "2020-05-06T13:11:24Z", "type": "forcePushed"}, {"oid": "9fa26b12cf318f23be1bccdf1466e0588c8b832e", "url": "https://github.com/quarkusio/quarkus/commit/9fa26b12cf318f23be1bccdf1466e0588c8b832e", "message": "Add the gRPC support documentation\n\nCo-authored-by: Michal Szynkiewicz <michal.l.szynkiewicz@gmail.com>", "committedDate": "2020-05-06T13:31:36Z", "type": "forcePushed"}, {"oid": "23d06566ebd49c8762472fa10b8d104c25581b90", "url": "https://github.com/quarkusio/quarkus/commit/23d06566ebd49c8762472fa10b8d104c25581b90", "message": "Remove explicit Vert.x dependencies from the bom as they are imported from the Vert.x Bom", "committedDate": "2020-05-07T12:59:34Z", "type": "forcePushed"}, {"oid": "4b9235509d0a77cfb34cb4da44cb89b683d3cf1f", "url": "https://github.com/quarkusio/quarkus/commit/4b9235509d0a77cfb34cb4da44cb89b683d3cf1f", "message": "Remove explicit Vert.x dependencies from the bom as they are imported from the Vert.x Bom", "committedDate": "2020-05-07T13:21:03Z", "type": "forcePushed"}, {"oid": "6b7e85a2c268cd0d15208857cff4b6adf6046984", "url": "https://github.com/quarkusio/quarkus/commit/6b7e85a2c268cd0d15208857cff4b6adf6046984", "message": "Remove explicit Vert.x dependencies from the bom as they are imported from the Vert.x Bom", "committedDate": "2020-05-09T12:00:49Z", "type": "forcePushed"}, {"oid": "364a0854df33d3d0e9428c82b7eb5cb26a28097e", "url": "https://github.com/quarkusio/quarkus/commit/364a0854df33d3d0e9428c82b7eb5cb26a28097e", "message": "Refine the gRPC extension description and categorisation", "committedDate": "2020-05-12T05:43:47Z", "type": "forcePushed"}, {"oid": "44b29f98c6bc67422a9a80b91aa7e75029dd06db", "url": "https://github.com/quarkusio/quarkus/commit/44b29f98c6bc67422a9a80b91aa7e75029dd06db", "message": "Workaround missing ALPN on Java 8 242-", "committedDate": "2020-05-12T13:51:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI1Mjg1Mg==", "url": "https://github.com/quarkusio/quarkus/pull/9120#discussion_r424252852", "bodyText": "This is incorrect. And should be moved to FeatureBuildItem. The client one should be moved to FeatureBuildItem too.", "author": "gsmet", "createdAt": "2020-05-13T08:12:02Z", "path": "extensions/grpc/deployment/src/main/java/io/quarkus/grpc/deployment/GrpcServerProcessor.java", "diffHunk": "@@ -0,0 +1,149 @@\n+package io.quarkus.grpc.deployment;\n+\n+import java.lang.reflect.Modifier;\n+import java.util.Collection;\n+import java.util.List;\n+\n+import org.eclipse.microprofile.config.ConfigProvider;\n+import org.jboss.jandex.ClassInfo;\n+import org.jboss.logging.Logger;\n+\n+import io.grpc.internal.DnsNameResolverProvider;\n+import io.grpc.internal.PickFirstLoadBalancerProvider;\n+import io.grpc.netty.NettyChannelProvider;\n+import io.quarkus.arc.deployment.AdditionalBeanBuildItem;\n+import io.quarkus.arc.processor.DotNames;\n+import io.quarkus.deployment.IsNormal;\n+import io.quarkus.deployment.annotations.BuildProducer;\n+import io.quarkus.deployment.annotations.BuildStep;\n+import io.quarkus.deployment.annotations.ExecutionTime;\n+import io.quarkus.deployment.annotations.Record;\n+import io.quarkus.deployment.builditem.CombinedIndexBuildItem;\n+import io.quarkus.deployment.builditem.ExtensionSslNativeSupportBuildItem;\n+import io.quarkus.deployment.builditem.FeatureBuildItem;\n+import io.quarkus.deployment.builditem.ServiceStartBuildItem;\n+import io.quarkus.deployment.builditem.ShutdownContextBuildItem;\n+import io.quarkus.deployment.builditem.nativeimage.ReflectiveClassBuildItem;\n+import io.quarkus.grpc.runtime.GrpcContainer;\n+import io.quarkus.grpc.runtime.GrpcServerRecorder;\n+import io.quarkus.grpc.runtime.config.GrpcConfiguration;\n+import io.quarkus.grpc.runtime.config.GrpcServerBuildTimeConfig;\n+import io.quarkus.grpc.runtime.health.GrpcHealthEndpoint;\n+import io.quarkus.grpc.runtime.health.GrpcHealthStorage;\n+import io.quarkus.kubernetes.spi.KubernetesPortBuildItem;\n+import io.quarkus.smallrye.health.deployment.spi.HealthBuildItem;\n+import io.quarkus.vertx.deployment.VertxBuildItem;\n+\n+public class GrpcServerProcessor {\n+\n+    private static final Logger logger = Logger.getLogger(GrpcServerProcessor.class);\n+\n+    public static final String GRPC_SERVER = \"/reactive\";", "originalCommit": "44b29f98c6bc67422a9a80b91aa7e75029dd06db", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5edddec81b5373f0fbee0fceebf92678f172eabe", "url": "https://github.com/quarkusio/quarkus/commit/5edddec81b5373f0fbee0fceebf92678f172eabe", "message": "Move the gRPC extension to the main Quarkus repository\n\nThis commit contains the extension code and also update the boms and build parents with the required dependencies.\nIt changed the ban strategy for Findbugs JSR 305 as some annotation are required by the classes generated by protoc.\n\nCo-authored-by: Michal Szynkiewicz <michal.l.szynkiewicz@gmail.com>", "committedDate": "2020-05-13T09:01:33Z", "type": "commit"}, {"oid": "274b7a671174cf1879638aba8d9cf36686449e3d", "url": "https://github.com/quarkusio/quarkus/commit/274b7a671174cf1879638aba8d9cf36686449e3d", "message": "Add gRPC integration tests\n\nAdds ITs for plain-text, TLS, mutual auth, interceptors, streaming, health support and proto v2\n\nCo-authored-by: Michal Szynkiewicz <michal.l.szynkiewicz@gmail.com>", "committedDate": "2020-05-13T09:01:34Z", "type": "commit"}, {"oid": "72b42ea37d6bd063896b3d491adb7c865d3ce685", "url": "https://github.com/quarkusio/quarkus/commit/72b42ea37d6bd063896b3d491adb7c865d3ce685", "message": "Add the gRPC support documentation\n\nCo-authored-by: Michal Szynkiewicz <michal.l.szynkiewicz@gmail.com>", "committedDate": "2020-05-13T09:01:34Z", "type": "commit"}, {"oid": "afbd2b84ae92ca37eba62434a2c5bd10d53eabc4", "url": "https://github.com/quarkusio/quarkus/commit/afbd2b84ae92ca37eba62434a2c5bd10d53eabc4", "message": "gRPC extension - Change configuration format to align with the rest of Quarkus\n\n* quarkus.grpc root\n* quarkus.grpc.service -> server configuration\n* quarkus.grpc.clients.client_name -> client configuration", "committedDate": "2020-05-13T09:08:58Z", "type": "commit"}, {"oid": "2765ed08c7ea2c0d2e2f9527e350d5c3ddf63146", "url": "https://github.com/quarkusio/quarkus/commit/2765ed08c7ea2c0d2e2f9527e350d5c3ddf63146", "message": "Remove the ban on the jsr 305 dependency", "committedDate": "2020-05-13T09:09:03Z", "type": "commit"}, {"oid": "bf8d70c8c442bb4300cc4c7d77c9ce4cecf3b822", "url": "https://github.com/quarkusio/quarkus/commit/bf8d70c8c442bb4300cc4c7d77c9ce4cecf3b822", "message": "Workaround missing ALPN on Java 8 242-", "committedDate": "2020-05-13T09:09:03Z", "type": "commit"}, {"oid": "bf8d70c8c442bb4300cc4c7d77c9ce4cecf3b822", "url": "https://github.com/quarkusio/quarkus/commit/bf8d70c8c442bb4300cc4c7d77c9ce4cecf3b822", "message": "Workaround missing ALPN on Java 8 242-", "committedDate": "2020-05-13T09:09:03Z", "type": "forcePushed"}]}