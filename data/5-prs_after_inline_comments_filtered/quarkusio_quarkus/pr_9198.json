{"pr_number": 9198, "pr_title": "Introduce Maven ListExtensionsIT", "pr_createdAt": "2020-05-10T20:47:36Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/9198", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwODkzMw==", "url": "https://github.com/quarkusio/quarkus/pull/9198#discussion_r422708933", "bodyText": "We don't use star imports. Make sure to use the Quarkus code format rules in https://github.com/quarkusio/quarkus/tree/master/independent-projects/ide-config/src/main/resources", "author": "gastaldi", "createdAt": "2020-05-10T22:24:32Z", "path": "integration-tests/maven/src/test/java/io/quarkus/maven/it/ListExtensionsIT.java", "diffHunk": "@@ -0,0 +1,74 @@\n+package io.quarkus.maven.it;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.io.*;", "originalCommit": "f35a156579e5189ff8d140962c1c02cbb5514ff4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg3MDMzMQ==", "url": "https://github.com/quarkusio/quarkus/pull/9198#discussion_r422870331", "bodyText": "Done.", "author": "famod", "createdAt": "2020-05-11T08:27:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwODkzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwOTEwOQ==", "url": "https://github.com/quarkusio/quarkus/pull/9198#discussion_r422709109", "bodyText": "Better to use Collections.singletonMap instead", "author": "gastaldi", "createdAt": "2020-05-10T22:26:12Z", "path": "integration-tests/maven/src/test/java/io/quarkus/maven/it/ListExtensionsIT.java", "diffHunk": "@@ -0,0 +1,74 @@\n+package io.quarkus.maven.it;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.io.*;\n+import java.nio.file.Files;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import org.apache.commons.io.output.TeeOutputStream;\n+import org.apache.maven.shared.invoker.*;\n+import org.junit.jupiter.api.Test;\n+\n+import com.google.common.collect.ImmutableMap;\n+\n+@DisableForNative\n+class ListExtensionsIT extends QuarkusPlatformAwareMojoTestBase {\n+\n+    private static final String VERTX_ARTIFACT_ID = \"quarkus-vertx\";\n+    private static final String PROJECT_SOURCE_DIR = \"projects/classic\";\n+    private File testDir;\n+    private Invoker invoker;\n+\n+    @Test\n+    void testListExtensions() throws MavenInvocationException, IOException {\n+        testDir = initProject(PROJECT_SOURCE_DIR, \"projects/testListExtensions\");\n+        invoker = initInvoker(testDir);\n+\n+        List<String> outputLogLines = listExtensions();\n+\n+        assertThat(outputLogLines).anyMatch(line -> line.contains(VERTX_ARTIFACT_ID));\n+    }\n+\n+    @Test\n+    void testListExtensionsWithManagedDependencyWithoutScope() throws MavenInvocationException, IOException {\n+        testDir = initProject(PROJECT_SOURCE_DIR, \"projects/testListExtensionsWithManagedDependencyWithoutScope\");\n+        invoker = initInvoker(testDir);\n+        // Edit the pom.xml.\n+        File source = new File(testDir, \"pom.xml\");\n+        filter(source, ImmutableMap.of(\"<!-- insert managed dependencies here -->\",\n+                \"      <dependency>\\n\" +", "originalCommit": "f35a156579e5189ff8d140962c1c02cbb5514ff4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg3Mjk1Nw==", "url": "https://github.com/quarkusio/quarkus/pull/9198#discussion_r422872957", "bodyText": "Seems like this got left over :)", "author": "geoand", "createdAt": "2020-05-11T08:31:46Z", "path": "integration-tests/maven/src/test/java/io/quarkus/maven/it/ListExtensionsIT.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package io.quarkus.maven.it;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.io.File;\n+import java.io.FileOutputStream;\n+import java.io.IOException;\n+import java.io.PrintStream;\n+import java.nio.file.Files;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import org.apache.commons.io.output.TeeOutputStream;\n+import org.apache.maven.shared.invoker.*;", "originalCommit": "7869786a2b945376fe51806d109e5c25177cf950", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg3Mzg5NQ==", "url": "https://github.com/quarkusio/quarkus/pull/9198#discussion_r422873895", "bodyText": "Shoot... I was too focussed on java.io.*.", "author": "famod", "createdAt": "2020-05-11T08:33:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg3Mjk1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg3NTY4NA==", "url": "https://github.com/quarkusio/quarkus/pull/9198#discussion_r422875684", "bodyText": "Done.", "author": "famod", "createdAt": "2020-05-11T08:36:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg3Mjk1Nw=="}], "type": "inlineReview"}, {"oid": "fba5f80fd778e39506f66573be29daa1a4c03dca", "url": "https://github.com/quarkusio/quarkus/commit/fba5f80fd778e39506f66573be29daa1a4c03dca", "message": "Introduce Maven ListExtensionsIT\n\nIncluding small refactorings as requested in PR.", "committedDate": "2020-05-11T08:36:10Z", "type": "commit"}]}