{"pr_number": 13659, "pr_title": "Update Keycloak Authorization docs and UserInfo", "pr_createdAt": "2020-12-03T12:16:59Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13659", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTIxMDUwNg==", "url": "https://github.com/quarkusio/quarkus/pull/13659#discussion_r535210506", "bodyText": "Instead of returning the property names via a getter, isn't better to introduce a UserInfo.contains(String) instead?", "author": "gastaldi", "createdAt": "2020-12-03T13:05:33Z", "path": "integration-tests/oidc-tenancy/src/main/java/io/quarkus/it/keycloak/TenantResource.java", "diffHunk": "@@ -40,7 +42,9 @@ public String userNameService(@PathParam(\"tenant\") String tenant) {\n         String name = getNameServiceType();\n         if (\"tenant-d\".equals(tenant) || \"tenant-b-no-discovery\".equals(tenant)) {\n             UserInfo userInfo = getUserInfo();\n-            name = name + \".\" + userInfo.getString(\"preferred_username\");\n+            if (userInfo.getPropertyNames().contains(PREFERRED_USERNAME)) {", "originalCommit": "fb1c70cdcce0c37d5878cbf342a3e00035e9a61a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI1MTg4OQ==", "url": "https://github.com/quarkusio/quarkus/pull/13659#discussion_r535251889", "bodyText": "@gastaldi the user just wanted to see the whole set of property names as he was not sure what is in that UserInfo, here I just added this awkward check to test the new method :-), but yeah, let me add a shortcut as well, makes sense", "author": "sberyozkin", "createdAt": "2020-12-03T14:03:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTIxMDUwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI2ODE0Mg==", "url": "https://github.com/quarkusio/quarkus/pull/13659#discussion_r535268142", "bodyText": "@gastaldi Just updated it, kept the getPropertyNames test check but also added contains check", "author": "sberyozkin", "createdAt": "2020-12-03T14:24:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTIxMDUwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI2ODkyMQ==", "url": "https://github.com/quarkusio/quarkus/pull/13659#discussion_r535268921", "bodyText": "Looks good, thanks!", "author": "gastaldi", "createdAt": "2020-12-03T14:25:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTIxMDUwNg=="}], "type": "inlineReview"}, {"oid": "249b22eeb3f88f4c9131da153772778412a7528f", "url": "https://github.com/quarkusio/quarkus/commit/249b22eeb3f88f4c9131da153772778412a7528f", "message": "Update Keycloak Authorization docs and UserInfo", "committedDate": "2020-12-03T14:23:03Z", "type": "commit"}, {"oid": "249b22eeb3f88f4c9131da153772778412a7528f", "url": "https://github.com/quarkusio/quarkus/commit/249b22eeb3f88f4c9131da153772778412a7528f", "message": "Update Keycloak Authorization docs and UserInfo", "committedDate": "2020-12-03T14:23:03Z", "type": "forcePushed"}]}