{"pr_number": 6455, "pr_title": "Fix for #6442 quarkusDev not working in multi module projects", "pr_createdAt": "2020-01-08T07:12:27Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6455", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA5OTIxOQ==", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364099219", "bodyText": "Should this one be debug instead of info?", "author": "gsmet", "createdAt": "2020-01-08T07:50:35Z", "path": "devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java", "diffHunk": "@@ -242,7 +242,11 @@ public void startDev() {\n                         e);\n             }\n             for (AppDependency appDep : appModel.getAllDependencies()) {\n-                addToClassPaths(classPathManifest, context, appDep.getArtifact().getPath().toFile());\n+                if (!appDep.getArtifact().isSubModule()) {\n+                    addToClassPaths(classPathManifest, context, appDep.getArtifact().getPath().toFile());\n+                } else {\n+                    getLogger().info(\"Ignoring {} as it is a project dependency\", appDep);", "originalCommit": "e4a1dc32a1aaf8791fa521b192c638dac35208ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA5OTYyNw==", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364099627", "bodyText": "It could be.. but the logging of the added dependencies in addToClasspaths is info so I thought it made sense to be on same level", "author": "tobad357", "createdAt": "2020-01-08T07:51:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA5OTIxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIwMzgwNQ==", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364203805", "bodyText": "+1 to be debug", "author": "gastaldi", "createdAt": "2020-01-08T12:19:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA5OTIxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIxMTcyMQ==", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364211721", "bodyText": "You can also replace this snippet with appArtifact.setSubModule(id instanceof ProjectComponentIdentifier) \ud83d\ude09", "author": "gastaldi", "createdAt": "2020-01-08T12:42:25Z", "path": "devtools/gradle/src/main/java/io/quarkus/gradle/AppModelGradleResolver.java", "diffHunk": "@@ -192,6 +194,10 @@ private ModuleIdentifier getModuleId(ResolvedArtifact a) {\n     private AppDependency toAppDependency(ResolvedArtifact a) {\n         final String[] split = a.getModuleVersion().toString().split(\":\");\n         final AppArtifact appArtifact = new AppArtifact(split[0], split[1], split[2]);\n+        final ComponentIdentifier id = a.getId().getComponentIdentifier();\n+        if (id instanceof ProjectComponentIdentifier) {\n+            appArtifact.setSubModule(true);\n+        }", "originalCommit": "6e0b4a10664be507c6513348d0f029d06b375dbe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIxMjA2MA==", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364212060", "bodyText": "Or simply appArtifact.setSubModule(a.getId().getComponentIdentifier() instanceof ProjectComponentIdentifier);", "author": "gastaldi", "createdAt": "2020-01-08T12:43:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIxMTcyMQ=="}], "type": "inlineReview"}, {"oid": "15bbb0ff36bad4e0839e35bcb35a96ed092ac570", "url": "https://github.com/quarkusio/quarkus/commit/15bbb0ff36bad4e0839e35bcb35a96ed092ac570", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath\n\nChange logging to debug", "committedDate": "2020-01-08T12:42:07Z", "type": "forcePushed"}, {"oid": "be74264edf9f15108dcce8b84658b9317e83ff48", "url": "https://github.com/quarkusio/quarkus/commit/be74264edf9f15108dcce8b84658b9317e83ff48", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath\n\nChange logging to debug\n\nSimplify check if ProjectComponentIdentifier", "committedDate": "2020-01-08T12:45:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIxMzIwOQ==", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364213209", "bodyText": "I think this import is unused now?", "author": "gastaldi", "createdAt": "2020-01-08T12:46:37Z", "path": "devtools/gradle/src/main/java/io/quarkus/gradle/AppModelGradleResolver.java", "diffHunk": "@@ -23,6 +23,8 @@\n import org.gradle.api.artifacts.ModuleVersionIdentifier;\n import org.gradle.api.artifacts.ResolvedArtifact;\n import org.gradle.api.artifacts.ResolvedConfiguration;\n+import org.gradle.api.artifacts.component.ComponentIdentifier;", "originalCommit": "be74264edf9f15108dcce8b84658b9317e83ff48", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIxNTUwOA==", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364215508", "bodyText": "Sorted", "author": "tobad357", "createdAt": "2020-01-08T12:53:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIxMzIwOQ=="}], "type": "inlineReview"}, {"oid": "c56ee9556b8a256151b7f307fc02a96d7f50b4d5", "url": "https://github.com/quarkusio/quarkus/commit/c56ee9556b8a256151b7f307fc02a96d7f50b4d5", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath\n\nChange logging to debug\n\nSimplify check if ProjectComponentIdentifier\n\nRemove unused import", "committedDate": "2020-01-08T12:51:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI5MTE3OA==", "url": "https://github.com/quarkusio/quarkus/pull/6455#discussion_r364291178", "bodyText": "Please remove this leftover.", "author": "aloubyansky", "createdAt": "2020-01-08T15:31:13Z", "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/model/AppArtifact.java", "diffHunk": "@@ -11,6 +11,8 @@\n \n     protected Path path;\n \n+    protected boolean subModule;", "originalCommit": "0918b8efd5ef3b9106e5141e07952517c2f7fcb5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b27ebf41a7fd12162035c6dffda5b1bf3296a19f", "url": "https://github.com/quarkusio/quarkus/commit/b27ebf41a7fd12162035c6dffda5b1bf3296a19f", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath", "committedDate": "2020-01-08T15:34:07Z", "type": "commit"}, {"oid": "b27ebf41a7fd12162035c6dffda5b1bf3296a19f", "url": "https://github.com/quarkusio/quarkus/commit/b27ebf41a7fd12162035c6dffda5b1bf3296a19f", "message": "This fixes issue #6442 that project dependencies end up twice on the quarkusDev classpath", "committedDate": "2020-01-08T15:34:07Z", "type": "forcePushed"}]}