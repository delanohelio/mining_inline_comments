{"pr_number": 11499, "pr_title": "Make LocaleConverter more lenient", "pr_createdAt": "2020-08-20T15:21:10Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11499", "timeline": [{"oid": "f5195343ccb659756a0130827c074cfe46e21900", "url": "https://github.com/quarkusio/quarkus/commit/f5195343ccb659756a0130827c074cfe46e21900", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test", "committedDate": "2020-08-20T15:36:24Z", "type": "forcePushed"}, {"oid": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d", "url": "https://github.com/quarkusio/quarkus/commit/ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test", "committedDate": "2020-08-20T15:38:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExMDYyNg==", "url": "https://github.com/quarkusio/quarkus/pull/11499#discussion_r474110626", "bodyText": "I think I would prefer if we kept these tests but also check that the locale is not Locale.ROOT.", "author": "gsmet", "createdAt": "2020-08-20T16:23:51Z", "path": "core/runtime/src/main/java/io/quarkus/runtime/configuration/LocaleConverter.java", "diffHunk": "@@ -29,11 +29,6 @@ public Locale convert(final String value) {\n             return null;\n         }\n \n-        Locale locale = Locale.forLanguageTag(NORMALIZE_LOCALE_PATTERN.matcher(localeValue).replaceAll(\"-\"));\n-        if (locale.getLanguage() == null || locale.getLanguage().isEmpty()) {", "originalCommit": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDEyNjc3OQ==", "url": "https://github.com/quarkusio/quarkus/pull/11499#discussion_r474126779", "bodyText": "Done", "author": "gastaldi", "createdAt": "2020-08-20T16:42:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExMDYyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExMTAyMQ==", "url": "https://github.com/quarkusio/quarkus/pull/11499#discussion_r474111021", "bodyText": "Good catch.", "author": "gsmet", "createdAt": "2020-08-20T16:24:31Z", "path": "core/runtime/src/test/java/io/quarkus/runtime/configuration/LocaleConverterTest.java", "diffHunk": "@@ -19,8 +20,16 @@ public void testStandardLocale() {\n     @Test\n     public void testUnderscoreLocale() {\n         LocaleConverter localeConverter = new LocaleConverter();\n-        Locale locale = localeConverter.convert(\"fr-FR\");\n+        Locale locale = localeConverter.convert(\"fr_FR\");", "originalCommit": "ce42eca2568e41eb4dcb01cf7a60620bf73b1a9d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2d67ef50683287ab130294ff0744e8abfab601fa", "url": "https://github.com/quarkusio/quarkus/commit/2d67ef50683287ab130294ff0744e8abfab601fa", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test", "committedDate": "2020-08-20T16:42:05Z", "type": "forcePushed"}, {"oid": "4afde7622d20cce580124060239b7617be965d12", "url": "https://github.com/quarkusio/quarkus/commit/4afde7622d20cce580124060239b7617be965d12", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test", "committedDate": "2020-08-20T16:46:05Z", "type": "commit"}, {"oid": "4afde7622d20cce580124060239b7617be965d12", "url": "https://github.com/quarkusio/quarkus/commit/4afde7622d20cce580124060239b7617be965d12", "message": "Make LocaleConverter lenient\n\nThis is necessary in environments where the C.UTF-8 locale is used (like in IBM Cloud toolchain environments).\n\nFixes #11430\n\nFix underscore locale test", "committedDate": "2020-08-20T16:46:05Z", "type": "forcePushed"}]}