{"pr_number": 13899, "pr_title": "Dev Console", "pr_createdAt": "2020-12-15T13:52:00Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13899", "timeline": [{"oid": "eea329f5f0b449364c3f210e939ca22d06296db8", "url": "https://github.com/quarkusio/quarkus/commit/eea329f5f0b449364c3f210e939ca22d06296db8", "message": "Support adding a description to additional route build items\n\nTo be displayed in the 404 page", "committedDate": "2020-12-15T16:53:14Z", "type": "forcePushed"}, {"oid": "aa36a743933f186363c940aa51d68f7a65a3ba34", "url": "https://github.com/quarkusio/quarkus/commit/aa36a743933f186363c940aa51d68f7a65a3ba34", "message": "DEV console docs: fix mistake", "committedDate": "2020-12-16T14:45:11Z", "type": "forcePushed"}, {"oid": "d5e6d22c5f8580279b814c9df75393d6c5af92aa", "url": "https://github.com/quarkusio/quarkus/commit/d5e6d22c5f8580279b814c9df75393d6c5af92aa", "message": "Allow for non-app routes without a redirect", "committedDate": "2020-12-18T00:04:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTkzMDE3Ng==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r545930176", "bodyText": "If this method is the only reason why CacheManagerImpl.getAllCaches was added (but I suspect there's another reason), then I'd suggest to iterate over the caches names using CacheManager.getCacheNames and then retrieve the desired cache using CacheManager.getCache.", "author": "gwenneg", "createdAt": "2020-12-18T16:02:41Z", "path": "extensions/cache/runtime/src/main/java/io/quarkus/cache/runtime/devconsole/CacheDevConsoleRecorder.java", "diffHunk": "@@ -0,0 +1,32 @@\n+package io.quarkus.cache.runtime.devconsole;\n+\n+import io.quarkus.cache.runtime.CaffeineCacheSupplier;\n+import io.quarkus.cache.runtime.caffeine.CaffeineCache;\n+import io.quarkus.devconsole.runtime.spi.DevConsolePostHandler;\n+import io.quarkus.devconsole.runtime.spi.FlashScopeUtil.FlashMessageStatus;\n+import io.quarkus.runtime.annotations.Recorder;\n+import io.vertx.core.Handler;\n+import io.vertx.core.MultiMap;\n+import io.vertx.ext.web.RoutingContext;\n+\n+@Recorder\n+public class CacheDevConsoleRecorder {\n+\n+    public Handler<RoutingContext> clearCacheHandler() {\n+        return new DevConsolePostHandler() {\n+            @Override\n+            protected void handlePost(RoutingContext event, MultiMap form) throws Exception {\n+                String cacheName = form.get(\"name\");\n+                for (CaffeineCache cache : CaffeineCacheSupplier.allCaches()) {\n+                    if (cache.getName().equals(cacheName)) {\n+                        cache.invalidateAll();\n+                        // redirect to the same page so we can make sure we see the updated results\n+                        flashMessage(event, \"Cache for \" + cacheName + \" cleared\");\n+                        return;\n+                    }\n+                }", "originalCommit": "d5e6d22c5f8580279b814c9df75393d6c5af92aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTkzNDYxMg==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r545934612", "bodyText": "Probably, yes.", "author": "FroMage", "createdAt": "2020-12-18T16:10:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTkzMDE3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTkzNzI0Mg==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r545937242", "bodyText": "Yeah", "author": "geoand", "createdAt": "2020-12-18T16:14:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTkzMDE3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk1NTc5OA==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r545955798", "bodyText": "Rewrote this, is it better?", "author": "FroMage", "createdAt": "2020-12-18T16:45:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTkzMDE3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk4MjQ0MQ==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r545982441", "bodyText": "Yes, thanks!", "author": "gwenneg", "createdAt": "2020-12-18T17:33:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTkzMDE3Ng=="}], "type": "inlineReview"}, {"oid": "04682180ae08ff2c7fe6f4686ff3c4c419aa9065", "url": "https://github.com/quarkusio/quarkus/commit/04682180ae08ff2c7fe6f4686ff3c4c419aa9065", "message": "DEV Console: support for Windows paths", "committedDate": "2020-12-18T16:44:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk3OTczNg==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r545979736", "bodyText": "You don't need to inject the impl anymore:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    CacheManagerImpl cacheManager = cacheManager();\n          \n          \n            \n                    CacheManager cacheManager = cacheManager();", "author": "gwenneg", "createdAt": "2020-12-18T17:28:29Z", "path": "extensions/cache/runtime/src/main/java/io/quarkus/cache/runtime/CaffeineCacheSupplier.java", "diffHunk": "@@ -0,0 +1,35 @@\n+package io.quarkus.cache.runtime;\n+\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.function.Supplier;\n+\n+import io.quarkus.arc.Arc;\n+import io.quarkus.cache.Cache;\n+import io.quarkus.cache.runtime.caffeine.CaffeineCache;\n+\n+public class CaffeineCacheSupplier implements Supplier<Collection<CaffeineCache>> {\n+\n+    @Override\n+    public List<CaffeineCache> get() {\n+        CacheManagerImpl cacheManager = cacheManager();", "originalCommit": "04682180ae08ff2c7fe6f4686ff3c4c419aa9065", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTc5OTUxNQ==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r551799515", "bodyText": "OK fixed.", "author": "FroMage", "createdAt": "2021-01-05T09:03:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk3OTczNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk4MTk4Ng==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r545981986", "bodyText": "This isn't really necessary (the names collection could be sorted before retrieving the cache instances), but it doesn't hurt to have this method public so I'm fine with either.", "author": "gwenneg", "createdAt": "2020-12-18T17:32:20Z", "path": "extensions/cache/runtime/src/main/java/io/quarkus/cache/runtime/AbstractCache.java", "diffHunk": "@@ -11,7 +11,7 @@\n \n     private Object defaultKey;\n \n-    protected abstract String getName();\n+    public abstract String getName();", "originalCommit": "04682180ae08ff2c7fe6f4686ff3c4c419aa9065", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk4Mzc5Mw==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r545983793", "bodyText": "It's used in the view.", "author": "FroMage", "createdAt": "2020-12-18T17:35:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk4MTk4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk4NTI1MQ==", "url": "https://github.com/quarkusio/quarkus/pull/13899#discussion_r545985251", "bodyText": "Oh sorry, I missed that. Then it's perfectly fine :)", "author": "gwenneg", "createdAt": "2020-12-18T17:38:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk4MTk4Ng=="}], "type": "inlineReview"}, {"oid": "8d60e230483025db130eafb7a14aad67437a07cf", "url": "https://github.com/quarkusio/quarkus/commit/8d60e230483025db130eafb7a14aad67437a07cf", "message": "DEV Console: support for Windows paths", "committedDate": "2021-01-05T09:03:00Z", "type": "forcePushed"}, {"oid": "3a6573a50ca7cd3b460b6d229a2adb6c3f3c1055", "url": "https://github.com/quarkusio/quarkus/commit/3a6573a50ca7cd3b460b6d229a2adb6c3f3c1055", "message": "DEV Console", "committedDate": "2021-01-05T16:08:51Z", "type": "commit"}, {"oid": "fa4ac405ba8f148201db8645d45a441149e7a2a4", "url": "https://github.com/quarkusio/quarkus/commit/fa4ac405ba8f148201db8645d45a441149e7a2a4", "message": "DEV Console: support for ArC", "committedDate": "2021-01-05T16:08:52Z", "type": "commit"}, {"oid": "3e9763d748a1fc4a76da944906d2925c9e5495d0", "url": "https://github.com/quarkusio/quarkus/commit/3e9763d748a1fc4a76da944906d2925c9e5495d0", "message": "DEV Console: support for cache", "committedDate": "2021-01-05T16:08:52Z", "type": "commit"}, {"oid": "e1cc09dea33f693a700d2bb6a3c2a367ce7fac62", "url": "https://github.com/quarkusio/quarkus/commit/e1cc09dea33f693a700d2bb6a3c2a367ce7fac62", "message": "DEV Console: support for container-image", "committedDate": "2021-01-05T16:08:52Z", "type": "commit"}, {"oid": "1088fdb61fdc1a42e738a59cc73b14bdaf96f4a4", "url": "https://github.com/quarkusio/quarkus/commit/1088fdb61fdc1a42e738a59cc73b14bdaf96f4a4", "message": "DEV Console: support for Windows paths", "committedDate": "2021-01-05T16:11:16Z", "type": "forcePushed"}, {"oid": "d6fb0bc3d5881f447d6af2ab8d747b52636eb49a", "url": "https://github.com/quarkusio/quarkus/commit/d6fb0bc3d5881f447d6af2ab8d747b52636eb49a", "message": "DEV Console: support for flyway", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "8dcb76663160e512050982e4b3c8f495a38e4601", "url": "https://github.com/quarkusio/quarkus/commit/8dcb76663160e512050982e4b3c8f495a38e4601", "message": "DEV Console: support for liquibase", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "9c43db0fdbec86bfcdb3d226d259566f1ca3f0f4", "url": "https://github.com/quarkusio/quarkus/commit/9c43db0fdbec86bfcdb3d226d259566f1ca3f0f4", "message": "DEV Console: support for qute", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "ab642a27850d5c8fa7c48b7bd23638c2f3bc077c", "url": "https://github.com/quarkusio/quarkus/commit/ab642a27850d5c8fa7c48b7bd23638c2f3bc077c", "message": "DEV Console: support for scheduler", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "2d37fcaed098691f82c43d6b203eac561e0a4ca6", "url": "https://github.com/quarkusio/quarkus/commit/2d37fcaed098691f82c43d6b203eac561e0a4ca6", "message": "DEV Console: support for kubernetes", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "4d01b0514ed84c957ddbb5e96c137ced088e38fe", "url": "https://github.com/quarkusio/quarkus/commit/4d01b0514ed84c957ddbb5e96c137ced088e38fe", "message": "DEV Console: support for openapi", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "46c9cde0a8769b4c4ce61604e9066428aa3d9fa9", "url": "https://github.com/quarkusio/quarkus/commit/46c9cde0a8769b4c4ce61604e9066428aa3d9fa9", "message": "RESTEasy Reactive Qute: use response media type by default", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "5283c3ad1a23ba7bbb3540b9dfc5321075e90434", "url": "https://github.com/quarkusio/quarkus/commit/5283c3ad1a23ba7bbb3540b9dfc5321075e90434", "message": "DEV Console: support RESTEasy Reactive", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "88babd136b9424c5376b522c08a545bfeab6a7b2", "url": "https://github.com/quarkusio/quarkus/commit/88babd136b9424c5376b522c08a545bfeab6a7b2", "message": "DEV Console: fixed openapi paths", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "11085dfa19a8b45327129aa25e88d25b35788d62", "url": "https://github.com/quarkusio/quarkus/commit/11085dfa19a8b45327129aa25e88d25b35788d62", "message": "DEV Console: moved from /@dev to /q/dev\n\nI'd have preferred to add a redirect from /q to /q/dev but couldn't figure out how to", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "3d82eccaf43b75fd577694ba62a29827bbbbd96b", "url": "https://github.com/quarkusio/quarkus/commit/3d82eccaf43b75fd577694ba62a29827bbbbd96b", "message": "Support adding a description to additional route build items\n\nTo be displayed in the 404 page", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "cf29ad87af373c1c81a94f04661b37f4683d39c9", "url": "https://github.com/quarkusio/quarkus/commit/cf29ad87af373c1c81a94f04661b37f4683d39c9", "message": "DEV Console: Added docs", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "27b357d5e6c9a6cdece0f82e7e3818357a581a61", "url": "https://github.com/quarkusio/quarkus/commit/27b357d5e6c9a6cdece0f82e7e3818357a581a61", "message": "Removed the pending `/` from `urlbase` because it's weird otherwise in templates", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "fe4a6ab844a36160f8fc45ce8469d4d9533cd15c", "url": "https://github.com/quarkusio/quarkus/commit/fe4a6ab844a36160f8fc45ce8469d4d9533cd15c", "message": "Link the three extension author pages", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "a525c41119eb97a3ac9d2be668debaf85b2b03a6", "url": "https://github.com/quarkusio/quarkus/commit/a525c41119eb97a3ac9d2be668debaf85b2b03a6", "message": "Dev console docs: add link to vert.x", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "ab819a37a32081adce5ede706b0bdd0b45d8ecf0", "url": "https://github.com/quarkusio/quarkus/commit/ab819a37a32081adce5ede706b0bdd0b45d8ecf0", "message": "DEV console docs: fix mistake", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "6e04c8c618dd5b034c19bb944ad36bb63a471516", "url": "https://github.com/quarkusio/quarkus/commit/6e04c8c618dd5b034c19bb944ad36bb63a471516", "message": "DEV Console docs: fix doc after review", "committedDate": "2021-01-05T17:09:30Z", "type": "commit"}, {"oid": "7a9b876c2de0a8a611591b585a384cde0b635b1c", "url": "https://github.com/quarkusio/quarkus/commit/7a9b876c2de0a8a611591b585a384cde0b635b1c", "message": "Add devconsole runtime SPI package", "committedDate": "2021-01-05T17:09:31Z", "type": "commit"}, {"oid": "36884aa76ac28eaa49068b6cabac9d8e11896344", "url": "https://github.com/quarkusio/quarkus/commit/36884aa76ac28eaa49068b6cabac9d8e11896344", "message": "Allow for non-app routes without a redirect", "committedDate": "2021-01-05T17:09:31Z", "type": "commit"}, {"oid": "f14b57d0c7cc00b0a62ec55f54294afa48d91f42", "url": "https://github.com/quarkusio/quarkus/commit/f14b57d0c7cc00b0a62ec55f54294afa48d91f42", "message": "DEV Console: support for Windows paths", "committedDate": "2021-01-05T17:09:31Z", "type": "commit"}, {"oid": "f14b57d0c7cc00b0a62ec55f54294afa48d91f42", "url": "https://github.com/quarkusio/quarkus/commit/f14b57d0c7cc00b0a62ec55f54294afa48d91f42", "message": "DEV Console: support for Windows paths", "committedDate": "2021-01-05T17:09:31Z", "type": "forcePushed"}]}