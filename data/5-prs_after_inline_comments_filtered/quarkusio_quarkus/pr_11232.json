{"pr_number": 11232, "pr_title": "Gradle: avoid resolving deprecated compileOnly configuration", "pr_createdAt": "2020-08-05T14:25:50Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11232", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc5NjYzNQ==", "url": "https://github.com/quarkusio/quarkus/pull/11232#discussion_r465796635", "bodyText": "This static field is in fact a critical issue because an instance of this class will be shared between builds (and probably also projects).", "author": "aloubyansky", "createdAt": "2020-08-05T15:06:49Z", "path": "devtools/gradle/src/main/java/io/quarkus/gradle/builder/QuarkusModelBuilder.java", "diffHunk": "@@ -48,17 +46,27 @@\n import io.quarkus.gradle.tasks.QuarkusGradleUtils;\n import io.quarkus.runtime.LaunchMode;\n \n-public class QuarkusModelBuilder implements ParameterizedToolingModelBuilder {\n+public class QuarkusModelBuilder implements ParameterizedToolingModelBuilder<ModelParameter> {\n \n-    private static final List<String> scannedConfigurations = new LinkedList();", "originalCommit": "8fa0e79f7addf0cabd26be556ccac7f5b0eeb8ca", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ead334854b4d16845b6550d4cf1476885b669699", "url": "https://github.com/quarkusio/quarkus/commit/ead334854b4d16845b6550d4cf1476885b669699", "message": "Gradle: avoid resolving deprecated compileOnly configuration", "committedDate": "2020-08-05T15:09:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgzMzQ0Nw==", "url": "https://github.com/quarkusio/quarkus/pull/11232#discussion_r465833447", "bodyText": "It's not exactly doing the same thing so asking: is the order the same as before when we added things to the list below?\nThe order is different but considering the operations are different, maybe it's the same (or is of no importance).\nJust wanted to be sure.", "author": "gsmet", "createdAt": "2020-08-05T15:59:41Z", "path": "devtools/gradle/src/main/java/io/quarkus/gradle/builder/QuarkusModelBuilder.java", "diffHunk": "@@ -48,17 +46,27 @@\n import io.quarkus.gradle.tasks.QuarkusGradleUtils;\n import io.quarkus.runtime.LaunchMode;\n \n-public class QuarkusModelBuilder implements ParameterizedToolingModelBuilder {\n+public class QuarkusModelBuilder implements ParameterizedToolingModelBuilder<ModelParameter> {\n \n-    private static final List<String> scannedConfigurations = new LinkedList();\n+    private static Configuration classpathConfig(Project project, LaunchMode mode) {\n+        if (LaunchMode.TEST.equals(mode)) {\n+            return project.getConfigurations().getByName(JavaPlugin.TEST_RUNTIME_CLASSPATH_CONFIGURATION_NAME);\n+        }\n+        if (LaunchMode.DEVELOPMENT.equals(mode)) {\n+            return project.getConfigurations().create(\"quarkusDevMode\").extendsFrom(\n+                    project.getConfigurations().getByName(JavaPlugin.COMPILE_CLASSPATH_CONFIGURATION_NAME),\n+                    project.getConfigurations().getByName(JavaPlugin.RUNTIME_CLASSPATH_CONFIGURATION_NAME));", "originalCommit": "ead334854b4d16845b6550d4cf1476885b669699", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgzOTg4OQ==", "url": "https://github.com/quarkusio/quarkus/pull/11232#discussion_r465839889", "bodyText": "The order doesn't matter. We are after a combined set of those.", "author": "aloubyansky", "createdAt": "2020-08-05T16:09:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgzMzQ0Nw=="}], "type": "inlineReview"}, {"oid": "6724068f455afff5b550d5280d2ca3fa60fd3b38", "url": "https://github.com/quarkusio/quarkus/commit/6724068f455afff5b550d5280d2ca3fa60fd3b38", "message": "Gradle: avoid resolving deprecated compileOnly configuration", "committedDate": "2020-08-05T16:24:55Z", "type": "forcePushed"}, {"oid": "c7f68824b549be9ca1cef48b4901d5ddb435f784", "url": "https://github.com/quarkusio/quarkus/commit/c7f68824b549be9ca1cef48b4901d5ddb435f784", "message": "Gradle: avoid resolving deprecated compileOnly configuration", "committedDate": "2020-08-06T11:40:57Z", "type": "forcePushed"}, {"oid": "280eeb4be332566d42ba03c89095168eb55b2bd9", "url": "https://github.com/quarkusio/quarkus/commit/280eeb4be332566d42ba03c89095168eb55b2bd9", "message": "Gradle: avoid resolving deprecated compileOnly configuration", "committedDate": "2020-08-06T12:38:36Z", "type": "forcePushed"}, {"oid": "df94c2c68c9d1461f2ecbee868e9ce498118d01d", "url": "https://github.com/quarkusio/quarkus/commit/df94c2c68c9d1461f2ecbee868e9ce498118d01d", "message": "Gradle: avoid resolving deprecated compileOnly configuration", "committedDate": "2020-08-06T12:43:12Z", "type": "forcePushed"}, {"oid": "918ff4f3d564f7545914ddea1f343942219f28a9", "url": "https://github.com/quarkusio/quarkus/commit/918ff4f3d564f7545914ddea1f343942219f28a9", "message": "attempting to capture the logs from the build", "committedDate": "2020-08-06T14:07:10Z", "type": "forcePushed"}, {"oid": "baf7d56e2c194e4fa08a84e51d7f0f3e468af594", "url": "https://github.com/quarkusio/quarkus/commit/baf7d56e2c194e4fa08a84e51d7f0f3e468af594", "message": "attempting to capture the logs from the build", "committedDate": "2020-08-06T14:57:40Z", "type": "forcePushed"}, {"oid": "22ab33c0096e8d026e6e75eb519d07adf1ca7e49", "url": "https://github.com/quarkusio/quarkus/commit/22ab33c0096e8d026e6e75eb519d07adf1ca7e49", "message": "attempting to capture the logs from the build", "committedDate": "2020-08-06T15:58:06Z", "type": "forcePushed"}, {"oid": "3e6581c8287086b4f2211d5791a49c2c56e4f313", "url": "https://github.com/quarkusio/quarkus/commit/3e6581c8287086b4f2211d5791a49c2c56e4f313", "message": "Gradle: avoid resolving deprecated compileOnly configuration", "committedDate": "2020-08-06T18:48:39Z", "type": "commit"}, {"oid": "3e6581c8287086b4f2211d5791a49c2c56e4f313", "url": "https://github.com/quarkusio/quarkus/commit/3e6581c8287086b4f2211d5791a49c2c56e4f313", "message": "Gradle: avoid resolving deprecated compileOnly configuration", "committedDate": "2020-08-06T18:48:39Z", "type": "forcePushed"}]}