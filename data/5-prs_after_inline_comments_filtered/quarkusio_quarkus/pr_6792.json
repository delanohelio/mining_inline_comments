{"pr_number": 6792, "pr_title": "Drop GraalVM 19.2.1 support and deprecate enableJni option", "pr_createdAt": "2020-01-25T23:44:08Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6792", "timeline": [{"oid": "05516c473feb1cbf000fa2a49790993cb7991a58", "url": "https://github.com/quarkusio/quarkus/commit/05516c473feb1cbf000fa2a49790993cb7991a58", "message": "Drop GraalVM 19.2.1 support and deprecate enableJni option", "committedDate": "2020-01-25T23:54:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAwNTg5NQ==", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r371005895", "bodyText": "Just to be sure: have you tested that you don't have several identical messages when setting quarkus.jni.enable=false?", "author": "gsmet", "createdAt": "2020-01-26T15:05:36Z", "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java", "diffHunk": "@@ -176,8 +176,10 @@ public NativeImageBuildItem build(NativeConfig nativeConfig, NativeImageSourceJa\n                 //todo: this should be specific build items\n                 if (prop.getKey().equals(\"quarkus.ssl.native\") && prop.getValue() != null) {\n                     enableSslNative = Boolean.parseBoolean(prop.getValue());\n-                } else if (prop.getKey().equals(\"quarkus.jni.enable\") && prop.getValue() != null) {\n-                    nativeConfig.enableJni |= Boolean.parseBoolean(prop.getValue());\n+                } else if (prop.getKey().equals(\"quarkus.jni.enable\") && prop.getValue().equals(\"false\")) {\n+                    log.warn(\"Your application is setting the deprecated 'quarkus.jni.enable' configuration key to false.\"\n+                            + \" Please consider removing this configuration key as it is ignored (JNI is always enabled) and it\"\n+                            + \" will be removed in a future Quarkus version.\");", "originalCommit": "05516c473feb1cbf000fa2a49790993cb7991a58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNzU5NA==", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r371017594", "bodyText": "I did it with #6306 but I'll restest it again with this PR just to be sure.", "author": "gwenneg", "createdAt": "2020-01-26T17:48:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAwNTg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA5OTcwMA==", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372099700", "bodyText": "Unless I missed something, this warning is never displayed with the current Quarkus codebase. I suppose this is an old property that is no longer used by the core extensions, but it can still be used by 3rd parties extensions.\nOn the other hand, the warning from JniProcessor is displayed when quarkus.jni.enable is set to false.\nI don't think we should worry about duplicate warnings here since it's very unlikely to happen.", "author": "gwenneg", "createdAt": "2020-01-28T22:41:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAwNTg5NQ=="}], "type": "inlineReview"}, {"oid": "493d1aaff89efde2ba4d49984119430c32be2cd5", "url": "https://github.com/quarkusio/quarkus/commit/493d1aaff89efde2ba4d49984119430c32be2cd5", "message": "Trigger CI build and tests with JDK 11 in native mode (GitHub action)", "committedDate": "2020-01-27T00:49:35Z", "type": "forcePushed"}, {"oid": "4c193ae8d3cb0d4537c0e70862dd9d6433a4acfe", "url": "https://github.com/quarkusio/quarkus/commit/4c193ae8d3cb0d4537c0e70862dd9d6433a4acfe", "message": "Drop GraalVM 19.2.1 support and deprecate enableJni option", "committedDate": "2020-01-27T17:27:11Z", "type": "commit"}, {"oid": "4fe96c9308e8ecb97aff8baf88789d653b0be187", "url": "https://github.com/quarkusio/quarkus/commit/4fe96c9308e8ecb97aff8baf88789d653b0be187", "message": "Disable fail-fast and remove the Report step", "committedDate": "2020-01-27T17:30:39Z", "type": "forcePushed"}, {"oid": "4c193ae8d3cb0d4537c0e70862dd9d6433a4acfe", "url": "https://github.com/quarkusio/quarkus/commit/4c193ae8d3cb0d4537c0e70862dd9d6433a4acfe", "message": "Drop GraalVM 19.2.1 support and deprecate enableJni option", "committedDate": "2020-01-27T17:27:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwNzY5MA==", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372307690", "bodyText": "Should we start using Java 11 here?", "author": "gastaldi", "createdAt": "2020-01-29T10:40:28Z", "path": "core/deployment/src/main/java/io/quarkus/deployment/pkg/NativeConfig.java", "diffHunk": "@@ -132,7 +133,7 @@\n     /**\n      * The docker image to use to do the image build\n      */\n-    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.2.1\")\n+    @ConfigItem(defaultValue = \"quay.io/quarkus/ubi-quarkus-native-image:19.3.1-java8\")", "originalCommit": "4c193ae8d3cb0d4537c0e70862dd9d6433a4acfe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwOTIwMg==", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372309202", "bodyText": "I don't think so since it still experimental isn't it?", "author": "geoand", "createdAt": "2020-01-29T10:43:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwNzY5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMxMDEwNw==", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372310107", "bodyText": "That's fine by me, maybe flip the switch when we require JDK 11 as the minimum version in the future", "author": "gastaldi", "createdAt": "2020-01-29T10:45:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwNzY5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMyNjA0Mw==", "url": "https://github.com/quarkusio/quarkus/pull/6792#discussion_r372326043", "bodyText": "Makes sense", "author": "geoand", "createdAt": "2020-01-29T11:21:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMwNzY5MA=="}], "type": "inlineReview"}]}