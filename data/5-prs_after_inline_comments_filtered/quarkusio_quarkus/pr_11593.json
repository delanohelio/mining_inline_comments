{"pr_number": 11593, "pr_title": "Ensure Json parsers are not removed during build when using kafka client.", "pr_createdAt": "2020-08-25T08:44:15Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11593", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI4OTEzNw==", "url": "https://github.com/quarkusio/quarkus/pull/11593#discussion_r476289137", "bodyText": "USe the string version of the class names, so you don't have to pull the dependencies.", "author": "cescoffier", "createdAt": "2020-08-25T08:56:14Z", "path": "extensions/kafka-client/deployment/src/main/java/io/quarkus/kafka/client/deployment/KafkaProcessor.java", "diffHunk": "@@ -255,4 +258,9 @@ HealthBuildItem addHealthCheck(KafkaBuildTimeConfig buildTimeConfig) {\n         return new HealthBuildItem(\"io.quarkus.kafka.client.health.KafkaHealthCheck\",\n                 buildTimeConfig.healthEnabled);\n     }\n+\n+    @BuildStep\n+    UnremovableBeanBuildItem ensureJsonParserAvailable() {\n+        return UnremovableBeanBuildItem.beanTypes(ObjectMapper.class, Jsonb.class);", "originalCommit": "c57ace7e1a4a22697a226b71aa5a2df5b8aaef4c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI5NzE1MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11593#discussion_r476297151", "bodyText": "Isn't that risky in the case the classes ever get renamed or moved? Can this be detected by the compiler then?", "author": "andreas-eberle", "createdAt": "2020-08-25T09:05:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI4OTEzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjMyNzA0MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11593#discussion_r476327041", "bodyText": "@cescoffier: I switched to using the string version as you suggested. When adding the deployment dependencies, the build didn't work anymore anyways. The current version worked for me.", "author": "andreas-eberle", "createdAt": "2020-08-25T09:54:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI4OTEzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM0NTk0MA==", "url": "https://github.com/quarkusio/quarkus/pull/11593#discussion_r476345940", "bodyText": "It's a bit more fragile but it's the only to not end up with a big dependency mess :).", "author": "gsmet", "createdAt": "2020-08-25T10:29:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI4OTEzNw=="}], "type": "inlineReview"}, {"oid": "f866dff0a0d7d7835b557cebe5ebd883f6c787b8", "url": "https://github.com/quarkusio/quarkus/commit/f866dff0a0d7d7835b557cebe5ebd883f6c787b8", "message": "Ensure Json parsers are not removed during build when using kafka client.", "committedDate": "2020-08-25T09:52:57Z", "type": "commit"}, {"oid": "f866dff0a0d7d7835b557cebe5ebd883f6c787b8", "url": "https://github.com/quarkusio/quarkus/commit/f866dff0a0d7d7835b557cebe5ebd883f6c787b8", "message": "Ensure Json parsers are not removed during build when using kafka client.", "committedDate": "2020-08-25T09:52:57Z", "type": "forcePushed"}]}