{"pr_number": 9060, "pr_title": "Hibernate Reactive extension", "pr_createdAt": "2020-05-04T17:02:28Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/9060", "timeline": [{"oid": "1f4a6a5f3e200201fb9ffecb925e283326cfbc4d", "url": "https://github.com/quarkusio/quarkus/commit/1f4a6a5f3e200201fb9ffecb925e283326cfbc4d", "message": "Update Hibernate Reactive extension to not require JDBC resources", "committedDate": "2020-05-18T19:36:19Z", "type": "forcePushed"}, {"oid": "15dc73365746acf47ebb6e2d1c57aa34e7310ead", "url": "https://github.com/quarkusio/quarkus/commit/15dc73365746acf47ebb6e2d1c57aa34e7310ead", "message": "Update Hibernate Reactive extension to not require JDBC resources", "committedDate": "2020-05-18T20:51:32Z", "type": "forcePushed"}, {"oid": "0bce254c88fe36203a277267fc593c425ddd27f5", "url": "https://github.com/quarkusio/quarkus/commit/0bce254c88fe36203a277267fc593c425ddd27f5", "message": "Support for Hibernate Reactive Mutiny API", "committedDate": "2020-05-26T21:27:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY0MTI1MA==", "url": "https://github.com/quarkusio/quarkus/pull/9060#discussion_r434641250", "bodyText": "Looks like a leftover.", "author": "FroMage", "createdAt": "2020-06-03T15:09:21Z", "path": "extensions/hibernate-orm/deployment/src/main/java/io/quarkus/hibernate/orm/deployment/HibernateOrmProcessor.java", "diffHunk": "@@ -166,6 +166,7 @@ public SystemPropertyBuildItem enforceDisableRuntimeEnhancer() {\n     }\n \n     @BuildStep\n+    //<<<<<<< HEAD", "originalCommit": "0bce254c88fe36203a277267fc593c425ddd27f5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY1MjQ2OQ==", "url": "https://github.com/quarkusio/quarkus/pull/9060#discussion_r434652469", "bodyText": "I doubt the version for CompletionStage works either: this creates a new Uni/CompletionStage that must be used in order for it to be terminated. This has no side-effect.", "author": "FroMage", "createdAt": "2020-06-03T15:24:39Z", "path": "extensions/hibernate-reactive/runtime/src/main/java/io/quarkus/hibernate/reactive/runtime/ReactiveSessionProducer.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package io.quarkus.hibernate.reactive.runtime;\n+\n+import java.util.concurrent.CompletionStage;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.context.RequestScoped;\n+import javax.enterprise.inject.Disposes;\n+import javax.enterprise.inject.Produces;\n+import javax.inject.Inject;\n+\n+import org.hibernate.reactive.mutiny.Mutiny;\n+import org.hibernate.reactive.stage.Stage;\n+\n+import io.quarkus.arc.DefaultBean;\n+import io.smallrye.mutiny.Uni;\n+\n+@ApplicationScoped\n+public class ReactiveSessionProducer {\n+\n+    @Inject\n+    private Stage.SessionFactory reactiveSessionFactory;\n+\n+    @Inject\n+    private Mutiny.SessionFactory mutinySessionFactory;\n+\n+    @Produces\n+    @RequestScoped\n+    @DefaultBean\n+    public CompletionStage<Stage.Session> stageSession() {\n+        return reactiveSessionFactory.openSession();\n+    }\n+\n+    @Produces\n+    @RequestScoped\n+    @DefaultBean\n+    public Uni<Mutiny.Session> mutinySession() {\n+        return mutinySessionFactory.openSession();\n+    }\n+\n+    public void disposeStageSession(@Disposes CompletionStage<Stage.Session> reactiveSession) {\n+        reactiveSession.whenComplete((s, t) -> {\n+            if (s != null)\n+                s.close();\n+        });\n+    }\n+\n+    public void disposeMutinySession(@Disposes Uni<Mutiny.Session> reactiveSession) {\n+    \t// TODO: @AGG this is not working, need to check w/ Clement to figure out the proper way", "originalCommit": "0bce254c88fe36203a277267fc593c425ddd27f5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "36379ac8642266b3d2077e8ba49a5dc75c04b785", "url": "https://github.com/quarkusio/quarkus/commit/36379ac8642266b3d2077e8ba49a5dc75c04b785", "message": "Adding a log cleanup filter for Hibernate Reactive", "committedDate": "2020-06-04T10:01:13Z", "type": "forcePushed"}, {"oid": "32c0610e5a7c0e1d3c83ce044e3df252013bb286", "url": "https://github.com/quarkusio/quarkus/commit/32c0610e5a7c0e1d3c83ce044e3df252013bb286", "message": "Initial Hibernate Reactive extension", "committedDate": "2020-06-04T16:24:35Z", "type": "commit"}, {"oid": "00f6e18759672edfa9efd10ded030d216856ea19", "url": "https://github.com/quarkusio/quarkus/commit/00f6e18759672edfa9efd10ded030d216856ea19", "message": "App booting with Hibernate Reactive", "committedDate": "2020-06-04T16:24:38Z", "type": "commit"}, {"oid": "6c2936d957f2af0135f6747333126c156e7e7b9e", "url": "https://github.com/quarkusio/quarkus/commit/6c2936d957f2af0135f6747333126c156e7e7b9e", "message": "Initial find test case passing", "committedDate": "2020-06-04T16:24:39Z", "type": "commit"}, {"oid": "b9f38cfa46c295e577e3e2a5a56d04d3789718e4", "url": "https://github.com/quarkusio/quarkus/commit/b9f38cfa46c295e577e3e2a5a56d04d3789718e4", "message": "Support for injecting RxSession", "committedDate": "2020-06-04T16:24:40Z", "type": "commit"}, {"oid": "1100e65bad3da624d8aeb76bdf3571e7be36a905", "url": "https://github.com/quarkusio/quarkus/commit/1100e65bad3da624d8aeb76bdf3571e7be36a905", "message": "Add support for injecting Mutiny.Session", "committedDate": "2020-06-04T16:24:40Z", "type": "commit"}, {"oid": "1bbced80f3140b979f9d6c1fdf29116d7ceebfca", "url": "https://github.com/quarkusio/quarkus/commit/1bbced80f3140b979f9d6c1fdf29116d7ceebfca", "message": "Make Rx producers @Typed so no qualifier is needed", "committedDate": "2020-06-04T16:24:40Z", "type": "commit"}, {"oid": "94e1fbeff6b3f8069462e785d63b719181d4eb2c", "url": "https://github.com/quarkusio/quarkus/commit/94e1fbeff6b3f8069462e785d63b719181d4eb2c", "message": "Add VertxPoolBuildItem for depending on generic Vertx Pools", "committedDate": "2020-06-04T16:24:41Z", "type": "commit"}, {"oid": "2e243903754dec7e0dd934b36365129ee243d2bb", "url": "https://github.com/quarkusio/quarkus/commit/2e243903754dec7e0dd934b36365129ee243d2bb", "message": "Modifications for native mode compatibility", "committedDate": "2020-06-04T16:24:42Z", "type": "commit"}, {"oid": "e9610588e0debdae3512d773354604a5e330fbcd", "url": "https://github.com/quarkusio/quarkus/commit/e9610588e0debdae3512d773354604a5e330fbcd", "message": "Make RxSession and RxSessionFactory producers @DefaultBean so app may override them", "committedDate": "2020-06-04T16:24:42Z", "type": "commit"}, {"oid": "96179ff23b555e395a00540e69b9a2a0a4676e5b", "url": "https://github.com/quarkusio/quarkus/commit/96179ff23b555e395a00540e69b9a2a0a4676e5b", "message": "Remove direct dependency on Mutiny", "committedDate": "2020-06-04T16:24:43Z", "type": "commit"}, {"oid": "8b162a1196e3581c5c09fac2ebce6e84fc584699", "url": "https://github.com/quarkusio/quarkus/commit/8b162a1196e3581c5c09fac2ebce6e84fc584699", "message": "Rebrand from HibernateRX to Hibernate Reactive", "committedDate": "2020-06-04T16:24:44Z", "type": "commit"}, {"oid": "e23a4aa23cecf9dc62c0a97df0ecbb479225c81d", "url": "https://github.com/quarkusio/quarkus/commit/e23a4aa23cecf9dc62c0a97df0ecbb479225c81d", "message": "Update Hibernate Reactive extension to not require JDBC resources", "committedDate": "2020-06-04T16:24:44Z", "type": "commit"}, {"oid": "723ea1ef14a59f283aa7babeaf2f711daf00ed89", "url": "https://github.com/quarkusio/quarkus/commit/723ea1ef14a59f283aa7babeaf2f711daf00ed89", "message": "Remaining rebranding from RX --> Reactive", "committedDate": "2020-06-04T16:24:46Z", "type": "commit"}, {"oid": "53adf10dd747fdb099630adf692b025576ab4fe6", "url": "https://github.com/quarkusio/quarkus/commit/53adf10dd747fdb099630adf692b025576ab4fe6", "message": "Support for Hibernate Reactive Mutiny API", "committedDate": "2020-06-04T16:24:47Z", "type": "commit"}, {"oid": "a20c7f54f10f0e03d11e2b13209409b62d101eb7", "url": "https://github.com/quarkusio/quarkus/commit/a20c7f54f10f0e03d11e2b13209409b62d101eb7", "message": "Adapt to Hibernate Reactive 1.0.0.Alpha5 changes in SPI", "committedDate": "2020-06-04T16:24:47Z", "type": "commit"}, {"oid": "08d47b5efcbc702eecb6c83b0e7c75cb860573b4", "url": "https://github.com/quarkusio/quarkus/commit/08d47b5efcbc702eecb6c83b0e7c75cb860573b4", "message": "Hibernate Reactive now suppporgs schema generation as well", "committedDate": "2020-06-04T16:24:47Z", "type": "commit"}, {"oid": "c2875daacd0f7ec952846c792d4566260e32e66d", "url": "https://github.com/quarkusio/quarkus/commit/c2875daacd0f7ec952846c792d4566260e32e66d", "message": "Add some design notes for maintenance", "committedDate": "2020-06-04T16:24:47Z", "type": "commit"}, {"oid": "01d882fec5397e00154f8de841a6e3ee9d203f3a", "url": "https://github.com/quarkusio/quarkus/commit/01d882fec5397e00154f8de841a6e3ee9d203f3a", "message": "Re-enable Hibernate Envers", "committedDate": "2020-06-04T16:24:48Z", "type": "commit"}, {"oid": "55a0e50c521e36ef96debec4118e16d7014b1f3b", "url": "https://github.com/quarkusio/quarkus/commit/55a0e50c521e36ef96debec4118e16d7014b1f3b", "message": "Review runtime dependency tree", "committedDate": "2020-06-04T16:24:49Z", "type": "commit"}, {"oid": "5bcfce8405c87d71621e2aac2b8c6fa88e288ea6", "url": "https://github.com/quarkusio/quarkus/commit/5bcfce8405c87d71621e2aac2b8c6fa88e288ea6", "message": "Code formatting rules applied", "committedDate": "2020-06-04T16:24:49Z", "type": "commit"}, {"oid": "e275ad8b1dabdab9f6bc9f087648f2ddc956e5e9", "url": "https://github.com/quarkusio/quarkus/commit/e275ad8b1dabdab9f6bc9f087648f2ddc956e5e9", "message": "Simplify inconsistencies in choice of PersistenceProvider implementation", "committedDate": "2020-06-04T16:24:50Z", "type": "commit"}, {"oid": "e6d6b6c929e3c6c2b09cc3f1744d1020b38e01c3", "url": "https://github.com/quarkusio/quarkus/commit/e6d6b6c929e3c6c2b09cc3f1744d1020b38e01c3", "message": "Customize the reactive service initiators list", "committedDate": "2020-06-04T16:24:50Z", "type": "commit"}, {"oid": "254ec541ee125f4ac60ecc1f974bef7db7088f8f", "url": "https://github.com/quarkusio/quarkus/commit/254ec541ee125f4ac60ecc1f974bef7db7088f8f", "message": "Use testing properties connecting to localhost by default", "committedDate": "2020-06-04T16:24:50Z", "type": "commit"}, {"oid": "a5d7b67c181d38585680adc67e92611f686b21d5", "url": "https://github.com/quarkusio/quarkus/commit/a5d7b67c181d38585680adc67e92611f686b21d5", "message": "Adding a log cleanup filter for Hibernate Reactive", "committedDate": "2020-06-04T16:24:50Z", "type": "commit"}, {"oid": "f2a857280eff1b8696d1b194320029409240a82c", "url": "https://github.com/quarkusio/quarkus/commit/f2a857280eff1b8696d1b194320029409240a82c", "message": "Add Hibernate Reactive integration tests to CI", "committedDate": "2020-06-04T16:57:30Z", "type": "forcePushed"}, {"oid": "e80818900edba14d743e5beaafb94edde475faf8", "url": "https://github.com/quarkusio/quarkus/commit/e80818900edba14d743e5beaafb94edde475faf8", "message": "Mark Hibernate Reactive extension as preview", "committedDate": "2020-06-04T17:58:59Z", "type": "commit"}, {"oid": "0f342f0150f9d1b79edccbb0985dd2ae25518445", "url": "https://github.com/quarkusio/quarkus/commit/0f342f0150f9d1b79edccbb0985dd2ae25518445", "message": "Add hibernate reactive tests to CI", "committedDate": "2020-06-04T18:02:13Z", "type": "forcePushed"}, {"oid": "9e870d11b6e1b93d908419ba2d3054d300ab95b6", "url": "https://github.com/quarkusio/quarkus/commit/9e870d11b6e1b93d908419ba2d3054d300ab95b6", "message": "Add hibernate reactive tests to CI", "committedDate": "2020-06-04T23:08:28Z", "type": "commit"}, {"oid": "9e870d11b6e1b93d908419ba2d3054d300ab95b6", "url": "https://github.com/quarkusio/quarkus/commit/9e870d11b6e1b93d908419ba2d3054d300ab95b6", "message": "Add hibernate reactive tests to CI", "committedDate": "2020-06-04T23:08:28Z", "type": "forcePushed"}, {"oid": "9e870d11b6e1b93d908419ba2d3054d300ab95b6", "url": "https://github.com/quarkusio/quarkus/commit/9e870d11b6e1b93d908419ba2d3054d300ab95b6", "message": "Add hibernate reactive tests to CI", "committedDate": "2020-06-04T23:08:28Z", "type": "forcePushed"}]}