{"pr_number": 10328, "pr_title": "Devmode: introduce quarkus.live-reload.watched-resources", "pr_createdAt": "2020-06-28T19:27:48Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/10328", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjkzMjU1MQ==", "url": "https://github.com/quarkusio/quarkus/pull/10328#discussion_r446932551", "bodyText": "For me the idea is to extend io.quarkus.deployment.LiveReloadConfig and move the top class comment on top of the existing properties.\nI would include your property first to have something clean.", "author": "gsmet", "createdAt": "2020-06-29T12:29:49Z", "path": "core/deployment/src/main/java/io/quarkus/deployment/dev/DevModeConfig.java", "diffHunk": "@@ -0,0 +1,17 @@\n+package io.quarkus.deployment.dev;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+import io.quarkus.runtime.annotations.ConfigItem;\n+import io.quarkus.runtime.annotations.ConfigRoot;\n+\n+@ConfigRoot(name = \"devmode\")\n+public class DevModeConfig {", "originalCommit": "e4c4ee97c727e1163c6c3eeb8c046200267ca0fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk3NjM2Ng==", "url": "https://github.com/quarkusio/quarkus/pull/10328#discussion_r446976366", "bodyText": "I would include your property first to have something clean.\n\nYou mean leave it additional-watched-resources?", "author": "famod", "createdAt": "2020-06-29T13:36:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjkzMjU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIyMTM1OA==", "url": "https://github.com/quarkusio/quarkus/pull/10328#discussion_r447221358", "bodyText": "Yes, the property name is OK IMO. I was just saying you should put yours before the dummy ones we already have in io.quarkus.deployment.LiveReloadConfig.", "author": "gsmet", "createdAt": "2020-06-29T20:04:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjkzMjU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI0MTM5NA==", "url": "https://github.com/quarkusio/quarkus/pull/10328#discussion_r447241394", "bodyText": "Done.", "author": "famod", "createdAt": "2020-06-29T20:42:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjkzMjU1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3MzEyNA==", "url": "https://github.com/quarkusio/quarkus/pull/10328#discussion_r447373124", "bodyText": "More of a curiosity than a review comment - For types like List does it add value to wrap it add around a Optional? If no config values are provided for the property, then the config management framework can perhaps just create an empty list?", "author": "jaikiran", "createdAt": "2020-06-30T02:37:55Z", "path": "core/runtime/src/main/java/io/quarkus/runtime/LiveReloadConfig.java", "diffHunk": "@@ -1,20 +1,21 @@\n package io.quarkus.runtime;\n \n+import java.util.List;\n import java.util.Optional;\n \n import io.quarkus.runtime.annotations.ConfigItem;\n import io.quarkus.runtime.annotations.ConfigPhase;\n import io.quarkus.runtime.annotations.ConfigRoot;\n \n-/**\n- * This is used currently only to suppress warnings about unknown properties\n- * when the user supplies something like: -Dquarkus.live-reload.password=secret\n- *\n- * TODO refactor code to actually use these values\n- */\n @ConfigRoot(phase = ConfigPhase.BUILD_AND_RUN_TIME_FIXED)\n public class LiveReloadConfig {\n \n+    /**\n+     * The names of additional resources to watch for changes, triggering a reload on change.\n+     */\n+    @ConfigItem\n+    public Optional<List<String>> additionalWatchedResources;", "originalCommit": "6a68735c86974a5a5283728cbc3315cbd43d2120", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzY0NDc4OQ==", "url": "https://github.com/quarkusio/quarkus/pull/10328#discussion_r447644789", "bodyText": "Ah ah, you want to talk to @dmlloyd about that :).\nIf you want to allow the empty list, you need an Optional.", "author": "gsmet", "createdAt": "2020-06-30T12:31:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3MzEyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODExNTEzNg==", "url": "https://github.com/quarkusio/quarkus/pull/10328#discussion_r448115136", "bodyText": "I don't remember the exact reason (although David certainly does and perhaps @ia3andy to whom David had explained it recently), but what Guillaume says is spot on.", "author": "geoand", "createdAt": "2020-07-01T04:56:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3MzEyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODExODI5Mg==", "url": "https://github.com/quarkusio/quarkus/pull/10328#discussion_r448118292", "bodyText": "@dmlloyd will confirm but from what I remember, it was to be consistant for all different types, it's not Optional if not specified as an Optional whatever the type. and you can always decide to convert the empty optional to an empty list when consuming it.\nI have a task in my todos to document that a bit better, but it's always sliding, I need to get to it \ud83d\ude05, aw and I created an issue:\n#8306", "author": "ia3andy", "createdAt": "2020-07-01T05:09:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3MzEyNA=="}], "type": "inlineReview"}, {"oid": "a9e32575dd9a798623ff6b5a839b485a424e2c68", "url": "https://github.com/quarkusio/quarkus/commit/a9e32575dd9a798623ff6b5a839b485a424e2c68", "message": "Devmode: introduce live-reload.watched-resources", "committedDate": "2020-07-08T16:09:54Z", "type": "commit"}]}