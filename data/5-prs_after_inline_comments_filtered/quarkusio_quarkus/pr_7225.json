{"pr_number": 7225, "pr_title": "Artifacts may not contain the version", "pr_createdAt": "2020-02-17T13:14:56Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/7225", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE4NDU0OA==", "url": "https://github.com/quarkusio/quarkus/pull/7225#discussion_r380184548", "bodyText": "Just curious why this line was replaced?", "author": "aloubyansky", "createdAt": "2020-02-17T13:35:27Z", "path": "devtools/gradle/src/main/java/io/quarkus/gradle/AppModelGradleResolver.java", "diffHunk": "@@ -140,7 +140,7 @@ public AppModel resolveModel(AppArtifact appArtifact) throws AppModelResolverExc\n         final List<AppDependency> fullDeploymentDeps = new ArrayList<>();\n         if (!extensionDeps.isEmpty()) {\n             final Configuration deploymentConfig = project.getConfigurations()\n-                    .detachedConfiguration(extensionDeps.toArray(new Dependency[extensionDeps.size()]));", "originalCommit": "44ffbfba453856f38c588745f97e52fc4ca4f8d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE4NTI5OA==", "url": "https://github.com/quarkusio/quarkus/pull/7225#discussion_r380185298", "bodyText": "I assume because of: https://shipilev.net/blog/2016/arrays-wisdom-ancients/#_conclusion", "author": "geoand", "createdAt": "2020-02-17T13:36:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE4NDU0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE4NjA4NQ==", "url": "https://github.com/quarkusio/quarkus/pull/7225#discussion_r380186085", "bodyText": "IntellIJ was complaining about it. Apparently this is not an issue anymore in 2020:\n\nCall to 'toArray()' with pre-sized array argument 'new Dependency[extensionDeps.size()]'\nInspection info: There are two styles to convert a collection to an array: either using a pre-sized array (like c.toArray(new String[c.size()])) or using an empty array (like c.toArray(new String[0]).\nIn older Java versions using pre-sized array was recommended, as the reflection call which is necessary to create an array of proper size was quite slow. However since late updates of OpenJDK 6 this call was intrinsified, making the performance of the empty array version the same and sometimes even better, compared to the pre-sized version. Also passing pre-sized array is dangerous for a concurrent or synchronized collection as a data race is possible between the size and toArray call which may result in extra nulls at the end of the array, if the collection was concurrently shrunk during the operation.\nThis inspection allows to follow the uniform style: either using an empty array (which is recommended in modern Java) or using a pre-sized array (which might be faster in older Java versions or non-HotSpot based JVMs).", "author": "gastaldi", "createdAt": "2020-02-17T13:38:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE4NDU0OA=="}], "type": "inlineReview"}, {"oid": "736542003342fd4d585c87cbe345fa1ccca7a22c", "url": "https://github.com/quarkusio/quarkus/commit/736542003342fd4d585c87cbe345fa1ccca7a22c", "message": "Artifacts may not contain the version\n\nFixes #7217", "committedDate": "2020-02-17T18:30:50Z", "type": "commit"}]}