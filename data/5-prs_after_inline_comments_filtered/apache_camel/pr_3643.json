{"pr_number": 3643, "pr_title": "CAMEL-13844: RestConfiguration - Make it simpler and only have one", "pr_createdAt": "2020-03-17T11:04:53Z", "pr_url": "https://github.com/apache/camel/pull/3643", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYyNTk3NQ==", "url": "https://github.com/apache/camel/pull/3643#discussion_r393625975", "bodyText": "I know default interface methods are nice, but can we move this to AbstractCamelContext so we dont end up cluttering this interface with code.", "author": "davsclaus", "createdAt": "2020-03-17T11:57:02Z", "path": "core/camel-api/src/main/java/org/apache/camel/CamelContext.java", "diffHunk": "@@ -412,6 +412,19 @@\n      */\n     Endpoint getEndpoint(String uri);\n \n+    /**\n+     * Resolves the given uri to an {@link Endpoint} of the specified type.\n+     *\n+     * @param fmt the string format\n+     * @param args the arguments referenced by the format\n+     * @return the endpoint\n+     *\n+     * @see #getEndpoint(String)\n+     */\n+    default Endpoint getEndpointF(String fmt, Object... args) {", "originalCommit": "6d65984d1ce1192cf1cb5c1a9669a6883b36ddbf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY3MjM3MA==", "url": "https://github.com/apache/camel/pull/3643#discussion_r393672370", "bodyText": "I think I will remove it as I was supposed to find the pattern to create URIs with string format more often but in fact I think it is not so popular", "author": "lburgazzoli", "createdAt": "2020-03-17T13:19:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYyNTk3NQ=="}], "type": "inlineReview"}, {"oid": "ddbeda06e37696305dafe73f60b439aea7a70773", "url": "https://github.com/apache/camel/commit/ddbeda06e37696305dafe73f60b439aea7a70773", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one", "committedDate": "2020-03-17T13:33:46Z", "type": "forcePushed"}, {"oid": "ceac05b5d5fba33b23cc8a21179e0eb917e200a3", "url": "https://github.com/apache/camel/commit/ceac05b5d5fba33b23cc8a21179e0eb917e200a3", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one", "committedDate": "2020-03-17T18:16:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEyMjQ4Nw==", "url": "https://github.com/apache/camel/pull/3643#discussion_r394122487", "bodyText": "Instead of the Suppler then just use a String parameter. It doesnt make sense to use a function here IMHO.", "author": "davsclaus", "createdAt": "2020-03-18T06:03:46Z", "path": "core/camel-support/src/main/java/org/apache/camel/support/CamelContextHelper.java", "diffHunk": "@@ -587,4 +590,53 @@ public static String getRouteId(NamedNode node) {\n         return parent != null ? parent.getId() : null;\n     }\n \n+    /**\n+     * Gets the {@link RestConfiguration} from the {@link CamelContext} and check if the component which consumes the\n+     * configuration is compatible with the one for which the rest configuration is set-up.\n+     *\n+     * @param camelContext the camel context\n+     * @param component the component that will consume the {@link RestConfiguration}\n+     * @return the {@link RestConfiguration}\n+     * @throws IllegalArgumentException is the component is not compatible with the {@link RestConfiguration} set-up\n+     */\n+    public static RestConfiguration getRestConfiguration(CamelContext camelContext, String component) {\n+        RestConfiguration configuration = camelContext.getRestConfiguration();\n+\n+        validateRestConfigurationComponent(component, () -> configuration.getComponent());\n+\n+        return configuration;\n+    }\n+\n+    /**\n+     * Gets the {@link RestConfiguration} from the {@link CamelContext} and check if the component which consumes the\n+     * configuration is compatible with the one for which the rest configuration is set-up.\n+     *\n+     * @param camelContext the camel context\n+     * @param component the component that will consume the {@link RestConfiguration}\n+     * @param producerComponent the producer component that will consume the {@link RestConfiguration}\n+     * @return the {@link RestConfiguration}\n+     * @throws IllegalArgumentException is the component is not compatible with the {@link RestConfiguration} set-up\n+     */\n+    public static RestConfiguration getRestConfiguration(CamelContext camelContext, String component, String producerComponent) {\n+        RestConfiguration configuration = camelContext.getRestConfiguration();\n+\n+        validateRestConfigurationComponent(component, () -> configuration.getComponent());\n+        validateRestConfigurationComponent(producerComponent, () -> configuration.getProducerComponent());\n+\n+        return configuration;\n+    }\n+\n+    private static void validateRestConfigurationComponent(String component, Supplier<String> configurationComponentFn) {", "originalCommit": "ceac05b5d5fba33b23cc8a21179e0eb917e200a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEyNzAxMA==", "url": "https://github.com/apache/camel/pull/3643#discussion_r394127010", "bodyText": "I does not, I've re-factored that bit many times so the final iteration is simpler and does not require any fancy stuff.\nThx for spotting it", "author": "lburgazzoli", "createdAt": "2020-03-18T06:21:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEyMjQ4Nw=="}], "type": "inlineReview"}, {"oid": "d1779fd8d2e523c83a3cf8f742984c46b6f5dc93", "url": "https://github.com/apache/camel/commit/d1779fd8d2e523c83a3cf8f742984c46b6f5dc93", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one", "committedDate": "2020-03-18T07:52:23Z", "type": "forcePushed"}, {"oid": "0575b993623abe92584270d608022ce7efade37a", "url": "https://github.com/apache/camel/commit/0575b993623abe92584270d608022ce7efade37a", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one", "committedDate": "2020-03-18T10:51:07Z", "type": "commit"}, {"oid": "719bc1ae1a0c5d9687ab18b6ead07a181bc74c9d", "url": "https://github.com/apache/camel/commit/719bc1ae1a0c5d9687ab18b6ead07a181bc74c9d", "message": "Add slf4j implementation to avoid warning when running tests", "committedDate": "2020-03-18T10:51:08Z", "type": "commit"}, {"oid": "fe7c2a9b21e8bc83a1465a7a0adcd5236066603e", "url": "https://github.com/apache/camel/commit/fe7c2a9b21e8bc83a1465a7a0adcd5236066603e", "message": "Fix usage of deprecated mockito method", "committedDate": "2020-03-18T10:58:40Z", "type": "commit"}, {"oid": "fe7c2a9b21e8bc83a1465a7a0adcd5236066603e", "url": "https://github.com/apache/camel/commit/fe7c2a9b21e8bc83a1465a7a0adcd5236066603e", "message": "Fix usage of deprecated mockito method", "committedDate": "2020-03-18T10:58:40Z", "type": "forcePushed"}]}