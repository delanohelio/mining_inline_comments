{"pr_number": 3464, "pr_title": "bean component now supports scope option", "pr_createdAt": "2020-01-07T09:05:42Z", "pr_url": "https://github.com/apache/camel/pull/3464", "timeline": [{"oid": "33e7fde6c9f8fa7ed0132647cb6050e90b43a52d", "url": "https://github.com/apache/camel/commit/33e7fde6c9f8fa7ed0132647cb6050e90b43a52d", "message": "Polished", "committedDate": "2020-01-06T19:07:16Z", "type": "commit"}, {"oid": "000fbb01af6676b6f21cc5187cdf296f5ea09965", "url": "https://github.com/apache/camel/commit/000fbb01af6676b6f21cc5187cdf296f5ea09965", "message": "CAMEL-14359: camel-bean is now singleton scoped by default (cache=true).", "committedDate": "2020-01-06T19:07:16Z", "type": "commit"}, {"oid": "bc61558af28a1d41c98f3f8068c50af50cb31d7d", "url": "https://github.com/apache/camel/commit/bc61558af28a1d41c98f3f8068c50af50cb31d7d", "message": "CAMEL-14359: camel-bean is now singleton scoped by default (cache=true).", "committedDate": "2020-01-06T19:07:16Z", "type": "commit"}, {"oid": "7e06e5fc4be0129c93b077aa08994375907c2ca3", "url": "https://github.com/apache/camel/commit/7e06e5fc4be0129c93b077aa08994375907c2ca3", "message": "CAMEL-14359: camel-bean is now singleton scoped by default (cache=true).", "committedDate": "2020-01-06T19:21:08Z", "type": "commit"}, {"oid": "2745841d1ecf27e06766adf8716325a33e314138", "url": "https://github.com/apache/camel/commit/2745841d1ecf27e06766adf8716325a33e314138", "message": "CAMEL-14359: camel-bean - Adding bean scope option.", "committedDate": "2020-01-06T19:41:11Z", "type": "commit"}, {"oid": "5e1bfe28dca3c33be93407d66c4ee4df3aba5796", "url": "https://github.com/apache/camel/commit/5e1bfe28dca3c33be93407d66c4ee4df3aba5796", "message": "CAMEL-14359: camel-bean - Adding bean scope option.", "committedDate": "2020-01-07T06:17:47Z", "type": "commit"}, {"oid": "22f40215456fa6c53da2ed461212db22e032ee94", "url": "https://github.com/apache/camel/commit/22f40215456fa6c53da2ed461212db22e032ee94", "message": "CAMEL-14359: camel-bean - Adding bean scope option.", "committedDate": "2020-01-07T07:35:29Z", "type": "commit"}, {"oid": "123f92f9e7c5c36c63d08aa465358b59a41df2fd", "url": "https://github.com/apache/camel/commit/123f92f9e7c5c36c63d08aa465358b59a41df2fd", "message": "CAMEL-14359: camel-bean - Adding bean scope option.", "committedDate": "2020-01-07T08:58:52Z", "type": "commit"}, {"oid": "b016deca9004e899261ea370b12644882996694f", "url": "https://github.com/apache/camel/commit/b016deca9004e899261ea370b12644882996694f", "message": "CAMEL-14359: camel-bean - Adding bean scope option.", "committedDate": "2020-01-07T09:03:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY2ODMzMw==", "url": "https://github.com/apache/camel/pull/3464#discussion_r363668333", "bodyText": "Maybe The bean does not have to be thread-safe would be clearer (as it is o.k. for the bean to be thread-safe)? What do you think?", "author": "PascalSchumacher", "createdAt": "2020-01-07T09:50:43Z", "path": "components/camel-bean/src/main/java/org/apache/camel/component/bean/BeanComponent.java", "diffHunk": "@@ -36,9 +37,19 @@\n     @SuppressWarnings(\"unchecked\")\n     private final Map<BeanInfoCacheKey, BeanInfo> beanInfoCache = LRUCacheFactory.newLRUSoftCache(1000);\n \n-    @Metadata(label = \"advanced\", description = \"If enabled, Camel will cache the result of the first Registry look-up.\"\n-        + \" Cache can be enabled if the bean in the Registry is defined as a singleton scope.\")\n+    @Deprecated\n+    @Metadata(defaultValue = \"true\", description = \"Use singleton option instead.\")\n     private Boolean cache;\n+    @Metadata(defaultValue = \"Singleton\", description = \"Scope of bean.\"\n+            + \" When using singleton scope (default) the bean is created or looked up only once and reused for the lifetime of the endpoint.\"\n+            + \" The bean should be thread-safe in case concurrent threads is calling the bean at the same time.\"\n+            + \" When using request scope the bean is created or looked up once per request (exchange). This can be used if you want to store state on a bean\"\n+            + \" while processing a request and you want to call the same bean instance multiple times while processing the request.\"\n+            + \" The bean should not be thread-safe as the instance is only called from the same request.  \"", "originalCommit": "b016deca9004e899261ea370b12644882996694f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzcyNzQyNg==", "url": "https://github.com/apache/camel/pull/3464#discussion_r363727426", "bodyText": "Yeah well spotted, thanks", "author": "davsclaus", "createdAt": "2020-01-07T12:34:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY2ODMzMw=="}], "type": "inlineReview"}, {"oid": "e931bac27d1c657c113da113d352e74a4a03c268", "url": "https://github.com/apache/camel/commit/e931bac27d1c657c113da113d352e74a4a03c268", "message": "CAMEL-14359: camel-bean - Update docs, thanks to Pascal for the feedback", "committedDate": "2020-01-07T12:41:57Z", "type": "commit"}]}