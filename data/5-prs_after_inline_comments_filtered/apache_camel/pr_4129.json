{"pr_number": 4129, "pr_title": "CAMEL-15420 camel-http dynamic aware removes Exchange.HTTP_QUERY head\u2026", "pr_createdAt": "2020-08-25T18:09:38Z", "pr_url": "https://github.com/apache/camel/pull/4129", "timeline": [{"oid": "4efe06b54f212e40cbe2b9b08fbbe094474eacc3", "url": "https://github.com/apache/camel/commit/4efe06b54f212e40cbe2b9b08fbbe094474eacc3", "message": "CAMEL-15420 camel-http dynamic aware removes Exchange.HTTP_QUERY header if Exchange.HTTP_PATH header not specified (backport to 2.5.x)", "committedDate": "2020-08-25T18:06:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzAyNTYyNg==", "url": "https://github.com/apache/camel/pull/4129#discussion_r477025626", "bodyText": "You need to check for the headers like done here: https://github.com/apache/camel/blob/master/components/camel-http/src/test/java/org/apache/camel/component/http/HttpSendDynamicAwareHeadersTest.java#L42", "author": "davsclaus", "createdAt": "2020-08-26T04:24:36Z", "path": "components/camel-http4/src/test/java/org/apache/camel/component/http4/HttpSendDynamicAwareHeadersTest.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.component.http4;\n+\n+import org.apache.camel.Exchange;\n+import org.apache.camel.RoutesBuilder;\n+import org.apache.camel.builder.RouteBuilder;\n+import org.apache.camel.component.http4.handler.BasicValidationHandler;\n+import org.apache.http.impl.bootstrap.HttpServer;\n+import org.apache.http.impl.bootstrap.ServerBootstrap;\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+public class HttpSendDynamicAwareHeadersTest extends BaseHttpTest {\n+\n+    private HttpServer localServer;\n+\n+    @Before\n+    @Override\n+    public void setUp() throws Exception {\n+        localServer = ServerBootstrap.bootstrap()\n+                .setHttpProcessor(getBasicHttpProcessor())\n+                .setConnectionReuseStrategy(getConnectionReuseStrategy())\n+                .setResponseFactory(getHttpResponseFactory())\n+                .setExpectationVerifier(getHttpExpectationVerifier())\n+                .setSslContext(getSSLContext())\n+                .registerHandler(\"/dynamicAware\", new BasicValidationHandler(\"GET\", null, null, null)).create();", "originalCommit": "4efe06b54f212e40cbe2b9b08fbbe094474eacc3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b6b36a44f1fd6cd1671c62934a5a9272699affb3", "url": "https://github.com/apache/camel/commit/b6b36a44f1fd6cd1671c62934a5a9272699affb3", "message": "CAMEL-15420 camel-http dynamic aware removes Exchange.HTTP_QUERY header if Exchange.HTTP_PATH header not specified (backport to 2.5.x).\n\nExpected query check added", "committedDate": "2020-08-26T06:28:14Z", "type": "commit"}]}