{"pr_number": 805, "pr_title": "#738 - Fix path handling for NpmProxySlice", "pr_createdAt": "2020-12-14T08:38:44Z", "pr_url": "https://github.com/artipie/artipie/pull/805", "timeline": [{"oid": "b64097bab1a617c8688f5487740c7aa5670c8427", "url": "https://github.com/artipie/artipie/commit/b64097bab1a617c8688f5487740c7aa5670c8427", "message": "#738 - Fix path for NpmProxySlice", "committedDate": "2020-12-14T08:31:18Z", "type": "commit"}, {"oid": "e5fb872a0903a183fcea4ff6fdc06b718ce6de5c", "url": "https://github.com/artipie/artipie/commit/e5fb872a0903a183fcea4ff6fdc06b718ce6de5c", "message": "#738 - Remove unused import", "committedDate": "2020-12-14T08:39:35Z", "type": "commit"}, {"oid": "924f013f390140ebe403701799f3a0d48a51860a", "url": "https://github.com/artipie/artipie/commit/924f013f390140ebe403701799f3a0d48a51860a", "message": "#738 - Fix qulice", "committedDate": "2020-12-14T08:43:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxNzE5Nw==", "url": "https://github.com/artipie/artipie/pull/805#discussion_r542217197", "bodyText": "@genryxy it is not something you added, but there is a big problem in this code. Vertx.vertx() call creates a Vert.x instance, a very heavy object. It should be created only once for whole application on start an reused everywhere. Could you please add a puzzle for solving this issue?", "author": "olegmoz", "createdAt": "2020-12-14T09:04:13Z", "path": "src/main/java/com/artipie/SliceFromConfig.java", "diffHunk": "@@ -250,15 +250,12 @@ static Slice build(\n                 );\n                 break;\n             case \"npm-proxy\":\n-                slice = trimIfNotStandalone(\n-                    settings, standalone,\n-                    new NpmProxySlice(\n-                        cfg.path(),\n-                        new NpmProxy(\n-                            new NpmProxyConfig(cfg.settings().orElseThrow()),\n-                            Vertx.vertx(),\n-                            cfg.storage()\n-                        )\n+                slice = new NpmProxySlice(\n+                    cfg.path(),\n+                    new NpmProxy(\n+                        new NpmProxyConfig(cfg.settings().orElseThrow()),\n+                        Vertx.vertx(),", "originalCommit": "924f013f390140ebe403701799f3a0d48a51860a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d5eed8888e57fb6b353835f76cc87e0e041ff540", "url": "https://github.com/artipie/artipie/commit/d5eed8888e57fb6b353835f76cc87e0e041ff540", "message": "#738 - Add todo", "committedDate": "2020-12-14T09:22:48Z", "type": "commit"}, {"oid": "bf3c7421fa96bc649cc7b2d6150c7673689a6743", "url": "https://github.com/artipie/artipie/commit/bf3c7421fa96bc649cc7b2d6150c7673689a6743", "message": "Merge branch 'master' into 738-fixPathNpmProxySlice", "committedDate": "2020-12-14T09:27:46Z", "type": "commit"}]}