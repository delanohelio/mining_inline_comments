{"pr_number": 174, "pr_title": "enable npm auth and fix path issue", "pr_createdAt": "2020-05-26T15:22:14Z", "pr_url": "https://github.com/artipie/artipie/pull/174", "timeline": [{"oid": "6210659811c364fef49f826cde129929206a6b40", "url": "https://github.com/artipie/artipie/commit/6210659811c364fef49f826cde129929206a6b40", "message": "enable npm auth and fix path issue", "committedDate": "2020-05-26T15:21:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg4MDM5NA==", "url": "https://github.com/artipie/artipie/pull/174#discussion_r430880394", "bodyText": "@brastak why do we need both: storage and Npm(storage)? It seems we can pass only storage and construct Npm(storage) internally in NpmSlice, WDYT?", "author": "g4s8", "createdAt": "2020-05-27T06:17:28Z", "path": "src/main/java/com/artipie/SliceFromConfig.java", "diffHunk": "@@ -90,9 +91,16 @@ public SliceFromConfig(final RepoConfig config, final Vertx vertx,\n                         \"file\", config -> CompletableFuture.completedStage(new FilesSlice(storage, permissions, auth))\n                     ),\n                     new MapEntry<>(\n-                        \"npm\", config -> CompletableFuture.completedStage(\n-                        new NpmSlice(new Npm(storage), storage)\n-                    )\n+                        \"npm\", config -> config.path().thenCombine(\n+                            config.settings(),\n+                            (path, settings) -> new NpmSlice(\n+                                path,\n+                                new Npm(storage),", "originalCommit": "6210659811c364fef49f826cde129929206a6b40", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk5NjI4MQ==", "url": "https://github.com/artipie/artipie/pull/174#discussion_r430996281", "bodyText": "@g4s8 It's previous design that I have not changed. Currently, UploadSlice saves a file directly to Storage, then Npm  processes the uploaded file and saves transformed metadata to Storage, then UploadSlice removes an original uploaded file from Storage.\nReally, such design makes sense because of Npm is used by our clients and it's their responsibility to put initial file to the right place. But I can add todo and introduce all processing cycle into Npm", "author": "brastak", "createdAt": "2020-05-27T09:51:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg4MDM5NA=="}], "type": "inlineReview"}]}