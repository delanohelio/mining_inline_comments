{"pr_number": 2548, "pr_title": "feat(android): added configurable icon color for local notifications", "pr_createdAt": "2020-03-10T15:07:43Z", "pr_url": "https://github.com/ionic-team/capacitor/pull/2548", "timeline": [{"oid": "b1ec8cbf28bc23aa3a3f05d468f8668d399f65e9", "url": "https://github.com/ionic-team/capacitor/commit/b1ec8cbf28bc23aa3a3f05d468f8668d399f65e9", "message": "added configurable icon color for android local notifications", "committedDate": "2020-03-10T15:01:31Z", "type": "commit"}, {"oid": "627cf9718877b925d048d75cb743c5b6260f52c3", "url": "https://github.com/ionic-team/capacitor/commit/627cf9718877b925d048d75cb743c5b6260f52c3", "message": "updated the api documentation for webpage", "committedDate": "2020-03-10T18:06:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI1NDIxMw==", "url": "https://github.com/ionic-team/capacitor/pull/2548#discussion_r393254213", "bodyText": "this crash if the color is not valid, put it inside a try catch (check other plugins like Browser or Statusbar)", "author": "jcesarmobile", "createdAt": "2020-03-16T19:10:43Z", "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/notification/LocalNotificationManager.java", "diffHunk": "@@ -174,6 +175,12 @@ private void buildNotification(NotificationManagerCompat notificationManager, Lo\n     mBuilder.setOnlyAlertOnce(true);\n \n     mBuilder.setSmallIcon(localNotification.getSmallIcon(context));\n+\n+    String iconColor = localNotification.getIconColor();\n+    if (iconColor != null) {\n+      mBuilder.setColor(Color.parseColor(iconColor));", "originalCommit": "627cf9718877b925d048d75cb743c5b6260f52c3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2403ed4fcd6f5c1b54b0160fa3c000993779fa70", "url": "https://github.com/ionic-team/capacitor/commit/2403ed4fcd6f5c1b54b0160fa3c000993779fa70", "message": "catch exception for bad color string", "committedDate": "2020-03-16T19:30:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYwMDQ0MQ==", "url": "https://github.com/ionic-team/capacitor/pull/2548#discussion_r393600441", "bodyText": "For consistency, better use the same error message as Status Bar plugin\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    call.error(\"The iconColor string was not able to be parsed.  Please provide a valid string hexidecimal color code.\", ex);\n          \n          \n            \n                    call.error(\"Invalid color provided. Must be a hex string (ex: #ff0000\");", "author": "jcesarmobile", "createdAt": "2020-03-17T11:07:39Z", "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/notification/LocalNotificationManager.java", "diffHunk": "@@ -174,6 +175,17 @@ private void buildNotification(NotificationManagerCompat notificationManager, Lo\n     mBuilder.setOnlyAlertOnce(true);\n \n     mBuilder.setSmallIcon(localNotification.getSmallIcon(context));\n+\n+    String iconColor = localNotification.getIconColor();\n+    if (iconColor != null) {\n+      try {\n+        mBuilder.setColor(Color.parseColor(iconColor));\n+      } catch (Exception ex) {\n+        call.error(\"The iconColor string was not able to be parsed.  Please provide a valid string hexidecimal color code.\", ex);", "originalCommit": "2403ed4fcd6f5c1b54b0160fa3c000993779fa70", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg0ODkwNw==", "url": "https://github.com/ionic-team/capacitor/pull/2548#discussion_r393848907", "bodyText": "fixed", "author": "andysousa", "createdAt": "2020-03-17T17:28:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYwMDQ0MQ=="}], "type": "inlineReview"}, {"oid": "96418553c00763221e5a1635720ecd91b5e42005", "url": "https://github.com/ionic-team/capacitor/commit/96418553c00763221e5a1635720ecd91b5e42005", "message": "PR feedback", "committedDate": "2020-03-17T17:25:58Z", "type": "commit"}]}