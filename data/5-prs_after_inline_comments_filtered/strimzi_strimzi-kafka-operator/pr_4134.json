{"pr_number": 4134, "pr_title": "Remove the remains of the -server JVM option", "pr_createdAt": "2020-12-20T01:13:24Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4134", "timeline": [{"oid": "24ae7fe4fbe5ac8b20759ea4ed6a3ec5d904783e", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/24ae7fe4fbe5ac8b20759ea4ed6a3ec5d904783e", "message": "Remove the remains of the -server JVM option\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T01:08:45Z", "type": "commit"}, {"oid": "b2a356958ca64b49b140eb702fb99d6f4e54d7e6", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b2a356958ca64b49b140eb702fb99d6f4e54d7e6", "message": "Fix system tests\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T01:22:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjYwNjIwOA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4134#discussion_r546606208", "bodyText": "I don't think this change is backwards compatible in the sense that, IIRC, newer versions of kube will reject CRs which have properties which don't fit the schema. Someone using such a version of kube might have a CR with -server: true which was accepted with Strimzi 0.20.0 but rejected in 0.21.0. Obviously we can remove all the code in the operator which consumes this value, and change the description.\nWe were contemplating redesigning JvmOptions for v1beta2 anyway, so I guess we should just go ahead and do that, adding @PreventInVersions(\"v1alpha1-v1beta1\") to the property.", "author": "tombentley", "createdAt": "2020-12-21T09:45:19Z", "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -59,16 +58,6 @@ public void setXms(String xms) {\n         this.xms = xms;\n     }\n \n-    @JsonProperty(\"-server\")\n-    @Description(\"-server option to to the JVM\")\n-    public Boolean isServer() {", "originalCommit": "b2a356958ca64b49b140eb702fb99d6f4e54d7e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjYyNjc2MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4134#discussion_r546626761", "bodyText": "@tombentley As I write in the description - this change completely disappeared from the API 2 years ago when the type was changed from boolean to Boolean. So it is not there for ~2 years and by that logic Kubernetes are rejecting the CRs with it since then. As you can see, this PR does not change any CRDs because it is long gone from them. Then I opened #4088 where I added it back. You suggested there that it should be removed instead if it is not needed anymore. So I closed #4088 and removed it in this PR. But if you want to instead have it added back, I can reopen #4088 again.", "author": "scholzj", "createdAt": "2020-12-21T10:26:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjYwNjIwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjYyODE1Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4134#discussion_r546628157", "bodyText": "Yes, sorry, you're quite right.", "author": "tombentley", "createdAt": "2020-12-21T10:29:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjYwNjIwOA=="}], "type": "inlineReview"}]}