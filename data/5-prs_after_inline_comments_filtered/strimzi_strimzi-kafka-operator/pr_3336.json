{"pr_number": 3336, "pr_title": "Integrate strimzi-kafka-oauth 0.6.0 features", "pr_createdAt": "2020-07-17T15:29:28Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3336", "timeline": [{"oid": "ac2114b5317e7aa541e037babf514d2d88109c26", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ac2114b5317e7aa541e037babf514d2d88109c26", "message": "Document config options for additional features provided by strimzi-kafka-oauth 0.6.0\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-11T08:57:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc2NzE0OQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3336#discussion_r469767149", "bodyText": "are you missing the @Default to 60 or it's defined somehow elsewhere?", "author": "ppatierno", "createdAt": "2020-08-13T07:58:35Z", "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaAuthorizationKeycloak.java", "diffHunk": "@@ -96,6 +98,25 @@ public void setDelegateToKafkaAcls(boolean delegateToKafkaAcls) {\n         this.delegateToKafkaAcls = delegateToKafkaAcls;\n     }\n \n+    @Description(\"The time between two consecutive grants refresh runs in seconds. The default value is 60.\")\n+    public Integer getGrantsRefreshPeriodSeconds() {", "originalCommit": "8a4e8743c89333b5cd1f3792b10f1f79316bcc54", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzgxOTc5MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3336#discussion_r473819790", "bodyText": "It will default to 60 in strimzi-kafka-oauth lib. You think it's better to let operator set the default? That indeed seems a pattern used as much as possible. I'll try fix that.", "author": "mstruk", "createdAt": "2020-08-20T09:38:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc2NzE0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI4MjY4Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3336#discussion_r474282682", "bodyText": "You can keep it in the library as well. You don't have to remove it from there.", "author": "scholzj", "createdAt": "2020-08-20T21:28:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc2NzE0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQ1MDc4Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3336#discussion_r474450786", "bodyText": "Yes, didn't touch oauth lib.", "author": "mstruk", "createdAt": "2020-08-21T07:05:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc2NzE0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc2NzI4Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3336#discussion_r469767283", "bodyText": "ditto as above, about missing default.", "author": "ppatierno", "createdAt": "2020-08-13T07:58:48Z", "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaAuthorizationKeycloak.java", "diffHunk": "@@ -96,6 +98,25 @@ public void setDelegateToKafkaAcls(boolean delegateToKafkaAcls) {\n         this.delegateToKafkaAcls = delegateToKafkaAcls;\n     }\n \n+    @Description(\"The time between two consecutive grants refresh runs in seconds. The default value is 60.\")\n+    public Integer getGrantsRefreshPeriodSeconds() {\n+        return grantsRefreshPeriodSeconds;\n+    }\n+\n+    public void setGrantsRefreshPeriodSeconds(Integer grantsRefreshPeriodSeconds) {\n+        this.grantsRefreshPeriodSeconds = grantsRefreshPeriodSeconds;\n+    }\n+\n+    @Description(\"The number of threads to use to refresh grants for active sessions. The more threads, the more parallelism, the sooner the job completes,\" +", "originalCommit": "8a4e8743c89333b5cd1f3792b10f1f79316bcc54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bd1a8f608c893298a032cd84592d833989b0eb56", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bd1a8f608c893298a032cd84592d833989b0eb56", "message": "Integrate strimzi-kafka-oauth 0.6.0 features\n\nThe following config options are added to `oauth` type `authentication` of Kafka CRD:\n\n- `jwksMinRefreshPauseSeconds`\n  The minimum pause between two consecutive JWKS keys refresh jobs\n- `maxSecondsWithoutReauthentication`\n  Turns on Kafka Broker re-authentication which enforces access token timeout on client sessions\n\nThe following config options are added to `keycloak` type `authorization` of Kafka CRD:\n\n- `grantsRefreshPeriodSeconds`\n  The time between two consecutive grants refresh runs\n- `grantsRefreshPoolSize`\n  The number of threads to use to refresh (in parallel) the grants for active sessions\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>\n\nAdditional test and validation\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-19T12:49:38Z", "type": "commit"}, {"oid": "26b60c9429eef355d433c9ecebe16eedc0273dae", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/26b60c9429eef355d433c9ecebe16eedc0273dae", "message": "Document config options for additional features provided by strimzi-kafka-oauth 0.6.0\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-19T12:49:53Z", "type": "commit"}, {"oid": "9df513f41dcda7093c7aa1ccb2411999a0416b7b", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9df513f41dcda7093c7aa1ccb2411999a0416b7b", "message": "Add tmp maven repo with oauth 0.6.0 artifacts\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-19T12:49:53Z", "type": "commit"}, {"oid": "7f2b9601e16e18785aae282512485bdf93c04251", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7f2b9601e16e18785aae282512485bdf93c04251", "message": "Fix testGenerateDeploymentWithKeycloakAuthorization()\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-19T12:49:53Z", "type": "commit"}, {"oid": "b9476217e4a3e0f09beec04ec0770dc5b2087a0c", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b9476217e4a3e0f09beec04ec0770dc5b2087a0c", "message": "Add staging maven repository to kafka-thirdparty-libs project as well\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-19T12:49:53Z", "type": "commit"}, {"oid": "565de2f8689f0bce54f7998c9f6265c5b594ac13", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/565de2f8689f0bce54f7998c9f6265c5b594ac13", "message": "Fix setting the new authorization options\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-19T15:36:35Z", "type": "commit"}, {"oid": "565de2f8689f0bce54f7998c9f6265c5b594ac13", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/565de2f8689f0bce54f7998c9f6265c5b594ac13", "message": "Fix setting the new authorization options\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-19T15:36:35Z", "type": "forcePushed"}, {"oid": "4807cce744250e4c9ed4045e0d2bd0814abe6b4d", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4807cce744250e4c9ed4045e0d2bd0814abe6b4d", "message": "Add @DefaultValue and @Minimum to CRD definition of new authorization options\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-20T13:07:43Z", "type": "commit"}, {"oid": "c1de584e64ce874db0862a415222d8f664ee8909", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c1de584e64ce874db0862a415222d8f664ee8909", "message": "Apply suggestions from code review\n\nCo-authored-by: Daniel Laing <dlaing@redhat.com>\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-20T13:56:19Z", "type": "commit"}, {"oid": "812dfdde6f56013c187e66daf726e86c28182401", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/812dfdde6f56013c187e66daf726e86c28182401", "message": "Apply more suggestions from docs review\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-20T13:56:19Z", "type": "commit"}, {"oid": "812dfdde6f56013c187e66daf726e86c28182401", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/812dfdde6f56013c187e66daf726e86c28182401", "message": "Apply more suggestions from docs review\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-20T13:56:19Z", "type": "forcePushed"}, {"oid": "6421bf162aa26782a1887d6012da6b5f4b1dd91c", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6421bf162aa26782a1887d6012da6b5f4b1dd91c", "message": "Apply suggestions from code review\n\nCo-authored-by: Daniel Laing <dlaing@redhat.com>\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-20T18:02:58Z", "type": "commit"}, {"oid": "3cadee1cc04086af8f6ee36c99ed550147231d5f", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/3cadee1cc04086af8f6ee36c99ed550147231d5f", "message": "Documentation changes based on suggestions\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-20T18:19:56Z", "type": "commit"}, {"oid": "3cadee1cc04086af8f6ee36c99ed550147231d5f", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/3cadee1cc04086af8f6ee36c99ed550147231d5f", "message": "Documentation changes based on suggestions\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-20T18:19:56Z", "type": "forcePushed"}, {"oid": "52b4dacd8329fae8e0b8921c2a3919d476450e68", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/52b4dacd8329fae8e0b8921c2a3919d476450e68", "message": "Update derived resources\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-20T19:31:35Z", "type": "commit"}, {"oid": "37b6734c65516ccc5eb227b6c453e94ee6697f25", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/37b6734c65516ccc5eb227b6c453e94ee6697f25", "message": "Remove staging repository for strimzi-kafka-oauth 0.6.0\n\nSigned-off-by: Marko Strukelj <marko.strukelj@gmail.com>", "committedDate": "2020-08-21T13:29:16Z", "type": "commit"}]}