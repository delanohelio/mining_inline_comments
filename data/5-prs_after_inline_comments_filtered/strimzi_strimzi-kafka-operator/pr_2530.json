{"pr_number": 2530, "pr_title": "ST: Add test which check kubectl get strimzi", "pr_createdAt": "2020-02-10T18:57:50Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530", "timeline": [{"oid": "13c5d8d457f1648e28235b166a6df2ebf5698817", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/13c5d8d457f1648e28235b166a6df2ebf5698817", "message": "Add test which check kubectl get strimzi\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-02-10T18:39:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwMDM5Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#discussion_r377500393", "bodyText": "is there a plan for some other test to check that even Kafka Bridge, Mirror Maker, Mirror Maker 2 and Connect are there as well?", "author": "ppatierno", "createdAt": "2020-02-11T08:46:07Z", "path": "systemtest/src/test/java/io/strimzi/systemtest/LogSettingST.java", "diffHunk": "@@ -245,6 +249,23 @@ void testGcLoggingSetDisabled() {\n         assertThat(\"Mirror-maker GC logging is disabled\", checkGcLoggingDeployments(KafkaMirrorMakerResources.deploymentName(CLUSTER_NAME)), is(false));\n     }\n \n+    @Test\n+    @Order(11)\n+    void testKubectlGetStrimzi() {\n+        String userName = \"test-user\";\n+        String topicName = \"test-topic\";\n+\n+        KafkaTopicResource.topic(CLUSTER_NAME, topicName).done();\n+        KafkaUserResource.tlsUser(CLUSTER_NAME, userName).done();\n+\n+        String strimziCRs = cmdKubeClient().execInCurrentNamespace(\"get\", \"strimzi\").out();\n+\n+        assertThat(strimziCRs, containsString(CLUSTER_NAME));\n+        assertThat(strimziCRs, containsString(GC_LOGGING_SET_NAME));\n+        assertThat(strimziCRs, containsString(userName));\n+        assertThat(strimziCRs, containsString(topicName));", "originalCommit": "13c5d8d457f1648e28235b166a6df2ebf5698817", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwMjgwMA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#discussion_r377502800", "bodyText": "I guess that could be added to the ST for those specific CRs.", "author": "tombentley", "createdAt": "2020-02-11T08:52:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwMDM5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwNTY4Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#discussion_r377505683", "bodyText": "Well currently for example Bridge is deployed with same name as Kafka and only way how to distinguish it's Kafka and not Bridge could be via some regex. Question is - is that worthy? Or change the name of each component and assert all new names. I can try both later (there are other things with higher priority atm).", "author": "Frawless", "createdAt": "2020-02-11T08:58:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwMDM5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwNjg4Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#discussion_r377506886", "bodyText": "Why the bridge is deployed with the same name as Kafka? Even our examples have my-cluster and my-bridge as different names.", "author": "ppatierno", "createdAt": "2020-02-11T09:01:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwMDM5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUxMjg2Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#discussion_r377512867", "bodyText": "I think I just wanted to use only one variable. I will change it in this PR.", "author": "Frawless", "createdAt": "2020-02-11T09:14:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwMDM5Mw=="}], "type": "inlineReview"}, {"oid": "4192a1f8e8c49637d84ac9abce3ff643ce5a8acb", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4192a1f8e8c49637d84ac9abce3ff643ce5a8acb", "message": "Fix mm2 visibility by kubectl get strimzi\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-02-11T12:29:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYwODM5NA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#discussion_r377608394", "bodyText": "You have to build api module and do make crd_install to propagate this change into CRD files.", "author": "sknot-rh", "createdAt": "2020-02-11T12:38:04Z", "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaMirrorMaker2.java", "diffHunk": "@@ -36,7 +37,8 @@\n                 names = @Crd.Spec.Names(\n                         kind = KafkaMirrorMaker2.RESOURCE_KIND,\n                         plural = KafkaMirrorMaker2.RESOURCE_PLURAL,\n-                        shortNames = {KafkaMirrorMaker2.SHORT_NAME}\n+                        shortNames = {KafkaMirrorMaker2.SHORT_NAME},\n+                        categories = {STRIMZI_CATEGORY}", "originalCommit": "4192a1f8e8c49637d84ac9abce3ff643ce5a8acb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYxODE5MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#discussion_r377618191", "bodyText": "Fixed, thank you!", "author": "Frawless", "createdAt": "2020-02-11T12:59:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYwODM5NA=="}], "type": "inlineReview"}, {"oid": "53c8f829551b3dece20e3cc8f6d3f423f2af01ee", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/53c8f829551b3dece20e3cc8f6d3f423f2af01ee", "message": "fixup! Fix mm2 visibility by kubectl get strimzi\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-02-11T12:59:08Z", "type": "commit"}, {"oid": "a3b851f9c43e70904b1adacc6435f718a48a38b0", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a3b851f9c43e70904b1adacc6435f718a48a38b0", "message": "Fix mm2 deployment\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-02-11T16:42:34Z", "type": "commit"}, {"oid": "2ace91598ea1c12b0c9df7e1305c16932bd1e3a2", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2ace91598ea1c12b0c9df7e1305c16932bd1e3a2", "message": "Remove mm2, caus eit's not working properly\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-02-12T14:35:37Z", "type": "commit"}, {"oid": "114a80499cacc97762a2d35e4e2242f6b5907205", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/114a80499cacc97762a2d35e4e2242f6b5907205", "message": "Revert \"Remove mm2, caus eit's not working properly\"\n\nThis reverts commit 2ace91598ea1c12b0c9df7e1305c16932bd1e3a2.\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-02-13T07:35:16Z", "type": "commit"}, {"oid": "cafbad20dd62b4eddc96a6a59f8bdd15cd19d783", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cafbad20dd62b4eddc96a6a59f8bdd15cd19d783", "message": "Disable testGcLoggingSetDisabled cause issue in kafka rolling update\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>", "committedDate": "2020-02-13T08:19:55Z", "type": "commit"}]}