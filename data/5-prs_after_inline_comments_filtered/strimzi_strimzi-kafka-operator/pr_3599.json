{"pr_number": 3599, "pr_title": "[systemtest] Implementation of job methods to the kubeClient()", "pr_createdAt": "2020-09-03T13:04:37Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3599", "timeline": [{"oid": "b2bbbce3e16f700d15f0a286af34ed6348d74417", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b2bbbce3e16f700d15f0a286af34ed6348d74417", "message": "add implementation of jobClient\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-09-03T13:08:03Z", "type": "forcePushed"}, {"oid": "9af32547e2799f8284627a5b37a2ae387bf5fd2f", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9af32547e2799f8284627a5b37a2ae387bf5fd2f", "message": "frawless comment\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-09-03T14:16:58Z", "type": "forcePushed"}, {"oid": "4183d57d1825aaad6d3f3bef815a67c2fd684cdf", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4183d57d1825aaad6d3f3bef815a67c2fd684cdf", "message": "frawless comment\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-09-03T15:34:13Z", "type": "commit"}, {"oid": "4183d57d1825aaad6d3f3bef815a67c2fd684cdf", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4183d57d1825aaad6d3f3bef815a67c2fd684cdf", "message": "frawless comment\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-09-03T15:34:13Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzYxMTYxMQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3599#discussion_r483611611", "bodyText": "I would prepare to use the same approach as we have for deployment. Use current namespace if not specified and in case it's specified, use different.", "author": "Frawless", "createdAt": "2020-09-04T13:22:00Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/utils/ClientUtils.java", "diffHunk": "@@ -50,14 +50,13 @@ public static void waitUntilClientReceivedMessagesTls(KafkaClientOperations kafk\n     public static void waitTillContinuousClientsFinish(String producerName, String consumerName, String namespace, int messageCount) {\n         LOGGER.info(\"Waiting till producer {} and consumer {} finish\", producerName, consumerName);\n         TestUtils.waitFor(\"continuous clients finished\", Constants.GLOBAL_POLL_INTERVAL, timeoutForClientFinishJob(messageCount),\n-            () -> kubeClient().getClient().batch().jobs().inNamespace(namespace).withName(producerName).get().getStatus().getSucceeded().equals(1) &&\n-                    kubeClient().getClient().batch().jobs().inNamespace(namespace).withName(consumerName).get().getStatus().getSucceeded().equals(1));\n+            () -> kubeClient().getJobStatus(producerName, namespace) && kubeClient().getJobStatus(consumerName, namespace));\n     }\n \n     public static void waitForClientSuccess(String jobName, String namespace, int messageCount) {\n         LOGGER.info(\"Waiting for producer/consumer:{} will be finished\", jobName);\n         TestUtils.waitFor(\"job finished\", Constants.GLOBAL_POLL_INTERVAL, timeoutForClientFinishJob(messageCount),\n-            () -> kubeClient().getClient().batch().jobs().inNamespace(namespace).withName(jobName).get().getStatus().getSucceeded().equals(1));\n+            () -> kubeClient().getJobStatus(jobName, namespace));", "originalCommit": "4183d57d1825aaad6d3f3bef815a67c2fd684cdf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzYyODgyNQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3599#discussion_r483628825", "bodyText": "You mean by specifying it in the kubeClient() right? Like we have -> kubeClient(\"some-namespace\"). I totally forgot this! Thanks :)", "author": "im-konge", "createdAt": "2020-09-04T13:51:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzYxMTYxMQ=="}], "type": "inlineReview"}, {"oid": "181f136700d4ff5f450d0ed91ba153254137e997", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/181f136700d4ff5f450d0ed91ba153254137e997", "message": "fixup! frawless comment\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-09-04T15:03:19Z", "type": "commit"}]}