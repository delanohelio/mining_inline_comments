{"pr_number": 2655, "pr_title": "Configurable cipher suites", "pr_createdAt": "2020-03-06T16:45:11Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2655", "timeline": [{"oid": "1d707708ff169c98ceffa28b60b9adb5c1cd4a85", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1d707708ff169c98ceffa28b60b9adb5c1cd4a85", "message": "Added support for setting allowed cipher suites\n\nAdded the ssl.cipher.suites to the forbidden prefix\nexceptions on the KafkaClusterSpec.\n\nSigned-off-by: John Beaven <beavenj@uk.ibm.com>", "committedDate": "2020-03-06T16:15:51Z", "type": "commit"}, {"oid": "38b6c2e7feafc0a515e8d032ccaaeecbaa1a7d17", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/38b6c2e7feafc0a515e8d032ccaaeecbaa1a7d17", "message": "Added support for setting allowed cipher suites\n\nAdded the ssl.cipher.suites to the forbidden prefix\nexceptions on the KafkaClusterSpec.\n\nSigned-off-by: John Beaven <beavenj@uk.ibm.com>", "committedDate": "2020-03-06T16:25:54Z", "type": "commit"}, {"oid": "94a49811e0ccc3b4c823800c76cbf4620dea78d1", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/94a49811e0ccc3b4c823800c76cbf4620dea78d1", "message": "Merge branch 'configurable-cipher-suites' of https://github.com/beavenj/strimzi-kafka-operator into configurable-cipher-suites", "committedDate": "2020-03-06T16:26:09Z", "type": "commit"}, {"oid": "42c3f151dbb439cacb86c4128d6b39730655805d", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/42c3f151dbb439cacb86c4128d6b39730655805d", "message": "Merge branch 'configurable-cipher-suites' of https://github.com/beavenj/strimzi-kafka-operator into configurable-cipher-suites", "committedDate": "2020-03-06T16:35:48Z", "type": "commit"}, {"oid": "c4eeac29c2fe85ffacc06b688af0774d0356d345", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c4eeac29c2fe85ffacc06b688af0774d0356d345", "message": "Merge branch 'configurable-cipher-suites' of https://github.com/beavenj/strimzi-kafka-operator into configurable-cipher-suites", "committedDate": "2020-03-06T16:37:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAzMzEyNg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2655#discussion_r389033126", "bodyText": "Hi John, from a test debugging perspective, the below might be a little bit cleaner:\nassertThat(kc.asOrderedProperties().asMap(), hasEntry(\"ssl.cipher.suites\", \"cipher1,cipher2,cipher3\"));\n\nWhere you statically import hasEntry with: import static org.hamcrest.Matchers.hasEntry;", "author": "samuel-hawker", "createdAt": "2020-03-06T17:14:57Z", "path": "cluster-operator/src/test/java/io/strimzi/operator/cluster/model/AbstractConfigurationTest.java", "diffHunk": "@@ -238,6 +238,16 @@ public void testKafkaZookeeperTimeout() {\n         assertThat(kc.asOrderedProperties().asMap().get(\"zookeeper.connection.timeout\"), is(nullValue()));\n     }\n \n+    @Test\n+    public void testKafkaCipherSuiteOverride() {\n+        Map<String, Object> conf = new HashMap<>();\n+        conf.put(\"ssl.cipher.suites\", \"cipher1,cipher2,cipher3\"); // valid\n+\n+        KafkaConfiguration kc = new KafkaConfiguration(conf.entrySet());\n+\n+        assertThat(kc.asOrderedProperties().asMap().get(\"ssl.cipher.suites\"), is(\"cipher1,cipher2,cipher3\"));", "originalCommit": "c4eeac29c2fe85ffacc06b688af0774d0356d345", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNTA4MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2655#discussion_r393035080", "bodyText": "Hi Sam, this code is consistent with the other tests on which is was based, so I would suggest this change be left as is and then if its desirable to modify them, we do all of them together in another PR. Just my thoughts on that one...", "author": "beavenj", "createdAt": "2020-03-16T13:49:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAzMzEyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNjgyMw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2655#discussion_r393036823", "bodyText": "Perfectly reasonable John!", "author": "samuel-hawker", "createdAt": "2020-03-16T13:52:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAzMzEyNg=="}], "type": "inlineReview"}, {"oid": "0a8d623aceb895967163470349fe183827ef45fb", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/0a8d623aceb895967163470349fe183827ef45fb", "message": "Merge branch 'master' into configurable-cipher-suites", "committedDate": "2020-04-06T08:08:29Z", "type": "commit"}]}