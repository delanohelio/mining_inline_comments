{"pr_number": 3265, "pr_title": "Add bridge metrics", "pr_createdAt": "2020-07-01T06:54:18Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1ODY3Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r448558673", "bodyText": "Should we leave this generic? There is a risk this gets outdated when you add more metrics in the bridge + I guess already now it is missing JVM metrics?", "author": "scholzj", "createdAt": "2020-07-01T18:59:27Z", "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaBridgeSpec.java", "diffHunk": "@@ -68,14 +68,13 @@ public void setReplicas(int replicas) {\n     }\n \n     @JsonInclude(JsonInclude.Include.NON_NULL)\n-    @Description(\"**Currently not supported** The Prometheus JMX Exporter configuration. \" +\n-            \"See {JMXExporter} for details of the structure of this configuration.\")\n-    public Map<String, Object> getMetrics() {\n-        return metrics;\n+    @Description(\"Enable HTTP and Kafka related metrics for the Kafka Bridge.\")", "originalCommit": "ef1b1fab7033fed403f0989fc5348ff477642fcf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc5MTc2MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r448791761", "bodyText": "Yeah I forgot JVM as well, I will change with something more generic.", "author": "ppatierno", "createdAt": "2020-07-02T07:06:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1ODY3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxMDk0NQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449010945", "bodyText": "Document the default", "author": "tombentley", "createdAt": "2020-07-02T13:42:43Z", "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaBridgeSpec.java", "diffHunk": "@@ -68,14 +68,13 @@ public void setReplicas(int replicas) {\n     }\n \n     @JsonInclude(JsonInclude.Include.NON_NULL)\n-    @Description(\"**Currently not supported** The Prometheus JMX Exporter configuration. \" +\n-            \"See {JMXExporter} for details of the structure of this configuration.\")\n-    public Map<String, Object> getMetrics() {\n-        return metrics;\n+    @Description(\"Enable the metrics for the Kafka Bridge.\")", "originalCommit": "a4e80652a0e1879ed50b71dfa2afcac6ccf3b4ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxNTM1Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449015356", "bodyText": "I had \"... HTTP and Kafka metrics ...\" there (I forgot JVM) but Jakub suggested being more generic in order to avoid that if adding more we had to change the description as well. Are you suggesting to revert back having something like \"Enable the HTTP, Kafka, and JVM related metrics for the Kafka Bridge.\"?", "author": "ppatierno", "createdAt": "2020-07-02T13:48:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxMDk0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxNzc3Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449017777", "bodyText": "Does it default to true or false? I'm saying we should include what the default is in the @Description.", "author": "tombentley", "createdAt": "2020-07-02T13:52:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxMDk0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxOTg2Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449019863", "bodyText": ":-D I completely misunderstood what you meant! sorry! Yes it default to false, I will add it.", "author": "ppatierno", "createdAt": "2020-07-02T13:55:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxMDk0NQ=="}], "type": "inlineReview"}, {"oid": "d641163eed30f8a23b9cf6f1b9cd1992ecf3cf74", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d641163eed30f8a23b9cf6f1b9cd1992ecf3cf74", "message": "Added HTTP bridge integration in the operator\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded bridge metrics Grafana dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed checkstyle\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nUpdated CHANGELOG\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded documentation section about Kafka Bridge metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comment\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed default value for bridge enable metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comments about graphs and label\nAdded more metrics to the dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-07-03T05:44:10Z", "type": "forcePushed"}, {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/72d8cdef317865a5e6ac706a70529b1d433fe97f", "message": "Added HTTP bridge integration in the operator\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded bridge metrics Grafana dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed checkstyle\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nUpdated CHANGELOG\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded documentation section about Kafka Bridge metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comment\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed default value for bridge enable metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comments about graphs and label\nAdded more metrics to the dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-07-03T05:52:51Z", "type": "forcePushed"}, {"oid": "a04fd3ecc21f844759719a4b5833aeaf0ef18657", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a04fd3ecc21f844759719a4b5833aeaf0ef18657", "message": "Added HTTP bridge integration in the operator\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded bridge metrics Grafana dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed checkstyle\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nUpdated CHANGELOG\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded documentation section about Kafka Bridge metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comment\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed default value for bridge enable metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comments about graphs and label\nAdded more metrics to the dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-07-05T19:06:46Z", "type": "commit"}, {"oid": "89b0ce717ebb74ff6bf91c3e777042ffad9e6ded", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/89b0ce717ebb74ff6bf91c3e777042ffad9e6ded", "message": "Fixed documentation related comments\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-07-05T19:06:46Z", "type": "commit"}, {"oid": "d455d2b805ccbf043cda056cb4acf4f9c66f2570", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d455d2b805ccbf043cda056cb4acf4f9c66f2570", "message": "Remoed modularization for Kafka Bridge metrics section\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-07-05T19:06:46Z", "type": "commit"}, {"oid": "d455d2b805ccbf043cda056cb4acf4f9c66f2570", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d455d2b805ccbf043cda056cb4acf4f9c66f2570", "message": "Remoed modularization for Kafka Bridge metrics section\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-07-05T19:06:46Z", "type": "forcePushed"}]}