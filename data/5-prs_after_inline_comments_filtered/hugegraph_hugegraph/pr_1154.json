{"pr_number": 1154, "pr_title": "Add some raft options used to improve perf", "pr_createdAt": "2020-08-24T10:44:09Z", "pr_url": "https://github.com/hugegraph/hugegraph/pull/1154", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0MzkxMg==", "url": "https://github.com/hugegraph/hugegraph/pull/1154#discussion_r476043912", "bodyText": "what is the behavior if it is turned on", "author": "javeme", "createdAt": "2020-08-25T01:36:17Z", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/config/CoreOptions.java", "diffHunk": "@@ -158,12 +151,28 @@ public static synchronized CoreOptions instance() {\n                     \"./raftlog\"\n             );\n \n+    public static final ConfigOption<Boolean> RAFT_STEPDOWN_WHEN_VOTE_TIMEOUT =\n+            new ConfigOption<>(\n+                    \"raft.stepdown_when_vote_timeout\",\n+                    \"Whether the leader stepped down when vote timeout.\",\n+                    disallowEmpty(),\n+                    true\n+            );\n+\n+    public static final ConfigOption<Boolean> RAFT_REPLICATOR_PIPELINE =\n+            new ConfigOption<>(\n+                    \"raft.use_replicator_pipeline\",\n+                    \"Whether to use replicator line.\",", "originalCommit": "fdaccc5b67822973bb92c0f657ec37df1109f00b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0NDIzNw==", "url": "https://github.com/hugegraph/hugegraph/pull/1154#discussion_r476044237", "bodyText": "reading index", "author": "javeme", "createdAt": "2020-08-25T01:36:47Z", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/config/CoreOptions.java", "diffHunk": "@@ -179,9 +188,72 @@ public static synchronized CoreOptions instance() {\n                     \"raft.backend_threads\",\n                     \"The thread number used to apply task to bakcend.\",\n                     rangeInt(0, Integer.MAX_VALUE),\n+                    CPUS\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_READ_INDEX_THREADS =\n+            new ConfigOption<>(\n+                    \"raft.read_index_threads\",\n+                    \"The thread number used to execute read index.\",", "originalCommit": "fdaccc5b67822973bb92c0f657ec37df1109f00b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0NTAwNA==", "url": "https://github.com/hugegraph/hugegraph/pull/1154#discussion_r476045004", "bodyText": "ms?", "author": "javeme", "createdAt": "2020-08-25T01:37:57Z", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/config/CoreOptions.java", "diffHunk": "@@ -179,9 +188,72 @@ public static synchronized CoreOptions instance() {\n                     \"raft.backend_threads\",\n                     \"The thread number used to apply task to bakcend.\",\n                     rangeInt(0, Integer.MAX_VALUE),\n+                    CPUS\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_READ_INDEX_THREADS =\n+            new ConfigOption<>(\n+                    \"raft.read_index_threads\",\n+                    \"The thread number used to execute read index.\",\n+                    rangeInt(0, Integer.MAX_VALUE),\n                     8\n             );\n \n+    public static final ConfigOption<Integer> RAFT_APPLY_BATCH =\n+            new ConfigOption<>(\n+                    \"raft.apply_batch\",\n+                    \"The apply batch size to trigger disruptor event handler.\",\n+                    positiveInt(),\n+                    // jraft default value is 32\n+                    1\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_QUEUE_SIZE =\n+            new ConfigOption<>(\n+                    \"raft.queue_size\",\n+                    \"The disruptor buffers size for jraft RaftNode, \" +\n+                    \"StateMachine and LogManager\",\n+                    positiveInt(),\n+                    // jraft default value is 16384\n+                    8192\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_QUEUE_PUBLISH_TIMEOUT =\n+            new ConfigOption<>(\n+                    \"raft.queue_publish_timeout\",\n+                    \"The timeout in second when publish event into disruptor\",\n+                    positiveInt(),\n+                    // jraft default value is 10(sec)\n+                    60\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_RPC_THREADS =\n+            new ConfigOption<>(\n+                    \"raft.rpc_threads\",\n+                    \"The rpc threads for jraft RPC layer\",\n+                    positiveInt(),\n+                    // jraft default value is 80\n+                    48\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_RPC_CONNECT_TIMEOUT =\n+            new ConfigOption<>(\n+                    \"raft.rpc_connect_timeout\",\n+                    \"The rpc connect timeout for jraft rpc\",", "originalCommit": "fdaccc5b67822973bb92c0f657ec37df1109f00b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1813a46b54f6994a6746c91744538b578b2648dc", "url": "https://github.com/hugegraph/hugegraph/commit/1813a46b54f6994a6746c91744538b578b2648dc", "message": "Add some raft options used to improve perf\n\nChange-Id: Ifadc84767120afb8d72128c68ebb1afb2b34e3cd", "committedDate": "2020-09-22T07:13:10Z", "type": "commit"}, {"oid": "1813a46b54f6994a6746c91744538b578b2648dc", "url": "https://github.com/hugegraph/hugegraph/commit/1813a46b54f6994a6746c91744538b578b2648dc", "message": "Add some raft options used to improve perf\n\nChange-Id: Ifadc84767120afb8d72128c68ebb1afb2b34e3cd", "committedDate": "2020-09-22T07:13:10Z", "type": "forcePushed"}, {"oid": "1754a0150734475103b3e21f9039ebad5327be8f", "url": "https://github.com/hugegraph/hugegraph/commit/1754a0150734475103b3e21f9039ebad5327be8f", "message": "tiny improve\n\nChange-Id: I2f25194b98567dd6952aa65180b29ce52f9aeebc", "committedDate": "2020-09-22T07:48:18Z", "type": "commit"}]}