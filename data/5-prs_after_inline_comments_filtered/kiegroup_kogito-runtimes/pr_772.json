{"pr_number": 772, "pr_title": "KOGITO-3208: integration test for trusty service and explainability service", "pr_createdAt": "2020-09-16T13:10:58Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/772", "timeline": [{"oid": "588e2ce4ea68570ee14bf6a88f4ff6ed8d9e677c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/588e2ce4ea68570ee14bf6a88f4ff6ed8d9e677c", "message": "KOGITO-3208: add tracing-decision-springboot-addon to kogito-bom", "committedDate": "2020-09-28T13:44:40Z", "type": "forcePushed"}, {"oid": "5529a4d669ca21a7a88a776c09f7521b815733e8", "url": "https://github.com/kiegroup/kogito-runtimes/commit/5529a4d669ca21a7a88a776c09f7521b815733e8", "message": "KOGITO-3208: add tracing-decision-springboot-addon to kogito-bom", "committedDate": "2020-09-30T07:38:03Z", "type": "forcePushed"}, {"oid": "5f8ec132130fbbb2d21ea2c055328831250dea9c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/5f8ec132130fbbb2d21ea2c055328831250dea9c", "message": "KOGITO-3208: add tracing-decision-springboot-addon to kogito-bom", "committedDate": "2020-10-01T07:11:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc4MTIxNA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/772#discussion_r498781214", "bodyText": "Can you review this change? Now the method returns directly the result in case of success while it returns a ResponseEntity<Object> in case of failure. I would suggest to always return a ResponseEntity<Object>", "author": "danielezonca", "createdAt": "2020-10-02T12:08:27Z", "path": "addons/explainability/explainability-springboot-addon/src/main/java/org/kie/kogito/explainability/SpringBootExplainableResource.java", "diffHunk": "@@ -45,11 +46,12 @@ public SpringBootExplainableResource(Application application) {\n         this.application = application;\n     }\n \n-    @PostMapping(produces = MediaType.APPLICATION_JSON_VALUE,\n-            consumes = MediaType.APPLICATION_JSON_VALUE)\n-    public ResponseEntity<Object> predict(List<PredictInput> inputs) {\n+    @POST\n+    @Consumes(MediaType.APPLICATION_JSON)\n+    @Produces(MediaType.APPLICATION_JSON)\n+    public Object predict(@RequestBody List<PredictInput> inputs) {\n         try {\n-            return ResponseEntity.ok(explainabilityService.processRequest(application, inputs));\n+            return explainabilityService.processRequest(application, inputs);\n         } catch (Exception e) {\n             LOGGER.warn(\"An Exception occurred processing the predict request\", e);\n             return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getMessage());", "originalCommit": "3c27f555c0de1b053b6deb483213a8030514899f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODgxMzEzNw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/772#discussion_r498813137", "bodyText": "I would suggest to always return a ResponseEntity<Object>\n\nThis was the original implementation before my changes.\nUnfortunately it was different from the Quarkus version, causing the /predict endpoint to return two different responses depending on the underlying framework.\nI made these changes because the Explainability Service expects the output as returned by the Quarkus addon and was breaking in the integration tests trying to parse this one.", "author": "kostola", "createdAt": "2020-10-02T13:14:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc4MTIxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODgzMDgwNg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/772#discussion_r498830806", "bodyText": "@danielezonca I refactored this class to use only javax.ws.rs.* classes and now it's completely equivalent to the Quarkus version.", "author": "kostola", "createdAt": "2020-10-02T13:45:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc4MTIxNA=="}], "type": "inlineReview"}, {"oid": "043672b30336a7dd9b4476e402dd22b805a503da", "url": "https://github.com/kiegroup/kogito-runtimes/commit/043672b30336a7dd9b4476e402dd22b805a503da", "message": "KOGITO-3208: use javax.ws.rs.core.Response in SpringBootExplainableResource", "committedDate": "2020-10-15T16:18:39Z", "type": "forcePushed"}, {"oid": "b836e57fe4e55d7a09ef09bf8b858c1d8fa9987f", "url": "https://github.com/kiegroup/kogito-runtimes/commit/b836e57fe4e55d7a09ef09bf8b858c1d8fa9987f", "message": "KOGITO-3208: add trusty-service-api to kogito-bom", "committedDate": "2020-10-19T13:49:40Z", "type": "commit"}, {"oid": "2a3cb34a89d03b579a7003763895c7b2be284a9c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/2a3cb34a89d03b579a7003763895c7b2be284a9c", "message": "KOGITO-3208: use javax.ws.rs annotations in SpringBootExplainableResource", "committedDate": "2020-10-19T13:49:40Z", "type": "commit"}, {"oid": "746802a11cd9717eb3586f47c236d48e08be1ef4", "url": "https://github.com/kiegroup/kogito-runtimes/commit/746802a11cd9717eb3586f47c236d48e08be1ef4", "message": "KOGITO-3208: align SpringBootExplainableResource successful response with QuarkusExplainableResource", "committedDate": "2020-10-19T13:49:40Z", "type": "commit"}, {"oid": "8db0182b01c79d187bb24cfb6d2c7fd3a43b35ed", "url": "https://github.com/kiegroup/kogito-runtimes/commit/8db0182b01c79d187bb24cfb6d2c7fd3a43b35ed", "message": "KOGITO-3208: use javax.ws.rs.core.Response in SpringBootExplainableResource", "committedDate": "2020-10-19T13:49:40Z", "type": "commit"}, {"oid": "8db0182b01c79d187bb24cfb6d2c7fd3a43b35ed", "url": "https://github.com/kiegroup/kogito-runtimes/commit/8db0182b01c79d187bb24cfb6d2c7fd3a43b35ed", "message": "KOGITO-3208: use javax.ws.rs.core.Response in SpringBootExplainableResource", "committedDate": "2020-10-19T13:49:40Z", "type": "forcePushed"}, {"oid": "306103a504fa08c37f0e3112962fde72843eee82", "url": "https://github.com/kiegroup/kogito-runtimes/commit/306103a504fa08c37f0e3112962fde72843eee82", "message": "KOGITO-3208: merge branch 'master' into 'KOGITO-3208'", "committedDate": "2020-10-30T07:56:54Z", "type": "commit"}]}