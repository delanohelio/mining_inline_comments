{"pr_number": 761, "pr_title": "KOGITO-3330 Hotfix: Conditional eager reading of resources on native-image", "pr_createdAt": "2020-09-14T08:04:43Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/761", "timeline": [{"oid": "058cdab5006e2a4b721c265c5d57982876ad2c94", "url": "https://github.com/kiegroup/kogito-runtimes/commit/058cdab5006e2a4b721c265c5d57982876ad2c94", "message": "KOGITO-3330 Hotfix: Conditional eager reading of resources on native-image", "committedDate": "2020-09-14T08:03:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcyNzYwMg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/761#discussion_r487727602", "bodyText": "I would personally invert this and call it IS_GRAALVM :)", "author": "geoand", "createdAt": "2020-09-14T08:09:43Z", "path": "kogito-codegen/src/main/resources/class-templates/DecisionContainerTemplate.java", "diffHunk": "@@ -1,9 +1,7 @@\n-import java.util.function.Function;\n-\n-import org.kie.api.runtime.KieRuntimeFactory;\n-\n public class DecisionModels implements org.kie.kogito.decision.DecisionModels {\n \n+    private final static boolean IS_JDK = System.getProperty(\"org.graalvm.nativeimage.imagecode\") == null;", "originalCommit": "058cdab5006e2a4b721c265c5d57982876ad2c94", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzczMDMxMQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/761#discussion_r487730311", "bodyText": "let's call it IS_NATIVE_IMAGE then", "author": "evacchi", "createdAt": "2020-09-14T08:14:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcyNzYwMg=="}], "type": "inlineReview"}, {"oid": "78d111025f8466bd839584cd65b6c0ae1ec07750", "url": "https://github.com/kiegroup/kogito-runtimes/commit/78d111025f8466bd839584cd65b6c0ae1ec07750", "message": "fix formatting", "committedDate": "2020-09-14T08:11:10Z", "type": "commit"}, {"oid": "3c716ee7a690cd620457c11f2a2262457a097587", "url": "https://github.com/kiegroup/kogito-runtimes/commit/3c716ee7a690cd620457c11f2a2262457a097587", "message": "IS_NATIVE_IMAGE", "committedDate": "2020-09-14T08:39:29Z", "type": "commit"}, {"oid": "848503be152679d4a9bf2342cd1c52cf4761e7dd", "url": "https://github.com/kiegroup/kogito-runtimes/commit/848503be152679d4a9bf2342cd1c52cf4761e7dd", "message": "IS_NATIVE_IMAGE", "committedDate": "2020-09-14T08:39:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1NzUyNw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/761#discussion_r487757527", "bodyText": "Good for me, I had similar to\nhttps://github.com/kiegroup/drools/blob/d72e9594cbb7f71a70f1bc13cf84b168ffa52e69/kie-dmn/kie-dmn-feel/src/main/java/org/kie/dmn/feel/util/ClassLoaderUtil.java#L21\neventually I can consolidate", "author": "tarilabs", "createdAt": "2020-09-14T08:58:41Z", "path": "kogito-codegen/src/main/resources/class-templates/DecisionContainerTemplate.java", "diffHunk": "@@ -1,9 +1,7 @@\n-import java.util.function.Function;\n-\n-import org.kie.api.runtime.KieRuntimeFactory;\n-\n public class DecisionModels implements org.kie.kogito.decision.DecisionModels {\n \n+    private final static boolean IS_NATIVE_IMAGE = System.getProperty(\"org.graalvm.nativeimage.imagecode\") != null;", "originalCommit": "848503be152679d4a9bf2342cd1c52cf4761e7dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc2NDEwMQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/761#discussion_r487764101", "bodyText": "ok let's open a JIRA", "author": "evacchi", "createdAt": "2020-09-14T09:09:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1NzUyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc3ODU3OA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/761#discussion_r487778578", "bodyText": "https://issues.redhat.com/browse/KOGITO-3331", "author": "evacchi", "createdAt": "2020-09-14T09:34:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1NzUyNw=="}], "type": "inlineReview"}]}