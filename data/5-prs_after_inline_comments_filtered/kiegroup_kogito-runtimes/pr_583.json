{"pr_number": 583, "pr_title": "[KOGITO-2537] Consume and persist TraceEvents in trusty-service", "pr_createdAt": "2020-06-24T14:38:17Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/583", "timeline": [{"oid": "5f087667bce5e9ff783a4e2243b80cf9467624b4", "url": "https://github.com/kiegroup/kogito-runtimes/commit/5f087667bce5e9ff783a4e2243b80cf9467624b4", "message": "[KOGITO-2537] Create tracing-decision-api module", "committedDate": "2020-07-02T06:22:19Z", "type": "forcePushed"}, {"oid": "9e6c47bdd69dadf3dc4dda661775368bdc45e417", "url": "https://github.com/kiegroup/kogito-runtimes/commit/9e6c47bdd69dadf3dc4dda661775368bdc45e417", "message": "[KOGITO-2537] Create tracing-decision-api module", "committedDate": "2020-07-03T08:50:49Z", "type": "forcePushed"}, {"oid": "46d0f602179547439e9ed8f28897106396728ddb", "url": "https://github.com/kiegroup/kogito-runtimes/commit/46d0f602179547439e9ed8f28897106396728ddb", "message": "[KOGITO-2537] Create tracing-decision-api module", "committedDate": "2020-07-07T06:53:19Z", "type": "forcePushed"}, {"oid": "bbe82a1f850361c3cfae317f91d11b98212392bd", "url": "https://github.com/kiegroup/kogito-runtimes/commit/bbe82a1f850361c3cfae317f91d11b98212392bd", "message": "[KOGITO-2537] Create tracing-decision-api module", "committedDate": "2020-07-07T16:19:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjM4NQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r450026385", "bodyText": "Could you use @JsonProperty and also @JsonIgnoreProperties(ignoreUnknown = true)? If the consumer of the TraceEvent is not using the same version of the package of the producer and it gets a payload with a new property it is going to fail because the two components would not be properly decoupled. An exception would be raised during the deserialization", "author": "r00ta", "createdAt": "2020-07-06T07:14:51Z", "path": "addons/tracing/tracing-decision-api/src/main/java/org/kie/kogito/tracing/decision/event/trace/TraceEvent.java", "diffHunk": "@@ -20,10 +20,13 @@\n \n public class TraceEvent {\n \n-    private final TraceHeader header;\n-    private final List<TraceInputValue> inputs;\n-    private final List<TraceOutputValue> outputs;\n-    private final List<TraceExecutionStep> executionSteps;\n+    private TraceHeader header;\n+    private List<TraceInputValue> inputs;\n+    private List<TraceOutputValue> outputs;\n+    private List<TraceExecutionStep> executionSteps;", "originalCommit": "9e6c47bdd69dadf3dc4dda661775368bdc45e417", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNDcyMw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r452104723", "bodyText": "Done \ud83d\udc4d", "author": "kostola", "createdAt": "2020-07-09T09:59:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjM4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjYyOA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r450026628", "bodyText": "Could you use @JsonProperty and also @JsonIgnoreProperties(ignoreUnknown = true)?", "author": "r00ta", "createdAt": "2020-07-06T07:15:24Z", "path": "addons/tracing/tracing-decision-api/src/main/java/org/kie/kogito/tracing/decision/event/trace/TraceExecutionStep.java", "diffHunk": "@@ -29,21 +30,24 @@\n public class TraceExecutionStep {", "originalCommit": "9e6c47bdd69dadf3dc4dda661775368bdc45e417", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNDgwMg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r452104802", "bodyText": "Done \ud83d\udc4d", "author": "kostola", "createdAt": "2020-07-09T09:59:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjYyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjY4Mw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r450026683", "bodyText": "Could you use @JsonProperty and also @JsonIgnoreProperties(ignoreUnknown = true)?", "author": "r00ta", "createdAt": "2020-07-06T07:15:33Z", "path": "addons/tracing/tracing-decision-api/src/main/java/org/kie/kogito/tracing/decision/event/trace/TraceHeader.java", "diffHunk": "@@ -26,17 +26,20 @@\n \n public class TraceHeader {", "originalCommit": "9e6c47bdd69dadf3dc4dda661775368bdc45e417", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNDg2Mg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r452104862", "bodyText": "Done \ud83d\udc4d", "author": "kostola", "createdAt": "2020-07-09T09:59:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjY4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjc1MA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r450026750", "bodyText": "Could you use @JsonProperty and also @JsonIgnoreProperties(ignoreUnknown = true)?", "author": "r00ta", "createdAt": "2020-07-06T07:15:40Z", "path": "addons/tracing/tracing-decision-api/src/main/java/org/kie/kogito/tracing/decision/event/trace/TraceInputValue.java", "diffHunk": "@@ -28,12 +28,15 @@\n @JsonInclude(NON_NULL)\n public class TraceInputValue {", "originalCommit": "9e6c47bdd69dadf3dc4dda661775368bdc45e417", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNDk1OA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r452104958", "bodyText": "Done \ud83d\udc4d", "author": "kostola", "createdAt": "2020-07-09T09:59:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjc1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjc4Mg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r450026782", "bodyText": "Could you use @JsonProperty and also @JsonIgnoreProperties(ignoreUnknown = true)?", "author": "r00ta", "createdAt": "2020-07-06T07:15:45Z", "path": "addons/tracing/tracing-decision-api/src/main/java/org/kie/kogito/tracing/decision/event/trace/TraceOutputValue.java", "diffHunk": "@@ -26,13 +26,16 @@\n \n public class TraceOutputValue {", "originalCommit": "9e6c47bdd69dadf3dc4dda661775368bdc45e417", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNTAxNg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r452105016", "bodyText": "Done \ud83d\udc4d", "author": "kostola", "createdAt": "2020-07-09T09:59:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNjc4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNzAyOQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r450027029", "bodyText": "Could you use @JsonProperty and also @JsonIgnoreProperties(ignoreUnknown = true)?", "author": "r00ta", "createdAt": "2020-07-06T07:16:19Z", "path": "addons/tracing/tracing-decision-api/src/main/java/org/kie/kogito/tracing/decision/event/trace/TraceType.java", "diffHunk": "@@ -23,9 +23,13 @@\n \n @JsonInclude(NON_NULL)\n public class TraceType {", "originalCommit": "9e6c47bdd69dadf3dc4dda661775368bdc45e417", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNTEyMg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r452105122", "bodyText": "Done \ud83d\udc4d", "author": "kostola", "createdAt": "2020-07-09T09:59:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNzAyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNzA3NQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r450027075", "bodyText": "Could you use @JsonProperty and also @JsonIgnoreProperties(ignoreUnknown = true)?", "author": "r00ta", "createdAt": "2020-07-06T07:16:25Z", "path": "addons/tracing/tracing-decision-api/src/main/java/org/kie/kogito/tracing/decision/event/trace/TraceResourceId.java", "diffHunk": "@@ -18,20 +18,20 @@\n \n import com.fasterxml.jackson.annotation.JsonInclude;\n import org.kie.dmn.api.core.DMNModel;\n-import org.kie.kogito.tracing.decision.event.evaluate.EvaluateEvent;\n \n import static com.fasterxml.jackson.annotation.JsonInclude.Include.NON_NULL;\n-import static org.kie.kogito.tracing.decision.event.evaluate.EvaluateEventType.AFTER_EVALUATE_DECISION_SERVICE;\n-import static org.kie.kogito.tracing.decision.event.evaluate.EvaluateEventType.BEFORE_EVALUATE_DECISION_SERVICE;\n \n public class TraceResourceId {", "originalCommit": "9e6c47bdd69dadf3dc4dda661775368bdc45e417", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNTE4NA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r452105184", "bodyText": "Done \ud83d\udc4d", "author": "kostola", "createdAt": "2020-07-09T09:59:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDAyNzA3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQwNDA3MQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r451404071", "bodyText": "Could you use @JsonProperty and also @JsonIgnoreProperties(ignoreUnknown = true)?", "author": "r00ta", "createdAt": "2020-07-08T09:20:37Z", "path": "addons/tracing/tracing-decision-api/src/main/java/org/kie/kogito/tracing/decision/event/trace/TraceHeader.java", "diffHunk": "@@ -30,17 +30,20 @@\n \n     private static final Logger LOGGER = LoggerFactory.getLogger(TraceHeader.class);\n \n-    private final TraceEventType type;\n-    private final String executionId;\n+    private TraceEventType type;\n+    private String executionId;\n     @JsonInclude(NON_NULL)\n-    private final Long startTimestamp;\n+    private Long startTimestamp;\n     @JsonInclude(NON_NULL)\n-    private final Long endTimestamp;\n+    private Long endTimestamp;\n     @JsonInclude(NON_NULL)\n-    private final Long duration;\n-    private final TraceResourceId resourceId;\n+    private Long duration;\n+    private TraceResourceId resourceId;\n     @JsonInclude(NON_EMPTY)\n-    private final List<Message> messages;\n+    private List<Message> messages;\n+\n+    private TraceHeader() {\n+    }", "originalCommit": "bbe82a1f850361c3cfae317f91d11b98212392bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNTI2OA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/583#discussion_r452105268", "bodyText": "Done \ud83d\udc4d", "author": "kostola", "createdAt": "2020-07-09T09:59:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQwNDA3MQ=="}], "type": "inlineReview"}, {"oid": "7736a78eefbb08e71c469bfc50f21df7fe904b4c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/7736a78eefbb08e71c469bfc50f21df7fe904b4c", "message": "[KOGITO-2537] Add EventUtils to tracing-decision-common", "committedDate": "2020-07-13T08:55:56Z", "type": "forcePushed"}, {"oid": "ea91ee69f1362640885f8f108196e30534e45cf5", "url": "https://github.com/kiegroup/kogito-runtimes/commit/ea91ee69f1362640885f8f108196e30534e45cf5", "message": "[KOGITO-2537] Add EventUtils to tracing-decision-common", "committedDate": "2020-07-14T10:26:38Z", "type": "forcePushed"}, {"oid": "0c7aebcdeaf5687fddbcc5a855ed9c6964e19e48", "url": "https://github.com/kiegroup/kogito-runtimes/commit/0c7aebcdeaf5687fddbcc5a855ed9c6964e19e48", "message": "[KOGITO-2537] Add EventUtils to tracing-decision-common", "committedDate": "2020-07-16T07:01:44Z", "type": "forcePushed"}, {"oid": "13f0349a94208e42111a362e5387441194e687f6", "url": "https://github.com/kiegroup/kogito-runtimes/commit/13f0349a94208e42111a362e5387441194e687f6", "message": "[KOGITO-2537] Add EventUtils to tracing-decision-common", "committedDate": "2020-07-17T09:32:50Z", "type": "forcePushed"}, {"oid": "55c985777fdcb217051a3f87c25265bd27f76f54", "url": "https://github.com/kiegroup/kogito-runtimes/commit/55c985777fdcb217051a3f87c25265bd27f76f54", "message": "[KOGITO-2537] Add EventUtils to tracing-decision-common", "committedDate": "2020-07-20T07:22:51Z", "type": "forcePushed"}, {"oid": "11f647b5990a2ed7ff4c296c614e7bb62f42c9ac", "url": "https://github.com/kiegroup/kogito-runtimes/commit/11f647b5990a2ed7ff4c296c614e7bb62f42c9ac", "message": "[KOGITO-2537] Create tracing-decision-api module", "committedDate": "2020-07-21T06:38:47Z", "type": "commit"}, {"oid": "579f39f85f77e89ab5bfae5feffdb9f2bebfc841", "url": "https://github.com/kiegroup/kogito-runtimes/commit/579f39f85f77e89ab5bfae5feffdb9f2bebfc841", "message": "[KOGITO-2537] Add @JsonIgnoreProperties and @JsonProperty to TraceEvent", "committedDate": "2020-07-21T06:38:47Z", "type": "commit"}, {"oid": "86658c77d74f197f41e94801f7ca115298c585c2", "url": "https://github.com/kiegroup/kogito-runtimes/commit/86658c77d74f197f41e94801f7ca115298c585c2", "message": "[KOGITO-2537] Remove kogito-dmn dependency from tracing-decision-api", "committedDate": "2020-07-21T06:38:47Z", "type": "commit"}, {"oid": "e1aa61319acb581fe2e2f5f146e8c2d99e5bcf77", "url": "https://github.com/kiegroup/kogito-runtimes/commit/e1aa61319acb581fe2e2f5f146e8c2d99e5bcf77", "message": "[KOGITO-2537] Add EventUtils to tracing-decision-common", "committedDate": "2020-07-21T06:38:47Z", "type": "commit"}, {"oid": "e1aa61319acb581fe2e2f5f146e8c2d99e5bcf77", "url": "https://github.com/kiegroup/kogito-runtimes/commit/e1aa61319acb581fe2e2f5f146e8c2d99e5bcf77", "message": "[KOGITO-2537] Add EventUtils to tracing-decision-common", "committedDate": "2020-07-21T06:38:47Z", "type": "forcePushed"}]}