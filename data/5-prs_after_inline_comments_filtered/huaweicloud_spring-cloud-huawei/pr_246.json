{"pr_number": 246, "pr_title": "[issue #247] support reactive discovery", "pr_createdAt": "2020-08-18T10:43:25Z", "pr_url": "https://github.com/huaweicloud/spring-cloud-huawei/pull/246", "timeline": [{"oid": "fdb1d91b18cfa69c585b674e7b8e413aa7dcc9be", "url": "https://github.com/huaweicloud/spring-cloud-huawei/commit/fdb1d91b18cfa69c585b674e7b8e413aa7dcc9be", "message": "support spring cloud gateway discovery", "committedDate": "2020-08-18T10:42:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjExMzIyNQ==", "url": "https://github.com/huaweicloud/spring-cloud-huawei/pull/246#discussion_r472113225", "bodyText": "This implementatioin is too simple. Can use reactictor API to interacte with service center?", "author": "liubao68", "createdAt": "2020-08-18T11:40:20Z", "path": "spring-cloud-huawei-servicecomb-discovery/src/main/java/com/huaweicloud/servicecomb/discovery/discovery/ServiceCombReactiveDiscoveryClient.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package com.huaweicloud.servicecomb.discovery.discovery;\n+\n+import org.springframework.cloud.client.ServiceInstance;\n+import org.springframework.cloud.client.discovery.DiscoveryClient;\n+import org.springframework.cloud.client.discovery.ReactiveDiscoveryClient;\n+import reactor.core.publisher.Flux;\n+import reactor.core.scheduler.Schedulers;\n+\n+/**\n+ * @Author GuoYl123\n+ * @Date 2020/8/18\n+ **/\n+public class ServiceCombReactiveDiscoveryClient implements ReactiveDiscoveryClient {\n+\n+  private DiscoveryClient discoveryClient;\n+\n+  public ServiceCombReactiveDiscoveryClient(DiscoveryClient serviceCombDiscoveryClient) {\n+    this.discoveryClient = serviceCombDiscoveryClient;\n+  }\n+\n+  @Override\n+  public String description() {\n+    return \"this is servicecomb reactive implement\";\n+  }\n+\n+  @Override\n+  public Flux<ServiceInstance> getInstances(String serviceId) {\n+    return Flux.defer(() -> Flux.fromIterable(discoveryClient.getInstances(serviceId)))", "originalCommit": "fdb1d91b18cfa69c585b674e7b8e413aa7dcc9be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}