{"pr_number": 2366, "pr_title": "Return copies instead of exposing internal collections / and more", "pr_createdAt": "2020-03-27T14:44:56Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2366", "timeline": [{"oid": "be240b60dec5920efee7cf1903d32bdab8d7c0e1", "url": "https://github.com/GoogleContainerTools/jib/commit/be240b60dec5920efee7cf1903d32bdab8d7c0e1", "message": "Minor fixes", "committedDate": "2020-03-27T14:20:35Z", "type": "commit"}, {"oid": "89b4525354f67d00367a32daead00e41a6a1791e", "url": "https://github.com/GoogleContainerTools/jib/commit/89b4525354f67d00367a32daead00e41a6a1791e", "message": "Remove suppressWarning", "committedDate": "2020-03-27T14:25:59Z", "type": "commit"}, {"oid": "09975b8e94d5ab6b902f9eec00996dae4f95f6b5", "url": "https://github.com/GoogleContainerTools/jib/commit/09975b8e94d5ab6b902f9eec00996dae4f95f6b5", "message": "Remove warning", "committedDate": "2020-03-27T14:36:13Z", "type": "commit"}, {"oid": "0342e9851d4cddca1fc410e329abb9cf546918b8", "url": "https://github.com/GoogleContainerTools/jib/commit/0342e9851d4cddca1fc410e329abb9cf546918b8", "message": "Fix wrong package export", "committedDate": "2020-03-27T14:55:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY1MjcwOA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2366#discussion_r399652708", "bodyText": "Can we leave the comment in also?", "author": "loosebazooka", "createdAt": "2020-03-28T11:42:09Z", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/api/JibContainerBuilder.java", "diffHunk": "@@ -640,8 +642,13 @@ public JibContainerBuilder applyContainerBuildPlan(ContainerBuildPlan buildPlan)\n     baseImageConfiguration.getTarPath().ifPresent(builder::setTarPath);\n     baseImageConfiguration = builder.build();\n \n-    // For now, only FileEntriesLayer is supported in jib-core.\n-    layerConfigurations = (List<FileEntriesLayer>) buildPlan.getLayers();\n+    Function<LayerObject, FileEntriesLayer> castToFileEntriesLayer =", "originalCommit": "0342e9851d4cddca1fc410e329abb9cf546918b8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY1Mjc5OA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2366#discussion_r399652798", "bodyText": "Presumably no user will ever hit this, but should we include an error message if they do?", "author": "loosebazooka", "createdAt": "2020-03-28T11:42:56Z", "path": "jib-plugins-common/src/main/java/com/google/cloud/tools/jib/plugins/common/PluginConfigurationProcessor.java", "diffHunk": "@@ -302,7 +303,9 @@ public static String getSkaffoldSyncMap(\n     // since jib has already expanded out directories after processing everything, we just\n     // ignore directories and provide only files to watch\n     Set<Path> excludesExpanded = getAllFiles(excludes);\n-    for (FileEntriesLayer layer : jibContainerBuilder.describeContainer().getFileEntriesLayers()) {\n+    for (LayerObject layerObject : jibContainerBuilder.toContainerBuildPlan().getLayers()) {\n+      Verify.verify(layerObject instanceof FileEntriesLayer);", "originalCommit": "0342e9851d4cddca1fc410e329abb9cf546918b8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d23b4594c2651a9a42401e2160d64f65c8467bc1", "url": "https://github.com/GoogleContainerTools/jib/commit/d23b4594c2651a9a42401e2160d64f65c8467bc1", "message": "Comment and error messages", "committedDate": "2020-03-30T14:11:12Z", "type": "commit"}, {"oid": "8b711571a38263f4997a67b3b51dfb601d240538", "url": "https://github.com/GoogleContainerTools/jib/commit/8b711571a38263f4997a67b3b51dfb601d240538", "message": "Merge branch 'chanseok-minor-cleanups' of https://github.com/GoogleContainerTools/jib into chanseok-minor-cleanups", "committedDate": "2020-03-30T14:11:22Z", "type": "commit"}]}