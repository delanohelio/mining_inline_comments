{"pr_number": 2499, "pr_title": "Set configured file ownership when creating tarballs", "pr_createdAt": "2020-05-27T18:51:08Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2499", "timeline": [{"oid": "60e7328002b4a787b23bef12867091a229d9aa8f", "url": "https://github.com/GoogleContainerTools/jib/commit/60e7328002b4a787b23bef12867091a229d9aa8f", "message": "Allow setting owners in layers", "committedDate": "2020-05-26T18:25:11Z", "type": "commit"}, {"oid": "612e75e4266d482e0f67b587d54a2a3c7f3d81a8", "url": "https://github.com/GoogleContainerTools/jib/commit/612e75e4266d482e0f67b587d54a2a3c7f3d81a8", "message": "Update API to accept file ownership in layers", "committedDate": "2020-05-26T18:58:57Z", "type": "commit"}, {"oid": "e81774e319fbeedc1cbae534e27ec5b2cf7ddb5d", "url": "https://github.com/GoogleContainerTools/jib/commit/e81774e319fbeedc1cbae534e27ec5b2cf7ddb5d", "message": "CHANGELOG", "committedDate": "2020-05-26T19:10:12Z", "type": "commit"}, {"oid": "e2dd5a4600cebbbfb21cd0a1cba8201cb1fcb23e", "url": "https://github.com/GoogleContainerTools/jib/commit/e2dd5a4600cebbbfb21cd0a1cba8201cb1fcb23e", "message": "Merge branch 'add-owners-property' into file-ownership", "committedDate": "2020-05-26T19:14:50Z", "type": "commit"}, {"oid": "1c1a219eb5983d65e322a774005017a160811740", "url": "https://github.com/GoogleContainerTools/jib/commit/1c1a219eb5983d65e322a774005017a160811740", "message": "WIP: enable local dev", "committedDate": "2020-05-26T19:21:08Z", "type": "commit"}, {"oid": "b33f2de57003bc46649572b153db2cd01014502d", "url": "https://github.com/GoogleContainerTools/jib/commit/b33f2de57003bc46649572b153db2cd01014502d", "message": "Change default value for ownership", "committedDate": "2020-05-26T21:23:44Z", "type": "commit"}, {"oid": "9a4c4b5a45feb5558bc7bf40f6fd551269e9f26b", "url": "https://github.com/GoogleContainerTools/jib/commit/9a4c4b5a45feb5558bc7bf40f6fd551269e9f26b", "message": "Update Javadoc and Build Plan Spec", "committedDate": "2020-05-26T21:38:10Z", "type": "commit"}, {"oid": "92f1323eee6967e4780ed393f55326e242481de6", "url": "https://github.com/GoogleContainerTools/jib/commit/92f1323eee6967e4780ed393f55326e242481de6", "message": "Fix test", "committedDate": "2020-05-26T21:47:09Z", "type": "commit"}, {"oid": "ce9da6d183d17f0e53cb84767afd98b73b0caa86", "url": "https://github.com/GoogleContainerTools/jib/commit/ce9da6d183d17f0e53cb84767afd98b73b0caa86", "message": "Merge branch 'add-owners-property' into file-ownership", "committedDate": "2020-05-26T21:48:12Z", "type": "commit"}, {"oid": "92c3fd6fe44e5606b420e97db6c4ecfdf3b0ca0e", "url": "https://github.com/GoogleContainerTools/jib/commit/92c3fd6fe44e5606b420e97db6c4ecfdf3b0ca0e", "message": "Set file ownership in layers", "committedDate": "2020-05-26T22:29:12Z", "type": "commit"}, {"oid": "d088b39539ed6764d2ef7dd37219480608ff18bc", "url": "https://github.com/GoogleContainerTools/jib/commit/d088b39539ed6764d2ef7dd37219480608ff18bc", "message": "WIP: snapshots", "committedDate": "2020-05-26T23:56:03Z", "type": "commit"}, {"oid": "855a18d7f83c454ec1b089657e8b65439e7190e0", "url": "https://github.com/GoogleContainerTools/jib/commit/855a18d7f83c454ec1b089657e8b65439e7190e0", "message": "resolve version conflicts", "committedDate": "2020-05-27T17:27:10Z", "type": "commit"}, {"oid": "3b43d182a868ed501f6ae2eef8180b8b945f068b", "url": "https://github.com/GoogleContainerTools/jib/commit/3b43d182a868ed501f6ae2eef8180b8b945f068b", "message": "Merge branch 'master' into file-ownership", "committedDate": "2020-05-27T17:27:26Z", "type": "commit"}, {"oid": "e3779d87e8366afa4a098bfc0f48ab94e0d2f638", "url": "https://github.com/GoogleContainerTools/jib/commit/e3779d87e8366afa4a098bfc0f48ab94e0d2f638", "message": "Remove old code", "committedDate": "2020-05-27T17:40:21Z", "type": "commit"}, {"oid": "4a784b363fee948e4a81fc2c04d2083d6e2242bd", "url": "https://github.com/GoogleContainerTools/jib/commit/4a784b363fee948e4a81fc2c04d2083d6e2242bd", "message": "CHANGELOG", "committedDate": "2020-05-27T18:58:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3NjA0Mw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2499#discussion_r431376043", "bodyText": "Seems like there could be some value in separating this out for readability (and documentability)", "author": "loosebazooka", "createdAt": "2020-05-27T19:05:28Z", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/image/ReproducibleLayerBuilder.java", "diffHunk": "@@ -115,6 +115,34 @@ public Blob build() {\n       entry.setMode((entry.getMode() & ~0777) | layerEntry.getPermissions().getPermissionBits());\n       entry.setModTime(layerEntry.getModificationTime().toEpochMilli());\n \n+      entry.setUserId(0);\n+      entry.setGroupId(0);\n+      entry.setUserName(\"\");\n+      entry.setGroupName(\"\");\n+      if (!layerEntry.getOwnership().isEmpty()) {", "originalCommit": "4a784b363fee948e4a81fc2c04d2083d6e2242bd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d1b184a75839caab0c3f36d50f4f4cc544ae9b3e", "url": "https://github.com/GoogleContainerTools/jib/commit/d1b184a75839caab0c3f36d50f4f4cc544ae9b3e", "message": "Factor out code section into method", "committedDate": "2020-05-27T19:48:21Z", "type": "commit"}, {"oid": "f20e6f700a682e50d3ef7b943f8753becf25d43e", "url": "https://github.com/GoogleContainerTools/jib/commit/f20e6f700a682e50d3ef7b943f8753becf25d43e", "message": "Merge branch 'master' into file-ownership", "committedDate": "2020-05-28T17:31:56Z", "type": "commit"}, {"oid": "6f0f140e4e128ed3e8eff43c01b446dc93dbb4cb", "url": "https://github.com/GoogleContainerTools/jib/commit/6f0f140e4e128ed3e8eff43c01b446dc93dbb4cb", "message": "Update CHANGELOG", "committedDate": "2020-05-28T18:41:38Z", "type": "commit"}]}