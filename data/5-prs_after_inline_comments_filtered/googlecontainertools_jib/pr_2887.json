{"pr_number": 2887, "pr_title": "Modify CliLogger to use PrintWriter", "pr_createdAt": "2020-11-06T16:48:47Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2887", "timeline": [{"oid": "d2d860129a1f466ab1f692e97e040e38a87f6558", "url": "https://github.com/GoogleContainerTools/jib/commit/d2d860129a1f466ab1f692e97e040e38a87f6558", "message": "Modify CliLogger to use PrintWriter", "committedDate": "2020-11-06T16:42:02Z", "type": "commit"}, {"oid": "db5c6040f75ce6c8b32b1d3084e7b7da8840175b", "url": "https://github.com/GoogleContainerTools/jib/commit/db5c6040f75ce6c8b32b1d3084e7b7da8840175b", "message": "javadoc change", "committedDate": "2020-11-06T16:48:21Z", "type": "commit"}, {"oid": "89658234b04f6cd589121cca3432f48ef662e0df", "url": "https://github.com/GoogleContainerTools/jib/commit/89658234b04f6cd589121cca3432f48ef662e0df", "message": "refactoring code", "committedDate": "2020-11-06T21:09:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNzMyNg==", "url": "https://github.com/GoogleContainerTools/jib/pull/2887#discussion_r519007326", "bodyText": "I don't think this needs to be a field. Just instantiate as a local variable in call(). I know you'll going to use it in a finally block, so you can create it before try {.", "author": "chanseokoh", "createdAt": "2020-11-06T21:12:04Z", "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/cli2/Jar.java", "diffHunk": "@@ -41,13 +42,20 @@\n   @SuppressWarnings(\"NullAway.Init\") // initialized by picocli\n   private Path jarFile;\n \n+  private final SingleThreadedExecutor executor = new SingleThreadedExecutor();", "originalCommit": "89658234b04f6cd589121cca3432f48ef662e0df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNzQ4MA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2887#discussion_r519007480", "bodyText": "Remove the empty file.", "author": "chanseokoh", "createdAt": "2020-11-06T21:12:25Z", "path": "jib-cli/src/integration-test/JarCommandTest.java", "diffHunk": "@@ -0,0 +1 @@\n+", "originalCommit": "89658234b04f6cd589121cca3432f48ef662e0df", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxNDgzNw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2887#discussion_r519014837", "bodyText": "oops, sorry about that", "author": "mpeddada1", "createdAt": "2020-11-06T21:30:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAwNzQ4MA=="}], "type": "inlineReview"}, {"oid": "2ff15bb0d29517253fa671d6cc61e47c63bfaad8", "url": "https://github.com/GoogleContainerTools/jib/commit/2ff15bb0d29517253fa671d6cc61e47c63bfaad8", "message": "move variable and remove file", "committedDate": "2020-11-06T21:25:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxNjk4Mw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2887#discussion_r519016983", "bodyText": "Probably\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              @CommandLine.Spec CommandSpec spec = CommandSpec.create();\n          \n          \n            \n              @CommandLine.Spec protected CommandSpec spec = CommandSpec.create();\n          \n      \n    \n    \n  \n\nI guess it can't be private?", "author": "chanseokoh", "createdAt": "2020-11-06T21:35:45Z", "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/cli2/Jar.java", "diffHunk": "@@ -23,13 +23,17 @@\n import com.google.cloud.tools.jib.cli.jar.JarFiles;\n import com.google.cloud.tools.jib.filesystem.TempDirectoryProvider;\n import com.google.cloud.tools.jib.plugins.common.logging.ConsoleLogger;\n+import com.google.cloud.tools.jib.plugins.common.logging.SingleThreadedExecutor;\n import java.nio.file.Files;\n import java.nio.file.Path;\n import java.util.concurrent.Callable;\n import picocli.CommandLine;\n+import picocli.CommandLine.Model.CommandSpec;\n \n @CommandLine.Command(name = \"jar\", showAtFileInUsageHelp = true, description = \"Containerize a jar\")\n public class Jar implements Callable<Integer> {\n+  @CommandLine.Spec CommandSpec spec = CommandSpec.create();", "originalCommit": "2ff15bb0d29517253fa671d6cc61e47c63bfaad8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxOTY0OA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2887#discussion_r519019648", "bodyText": "great catch. On second thought, I think it should be private since it's only accessed in this class.", "author": "mpeddada1", "createdAt": "2020-11-06T21:42:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxNjk4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAyMDM0Mg==", "url": "https://github.com/GoogleContainerTools/jib/pull/2887#discussion_r519020342", "bodyText": "Appu put globalOptions as protected, so probably there's a reason for that. But I'm not sure about CommandSpec. Just do some actual jib jar run to confirm you see correct output.", "author": "chanseokoh", "createdAt": "2020-11-06T21:44:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxNjk4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAzNDk5NA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2887#discussion_r519034994", "bodyText": "Ah good point, running  jib --target=docker://jib-cli-image jar unknown.jar returned the expected output : [ERROR] The file path provided does not exist: unknown.jar. I think it could be okay?", "author": "mpeddada1", "createdAt": "2020-11-06T22:23:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxNjk4Mw=="}], "type": "inlineReview"}, {"oid": "a9cecc7eeecbb02820ff47c14956d3ce981e024c", "url": "https://github.com/GoogleContainerTools/jib/commit/a9cecc7eeecbb02820ff47c14956d3ce981e024c", "message": "make variable private", "committedDate": "2020-11-06T21:39:26Z", "type": "commit"}]}