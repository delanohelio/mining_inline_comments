{"pr_number": 2295, "pr_title": "Treat empty update check config as non-existent", "pr_createdAt": "2020-02-13T22:05:58Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2295", "timeline": [{"oid": "64d886433488b63809c176fc77cb9915e7ea5015", "url": "https://github.com/GoogleContainerTools/jib/commit/64d886433488b63809c176fc77cb9915e7ea5015", "message": "Treat empty update check config as non-existent", "committedDate": "2020-02-13T22:03:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE1NTgyNA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2295#discussion_r379155824", "bodyText": "But this means if we ever create an empty file, we can never escape the situation and always call the endpoint. I think for this file, we don't need to check the size, because we don't show a warning. And this will auto-fix the empty file problem by deleting it.", "author": "chanseokoh", "createdAt": "2020-02-13T22:29:48Z", "path": "jib-plugins-common/src/main/java/com/google/cloud/tools/jib/plugins/common/UpdateChecker.java", "diffHunk": "@@ -134,7 +133,7 @@ void setDisableUpdateCheck(boolean disableUpdateCheck) {\n       }\n \n       // Check time of last update check\n-      if (Files.exists(lastUpdateCheck)) {\n+      if (Files.exists(lastUpdateCheck) && Files.size(lastUpdateCheck) > 0) {", "originalCommit": "64d886433488b63809c176fc77cb9915e7ea5015", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE1OTEzNA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2295#discussion_r379159134", "bodyText": "If we create an empty file won't it be fixed when it's written to at L163? I guess it doesn't matter.", "author": "TadCordle", "createdAt": "2020-02-13T22:38:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE1NTgyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE2OTU4Ng==", "url": "https://github.com/GoogleContainerTools/jib/pull/2295#discussion_r379169586", "bodyText": "Oh! I didn't realize that.", "author": "chanseokoh", "createdAt": "2020-02-13T23:07:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE1NTgyNA=="}], "type": "inlineReview"}, {"oid": "e4680529401a5adb9c8d91cc5ffbb039e99fc090", "url": "https://github.com/GoogleContainerTools/jib/commit/e4680529401a5adb9c8d91cc5ffbb039e99fc090", "message": "Not lastUpdateCheck", "committedDate": "2020-02-13T22:38:32Z", "type": "commit"}]}