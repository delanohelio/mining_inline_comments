{"pr_number": 675, "pr_title": "Added ability to specify permissions for collaborators", "pr_createdAt": "2020-01-23T20:15:40Z", "pr_url": "https://github.com/hub4j/github-api/pull/675", "timeline": [{"oid": "90301ae9ee43208d9210dd1de7d3d51482d405be", "url": "https://github.com/hub4j/github-api/commit/90301ae9ee43208d9210dd1de7d3d51482d405be", "message": "Added ability to specify permissions for collaborators", "committedDate": "2020-01-23T19:37:35Z", "type": "commit"}, {"oid": "9ab8bdfe4ace551eade1238434169585dc8bb64b", "url": "https://github.com/hub4j/github-api/commit/9ab8bdfe4ace551eade1238434169585dc8bb64b", "message": "formatted file", "committedDate": "2020-01-23T20:45:24Z", "type": "commit"}, {"oid": "8792213594f590f937601be05f758ee986253247", "url": "https://github.com/hub4j/github-api/commit/8792213594f590f937601be05f758ee986253247", "message": "tried formatting the file once again.", "committedDate": "2020-01-23T21:16:36Z", "type": "commit"}, {"oid": "3bf8baee8588e53bdc4339577b5f6b15dd917f27", "url": "https://github.com/hub4j/github-api/commit/3bf8baee8588e53bdc4339577b5f6b15dd917f27", "message": "format fixed and validation passed", "committedDate": "2020-01-24T00:32:37Z", "type": "commit"}, {"oid": "ad683fee8938154abf0e40c55318b8dc794012e2", "url": "https://github.com/hub4j/github-api/commit/ad683fee8938154abf0e40c55318b8dc794012e2", "message": "Merge branch 'master' into collaborator-permissions", "committedDate": "2020-01-24T01:51:59Z", "type": "commit"}, {"oid": "3e4f160c5db33d9eba299502ff73903ba0078a98", "url": "https://github.com/hub4j/github-api/commit/3e4f160c5db33d9eba299502ff73903ba0078a98", "message": "ran mvn clean install then the build commmand and build was successful", "committedDate": "2020-01-25T00:23:59Z", "type": "commit"}, {"oid": "7916600a7b83221e49ae4e6fe536adf7c5f91005", "url": "https://github.com/hub4j/github-api/commit/7916600a7b83221e49ae4e6fe536adf7c5f91005", "message": "updating local branch", "committedDate": "2020-01-25T00:24:53Z", "type": "commit"}, {"oid": "58c069ec5c72ab8529a663db155b3069a35d0da9", "url": "https://github.com/hub4j/github-api/commit/58c069ec5c72ab8529a663db155b3069a35d0da9", "message": "Merge branch 'master' into collaborator-permissions", "committedDate": "2020-01-25T00:26:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxNTI0MQ==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r370915241", "bodyText": "Take a minute to fix this formatting please.", "author": "bitwiseman", "createdAt": "2020-01-25T05:26:59Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -535,9 +535,12 @@ public GHRelease getLatestRelease() throws IOException {\n      * @return the owner name\n      */\n     public String getOwnerName() {\n-        // consistency of the GitHub API is super... some serialized forms of GHRepository populate\n-        // a full GHUser while others populate only the owner and email. This later form is super helpful\n-        // in putting the login in owner.name not owner.login... thankfully we can easily identify this\n+        // consistency of the GitHub API is super... some serialized forms of", "originalCommit": "58c069ec5c72ab8529a663db155b3069a35d0da9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxNTI0OQ==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r370915249", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * <a href= \"https://help.github.com/articles/assigning-issues-and-pull-requests-to-other-github-users/\">the\n          \n          \n            \n                 * <a href=\"https://help.github.com/articles/assigning-issues-and-pull-requests-to-other-github-users/\">the", "author": "bitwiseman", "createdAt": "2020-01-25T05:27:23Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -750,7 +753,7 @@ public int getSize() {\n \n     /**\n      * Lists all\n-     * <a href=\"https://help.github.com/articles/assigning-issues-and-pull-requests-to-other-github-users/\">the\n+     * <a href= \"https://help.github.com/articles/assigning-issues-and-pull-requests-to-other-github-users/\">the", "originalCommit": "58c069ec5c72ab8529a663db155b3069a35d0da9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxNTMyOA==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r370915328", "bodyText": "It's fine to add new methods with new parameters, but we need to keep the original methods as well.\nIf you believe the old ones are no longer valid you can mark them as deprecated.", "author": "bitwiseman", "createdAt": "2020-01-25T05:29:43Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -840,23 +843,27 @@ public GHPermissionType getPermission(GHUser u) throws IOException {\n      *\n      * @param users\n      *            the users\n+     * @param perm\n+     *            the permission level\n      * @throws IOException\n      *             the io exception\n      */\n-    public void addCollaborators(GHUser... users) throws IOException {\n-        addCollaborators(asList(users));\n+    public void addCollaborators(GHOrganization.Permission perm, GHUser... users) throws IOException {", "originalCommit": "58c069ec5c72ab8529a663db155b3069a35d0da9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxNTM1Nw==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r370915357", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // return\n          \n          \n            \n                // return return root.retrieveWithAuth(\"/pulls/\"+owner+'/'+name,JsonPullRequests.class).wrap(root);", "author": "bitwiseman", "createdAt": "2020-01-25T05:30:30Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -1944,7 +1963,8 @@ public GHHook createWebHook(URL url) throws IOException {\n     // * Retrieves all the pull requests.\n     // */\n     // public List<GHPullRequest> getPullRequests() throws IOException {\n-    // return root.retrieveWithAuth(\"/pulls/\"+owner+'/'+name,JsonPullRequests.class).wrap(root);\n+    // return", "originalCommit": "58c069ec5c72ab8529a663db155b3069a35d0da9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxNTM2MQ==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r370915361", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // root.retrieveWithAuth(\"/pulls/\"+owner+'/'+name,JsonPullRequests.class).wrap(root);", "author": "bitwiseman", "createdAt": "2020-01-25T05:30:40Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -1944,7 +1963,8 @@ public GHHook createWebHook(URL url) throws IOException {\n     // * Retrieves all the pull requests.\n     // */\n     // public List<GHPullRequest> getPullRequests() throws IOException {\n-    // return root.retrieveWithAuth(\"/pulls/\"+owner+'/'+name,JsonPullRequests.class).wrap(root);\n+    // return\n+    // root.retrieveWithAuth(\"/pulls/\"+owner+'/'+name,JsonPullRequests.class).wrap(root);", "originalCommit": "58c069ec5c72ab8529a663db155b3069a35d0da9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0e310fa96a9b6566519bc6bea57d0741d83ebef0", "url": "https://github.com/hub4j/github-api/commit/0e310fa96a9b6566519bc6bea57d0741d83ebef0", "message": "Merge branch 'master' into collaborator-permissions", "committedDate": "2020-01-28T21:21:25Z", "type": "commit"}, {"oid": "c5cb16abfb928290786025f958b244eca2412ace", "url": "https://github.com/hub4j/github-api/commit/c5cb16abfb928290786025f958b244eca2412ace", "message": "Merge branch 'master' into collaborator-permissions", "committedDate": "2020-01-31T16:32:35Z", "type": "commit"}, {"oid": "6576beae76186c3f2cdfaa55a83a86c2d58ec8b0", "url": "https://github.com/hub4j/github-api/commit/6576beae76186c3f2cdfaa55a83a86c2d58ec8b0", "message": "Added missing methods to keep the API from breaking\nadded tests for addCollaborators()", "committedDate": "2020-02-02T04:39:14Z", "type": "commit"}, {"oid": "205e5ab03df5ef4ec0683f351e7bb8691b3b19bf", "url": "https://github.com/hub4j/github-api/commit/205e5ab03df5ef4ec0683f351e7bb8691b3b19bf", "message": "Merge branch 'collaborator-permissions' of https://github.com/jimmysombrero/github-api into collaborator-permissions", "committedDate": "2020-02-02T04:39:28Z", "type": "commit"}, {"oid": "7214c7d39341aaac6f8c95f39f1432bb7c09f3e6", "url": "https://github.com/hub4j/github-api/commit/7214c7d39341aaac6f8c95f39f1432bb7c09f3e6", "message": "Merge branch 'master' into collaborator-permissions", "committedDate": "2020-02-02T04:40:54Z", "type": "commit"}, {"oid": "d767575f7646c369b1fe375651bd61ea161f06f0", "url": "https://github.com/hub4j/github-api/commit/d767575f7646c369b1fe375651bd61ea161f06f0", "message": "Added test for addCollaborators\nMark old addCollaborators methods depricated", "committedDate": "2020-02-03T04:02:56Z", "type": "commit"}, {"oid": "8bcad7b3f9b76bd6aad5d17c984f13de2335d532", "url": "https://github.com/hub4j/github-api/commit/8bcad7b3f9b76bd6aad5d17c984f13de2335d532", "message": "Merge branch 'collaborator-permissions' of https://github.com/jimmysombrero/github-api into collaborator-permissions", "committedDate": "2020-02-03T04:03:08Z", "type": "commit"}, {"oid": "76919a819f5a8c2dcc52ae82bc3ab8ed453c43df", "url": "https://github.com/hub4j/github-api/commit/76919a819f5a8c2dcc52ae82bc3ab8ed453c43df", "message": "Merge branch 'master' into collaborator-permissions", "committedDate": "2020-02-03T20:46:17Z", "type": "commit"}, {"oid": "5a799400a9e3a2d02b698778192a047ce6ba9c30", "url": "https://github.com/hub4j/github-api/commit/5a799400a9e3a2d02b698778192a047ce6ba9c30", "message": "fixed minor formatting issues", "committedDate": "2020-02-05T03:10:29Z", "type": "commit"}, {"oid": "b33fe9f7fe9e834e4114b9a15bb23e7a48153b3b", "url": "https://github.com/hub4j/github-api/commit/b33fe9f7fe9e834e4114b9a15bb23e7a48153b3b", "message": "Merge branch 'collaborator-permissions' of https://github.com/jimmysombrero/github-api into collaborator-permissions", "committedDate": "2020-02-05T03:10:39Z", "type": "commit"}, {"oid": "dddcf624e6af59787abc6618576ee95e455b35db", "url": "https://github.com/hub4j/github-api/commit/dddcf624e6af59787abc6618576ee95e455b35db", "message": "finished suggested formatting changes", "committedDate": "2020-02-06T03:30:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgwNjcyNw==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r375806727", "bodyText": "Now that I'm looking at the api documentation for \"Add user as collaborator it doesn't look like permissions are a required in all cases. So, we probably don't want the base methods deprecated.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Deprecated", "author": "bitwiseman", "createdAt": "2020-02-06T12:30:24Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -843,6 +857,7 @@ public GHPermissionType getPermission(GHUser u) throws IOException {\n      * @throws IOException\n      *             the io exception\n      */\n+    @Deprecated", "originalCommit": "dddcf624e6af59787abc6618576ee95e455b35db", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgwNzAxMg==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r375807012", "bodyText": "This would be an API change.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void addCollaborators(List<GHUser> users) throws IOException {\n          \n          \n            \n                public void addCollaborators(Collection<GHUser> users) throws IOException {", "author": "bitwiseman", "createdAt": "2020-02-06T12:31:06Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -855,10 +870,25 @@ public void addCollaborators(GHUser... users) throws IOException {\n      * @throws IOException\n      *             the io exception\n      */\n-    public void addCollaborators(Collection<GHUser> users) throws IOException {\n+    @Deprecated\n+    public void addCollaborators(List<GHUser> users) throws IOException {", "originalCommit": "dddcf624e6af59787abc6618576ee95e455b35db", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgwNzM3Ng==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r375807376", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Deprecated\n          \n      \n    \n    \n  \n\nSame as above.", "author": "bitwiseman", "createdAt": "2020-02-06T12:32:01Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -855,10 +870,25 @@ public void addCollaborators(GHUser... users) throws IOException {\n      * @throws IOException\n      *             the io exception\n      */\n-    public void addCollaborators(Collection<GHUser> users) throws IOException {\n+    @Deprecated", "originalCommit": "dddcf624e6af59787abc6618576ee95e455b35db", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgwOTEwNA==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r375809104", "bodyText": "Can we make all versions call one method?  Pass null for permission if it isn't used?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private void modifyCollaborators(GHOrganization.Permission perm, Collection<GHUser> users, String method)\n          \n          \n            \n                private void modifyCollaborators(@Nonnull Collection<GHUser> users, @Nonnull String method, @CheckForNull GHOrganization.Permission permission)", "author": "bitwiseman", "createdAt": "2020-02-06T12:36:00Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -889,6 +919,18 @@ private void modifyCollaborators(Collection<GHUser> users, String method) throws\n         }\n     }\n \n+    private void modifyCollaborators(GHOrganization.Permission perm, Collection<GHUser> users, String method)", "originalCommit": "dddcf624e6af59787abc6618576ee95e455b35db", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgxNTIzMQ==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r375815231", "bodyText": "public void addCollaborators(Collection<GHUser> users, GHOrganization.Permission perm) throws IOException {\n\nSince perm is optional, from an API design view I want it to be on the end, but then the (GHOrganization.Permission perm, GHUser... users) signature looks out of place.\nWhat's your opinion? Do we just take this as it is or reverse this and remove the other signature?", "author": "bitwiseman", "createdAt": "2020-02-06T12:51:09Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -855,10 +870,25 @@ public void addCollaborators(GHUser... users) throws IOException {\n      * @throws IOException\n      *             the io exception\n      */\n-    public void addCollaborators(Collection<GHUser> users) throws IOException {\n+    @Deprecated\n+    public void addCollaborators(List<GHUser> users) throws IOException {\n         modifyCollaborators(users, \"PUT\");\n     }\n \n+    /**\n+     * Add collaborators.\n+     *\n+     * @param users\n+     *            the users\n+     * @param perm\n+     *            the permission level\n+     * @throws IOException\n+     *             the io exception\n+     */\n+    public void addCollaborators(GHOrganization.Permission perm, Collection<GHUser> users) throws IOException {", "originalCommit": "dddcf624e6af59787abc6618576ee95e455b35db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjIwNzM0Mg==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r376207342", "bodyText": "That's a tough question.  I agree with the API design view of having permissions at the end, but if we get rid of the other signature then anyone that only needs to add a single collaborator will need to create and populate a collection.  Since there is already a method that takes a collection, what do you think about changing the signature to only accept a single user?\npublic void addCollaborator(GHUser user, GHOrganization.Permission permission)", "author": "jimmysombrero", "createdAt": "2020-02-07T04:14:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgxNTIzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ3ODc1MQ==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r376478751", "bodyText": "Or we just accept that one signature is out of place but convenient and appropriate.", "author": "bitwiseman", "createdAt": "2020-02-07T16:17:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgxNTIzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjY4Mjc5NQ==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r376682795", "bodyText": "Sounds good.", "author": "jimmysombrero", "createdAt": "2020-02-08T03:13:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgxNTIzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTgxNzMzOA==", "url": "https://github.com/hub4j/github-api/pull/675#discussion_r375817338", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void addCollaborators(GHOrganization.Permission perm, GHUser... users) throws IOException {\n          \n          \n            \n                public void addCollaborators(GHOrganization.Permission permission, GHUser... users) throws IOException {", "author": "bitwiseman", "createdAt": "2020-02-06T12:55:39Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -835,6 +835,20 @@ public GHPermissionType getPermission(GHUser u) throws IOException {\n                         root.getOrganization(getOwnerName())))));\n     }\n \n+    /**\n+     * Add collaborators.\n+     *\n+     * @param users\n+     *            the users\n+     * @param perm\n+     *            the permission level\n+     * @throws IOException\n+     *             the io exception\n+     */\n+    public void addCollaborators(GHOrganization.Permission perm, GHUser... users) throws IOException {", "originalCommit": "dddcf624e6af59787abc6618576ee95e455b35db", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "54a059ff68d811685bc485fb32c4b2569e329575", "url": "https://github.com/hub4j/github-api/commit/54a059ff68d811685bc485fb32c4b2569e329575", "message": "updated signatures for addCollaborators methods\nupdated javadoc comments for addCollaborators methods\ncombined both modifyCollaborators methods into one method\nupdated addColloaborators test to match new method signature", "committedDate": "2020-02-08T03:13:23Z", "type": "commit"}, {"oid": "edc697dd73b68bb0122d6b3bbe3f9a10b249ac8a", "url": "https://github.com/hub4j/github-api/commit/edc697dd73b68bb0122d6b3bbe3f9a10b249ac8a", "message": "fixed javadoc isues", "committedDate": "2020-02-08T03:27:00Z", "type": "commit"}, {"oid": "ab965969ddd7604a837bdac3a2d6d8a8381d644b", "url": "https://github.com/hub4j/github-api/commit/ab965969ddd7604a837bdac3a2d6d8a8381d644b", "message": "Merge branch 'master' into collaborator-permissions", "committedDate": "2020-02-13T06:31:03Z", "type": "commit"}, {"oid": "0400032923440c5b5c3ba24a6c77224753d46b5b", "url": "https://github.com/hub4j/github-api/commit/0400032923440c5b5c3ba24a6c77224753d46b5b", "message": "Merge branch 'master' into collaborator-permissions", "committedDate": "2020-02-13T06:32:50Z", "type": "commit"}]}