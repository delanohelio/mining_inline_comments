{"pr_number": 3674, "pr_title": "Use floodlightrouter sw tracking for stats requests routing", "pr_createdAt": "2020-08-03T16:47:19Z", "pr_url": "https://github.com/telstra/open-kilda/pull/3674", "timeline": [{"oid": "6a7d79af81fe534da166a090c017b8ef45365b63", "url": "https://github.com/telstra/open-kilda/commit/6a7d79af81fe534da166a090c017b8ef45365b63", "message": "Use floodlightrouter sw tracking for stats requests routing", "committedDate": "2020-08-05T09:15:04Z", "type": "forcePushed"}, {"oid": "18c3e1207646cd8ac9c914fd12f3292f98c4fa86", "url": "https://github.com/telstra/open-kilda/commit/18c3e1207646cd8ac9c914fd12f3292f98c4fa86", "message": "Use floodlightrouter sw tracking for stats requests routing", "committedDate": "2020-08-11T11:45:11Z", "type": "forcePushed"}, {"oid": "60bb67fa22e347cc486fbe3092a667571550b7c1", "url": "https://github.com/telstra/open-kilda/commit/60bb67fa22e347cc486fbe3092a667571550b7c1", "message": "Use floodlightrouter sw tracking for stats requests routing", "committedDate": "2020-08-12T15:21:34Z", "type": "forcePushed"}, {"oid": "e4aa4ca70ca7e986bc6c98b56998489d305617ee", "url": "https://github.com/telstra/open-kilda/commit/e4aa4ca70ca7e986bc6c98b56998489d305617ee", "message": "Use floodlightrouter sw tracking for stats requests routing", "committedDate": "2020-08-13T09:18:28Z", "type": "commit"}, {"oid": "e4aa4ca70ca7e986bc6c98b56998489d305617ee", "url": "https://github.com/telstra/open-kilda/commit/e4aa4ca70ca7e986bc6c98b56998489d305617ee", "message": "Use floodlightrouter sw tracking for stats requests routing", "committedDate": "2020-08-13T09:18:28Z", "type": "forcePushed"}, {"oid": "981b6fd14c277adb8b715e4a7b92a7c546457cf3", "url": "https://github.com/telstra/open-kilda/commit/981b6fd14c277adb8b715e4a7b92a7c546457cf3", "message": "Update test framework to allow 2+ floodlights for switch", "committedDate": "2020-08-13T10:09:14Z", "type": "commit"}, {"oid": "86950d01ce399f94462f1218b48eac2b99b990b1", "url": "https://github.com/telstra/open-kilda/commit/86950d01ce399f94462f1218b48eac2b99b990b1", "message": "Merge pull request #3645 from telstra/functional/multi_fl\n\nUpdate test framework to allow 2+ management floodlights for switch", "committedDate": "2020-08-24T20:05:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTIyMQ==", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r477055221", "bodyText": "Do we really need a command pattern here?", "author": "timofei-durakov", "createdAt": "2020-08-26T06:07:51Z", "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingAdd.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n+\n+import org.openkilda.model.SwitchId;\n+\n+public class RegionMappingAdd extends RegionMappingUpdate {", "originalCommit": "86950d01ce399f94462f1218b48eac2b99b990b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1Njc5Mw==", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r479956793", "bodyText": "This is a visitor, not command.", "author": "surabujin", "createdAt": "2020-08-31T07:48:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTIyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk3OTEwNA==", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r479979104", "bodyText": "my bad, was thinking about the command pattern there at that moment). looks like it won't work here since you need to inject storage in it somehow, and finally end up with visitor.", "author": "timofei-durakov", "createdAt": "2020-08-31T08:33:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTIyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTgzMA==", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r477055830", "bodyText": "this inverse of action make things harder to track without any pros", "author": "timofei-durakov", "createdAt": "2020-08-26T06:09:33Z", "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingAdd.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n+\n+import org.openkilda.model.SwitchId;\n+\n+public class RegionMappingAdd extends RegionMappingUpdate {\n+    public RegionMappingAdd(SwitchId switchId, String region, boolean readWriteMode) {\n+        super(switchId, region, readWriteMode);\n+    }\n+\n+    @Override\n+    public void apply(RegionMappingStorage storage) {\n+        storage.update(this);", "originalCommit": "86950d01ce399f94462f1218b48eac2b99b990b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1NzA1Mg==", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r479957052", "bodyText": "This is a visitor pattern. What do you propose to use here?", "author": "surabujin", "createdAt": "2020-08-31T07:49:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTgzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NjIxMQ==", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r477056211", "bodyText": "single implementation without any signs that any other will come in future, can't see any value from this", "author": "timofei-durakov", "createdAt": "2020-08-26T06:10:34Z", "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingStorage.java", "diffHunk": "@@ -13,12 +13,12 @@\n  *   limitations under the License.\n  */\n \n-package org.openkilda.wfm.topology.statsrouter.service;\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n \n-import org.openkilda.messaging.Message;\n+public interface RegionMappingStorage {", "originalCommit": "86950d01ce399f94462f1218b48eac2b99b990b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1ODUwMw==", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r479958503", "bodyText": "In this specific case - this is part of visitor pattern implementation. I can say the same about all NB services and most part of switchmanager topology (and this is only what I can remember right now).", "author": "surabujin", "createdAt": "2020-08-31T07:52:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NjIxMQ=="}], "type": "inlineReview"}, {"oid": "5686f0bedf0d71c0d8658e5329652b58766a87e4", "url": "https://github.com/telstra/open-kilda/commit/5686f0bedf0d71c0d8658e5329652b58766a87e4", "message": "Merge branch 'develop' into use-switch-monitoring-toolset-in-stats-collector", "committedDate": "2020-08-31T10:32:36Z", "type": "commit"}, {"oid": "5686f0bedf0d71c0d8658e5329652b58766a87e4", "url": "https://github.com/telstra/open-kilda/commit/5686f0bedf0d71c0d8658e5329652b58766a87e4", "message": "Merge branch 'develop' into use-switch-monitoring-toolset-in-stats-collector", "committedDate": "2020-08-31T10:32:36Z", "type": "forcePushed"}]}