{"pr_number": 3402, "pr_title": "Server 42 RTT Ingress rule", "pr_createdAt": "2020-04-21T13:52:49Z", "pr_url": "https://github.com/telstra/open-kilda/pull/3402", "timeline": [{"oid": "7d2fac0491d6b71e5223e5088b919f43f44d4327", "url": "https://github.com/telstra/open-kilda/commit/7d2fac0491d6b71e5223e5088b919f43f44d4327", "message": "Added rules syncronisation", "committedDate": "2020-04-22T15:38:50Z", "type": "forcePushed"}, {"oid": "23373fe989a11b633537c828517da28ba0e3198c", "url": "https://github.com/telstra/open-kilda/commit/23373fe989a11b633537c828517da28ba0e3198c", "message": "Added rules syncronisation", "committedDate": "2020-04-29T09:40:47Z", "type": "forcePushed"}, {"oid": "382698a297dbce59d9c109262e98f2213159661f", "url": "https://github.com/telstra/open-kilda/commit/382698a297dbce59d9c109262e98f2213159661f", "message": "Fixes", "committedDate": "2020-04-29T14:31:18Z", "type": "forcePushed"}, {"oid": "9970aac90e157b68e19b499e09ec84e7e055da97", "url": "https://github.com/telstra/open-kilda/commit/9970aac90e157b68e19b499e09ec84e7e055da97", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-01T12:10:06Z", "type": "forcePushed"}, {"oid": "44869aaa44722d4e19dc431d45f28d585d9d3c1d", "url": "https://github.com/telstra/open-kilda/commit/44869aaa44722d4e19dc431d45f28d585d9d3c1d", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-07T06:30:20Z", "type": "forcePushed"}, {"oid": "2f4c348e469e2b3cf2e2bb8e130f4c5356614edb", "url": "https://github.com/telstra/open-kilda/commit/2f4c348e469e2b3cf2e2bb8e130f4c5356614edb", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-07T09:58:11Z", "type": "forcePushed"}, {"oid": "1ac9a01078346665ce77eaccee0152497aafa4c0", "url": "https://github.com/telstra/open-kilda/commit/1ac9a01078346665ce77eaccee0152497aafa4c0", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-12T06:19:57Z", "type": "forcePushed"}, {"oid": "0e741b119cd12a4378153cd7dd4b1906f31df717", "url": "https://github.com/telstra/open-kilda/commit/0e741b119cd12a4378153cd7dd4b1906f31df717", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-13T05:42:21Z", "type": "forcePushed"}, {"oid": "c49a291eb366258edc6628a90e5e3d7369cf6298", "url": "https://github.com/telstra/open-kilda/commit/c49a291eb366258edc6628a90e5e3d7369cf6298", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-13T07:53:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI0MDc4NA==", "url": "https://github.com/telstra/open-kilda/pull/3402#discussion_r424240784", "bodyText": "I'd suggest to add values to output here", "author": "timofei-durakov", "createdAt": "2020-05-13T07:51:44Z", "path": "src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallServer42lIngressFlow.java", "diffHunk": "@@ -0,0 +1,143 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.messaging.command.flow;\n+\n+import static org.openkilda.messaging.Utils.FLOW_ID;\n+import static org.openkilda.messaging.Utils.TRANSACTION_ID;\n+\n+import org.openkilda.messaging.Utils;\n+import org.openkilda.model.FlowEncapsulationType;\n+import org.openkilda.model.OutputVlanType;\n+import org.openkilda.model.SwitchId;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.databind.annotation.JsonSerialize;\n+import lombok.Builder;\n+import lombok.EqualsAndHashCode;\n+import lombok.Getter;\n+import lombok.Setter;\n+\n+import java.util.UUID;\n+\n+@Getter\n+@Setter\n+@JsonSerialize\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+@EqualsAndHashCode(callSuper = true)\n+public class InstallServer42lIngressFlow extends InstallTransitFlow {\n+    private static final long serialVersionUID = 2944794560559058839L;\n+\n+    @JsonProperty(\"customer_port\")\n+    protected int customerPort;\n+\n+    @JsonProperty(\"input_vlan_id\")\n+    protected Integer inputVlanId;\n+\n+    @JsonProperty(\"output_vlan_type\")\n+    protected OutputVlanType outputVlanType;\n+\n+    @JsonProperty(\"meter_id\")\n+    protected Long meterId;\n+\n+    @JsonProperty(\"egress_switch_id\")\n+    protected SwitchId egressSwitchId;\n+\n+    /**\n+     * Instance constructor.\n+     *\n+     * @param transactionId  transaction id\n+     * @param id             id of the flow\n+     * @param cookie         flow cookie\n+     * @param switchId       switch ID for flow installation\n+     * @param inputPort      input port of the flow\n+     * @param outputPort     output port of the flow\n+     * @param inputVlanId    input vlan id value\n+     * @param transitEncapsulationId  transit encapsulation id value\n+     * @param transitEncapsulationType  transit encapsulation type value\n+     * @param outputVlanType output vlan type action\n+     * @param meterId        flow meter id\n+     * @param egressSwitchId id of the ingress switch\n+     * @throws IllegalArgumentException if any of mandatory parameters is null\n+     */\n+    @Builder\n+    @JsonCreator\n+    public InstallServer42lIngressFlow(@JsonProperty(TRANSACTION_ID) final UUID transactionId,\n+                                       @JsonProperty(FLOW_ID) final String id,\n+                                       @JsonProperty(\"cookie\") final Long cookie,\n+                                       @JsonProperty(\"switch_id\") final SwitchId switchId,\n+                                       @JsonProperty(\"input_port\") final Integer inputPort,\n+                                       @JsonProperty(\"output_port\") final Integer outputPort,\n+                                       @JsonProperty(\"customer_port\") final Integer customerPort,\n+                                       @JsonProperty(\"input_vlan_id\") final Integer inputVlanId,\n+                                       @JsonProperty(\"transit_encapsulation_id\") final Integer transitEncapsulationId,\n+                                       @JsonProperty(\"transit_encapsulation_type\") final FlowEncapsulationType\n+                                          transitEncapsulationType,\n+                                       @JsonProperty(\"output_vlan_type\") final OutputVlanType outputVlanType,\n+                                       @JsonProperty(\"meter_id\") final Long meterId,\n+                                       @JsonProperty(\"egress_switch_id\") final SwitchId egressSwitchId) {\n+        super(transactionId, id, cookie, switchId, inputPort, outputPort, transitEncapsulationId,\n+                transitEncapsulationType, true);\n+        setCustomerPort(customerPort);\n+        setInputVlanId(inputVlanId);\n+        setOutputVlanType(outputVlanType);\n+        setMeterId(meterId);\n+        setEgressSwitchId(egressSwitchId);\n+    }\n+\n+    /**\n+     * Sets output action on the vlan tag.\n+     *\n+     * @param outputVlanType action on the vlan tag\n+     */\n+    public void setOutputVlanType(final OutputVlanType outputVlanType) {\n+        if (outputVlanType == null) {\n+            throw new IllegalArgumentException(\"need to set output_vlan_type\");\n+        } else if (!Utils.validateInputVlanType(inputVlanId, outputVlanType)) {\n+            throw new IllegalArgumentException(\"need to set valid values for input_vlan_id and output_vlan_type\");", "originalCommit": "0e741b119cd12a4378153cd7dd4b1906f31df717", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ea8ecc13c640aef163dbf5c32030e7f9c6cade28", "url": "https://github.com/telstra/open-kilda/commit/ea8ecc13c640aef163dbf5c32030e7f9c6cade28", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-13T08:18:36Z", "type": "forcePushed"}, {"oid": "c77e0533dff33ec257c7245149f10407fd9f8d9f", "url": "https://github.com/telstra/open-kilda/commit/c77e0533dff33ec257c7245149f10407fd9f8d9f", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-13T13:29:56Z", "type": "forcePushed"}, {"oid": "e42eb94538019a53d7956a2ee42c6cea1d543420", "url": "https://github.com/telstra/open-kilda/commit/e42eb94538019a53d7956a2ee42c6cea1d543420", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-14T10:17:53Z", "type": "forcePushed"}, {"oid": "02999496260f6fac373db043f7a5941f410ca94a", "url": "https://github.com/telstra/open-kilda/commit/02999496260f6fac373db043f7a5941f410ca94a", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-14T12:05:35Z", "type": "forcePushed"}, {"oid": "da34725573c0cf540ec211bbbcb0055064d0e19f", "url": "https://github.com/telstra/open-kilda/commit/da34725573c0cf540ec211bbbcb0055064d0e19f", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-19T06:37:47Z", "type": "forcePushed"}, {"oid": "cf465d18cb0ca3fa057b51bbc83ec404abdc0df8", "url": "https://github.com/telstra/open-kilda/commit/cf465d18cb0ca3fa057b51bbc83ec404abdc0df8", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-19T07:00:03Z", "type": "forcePushed"}, {"oid": "a6c9516d378fcf89d2bdd99ba7f52bb590e8d351", "url": "https://github.com/telstra/open-kilda/commit/a6c9516d378fcf89d2bdd99ba7f52bb590e8d351", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-20T10:25:32Z", "type": "forcePushed"}, {"oid": "fc2f1b596dcf272cdfbc01cd7eba29263093015d", "url": "https://github.com/telstra/open-kilda/commit/fc2f1b596dcf272cdfbc01cd7eba29263093015d", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-20T15:30:54Z", "type": "forcePushed"}, {"oid": "e08cf1c35fbe66516a6c1cbf28cfa0706c95d793", "url": "https://github.com/telstra/open-kilda/commit/e08cf1c35fbe66516a6c1cbf28cfa0706c95d793", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-25T14:08:09Z", "type": "forcePushed"}, {"oid": "b462bcb6c1c6ccb39f38c0ab15f3d695f82a5be3", "url": "https://github.com/telstra/open-kilda/commit/b462bcb6c1c6ccb39f38c0ab15f3d695f82a5be3", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-25T15:47:24Z", "type": "commit"}, {"oid": "b462bcb6c1c6ccb39f38c0ab15f3d695f82a5be3", "url": "https://github.com/telstra/open-kilda/commit/b462bcb6c1c6ccb39f38c0ab15f3d695f82a5be3", "message": "Server 42 RTT: Added Ingress rule", "committedDate": "2020-05-25T15:47:24Z", "type": "forcePushed"}]}