{"pr_number": 3191, "pr_title": "Expose OF transaction id into speaker logs", "pr_createdAt": "2020-02-11T11:06:09Z", "pr_url": "https://github.com/telstra/open-kilda/pull/3191", "timeline": [{"oid": "7d2d3e029190a48c3349d2592889f3f562b7c876", "url": "https://github.com/telstra/open-kilda/commit/7d2d3e029190a48c3349d2592889f3f562b7c876", "message": "Expose OF transaction id into speaker logs\n\nExtend speaker log message by addind OF transaction ID (xid) into all\nservices that produce/parse OF messages. It should help to correlate\nopen-kilda logs with switch logs.", "committedDate": "2020-02-11T10:56:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU3MzA1NQ==", "url": "https://github.com/telstra/open-kilda/pull/3191#discussion_r377573055", "bodyText": "Doubt about this change. Will it repeat a log record for specific messages that already logged?", "author": "pzakatov", "createdAt": "2020-02-11T11:16:32Z", "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/service/session/Session.java", "diffHunk": "@@ -189,7 +189,7 @@ boolean handleResponse(OFMessage message) {\n \n     private void actualWrite(OFMessage message)\n             throws SwitchWriteException {\n-        log.debug(\"push OF message to {}: {}\", sw.getId(), message);\n+        log.info(\"push OF message to {}: {}\", sw.getId(), message);", "originalCommit": "7d2d3e029190a48c3349d2592889f3f562b7c876", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYwNTI0NA==", "url": "https://github.com/telstra/open-kilda/pull/3191#discussion_r377605244", "bodyText": "It is not used to send packet-out for discovery requests (but used to send flow-ping). And we have the same log message of \"old\" way to send OF messages (https://github.com/telstra/open-kilda/blob/develop/src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/switchmanager/SwitchManager.java#L2680).\nI propose to give it a try and collect some usage experience. After that, we can decide how to improve it.", "author": "surabujin", "createdAt": "2020-02-11T12:30:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU3MzA1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg2NjQ1OQ==", "url": "https://github.com/telstra/open-kilda/pull/3191#discussion_r377866459", "bodyText": "ok", "author": "pzakatov", "createdAt": "2020-02-11T19:59:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU3MzA1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEyNDk0NA==", "url": "https://github.com/telstra/open-kilda/pull/3191#discussion_r378124944", "bodyText": "could you please confirm that this xid is  already set, the same question is valid for all requests from this StatisticsService", "author": "timofei-durakov", "createdAt": "2020-02-12T09:20:01Z", "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/statistics/StatisticsService.java", "diffHunk": "@@ -168,11 +168,10 @@ private void gatherPortStats(IOFSwitch iofSwitch) {\n                 .setPortNo(OFPort.ANY)\n                 .build();\n \n-        logger.trace(\"Getting port stats for switch={}\", iofSwitch.getId());\n+        logger.info(\"Getting port stats for switch={} OF-xid:{}\", iofSwitch.getId(), portStatsRequest.getXid());", "originalCommit": "7d2d3e029190a48c3349d2592889f3f562b7c876", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}