{"pr_number": 3386, "pr_title": "Fixed incorrect NoviflowSpecificFeature methods", "pr_createdAt": "2020-04-13T12:40:58Z", "pr_url": "https://github.com/telstra/open-kilda/pull/3386", "timeline": [{"oid": "a2891402f9344365849b2bcbc72123f45262fa86", "url": "https://github.com/telstra/open-kilda/commit/a2891402f9344365849b2bcbc72123f45262fa86", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches", "committedDate": "2020-04-14T10:15:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4MDg5NA==", "url": "https://github.com/telstra/open-kilda/pull/3386#discussion_r408080894", "bodyText": "let's rename it to something like isWBSeries", "author": "timofei-durakov", "createdAt": "2020-04-14T12:01:02Z", "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/feature/NoviflowSpecificFeature.java", "diffHunk": "@@ -23,15 +23,28 @@\n abstract class NoviflowSpecificFeature extends AbstractFeature {\n     public static final String NOVIFLOW_MANUFACTURER_SUFFIX = \"noviflow\";\n \n-    boolean isNoviSwitch(IOFSwitch sw) {\n-        Optional<SwitchDescription> description = Optional.ofNullable(sw.getSwitchDescription());\n-        return description\n-                .map(SwitchDescription::getManufacturerDescription)\n+    static boolean isNoviSwitch(IOFSwitch sw) {\n+        if (sw == null || sw.getSwitchDescription() == null) {\n+            return false;\n+        }\n+\n+        SwitchDescription description = sw.getSwitchDescription();\n+\n+        if (E_SWITCH_MANUFACTURER_DESCRIPTION.equalsIgnoreCase(description.getManufacturerDescription())) {\n+            return true;\n+        }\n+\n+        if (E_SWITCH_HARDWARE_DESCRIPTION_REGEX.matcher(\n+                Optional.ofNullable(description.getHardwareDescription()).orElse(\"\")).matches()) {\n+            return true;\n+        }\n+\n+        return Optional.ofNullable(description.getManufacturerDescription())\n                 .map(String::toLowerCase)\n                 .orElse(\"\").contains(NOVIFLOW_MANUFACTURER_SUFFIX);\n     }\n \n-    boolean is100GbHw(IOFSwitch sw) {\n+    static boolean is100GbHw(IOFSwitch sw) {", "originalCommit": "a2891402f9344365849b2bcbc72123f45262fa86", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4NzU0Mw==", "url": "https://github.com/telstra/open-kilda/pull/3386#discussion_r408087543", "bodyText": "fixed", "author": "niksv", "createdAt": "2020-04-14T12:13:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4MDg5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4MTExNg==", "url": "https://github.com/telstra/open-kilda/pull/3386#discussion_r408081116", "bodyText": "let's rename it to something like isSMSeries", "author": "timofei-durakov", "createdAt": "2020-04-14T12:01:26Z", "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/feature/NoviflowSpecificFeature.java", "diffHunk": "@@ -51,7 +64,7 @@ boolean is100GbHw(IOFSwitch sw) {\n                 .orElse(\"\")).matches();\n     }\n \n-    boolean isVirtual(IOFSwitch sw) {\n+    static boolean isVirtual(IOFSwitch sw) {", "originalCommit": "a2891402f9344365849b2bcbc72123f45262fa86", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4NzU4MA==", "url": "https://github.com/telstra/open-kilda/pull/3386#discussion_r408087580", "bodyText": "fixed", "author": "niksv", "createdAt": "2020-04-14T12:13:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4MTExNg=="}], "type": "inlineReview"}, {"oid": "3889056f55211b7665fa24566b9dd0933e7952a7", "url": "https://github.com/telstra/open-kilda/commit/3889056f55211b7665fa24566b9dd0933e7952a7", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches", "committedDate": "2020-04-14T12:12:45Z", "type": "forcePushed"}, {"oid": "d6c40df252053f77beaf4c9a05c1e8ad70211d38", "url": "https://github.com/telstra/open-kilda/commit/d6c40df252053f77beaf4c9a05c1e8ad70211d38", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches", "committedDate": "2020-04-14T12:47:31Z", "type": "commit"}, {"oid": "d6c40df252053f77beaf4c9a05c1e8ad70211d38", "url": "https://github.com/telstra/open-kilda/commit/d6c40df252053f77beaf4c9a05c1e8ad70211d38", "message": "Fixed incorrect NoviflowSpecificFeature methods\n\nMethods isNoviSwitch() and is100GbHw() returned incorrect values for\nWB5000 switches", "committedDate": "2020-04-14T12:47:31Z", "type": "forcePushed"}]}