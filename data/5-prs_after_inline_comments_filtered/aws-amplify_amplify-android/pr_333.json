{"pr_number": 333, "pr_title": "Make plugin configuration nullable", "pr_createdAt": "2020-03-26T20:53:02Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/333", "timeline": [{"oid": "7fea27b12b128d7e602e90f34cdf89a7f8201479", "url": "https://github.com/aws-amplify/amplify-android/commit/7fea27b12b128d7e602e90f34cdf89a7f8201479", "message": "Make plugin configuration nullable", "committedDate": "2020-03-26T20:50:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NjA4MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/333#discussion_r398896080", "bodyText": "Hm, I think this means the annotation should say @NonNull. If you throw an exception whenever you see a null param, it can't really be null.\n(In Java, any object can be null, but the annotation means what it ought to be, for the software to work as designed.)", "author": "jamesonwilliams", "createdAt": "2020-03-26T21:12:47Z", "path": "aws-analytics-pinpoint/src/main/java/com/amplifyframework/analytics/pinpoint/AmazonPinpointAnalyticsPlugin.java", "diffHunk": "@@ -305,7 +305,17 @@ public String getPluginKey() {\n      * {@inheritDoc}\n      */\n     @Override\n-    public void configure(@NonNull JSONObject pluginConfiguration, @NonNull Context context) throws AnalyticsException {\n+    public void configure(\n+            @Nullable JSONObject pluginConfiguration,\n+            @NonNull Context context\n+    ) throws AnalyticsException {\n+        if (pluginConfiguration == null) {\n+            throw new AnalyticsException(", "originalCommit": "7fea27b12b128d7e602e90f34cdf89a7f8201479", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NjgxOQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/333#discussion_r398896819", "bodyText": "Can you remove @Nullable from this? Or, possible write it like:\nvoid configure(/* maybe-@NonNull */ JSONObject pluginConfiguration ...)", "author": "jamesonwilliams", "createdAt": "2020-03-26T21:14:17Z", "path": "core/src/main/java/com/amplifyframework/core/plugin/Plugin.java", "diffHunk": "@@ -54,14 +54,17 @@\n     String getPluginKey();\n \n     /**\n-     * Configure the plugin with customized configuration object.\n+     * Configure the plugin with customized configuration object. A\n+     * plugin may or may not require plugin configuration, so see\n+     * the documentation for details.\n+     *\n      * This hook provides a good opportunity to instantiate resources.\n      * Any long-lived initialization should take place in {@link #initialize(Context)}, instead.\n      * @param pluginConfiguration plugin-specific configuration data\n      * @param context An Android Context\n      * @throws AmplifyException an error is encountered during configuration.\n      */\n-    void configure(@NonNull JSONObject pluginConfiguration, @NonNull Context context) throws AmplifyException;\n+    void configure(@Nullable JSONObject pluginConfiguration, @NonNull Context context) throws AmplifyException;", "originalCommit": "7fea27b12b128d7e602e90f34cdf89a7f8201479", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NzM2Mw==", "url": "https://github.com/aws-amplify/amplify-android/pull/333#discussion_r398897363", "bodyText": "It isn't; passing a null value here will result in a StorageException. This should say @NonNull.", "author": "jamesonwilliams", "createdAt": "2020-03-26T21:15:24Z", "path": "aws-storage-s3/src/main/java/com/amplifyframework/storage/s3/AWSS3StoragePlugin.java", "diffHunk": "@@ -107,7 +108,7 @@ public String getPluginKey() {\n \n     @Override\n     @SuppressWarnings(\"MagicNumber\") // TODO: Remove once default values are moved to configuration\n-    public void configure(@NonNull JSONObject pluginConfiguration, @NonNull Context context) throws StorageException {\n+    public void configure(@Nullable JSONObject pluginConfiguration, @NonNull Context context) throws StorageException {", "originalCommit": "7fea27b12b128d7e602e90f34cdf89a7f8201479", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "29790c0fcdc4603c612291571f21304c023e470e", "url": "https://github.com/aws-amplify/amplify-android/commit/29790c0fcdc4603c612291571f21304c023e470e", "message": "Remove annotation from plugin config", "committedDate": "2020-03-26T23:28:05Z", "type": "commit"}, {"oid": "29790c0fcdc4603c612291571f21304c023e470e", "url": "https://github.com/aws-amplify/amplify-android/commit/29790c0fcdc4603c612291571f21304c023e470e", "message": "Remove annotation from plugin config", "committedDate": "2020-03-26T23:28:05Z", "type": "forcePushed"}, {"oid": "f429c6b8d57c0ec3a68fc165b3f96623fbd3c616", "url": "https://github.com/aws-amplify/amplify-android/commit/f429c6b8d57c0ec3a68fc165b3f96623fbd3c616", "message": "Merge branch 'master' of https://github.com/aws-amplify/amplify-android into nullable-config", "committedDate": "2020-03-26T23:37:24Z", "type": "commit"}]}