{"pr_number": 440, "pr_title": "[core] Remove some sparsely or unused constructs", "pr_createdAt": "2020-05-08T07:40:08Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/440", "timeline": [{"oid": "c3964329ee90d049e84a2526bbbc53a3f3a34973", "url": "https://github.com/aws-amplify/amplify-android/commit/c3964329ee90d049e84a2526bbbc53a3f3a34973", "message": "[core] Remove some sparesely or unused constructs\n\n1. AmplifyOperationRequest: It wasn't used anywhere.\n3. AsyncEvent: It wasn't used anywhere.\n2. AsyncOperation: AmplifyOperation did extend this, but for no apparent\n   purpose, in practice. AmplifyOperation can include a `start()`,\n   itself.\n4. EventListener: It was being used cosmetically by Hub, but the\n   implementation was a shell implementation that was not being called\n   anywhere. Both were removed.\n5. Options: It was a marker interface, with no explicit type references.\n   Subclasses may be assigned by their direct type, now, instead.\n6. Result: It was a marker interface, with no explicit type references.\n   Subclasses may be assigned by their direct type, now, instead.", "committedDate": "2020-05-08T07:36:41Z", "type": "commit"}, {"oid": "c3964329ee90d049e84a2526bbbc53a3f3a34973", "url": "https://github.com/aws-amplify/amplify-android/commit/c3964329ee90d049e84a2526bbbc53a3f3a34973", "message": "[core] Remove some sparesely or unused constructs\n\n1. AmplifyOperationRequest: It wasn't used anywhere.\n3. AsyncEvent: It wasn't used anywhere.\n2. AsyncOperation: AmplifyOperation did extend this, but for no apparent\n   purpose, in practice. AmplifyOperation can include a `start()`,\n   itself.\n4. EventListener: It was being used cosmetically by Hub, but the\n   implementation was a shell implementation that was not being called\n   anywhere. Both were removed.\n5. Options: It was a marker interface, with no explicit type references.\n   Subclasses may be assigned by their direct type, now, instead.\n6. Result: It was a marker interface, with no explicit type references.\n   Subclasses may be assigned by their direct type, now, instead.", "committedDate": "2020-05-08T07:36:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NTY0Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/440#discussion_r422255646", "bodyText": "Are you sure that we should get rid of this? Even though this isn't used at the moment, this will be necessary for subscribing to hub events by operation (which is currently broken, but that needs to be fixed right?)", "author": "raphkim", "createdAt": "2020-05-08T16:57:52Z", "path": "core/src/main/java/com/amplifyframework/core/async/AmplifyOperation.java", "diffHunk": "@@ -59,18 +49,9 @@\n     protected AmplifyOperation(@NonNull final CategoryType categoryType,\n                                @Nullable final R request) {\n         this.categoryType = categoryType;\n-        this.operationId = UUID.randomUUID();\n         this.request = request;\n     }\n \n-    /**\n-     * Gets the ID of the operation.\n-     * @return Operation unique ID\n-     */\n-    public final UUID getOperationId() {", "originalCommit": "c3964329ee90d049e84a2526bbbc53a3f3a34973", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI2OTI2Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/440#discussion_r422269266", "bodyText": "I think the operation-integration hub events might be cool, but we're not very close to having them, I don't think. We should come back and look at this integration after GA.", "author": "jamesonwilliams", "createdAt": "2020-05-08T17:25:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NTY0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NzIzMA==", "url": "https://github.com/aws-amplify/amplify-android/pull/440#discussion_r422257230", "bodyText": "Ah I see you are removing this also. Nevermind about my comment about operation ID then.\nWould it be a non-trivial task to fix this before GA?", "author": "raphkim", "createdAt": "2020-05-08T17:00:56Z", "path": "core/src/main/java/com/amplifyframework/hub/HubCategory.java", "diffHunk": "@@ -72,33 +70,6 @@ public CategoryType getCategoryType() {\n         return CategoryType.HUB;\n     }\n \n-    /**\n-     * Convenience method to allow callers to subscribe to Hub events\n-     * for a particular operation.  Internally, the subscription\n-     * transforms the HubEvent into the Operation's expected AsyncEvent\n-     * type, so callers may re-use their `subscriber`s.\n-     *\n-     * @param operation The operation to subscribe to events for\n-     * @param eventListener The Operation-specific listener to be invoked\n-     *                 when an AsyncEvent for that operation is received.\n-     * @param <E> The type of the event that the event listener will receive\n-     * @param <R> The type of the request object of the {@link AmplifyOperation}\n-     * @return A subscription token\n-     */\n-    @NonNull\n-    public <E, R> SubscriptionToken subscribe(\n-            @NonNull final AmplifyOperation<R> operation,\n-            @SuppressWarnings(\"unused\") @NonNull final EventListener<E> eventListener) {\n-        HubChannel channel = HubChannel.forCategoryType(operation.getCategoryType());\n-        HubSubscriber transformingListener = event -> {\n-            // TODO: check for casting of Object to E and\n-            // see if it can be prevented.\n-            // eventListener.onEvent(event.getData());\n-        };\n-\n-        return subscribe(channel, event -> true, transformingListener);\n-    }\n-", "originalCommit": "c3964329ee90d049e84a2526bbbc53a3f3a34973", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI2ODkwMQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/440#discussion_r422268901", "bodyText": "I haven't thought much about what we would need to do here. I think it will take a bit of study to see what iOS is doing, and rebuild from that. We should talk to Tim, and revisit this Hub integration, probably after GA.", "author": "jamesonwilliams", "createdAt": "2020-05-08T17:24:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NzIzMA=="}], "type": "inlineReview"}]}