{"pr_number": 3164, "pr_title": "Otp2 remove legswitch and cleanup unused Astar code", "pr_createdAt": "2020-08-27T10:35:23Z", "pr_url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164", "timeline": [{"oid": "46a73cb24a3482bfc0686058423842177a755a79", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/46a73cb24a3482bfc0686058423842177a755a79", "message": "Remove LegSwitchEdge and AStar intermediate places search", "committedDate": "2020-08-27T09:29:38Z", "type": "commit"}, {"oid": "88d6713c4bac0d7b04c7832addfdbfc212068aae", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/88d6713c4bac0d7b04c7832addfdbfc212068aae", "message": "Override getName method for TransitStopVertex", "committedDate": "2020-08-27T09:54:03Z", "type": "commit"}, {"oid": "cf014eb3df7f5c7b9683514ae36ac62d92a5a5c3", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/cf014eb3df7f5c7b9683514ae36ac62d92a5a5c3", "message": "Remove obsolete astar code", "committedDate": "2020-08-27T10:05:17Z", "type": "commit"}, {"oid": "9073a5bb93d38524c74e9d97a4cac4eddcc81468", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/9073a5bb93d38524c74e9d97a4cac4eddcc81468", "message": "Do not add 1 second when traversing StreetTransitLink", "committedDate": "2020-08-27T10:12:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM0MTQ3MQ==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#discussion_r478341471", "bodyText": "PatternInterlineDwell edges should not exist anymore", "author": "hannesj", "createdAt": "2020-08-27T11:19:02Z", "path": "src/main/java/org/opentripplanner/routing/algorithm/mapping/GraphPathToItineraryMapper.java", "diffHunk": "@@ -176,9 +176,8 @@ private static CoordinateArrayListSequence makeCoordinates(Edge[] edges) {\n \n     /**\n      * Slice a {@link State} array at the leg boundaries. Leg switches occur when:\n-     * 1. A LEG_SWITCH mode (which itself isn't part of any leg) is seen\n-     * 2. The mode changes otherwise, for instance from BICYCLE to WALK\n-     * 3. A PatternInterlineDwell edge (i.e. interlining) is seen\n+     * 1. The mode changes otherwise, for instance from BICYCLE to WALK\n+     * 2. A PatternInterlineDwell edge (i.e. interlining) is seen", "originalCommit": "9073a5bb93d38524c74e9d97a4cac4eddcc81468", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODkxNTIxNg==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#discussion_r478915216", "bodyText": "You're right. I've changed the javadoc accordingly.", "author": "gmellemstrand", "createdAt": "2020-08-28T08:04:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM0MTQ3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMTUyOA==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#discussion_r478421528", "bodyText": "We will want to test that paths containing a park and ride transition are still properly broken into legs after these changes. It seems like they would be, but probably worth testing.", "author": "abyrd", "createdAt": "2020-08-27T13:32:15Z", "path": "src/main/java/org/opentripplanner/routing/edgetype/ParkAndRideEdge.java", "diffHunk": "@@ -51,7 +51,6 @@ public State traverse(State s0) {\n             s1.incrementWeight(time);\n             s1.incrementTimeInSeconds(time);\n             s1.setCarParked(false);\n-            s1.setBackMode(TraverseMode.LEG_SWITCH);", "originalCommit": "9073a5bb93d38524c74e9d97a4cac4eddcc81468", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODkxNjkwMA==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#discussion_r478916900", "bodyText": "I did some tests of the park and ride functionality using the built-in client, and I got the the proper car->walk->transit transitions.", "author": "gmellemstrand", "createdAt": "2020-08-28T08:05:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMTUyOA=="}], "type": "inlineReview"}, {"oid": "2b7d143351c260f8a079c3bdf0104dafc7c8f082", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2b7d143351c260f8a079c3bdf0104dafc7c8f082", "message": "Remove PatternInterlineDwell from javadoc", "committedDate": "2020-08-28T07:56:58Z", "type": "commit"}, {"oid": "e8170abe4de9e2684d0a7a1f3b5cc48369ae7b5f", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/e8170abe4de9e2684d0a7a1f3b5cc48369ae7b5f", "message": "Merge branch 'dev-2.x' into otp2_remove_legswitch", "committedDate": "2020-08-28T08:19:21Z", "type": "commit"}, {"oid": "03b1b1e1b4129ee69133c53d329f13675db31dc9", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/03b1b1e1b4129ee69133c53d329f13675db31dc9", "message": "Remove unused SampleVertex", "committedDate": "2020-08-28T08:33:19Z", "type": "commit"}, {"oid": "3c55be417b0b095486554dd6dbda46bbae953663", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/3c55be417b0b095486554dd6dbda46bbae953663", "message": "Merge branch 'dev-2.x' into otp2_remove_legswitch", "committedDate": "2020-09-01T09:15:38Z", "type": "commit"}, {"oid": "d909eec9583e1de023d686b531515ca05ff231c6", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d909eec9583e1de023d686b531515ca05ff231c6", "message": "Merge branch 'dev-2.x' into otp2_remove_legswitch", "committedDate": "2020-09-01T15:07:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg0MjMwNw==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#discussion_r481842307", "bodyText": "Now this is returned in the walking instructions, should we try to generate a more descriptive name? Just return the name of the stop?", "author": "hannesj", "createdAt": "2020-09-02T07:42:20Z", "path": "src/main/java/org/opentripplanner/routing/edgetype/StreetTransitLink.java", "diffHunk": "@@ -54,10 +54,6 @@ public LineString getGeometry() {\n         return GeometryUtils.getGeometryFactory().createLineString(coordinates);\n     }\n \n-    public TraverseMode getMode() {\n-        return TraverseMode.LEG_SWITCH;\n-    }\n-\n     public String getName() {\n         return \"street transit link\";", "originalCommit": "d909eec9583e1de023d686b531515ca05ff231c6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk5MDYyNw==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#discussion_r481990627", "bodyText": "If we wanted to preserve the same behavior, just ignoring the edge would be correct, but that may not be what we want.\nWalk instructions like \"turn right onto Oslo Central Station\" does sound more useful to me. I pushed a commit with this change. I plan to work on moving the actual walk instructions over to the back end soon, and we may decide to further improve this. Maybe something like \"you are now at Oslo Central Station\".", "author": "gmellemstrand", "createdAt": "2020-09-02T11:15:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg0MjMwNw=="}], "type": "inlineReview"}, {"oid": "c1d56f9e305aec31c0e449b1911c72fd808a29ef", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c1d56f9e305aec31c0e449b1911c72fd808a29ef", "message": "Return name of stop for StreeTransitLink. Used for walk steps.", "committedDate": "2020-09-02T11:12:37Z", "type": "commit"}, {"oid": "3e2f6a822613c3b40059fc967951f3684f564601", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/3e2f6a822613c3b40059fc967951f3684f564601", "message": "Merge branch 'dev-2.x' into otp2_remove_legswitch", "committedDate": "2020-09-02T13:32:04Z", "type": "commit"}]}